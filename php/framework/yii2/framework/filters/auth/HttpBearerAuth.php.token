[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","filters",8],["T_NS_SEPARATOR","\\",8],["T_STRING","auth",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * HttpBearerAuth is an action filter that supports the authentication method based on HTTP Bearer token.\n *\n * You may use HttpBearerAuth by attaching it as a behavior to a controller or module, like the following:\n *\n * ```php\n * public function behaviors()\n * {\n *     return [\n *         'bearerAuth' => [\n *             'class' => \\yii\\filters\\auth\\HttpBearerAuth::className(),\n *         ],\n *     ];\n * }\n * ```\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",10],["T_WHITESPACE","\n",28],["T_CLASS","class",29],["T_WHITESPACE"," ",29],["T_STRING","HttpBearerAuth",29],["T_WHITESPACE"," ",29],["T_EXTENDS","extends",29],["T_WHITESPACE"," ",29],["T_STRING","AuthMethod",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n    ",30],["T_DOC_COMMENT","\/**\n     * @var string the HTTP authentication realm\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$realm",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'api'",34],";",["T_WHITESPACE","\n\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","authenticate",40],"(",["T_VARIABLE","$user",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$request",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$response",40],")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$authHeader",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$request",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getHeaders",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorization'",42],")",";",["T_WHITESPACE","\n        ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$authHeader",43],["T_WHITESPACE"," ",43],["T_IS_NOT_IDENTICAL","!==",43],["T_WHITESPACE"," ",43],["T_STRING","null",43],["T_WHITESPACE"," ",43],["T_BOOLEAN_AND","&&",43],["T_WHITESPACE"," ",43],["T_STRING","preg_match",43],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^Bearer\\s+(.*?)$\/'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$authHeader",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$matches",43],")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n            ",43],["T_VARIABLE","$identity",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$user",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","loginByAccessToken",44],"(",["T_VARIABLE","$matches",44],"[",["T_LNUMBER","1",44],"]",",",["T_WHITESPACE"," ",44],["T_STRING","get_class",44],"(",["T_VARIABLE","$this",44],")",")",";",["T_WHITESPACE","\n            ",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$identity",45],["T_WHITESPACE"," ",45],["T_IS_IDENTICAL","===",45],["T_WHITESPACE"," ",45],["T_STRING","null",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n                ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","handleFailure",46],"(",["T_VARIABLE","$response",46],")",";",["T_WHITESPACE","\n            ",46],"}",["T_WHITESPACE","\n            ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$identity",48],";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_STRING","null",51],";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",54],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","challenge",57],"(",["T_VARIABLE","$response",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$response",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getHeaders",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","set",59],"(",["T_CONSTANT_ENCAPSED_STRING","'WWW-Authenticate'",59],",",["T_WHITESPACE"," ",59],"\"",["T_ENCAPSED_AND_WHITESPACE","Bearer realm=\\\"",59],["T_CURLY_OPEN","{",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","realm",59],"}",["T_ENCAPSED_AND_WHITESPACE","\\\"",59],"\"",")",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n",60],"}",["T_WHITESPACE","\n",61]]
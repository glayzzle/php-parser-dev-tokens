[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","mutex",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * MysqlMutex implements mutex \"lock\" mechanism via MySQL locks.\n *\n * Application configuration example:\n *\n * ```\n * [\n *     'components' => [\n *         'db' => [\n *             'class' => 'yii\\db\\Connection',\n *             'dsn' => 'mysql:host=127.0.0.1;dbname=demo',\n *         ]\n *         'mutex' => [\n *             'class' => 'yii\\mutex\\MysqlMutex',\n *         ],\n *     ],\n * ]\n * ```\n *\n * @see Mutex\n *\n * @author resurtm <resurtm@gmail.com>\n * @since 2.0\n *\/",13],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","MysqlMutex",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","DbMutex",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * Initializes MySQL specific mutex component implementation.\n     * @throws InvalidConfigException if [[db]] is not MySQL connection.\n     *\/",39],["T_WHITESPACE","\n    ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","init",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","init",45],"(",")",";",["T_WHITESPACE","\n        ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","driverName",46],["T_WHITESPACE"," ",46],["T_IS_NOT_IDENTICAL","!==",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'mysql'",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n            ",46],["T_THROW","throw",47],["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","InvalidConfigException",47],"(",["T_CONSTANT_ENCAPSED_STRING","'In order to use MysqlMutex connection must be configured to use MySQL database.'",47],")",";",["T_WHITESPACE","\n        ",47],"}",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * Acquires lock by given name.\n     * @param string $name of the lock to be acquired.\n     * @param int $timeout to wait for lock to become released.\n     * @return bool acquiring result.\n     * @see http:\/\/dev.mysql.com\/doc\/refman\/5.0\/en\/miscellaneous-functions.html#function_get-lock\n     *\/",51],["T_WHITESPACE","\n    ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","acquireLock",58],"(",["T_VARIABLE","$name",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$timeout",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_BOOL_CAST","(bool)",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","db",60],["T_WHITESPACE","\n            ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","createCommand",61],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT GET_LOCK(:name, :timeout)'",61],",",["T_WHITESPACE"," ",61],"[",["T_CONSTANT_ENCAPSED_STRING","':name'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$name",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","':timeout'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$timeout",61],"]",")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","queryScalar",62],"(",")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Releases lock by given name.\n     * @param string $name of the lock to be released.\n     * @return bool release result.\n     * @see http:\/\/dev.mysql.com\/doc\/refman\/5.0\/en\/miscellaneous-functions.html#function_release-lock\n     *\/",65],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","releaseLock",71],"(",["T_VARIABLE","$name",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_BOOL_CAST","(bool)",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","db",73],["T_WHITESPACE","\n            ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","createCommand",74],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT RELEASE_LOCK(:name)'",74],",",["T_WHITESPACE"," ",74],"[",["T_CONSTANT_ENCAPSED_STRING","':name'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$name",74],"]",")",["T_WHITESPACE","\n            ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","queryScalar",75],"(",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n",76],"}",["T_WHITESPACE","\n",77]]
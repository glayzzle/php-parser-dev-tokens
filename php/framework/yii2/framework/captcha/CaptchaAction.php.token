[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","captcha",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Action",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","base",12],["T_NS_SEPARATOR","\\",12],["T_STRING","InvalidConfigException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","helpers",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Url",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","web",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Response",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * CaptchaAction renders a CAPTCHA image.\n *\n * CaptchaAction is used together with [[Captcha]] and [[\\yii\\captcha\\CaptchaValidator]]\n * to provide the [CAPTCHA](http:\/\/en.wikipedia.org\/wiki\/Captcha) feature.\n *\n * By configuring the properties of CaptchaAction, you may customize the appearance of\n * the generated CAPTCHA images, such as the font color, the background color, etc.\n *\n * Note that CaptchaAction requires either GD2 extension or ImageMagick PHP extension.\n *\n * Using CAPTCHA involves the following steps:\n *\n * 1. Override [[\\yii\\web\\Controller::actions()]] and register an action of class CaptchaAction with ID 'captcha'\n * 2. In the form model, declare an attribute to store user-entered verification code, and declare the attribute\n *    to be validated by the 'captcha' validator.\n * 3. In the controller view, insert a [[Captcha]] widget in the form.\n *\n * @property string $verifyCode The verification code. This property is read-only.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",16],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","CaptchaAction",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","Action",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * The name of the GET parameter indicating whether the CAPTCHA image should be regenerated.\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_CONST","const",44],["T_WHITESPACE"," ",44],["T_STRING","REFRESH_GET_VAR",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'refresh'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var int how many times should the same CAPTCHA be displayed. Defaults to 3.\n     * A value less than or equal to 0 means the test is unlimited (available since version 1.1.2).\n     *\/",46],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$testLimit",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","3",50],";",["T_WHITESPACE","\n    ",50],["T_DOC_COMMENT","\/**\n     * @var int the width of the generated CAPTCHA image. Defaults to 120.\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$width",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_LNUMBER","120",54],";",["T_WHITESPACE","\n    ",54],["T_DOC_COMMENT","\/**\n     * @var int the height of the generated CAPTCHA image. Defaults to 50.\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$height",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","50",58],";",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * @var int padding around the text. Defaults to 2.\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$padding",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_LNUMBER","2",62],";",["T_WHITESPACE","\n    ",62],["T_DOC_COMMENT","\/**\n     * @var int the background color. For example, 0x55FF00.\n     * Defaults to 0xFFFFFF, meaning white color.\n     *\/",63],["T_WHITESPACE","\n    ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$backColor",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_LNUMBER","0xFFFFFF",67],";",["T_WHITESPACE","\n    ",67],["T_DOC_COMMENT","\/**\n     * @var int the font color. For example, 0x55FF00. Defaults to 0x2040A0 (blue color).\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$foreColor",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_LNUMBER","0x2040A0",71],";",["T_WHITESPACE","\n    ",71],["T_DOC_COMMENT","\/**\n     * @var bool whether to use transparent background. Defaults to false.\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$transparent",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","false",75],";",["T_WHITESPACE","\n    ",75],["T_DOC_COMMENT","\/**\n     * @var int the minimum length for randomly generated word. Defaults to 6.\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$minLength",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_LNUMBER","6",79],";",["T_WHITESPACE","\n    ",79],["T_DOC_COMMENT","\/**\n     * @var int the maximum length for randomly generated word. Defaults to 7.\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$maxLength",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_LNUMBER","7",83],";",["T_WHITESPACE","\n    ",83],["T_DOC_COMMENT","\/**\n     * @var int the offset between characters. Defaults to -2. You can adjust this property\n     * in order to decrease or increase the readability of the captcha.\n     *\/",84],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$offset",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"-",["T_LNUMBER","2",88],";",["T_WHITESPACE","\n    ",88],["T_DOC_COMMENT","\/**\n     * @var string the TrueType font file. This can be either a file path or path alias.\n     *\/",89],["T_WHITESPACE","\n    ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$fontFile",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'@yii\/captcha\/SpicyRice.ttf'",92],";",["T_WHITESPACE","\n    ",92],["T_DOC_COMMENT","\/**\n     * @var string the fixed verification code. When this property is set,\n     * [[getVerifyCode()]] will always return the value of this property.\n     * This is mainly used in automated tests where we want to be able to reproduce\n     * the same verification code each time we run the tests.\n     * If not set, it means the verification code will be randomly generated.\n     *\/",93],["T_WHITESPACE","\n    ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$fixedVerifyCode",100],";",["T_WHITESPACE","\n    ",100],["T_DOC_COMMENT","\/**\n     * @var string the rendering library to use. Currently supported only 'gd' and 'imagick'.\n     * If not set, library will be determined automatically.\n     * @since 2.0.7\n     *\/",101],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$imageLibrary",106],";",["T_WHITESPACE","\n\n\n    ",106],["T_DOC_COMMENT","\/**\n     * Initializes the action.\n     * @throws InvalidConfigException if the font file does not exist.\n     *\/",109],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","init",113],"(",")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","fontFile",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","Yii",115],["T_DOUBLE_COLON","::",115],["T_STRING","getAlias",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","fontFile",115],")",";",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_STRING","is_file",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","fontFile",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_THROW","throw",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","InvalidConfigException",117],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The font file does not exist: ",117],["T_CURLY_OPEN","{",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","fontFile",117],"}","\"",")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Runs the action.\n     *\/",121],["T_WHITESPACE","\n    ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","run",124],"(",")",["T_WHITESPACE","\n    ",124],"{",["T_WHITESPACE","\n        ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_STRING","Yii",126],["T_DOUBLE_COLON","::",126],["T_VARIABLE","$app",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","request",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getQueryParam",126],"(",["T_STRING","self",126],["T_DOUBLE_COLON","::",126],["T_STRING","REFRESH_GET_VAR",126],")",["T_WHITESPACE"," ",126],["T_IS_NOT_IDENTICAL","!==",126],["T_WHITESPACE"," ",126],["T_STRING","null",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_COMMENT","\/\/ AJAX request for regenerating code\n",127],["T_WHITESPACE","            ",128],["T_VARIABLE","$code",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getVerifyCode",128],"(",["T_STRING","true",128],")",";",["T_WHITESPACE","\n            ",128],["T_STRING","Yii",129],["T_DOUBLE_COLON","::",129],["T_VARIABLE","$app",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","response",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","format",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Response",129],["T_DOUBLE_COLON","::",129],["T_STRING","FORMAT_JSON",129],";",["T_WHITESPACE","\n            ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],"[",["T_WHITESPACE","\n                ",130],["T_CONSTANT_ENCAPSED_STRING","'hash1'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","generateValidationHash",131],"(",["T_VARIABLE","$code",131],")",",",["T_WHITESPACE","\n                ",131],["T_CONSTANT_ENCAPSED_STRING","'hash2'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","generateValidationHash",132],"(",["T_STRING","strtolower",132],"(",["T_VARIABLE","$code",132],")",")",",",["T_WHITESPACE","\n                ",132],["T_COMMENT","\/\/ we add a random 'v' parameter so that FireFox can refresh the image\n",133],["T_WHITESPACE","                ",134],["T_COMMENT","\/\/ when src attribute of image tag is changed\n",134],["T_WHITESPACE","                ",135],["T_CONSTANT_ENCAPSED_STRING","'url'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","Url",135],["T_DOUBLE_COLON","::",135],["T_STRING","to",135],"(","[",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","id",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'v'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","uniqid",135],"(",")","]",")",",",["T_WHITESPACE","\n            ",135],"]",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE"," ",137],["T_ELSE","else",137],["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","setHttpHeaders",138],"(",")",";",["T_WHITESPACE","\n            ",138],["T_STRING","Yii",139],["T_DOUBLE_COLON","::",139],["T_VARIABLE","$app",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","response",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","format",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","Response",139],["T_DOUBLE_COLON","::",139],["T_STRING","FORMAT_RAW",139],";",["T_WHITESPACE","\n            ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","renderImage",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getVerifyCode",140],"(",")",")",";",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Generates a hash code that can be used for client-side validation.\n     * @param string $code the CAPTCHA code\n     * @return string a hash code generated from the CAPTCHA code\n     *\/",144],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","generateValidationHash",149],"(",["T_VARIABLE","$code",149],")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_FOR","for",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$h",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$i",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","strlen",151],"(",["T_VARIABLE","$code",151],")",["T_WHITESPACE"," ",151],"-",["T_WHITESPACE"," ",151],["T_LNUMBER","1",151],";",["T_WHITESPACE"," ",151],["T_VARIABLE","$i",151],["T_WHITESPACE"," ",151],["T_IS_GREATER_OR_EQUAL",">=",151],["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],";",["T_WHITESPACE"," ",151],["T_DEC","--",151],["T_VARIABLE","$i",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$h",152],["T_WHITESPACE"," ",152],["T_PLUS_EQUAL","+=",152],["T_WHITESPACE"," ",152],["T_STRING","ord",152],"(",["T_VARIABLE","$code",152],"[",["T_VARIABLE","$i",152],"]",")",";",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$h",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * Gets the verification code.\n     * @param bool $regenerate whether the verification code should be regenerated.\n     * @return string the verification code.\n     *\/",158],["T_WHITESPACE","\n    ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","getVerifyCode",163],"(",["T_VARIABLE","$regenerate",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","false",163],")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","fixedVerifyCode",165],["T_WHITESPACE"," ",165],["T_IS_NOT_IDENTICAL","!==",165],["T_WHITESPACE"," ",165],["T_STRING","null",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","fixedVerifyCode",166],";",["T_WHITESPACE","\n        ",166],"}",["T_WHITESPACE","\n\n        ",167],["T_VARIABLE","$session",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","Yii",169],["T_DOUBLE_COLON","::",169],["T_VARIABLE","$app",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getSession",169],"(",")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$session",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","open",170],"(",")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$name",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getSessionKey",171],"(",")",";",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$session",172],"[",["T_VARIABLE","$name",172],"]",["T_WHITESPACE"," ",172],["T_IS_IDENTICAL","===",172],["T_WHITESPACE"," ",172],["T_STRING","null",172],["T_WHITESPACE"," ",172],["T_BOOLEAN_OR","||",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$regenerate",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_VARIABLE","$session",173],"[",["T_VARIABLE","$name",173],"]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","generateVerifyCode",173],"(",")",";",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$session",174],"[",["T_VARIABLE","$name",174],["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'count'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_LNUMBER","1",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n\n        ",175],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$session",177],"[",["T_VARIABLE","$name",177],"]",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Validates the input to see if it matches the generated code.\n     * @param string $input user input\n     * @param bool $caseSensitive whether the comparison should be case-sensitive\n     * @return bool whether the input is valid\n     *\/",180],["T_WHITESPACE","\n    ",185],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","validate",186],"(",["T_VARIABLE","$input",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$caseSensitive",186],")",["T_WHITESPACE","\n    ",186],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$code",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getVerifyCode",188],"(",")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$valid",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$caseSensitive",189],["T_WHITESPACE"," ",189],"?",["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$input",189],["T_WHITESPACE"," ",189],["T_IS_IDENTICAL","===",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$code",189],")",["T_WHITESPACE"," ",189],":",["T_WHITESPACE"," ",189],["T_STRING","strcasecmp",189],"(",["T_VARIABLE","$input",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$code",189],")",["T_WHITESPACE"," ",189],["T_IS_IDENTICAL","===",189],["T_WHITESPACE"," ",189],["T_LNUMBER","0",189],";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$session",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Yii",190],["T_DOUBLE_COLON","::",190],["T_VARIABLE","$app",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getSession",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$session",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","open",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$name",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getSessionKey",192],"(",")",["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'count'",192],";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$session",193],"[",["T_VARIABLE","$name",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$session",193],"[",["T_VARIABLE","$name",193],"]",["T_WHITESPACE"," ",193],"+",["T_WHITESPACE"," ",193],["T_LNUMBER","1",193],";",["T_WHITESPACE","\n        ",193],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$valid",194],["T_WHITESPACE"," ",194],["T_BOOLEAN_OR","||",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$session",194],"[",["T_VARIABLE","$name",194],"]",["T_WHITESPACE"," ",194],">",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","testLimit",194],["T_WHITESPACE"," ",194],["T_BOOLEAN_AND","&&",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","testLimit",194],["T_WHITESPACE"," ",194],">",["T_WHITESPACE"," ",194],["T_LNUMBER","0",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getVerifyCode",195],"(",["T_STRING","true",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$valid",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * Generates a new verification code.\n     * @return string the generated verification code\n     *\/",201],["T_WHITESPACE","\n    ",204],["T_PROTECTED","protected",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","generateVerifyCode",205],"(",")",["T_WHITESPACE","\n    ",205],"{",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","minLength",207],["T_WHITESPACE"," ",207],">",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","maxLength",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","maxLength",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","minLength",208],";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","minLength",210],["T_WHITESPACE"," ",210],"<",["T_WHITESPACE"," ",210],["T_LNUMBER","3",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","minLength",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_LNUMBER","3",211],";",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE","\n        ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","maxLength",213],["T_WHITESPACE"," ",213],">",["T_WHITESPACE"," ",213],["T_LNUMBER","20",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","maxLength",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","20",214],";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$length",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_STRING","mt_rand",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","minLength",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","maxLength",216],")",";",["T_WHITESPACE","\n\n        ",216],["T_VARIABLE","$letters",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'bcdfghjklmnpqrstvwxyz'",218],";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$vowels",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'aeiou'",219],";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$code",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","''",220],";",["T_WHITESPACE","\n        ",220],["T_FOR","for",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$i",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_LNUMBER","0",221],";",["T_WHITESPACE"," ",221],["T_VARIABLE","$i",221],["T_WHITESPACE"," ",221],"<",["T_WHITESPACE"," ",221],["T_VARIABLE","$length",221],";",["T_WHITESPACE"," ",221],["T_INC","++",221],["T_VARIABLE","$i",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$i",222],["T_WHITESPACE"," ",222],"%",["T_WHITESPACE"," ",222],["T_LNUMBER","2",222],["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE"," ",222],["T_STRING","mt_rand",222],"(",["T_LNUMBER","0",222],",",["T_WHITESPACE"," ",222],["T_LNUMBER","10",222],")",["T_WHITESPACE"," ",222],">",["T_WHITESPACE"," ",222],["T_LNUMBER","2",222],["T_WHITESPACE"," ",222],["T_BOOLEAN_OR","||",222],["T_WHITESPACE"," ",222],"!","(",["T_VARIABLE","$i",222],["T_WHITESPACE"," ",222],"%",["T_WHITESPACE"," ",222],["T_LNUMBER","2",222],")",["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE"," ",222],["T_STRING","mt_rand",222],"(",["T_LNUMBER","0",222],",",["T_WHITESPACE"," ",222],["T_LNUMBER","10",222],")",["T_WHITESPACE"," ",222],">",["T_WHITESPACE"," ",222],["T_LNUMBER","9",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$code",223],["T_WHITESPACE"," ",223],["T_CONCAT_EQUAL",".=",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$vowels",223],"[",["T_STRING","mt_rand",223],"(",["T_LNUMBER","0",223],",",["T_WHITESPACE"," ",223],["T_LNUMBER","4",223],")","]",";",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE"," ",224],["T_ELSE","else",224],["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                ",224],["T_VARIABLE","$code",225],["T_WHITESPACE"," ",225],["T_CONCAT_EQUAL",".=",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$letters",225],"[",["T_STRING","mt_rand",225],"(",["T_LNUMBER","0",225],",",["T_WHITESPACE"," ",225],["T_LNUMBER","20",225],")","]",";",["T_WHITESPACE","\n            ",225],"}",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n\n        ",227],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$code",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * Returns the session variable name used to store verification code.\n     * @return string the session variable name\n     *\/",232],["T_WHITESPACE","\n    ",235],["T_PROTECTED","protected",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","getSessionKey",236],"(",")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'__captcha\/'",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getUniqueId",238],"(",")",";",["T_WHITESPACE","\n    ",238],"}",["T_WHITESPACE","\n\n    ",239],["T_DOC_COMMENT","\/**\n     * Renders the CAPTCHA image.\n     * @param string $code the verification code\n     * @return string image contents\n     * @throws InvalidConfigException if imageLibrary is not supported\n     *\/",241],["T_WHITESPACE","\n    ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","renderImage",247],"(",["T_VARIABLE","$code",247],")",["T_WHITESPACE","\n    ",247],"{",["T_WHITESPACE","\n        ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_ISSET","isset",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","imageLibrary",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$imageLibrary",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","imageLibrary",250],";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE"," ",251],["T_ELSE","else",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$imageLibrary",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_STRING","Captcha",252],["T_DOUBLE_COLON","::",252],["T_STRING","checkRequirements",252],"(",")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n        ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$imageLibrary",254],["T_WHITESPACE"," ",254],["T_IS_IDENTICAL","===",254],["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'gd'",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n            ",254],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","renderImageByGD",255],"(",["T_VARIABLE","$code",255],")",";",["T_WHITESPACE","\n        ",255],"}",["T_WHITESPACE"," ",256],["T_ELSEIF","elseif",256],["T_WHITESPACE"," ",256],"(",["T_VARIABLE","$imageLibrary",256],["T_WHITESPACE"," ",256],["T_IS_IDENTICAL","===",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'imagick'",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","renderImageByImagick",257],"(",["T_VARIABLE","$code",257],")",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE"," ",258],["T_ELSE","else",258],["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_THROW","throw",259],["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_STRING","InvalidConfigException",259],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Defined library '",259],["T_CURLY_OPEN","{",259],["T_VARIABLE","$imageLibrary",259],"}",["T_ENCAPSED_AND_WHITESPACE","' is not supported",259],"\"",")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * Renders the CAPTCHA image based on the code using GD library.\n     * @param string $code the verification code\n     * @return string image contents in PNG format.\n     *\/",263],["T_WHITESPACE","\n    ",267],["T_PROTECTED","protected",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","renderImageByGD",268],"(",["T_VARIABLE","$code",268],")",["T_WHITESPACE","\n    ",268],"{",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$image",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","imagecreatetruecolor",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","width",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","height",270],")",";",["T_WHITESPACE","\n\n        ",270],["T_VARIABLE","$backColor",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","imagecolorallocate",272],"(",["T_WHITESPACE","\n            ",272],["T_VARIABLE","$image",273],",",["T_WHITESPACE","\n            ",273],["T_INT_CAST","(int)",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","backColor",274],["T_WHITESPACE"," ",274],"%",["T_WHITESPACE"," ",274],["T_LNUMBER","0x1000000",274],["T_WHITESPACE"," ",274],"\/",["T_WHITESPACE"," ",274],["T_LNUMBER","0x10000",274],")",",",["T_WHITESPACE","\n            ",274],["T_INT_CAST","(int)",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","backColor",275],["T_WHITESPACE"," ",275],"%",["T_WHITESPACE"," ",275],["T_LNUMBER","0x10000",275],["T_WHITESPACE"," ",275],"\/",["T_WHITESPACE"," ",275],["T_LNUMBER","0x100",275],")",",",["T_WHITESPACE","\n            ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","backColor",276],["T_WHITESPACE"," ",276],"%",["T_WHITESPACE"," ",276],["T_LNUMBER","0x100",276],["T_WHITESPACE","\n        ",276],")",";",["T_WHITESPACE","\n        ",277],["T_STRING","imagefilledrectangle",278],"(",["T_VARIABLE","$image",278],",",["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],",",["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","width",278],["T_WHITESPACE"," ",278],"-",["T_WHITESPACE"," ",278],["T_LNUMBER","1",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","height",278],["T_WHITESPACE"," ",278],"-",["T_WHITESPACE"," ",278],["T_LNUMBER","1",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$backColor",278],")",";",["T_WHITESPACE","\n        ",278],["T_STRING","imagecolordeallocate",279],"(",["T_VARIABLE","$image",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$backColor",279],")",";",["T_WHITESPACE","\n\n        ",279],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","transparent",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_STRING","imagecolortransparent",282],"(",["T_VARIABLE","$image",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$backColor",282],")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n\n        ",283],["T_VARIABLE","$foreColor",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","imagecolorallocate",285],"(",["T_WHITESPACE","\n            ",285],["T_VARIABLE","$image",286],",",["T_WHITESPACE","\n            ",286],["T_INT_CAST","(int)",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","foreColor",287],["T_WHITESPACE"," ",287],"%",["T_WHITESPACE"," ",287],["T_LNUMBER","0x1000000",287],["T_WHITESPACE"," ",287],"\/",["T_WHITESPACE"," ",287],["T_LNUMBER","0x10000",287],")",",",["T_WHITESPACE","\n            ",287],["T_INT_CAST","(int)",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","foreColor",288],["T_WHITESPACE"," ",288],"%",["T_WHITESPACE"," ",288],["T_LNUMBER","0x10000",288],["T_WHITESPACE"," ",288],"\/",["T_WHITESPACE"," ",288],["T_LNUMBER","0x100",288],")",",",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","foreColor",289],["T_WHITESPACE"," ",289],"%",["T_WHITESPACE"," ",289],["T_LNUMBER","0x100",289],["T_WHITESPACE","\n        ",289],")",";",["T_WHITESPACE","\n\n        ",290],["T_VARIABLE","$length",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","strlen",292],"(",["T_VARIABLE","$code",292],")",";",["T_WHITESPACE","\n        ",292],["T_VARIABLE","$box",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","imagettfbbox",293],"(",["T_LNUMBER","30",293],",",["T_WHITESPACE"," ",293],["T_LNUMBER","0",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","fontFile",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$code",293],")",";",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$w",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$box",294],"[",["T_LNUMBER","4",294],"]",["T_WHITESPACE"," ",294],"-",["T_WHITESPACE"," ",294],["T_VARIABLE","$box",294],"[",["T_LNUMBER","0",294],"]",["T_WHITESPACE"," ",294],"+",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","offset",294],["T_WHITESPACE"," ",294],"*",["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$length",294],["T_WHITESPACE"," ",294],"-",["T_WHITESPACE"," ",294],["T_LNUMBER","1",294],")",";",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$h",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$box",295],"[",["T_LNUMBER","1",295],"]",["T_WHITESPACE"," ",295],"-",["T_WHITESPACE"," ",295],["T_VARIABLE","$box",295],"[",["T_LNUMBER","5",295],"]",";",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$scale",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","min",296],"(","(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","width",296],["T_WHITESPACE"," ",296],"-",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","padding",296],["T_WHITESPACE"," ",296],"*",["T_WHITESPACE"," ",296],["T_LNUMBER","2",296],")",["T_WHITESPACE"," ",296],"\/",["T_WHITESPACE"," ",296],["T_VARIABLE","$w",296],",",["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","height",296],["T_WHITESPACE"," ",296],"-",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","padding",296],["T_WHITESPACE"," ",296],"*",["T_WHITESPACE"," ",296],["T_LNUMBER","2",296],")",["T_WHITESPACE"," ",296],"\/",["T_WHITESPACE"," ",296],["T_VARIABLE","$h",296],")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$x",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_LNUMBER","10",297],";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$y",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","round",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","height",298],["T_WHITESPACE"," ",298],"*",["T_WHITESPACE"," ",298],["T_LNUMBER","27",298],["T_WHITESPACE"," ",298],"\/",["T_WHITESPACE"," ",298],["T_LNUMBER","40",298],")",";",["T_WHITESPACE","\n        ",298],["T_FOR","for",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$i",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_LNUMBER","0",299],";",["T_WHITESPACE"," ",299],["T_VARIABLE","$i",299],["T_WHITESPACE"," ",299],"<",["T_WHITESPACE"," ",299],["T_VARIABLE","$length",299],";",["T_WHITESPACE"," ",299],["T_INC","++",299],["T_VARIABLE","$i",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_VARIABLE","$fontSize",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_INT_CAST","(int)",300],["T_WHITESPACE"," ",300],"(",["T_STRING","rand",300],"(",["T_LNUMBER","26",300],",",["T_WHITESPACE"," ",300],["T_LNUMBER","32",300],")",["T_WHITESPACE"," ",300],"*",["T_WHITESPACE"," ",300],["T_VARIABLE","$scale",300],["T_WHITESPACE"," ",300],"*",["T_WHITESPACE"," ",300],["T_DNUMBER","0.8",300],")",";",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$angle",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","rand",301],"(","-",["T_LNUMBER","10",301],",",["T_WHITESPACE"," ",301],["T_LNUMBER","10",301],")",";",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$letter",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$code",302],"[",["T_VARIABLE","$i",302],"]",";",["T_WHITESPACE","\n            ",302],["T_VARIABLE","$box",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","imagettftext",303],"(",["T_VARIABLE","$image",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$fontSize",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$angle",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$x",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$y",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$foreColor",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","fontFile",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$letter",303],")",";",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$x",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$box",304],"[",["T_LNUMBER","2",304],"]",["T_WHITESPACE"," ",304],"+",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","offset",304],";",["T_WHITESPACE","\n        ",304],"}",["T_WHITESPACE","\n\n        ",305],["T_STRING","imagecolordeallocate",307],"(",["T_VARIABLE","$image",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$foreColor",307],")",";",["T_WHITESPACE","\n\n        ",307],["T_STRING","ob_start",309],"(",")",";",["T_WHITESPACE","\n        ",309],["T_STRING","imagepng",310],"(",["T_VARIABLE","$image",310],")",";",["T_WHITESPACE","\n        ",310],["T_STRING","imagedestroy",311],"(",["T_VARIABLE","$image",311],")",";",["T_WHITESPACE","\n\n        ",311],["T_RETURN","return",313],["T_WHITESPACE"," ",313],["T_STRING","ob_get_clean",313],"(",")",";",["T_WHITESPACE","\n    ",313],"}",["T_WHITESPACE","\n\n    ",314],["T_DOC_COMMENT","\/**\n     * Renders the CAPTCHA image based on the code using ImageMagick library.\n     * @param string $code the verification code\n     * @return string image contents in PNG format.\n     *\/",316],["T_WHITESPACE","\n    ",320],["T_PROTECTED","protected",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","renderImageByImagick",321],"(",["T_VARIABLE","$code",321],")",["T_WHITESPACE","\n    ",321],"{",["T_WHITESPACE","\n        ",322],["T_VARIABLE","$backColor",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","transparent",323],["T_WHITESPACE"," ",323],"?",["T_WHITESPACE"," ",323],["T_NEW","new",323],["T_WHITESPACE"," ",323],["T_NS_SEPARATOR","\\",323],["T_STRING","ImagickPixel",323],"(",["T_CONSTANT_ENCAPSED_STRING","'transparent'",323],")",["T_WHITESPACE"," ",323],":",["T_WHITESPACE"," ",323],["T_NEW","new",323],["T_WHITESPACE"," ",323],["T_NS_SEPARATOR","\\",323],["T_STRING","ImagickPixel",323],"(",["T_CONSTANT_ENCAPSED_STRING","'#'",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_STRING","str_pad",323],"(",["T_STRING","dechex",323],"(",["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","backColor",323],")",",",["T_WHITESPACE"," ",323],["T_LNUMBER","6",323],",",["T_WHITESPACE"," ",323],["T_LNUMBER","0",323],",",["T_WHITESPACE"," ",323],["T_STRING","STR_PAD_LEFT",323],")",")",";",["T_WHITESPACE","\n        ",323],["T_VARIABLE","$foreColor",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_NEW","new",324],["T_WHITESPACE"," ",324],["T_NS_SEPARATOR","\\",324],["T_STRING","ImagickPixel",324],"(",["T_CONSTANT_ENCAPSED_STRING","'#'",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE"," ",324],["T_STRING","str_pad",324],"(",["T_STRING","dechex",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","foreColor",324],")",",",["T_WHITESPACE"," ",324],["T_LNUMBER","6",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","0",324],",",["T_WHITESPACE"," ",324],["T_STRING","STR_PAD_LEFT",324],")",")",";",["T_WHITESPACE","\n\n        ",324],["T_VARIABLE","$image",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_NEW","new",326],["T_WHITESPACE"," ",326],["T_NS_SEPARATOR","\\",326],["T_STRING","Imagick",326],"(",")",";",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$image",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","newImage",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","width",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","height",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$backColor",327],")",";",["T_WHITESPACE","\n\n        ",327],["T_VARIABLE","$draw",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_NEW","new",329],["T_WHITESPACE"," ",329],["T_NS_SEPARATOR","\\",329],["T_STRING","ImagickDraw",329],"(",")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$draw",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","setFont",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","fontFile",330],")",";",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$draw",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","setFontSize",331],"(",["T_LNUMBER","30",331],")",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$fontMetrics",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$image",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","queryFontMetrics",332],"(",["T_VARIABLE","$draw",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$code",332],")",";",["T_WHITESPACE","\n\n        ",332],["T_VARIABLE","$length",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","strlen",334],"(",["T_VARIABLE","$code",334],")",";",["T_WHITESPACE","\n        ",334],["T_VARIABLE","$w",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_INT_CAST","(int)",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$fontMetrics",335],"[",["T_CONSTANT_ENCAPSED_STRING","'textWidth'",335],"]",["T_WHITESPACE"," ",335],"-",["T_WHITESPACE"," ",335],["T_LNUMBER","8",335],["T_WHITESPACE"," ",335],"+",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","offset",335],["T_WHITESPACE"," ",335],"*",["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$length",335],["T_WHITESPACE"," ",335],"-",["T_WHITESPACE"," ",335],["T_LNUMBER","1",335],")",";",["T_WHITESPACE","\n        ",335],["T_VARIABLE","$h",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_INT_CAST","(int)",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$fontMetrics",336],"[",["T_CONSTANT_ENCAPSED_STRING","'textHeight'",336],"]",["T_WHITESPACE"," ",336],"-",["T_WHITESPACE"," ",336],["T_LNUMBER","8",336],";",["T_WHITESPACE","\n        ",336],["T_VARIABLE","$scale",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","min",337],"(","(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","width",337],["T_WHITESPACE"," ",337],"-",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","padding",337],["T_WHITESPACE"," ",337],"*",["T_WHITESPACE"," ",337],["T_LNUMBER","2",337],")",["T_WHITESPACE"," ",337],"\/",["T_WHITESPACE"," ",337],["T_VARIABLE","$w",337],",",["T_WHITESPACE"," ",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","height",337],["T_WHITESPACE"," ",337],"-",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","padding",337],["T_WHITESPACE"," ",337],"*",["T_WHITESPACE"," ",337],["T_LNUMBER","2",337],")",["T_WHITESPACE"," ",337],"\/",["T_WHITESPACE"," ",337],["T_VARIABLE","$h",337],")",";",["T_WHITESPACE","\n        ",337],["T_VARIABLE","$x",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_LNUMBER","10",338],";",["T_WHITESPACE","\n        ",338],["T_VARIABLE","$y",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_STRING","round",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","height",339],["T_WHITESPACE"," ",339],"*",["T_WHITESPACE"," ",339],["T_LNUMBER","27",339],["T_WHITESPACE"," ",339],"\/",["T_WHITESPACE"," ",339],["T_LNUMBER","40",339],")",";",["T_WHITESPACE","\n        ",339],["T_FOR","for",340],["T_WHITESPACE"," ",340],"(",["T_VARIABLE","$i",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_LNUMBER","0",340],";",["T_WHITESPACE"," ",340],["T_VARIABLE","$i",340],["T_WHITESPACE"," ",340],"<",["T_WHITESPACE"," ",340],["T_VARIABLE","$length",340],";",["T_WHITESPACE"," ",340],["T_INC","++",340],["T_VARIABLE","$i",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_VARIABLE","$draw",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_NEW","new",341],["T_WHITESPACE"," ",341],["T_NS_SEPARATOR","\\",341],["T_STRING","ImagickDraw",341],"(",")",";",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$draw",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","setFont",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","fontFile",342],")",";",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$draw",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","setFontSize",343],"(",["T_INT_CAST","(int)",343],["T_WHITESPACE"," ",343],"(",["T_STRING","rand",343],"(",["T_LNUMBER","26",343],",",["T_WHITESPACE"," ",343],["T_LNUMBER","32",343],")",["T_WHITESPACE"," ",343],"*",["T_WHITESPACE"," ",343],["T_VARIABLE","$scale",343],["T_WHITESPACE"," ",343],"*",["T_WHITESPACE"," ",343],["T_DNUMBER","0.8",343],")",")",";",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$draw",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","setFillColor",344],"(",["T_VARIABLE","$foreColor",344],")",";",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$image",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","annotateImage",345],"(",["T_VARIABLE","$draw",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$x",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$y",345],",",["T_WHITESPACE"," ",345],["T_STRING","rand",345],"(","-",["T_LNUMBER","10",345],",",["T_WHITESPACE"," ",345],["T_LNUMBER","10",345],")",",",["T_WHITESPACE"," ",345],["T_VARIABLE","$code",345],"[",["T_VARIABLE","$i",345],"]",")",";",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$fontMetrics",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$image",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","queryFontMetrics",346],"(",["T_VARIABLE","$draw",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$code",346],"[",["T_VARIABLE","$i",346],"]",")",";",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$x",347],["T_WHITESPACE"," ",347],["T_PLUS_EQUAL","+=",347],["T_WHITESPACE"," ",347],["T_INT_CAST","(int)",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$fontMetrics",347],"[",["T_CONSTANT_ENCAPSED_STRING","'textWidth'",347],"]",["T_WHITESPACE"," ",347],"+",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","offset",347],";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n\n        ",348],["T_VARIABLE","$image",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","setImageFormat",350],"(",["T_CONSTANT_ENCAPSED_STRING","'png'",350],")",";",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$image",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getImageBlob",351],"(",")",";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_DOC_COMMENT","\/**\n     * Sets the HTTP headers needed by image response.\n     *\/",354],["T_WHITESPACE","\n    ",356],["T_PROTECTED","protected",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","setHttpHeaders",357],"(",")",["T_WHITESPACE","\n    ",357],"{",["T_WHITESPACE","\n        ",358],["T_STRING","Yii",359],["T_DOUBLE_COLON","::",359],["T_VARIABLE","$app",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getResponse",359],"(",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","getHeaders",359],"(",")",["T_WHITESPACE","\n            ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","set",360],"(",["T_CONSTANT_ENCAPSED_STRING","'Pragma'",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'public'",360],")",["T_WHITESPACE","\n            ",360],["T_OBJECT_OPERATOR","->",361],["T_STRING","set",361],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires'",361],",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'0'",361],")",["T_WHITESPACE","\n            ",361],["T_OBJECT_OPERATOR","->",362],["T_STRING","set",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'must-revalidate, post-check=0, pre-check=0'",362],")",["T_WHITESPACE","\n            ",362],["T_OBJECT_OPERATOR","->",363],["T_STRING","set",363],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Transfer-Encoding'",363],",",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'binary'",363],")",["T_WHITESPACE","\n            ",363],["T_OBJECT_OPERATOR","->",364],["T_STRING","set",364],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",364],",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",364],")",";",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n",365],"}",["T_WHITESPACE","\n",366]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","captcha",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","helpers",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Url",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","helpers",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Html",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","helpers",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Json",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","yii",15],["T_NS_SEPARATOR","\\",15],["T_STRING","widgets",15],["T_NS_SEPARATOR","\\",15],["T_STRING","InputWidget",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Captcha renders a CAPTCHA image and an input field that takes user-entered verification code.\n *\n * Captcha is used together with [[CaptchaAction]] to provide [CAPTCHA](http:\/\/en.wikipedia.org\/wiki\/Captcha) - a way\n * of preventing website spamming.\n *\n * The image element rendered by Captcha will display a CAPTCHA image generated by\n * an action whose route is specified by [[captchaAction]]. This action must be an instance of [[CaptchaAction]].\n *\n * When the user clicks on the CAPTCHA image, it will cause the CAPTCHA image\n * to be refreshed with a new CAPTCHA.\n *\n * You may use [[\\yii\\captcha\\CaptchaValidator]] to validate the user input matches\n * the current CAPTCHA verification code.\n *\n * The following example shows how to use this widget with a model attribute:\n *\n * ```php\n * echo Captcha::widget([\n *     'model' => $model,\n *     'attribute' => 'captcha',\n * ]);\n * ```\n *\n * The following example will use the name property instead:\n *\n * ```php\n * echo Captcha::widget([\n *     'name' => 'captcha',\n * ]);\n * ```\n *\n * You can also use this widget in an [[\\yii\\widgets\\ActiveForm|ActiveForm]] using the [[\\yii\\widgets\\ActiveField::widget()|widget()]]\n * method, for example like this:\n *\n * ```php\n * <?= $form->field($model, 'captcha')->widget(\\yii\\captcha\\Captcha::classname(), [\n *     \/\/ configure additional widget properties here\n * ]) ?>\n * ```\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",17],["T_WHITESPACE","\n",60],["T_CLASS","class",61],["T_WHITESPACE"," ",61],["T_STRING","Captcha",61],["T_WHITESPACE"," ",61],["T_EXTENDS","extends",61],["T_WHITESPACE"," ",61],["T_STRING","InputWidget",61],["T_WHITESPACE","\n",61],"{",["T_WHITESPACE","\n    ",62],["T_DOC_COMMENT","\/**\n     * @var string|array the route of the action that generates the CAPTCHA images.\n     * The action represented by this route must be an action of [[CaptchaAction]].\n     * Please refer to [[\\yii\\helpers\\Url::toRoute()]] for acceptable formats.\n     *\/",63],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$captchaAction",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'site\/captcha'",68],";",["T_WHITESPACE","\n    ",68],["T_DOC_COMMENT","\/**\n     * @var array HTML attributes to be applied to the CAPTCHA image tag.\n     * @see \\yii\\helpers\\Html::renderTagAttributes() for details on how attributes are being rendered.\n     *\/",69],["T_WHITESPACE","\n    ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$imageOptions",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],"[","]",";",["T_WHITESPACE","\n    ",73],["T_DOC_COMMENT","\/**\n     * @var string the template for arranging the CAPTCHA image tag and the text input tag.\n     * In this template, the token `{image}` will be replaced with the actual image tag,\n     * while `{input}` will be replaced with the text input tag.\n     *\/",74],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$template",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'{image} {input}'",79],";",["T_WHITESPACE","\n    ",79],["T_DOC_COMMENT","\/**\n     * @var array the HTML attributes for the input tag.\n     * @see \\yii\\helpers\\Html::renderTagAttributes() for details on how attributes are being rendered.\n     *\/",80],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$options",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'form-control'",84],"]",";",["T_WHITESPACE","\n\n\n    ",84],["T_DOC_COMMENT","\/**\n     * Initializes the widget.\n     *\/",87],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","init",90],"(",")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_STRING","parent",92],["T_DOUBLE_COLON","::",92],["T_STRING","init",92],"(",")",";",["T_WHITESPACE","\n\n        ",92],["T_STATIC","static",94],["T_DOUBLE_COLON","::",94],["T_STRING","checkRequirements",94],"(",")",";",["T_WHITESPACE","\n\n        ",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_ISSET","isset",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","imageOptions",96],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",96],"]",")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","imageOptions",97],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",97],"]",["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'-image'",97],";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Renders the widget.\n     *\/",101],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","run",104],"(",")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","registerClientScript",106],"(",")",";",["T_WHITESPACE","\n        ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","hasModel",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_VARIABLE","$input",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","Html",108],["T_DOUBLE_COLON","::",108],["T_STRING","activeTextInput",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","model",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","attribute",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","options",108],")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE"," ",109],["T_ELSE","else",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$input",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Html",110],["T_DOUBLE_COLON","::",110],["T_STRING","textInput",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","name",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","value",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","options",110],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$route",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","captchaAction",112],";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_STRING","is_array",113],"(",["T_VARIABLE","$route",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$route",114],"[",["T_CONSTANT_ENCAPSED_STRING","'v'",114],"]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","uniqid",114],"(",")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE"," ",115],["T_ELSE","else",115],["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_VARIABLE","$route",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[",["T_VARIABLE","$route",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'v'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","uniqid",116],"(",")","]",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$image",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","Html",118],["T_DOUBLE_COLON","::",118],["T_STRING","img",118],"(",["T_VARIABLE","$route",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","imageOptions",118],")",";",["T_WHITESPACE","\n        ",118],["T_ECHO","echo",119],["T_WHITESPACE"," ",119],["T_STRING","strtr",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","template",119],",",["T_WHITESPACE"," ",119],"[",["T_WHITESPACE","\n            ",119],["T_CONSTANT_ENCAPSED_STRING","'{input}'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$input",120],",",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'{image}'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$image",121],",",["T_WHITESPACE","\n        ",121],"]",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Registers the needed JavaScript.\n     *\/",125],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","registerClientScript",128],"(",")",["T_WHITESPACE","\n    ",128],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$options",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getClientOptions",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$options",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_EMPTY","empty",131],"(",["T_VARIABLE","$options",131],")",["T_WHITESPACE"," ",131],"?",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","''",131],["T_WHITESPACE"," ",131],":",["T_WHITESPACE"," ",131],["T_STRING","Json",131],["T_DOUBLE_COLON","::",131],["T_STRING","htmlEncode",131],"(",["T_VARIABLE","$options",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$id",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","imageOptions",132],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",132],"]",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$view",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getView",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_STRING","CaptchaAsset",134],["T_DOUBLE_COLON","::",134],["T_STRING","register",134],"(",["T_VARIABLE","$view",134],")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$view",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","registerJs",135],"(","\"",["T_ENCAPSED_AND_WHITESPACE","jQuery('#",135],["T_VARIABLE","$id",135],["T_ENCAPSED_AND_WHITESPACE","').yiiCaptcha(",135],["T_VARIABLE","$options",135],["T_ENCAPSED_AND_WHITESPACE",");",135],"\"",")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * Returns the options for the captcha JS widget.\n     * @return array the options\n     *\/",138],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","getClientOptions",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$route",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","captchaAction",144],";",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_STRING","is_array",145],"(",["T_VARIABLE","$route",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$route",146],"[",["T_STRING","CaptchaAction",146],["T_DOUBLE_COLON","::",146],["T_STRING","REFRESH_GET_VAR",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$route",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],"[",["T_VARIABLE","$route",148],",",["T_WHITESPACE"," ",148],["T_STRING","CaptchaAction",148],["T_DOUBLE_COLON","::",148],["T_STRING","REFRESH_GET_VAR",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_LNUMBER","1",148],"]",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$options",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],"[",["T_WHITESPACE","\n            ",151],["T_CONSTANT_ENCAPSED_STRING","'refreshUrl'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_STRING","Url",152],["T_DOUBLE_COLON","::",152],["T_STRING","toRoute",152],"(",["T_VARIABLE","$route",152],")",",",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'hashKey'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'yiiCaptcha\/'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_STRING","trim",153],"(",["T_VARIABLE","$route",153],"[",["T_LNUMBER","0",153],"]",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'\/'",153],")",",",["T_WHITESPACE","\n        ",153],"]",";",["T_WHITESPACE","\n\n        ",154],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$options",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_DOC_COMMENT","\/**\n     * Checks if there is graphic extension available to generate CAPTCHA images.\n     * This method will check the existence of ImageMagick and GD extensions.\n     * @return string the name of the graphic extension, either \"imagick\" or \"gd\".\n     * @throws InvalidConfigException if neither ImageMagick nor GD is installed.\n     *\/",159],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_STATIC","static",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","checkRequirements",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_STRING","extension_loaded",167],"(",["T_CONSTANT_ENCAPSED_STRING","'imagick'",167],")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$imagickFormats",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"(",["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_NS_SEPARATOR","\\",168],["T_STRING","Imagick",168],"(",")",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","queryFormats",168],"(",["T_CONSTANT_ENCAPSED_STRING","'PNG'",168],")",";",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_STRING","in_array",169],"(",["T_CONSTANT_ENCAPSED_STRING","'PNG'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$imagickFormats",169],",",["T_WHITESPACE"," ",169],["T_STRING","true",169],")",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'imagick'",170],";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n        ",171],"}",["T_WHITESPACE","\n        ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","extension_loaded",173],"(",["T_CONSTANT_ENCAPSED_STRING","'gd'",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_VARIABLE","$gdInfo",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","gd_info",174],"(",")",";",["T_WHITESPACE","\n            ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_EMPTY","empty",175],"(",["T_VARIABLE","$gdInfo",175],"[",["T_CONSTANT_ENCAPSED_STRING","'FreeType Support'",175],"]",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n                ",175],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'gd'",176],";",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_THROW","throw",179],["T_WHITESPACE"," ",179],["T_NEW","new",179],["T_WHITESPACE"," ",179],["T_STRING","InvalidConfigException",179],"(",["T_CONSTANT_ENCAPSED_STRING","'Either GD PHP extension with FreeType support or ImageMagick PHP extension with PNG support is required.'",179],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n",180],"}",["T_WHITESPACE","\n",181]]
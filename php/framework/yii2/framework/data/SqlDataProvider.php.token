[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","data",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Connection",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Expression",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","di",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Instance",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * SqlDataProvider implements a data provider based on a plain SQL statement.\n *\n * SqlDataProvider provides data in terms of arrays, each representing a row of query result.\n *\n * Like other data providers, SqlDataProvider also supports sorting and pagination.\n * It does so by modifying the given [[sql]] statement with \"ORDER BY\" and \"LIMIT\"\n * clauses. You may configure the [[sort]] and [[pagination]] properties to\n * customize sorting and pagination behaviors.\n *\n * SqlDataProvider may be used in the following way:\n *\n * ```php\n * $count = Yii::$app->db->createCommand('\n *     SELECT COUNT(*) FROM user WHERE status=:status\n * ', [':status' => 1])->queryScalar();\n *\n * $dataProvider = new SqlDataProvider([\n *     'sql' => 'SELECT * FROM user WHERE status=:status',\n *     'params' => [':status' => 1],\n *     'totalCount' => $count,\n *     'sort' => [\n *         'attributes' => [\n *             'age',\n *             'name' => [\n *                 'asc' => ['first_name' => SORT_ASC, 'last_name' => SORT_ASC],\n *                 'desc' => ['first_name' => SORT_DESC, 'last_name' => SORT_DESC],\n *                 'default' => SORT_DESC,\n *                 'label' => 'Name',\n *             ],\n *         ],\n *     ],\n *     'pagination' => [\n *         'pageSize' => 20,\n *     ],\n * ]);\n *\n * \/\/ get the user records in the current page\n * $models = $dataProvider->getModels();\n * ```\n *\n * Note: if you want to use the pagination feature, you must configure the [[totalCount]] property\n * to be the total number of rows (without pagination). And if you want to use the sorting feature,\n * you must configure the [[sort]] property so that the provider knows which columns can be sorted.\n *\n * For more details and usage information on SqlDataProvider, see the [guide article on data providers](guide:output-data-providers).\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",16],["T_WHITESPACE","\n",65],["T_CLASS","class",66],["T_WHITESPACE"," ",66],["T_STRING","SqlDataProvider",66],["T_WHITESPACE"," ",66],["T_EXTENDS","extends",66],["T_WHITESPACE"," ",66],["T_STRING","BaseDataProvider",66],["T_WHITESPACE","\n",66],"{",["T_WHITESPACE","\n    ",67],["T_DOC_COMMENT","\/**\n     * @var Connection|array|string the DB connection object or the application component ID of the DB connection.\n     * Starting from version 2.0.2, this can also be a configuration array for creating the object.\n     *\/",68],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$db",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'db'",72],";",["T_WHITESPACE","\n    ",72],["T_DOC_COMMENT","\/**\n     * @var string the SQL statement to be used for fetching data rows.\n     *\/",73],["T_WHITESPACE","\n    ",75],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$sql",76],";",["T_WHITESPACE","\n    ",76],["T_DOC_COMMENT","\/**\n     * @var array parameters (name=>value) to be bound to the SQL statement.\n     *\/",77],["T_WHITESPACE","\n    ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$params",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[","]",";",["T_WHITESPACE","\n    ",80],["T_DOC_COMMENT","\/**\n     * @var string|callable the column that is used as the key of the data models.\n     * This can be either a column name, or a callable that returns the key value of a given data model.\n     *\n     * If this is not set, the keys of the [[models]] array will be used.\n     *\/",81],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$key",87],";",["T_WHITESPACE","\n\n\n    ",87],["T_DOC_COMMENT","\/**\n     * Initializes the DB connection component.\n     * This method will initialize the [[db]] property to make sure it refers to a valid DB connection.\n     * @throws InvalidConfigException if [[db]] is invalid.\n     *\/",90],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","init",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_STRING","parent",97],["T_DOUBLE_COLON","::",97],["T_STRING","init",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","Instance",98],["T_DOUBLE_COLON","::",98],["T_STRING","ensure",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],",",["T_WHITESPACE"," ",98],["T_STRING","Connection",98],["T_DOUBLE_COLON","::",98],["T_STRING","className",98],"(",")",")",";",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","sql",99],["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","null",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_THROW","throw",100],["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","InvalidConfigException",100],"(",["T_CONSTANT_ENCAPSED_STRING","'The \"sql\" property must be set.'",100],")",";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",104],["T_WHITESPACE","\n    ",106],["T_PROTECTED","protected",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","prepareModels",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$sort",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getSort",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$pagination",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getPagination",110],"(",")",";",["T_WHITESPACE","\n        ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$pagination",111],["T_WHITESPACE"," ",111],["T_IS_IDENTICAL","===",111],["T_WHITESPACE"," ",111],["T_STRING","false",111],["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$sort",111],["T_WHITESPACE"," ",111],["T_IS_IDENTICAL","===",111],["T_WHITESPACE"," ",111],["T_STRING","false",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","db",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","createCommand",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","sql",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","params",112],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","queryAll",112],"(",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$sql",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","sql",115],";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$orders",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[","]",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$limit",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$offset",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","null",117],";",["T_WHITESPACE","\n\n        ",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$sort",119],["T_WHITESPACE"," ",119],["T_IS_NOT_IDENTICAL","!==",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n            ",119],["T_VARIABLE","$orders",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$sort",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getOrders",120],"(",")",";",["T_WHITESPACE","\n            ",120],["T_VARIABLE","$pattern",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'\/\\s+order\\s+by\\s+([\\w\\s,\\.]+)$\/i'",121],";",["T_WHITESPACE","\n            ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","preg_match",122],"(",["T_VARIABLE","$pattern",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$sql",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$matches",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_STRING","array_unshift",123],"(",["T_VARIABLE","$orders",123],",",["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_STRING","Expression",123],"(",["T_VARIABLE","$matches",123],"[",["T_LNUMBER","1",123],"]",")",")",";",["T_WHITESPACE","\n                ",123],["T_VARIABLE","$sql",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","preg_replace",124],"(",["T_VARIABLE","$pattern",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","''",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$sql",124],")",";",["T_WHITESPACE","\n            ",124],"}",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE","\n\n        ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$pagination",128],["T_WHITESPACE"," ",128],["T_IS_NOT_IDENTICAL","!==",128],["T_WHITESPACE"," ",128],["T_STRING","false",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$pagination",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","totalCount",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getTotalCount",129],"(",")",";",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$limit",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$pagination",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getLimit",130],"(",")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$offset",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$pagination",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getOffset",131],"(",")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$sql",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","db",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getQueryBuilder",134],"(",")",["T_OBJECT_OPERATOR","->",134],["T_STRING","buildOrderByAndLimit",134],"(",["T_VARIABLE","$sql",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$orders",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$limit",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$offset",134],")",";",["T_WHITESPACE","\n\n        ",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","db",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","createCommand",136],"(",["T_VARIABLE","$sql",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","params",136],")",["T_OBJECT_OPERATOR","->",136],["T_STRING","queryAll",136],"(",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",139],["T_WHITESPACE","\n    ",141],["T_PROTECTED","protected",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","prepareKeys",142],"(",["T_VARIABLE","$models",142],")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$keys",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],"[","]",";",["T_WHITESPACE","\n        ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","key",145],["T_WHITESPACE"," ",145],["T_IS_NOT_IDENTICAL","!==",145],["T_WHITESPACE"," ",145],["T_STRING","null",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_FOREACH","foreach",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$models",146],["T_WHITESPACE"," ",146],["T_AS","as",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$model",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_STRING","is_string",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","key",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n                    ",147],["T_VARIABLE","$keys",148],"[","]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$model",148],"[",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","key",148],"]",";",["T_WHITESPACE","\n                ",148],"}",["T_WHITESPACE"," ",149],["T_ELSE","else",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n                    ",149],["T_VARIABLE","$keys",150],"[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_STRING","call_user_func",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","key",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$model",150],")",";",["T_WHITESPACE","\n                ",150],"}",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n\n            ",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$keys",154],";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE"," ",155],["T_ELSE","else",155],["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_STRING","array_keys",156],"(",["T_VARIABLE","$models",156],")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",160],["T_WHITESPACE","\n    ",162],["T_PROTECTED","protected",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","prepareTotalCount",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_LNUMBER","0",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n",166],"}",["T_WHITESPACE","\n",167]]
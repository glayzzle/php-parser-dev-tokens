[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","log",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Connection",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","base",12],["T_NS_SEPARATOR","\\",12],["T_STRING","InvalidConfigException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","di",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Instance",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","helpers",14],["T_NS_SEPARATOR","\\",14],["T_STRING","VarDumper",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * DbTarget stores log messages in a database table.\n *\n * The database connection is specified by [[db]]. Database schema could be initialized by applying migration:\n *\n * ```\n * yii migrate --migrationPath=@yii\/log\/migrations\/\n * ```\n *\n * If you don't want to use migration and need SQL instead, files for all databases are in migrations directory.\n *\n * You may change the name of the table used to store the data by setting [[logTable]].\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",16],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","DbTarget",32],["T_WHITESPACE"," ",32],["T_EXTENDS","extends",32],["T_WHITESPACE"," ",32],["T_STRING","Target",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * @var Connection|array|string the DB connection object or the application component ID of the DB connection.\n     * After the DbTarget object is created, if you want to change this property, you should only assign it\n     * with a DB connection object.\n     * Starting from version 2.0.2, this can also be a configuration array for creating the object.\n     *\/",34],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$db",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'db'",40],";",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * @var string name of the DB table to store cache content. Defaults to \"log\".\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$logTable",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'{{%log}}'",44],";",["T_WHITESPACE","\n\n\n    ",44],["T_DOC_COMMENT","\/**\n     * Initializes the DbTarget component.\n     * This method will initialize the [[db]] property to make sure it refers to a valid DB connection.\n     * @throws InvalidConfigException if [[db]] is invalid.\n     *\/",47],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","init",52],"(",")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_STRING","parent",54],["T_DOUBLE_COLON","::",54],["T_STRING","init",54],"(",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","db",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","Instance",55],["T_DOUBLE_COLON","::",55],["T_STRING","ensure",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","db",55],",",["T_WHITESPACE"," ",55],["T_STRING","Connection",55],["T_DOUBLE_COLON","::",55],["T_STRING","className",55],"(",")",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_DOC_COMMENT","\/**\n     * Stores log messages to DB.\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","export",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$tableName",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","db",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","quoteTableName",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","logTable",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$sql",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",64],["T_VARIABLE","$tableName",64],["T_ENCAPSED_AND_WHITESPACE"," ([[level]], [[category]], [[log_time]], [[prefix]], [[message]])\n                VALUES (:level, :category, :log_time, :prefix, :message)",64],"\"",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$command",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","db",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","createCommand",66],"(",["T_VARIABLE","$sql",66],")",";",["T_WHITESPACE","\n        ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","messages",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$message",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n            ",67],["T_LIST","list",68],"(",["T_VARIABLE","$text",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$level",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$category",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$timestamp",68],")",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$message",68],";",["T_WHITESPACE","\n            ",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_STRING","is_string",69],"(",["T_VARIABLE","$text",69],")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n                ",69],["T_COMMENT","\/\/ exceptions may not be serializable if in the call stack somewhere is a Closure\n",70],["T_WHITESPACE","                ",71],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$text",71],["T_WHITESPACE"," ",71],["T_INSTANCEOF","instanceof",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Throwable",71],["T_WHITESPACE"," ",71],["T_BOOLEAN_OR","||",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$text",71],["T_WHITESPACE"," ",71],["T_INSTANCEOF","instanceof",71],["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Exception",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n                    ",71],["T_VARIABLE","$text",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING_CAST","(string)",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$text",72],";",["T_WHITESPACE","\n                ",72],"}",["T_WHITESPACE"," ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n                    ",73],["T_VARIABLE","$text",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","VarDumper",74],["T_DOUBLE_COLON","::",74],["T_STRING","export",74],"(",["T_VARIABLE","$text",74],")",";",["T_WHITESPACE","\n                ",74],"}",["T_WHITESPACE","\n            ",75],"}",["T_WHITESPACE","\n            ",76],["T_VARIABLE","$command",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","bindValues",77],"(","[",["T_WHITESPACE","\n                ",77],["T_CONSTANT_ENCAPSED_STRING","':level'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$level",78],",",["T_WHITESPACE","\n                ",78],["T_CONSTANT_ENCAPSED_STRING","':category'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$category",79],",",["T_WHITESPACE","\n                ",79],["T_CONSTANT_ENCAPSED_STRING","':log_time'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$timestamp",80],",",["T_WHITESPACE","\n                ",80],["T_CONSTANT_ENCAPSED_STRING","':prefix'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMessagePrefix",81],"(",["T_VARIABLE","$message",81],")",",",["T_WHITESPACE","\n                ",81],["T_CONSTANT_ENCAPSED_STRING","':message'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$text",82],",",["T_WHITESPACE","\n            ",82],"]",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","execute",83],"(",")",";",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
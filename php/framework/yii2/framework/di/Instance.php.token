[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","di",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Instance represents a reference to a named object in a dependency injection (DI) container or a service locator.\n *\n * You may use [[get()]] to obtain the actual object referenced by [[id]].\n *\n * Instance is mainly used in two places:\n *\n * - When configuring a dependency injection container, you use Instance to reference a class name, interface name\n *   or alias name. The reference can later be resolved into the actual object by the container.\n * - In classes which use service locator to obtain dependent objects.\n *\n * The following example shows how to configure a DI container with Instance:\n *\n * ```php\n * $container = new \\yii\\di\\Container;\n * $container->set('cache', [\n *     'class' => 'yii\\caching\\DbCache',\n *     'db' => Instance::of('db')\n * ]);\n * $container->set('db', [\n *     'class' => 'yii\\db\\Connection',\n *     'dsn' => 'sqlite:path\/to\/file.db',\n * ]);\n * ```\n *\n * And the following example shows how a class retrieves a component from a service locator:\n *\n * ```php\n * class DbCache extends Cache\n * {\n *     public $db = 'db';\n *\n *     public function init()\n *     {\n *         parent::init();\n *         $this->db = Instance::ensure($this->db, 'yii\\db\\Connection');\n *     }\n * }\n * ```\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",13],["T_WHITESPACE","\n",55],["T_CLASS","class",56],["T_WHITESPACE"," ",56],["T_STRING","Instance",56],["T_WHITESPACE","\n",56],"{",["T_WHITESPACE","\n    ",57],["T_DOC_COMMENT","\/**\n     * @var string the component ID, class name, interface name or alias name\n     *\/",58],["T_WHITESPACE","\n    ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$id",61],";",["T_WHITESPACE","\n\n\n    ",61],["T_DOC_COMMENT","\/**\n     * Constructor.\n     * @param string $id the component ID\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","__construct",68],"(",["T_VARIABLE","$id",68],")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","id",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$id",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_DOC_COMMENT","\/**\n     * Creates a new Instance object.\n     * @param string $id the component ID\n     * @return Instance the new Instance object.\n     *\/",73],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_STATIC","static",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","of",78],"(",["T_VARIABLE","$id",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STATIC","static",80],"(",["T_VARIABLE","$id",80],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * Resolves the specified reference into the actual object and makes sure it is of the specified type.\n     *\n     * The reference may be specified as a string or an Instance object. If the former,\n     * it will be treated as a component ID, a class\/interface name or an alias, depending on the container type.\n     *\n     * If you do not specify a container, the method will first try `Yii::$app` followed by `Yii::$container`.\n     *\n     * For example,\n     *\n     * ```php\n     * use yii\\db\\Connection;\n     *\n     * \/\/ returns Yii::$app->db\n     * $db = Instance::ensure('db', Connection::className());\n     * \/\/ returns an instance of Connection using the given configuration\n     * $db = Instance::ensure(['dsn' => 'sqlite:path\/to\/my.db'], Connection::className());\n     * ```\n     *\n     * @param object|string|array|static $reference an object or a reference to the desired object.\n     * You may specify a reference in terms of a component ID or an Instance object.\n     * Starting from version 2.0.2, you may also pass in a configuration array for creating the object.\n     * If the \"class\" value is not specified in the configuration array, it will use the value of `$type`.\n     * @param string $type the class\/interface name to be checked. If null, type check will not be performed.\n     * @param ServiceLocator|Container $container the container. This will be passed to [[get()]].\n     * @return object the object referenced by the Instance, or `$reference` itself if it is an object.\n     * @throws InvalidConfigException if the reference is invalid\n     *\/",83],["T_WHITESPACE","\n    ",110],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_STATIC","static",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","ensure",111],"(",["T_VARIABLE","$reference",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$type",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","null",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$container",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","null",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_STRING","is_array",113],"(",["T_VARIABLE","$reference",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$class",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_ISSET","isset",114],"(",["T_VARIABLE","$reference",114],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",114],"]",")",["T_WHITESPACE"," ",114],"?",["T_WHITESPACE"," ",114],["T_VARIABLE","$reference",114],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",114],"]",["T_WHITESPACE"," ",114],":",["T_WHITESPACE"," ",114],["T_VARIABLE","$type",114],";",["T_WHITESPACE","\n            ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(","!",["T_VARIABLE","$container",115],["T_WHITESPACE"," ",115],["T_INSTANCEOF","instanceof",115],["T_WHITESPACE"," ",115],["T_STRING","Container",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$container",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","Yii",116],["T_DOUBLE_COLON","::",116],["T_VARIABLE","$container",116],";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n            ",117],["T_UNSET","unset",118],"(",["T_VARIABLE","$reference",118],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",118],"]",")",";",["T_WHITESPACE","\n            ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$container",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","get",119],"(",["T_VARIABLE","$class",119],",",["T_WHITESPACE"," ",119],"[","]",",",["T_WHITESPACE"," ",119],["T_VARIABLE","$reference",119],")",";",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE"," ",120],["T_ELSEIF","elseif",120],["T_WHITESPACE"," ",120],"(",["T_EMPTY","empty",120],"(",["T_VARIABLE","$reference",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n            ",120],["T_THROW","throw",121],["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","InvalidConfigException",121],"(",["T_CONSTANT_ENCAPSED_STRING","'The required component is not specified.'",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n\n        ",122],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_STRING","is_string",124],"(",["T_VARIABLE","$reference",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n            ",124],["T_VARIABLE","$reference",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_NEW","new",125],["T_WHITESPACE"," ",125],["T_STATIC","static",125],"(",["T_VARIABLE","$reference",125],")",";",["T_WHITESPACE","\n        ",125],"}",["T_WHITESPACE"," ",126],["T_ELSEIF","elseif",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$type",126],["T_WHITESPACE"," ",126],["T_IS_IDENTICAL","===",126],["T_WHITESPACE"," ",126],["T_STRING","null",126],["T_WHITESPACE"," ",126],["T_BOOLEAN_OR","||",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$reference",126],["T_WHITESPACE"," ",126],["T_INSTANCEOF","instanceof",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$type",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$reference",127],";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n\n        ",128],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$reference",130],["T_WHITESPACE"," ",130],["T_INSTANCEOF","instanceof",130],["T_WHITESPACE"," ",130],["T_STRING","self",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_TRY","try",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n                ",131],["T_VARIABLE","$component",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$reference",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_VARIABLE","$container",132],")",";",["T_WHITESPACE","\n            ",132],"}",["T_WHITESPACE"," ",133],["T_CATCH","catch",133],"(",["T_NS_SEPARATOR","\\",133],["T_STRING","ReflectionException",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$e",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n                ",133],["T_THROW","throw",134],["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","InvalidConfigException",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to instantiate component or class \"'",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$reference",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","id",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'\".'",134],",",["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$e",134],")",";",["T_WHITESPACE","\n            ",134],"}",["T_WHITESPACE","\n            ",135],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$type",136],["T_WHITESPACE"," ",136],["T_IS_IDENTICAL","===",136],["T_WHITESPACE"," ",136],["T_STRING","null",136],["T_WHITESPACE"," ",136],["T_BOOLEAN_OR","||",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$component",136],["T_WHITESPACE"," ",136],["T_INSTANCEOF","instanceof",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$type",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$component",137],";",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n                ",138],["T_THROW","throw",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","InvalidConfigException",139],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_VARIABLE","$reference",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","id",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'\" refers to a '",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_STRING","get_class",139],"(",["T_VARIABLE","$component",139],")",["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],"\"",["T_ENCAPSED_AND_WHITESPACE"," component. ",139],["T_VARIABLE","$type",139],["T_ENCAPSED_AND_WHITESPACE"," is expected.",139],"\"",")",";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE","\n        ",140],"}",["T_WHITESPACE","\n\n        ",141],["T_VARIABLE","$valueType",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","is_object",143],"(",["T_VARIABLE","$reference",143],")",["T_WHITESPACE"," ",143],"?",["T_WHITESPACE"," ",143],["T_STRING","get_class",143],"(",["T_VARIABLE","$reference",143],")",["T_WHITESPACE"," ",143],":",["T_WHITESPACE"," ",143],["T_STRING","gettype",143],"(",["T_VARIABLE","$reference",143],")",";",["T_WHITESPACE","\n        ",143],["T_THROW","throw",144],["T_WHITESPACE"," ",144],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_STRING","InvalidConfigException",144],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Invalid data type: ",144],["T_VARIABLE","$valueType",144],["T_ENCAPSED_AND_WHITESPACE",". ",144],["T_VARIABLE","$type",144],["T_ENCAPSED_AND_WHITESPACE"," is expected.",144],"\"",")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * Returns the actual object referenced by this Instance object.\n     * @param ServiceLocator|Container $container the container used to locate the referenced object.\n     * If null, the method will first try `Yii::$app` then `Yii::$container`.\n     * @return object the actual object referenced by this Instance object.\n     *\/",147],["T_WHITESPACE","\n    ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","get",153],"(",["T_VARIABLE","$container",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","null",153],")",["T_WHITESPACE","\n    ",153],"{",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$container",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$container",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","get",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","id",156],")",";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n        ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_STRING","Yii",158],["T_DOUBLE_COLON","::",158],["T_VARIABLE","$app",158],["T_WHITESPACE"," ",158],["T_BOOLEAN_AND","&&",158],["T_WHITESPACE"," ",158],["T_STRING","Yii",158],["T_DOUBLE_COLON","::",158],["T_VARIABLE","$app",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","has",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","id",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_STRING","Yii",159],["T_DOUBLE_COLON","::",159],["T_VARIABLE","$app",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","get",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","id",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE"," ",160],["T_ELSE","else",160],["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","Yii",161],["T_DOUBLE_COLON","::",161],["T_VARIABLE","$container",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","get",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","id",161],")",";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n",163],"}",["T_WHITESPACE","\n",164]]
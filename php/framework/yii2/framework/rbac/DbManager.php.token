[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","rbac",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","caching",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Cache",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Connection",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Query",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","db",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Expression",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","yii",15],["T_NS_SEPARATOR","\\",15],["T_STRING","base",15],["T_NS_SEPARATOR","\\",15],["T_STRING","InvalidCallException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","yii",16],["T_NS_SEPARATOR","\\",16],["T_STRING","base",16],["T_NS_SEPARATOR","\\",16],["T_STRING","InvalidParamException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","yii",17],["T_NS_SEPARATOR","\\",17],["T_STRING","di",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Instance",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * DbManager represents an authorization manager that stores authorization information in database.\n *\n * The database connection is specified by [[db]]. The database schema could be initialized by applying migration:\n *\n * ```\n * yii migrate --migrationPath=@yii\/rbac\/migrations\/\n * ```\n *\n * If you don't want to use migration and need SQL instead, files for all databases are in migrations directory.\n *\n * You may change the names of the tables used to store the authorization and rule data by setting [[itemTable]],\n * [[itemChildTable]], [[assignmentTable]] and [[ruleTable]].\n *\n * For more details and usage information on DbManager, see the [guide article on security authorization](guide:security-authorization).\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @author Alexander Kochetov <creocoder@gmail.com>\n * @since 2.0\n *\/",19],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","DbManager",39],["T_WHITESPACE"," ",39],["T_EXTENDS","extends",39],["T_WHITESPACE"," ",39],["T_STRING","BaseManager",39],["T_WHITESPACE","\n",39],"{",["T_WHITESPACE","\n    ",40],["T_DOC_COMMENT","\/**\n     * @var Connection|array|string the DB connection object or the application component ID of the DB connection.\n     * After the DbManager object is created, if you want to change this property, you should only assign it\n     * with a DB connection object.\n     * Starting from version 2.0.2, this can also be a configuration array for creating the object.\n     *\/",41],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$db",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'db'",47],";",["T_WHITESPACE","\n    ",47],["T_DOC_COMMENT","\/**\n     * @var string the name of the table storing authorization items. Defaults to \"auth_item\".\n     *\/",48],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$itemTable",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'{{%auth_item}}'",51],";",["T_WHITESPACE","\n    ",51],["T_DOC_COMMENT","\/**\n     * @var string the name of the table storing authorization item hierarchy. Defaults to \"auth_item_child\".\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$itemChildTable",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'{{%auth_item_child}}'",55],";",["T_WHITESPACE","\n    ",55],["T_DOC_COMMENT","\/**\n     * @var string the name of the table storing authorization item assignments. Defaults to \"auth_assignment\".\n     *\/",56],["T_WHITESPACE","\n    ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$assignmentTable",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'{{%auth_assignment}}'",59],";",["T_WHITESPACE","\n    ",59],["T_DOC_COMMENT","\/**\n     * @var string the name of the table storing rules. Defaults to \"auth_rule\".\n     *\/",60],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$ruleTable",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'{{%auth_rule}}'",63],";",["T_WHITESPACE","\n    ",63],["T_DOC_COMMENT","\/**\n     * @var Cache|array|string the cache used to improve RBAC performance. This can be one of the following:\n     *\n     * - an application component ID (e.g. `cache`)\n     * - a configuration array\n     * - a [[\\yii\\caching\\Cache]] object\n     *\n     * When this is not set, it means caching is not enabled.\n     *\n     * Note that by enabling RBAC cache, all auth items, rules and auth item parent-child relationships will\n     * be cached and loaded into memory. This will improve the performance of RBAC permission check. However,\n     * it does require extra memory and as a result may not be appropriate if your RBAC system contains too many\n     * auth items. You should seek other RBAC implementations (e.g. RBAC based on Redis storage) in this case.\n     *\n     * Also note that if you modify RBAC items, rules or parent-child relationships from outside of this component,\n     * you have to manually call [[invalidateCache()]] to ensure data consistency.\n     *\n     * @since 2.0.3\n     *\/",64],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$cache",83],";",["T_WHITESPACE","\n    ",83],["T_DOC_COMMENT","\/**\n     * @var string the key used to store RBAC data in cache\n     * @see cache\n     * @since 2.0.3\n     *\/",84],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$cacheKey",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'rbac'",89],";",["T_WHITESPACE","\n\n    ",89],["T_DOC_COMMENT","\/**\n     * @var Item[] all auth items (name => Item)\n     *\/",91],["T_WHITESPACE","\n    ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$items",94],";",["T_WHITESPACE","\n    ",94],["T_DOC_COMMENT","\/**\n     * @var Rule[] all auth rules (name => Rule)\n     *\/",95],["T_WHITESPACE","\n    ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$rules",98],";",["T_WHITESPACE","\n    ",98],["T_DOC_COMMENT","\/**\n     * @var array auth item parent-child relationships (childName => list of parents)\n     *\/",99],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$parents",102],";",["T_WHITESPACE","\n\n\n    ",102],["T_DOC_COMMENT","\/**\n     * Initializes the application component.\n     * This method overrides the parent implementation by establishing the database connection.\n     *\/",105],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","init",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_STRING","parent",111],["T_DOUBLE_COLON","::",111],["T_STRING","init",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","db",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Instance",112],["T_DOUBLE_COLON","::",112],["T_STRING","ensure",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","db",112],",",["T_WHITESPACE"," ",112],["T_STRING","Connection",112],["T_DOUBLE_COLON","::",112],["T_STRING","className",112],"(",")",")",";",["T_WHITESPACE","\n        ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","cache",113],["T_WHITESPACE"," ",113],["T_IS_NOT_IDENTICAL","!==",113],["T_WHITESPACE"," ",113],["T_STRING","null",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","cache",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","Instance",114],["T_DOUBLE_COLON","::",114],["T_STRING","ensure",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","cache",114],",",["T_WHITESPACE"," ",114],["T_STRING","Cache",114],["T_DOUBLE_COLON","::",114],["T_STRING","className",114],"(",")",")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",118],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","checkAccess",121],"(",["T_VARIABLE","$userId",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$permissionName",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$params",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],"[","]",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$assignments",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getAssignments",123],"(",["T_VARIABLE","$userId",123],")",";",["T_WHITESPACE","\n\n        ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","hasNoAssignments",125],"(",["T_VARIABLE","$assignments",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","false",126],";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","loadFromCache",129],"(",")",";",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","items",130],["T_WHITESPACE"," ",130],["T_IS_NOT_IDENTICAL","!==",130],["T_WHITESPACE"," ",130],["T_STRING","null",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","checkAccessFromCache",131],"(",["T_VARIABLE","$userId",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$permissionName",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$params",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$assignments",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE"," ",132],["T_ELSE","else",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","checkAccessRecursive",133],"(",["T_VARIABLE","$userId",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$permissionName",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$params",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$assignments",133],")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n    ",134],"}",["T_WHITESPACE","\n\n    ",135],["T_DOC_COMMENT","\/**\n     * Performs access check for the specified user based on the data loaded from cache.\n     * This method is internally called by [[checkAccess()]] when [[cache]] is enabled.\n     * @param string|int $user the user ID. This should can be either an integer or a string representing\n     * the unique identifier of a user. See [[\\yii\\web\\User::id]].\n     * @param string $itemName the name of the operation that need access check\n     * @param array $params name-value pairs that would be passed to rules associated\n     * with the tasks and roles assigned to the user. A param with name 'user' is added to this array,\n     * which holds the value of `$userId`.\n     * @param Assignment[] $assignments the assignments to the specified user\n     * @return bool whether the operations can be performed by the user.\n     * @since 2.0.3\n     *\/",137],["T_WHITESPACE","\n    ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","checkAccessFromCache",150],"(",["T_VARIABLE","$user",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$itemName",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$params",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$assignments",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_ISSET","isset",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","items",152],"[",["T_VARIABLE","$itemName",152],"]",")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","false",153],";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_VARIABLE","$item",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","items",156],"[",["T_VARIABLE","$itemName",156],"]",";",["T_WHITESPACE","\n\n        ",156],["T_STRING","Yii",158],["T_DOUBLE_COLON","::",158],["T_STRING","trace",158],"(",["T_VARIABLE","$item",158],["T_WHITESPACE"," ",158],["T_INSTANCEOF","instanceof",158],["T_WHITESPACE"," ",158],["T_STRING","Role",158],["T_WHITESPACE"," ",158],"?",["T_WHITESPACE"," ",158],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking role: ",158],["T_VARIABLE","$itemName",158],"\"",["T_WHITESPACE"," ",158],":",["T_WHITESPACE"," ",158],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking permission: ",158],["T_VARIABLE","$itemName",158],"\"",",",["T_WHITESPACE"," ",158],["T_METHOD_C","__METHOD__",158],")",";",["T_WHITESPACE","\n\n        ",158],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","executeRule",160],"(",["T_VARIABLE","$user",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$item",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$params",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n            ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","false",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n\n        ",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_ISSET","isset",164],"(",["T_VARIABLE","$assignments",164],"[",["T_VARIABLE","$itemName",164],"]",")",["T_WHITESPACE"," ",164],["T_BOOLEAN_OR","||",164],["T_WHITESPACE"," ",164],["T_STRING","in_array",164],"(",["T_VARIABLE","$itemName",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","defaultRoles",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_STRING","true",165],";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE","\n\n        ",166],["T_IF","if",168],["T_WHITESPACE"," ",168],"(","!",["T_EMPTY","empty",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","parents",168],"[",["T_VARIABLE","$itemName",168],"]",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_FOREACH","foreach",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","parents",169],"[",["T_VARIABLE","$itemName",169],"]",["T_WHITESPACE"," ",169],["T_AS","as",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$parent",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","checkAccessFromCache",170],"(",["T_VARIABLE","$user",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$parent",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$params",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$assignments",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                    ",170],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_STRING","true",171],";",["T_WHITESPACE","\n                ",171],"}",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_RETURN","return",176],["T_WHITESPACE"," ",176],["T_STRING","false",176],";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * Performs access check for the specified user.\n     * This method is internally called by [[checkAccess()]].\n     * @param string|int $user the user ID. This should can be either an integer or a string representing\n     * the unique identifier of a user. See [[\\yii\\web\\User::id]].\n     * @param string $itemName the name of the operation that need access check\n     * @param array $params name-value pairs that would be passed to rules associated\n     * with the tasks and roles assigned to the user. A param with name 'user' is added to this array,\n     * which holds the value of `$userId`.\n     * @param Assignment[] $assignments the assignments to the specified user\n     * @return bool whether the operations can be performed by the user.\n     *\/",179],["T_WHITESPACE","\n    ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","checkAccessRecursive",191],"(",["T_VARIABLE","$user",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$itemName",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$params",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$assignments",191],")",["T_WHITESPACE","\n    ",191],"{",["T_WHITESPACE","\n        ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","(",["T_VARIABLE","$item",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getItem",193],"(",["T_VARIABLE","$itemName",193],")",")",["T_WHITESPACE"," ",193],["T_IS_IDENTICAL","===",193],["T_WHITESPACE"," ",193],["T_STRING","null",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_STRING","false",194],";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n\n        ",195],["T_STRING","Yii",197],["T_DOUBLE_COLON","::",197],["T_STRING","trace",197],"(",["T_VARIABLE","$item",197],["T_WHITESPACE"," ",197],["T_INSTANCEOF","instanceof",197],["T_WHITESPACE"," ",197],["T_STRING","Role",197],["T_WHITESPACE"," ",197],"?",["T_WHITESPACE"," ",197],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking role: ",197],["T_VARIABLE","$itemName",197],"\"",["T_WHITESPACE"," ",197],":",["T_WHITESPACE"," ",197],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking permission: ",197],["T_VARIABLE","$itemName",197],"\"",",",["T_WHITESPACE"," ",197],["T_METHOD_C","__METHOD__",197],")",";",["T_WHITESPACE","\n\n        ",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(","!",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","executeRule",199],"(",["T_VARIABLE","$user",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$item",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$params",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_STRING","false",200],";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n\n        ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_ISSET","isset",203],"(",["T_VARIABLE","$assignments",203],"[",["T_VARIABLE","$itemName",203],"]",")",["T_WHITESPACE"," ",203],["T_BOOLEAN_OR","||",203],["T_WHITESPACE"," ",203],["T_STRING","in_array",203],"(",["T_VARIABLE","$itemName",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","defaultRoles",203],")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n            ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_STRING","true",204],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$query",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_STRING","Query",207],";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$parents",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$query",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","select",208],"(","[",["T_CONSTANT_ENCAPSED_STRING","'parent'",208],"]",")",["T_WHITESPACE","\n            ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","from",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","itemChildTable",209],")",["T_WHITESPACE","\n            ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","where",210],"(","[",["T_CONSTANT_ENCAPSED_STRING","'child'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$itemName",210],"]",")",["T_WHITESPACE","\n            ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","column",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","db",211],")",";",["T_WHITESPACE","\n        ",211],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$parents",212],["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$parent",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","checkAccessRecursive",213],"(",["T_VARIABLE","$user",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$parent",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$params",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$assignments",213],")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n                ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_STRING","true",214],";",["T_WHITESPACE","\n            ",214],"}",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_STRING","false",218],";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",221],["T_WHITESPACE","\n    ",223],["T_PROTECTED","protected",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getItem",224],"(",["T_VARIABLE","$name",224],")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_EMPTY","empty",226],"(",["T_VARIABLE","$name",226],")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n            ",226],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_STRING","null",227],";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_EMPTY","empty",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","items",230],"[",["T_VARIABLE","$name",230],"]",")",")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","items",231],"[",["T_VARIABLE","$name",231],"]",";",["T_WHITESPACE","\n        ",231],"}",["T_WHITESPACE","\n\n        ",232],["T_VARIABLE","$row",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],"(",["T_NEW","new",234],["T_WHITESPACE"," ",234],["T_STRING","Query",234],")",["T_OBJECT_OPERATOR","->",234],["T_STRING","from",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","itemTable",234],")",["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","where",235],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$name",235],"]",")",["T_WHITESPACE","\n            ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","one",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","db",236],")",";",["T_WHITESPACE","\n\n        ",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$row",238],["T_WHITESPACE"," ",238],["T_IS_IDENTICAL","===",238],["T_WHITESPACE"," ",238],["T_STRING","false",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_STRING","null",239],";",["T_WHITESPACE","\n        ",239],"}",["T_WHITESPACE","\n\n        ",240],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","populateItem",242],"(",["T_VARIABLE","$row",242],")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_DOC_COMMENT","\/**\n     * Returns a value indicating whether the database supports cascading update and delete.\n     * The default implementation will return false for SQLite database and true for all other databases.\n     * @return bool whether the database supports cascading update and delete.\n     *\/",245],["T_WHITESPACE","\n    ",249],["T_PROTECTED","protected",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","supportsCascadeUpdate",250],"(",")",["T_WHITESPACE","\n    ",250],"{",["T_WHITESPACE","\n        ",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_STRING","strncmp",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","db",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getDriverName",252],"(",")",",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",252],",",["T_WHITESPACE"," ",252],["T_LNUMBER","6",252],")",["T_WHITESPACE"," ",252],["T_IS_NOT_IDENTICAL","!==",252],["T_WHITESPACE"," ",252],["T_LNUMBER","0",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",255],["T_WHITESPACE","\n    ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","addItem",258],"(",["T_VARIABLE","$item",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$time",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","time",260],"(",")",";",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$item",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","createdAt",261],["T_WHITESPACE"," ",261],["T_IS_IDENTICAL","===",261],["T_WHITESPACE"," ",261],["T_STRING","null",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_VARIABLE","$item",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","createdAt",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$time",262],";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE","\n        ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$item",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","updatedAt",264],["T_WHITESPACE"," ",264],["T_IS_IDENTICAL","===",264],["T_WHITESPACE"," ",264],["T_STRING","null",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n            ",264],["T_VARIABLE","$item",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","updatedAt",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$time",265],";",["T_WHITESPACE","\n        ",265],"}",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","db",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","createCommand",267],"(",")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","insert",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","itemTable",268],",",["T_WHITESPACE"," ",268],"[",["T_WHITESPACE","\n                ",268],["T_CONSTANT_ENCAPSED_STRING","'name'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$item",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","name",269],",",["T_WHITESPACE","\n                ",269],["T_CONSTANT_ENCAPSED_STRING","'type'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$item",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","type",270],",",["T_WHITESPACE","\n                ",270],["T_CONSTANT_ENCAPSED_STRING","'description'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$item",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","description",271],",",["T_WHITESPACE","\n                ",271],["T_CONSTANT_ENCAPSED_STRING","'rule_name'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$item",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","ruleName",272],",",["T_WHITESPACE","\n                ",272],["T_CONSTANT_ENCAPSED_STRING","'data'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$item",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","data",273],["T_WHITESPACE"," ",273],["T_IS_IDENTICAL","===",273],["T_WHITESPACE"," ",273],["T_STRING","null",273],["T_WHITESPACE"," ",273],"?",["T_WHITESPACE"," ",273],["T_STRING","null",273],["T_WHITESPACE"," ",273],":",["T_WHITESPACE"," ",273],["T_STRING","serialize",273],"(",["T_VARIABLE","$item",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","data",273],")",",",["T_WHITESPACE","\n                ",273],["T_CONSTANT_ENCAPSED_STRING","'created_at'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$item",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","createdAt",274],",",["T_WHITESPACE","\n                ",274],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$item",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","updatedAt",275],",",["T_WHITESPACE","\n            ",275],"]",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","execute",276],"(",")",";",["T_WHITESPACE","\n\n        ",276],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","invalidateCache",278],"(",")",";",["T_WHITESPACE","\n\n        ",278],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_STRING","true",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",283],["T_WHITESPACE","\n    ",285],["T_PROTECTED","protected",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","removeItem",286],"(",["T_VARIABLE","$item",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(","!",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","supportsCascadeUpdate",288],"(",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","db",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","createCommand",289],"(",")",["T_WHITESPACE","\n                ",289],["T_OBJECT_OPERATOR","->",290],["T_STRING","delete",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","itemChildTable",290],",",["T_WHITESPACE"," ",290],"[",["T_CONSTANT_ENCAPSED_STRING","'or'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'[[parent]]=:name'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'[[child]]=:name'",290],"]",",",["T_WHITESPACE"," ",290],"[",["T_CONSTANT_ENCAPSED_STRING","':name'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$item",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","name",290],"]",")",["T_WHITESPACE","\n                ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","execute",291],"(",")",";",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","db",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","createCommand",292],"(",")",["T_WHITESPACE","\n                ",292],["T_OBJECT_OPERATOR","->",293],["T_STRING","delete",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assignmentTable",293],",",["T_WHITESPACE"," ",293],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$item",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","name",293],"]",")",["T_WHITESPACE","\n                ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","execute",294],"(",")",";",["T_WHITESPACE","\n        ",294],"}",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","db",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","createCommand",297],"(",")",["T_WHITESPACE","\n            ",297],["T_OBJECT_OPERATOR","->",298],["T_STRING","delete",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","itemTable",298],",",["T_WHITESPACE"," ",298],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$item",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","name",298],"]",")",["T_WHITESPACE","\n            ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","execute",299],"(",")",";",["T_WHITESPACE","\n\n        ",299],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","invalidateCache",301],"(",")",";",["T_WHITESPACE","\n\n        ",301],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_STRING","true",303],";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",306],["T_WHITESPACE","\n    ",308],["T_PROTECTED","protected",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","updateItem",309],"(",["T_VARIABLE","$name",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$item",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$item",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","name",311],["T_WHITESPACE"," ",311],["T_IS_NOT_IDENTICAL","!==",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$name",311],["T_WHITESPACE"," ",311],["T_BOOLEAN_AND","&&",311],["T_WHITESPACE"," ",311],"!",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","supportsCascadeUpdate",311],"(",")",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","db",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","createCommand",312],"(",")",["T_WHITESPACE","\n                ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","update",313],"(",["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","itemChildTable",313],",",["T_WHITESPACE"," ",313],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$item",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","name",313],"]",",",["T_WHITESPACE"," ",313],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$name",313],"]",")",["T_WHITESPACE","\n                ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","execute",314],"(",")",";",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","db",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","createCommand",315],"(",")",["T_WHITESPACE","\n                ",315],["T_OBJECT_OPERATOR","->",316],["T_STRING","update",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","itemChildTable",316],",",["T_WHITESPACE"," ",316],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$item",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","name",316],"]",",",["T_WHITESPACE"," ",316],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$name",316],"]",")",["T_WHITESPACE","\n                ",316],["T_OBJECT_OPERATOR","->",317],["T_STRING","execute",317],"(",")",";",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","db",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","createCommand",318],"(",")",["T_WHITESPACE","\n                ",318],["T_OBJECT_OPERATOR","->",319],["T_STRING","update",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","assignmentTable",319],",",["T_WHITESPACE"," ",319],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$item",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","name",319],"]",",",["T_WHITESPACE"," ",319],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$name",319],"]",")",["T_WHITESPACE","\n                ",319],["T_OBJECT_OPERATOR","->",320],["T_STRING","execute",320],"(",")",";",["T_WHITESPACE","\n        ",320],"}",["T_WHITESPACE","\n\n        ",321],["T_VARIABLE","$item",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","updatedAt",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","time",323],"(",")",";",["T_WHITESPACE","\n\n        ",323],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","db",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","createCommand",325],"(",")",["T_WHITESPACE","\n            ",325],["T_OBJECT_OPERATOR","->",326],["T_STRING","update",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","itemTable",326],",",["T_WHITESPACE"," ",326],"[",["T_WHITESPACE","\n                ",326],["T_CONSTANT_ENCAPSED_STRING","'name'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$item",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","name",327],",",["T_WHITESPACE","\n                ",327],["T_CONSTANT_ENCAPSED_STRING","'description'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$item",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","description",328],",",["T_WHITESPACE","\n                ",328],["T_CONSTANT_ENCAPSED_STRING","'rule_name'",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$item",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","ruleName",329],",",["T_WHITESPACE","\n                ",329],["T_CONSTANT_ENCAPSED_STRING","'data'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$item",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","data",330],["T_WHITESPACE"," ",330],["T_IS_IDENTICAL","===",330],["T_WHITESPACE"," ",330],["T_STRING","null",330],["T_WHITESPACE"," ",330],"?",["T_WHITESPACE"," ",330],["T_STRING","null",330],["T_WHITESPACE"," ",330],":",["T_WHITESPACE"," ",330],["T_STRING","serialize",330],"(",["T_VARIABLE","$item",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","data",330],")",",",["T_WHITESPACE","\n                ",330],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$item",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","updatedAt",331],",",["T_WHITESPACE","\n            ",331],"]",",",["T_WHITESPACE"," ",332],"[",["T_WHITESPACE","\n                ",332],["T_CONSTANT_ENCAPSED_STRING","'name'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$name",333],",",["T_WHITESPACE","\n            ",333],"]",")",["T_OBJECT_OPERATOR","->",334],["T_STRING","execute",334],"(",")",";",["T_WHITESPACE","\n\n        ",334],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","invalidateCache",336],"(",")",";",["T_WHITESPACE","\n\n        ",336],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_STRING","true",338],";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n\n    ",339],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",341],["T_WHITESPACE","\n    ",343],["T_PROTECTED","protected",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","addRule",344],"(",["T_VARIABLE","$rule",344],")",["T_WHITESPACE","\n    ",344],"{",["T_WHITESPACE","\n        ",345],["T_VARIABLE","$time",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_STRING","time",346],"(",")",";",["T_WHITESPACE","\n        ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$rule",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","createdAt",347],["T_WHITESPACE"," ",347],["T_IS_IDENTICAL","===",347],["T_WHITESPACE"," ",347],["T_STRING","null",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$rule",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","createdAt",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$time",348],";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n        ",349],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$rule",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","updatedAt",350],["T_WHITESPACE"," ",350],["T_IS_IDENTICAL","===",350],["T_WHITESPACE"," ",350],["T_STRING","null",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n            ",350],["T_VARIABLE","$rule",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","updatedAt",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$time",351],";",["T_WHITESPACE","\n        ",351],"}",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","db",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","createCommand",353],"(",")",["T_WHITESPACE","\n            ",353],["T_OBJECT_OPERATOR","->",354],["T_STRING","insert",354],"(",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","ruleTable",354],",",["T_WHITESPACE"," ",354],"[",["T_WHITESPACE","\n                ",354],["T_CONSTANT_ENCAPSED_STRING","'name'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$rule",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","name",355],",",["T_WHITESPACE","\n                ",355],["T_CONSTANT_ENCAPSED_STRING","'data'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_STRING","serialize",356],"(",["T_VARIABLE","$rule",356],")",",",["T_WHITESPACE","\n                ",356],["T_CONSTANT_ENCAPSED_STRING","'created_at'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_VARIABLE","$rule",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","createdAt",357],",",["T_WHITESPACE","\n                ",357],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",358],["T_WHITESPACE"," ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$rule",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","updatedAt",358],",",["T_WHITESPACE","\n            ",358],"]",")",["T_OBJECT_OPERATOR","->",359],["T_STRING","execute",359],"(",")",";",["T_WHITESPACE","\n\n        ",359],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","invalidateCache",361],"(",")",";",["T_WHITESPACE","\n\n        ",361],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_STRING","true",363],";",["T_WHITESPACE","\n    ",363],"}",["T_WHITESPACE","\n\n    ",364],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",366],["T_WHITESPACE","\n    ",368],["T_PROTECTED","protected",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","updateRule",369],"(",["T_VARIABLE","$name",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$rule",369],")",["T_WHITESPACE","\n    ",369],"{",["T_WHITESPACE","\n        ",370],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$rule",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","name",371],["T_WHITESPACE"," ",371],["T_IS_NOT_IDENTICAL","!==",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$name",371],["T_WHITESPACE"," ",371],["T_BOOLEAN_AND","&&",371],["T_WHITESPACE"," ",371],"!",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","supportsCascadeUpdate",371],"(",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n            ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","db",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","createCommand",372],"(",")",["T_WHITESPACE","\n                ",372],["T_OBJECT_OPERATOR","->",373],["T_STRING","update",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","itemTable",373],",",["T_WHITESPACE"," ",373],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$rule",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","name",373],"]",",",["T_WHITESPACE"," ",373],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$name",373],"]",")",["T_WHITESPACE","\n                ",373],["T_OBJECT_OPERATOR","->",374],["T_STRING","execute",374],"(",")",";",["T_WHITESPACE","\n        ",374],"}",["T_WHITESPACE","\n\n        ",375],["T_VARIABLE","$rule",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","updatedAt",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","time",377],"(",")",";",["T_WHITESPACE","\n\n        ",377],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","db",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","createCommand",379],"(",")",["T_WHITESPACE","\n            ",379],["T_OBJECT_OPERATOR","->",380],["T_STRING","update",380],"(",["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","ruleTable",380],",",["T_WHITESPACE"," ",380],"[",["T_WHITESPACE","\n                ",380],["T_CONSTANT_ENCAPSED_STRING","'name'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$rule",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","name",381],",",["T_WHITESPACE","\n                ",381],["T_CONSTANT_ENCAPSED_STRING","'data'",382],["T_WHITESPACE"," ",382],["T_DOUBLE_ARROW","=>",382],["T_WHITESPACE"," ",382],["T_STRING","serialize",382],"(",["T_VARIABLE","$rule",382],")",",",["T_WHITESPACE","\n                ",382],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",383],["T_WHITESPACE"," ",383],["T_DOUBLE_ARROW","=>",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$rule",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","updatedAt",383],",",["T_WHITESPACE","\n            ",383],"]",",",["T_WHITESPACE"," ",384],"[",["T_WHITESPACE","\n                ",384],["T_CONSTANT_ENCAPSED_STRING","'name'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$name",385],",",["T_WHITESPACE","\n            ",385],"]",")",["T_OBJECT_OPERATOR","->",386],["T_STRING","execute",386],"(",")",";",["T_WHITESPACE","\n\n        ",386],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","invalidateCache",388],"(",")",";",["T_WHITESPACE","\n\n        ",388],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_STRING","true",390],";",["T_WHITESPACE","\n    ",390],"}",["T_WHITESPACE","\n\n    ",391],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",393],["T_WHITESPACE","\n    ",395],["T_PROTECTED","protected",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","removeRule",396],"(",["T_VARIABLE","$rule",396],")",["T_WHITESPACE","\n    ",396],"{",["T_WHITESPACE","\n        ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(","!",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","supportsCascadeUpdate",398],"(",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n            ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","db",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","createCommand",399],"(",")",["T_WHITESPACE","\n                ",399],["T_OBJECT_OPERATOR","->",400],["T_STRING","update",400],"(",["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","itemTable",400],",",["T_WHITESPACE"," ",400],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_STRING","null",400],"]",",",["T_WHITESPACE"," ",400],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$rule",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","name",400],"]",")",["T_WHITESPACE","\n                ",400],["T_OBJECT_OPERATOR","->",401],["T_STRING","execute",401],"(",")",";",["T_WHITESPACE","\n        ",401],"}",["T_WHITESPACE","\n\n        ",402],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","db",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","createCommand",404],"(",")",["T_WHITESPACE","\n            ",404],["T_OBJECT_OPERATOR","->",405],["T_STRING","delete",405],"(",["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","ruleTable",405],",",["T_WHITESPACE"," ",405],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",405],["T_WHITESPACE"," ",405],["T_DOUBLE_ARROW","=>",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$rule",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","name",405],"]",")",["T_WHITESPACE","\n            ",405],["T_OBJECT_OPERATOR","->",406],["T_STRING","execute",406],"(",")",";",["T_WHITESPACE","\n\n        ",406],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","invalidateCache",408],"(",")",";",["T_WHITESPACE","\n\n        ",408],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_STRING","true",410],";",["T_WHITESPACE","\n    ",410],"}",["T_WHITESPACE","\n\n    ",411],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",413],["T_WHITESPACE","\n    ",415],["T_PROTECTED","protected",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","getItems",416],"(",["T_VARIABLE","$type",416],")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$query",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],"(",["T_NEW","new",418],["T_WHITESPACE"," ",418],["T_STRING","Query",418],")",["T_WHITESPACE","\n            ",418],["T_OBJECT_OPERATOR","->",419],["T_STRING","from",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","itemTable",419],")",["T_WHITESPACE","\n            ",419],["T_OBJECT_OPERATOR","->",420],["T_STRING","where",420],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$type",420],"]",")",";",["T_WHITESPACE","\n\n        ",420],["T_VARIABLE","$items",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],"[","]",";",["T_WHITESPACE","\n        ",422],["T_FOREACH","foreach",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$query",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","all",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","db",423],")",["T_WHITESPACE"," ",423],["T_AS","as",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$row",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_VARIABLE","$items",424],"[",["T_VARIABLE","$row",424],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",424],"]","]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","populateItem",424],"(",["T_VARIABLE","$row",424],")",";",["T_WHITESPACE","\n        ",424],"}",["T_WHITESPACE","\n\n        ",425],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$items",427],";",["T_WHITESPACE","\n    ",427],"}",["T_WHITESPACE","\n\n    ",428],["T_DOC_COMMENT","\/**\n     * Populates an auth item with the data fetched from database\n     * @param array $row the data from the auth item table\n     * @return Item the populated auth item instance (either Role or Permission)\n     *\/",430],["T_WHITESPACE","\n    ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","populateItem",435],"(",["T_VARIABLE","$row",435],")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$class",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$row",437],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",437],"]",["T_WHITESPACE"," ",437],["T_IS_EQUAL","==",437],["T_WHITESPACE"," ",437],["T_STRING","Item",437],["T_DOUBLE_COLON","::",437],["T_STRING","TYPE_PERMISSION",437],["T_WHITESPACE"," ",437],"?",["T_WHITESPACE"," ",437],["T_STRING","Permission",437],["T_DOUBLE_COLON","::",437],["T_STRING","className",437],"(",")",["T_WHITESPACE"," ",437],":",["T_WHITESPACE"," ",437],["T_STRING","Role",437],["T_DOUBLE_COLON","::",437],["T_STRING","className",437],"(",")",";",["T_WHITESPACE","\n\n        ",437],["T_IF","if",439],["T_WHITESPACE"," ",439],"(","!",["T_ISSET","isset",439],"(",["T_VARIABLE","$row",439],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",439],"]",")",["T_WHITESPACE"," ",439],["T_BOOLEAN_OR","||",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$data",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],"@",["T_STRING","unserialize",439],"(",["T_VARIABLE","$row",439],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",439],"]",")",")",["T_WHITESPACE"," ",439],["T_IS_IDENTICAL","===",439],["T_WHITESPACE"," ",439],["T_STRING","false",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$data",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","null",440],";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n\n        ",441],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_NEW","new",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$class",443],"(","[",["T_WHITESPACE","\n            ",443],["T_CONSTANT_ENCAPSED_STRING","'name'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$row",444],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",444],"]",",",["T_WHITESPACE","\n            ",444],["T_CONSTANT_ENCAPSED_STRING","'type'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$row",445],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",445],"]",",",["T_WHITESPACE","\n            ",445],["T_CONSTANT_ENCAPSED_STRING","'description'",446],["T_WHITESPACE"," ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$row",446],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",446],"]",",",["T_WHITESPACE","\n            ",446],["T_CONSTANT_ENCAPSED_STRING","'ruleName'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$row",447],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",447],"]",",",["T_WHITESPACE","\n            ",447],["T_CONSTANT_ENCAPSED_STRING","'data'",448],["T_WHITESPACE"," ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_VARIABLE","$data",448],",",["T_WHITESPACE","\n            ",448],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",449],["T_WHITESPACE"," ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_VARIABLE","$row",449],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",449],"]",",",["T_WHITESPACE","\n            ",449],["T_CONSTANT_ENCAPSED_STRING","'updatedAt'",450],["T_WHITESPACE"," ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$row",450],"[",["T_CONSTANT_ENCAPSED_STRING","'updated_at'",450],"]",",",["T_WHITESPACE","\n        ",450],"]",")",";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n\n    ",452],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",454],["T_WHITESPACE","\n    ",456],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","getRolesByUser",457],"(",["T_VARIABLE","$userId",457],")",["T_WHITESPACE","\n    ",457],"{",["T_WHITESPACE","\n        ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(","!",["T_ISSET","isset",459],"(",["T_VARIABLE","$userId",459],")",["T_WHITESPACE"," ",459],["T_BOOLEAN_OR","||",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$userId",459],["T_WHITESPACE"," ",459],["T_IS_IDENTICAL","===",459],["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","''",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_RETURN","return",460],["T_WHITESPACE"," ",460],"[","]",";",["T_WHITESPACE","\n        ",460],"}",["T_WHITESPACE","\n\n        ",461],["T_VARIABLE","$query",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],"(",["T_NEW","new",463],["T_WHITESPACE"," ",463],["T_STRING","Query",463],")",["T_OBJECT_OPERATOR","->",463],["T_STRING","select",463],"(",["T_CONSTANT_ENCAPSED_STRING","'b.*'",463],")",["T_WHITESPACE","\n            ",463],["T_OBJECT_OPERATOR","->",464],["T_STRING","from",464],"(","[",["T_CONSTANT_ENCAPSED_STRING","'a'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","assignmentTable",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'b'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","itemTable",464],"]",")",["T_WHITESPACE","\n            ",464],["T_OBJECT_OPERATOR","->",465],["T_STRING","where",465],"(",["T_CONSTANT_ENCAPSED_STRING","'{{a}}.[[item_name]]={{b}}.[[name]]'",465],")",["T_WHITESPACE","\n            ",465],["T_OBJECT_OPERATOR","->",466],["T_STRING","andWhere",466],"(","[",["T_CONSTANT_ENCAPSED_STRING","'a.user_id'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_STRING_CAST","(string)",466],["T_WHITESPACE"," ",466],["T_VARIABLE","$userId",466],"]",")",["T_WHITESPACE","\n            ",466],["T_OBJECT_OPERATOR","->",467],["T_STRING","andWhere",467],"(","[",["T_CONSTANT_ENCAPSED_STRING","'b.type'",467],["T_WHITESPACE"," ",467],["T_DOUBLE_ARROW","=>",467],["T_WHITESPACE"," ",467],["T_STRING","Item",467],["T_DOUBLE_COLON","::",467],["T_STRING","TYPE_ROLE",467],"]",")",";",["T_WHITESPACE","\n\n        ",467],["T_VARIABLE","$roles",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],"[","]",";",["T_WHITESPACE","\n        ",469],["T_FOREACH","foreach",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$query",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","all",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","db",470],")",["T_WHITESPACE"," ",470],["T_AS","as",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$row",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_VARIABLE","$roles",471],"[",["T_VARIABLE","$row",471],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",471],"]","]",["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","populateItem",471],"(",["T_VARIABLE","$row",471],")",";",["T_WHITESPACE","\n        ",471],"}",["T_WHITESPACE","\n        ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$roles",473],";",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",476],["T_WHITESPACE","\n    ",478],["T_PUBLIC","public",479],["T_WHITESPACE"," ",479],["T_FUNCTION","function",479],["T_WHITESPACE"," ",479],["T_STRING","getChildRoles",479],"(",["T_VARIABLE","$roleName",479],")",["T_WHITESPACE","\n    ",479],"{",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$role",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getRole",481],"(",["T_VARIABLE","$roleName",481],")",";",["T_WHITESPACE","\n\n        ",481],["T_IF","if",483],["T_WHITESPACE"," ",483],"(",["T_STRING","is_null",483],"(",["T_VARIABLE","$role",483],")",")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n            ",483],["T_THROW","throw",484],["T_WHITESPACE"," ",484],["T_NEW","new",484],["T_WHITESPACE"," ",484],["T_STRING","InvalidParamException",484],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Role \\\"",484],["T_VARIABLE","$roleName",484],["T_ENCAPSED_AND_WHITESPACE","\\\" not found.",484],"\"",")",";",["T_WHITESPACE","\n        ",484],"}",["T_WHITESPACE","\n\n        ",485],["T_VARIABLE","$result",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],"[","]",";",["T_WHITESPACE","\n        ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getChildrenRecursive",488],"(",["T_VARIABLE","$roleName",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getChildrenList",488],"(",")",",",["T_WHITESPACE"," ",488],["T_VARIABLE","$result",488],")",";",["T_WHITESPACE","\n\n        ",488],["T_VARIABLE","$roles",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],"[",["T_VARIABLE","$roleName",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$role",490],"]",";",["T_WHITESPACE","\n\n        ",490],["T_VARIABLE","$roles",492],["T_WHITESPACE"," ",492],["T_PLUS_EQUAL","+=",492],["T_WHITESPACE"," ",492],["T_STRING","array_filter",492],"(",["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","getRoles",492],"(",")",",",["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],"(",["T_STRING","Role",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$roleItem",492],")",["T_WHITESPACE"," ",492],["T_USE","use",492],["T_WHITESPACE"," ",492],"(",["T_VARIABLE","$result",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n            ",492],["T_RETURN","return",493],["T_WHITESPACE"," ",493],["T_STRING","array_key_exists",493],"(",["T_VARIABLE","$roleItem",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","name",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$result",493],")",";",["T_WHITESPACE","\n        ",493],"}",")",";",["T_WHITESPACE","\n\n        ",494],["T_RETURN","return",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$roles",496],";",["T_WHITESPACE","\n    ",496],"}",["T_WHITESPACE","\n\n    ",497],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",499],["T_WHITESPACE","\n    ",501],["T_PUBLIC","public",502],["T_WHITESPACE"," ",502],["T_FUNCTION","function",502],["T_WHITESPACE"," ",502],["T_STRING","getPermissionsByRole",502],"(",["T_VARIABLE","$roleName",502],")",["T_WHITESPACE","\n    ",502],"{",["T_WHITESPACE","\n        ",503],["T_VARIABLE","$childrenList",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","getChildrenList",504],"(",")",";",["T_WHITESPACE","\n        ",504],["T_VARIABLE","$result",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],"[","]",";",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","getChildrenRecursive",506],"(",["T_VARIABLE","$roleName",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$childrenList",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$result",506],")",";",["T_WHITESPACE","\n        ",506],["T_IF","if",507],["T_WHITESPACE"," ",507],"(",["T_EMPTY","empty",507],"(",["T_VARIABLE","$result",507],")",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n            ",507],["T_RETURN","return",508],["T_WHITESPACE"," ",508],"[","]",";",["T_WHITESPACE","\n        ",508],"}",["T_WHITESPACE","\n        ",509],["T_VARIABLE","$query",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],"(",["T_NEW","new",510],["T_WHITESPACE"," ",510],["T_STRING","Query",510],")",["T_OBJECT_OPERATOR","->",510],["T_STRING","from",510],"(",["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","itemTable",510],")",["T_OBJECT_OPERATOR","->",510],["T_STRING","where",510],"(","[",["T_WHITESPACE","\n            ",510],["T_CONSTANT_ENCAPSED_STRING","'type'",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],["T_STRING","Item",511],["T_DOUBLE_COLON","::",511],["T_STRING","TYPE_PERMISSION",511],",",["T_WHITESPACE","\n            ",511],["T_CONSTANT_ENCAPSED_STRING","'name'",512],["T_WHITESPACE"," ",512],["T_DOUBLE_ARROW","=>",512],["T_WHITESPACE"," ",512],["T_STRING","array_keys",512],"(",["T_VARIABLE","$result",512],")",",",["T_WHITESPACE","\n        ",512],"]",")",";",["T_WHITESPACE","\n        ",513],["T_VARIABLE","$permissions",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],"[","]",";",["T_WHITESPACE","\n        ",514],["T_FOREACH","foreach",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$query",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","all",515],"(",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","db",515],")",["T_WHITESPACE"," ",515],["T_AS","as",515],["T_WHITESPACE"," ",515],["T_VARIABLE","$row",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n            ",515],["T_VARIABLE","$permissions",516],"[",["T_VARIABLE","$row",516],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",516],"]","]",["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","populateItem",516],"(",["T_VARIABLE","$row",516],")",";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n        ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$permissions",518],";",["T_WHITESPACE","\n    ",518],"}",["T_WHITESPACE","\n\n    ",519],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",521],["T_WHITESPACE","\n    ",523],["T_PUBLIC","public",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","getPermissionsByUser",524],"(",["T_VARIABLE","$userId",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_EMPTY","empty",526],"(",["T_VARIABLE","$userId",526],")",")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n            ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],"[","]",";",["T_WHITESPACE","\n        ",527],"}",["T_WHITESPACE","\n\n        ",528],["T_VARIABLE","$directPermission",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getDirectPermissionsByUser",530],"(",["T_VARIABLE","$userId",530],")",";",["T_WHITESPACE","\n        ",530],["T_VARIABLE","$inheritedPermission",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getInheritedPermissionsByUser",531],"(",["T_VARIABLE","$userId",531],")",";",["T_WHITESPACE","\n\n        ",531],["T_RETURN","return",533],["T_WHITESPACE"," ",533],["T_STRING","array_merge",533],"(",["T_VARIABLE","$directPermission",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$inheritedPermission",533],")",";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n\n    ",534],["T_DOC_COMMENT","\/**\n     * Returns all permissions that are directly assigned to user.\n     * @param string|int $userId the user ID (see [[\\yii\\web\\User::id]])\n     * @return Permission[] all direct permissions that the user has. The array is indexed by the permission names.\n     * @since 2.0.7\n     *\/",536],["T_WHITESPACE","\n    ",541],["T_PROTECTED","protected",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","getDirectPermissionsByUser",542],"(",["T_VARIABLE","$userId",542],")",["T_WHITESPACE","\n    ",542],"{",["T_WHITESPACE","\n        ",543],["T_VARIABLE","$query",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],"(",["T_NEW","new",544],["T_WHITESPACE"," ",544],["T_STRING","Query",544],")",["T_OBJECT_OPERATOR","->",544],["T_STRING","select",544],"(",["T_CONSTANT_ENCAPSED_STRING","'b.*'",544],")",["T_WHITESPACE","\n            ",544],["T_OBJECT_OPERATOR","->",545],["T_STRING","from",545],"(","[",["T_CONSTANT_ENCAPSED_STRING","'a'",545],["T_WHITESPACE"," ",545],["T_DOUBLE_ARROW","=>",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","assignmentTable",545],",",["T_WHITESPACE"," ",545],["T_CONSTANT_ENCAPSED_STRING","'b'",545],["T_WHITESPACE"," ",545],["T_DOUBLE_ARROW","=>",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","itemTable",545],"]",")",["T_WHITESPACE","\n            ",545],["T_OBJECT_OPERATOR","->",546],["T_STRING","where",546],"(",["T_CONSTANT_ENCAPSED_STRING","'{{a}}.[[item_name]]={{b}}.[[name]]'",546],")",["T_WHITESPACE","\n            ",546],["T_OBJECT_OPERATOR","->",547],["T_STRING","andWhere",547],"(","[",["T_CONSTANT_ENCAPSED_STRING","'a.user_id'",547],["T_WHITESPACE"," ",547],["T_DOUBLE_ARROW","=>",547],["T_WHITESPACE"," ",547],["T_STRING_CAST","(string)",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$userId",547],"]",")",["T_WHITESPACE","\n            ",547],["T_OBJECT_OPERATOR","->",548],["T_STRING","andWhere",548],"(","[",["T_CONSTANT_ENCAPSED_STRING","'b.type'",548],["T_WHITESPACE"," ",548],["T_DOUBLE_ARROW","=>",548],["T_WHITESPACE"," ",548],["T_STRING","Item",548],["T_DOUBLE_COLON","::",548],["T_STRING","TYPE_PERMISSION",548],"]",")",";",["T_WHITESPACE","\n\n        ",548],["T_VARIABLE","$permissions",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],"[","]",";",["T_WHITESPACE","\n        ",550],["T_FOREACH","foreach",551],["T_WHITESPACE"," ",551],"(",["T_VARIABLE","$query",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","all",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","db",551],")",["T_WHITESPACE"," ",551],["T_AS","as",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$row",551],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n            ",551],["T_VARIABLE","$permissions",552],"[",["T_VARIABLE","$row",552],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",552],"]","]",["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","populateItem",552],"(",["T_VARIABLE","$row",552],")",";",["T_WHITESPACE","\n        ",552],"}",["T_WHITESPACE","\n        ",553],["T_RETURN","return",554],["T_WHITESPACE"," ",554],["T_VARIABLE","$permissions",554],";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n\n    ",555],["T_DOC_COMMENT","\/**\n     * Returns all permissions that the user inherits from the roles assigned to him.\n     * @param string|int $userId the user ID (see [[\\yii\\web\\User::id]])\n     * @return Permission[] all inherited permissions that the user has. The array is indexed by the permission names.\n     * @since 2.0.7\n     *\/",557],["T_WHITESPACE","\n    ",562],["T_PROTECTED","protected",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","getInheritedPermissionsByUser",563],"(",["T_VARIABLE","$userId",563],")",["T_WHITESPACE","\n    ",563],"{",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$query",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],"(",["T_NEW","new",565],["T_WHITESPACE"," ",565],["T_STRING","Query",565],")",["T_OBJECT_OPERATOR","->",565],["T_STRING","select",565],"(",["T_CONSTANT_ENCAPSED_STRING","'item_name'",565],")",["T_WHITESPACE","\n            ",565],["T_OBJECT_OPERATOR","->",566],["T_STRING","from",566],"(",["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","assignmentTable",566],")",["T_WHITESPACE","\n            ",566],["T_OBJECT_OPERATOR","->",567],["T_STRING","where",567],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",567],["T_WHITESPACE"," ",567],["T_DOUBLE_ARROW","=>",567],["T_WHITESPACE"," ",567],["T_STRING_CAST","(string)",567],["T_WHITESPACE"," ",567],["T_VARIABLE","$userId",567],"]",")",";",["T_WHITESPACE","\n\n        ",567],["T_VARIABLE","$childrenList",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getChildrenList",569],"(",")",";",["T_WHITESPACE","\n        ",569],["T_VARIABLE","$result",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],"[","]",";",["T_WHITESPACE","\n        ",570],["T_FOREACH","foreach",571],["T_WHITESPACE"," ",571],"(",["T_VARIABLE","$query",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","column",571],"(",["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","db",571],")",["T_WHITESPACE"," ",571],["T_AS","as",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$roleName",571],")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n            ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getChildrenRecursive",572],"(",["T_VARIABLE","$roleName",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$childrenList",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$result",572],")",";",["T_WHITESPACE","\n        ",572],"}",["T_WHITESPACE","\n\n        ",573],["T_IF","if",575],["T_WHITESPACE"," ",575],"(",["T_EMPTY","empty",575],"(",["T_VARIABLE","$result",575],")",")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n            ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],"[","]",";",["T_WHITESPACE","\n        ",576],"}",["T_WHITESPACE","\n\n        ",577],["T_VARIABLE","$query",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],"(",["T_NEW","new",579],["T_WHITESPACE"," ",579],["T_STRING","Query",579],")",["T_OBJECT_OPERATOR","->",579],["T_STRING","from",579],"(",["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","itemTable",579],")",["T_OBJECT_OPERATOR","->",579],["T_STRING","where",579],"(","[",["T_WHITESPACE","\n            ",579],["T_CONSTANT_ENCAPSED_STRING","'type'",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_STRING","Item",580],["T_DOUBLE_COLON","::",580],["T_STRING","TYPE_PERMISSION",580],",",["T_WHITESPACE","\n            ",580],["T_CONSTANT_ENCAPSED_STRING","'name'",581],["T_WHITESPACE"," ",581],["T_DOUBLE_ARROW","=>",581],["T_WHITESPACE"," ",581],["T_STRING","array_keys",581],"(",["T_VARIABLE","$result",581],")",",",["T_WHITESPACE","\n        ",581],"]",")",";",["T_WHITESPACE","\n        ",582],["T_VARIABLE","$permissions",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],"[","]",";",["T_WHITESPACE","\n        ",583],["T_FOREACH","foreach",584],["T_WHITESPACE"," ",584],"(",["T_VARIABLE","$query",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","all",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","db",584],")",["T_WHITESPACE"," ",584],["T_AS","as",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$row",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n            ",584],["T_VARIABLE","$permissions",585],"[",["T_VARIABLE","$row",585],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",585],"]","]",["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","populateItem",585],"(",["T_VARIABLE","$row",585],")",";",["T_WHITESPACE","\n        ",585],"}",["T_WHITESPACE","\n        ",586],["T_RETURN","return",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$permissions",587],";",["T_WHITESPACE","\n    ",587],"}",["T_WHITESPACE","\n\n    ",588],["T_DOC_COMMENT","\/**\n     * Returns the children for every parent.\n     * @return array the children list. Each array key is a parent item name,\n     * and the corresponding array value is a list of child item names.\n     *\/",590],["T_WHITESPACE","\n    ",594],["T_PROTECTED","protected",595],["T_WHITESPACE"," ",595],["T_FUNCTION","function",595],["T_WHITESPACE"," ",595],["T_STRING","getChildrenList",595],"(",")",["T_WHITESPACE","\n    ",595],"{",["T_WHITESPACE","\n        ",596],["T_VARIABLE","$query",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],"(",["T_NEW","new",597],["T_WHITESPACE"," ",597],["T_STRING","Query",597],")",["T_OBJECT_OPERATOR","->",597],["T_STRING","from",597],"(",["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","itemChildTable",597],")",";",["T_WHITESPACE","\n        ",597],["T_VARIABLE","$parents",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],"[","]",";",["T_WHITESPACE","\n        ",598],["T_FOREACH","foreach",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$query",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","all",599],"(",["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","db",599],")",["T_WHITESPACE"," ",599],["T_AS","as",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$row",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_VARIABLE","$parents",600],"[",["T_VARIABLE","$row",600],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",600],"]","]","[","]",["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_VARIABLE","$row",600],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",600],"]",";",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n        ",601],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$parents",602],";",["T_WHITESPACE","\n    ",602],"}",["T_WHITESPACE","\n\n    ",603],["T_DOC_COMMENT","\/**\n     * Recursively finds all children and grand children of the specified item.\n     * @param string $name the name of the item whose children are to be looked for.\n     * @param array $childrenList the child list built via [[getChildrenList()]]\n     * @param array $result the children and grand children (in array keys)\n     *\/",605],["T_WHITESPACE","\n    ",610],["T_PROTECTED","protected",611],["T_WHITESPACE"," ",611],["T_FUNCTION","function",611],["T_WHITESPACE"," ",611],["T_STRING","getChildrenRecursive",611],"(",["T_VARIABLE","$name",611],",",["T_WHITESPACE"," ",611],["T_VARIABLE","$childrenList",611],",",["T_WHITESPACE"," ",611],"&",["T_VARIABLE","$result",611],")",["T_WHITESPACE","\n    ",611],"{",["T_WHITESPACE","\n        ",612],["T_IF","if",613],["T_WHITESPACE"," ",613],"(",["T_ISSET","isset",613],"(",["T_VARIABLE","$childrenList",613],"[",["T_VARIABLE","$name",613],"]",")",")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n            ",613],["T_FOREACH","foreach",614],["T_WHITESPACE"," ",614],"(",["T_VARIABLE","$childrenList",614],"[",["T_VARIABLE","$name",614],"]",["T_WHITESPACE"," ",614],["T_AS","as",614],["T_WHITESPACE"," ",614],["T_VARIABLE","$child",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                ",614],["T_VARIABLE","$result",615],"[",["T_VARIABLE","$child",615],"]",["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","true",615],";",["T_WHITESPACE","\n                ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","getChildrenRecursive",616],"(",["T_VARIABLE","$child",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$childrenList",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$result",616],")",";",["T_WHITESPACE","\n            ",616],"}",["T_WHITESPACE","\n        ",617],"}",["T_WHITESPACE","\n    ",618],"}",["T_WHITESPACE","\n\n    ",619],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",621],["T_WHITESPACE","\n    ",623],["T_PUBLIC","public",624],["T_WHITESPACE"," ",624],["T_FUNCTION","function",624],["T_WHITESPACE"," ",624],["T_STRING","getRule",624],"(",["T_VARIABLE","$name",624],")",["T_WHITESPACE","\n    ",624],"{",["T_WHITESPACE","\n        ",625],["T_IF","if",626],["T_WHITESPACE"," ",626],"(",["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","rules",626],["T_WHITESPACE"," ",626],["T_IS_NOT_IDENTICAL","!==",626],["T_WHITESPACE"," ",626],["T_STRING","null",626],")",["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n            ",626],["T_RETURN","return",627],["T_WHITESPACE"," ",627],["T_ISSET","isset",627],"(",["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","rules",627],"[",["T_VARIABLE","$name",627],"]",")",["T_WHITESPACE"," ",627],"?",["T_WHITESPACE"," ",627],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","rules",627],"[",["T_VARIABLE","$name",627],"]",["T_WHITESPACE"," ",627],":",["T_WHITESPACE"," ",627],["T_STRING","null",627],";",["T_WHITESPACE","\n        ",627],"}",["T_WHITESPACE","\n\n        ",628],["T_VARIABLE","$row",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],"(",["T_NEW","new",630],["T_WHITESPACE"," ",630],["T_STRING","Query",630],")",["T_OBJECT_OPERATOR","->",630],["T_STRING","select",630],"(","[",["T_CONSTANT_ENCAPSED_STRING","'data'",630],"]",")",["T_WHITESPACE","\n            ",630],["T_OBJECT_OPERATOR","->",631],["T_STRING","from",631],"(",["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","ruleTable",631],")",["T_WHITESPACE","\n            ",631],["T_OBJECT_OPERATOR","->",632],["T_STRING","where",632],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",632],["T_WHITESPACE"," ",632],["T_DOUBLE_ARROW","=>",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$name",632],"]",")",["T_WHITESPACE","\n            ",632],["T_OBJECT_OPERATOR","->",633],["T_STRING","one",633],"(",["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","db",633],")",";",["T_WHITESPACE","\n        ",633],["T_RETURN","return",634],["T_WHITESPACE"," ",634],["T_VARIABLE","$row",634],["T_WHITESPACE"," ",634],["T_IS_IDENTICAL","===",634],["T_WHITESPACE"," ",634],["T_STRING","false",634],["T_WHITESPACE"," ",634],"?",["T_WHITESPACE"," ",634],["T_STRING","null",634],["T_WHITESPACE"," ",634],":",["T_WHITESPACE"," ",634],["T_STRING","unserialize",634],"(",["T_VARIABLE","$row",634],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",634],"]",")",";",["T_WHITESPACE","\n    ",634],"}",["T_WHITESPACE","\n\n    ",635],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",637],["T_WHITESPACE","\n    ",639],["T_PUBLIC","public",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","getRules",640],"(",")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_IF","if",642],["T_WHITESPACE"," ",642],"(",["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","rules",642],["T_WHITESPACE"," ",642],["T_IS_NOT_IDENTICAL","!==",642],["T_WHITESPACE"," ",642],["T_STRING","null",642],")",["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n            ",642],["T_RETURN","return",643],["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","rules",643],";",["T_WHITESPACE","\n        ",643],"}",["T_WHITESPACE","\n\n        ",644],["T_VARIABLE","$query",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],"(",["T_NEW","new",646],["T_WHITESPACE"," ",646],["T_STRING","Query",646],")",["T_OBJECT_OPERATOR","->",646],["T_STRING","from",646],"(",["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","ruleTable",646],")",";",["T_WHITESPACE","\n\n        ",646],["T_VARIABLE","$rules",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],"[","]",";",["T_WHITESPACE","\n        ",648],["T_FOREACH","foreach",649],["T_WHITESPACE"," ",649],"(",["T_VARIABLE","$query",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","all",649],"(",["T_VARIABLE","$this",649],["T_OBJECT_OPERATOR","->",649],["T_STRING","db",649],")",["T_WHITESPACE"," ",649],["T_AS","as",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$row",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n            ",649],["T_VARIABLE","$rules",650],"[",["T_VARIABLE","$row",650],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",650],"]","]",["T_WHITESPACE"," ",650],"=",["T_WHITESPACE"," ",650],["T_STRING","unserialize",650],"(",["T_VARIABLE","$row",650],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",650],"]",")",";",["T_WHITESPACE","\n        ",650],"}",["T_WHITESPACE","\n\n        ",651],["T_RETURN","return",653],["T_WHITESPACE"," ",653],["T_VARIABLE","$rules",653],";",["T_WHITESPACE","\n    ",653],"}",["T_WHITESPACE","\n\n    ",654],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",656],["T_WHITESPACE","\n    ",658],["T_PUBLIC","public",659],["T_WHITESPACE"," ",659],["T_FUNCTION","function",659],["T_WHITESPACE"," ",659],["T_STRING","getAssignment",659],"(",["T_VARIABLE","$roleName",659],",",["T_WHITESPACE"," ",659],["T_VARIABLE","$userId",659],")",["T_WHITESPACE","\n    ",659],"{",["T_WHITESPACE","\n        ",660],["T_IF","if",661],["T_WHITESPACE"," ",661],"(",["T_EMPTY","empty",661],"(",["T_VARIABLE","$userId",661],")",")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n            ",661],["T_RETURN","return",662],["T_WHITESPACE"," ",662],["T_STRING","null",662],";",["T_WHITESPACE","\n        ",662],"}",["T_WHITESPACE","\n\n        ",663],["T_VARIABLE","$row",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],"(",["T_NEW","new",665],["T_WHITESPACE"," ",665],["T_STRING","Query",665],")",["T_OBJECT_OPERATOR","->",665],["T_STRING","from",665],"(",["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","assignmentTable",665],")",["T_WHITESPACE","\n            ",665],["T_OBJECT_OPERATOR","->",666],["T_STRING","where",666],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_STRING_CAST","(string)",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$userId",666],",",["T_WHITESPACE"," ",666],["T_CONSTANT_ENCAPSED_STRING","'item_name'",666],["T_WHITESPACE"," ",666],["T_DOUBLE_ARROW","=>",666],["T_WHITESPACE"," ",666],["T_VARIABLE","$roleName",666],"]",")",["T_WHITESPACE","\n            ",666],["T_OBJECT_OPERATOR","->",667],["T_STRING","one",667],"(",["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","db",667],")",";",["T_WHITESPACE","\n\n        ",667],["T_IF","if",669],["T_WHITESPACE"," ",669],"(",["T_VARIABLE","$row",669],["T_WHITESPACE"," ",669],["T_IS_IDENTICAL","===",669],["T_WHITESPACE"," ",669],["T_STRING","false",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n            ",669],["T_RETURN","return",670],["T_WHITESPACE"," ",670],["T_STRING","null",670],";",["T_WHITESPACE","\n        ",670],"}",["T_WHITESPACE","\n\n        ",671],["T_RETURN","return",673],["T_WHITESPACE"," ",673],["T_NEW","new",673],["T_WHITESPACE"," ",673],["T_STRING","Assignment",673],"(","[",["T_WHITESPACE","\n            ",673],["T_CONSTANT_ENCAPSED_STRING","'userId'",674],["T_WHITESPACE"," ",674],["T_DOUBLE_ARROW","=>",674],["T_WHITESPACE"," ",674],["T_VARIABLE","$row",674],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",674],"]",",",["T_WHITESPACE","\n            ",674],["T_CONSTANT_ENCAPSED_STRING","'roleName'",675],["T_WHITESPACE"," ",675],["T_DOUBLE_ARROW","=>",675],["T_WHITESPACE"," ",675],["T_VARIABLE","$row",675],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",675],"]",",",["T_WHITESPACE","\n            ",675],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",676],["T_WHITESPACE"," ",676],["T_DOUBLE_ARROW","=>",676],["T_WHITESPACE"," ",676],["T_VARIABLE","$row",676],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",676],"]",",",["T_WHITESPACE","\n        ",676],"]",")",";",["T_WHITESPACE","\n    ",677],"}",["T_WHITESPACE","\n\n    ",678],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",680],["T_WHITESPACE","\n    ",682],["T_PUBLIC","public",683],["T_WHITESPACE"," ",683],["T_FUNCTION","function",683],["T_WHITESPACE"," ",683],["T_STRING","getAssignments",683],"(",["T_VARIABLE","$userId",683],")",["T_WHITESPACE","\n    ",683],"{",["T_WHITESPACE","\n        ",684],["T_IF","if",685],["T_WHITESPACE"," ",685],"(",["T_EMPTY","empty",685],"(",["T_VARIABLE","$userId",685],")",")",["T_WHITESPACE"," ",685],"{",["T_WHITESPACE","\n            ",685],["T_RETURN","return",686],["T_WHITESPACE"," ",686],"[","]",";",["T_WHITESPACE","\n        ",686],"}",["T_WHITESPACE","\n\n        ",687],["T_VARIABLE","$query",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],"(",["T_NEW","new",689],["T_WHITESPACE"," ",689],["T_STRING","Query",689],")",["T_WHITESPACE","\n            ",689],["T_OBJECT_OPERATOR","->",690],["T_STRING","from",690],"(",["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","assignmentTable",690],")",["T_WHITESPACE","\n            ",690],["T_OBJECT_OPERATOR","->",691],["T_STRING","where",691],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],["T_STRING_CAST","(string)",691],["T_WHITESPACE"," ",691],["T_VARIABLE","$userId",691],"]",")",";",["T_WHITESPACE","\n\n        ",691],["T_VARIABLE","$assignments",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],"[","]",";",["T_WHITESPACE","\n        ",693],["T_FOREACH","foreach",694],["T_WHITESPACE"," ",694],"(",["T_VARIABLE","$query",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","all",694],"(",["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","db",694],")",["T_WHITESPACE"," ",694],["T_AS","as",694],["T_WHITESPACE"," ",694],["T_VARIABLE","$row",694],")",["T_WHITESPACE"," ",694],"{",["T_WHITESPACE","\n            ",694],["T_VARIABLE","$assignments",695],"[",["T_VARIABLE","$row",695],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",695],"]","]",["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_NEW","new",695],["T_WHITESPACE"," ",695],["T_STRING","Assignment",695],"(","[",["T_WHITESPACE","\n                ",695],["T_CONSTANT_ENCAPSED_STRING","'userId'",696],["T_WHITESPACE"," ",696],["T_DOUBLE_ARROW","=>",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$row",696],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",696],"]",",",["T_WHITESPACE","\n                ",696],["T_CONSTANT_ENCAPSED_STRING","'roleName'",697],["T_WHITESPACE"," ",697],["T_DOUBLE_ARROW","=>",697],["T_WHITESPACE"," ",697],["T_VARIABLE","$row",697],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",697],"]",",",["T_WHITESPACE","\n                ",697],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],["T_VARIABLE","$row",698],"[",["T_CONSTANT_ENCAPSED_STRING","'created_at'",698],"]",",",["T_WHITESPACE","\n            ",698],"]",")",";",["T_WHITESPACE","\n        ",699],"}",["T_WHITESPACE","\n\n        ",700],["T_RETURN","return",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$assignments",702],";",["T_WHITESPACE","\n    ",702],"}",["T_WHITESPACE","\n\n    ",703],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",705],["T_WHITESPACE","\n    ",708],["T_PUBLIC","public",709],["T_WHITESPACE"," ",709],["T_FUNCTION","function",709],["T_WHITESPACE"," ",709],["T_STRING","canAddChild",709],"(",["T_VARIABLE","$parent",709],",",["T_WHITESPACE"," ",709],["T_VARIABLE","$child",709],")",["T_WHITESPACE","\n    ",709],"{",["T_WHITESPACE","\n        ",710],["T_RETURN","return",711],["T_WHITESPACE"," ",711],"!",["T_VARIABLE","$this",711],["T_OBJECT_OPERATOR","->",711],["T_STRING","detectLoop",711],"(",["T_VARIABLE","$parent",711],",",["T_WHITESPACE"," ",711],["T_VARIABLE","$child",711],")",";",["T_WHITESPACE","\n    ",711],"}",["T_WHITESPACE","\n\n    ",712],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",714],["T_WHITESPACE","\n    ",716],["T_PUBLIC","public",717],["T_WHITESPACE"," ",717],["T_FUNCTION","function",717],["T_WHITESPACE"," ",717],["T_STRING","addChild",717],"(",["T_VARIABLE","$parent",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$child",717],")",["T_WHITESPACE","\n    ",717],"{",["T_WHITESPACE","\n        ",718],["T_IF","if",719],["T_WHITESPACE"," ",719],"(",["T_VARIABLE","$parent",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","name",719],["T_WHITESPACE"," ",719],["T_IS_IDENTICAL","===",719],["T_WHITESPACE"," ",719],["T_VARIABLE","$child",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","name",719],")",["T_WHITESPACE"," ",719],"{",["T_WHITESPACE","\n            ",719],["T_THROW","throw",720],["T_WHITESPACE"," ",720],["T_NEW","new",720],["T_WHITESPACE"," ",720],["T_STRING","InvalidParamException",720],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot add '",720],["T_CURLY_OPEN","{",720],["T_VARIABLE","$parent",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","name",720],"}",["T_ENCAPSED_AND_WHITESPACE","' as a child of itself.",720],"\"",")",";",["T_WHITESPACE","\n        ",720],"}",["T_WHITESPACE","\n\n        ",721],["T_IF","if",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$parent",723],["T_WHITESPACE"," ",723],["T_INSTANCEOF","instanceof",723],["T_WHITESPACE"," ",723],["T_STRING","Permission",723],["T_WHITESPACE"," ",723],["T_BOOLEAN_AND","&&",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$child",723],["T_WHITESPACE"," ",723],["T_INSTANCEOF","instanceof",723],["T_WHITESPACE"," ",723],["T_STRING","Role",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_THROW","throw",724],["T_WHITESPACE"," ",724],["T_NEW","new",724],["T_WHITESPACE"," ",724],["T_STRING","InvalidParamException",724],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add a role as a child of a permission.'",724],")",";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE","\n\n        ",725],["T_IF","if",727],["T_WHITESPACE"," ",727],"(",["T_VARIABLE","$this",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","detectLoop",727],"(",["T_VARIABLE","$parent",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$child",727],")",")",["T_WHITESPACE"," ",727],"{",["T_WHITESPACE","\n            ",727],["T_THROW","throw",728],["T_WHITESPACE"," ",728],["T_NEW","new",728],["T_WHITESPACE"," ",728],["T_STRING","InvalidCallException",728],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot add '",728],["T_CURLY_OPEN","{",728],["T_VARIABLE","$child",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","name",728],"}",["T_ENCAPSED_AND_WHITESPACE","' as a child of '",728],["T_CURLY_OPEN","{",728],["T_VARIABLE","$parent",728],["T_OBJECT_OPERATOR","->",728],["T_STRING","name",728],"}",["T_ENCAPSED_AND_WHITESPACE","'. A loop has been detected.",728],"\"",")",";",["T_WHITESPACE","\n        ",728],"}",["T_WHITESPACE","\n\n        ",729],["T_VARIABLE","$this",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","db",731],["T_OBJECT_OPERATOR","->",731],["T_STRING","createCommand",731],"(",")",["T_WHITESPACE","\n            ",731],["T_OBJECT_OPERATOR","->",732],["T_STRING","insert",732],"(",["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","itemChildTable",732],",",["T_WHITESPACE"," ",732],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",732],["T_WHITESPACE"," ",732],["T_DOUBLE_ARROW","=>",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$parent",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","name",732],",",["T_WHITESPACE"," ",732],["T_CONSTANT_ENCAPSED_STRING","'child'",732],["T_WHITESPACE"," ",732],["T_DOUBLE_ARROW","=>",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$child",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","name",732],"]",")",["T_WHITESPACE","\n            ",732],["T_OBJECT_OPERATOR","->",733],["T_STRING","execute",733],"(",")",";",["T_WHITESPACE","\n\n        ",733],["T_VARIABLE","$this",735],["T_OBJECT_OPERATOR","->",735],["T_STRING","invalidateCache",735],"(",")",";",["T_WHITESPACE","\n\n        ",735],["T_RETURN","return",737],["T_WHITESPACE"," ",737],["T_STRING","true",737],";",["T_WHITESPACE","\n    ",737],"}",["T_WHITESPACE","\n\n    ",738],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",740],["T_WHITESPACE","\n    ",742],["T_PUBLIC","public",743],["T_WHITESPACE"," ",743],["T_FUNCTION","function",743],["T_WHITESPACE"," ",743],["T_STRING","removeChild",743],"(",["T_VARIABLE","$parent",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$child",743],")",["T_WHITESPACE","\n    ",743],"{",["T_WHITESPACE","\n        ",744],["T_VARIABLE","$result",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","db",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","createCommand",745],"(",")",["T_WHITESPACE","\n            ",745],["T_OBJECT_OPERATOR","->",746],["T_STRING","delete",746],"(",["T_VARIABLE","$this",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","itemChildTable",746],",",["T_WHITESPACE"," ",746],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$parent",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","name",746],",",["T_WHITESPACE"," ",746],["T_CONSTANT_ENCAPSED_STRING","'child'",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$child",746],["T_OBJECT_OPERATOR","->",746],["T_STRING","name",746],"]",")",["T_WHITESPACE","\n            ",746],["T_OBJECT_OPERATOR","->",747],["T_STRING","execute",747],"(",")",["T_WHITESPACE"," ",747],">",["T_WHITESPACE"," ",747],["T_LNUMBER","0",747],";",["T_WHITESPACE","\n\n        ",747],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","invalidateCache",749],"(",")",";",["T_WHITESPACE","\n\n        ",749],["T_RETURN","return",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$result",751],";",["T_WHITESPACE","\n    ",751],"}",["T_WHITESPACE","\n\n    ",752],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",754],["T_WHITESPACE","\n    ",756],["T_PUBLIC","public",757],["T_WHITESPACE"," ",757],["T_FUNCTION","function",757],["T_WHITESPACE"," ",757],["T_STRING","removeChildren",757],"(",["T_VARIABLE","$parent",757],")",["T_WHITESPACE","\n    ",757],"{",["T_WHITESPACE","\n        ",758],["T_VARIABLE","$result",759],["T_WHITESPACE"," ",759],"=",["T_WHITESPACE"," ",759],["T_VARIABLE","$this",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","db",759],["T_OBJECT_OPERATOR","->",759],["T_STRING","createCommand",759],"(",")",["T_WHITESPACE","\n            ",759],["T_OBJECT_OPERATOR","->",760],["T_STRING","delete",760],"(",["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","itemChildTable",760],",",["T_WHITESPACE"," ",760],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",760],["T_WHITESPACE"," ",760],["T_DOUBLE_ARROW","=>",760],["T_WHITESPACE"," ",760],["T_VARIABLE","$parent",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","name",760],"]",")",["T_WHITESPACE","\n            ",760],["T_OBJECT_OPERATOR","->",761],["T_STRING","execute",761],"(",")",["T_WHITESPACE"," ",761],">",["T_WHITESPACE"," ",761],["T_LNUMBER","0",761],";",["T_WHITESPACE","\n\n        ",761],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","invalidateCache",763],"(",")",";",["T_WHITESPACE","\n\n        ",763],["T_RETURN","return",765],["T_WHITESPACE"," ",765],["T_VARIABLE","$result",765],";",["T_WHITESPACE","\n    ",765],"}",["T_WHITESPACE","\n\n    ",766],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",768],["T_WHITESPACE","\n    ",770],["T_PUBLIC","public",771],["T_WHITESPACE"," ",771],["T_FUNCTION","function",771],["T_WHITESPACE"," ",771],["T_STRING","hasChild",771],"(",["T_VARIABLE","$parent",771],",",["T_WHITESPACE"," ",771],["T_VARIABLE","$child",771],")",["T_WHITESPACE","\n    ",771],"{",["T_WHITESPACE","\n        ",772],["T_RETURN","return",773],["T_WHITESPACE"," ",773],"(",["T_NEW","new",773],["T_WHITESPACE"," ",773],["T_STRING","Query",773],")",["T_WHITESPACE","\n            ",773],["T_OBJECT_OPERATOR","->",774],["T_STRING","from",774],"(",["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","itemChildTable",774],")",["T_WHITESPACE","\n            ",774],["T_OBJECT_OPERATOR","->",775],["T_STRING","where",775],"(","[",["T_CONSTANT_ENCAPSED_STRING","'parent'",775],["T_WHITESPACE"," ",775],["T_DOUBLE_ARROW","=>",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$parent",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","name",775],",",["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'child'",775],["T_WHITESPACE"," ",775],["T_DOUBLE_ARROW","=>",775],["T_WHITESPACE"," ",775],["T_VARIABLE","$child",775],["T_OBJECT_OPERATOR","->",775],["T_STRING","name",775],"]",")",["T_WHITESPACE","\n            ",775],["T_OBJECT_OPERATOR","->",776],["T_STRING","one",776],"(",["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","db",776],")",["T_WHITESPACE"," ",776],["T_IS_NOT_IDENTICAL","!==",776],["T_WHITESPACE"," ",776],["T_STRING","false",776],";",["T_WHITESPACE","\n    ",776],"}",["T_WHITESPACE","\n\n    ",777],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",779],["T_WHITESPACE","\n    ",781],["T_PUBLIC","public",782],["T_WHITESPACE"," ",782],["T_FUNCTION","function",782],["T_WHITESPACE"," ",782],["T_STRING","getChildren",782],"(",["T_VARIABLE","$name",782],")",["T_WHITESPACE","\n    ",782],"{",["T_WHITESPACE","\n        ",783],["T_VARIABLE","$query",784],["T_WHITESPACE"," ",784],"=",["T_WHITESPACE"," ",784],"(",["T_NEW","new",784],["T_WHITESPACE"," ",784],["T_STRING","Query",784],")",["T_WHITESPACE","\n            ",784],["T_OBJECT_OPERATOR","->",785],["T_STRING","select",785],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'type'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'description'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'rule_name'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'data'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'created_at'",785],",",["T_WHITESPACE"," ",785],["T_CONSTANT_ENCAPSED_STRING","'updated_at'",785],"]",")",["T_WHITESPACE","\n            ",785],["T_OBJECT_OPERATOR","->",786],["T_STRING","from",786],"(","[",["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","itemTable",786],",",["T_WHITESPACE"," ",786],["T_VARIABLE","$this",786],["T_OBJECT_OPERATOR","->",786],["T_STRING","itemChildTable",786],"]",")",["T_WHITESPACE","\n            ",786],["T_OBJECT_OPERATOR","->",787],["T_STRING","where",787],"(","[",["T_CONSTANT_ENCAPSED_STRING","'parent'",787],["T_WHITESPACE"," ",787],["T_DOUBLE_ARROW","=>",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$name",787],",",["T_WHITESPACE"," ",787],["T_CONSTANT_ENCAPSED_STRING","'name'",787],["T_WHITESPACE"," ",787],["T_DOUBLE_ARROW","=>",787],["T_WHITESPACE"," ",787],["T_NEW","new",787],["T_WHITESPACE"," ",787],["T_STRING","Expression",787],"(",["T_CONSTANT_ENCAPSED_STRING","'[[child]]'",787],")","]",")",";",["T_WHITESPACE","\n\n        ",787],["T_VARIABLE","$children",789],["T_WHITESPACE"," ",789],"=",["T_WHITESPACE"," ",789],"[","]",";",["T_WHITESPACE","\n        ",789],["T_FOREACH","foreach",790],["T_WHITESPACE"," ",790],"(",["T_VARIABLE","$query",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","all",790],"(",["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","db",790],")",["T_WHITESPACE"," ",790],["T_AS","as",790],["T_WHITESPACE"," ",790],["T_VARIABLE","$row",790],")",["T_WHITESPACE"," ",790],"{",["T_WHITESPACE","\n            ",790],["T_VARIABLE","$children",791],"[",["T_VARIABLE","$row",791],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",791],"]","]",["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","populateItem",791],"(",["T_VARIABLE","$row",791],")",";",["T_WHITESPACE","\n        ",791],"}",["T_WHITESPACE","\n\n        ",792],["T_RETURN","return",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$children",794],";",["T_WHITESPACE","\n    ",794],"}",["T_WHITESPACE","\n\n    ",795],["T_DOC_COMMENT","\/**\n     * Checks whether there is a loop in the authorization item hierarchy.\n     * @param Item $parent the parent item\n     * @param Item $child the child item to be added to the hierarchy\n     * @return bool whether a loop exists\n     *\/",797],["T_WHITESPACE","\n    ",802],["T_PROTECTED","protected",803],["T_WHITESPACE"," ",803],["T_FUNCTION","function",803],["T_WHITESPACE"," ",803],["T_STRING","detectLoop",803],"(",["T_VARIABLE","$parent",803],",",["T_WHITESPACE"," ",803],["T_VARIABLE","$child",803],")",["T_WHITESPACE","\n    ",803],"{",["T_WHITESPACE","\n        ",804],["T_IF","if",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$child",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","name",805],["T_WHITESPACE"," ",805],["T_IS_IDENTICAL","===",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$parent",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","name",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n            ",805],["T_RETURN","return",806],["T_WHITESPACE"," ",806],["T_STRING","true",806],";",["T_WHITESPACE","\n        ",806],"}",["T_WHITESPACE","\n        ",807],["T_FOREACH","foreach",808],["T_WHITESPACE"," ",808],"(",["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","getChildren",808],"(",["T_VARIABLE","$child",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","name",808],")",["T_WHITESPACE"," ",808],["T_AS","as",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$grandchild",808],")",["T_WHITESPACE"," ",808],"{",["T_WHITESPACE","\n            ",808],["T_IF","if",809],["T_WHITESPACE"," ",809],"(",["T_VARIABLE","$this",809],["T_OBJECT_OPERATOR","->",809],["T_STRING","detectLoop",809],"(",["T_VARIABLE","$parent",809],",",["T_WHITESPACE"," ",809],["T_VARIABLE","$grandchild",809],")",")",["T_WHITESPACE"," ",809],"{",["T_WHITESPACE","\n                ",809],["T_RETURN","return",810],["T_WHITESPACE"," ",810],["T_STRING","true",810],";",["T_WHITESPACE","\n            ",810],"}",["T_WHITESPACE","\n        ",811],"}",["T_WHITESPACE","\n        ",812],["T_RETURN","return",813],["T_WHITESPACE"," ",813],["T_STRING","false",813],";",["T_WHITESPACE","\n    ",813],"}",["T_WHITESPACE","\n\n    ",814],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",816],["T_WHITESPACE","\n    ",818],["T_PUBLIC","public",819],["T_WHITESPACE"," ",819],["T_FUNCTION","function",819],["T_WHITESPACE"," ",819],["T_STRING","assign",819],"(",["T_VARIABLE","$role",819],",",["T_WHITESPACE"," ",819],["T_VARIABLE","$userId",819],")",["T_WHITESPACE","\n    ",819],"{",["T_WHITESPACE","\n        ",820],["T_VARIABLE","$assignment",821],["T_WHITESPACE"," ",821],"=",["T_WHITESPACE"," ",821],["T_NEW","new",821],["T_WHITESPACE"," ",821],["T_STRING","Assignment",821],"(","[",["T_WHITESPACE","\n            ",821],["T_CONSTANT_ENCAPSED_STRING","'userId'",822],["T_WHITESPACE"," ",822],["T_DOUBLE_ARROW","=>",822],["T_WHITESPACE"," ",822],["T_VARIABLE","$userId",822],",",["T_WHITESPACE","\n            ",822],["T_CONSTANT_ENCAPSED_STRING","'roleName'",823],["T_WHITESPACE"," ",823],["T_DOUBLE_ARROW","=>",823],["T_WHITESPACE"," ",823],["T_VARIABLE","$role",823],["T_OBJECT_OPERATOR","->",823],["T_STRING","name",823],",",["T_WHITESPACE","\n            ",823],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",824],["T_WHITESPACE"," ",824],["T_DOUBLE_ARROW","=>",824],["T_WHITESPACE"," ",824],["T_STRING","time",824],"(",")",",",["T_WHITESPACE","\n        ",824],"]",")",";",["T_WHITESPACE","\n\n        ",825],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","db",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","createCommand",827],"(",")",["T_WHITESPACE","\n            ",827],["T_OBJECT_OPERATOR","->",828],["T_STRING","insert",828],"(",["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","assignmentTable",828],",",["T_WHITESPACE"," ",828],"[",["T_WHITESPACE","\n                ",828],["T_CONSTANT_ENCAPSED_STRING","'user_id'",829],["T_WHITESPACE"," ",829],["T_DOUBLE_ARROW","=>",829],["T_WHITESPACE"," ",829],["T_VARIABLE","$assignment",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","userId",829],",",["T_WHITESPACE","\n                ",829],["T_CONSTANT_ENCAPSED_STRING","'item_name'",830],["T_WHITESPACE"," ",830],["T_DOUBLE_ARROW","=>",830],["T_WHITESPACE"," ",830],["T_VARIABLE","$assignment",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","roleName",830],",",["T_WHITESPACE","\n                ",830],["T_CONSTANT_ENCAPSED_STRING","'created_at'",831],["T_WHITESPACE"," ",831],["T_DOUBLE_ARROW","=>",831],["T_WHITESPACE"," ",831],["T_VARIABLE","$assignment",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","createdAt",831],",",["T_WHITESPACE","\n            ",831],"]",")",["T_OBJECT_OPERATOR","->",832],["T_STRING","execute",832],"(",")",";",["T_WHITESPACE","\n\n        ",832],["T_RETURN","return",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$assignment",834],";",["T_WHITESPACE","\n    ",834],"}",["T_WHITESPACE","\n\n    ",835],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",837],["T_WHITESPACE","\n    ",839],["T_PUBLIC","public",840],["T_WHITESPACE"," ",840],["T_FUNCTION","function",840],["T_WHITESPACE"," ",840],["T_STRING","revoke",840],"(",["T_VARIABLE","$role",840],",",["T_WHITESPACE"," ",840],["T_VARIABLE","$userId",840],")",["T_WHITESPACE","\n    ",840],"{",["T_WHITESPACE","\n        ",841],["T_IF","if",842],["T_WHITESPACE"," ",842],"(",["T_EMPTY","empty",842],"(",["T_VARIABLE","$userId",842],")",")",["T_WHITESPACE"," ",842],"{",["T_WHITESPACE","\n            ",842],["T_RETURN","return",843],["T_WHITESPACE"," ",843],["T_STRING","false",843],";",["T_WHITESPACE","\n        ",843],"}",["T_WHITESPACE","\n\n        ",844],["T_RETURN","return",846],["T_WHITESPACE"," ",846],["T_VARIABLE","$this",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","db",846],["T_OBJECT_OPERATOR","->",846],["T_STRING","createCommand",846],"(",")",["T_WHITESPACE","\n            ",846],["T_OBJECT_OPERATOR","->",847],["T_STRING","delete",847],"(",["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","assignmentTable",847],",",["T_WHITESPACE"," ",847],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_STRING_CAST","(string)",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$userId",847],",",["T_WHITESPACE"," ",847],["T_CONSTANT_ENCAPSED_STRING","'item_name'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$role",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","name",847],"]",")",["T_WHITESPACE","\n            ",847],["T_OBJECT_OPERATOR","->",848],["T_STRING","execute",848],"(",")",["T_WHITESPACE"," ",848],">",["T_WHITESPACE"," ",848],["T_LNUMBER","0",848],";",["T_WHITESPACE","\n    ",848],"}",["T_WHITESPACE","\n\n    ",849],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",851],["T_WHITESPACE","\n    ",853],["T_PUBLIC","public",854],["T_WHITESPACE"," ",854],["T_FUNCTION","function",854],["T_WHITESPACE"," ",854],["T_STRING","revokeAll",854],"(",["T_VARIABLE","$userId",854],")",["T_WHITESPACE","\n    ",854],"{",["T_WHITESPACE","\n        ",855],["T_IF","if",856],["T_WHITESPACE"," ",856],"(",["T_EMPTY","empty",856],"(",["T_VARIABLE","$userId",856],")",")",["T_WHITESPACE"," ",856],"{",["T_WHITESPACE","\n            ",856],["T_RETURN","return",857],["T_WHITESPACE"," ",857],["T_STRING","false",857],";",["T_WHITESPACE","\n        ",857],"}",["T_WHITESPACE","\n\n        ",858],["T_RETURN","return",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","db",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","createCommand",860],"(",")",["T_WHITESPACE","\n            ",860],["T_OBJECT_OPERATOR","->",861],["T_STRING","delete",861],"(",["T_VARIABLE","$this",861],["T_OBJECT_OPERATOR","->",861],["T_STRING","assignmentTable",861],",",["T_WHITESPACE"," ",861],"[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",861],["T_WHITESPACE"," ",861],["T_DOUBLE_ARROW","=>",861],["T_WHITESPACE"," ",861],["T_STRING_CAST","(string)",861],["T_WHITESPACE"," ",861],["T_VARIABLE","$userId",861],"]",")",["T_WHITESPACE","\n            ",861],["T_OBJECT_OPERATOR","->",862],["T_STRING","execute",862],"(",")",["T_WHITESPACE"," ",862],">",["T_WHITESPACE"," ",862],["T_LNUMBER","0",862],";",["T_WHITESPACE","\n    ",862],"}",["T_WHITESPACE","\n\n    ",863],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",865],["T_WHITESPACE","\n    ",867],["T_PUBLIC","public",868],["T_WHITESPACE"," ",868],["T_FUNCTION","function",868],["T_WHITESPACE"," ",868],["T_STRING","removeAll",868],"(",")",["T_WHITESPACE","\n    ",868],"{",["T_WHITESPACE","\n        ",869],["T_VARIABLE","$this",870],["T_OBJECT_OPERATOR","->",870],["T_STRING","removeAllAssignments",870],"(",")",";",["T_WHITESPACE","\n        ",870],["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","db",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","createCommand",871],"(",")",["T_OBJECT_OPERATOR","->",871],["T_STRING","delete",871],"(",["T_VARIABLE","$this",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","itemChildTable",871],")",["T_OBJECT_OPERATOR","->",871],["T_STRING","execute",871],"(",")",";",["T_WHITESPACE","\n        ",871],["T_VARIABLE","$this",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","db",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","createCommand",872],"(",")",["T_OBJECT_OPERATOR","->",872],["T_STRING","delete",872],"(",["T_VARIABLE","$this",872],["T_OBJECT_OPERATOR","->",872],["T_STRING","itemTable",872],")",["T_OBJECT_OPERATOR","->",872],["T_STRING","execute",872],"(",")",";",["T_WHITESPACE","\n        ",872],["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","db",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","createCommand",873],"(",")",["T_OBJECT_OPERATOR","->",873],["T_STRING","delete",873],"(",["T_VARIABLE","$this",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","ruleTable",873],")",["T_OBJECT_OPERATOR","->",873],["T_STRING","execute",873],"(",")",";",["T_WHITESPACE","\n        ",873],["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","invalidateCache",874],"(",")",";",["T_WHITESPACE","\n    ",874],"}",["T_WHITESPACE","\n\n    ",875],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",877],["T_WHITESPACE","\n    ",879],["T_PUBLIC","public",880],["T_WHITESPACE"," ",880],["T_FUNCTION","function",880],["T_WHITESPACE"," ",880],["T_STRING","removeAllPermissions",880],"(",")",["T_WHITESPACE","\n    ",880],"{",["T_WHITESPACE","\n        ",881],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","removeAllItems",882],"(",["T_STRING","Item",882],["T_DOUBLE_COLON","::",882],["T_STRING","TYPE_PERMISSION",882],")",";",["T_WHITESPACE","\n    ",882],"}",["T_WHITESPACE","\n\n    ",883],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",885],["T_WHITESPACE","\n    ",887],["T_PUBLIC","public",888],["T_WHITESPACE"," ",888],["T_FUNCTION","function",888],["T_WHITESPACE"," ",888],["T_STRING","removeAllRoles",888],"(",")",["T_WHITESPACE","\n    ",888],"{",["T_WHITESPACE","\n        ",889],["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","removeAllItems",890],"(",["T_STRING","Item",890],["T_DOUBLE_COLON","::",890],["T_STRING","TYPE_ROLE",890],")",";",["T_WHITESPACE","\n    ",890],"}",["T_WHITESPACE","\n\n    ",891],["T_DOC_COMMENT","\/**\n     * Removes all auth items of the specified type.\n     * @param int $type the auth item type (either Item::TYPE_PERMISSION or Item::TYPE_ROLE)\n     *\/",893],["T_WHITESPACE","\n    ",896],["T_PROTECTED","protected",897],["T_WHITESPACE"," ",897],["T_FUNCTION","function",897],["T_WHITESPACE"," ",897],["T_STRING","removeAllItems",897],"(",["T_VARIABLE","$type",897],")",["T_WHITESPACE","\n    ",897],"{",["T_WHITESPACE","\n        ",898],["T_IF","if",899],["T_WHITESPACE"," ",899],"(","!",["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","supportsCascadeUpdate",899],"(",")",")",["T_WHITESPACE"," ",899],"{",["T_WHITESPACE","\n            ",899],["T_VARIABLE","$names",900],["T_WHITESPACE"," ",900],"=",["T_WHITESPACE"," ",900],"(",["T_NEW","new",900],["T_WHITESPACE"," ",900],["T_STRING","Query",900],")",["T_WHITESPACE","\n                ",900],["T_OBJECT_OPERATOR","->",901],["T_STRING","select",901],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",901],"]",")",["T_WHITESPACE","\n                ",901],["T_OBJECT_OPERATOR","->",902],["T_STRING","from",902],"(",["T_VARIABLE","$this",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","itemTable",902],")",["T_WHITESPACE","\n                ",902],["T_OBJECT_OPERATOR","->",903],["T_STRING","where",903],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",903],["T_WHITESPACE"," ",903],["T_DOUBLE_ARROW","=>",903],["T_WHITESPACE"," ",903],["T_VARIABLE","$type",903],"]",")",["T_WHITESPACE","\n                ",903],["T_OBJECT_OPERATOR","->",904],["T_STRING","column",904],"(",["T_VARIABLE","$this",904],["T_OBJECT_OPERATOR","->",904],["T_STRING","db",904],")",";",["T_WHITESPACE","\n            ",904],["T_IF","if",905],["T_WHITESPACE"," ",905],"(",["T_EMPTY","empty",905],"(",["T_VARIABLE","$names",905],")",")",["T_WHITESPACE"," ",905],"{",["T_WHITESPACE","\n                ",905],["T_RETURN","return",906],";",["T_WHITESPACE","\n            ",906],"}",["T_WHITESPACE","\n            ",907],["T_VARIABLE","$key",908],["T_WHITESPACE"," ",908],"=",["T_WHITESPACE"," ",908],["T_VARIABLE","$type",908],["T_WHITESPACE"," ",908],["T_IS_EQUAL","==",908],["T_WHITESPACE"," ",908],["T_STRING","Item",908],["T_DOUBLE_COLON","::",908],["T_STRING","TYPE_PERMISSION",908],["T_WHITESPACE"," ",908],"?",["T_WHITESPACE"," ",908],["T_CONSTANT_ENCAPSED_STRING","'child'",908],["T_WHITESPACE"," ",908],":",["T_WHITESPACE"," ",908],["T_CONSTANT_ENCAPSED_STRING","'parent'",908],";",["T_WHITESPACE","\n            ",908],["T_VARIABLE","$this",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","db",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","createCommand",909],"(",")",["T_WHITESPACE","\n                ",909],["T_OBJECT_OPERATOR","->",910],["T_STRING","delete",910],"(",["T_VARIABLE","$this",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","itemChildTable",910],",",["T_WHITESPACE"," ",910],"[",["T_VARIABLE","$key",910],["T_WHITESPACE"," ",910],["T_DOUBLE_ARROW","=>",910],["T_WHITESPACE"," ",910],["T_VARIABLE","$names",910],"]",")",["T_WHITESPACE","\n                ",910],["T_OBJECT_OPERATOR","->",911],["T_STRING","execute",911],"(",")",";",["T_WHITESPACE","\n            ",911],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","db",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","createCommand",912],"(",")",["T_WHITESPACE","\n                ",912],["T_OBJECT_OPERATOR","->",913],["T_STRING","delete",913],"(",["T_VARIABLE","$this",913],["T_OBJECT_OPERATOR","->",913],["T_STRING","assignmentTable",913],",",["T_WHITESPACE"," ",913],"[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",913],["T_WHITESPACE"," ",913],["T_DOUBLE_ARROW","=>",913],["T_WHITESPACE"," ",913],["T_VARIABLE","$names",913],"]",")",["T_WHITESPACE","\n                ",913],["T_OBJECT_OPERATOR","->",914],["T_STRING","execute",914],"(",")",";",["T_WHITESPACE","\n        ",914],"}",["T_WHITESPACE","\n        ",915],["T_VARIABLE","$this",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","db",916],["T_OBJECT_OPERATOR","->",916],["T_STRING","createCommand",916],"(",")",["T_WHITESPACE","\n            ",916],["T_OBJECT_OPERATOR","->",917],["T_STRING","delete",917],"(",["T_VARIABLE","$this",917],["T_OBJECT_OPERATOR","->",917],["T_STRING","itemTable",917],",",["T_WHITESPACE"," ",917],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",917],["T_WHITESPACE"," ",917],["T_DOUBLE_ARROW","=>",917],["T_WHITESPACE"," ",917],["T_VARIABLE","$type",917],"]",")",["T_WHITESPACE","\n            ",917],["T_OBJECT_OPERATOR","->",918],["T_STRING","execute",918],"(",")",";",["T_WHITESPACE","\n\n        ",918],["T_VARIABLE","$this",920],["T_OBJECT_OPERATOR","->",920],["T_STRING","invalidateCache",920],"(",")",";",["T_WHITESPACE","\n    ",920],"}",["T_WHITESPACE","\n\n    ",921],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",923],["T_WHITESPACE","\n    ",925],["T_PUBLIC","public",926],["T_WHITESPACE"," ",926],["T_FUNCTION","function",926],["T_WHITESPACE"," ",926],["T_STRING","removeAllRules",926],"(",")",["T_WHITESPACE","\n    ",926],"{",["T_WHITESPACE","\n        ",927],["T_IF","if",928],["T_WHITESPACE"," ",928],"(","!",["T_VARIABLE","$this",928],["T_OBJECT_OPERATOR","->",928],["T_STRING","supportsCascadeUpdate",928],"(",")",")",["T_WHITESPACE"," ",928],"{",["T_WHITESPACE","\n            ",928],["T_VARIABLE","$this",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","db",929],["T_OBJECT_OPERATOR","->",929],["T_STRING","createCommand",929],"(",")",["T_WHITESPACE","\n                ",929],["T_OBJECT_OPERATOR","->",930],["T_STRING","update",930],"(",["T_VARIABLE","$this",930],["T_OBJECT_OPERATOR","->",930],["T_STRING","itemTable",930],",",["T_WHITESPACE"," ",930],"[",["T_CONSTANT_ENCAPSED_STRING","'rule_name'",930],["T_WHITESPACE"," ",930],["T_DOUBLE_ARROW","=>",930],["T_WHITESPACE"," ",930],["T_STRING","null",930],"]",")",["T_WHITESPACE","\n                ",930],["T_OBJECT_OPERATOR","->",931],["T_STRING","execute",931],"(",")",";",["T_WHITESPACE","\n        ",931],"}",["T_WHITESPACE","\n\n        ",932],["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","db",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","createCommand",934],"(",")",["T_OBJECT_OPERATOR","->",934],["T_STRING","delete",934],"(",["T_VARIABLE","$this",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","ruleTable",934],")",["T_OBJECT_OPERATOR","->",934],["T_STRING","execute",934],"(",")",";",["T_WHITESPACE","\n\n        ",934],["T_VARIABLE","$this",936],["T_OBJECT_OPERATOR","->",936],["T_STRING","invalidateCache",936],"(",")",";",["T_WHITESPACE","\n    ",936],"}",["T_WHITESPACE","\n\n    ",937],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",939],["T_WHITESPACE","\n    ",941],["T_PUBLIC","public",942],["T_WHITESPACE"," ",942],["T_FUNCTION","function",942],["T_WHITESPACE"," ",942],["T_STRING","removeAllAssignments",942],"(",")",["T_WHITESPACE","\n    ",942],"{",["T_WHITESPACE","\n        ",943],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","db",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","createCommand",944],"(",")",["T_OBJECT_OPERATOR","->",944],["T_STRING","delete",944],"(",["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","assignmentTable",944],")",["T_OBJECT_OPERATOR","->",944],["T_STRING","execute",944],"(",")",";",["T_WHITESPACE","\n    ",944],"}",["T_WHITESPACE","\n\n    ",945],["T_PUBLIC","public",947],["T_WHITESPACE"," ",947],["T_FUNCTION","function",947],["T_WHITESPACE"," ",947],["T_STRING","invalidateCache",947],"(",")",["T_WHITESPACE","\n    ",947],"{",["T_WHITESPACE","\n        ",948],["T_IF","if",949],["T_WHITESPACE"," ",949],"(",["T_VARIABLE","$this",949],["T_OBJECT_OPERATOR","->",949],["T_STRING","cache",949],["T_WHITESPACE"," ",949],["T_IS_NOT_IDENTICAL","!==",949],["T_WHITESPACE"," ",949],["T_STRING","null",949],")",["T_WHITESPACE"," ",949],"{",["T_WHITESPACE","\n            ",949],["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","cache",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","delete",950],"(",["T_VARIABLE","$this",950],["T_OBJECT_OPERATOR","->",950],["T_STRING","cacheKey",950],")",";",["T_WHITESPACE","\n            ",950],["T_VARIABLE","$this",951],["T_OBJECT_OPERATOR","->",951],["T_STRING","items",951],["T_WHITESPACE"," ",951],"=",["T_WHITESPACE"," ",951],["T_STRING","null",951],";",["T_WHITESPACE","\n            ",951],["T_VARIABLE","$this",952],["T_OBJECT_OPERATOR","->",952],["T_STRING","rules",952],["T_WHITESPACE"," ",952],"=",["T_WHITESPACE"," ",952],["T_STRING","null",952],";",["T_WHITESPACE","\n            ",952],["T_VARIABLE","$this",953],["T_OBJECT_OPERATOR","->",953],["T_STRING","parents",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_STRING","null",953],";",["T_WHITESPACE","\n        ",953],"}",["T_WHITESPACE","\n    ",954],"}",["T_WHITESPACE","\n\n    ",955],["T_PUBLIC","public",957],["T_WHITESPACE"," ",957],["T_FUNCTION","function",957],["T_WHITESPACE"," ",957],["T_STRING","loadFromCache",957],"(",")",["T_WHITESPACE","\n    ",957],"{",["T_WHITESPACE","\n        ",958],["T_IF","if",959],["T_WHITESPACE"," ",959],"(",["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","items",959],["T_WHITESPACE"," ",959],["T_IS_NOT_IDENTICAL","!==",959],["T_WHITESPACE"," ",959],["T_STRING","null",959],["T_WHITESPACE"," ",959],["T_BOOLEAN_OR","||",959],["T_WHITESPACE"," ",959],"!",["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","cache",959],["T_WHITESPACE"," ",959],["T_INSTANCEOF","instanceof",959],["T_WHITESPACE"," ",959],["T_STRING","Cache",959],")",["T_WHITESPACE"," ",959],"{",["T_WHITESPACE","\n            ",959],["T_RETURN","return",960],";",["T_WHITESPACE","\n        ",960],"}",["T_WHITESPACE","\n\n        ",961],["T_VARIABLE","$data",963],["T_WHITESPACE"," ",963],"=",["T_WHITESPACE"," ",963],["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","cache",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","get",963],"(",["T_VARIABLE","$this",963],["T_OBJECT_OPERATOR","->",963],["T_STRING","cacheKey",963],")",";",["T_WHITESPACE","\n        ",963],["T_IF","if",964],["T_WHITESPACE"," ",964],"(",["T_STRING","is_array",964],"(",["T_VARIABLE","$data",964],")",["T_WHITESPACE"," ",964],["T_BOOLEAN_AND","&&",964],["T_WHITESPACE"," ",964],["T_ISSET","isset",964],"(",["T_VARIABLE","$data",964],"[",["T_LNUMBER","0",964],"]",",",["T_WHITESPACE"," ",964],["T_VARIABLE","$data",964],"[",["T_LNUMBER","1",964],"]",",",["T_WHITESPACE"," ",964],["T_VARIABLE","$data",964],"[",["T_LNUMBER","2",964],"]",")",")",["T_WHITESPACE"," ",964],"{",["T_WHITESPACE","\n            ",964],["T_LIST","list",965],["T_WHITESPACE"," ",965],"(",["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","items",965],",",["T_WHITESPACE"," ",965],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","rules",965],",",["T_WHITESPACE"," ",965],["T_VARIABLE","$this",965],["T_OBJECT_OPERATOR","->",965],["T_STRING","parents",965],")",["T_WHITESPACE"," ",965],"=",["T_WHITESPACE"," ",965],["T_VARIABLE","$data",965],";",["T_WHITESPACE","\n            ",965],["T_RETURN","return",966],";",["T_WHITESPACE","\n        ",966],"}",["T_WHITESPACE","\n\n        ",967],["T_VARIABLE","$query",969],["T_WHITESPACE"," ",969],"=",["T_WHITESPACE"," ",969],"(",["T_NEW","new",969],["T_WHITESPACE"," ",969],["T_STRING","Query",969],")",["T_OBJECT_OPERATOR","->",969],["T_STRING","from",969],"(",["T_VARIABLE","$this",969],["T_OBJECT_OPERATOR","->",969],["T_STRING","itemTable",969],")",";",["T_WHITESPACE","\n        ",969],["T_VARIABLE","$this",970],["T_OBJECT_OPERATOR","->",970],["T_STRING","items",970],["T_WHITESPACE"," ",970],"=",["T_WHITESPACE"," ",970],"[","]",";",["T_WHITESPACE","\n        ",970],["T_FOREACH","foreach",971],["T_WHITESPACE"," ",971],"(",["T_VARIABLE","$query",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","all",971],"(",["T_VARIABLE","$this",971],["T_OBJECT_OPERATOR","->",971],["T_STRING","db",971],")",["T_WHITESPACE"," ",971],["T_AS","as",971],["T_WHITESPACE"," ",971],["T_VARIABLE","$row",971],")",["T_WHITESPACE"," ",971],"{",["T_WHITESPACE","\n            ",971],["T_VARIABLE","$this",972],["T_OBJECT_OPERATOR","->",972],["T_STRING","items",972],"[",["T_VARIABLE","$row",972],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",972],"]","]",["T_WHITESPACE"," ",972],"=",["T_WHITESPACE"," ",972],["T_VARIABLE","$this",972],["T_OBJECT_OPERATOR","->",972],["T_STRING","populateItem",972],"(",["T_VARIABLE","$row",972],")",";",["T_WHITESPACE","\n        ",972],"}",["T_WHITESPACE","\n\n        ",973],["T_VARIABLE","$query",975],["T_WHITESPACE"," ",975],"=",["T_WHITESPACE"," ",975],"(",["T_NEW","new",975],["T_WHITESPACE"," ",975],["T_STRING","Query",975],")",["T_OBJECT_OPERATOR","->",975],["T_STRING","from",975],"(",["T_VARIABLE","$this",975],["T_OBJECT_OPERATOR","->",975],["T_STRING","ruleTable",975],")",";",["T_WHITESPACE","\n        ",975],["T_VARIABLE","$this",976],["T_OBJECT_OPERATOR","->",976],["T_STRING","rules",976],["T_WHITESPACE"," ",976],"=",["T_WHITESPACE"," ",976],"[","]",";",["T_WHITESPACE","\n        ",976],["T_FOREACH","foreach",977],["T_WHITESPACE"," ",977],"(",["T_VARIABLE","$query",977],["T_OBJECT_OPERATOR","->",977],["T_STRING","all",977],"(",["T_VARIABLE","$this",977],["T_OBJECT_OPERATOR","->",977],["T_STRING","db",977],")",["T_WHITESPACE"," ",977],["T_AS","as",977],["T_WHITESPACE"," ",977],["T_VARIABLE","$row",977],")",["T_WHITESPACE"," ",977],"{",["T_WHITESPACE","\n            ",977],["T_VARIABLE","$this",978],["T_OBJECT_OPERATOR","->",978],["T_STRING","rules",978],"[",["T_VARIABLE","$row",978],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",978],"]","]",["T_WHITESPACE"," ",978],"=",["T_WHITESPACE"," ",978],["T_STRING","unserialize",978],"(",["T_VARIABLE","$row",978],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",978],"]",")",";",["T_WHITESPACE","\n        ",978],"}",["T_WHITESPACE","\n\n        ",979],["T_VARIABLE","$query",981],["T_WHITESPACE"," ",981],"=",["T_WHITESPACE"," ",981],"(",["T_NEW","new",981],["T_WHITESPACE"," ",981],["T_STRING","Query",981],")",["T_OBJECT_OPERATOR","->",981],["T_STRING","from",981],"(",["T_VARIABLE","$this",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","itemChildTable",981],")",";",["T_WHITESPACE","\n        ",981],["T_VARIABLE","$this",982],["T_OBJECT_OPERATOR","->",982],["T_STRING","parents",982],["T_WHITESPACE"," ",982],"=",["T_WHITESPACE"," ",982],"[","]",";",["T_WHITESPACE","\n        ",982],["T_FOREACH","foreach",983],["T_WHITESPACE"," ",983],"(",["T_VARIABLE","$query",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","all",983],"(",["T_VARIABLE","$this",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","db",983],")",["T_WHITESPACE"," ",983],["T_AS","as",983],["T_WHITESPACE"," ",983],["T_VARIABLE","$row",983],")",["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n            ",983],["T_IF","if",984],["T_WHITESPACE"," ",984],"(",["T_ISSET","isset",984],"(",["T_VARIABLE","$this",984],["T_OBJECT_OPERATOR","->",984],["T_STRING","items",984],"[",["T_VARIABLE","$row",984],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",984],"]","]",")",")",["T_WHITESPACE"," ",984],"{",["T_WHITESPACE","\n                ",984],["T_VARIABLE","$this",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","parents",985],"[",["T_VARIABLE","$row",985],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",985],"]","]","[","]",["T_WHITESPACE"," ",985],"=",["T_WHITESPACE"," ",985],["T_VARIABLE","$row",985],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",985],"]",";",["T_WHITESPACE","\n            ",985],"}",["T_WHITESPACE","\n        ",986],"}",["T_WHITESPACE","\n\n        ",987],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","cache",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","set",989],"(",["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","cacheKey",989],",",["T_WHITESPACE"," ",989],"[",["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","items",989],",",["T_WHITESPACE"," ",989],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","rules",989],",",["T_WHITESPACE"," ",989],["T_VARIABLE","$this",989],["T_OBJECT_OPERATOR","->",989],["T_STRING","parents",989],"]",")",";",["T_WHITESPACE","\n    ",989],"}",["T_WHITESPACE","\n\n    ",990],["T_DOC_COMMENT","\/**\n     * Returns all role assignment information for the specified role.\n     * @param string $roleName\n     * @return Assignment[] the assignments. An empty array will be\n     * returned if role is not assigned to any user.\n     * @since 2.0.7\n     *\/",992],["T_WHITESPACE","\n    ",998],["T_PUBLIC","public",999],["T_WHITESPACE"," ",999],["T_FUNCTION","function",999],["T_WHITESPACE"," ",999],["T_STRING","getUserIdsByRole",999],"(",["T_VARIABLE","$roleName",999],")",["T_WHITESPACE","\n    ",999],"{",["T_WHITESPACE","\n        ",1000],["T_IF","if",1001],["T_WHITESPACE"," ",1001],"(",["T_EMPTY","empty",1001],"(",["T_VARIABLE","$roleName",1001],")",")",["T_WHITESPACE"," ",1001],"{",["T_WHITESPACE","\n            ",1001],["T_RETURN","return",1002],["T_WHITESPACE"," ",1002],"[","]",";",["T_WHITESPACE","\n        ",1002],"}",["T_WHITESPACE","\n\n        ",1003],["T_RETURN","return",1005],["T_WHITESPACE"," ",1005],"(",["T_NEW","new",1005],["T_WHITESPACE"," ",1005],["T_STRING","Query",1005],")",["T_OBJECT_OPERATOR","->",1005],["T_STRING","select",1005],"(",["T_CONSTANT_ENCAPSED_STRING","'[[user_id]]'",1005],")",["T_WHITESPACE","\n            ",1005],["T_OBJECT_OPERATOR","->",1006],["T_STRING","from",1006],"(",["T_VARIABLE","$this",1006],["T_OBJECT_OPERATOR","->",1006],["T_STRING","assignmentTable",1006],")",["T_WHITESPACE","\n            ",1006],["T_OBJECT_OPERATOR","->",1007],["T_STRING","where",1007],"(","[",["T_CONSTANT_ENCAPSED_STRING","'item_name'",1007],["T_WHITESPACE"," ",1007],["T_DOUBLE_ARROW","=>",1007],["T_WHITESPACE"," ",1007],["T_VARIABLE","$roleName",1007],"]",")",["T_OBJECT_OPERATOR","->",1007],["T_STRING","column",1007],"(",["T_VARIABLE","$this",1007],["T_OBJECT_OPERATOR","->",1007],["T_STRING","db",1007],")",";",["T_WHITESPACE","\n    ",1007],"}",["T_WHITESPACE","\n",1008],"}",["T_WHITESPACE","\n",1009]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","rbac",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidCallException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidParamException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Yii",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","helpers",13],["T_NS_SEPARATOR","\\",13],["T_STRING","VarDumper",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * PhpManager represents an authorization manager that stores authorization\n * information in terms of a PHP script file.\n *\n * The authorization data will be saved to and loaded from three files\n * specified by [[itemFile]], [[assignmentFile]] and [[ruleFile]].\n *\n * PhpManager is mainly suitable for authorization data that is not too big\n * (for example, the authorization data for a personal blog system).\n * Use [[DbManager]] for more complex authorization data.\n *\n * Note that PhpManager is not compatible with facebooks [HHVM](http:\/\/hhvm.com\/) because\n * it relies on writing php files and including them afterwards which is not supported by HHVM.\n *\n * For more details and usage information on PhpManager, see the [guide article on security authorization](guide:security-authorization).\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @author Alexander Kochetov <creocoder@gmail.com>\n * @author Christophe Boulain <christophe.boulain@gmail.com>\n * @author Alexander Makarov <sam@rmcreative.ru>\n * @since 2.0\n *\/",15],["T_WHITESPACE","\n",36],["T_CLASS","class",37],["T_WHITESPACE"," ",37],["T_STRING","PhpManager",37],["T_WHITESPACE"," ",37],["T_EXTENDS","extends",37],["T_WHITESPACE"," ",37],["T_STRING","BaseManager",37],["T_WHITESPACE","\n",37],"{",["T_WHITESPACE","\n    ",38],["T_DOC_COMMENT","\/**\n     * @var string the path of the PHP script that contains the authorization items.\n     * This can be either a file path or a path alias to the file.\n     * Make sure this file is writable by the Web server process if the authorization needs to be changed online.\n     * @see loadFromFile()\n     * @see saveToFile()\n     *\/",39],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$itemFile",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'@app\/rbac\/items.php'",46],";",["T_WHITESPACE","\n    ",46],["T_DOC_COMMENT","\/**\n     * @var string the path of the PHP script that contains the authorization assignments.\n     * This can be either a file path or a path alias to the file.\n     * Make sure this file is writable by the Web server process if the authorization needs to be changed online.\n     * @see loadFromFile()\n     * @see saveToFile()\n     *\/",47],["T_WHITESPACE","\n    ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$assignmentFile",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'@app\/rbac\/assignments.php'",54],";",["T_WHITESPACE","\n    ",54],["T_DOC_COMMENT","\/**\n     * @var string the path of the PHP script that contains the authorization rules.\n     * This can be either a file path or a path alias to the file.\n     * Make sure this file is writable by the Web server process if the authorization needs to be changed online.\n     * @see loadFromFile()\n     * @see saveToFile()\n     *\/",55],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$ruleFile",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'@app\/rbac\/rules.php'",62],";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/**\n     * @var Item[]\n     *\/",64],["T_WHITESPACE","\n    ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$items",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],"[","]",";",["T_WHITESPACE"," ",67],["T_COMMENT","\/\/ itemName => item\n",67],["T_WHITESPACE","    ",68],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$children",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",";",["T_WHITESPACE"," ",71],["T_COMMENT","\/\/ itemName, childName => child\n",71],["T_WHITESPACE","    ",72],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$assignments",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[","]",";",["T_WHITESPACE"," ",75],["T_COMMENT","\/\/ userId, itemName => assignment\n",75],["T_WHITESPACE","    ",76],["T_DOC_COMMENT","\/**\n     * @var Rule[]\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$rules",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",";",["T_WHITESPACE"," ",79],["T_COMMENT","\/\/ ruleName => rule\n",79],["T_WHITESPACE","\n\n    ",80],["T_DOC_COMMENT","\/**\n     * Initializes the application component.\n     * This method overrides parent implementation by loading the authorization data\n     * from PHP script.\n     *\/",82],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","init",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","init",89],"(",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","itemFile",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Yii",90],["T_DOUBLE_COLON","::",90],["T_STRING","getAlias",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","itemFile",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assignmentFile",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Yii",91],["T_DOUBLE_COLON","::",91],["T_STRING","getAlias",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assignmentFile",91],")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","ruleFile",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","Yii",92],["T_DOUBLE_COLON","::",92],["T_STRING","getAlias",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","ruleFile",92],")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","load",93],"(",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","checkAccess",99],"(",["T_VARIABLE","$userId",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$permissionName",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$params",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[","]",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$assignments",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getAssignments",101],"(",["T_VARIABLE","$userId",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","hasNoAssignments",103],"(",["T_VARIABLE","$assignments",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n            ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_STRING","false",104],";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n\n        ",105],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","checkAccessRecursive",107],"(",["T_VARIABLE","$userId",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$permissionName",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$params",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$assignments",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",110],["T_WHITESPACE","\n    ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","getAssignments",113],"(",["T_VARIABLE","$userId",113],")",["T_WHITESPACE","\n    ",113],"{",["T_WHITESPACE","\n        ",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_ISSET","isset",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assignments",115],"[",["T_VARIABLE","$userId",115],"]",")",["T_WHITESPACE"," ",115],"?",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assignments",115],"[",["T_VARIABLE","$userId",115],"]",["T_WHITESPACE"," ",115],":",["T_WHITESPACE"," ",115],"[","]",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * Performs access check for the specified user.\n     * This method is internally called by [[checkAccess()]].\n     *\n     * @param string|int $user the user ID. This should can be either an integer or a string representing\n     * the unique identifier of a user. See [[\\yii\\web\\User::id]].\n     * @param string $itemName the name of the operation that need access check\n     * @param array $params name-value pairs that would be passed to rules associated\n     * with the tasks and roles assigned to the user. A param with name 'user' is added to this array,\n     * which holds the value of `$userId`.\n     * @param Assignment[] $assignments the assignments to the specified user\n     * @return bool whether the operations can be performed by the user.\n     *\/",118],["T_WHITESPACE","\n    ",130],["T_PROTECTED","protected",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","checkAccessRecursive",131],"(",["T_VARIABLE","$user",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$itemName",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$params",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$assignments",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_ISSET","isset",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","items",133],"[",["T_VARIABLE","$itemName",133],"]",")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_STRING","false",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_COMMENT","\/* @var $item Item *\/",137],["T_WHITESPACE","\n        ",137],["T_VARIABLE","$item",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","items",138],"[",["T_VARIABLE","$itemName",138],"]",";",["T_WHITESPACE","\n        ",138],["T_STRING","Yii",139],["T_DOUBLE_COLON","::",139],["T_STRING","trace",139],"(",["T_VARIABLE","$item",139],["T_WHITESPACE"," ",139],["T_INSTANCEOF","instanceof",139],["T_WHITESPACE"," ",139],["T_STRING","Role",139],["T_WHITESPACE"," ",139],"?",["T_WHITESPACE"," ",139],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking role: ",139],["T_VARIABLE","$itemName",139],"\"",["T_WHITESPACE"," ",139],":",["T_WHITESPACE"," ",139],"\"",["T_ENCAPSED_AND_WHITESPACE","Checking permission : ",139],["T_VARIABLE","$itemName",139],"\"",",",["T_WHITESPACE"," ",139],["T_METHOD_C","__METHOD__",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","executeRule",141],"(",["T_VARIABLE","$user",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$item",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$params",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","false",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_ISSET","isset",145],"(",["T_VARIABLE","$assignments",145],"[",["T_VARIABLE","$itemName",145],"]",")",["T_WHITESPACE"," ",145],["T_BOOLEAN_OR","||",145],["T_WHITESPACE"," ",145],["T_STRING","in_array",145],"(",["T_VARIABLE","$itemName",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","defaultRoles",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_STRING","true",146],";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_FOREACH","foreach",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","children",149],["T_WHITESPACE"," ",149],["T_AS","as",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$parentName",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$children",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n            ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$children",150],"[",["T_VARIABLE","$itemName",150],"]",")",["T_WHITESPACE"," ",150],["T_BOOLEAN_AND","&&",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","checkAccessRecursive",150],"(",["T_VARIABLE","$user",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$parentName",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$params",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$assignments",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","true",151],";",["T_WHITESPACE","\n            ",151],"}",["T_WHITESPACE","\n        ",152],"}",["T_WHITESPACE","\n\n        ",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_STRING","false",155],";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",158],["T_WHITESPACE","\n    ",161],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","canAddChild",162],"(",["T_VARIABLE","$parent",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$child",162],")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],"!",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","detectLoop",164],"(",["T_VARIABLE","$parent",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$child",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",167],["T_WHITESPACE","\n    ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","addChild",170],"(",["T_VARIABLE","$parent",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$child",170],")",["T_WHITESPACE","\n    ",170],"{",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_ISSET","isset",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","items",172],"[",["T_VARIABLE","$parent",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","name",172],"]",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","items",172],"[",["T_VARIABLE","$child",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","name",172],"]",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_THROW","throw",173],["T_WHITESPACE"," ",173],["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_STRING","InvalidParamException",173],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Either '",173],["T_CURLY_OPEN","{",173],["T_VARIABLE","$parent",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","name",173],"}",["T_ENCAPSED_AND_WHITESPACE","' or '",173],["T_CURLY_OPEN","{",173],["T_VARIABLE","$child",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","name",173],"}",["T_ENCAPSED_AND_WHITESPACE","' does not exist.",173],"\"",")",";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$parent",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","name",176],["T_WHITESPACE"," ",176],["T_IS_IDENTICAL","===",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$child",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","name",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_THROW","throw",177],["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","InvalidParamException",177],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot add '",177],["T_CURLY_OPEN","{",177],["T_VARIABLE","$parent",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","name",177],"}",["T_ENCAPSED_AND_WHITESPACE"," ' as a child of itself.",177],"\"",")",";",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n        ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$parent",179],["T_WHITESPACE"," ",179],["T_INSTANCEOF","instanceof",179],["T_WHITESPACE"," ",179],["T_STRING","Permission",179],["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$child",179],["T_WHITESPACE"," ",179],["T_INSTANCEOF","instanceof",179],["T_WHITESPACE"," ",179],["T_STRING","Role",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_THROW","throw",180],["T_WHITESPACE"," ",180],["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_STRING","InvalidParamException",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot add a role as a child of a permission.'",180],")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","detectLoop",183],"(",["T_VARIABLE","$parent",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$child",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n            ",183],["T_THROW","throw",184],["T_WHITESPACE"," ",184],["T_NEW","new",184],["T_WHITESPACE"," ",184],["T_STRING","InvalidCallException",184],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot add '",184],["T_CURLY_OPEN","{",184],["T_VARIABLE","$child",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","name",184],"}",["T_ENCAPSED_AND_WHITESPACE","' as a child of '",184],["T_CURLY_OPEN","{",184],["T_VARIABLE","$parent",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","name",184],"}",["T_ENCAPSED_AND_WHITESPACE","'. A loop has been detected.",184],"\"",")",";",["T_WHITESPACE","\n        ",184],"}",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_ISSET","isset",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","children",186],"[",["T_VARIABLE","$parent",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","name",186],"]","[",["T_VARIABLE","$child",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","name",186],"]",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_THROW","throw",187],["T_WHITESPACE"," ",187],["T_NEW","new",187],["T_WHITESPACE"," ",187],["T_STRING","InvalidCallException",187],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The item '",187],["T_CURLY_OPEN","{",187],["T_VARIABLE","$parent",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","name",187],"}",["T_ENCAPSED_AND_WHITESPACE","' already has a child '",187],["T_CURLY_OPEN","{",187],["T_VARIABLE","$child",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","name",187],"}",["T_ENCAPSED_AND_WHITESPACE","'.",187],"\"",")",";",["T_WHITESPACE","\n        ",187],"}",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","children",189],"[",["T_VARIABLE","$parent",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","name",189],"]","[",["T_VARIABLE","$child",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","name",189],"]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","items",189],"[",["T_VARIABLE","$child",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","name",189],"]",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","saveItems",190],"(",")",";",["T_WHITESPACE","\n\n        ",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_STRING","true",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * Checks whether there is a loop in the authorization item hierarchy.\n     *\n     * @param Item $parent parent item\n     * @param Item $child the child item that is to be added to the hierarchy\n     * @return bool whether a loop exists\n     *\/",195],["T_WHITESPACE","\n    ",201],["T_PROTECTED","protected",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","detectLoop",202],"(",["T_VARIABLE","$parent",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$child",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$child",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","name",204],["T_WHITESPACE"," ",204],["T_IS_IDENTICAL","===",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$parent",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","name",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n            ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_STRING","true",205],";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(","!",["T_ISSET","isset",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","children",207],"[",["T_VARIABLE","$child",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","name",207],"]",",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","items",207],"[",["T_VARIABLE","$parent",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","name",207],"]",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_STRING","false",208],";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n        ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","children",210],"[",["T_VARIABLE","$child",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","name",210],"]",["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$grandchild",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n            ",210],["T_COMMENT","\/* @var $grandchild Item *\/",211],["T_WHITESPACE","\n            ",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","detectLoop",212],"(",["T_VARIABLE","$parent",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$grandchild",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_STRING","true",213],";",["T_WHITESPACE","\n            ",213],"}",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n\n        ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_STRING","false",217],";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",220],["T_WHITESPACE","\n    ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","removeChild",223],"(",["T_VARIABLE","$parent",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$child",223],")",["T_WHITESPACE","\n    ",223],"{",["T_WHITESPACE","\n        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_ISSET","isset",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","children",225],"[",["T_VARIABLE","$parent",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","name",225],"]","[",["T_VARIABLE","$child",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","name",225],"]",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_UNSET","unset",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","children",226],"[",["T_VARIABLE","$parent",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","name",226],"]","[",["T_VARIABLE","$child",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","name",226],"]",")",";",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","saveItems",227],"(",")",";",["T_WHITESPACE","\n            ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","true",228],";",["T_WHITESPACE","\n        ",228],"}",["T_WHITESPACE"," ",229],["T_ELSE","else",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n            ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_STRING","false",230],";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n\n    ",232],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",234],["T_WHITESPACE","\n    ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","removeChildren",237],"(",["T_VARIABLE","$parent",237],")",["T_WHITESPACE","\n    ",237],"{",["T_WHITESPACE","\n        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_ISSET","isset",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","children",239],"[",["T_VARIABLE","$parent",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","name",239],"]",")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n            ",239],["T_UNSET","unset",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","children",240],"[",["T_VARIABLE","$parent",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","name",240],"]",")",";",["T_WHITESPACE","\n            ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","saveItems",241],"(",")",";",["T_WHITESPACE","\n            ",241],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","true",242],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n            ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_STRING","false",244],";",["T_WHITESPACE","\n        ",244],"}",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",248],["T_WHITESPACE","\n    ",250],["T_PUBLIC","public",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","hasChild",251],"(",["T_VARIABLE","$parent",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$child",251],")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_ISSET","isset",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","children",253],"[",["T_VARIABLE","$parent",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","name",253],"]","[",["T_VARIABLE","$child",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","name",253],"]",")",";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",256],["T_WHITESPACE","\n    ",258],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","assign",259],"(",["T_VARIABLE","$role",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$userId",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_ISSET","isset",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","items",261],"[",["T_VARIABLE","$role",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","name",261],"]",")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n            ",261],["T_THROW","throw",262],["T_WHITESPACE"," ",262],["T_NEW","new",262],["T_WHITESPACE"," ",262],["T_STRING","InvalidParamException",262],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unknown role '",262],["T_CURLY_OPEN","{",262],["T_VARIABLE","$role",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","name",262],"}",["T_ENCAPSED_AND_WHITESPACE","'.",262],"\"",")",";",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE"," ",263],["T_ELSEIF","elseif",263],["T_WHITESPACE"," ",263],"(",["T_ISSET","isset",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assignments",263],"[",["T_VARIABLE","$userId",263],"]","[",["T_VARIABLE","$role",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","name",263],"]",")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_THROW","throw",264],["T_WHITESPACE"," ",264],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_STRING","InvalidParamException",264],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Authorization item '",264],["T_CURLY_OPEN","{",264],["T_VARIABLE","$role",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","name",264],"}",["T_ENCAPSED_AND_WHITESPACE","' has already been assigned to user '",264],["T_VARIABLE","$userId",264],["T_ENCAPSED_AND_WHITESPACE","'.",264],"\"",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assignments",266],"[",["T_VARIABLE","$userId",266],"]","[",["T_VARIABLE","$role",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","name",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_NEW","new",266],["T_WHITESPACE"," ",266],["T_STRING","Assignment",266],"(","[",["T_WHITESPACE","\n                ",266],["T_CONSTANT_ENCAPSED_STRING","'userId'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$userId",267],",",["T_WHITESPACE","\n                ",267],["T_CONSTANT_ENCAPSED_STRING","'roleName'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$role",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","name",268],",",["T_WHITESPACE","\n                ",268],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_STRING","time",269],"(",")",",",["T_WHITESPACE","\n            ",269],"]",")",";",["T_WHITESPACE","\n            ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","saveAssignments",271],"(",")",";",["T_WHITESPACE","\n            ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assignments",272],"[",["T_VARIABLE","$userId",272],"]","[",["T_VARIABLE","$role",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","name",272],"]",";",["T_WHITESPACE","\n        ",272],"}",["T_WHITESPACE","\n    ",273],"}",["T_WHITESPACE","\n\n    ",274],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",276],["T_WHITESPACE","\n    ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","revoke",279],"(",["T_VARIABLE","$role",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$userId",279],")",["T_WHITESPACE","\n    ",279],"{",["T_WHITESPACE","\n        ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_ISSET","isset",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assignments",281],"[",["T_VARIABLE","$userId",281],"]","[",["T_VARIABLE","$role",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","name",281],"]",")",")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_UNSET","unset",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","assignments",282],"[",["T_VARIABLE","$userId",282],"]","[",["T_VARIABLE","$role",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","name",282],"]",")",";",["T_WHITESPACE","\n            ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","saveAssignments",283],"(",")",";",["T_WHITESPACE","\n            ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_STRING","true",284],";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE"," ",285],["T_ELSE","else",285],["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n            ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_STRING","false",286],";",["T_WHITESPACE","\n        ",286],"}",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",290],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","revokeAll",293],"(",["T_VARIABLE","$userId",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_ISSET","isset",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assignments",295],"[",["T_VARIABLE","$userId",295],"]",")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_STRING","is_array",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assignments",295],"[",["T_VARIABLE","$userId",295],"]",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n            ",295],["T_FOREACH","foreach",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assignments",296],"[",["T_VARIABLE","$userId",296],"]",["T_WHITESPACE"," ",296],["T_AS","as",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$itemName",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$value",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n                ",296],["T_UNSET","unset",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","assignments",297],"[",["T_VARIABLE","$userId",297],"]","[",["T_VARIABLE","$itemName",297],"]",")",";",["T_WHITESPACE","\n            ",297],"}",["T_WHITESPACE","\n            ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","saveAssignments",299],"(",")",";",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_STRING","true",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE"," ",301],["T_ELSE","else",301],["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n            ",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_STRING","false",302],";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",306],["T_WHITESPACE","\n    ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getAssignment",309],"(",["T_VARIABLE","$roleName",309],",",["T_WHITESPACE"," ",309],["T_VARIABLE","$userId",309],")",["T_WHITESPACE","\n    ",309],"{",["T_WHITESPACE","\n        ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_ISSET","isset",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assignments",311],"[",["T_VARIABLE","$userId",311],"]","[",["T_VARIABLE","$roleName",311],"]",")",["T_WHITESPACE"," ",311],"?",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assignments",311],"[",["T_VARIABLE","$userId",311],"]","[",["T_VARIABLE","$roleName",311],"]",["T_WHITESPACE"," ",311],":",["T_WHITESPACE"," ",311],["T_STRING","null",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",314],["T_WHITESPACE","\n    ",316],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","getItems",317],"(",["T_VARIABLE","$type",317],")",["T_WHITESPACE","\n    ",317],"{",["T_WHITESPACE","\n        ",318],["T_VARIABLE","$items",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],"[","]",";",["T_WHITESPACE","\n\n        ",319],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","items",321],["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$name",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$item",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n            ",321],["T_COMMENT","\/* @var $item Item *\/",322],["T_WHITESPACE","\n            ",322],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$item",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","type",323],["T_WHITESPACE"," ",323],["T_IS_EQUAL","==",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$type",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n                ",323],["T_VARIABLE","$items",324],"[",["T_VARIABLE","$name",324],"]",["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$item",324],";",["T_WHITESPACE","\n            ",324],"}",["T_WHITESPACE","\n        ",325],"}",["T_WHITESPACE","\n\n        ",326],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$items",328],";",["T_WHITESPACE","\n    ",328],"}",["T_WHITESPACE","\n\n\n    ",329],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",332],["T_WHITESPACE","\n    ",334],["T_PUBLIC","public",335],["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],["T_STRING","removeItem",335],"(",["T_VARIABLE","$item",335],")",["T_WHITESPACE","\n    ",335],"{",["T_WHITESPACE","\n        ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_ISSET","isset",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","items",337],"[",["T_VARIABLE","$item",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","name",337],"]",")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n            ",337],["T_FOREACH","foreach",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","children",338],["T_WHITESPACE"," ",338],["T_AS","as",338],["T_WHITESPACE"," ",338],"&",["T_VARIABLE","$children",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n                ",338],["T_UNSET","unset",339],"(",["T_VARIABLE","$children",339],"[",["T_VARIABLE","$item",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","name",339],"]",")",";",["T_WHITESPACE","\n            ",339],"}",["T_WHITESPACE","\n            ",340],["T_FOREACH","foreach",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","assignments",341],["T_WHITESPACE"," ",341],["T_AS","as",341],["T_WHITESPACE"," ",341],"&",["T_VARIABLE","$assignments",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n                ",341],["T_UNSET","unset",342],"(",["T_VARIABLE","$assignments",342],"[",["T_VARIABLE","$item",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","name",342],"]",")",";",["T_WHITESPACE","\n            ",342],"}",["T_WHITESPACE","\n            ",343],["T_UNSET","unset",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","items",344],"[",["T_VARIABLE","$item",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","name",344],"]",")",";",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","saveItems",345],"(",")",";",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","saveAssignments",346],"(",")",";",["T_WHITESPACE","\n            ",346],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_STRING","true",347],";",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE"," ",348],["T_ELSE","else",348],["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n            ",348],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_STRING","false",349],";",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n\n    ",351],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",353],["T_WHITESPACE","\n    ",355],["T_PUBLIC","public",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","getItem",356],"(",["T_VARIABLE","$name",356],")",["T_WHITESPACE","\n    ",356],"{",["T_WHITESPACE","\n        ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_ISSET","isset",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","items",358],"[",["T_VARIABLE","$name",358],"]",")",["T_WHITESPACE"," ",358],"?",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","items",358],"[",["T_VARIABLE","$name",358],"]",["T_WHITESPACE"," ",358],":",["T_WHITESPACE"," ",358],["T_STRING","null",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n\n    ",359],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",361],["T_WHITESPACE","\n    ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","updateRule",364],"(",["T_VARIABLE","$name",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$rule",364],")",["T_WHITESPACE","\n    ",364],"{",["T_WHITESPACE","\n        ",365],["T_IF","if",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$rule",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","name",366],["T_WHITESPACE"," ",366],["T_IS_NOT_IDENTICAL","!==",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$name",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_UNSET","unset",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","rules",367],"[",["T_VARIABLE","$name",367],"]",")",";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","rules",369],"[",["T_VARIABLE","$rule",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","name",369],"]",["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$rule",369],";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","saveRules",370],"(",")",";",["T_WHITESPACE","\n        ",370],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_STRING","true",371],";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n\n    ",372],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",374],["T_WHITESPACE","\n    ",376],["T_PUBLIC","public",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","getRule",377],"(",["T_VARIABLE","$name",377],")",["T_WHITESPACE","\n    ",377],"{",["T_WHITESPACE","\n        ",378],["T_RETURN","return",379],["T_WHITESPACE"," ",379],["T_ISSET","isset",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","rules",379],"[",["T_VARIABLE","$name",379],"]",")",["T_WHITESPACE"," ",379],"?",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","rules",379],"[",["T_VARIABLE","$name",379],"]",["T_WHITESPACE"," ",379],":",["T_WHITESPACE"," ",379],["T_STRING","null",379],";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n\n    ",380],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",382],["T_WHITESPACE","\n    ",384],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","getRules",385],"(",")",["T_WHITESPACE","\n    ",385],"{",["T_WHITESPACE","\n        ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","rules",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",390],["T_WHITESPACE","\n    ",392],["T_PUBLIC","public",393],["T_WHITESPACE"," ",393],["T_FUNCTION","function",393],["T_WHITESPACE"," ",393],["T_STRING","getRolesByUser",393],"(",["T_VARIABLE","$userId",393],")",["T_WHITESPACE","\n    ",393],"{",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$roles",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],"[","]",";",["T_WHITESPACE","\n        ",395],["T_FOREACH","foreach",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getAssignments",396],"(",["T_VARIABLE","$userId",396],")",["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$name",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$assignment",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n            ",396],["T_VARIABLE","$role",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","items",397],"[",["T_VARIABLE","$assignment",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","roleName",397],"]",";",["T_WHITESPACE","\n            ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$role",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","type",398],["T_WHITESPACE"," ",398],["T_IS_IDENTICAL","===",398],["T_WHITESPACE"," ",398],["T_STRING","Item",398],["T_DOUBLE_COLON","::",398],["T_STRING","TYPE_ROLE",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n                ",398],["T_VARIABLE","$roles",399],"[",["T_VARIABLE","$name",399],"]",["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$role",399],";",["T_WHITESPACE","\n            ",399],"}",["T_WHITESPACE","\n        ",400],"}",["T_WHITESPACE","\n\n        ",401],["T_RETURN","return",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$roles",403],";",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",406],["T_WHITESPACE","\n    ",408],["T_PUBLIC","public",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","getChildRoles",409],"(",["T_VARIABLE","$roleName",409],")",["T_WHITESPACE","\n    ",409],"{",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$role",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","getRole",411],"(",["T_VARIABLE","$roleName",411],")",";",["T_WHITESPACE","\n\n        ",411],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_STRING","is_null",413],"(",["T_VARIABLE","$role",413],")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_THROW","throw",414],["T_WHITESPACE"," ",414],["T_NEW","new",414],["T_WHITESPACE"," ",414],["T_STRING","InvalidParamException",414],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Role \\\"",414],["T_VARIABLE","$roleName",414],["T_ENCAPSED_AND_WHITESPACE","\\\" not found.",414],"\"",")",";",["T_WHITESPACE","\n        ",414],"}",["T_WHITESPACE","\n\n        ",415],["T_VARIABLE","$result",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],"[","]",";",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","getChildrenRecursive",418],"(",["T_VARIABLE","$roleName",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$result",418],")",";",["T_WHITESPACE","\n\n        ",418],["T_VARIABLE","$roles",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],"[",["T_VARIABLE","$roleName",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$role",420],"]",";",["T_WHITESPACE","\n\n        ",420],["T_VARIABLE","$roles",422],["T_WHITESPACE"," ",422],["T_PLUS_EQUAL","+=",422],["T_WHITESPACE"," ",422],["T_STRING","array_filter",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getRoles",422],"(",")",",",["T_WHITESPACE"," ",422],["T_FUNCTION","function",422],["T_WHITESPACE"," ",422],"(",["T_STRING","Role",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$roleItem",422],")",["T_WHITESPACE"," ",422],["T_USE","use",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$result",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n            ",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_STRING","array_key_exists",423],"(",["T_VARIABLE","$roleItem",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","name",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$result",423],")",";",["T_WHITESPACE","\n        ",423],"}",")",";",["T_WHITESPACE","\n\n        ",424],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$roles",426],";",["T_WHITESPACE","\n    ",426],"}",["T_WHITESPACE","\n\n    ",427],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",429],["T_WHITESPACE","\n    ",431],["T_PUBLIC","public",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","getPermissionsByRole",432],"(",["T_VARIABLE","$roleName",432],")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$result",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],"[","]",";",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","getChildrenRecursive",435],"(",["T_VARIABLE","$roleName",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$result",435],")",";",["T_WHITESPACE","\n        ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_EMPTY","empty",436],"(",["T_VARIABLE","$result",436],")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n            ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],"[","]",";",["T_WHITESPACE","\n        ",437],"}",["T_WHITESPACE","\n        ",438],["T_VARIABLE","$permissions",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],"[","]",";",["T_WHITESPACE","\n        ",439],["T_FOREACH","foreach",440],["T_WHITESPACE"," ",440],"(",["T_STRING","array_keys",440],"(",["T_VARIABLE","$result",440],")",["T_WHITESPACE"," ",440],["T_AS","as",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$itemName",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n            ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_ISSET","isset",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","items",441],"[",["T_VARIABLE","$itemName",441],"]",")",["T_WHITESPACE"," ",441],["T_BOOLEAN_AND","&&",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","items",441],"[",["T_VARIABLE","$itemName",441],"]",["T_WHITESPACE"," ",441],["T_INSTANCEOF","instanceof",441],["T_WHITESPACE"," ",441],["T_STRING","Permission",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                ",441],["T_VARIABLE","$permissions",442],"[",["T_VARIABLE","$itemName",442],"]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","items",442],"[",["T_VARIABLE","$itemName",442],"]",";",["T_WHITESPACE","\n            ",442],"}",["T_WHITESPACE","\n        ",443],"}",["T_WHITESPACE","\n        ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$permissions",445],";",["T_WHITESPACE","\n    ",445],"}",["T_WHITESPACE","\n\n    ",446],["T_DOC_COMMENT","\/**\n     * Recursively finds all children and grand children of the specified item.\n     *\n     * @param string $name the name of the item whose children are to be looked for.\n     * @param array $result the children and grand children (in array keys)\n     *\/",448],["T_WHITESPACE","\n    ",453],["T_PROTECTED","protected",454],["T_WHITESPACE"," ",454],["T_FUNCTION","function",454],["T_WHITESPACE"," ",454],["T_STRING","getChildrenRecursive",454],"(",["T_VARIABLE","$name",454],",",["T_WHITESPACE"," ",454],"&",["T_VARIABLE","$result",454],")",["T_WHITESPACE","\n    ",454],"{",["T_WHITESPACE","\n        ",455],["T_IF","if",456],["T_WHITESPACE"," ",456],"(",["T_ISSET","isset",456],"(",["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","children",456],"[",["T_VARIABLE","$name",456],"]",")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n            ",456],["T_FOREACH","foreach",457],["T_WHITESPACE"," ",457],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","children",457],"[",["T_VARIABLE","$name",457],"]",["T_WHITESPACE"," ",457],["T_AS","as",457],["T_WHITESPACE"," ",457],["T_VARIABLE","$child",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n                ",457],["T_VARIABLE","$result",458],"[",["T_VARIABLE","$child",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","name",458],"]",["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_STRING","true",458],";",["T_WHITESPACE","\n                ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","getChildrenRecursive",459],"(",["T_VARIABLE","$child",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","name",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$result",459],")",";",["T_WHITESPACE","\n            ",459],"}",["T_WHITESPACE","\n        ",460],"}",["T_WHITESPACE","\n    ",461],"}",["T_WHITESPACE","\n\n    ",462],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",464],["T_WHITESPACE","\n    ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","getPermissionsByUser",467],"(",["T_VARIABLE","$userId",467],")",["T_WHITESPACE","\n    ",467],"{",["T_WHITESPACE","\n        ",468],["T_VARIABLE","$directPermission",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getDirectPermissionsByUser",469],"(",["T_VARIABLE","$userId",469],")",";",["T_WHITESPACE","\n        ",469],["T_VARIABLE","$inheritedPermission",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getInheritedPermissionsByUser",470],"(",["T_VARIABLE","$userId",470],")",";",["T_WHITESPACE","\n\n        ",470],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_STRING","array_merge",472],"(",["T_VARIABLE","$directPermission",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$inheritedPermission",472],")",";",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_DOC_COMMENT","\/**\n     * Returns all permissions that are directly assigned to user.\n     * @param string|int $userId the user ID (see [[\\yii\\web\\User::id]])\n     * @return Permission[] all direct permissions that the user has. The array is indexed by the permission names.\n     * @since 2.0.7\n     *\/",475],["T_WHITESPACE","\n    ",480],["T_PROTECTED","protected",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","getDirectPermissionsByUser",481],"(",["T_VARIABLE","$userId",481],")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$permissions",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],"[","]",";",["T_WHITESPACE","\n        ",483],["T_FOREACH","foreach",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","getAssignments",484],"(",["T_VARIABLE","$userId",484],")",["T_WHITESPACE"," ",484],["T_AS","as",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$name",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$assignment",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_VARIABLE","$permission",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","items",485],"[",["T_VARIABLE","$assignment",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","roleName",485],"]",";",["T_WHITESPACE","\n            ",485],["T_IF","if",486],["T_WHITESPACE"," ",486],"(",["T_VARIABLE","$permission",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","type",486],["T_WHITESPACE"," ",486],["T_IS_IDENTICAL","===",486],["T_WHITESPACE"," ",486],["T_STRING","Item",486],["T_DOUBLE_COLON","::",486],["T_STRING","TYPE_PERMISSION",486],")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n                ",486],["T_VARIABLE","$permissions",487],"[",["T_VARIABLE","$name",487],"]",["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$permission",487],";",["T_WHITESPACE","\n            ",487],"}",["T_WHITESPACE","\n        ",488],"}",["T_WHITESPACE","\n\n        ",489],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$permissions",491],";",["T_WHITESPACE","\n    ",491],"}",["T_WHITESPACE","\n\n    ",492],["T_DOC_COMMENT","\/**\n     * Returns all permissions that the user inherits from the roles assigned to him.\n     * @param string|int $userId the user ID (see [[\\yii\\web\\User::id]])\n     * @return Permission[] all inherited permissions that the user has. The array is indexed by the permission names.\n     * @since 2.0.7\n     *\/",494],["T_WHITESPACE","\n    ",499],["T_PROTECTED","protected",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","getInheritedPermissionsByUser",500],"(",["T_VARIABLE","$userId",500],")",["T_WHITESPACE","\n    ",500],"{",["T_WHITESPACE","\n        ",501],["T_VARIABLE","$assignments",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","getAssignments",502],"(",["T_VARIABLE","$userId",502],")",";",["T_WHITESPACE","\n        ",502],["T_VARIABLE","$result",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],"[","]",";",["T_WHITESPACE","\n        ",503],["T_FOREACH","foreach",504],["T_WHITESPACE"," ",504],"(",["T_STRING","array_keys",504],"(",["T_VARIABLE","$assignments",504],")",["T_WHITESPACE"," ",504],["T_AS","as",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$roleName",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getChildrenRecursive",505],"(",["T_VARIABLE","$roleName",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$result",505],")",";",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n\n        ",506],["T_IF","if",508],["T_WHITESPACE"," ",508],"(",["T_EMPTY","empty",508],"(",["T_VARIABLE","$result",508],")",")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n            ",508],["T_RETURN","return",509],["T_WHITESPACE"," ",509],"[","]",";",["T_WHITESPACE","\n        ",509],"}",["T_WHITESPACE","\n\n        ",510],["T_VARIABLE","$permissions",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],"[","]",";",["T_WHITESPACE","\n        ",512],["T_FOREACH","foreach",513],["T_WHITESPACE"," ",513],"(",["T_STRING","array_keys",513],"(",["T_VARIABLE","$result",513],")",["T_WHITESPACE"," ",513],["T_AS","as",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$itemName",513],")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n            ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_ISSET","isset",514],"(",["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","items",514],"[",["T_VARIABLE","$itemName",514],"]",")",["T_WHITESPACE"," ",514],["T_BOOLEAN_AND","&&",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","items",514],"[",["T_VARIABLE","$itemName",514],"]",["T_WHITESPACE"," ",514],["T_INSTANCEOF","instanceof",514],["T_WHITESPACE"," ",514],["T_STRING","Permission",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                ",514],["T_VARIABLE","$permissions",515],"[",["T_VARIABLE","$itemName",515],"]",["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","items",515],"[",["T_VARIABLE","$itemName",515],"]",";",["T_WHITESPACE","\n            ",515],"}",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n        ",517],["T_RETURN","return",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$permissions",518],";",["T_WHITESPACE","\n    ",518],"}",["T_WHITESPACE","\n\n    ",519],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",521],["T_WHITESPACE","\n    ",523],["T_PUBLIC","public",524],["T_WHITESPACE"," ",524],["T_FUNCTION","function",524],["T_WHITESPACE"," ",524],["T_STRING","getChildren",524],"(",["T_VARIABLE","$name",524],")",["T_WHITESPACE","\n    ",524],"{",["T_WHITESPACE","\n        ",525],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_ISSET","isset",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","children",526],"[",["T_VARIABLE","$name",526],"]",")",["T_WHITESPACE"," ",526],"?",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","children",526],"[",["T_VARIABLE","$name",526],"]",["T_WHITESPACE"," ",526],":",["T_WHITESPACE"," ",526],"[","]",";",["T_WHITESPACE","\n    ",526],"}",["T_WHITESPACE","\n\n    ",527],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",529],["T_WHITESPACE","\n    ",531],["T_PUBLIC","public",532],["T_WHITESPACE"," ",532],["T_FUNCTION","function",532],["T_WHITESPACE"," ",532],["T_STRING","removeAll",532],"(",")",["T_WHITESPACE","\n    ",532],"{",["T_WHITESPACE","\n        ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","children",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],"[","]",";",["T_WHITESPACE","\n        ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","items",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],"[","]",";",["T_WHITESPACE","\n        ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","assignments",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],"[","]",";",["T_WHITESPACE","\n        ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","rules",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],"[","]",";",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","save",538],"(",")",";",["T_WHITESPACE","\n    ",538],"}",["T_WHITESPACE","\n\n    ",539],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",541],["T_WHITESPACE","\n    ",543],["T_PUBLIC","public",544],["T_WHITESPACE"," ",544],["T_FUNCTION","function",544],["T_WHITESPACE"," ",544],["T_STRING","removeAllPermissions",544],"(",")",["T_WHITESPACE","\n    ",544],"{",["T_WHITESPACE","\n        ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","removeAllItems",546],"(",["T_STRING","Item",546],["T_DOUBLE_COLON","::",546],["T_STRING","TYPE_PERMISSION",546],")",";",["T_WHITESPACE","\n    ",546],"}",["T_WHITESPACE","\n\n    ",547],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",549],["T_WHITESPACE","\n    ",551],["T_PUBLIC","public",552],["T_WHITESPACE"," ",552],["T_FUNCTION","function",552],["T_WHITESPACE"," ",552],["T_STRING","removeAllRoles",552],"(",")",["T_WHITESPACE","\n    ",552],"{",["T_WHITESPACE","\n        ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","removeAllItems",554],"(",["T_STRING","Item",554],["T_DOUBLE_COLON","::",554],["T_STRING","TYPE_ROLE",554],")",";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n\n    ",555],["T_DOC_COMMENT","\/**\n     * Removes all auth items of the specified type.\n     * @param int $type the auth item type (either Item::TYPE_PERMISSION or Item::TYPE_ROLE)\n     *\/",557],["T_WHITESPACE","\n    ",560],["T_PROTECTED","protected",561],["T_WHITESPACE"," ",561],["T_FUNCTION","function",561],["T_WHITESPACE"," ",561],["T_STRING","removeAllItems",561],"(",["T_VARIABLE","$type",561],")",["T_WHITESPACE","\n    ",561],"{",["T_WHITESPACE","\n        ",562],["T_VARIABLE","$names",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],"[","]",";",["T_WHITESPACE","\n        ",563],["T_FOREACH","foreach",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","items",564],["T_WHITESPACE"," ",564],["T_AS","as",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$name",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$item",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n            ",564],["T_IF","if",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$item",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","type",565],["T_WHITESPACE"," ",565],["T_IS_EQUAL","==",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$type",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n                ",565],["T_UNSET","unset",566],"(",["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","items",566],"[",["T_VARIABLE","$name",566],"]",")",";",["T_WHITESPACE","\n                ",566],["T_VARIABLE","$names",567],"[",["T_VARIABLE","$name",567],"]",["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_STRING","true",567],";",["T_WHITESPACE","\n            ",567],"}",["T_WHITESPACE","\n        ",568],"}",["T_WHITESPACE","\n        ",569],["T_IF","if",570],["T_WHITESPACE"," ",570],"(",["T_EMPTY","empty",570],"(",["T_VARIABLE","$names",570],")",")",["T_WHITESPACE"," ",570],"{",["T_WHITESPACE","\n            ",570],["T_RETURN","return",571],";",["T_WHITESPACE","\n        ",571],"}",["T_WHITESPACE","\n\n        ",572],["T_FOREACH","foreach",574],["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","assignments",574],["T_WHITESPACE"," ",574],["T_AS","as",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$i",574],["T_WHITESPACE"," ",574],["T_DOUBLE_ARROW","=>",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$assignments",574],")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n            ",574],["T_FOREACH","foreach",575],["T_WHITESPACE"," ",575],"(",["T_VARIABLE","$assignments",575],["T_WHITESPACE"," ",575],["T_AS","as",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$n",575],["T_WHITESPACE"," ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],["T_VARIABLE","$assignment",575],")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n                ",575],["T_IF","if",576],["T_WHITESPACE"," ",576],"(",["T_ISSET","isset",576],"(",["T_VARIABLE","$names",576],"[",["T_VARIABLE","$assignment",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","roleName",576],"]",")",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n                    ",576],["T_UNSET","unset",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","assignments",577],"[",["T_VARIABLE","$i",577],"]","[",["T_VARIABLE","$n",577],"]",")",";",["T_WHITESPACE","\n                ",577],"}",["T_WHITESPACE","\n            ",578],"}",["T_WHITESPACE","\n        ",579],"}",["T_WHITESPACE","\n        ",580],["T_FOREACH","foreach",581],["T_WHITESPACE"," ",581],"(",["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","children",581],["T_WHITESPACE"," ",581],["T_AS","as",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$name",581],["T_WHITESPACE"," ",581],["T_DOUBLE_ARROW","=>",581],["T_WHITESPACE"," ",581],["T_VARIABLE","$children",581],")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n            ",581],["T_IF","if",582],["T_WHITESPACE"," ",582],"(",["T_ISSET","isset",582],"(",["T_VARIABLE","$names",582],"[",["T_VARIABLE","$name",582],"]",")",")",["T_WHITESPACE"," ",582],"{",["T_WHITESPACE","\n                ",582],["T_UNSET","unset",583],"(",["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","children",583],"[",["T_VARIABLE","$name",583],"]",")",";",["T_WHITESPACE","\n            ",583],"}",["T_WHITESPACE"," ",584],["T_ELSE","else",584],["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n                ",584],["T_FOREACH","foreach",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$children",585],["T_WHITESPACE"," ",585],["T_AS","as",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$childName",585],["T_WHITESPACE"," ",585],["T_DOUBLE_ARROW","=>",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$item",585],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n                    ",585],["T_IF","if",586],["T_WHITESPACE"," ",586],"(",["T_ISSET","isset",586],"(",["T_VARIABLE","$names",586],"[",["T_VARIABLE","$childName",586],"]",")",")",["T_WHITESPACE"," ",586],"{",["T_WHITESPACE","\n                        ",586],["T_UNSET","unset",587],"(",["T_VARIABLE","$children",587],"[",["T_VARIABLE","$childName",587],"]",")",";",["T_WHITESPACE","\n                    ",587],"}",["T_WHITESPACE","\n                ",588],"}",["T_WHITESPACE","\n                ",589],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","children",590],"[",["T_VARIABLE","$name",590],"]",["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$children",590],";",["T_WHITESPACE","\n            ",590],"}",["T_WHITESPACE","\n        ",591],"}",["T_WHITESPACE","\n\n        ",592],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","saveItems",594],"(",")",";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n\n    ",595],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",597],["T_WHITESPACE","\n    ",599],["T_PUBLIC","public",600],["T_WHITESPACE"," ",600],["T_FUNCTION","function",600],["T_WHITESPACE"," ",600],["T_STRING","removeAllRules",600],"(",")",["T_WHITESPACE","\n    ",600],"{",["T_WHITESPACE","\n        ",601],["T_FOREACH","foreach",602],["T_WHITESPACE"," ",602],"(",["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","items",602],["T_WHITESPACE"," ",602],["T_AS","as",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$item",602],")",["T_WHITESPACE"," ",602],"{",["T_WHITESPACE","\n            ",602],["T_VARIABLE","$item",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","ruleName",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_STRING","null",603],";",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n        ",604],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","rules",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],"[","]",";",["T_WHITESPACE","\n        ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","saveRules",606],"(",")",";",["T_WHITESPACE","\n    ",606],"}",["T_WHITESPACE","\n\n    ",607],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",609],["T_WHITESPACE","\n    ",611],["T_PUBLIC","public",612],["T_WHITESPACE"," ",612],["T_FUNCTION","function",612],["T_WHITESPACE"," ",612],["T_STRING","removeAllAssignments",612],"(",")",["T_WHITESPACE","\n    ",612],"{",["T_WHITESPACE","\n        ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","assignments",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],"[","]",";",["T_WHITESPACE","\n        ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","saveAssignments",615],"(",")",";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",618],["T_WHITESPACE","\n    ",620],["T_PROTECTED","protected",621],["T_WHITESPACE"," ",621],["T_FUNCTION","function",621],["T_WHITESPACE"," ",621],["T_STRING","removeRule",621],"(",["T_VARIABLE","$rule",621],")",["T_WHITESPACE","\n    ",621],"{",["T_WHITESPACE","\n        ",622],["T_IF","if",623],["T_WHITESPACE"," ",623],"(",["T_ISSET","isset",623],"(",["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","rules",623],"[",["T_VARIABLE","$rule",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","name",623],"]",")",")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n            ",623],["T_UNSET","unset",624],"(",["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","rules",624],"[",["T_VARIABLE","$rule",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","name",624],"]",")",";",["T_WHITESPACE","\n            ",624],["T_FOREACH","foreach",625],["T_WHITESPACE"," ",625],"(",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","items",625],["T_WHITESPACE"," ",625],["T_AS","as",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$item",625],")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n                ",625],["T_IF","if",626],["T_WHITESPACE"," ",626],"(",["T_VARIABLE","$item",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","ruleName",626],["T_WHITESPACE"," ",626],["T_IS_IDENTICAL","===",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$rule",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","name",626],")",["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n                    ",626],["T_VARIABLE","$item",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","ruleName",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_STRING","null",627],";",["T_WHITESPACE","\n                ",627],"}",["T_WHITESPACE","\n            ",628],"}",["T_WHITESPACE","\n            ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","saveRules",630],"(",")",";",["T_WHITESPACE","\n            ",630],["T_RETURN","return",631],["T_WHITESPACE"," ",631],["T_STRING","true",631],";",["T_WHITESPACE","\n        ",631],"}",["T_WHITESPACE"," ",632],["T_ELSE","else",632],["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n            ",632],["T_RETURN","return",633],["T_WHITESPACE"," ",633],["T_STRING","false",633],";",["T_WHITESPACE","\n        ",633],"}",["T_WHITESPACE","\n    ",634],"}",["T_WHITESPACE","\n\n    ",635],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",637],["T_WHITESPACE","\n    ",639],["T_PROTECTED","protected",640],["T_WHITESPACE"," ",640],["T_FUNCTION","function",640],["T_WHITESPACE"," ",640],["T_STRING","addRule",640],"(",["T_VARIABLE","$rule",640],")",["T_WHITESPACE","\n    ",640],"{",["T_WHITESPACE","\n        ",641],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","rules",642],"[",["T_VARIABLE","$rule",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","name",642],"]",["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_VARIABLE","$rule",642],";",["T_WHITESPACE","\n        ",642],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","saveRules",643],"(",")",";",["T_WHITESPACE","\n        ",643],["T_RETURN","return",644],["T_WHITESPACE"," ",644],["T_STRING","true",644],";",["T_WHITESPACE","\n    ",644],"}",["T_WHITESPACE","\n\n    ",645],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",647],["T_WHITESPACE","\n    ",649],["T_PROTECTED","protected",650],["T_WHITESPACE"," ",650],["T_FUNCTION","function",650],["T_WHITESPACE"," ",650],["T_STRING","updateItem",650],"(",["T_VARIABLE","$name",650],",",["T_WHITESPACE"," ",650],["T_VARIABLE","$item",650],")",["T_WHITESPACE","\n    ",650],"{",["T_WHITESPACE","\n        ",651],["T_IF","if",652],["T_WHITESPACE"," ",652],"(",["T_VARIABLE","$name",652],["T_WHITESPACE"," ",652],["T_IS_NOT_IDENTICAL","!==",652],["T_WHITESPACE"," ",652],["T_VARIABLE","$item",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","name",652],")",["T_WHITESPACE"," ",652],"{",["T_WHITESPACE","\n            ",652],["T_IF","if",653],["T_WHITESPACE"," ",653],"(",["T_ISSET","isset",653],"(",["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","items",653],"[",["T_VARIABLE","$item",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","name",653],"]",")",")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n                ",653],["T_THROW","throw",654],["T_WHITESPACE"," ",654],["T_NEW","new",654],["T_WHITESPACE"," ",654],["T_STRING","InvalidParamException",654],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to change the item name. The name '",654],["T_CURLY_OPEN","{",654],["T_VARIABLE","$item",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","name",654],"}",["T_ENCAPSED_AND_WHITESPACE","' is already used by another item.",654],"\"",")",";",["T_WHITESPACE","\n            ",654],"}",["T_WHITESPACE"," ",655],["T_ELSE","else",655],["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n                ",655],["T_COMMENT","\/\/ Remove old item in case of renaming\n",656],["T_WHITESPACE","                ",657],["T_UNSET","unset",657],"(",["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","items",657],"[",["T_VARIABLE","$name",657],"]",")",";",["T_WHITESPACE","\n\n                ",657],["T_IF","if",659],["T_WHITESPACE"," ",659],"(",["T_ISSET","isset",659],"(",["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","children",659],"[",["T_VARIABLE","$name",659],"]",")",")",["T_WHITESPACE"," ",659],"{",["T_WHITESPACE","\n                    ",659],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","children",660],"[",["T_VARIABLE","$item",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","name",660],"]",["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_VARIABLE","$this",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","children",660],"[",["T_VARIABLE","$name",660],"]",";",["T_WHITESPACE","\n                    ",660],["T_UNSET","unset",661],"(",["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","children",661],"[",["T_VARIABLE","$name",661],"]",")",";",["T_WHITESPACE","\n                ",661],"}",["T_WHITESPACE","\n                ",662],["T_FOREACH","foreach",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","children",663],["T_WHITESPACE"," ",663],["T_AS","as",663],["T_WHITESPACE"," ",663],"&",["T_VARIABLE","$children",663],")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n                    ",663],["T_IF","if",664],["T_WHITESPACE"," ",664],"(",["T_ISSET","isset",664],"(",["T_VARIABLE","$children",664],"[",["T_VARIABLE","$name",664],"]",")",")",["T_WHITESPACE"," ",664],"{",["T_WHITESPACE","\n                        ",664],["T_VARIABLE","$children",665],"[",["T_VARIABLE","$item",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","name",665],"]",["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_VARIABLE","$children",665],"[",["T_VARIABLE","$name",665],"]",";",["T_WHITESPACE","\n                        ",665],["T_UNSET","unset",666],"(",["T_VARIABLE","$children",666],"[",["T_VARIABLE","$name",666],"]",")",";",["T_WHITESPACE","\n                    ",666],"}",["T_WHITESPACE","\n                ",667],"}",["T_WHITESPACE","\n                ",668],["T_FOREACH","foreach",669],["T_WHITESPACE"," ",669],"(",["T_VARIABLE","$this",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","assignments",669],["T_WHITESPACE"," ",669],["T_AS","as",669],["T_WHITESPACE"," ",669],"&",["T_VARIABLE","$assignments",669],")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n                    ",669],["T_IF","if",670],["T_WHITESPACE"," ",670],"(",["T_ISSET","isset",670],"(",["T_VARIABLE","$assignments",670],"[",["T_VARIABLE","$name",670],"]",")",")",["T_WHITESPACE"," ",670],"{",["T_WHITESPACE","\n                        ",670],["T_VARIABLE","$assignments",671],"[",["T_VARIABLE","$item",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","name",671],"]",["T_WHITESPACE"," ",671],"=",["T_WHITESPACE"," ",671],["T_VARIABLE","$assignments",671],"[",["T_VARIABLE","$name",671],"]",";",["T_WHITESPACE","\n                        ",671],["T_VARIABLE","$assignments",672],"[",["T_VARIABLE","$item",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","name",672],"]",["T_OBJECT_OPERATOR","->",672],["T_STRING","roleName",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_VARIABLE","$item",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","name",672],";",["T_WHITESPACE","\n                        ",672],["T_UNSET","unset",673],"(",["T_VARIABLE","$assignments",673],"[",["T_VARIABLE","$name",673],"]",")",";",["T_WHITESPACE","\n                    ",673],"}",["T_WHITESPACE","\n                ",674],"}",["T_WHITESPACE","\n                ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","saveAssignments",676],"(",")",";",["T_WHITESPACE","\n            ",676],"}",["T_WHITESPACE","\n        ",677],"}",["T_WHITESPACE","\n\n        ",678],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","items",680],"[",["T_VARIABLE","$item",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","name",680],"]",["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$item",680],";",["T_WHITESPACE","\n\n        ",680],["T_VARIABLE","$this",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","saveItems",682],"(",")",";",["T_WHITESPACE","\n        ",682],["T_RETURN","return",683],["T_WHITESPACE"," ",683],["T_STRING","true",683],";",["T_WHITESPACE","\n    ",683],"}",["T_WHITESPACE","\n\n    ",684],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",686],["T_WHITESPACE","\n    ",688],["T_PROTECTED","protected",689],["T_WHITESPACE"," ",689],["T_FUNCTION","function",689],["T_WHITESPACE"," ",689],["T_STRING","addItem",689],"(",["T_VARIABLE","$item",689],")",["T_WHITESPACE","\n    ",689],"{",["T_WHITESPACE","\n        ",690],["T_VARIABLE","$time",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_STRING","time",691],"(",")",";",["T_WHITESPACE","\n        ",691],["T_IF","if",692],["T_WHITESPACE"," ",692],"(",["T_VARIABLE","$item",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","createdAt",692],["T_WHITESPACE"," ",692],["T_IS_IDENTICAL","===",692],["T_WHITESPACE"," ",692],["T_STRING","null",692],")",["T_WHITESPACE"," ",692],"{",["T_WHITESPACE","\n            ",692],["T_VARIABLE","$item",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","createdAt",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_VARIABLE","$time",693],";",["T_WHITESPACE","\n        ",693],"}",["T_WHITESPACE","\n        ",694],["T_IF","if",695],["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$item",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","updatedAt",695],["T_WHITESPACE"," ",695],["T_IS_IDENTICAL","===",695],["T_WHITESPACE"," ",695],["T_STRING","null",695],")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n            ",695],["T_VARIABLE","$item",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","updatedAt",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_VARIABLE","$time",696],";",["T_WHITESPACE","\n        ",696],"}",["T_WHITESPACE","\n\n        ",697],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","items",699],"[",["T_VARIABLE","$item",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","name",699],"]",["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_VARIABLE","$item",699],";",["T_WHITESPACE","\n\n        ",699],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","saveItems",701],"(",")",";",["T_WHITESPACE","\n\n        ",701],["T_RETURN","return",703],["T_WHITESPACE"," ",703],["T_STRING","true",703],";",["T_WHITESPACE","\n\n    ",703],"}",["T_WHITESPACE","\n\n    ",705],["T_DOC_COMMENT","\/**\n     * Loads authorization data from persistent storage.\n     *\/",707],["T_WHITESPACE","\n    ",709],["T_PROTECTED","protected",710],["T_WHITESPACE"," ",710],["T_FUNCTION","function",710],["T_WHITESPACE"," ",710],["T_STRING","load",710],"(",")",["T_WHITESPACE","\n    ",710],"{",["T_WHITESPACE","\n        ",711],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","children",712],["T_WHITESPACE"," ",712],"=",["T_WHITESPACE"," ",712],"[","]",";",["T_WHITESPACE","\n        ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","rules",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],"[","]",";",["T_WHITESPACE","\n        ",713],["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","assignments",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],"[","]",";",["T_WHITESPACE","\n        ",714],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","items",715],["T_WHITESPACE"," ",715],"=",["T_WHITESPACE"," ",715],"[","]",";",["T_WHITESPACE","\n\n        ",715],["T_VARIABLE","$items",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","loadFromFile",717],"(",["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","itemFile",717],")",";",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$itemsMtime",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],"@",["T_STRING","filemtime",718],"(",["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","itemFile",718],")",";",["T_WHITESPACE","\n        ",718],["T_VARIABLE","$assignments",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],["T_VARIABLE","$this",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","loadFromFile",719],"(",["T_VARIABLE","$this",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","assignmentFile",719],")",";",["T_WHITESPACE","\n        ",719],["T_VARIABLE","$assignmentsMtime",720],["T_WHITESPACE"," ",720],"=",["T_WHITESPACE"," ",720],"@",["T_STRING","filemtime",720],"(",["T_VARIABLE","$this",720],["T_OBJECT_OPERATOR","->",720],["T_STRING","assignmentFile",720],")",";",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$rules",721],["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","loadFromFile",721],"(",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","ruleFile",721],")",";",["T_WHITESPACE","\n\n        ",721],["T_FOREACH","foreach",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$items",723],["T_WHITESPACE"," ",723],["T_AS","as",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$name",723],["T_WHITESPACE"," ",723],["T_DOUBLE_ARROW","=>",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$item",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_VARIABLE","$class",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_VARIABLE","$item",724],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",724],"]",["T_WHITESPACE"," ",724],["T_IS_EQUAL","==",724],["T_WHITESPACE"," ",724],["T_STRING","Item",724],["T_DOUBLE_COLON","::",724],["T_STRING","TYPE_PERMISSION",724],["T_WHITESPACE"," ",724],"?",["T_WHITESPACE"," ",724],["T_STRING","Permission",724],["T_DOUBLE_COLON","::",724],["T_STRING","className",724],"(",")",["T_WHITESPACE"," ",724],":",["T_WHITESPACE"," ",724],["T_STRING","Role",724],["T_DOUBLE_COLON","::",724],["T_STRING","className",724],"(",")",";",["T_WHITESPACE","\n\n            ",724],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","items",726],"[",["T_VARIABLE","$name",726],"]",["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_NEW","new",726],["T_WHITESPACE"," ",726],["T_VARIABLE","$class",726],"(","[",["T_WHITESPACE","\n                ",726],["T_CONSTANT_ENCAPSED_STRING","'name'",727],["T_WHITESPACE"," ",727],["T_DOUBLE_ARROW","=>",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$name",727],",",["T_WHITESPACE","\n                ",727],["T_CONSTANT_ENCAPSED_STRING","'description'",728],["T_WHITESPACE"," ",728],["T_DOUBLE_ARROW","=>",728],["T_WHITESPACE"," ",728],["T_ISSET","isset",728],"(",["T_VARIABLE","$item",728],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",728],"]",")",["T_WHITESPACE"," ",728],"?",["T_WHITESPACE"," ",728],["T_VARIABLE","$item",728],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",728],"]",["T_WHITESPACE"," ",728],":",["T_WHITESPACE"," ",728],["T_STRING","null",728],",",["T_WHITESPACE","\n                ",728],["T_CONSTANT_ENCAPSED_STRING","'ruleName'",729],["T_WHITESPACE"," ",729],["T_DOUBLE_ARROW","=>",729],["T_WHITESPACE"," ",729],["T_ISSET","isset",729],"(",["T_VARIABLE","$item",729],"[",["T_CONSTANT_ENCAPSED_STRING","'ruleName'",729],"]",")",["T_WHITESPACE"," ",729],"?",["T_WHITESPACE"," ",729],["T_VARIABLE","$item",729],"[",["T_CONSTANT_ENCAPSED_STRING","'ruleName'",729],"]",["T_WHITESPACE"," ",729],":",["T_WHITESPACE"," ",729],["T_STRING","null",729],",",["T_WHITESPACE","\n                ",729],["T_CONSTANT_ENCAPSED_STRING","'data'",730],["T_WHITESPACE"," ",730],["T_DOUBLE_ARROW","=>",730],["T_WHITESPACE"," ",730],["T_ISSET","isset",730],"(",["T_VARIABLE","$item",730],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",730],"]",")",["T_WHITESPACE"," ",730],"?",["T_WHITESPACE"," ",730],["T_VARIABLE","$item",730],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",730],"]",["T_WHITESPACE"," ",730],":",["T_WHITESPACE"," ",730],["T_STRING","null",730],",",["T_WHITESPACE","\n                ",730],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",731],["T_WHITESPACE"," ",731],["T_DOUBLE_ARROW","=>",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$itemsMtime",731],",",["T_WHITESPACE","\n                ",731],["T_CONSTANT_ENCAPSED_STRING","'updatedAt'",732],["T_WHITESPACE"," ",732],["T_DOUBLE_ARROW","=>",732],["T_WHITESPACE"," ",732],["T_VARIABLE","$itemsMtime",732],",",["T_WHITESPACE","\n            ",732],"]",")",";",["T_WHITESPACE","\n        ",733],"}",["T_WHITESPACE","\n\n        ",734],["T_FOREACH","foreach",736],["T_WHITESPACE"," ",736],"(",["T_VARIABLE","$items",736],["T_WHITESPACE"," ",736],["T_AS","as",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$name",736],["T_WHITESPACE"," ",736],["T_DOUBLE_ARROW","=>",736],["T_WHITESPACE"," ",736],["T_VARIABLE","$item",736],")",["T_WHITESPACE"," ",736],"{",["T_WHITESPACE","\n            ",736],["T_IF","if",737],["T_WHITESPACE"," ",737],"(",["T_ISSET","isset",737],"(",["T_VARIABLE","$item",737],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",737],"]",")",")",["T_WHITESPACE"," ",737],"{",["T_WHITESPACE","\n                ",737],["T_FOREACH","foreach",738],["T_WHITESPACE"," ",738],"(",["T_VARIABLE","$item",738],"[",["T_CONSTANT_ENCAPSED_STRING","'children'",738],"]",["T_WHITESPACE"," ",738],["T_AS","as",738],["T_WHITESPACE"," ",738],["T_VARIABLE","$childName",738],")",["T_WHITESPACE"," ",738],"{",["T_WHITESPACE","\n                    ",738],["T_IF","if",739],["T_WHITESPACE"," ",739],"(",["T_ISSET","isset",739],"(",["T_VARIABLE","$this",739],["T_OBJECT_OPERATOR","->",739],["T_STRING","items",739],"[",["T_VARIABLE","$childName",739],"]",")",")",["T_WHITESPACE"," ",739],"{",["T_WHITESPACE","\n                        ",739],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","children",740],"[",["T_VARIABLE","$name",740],"]","[",["T_VARIABLE","$childName",740],"]",["T_WHITESPACE"," ",740],"=",["T_WHITESPACE"," ",740],["T_VARIABLE","$this",740],["T_OBJECT_OPERATOR","->",740],["T_STRING","items",740],"[",["T_VARIABLE","$childName",740],"]",";",["T_WHITESPACE","\n                    ",740],"}",["T_WHITESPACE","\n                ",741],"}",["T_WHITESPACE","\n            ",742],"}",["T_WHITESPACE","\n        ",743],"}",["T_WHITESPACE","\n\n        ",744],["T_FOREACH","foreach",746],["T_WHITESPACE"," ",746],"(",["T_VARIABLE","$assignments",746],["T_WHITESPACE"," ",746],["T_AS","as",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$userId",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_VARIABLE","$roles",746],")",["T_WHITESPACE"," ",746],"{",["T_WHITESPACE","\n            ",746],["T_FOREACH","foreach",747],["T_WHITESPACE"," ",747],"(",["T_VARIABLE","$roles",747],["T_WHITESPACE"," ",747],["T_AS","as",747],["T_WHITESPACE"," ",747],["T_VARIABLE","$role",747],")",["T_WHITESPACE"," ",747],"{",["T_WHITESPACE","\n                ",747],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","assignments",748],"[",["T_VARIABLE","$userId",748],"]","[",["T_VARIABLE","$role",748],"]",["T_WHITESPACE"," ",748],"=",["T_WHITESPACE"," ",748],["T_NEW","new",748],["T_WHITESPACE"," ",748],["T_STRING","Assignment",748],"(","[",["T_WHITESPACE","\n                    ",748],["T_CONSTANT_ENCAPSED_STRING","'userId'",749],["T_WHITESPACE"," ",749],["T_DOUBLE_ARROW","=>",749],["T_WHITESPACE"," ",749],["T_VARIABLE","$userId",749],",",["T_WHITESPACE","\n                    ",749],["T_CONSTANT_ENCAPSED_STRING","'roleName'",750],["T_WHITESPACE"," ",750],["T_DOUBLE_ARROW","=>",750],["T_WHITESPACE"," ",750],["T_VARIABLE","$role",750],",",["T_WHITESPACE","\n                    ",750],["T_CONSTANT_ENCAPSED_STRING","'createdAt'",751],["T_WHITESPACE"," ",751],["T_DOUBLE_ARROW","=>",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$assignmentsMtime",751],",",["T_WHITESPACE","\n                ",751],"]",")",";",["T_WHITESPACE","\n            ",752],"}",["T_WHITESPACE","\n        ",753],"}",["T_WHITESPACE","\n\n        ",754],["T_FOREACH","foreach",756],["T_WHITESPACE"," ",756],"(",["T_VARIABLE","$rules",756],["T_WHITESPACE"," ",756],["T_AS","as",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$name",756],["T_WHITESPACE"," ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$ruleData",756],")",["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n            ",756],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","rules",757],"[",["T_VARIABLE","$name",757],"]",["T_WHITESPACE"," ",757],"=",["T_WHITESPACE"," ",757],["T_STRING","unserialize",757],"(",["T_VARIABLE","$ruleData",757],")",";",["T_WHITESPACE","\n        ",757],"}",["T_WHITESPACE","\n    ",758],"}",["T_WHITESPACE","\n\n    ",759],["T_DOC_COMMENT","\/**\n     * Saves authorization data into persistent storage.\n     *\/",761],["T_WHITESPACE","\n    ",763],["T_PROTECTED","protected",764],["T_WHITESPACE"," ",764],["T_FUNCTION","function",764],["T_WHITESPACE"," ",764],["T_STRING","save",764],"(",")",["T_WHITESPACE","\n    ",764],"{",["T_WHITESPACE","\n        ",765],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","saveItems",766],"(",")",";",["T_WHITESPACE","\n        ",766],["T_VARIABLE","$this",767],["T_OBJECT_OPERATOR","->",767],["T_STRING","saveAssignments",767],"(",")",";",["T_WHITESPACE","\n        ",767],["T_VARIABLE","$this",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","saveRules",768],"(",")",";",["T_WHITESPACE","\n    ",768],"}",["T_WHITESPACE","\n\n    ",769],["T_DOC_COMMENT","\/**\n     * Loads the authorization data from a PHP script file.\n     *\n     * @param string $file the file path.\n     * @return array the authorization data\n     * @see saveToFile()\n     *\/",771],["T_WHITESPACE","\n    ",777],["T_PROTECTED","protected",778],["T_WHITESPACE"," ",778],["T_FUNCTION","function",778],["T_WHITESPACE"," ",778],["T_STRING","loadFromFile",778],"(",["T_VARIABLE","$file",778],")",["T_WHITESPACE","\n    ",778],"{",["T_WHITESPACE","\n        ",779],["T_IF","if",780],["T_WHITESPACE"," ",780],"(",["T_STRING","is_file",780],"(",["T_VARIABLE","$file",780],")",")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n            ",780],["T_RETURN","return",781],["T_WHITESPACE"," ",781],["T_REQUIRE","require",781],"(",["T_VARIABLE","$file",781],")",";",["T_WHITESPACE","\n        ",781],"}",["T_WHITESPACE"," ",782],["T_ELSE","else",782],["T_WHITESPACE"," ",782],"{",["T_WHITESPACE","\n            ",782],["T_RETURN","return",783],["T_WHITESPACE"," ",783],"[","]",";",["T_WHITESPACE","\n        ",783],"}",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n\n    ",785],["T_DOC_COMMENT","\/**\n     * Saves the authorization data to a PHP script file.\n     *\n     * @param array $data the authorization data\n     * @param string $file the file path.\n     * @see loadFromFile()\n     *\/",787],["T_WHITESPACE","\n    ",793],["T_PROTECTED","protected",794],["T_WHITESPACE"," ",794],["T_FUNCTION","function",794],["T_WHITESPACE"," ",794],["T_STRING","saveToFile",794],"(",["T_VARIABLE","$data",794],",",["T_WHITESPACE"," ",794],["T_VARIABLE","$file",794],")",["T_WHITESPACE","\n    ",794],"{",["T_WHITESPACE","\n        ",795],["T_STRING","file_put_contents",796],"(",["T_VARIABLE","$file",796],",",["T_WHITESPACE"," ",796],["T_CONSTANT_ENCAPSED_STRING","\"<?php\\nreturn \"",796],["T_WHITESPACE"," ",796],".",["T_WHITESPACE"," ",796],["T_STRING","VarDumper",796],["T_DOUBLE_COLON","::",796],["T_STRING","export",796],"(",["T_VARIABLE","$data",796],")",["T_WHITESPACE"," ",796],".",["T_WHITESPACE"," ",796],["T_CONSTANT_ENCAPSED_STRING","\";\\n\"",796],",",["T_WHITESPACE"," ",796],["T_STRING","LOCK_EX",796],")",";",["T_WHITESPACE","\n        ",796],["T_VARIABLE","$this",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","invalidateScriptCache",797],"(",["T_VARIABLE","$file",797],")",";",["T_WHITESPACE","\n    ",797],"}",["T_WHITESPACE","\n\n    ",798],["T_DOC_COMMENT","\/**\n     * Invalidates precompiled script cache (such as OPCache or APC) for the given file.\n     * @param string $file the file path.\n     * @since 2.0.9\n     *\/",800],["T_WHITESPACE","\n    ",804],["T_PROTECTED","protected",805],["T_WHITESPACE"," ",805],["T_FUNCTION","function",805],["T_WHITESPACE"," ",805],["T_STRING","invalidateScriptCache",805],"(",["T_VARIABLE","$file",805],")",["T_WHITESPACE","\n    ",805],"{",["T_WHITESPACE","\n        ",806],["T_IF","if",807],["T_WHITESPACE"," ",807],"(",["T_STRING","function_exists",807],"(",["T_CONSTANT_ENCAPSED_STRING","'opcache_invalidate'",807],")",")",["T_WHITESPACE"," ",807],"{",["T_WHITESPACE","\n            ",807],["T_STRING","opcache_invalidate",808],"(",["T_VARIABLE","$file",808],",",["T_WHITESPACE"," ",808],["T_STRING","true",808],")",";",["T_WHITESPACE","\n        ",808],"}",["T_WHITESPACE","\n        ",809],["T_IF","if",810],["T_WHITESPACE"," ",810],"(",["T_STRING","function_exists",810],"(",["T_CONSTANT_ENCAPSED_STRING","'apc_delete_file'",810],")",")",["T_WHITESPACE"," ",810],"{",["T_WHITESPACE","\n            ",810],"@",["T_STRING","apc_delete_file",811],"(",["T_VARIABLE","$file",811],")",";",["T_WHITESPACE","\n        ",811],"}",["T_WHITESPACE","\n    ",812],"}",["T_WHITESPACE","\n\n    ",813],["T_DOC_COMMENT","\/**\n     * Saves items data into persistent storage.\n     *\/",815],["T_WHITESPACE","\n    ",817],["T_PROTECTED","protected",818],["T_WHITESPACE"," ",818],["T_FUNCTION","function",818],["T_WHITESPACE"," ",818],["T_STRING","saveItems",818],"(",")",["T_WHITESPACE","\n    ",818],"{",["T_WHITESPACE","\n        ",819],["T_VARIABLE","$items",820],["T_WHITESPACE"," ",820],"=",["T_WHITESPACE"," ",820],"[","]",";",["T_WHITESPACE","\n        ",820],["T_FOREACH","foreach",821],["T_WHITESPACE"," ",821],"(",["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","items",821],["T_WHITESPACE"," ",821],["T_AS","as",821],["T_WHITESPACE"," ",821],["T_VARIABLE","$name",821],["T_WHITESPACE"," ",821],["T_DOUBLE_ARROW","=>",821],["T_WHITESPACE"," ",821],["T_VARIABLE","$item",821],")",["T_WHITESPACE"," ",821],"{",["T_WHITESPACE","\n            ",821],["T_COMMENT","\/* @var $item Item *\/",822],["T_WHITESPACE","\n            ",822],["T_VARIABLE","$items",823],"[",["T_VARIABLE","$name",823],"]",["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],["T_STRING","array_filter",823],"(",["T_WHITESPACE","\n                ",823],"[",["T_WHITESPACE","\n                    ",824],["T_CONSTANT_ENCAPSED_STRING","'type'",825],["T_WHITESPACE"," ",825],["T_DOUBLE_ARROW","=>",825],["T_WHITESPACE"," ",825],["T_VARIABLE","$item",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","type",825],",",["T_WHITESPACE","\n                    ",825],["T_CONSTANT_ENCAPSED_STRING","'description'",826],["T_WHITESPACE"," ",826],["T_DOUBLE_ARROW","=>",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$item",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","description",826],",",["T_WHITESPACE","\n                    ",826],["T_CONSTANT_ENCAPSED_STRING","'ruleName'",827],["T_WHITESPACE"," ",827],["T_DOUBLE_ARROW","=>",827],["T_WHITESPACE"," ",827],["T_VARIABLE","$item",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","ruleName",827],",",["T_WHITESPACE","\n                    ",827],["T_CONSTANT_ENCAPSED_STRING","'data'",828],["T_WHITESPACE"," ",828],["T_DOUBLE_ARROW","=>",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$item",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","data",828],",",["T_WHITESPACE","\n                ",828],"]",["T_WHITESPACE","\n            ",829],")",";",["T_WHITESPACE","\n            ",830],["T_IF","if",831],["T_WHITESPACE"," ",831],"(",["T_ISSET","isset",831],"(",["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","children",831],"[",["T_VARIABLE","$name",831],"]",")",")",["T_WHITESPACE"," ",831],"{",["T_WHITESPACE","\n                ",831],["T_FOREACH","foreach",832],["T_WHITESPACE"," ",832],"(",["T_VARIABLE","$this",832],["T_OBJECT_OPERATOR","->",832],["T_STRING","children",832],"[",["T_VARIABLE","$name",832],"]",["T_WHITESPACE"," ",832],["T_AS","as",832],["T_WHITESPACE"," ",832],["T_VARIABLE","$child",832],")",["T_WHITESPACE"," ",832],"{",["T_WHITESPACE","\n                    ",832],["T_COMMENT","\/* @var $child Item *\/",833],["T_WHITESPACE","\n                    ",833],["T_VARIABLE","$items",834],"[",["T_VARIABLE","$name",834],"]","[",["T_CONSTANT_ENCAPSED_STRING","'children'",834],"]","[","]",["T_WHITESPACE"," ",834],"=",["T_WHITESPACE"," ",834],["T_VARIABLE","$child",834],["T_OBJECT_OPERATOR","->",834],["T_STRING","name",834],";",["T_WHITESPACE","\n                ",834],"}",["T_WHITESPACE","\n            ",835],"}",["T_WHITESPACE","\n        ",836],"}",["T_WHITESPACE","\n        ",837],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","saveToFile",838],"(",["T_VARIABLE","$items",838],",",["T_WHITESPACE"," ",838],["T_VARIABLE","$this",838],["T_OBJECT_OPERATOR","->",838],["T_STRING","itemFile",838],")",";",["T_WHITESPACE","\n    ",838],"}",["T_WHITESPACE","\n\n    ",839],["T_DOC_COMMENT","\/**\n     * Saves assignments data into persistent storage.\n     *\/",841],["T_WHITESPACE","\n    ",843],["T_PROTECTED","protected",844],["T_WHITESPACE"," ",844],["T_FUNCTION","function",844],["T_WHITESPACE"," ",844],["T_STRING","saveAssignments",844],"(",")",["T_WHITESPACE","\n    ",844],"{",["T_WHITESPACE","\n        ",845],["T_VARIABLE","$assignmentData",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],"[","]",";",["T_WHITESPACE","\n        ",846],["T_FOREACH","foreach",847],["T_WHITESPACE"," ",847],"(",["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","assignments",847],["T_WHITESPACE"," ",847],["T_AS","as",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$userId",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],["T_VARIABLE","$assignments",847],")",["T_WHITESPACE"," ",847],"{",["T_WHITESPACE","\n            ",847],["T_FOREACH","foreach",848],["T_WHITESPACE"," ",848],"(",["T_VARIABLE","$assignments",848],["T_WHITESPACE"," ",848],["T_AS","as",848],["T_WHITESPACE"," ",848],["T_VARIABLE","$name",848],["T_WHITESPACE"," ",848],["T_DOUBLE_ARROW","=>",848],["T_WHITESPACE"," ",848],["T_VARIABLE","$assignment",848],")",["T_WHITESPACE"," ",848],"{",["T_WHITESPACE","\n                ",848],["T_COMMENT","\/* @var $assignment Assignment *\/",849],["T_WHITESPACE","\n                ",849],["T_VARIABLE","$assignmentData",850],"[",["T_VARIABLE","$userId",850],"]","[","]",["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_VARIABLE","$assignment",850],["T_OBJECT_OPERATOR","->",850],["T_STRING","roleName",850],";",["T_WHITESPACE","\n            ",850],"}",["T_WHITESPACE","\n        ",851],"}",["T_WHITESPACE","\n        ",852],["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","saveToFile",853],"(",["T_VARIABLE","$assignmentData",853],",",["T_WHITESPACE"," ",853],["T_VARIABLE","$this",853],["T_OBJECT_OPERATOR","->",853],["T_STRING","assignmentFile",853],")",";",["T_WHITESPACE","\n    ",853],"}",["T_WHITESPACE","\n\n    ",854],["T_DOC_COMMENT","\/**\n     * Saves rules data into persistent storage.\n     *\/",856],["T_WHITESPACE","\n    ",858],["T_PROTECTED","protected",859],["T_WHITESPACE"," ",859],["T_FUNCTION","function",859],["T_WHITESPACE"," ",859],["T_STRING","saveRules",859],"(",")",["T_WHITESPACE","\n    ",859],"{",["T_WHITESPACE","\n        ",860],["T_VARIABLE","$rules",861],["T_WHITESPACE"," ",861],"=",["T_WHITESPACE"," ",861],"[","]",";",["T_WHITESPACE","\n        ",861],["T_FOREACH","foreach",862],["T_WHITESPACE"," ",862],"(",["T_VARIABLE","$this",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","rules",862],["T_WHITESPACE"," ",862],["T_AS","as",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$name",862],["T_WHITESPACE"," ",862],["T_DOUBLE_ARROW","=>",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$rule",862],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n            ",862],["T_VARIABLE","$rules",863],"[",["T_VARIABLE","$name",863],"]",["T_WHITESPACE"," ",863],"=",["T_WHITESPACE"," ",863],["T_STRING","serialize",863],"(",["T_VARIABLE","$rule",863],")",";",["T_WHITESPACE","\n        ",863],"}",["T_WHITESPACE","\n        ",864],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","saveToFile",865],"(",["T_VARIABLE","$rules",865],",",["T_WHITESPACE"," ",865],["T_VARIABLE","$this",865],["T_OBJECT_OPERATOR","->",865],["T_STRING","ruleFile",865],")",";",["T_WHITESPACE","\n    ",865],"}",["T_WHITESPACE","\n\n    ",866],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.7\n     *\/",868],["T_WHITESPACE","\n    ",871],["T_PUBLIC","public",872],["T_WHITESPACE"," ",872],["T_FUNCTION","function",872],["T_WHITESPACE"," ",872],["T_STRING","getUserIdsByRole",872],"(",["T_VARIABLE","$roleName",872],")",["T_WHITESPACE","\n    ",872],"{",["T_WHITESPACE","\n        ",873],["T_VARIABLE","$result",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],"[","]",";",["T_WHITESPACE","\n        ",874],["T_FOREACH","foreach",875],["T_WHITESPACE"," ",875],"(",["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","assignments",875],["T_WHITESPACE"," ",875],["T_AS","as",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$userID",875],["T_WHITESPACE"," ",875],["T_DOUBLE_ARROW","=>",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$assignments",875],")",["T_WHITESPACE"," ",875],"{",["T_WHITESPACE","\n            ",875],["T_FOREACH","foreach",876],["T_WHITESPACE"," ",876],"(",["T_VARIABLE","$assignments",876],["T_WHITESPACE"," ",876],["T_AS","as",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$userAssignment",876],")",["T_WHITESPACE"," ",876],"{",["T_WHITESPACE","\n                ",876],["T_IF","if",877],["T_WHITESPACE"," ",877],"(",["T_VARIABLE","$userAssignment",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","roleName",877],["T_WHITESPACE"," ",877],["T_IS_IDENTICAL","===",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$roleName",877],["T_WHITESPACE"," ",877],["T_BOOLEAN_AND","&&",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$userAssignment",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","userId",877],["T_WHITESPACE"," ",877],["T_IS_EQUAL","==",877],["T_WHITESPACE"," ",877],["T_VARIABLE","$userID",877],")",["T_WHITESPACE"," ",877],"{",["T_WHITESPACE","\n                    ",877],["T_VARIABLE","$result",878],"[","]",["T_WHITESPACE"," ",878],"=",["T_WHITESPACE"," ",878],["T_STRING_CAST","(string)",878],["T_VARIABLE","$userID",878],";",["T_WHITESPACE","\n                ",878],"}",["T_WHITESPACE","\n            ",879],"}",["T_WHITESPACE","\n        ",880],"}",["T_WHITESPACE","\n        ",881],["T_RETURN","return",882],["T_WHITESPACE"," ",882],["T_VARIABLE","$result",882],";",["T_WHITESPACE","\n    ",882],"}",["T_WHITESPACE","\n",883],"}",["T_WHITESPACE","\n",884]]
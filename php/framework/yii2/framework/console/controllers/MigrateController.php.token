[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","console",8],["T_NS_SEPARATOR","\\",8],["T_STRING","controllers",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Connection",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Query",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","di",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Instance",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","helpers",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ArrayHelper",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","yii",15],["T_NS_SEPARATOR","\\",15],["T_STRING","helpers",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Console",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Manages application migrations.\n *\n * A migration means a set of persistent changes to the application environment\n * that is shared among different developers. For example, in an application\n * backed by a database, a migration may refer to a set of changes to\n * the database, such as creating a new table, adding a new table column.\n *\n * This command provides support for tracking the migration history, upgrading\n * or downloading with migrations, and creating new migration skeletons.\n *\n * The migration history is stored in a database table named\n * as [[migrationTable]]. The table will be automatically created the first time\n * this command is executed, if it does not exist. You may also manually\n * create it as follows:\n *\n * ```sql\n * CREATE TABLE migration (\n *     version varchar(180) PRIMARY KEY,\n *     apply_time integer\n * )\n * ```\n *\n * Below are some common usages of this command:\n *\n * ```\n * # creates a new migration named 'create_user_table'\n * yii migrate\/create create_user_table\n *\n * # applies ALL new migrations\n * yii migrate\n *\n * # reverts the last applied migration\n * yii migrate\/down\n * ```\n *\n * Since 2.0.10 you can use namespaced migrations. In order to enable this feature you should configure [[migrationNamespaces]]\n * property for the controller at application configuration:\n *\n * ```php\n * return [\n *     'controllerMap' => [\n *         'migrate' => [\n *             'class' => 'yii\\console\\controllers\\MigrateController',\n *             'migrationNamespaces' => [\n *                 'app\\migrations',\n *                 'some\\extension\\migrations',\n *             ],\n *             \/\/'migrationPath' => null, \/\/ allows to disable not namespaced migration completely\n *         ],\n *     ],\n * ];\n * ```\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",17],["T_WHITESPACE","\n",73],["T_CLASS","class",74],["T_WHITESPACE"," ",74],["T_STRING","MigrateController",74],["T_WHITESPACE"," ",74],["T_EXTENDS","extends",74],["T_WHITESPACE"," ",74],["T_STRING","BaseMigrateController",74],["T_WHITESPACE","\n",74],"{",["T_WHITESPACE","\n    ",75],["T_DOC_COMMENT","\/**\n     * @var string the name of the table for keeping applied migration information.\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$migrationTable",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'{{%migration}}'",79],";",["T_WHITESPACE","\n    ",79],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$templateFile",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/migration.php'",83],";",["T_WHITESPACE","\n    ",83],["T_DOC_COMMENT","\/**\n     * @var array a set of template paths for generating migration code automatically.\n     *\n     * The key is the template type, the value is a path or the alias. Supported types are:\n     * - `create_table`: table creating template\n     * - `drop_table`: table dropping template\n     * - `add_column`: adding new column template\n     * - `drop_column`: dropping column template\n     * - `create_junction`: create junction template\n     *\n     * @since 2.0.7\n     *\/",84],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$generatorTemplateFiles",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],"[",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'create_table'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/createTableMigration.php'",97],",",["T_WHITESPACE","\n        ",97],["T_CONSTANT_ENCAPSED_STRING","'drop_table'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/dropTableMigration.php'",98],",",["T_WHITESPACE","\n        ",98],["T_CONSTANT_ENCAPSED_STRING","'add_column'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/addColumnMigration.php'",99],",",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'drop_column'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/dropColumnMigration.php'",100],",",["T_WHITESPACE","\n        ",100],["T_CONSTANT_ENCAPSED_STRING","'create_junction'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'@yii\/views\/createTableMigration.php'",101],",",["T_WHITESPACE","\n    ",101],"]",";",["T_WHITESPACE","\n    ",102],["T_DOC_COMMENT","\/**\n     * @var bool indicates whether the table names generated should consider\n     * the `tablePrefix` setting of the DB connection. For example, if the table\n     * name is `post` the generator wil return `{{%post}}`.\n     * @since 2.0.8\n     *\/",103],["T_WHITESPACE","\n    ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$useTablePrefix",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","false",109],";",["T_WHITESPACE","\n    ",109],["T_DOC_COMMENT","\/**\n     * @var array column definition strings used for creating migration code.\n     *\n     * The format of each definition is `COLUMN_NAME:COLUMN_TYPE:COLUMN_DECORATOR`. Delimiter is `,`.\n     * For example, `--fields=\"name:string(12):notNull:unique\"`\n     * produces a string column of size 12 which is not null and unique values.\n     *\n     * Note: primary key is added automatically and is named id by default.\n     * If you want to use another name you may specify it explicitly like\n     * `--fields=\"id_key:primaryKey,name:string(12):notNull:unique\"`\n     * @since 2.0.7\n     *\/",110],["T_WHITESPACE","\n    ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$fields",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],"[","]",";",["T_WHITESPACE","\n    ",122],["T_DOC_COMMENT","\/**\n     * @var Connection|array|string the DB connection object or the application component ID of the DB connection to use\n     * when applying migrations. Starting from version 2.0.3, this can also be a configuration array\n     * for creating the object.\n     *\/",123],["T_WHITESPACE","\n    ",127],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$db",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'db'",128],";",["T_WHITESPACE","\n\n\n    ",128],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",131],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","options",134],"(",["T_VARIABLE","$actionID",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_STRING","array_merge",136],"(",["T_WHITESPACE","\n            ",136],["T_STRING","parent",137],["T_DOUBLE_COLON","::",137],["T_STRING","options",137],"(",["T_VARIABLE","$actionID",137],")",",",["T_WHITESPACE","\n            ",137],"[",["T_CONSTANT_ENCAPSED_STRING","'migrationTable'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'db'",138],"]",",",["T_WHITESPACE"," ",138],["T_COMMENT","\/\/ global for all actions\n",138],["T_WHITESPACE","            ",139],["T_VARIABLE","$actionID",139],["T_WHITESPACE"," ",139],["T_IS_IDENTICAL","===",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'create'",139],["T_WHITESPACE","\n                ",139],"?",["T_WHITESPACE"," ",140],"[",["T_CONSTANT_ENCAPSED_STRING","'templateFile'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'fields'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'useTablePrefix'",140],"]",["T_WHITESPACE","\n                ",140],":",["T_WHITESPACE"," ",141],"[","]",["T_WHITESPACE","\n        ",141],")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n\n    ",143],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",145],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","optionAliases",149],"(",")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","array_merge",151],"(",["T_STRING","parent",151],["T_DOUBLE_COLON","::",151],["T_STRING","optionAliases",151],"(",")",",",["T_WHITESPACE"," ",151],"[",["T_WHITESPACE","\n            ",151],["T_CONSTANT_ENCAPSED_STRING","'f'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'fields'",152],",",["T_WHITESPACE","\n            ",152],["T_CONSTANT_ENCAPSED_STRING","'p'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'migrationPath'",153],",",["T_WHITESPACE","\n            ",153],["T_CONSTANT_ENCAPSED_STRING","'t'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'migrationTable'",154],",",["T_WHITESPACE","\n            ",154],["T_CONSTANT_ENCAPSED_STRING","'F'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'templateFile'",155],",",["T_WHITESPACE","\n            ",155],["T_CONSTANT_ENCAPSED_STRING","'P'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'useTablePrefix'",156],",",["T_WHITESPACE","\n        ",156],"]",")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_DOC_COMMENT","\/**\n     * This method is invoked right before an action is to be executed (after all possible filters.)\n     * It checks the existence of the [[migrationPath]].\n     * @param \\yii\\base\\Action $action the action to be executed.\n     * @return bool whether the action should continue to be executed.\n     *\/",160],["T_WHITESPACE","\n    ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","beforeAction",166],"(",["T_VARIABLE","$action",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_STRING","parent",168],["T_DOUBLE_COLON","::",168],["T_STRING","beforeAction",168],"(",["T_VARIABLE","$action",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$action",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","id",169],["T_WHITESPACE"," ",169],["T_IS_NOT_IDENTICAL","!==",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'create'",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","db",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","Instance",170],["T_DOUBLE_COLON","::",170],["T_STRING","ensure",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","db",170],",",["T_WHITESPACE"," ",170],["T_STRING","Connection",170],["T_DOUBLE_COLON","::",170],["T_STRING","className",170],"(",")",")",";",["T_WHITESPACE","\n            ",170],"}",["T_WHITESPACE","\n            ",171],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_STRING","true",172],";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n            ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","false",174],";",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_DOC_COMMENT","\/**\n     * Creates a new migration instance.\n     * @param string $class the migration class name\n     * @return \\yii\\db\\Migration the migration instance\n     *\/",178],["T_WHITESPACE","\n    ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","createMigration",183],"(",["T_VARIABLE","$class",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$class",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","trim",185],"(",["T_VARIABLE","$class",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",185],")",";",["T_WHITESPACE","\n        ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_STRING","strpos",186],"(",["T_VARIABLE","$class",186],",",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",186],")",["T_WHITESPACE"," ",186],["T_IS_IDENTICAL","===",186],["T_WHITESPACE"," ",186],["T_STRING","false",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$file",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","migrationPath",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_STRING","DIRECTORY_SEPARATOR",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_VARIABLE","$class",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'.php'",187],";",["T_WHITESPACE","\n            ",187],["T_REQUIRE_ONCE","require_once",188],"(",["T_VARIABLE","$file",188],")",";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_NEW","new",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$class",191],"(","[",["T_CONSTANT_ENCAPSED_STRING","'db'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","db",191],"]",")",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n\n    ",192],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",194],["T_WHITESPACE","\n    ",196],["T_PROTECTED","protected",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","getMigrationHistory",197],"(",["T_VARIABLE","$limit",197],")",["T_WHITESPACE","\n    ",197],"{",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","db",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","schema",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getTableSchema",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","migrationTable",199],",",["T_WHITESPACE"," ",199],["T_STRING","true",199],")",["T_WHITESPACE"," ",199],["T_IS_IDENTICAL","===",199],["T_WHITESPACE"," ",199],["T_STRING","null",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","createMigrationHistoryTable",200],"(",")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$query",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],"(",["T_NEW","new",202],["T_WHITESPACE"," ",202],["T_STRING","Query",202],"(",")",")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","select",203],"(","[",["T_CONSTANT_ENCAPSED_STRING","'version'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",203],"]",")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","from",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","migrationTable",204],")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","orderBy",205],"(","[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_STRING","SORT_DESC",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'version'",205],["T_WHITESPACE"," ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_STRING","SORT_DESC",205],"]",")",";",["T_WHITESPACE","\n\n        ",205],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_EMPTY","empty",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","migrationNamespaces",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$query",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","limit",208],"(",["T_VARIABLE","$limit",208],")",";",["T_WHITESPACE","\n            ",208],["T_VARIABLE","$rows",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$query",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","all",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","db",209],")",";",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$history",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","ArrayHelper",210],["T_DOUBLE_COLON","::",210],["T_STRING","map",210],"(",["T_VARIABLE","$rows",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'version'",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",210],")",";",["T_WHITESPACE","\n            ",210],["T_UNSET","unset",211],"(",["T_VARIABLE","$history",211],"[",["T_STRING","self",211],["T_DOUBLE_COLON","::",211],["T_STRING","BASE_MIGRATION",211],"]",")",";",["T_WHITESPACE","\n            ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$history",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_VARIABLE","$rows",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$query",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","all",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","db",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$history",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],"[","]",";",["T_WHITESPACE","\n        ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$rows",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$key",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$row",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$row",219],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",219],"]",["T_WHITESPACE"," ",219],["T_IS_IDENTICAL","===",219],["T_WHITESPACE"," ",219],["T_STRING","self",219],["T_DOUBLE_COLON","::",219],["T_STRING","BASE_MIGRATION",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_CONTINUE","continue",220],";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n            ",221],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_STRING","preg_match",222],"(",["T_CONSTANT_ENCAPSED_STRING","'\/m?(\\d{6}_?\\d{6})(\\D.*)?$\/is'",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$row",222],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",222],"]",",",["T_WHITESPACE"," ",222],["T_VARIABLE","$matches",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n                ",222],["T_VARIABLE","$time",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","str_replace",223],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","''",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$matches",223],"[",["T_LNUMBER","1",223],"]",")",";",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$row",224],"[",["T_CONSTANT_ENCAPSED_STRING","'canonicalVersion'",224],"]",["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$time",224],";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE"," ",225],["T_ELSE","else",225],["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$row",226],"[",["T_CONSTANT_ENCAPSED_STRING","'canonicalVersion'",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$row",226],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",226],"]",";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$row",228],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_INT_CAST","(int)",228],["T_VARIABLE","$row",228],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",228],"]",";",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$history",229],"[","]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$row",229],";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_STRING","usort",232],"(",["T_VARIABLE","$history",232],",",["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$a",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$b",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$a",233],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",233],"]",["T_WHITESPACE"," ",233],["T_IS_IDENTICAL","===",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$b",233],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",233],"]",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","(",["T_VARIABLE","$compareResult",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","strcasecmp",234],"(",["T_VARIABLE","$b",234],"[",["T_CONSTANT_ENCAPSED_STRING","'canonicalVersion'",234],"]",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$a",234],"[",["T_CONSTANT_ENCAPSED_STRING","'canonicalVersion'",234],"]",")",")",["T_WHITESPACE"," ",234],["T_IS_NOT_IDENTICAL","!==",234],["T_WHITESPACE"," ",234],["T_LNUMBER","0",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n                    ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$compareResult",235],";",["T_WHITESPACE","\n                ",235],"}",["T_WHITESPACE","\n                ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_STRING","strcasecmp",237],"(",["T_VARIABLE","$b",237],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",237],"]",",",["T_WHITESPACE"," ",237],["T_VARIABLE","$a",237],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",237],"]",")",";",["T_WHITESPACE","\n            ",237],"}",["T_WHITESPACE","\n            ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$a",239],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",239],"]",["T_WHITESPACE"," ",239],">",["T_WHITESPACE"," ",239],["T_VARIABLE","$b",239],"[",["T_CONSTANT_ENCAPSED_STRING","'apply_time'",239],"]",")",["T_WHITESPACE"," ",239],"?",["T_WHITESPACE"," ",239],"-",["T_LNUMBER","1",239],["T_WHITESPACE"," ",239],":",["T_WHITESPACE"," ",239],"+",["T_LNUMBER","1",239],";",["T_WHITESPACE","\n        ",239],"}",")",";",["T_WHITESPACE","\n\n        ",240],["T_VARIABLE","$history",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","array_slice",242],"(",["T_VARIABLE","$history",242],",",["T_WHITESPACE"," ",242],["T_LNUMBER","0",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$limit",242],")",";",["T_WHITESPACE","\n\n        ",242],["T_VARIABLE","$history",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","ArrayHelper",244],["T_DOUBLE_COLON","::",244],["T_STRING","map",244],"(",["T_VARIABLE","$history",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'version'",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",244],")",";",["T_WHITESPACE","\n\n        ",244],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$history",246],";",["T_WHITESPACE","\n    ",246],"}",["T_WHITESPACE","\n\n    ",247],["T_DOC_COMMENT","\/**\n     * Creates the migration history table.\n     *\/",249],["T_WHITESPACE","\n    ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","createMigrationHistoryTable",252],"(",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$tableName",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","schema",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getRawTableName",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","migrationTable",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","stdout",255],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Creating migration history table \\\"",255],["T_VARIABLE","$tableName",255],["T_ENCAPSED_AND_WHITESPACE","\\\"...",255],"\"",",",["T_WHITESPACE"," ",255],["T_STRING","Console",255],["T_DOUBLE_COLON","::",255],["T_STRING","FG_YELLOW",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","db",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","createCommand",256],"(",")",["T_OBJECT_OPERATOR","->",256],["T_STRING","createTable",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","migrationTable",256],",",["T_WHITESPACE"," ",256],"[",["T_WHITESPACE","\n            ",256],["T_CONSTANT_ENCAPSED_STRING","'version'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'varchar(180) NOT NULL PRIMARY KEY'",257],",",["T_WHITESPACE","\n            ",257],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'integer'",258],",",["T_WHITESPACE","\n        ",258],"]",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","execute",259],"(",")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","db",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","createCommand",260],"(",")",["T_OBJECT_OPERATOR","->",260],["T_STRING","insert",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","migrationTable",260],",",["T_WHITESPACE"," ",260],"[",["T_WHITESPACE","\n            ",260],["T_CONSTANT_ENCAPSED_STRING","'version'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_STRING","self",261],["T_DOUBLE_COLON","::",261],["T_STRING","BASE_MIGRATION",261],",",["T_WHITESPACE","\n            ",261],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_STRING","time",262],"(",")",",",["T_WHITESPACE","\n        ",262],"]",")",["T_OBJECT_OPERATOR","->",263],["T_STRING","execute",263],"(",")",";",["T_WHITESPACE","\n        ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","stdout",264],"(",["T_CONSTANT_ENCAPSED_STRING","\"Done.\\n\"",264],",",["T_WHITESPACE"," ",264],["T_STRING","Console",264],["T_DOUBLE_COLON","::",264],["T_STRING","FG_GREEN",264],")",";",["T_WHITESPACE","\n    ",264],"}",["T_WHITESPACE","\n\n    ",265],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",267],["T_WHITESPACE","\n    ",269],["T_PROTECTED","protected",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","addMigrationHistory",270],"(",["T_VARIABLE","$version",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$command",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","db",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","createCommand",272],"(",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$command",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","insert",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","migrationTable",273],",",["T_WHITESPACE"," ",273],"[",["T_WHITESPACE","\n            ",273],["T_CONSTANT_ENCAPSED_STRING","'version'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$version",274],",",["T_WHITESPACE","\n            ",274],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],["T_STRING","time",275],"(",")",",",["T_WHITESPACE","\n        ",275],"]",")",["T_OBJECT_OPERATOR","->",276],["T_STRING","execute",276],"(",")",";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n\n    ",277],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",279],["T_WHITESPACE","\n    ",281],["T_PROTECTED","protected",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","removeMigrationHistory",282],"(",["T_VARIABLE","$version",282],")",["T_WHITESPACE","\n    ",282],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$command",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","db",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","createCommand",284],"(",")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$command",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","delete",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","migrationTable",285],",",["T_WHITESPACE"," ",285],"[",["T_WHITESPACE","\n            ",285],["T_CONSTANT_ENCAPSED_STRING","'version'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$version",286],",",["T_WHITESPACE","\n        ",286],"]",")",["T_OBJECT_OPERATOR","->",287],["T_STRING","execute",287],"(",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",290],["T_WHITESPACE","\n    ",293],["T_PROTECTED","protected",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","generateMigrationSourceCode",294],"(",["T_VARIABLE","$params",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_VARIABLE","$parsedFields",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","parseFields",296],"(",")",";",["T_WHITESPACE","\n        ",296],["T_VARIABLE","$fields",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$parsedFields",297],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",297],"]",";",["T_WHITESPACE","\n        ",297],["T_VARIABLE","$foreignKeys",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$parsedFields",298],"[",["T_CONSTANT_ENCAPSED_STRING","'foreignKeys'",298],"]",";",["T_WHITESPACE","\n\n        ",298],["T_VARIABLE","$name",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$params",300],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",300],"]",";",["T_WHITESPACE","\n\n        ",300],["T_VARIABLE","$templateFile",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","templateFile",302],";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$table",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","null",303],";",["T_WHITESPACE","\n        ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_STRING","preg_match",304],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^create_junction(?:_table_for_|_for_|_)(.+)_and_(.+)_tables?$\/'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$name",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$matches",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n            ",304],["T_VARIABLE","$templateFile",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","generatorTemplateFiles",305],"[",["T_CONSTANT_ENCAPSED_STRING","'create_junction'",305],"]",";",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$firstTable",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$matches",306],"[",["T_LNUMBER","1",306],"]",";",["T_WHITESPACE","\n            ",306],["T_VARIABLE","$secondTable",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$matches",307],"[",["T_LNUMBER","2",307],"]",";",["T_WHITESPACE","\n\n            ",307],["T_VARIABLE","$fields",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","array_merge",309],"(",["T_WHITESPACE","\n                ",309],"[",["T_WHITESPACE","\n                    ",310],"[",["T_WHITESPACE","\n                        ",311],["T_CONSTANT_ENCAPSED_STRING","'property'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$firstTable",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'_id'",312],",",["T_WHITESPACE","\n                        ",312],["T_CONSTANT_ENCAPSED_STRING","'decorators'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","'integer()'",313],",",["T_WHITESPACE","\n                    ",313],"]",",",["T_WHITESPACE","\n                    ",314],"[",["T_WHITESPACE","\n                        ",315],["T_CONSTANT_ENCAPSED_STRING","'property'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$secondTable",316],["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'_id'",316],",",["T_WHITESPACE","\n                        ",316],["T_CONSTANT_ENCAPSED_STRING","'decorators'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'integer()'",317],",",["T_WHITESPACE","\n                    ",317],"]",",",["T_WHITESPACE","\n                ",318],"]",",",["T_WHITESPACE","\n                ",319],["T_VARIABLE","$fields",320],",",["T_WHITESPACE","\n                ",320],"[",["T_WHITESPACE","\n                    ",321],"[",["T_WHITESPACE","\n                        ",322],["T_CONSTANT_ENCAPSED_STRING","'property'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY('",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE","\n                            ",323],["T_VARIABLE","$firstTable",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'_id, '",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE","\n                            ",324],["T_VARIABLE","$secondTable",325],["T_WHITESPACE"," ",325],".",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'_id)'",325],",",["T_WHITESPACE","\n                    ",325],"]",",",["T_WHITESPACE","\n                ",326],"]",["T_WHITESPACE","\n            ",327],")",";",["T_WHITESPACE","\n\n            ",328],["T_VARIABLE","$foreignKeys",330],"[",["T_VARIABLE","$firstTable",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'_id'",330],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$firstTable",330],";",["T_WHITESPACE","\n            ",330],["T_VARIABLE","$foreignKeys",331],"[",["T_VARIABLE","$secondTable",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'_id'",331],"]","[",["T_CONSTANT_ENCAPSED_STRING","'table'",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$secondTable",331],";",["T_WHITESPACE","\n            ",331],["T_VARIABLE","$foreignKeys",332],"[",["T_VARIABLE","$firstTable",332],["T_WHITESPACE"," ",332],".",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'_id'",332],"]","[",["T_CONSTANT_ENCAPSED_STRING","'column'",332],"]",["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_STRING","null",332],";",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$foreignKeys",333],"[",["T_VARIABLE","$secondTable",333],["T_WHITESPACE"," ",333],".",["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'_id'",333],"]","[",["T_CONSTANT_ENCAPSED_STRING","'column'",333],"]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","null",333],";",["T_WHITESPACE","\n            ",333],["T_VARIABLE","$table",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$firstTable",334],["T_WHITESPACE"," ",334],".",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'_'",334],["T_WHITESPACE"," ",334],".",["T_WHITESPACE"," ",334],["T_VARIABLE","$secondTable",334],";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE"," ",335],["T_ELSEIF","elseif",335],["T_WHITESPACE"," ",335],"(",["T_STRING","preg_match",335],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^add_(.+)_columns?_to_(.+)_table$\/'",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$name",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$matches",335],")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n            ",335],["T_VARIABLE","$templateFile",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","generatorTemplateFiles",336],"[",["T_CONSTANT_ENCAPSED_STRING","'add_column'",336],"]",";",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$table",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$matches",337],"[",["T_LNUMBER","2",337],"]",";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE"," ",338],["T_ELSEIF","elseif",338],["T_WHITESPACE"," ",338],"(",["T_STRING","preg_match",338],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^drop_(.+)_columns?_from_(.+)_table$\/'",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$name",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$matches",338],")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$templateFile",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","generatorTemplateFiles",339],"[",["T_CONSTANT_ENCAPSED_STRING","'drop_column'",339],"]",";",["T_WHITESPACE","\n            ",339],["T_VARIABLE","$table",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$matches",340],"[",["T_LNUMBER","2",340],"]",";",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE"," ",341],["T_ELSEIF","elseif",341],["T_WHITESPACE"," ",341],"(",["T_STRING","preg_match",341],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^create_(.+)_table$\/'",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$name",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$matches",341],")",")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n            ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","addDefaultPrimaryKey",342],"(",["T_VARIABLE","$fields",342],")",";",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$templateFile",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","generatorTemplateFiles",343],"[",["T_CONSTANT_ENCAPSED_STRING","'create_table'",343],"]",";",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$table",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$matches",344],"[",["T_LNUMBER","1",344],"]",";",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE"," ",345],["T_ELSEIF","elseif",345],["T_WHITESPACE"," ",345],"(",["T_STRING","preg_match",345],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^drop_(.+)_table$\/'",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$name",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$matches",345],")",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","addDefaultPrimaryKey",346],"(",["T_VARIABLE","$fields",346],")",";",["T_WHITESPACE","\n            ",346],["T_VARIABLE","$templateFile",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","generatorTemplateFiles",347],"[",["T_CONSTANT_ENCAPSED_STRING","'drop_table'",347],"]",";",["T_WHITESPACE","\n            ",347],["T_VARIABLE","$table",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$matches",348],"[",["T_LNUMBER","1",348],"]",";",["T_WHITESPACE","\n        ",348],"}",["T_WHITESPACE","\n\n        ",349],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$foreignKeys",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$column",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$foreignKey",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n            ",351],["T_VARIABLE","$relatedColumn",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$foreignKey",352],"[",["T_CONSTANT_ENCAPSED_STRING","'column'",352],"]",";",["T_WHITESPACE","\n            ",352],["T_VARIABLE","$relatedTable",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$foreignKey",353],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",353],"]",";",["T_WHITESPACE","\n            ",353],["T_COMMENT","\/\/ Since 2.0.11 if related column name is not specified,\n",354],["T_WHITESPACE","            ",355],["T_COMMENT","\/\/ we're trying to get it from table schema\n",355],["T_WHITESPACE","            ",356],["T_COMMENT","\/\/ @see https:\/\/github.com\/yiisoft\/yii2\/issues\/12748\n",356],["T_WHITESPACE","            ",357],["T_IF","if",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$relatedColumn",357],["T_WHITESPACE"," ",357],["T_IS_IDENTICAL","===",357],["T_WHITESPACE"," ",357],["T_STRING","null",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n                ",357],["T_VARIABLE","$relatedColumn",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'id'",358],";",["T_WHITESPACE","\n                ",358],["T_TRY","try",359],["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n                    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","db",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_STRING","Instance",360],["T_DOUBLE_COLON","::",360],["T_STRING","ensure",360],"(",["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","db",360],",",["T_WHITESPACE"," ",360],["T_STRING","Connection",360],["T_DOUBLE_COLON","::",360],["T_STRING","className",360],"(",")",")",";",["T_WHITESPACE","\n                    ",360],["T_VARIABLE","$relatedTableSchema",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","db",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getTableSchema",361],"(",["T_VARIABLE","$relatedTable",361],")",";",["T_WHITESPACE","\n                    ",361],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_VARIABLE","$relatedTableSchema",362],["T_WHITESPACE"," ",362],["T_IS_NOT_IDENTICAL","!==",362],["T_WHITESPACE"," ",362],["T_STRING","null",362],")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n                        ",362],["T_VARIABLE","$primaryKeyCount",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","count",363],"(",["T_VARIABLE","$relatedTableSchema",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","primaryKey",363],")",";",["T_WHITESPACE","\n                        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$primaryKeyCount",364],["T_WHITESPACE"," ",364],["T_IS_IDENTICAL","===",364],["T_WHITESPACE"," ",364],["T_LNUMBER","1",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n                            ",364],["T_VARIABLE","$relatedColumn",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$relatedTableSchema",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","primaryKey",365],"[",["T_LNUMBER","0",365],"]",";",["T_WHITESPACE","\n                        ",365],"}",["T_WHITESPACE"," ",366],["T_ELSEIF","elseif",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$primaryKeyCount",366],["T_WHITESPACE"," ",366],">",["T_WHITESPACE"," ",366],["T_LNUMBER","1",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n                            ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","stdout",367],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Related table for field \\\"",367],["T_CURLY_OPEN","{",367],["T_VARIABLE","$column",367],"}",["T_ENCAPSED_AND_WHITESPACE","\\\" exists, but primary key is composite. Default name \\\"id\\\" will be used for related field\\n",367],"\"",",",["T_WHITESPACE"," ",367],["T_STRING","Console",367],["T_DOUBLE_COLON","::",367],["T_STRING","FG_YELLOW",367],")",";",["T_WHITESPACE","\n                        ",367],"}",["T_WHITESPACE"," ",368],["T_ELSEIF","elseif",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$primaryKeyCount",368],["T_WHITESPACE"," ",368],["T_IS_IDENTICAL","===",368],["T_WHITESPACE"," ",368],["T_LNUMBER","0",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n                            ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","stdout",369],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Related table for field \\\"",369],["T_CURLY_OPEN","{",369],["T_VARIABLE","$column",369],"}",["T_ENCAPSED_AND_WHITESPACE","\\\" exists, but does not have a primary key. Default name \\\"id\\\" will be used for related field.\\n",369],"\"",",",["T_WHITESPACE"," ",369],["T_STRING","Console",369],["T_DOUBLE_COLON","::",369],["T_STRING","FG_YELLOW",369],")",";",["T_WHITESPACE","\n                        ",369],"}",["T_WHITESPACE","\n                    ",370],"}",["T_WHITESPACE","\n                ",371],"}",["T_WHITESPACE"," ",372],["T_CATCH","catch",372],["T_WHITESPACE"," ",372],"(",["T_NS_SEPARATOR","\\",372],["T_STRING","ReflectionException",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$e",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n                    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","stdout",373],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Cannot initialize database component to try reading referenced table schema for field \\\"",373],["T_CURLY_OPEN","{",373],["T_VARIABLE","$column",373],"}",["T_ENCAPSED_AND_WHITESPACE","\\\". Default name \\\"id\\\" will be used for related field.\\n",373],"\"",",",["T_WHITESPACE"," ",373],["T_STRING","Console",373],["T_DOUBLE_COLON","::",373],["T_STRING","FG_YELLOW",373],")",";",["T_WHITESPACE","\n                ",373],"}",["T_WHITESPACE","\n            ",374],"}",["T_WHITESPACE","\n            ",375],["T_VARIABLE","$foreignKeys",376],"[",["T_VARIABLE","$column",376],"]",["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],"[",["T_WHITESPACE","\n                ",376],["T_CONSTANT_ENCAPSED_STRING","'idx'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","generateTableName",377],"(","\"",["T_ENCAPSED_AND_WHITESPACE","idx-",377],["T_VARIABLE","$table",377],["T_ENCAPSED_AND_WHITESPACE","-",377],["T_VARIABLE","$column",377],"\"",")",",",["T_WHITESPACE","\n                ",377],["T_CONSTANT_ENCAPSED_STRING","'fk'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","generateTableName",378],"(","\"",["T_ENCAPSED_AND_WHITESPACE","fk-",378],["T_VARIABLE","$table",378],["T_ENCAPSED_AND_WHITESPACE","-",378],["T_VARIABLE","$column",378],"\"",")",",",["T_WHITESPACE","\n                ",378],["T_CONSTANT_ENCAPSED_STRING","'relatedTable'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","generateTableName",379],"(",["T_VARIABLE","$relatedTable",379],")",",",["T_WHITESPACE","\n                ",379],["T_CONSTANT_ENCAPSED_STRING","'relatedColumn'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$relatedColumn",380],",",["T_WHITESPACE","\n            ",380],"]",";",["T_WHITESPACE","\n        ",381],"}",["T_WHITESPACE","\n\n        ",382],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","renderFile",384],"(",["T_STRING","Yii",384],["T_DOUBLE_COLON","::",384],["T_STRING","getAlias",384],"(",["T_VARIABLE","$templateFile",384],")",",",["T_WHITESPACE"," ",384],["T_STRING","array_merge",384],"(",["T_VARIABLE","$params",384],",",["T_WHITESPACE"," ",384],"[",["T_WHITESPACE","\n            ",384],["T_CONSTANT_ENCAPSED_STRING","'table'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","generateTableName",385],"(",["T_VARIABLE","$table",385],")",",",["T_WHITESPACE","\n            ",385],["T_CONSTANT_ENCAPSED_STRING","'fields'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$fields",386],",",["T_WHITESPACE","\n            ",386],["T_CONSTANT_ENCAPSED_STRING","'foreignKeys'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$foreignKeys",387],",",["T_WHITESPACE","\n        ",387],"]",")",")",";",["T_WHITESPACE","\n    ",388],"}",["T_WHITESPACE","\n\n    ",389],["T_DOC_COMMENT","\/**\n     * If `useTablePrefix` equals true, then the table name will contain the\n     * prefix format.\n     *\n     * @param string $tableName the table name to generate.\n     * @return string\n     * @since 2.0.8\n     *\/",391],["T_WHITESPACE","\n    ",398],["T_PROTECTED","protected",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","generateTableName",399],"(",["T_VARIABLE","$tableName",399],")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(","!",["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","useTablePrefix",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n            ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$tableName",402],";",["T_WHITESPACE","\n        ",402],"}",["T_WHITESPACE","\n        ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'{{%'",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_VARIABLE","$tableName",404],["T_WHITESPACE"," ",404],".",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'}}'",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_DOC_COMMENT","\/**\n     * Parse the command line migration fields\n     * @return array parse result with following fields:\n     *\n     * - fields: array, parsed fields\n     * - foreignKeys: array, detected foreign keys\n     *\n     * @since 2.0.7\n     *\/",407],["T_WHITESPACE","\n    ",415],["T_PROTECTED","protected",416],["T_WHITESPACE"," ",416],["T_FUNCTION","function",416],["T_WHITESPACE"," ",416],["T_STRING","parseFields",416],"(",")",["T_WHITESPACE","\n    ",416],"{",["T_WHITESPACE","\n        ",417],["T_VARIABLE","$fields",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],"[","]",";",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$foreignKeys",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"[","]",";",["T_WHITESPACE","\n\n        ",419],["T_FOREACH","foreach",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","fields",421],["T_WHITESPACE"," ",421],["T_AS","as",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$index",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$field",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n            ",421],["T_VARIABLE","$chunks",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_STRING","preg_split",422],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\s?:\\s?\/'",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$field",422],",",["T_WHITESPACE"," ",422],["T_STRING","null",422],")",";",["T_WHITESPACE","\n            ",422],["T_VARIABLE","$property",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_STRING","array_shift",423],"(",["T_VARIABLE","$chunks",423],")",";",["T_WHITESPACE","\n\n            ",423],["T_FOREACH","foreach",425],["T_WHITESPACE"," ",425],"(",["T_VARIABLE","$chunks",425],["T_WHITESPACE"," ",425],["T_AS","as",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$i",425],["T_WHITESPACE"," ",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],"&",["T_VARIABLE","$chunk",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n                ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_STRING","strpos",426],"(",["T_VARIABLE","$chunk",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'foreignKey'",426],")",["T_WHITESPACE"," ",426],["T_IS_IDENTICAL","===",426],["T_WHITESPACE"," ",426],["T_LNUMBER","0",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n                    ",426],["T_STRING","preg_match",427],"(",["T_CONSTANT_ENCAPSED_STRING","'\/foreignKey\\((\\w*)\\s?(\\w*)\\)\/'",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$chunk",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$matches",427],")",";",["T_WHITESPACE","\n                    ",427],["T_VARIABLE","$foreignKeys",428],"[",["T_VARIABLE","$property",428],"]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],"[",["T_WHITESPACE","\n                        ",428],["T_CONSTANT_ENCAPSED_STRING","'table'",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_ISSET","isset",429],"(",["T_VARIABLE","$matches",429],"[",["T_LNUMBER","1",429],"]",")",["T_WHITESPACE","\n                            ",429],"?",["T_WHITESPACE"," ",430],["T_VARIABLE","$matches",430],"[",["T_LNUMBER","1",430],"]",["T_WHITESPACE","\n                            ",430],":",["T_WHITESPACE"," ",431],["T_STRING","preg_replace",431],"(",["T_CONSTANT_ENCAPSED_STRING","'\/_id$\/'",431],",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","''",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$property",431],")",",",["T_WHITESPACE","\n                        ",431],["T_CONSTANT_ENCAPSED_STRING","'column'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],"!",["T_EMPTY","empty",432],"(",["T_VARIABLE","$matches",432],"[",["T_LNUMBER","2",432],"]",")",["T_WHITESPACE","\n                            ",432],"?",["T_WHITESPACE"," ",433],["T_VARIABLE","$matches",433],"[",["T_LNUMBER","2",433],"]",["T_WHITESPACE","\n                            ",433],":",["T_WHITESPACE"," ",434],["T_STRING","null",434],",",["T_WHITESPACE","\n                    ",434],"]",";",["T_WHITESPACE","\n\n                    ",435],["T_UNSET","unset",437],"(",["T_VARIABLE","$chunks",437],"[",["T_VARIABLE","$i",437],"]",")",";",["T_WHITESPACE","\n                    ",437],["T_CONTINUE","continue",438],";",["T_WHITESPACE","\n                ",438],"}",["T_WHITESPACE","\n\n                ",439],["T_IF","if",441],["T_WHITESPACE"," ",441],"(","!",["T_STRING","preg_match",441],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.+?)\\(([^(]+)\\)$\/'",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$chunk",441],")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n                    ",441],["T_VARIABLE","$chunk",442],["T_WHITESPACE"," ",442],["T_CONCAT_EQUAL",".=",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'()'",442],";",["T_WHITESPACE","\n                ",442],"}",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE","\n            ",444],["T_VARIABLE","$fields",445],"[","]",["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],"[",["T_WHITESPACE","\n                ",445],["T_CONSTANT_ENCAPSED_STRING","'property'",446],["T_WHITESPACE"," ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$property",446],",",["T_WHITESPACE","\n                ",446],["T_CONSTANT_ENCAPSED_STRING","'decorators'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_STRING","implode",447],"(",["T_CONSTANT_ENCAPSED_STRING","'->'",447],",",["T_WHITESPACE"," ",447],["T_VARIABLE","$chunks",447],")",",",["T_WHITESPACE","\n            ",447],"]",";",["T_WHITESPACE","\n        ",448],"}",["T_WHITESPACE","\n\n        ",449],["T_RETURN","return",451],["T_WHITESPACE"," ",451],"[",["T_WHITESPACE","\n            ",451],["T_CONSTANT_ENCAPSED_STRING","'fields'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$fields",452],",",["T_WHITESPACE","\n            ",452],["T_CONSTANT_ENCAPSED_STRING","'foreignKeys'",453],["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$foreignKeys",453],",",["T_WHITESPACE","\n        ",453],"]",";",["T_WHITESPACE","\n    ",454],"}",["T_WHITESPACE","\n\n    ",455],["T_DOC_COMMENT","\/**\n     * Adds default primary key to fields list if there's no primary key specified\n     * @param array $fields parsed fields\n     * @since 2.0.7\n     *\/",457],["T_WHITESPACE","\n    ",461],["T_PROTECTED","protected",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","addDefaultPrimaryKey",462],"(","&",["T_VARIABLE","$fields",462],")",["T_WHITESPACE","\n    ",462],"{",["T_WHITESPACE","\n        ",463],["T_FOREACH","foreach",464],["T_WHITESPACE"," ",464],"(",["T_VARIABLE","$fields",464],["T_WHITESPACE"," ",464],["T_AS","as",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$field",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n            ",464],["T_IF","if",465],["T_WHITESPACE"," ",465],"(",["T_STRING","false",465],["T_WHITESPACE"," ",465],["T_IS_NOT_IDENTICAL","!==",465],["T_WHITESPACE"," ",465],["T_STRING","strripos",465],"(",["T_VARIABLE","$field",465],"[",["T_CONSTANT_ENCAPSED_STRING","'decorators'",465],"]",",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'primarykey()'",465],")",")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n                ",465],["T_RETURN","return",466],";",["T_WHITESPACE","\n            ",466],"}",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE","\n        ",468],["T_STRING","array_unshift",469],"(",["T_VARIABLE","$fields",469],",",["T_WHITESPACE"," ",469],"[",["T_CONSTANT_ENCAPSED_STRING","'property'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'id'",469],",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'decorators'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'primaryKey()'",469],"]",")",";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n",470],"}",["T_WHITESPACE","\n",471]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","console",8],["T_NS_SEPARATOR","\\",8],["T_STRING","controllers",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","console",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","console",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Controller",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","helpers",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Console",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","yii",15],["T_NS_SEPARATOR","\\",15],["T_STRING","helpers",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FileHelper",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * BaseMigrateController is the base class for migrate controllers.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",17],["T_WHITESPACE","\n",22],["T_ABSTRACT","abstract",23],["T_WHITESPACE"," ",23],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","BaseMigrateController",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","Controller",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * The name of the dummy migration that marks the beginning of the whole migration history.\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","BASE_MIGRATION",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'m000000_000000_base'",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var string the default command action.\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$defaultAction",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'up'",33],";",["T_WHITESPACE","\n    ",33],["T_DOC_COMMENT","\/**\n     * @var string the directory containing the migration classes. This can be either\n     * a path alias or a directory path.\n     *\n     * Migration classes located at this path should be declared without a namespace.\n     * Use [[migrationNamespaces]] property in case you are using namespaced migrations.\n     *\n     * If you have set up [[migrationNamespaces]], you may set this field to `null` in order\n     * to disable usage of migrations that are not namespaced.\n     *\/",34],["T_WHITESPACE","\n    ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$migrationPath",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'@app\/migrations'",44],";",["T_WHITESPACE","\n    ",44],["T_DOC_COMMENT","\/**\n     * @var array list of namespaces containing the migration classes.\n     *\n     * Migration namespaces should be resolvable as a path alias if prefixed with `@`, e.g. if you specify\n     * the namespace `app\\migrations`, the code `Yii::getAlias('@app\/migrations')` should be able to return\n     * the file path to the directory this namespace refers to.\n     *\n     * For example:\n     *\n     * ```php\n     * [\n     *     'app\\migrations',\n     *     'some\\extension\\migrations',\n     * ]\n     * ```\n     *\n     * @since 2.0.10\n     *\/",45],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$migrationNamespaces",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"[","]",";",["T_WHITESPACE","\n    ",63],["T_DOC_COMMENT","\/**\n     * @var string the template file for generating new migrations.\n     * This can be either a path alias (e.g. \"@app\/migrations\/template.php\")\n     * or a file path.\n     *\/",64],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$templateFile",69],";",["T_WHITESPACE","\n\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",72],["T_WHITESPACE","\n    ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","options",75],"(",["T_VARIABLE","$actionID",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_STRING","array_merge",77],"(",["T_WHITESPACE","\n            ",77],["T_STRING","parent",78],["T_DOUBLE_COLON","::",78],["T_STRING","options",78],"(",["T_VARIABLE","$actionID",78],")",",",["T_WHITESPACE","\n            ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'migrationPath'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'migrationNamespaces'",79],"]",",",["T_WHITESPACE"," ",79],["T_COMMENT","\/\/ global for all actions\n",79],["T_WHITESPACE","            ",80],["T_VARIABLE","$actionID",80],["T_WHITESPACE"," ",80],["T_IS_IDENTICAL","===",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'create'",80],["T_WHITESPACE"," ",80],"?",["T_WHITESPACE"," ",80],"[",["T_CONSTANT_ENCAPSED_STRING","'templateFile'",80],"]",["T_WHITESPACE"," ",80],":",["T_WHITESPACE"," ",80],"[","]",["T_WHITESPACE"," ",80],["T_COMMENT","\/\/ action create\n",80],["T_WHITESPACE","        ",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * This method is invoked right before an action is to be executed (after all possible filters.)\n     * It checks the existence of the [[migrationPath]].\n     * @param \\yii\\base\\Action $action the action to be executed.\n     * @throws InvalidConfigException if directory specified in migrationPath doesn't exist and action isn't \"create\".\n     * @return bool whether the action should continue to be executed.\n     *\/",84],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","beforeAction",91],"(",["T_VARIABLE","$action",91],")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_STRING","parent",93],["T_DOUBLE_COLON","::",93],["T_STRING","beforeAction",93],"(",["T_VARIABLE","$action",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_EMPTY","empty",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","migrationNamespaces",94],")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],["T_EMPTY","empty",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","migrationPath",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","InvalidConfigException",95],"(",["T_CONSTANT_ENCAPSED_STRING","'At least one of `migrationPath` or `migrationNamespaces` should be specified.'",95],")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n\n            ",96],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","migrationNamespaces",98],["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$key",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$value",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","migrationNamespaces",99],"[",["T_VARIABLE","$key",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","trim",99],"(",["T_VARIABLE","$value",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",99],")",";",["T_WHITESPACE","\n            ",99],"}",["T_WHITESPACE","\n\n            ",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","migrationPath",102],["T_WHITESPACE"," ",102],["T_IS_NOT_IDENTICAL","!==",102],["T_WHITESPACE"," ",102],["T_STRING","null",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n                ",102],["T_VARIABLE","$path",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Yii",103],["T_DOUBLE_COLON","::",103],["T_STRING","getAlias",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","migrationPath",103],")",";",["T_WHITESPACE","\n                ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_STRING","is_dir",104],"(",["T_VARIABLE","$path",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                    ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$action",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],["T_WHITESPACE"," ",105],["T_IS_NOT_IDENTICAL","!==",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'create'",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n                        ",105],["T_THROW","throw",106],["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","InvalidConfigException",106],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Migration failed. Directory specified in migrationPath doesn't exist: ",106],["T_CURLY_OPEN","{",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","migrationPath",106],"}","\"",")",";",["T_WHITESPACE","\n                    ",106],"}",["T_WHITESPACE","\n                    ",107],["T_STRING","FileHelper",108],["T_DOUBLE_COLON","::",108],["T_STRING","createDirectory",108],"(",["T_VARIABLE","$path",108],")",";",["T_WHITESPACE","\n                ",108],"}",["T_WHITESPACE","\n                ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","migrationPath",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$path",110],";",["T_WHITESPACE","\n            ",110],"}",["T_WHITESPACE","\n\n            ",111],["T_VARIABLE","$version",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","Yii",113],["T_DOUBLE_COLON","::",113],["T_STRING","getVersion",113],"(",")",";",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","stdout",114],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Yii Migration Tool (based on Yii v",114],["T_CURLY_OPEN","{",114],["T_VARIABLE","$version",114],"}",["T_ENCAPSED_AND_WHITESPACE",")\\n\\n",114],"\"",")",";",["T_WHITESPACE","\n\n            ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","true",116],";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE"," ",117],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","false",118],";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Upgrades the application by applying new migrations.\n     * For example,\n     *\n     * ```\n     * yii migrate     # apply all new migrations\n     * yii migrate 3   # apply the first 3 new migrations\n     * ```\n     *\n     * @param int $limit the number of new migrations to be applied. If 0, it means\n     * applying all available new migrations.\n     *\n     * @return int the status of the action execution. 0 means normal, other values mean abnormal.\n     *\/",122],["T_WHITESPACE","\n    ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","actionUp",136],"(",["T_VARIABLE","$limit",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_LNUMBER","0",136],")",["T_WHITESPACE","\n    ",136],"{",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$migrations",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getNewMigrations",138],"(",")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_EMPTY","empty",139],"(",["T_VARIABLE","$migrations",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","stdout",140],"(",["T_CONSTANT_ENCAPSED_STRING","\"No new migrations found. Your system is up-to-date.\\n\"",140],",",["T_WHITESPACE"," ",140],["T_STRING","Console",140],["T_DOUBLE_COLON","::",140],["T_STRING","FG_GREEN",140],")",";",["T_WHITESPACE","\n\n            ",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","self",142],["T_DOUBLE_COLON","::",142],["T_STRING","EXIT_CODE_NORMAL",142],";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$total",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","count",145],"(",["T_VARIABLE","$migrations",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$limit",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_INT_CAST","(int)",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$limit",146],";",["T_WHITESPACE","\n        ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$limit",147],["T_WHITESPACE"," ",147],">",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$migrations",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","array_slice",148],"(",["T_VARIABLE","$migrations",148],",",["T_WHITESPACE"," ",148],["T_LNUMBER","0",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$limit",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_VARIABLE","$n",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","count",151],"(",["T_VARIABLE","$migrations",151],")",";",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$n",152],["T_WHITESPACE"," ",152],["T_IS_IDENTICAL","===",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$total",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","stdout",153],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Total ",153],["T_VARIABLE","$n",153],["T_ENCAPSED_AND_WHITESPACE"," new ",153],"\"",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$n",153],["T_WHITESPACE"," ",153],["T_IS_IDENTICAL","===",153],["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],["T_WHITESPACE"," ",153],"?",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'migration'",153],["T_WHITESPACE"," ",153],":",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'migrations'",153],")",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","\" to be applied:\\n\"",153],",",["T_WHITESPACE"," ",153],["T_STRING","Console",153],["T_DOUBLE_COLON","::",153],["T_STRING","FG_YELLOW",153],")",";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","stdout",155],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Total ",155],["T_VARIABLE","$n",155],["T_ENCAPSED_AND_WHITESPACE"," out of ",155],["T_VARIABLE","$total",155],["T_ENCAPSED_AND_WHITESPACE"," new ",155],"\"",["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$total",155],["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_LNUMBER","1",155],["T_WHITESPACE"," ",155],"?",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'migration'",155],["T_WHITESPACE"," ",155],":",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'migrations'",155],")",["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","\" to be applied:\\n\"",155],",",["T_WHITESPACE"," ",155],["T_STRING","Console",155],["T_DOUBLE_COLON","::",155],["T_STRING","FG_YELLOW",155],")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$migrations",158],["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$migration",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","stdout",159],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\t",159],["T_VARIABLE","$migration",159],["T_ENCAPSED_AND_WHITESPACE","\\n",159],"\"",")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","stdout",161],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",161],")",";",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$applied",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],";",["T_WHITESPACE","\n        ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","confirm",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply the above '",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$n",164],["T_WHITESPACE"," ",164],["T_IS_IDENTICAL","===",164],["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'migration'",164],["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'migrations'",164],")",["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'?'",164],")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n            ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$migrations",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$migration",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","migrateUp",166],"(",["T_VARIABLE","$migration",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n                    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","stdout",167],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\n",167],["T_VARIABLE","$applied",167],["T_ENCAPSED_AND_WHITESPACE"," from ",167],["T_VARIABLE","$n",167],["T_ENCAPSED_AND_WHITESPACE"," ",167],"\"",["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$applied",167],["T_WHITESPACE"," ",167],["T_IS_IDENTICAL","===",167],["T_WHITESPACE"," ",167],["T_LNUMBER","1",167],["T_WHITESPACE"," ",167],"?",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'migration was'",167],["T_WHITESPACE"," ",167],":",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'migrations were'",167],")",["T_WHITESPACE"," ",167],".",["T_CONSTANT_ENCAPSED_STRING","\" applied.\\n\"",167],",",["T_WHITESPACE"," ",167],["T_STRING","Console",167],["T_DOUBLE_COLON","::",167],["T_STRING","FG_RED",167],")",";",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","stdout",168],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigration failed. The rest of the migrations are canceled.\\n\"",168],",",["T_WHITESPACE"," ",168],["T_STRING","Console",168],["T_DOUBLE_COLON","::",168],["T_STRING","FG_RED",168],")",";",["T_WHITESPACE","\n\n                    ",168],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_STRING","self",170],["T_DOUBLE_COLON","::",170],["T_STRING","EXIT_CODE_ERROR",170],";",["T_WHITESPACE","\n                ",170],"}",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$applied",172],["T_INC","++",172],";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE","\n\n            ",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","stdout",175],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\n",175],["T_VARIABLE","$n",175],["T_ENCAPSED_AND_WHITESPACE"," ",175],"\"",["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$n",175],["T_WHITESPACE"," ",175],["T_IS_IDENTICAL","===",175],["T_WHITESPACE"," ",175],["T_LNUMBER","1",175],["T_WHITESPACE"," ",175],"?",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'migration was'",175],["T_WHITESPACE"," ",175],":",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'migrations were'",175],")",["T_WHITESPACE"," ",175],".",["T_CONSTANT_ENCAPSED_STRING","\" applied.\\n\"",175],",",["T_WHITESPACE"," ",175],["T_STRING","Console",175],["T_DOUBLE_COLON","::",175],["T_STRING","FG_GREEN",175],")",";",["T_WHITESPACE","\n            ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","stdout",176],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigrated up successfully.\\n\"",176],",",["T_WHITESPACE"," ",176],["T_STRING","Console",176],["T_DOUBLE_COLON","::",176],["T_STRING","FG_GREEN",176],")",";",["T_WHITESPACE","\n        ",176],"}",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_DOC_COMMENT","\/**\n     * Downgrades the application by reverting old migrations.\n     * For example,\n     *\n     * ```\n     * yii migrate\/down     # revert the last migration\n     * yii migrate\/down 3   # revert the last 3 migrations\n     * yii migrate\/down all # revert all migrations\n     * ```\n     *\n     * @param int $limit the number of migrations to be reverted. Defaults to 1,\n     * meaning the last applied migration will be reverted.\n     * @throws Exception if the number of the steps specified is less than 1.\n     *\n     * @return int the status of the action execution. 0 means normal, other values mean abnormal.\n     *\/",180],["T_WHITESPACE","\n    ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","actionDown",196],"(",["T_VARIABLE","$limit",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","1",196],")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$limit",198],["T_WHITESPACE"," ",198],["T_IS_IDENTICAL","===",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'all'",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n            ",198],["T_VARIABLE","$limit",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","null",199],";",["T_WHITESPACE","\n        ",199],"}",["T_WHITESPACE"," ",200],["T_ELSE","else",200],["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$limit",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_INT_CAST","(int)",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$limit",201],";",["T_WHITESPACE","\n            ",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$limit",202],["T_WHITESPACE"," ",202],"<",["T_WHITESPACE"," ",202],["T_LNUMBER","1",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_THROW","throw",203],["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_STRING","Exception",203],"(",["T_CONSTANT_ENCAPSED_STRING","'The step argument must be greater than 0.'",203],")",";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE","\n\n        ",205],["T_VARIABLE","$migrations",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getMigrationHistory",207],"(",["T_VARIABLE","$limit",207],")",";",["T_WHITESPACE","\n\n        ",207],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_EMPTY","empty",209],"(",["T_VARIABLE","$migrations",209],")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n            ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","stdout",210],"(",["T_CONSTANT_ENCAPSED_STRING","\"No migration has been done before.\\n\"",210],",",["T_WHITESPACE"," ",210],["T_STRING","Console",210],["T_DOUBLE_COLON","::",210],["T_STRING","FG_YELLOW",210],")",";",["T_WHITESPACE","\n\n            ",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_STRING","self",212],["T_DOUBLE_COLON","::",212],["T_STRING","EXIT_CODE_NORMAL",212],";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n\n        ",213],["T_VARIABLE","$migrations",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","array_keys",215],"(",["T_VARIABLE","$migrations",215],")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$n",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","count",217],"(",["T_VARIABLE","$migrations",217],")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","stdout",218],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Total ",218],["T_VARIABLE","$n",218],["T_ENCAPSED_AND_WHITESPACE"," ",218],"\"",["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$n",218],["T_WHITESPACE"," ",218],["T_IS_IDENTICAL","===",218],["T_WHITESPACE"," ",218],["T_LNUMBER","1",218],["T_WHITESPACE"," ",218],"?",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'migration'",218],["T_WHITESPACE"," ",218],":",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'migrations'",218],")",["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","\" to be reverted:\\n\"",218],",",["T_WHITESPACE"," ",218],["T_STRING","Console",218],["T_DOUBLE_COLON","::",218],["T_STRING","FG_YELLOW",218],")",";",["T_WHITESPACE","\n        ",218],["T_FOREACH","foreach",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$migrations",219],["T_WHITESPACE"," ",219],["T_AS","as",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$migration",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","stdout",220],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\t",220],["T_VARIABLE","$migration",220],["T_ENCAPSED_AND_WHITESPACE","\\n",220],"\"",")",";",["T_WHITESPACE","\n        ",220],"}",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","stdout",222],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",222],")",";",["T_WHITESPACE","\n\n        ",222],["T_VARIABLE","$reverted",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_LNUMBER","0",224],";",["T_WHITESPACE","\n        ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","confirm",225],"(",["T_CONSTANT_ENCAPSED_STRING","'Revert the above '",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$n",225],["T_WHITESPACE"," ",225],["T_IS_IDENTICAL","===",225],["T_WHITESPACE"," ",225],["T_LNUMBER","1",225],["T_WHITESPACE"," ",225],"?",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'migration'",225],["T_WHITESPACE"," ",225],":",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'migrations'",225],")",["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'?'",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_FOREACH","foreach",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$migrations",226],["T_WHITESPACE"," ",226],["T_AS","as",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$migration",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(","!",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","migrateDown",227],"(",["T_VARIABLE","$migration",227],")",")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n                    ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","stdout",228],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\n",228],["T_VARIABLE","$reverted",228],["T_ENCAPSED_AND_WHITESPACE"," from ",228],["T_VARIABLE","$n",228],["T_ENCAPSED_AND_WHITESPACE"," ",228],"\"",["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$reverted",228],["T_WHITESPACE"," ",228],["T_IS_IDENTICAL","===",228],["T_WHITESPACE"," ",228],["T_LNUMBER","1",228],["T_WHITESPACE"," ",228],"?",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'migration was'",228],["T_WHITESPACE"," ",228],":",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'migrations were'",228],")",["T_WHITESPACE"," ",228],".",["T_CONSTANT_ENCAPSED_STRING","\" reverted.\\n\"",228],",",["T_WHITESPACE"," ",228],["T_STRING","Console",228],["T_DOUBLE_COLON","::",228],["T_STRING","FG_RED",228],")",";",["T_WHITESPACE","\n                    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","stdout",229],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigration failed. The rest of the migrations are canceled.\\n\"",229],",",["T_WHITESPACE"," ",229],["T_STRING","Console",229],["T_DOUBLE_COLON","::",229],["T_STRING","FG_RED",229],")",";",["T_WHITESPACE","\n\n                    ",229],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_STRING","self",231],["T_DOUBLE_COLON","::",231],["T_STRING","EXIT_CODE_ERROR",231],";",["T_WHITESPACE","\n                ",231],"}",["T_WHITESPACE","\n                ",232],["T_VARIABLE","$reverted",233],["T_INC","++",233],";",["T_WHITESPACE","\n            ",233],"}",["T_WHITESPACE","\n            ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","stdout",235],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\n",235],["T_VARIABLE","$n",235],["T_ENCAPSED_AND_WHITESPACE"," ",235],"\"",["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$n",235],["T_WHITESPACE"," ",235],["T_IS_IDENTICAL","===",235],["T_WHITESPACE"," ",235],["T_LNUMBER","1",235],["T_WHITESPACE"," ",235],"?",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'migration was'",235],["T_WHITESPACE"," ",235],":",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'migrations were'",235],")",["T_WHITESPACE"," ",235],".",["T_CONSTANT_ENCAPSED_STRING","\" reverted.\\n\"",235],",",["T_WHITESPACE"," ",235],["T_STRING","Console",235],["T_DOUBLE_COLON","::",235],["T_STRING","FG_GREEN",235],")",";",["T_WHITESPACE","\n            ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","stdout",236],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigrated down successfully.\\n\"",236],",",["T_WHITESPACE"," ",236],["T_STRING","Console",236],["T_DOUBLE_COLON","::",236],["T_STRING","FG_GREEN",236],")",";",["T_WHITESPACE","\n        ",236],"}",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_DOC_COMMENT","\/**\n     * Redoes the last few migrations.\n     *\n     * This command will first revert the specified migrations, and then apply\n     * them again. For example,\n     *\n     * ```\n     * yii migrate\/redo     # redo the last applied migration\n     * yii migrate\/redo 3   # redo the last 3 applied migrations\n     * yii migrate\/redo all # redo all migrations\n     * ```\n     *\n     * @param int $limit the number of migrations to be redone. Defaults to 1,\n     * meaning the last applied migration will be redone.\n     * @throws Exception if the number of the steps specified is less than 1.\n     *\n     * @return int the status of the action execution. 0 means normal, other values mean abnormal.\n     *\/",240],["T_WHITESPACE","\n    ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","actionRedo",258],"(",["T_VARIABLE","$limit",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_LNUMBER","1",258],")",["T_WHITESPACE","\n    ",258],"{",["T_WHITESPACE","\n        ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$limit",260],["T_WHITESPACE"," ",260],["T_IS_IDENTICAL","===",260],["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'all'",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n            ",260],["T_VARIABLE","$limit",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","null",261],";",["T_WHITESPACE","\n        ",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_VARIABLE","$limit",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_INT_CAST","(int)",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$limit",263],";",["T_WHITESPACE","\n            ",263],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$limit",264],["T_WHITESPACE"," ",264],"<",["T_WHITESPACE"," ",264],["T_LNUMBER","1",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n                ",264],["T_THROW","throw",265],["T_WHITESPACE"," ",265],["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_STRING","Exception",265],"(",["T_CONSTANT_ENCAPSED_STRING","'The step argument must be greater than 0.'",265],")",";",["T_WHITESPACE","\n            ",265],"}",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n\n        ",267],["T_VARIABLE","$migrations",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getMigrationHistory",269],"(",["T_VARIABLE","$limit",269],")",";",["T_WHITESPACE","\n\n        ",269],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_EMPTY","empty",271],"(",["T_VARIABLE","$migrations",271],")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n            ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","stdout",272],"(",["T_CONSTANT_ENCAPSED_STRING","\"No migration has been done before.\\n\"",272],",",["T_WHITESPACE"," ",272],["T_STRING","Console",272],["T_DOUBLE_COLON","::",272],["T_STRING","FG_YELLOW",272],")",";",["T_WHITESPACE","\n\n            ",272],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","self",274],["T_DOUBLE_COLON","::",274],["T_STRING","EXIT_CODE_NORMAL",274],";",["T_WHITESPACE","\n        ",274],"}",["T_WHITESPACE","\n\n        ",275],["T_VARIABLE","$migrations",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","array_keys",277],"(",["T_VARIABLE","$migrations",277],")",";",["T_WHITESPACE","\n\n        ",277],["T_VARIABLE","$n",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","count",279],"(",["T_VARIABLE","$migrations",279],")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","stdout",280],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Total ",280],["T_VARIABLE","$n",280],["T_ENCAPSED_AND_WHITESPACE"," ",280],"\"",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$n",280],["T_WHITESPACE"," ",280],["T_IS_IDENTICAL","===",280],["T_WHITESPACE"," ",280],["T_LNUMBER","1",280],["T_WHITESPACE"," ",280],"?",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'migration'",280],["T_WHITESPACE"," ",280],":",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'migrations'",280],")",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","\" to be redone:\\n\"",280],",",["T_WHITESPACE"," ",280],["T_STRING","Console",280],["T_DOUBLE_COLON","::",280],["T_STRING","FG_YELLOW",280],")",";",["T_WHITESPACE","\n        ",280],["T_FOREACH","foreach",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$migrations",281],["T_WHITESPACE"," ",281],["T_AS","as",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$migration",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n            ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","stdout",282],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\t",282],["T_VARIABLE","$migration",282],["T_ENCAPSED_AND_WHITESPACE","\\n",282],"\"",")",";",["T_WHITESPACE","\n        ",282],"}",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","stdout",284],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",284],")",";",["T_WHITESPACE","\n\n        ",284],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","confirm",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Redo the above '",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$n",286],["T_WHITESPACE"," ",286],["T_IS_IDENTICAL","===",286],["T_WHITESPACE"," ",286],["T_LNUMBER","1",286],["T_WHITESPACE"," ",286],"?",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'migration'",286],["T_WHITESPACE"," ",286],":",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'migrations'",286],")",["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'?'",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_FOREACH","foreach",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$migrations",287],["T_WHITESPACE"," ",287],["T_AS","as",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$migration",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(","!",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","migrateDown",288],"(",["T_VARIABLE","$migration",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","stdout",289],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigration failed. The rest of the migrations are canceled.\\n\"",289],",",["T_WHITESPACE"," ",289],["T_STRING","Console",289],["T_DOUBLE_COLON","::",289],["T_STRING","FG_RED",289],")",";",["T_WHITESPACE","\n\n                    ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_STRING","self",291],["T_DOUBLE_COLON","::",291],["T_STRING","EXIT_CODE_ERROR",291],";",["T_WHITESPACE","\n                ",291],"}",["T_WHITESPACE","\n            ",292],"}",["T_WHITESPACE","\n            ",293],["T_FOREACH","foreach",294],["T_WHITESPACE"," ",294],"(",["T_STRING","array_reverse",294],"(",["T_VARIABLE","$migrations",294],")",["T_WHITESPACE"," ",294],["T_AS","as",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$migration",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                ",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","!",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","migrateUp",295],"(",["T_VARIABLE","$migration",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n                    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","stdout",296],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigration failed. The rest of the migrations are canceled.\\n\"",296],",",["T_WHITESPACE"," ",296],["T_STRING","Console",296],["T_DOUBLE_COLON","::",296],["T_STRING","FG_RED",296],")",";",["T_WHITESPACE","\n\n                    ",296],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","self",298],["T_DOUBLE_COLON","::",298],["T_STRING","EXIT_CODE_ERROR",298],";",["T_WHITESPACE","\n                ",298],"}",["T_WHITESPACE","\n            ",299],"}",["T_WHITESPACE","\n            ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","stdout",301],"(","\"",["T_ENCAPSED_AND_WHITESPACE","\\n",301],["T_VARIABLE","$n",301],["T_ENCAPSED_AND_WHITESPACE"," ",301],"\"",["T_WHITESPACE"," ",301],".",["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$n",301],["T_WHITESPACE"," ",301],["T_IS_IDENTICAL","===",301],["T_WHITESPACE"," ",301],["T_LNUMBER","1",301],["T_WHITESPACE"," ",301],"?",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'migration was'",301],["T_WHITESPACE"," ",301],":",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'migrations were'",301],")",["T_WHITESPACE"," ",301],".",["T_CONSTANT_ENCAPSED_STRING","\" redone.\\n\"",301],",",["T_WHITESPACE"," ",301],["T_STRING","Console",301],["T_DOUBLE_COLON","::",301],["T_STRING","FG_GREEN",301],")",";",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","stdout",302],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\nMigration redone successfully.\\n\"",302],",",["T_WHITESPACE"," ",302],["T_STRING","Console",302],["T_DOUBLE_COLON","::",302],["T_STRING","FG_GREEN",302],")",";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n\n    ",304],["T_DOC_COMMENT","\/**\n     * Upgrades or downgrades till the specified version.\n     *\n     * Can also downgrade versions to the certain apply time in the past by providing\n     * a UNIX timestamp or a string parseable by the strtotime() function. This means\n     * that all the versions applied after the specified certain time would be reverted.\n     *\n     * This command will first revert the specified migrations, and then apply\n     * them again. For example,\n     *\n     * ```\n     * yii migrate\/to 101129_185401                          # using timestamp\n     * yii migrate\/to m101129_185401_create_user_table       # using full name\n     * yii migrate\/to 1392853618                             # using UNIX timestamp\n     * yii migrate\/to \"2014-02-15 13:00:50\"                  # using strtotime() parseable string\n     * yii migrate\/to app\\migrations\\M101129185401CreateUser # using full namespace name\n     * ```\n     *\n     * @param string $version either the version name or the certain time value in the past\n     * that the application should be migrated to. This can be either the timestamp,\n     * the full name of the migration, the UNIX timestamp, or the parseable datetime\n     * string.\n     * @throws Exception if the version argument is invalid.\n     *\/",306],["T_WHITESPACE","\n    ",329],["T_PUBLIC","public",330],["T_WHITESPACE"," ",330],["T_FUNCTION","function",330],["T_WHITESPACE"," ",330],["T_STRING","actionTo",330],"(",["T_VARIABLE","$version",330],")",["T_WHITESPACE","\n    ",330],"{",["T_WHITESPACE","\n        ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","(",["T_VARIABLE","$namespaceVersion",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","extractNamespaceMigrationVersion",332],"(",["T_VARIABLE","$version",332],")",")",["T_WHITESPACE"," ",332],["T_IS_NOT_IDENTICAL","!==",332],["T_WHITESPACE"," ",332],["T_STRING","false",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n            ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","migrateToVersion",333],"(",["T_VARIABLE","$namespaceVersion",333],")",";",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE"," ",334],["T_ELSEIF","elseif",334],["T_WHITESPACE"," ",334],"(","(",["T_VARIABLE","$migrationName",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","extractMigrationVersion",334],"(",["T_VARIABLE","$version",334],")",")",["T_WHITESPACE"," ",334],["T_IS_NOT_IDENTICAL","!==",334],["T_WHITESPACE"," ",334],["T_STRING","false",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n            ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","migrateToVersion",335],"(",["T_VARIABLE","$migrationName",335],")",";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE"," ",336],["T_ELSEIF","elseif",336],["T_WHITESPACE"," ",336],"(",["T_STRING_CAST","(string)",336],["T_WHITESPACE"," ",336],["T_INT_CAST","(int)",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$version",336],["T_WHITESPACE"," ",336],["T_IS_EQUAL","==",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$version",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","migrateToTime",337],"(",["T_VARIABLE","$version",337],")",";",["T_WHITESPACE","\n        ",337],"}",["T_WHITESPACE"," ",338],["T_ELSEIF","elseif",338],["T_WHITESPACE"," ",338],"(","(",["T_VARIABLE","$time",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","strtotime",338],"(",["T_VARIABLE","$version",338],")",")",["T_WHITESPACE"," ",338],["T_IS_NOT_IDENTICAL","!==",338],["T_WHITESPACE"," ",338],["T_STRING","false",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","migrateToTime",339],"(",["T_VARIABLE","$time",339],")",";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE"," ",340],["T_ELSE","else",340],["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n            ",340],["T_THROW","throw",341],["T_WHITESPACE"," ",341],["T_NEW","new",341],["T_WHITESPACE"," ",341],["T_STRING","Exception",341],"(",["T_CONSTANT_ENCAPSED_STRING","\"The version argument must be either a timestamp (e.g. 101129_185401),\\n the full name of a migration (e.g. m101129_185401_create_user_table),\\n the full namespaced name of a migration (e.g. app\\\\migrations\\\\M101129185401CreateUserTable),\\n a UNIX timestamp (e.g. 1392853000), or a datetime string parseable\\nby the strtotime() function (e.g. 2014-02-15 13:00:50).\"",341],")",";",["T_WHITESPACE","\n        ",341],"}",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_DOC_COMMENT","\/**\n     * Modifies the migration history to the specified version.\n     *\n     * No actual migration will be performed.\n     *\n     * ```\n     * yii migrate\/mark 101129_185401                        # using timestamp\n     * yii migrate\/mark m101129_185401_create_user_table     # using full name\n     * yii migrate\/to app\\migrations\\M101129185401CreateUser # using full namespace name\n     * ```\n     *\n     * @param string $version the version at which the migration history should be marked.\n     * This can be either the timestamp or the full name of the migration.\n     * @return int CLI exit code\n     * @throws Exception if the version argument is invalid or the version cannot be found.\n     *\/",345],["T_WHITESPACE","\n    ",360],["T_PUBLIC","public",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","actionMark",361],"(",["T_VARIABLE","$version",361],")",["T_WHITESPACE","\n    ",361],"{",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$originalVersion",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$version",363],";",["T_WHITESPACE","\n        ",363],["T_IF","if",364],["T_WHITESPACE"," ",364],"(","(",["T_VARIABLE","$namespaceVersion",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","extractNamespaceMigrationVersion",364],"(",["T_VARIABLE","$version",364],")",")",["T_WHITESPACE"," ",364],["T_IS_NOT_IDENTICAL","!==",364],["T_WHITESPACE"," ",364],["T_STRING","false",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n            ",364],["T_VARIABLE","$version",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$namespaceVersion",365],";",["T_WHITESPACE","\n        ",365],"}",["T_WHITESPACE"," ",366],["T_ELSEIF","elseif",366],["T_WHITESPACE"," ",366],"(","(",["T_VARIABLE","$migrationName",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","extractMigrationVersion",366],"(",["T_VARIABLE","$version",366],")",")",["T_WHITESPACE"," ",366],["T_IS_NOT_IDENTICAL","!==",366],["T_WHITESPACE"," ",366],["T_STRING","false",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n            ",366],["T_VARIABLE","$version",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$migrationName",367],";",["T_WHITESPACE","\n        ",367],"}",["T_WHITESPACE"," ",368],["T_ELSE","else",368],["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n            ",368],["T_THROW","throw",369],["T_WHITESPACE"," ",369],["T_NEW","new",369],["T_WHITESPACE"," ",369],["T_STRING","Exception",369],"(",["T_CONSTANT_ENCAPSED_STRING","\"The version argument must be either a timestamp (e.g. 101129_185401)\\nor the full name of a migration (e.g. m101129_185401_create_user_table)\\nor the full name of a namespaced migration (e.g. app\\\\migrations\\\\M101129185401CreateUserTable).\"",369],")",";",["T_WHITESPACE","\n        ",369],"}",["T_WHITESPACE","\n\n        ",370],["T_COMMENT","\/\/ try mark up\n",372],["T_WHITESPACE","        ",373],["T_VARIABLE","$migrations",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getNewMigrations",373],"(",")",";",["T_WHITESPACE","\n        ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$migrations",374],["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$i",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$migration",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n            ",374],["T_IF","if",375],["T_WHITESPACE"," ",375],"(",["T_STRING","strpos",375],"(",["T_VARIABLE","$migration",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$version",375],")",["T_WHITESPACE"," ",375],["T_IS_IDENTICAL","===",375],["T_WHITESPACE"," ",375],["T_LNUMBER","0",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n                ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","confirm",376],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Set migration history at ",376],["T_VARIABLE","$originalVersion",376],["T_ENCAPSED_AND_WHITESPACE","?",376],"\"",")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                    ",376],["T_FOR","for",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$j",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_LNUMBER","0",377],";",["T_WHITESPACE"," ",377],["T_VARIABLE","$j",377],["T_WHITESPACE"," ",377],["T_IS_SMALLER_OR_EQUAL","<=",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$i",377],";",["T_WHITESPACE"," ",377],["T_INC","++",377],["T_VARIABLE","$j",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n                        ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","addMigrationHistory",378],"(",["T_VARIABLE","$migrations",378],"[",["T_VARIABLE","$j",378],"]",")",";",["T_WHITESPACE","\n                    ",378],"}",["T_WHITESPACE","\n                    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","stdout",380],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The migration history is set at ",380],["T_VARIABLE","$originalVersion",380],["T_ENCAPSED_AND_WHITESPACE",".\\nNo actual migration was performed.\\n",380],"\"",",",["T_WHITESPACE"," ",380],["T_STRING","Console",380],["T_DOUBLE_COLON","::",380],["T_STRING","FG_GREEN",380],")",";",["T_WHITESPACE","\n                ",380],"}",["T_WHITESPACE","\n\n                ",381],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_STRING","self",383],["T_DOUBLE_COLON","::",383],["T_STRING","EXIT_CODE_NORMAL",383],";",["T_WHITESPACE","\n            ",383],"}",["T_WHITESPACE","\n        ",384],"}",["T_WHITESPACE","\n\n        ",385],["T_COMMENT","\/\/ try mark down\n",387],["T_WHITESPACE","        ",388],["T_VARIABLE","$migrations",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","array_keys",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getMigrationHistory",388],"(",["T_STRING","null",388],")",")",";",["T_WHITESPACE","\n        ",388],["T_FOREACH","foreach",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$migrations",389],["T_WHITESPACE"," ",389],["T_AS","as",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$i",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$migration",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n            ",389],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_STRING","strpos",390],"(",["T_VARIABLE","$migration",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$version",390],")",["T_WHITESPACE"," ",390],["T_IS_IDENTICAL","===",390],["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n                ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$i",391],["T_WHITESPACE"," ",391],["T_IS_IDENTICAL","===",391],["T_WHITESPACE"," ",391],["T_LNUMBER","0",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n                    ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","stdout",392],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Already at '",392],["T_VARIABLE","$originalVersion",392],["T_ENCAPSED_AND_WHITESPACE","'. Nothing needs to be done.\\n",392],"\"",",",["T_WHITESPACE"," ",392],["T_STRING","Console",392],["T_DOUBLE_COLON","::",392],["T_STRING","FG_YELLOW",392],")",";",["T_WHITESPACE","\n                ",392],"}",["T_WHITESPACE"," ",393],["T_ELSE","else",393],["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n                    ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","confirm",394],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Set migration history at ",394],["T_VARIABLE","$originalVersion",394],["T_ENCAPSED_AND_WHITESPACE","?",394],"\"",")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n                        ",394],["T_FOR","for",395],["T_WHITESPACE"," ",395],"(",["T_VARIABLE","$j",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_LNUMBER","0",395],";",["T_WHITESPACE"," ",395],["T_VARIABLE","$j",395],["T_WHITESPACE"," ",395],"<",["T_WHITESPACE"," ",395],["T_VARIABLE","$i",395],";",["T_WHITESPACE"," ",395],["T_INC","++",395],["T_VARIABLE","$j",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n                            ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","removeMigrationHistory",396],"(",["T_VARIABLE","$migrations",396],"[",["T_VARIABLE","$j",396],"]",")",";",["T_WHITESPACE","\n                        ",396],"}",["T_WHITESPACE","\n                        ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","stdout",398],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The migration history is set at ",398],["T_VARIABLE","$originalVersion",398],["T_ENCAPSED_AND_WHITESPACE",".\\nNo actual migration was performed.\\n",398],"\"",",",["T_WHITESPACE"," ",398],["T_STRING","Console",398],["T_DOUBLE_COLON","::",398],["T_STRING","FG_GREEN",398],")",";",["T_WHITESPACE","\n                    ",398],"}",["T_WHITESPACE","\n                ",399],"}",["T_WHITESPACE","\n\n                ",400],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_STRING","self",402],["T_DOUBLE_COLON","::",402],["T_STRING","EXIT_CODE_NORMAL",402],";",["T_WHITESPACE","\n            ",402],"}",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n\n        ",404],["T_THROW","throw",406],["T_WHITESPACE"," ",406],["T_NEW","new",406],["T_WHITESPACE"," ",406],["T_STRING","Exception",406],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to find the version '",406],["T_VARIABLE","$originalVersion",406],["T_ENCAPSED_AND_WHITESPACE","'.",406],"\"",")",";",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n\n    ",407],["T_DOC_COMMENT","\/**\n     * Checks if given migration version specification matches namespaced migration name.\n     * @param string $rawVersion raw version specification received from user input.\n     * @return string|false actual migration version, `false` - if not match.\n     * @since 2.0.10\n     *\/",409],["T_WHITESPACE","\n    ",414],["T_PRIVATE","private",415],["T_WHITESPACE"," ",415],["T_FUNCTION","function",415],["T_WHITESPACE"," ",415],["T_STRING","extractNamespaceMigrationVersion",415],"(",["T_VARIABLE","$rawVersion",415],")",["T_WHITESPACE","\n    ",415],"{",["T_WHITESPACE","\n        ",416],["T_IF","if",417],["T_WHITESPACE"," ",417],"(",["T_STRING","preg_match",417],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\\\\\\\?([\\w_]+\\\\\\\\)+m(\\d{6}_?\\d{6})(\\D.*)?$\/is'",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$rawVersion",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$matches",417],")",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n            ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_STRING","trim",418],"(",["T_VARIABLE","$rawVersion",418],",",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",418],")",";",["T_WHITESPACE","\n        ",418],"}",["T_WHITESPACE","\n        ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_STRING","false",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n\n    ",421],["T_DOC_COMMENT","\/**\n     * Checks if given migration version specification matches migration base name.\n     * @param string $rawVersion raw version specification received from user input.\n     * @return string|false actual migration version, `false` - if not match.\n     * @since 2.0.10\n     *\/",423],["T_WHITESPACE","\n    ",428],["T_PRIVATE","private",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","extractMigrationVersion",429],"(",["T_VARIABLE","$rawVersion",429],")",["T_WHITESPACE","\n    ",429],"{",["T_WHITESPACE","\n        ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_STRING","preg_match",431],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^m?(\\d{6}_?\\d{6})(\\D.*)?$\/is'",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$rawVersion",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$matches",431],")",")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n            ",431],["T_RETURN","return",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'m'",432],["T_WHITESPACE"," ",432],".",["T_WHITESPACE"," ",432],["T_VARIABLE","$matches",432],"[",["T_LNUMBER","1",432],"]",";",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE","\n        ",433],["T_RETURN","return",434],["T_WHITESPACE"," ",434],["T_STRING","false",434],";",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n\n    ",435],["T_DOC_COMMENT","\/**\n     * Displays the migration history.\n     *\n     * This command will show the list of migrations that have been applied\n     * so far. For example,\n     *\n     * ```\n     * yii migrate\/history     # showing the last 10 migrations\n     * yii migrate\/history 5   # showing the last 5 migrations\n     * yii migrate\/history all # showing the whole history\n     * ```\n     *\n     * @param int $limit the maximum number of migrations to be displayed.\n     * If it is \"all\", the whole migration history will be displayed.\n     * @throws \\yii\\console\\Exception if invalid limit value passed\n     *\/",437],["T_WHITESPACE","\n    ",452],["T_PUBLIC","public",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","actionHistory",453],"(",["T_VARIABLE","$limit",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_LNUMBER","10",453],")",["T_WHITESPACE","\n    ",453],"{",["T_WHITESPACE","\n        ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$limit",455],["T_WHITESPACE"," ",455],["T_IS_IDENTICAL","===",455],["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'all'",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$limit",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_STRING","null",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE"," ",457],["T_ELSE","else",457],["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n            ",457],["T_VARIABLE","$limit",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_INT_CAST","(int)",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$limit",458],";",["T_WHITESPACE","\n            ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$limit",459],["T_WHITESPACE"," ",459],"<",["T_WHITESPACE"," ",459],["T_LNUMBER","1",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                ",459],["T_THROW","throw",460],["T_WHITESPACE"," ",460],["T_NEW","new",460],["T_WHITESPACE"," ",460],["T_STRING","Exception",460],"(",["T_CONSTANT_ENCAPSED_STRING","'The limit must be greater than 0.'",460],")",";",["T_WHITESPACE","\n            ",460],"}",["T_WHITESPACE","\n        ",461],"}",["T_WHITESPACE","\n\n        ",462],["T_VARIABLE","$migrations",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getMigrationHistory",464],"(",["T_VARIABLE","$limit",464],")",";",["T_WHITESPACE","\n\n        ",464],["T_IF","if",466],["T_WHITESPACE"," ",466],"(",["T_EMPTY","empty",466],"(",["T_VARIABLE","$migrations",466],")",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n            ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","stdout",467],"(",["T_CONSTANT_ENCAPSED_STRING","\"No migration has been done before.\\n\"",467],",",["T_WHITESPACE"," ",467],["T_STRING","Console",467],["T_DOUBLE_COLON","::",467],["T_STRING","FG_YELLOW",467],")",";",["T_WHITESPACE","\n        ",467],"}",["T_WHITESPACE"," ",468],["T_ELSE","else",468],["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n            ",468],["T_VARIABLE","$n",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_STRING","count",469],"(",["T_VARIABLE","$migrations",469],")",";",["T_WHITESPACE","\n            ",469],["T_IF","if",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$limit",470],["T_WHITESPACE"," ",470],">",["T_WHITESPACE"," ",470],["T_LNUMBER","0",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n                ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","stdout",471],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Showing the last ",471],["T_VARIABLE","$n",471],["T_ENCAPSED_AND_WHITESPACE"," applied ",471],"\"",["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$n",471],["T_WHITESPACE"," ",471],["T_IS_IDENTICAL","===",471],["T_WHITESPACE"," ",471],["T_LNUMBER","1",471],["T_WHITESPACE"," ",471],"?",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'migration'",471],["T_WHITESPACE"," ",471],":",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'migrations'",471],")",["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","\":\\n\"",471],",",["T_WHITESPACE"," ",471],["T_STRING","Console",471],["T_DOUBLE_COLON","::",471],["T_STRING","FG_YELLOW",471],")",";",["T_WHITESPACE","\n            ",471],"}",["T_WHITESPACE"," ",472],["T_ELSE","else",472],["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n                ",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","stdout",473],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Total ",473],["T_VARIABLE","$n",473],["T_ENCAPSED_AND_WHITESPACE"," ",473],"\"",["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$n",473],["T_WHITESPACE"," ",473],["T_IS_IDENTICAL","===",473],["T_WHITESPACE"," ",473],["T_LNUMBER","1",473],["T_WHITESPACE"," ",473],"?",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'migration has'",473],["T_WHITESPACE"," ",473],":",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'migrations have'",473],")",["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","\" been applied before:\\n\"",473],",",["T_WHITESPACE"," ",473],["T_STRING","Console",473],["T_DOUBLE_COLON","::",473],["T_STRING","FG_YELLOW",473],")",";",["T_WHITESPACE","\n            ",473],"}",["T_WHITESPACE","\n            ",474],["T_FOREACH","foreach",475],["T_WHITESPACE"," ",475],"(",["T_VARIABLE","$migrations",475],["T_WHITESPACE"," ",475],["T_AS","as",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$version",475],["T_WHITESPACE"," ",475],["T_DOUBLE_ARROW","=>",475],["T_WHITESPACE"," ",475],["T_VARIABLE","$time",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n                ",475],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","stdout",476],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\t(\"",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_STRING","date",476],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d H:i:s'",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$time",476],")",["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","') '",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_VARIABLE","$version",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",476],")",";",["T_WHITESPACE","\n            ",476],"}",["T_WHITESPACE","\n        ",477],"}",["T_WHITESPACE","\n    ",478],"}",["T_WHITESPACE","\n\n    ",479],["T_DOC_COMMENT","\/**\n     * Displays the un-applied new migrations.\n     *\n     * This command will show the new migrations that have not been applied.\n     * For example,\n     *\n     * ```\n     * yii migrate\/new     # showing the first 10 new migrations\n     * yii migrate\/new 5   # showing the first 5 new migrations\n     * yii migrate\/new all # showing all new migrations\n     * ```\n     *\n     * @param int $limit the maximum number of new migrations to be displayed.\n     * If it is `all`, all available new migrations will be displayed.\n     * @throws \\yii\\console\\Exception if invalid limit value passed\n     *\/",481],["T_WHITESPACE","\n    ",496],["T_PUBLIC","public",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","actionNew",497],"(",["T_VARIABLE","$limit",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_LNUMBER","10",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_IF","if",499],["T_WHITESPACE"," ",499],"(",["T_VARIABLE","$limit",499],["T_WHITESPACE"," ",499],["T_IS_IDENTICAL","===",499],["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'all'",499],")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n            ",499],["T_VARIABLE","$limit",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_STRING","null",500],";",["T_WHITESPACE","\n        ",500],"}",["T_WHITESPACE"," ",501],["T_ELSE","else",501],["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n            ",501],["T_VARIABLE","$limit",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_INT_CAST","(int)",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$limit",502],";",["T_WHITESPACE","\n            ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$limit",503],["T_WHITESPACE"," ",503],"<",["T_WHITESPACE"," ",503],["T_LNUMBER","1",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n                ",503],["T_THROW","throw",504],["T_WHITESPACE"," ",504],["T_NEW","new",504],["T_WHITESPACE"," ",504],["T_STRING","Exception",504],"(",["T_CONSTANT_ENCAPSED_STRING","'The limit must be greater than 0.'",504],")",";",["T_WHITESPACE","\n            ",504],"}",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n\n        ",506],["T_VARIABLE","$migrations",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","getNewMigrations",508],"(",")",";",["T_WHITESPACE","\n\n        ",508],["T_IF","if",510],["T_WHITESPACE"," ",510],"(",["T_EMPTY","empty",510],"(",["T_VARIABLE","$migrations",510],")",")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n            ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","stdout",511],"(",["T_CONSTANT_ENCAPSED_STRING","\"No new migrations found. Your system is up-to-date.\\n\"",511],",",["T_WHITESPACE"," ",511],["T_STRING","Console",511],["T_DOUBLE_COLON","::",511],["T_STRING","FG_GREEN",511],")",";",["T_WHITESPACE","\n        ",511],"}",["T_WHITESPACE"," ",512],["T_ELSE","else",512],["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n            ",512],["T_VARIABLE","$n",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","count",513],"(",["T_VARIABLE","$migrations",513],")",";",["T_WHITESPACE","\n            ",513],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$limit",514],["T_WHITESPACE"," ",514],["T_BOOLEAN_AND","&&",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$n",514],["T_WHITESPACE"," ",514],">",["T_WHITESPACE"," ",514],["T_VARIABLE","$limit",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                ",514],["T_VARIABLE","$migrations",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING","array_slice",515],"(",["T_VARIABLE","$migrations",515],",",["T_WHITESPACE"," ",515],["T_LNUMBER","0",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$limit",515],")",";",["T_WHITESPACE","\n                ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","stdout",516],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Showing ",516],["T_VARIABLE","$limit",516],["T_ENCAPSED_AND_WHITESPACE"," out of ",516],["T_VARIABLE","$n",516],["T_ENCAPSED_AND_WHITESPACE"," new ",516],"\"",["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$n",516],["T_WHITESPACE"," ",516],["T_IS_IDENTICAL","===",516],["T_WHITESPACE"," ",516],["T_LNUMBER","1",516],["T_WHITESPACE"," ",516],"?",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'migration'",516],["T_WHITESPACE"," ",516],":",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'migrations'",516],")",["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","\":\\n\"",516],",",["T_WHITESPACE"," ",516],["T_STRING","Console",516],["T_DOUBLE_COLON","::",516],["T_STRING","FG_YELLOW",516],")",";",["T_WHITESPACE","\n            ",516],"}",["T_WHITESPACE"," ",517],["T_ELSE","else",517],["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n                ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","stdout",518],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Found ",518],["T_VARIABLE","$n",518],["T_ENCAPSED_AND_WHITESPACE"," new ",518],"\"",["T_WHITESPACE"," ",518],".",["T_WHITESPACE"," ",518],"(",["T_VARIABLE","$n",518],["T_WHITESPACE"," ",518],["T_IS_IDENTICAL","===",518],["T_WHITESPACE"," ",518],["T_LNUMBER","1",518],["T_WHITESPACE"," ",518],"?",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'migration'",518],["T_WHITESPACE"," ",518],":",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'migrations'",518],")",["T_WHITESPACE"," ",518],".",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","\":\\n\"",518],",",["T_WHITESPACE"," ",518],["T_STRING","Console",518],["T_DOUBLE_COLON","::",518],["T_STRING","FG_YELLOW",518],")",";",["T_WHITESPACE","\n            ",518],"}",["T_WHITESPACE","\n\n            ",519],["T_FOREACH","foreach",521],["T_WHITESPACE"," ",521],"(",["T_VARIABLE","$migrations",521],["T_WHITESPACE"," ",521],["T_AS","as",521],["T_WHITESPACE"," ",521],["T_VARIABLE","$migration",521],")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n                ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","stdout",522],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\t\"",522],["T_WHITESPACE"," ",522],".",["T_WHITESPACE"," ",522],["T_VARIABLE","$migration",522],["T_WHITESPACE"," ",522],".",["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",522],")",";",["T_WHITESPACE","\n            ",522],"}",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n\n    ",525],["T_DOC_COMMENT","\/**\n     * Creates a new migration.\n     *\n     * This command creates a new migration using the available migration template.\n     * After using this command, developers should modify the created migration\n     * skeleton by filling up the actual migration logic.\n     *\n     * ```\n     * yii migrate\/create create_user_table\n     * ```\n     *\n     * In order to generate a namespaced migration, you should specify a namespace before the migration's name.\n     * Note that backslash (`\\`) is usually considered a special character in the shell, so you need to escape it\n     * properly to avoid shell errors or incorrect behavior.\n     * For example:\n     *\n     * ```\n     * yii migrate\/create 'app\\\\migrations\\\\createUserTable'\n     * ```\n     *\n     * In case [[migrationPath]] is not set and no namespace is provided, the first entry of [[migrationNamespaces]] will be used.\n     *\n     * @param string $name the name of the new migration. This should only contain\n     * letters, digits, underscores and\/or backslashes.\n     *\n     * Note: If the migration name is of a special form, for example create_xxx or\n     * drop_xxx, then the generated migration file will contain extra code,\n     * in this case for creating\/dropping tables.\n     *\n     * @throws Exception if the name argument is invalid.\n     *\/",527],["T_WHITESPACE","\n    ",557],["T_PUBLIC","public",558],["T_WHITESPACE"," ",558],["T_FUNCTION","function",558],["T_WHITESPACE"," ",558],["T_STRING","actionCreate",558],"(",["T_VARIABLE","$name",558],")",["T_WHITESPACE","\n    ",558],"{",["T_WHITESPACE","\n        ",559],["T_IF","if",560],["T_WHITESPACE"," ",560],"(","!",["T_STRING","preg_match",560],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[\\w\\\\\\\\]+$\/'",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$name",560],")",")",["T_WHITESPACE"," ",560],"{",["T_WHITESPACE","\n            ",560],["T_THROW","throw",561],["T_WHITESPACE"," ",561],["T_NEW","new",561],["T_WHITESPACE"," ",561],["T_STRING","Exception",561],"(",["T_CONSTANT_ENCAPSED_STRING","'The migration name should contain letters, digits, underscore and\/or backslash characters only.'",561],")",";",["T_WHITESPACE","\n        ",561],"}",["T_WHITESPACE","\n\n        ",562],["T_LIST","list",564],"(",["T_VARIABLE","$namespace",564],",",["T_WHITESPACE"," ",564],["T_VARIABLE","$className",564],")",["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","generateClassName",564],"(",["T_VARIABLE","$name",564],")",";",["T_WHITESPACE","\n        ",564],["T_VARIABLE","$migrationPath",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","findMigrationPath",565],"(",["T_VARIABLE","$namespace",565],")",";",["T_WHITESPACE","\n\n        ",565],["T_VARIABLE","$file",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$migrationPath",567],["T_WHITESPACE"," ",567],".",["T_WHITESPACE"," ",567],["T_STRING","DIRECTORY_SEPARATOR",567],["T_WHITESPACE"," ",567],".",["T_WHITESPACE"," ",567],["T_VARIABLE","$className",567],["T_WHITESPACE"," ",567],".",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'.php'",567],";",["T_WHITESPACE","\n        ",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_VARIABLE","$this",568],["T_OBJECT_OPERATOR","->",568],["T_STRING","confirm",568],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Create new migration '",568],["T_VARIABLE","$file",568],["T_ENCAPSED_AND_WHITESPACE","'?",568],"\"",")",")",["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n            ",568],["T_VARIABLE","$content",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","generateMigrationSourceCode",569],"(","[",["T_WHITESPACE","\n                ",569],["T_CONSTANT_ENCAPSED_STRING","'name'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$name",570],",",["T_WHITESPACE","\n                ",570],["T_CONSTANT_ENCAPSED_STRING","'className'",571],["T_WHITESPACE"," ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$className",571],",",["T_WHITESPACE","\n                ",571],["T_CONSTANT_ENCAPSED_STRING","'namespace'",572],["T_WHITESPACE"," ",572],["T_DOUBLE_ARROW","=>",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$namespace",572],",",["T_WHITESPACE","\n            ",572],"]",")",";",["T_WHITESPACE","\n            ",573],["T_STRING","FileHelper",574],["T_DOUBLE_COLON","::",574],["T_STRING","createDirectory",574],"(",["T_VARIABLE","$migrationPath",574],")",";",["T_WHITESPACE","\n            ",574],["T_STRING","file_put_contents",575],"(",["T_VARIABLE","$file",575],",",["T_WHITESPACE"," ",575],["T_VARIABLE","$content",575],")",";",["T_WHITESPACE","\n            ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","stdout",576],"(",["T_CONSTANT_ENCAPSED_STRING","\"New migration created successfully.\\n\"",576],",",["T_WHITESPACE"," ",576],["T_STRING","Console",576],["T_DOUBLE_COLON","::",576],["T_STRING","FG_GREEN",576],")",";",["T_WHITESPACE","\n        ",576],"}",["T_WHITESPACE","\n    ",577],"}",["T_WHITESPACE","\n\n    ",578],["T_DOC_COMMENT","\/**\n     * Generates class base name and namespace from migration name from user input.\n     * @param string $name migration name from user input.\n     * @return array list of 2 elements: 'namespace' and 'class base name'\n     * @since 2.0.10\n     *\/",580],["T_WHITESPACE","\n    ",585],["T_PRIVATE","private",586],["T_WHITESPACE"," ",586],["T_FUNCTION","function",586],["T_WHITESPACE"," ",586],["T_STRING","generateClassName",586],"(",["T_VARIABLE","$name",586],")",["T_WHITESPACE","\n    ",586],"{",["T_WHITESPACE","\n        ",587],["T_VARIABLE","$namespace",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_STRING","null",588],";",["T_WHITESPACE","\n        ",588],["T_VARIABLE","$name",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_STRING","trim",589],"(",["T_VARIABLE","$name",589],",",["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",589],")",";",["T_WHITESPACE","\n        ",589],["T_IF","if",590],["T_WHITESPACE"," ",590],"(",["T_STRING","strpos",590],"(",["T_VARIABLE","$name",590],",",["T_WHITESPACE"," ",590],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",590],")",["T_WHITESPACE"," ",590],["T_IS_NOT_IDENTICAL","!==",590],["T_WHITESPACE"," ",590],["T_STRING","false",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n            ",590],["T_VARIABLE","$namespace",591],["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_STRING","substr",591],"(",["T_VARIABLE","$name",591],",",["T_WHITESPACE"," ",591],["T_LNUMBER","0",591],",",["T_WHITESPACE"," ",591],["T_STRING","strrpos",591],"(",["T_VARIABLE","$name",591],",",["T_WHITESPACE"," ",591],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",591],")",")",";",["T_WHITESPACE","\n            ",591],["T_VARIABLE","$name",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_STRING","substr",592],"(",["T_VARIABLE","$name",592],",",["T_WHITESPACE"," ",592],["T_STRING","strrpos",592],"(",["T_VARIABLE","$name",592],",",["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",592],")",["T_WHITESPACE"," ",592],"+",["T_WHITESPACE"," ",592],["T_LNUMBER","1",592],")",";",["T_WHITESPACE","\n        ",592],"}",["T_WHITESPACE"," ",593],["T_ELSE","else",593],["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n            ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","migrationPath",594],["T_WHITESPACE"," ",594],["T_IS_IDENTICAL","===",594],["T_WHITESPACE"," ",594],["T_STRING","null",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n                ",594],["T_VARIABLE","$migrationNamespaces",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","migrationNamespaces",595],";",["T_WHITESPACE","\n                ",595],["T_VARIABLE","$namespace",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_STRING","array_shift",596],"(",["T_VARIABLE","$migrationNamespaces",596],")",";",["T_WHITESPACE","\n            ",596],"}",["T_WHITESPACE","\n        ",597],"}",["T_WHITESPACE","\n\n        ",598],["T_IF","if",600],["T_WHITESPACE"," ",600],"(",["T_VARIABLE","$namespace",600],["T_WHITESPACE"," ",600],["T_IS_IDENTICAL","===",600],["T_WHITESPACE"," ",600],["T_STRING","null",600],")",["T_WHITESPACE"," ",600],"{",["T_WHITESPACE","\n            ",600],["T_VARIABLE","$class",601],["T_WHITESPACE"," ",601],"=",["T_WHITESPACE"," ",601],["T_CONSTANT_ENCAPSED_STRING","'m'",601],["T_WHITESPACE"," ",601],".",["T_WHITESPACE"," ",601],["T_STRING","gmdate",601],"(",["T_CONSTANT_ENCAPSED_STRING","'ymd_His'",601],")",["T_WHITESPACE"," ",601],".",["T_WHITESPACE"," ",601],["T_CONSTANT_ENCAPSED_STRING","'_'",601],["T_WHITESPACE"," ",601],".",["T_WHITESPACE"," ",601],["T_VARIABLE","$name",601],";",["T_WHITESPACE","\n        ",601],"}",["T_WHITESPACE"," ",602],["T_ELSE","else",602],["T_WHITESPACE"," ",602],"{",["T_WHITESPACE","\n            ",602],["T_VARIABLE","$class",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_CONSTANT_ENCAPSED_STRING","'M'",603],["T_WHITESPACE"," ",603],".",["T_WHITESPACE"," ",603],["T_STRING","gmdate",603],"(",["T_CONSTANT_ENCAPSED_STRING","'ymdHis'",603],")",["T_WHITESPACE"," ",603],".",["T_WHITESPACE"," ",603],["T_STRING","ucfirst",603],"(",["T_VARIABLE","$name",603],")",";",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n\n        ",604],["T_RETURN","return",606],["T_WHITESPACE"," ",606],"[",["T_VARIABLE","$namespace",606],",",["T_WHITESPACE"," ",606],["T_VARIABLE","$class",606],"]",";",["T_WHITESPACE","\n    ",606],"}",["T_WHITESPACE","\n\n    ",607],["T_DOC_COMMENT","\/**\n     * Finds the file path for the specified migration namespace.\n     * @param string|null $namespace migration namespace.\n     * @return string migration file path.\n     * @throws Exception on failure.\n     * @since 2.0.10\n     *\/",609],["T_WHITESPACE","\n    ",615],["T_PRIVATE","private",616],["T_WHITESPACE"," ",616],["T_FUNCTION","function",616],["T_WHITESPACE"," ",616],["T_STRING","findMigrationPath",616],"(",["T_VARIABLE","$namespace",616],")",["T_WHITESPACE","\n    ",616],"{",["T_WHITESPACE","\n        ",617],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_EMPTY","empty",618],"(",["T_VARIABLE","$namespace",618],")",")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n            ",618],["T_RETURN","return",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","migrationPath",619],";",["T_WHITESPACE","\n        ",619],"}",["T_WHITESPACE","\n\n        ",620],["T_IF","if",622],["T_WHITESPACE"," ",622],"(","!",["T_STRING","in_array",622],"(",["T_VARIABLE","$namespace",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","migrationNamespaces",622],",",["T_WHITESPACE"," ",622],["T_STRING","true",622],")",")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n            ",622],["T_THROW","throw",623],["T_WHITESPACE"," ",623],["T_NEW","new",623],["T_WHITESPACE"," ",623],["T_STRING","Exception",623],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Namespace '",623],["T_CURLY_OPEN","{",623],["T_VARIABLE","$namespace",623],"}",["T_ENCAPSED_AND_WHITESPACE","' not found in `migrationNamespaces`",623],"\"",")",";",["T_WHITESPACE","\n        ",623],"}",["T_WHITESPACE","\n\n        ",624],["T_RETURN","return",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","getNamespacePath",626],"(",["T_VARIABLE","$namespace",626],")",";",["T_WHITESPACE","\n    ",626],"}",["T_WHITESPACE","\n\n    ",627],["T_DOC_COMMENT","\/**\n     * Returns the file path matching the give namespace.\n     * @param string $namespace namespace.\n     * @return string file path.\n     * @since 2.0.10\n     *\/",629],["T_WHITESPACE","\n    ",634],["T_PRIVATE","private",635],["T_WHITESPACE"," ",635],["T_FUNCTION","function",635],["T_WHITESPACE"," ",635],["T_STRING","getNamespacePath",635],"(",["T_VARIABLE","$namespace",635],")",["T_WHITESPACE","\n    ",635],"{",["T_WHITESPACE","\n        ",636],["T_RETURN","return",637],["T_WHITESPACE"," ",637],["T_STRING","str_replace",637],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",637],",",["T_WHITESPACE"," ",637],["T_STRING","DIRECTORY_SEPARATOR",637],",",["T_WHITESPACE"," ",637],["T_STRING","Yii",637],["T_DOUBLE_COLON","::",637],["T_STRING","getAlias",637],"(",["T_CONSTANT_ENCAPSED_STRING","'@'",637],["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_STRING","str_replace",637],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'\/'",637],",",["T_WHITESPACE"," ",637],["T_VARIABLE","$namespace",637],")",")",")",";",["T_WHITESPACE","\n    ",637],"}",["T_WHITESPACE","\n\n    ",638],["T_DOC_COMMENT","\/**\n     * Upgrades with the specified migration class.\n     * @param string $class the migration class name\n     * @return bool whether the migration is successful\n     *\/",640],["T_WHITESPACE","\n    ",644],["T_PROTECTED","protected",645],["T_WHITESPACE"," ",645],["T_FUNCTION","function",645],["T_WHITESPACE"," ",645],["T_STRING","migrateUp",645],"(",["T_VARIABLE","$class",645],")",["T_WHITESPACE","\n    ",645],"{",["T_WHITESPACE","\n        ",646],["T_IF","if",647],["T_WHITESPACE"," ",647],"(",["T_VARIABLE","$class",647],["T_WHITESPACE"," ",647],["T_IS_IDENTICAL","===",647],["T_WHITESPACE"," ",647],["T_STRING","self",647],["T_DOUBLE_COLON","::",647],["T_STRING","BASE_MIGRATION",647],")",["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n            ",647],["T_RETURN","return",648],["T_WHITESPACE"," ",648],["T_STRING","true",648],";",["T_WHITESPACE","\n        ",648],"}",["T_WHITESPACE","\n\n        ",649],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","stdout",651],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** applying ",651],["T_VARIABLE","$class",651],["T_ENCAPSED_AND_WHITESPACE","\\n",651],"\"",",",["T_WHITESPACE"," ",651],["T_STRING","Console",651],["T_DOUBLE_COLON","::",651],["T_STRING","FG_YELLOW",651],")",";",["T_WHITESPACE","\n        ",651],["T_VARIABLE","$start",652],["T_WHITESPACE"," ",652],"=",["T_WHITESPACE"," ",652],["T_STRING","microtime",652],"(",["T_STRING","true",652],")",";",["T_WHITESPACE","\n        ",652],["T_VARIABLE","$migration",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","createMigration",653],"(",["T_VARIABLE","$class",653],")",";",["T_WHITESPACE","\n        ",653],["T_IF","if",654],["T_WHITESPACE"," ",654],"(",["T_VARIABLE","$migration",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","up",654],"(",")",["T_WHITESPACE"," ",654],["T_IS_NOT_IDENTICAL","!==",654],["T_WHITESPACE"," ",654],["T_STRING","false",654],")",["T_WHITESPACE"," ",654],"{",["T_WHITESPACE","\n            ",654],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","addMigrationHistory",655],"(",["T_VARIABLE","$class",655],")",";",["T_WHITESPACE","\n            ",655],["T_VARIABLE","$time",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_STRING","microtime",656],"(",["T_STRING","true",656],")",["T_WHITESPACE"," ",656],"-",["T_WHITESPACE"," ",656],["T_VARIABLE","$start",656],";",["T_WHITESPACE","\n            ",656],["T_VARIABLE","$this",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","stdout",657],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** applied ",657],["T_VARIABLE","$class",657],["T_ENCAPSED_AND_WHITESPACE"," (time: ",657],"\"",["T_WHITESPACE"," ",657],".",["T_WHITESPACE"," ",657],["T_STRING","sprintf",657],"(",["T_CONSTANT_ENCAPSED_STRING","'%.3f'",657],",",["T_WHITESPACE"," ",657],["T_VARIABLE","$time",657],")",["T_WHITESPACE"," ",657],".",["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","\"s)\\n\\n\"",657],",",["T_WHITESPACE"," ",657],["T_STRING","Console",657],["T_DOUBLE_COLON","::",657],["T_STRING","FG_GREEN",657],")",";",["T_WHITESPACE","\n\n            ",657],["T_RETURN","return",659],["T_WHITESPACE"," ",659],["T_STRING","true",659],";",["T_WHITESPACE","\n        ",659],"}",["T_WHITESPACE"," ",660],["T_ELSE","else",660],["T_WHITESPACE"," ",660],"{",["T_WHITESPACE","\n            ",660],["T_VARIABLE","$time",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_STRING","microtime",661],"(",["T_STRING","true",661],")",["T_WHITESPACE"," ",661],"-",["T_WHITESPACE"," ",661],["T_VARIABLE","$start",661],";",["T_WHITESPACE","\n            ",661],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","stdout",662],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** failed to apply ",662],["T_VARIABLE","$class",662],["T_ENCAPSED_AND_WHITESPACE"," (time: ",662],"\"",["T_WHITESPACE"," ",662],".",["T_WHITESPACE"," ",662],["T_STRING","sprintf",662],"(",["T_CONSTANT_ENCAPSED_STRING","'%.3f'",662],",",["T_WHITESPACE"," ",662],["T_VARIABLE","$time",662],")",["T_WHITESPACE"," ",662],".",["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","\"s)\\n\\n\"",662],",",["T_WHITESPACE"," ",662],["T_STRING","Console",662],["T_DOUBLE_COLON","::",662],["T_STRING","FG_RED",662],")",";",["T_WHITESPACE","\n\n            ",662],["T_RETURN","return",664],["T_WHITESPACE"," ",664],["T_STRING","false",664],";",["T_WHITESPACE","\n        ",664],"}",["T_WHITESPACE","\n    ",665],"}",["T_WHITESPACE","\n\n    ",666],["T_DOC_COMMENT","\/**\n     * Downgrades with the specified migration class.\n     * @param string $class the migration class name\n     * @return bool whether the migration is successful\n     *\/",668],["T_WHITESPACE","\n    ",672],["T_PROTECTED","protected",673],["T_WHITESPACE"," ",673],["T_FUNCTION","function",673],["T_WHITESPACE"," ",673],["T_STRING","migrateDown",673],"(",["T_VARIABLE","$class",673],")",["T_WHITESPACE","\n    ",673],"{",["T_WHITESPACE","\n        ",674],["T_IF","if",675],["T_WHITESPACE"," ",675],"(",["T_VARIABLE","$class",675],["T_WHITESPACE"," ",675],["T_IS_IDENTICAL","===",675],["T_WHITESPACE"," ",675],["T_STRING","self",675],["T_DOUBLE_COLON","::",675],["T_STRING","BASE_MIGRATION",675],")",["T_WHITESPACE"," ",675],"{",["T_WHITESPACE","\n            ",675],["T_RETURN","return",676],["T_WHITESPACE"," ",676],["T_STRING","true",676],";",["T_WHITESPACE","\n        ",676],"}",["T_WHITESPACE","\n\n        ",677],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","stdout",679],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** reverting ",679],["T_VARIABLE","$class",679],["T_ENCAPSED_AND_WHITESPACE","\\n",679],"\"",",",["T_WHITESPACE"," ",679],["T_STRING","Console",679],["T_DOUBLE_COLON","::",679],["T_STRING","FG_YELLOW",679],")",";",["T_WHITESPACE","\n        ",679],["T_VARIABLE","$start",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_STRING","microtime",680],"(",["T_STRING","true",680],")",";",["T_WHITESPACE","\n        ",680],["T_VARIABLE","$migration",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","createMigration",681],"(",["T_VARIABLE","$class",681],")",";",["T_WHITESPACE","\n        ",681],["T_IF","if",682],["T_WHITESPACE"," ",682],"(",["T_VARIABLE","$migration",682],["T_OBJECT_OPERATOR","->",682],["T_STRING","down",682],"(",")",["T_WHITESPACE"," ",682],["T_IS_NOT_IDENTICAL","!==",682],["T_WHITESPACE"," ",682],["T_STRING","false",682],")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n            ",682],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","removeMigrationHistory",683],"(",["T_VARIABLE","$class",683],")",";",["T_WHITESPACE","\n            ",683],["T_VARIABLE","$time",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_STRING","microtime",684],"(",["T_STRING","true",684],")",["T_WHITESPACE"," ",684],"-",["T_WHITESPACE"," ",684],["T_VARIABLE","$start",684],";",["T_WHITESPACE","\n            ",684],["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","stdout",685],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** reverted ",685],["T_VARIABLE","$class",685],["T_ENCAPSED_AND_WHITESPACE"," (time: ",685],"\"",["T_WHITESPACE"," ",685],".",["T_WHITESPACE"," ",685],["T_STRING","sprintf",685],"(",["T_CONSTANT_ENCAPSED_STRING","'%.3f'",685],",",["T_WHITESPACE"," ",685],["T_VARIABLE","$time",685],")",["T_WHITESPACE"," ",685],".",["T_WHITESPACE"," ",685],["T_CONSTANT_ENCAPSED_STRING","\"s)\\n\\n\"",685],",",["T_WHITESPACE"," ",685],["T_STRING","Console",685],["T_DOUBLE_COLON","::",685],["T_STRING","FG_GREEN",685],")",";",["T_WHITESPACE","\n\n            ",685],["T_RETURN","return",687],["T_WHITESPACE"," ",687],["T_STRING","true",687],";",["T_WHITESPACE","\n        ",687],"}",["T_WHITESPACE"," ",688],["T_ELSE","else",688],["T_WHITESPACE"," ",688],"{",["T_WHITESPACE","\n            ",688],["T_VARIABLE","$time",689],["T_WHITESPACE"," ",689],"=",["T_WHITESPACE"," ",689],["T_STRING","microtime",689],"(",["T_STRING","true",689],")",["T_WHITESPACE"," ",689],"-",["T_WHITESPACE"," ",689],["T_VARIABLE","$start",689],";",["T_WHITESPACE","\n            ",689],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","stdout",690],"(","\"",["T_ENCAPSED_AND_WHITESPACE","*** failed to revert ",690],["T_VARIABLE","$class",690],["T_ENCAPSED_AND_WHITESPACE"," (time: ",690],"\"",["T_WHITESPACE"," ",690],".",["T_WHITESPACE"," ",690],["T_STRING","sprintf",690],"(",["T_CONSTANT_ENCAPSED_STRING","'%.3f'",690],",",["T_WHITESPACE"," ",690],["T_VARIABLE","$time",690],")",["T_WHITESPACE"," ",690],".",["T_WHITESPACE"," ",690],["T_CONSTANT_ENCAPSED_STRING","\"s)\\n\\n\"",690],",",["T_WHITESPACE"," ",690],["T_STRING","Console",690],["T_DOUBLE_COLON","::",690],["T_STRING","FG_RED",690],")",";",["T_WHITESPACE","\n\n            ",690],["T_RETURN","return",692],["T_WHITESPACE"," ",692],["T_STRING","false",692],";",["T_WHITESPACE","\n        ",692],"}",["T_WHITESPACE","\n    ",693],"}",["T_WHITESPACE","\n\n    ",694],["T_DOC_COMMENT","\/**\n     * Creates a new migration instance.\n     * @param string $class the migration class name\n     * @return \\yii\\db\\MigrationInterface the migration instance\n     *\/",696],["T_WHITESPACE","\n    ",700],["T_PROTECTED","protected",701],["T_WHITESPACE"," ",701],["T_FUNCTION","function",701],["T_WHITESPACE"," ",701],["T_STRING","createMigration",701],"(",["T_VARIABLE","$class",701],")",["T_WHITESPACE","\n    ",701],"{",["T_WHITESPACE","\n        ",702],["T_VARIABLE","$class",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],["T_STRING","trim",703],"(",["T_VARIABLE","$class",703],",",["T_WHITESPACE"," ",703],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",703],")",";",["T_WHITESPACE","\n        ",703],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_STRING","strpos",704],"(",["T_VARIABLE","$class",704],",",["T_WHITESPACE"," ",704],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",704],")",["T_WHITESPACE"," ",704],["T_IS_IDENTICAL","===",704],["T_WHITESPACE"," ",704],["T_STRING","false",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n            ",704],["T_VARIABLE","$file",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","migrationPath",705],["T_WHITESPACE"," ",705],".",["T_WHITESPACE"," ",705],["T_STRING","DIRECTORY_SEPARATOR",705],["T_WHITESPACE"," ",705],".",["T_WHITESPACE"," ",705],["T_VARIABLE","$class",705],["T_WHITESPACE"," ",705],".",["T_WHITESPACE"," ",705],["T_CONSTANT_ENCAPSED_STRING","'.php'",705],";",["T_WHITESPACE","\n            ",705],["T_REQUIRE_ONCE","require_once",706],"(",["T_VARIABLE","$file",706],")",";",["T_WHITESPACE","\n        ",706],"}",["T_WHITESPACE","\n\n        ",707],["T_RETURN","return",709],["T_WHITESPACE"," ",709],["T_NEW","new",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$class",709],"(",")",";",["T_WHITESPACE","\n    ",709],"}",["T_WHITESPACE","\n\n    ",710],["T_DOC_COMMENT","\/**\n     * Migrates to the specified apply time in the past.\n     * @param int $time UNIX timestamp value.\n     *\/",712],["T_WHITESPACE","\n    ",715],["T_PROTECTED","protected",716],["T_WHITESPACE"," ",716],["T_FUNCTION","function",716],["T_WHITESPACE"," ",716],["T_STRING","migrateToTime",716],"(",["T_VARIABLE","$time",716],")",["T_WHITESPACE","\n    ",716],"{",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$count",718],["T_WHITESPACE"," ",718],"=",["T_WHITESPACE"," ",718],["T_LNUMBER","0",718],";",["T_WHITESPACE","\n        ",718],["T_VARIABLE","$migrations",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],["T_STRING","array_values",719],"(",["T_VARIABLE","$this",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","getMigrationHistory",719],"(",["T_STRING","null",719],")",")",";",["T_WHITESPACE","\n        ",719],["T_WHILE","while",720],["T_WHITESPACE"," ",720],"(",["T_VARIABLE","$count",720],["T_WHITESPACE"," ",720],"<",["T_WHITESPACE"," ",720],["T_STRING","count",720],"(",["T_VARIABLE","$migrations",720],")",["T_WHITESPACE"," ",720],["T_BOOLEAN_AND","&&",720],["T_WHITESPACE"," ",720],["T_VARIABLE","$migrations",720],"[",["T_VARIABLE","$count",720],"]",["T_WHITESPACE"," ",720],">",["T_WHITESPACE"," ",720],["T_VARIABLE","$time",720],")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n            ",720],["T_INC","++",721],["T_VARIABLE","$count",721],";",["T_WHITESPACE","\n        ",721],"}",["T_WHITESPACE","\n        ",722],["T_IF","if",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$count",723],["T_WHITESPACE"," ",723],["T_IS_IDENTICAL","===",723],["T_WHITESPACE"," ",723],["T_LNUMBER","0",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","stdout",724],"(",["T_CONSTANT_ENCAPSED_STRING","\"Nothing needs to be done.\\n\"",724],",",["T_WHITESPACE"," ",724],["T_STRING","Console",724],["T_DOUBLE_COLON","::",724],["T_STRING","FG_GREEN",724],")",";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE"," ",725],["T_ELSE","else",725],["T_WHITESPACE"," ",725],"{",["T_WHITESPACE","\n            ",725],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","actionDown",726],"(",["T_VARIABLE","$count",726],")",";",["T_WHITESPACE","\n        ",726],"}",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_DOC_COMMENT","\/**\n     * Migrates to the certain version.\n     * @param string $version name in the full format.\n     * @return int CLI exit code\n     * @throws Exception if the provided version cannot be found.\n     *\/",730],["T_WHITESPACE","\n    ",735],["T_PROTECTED","protected",736],["T_WHITESPACE"," ",736],["T_FUNCTION","function",736],["T_WHITESPACE"," ",736],["T_STRING","migrateToVersion",736],"(",["T_VARIABLE","$version",736],")",["T_WHITESPACE","\n    ",736],"{",["T_WHITESPACE","\n        ",737],["T_VARIABLE","$originalVersion",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$version",738],";",["T_WHITESPACE","\n\n        ",738],["T_COMMENT","\/\/ try migrate up\n",740],["T_WHITESPACE","        ",741],["T_VARIABLE","$migrations",741],["T_WHITESPACE"," ",741],"=",["T_WHITESPACE"," ",741],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","getNewMigrations",741],"(",")",";",["T_WHITESPACE","\n        ",741],["T_FOREACH","foreach",742],["T_WHITESPACE"," ",742],"(",["T_VARIABLE","$migrations",742],["T_WHITESPACE"," ",742],["T_AS","as",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$i",742],["T_WHITESPACE"," ",742],["T_DOUBLE_ARROW","=>",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$migration",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n            ",742],["T_IF","if",743],["T_WHITESPACE"," ",743],"(",["T_STRING","strpos",743],"(",["T_VARIABLE","$migration",743],",",["T_WHITESPACE"," ",743],["T_VARIABLE","$version",743],")",["T_WHITESPACE"," ",743],["T_IS_IDENTICAL","===",743],["T_WHITESPACE"," ",743],["T_LNUMBER","0",743],")",["T_WHITESPACE"," ",743],"{",["T_WHITESPACE","\n                ",743],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","actionUp",744],"(",["T_VARIABLE","$i",744],["T_WHITESPACE"," ",744],"+",["T_WHITESPACE"," ",744],["T_LNUMBER","1",744],")",";",["T_WHITESPACE","\n\n                ",744],["T_RETURN","return",746],["T_WHITESPACE"," ",746],["T_STRING","self",746],["T_DOUBLE_COLON","::",746],["T_STRING","EXIT_CODE_NORMAL",746],";",["T_WHITESPACE","\n            ",746],"}",["T_WHITESPACE","\n        ",747],"}",["T_WHITESPACE","\n\n        ",748],["T_COMMENT","\/\/ try migrate down\n",750],["T_WHITESPACE","        ",751],["T_VARIABLE","$migrations",751],["T_WHITESPACE"," ",751],"=",["T_WHITESPACE"," ",751],["T_STRING","array_keys",751],"(",["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","getMigrationHistory",751],"(",["T_STRING","null",751],")",")",";",["T_WHITESPACE","\n        ",751],["T_FOREACH","foreach",752],["T_WHITESPACE"," ",752],"(",["T_VARIABLE","$migrations",752],["T_WHITESPACE"," ",752],["T_AS","as",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$i",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$migration",752],")",["T_WHITESPACE"," ",752],"{",["T_WHITESPACE","\n            ",752],["T_IF","if",753],["T_WHITESPACE"," ",753],"(",["T_STRING","strpos",753],"(",["T_VARIABLE","$migration",753],",",["T_WHITESPACE"," ",753],["T_VARIABLE","$version",753],")",["T_WHITESPACE"," ",753],["T_IS_IDENTICAL","===",753],["T_WHITESPACE"," ",753],["T_LNUMBER","0",753],")",["T_WHITESPACE"," ",753],"{",["T_WHITESPACE","\n                ",753],["T_IF","if",754],["T_WHITESPACE"," ",754],"(",["T_VARIABLE","$i",754],["T_WHITESPACE"," ",754],["T_IS_IDENTICAL","===",754],["T_WHITESPACE"," ",754],["T_LNUMBER","0",754],")",["T_WHITESPACE"," ",754],"{",["T_WHITESPACE","\n                    ",754],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","stdout",755],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Already at '",755],["T_VARIABLE","$originalVersion",755],["T_ENCAPSED_AND_WHITESPACE","'. Nothing needs to be done.\\n",755],"\"",",",["T_WHITESPACE"," ",755],["T_STRING","Console",755],["T_DOUBLE_COLON","::",755],["T_STRING","FG_YELLOW",755],")",";",["T_WHITESPACE","\n                ",755],"}",["T_WHITESPACE"," ",756],["T_ELSE","else",756],["T_WHITESPACE"," ",756],"{",["T_WHITESPACE","\n                    ",756],["T_VARIABLE","$this",757],["T_OBJECT_OPERATOR","->",757],["T_STRING","actionDown",757],"(",["T_VARIABLE","$i",757],")",";",["T_WHITESPACE","\n                ",757],"}",["T_WHITESPACE","\n\n                ",758],["T_RETURN","return",760],["T_WHITESPACE"," ",760],["T_STRING","self",760],["T_DOUBLE_COLON","::",760],["T_STRING","EXIT_CODE_NORMAL",760],";",["T_WHITESPACE","\n            ",760],"}",["T_WHITESPACE","\n        ",761],"}",["T_WHITESPACE","\n\n        ",762],["T_THROW","throw",764],["T_WHITESPACE"," ",764],["T_NEW","new",764],["T_WHITESPACE"," ",764],["T_STRING","Exception",764],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to find the version '",764],["T_VARIABLE","$originalVersion",764],["T_ENCAPSED_AND_WHITESPACE","'.",764],"\"",")",";",["T_WHITESPACE","\n    ",764],"}",["T_WHITESPACE","\n\n    ",765],["T_DOC_COMMENT","\/**\n     * Returns the migrations that are not applied.\n     * @return array list of new migrations\n     *\/",767],["T_WHITESPACE","\n    ",770],["T_PROTECTED","protected",771],["T_WHITESPACE"," ",771],["T_FUNCTION","function",771],["T_WHITESPACE"," ",771],["T_STRING","getNewMigrations",771],"(",")",["T_WHITESPACE","\n    ",771],"{",["T_WHITESPACE","\n        ",772],["T_VARIABLE","$applied",773],["T_WHITESPACE"," ",773],"=",["T_WHITESPACE"," ",773],"[","]",";",["T_WHITESPACE","\n        ",773],["T_FOREACH","foreach",774],["T_WHITESPACE"," ",774],"(",["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","getMigrationHistory",774],"(",["T_STRING","null",774],")",["T_WHITESPACE"," ",774],["T_AS","as",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$class",774],["T_WHITESPACE"," ",774],["T_DOUBLE_ARROW","=>",774],["T_WHITESPACE"," ",774],["T_VARIABLE","$time",774],")",["T_WHITESPACE"," ",774],"{",["T_WHITESPACE","\n            ",774],["T_VARIABLE","$applied",775],"[",["T_STRING","trim",775],"(",["T_VARIABLE","$class",775],",",["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",775],")","]",["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],["T_STRING","true",775],";",["T_WHITESPACE","\n        ",775],"}",["T_WHITESPACE","\n\n        ",776],["T_VARIABLE","$migrationPaths",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],"[","]",";",["T_WHITESPACE","\n        ",778],["T_IF","if",779],["T_WHITESPACE"," ",779],"(","!",["T_EMPTY","empty",779],"(",["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","migrationPath",779],")",")",["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n            ",779],["T_VARIABLE","$migrationPaths",780],"[",["T_CONSTANT_ENCAPSED_STRING","''",780],"]",["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","migrationPath",780],";",["T_WHITESPACE","\n        ",780],"}",["T_WHITESPACE","\n        ",781],["T_FOREACH","foreach",782],["T_WHITESPACE"," ",782],"(",["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","migrationNamespaces",782],["T_WHITESPACE"," ",782],["T_AS","as",782],["T_WHITESPACE"," ",782],["T_VARIABLE","$namespace",782],")",["T_WHITESPACE"," ",782],"{",["T_WHITESPACE","\n            ",782],["T_VARIABLE","$migrationPaths",783],"[",["T_VARIABLE","$namespace",783],"]",["T_WHITESPACE"," ",783],"=",["T_WHITESPACE"," ",783],["T_VARIABLE","$this",783],["T_OBJECT_OPERATOR","->",783],["T_STRING","getNamespacePath",783],"(",["T_VARIABLE","$namespace",783],")",";",["T_WHITESPACE","\n        ",783],"}",["T_WHITESPACE","\n\n        ",784],["T_VARIABLE","$migrations",786],["T_WHITESPACE"," ",786],"=",["T_WHITESPACE"," ",786],"[","]",";",["T_WHITESPACE","\n        ",786],["T_FOREACH","foreach",787],["T_WHITESPACE"," ",787],"(",["T_VARIABLE","$migrationPaths",787],["T_WHITESPACE"," ",787],["T_AS","as",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$namespace",787],["T_WHITESPACE"," ",787],["T_DOUBLE_ARROW","=>",787],["T_WHITESPACE"," ",787],["T_VARIABLE","$migrationPath",787],")",["T_WHITESPACE"," ",787],"{",["T_WHITESPACE","\n            ",787],["T_IF","if",788],["T_WHITESPACE"," ",788],"(","!",["T_STRING","file_exists",788],"(",["T_VARIABLE","$migrationPath",788],")",")",["T_WHITESPACE"," ",788],"{",["T_WHITESPACE","\n                ",788],["T_CONTINUE","continue",789],";",["T_WHITESPACE","\n            ",789],"}",["T_WHITESPACE","\n            ",790],["T_VARIABLE","$handle",791],["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_STRING","opendir",791],"(",["T_VARIABLE","$migrationPath",791],")",";",["T_WHITESPACE","\n            ",791],["T_WHILE","while",792],["T_WHITESPACE"," ",792],"(","(",["T_VARIABLE","$file",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_STRING","readdir",792],"(",["T_VARIABLE","$handle",792],")",")",["T_WHITESPACE"," ",792],["T_IS_NOT_IDENTICAL","!==",792],["T_WHITESPACE"," ",792],["T_STRING","false",792],")",["T_WHITESPACE"," ",792],"{",["T_WHITESPACE","\n                ",792],["T_IF","if",793],["T_WHITESPACE"," ",793],"(",["T_VARIABLE","$file",793],["T_WHITESPACE"," ",793],["T_IS_IDENTICAL","===",793],["T_WHITESPACE"," ",793],["T_CONSTANT_ENCAPSED_STRING","'.'",793],["T_WHITESPACE"," ",793],["T_BOOLEAN_OR","||",793],["T_WHITESPACE"," ",793],["T_VARIABLE","$file",793],["T_WHITESPACE"," ",793],["T_IS_IDENTICAL","===",793],["T_WHITESPACE"," ",793],["T_CONSTANT_ENCAPSED_STRING","'..'",793],")",["T_WHITESPACE"," ",793],"{",["T_WHITESPACE","\n                    ",793],["T_CONTINUE","continue",794],";",["T_WHITESPACE","\n                ",794],"}",["T_WHITESPACE","\n                ",795],["T_VARIABLE","$path",796],["T_WHITESPACE"," ",796],"=",["T_WHITESPACE"," ",796],["T_VARIABLE","$migrationPath",796],["T_WHITESPACE"," ",796],".",["T_WHITESPACE"," ",796],["T_STRING","DIRECTORY_SEPARATOR",796],["T_WHITESPACE"," ",796],".",["T_WHITESPACE"," ",796],["T_VARIABLE","$file",796],";",["T_WHITESPACE","\n                ",796],["T_IF","if",797],["T_WHITESPACE"," ",797],"(",["T_STRING","preg_match",797],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(m(\\d{6}_?\\d{6})\\D.*?)\\.php$\/is'",797],",",["T_WHITESPACE"," ",797],["T_VARIABLE","$file",797],",",["T_WHITESPACE"," ",797],["T_VARIABLE","$matches",797],")",["T_WHITESPACE"," ",797],["T_BOOLEAN_AND","&&",797],["T_WHITESPACE"," ",797],["T_STRING","is_file",797],"(",["T_VARIABLE","$path",797],")",")",["T_WHITESPACE"," ",797],"{",["T_WHITESPACE","\n                    ",797],["T_VARIABLE","$class",798],["T_WHITESPACE"," ",798],"=",["T_WHITESPACE"," ",798],["T_VARIABLE","$matches",798],"[",["T_LNUMBER","1",798],"]",";",["T_WHITESPACE","\n                    ",798],["T_IF","if",799],["T_WHITESPACE"," ",799],"(","!",["T_EMPTY","empty",799],"(",["T_VARIABLE","$namespace",799],")",")",["T_WHITESPACE"," ",799],"{",["T_WHITESPACE","\n                        ",799],["T_VARIABLE","$class",800],["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_VARIABLE","$namespace",800],["T_WHITESPACE"," ",800],".",["T_WHITESPACE"," ",800],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",800],["T_WHITESPACE"," ",800],".",["T_WHITESPACE"," ",800],["T_VARIABLE","$class",800],";",["T_WHITESPACE","\n                    ",800],"}",["T_WHITESPACE","\n                    ",801],["T_VARIABLE","$time",802],["T_WHITESPACE"," ",802],"=",["T_WHITESPACE"," ",802],["T_STRING","str_replace",802],"(",["T_CONSTANT_ENCAPSED_STRING","'_'",802],",",["T_WHITESPACE"," ",802],["T_CONSTANT_ENCAPSED_STRING","''",802],",",["T_WHITESPACE"," ",802],["T_VARIABLE","$matches",802],"[",["T_LNUMBER","2",802],"]",")",";",["T_WHITESPACE","\n                    ",802],["T_IF","if",803],["T_WHITESPACE"," ",803],"(","!",["T_ISSET","isset",803],"(",["T_VARIABLE","$applied",803],"[",["T_VARIABLE","$class",803],"]",")",")",["T_WHITESPACE"," ",803],"{",["T_WHITESPACE","\n                        ",803],["T_VARIABLE","$migrations",804],"[",["T_VARIABLE","$time",804],["T_WHITESPACE"," ",804],".",["T_WHITESPACE"," ",804],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",804],["T_WHITESPACE"," ",804],".",["T_WHITESPACE"," ",804],["T_VARIABLE","$class",804],"]",["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_VARIABLE","$class",804],";",["T_WHITESPACE","\n                    ",804],"}",["T_WHITESPACE","\n                ",805],"}",["T_WHITESPACE","\n            ",806],"}",["T_WHITESPACE","\n            ",807],["T_STRING","closedir",808],"(",["T_VARIABLE","$handle",808],")",";",["T_WHITESPACE","\n        ",808],"}",["T_WHITESPACE","\n        ",809],["T_STRING","ksort",810],"(",["T_VARIABLE","$migrations",810],")",";",["T_WHITESPACE","\n\n        ",810],["T_RETURN","return",812],["T_WHITESPACE"," ",812],["T_STRING","array_values",812],"(",["T_VARIABLE","$migrations",812],")",";",["T_WHITESPACE","\n    ",812],"}",["T_WHITESPACE","\n\n    ",813],["T_DOC_COMMENT","\/**\n     * Generates new migration source PHP code.\n     * Child class may override this method, adding extra logic or variation to the process.\n     * @param array $params generation parameters, usually following parameters are present:\n     *\n     *  - name: string migration base name\n     *  - className: string migration class name\n     *\n     * @return string generated PHP code.\n     * @since 2.0.8\n     *\/",815],["T_WHITESPACE","\n    ",825],["T_PROTECTED","protected",826],["T_WHITESPACE"," ",826],["T_FUNCTION","function",826],["T_WHITESPACE"," ",826],["T_STRING","generateMigrationSourceCode",826],"(",["T_VARIABLE","$params",826],")",["T_WHITESPACE","\n    ",826],"{",["T_WHITESPACE","\n        ",827],["T_RETURN","return",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","renderFile",828],"(",["T_STRING","Yii",828],["T_DOUBLE_COLON","::",828],["T_STRING","getAlias",828],"(",["T_VARIABLE","$this",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","templateFile",828],")",",",["T_WHITESPACE"," ",828],["T_VARIABLE","$params",828],")",";",["T_WHITESPACE","\n    ",828],"}",["T_WHITESPACE","\n\n    ",829],["T_DOC_COMMENT","\/**\n     * Returns the migration history.\n     * @param int $limit the maximum number of records in the history to be returned. `null` for \"no limit\".\n     * @return array the migration history\n     *\/",831],["T_WHITESPACE","\n    ",835],["T_ABSTRACT","abstract",836],["T_WHITESPACE"," ",836],["T_PROTECTED","protected",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","getMigrationHistory",836],"(",["T_VARIABLE","$limit",836],")",";",["T_WHITESPACE","\n\n    ",836],["T_DOC_COMMENT","\/**\n     * Adds new migration entry to the history.\n     * @param string $version migration version name.\n     *\/",838],["T_WHITESPACE","\n    ",841],["T_ABSTRACT","abstract",842],["T_WHITESPACE"," ",842],["T_PROTECTED","protected",842],["T_WHITESPACE"," ",842],["T_FUNCTION","function",842],["T_WHITESPACE"," ",842],["T_STRING","addMigrationHistory",842],"(",["T_VARIABLE","$version",842],")",";",["T_WHITESPACE","\n\n    ",842],["T_DOC_COMMENT","\/**\n     * Removes existing migration from the history.\n     * @param string $version migration version name.\n     *\/",844],["T_WHITESPACE","\n    ",847],["T_ABSTRACT","abstract",848],["T_WHITESPACE"," ",848],["T_PROTECTED","protected",848],["T_WHITESPACE"," ",848],["T_FUNCTION","function",848],["T_WHITESPACE"," ",848],["T_STRING","removeMigrationHistory",848],"(",["T_VARIABLE","$version",848],")",";",["T_WHITESPACE","\n",848],"}",["T_WHITESPACE","\n",849]]
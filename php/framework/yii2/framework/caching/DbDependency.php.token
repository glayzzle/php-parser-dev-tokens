[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","caching",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Connection",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","di",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Instance",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * DbDependency represents a dependency based on the query result of a SQL statement.\n *\n * If the query result changes, the dependency is considered as changed.\n * The query is specified via the [[sql]] property.\n *\n * For more details and usage information on Cache, see the [guide article on caching](guide:caching-overview).\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",15],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","DbDependency",26],["T_WHITESPACE"," ",26],["T_EXTENDS","extends",26],["T_WHITESPACE"," ",26],["T_STRING","Dependency",26],["T_WHITESPACE","\n",26],"{",["T_WHITESPACE","\n    ",27],["T_DOC_COMMENT","\/**\n     * @var string the application component ID of the DB connection.\n     *\/",28],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$db",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'db'",31],";",["T_WHITESPACE","\n    ",31],["T_DOC_COMMENT","\/**\n     * @var string the SQL query whose result is used to determine if the dependency has been changed.\n     * Only the first row of the query result will be used.\n     *\/",32],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$sql",36],";",["T_WHITESPACE","\n    ",36],["T_DOC_COMMENT","\/**\n     * @var array the parameters (name => value) to be bound to the SQL statement specified by [[sql]].\n     *\/",37],["T_WHITESPACE","\n    ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$params",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],"[","]",";",["T_WHITESPACE","\n\n\n    ",40],["T_DOC_COMMENT","\/**\n     * Generates the data needed to determine if dependency has been changed.\n     * This method returns the value of the global state.\n     * @param Cache $cache the cache component that is currently evaluating this dependency\n     * @return mixed the data needed to determine if dependency has been changed.\n     * @throws InvalidConfigException if [[db]] is not a valid application component ID\n     *\/",43],["T_WHITESPACE","\n    ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","generateDependencyData",50],"(",["T_VARIABLE","$cache",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_COMMENT","\/* @var $db Connection *\/",52],["T_WHITESPACE","\n        ",52],["T_VARIABLE","$db",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","Instance",53],["T_DOUBLE_COLON","::",53],["T_STRING","ensure",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","db",53],",",["T_WHITESPACE"," ",53],["T_STRING","Connection",53],["T_DOUBLE_COLON","::",53],["T_STRING","className",53],"(",")",")",";",["T_WHITESPACE","\n        ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","sql",54],["T_WHITESPACE"," ",54],["T_IS_IDENTICAL","===",54],["T_WHITESPACE"," ",54],["T_STRING","null",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_THROW","throw",55],["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_STRING","InvalidConfigException",55],"(",["T_CONSTANT_ENCAPSED_STRING","'DbDependency::sql must be set.'",55],")",";",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n\n        ",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$db",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","enableQueryCache",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_COMMENT","\/\/ temporarily disable and re-enable query caching\n",59],["T_WHITESPACE","            ",60],["T_VARIABLE","$db",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","enableQueryCache",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","false",60],";",["T_WHITESPACE","\n            ",60],["T_VARIABLE","$result",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$db",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","createCommand",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","sql",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","params",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","queryOne",61],"(",")",";",["T_WHITESPACE","\n            ",61],["T_VARIABLE","$db",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","enableQueryCache",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","true",62],";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE"," ",63],["T_ELSE","else",63],["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$result",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","createCommand",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","sql",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","params",64],")",["T_OBJECT_OPERATOR","->",64],["T_STRING","queryOne",64],"(",")",";",["T_WHITESPACE","\n        ",64],"}",["T_WHITESPACE","\n\n        ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$result",67],";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n",68],"}"]
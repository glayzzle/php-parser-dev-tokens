[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],["T_NS_SEPARATOR","\\",8],["T_STRING","mssql",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidParamException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","NotSupportedException",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Expression",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * QueryBuilder is the query builder for MS SQL Server databases (version 2008 and above).\n *\n * @author Timur Ruziev <resurtm@gmail.com>\n * @since 2.0\n *\/",14],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","QueryBuilder",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","yii",20],["T_NS_SEPARATOR","\\",20],["T_STRING","db",20],["T_NS_SEPARATOR","\\",20],["T_STRING","QueryBuilder",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var array mapping from abstract column types (keys) to physical column types (values).\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$typeMap",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_WHITESPACE","\n        ",25],["T_STRING","Schema",26],["T_DOUBLE_COLON","::",26],["T_STRING","TYPE_PK",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'int IDENTITY PRIMARY KEY'",26],",",["T_WHITESPACE","\n        ",26],["T_STRING","Schema",27],["T_DOUBLE_COLON","::",27],["T_STRING","TYPE_UPK",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'int IDENTITY PRIMARY KEY'",27],",",["T_WHITESPACE","\n        ",27],["T_STRING","Schema",28],["T_DOUBLE_COLON","::",28],["T_STRING","TYPE_BIGPK",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'bigint IDENTITY PRIMARY KEY'",28],",",["T_WHITESPACE","\n        ",28],["T_STRING","Schema",29],["T_DOUBLE_COLON","::",29],["T_STRING","TYPE_UBIGPK",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'bigint IDENTITY PRIMARY KEY'",29],",",["T_WHITESPACE","\n        ",29],["T_STRING","Schema",30],["T_DOUBLE_COLON","::",30],["T_STRING","TYPE_CHAR",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'nchar(1)'",30],",",["T_WHITESPACE","\n        ",30],["T_STRING","Schema",31],["T_DOUBLE_COLON","::",31],["T_STRING","TYPE_STRING",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'nvarchar(255)'",31],",",["T_WHITESPACE","\n        ",31],["T_STRING","Schema",32],["T_DOUBLE_COLON","::",32],["T_STRING","TYPE_TEXT",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'nvarchar(max)'",32],",",["T_WHITESPACE","\n        ",32],["T_STRING","Schema",33],["T_DOUBLE_COLON","::",33],["T_STRING","TYPE_SMALLINT",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'smallint'",33],",",["T_WHITESPACE","\n        ",33],["T_STRING","Schema",34],["T_DOUBLE_COLON","::",34],["T_STRING","TYPE_INTEGER",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'int'",34],",",["T_WHITESPACE","\n        ",34],["T_STRING","Schema",35],["T_DOUBLE_COLON","::",35],["T_STRING","TYPE_BIGINT",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'bigint'",35],",",["T_WHITESPACE","\n        ",35],["T_STRING","Schema",36],["T_DOUBLE_COLON","::",36],["T_STRING","TYPE_FLOAT",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'float'",36],",",["T_WHITESPACE","\n        ",36],["T_STRING","Schema",37],["T_DOUBLE_COLON","::",37],["T_STRING","TYPE_DOUBLE",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'float'",37],",",["T_WHITESPACE","\n        ",37],["T_STRING","Schema",38],["T_DOUBLE_COLON","::",38],["T_STRING","TYPE_DECIMAL",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'decimal'",38],",",["T_WHITESPACE","\n        ",38],["T_STRING","Schema",39],["T_DOUBLE_COLON","::",39],["T_STRING","TYPE_DATETIME",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'datetime'",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","Schema",40],["T_DOUBLE_COLON","::",40],["T_STRING","TYPE_TIMESTAMP",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'datetime'",40],",",["T_WHITESPACE","\n        ",40],["T_STRING","Schema",41],["T_DOUBLE_COLON","::",41],["T_STRING","TYPE_TIME",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'time'",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","Schema",42],["T_DOUBLE_COLON","::",42],["T_STRING","TYPE_DATE",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'date'",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","Schema",43],["T_DOUBLE_COLON","::",43],["T_STRING","TYPE_BINARY",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'varbinary(max)'",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","Schema",44],["T_DOUBLE_COLON","::",44],["T_STRING","TYPE_BOOLEAN",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'bit'",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","Schema",45],["T_DOUBLE_COLON","::",45],["T_STRING","TYPE_MONEY",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'decimal(19,4)'",45],",",["T_WHITESPACE","\n    ",45],"]",";",["T_WHITESPACE","\n\n\n    ",46],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",49],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","buildOrderByAndLimit",52],"(",["T_VARIABLE","$sql",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$orderBy",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$limit",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$offset",52],")",["T_WHITESPACE","\n    ",52],"{",["T_WHITESPACE","\n        ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","hasOffset",54],"(",["T_VARIABLE","$offset",54],")",["T_WHITESPACE"," ",54],["T_BOOLEAN_AND","&&",54],["T_WHITESPACE"," ",54],"!",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","hasLimit",54],"(",["T_VARIABLE","$limit",54],")",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n            ",54],["T_VARIABLE","$orderBy",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","buildOrderBy",55],"(",["T_VARIABLE","$orderBy",55],")",";",["T_WHITESPACE","\n            ",55],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$orderBy",56],["T_WHITESPACE"," ",56],["T_IS_IDENTICAL","===",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","''",56],["T_WHITESPACE"," ",56],"?",["T_WHITESPACE"," ",56],["T_VARIABLE","$sql",56],["T_WHITESPACE"," ",56],":",["T_WHITESPACE"," ",56],["T_VARIABLE","$sql",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","separator",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$orderBy",56],";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n\n        ",57],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","isOldMssql",59],"(",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","oldBuildOrderByAndLimit",60],"(",["T_VARIABLE","$sql",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$orderBy",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$limit",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$offset",60],")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE"," ",61],["T_ELSE","else",61],["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","newBuildOrderByAndLimit",62],"(",["T_VARIABLE","$sql",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$orderBy",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$limit",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$offset",62],")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Builds the ORDER BY\/LIMIT\/OFFSET clauses for SQL SERVER 2012 or newer.\n     * @param string $sql the existing SQL (without ORDER BY\/LIMIT\/OFFSET)\n     * @param array $orderBy the order by columns. See [[\\yii\\db\\Query::orderBy]] for more details on how to specify this parameter.\n     * @param int $limit the limit number. See [[\\yii\\db\\Query::limit]] for more details.\n     * @param int $offset the offset number. See [[\\yii\\db\\Query::offset]] for more details.\n     * @return string the SQL completed with ORDER BY\/LIMIT\/OFFSET (if any)\n     *\/",66],["T_WHITESPACE","\n    ",73],["T_PROTECTED","protected",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","newBuildOrderByAndLimit",74],"(",["T_VARIABLE","$sql",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$orderBy",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$limit",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$offset",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$orderBy",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","buildOrderBy",76],"(",["T_VARIABLE","$orderBy",76],")",";",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$orderBy",77],["T_WHITESPACE"," ",77],["T_IS_IDENTICAL","===",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","''",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_COMMENT","\/\/ ORDER BY clause is required when FETCH and OFFSET are in the SQL\n",78],["T_WHITESPACE","            ",79],["T_VARIABLE","$orderBy",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'ORDER BY (SELECT NULL)'",79],";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$sql",81],["T_WHITESPACE"," ",81],["T_CONCAT_EQUAL",".=",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","separator",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$orderBy",81],";",["T_WHITESPACE","\n\n        ",81],["T_COMMENT","\/\/ http:\/\/technet.microsoft.com\/en-us\/library\/gg699618.aspx\n",83],["T_WHITESPACE","        ",84],["T_VARIABLE","$offset",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","hasOffset",84],"(",["T_VARIABLE","$offset",84],")",["T_WHITESPACE"," ",84],"?",["T_WHITESPACE"," ",84],["T_VARIABLE","$offset",84],["T_WHITESPACE"," ",84],":",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'0'",84],";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$sql",85],["T_WHITESPACE"," ",85],["T_CONCAT_EQUAL",".=",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","separator",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],"\"",["T_ENCAPSED_AND_WHITESPACE","OFFSET ",85],["T_VARIABLE","$offset",85],["T_ENCAPSED_AND_WHITESPACE"," ROWS",85],"\"",";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","hasLimit",86],"(",["T_VARIABLE","$limit",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$sql",87],["T_WHITESPACE"," ",87],["T_CONCAT_EQUAL",".=",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","separator",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],"\"",["T_ENCAPSED_AND_WHITESPACE","FETCH NEXT ",87],["T_VARIABLE","$limit",87],["T_ENCAPSED_AND_WHITESPACE"," ROWS ONLY",87],"\"",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$sql",90],";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * Builds the ORDER BY\/LIMIT\/OFFSET clauses for SQL SERVER 2005 to 2008.\n     * @param string $sql the existing SQL (without ORDER BY\/LIMIT\/OFFSET)\n     * @param array $orderBy the order by columns. See [[\\yii\\db\\Query::orderBy]] for more details on how to specify this parameter.\n     * @param int $limit the limit number. See [[\\yii\\db\\Query::limit]] for more details.\n     * @param int $offset the offset number. See [[\\yii\\db\\Query::offset]] for more details.\n     * @return string the SQL completed with ORDER BY\/LIMIT\/OFFSET (if any)\n     *\/",93],["T_WHITESPACE","\n    ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","oldBuildOrderByAndLimit",101],"(",["T_VARIABLE","$sql",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$orderBy",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$limit",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$offset",101],")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$orderBy",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","buildOrderBy",103],"(",["T_VARIABLE","$orderBy",103],")",";",["T_WHITESPACE","\n        ",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$orderBy",104],["T_WHITESPACE"," ",104],["T_IS_IDENTICAL","===",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","''",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n            ",104],["T_COMMENT","\/\/ ROW_NUMBER() requires an ORDER BY clause\n",105],["T_WHITESPACE","            ",106],["T_VARIABLE","$orderBy",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'ORDER BY (SELECT NULL)'",106],";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$sql",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","preg_replace",109],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([\\s(])*SELECT(\\s+DISTINCT)?(?!\\s*TOP\\s*\\()\/i'",109],",",["T_WHITESPACE"," ",109],"\"",["T_ENCAPSED_AND_WHITESPACE","\\\\1SELECT\\\\2 rowNum = ROW_NUMBER() over (",109],["T_VARIABLE","$orderBy",109],["T_ENCAPSED_AND_WHITESPACE","),",109],"\"",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$sql",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","hasLimit",111],"(",["T_VARIABLE","$limit",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$sql",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT TOP ",112],["T_VARIABLE","$limit",112],["T_ENCAPSED_AND_WHITESPACE"," * FROM (",112],["T_VARIABLE","$sql",112],["T_ENCAPSED_AND_WHITESPACE",") sub",112],"\"",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$sql",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT * FROM (",114],["T_VARIABLE","$sql",114],["T_ENCAPSED_AND_WHITESPACE",") sub",114],"\"",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","hasOffset",116],"(",["T_VARIABLE","$offset",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_VARIABLE","$sql",117],["T_WHITESPACE"," ",117],["T_CONCAT_EQUAL",".=",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","separator",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],"\"",["T_ENCAPSED_AND_WHITESPACE","WHERE rowNum > ",117],["T_VARIABLE","$offset",117],"\"",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n\n        ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$sql",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for renaming a DB table.\n     * @param string $oldName the table to be renamed. The name will be properly quoted by the method.\n     * @param string $newName the new table name. The name will be properly quoted by the method.\n     * @return string the SQL statement for renaming a DB table.\n     *\/",123],["T_WHITESPACE","\n    ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","renameTable",129],"(",["T_VARIABLE","$oldName",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$newName",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'sp_rename '",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","db",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","quoteTableName",131],"(",["T_VARIABLE","$oldName",131],")",["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","', '",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","db",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","quoteTableName",131],"(",["T_VARIABLE","$newName",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for renaming a column.\n     * @param string $table the table whose column is to be renamed. The name will be properly quoted by the method.\n     * @param string $oldName the old name of the column. The name will be properly quoted by the method.\n     * @param string $newName the new name of the column. The name will be properly quoted by the method.\n     * @return string the SQL statement for renaming a DB column.\n     *\/",134],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","renameColumn",141],"(",["T_VARIABLE","$table",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$oldName",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$newName",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$table",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","db",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","quoteTableName",143],"(",["T_VARIABLE","$table",143],")",";",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$oldName",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","db",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","quoteColumnName",144],"(",["T_VARIABLE","$oldName",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$newName",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","db",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","quoteColumnName",145],"(",["T_VARIABLE","$newName",145],")",";",["T_WHITESPACE","\n        ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],"\"",["T_ENCAPSED_AND_WHITESPACE","sp_rename '",146],["T_CURLY_OPEN","{",146],["T_VARIABLE","$table",146],"}",["T_ENCAPSED_AND_WHITESPACE",".",146],["T_CURLY_OPEN","{",146],["T_VARIABLE","$oldName",146],"}",["T_ENCAPSED_AND_WHITESPACE","', ",146],["T_CURLY_OPEN","{",146],["T_VARIABLE","$newName",146],"}",["T_ENCAPSED_AND_WHITESPACE",", 'COLUMN'",146],"\"",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for changing the definition of a column.\n     * @param string $table the table whose column is to be changed. The table name will be properly quoted by the method.\n     * @param string $column the name of the column to be changed. The name will be properly quoted by the method.\n     * @param string $type the new column type. The [[getColumnType]] method will be invoked to convert abstract column type (if any)\n     * into the physical one. Anything that is not recognized as abstract type will be kept in the generated SQL.\n     * For example, 'string' will be turned into 'varchar(255)', while 'string not null' will become 'varchar(255) not null'.\n     * @return string the SQL statement for changing the definition of a column.\n     *\/",149],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","alterColumn",158],"(",["T_VARIABLE","$table",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$column",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$type",158],")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$type",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getColumnType",160],"(",["T_VARIABLE","$type",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$sql",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","db",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","quoteTableName",161],"(",["T_VARIABLE","$table",161],")",["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","' ALTER COLUMN '",161],["T_WHITESPACE","\n            ",161],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","db",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","quoteColumnName",162],"(",["T_VARIABLE","$column",162],")",["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","' '",162],["T_WHITESPACE","\n            ",162],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getColumnType",163],"(",["T_VARIABLE","$type",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$sql",165],";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for enabling or disabling integrity check.\n     * @param bool $check whether to turn on or off the integrity check.\n     * @param string $schema the schema of the tables. Defaults to empty string, meaning the current or default schema.\n     * @param string $table the table name. Defaults to empty string, meaning that no table will be changed.\n     * @return string the SQL statement for checking integrity\n     * @throws InvalidParamException if the table does not exist or there is no sequence associated with the table.\n     *\/",168],["T_WHITESPACE","\n    ",175],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","checkIntegrity",176],"(",["T_VARIABLE","$check",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","true",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$schema",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","''",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$table",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","''",176],")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$schema",178],["T_WHITESPACE"," ",178],["T_IS_NOT_IDENTICAL","!==",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","''",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$table",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"\"",["T_CURLY_OPEN","{",179],["T_VARIABLE","$schema",179],"}",["T_ENCAPSED_AND_WHITESPACE",".",179],["T_CURLY_OPEN","{",179],["T_VARIABLE","$table",179],"}","\"",";",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n        ",180],["T_VARIABLE","$table",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","db",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","quoteTableName",181],"(",["T_VARIABLE","$table",181],")",";",["T_WHITESPACE","\n        ",181],["T_IF","if",182],["T_WHITESPACE"," ",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","db",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getTableSchema",182],"(",["T_VARIABLE","$table",182],")",["T_WHITESPACE"," ",182],["T_IS_IDENTICAL","===",182],["T_WHITESPACE"," ",182],["T_STRING","null",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n            ",182],["T_THROW","throw",183],["T_WHITESPACE"," ",183],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","InvalidParamException",183],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Table not found: ",183],["T_VARIABLE","$table",183],"\"",")",";",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$enable",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$check",185],["T_WHITESPACE"," ",185],"?",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'CHECK'",185],["T_WHITESPACE"," ",185],":",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'NOCHECK'",185],";",["T_WHITESPACE","\n\n        ",185],["T_RETURN","return",187],["T_WHITESPACE"," ",187],"\"",["T_ENCAPSED_AND_WHITESPACE","ALTER TABLE ",187],["T_CURLY_OPEN","{",187],["T_VARIABLE","$table",187],"}",["T_ENCAPSED_AND_WHITESPACE"," ",187],["T_CURLY_OPEN","{",187],["T_VARIABLE","$enable",187],"}",["T_ENCAPSED_AND_WHITESPACE"," CONSTRAINT ALL",187],"\"",";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",190],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","addCommentOnColumn",194],"(",["T_VARIABLE","$table",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$column",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$comment",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],"\"",["T_ENCAPSED_AND_WHITESPACE","sp_updateextendedproperty @name = N'MS_Description', @value = ",196],["T_CURLY_OPEN","{",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","db",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","quoteValue",196],"(",["T_VARIABLE","$comment",196],")","}",["T_ENCAPSED_AND_WHITESPACE",", @level1type = N'Table',  @level1name = ",196],["T_CURLY_OPEN","{",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","db",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","quoteTableName",196],"(",["T_VARIABLE","$table",196],")","}",["T_ENCAPSED_AND_WHITESPACE",", @level2type = N'Column', @level2name = ",196],["T_CURLY_OPEN","{",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","db",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","quoteColumnName",196],"(",["T_VARIABLE","$column",196],")","}","\"",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",199],["T_WHITESPACE","\n    ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","addCommentOnTable",203],"(",["T_VARIABLE","$table",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$comment",203],")",["T_WHITESPACE","\n    ",203],"{",["T_WHITESPACE","\n        ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],"\"",["T_ENCAPSED_AND_WHITESPACE","sp_updateextendedproperty @name = N'MS_Description', @value = ",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","quoteValue",205],"(",["T_VARIABLE","$comment",205],")","}",["T_ENCAPSED_AND_WHITESPACE",", @level1type = N'Table',  @level1name = ",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","quoteTableName",205],"(",["T_VARIABLE","$table",205],")","}","\"",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",208],["T_WHITESPACE","\n    ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","dropCommentFromColumn",212],"(",["T_VARIABLE","$table",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$column",212],")",["T_WHITESPACE","\n    ",212],"{",["T_WHITESPACE","\n        ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],"\"",["T_ENCAPSED_AND_WHITESPACE","sp_dropextendedproperty @name = N'MS_Description', @level1type = N'Table',  @level1name = ",214],["T_CURLY_OPEN","{",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","db",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","quoteTableName",214],"(",["T_VARIABLE","$table",214],")","}",["T_ENCAPSED_AND_WHITESPACE",", @level2type = N'Column', @level2name = ",214],["T_CURLY_OPEN","{",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","db",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","quoteColumnName",214],"(",["T_VARIABLE","$column",214],")","}","\"",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",217],["T_WHITESPACE","\n    ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","dropCommentFromTable",221],"(",["T_VARIABLE","$table",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],"\"",["T_ENCAPSED_AND_WHITESPACE","sp_dropextendedproperty @name = N'MS_Description', @level1type = N'Table',  @level1name = ",223],["T_CURLY_OPEN","{",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","db",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","quoteTableName",223],"(",["T_VARIABLE","$table",223],")","}","\"",";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_DOC_COMMENT","\/**\n     * Returns an array of column names given model name\n     *\n     * @param string $modelClass name of the model class\n     * @return array|null array of column names\n     *\/",226],["T_WHITESPACE","\n    ",231],["T_PROTECTED","protected",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","getAllColumnNames",232],"(",["T_VARIABLE","$modelClass",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","null",232],")",["T_WHITESPACE","\n    ",232],"{",["T_WHITESPACE","\n        ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(","!",["T_VARIABLE","$modelClass",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n            ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_STRING","null",235],";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n        ",236],["T_COMMENT","\/* @var $model \\yii\\db\\ActiveRecord *\/",237],["T_WHITESPACE","\n        ",237],["T_VARIABLE","$model",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_NEW","new",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$modelClass",238],";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$schema",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$model",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getTableSchema",239],"(",")",";",["T_WHITESPACE","\n        ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_STRING","array_keys",240],"(",["T_VARIABLE","$schema",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","columns",240],")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_DOC_COMMENT","\/**\n     * @var bool whether MSSQL used is old.\n     *\/",243],["T_WHITESPACE","\n    ",245],["T_PRIVATE","private",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$_oldMssql",246],";",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @return bool whether the version of the MSSQL being used is older than 2012.\n     * @throws \\yii\\base\\InvalidConfigException\n     * @throws \\yii\\db\\Exception\n     *\/",248],["T_WHITESPACE","\n    ",252],["T_PROTECTED","protected",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","isOldMssql",253],"(",")",["T_WHITESPACE","\n    ",253],"{",["T_WHITESPACE","\n        ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","_oldMssql",255],["T_WHITESPACE"," ",255],["T_IS_IDENTICAL","===",255],["T_WHITESPACE"," ",255],["T_STRING","null",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$pdo",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","db",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getSlavePdo",256],"(",")",";",["T_WHITESPACE","\n            ",256],["T_VARIABLE","$version",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING","explode",257],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$pdo",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","getAttribute",257],"(",["T_NS_SEPARATOR","\\",257],["T_STRING","PDO",257],["T_DOUBLE_COLON","::",257],["T_STRING","ATTR_SERVER_VERSION",257],")",")",";",["T_WHITESPACE","\n            ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","_oldMssql",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$version",258],"[",["T_LNUMBER","0",258],"]",["T_WHITESPACE"," ",258],"<",["T_WHITESPACE"," ",258],["T_LNUMBER","11",258],";",["T_WHITESPACE","\n        ",258],"}",["T_WHITESPACE","\n        ",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","_oldMssql",260],";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @throws NotSupportedException if `$columns` is an array\n     *\/",263],["T_WHITESPACE","\n    ",266],["T_PROTECTED","protected",267],["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],["T_WHITESPACE"," ",267],["T_STRING","buildSubqueryInCondition",267],"(",["T_VARIABLE","$operator",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$columns",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$values",267],",",["T_WHITESPACE"," ",267],"&",["T_VARIABLE","$params",267],")",["T_WHITESPACE","\n    ",267],"{",["T_WHITESPACE","\n        ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_STRING","is_array",269],"(",["T_VARIABLE","$columns",269],")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n            ",269],["T_THROW","throw",270],["T_WHITESPACE"," ",270],["T_NEW","new",270],["T_WHITESPACE"," ",270],["T_STRING","NotSupportedException",270],"(",["T_METHOD_C","__METHOD__",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","' is not supported by MSSQL.'",270],")",";",["T_WHITESPACE","\n        ",270],"}",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_STRING","parent",272],["T_DOUBLE_COLON","::",272],["T_STRING","buildSubqueryInCondition",272],"(",["T_VARIABLE","$operator",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$columns",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$values",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$params",272],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Builds SQL for IN condition\n     *\n     * @param string $operator\n     * @param array $columns\n     * @param array $values\n     * @param array $params\n     * @return string SQL\n     *\/",275],["T_WHITESPACE","\n    ",283],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","buildCompositeInCondition",284],"(",["T_VARIABLE","$operator",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$columns",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$values",284],",",["T_WHITESPACE"," ",284],"&",["T_VARIABLE","$params",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$quotedColumns",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],"[","]",";",["T_WHITESPACE","\n        ",286],["T_FOREACH","foreach",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$columns",287],["T_WHITESPACE"," ",287],["T_AS","as",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$i",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$column",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n            ",287],["T_VARIABLE","$quotedColumns",288],"[",["T_VARIABLE","$i",288],"]",["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","strpos",288],"(",["T_VARIABLE","$column",288],",",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'('",288],")",["T_WHITESPACE"," ",288],["T_IS_IDENTICAL","===",288],["T_WHITESPACE"," ",288],["T_STRING","false",288],["T_WHITESPACE"," ",288],"?",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","db",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","quoteColumnName",288],"(",["T_VARIABLE","$column",288],")",["T_WHITESPACE"," ",288],":",["T_WHITESPACE"," ",288],["T_VARIABLE","$column",288],";",["T_WHITESPACE","\n        ",288],"}",["T_WHITESPACE","\n        ",289],["T_VARIABLE","$vss",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],"[","]",";",["T_WHITESPACE","\n        ",290],["T_FOREACH","foreach",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$values",291],["T_WHITESPACE"," ",291],["T_AS","as",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$value",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$vs",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],"[","]",";",["T_WHITESPACE","\n            ",292],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$columns",293],["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$i",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$column",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n                ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_ISSET","isset",294],"(",["T_VARIABLE","$value",294],"[",["T_VARIABLE","$column",294],"]",")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                    ",294],["T_VARIABLE","$phName",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","self",295],["T_DOUBLE_COLON","::",295],["T_STRING","PARAM_PREFIX",295],["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_STRING","count",295],"(",["T_VARIABLE","$params",295],")",";",["T_WHITESPACE","\n                    ",295],["T_VARIABLE","$params",296],"[",["T_VARIABLE","$phName",296],"]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$value",296],"[",["T_VARIABLE","$column",296],"]",";",["T_WHITESPACE","\n                    ",296],["T_VARIABLE","$vs",297],"[","]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$quotedColumns",297],"[",["T_VARIABLE","$i",297],"]",["T_WHITESPACE"," ",297],".",["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$operator",297],["T_WHITESPACE"," ",297],["T_IS_IDENTICAL","===",297],["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'IN'",297],["T_WHITESPACE"," ",297],"?",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","' = '",297],["T_WHITESPACE"," ",297],":",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","' != '",297],")",["T_WHITESPACE"," ",297],".",["T_WHITESPACE"," ",297],["T_VARIABLE","$phName",297],";",["T_WHITESPACE","\n                ",297],"}",["T_WHITESPACE"," ",298],["T_ELSE","else",298],["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                    ",298],["T_VARIABLE","$vs",299],"[","]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$quotedColumns",299],"[",["T_VARIABLE","$i",299],"]",["T_WHITESPACE"," ",299],".",["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$operator",299],["T_WHITESPACE"," ",299],["T_IS_IDENTICAL","===",299],["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'IN'",299],["T_WHITESPACE"," ",299],"?",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","' IS'",299],["T_WHITESPACE"," ",299],":",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","' IS NOT'",299],")",["T_WHITESPACE"," ",299],".",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","' NULL'",299],";",["T_WHITESPACE","\n                ",299],"}",["T_WHITESPACE","\n            ",300],"}",["T_WHITESPACE","\n            ",301],["T_VARIABLE","$vss",302],"[","]",["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'('",302],["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_STRING","implode",302],"(",["T_VARIABLE","$operator",302],["T_WHITESPACE"," ",302],["T_IS_IDENTICAL","===",302],["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'IN'",302],["T_WHITESPACE"," ",302],"?",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","' AND '",302],["T_WHITESPACE"," ",302],":",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","' OR '",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$vs",302],")",["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","')'",302],";",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n\n        ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'('",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_STRING","implode",305],"(",["T_VARIABLE","$operator",305],["T_WHITESPACE"," ",305],["T_IS_IDENTICAL","===",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'IN'",305],["T_WHITESPACE"," ",305],"?",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","' OR '",305],["T_WHITESPACE"," ",305],":",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","' AND '",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$vss",305],")",["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","')'",305],";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",308],["T_WHITESPACE","\n    ",311],["T_PUBLIC","public",312],["T_WHITESPACE"," ",312],["T_FUNCTION","function",312],["T_WHITESPACE"," ",312],["T_STRING","selectExists",312],"(",["T_VARIABLE","$rawSql",312],")",["T_WHITESPACE","\n    ",312],"{",["T_WHITESPACE","\n        ",313],["T_RETURN","return",314],["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'SELECT CASE WHEN EXISTS('",314],["T_WHITESPACE"," ",314],".",["T_WHITESPACE"," ",314],["T_VARIABLE","$rawSql",314],["T_WHITESPACE"," ",314],".",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","') THEN 1 ELSE 0 END'",314],";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n\n    ",315],["T_DOC_COMMENT","\/**\n     * Normalizes data to be saved into the table, performing extra preparations and type converting, if necessary.\n     * @param string $table the table that data will be saved into.\n     * @param array $columns the column data (name => value) to be saved into the table.\n     * @return array normalized columns\n     *\/",317],["T_WHITESPACE","\n    ",322],["T_PRIVATE","private",323],["T_WHITESPACE"," ",323],["T_FUNCTION","function",323],["T_WHITESPACE"," ",323],["T_STRING","normalizeTableRowData",323],"(",["T_VARIABLE","$table",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$columns",323],",",["T_WHITESPACE"," ",323],"&",["T_VARIABLE","$params",323],")",["T_WHITESPACE","\n    ",323],"{",["T_WHITESPACE","\n        ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(","(",["T_VARIABLE","$tableSchema",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","db",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getSchema",325],"(",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","getTableSchema",325],"(",["T_VARIABLE","$table",325],")",")",["T_WHITESPACE"," ",325],["T_IS_NOT_IDENTICAL","!==",325],["T_WHITESPACE"," ",325],["T_STRING","null",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n            ",325],["T_VARIABLE","$columnSchemas",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$tableSchema",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","columns",326],";",["T_WHITESPACE","\n            ",326],["T_FOREACH","foreach",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$columns",327],["T_WHITESPACE"," ",327],["T_AS","as",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$name",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$value",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                ",327],["T_COMMENT","\/\/ @see https:\/\/github.com\/yiisoft\/yii2\/issues\/12599\n",328],["T_WHITESPACE","                ",329],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_ISSET","isset",329],"(",["T_VARIABLE","$columnSchemas",329],"[",["T_VARIABLE","$name",329],"]",")",["T_WHITESPACE"," ",329],["T_BOOLEAN_AND","&&",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$columnSchemas",329],"[",["T_VARIABLE","$name",329],"]",["T_OBJECT_OPERATOR","->",329],["T_STRING","type",329],["T_WHITESPACE"," ",329],["T_IS_IDENTICAL","===",329],["T_WHITESPACE"," ",329],["T_STRING","Schema",329],["T_DOUBLE_COLON","::",329],["T_STRING","TYPE_BINARY",329],["T_WHITESPACE"," ",329],["T_BOOLEAN_AND","&&",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$columnSchemas",329],"[",["T_VARIABLE","$name",329],"]",["T_OBJECT_OPERATOR","->",329],["T_STRING","dbType",329],["T_WHITESPACE"," ",329],["T_IS_IDENTICAL","===",329],["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'varbinary'",329],["T_WHITESPACE"," ",329],["T_BOOLEAN_AND","&&",329],["T_WHITESPACE"," ",329],["T_STRING","is_string",329],"(",["T_VARIABLE","$value",329],")",")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                    ",329],["T_VARIABLE","$phName",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","self",330],["T_DOUBLE_COLON","::",330],["T_STRING","PARAM_PREFIX",330],["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_STRING","count",330],"(",["T_VARIABLE","$params",330],")",";",["T_WHITESPACE","\n                    ",330],["T_VARIABLE","$columns",331],"[",["T_VARIABLE","$name",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_NEW","new",331],["T_WHITESPACE"," ",331],["T_STRING","Expression",331],"(","\"",["T_ENCAPSED_AND_WHITESPACE","CONVERT(VARBINARY, ",331],["T_VARIABLE","$phName",331],["T_ENCAPSED_AND_WHITESPACE",")",331],"\"",",",["T_WHITESPACE"," ",331],"[",["T_VARIABLE","$phName",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$value",331],"]",")",";",["T_WHITESPACE","\n                ",331],"}",["T_WHITESPACE","\n            ",332],"}",["T_WHITESPACE","\n        ",333],"}",["T_WHITESPACE","\n        ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$columns",335],";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n\n    ",336],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",338],["T_WHITESPACE","\n    ",340],["T_PUBLIC","public",341],["T_WHITESPACE"," ",341],["T_FUNCTION","function",341],["T_WHITESPACE"," ",341],["T_STRING","insert",341],"(",["T_VARIABLE","$table",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$columns",341],",",["T_WHITESPACE"," ",341],"&",["T_VARIABLE","$params",341],")",["T_WHITESPACE","\n    ",341],"{",["T_WHITESPACE","\n        ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_STRING","parent",343],["T_DOUBLE_COLON","::",343],["T_STRING","insert",343],"(",["T_VARIABLE","$table",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","normalizeTableRowData",343],"(",["T_VARIABLE","$table",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$columns",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$params",343],")",",",["T_WHITESPACE"," ",343],["T_VARIABLE","$params",343],")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",346],["T_WHITESPACE","\n    ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","update",349],"(",["T_VARIABLE","$table",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$columns",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$condition",349],",",["T_WHITESPACE"," ",349],"&",["T_VARIABLE","$params",349],")",["T_WHITESPACE","\n    ",349],"{",["T_WHITESPACE","\n        ",350],["T_RETURN","return",351],["T_WHITESPACE"," ",351],["T_STRING","parent",351],["T_DOUBLE_COLON","::",351],["T_STRING","update",351],"(",["T_VARIABLE","$table",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","normalizeTableRowData",351],"(",["T_VARIABLE","$table",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$columns",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$params",351],")",",",["T_WHITESPACE"," ",351],["T_VARIABLE","$condition",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$params",351],")",";",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n",352],"}",["T_WHITESPACE","\n",353]]
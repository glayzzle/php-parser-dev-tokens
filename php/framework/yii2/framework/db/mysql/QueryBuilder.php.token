[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],["T_NS_SEPARATOR","\\",8],["T_STRING","mysql",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidParamException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Exception",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Expression",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * QueryBuilder is the query builder for MySQL databases.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",14],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","QueryBuilder",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","yii",20],["T_NS_SEPARATOR","\\",20],["T_STRING","db",20],["T_NS_SEPARATOR","\\",20],["T_STRING","QueryBuilder",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var array mapping from abstract column types (keys) to physical column types (values).\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$typeMap",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_WHITESPACE","\n        ",25],["T_STRING","Schema",26],["T_DOUBLE_COLON","::",26],["T_STRING","TYPE_PK",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY'",26],",",["T_WHITESPACE","\n        ",26],["T_STRING","Schema",27],["T_DOUBLE_COLON","::",27],["T_STRING","TYPE_UPK",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'int(10) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY'",27],",",["T_WHITESPACE","\n        ",27],["T_STRING","Schema",28],["T_DOUBLE_COLON","::",28],["T_STRING","TYPE_BIGPK",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'bigint(20) NOT NULL AUTO_INCREMENT PRIMARY KEY'",28],",",["T_WHITESPACE","\n        ",28],["T_STRING","Schema",29],["T_DOUBLE_COLON","::",29],["T_STRING","TYPE_UBIGPK",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY'",29],",",["T_WHITESPACE","\n        ",29],["T_STRING","Schema",30],["T_DOUBLE_COLON","::",30],["T_STRING","TYPE_CHAR",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'char(1)'",30],",",["T_WHITESPACE","\n        ",30],["T_STRING","Schema",31],["T_DOUBLE_COLON","::",31],["T_STRING","TYPE_STRING",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'varchar(255)'",31],",",["T_WHITESPACE","\n        ",31],["T_STRING","Schema",32],["T_DOUBLE_COLON","::",32],["T_STRING","TYPE_TEXT",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'text'",32],",",["T_WHITESPACE","\n        ",32],["T_STRING","Schema",33],["T_DOUBLE_COLON","::",33],["T_STRING","TYPE_SMALLINT",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'smallint(6)'",33],",",["T_WHITESPACE","\n        ",33],["T_STRING","Schema",34],["T_DOUBLE_COLON","::",34],["T_STRING","TYPE_INTEGER",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'int(11)'",34],",",["T_WHITESPACE","\n        ",34],["T_STRING","Schema",35],["T_DOUBLE_COLON","::",35],["T_STRING","TYPE_BIGINT",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'bigint(20)'",35],",",["T_WHITESPACE","\n        ",35],["T_STRING","Schema",36],["T_DOUBLE_COLON","::",36],["T_STRING","TYPE_FLOAT",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'float'",36],",",["T_WHITESPACE","\n        ",36],["T_STRING","Schema",37],["T_DOUBLE_COLON","::",37],["T_STRING","TYPE_DOUBLE",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'double'",37],",",["T_WHITESPACE","\n        ",37],["T_STRING","Schema",38],["T_DOUBLE_COLON","::",38],["T_STRING","TYPE_DECIMAL",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'decimal(10,0)'",38],",",["T_WHITESPACE","\n        ",38],["T_STRING","Schema",39],["T_DOUBLE_COLON","::",39],["T_STRING","TYPE_DATETIME",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'datetime'",39],",",["T_WHITESPACE","\n        ",39],["T_STRING","Schema",40],["T_DOUBLE_COLON","::",40],["T_STRING","TYPE_TIMESTAMP",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",40],",",["T_WHITESPACE","\n        ",40],["T_STRING","Schema",41],["T_DOUBLE_COLON","::",41],["T_STRING","TYPE_TIME",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'time'",41],",",["T_WHITESPACE","\n        ",41],["T_STRING","Schema",42],["T_DOUBLE_COLON","::",42],["T_STRING","TYPE_DATE",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'date'",42],",",["T_WHITESPACE","\n        ",42],["T_STRING","Schema",43],["T_DOUBLE_COLON","::",43],["T_STRING","TYPE_BINARY",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'blob'",43],",",["T_WHITESPACE","\n        ",43],["T_STRING","Schema",44],["T_DOUBLE_COLON","::",44],["T_STRING","TYPE_BOOLEAN",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'tinyint(1)'",44],",",["T_WHITESPACE","\n        ",44],["T_STRING","Schema",45],["T_DOUBLE_COLON","::",45],["T_STRING","TYPE_MONEY",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'decimal(19,4)'",45],",",["T_WHITESPACE","\n    ",45],"]",";",["T_WHITESPACE","\n\n\n    ",46],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for renaming a column.\n     * @param string $table the table whose column is to be renamed. The name will be properly quoted by the method.\n     * @param string $oldName the old name of the column. The name will be properly quoted by the method.\n     * @param string $newName the new name of the column. The name will be properly quoted by the method.\n     * @return string the SQL statement for renaming a DB column.\n     * @throws Exception\n     *\/",49],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","renameColumn",57],"(",["T_VARIABLE","$table",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$oldName",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$newName",57],")",["T_WHITESPACE","\n    ",57],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$quotedTable",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","db",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","quoteTableName",59],"(",["T_VARIABLE","$table",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$row",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","db",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","createCommand",60],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW CREATE TABLE '",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$quotedTable",60],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","queryOne",60],"(",")",";",["T_WHITESPACE","\n        ",60],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$row",61],["T_WHITESPACE"," ",61],["T_IS_IDENTICAL","===",61],["T_WHITESPACE"," ",61],["T_STRING","false",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_THROW","throw",62],["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_STRING","Exception",62],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to find column '",62],["T_VARIABLE","$oldName",62],["T_ENCAPSED_AND_WHITESPACE","' in table '",62],["T_VARIABLE","$table",62],["T_ENCAPSED_AND_WHITESPACE","'.",62],"\"",")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n        ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_ISSET","isset",64],"(",["T_VARIABLE","$row",64],"[",["T_CONSTANT_ENCAPSED_STRING","'Create Table'",64],"]",")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_VARIABLE","$sql",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$row",65],"[",["T_CONSTANT_ENCAPSED_STRING","'Create Table'",65],"]",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE"," ",66],["T_ELSE","else",66],["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$row",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","array_values",67],"(",["T_VARIABLE","$row",67],")",";",["T_WHITESPACE","\n            ",67],["T_VARIABLE","$sql",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$row",68],"[",["T_LNUMBER","1",68],"]",";",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n        ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_STRING","preg_match_all",70],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\s*`(.*?)`\\s+(.*?),?$\/m'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$sql",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$matches",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_FOREACH","foreach",71],["T_WHITESPACE"," ",71],"(",["T_VARIABLE","$matches",71],"[",["T_LNUMBER","1",71],"]",["T_WHITESPACE"," ",71],["T_AS","as",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$i",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$c",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n                ",71],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$c",72],["T_WHITESPACE"," ",72],["T_IS_IDENTICAL","===",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$oldName",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n                    ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],"\"",["T_ENCAPSED_AND_WHITESPACE","ALTER TABLE ",73],["T_VARIABLE","$quotedTable",73],["T_ENCAPSED_AND_WHITESPACE"," CHANGE ",73],"\"",["T_WHITESPACE","\n                        ",73],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","db",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","quoteColumnName",74],"(",["T_VARIABLE","$oldName",74],")",["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","' '",74],["T_WHITESPACE","\n                        ",74],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","db",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","quoteColumnName",75],"(",["T_VARIABLE","$newName",75],")",["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","' '",75],["T_WHITESPACE","\n                        ",75],".",["T_WHITESPACE"," ",76],["T_VARIABLE","$matches",76],"[",["T_LNUMBER","2",76],"]","[",["T_VARIABLE","$i",76],"]",";",["T_WHITESPACE","\n                ",76],"}",["T_WHITESPACE","\n            ",77],"}",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n        ",79],["T_COMMENT","\/\/ try to give back a SQL anyway\n",80],["T_WHITESPACE","        ",81],["T_RETURN","return",81],["T_WHITESPACE"," ",81],"\"",["T_ENCAPSED_AND_WHITESPACE","ALTER TABLE ",81],["T_VARIABLE","$quotedTable",81],["T_ENCAPSED_AND_WHITESPACE"," CHANGE ",81],"\"",["T_WHITESPACE","\n            ",81],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","quoteColumnName",82],"(",["T_VARIABLE","$oldName",82],")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","' '",82],["T_WHITESPACE","\n            ",82],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","db",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","quoteColumnName",83],"(",["T_VARIABLE","$newName",83],")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @see https:\/\/bugs.mysql.com\/bug.php?id=48875\n     *\/",86],["T_WHITESPACE","\n    ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","createIndex",90],"(",["T_VARIABLE","$name",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$table",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$columns",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$unique",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","false",90],")",["T_WHITESPACE","\n    ",90],"{",["T_WHITESPACE","\n        ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",92],["T_WHITESPACE","\n        ",92],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","quoteTableName",93],"(",["T_VARIABLE","$table",93],")",["T_WHITESPACE","\n        ",93],".",["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$unique",94],["T_WHITESPACE"," ",94],"?",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","' ADD UNIQUE INDEX '",94],["T_WHITESPACE"," ",94],":",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","' ADD INDEX '",94],")",["T_WHITESPACE","\n        ",94],".",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","db",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","quoteTableName",95],"(",["T_VARIABLE","$name",95],")",["T_WHITESPACE","\n        ",95],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","' ('",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","buildColumns",96],"(",["T_VARIABLE","$columns",96],")",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","')'",96],";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for dropping a foreign key constraint.\n     * @param string $name the name of the foreign key constraint to be dropped. The name will be properly quoted by the method.\n     * @param string $table the table whose foreign is to be dropped. The name will be properly quoted by the method.\n     * @return string the SQL statement for dropping a foreign key constraint.\n     *\/",99],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","dropForeignKey",105],"(",["T_VARIABLE","$name",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$table",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","db",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","quoteTableName",107],"(",["T_VARIABLE","$table",107],")",["T_WHITESPACE","\n            ",107],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","' DROP FOREIGN KEY '",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","db",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","quoteColumnName",108],"(",["T_VARIABLE","$name",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for removing a primary key constraint to an existing table.\n     * @param string $name the name of the primary key constraint to be removed.\n     * @param string $table the table that the primary key constraint will be removed from.\n     * @return string the SQL statement for removing a primary key constraint from an existing table.\n     *\/",111],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","dropPrimaryKey",117],"(",["T_VARIABLE","$name",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$table",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","db",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","quoteTableName",119],"(",["T_VARIABLE","$table",119],")",["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","' DROP PRIMARY KEY'",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * Creates a SQL statement for resetting the sequence value of a table's primary key.\n     * The sequence will be reset such that the primary key of the next new row inserted\n     * will have the specified value or 1.\n     * @param string $tableName the name of the table whose primary key sequence will be reset\n     * @param mixed $value the value for the primary key of the next new row inserted. If this is not set,\n     * the next new row's primary key will have a value 1.\n     * @return string the SQL statement for resetting sequence\n     * @throws InvalidParamException if the table does not exist or there is no sequence associated with the table.\n     *\/",122],["T_WHITESPACE","\n    ",131],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","resetSequence",132],"(",["T_VARIABLE","$tableName",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$value",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","null",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$table",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","db",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTableSchema",134],"(",["T_VARIABLE","$tableName",134],")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$table",135],["T_WHITESPACE"," ",135],["T_IS_NOT_IDENTICAL","!==",135],["T_WHITESPACE"," ",135],["T_STRING","null",135],["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$table",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","sequenceName",135],["T_WHITESPACE"," ",135],["T_IS_NOT_IDENTICAL","!==",135],["T_WHITESPACE"," ",135],["T_STRING","null",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$tableName",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","db",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","quoteTableName",136],"(",["T_VARIABLE","$tableName",136],")",";",["T_WHITESPACE","\n            ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$value",137],["T_WHITESPACE"," ",137],["T_IS_IDENTICAL","===",137],["T_WHITESPACE"," ",137],["T_STRING","null",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_VARIABLE","$key",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","reset",138],"(",["T_VARIABLE","$table",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","primaryKey",138],")",";",["T_WHITESPACE","\n                ",138],["T_VARIABLE","$value",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","db",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","createCommand",139],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SELECT MAX(`",139],["T_VARIABLE","$key",139],["T_ENCAPSED_AND_WHITESPACE","`) FROM ",139],["T_VARIABLE","$tableName",139],"\"",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","queryScalar",139],"(",")",["T_WHITESPACE"," ",139],"+",["T_WHITESPACE"," ",139],["T_LNUMBER","1",139],";",["T_WHITESPACE","\n            ",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$value",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_INT_CAST","(int)",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$value",141],";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],"\"",["T_ENCAPSED_AND_WHITESPACE","ALTER TABLE ",144],["T_VARIABLE","$tableName",144],["T_ENCAPSED_AND_WHITESPACE"," AUTO_INCREMENT=",144],["T_VARIABLE","$value",144],"\"",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE"," ",145],["T_ELSEIF","elseif",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$table",145],["T_WHITESPACE"," ",145],["T_IS_IDENTICAL","===",145],["T_WHITESPACE"," ",145],["T_STRING","null",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_THROW","throw",146],["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_STRING","InvalidParamException",146],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Table not found: ",146],["T_VARIABLE","$tableName",146],"\"",")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE"," ",147],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_THROW","throw",148],["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","InvalidParamException",148],"(","\"",["T_ENCAPSED_AND_WHITESPACE","There is no sequence associated with table '",148],["T_VARIABLE","$tableName",148],["T_ENCAPSED_AND_WHITESPACE","'.",148],"\"",")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * Builds a SQL statement for enabling or disabling integrity check.\n     * @param bool $check whether to turn on or off the integrity check.\n     * @param string $schema the schema of the tables. Meaningless for MySQL.\n     * @param string $table the table name. Meaningless for MySQL.\n     * @return string the SQL statement for checking integrity\n     *\/",152],["T_WHITESPACE","\n    ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","checkIntegrity",159],"(",["T_VARIABLE","$check",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","true",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$schema",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","''",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$table",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","''",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'SET FOREIGN_KEY_CHECKS = '",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$check",161],["T_WHITESPACE"," ",161],"?",["T_WHITESPACE"," ",161],["T_LNUMBER","1",161],["T_WHITESPACE"," ",161],":",["T_WHITESPACE"," ",161],["T_LNUMBER","0",161],")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",164],["T_WHITESPACE","\n    ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","buildLimit",167],"(",["T_VARIABLE","$limit",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$offset",167],")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$sql",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","''",169],";",["T_WHITESPACE","\n        ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","hasLimit",170],"(",["T_VARIABLE","$limit",170],")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$sql",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'LIMIT '",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$limit",171],";",["T_WHITESPACE","\n            ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","hasOffset",172],"(",["T_VARIABLE","$offset",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n                ",172],["T_VARIABLE","$sql",173],["T_WHITESPACE"," ",173],["T_CONCAT_EQUAL",".=",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","' OFFSET '",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$offset",173],";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n        ",174],"}",["T_WHITESPACE"," ",175],["T_ELSEIF","elseif",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","hasOffset",175],"(",["T_VARIABLE","$offset",175],")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n            ",175],["T_COMMENT","\/\/ limit is not optional in MySQL\n",176],["T_WHITESPACE","            ",177],["T_COMMENT","\/\/ http:\/\/stackoverflow.com\/a\/271650\/1106908\n",177],["T_WHITESPACE","            ",178],["T_COMMENT","\/\/ http:\/\/dev.mysql.com\/doc\/refman\/5.0\/en\/select.html#idm47619502796240\n",178],["T_WHITESPACE","            ",179],["T_VARIABLE","$sql",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"\"",["T_ENCAPSED_AND_WHITESPACE","LIMIT ",179],["T_VARIABLE","$offset",179],["T_ENCAPSED_AND_WHITESPACE",", 18446744073709551615",179],"\"",";",["T_WHITESPACE"," ",179],["T_COMMENT","\/\/ 2^64-1\n",179],["T_WHITESPACE","        ",180],"}",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$sql",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",185],["T_WHITESPACE","\n    ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","insert",188],"(",["T_VARIABLE","$table",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$columns",188],",",["T_WHITESPACE"," ",188],"&",["T_VARIABLE","$params",188],")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$schema",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","db",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getSchema",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","(",["T_VARIABLE","$tableSchema",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$schema",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getTableSchema",191],"(",["T_VARIABLE","$table",191],")",")",["T_WHITESPACE"," ",191],["T_IS_NOT_IDENTICAL","!==",191],["T_WHITESPACE"," ",191],["T_STRING","null",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n            ",191],["T_VARIABLE","$columnSchemas",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$tableSchema",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","columns",192],";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE"," ",193],["T_ELSE","else",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$columnSchemas",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],"[","]",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$names",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],"[","]",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$placeholders",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],"[","]",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$values",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","' DEFAULT VALUES'",198],";",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$columns",199],["T_WHITESPACE"," ",199],["T_INSTANCEOF","instanceof",199],["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","yii",199],["T_NS_SEPARATOR","\\",199],["T_STRING","db",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Query",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_LIST","list",200],"(",["T_VARIABLE","$names",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$values",200],")",["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","prepareInsertSelectSubQuery",200],"(",["T_VARIABLE","$columns",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$schema",200],")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE"," ",201],["T_ELSE","else",201],["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$columns",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$name",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$value",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$names",203],"[","]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$schema",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","quoteColumnName",203],"(",["T_VARIABLE","$name",203],")",";",["T_WHITESPACE","\n                ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$value",204],["T_WHITESPACE"," ",204],["T_INSTANCEOF","instanceof",204],["T_WHITESPACE"," ",204],["T_STRING","Expression",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                    ",204],["T_VARIABLE","$placeholders",205],"[","]",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$value",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","expression",205],";",["T_WHITESPACE","\n                    ",205],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$value",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","params",206],["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$n",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$v",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n                        ",206],["T_VARIABLE","$params",207],"[",["T_VARIABLE","$n",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$v",207],";",["T_WHITESPACE","\n                    ",207],"}",["T_WHITESPACE","\n                ",208],"}",["T_WHITESPACE"," ",209],["T_ELSEIF","elseif",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$value",209],["T_WHITESPACE"," ",209],["T_INSTANCEOF","instanceof",209],["T_WHITESPACE"," ",209],["T_NS_SEPARATOR","\\",209],["T_STRING","yii",209],["T_NS_SEPARATOR","\\",209],["T_STRING","db",209],["T_NS_SEPARATOR","\\",209],["T_STRING","Query",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                    ",209],["T_LIST","list",210],"(",["T_VARIABLE","$sql",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$params",210],")",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","build",210],"(",["T_VARIABLE","$value",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$params",210],")",";",["T_WHITESPACE","\n                    ",210],["T_VARIABLE","$placeholders",211],"[","]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],"\"",["T_ENCAPSED_AND_WHITESPACE","(",211],["T_VARIABLE","$sql",211],["T_ENCAPSED_AND_WHITESPACE",")",211],"\"",";",["T_WHITESPACE","\n                ",211],"}",["T_WHITESPACE"," ",212],["T_ELSE","else",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n                    ",212],["T_VARIABLE","$phName",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","self",213],["T_DOUBLE_COLON","::",213],["T_STRING","PARAM_PREFIX",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_STRING","count",213],"(",["T_VARIABLE","$params",213],")",";",["T_WHITESPACE","\n                    ",213],["T_VARIABLE","$placeholders",214],"[","]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$phName",214],";",["T_WHITESPACE","\n                    ",214],["T_VARIABLE","$params",215],"[",["T_VARIABLE","$phName",215],"]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],"!",["T_STRING","is_array",215],"(",["T_VARIABLE","$value",215],")",["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_ISSET","isset",215],"(",["T_VARIABLE","$columnSchemas",215],"[",["T_VARIABLE","$name",215],"]",")",["T_WHITESPACE"," ",215],"?",["T_WHITESPACE"," ",215],["T_VARIABLE","$columnSchemas",215],"[",["T_VARIABLE","$name",215],"]",["T_OBJECT_OPERATOR","->",215],["T_STRING","dbTypecast",215],"(",["T_VARIABLE","$value",215],")",["T_WHITESPACE"," ",215],":",["T_WHITESPACE"," ",215],["T_VARIABLE","$value",215],";",["T_WHITESPACE","\n                ",215],"}",["T_WHITESPACE","\n            ",216],"}",["T_WHITESPACE","\n            ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_EMPTY","empty",218],"(",["T_VARIABLE","$names",218],")",["T_WHITESPACE"," ",218],["T_BOOLEAN_AND","&&",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$tableSchema",218],["T_WHITESPACE"," ",218],["T_IS_NOT_IDENTICAL","!==",218],["T_WHITESPACE"," ",218],["T_STRING","null",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n                ",218],["T_VARIABLE","$columns",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],"!",["T_EMPTY","empty",219],"(",["T_VARIABLE","$tableSchema",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","primaryKey",219],")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_VARIABLE","$tableSchema",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","primaryKey",219],["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],"[",["T_STRING","reset",219],"(",["T_VARIABLE","$tableSchema",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","columns",219],")",["T_OBJECT_OPERATOR","->",219],["T_STRING","name",219],"]",";",["T_WHITESPACE","\n                ",219],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$columns",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$name",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n                    ",220],["T_VARIABLE","$names",221],"[","]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$schema",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","quoteColumnName",221],"(",["T_VARIABLE","$name",221],")",";",["T_WHITESPACE","\n                    ",221],["T_VARIABLE","$placeholders",222],"[","]",["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'DEFAULT'",222],";",["T_WHITESPACE","\n                ",222],"}",["T_WHITESPACE","\n            ",223],"}",["T_WHITESPACE","\n        ",224],"}",["T_WHITESPACE","\n\n        ",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO '",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$schema",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","quoteTableName",227],"(",["T_VARIABLE","$table",227],")",["T_WHITESPACE","\n            ",227],".",["T_WHITESPACE"," ",228],"(","!",["T_EMPTY","empty",228],"(",["T_VARIABLE","$names",228],")",["T_WHITESPACE"," ",228],"?",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","' ('",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_STRING","implode",228],"(",["T_CONSTANT_ENCAPSED_STRING","', '",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$names",228],")",["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","')'",228],["T_WHITESPACE"," ",228],":",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","''",228],")",["T_WHITESPACE","\n            ",228],".",["T_WHITESPACE"," ",229],"(","!",["T_EMPTY","empty",229],"(",["T_VARIABLE","$placeholders",229],")",["T_WHITESPACE"," ",229],"?",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","' VALUES ('",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_STRING","implode",229],"(",["T_CONSTANT_ENCAPSED_STRING","', '",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$placeholders",229],")",["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","')'",229],["T_WHITESPACE"," ",229],":",["T_WHITESPACE"," ",229],["T_VARIABLE","$values",229],")",";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n\n    ",230],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",232],["T_WHITESPACE","\n    ",235],["T_PUBLIC","public",236],["T_WHITESPACE"," ",236],["T_FUNCTION","function",236],["T_WHITESPACE"," ",236],["T_STRING","addCommentOnColumn",236],"(",["T_VARIABLE","$table",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$column",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$comment",236],")",["T_WHITESPACE","\n    ",236],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$definition",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getColumnDefinition",238],"(",["T_VARIABLE","$table",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$column",238],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$definition",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","trim",239],"(",["T_STRING","preg_replace",239],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/COMMENT '(.*?)'\/i\"",239],",",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","''",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$definition",239],")",")",";",["T_WHITESPACE","\n\n        ",239],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",241],["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","db",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","quoteTableName",241],"(",["T_VARIABLE","$table",241],")",["T_WHITESPACE","\n            ",241],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","' CHANGE '",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","db",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","quoteColumnName",242],"(",["T_VARIABLE","$column",242],")",["T_WHITESPACE","\n            ",242],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","' '",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","db",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","quoteColumnName",243],"(",["T_VARIABLE","$column",243],")",["T_WHITESPACE","\n            ",243],".",["T_WHITESPACE"," ",244],"(",["T_EMPTY","empty",244],"(",["T_VARIABLE","$definition",244],")",["T_WHITESPACE"," ",244],"?",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","''",244],["T_WHITESPACE"," ",244],":",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","' '",244],["T_WHITESPACE"," ",244],".",["T_WHITESPACE"," ",244],["T_VARIABLE","$definition",244],")",["T_WHITESPACE","\n            ",244],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","' COMMENT '",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","db",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","quoteValue",245],"(",["T_VARIABLE","$comment",245],")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n\n    ",246],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",248],["T_WHITESPACE","\n    ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","addCommentOnTable",252],"(",["T_VARIABLE","$table",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$comment",252],")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE '",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","quoteTableName",254],"(",["T_VARIABLE","$table",254],")",["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","' COMMENT '",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","quoteValue",254],"(",["T_VARIABLE","$comment",254],")",";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n\n    ",255],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",257],["T_WHITESPACE","\n    ",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","dropCommentFromColumn",261],"(",["T_VARIABLE","$table",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$column",261],")",["T_WHITESPACE","\n    ",261],"{",["T_WHITESPACE","\n        ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","addCommentOnColumn",263],"(",["T_VARIABLE","$table",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$column",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","''",263],")",";",["T_WHITESPACE","\n    ",263],"}",["T_WHITESPACE","\n\n    ",264],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     * @since 2.0.8\n     *\/",266],["T_WHITESPACE","\n    ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","dropCommentFromTable",270],"(",["T_VARIABLE","$table",270],")",["T_WHITESPACE","\n    ",270],"{",["T_WHITESPACE","\n        ",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","addCommentOnTable",272],"(",["T_VARIABLE","$table",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","''",272],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n\n\n    ",273],["T_DOC_COMMENT","\/**\n     * Gets column definition.\n     *\n     * @param string $table table name\n     * @param string $column column name\n     * @return null|string the column definition\n     * @throws Exception in case when table does not contain column\n     *\/",276],["T_WHITESPACE","\n    ",283],["T_PRIVATE","private",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getColumnDefinition",284],"(",["T_VARIABLE","$table",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$column",284],")",["T_WHITESPACE","\n    ",284],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$quotedTable",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","db",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","quoteTableName",286],"(",["T_VARIABLE","$table",286],")",";",["T_WHITESPACE","\n        ",286],["T_VARIABLE","$row",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","db",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","createCommand",287],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW CREATE TABLE '",287],["T_WHITESPACE"," ",287],".",["T_WHITESPACE"," ",287],["T_VARIABLE","$quotedTable",287],")",["T_OBJECT_OPERATOR","->",287],["T_STRING","queryOne",287],"(",")",";",["T_WHITESPACE","\n        ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$row",288],["T_WHITESPACE"," ",288],["T_IS_IDENTICAL","===",288],["T_WHITESPACE"," ",288],["T_STRING","false",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n            ",288],["T_THROW","throw",289],["T_WHITESPACE"," ",289],["T_NEW","new",289],["T_WHITESPACE"," ",289],["T_STRING","Exception",289],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to find column '",289],["T_VARIABLE","$column",289],["T_ENCAPSED_AND_WHITESPACE","' in table '",289],["T_VARIABLE","$table",289],["T_ENCAPSED_AND_WHITESPACE","'.",289],"\"",")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_ISSET","isset",291],"(",["T_VARIABLE","$row",291],"[",["T_CONSTANT_ENCAPSED_STRING","'Create Table'",291],"]",")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n            ",291],["T_VARIABLE","$sql",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$row",292],"[",["T_CONSTANT_ENCAPSED_STRING","'Create Table'",292],"]",";",["T_WHITESPACE","\n        ",292],"}",["T_WHITESPACE"," ",293],["T_ELSE","else",293],["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n            ",293],["T_VARIABLE","$row",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","array_values",294],"(",["T_VARIABLE","$row",294],")",";",["T_WHITESPACE","\n            ",294],["T_VARIABLE","$sql",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$row",295],"[",["T_LNUMBER","1",295],"]",";",["T_WHITESPACE","\n        ",295],"}",["T_WHITESPACE","\n        ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_STRING","preg_match_all",297],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\\s*`(.*?)`\\s+(.*?),?$\/m'",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$sql",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$matches",297],")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n            ",297],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$matches",298],"[",["T_LNUMBER","1",298],"]",["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$i",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$c",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n                ",298],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$c",299],["T_WHITESPACE"," ",299],["T_IS_IDENTICAL","===",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$column",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                    ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$matches",300],"[",["T_LNUMBER","2",300],"]","[",["T_VARIABLE","$i",300],"]",";",["T_WHITESPACE","\n                ",300],"}",["T_WHITESPACE","\n            ",301],"}",["T_WHITESPACE","\n        ",302],"}",["T_WHITESPACE","\n        ",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","null",304],";",["T_WHITESPACE","\n    ",304],"}",["T_WHITESPACE","\n",305],"}",["T_WHITESPACE","\n",306]]
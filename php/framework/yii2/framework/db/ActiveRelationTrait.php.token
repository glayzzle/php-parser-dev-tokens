[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidConfigException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidParamException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * ActiveRelationTrait implements the common methods and properties for active record relational queries.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @author Carsten Brandt <mail@cebe.cc>\n * @since 2.0\n *\n * @method ActiveRecordInterface one()\n * @method ActiveRecordInterface[] all()\n * @property ActiveRecord $modelClass\n *\/",13],["T_WHITESPACE","\n",23],["T_TRAIT","trait",24],["T_WHITESPACE"," ",24],["T_STRING","ActiveRelationTrait",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var bool whether this query represents a relation to more than one record.\n     * This property is only used in relational context. If true, this relation will\n     * populate all query results into AR instances using [[Query::all()|all()]].\n     * If false, only the first row of the results will be retrieved using [[Query::one()|one()]].\n     *\/",26],["T_WHITESPACE","\n    ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$multiple",32],";",["T_WHITESPACE","\n    ",32],["T_DOC_COMMENT","\/**\n     * @var ActiveRecord the primary model of a relational query.\n     * This is used only in lazy loading with dynamic query options.\n     *\/",33],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$primaryModel",37],";",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/**\n     * @var array the columns of the primary and foreign tables that establish a relation.\n     * The array keys must be columns of the table for this relation, and the array values\n     * must be the corresponding columns from the primary table.\n     * Do not prefix or quote the column names as this will be done automatically by Yii.\n     * This property is only used in relational context.\n     *\/",38],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$link",45],";",["T_WHITESPACE","\n    ",45],["T_DOC_COMMENT","\/**\n     * @var array|object the query associated with the junction table. Please call [[via()]]\n     * to set this property instead of directly setting it.\n     * This property is only used in relational context.\n     * @see via()\n     *\/",46],["T_WHITESPACE","\n    ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$via",52],";",["T_WHITESPACE","\n    ",52],["T_DOC_COMMENT","\/**\n     * @var string the name of the relation that is the inverse of this relation.\n     * For example, an order has a customer, which means the inverse of the \"customer\" relation\n     * is the \"orders\", and the inverse of the \"orders\" relation is the \"customer\".\n     * If this property is set, the primary record(s) will be referenced through the specified relation.\n     * For example, `$customer->orders[0]->customer` and `$customer` will be the same object,\n     * and accessing the customer of an order will not trigger new DB query.\n     * This property is only used in relational context.\n     * @see inverseOf()\n     *\/",53],["T_WHITESPACE","\n    ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$inverseOf",63],";",["T_WHITESPACE","\n\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Clones internal objects.\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","__clone",69],"(",")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_STRING","parent",71],["T_DOUBLE_COLON","::",71],["T_STRING","__clone",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_COMMENT","\/\/ make a clone of \"via\" object so that the same query object can be reused multiple times\n",72],["T_WHITESPACE","        ",73],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_STRING","is_object",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","via",73],")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","via",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CLONE","clone",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","via",74],";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE"," ",75],["T_ELSEIF","elseif",75],["T_WHITESPACE"," ",75],"(",["T_STRING","is_array",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","via",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n            ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","via",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","via",76],"[",["T_LNUMBER","0",76],"]",",",["T_WHITESPACE"," ",76],["T_CLONE","clone",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","via",76],"[",["T_LNUMBER","1",76],"]","]",";",["T_WHITESPACE","\n        ",76],"}",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * Specifies the relation associated with the junction table.\n     *\n     * Use this method to specify a pivot record\/table when declaring a relation in the [[ActiveRecord]] class:\n     *\n     * ```php\n     * class Order extends ActiveRecord\n     * {\n     *    public function getOrderItems() {\n     *        return $this->hasMany(OrderItem::className(), ['order_id' => 'id']);\n     *    }\n     * \n     *    public function getItems() {\n     *        return $this->hasMany(Item::className(), ['id' => 'item_id'])\n     *                    ->via('orderItems');\n     *    }\n     * }\n     * ```\n     *\n     * @param string $relationName the relation name. This refers to a relation declared in [[primaryModel]].\n     * @param callable $callable a PHP callback for customizing the relation associated with the junction table.\n     * Its signature should be `function($query)`, where `$query` is the query to be customized.\n     * @return $this the relation object itself.\n     *\/",80],["T_WHITESPACE","\n    ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","via",104],"(",["T_VARIABLE","$relationName",104],",",["T_WHITESPACE"," ",104],["T_CALLABLE","callable",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$callable",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE","\n    ",104],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$relation",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","primaryModel",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getRelation",106],"(",["T_VARIABLE","$relationName",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","via",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[",["T_VARIABLE","$relationName",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$relation",107],"]",";",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$callable",108],["T_WHITESPACE"," ",108],["T_IS_NOT_IDENTICAL","!==",108],["T_WHITESPACE"," ",108],["T_STRING","null",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_STRING","call_user_func",109],"(",["T_VARIABLE","$callable",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$relation",109],")",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * Sets the name of the relation that is the inverse of this relation.\n     * For example, an order has a customer, which means the inverse of the \"customer\" relation\n     * is the \"orders\", and the inverse of the \"orders\" relation is the \"customer\".\n     * If this property is set, the primary record(s) will be referenced through the specified relation.\n     * For example, `$customer->orders[0]->customer` and `$customer` will be the same object,\n     * and accessing the customer of an order will not trigger a new DB query.\n     *\n     * Use this method when declaring a relation in the [[ActiveRecord]] class:\n     *\n     * ```php\n     * public function getOrders()\n     * {\n     *     return $this->hasMany(Order::className(), ['customer_id' => 'id'])->inverseOf('customer');\n     * }\n     * ```\n     *\n     * @param string $relationName the name of the relation that is the inverse of this relation.\n     * @return $this the relation object itself.\n     *\/",114],["T_WHITESPACE","\n    ",133],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","inverseOf",134],"(",["T_VARIABLE","$relationName",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","inverseOf",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$relationName",136],";",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_DOC_COMMENT","\/**\n     * Finds the related records for the specified primary record.\n     * This method is invoked when a relation of an ActiveRecord is being accessed in a lazy fashion.\n     * @param string $name the relation name\n     * @param ActiveRecordInterface|BaseActiveRecord $model the primary model\n     * @return mixed the related record(s)\n     * @throws InvalidParamException if the relation is invalid\n     *\/",140],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","findFor",148],"(",["T_VARIABLE","$name",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$model",148],")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_STRING","method_exists",150],"(",["T_VARIABLE","$model",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'get'",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$name",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_VARIABLE","$method",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_NEW","new",151],["T_WHITESPACE"," ",151],["T_NS_SEPARATOR","\\",151],["T_STRING","ReflectionMethod",151],"(",["T_VARIABLE","$model",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'get'",151],["T_WHITESPACE"," ",151],".",["T_WHITESPACE"," ",151],["T_VARIABLE","$name",151],")",";",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$realName",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","lcfirst",152],"(",["T_STRING","substr",152],"(",["T_VARIABLE","$method",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getName",152],"(",")",",",["T_WHITESPACE"," ",152],["T_LNUMBER","3",152],")",")",";",["T_WHITESPACE","\n            ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$realName",153],["T_WHITESPACE"," ",153],["T_IS_NOT_IDENTICAL","!==",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$name",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_THROW","throw",154],["T_WHITESPACE"," ",154],["T_NEW","new",154],["T_WHITESPACE"," ",154],["T_STRING","InvalidParamException",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Relation names are case sensitive. '",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_STRING","get_class",154],"(",["T_VARIABLE","$model",154],")",["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],"\"",["T_ENCAPSED_AND_WHITESPACE"," has a relation named \\\"",154],["T_VARIABLE","$realName",154],["T_ENCAPSED_AND_WHITESPACE","\\\" instead of \\\"",154],["T_VARIABLE","$name",154],["T_ENCAPSED_AND_WHITESPACE","\\\".",154],"\"",")",";",["T_WHITESPACE","\n            ",154],"}",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_RETURN","return",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","multiple",158],["T_WHITESPACE"," ",158],"?",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","all",158],"(",")",["T_WHITESPACE"," ",158],":",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","one",158],"(",")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_DOC_COMMENT","\/**\n     * If applicable, populate the query's primary model into the related records' inverse relationship\n     * @param array $result the array of related records as generated by [[populate()]]\n     * @since 2.0.9\n     *\/",161],["T_WHITESPACE","\n    ",165],["T_PRIVATE","private",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","addInverseRelations",166],"(","&",["T_VARIABLE","$result",166],")",["T_WHITESPACE","\n    ",166],"{",["T_WHITESPACE","\n        ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","inverseOf",168],["T_WHITESPACE"," ",168],["T_IS_IDENTICAL","===",168],["T_WHITESPACE"," ",168],["T_STRING","null",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_RETURN","return",169],";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$i",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$relatedModel",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$relatedModel",173],["T_WHITESPACE"," ",173],["T_INSTANCEOF","instanceof",173],["T_WHITESPACE"," ",173],["T_STRING","ActiveRecordInterface",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_ISSET","isset",174],"(",["T_VARIABLE","$inverseRelation",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n                    ",174],["T_VARIABLE","$inverseRelation",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$relatedModel",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getRelation",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","inverseOf",175],")",";",["T_WHITESPACE","\n                ",175],"}",["T_WHITESPACE","\n                ",176],["T_VARIABLE","$relatedModel",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","populateRelation",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","inverseOf",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$inverseRelation",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","multiple",177],["T_WHITESPACE"," ",177],"?",["T_WHITESPACE"," ",177],"[",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","primaryModel",177],"]",["T_WHITESPACE"," ",177],":",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","primaryModel",177],")",";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE"," ",178],["T_ELSE","else",178],["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n                ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(","!",["T_ISSET","isset",179],"(",["T_VARIABLE","$inverseRelation",179],")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n                    ",179],["T_VARIABLE","$inverseRelation",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],"(",["T_NEW","new",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","modelClass",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getRelation",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","inverseOf",180],")",";",["T_WHITESPACE","\n                ",180],"}",["T_WHITESPACE","\n                ",181],["T_VARIABLE","$result",182],"[",["T_VARIABLE","$i",182],"]","[",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","inverseOf",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$inverseRelation",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","multiple",182],["T_WHITESPACE"," ",182],"?",["T_WHITESPACE"," ",182],"[",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","primaryModel",182],"]",["T_WHITESPACE"," ",182],":",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","primaryModel",182],";",["T_WHITESPACE","\n            ",182],"}",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_DOC_COMMENT","\/**\n     * Finds the related records and populates them into the primary models.\n     * @param string $name the relation name\n     * @param array $primaryModels primary models\n     * @return array the related models\n     * @throws InvalidConfigException if [[link]] is invalid\n     *\/",187],["T_WHITESPACE","\n    ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","populateRelation",194],"(",["T_VARIABLE","$name",194],",",["T_WHITESPACE"," ",194],"&",["T_VARIABLE","$primaryModels",194],")",["T_WHITESPACE","\n    ",194],"{",["T_WHITESPACE","\n        ",195],["T_IF","if",196],["T_WHITESPACE"," ",196],"(","!",["T_STRING","is_array",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","link",196],")",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n            ",196],["T_THROW","throw",197],["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_STRING","InvalidConfigException",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid link: it must be an array of key-value pairs.'",197],")",";",["T_WHITESPACE","\n        ",197],"}",["T_WHITESPACE","\n\n        ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","via",200],["T_WHITESPACE"," ",200],["T_INSTANCEOF","instanceof",200],["T_WHITESPACE"," ",200],["T_STRING","self",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_COMMENT","\/\/ via junction table\n",201],["T_WHITESPACE","            ",202],["T_COMMENT","\/* @var $viaQuery ActiveRelationTrait *\/",202],["T_WHITESPACE","\n            ",202],["T_VARIABLE","$viaQuery",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","via",203],";",["T_WHITESPACE","\n            ",203],["T_VARIABLE","$viaModels",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$viaQuery",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","findJunctionRows",204],"(",["T_VARIABLE","$primaryModels",204],")",";",["T_WHITESPACE","\n            ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","filterByModels",205],"(",["T_VARIABLE","$viaModels",205],")",";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE"," ",206],["T_ELSEIF","elseif",206],["T_WHITESPACE"," ",206],"(",["T_STRING","is_array",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","via",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_COMMENT","\/\/ via relation\n",207],["T_WHITESPACE","            ",208],["T_COMMENT","\/* @var $viaQuery ActiveRelationTrait|ActiveQueryTrait *\/",208],["T_WHITESPACE","\n            ",208],["T_LIST","list",209],"(",["T_VARIABLE","$viaName",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$viaQuery",209],")",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","via",209],";",["T_WHITESPACE","\n            ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$viaQuery",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","asArray",210],["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_STRING","null",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n                ",210],["T_COMMENT","\/\/ inherit asArray from primary query\n",211],["T_WHITESPACE","                ",212],["T_VARIABLE","$viaQuery",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","asArray",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","asArray",212],")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$viaQuery",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","primaryModel",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","null",214],";",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$viaModels",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$viaQuery",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","populateRelation",215],"(",["T_VARIABLE","$viaName",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$primaryModels",215],")",";",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","filterByModels",216],"(",["T_VARIABLE","$viaModels",216],")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE"," ",217],["T_ELSE","else",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","filterByModels",218],"(",["T_VARIABLE","$primaryModels",218],")",";",["T_WHITESPACE","\n        ",218],"}",["T_WHITESPACE","\n\n        ",219],["T_IF","if",221],["T_WHITESPACE"," ",221],"(","!",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","multiple",221],["T_WHITESPACE"," ",221],["T_BOOLEAN_AND","&&",221],["T_WHITESPACE"," ",221],["T_STRING","count",221],"(",["T_VARIABLE","$primaryModels",221],")",["T_WHITESPACE"," ",221],["T_IS_IDENTICAL","===",221],["T_WHITESPACE"," ",221],["T_LNUMBER","1",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$model",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","one",222],"(",")",";",["T_WHITESPACE","\n            ",222],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$primaryModels",223],["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$i",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$primaryModel",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_IF","if",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$primaryModel",224],["T_WHITESPACE"," ",224],["T_INSTANCEOF","instanceof",224],["T_WHITESPACE"," ",224],["T_STRING","ActiveRecordInterface",224],")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n                    ",224],["T_VARIABLE","$primaryModel",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","populateRelation",225],"(",["T_VARIABLE","$name",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$model",225],")",";",["T_WHITESPACE","\n                ",225],"}",["T_WHITESPACE"," ",226],["T_ELSE","else",226],["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                    ",226],["T_VARIABLE","$primaryModels",227],"[",["T_VARIABLE","$i",227],"]","[",["T_VARIABLE","$name",227],"]",["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$model",227],";",["T_WHITESPACE","\n                ",227],"}",["T_WHITESPACE","\n                ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","inverseOf",229],["T_WHITESPACE"," ",229],["T_IS_NOT_IDENTICAL","!==",229],["T_WHITESPACE"," ",229],["T_STRING","null",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n                    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","populateInverseRelation",230],"(",["T_VARIABLE","$primaryModels",230],",",["T_WHITESPACE"," ",230],"[",["T_VARIABLE","$model",230],"]",",",["T_WHITESPACE"," ",230],["T_VARIABLE","$name",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","inverseOf",230],")",";",["T_WHITESPACE","\n                ",230],"}",["T_WHITESPACE","\n            ",231],"}",["T_WHITESPACE","\n\n            ",232],["T_RETURN","return",234],["T_WHITESPACE"," ",234],"[",["T_VARIABLE","$model",234],"]",";",["T_WHITESPACE","\n        ",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n            ",235],["T_COMMENT","\/\/ https:\/\/github.com\/yiisoft\/yii2\/issues\/3197\n",236],["T_WHITESPACE","            ",237],["T_COMMENT","\/\/ delay indexing related models after buckets are built\n",237],["T_WHITESPACE","            ",238],["T_VARIABLE","$indexBy",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","indexBy",238],";",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","indexBy",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","null",239],";",["T_WHITESPACE","\n            ",239],["T_VARIABLE","$models",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","all",240],"(",")",";",["T_WHITESPACE","\n\n            ",240],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_ISSET","isset",242],"(",["T_VARIABLE","$viaModels",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$viaQuery",242],")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$buckets",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","buildBuckets",243],"(",["T_VARIABLE","$models",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","link",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$viaModels",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$viaQuery",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","link",243],")",";",["T_WHITESPACE","\n            ",243],"}",["T_WHITESPACE"," ",244],["T_ELSE","else",244],["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n                ",244],["T_VARIABLE","$buckets",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","buildBuckets",245],"(",["T_VARIABLE","$models",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","link",245],")",";",["T_WHITESPACE","\n            ",245],"}",["T_WHITESPACE","\n\n            ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","indexBy",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$indexBy",248],";",["T_WHITESPACE","\n            ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","indexBy",249],["T_WHITESPACE"," ",249],["T_IS_NOT_IDENTICAL","!==",249],["T_WHITESPACE"," ",249],["T_STRING","null",249],["T_WHITESPACE"," ",249],["T_BOOLEAN_AND","&&",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","multiple",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$buckets",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","indexBuckets",250],"(",["T_VARIABLE","$buckets",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","indexBy",250],")",";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE","\n\n            ",251],["T_VARIABLE","$link",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","array_values",253],"(",["T_ISSET","isset",253],"(",["T_VARIABLE","$viaQuery",253],")",["T_WHITESPACE"," ",253],"?",["T_WHITESPACE"," ",253],["T_VARIABLE","$viaQuery",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","link",253],["T_WHITESPACE"," ",253],":",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","link",253],")",";",["T_WHITESPACE","\n            ",253],["T_FOREACH","foreach",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$primaryModels",254],["T_WHITESPACE"," ",254],["T_AS","as",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$i",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$primaryModel",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n                ",254],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","multiple",255],["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_STRING","count",255],"(",["T_VARIABLE","$link",255],")",["T_WHITESPACE"," ",255],["T_IS_IDENTICAL","===",255],["T_WHITESPACE"," ",255],["T_LNUMBER","1",255],["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_STRING","is_array",255],"(",["T_VARIABLE","$keys",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$primaryModel",255],"[",["T_STRING","reset",255],"(",["T_VARIABLE","$link",255],")","]",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n                    ",255],["T_VARIABLE","$value",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],"[","]",";",["T_WHITESPACE","\n                    ",256],["T_FOREACH","foreach",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$keys",257],["T_WHITESPACE"," ",257],["T_AS","as",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$key",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                        ",257],["T_VARIABLE","$key",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","normalizeModelKey",258],"(",["T_VARIABLE","$key",258],")",";",["T_WHITESPACE","\n                        ",258],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_ISSET","isset",259],"(",["T_VARIABLE","$buckets",259],"[",["T_VARIABLE","$key",259],"]",")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                            ",259],["T_IF","if",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","indexBy",260],["T_WHITESPACE"," ",260],["T_IS_NOT_IDENTICAL","!==",260],["T_WHITESPACE"," ",260],["T_STRING","null",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n                                ",260],["T_COMMENT","\/\/ if indexBy is set, array_merge will cause renumbering of numeric array\n",261],["T_WHITESPACE","                                ",262],["T_FOREACH","foreach",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$buckets",262],"[",["T_VARIABLE","$key",262],"]",["T_WHITESPACE"," ",262],["T_AS","as",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$bucketKey",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$bucketValue",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n                                    ",262],["T_VARIABLE","$value",263],"[",["T_VARIABLE","$bucketKey",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$bucketValue",263],";",["T_WHITESPACE","\n                                ",263],"}",["T_WHITESPACE","\n                            ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n                                ",265],["T_VARIABLE","$value",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","array_merge",266],"(",["T_VARIABLE","$value",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$buckets",266],"[",["T_VARIABLE","$key",266],"]",")",";",["T_WHITESPACE","\n                            ",266],"}",["T_WHITESPACE","\n                        ",267],"}",["T_WHITESPACE","\n                    ",268],"}",["T_WHITESPACE","\n                ",269],"}",["T_WHITESPACE"," ",270],["T_ELSE","else",270],["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n                    ",270],["T_VARIABLE","$key",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getModelKey",271],"(",["T_VARIABLE","$primaryModel",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$link",271],")",";",["T_WHITESPACE","\n                    ",271],["T_VARIABLE","$value",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ISSET","isset",272],"(",["T_VARIABLE","$buckets",272],"[",["T_VARIABLE","$key",272],"]",")",["T_WHITESPACE"," ",272],"?",["T_WHITESPACE"," ",272],["T_VARIABLE","$buckets",272],"[",["T_VARIABLE","$key",272],"]",["T_WHITESPACE"," ",272],":",["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","multiple",272],["T_WHITESPACE"," ",272],"?",["T_WHITESPACE"," ",272],"[","]",["T_WHITESPACE"," ",272],":",["T_WHITESPACE"," ",272],["T_STRING","null",272],")",";",["T_WHITESPACE","\n                ",272],"}",["T_WHITESPACE","\n                ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$primaryModel",274],["T_WHITESPACE"," ",274],["T_INSTANCEOF","instanceof",274],["T_WHITESPACE"," ",274],["T_STRING","ActiveRecordInterface",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                    ",274],["T_VARIABLE","$primaryModel",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","populateRelation",275],"(",["T_VARIABLE","$name",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$value",275],")",";",["T_WHITESPACE","\n                ",275],"}",["T_WHITESPACE"," ",276],["T_ELSE","else",276],["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                    ",276],["T_VARIABLE","$primaryModels",277],"[",["T_VARIABLE","$i",277],"]","[",["T_VARIABLE","$name",277],"]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$value",277],";",["T_WHITESPACE","\n                ",277],"}",["T_WHITESPACE","\n            ",278],"}",["T_WHITESPACE","\n            ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","inverseOf",280],["T_WHITESPACE"," ",280],["T_IS_NOT_IDENTICAL","!==",280],["T_WHITESPACE"," ",280],["T_STRING","null",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n                ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","populateInverseRelation",281],"(",["T_VARIABLE","$primaryModels",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$models",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$name",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","inverseOf",281],")",";",["T_WHITESPACE","\n            ",281],"}",["T_WHITESPACE","\n\n            ",282],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$models",284],";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_DOC_COMMENT","\/**\n     * @param ActiveRecordInterface[] $primaryModels primary models\n     * @param ActiveRecordInterface[] $models models\n     * @param string $primaryName the primary relation name\n     * @param string $name the relation name\n     *\/",288],["T_WHITESPACE","\n    ",293],["T_PRIVATE","private",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","populateInverseRelation",294],"(","&",["T_VARIABLE","$primaryModels",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$models",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$primaryName",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$name",294],")",["T_WHITESPACE","\n    ",294],"{",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_EMPTY","empty",296],"(",["T_VARIABLE","$models",296],")",["T_WHITESPACE"," ",296],["T_BOOLEAN_OR","||",296],["T_WHITESPACE"," ",296],["T_EMPTY","empty",296],"(",["T_VARIABLE","$primaryModels",296],")",")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_RETURN","return",297],";",["T_WHITESPACE","\n        ",297],"}",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$model",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","reset",299],"(",["T_VARIABLE","$models",299],")",";",["T_WHITESPACE","\n        ",299],["T_COMMENT","\/* @var $relation ActiveQueryInterface|ActiveQuery *\/",300],["T_WHITESPACE","\n        ",300],["T_VARIABLE","$relation",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$model",301],["T_WHITESPACE"," ",301],["T_INSTANCEOF","instanceof",301],["T_WHITESPACE"," ",301],["T_STRING","ActiveRecordInterface",301],["T_WHITESPACE"," ",301],"?",["T_WHITESPACE"," ",301],["T_VARIABLE","$model",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getRelation",301],"(",["T_VARIABLE","$name",301],")",["T_WHITESPACE"," ",301],":",["T_WHITESPACE"," ",301],"(",["T_NEW","new",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","modelClass",301],")",["T_OBJECT_OPERATOR","->",301],["T_STRING","getRelation",301],"(",["T_VARIABLE","$name",301],")",";",["T_WHITESPACE","\n\n        ",301],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$relation",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","multiple",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n            ",303],["T_VARIABLE","$buckets",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","buildBuckets",304],"(",["T_VARIABLE","$primaryModels",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$relation",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","link",304],",",["T_WHITESPACE"," ",304],["T_STRING","null",304],",",["T_WHITESPACE"," ",304],["T_STRING","null",304],",",["T_WHITESPACE"," ",304],["T_STRING","false",304],")",";",["T_WHITESPACE","\n            ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$model",305],["T_WHITESPACE"," ",305],["T_INSTANCEOF","instanceof",305],["T_WHITESPACE"," ",305],["T_STRING","ActiveRecordInterface",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n                ",305],["T_FOREACH","foreach",306],["T_WHITESPACE"," ",306],"(",["T_VARIABLE","$models",306],["T_WHITESPACE"," ",306],["T_AS","as",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$model",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                    ",306],["T_VARIABLE","$key",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getModelKey",307],"(",["T_VARIABLE","$model",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$relation",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","link",307],")",";",["T_WHITESPACE","\n                    ",307],["T_VARIABLE","$model",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","populateRelation",308],"(",["T_VARIABLE","$name",308],",",["T_WHITESPACE"," ",308],["T_ISSET","isset",308],"(",["T_VARIABLE","$buckets",308],"[",["T_VARIABLE","$key",308],"]",")",["T_WHITESPACE"," ",308],"?",["T_WHITESPACE"," ",308],["T_VARIABLE","$buckets",308],"[",["T_VARIABLE","$key",308],"]",["T_WHITESPACE"," ",308],":",["T_WHITESPACE"," ",308],"[","]",")",";",["T_WHITESPACE","\n                ",308],"}",["T_WHITESPACE","\n            ",309],"}",["T_WHITESPACE"," ",310],["T_ELSE","else",310],["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n                ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$primaryModels",311],["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$i",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$primaryModel",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n                    ",311],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","multiple",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n                        ",312],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$primaryModel",313],["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$j",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$m",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n                            ",313],["T_VARIABLE","$key",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getModelKey",314],"(",["T_VARIABLE","$m",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$relation",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","link",314],")",";",["T_WHITESPACE","\n                            ",314],["T_VARIABLE","$primaryModels",315],"[",["T_VARIABLE","$i",315],"]","[",["T_VARIABLE","$j",315],"]","[",["T_VARIABLE","$name",315],"]",["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_ISSET","isset",315],"(",["T_VARIABLE","$buckets",315],"[",["T_VARIABLE","$key",315],"]",")",["T_WHITESPACE"," ",315],"?",["T_WHITESPACE"," ",315],["T_VARIABLE","$buckets",315],"[",["T_VARIABLE","$key",315],"]",["T_WHITESPACE"," ",315],":",["T_WHITESPACE"," ",315],"[","]",";",["T_WHITESPACE","\n                        ",315],"}",["T_WHITESPACE","\n                    ",316],"}",["T_WHITESPACE"," ",317],["T_ELSEIF","elseif",317],["T_WHITESPACE"," ",317],"(","!",["T_EMPTY","empty",317],"(",["T_VARIABLE","$primaryModel",317],"[",["T_VARIABLE","$primaryName",317],"]",")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n                        ",317],["T_VARIABLE","$key",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getModelKey",318],"(",["T_VARIABLE","$primaryModel",318],"[",["T_VARIABLE","$primaryName",318],"]",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$relation",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","link",318],")",";",["T_WHITESPACE","\n                        ",318],["T_VARIABLE","$primaryModels",319],"[",["T_VARIABLE","$i",319],"]","[",["T_VARIABLE","$primaryName",319],"]","[",["T_VARIABLE","$name",319],"]",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_ISSET","isset",319],"(",["T_VARIABLE","$buckets",319],"[",["T_VARIABLE","$key",319],"]",")",["T_WHITESPACE"," ",319],"?",["T_WHITESPACE"," ",319],["T_VARIABLE","$buckets",319],"[",["T_VARIABLE","$key",319],"]",["T_WHITESPACE"," ",319],":",["T_WHITESPACE"," ",319],"[","]",";",["T_WHITESPACE","\n                    ",319],"}",["T_WHITESPACE","\n                ",320],"}",["T_WHITESPACE","\n            ",321],"}",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE"," ",323],["T_ELSE","else",323],["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n            ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","multiple",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n                ",324],["T_FOREACH","foreach",325],["T_WHITESPACE"," ",325],"(",["T_VARIABLE","$primaryModels",325],["T_WHITESPACE"," ",325],["T_AS","as",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$i",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$primaryModel",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n                    ",325],["T_FOREACH","foreach",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$primaryModel",326],"[",["T_VARIABLE","$primaryName",326],"]",["T_WHITESPACE"," ",326],["T_AS","as",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$j",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$m",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n                        ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$m",327],["T_WHITESPACE"," ",327],["T_INSTANCEOF","instanceof",327],["T_WHITESPACE"," ",327],["T_STRING","ActiveRecordInterface",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n                            ",327],["T_VARIABLE","$m",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","populateRelation",328],"(",["T_VARIABLE","$name",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$primaryModel",328],")",";",["T_WHITESPACE","\n                        ",328],"}",["T_WHITESPACE"," ",329],["T_ELSE","else",329],["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n                            ",329],["T_VARIABLE","$primaryModels",330],"[",["T_VARIABLE","$i",330],"]","[",["T_VARIABLE","$primaryName",330],"]","[",["T_VARIABLE","$j",330],"]","[",["T_VARIABLE","$name",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$primaryModel",330],";",["T_WHITESPACE","\n                        ",330],"}",["T_WHITESPACE","\n                    ",331],"}",["T_WHITESPACE","\n                ",332],"}",["T_WHITESPACE","\n            ",333],"}",["T_WHITESPACE"," ",334],["T_ELSE","else",334],["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n                ",334],["T_FOREACH","foreach",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$primaryModels",335],["T_WHITESPACE"," ",335],["T_AS","as",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$i",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$primaryModel",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n                    ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$primaryModels",336],"[",["T_VARIABLE","$i",336],"]","[",["T_VARIABLE","$primaryName",336],"]",["T_WHITESPACE"," ",336],["T_INSTANCEOF","instanceof",336],["T_WHITESPACE"," ",336],["T_STRING","ActiveRecordInterface",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n                        ",336],["T_VARIABLE","$primaryModels",337],"[",["T_VARIABLE","$i",337],"]","[",["T_VARIABLE","$primaryName",337],"]",["T_OBJECT_OPERATOR","->",337],["T_STRING","populateRelation",337],"(",["T_VARIABLE","$name",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$primaryModel",337],")",";",["T_WHITESPACE","\n                    ",337],"}",["T_WHITESPACE"," ",338],["T_ELSEIF","elseif",338],["T_WHITESPACE"," ",338],"(","!",["T_EMPTY","empty",338],"(",["T_VARIABLE","$primaryModels",338],"[",["T_VARIABLE","$i",338],"]","[",["T_VARIABLE","$primaryName",338],"]",")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n                        ",338],["T_VARIABLE","$primaryModels",339],"[",["T_VARIABLE","$i",339],"]","[",["T_VARIABLE","$primaryName",339],"]","[",["T_VARIABLE","$name",339],"]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$primaryModel",339],";",["T_WHITESPACE","\n                    ",339],"}",["T_WHITESPACE","\n                ",340],"}",["T_WHITESPACE","\n            ",341],"}",["T_WHITESPACE","\n        ",342],"}",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_DOC_COMMENT","\/**\n     * @param array $models\n     * @param array $link\n     * @param array $viaModels\n     * @param array $viaLink\n     * @param bool $checkMultiple\n     * @return array\n     *\/",346],["T_WHITESPACE","\n    ",353],["T_PRIVATE","private",354],["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],["T_STRING","buildBuckets",354],"(",["T_VARIABLE","$models",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$link",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$viaModels",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","null",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$viaLink",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","null",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$checkMultiple",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","true",354],")",["T_WHITESPACE","\n    ",354],"{",["T_WHITESPACE","\n        ",355],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$viaModels",356],["T_WHITESPACE"," ",356],["T_IS_NOT_IDENTICAL","!==",356],["T_WHITESPACE"," ",356],["T_STRING","null",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n            ",356],["T_VARIABLE","$map",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],"[","]",";",["T_WHITESPACE","\n            ",357],["T_VARIABLE","$viaLinkKeys",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","array_keys",358],"(",["T_VARIABLE","$viaLink",358],")",";",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$linkValues",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","array_values",359],"(",["T_VARIABLE","$link",359],")",";",["T_WHITESPACE","\n            ",359],["T_FOREACH","foreach",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$viaModels",360],["T_WHITESPACE"," ",360],["T_AS","as",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$viaModel",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n                ",360],["T_VARIABLE","$key1",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getModelKey",361],"(",["T_VARIABLE","$viaModel",361],",",["T_WHITESPACE"," ",361],["T_VARIABLE","$viaLinkKeys",361],")",";",["T_WHITESPACE","\n                ",361],["T_VARIABLE","$key2",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getModelKey",362],"(",["T_VARIABLE","$viaModel",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$linkValues",362],")",";",["T_WHITESPACE","\n                ",362],["T_VARIABLE","$map",363],"[",["T_VARIABLE","$key2",363],"]","[",["T_VARIABLE","$key1",363],"]",["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","true",363],";",["T_WHITESPACE","\n            ",363],"}",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n\n        ",365],["T_VARIABLE","$buckets",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],"[","]",";",["T_WHITESPACE","\n        ",367],["T_VARIABLE","$linkKeys",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","array_keys",368],"(",["T_VARIABLE","$link",368],")",";",["T_WHITESPACE","\n\n        ",368],["T_IF","if",370],["T_WHITESPACE"," ",370],"(",["T_ISSET","isset",370],"(",["T_VARIABLE","$map",370],")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n            ",370],["T_FOREACH","foreach",371],["T_WHITESPACE"," ",371],"(",["T_VARIABLE","$models",371],["T_WHITESPACE"," ",371],["T_AS","as",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$model",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n                ",371],["T_VARIABLE","$key",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getModelKey",372],"(",["T_VARIABLE","$model",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$linkKeys",372],")",";",["T_WHITESPACE","\n                ",372],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_ISSET","isset",373],"(",["T_VARIABLE","$map",373],"[",["T_VARIABLE","$key",373],"]",")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n                    ",373],["T_FOREACH","foreach",374],["T_WHITESPACE"," ",374],"(",["T_STRING","array_keys",374],"(",["T_VARIABLE","$map",374],"[",["T_VARIABLE","$key",374],"]",")",["T_WHITESPACE"," ",374],["T_AS","as",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$key2",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n                        ",374],["T_VARIABLE","$buckets",375],"[",["T_VARIABLE","$key2",375],"]","[","]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$model",375],";",["T_WHITESPACE","\n                    ",375],"}",["T_WHITESPACE","\n                ",376],"}",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n        ",378],"}",["T_WHITESPACE"," ",379],["T_ELSE","else",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n            ",379],["T_FOREACH","foreach",380],["T_WHITESPACE"," ",380],"(",["T_VARIABLE","$models",380],["T_WHITESPACE"," ",380],["T_AS","as",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$model",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n                ",380],["T_VARIABLE","$key",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getModelKey",381],"(",["T_VARIABLE","$model",381],",",["T_WHITESPACE"," ",381],["T_VARIABLE","$linkKeys",381],")",";",["T_WHITESPACE","\n                ",381],["T_VARIABLE","$buckets",382],"[",["T_VARIABLE","$key",382],"]","[","]",["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$model",382],";",["T_WHITESPACE","\n            ",382],"}",["T_WHITESPACE","\n        ",383],"}",["T_WHITESPACE","\n\n        ",384],["T_IF","if",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$checkMultiple",386],["T_WHITESPACE"," ",386],["T_BOOLEAN_AND","&&",386],["T_WHITESPACE"," ",386],"!",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","multiple",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n            ",386],["T_FOREACH","foreach",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$buckets",387],["T_WHITESPACE"," ",387],["T_AS","as",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$i",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$bucket",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n                ",387],["T_VARIABLE","$buckets",388],"[",["T_VARIABLE","$i",388],"]",["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","reset",388],"(",["T_VARIABLE","$bucket",388],")",";",["T_WHITESPACE","\n            ",388],"}",["T_WHITESPACE","\n        ",389],"}",["T_WHITESPACE","\n\n        ",390],["T_RETURN","return",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$buckets",392],";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n\n\n    ",393],["T_DOC_COMMENT","\/**\n     * Indexes buckets by column name.\n     *\n     * @param array $buckets\n     * @var string|callable $column the name of the column by which the query results should be indexed by.\n     * This can also be a callable (e.g. anonymous function) that returns the index value based on the given row data.\n     * @return array\n     *\/",396],["T_WHITESPACE","\n    ",403],["T_PRIVATE","private",404],["T_WHITESPACE"," ",404],["T_FUNCTION","function",404],["T_WHITESPACE"," ",404],["T_STRING","indexBuckets",404],"(",["T_VARIABLE","$buckets",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$indexBy",404],")",["T_WHITESPACE","\n    ",404],"{",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$result",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],"[","]",";",["T_WHITESPACE","\n        ",406],["T_FOREACH","foreach",407],["T_WHITESPACE"," ",407],"(",["T_VARIABLE","$buckets",407],["T_WHITESPACE"," ",407],["T_AS","as",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$key",407],["T_WHITESPACE"," ",407],["T_DOUBLE_ARROW","=>",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$models",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n            ",407],["T_VARIABLE","$result",408],"[",["T_VARIABLE","$key",408],"]",["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],"[","]",";",["T_WHITESPACE","\n            ",408],["T_FOREACH","foreach",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$models",409],["T_WHITESPACE"," ",409],["T_AS","as",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$model",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                ",409],["T_VARIABLE","$index",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_STRING","is_string",410],"(",["T_VARIABLE","$indexBy",410],")",["T_WHITESPACE"," ",410],"?",["T_WHITESPACE"," ",410],["T_VARIABLE","$model",410],"[",["T_VARIABLE","$indexBy",410],"]",["T_WHITESPACE"," ",410],":",["T_WHITESPACE"," ",410],["T_STRING","call_user_func",410],"(",["T_VARIABLE","$indexBy",410],",",["T_WHITESPACE"," ",410],["T_VARIABLE","$model",410],")",";",["T_WHITESPACE","\n                ",410],["T_VARIABLE","$result",411],"[",["T_VARIABLE","$key",411],"]","[",["T_VARIABLE","$index",411],"]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$model",411],";",["T_WHITESPACE","\n            ",411],"}",["T_WHITESPACE","\n        ",412],"}",["T_WHITESPACE","\n        ",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$result",414],";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n\n    ",415],["T_DOC_COMMENT","\/**\n     * @param array $attributes the attributes to prefix\n     * @return array\n     *\/",417],["T_WHITESPACE","\n    ",420],["T_PRIVATE","private",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","prefixKeyColumns",421],"(",["T_VARIABLE","$attributes",421],")",["T_WHITESPACE","\n    ",421],"{",["T_WHITESPACE","\n        ",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$this",423],["T_WHITESPACE"," ",423],["T_INSTANCEOF","instanceof",423],["T_WHITESPACE"," ",423],["T_STRING","ActiveQuery",423],["T_WHITESPACE"," ",423],["T_BOOLEAN_AND","&&",423],["T_WHITESPACE"," ",423],"(","!",["T_EMPTY","empty",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","join",423],")",["T_WHITESPACE"," ",423],["T_BOOLEAN_OR","||",423],["T_WHITESPACE"," ",423],"!",["T_EMPTY","empty",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","joinWith",423],")",")",")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n            ",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_EMPTY","empty",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","from",424],")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",425],["T_WHITESPACE","\n                ",425],["T_VARIABLE","$modelClass",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","modelClass",426],";",["T_WHITESPACE","\n                ",426],["T_VARIABLE","$alias",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$modelClass",427],["T_DOUBLE_COLON","::",427],["T_STRING","tableName",427],"(",")",";",["T_WHITESPACE","\n            ",427],"}",["T_WHITESPACE"," ",428],["T_ELSE","else",428],["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n                ",428],["T_FOREACH","foreach",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","from",429],["T_WHITESPACE"," ",429],["T_AS","as",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$alias",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$table",429],")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n                    ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(","!",["T_STRING","is_string",430],"(",["T_VARIABLE","$alias",430],")",")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n                        ",430],["T_VARIABLE","$alias",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$table",431],";",["T_WHITESPACE","\n                    ",431],"}",["T_WHITESPACE","\n                    ",432],["T_BREAK","break",433],";",["T_WHITESPACE","\n                ",433],"}",["T_WHITESPACE","\n            ",434],"}",["T_WHITESPACE","\n            ",435],["T_IF","if",436],["T_WHITESPACE"," ",436],"(",["T_ISSET","isset",436],"(",["T_VARIABLE","$alias",436],")",")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n                ",436],["T_FOREACH","foreach",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$attributes",437],["T_WHITESPACE"," ",437],["T_AS","as",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$i",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$attribute",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n                    ",437],["T_VARIABLE","$attributes",438],"[",["T_VARIABLE","$i",438],"]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],"\"",["T_VARIABLE","$alias",438],["T_ENCAPSED_AND_WHITESPACE",".",438],["T_VARIABLE","$attribute",438],"\"",";",["T_WHITESPACE","\n                ",438],"}",["T_WHITESPACE","\n            ",439],"}",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE","\n        ",441],["T_RETURN","return",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$attributes",442],";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n\n    ",443],["T_DOC_COMMENT","\/**\n     * @param array $models\n     *\/",445],["T_WHITESPACE","\n    ",447],["T_PRIVATE","private",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","filterByModels",448],"(",["T_VARIABLE","$models",448],")",["T_WHITESPACE","\n    ",448],"{",["T_WHITESPACE","\n        ",449],["T_VARIABLE","$attributes",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","array_keys",450],"(",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","link",450],")",";",["T_WHITESPACE","\n\n        ",450],["T_VARIABLE","$attributes",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","prefixKeyColumns",452],"(",["T_VARIABLE","$attributes",452],")",";",["T_WHITESPACE","\n\n        ",452],["T_VARIABLE","$values",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],"[","]",";",["T_WHITESPACE","\n        ",454],["T_IF","if",455],["T_WHITESPACE"," ",455],"(",["T_STRING","count",455],"(",["T_VARIABLE","$attributes",455],")",["T_WHITESPACE"," ",455],["T_IS_IDENTICAL","===",455],["T_WHITESPACE"," ",455],["T_LNUMBER","1",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_COMMENT","\/\/ single key\n",456],["T_WHITESPACE","            ",457],["T_VARIABLE","$attribute",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","reset",457],"(",["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","link",457],")",";",["T_WHITESPACE","\n            ",457],["T_FOREACH","foreach",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$models",458],["T_WHITESPACE"," ",458],["T_AS","as",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$model",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n                ",458],["T_IF","if",459],["T_WHITESPACE"," ",459],"(","(",["T_VARIABLE","$value",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_VARIABLE","$model",459],"[",["T_VARIABLE","$attribute",459],"]",")",["T_WHITESPACE"," ",459],["T_IS_NOT_IDENTICAL","!==",459],["T_WHITESPACE"," ",459],["T_STRING","null",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n                    ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_STRING","is_array",460],"(",["T_VARIABLE","$value",460],")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n                        ",460],["T_VARIABLE","$values",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_STRING","array_merge",461],"(",["T_VARIABLE","$values",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$value",461],")",";",["T_WHITESPACE","\n                    ",461],"}",["T_WHITESPACE"," ",462],["T_ELSE","else",462],["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n                        ",462],["T_VARIABLE","$values",463],"[","]",["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$value",463],";",["T_WHITESPACE","\n                    ",463],"}",["T_WHITESPACE","\n                ",464],"}",["T_WHITESPACE","\n            ",465],"}",["T_WHITESPACE","\n            ",466],["T_IF","if",467],["T_WHITESPACE"," ",467],"(",["T_EMPTY","empty",467],"(",["T_VARIABLE","$values",467],")",")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n                ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","emulateExecution",468],"(",")",";",["T_WHITESPACE","\n            ",468],"}",["T_WHITESPACE","\n        ",469],"}",["T_WHITESPACE"," ",470],["T_ELSE","else",470],["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n            ",470],["T_COMMENT","\/\/ composite keys\n",471],["T_WHITESPACE","\n            ",472],["T_COMMENT","\/\/ ensure keys of $this->link are prefixed the same way as $attributes\n",473],["T_WHITESPACE","            ",474],["T_VARIABLE","$prefixedLink",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","array_combine",474],"(",["T_WHITESPACE","\n                ",474],["T_VARIABLE","$attributes",475],",",["T_WHITESPACE","\n                ",475],["T_STRING","array_values",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","link",476],")",["T_WHITESPACE","\n            ",476],")",";",["T_WHITESPACE","\n            ",477],["T_FOREACH","foreach",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$models",478],["T_WHITESPACE"," ",478],["T_AS","as",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$model",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n                ",478],["T_VARIABLE","$v",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],"[","]",";",["T_WHITESPACE","\n                ",479],["T_FOREACH","foreach",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$prefixedLink",480],["T_WHITESPACE"," ",480],["T_AS","as",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$attribute",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$link",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n                    ",480],["T_VARIABLE","$v",481],"[",["T_VARIABLE","$attribute",481],"]",["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$model",481],"[",["T_VARIABLE","$link",481],"]",";",["T_WHITESPACE","\n                ",481],"}",["T_WHITESPACE","\n                ",482],["T_VARIABLE","$values",483],"[","]",["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$v",483],";",["T_WHITESPACE","\n                ",483],["T_IF","if",484],["T_WHITESPACE"," ",484],"(",["T_EMPTY","empty",484],"(",["T_VARIABLE","$v",484],")",")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n                    ",484],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","emulateExecution",485],"(",")",";",["T_WHITESPACE","\n                ",485],"}",["T_WHITESPACE","\n            ",486],"}",["T_WHITESPACE","\n        ",487],"}",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","andWhere",489],"(","[",["T_CONSTANT_ENCAPSED_STRING","'in'",489],",",["T_WHITESPACE"," ",489],["T_VARIABLE","$attributes",489],",",["T_WHITESPACE"," ",489],["T_STRING","array_unique",489],"(",["T_VARIABLE","$values",489],",",["T_WHITESPACE"," ",489],["T_STRING","SORT_REGULAR",489],")","]",")",";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n\n    ",490],["T_DOC_COMMENT","\/**\n     * @param ActiveRecordInterface|array $model\n     * @param array $attributes\n     * @return string\n     *\/",492],["T_WHITESPACE","\n    ",496],["T_PRIVATE","private",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","getModelKey",497],"(",["T_VARIABLE","$model",497],",",["T_WHITESPACE"," ",497],["T_VARIABLE","$attributes",497],")",["T_WHITESPACE","\n    ",497],"{",["T_WHITESPACE","\n        ",498],["T_VARIABLE","$key",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],"[","]",";",["T_WHITESPACE","\n        ",499],["T_FOREACH","foreach",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$attributes",500],["T_WHITESPACE"," ",500],["T_AS","as",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$attribute",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n            ",500],["T_VARIABLE","$key",501],"[","]",["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","normalizeModelKey",501],"(",["T_VARIABLE","$model",501],"[",["T_VARIABLE","$attribute",501],"]",")",";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n        ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_STRING","count",503],"(",["T_VARIABLE","$key",503],")",["T_WHITESPACE"," ",503],">",["T_WHITESPACE"," ",503],["T_LNUMBER","1",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_STRING","serialize",504],"(",["T_VARIABLE","$key",504],")",";",["T_WHITESPACE","\n        ",504],"}",["T_WHITESPACE","\n        ",505],["T_VARIABLE","$key",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","reset",506],"(",["T_VARIABLE","$key",506],")",";",["T_WHITESPACE","\n        ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_STRING","is_scalar",507],"(",["T_VARIABLE","$key",507],")",["T_WHITESPACE"," ",507],"?",["T_WHITESPACE"," ",507],["T_VARIABLE","$key",507],["T_WHITESPACE"," ",507],":",["T_WHITESPACE"," ",507],["T_STRING","serialize",507],"(",["T_VARIABLE","$key",507],")",";",["T_WHITESPACE","\n    ",507],"}",["T_WHITESPACE","\n\n    ",508],["T_DOC_COMMENT","\/**\n     * @param mixed $value raw key value.\n     * @return string normalized key value.\n     *\/",510],["T_WHITESPACE","\n    ",513],["T_PRIVATE","private",514],["T_WHITESPACE"," ",514],["T_FUNCTION","function",514],["T_WHITESPACE"," ",514],["T_STRING","normalizeModelKey",514],"(",["T_VARIABLE","$value",514],")",["T_WHITESPACE","\n    ",514],"{",["T_WHITESPACE","\n        ",515],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_STRING","is_object",516],"(",["T_VARIABLE","$value",516],")",["T_WHITESPACE"," ",516],["T_BOOLEAN_AND","&&",516],["T_WHITESPACE"," ",516],["T_STRING","method_exists",516],"(",["T_VARIABLE","$value",516],",",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'__toString'",516],")",")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n            ",516],["T_COMMENT","\/\/ ensure matching to special objects, which are convertable to string, for cross-DBMS relations, for example: `|MongoId`\n",517],["T_WHITESPACE","            ",518],["T_VARIABLE","$value",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$value",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","__toString",518],"(",")",";",["T_WHITESPACE","\n        ",518],"}",["T_WHITESPACE","\n        ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$value",520],";",["T_WHITESPACE","\n    ",520],"}",["T_WHITESPACE","\n\n    ",521],["T_DOC_COMMENT","\/**\n     * @param array $primaryModels either array of AR instances or arrays\n     * @return array\n     *\/",523],["T_WHITESPACE","\n    ",526],["T_PRIVATE","private",527],["T_WHITESPACE"," ",527],["T_FUNCTION","function",527],["T_WHITESPACE"," ",527],["T_STRING","findJunctionRows",527],"(",["T_VARIABLE","$primaryModels",527],")",["T_WHITESPACE","\n    ",527],"{",["T_WHITESPACE","\n        ",528],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_EMPTY","empty",529],"(",["T_VARIABLE","$primaryModels",529],")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n            ",529],["T_RETURN","return",530],["T_WHITESPACE"," ",530],"[","]",";",["T_WHITESPACE","\n        ",530],"}",["T_WHITESPACE","\n        ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","filterByModels",532],"(",["T_VARIABLE","$primaryModels",532],")",";",["T_WHITESPACE","\n        ",532],["T_COMMENT","\/* @var $primaryModel ActiveRecord *\/",533],["T_WHITESPACE","\n        ",533],["T_VARIABLE","$primaryModel",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_STRING","reset",534],"(",["T_VARIABLE","$primaryModels",534],")",";",["T_WHITESPACE","\n        ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(","!",["T_VARIABLE","$primaryModel",535],["T_WHITESPACE"," ",535],["T_INSTANCEOF","instanceof",535],["T_WHITESPACE"," ",535],["T_STRING","ActiveRecordInterface",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n            ",535],["T_COMMENT","\/\/ when primaryModels are array of arrays (asArray case)\n",536],["T_WHITESPACE","            ",537],["T_VARIABLE","$primaryModel",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","modelClass",537],";",["T_WHITESPACE","\n        ",537],"}",["T_WHITESPACE","\n\n        ",538],["T_RETURN","return",540],["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","asArray",540],"(",")",["T_OBJECT_OPERATOR","->",540],["T_STRING","all",540],"(",["T_VARIABLE","$primaryModel",540],["T_DOUBLE_COLON","::",540],["T_STRING","getDb",540],"(",")",")",";",["T_WHITESPACE","\n    ",540],"}",["T_WHITESPACE","\n",541],"}",["T_WHITESPACE","\n",542]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],["T_NS_SEPARATOR","\\",8],["T_STRING","oci",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidCallException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","db",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ColumnSchema",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Connection",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Expression",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","db",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TableSchema",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Schema is the class for retrieving metadata from an Oracle database\n *\n * @property string $lastInsertID The row ID of the last row inserted, or the last value retrieved from the\n * sequence object. This property is read-only.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",16],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","Schema",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_NS_SEPARATOR","\\",25],["T_STRING","yii",25],["T_NS_SEPARATOR","\\",25],["T_STRING","db",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Schema",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/**\n     * @var array map of DB errors and corresponding exceptions\n     * If left part is found in DB error message exception class from the right part is used.\n     *\/",27],["T_WHITESPACE","\n    ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$exceptionMap",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n        ",31],["T_CONSTANT_ENCAPSED_STRING","'ORA-00001: unique constraint'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'yii\\db\\IntegrityException'",32],",",["T_WHITESPACE","\n    ",32],"]",";",["T_WHITESPACE","\n\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","init",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_STRING","parent",41],["T_DOUBLE_COLON","::",41],["T_STRING","init",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","defaultSchema",42],["T_WHITESPACE"," ",42],["T_IS_IDENTICAL","===",42],["T_WHITESPACE"," ",42],["T_STRING","null",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","defaultSchema",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","strtoupper",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","db",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","username",43],")",";",["T_WHITESPACE","\n        ",43],"}",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",47],["T_WHITESPACE","\n    ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","releaseSavepoint",50],"(",["T_VARIABLE","$name",50],")",["T_WHITESPACE","\n    ",50],"{",["T_WHITESPACE","\n        ",51],["T_COMMENT","\/\/ does nothing as Oracle does not support this\n",52],["T_WHITESPACE","    ",53],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","quoteSimpleTableName",58],"(",["T_VARIABLE","$name",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_RETURN","return",60],["T_WHITESPACE"," ",60],["T_STRING","strpos",60],"(",["T_VARIABLE","$name",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\"'",60],")",["T_WHITESPACE"," ",60],["T_IS_NOT_IDENTICAL","!==",60],["T_WHITESPACE"," ",60],["T_STRING","false",60],["T_WHITESPACE"," ",60],"?",["T_WHITESPACE"," ",60],["T_VARIABLE","$name",60],["T_WHITESPACE"," ",60],":",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\"'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$name",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\"'",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","createQueryBuilder",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","QueryBuilder",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","db",68],")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n\n    ",69],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",71],["T_WHITESPACE","\n    ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","createColumnSchemaBuilder",74],"(",["T_VARIABLE","$type",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$length",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","null",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_NEW","new",76],["T_WHITESPACE"," ",76],["T_STRING","ColumnSchemaBuilder",76],"(",["T_VARIABLE","$type",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$length",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","db",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",79],["T_WHITESPACE","\n    ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","loadTableSchema",82],"(",["T_VARIABLE","$name",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$table",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","TableSchema",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","resolveTableNames",85],"(",["T_VARIABLE","$table",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$name",85],")",";",["T_WHITESPACE","\n\n        ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","findColumns",87],"(",["T_VARIABLE","$table",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n            ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","findConstraints",88],"(",["T_VARIABLE","$table",88],")",";",["T_WHITESPACE","\n\n            ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$table",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE"," ",91],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n            ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","null",92],";",["T_WHITESPACE","\n        ",92],"}",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Resolves the table name and schema name (if any).\n     *\n     * @param TableSchema $table the table metadata object\n     * @param string $name the table name\n     *\/",96],["T_WHITESPACE","\n    ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","resolveTableNames",102],"(",["T_VARIABLE","$table",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$name",102],")",["T_WHITESPACE","\n    ",102],"{",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$parts",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","explode",104],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",104],",",["T_WHITESPACE"," ",104],["T_STRING","str_replace",104],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$name",104],")",")",";",["T_WHITESPACE","\n        ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$parts",105],"[",["T_LNUMBER","1",105],"]",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$table",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","schemaName",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$parts",106],"[",["T_LNUMBER","0",106],"]",";",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$table",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","name",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$parts",107],"[",["T_LNUMBER","1",107],"]",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n            ",108],["T_VARIABLE","$table",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","schemaName",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","defaultSchema",109],";",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$table",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","name",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$name",110],";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","fullName",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","schemaName",113],["T_WHITESPACE"," ",113],["T_IS_NOT_IDENTICAL","!==",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","defaultSchema",113],["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_VARIABLE","$table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","schemaName",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'.'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","name",113],["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_VARIABLE","$table",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","name",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_DOC_COMMENT","\/**\n     * Collects the table column metadata.\n     * @param TableSchema $table the table schema\n     * @return bool whether the table exists\n     *\/",116],["T_WHITESPACE","\n    ",120],["T_PROTECTED","protected",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","findColumns",121],"(",["T_VARIABLE","$table",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$sql",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_START_HEREDOC","<<<SQL\n",123],["T_ENCAPSED_AND_WHITESPACE","SELECT \n    A.COLUMN_NAME, \n    A.DATA_TYPE, \n    A.DATA_PRECISION, \n    A.DATA_SCALE, \n    A.DATA_LENGTH,\n    A.NULLABLE, \n    A.DATA_DEFAULT,\n    COM.COMMENTS AS COLUMN_COMMENT\nFROM ALL_TAB_COLUMNS A\n    INNER JOIN ALL_OBJECTS B ON B.OWNER = A.OWNER AND LTRIM(B.OBJECT_NAME) = LTRIM(A.TABLE_NAME)\n    LEFT JOIN ALL_COL_COMMENTS COM ON (A.OWNER = COM.OWNER AND A.TABLE_NAME = COM.TABLE_NAME AND A.COLUMN_NAME = COM.COLUMN_NAME)\nWHERE\n    A.OWNER = :schemaName\n    AND B.OBJECT_TYPE IN ('TABLE', 'VIEW', 'MATERIALIZED VIEW')\n    AND B.OBJECT_NAME = :tableName\nORDER BY A.COLUMN_ID\n",124],["T_END_HEREDOC","SQL",141],";",["T_WHITESPACE","\n\n        ",141],["T_TRY","try",143],["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$columns",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","db",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","createCommand",144],"(",["T_VARIABLE","$sql",144],",",["T_WHITESPACE"," ",144],"[",["T_WHITESPACE","\n                ",144],["T_CONSTANT_ENCAPSED_STRING","':tableName'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$table",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","name",145],",",["T_WHITESPACE","\n                ",145],["T_CONSTANT_ENCAPSED_STRING","':schemaName'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$table",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","schemaName",146],",",["T_WHITESPACE","\n            ",146],"]",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","queryAll",147],"(",")",";",["T_WHITESPACE","\n        ",147],"}",["T_WHITESPACE"," ",148],["T_CATCH","catch",148],["T_WHITESPACE"," ",148],"(",["T_NS_SEPARATOR","\\",148],["T_STRING","Exception",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$e",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n            ",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","false",149],";",["T_WHITESPACE","\n        ",149],"}",["T_WHITESPACE","\n\n        ",150],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_EMPTY","empty",152],"(",["T_VARIABLE","$columns",152],")",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n            ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_STRING","false",153],";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n\n        ",154],["T_FOREACH","foreach",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$columns",156],["T_WHITESPACE"," ",156],["T_AS","as",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$column",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n            ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","db",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","slavePdo",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getAttribute",157],"(",["T_NS_SEPARATOR","\\",157],["T_STRING","PDO",157],["T_DOUBLE_COLON","::",157],["T_STRING","ATTR_CASE",157],")",["T_WHITESPACE"," ",157],["T_IS_IDENTICAL","===",157],["T_WHITESPACE"," ",157],["T_NS_SEPARATOR","\\",157],["T_STRING","PDO",157],["T_DOUBLE_COLON","::",157],["T_STRING","CASE_LOWER",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n                ",157],["T_VARIABLE","$column",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","array_change_key_case",158],"(",["T_VARIABLE","$column",158],",",["T_WHITESPACE"," ",158],["T_STRING","CASE_UPPER",158],")",";",["T_WHITESPACE","\n            ",158],"}",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$c",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","createColumn",160],"(",["T_VARIABLE","$column",160],")",";",["T_WHITESPACE","\n            ",160],["T_VARIABLE","$table",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","columns",161],"[",["T_VARIABLE","$c",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","name",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$c",161],";",["T_WHITESPACE","\n        ",161],"}",["T_WHITESPACE","\n        ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","true",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Sequence name of table\n     *\n     * @param string $tableName\n     * @internal param \\yii\\db\\TableSchema $table->name the table schema\n     * @return string|null whether the sequence exists\n     *\/",166],["T_WHITESPACE","\n    ",172],["T_PROTECTED","protected",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getTableSequenceName",173],"(",["T_VARIABLE","$tableName",173],")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n\n        ",174],["T_VARIABLE","$sequenceNameSql",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_START_HEREDOC","<<<SQL\n",176],["T_ENCAPSED_AND_WHITESPACE","SELECT \n    UD.REFERENCED_NAME AS SEQUENCE_NAME\nFROM USER_DEPENDENCIES UD\n    JOIN USER_TRIGGERS UT ON (UT.TRIGGER_NAME = UD.NAME)\nWHERE \n    UT.TABLE_NAME = :tableName\n    AND UD.TYPE = 'TRIGGER'\n    AND UD.REFERENCED_TYPE = 'SEQUENCE'\n",177],["T_END_HEREDOC","SQL",185],";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$sequenceName",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","db",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","createCommand",186],"(",["T_VARIABLE","$sequenceNameSql",186],",",["T_WHITESPACE"," ",186],"[",["T_CONSTANT_ENCAPSED_STRING","':tableName'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$tableName",186],"]",")",["T_OBJECT_OPERATOR","->",186],["T_STRING","queryScalar",186],"(",")",";",["T_WHITESPACE","\n        ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$sequenceName",187],["T_WHITESPACE"," ",187],["T_IS_IDENTICAL","===",187],["T_WHITESPACE"," ",187],["T_STRING","false",187],["T_WHITESPACE"," ",187],"?",["T_WHITESPACE"," ",187],["T_STRING","null",187],["T_WHITESPACE"," ",187],":",["T_WHITESPACE"," ",187],["T_VARIABLE","$sequenceName",187],";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_DOC_COMMENT","\/**\n     * @Overrides method in class 'Schema'\n     * @see http:\/\/www.php.net\/manual\/en\/function.PDO-lastInsertId.php -> Oracle does not support this\n     *\n     * Returns the ID of the last inserted row or sequence value.\n     * @param string $sequenceName name of the sequence object (required by some DBMS)\n     * @return string the row ID of the last row inserted, or the last value retrieved from the sequence object\n     * @throws InvalidCallException if the DB connection is not active\n     *\/",190],["T_WHITESPACE","\n    ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","getLastInsertID",199],"(",["T_VARIABLE","$sequenceName",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","''",199],")",["T_WHITESPACE","\n    ",199],"{",["T_WHITESPACE","\n        ",200],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","db",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","isActive",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_COMMENT","\/\/ get the last insert id from the master connection\n",202],["T_WHITESPACE","            ",203],["T_VARIABLE","$sequenceName",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","quoteSimpleTableName",203],"(",["T_VARIABLE","$sequenceName",203],")",";",["T_WHITESPACE","\n            ",203],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","db",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","useMaster",204],"(",["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],"(",["T_STRING","Connection",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$db",204],")",["T_WHITESPACE"," ",204],["T_USE","use",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$sequenceName",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n                ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","createCommand",205],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SELECT ",205],["T_CURLY_OPEN","{",205],["T_VARIABLE","$sequenceName",205],"}",["T_ENCAPSED_AND_WHITESPACE",".CURRVAL FROM DUAL",205],"\"",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","queryScalar",205],"(",")",";",["T_WHITESPACE","\n            ",205],"}",")",";",["T_WHITESPACE","\n        ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_THROW","throw",208],["T_WHITESPACE"," ",208],["T_NEW","new",208],["T_WHITESPACE"," ",208],["T_STRING","InvalidCallException",208],"(",["T_CONSTANT_ENCAPSED_STRING","'DB Connection is not active.'",208],")",";",["T_WHITESPACE","\n        ",208],"}",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_DOC_COMMENT","\/**\n     * Creates ColumnSchema instance\n     *\n     * @param array $column\n     * @return ColumnSchema\n     *\/",212],["T_WHITESPACE","\n    ",217],["T_PROTECTED","protected",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","createColumn",218],"(",["T_VARIABLE","$column",218],")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$c",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","createColumnSchema",220],"(",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$c",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","name",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$column",221],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",221],"]",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$c",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","allowNull",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$column",222],"[",["T_CONSTANT_ENCAPSED_STRING","'NULLABLE'",222],"]",["T_WHITESPACE"," ",222],["T_IS_IDENTICAL","===",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'Y'",222],";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$c",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","comment",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$column",223],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_COMMENT'",223],"]",["T_WHITESPACE"," ",223],["T_IS_IDENTICAL","===",223],["T_WHITESPACE"," ",223],["T_STRING","null",223],["T_WHITESPACE"," ",223],"?",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","''",223],["T_WHITESPACE"," ",223],":",["T_WHITESPACE"," ",223],["T_VARIABLE","$column",223],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_COMMENT'",223],"]",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$c",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","isPrimaryKey",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","false",224],";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","extractColumnType",225],"(",["T_VARIABLE","$c",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$column",225],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",225],"]",",",["T_WHITESPACE"," ",225],["T_VARIABLE","$column",225],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_PRECISION'",225],"]",",",["T_WHITESPACE"," ",225],["T_VARIABLE","$column",225],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_SCALE'",225],"]",",",["T_WHITESPACE"," ",225],["T_VARIABLE","$column",225],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_LENGTH'",225],"]",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","extractColumnSize",226],"(",["T_VARIABLE","$c",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$column",226],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_TYPE'",226],"]",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$column",226],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_PRECISION'",226],"]",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$column",226],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_SCALE'",226],"]",",",["T_WHITESPACE"," ",226],["T_VARIABLE","$column",226],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_LENGTH'",226],"]",")",";",["T_WHITESPACE","\n\n        ",226],["T_VARIABLE","$c",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","phpType",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getColumnPhpType",228],"(",["T_VARIABLE","$c",228],")",";",["T_WHITESPACE","\n\n        ",228],["T_IF","if",230],["T_WHITESPACE"," ",230],"(","!",["T_VARIABLE","$c",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","isPrimaryKey",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n            ",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_STRING","stripos",231],"(",["T_VARIABLE","$column",231],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_DEFAULT'",231],"]",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",231],")",["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_STRING","false",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n                ",231],["T_VARIABLE","$c",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","defaultValue",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","null",232],";",["T_WHITESPACE","\n            ",232],"}",["T_WHITESPACE"," ",233],["T_ELSE","else",233],["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                ",233],["T_VARIABLE","$defaultValue",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$column",234],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_DEFAULT'",234],"]",";",["T_WHITESPACE","\n                ",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$c",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","type",235],["T_WHITESPACE"," ",235],["T_IS_IDENTICAL","===",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",235],["T_WHITESPACE"," ",235],["T_BOOLEAN_AND","&&",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$defaultValue",235],["T_WHITESPACE"," ",235],["T_IS_IDENTICAL","===",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP'",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n                    ",235],["T_VARIABLE","$c",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","defaultValue",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_NEW","new",236],["T_WHITESPACE"," ",236],["T_STRING","Expression",236],"(",["T_CONSTANT_ENCAPSED_STRING","'CURRENT_TIMESTAMP'",236],")",";",["T_WHITESPACE","\n                ",236],"}",["T_WHITESPACE"," ",237],["T_ELSE","else",237],["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n                    ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$defaultValue",238],["T_WHITESPACE"," ",238],["T_IS_NOT_IDENTICAL","!==",238],["T_WHITESPACE"," ",238],["T_STRING","null",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n                        ",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(","(",["T_VARIABLE","$len",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","strlen",239],"(",["T_VARIABLE","$defaultValue",239],")",")",["T_WHITESPACE"," ",239],">",["T_WHITESPACE"," ",239],["T_LNUMBER","2",239],["T_WHITESPACE"," ",239],["T_BOOLEAN_AND","&&",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$defaultValue",239],"[",["T_LNUMBER","0",239],"]",["T_WHITESPACE"," ",239],["T_IS_IDENTICAL","===",239],["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","\"'\"",239],["T_WHITESPACE","\n                            ",239],["T_BOOLEAN_AND","&&",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$defaultValue",240],"[",["T_VARIABLE","$len",240],["T_WHITESPACE"," ",240],"-",["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],"]",["T_WHITESPACE"," ",240],["T_IS_IDENTICAL","===",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","\"'\"",240],["T_WHITESPACE","\n                        ",240],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n                            ",241],["T_VARIABLE","$defaultValue",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","substr",242],"(",["T_VARIABLE","$column",242],"[",["T_CONSTANT_ENCAPSED_STRING","'DATA_DEFAULT'",242],"]",",",["T_WHITESPACE"," ",242],["T_LNUMBER","1",242],",",["T_WHITESPACE"," ",242],"-",["T_LNUMBER","1",242],")",";",["T_WHITESPACE","\n                        ",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n                            ",243],["T_VARIABLE","$defaultValue",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_STRING","trim",244],"(",["T_VARIABLE","$defaultValue",244],")",";",["T_WHITESPACE","\n                        ",244],"}",["T_WHITESPACE","\n                    ",245],"}",["T_WHITESPACE","\n                    ",246],["T_VARIABLE","$c",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","defaultValue",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$c",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","phpTypecast",247],"(",["T_VARIABLE","$defaultValue",247],")",";",["T_WHITESPACE","\n                ",247],"}",["T_WHITESPACE","\n            ",248],"}",["T_WHITESPACE","\n        ",249],"}",["T_WHITESPACE","\n\n        ",250],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$c",252],";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n\n    ",253],["T_DOC_COMMENT","\/**\n     * Finds constraints and fills them into TableSchema object passed\n     * @param TableSchema $table\n     *\/",255],["T_WHITESPACE","\n    ",258],["T_PROTECTED","protected",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","findConstraints",259],"(",["T_VARIABLE","$table",259],")",["T_WHITESPACE","\n    ",259],"{",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$sql",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_START_HEREDOC","<<<SQL\n",261],["T_ENCAPSED_AND_WHITESPACE","SELECT\n    \/*+ PUSH_PRED(C) PUSH_PRED(D) PUSH_PRED(E) *\/\n    D.CONSTRAINT_NAME,\n    D.CONSTRAINT_TYPE,\n    C.COLUMN_NAME,\n    C.POSITION,\n    D.R_CONSTRAINT_NAME,\n    E.TABLE_NAME AS TABLE_REF,\n    F.COLUMN_NAME AS COLUMN_REF,\n    C.TABLE_NAME\nFROM ALL_CONS_COLUMNS C\n    INNER JOIN ALL_CONSTRAINTS D ON D.OWNER = C.OWNER AND D.CONSTRAINT_NAME = C.CONSTRAINT_NAME\n    LEFT JOIN ALL_CONSTRAINTS E ON E.OWNER = D.R_OWNER AND E.CONSTRAINT_NAME = D.R_CONSTRAINT_NAME\n    LEFT JOIN ALL_CONS_COLUMNS F ON F.OWNER = E.OWNER AND F.CONSTRAINT_NAME = E.CONSTRAINT_NAME AND F.POSITION = C.POSITION\nWHERE\n    C.OWNER = :schemaName\n    AND C.TABLE_NAME = :tableName\nORDER BY D.CONSTRAINT_NAME, C.POSITION\n",262],["T_END_HEREDOC","SQL",280],";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$command",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","db",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","createCommand",281],"(",["T_VARIABLE","$sql",281],",",["T_WHITESPACE"," ",281],"[",["T_WHITESPACE","\n            ",281],["T_CONSTANT_ENCAPSED_STRING","':tableName'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$table",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","name",282],",",["T_WHITESPACE","\n            ",282],["T_CONSTANT_ENCAPSED_STRING","':schemaName'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$table",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","schemaName",283],",",["T_WHITESPACE","\n        ",283],"]",")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$constraints",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],"[","]",";",["T_WHITESPACE","\n        ",285],["T_FOREACH","foreach",286],["T_WHITESPACE"," ",286],"(",["T_VARIABLE","$command",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","queryAll",286],"(",")",["T_WHITESPACE"," ",286],["T_AS","as",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$row",286],")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n            ",286],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","db",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","slavePdo",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getAttribute",287],"(",["T_NS_SEPARATOR","\\",287],["T_STRING","PDO",287],["T_DOUBLE_COLON","::",287],["T_STRING","ATTR_CASE",287],")",["T_WHITESPACE"," ",287],["T_IS_IDENTICAL","===",287],["T_WHITESPACE"," ",287],["T_NS_SEPARATOR","\\",287],["T_STRING","PDO",287],["T_DOUBLE_COLON","::",287],["T_STRING","CASE_LOWER",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_VARIABLE","$row",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_STRING","array_change_key_case",288],"(",["T_VARIABLE","$row",288],",",["T_WHITESPACE"," ",288],["T_STRING","CASE_UPPER",288],")",";",["T_WHITESPACE","\n            ",288],"}",["T_WHITESPACE","\n\n            ",289],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$row",291],"[",["T_CONSTANT_ENCAPSED_STRING","'CONSTRAINT_TYPE'",291],"]",["T_WHITESPACE"," ",291],["T_IS_IDENTICAL","===",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'P'",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                ",291],["T_VARIABLE","$table",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","columns",292],"[",["T_VARIABLE","$row",292],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",292],"]","]",["T_OBJECT_OPERATOR","->",292],["T_STRING","isPrimaryKey",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","true",292],";",["T_WHITESPACE","\n                ",292],["T_VARIABLE","$table",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","primaryKey",293],"[","]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$row",293],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",293],"]",";",["T_WHITESPACE","\n                ",293],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_EMPTY","empty",294],"(",["T_VARIABLE","$table",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","sequenceName",294],")",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n                    ",294],["T_VARIABLE","$table",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","sequenceName",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getTableSequenceName",295],"(",["T_VARIABLE","$table",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","name",295],")",";",["T_WHITESPACE","\n                ",295],"}",["T_WHITESPACE","\n            ",296],"}",["T_WHITESPACE","\n\n            ",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$row",299],"[",["T_CONSTANT_ENCAPSED_STRING","'CONSTRAINT_TYPE'",299],"]",["T_WHITESPACE"," ",299],["T_IS_NOT_IDENTICAL","!==",299],["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'R'",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n                ",299],["T_COMMENT","\/\/ this condition is not checked in SQL WHERE because of an Oracle Bug:\n",300],["T_WHITESPACE","                ",301],["T_COMMENT","\/\/ see https:\/\/github.com\/yiisoft\/yii2\/pull\/8844\n",301],["T_WHITESPACE","                ",302],["T_CONTINUE","continue",302],";",["T_WHITESPACE","\n            ",302],"}",["T_WHITESPACE","\n\n            ",303],["T_VARIABLE","$name",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$row",305],"[",["T_CONSTANT_ENCAPSED_STRING","'CONSTRAINT_NAME'",305],"]",";",["T_WHITESPACE","\n            ",305],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_ISSET","isset",306],"(",["T_VARIABLE","$constraints",306],"[",["T_VARIABLE","$name",306],"]",")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n                ",306],["T_VARIABLE","$constraints",307],"[",["T_VARIABLE","$name",307],"]",["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],"[",["T_WHITESPACE","\n                    ",307],["T_CONSTANT_ENCAPSED_STRING","'tableName'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$row",308],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_REF'",308],"]",",",["T_WHITESPACE","\n                    ",308],["T_CONSTANT_ENCAPSED_STRING","'columns'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],"[","]",",",["T_WHITESPACE","\n                ",309],"]",";",["T_WHITESPACE","\n            ",310],"}",["T_WHITESPACE","\n            ",311],["T_VARIABLE","$constraints",312],"[",["T_VARIABLE","$name",312],"]","[",["T_CONSTANT_ENCAPSED_STRING","'columns'",312],"]","[",["T_VARIABLE","$row",312],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",312],"]","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$row",312],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_REF'",312],"]",";",["T_WHITESPACE","\n        ",312],"}",["T_WHITESPACE","\n\n        ",313],["T_FOREACH","foreach",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$constraints",315],["T_WHITESPACE"," ",315],["T_AS","as",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$constraint",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n            ",315],["T_VARIABLE","$name",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","array_keys",316],"(",["T_VARIABLE","$constraint",316],")",";",["T_WHITESPACE","\n            ",316],["T_VARIABLE","$name",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","current",317],"(",["T_VARIABLE","$name",317],")",";",["T_WHITESPACE","\n\n            ",317],["T_VARIABLE","$table",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","foreignKeys",319],"[",["T_VARIABLE","$name",319],"]",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","array_merge",319],"(","[",["T_VARIABLE","$constraint",319],"[",["T_CONSTANT_ENCAPSED_STRING","'tableName'",319],"]","]",",",["T_WHITESPACE"," ",319],["T_VARIABLE","$constraint",319],"[",["T_CONSTANT_ENCAPSED_STRING","'columns'",319],"]",")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",323],["T_WHITESPACE","\n    ",325],["T_PROTECTED","protected",326],["T_WHITESPACE"," ",326],["T_FUNCTION","function",326],["T_WHITESPACE"," ",326],["T_STRING","findSchemaNames",326],"(",")",["T_WHITESPACE","\n    ",326],"{",["T_WHITESPACE","\n        ",327],["T_VARIABLE","$sql",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_START_HEREDOC","<<<SQL\n",328],["T_ENCAPSED_AND_WHITESPACE","SELECT\n    USERNAME\nFROM DBA_USERS U\nWHERE \n    EXISTS (SELECT 1 FROM DBA_OBJECTS O WHERE O.OWNER = U.USERNAME)\n    AND DEFAULT_TABLESPACE NOT IN ('SYSTEM','SYSAUX')\n",329],["T_END_HEREDOC","SQL",335],";",["T_WHITESPACE","\n        ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","db",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","createCommand",336],"(",["T_VARIABLE","$sql",336],")",["T_OBJECT_OPERATOR","->",336],["T_STRING","queryColumn",336],"(",")",";",["T_WHITESPACE","\n    ",336],"}",["T_WHITESPACE","\n\n    ",337],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",339],["T_WHITESPACE","\n    ",341],["T_PROTECTED","protected",342],["T_WHITESPACE"," ",342],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","findTableNames",342],"(",["T_VARIABLE","$schema",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","''",342],")",["T_WHITESPACE","\n    ",342],"{",["T_WHITESPACE","\n        ",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$schema",344],["T_WHITESPACE"," ",344],["T_IS_IDENTICAL","===",344],["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","''",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n            ",344],["T_VARIABLE","$sql",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_START_HEREDOC","<<<SQL\n",345],["T_ENCAPSED_AND_WHITESPACE","SELECT \n    TABLE_NAME \nFROM USER_TABLES\nUNION ALL\nSELECT \n    VIEW_NAME AS TABLE_NAME \nFROM USER_VIEWS\nUNION ALL\nSELECT \n    MVIEW_NAME AS TABLE_NAME \nFROM USER_MVIEWS\nORDER BY TABLE_NAME\n",346],["T_END_HEREDOC","SQL",358],";",["T_WHITESPACE","\n            ",358],["T_VARIABLE","$command",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","db",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","createCommand",359],"(",["T_VARIABLE","$sql",359],")",";",["T_WHITESPACE","\n        ",359],"}",["T_WHITESPACE"," ",360],["T_ELSE","else",360],["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n            ",360],["T_VARIABLE","$sql",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_START_HEREDOC","<<<SQL\n",361],["T_ENCAPSED_AND_WHITESPACE","SELECT \n    OBJECT_NAME AS TABLE_NAME\nFROM ALL_OBJECTS\nWHERE \n    OBJECT_TYPE IN ('TABLE', 'VIEW', 'MATERIALIZED VIEW') \n    AND OWNER = :schema\nORDER BY OBJECT_NAME\n",362],["T_END_HEREDOC","SQL",369],";",["T_WHITESPACE","\n            ",369],["T_VARIABLE","$command",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","db",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","createCommand",370],"(",["T_VARIABLE","$sql",370],",",["T_WHITESPACE"," ",370],"[",["T_CONSTANT_ENCAPSED_STRING","':schema'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$schema",370],"]",")",";",["T_WHITESPACE","\n        ",370],"}",["T_WHITESPACE","\n\n        ",371],["T_VARIABLE","$rows",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_VARIABLE","$command",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","queryAll",373],"(",")",";",["T_WHITESPACE","\n        ",373],["T_VARIABLE","$names",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],"[","]",";",["T_WHITESPACE","\n        ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$rows",375],["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$row",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n            ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","db",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","slavePdo",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getAttribute",376],"(",["T_NS_SEPARATOR","\\",376],["T_STRING","PDO",376],["T_DOUBLE_COLON","::",376],["T_STRING","ATTR_CASE",376],")",["T_WHITESPACE"," ",376],["T_IS_IDENTICAL","===",376],["T_WHITESPACE"," ",376],["T_NS_SEPARATOR","\\",376],["T_STRING","PDO",376],["T_DOUBLE_COLON","::",376],["T_STRING","CASE_LOWER",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n                ",376],["T_VARIABLE","$row",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","array_change_key_case",377],"(",["T_VARIABLE","$row",377],",",["T_WHITESPACE"," ",377],["T_STRING","CASE_UPPER",377],")",";",["T_WHITESPACE","\n            ",377],"}",["T_WHITESPACE","\n            ",378],["T_VARIABLE","$names",379],"[","]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$row",379],"[",["T_CONSTANT_ENCAPSED_STRING","'TABLE_NAME'",379],"]",";",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n        ",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$names",381],";",["T_WHITESPACE","\n    ",381],"}",["T_WHITESPACE","\n\n    ",382],["T_DOC_COMMENT","\/**\n     * Returns all unique indexes for the given table.\n     * Each array element is of the following structure:\n     *\n     * ```php\n     * [\n     *     'IndexName1' => ['col1' [, ...]],\n     *     'IndexName2' => ['col2' [, ...]],\n     * ]\n     * ```\n     *\n     * @param TableSchema $table the table metadata\n     * @return array all unique indexes for the given table.\n     * @since 2.0.4\n     *\/",384],["T_WHITESPACE","\n    ",398],["T_PUBLIC","public",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","findUniqueIndexes",399],"(",["T_VARIABLE","$table",399],")",["T_WHITESPACE","\n    ",399],"{",["T_WHITESPACE","\n        ",400],["T_VARIABLE","$query",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_START_HEREDOC","<<<SQL\n",401],["T_ENCAPSED_AND_WHITESPACE","SELECT \n    DIC.INDEX_NAME,\n    DIC.COLUMN_NAME\nFROM ALL_INDEXES DI\n    INNER JOIN ALL_IND_COLUMNS DIC ON DI.TABLE_NAME = DIC.TABLE_NAME AND DI.INDEX_NAME = DIC.INDEX_NAME\nWHERE \n    DI.UNIQUENESS = 'UNIQUE'\n    AND DIC.TABLE_OWNER = :schemaName\n    AND DIC.TABLE_NAME = :tableName\nORDER BY DIC.TABLE_NAME, DIC.INDEX_NAME, DIC.COLUMN_POSITION\n",402],["T_END_HEREDOC","SQL",412],";",["T_WHITESPACE","\n        ",412],["T_VARIABLE","$result",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],"[","]",";",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$command",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","db",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","createCommand",414],"(",["T_VARIABLE","$query",414],",",["T_WHITESPACE"," ",414],"[",["T_WHITESPACE","\n            ",414],["T_CONSTANT_ENCAPSED_STRING","':tableName'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$table",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","name",415],",",["T_WHITESPACE","\n            ",415],["T_CONSTANT_ENCAPSED_STRING","':schemaName'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$table",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","schemaName",416],",",["T_WHITESPACE","\n        ",416],"]",")",";",["T_WHITESPACE","\n        ",417],["T_FOREACH","foreach",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$command",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","queryAll",418],"(",")",["T_WHITESPACE"," ",418],["T_AS","as",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$row",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n            ",418],["T_VARIABLE","$result",419],"[",["T_VARIABLE","$row",419],"[",["T_CONSTANT_ENCAPSED_STRING","'INDEX_NAME'",419],"]","]","[","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$row",419],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",419],"]",";",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n        ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$result",421],";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n\n    ",422],["T_DOC_COMMENT","\/**\n     * Extracts the data types for the given column\n     * @param ColumnSchema $column\n     * @param string $dbType DB type\n     * @param string $precision total number of digits.\n     * This parameter is available since version 2.0.4.\n     * @param string $scale number of digits on the right of the decimal separator.\n     * This parameter is available since version 2.0.4.\n     * @param string $length length for character types.\n     * This parameter is available since version 2.0.4.\n     *\/",424],["T_WHITESPACE","\n    ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","extractColumnType",435],"(",["T_VARIABLE","$column",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$dbType",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$precision",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$scale",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$length",435],")",["T_WHITESPACE","\n    ",435],"{",["T_WHITESPACE","\n        ",436],["T_VARIABLE","$column",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","dbType",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$dbType",437],";",["T_WHITESPACE","\n\n        ",437],["T_IF","if",439],["T_WHITESPACE"," ",439],"(",["T_STRING","strpos",439],"(",["T_VARIABLE","$dbType",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'FLOAT'",439],")",["T_WHITESPACE"," ",439],["T_IS_NOT_IDENTICAL","!==",439],["T_WHITESPACE"," ",439],["T_STRING","false",439],["T_WHITESPACE"," ",439],["T_BOOLEAN_OR","||",439],["T_WHITESPACE"," ",439],["T_STRING","strpos",439],"(",["T_VARIABLE","$dbType",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'DOUBLE'",439],")",["T_WHITESPACE"," ",439],["T_IS_NOT_IDENTICAL","!==",439],["T_WHITESPACE"," ",439],["T_STRING","false",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$column",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","type",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'double'",440],";",["T_WHITESPACE","\n        ",440],"}",["T_WHITESPACE"," ",441],["T_ELSEIF","elseif",441],["T_WHITESPACE"," ",441],"(",["T_STRING","strpos",441],"(",["T_VARIABLE","$dbType",441],",",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'NUMBER'",441],")",["T_WHITESPACE"," ",441],["T_IS_NOT_IDENTICAL","!==",441],["T_WHITESPACE"," ",441],["T_STRING","false",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n            ",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_VARIABLE","$scale",442],["T_WHITESPACE"," ",442],["T_IS_IDENTICAL","===",442],["T_WHITESPACE"," ",442],["T_STRING","null",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_OR","||",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$scale",442],["T_WHITESPACE"," ",442],">",["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n                ",442],["T_VARIABLE","$column",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","type",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_CONSTANT_ENCAPSED_STRING","'decimal'",443],";",["T_WHITESPACE","\n            ",443],"}",["T_WHITESPACE"," ",444],["T_ELSE","else",444],["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                ",444],["T_VARIABLE","$column",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","type",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'integer'",445],";",["T_WHITESPACE","\n            ",445],"}",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE"," ",447],["T_ELSEIF","elseif",447],["T_WHITESPACE"," ",447],"(",["T_STRING","strpos",447],"(",["T_VARIABLE","$dbType",447],",",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'INTEGER'",447],")",["T_WHITESPACE"," ",447],["T_IS_NOT_IDENTICAL","!==",447],["T_WHITESPACE"," ",447],["T_STRING","false",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n            ",447],["T_VARIABLE","$column",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","type",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'integer'",448],";",["T_WHITESPACE","\n        ",448],"}",["T_WHITESPACE"," ",449],["T_ELSEIF","elseif",449],["T_WHITESPACE"," ",449],"(",["T_STRING","strpos",449],"(",["T_VARIABLE","$dbType",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'BLOB'",449],")",["T_WHITESPACE"," ",449],["T_IS_NOT_IDENTICAL","!==",449],["T_WHITESPACE"," ",449],["T_STRING","false",449],")",["T_WHITESPACE"," ",449],"{",["T_WHITESPACE","\n            ",449],["T_VARIABLE","$column",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","type",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'binary'",450],";",["T_WHITESPACE","\n        ",450],"}",["T_WHITESPACE"," ",451],["T_ELSEIF","elseif",451],["T_WHITESPACE"," ",451],"(",["T_STRING","strpos",451],"(",["T_VARIABLE","$dbType",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'CLOB'",451],")",["T_WHITESPACE"," ",451],["T_IS_NOT_IDENTICAL","!==",451],["T_WHITESPACE"," ",451],["T_STRING","false",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n            ",451],["T_VARIABLE","$column",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","type",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'text'",452],";",["T_WHITESPACE","\n        ",452],"}",["T_WHITESPACE"," ",453],["T_ELSEIF","elseif",453],["T_WHITESPACE"," ",453],"(",["T_STRING","strpos",453],"(",["T_VARIABLE","$dbType",453],",",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'TIMESTAMP'",453],")",["T_WHITESPACE"," ",453],["T_IS_NOT_IDENTICAL","!==",453],["T_WHITESPACE"," ",453],["T_STRING","false",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n            ",453],["T_VARIABLE","$column",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","type",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",454],";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE"," ",455],["T_ELSE","else",455],["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n            ",455],["T_VARIABLE","$column",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","type",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'string'",456],";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_DOC_COMMENT","\/**\n     * Extracts size, precision and scale information from column's DB type.\n     * @param ColumnSchema $column\n     * @param string $dbType the column's DB type\n     * @param string $precision total number of digits.\n     * This parameter is available since version 2.0.4.\n     * @param string $scale number of digits on the right of the decimal separator.\n     * This parameter is available since version 2.0.4.\n     * @param string $length length for character types.\n     * This parameter is available since version 2.0.4.\n     *\/",460],["T_WHITESPACE","\n    ",470],["T_PROTECTED","protected",471],["T_WHITESPACE"," ",471],["T_FUNCTION","function",471],["T_WHITESPACE"," ",471],["T_STRING","extractColumnSize",471],"(",["T_VARIABLE","$column",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$dbType",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$precision",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$scale",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$length",471],")",["T_WHITESPACE","\n    ",471],"{",["T_WHITESPACE","\n        ",472],["T_VARIABLE","$column",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","size",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_STRING","trim",473],"(",["T_VARIABLE","$length",473],")",["T_WHITESPACE"," ",473],["T_IS_IDENTICAL","===",473],["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","''",473],["T_WHITESPACE"," ",473],"?",["T_WHITESPACE"," ",473],["T_STRING","null",473],["T_WHITESPACE"," ",473],":",["T_WHITESPACE"," ",473],["T_INT_CAST","(int)",473],["T_VARIABLE","$length",473],";",["T_WHITESPACE","\n        ",473],["T_VARIABLE","$column",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","precision",474],["T_WHITESPACE"," ",474],"=",["T_WHITESPACE"," ",474],["T_STRING","trim",474],"(",["T_VARIABLE","$precision",474],")",["T_WHITESPACE"," ",474],["T_IS_IDENTICAL","===",474],["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","''",474],["T_WHITESPACE"," ",474],"?",["T_WHITESPACE"," ",474],["T_STRING","null",474],["T_WHITESPACE"," ",474],":",["T_WHITESPACE"," ",474],["T_INT_CAST","(int)",474],["T_VARIABLE","$precision",474],";",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$column",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","scale",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","trim",475],"(",["T_VARIABLE","$scale",475],")",["T_WHITESPACE"," ",475],["T_IS_IDENTICAL","===",475],["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","''",475],["T_WHITESPACE"," ",475],"?",["T_WHITESPACE"," ",475],["T_STRING","null",475],["T_WHITESPACE"," ",475],":",["T_WHITESPACE"," ",475],["T_INT_CAST","(int)",475],["T_VARIABLE","$scale",475],";",["T_WHITESPACE","\n    ",475],"}",["T_WHITESPACE","\n\n    ",476],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",478],["T_WHITESPACE","\n    ",480],["T_PUBLIC","public",481],["T_WHITESPACE"," ",481],["T_FUNCTION","function",481],["T_WHITESPACE"," ",481],["T_STRING","insert",481],"(",["T_VARIABLE","$table",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$columns",481],")",["T_WHITESPACE","\n    ",481],"{",["T_WHITESPACE","\n        ",482],["T_VARIABLE","$params",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],"[","]",";",["T_WHITESPACE","\n        ",483],["T_VARIABLE","$returnParams",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],"[","]",";",["T_WHITESPACE","\n        ",484],["T_VARIABLE","$sql",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","db",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getQueryBuilder",485],"(",")",["T_OBJECT_OPERATOR","->",485],["T_STRING","insert",485],"(",["T_VARIABLE","$table",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$columns",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$params",485],")",";",["T_WHITESPACE","\n        ",485],["T_VARIABLE","$tableSchema",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getTableSchema",486],"(",["T_VARIABLE","$table",486],")",";",["T_WHITESPACE","\n        ",486],["T_VARIABLE","$returnColumns",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$tableSchema",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","primaryKey",487],";",["T_WHITESPACE","\n        ",487],["T_IF","if",488],["T_WHITESPACE"," ",488],"(","!",["T_EMPTY","empty",488],"(",["T_VARIABLE","$returnColumns",488],")",")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n            ",488],["T_VARIABLE","$columnSchemas",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_VARIABLE","$tableSchema",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","columns",489],";",["T_WHITESPACE","\n            ",489],["T_VARIABLE","$returning",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],"[","]",";",["T_WHITESPACE","\n            ",490],["T_FOREACH","foreach",491],["T_WHITESPACE"," ",491],"(",["T_ARRAY_CAST","(array)",491],["T_VARIABLE","$returnColumns",491],["T_WHITESPACE"," ",491],["T_AS","as",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$name",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n                ",491],["T_VARIABLE","$phName",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","QueryBuilder",492],["T_DOUBLE_COLON","::",492],["T_STRING","PARAM_PREFIX",492],["T_WHITESPACE"," ",492],".",["T_WHITESPACE"," ",492],"(",["T_STRING","count",492],"(",["T_VARIABLE","$params",492],")",["T_WHITESPACE"," ",492],"+",["T_WHITESPACE"," ",492],["T_STRING","count",492],"(",["T_VARIABLE","$returnParams",492],")",")",";",["T_WHITESPACE","\n                ",492],["T_VARIABLE","$returnParams",493],"[",["T_VARIABLE","$phName",493],"]",["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],"[",["T_WHITESPACE","\n                    ",493],["T_CONSTANT_ENCAPSED_STRING","'column'",494],["T_WHITESPACE"," ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$name",494],",",["T_WHITESPACE","\n                    ",494],["T_CONSTANT_ENCAPSED_STRING","'value'",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_STRING","null",495],",",["T_WHITESPACE","\n                ",495],"]",";",["T_WHITESPACE","\n                ",496],["T_IF","if",497],["T_WHITESPACE"," ",497],"(","!",["T_ISSET","isset",497],"(",["T_VARIABLE","$columnSchemas",497],"[",["T_VARIABLE","$name",497],"]",")",["T_WHITESPACE"," ",497],["T_BOOLEAN_OR","||",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$columnSchemas",497],"[",["T_VARIABLE","$name",497],"]",["T_OBJECT_OPERATOR","->",497],["T_STRING","phpType",497],["T_WHITESPACE"," ",497],["T_IS_NOT_IDENTICAL","!==",497],["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'integer'",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n                    ",497],["T_VARIABLE","$returnParams",498],"[",["T_VARIABLE","$phName",498],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dataType'",498],"]",["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_NS_SEPARATOR","\\",498],["T_STRING","PDO",498],["T_DOUBLE_COLON","::",498],["T_STRING","PARAM_STR",498],";",["T_WHITESPACE","\n                ",498],"}",["T_WHITESPACE"," ",499],["T_ELSE","else",499],["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n                    ",499],["T_VARIABLE","$returnParams",500],"[",["T_VARIABLE","$phName",500],"]","[",["T_CONSTANT_ENCAPSED_STRING","'dataType'",500],"]",["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_NS_SEPARATOR","\\",500],["T_STRING","PDO",500],["T_DOUBLE_COLON","::",500],["T_STRING","PARAM_INT",500],";",["T_WHITESPACE","\n                ",500],"}",["T_WHITESPACE","\n                ",501],["T_VARIABLE","$returnParams",502],"[",["T_VARIABLE","$phName",502],"]","[",["T_CONSTANT_ENCAPSED_STRING","'size'",502],"]",["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_ISSET","isset",502],"(",["T_VARIABLE","$columnSchemas",502],"[",["T_VARIABLE","$name",502],"]",")",["T_WHITESPACE"," ",502],["T_BOOLEAN_AND","&&",502],["T_WHITESPACE"," ",502],["T_ISSET","isset",502],"(",["T_VARIABLE","$columnSchemas",502],"[",["T_VARIABLE","$name",502],"]",["T_OBJECT_OPERATOR","->",502],["T_STRING","size",502],")",["T_WHITESPACE"," ",502],"?",["T_WHITESPACE"," ",502],["T_VARIABLE","$columnSchemas",502],"[",["T_VARIABLE","$name",502],"]",["T_OBJECT_OPERATOR","->",502],["T_STRING","size",502],["T_WHITESPACE"," ",502],":",["T_WHITESPACE"," ",502],"-",["T_LNUMBER","1",502],";",["T_WHITESPACE","\n                ",502],["T_VARIABLE","$returning",503],"[","]",["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","quoteColumnName",503],"(",["T_VARIABLE","$name",503],")",";",["T_WHITESPACE","\n            ",503],"}",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$sql",505],["T_WHITESPACE"," ",505],["T_CONCAT_EQUAL",".=",505],["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","' RETURNING '",505],["T_WHITESPACE"," ",505],".",["T_WHITESPACE"," ",505],["T_STRING","implode",505],"(",["T_CONSTANT_ENCAPSED_STRING","', '",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$returning",505],")",["T_WHITESPACE"," ",505],".",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","' INTO '",505],["T_WHITESPACE"," ",505],".",["T_WHITESPACE"," ",505],["T_STRING","implode",505],"(",["T_CONSTANT_ENCAPSED_STRING","', '",505],",",["T_WHITESPACE"," ",505],["T_STRING","array_keys",505],"(",["T_VARIABLE","$returnParams",505],")",")",";",["T_WHITESPACE","\n        ",505],"}",["T_WHITESPACE","\n\n        ",506],["T_VARIABLE","$command",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","db",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","createCommand",508],"(",["T_VARIABLE","$sql",508],",",["T_WHITESPACE"," ",508],["T_VARIABLE","$params",508],")",";",["T_WHITESPACE","\n        ",508],["T_VARIABLE","$command",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","prepare",509],"(",["T_STRING","false",509],")",";",["T_WHITESPACE","\n\n        ",509],["T_FOREACH","foreach",511],["T_WHITESPACE"," ",511],"(",["T_VARIABLE","$returnParams",511],["T_WHITESPACE"," ",511],["T_AS","as",511],["T_WHITESPACE"," ",511],["T_VARIABLE","$name",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],"&",["T_VARIABLE","$value",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n            ",511],["T_VARIABLE","$command",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","pdoStatement",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","bindParam",512],"(",["T_VARIABLE","$name",512],",",["T_WHITESPACE"," ",512],["T_VARIABLE","$value",512],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",512],"]",",",["T_WHITESPACE"," ",512],["T_VARIABLE","$value",512],"[",["T_CONSTANT_ENCAPSED_STRING","'dataType'",512],"]",",",["T_WHITESPACE"," ",512],["T_VARIABLE","$value",512],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",512],"]",")",";",["T_WHITESPACE","\n        ",512],"}",["T_WHITESPACE","\n\n        ",513],["T_IF","if",515],["T_WHITESPACE"," ",515],"(","!",["T_VARIABLE","$command",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","execute",515],"(",")",")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n            ",515],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_STRING","false",516],";",["T_WHITESPACE","\n        ",516],"}",["T_WHITESPACE","\n\n        ",517],["T_VARIABLE","$result",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],"[","]",";",["T_WHITESPACE","\n        ",519],["T_FOREACH","foreach",520],["T_WHITESPACE"," ",520],"(",["T_VARIABLE","$returnParams",520],["T_WHITESPACE"," ",520],["T_AS","as",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$value",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n            ",520],["T_VARIABLE","$result",521],"[",["T_VARIABLE","$value",521],"[",["T_CONSTANT_ENCAPSED_STRING","'column'",521],"]","]",["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$value",521],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",521],"]",";",["T_WHITESPACE","\n        ",521],"}",["T_WHITESPACE","\n\n        ",522],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$result",524],";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n",525],"}",["T_WHITESPACE","\n",526]]
[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","base",10],["T_NS_SEPARATOR","\\",10],["T_STRING","InvalidConfigException",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * ActiveQuery represents a DB query associated with an Active Record class.\n *\n * An ActiveQuery can be a normal query or be used in a relational context.\n *\n * ActiveQuery instances are usually created by [[ActiveRecord::find()]] and [[ActiveRecord::findBySql()]].\n * Relational queries are created by [[ActiveRecord::hasOne()]] and [[ActiveRecord::hasMany()]].\n *\n * Normal Query\n * ------------\n *\n * ActiveQuery mainly provides the following methods to retrieve the query results:\n *\n * - [[one()]]: returns a single record populated with the first row of data.\n * - [[all()]]: returns all records based on the query results.\n * - [[count()]]: returns the number of records.\n * - [[sum()]]: returns the sum over the specified column.\n * - [[average()]]: returns the average over the specified column.\n * - [[min()]]: returns the min over the specified column.\n * - [[max()]]: returns the max over the specified column.\n * - [[scalar()]]: returns the value of the first column in the first row of the query result.\n * - [[column()]]: returns the value of the first column in the query result.\n * - [[exists()]]: returns a value indicating whether the query result has data or not.\n *\n * Because ActiveQuery extends from [[Query]], one can use query methods, such as [[where()]],\n * [[orderBy()]] to customize the query options.\n *\n * ActiveQuery also provides the following additional query options:\n *\n * - [[with()]]: list of relations that this query should be performed with.\n * - [[joinWith()]]: reuse a relation query definition to add a join to a query.\n * - [[indexBy()]]: the name of the column by which the query result should be indexed.\n * - [[asArray()]]: whether to return each record as an array.\n *\n * These options can be configured using methods of the same name. For example:\n *\n * ```php\n * $customers = Customer::find()->with('orders')->asArray()->all();\n * ```\n *\n * Relational query\n * ----------------\n *\n * In relational context ActiveQuery represents a relation between two Active Record classes.\n *\n * Relational ActiveQuery instances are usually created by calling [[ActiveRecord::hasOne()]] and\n * [[ActiveRecord::hasMany()]]. An Active Record class declares a relation by defining\n * a getter method which calls one of the above methods and returns the created ActiveQuery object.\n *\n * A relation is specified by [[link]] which represents the association between columns\n * of different tables; and the multiplicity of the relation is indicated by [[multiple]].\n *\n * If a relation involves a junction table, it may be specified by [[via()]] or [[viaTable()]] method.\n * These methods may only be called in a relational context. Same is true for [[inverseOf()]], which\n * marks a relation as inverse of another relation and [[onCondition()]] which adds a condition that\n * is to be added to relational query join condition.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @author Carsten Brandt <mail@cebe.cc>\n * @since 2.0\n *\/",12],["T_WHITESPACE","\n",72],["T_CLASS","class",73],["T_WHITESPACE"," ",73],["T_STRING","ActiveQuery",73],["T_WHITESPACE"," ",73],["T_EXTENDS","extends",73],["T_WHITESPACE"," ",73],["T_STRING","Query",73],["T_WHITESPACE"," ",73],["T_IMPLEMENTS","implements",73],["T_WHITESPACE"," ",73],["T_STRING","ActiveQueryInterface",73],["T_WHITESPACE","\n",73],"{",["T_WHITESPACE","\n    ",74],["T_USE","use",75],["T_WHITESPACE"," ",75],["T_STRING","ActiveQueryTrait",75],";",["T_WHITESPACE","\n    ",75],["T_USE","use",76],["T_WHITESPACE"," ",76],["T_STRING","ActiveRelationTrait",76],";",["T_WHITESPACE","\n\n    ",76],["T_DOC_COMMENT","\/**\n     * @event Event an event that is triggered when the query is initialized via [[init()]].\n     *\/",78],["T_WHITESPACE","\n    ",80],["T_CONST","const",81],["T_WHITESPACE"," ",81],["T_STRING","EVENT_INIT",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'init'",81],";",["T_WHITESPACE","\n\n    ",81],["T_DOC_COMMENT","\/**\n     * @var string the SQL statement to be executed for retrieving AR records.\n     * This is set by [[ActiveRecord::findBySql()]].\n     *\/",83],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$sql",87],";",["T_WHITESPACE","\n    ",87],["T_DOC_COMMENT","\/**\n     * @var string|array the join condition to be used when this query is used in a relational context.\n     * The condition will be used in the ON part when [[ActiveQuery::joinWith()]] is called.\n     * Otherwise, the condition will be used in the WHERE part of a query.\n     * Please refer to [[Query::where()]] on how to specify this parameter.\n     * @see onCondition()\n     *\/",88],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$on",95],";",["T_WHITESPACE","\n    ",95],["T_DOC_COMMENT","\/**\n     * @var array a list of relations that this query should be joined with\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$joinWith",99],";",["T_WHITESPACE","\n\n\n    ",99],["T_DOC_COMMENT","\/**\n     * Constructor.\n     * @param string $modelClass the model class associated with this query\n     * @param array $config configurations to be applied to the newly created query object\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","__construct",107],"(",["T_VARIABLE","$modelClass",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$config",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[","]",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","modelClass",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$modelClass",109],";",["T_WHITESPACE","\n        ",109],["T_STRING","parent",110],["T_DOUBLE_COLON","::",110],["T_STRING","__construct",110],"(",["T_VARIABLE","$config",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * Initializes the object.\n     * This method is called at the end of the constructor. The default implementation will trigger\n     * an [[EVENT_INIT]] event. If you override this method, make sure you call the parent implementation at the end\n     * to ensure triggering of the event.\n     *\/",113],["T_WHITESPACE","\n    ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","init",119],"(",")",["T_WHITESPACE","\n    ",119],"{",["T_WHITESPACE","\n        ",120],["T_STRING","parent",121],["T_DOUBLE_COLON","::",121],["T_STRING","init",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","trigger",122],"(",["T_STRING","self",122],["T_DOUBLE_COLON","::",122],["T_STRING","EVENT_INIT",122],")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n\n    ",123],["T_DOC_COMMENT","\/**\n     * Executes query and returns all results as an array.\n     * @param Connection $db the DB connection used to create the DB command.\n     * If null, the DB connection returned by [[modelClass]] will be used.\n     * @return array|ActiveRecord[] the query results. If the query results in nothing, an empty array will be returned.\n     *\/",125],["T_WHITESPACE","\n    ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","all",131],"(",["T_VARIABLE","$db",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","null",131],")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_STRING","parent",133],["T_DOUBLE_COLON","::",133],["T_STRING","all",133],"(",["T_VARIABLE","$db",133],")",";",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",136],["T_WHITESPACE","\n    ",138],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","prepare",139],"(",["T_VARIABLE","$builder",139],")",["T_WHITESPACE","\n    ",139],"{",["T_WHITESPACE","\n        ",140],["T_COMMENT","\/\/ NOTE: because the same ActiveQuery may be used to build different SQL statements\n",141],["T_WHITESPACE","        ",142],["T_COMMENT","\/\/ (e.g. by ActiveDataProvider, one for count query, the other for row data query,\n",142],["T_WHITESPACE","        ",143],["T_COMMENT","\/\/ it is important to make sure the same ActiveQuery can be used to build SQL statements\n",143],["T_WHITESPACE","        ",144],["T_COMMENT","\/\/ multiple times.\n",144],["T_WHITESPACE","        ",145],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_EMPTY","empty",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","joinWith",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","buildJoinWith",146],"(",")",";",["T_WHITESPACE","\n            ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","joinWith",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","null",147],";",["T_WHITESPACE","    ",147],["T_COMMENT","\/\/ clean it up to avoid issue https:\/\/github.com\/yiisoft\/yii2\/issues\/2687\n",147],["T_WHITESPACE","        ",148],"}",["T_WHITESPACE","\n\n        ",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_EMPTY","empty",150],"(",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","from",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",151],["T_WHITESPACE","\n            ",151],["T_VARIABLE","$modelClass",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","modelClass",152],";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$tableName",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$modelClass",153],["T_DOUBLE_COLON","::",153],["T_STRING","tableName",153],"(",")",";",["T_WHITESPACE","\n            ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","from",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"[",["T_VARIABLE","$tableName",154],"]",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_EMPTY","empty",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","select",157],")",["T_WHITESPACE"," ",157],["T_BOOLEAN_AND","&&",157],["T_WHITESPACE"," ",157],"!",["T_EMPTY","empty",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","join",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_LIST","list",158],"(",",",["T_WHITESPACE"," ",158],["T_VARIABLE","$alias",158],")",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getTableNameAndAlias",158],"(",")",";",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","select",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[","\"",["T_VARIABLE","$alias",159],["T_ENCAPSED_AND_WHITESPACE",".*",159],"\"","]",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","primaryModel",162],["T_WHITESPACE"," ",162],["T_IS_IDENTICAL","===",162],["T_WHITESPACE"," ",162],["T_STRING","null",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n            ",162],["T_COMMENT","\/\/ eager loading\n",163],["T_WHITESPACE","            ",164],["T_VARIABLE","$query",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","Query",164],["T_DOUBLE_COLON","::",164],["T_STRING","create",164],"(",["T_VARIABLE","$this",164],")",";",["T_WHITESPACE","\n        ",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_COMMENT","\/\/ lazy loading of a relation\n",166],["T_WHITESPACE","            ",167],["T_VARIABLE","$where",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","where",167],";",["T_WHITESPACE","\n\n            ",167],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","via",169],["T_WHITESPACE"," ",169],["T_INSTANCEOF","instanceof",169],["T_WHITESPACE"," ",169],["T_STRING","self",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n                ",169],["T_COMMENT","\/\/ via junction table\n",170],["T_WHITESPACE","                ",171],["T_VARIABLE","$viaModels",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","via",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","findJunctionRows",171],"(","[",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","primaryModel",171],"]",")",";",["T_WHITESPACE","\n                ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","filterByModels",172],"(",["T_VARIABLE","$viaModels",172],")",";",["T_WHITESPACE","\n            ",172],"}",["T_WHITESPACE"," ",173],["T_ELSEIF","elseif",173],["T_WHITESPACE"," ",173],"(",["T_STRING","is_array",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","via",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                ",173],["T_COMMENT","\/\/ via relation\n",174],["T_WHITESPACE","                ",175],["T_COMMENT","\/* @var $viaQuery ActiveQuery *\/",175],["T_WHITESPACE","\n                ",175],["T_LIST","list",176],"(",["T_VARIABLE","$viaName",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$viaQuery",176],")",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","via",176],";",["T_WHITESPACE","\n                ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$viaQuery",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","multiple",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                    ",177],["T_VARIABLE","$viaModels",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$viaQuery",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","all",178],"(",")",";",["T_WHITESPACE","\n                    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","primaryModel",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","populateRelation",179],"(",["T_VARIABLE","$viaName",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$viaModels",179],")",";",["T_WHITESPACE","\n                ",179],"}",["T_WHITESPACE"," ",180],["T_ELSE","else",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n                    ",180],["T_VARIABLE","$model",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$viaQuery",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","one",181],"(",")",";",["T_WHITESPACE","\n                    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","primaryModel",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","populateRelation",182],"(",["T_VARIABLE","$viaName",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$model",182],")",";",["T_WHITESPACE","\n                    ",182],["T_VARIABLE","$viaModels",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$model",183],["T_WHITESPACE"," ",183],["T_IS_IDENTICAL","===",183],["T_WHITESPACE"," ",183],["T_STRING","null",183],["T_WHITESPACE"," ",183],"?",["T_WHITESPACE"," ",183],"[","]",["T_WHITESPACE"," ",183],":",["T_WHITESPACE"," ",183],"[",["T_VARIABLE","$model",183],"]",";",["T_WHITESPACE","\n                ",183],"}",["T_WHITESPACE","\n                ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","filterByModels",185],"(",["T_VARIABLE","$viaModels",185],")",";",["T_WHITESPACE","\n            ",185],"}",["T_WHITESPACE"," ",186],["T_ELSE","else",186],["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n                ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","filterByModels",187],"(","[",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","primaryModel",187],"]",")",";",["T_WHITESPACE","\n            ",187],"}",["T_WHITESPACE","\n\n            ",188],["T_VARIABLE","$query",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","Query",190],["T_DOUBLE_COLON","::",190],["T_STRING","create",190],"(",["T_VARIABLE","$this",190],")",";",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","where",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$where",191],";",["T_WHITESPACE","\n        ",191],"}",["T_WHITESPACE","\n\n        ",192],["T_IF","if",194],["T_WHITESPACE"," ",194],"(","!",["T_EMPTY","empty",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","on",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$query",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","andWhere",195],"(",["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","on",195],")",";",["T_WHITESPACE","\n        ",195],"}",["T_WHITESPACE","\n\n        ",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$query",198],";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",201],["T_WHITESPACE","\n    ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","populate",204],"(",["T_VARIABLE","$rows",204],")",["T_WHITESPACE","\n    ",204],"{",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_EMPTY","empty",206],"(",["T_VARIABLE","$rows",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],"[","]",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_VARIABLE","$models",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","createModels",210],"(",["T_VARIABLE","$rows",210],")",";",["T_WHITESPACE","\n        ",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_EMPTY","empty",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","join",211],")",["T_WHITESPACE"," ",211],["T_BOOLEAN_AND","&&",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","indexBy",211],["T_WHITESPACE"," ",211],["T_IS_IDENTICAL","===",211],["T_WHITESPACE"," ",211],["T_STRING","null",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$models",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","removeDuplicatedModels",212],"(",["T_VARIABLE","$models",212],")",";",["T_WHITESPACE","\n        ",212],"}",["T_WHITESPACE","\n        ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_EMPTY","empty",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","with",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n            ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","findWith",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","with",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$models",215],")",";",["T_WHITESPACE","\n        ",215],"}",["T_WHITESPACE","\n\n        ",216],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","inverseOf",218],["T_WHITESPACE"," ",218],["T_IS_NOT_IDENTICAL","!==",218],["T_WHITESPACE"," ",218],["T_STRING","null",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","addInverseRelations",219],"(",["T_VARIABLE","$models",219],")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE","\n\n        ",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","asArray",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n            ",222],["T_FOREACH","foreach",223],["T_WHITESPACE"," ",223],"(",["T_VARIABLE","$models",223],["T_WHITESPACE"," ",223],["T_AS","as",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$model",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n                ",223],["T_VARIABLE","$model",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","afterFind",224],"(",")",";",["T_WHITESPACE","\n            ",224],"}",["T_WHITESPACE","\n        ",225],"}",["T_WHITESPACE","\n\n        ",226],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$models",228],";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_DOC_COMMENT","\/**\n     * Removes duplicated models by checking their primary key values.\n     * This method is mainly called when a join query is performed, which may cause duplicated rows being returned.\n     * @param array $models the models to be checked\n     * @throws InvalidConfigException if model primary key is empty\n     * @return array the distinctive models\n     *\/",231],["T_WHITESPACE","\n    ",237],["T_PRIVATE","private",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","removeDuplicatedModels",238],"(",["T_VARIABLE","$models",238],")",["T_WHITESPACE","\n    ",238],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$hash",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],"[","]",";",["T_WHITESPACE","\n        ",240],["T_COMMENT","\/* @var $class ActiveRecord *\/",241],["T_WHITESPACE","\n        ",241],["T_VARIABLE","$class",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","modelClass",242],";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$pks",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$class",243],["T_DOUBLE_COLON","::",243],["T_STRING","primaryKey",243],"(",")",";",["T_WHITESPACE","\n\n        ",243],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_STRING","count",245],"(",["T_VARIABLE","$pks",245],")",["T_WHITESPACE"," ",245],">",["T_WHITESPACE"," ",245],["T_LNUMBER","1",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n            ",245],["T_COMMENT","\/\/ composite primary key\n",246],["T_WHITESPACE","            ",247],["T_FOREACH","foreach",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$models",247],["T_WHITESPACE"," ",247],["T_AS","as",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$i",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$model",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n                ",247],["T_VARIABLE","$key",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],"[","]",";",["T_WHITESPACE","\n                ",248],["T_FOREACH","foreach",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$pks",249],["T_WHITESPACE"," ",249],["T_AS","as",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$pk",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n                    ",249],["T_IF","if",250],["T_WHITESPACE"," ",250],"(","!",["T_ISSET","isset",250],"(",["T_VARIABLE","$model",250],"[",["T_VARIABLE","$pk",250],"]",")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n                        ",250],["T_COMMENT","\/\/ do not continue if the primary key is not part of the result set\n",251],["T_WHITESPACE","                        ",252],["T_BREAK","break",252],["T_WHITESPACE"," ",252],["T_LNUMBER","2",252],";",["T_WHITESPACE","\n                    ",252],"}",["T_WHITESPACE","\n                    ",253],["T_VARIABLE","$key",254],"[","]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$model",254],"[",["T_VARIABLE","$pk",254],"]",";",["T_WHITESPACE","\n                ",254],"}",["T_WHITESPACE","\n                ",255],["T_VARIABLE","$key",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","serialize",256],"(",["T_VARIABLE","$key",256],")",";",["T_WHITESPACE","\n                ",256],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_ISSET","isset",257],"(",["T_VARIABLE","$hash",257],"[",["T_VARIABLE","$key",257],"]",")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n                    ",257],["T_UNSET","unset",258],"(",["T_VARIABLE","$models",258],"[",["T_VARIABLE","$i",258],"]",")",";",["T_WHITESPACE","\n                ",258],"}",["T_WHITESPACE"," ",259],["T_ELSE","else",259],["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n                    ",259],["T_VARIABLE","$hash",260],"[",["T_VARIABLE","$key",260],"]",["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","true",260],";",["T_WHITESPACE","\n                ",260],"}",["T_WHITESPACE","\n            ",261],"}",["T_WHITESPACE","\n        ",262],"}",["T_WHITESPACE"," ",263],["T_ELSEIF","elseif",263],["T_WHITESPACE"," ",263],"(",["T_EMPTY","empty",263],"(",["T_VARIABLE","$pks",263],")",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n            ",263],["T_THROW","throw",264],["T_WHITESPACE"," ",264],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_STRING","InvalidConfigException",264],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Primary key of '",264],["T_CURLY_OPEN","{",264],["T_VARIABLE","$class",264],"}",["T_ENCAPSED_AND_WHITESPACE","' can not be empty.",264],"\"",")",";",["T_WHITESPACE","\n        ",264],"}",["T_WHITESPACE"," ",265],["T_ELSE","else",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n            ",265],["T_COMMENT","\/\/ single column primary key\n",266],["T_WHITESPACE","            ",267],["T_VARIABLE","$pk",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","reset",267],"(",["T_VARIABLE","$pks",267],")",";",["T_WHITESPACE","\n            ",267],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$models",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$i",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$model",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n                ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(","!",["T_ISSET","isset",269],"(",["T_VARIABLE","$model",269],"[",["T_VARIABLE","$pk",269],"]",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n                    ",269],["T_COMMENT","\/\/ do not continue if the primary key is not part of the result set\n",270],["T_WHITESPACE","                    ",271],["T_BREAK","break",271],";",["T_WHITESPACE","\n                ",271],"}",["T_WHITESPACE","\n                ",272],["T_VARIABLE","$key",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$model",273],"[",["T_VARIABLE","$pk",273],"]",";",["T_WHITESPACE","\n                ",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_ISSET","isset",274],"(",["T_VARIABLE","$hash",274],"[",["T_VARIABLE","$key",274],"]",")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n                    ",274],["T_UNSET","unset",275],"(",["T_VARIABLE","$models",275],"[",["T_VARIABLE","$i",275],"]",")",";",["T_WHITESPACE","\n                ",275],"}",["T_WHITESPACE"," ",276],["T_ELSEIF","elseif",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$key",276],["T_WHITESPACE"," ",276],["T_IS_NOT_IDENTICAL","!==",276],["T_WHITESPACE"," ",276],["T_STRING","null",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n                    ",276],["T_VARIABLE","$hash",277],"[",["T_VARIABLE","$key",277],"]",["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","true",277],";",["T_WHITESPACE","\n                ",277],"}",["T_WHITESPACE","\n            ",278],"}",["T_WHITESPACE","\n        ",279],"}",["T_WHITESPACE","\n\n        ",280],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_STRING","array_values",282],"(",["T_VARIABLE","$models",282],")",";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n\n    ",283],["T_DOC_COMMENT","\/**\n     * Executes query and returns a single row of result.\n     * @param Connection|null $db the DB connection used to create the DB command.\n     * If `null`, the DB connection returned by [[modelClass]] will be used.\n     * @return ActiveRecord|array|null a single row of query result. Depending on the setting of [[asArray]],\n     * the query result may be either an array or an ActiveRecord object. `null` will be returned\n     * if the query results in nothing.\n     *\/",285],["T_WHITESPACE","\n    ",292],["T_PUBLIC","public",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","one",293],"(",["T_VARIABLE","$db",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","null",293],")",["T_WHITESPACE","\n    ",293],"{",["T_WHITESPACE","\n        ",294],["T_VARIABLE","$row",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_STRING","parent",295],["T_DOUBLE_COLON","::",295],["T_STRING","one",295],"(",["T_VARIABLE","$db",295],")",";",["T_WHITESPACE","\n        ",295],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$row",296],["T_WHITESPACE"," ",296],["T_IS_NOT_IDENTICAL","!==",296],["T_WHITESPACE"," ",296],["T_STRING","false",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n            ",296],["T_VARIABLE","$models",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","populate",297],"(","[",["T_VARIABLE","$row",297],"]",")",";",["T_WHITESPACE","\n            ",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_STRING","reset",298],"(",["T_VARIABLE","$models",298],")",["T_WHITESPACE"," ",298],"?",":",["T_WHITESPACE"," ",298],["T_STRING","null",298],";",["T_WHITESPACE","\n        ",298],"}",["T_WHITESPACE"," ",299],["T_ELSE","else",299],["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n            ",299],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_STRING","null",300],";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_DOC_COMMENT","\/**\n     * Creates a DB command that can be used to execute this query.\n     * @param Connection|null $db the DB connection used to create the DB command.\n     * If `null`, the DB connection returned by [[modelClass]] will be used.\n     * @return Command the created DB command instance.\n     *\/",304],["T_WHITESPACE","\n    ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","createCommand",310],"(",["T_VARIABLE","$db",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","null",310],")",["T_WHITESPACE","\n    ",310],"{",["T_WHITESPACE","\n        ",311],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",312],["T_WHITESPACE","\n        ",312],["T_VARIABLE","$modelClass",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","modelClass",313],";",["T_WHITESPACE","\n        ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$db",314],["T_WHITESPACE"," ",314],["T_IS_IDENTICAL","===",314],["T_WHITESPACE"," ",314],["T_STRING","null",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n            ",314],["T_VARIABLE","$db",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$modelClass",315],["T_DOUBLE_COLON","::",315],["T_STRING","getDb",315],"(",")",";",["T_WHITESPACE","\n        ",315],"}",["T_WHITESPACE","\n\n        ",316],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","sql",318],["T_WHITESPACE"," ",318],["T_IS_IDENTICAL","===",318],["T_WHITESPACE"," ",318],["T_STRING","null",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_LIST","list",319],["T_WHITESPACE"," ",319],"(",["T_VARIABLE","$sql",319],",",["T_WHITESPACE"," ",319],["T_VARIABLE","$params",319],")",["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$db",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","getQueryBuilder",319],"(",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","build",319],"(",["T_VARIABLE","$this",319],")",";",["T_WHITESPACE","\n        ",319],"}",["T_WHITESPACE"," ",320],["T_ELSE","else",320],["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$sql",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","sql",321],";",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$params",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","params",322],";",["T_WHITESPACE","\n        ",322],"}",["T_WHITESPACE","\n\n        ",323],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$db",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","createCommand",325],"(",["T_VARIABLE","$sql",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$params",325],")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",328],["T_WHITESPACE","\n    ",330],["T_PROTECTED","protected",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","queryScalar",331],"(",["T_VARIABLE","$selectExpression",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$db",331],")",["T_WHITESPACE","\n    ",331],"{",["T_WHITESPACE","\n        ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","sql",333],["T_WHITESPACE"," ",333],["T_IS_IDENTICAL","===",333],["T_WHITESPACE"," ",333],["T_STRING","null",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n            ",333],["T_RETURN","return",334],["T_WHITESPACE"," ",334],["T_STRING","parent",334],["T_DOUBLE_COLON","::",334],["T_STRING","queryScalar",334],"(",["T_VARIABLE","$selectExpression",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$db",334],")",";",["T_WHITESPACE","\n        ",334],"}",["T_WHITESPACE","\n        ",335],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",336],["T_WHITESPACE","\n        ",336],["T_VARIABLE","$modelClass",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","modelClass",337],";",["T_WHITESPACE","\n        ",337],["T_IF","if",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$db",338],["T_WHITESPACE"," ",338],["T_IS_IDENTICAL","===",338],["T_WHITESPACE"," ",338],["T_STRING","null",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n            ",338],["T_VARIABLE","$db",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$modelClass",339],["T_DOUBLE_COLON","::",339],["T_STRING","getDb",339],"(",")",";",["T_WHITESPACE","\n        ",339],"}",["T_WHITESPACE","\n        ",340],["T_RETURN","return",341],["T_WHITESPACE"," ",341],"(",["T_NEW","new",341],["T_WHITESPACE"," ",341],["T_STRING","Query",341],")",["T_OBJECT_OPERATOR","->",341],["T_STRING","select",341],"(","[",["T_VARIABLE","$selectExpression",341],"]",")",["T_WHITESPACE","\n            ",341],["T_OBJECT_OPERATOR","->",342],["T_STRING","from",342],"(","[",["T_CONSTANT_ENCAPSED_STRING","'c'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],"\"",["T_ENCAPSED_AND_WHITESPACE","(",342],["T_CURLY_OPEN","{",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","sql",342],"}",["T_ENCAPSED_AND_WHITESPACE",")",342],"\"","]",")",["T_WHITESPACE","\n            ",342],["T_OBJECT_OPERATOR","->",343],["T_STRING","params",343],"(",["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","params",343],")",["T_WHITESPACE","\n            ",343],["T_OBJECT_OPERATOR","->",344],["T_STRING","createCommand",344],"(",["T_VARIABLE","$db",344],")",["T_WHITESPACE","\n            ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","queryScalar",345],"(",")",";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_DOC_COMMENT","\/**\n     * Joins with the specified relations.\n     *\n     * This method allows you to reuse existing relation definitions to perform JOIN queries.\n     * Based on the definition of the specified relation(s), the method will append one or multiple\n     * JOIN statements to the current query.\n     *\n     * If the `$eagerLoading` parameter is true, the method will also perform eager loading for the specified relations,\n     * which is equivalent to calling [[with()]] using the specified relations.\n     *\n     * Note that because a JOIN query will be performed, you are responsible to disambiguate column names.\n     *\n     * This method differs from [[with()]] in that it will build up and execute a JOIN SQL statement\n     * for the primary table. And when `$eagerLoading` is true, it will call [[with()]] in addition with the specified relations.\n     *\n     * @param string|array $with the relations to be joined. This can either be a string, representing a relation name or\n     * an array with the following semantics:\n     *\n     * - Each array element represents a single relation.\n     * - You may specify the relation name as the array key and provide an anonymous functions that\n     *   can be used to modify the relation queries on-the-fly as the array value.\n     * - If a relation query does not need modification, you may use the relation name as the array value.\n     *\n     * The relation name may optionally contain an alias for the relation table (e.g. `books b`).\n     *\n     * Sub-relations can also be specified, see [[with()]] for the syntax.\n     *\n     * In the following you find some examples:\n     *\n     * ```php\n     * \/\/ find all orders that contain books, and eager loading \"books\"\n     * Order::find()->joinWith('books', true, 'INNER JOIN')->all();\n     * \/\/ find all orders, eager loading \"books\", and sort the orders and books by the book names.\n     * Order::find()->joinWith([\n     *     'books' => function (\\yii\\db\\ActiveQuery $query) {\n     *         $query->orderBy('item.name');\n     *     }\n     * ])->all();\n     * \/\/ find all orders that contain books of the category 'Science fiction', using the alias \"b\" for the books table\n     * Order::find()->joinWith(['books b'], true, 'INNER JOIN')->where(['b.category' => 'Science fiction'])->all();\n     * ```\n     *\n     * The alias syntax is available since version 2.0.7.\n     *\n     * @param bool|array $eagerLoading whether to eager load the relations specified in `$with`.\n     * When this is a boolean, it applies to all relations specified in `$with`. Use an array\n     * to explicitly list which relations in `$with` need to be eagerly loaded. Defaults to `true`.\n     * @param string|array $joinType the join type of the relations specified in `$with`.\n     * When this is a string, it applies to all relations specified in `$with`. Use an array\n     * in the format of `relationName => joinType` to specify different join types for different relations.\n     * @return $this the query object itself\n     *\/",348],["T_WHITESPACE","\n    ",399],["T_PUBLIC","public",400],["T_WHITESPACE"," ",400],["T_FUNCTION","function",400],["T_WHITESPACE"," ",400],["T_STRING","joinWith",400],"(",["T_VARIABLE","$with",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$eagerLoading",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","true",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$joinType",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'LEFT JOIN'",400],")",["T_WHITESPACE","\n    ",400],"{",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$relations",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],"[","]",";",["T_WHITESPACE","\n        ",402],["T_FOREACH","foreach",403],["T_WHITESPACE"," ",403],"(",["T_ARRAY_CAST","(array)",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$with",403],["T_WHITESPACE"," ",403],["T_AS","as",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$name",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$callback",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n            ",403],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_STRING","is_int",404],"(",["T_VARIABLE","$name",404],")",")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n                ",404],["T_VARIABLE","$name",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$callback",405],";",["T_WHITESPACE","\n                ",405],["T_VARIABLE","$callback",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","null",406],";",["T_WHITESPACE","\n            ",406],"}",["T_WHITESPACE","\n\n            ",407],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_STRING","preg_match",409],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.*?)(?:\\s+AS\\s+|\\s+)(\\w+)$\/i'",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$name",409],",",["T_WHITESPACE"," ",409],["T_VARIABLE","$matches",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n                ",409],["T_COMMENT","\/\/ relation is defined with an alias, adjust callback to apply alias\n",410],["T_WHITESPACE","                ",411],["T_LIST","list",411],"(",",",["T_WHITESPACE"," ",411],["T_VARIABLE","$relation",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$alias",411],")",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$matches",411],";",["T_WHITESPACE","\n                ",411],["T_VARIABLE","$name",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$relation",412],";",["T_WHITESPACE","\n                ",412],["T_VARIABLE","$callback",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$query",413],")",["T_WHITESPACE"," ",413],["T_USE","use",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$callback",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$alias",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n                    ",413],["T_DOC_COMMENT","\/** @var $query ActiveQuery *\/",414],["T_WHITESPACE","\n                    ",414],["T_VARIABLE","$query",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","alias",415],"(",["T_VARIABLE","$alias",415],")",";",["T_WHITESPACE","\n                    ",415],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$callback",416],["T_WHITESPACE"," ",416],["T_IS_NOT_IDENTICAL","!==",416],["T_WHITESPACE"," ",416],["T_STRING","null",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n                        ",416],["T_STRING","call_user_func",417],"(",["T_VARIABLE","$callback",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$query",417],")",";",["T_WHITESPACE","\n                    ",417],"}",["T_WHITESPACE","\n                ",418],"}",";",["T_WHITESPACE","\n            ",419],"}",["T_WHITESPACE","\n\n            ",420],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_VARIABLE","$callback",422],["T_WHITESPACE"," ",422],["T_IS_IDENTICAL","===",422],["T_WHITESPACE"," ",422],["T_STRING","null",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n                ",422],["T_VARIABLE","$relations",423],"[","]",["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$name",423],";",["T_WHITESPACE","\n            ",423],"}",["T_WHITESPACE"," ",424],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n                ",424],["T_VARIABLE","$relations",425],"[",["T_VARIABLE","$name",425],"]",["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$callback",425],";",["T_WHITESPACE","\n            ",425],"}",["T_WHITESPACE","\n        ",426],"}",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","joinWith",428],"[","]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],"[",["T_VARIABLE","$relations",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$eagerLoading",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$joinType",428],"]",";",["T_WHITESPACE","\n        ",428],["T_RETURN","return",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n\n    ",430],["T_PRIVATE","private",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","buildJoinWith",432],"(",")",["T_WHITESPACE","\n    ",432],"{",["T_WHITESPACE","\n        ",433],["T_VARIABLE","$join",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","join",434],";",["T_WHITESPACE","\n        ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","join",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],"[","]",";",["T_WHITESPACE","\n\n        ",435],["T_VARIABLE","$model",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_NEW","new",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","modelClass",437],";",["T_WHITESPACE","\n        ",437],["T_FOREACH","foreach",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","joinWith",438],["T_WHITESPACE"," ",438],["T_AS","as",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$config",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n            ",438],["T_LIST","list",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$with",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$eagerLoading",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$joinType",439],")",["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$config",439],";",["T_WHITESPACE","\n            ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","joinWithRelations",440],"(",["T_VARIABLE","$model",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$with",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$joinType",440],")",";",["T_WHITESPACE","\n\n            ",440],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_STRING","is_array",442],"(",["T_VARIABLE","$eagerLoading",442],")",")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n                ",442],["T_FOREACH","foreach",443],["T_WHITESPACE"," ",443],"(",["T_VARIABLE","$with",443],["T_WHITESPACE"," ",443],["T_AS","as",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$name",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$callback",443],")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n                    ",443],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_STRING","is_int",444],"(",["T_VARIABLE","$name",444],")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n                        ",444],["T_IF","if",445],["T_WHITESPACE"," ",445],"(","!",["T_STRING","in_array",445],"(",["T_VARIABLE","$callback",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$eagerLoading",445],",",["T_WHITESPACE"," ",445],["T_STRING","true",445],")",")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n                            ",445],["T_UNSET","unset",446],"(",["T_VARIABLE","$with",446],"[",["T_VARIABLE","$name",446],"]",")",";",["T_WHITESPACE","\n                        ",446],"}",["T_WHITESPACE","\n                    ",447],"}",["T_WHITESPACE"," ",448],["T_ELSEIF","elseif",448],["T_WHITESPACE"," ",448],"(","!",["T_STRING","in_array",448],"(",["T_VARIABLE","$name",448],",",["T_WHITESPACE"," ",448],["T_VARIABLE","$eagerLoading",448],",",["T_WHITESPACE"," ",448],["T_STRING","true",448],")",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n                        ",448],["T_UNSET","unset",449],"(",["T_VARIABLE","$with",449],"[",["T_VARIABLE","$name",449],"]",")",";",["T_WHITESPACE","\n                    ",449],"}",["T_WHITESPACE","\n                ",450],"}",["T_WHITESPACE","\n            ",451],"}",["T_WHITESPACE"," ",452],["T_ELSEIF","elseif",452],["T_WHITESPACE"," ",452],"(","!",["T_VARIABLE","$eagerLoading",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n                ",452],["T_VARIABLE","$with",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],"[","]",";",["T_WHITESPACE","\n            ",453],"}",["T_WHITESPACE","\n\n            ",454],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","with",456],"(",["T_VARIABLE","$with",456],")",";",["T_WHITESPACE","\n        ",456],"}",["T_WHITESPACE","\n\n        ",457],["T_COMMENT","\/\/ remove duplicated joins added by joinWithRelations that may be added\n",459],["T_WHITESPACE","        ",460],["T_COMMENT","\/\/ e.g. when joining a relation and a via relation at the same time\n",460],["T_WHITESPACE","        ",461],["T_VARIABLE","$uniqueJoins",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],"[","]",";",["T_WHITESPACE","\n        ",461],["T_FOREACH","foreach",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","join",462],["T_WHITESPACE"," ",462],["T_AS","as",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$j",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n            ",462],["T_VARIABLE","$uniqueJoins",463],"[",["T_STRING","serialize",463],"(",["T_VARIABLE","$j",463],")","]",["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$j",463],";",["T_WHITESPACE","\n        ",463],"}",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","join",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","array_values",465],"(",["T_VARIABLE","$uniqueJoins",465],")",";",["T_WHITESPACE","\n\n        ",465],["T_IF","if",467],["T_WHITESPACE"," ",467],"(","!",["T_EMPTY","empty",467],"(",["T_VARIABLE","$join",467],")",")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n            ",467],["T_COMMENT","\/\/ append explicit join to joinWith()\n",468],["T_WHITESPACE","            ",469],["T_COMMENT","\/\/ https:\/\/github.com\/yiisoft\/yii2\/issues\/2880\n",469],["T_WHITESPACE","            ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","join",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_EMPTY","empty",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","join",470],")",["T_WHITESPACE"," ",470],"?",["T_WHITESPACE"," ",470],["T_VARIABLE","$join",470],["T_WHITESPACE"," ",470],":",["T_WHITESPACE"," ",470],["T_STRING","array_merge",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","join",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$join",470],")",";",["T_WHITESPACE","\n        ",470],"}",["T_WHITESPACE","\n    ",471],"}",["T_WHITESPACE","\n\n    ",472],["T_DOC_COMMENT","\/**\n     * Inner joins with the specified relations.\n     * This is a shortcut method to [[joinWith()]] with the join type set as \"INNER JOIN\".\n     * Please refer to [[joinWith()]] for detailed usage of this method.\n     * @param string|array $with the relations to be joined with.\n     * @param bool|array $eagerLoading whether to eager loading the relations.\n     * @return $this the query object itself\n     * @see joinWith()\n     *\/",474],["T_WHITESPACE","\n    ",482],["T_PUBLIC","public",483],["T_WHITESPACE"," ",483],["T_FUNCTION","function",483],["T_WHITESPACE"," ",483],["T_STRING","innerJoinWith",483],"(",["T_VARIABLE","$with",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$eagerLoading",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_STRING","true",483],")",["T_WHITESPACE","\n    ",483],"{",["T_WHITESPACE","\n        ",484],["T_RETURN","return",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","joinWith",485],"(",["T_VARIABLE","$with",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$eagerLoading",485],",",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'INNER JOIN'",485],")",";",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n\n    ",486],["T_DOC_COMMENT","\/**\n     * Modifies the current query by adding join fragments based on the given relations.\n     * @param ActiveRecord $model the primary model\n     * @param array $with the relations to be joined\n     * @param string|array $joinType the join type\n     *\/",488],["T_WHITESPACE","\n    ",493],["T_PRIVATE","private",494],["T_WHITESPACE"," ",494],["T_FUNCTION","function",494],["T_WHITESPACE"," ",494],["T_STRING","joinWithRelations",494],"(",["T_VARIABLE","$model",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$with",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$joinType",494],")",["T_WHITESPACE","\n    ",494],"{",["T_WHITESPACE","\n        ",495],["T_VARIABLE","$relations",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],"[","]",";",["T_WHITESPACE","\n\n        ",496],["T_FOREACH","foreach",498],["T_WHITESPACE"," ",498],"(",["T_VARIABLE","$with",498],["T_WHITESPACE"," ",498],["T_AS","as",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$name",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$callback",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n            ",498],["T_IF","if",499],["T_WHITESPACE"," ",499],"(",["T_STRING","is_int",499],"(",["T_VARIABLE","$name",499],")",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n                ",499],["T_VARIABLE","$name",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$callback",500],";",["T_WHITESPACE","\n                ",500],["T_VARIABLE","$callback",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","null",501],";",["T_WHITESPACE","\n            ",501],"}",["T_WHITESPACE","\n\n            ",502],["T_VARIABLE","$primaryModel",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$model",504],";",["T_WHITESPACE","\n            ",504],["T_VARIABLE","$parent",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],";",["T_WHITESPACE","\n            ",505],["T_VARIABLE","$prefix",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","''",506],";",["T_WHITESPACE","\n            ",506],["T_WHILE","while",507],["T_WHITESPACE"," ",507],"(","(",["T_VARIABLE","$pos",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_STRING","strpos",507],"(",["T_VARIABLE","$name",507],",",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'.'",507],")",")",["T_WHITESPACE"," ",507],["T_IS_NOT_IDENTICAL","!==",507],["T_WHITESPACE"," ",507],["T_STRING","false",507],")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n                ",507],["T_VARIABLE","$childName",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","substr",508],"(",["T_VARIABLE","$name",508],",",["T_WHITESPACE"," ",508],["T_VARIABLE","$pos",508],["T_WHITESPACE"," ",508],"+",["T_WHITESPACE"," ",508],["T_LNUMBER","1",508],")",";",["T_WHITESPACE","\n                ",508],["T_VARIABLE","$name",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_STRING","substr",509],"(",["T_VARIABLE","$name",509],",",["T_WHITESPACE"," ",509],["T_LNUMBER","0",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$pos",509],")",";",["T_WHITESPACE","\n                ",509],["T_VARIABLE","$fullName",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$prefix",510],["T_WHITESPACE"," ",510],["T_IS_IDENTICAL","===",510],["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","''",510],["T_WHITESPACE"," ",510],"?",["T_WHITESPACE"," ",510],["T_VARIABLE","$name",510],["T_WHITESPACE"," ",510],":",["T_WHITESPACE"," ",510],"\"",["T_VARIABLE","$prefix",510],["T_ENCAPSED_AND_WHITESPACE",".",510],["T_VARIABLE","$name",510],"\"",";",["T_WHITESPACE","\n                ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(","!",["T_ISSET","isset",511],"(",["T_VARIABLE","$relations",511],"[",["T_VARIABLE","$fullName",511],"]",")",")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                    ",511],["T_VARIABLE","$relations",512],"[",["T_VARIABLE","$fullName",512],"]",["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$relation",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$primaryModel",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getRelation",512],"(",["T_VARIABLE","$name",512],")",";",["T_WHITESPACE","\n                    ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","joinWithRelation",513],"(",["T_VARIABLE","$parent",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$relation",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getJoinType",513],"(",["T_VARIABLE","$joinType",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$fullName",513],")",")",";",["T_WHITESPACE","\n                ",513],"}",["T_WHITESPACE"," ",514],["T_ELSE","else",514],["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n                    ",514],["T_VARIABLE","$relation",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$relations",515],"[",["T_VARIABLE","$fullName",515],"]",";",["T_WHITESPACE","\n                ",515],"}",["T_WHITESPACE","\n                ",516],["T_VARIABLE","$primaryModel",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_NEW","new",517],["T_WHITESPACE"," ",517],["T_VARIABLE","$relation",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","modelClass",517],";",["T_WHITESPACE","\n                ",517],["T_VARIABLE","$parent",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$relation",518],";",["T_WHITESPACE","\n                ",518],["T_VARIABLE","$prefix",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$fullName",519],";",["T_WHITESPACE","\n                ",519],["T_VARIABLE","$name",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$childName",520],";",["T_WHITESPACE","\n            ",520],"}",["T_WHITESPACE","\n\n            ",521],["T_VARIABLE","$fullName",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$prefix",523],["T_WHITESPACE"," ",523],["T_IS_IDENTICAL","===",523],["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","''",523],["T_WHITESPACE"," ",523],"?",["T_WHITESPACE"," ",523],["T_VARIABLE","$name",523],["T_WHITESPACE"," ",523],":",["T_WHITESPACE"," ",523],"\"",["T_VARIABLE","$prefix",523],["T_ENCAPSED_AND_WHITESPACE",".",523],["T_VARIABLE","$name",523],"\"",";",["T_WHITESPACE","\n            ",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(","!",["T_ISSET","isset",524],"(",["T_VARIABLE","$relations",524],"[",["T_VARIABLE","$fullName",524],"]",")",")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n                ",524],["T_VARIABLE","$relations",525],"[",["T_VARIABLE","$fullName",525],"]",["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$relation",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$primaryModel",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getRelation",525],"(",["T_VARIABLE","$name",525],")",";",["T_WHITESPACE","\n                ",525],["T_IF","if",526],["T_WHITESPACE"," ",526],"(",["T_VARIABLE","$callback",526],["T_WHITESPACE"," ",526],["T_IS_NOT_IDENTICAL","!==",526],["T_WHITESPACE"," ",526],["T_STRING","null",526],")",["T_WHITESPACE"," ",526],"{",["T_WHITESPACE","\n                    ",526],["T_STRING","call_user_func",527],"(",["T_VARIABLE","$callback",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$relation",527],")",";",["T_WHITESPACE","\n                ",527],"}",["T_WHITESPACE","\n                ",528],["T_IF","if",529],["T_WHITESPACE"," ",529],"(","!",["T_EMPTY","empty",529],"(",["T_VARIABLE","$relation",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","joinWith",529],")",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n                    ",529],["T_VARIABLE","$relation",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","buildJoinWith",530],"(",")",";",["T_WHITESPACE","\n                ",530],"}",["T_WHITESPACE","\n                ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","joinWithRelation",532],"(",["T_VARIABLE","$parent",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$relation",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","getJoinType",532],"(",["T_VARIABLE","$joinType",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$fullName",532],")",")",";",["T_WHITESPACE","\n            ",532],"}",["T_WHITESPACE","\n        ",533],"}",["T_WHITESPACE","\n    ",534],"}",["T_WHITESPACE","\n\n    ",535],["T_DOC_COMMENT","\/**\n     * Returns the join type based on the given join type parameter and the relation name.\n     * @param string|array $joinType the given join type(s)\n     * @param string $name relation name\n     * @return string the real join type\n     *\/",537],["T_WHITESPACE","\n    ",542],["T_PRIVATE","private",543],["T_WHITESPACE"," ",543],["T_FUNCTION","function",543],["T_WHITESPACE"," ",543],["T_STRING","getJoinType",543],"(",["T_VARIABLE","$joinType",543],",",["T_WHITESPACE"," ",543],["T_VARIABLE","$name",543],")",["T_WHITESPACE","\n    ",543],"{",["T_WHITESPACE","\n        ",544],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_STRING","is_array",545],"(",["T_VARIABLE","$joinType",545],")",["T_WHITESPACE"," ",545],["T_BOOLEAN_AND","&&",545],["T_WHITESPACE"," ",545],["T_ISSET","isset",545],"(",["T_VARIABLE","$joinType",545],"[",["T_VARIABLE","$name",545],"]",")",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n            ",545],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$joinType",546],"[",["T_VARIABLE","$name",546],"]",";",["T_WHITESPACE","\n        ",546],"}",["T_WHITESPACE"," ",547],["T_ELSE","else",547],["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n            ",547],["T_RETURN","return",548],["T_WHITESPACE"," ",548],["T_STRING","is_string",548],"(",["T_VARIABLE","$joinType",548],")",["T_WHITESPACE"," ",548],"?",["T_WHITESPACE"," ",548],["T_VARIABLE","$joinType",548],["T_WHITESPACE"," ",548],":",["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'INNER JOIN'",548],";",["T_WHITESPACE","\n        ",548],"}",["T_WHITESPACE","\n    ",549],"}",["T_WHITESPACE","\n\n    ",550],["T_DOC_COMMENT","\/**\n     * Returns the table name and the table alias for [[modelClass]].\n     * @return array the table name and the table alias.\n     * @internal\n     *\/",552],["T_WHITESPACE","\n    ",556],["T_PRIVATE","private",557],["T_WHITESPACE"," ",557],["T_FUNCTION","function",557],["T_WHITESPACE"," ",557],["T_STRING","getTableNameAndAlias",557],"(",")",["T_WHITESPACE","\n    ",557],"{",["T_WHITESPACE","\n        ",558],["T_IF","if",559],["T_WHITESPACE"," ",559],"(",["T_EMPTY","empty",559],"(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","from",559],")",")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n            ",559],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",560],["T_WHITESPACE","\n            ",560],["T_VARIABLE","$modelClass",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","modelClass",561],";",["T_WHITESPACE","\n            ",561],["T_VARIABLE","$tableName",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$modelClass",562],["T_DOUBLE_COLON","::",562],["T_STRING","tableName",562],"(",")",";",["T_WHITESPACE","\n        ",562],"}",["T_WHITESPACE"," ",563],["T_ELSE","else",563],["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n            ",563],["T_VARIABLE","$tableName",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","''",564],";",["T_WHITESPACE","\n            ",564],["T_FOREACH","foreach",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","from",565],["T_WHITESPACE"," ",565],["T_AS","as",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$alias",565],["T_WHITESPACE"," ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$tableName",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n                ",565],["T_IF","if",566],["T_WHITESPACE"," ",566],"(",["T_STRING","is_string",566],"(",["T_VARIABLE","$alias",566],")",")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n                    ",566],["T_RETURN","return",567],["T_WHITESPACE"," ",567],"[",["T_VARIABLE","$tableName",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$alias",567],"]",";",["T_WHITESPACE","\n                ",567],"}",["T_WHITESPACE"," ",568],["T_ELSE","else",568],["T_WHITESPACE"," ",568],"{",["T_WHITESPACE","\n                    ",568],["T_BREAK","break",569],";",["T_WHITESPACE","\n                ",569],"}",["T_WHITESPACE","\n            ",570],"}",["T_WHITESPACE","\n        ",571],"}",["T_WHITESPACE","\n\n        ",572],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_STRING","preg_match",574],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(.*?)\\s+({{\\w+}}|\\w+)$\/'",574],",",["T_WHITESPACE"," ",574],["T_VARIABLE","$tableName",574],",",["T_WHITESPACE"," ",574],["T_VARIABLE","$matches",574],")",")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n            ",574],["T_VARIABLE","$alias",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$matches",575],"[",["T_LNUMBER","2",575],"]",";",["T_WHITESPACE","\n        ",575],"}",["T_WHITESPACE"," ",576],["T_ELSE","else",576],["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n            ",576],["T_VARIABLE","$alias",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_VARIABLE","$tableName",577],";",["T_WHITESPACE","\n        ",577],"}",["T_WHITESPACE","\n\n        ",578],["T_RETURN","return",580],["T_WHITESPACE"," ",580],"[",["T_VARIABLE","$tableName",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$alias",580],"]",";",["T_WHITESPACE","\n    ",580],"}",["T_WHITESPACE","\n\n    ",581],["T_DOC_COMMENT","\/**\n     * Joins a parent query with a child query.\n     * The current query object will be modified accordingly.\n     * @param ActiveQuery $parent\n     * @param ActiveQuery $child\n     * @param string $joinType\n     *\/",583],["T_WHITESPACE","\n    ",589],["T_PRIVATE","private",590],["T_WHITESPACE"," ",590],["T_FUNCTION","function",590],["T_WHITESPACE"," ",590],["T_STRING","joinWithRelation",590],"(",["T_VARIABLE","$parent",590],",",["T_WHITESPACE"," ",590],["T_VARIABLE","$child",590],",",["T_WHITESPACE"," ",590],["T_VARIABLE","$joinType",590],")",["T_WHITESPACE","\n    ",590],"{",["T_WHITESPACE","\n        ",591],["T_VARIABLE","$via",592],["T_WHITESPACE"," ",592],"=",["T_WHITESPACE"," ",592],["T_VARIABLE","$child",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","via",592],";",["T_WHITESPACE","\n        ",592],["T_VARIABLE","$child",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","via",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","null",593],";",["T_WHITESPACE","\n        ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$via",594],["T_WHITESPACE"," ",594],["T_INSTANCEOF","instanceof",594],["T_WHITESPACE"," ",594],["T_STRING","ActiveQuery",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n            ",594],["T_COMMENT","\/\/ via table\n",595],["T_WHITESPACE","            ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","joinWithRelation",596],"(",["T_VARIABLE","$parent",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$via",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$joinType",596],")",";",["T_WHITESPACE","\n            ",596],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","joinWithRelation",597],"(",["T_VARIABLE","$via",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$child",597],",",["T_WHITESPACE"," ",597],["T_VARIABLE","$joinType",597],")",";",["T_WHITESPACE","\n            ",597],["T_RETURN","return",598],";",["T_WHITESPACE","\n        ",598],"}",["T_WHITESPACE"," ",599],["T_ELSEIF","elseif",599],["T_WHITESPACE"," ",599],"(",["T_STRING","is_array",599],"(",["T_VARIABLE","$via",599],")",")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n            ",599],["T_COMMENT","\/\/ via relation\n",600],["T_WHITESPACE","            ",601],["T_VARIABLE","$this",601],["T_OBJECT_OPERATOR","->",601],["T_STRING","joinWithRelation",601],"(",["T_VARIABLE","$parent",601],",",["T_WHITESPACE"," ",601],["T_VARIABLE","$via",601],"[",["T_LNUMBER","1",601],"]",",",["T_WHITESPACE"," ",601],["T_VARIABLE","$joinType",601],")",";",["T_WHITESPACE","\n            ",601],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","joinWithRelation",602],"(",["T_VARIABLE","$via",602],"[",["T_LNUMBER","1",602],"]",",",["T_WHITESPACE"," ",602],["T_VARIABLE","$child",602],",",["T_WHITESPACE"," ",602],["T_VARIABLE","$joinType",602],")",";",["T_WHITESPACE","\n            ",602],["T_RETURN","return",603],";",["T_WHITESPACE","\n        ",603],"}",["T_WHITESPACE","\n\n        ",604],["T_LIST","list",606],["T_WHITESPACE"," ",606],"(",["T_VARIABLE","$parentTable",606],",",["T_WHITESPACE"," ",606],["T_VARIABLE","$parentAlias",606],")",["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$parent",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","getTableNameAndAlias",606],"(",")",";",["T_WHITESPACE","\n        ",606],["T_LIST","list",607],["T_WHITESPACE"," ",607],"(",["T_VARIABLE","$childTable",607],",",["T_WHITESPACE"," ",607],["T_VARIABLE","$childAlias",607],")",["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_VARIABLE","$child",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","getTableNameAndAlias",607],"(",")",";",["T_WHITESPACE","\n\n        ",607],["T_IF","if",609],["T_WHITESPACE"," ",609],"(","!",["T_EMPTY","empty",609],"(",["T_VARIABLE","$child",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","link",609],")",")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n\n            ",609],["T_IF","if",611],["T_WHITESPACE"," ",611],"(",["T_STRING","strpos",611],"(",["T_VARIABLE","$parentAlias",611],",",["T_WHITESPACE"," ",611],["T_CONSTANT_ENCAPSED_STRING","'{{'",611],")",["T_WHITESPACE"," ",611],["T_IS_IDENTICAL","===",611],["T_WHITESPACE"," ",611],["T_STRING","false",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n                ",611],["T_VARIABLE","$parentAlias",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'{{'",612],["T_WHITESPACE"," ",612],".",["T_WHITESPACE"," ",612],["T_VARIABLE","$parentAlias",612],["T_WHITESPACE"," ",612],".",["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'}}'",612],";",["T_WHITESPACE","\n            ",612],"}",["T_WHITESPACE","\n            ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(",["T_STRING","strpos",614],"(",["T_VARIABLE","$childAlias",614],",",["T_WHITESPACE"," ",614],["T_CONSTANT_ENCAPSED_STRING","'{{'",614],")",["T_WHITESPACE"," ",614],["T_IS_IDENTICAL","===",614],["T_WHITESPACE"," ",614],["T_STRING","false",614],")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n                ",614],["T_VARIABLE","$childAlias",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'{{'",615],["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_VARIABLE","$childAlias",615],["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'}}'",615],";",["T_WHITESPACE","\n            ",615],"}",["T_WHITESPACE","\n\n            ",616],["T_VARIABLE","$on",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],"[","]",";",["T_WHITESPACE","\n            ",618],["T_FOREACH","foreach",619],["T_WHITESPACE"," ",619],"(",["T_VARIABLE","$child",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","link",619],["T_WHITESPACE"," ",619],["T_AS","as",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$childColumn",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],["T_VARIABLE","$parentColumn",619],")",["T_WHITESPACE"," ",619],"{",["T_WHITESPACE","\n                ",619],["T_VARIABLE","$on",620],"[","]",["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],"\"",["T_VARIABLE","$parentAlias",620],["T_ENCAPSED_AND_WHITESPACE",".[[",620],["T_VARIABLE","$parentColumn",620],["T_ENCAPSED_AND_WHITESPACE","]] = ",620],["T_VARIABLE","$childAlias",620],["T_ENCAPSED_AND_WHITESPACE",".[[",620],["T_VARIABLE","$childColumn",620],["T_ENCAPSED_AND_WHITESPACE","]]",620],"\"",";",["T_WHITESPACE","\n            ",620],"}",["T_WHITESPACE","\n            ",621],["T_VARIABLE","$on",622],["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_STRING","implode",622],"(",["T_CONSTANT_ENCAPSED_STRING","' AND '",622],",",["T_WHITESPACE"," ",622],["T_VARIABLE","$on",622],")",";",["T_WHITESPACE","\n            ",622],["T_IF","if",623],["T_WHITESPACE"," ",623],"(","!",["T_EMPTY","empty",623],"(",["T_VARIABLE","$child",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","on",623],")",")",["T_WHITESPACE"," ",623],"{",["T_WHITESPACE","\n                ",623],["T_VARIABLE","$on",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],"[",["T_CONSTANT_ENCAPSED_STRING","'and'",624],",",["T_WHITESPACE"," ",624],["T_VARIABLE","$on",624],",",["T_WHITESPACE"," ",624],["T_VARIABLE","$child",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","on",624],"]",";",["T_WHITESPACE","\n            ",624],"}",["T_WHITESPACE","\n        ",625],"}",["T_WHITESPACE"," ",626],["T_ELSE","else",626],["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n            ",626],["T_VARIABLE","$on",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_VARIABLE","$child",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","on",627],";",["T_WHITESPACE","\n        ",627],"}",["T_WHITESPACE","\n        ",628],["T_VARIABLE","$this",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","join",629],"(",["T_VARIABLE","$joinType",629],",",["T_WHITESPACE"," ",629],["T_EMPTY","empty",629],"(",["T_VARIABLE","$child",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","from",629],")",["T_WHITESPACE"," ",629],"?",["T_WHITESPACE"," ",629],["T_VARIABLE","$childTable",629],["T_WHITESPACE"," ",629],":",["T_WHITESPACE"," ",629],["T_VARIABLE","$child",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","from",629],",",["T_WHITESPACE"," ",629],["T_VARIABLE","$on",629],")",";",["T_WHITESPACE","\n\n        ",629],["T_IF","if",631],["T_WHITESPACE"," ",631],"(","!",["T_EMPTY","empty",631],"(",["T_VARIABLE","$child",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","where",631],")",")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n            ",631],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","andWhere",632],"(",["T_VARIABLE","$child",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","where",632],")",";",["T_WHITESPACE","\n        ",632],"}",["T_WHITESPACE","\n        ",633],["T_IF","if",634],["T_WHITESPACE"," ",634],"(","!",["T_EMPTY","empty",634],"(",["T_VARIABLE","$child",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","having",634],")",")",["T_WHITESPACE"," ",634],"{",["T_WHITESPACE","\n            ",634],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","andHaving",635],"(",["T_VARIABLE","$child",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","having",635],")",";",["T_WHITESPACE","\n        ",635],"}",["T_WHITESPACE","\n        ",636],["T_IF","if",637],["T_WHITESPACE"," ",637],"(","!",["T_EMPTY","empty",637],"(",["T_VARIABLE","$child",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","orderBy",637],")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n            ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","addOrderBy",638],"(",["T_VARIABLE","$child",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","orderBy",638],")",";",["T_WHITESPACE","\n        ",638],"}",["T_WHITESPACE","\n        ",639],["T_IF","if",640],["T_WHITESPACE"," ",640],"(","!",["T_EMPTY","empty",640],"(",["T_VARIABLE","$child",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","groupBy",640],")",")",["T_WHITESPACE"," ",640],"{",["T_WHITESPACE","\n            ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","addGroupBy",641],"(",["T_VARIABLE","$child",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","groupBy",641],")",";",["T_WHITESPACE","\n        ",641],"}",["T_WHITESPACE","\n        ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(","!",["T_EMPTY","empty",643],"(",["T_VARIABLE","$child",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","params",643],")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n            ",643],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","addParams",644],"(",["T_VARIABLE","$child",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","params",644],")",";",["T_WHITESPACE","\n        ",644],"}",["T_WHITESPACE","\n        ",645],["T_IF","if",646],["T_WHITESPACE"," ",646],"(","!",["T_EMPTY","empty",646],"(",["T_VARIABLE","$child",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","join",646],")",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n            ",646],["T_FOREACH","foreach",647],["T_WHITESPACE"," ",647],"(",["T_VARIABLE","$child",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","join",647],["T_WHITESPACE"," ",647],["T_AS","as",647],["T_WHITESPACE"," ",647],["T_VARIABLE","$join",647],")",["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n                ",647],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","join",648],"[","]",["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$join",648],";",["T_WHITESPACE","\n            ",648],"}",["T_WHITESPACE","\n        ",649],"}",["T_WHITESPACE","\n        ",650],["T_IF","if",651],["T_WHITESPACE"," ",651],"(","!",["T_EMPTY","empty",651],"(",["T_VARIABLE","$child",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","union",651],")",")",["T_WHITESPACE"," ",651],"{",["T_WHITESPACE","\n            ",651],["T_FOREACH","foreach",652],["T_WHITESPACE"," ",652],"(",["T_VARIABLE","$child",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","union",652],["T_WHITESPACE"," ",652],["T_AS","as",652],["T_WHITESPACE"," ",652],["T_VARIABLE","$union",652],")",["T_WHITESPACE"," ",652],"{",["T_WHITESPACE","\n                ",652],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","union",653],"[","]",["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$union",653],";",["T_WHITESPACE","\n            ",653],"}",["T_WHITESPACE","\n        ",654],"}",["T_WHITESPACE","\n    ",655],"}",["T_WHITESPACE","\n\n    ",656],["T_DOC_COMMENT","\/**\n     * Sets the ON condition for a relational query.\n     * The condition will be used in the ON part when [[ActiveQuery::joinWith()]] is called.\n     * Otherwise, the condition will be used in the WHERE part of a query.\n     *\n     * Use this method to specify additional conditions when declaring a relation in the [[ActiveRecord]] class:\n     *\n     * ```php\n     * public function getActiveUsers()\n     * {\n     *     return $this->hasMany(User::className(), ['id' => 'user_id'])\n     *                 ->onCondition(['active' => true]);\n     * }\n     * ```\n     *\n     * Note that this condition is applied in case of a join as well as when fetching the related records.\n     * Thus only fields of the related table can be used in the condition. Trying to access fields of the primary\n     * record will cause an error in a non-join-query.\n     *\n     * @param string|array $condition the ON condition. Please refer to [[Query::where()]] on how to specify this parameter.\n     * @param array $params the parameters (name => value) to be bound to the query.\n     * @return $this the query object itself\n     *\/",658],["T_WHITESPACE","\n    ",680],["T_PUBLIC","public",681],["T_WHITESPACE"," ",681],["T_FUNCTION","function",681],["T_WHITESPACE"," ",681],["T_STRING","onCondition",681],"(",["T_VARIABLE","$condition",681],",",["T_WHITESPACE"," ",681],["T_VARIABLE","$params",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],"[","]",")",["T_WHITESPACE","\n    ",681],"{",["T_WHITESPACE","\n        ",682],["T_VARIABLE","$this",683],["T_OBJECT_OPERATOR","->",683],["T_STRING","on",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_VARIABLE","$condition",683],";",["T_WHITESPACE","\n        ",683],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","addParams",684],"(",["T_VARIABLE","$params",684],")",";",["T_WHITESPACE","\n        ",684],["T_RETURN","return",685],["T_WHITESPACE"," ",685],["T_VARIABLE","$this",685],";",["T_WHITESPACE","\n    ",685],"}",["T_WHITESPACE","\n\n    ",686],["T_DOC_COMMENT","\/**\n     * Adds an additional ON condition to the existing one.\n     * The new condition and the existing one will be joined using the 'AND' operator.\n     * @param string|array $condition the new ON condition. Please refer to [[where()]]\n     * on how to specify this parameter.\n     * @param array $params the parameters (name => value) to be bound to the query.\n     * @return $this the query object itself\n     * @see onCondition()\n     * @see orOnCondition()\n     *\/",688],["T_WHITESPACE","\n    ",697],["T_PUBLIC","public",698],["T_WHITESPACE"," ",698],["T_FUNCTION","function",698],["T_WHITESPACE"," ",698],["T_STRING","andOnCondition",698],"(",["T_VARIABLE","$condition",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$params",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],"[","]",")",["T_WHITESPACE","\n    ",698],"{",["T_WHITESPACE","\n        ",699],["T_IF","if",700],["T_WHITESPACE"," ",700],"(",["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","on",700],["T_WHITESPACE"," ",700],["T_IS_IDENTICAL","===",700],["T_WHITESPACE"," ",700],["T_STRING","null",700],")",["T_WHITESPACE"," ",700],"{",["T_WHITESPACE","\n            ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","on",701],["T_WHITESPACE"," ",701],"=",["T_WHITESPACE"," ",701],["T_VARIABLE","$condition",701],";",["T_WHITESPACE","\n        ",701],"}",["T_WHITESPACE"," ",702],["T_ELSE","else",702],["T_WHITESPACE"," ",702],"{",["T_WHITESPACE","\n            ",702],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","on",703],["T_WHITESPACE"," ",703],"=",["T_WHITESPACE"," ",703],"[",["T_CONSTANT_ENCAPSED_STRING","'and'",703],",",["T_WHITESPACE"," ",703],["T_VARIABLE","$this",703],["T_OBJECT_OPERATOR","->",703],["T_STRING","on",703],",",["T_WHITESPACE"," ",703],["T_VARIABLE","$condition",703],"]",";",["T_WHITESPACE","\n        ",703],"}",["T_WHITESPACE","\n        ",704],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","addParams",705],"(",["T_VARIABLE","$params",705],")",";",["T_WHITESPACE","\n        ",705],["T_RETURN","return",706],["T_WHITESPACE"," ",706],["T_VARIABLE","$this",706],";",["T_WHITESPACE","\n    ",706],"}",["T_WHITESPACE","\n\n    ",707],["T_DOC_COMMENT","\/**\n     * Adds an additional ON condition to the existing one.\n     * The new condition and the existing one will be joined using the 'OR' operator.\n     * @param string|array $condition the new ON condition. Please refer to [[where()]]\n     * on how to specify this parameter.\n     * @param array $params the parameters (name => value) to be bound to the query.\n     * @return $this the query object itself\n     * @see onCondition()\n     * @see andOnCondition()\n     *\/",709],["T_WHITESPACE","\n    ",718],["T_PUBLIC","public",719],["T_WHITESPACE"," ",719],["T_FUNCTION","function",719],["T_WHITESPACE"," ",719],["T_STRING","orOnCondition",719],"(",["T_VARIABLE","$condition",719],",",["T_WHITESPACE"," ",719],["T_VARIABLE","$params",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],"[","]",")",["T_WHITESPACE","\n    ",719],"{",["T_WHITESPACE","\n        ",720],["T_IF","if",721],["T_WHITESPACE"," ",721],"(",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","on",721],["T_WHITESPACE"," ",721],["T_IS_IDENTICAL","===",721],["T_WHITESPACE"," ",721],["T_STRING","null",721],")",["T_WHITESPACE"," ",721],"{",["T_WHITESPACE","\n            ",721],["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","on",722],["T_WHITESPACE"," ",722],"=",["T_WHITESPACE"," ",722],["T_VARIABLE","$condition",722],";",["T_WHITESPACE","\n        ",722],"}",["T_WHITESPACE"," ",723],["T_ELSE","else",723],["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n            ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","on",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],"[",["T_CONSTANT_ENCAPSED_STRING","'or'",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","on",724],",",["T_WHITESPACE"," ",724],["T_VARIABLE","$condition",724],"]",";",["T_WHITESPACE","\n        ",724],"}",["T_WHITESPACE","\n        ",725],["T_VARIABLE","$this",726],["T_OBJECT_OPERATOR","->",726],["T_STRING","addParams",726],"(",["T_VARIABLE","$params",726],")",";",["T_WHITESPACE","\n        ",726],["T_RETURN","return",727],["T_WHITESPACE"," ",727],["T_VARIABLE","$this",727],";",["T_WHITESPACE","\n    ",727],"}",["T_WHITESPACE","\n\n    ",728],["T_DOC_COMMENT","\/**\n     * Specifies the junction table for a relational query.\n     *\n     * Use this method to specify a junction table when declaring a relation in the [[ActiveRecord]] class:\n     *\n     * ```php\n     * public function getItems()\n     * {\n     *     return $this->hasMany(Item::className(), ['id' => 'item_id'])\n     *                 ->viaTable('order_item', ['order_id' => 'id']);\n     * }\n     * ```\n     *\n     * @param string $tableName the name of the junction table.\n     * @param array $link the link between the junction table and the table associated with [[primaryModel]].\n     * The keys of the array represent the columns in the junction table, and the values represent the columns\n     * in the [[primaryModel]] table.\n     * @param callable $callable a PHP callback for customizing the relation associated with the junction table.\n     * Its signature should be `function($query)`, where `$query` is the query to be customized.\n     * @return $this the query object itself\n     * @see via()\n     *\/",730],["T_WHITESPACE","\n    ",751],["T_PUBLIC","public",752],["T_WHITESPACE"," ",752],["T_FUNCTION","function",752],["T_WHITESPACE"," ",752],["T_STRING","viaTable",752],"(",["T_VARIABLE","$tableName",752],",",["T_WHITESPACE"," ",752],["T_VARIABLE","$link",752],",",["T_WHITESPACE"," ",752],["T_CALLABLE","callable",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$callable",752],["T_WHITESPACE"," ",752],"=",["T_WHITESPACE"," ",752],["T_STRING","null",752],")",["T_WHITESPACE","\n    ",752],"{",["T_WHITESPACE","\n        ",753],["T_VARIABLE","$relation",754],["T_WHITESPACE"," ",754],"=",["T_WHITESPACE"," ",754],["T_NEW","new",754],["T_WHITESPACE"," ",754],["T_STRING","ActiveQuery",754],"(",["T_STRING","get_class",754],"(",["T_VARIABLE","$this",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","primaryModel",754],")",",",["T_WHITESPACE"," ",754],"[",["T_WHITESPACE","\n            ",754],["T_CONSTANT_ENCAPSED_STRING","'from'",755],["T_WHITESPACE"," ",755],["T_DOUBLE_ARROW","=>",755],["T_WHITESPACE"," ",755],"[",["T_VARIABLE","$tableName",755],"]",",",["T_WHITESPACE","\n            ",755],["T_CONSTANT_ENCAPSED_STRING","'link'",756],["T_WHITESPACE"," ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_VARIABLE","$link",756],",",["T_WHITESPACE","\n            ",756],["T_CONSTANT_ENCAPSED_STRING","'multiple'",757],["T_WHITESPACE"," ",757],["T_DOUBLE_ARROW","=>",757],["T_WHITESPACE"," ",757],["T_STRING","true",757],",",["T_WHITESPACE","\n            ",757],["T_CONSTANT_ENCAPSED_STRING","'asArray'",758],["T_WHITESPACE"," ",758],["T_DOUBLE_ARROW","=>",758],["T_WHITESPACE"," ",758],["T_STRING","true",758],",",["T_WHITESPACE","\n        ",758],"]",")",";",["T_WHITESPACE","\n        ",759],["T_VARIABLE","$this",760],["T_OBJECT_OPERATOR","->",760],["T_STRING","via",760],["T_WHITESPACE"," ",760],"=",["T_WHITESPACE"," ",760],["T_VARIABLE","$relation",760],";",["T_WHITESPACE","\n        ",760],["T_IF","if",761],["T_WHITESPACE"," ",761],"(",["T_VARIABLE","$callable",761],["T_WHITESPACE"," ",761],["T_IS_NOT_IDENTICAL","!==",761],["T_WHITESPACE"," ",761],["T_STRING","null",761],")",["T_WHITESPACE"," ",761],"{",["T_WHITESPACE","\n            ",761],["T_STRING","call_user_func",762],"(",["T_VARIABLE","$callable",762],",",["T_WHITESPACE"," ",762],["T_VARIABLE","$relation",762],")",";",["T_WHITESPACE","\n        ",762],"}",["T_WHITESPACE","\n\n        ",763],["T_RETURN","return",765],["T_WHITESPACE"," ",765],["T_VARIABLE","$this",765],";",["T_WHITESPACE","\n    ",765],"}",["T_WHITESPACE","\n\n    ",766],["T_DOC_COMMENT","\/**\n     * Define an alias for the table defined in [[modelClass]].\n     *\n     * This method will adjust [[from]] so that an already defined alias will be overwritten.\n     * If none was defined, [[from]] will be populated with the given alias.\n     *\n     * @param string $alias the table alias.\n     * @return $this the query object itself\n     * @since 2.0.7\n     *\/",768],["T_WHITESPACE","\n    ",777],["T_PUBLIC","public",778],["T_WHITESPACE"," ",778],["T_FUNCTION","function",778],["T_WHITESPACE"," ",778],["T_STRING","alias",778],"(",["T_VARIABLE","$alias",778],")",["T_WHITESPACE","\n    ",778],"{",["T_WHITESPACE","\n        ",779],["T_IF","if",780],["T_WHITESPACE"," ",780],"(",["T_EMPTY","empty",780],"(",["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","from",780],")",["T_WHITESPACE"," ",780],["T_BOOLEAN_OR","||",780],["T_WHITESPACE"," ",780],["T_STRING","count",780],"(",["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","from",780],")",["T_WHITESPACE"," ",780],"<",["T_WHITESPACE"," ",780],["T_LNUMBER","2",780],")",["T_WHITESPACE"," ",780],"{",["T_WHITESPACE","\n            ",780],["T_LIST","list",781],"(",["T_VARIABLE","$tableName",781],",",["T_WHITESPACE"," ",781],")",["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getTableNameAndAlias",781],"(",")",";",["T_WHITESPACE","\n            ",781],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","from",782],["T_WHITESPACE"," ",782],"=",["T_WHITESPACE"," ",782],"[",["T_VARIABLE","$alias",782],["T_WHITESPACE"," ",782],["T_DOUBLE_ARROW","=>",782],["T_WHITESPACE"," ",782],["T_VARIABLE","$tableName",782],"]",";",["T_WHITESPACE","\n        ",782],"}",["T_WHITESPACE"," ",783],["T_ELSE","else",783],["T_WHITESPACE"," ",783],"{",["T_WHITESPACE","\n            ",783],["T_COMMENT","\/* @var $modelClass ActiveRecord *\/",784],["T_WHITESPACE","\n            ",784],["T_VARIABLE","$modelClass",785],["T_WHITESPACE"," ",785],"=",["T_WHITESPACE"," ",785],["T_VARIABLE","$this",785],["T_OBJECT_OPERATOR","->",785],["T_STRING","modelClass",785],";",["T_WHITESPACE","\n            ",785],["T_VARIABLE","$tableName",786],["T_WHITESPACE"," ",786],"=",["T_WHITESPACE"," ",786],["T_VARIABLE","$modelClass",786],["T_DOUBLE_COLON","::",786],["T_STRING","tableName",786],"(",")",";",["T_WHITESPACE","\n\n            ",786],["T_FOREACH","foreach",788],["T_WHITESPACE"," ",788],"(",["T_VARIABLE","$this",788],["T_OBJECT_OPERATOR","->",788],["T_STRING","from",788],["T_WHITESPACE"," ",788],["T_AS","as",788],["T_WHITESPACE"," ",788],["T_VARIABLE","$key",788],["T_WHITESPACE"," ",788],["T_DOUBLE_ARROW","=>",788],["T_WHITESPACE"," ",788],["T_VARIABLE","$table",788],")",["T_WHITESPACE"," ",788],"{",["T_WHITESPACE","\n                ",788],["T_IF","if",789],["T_WHITESPACE"," ",789],"(",["T_VARIABLE","$table",789],["T_WHITESPACE"," ",789],["T_IS_IDENTICAL","===",789],["T_WHITESPACE"," ",789],["T_VARIABLE","$tableName",789],")",["T_WHITESPACE"," ",789],"{",["T_WHITESPACE","\n                    ",789],["T_UNSET","unset",790],"(",["T_VARIABLE","$this",790],["T_OBJECT_OPERATOR","->",790],["T_STRING","from",790],"[",["T_VARIABLE","$key",790],"]",")",";",["T_WHITESPACE","\n                    ",790],["T_VARIABLE","$this",791],["T_OBJECT_OPERATOR","->",791],["T_STRING","from",791],"[",["T_VARIABLE","$alias",791],"]",["T_WHITESPACE"," ",791],"=",["T_WHITESPACE"," ",791],["T_VARIABLE","$tableName",791],";",["T_WHITESPACE","\n                ",791],"}",["T_WHITESPACE","\n            ",792],"}",["T_WHITESPACE","\n        ",793],"}",["T_WHITESPACE","\n        ",794],["T_RETURN","return",795],["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],";",["T_WHITESPACE","\n    ",795],"}",["T_WHITESPACE","\n",796],"}",["T_WHITESPACE","\n",797]]
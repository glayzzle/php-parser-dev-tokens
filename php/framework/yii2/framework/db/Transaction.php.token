[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","InvalidConfigException",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Transaction represents a DB transaction.\n *\n * It is usually created by calling [[Connection::beginTransaction()]].\n *\n * The following code is a typical example of using transactions (note that some\n * DBMS may not support transactions):\n *\n * ```php\n * $transaction = $connection->beginTransaction();\n * try {\n *     $connection->createCommand($sql1)->execute();\n *     $connection->createCommand($sql2)->execute();\n *     \/\/.... other SQL executions\n *     $transaction->commit();\n * } catch (\\Exception $e) {\n *     $transaction->rollBack();\n *     throw $e;\n * } catch (\\Throwable $e) {\n *     $transaction->rollBack();\n *     throw $e;\n * }\n * ```\n *\n * > Note: in the above code we have two catch-blocks for compatibility\n * > with PHP 5.x and PHP 7.x. `\\Exception` implements the [`\\Throwable` interface](http:\/\/php.net\/manual\/en\/class.throwable.php)\n * > since PHP 7.0, so you can skip the part with `\\Exception` if your app uses only PHP 7.0 and higher.\n *\n * @property bool $isActive Whether this transaction is active. Only an active transaction can [[commit()]]\n * or [[rollBack()]]. This property is read-only.\n * @property string $isolationLevel The transaction isolation level to use for this transaction. This can be\n * one of [[READ_UNCOMMITTED]], [[READ_COMMITTED]], [[REPEATABLE_READ]] and [[SERIALIZABLE]] but also a string\n * containing DBMS specific syntax to be used after `SET TRANSACTION ISOLATION LEVEL`. This property is\n * write-only.\n * @property int $level The current nesting level of the transaction. This property is read-only.\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",13],["T_WHITESPACE","\n",51],["T_CLASS","class",52],["T_WHITESPACE"," ",52],["T_STRING","Transaction",52],["T_WHITESPACE"," ",52],["T_EXTENDS","extends",52],["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","yii",52],["T_NS_SEPARATOR","\\",52],["T_STRING","base",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Object",52],["T_WHITESPACE","\n",52],"{",["T_WHITESPACE","\n    ",53],["T_DOC_COMMENT","\/**\n     * A constant representing the transaction isolation level `READ UNCOMMITTED`.\n     * @see http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     *\/",54],["T_WHITESPACE","\n    ",57],["T_CONST","const",58],["T_WHITESPACE"," ",58],["T_STRING","READ_UNCOMMITTED",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'READ UNCOMMITTED'",58],";",["T_WHITESPACE","\n    ",58],["T_DOC_COMMENT","\/**\n     * A constant representing the transaction isolation level `READ COMMITTED`.\n     * @see http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     *\/",59],["T_WHITESPACE","\n    ",62],["T_CONST","const",63],["T_WHITESPACE"," ",63],["T_STRING","READ_COMMITTED",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'READ COMMITTED'",63],";",["T_WHITESPACE","\n    ",63],["T_DOC_COMMENT","\/**\n     * A constant representing the transaction isolation level `REPEATABLE READ`.\n     * @see http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     *\/",64],["T_WHITESPACE","\n    ",67],["T_CONST","const",68],["T_WHITESPACE"," ",68],["T_STRING","REPEATABLE_READ",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'REPEATABLE READ'",68],";",["T_WHITESPACE","\n    ",68],["T_DOC_COMMENT","\/**\n     * A constant representing the transaction isolation level `SERIALIZABLE`.\n     * @see http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     *\/",69],["T_WHITESPACE","\n    ",72],["T_CONST","const",73],["T_WHITESPACE"," ",73],["T_STRING","SERIALIZABLE",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'SERIALIZABLE'",73],";",["T_WHITESPACE","\n\n    ",73],["T_DOC_COMMENT","\/**\n     * @var Connection the database connection that this transaction is associated with.\n     *\/",75],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$db",78],";",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @var int the nesting level of the transaction. 0 means the outermost level.\n     *\/",80],["T_WHITESPACE","\n    ",82],["T_PRIVATE","private",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$_level",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_LNUMBER","0",83],";",["T_WHITESPACE","\n\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Returns a value indicating whether this transaction is active.\n     * @return bool whether this transaction is active. Only an active transaction\n     * can [[commit()]] or [[rollBack()]].\n     *\/",86],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getIsActive",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","_level",93],["T_WHITESPACE"," ",93],">",["T_WHITESPACE"," ",93],["T_LNUMBER","0",93],["T_WHITESPACE"," ",93],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_WHITESPACE"," ",93],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isActive",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * Begins a transaction.\n     * @param string|null $isolationLevel The [isolation level][] to use for this transaction.\n     * This can be one of [[READ_UNCOMMITTED]], [[READ_COMMITTED]], [[REPEATABLE_READ]] and [[SERIALIZABLE]] but\n     * also a string containing DBMS specific syntax to be used after `SET TRANSACTION ISOLATION LEVEL`.\n     * If not specified (`null`) the isolation level will not be set explicitly and the DBMS default will be used.\n     *\n     * > Note: This setting does not work for PostgreSQL, where setting the isolation level before the transaction\n     * has no effect. You have to call [[setIsolationLevel()]] in this case after the transaction has started.\n     *\n     * > Note: Some DBMS allow setting of the isolation level only for the whole connection so subsequent transactions\n     * may get the same isolation level even if you did not specify any. When using this feature\n     * you may need to set the isolation level for all transactions explicitly to avoid conflicting settings.\n     * At the time of this writing affected DBMS are MSSQL and SQLite.\n     *\n     * [isolation level]: http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     * @throws InvalidConfigException if [[db]] is `null`.\n     *\/",96],["T_WHITESPACE","\n    ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","begin",114],"(",["T_VARIABLE","$isolationLevel",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","null",114],")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","db",116],["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_STRING","null",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_THROW","throw",117],["T_WHITESPACE"," ",117],["T_NEW","new",117],["T_WHITESPACE"," ",117],["T_STRING","InvalidConfigException",117],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction::db must be set.'",117],")",";",["T_WHITESPACE","\n        ",117],"}",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","db",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","open",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","_level",121],["T_WHITESPACE"," ",121],["T_IS_IDENTICAL","===",121],["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$isolationLevel",122],["T_WHITESPACE"," ",122],["T_IS_NOT_IDENTICAL","!==",122],["T_WHITESPACE"," ",122],["T_STRING","null",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","db",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getSchema",123],"(",")",["T_OBJECT_OPERATOR","->",123],["T_STRING","setTransactionIsolationLevel",123],"(",["T_VARIABLE","$isolationLevel",123],")",";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n            ",124],["T_STRING","Yii",125],["T_DOUBLE_COLON","::",125],["T_STRING","trace",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Begin transaction'",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$isolationLevel",125],["T_WHITESPACE"," ",125],"?",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","' with isolation level '",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$isolationLevel",125],["T_WHITESPACE"," ",125],":",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],")",",",["T_WHITESPACE"," ",125],["T_METHOD_C","__METHOD__",125],")",";",["T_WHITESPACE","\n\n            ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","db",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","trigger",127],"(",["T_STRING","Connection",127],["T_DOUBLE_COLON","::",127],["T_STRING","EVENT_BEGIN_TRANSACTION",127],")",";",["T_WHITESPACE","\n            ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","db",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","pdo",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","beginTransaction",128],"(",")",";",["T_WHITESPACE","\n            ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","_level",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_LNUMBER","1",129],";",["T_WHITESPACE","\n\n            ",129],["T_RETURN","return",131],";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n\n        ",132],["T_VARIABLE","$schema",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","db",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSchema",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$schema",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","supportsSavepoint",135],"(",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_STRING","Yii",136],["T_DOUBLE_COLON","::",136],["T_STRING","trace",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Set savepoint '",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","_level",136],",",["T_WHITESPACE"," ",136],["T_METHOD_C","__METHOD__",136],")",";",["T_WHITESPACE","\n            ",136],["T_VARIABLE","$schema",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","createSavepoint",137],"(",["T_CONSTANT_ENCAPSED_STRING","'LEVEL'",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","_level",137],")",";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE"," ",138],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n            ",138],["T_STRING","Yii",139],["T_DOUBLE_COLON","::",139],["T_STRING","info",139],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction not started: nested transaction not supported'",139],",",["T_WHITESPACE"," ",139],["T_METHOD_C","__METHOD__",139],")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","_level",141],["T_INC","++",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_DOC_COMMENT","\/**\n     * Commits a transaction.\n     * @throws Exception if the transaction is not active\n     *\/",144],["T_WHITESPACE","\n    ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","commit",148],"(",")",["T_WHITESPACE","\n    ",148],"{",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(","!",["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getIsActive",150],"(",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_THROW","throw",151],["T_WHITESPACE"," ",151],["T_NEW","new",151],["T_WHITESPACE"," ",151],["T_STRING","Exception",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to commit transaction: transaction was inactive.'",151],")",";",["T_WHITESPACE","\n        ",151],"}",["T_WHITESPACE","\n\n        ",152],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","_level",154],["T_DEC","--",154],";",["T_WHITESPACE","\n        ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","_level",155],["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_LNUMBER","0",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n            ",155],["T_STRING","Yii",156],["T_DOUBLE_COLON","::",156],["T_STRING","trace",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Commit transaction'",156],",",["T_WHITESPACE"," ",156],["T_METHOD_C","__METHOD__",156],")",";",["T_WHITESPACE","\n            ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","db",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","pdo",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","commit",157],"(",")",";",["T_WHITESPACE","\n            ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","db",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","trigger",158],"(",["T_STRING","Connection",158],["T_DOUBLE_COLON","::",158],["T_STRING","EVENT_COMMIT_TRANSACTION",158],")",";",["T_WHITESPACE","\n            ",158],["T_RETURN","return",159],";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$schema",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","db",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getSchema",162],"(",")",";",["T_WHITESPACE","\n        ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$schema",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","supportsSavepoint",163],"(",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_STRING","Yii",164],["T_DOUBLE_COLON","::",164],["T_STRING","trace",164],"(",["T_CONSTANT_ENCAPSED_STRING","'Release savepoint '",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","_level",164],",",["T_WHITESPACE"," ",164],["T_METHOD_C","__METHOD__",164],")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$schema",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","releaseSavepoint",165],"(",["T_CONSTANT_ENCAPSED_STRING","'LEVEL'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","_level",165],")",";",["T_WHITESPACE","\n        ",165],"}",["T_WHITESPACE"," ",166],["T_ELSE","else",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n            ",166],["T_STRING","Yii",167],["T_DOUBLE_COLON","::",167],["T_STRING","info",167],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction not committed: nested transaction not supported'",167],",",["T_WHITESPACE"," ",167],["T_METHOD_C","__METHOD__",167],")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/**\n     * Rolls back a transaction.\n     * @throws Exception if the transaction is not active\n     *\/",171],["T_WHITESPACE","\n    ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","rollBack",175],"(",")",["T_WHITESPACE","\n    ",175],"{",["T_WHITESPACE","\n        ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(","!",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getIsActive",177],"(",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_COMMENT","\/\/ do nothing if transaction is not active: this could be the transaction is committed\n",178],["T_WHITESPACE","            ",179],["T_COMMENT","\/\/ but the event handler to \"commitTransaction\" throw an exception\n",179],["T_WHITESPACE","            ",180],["T_RETURN","return",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","_level",183],["T_DEC","--",183],";",["T_WHITESPACE","\n        ",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","_level",184],["T_WHITESPACE"," ",184],["T_IS_IDENTICAL","===",184],["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_STRING","Yii",185],["T_DOUBLE_COLON","::",185],["T_STRING","trace",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Roll back transaction'",185],",",["T_WHITESPACE"," ",185],["T_METHOD_C","__METHOD__",185],")",";",["T_WHITESPACE","\n            ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","db",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","pdo",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","rollBack",186],"(",")",";",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","db",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","trigger",187],"(",["T_STRING","Connection",187],["T_DOUBLE_COLON","::",187],["T_STRING","EVENT_ROLLBACK_TRANSACTION",187],")",";",["T_WHITESPACE","\n            ",187],["T_RETURN","return",188],";",["T_WHITESPACE","\n        ",188],"}",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$schema",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","db",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getSchema",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$schema",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","supportsSavepoint",192],"(",")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_STRING","Yii",193],["T_DOUBLE_COLON","::",193],["T_STRING","trace",193],"(",["T_CONSTANT_ENCAPSED_STRING","'Roll back to savepoint '",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","_level",193],",",["T_WHITESPACE"," ",193],["T_METHOD_C","__METHOD__",193],")",";",["T_WHITESPACE","\n            ",193],["T_VARIABLE","$schema",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","rollBackSavepoint",194],"(",["T_CONSTANT_ENCAPSED_STRING","'LEVEL'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","_level",194],")",";",["T_WHITESPACE","\n        ",194],"}",["T_WHITESPACE"," ",195],["T_ELSE","else",195],["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_STRING","Yii",196],["T_DOUBLE_COLON","::",196],["T_STRING","info",196],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction not rolled back: nested transaction not supported'",196],",",["T_WHITESPACE"," ",196],["T_METHOD_C","__METHOD__",196],")",";",["T_WHITESPACE","\n            ",196],["T_COMMENT","\/\/ throw an exception to fail the outer transaction\n",197],["T_WHITESPACE","            ",198],["T_THROW","throw",198],["T_WHITESPACE"," ",198],["T_NEW","new",198],["T_WHITESPACE"," ",198],["T_STRING","Exception",198],"(",["T_CONSTANT_ENCAPSED_STRING","'Roll back failed: nested transaction not supported.'",198],")",";",["T_WHITESPACE","\n        ",198],"}",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_DOC_COMMENT","\/**\n     * Sets the transaction isolation level for this transaction.\n     *\n     * This method can be used to set the isolation level while the transaction is already active.\n     * However this is not supported by all DBMS so you might rather specify the isolation level directly\n     * when calling [[begin()]].\n     * @param string $level The transaction isolation level to use for this transaction.\n     * This can be one of [[READ_UNCOMMITTED]], [[READ_COMMITTED]], [[REPEATABLE_READ]] and [[SERIALIZABLE]] but\n     * also a string containing DBMS specific syntax to be used after `SET TRANSACTION ISOLATION LEVEL`.\n     * @throws Exception if the transaction is not active\n     * @see http:\/\/en.wikipedia.org\/wiki\/Isolation_%28database_systems%29#Isolation_levels\n     *\/",202],["T_WHITESPACE","\n    ",213],["T_PUBLIC","public",214],["T_WHITESPACE"," ",214],["T_FUNCTION","function",214],["T_WHITESPACE"," ",214],["T_STRING","setIsolationLevel",214],"(",["T_VARIABLE","$level",214],")",["T_WHITESPACE","\n    ",214],"{",["T_WHITESPACE","\n        ",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getIsActive",216],"(",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_THROW","throw",217],["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","Exception",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to set isolation level: transaction was inactive.'",217],")",";",["T_WHITESPACE","\n        ",217],"}",["T_WHITESPACE","\n        ",218],["T_STRING","Yii",219],["T_DOUBLE_COLON","::",219],["T_STRING","trace",219],"(",["T_CONSTANT_ENCAPSED_STRING","'Setting transaction isolation level to '",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_VARIABLE","$level",219],",",["T_WHITESPACE"," ",219],["T_METHOD_C","__METHOD__",219],")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","db",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getSchema",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","setTransactionIsolationLevel",220],"(",["T_VARIABLE","$level",220],")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_DOC_COMMENT","\/**\n     * @return int The current nesting level of the transaction.\n     * @since 2.0.8\n     *\/",223],["T_WHITESPACE","\n    ",226],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getLevel",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","_level",229],";",["T_WHITESPACE","\n    ",229],"}",["T_WHITESPACE","\n",230],"}",["T_WHITESPACE","\n",231]]
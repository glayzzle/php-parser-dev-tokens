[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * @link http:\/\/www.yiiframework.com\/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http:\/\/www.yiiframework.com\/license\/\n *\/",2],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","validators",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Yii",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yii",11],["T_NS_SEPARATOR","\\",11],["T_STRING","base",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Model",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","yii",12],["T_NS_SEPARATOR","\\",12],["T_STRING","db",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ActiveQuery",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","yii",13],["T_NS_SEPARATOR","\\",13],["T_STRING","db",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ActiveQueryInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","yii",14],["T_NS_SEPARATOR","\\",14],["T_STRING","db",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ActiveRecordInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","yii",15],["T_NS_SEPARATOR","\\",15],["T_STRING","db",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Query",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","yii",16],["T_NS_SEPARATOR","\\",16],["T_STRING","helpers",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Inflector",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * UniqueValidator validates that the attribute value is unique in the specified database table.\n *\n * UniqueValidator checks if the value being validated is unique in the table column specified by\n * the ActiveRecord class [[targetClass]] and the attribute [[targetAttribute]].\n *\n * The following are examples of validation rules using this validator:\n *\n * ```php\n * \/\/ a1 needs to be unique\n * ['a1', 'unique']\n * \/\/ a1 needs to be unique, but column a2 will be used to check the uniqueness of the a1 value\n * ['a1', 'unique', 'targetAttribute' => 'a2']\n * \/\/ a1 and a2 need to be unique together, and they both will receive error message\n * [['a1', 'a2'], 'unique', 'targetAttribute' => ['a1', 'a2']]\n * \/\/ a1 and a2 need to be unique together, only a1 will receive error message\n * ['a1', 'unique', 'targetAttribute' => ['a1', 'a2']]\n * \/\/ a1 needs to be unique by checking the uniqueness of both a2 and a3 (using a1 value)\n * ['a1', 'unique', 'targetAttribute' => ['a2', 'a1' => 'a3']]\n * ```\n *\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n *\/",18],["T_WHITESPACE","\n",41],["T_CLASS","class",42],["T_WHITESPACE"," ",42],["T_STRING","UniqueValidator",42],["T_WHITESPACE"," ",42],["T_EXTENDS","extends",42],["T_WHITESPACE"," ",42],["T_STRING","Validator",42],["T_WHITESPACE","\n",42],"{",["T_WHITESPACE","\n    ",43],["T_DOC_COMMENT","\/**\n     * @var string the name of the ActiveRecord class that should be used to validate the uniqueness\n     * of the current attribute value. If not set, it will use the ActiveRecord class of the attribute being validated.\n     * @see targetAttribute\n     *\/",44],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$targetClass",49],";",["T_WHITESPACE","\n    ",49],["T_DOC_COMMENT","\/**\n     * @var string|array the name of the [[\\yii\\db\\ActiveRecord|ActiveRecord]] attribute that should be used to\n     * validate the uniqueness of the current attribute value. If not set, it will use the name\n     * of the attribute currently being validated. You may use an array to validate the uniqueness\n     * of multiple columns at the same time. The array values are the attributes that will be\n     * used to validate the uniqueness, while the array keys are the attributes whose values are to be validated.\n     *\/",50],["T_WHITESPACE","\n    ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$targetAttribute",57],";",["T_WHITESPACE","\n    ",57],["T_DOC_COMMENT","\/**\n     * @var string|array|\\Closure additional filter to be applied to the DB query used to check the uniqueness of the attribute value.\n     * This can be a string or an array representing the additional query condition (refer to [[\\yii\\db\\Query::where()]]\n     * on the format of query condition), or an anonymous function with the signature `function ($query)`, where `$query`\n     * is the [[\\yii\\db\\Query|Query]] object that you can modify in the function.\n     *\/",58],["T_WHITESPACE","\n    ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$filter",64],";",["T_WHITESPACE","\n    ",64],["T_DOC_COMMENT","\/**\n     * @var string the user-defined error message. When validating single attribute, it may contain\n     * the following placeholders which will be replaced accordingly by the validator:\n     *\n     * - `{attribute}`: the label of the attribute being validated\n     * - `{value}`: the value of the attribute being validated\n     *\n     * When validating mutliple attributes, it may contain the following placeholders:\n     *\n     * - `{attributes}`: the labels of the attributes being validated.\n     * - `{values}`: the values of the attributes being validated.\n     *\n     *\/",65],["T_WHITESPACE","\n    ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$message",78],";",["T_WHITESPACE","\n    ",78],["T_DOC_COMMENT","\/**\n     * @var string\n     * @since 2.0.9\n     * @deprecated since version 2.0.10, to be removed in 2.1. Use [[message]] property\n     * to setup custom message for multiple target attributes.\n     *\/",79],["T_WHITESPACE","\n    ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$comboNotUnique",85],";",["T_WHITESPACE","\n\n    ",85],["T_DOC_COMMENT","\/**\n     * @var string and|or define how target attributes are related\n     * @since 2.0.11\n     *\/",87],["T_WHITESPACE","\n    ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$targetAttributeJunction",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'and'",91],";",["T_WHITESPACE","\n\n    ",91],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",93],["T_WHITESPACE","\n    ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","init",96],"(",")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_STRING","parent",98],["T_DOUBLE_COLON","::",98],["T_STRING","init",98],"(",")",";",["T_WHITESPACE","\n        ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","message",99],["T_WHITESPACE"," ",99],["T_IS_NOT_IDENTICAL","!==",99],["T_WHITESPACE"," ",99],["T_STRING","null",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_RETURN","return",100],";",["T_WHITESPACE","\n        ",100],"}",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_STRING","is_array",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","targetAttribute",102],")",["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_STRING","count",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","targetAttribute",102],")",["T_WHITESPACE"," ",102],">",["T_WHITESPACE"," ",102],["T_LNUMBER","1",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_COMMENT","\/\/ fallback for deprecated `comboNotUnique` property - use it as message if is set\n",103],["T_WHITESPACE","            ",104],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","comboNotUnique",104],["T_WHITESPACE"," ",104],["T_IS_IDENTICAL","===",104],["T_WHITESPACE"," ",104],["T_STRING","null",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","message",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","Yii",105],["T_DOUBLE_COLON","::",105],["T_STRING","t",105],"(",["T_CONSTANT_ENCAPSED_STRING","'yii'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'The combination {values} of {attributes} has already been taken.'",105],")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE"," ",106],["T_ELSE","else",106],["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n                ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","message",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","comboNotUnique",107],";",["T_WHITESPACE","\n            ",107],"}",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE"," ",109],["T_ELSE","else",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","message",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Yii",110],["T_DOUBLE_COLON","::",110],["T_STRING","t",110],"(",["T_CONSTANT_ENCAPSED_STRING","'yii'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'{attribute} \"{value}\" has already been taken.'",110],")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_DOC_COMMENT","\/**\n     * @inheritdoc\n     *\/",114],["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","validateAttribute",117],"(",["T_VARIABLE","$model",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$attribute",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_COMMENT","\/* @var $targetClass ActiveRecordInterface *\/",119],["T_WHITESPACE","\n        ",119],["T_VARIABLE","$targetClass",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","targetClass",120],["T_WHITESPACE"," ",120],["T_IS_IDENTICAL","===",120],["T_WHITESPACE"," ",120],["T_STRING","null",120],["T_WHITESPACE"," ",120],"?",["T_WHITESPACE"," ",120],["T_STRING","get_class",120],"(",["T_VARIABLE","$model",120],")",["T_WHITESPACE"," ",120],":",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","targetClass",120],";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$targetAttribute",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","targetAttribute",121],["T_WHITESPACE"," ",121],["T_IS_IDENTICAL","===",121],["T_WHITESPACE"," ",121],["T_STRING","null",121],["T_WHITESPACE"," ",121],"?",["T_WHITESPACE"," ",121],["T_VARIABLE","$attribute",121],["T_WHITESPACE"," ",121],":",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","targetAttribute",121],";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$rawConditions",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","prepareConditions",122],"(",["T_VARIABLE","$targetAttribute",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$model",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$attribute",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$conditions",123],"[","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","targetAttributeJunction",123],["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'or'",123],["T_WHITESPACE"," ",123],"?",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'or'",123],["T_WHITESPACE"," ",123],":",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'and'",123],";",["T_WHITESPACE","\n\n        ",123],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$rawConditions",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$key",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$value",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n            ",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(",["T_STRING","is_array",126],"(",["T_VARIABLE","$value",126],")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n                ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","addError",127],"(",["T_VARIABLE","$model",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$attribute",127],",",["T_WHITESPACE"," ",127],["T_STRING","Yii",127],["T_DOUBLE_COLON","::",127],["T_STRING","t",127],"(",["T_CONSTANT_ENCAPSED_STRING","'yii'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'{attribute} is invalid.'",127],")",")",";",["T_WHITESPACE","\n                ",127],["T_RETURN","return",128],";",["T_WHITESPACE","\n            ",128],"}",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$conditions",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[",["T_VARIABLE","$key",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$value",130],"]",";",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","modelExists",133],"(",["T_VARIABLE","$targetClass",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$conditions",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$model",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_STRING","count",134],"(",["T_VARIABLE","$targetAttribute",134],")",["T_WHITESPACE"," ",134],">",["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n                ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","addComboNotUniqueError",135],"(",["T_VARIABLE","$model",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$attribute",135],")",";",["T_WHITESPACE","\n            ",135],"}",["T_WHITESPACE"," ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n                ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","addError",137],"(",["T_VARIABLE","$model",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$attribute",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","message",137],")",";",["T_WHITESPACE","\n            ",137],"}",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_DOC_COMMENT","\/**\n     * Checks whether the $model exists in the database.\n     *\n     * @param string $targetClass the name of the ActiveRecord class that should be used to validate the uniqueness\n     * of the current attribute value.\n     * @param array $conditions conditions, compatible with [[\\yii\\db\\Query::where()|Query::where()]] key-value format.\n     * @param Model $model the data model to be validated\n     *\n     * @return bool whether the model already exists\n     *\/",142],["T_WHITESPACE","\n    ",151],["T_PRIVATE","private",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","modelExists",152],"(",["T_VARIABLE","$targetClass",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$conditions",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$model",152],")",["T_WHITESPACE","\n    ",152],"{",["T_WHITESPACE","\n        ",153],["T_DOC_COMMENT","\/** @var ActiveRecordInterface $targetClass $query *\/",154],["T_WHITESPACE","\n        ",154],["T_VARIABLE","$query",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","prepareQuery",155],"(",["T_VARIABLE","$targetClass",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$conditions",155],")",";",["T_WHITESPACE","\n\n        ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(","!",["T_VARIABLE","$model",157],["T_WHITESPACE"," ",157],["T_INSTANCEOF","instanceof",157],["T_WHITESPACE"," ",157],["T_STRING","ActiveRecordInterface",157],["T_WHITESPACE"," ",157],["T_BOOLEAN_OR","||",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$model",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getIsNewRecord",157],"(",")",["T_WHITESPACE"," ",157],["T_BOOLEAN_OR","||",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$model",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","className",157],"(",")",["T_WHITESPACE"," ",157],["T_IS_NOT_IDENTICAL","!==",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$targetClass",157],["T_DOUBLE_COLON","::",157],["T_STRING","className",157],"(",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n            ",157],["T_COMMENT","\/\/ if current $model isn't in the database yet then it's OK just to call exists()\n",158],["T_WHITESPACE","            ",159],["T_COMMENT","\/\/ also there's no need to run check based on primary keys, when $targetClass is not the same as $model's class\n",159],["T_WHITESPACE","            ",160],["T_VARIABLE","$exists",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$query",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","exists",160],"(",")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_COMMENT","\/\/ if current $model is in the database already we can't use exists()\n",162],["T_WHITESPACE","            ",163],["T_VARIABLE","$models",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$query",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","select",163],"(",["T_VARIABLE","$targetClass",163],["T_DOUBLE_COLON","::",163],["T_STRING","primaryKey",163],"(",")",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","limit",163],"(",["T_LNUMBER","2",163],")",["T_OBJECT_OPERATOR","->",163],["T_STRING","createCommand",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","queryAll",163],"(",")",";",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$n",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","count",164],"(",["T_VARIABLE","$models",164],")",";",["T_WHITESPACE","\n            ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$n",165],["T_WHITESPACE"," ",165],["T_IS_IDENTICAL","===",165],["T_WHITESPACE"," ",165],["T_LNUMBER","1",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$keys",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","array_keys",166],"(",["T_VARIABLE","$conditions",166],")",";",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$pks",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$targetClass",167],["T_DOUBLE_COLON","::",167],["T_STRING","primaryKey",167],"(",")",";",["T_WHITESPACE","\n                ",167],["T_STRING","sort",168],"(",["T_VARIABLE","$keys",168],")",";",["T_WHITESPACE","\n                ",168],["T_STRING","sort",169],"(",["T_VARIABLE","$pks",169],")",";",["T_WHITESPACE","\n                ",169],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$keys",170],["T_WHITESPACE"," ",170],["T_IS_IDENTICAL","===",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$pks",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                    ",170],["T_COMMENT","\/\/ primary key is modified and not unique\n",171],["T_WHITESPACE","                    ",172],["T_VARIABLE","$exists",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$model",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getOldPrimaryKey",172],"(",")",["T_WHITESPACE"," ",172],["T_IS_NOT_EQUAL","!=",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$model",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getPrimaryKey",172],"(",")",";",["T_WHITESPACE","\n                ",172],"}",["T_WHITESPACE"," ",173],["T_ELSE","else",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n                    ",173],["T_COMMENT","\/\/ non-primary key, need to exclude the current record based on PK\n",174],["T_WHITESPACE","                    ",175],["T_VARIABLE","$exists",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$models",175],"[",["T_LNUMBER","0",175],"]",["T_WHITESPACE"," ",175],["T_IS_NOT_EQUAL","!=",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$model",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getOldPrimaryKey",175],"(",["T_STRING","true",175],")",";",["T_WHITESPACE","\n                ",175],"}",["T_WHITESPACE","\n            ",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$exists",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$n",178],["T_WHITESPACE"," ",178],">",["T_WHITESPACE"," ",178],["T_LNUMBER","1",178],";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n\n        ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$exists",182],";",["T_WHITESPACE","\n    ",182],"}",["T_WHITESPACE","\n\n    ",183],["T_DOC_COMMENT","\/**\n     * Prepares a query by applying filtering conditions defined in $conditions method property\n     * and [[filter]] class property.\n     *\n     * @param ActiveRecordInterface $targetClass the name of the ActiveRecord class that should be used to validate\n     * the uniqueness of the current attribute value.\n     * @param array $conditions conditions, compatible with [[\\yii\\db\\Query::where()|Query::where()]] key-value format\n     *\n     * @return ActiveQueryInterface|ActiveQuery\n     *\/",185],["T_WHITESPACE","\n    ",194],["T_PRIVATE","private",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","prepareQuery",195],"(",["T_VARIABLE","$targetClass",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$conditions",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$query",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$targetClass",197],["T_DOUBLE_COLON","::",197],["T_STRING","find",197],"(",")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$query",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","andWhere",198],"(",["T_VARIABLE","$conditions",198],")",";",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","filter",199],["T_WHITESPACE"," ",199],["T_INSTANCEOF","instanceof",199],["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","Closure",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n            ",199],["T_STRING","call_user_func",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","filter",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$query",200],")",";",["T_WHITESPACE","\n        ",200],"}",["T_WHITESPACE"," ",201],["T_ELSEIF","elseif",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","filter",201],["T_WHITESPACE"," ",201],["T_IS_NOT_IDENTICAL","!==",201],["T_WHITESPACE"," ",201],["T_STRING","null",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n            ",201],["T_VARIABLE","$query",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","andWhere",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","filter",202],")",";",["T_WHITESPACE","\n        ",202],"}",["T_WHITESPACE","\n\n        ",203],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$query",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_DOC_COMMENT","\/**\n     * Processes attributes' relations described in $targetAttribute parameter into conditions, compatible with\n     * [[\\yii\\db\\Query::where()|Query::where()]] key-value format.\n     *\n     * @param string|array $targetAttribute the name of the [[\\yii\\db\\ActiveRecord|ActiveRecord]] attribute that\n     * should be used to validate the uniqueness of the current attribute value. You may use an array to validate\n     * the uniqueness of multiple columns at the same time. The array values are the attributes that will be\n     * used to validate the uniqueness, while the array keys are the attributes whose values are to be validated.\n     * @param Model $model the data model to be validated\n     * @param string $attribute the name of the attribute to be validated in the $model\n\n     * @return array conditions, compatible with [[\\yii\\db\\Query::where()|Query::where()]] key-value format.\n     *\/",208],["T_WHITESPACE","\n    ",220],["T_PRIVATE","private",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","prepareConditions",221],"(",["T_VARIABLE","$targetAttribute",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$model",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$attribute",221],")",["T_WHITESPACE","\n    ",221],"{",["T_WHITESPACE","\n        ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(",["T_STRING","is_array",223],"(",["T_VARIABLE","$targetAttribute",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$conditions",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],"[","]",";",["T_WHITESPACE","\n            ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$targetAttribute",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$k",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$v",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n                ",225],["T_VARIABLE","$conditions",226],"[",["T_VARIABLE","$v",226],"]",["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_STRING","is_int",226],"(",["T_VARIABLE","$k",226],")",["T_WHITESPACE"," ",226],"?",["T_WHITESPACE"," ",226],["T_VARIABLE","$model",226],["T_OBJECT_OPERATOR","->",226],["T_VARIABLE","$attribute",226],["T_WHITESPACE"," ",226],":",["T_WHITESPACE"," ",226],["T_VARIABLE","$model",226],["T_OBJECT_OPERATOR","->",226],["T_VARIABLE","$k",226],";",["T_WHITESPACE","\n            ",226],"}",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE"," ",228],["T_ELSE","else",228],["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$conditions",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],"[",["T_VARIABLE","$targetAttribute",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$model",229],["T_OBJECT_OPERATOR","->",229],["T_VARIABLE","$attribute",229],"]",";",["T_WHITESPACE","\n        ",229],"}",["T_WHITESPACE","\n\n        ",230],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$conditions",232],";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_DOC_COMMENT","\/**\n     * Builds and adds [[comboNotUnique]] error message to the specified model attribute.\n     * @param \\yii\\base\\Model $model the data model.\n     * @param string $attribute the name of the attribute.\n     *\/",235],["T_WHITESPACE","\n    ",239],["T_PRIVATE","private",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","addComboNotUniqueError",240],"(",["T_VARIABLE","$model",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$attribute",240],")",["T_WHITESPACE","\n    ",240],"{",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$attributeCombo",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],"[","]",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$valueCombo",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"[","]",";",["T_WHITESPACE","\n        ",243],["T_FOREACH","foreach",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","targetAttribute",244],["T_WHITESPACE"," ",244],["T_AS","as",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$key",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$value",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n            ",244],["T_IF","if",245],"(",["T_STRING","is_int",245],"(",["T_VARIABLE","$key",245],")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n                ",245],["T_VARIABLE","$attributeCombo",246],"[","]",["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$model",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getAttributeLabel",246],"(",["T_VARIABLE","$value",246],")",";",["T_WHITESPACE","\n                ",246],["T_VARIABLE","$valueCombo",247],"[","]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'\"'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$model",247],["T_OBJECT_OPERATOR","->",247],["T_VARIABLE","$value",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'\"'",247],";",["T_WHITESPACE","\n            ",247],"}",["T_WHITESPACE"," ",248],["T_ELSE","else",248],["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n                ",248],["T_VARIABLE","$attributeCombo",249],"[","]",["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$model",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getAttributeLabel",249],"(",["T_VARIABLE","$key",249],")",";",["T_WHITESPACE","\n                ",249],["T_VARIABLE","$valueCombo",250],"[","]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'\"'",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_VARIABLE","$model",250],["T_OBJECT_OPERATOR","->",250],["T_VARIABLE","$key",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'\"'",250],";",["T_WHITESPACE","\n            ",250],"}",["T_WHITESPACE","\n        ",251],"}",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","addError",253],"(",["T_VARIABLE","$model",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$attribute",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","message",253],",",["T_WHITESPACE"," ",253],"[",["T_WHITESPACE","\n            ",253],["T_CONSTANT_ENCAPSED_STRING","'attributes'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_STRING","Inflector",254],["T_DOUBLE_COLON","::",254],["T_STRING","sentence",254],"(",["T_VARIABLE","$attributeCombo",254],")",",",["T_WHITESPACE","\n            ",254],["T_CONSTANT_ENCAPSED_STRING","'values'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_STRING","implode",255],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$valueCombo",255],")",["T_WHITESPACE","\n        ",255],"]",")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n",257],"}",["T_WHITESPACE","\n",258]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","yiiunit",3],["T_NS_SEPARATOR","\\",3],["T_STRING","framework",3],["T_NS_SEPARATOR","\\",3],["T_STRING","console",3],["T_NS_SEPARATOR","\\",3],["T_STRING","controllers",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Yii",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","yii",6],["T_NS_SEPARATOR","\\",6],["T_STRING","console",6],["T_NS_SEPARATOR","\\",6],["T_STRING","controllers",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrateController",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","yii",7],["T_NS_SEPARATOR","\\",7],["T_STRING","db",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Migration",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","db",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Query",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","yiiunit",9],["T_NS_SEPARATOR","\\",9],["T_STRING","TestCase",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Unit test for [[\\yii\\console\\controllers\\MigrateController]].\n * @see MigrateController\n *\n * @group console\n *\/",11],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","MigrateControllerTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","TestCase",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","MigrateControllerTestTrait",19],";",["T_WHITESPACE","\n\n    ",19],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","setUp",21],"(",")",["T_WHITESPACE","\n    ",21],"{",["T_WHITESPACE","\n        ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","migrateControllerClass",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","EchoMigrateController",23],["T_DOUBLE_COLON","::",23],["T_STRING","className",23],"(",")",";",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","migrationBaseClass",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","Migration",24],["T_DOUBLE_COLON","::",24],["T_STRING","className",24],"(",")",";",["T_WHITESPACE","\n\n        ",24],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","mockApplication",26],"(","[",["T_WHITESPACE","\n            ",26],["T_CONSTANT_ENCAPSED_STRING","'components'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n                ",27],["T_CONSTANT_ENCAPSED_STRING","'db'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],"[",["T_WHITESPACE","\n                    ",28],["T_CONSTANT_ENCAPSED_STRING","'class'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'yii\\db\\Connection'",29],",",["T_WHITESPACE","\n                    ",29],["T_CONSTANT_ENCAPSED_STRING","'dsn'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'sqlite::memory:'",30],",",["T_WHITESPACE","\n                ",30],"]",",",["T_WHITESPACE","\n            ",31],"]",",",["T_WHITESPACE","\n        ",32],"]",")",";",["T_WHITESPACE","\n\n        ",33],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","setUpMigrationPath",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","setUp",36],"(",")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","tearDown",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","tearDownMigrationPath",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_STRING","parent",42],["T_DOUBLE_COLON","::",42],["T_STRING","tearDown",42],"(",")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @return array applied migration entries\n     *\/",45],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","getMigrationHistory",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$query",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","Query",50],"(",")",";",["T_WHITESPACE","\n        ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$query",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","from",51],"(",["T_CONSTANT_ENCAPSED_STRING","'migration'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","all",51],"(",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","assertFileContent",54],"(",["T_VARIABLE","$expectedFile",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$class",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$table",54],")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$expected",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_INCLUDE","include",56],["T_WHITESPACE"," ",56],["T_STRING","Yii",56],["T_DOUBLE_COLON","::",56],["T_STRING","getAlias",56],"(","\"",["T_ENCAPSED_AND_WHITESPACE","@yiiunit\/data\/console\/migrate_create\/",56],["T_VARIABLE","$expectedFile",56],["T_ENCAPSED_AND_WHITESPACE",".php",56],"\"",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$expected",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","str_replace",57],"(",["T_CONSTANT_ENCAPSED_STRING","'{table}'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$table",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$expected",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEqualsWithoutLE",58],"(",["T_VARIABLE","$expected",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","parseNameClassMigration",58],"(",["T_VARIABLE","$class",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$table",58],")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","assertCommandCreatedFile",61],"(",["T_VARIABLE","$expectedFile",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$migrationName",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$table",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$params",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[","]",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$class",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'m'",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_STRING","gmdate",63],"(",["T_CONSTANT_ENCAPSED_STRING","'ymd_His'",63],")",["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'_'",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_VARIABLE","$migrationName",63],";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$params",64],"[",["T_LNUMBER","0",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$migrationName",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","runMigrateControllerAction",65],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertFileContent",66],"(",["T_VARIABLE","$expectedFile",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$class",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$table",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Tests :\n",69],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","testGenerateDefaultMigration",71],"(",")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertCommandCreatedFile",73],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'DefaultTest'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'default'",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_PUBLIC","public",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testGenerateCreateMigration",76],"(",")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$tables",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[",["T_WHITESPACE","\n            ",78],["T_CONSTANT_ENCAPSED_STRING","'test'",79],",",["T_WHITESPACE","\n            ",79],["T_CONSTANT_ENCAPSED_STRING","'TEST'",80],",",["T_WHITESPACE","\n        ",80],"]",";",["T_WHITESPACE","\n        ",81],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$tables",82],["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$table",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$migrationName",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'create_'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$table",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'_table'",83],";",["T_WHITESPACE","\n\n            ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertCommandCreatedFile",85],"(",["T_CONSTANT_ENCAPSED_STRING","'create_test'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$migrationName",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$table",85],")",";",["T_WHITESPACE","\n\n            ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertCommandCreatedFile",87],"(",["T_CONSTANT_ENCAPSED_STRING","'create_fields'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$migrationName",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$table",87],",",["T_WHITESPACE"," ",87],"[",["T_WHITESPACE","\n                ",87],["T_CONSTANT_ENCAPSED_STRING","'fields'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'title:string(10):notNull:unique:defaultValue(\"test\"),\n                    body:text:notNull,\n                    price:money(11,2):notNull,\n                    parenthesis_in_comment:string(255):notNull:comment(\\'Name of set (RU)\\')'",88],["T_WHITESPACE","\n            ",91],"]",")",";",["T_WHITESPACE","\n\n            ",92],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertCommandCreatedFile",94],"(",["T_CONSTANT_ENCAPSED_STRING","'create_title_pk'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$migrationName",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$table",94],",",["T_WHITESPACE"," ",94],"[",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'fields'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'title:primaryKey,body:text:notNull,price:money(11,2)'",95],",",["T_WHITESPACE","\n            ",95],"]",")",";",["T_WHITESPACE","\n\n            ",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertCommandCreatedFile",98],"(",["T_CONSTANT_ENCAPSED_STRING","'create_unsigned_pk'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$migrationName",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$table",98],",",["T_WHITESPACE"," ",98],"[",["T_WHITESPACE","\n                ",98],["T_CONSTANT_ENCAPSED_STRING","'fields'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'brand_id:primaryKey:unsigned'",99],",",["T_WHITESPACE","\n            ",99],"]",")",";",["T_WHITESPACE","\n\n            ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertCommandCreatedFile",102],"(",["T_CONSTANT_ENCAPSED_STRING","'create_unsigned_big_pk'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$migrationName",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$table",102],",",["T_WHITESPACE"," ",102],"[",["T_WHITESPACE","\n                ",102],["T_CONSTANT_ENCAPSED_STRING","'fields'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'brand_id:bigPrimaryKey:unsigned'",103],",",["T_WHITESPACE","\n            ",103],"]",")",";",["T_WHITESPACE","\n\n            ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertCommandCreatedFile",106],"(",["T_CONSTANT_ENCAPSED_STRING","'create_id_pk'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$migrationName",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$table",106],",",["T_WHITESPACE"," ",106],"[",["T_WHITESPACE","\n                ",106],["T_CONSTANT_ENCAPSED_STRING","'fields'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'id:primaryKey,\n                    address:string,\n                    address2:string,\n                    email:string'",107],",",["T_WHITESPACE","\n            ",110],"]",")",";",["T_WHITESPACE","\n\n            ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertCommandCreatedFile",113],"(",["T_CONSTANT_ENCAPSED_STRING","'create_foreign_key'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$migrationName",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$table",113],",",["T_WHITESPACE"," ",113],"[",["T_WHITESPACE","\n                ",113],["T_CONSTANT_ENCAPSED_STRING","'fields'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'user_id:integer:foreignKey,\n                    product_id:foreignKey:integer:unsigned:notNull,\n                    order_id:integer:foreignKey(user_order):notNull,\n                    created_at:dateTime:notNull'",114],",",["T_WHITESPACE","\n            ",117],"]",")",";",["T_WHITESPACE","\n\n            ",118],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertCommandCreatedFile",120],"(",["T_CONSTANT_ENCAPSED_STRING","'create_prefix'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$migrationName",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$table",120],",",["T_WHITESPACE"," ",120],"[",["T_WHITESPACE","\n                ",120],["T_CONSTANT_ENCAPSED_STRING","'useTablePrefix'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","true",121],",",["T_WHITESPACE","\n                ",121],["T_CONSTANT_ENCAPSED_STRING","'fields'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'user_id:integer:foreignKey,\n                    product_id:foreignKey:integer:unsigned:notNull,\n                    order_id:integer:foreignKey(user_order):notNull,\n                    created_at:dateTime:notNull'",122],",",["T_WHITESPACE","\n            ",125],"]",")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_COMMENT","\/\/ @see https:\/\/github.com\/yiisoft\/yii2\/issues\/10876\n",129],["T_WHITESPACE","        ",130],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(","[",["T_CONSTANT_ENCAPSED_STRING","'products_from_store'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'products_FROM_store'",130],"]",["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$table",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertCommandCreatedFile",131],"(",["T_CONSTANT_ENCAPSED_STRING","'drop_products_from_store_table'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'drop_'",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$table",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'_table'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$table",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_COMMENT","\/\/ @see https:\/\/github.com\/yiisoft\/yii2\/issues\/11461\n",133],["T_WHITESPACE","        ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertCommandCreatedFile",134],"(",["T_CONSTANT_ENCAPSED_STRING","'create_title_with_comma_default_values'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'create_test_table'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'test'",134],",",["T_WHITESPACE","  ",134],"[",["T_WHITESPACE","\n            ",134],["T_CONSTANT_ENCAPSED_STRING","'fields'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'title:string(10):notNull:unique:defaultValue(\",te,st\"),\n             body:text:notNull:defaultValue(\",test\"),\n             test:custom(11,2,\"s\"):notNull'",135],",",["T_WHITESPACE","\n        ",137],"]",")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","testGenerateDropMigration",141],"(",")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$tables",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],"[",["T_WHITESPACE","\n            ",143],["T_CONSTANT_ENCAPSED_STRING","'test'",144],",",["T_WHITESPACE","\n            ",144],["T_CONSTANT_ENCAPSED_STRING","'TEST'",145],",",["T_WHITESPACE","\n        ",145],"]",";",["T_WHITESPACE","\n        ",146],["T_FOREACH","foreach",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$tables",147],["T_WHITESPACE"," ",147],["T_AS","as",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$table",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_VARIABLE","$migrationName",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'drop_'",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_VARIABLE","$table",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'_table'",148],";",["T_WHITESPACE","\n\n            ",148],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertCommandCreatedFile",150],"(",["T_CONSTANT_ENCAPSED_STRING","'drop_test'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$migrationName",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$table",150],")",";",["T_WHITESPACE","\n\n            ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertCommandCreatedFile",152],"(",["T_CONSTANT_ENCAPSED_STRING","'drop_fields'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$migrationName",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$table",152],",",["T_WHITESPACE"," ",152],"[",["T_WHITESPACE","\n                ",152],["T_CONSTANT_ENCAPSED_STRING","'fields'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'body:text:notNull,price:money(11,2)'",153],["T_WHITESPACE","\n            ",153],"]",")",";",["T_WHITESPACE","\n        ",154],"}",["T_WHITESPACE","\n\n        ",155],["T_COMMENT","\/\/ @see https:\/\/github.com\/yiisoft\/yii2\/issues\/10876\n",157],["T_WHITESPACE","        ",158],["T_FOREACH","foreach",158],["T_WHITESPACE"," ",158],"(","[",["T_CONSTANT_ENCAPSED_STRING","'products_from_store'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'products_FROM_store'",158],"]",["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$table",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertCommandCreatedFile",159],"(",["T_CONSTANT_ENCAPSED_STRING","'drop_products_from_store_table'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'drop_'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$table",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'_table'",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$table",159],")",";",["T_WHITESPACE","\n        ",159],"}",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","testGenerateAddColumnMigration",163],"(",")",["T_WHITESPACE","\n    ",163],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$tables",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],"[",["T_WHITESPACE","\n            ",165],["T_CONSTANT_ENCAPSED_STRING","'test'",166],",",["T_WHITESPACE","\n            ",166],["T_CONSTANT_ENCAPSED_STRING","'TEST'",167],",",["T_WHITESPACE","\n        ",167],"]",";",["T_WHITESPACE","\n        ",168],["T_FOREACH","foreach",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$tables",169],["T_WHITESPACE"," ",169],["T_AS","as",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$table",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$migrationName",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'add_columns_column_to_'",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_VARIABLE","$table",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'_table'",170],";",["T_WHITESPACE","\n\n            ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertCommandCreatedFile",172],"(",["T_CONSTANT_ENCAPSED_STRING","'add_columns_test'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$migrationName",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$table",172],",",["T_WHITESPACE"," ",172],"[",["T_WHITESPACE","\n                ",172],["T_CONSTANT_ENCAPSED_STRING","'fields'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'title:string(10):notNull,\n                    body:text:notNull,\n                    price:money(11,2):notNull,\n                    created_at:dateTime'",173],["T_WHITESPACE","\n            ",176],"]",")",";",["T_WHITESPACE","\n\n            ",177],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertCommandCreatedFile",179],"(",["T_CONSTANT_ENCAPSED_STRING","'add_columns_fk'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$migrationName",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$table",179],",",["T_WHITESPACE"," ",179],"[",["T_WHITESPACE","\n                ",179],["T_CONSTANT_ENCAPSED_STRING","'fields'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'user_id:integer:foreignKey,\n                    product_id:foreignKey:integer:unsigned:notNull,\n                    order_id:integer:foreignKey(user_order):notNull,\n                    created_at:dateTime:notNull'",180],",",["T_WHITESPACE","\n            ",183],"]",")",";",["T_WHITESPACE","\n\n            ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertCommandCreatedFile",186],"(",["T_CONSTANT_ENCAPSED_STRING","'add_columns_prefix'",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$migrationName",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$table",186],",",["T_WHITESPACE"," ",186],"[",["T_WHITESPACE","\n                ",186],["T_CONSTANT_ENCAPSED_STRING","'useTablePrefix'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_STRING","true",187],",",["T_WHITESPACE","\n                ",187],["T_CONSTANT_ENCAPSED_STRING","'fields'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'user_id:integer:foreignKey,\n                    product_id:foreignKey:integer:unsigned:notNull,\n                    order_id:integer:foreignKey(user_order):notNull,\n                    created_at:dateTime:notNull'",188],",",["T_WHITESPACE","\n            ",191],"]",")",";",["T_WHITESPACE","\n        ",192],"}",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","testGenerateDropColumnMigration",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$tables",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],"[",["T_WHITESPACE","\n            ",198],["T_CONSTANT_ENCAPSED_STRING","'test'",199],",",["T_WHITESPACE","\n            ",199],["T_CONSTANT_ENCAPSED_STRING","'TEST'",200],",",["T_WHITESPACE","\n        ",200],"]",";",["T_WHITESPACE","\n        ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$tables",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$table",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n            ",202],["T_VARIABLE","$migrationNames",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],"[",["T_WHITESPACE","\n                ",203],["T_CONSTANT_ENCAPSED_STRING","'drop_columns_column_from_'",204],["T_WHITESPACE"," ",204],".",["T_WHITESPACE"," ",204],["T_VARIABLE","$table",204],["T_WHITESPACE"," ",204],".",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'_table'",204],",",["T_WHITESPACE","\n                ",204],["T_CONSTANT_ENCAPSED_STRING","'drop_columns_columns_from_'",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_VARIABLE","$table",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'_table'",205],",",["T_WHITESPACE","\n            ",205],"]",";",["T_WHITESPACE","\n            ",206],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$migrationNames",207],["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$migrationName",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertCommandCreatedFile",208],"(",["T_CONSTANT_ENCAPSED_STRING","'drop_columns_test'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$migrationName",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$table",208],",",["T_WHITESPACE"," ",208],"[",["T_WHITESPACE","\n                    ",208],["T_CONSTANT_ENCAPSED_STRING","'fields'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'title:string(10):notNull,body:text:notNull,\n                    price:money(11,2):notNull,\n                    created_at:dateTime'",209],["T_WHITESPACE","\n                ",211],"]",")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","testGenerateCreateJunctionMigration",217],"(",")",["T_WHITESPACE","\n    ",217],"{",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$migrationNames",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],"[",["T_WHITESPACE","\n            ",219],["T_CONSTANT_ENCAPSED_STRING","'create_junction_post_and_tag_tables'",220],",",["T_WHITESPACE","\n            ",220],["T_CONSTANT_ENCAPSED_STRING","'create_junction_for_post_and_tag_tables'",221],",",["T_WHITESPACE","\n            ",221],["T_CONSTANT_ENCAPSED_STRING","'create_junction_table_for_post_and_tag_tables'",222],",",["T_WHITESPACE","\n            ",222],["T_CONSTANT_ENCAPSED_STRING","'create_junction_table_for_post_and_tag_table'",223],",",["T_WHITESPACE","\n        ",223],"]",";",["T_WHITESPACE","\n        ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$migrationNames",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$migrationName",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertCommandCreatedFile",226],"(",["T_CONSTANT_ENCAPSED_STRING","'junction_test'",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$migrationName",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'post_tag'",226],")",";",["T_WHITESPACE","\n        ",226],"}",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_DOC_COMMENT","\/**\n     * @see https:\/\/github.com\/yiisoft\/yii2\/issues\/12980\n     *\/",230],["T_WHITESPACE","\n    ",232],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","testGetMigrationHistory",233],"(",")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$controllerConfig",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],"[",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","'migrationPath'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_STRING","null",236],",",["T_WHITESPACE","\n            ",236],["T_CONSTANT_ENCAPSED_STRING","'migrationNamespaces'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],"[",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","migrationNamespace",237],"]",["T_WHITESPACE","\n        ",237],"]",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","runMigrateControllerAction",239],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",239],",",["T_WHITESPACE"," ",239],"[","]",",",["T_WHITESPACE"," ",239],["T_VARIABLE","$controllerConfig",239],")",";",["T_WHITESPACE","\n\n        ",239],["T_VARIABLE","$controller",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","createMigrateController",241],"(",["T_VARIABLE","$controllerConfig",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$controller",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","db",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","Yii",242],["T_DOUBLE_COLON","::",242],["T_VARIABLE","$app",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","db",242],";",["T_WHITESPACE","\n\n        ",242],["T_STRING","Yii",244],["T_DOUBLE_COLON","::",244],["T_VARIABLE","$app",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","db",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","createCommand",244],"(",")",["T_WHITESPACE","\n            ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","batchInsert",245],"(",["T_WHITESPACE","\n                ",245],["T_CONSTANT_ENCAPSED_STRING","'migration'",246],",",["T_WHITESPACE","\n                ",246],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'apply_time'",247],"]",",",["T_WHITESPACE","\n                ",247],"[",["T_WHITESPACE","\n                    ",248],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M140506102106One'",249],",",["T_WHITESPACE"," ",249],["T_LNUMBER","10",249],"]",",",["T_WHITESPACE","\n                    ",249],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M160909083544Two'",250],",",["T_WHITESPACE"," ",250],["T_LNUMBER","10",250],"]",",",["T_WHITESPACE","\n                    ",250],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161018124749Three'",251],",",["T_WHITESPACE"," ",251],["T_LNUMBER","10",251],"]",",",["T_WHITESPACE","\n                    ",251],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M160930135248Four'",252],",",["T_WHITESPACE"," ",252],["T_LNUMBER","20",252],"]",",",["T_WHITESPACE","\n                    ",252],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161025123028Five'",253],",",["T_WHITESPACE"," ",253],["T_LNUMBER","20",253],"]",",",["T_WHITESPACE","\n                    ",253],"[",["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M161110133341Six'",254],",",["T_WHITESPACE"," ",254],["T_LNUMBER","20",254],"]",",",["T_WHITESPACE","\n                ",254],"]",["T_WHITESPACE","\n            ",255],")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","execute",257],"(",")",";",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$rows",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","invokeMethod",259],"(",["T_VARIABLE","$controller",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'getMigrationHistory'",259],",",["T_WHITESPACE"," ",259],"[",["T_LNUMBER","10",259],"]",")",";",["T_WHITESPACE","\n\n        ",259],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertSame",261],"(",["T_WHITESPACE","\n            ",261],"[",["T_WHITESPACE","\n                ",262],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M161110133341Six'",263],",",["T_WHITESPACE","\n                ",263],["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161025123028Five'",264],",",["T_WHITESPACE","\n                ",264],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M160930135248Four'",265],",",["T_WHITESPACE","\n                ",265],["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161018124749Three'",266],",",["T_WHITESPACE","\n                ",266],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M160909083544Two'",267],",",["T_WHITESPACE","\n                ",267],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M140506102106One'",268],",",["T_WHITESPACE","\n            ",268],"]",",",["T_WHITESPACE","\n            ",269],["T_STRING","array_keys",270],"(",["T_VARIABLE","$rows",270],")",["T_WHITESPACE","\n        ",270],")",";",["T_WHITESPACE","\n\n        ",271],["T_VARIABLE","$rows",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","invokeMethod",273],"(",["T_VARIABLE","$controller",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'getMigrationHistory'",273],",",["T_WHITESPACE"," ",273],"[",["T_LNUMBER","4",273],"]",")",";",["T_WHITESPACE","\n\n        ",273],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","assertSame",275],"(",["T_WHITESPACE","\n            ",275],"[",["T_WHITESPACE","\n                ",276],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M161110133341Six'",277],",",["T_WHITESPACE","\n                ",277],["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161025123028Five'",278],",",["T_WHITESPACE","\n                ",278],["T_CONSTANT_ENCAPSED_STRING","'app\\migrations\\M160930135248Four'",279],",",["T_WHITESPACE","\n                ",279],["T_CONSTANT_ENCAPSED_STRING","'app\\modules\\foo\\migrations\\M161018124749Three'",280],",",["T_WHITESPACE","\n            ",280],"]",",",["T_WHITESPACE","\n            ",281],["T_STRING","array_keys",282],"(",["T_VARIABLE","$rows",282],")",["T_WHITESPACE","\n        ",282],")",";",["T_WHITESPACE","\n    ",283],"}",["T_WHITESPACE","\n",284],"}"]
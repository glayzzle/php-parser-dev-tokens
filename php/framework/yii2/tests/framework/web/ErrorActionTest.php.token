[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","yiiunit",3],["T_NS_SEPARATOR","\\",3],["T_STRING","framework",3],["T_NS_SEPARATOR","\\",3],["T_STRING","web",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Yii",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","yii",6],["T_NS_SEPARATOR","\\",6],["T_STRING","base",6],["T_NS_SEPARATOR","\\",6],["T_STRING","InvalidConfigException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","yii",7],["T_NS_SEPARATOR","\\",7],["T_STRING","base",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UserException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","yii",8],["T_NS_SEPARATOR","\\",8],["T_STRING","web",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Controller",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","yii",9],["T_NS_SEPARATOR","\\",9],["T_STRING","web",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ErrorAction",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","yii",10],["T_NS_SEPARATOR","\\",10],["T_STRING","web",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Request",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","yiiunit",11],["T_NS_SEPARATOR","\\",11],["T_STRING","TestCase",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * @group web\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ErrorActionTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","TestCase",16],["T_WHITESPACE","\n",16],"{",["T_WHITESPACE","\n    ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","setUp",18],"(",")",["T_WHITESPACE","\n    ",18],"{",["T_WHITESPACE","\n        ",19],["T_STRING","parent",20],["T_DOUBLE_COLON","::",20],["T_STRING","setUp",20],"(",")",";",["T_WHITESPACE","\n\n        ",20],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","mockApplication",22],"(","[",["T_WHITESPACE","\n            ",22],["T_CONSTANT_ENCAPSED_STRING","'components'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],"[",["T_WHITESPACE","\n                ",23],["T_CONSTANT_ENCAPSED_STRING","'request'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],"[",["T_WHITESPACE","\n                    ",24],["T_CONSTANT_ENCAPSED_STRING","'class'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_STRING","Request",25],["T_DOUBLE_COLON","::",25],["T_STRING","className",25],"(",")",",",["T_WHITESPACE","\n                ",25],"]",",",["T_WHITESPACE","\n            ",26],"]",",",["T_WHITESPACE","\n        ",27],"]",")",";",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n\n    ",29],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","getController",31],"(",["T_VARIABLE","$actionConfig",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[","]",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_RETURN","return",33],["T_WHITESPACE"," ",33],["T_NEW","new",33],["T_WHITESPACE"," ",33],["T_STRING","TestController",33],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",33],",",["T_WHITESPACE"," ",33],["T_STRING","Yii",33],["T_DOUBLE_COLON","::",33],["T_VARIABLE","$app",33],",",["T_WHITESPACE"," ",33],"[",["T_CONSTANT_ENCAPSED_STRING","'layout'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_STRING","false",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'actionConfig'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$actionConfig",33],"]",")",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n\n    ",34],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testYiiException",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_STRING","Yii",38],["T_DOUBLE_COLON","::",38],["T_VARIABLE","$app",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getErrorHandler",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","exception",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","InvalidConfigException",38],"(",["T_CONSTANT_ENCAPSED_STRING","'This message will not be shown to the user'",38],")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertEquals",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Name: Invalid Configuration\nMessage: An internal server error occurred.\nException: yii\\base\\InvalidConfigException'",40],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getController",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","runAction",42],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",42],")",")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","testUserException",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_STRING","Yii",47],["T_DOUBLE_COLON","::",47],["T_VARIABLE","$app",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getErrorHandler",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","exception",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","UserException",47],"(",["T_CONSTANT_ENCAPSED_STRING","'User can see this error message'",47],")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertEquals",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Name: Exception\nMessage: User can see this error message\nException: yii\\base\\UserException'",49],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getController",51],"(",")",["T_OBJECT_OPERATOR","->",51],["T_STRING","runAction",51],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",51],")",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","testAjaxRequest",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$_SERVER",56],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_X_REQUESTED_WITH'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'XMLHttpRequest'",56],";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEquals",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Not Found (#404): Page not found.'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getController",58],"(",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","runAction",58],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",58],")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testGenericException",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_STRING","Yii",63],["T_DOUBLE_COLON","::",63],["T_VARIABLE","$app",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getErrorHandler",63],"(",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","exception",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_NS_SEPARATOR","\\",63],["T_STRING","InvalidArgumentException",63],"(",["T_CONSTANT_ENCAPSED_STRING","'This message will not be shown to the user'",63],")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertEquals",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Name: Error\nMessage: An internal server error occurred.\nException: InvalidArgumentException'",65],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getController",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","runAction",67],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",67],")",")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n\n    ",68],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testGenericExceptionCustomNameAndMessage",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_STRING","Yii",72],["T_DOUBLE_COLON","::",72],["T_VARIABLE","$app",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getErrorHandler",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","exception",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","InvalidArgumentException",72],"(",["T_CONSTANT_ENCAPSED_STRING","'This message will not be shown to the user'",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$controller",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getController",74],"(","[",["T_WHITESPACE","\n            ",74],["T_CONSTANT_ENCAPSED_STRING","'defaultName'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'Oops...'",75],",",["T_WHITESPACE","\n            ",75],["T_CONSTANT_ENCAPSED_STRING","'defaultMessage'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'The system is drunk'",76],["T_WHITESPACE","\n        ",76],"]",")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEquals",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Name: Oops...\nMessage: The system is drunk\nException: InvalidArgumentException'",79],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$controller",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","runAction",81],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",81],")",")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testNoExceptionInHandler",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertEquals",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Name: Not Found (#404)\nMessage: Page not found.\nException: yii\\web\\NotFoundHttpException'",86],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getController",88],"(",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","runAction",88],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",88],")",")",";",["T_WHITESPACE","\n    ",88],"}",["T_WHITESPACE","\n\n    ",89],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","testDefaultView",91],"(",")",["T_WHITESPACE","\n    ",91],"{",["T_WHITESPACE","\n        ",92],["T_DOC_COMMENT","\/** @var ErrorAction $action *\/",93],["T_WHITESPACE","\n        ",93],["T_VARIABLE","$action",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getController",94],"(",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","createAction",94],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",94],")",";",["T_WHITESPACE","\n\n        ",94],["T_COMMENT","\/\/ Unset view name. Class should try to load view that matches action name by default\n",96],["T_WHITESPACE","        ",97],["T_VARIABLE","$action",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","view",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","null",97],";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setExpectedExceptionRegExp",98],"(",["T_CONSTANT_ENCAPSED_STRING","'yii\\base\\ViewNotFoundException'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'#The view file does not exist: .*?views\/test\/error.php#'",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","invokeMethod",99],"(",["T_VARIABLE","$action",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'renderHtmlResponse'",99],")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n\n",100],"}",["T_WHITESPACE","\n\n",103],["T_CLASS","class",105],["T_WHITESPACE"," ",105],["T_STRING","TestController",105],["T_WHITESPACE"," ",105],["T_EXTENDS","extends",105],["T_WHITESPACE"," ",105],["T_STRING","Controller",105],["T_WHITESPACE","\n",105],"{",["T_WHITESPACE","\n    ",106],["T_PRIVATE","private",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$actionConfig",107],";",["T_WHITESPACE","\n\n    ",107],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","setActionConfig",109],"(",["T_VARIABLE","$config",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"[","]",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","actionConfig",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$config",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","actions",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],"[",["T_WHITESPACE","\n            ",116],["T_CONSTANT_ENCAPSED_STRING","'error'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","array_merge",117],"(","[",["T_WHITESPACE","\n                ",117],["T_CONSTANT_ENCAPSED_STRING","'class'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_STRING","ErrorAction",118],["T_DOUBLE_COLON","::",118],["T_STRING","className",118],"(",")",",",["T_WHITESPACE","\n                ",118],["T_CONSTANT_ENCAPSED_STRING","'view'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'@yiiunit\/data\/views\/error.php'",119],",",["T_WHITESPACE","\n            ",119],"]",",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","actionConfig",120],")",",",["T_WHITESPACE","\n        ",120],"]",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
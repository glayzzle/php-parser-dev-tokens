[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionInstaller",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","document",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","setTitle",6],"(",["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","language",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","get",6],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",6],")",")",";",["T_WHITESPACE","\n\t\t\n\t\t",6],["T_VARIABLE","$data",8],"[",["T_CONSTANT_ENCAPSED_STRING","'breadcrumbs'",8],"]",["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_ARRAY","array",8],"(",")",";",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'breadcrumbs'",10],"]","[","]",["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_ARRAY","array",10],"(",["T_WHITESPACE","\n\t\t\t",10],["T_CONSTANT_ENCAPSED_STRING","'text'",11],["T_WHITESPACE"," ",11],["T_DOUBLE_ARROW","=>",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","language",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'text_home'",11],")",",",["T_WHITESPACE","\n\t\t\t",11],["T_CONSTANT_ENCAPSED_STRING","'href'",12],["T_WHITESPACE"," ",12],["T_DOUBLE_ARROW","=>",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","url",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","link",12],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/dashboard'",12],",",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","'token='",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","session",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",12],"]",",",["T_WHITESPACE"," ",12],["T_STRING","true",12],")",["T_WHITESPACE","\n\t\t",12],")",";",["T_WHITESPACE","\n\n\t\t",13],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'breadcrumbs'",15],"]","[","]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_ARRAY","array",15],"(",["T_WHITESPACE","\n\t\t\t",15],["T_CONSTANT_ENCAPSED_STRING","'text'",16],["T_WHITESPACE"," ",16],["T_DOUBLE_ARROW","=>",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","language",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",16],")",",",["T_WHITESPACE","\n\t\t\t",16],["T_CONSTANT_ENCAPSED_STRING","'href'",17],["T_WHITESPACE"," ",17],["T_DOUBLE_ARROW","=>",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","url",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","link",17],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'token='",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","session",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",17],"]",",",["T_WHITESPACE"," ",17],["T_STRING","true",17],")",["T_WHITESPACE","\n\t\t",17],")",";",["T_WHITESPACE","\n\t\t\n\t\t",18],["T_VARIABLE","$data",20],"[",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",20],"]",["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","language",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",20],")",";",["T_WHITESPACE","\n        \n\t\t",20],["T_VARIABLE","$data",22],"[",["T_CONSTANT_ENCAPSED_STRING","'text_upload'",22],"]",["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","language",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_CONSTANT_ENCAPSED_STRING","'text_upload'",22],")",";",["T_WHITESPACE","\n\t\t",22],["T_VARIABLE","$data",23],"[",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",23],"]",["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",23],")",";",["T_WHITESPACE","\n\t\t\t\n\t\t",23],["T_VARIABLE","$data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_upload'",25],"]",["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","language",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_upload'",25],")",";",["T_WHITESPACE","\n\t\t",25],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_overwrite'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","language",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_overwrite'",26],")",";",["T_WHITESPACE","\n\t\t",26],["T_VARIABLE","$data",27],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_progress'",27],"]",["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","language",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_progress'",27],")",";",["T_WHITESPACE","\n\t\n\t\t",27],["T_VARIABLE","$data",29],"[",["T_CONSTANT_ENCAPSED_STRING","'help_upload'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","language",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_CONSTANT_ENCAPSED_STRING","'help_upload'",29],")",";",["T_WHITESPACE","\n\t\t\n\t\t",29],["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'button_upload'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","language",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","get",31],"(",["T_CONSTANT_ENCAPSED_STRING","'button_upload'",31],")",";",["T_WHITESPACE","\n\t\t",31],["T_VARIABLE","$data",32],"[",["T_CONSTANT_ENCAPSED_STRING","'button_clear'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","language",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","get",32],"(",["T_CONSTANT_ENCAPSED_STRING","'button_clear'",32],")",";",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$data",33],"[",["T_CONSTANT_ENCAPSED_STRING","'button_continue'",33],"]",["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","language",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","get",33],"(",["T_CONSTANT_ENCAPSED_STRING","'button_continue'",33],")",";",["T_WHITESPACE","\n\n\t\t",33],["T_VARIABLE","$data",35],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","session",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","data",35],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",35],"]",";",["T_WHITESPACE","\n\n\t\t",35],["T_VARIABLE","$directories",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","glob",37],"(",["T_STRING","DIR_UPLOAD",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'temp-*'",37],",",["T_WHITESPACE"," ",37],["T_STRING","GLOB_ONLYDIR",37],")",";",["T_WHITESPACE","\n\n\t\t",37],["T_IF","if",39],["T_WHITESPACE"," ",39],"(",["T_VARIABLE","$directories",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n\t\t\t",39],["T_VARIABLE","$data",40],"[",["T_CONSTANT_ENCAPSED_STRING","'error_warning'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","language",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'error_temporary'",40],")",";",["T_WHITESPACE","\n\t\t",40],"}",["T_WHITESPACE"," ",41],["T_ELSE","else",41],["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t",41],["T_VARIABLE","$data",42],"[",["T_CONSTANT_ENCAPSED_STRING","'error_warning'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","''",42],";",["T_WHITESPACE","\n\t\t",42],"}",["T_WHITESPACE","\n\t\t\n\t\t",43],["T_VARIABLE","$data",45],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",45],"]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","load",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","controller",45],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/header'",45],")",";",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$data",46],"[",["T_CONSTANT_ENCAPSED_STRING","'column_left'",46],"]",["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","load",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","controller",46],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/column_left'",46],")",";",["T_WHITESPACE","\n\t\t",46],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'footer'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","load",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","controller",47],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/footer'",47],")",";",["T_WHITESPACE","\n\t\t\n\t\t",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","response",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setOutput",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","load",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","view",49],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$data",49],")",")",";",["T_WHITESPACE","\n\t",49],"}",["T_WHITESPACE","\n\t\n\t",50],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","upload",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","load",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","language",53],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",53],")",";",["T_WHITESPACE","\n\n\t\t",53],["T_VARIABLE","$json",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\n\t\t",55],["T_COMMENT","\/\/ Check user has permission\n",57],["T_WHITESPACE","\t\t",58],["T_IF","if",58],["T_WHITESPACE"," ",58],"(","!",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","user",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","hasPermission",58],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t\t",58],["T_VARIABLE","$json",59],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","language",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",59],")",";",["T_WHITESPACE","\n\t\t",59],"}",["T_WHITESPACE","\n\n\t\t",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_VARIABLE","$json",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t\t",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_EMPTY","empty",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","request",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","files",63],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",63],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",63],"]",")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n\t\t\t\t",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_STRING","substr",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","request",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","files",64],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",64],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",64],"]",",",["T_WHITESPACE"," ",64],"-",["T_LNUMBER","10",64],")",["T_WHITESPACE"," ",64],["T_IS_NOT_EQUAL","!=",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'.ocmod.zip'",64],["T_WHITESPACE"," ",64],["T_BOOLEAN_AND","&&",64],["T_WHITESPACE"," ",64],["T_STRING","substr",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","request",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","files",64],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",64],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",64],"]",",",["T_WHITESPACE"," ",64],"-",["T_LNUMBER","10",64],")",["T_WHITESPACE"," ",64],["T_IS_NOT_EQUAL","!=",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'.ocmod.xml'",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n\t\t\t\t\t",64],["T_VARIABLE","$json",65],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","language",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'error_filetype'",65],")",";",["T_WHITESPACE","\n\t\t\t\t",65],"}",["T_WHITESPACE","\n\n\t\t\t\t",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","request",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","files",68],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",68],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",68],"]",["T_WHITESPACE"," ",68],["T_IS_NOT_EQUAL","!=",68],["T_WHITESPACE"," ",68],["T_STRING","UPLOAD_ERR_OK",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t\t",68],["T_VARIABLE","$json",69],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","language",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'error_upload_'",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","request",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","files",69],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",69],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",69],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",69],"}",["T_WHITESPACE","\n\t\t\t",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n\t\t\t\t",71],["T_VARIABLE","$json",72],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",72],"]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","language",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'error_upload'",72],")",";",["T_WHITESPACE","\n\t\t\t",72],"}",["T_WHITESPACE","\n\t\t",73],"}",["T_WHITESPACE","\n\n\t\t",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_VARIABLE","$json",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t",76],["T_COMMENT","\/\/ If no temp directory exists create it\n",77],["T_WHITESPACE","\t\t\t",78],["T_VARIABLE","$path",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'temp-'",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_STRING","token",78],"(",["T_LNUMBER","32",78],")",";",["T_WHITESPACE","\n\n\t\t\t",78],["T_IF","if",80],["T_WHITESPACE"," ",80],"(","!",["T_STRING","is_dir",80],"(",["T_STRING","DIR_UPLOAD",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$path",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n\t\t\t\t",80],["T_STRING","mkdir",81],"(",["T_STRING","DIR_UPLOAD",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$path",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","0777",81],")",";",["T_WHITESPACE","\n\t\t\t",81],"}",["T_WHITESPACE","\n\n\t\t\t",82],["T_COMMENT","\/\/ Set the steps required for installation\n",84],["T_WHITESPACE","\t\t\t",85],["T_VARIABLE","$json",85],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n\t\t\t",85],["T_VARIABLE","$json",86],"[",["T_CONSTANT_ENCAPSED_STRING","'overwrite'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_STRING","strrchr",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","request",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","files",88],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",88],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",88],"]",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'.'",88],")",["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'.xml'",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t\t\t",88],["T_VARIABLE","$file",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","DIR_UPLOAD",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$path",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/install.xml'",89],";",["T_WHITESPACE","\n\n\t\t\t\t",89],["T_COMMENT","\/\/ If xml file copy it to the temporary directory\n",91],["T_WHITESPACE","\t\t\t\t",92],["T_STRING","move_uploaded_file",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","request",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","files",92],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",92],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",92],"]",",",["T_WHITESPACE"," ",92],["T_VARIABLE","$file",92],")",";",["T_WHITESPACE","\n\n\t\t\t\t",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","file_exists",94],"(",["T_VARIABLE","$file",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n\t\t\t\t\t",94],["T_VARIABLE","$json",95],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",95],"]","[","]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",95],["T_CONSTANT_ENCAPSED_STRING","'text'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","language",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","get",96],"(",["T_CONSTANT_ENCAPSED_STRING","'text_xml'",96],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",96],["T_CONSTANT_ENCAPSED_STRING","'url'",97],["T_WHITESPACE","  ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_STRING","str_replace",97],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'&'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","url",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","link",97],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/xml'",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'token='",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","session",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","data",97],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",97],"]",",",["T_WHITESPACE"," ",97],["T_STRING","true",97],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",97],["T_CONSTANT_ENCAPSED_STRING","'path'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$path",98],["T_WHITESPACE","\n\t\t\t\t\t",98],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",99],["T_COMMENT","\/\/ Clear temporary files\n",101],["T_WHITESPACE","\t\t\t\t\t",102],["T_VARIABLE","$json",102],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",102],"]","[","]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",102],["T_CONSTANT_ENCAPSED_STRING","'text'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","language",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'text_remove'",103],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",103],["T_CONSTANT_ENCAPSED_STRING","'url'",104],["T_WHITESPACE","  ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","str_replace",104],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'&'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","url",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","link",104],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/remove'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'token='",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","session",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","data",104],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",104],"]",",",["T_WHITESPACE"," ",104],["T_STRING","true",104],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",104],["T_CONSTANT_ENCAPSED_STRING","'path'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$path",105],["T_WHITESPACE","\n\t\t\t\t\t",105],")",";",["T_WHITESPACE","\n\t\t\t\t",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t\t\t\t",107],["T_VARIABLE","$json",108],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",108],"]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","language",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",108],")",";",["T_WHITESPACE","\n\t\t\t\t",108],"}",["T_WHITESPACE","\n\t\t\t",109],"}",["T_WHITESPACE","\n\n\t\t\t",110],["T_COMMENT","\/\/ If zip file copy it to the temp directory\n",112],["T_WHITESPACE","\t\t\t",113],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_STRING","strrchr",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","request",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","files",113],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",113],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",113],"]",",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'.'",113],")",["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'.zip'",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n\t\t\t\t",113],["T_VARIABLE","$file",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","DIR_UPLOAD",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$path",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'\/upload.zip'",114],";",["T_WHITESPACE","\n\n\t\t\t\t",114],["T_STRING","move_uploaded_file",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","request",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","files",116],"[",["T_CONSTANT_ENCAPSED_STRING","'file'",116],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tmp_name'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$file",116],")",";",["T_WHITESPACE","\n\n\t\t\t\t",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","file_exists",118],"(",["T_VARIABLE","$file",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n\t\t\t\t\t",118],["T_VARIABLE","$zip",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","zip_open",119],"(",["T_VARIABLE","$file",119],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$zip",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",121],["T_COMMENT","\/\/ Zip\n",122],["T_WHITESPACE","\t\t\t\t\t\t",123],["T_VARIABLE","$json",123],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",123],"]","[","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",123],["T_CONSTANT_ENCAPSED_STRING","'text'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","language",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'text_unzip'",124],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",124],["T_CONSTANT_ENCAPSED_STRING","'url'",125],["T_WHITESPACE","  ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","str_replace",125],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'&'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","url",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","link",125],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/unzip'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'token='",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","session",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","data",125],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",125],"]",",",["T_WHITESPACE"," ",125],["T_STRING","true",125],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",125],["T_CONSTANT_ENCAPSED_STRING","'path'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$path",126],["T_WHITESPACE","\n\t\t\t\t\t\t",126],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",127],["T_COMMENT","\/\/ FTP\n",129],["T_WHITESPACE","\t\t\t\t\t\t",130],["T_VARIABLE","$json",130],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",130],"]","[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",130],["T_CONSTANT_ENCAPSED_STRING","'text'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","language",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","get",131],"(",["T_CONSTANT_ENCAPSED_STRING","'text_ftp'",131],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",131],["T_CONSTANT_ENCAPSED_STRING","'url'",132],["T_WHITESPACE","  ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_STRING","str_replace",132],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'&'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","url",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","link",132],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/ftp'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'token='",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","session",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","data",132],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",132],"]",",",["T_WHITESPACE"," ",132],["T_STRING","true",132],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",132],["T_CONSTANT_ENCAPSED_STRING","'path'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$path",133],["T_WHITESPACE","\n\t\t\t\t\t\t",133],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",134],["T_COMMENT","\/\/ Send make and array of actions to carry out\n",136],["T_WHITESPACE","\t\t\t\t\t\t",137],["T_WHILE","while",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$entry",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","zip_read",137],"(",["T_VARIABLE","$zip",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",137],["T_VARIABLE","$zip_name",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","zip_entry_name",138],"(",["T_VARIABLE","$entry",138],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",138],["T_COMMENT","\/\/ SQL\n",140],["T_WHITESPACE","\t\t\t\t\t\t\t",141],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_STRING","substr",141],"(",["T_VARIABLE","$zip_name",141],",",["T_WHITESPACE"," ",141],["T_LNUMBER","0",141],",",["T_WHITESPACE"," ",141],["T_LNUMBER","11",141],")",["T_WHITESPACE"," ",141],["T_IS_EQUAL","==",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'install.sql'",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",141],["T_VARIABLE","$json",142],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",142],"]","[","]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",142],["T_CONSTANT_ENCAPSED_STRING","'text'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","language",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","get",143],"(",["T_CONSTANT_ENCAPSED_STRING","'text_sql'",143],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",143],["T_CONSTANT_ENCAPSED_STRING","'url'",144],["T_WHITESPACE","  ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_STRING","str_replace",144],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'&'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","url",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","link",144],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/sql'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'token='",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","session",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",144],"]",",",["T_WHITESPACE"," ",144],["T_STRING","true",144],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",144],["T_CONSTANT_ENCAPSED_STRING","'path'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$path",145],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",145],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",146],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",147],["T_COMMENT","\/\/ XML\n",149],["T_WHITESPACE","\t\t\t\t\t\t\t",150],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_STRING","substr",150],"(",["T_VARIABLE","$zip_name",150],",",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],",",["T_WHITESPACE"," ",150],["T_LNUMBER","11",150],")",["T_WHITESPACE"," ",150],["T_IS_EQUAL","==",150],["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'install.xml'",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",150],["T_VARIABLE","$json",151],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",151],"]","[","]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",151],["T_CONSTANT_ENCAPSED_STRING","'text'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","language",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","get",152],"(",["T_CONSTANT_ENCAPSED_STRING","'text_xml'",152],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",152],["T_CONSTANT_ENCAPSED_STRING","'url'",153],["T_WHITESPACE","  ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_STRING","str_replace",153],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'&'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","url",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","link",153],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/xml'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'token='",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","session",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","data",153],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",153],"]",",",["T_WHITESPACE"," ",153],["T_STRING","true",153],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",153],["T_CONSTANT_ENCAPSED_STRING","'path'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$path",154],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",154],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",155],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",156],["T_COMMENT","\/\/ PHP\n",158],["T_WHITESPACE","\t\t\t\t\t\t\t",159],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_STRING","substr",159],"(",["T_VARIABLE","$zip_name",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","0",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","11",159],")",["T_WHITESPACE"," ",159],["T_IS_EQUAL","==",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'install.php'",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",159],["T_VARIABLE","$json",160],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",160],"]","[","]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",160],["T_CONSTANT_ENCAPSED_STRING","'text'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","language",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","get",161],"(",["T_CONSTANT_ENCAPSED_STRING","'text_php'",161],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",161],["T_CONSTANT_ENCAPSED_STRING","'url'",162],["T_WHITESPACE","  ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_STRING","str_replace",162],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'&'",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","url",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","link",162],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/php'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'token='",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","session",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","data",162],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",162],"]",",",["T_WHITESPACE"," ",162],["T_STRING","true",162],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",162],["T_CONSTANT_ENCAPSED_STRING","'path'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$path",163],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",163],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",164],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",165],["T_COMMENT","\/\/ Compare admin files\n",167],["T_WHITESPACE","\t\t\t\t\t\t\t",168],["T_VARIABLE","$file",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","DIR_APPLICATION",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_STRING","substr",168],"(",["T_VARIABLE","$zip_name",168],",",["T_WHITESPACE"," ",168],["T_LNUMBER","13",168],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_STRING","is_file",170],"(",["T_VARIABLE","$file",170],")",["T_WHITESPACE"," ",170],["T_BOOLEAN_AND","&&",170],["T_WHITESPACE"," ",170],["T_STRING","substr",170],"(",["T_VARIABLE","$zip_name",170],",",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],",",["T_WHITESPACE"," ",170],["T_LNUMBER","13",170],")",["T_WHITESPACE"," ",170],["T_IS_EQUAL","==",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'upload\/admin\/'",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",170],["T_VARIABLE","$json",171],"[",["T_CONSTANT_ENCAPSED_STRING","'overwrite'",171],"]","[","]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","substr",171],"(",["T_VARIABLE","$zip_name",171],",",["T_WHITESPACE"," ",171],["T_LNUMBER","7",171],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",171],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",172],["T_COMMENT","\/\/ Compare catalog files\n",174],["T_WHITESPACE","\t\t\t\t\t\t\t",175],["T_VARIABLE","$file",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","DIR_CATALOG",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_STRING","substr",175],"(",["T_VARIABLE","$zip_name",175],",",["T_WHITESPACE"," ",175],["T_LNUMBER","15",175],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",175],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_STRING","is_file",177],"(",["T_VARIABLE","$file",177],")",["T_WHITESPACE"," ",177],["T_BOOLEAN_AND","&&",177],["T_WHITESPACE"," ",177],["T_STRING","substr",177],"(",["T_VARIABLE","$zip_name",177],",",["T_WHITESPACE"," ",177],["T_LNUMBER","0",177],",",["T_WHITESPACE"," ",177],["T_LNUMBER","15",177],")",["T_WHITESPACE"," ",177],["T_IS_EQUAL","==",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'upload\/catalog\/'",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",177],["T_VARIABLE","$json",178],"[",["T_CONSTANT_ENCAPSED_STRING","'overwrite'",178],"]","[","]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_STRING","substr",178],"(",["T_VARIABLE","$zip_name",178],",",["T_WHITESPACE"," ",178],["T_LNUMBER","7",178],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",178],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",179],["T_COMMENT","\/\/ Compare image files\n",181],["T_WHITESPACE","\t\t\t\t\t\t\t",182],["T_VARIABLE","$file",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","DIR_IMAGE",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_STRING","substr",182],"(",["T_VARIABLE","$zip_name",182],",",["T_WHITESPACE"," ",182],["T_LNUMBER","13",182],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_STRING","is_file",184],"(",["T_VARIABLE","$file",184],")",["T_WHITESPACE"," ",184],["T_BOOLEAN_AND","&&",184],["T_WHITESPACE"," ",184],["T_STRING","substr",184],"(",["T_VARIABLE","$zip_name",184],",",["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],",",["T_WHITESPACE"," ",184],["T_LNUMBER","13",184],")",["T_WHITESPACE"," ",184],["T_IS_EQUAL","==",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'upload\/image\/'",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",184],["T_VARIABLE","$json",185],"[",["T_CONSTANT_ENCAPSED_STRING","'overwrite'",185],"]","[","]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","substr",185],"(",["T_VARIABLE","$zip_name",185],",",["T_WHITESPACE"," ",185],["T_LNUMBER","7",185],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",185],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",186],["T_COMMENT","\/\/ Compare system files\n",188],["T_WHITESPACE","\t\t\t\t\t\t\t",189],["T_VARIABLE","$file",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","DIR_SYSTEM",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_STRING","substr",189],"(",["T_VARIABLE","$zip_name",189],",",["T_WHITESPACE"," ",189],["T_LNUMBER","14",189],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_STRING","is_file",191],"(",["T_VARIABLE","$file",191],")",["T_WHITESPACE"," ",191],["T_BOOLEAN_AND","&&",191],["T_WHITESPACE"," ",191],["T_STRING","substr",191],"(",["T_VARIABLE","$zip_name",191],",",["T_WHITESPACE"," ",191],["T_LNUMBER","0",191],",",["T_WHITESPACE"," ",191],["T_LNUMBER","14",191],")",["T_WHITESPACE"," ",191],["T_IS_EQUAL","==",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'upload\/system\/'",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",191],["T_VARIABLE","$json",192],"[",["T_CONSTANT_ENCAPSED_STRING","'overwrite'",192],"]","[","]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","substr",192],"(",["T_VARIABLE","$zip_name",192],",",["T_WHITESPACE"," ",192],["T_LNUMBER","7",192],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",192],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",193],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",194],["T_COMMENT","\/\/ Clear temporary files\n",196],["T_WHITESPACE","\t\t\t\t\t\t",197],["T_VARIABLE","$json",197],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",197],"]","[","]",["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",197],["T_CONSTANT_ENCAPSED_STRING","'text'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","language",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","get",198],"(",["T_CONSTANT_ENCAPSED_STRING","'text_remove'",198],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",198],["T_CONSTANT_ENCAPSED_STRING","'url'",199],["T_WHITESPACE","  ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_STRING","str_replace",199],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'&'",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","url",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","link",199],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer\/remove'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'token='",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","session",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","data",199],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",199],"]",",",["T_WHITESPACE"," ",199],["T_STRING","true",199],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",199],["T_CONSTANT_ENCAPSED_STRING","'path'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$path",200],["T_WHITESPACE","\n\t\t\t\t\t\t",200],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",201],["T_STRING","zip_close",203],"(",["T_VARIABLE","$zip",203],")",";",["T_WHITESPACE","\n\t\t\t\t\t",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",204],["T_VARIABLE","$json",205],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",205],"]",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","language",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","get",205],"(",["T_CONSTANT_ENCAPSED_STRING","'error_unzip'",205],")",";",["T_WHITESPACE","\n\t\t\t\t\t",205],"}",["T_WHITESPACE","\n\t\t\t\t",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\t\t\t\t\t",207],["T_VARIABLE","$json",208],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","language",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","get",208],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",208],")",";",["T_WHITESPACE","\n\t\t\t\t",208],"}",["T_WHITESPACE","\n\t\t\t",209],"}",["T_WHITESPACE","\n\t\t",210],"}",["T_WHITESPACE","\n\n\t\t",211],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","response",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","addHeader",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",213],")",";",["T_WHITESPACE","\n\t\t",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","response",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setOutput",214],"(",["T_STRING","json_encode",214],"(",["T_VARIABLE","$json",214],")",")",";",["T_WHITESPACE","\n\t",214],"}",["T_WHITESPACE","\n \n\t",215],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","unzip",217],"(",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\t\t",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","load",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","language",218],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",218],")",";",["T_WHITESPACE","\n\n\t\t",218],["T_VARIABLE","$json",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",";",["T_WHITESPACE","\n\n\t\t",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","user",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","hasPermission",222],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n\t\t\t",222],["T_VARIABLE","$json",223],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","language",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","get",223],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",223],")",";",["T_WHITESPACE","\n\t\t",223],"}",["T_WHITESPACE","\n\n\t\t",224],["T_COMMENT","\/\/ Sanitize the filename\n",226],["T_WHITESPACE","\t\t",227],["T_VARIABLE","$file",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","DIR_UPLOAD",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","request",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","post",227],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",227],"]",["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'\/upload.zip'",227],";",["T_WHITESPACE","\n\n\t\t",227],["T_IF","if",229],["T_WHITESPACE"," ",229],"(","!",["T_STRING","is_file",229],"(",["T_VARIABLE","$file",229],")",["T_WHITESPACE"," ",229],["T_BOOLEAN_OR","||",229],["T_WHITESPACE"," ",229],["T_STRING","substr",229],"(",["T_STRING","str_replace",229],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'\/'",229],",",["T_WHITESPACE"," ",229],["T_STRING","realpath",229],"(",["T_VARIABLE","$file",229],")",")",",",["T_WHITESPACE"," ",229],["T_LNUMBER","0",229],",",["T_WHITESPACE"," ",229],["T_STRING","strlen",229],"(",["T_STRING","DIR_UPLOAD",229],")",")",["T_WHITESPACE"," ",229],["T_IS_NOT_EQUAL","!=",229],["T_WHITESPACE"," ",229],["T_STRING","DIR_UPLOAD",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n\t\t\t",229],["T_VARIABLE","$json",230],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","language",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","get",230],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",230],")",";",["T_WHITESPACE","\n\t\t",230],"}",["T_WHITESPACE","\n\n\t\t",231],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_VARIABLE","$json",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n\t\t\t",233],["T_COMMENT","\/\/ Unzip the files\n",234],["T_WHITESPACE","\t\t\t",235],["T_VARIABLE","$zip",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_STRING","ZipArchive",235],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",235],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$zip",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","open",237],"(",["T_VARIABLE","$file",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n\t\t\t\t",237],["T_VARIABLE","$zip",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","extractTo",238],"(",["T_STRING","DIR_UPLOAD",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","request",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","post",238],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",238],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",238],["T_VARIABLE","$zip",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","close",239],"(",")",";",["T_WHITESPACE","\n\t\t\t",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t\t\t",240],["T_VARIABLE","$json",241],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","language",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","get",241],"(",["T_CONSTANT_ENCAPSED_STRING","'error_unzip'",241],")",";",["T_WHITESPACE","\n\t\t\t",241],"}",["T_WHITESPACE","\n\n\t\t\t",242],["T_COMMENT","\/\/ Remove Zip\n",244],["T_WHITESPACE","\t\t\t",245],["T_STRING","unlink",245],"(",["T_VARIABLE","$file",245],")",";",["T_WHITESPACE","\n\t\t",245],"}",["T_WHITESPACE","\n\n\t\t",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","response",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addHeader",248],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",248],")",";",["T_WHITESPACE","\n\t\t",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","response",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setOutput",249],"(",["T_STRING","json_encode",249],"(",["T_VARIABLE","$json",249],")",")",";",["T_WHITESPACE","\n\t",249],"}",["T_WHITESPACE","\n\n\t",250],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","ftp",252],"(",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","load",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","language",253],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",253],")",";",["T_WHITESPACE","\n\n\t\t",253],["T_VARIABLE","$json",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_ARRAY","array",255],"(",")",";",["T_WHITESPACE","\n\n\t\t",255],["T_IF","if",257],["T_WHITESPACE"," ",257],"(","!",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","user",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","hasPermission",257],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",257],",",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n\t\t\t",257],["T_VARIABLE","$json",258],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",258],"]",["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","language",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","get",258],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",258],")",";",["T_WHITESPACE","\n\t\t",258],"}",["T_WHITESPACE","\n\n\t\t",259],["T_COMMENT","\/\/ Check FTP status\n",261],["T_WHITESPACE","\t\t",262],["T_IF","if",262],["T_WHITESPACE"," ",262],"(","!",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","config",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","get",262],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_status'",262],")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n\t\t\t",262],["T_VARIABLE","$json",263],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","language",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","get",263],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_status'",263],")",";",["T_WHITESPACE","\n\t\t",263],"}",["T_WHITESPACE","\n\n\t\t",264],["T_VARIABLE","$directory",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","DIR_UPLOAD",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","request",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","post",266],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",266],"]",["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'\/upload\/'",266],";",["T_WHITESPACE","\n\n\t\t",266],["T_IF","if",268],["T_WHITESPACE"," ",268],"(","!",["T_STRING","is_dir",268],"(",["T_VARIABLE","$directory",268],")",["T_WHITESPACE"," ",268],["T_BOOLEAN_OR","||",268],["T_WHITESPACE"," ",268],["T_STRING","substr",268],"(",["T_STRING","str_replace",268],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'\/'",268],",",["T_WHITESPACE"," ",268],["T_STRING","realpath",268],"(",["T_VARIABLE","$directory",268],")",")",",",["T_WHITESPACE"," ",268],["T_LNUMBER","0",268],",",["T_WHITESPACE"," ",268],["T_STRING","strlen",268],"(",["T_STRING","DIR_UPLOAD",268],")",")",["T_WHITESPACE"," ",268],["T_IS_NOT_EQUAL","!=",268],["T_WHITESPACE"," ",268],["T_STRING","DIR_UPLOAD",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n\t\t\t",268],["T_VARIABLE","$json",269],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",269],"]",["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","language",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","get",269],"(",["T_CONSTANT_ENCAPSED_STRING","'error_directory'",269],")",";",["T_WHITESPACE","\n\t\t",269],"}",["T_WHITESPACE","\n\n\t\t",270],["T_IF","if",272],["T_WHITESPACE"," ",272],"(","!",["T_VARIABLE","$json",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n\t\t\t",272],["T_COMMENT","\/\/ Get a list of files ready to upload\n",273],["T_WHITESPACE","\t\t\t",274],["T_VARIABLE","$files",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_ARRAY","array",274],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",274],["T_VARIABLE","$path",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",["T_VARIABLE","$directory",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'*'",276],")",";",["T_WHITESPACE","\n\n\t\t\t",276],["T_WHILE","while",278],["T_WHITESPACE"," ",278],"(",["T_STRING","count",278],"(",["T_VARIABLE","$path",278],")",["T_WHITESPACE"," ",278],["T_IS_NOT_EQUAL","!=",278],["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n\t\t\t\t",278],["T_VARIABLE","$next",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","array_shift",279],"(",["T_VARIABLE","$path",279],")",";",["T_WHITESPACE","\n\n\t\t\t\t",279],["T_FOREACH","foreach",281],["T_WHITESPACE"," ",281],"(",["T_ARRAY_CAST","(array)",281],["T_STRING","glob",281],"(",["T_VARIABLE","$next",281],")",["T_WHITESPACE"," ",281],["T_AS","as",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$file",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n\t\t\t\t\t",281],["T_IF","if",282],["T_WHITESPACE"," ",282],"(",["T_STRING","is_dir",282],"(",["T_VARIABLE","$file",282],")",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",282],["T_VARIABLE","$path",283],"[","]",["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$file",283],["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'\/*'",283],";",["T_WHITESPACE","\n\t\t\t\t\t",283],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",284],["T_VARIABLE","$files",286],"[","]",["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$file",286],";",["T_WHITESPACE","\n\t\t\t\t",286],"}",["T_WHITESPACE","\n\t\t\t",287],"}",["T_WHITESPACE","\n\n\t\t\t",288],["T_COMMENT","\/\/ Connect to the site via FTP\n",290],["T_WHITESPACE","\t\t\t",291],["T_VARIABLE","$connection",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_STRING","ftp_connect",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","config",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","get",291],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_hostname'",291],")",",",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","config",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","get",291],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_port'",291],")",")",";",["T_WHITESPACE","\n\n\t\t\t",291],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$connection",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n\t\t\t\t",293],["T_VARIABLE","$login",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","ftp_login",294],"(",["T_VARIABLE","$connection",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","config",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","get",294],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_username'",294],")",",",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","config",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","get",294],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_password'",294],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",294],["T_IF","if",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$login",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n\t\t\t\t\t",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","config",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","get",297],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_root'",297],")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",297],["T_VARIABLE","$root",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","ftp_chdir",298],"(",["T_VARIABLE","$connection",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","config",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","get",298],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_root'",298],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",298],"}",["T_WHITESPACE"," ",299],["T_ELSE","else",299],["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",299],["T_VARIABLE","$root",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","ftp_chdir",300],"(",["T_VARIABLE","$connection",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'\/'",300],")",";",["T_WHITESPACE","\n\t\t\t\t\t",300],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",301],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$root",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",303],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$files",304],["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$file",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",304],["T_VARIABLE","$destination",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","substr",305],"(",["T_VARIABLE","$file",305],",",["T_WHITESPACE"," ",305],["T_STRING","strlen",305],"(",["T_VARIABLE","$directory",305],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",305],["T_COMMENT","\/\/ Upload everything in the upload directory\n",307],["T_WHITESPACE","\t\t\t\t\t\t\t",308],["T_COMMENT","\/\/ Many people rename their admin folder for security purposes which I believe should be an option during installation just like setting the db prefix.\n",308],["T_WHITESPACE","\t\t\t\t\t\t\t",309],["T_COMMENT","\/\/ the following code would allow you to change the name of the following directories and any extensions installed will still go to the right directory.\n",309],["T_WHITESPACE","\t\t\t\t\t\t\t",310],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_STRING","substr",310],"(",["T_VARIABLE","$destination",310],",",["T_WHITESPACE"," ",310],["T_LNUMBER","0",310],",",["T_WHITESPACE"," ",310],["T_LNUMBER","5",310],")",["T_WHITESPACE"," ",310],["T_IS_EQUAL","==",310],["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'admin'",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",310],["T_VARIABLE","$destination",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","basename",311],"(",["T_STRING","DIR_APPLICATION",311],")",["T_WHITESPACE"," ",311],".",["T_WHITESPACE"," ",311],["T_STRING","substr",311],"(",["T_VARIABLE","$destination",311],",",["T_WHITESPACE"," ",311],["T_LNUMBER","5",311],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",311],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",312],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_STRING","substr",314],"(",["T_VARIABLE","$destination",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],",",["T_WHITESPACE"," ",314],["T_LNUMBER","7",314],")",["T_WHITESPACE"," ",314],["T_IS_EQUAL","==",314],["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'catalog'",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",314],["T_VARIABLE","$destination",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","basename",315],"(",["T_STRING","DIR_CATALOG",315],")",["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_STRING","substr",315],"(",["T_VARIABLE","$destination",315],",",["T_WHITESPACE"," ",315],["T_LNUMBER","7",315],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",315],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",316],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_STRING","substr",318],"(",["T_VARIABLE","$destination",318],",",["T_WHITESPACE"," ",318],["T_LNUMBER","0",318],",",["T_WHITESPACE"," ",318],["T_LNUMBER","5",318],")",["T_WHITESPACE"," ",318],["T_IS_EQUAL","==",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'image'",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",318],["T_VARIABLE","$destination",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING","basename",319],"(",["T_STRING","DIR_IMAGE",319],")",["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_STRING","substr",319],"(",["T_VARIABLE","$destination",319],",",["T_WHITESPACE"," ",319],["T_LNUMBER","5",319],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",319],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",320],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_STRING","substr",322],"(",["T_VARIABLE","$destination",322],",",["T_WHITESPACE"," ",322],["T_LNUMBER","0",322],",",["T_WHITESPACE"," ",322],["T_LNUMBER","6",322],")",["T_WHITESPACE"," ",322],["T_IS_EQUAL","==",322],["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'system'",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",322],["T_VARIABLE","$destination",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","basename",323],"(",["T_STRING","DIR_SYSTEM",323],")",["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_STRING","substr",323],"(",["T_VARIABLE","$destination",323],",",["T_WHITESPACE"," ",323],["T_LNUMBER","6",323],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",323],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",324],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_STRING","is_dir",326],"(",["T_VARIABLE","$file",326],")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",326],["T_VARIABLE","$lists",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_STRING","ftp_nlist",327],"(",["T_VARIABLE","$connection",327],",",["T_WHITESPACE"," ",327],["T_STRING","substr",327],"(",["T_VARIABLE","$destination",327],",",["T_WHITESPACE"," ",327],["T_LNUMBER","0",327],",",["T_WHITESPACE"," ",327],["T_STRING","strrpos",327],"(",["T_VARIABLE","$destination",327],",",["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","'\/'",327],")",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",327],["T_COMMENT","\/\/ Basename all the directories because on some servers they don't return the fulll paths.\n",329],["T_WHITESPACE","\t\t\t\t\t\t\t\t",330],["T_VARIABLE","$list_data",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",330],["T_FOREACH","foreach",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$lists",332],["T_WHITESPACE"," ",332],["T_AS","as",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$list",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",332],["T_VARIABLE","$list_data",333],"[","]",["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","basename",333],"(",["T_VARIABLE","$list",333],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",333],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",334],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_STRING","in_array",336],"(",["T_STRING","basename",336],"(",["T_VARIABLE","$destination",336],")",",",["T_WHITESPACE"," ",336],["T_VARIABLE","$list_data",336],")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(","!",["T_STRING","ftp_mkdir",337],"(",["T_VARIABLE","$connection",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$destination",337],")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t\t",337],["T_VARIABLE","$json",338],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","sprintf",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","language",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","get",338],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_directory'",338],")",",",["T_WHITESPACE"," ",338],["T_VARIABLE","$destination",338],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",338],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",339],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t",340],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_STRING","is_file",343],"(",["T_VARIABLE","$file",343],")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(","!",["T_STRING","ftp_put",344],"(",["T_VARIABLE","$connection",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$destination",344],",",["T_WHITESPACE"," ",344],["T_VARIABLE","$file",344],",",["T_WHITESPACE"," ",344],["T_STRING","FTP_BINARY",344],")",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",344],["T_VARIABLE","$json",345],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",345],"]",["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_STRING","sprintf",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","language",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","get",345],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_file'",345],")",",",["T_WHITESPACE"," ",345],["T_VARIABLE","$file",345],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",345],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t",346],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",347],"}",["T_WHITESPACE","\n\t\t\t\t\t",348],"}",["T_WHITESPACE"," ",349],["T_ELSE","else",349],["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",349],["T_VARIABLE","$json",350],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",350],"]",["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","sprintf",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","language",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","get",350],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_root'",350],")",",",["T_WHITESPACE"," ",350],["T_VARIABLE","$root",350],")",";",["T_WHITESPACE","\n\t\t\t\t\t",350],"}",["T_WHITESPACE","\n\t\t\t\t",351],"}",["T_WHITESPACE"," ",352],["T_ELSE","else",352],["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n\t\t\t\t\t",352],["T_VARIABLE","$json",353],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",353],"]",["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_STRING","sprintf",353],"(",["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","language",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","get",353],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_login'",353],")",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","config",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","get",353],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_username'",353],")",")",";",["T_WHITESPACE","\n\t\t\t\t",353],"}",["T_WHITESPACE","\n\n\t\t\t\t",354],["T_STRING","ftp_close",356],"(",["T_VARIABLE","$connection",356],")",";",["T_WHITESPACE","\n\t\t\t",356],"}",["T_WHITESPACE"," ",357],["T_ELSE","else",357],["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n\t\t\t\t",357],["T_VARIABLE","$json",358],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",358],"]",["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","sprintf",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","language",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"(",["T_CONSTANT_ENCAPSED_STRING","'error_ftp_connection'",358],")",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","config",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_hostname'",358],")",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","config",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"(",["T_CONSTANT_ENCAPSED_STRING","'config_ftp_port'",358],")",")",";",["T_WHITESPACE","\n\t\t\t",358],"}",["T_WHITESPACE","\n\t\t",359],"}",["T_WHITESPACE","\n\n\t\t",360],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","response",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","addHeader",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",362],")",";",["T_WHITESPACE","\n\t\t",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","response",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","setOutput",363],"(",["T_STRING","json_encode",363],"(",["T_VARIABLE","$json",363],")",")",";",["T_WHITESPACE","\n\t",363],"}",["T_WHITESPACE","\n\n\t",364],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","sql",366],"(",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n\t\t",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","load",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","language",367],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",367],")",";",["T_WHITESPACE","\n\n\t\t",367],["T_VARIABLE","$json",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_ARRAY","array",369],"(",")",";",["T_WHITESPACE","\n\n\t\t",369],["T_IF","if",371],["T_WHITESPACE"," ",371],"(","!",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","user",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","hasPermission",371],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",371],",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",371],")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n\t\t\t",371],["T_VARIABLE","$json",372],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",372],"]",["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","language",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","get",372],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",372],")",";",["T_WHITESPACE","\n\t\t",372],"}",["T_WHITESPACE","\n\n\t\t",373],["T_VARIABLE","$file",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","DIR_UPLOAD",375],["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","request",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","post",375],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",375],"]",["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'\/install.sql'",375],";",["T_WHITESPACE","\n\n\t\t",375],["T_IF","if",377],["T_WHITESPACE"," ",377],"(","!",["T_STRING","is_file",377],"(",["T_VARIABLE","$file",377],")",["T_WHITESPACE"," ",377],["T_BOOLEAN_OR","||",377],["T_WHITESPACE"," ",377],["T_STRING","substr",377],"(",["T_STRING","str_replace",377],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",377],",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'\/'",377],",",["T_WHITESPACE"," ",377],["T_STRING","realpath",377],"(",["T_VARIABLE","$file",377],")",")",",",["T_WHITESPACE"," ",377],["T_LNUMBER","0",377],",",["T_WHITESPACE"," ",377],["T_STRING","strlen",377],"(",["T_STRING","DIR_UPLOAD",377],")",")",["T_WHITESPACE"," ",377],["T_IS_NOT_EQUAL","!=",377],["T_WHITESPACE"," ",377],["T_STRING","DIR_UPLOAD",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n\t\t\t",377],["T_VARIABLE","$json",378],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",378],"]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","language",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","get",378],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",378],")",";",["T_WHITESPACE","\n\t\t",378],"}",["T_WHITESPACE","\n\n\t\t",379],["T_IF","if",381],["T_WHITESPACE"," ",381],"(","!",["T_VARIABLE","$json",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n\t\t\t",381],["T_VARIABLE","$lines",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","file",382],"(",["T_VARIABLE","$file",382],")",";",["T_WHITESPACE","\n\n\t\t\t",382],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$lines",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n\t\t\t\t",384],["T_TRY","try",385],["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n\t\t\t\t\t",385],["T_VARIABLE","$sql",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","''",386],";",["T_WHITESPACE","\n\n\t\t\t\t\t",386],["T_FOREACH","foreach",388],["T_WHITESPACE"," ",388],"(",["T_VARIABLE","$lines",388],["T_WHITESPACE"," ",388],["T_AS","as",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$line",388],")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",388],["T_IF","if",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$line",389],["T_WHITESPACE"," ",389],["T_BOOLEAN_AND","&&",389],["T_WHITESPACE"," ",389],"(",["T_STRING","substr",389],"(",["T_VARIABLE","$line",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","0",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","2",389],")",["T_WHITESPACE"," ",389],["T_IS_NOT_EQUAL","!=",389],["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'--'",389],")",["T_WHITESPACE"," ",389],["T_BOOLEAN_AND","&&",389],["T_WHITESPACE"," ",389],"(",["T_STRING","substr",389],"(",["T_VARIABLE","$line",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","0",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","1",389],")",["T_WHITESPACE"," ",389],["T_IS_NOT_EQUAL","!=",389],["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'#'",389],")",")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",389],["T_VARIABLE","$sql",390],["T_WHITESPACE"," ",390],["T_CONCAT_EQUAL",".=",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$line",390],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",390],["T_IF","if",392],["T_WHITESPACE"," ",392],"(",["T_STRING","preg_match",392],"(",["T_CONSTANT_ENCAPSED_STRING","'\/;\\s*$\/'",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$line",392],")",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",392],["T_VARIABLE","$sql",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_STRING","str_replace",393],"(",["T_CONSTANT_ENCAPSED_STRING","\" `oc_\"",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","\" `\"",393],["T_WHITESPACE"," ",393],".",["T_WHITESPACE"," ",393],["T_STRING","DB_PREFIX",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$sql",393],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",393],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","db",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","query",395],"(",["T_VARIABLE","$sql",395],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",395],["T_VARIABLE","$sql",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","''",397],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",397],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",398],"}",["T_WHITESPACE","\n\t\t\t\t\t",399],"}",["T_WHITESPACE","\n\t\t\t\t",400],"}",["T_WHITESPACE"," ",401],["T_CATCH","catch",401],"(",["T_STRING","Exception",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$exception",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n\t\t\t\t\t",401],["T_VARIABLE","$json",402],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",402],"]",["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_STRING","sprintf",402],"(",["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","language",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","get",402],"(",["T_CONSTANT_ENCAPSED_STRING","'error_exception'",402],")",",",["T_WHITESPACE"," ",402],["T_VARIABLE","$exception",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getCode",402],"(",")",",",["T_WHITESPACE"," ",402],["T_VARIABLE","$exception",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getMessage",402],"(",")",",",["T_WHITESPACE"," ",402],["T_VARIABLE","$exception",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getFile",402],"(",")",",",["T_WHITESPACE"," ",402],["T_VARIABLE","$exception",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getLine",402],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t",402],"}",["T_WHITESPACE","\n\t\t\t",403],"}",["T_WHITESPACE","\n\t\t",404],"}",["T_WHITESPACE","\n\n\t\t",405],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","response",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","addHeader",407],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",407],")",";",["T_WHITESPACE","\n\t\t",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","response",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","setOutput",408],"(",["T_STRING","json_encode",408],"(",["T_VARIABLE","$json",408],")",")",";",["T_WHITESPACE","\n\t",408],"}",["T_WHITESPACE","\n\n\t",409],["T_PUBLIC","public",411],["T_WHITESPACE"," ",411],["T_FUNCTION","function",411],["T_WHITESPACE"," ",411],["T_STRING","xml",411],"(",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n\t\t",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","load",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","language",412],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",412],")",";",["T_WHITESPACE","\n\n\t\t",412],["T_VARIABLE","$json",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",")",";",["T_WHITESPACE","\n\n\t\t",414],["T_IF","if",416],["T_WHITESPACE"," ",416],"(","!",["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","user",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","hasPermission",416],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",416],",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n\t\t\t",416],["T_VARIABLE","$json",417],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",417],"]",["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","language",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","get",417],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",417],")",";",["T_WHITESPACE","\n\t\t",417],"}",["T_WHITESPACE","\n\n\t\t",418],["T_VARIABLE","$file",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","DIR_UPLOAD",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","request",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","post",420],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",420],"]",["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'\/install.xml'",420],";",["T_WHITESPACE","\n\n\t\t",420],["T_IF","if",422],["T_WHITESPACE"," ",422],"(","!",["T_STRING","is_file",422],"(",["T_VARIABLE","$file",422],")",["T_WHITESPACE"," ",422],["T_BOOLEAN_OR","||",422],["T_WHITESPACE"," ",422],["T_STRING","substr",422],"(",["T_STRING","str_replace",422],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",422],",",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'\/'",422],",",["T_WHITESPACE"," ",422],["T_STRING","realpath",422],"(",["T_VARIABLE","$file",422],")",")",",",["T_WHITESPACE"," ",422],["T_LNUMBER","0",422],",",["T_WHITESPACE"," ",422],["T_STRING","strlen",422],"(",["T_STRING","DIR_UPLOAD",422],")",")",["T_WHITESPACE"," ",422],["T_IS_NOT_EQUAL","!=",422],["T_WHITESPACE"," ",422],["T_STRING","DIR_UPLOAD",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n\t\t\t",422],["T_VARIABLE","$json",423],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",423],"]",["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","language",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","get",423],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",423],")",";",["T_WHITESPACE","\n\t\t",423],"}",["T_WHITESPACE","\n\n\t\t",424],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_VARIABLE","$json",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n\t\t\t",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","load",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","model",427],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/modification'",427],")",";",["T_WHITESPACE","\n\n\t\t\t",427],["T_COMMENT","\/\/ If xml file just put it straight into the DB\n",429],["T_WHITESPACE","\t\t\t",430],["T_VARIABLE","$xml",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","file_get_contents",430],"(",["T_VARIABLE","$file",430],")",";",["T_WHITESPACE","\n\n\t\t\t",430],["T_IF","if",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$xml",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n\t\t\t\t",432],["T_TRY","try",433],["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\t\t\t\t\t",433],["T_VARIABLE","$dom",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_NEW","new",434],["T_WHITESPACE"," ",434],["T_STRING","DOMDocument",434],"(",["T_CONSTANT_ENCAPSED_STRING","'1.0'",434],",",["T_WHITESPACE"," ",434],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",434],")",";",["T_WHITESPACE","\n\t\t\t\t\t",434],["T_VARIABLE","$dom",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","loadXml",435],"(",["T_VARIABLE","$xml",435],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",435],["T_VARIABLE","$name",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$dom",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getElementsByTagName",437],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",437],")",["T_OBJECT_OPERATOR","->",437],["T_STRING","item",437],"(",["T_LNUMBER","0",437],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",437],["T_IF","if",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$name",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",439],["T_VARIABLE","$name",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$name",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","nodeValue",440],";",["T_WHITESPACE","\n\t\t\t\t\t",440],"}",["T_WHITESPACE"," ",441],["T_ELSE","else",441],["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",441],["T_VARIABLE","$name",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","''",442],";",["T_WHITESPACE","\n\t\t\t\t\t",442],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",443],["T_VARIABLE","$code",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$dom",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","getElementsByTagName",445],"(",["T_CONSTANT_ENCAPSED_STRING","'code'",445],")",["T_OBJECT_OPERATOR","->",445],["T_STRING","item",445],"(",["T_LNUMBER","0",445],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",445],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_VARIABLE","$code",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",447],["T_VARIABLE","$code",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$code",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","nodeValue",448],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",448],["T_COMMENT","\/\/ Check to see if the modification is already installed or not.\n",450],["T_WHITESPACE","\t\t\t\t\t\t",451],["T_VARIABLE","$modification_info",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","model_extension_modification",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getModificationByCode",451],"(",["T_VARIABLE","$code",451],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",451],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$modification_info",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",453],["T_VARIABLE","$json",454],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",454],"]",["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","sprintf",454],"(",["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","language",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","get",454],"(",["T_CONSTANT_ENCAPSED_STRING","'error_exists'",454],")",",",["T_WHITESPACE"," ",454],["T_VARIABLE","$modification_info",454],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",454],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",454],"}",["T_WHITESPACE","\n\t\t\t\t\t",455],"}",["T_WHITESPACE"," ",456],["T_ELSE","else",456],["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",456],["T_VARIABLE","$json",457],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",457],"]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","language",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","get",457],"(",["T_CONSTANT_ENCAPSED_STRING","'error_code'",457],")",";",["T_WHITESPACE","\n\t\t\t\t\t",457],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",458],["T_VARIABLE","$author",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_VARIABLE","$dom",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getElementsByTagName",460],"(",["T_CONSTANT_ENCAPSED_STRING","'author'",460],")",["T_OBJECT_OPERATOR","->",460],["T_STRING","item",460],"(",["T_LNUMBER","0",460],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",460],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$author",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",462],["T_VARIABLE","$author",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$author",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","nodeValue",463],";",["T_WHITESPACE","\n\t\t\t\t\t",463],"}",["T_WHITESPACE"," ",464],["T_ELSE","else",464],["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",464],["T_VARIABLE","$author",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","''",465],";",["T_WHITESPACE","\n\t\t\t\t\t",465],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",466],["T_VARIABLE","$version",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_VARIABLE","$dom",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","getElementsByTagName",468],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",468],")",["T_OBJECT_OPERATOR","->",468],["T_STRING","item",468],"(",["T_LNUMBER","0",468],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",468],["T_IF","if",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$version",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",470],["T_VARIABLE","$version",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$version",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","nodeValue",471],";",["T_WHITESPACE","\n\t\t\t\t\t",471],"}",["T_WHITESPACE"," ",472],["T_ELSE","else",472],["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",472],["T_VARIABLE","$version",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","''",473],";",["T_WHITESPACE","\n\t\t\t\t\t",473],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",474],["T_VARIABLE","$link",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$dom",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getElementsByTagName",476],"(",["T_CONSTANT_ENCAPSED_STRING","'link'",476],")",["T_OBJECT_OPERATOR","->",476],["T_STRING","item",476],"(",["T_LNUMBER","0",476],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",476],["T_IF","if",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$link",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",478],["T_VARIABLE","$link",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_VARIABLE","$link",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","nodeValue",479],";",["T_WHITESPACE","\n\t\t\t\t\t",479],"}",["T_WHITESPACE"," ",480],["T_ELSE","else",480],["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",480],["T_VARIABLE","$link",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","''",481],";",["T_WHITESPACE","\n\t\t\t\t\t",481],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",482],["T_VARIABLE","$modification_data",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_ARRAY","array",484],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",484],["T_CONSTANT_ENCAPSED_STRING","'name'",485],["T_WHITESPACE","    ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$name",485],",",["T_WHITESPACE","\n\t\t\t\t\t\t",485],["T_CONSTANT_ENCAPSED_STRING","'code'",486],["T_WHITESPACE","    ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$code",486],",",["T_WHITESPACE","\n\t\t\t\t\t\t",486],["T_CONSTANT_ENCAPSED_STRING","'author'",487],["T_WHITESPACE","  ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$author",487],",",["T_WHITESPACE","\n\t\t\t\t\t\t",487],["T_CONSTANT_ENCAPSED_STRING","'version'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$version",488],",",["T_WHITESPACE","\n\t\t\t\t\t\t",488],["T_CONSTANT_ENCAPSED_STRING","'link'",489],["T_WHITESPACE","    ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$link",489],",",["T_WHITESPACE","\n\t\t\t\t\t\t",489],["T_CONSTANT_ENCAPSED_STRING","'xml'",490],["T_WHITESPACE","     ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$xml",490],",",["T_WHITESPACE","\n\t\t\t\t\t\t",490],["T_CONSTANT_ENCAPSED_STRING","'status'",491],["T_WHITESPACE","  ",491],["T_DOUBLE_ARROW","=>",491],["T_WHITESPACE"," ",491],["T_LNUMBER","1",491],["T_WHITESPACE","\n\t\t\t\t\t",491],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",492],["T_IF","if",494],["T_WHITESPACE"," ",494],"(","!",["T_VARIABLE","$json",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",494],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","model_extension_modification",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","addModification",495],"(",["T_VARIABLE","$modification_data",495],")",";",["T_WHITESPACE","\n\t\t\t\t\t",495],"}",["T_WHITESPACE","\n\t\t\t\t",496],"}",["T_WHITESPACE"," ",497],["T_CATCH","catch",497],"(",["T_STRING","Exception",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$exception",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n\t\t\t\t\t",497],["T_VARIABLE","$json",498],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",498],"]",["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_STRING","sprintf",498],"(",["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","language",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","get",498],"(",["T_CONSTANT_ENCAPSED_STRING","'error_exception'",498],")",",",["T_WHITESPACE"," ",498],["T_VARIABLE","$exception",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getCode",498],"(",")",",",["T_WHITESPACE"," ",498],["T_VARIABLE","$exception",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getMessage",498],"(",")",",",["T_WHITESPACE"," ",498],["T_VARIABLE","$exception",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getFile",498],"(",")",",",["T_WHITESPACE"," ",498],["T_VARIABLE","$exception",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","getLine",498],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t",498],"}",["T_WHITESPACE","\n\t\t\t",499],"}",["T_WHITESPACE","\n\t\t",500],"}",["T_WHITESPACE","\n\n\t\t",501],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","response",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","addHeader",503],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",503],")",";",["T_WHITESPACE","\n\t\t",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","response",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","setOutput",504],"(",["T_STRING","json_encode",504],"(",["T_VARIABLE","$json",504],")",")",";",["T_WHITESPACE","\n\t",504],"}",["T_WHITESPACE","\n\n\t",505],["T_PUBLIC","public",507],["T_WHITESPACE"," ",507],["T_FUNCTION","function",507],["T_WHITESPACE"," ",507],["T_STRING","php",507],"(",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n\t\t",507],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","load",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","language",508],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",508],")",";",["T_WHITESPACE","\n\n\t\t",508],["T_VARIABLE","$json",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_ARRAY","array",510],"(",")",";",["T_WHITESPACE","\n\n\t\t",510],["T_IF","if",512],["T_WHITESPACE"," ",512],"(","!",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","user",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","hasPermission",512],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",512],",",["T_WHITESPACE"," ",512],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",512],")",")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n\t\t\t",512],["T_VARIABLE","$json",513],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",513],"]",["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","language",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","get",513],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",513],")",";",["T_WHITESPACE","\n\t\t",513],"}",["T_WHITESPACE","\n\n\t\t",514],["T_VARIABLE","$file",516],["T_WHITESPACE"," ",516],"=",["T_WHITESPACE"," ",516],["T_STRING","DIR_UPLOAD",516],["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","request",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","post",516],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",516],"]",["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'\/install.php'",516],";",["T_WHITESPACE","\n\n\t\t",516],["T_IF","if",518],["T_WHITESPACE"," ",518],"(","!",["T_STRING","is_file",518],"(",["T_VARIABLE","$file",518],")",["T_WHITESPACE"," ",518],["T_BOOLEAN_OR","||",518],["T_WHITESPACE"," ",518],["T_STRING","substr",518],"(",["T_STRING","str_replace",518],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",518],",",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'\/'",518],",",["T_WHITESPACE"," ",518],["T_STRING","realpath",518],"(",["T_VARIABLE","$file",518],")",")",",",["T_WHITESPACE"," ",518],["T_LNUMBER","0",518],",",["T_WHITESPACE"," ",518],["T_STRING","strlen",518],"(",["T_STRING","DIR_UPLOAD",518],")",")",["T_WHITESPACE"," ",518],["T_IS_NOT_EQUAL","!=",518],["T_WHITESPACE"," ",518],["T_STRING","DIR_UPLOAD",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n\t\t\t",518],["T_VARIABLE","$json",519],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",519],"]",["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","language",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","get",519],"(",["T_CONSTANT_ENCAPSED_STRING","'error_file'",519],")",";",["T_WHITESPACE","\n\t\t",519],"}",["T_WHITESPACE","\n\n\t\t",520],["T_IF","if",522],["T_WHITESPACE"," ",522],"(","!",["T_VARIABLE","$json",522],")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n\t\t\t",522],["T_TRY","try",523],["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n\t\t\t\t",523],["T_INCLUDE","include",524],"(",["T_VARIABLE","$file",524],")",";",["T_WHITESPACE","\n\t\t\t",524],"}",["T_WHITESPACE"," ",525],["T_CATCH","catch",525],"(",["T_STRING","Exception",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$exception",525],")",["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n\t\t\t\t",525],["T_VARIABLE","$json",526],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",526],"]",["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_STRING","sprintf",526],"(",["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","language",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","get",526],"(",["T_CONSTANT_ENCAPSED_STRING","'error_exception'",526],")",",",["T_WHITESPACE"," ",526],["T_VARIABLE","$exception",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getCode",526],"(",")",",",["T_WHITESPACE"," ",526],["T_VARIABLE","$exception",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getMessage",526],"(",")",",",["T_WHITESPACE"," ",526],["T_VARIABLE","$exception",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getFile",526],"(",")",",",["T_WHITESPACE"," ",526],["T_VARIABLE","$exception",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getLine",526],"(",")",")",";",["T_WHITESPACE","\n\t\t\t",526],"}",["T_WHITESPACE","\n\t\t",527],"}",["T_WHITESPACE","\n\n\t\t",528],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","response",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","addHeader",530],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",530],")",";",["T_WHITESPACE","\n\t\t",530],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","response",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","setOutput",531],"(",["T_STRING","json_encode",531],"(",["T_VARIABLE","$json",531],")",")",";",["T_WHITESPACE","\n\t",531],"}",["T_WHITESPACE","\n\n\t",532],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","remove",534],"(",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n\t\t",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","load",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","language",535],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",535],")",";",["T_WHITESPACE","\n\n\t\t",535],["T_VARIABLE","$json",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_ARRAY","array",537],"(",")",";",["T_WHITESPACE","\n\n\t\t",537],["T_IF","if",539],["T_WHITESPACE"," ",539],"(","!",["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","user",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","hasPermission",539],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",539],",",["T_WHITESPACE"," ",539],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",539],")",")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n\t\t\t",539],["T_VARIABLE","$json",540],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",540],"]",["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","language",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","get",540],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",540],")",";",["T_WHITESPACE","\n\t\t",540],"}",["T_WHITESPACE","\n\n\t\t",541],["T_VARIABLE","$directory",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_STRING","DIR_UPLOAD",543],["T_WHITESPACE"," ",543],".",["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","request",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","post",543],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",543],"]",";",["T_WHITESPACE","\n\t\t\n\t\t",543],["T_IF","if",545],["T_WHITESPACE"," ",545],"(","!",["T_STRING","is_dir",545],"(",["T_VARIABLE","$directory",545],")",["T_WHITESPACE"," ",545],["T_BOOLEAN_OR","||",545],["T_WHITESPACE"," ",545],["T_STRING","substr",545],"(",["T_STRING","str_replace",545],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",545],",",["T_WHITESPACE"," ",545],["T_CONSTANT_ENCAPSED_STRING","'\/'",545],",",["T_WHITESPACE"," ",545],["T_STRING","realpath",545],"(",["T_VARIABLE","$directory",545],")",")",",",["T_WHITESPACE"," ",545],["T_LNUMBER","0",545],",",["T_WHITESPACE"," ",545],["T_STRING","strlen",545],"(",["T_STRING","DIR_UPLOAD",545],")",")",["T_WHITESPACE"," ",545],["T_IS_NOT_EQUAL","!=",545],["T_WHITESPACE"," ",545],["T_STRING","DIR_UPLOAD",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n\t\t\t",545],["T_VARIABLE","$json",546],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",546],"]",["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","language",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","get",546],"(",["T_CONSTANT_ENCAPSED_STRING","'error_directory'",546],")",";",["T_WHITESPACE","\n\t\t",546],"}",["T_WHITESPACE","\n\n\t\t",547],["T_IF","if",549],["T_WHITESPACE"," ",549],"(","!",["T_VARIABLE","$json",549],")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n\t\t\t",549],["T_COMMENT","\/\/ Get a list of files ready to upload\n",550],["T_WHITESPACE","\t\t\t",551],["T_VARIABLE","$files",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_ARRAY","array",551],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",551],["T_VARIABLE","$path",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_ARRAY","array",553],"(",["T_VARIABLE","$directory",553],")",";",["T_WHITESPACE","\n\n\t\t\t",553],["T_WHILE","while",555],["T_WHITESPACE"," ",555],"(",["T_STRING","count",555],"(",["T_VARIABLE","$path",555],")",["T_WHITESPACE"," ",555],["T_IS_NOT_EQUAL","!=",555],["T_WHITESPACE"," ",555],["T_LNUMBER","0",555],")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n\t\t\t\t",555],["T_VARIABLE","$next",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_STRING","array_shift",556],"(",["T_VARIABLE","$path",556],")",";",["T_WHITESPACE","\n\n\t\t\t\t",556],["T_COMMENT","\/\/ We have to use scandir function because glob will not pick up dot files.\n",558],["T_WHITESPACE","\t\t\t\t",559],["T_FOREACH","foreach",559],["T_WHITESPACE"," ",559],"(",["T_STRING","array_diff",559],"(",["T_STRING","scandir",559],"(",["T_VARIABLE","$next",559],")",",",["T_WHITESPACE"," ",559],["T_ARRAY","array",559],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",559],",",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'..'",559],")",")",["T_WHITESPACE"," ",559],["T_AS","as",559],["T_WHITESPACE"," ",559],["T_VARIABLE","$file",559],")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n\t\t\t\t\t",559],["T_VARIABLE","$file",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$next",560],["T_WHITESPACE"," ",560],".",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","'\/'",560],["T_WHITESPACE"," ",560],".",["T_WHITESPACE"," ",560],["T_VARIABLE","$file",560],";",["T_WHITESPACE","\n\n\t\t\t\t\t",560],["T_IF","if",562],["T_WHITESPACE"," ",562],"(",["T_STRING","is_dir",562],"(",["T_VARIABLE","$file",562],")",")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",562],["T_VARIABLE","$path",563],"[","]",["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$file",563],";",["T_WHITESPACE","\n\t\t\t\t\t",563],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",564],["T_VARIABLE","$files",566],"[","]",["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$file",566],";",["T_WHITESPACE","\n\t\t\t\t",566],"}",["T_WHITESPACE","\n\t\t\t",567],"}",["T_WHITESPACE","\n\n\t\t\t",568],["T_STRING","rsort",570],"(",["T_VARIABLE","$files",570],")",";",["T_WHITESPACE","\n\n\t\t\t",570],["T_FOREACH","foreach",572],["T_WHITESPACE"," ",572],"(",["T_VARIABLE","$files",572],["T_WHITESPACE"," ",572],["T_AS","as",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$file",572],")",["T_WHITESPACE"," ",572],"{",["T_WHITESPACE","\n\t\t\t\t",572],["T_IF","if",573],["T_WHITESPACE"," ",573],"(",["T_STRING","is_file",573],"(",["T_VARIABLE","$file",573],")",")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n\t\t\t\t\t",573],["T_STRING","unlink",574],"(",["T_VARIABLE","$file",574],")",";",["T_WHITESPACE","\n\n\t\t\t\t",574],"}",["T_WHITESPACE"," ",576],["T_ELSEIF","elseif",576],["T_WHITESPACE"," ",576],"(",["T_STRING","is_dir",576],"(",["T_VARIABLE","$file",576],")",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n\t\t\t\t\t",576],["T_STRING","rmdir",577],"(",["T_VARIABLE","$file",577],")",";",["T_WHITESPACE","\n\t\t\t\t",577],"}",["T_WHITESPACE","\n\t\t\t",578],"}",["T_WHITESPACE","\n\n\t\t\t",579],["T_IF","if",581],["T_WHITESPACE"," ",581],"(",["T_STRING","file_exists",581],"(",["T_VARIABLE","$directory",581],")",")",["T_WHITESPACE"," ",581],"{",["T_WHITESPACE","\n\t\t\t\t",581],["T_STRING","rmdir",582],"(",["T_VARIABLE","$directory",582],")",";",["T_WHITESPACE","\n\t\t\t",582],"}",["T_WHITESPACE","\n\n\t\t\t",583],["T_VARIABLE","$json",585],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",585],"]",["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","language",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","get",585],"(",["T_CONSTANT_ENCAPSED_STRING","'text_success'",585],")",";",["T_WHITESPACE","\n\t\t",585],"}",["T_WHITESPACE","\n\n\t\t",586],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","response",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","addHeader",588],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",588],")",";",["T_WHITESPACE","\n\t\t",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","response",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","setOutput",589],"(",["T_STRING","json_encode",589],"(",["T_VARIABLE","$json",589],")",")",";",["T_WHITESPACE","\n\t",589],"}",["T_WHITESPACE","\n\n\t",590],["T_PUBLIC","public",592],["T_WHITESPACE"," ",592],["T_FUNCTION","function",592],["T_WHITESPACE"," ",592],["T_STRING","clear",592],"(",")",["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n\t\t",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","load",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","language",593],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",593],")",";",["T_WHITESPACE","\n\n\t\t",593],["T_VARIABLE","$json",595],["T_WHITESPACE"," ",595],"=",["T_WHITESPACE"," ",595],["T_ARRAY","array",595],"(",")",";",["T_WHITESPACE","\n\n\t\t",595],["T_IF","if",597],["T_WHITESPACE"," ",597],"(","!",["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","user",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","hasPermission",597],"(",["T_CONSTANT_ENCAPSED_STRING","'modify'",597],",",["T_WHITESPACE"," ",597],["T_CONSTANT_ENCAPSED_STRING","'extension\/installer'",597],")",")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n\t\t\t",597],["T_VARIABLE","$json",598],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",598],"]",["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","language",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","get",598],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",598],")",";",["T_WHITESPACE","\n\t\t",598],"}",["T_WHITESPACE","\n\n\t\t",599],["T_IF","if",601],["T_WHITESPACE"," ",601],"(","!",["T_VARIABLE","$json",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n\t\t\t",601],["T_VARIABLE","$directories",602],["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_STRING","glob",602],"(",["T_STRING","DIR_UPLOAD",602],["T_WHITESPACE"," ",602],".",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","'temp-*'",602],",",["T_WHITESPACE"," ",602],["T_STRING","GLOB_ONLYDIR",602],")",";",["T_WHITESPACE","\n\n\t\t\t",602],["T_IF","if",604],["T_WHITESPACE"," ",604],"(",["T_VARIABLE","$directories",604],")",["T_WHITESPACE"," ",604],"{",["T_WHITESPACE","\n\t\t\t\t",604],["T_FOREACH","foreach",605],["T_WHITESPACE"," ",605],"(",["T_VARIABLE","$directories",605],["T_WHITESPACE"," ",605],["T_AS","as",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$directory",605],")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n\t\t\t\t\t",605],["T_COMMENT","\/\/ Get a list of files ready to upload\n",606],["T_WHITESPACE","\t\t\t\t\t",607],["T_VARIABLE","$files",607],["T_WHITESPACE"," ",607],"=",["T_WHITESPACE"," ",607],["T_ARRAY","array",607],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",607],["T_VARIABLE","$path",609],["T_WHITESPACE"," ",609],"=",["T_WHITESPACE"," ",609],["T_ARRAY","array",609],"(",["T_VARIABLE","$directory",609],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",609],["T_WHILE","while",611],["T_WHITESPACE"," ",611],"(",["T_STRING","count",611],"(",["T_VARIABLE","$path",611],")",["T_WHITESPACE"," ",611],["T_IS_NOT_EQUAL","!=",611],["T_WHITESPACE"," ",611],["T_LNUMBER","0",611],")",["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",611],["T_VARIABLE","$next",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_STRING","array_shift",612],"(",["T_VARIABLE","$path",612],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",612],["T_COMMENT","\/\/ We have to use scandir function because glob will not pick up dot files.\n",614],["T_WHITESPACE","\t\t\t\t\t\t",615],["T_FOREACH","foreach",615],["T_WHITESPACE"," ",615],"(",["T_STRING","array_diff",615],"(",["T_STRING","scandir",615],"(",["T_VARIABLE","$next",615],")",",",["T_WHITESPACE"," ",615],["T_ARRAY","array",615],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",615],",",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'..'",615],")",")",["T_WHITESPACE"," ",615],["T_AS","as",615],["T_WHITESPACE"," ",615],["T_VARIABLE","$file",615],")",["T_WHITESPACE"," ",615],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",615],["T_VARIABLE","$file",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$next",616],["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'\/'",616],["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_VARIABLE","$file",616],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",616],["T_IF","if",618],["T_WHITESPACE"," ",618],"(",["T_STRING","is_dir",618],"(",["T_VARIABLE","$file",618],")",")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",618],["T_VARIABLE","$path",619],"[","]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_VARIABLE","$file",619],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",619],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",620],["T_VARIABLE","$files",622],"[","]",["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],["T_VARIABLE","$file",622],";",["T_WHITESPACE","\n\t\t\t\t\t\t",622],"}",["T_WHITESPACE","\n\t\t\t\t\t",623],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",624],["T_STRING","rsort",626],"(",["T_VARIABLE","$files",626],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",626],["T_FOREACH","foreach",628],["T_WHITESPACE"," ",628],"(",["T_VARIABLE","$files",628],["T_WHITESPACE"," ",628],["T_AS","as",628],["T_WHITESPACE"," ",628],["T_VARIABLE","$file",628],")",["T_WHITESPACE"," ",628],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",628],["T_IF","if",629],["T_WHITESPACE"," ",629],"(",["T_STRING","is_file",629],"(",["T_VARIABLE","$file",629],")",")",["T_WHITESPACE"," ",629],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",629],["T_STRING","unlink",630],"(",["T_VARIABLE","$file",630],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",630],"}",["T_WHITESPACE"," ",631],["T_ELSEIF","elseif",631],["T_WHITESPACE"," ",631],"(",["T_STRING","is_dir",631],"(",["T_VARIABLE","$file",631],")",")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",631],["T_STRING","rmdir",632],"(",["T_VARIABLE","$file",632],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",632],"}",["T_WHITESPACE","\n\t\t\t\t\t",633],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",634],["T_IF","if",636],["T_WHITESPACE"," ",636],"(",["T_STRING","file_exists",636],"(",["T_VARIABLE","$directory",636],")",")",["T_WHITESPACE"," ",636],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",636],["T_STRING","rmdir",637],"(",["T_VARIABLE","$directory",637],")",";",["T_WHITESPACE","\n\t\t\t\t\t",637],"}",["T_WHITESPACE","\n\t\t\t\t",638],"}",["T_WHITESPACE","\n\t\t\t",639],"}",["T_WHITESPACE","\n\n\t\t\t",640],["T_VARIABLE","$json",642],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",642],"]",["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","language",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","get",642],"(",["T_CONSTANT_ENCAPSED_STRING","'text_clear'",642],")",";",["T_WHITESPACE","\n\t\t",642],"}",["T_WHITESPACE","\n\n\t\t",643],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","response",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","addHeader",645],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",645],")",";",["T_WHITESPACE","\n\t\t",645],["T_VARIABLE","$this",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","response",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","setOutput",646],"(",["T_STRING","json_encode",646],"(",["T_VARIABLE","$json",646],")",")",";",["T_WHITESPACE","\n\t",646],"}",["T_WHITESPACE","\n",647],"}"]
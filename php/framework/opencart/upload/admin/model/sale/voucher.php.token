[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelSaleVoucher",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","addVoucher",3],"(",["T_VARIABLE","$data",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"voucher SET code = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', from_name = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', from_email = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'from_email'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', to_name = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'to_name'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', to_email = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'to_email'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', voucher_theme_id = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'voucher_theme_id'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', message = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', amount = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_DOUBLE_CAST","(float)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', status = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', date_added = NOW()\"",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_RETURN","return",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","getLastId",6],"(",")",";",["T_WHITESPACE","\n\t",6],"}",["T_WHITESPACE","\n\n\t",7],["T_PUBLIC","public",9],["T_WHITESPACE"," ",9],["T_FUNCTION","function",9],["T_WHITESPACE"," ",9],["T_STRING","editVoucher",9],"(",["T_VARIABLE","$voucher_id",9],",",["T_WHITESPACE"," ",9],["T_VARIABLE","$data",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t",9],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","query",10],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_STRING","DB_PREFIX",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"voucher SET code = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', from_name = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', from_email = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'from_email'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', to_name = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'to_name'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', to_email = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'to_email'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', voucher_theme_id = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'voucher_theme_id'",10],"]",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', message = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",10],"]",")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', amount = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_DOUBLE_CAST","(float)",10],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",10],"]",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', status = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",10],"]",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE voucher_id = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$voucher_id",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"'\"",10],")",";",["T_WHITESPACE","\n\t",10],"}",["T_WHITESPACE","\n\n\t",11],["T_PUBLIC","public",13],["T_WHITESPACE"," ",13],["T_FUNCTION","function",13],["T_WHITESPACE"," ",13],["T_STRING","deleteVoucher",13],"(",["T_VARIABLE","$voucher_id",13],")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\t\t",13],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","db",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","query",14],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",14],["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_STRING","DB_PREFIX",14],["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","\"voucher WHERE voucher_id = '\"",14],["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_INT_CAST","(int)",14],["T_VARIABLE","$voucher_id",14],["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","\"'\"",14],")",";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","query",15],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_STRING","DB_PREFIX",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"voucher_history WHERE voucher_id = '\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_INT_CAST","(int)",15],["T_VARIABLE","$voucher_id",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"'\"",15],")",";",["T_WHITESPACE","\n\t",15],"}",["T_WHITESPACE","\n\n\t",16],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","getVoucher",18],"(",["T_VARIABLE","$voucher_id",18],")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\t\t",18],["T_VARIABLE","$query",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","db",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","query",19],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM \"",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_STRING","DB_PREFIX",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"voucher WHERE voucher_id = '\"",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_INT_CAST","(int)",19],["T_VARIABLE","$voucher_id",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"'\"",19],")",";",["T_WHITESPACE","\n\n\t\t",19],["T_RETURN","return",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$query",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","row",21],";",["T_WHITESPACE","\n\t",21],"}",["T_WHITESPACE","\n\n\t",22],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","getVoucherByCode",24],"(",["T_VARIABLE","$code",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t",24],["T_VARIABLE","$query",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","query",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM \"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_STRING","DB_PREFIX",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"voucher WHERE code = '\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","escape",25],"(",["T_VARIABLE","$code",25],")",["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"'\"",25],")",";",["T_WHITESPACE","\n\n\t\t",25],["T_RETURN","return",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$query",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","row",27],";",["T_WHITESPACE","\n\t",27],"}",["T_WHITESPACE","\n\n\t",28],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","getVouchers",30],"(",["T_VARIABLE","$data",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",")",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t",30],["T_VARIABLE","$sql",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"SELECT v.voucher_id, v.order_id, v.code, v.from_name, v.from_email, v.to_name, v.to_email, (SELECT vtd.name FROM \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"voucher_theme_description vtd WHERE vtd.voucher_theme_id = v.voucher_theme_id AND vtd.language_id = '\"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_INT_CAST","(int)",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","config",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","get",31],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",31],")",["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"') AS theme, v.amount, v.status, v.date_added FROM \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"voucher v\"",31],";",["T_WHITESPACE","\n\n\t\t",31],["T_VARIABLE","$sort_data",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_WHITESPACE","\n\t\t\t",33],["T_CONSTANT_ENCAPSED_STRING","'v.code'",34],",",["T_WHITESPACE","\n\t\t\t",34],["T_CONSTANT_ENCAPSED_STRING","'v.from_name'",35],",",["T_WHITESPACE","\n\t\t\t",35],["T_CONSTANT_ENCAPSED_STRING","'v.to_name'",36],",",["T_WHITESPACE","\n\t\t\t",36],["T_CONSTANT_ENCAPSED_STRING","'theme'",37],",",["T_WHITESPACE","\n\t\t\t",37],["T_CONSTANT_ENCAPSED_STRING","'v.amount'",38],",",["T_WHITESPACE","\n\t\t\t",38],["T_CONSTANT_ENCAPSED_STRING","'v.status'",39],",",["T_WHITESPACE","\n\t\t\t",39],["T_CONSTANT_ENCAPSED_STRING","'v.date_added'",40],["T_WHITESPACE","\n\t\t",40],")",";",["T_WHITESPACE","\n\n\t\t",41],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_ISSET","isset",43],"(",["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",43],"]",")",["T_WHITESPACE"," ",43],["T_BOOLEAN_AND","&&",43],["T_WHITESPACE"," ",43],["T_STRING","in_array",43],"(",["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",43],"]",",",["T_WHITESPACE"," ",43],["T_VARIABLE","$sort_data",43],")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n\t\t\t",43],["T_VARIABLE","$sql",44],["T_WHITESPACE"," ",44],["T_CONCAT_EQUAL",".=",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","\" ORDER BY \"",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_VARIABLE","$data",44],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",44],"]",";",["T_WHITESPACE","\n\t\t",44],"}",["T_WHITESPACE"," ",45],["T_ELSE","else",45],["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t\t",45],["T_VARIABLE","$sql",46],["T_WHITESPACE"," ",46],["T_CONCAT_EQUAL",".=",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\" ORDER BY v.date_added\"",46],";",["T_WHITESPACE","\n\t\t",46],"}",["T_WHITESPACE","\n\n\t\t",47],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_ISSET","isset",49],"(",["T_VARIABLE","$data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",49],"]",")",["T_WHITESPACE"," ",49],["T_BOOLEAN_AND","&&",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",49],"]",["T_WHITESPACE"," ",49],["T_IS_EQUAL","==",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'DESC'",49],")",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\t\t\t",49],["T_VARIABLE","$sql",50],["T_WHITESPACE"," ",50],["T_CONCAT_EQUAL",".=",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\" DESC\"",50],";",["T_WHITESPACE","\n\t\t",50],"}",["T_WHITESPACE"," ",51],["T_ELSE","else",51],["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t\t",51],["T_VARIABLE","$sql",52],["T_WHITESPACE"," ",52],["T_CONCAT_EQUAL",".=",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\" ASC\"",52],";",["T_WHITESPACE","\n\t\t",52],"}",["T_WHITESPACE","\n\n\t\t",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_ISSET","isset",55],"(",["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",55],"]",")",["T_WHITESPACE"," ",55],["T_BOOLEAN_OR","||",55],["T_WHITESPACE"," ",55],["T_ISSET","isset",55],"(",["T_VARIABLE","$data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",55],"]",")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n\t\t\t",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$data",56],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",56],"]",["T_WHITESPACE"," ",56],"<",["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t\t\t",56],["T_VARIABLE","$data",57],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],";",["T_WHITESPACE","\n\t\t\t",57],"}",["T_WHITESPACE","\n\n\t\t\t",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$data",60],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",60],"]",["T_WHITESPACE"," ",60],"<",["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n\t\t\t\t",60],["T_VARIABLE","$data",61],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_LNUMBER","20",61],";",["T_WHITESPACE","\n\t\t\t",61],"}",["T_WHITESPACE","\n\n\t\t\t",62],["T_VARIABLE","$sql",64],["T_WHITESPACE"," ",64],["T_CONCAT_EQUAL",".=",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT \"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_INT_CAST","(int)",64],["T_VARIABLE","$data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",64],"]",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\",\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_INT_CAST","(int)",64],["T_VARIABLE","$data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",64],"]",";",["T_WHITESPACE","\n\t\t",64],"}",["T_WHITESPACE","\n\n\t\t",65],["T_VARIABLE","$query",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","db",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","query",67],"(",["T_VARIABLE","$sql",67],")",";",["T_WHITESPACE","\n\n\t\t",67],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$query",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","rows",69],";",["T_WHITESPACE","\n\t",69],"}",["T_WHITESPACE","\n\n\t",70],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","sendVoucher",72],"(",["T_VARIABLE","$voucher_id",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t",72],["T_VARIABLE","$voucher_info",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getVoucher",73],"(",["T_VARIABLE","$voucher_id",73],")",";",["T_WHITESPACE","\n\n\t\t",73],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$voucher_info",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n\t\t\t",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$voucher_info",76],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",76],"]",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t\t",76],["T_VARIABLE","$order_id",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$voucher_info",77],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",77],"]",";",["T_WHITESPACE","\n\t\t\t",77],"}",["T_WHITESPACE"," ",78],["T_ELSE","else",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n\t\t\t\t",78],["T_VARIABLE","$order_id",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],";",["T_WHITESPACE","\n\t\t\t",79],"}",["T_WHITESPACE","\n\n\t\t\t",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","load",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","model",82],"(",["T_CONSTANT_ENCAPSED_STRING","'sale\/order'",82],")",";",["T_WHITESPACE","\n\n\t\t\t",82],["T_VARIABLE","$order_info",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","model_sale_order",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getOrder",84],"(",["T_VARIABLE","$order_id",84],")",";",["T_WHITESPACE","\n\n\t\t\t",84],["T_COMMENT","\/\/ If voucher belongs to an order\n",86],["T_WHITESPACE","\t\t\t",87],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$order_info",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t\t\t",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","load",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","model",88],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/language'",88],")",";",["T_WHITESPACE","\n\n\t\t\t\t",88],["T_VARIABLE","$language",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_NEW","new",90],["T_WHITESPACE"," ",90],["T_STRING","Language",90],"(",["T_VARIABLE","$order_info",90],"[",["T_CONSTANT_ENCAPSED_STRING","'language_code'",90],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",90],["T_VARIABLE","$language",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","load",91],"(",["T_VARIABLE","$order_info",91],"[",["T_CONSTANT_ENCAPSED_STRING","'language_code'",91],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",91],["T_VARIABLE","$language",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","load",92],"(",["T_CONSTANT_ENCAPSED_STRING","'mail\/voucher'",92],")",";",["T_WHITESPACE","\n\n\t\t\t\t",92],["T_COMMENT","\/\/ HTML Mail\n",94],["T_WHITESPACE","\t\t\t\t",95],["T_VARIABLE","$data",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",95],["T_VARIABLE","$data",97],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","sprintf",97],"(",["T_VARIABLE","$language",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'text_subject'",97],")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$voucher_info",97],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",97],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",97],["T_VARIABLE","$data",99],"[",["T_CONSTANT_ENCAPSED_STRING","'text_greeting'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","sprintf",99],"(",["T_VARIABLE","$language",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'text_greeting'",99],")",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","currency",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","format",99],"(",["T_VARIABLE","$voucher_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",99],"]",",",["T_WHITESPACE"," ",99],"(","!",["T_EMPTY","empty",99],"(",["T_VARIABLE","$order_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",99],"]",")",["T_WHITESPACE"," ",99],"?",["T_WHITESPACE"," ",99],["T_VARIABLE","$order_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",99],"]",["T_WHITESPACE"," ",99],":",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","config",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'config_currency'",99],")",")",",",["T_WHITESPACE"," ",99],"(","!",["T_EMPTY","empty",99],"(",["T_VARIABLE","$order_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",99],"]",")",["T_WHITESPACE"," ",99],"?",["T_WHITESPACE"," ",99],["T_VARIABLE","$order_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",99],"]",["T_WHITESPACE"," ",99],":",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","currency",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getValue",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","config",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'config_currency'",99],")",")",")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",99],["T_VARIABLE","$data",100],"[",["T_CONSTANT_ENCAPSED_STRING","'text_from'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","sprintf",100],"(",["T_VARIABLE","$language",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","get",100],"(",["T_CONSTANT_ENCAPSED_STRING","'text_from'",100],")",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$voucher_info",100],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",100],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",100],["T_VARIABLE","$data",101],"[",["T_CONSTANT_ENCAPSED_STRING","'text_message'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$language",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'text_message'",101],")",";",["T_WHITESPACE","\n\t\t\t\t",101],["T_VARIABLE","$data",102],"[",["T_CONSTANT_ENCAPSED_STRING","'text_redeem'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_STRING","sprintf",102],"(",["T_VARIABLE","$language",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","get",102],"(",["T_CONSTANT_ENCAPSED_STRING","'text_redeem'",102],")",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$voucher_info",102],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",102],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",102],["T_VARIABLE","$data",103],"[",["T_CONSTANT_ENCAPSED_STRING","'text_footer'",103],"]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$language",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'text_footer'",103],")",";",["T_WHITESPACE","\n\n\t\t\t\t",103],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","load",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","model",105],"(",["T_CONSTANT_ENCAPSED_STRING","'sale\/voucher_theme'",105],")",";",["T_WHITESPACE","\n\n\t\t\t\t",105],["T_VARIABLE","$voucher_theme_info",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","model_sale_voucher_theme",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getVoucherTheme",107],"(",["T_VARIABLE","$voucher_info",107],"[",["T_CONSTANT_ENCAPSED_STRING","'voucher_theme_id'",107],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$voucher_theme_info",109],["T_WHITESPACE"," ",109],["T_BOOLEAN_AND","&&",109],["T_WHITESPACE"," ",109],["T_STRING","is_file",109],"(",["T_STRING","DIR_IMAGE",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$voucher_theme_info",109],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",109],"]",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n\t\t\t\t\t",109],["T_VARIABLE","$data",110],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","HTTP_CATALOG",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'image\/'",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_VARIABLE","$voucher_theme_info",110],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",110],"]",";",["T_WHITESPACE","\n\t\t\t\t",110],"}",["T_WHITESPACE"," ",111],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t\t\t\t",111],["T_VARIABLE","$data",112],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",112],"]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","''",112],";",["T_WHITESPACE","\n\t\t\t\t",112],"}",["T_WHITESPACE","\n\n\t\t\t\t",113],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'store_name'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$order_info",115],"[",["T_CONSTANT_ENCAPSED_STRING","'store_name'",115],"]",";",["T_WHITESPACE","\n\t\t\t\t",115],["T_VARIABLE","$data",116],"[",["T_CONSTANT_ENCAPSED_STRING","'store_url'",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$order_info",116],"[",["T_CONSTANT_ENCAPSED_STRING","'store_url'",116],"]",";",["T_WHITESPACE","\n\t\t\t\t",116],["T_VARIABLE","$data",117],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",117],"]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","nl2br",117],"(",["T_VARIABLE","$voucher_info",117],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",117],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",117],["T_VARIABLE","$mail",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Mail",119],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",119],["T_VARIABLE","$mail",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","protocol",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","config",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","get",120],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_protocol'",120],")",";",["T_WHITESPACE","\n\t\t\t\t",120],["T_VARIABLE","$mail",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","parameter",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","config",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","get",121],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_parameter'",121],")",";",["T_WHITESPACE","\n\t\t\t\t",121],["T_VARIABLE","$mail",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","smtp_hostname",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","config",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_hostname'",122],")",";",["T_WHITESPACE","\n\t\t\t\t",122],["T_VARIABLE","$mail",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","smtp_username",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","config",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","get",123],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_username'",123],")",";",["T_WHITESPACE","\n\t\t\t\t",123],["T_VARIABLE","$mail",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","smtp_password",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","html_entity_decode",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","config",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_password'",124],")",",",["T_WHITESPACE"," ",124],["T_STRING","ENT_QUOTES",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",124],")",";",["T_WHITESPACE","\n\t\t\t\t",124],["T_VARIABLE","$mail",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","smtp_port",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","config",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","get",125],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_port'",125],")",";",["T_WHITESPACE","\n\t\t\t\t",125],["T_VARIABLE","$mail",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","smtp_timeout",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","config",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_timeout'",126],")",";",["T_WHITESPACE","\n\n\t\t\t\t",126],["T_VARIABLE","$mail",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","setTo",128],"(",["T_VARIABLE","$voucher_info",128],"[",["T_CONSTANT_ENCAPSED_STRING","'to_email'",128],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",128],["T_VARIABLE","$mail",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setFrom",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","config",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","get",129],"(",["T_CONSTANT_ENCAPSED_STRING","'config_email'",129],")",")",";",["T_WHITESPACE","\n\t\t\t\t",129],["T_VARIABLE","$mail",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setSender",130],"(",["T_STRING","html_entity_decode",130],"(",["T_VARIABLE","$order_info",130],"[",["T_CONSTANT_ENCAPSED_STRING","'store_name'",130],"]",",",["T_WHITESPACE"," ",130],["T_STRING","ENT_QUOTES",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",130],")",")",";",["T_WHITESPACE","\n\t\t\t\t",130],["T_VARIABLE","$mail",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setSubject",131],"(",["T_STRING","sprintf",131],"(",["T_VARIABLE","$language",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","get",131],"(",["T_CONSTANT_ENCAPSED_STRING","'text_subject'",131],")",",",["T_WHITESPACE"," ",131],["T_STRING","html_entity_decode",131],"(",["T_VARIABLE","$voucher_info",131],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",131],"]",",",["T_WHITESPACE"," ",131],["T_STRING","ENT_QUOTES",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",131],")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",131],["T_VARIABLE","$mail",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","setHtml",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","load",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","view",132],"(",["T_CONSTANT_ENCAPSED_STRING","'mail\/voucher'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$data",132],")",")",";",["T_WHITESPACE","\n\t\t\t\t",132],["T_VARIABLE","$mail",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","send",133],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",133],["T_COMMENT","\/\/ If voucher does not belong to an order\n",135],["T_WHITESPACE","\t\t\t",136],"}",["T_WHITESPACE","  ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n\t\t\t\t",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","load",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","language",137],"(",["T_CONSTANT_ENCAPSED_STRING","'mail\/voucher'",137],")",";",["T_WHITESPACE","\n\n\t\t\t\t",137],["T_VARIABLE","$data",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",139],["T_VARIABLE","$data",141],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","sprintf",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","language",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'text_subject'",141],")",",",["T_WHITESPACE"," ",141],["T_VARIABLE","$voucher_info",141],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",141],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",141],["T_VARIABLE","$data",143],"[",["T_CONSTANT_ENCAPSED_STRING","'text_greeting'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","sprintf",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","language",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","get",143],"(",["T_CONSTANT_ENCAPSED_STRING","'text_greeting'",143],")",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","currency",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","format",143],"(",["T_VARIABLE","$voucher_info",143],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",143],"]",",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","config",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","get",143],"(",["T_CONSTANT_ENCAPSED_STRING","'config_currency'",143],")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",143],["T_VARIABLE","$data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'text_from'",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","sprintf",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","language",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","get",144],"(",["T_CONSTANT_ENCAPSED_STRING","'text_from'",144],")",",",["T_WHITESPACE"," ",144],["T_VARIABLE","$voucher_info",144],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",144],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",144],["T_VARIABLE","$data",145],"[",["T_CONSTANT_ENCAPSED_STRING","'text_message'",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","language",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_CONSTANT_ENCAPSED_STRING","'text_message'",145],")",";",["T_WHITESPACE","\n\t\t\t\t",145],["T_VARIABLE","$data",146],"[",["T_CONSTANT_ENCAPSED_STRING","'text_redeem'",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","sprintf",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","language",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_CONSTANT_ENCAPSED_STRING","'text_redeem'",146],")",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$voucher_info",146],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",146],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",146],["T_VARIABLE","$data",147],"[",["T_CONSTANT_ENCAPSED_STRING","'text_footer'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","language",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'text_footer'",147],")",";",["T_WHITESPACE","\n\n\t\t\t\t",147],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","load",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","model",149],"(",["T_CONSTANT_ENCAPSED_STRING","'sale\/voucher_theme'",149],")",";",["T_WHITESPACE","\n\n\t\t\t\t",149],["T_VARIABLE","$voucher_theme_info",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","model_sale_voucher_theme",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getVoucherTheme",151],"(",["T_VARIABLE","$voucher_info",151],"[",["T_CONSTANT_ENCAPSED_STRING","'voucher_theme_id'",151],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",151],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$voucher_theme_info",153],["T_WHITESPACE"," ",153],["T_BOOLEAN_AND","&&",153],["T_WHITESPACE"," ",153],["T_STRING","is_file",153],"(",["T_STRING","DIR_IMAGE",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$voucher_theme_info",153],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",153],"]",")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n\t\t\t\t\t",153],["T_VARIABLE","$data",154],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","HTTP_CATALOG",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'image\/'",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_VARIABLE","$voucher_theme_info",154],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",154],"]",";",["T_WHITESPACE","\n\t\t\t\t",154],"}",["T_WHITESPACE"," ",155],["T_ELSE","else",155],["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t\t\t",155],["T_VARIABLE","$data",156],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","''",156],";",["T_WHITESPACE","\n\t\t\t\t",156],"}",["T_WHITESPACE","\n\n\t\t\t\t",157],["T_VARIABLE","$data",159],"[",["T_CONSTANT_ENCAPSED_STRING","'store_name'",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","config",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","get",159],"(",["T_CONSTANT_ENCAPSED_STRING","'config_name'",159],")",";",["T_WHITESPACE","\n\t\t\t\t",159],["T_VARIABLE","$data",160],"[",["T_CONSTANT_ENCAPSED_STRING","'store_url'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","HTTP_CATALOG",160],";",["T_WHITESPACE","\n\t\t\t\t",160],["T_VARIABLE","$data",161],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","nl2br",161],"(",["T_VARIABLE","$voucher_info",161],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",161],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",161],["T_VARIABLE","$mail",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_STRING","Mail",163],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",163],["T_VARIABLE","$mail",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","protocol",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","config",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","get",164],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_protocol'",164],")",";",["T_WHITESPACE","\n\t\t\t\t",164],["T_VARIABLE","$mail",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","parameter",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","config",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","get",165],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_parameter'",165],")",";",["T_WHITESPACE","\n\t\t\t\t",165],["T_VARIABLE","$mail",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","smtp_hostname",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","config",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","get",166],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_hostname'",166],")",";",["T_WHITESPACE","\n\t\t\t\t",166],["T_VARIABLE","$mail",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","smtp_username",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","config",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","get",167],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_username'",167],")",";",["T_WHITESPACE","\n\t\t\t\t",167],["T_VARIABLE","$mail",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","smtp_password",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","html_entity_decode",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","config",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","get",168],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_password'",168],")",",",["T_WHITESPACE"," ",168],["T_STRING","ENT_QUOTES",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",168],")",";",["T_WHITESPACE","\n\t\t\t\t",168],["T_VARIABLE","$mail",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","smtp_port",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","config",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","get",169],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_port'",169],")",";",["T_WHITESPACE","\n\t\t\t\t",169],["T_VARIABLE","$mail",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","smtp_timeout",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","config",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","get",170],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_timeout'",170],")",";",["T_WHITESPACE","\n\n\t\t\t\t",170],["T_VARIABLE","$mail",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","setTo",172],"(",["T_VARIABLE","$voucher_info",172],"[",["T_CONSTANT_ENCAPSED_STRING","'to_email'",172],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",172],["T_VARIABLE","$mail",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","setFrom",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","config",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","get",173],"(",["T_CONSTANT_ENCAPSED_STRING","'config_email'",173],")",")",";",["T_WHITESPACE","\n\t\t\t\t",173],["T_VARIABLE","$mail",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","setSender",174],"(",["T_STRING","html_entity_decode",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","config",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","get",174],"(",["T_CONSTANT_ENCAPSED_STRING","'config_name'",174],")",",",["T_WHITESPACE"," ",174],["T_STRING","ENT_QUOTES",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",174],")",")",";",["T_WHITESPACE","\n\t\t\t\t",174],["T_VARIABLE","$mail",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","setSubject",175],"(",["T_STRING","html_entity_decode",175],"(",["T_STRING","sprintf",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","language",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_CONSTANT_ENCAPSED_STRING","'text_subject'",175],")",",",["T_WHITESPACE"," ",175],["T_VARIABLE","$voucher_info",175],"[",["T_CONSTANT_ENCAPSED_STRING","'from_name'",175],"]",")",",",["T_WHITESPACE"," ",175],["T_STRING","ENT_QUOTES",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",175],")",")",";",["T_WHITESPACE","\n\t\t\t\t",175],["T_VARIABLE","$mail",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setHtml",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","load",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","view",176],"(",["T_CONSTANT_ENCAPSED_STRING","'mail\/voucher'",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$data",176],")",")",";",["T_WHITESPACE","\n\t\t\t\t",176],["T_VARIABLE","$mail",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","send",177],"(",")",";",["T_WHITESPACE","\n\t\t\t",177],"}",["T_WHITESPACE","\n\t\t",178],"}",["T_WHITESPACE","\n\t",179],"}",["T_WHITESPACE","\n\n\t",180],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","getTotalVouchers",182],"(",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n\t\t",182],["T_VARIABLE","$query",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","db",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","query",183],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM \"",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_STRING","DB_PREFIX",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"voucher\"",183],")",";",["T_WHITESPACE","\n\n\t\t",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$query",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","row",185],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",185],"]",";",["T_WHITESPACE","\n\t",185],"}",["T_WHITESPACE","\n\n\t",186],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getTotalVouchersByVoucherThemeId",188],"(",["T_VARIABLE","$voucher_theme_id",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n\t\t",188],["T_VARIABLE","$query",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","db",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","query",189],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM \"",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_STRING","DB_PREFIX",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"voucher WHERE voucher_theme_id = '\"",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_INT_CAST","(int)",189],["T_VARIABLE","$voucher_theme_id",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"'\"",189],")",";",["T_WHITESPACE","\n\n\t\t",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$query",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","row",191],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",191],"]",";",["T_WHITESPACE","\n\t",191],"}",["T_WHITESPACE","\n\n\t",192],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getVoucherHistories",194],"(",["T_VARIABLE","$voucher_id",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$start",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_LNUMBER","0",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$limit",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_LNUMBER","10",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t\t",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$start",195],["T_WHITESPACE"," ",195],"<",["T_WHITESPACE"," ",195],["T_LNUMBER","0",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n\t\t\t",195],["T_VARIABLE","$start",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],";",["T_WHITESPACE","\n\t\t",196],"}",["T_WHITESPACE","\n\n\t\t",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$limit",199],["T_WHITESPACE"," ",199],"<",["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n\t\t\t",199],["T_VARIABLE","$limit",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_LNUMBER","10",200],";",["T_WHITESPACE","\n\t\t",200],"}",["T_WHITESPACE","\n\n\t\t",201],["T_VARIABLE","$query",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","db",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","query",203],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT vh.order_id, CONCAT(o.firstname, ' ', o.lastname) AS customer, vh.amount, vh.date_added FROM \"",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_STRING","DB_PREFIX",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","\"voucher_history vh LEFT JOIN `\"",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_STRING","DB_PREFIX",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","\"order` o ON (vh.order_id = o.order_id) WHERE vh.voucher_id = '\"",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_INT_CAST","(int)",203],["T_VARIABLE","$voucher_id",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY vh.date_added ASC LIMIT \"",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_INT_CAST","(int)",203],["T_VARIABLE","$start",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","\",\"",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_INT_CAST","(int)",203],["T_VARIABLE","$limit",203],")",";",["T_WHITESPACE","\n\n\t\t",203],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$query",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","rows",205],";",["T_WHITESPACE","\n\t",205],"}",["T_WHITESPACE","\n\n\t",206],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getTotalVoucherHistories",208],"(",["T_VARIABLE","$voucher_id",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n\t\t",208],["T_VARIABLE","$query",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","db",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","query",209],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM \"",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_STRING","DB_PREFIX",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","\"voucher_history WHERE voucher_id = '\"",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_INT_CAST","(int)",209],["T_VARIABLE","$voucher_id",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","\"'\"",209],")",";",["T_WHITESPACE","\n\n\t\t",209],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$query",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","row",211],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",211],"]",";",["T_WHITESPACE","\n\t",211],"}",["T_WHITESPACE","\n",212],"}",["T_WHITESPACE","\n",213]]
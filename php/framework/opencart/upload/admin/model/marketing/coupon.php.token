[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelMarketingCoupon",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","addCoupon",3],"(",["T_VARIABLE","$data",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"coupon SET name = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', code = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', discount = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_DOUBLE_CAST","(float)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'discount'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', type = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', total = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_DOUBLE_CAST","(float)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', logged = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'logged'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', shipping = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', date_start = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'date_start'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', date_end = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'date_end'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', uses_total = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'uses_total'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', uses_customer = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'uses_customer'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', status = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', date_added = NOW()\"",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$coupon_id",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","getLastId",6],"(",")",";",["T_WHITESPACE","\n\n\t\t",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_ISSET","isset",8],"(",["T_VARIABLE","$data",8],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_product'",8],"]",")",")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_FOREACH","foreach",9],["T_WHITESPACE"," ",9],"(",["T_VARIABLE","$data",9],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_product'",9],"]",["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_VARIABLE","$product_id",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t\t\t",9],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","query",10],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_STRING","DB_PREFIX",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"coupon_product SET coupon_id = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$coupon_id",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"', product_id = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$product_id",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"'\"",10],")",";",["T_WHITESPACE","\n\t\t\t",10],"}",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE","\n\n\t\t",12],["T_IF","if",14],["T_WHITESPACE"," ",14],"(",["T_ISSET","isset",14],"(",["T_VARIABLE","$data",14],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_category'",14],"]",")",")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_FOREACH","foreach",15],["T_WHITESPACE"," ",15],"(",["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_category'",15],"]",["T_WHITESPACE"," ",15],["T_AS","as",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$category_id",15],")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t\t\t",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","db",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","query",16],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_STRING","DB_PREFIX",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","\"coupon_category SET coupon_id = '\"",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_INT_CAST","(int)",16],["T_VARIABLE","$coupon_id",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","\"', category_id = '\"",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_INT_CAST","(int)",16],["T_VARIABLE","$category_id",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","\"'\"",16],")",";",["T_WHITESPACE","\n\t\t\t",16],"}",["T_WHITESPACE","\n\t\t",17],"}",["T_WHITESPACE","\n\n\t\t",18],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$coupon_id",20],";",["T_WHITESPACE","\n\t",20],"}",["T_WHITESPACE","\n\n\t",21],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","editCoupon",23],"(",["T_VARIABLE","$coupon_id",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$data",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","query",24],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_STRING","DB_PREFIX",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"coupon SET name = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', code = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', discount = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_DOUBLE_CAST","(float)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'discount'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', type = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', total = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_DOUBLE_CAST","(float)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', logged = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'logged'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', shipping = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', date_start = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'date_start'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', date_end = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'date_end'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', uses_total = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'uses_total'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', uses_customer = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'uses_customer'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', status = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE coupon_id = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$coupon_id",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"'\"",24],")",";",["T_WHITESPACE","\n\n\t\t",24],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","db",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","query",26],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_PREFIX",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"coupon_product WHERE coupon_id = '\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_INT_CAST","(int)",26],["T_VARIABLE","$coupon_id",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"'\"",26],")",";",["T_WHITESPACE","\n\n\t\t",26],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_ISSET","isset",28],"(",["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_product'",28],"]",")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$data",29],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_product'",29],"]",["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$product_id",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t\t\t",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","db",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","query",30],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_STRING","DB_PREFIX",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"coupon_product SET coupon_id = '\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_INT_CAST","(int)",30],["T_VARIABLE","$coupon_id",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"', product_id = '\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_INT_CAST","(int)",30],["T_VARIABLE","$product_id",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"'\"",30],")",";",["T_WHITESPACE","\n\t\t\t",30],"}",["T_WHITESPACE","\n\t\t",31],"}",["T_WHITESPACE","\n\n\t\t",32],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","db",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","query",34],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_STRING","DB_PREFIX",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"coupon_category WHERE coupon_id = '\"",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_INT_CAST","(int)",34],["T_VARIABLE","$coupon_id",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"'\"",34],")",";",["T_WHITESPACE","\n\n\t\t",34],["T_IF","if",36],["T_WHITESPACE"," ",36],"(",["T_ISSET","isset",36],"(",["T_VARIABLE","$data",36],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_category'",36],"]",")",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t",36],["T_FOREACH","foreach",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$data",37],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon_category'",37],"]",["T_WHITESPACE"," ",37],["T_AS","as",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$category_id",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n\t\t\t\t",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","db",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","query",38],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_STRING","DB_PREFIX",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"coupon_category SET coupon_id = '\"",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_INT_CAST","(int)",38],["T_VARIABLE","$coupon_id",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"', category_id = '\"",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_INT_CAST","(int)",38],["T_VARIABLE","$category_id",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"'\"",38],")",";",["T_WHITESPACE","\n\t\t\t",38],"}",["T_WHITESPACE","\n\t\t",39],"}",["T_WHITESPACE","\n\t",40],"}",["T_WHITESPACE","\n\n\t",41],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","deleteCoupon",43],"(",["T_VARIABLE","$coupon_id",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n\t\t",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","db",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","query",44],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_STRING","DB_PREFIX",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","\"coupon WHERE coupon_id = '\"",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_INT_CAST","(int)",44],["T_VARIABLE","$coupon_id",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","\"'\"",44],")",";",["T_WHITESPACE","\n\t\t",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","db",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","query",45],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"coupon_product WHERE coupon_id = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$coupon_id",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"'\"",45],")",";",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_STRING","DB_PREFIX",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"coupon_category WHERE coupon_id = '\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$coupon_id",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"'\"",46],")",";",["T_WHITESPACE","\n\t\t",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","db",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","query",47],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_STRING","DB_PREFIX",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"coupon_history WHERE coupon_id = '\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_INT_CAST","(int)",47],["T_VARIABLE","$coupon_id",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"'\"",47],")",";",["T_WHITESPACE","\n\t",47],"}",["T_WHITESPACE","\n\n\t",48],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","getCoupon",50],"(",["T_VARIABLE","$coupon_id",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t",50],["T_VARIABLE","$query",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","db",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","query",51],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM \"",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_STRING","DB_PREFIX",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"coupon WHERE coupon_id = '\"",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_INT_CAST","(int)",51],["T_VARIABLE","$coupon_id",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"'\"",51],")",";",["T_WHITESPACE","\n\n\t\t",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$query",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","row",53],";",["T_WHITESPACE","\n\t",53],"}",["T_WHITESPACE","\n\n\t",54],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getCouponByCode",56],"(",["T_VARIABLE","$code",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t",56],["T_VARIABLE","$query",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","db",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","query",57],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM \"",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_STRING","DB_PREFIX",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","\"coupon WHERE code = '\"",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","db",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","escape",57],"(",["T_VARIABLE","$code",57],")",["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","\"'\"",57],")",";",["T_WHITESPACE","\n\n\t\t",57],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$query",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","row",59],";",["T_WHITESPACE","\n\t",59],"}",["T_WHITESPACE","\n\n\t",60],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getCoupons",62],"(",["T_VARIABLE","$data",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t",62],["T_VARIABLE","$sql",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","\"SELECT coupon_id, name, code, discount, date_start, date_end, status FROM \"",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_STRING","DB_PREFIX",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","\"coupon\"",63],";",["T_WHITESPACE","\n\n\t\t",63],["T_VARIABLE","$sort_data",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n\t\t\t",65],["T_CONSTANT_ENCAPSED_STRING","'name'",66],",",["T_WHITESPACE","\n\t\t\t",66],["T_CONSTANT_ENCAPSED_STRING","'code'",67],",",["T_WHITESPACE","\n\t\t\t",67],["T_CONSTANT_ENCAPSED_STRING","'discount'",68],",",["T_WHITESPACE","\n\t\t\t",68],["T_CONSTANT_ENCAPSED_STRING","'date_start'",69],",",["T_WHITESPACE","\n\t\t\t",69],["T_CONSTANT_ENCAPSED_STRING","'date_end'",70],",",["T_WHITESPACE","\n\t\t\t",70],["T_CONSTANT_ENCAPSED_STRING","'status'",71],["T_WHITESPACE","\n\t\t",71],")",";",["T_WHITESPACE","\n\n\t\t",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_ISSET","isset",74],"(",["T_VARIABLE","$data",74],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",74],"]",")",["T_WHITESPACE"," ",74],["T_BOOLEAN_AND","&&",74],["T_WHITESPACE"," ",74],["T_STRING","in_array",74],"(",["T_VARIABLE","$data",74],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",74],"]",",",["T_WHITESPACE"," ",74],["T_VARIABLE","$sort_data",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n\t\t\t",74],["T_VARIABLE","$sql",75],["T_WHITESPACE"," ",75],["T_CONCAT_EQUAL",".=",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","\" ORDER BY \"",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_VARIABLE","$data",75],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",75],"]",";",["T_WHITESPACE","\n\t\t",75],"}",["T_WHITESPACE"," ",76],["T_ELSE","else",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t",76],["T_VARIABLE","$sql",77],["T_WHITESPACE"," ",77],["T_CONCAT_EQUAL",".=",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","\" ORDER BY name\"",77],";",["T_WHITESPACE","\n\t\t",77],"}",["T_WHITESPACE","\n\n\t\t",78],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_ISSET","isset",80],"(",["T_VARIABLE","$data",80],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",80],"]",")",["T_WHITESPACE"," ",80],["T_BOOLEAN_AND","&&",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$data",80],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",80],"]",["T_WHITESPACE"," ",80],["T_IS_EQUAL","==",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'DESC'",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n\t\t\t",80],["T_VARIABLE","$sql",81],["T_WHITESPACE"," ",81],["T_CONCAT_EQUAL",".=",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","\" DESC\"",81],";",["T_WHITESPACE","\n\t\t",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n\t\t\t",82],["T_VARIABLE","$sql",83],["T_WHITESPACE"," ",83],["T_CONCAT_EQUAL",".=",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","\" ASC\"",83],";",["T_WHITESPACE","\n\t\t",83],"}",["T_WHITESPACE","\n\n\t\t",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_ISSET","isset",86],"(",["T_VARIABLE","$data",86],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",86],"]",")",["T_WHITESPACE"," ",86],["T_BOOLEAN_OR","||",86],["T_WHITESPACE"," ",86],["T_ISSET","isset",86],"(",["T_VARIABLE","$data",86],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",86],"]",")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n\t\t\t",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$data",87],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",87],"]",["T_WHITESPACE"," ",87],"<",["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t\t\t",87],["T_VARIABLE","$data",88],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],";",["T_WHITESPACE","\n\t\t\t",88],"}",["T_WHITESPACE","\n\n\t\t\t",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",91],"]",["T_WHITESPACE"," ",91],"<",["T_WHITESPACE"," ",91],["T_LNUMBER","1",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n\t\t\t\t",91],["T_VARIABLE","$data",92],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_LNUMBER","20",92],";",["T_WHITESPACE","\n\t\t\t",92],"}",["T_WHITESPACE","\n\n\t\t\t",93],["T_VARIABLE","$sql",95],["T_WHITESPACE"," ",95],["T_CONCAT_EQUAL",".=",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT \"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$data",95],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",95],"]",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\",\"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$data",95],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",95],"]",";",["T_WHITESPACE","\n\t\t",95],"}",["T_WHITESPACE","\n\n\t\t",96],["T_VARIABLE","$query",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","query",98],"(",["T_VARIABLE","$sql",98],")",";",["T_WHITESPACE","\n\n\t\t",98],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$query",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","rows",100],";",["T_WHITESPACE","\n\t",100],"}",["T_WHITESPACE","\n\n\t",101],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getCouponProducts",103],"(",["T_VARIABLE","$coupon_id",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\t\t",103],["T_VARIABLE","$coupon_product_data",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n\n\t\t",104],["T_VARIABLE","$query",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","db",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","query",106],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_STRING","DB_PREFIX",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"coupon_product WHERE coupon_id = '\"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_VARIABLE","$coupon_id",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"'\"",106],")",";",["T_WHITESPACE","\n\n\t\t",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$query",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","rows",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$result",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t\t",108],["T_VARIABLE","$coupon_product_data",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$result",109],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",109],"]",";",["T_WHITESPACE","\n\t\t",109],"}",["T_WHITESPACE","\n\n\t\t",110],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$coupon_product_data",112],";",["T_WHITESPACE","\n\t",112],"}",["T_WHITESPACE","\n\n\t",113],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getCouponCategories",115],"(",["T_VARIABLE","$coupon_id",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n\t\t",115],["T_VARIABLE","$coupon_category_data",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",";",["T_WHITESPACE","\n\n\t\t",116],["T_VARIABLE","$query",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","db",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","query",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_STRING","DB_PREFIX",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"coupon_category WHERE coupon_id = '\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_INT_CAST","(int)",118],["T_VARIABLE","$coupon_id",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"'\"",118],")",";",["T_WHITESPACE","\n\n\t\t",118],["T_FOREACH","foreach",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$query",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","rows",120],["T_WHITESPACE"," ",120],["T_AS","as",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$result",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n\t\t\t",120],["T_VARIABLE","$coupon_category_data",121],"[","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$result",121],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",121],"]",";",["T_WHITESPACE","\n\t\t",121],"}",["T_WHITESPACE","\n\n\t\t",122],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$coupon_category_data",124],";",["T_WHITESPACE","\n\t",124],"}",["T_WHITESPACE","\n\n\t",125],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getTotalCoupons",127],"(",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n\t\t",127],["T_VARIABLE","$query",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","db",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","query",128],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM \"",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_STRING","DB_PREFIX",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","\"coupon\"",128],")",";",["T_WHITESPACE","\n\n\t\t",128],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$query",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","row",130],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",130],"]",";",["T_WHITESPACE","\n\t",130],"}",["T_WHITESPACE","\n\n\t",131],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getCouponHistories",133],"(",["T_VARIABLE","$coupon_id",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$start",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$limit",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","10",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$start",134],["T_WHITESPACE"," ",134],"<",["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n\t\t\t",134],["T_VARIABLE","$start",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_LNUMBER","0",135],";",["T_WHITESPACE","\n\t\t",135],"}",["T_WHITESPACE","\n\n\t\t",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$limit",138],["T_WHITESPACE"," ",138],"<",["T_WHITESPACE"," ",138],["T_LNUMBER","1",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n\t\t\t",138],["T_VARIABLE","$limit",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_LNUMBER","10",139],";",["T_WHITESPACE","\n\t\t",139],"}",["T_WHITESPACE","\n\n\t\t",140],["T_VARIABLE","$query",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","db",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","query",142],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT ch.order_id, CONCAT(c.firstname, ' ', c.lastname) AS customer, ch.amount, ch.date_added FROM \"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_STRING","DB_PREFIX",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"coupon_history ch LEFT JOIN \"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_STRING","DB_PREFIX",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"customer c ON (ch.customer_id = c.customer_id) WHERE ch.coupon_id = '\"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_VARIABLE","$coupon_id",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY ch.date_added ASC LIMIT \"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_VARIABLE","$start",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\",\"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_INT_CAST","(int)",142],["T_VARIABLE","$limit",142],")",";",["T_WHITESPACE","\n\n\t\t",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$query",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","rows",144],";",["T_WHITESPACE","\n\t",144],"}",["T_WHITESPACE","\n\n\t",145],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getTotalCouponHistories",147],"(",["T_VARIABLE","$coupon_id",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n\t\t",147],["T_VARIABLE","$query",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","db",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","query",148],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM \"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_STRING","DB_PREFIX",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"coupon_history WHERE coupon_id = '\"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$coupon_id",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"'\"",148],")",";",["T_WHITESPACE","\n\n\t\t",148],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$query",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","row",150],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",150],"]",";",["T_WHITESPACE","\n\t",150],"}",["T_WHITESPACE","\n",151],"}"]
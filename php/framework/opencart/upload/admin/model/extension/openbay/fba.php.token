[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayFba",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n    ",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","install",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n        ",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model_extension_event",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","addEvent",6],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_add_order'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'catalog\/model\/checkout\/order\/addOrder\/after'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/fba\/eventAddOrder'",6],")",";",["T_WHITESPACE","\n\t\t",6],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","model_extension_event",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","addEvent",7],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_add_orderhistory'",7],",",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","'catalog\/model\/checkout\/order\/addOrderHistory\/after'",7],",",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/fba\/eventAddOrderHistory'",7],")",";",["T_WHITESPACE","\n\n        ",7],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","db",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","query",9],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tCREATE TABLE IF NOT EXISTS `\"",9],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_STRING","DB_PREFIX",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` (\n\t\t\t\t\t`order_id` INT(11) NOT NULL,\n\t\t\t\t\t`fba_order_fulfillment_id` INT(11) NOT NULL,\n\t\t\t\t\t`fba_order_fulfillment_ref` CHAR(50) NOT NULL,\n\t\t\t\t\t`status` CHAR(10) NOT NULL,\n\t\t\t\t    `created` DATETIME NOT NULL,\n  \t\t\t\t    KEY `fba_order_id` (`order_id`)\n\t\t\t\t) ENGINE=InnoDB  DEFAULT CHARSET=latin1;\"",10],")",";",["T_WHITESPACE","\n\n        ",17],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","db",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","query",19],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tCREATE TABLE IF NOT EXISTS `\"",19],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_STRING","DB_PREFIX",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","\"fba_order_fulfillment` (\n\t\t\t\t\t`fba_order_fulfillment_id` INT(11) NOT NULL AUTO_INCREMENT,\n\t\t\t\t\t`order_id` INT(11) NOT NULL,\n\t\t\t\t    `created` DATETIME NOT NULL,\n\t\t\t\t\t`request_body` TEXT NOT NULL,\n\t\t\t\t\t`response_body` TEXT NOT NULL,\n\t\t\t\t\t`response_header_code` INT(3) NOT NULL,\n\t\t\t\t\t`type` INT(3) NOT NULL,\n\t\t\t\t\tPRIMARY KEY (`fba_order_fulfillment_id`),\n  \t\t\t\t    KEY `order_id` (`order_id`)\n\t\t\t\t) ENGINE=InnoDB  DEFAULT CHARSET=latin1;\"",20],")",";",["T_WHITESPACE","\n\n        ",30],["T_COMMENT","\/\/ Default settings\n",32],["T_WHITESPACE","        ",33],["T_VARIABLE","$setting",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$setting",34],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_status\"",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_LNUMBER","0",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$setting",35],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_send_orders\"",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$setting",36],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_debug_log\"",36],"]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_LNUMBER","1",36],";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$setting",37],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_order_trigger_status\"",37],"]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_LNUMBER","15",37],";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$setting",38],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_cancel_order_trigger_status\"",38],"]",["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","7",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$setting",39],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_fulfill_policy\"",39],"]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'FillAllAvailable'",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$setting",40],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_shipping_speed\"",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Standard'",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$setting",41],"[",["T_CONSTANT_ENCAPSED_STRING","\"openbay_fba_order_prefix\"",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'OC-'",41],";",["T_WHITESPACE","\n\n\t\t",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model_setting_setting",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","editSetting",43],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$setting",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","uninstall",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","db",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","query",47],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_STRING","DB_PREFIX",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `code` = 'openbay_fba'\"",47],")",";",["T_WHITESPACE","\n\n        ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","load",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","model",49],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",49],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","model_extension_event",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","deleteEvent",50],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_add_order'",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","model_extension_event",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","deleteEvent",51],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_add_orderhistory'",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","patch",54],"(",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n        ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","config",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_status'",55],")",["T_WHITESPACE"," ",55],["T_IS_EQUAL","==",55],["T_WHITESPACE"," ",55],["T_LNUMBER","1",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n\n        ",55],"}",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","countFbaOrders",60],"(",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$query",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","db",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","query",61],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS `total` FROM `\"",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_STRING","DB_PREFIX",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","\"fba_order`\"",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_INT_CAST","(int)",63],["T_VARIABLE","$query",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","row",63],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",63],"]",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n",64],"}"]
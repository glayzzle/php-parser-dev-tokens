[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayAmazonus",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","install",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model_extension_event",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","addEvent",6],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_add_order'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'catalog\/model\/checkout\/order\/addOrderHistory\/after'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/amazonus\/eventAddOrderHistory'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","query",8],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",8],["T_WHITESPACE"," ",9],".",["T_WHITESPACE"," ",9],["T_STRING","DB_PREFIX",9],["T_WHITESPACE"," ",9],".",["T_WHITESPACE"," ",9],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order` (\n\t\t\t  `order_id` int(11) NOT NULL ,\n\t\t\t  `amazonus_order_id` char(19) NOT NULL ,\n\t\t\t  `courier_id` varchar(255) NOT NULL ,\n\t\t\t  `courier_other` tinyint(1) NOT NULL,\n\t\t\t  `tracking_no` varchar(255) NOT NULL ,\n\t\t\t  PRIMARY KEY (`order_id`, `amazonus_order_id`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",9],")",";",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","db",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","query",18],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",18],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_STRING","DB_PREFIX",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order_product` (\n\t\t\t\t`order_product_id` int(11) NOT NULL ,\n\t\t\t\t`amazonus_order_item_id` varchar(255) NOT NULL,\n\t\t\t\tPRIMARY KEY(`order_product_id`, `amazonus_order_item_id`)\n\t\t);\"",19],")",";",["T_WHITESPACE","\n\n\t\t",23],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","query",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",25],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_PREFIX",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_unshipped` (\n\t\t\t\t`order_id` int(11) NOT NULL,\n\t\t\t\t`product_id` int(11) NOT NULL,\n\t\t\t\t`quantity` int(11) NOT NULL DEFAULT '0',\n\t\t\t\tPRIMARY KEY (`order_id`,`product_id`)\n\t\t\t) DEFAULT COLLATE=utf8_general_ci;\"",26],")",";",["T_WHITESPACE","\n\n\t\t",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","query",33],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",33],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_STRING","DB_PREFIX",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product` (\n\t\t  `version` int(11) NOT NULL DEFAULT 2,\n\t\t  `product_id`  int(11) NOT NULL ,\n\t\t  `category`  varchar(255) NOT NULL ,\n\t\t  `sku`  varchar(255) NOT NULL ,\n\t\t  `insertion_id` varchar(255) NOT NULL ,\n\t\t  `data`  text NOT NULL ,\n\t\t  `status` enum('saved','uploaded','ok','error') NOT NULL ,\n\t\t  `price`  decimal(15,4) NOT NULL COMMENT 'Price on Amazonus' ,\n\t\t  `var` char(100) NOT NULL DEFAULT '',\n\t\t  `marketplaces` text NOT NULL ,\n\t\t  `messages` text NOT NULL,\n\t\t  PRIMARY KEY (`product_id`, `var`)\n\t\t);\"",34],")",";",["T_WHITESPACE","\n\n\t\t",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","db",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","query",49],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",49],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_PREFIX",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_error` (\n\t\t  `error_id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t  `sku` varchar(255) NOT NULL ,\n\t\t  `insertion_id` varchar(255) NOT NULL ,\n\t\t  `error_code` int(11) NOT NULL ,\n\t\t  `message` text NOT NULL ,\n\t\t  PRIMARY KEY (`error_id`)\n\t\t);\"",50],")",";",["T_WHITESPACE","\n\n\t\t",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","db",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","query",59],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",59],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_STRING","DB_PREFIX",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` (\n\t\t  `id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t  `amazonus_sku` varchar(255) NOT NULL,\n\t\t  `var` char(100) NOT NULL DEFAULT '',\n\t\t  `product_id` int(11) NOT NULL,\n\t\t  PRIMARY KEY (`id`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",60],")",";",["T_WHITESPACE","\n\n\t\t",66],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","db",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","query",68],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",68],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_STRING","DB_PREFIX",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_search` (\n\t\t\t`product_id` int(11) NOT NULL,\n\t\t\t`status` enum('searching','finished') NOT NULL,\n\t\t\t`matches` int(11) DEFAULT NULL,\n\t\t\t`data` text,\n\t\t\tPRIMARY KEY (`product_id`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",69],")",";",["T_WHITESPACE","\n\n\t\t",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","db",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","query",77],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS`\"",77],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_STRING","DB_PREFIX",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report` (\n\t\t\t\t`sku` varchar(255) NOT NULL,\n\t\t\t\t`quantity` int(10) unsigned NOT NULL,\n\t\t\t\t`asin` varchar(255) NOT NULL,\n\t\t\t\t`price` decimal(10,4) NOT NULL,\n\t\t\t\tPRIMARY KEY (`sku`)\n\t\t\t) DEFAULT COLLATE=utf8_general_ci;\n\t\t\"",78],")",";",["T_WHITESPACE","\n\t",85],"}",["T_WHITESPACE","\n\n\t",86],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","uninstall",88],"(",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","db",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","query",89],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","DB_PREFIX",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order`\"",89],")",";",["T_WHITESPACE","\n\t\t",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","db",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","query",90],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_STRING","DB_PREFIX",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order_product`\"",90],")",";",["T_WHITESPACE","\n\t\t",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","db",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","query",91],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","DB_PREFIX",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product2`\"",91],")",";",["T_WHITESPACE","\n\t\t",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","query",92],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","DB_PREFIX",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\"",92],")",";",["T_WHITESPACE","\n\t\t",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","query",93],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","DB_PREFIX",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link`\"",93],")",";",["T_WHITESPACE","\n\t\t",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","db",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","query",94],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_STRING","DB_PREFIX",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_unshipped`\"",94],")",";",["T_WHITESPACE","\n\t\t",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","db",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","query",95],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","DB_PREFIX",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_error`\"",95],")",";",["T_WHITESPACE","\n\t\t",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","db",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","query",96],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","DB_PREFIX",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_process`\"",96],")",";",["T_WHITESPACE","\n\t\t",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","db",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","query",97],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_STRING","DB_PREFIX",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_search`\"",97],")",";",["T_WHITESPACE","\n\t\t",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","query",98],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_STRING","DB_PREFIX",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report`\"",98],")",";",["T_WHITESPACE","\n\n\t\t",98],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","db",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","query",100],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_STRING","DB_PREFIX",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `code` = 'openbay_amazonus'\"",100],")",";",["T_WHITESPACE","\n\n\t\t",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","load",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","model",102],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",102],")",";",["T_WHITESPACE","\n\t\t",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","model_extension_event",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","deleteEvent",103],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_add_order'",103],")",";",["T_WHITESPACE","\n\t",103],"}",["T_WHITESPACE","\n\n\t",104],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","patch",106],"(",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n\t\t",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","config",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","get",107],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_status'",107],")",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_LNUMBER","1",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\n\t\t",107],"}",["T_WHITESPACE","\n\t",109],"}",["T_WHITESPACE","\n\n\t",110],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","scheduleOrders",112],"(",["T_VARIABLE","$data",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t\t",112],["T_VARIABLE","$log",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Log",113],"(",["T_CONSTANT_ENCAPSED_STRING","'amazonus.log'",113],")",";",["T_WHITESPACE","\n\n\t\t",113],["T_VARIABLE","$request_xml",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'<Request>\n  <ResponseURL>'",115],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_STRING","HTTPS_CATALOG",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'index.php?route=extension\/openbay\/amazonus\/order<\/ResponseURL>\n  <MarketplaceIDs>'",116],";",["T_WHITESPACE","\n\n\t\t",117],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$data",119],"[",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_orders_marketplace_ids'",119],"]",["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$marketplace_id",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t\t",119],["T_VARIABLE","$request_xml",120],["T_WHITESPACE"," ",120],["T_CONCAT_EQUAL",".=",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'    <MarketplaceID>'",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$marketplace_id",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'<\/MarketplaceID>'",120],";",["T_WHITESPACE","\n\t\t",120],"}",["T_WHITESPACE","\n\n\t\t",121],["T_VARIABLE","$request_xml",123],["T_WHITESPACE"," ",123],["T_CONCAT_EQUAL",".=",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'\n  <\/MarketplaceIDs>\n<\/Request>'",123],";",["T_WHITESPACE","\n\n\t\t",125],["T_VARIABLE","$response",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","openbay",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","amazonus",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","call",127],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/scheduleOrders'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$request_xml",127],",",["T_WHITESPACE"," ",127],["T_STRING","false",127],")",";",["T_WHITESPACE","\n\n\t\t",127],["T_STRING","libxml_use_internal_errors",129],"(",["T_STRING","true",129],")",";",["T_WHITESPACE","\n\t\t",129],["T_VARIABLE","$response_xml",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","simplexml_load_string",130],"(",["T_VARIABLE","$response",130],")",";",["T_WHITESPACE","\n\t\t",130],["T_STRING","libxml_use_internal_errors",131],"(",["T_STRING","false",131],")",";",["T_WHITESPACE","\n\n\t\t",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$response_xml",133],["T_WHITESPACE"," ",133],["T_BOOLEAN_AND","&&",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$response_xml",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","Status",133],["T_WHITESPACE"," ",133],["T_IS_EQUAL","==",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'0'",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t\t",133],["T_VARIABLE","$log",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","write",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Scheduling orders call was successful'",134],")",";",["T_WHITESPACE","\n\t\t\t",134],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_STRING","true",135],";",["T_WHITESPACE","\n\t\t",135],"}",["T_WHITESPACE","\n\n\t\t",136],["T_VARIABLE","$log",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","write",138],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to schedule orders. Response: '",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$response",138],")",";",["T_WHITESPACE","\n\n\t\t",138],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","false",140],";",["T_WHITESPACE","\n\t",140],"}",["T_WHITESPACE","\n\n\t",141],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","saveProduct",143],"(",["T_VARIABLE","$product_id",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$data_array",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n\t\t",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_ISSET","isset",144],"(",["T_VARIABLE","$data_array",144],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",144],"]","[",["T_CONSTANT_ENCAPSED_STRING","'item-price'",144],"]",")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n\t\t\t",144],["T_VARIABLE","$price",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$data_array",145],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",145],"]","[",["T_CONSTANT_ENCAPSED_STRING","'item-price'",145],"]",";",["T_WHITESPACE","\n\t\t",145],"}",["T_WHITESPACE"," ",146],["T_ELSE","else",146],["T_WHITESPACE"," ",146],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_ISSET","isset",146],"(",["T_VARIABLE","$data_array",146],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",146],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t",146],["T_VARIABLE","$price",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$data_array",147],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",147],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",147],"]",";",["T_WHITESPACE","\n\t\t",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$data_array",148],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'StandardPrice'",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t",148],["T_VARIABLE","$price",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$data_array",149],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",149],"]","[",["T_CONSTANT_ENCAPSED_STRING","'StandardPrice'",149],"]",";",["T_WHITESPACE","\n\t\t",149],"}",["T_WHITESPACE","   ",150],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t\t",150],["T_VARIABLE","$price",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],";",["T_WHITESPACE","\n\t\t",151],"}",["T_WHITESPACE","\n\n\t\t",152],["T_VARIABLE","$category",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"(",["T_ISSET","isset",154],"(",["T_VARIABLE","$data_array",154],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",154],"]",")",")",["T_WHITESPACE"," ",154],"?",["T_WHITESPACE"," ",154],["T_VARIABLE","$data_array",154],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",154],"]",["T_WHITESPACE"," ",154],":",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","\"\"",154],";",["T_WHITESPACE","\n\t\t",154],["T_VARIABLE","$sku",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],"(",["T_ISSET","isset",155],"(",["T_VARIABLE","$data_array",155],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",155],"]",")",")",["T_WHITESPACE"," ",155],"?",["T_WHITESPACE"," ",155],["T_VARIABLE","$data_array",155],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",155],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",155],"]",["T_WHITESPACE"," ",155],":",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","\"\"",155],";",["T_WHITESPACE","\n\t\t",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_ISSET","isset",156],"(",["T_VARIABLE","$data_array",156],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",156],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",156],"]",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t\t",156],["T_VARIABLE","$sku",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$data_array",157],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",157],"]",";",["T_WHITESPACE","\n\t\t",157],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_ISSET","isset",158],"(",["T_VARIABLE","$data_array",158],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",158],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SKU'",158],"]",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t",158],["T_VARIABLE","$sku",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$data_array",159],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",159],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SKU'",159],"]",";",["T_WHITESPACE","\n\t\t",159],"}",["T_WHITESPACE","\n\n\t\t",160],["T_VARIABLE","$var",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ISSET","isset",162],"(",["T_VARIABLE","$data_array",162],"[",["T_CONSTANT_ENCAPSED_STRING","'optionVar'",162],"]",")",["T_WHITESPACE"," ",162],"?",["T_WHITESPACE"," ",162],["T_VARIABLE","$data_array",162],"[",["T_CONSTANT_ENCAPSED_STRING","'optionVar'",162],"]",["T_WHITESPACE"," ",162],":",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","''",162],";",["T_WHITESPACE","\n\n\t\t",162],["T_VARIABLE","$marketplaces",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_ISSET","isset",164],"(",["T_VARIABLE","$data_array",164],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace_ids'",164],"]",")",["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_STRING","serialize",164],"(",["T_VARIABLE","$data_array",164],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace_ids'",164],"]",")",["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_STRING","serialize",164],"(",["T_ARRAY","array",164],"(",")",")",";",["T_WHITESPACE","\n\n\t\t",164],["T_VARIABLE","$data_encoded",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","json_encode",166],"(",["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$data_array",166],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",166],"]",")",")",";",["T_WHITESPACE","\n\n\t\t",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","db",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","query",168],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tREPLACE INTO `\"",168],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_STRING","DB_PREFIX",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tSET `product_id` = '\"",169],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_INT_CAST","(int)",170],["T_VARIABLE","$product_id",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`sku` = '\"",170],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","db",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","escape",171],"(",["T_VARIABLE","$sku",171],")",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`category` = '\"",171],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","db",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","escape",172],"(",["T_VARIABLE","$category",172],")",["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`data` = '\"",172],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","escape",173],"(",["T_VARIABLE","$data_encoded",173],")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`status` = 'saved',\n\t\t\t\t`insertion_id` = '',\n\t\t\t\t`price` = '\"",173],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_VARIABLE","$price",176],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`var` = '\"",176],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","db",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","escape",177],"(",["T_VARIABLE","$var",177],")",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`marketplaces` = '\"",177],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","db",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","escape",178],"(",["T_VARIABLE","$marketplaces",178],")",["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","\"'\"",178],")",";",["T_WHITESPACE","\n\t",178],"}",["T_WHITESPACE","\n\n\t",179],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","deleteSaved",181],"(",["T_VARIABLE","$product_id",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$var",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","''",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n\t\t",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","db",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","query",182],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_STRING","DB_PREFIX",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",182],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_INT_CAST","(int)",183],["T_VARIABLE","$product_id",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","db",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","escape",183],"(",["T_VARIABLE","$var",183],")",["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"'\"",183],")",";",["T_WHITESPACE","\n\t",183],"}",["T_WHITESPACE","\n\n\t",184],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getSavedProducts",186],"(",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n\t\t",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","db",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","query",187],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `ap`.`status`, `ap`.`product_id`, `ap`.`sku` as `amazonus_sku`, `pd`.`name` as `product_name`, `p`.`model` as `product_model`, `p`.`sku` as `product_sku`, `ap`.`var` as `var`\n\t\t\tFROM `\"",187],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_STRING","DB_PREFIX",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product` as `ap`\n\t\t\tLEFT JOIN `\"",189],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","DB_PREFIX",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\tON `ap`.`product_id` = `pd`.`product_id`\n\t\t\tLEFT JOIN `\"",190],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_STRING","DB_PREFIX",192],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\tON `ap`.`product_id` = `p`.`product_id`\n\t\t\tWHERE `ap`.`status` = 'saved'\n\t\t\tAND `pd`.`language_id` = '\"",192],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_INT_CAST","(int)",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","config",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","get",195],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",195],")",["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","\"'\"",195],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","rows",195],";",["T_WHITESPACE","\n\t",195],"}",["T_WHITESPACE","\n\n\t",196],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","getSavedProductsData",198],"(",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n\t\t",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","db",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","query",199],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT * FROM `\"",199],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_STRING","DB_PREFIX",200],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `status` = 'saved' AND `version` = 2\"",200],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","rows",201],";",["T_WHITESPACE","\n\t",201],"}",["T_WHITESPACE","\n\n\t",202],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","getProduct",204],"(",["T_VARIABLE","$product_id",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$var",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","''",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","query",205],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT * FROM `\"",205],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_STRING","DB_PREFIX",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",206],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_INT_CAST","(int)",207],["T_VARIABLE","$product_id",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",207],["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","db",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","escape",207],"(",["T_VARIABLE","$var",207],")",["T_WHITESPACE"," ",207],".",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",207],")",["T_OBJECT_OPERATOR","->",207],["T_STRING","row",207],";",["T_WHITESPACE","\n\t",207],"}",["T_WHITESPACE","\n\n\t",208],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","getProductCategory",210],"(",["T_VARIABLE","$product_id",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$var",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","''",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n\t\t",210],["T_VARIABLE","$row",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","db",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","query",211],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `category` FROM `\"",211],["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_STRING","DB_PREFIX",212],["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",212],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_INT_CAST","(int)",213],["T_VARIABLE","$product_id",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","db",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","escape",213],"(",["T_VARIABLE","$var",213],")",["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",213],")",["T_OBJECT_OPERATOR","->",213],["T_STRING","row",213],";",["T_WHITESPACE","\n\t\t",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$row",214],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",214],"]",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n\t\t\t",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$row",215],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",215],"]",";",["T_WHITESPACE","\n\t\t",215],"}",["T_WHITESPACE"," ",216],["T_ELSE","else",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n\t\t\t",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","\"\"",217],";",["T_WHITESPACE","\n\t\t",217],"}",["T_WHITESPACE","\n\t",218],"}",["T_WHITESPACE","\n\n\t",219],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","setProductUploaded",221],"(",["T_VARIABLE","$product_id",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$insertion_id",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$var",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","''",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n\t\t",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","db",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","query",222],"(",["T_WHITESPACE","\n\t\t\t",222],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_STRING","DB_PREFIX",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tSET `status` = 'uploaded', `insertion_id` = '\"",223],["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","db",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","escape",224],"(",["T_VARIABLE","$insertion_id",224],")",["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\tWHERE `product_id` = '\"",224],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_INT_CAST","(int)",225],["T_VARIABLE","$product_id",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","db",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","escape",225],"(",["T_VARIABLE","$var",225],")",["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",225],")",";",["T_WHITESPACE","\n\t",225],"}",["T_WHITESPACE","\n\n\t",226],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","resetUploaded",228],"(",["T_VARIABLE","$insertion_id",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n\t\t",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","db",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","query",229],"(",["T_WHITESPACE","\n\t\t\t",229],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_STRING","DB_PREFIX",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tSET `status` = 'saved', `insertion_id` = ''\n\t\t\tWHERE `insertion_id` = '\"",230],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","db",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","escape",232],"(",["T_VARIABLE","$insertion_id",232],")",["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",232],")",";",["T_WHITESPACE","\n\t",232],"}",["T_WHITESPACE","\n\n\t",233],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","getProductStatus",235],"(",["T_VARIABLE","$product_id",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\n\t\t",235],["T_VARIABLE","$rows_uploaded",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","db",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","query",237],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",237],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_STRING","DB_PREFIX",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",239],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_INT_CAST","(int)",240],["T_VARIABLE","$product_id",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'uploaded'\"",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","row",240],";",["T_WHITESPACE","\n\t\t",240],["T_VARIABLE","$rows_uploaded",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$rows_uploaded",241],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",241],"]",";",["T_WHITESPACE","\n\n\t\t",241],["T_VARIABLE","$rows_ok",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","db",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","query",243],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",243],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_STRING","DB_PREFIX",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",245],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_INT_CAST","(int)",246],["T_VARIABLE","$product_id",246],["T_WHITESPACE"," ",246],".",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'ok'\"",246],")",["T_OBJECT_OPERATOR","->",246],["T_STRING","row",246],";",["T_WHITESPACE","\n\t\t",246],["T_VARIABLE","$rows_ok",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$rows_ok",247],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",247],"]",";",["T_WHITESPACE","\n\n\t\t",247],["T_VARIABLE","$rows_error",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","db",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","query",249],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",249],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_STRING","DB_PREFIX",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",251],["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_INT_CAST","(int)",252],["T_VARIABLE","$product_id",252],["T_WHITESPACE"," ",252],".",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'error'\"",252],")",["T_OBJECT_OPERATOR","->",252],["T_STRING","row",252],";",["T_WHITESPACE","\n\t\t",252],["T_VARIABLE","$rows_error",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$rows_error",253],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",253],"]",";",["T_WHITESPACE","\n\n\t\t",253],["T_VARIABLE","$rows_saved",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","db",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","query",255],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",255],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_STRING","DB_PREFIX",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",257],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_INT_CAST","(int)",258],["T_VARIABLE","$product_id",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'saved'\"",258],")",["T_OBJECT_OPERATOR","->",258],["T_STRING","row",258],";",["T_WHITESPACE","\n\t\t",258],["T_VARIABLE","$rows_saved",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$rows_saved",259],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",259],"]",";",["T_WHITESPACE","\n\n\t\t",259],["T_VARIABLE","$rows_total",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$rows_uploaded",261],["T_WHITESPACE"," ",261],"+",["T_WHITESPACE"," ",261],["T_VARIABLE","$rows_ok",261],["T_WHITESPACE"," ",261],"+",["T_WHITESPACE"," ",261],["T_VARIABLE","$rows_error",261],["T_WHITESPACE"," ",261],"+",["T_WHITESPACE"," ",261],["T_VARIABLE","$rows_saved",261],";",["T_WHITESPACE","\n\n\t\t",261],["T_VARIABLE","$links",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","db",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","query",263],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) as count\n\t\t\tFROM `\"",263],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_STRING","DB_PREFIX",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link`\n\t\t\tWHERE `product_id` = '\"",265],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_INT_CAST","(int)",266],["T_VARIABLE","$product_id",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","\"'\"",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","row",266],";",["T_WHITESPACE","\n\t\t",266],["T_VARIABLE","$links",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$links",267],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",267],"]",";",["T_WHITESPACE","\n\n\t\t",267],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$rows_total",269],["T_WHITESPACE"," ",269],["T_IS_IDENTICAL","===",269],["T_WHITESPACE"," ",269],["T_LNUMBER","0",269],["T_WHITESPACE"," ",269],["T_BOOLEAN_AND","&&",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$links",269],["T_WHITESPACE"," ",269],">",["T_WHITESPACE"," ",269],["T_LNUMBER","0",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n\t\t\t",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'linked'",270],";",["T_WHITESPACE","\n\t\t",270],"}",["T_WHITESPACE"," ",271],["T_ELSE","else",271],["T_WHITESPACE"," ",271],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$rows_total",271],["T_WHITESPACE"," ",271],["T_IS_EQUAL","==",271],["T_WHITESPACE"," ",271],["T_LNUMBER","0",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t\t",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_STRING","false",272],";",["T_WHITESPACE","\n\t\t",272],"}",["T_WHITESPACE","\n\n\t\t",273],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_VARIABLE","$rows_uploaded",275],["T_WHITESPACE"," ",275],">",["T_WHITESPACE"," ",275],["T_LNUMBER","0",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n\t\t\t",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'processing'",276],";",["T_WHITESPACE","\n\t\t",276],"}",["T_WHITESPACE","\n\n\t\t",277],["T_IF","if",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$rows_uploaded",279],["T_WHITESPACE"," ",279],["T_IS_EQUAL","==",279],["T_WHITESPACE"," ",279],["T_LNUMBER","0",279],["T_WHITESPACE"," ",279],["T_BOOLEAN_AND","&&",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$rows_ok",279],["T_WHITESPACE"," ",279],">",["T_WHITESPACE"," ",279],["T_LNUMBER","0",279],["T_WHITESPACE"," ",279],["T_BOOLEAN_AND","&&",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$rows_error",279],["T_WHITESPACE"," ",279],["T_IS_EQUAL","==",279],["T_WHITESPACE"," ",279],["T_LNUMBER","0",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n\t\t\t",279],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'ok'",280],";",["T_WHITESPACE","\n\t\t",280],"}",["T_WHITESPACE","\n\n\t\t",281],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$rows_saved",283],["T_WHITESPACE"," ",283],">",["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n\t\t\t",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'saved'",284],";",["T_WHITESPACE","\n\t\t",284],"}",["T_WHITESPACE","\n\n\t\t",285],["T_IF","if",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$rows_uploaded",287],["T_WHITESPACE"," ",287],["T_IS_EQUAL","==",287],["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],["T_WHITESPACE"," ",287],["T_BOOLEAN_AND","&&",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$rows_error",287],["T_WHITESPACE"," ",287],">",["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],["T_WHITESPACE"," ",287],["T_BOOLEAN_AND","&&",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$rows_ok",287],["T_WHITESPACE"," ",287],["T_IS_EQUAL","==",287],["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n\t\t\t",287],["T_VARIABLE","$quick",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","db",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","query",288],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_STRING","DB_PREFIX",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product` WHERE `product_id` = \"",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_INT_CAST","(int)",288],["T_VARIABLE","$product_id",288],["T_WHITESPACE"," ",288],".",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","\" AND `version` = 3\"",288],")",["T_OBJECT_OPERATOR","->",288],["T_STRING","row",288],";",["T_WHITESPACE","\n\n\t\t\t",288],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$quick",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n\t\t\t\t",290],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'error_quick'",291],";",["T_WHITESPACE","\n\t\t\t",291],"}",["T_WHITESPACE"," ",292],["T_ELSE","else",292],["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t\t",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'error_advanced'",293],";",["T_WHITESPACE","\n\t\t\t",293],"}",["T_WHITESPACE","\n\t\t",294],"}",["T_WHITESPACE"," ",295],["T_ELSE","else",295],["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n\t\t\t",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'error_few'",296],";",["T_WHITESPACE","\n\t\t",296],"}",["T_WHITESPACE","\n\n\t\t",297],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_STRING","false",299],";",["T_WHITESPACE","\n\t",299],"}",["T_WHITESPACE","\n\n\t",300],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","getProductErrors",302],"(",["T_VARIABLE","$product_id",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$version",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_LNUMBER","2",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n\t\t",302],["T_IF","if",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$version",303],["T_WHITESPACE"," ",303],["T_IS_EQUAL","==",303],["T_WHITESPACE"," ",303],["T_LNUMBER","3",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n\t\t\t",303],["T_VARIABLE","$message_row",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","db",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","query",304],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `messages` FROM `\"",304],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_STRING","DB_PREFIX",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",305],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_INT_CAST","(int)",306],["T_VARIABLE","$product_id",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 3\"",306],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","row",306],";",["T_WHITESPACE","\n\n\t\t\t",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","json_decode",308],"(",["T_VARIABLE","$message_row",308],"[",["T_CONSTANT_ENCAPSED_STRING","'messages'",308],"]",")",";",["T_WHITESPACE","\n\t\t",308],"}",["T_WHITESPACE","\n\n\t\t",309],["T_VARIABLE","$result",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",")",";",["T_WHITESPACE","\n\n\t\t",311],["T_VARIABLE","$insertion_rows",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","db",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","query",313],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `sku`, `insertion_id` FROM `\"",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_STRING","DB_PREFIX",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product` WHERE `product_id` = '\"",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_INT_CAST","(int)",313],["T_VARIABLE","$product_id",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",313],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","rows",313],";",["T_WHITESPACE","\n\n\t\t",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(","!",["T_EMPTY","empty",315],"(",["T_VARIABLE","$insertion_rows",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n\t\t\t",315],["T_FOREACH","foreach",316],"(",["T_VARIABLE","$insertion_rows",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$insertion_row",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n\t\t\t\t",316],["T_VARIABLE","$error_rows",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","query",317],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_STRING","DB_PREFIX",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_error` WHERE `sku` = '\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","escape",317],"(",["T_VARIABLE","$insertion_row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",317],"]",")",["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"' AND `insertion_id` = '\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","escape",317],"(",["T_VARIABLE","$insertion_row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",317],"]",")",["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"'\"",317],")",["T_OBJECT_OPERATOR","->",317],["T_STRING","rows",317],";",["T_WHITESPACE","\n\n\t\t\t\t",317],["T_FOREACH","foreach",319],"(",["T_VARIABLE","$error_rows",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$error_row",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n\t\t\t\t\t",319],["T_VARIABLE","$result",320],"[","]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$error_row",320],";",["T_WHITESPACE","\n\t\t\t\t",320],"}",["T_WHITESPACE","\n\t\t\t",321],"}",["T_WHITESPACE","\n\t\t",322],"}",["T_WHITESPACE","\n\t\t",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$result",324],";",["T_WHITESPACE","\n\t",324],"}",["T_WHITESPACE","\n\n\t",325],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","getProductsWithErrors",327],"(",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n\t\t",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","db",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","query",328],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `product_id`, `sku` FROM `\"",328],["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_STRING","DB_PREFIX",329],["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `status` = 'error' AND `version` = 2\"",329],")",["T_OBJECT_OPERATOR","->",330],["T_STRING","rows",330],";",["T_WHITESPACE","\n\t",330],"}",["T_WHITESPACE","\n\n\t",331],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","deleteProduct",333],"(",["T_VARIABLE","$product_id",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n\t\t",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","db",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","query",334],"(",["T_WHITESPACE","\n\t\t\t",334],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_STRING","DB_PREFIX",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",335],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_INT_CAST","(int)",336],["T_VARIABLE","$product_id",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","\"'\"",336],")",";",["T_WHITESPACE","\n\t",336],"}",["T_WHITESPACE","\n\n\t",337],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","linkProduct",339],"(",["T_VARIABLE","$amazonus_sku",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$product_id",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$var",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n\t\t",339],["T_VARIABLE","$count",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","query",340],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) as `count` FROM `\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_STRING","DB_PREFIX",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` WHERE `product_id` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_INT_CAST","(int)",340],["T_VARIABLE","$product_id",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' AND `amazonus_sku` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","escape",340],"(",["T_VARIABLE","$amazonus_sku",340],")",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","escape",340],"(",["T_VARIABLE","$var",340],")",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","row",340],";",["T_WHITESPACE","\n\t\t\n\t\t",340],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$count",342],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",342],"]",["T_WHITESPACE"," ",342],["T_IS_EQUAL","==",342],["T_WHITESPACE"," ",342],["T_LNUMBER","0",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n\t\t\t",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","query",343],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_STRING","DB_PREFIX",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` SET `product_id` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_INT_CAST","(int)",343],["T_VARIABLE","$product_id",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"', `amazonus_sku` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","escape",343],"(",["T_VARIABLE","$amazonus_sku",343],")",["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"', `var` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","escape",343],"(",["T_VARIABLE","$var",343],")",["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"'\"",343],")",";",["T_WHITESPACE","\n\t\t",343],"}",["T_WHITESPACE","\n\t",344],"}",["T_WHITESPACE","\n\n\t",345],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","removeProductLink",347],"(",["T_VARIABLE","$amazonus_sku",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n\t\t",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","db",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","query",348],"(",["T_WHITESPACE","\n\t\t\t",348],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_STRING","DB_PREFIX",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link`\n\t\t\tWHERE `amazonus_sku` = '\"",349],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","db",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","escape",350],"(",["T_VARIABLE","$amazonus_sku",350],")",["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","\"'\"",350],")",";",["T_WHITESPACE","\n\t",350],"}",["T_WHITESPACE","\n\n\t",351],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","removeAdvancedErrors",353],"(",["T_VARIABLE","$product_id",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n\t\t",353],["T_VARIABLE","$product_rows",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","db",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","query",354],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `insertion_id` FROM `\"",354],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_STRING","DB_PREFIX",355],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tWHERE `product_id` = '\"",355],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_INT_CAST","(int)",356],["T_VARIABLE","$product_id",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",356],")",["T_OBJECT_OPERATOR","->",356],["T_STRING","rows",356],";",["T_WHITESPACE","\n\n\t\t",356],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$product_rows",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$product",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n\t\t\t",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","db",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","query",359],"(",["T_WHITESPACE","\n\t\t\t\t",359],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_STRING","DB_PREFIX",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_error`\n\t\t\t\tWHERE `insertion_id` = '\"",360],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","db",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","escape",361],"(",["T_VARIABLE","$product",361],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",361],"]",")",["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","\"'\"",361],")",";",["T_WHITESPACE","\n\t\t",361],"}",["T_WHITESPACE","\n\n\t\t",362],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","db",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","query",364],"(",["T_WHITESPACE","\n\t\t\t",364],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_STRING","DB_PREFIX",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product`\n\t\t\tSET `status` = 'saved', `insertion_id` = ''\n\t\t\tWHERE `product_id` = '\"",365],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_INT_CAST","(int)",367],["T_VARIABLE","$product_id",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","\"' AND `status` = 'error' AND `version` = 2\"",367],")",";",["T_WHITESPACE","\n\t",367],"}",["T_WHITESPACE","\n\n\t",368],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","getProductLinks",370],"(",["T_VARIABLE","$product_id",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'all'",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n\t\t",370],["T_VARIABLE","$query",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","\"SELECT `apl`.`amazonus_sku`, `apl`.`product_id`, `pd`.`name` as `product_name`, `p`.`model`, `p`.`sku`, `apl`.`var`, '' as `combination`\n\t\t\tFROM `\"",371],["T_WHITESPACE"," ",372],".",["T_WHITESPACE"," ",372],["T_STRING","DB_PREFIX",372],["T_WHITESPACE"," ",372],".",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` as `apl`\n\t\t\tLEFT JOIN `\"",372],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_STRING","DB_PREFIX",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\tON `apl`.`product_id` = `pd`.`product_id`\n\t\t\tLEFT JOIN `\"",373],["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_STRING","DB_PREFIX",375],["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\tON `apl`.`product_id` = `p`.`product_id`\"",375],";",["T_WHITESPACE","\n\t\t",376],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_VARIABLE","$product_id",377],["T_WHITESPACE"," ",377],["T_IS_NOT_EQUAL","!=",377],["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'all'",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n\t\t\t",377],["T_VARIABLE","$query",378],["T_WHITESPACE"," ",378],["T_CONCAT_EQUAL",".=",378],["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\" WHERE `apl`.`product_id` = '\"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_INT_CAST","(int)",378],["T_VARIABLE","$product_id",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"' AND `pd`.`language_id` = '\"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_INT_CAST","(int)",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","config",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","get",378],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",378],")",["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"'\"",378],";",["T_WHITESPACE","\n\t\t",378],"}",["T_WHITESPACE"," ",379],["T_ELSE","else",379],["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n\t\t\t",379],["T_VARIABLE","$query",380],["T_WHITESPACE"," ",380],["T_CONCAT_EQUAL",".=",380],["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","\"WHERE `pd`.`language_id` = '\"",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_INT_CAST","(int)",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","config",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","get",380],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",380],")",["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","\"'\"",380],";",["T_WHITESPACE","\n\t\t",380],"}",["T_WHITESPACE","\n\n\t\t",381],["T_VARIABLE","$product_links",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","db",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","query",383],"(",["T_VARIABLE","$query",383],")",["T_OBJECT_OPERATOR","->",383],["T_STRING","rows",383],";",["T_WHITESPACE","\n\n\t\t",383],["T_IF","if",385],["T_WHITESPACE"," ",385],"(",["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","openbay",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","addonLoad",385],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",385],")",")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n\t\t\t",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","load",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","model",386],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",386],")",";",["T_WHITESPACE","\n\t\t\t",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","load",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","model",387],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",387],")",";",["T_WHITESPACE","\n\n\t\t\t",387],["T_FOREACH","foreach",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$product_links",389],["T_WHITESPACE"," ",389],["T_AS","as",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$key",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$product_link",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n\t\t\t\t",389],["T_VARIABLE","$variants",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","model_extension_module_openstock",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getVariants",390],"(",["T_VARIABLE","$product_link",390],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",390],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",390],["T_IF","if",392],["T_WHITESPACE"," ",392],"(","!",["T_EMPTY","empty",392],"(",["T_VARIABLE","$variants",392],")",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n\t\t\t\t\t",392],["T_FOREACH","foreach",393],"(",["T_VARIABLE","$variants",393],["T_WHITESPACE"," ",393],["T_AS","as",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$variant",393],")",["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$variant",394],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",394],"]",["T_WHITESPACE"," ",394],["T_IS_EQUAL","==",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$product_link",394],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",394],"]",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",394],["T_VARIABLE","$product_links",395],"[",["T_VARIABLE","$key",395],"]","[",["T_CONSTANT_ENCAPSED_STRING","'combination'",395],"]",["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$variant",395],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",395],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",395],["T_BREAK","break",396],";",["T_WHITESPACE","\n\t\t\t\t\t\t",396],"}",["T_WHITESPACE","\n\t\t\t\t\t",397],"}",["T_WHITESPACE","\n\t\t\t\t",398],"}",["T_WHITESPACE","\n\t\t\t",399],"}",["T_WHITESPACE","\n\n\t\t\t",400],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$product_links",402],";",["T_WHITESPACE","\n\t\t",402],"}",["T_WHITESPACE"," ",403],["T_ELSE","else",403],["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n\t\t\t",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$product_links",404],";",["T_WHITESPACE","\n\t\t",404],"}",["T_WHITESPACE","\n\t",405],"}",["T_WHITESPACE","\n\n\t",406],["T_PUBLIC","public",408],["T_WHITESPACE"," ",408],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","getUnlinkedProducts",408],"(",")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n\t\t",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","openbay",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","addonLoad",409],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n\t\t\t",409],["T_VARIABLE","$rows",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","db",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","query",410],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT `p`.`product_id`, `p`.`model`, `p`.`sku`, `pd`.`name` as `product_name`, '' as `var`, '' as `combination`, `p`.`has_option`\n\t\t\t\tFROM `\"",410],["T_WHITESPACE"," ",412],".",["T_WHITESPACE"," ",412],["T_STRING","DB_PREFIX",412],["T_WHITESPACE"," ",412],".",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\t\tLEFT JOIN `\"",412],["T_WHITESPACE"," ",413],".",["T_WHITESPACE"," ",413],["T_STRING","DB_PREFIX",413],["T_WHITESPACE"," ",413],".",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\t\tON `p`.`product_id` = `pd`.`product_id`\n\t\t\t\tAND `pd`.`language_id` = '\"",413],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_INT_CAST","(int)",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","config",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","get",415],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",415],")",["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","\"'\"",415],")",["T_OBJECT_OPERATOR","->",415],["T_STRING","rows",415],";",["T_WHITESPACE","\n\n\t\t\t",415],["T_VARIABLE","$result",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_ARRAY","array",417],"(",")",";",["T_WHITESPACE","\n\t\t\t",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","load",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","model",418],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",418],")",";",["T_WHITESPACE","\n\t\t\t",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","load",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","model",419],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",419],")",";",["T_WHITESPACE","\n\t\t\t",419],["T_FOREACH","foreach",420],"(",["T_VARIABLE","$rows",420],["T_WHITESPACE"," ",420],["T_AS","as",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$row",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n\t\t\t\t",420],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_VARIABLE","$row",421],"[",["T_CONSTANT_ENCAPSED_STRING","'has_option'",421],"]",["T_WHITESPACE"," ",421],["T_IS_EQUAL","==",421],["T_WHITESPACE"," ",421],["T_LNUMBER","1",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n\t\t\t\t\t",421],["T_VARIABLE","$stock_opts",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","model_extension_module_openstock",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getVariants",422],"(",["T_VARIABLE","$row",422],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",422],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",422],["T_FOREACH","foreach",423],"(",["T_VARIABLE","$stock_opts",423],["T_WHITESPACE"," ",423],["T_AS","as",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$opt",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",423],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","productLinkExists",424],"(",["T_VARIABLE","$row",424],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",424],"]",",",["T_WHITESPACE"," ",424],["T_VARIABLE","$opt",424],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",424],"]",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",424],["T_CONTINUE","continue",425],";",["T_WHITESPACE","\n\t\t\t\t\t\t",425],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",426],["T_VARIABLE","$row",427],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",427],"]",["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$opt",427],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",427],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",427],["T_VARIABLE","$row",428],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",428],"]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$opt",428],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",428],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",428],["T_VARIABLE","$row",429],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",429],"]",["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$opt",429],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",429],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",429],["T_VARIABLE","$result",430],"[","]",["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$row",430],";",["T_WHITESPACE","\n\t\t\t\t\t",430],"}",["T_WHITESPACE","\n\t\t\t\t",431],"}",["T_WHITESPACE"," ",432],["T_ELSE","else",432],["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n\t\t\t\t\t",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(","!",["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","productLinkExists",433],"(",["T_VARIABLE","$row",433],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",433],"]",",",["T_WHITESPACE"," ",433],["T_VARIABLE","$row",433],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",433],"]",")",")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",433],["T_VARIABLE","$result",434],"[","]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$row",434],";",["T_WHITESPACE","\n\t\t\t\t\t",434],"}",["T_WHITESPACE","\n\t\t\t\t",435],"}",["T_WHITESPACE","\n\t\t\t",436],"}",["T_WHITESPACE","\n\t\t",437],"}",["T_WHITESPACE"," ",438],["T_ELSE","else",438],["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n\t\t\t",438],["T_VARIABLE","$result",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","db",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","query",439],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT `p`.`product_id`, `p`.`model`, `p`.`sku`, `pd`.`name` as `product_name`, '' as `var`, '' as `combination`\n\t\t\t\tFROM `\"",439],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_STRING","DB_PREFIX",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\t\tLEFT JOIN `\"",441],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_STRING","DB_PREFIX",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\t\tON `p`.`product_id` = `pd`.`product_id`\n\t\t\t\tLEFT JOIN `\"",442],["T_WHITESPACE"," ",444],".",["T_WHITESPACE"," ",444],["T_STRING","DB_PREFIX",444],["T_WHITESPACE"," ",444],".",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` as `apl`\n\t\t\t\tON `apl`.`product_id` = `p`.`product_id`\n\t\t\t\tWHERE `apl`.`amazonus_sku` IS NULL\n\t\t\t\tAND `pd`.`language_id` = '\"",444],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_INT_CAST","(int)",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","config",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","get",447],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",447],")",["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","\"'\"",447],")",["T_OBJECT_OPERATOR","->",447],["T_STRING","rows",447],";",["T_WHITESPACE","\n\t\t",447],"}",["T_WHITESPACE","\n\n\t\t",448],["T_RETURN","return",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$result",450],";",["T_WHITESPACE","\n\t",450],"}",["T_WHITESPACE","\n\n\t",451],["T_PRIVATE","private",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","productLinkExists",453],"(",["T_VARIABLE","$product_id",453],",",["T_WHITESPACE"," ",453],["T_VARIABLE","$var",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\t\t",453],["T_VARIABLE","$link",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","db",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","query",454],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_STRING","DB_PREFIX",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` WHERE `product_id` = \"",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_INT_CAST","(int)",454],["T_VARIABLE","$product_id",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","\" AND var = '\"",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","db",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","escape",454],"(",["T_VARIABLE","$var",454],")",["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","\"'\"",454],")",["T_OBJECT_OPERATOR","->",454],["T_STRING","row",454],";",["T_WHITESPACE","\n\n\t\t",454],["T_IF","if",456],["T_WHITESPACE"," ",456],"(",["T_EMPTY","empty",456],"(",["T_VARIABLE","$link",456],")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n\t\t\t",456],["T_RETURN","return",457],["T_WHITESPACE"," ",457],["T_STRING","false",457],";",["T_WHITESPACE","\n\t\t",457],"}",["T_WHITESPACE"," ",458],["T_ELSE","else",458],["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n\t\t\t",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_STRING","true",459],";",["T_WHITESPACE","\n\t\t",459],"}",["T_WHITESPACE","\n\t",460],"}",["T_WHITESPACE","\n\n\t",461],["T_PUBLIC","public",463],["T_WHITESPACE"," ",463],["T_FUNCTION","function",463],["T_WHITESPACE"," ",463],["T_STRING","getOrderStatusString",463],"(",["T_VARIABLE","$order_id",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n\t\t",463],["T_VARIABLE","$row",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","db",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","query",464],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `s`.`key`\n\t\t\tFROM `\"",464],["T_WHITESPACE"," ",466],".",["T_WHITESPACE"," ",466],["T_STRING","DB_PREFIX",466],["T_WHITESPACE"," ",466],".",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","\"order` `o`\n\t\t\tJOIN `\"",466],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_STRING","DB_PREFIX",467],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","\"setting` `s` ON `o`.`order_id` = \"",467],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_INT_CAST","(int)",467],["T_VARIABLE","$order_id",467],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","\" AND `s`.`value` = `o`.`order_status_id`\n\t\t\tWHERE `s`.`key` = 'openbay_amazonus_order_status_shipped' OR `s`.`key` = 'openbay_amazonus_order_status_canceled'\n\t\t\tLIMIT 1\"",467],")",["T_OBJECT_OPERATOR","->",469],["T_STRING","row",469],";",["T_WHITESPACE","\n\n\t\t",469],["T_IF","if",471],["T_WHITESPACE"," ",471],"(","!",["T_ISSET","isset",471],"(",["T_VARIABLE","$row",471],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",471],"]",")",["T_WHITESPACE"," ",471],["T_BOOLEAN_OR","||",471],["T_WHITESPACE"," ",471],["T_EMPTY","empty",471],"(",["T_VARIABLE","$row",471],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",471],"]",")",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n\t\t\t",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_STRING","null",472],";",["T_WHITESPACE","\n\t\t",472],"}",["T_WHITESPACE","\n\n\t\t",473],["T_VARIABLE","$key",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$row",475],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",475],"]",";",["T_WHITESPACE","\n\n\t\t",475],["T_SWITCH","switch",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$key",477],")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n\t\t\t",477],["T_CASE","case",478],["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_shipped'",478],":",["T_WHITESPACE","\n\t\t\t\t",478],["T_VARIABLE","$order_status",479],["T_WHITESPACE"," ",479],"=",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'shipped'",479],";",["T_WHITESPACE","\n\t\t\t\t",479],["T_BREAK","break",480],";",["T_WHITESPACE","\n\t\t\t",480],["T_CASE","case",481],["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_canceled'",481],":",["T_WHITESPACE","\n\t\t\t\t",481],["T_VARIABLE","$order_status",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'canceled'",482],";",["T_WHITESPACE","\n\t\t\t\t",482],["T_BREAK","break",483],";",["T_WHITESPACE","\n\n\t\t\t",483],["T_DEFAULT","default",485],":",["T_WHITESPACE","\n\t\t\t\t",485],["T_VARIABLE","$order_status",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","null",486],";",["T_WHITESPACE","\n\t\t\t\t",486],["T_BREAK","break",487],";",["T_WHITESPACE","\n\t\t",487],"}",["T_WHITESPACE","\n\n\t\t",488],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$order_status",490],";",["T_WHITESPACE","\n\t",490],"}",["T_WHITESPACE","\n\n\t",491],["T_PUBLIC","public",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","updateAmazonusOrderTracking",493],"(",["T_VARIABLE","$order_id",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$courier_id",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$courier_from_list",493],",",["T_WHITESPACE"," ",493],["T_VARIABLE","$tracking_no",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n\t\t",493],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","db",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","query",494],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_STRING","DB_PREFIX",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order` SET `courier_id` = '\"",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","db",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","escape",494],"(",["T_VARIABLE","$courier_id",494],")",["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","\"', `courier_other` = \"",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_INT_CAST","(int)",494],"!",["T_VARIABLE","$courier_from_list",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","\", `tracking_no` = '\"",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_VARIABLE","$this",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","db",494],["T_OBJECT_OPERATOR","->",494],["T_STRING","escape",494],"(",["T_VARIABLE","$tracking_no",494],")",["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = \"",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_INT_CAST","(int)",494],["T_VARIABLE","$order_id",494],["T_WHITESPACE"," ",494],".",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","\"\"",494],")",";",["T_WHITESPACE","\n\t",494],"}",["T_WHITESPACE","\n\n\t",495],["T_PUBLIC","public",497],["T_WHITESPACE"," ",497],["T_FUNCTION","function",497],["T_WHITESPACE"," ",497],["T_STRING","getAmazonusOrderId",497],"(",["T_VARIABLE","$order_id",497],")",["T_WHITESPACE"," ",497],"{",["T_WHITESPACE","\n\t\t",497],["T_VARIABLE","$row",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","db",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","query",498],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `amazonus_order_id`\n\t\t\tFROM `\"",498],["T_WHITESPACE"," ",500],".",["T_WHITESPACE"," ",500],["T_STRING","DB_PREFIX",500],["T_WHITESPACE"," ",500],".",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order`\n\t\t\tWHERE `order_id` = \"",500],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_INT_CAST","(int)",501],["T_VARIABLE","$order_id",501],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tLIMIT 1\"",501],")",["T_OBJECT_OPERATOR","->",502],["T_STRING","row",502],";",["T_WHITESPACE","\n\n\t\t",502],["T_IF","if",504],["T_WHITESPACE"," ",504],"(",["T_ISSET","isset",504],"(",["T_VARIABLE","$row",504],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",504],"]",")",["T_WHITESPACE"," ",504],["T_BOOLEAN_AND","&&",504],["T_WHITESPACE"," ",504],"!",["T_EMPTY","empty",504],"(",["T_VARIABLE","$row",504],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",504],"]",")",")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n\t\t\t",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$row",505],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",505],"]",";",["T_WHITESPACE","\n\t\t",505],"}",["T_WHITESPACE","\n\n\t\t",506],["T_RETURN","return",508],["T_WHITESPACE"," ",508],["T_STRING","null",508],";",["T_WHITESPACE","\n\t",508],"}",["T_WHITESPACE","\n\n\t",509],["T_PUBLIC","public",511],["T_WHITESPACE"," ",511],["T_FUNCTION","function",511],["T_WHITESPACE"," ",511],["T_STRING","getAmazonusOrderedProducts",511],"(",["T_VARIABLE","$order_id",511],")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n\t\t",511],["T_RETURN","return",512],["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","db",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","query",512],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `aop`.`amazonus_order_item_id`, `op`.`quantity`\n\t\t\tFROM `\"",512],["T_WHITESPACE"," ",514],".",["T_WHITESPACE"," ",514],["T_STRING","DB_PREFIX",514],["T_WHITESPACE"," ",514],".",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order_product` `aop`\n\t\t\tJOIN `\"",514],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_STRING","DB_PREFIX",515],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","\"order_product` `op` ON `op`.`order_product_id` = `aop`.`order_product_id`\n\t\t\t\tAND `op`.`order_id` = \"",515],["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_INT_CAST","(int)",516],["T_VARIABLE","$order_id",516],")",["T_OBJECT_OPERATOR","->",516],["T_STRING","rows",516],";",["T_WHITESPACE","\n\t",516],"}",["T_WHITESPACE","\n\n\t",517],["T_PUBLIC","public",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","getProductQuantity",519],"(",["T_VARIABLE","$product_id",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$var",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","''",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n\t\t",519],["T_VARIABLE","$result",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_STRING","null",520],";",["T_WHITESPACE","\n\n\t\t",520],["T_IF","if",522],["T_WHITESPACE"," ",522],"(",["T_VARIABLE","$var",522],["T_WHITESPACE"," ",522],["T_IS_NOT_IDENTICAL","!==",522],["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","''",522],["T_WHITESPACE"," ",522],["T_BOOLEAN_AND","&&",522],["T_WHITESPACE"," ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","openbay",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","addonLoad",522],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",522],")",")",["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n\t\t\t",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","load",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","model",523],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",523],")",";",["T_WHITESPACE","\n\t\t\t",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","load",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","model",524],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",524],")",";",["T_WHITESPACE","\n\t\t\t",524],["T_VARIABLE","$option_stocks",525],["T_WHITESPACE"," ",525],"=",["T_WHITESPACE"," ",525],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","model_extension_module_openstock",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","getVariants",525],"(",["T_VARIABLE","$product_id",525],")",";",["T_WHITESPACE","\n\n\t\t\t",525],["T_VARIABLE","$option",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_STRING","null",527],";",["T_WHITESPACE","\n\t\t\t",527],["T_FOREACH","foreach",528],["T_WHITESPACE"," ",528],"(",["T_VARIABLE","$option_stocks",528],["T_WHITESPACE"," ",528],["T_AS","as",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$option_iterator",528],")",["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n\t\t\t\t",528],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$option_iterator",529],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",529],"]",["T_WHITESPACE"," ",529],["T_IS_IDENTICAL","===",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$var",529],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n\t\t\t\t\t",529],["T_VARIABLE","$option",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$option_iterator",530],";",["T_WHITESPACE","\n\t\t\t\t\t",530],["T_BREAK","break",531],";",["T_WHITESPACE","\n\t\t\t\t",531],"}",["T_WHITESPACE","\n\t\t\t",532],"}",["T_WHITESPACE","\n\n\t\t\t",533],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$option",535],["T_WHITESPACE"," ",535],["T_IS_NOT_EQUAL","!=",535],["T_WHITESPACE"," ",535],["T_STRING","null",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n\t\t\t\t",535],["T_VARIABLE","$result",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$option",536],"[",["T_CONSTANT_ENCAPSED_STRING","'stock'",536],"]",";",["T_WHITESPACE","\n\t\t\t",536],"}",["T_WHITESPACE","\n\t\t",537],"}",["T_WHITESPACE"," ",538],["T_ELSE","else",538],["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n\t\t\t",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","load",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","model",539],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",539],")",";",["T_WHITESPACE","\n\t\t\t",539],["T_VARIABLE","$product_info",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","model_catalog_product",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","getProduct",540],"(",["T_VARIABLE","$product_id",540],")",";",["T_WHITESPACE","\n\n\t\t\t",540],["T_IF","if",542],["T_WHITESPACE"," ",542],"(",["T_ISSET","isset",542],"(",["T_VARIABLE","$product_info",542],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",542],"]",")",")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n\t\t\t\t",542],["T_VARIABLE","$result",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$product_info",543],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",543],"]",";",["T_WHITESPACE","\n\t\t\t",543],"}",["T_WHITESPACE","\n\t\t",544],"}",["T_WHITESPACE","\n\t\t",545],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$result",546],";",["T_WHITESPACE","\n\t",546],"}",["T_WHITESPACE","\n\n\t",547],["T_PUBLIC","public",549],["T_WHITESPACE"," ",549],["T_FUNCTION","function",549],["T_WHITESPACE"," ",549],["T_STRING","getProductSearchTotal",549],"(",["T_VARIABLE","$data",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_ARRAY","array",549],"(",")",")",["T_WHITESPACE"," ",549],"{",["T_WHITESPACE","\n\t\t",549],["T_VARIABLE","$sql",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) AS product_total\n\t\t\tFROM \"",550],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_STRING","DB_PREFIX",552],["T_WHITESPACE"," ",552],".",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\tLEFT JOIN \"",552],["T_WHITESPACE"," ",553],".",["T_WHITESPACE"," ",553],["T_STRING","DB_PREFIX",553],["T_WHITESPACE"," ",553],".",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_search aps ON p.product_id = aps.product_id\n\t\t\tLEFT JOIN \"",553],["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_STRING","DB_PREFIX",554],["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON p.product_id = apl.product_id\n\t\t\tLEFT JOIN \"",554],["T_WHITESPACE"," ",555],".",["T_WHITESPACE"," ",555],["T_STRING","DB_PREFIX",555],["T_WHITESPACE"," ",555],".",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product ap ON p.product_id = ap.product_id\n\t\t\tWHERE apl.product_id IS NULL AND ap.product_id IS NULL \"",555],";",["T_WHITESPACE","\n\n\t\t",556],["T_IF","if",558],["T_WHITESPACE"," ",558],"(","!",["T_EMPTY","empty",558],"(",["T_VARIABLE","$data",558],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",558],"]",")",")",["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n\t\t\t",558],["T_VARIABLE","$sql",559],["T_WHITESPACE"," ",559],["T_CONCAT_EQUAL",".=",559],["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","\" AND aps.status = '\"",559],["T_WHITESPACE"," ",559],".",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","db",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","escape",559],"(",["T_VARIABLE","$data",559],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",559],"]",")",["T_WHITESPACE"," ",559],".",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","\"'\"",559],";",["T_WHITESPACE","\n\t\t",559],"}",["T_WHITESPACE","\n\n\t\t",560],["T_RETURN","return",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","db",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","query",562],"(",["T_VARIABLE","$sql",562],")",["T_OBJECT_OPERATOR","->",562],["T_STRING","row",562],"[",["T_CONSTANT_ENCAPSED_STRING","'product_total'",562],"]",";",["T_WHITESPACE","\n\t",562],"}",["T_WHITESPACE","\n\n\t",563],["T_PUBLIC","public",565],["T_WHITESPACE"," ",565],["T_FUNCTION","function",565],["T_WHITESPACE"," ",565],["T_STRING","getProductSearch",565],"(",["T_VARIABLE","$data",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],"(",")",")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n\t\t",565],["T_VARIABLE","$sql",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT p.product_id, aps.status, aps.data, aps.matches\n\t\t\tFROM \"",566],["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_STRING","DB_PREFIX",568],["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\tLEFT JOIN \"",568],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_STRING","DB_PREFIX",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_search aps ON p.product_id = aps.product_id\n\t\t\tLEFT JOIN \"",569],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_STRING","DB_PREFIX",570],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON p.product_id = apl.product_id\n\t\t\tLEFT JOIN \"",570],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_STRING","DB_PREFIX",571],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product ap ON p.product_id = ap.product_id\n\t\t\tWHERE apl.product_id IS NULL AND ap.product_id IS NULL \"",571],";",["T_WHITESPACE","\n\n\t\t",572],["T_IF","if",574],["T_WHITESPACE"," ",574],"(","!",["T_EMPTY","empty",574],"(",["T_VARIABLE","$data",574],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",574],"]",")",")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n\t\t\t",574],["T_VARIABLE","$sql",575],["T_WHITESPACE"," ",575],["T_CONCAT_EQUAL",".=",575],["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","\" AND aps.status = '\"",575],["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","db",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","escape",575],"(",["T_VARIABLE","$data",575],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",575],"]",")",["T_WHITESPACE"," ",575],".",["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","\"'\"",575],";",["T_WHITESPACE","\n\t\t",575],"}",["T_WHITESPACE","\n\n\t\t",576],["T_VARIABLE","$sql",578],["T_WHITESPACE"," ",578],["T_CONCAT_EQUAL",".=",578],["T_WHITESPACE"," ",578],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT \"",578],["T_WHITESPACE"," ",578],".",["T_WHITESPACE"," ",578],["T_INT_CAST","(int)",578],["T_VARIABLE","$data",578],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",578],"]",["T_WHITESPACE"," ",578],".",["T_WHITESPACE"," ",578],["T_CONSTANT_ENCAPSED_STRING","\", \"",578],["T_WHITESPACE"," ",578],".",["T_WHITESPACE"," ",578],["T_INT_CAST","(int)",578],["T_VARIABLE","$data",578],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",578],"]",";",["T_WHITESPACE","\n\n\t\t",578],["T_VARIABLE","$results",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_ARRAY","array",580],"(",")",";",["T_WHITESPACE","\n\n\t\t",580],["T_VARIABLE","$rows",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","db",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","query",582],"(",["T_VARIABLE","$sql",582],")",["T_OBJECT_OPERATOR","->",582],["T_STRING","rows",582],";",["T_WHITESPACE","\n\n\t\t",582],["T_FOREACH","foreach",584],["T_WHITESPACE"," ",584],"(",["T_VARIABLE","$rows",584],["T_WHITESPACE"," ",584],["T_AS","as",584],["T_WHITESPACE"," ",584],["T_VARIABLE","$row",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n\t\t\t",584],["T_VARIABLE","$results",585],"[","]",["T_WHITESPACE"," ",585],"=",["T_WHITESPACE"," ",585],["T_ARRAY","array",585],"(",["T_WHITESPACE","\n\t\t\t\t",585],["T_CONSTANT_ENCAPSED_STRING","'product_id'",586],["T_WHITESPACE"," ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],["T_VARIABLE","$row",586],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",586],"]",",",["T_WHITESPACE","\n\t\t\t\t",586],["T_CONSTANT_ENCAPSED_STRING","'status'",587],["T_WHITESPACE"," ",587],["T_DOUBLE_ARROW","=>",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$row",587],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",587],"]",",",["T_WHITESPACE","\n\t\t\t\t",587],["T_CONSTANT_ENCAPSED_STRING","'matches'",588],["T_WHITESPACE"," ",588],["T_DOUBLE_ARROW","=>",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$row",588],"[",["T_CONSTANT_ENCAPSED_STRING","'matches'",588],"]",",",["T_WHITESPACE","\n\t\t\t\t",588],["T_CONSTANT_ENCAPSED_STRING","'data'",589],["T_WHITESPACE"," ",589],["T_DOUBLE_ARROW","=>",589],["T_WHITESPACE"," ",589],["T_STRING","json_decode",589],"(",["T_VARIABLE","$row",589],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",589],"]",",",["T_WHITESPACE"," ",589],["T_LNUMBER","1",589],")",",",["T_WHITESPACE","\n\t\t\t",589],")",";",["T_WHITESPACE","\n\t\t",590],"}",["T_WHITESPACE","\n\n\t\t",591],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$results",593],";",["T_WHITESPACE","\n\t",593],"}",["T_WHITESPACE","\n\n\t",594],["T_PUBLIC","public",596],["T_WHITESPACE"," ",596],["T_FUNCTION","function",596],["T_WHITESPACE"," ",596],["T_STRING","updateAmazonSkusQuantities",596],"(",["T_VARIABLE","$skus",596],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n\t\t",596],["T_VARIABLE","$sku_array",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_ARRAY","array",597],"(",")",";",["T_WHITESPACE","\n\n\t\t",597],["T_FOREACH","foreach",599],["T_WHITESPACE"," ",599],"(",["T_VARIABLE","$skus",599],["T_WHITESPACE"," ",599],["T_AS","as",599],["T_WHITESPACE"," ",599],["T_VARIABLE","$sku",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n\t\t\t",599],["T_VARIABLE","$sku_array",600],"[","]",["T_WHITESPACE"," ",600],"=",["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","\"'\"",600],["T_WHITESPACE"," ",600],".",["T_WHITESPACE"," ",600],["T_VARIABLE","$this",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","db",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","escape",600],"(",["T_VARIABLE","$sku",600],")",["T_WHITESPACE"," ",600],".",["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","\"'\"",600],";",["T_WHITESPACE","\n\t\t",600],"}",["T_WHITESPACE","\n\n\t\t",601],["T_IF","if",603],["T_WHITESPACE"," ",603],"(",["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","openbay",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","addonLoad",603],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",603],")",")",["T_WHITESPACE"," ",603],"{",["T_WHITESPACE","\n\t\t\t",603],["T_VARIABLE","$rows",604],["T_WHITESPACE"," ",604],"=",["T_WHITESPACE"," ",604],["T_VARIABLE","$this",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","db",604],["T_OBJECT_OPERATOR","->",604],["T_STRING","query",604],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT apl.amazonus_sku, if (por.product_id IS NULL, p.quantity, por.stock) AS 'quantity'\n\t\t\t\tFROM \"",604],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_STRING","DB_PREFIX",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl\n\t\t\t\tJOIN \"",606],["T_WHITESPACE"," ",607],".",["T_WHITESPACE"," ",607],["T_STRING","DB_PREFIX",607],["T_WHITESPACE"," ",607],".",["T_WHITESPACE"," ",607],["T_CONSTANT_ENCAPSED_STRING","\"product p ON apl.product_id = p.product_id\n\t\t\t\tLEFT JOIN \"",607],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_STRING","DB_PREFIX",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant por ON apl.product_id = por.product_id AND apl.var = por.sku\n\t\t\t\tWHERE apl.amazonus_sku IN (\"",608],["T_WHITESPACE"," ",609],".",["T_WHITESPACE"," ",609],["T_STRING","implode",609],"(",["T_CONSTANT_ENCAPSED_STRING","','",609],",",["T_WHITESPACE"," ",609],["T_VARIABLE","$sku_array",609],")",["T_WHITESPACE"," ",609],".",["T_WHITESPACE"," ",609],["T_CONSTANT_ENCAPSED_STRING","\")\n\t\t\t\"",609],")",["T_OBJECT_OPERATOR","->",610],["T_STRING","rows",610],";",["T_WHITESPACE","\n\t\t",610],"}",["T_WHITESPACE"," ",611],["T_ELSE","else",611],["T_WHITESPACE"," ",611],"{",["T_WHITESPACE","\n\t\t\t",611],["T_VARIABLE","$rows",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","db",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","query",612],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT apl.amazonus_sku, p.quantity\n\t\t\t\tFROM \"",612],["T_WHITESPACE"," ",614],".",["T_WHITESPACE"," ",614],["T_STRING","DB_PREFIX",614],["T_WHITESPACE"," ",614],".",["T_WHITESPACE"," ",614],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl\n\t\t\t\tJOIN \"",614],["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_STRING","DB_PREFIX",615],["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","\"product p ON apl.product_id = p.product_id\n\t\t\t\tWHERE apl.amazonus_sku IN (\"",615],["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_STRING","implode",616],"(",["T_CONSTANT_ENCAPSED_STRING","','",616],",",["T_WHITESPACE"," ",616],["T_VARIABLE","$sku_array",616],")",["T_WHITESPACE"," ",616],".",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","\")\n\t\t\t\"",616],")",["T_OBJECT_OPERATOR","->",617],["T_STRING","rows",617],";",["T_WHITESPACE","\n\t\t",617],"}",["T_WHITESPACE","\n\n\t\t",618],["T_VARIABLE","$return",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],["T_ARRAY","array",620],"(",")",";",["T_WHITESPACE","\n\n\t\t",620],["T_FOREACH","foreach",622],["T_WHITESPACE"," ",622],"(",["T_VARIABLE","$rows",622],["T_WHITESPACE"," ",622],["T_AS","as",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$row",622],")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n\t\t\t",622],["T_VARIABLE","$return",623],"[",["T_VARIABLE","$row",623],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_sku'",623],"]","]",["T_WHITESPACE"," ",623],"=",["T_WHITESPACE"," ",623],["T_VARIABLE","$row",623],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",623],"]",";",["T_WHITESPACE","\n\t\t",623],"}",["T_WHITESPACE","\n\n\t\t",624],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","openbay",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","amazonus",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","updateQuantities",626],"(",["T_VARIABLE","$return",626],")",";",["T_WHITESPACE","\n\t",626],"}",["T_WHITESPACE","\n\n\t",627],["T_PUBLIC","public",629],["T_WHITESPACE"," ",629],["T_FUNCTION","function",629],["T_WHITESPACE"," ",629],["T_STRING","getTotalUnlinkedItemsFromReport",629],"(",")",["T_WHITESPACE"," ",629],"{",["T_WHITESPACE","\n\t\t",629],["T_IF","if",630],["T_WHITESPACE"," ",630],"(",["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","openbay",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","addonLoad",630],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",630],")",")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n\t\t\t",630],["T_VARIABLE","$result",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_VARIABLE","$this",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","db",631],["T_OBJECT_OPERATOR","->",631],["T_STRING","query",631],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, oc_sku.pov_id\n\t\t\t\tFROM \"",631],["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_STRING","DB_PREFIX",633],["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t  SELECT p.product_id, if (por.product_id IS NULL, p.sku, por.sku) AS 'sku', if (por.product_id IS NULL, NULL, por.sku) AS 'var', if (por.product_id IS NULL, p.quantity, por.stock) AS 'quantity', por.product_option_variant_id AS pov_id\n\t\t\t\t  FROM \"",633],["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_STRING","DB_PREFIX",636],["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t  LEFT JOIN \"",636],["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_STRING","DB_PREFIX",637],["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant por USING(product_id)\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",637],["T_WHITESPACE"," ",639],".",["T_WHITESPACE"," ",639],["T_STRING","DB_PREFIX",639],["T_WHITESPACE"," ",639],".",["T_WHITESPACE"," ",639],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",639],["T_WHITESPACE"," ",640],".",["T_WHITESPACE"," ",640],["T_STRING","DB_PREFIX",640],["T_WHITESPACE"," ",640],".",["T_WHITESPACE"," ",640],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",640],["T_WHITESPACE"," ",640],".",["T_WHITESPACE"," ",640],["T_INT_CAST","(int)",640],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","config",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","get",640],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",640],")",["T_WHITESPACE"," ",640],".",["T_WHITESPACE"," ",640],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL\n\t\t\t\"",640],")",";",["T_WHITESPACE","\n\t\t",642],"}",["T_WHITESPACE"," ",643],["T_ELSE","else",643],["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n\t\t\t",643],["T_VARIABLE","$result",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","db",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","query",644],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, '' AS combination\n\t\t\t\tFROM \"",644],["T_WHITESPACE"," ",646],".",["T_WHITESPACE"," ",646],["T_STRING","DB_PREFIX",646],["T_WHITESPACE"," ",646],".",["T_WHITESPACE"," ",646],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t\tSELECT p.product_id, p.sku, NULL AS 'var', p.quantity\n\t\t\t\t\tFROM \"",646],["T_WHITESPACE"," ",649],".",["T_WHITESPACE"," ",649],["T_STRING","DB_PREFIX",649],["T_WHITESPACE"," ",649],".",["T_WHITESPACE"," ",649],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",649],["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_STRING","DB_PREFIX",651],["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",651],["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_STRING","DB_PREFIX",652],["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",652],["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_INT_CAST","(int)",652],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","config",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","get",652],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",652],")",["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL\n\t\t\t\tORDER BY alr.sku\n\t\t\t\"",652],")",";",["T_WHITESPACE","\n\t\t",655],"}",["T_WHITESPACE","\n\n\t\t",656],["T_RETURN","return",658],["T_WHITESPACE"," ",658],["T_INT_CAST","(int)",658],["T_VARIABLE","$result",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","num_rows",658],";",["T_WHITESPACE","\n\t",658],"}",["T_WHITESPACE","\n\n\t",659],["T_PUBLIC","public",661],["T_WHITESPACE"," ",661],["T_FUNCTION","function",661],["T_WHITESPACE"," ",661],["T_STRING","getUnlinkedItemsFromReport",661],"(",["T_VARIABLE","$limit",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_LNUMBER","100",661],",",["T_WHITESPACE"," ",661],["T_VARIABLE","$page",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_LNUMBER","1",661],")",["T_WHITESPACE"," ",661],"{",["T_WHITESPACE","\n\t\t",661],["T_VARIABLE","$start",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$limit",662],["T_WHITESPACE"," ",662],"*",["T_WHITESPACE"," ",662],"(",["T_VARIABLE","$page",662],["T_WHITESPACE"," ",662],"-",["T_WHITESPACE"," ",662],["T_LNUMBER","1",662],")",";",["T_WHITESPACE","\n\n\t\t",662],["T_IF","if",664],["T_WHITESPACE"," ",664],"(",["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","openbay",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","addonLoad",664],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",664],")",")",["T_WHITESPACE"," ",664],"{",["T_WHITESPACE","\n\t\t\t",664],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","load",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","model",665],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",665],")",";",["T_WHITESPACE","\n\t\t\t",665],["T_VARIABLE","$rows",666],["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],["T_VARIABLE","$this",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","db",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","query",666],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, oc_sku.pov_id\n\t\t\t\tFROM \"",666],["T_WHITESPACE"," ",668],".",["T_WHITESPACE"," ",668],["T_STRING","DB_PREFIX",668],["T_WHITESPACE"," ",668],".",["T_WHITESPACE"," ",668],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t  SELECT p.product_id, if (por.product_id IS NULL, p.sku, por.sku) AS 'sku', if (por.product_id IS NULL, NULL, por.sku) AS 'var', if (por.product_id IS NULL, p.quantity, por.stock) AS 'quantity', por.product_option_variant_id AS pov_id\n\t\t\t\t  FROM \"",668],["T_WHITESPACE"," ",671],".",["T_WHITESPACE"," ",671],["T_STRING","DB_PREFIX",671],["T_WHITESPACE"," ",671],".",["T_WHITESPACE"," ",671],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t  LEFT JOIN \"",671],["T_WHITESPACE"," ",672],".",["T_WHITESPACE"," ",672],["T_STRING","DB_PREFIX",672],["T_WHITESPACE"," ",672],".",["T_WHITESPACE"," ",672],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant por USING(product_id)\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",672],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_STRING","DB_PREFIX",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",674],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_STRING","DB_PREFIX",675],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",675],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_INT_CAST","(int)",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","config",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","get",675],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",675],")",["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL\n\t\t\t\tORDER BY alr.sku\n\t\t\t\tLIMIT \"",675],["T_WHITESPACE"," ",678],".",["T_WHITESPACE"," ",678],["T_INT_CAST","(int)",678],["T_VARIABLE","$start",678],["T_WHITESPACE"," ",678],".",["T_WHITESPACE"," ",678],["T_CONSTANT_ENCAPSED_STRING","\",\"",678],["T_WHITESPACE"," ",678],".",["T_WHITESPACE"," ",678],["T_INT_CAST","(int)",678],["T_VARIABLE","$limit",678],")",["T_OBJECT_OPERATOR","->",678],["T_STRING","rows",678],";",["T_WHITESPACE","\n\t\t",678],"}",["T_WHITESPACE"," ",679],["T_ELSE","else",679],["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n\t\t\t",679],["T_VARIABLE","$rows",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_VARIABLE","$this",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","db",680],["T_OBJECT_OPERATOR","->",680],["T_STRING","query",680],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, '' AS combination\n\t\t\t\tFROM \"",680],["T_WHITESPACE"," ",682],".",["T_WHITESPACE"," ",682],["T_STRING","DB_PREFIX",682],["T_WHITESPACE"," ",682],".",["T_WHITESPACE"," ",682],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t\tSELECT p.product_id, p.sku, NULL AS 'var', p.quantity\n\t\t\t\t\tFROM \"",682],["T_WHITESPACE"," ",685],".",["T_WHITESPACE"," ",685],["T_STRING","DB_PREFIX",685],["T_WHITESPACE"," ",685],".",["T_WHITESPACE"," ",685],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",685],["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_STRING","DB_PREFIX",687],["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",687],["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_STRING","DB_PREFIX",688],["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",688],["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_INT_CAST","(int)",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","config",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","get",688],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",688],")",["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL\n\t\t\t\tORDER BY alr.sku\n\t\t\t\tLIMIT \"",688],["T_WHITESPACE"," ",691],".",["T_WHITESPACE"," ",691],["T_INT_CAST","(int)",691],["T_VARIABLE","$start",691],["T_WHITESPACE"," ",691],".",["T_WHITESPACE"," ",691],["T_CONSTANT_ENCAPSED_STRING","\",\"",691],["T_WHITESPACE"," ",691],".",["T_WHITESPACE"," ",691],["T_INT_CAST","(int)",691],["T_VARIABLE","$limit",691],")",["T_OBJECT_OPERATOR","->",691],["T_STRING","rows",691],";",["T_WHITESPACE","\n\t\t",691],"}",["T_WHITESPACE","\n\n\t\t",692],["T_VARIABLE","$products",694],["T_WHITESPACE"," ",694],"=",["T_WHITESPACE"," ",694],["T_ARRAY","array",694],"(",")",";",["T_WHITESPACE","\n\n\t\t",694],["T_FOREACH","foreach",696],["T_WHITESPACE"," ",696],"(",["T_VARIABLE","$rows",696],["T_WHITESPACE"," ",696],["T_AS","as",696],["T_WHITESPACE"," ",696],["T_VARIABLE","$row",696],")",["T_WHITESPACE"," ",696],"{",["T_WHITESPACE","\n\t\t\t",696],["T_VARIABLE","$combinations",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_ARRAY","array",697],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",697],["T_IF","if",699],["T_WHITESPACE"," ",699],"(",["T_ISSET","isset",699],"(",["T_VARIABLE","$row",699],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",699],"]",")",["T_WHITESPACE"," ",699],["T_BOOLEAN_AND","&&",699],["T_WHITESPACE"," ",699],"!",["T_EMPTY","empty",699],"(",["T_VARIABLE","$row",699],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",699],"]",")",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n\t\t\t\t",699],["T_VARIABLE","$variants",700],["T_WHITESPACE"," ",700],"=",["T_WHITESPACE"," ",700],"(",["T_ISSET","isset",700],"(",["T_VARIABLE","$row",700],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",700],"]",")",["T_WHITESPACE"," ",700],"?",["T_WHITESPACE"," ",700],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","model_extension_module_openstock",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","getVariant",700],"(",["T_VARIABLE","$row",700],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",700],"]",")",["T_WHITESPACE"," ",700],":",["T_WHITESPACE"," ",700],["T_CONSTANT_ENCAPSED_STRING","''",700],")",";",["T_WHITESPACE","\n\n\t\t\t\t",700],["T_FOREACH","foreach",702],["T_WHITESPACE"," ",702],"(",["T_VARIABLE","$variants",702],["T_WHITESPACE"," ",702],["T_AS","as",702],["T_WHITESPACE"," ",702],["T_VARIABLE","$variant",702],")",["T_WHITESPACE"," ",702],"{",["T_WHITESPACE","\n\t\t\t\t\t",702],["T_VARIABLE","$combinations",703],"[","]",["T_WHITESPACE"," ",703],"=",["T_WHITESPACE","  ",703],["T_VARIABLE","$variant",703],"[",["T_CONSTANT_ENCAPSED_STRING","'option_value_name'",703],"]",";",["T_WHITESPACE","\n\t\t\t\t",703],"}",["T_WHITESPACE","\n\t\t\t",704],"}",["T_WHITESPACE","\n\n\t\t\t",705],["T_VARIABLE","$products",707],"[","]",["T_WHITESPACE"," ",707],"=",["T_WHITESPACE"," ",707],["T_ARRAY","array",707],"(",["T_WHITESPACE","\n\t\t\t\t",707],["T_CONSTANT_ENCAPSED_STRING","'product_id'",708],["T_WHITESPACE"," ",708],["T_DOUBLE_ARROW","=>",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$row",708],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",708],"]",",",["T_WHITESPACE","\n\t\t\t\t",708],["T_CONSTANT_ENCAPSED_STRING","'name'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$row",709],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",709],"]",",",["T_WHITESPACE","\n\t\t\t\t",709],["T_CONSTANT_ENCAPSED_STRING","'sku'",710],["T_WHITESPACE"," ",710],["T_DOUBLE_ARROW","=>",710],["T_WHITESPACE"," ",710],["T_VARIABLE","$row",710],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",710],"]",",",["T_WHITESPACE","\n\t\t\t\t",710],["T_CONSTANT_ENCAPSED_STRING","'var'",711],["T_WHITESPACE"," ",711],["T_DOUBLE_ARROW","=>",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$row",711],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",711],"]",",",["T_WHITESPACE","\n\t\t\t\t",711],["T_CONSTANT_ENCAPSED_STRING","'quantity'",712],["T_WHITESPACE"," ",712],["T_DOUBLE_ARROW","=>",712],["T_WHITESPACE"," ",712],["T_VARIABLE","$row",712],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",712],"]",",",["T_WHITESPACE","\n\t\t\t\t",712],["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",713],["T_WHITESPACE"," ",713],["T_DOUBLE_ARROW","=>",713],["T_WHITESPACE"," ",713],["T_VARIABLE","$row",713],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",713],"]",",",["T_WHITESPACE","\n\t\t\t\t",713],["T_CONSTANT_ENCAPSED_STRING","'amazon_quantity'",714],["T_WHITESPACE"," ",714],["T_DOUBLE_ARROW","=>",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$row",714],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_quantity'",714],"]",",",["T_WHITESPACE","\n\t\t\t\t",714],["T_CONSTANT_ENCAPSED_STRING","'amazon_price'",715],["T_WHITESPACE"," ",715],["T_DOUBLE_ARROW","=>",715],["T_WHITESPACE"," ",715],["T_STRING","number_format",715],"(",["T_VARIABLE","$row",715],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_price'",715],"]",",",["T_WHITESPACE"," ",715],["T_LNUMBER","2",715],",",["T_WHITESPACE"," ",715],["T_CONSTANT_ENCAPSED_STRING","'.'",715],",",["T_WHITESPACE"," ",715],["T_CONSTANT_ENCAPSED_STRING","''",715],")",",",["T_WHITESPACE","\n\t\t\t\t",715],["T_CONSTANT_ENCAPSED_STRING","'asin'",716],["T_WHITESPACE"," ",716],["T_DOUBLE_ARROW","=>",716],["T_WHITESPACE"," ",716],["T_VARIABLE","$row",716],"[",["T_CONSTANT_ENCAPSED_STRING","'asin'",716],"]",",",["T_WHITESPACE","\n\t\t\t\t",716],["T_CONSTANT_ENCAPSED_STRING","'combination'",717],["T_WHITESPACE"," ",717],["T_DOUBLE_ARROW","=>",717],["T_WHITESPACE"," ",717],["T_STRING","implode",717],"(",["T_CONSTANT_ENCAPSED_STRING","' > '",717],",",["T_WHITESPACE"," ",717],["T_VARIABLE","$combinations",717],")",",",["T_WHITESPACE","\n\t\t\t",717],")",";",["T_WHITESPACE","\n\t\t",718],"}",["T_WHITESPACE","\n\n\t\t",719],["T_RETURN","return",721],["T_WHITESPACE"," ",721],["T_VARIABLE","$products",721],";",["T_WHITESPACE","\n\t",721],"}",["T_WHITESPACE","\n\n\t",722],["T_PUBLIC","public",724],["T_WHITESPACE"," ",724],["T_FUNCTION","function",724],["T_WHITESPACE"," ",724],["T_STRING","deleteListingReports",724],"(",")",["T_WHITESPACE"," ",724],"{",["T_WHITESPACE","\n\t\t",724],["T_VARIABLE","$this",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","db",725],["T_OBJECT_OPERATOR","->",725],["T_STRING","query",725],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tDELETE FROM \"",725],["T_WHITESPACE"," ",726],".",["T_WHITESPACE"," ",726],["T_STRING","DB_PREFIX",726],["T_WHITESPACE"," ",726],".",["T_WHITESPACE"," ",726],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_listing_report\n\t\t\"",726],")",";",["T_WHITESPACE","\n\t",727],"}",["T_WHITESPACE","\n",728],"}"]
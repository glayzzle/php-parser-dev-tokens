[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayAmazon",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","install",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model_extension_event",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","addEvent",6],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_add_order'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'catalog\/model\/checkout\/order\/addOrderHistory\/after'",6],",",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/amazon\/eventAddOrderHistory'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","query",8],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",8],["T_WHITESPACE"," ",9],".",["T_WHITESPACE"," ",9],["T_STRING","DB_PREFIX",9],["T_WHITESPACE"," ",9],".",["T_WHITESPACE"," ",9],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` (\n\t\t\t  `order_id` int(11) NOT NULL ,\n\t\t\t  `amazon_order_id` char(19) NOT NULL ,\n\t\t\t  `courier_id` varchar(255) NOT NULL ,\n\t\t\t  `courier_other` tinyint(1) NOT NULL,\n\t\t\t  `tracking_no` varchar(255) NOT NULL ,\n\t\t\t  PRIMARY KEY (`order_id`, `amazon_order_id`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",9],")",";",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","db",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","query",18],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",18],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_STRING","DB_PREFIX",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order_product` (\n\t\t\t\t`order_product_id` int(11) NOT NULL ,\n\t\t\t\t`amazon_order_item_id` varchar(255) NOT NULL,\n\t\t\t\tPRIMARY KEY(`order_product_id`, `amazon_order_item_id`)\n\t\t);\"",19],")",";",["T_WHITESPACE","\n\n\t\t",23],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","query",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",25],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_PREFIX",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_unshipped` (\n\t\t\t\t`order_id` int(11) NOT NULL,\n\t\t\t\t`product_id` int(11) NOT NULL,\n\t\t\t\t`quantity` int(11) NOT NULL DEFAULT '0',\n\t\t\t\tPRIMARY KEY (`order_id`,`product_id`)\n\t\t\t) DEFAULT COLLATE=utf8_general_ci;\"",26],")",";",["T_WHITESPACE","\n\n\t\t",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","query",33],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",33],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_STRING","DB_PREFIX",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` (\n\t\t  `version` int(11) NOT NULL DEFAULT 2,\n\t\t  `product_id`  int(11) NOT NULL ,\n\t\t  `category`  varchar(255) NOT NULL ,\n\t\t  `sku`  varchar(255) NOT NULL ,\n\t\t  `insertion_id` varchar(255) NOT NULL ,\n\t\t  `data`  text NOT NULL ,\n\t\t  `status` enum('saved','uploaded','ok','error') NOT NULL ,\n\t\t  `price`  decimal(15,4) NOT NULL COMMENT 'Price on Amazon' ,\n\t\t  `var` char(100) NOT NULL DEFAULT '',\n\t\t  `marketplaces` text NOT NULL ,\n\t\t  `messages` text NOT NULL,\n\t\t  PRIMARY KEY (`product_id`, `var`)\n\t\t);\"",34],")",";",["T_WHITESPACE","\n\n\t\t",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","db",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","query",49],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",49],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_PREFIX",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error` (\n\t\t  `error_id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t  `sku` varchar(255) NOT NULL ,\n\t\t  `insertion_id` varchar(255) NOT NULL ,\n\t\t  `error_code` int(11) NOT NULL ,\n\t\t  `message` text NOT NULL ,\n\t\t  PRIMARY KEY (`error_id`)\n\t\t);\"",50],")",";",["T_WHITESPACE","\n\n\t\t",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","db",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","query",59],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",59],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_STRING","DB_PREFIX",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` (\n\t\t  `id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t  `amazon_sku` varchar(255) NOT NULL,\n\t\t  `var` char(100) NOT NULL DEFAULT '',\n\t\t  `product_id` int(11) NOT NULL,\n\t\t  PRIMARY KEY (`id`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",60],")",";",["T_WHITESPACE","\n\n\t\t",66],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","db",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","query",68],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\tCREATE TABLE IF NOT EXISTS `\"",68],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_STRING","DB_PREFIX",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_search` (\n\t\t\t`product_id` int(11) NOT NULL,\n\t\t\t`marketplace` enum('uk','de','es','it','fr') NOT NULL,\n\t\t\t`status` enum('searching','finished') NOT NULL,\n\t\t\t`matches` int(11) DEFAULT NULL,\n\t\t\t`data` text,\n\t\t\tPRIMARY KEY (`product_id`,`marketplace`)\n\t\t) DEFAULT COLLATE=utf8_general_ci;\"",69],")",";",["T_WHITESPACE","\n\n\t\t",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","db",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","query",78],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",78],["T_WHITESPACE"," ",79],".",["T_WHITESPACE"," ",79],["T_STRING","DB_PREFIX",79],["T_WHITESPACE"," ",79],".",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report` (\n\t\t\t\t`marketplace` enum('uk','de','fr','es','it') NOT NULL,\n\t\t\t\t`sku` varchar(255) NOT NULL,\n\t\t\t\t`quantity` int(10) unsigned NOT NULL,\n\t\t\t\t`asin` varchar(255) NOT NULL,\n\t\t\t\t`price` decimal(10,4) NOT NULL,\n\t\t\t\tPRIMARY KEY (`marketplace`,`sku`)\n\t\t\t) DEFAULT COLLATE=utf8_general_ci;\"",79],")",";",["T_WHITESPACE","\n\t",86],"}",["T_WHITESPACE","\n\n\t",87],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","uninstall",89],"(",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n\t\t",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","db",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","query",90],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_STRING","DB_PREFIX",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order`\"",90],")",";",["T_WHITESPACE","\n\t\t",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","db",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","query",91],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","DB_PREFIX",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order_product`\"",91],")",";",["T_WHITESPACE","\n\t\t",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","query",92],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","DB_PREFIX",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product2`\"",92],")",";",["T_WHITESPACE","\n\t\t",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","query",93],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","DB_PREFIX",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\"",93],")",";",["T_WHITESPACE","\n\t\t",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","db",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","query",94],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_STRING","DB_PREFIX",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link`\"",94],")",";",["T_WHITESPACE","\n\t\t",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","db",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","query",95],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","DB_PREFIX",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_unshipped`\"",95],")",";",["T_WHITESPACE","\n\t\t",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","db",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","query",96],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_STRING","DB_PREFIX",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error`\"",96],")",";",["T_WHITESPACE","\n\t\t",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","db",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","query",97],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_STRING","DB_PREFIX",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","\"amazon_process`\"",97],")",";",["T_WHITESPACE","\n\t\t",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","query",98],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_STRING","DB_PREFIX",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_unshipped`\"",98],")",";",["T_WHITESPACE","\n\t\t",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","db",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","query",99],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","DB_PREFIX",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_search`\"",99],")",";",["T_WHITESPACE","\n\t\t",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","db",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","query",100],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_STRING","DB_PREFIX",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report`\"",100],")",";",["T_WHITESPACE","\n\n\t\t",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","db",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","query",102],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_STRING","DB_PREFIX",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `code` = 'openbay_amazon'\"",102],")",";",["T_WHITESPACE","\n\n\t\t",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","load",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","model",104],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/event'",104],")",";",["T_WHITESPACE","\n\t\t",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","model_extension_event",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","deleteEvent",105],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_add_order'",105],")",";",["T_WHITESPACE","\n\t",105],"}",["T_WHITESPACE","\n\n\t",106],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","patch",108],"(",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","config",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","get",109],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_status'",109],")",["T_WHITESPACE"," ",109],["T_IS_EQUAL","==",109],["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n\n\t\t",109],"}",["T_WHITESPACE","\n\t",111],"}",["T_WHITESPACE","\n\n\t",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","scheduleOrders",114],"(",["T_VARIABLE","$data",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t",114],["T_VARIABLE","$log",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","Log",115],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon.log'",115],")",";",["T_WHITESPACE","\n\n\t\t",115],["T_VARIABLE","$request_xml",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'<Request>\n  <ResponseURL>'",117],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_STRING","HTTPS_CATALOG",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'index.php?route=extension\/openbay\/amazon\/order<\/ResponseURL>\n  <MarketplaceIDs>'",118],";",["T_WHITESPACE","\n\n\t\t",119],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_orders_marketplace_ids'",121],"]",["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$marketplace_id",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t\t",121],["T_VARIABLE","$request_xml",122],["T_WHITESPACE"," ",122],["T_CONCAT_EQUAL",".=",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'    <MarketplaceID>'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$marketplace_id",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'<\/MarketplaceID>'",122],";",["T_WHITESPACE","\n\t\t",122],"}",["T_WHITESPACE","\n\n\t\t",123],["T_VARIABLE","$request_xml",125],["T_WHITESPACE"," ",125],["T_CONCAT_EQUAL",".=",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\n  <\/MarketplaceIDs>\n<\/Request>'",125],";",["T_WHITESPACE","\n\n\t\t",127],["T_VARIABLE","$response",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","openbay",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","amazon",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","call",129],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/scheduleOrders'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$request_xml",129],",",["T_WHITESPACE"," ",129],["T_STRING","false",129],")",";",["T_WHITESPACE","\n\n\t\t",129],["T_STRING","libxml_use_internal_errors",131],"(",["T_STRING","true",131],")",";",["T_WHITESPACE","\n\t\t",131],["T_VARIABLE","$response_xml",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","simplexml_load_string",132],"(",["T_VARIABLE","$response",132],")",";",["T_WHITESPACE","\n\t\t",132],["T_STRING","libxml_use_internal_errors",133],"(",["T_STRING","false",133],")",";",["T_WHITESPACE","\n\n\t\t",133],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$response_xml",135],["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$response_xml",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","Status",135],["T_WHITESPACE"," ",135],["T_IS_EQUAL","==",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'0'",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n\t\t\t",135],["T_VARIABLE","$log",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","write",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Scheduling orders call was successful'",136],")",";",["T_WHITESPACE","\n\t\t\t",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","true",137],";",["T_WHITESPACE","\n\t\t",137],"}",["T_WHITESPACE","\n\n\t\t",138],["T_VARIABLE","$log",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","write",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to schedule orders. Response: '",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$response",140],")",";",["T_WHITESPACE","\n\n\t\t",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","false",142],";",["T_WHITESPACE","\n\t",142],"}",["T_WHITESPACE","\n\n\t",143],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","saveProduct",145],"(",["T_VARIABLE","$product_id",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$data_array",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n\t\t",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_ISSET","isset",146],"(",["T_VARIABLE","$data_array",146],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",146],"]","[",["T_CONSTANT_ENCAPSED_STRING","'item-price'",146],"]",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t",146],["T_VARIABLE","$price",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$data_array",147],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",147],"]","[",["T_CONSTANT_ENCAPSED_STRING","'item-price'",147],"]",";",["T_WHITESPACE","\n\t\t",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_ISSET","isset",148],"(",["T_VARIABLE","$data_array",148],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",148],"]",")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t",148],["T_VARIABLE","$price",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$data_array",149],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",149],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",149],"]",";",["T_WHITESPACE","\n\t\t",149],"}",["T_WHITESPACE"," ",150],["T_ELSE","else",150],["T_WHITESPACE"," ",150],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$data_array",150],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",150],"]","[",["T_CONSTANT_ENCAPSED_STRING","'StandardPrice'",150],"]",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t\t",150],["T_VARIABLE","$price",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$data_array",151],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'StandardPrice'",151],"]",";",["T_WHITESPACE","\n\t\t",151],"}",["T_WHITESPACE","   ",152],["T_ELSE","else",152],["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n\t\t\t",152],["T_VARIABLE","$price",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],";",["T_WHITESPACE","\n\t\t",153],"}",["T_WHITESPACE","\n\n\t\t",154],["T_VARIABLE","$category",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"(",["T_ISSET","isset",156],"(",["T_VARIABLE","$data_array",156],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",156],"]",")",")",["T_WHITESPACE"," ",156],"?",["T_WHITESPACE"," ",156],["T_VARIABLE","$data_array",156],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",156],"]",["T_WHITESPACE"," ",156],":",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","\"\"",156],";",["T_WHITESPACE","\n\t\t",156],["T_VARIABLE","$sku",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],"(",["T_ISSET","isset",157],"(",["T_VARIABLE","$data_array",157],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",157],"]",")",")",["T_WHITESPACE"," ",157],"?",["T_WHITESPACE"," ",157],["T_VARIABLE","$data_array",157],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",157],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",157],"]",["T_WHITESPACE"," ",157],":",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","\"\"",157],";",["T_WHITESPACE","\n\t\t",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_ISSET","isset",158],"(",["T_VARIABLE","$data_array",158],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",158],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",158],"]",")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t",158],["T_VARIABLE","$sku",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$data_array",159],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",159],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sku'",159],"]",";",["T_WHITESPACE","\n\t\t",159],"}",["T_WHITESPACE"," ",160],["T_ELSE","else",160],["T_WHITESPACE"," ",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$data_array",160],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",160],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SKU'",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n\t\t\t",160],["T_VARIABLE","$sku",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$data_array",161],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",161],"]","[",["T_CONSTANT_ENCAPSED_STRING","'SKU'",161],"]",";",["T_WHITESPACE","\n\t\t",161],"}",["T_WHITESPACE","\n\n\t\t",162],["T_VARIABLE","$var",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_ISSET","isset",164],"(",["T_VARIABLE","$data_array",164],"[",["T_CONSTANT_ENCAPSED_STRING","'optionVar'",164],"]",")",["T_WHITESPACE"," ",164],"?",["T_WHITESPACE"," ",164],["T_VARIABLE","$data_array",164],"[",["T_CONSTANT_ENCAPSED_STRING","'optionVar'",164],"]",["T_WHITESPACE"," ",164],":",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","''",164],";",["T_WHITESPACE","\n\n\t\t",164],["T_VARIABLE","$marketplaces",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ISSET","isset",166],"(",["T_VARIABLE","$data_array",166],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace_ids'",166],"]",")",["T_WHITESPACE"," ",166],"?",["T_WHITESPACE"," ",166],["T_STRING","serialize",166],"(",["T_VARIABLE","$data_array",166],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace_ids'",166],"]",")",["T_WHITESPACE"," ",166],":",["T_WHITESPACE"," ",166],["T_STRING","serialize",166],"(",["T_ARRAY","array",166],"(",")",")",";",["T_WHITESPACE","\n\n\t\t",166],["T_VARIABLE","$data_encoded",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","json_encode",168],"(",["T_ARRAY","array",168],"(",["T_CONSTANT_ENCAPSED_STRING","'fields'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$data_array",168],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",168],"]",")",")",";",["T_WHITESPACE","\n\n\t\t",168],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","db",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","query",170],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tREPLACE INTO `\"",170],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_STRING","DB_PREFIX",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tSET `product_id` = '\"",171],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_INT_CAST","(int)",172],["T_VARIABLE","$product_id",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`sku` = '\"",172],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","escape",173],"(",["T_VARIABLE","$sku",173],")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`category` = '\"",173],["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","db",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","escape",174],"(",["T_VARIABLE","$category",174],")",["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`data` = '\"",174],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","db",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","escape",175],"(",["T_VARIABLE","$data_encoded",175],")",["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`status` = 'saved',\n\t\t\t\t`insertion_id` = '',\n\t\t\t\t`price` = '\"",175],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$price",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`var` = '\"",178],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","db",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","escape",179],"(",["T_VARIABLE","$var",179],")",["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`marketplaces` = '\"",179],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","db",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","escape",180],"(",["T_VARIABLE","$marketplaces",180],")",["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","\"'\"",180],")",";",["T_WHITESPACE","\n\t",180],"}",["T_WHITESPACE","\n\n\t",181],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","deleteSaved",183],"(",["T_VARIABLE","$product_id",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$var",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","''",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t\t",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","db",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","query",184],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_STRING","DB_PREFIX",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",184],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$product_id",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","db",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","escape",185],"(",["T_VARIABLE","$var",185],")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"'\"",185],")",";",["T_WHITESPACE","\n\t",185],"}",["T_WHITESPACE","\n\n\t",186],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getSavedProducts",188],"(",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n\t\t",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","db",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","query",189],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `ap`.`status`, `ap`.`product_id`, `ap`.`sku` as `amazon_sku`, `pd`.`name` as `product_name`, `p`.`model` as `product_model`, `p`.`sku` as `product_sku`, `ap`.`var` as `var`\n\t\t\tFROM `\"",189],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_STRING","DB_PREFIX",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` as `ap`\n\t\t\tLEFT JOIN `\"",191],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_STRING","DB_PREFIX",192],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\tON `ap`.`product_id` = `pd`.`product_id`\n\t\t\tLEFT JOIN `\"",192],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_STRING","DB_PREFIX",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\tON `ap`.`product_id` = `p`.`product_id`\n\t\t\tWHERE `ap`.`status` = 'saved'\n\t\t\tAND `pd`.`language_id` = '\"",194],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_INT_CAST","(int)",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","config",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","get",197],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",197],")",["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","\"'\"",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","rows",197],";",["T_WHITESPACE","\n\t",197],"}",["T_WHITESPACE","\n\n\t",198],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","getSavedProductsData",200],"(",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n\t\t",200],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","db",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","query",201],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT * FROM `\"",201],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_STRING","DB_PREFIX",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `status` = 'saved' AND `version` = 2\"",202],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","rows",203],";",["T_WHITESPACE","\n\t",203],"}",["T_WHITESPACE","\n\n\t",204],["T_PUBLIC","public",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","getProduct",206],"(",["T_VARIABLE","$product_id",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$var",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","''",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n\t\t",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","db",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","query",207],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT * FROM `\"",207],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_STRING","DB_PREFIX",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",208],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_INT_CAST","(int)",209],["T_VARIABLE","$product_id",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","db",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","escape",209],"(",["T_VARIABLE","$var",209],")",["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",209],")",["T_OBJECT_OPERATOR","->",209],["T_STRING","row",209],";",["T_WHITESPACE","\n\t",209],"}",["T_WHITESPACE","\n\n\t",210],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","getProductCategory",212],"(",["T_VARIABLE","$product_id",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$var",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","''",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n\t\t",212],["T_VARIABLE","$row",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","db",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","query",213],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `category` FROM `\"",213],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_STRING","DB_PREFIX",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",214],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_INT_CAST","(int)",215],["T_VARIABLE","$product_id",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","db",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","escape",215],"(",["T_VARIABLE","$var",215],")",["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",215],")",["T_OBJECT_OPERATOR","->",215],["T_STRING","row",215],";",["T_WHITESPACE","\n\t\t",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_ISSET","isset",216],"(",["T_VARIABLE","$row",216],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",216],"]",")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n\t\t\t",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$row",217],"[",["T_CONSTANT_ENCAPSED_STRING","'category'",217],"]",";",["T_WHITESPACE","\n\t\t",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","\"\"",219],";",["T_WHITESPACE","\n\t\t",219],"}",["T_WHITESPACE","\n\t",220],"}",["T_WHITESPACE","\n\n\t",221],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","setProductUploaded",223],"(",["T_VARIABLE","$product_id",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$insertion_id",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$var",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","''",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n\t\t",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","db",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","query",224],"(",["T_WHITESPACE","\n\t\t\t",224],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_STRING","DB_PREFIX",225],["T_WHITESPACE"," ",225],".",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tSET `status` = 'uploaded', `insertion_id` = '\"",225],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","db",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","escape",226],"(",["T_VARIABLE","$insertion_id",226],")",["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\tWHERE `product_id` = '\"",226],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_INT_CAST","(int)",227],["T_VARIABLE","$product_id",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","db",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","escape",227],"(",["T_VARIABLE","$var",227],")",["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",227],")",";",["T_WHITESPACE","\n\t",227],"}",["T_WHITESPACE","\n\n\t",228],["T_PUBLIC","public",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","resetUploaded",230],"(",["T_VARIABLE","$insertion_id",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n\t\t",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","db",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","query",231],"(",["T_WHITESPACE","\n\t\t\t",231],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_STRING","DB_PREFIX",232],["T_WHITESPACE"," ",232],".",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tSET `status` = 'saved', `insertion_id` = ''\n\t\t\tWHERE `insertion_id` = '\"",232],["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","db",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","escape",234],"(",["T_VARIABLE","$insertion_id",234],")",["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",234],")",";",["T_WHITESPACE","\n\t",234],"}",["T_WHITESPACE","\n\n\t",235],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","getProductStatus",237],"(",["T_VARIABLE","$product_id",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n\n\t\t",237],["T_VARIABLE","$rows_uploaded",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","db",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","query",239],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",239],["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_STRING","DB_PREFIX",241],["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",241],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_INT_CAST","(int)",242],["T_VARIABLE","$product_id",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'uploaded'\"",242],")",["T_OBJECT_OPERATOR","->",242],["T_STRING","row",242],";",["T_WHITESPACE","\n\t\t",242],["T_VARIABLE","$rows_uploaded",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$rows_uploaded",243],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",243],"]",";",["T_WHITESPACE","\n\n\t\t",243],["T_VARIABLE","$rows_ok",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","db",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","query",245],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",245],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_STRING","DB_PREFIX",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",247],["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_INT_CAST","(int)",248],["T_VARIABLE","$product_id",248],["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'ok'\"",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","row",248],";",["T_WHITESPACE","\n\t\t",248],["T_VARIABLE","$rows_ok",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$rows_ok",249],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",249],"]",";",["T_WHITESPACE","\n\n\t\t",249],["T_VARIABLE","$rows_error",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","db",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","query",251],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",251],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_STRING","DB_PREFIX",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",253],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_VARIABLE","$product_id",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'error'\"",254],")",["T_OBJECT_OPERATOR","->",254],["T_STRING","row",254],";",["T_WHITESPACE","\n\t\t",254],["T_VARIABLE","$rows_error",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$rows_error",255],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",255],"]",";",["T_WHITESPACE","\n\n\t\t",255],["T_VARIABLE","$rows_saved",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","db",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","query",257],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) count\n\t\t\tFROM `\"",257],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_STRING","DB_PREFIX",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",259],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_INT_CAST","(int)",260],["T_VARIABLE","$product_id",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = 'saved'\"",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","row",260],";",["T_WHITESPACE","\n\t\t",260],["T_VARIABLE","$rows_saved",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$rows_saved",261],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",261],"]",";",["T_WHITESPACE","\n\n\t\t",261],["T_VARIABLE","$rows_total",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$rows_uploaded",263],["T_WHITESPACE"," ",263],"+",["T_WHITESPACE"," ",263],["T_VARIABLE","$rows_ok",263],["T_WHITESPACE"," ",263],"+",["T_WHITESPACE"," ",263],["T_VARIABLE","$rows_error",263],["T_WHITESPACE"," ",263],"+",["T_WHITESPACE"," ",263],["T_VARIABLE","$rows_saved",263],";",["T_WHITESPACE","\n\n\t\t",263],["T_VARIABLE","$links",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","db",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","query",265],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) as count\n\t\t\tFROM `\"",265],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_STRING","DB_PREFIX",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link`\n\t\t\tWHERE `product_id` = '\"",267],["T_WHITESPACE"," ",268],".",["T_WHITESPACE"," ",268],["T_INT_CAST","(int)",268],["T_VARIABLE","$product_id",268],["T_WHITESPACE"," ",268],".",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","\"'\"",268],")",["T_OBJECT_OPERATOR","->",268],["T_STRING","row",268],";",["T_WHITESPACE","\n\t\t",268],["T_VARIABLE","$links",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$links",269],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",269],"]",";",["T_WHITESPACE","\n\n\t\t",269],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$rows_total",271],["T_WHITESPACE"," ",271],["T_IS_IDENTICAL","===",271],["T_WHITESPACE"," ",271],["T_LNUMBER","0",271],["T_WHITESPACE"," ",271],["T_BOOLEAN_AND","&&",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$links",271],["T_WHITESPACE"," ",271],">",["T_WHITESPACE"," ",271],["T_LNUMBER","0",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t\t",271],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'linked'",272],";",["T_WHITESPACE","\n\t\t",272],"}",["T_WHITESPACE"," ",273],["T_ELSE","else",273],["T_WHITESPACE"," ",273],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$rows_total",273],["T_WHITESPACE"," ",273],["T_IS_EQUAL","==",273],["T_WHITESPACE"," ",273],["T_LNUMBER","0",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","false",274],";",["T_WHITESPACE","\n\t\t",274],"}",["T_WHITESPACE","\n\n\t\t",275],["T_IF","if",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$rows_uploaded",277],["T_WHITESPACE"," ",277],">",["T_WHITESPACE"," ",277],["T_LNUMBER","0",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n\t\t\t",277],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'processing'",278],";",["T_WHITESPACE","\n\t\t",278],"}",["T_WHITESPACE","\n\n\t\t",279],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$rows_uploaded",281],["T_WHITESPACE"," ",281],["T_IS_EQUAL","==",281],["T_WHITESPACE"," ",281],["T_LNUMBER","0",281],["T_WHITESPACE"," ",281],["T_BOOLEAN_AND","&&",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$rows_ok",281],["T_WHITESPACE"," ",281],">",["T_WHITESPACE"," ",281],["T_LNUMBER","0",281],["T_WHITESPACE"," ",281],["T_BOOLEAN_AND","&&",281],["T_WHITESPACE"," ",281],["T_VARIABLE","$rows_error",281],["T_WHITESPACE"," ",281],["T_IS_EQUAL","==",281],["T_WHITESPACE"," ",281],["T_LNUMBER","0",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n\t\t\t",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'ok'",282],";",["T_WHITESPACE","\n\t\t",282],"}",["T_WHITESPACE","\n\n\t\t",283],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$rows_saved",285],["T_WHITESPACE"," ",285],">",["T_WHITESPACE"," ",285],["T_LNUMBER","0",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n\t\t\t",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'saved'",286],";",["T_WHITESPACE","\n\t\t",286],"}",["T_WHITESPACE","\n\n\t\t",287],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_VARIABLE","$rows_uploaded",289],["T_WHITESPACE"," ",289],["T_IS_EQUAL","==",289],["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],["T_WHITESPACE"," ",289],["T_BOOLEAN_AND","&&",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$rows_error",289],["T_WHITESPACE"," ",289],">",["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],["T_WHITESPACE"," ",289],["T_BOOLEAN_AND","&&",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$rows_ok",289],["T_WHITESPACE"," ",289],["T_IS_EQUAL","==",289],["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n\t\t\t",289],["T_VARIABLE","$quick",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","db",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","query",290],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",290],["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_STRING","DB_PREFIX",290],["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `product_id` = \"",290],["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_INT_CAST","(int)",290],["T_VARIABLE","$product_id",290],["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","\" AND `version` = 3\"",290],")",["T_OBJECT_OPERATOR","->",290],["T_STRING","row",290],";",["T_WHITESPACE","\n\n\t\t\t",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$quick",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t\t",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'error_quick'",293],";",["T_WHITESPACE","\n\t\t\t",293],"}",["T_WHITESPACE"," ",294],["T_ELSE","else",294],["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n\t\t\t\t",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'error_advanced'",295],";",["T_WHITESPACE","\n\t\t\t",295],"}",["T_WHITESPACE","\n\t\t",296],"}",["T_WHITESPACE"," ",297],["T_ELSE","else",297],["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n\t\t\t",297],["T_RETURN","return",298],["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'error_few'",298],";",["T_WHITESPACE","\n\t\t",298],"}",["T_WHITESPACE","\n\n\t\t",299],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_STRING","false",301],";",["T_WHITESPACE","\n\t",301],"}",["T_WHITESPACE","\n\n\t",302],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","getProductErrors",304],"(",["T_VARIABLE","$product_id",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$version",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_LNUMBER","2",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n\t\t",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$version",305],["T_WHITESPACE"," ",305],["T_IS_EQUAL","==",305],["T_WHITESPACE"," ",305],["T_LNUMBER","3",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n\t\t\t",305],["T_VARIABLE","$message_row",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","db",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","query",306],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `messages` FROM `\"",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_STRING","DB_PREFIX",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `product_id` = '\"",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_INT_CAST","(int)",306],["T_VARIABLE","$product_id",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 3\"",306],")",["T_OBJECT_OPERATOR","->",306],["T_STRING","row",306],";",["T_WHITESPACE","\n\n\t\t\t",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","json_decode",308],"(",["T_VARIABLE","$message_row",308],"[",["T_CONSTANT_ENCAPSED_STRING","'messages'",308],"]",")",";",["T_WHITESPACE","\n\t\t",308],"}",["T_WHITESPACE","\n\n\t\t",309],["T_VARIABLE","$result",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",")",";",["T_WHITESPACE","\n\n\t\t",311],["T_VARIABLE","$insertion_rows",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","db",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","query",313],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `sku`, `insertion_id` FROM `\"",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_STRING","DB_PREFIX",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `product_id` = '\"",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_INT_CAST","(int)",313],["T_VARIABLE","$product_id",313],["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",313],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","rows",313],";",["T_WHITESPACE","\n\n\t\t",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(","!",["T_EMPTY","empty",315],"(",["T_VARIABLE","$insertion_rows",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n\t\t\t",315],["T_FOREACH","foreach",316],"(",["T_VARIABLE","$insertion_rows",316],["T_WHITESPACE"," ",316],["T_AS","as",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$insertion_row",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n\t\t\t\t",316],["T_VARIABLE","$error_rows",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","query",317],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_STRING","DB_PREFIX",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error` WHERE `sku` = '\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","escape",317],"(",["T_VARIABLE","$insertion_row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",317],"]",")",["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"' AND `insertion_id` = '\"",317],["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","db",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","escape",317],"(",["T_VARIABLE","$insertion_row",317],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",317],"]",")",["T_WHITESPACE"," ",317],".",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","\"'\"",317],")",["T_OBJECT_OPERATOR","->",317],["T_STRING","rows",317],";",["T_WHITESPACE","\n\n\t\t\t\t",317],["T_FOREACH","foreach",319],"(",["T_VARIABLE","$error_rows",319],["T_WHITESPACE"," ",319],["T_AS","as",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$error_row",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n\t\t\t\t\t",319],["T_VARIABLE","$result",320],"[","]",["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$error_row",320],";",["T_WHITESPACE","\n\t\t\t\t",320],"}",["T_WHITESPACE","\n\t\t\t",321],"}",["T_WHITESPACE","\n\t\t",322],"}",["T_WHITESPACE","\n\t\t",323],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$result",324],";",["T_WHITESPACE","\n\t",324],"}",["T_WHITESPACE","\n\n\t",325],["T_PUBLIC","public",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","getProductsWithErrors",327],"(",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n\t\t",327],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","db",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","query",328],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `product_id`, `sku` FROM `\"",328],["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_STRING","DB_PREFIX",329],["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `status` = 'error' AND `version` = 2\"",329],")",["T_OBJECT_OPERATOR","->",330],["T_STRING","rows",330],";",["T_WHITESPACE","\n\t",330],"}",["T_WHITESPACE","\n\n\t",331],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","deleteProduct",333],"(",["T_VARIABLE","$product_id",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n\t\t",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","db",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","query",334],"(",["T_WHITESPACE","\n\t\t\t",334],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_STRING","DB_PREFIX",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",335],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_INT_CAST","(int)",336],["T_VARIABLE","$product_id",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","\"'\"",336],")",";",["T_WHITESPACE","\n\t",336],"}",["T_WHITESPACE","\n\n\t",337],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","linkProduct",339],"(",["T_VARIABLE","$amazon_sku",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$product_id",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$var",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n\t\t",339],["T_VARIABLE","$count",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","query",340],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) as `count` FROM `\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_STRING","DB_PREFIX",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_INT_CAST","(int)",340],["T_VARIABLE","$product_id",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' AND `amazon_sku` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","escape",340],"(",["T_VARIABLE","$amazon_sku",340],")",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","db",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","escape",340],"(",["T_VARIABLE","$var",340],")",["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","row",340],";",["T_WHITESPACE","\n\t\t\n\t\t",340],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$count",342],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",342],"]",["T_WHITESPACE"," ",342],["T_IS_EQUAL","==",342],["T_WHITESPACE"," ",342],["T_LNUMBER","0",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n\t\t\t",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","query",343],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_STRING","DB_PREFIX",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` SET `product_id` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_INT_CAST","(int)",343],["T_VARIABLE","$product_id",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"', `amazon_sku` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","escape",343],"(",["T_VARIABLE","$amazon_sku",343],")",["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"', `var` = '\"",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","db",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","escape",343],"(",["T_VARIABLE","$var",343],")",["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","\"'\"",343],")",";",["T_WHITESPACE","\n\t\t",343],"}",["T_WHITESPACE","\n\t",344],"}",["T_WHITESPACE","\n\n\t",345],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","removeProductLink",347],"(",["T_VARIABLE","$amazon_sku",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n\t\t",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","db",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","query",348],"(",["T_WHITESPACE","\n\t\t\t",348],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_STRING","DB_PREFIX",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link`\n\t\t\tWHERE `amazon_sku` = '\"",349],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","db",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","escape",350],"(",["T_VARIABLE","$amazon_sku",350],")",["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","\"'\"",350],")",";",["T_WHITESPACE","\n\t",350],"}",["T_WHITESPACE","\n\n\t",351],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","removeAdvancedErrors",353],"(",["T_VARIABLE","$product_id",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n\t\t",353],["T_VARIABLE","$product_rows",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","db",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","query",354],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `insertion_id` FROM `\"",354],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_STRING","DB_PREFIX",355],["T_WHITESPACE"," ",355],".",["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tWHERE `product_id` = '\"",355],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_INT_CAST","(int)",356],["T_VARIABLE","$product_id",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","\"' AND `version` = 2\"",356],")",["T_OBJECT_OPERATOR","->",356],["T_STRING","rows",356],";",["T_WHITESPACE","\n\n\t\t",356],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$product_rows",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$product",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n\t\t\t",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","db",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","query",359],"(",["T_WHITESPACE","\n\t\t\t\t",359],["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_STRING","DB_PREFIX",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error`\n\t\t\t\tWHERE `insertion_id` = '\"",360],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","db",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","escape",361],"(",["T_VARIABLE","$product",361],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",361],"]",")",["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","\"'\"",361],")",";",["T_WHITESPACE","\n\t\t",361],"}",["T_WHITESPACE","\n\n\t\t",362],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","db",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","query",364],"(",["T_WHITESPACE","\n\t\t\t",364],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_STRING","DB_PREFIX",365],["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`\n\t\t\tSET `status` = 'saved', `insertion_id` = ''\n\t\t\tWHERE `product_id` = '\"",365],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_INT_CAST","(int)",367],["T_VARIABLE","$product_id",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","\"' AND `status` = 'error' AND `version` = 2\"",367],")",";",["T_WHITESPACE","\n\t",367],"}",["T_WHITESPACE","\n\n\t",368],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","getProductLinks",370],"(",["T_VARIABLE","$product_id",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'all'",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n\t\t",370],["T_VARIABLE","$query",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `apl`.`product_id`, `pd`.`name` as `product_name`, `p`.`model`, `apl`.`amazon_sku`, `p`.`sku`, `apl`.`var`, '' as `combination`\n\t\t\tFROM `\"",371],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_STRING","DB_PREFIX",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` as `apl`\n\t\t\tLEFT JOIN `\"",373],["T_WHITESPACE"," ",374],".",["T_WHITESPACE"," ",374],["T_STRING","DB_PREFIX",374],["T_WHITESPACE"," ",374],".",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\tON `apl`.`product_id` = `pd`.`product_id`\n\t\t\tLEFT JOIN `\"",374],["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_STRING","DB_PREFIX",376],["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\tON `apl`.`product_id` = `p`.`product_id`\"",376],";",["T_WHITESPACE","\n\n\t\t",377],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$product_id",379],["T_WHITESPACE"," ",379],["T_IS_NOT_EQUAL","!=",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'all'",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n\t\t\t",379],["T_VARIABLE","$query",380],["T_WHITESPACE"," ",380],["T_CONCAT_EQUAL",".=",380],["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","\" WHERE `apl`.`product_id` = '\"",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_INT_CAST","(int)",380],["T_VARIABLE","$product_id",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","\"' AND `pd`.`language_id` = '\"",380],["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_INT_CAST","(int)",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","config",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","get",380],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",380],")",["T_WHITESPACE"," ",380],".",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","\"'\"",380],";",["T_WHITESPACE","\n\t\t",380],"}",["T_WHITESPACE"," ",381],["T_ELSE","else",381],["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n\t\t\t",381],["T_VARIABLE","$query",382],["T_WHITESPACE"," ",382],["T_CONCAT_EQUAL",".=",382],["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","\"WHERE `pd`.`language_id` = '\"",382],["T_WHITESPACE"," ",382],".",["T_WHITESPACE"," ",382],["T_INT_CAST","(int)",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","config",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","get",382],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",382],")",["T_WHITESPACE"," ",382],".",["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","\"'\"",382],";",["T_WHITESPACE","\n\t\t",382],"}",["T_WHITESPACE","\n\n\t\t",383],["T_VARIABLE","$product_links",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","db",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","query",385],"(",["T_VARIABLE","$query",385],")",["T_OBJECT_OPERATOR","->",385],["T_STRING","rows",385],";",["T_WHITESPACE","\n\n\t\t",385],["T_IF","if",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","openbay",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","addonLoad",387],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",387],")",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n\t\t\t",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","load",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","model",388],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",388],")",";",["T_WHITESPACE","\n\t\t\t",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","load",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","model",389],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",389],")",";",["T_WHITESPACE","\n\n\t\t\t",389],["T_FOREACH","foreach",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$product_links",391],["T_WHITESPACE"," ",391],["T_AS","as",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$key",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$product_link",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n\t\t\t\t",391],["T_VARIABLE","$variants",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","model_extension_module_openstock",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getVariants",392],"(",["T_VARIABLE","$product_link",392],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",392],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",392],["T_IF","if",394],["T_WHITESPACE"," ",394],"(","!",["T_EMPTY","empty",394],"(",["T_VARIABLE","$variants",394],")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n\t\t\t\t\t",394],["T_FOREACH","foreach",395],"(",["T_VARIABLE","$variants",395],["T_WHITESPACE"," ",395],["T_AS","as",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$variant",395],")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",395],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$variant",396],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",396],"]",["T_WHITESPACE"," ",396],["T_IS_EQUAL","==",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$product_link",396],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",396],"]",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",396],["T_VARIABLE","$product_links",397],"[",["T_VARIABLE","$key",397],"]","[",["T_CONSTANT_ENCAPSED_STRING","'combination'",397],"]",["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$variant",397],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",397],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",397],["T_BREAK","break",398],";",["T_WHITESPACE","\n\t\t\t\t\t\t",398],"}",["T_WHITESPACE","\n\t\t\t\t\t",399],"}",["T_WHITESPACE","\n\t\t\t\t",400],"}",["T_WHITESPACE","\n\t\t\t",401],"}",["T_WHITESPACE","\n\n\t\t\t",402],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$product_links",404],";",["T_WHITESPACE","\n\t\t",404],"}",["T_WHITESPACE"," ",405],["T_ELSE","else",405],["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n\t\t\t",405],["T_RETURN","return",406],["T_WHITESPACE"," ",406],["T_VARIABLE","$product_links",406],";",["T_WHITESPACE","\n\t\t",406],"}",["T_WHITESPACE","\n\t",407],"}",["T_WHITESPACE","\n\n\t",408],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","getUnlinkedProducts",410],"(",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n\t\t",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","openbay",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","addonLoad",411],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",411],")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n\t\t\t",411],["T_VARIABLE","$rows",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","db",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","query",412],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT `p`.`product_id`, `p`.`model`, `p`.`sku`, `pd`.`name` as `product_name`, '' as `var`, '' as `combination`, `p`.`has_option`\n\t\t\t\tFROM `\"",412],["T_WHITESPACE"," ",414],".",["T_WHITESPACE"," ",414],["T_STRING","DB_PREFIX",414],["T_WHITESPACE"," ",414],".",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\t\tLEFT JOIN `\"",414],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_STRING","DB_PREFIX",415],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\t\tON `p`.`product_id` = `pd`.`product_id`\n\t\t\t\tAND `pd`.`language_id` = '\"",415],["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_INT_CAST","(int)",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","config",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","get",417],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",417],")",["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","\"'\"",417],")",["T_OBJECT_OPERATOR","->",417],["T_STRING","rows",417],";",["T_WHITESPACE","\n\n\t\t\t",417],["T_VARIABLE","$result",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_ARRAY","array",419],"(",")",";",["T_WHITESPACE","\n\t\t\t",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","load",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","model",420],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",420],")",";",["T_WHITESPACE","\n\t\t\t",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","load",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","model",421],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",421],")",";",["T_WHITESPACE","\n\t\t\t",421],["T_FOREACH","foreach",422],"(",["T_VARIABLE","$rows",422],["T_WHITESPACE"," ",422],["T_AS","as",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$row",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n\t\t\t\t",422],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$row",423],"[",["T_CONSTANT_ENCAPSED_STRING","'has_option'",423],"]",["T_WHITESPACE"," ",423],["T_IS_EQUAL","==",423],["T_WHITESPACE"," ",423],["T_LNUMBER","1",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n\t\t\t\t\t",423],["T_VARIABLE","$stock_opts",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","model_extension_module_openstock",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getVariants",424],"(",["T_VARIABLE","$row",424],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",424],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",424],["T_FOREACH","foreach",425],"(",["T_VARIABLE","$stock_opts",425],["T_WHITESPACE"," ",425],["T_AS","as",425],["T_WHITESPACE"," ",425],["T_VARIABLE","$opt",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","productLinkExists",426],"(",["T_VARIABLE","$row",426],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",426],"]",",",["T_WHITESPACE"," ",426],["T_VARIABLE","$opt",426],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",426],"]",")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",426],["T_CONTINUE","continue",427],";",["T_WHITESPACE","\n\t\t\t\t\t\t",427],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",428],["T_VARIABLE","$row",429],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",429],"]",["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$opt",429],"[",["T_CONSTANT_ENCAPSED_STRING","'combination'",429],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",429],["T_VARIABLE","$row",430],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",430],"]",["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$opt",430],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",430],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",430],["T_VARIABLE","$result",431],"[","]",["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$row",431],";",["T_WHITESPACE","\n\t\t\t\t\t",431],"}",["T_WHITESPACE","\n\t\t\t\t",432],"}",["T_WHITESPACE"," ",433],["T_ELSE","else",433],["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\t\t\t\t\t",433],["T_IF","if",434],["T_WHITESPACE"," ",434],"(","!",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","productLinkExists",434],"(",["T_VARIABLE","$row",434],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",434],"]",",",["T_WHITESPACE"," ",434],["T_VARIABLE","$row",434],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",434],"]",")",")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",434],["T_VARIABLE","$result",435],"[","]",["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$row",435],";",["T_WHITESPACE","\n\t\t\t\t\t",435],"}",["T_WHITESPACE","\n\t\t\t\t",436],"}",["T_WHITESPACE","\n\t\t\t",437],"}",["T_WHITESPACE","\n\t\t",438],"}",["T_WHITESPACE"," ",439],["T_ELSE","else",439],["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n\t\t\t",439],["T_VARIABLE","$result",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","db",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","query",440],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT `p`.`product_id`, `p`.`model`, `p`.`sku`, `pd`.`name` as `product_name`, '' as `var`, '' as `combination`\n\t\t\t\tFROM `\"",440],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_STRING","DB_PREFIX",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p`\n\t\t\t\tLEFT JOIN `\"",442],["T_WHITESPACE"," ",443],".",["T_WHITESPACE"," ",443],["T_STRING","DB_PREFIX",443],["T_WHITESPACE"," ",443],".",["T_WHITESPACE"," ",443],["T_CONSTANT_ENCAPSED_STRING","\"product_description` as `pd`\n\t\t\t\tON `p`.`product_id` = `pd`.`product_id`\n\t\t\t\tLEFT JOIN `\"",443],["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_STRING","DB_PREFIX",445],["T_WHITESPACE"," ",445],".",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` as `apl`\n\t\t\t\tON `apl`.`product_id` = `p`.`product_id`\n\t\t\t\tWHERE `apl`.`amazon_sku` IS NULL\n\t\t\t\tAND `pd`.`language_id` = '\"",445],["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_INT_CAST","(int)",448],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","config",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","get",448],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",448],")",["T_WHITESPACE"," ",448],".",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","\"'\"",448],")",["T_OBJECT_OPERATOR","->",448],["T_STRING","rows",448],";",["T_WHITESPACE","\n\t\t",448],"}",["T_WHITESPACE","\n\n\t\t",449],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$result",451],";",["T_WHITESPACE","\n\t",451],"}",["T_WHITESPACE","\n\n\t",452],["T_PRIVATE","private",454],["T_WHITESPACE"," ",454],["T_FUNCTION","function",454],["T_WHITESPACE"," ",454],["T_STRING","productLinkExists",454],"(",["T_VARIABLE","$product_id",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$var",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n\t\t",454],["T_VARIABLE","$link",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","db",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","query",455],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_STRING","DB_PREFIX",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = \"",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_INT_CAST","(int)",455],["T_VARIABLE","$product_id",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","\" AND var = '\"",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","db",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","escape",455],"(",["T_VARIABLE","$var",455],")",["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","\"'\"",455],")",["T_OBJECT_OPERATOR","->",455],["T_STRING","row",455],";",["T_WHITESPACE","\n\n\t\t",455],["T_IF","if",457],["T_WHITESPACE"," ",457],"(",["T_EMPTY","empty",457],"(",["T_VARIABLE","$link",457],")",")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n\t\t\t",457],["T_RETURN","return",458],["T_WHITESPACE"," ",458],["T_STRING","false",458],";",["T_WHITESPACE","\n\t\t",458],"}",["T_WHITESPACE"," ",459],["T_ELSE","else",459],["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n\t\t\t",459],["T_RETURN","return",460],["T_WHITESPACE"," ",460],["T_STRING","true",460],";",["T_WHITESPACE","\n\t\t",460],"}",["T_WHITESPACE","\n\t",461],"}",["T_WHITESPACE","\n\n\t",462],["T_PUBLIC","public",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","getOrderStatusString",464],"(",["T_VARIABLE","$order_id",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n\t\t",464],["T_VARIABLE","$row",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","db",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","query",465],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `s`.`key`\n\t\t\tFROM `\"",465],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_STRING","DB_PREFIX",467],["T_WHITESPACE"," ",467],".",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","\"order` `o`\n\t\t\tJOIN `\"",467],["T_WHITESPACE"," ",468],".",["T_WHITESPACE"," ",468],["T_STRING","DB_PREFIX",468],["T_WHITESPACE"," ",468],".",["T_WHITESPACE"," ",468],["T_CONSTANT_ENCAPSED_STRING","\"setting` `s` ON `o`.`order_id` = \"",468],["T_WHITESPACE"," ",468],".",["T_WHITESPACE"," ",468],["T_INT_CAST","(int)",468],["T_VARIABLE","$order_id",468],["T_WHITESPACE"," ",468],".",["T_WHITESPACE"," ",468],["T_CONSTANT_ENCAPSED_STRING","\" AND `s`.`value` = `o`.`order_status_id`\n\t\t\tWHERE `s`.`key` = 'openbay_amazon_order_status_shipped' OR `s`.`key` = 'openbay_amazon_order_status_canceled'\n\t\t\tLIMIT 1\"",468],")",["T_OBJECT_OPERATOR","->",470],["T_STRING","row",470],";",["T_WHITESPACE","\n\n\t\t",470],["T_IF","if",472],["T_WHITESPACE"," ",472],"(","!",["T_ISSET","isset",472],"(",["T_VARIABLE","$row",472],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",472],"]",")",["T_WHITESPACE"," ",472],["T_BOOLEAN_OR","||",472],["T_WHITESPACE"," ",472],["T_EMPTY","empty",472],"(",["T_VARIABLE","$row",472],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",472],"]",")",")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n\t\t\t",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","null",473],";",["T_WHITESPACE","\n\t\t",473],"}",["T_WHITESPACE","\n\n\t\t",474],["T_VARIABLE","$key",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$row",476],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",476],"]",";",["T_WHITESPACE","\n\n\t\t",476],["T_SWITCH","switch",478],["T_WHITESPACE"," ",478],"(",["T_VARIABLE","$key",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n\t\t\t",478],["T_CASE","case",479],["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_shipped'",479],":",["T_WHITESPACE","\n\t\t\t\t",479],["T_VARIABLE","$order_status",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'shipped'",480],";",["T_WHITESPACE","\n\t\t\t\t",480],["T_BREAK","break",481],";",["T_WHITESPACE","\n\t\t\t",481],["T_CASE","case",482],["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_canceled'",482],":",["T_WHITESPACE","\n\t\t\t\t",482],["T_VARIABLE","$order_status",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'canceled'",483],";",["T_WHITESPACE","\n\t\t\t\t",483],["T_BREAK","break",484],";",["T_WHITESPACE","\n\n\t\t\t",484],["T_DEFAULT","default",486],":",["T_WHITESPACE","\n\t\t\t\t",486],["T_VARIABLE","$order_status",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","null",487],";",["T_WHITESPACE","\n\t\t\t\t",487],["T_BREAK","break",488],";",["T_WHITESPACE","\n\t\t",488],"}",["T_WHITESPACE","\n\n\t\t",489],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$order_status",491],";",["T_WHITESPACE","\n\t",491],"}",["T_WHITESPACE","\n\n\t",492],["T_PUBLIC","public",494],["T_WHITESPACE"," ",494],["T_FUNCTION","function",494],["T_WHITESPACE"," ",494],["T_STRING","updateAmazonOrderTracking",494],"(",["T_VARIABLE","$order_id",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$courier_id",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$courier_from_list",494],",",["T_WHITESPACE"," ",494],["T_VARIABLE","$tracking_no",494],")",["T_WHITESPACE"," ",494],"{",["T_WHITESPACE","\n\t\t",494],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","db",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","query",495],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_STRING","DB_PREFIX",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` SET `courier_id` = '\"",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","db",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","escape",495],"(",["T_VARIABLE","$courier_id",495],")",["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","\"', `courier_other` = \"",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_INT_CAST","(int)",495],"!",["T_VARIABLE","$courier_from_list",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","\", `tracking_no` = '\"",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","db",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","escape",495],"(",["T_VARIABLE","$tracking_no",495],")",["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = \"",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_INT_CAST","(int)",495],["T_VARIABLE","$order_id",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","\"\"",495],")",";",["T_WHITESPACE","\n\t",495],"}",["T_WHITESPACE","\n\n\t",496],["T_PUBLIC","public",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","getAmazonOrderId",498],"(",["T_VARIABLE","$order_id",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n\t\t",498],["T_VARIABLE","$row",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","db",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","query",499],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `amazon_order_id`\n\t\t\tFROM `\"",499],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_STRING","DB_PREFIX",501],["T_WHITESPACE"," ",501],".",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order`\n\t\t\tWHERE `order_id` = \"",501],["T_WHITESPACE"," ",502],".",["T_WHITESPACE"," ",502],["T_INT_CAST","(int)",502],["T_VARIABLE","$order_id",502],["T_WHITESPACE"," ",502],".",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tLIMIT 1\"",502],")",["T_OBJECT_OPERATOR","->",503],["T_STRING","row",503],";",["T_WHITESPACE","\n\n\t\t",503],["T_IF","if",505],["T_WHITESPACE"," ",505],"(",["T_ISSET","isset",505],"(",["T_VARIABLE","$row",505],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",505],"]",")",["T_WHITESPACE"," ",505],["T_BOOLEAN_AND","&&",505],["T_WHITESPACE"," ",505],"!",["T_EMPTY","empty",505],"(",["T_VARIABLE","$row",505],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",505],"]",")",")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n\t\t\t",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],["T_VARIABLE","$row",506],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",506],"]",";",["T_WHITESPACE","\n\t\t",506],"}",["T_WHITESPACE","\n\n\t\t",507],["T_RETURN","return",509],["T_WHITESPACE"," ",509],["T_STRING","null",509],";",["T_WHITESPACE","\n\t",509],"}",["T_WHITESPACE","\n\n\t",510],["T_PUBLIC","public",512],["T_WHITESPACE"," ",512],["T_FUNCTION","function",512],["T_WHITESPACE"," ",512],["T_STRING","getAmazonOrderedProducts",512],"(",["T_VARIABLE","$order_id",512],")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n\t\t",512],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","db",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","query",513],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT `aop`.`amazon_order_item_id`, `op`.`quantity`\n\t\t\tFROM `\"",513],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_STRING","DB_PREFIX",515],["T_WHITESPACE"," ",515],".",["T_WHITESPACE"," ",515],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order_product` `aop`\n\t\t\tJOIN `\"",515],["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_STRING","DB_PREFIX",516],["T_WHITESPACE"," ",516],".",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","\"order_product` `op` ON `op`.`order_product_id` = `aop`.`order_product_id`\n\t\t\t\tAND `op`.`order_id` = \"",516],["T_WHITESPACE"," ",517],".",["T_WHITESPACE"," ",517],["T_INT_CAST","(int)",517],["T_VARIABLE","$order_id",517],")",["T_OBJECT_OPERATOR","->",517],["T_STRING","rows",517],";",["T_WHITESPACE","\n\t",517],"}",["T_WHITESPACE","\n\n\t",518],["T_PUBLIC","public",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","getProductQuantity",520],"(",["T_VARIABLE","$product_id",520],",",["T_WHITESPACE"," ",520],["T_VARIABLE","$var",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","''",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n\t\t",520],["T_VARIABLE","$result",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","null",521],";",["T_WHITESPACE","\n\n\t\t",521],["T_IF","if",523],["T_WHITESPACE"," ",523],"(",["T_VARIABLE","$var",523],["T_WHITESPACE"," ",523],["T_IS_NOT_IDENTICAL","!==",523],["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","''",523],["T_WHITESPACE"," ",523],["T_BOOLEAN_AND","&&",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","openbay",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","addonLoad",523],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",523],")",")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n\t\t\t",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","load",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","model",524],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",524],")",";",["T_WHITESPACE","\n\t\t\t",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","load",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","model",525],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",525],")",";",["T_WHITESPACE","\n\t\t\t",525],["T_VARIABLE","$option_stocks",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","model_extension_module_openstock",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","getVariants",526],"(",["T_VARIABLE","$product_id",526],")",";",["T_WHITESPACE","\n\n\t\t\t",526],["T_VARIABLE","$option",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_STRING","null",528],";",["T_WHITESPACE","\n\t\t\t",528],["T_FOREACH","foreach",529],["T_WHITESPACE"," ",529],"(",["T_VARIABLE","$option_stocks",529],["T_WHITESPACE"," ",529],["T_AS","as",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$option_iterator",529],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n\t\t\t\t",529],["T_IF","if",530],["T_WHITESPACE"," ",530],"(",["T_VARIABLE","$option_iterator",530],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",530],"]",["T_WHITESPACE"," ",530],["T_IS_IDENTICAL","===",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$var",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n\t\t\t\t\t",530],["T_VARIABLE","$option",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$option_iterator",531],";",["T_WHITESPACE","\n\t\t\t\t\t",531],["T_BREAK","break",532],";",["T_WHITESPACE","\n\t\t\t\t",532],"}",["T_WHITESPACE","\n\t\t\t",533],"}",["T_WHITESPACE","\n\n\t\t\t",534],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_VARIABLE","$option",536],["T_WHITESPACE"," ",536],["T_IS_NOT_EQUAL","!=",536],["T_WHITESPACE"," ",536],["T_STRING","null",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n\t\t\t\t",536],["T_VARIABLE","$result",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],["T_VARIABLE","$option",537],"[",["T_CONSTANT_ENCAPSED_STRING","'stock'",537],"]",";",["T_WHITESPACE","\n\t\t\t",537],"}",["T_WHITESPACE","\n\t\t",538],"}",["T_WHITESPACE"," ",539],["T_ELSE","else",539],["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n\t\t\t",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","load",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","model",540],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",540],")",";",["T_WHITESPACE","\n\t\t\t",540],["T_VARIABLE","$product_info",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","model_catalog_product",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getProduct",541],"(",["T_VARIABLE","$product_id",541],")",";",["T_WHITESPACE","\n\n\t\t\t",541],["T_IF","if",543],["T_WHITESPACE"," ",543],"(",["T_ISSET","isset",543],"(",["T_VARIABLE","$product_info",543],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",543],"]",")",")",["T_WHITESPACE"," ",543],"{",["T_WHITESPACE","\n\t\t\t\t",543],["T_VARIABLE","$result",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$product_info",544],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",544],"]",";",["T_WHITESPACE","\n\t\t\t",544],"}",["T_WHITESPACE","\n\t\t",545],"}",["T_WHITESPACE","\n\t\t",546],["T_RETURN","return",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$result",547],";",["T_WHITESPACE","\n\t",547],"}",["T_WHITESPACE","\n\n\t",548],["T_PUBLIC","public",550],["T_WHITESPACE"," ",550],["T_FUNCTION","function",550],["T_WHITESPACE"," ",550],["T_STRING","getProductSearchTotal",550],"(",["T_VARIABLE","$data",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_ARRAY","array",550],"(",")",")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n\t\t",550],["T_VARIABLE","$sql",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT COUNT(*) AS product_total\n\t\t\tFROM \"",551],["T_WHITESPACE"," ",553],".",["T_WHITESPACE"," ",553],["T_STRING","DB_PREFIX",553],["T_WHITESPACE"," ",553],".",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\tLEFT JOIN \"",553],["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_STRING","DB_PREFIX",554],["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_search aps ON p.product_id = aps.product_id AND aps.marketplace = '\"",554],["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","db",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","escape",554],"(",["T_VARIABLE","$data",554],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_marketplace'",554],"]",")",["T_WHITESPACE"," ",554],".",["T_WHITESPACE"," ",554],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\tLEFT JOIN \"",554],["T_WHITESPACE"," ",555],".",["T_WHITESPACE"," ",555],["T_STRING","DB_PREFIX",555],["T_WHITESPACE"," ",555],".",["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON p.product_id = apl.product_id\n\t\t\tLEFT JOIN \"",555],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_STRING","DB_PREFIX",556],["T_WHITESPACE"," ",556],".",["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product ap ON p.product_id = ap.product_id\n\t\t\tWHERE apl.product_id IS NULL AND ap.product_id IS NULL \"",556],";",["T_WHITESPACE","\n\n\t\t",557],["T_IF","if",559],["T_WHITESPACE"," ",559],"(","!",["T_EMPTY","empty",559],"(",["T_VARIABLE","$data",559],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",559],"]",")",")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n\t\t\t",559],["T_VARIABLE","$sql",560],["T_WHITESPACE"," ",560],["T_CONCAT_EQUAL",".=",560],["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","\" AND aps.status = '\"",560],["T_WHITESPACE"," ",560],".",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","db",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","escape",560],"(",["T_VARIABLE","$data",560],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",560],"]",")",["T_WHITESPACE"," ",560],".",["T_WHITESPACE"," ",560],["T_CONSTANT_ENCAPSED_STRING","\"'\"",560],";",["T_WHITESPACE","\n\t\t",560],"}",["T_WHITESPACE","\n\n\t\t",561],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","db",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","query",563],"(",["T_VARIABLE","$sql",563],")",["T_OBJECT_OPERATOR","->",563],["T_STRING","row",563],"[",["T_CONSTANT_ENCAPSED_STRING","'product_total'",563],"]",";",["T_WHITESPACE","\n\t",563],"}",["T_WHITESPACE","\n\n\t",564],["T_PUBLIC","public",566],["T_WHITESPACE"," ",566],["T_FUNCTION","function",566],["T_WHITESPACE"," ",566],["T_STRING","getProductSearch",566],"(",["T_VARIABLE","$data",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_ARRAY","array",566],"(",")",")",["T_WHITESPACE"," ",566],"{",["T_WHITESPACE","\n\t\t",566],["T_VARIABLE","$sql",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tSELECT p.product_id, marketplace, aps.status, aps.data, aps.matches\n\t\t\tFROM \"",567],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_STRING","DB_PREFIX",569],["T_WHITESPACE"," ",569],".",["T_WHITESPACE"," ",569],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\tLEFT JOIN \"",569],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_STRING","DB_PREFIX",570],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_search aps ON p.product_id = aps.product_id AND aps.marketplace = '\"",570],["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","db",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","escape",570],"(",["T_VARIABLE","$data",570],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_marketplace'",570],"]",")",["T_WHITESPACE"," ",570],".",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\tLEFT JOIN \"",570],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_STRING","DB_PREFIX",571],["T_WHITESPACE"," ",571],".",["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON p.product_id = apl.product_id\n\t\t\tLEFT JOIN \"",571],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_STRING","DB_PREFIX",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product ap ON p.product_id = ap.product_id\n\t\t\tWHERE apl.product_id IS NULL AND ap.product_id IS NULL \"",572],";",["T_WHITESPACE","\n\n\t\t",573],["T_IF","if",575],["T_WHITESPACE"," ",575],"(","!",["T_EMPTY","empty",575],"(",["T_VARIABLE","$data",575],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",575],"]",")",")",["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n\t\t\t",575],["T_VARIABLE","$sql",576],["T_WHITESPACE"," ",576],["T_CONCAT_EQUAL",".=",576],["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","\" AND aps.status = '\"",576],["T_WHITESPACE"," ",576],".",["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","db",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","escape",576],"(",["T_VARIABLE","$data",576],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",576],"]",")",["T_WHITESPACE"," ",576],".",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","\"'\"",576],";",["T_WHITESPACE","\n\t\t",576],"}",["T_WHITESPACE","\n\n\t\t",577],["T_VARIABLE","$sql",579],["T_WHITESPACE"," ",579],["T_CONCAT_EQUAL",".=",579],["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT \"",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_INT_CAST","(int)",579],["T_VARIABLE","$data",579],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",579],"]",["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","\", \"",579],["T_WHITESPACE"," ",579],".",["T_WHITESPACE"," ",579],["T_INT_CAST","(int)",579],["T_VARIABLE","$data",579],"[",["T_CONSTANT_ENCAPSED_STRING","'limit'",579],"]",";",["T_WHITESPACE","\n\n\t\t",579],["T_VARIABLE","$results",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_ARRAY","array",581],"(",")",";",["T_WHITESPACE","\n\n\t\t",581],["T_VARIABLE","$rows",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_VARIABLE","$this",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","db",583],["T_OBJECT_OPERATOR","->",583],["T_STRING","query",583],"(",["T_VARIABLE","$sql",583],")",["T_OBJECT_OPERATOR","->",583],["T_STRING","rows",583],";",["T_WHITESPACE","\n\n\t\t",583],["T_FOREACH","foreach",585],["T_WHITESPACE"," ",585],"(",["T_VARIABLE","$rows",585],["T_WHITESPACE"," ",585],["T_AS","as",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$row",585],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n\t\t\t",585],["T_VARIABLE","$results",586],"[","]",["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_ARRAY","array",586],"(",["T_WHITESPACE","\n\t\t\t\t",586],["T_CONSTANT_ENCAPSED_STRING","'product_id'",587],["T_WHITESPACE"," ",587],["T_DOUBLE_ARROW","=>",587],["T_WHITESPACE"," ",587],["T_VARIABLE","$row",587],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",587],"]",",",["T_WHITESPACE","\n\t\t\t\t",587],["T_CONSTANT_ENCAPSED_STRING","'marketplace'",588],["T_WHITESPACE"," ",588],["T_DOUBLE_ARROW","=>",588],["T_WHITESPACE"," ",588],["T_VARIABLE","$row",588],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace'",588],"]",",",["T_WHITESPACE","\n\t\t\t\t",588],["T_CONSTANT_ENCAPSED_STRING","'status'",589],["T_WHITESPACE"," ",589],["T_DOUBLE_ARROW","=>",589],["T_WHITESPACE"," ",589],["T_VARIABLE","$row",589],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",589],"]",",",["T_WHITESPACE","\n\t\t\t\t",589],["T_CONSTANT_ENCAPSED_STRING","'matches'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$row",590],"[",["T_CONSTANT_ENCAPSED_STRING","'matches'",590],"]",",",["T_WHITESPACE","\n\t\t\t\t",590],["T_CONSTANT_ENCAPSED_STRING","'data'",591],["T_WHITESPACE"," ",591],["T_DOUBLE_ARROW","=>",591],["T_WHITESPACE"," ",591],["T_STRING","json_decode",591],"(",["T_VARIABLE","$row",591],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",591],"]",",",["T_WHITESPACE"," ",591],["T_LNUMBER","1",591],")",",",["T_WHITESPACE","\n\t\t\t",591],")",";",["T_WHITESPACE","\n\t\t",592],"}",["T_WHITESPACE","\n\n\t\t",593],["T_RETURN","return",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$results",595],";",["T_WHITESPACE","\n\t",595],"}",["T_WHITESPACE","\n\n\t",596],["T_PUBLIC","public",598],["T_WHITESPACE"," ",598],["T_FUNCTION","function",598],["T_WHITESPACE"," ",598],["T_STRING","updateAmazonSkusQuantities",598],"(",["T_VARIABLE","$skus",598],")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n\t\t",598],["T_VARIABLE","$sku_array",599],["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_ARRAY","array",599],"(",")",";",["T_WHITESPACE","\n\n\t\t",599],["T_FOREACH","foreach",601],["T_WHITESPACE"," ",601],"(",["T_VARIABLE","$skus",601],["T_WHITESPACE"," ",601],["T_AS","as",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$sku",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n\t\t\t",601],["T_VARIABLE","$sku_array",602],"[","]",["T_WHITESPACE"," ",602],"=",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","\"'\"",602],["T_WHITESPACE"," ",602],".",["T_WHITESPACE"," ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","db",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","escape",602],"(",["T_VARIABLE","$sku",602],")",["T_WHITESPACE"," ",602],".",["T_WHITESPACE"," ",602],["T_CONSTANT_ENCAPSED_STRING","\"'\"",602],";",["T_WHITESPACE","\n\t\t",602],"}",["T_WHITESPACE","\n\n\t\t",603],["T_IF","if",605],["T_WHITESPACE"," ",605],"(",["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","openbay",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","addonLoad",605],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",605],")",")",["T_WHITESPACE"," ",605],"{",["T_WHITESPACE","\n\t\t\t",605],["T_VARIABLE","$rows",606],["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","db",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","query",606],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT apl.amazon_sku, if (pov.product_id IS NULL, p.quantity, pov.stock) AS 'quantity' FROM \"",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_STRING","DB_PREFIX",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl JOIN \"",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_STRING","DB_PREFIX",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\"product p ON apl.product_id = p.product_id LEFT JOIN \"",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_STRING","DB_PREFIX",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant pov ON apl.product_id = pov.product_id AND apl.var = pov.sku WHERE apl.amazon_sku IN (\"",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_STRING","implode",606],"(",["T_CONSTANT_ENCAPSED_STRING","','",606],",",["T_WHITESPACE"," ",606],["T_VARIABLE","$sku_array",606],")",["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","\")\"",606],")",["T_OBJECT_OPERATOR","->",606],["T_STRING","rows",606],";",["T_WHITESPACE","\n\t\t",606],"}",["T_WHITESPACE"," ",607],["T_ELSE","else",607],["T_WHITESPACE"," ",607],"{",["T_WHITESPACE","\n\t\t\t",607],["T_VARIABLE","$rows",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","db",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","query",608],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT apl.amazon_sku, p.quantity FROM \"",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_STRING","DB_PREFIX",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl JOIN \"",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_STRING","DB_PREFIX",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","\"product p ON apl.product_id = p.product_id WHERE apl.amazon_sku IN (\"",608],["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_STRING","implode",608],"(",["T_CONSTANT_ENCAPSED_STRING","','",608],",",["T_WHITESPACE"," ",608],["T_VARIABLE","$sku_array",608],")",["T_WHITESPACE"," ",608],".",["T_WHITESPACE"," ",608],["T_CONSTANT_ENCAPSED_STRING","\")\"",608],")",["T_OBJECT_OPERATOR","->",608],["T_STRING","rows",608],";",["T_WHITESPACE","\n\t\t",608],"}",["T_WHITESPACE","\n\n\t\t",609],["T_VARIABLE","$return",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_ARRAY","array",611],"(",")",";",["T_WHITESPACE","\n\n\t\t",611],["T_FOREACH","foreach",613],["T_WHITESPACE"," ",613],"(",["T_VARIABLE","$rows",613],["T_WHITESPACE"," ",613],["T_AS","as",613],["T_WHITESPACE"," ",613],["T_VARIABLE","$row",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n\t\t\t",613],["T_VARIABLE","$return",614],"[",["T_VARIABLE","$row",614],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",614],"]","]",["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$row",614],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",614],"]",";",["T_WHITESPACE","\n\t\t",614],"}",["T_WHITESPACE","\n\n\t\t",615],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","openbay",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","amazon",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","updateQuantities",617],"(",["T_VARIABLE","$return",617],")",";",["T_WHITESPACE","\n\t",617],"}",["T_WHITESPACE","\n\n\t",618],["T_PUBLIC","public",620],["T_WHITESPACE"," ",620],["T_FUNCTION","function",620],["T_WHITESPACE"," ",620],["T_STRING","deleteListingReports",620],"(",["T_VARIABLE","$marketplace",620],")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n\t\t",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","db",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","query",621],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",621],["T_WHITESPACE"," ",621],".",["T_WHITESPACE"," ",621],["T_STRING","DB_PREFIX",621],["T_WHITESPACE"," ",621],".",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report WHERE marketplace = '\"",621],["T_WHITESPACE"," ",621],".",["T_WHITESPACE"," ",621],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","db",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","escape",621],"(",["T_VARIABLE","$marketplace",621],")",["T_WHITESPACE"," ",621],".",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","\"'\"",621],")",";",["T_WHITESPACE","\n\t",621],"}",["T_WHITESPACE","\n\n\t",622],["T_PUBLIC","public",624],["T_WHITESPACE"," ",624],["T_FUNCTION","function",624],["T_WHITESPACE"," ",624],["T_STRING","getTotalUnlinkedItemsFromReport",624],"(",["T_VARIABLE","$marketplace",624],")",["T_WHITESPACE"," ",624],"{",["T_WHITESPACE","\n\t\t",624],["T_IF","if",625],["T_WHITESPACE"," ",625],"(",["T_VARIABLE","$this",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","openbay",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","addonLoad",625],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",625],")",")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n\n\t\t\t",625],["T_VARIABLE","$sql",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, oc_sku.pov_id\n\t\t\t\tFROM \"",627],["T_WHITESPACE"," ",629],".",["T_WHITESPACE"," ",629],["T_STRING","DB_PREFIX",629],["T_WHITESPACE"," ",629],".",["T_WHITESPACE"," ",629],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t  SELECT p.product_id, if (por.product_id IS NULL, p.sku, por.sku) AS 'sku', if (por.product_id IS NULL, NULL, por.sku) AS 'var', if (por.product_id IS NULL, p.quantity, por.stock) AS 'quantity', por.product_option_variant_id AS pov_id\n\t\t\t\t  FROM \"",629],["T_WHITESPACE"," ",632],".",["T_WHITESPACE"," ",632],["T_STRING","DB_PREFIX",632],["T_WHITESPACE"," ",632],".",["T_WHITESPACE"," ",632],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t  LEFT JOIN \"",632],["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_STRING","DB_PREFIX",633],["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant por USING(product_id)\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",633],["T_WHITESPACE"," ",635],".",["T_WHITESPACE"," ",635],["T_STRING","DB_PREFIX",635],["T_WHITESPACE"," ",635],".",["T_WHITESPACE"," ",635],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",635],["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_STRING","DB_PREFIX",636],["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",636],["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_INT_CAST","(int)",636],["T_VARIABLE","$this",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","config",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","get",636],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",636],")",["T_WHITESPACE"," ",636],".",["T_WHITESPACE"," ",636],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL AND alr.marketplace = '\"",636],["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","db",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","escape",637],"(",["T_VARIABLE","$marketplace",637],")",["T_WHITESPACE"," ",637],".",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tORDER BY alr.sku\n\t\t\t\"",637],";",["T_WHITESPACE","\n\n\t\t\t",639],["T_VARIABLE","$result",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","db",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","query",641],"(",["T_VARIABLE","$sql",641],")",";",["T_WHITESPACE","\n\t\t",641],"}",["T_WHITESPACE"," ",642],["T_ELSE","else",642],["T_WHITESPACE"," ",642],"{",["T_WHITESPACE","\n\t\t\t",642],["T_VARIABLE","$result",643],["T_WHITESPACE"," ",643],"=",["T_WHITESPACE"," ",643],["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","db",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","query",643],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity\n\t\t\t\tFROM \"",643],["T_WHITESPACE"," ",645],".",["T_WHITESPACE"," ",645],["T_STRING","DB_PREFIX",645],["T_WHITESPACE"," ",645],".",["T_WHITESPACE"," ",645],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t\tSELECT p.product_id, p.sku, NULL AS 'var', p.quantity\n\t\t\t\t\tFROM \"",645],["T_WHITESPACE"," ",648],".",["T_WHITESPACE"," ",648],["T_STRING","DB_PREFIX",648],["T_WHITESPACE"," ",648],".",["T_WHITESPACE"," ",648],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",648],["T_WHITESPACE"," ",650],".",["T_WHITESPACE"," ",650],["T_STRING","DB_PREFIX",650],["T_WHITESPACE"," ",650],".",["T_WHITESPACE"," ",650],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",650],["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_STRING","DB_PREFIX",651],["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",651],["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_INT_CAST","(int)",651],["T_VARIABLE","$this",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","config",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","get",651],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",651],")",["T_WHITESPACE"," ",651],".",["T_WHITESPACE"," ",651],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL AND alr.marketplace = '\"",651],["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","db",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","escape",652],"(",["T_VARIABLE","$marketplace",652],")",["T_WHITESPACE"," ",652],".",["T_WHITESPACE"," ",652],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tORDER BY alr.sku\n\t\t\t\"",652],")",";",["T_WHITESPACE","\n\t\t",654],"}",["T_WHITESPACE","\n\n\t\t",655],["T_RETURN","return",657],["T_WHITESPACE"," ",657],["T_INT_CAST","(int)",657],["T_VARIABLE","$result",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","num_rows",657],";",["T_WHITESPACE","\n\t",657],"}",["T_WHITESPACE","\n\n\t",658],["T_PUBLIC","public",660],["T_WHITESPACE"," ",660],["T_FUNCTION","function",660],["T_WHITESPACE"," ",660],["T_STRING","getUnlinkedItemsFromReport",660],"(",["T_VARIABLE","$marketplace",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$limit",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_LNUMBER","100",660],",",["T_WHITESPACE"," ",660],["T_VARIABLE","$page",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_LNUMBER","1",660],")",["T_WHITESPACE"," ",660],"{",["T_WHITESPACE","\n\t\t",660],["T_VARIABLE","$start",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$limit",661],["T_WHITESPACE"," ",661],"*",["T_WHITESPACE"," ",661],"(",["T_VARIABLE","$page",661],["T_WHITESPACE"," ",661],"-",["T_WHITESPACE"," ",661],["T_LNUMBER","1",661],")",";",["T_WHITESPACE","\n\n\t\t",661],["T_IF","if",663],["T_WHITESPACE"," ",663],"(",["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","openbay",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","addonLoad",663],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",663],")",")",["T_WHITESPACE"," ",663],"{",["T_WHITESPACE","\n\t\t\t",663],["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","load",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","model",664],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",664],")",";",["T_WHITESPACE","\n\t\t\t",664],["T_VARIABLE","$rows",665],["T_WHITESPACE"," ",665],"=",["T_WHITESPACE"," ",665],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","db",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","query",665],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity, oc_sku.pov_id\n\t\t\t\tFROM \"",665],["T_WHITESPACE"," ",667],".",["T_WHITESPACE"," ",667],["T_STRING","DB_PREFIX",667],["T_WHITESPACE"," ",667],".",["T_WHITESPACE"," ",667],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t  SELECT p.product_id, if (por.product_id IS NULL, p.sku, por.sku) AS 'sku', if (por.product_id IS NULL, NULL, por.sku) AS 'var', if (por.product_id IS NULL, p.quantity, por.stock) AS 'quantity', por.product_option_variant_id AS pov_id\n\t\t\t\t  FROM \"",667],["T_WHITESPACE"," ",670],".",["T_WHITESPACE"," ",670],["T_STRING","DB_PREFIX",670],["T_WHITESPACE"," ",670],".",["T_WHITESPACE"," ",670],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t  LEFT JOIN \"",670],["T_WHITESPACE"," ",671],".",["T_WHITESPACE"," ",671],["T_STRING","DB_PREFIX",671],["T_WHITESPACE"," ",671],".",["T_WHITESPACE"," ",671],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant por USING(product_id)\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",671],["T_WHITESPACE"," ",673],".",["T_WHITESPACE"," ",673],["T_STRING","DB_PREFIX",673],["T_WHITESPACE"," ",673],".",["T_WHITESPACE"," ",673],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",673],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_STRING","DB_PREFIX",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",674],["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_INT_CAST","(int)",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","config",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","get",674],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",674],")",["T_WHITESPACE"," ",674],".",["T_WHITESPACE"," ",674],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL AND alr.marketplace = '\"",674],["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","db",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","escape",675],"(",["T_VARIABLE","$marketplace",675],")",["T_WHITESPACE"," ",675],".",["T_WHITESPACE"," ",675],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tORDER BY alr.sku\n\t\t\t\tLIMIT \"",675],["T_WHITESPACE"," ",677],".",["T_WHITESPACE"," ",677],["T_INT_CAST","(int)",677],["T_VARIABLE","$start",677],["T_WHITESPACE"," ",677],".",["T_WHITESPACE"," ",677],["T_CONSTANT_ENCAPSED_STRING","\",\"",677],["T_WHITESPACE"," ",677],".",["T_WHITESPACE"," ",677],["T_INT_CAST","(int)",677],["T_VARIABLE","$limit",677],")",["T_OBJECT_OPERATOR","->",677],["T_STRING","rows",677],";",["T_WHITESPACE","\n\t\t",677],"}",["T_WHITESPACE"," ",678],["T_ELSE","else",678],["T_WHITESPACE"," ",678],"{",["T_WHITESPACE","\n\t\t\t",678],["T_VARIABLE","$rows",679],["T_WHITESPACE"," ",679],"=",["T_WHITESPACE"," ",679],["T_VARIABLE","$this",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","db",679],["T_OBJECT_OPERATOR","->",679],["T_STRING","query",679],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tSELECT alr.sku AS 'amazon_sku', alr.quantity AS 'amazon_quantity', alr.asin, alr.price AS 'amazon_price', oc_sku.product_id, pd.name, oc_sku.sku, oc_sku.var, oc_sku.quantity\n\t\t\t\tFROM \"",679],["T_WHITESPACE"," ",681],".",["T_WHITESPACE"," ",681],["T_STRING","DB_PREFIX",681],["T_WHITESPACE"," ",681],".",["T_WHITESPACE"," ",681],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report alr\n\t\t\t\tLEFT JOIN (\n\t\t\t\t\tSELECT p.product_id, p.sku, NULL AS 'var', p.quantity\n\t\t\t\t\tFROM \"",681],["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_STRING","DB_PREFIX",684],["T_WHITESPACE"," ",684],".",["T_WHITESPACE"," ",684],["T_CONSTANT_ENCAPSED_STRING","\"product p\n\t\t\t\t) AS oc_sku ON alr.sku = oc_sku.sku\n\t\t\t\tLEFT JOIN \"",684],["T_WHITESPACE"," ",686],".",["T_WHITESPACE"," ",686],["T_STRING","DB_PREFIX",686],["T_WHITESPACE"," ",686],".",["T_WHITESPACE"," ",686],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link apl ON (oc_sku.var IS NULL AND oc_sku.product_id = apl.product_id) OR (oc_sku.var IS NOT NULL AND oc_sku.product_id = apl.product_id AND oc_sku.var = apl.var)\n\t\t\t\tLEFT JOIN \"",686],["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_STRING","DB_PREFIX",687],["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","\"product_description pd ON oc_sku.product_id = pd.product_id AND pd.language_id = \"",687],["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_INT_CAST","(int)",687],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","config",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","get",687],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",687],")",["T_WHITESPACE"," ",687],".",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tWHERE apl.product_id IS NULL AND alr.marketplace = '\"",687],["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","db",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","escape",688],"(",["T_VARIABLE","$marketplace",688],")",["T_WHITESPACE"," ",688],".",["T_WHITESPACE"," ",688],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tORDER BY alr.sku\n\t\t\t\tLIMIT \"",688],["T_WHITESPACE"," ",690],".",["T_WHITESPACE"," ",690],["T_INT_CAST","(int)",690],["T_VARIABLE","$start",690],["T_WHITESPACE"," ",690],".",["T_WHITESPACE"," ",690],["T_CONSTANT_ENCAPSED_STRING","\",\"",690],["T_WHITESPACE"," ",690],".",["T_WHITESPACE"," ",690],["T_INT_CAST","(int)",690],["T_VARIABLE","$limit",690],")",["T_OBJECT_OPERATOR","->",690],["T_STRING","rows",690],";",["T_WHITESPACE","\n\t\t",690],"}",["T_WHITESPACE","\n\n\t\t",691],["T_VARIABLE","$products",693],["T_WHITESPACE"," ",693],"=",["T_WHITESPACE"," ",693],["T_ARRAY","array",693],"(",")",";",["T_WHITESPACE","\n\n\t\t",693],["T_FOREACH","foreach",695],["T_WHITESPACE"," ",695],"(",["T_VARIABLE","$rows",695],["T_WHITESPACE"," ",695],["T_AS","as",695],["T_WHITESPACE"," ",695],["T_VARIABLE","$row",695],")",["T_WHITESPACE"," ",695],"{",["T_WHITESPACE","\n\t\t\t",695],["T_VARIABLE","$combinations",696],["T_WHITESPACE"," ",696],"=",["T_WHITESPACE"," ",696],["T_ARRAY","array",696],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",696],["T_IF","if",698],["T_WHITESPACE"," ",698],"(",["T_ISSET","isset",698],"(",["T_VARIABLE","$row",698],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",698],"]",")",["T_WHITESPACE"," ",698],["T_BOOLEAN_AND","&&",698],["T_WHITESPACE"," ",698],"!",["T_EMPTY","empty",698],"(",["T_VARIABLE","$row",698],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",698],"]",")",")",["T_WHITESPACE"," ",698],"{",["T_WHITESPACE","\n\t\t\t\t",698],["T_VARIABLE","$variants",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],"(",["T_ISSET","isset",699],"(",["T_VARIABLE","$row",699],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",699],"]",")",["T_WHITESPACE"," ",699],"?",["T_WHITESPACE"," ",699],["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","model_extension_module_openstock",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getVariant",699],"(",["T_VARIABLE","$row",699],"[",["T_CONSTANT_ENCAPSED_STRING","'pov_id'",699],"]",")",["T_WHITESPACE"," ",699],":",["T_WHITESPACE"," ",699],["T_CONSTANT_ENCAPSED_STRING","''",699],")",";",["T_WHITESPACE","\n\n\t\t\t\t",699],["T_FOREACH","foreach",701],["T_WHITESPACE"," ",701],"(",["T_VARIABLE","$variants",701],["T_WHITESPACE"," ",701],["T_AS","as",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$variant",701],")",["T_WHITESPACE"," ",701],"{",["T_WHITESPACE","\n\t\t\t\t\t",701],["T_VARIABLE","$combinations",702],"[","]",["T_WHITESPACE"," ",702],"=",["T_WHITESPACE","  ",702],["T_VARIABLE","$variant",702],"[",["T_CONSTANT_ENCAPSED_STRING","'option_value_name'",702],"]",";",["T_WHITESPACE","\n\t\t\t\t",702],"}",["T_WHITESPACE","\n\t\t\t",703],"}",["T_WHITESPACE","\n\n\t\t\t",704],["T_VARIABLE","$products",706],"[","]",["T_WHITESPACE"," ",706],"=",["T_WHITESPACE"," ",706],["T_ARRAY","array",706],"(",["T_WHITESPACE","\n\t\t\t\t",706],["T_CONSTANT_ENCAPSED_STRING","'product_id'",707],["T_WHITESPACE"," ",707],["T_DOUBLE_ARROW","=>",707],["T_WHITESPACE"," ",707],["T_VARIABLE","$row",707],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",707],"]",",",["T_WHITESPACE","\n\t\t\t\t",707],["T_CONSTANT_ENCAPSED_STRING","'name'",708],["T_WHITESPACE"," ",708],["T_DOUBLE_ARROW","=>",708],["T_WHITESPACE"," ",708],["T_VARIABLE","$row",708],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",708],"]",",",["T_WHITESPACE","\n\t\t\t\t",708],["T_CONSTANT_ENCAPSED_STRING","'sku'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_VARIABLE","$row",709],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",709],"]",",",["T_WHITESPACE","\n\t\t\t\t",709],["T_CONSTANT_ENCAPSED_STRING","'var'",710],["T_WHITESPACE"," ",710],["T_DOUBLE_ARROW","=>",710],["T_WHITESPACE"," ",710],["T_VARIABLE","$row",710],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",710],"]",",",["T_WHITESPACE","\n\t\t\t\t",710],["T_CONSTANT_ENCAPSED_STRING","'quantity'",711],["T_WHITESPACE"," ",711],["T_DOUBLE_ARROW","=>",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$row",711],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",711],"]",",",["T_WHITESPACE","\n\t\t\t\t",711],["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",712],["T_WHITESPACE"," ",712],["T_DOUBLE_ARROW","=>",712],["T_WHITESPACE"," ",712],["T_VARIABLE","$row",712],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",712],"]",",",["T_WHITESPACE","\n\t\t\t\t",712],["T_CONSTANT_ENCAPSED_STRING","'amazon_quantity'",713],["T_WHITESPACE"," ",713],["T_DOUBLE_ARROW","=>",713],["T_WHITESPACE"," ",713],["T_VARIABLE","$row",713],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_quantity'",713],"]",",",["T_WHITESPACE","\n\t\t\t\t",713],["T_CONSTANT_ENCAPSED_STRING","'amazon_price'",714],["T_WHITESPACE"," ",714],["T_DOUBLE_ARROW","=>",714],["T_WHITESPACE"," ",714],["T_STRING","number_format",714],"(",["T_VARIABLE","$row",714],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_price'",714],"]",",",["T_WHITESPACE"," ",714],["T_LNUMBER","2",714],",",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","'.'",714],",",["T_WHITESPACE"," ",714],["T_CONSTANT_ENCAPSED_STRING","''",714],")",",",["T_WHITESPACE","\n\t\t\t\t",714],["T_CONSTANT_ENCAPSED_STRING","'asin'",715],["T_WHITESPACE"," ",715],["T_DOUBLE_ARROW","=>",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$row",715],"[",["T_CONSTANT_ENCAPSED_STRING","'asin'",715],"]",",",["T_WHITESPACE","\n\t\t\t\t",715],["T_CONSTANT_ENCAPSED_STRING","'combination'",716],["T_WHITESPACE"," ",716],["T_DOUBLE_ARROW","=>",716],["T_WHITESPACE"," ",716],["T_STRING","implode",716],"(",["T_CONSTANT_ENCAPSED_STRING","' > '",716],",",["T_WHITESPACE"," ",716],["T_VARIABLE","$combinations",716],")",",",["T_WHITESPACE","\n\t\t\t",716],")",";",["T_WHITESPACE","\n\t\t",717],"}",["T_WHITESPACE","\n\n\t\t",718],["T_RETURN","return",720],["T_WHITESPACE"," ",720],["T_VARIABLE","$products",720],";",["T_WHITESPACE","\n\t",720],"}",["T_WHITESPACE","\n\n\t",721],["T_PUBLIC","public",723],["T_WHITESPACE"," ",723],["T_FUNCTION","function",723],["T_WHITESPACE"," ",723],["T_STRING","getAsinLink",723],"(",["T_VARIABLE","$asin",723],",",["T_WHITESPACE"," ",723],["T_VARIABLE","$marketplace",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n\t\t",723],["T_SWITCH","switch",724],["T_WHITESPACE"," ",724],"(",["T_VARIABLE","$marketplace",724],")",["T_WHITESPACE"," ",724],"{",["T_WHITESPACE","\n\t\t\t",724],["T_CASE","case",725],["T_WHITESPACE"," ",725],["T_CONSTANT_ENCAPSED_STRING","'uk'",725],":",["T_WHITESPACE","\n\t\t\t\t",725],["T_VARIABLE","$link",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/www.amazon.co.uk\/dp\/'",726],["T_WHITESPACE"," ",726],".",["T_WHITESPACE"," ",726],["T_VARIABLE","$asin",726],["T_WHITESPACE"," ",726],".",["T_WHITESPACE"," ",726],["T_CONSTANT_ENCAPSED_STRING","'\/'",726],";",["T_WHITESPACE","\n\t\t\t\t",726],["T_BREAK","break",727],";",["T_WHITESPACE","\n\t\t\t",727],["T_CASE","case",728],["T_WHITESPACE"," ",728],["T_CONSTANT_ENCAPSED_STRING","'de'",728],":",["T_WHITESPACE","\n\t\t\t\t",728],["T_VARIABLE","$link",729],["T_WHITESPACE"," ",729],"=",["T_WHITESPACE"," ",729],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/www.amazon.de\/dp\/'",729],["T_WHITESPACE"," ",729],".",["T_WHITESPACE"," ",729],["T_VARIABLE","$asin",729],["T_WHITESPACE"," ",729],".",["T_WHITESPACE"," ",729],["T_CONSTANT_ENCAPSED_STRING","'\/'",729],";",["T_WHITESPACE","\n\t\t\t\t",729],["T_BREAK","break",730],";",["T_WHITESPACE","\n\t\t\t",730],["T_CASE","case",731],["T_WHITESPACE"," ",731],["T_CONSTANT_ENCAPSED_STRING","'fr'",731],":",["T_WHITESPACE","\n\t\t\t\t",731],["T_VARIABLE","$link",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/www.amazon.fr\/dp\/'",732],["T_WHITESPACE"," ",732],".",["T_WHITESPACE"," ",732],["T_VARIABLE","$asin",732],["T_WHITESPACE"," ",732],".",["T_WHITESPACE"," ",732],["T_CONSTANT_ENCAPSED_STRING","'\/'",732],";",["T_WHITESPACE","\n\t\t\t\t",732],["T_BREAK","break",733],";",["T_WHITESPACE","\n\t\t\t",733],["T_CASE","case",734],["T_WHITESPACE"," ",734],["T_CONSTANT_ENCAPSED_STRING","'it'",734],":",["T_WHITESPACE","\n\t\t\t\t",734],["T_VARIABLE","$link",735],["T_WHITESPACE"," ",735],"=",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/www.amazon.it\/dp\/'",735],["T_WHITESPACE"," ",735],".",["T_WHITESPACE"," ",735],["T_VARIABLE","$asin",735],["T_WHITESPACE"," ",735],".",["T_WHITESPACE"," ",735],["T_CONSTANT_ENCAPSED_STRING","'\/'",735],";",["T_WHITESPACE","\n\t\t\t\t",735],["T_BREAK","break",736],";",["T_WHITESPACE","\n\t\t\t",736],["T_CASE","case",737],["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","'es'",737],":",["T_WHITESPACE","\n\t\t\t\t",737],["T_VARIABLE","$link",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/www.amazon.es\/dp\/'",738],["T_WHITESPACE"," ",738],".",["T_WHITESPACE"," ",738],["T_VARIABLE","$asin",738],["T_WHITESPACE"," ",738],".",["T_WHITESPACE"," ",738],["T_CONSTANT_ENCAPSED_STRING","'\/'",738],";",["T_WHITESPACE","\n\t\t\t\t",738],["T_BREAK","break",739],";",["T_WHITESPACE","\n\t\t",739],"}",["T_WHITESPACE","\n\n\t\t",740],["T_RETURN","return",742],["T_WHITESPACE"," ",742],["T_VARIABLE","$link",742],";",["T_WHITESPACE","\n\t",742],"}",["T_WHITESPACE","\n",743],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionPaymentPPExpress",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","install",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",4],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_STRING","DB_PREFIX",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order` (\n\t\t\t  `paypal_order_id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `order_id` int(11) NOT NULL,\n\t\t\t  `date_added` DATETIME NOT NULL,\n\t\t\t  `date_modified` DATETIME NOT NULL,\n\t\t\t  `capture_status` ENUM('Complete','NotComplete') DEFAULT NULL,\n\t\t\t  `currency_code` CHAR(3) NOT NULL,\n\t\t\t  `authorization_id` VARCHAR(30) NOT NULL,\n\t\t\t  `total` DECIMAL( 10, 2 ) NOT NULL,\n\t\t\t  PRIMARY KEY (`paypal_order_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci\n\t\t\"",5],")",";",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","db",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","query",18],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",18],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_STRING","DB_PREFIX",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` (\n\t\t\t  `paypal_order_transaction_id` int(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `paypal_order_id` int(11) NOT NULL,\n\t\t\t  `transaction_id` CHAR(20) NOT NULL,\n\t\t\t  `parent_id` CHAR(20) NOT NULL,\n\t\t\t  `date_added` DATETIME NOT NULL,\n\t\t\t  `note` VARCHAR(255) NOT NULL,\n\t\t\t  `msgsubid` CHAR(38) NOT NULL,\n\t\t\t  `receipt_id` CHAR(20) NOT NULL,\n\t\t\t  `payment_type` ENUM('none','echeck','instant', 'refund', 'void') DEFAULT NULL,\n\t\t\t  `payment_status` CHAR(20) NOT NULL,\n\t\t\t  `pending_reason` CHAR(50) NOT NULL,\n\t\t\t  `transaction_entity` CHAR(50) NOT NULL,\n\t\t\t  `amount` DECIMAL( 10, 2 ) NOT NULL,\n\t\t\t  `debug_data` TEXT NOT NULL,\n\t\t\t  `call_data` TEXT NOT NULL,\n\t\t\t  PRIMARY KEY (`paypal_order_transaction_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci\n\t\t\"",19],")",";",["T_WHITESPACE","\n\t",37],"}",["T_WHITESPACE","\n\n\t",38],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","uninstall",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","query",41],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_STRING","DB_PREFIX",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction`\"",41],")",";",["T_WHITESPACE","\n\t\t",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","db",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","query",42],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_STRING","DB_PREFIX",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order`\"",42],")",";",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\n\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","getPayPalOrder",45],"(",["T_VARIABLE","$order_id",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$query",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_STRING","DB_PREFIX",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order` WHERE `order_id` = '\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$order_id",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"'\"",46],")",";",["T_WHITESPACE","\n\n\t\t",46],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$query",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","row",48],";",["T_WHITESPACE","\n\t",48],"}",["T_WHITESPACE","\n\n\t",49],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","editPayPalOrderStatus",51],"(",["T_VARIABLE","$order_id",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$capture_status",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","db",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","query",52],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_STRING","DB_PREFIX",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order` SET `capture_status` = '\"",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","db",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","escape",52],"(",["T_VARIABLE","$capture_status",52],")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\"', `date_modified` = NOW() WHERE `order_id` = '\"",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_INT_CAST","(int)",52],["T_VARIABLE","$order_id",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\"'\"",52],")",";",["T_WHITESPACE","\n\t",52],"}",["T_WHITESPACE","\n\n\t",53],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","addTransaction",55],"(",["T_VARIABLE","$transaction_data",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$request_data",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n\t\t",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$request_data",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t\t",56],["T_VARIABLE","$serialized_data",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","json_encode",57],"(",["T_VARIABLE","$request_data",57],")",";",["T_WHITESPACE","\n\n\t\t\t",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","db",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","query",59],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","DB_PREFIX",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction SET call_data = '\"",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","db",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","escape",59],"(",["T_VARIABLE","$serialized_data",59],")",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE paypal_order_transaction_id = \"",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_INT_CAST","(int)",59],["T_VARIABLE","$paypal_order_transaction_id",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT 1\"",59],")",";",["T_WHITESPACE","\n\t\t",59],"}",["T_WHITESPACE","\n\n\n\n\t\t",60],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","query",64],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_STRING","DB_PREFIX",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` SET `paypal_order_id` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_INT_CAST","(int)",64],["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_order_id'",64],"]",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `transaction_id` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `parent_id` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = NOW(), `note` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'note'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `msgsubid` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'msgsubid'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `receipt_id` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'receipt_id'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_type` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_type'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_status` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_status'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `pending_reason` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'pending_reason'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `transaction_entity` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_entity'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `amount` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_DOUBLE_CAST","(float)",64],["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",64],"]",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"', `debug_data` = '\"",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","db",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","escape",64],"(",["T_VARIABLE","$transaction_data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'debug_data'",64],"]",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","\"'\"",64],")",";",["T_WHITESPACE","\n\n\t\t",64],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","db",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getLastId",66],"(",")",";",["T_WHITESPACE","\n\t",66],"}",["T_WHITESPACE","\n\n\t",67],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","updateTransaction",69],"(",["T_VARIABLE","$transaction",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","query",70],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_STRING","DB_PREFIX",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction SET paypal_order_id = \"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_INT_CAST","(int)",70],["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_order_id'",70],"]",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\", transaction_id = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_id'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', parent_id = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', date_added = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'date_added'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', note = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'note'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', msgsubid = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'msgsubid'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', receipt_id = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'receipt_id'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', payment_type = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_type'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', payment_status = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_status'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', pending_reason = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'pending_reason'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', transaction_entity = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_entity'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', amount = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', debug_data = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'debug_data'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"', call_data = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","db",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","escape",70],"(",["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'call_data'",70],"]",")",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE paypal_order_transaction_id = '\"",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_INT_CAST","(int)",70],["T_VARIABLE","$transaction",70],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_order_transaction_id'",70],"]",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","\"'\"",70],")",";",["T_WHITESPACE","\n\t",70],"}",["T_WHITESPACE","\n\n\t",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","getPaypalOrderByTransactionId",73],"(",["T_VARIABLE","$transaction_id",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\t\t",73],["T_VARIABLE","$query",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","db",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","query",74],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_STRING","DB_PREFIX",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction WHERE transaction_id = '\"",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","db",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","escape",74],"(",["T_VARIABLE","$transaction_id",74],")",["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","\"'\"",74],")",";",["T_WHITESPACE","\n\n\t\t",74],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$query",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","rows",76],";",["T_WHITESPACE","\n\t",76],"}",["T_WHITESPACE","\n\n\t",77],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","getFailedTransaction",79],"(",["T_VARIABLE","$paypal_order_transaction_id",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n\t\t",79],["T_VARIABLE","$query",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","db",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","query",80],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_STRING","DB_PREFIX",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction WHERE paypal_order_transaction_id = '\"",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_INT_CAST","(int)",80],["T_VARIABLE","$paypal_order_transaction_id",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","\"'\"",80],")",";",["T_WHITESPACE","\n\n\t\t",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$query",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","row",82],";",["T_WHITESPACE","\n\t",82],"}",["T_WHITESPACE","\n\n\t",83],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getLocalTransaction",85],"(",["T_VARIABLE","$transaction_id",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n\t\t",85],["T_VARIABLE","$result",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","db",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","query",86],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_STRING","DB_PREFIX",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction WHERE transaction_id = '\"",86],["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","db",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","escape",86],"(",["T_VARIABLE","$transaction_id",86],")",["T_WHITESPACE"," ",86],".",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","\"'\"",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","row",86],";",["T_WHITESPACE","\n\n\t\t",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$result",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t\t",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$result",89],";",["T_WHITESPACE","\n\t\t",89],"}",["T_WHITESPACE"," ",90],["T_ELSE","else",90],["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n\t\t\t",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\t\t",91],"}",["T_WHITESPACE","\n\t",92],"}",["T_WHITESPACE","\n\n\t",93],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","getTransaction",95],"(",["T_VARIABLE","$transaction_id",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t",95],["T_VARIABLE","$call_data",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n\t\t\t",96],["T_CONSTANT_ENCAPSED_STRING","'METHOD'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'GetTransactionDetails'",97],",",["T_WHITESPACE","\n\t\t\t",97],["T_CONSTANT_ENCAPSED_STRING","'TRANSACTIONID'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$transaction_id",98],",",["T_WHITESPACE","\n\t\t",98],")",";",["T_WHITESPACE","\n\n\t\t",99],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","call",101],"(",["T_VARIABLE","$call_data",101],")",";",["T_WHITESPACE","\n\t",101],"}",["T_WHITESPACE","\n\n\t",102],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","getCurrencies",104],"(",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_WHITESPACE","\n\t\t\t",105],["T_CONSTANT_ENCAPSED_STRING","'AUD'",106],",",["T_WHITESPACE","\n\t\t\t",106],["T_CONSTANT_ENCAPSED_STRING","'BRL'",107],",",["T_WHITESPACE","\n\t\t\t",107],["T_CONSTANT_ENCAPSED_STRING","'CAD'",108],",",["T_WHITESPACE","\n\t\t\t",108],["T_CONSTANT_ENCAPSED_STRING","'CZK'",109],",",["T_WHITESPACE","\n\t\t\t",109],["T_CONSTANT_ENCAPSED_STRING","'DKK'",110],",",["T_WHITESPACE","\n\t\t\t",110],["T_CONSTANT_ENCAPSED_STRING","'EUR'",111],",",["T_WHITESPACE","\n\t\t\t",111],["T_CONSTANT_ENCAPSED_STRING","'HKD'",112],",",["T_WHITESPACE","\n\t\t\t",112],["T_CONSTANT_ENCAPSED_STRING","'HUF'",113],",",["T_WHITESPACE","\n\t\t\t",113],["T_CONSTANT_ENCAPSED_STRING","'ILS'",114],",",["T_WHITESPACE","\n\t\t\t",114],["T_CONSTANT_ENCAPSED_STRING","'JPY'",115],",",["T_WHITESPACE","\n\t\t\t",115],["T_CONSTANT_ENCAPSED_STRING","'MYR'",116],",",["T_WHITESPACE","\n\t\t\t",116],["T_CONSTANT_ENCAPSED_STRING","'MXN'",117],",",["T_WHITESPACE","\n\t\t\t",117],["T_CONSTANT_ENCAPSED_STRING","'NOK'",118],",",["T_WHITESPACE","\n\t\t\t",118],["T_CONSTANT_ENCAPSED_STRING","'NZD'",119],",",["T_WHITESPACE","\n\t\t\t",119],["T_CONSTANT_ENCAPSED_STRING","'PHP'",120],",",["T_WHITESPACE","\n\t\t\t",120],["T_CONSTANT_ENCAPSED_STRING","'PLN'",121],",",["T_WHITESPACE","\n\t\t\t",121],["T_CONSTANT_ENCAPSED_STRING","'GBP'",122],",",["T_WHITESPACE","\n\t\t\t",122],["T_CONSTANT_ENCAPSED_STRING","'SGD'",123],",",["T_WHITESPACE","\n\t\t\t",123],["T_CONSTANT_ENCAPSED_STRING","'SEK'",124],",",["T_WHITESPACE","\n\t\t\t",124],["T_CONSTANT_ENCAPSED_STRING","'CHF'",125],",",["T_WHITESPACE","\n\t\t\t",125],["T_CONSTANT_ENCAPSED_STRING","'TWD'",126],",",["T_WHITESPACE","\n\t\t\t",126],["T_CONSTANT_ENCAPSED_STRING","'THB'",127],",",["T_WHITESPACE","\n\t\t\t",127],["T_CONSTANT_ENCAPSED_STRING","'TRY'",128],",",["T_WHITESPACE","\n\t\t\t",128],["T_CONSTANT_ENCAPSED_STRING","'USD'",129],",",["T_WHITESPACE","\n\t\t",129],")",";",["T_WHITESPACE","\n\t",130],"}",["T_WHITESPACE","\n\n\t",131],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getOrderId",133],"(",["T_VARIABLE","$transaction_id",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t",133],["T_VARIABLE","$query",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","db",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","query",134],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `o`.`order_id` FROM `\"",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_STRING","DB_PREFIX",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` `ot` LEFT JOIN `\"",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_STRING","DB_PREFIX",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order` `o`  ON `o`.`paypal_order_id` = `ot`.`paypal_order_id`  WHERE `ot`.`transaction_id` = '\"",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","db",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","escape",134],"(",["T_VARIABLE","$transaction_id",134],")",["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",134],")",";",["T_WHITESPACE","\n\n\t\t",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$query",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","row",136],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",136],"]",";",["T_WHITESPACE","\n\t",136],"}",["T_WHITESPACE","\n\n\t",137],["T_PUBLIC","public",139],["T_WHITESPACE"," ",139],["T_FUNCTION","function",139],["T_WHITESPACE"," ",139],["T_STRING","getCapturedTotal",139],"(",["T_VARIABLE","$paypal_order_id",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n\t\t",139],["T_VARIABLE","$query",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","db",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","query",140],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `amount` FROM `\"",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_STRING","DB_PREFIX",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` WHERE `paypal_order_id` = '\"",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_INT_CAST","(int)",140],["T_VARIABLE","$paypal_order_id",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","\"' AND `pending_reason` != 'authorization' AND (`payment_status` = 'Partially-Refunded' OR `payment_status` = 'Completed' OR `payment_status` = 'Pending') AND `transaction_entity` = 'payment'\"",140],")",";",["T_WHITESPACE","\n\n\t\t",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$query",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","row",142],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",142],"]",";",["T_WHITESPACE","\n\t",142],"}",["T_WHITESPACE","\n\n\t",143],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","getRefundedTotal",145],"(",["T_VARIABLE","$paypal_order_id",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n\t\t",145],["T_VARIABLE","$query",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","db",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","query",146],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `amount` FROM `\"",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_STRING","DB_PREFIX",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` WHERE `paypal_order_id` = '\"",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_INT_CAST","(int)",146],["T_VARIABLE","$paypal_order_id",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","\"' AND `payment_status` = 'Refunded' AND `parent_id` != ''\"",146],")",";",["T_WHITESPACE","\n\n\t\t",146],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$query",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","row",148],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",148],"]",";",["T_WHITESPACE","\n\t",148],"}",["T_WHITESPACE","\n\n\t",149],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","getRefundedTotalByParentId",151],"(",["T_VARIABLE","$transaction_id",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n\t\t",151],["T_VARIABLE","$query",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","db",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","query",152],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `amount` FROM `\"",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_STRING","DB_PREFIX",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` WHERE `parent_id` = '\"",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","db",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","escape",152],"(",["T_VARIABLE","$transaction_id",152],")",["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","\"' AND `payment_type` = 'refund'\"",152],")",";",["T_WHITESPACE","\n\n\t\t",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$query",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","row",154],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",154],"]",";",["T_WHITESPACE","\n\t",154],"}",["T_WHITESPACE","\n\n\t",155],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","cleanReturn",157],"(",["T_VARIABLE","$data",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n\t\t",157],["T_VARIABLE","$data",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","explode",158],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],")",";",["T_WHITESPACE","\n\n\t\t",158],["T_VARIABLE","$arr",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],"(",")",";",["T_WHITESPACE","\n\n\t\t",160],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$data",162],["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$k",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$v",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n\t\t\t",162],["T_VARIABLE","$tmp",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","explode",163],"(",["T_CONSTANT_ENCAPSED_STRING","'='",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$v",163],")",";",["T_WHITESPACE","\n\t\t\t",163],["T_VARIABLE","$arr",164],"[",["T_VARIABLE","$tmp",164],"[",["T_LNUMBER","0",164],"]","]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","urldecode",164],"(",["T_VARIABLE","$tmp",164],"[",["T_LNUMBER","1",164],"]",")",";",["T_WHITESPACE","\n\t\t",164],"}",["T_WHITESPACE","\n\n\t\t",165],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$arr",167],";",["T_WHITESPACE","\n\t",167],"}",["T_WHITESPACE","\n\n\t",168],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","log",170],"(",["T_VARIABLE","$data",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$title",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","null",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n\t\t",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","config",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","get",171],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_debug'",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","log",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","write",172],"(",["T_CONSTANT_ENCAPSED_STRING","'PayPal Express debug ('",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$title",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'): '",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_STRING","json_encode",172],"(",["T_VARIABLE","$data",172],")",")",";",["T_WHITESPACE","\n\t\t",172],"}",["T_WHITESPACE","\n\t",173],"}",["T_WHITESPACE","\n\n\t",174],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","getOrder",176],"(",["T_VARIABLE","$order_id",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n\t\t",176],["T_VARIABLE","$qry",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","db",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","query",177],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_STRING","DB_PREFIX",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order` WHERE `order_id` = '\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_INT_CAST","(int)",177],["T_VARIABLE","$order_id",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",177],")",";",["T_WHITESPACE","\n\n\t\t",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$qry",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","num_rows",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n\t\t\t",179],["T_VARIABLE","$order",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$qry",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","row",180],";",["T_WHITESPACE","\n\t\t\t",180],["T_VARIABLE","$order",181],"[",["T_CONSTANT_ENCAPSED_STRING","'transactions'",181],"]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getTransactions",181],"(",["T_VARIABLE","$order",181],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_order_id'",181],"]",")",";",["T_WHITESPACE","\n\t\t\t",181],["T_VARIABLE","$order",182],"[",["T_CONSTANT_ENCAPSED_STRING","'captured'",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","totalCaptured",182],"(",["T_VARIABLE","$order",182],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_order_id'",182],"]",")",";",["T_WHITESPACE","\n\t\t\t",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$order",183],";",["T_WHITESPACE","\n\t\t",183],"}",["T_WHITESPACE"," ",184],["T_ELSE","else",184],["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t\t",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n\t\t",185],"}",["T_WHITESPACE","\n\t",186],"}",["T_WHITESPACE","\n\n\t",187],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","totalCaptured",189],"(",["T_VARIABLE","$paypal_order_id",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t",189],["T_VARIABLE","$qry",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","db",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","query",190],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `amount` FROM `\"",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","DB_PREFIX",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` WHERE `paypal_order_id` = '\"",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_INT_CAST","(int)",190],["T_VARIABLE","$paypal_order_id",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","\"' AND `pending_reason` != 'authorization' AND (`payment_status` = 'Partially-Refunded' OR `payment_status` = 'Completed' OR `payment_status` = 'Pending') AND `transaction_entity` = 'payment'\"",190],")",";",["T_WHITESPACE","\n\n\t\t",190],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$qry",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",192],"]",";",["T_WHITESPACE","\n\t",192],"}",["T_WHITESPACE","\n\n\t",193],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","getTransactions",195],"(",["T_VARIABLE","$paypal_order_id",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n\t\t",195],["T_VARIABLE","$query",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","db",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","query",196],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `ot`.*, (SELECT COUNT(`ot2`.`paypal_order_id`) FROM `\"",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_STRING","DB_PREFIX",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` `ot2` WHERE `ot2`.`parent_id` = `ot`.`transaction_id`) AS `children` FROM `\"",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_STRING","DB_PREFIX",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","\"paypal_order_transaction` `ot` WHERE `paypal_order_id` = '\"",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_INT_CAST","(int)",196],["T_VARIABLE","$paypal_order_id",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `date_added` ASC\"",196],")",";",["T_WHITESPACE","\n\n\t\t",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$query",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","rows",198],";",["T_WHITESPACE","\n\t",198],"}",["T_WHITESPACE","\n\n\n\t",199],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","getTokens",202],"(",["T_VARIABLE","$test",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n\t\t",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$test",203],["T_WHITESPACE"," ",203],["T_IS_EQUAL","==",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n\t\t\t",203],["T_VARIABLE","$endpoint",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.sandbox.paypal.com\/v1\/oauth2\/token'",204],";",["T_WHITESPACE","\n\t\t\t",204],["T_VARIABLE","$client_id",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'Ad3QTBAHwhuNI_blejO4_RqvES74yWRUC61c5QVNDbxkq9csbLpDZogWp_0n'",205],";",["T_WHITESPACE","\n\t\t\t",205],["T_VARIABLE","$client_secret",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'EGqgGxCqjs1GIa5l1Ex_Flq0Mb2oMT3rJu2kwz6FuF9QKyxCg6qNqyddxCCW'",206],";",["T_WHITESPACE","\n\t\t",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\t\t\t",207],["T_VARIABLE","$endpoint",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.paypal.com\/v1\/oauth2\/token'",208],";",["T_WHITESPACE","\n\t\t\t",208],["T_VARIABLE","$client_id",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'AWyAiBCUYsE156N8YpiiISQpSpep2HPoXXPrf33VBeYleE0SQJg40pgEqZvq'",209],";",["T_WHITESPACE","\n\t\t\t",209],["T_VARIABLE","$client_secret",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'EEkc6xB30fDkgUO_YldWWHxKDquY7LBRId6FJ-parAR1CsVpK35zB6U0SIh4'",210],";",["T_WHITESPACE","\n\t\t",210],"}",["T_WHITESPACE","\n\n\t\t",211],["T_VARIABLE","$request",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","''",213],";",["T_WHITESPACE","\n\t\t",213],["T_VARIABLE","$request",214],["T_WHITESPACE"," ",214],["T_CONCAT_EQUAL",".=",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'client_id='",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_VARIABLE","$client_id",214],";",["T_WHITESPACE","\n\t\t",214],["T_VARIABLE","$request",215],["T_WHITESPACE"," ",215],["T_CONCAT_EQUAL",".=",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'&client_secret='",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$client_secret",215],";",["T_WHITESPACE","\n\t\t",215],["T_VARIABLE","$request",216],["T_WHITESPACE"," ",216],["T_CONCAT_EQUAL",".=",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'&grant_type=client_credentials'",216],";",["T_WHITESPACE","\n\n\t\t",216],["T_VARIABLE","$additional_opts",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_WHITESPACE","\n\t\t\t",218],["T_STRING","CURLOPT_USERPWD",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$client_id",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","':'",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_VARIABLE","$client_secret",219],",",["T_WHITESPACE","\n\t\t\t",219],["T_STRING","CURLOPT_POST",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_STRING","true",220],",",["T_WHITESPACE","\n\t\t\t",220],["T_STRING","CURLOPT_POSTFIELDS",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$request",221],["T_WHITESPACE","\n\t\t",221],")",";",["T_WHITESPACE","\n\n\t\t",222],["T_VARIABLE","$curl",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","curl",224],"(",["T_VARIABLE","$endpoint",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$additional_opts",224],")",";",["T_WHITESPACE","\n\n\t\t",224],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","log",226],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL Response 1: '",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_STRING","print_r",226],"(",["T_VARIABLE","$curl",226],",",["T_WHITESPACE"," ",226],["T_LNUMBER","1",226],")",")",";",["T_WHITESPACE","\n\n\t\t",226],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$curl",228],";",["T_WHITESPACE","\n\t",228],"}",["T_WHITESPACE","\n\n\t",229],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","getUserInfo",231],"(",["T_VARIABLE","$merchant_id",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$test",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$access_token",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n\t\t",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$test",232],["T_WHITESPACE"," ",232],["T_IS_EQUAL","==",232],["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n\t\t\t",232],["T_VARIABLE","$endpoint",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.sandbox.paypal.com\/v1\/customer\/partners\/T4E8WSXT43QPJ\/merchant-integrations'",233],";",["T_WHITESPACE","\n\t\t",233],"}",["T_WHITESPACE"," ",234],["T_ELSE","else",234],["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n\t\t\t",234],["T_VARIABLE","$endpoint",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.paypal.com\/v1\/customer\/partners\/9PDNYE4RZBVFJ\/merchant-integrations'",235],";",["T_WHITESPACE","\n\t\t",235],"}",["T_WHITESPACE","\n\n\t\t",236],["T_VARIABLE","$endpoint1",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$endpoint",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'?tracking_id='",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$merchant_id",238],";",["T_WHITESPACE","\n\n\t\t",238],["T_VARIABLE","$header",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_ARRAY","array",240],"(",")",";",["T_WHITESPACE","\n\t\t",240],["T_VARIABLE","$header",241],"[","]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",241],";",["T_WHITESPACE","\n\t\t",241],["T_VARIABLE","$header",242],"[","]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'Authorization: Bearer '",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$access_token",242],";",["T_WHITESPACE","\n\t\t",242],["T_VARIABLE","$header",243],"[","]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'PAYPAL_SERVICE_VERSION:1.2.0'",243],";",["T_WHITESPACE","\n\n\t\t",243],["T_VARIABLE","$additional_opts",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",["T_WHITESPACE","\n\t\t\t",245],["T_STRING","CURLOPT_HTTPHEADER",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$header",246],",",["T_WHITESPACE","\n\t\t",246],")",";",["T_WHITESPACE","\n\n\t\t",247],["T_VARIABLE","$curl",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","curl",249],"(",["T_VARIABLE","$endpoint1",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$additional_opts",249],")",";",["T_WHITESPACE","\n\n\t\t",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","log",251],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL Response 2: '",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_STRING","print_r",251],"(",["T_VARIABLE","$curl",251],",",["T_WHITESPACE"," ",251],["T_LNUMBER","1",251],")",")",";",["T_WHITESPACE","\n\n\t\t",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_ISSET","isset",253],"(",["T_VARIABLE","$curl",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","merchant_id",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n\t\t\t",253],["T_VARIABLE","$endpoint2",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$endpoint",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'\/'",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$curl",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","merchant_id",254],";",["T_WHITESPACE","\n\t\t\t",254],["T_VARIABLE","$curl2",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","curl",255],"(",["T_VARIABLE","$endpoint2",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$additional_opts",255],")",";",["T_WHITESPACE","\n\n\t\t\t",255],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","log",257],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL Response 3: '",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_STRING","print_r",257],"(",["T_VARIABLE","$curl2",257],",",["T_WHITESPACE"," ",257],["T_LNUMBER","1",257],")",")",";",["T_WHITESPACE","\n\n\t\t\t",257],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_ISSET","isset",259],"(",["T_VARIABLE","$curl2",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","api_credentials",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","signature",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n\t\t\t\t",259],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$curl2",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","api_credentials",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","signature",260],";",["T_WHITESPACE","\n\t\t\t",260],"}",["T_WHITESPACE"," ",261],["T_ELSE","else",261],["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n\t\t\t\t",261],["T_RETURN","return",262],";",["T_WHITESPACE","\n\t\t\t",262],"}",["T_WHITESPACE","\n\t\t",263],"}",["T_WHITESPACE"," ",264],["T_ELSE","else",264],["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n\t\t\t",264],["T_RETURN","return",265],";",["T_WHITESPACE","\n\t\t",265],"}",["T_WHITESPACE","\n\t",266],"}",["T_WHITESPACE","\n\n\t",267],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","call",269],"(",["T_VARIABLE","$data",269],")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n\t\t",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","config",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","get",270],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_test'",270],")",["T_WHITESPACE"," ",270],["T_IS_EQUAL","==",270],["T_WHITESPACE"," ",270],["T_LNUMBER","1",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n\t\t\t",270],["T_VARIABLE","$api_endpoint",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api-3t.sandbox.paypal.com\/nvp'",271],";",["T_WHITESPACE","\n\t\t\t",271],["T_VARIABLE","$user",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","config",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","get",272],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_sandbox_username'",272],")",";",["T_WHITESPACE","\n\t\t\t",272],["T_VARIABLE","$password",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","config",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","get",273],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_sandbox_password'",273],")",";",["T_WHITESPACE","\n\t\t\t",273],["T_VARIABLE","$signature",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","config",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_sandbox_signature'",274],")",";",["T_WHITESPACE","\n\t\t",274],"}",["T_WHITESPACE"," ",275],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n\t\t\t",275],["T_VARIABLE","$api_endpoint",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api-3t.paypal.com\/nvp'",276],";",["T_WHITESPACE","\n\t\t\t",276],["T_VARIABLE","$user",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","config",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","get",277],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_username'",277],")",";",["T_WHITESPACE","\n\t\t\t",277],["T_VARIABLE","$password",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","config",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","get",278],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_password'",278],")",";",["T_WHITESPACE","\n\t\t\t",278],["T_VARIABLE","$signature",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","config",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","get",279],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_express_signature'",279],")",";",["T_WHITESPACE","\n\t\t",279],"}",["T_WHITESPACE","\n\n\t\t",280],["T_VARIABLE","$settings",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_ARRAY","array",282],"(",["T_WHITESPACE","\n\t\t\t",282],["T_CONSTANT_ENCAPSED_STRING","'USER'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$user",283],",",["T_WHITESPACE","\n\t\t\t",283],["T_CONSTANT_ENCAPSED_STRING","'PWD'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$password",284],",",["T_WHITESPACE","\n\t\t\t",284],["T_CONSTANT_ENCAPSED_STRING","'SIGNATURE'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$signature",285],",",["T_WHITESPACE","\n\t\t\t",285],["T_CONSTANT_ENCAPSED_STRING","'VERSION'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'84'",286],",",["T_WHITESPACE","\n\t\t\t",286],["T_CONSTANT_ENCAPSED_STRING","'BUTTONSOURCE'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'OpenCart_Cart_EC'",287],",",["T_WHITESPACE","\n\t\t",287],")",";",["T_WHITESPACE","\n\n\t\t",288],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","log",290],"(",["T_VARIABLE","$data",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'Call data'",290],")",";",["T_WHITESPACE","\n\n\t\t",290],["T_VARIABLE","$defaults",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",["T_WHITESPACE","\n\t\t\t",292],["T_STRING","CURLOPT_POST",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_LNUMBER","1",293],",",["T_WHITESPACE","\n\t\t\t",293],["T_STRING","CURLOPT_HEADER",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_LNUMBER","0",294],",",["T_WHITESPACE","\n\t\t\t",294],["T_STRING","CURLOPT_URL",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$api_endpoint",295],",",["T_WHITESPACE","\n\t\t\t",295],["T_STRING","CURLOPT_USERAGENT",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","\"Mozilla\/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko\/20061204 Firefox\/2.0.0.1\"",296],",",["T_WHITESPACE","\n\t\t\t",296],["T_STRING","CURLOPT_FRESH_CONNECT",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_LNUMBER","1",297],",",["T_WHITESPACE","\n\t\t\t",297],["T_STRING","CURLOPT_RETURNTRANSFER",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_LNUMBER","1",298],",",["T_WHITESPACE","\n\t\t\t",298],["T_STRING","CURLOPT_FORBID_REUSE",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_LNUMBER","1",299],",",["T_WHITESPACE","\n\t\t\t",299],["T_STRING","CURLOPT_TIMEOUT",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_LNUMBER","0",300],",",["T_WHITESPACE","\n\t\t\t",300],["T_STRING","CURLOPT_SSL_VERIFYPEER",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_LNUMBER","0",301],",",["T_WHITESPACE","\n\t\t\t",301],["T_STRING","CURLOPT_SSL_VERIFYHOST",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_LNUMBER","0",302],",",["T_WHITESPACE","\n\t\t\t",302],["T_STRING","CURLOPT_POSTFIELDS",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_STRING","http_build_query",303],"(",["T_STRING","array_merge",303],"(",["T_VARIABLE","$data",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$settings",303],")",",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","''",303],",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","\"&\"",303],")",["T_WHITESPACE","\n\t\t",303],")",";",["T_WHITESPACE","\n\n\t\t",304],["T_VARIABLE","$ch",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","curl_init",306],"(",")",";",["T_WHITESPACE","\n\n\t\t",306],["T_STRING","curl_setopt_array",308],"(",["T_VARIABLE","$ch",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$defaults",308],")",";",["T_WHITESPACE","\n\n\t\t",308],["T_IF","if",310],["T_WHITESPACE"," ",310],"(","!",["T_VARIABLE","$result",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","curl_exec",310],"(",["T_VARIABLE","$ch",310],")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n\t\t\t",310],["T_VARIABLE","$log_data",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",["T_WHITESPACE","\n\t\t\t\t",311],["T_CONSTANT_ENCAPSED_STRING","'curl_error'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_STRING","curl_error",312],"(",["T_VARIABLE","$ch",312],")",",",["T_WHITESPACE","\n\t\t\t\t",312],["T_CONSTANT_ENCAPSED_STRING","'curl_errno'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_STRING","curl_errno",313],"(",["T_VARIABLE","$ch",313],")",["T_WHITESPACE","\n\t\t\t",313],")",";",["T_WHITESPACE","\n\n\t\t\t",314],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","log",316],"(",["T_VARIABLE","$log_data",316],",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'CURL failed'",316],")",";",["T_WHITESPACE","\n\t\t\t",316],["T_RETURN","return",317],["T_WHITESPACE"," ",317],["T_STRING","false",317],";",["T_WHITESPACE","\n\t\t",317],"}",["T_WHITESPACE","\n\n\t\t",318],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","log",320],"(",["T_VARIABLE","$result",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'Result'",320],")",";",["T_WHITESPACE","\n\n\t\t",320],["T_STRING","curl_close",322],"(",["T_VARIABLE","$ch",322],")",";",["T_WHITESPACE","\n\n\t\t",322],["T_RETURN","return",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","cleanReturn",324],"(",["T_VARIABLE","$result",324],")",";",["T_WHITESPACE","\n\t",324],"}",["T_WHITESPACE","\n\n\t",325],["T_PRIVATE","private",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","curl",327],"(",["T_VARIABLE","$endpoint",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$additional_opts",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_ARRAY","array",327],"(",")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n\t\t",327],["T_VARIABLE","$default_opts",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_ARRAY","array",328],"(",["T_WHITESPACE","\n\t\t\t",328],["T_STRING","CURLOPT_PORT",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_LNUMBER","443",329],",",["T_WHITESPACE","\n\t\t\t",329],["T_STRING","CURLOPT_HEADER",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_LNUMBER","0",330],",",["T_WHITESPACE","\n\t\t\t",330],["T_STRING","CURLOPT_SSL_VERIFYPEER",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_LNUMBER","0",331],",",["T_WHITESPACE","\n\t\t\t",331],["T_STRING","CURLOPT_RETURNTRANSFER",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_LNUMBER","1",332],",",["T_WHITESPACE","\n\t\t\t",332],["T_STRING","CURLOPT_FORBID_REUSE",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_LNUMBER","1",333],",",["T_WHITESPACE","\n\t\t\t",333],["T_STRING","CURLOPT_FRESH_CONNECT",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_LNUMBER","1",334],",",["T_WHITESPACE","\n\t\t\t",334],["T_STRING","CURLOPT_URL",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$endpoint",335],",",["T_WHITESPACE","\n\t\t",335],")",";",["T_WHITESPACE","\n\n\t\t",336],["T_VARIABLE","$ch",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","curl_init",338],"(",["T_VARIABLE","$endpoint",338],")",";",["T_WHITESPACE","\n\n\t\t",338],["T_VARIABLE","$opts",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$default_opts",340],["T_WHITESPACE"," ",340],"+",["T_WHITESPACE"," ",340],["T_VARIABLE","$additional_opts",340],";",["T_WHITESPACE","\n\n\t\t",340],["T_STRING","curl_setopt_array",342],"(",["T_VARIABLE","$ch",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$opts",342],")",";",["T_WHITESPACE","\n\n\t\t",342],["T_VARIABLE","$response",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","json_decode",344],"(",["T_STRING","curl_exec",344],"(",["T_VARIABLE","$ch",344],")",")",";",["T_WHITESPACE","\n\n\t\t",344],["T_STRING","curl_close",346],"(",["T_VARIABLE","$ch",346],")",";",["T_WHITESPACE","\n\n\t\t",346],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$response",348],";",["T_WHITESPACE","\n\t",348],"}",["T_WHITESPACE","\n",349],"}"]
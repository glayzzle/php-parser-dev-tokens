[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionPaymentFirstdataRemote",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","install",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",4],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_STRING","DB_PREFIX",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` (\n\t\t\t  `firstdata_remote_order_id` INT(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `order_id` INT(11) NOT NULL,\n\t\t\t  `order_ref` CHAR(50) NOT NULL,\n\t\t\t  `date_added` DATETIME NOT NULL,\n\t\t\t  `date_modified` DATETIME NOT NULL,\n\t\t\t  `tdate` VARCHAR(30) NOT NULL,\n\t\t\t  `capture_status` INT(1) DEFAULT NULL,\n\t\t\t  `void_status` INT(1) DEFAULT NULL,\n\t\t\t  `refund_status` INT(1) DEFAULT NULL,\n\t\t\t  `currency_code` CHAR(3) NOT NULL,\n\t\t\t  `authcode` VARCHAR(30) NOT NULL,\n\t\t\t  `total` DECIMAL( 10, 2 ) NOT NULL,\n\t\t\t  PRIMARY KEY (`firstdata_remote_order_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci;\"",5],")",";",["T_WHITESPACE","\n\n\t\t",19],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","db",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","query",21],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",21],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_STRING","DB_PREFIX",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` (\n\t\t\t  `firstdata_remote_order_transaction_id` INT(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `firstdata_remote_order_id` INT(11) NOT NULL,\n\t\t\t  `date_added` DATETIME NOT NULL,\n\t\t\t  `type` ENUM('auth', 'payment', 'refund', 'void') DEFAULT NULL,\n\t\t\t  `amount` DECIMAL( 10, 2 ) NOT NULL,\n\t\t\t  PRIMARY KEY (`firstdata_remote_order_transaction_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci;\"",22],")",";",["T_WHITESPACE","\n\n\t\t",29],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","db",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","query",31],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",31],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_STRING","DB_PREFIX",32],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_card` (\n\t\t\t  `firstdata_remote_card_id` INT(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `customer_id` INT(11) NOT NULL,\n\t\t\t  `date_added` DATETIME NOT NULL,\n\t\t\t  `digits` CHAR(4) NOT NULL,\n\t\t\t  `expire_month` INT(2) NOT NULL,\n\t\t\t  `expire_year` INT(2) NOT NULL,\n\t\t\t  `card_type` CHAR(15) NOT NULL,\n\t\t\t  `token` CHAR(64) NOT NULL,\n\t\t\t  PRIMARY KEY (`firstdata_remote_card_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci;\"",32],")",";",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\n\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","uninstall",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_STRING","DB_PREFIX",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order`;\"",46],")",";",["T_WHITESPACE","\n\t\t",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","db",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","query",47],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_STRING","DB_PREFIX",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction`;\"",47],")",";",["T_WHITESPACE","\n\t\t",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","db",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","query",48],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_STRING","DB_PREFIX",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_card`;\"",48],")",";",["T_WHITESPACE","\n\t",48],"}",["T_WHITESPACE","\n\n\t",49],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","call",51],"(",["T_VARIABLE","$xml",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t",51],["T_VARIABLE","$ch",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","curl_init",52],"(",")",";",["T_WHITESPACE","\n\t\t",52],["T_STRING","curl_setopt",53],"(",["T_VARIABLE","$ch",53],",",["T_WHITESPACE"," ",53],["T_STRING","CURLOPT_URL",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\"https:\/\/test.ipg-online.com\/ipgapi\/services\"",53],")",";",["T_WHITESPACE","\n\t\t",53],["T_STRING","curl_setopt",54],"(",["T_VARIABLE","$ch",54],",",["T_WHITESPACE"," ",54],["T_STRING","CURLOPT_POST",54],",",["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],")",";",["T_WHITESPACE","\n\t\t",54],["T_STRING","curl_setopt",55],"(",["T_VARIABLE","$ch",55],",",["T_WHITESPACE"," ",55],["T_STRING","CURLOPT_HTTPHEADER",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","\"Content-Type: text\/xml\"",55],")",")",";",["T_WHITESPACE","\n\t\t",55],["T_STRING","curl_setopt",56],"(",["T_VARIABLE","$ch",56],",",["T_WHITESPACE"," ",56],["T_STRING","CURLOPT_HTTPAUTH",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'CURLAUTH_BASIC'",56],")",";",["T_WHITESPACE","\n\t\t",56],["T_STRING","curl_setopt",57],"(",["T_VARIABLE","$ch",57],",",["T_WHITESPACE"," ",57],["T_STRING","CURLOPT_USERPWD",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","config",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","get",57],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_user_id'",57],")",["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","':'",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","config",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","get",57],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_password'",57],")",")",";",["T_WHITESPACE","\n\t\t",57],["T_STRING","curl_setopt",58],"(",["T_VARIABLE","$ch",58],",",["T_WHITESPACE"," ",58],["T_STRING","CURLOPT_SSL_VERIFYPEER",58],",",["T_WHITESPACE"," ",58],["T_LNUMBER","1",58],")",";",["T_WHITESPACE","\n\t\t",58],["T_STRING","curl_setopt",59],"(",["T_VARIABLE","$ch",59],",",["T_WHITESPACE"," ",59],["T_STRING","CURLOPT_CAINFO",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","config",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_ca'",59],")",")",";",["T_WHITESPACE","\n\t\t",59],["T_STRING","curl_setopt",60],"(",["T_VARIABLE","$ch",60],",",["T_WHITESPACE"," ",60],["T_STRING","CURLOPT_SSLCERT",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","config",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_certificate'",60],")",")",";",["T_WHITESPACE","\n\t\t",60],["T_STRING","curl_setopt",61],"(",["T_VARIABLE","$ch",61],",",["T_WHITESPACE"," ",61],["T_STRING","CURLOPT_SSLKEY",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","config",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_key'",61],")",")",";",["T_WHITESPACE","\n\t\t",61],["T_STRING","curl_setopt",62],"(",["T_VARIABLE","$ch",62],",",["T_WHITESPACE"," ",62],["T_STRING","CURLOPT_SSLKEYPASSWD",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","config",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_key_pw'",62],")",")",";",["T_WHITESPACE","\n\t\t",62],["T_STRING","curl_setopt",63],"(",["T_VARIABLE","$ch",63],",",["T_WHITESPACE"," ",63],["T_STRING","CURLOPT_RETURNTRANSFER",63],",",["T_WHITESPACE"," ",63],["T_LNUMBER","1",63],")",";",["T_WHITESPACE","\n\t\t",63],["T_STRING","curl_setopt",64],"(",["T_VARIABLE","$ch",64],",",["T_WHITESPACE"," ",64],["T_STRING","CURLOPT_POSTFIELDS",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$xml",64],")",";",["T_WHITESPACE","\n\t\t",64],["T_COMMENT","\/\/curl_setopt($ch, CURLOPT_STDERR, fopen(DIR_LOGS . \"\/headers.txt\", \"w+\"));\n",65],["T_WHITESPACE","\t\t",66],["T_STRING","curl_setopt",66],"(",["T_VARIABLE","$ch",66],",",["T_WHITESPACE"," ",66],["T_STRING","CURLOPT_VERBOSE",66],",",["T_WHITESPACE"," ",66],["T_STRING","true",66],")",";",["T_WHITESPACE","\n\t\t",66],["T_VARIABLE","$response",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","curl_exec",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$ch",67],")",";",["T_WHITESPACE","\n\n\t\t",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","logger",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Post data: '",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_STRING","print_r",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","request",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","post",69],",",["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],")",")",";",["T_WHITESPACE","\n\t\t",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","logger",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Request: '",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$xml",70],")",";",["T_WHITESPACE","\n\t\t",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","logger",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl error #: '",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_STRING","curl_errno",71],"(",["T_VARIABLE","$ch",71],")",")",";",["T_WHITESPACE","\n\t\t",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","logger",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl error text: '",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_STRING","curl_error",72],"(",["T_VARIABLE","$ch",72],")",")",";",["T_WHITESPACE","\n\t\t",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","logger",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl response info: '",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_STRING","print_r",73],"(",["T_STRING","curl_getinfo",73],"(",["T_VARIABLE","$ch",73],")",",",["T_WHITESPACE"," ",73],["T_LNUMBER","1",73],")",")",";",["T_WHITESPACE","\n\t\t",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","logger",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl response: '",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$response",74],")",";",["T_WHITESPACE","\n\n\t\t",74],["T_STRING","curl_close",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$ch",76],")",";",["T_WHITESPACE","\n\n\t\t",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$response",78],";",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n\n\t",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","void",81],"(",["T_VARIABLE","$order_ref",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$tdate",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t",81],["T_VARIABLE","$xml",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",82],";",["T_WHITESPACE","\n\t\t",82],["T_VARIABLE","$xml",83],["T_WHITESPACE"," ",83],["T_CONCAT_EQUAL",".=",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\">'",83],";",["T_WHITESPACE","\n\t\t\t",83],["T_VARIABLE","$xml",84],["T_WHITESPACE"," ",84],["T_CONCAT_EQUAL",".=",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Header \/>'",84],";",["T_WHITESPACE","\n\t\t\t",84],["T_VARIABLE","$xml",85],["T_WHITESPACE"," ",85],["T_CONCAT_EQUAL",".=",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Body>'",85],";",["T_WHITESPACE","\n\t\t\t",85],["T_VARIABLE","$xml",86],["T_WHITESPACE"," ",86],["T_CONCAT_EQUAL",".=",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'<ipgapi:IPGApiOrderRequest xmlns:v1=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/v1\" xmlns:ipgapi=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi\">'",86],";",["T_WHITESPACE","\n\t\t\t",86],["T_VARIABLE","$xml",87],["T_WHITESPACE"," ",87],["T_CONCAT_EQUAL",".=",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'<v1:Transaction>'",87],";",["T_WHITESPACE","\n\t\t\t\t",87],["T_VARIABLE","$xml",88],["T_WHITESPACE"," ",88],["T_CONCAT_EQUAL",".=",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'<v1:CreditCardTxType>'",88],";",["T_WHITESPACE","\n\t\t\t\t\t",88],["T_VARIABLE","$xml",89],["T_WHITESPACE"," ",89],["T_CONCAT_EQUAL",".=",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'<v1:Type>void<\/v1:Type>'",89],";",["T_WHITESPACE","\n\t\t\t\t",89],["T_VARIABLE","$xml",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CreditCardTxType>'",90],";",["T_WHITESPACE","\n\t\t\t\t",90],["T_VARIABLE","$xml",91],["T_WHITESPACE"," ",91],["T_CONCAT_EQUAL",".=",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'<v1:TransactionDetails>'",91],";",["T_WHITESPACE","\n\t\t\t\t\t",91],["T_VARIABLE","$xml",92],["T_WHITESPACE"," ",92],["T_CONCAT_EQUAL",".=",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'<v1:OrderId>'",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$order_ref",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:OrderId>'",92],";",["T_WHITESPACE","\n\t\t\t\t\t",92],["T_VARIABLE","$xml",93],["T_WHITESPACE"," ",93],["T_CONCAT_EQUAL",".=",93],["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'<v1:TDate>'",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$tdate",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:TDate>'",93],";",["T_WHITESPACE","\n\t\t\t\t",93],["T_VARIABLE","$xml",94],["T_WHITESPACE"," ",94],["T_CONCAT_EQUAL",".=",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:TransactionDetails>'",94],";",["T_WHITESPACE","\n\t\t\t",94],["T_VARIABLE","$xml",95],["T_WHITESPACE"," ",95],["T_CONCAT_EQUAL",".=",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Transaction>'",95],";",["T_WHITESPACE","\n\t\t\t",95],["T_VARIABLE","$xml",96],["T_WHITESPACE"," ",96],["T_CONCAT_EQUAL",".=",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'<\/ipgapi:IPGApiOrderRequest>'",96],";",["T_WHITESPACE","\n\t\t\t",96],["T_VARIABLE","$xml",97],["T_WHITESPACE"," ",97],["T_CONCAT_EQUAL",".=",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Body>'",97],";",["T_WHITESPACE","\n\t\t",97],["T_VARIABLE","$xml",98],["T_WHITESPACE"," ",98],["T_CONCAT_EQUAL",".=",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Envelope>'",98],";",["T_WHITESPACE","\n\n\t\t",98],["T_VARIABLE","$xml",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","simplexml_load_string",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","call",100],"(",["T_VARIABLE","$xml",100],")",")",";",["T_WHITESPACE","\n\n\t\t",100],["T_VARIABLE","$xml",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","registerXPathNamespace",102],"(",["T_CONSTANT_ENCAPSED_STRING","'ipgapi'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi'",102],")",";",["T_WHITESPACE","\n\t\t",102],["T_VARIABLE","$xml",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","registerXPathNamespace",103],"(",["T_CONSTANT_ENCAPSED_STRING","'soap'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.xmlsoap.org\/soap\/envelope\/'",103],")",";",["T_WHITESPACE","\n\n\t\t",103],["T_VARIABLE","$fault",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$xml",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","xpath",105],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/soap:Fault'",105],")",";",["T_WHITESPACE","\n\n\t\t",105],["T_VARIABLE","$response",107],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","''",107],";",["T_WHITESPACE","\n\t\t",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_EMPTY","empty",108],"(",["T_VARIABLE","$fault",108],"[",["T_LNUMBER","0",108],"]",")",["T_WHITESPACE"," ",108],["T_BOOLEAN_AND","&&",108],["T_WHITESPACE"," ",108],["T_ISSET","isset",108],"(",["T_VARIABLE","$fault",108],"[",["T_LNUMBER","0",108],"]",["T_OBJECT_OPERATOR","->",108],["T_STRING","detail",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t\t",108],["T_VARIABLE","$response",109],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING_CAST","(string)",109],["T_VARIABLE","$fault",109],"[",["T_LNUMBER","0",109],"]",["T_OBJECT_OPERATOR","->",109],["T_STRING","detail",109],";",["T_WHITESPACE","\n\t\t",109],"}",["T_WHITESPACE","\n\n\t\t",110],["T_VARIABLE","$string",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$xml",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","xpath",112],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ErrorMessage'",112],")",";",["T_WHITESPACE","\n\t\t",112],["T_VARIABLE","$response",113],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ISSET","isset",113],"(",["T_VARIABLE","$string",113],"[",["T_LNUMBER","0",113],"]",")",["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_STRING_CAST","(string)",113],["T_VARIABLE","$string",113],"[",["T_LNUMBER","0",113],"]",["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","''",113],";",["T_WHITESPACE","\n\n\t\t",113],["T_VARIABLE","$string",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$xml",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","xpath",115],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TransactionResult'",115],")",";",["T_WHITESPACE","\n\t\t",115],["T_VARIABLE","$response",116],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_result'",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ISSET","isset",116],"(",["T_VARIABLE","$string",116],"[",["T_LNUMBER","0",116],"]",")",["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_STRING_CAST","(string)",116],["T_VARIABLE","$string",116],"[",["T_LNUMBER","0",116],"]",["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","''",116],";",["T_WHITESPACE","\n\n\t\t",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$response",118],";",["T_WHITESPACE","\n\t",118],"}",["T_WHITESPACE","\n\n\t",119],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","updateVoidStatus",121],"(",["T_VARIABLE","$firstdata_remote_order_id",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$status",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","db",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","query",122],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_STRING","DB_PREFIX",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` SET `void_status` = '\"",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_INT_CAST","(int)",122],["T_VARIABLE","$status",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `firstdata_remote_order_id` = '\"",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_INT_CAST","(int)",122],["T_VARIABLE","$firstdata_remote_order_id",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","\"'\"",122],")",";",["T_WHITESPACE","\n\t",122],"}",["T_WHITESPACE","\n\n\t",123],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","capture",125],"(",["T_VARIABLE","$order_ref",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$total",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$currency_code",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n\t\t",125],["T_VARIABLE","$xml",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",126],";",["T_WHITESPACE","\n\t\t",126],["T_VARIABLE","$xml",127],["T_WHITESPACE"," ",127],["T_CONCAT_EQUAL",".=",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\">'",127],";",["T_WHITESPACE","\n\t\t\t",127],["T_VARIABLE","$xml",128],["T_WHITESPACE"," ",128],["T_CONCAT_EQUAL",".=",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Header \/>'",128],";",["T_WHITESPACE","\n\t\t\t",128],["T_VARIABLE","$xml",129],["T_WHITESPACE"," ",129],["T_CONCAT_EQUAL",".=",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Body>'",129],";",["T_WHITESPACE","\n\t\t\t\t",129],["T_VARIABLE","$xml",130],["T_WHITESPACE"," ",130],["T_CONCAT_EQUAL",".=",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'<ipgapi:IPGApiOrderRequest xmlns:v1=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/v1\" xmlns:ipgapi=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi\">'",130],";",["T_WHITESPACE","\n\t\t\t\t\t",130],["T_VARIABLE","$xml",131],["T_WHITESPACE"," ",131],["T_CONCAT_EQUAL",".=",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'<v1:Transaction>'",131],";",["T_WHITESPACE","\n\t\t\t\t\t\t",131],["T_VARIABLE","$xml",132],["T_WHITESPACE"," ",132],["T_CONCAT_EQUAL",".=",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'<v1:CreditCardTxType>'",132],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",132],["T_VARIABLE","$xml",133],["T_WHITESPACE"," ",133],["T_CONCAT_EQUAL",".=",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'<v1:Type>postAuth<\/v1:Type>'",133],";",["T_WHITESPACE","\n\t\t\t\t\t\t",133],["T_VARIABLE","$xml",134],["T_WHITESPACE"," ",134],["T_CONCAT_EQUAL",".=",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CreditCardTxType>'",134],";",["T_WHITESPACE","\n\t\t\t\t\t\t",134],["T_VARIABLE","$xml",135],["T_WHITESPACE"," ",135],["T_CONCAT_EQUAL",".=",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'<v1:Payment>'",135],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",135],["T_VARIABLE","$xml",136],["T_WHITESPACE"," ",136],["T_CONCAT_EQUAL",".=",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'<v1:ChargeTotal>'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$total",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:ChargeTotal>'",136],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",136],["T_VARIABLE","$xml",137],["T_WHITESPACE"," ",137],["T_CONCAT_EQUAL",".=",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'<v1:Currency>'",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","mapCurrency",137],"(",["T_VARIABLE","$currency_code",137],")",["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Currency>'",137],";",["T_WHITESPACE","\n\t\t\t\t\t\t",137],["T_VARIABLE","$xml",138],["T_WHITESPACE"," ",138],["T_CONCAT_EQUAL",".=",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Payment>'",138],";",["T_WHITESPACE","\n\t\t\t\t\t\t",138],["T_VARIABLE","$xml",139],["T_WHITESPACE"," ",139],["T_CONCAT_EQUAL",".=",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'<v1:TransactionDetails>'",139],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",139],["T_VARIABLE","$xml",140],["T_WHITESPACE"," ",140],["T_CONCAT_EQUAL",".=",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'<v1:OrderId>'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$order_ref",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:OrderId>'",140],";",["T_WHITESPACE","\n\t\t\t\t\t\t",140],["T_VARIABLE","$xml",141],["T_WHITESPACE"," ",141],["T_CONCAT_EQUAL",".=",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:TransactionDetails>'",141],";",["T_WHITESPACE","\n\t\t\t\t\t",141],["T_VARIABLE","$xml",142],["T_WHITESPACE"," ",142],["T_CONCAT_EQUAL",".=",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Transaction>'",142],";",["T_WHITESPACE","\n\t\t\t\t",142],["T_VARIABLE","$xml",143],["T_WHITESPACE"," ",143],["T_CONCAT_EQUAL",".=",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'<\/ipgapi:IPGApiOrderRequest>'",143],";",["T_WHITESPACE","\n\t\t\t",143],["T_VARIABLE","$xml",144],["T_WHITESPACE"," ",144],["T_CONCAT_EQUAL",".=",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Body>'",144],";",["T_WHITESPACE","\n\t\t",144],["T_VARIABLE","$xml",145],["T_WHITESPACE"," ",145],["T_CONCAT_EQUAL",".=",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Envelope>'",145],";",["T_WHITESPACE","\n\n\t\t",145],["T_VARIABLE","$xml",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","simplexml_load_string",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","call",147],"(",["T_VARIABLE","$xml",147],")",")",";",["T_WHITESPACE","\n\n\t\t",147],["T_VARIABLE","$xml",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","registerXPathNamespace",149],"(",["T_CONSTANT_ENCAPSED_STRING","'ipgapi'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi'",149],")",";",["T_WHITESPACE","\n\t\t",149],["T_VARIABLE","$xml",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","registerXPathNamespace",150],"(",["T_CONSTANT_ENCAPSED_STRING","'soap'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.xmlsoap.org\/soap\/envelope\/'",150],")",";",["T_WHITESPACE","\n\n\t\t",150],["T_VARIABLE","$fault",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$xml",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","xpath",152],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/soap:Fault'",152],")",";",["T_WHITESPACE","\n\n\t\t",152],["T_VARIABLE","$response",154],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","''",154],";",["T_WHITESPACE","\n\t\t",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(","!",["T_EMPTY","empty",155],"(",["T_VARIABLE","$fault",155],"[",["T_LNUMBER","0",155],"]",")",["T_WHITESPACE"," ",155],["T_BOOLEAN_AND","&&",155],["T_WHITESPACE"," ",155],["T_ISSET","isset",155],"(",["T_VARIABLE","$fault",155],"[",["T_LNUMBER","0",155],"]",["T_OBJECT_OPERATOR","->",155],["T_STRING","detail",155],")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t",155],["T_VARIABLE","$response",156],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING_CAST","(string)",156],["T_VARIABLE","$fault",156],"[",["T_LNUMBER","0",156],"]",["T_OBJECT_OPERATOR","->",156],["T_STRING","detail",156],";",["T_WHITESPACE","\n\t\t",156],"}",["T_WHITESPACE","\n\n\t\t",157],["T_VARIABLE","$string",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$xml",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","xpath",159],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ErrorMessage'",159],")",";",["T_WHITESPACE","\n\t\t",159],["T_VARIABLE","$response",160],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_ISSET","isset",160],"(",["T_VARIABLE","$string",160],"[",["T_LNUMBER","0",160],"]",")",["T_WHITESPACE"," ",160],"?",["T_WHITESPACE"," ",160],["T_STRING_CAST","(string)",160],["T_VARIABLE","$string",160],"[",["T_LNUMBER","0",160],"]",["T_WHITESPACE"," ",160],":",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","''",160],";",["T_WHITESPACE","\n\n\t\t",160],["T_VARIABLE","$string",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$xml",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","xpath",162],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TransactionResult'",162],")",";",["T_WHITESPACE","\n\t\t",162],["T_VARIABLE","$response",163],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_result'",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ISSET","isset",163],"(",["T_VARIABLE","$string",163],"[",["T_LNUMBER","0",163],"]",")",["T_WHITESPACE"," ",163],"?",["T_WHITESPACE"," ",163],["T_STRING_CAST","(string)",163],["T_VARIABLE","$string",163],"[",["T_LNUMBER","0",163],"]",["T_WHITESPACE"," ",163],":",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","''",163],";",["T_WHITESPACE","\n\n\t\t",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$response",165],";",["T_WHITESPACE","\n\t",165],"}",["T_WHITESPACE","\n\n\t",166],["T_PUBLIC","public",168],["T_WHITESPACE"," ",168],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","updateCaptureStatus",168],"(",["T_VARIABLE","$firstdata_remote_order_id",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$status",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n\t\t",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","db",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","query",169],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_STRING","DB_PREFIX",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` SET `capture_status` = '\"",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_INT_CAST","(int)",169],["T_VARIABLE","$status",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `firstdata_remote_order_id` = '\"",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_INT_CAST","(int)",169],["T_VARIABLE","$firstdata_remote_order_id",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"'\"",169],")",";",["T_WHITESPACE","\n\t",169],"}",["T_WHITESPACE","\n\n\t",170],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","refund",172],"(",["T_VARIABLE","$order_ref",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$total",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$currency_code",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n\t\t",172],["T_VARIABLE","$xml",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",173],";",["T_WHITESPACE","\n\t\t",173],["T_VARIABLE","$xml",174],["T_WHITESPACE"," ",174],["T_CONCAT_EQUAL",".=",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\">'",174],";",["T_WHITESPACE","\n\t\t",174],["T_VARIABLE","$xml",175],["T_WHITESPACE"," ",175],["T_CONCAT_EQUAL",".=",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Header \/>'",175],";",["T_WHITESPACE","\n\t\t",175],["T_VARIABLE","$xml",176],["T_WHITESPACE"," ",176],["T_CONCAT_EQUAL",".=",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Body>'",176],";",["T_WHITESPACE","\n\t\t",176],["T_VARIABLE","$xml",177],["T_WHITESPACE"," ",177],["T_CONCAT_EQUAL",".=",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'<ipgapi:IPGApiOrderRequest xmlns:v1=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/v1\" xmlns:ipgapi=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi\">'",177],";",["T_WHITESPACE","\n\t\t",177],["T_VARIABLE","$xml",178],["T_WHITESPACE"," ",178],["T_CONCAT_EQUAL",".=",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'<v1:Transaction>'",178],";",["T_WHITESPACE","\n\t\t",178],["T_VARIABLE","$xml",179],["T_WHITESPACE"," ",179],["T_CONCAT_EQUAL",".=",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'<v1:CreditCardTxType>'",179],";",["T_WHITESPACE","\n\t\t",179],["T_VARIABLE","$xml",180],["T_WHITESPACE"," ",180],["T_CONCAT_EQUAL",".=",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'<v1:Type>return<\/v1:Type>'",180],";",["T_WHITESPACE","\n\t\t",180],["T_VARIABLE","$xml",181],["T_WHITESPACE"," ",181],["T_CONCAT_EQUAL",".=",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CreditCardTxType>'",181],";",["T_WHITESPACE","\n\t\t",181],["T_VARIABLE","$xml",182],["T_WHITESPACE"," ",182],["T_CONCAT_EQUAL",".=",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'<v1:Payment>'",182],";",["T_WHITESPACE","\n\t\t",182],["T_VARIABLE","$xml",183],["T_WHITESPACE"," ",183],["T_CONCAT_EQUAL",".=",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'<v1:ChargeTotal>'",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$total",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:ChargeTotal>'",183],";",["T_WHITESPACE","\n\t\t",183],["T_VARIABLE","$xml",184],["T_WHITESPACE"," ",184],["T_CONCAT_EQUAL",".=",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'<v1:Currency>'",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","mapCurrency",184],"(",["T_VARIABLE","$currency_code",184],")",["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Currency>'",184],";",["T_WHITESPACE","\n\t\t",184],["T_VARIABLE","$xml",185],["T_WHITESPACE"," ",185],["T_CONCAT_EQUAL",".=",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Payment>'",185],";",["T_WHITESPACE","\n\t\t",185],["T_VARIABLE","$xml",186],["T_WHITESPACE"," ",186],["T_CONCAT_EQUAL",".=",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'<v1:TransactionDetails>'",186],";",["T_WHITESPACE","\n\t\t",186],["T_VARIABLE","$xml",187],["T_WHITESPACE"," ",187],["T_CONCAT_EQUAL",".=",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'<v1:OrderId>'",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_VARIABLE","$order_ref",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:OrderId>'",187],";",["T_WHITESPACE","\n\t\t",187],["T_VARIABLE","$xml",188],["T_WHITESPACE"," ",188],["T_CONCAT_EQUAL",".=",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:TransactionDetails>'",188],";",["T_WHITESPACE","\n\t\t",188],["T_VARIABLE","$xml",189],["T_WHITESPACE"," ",189],["T_CONCAT_EQUAL",".=",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Transaction>'",189],";",["T_WHITESPACE","\n\t\t",189],["T_VARIABLE","$xml",190],["T_WHITESPACE"," ",190],["T_CONCAT_EQUAL",".=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'<\/ipgapi:IPGApiOrderRequest>'",190],";",["T_WHITESPACE","\n\t\t",190],["T_VARIABLE","$xml",191],["T_WHITESPACE"," ",191],["T_CONCAT_EQUAL",".=",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Body>'",191],";",["T_WHITESPACE","\n\t\t",191],["T_VARIABLE","$xml",192],["T_WHITESPACE"," ",192],["T_CONCAT_EQUAL",".=",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Envelope>'",192],";",["T_WHITESPACE","\n\n\t\t",192],["T_VARIABLE","$xml",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","simplexml_load_string",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","call",194],"(",["T_VARIABLE","$xml",194],")",")",";",["T_WHITESPACE","\n\n\t\t",194],["T_VARIABLE","$xml",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","registerXPathNamespace",196],"(",["T_CONSTANT_ENCAPSED_STRING","'ipgapi'",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi'",196],")",";",["T_WHITESPACE","\n\t\t",196],["T_VARIABLE","$xml",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","registerXPathNamespace",197],"(",["T_CONSTANT_ENCAPSED_STRING","'soap'",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.xmlsoap.org\/soap\/envelope\/'",197],")",";",["T_WHITESPACE","\n\n\t\t",197],["T_VARIABLE","$fault",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$xml",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","xpath",199],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/soap:Fault'",199],")",";",["T_WHITESPACE","\n\n\t\t",199],["T_VARIABLE","$response",201],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",201],"]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","''",201],";",["T_WHITESPACE","\n\t\t",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(","!",["T_EMPTY","empty",202],"(",["T_VARIABLE","$fault",202],"[",["T_LNUMBER","0",202],"]",")",["T_WHITESPACE"," ",202],["T_BOOLEAN_AND","&&",202],["T_WHITESPACE"," ",202],["T_ISSET","isset",202],"(",["T_VARIABLE","$fault",202],"[",["T_LNUMBER","0",202],"]",["T_OBJECT_OPERATOR","->",202],["T_STRING","detail",202],")",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n\t\t\t",202],["T_VARIABLE","$response",203],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING_CAST","(string)",203],["T_VARIABLE","$fault",203],"[",["T_LNUMBER","0",203],"]",["T_OBJECT_OPERATOR","->",203],["T_STRING","detail",203],";",["T_WHITESPACE","\n\t\t",203],"}",["T_WHITESPACE","\n\n\t\t",204],["T_VARIABLE","$string",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$xml",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","xpath",206],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ErrorMessage'",206],")",";",["T_WHITESPACE","\n\t\t",206],["T_VARIABLE","$response",207],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ISSET","isset",207],"(",["T_VARIABLE","$string",207],"[",["T_LNUMBER","0",207],"]",")",["T_WHITESPACE"," ",207],"?",["T_WHITESPACE"," ",207],["T_STRING_CAST","(string)",207],["T_VARIABLE","$string",207],"[",["T_LNUMBER","0",207],"]",["T_WHITESPACE"," ",207],":",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","''",207],";",["T_WHITESPACE","\n\n\t\t",207],["T_VARIABLE","$string",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$xml",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","xpath",209],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TransactionResult'",209],")",";",["T_WHITESPACE","\n\t\t",209],["T_VARIABLE","$response",210],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_result'",210],"]",["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_ISSET","isset",210],"(",["T_VARIABLE","$string",210],"[",["T_LNUMBER","0",210],"]",")",["T_WHITESPACE"," ",210],"?",["T_WHITESPACE"," ",210],["T_STRING_CAST","(string)",210],["T_VARIABLE","$string",210],"[",["T_LNUMBER","0",210],"]",["T_WHITESPACE"," ",210],":",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","''",210],";",["T_WHITESPACE","\n\n\t\t",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$response",212],";",["T_WHITESPACE","\n\t",212],"}",["T_WHITESPACE","\n\n\t",213],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","updateRefundStatus",215],"(",["T_VARIABLE","$firstdata_remote_order_id",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$status",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","db",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","query",216],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_STRING","DB_PREFIX",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` SET `refund_status` = '\"",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_INT_CAST","(int)",216],["T_VARIABLE","$status",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `firstdata_remote_order_id` = '\"",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_INT_CAST","(int)",216],["T_VARIABLE","$firstdata_remote_order_id",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","\"'\"",216],")",";",["T_WHITESPACE","\n\t",216],"}",["T_WHITESPACE","\n\n\t",217],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","getOrder",219],"(",["T_VARIABLE","$order_id",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n\t\t",219],["T_VARIABLE","$qry",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","db",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","query",220],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_STRING","DB_PREFIX",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` WHERE `order_id` = '\"",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_INT_CAST","(int)",220],["T_VARIABLE","$order_id",220],["T_WHITESPACE"," ",220],".",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",220],")",";",["T_WHITESPACE","\n\n\t\t",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_VARIABLE","$qry",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","num_rows",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n\t\t\t",222],["T_VARIABLE","$order",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$qry",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","row",223],";",["T_WHITESPACE","\n\t\t\t",223],["T_VARIABLE","$order",224],"[",["T_CONSTANT_ENCAPSED_STRING","'transactions'",224],"]",["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getTransactions",224],"(",["T_VARIABLE","$order",224],"[",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_order_id'",224],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",224],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$order",226],";",["T_WHITESPACE","\n\t\t",226],"}",["T_WHITESPACE"," ",227],["T_ELSE","else",227],["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t\t\t",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","false",228],";",["T_WHITESPACE","\n\t\t",228],"}",["T_WHITESPACE","\n\t",229],"}",["T_WHITESPACE","\n\n\t",230],["T_PRIVATE","private",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","getTransactions",232],"(",["T_VARIABLE","$firstdata_remote_order_id",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n\t\t",232],["T_VARIABLE","$qry",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","query",233],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_STRING","DB_PREFIX",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` WHERE `firstdata_remote_order_id` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_INT_CAST","(int)",233],["T_VARIABLE","$firstdata_remote_order_id",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"'\"",233],")",";",["T_WHITESPACE","\n\n\t\t",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$qry",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","num_rows",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$qry",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","rows",236],";",["T_WHITESPACE","\n\t\t",236],"}",["T_WHITESPACE"," ",237],["T_ELSE","else",237],["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n\t\t\t",237],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_STRING","false",238],";",["T_WHITESPACE","\n\t\t",238],"}",["T_WHITESPACE","\n\t",239],"}",["T_WHITESPACE","\n\n\t",240],["T_PUBLIC","public",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","addTransaction",242],"(",["T_VARIABLE","$firstdata_remote_order_id",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$type",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$total",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n\t\t",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","db",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","query",243],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_STRING","DB_PREFIX",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` SET `firstdata_remote_order_id` = '\"",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_INT_CAST","(int)",243],["T_VARIABLE","$firstdata_remote_order_id",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `type` = '\"",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","db",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","escape",243],"(",["T_VARIABLE","$type",243],")",["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","\"', `amount` = '\"",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_DOUBLE_CAST","(float)",243],["T_VARIABLE","$total",243],["T_WHITESPACE"," ",243],".",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","\"'\"",243],")",";",["T_WHITESPACE","\n\t",243],"}",["T_WHITESPACE","\n\n\t",244],["T_PUBLIC","public",246],["T_WHITESPACE"," ",246],["T_FUNCTION","function",246],["T_WHITESPACE"," ",246],["T_STRING","logger",246],"(",["T_VARIABLE","$message",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n\t\t",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","config",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","get",247],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_debug'",247],")",["T_WHITESPACE"," ",247],["T_IS_EQUAL","==",247],["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n\t\t\t",247],["T_VARIABLE","$log",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_NEW","new",248],["T_WHITESPACE"," ",248],["T_STRING","Log",248],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote.log'",248],")",";",["T_WHITESPACE","\n\t\t\t",248],["T_VARIABLE","$log",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","write",249],"(",["T_VARIABLE","$message",249],")",";",["T_WHITESPACE","\n\t\t",249],"}",["T_WHITESPACE","\n\t",250],"}",["T_WHITESPACE","\n\n\t",251],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","getTotalCaptured",253],"(",["T_VARIABLE","$firstdata_order_id",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n\t\t",253],["T_VARIABLE","$query",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","query",254],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `total` FROM `\"",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_STRING","DB_PREFIX",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` WHERE `firstdata_remote_order_id` = '\"",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_VARIABLE","$firstdata_order_id",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","\"' AND (`type` = 'payment' OR `type` = 'refund')\"",254],")",";",["T_WHITESPACE","\n\n\t\t",254],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_DOUBLE_CAST","(float)",256],["T_VARIABLE","$query",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","row",256],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",256],"]",";",["T_WHITESPACE","\n\t",256],"}",["T_WHITESPACE","\n\n\t",257],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","getTotalRefunded",259],"(",["T_VARIABLE","$firstdata_order_id",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n\t\t",259],["T_VARIABLE","$query",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","db",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","query",260],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT SUM(`amount`) AS `total` FROM `\"",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_STRING","DB_PREFIX",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` WHERE `firstdata_remote_order_id` = '\"",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_INT_CAST","(int)",260],["T_VARIABLE","$firstdata_order_id",260],["T_WHITESPACE"," ",260],".",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","\"' AND 'refund'\"",260],")",";",["T_WHITESPACE","\n\n\t\t",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_DOUBLE_CAST","(float)",262],["T_VARIABLE","$query",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","row",262],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",262],"]",";",["T_WHITESPACE","\n\t",262],"}",["T_WHITESPACE","\n\n\t",263],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","mapCurrency",265],"(",["T_VARIABLE","$code",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n\t\t",265],["T_VARIABLE","$currency",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_WHITESPACE","\n\t\t\t",266],["T_CONSTANT_ENCAPSED_STRING","'GBP'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_LNUMBER","826",267],",",["T_WHITESPACE","\n\t\t\t",267],["T_CONSTANT_ENCAPSED_STRING","'USD'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_LNUMBER","840",268],",",["T_WHITESPACE","\n\t\t\t",268],["T_CONSTANT_ENCAPSED_STRING","'EUR'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_LNUMBER","978",269],",",["T_WHITESPACE","\n\t\t",269],")",";",["T_WHITESPACE","\n\n\t\t",270],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_STRING","array_key_exists",272],"(",["T_VARIABLE","$code",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$currency",272],")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n\t\t\t",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$currency",273],"[",["T_VARIABLE","$code",273],"]",";",["T_WHITESPACE","\n\t\t",273],"}",["T_WHITESPACE"," ",274],["T_ELSE","else",274],["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\t\t\t",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n\t\t",275],"}",["T_WHITESPACE","\n\t",276],"}",["T_WHITESPACE","\n",277],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_USE","use",2],["T_WHITESPACE"," ",2],["T_STRING","Klarna",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Rest",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Transport",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Connector",2],["T_WHITESPACE"," ",2],["T_AS","as",2],["T_WHITESPACE"," ",2],["T_STRING","KCConnector",2],";",["T_WHITESPACE","\n",2],["T_USE","use",3],["T_WHITESPACE"," ",3],["T_STRING","Klarna",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Transport",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ConnectorInterface",3],["T_WHITESPACE"," ",3],["T_AS","as",3],["T_WHITESPACE"," ",3],["T_STRING","KCConnectorInterface",3],";",["T_WHITESPACE","\n",3],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Klarna",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Rest",4],["T_NS_SEPARATOR","\\",4],["T_STRING","OrderManagement",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Order",4],["T_WHITESPACE"," ",4],["T_AS","as",4],["T_WHITESPACE"," ",4],["T_STRING","KCOrder",4],";",["T_WHITESPACE","\n\n",4],["T_CLASS","class",6],["T_WHITESPACE"," ",6],["T_STRING","ModelExtensionPaymentKlarnaCheckout",6],["T_WHITESPACE"," ",6],["T_EXTENDS","extends",6],["T_WHITESPACE"," ",6],["T_STRING","Model",6],["T_WHITESPACE"," ",6],"{",["T_WHITESPACE","\n\t",6],["T_PUBLIC","public",7],["T_WHITESPACE"," ",7],["T_FUNCTION","function",7],["T_WHITESPACE"," ",7],["T_STRING","connector",7],"(",["T_VARIABLE","$merchant_id",7],",",["T_WHITESPACE"," ",7],["T_VARIABLE","$secret",7],",",["T_WHITESPACE"," ",7],["T_VARIABLE","$url",7],")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t",7],["T_TRY","try",8],["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$connector",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_STRING","KCConnector",9],["T_DOUBLE_COLON","::",9],["T_STRING","create",9],"(",["T_WHITESPACE","\n\t\t\t\t",9],["T_VARIABLE","$merchant_id",10],",",["T_WHITESPACE","\n\t\t\t\t",10],["T_VARIABLE","$secret",11],",",["T_WHITESPACE","\n\t\t\t\t",11],["T_VARIABLE","$url",12],["T_WHITESPACE","\n\t\t\t",12],")",";",["T_WHITESPACE","\n\n\t\t\t",13],["T_RETURN","return",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$connector",15],";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE"," ",16],["T_CATCH","catch",16],["T_WHITESPACE"," ",16],"(",["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$e",16],")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","log",17],"(",["T_VARIABLE","$e",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","getMessage",17],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",17],["T_RETURN","return",19],["T_WHITESPACE"," ",19],["T_STRING","false",19],";",["T_WHITESPACE","\n\t\t",19],"}",["T_WHITESPACE","\n\t",20],"}",["T_WHITESPACE","\n\n\t",21],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","omRetrieve",23],"(",["T_STRING","KCConnector",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$connector",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$order_id",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t",23],["T_TRY","try",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t\t",24],["T_VARIABLE","$order",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_NEW","new",25],["T_WHITESPACE"," ",25],["T_STRING","KCOrder",25],"(",["T_VARIABLE","$connector",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$order_id",25],")",";",["T_WHITESPACE","\n\n\t\t\t",25],["T_RETURN","return",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$order",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","fetch",27],"(",")",";",["T_WHITESPACE","\n\t\t",27],"}",["T_WHITESPACE"," ",28],["T_CATCH","catch",28],["T_WHITESPACE"," ",28],"(",["T_NS_SEPARATOR","\\",28],["T_STRING","Exception",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$e",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","log",29],"(",["T_VARIABLE","$e",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getMessage",29],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_STRING","false",31],";",["T_WHITESPACE","\n\t\t",31],"}",["T_WHITESPACE","\n\t",32],"}",["T_WHITESPACE","\n\n\t",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","omCancel",35],"(",["T_STRING","KCConnector",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$connector",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$order_id",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t",35],["T_TRY","try",36],["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t",36],["T_VARIABLE","$order",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","KCOrder",37],"(",["T_VARIABLE","$connector",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$order_id",37],")",";",["T_WHITESPACE","\n\n\t\t\t",37],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$order",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","cancel",39],"(",")",";",["T_WHITESPACE","\n\t\t",39],"}",["T_WHITESPACE"," ",40],["T_CATCH","catch",40],["T_WHITESPACE"," ",40],"(",["T_NS_SEPARATOR","\\",40],["T_STRING","Exception",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$e",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","log",41],"(",["T_VARIABLE","$e",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMessage",41],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",41],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_STRING","false",43],";",["T_WHITESPACE","\n\t\t",43],"}",["T_WHITESPACE","\n\t",44],"}",["T_WHITESPACE","\n\n\t",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","omCapture",47],"(",["T_STRING","KCConnector",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$connector",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$order_id",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n\t\t",47],["T_TRY","try",48],["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t",48],["T_VARIABLE","$order",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NEW","new",49],["T_WHITESPACE"," ",49],["T_STRING","KCOrder",49],"(",["T_VARIABLE","$connector",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$order_id",49],")",";",["T_WHITESPACE","\n\n\t\t\t",49],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$order",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","createCapture",51],"(",["T_VARIABLE","$data",51],")",";",["T_WHITESPACE","\n\t\t",51],"}",["T_WHITESPACE"," ",52],["T_CATCH","catch",52],["T_WHITESPACE"," ",52],"(",["T_NS_SEPARATOR","\\",52],["T_STRING","Exception",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$e",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t\t",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","log",53],"(",["T_VARIABLE","$e",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMessage",53],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",53],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_STRING","false",55],";",["T_WHITESPACE","\n\t\t",55],"}",["T_WHITESPACE","\n\t",56],"}",["T_WHITESPACE","\n\n\t",57],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","omRefund",59],"(",["T_STRING","KCConnector",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$connector",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$order_id",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$data",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t",59],["T_TRY","try",60],["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n\t\t\t",60],["T_VARIABLE","$order",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_STRING","KCOrder",61],"(",["T_VARIABLE","$connector",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$order_id",61],")",";",["T_WHITESPACE","\n\n\t\t\t",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$order",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","refund",63],"(",["T_VARIABLE","$data",63],")",";",["T_WHITESPACE","\n\t\t",63],"}",["T_WHITESPACE"," ",64],["T_CATCH","catch",64],["T_WHITESPACE"," ",64],"(",["T_NS_SEPARATOR","\\",64],["T_STRING","Exception",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$e",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n\t\t\t",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","log",65],"(",["T_VARIABLE","$e",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getMessage",65],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_STRING","false",67],";",["T_WHITESPACE","\n\t\t",67],"}",["T_WHITESPACE","\n\t",68],"}",["T_WHITESPACE","\n\n\t",69],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","omExtendAuthorizationTime",71],"(",["T_STRING","KCConnector",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$connector",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$order_id",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n\t\t",71],["T_TRY","try",72],["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t",72],["T_VARIABLE","$order",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_STRING","KCOrder",73],"(",["T_VARIABLE","$connector",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$order_id",73],")",";",["T_WHITESPACE","\n\n\t\t\t",73],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$order",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","extendAuthorizationTime",75],"(",")",";",["T_WHITESPACE","\n\t\t",75],"}",["T_WHITESPACE"," ",76],["T_CATCH","catch",76],["T_WHITESPACE"," ",76],"(",["T_NS_SEPARATOR","\\",76],["T_STRING","Exception",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$e",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","log",77],"(",["T_VARIABLE","$e",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getMessage",77],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_STRING","false",79],";",["T_WHITESPACE","\n\t\t",79],"}",["T_WHITESPACE","\n\t",80],"}",["T_WHITESPACE","\n\n\t",81],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","omUpdateMerchantReference",83],"(",["T_STRING","KCConnector",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$connector",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$order_id",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$data",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n\t\t",83],["T_TRY","try",84],["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n\t\t\t",84],["T_VARIABLE","$order",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","KCOrder",85],"(",["T_VARIABLE","$connector",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$order_id",85],")",";",["T_WHITESPACE","\n\n\t\t\t",85],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$order",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","updateMerchantReferences",87],"(",["T_VARIABLE","$data",87],")",";",["T_WHITESPACE","\n\t\t",87],"}",["T_WHITESPACE"," ",88],["T_CATCH","catch",88],["T_WHITESPACE"," ",88],"(",["T_NS_SEPARATOR","\\",88],["T_STRING","Exception",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t\t",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","log",89],"(",["T_VARIABLE","$e",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMessage",89],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_STRING","false",91],";",["T_WHITESPACE","\n\t\t",91],"}",["T_WHITESPACE","\n\t",92],"}",["T_WHITESPACE","\n\n\t",93],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","omUpdateAddress",95],"(",["T_STRING","KCConnector",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$connector",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$order_id",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$data",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t",95],["T_TRY","try",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\t\t\t",96],["T_VARIABLE","$order",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","KCOrder",97],"(",["T_VARIABLE","$connector",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$order_id",97],")",";",["T_WHITESPACE","\n\n\t\t\t",97],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$order",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","updateCustomerDetails",99],"(",["T_VARIABLE","$data",99],")",";",["T_WHITESPACE","\n\t\t",99],"}",["T_WHITESPACE"," ",100],["T_CATCH","catch",100],["T_WHITESPACE"," ",100],"(",["T_NS_SEPARATOR","\\",100],["T_STRING","Exception",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n\t\t\t",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","log",101],"(",["T_VARIABLE","$e",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMessage",101],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","false",103],";",["T_WHITESPACE","\n\t\t",103],"}",["T_WHITESPACE","\n\t",104],"}",["T_WHITESPACE","\n\n\t",105],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","omReleaseAuthorization",107],"(",["T_STRING","KCConnector",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$connector",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$order_id",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t",107],["T_TRY","try",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t\t",108],["T_VARIABLE","$order",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_STRING","KCOrder",109],"(",["T_VARIABLE","$connector",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$order_id",109],")",";",["T_WHITESPACE","\n\n\t\t\t",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$order",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","releaseRemainingAuthorization",111],"(",")",";",["T_WHITESPACE","\n\t\t",111],"}",["T_WHITESPACE"," ",112],["T_CATCH","catch",112],["T_WHITESPACE"," ",112],"(",["T_NS_SEPARATOR","\\",112],["T_STRING","Exception",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$e",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t\t\t",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","log",113],"(",["T_VARIABLE","$e",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMessage",113],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","false",115],";",["T_WHITESPACE","\n\t\t",115],"}",["T_WHITESPACE","\n\t",116],"}",["T_WHITESPACE","\n\n\t",117],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","omShippingInfo",119],"(",["T_STRING","KCConnector",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$connector",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$order_id",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$capture_id",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$data",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t",119],["T_TRY","try",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n\t\t\t",120],["T_VARIABLE","$order",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_STRING","KCOrder",121],"(",["T_VARIABLE","$connector",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$order_id",121],")",";",["T_WHITESPACE","\n\n\t\t\t",121],["T_VARIABLE","$capture",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$order",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","fetchCapture",123],"(",["T_VARIABLE","$capture_id",123],")",";",["T_WHITESPACE","\n\t\t\t",123],["T_RETURN","return",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$capture",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addShippingInfo",124],"(",["T_VARIABLE","$data",124],")",";",["T_WHITESPACE","\n\t\t",124],"}",["T_WHITESPACE"," ",125],["T_CATCH","catch",125],["T_WHITESPACE"," ",125],"(",["T_NS_SEPARATOR","\\",125],["T_STRING","Exception",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n\t\t\t",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","log",126],"(",["T_VARIABLE","$e",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getMessage",126],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",126],["T_RETURN","return",128],["T_WHITESPACE"," ",128],["T_STRING","false",128],";",["T_WHITESPACE","\n\t\t",128],"}",["T_WHITESPACE","\n\t",129],"}",["T_WHITESPACE","\n\n\t",130],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","omCustomerDetails",132],"(",["T_STRING","KCConnector",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$connector",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$order_id",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$capture_id",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$data",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n\t\t",132],["T_TRY","try",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t\t",133],["T_VARIABLE","$order",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","KCOrder",134],"(",["T_VARIABLE","$connector",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$order_id",134],")",";",["T_WHITESPACE","\n\n\t\t\t",134],["T_VARIABLE","$capture",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$order",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","fetchCapture",136],"(",["T_VARIABLE","$capture_id",136],")",";",["T_WHITESPACE","\n\t\t\t",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$capture",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","updateCustomerDetails",137],"(",["T_VARIABLE","$data",137],")",";",["T_WHITESPACE","\n\t\t",137],"}",["T_WHITESPACE"," ",138],["T_CATCH","catch",138],["T_WHITESPACE"," ",138],"(",["T_NS_SEPARATOR","\\",138],["T_STRING","Exception",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$e",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n\t\t\t",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","log",139],"(",["T_VARIABLE","$e",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getMessage",139],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",139],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_STRING","false",141],";",["T_WHITESPACE","\n\t\t",141],"}",["T_WHITESPACE","\n\t",142],"}",["T_WHITESPACE","\n\n\t",143],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","omTriggerSendOut",145],"(",["T_STRING","KCConnector",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$connector",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$order_id",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$capture_id",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n\t\t",145],["T_TRY","try",146],["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t",146],["T_VARIABLE","$order",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_NEW","new",147],["T_WHITESPACE"," ",147],["T_STRING","KCOrder",147],"(",["T_VARIABLE","$connector",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$order_id",147],")",";",["T_WHITESPACE","\n\n\t\t\t",147],["T_VARIABLE","$capture",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$order",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","fetchCapture",149],"(",["T_VARIABLE","$capture_id",149],")",";",["T_WHITESPACE","\n\t\t\t",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$capture",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","triggerSendout",150],"(",")",";",["T_WHITESPACE","\n\t\t",150],"}",["T_WHITESPACE"," ",151],["T_CATCH","catch",151],["T_WHITESPACE"," ",151],"(",["T_NS_SEPARATOR","\\",151],["T_STRING","Exception",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$e",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n\t\t\t",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","log",152],"(",["T_VARIABLE","$e",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getMessage",152],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_STRING","false",154],";",["T_WHITESPACE","\n\t\t",154],"}",["T_WHITESPACE","\n\t",155],"}",["T_WHITESPACE","\n\n\t",156],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getConnector",158],"(",["T_VARIABLE","$accounts",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$currency",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t",158],["T_VARIABLE","$klarna_account",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","false",159],";",["T_WHITESPACE","\n\t\t",159],["T_VARIABLE","$connector",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","false",160],";",["T_WHITESPACE","\n\n\t\t",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$accounts",162],["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$currency",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n\t\t\t",162],["T_FOREACH","foreach",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$accounts",163],["T_WHITESPACE"," ",163],["T_AS","as",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$account",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n\t\t\t\t",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$account",164],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",164],"]",["T_WHITESPACE"," ",164],["T_IS_EQUAL","==",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$currency",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t\t\t\t",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$account",165],"[",["T_CONSTANT_ENCAPSED_STRING","'environment'",165],"]",["T_WHITESPACE"," ",165],["T_IS_EQUAL","==",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'test'",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$account",166],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",166],"]",["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'NA'",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",166],["T_VARIABLE","$base_url",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","KCConnectorInterface",167],["T_DOUBLE_COLON","::",167],["T_STRING","NA_TEST_BASE_URL",167],";",["T_WHITESPACE","\n\t\t\t\t\t\t",167],"}",["T_WHITESPACE"," ",168],["T_ELSEIF","elseif",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$account",168],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",168],"]",["T_WHITESPACE"," ",168],["T_IS_EQUAL","==",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'EU'",168],")",["T_WHITESPACE","  ",168],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",168],["T_VARIABLE","$base_url",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","KCConnectorInterface",169],["T_DOUBLE_COLON","::",169],["T_STRING","EU_TEST_BASE_URL",169],";",["T_WHITESPACE","\n\t\t\t\t\t\t",169],"}",["T_WHITESPACE","\n\t\t\t\t\t",170],"}",["T_WHITESPACE"," ",171],["T_ELSEIF","elseif",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$account",171],"[",["T_CONSTANT_ENCAPSED_STRING","'environment'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'live'",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$account",172],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",172],"]",["T_WHITESPACE"," ",172],["T_IS_EQUAL","==",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'NA'",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",172],["T_VARIABLE","$base_url",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","KCConnectorInterface",173],["T_DOUBLE_COLON","::",173],["T_STRING","NA_BASE_URL",173],";",["T_WHITESPACE","\n\t\t\t\t\t\t",173],"}",["T_WHITESPACE"," ",174],["T_ELSEIF","elseif",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$account",174],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",174],"]",["T_WHITESPACE"," ",174],["T_IS_EQUAL","==",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'EU'",174],")",["T_WHITESPACE","  ",174],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",174],["T_VARIABLE","$base_url",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_STRING","KCConnectorInterface",175],["T_DOUBLE_COLON","::",175],["T_STRING","EU_BASE_URL",175],";",["T_WHITESPACE","\n\t\t\t\t\t\t",175],"}",["T_WHITESPACE","\n\t\t\t\t\t",176],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",177],["T_VARIABLE","$klarna_account",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$account",179],";",["T_WHITESPACE","\n\t\t\t\t\t",179],["T_VARIABLE","$connector",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","connector",180],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",180],["T_VARIABLE","$account",181],"[",["T_CONSTANT_ENCAPSED_STRING","'merchant_id'",181],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",181],["T_VARIABLE","$account",182],"[",["T_CONSTANT_ENCAPSED_STRING","'secret'",182],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",182],["T_VARIABLE","$base_url",183],["T_WHITESPACE","\n\t\t\t\t\t",183],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",184],["T_BREAK","break",186],";",["T_WHITESPACE","\n\t\t\t\t",186],"}",["T_WHITESPACE","\n\t\t\t",187],"}",["T_WHITESPACE","\n\t\t",188],"}",["T_WHITESPACE","\n\n\t\t",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",["T_VARIABLE","$klarna_account",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$connector",191],")",";",["T_WHITESPACE","\n\t",191],"}",["T_WHITESPACE","\n\n\t",192],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","getOrder",194],"(",["T_VARIABLE","$order_id",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t\t",194],["T_RETURN","return",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","db",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","query",195],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_STRING","DB_PREFIX",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` WHERE `order_id` = '\"",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_INT_CAST","(int)",195],["T_VARIABLE","$order_id",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",195],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","row",195],";",["T_WHITESPACE","\n\t",195],"}",["T_WHITESPACE","\n\n\t",196],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","checkForPaymentTaxes",198],"(",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n\t\t",198],["T_VARIABLE","$query",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","db",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","query",199],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS `total` FROM \"",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_STRING","DB_PREFIX",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","\"product p LEFT JOIN \"",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_STRING","DB_PREFIX",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule tr ON (`tr`.`tax_class_id` = `p`.`tax_class_id`) WHERE `tr`.`based` = 'payment'\"",199],")",";",["T_WHITESPACE","\n\n\t\t",199],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$query",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","row",201],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",201],"]",";",["T_WHITESPACE","\n\t",201],"}",["T_WHITESPACE","\n\n\t",202],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","install",204],"(",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","query",205],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tCREATE TABLE IF NOT EXISTS `\"",205],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_STRING","DB_PREFIX",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` (\n\t\t\t  `klarna_checkout_order_id` INT(11) NOT NULL AUTO_INCREMENT,\n\t\t\t  `order_id` INT(11) NOT NULL,\n\t\t\t  `order_ref` VARCHAR(255) NOT NULL,\n\t\t\t  `data` text NOT NULL,\n\t\t\t  PRIMARY KEY (`klarna_checkout_order_id`)\n\t\t\t) ENGINE=MyISAM DEFAULT COLLATE=utf8_general_ci;\"",206],")",";",["T_WHITESPACE","\n\t",212],"}",["T_WHITESPACE","\n\n\t",213],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","uninstall",215],"(",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","db",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","query",216],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_STRING","DB_PREFIX",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order`;\"",216],")",";",["T_WHITESPACE","\n\t",216],"}",["T_WHITESPACE","\n\n\t",217],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","log",219],"(",["T_VARIABLE","$data",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n\t\t",219],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","config",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","get",220],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_checkout_debug'",220],")",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n\t\t\t",220],["T_VARIABLE","$backtrace",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","debug_backtrace",221],"(",")",";",["T_WHITESPACE","\n\t\t\t",221],["T_VARIABLE","$log",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_NEW","new",222],["T_WHITESPACE"," ",222],["T_STRING","Log",222],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_checkout.log'",222],")",";",["T_WHITESPACE","\n\t\t\t",222],["T_VARIABLE","$log",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","write",223],"(",["T_CONSTANT_ENCAPSED_STRING","'('",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$backtrace",223],"[",["T_LNUMBER","1",223],"]","[",["T_CONSTANT_ENCAPSED_STRING","'class'",223],"]",["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'::'",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_VARIABLE","$backtrace",223],"[",["T_LNUMBER","1",223],"]","[",["T_CONSTANT_ENCAPSED_STRING","'function'",223],"]",["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","') - '",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_STRING","print_r",223],"(",["T_VARIABLE","$data",223],",",["T_WHITESPACE"," ",223],["T_STRING","true",223],")",")",";",["T_WHITESPACE","\n\t\t",223],"}",["T_WHITESPACE","\n\t",224],"}",["T_WHITESPACE","\n",225],"}"]
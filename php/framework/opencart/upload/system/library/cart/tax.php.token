[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","Cart",2],";",["T_WHITESPACE","\n",2],["T_FINAL","final",3],["T_WHITESPACE"," ",3],["T_CLASS","class",3],["T_WHITESPACE"," ",3],["T_STRING","Tax",3],["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t",3],["T_PRIVATE","private",4],["T_WHITESPACE"," ",4],["T_VARIABLE","$tax_rates",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_ARRAY","array",4],"(",")",";",["T_WHITESPACE","\n\n\t",4],["T_PUBLIC","public",6],["T_WHITESPACE"," ",6],["T_FUNCTION","function",6],["T_WHITESPACE"," ",6],["T_STRING","__construct",6],"(",["T_VARIABLE","$registry",6],")",["T_WHITESPACE"," ",6],"{",["T_WHITESPACE","\n\t\t",6],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","config",7],["T_WHITESPACE"," ",7],"=",["T_WHITESPACE"," ",7],["T_VARIABLE","$registry",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","get",7],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",7],")",";",["T_WHITESPACE","\n\t\t",7],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$registry",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'db'",8],")",";",["T_WHITESPACE","\n\t\t",8],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","session",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_VARIABLE","$registry",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","get",9],"(",["T_CONSTANT_ENCAPSED_STRING","'session'",9],")",";",["T_WHITESPACE","\n\t",9],"}",["T_WHITESPACE","\n\n\t",10],["T_PUBLIC","public",12],["T_WHITESPACE"," ",12],["T_FUNCTION","function",12],["T_WHITESPACE"," ",12],["T_STRING","unsetRates",12],"(",")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","tax_rates",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_ARRAY","array",13],"(",")",";",["T_WHITESPACE","\n\t",13],"}",["T_WHITESPACE","\n\n\t",14],["T_PUBLIC","public",16],["T_WHITESPACE"," ",16],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","setShippingAddress",16],"(",["T_VARIABLE","$country_id",16],",",["T_WHITESPACE"," ",16],["T_VARIABLE","$zone_id",16],")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\t\t",16],["T_VARIABLE","$tax_query",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","db",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","query",17],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT tr1.tax_class_id, tr2.tax_rate_id, tr2.name, tr2.rate, tr2.type, tr1.priority FROM \"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule tr1 LEFT JOIN \"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate tr2 ON (tr1.tax_rate_id = tr2.tax_rate_id) INNER JOIN \"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate_to_customer_group tr2cg ON (tr2.tax_rate_id = tr2cg.tax_rate_id) LEFT JOIN \"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone z2gz ON (tr2.geo_zone_id = z2gz.geo_zone_id) LEFT JOIN \"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"geo_zone gz ON (tr2.geo_zone_id = gz.geo_zone_id) WHERE tr1.based = 'shipping' AND tr2cg.customer_group_id = '\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_INT_CAST","(int)",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","config",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",17],")",["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"' AND z2gz.country_id = '\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_INT_CAST","(int)",17],["T_VARIABLE","$country_id",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"' AND (z2gz.zone_id = '0' OR z2gz.zone_id = '\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_INT_CAST","(int)",17],["T_VARIABLE","$zone_id",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"') ORDER BY tr1.priority ASC\"",17],")",";",["T_WHITESPACE","\n\n\t\t",17],["T_FOREACH","foreach",19],["T_WHITESPACE"," ",19],"(",["T_VARIABLE","$tax_query",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","rows",19],["T_WHITESPACE"," ",19],["T_AS","as",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$result",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\t\t\t",19],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","tax_rates",20],"[",["T_VARIABLE","$result",20],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",20],"]","]","[",["T_VARIABLE","$result",20],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",20],"]","]",["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_WHITESPACE","\n\t\t\t\t",20],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",21],["T_WHITESPACE"," ",21],["T_DOUBLE_ARROW","=>",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$result",21],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",21],"]",",",["T_WHITESPACE","\n\t\t\t\t",21],["T_CONSTANT_ENCAPSED_STRING","'name'",22],["T_WHITESPACE","        ",22],["T_DOUBLE_ARROW","=>",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$result",22],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",22],"]",",",["T_WHITESPACE","\n\t\t\t\t",22],["T_CONSTANT_ENCAPSED_STRING","'rate'",23],["T_WHITESPACE","        ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$result",23],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",23],"]",",",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'type'",24],["T_WHITESPACE","        ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$result",24],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",24],"]",",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'priority'",25],["T_WHITESPACE","    ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$result",25],"[",["T_CONSTANT_ENCAPSED_STRING","'priority'",25],"]",["T_WHITESPACE","\n\t\t\t",25],")",";",["T_WHITESPACE","\n\t\t",26],"}",["T_WHITESPACE","\n\t",27],"}",["T_WHITESPACE","\n\n\t",28],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setPaymentAddress",30],"(",["T_VARIABLE","$country_id",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$zone_id",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t",30],["T_VARIABLE","$tax_query",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","db",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","query",31],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT tr1.tax_class_id, tr2.tax_rate_id, tr2.name, tr2.rate, tr2.type, tr1.priority FROM \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule tr1 LEFT JOIN \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate tr2 ON (tr1.tax_rate_id = tr2.tax_rate_id) INNER JOIN \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate_to_customer_group tr2cg ON (tr2.tax_rate_id = tr2cg.tax_rate_id) LEFT JOIN \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone z2gz ON (tr2.geo_zone_id = z2gz.geo_zone_id) LEFT JOIN \"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","DB_PREFIX",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"geo_zone gz ON (tr2.geo_zone_id = gz.geo_zone_id) WHERE tr1.based = 'payment' AND tr2cg.customer_group_id = '\"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_INT_CAST","(int)",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","config",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","get",31],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",31],")",["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"' AND z2gz.country_id = '\"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_INT_CAST","(int)",31],["T_VARIABLE","$country_id",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"' AND (z2gz.zone_id = '0' OR z2gz.zone_id = '\"",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_INT_CAST","(int)",31],["T_VARIABLE","$zone_id",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","\"') ORDER BY tr1.priority ASC\"",31],")",";",["T_WHITESPACE","\n\n\t\t",31],["T_FOREACH","foreach",33],["T_WHITESPACE"," ",33],"(",["T_VARIABLE","$tax_query",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","rows",33],["T_WHITESPACE"," ",33],["T_AS","as",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$result",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","tax_rates",34],"[",["T_VARIABLE","$result",34],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",34],"]","]","[",["T_VARIABLE","$result",34],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",34],"]","]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n\t\t\t\t",34],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$result",35],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",35],"]",",",["T_WHITESPACE","\n\t\t\t\t",35],["T_CONSTANT_ENCAPSED_STRING","'name'",36],["T_WHITESPACE","        ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$result",36],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",36],"]",",",["T_WHITESPACE","\n\t\t\t\t",36],["T_CONSTANT_ENCAPSED_STRING","'rate'",37],["T_WHITESPACE","        ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$result",37],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",37],"]",",",["T_WHITESPACE","\n\t\t\t\t",37],["T_CONSTANT_ENCAPSED_STRING","'type'",38],["T_WHITESPACE","        ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$result",38],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",38],"]",",",["T_WHITESPACE","\n\t\t\t\t",38],["T_CONSTANT_ENCAPSED_STRING","'priority'",39],["T_WHITESPACE","    ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$result",39],"[",["T_CONSTANT_ENCAPSED_STRING","'priority'",39],"]",["T_WHITESPACE","\n\t\t\t",39],")",";",["T_WHITESPACE","\n\t\t",40],"}",["T_WHITESPACE","\n\t",41],"}",["T_WHITESPACE","\n\n\t",42],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","setStoreAddress",44],"(",["T_VARIABLE","$country_id",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$zone_id",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t",44],["T_VARIABLE","$tax_query",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","db",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","query",45],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT tr1.tax_class_id, tr2.tax_rate_id, tr2.name, tr2.rate, tr2.type, tr1.priority FROM \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule tr1 LEFT JOIN \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate tr2 ON (tr1.tax_rate_id = tr2.tax_rate_id) INNER JOIN \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate_to_customer_group tr2cg ON (tr2.tax_rate_id = tr2cg.tax_rate_id) LEFT JOIN \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone z2gz ON (tr2.geo_zone_id = z2gz.geo_zone_id) LEFT JOIN \"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"geo_zone gz ON (tr2.geo_zone_id = gz.geo_zone_id) WHERE tr1.based = 'store' AND tr2cg.customer_group_id = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","config",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",45],")",["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"' AND z2gz.country_id = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$country_id",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"' AND (z2gz.zone_id = '0' OR z2gz.zone_id = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$zone_id",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"') ORDER BY tr1.priority ASC\"",45],")",";",["T_WHITESPACE","\n\n\t\t",45],["T_FOREACH","foreach",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$tax_query",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","rows",47],["T_WHITESPACE"," ",47],["T_AS","as",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$result",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n\t\t\t",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","tax_rates",48],"[",["T_VARIABLE","$result",48],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",48],"]","]","[",["T_VARIABLE","$result",48],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",48],"]","]",["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n\t\t\t\t",48],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$result",49],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",49],"]",",",["T_WHITESPACE","\n\t\t\t\t",49],["T_CONSTANT_ENCAPSED_STRING","'name'",50],["T_WHITESPACE","        ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$result",50],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",50],"]",",",["T_WHITESPACE","\n\t\t\t\t",50],["T_CONSTANT_ENCAPSED_STRING","'rate'",51],["T_WHITESPACE","        ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$result",51],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",51],"]",",",["T_WHITESPACE","\n\t\t\t\t",51],["T_CONSTANT_ENCAPSED_STRING","'type'",52],["T_WHITESPACE","        ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$result",52],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",52],"]",",",["T_WHITESPACE","\n\t\t\t\t",52],["T_CONSTANT_ENCAPSED_STRING","'priority'",53],["T_WHITESPACE","    ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$result",53],"[",["T_CONSTANT_ENCAPSED_STRING","'priority'",53],"]",["T_WHITESPACE","\n\t\t\t",53],")",";",["T_WHITESPACE","\n\t\t",54],"}",["T_WHITESPACE","\n\t",55],"}",["T_WHITESPACE","\n\n\t",56],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","calculate",58],"(",["T_VARIABLE","$value",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$tax_class_id",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$calculate",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","true",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$tax_class_id",59],["T_WHITESPACE"," ",59],["T_BOOLEAN_AND","&&",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$calculate",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$amount",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","0",60],";",["T_WHITESPACE","\n\n\t\t\t",60],["T_VARIABLE","$tax_rates",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getRates",62],"(",["T_VARIABLE","$value",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$tax_class_id",62],")",";",["T_WHITESPACE","\n\n\t\t\t",62],["T_FOREACH","foreach",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$tax_rates",64],["T_WHITESPACE"," ",64],["T_AS","as",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$tax_rate",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n\t\t\t\t",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$calculate",65],["T_WHITESPACE"," ",65],["T_IS_NOT_EQUAL","!=",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'P'",65],["T_WHITESPACE"," ",65],["T_BOOLEAN_AND","&&",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$calculate",65],["T_WHITESPACE"," ",65],["T_IS_NOT_EQUAL","!=",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'F'",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n\t\t\t\t\t",65],["T_VARIABLE","$amount",66],["T_WHITESPACE"," ",66],["T_PLUS_EQUAL","+=",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$tax_rate",66],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",66],"]",";",["T_WHITESPACE","\n\t\t\t\t",66],"}",["T_WHITESPACE"," ",67],["T_ELSEIF","elseif",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$tax_rate",67],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",67],"]",["T_WHITESPACE"," ",67],["T_IS_EQUAL","==",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$calculate",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t\t\t",67],["T_VARIABLE","$amount",68],["T_WHITESPACE"," ",68],["T_PLUS_EQUAL","+=",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$tax_rate",68],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",68],"]",";",["T_WHITESPACE","\n\t\t\t\t",68],"}",["T_WHITESPACE","\n\t\t\t",69],"}",["T_WHITESPACE","\n\n\t\t\t",70],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$value",72],["T_WHITESPACE"," ",72],"+",["T_WHITESPACE"," ",72],["T_VARIABLE","$amount",72],";",["T_WHITESPACE","\n\t\t",72],"}",["T_WHITESPACE"," ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\t\t\t",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$value",74],";",["T_WHITESPACE","\n\t\t",74],"}",["T_WHITESPACE","\n\t",75],"}",["T_WHITESPACE","\n\n\t",76],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","getTax",78],"(",["T_VARIABLE","$value",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$tax_class_id",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n\t\t",78],["T_VARIABLE","$amount",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],";",["T_WHITESPACE","\n\n\t\t",79],["T_VARIABLE","$tax_rates",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getRates",81],"(",["T_VARIABLE","$value",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$tax_class_id",81],")",";",["T_WHITESPACE","\n\n\t\t",81],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$tax_rates",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$tax_rate",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n\t\t\t",83],["T_VARIABLE","$amount",84],["T_WHITESPACE"," ",84],["T_PLUS_EQUAL","+=",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$tax_rate",84],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",84],"]",";",["T_WHITESPACE","\n\t\t",84],"}",["T_WHITESPACE","\n\n\t\t",85],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$amount",87],";",["T_WHITESPACE","\n\t",87],"}",["T_WHITESPACE","\n\n\t",88],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","getRateName",90],"(",["T_VARIABLE","$tax_rate_id",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n\t\t",90],["T_VARIABLE","$tax_query",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","db",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","query",91],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT name FROM \"",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","DB_PREFIX",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate WHERE tax_rate_id = '\"",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_INT_CAST","(int)",91],["T_VARIABLE","$tax_rate_id",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"'\"",91],")",";",["T_WHITESPACE","\n\n\t\t",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$tax_query",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","num_rows",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n\t\t\t",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$tax_query",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","row",94],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",94],"]",";",["T_WHITESPACE","\n\t\t",94],"}",["T_WHITESPACE"," ",95],["T_ELSE","else",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t\t",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","false",96],";",["T_WHITESPACE","\n\t\t",96],"}",["T_WHITESPACE","\n\t",97],"}",["T_WHITESPACE","\n\n\t",98],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getRates",100],"(",["T_VARIABLE","$value",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$tax_class_id",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n\t\t",100],["T_VARIABLE","$tax_rate_data",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",")",";",["T_WHITESPACE","\n\n\t\t",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_ISSET","isset",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","tax_rates",103],"[",["T_VARIABLE","$tax_class_id",103],"]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\t\t\t",103],["T_FOREACH","foreach",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","tax_rates",104],"[",["T_VARIABLE","$tax_class_id",104],"]",["T_WHITESPACE"," ",104],["T_AS","as",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$tax_rate",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t\t",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$tax_rate_data",105],"[",["T_VARIABLE","$tax_rate",105],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",105],"]","]",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n\t\t\t\t\t",105],["T_VARIABLE","$amount",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$tax_rate_data",106],"[",["T_VARIABLE","$tax_rate",106],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",106],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'amount'",106],"]",";",["T_WHITESPACE","\n\t\t\t\t",106],"}",["T_WHITESPACE"," ",107],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t\t\t\t",107],["T_VARIABLE","$amount",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],";",["T_WHITESPACE","\n\t\t\t\t",108],"}",["T_WHITESPACE","\n\n\t\t\t\t",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$tax_rate",111],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",111],"]",["T_WHITESPACE"," ",111],["T_IS_EQUAL","==",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'F'",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t\t\t\t",111],["T_VARIABLE","$amount",112],["T_WHITESPACE"," ",112],["T_PLUS_EQUAL","+=",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$tax_rate",112],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",112],"]",";",["T_WHITESPACE","\n\t\t\t\t",112],"}",["T_WHITESPACE"," ",113],["T_ELSEIF","elseif",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$tax_rate",113],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",113],"]",["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'P'",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n\t\t\t\t\t",113],["T_VARIABLE","$amount",114],["T_WHITESPACE"," ",114],["T_PLUS_EQUAL","+=",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$value",114],["T_WHITESPACE"," ",114],"\/",["T_WHITESPACE"," ",114],["T_LNUMBER","100",114],["T_WHITESPACE"," ",114],"*",["T_WHITESPACE"," ",114],["T_VARIABLE","$tax_rate",114],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",114],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",114],"}",["T_WHITESPACE","\n\n\t\t\t\t",115],["T_VARIABLE","$tax_rate_data",117],"[",["T_VARIABLE","$tax_rate",117],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",117],"]","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_WHITESPACE","\n\t\t\t\t\t",117],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$tax_rate",118],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",118],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",118],["T_CONSTANT_ENCAPSED_STRING","'name'",119],["T_WHITESPACE","        ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$tax_rate",119],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",119],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",119],["T_CONSTANT_ENCAPSED_STRING","'rate'",120],["T_WHITESPACE","        ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$tax_rate",120],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",120],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",120],["T_CONSTANT_ENCAPSED_STRING","'type'",121],["T_WHITESPACE","        ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$tax_rate",121],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",121],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",121],["T_CONSTANT_ENCAPSED_STRING","'amount'",122],["T_WHITESPACE","      ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$amount",122],["T_WHITESPACE","\n\t\t\t\t",122],")",";",["T_WHITESPACE","\n\t\t\t",123],"}",["T_WHITESPACE","\n\t\t",124],"}",["T_WHITESPACE","\n\n\t\t",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$tax_rate_data",127],";",["T_WHITESPACE","\n\t",127],"}",["T_WHITESPACE","\n",128],"}",["T_WHITESPACE","\n",129]]
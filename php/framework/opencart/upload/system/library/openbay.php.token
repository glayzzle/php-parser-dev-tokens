[["T_OPEN_TAG","<?php\n",1],["T_FINAL","final",2],["T_WHITESPACE"," ",2],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","Openbay",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PRIVATE","private",3],["T_WHITESPACE"," ",3],["T_VARIABLE","$registry",3],";",["T_WHITESPACE","\n\t",3],["T_PRIVATE","private",4],["T_WHITESPACE"," ",4],["T_VARIABLE","$installed_modules",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_ARRAY","array",4],"(",")",";",["T_WHITESPACE","\n\t",4],["T_PUBLIC","public",5],["T_WHITESPACE"," ",5],["T_VARIABLE","$installed_markets",5],["T_WHITESPACE"," ",5],"=",["T_WHITESPACE"," ",5],["T_ARRAY","array",5],"(",")",";",["T_WHITESPACE","\n\n\t",5],["T_PUBLIC","public",7],["T_WHITESPACE"," ",7],["T_FUNCTION","function",7],["T_WHITESPACE"," ",7],["T_STRING","__construct",7],"(",["T_VARIABLE","$registry",7],")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t",7],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","registry",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$registry",8],";",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","getInstalled",10],"(",")",";",["T_WHITESPACE","\n\n\t\t",10],["T_FOREACH","foreach",12],["T_WHITESPACE"," ",12],"(",["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","installed_markets",12],["T_WHITESPACE"," ",12],["T_AS","as",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$market",12],")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$class",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'\\openbay\\\\'",13],".",["T_WHITESPACE"," ",13],["T_STRING","ucfirst",13],"(",["T_VARIABLE","$market",13],")",";",["T_WHITESPACE","\n\n\t\t\t",13],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],"{",["T_VARIABLE","$market",15],"}",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_NEW","new",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$class",15],"(",["T_VARIABLE","$registry",15],")",";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","logger",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_NEW","new",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Log",18],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay.log'",18],")",";",["T_WHITESPACE","\n\t",18],"}",["T_WHITESPACE","\n\n\t",19],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","__get",21],"(",["T_VARIABLE","$name",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\t\t",21],["T_RETURN","return",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","registry",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_VARIABLE","$name",22],")",";",["T_WHITESPACE","\n\t",22],"}",["T_WHITESPACE","\n\n\t",23],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","log",25],"(",["T_VARIABLE","$data",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$write",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","true",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n\t\t",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","logging",26],["T_WHITESPACE"," ",26],["T_IS_EQUAL","==",26],["T_WHITESPACE"," ",26],["T_LNUMBER","1",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\t\t\t",26],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_STRING","function_exists",27],"(",["T_CONSTANT_ENCAPSED_STRING","'getmypid'",27],")",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t\t",27],["T_VARIABLE","$process_id",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","getmypid",28],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",28],["T_VARIABLE","$data",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$process_id",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","' - '",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_VARIABLE","$data",29],";",["T_WHITESPACE","\n\t\t\t",29],"}",["T_WHITESPACE","\n\n\t\t\t",30],["T_IF","if",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$write",32],["T_WHITESPACE"," ",32],["T_IS_EQUAL","==",32],["T_WHITESPACE"," ",32],["T_STRING","true",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t\t\t",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","logger",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","write",33],"(",["T_VARIABLE","$data",33],")",";",["T_WHITESPACE","\n\t\t\t",33],"}",["T_WHITESPACE","\n\t\t",34],"}",["T_WHITESPACE","\n\t",35],"}",["T_WHITESPACE","\n\n\t",36],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","encrypt",38],"(",["T_VARIABLE","$msg",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$k",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$base64",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","false",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t",38],["T_VARIABLE","$td",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","mcrypt_module_open",39],"(",["T_CONSTANT_ENCAPSED_STRING","'rijndael-256'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","''",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'ctr'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","''",39],")",";",["T_WHITESPACE","\n\n\t\t",39],["T_IF","if",41],["T_WHITESPACE"," ",41],"(","!",["T_VARIABLE","$td",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t",41],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_STRING","false",42],";",["T_WHITESPACE","\n\t\t",42],"}",["T_WHITESPACE","\n\n\t\t",43],["T_VARIABLE","$iv",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","mcrypt_create_iv",45],"(",["T_LNUMBER","32",45],",",["T_WHITESPACE"," ",45],["T_STRING","MCRYPT_RAND",45],")",";",["T_WHITESPACE","\n\n\t\t",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_STRING","mcrypt_generic_init",47],"(",["T_VARIABLE","$td",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$k",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$iv",47],")",["T_WHITESPACE"," ",47],["T_IS_NOT_IDENTICAL","!==",47],["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n\t\t\t",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_STRING","false",48],";",["T_WHITESPACE","\n\t\t",48],"}",["T_WHITESPACE","\n\n\t\t",49],["T_VARIABLE","$msg",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","mcrypt_generic",51],"(",["T_VARIABLE","$td",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$msg",51],")",";",["T_WHITESPACE","\n\t\t",51],["T_VARIABLE","$msg",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$iv",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$msg",52],";",["T_WHITESPACE","\n\t\t",52],["T_VARIABLE","$mac",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","pbkdf2",53],"(",["T_VARIABLE","$msg",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$k",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","1000",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","32",53],")",";",["T_WHITESPACE","\n\t\t",53],["T_VARIABLE","$msg",54],["T_WHITESPACE"," ",54],["T_CONCAT_EQUAL",".=",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$mac",54],";",["T_WHITESPACE","\n\n\t\t",54],["T_STRING","mcrypt_generic_deinit",56],"(",["T_VARIABLE","$td",56],")",";",["T_WHITESPACE","\n\t\t",56],["T_STRING","mcrypt_module_close",57],"(",["T_VARIABLE","$td",57],")",";",["T_WHITESPACE","\n\n\t\t",57],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$base64",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$msg",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","base64_encode",60],"(",["T_VARIABLE","$msg",60],")",";",["T_WHITESPACE","\n\t\t",60],"}",["T_WHITESPACE","\n\n\t\t",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$msg",63],";",["T_WHITESPACE","\n\t",63],"}",["T_WHITESPACE","\n\n\t",64],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","decrypt",66],"(",["T_VARIABLE","$msg",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$k",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$base64",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","false",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n\t\t",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$base64",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t",67],["T_VARIABLE","$msg",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","base64_decode",68],"(",["T_VARIABLE","$msg",68],")",";",["T_WHITESPACE","\n\t\t",68],"}",["T_WHITESPACE","\n\n\t\t",69],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_VARIABLE","$td",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","mcrypt_module_open",71],"(",["T_CONSTANT_ENCAPSED_STRING","'rijndael-256'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","''",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'ctr'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","''",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n\t\t\t",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_STRING","false",72],";",["T_WHITESPACE","\n\t\t",72],"}",["T_WHITESPACE","\n\n\t\t",73],["T_VARIABLE","$iv",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","substr",75],"(",["T_VARIABLE","$msg",75],",",["T_WHITESPACE"," ",75],["T_LNUMBER","0",75],",",["T_WHITESPACE"," ",75],["T_LNUMBER","32",75],")",";",["T_WHITESPACE","\n\t\t",75],["T_VARIABLE","$mo",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","strlen",76],"(",["T_VARIABLE","$msg",76],")",["T_WHITESPACE"," ",76],"-",["T_WHITESPACE"," ",76],["T_LNUMBER","32",76],";",["T_WHITESPACE","\n\t\t",76],["T_VARIABLE","$em",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","substr",77],"(",["T_VARIABLE","$msg",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$mo",77],")",";",["T_WHITESPACE","\n\t\t",77],["T_VARIABLE","$msg",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","substr",78],"(",["T_VARIABLE","$msg",78],",",["T_WHITESPACE"," ",78],["T_LNUMBER","32",78],",",["T_WHITESPACE"," ",78],["T_STRING","strlen",78],"(",["T_VARIABLE","$msg",78],")",["T_WHITESPACE"," ",78],"-",["T_WHITESPACE"," ",78],["T_LNUMBER","64",78],")",";",["T_WHITESPACE","\n\t\t",78],["T_VARIABLE","$mac",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","pbkdf2",79],"(",["T_VARIABLE","$iv",79],["T_WHITESPACE"," ",79],".",["T_WHITESPACE"," ",79],["T_VARIABLE","$msg",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$k",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","1000",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","32",79],")",";",["T_WHITESPACE","\n\n\t\t",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$em",81],["T_WHITESPACE"," ",81],["T_IS_NOT_IDENTICAL","!==",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$mac",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t\t",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_STRING","false",82],";",["T_WHITESPACE","\n\t\t",82],"}",["T_WHITESPACE","\n\n\t\t",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_STRING","mcrypt_generic_init",85],"(",["T_VARIABLE","$td",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$k",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$iv",85],")",["T_WHITESPACE"," ",85],["T_IS_NOT_IDENTICAL","!==",85],["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n\t\t\t",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_STRING","false",86],";",["T_WHITESPACE","\n\t\t",86],"}",["T_WHITESPACE","\n\n\t\t",87],["T_VARIABLE","$msg",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","mdecrypt_generic",89],"(",["T_VARIABLE","$td",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$msg",89],")",";",["T_WHITESPACE","\n\t\t",89],["T_VARIABLE","$msg",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","unserialize",90],"(",["T_VARIABLE","$msg",90],")",";",["T_WHITESPACE","\n\n\t\t",90],["T_STRING","mcrypt_generic_deinit",92],"(",["T_VARIABLE","$td",92],")",";",["T_WHITESPACE","\n\t\t",92],["T_STRING","mcrypt_module_close",93],"(",["T_VARIABLE","$td",93],")",";",["T_WHITESPACE","\n\n\t\t",93],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$msg",95],";",["T_WHITESPACE","\n\t",95],"}",["T_WHITESPACE","\n\n\t",96],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","pbkdf2",98],"(",["T_VARIABLE","$p",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$s",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$c",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$kl",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$a",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'sha256'",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n\t\t",98],["T_VARIABLE","$hl",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","strlen",99],"(",["T_STRING","hash",99],"(",["T_VARIABLE","$a",99],",",["T_WHITESPACE"," ",99],["T_STRING","null",99],",",["T_WHITESPACE"," ",99],["T_STRING","true",99],")",")",";",["T_WHITESPACE","\n\t\t",99],["T_VARIABLE","$kb",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","ceil",100],"(",["T_VARIABLE","$kl",100],["T_WHITESPACE"," ",100],"\/",["T_WHITESPACE"," ",100],["T_VARIABLE","$hl",100],")",";",["T_WHITESPACE","\n\t\t",100],["T_VARIABLE","$dk",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","''",101],";",["T_WHITESPACE","\n\n\t\t",101],["T_FOR","for",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$block",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_LNUMBER","1",103],";",["T_WHITESPACE"," ",103],["T_VARIABLE","$block",103],["T_WHITESPACE"," ",103],["T_IS_SMALLER_OR_EQUAL","<=",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$kb",103],";",["T_WHITESPACE"," ",103],["T_VARIABLE","$block",103],["T_INC","++",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\n\t\t\t",103],["T_VARIABLE","$ib",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$b",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","hash_hmac",105],"(",["T_VARIABLE","$a",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$s",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_STRING","pack",105],"(",["T_CONSTANT_ENCAPSED_STRING","'N'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$block",105],")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$p",105],",",["T_WHITESPACE"," ",105],["T_STRING","true",105],")",";",["T_WHITESPACE","\n\n\t\t\t",105],["T_FOR","for",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$i",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_LNUMBER","1",107],";",["T_WHITESPACE"," ",107],["T_VARIABLE","$i",107],["T_WHITESPACE"," ",107],"<",["T_WHITESPACE"," ",107],["T_VARIABLE","$c",107],";",["T_WHITESPACE"," ",107],["T_VARIABLE","$i",107],["T_INC","++",107],")",["T_WHITESPACE","\n\t\t\t\t",107],["T_VARIABLE","$ib",108],["T_WHITESPACE"," ",108],["T_XOR_EQUAL","^=",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$b",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","hash_hmac",108],"(",["T_VARIABLE","$a",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$b",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$p",108],",",["T_WHITESPACE"," ",108],["T_STRING","true",108],")",")",";",["T_WHITESPACE","\n\n\t\t\t",108],["T_VARIABLE","$dk",110],["T_WHITESPACE"," ",110],["T_CONCAT_EQUAL",".=",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$ib",110],";",["T_WHITESPACE","\n\t\t",110],"}",["T_WHITESPACE","\n\n\t\t",111],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_STRING","substr",113],"(",["T_VARIABLE","$dk",113],",",["T_WHITESPACE"," ",113],["T_LNUMBER","0",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$kl",113],")",";",["T_WHITESPACE","\n\t",113],"}",["T_WHITESPACE","\n\n\t",114],["T_PRIVATE","private",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","getInstalled",116],"(",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n\t\t",116],["T_VARIABLE","$query",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","db",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","query",117],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_STRING","DB_PREFIX",117],["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","\"extension WHERE `type` = 'openbay'\"",117],")",";",["T_WHITESPACE","\n\n\t\t",117],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$query",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","rows",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$result",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t\t",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","installed_markets",120],"[","]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$result",120],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",120],"]",";",["T_WHITESPACE","\n\t\t",120],"}",["T_WHITESPACE","\n\t",121],"}",["T_WHITESPACE","\n\n\t",122],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","getInstalledMarkets",124],"(",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n\t\t",124],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","installed_markets",125],";",["T_WHITESPACE","\n\t",125],"}",["T_WHITESPACE","\n\n\t",126],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","putStockUpdateBulk",128],"(",["T_VARIABLE","$product_id_array",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$end_inactive",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","false",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n\t\t",128],["T_DOC_COMMENT","\/**\n\t\t * putStockUpdateBulk\n\t\t *\n\t\t * Takes an array of product id's where stock has been modified\n\t\t *\n\t\t * @param $product_id_array\n\t\t *\/",129],["T_WHITESPACE","\n\n\t\t",135],["T_FOREACH","foreach",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","installed_markets",137],["T_WHITESPACE"," ",137],["T_AS","as",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$market",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n\t\t\t",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","config",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","get",138],"(",["T_VARIABLE","$market",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'_status'",138],")",["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_LNUMBER","1",138],["T_WHITESPACE"," ",138],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","config",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","get",138],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_'",138],["T_WHITESPACE"," ",138],".",["T_VARIABLE","$market",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'_status'",138],")",["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_LNUMBER","1",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n\t\t\t\t",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],"{",["T_VARIABLE","$market",139],"}",["T_OBJECT_OPERATOR","->",139],["T_STRING","putStockUpdateBulk",139],"(",["T_VARIABLE","$product_id_array",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$end_inactive",139],")",";",["T_WHITESPACE","\n\t\t\t",139],"}",["T_WHITESPACE","\n\t\t",140],"}",["T_WHITESPACE","\n\t",141],"}",["T_WHITESPACE","\n\n\t",142],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testDbColumn",144],"(",["T_VARIABLE","$table",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$column",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n\t\t",144],["T_VARIABLE","$res",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","db",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","query",145],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW COLUMNS FROM `\"",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_STRING","DB_PREFIX",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$table",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","\"` LIKE '\"",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$column",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","\"'\"",145],")",";",["T_WHITESPACE","\n\t\t",145],["T_IF","if",146],"(",["T_VARIABLE","$res",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","num_rows",146],["T_WHITESPACE"," ",146],["T_IS_NOT_EQUAL","!=",146],["T_WHITESPACE"," ",146],["T_LNUMBER","0",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_STRING","true",147],";",["T_WHITESPACE","\n\t\t",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t",148],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_STRING","false",149],";",["T_WHITESPACE","\n\t\t",149],"}",["T_WHITESPACE","\n\t",150],"}",["T_WHITESPACE","\n\n\t",151],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","testDbTable",153],"(",["T_VARIABLE","$table",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n\t\t",153],["T_VARIABLE","$res",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","db",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","query",154],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `table_name` AS `c` FROM `information_schema`.`tables` WHERE `table_schema` = DATABASE()\"",154],")",";",["T_WHITESPACE","\n\n\t\t",154],["T_VARIABLE","$tables",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",")",";",["T_WHITESPACE","\n\n\t\t",156],["T_FOREACH","foreach",158],"(",["T_VARIABLE","$res",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","rows",158],["T_WHITESPACE"," ",158],["T_AS","as",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$row",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t",158],["T_VARIABLE","$tables",159],"[","]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$row",159],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",159],"]",";",["T_WHITESPACE","\n\t\t",159],"}",["T_WHITESPACE","\n\n\t\t",160],["T_IF","if",162],"(",["T_STRING","in_array",162],"(",["T_VARIABLE","$table",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$tables",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n\t\t\t",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","true",163],";",["T_WHITESPACE","\n\t\t",163],"}",["T_WHITESPACE"," ",164],["T_ELSE","else",164],["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t\t",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_STRING","false",165],";",["T_WHITESPACE","\n\t\t",165],"}",["T_WHITESPACE","\n\t",166],"}",["T_WHITESPACE","\n\n\t",167],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","splitName",169],"(",["T_VARIABLE","$name",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n\t\t",169],["T_VARIABLE","$name",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","explode",170],"(",["T_CONSTANT_ENCAPSED_STRING","' '",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$name",170],")",";",["T_WHITESPACE","\n\t\t",170],["T_VARIABLE","$fname",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$name",171],"[",["T_LNUMBER","0",171],"]",";",["T_WHITESPACE","\n\t\t",171],["T_UNSET","unset",172],"(",["T_VARIABLE","$name",172],"[",["T_LNUMBER","0",172],"]",")",";",["T_WHITESPACE","\n\t\t",172],["T_VARIABLE","$lname",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","implode",173],"(",["T_CONSTANT_ENCAPSED_STRING","' '",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$name",173],")",";",["T_WHITESPACE","\n\n\t\t",173],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_WHITESPACE","\n\t\t\t",175],["T_CONSTANT_ENCAPSED_STRING","'firstname'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$fname",176],",",["T_WHITESPACE","\n\t\t\t",176],["T_CONSTANT_ENCAPSED_STRING","'surname'",177],["T_WHITESPACE","   ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$lname",177],["T_WHITESPACE","\n\t\t",177],")",";",["T_WHITESPACE","\n\t",178],"}",["T_WHITESPACE","\n\n\t",179],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","getTaxRates",181],"(",["T_VARIABLE","$tax_class_id",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n\t\t",181],["T_VARIABLE","$tax_rates",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",";",["T_WHITESPACE","\n\n\t\t",182],["T_VARIABLE","$tax_query",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","db",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","query",184],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT\n\t\t\t\t\ttr2.tax_rate_id,\n\t\t\t\t\ttr2.name,\n\t\t\t\t\ttr2.rate,\n\t\t\t\t\ttr2.type,\n\t\t\t\t\ttr1.priority\n\t\t\t\tFROM \"",184],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_STRING","DB_PREFIX",190],["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule tr1\n\t\t\t\tLEFT JOIN \"",190],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_STRING","DB_PREFIX",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate tr2 ON (tr1.tax_rate_id = tr2.tax_rate_id)\n\t\t\t\tINNER JOIN \"",191],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_STRING","DB_PREFIX",192],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"tax_rate_to_customer_group tr2cg ON (tr2.tax_rate_id = tr2cg.tax_rate_id)\n\t\t\t\tLEFT JOIN \"",192],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","DB_PREFIX",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone z2gz ON (tr2.geo_zone_id = z2gz.geo_zone_id)\n\t\t\t\tLEFT JOIN \"",193],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_STRING","DB_PREFIX",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","\"geo_zone gz ON (tr2.geo_zone_id = gz.geo_zone_id)\n\t\t\t\tWHERE tr1.tax_class_id = '\"",194],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_INT_CAST","(int)",195],["T_VARIABLE","$tax_class_id",195],["T_WHITESPACE"," ",195],".",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tAND tr1.based = 'shipping'\n\t\t\t\tAND tr2cg.customer_group_id = '\"",195],["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_INT_CAST","(int)",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","config",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","get",197],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",197],")",["T_WHITESPACE"," ",197],".",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tAND z2gz.country_id = '\"",197],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_INT_CAST","(int)",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","config",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","get",198],"(",["T_CONSTANT_ENCAPSED_STRING","'config_country_id'",198],")",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tAND (z2gz.zone_id = '0' OR z2gz.zone_id = '\"",198],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_INT_CAST","(int)",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","config",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","get",199],"(",["T_CONSTANT_ENCAPSED_STRING","'config_zone_id'",199],")",["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","\"')\n\t\t\t\tORDER BY tr1.priority ASC\"",199],")",";",["T_WHITESPACE","\n\n\t\t",200],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$tax_query",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","rows",202],["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$result",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n\t\t\t",202],["T_VARIABLE","$tax_rates",203],"[",["T_VARIABLE","$result",203],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",203],"]","]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",["T_WHITESPACE","\n\t\t\t\t",203],["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$result",204],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate_id'",204],"]",",",["T_WHITESPACE","\n\t\t\t\t",204],["T_CONSTANT_ENCAPSED_STRING","'name'",205],["T_WHITESPACE","        ",205],["T_DOUBLE_ARROW","=>",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$result",205],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",205],"]",",",["T_WHITESPACE","\n\t\t\t\t",205],["T_CONSTANT_ENCAPSED_STRING","'rate'",206],["T_WHITESPACE","        ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$result",206],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",206],"]",",",["T_WHITESPACE","\n\t\t\t\t",206],["T_CONSTANT_ENCAPSED_STRING","'type'",207],["T_WHITESPACE","        ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$result",207],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",207],"]",",",["T_WHITESPACE","\n\t\t\t\t",207],["T_CONSTANT_ENCAPSED_STRING","'priority'",208],["T_WHITESPACE","    ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$result",208],"[",["T_CONSTANT_ENCAPSED_STRING","'priority'",208],"]",["T_WHITESPACE","\n\t\t\t",208],")",";",["T_WHITESPACE","\n\t\t",209],"}",["T_WHITESPACE","\n\n\t\t",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$tax_rates",212],";",["T_WHITESPACE","\n\t",212],"}",["T_WHITESPACE","\n\n\t",213],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","getTaxRate",215],"(",["T_VARIABLE","$class_id",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t",215],["T_VARIABLE","$rates",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getTaxRates",216],"(",["T_VARIABLE","$class_id",216],")",";",["T_WHITESPACE","\n\t\t",216],["T_VARIABLE","$percentage",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_DNUMBER","0.00",217],";",["T_WHITESPACE","\n\t\t",217],["T_FOREACH","foreach",218],"(",["T_VARIABLE","$rates",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$rate",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t",218],["T_IF","if",219],"(",["T_VARIABLE","$rate",219],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",219],"]",["T_WHITESPACE"," ",219],["T_IS_EQUAL","==",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'P'",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n\t\t\t\t",219],["T_VARIABLE","$percentage",220],["T_WHITESPACE"," ",220],["T_PLUS_EQUAL","+=",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$rate",220],"[",["T_CONSTANT_ENCAPSED_STRING","'rate'",220],"]",";",["T_WHITESPACE","\n\t\t\t",220],"}",["T_WHITESPACE","\n\t\t",221],"}",["T_WHITESPACE","\n\n\t\t",222],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$percentage",224],";",["T_WHITESPACE","\n\t",224],"}",["T_WHITESPACE","\n\n\t",225],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","getZoneId",227],"(",["T_VARIABLE","$name",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$country_id",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t\t",227],["T_VARIABLE","$query",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","db",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","query",228],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `zone_id` FROM `\"",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_STRING","DB_PREFIX",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","\"zone` WHERE `country_id` = '\"",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_INT_CAST","(int)",228],["T_VARIABLE","$country_id",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","\"' AND status = '1' AND `name` = '\"",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","db",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","escape",228],"(",["T_VARIABLE","$name",228],")",["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","\"'\"",228],")",";",["T_WHITESPACE","\n\n\t\t",228],["T_IF","if",230],"(",["T_VARIABLE","$query",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","num_rows",230],["T_WHITESPACE"," ",230],">",["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n\t\t\t",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$query",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","row",231],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",231],"]",";",["T_WHITESPACE","\n\t\t",231],"}",["T_WHITESPACE"," ",232],["T_ELSE","else",232],["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n\t\t\t",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_LNUMBER","0",233],";",["T_WHITESPACE","\n\t\t",233],"}",["T_WHITESPACE","\n\t",234],"}",["T_WHITESPACE","\n\n\t",235],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","newOrderAdminNotify",237],"(",["T_VARIABLE","$order_id",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$order_status_id",237],")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n\t\t",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","load",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","model",238],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",238],")",";",["T_WHITESPACE","\n\t\t",238],["T_VARIABLE","$order_info",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","model_checkout_order",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getOrder",239],"(",["T_VARIABLE","$order_id",239],")",";",["T_WHITESPACE","\n\t\t\n\t\t",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_STRING","version_compare",241],"(",["T_STRING","VERSION",241],",",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'2.2'",241],",",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'>'",241],")",["T_WHITESPACE"," ",241],["T_IS_EQUAL","==",241],["T_WHITESPACE"," ",241],["T_STRING","true",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n\t\t\t",241],["T_VARIABLE","$language_code",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$order_info",242],"[",["T_CONSTANT_ENCAPSED_STRING","'language_code'",242],"]",";",["T_WHITESPACE","\n\t\t",242],"}",["T_WHITESPACE"," ",243],["T_ELSE","else",243],["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n\t\t\t",243],["T_VARIABLE","$language_code",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$order_info",244],"[",["T_CONSTANT_ENCAPSED_STRING","'language_directory'",244],"]",";",["T_WHITESPACE","\n\t\t",244],"}",["T_WHITESPACE","\n\t\t\n\t\t",245],["T_VARIABLE","$language",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_STRING","Language",247],"(",["T_VARIABLE","$language_code",247],")",";",["T_WHITESPACE","\n\t\t",247],["T_VARIABLE","$language",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","load",248],"(",["T_VARIABLE","$language_code",248],")",";",["T_WHITESPACE","\n\t\t",248],["T_VARIABLE","$language",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","load",249],"(",["T_CONSTANT_ENCAPSED_STRING","'mail\/order'",249],")",";",["T_WHITESPACE","\n\n\t\t",249],["T_VARIABLE","$order_status",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","db",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","query",251],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `name` FROM \"",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_STRING","DB_PREFIX",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"order_status WHERE order_status_id = '\"",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_INT_CAST","(int)",251],["T_VARIABLE","$order_status_id",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"' AND language_id = '\"",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_INT_CAST","(int)",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","config",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","get",251],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",251],")",["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",251],")",["T_OBJECT_OPERATOR","->",251],["T_STRING","row",251],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",251],"]",";",["T_WHITESPACE","\n\n\t\t",251],["T_COMMENT","\/\/ Order Totals\n",253],["T_WHITESPACE","\t\t",254],["T_VARIABLE","$order_total_query",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","db",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","query",254],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_STRING","DB_PREFIX",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","\"order_total` WHERE `order_id` = '\"",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_VARIABLE","$order_id",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `sort_order` ASC\"",254],")",";",["T_WHITESPACE","\n\n\t\t",254],["T_COMMENT","\/\/Order contents\n",256],["T_WHITESPACE","\t\t",257],["T_VARIABLE","$order_product_query",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","db",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","query",257],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_STRING","DB_PREFIX",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","\"order_product` WHERE `order_id` = '\"",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_INT_CAST","(int)",257],["T_VARIABLE","$order_id",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","\"'\"",257],")",";",["T_WHITESPACE","\n\n\t\t",257],["T_VARIABLE","$subject",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_STRING","sprintf",259],"(",["T_VARIABLE","$language",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","get",259],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_subject'",259],")",",",["T_WHITESPACE"," ",259],["T_STRING","html_entity_decode",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","config",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","get",259],"(",["T_CONSTANT_ENCAPSED_STRING","'config_name'",259],")",",",["T_WHITESPACE"," ",259],["T_STRING","ENT_QUOTES",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",259],")",",",["T_WHITESPACE"," ",259],["T_VARIABLE","$order_id",259],")",";",["T_WHITESPACE","\n\n\t\t",259],["T_COMMENT","\/\/ Text\n",261],["T_WHITESPACE","\t\t",262],["T_VARIABLE","$text",262],["T_WHITESPACE","  ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$language",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","get",262],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_received'",262],")",["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",262],";",["T_WHITESPACE","\n\t\t",262],["T_VARIABLE","$text",263],["T_WHITESPACE"," ",263],["T_CONCAT_EQUAL",".=",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$language",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","get",263],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_order_id'",263],")",["T_WHITESPACE"," ",263],".",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","' '",263],["T_WHITESPACE"," ",263],".",["T_WHITESPACE"," ",263],["T_VARIABLE","$order_info",263],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",263],"]",["T_WHITESPACE"," ",263],".",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",263],";",["T_WHITESPACE","\n\t\t",263],["T_VARIABLE","$text",264],["T_WHITESPACE"," ",264],["T_CONCAT_EQUAL",".=",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$language",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","get",264],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_date_added'",264],")",["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","' '",264],["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_STRING","date",264],"(",["T_VARIABLE","$language",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","get",264],"(",["T_CONSTANT_ENCAPSED_STRING","'date_format_short'",264],")",",",["T_WHITESPACE"," ",264],["T_STRING","strtotime",264],"(",["T_VARIABLE","$order_info",264],"[",["T_CONSTANT_ENCAPSED_STRING","'date_added'",264],"]",")",")",["T_WHITESPACE"," ",264],".",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",264],";",["T_WHITESPACE","\n\t\t",264],["T_VARIABLE","$text",265],["T_WHITESPACE"," ",265],["T_CONCAT_EQUAL",".=",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$language",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","get",265],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_order_status'",265],")",["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","' '",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_VARIABLE","$order_status",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",265],";",["T_WHITESPACE","\n\t\t",265],["T_VARIABLE","$text",266],["T_WHITESPACE"," ",266],["T_CONCAT_EQUAL",".=",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$language",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","get",266],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_products'",266],")",["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",266],";",["T_WHITESPACE","\n\n\t\t",266],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$order_product_query",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","rows",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$product",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n\t\t\t",268],["T_VARIABLE","$text",269],["T_WHITESPACE"," ",269],["T_CONCAT_EQUAL",".=",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",269],"]",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'x '",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",269],"]",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","' ('",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",269],"]",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","') '",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_STRING","html_entity_decode",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","currency",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","format",269],"(",["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",269],"]",["T_WHITESPACE"," ",269],"+",["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","config",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","get",269],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax'",269],")",["T_WHITESPACE"," ",269],"?",["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'tax'",269],"]",["T_WHITESPACE"," ",269],"*",["T_WHITESPACE"," ",269],["T_VARIABLE","$product",269],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",269],"]",")",["T_WHITESPACE"," ",269],":",["T_WHITESPACE"," ",269],["T_LNUMBER","0",269],")",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$order_info",269],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",269],"]",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$order_info",269],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",269],"]",")",",",["T_WHITESPACE"," ",269],["T_STRING","ENT_NOQUOTES",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",269],")",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",269],";",["T_WHITESPACE","\n\n\t\t\t",269],["T_VARIABLE","$order_option_query",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","db",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","query",271],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_STRING","DB_PREFIX",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","\"order_option WHERE order_id = '\"",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_INT_CAST","(int)",271],["T_VARIABLE","$order_id",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","\"' AND order_product_id = '\"",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_INT_CAST","(int)",271],["T_VARIABLE","$product",271],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",271],"]",["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","\"'\"",271],")",";",["T_WHITESPACE","\n\n\t\t\t",271],["T_FOREACH","foreach",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$order_option_query",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","rows",273],["T_WHITESPACE"," ",273],["T_AS","as",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$option",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t\t",273],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$option",274],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",274],"]",["T_WHITESPACE"," ",274],["T_IS_NOT_EQUAL","!=",274],["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'file'",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\t\t\t\t\t",274],["T_VARIABLE","$value",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$option",275],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",275],"]",";",["T_WHITESPACE","\n\t\t\t\t",275],"}",["T_WHITESPACE"," ",276],["T_ELSE","else",276],["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n\t\t\t\t\t",276],["T_VARIABLE","$value",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","utf8_substr",277],"(",["T_VARIABLE","$option",277],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",277],"]",",",["T_WHITESPACE"," ",277],["T_LNUMBER","0",277],",",["T_WHITESPACE"," ",277],["T_STRING","utf8_strrpos",277],"(",["T_VARIABLE","$option",277],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",277],"]",",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'.'",277],")",")",";",["T_WHITESPACE","\n\t\t\t\t",277],"}",["T_WHITESPACE","\n\n\t\t\t\t",278],["T_VARIABLE","$text",280],["T_WHITESPACE"," ",280],["T_CONCAT_EQUAL",".=",280],["T_WHITESPACE"," ",280],["T_STRING","chr",280],"(",["T_LNUMBER","9",280],")",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'-'",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$option",280],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",280],"]",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","' '",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],"(",["T_STRING","utf8_strlen",280],"(",["T_VARIABLE","$value",280],")",["T_WHITESPACE"," ",280],">",["T_WHITESPACE"," ",280],["T_LNUMBER","20",280],")",["T_WHITESPACE"," ",280],"?",["T_WHITESPACE"," ",280],["T_STRING","utf8_substr",280],"(",["T_VARIABLE","$value",280],",",["T_WHITESPACE"," ",280],["T_LNUMBER","0",280],",",["T_WHITESPACE"," ",280],["T_LNUMBER","20",280],")",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'..'",280],["T_WHITESPACE"," ",280],":",["T_WHITESPACE"," ",280],["T_VARIABLE","$value",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",280],";",["T_WHITESPACE","\n\t\t\t",280],"}",["T_WHITESPACE","\n\t\t",281],"}",["T_WHITESPACE","\n\n\t\t",282],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_ISSET","isset",284],"(",["T_VARIABLE","$order_voucher_query",284],")",["T_WHITESPACE"," ",284],["T_BOOLEAN_AND","&&",284],["T_WHITESPACE"," ",284],["T_STRING","is_array",284],"(",["T_VARIABLE","$order_voucher_query",284],")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n\t\t\t",284],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$order_voucher_query",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","rows",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$voucher",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n\t\t\t\t",285],["T_VARIABLE","$text",286],["T_WHITESPACE"," ",286],["T_CONCAT_EQUAL",".=",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'1x '",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$voucher",286],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",286],"]",["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","' '",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","currency",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","format",286],"(",["T_VARIABLE","$voucher",286],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",286],"]",",",["T_WHITESPACE"," ",286],["T_VARIABLE","$order_info",286],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",286],"]",",",["T_WHITESPACE"," ",286],["T_VARIABLE","$order_info",286],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",286],"]",")",";",["T_WHITESPACE","\n\t\t\t",286],"}",["T_WHITESPACE","\n\t\t",287],"}",["T_WHITESPACE","\n\n\t\t",288],["T_VARIABLE","$text",290],["T_WHITESPACE"," ",290],["T_CONCAT_EQUAL",".=",290],["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",290],";",["T_WHITESPACE","\n\t\t",290],["T_VARIABLE","$text",291],["T_WHITESPACE"," ",291],["T_CONCAT_EQUAL",".=",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$language",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","get",291],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_order_total'",291],")",["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",291],";",["T_WHITESPACE","\n\n\t\t",291],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$order_total_query",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","rows",293],["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$total",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n\t\t\t",293],["T_VARIABLE","$text",294],["T_WHITESPACE"," ",294],["T_CONCAT_EQUAL",".=",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$total",294],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",294],"]",["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","': '",294],["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_STRING","html_entity_decode",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","currency",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","format",294],"(",["T_VARIABLE","$total",294],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",294],"]",",",["T_WHITESPACE"," ",294],["T_VARIABLE","$order_info",294],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",294],"]",",",["T_WHITESPACE"," ",294],["T_VARIABLE","$order_info",294],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",294],"]",")",",",["T_WHITESPACE"," ",294],["T_STRING","ENT_NOQUOTES",294],",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",294],")",["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",294],";",["T_WHITESPACE","\n\t\t",294],"}",["T_WHITESPACE","\n\n\t\t",295],["T_VARIABLE","$text",297],["T_WHITESPACE"," ",297],["T_CONCAT_EQUAL",".=",297],["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",297],";",["T_WHITESPACE","\n\n\t\t",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$order_info",299],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",299],"]",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n\t\t\t",299],["T_VARIABLE","$text",300],["T_WHITESPACE"," ",300],["T_CONCAT_EQUAL",".=",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$language",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","get",300],"(",["T_CONSTANT_ENCAPSED_STRING","'text_new_comment'",300],")",["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",300],";",["T_WHITESPACE","\n\t\t\t",300],["T_VARIABLE","$text",301],["T_WHITESPACE"," ",301],["T_CONCAT_EQUAL",".=",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$order_info",301],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",301],"]",["T_WHITESPACE"," ",301],".",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",301],";",["T_WHITESPACE","\n\t\t",301],"}",["T_WHITESPACE","\n\n\t\t",302],["T_VARIABLE","$mail",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_NEW","new",304],["T_WHITESPACE"," ",304],["T_NS_SEPARATOR","\\",304],["T_STRING","Mail",304],"(",")",";",["T_WHITESPACE","\n\t\t",304],["T_VARIABLE","$mail",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","protocol",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","config",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","get",305],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_protocol'",305],")",";",["T_WHITESPACE","\n\t\t",305],["T_VARIABLE","$mail",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","parameter",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","config",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","get",306],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_parameter'",306],")",";",["T_WHITESPACE","\n\t\t",306],["T_VARIABLE","$mail",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","smtp_hostname",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","config",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","get",307],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_hostname'",307],")",";",["T_WHITESPACE","\n\t\t",307],["T_VARIABLE","$mail",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","smtp_username",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","config",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","get",308],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_username'",308],")",";",["T_WHITESPACE","\n\t\t",308],["T_VARIABLE","$mail",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","smtp_password",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","html_entity_decode",309],"(",["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","config",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","get",309],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_password'",309],")",",",["T_WHITESPACE"," ",309],["T_STRING","ENT_QUOTES",309],",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",309],")",";",["T_WHITESPACE","\n\t\t",309],["T_VARIABLE","$mail",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","smtp_port",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","config",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","get",310],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_port'",310],")",";",["T_WHITESPACE","\n\t\t",310],["T_VARIABLE","$mail",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","smtp_timeout",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","config",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","get",311],"(",["T_CONSTANT_ENCAPSED_STRING","'config_mail_smtp_timeout'",311],")",";",["T_WHITESPACE","\n\n\t\t",311],["T_VARIABLE","$mail",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","setTo",313],"(",["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","config",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","get",313],"(",["T_CONSTANT_ENCAPSED_STRING","'config_email'",313],")",")",";",["T_WHITESPACE","\n\t\t",313],["T_VARIABLE","$mail",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","setFrom",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","config",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","get",314],"(",["T_CONSTANT_ENCAPSED_STRING","'config_email'",314],")",")",";",["T_WHITESPACE","\n\t\t",314],["T_VARIABLE","$mail",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","setSender",315],"(",["T_STRING","html_entity_decode",315],"(",["T_VARIABLE","$order_info",315],"[",["T_CONSTANT_ENCAPSED_STRING","'store_name'",315],"]",",",["T_WHITESPACE"," ",315],["T_STRING","ENT_QUOTES",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",315],")",")",";",["T_WHITESPACE","\n\t\t",315],["T_VARIABLE","$mail",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","setSubject",316],"(",["T_VARIABLE","$subject",316],")",";",["T_WHITESPACE","\n\t\t",316],["T_VARIABLE","$mail",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","setText",317],"(",["T_VARIABLE","$text",317],")",";",["T_WHITESPACE","\n\t\t",317],["T_VARIABLE","$mail",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","send",318],"(",")",";",["T_WHITESPACE","\n\n\t\t",318],["T_COMMENT","\/\/ Send to additional alert emails\n",320],["T_WHITESPACE","\t\t",321],["T_VARIABLE","$emails",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","explode",321],"(",["T_CONSTANT_ENCAPSED_STRING","','",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","config",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","get",321],"(",["T_CONSTANT_ENCAPSED_STRING","'config_alert_emails'",321],")",")",";",["T_WHITESPACE","\n\n\t\t",321],["T_FOREACH","foreach",323],["T_WHITESPACE"," ",323],"(",["T_VARIABLE","$emails",323],["T_WHITESPACE"," ",323],["T_AS","as",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$email",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n\t\t\t",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$email",324],["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_STRING","filter_var",324],"(",["T_VARIABLE","$email",324],",",["T_WHITESPACE"," ",324],["T_STRING","FILTER_VALIDATE_EMAIL",324],")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n\t\t\t\t",324],["T_VARIABLE","$mail",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","setTo",325],"(",["T_VARIABLE","$email",325],")",";",["T_WHITESPACE","\n\t\t\t\t",325],["T_VARIABLE","$mail",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","send",326],"(",")",";",["T_WHITESPACE","\n\t\t\t",326],"}",["T_WHITESPACE","\n\t\t",327],"}",["T_WHITESPACE","\n\t",328],"}",["T_WHITESPACE","\n\n\t",329],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","orderDelete",331],"(",["T_VARIABLE","$order_id",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n\t\t",331],["T_DOC_COMMENT","\/**\n\t\t * Called when an order is deleted in the admin\n\t\t * Use it to add stock back to the marketplaces\n\t\t *\/",332],["T_WHITESPACE","\n\t\t",335],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","installed_markets",336],["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$market",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n\t\t\t",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","config",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","get",337],"(",["T_VARIABLE","$market",337],["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'_status'",337],")",["T_WHITESPACE"," ",337],["T_IS_EQUAL","==",337],["T_WHITESPACE"," ",337],["T_LNUMBER","1",337],["T_WHITESPACE"," ",337],["T_BOOLEAN_OR","||",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","config",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","get",337],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_'",337],["T_WHITESPACE"," ",337],".",["T_VARIABLE","$market",337],["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'_status'",337],")",["T_WHITESPACE"," ",337],["T_IS_EQUAL","==",337],["T_WHITESPACE"," ",337],["T_LNUMBER","1",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n\t\t\t\t",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],"{",["T_VARIABLE","$market",338],"}",["T_OBJECT_OPERATOR","->",338],["T_STRING","orderDelete",338],"(",["T_VARIABLE","$order_id",338],")",";",["T_WHITESPACE","\n\t\t\t",338],"}",["T_WHITESPACE","\n\t\t",339],"}",["T_WHITESPACE","\n\t",340],"}",["T_WHITESPACE","\n\n\t",341],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","getProductModelNumber",343],"(",["T_VARIABLE","$product_id",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$sku",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_STRING","null",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n\t\t",343],["T_IF","if",344],"(",["T_VARIABLE","$sku",344],["T_WHITESPACE"," ",344],["T_IS_NOT_EQUAL","!=",344],["T_WHITESPACE"," ",344],["T_STRING","null",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n\t\t\t",344],["T_VARIABLE","$qry",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","db",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","query",345],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `sku` FROM `\"",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_STRING","DB_PREFIX",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant` WHERE `product_id` = '\"",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_INT_CAST","(int)",345],["T_VARIABLE","$product_id",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","\"' AND `sku` = '\"",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","db",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","escape",345],"(",["T_VARIABLE","$sku",345],")",["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","\"'\"",345],")",";",["T_WHITESPACE","\n\n\t\t\t",345],["T_IF","if",347],"(",["T_VARIABLE","$qry",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","num_rows",347],["T_WHITESPACE"," ",347],">",["T_WHITESPACE"," ",347],["T_LNUMBER","0",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n\t\t\t\t",347],["T_RETURN","return",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$qry",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","row",348],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",348],"]",";",["T_WHITESPACE","\n\t\t\t",348],"}",["T_WHITESPACE"," ",349],["T_ELSE","else",349],["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n\t\t\t\t",349],["T_RETURN","return",350],["T_WHITESPACE"," ",350],["T_STRING","false",350],";",["T_WHITESPACE","\n\t\t\t",350],"}",["T_WHITESPACE","\n\t\t",351],"}",["T_WHITESPACE"," ",352],["T_ELSE","else",352],["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n\t\t\t",352],["T_VARIABLE","$qry",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","db",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","query",353],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `model` FROM `\"",353],["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_STRING","DB_PREFIX",353],["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","\"product` WHERE `product_id` = '\"",353],["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_INT_CAST","(int)",353],["T_VARIABLE","$product_id",353],["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",353],")",";",["T_WHITESPACE","\n\n\t\t\t",353],["T_IF","if",355],"(",["T_VARIABLE","$qry",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","num_rows",355],["T_WHITESPACE"," ",355],">",["T_WHITESPACE"," ",355],["T_LNUMBER","0",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n\t\t\t\t",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$qry",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","row",356],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",356],"]",";",["T_WHITESPACE","\n\t\t\t",356],"}",["T_WHITESPACE"," ",357],["T_ELSE","else",357],["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n\t\t\t\t",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_STRING","false",358],";",["T_WHITESPACE","\n\t\t\t",358],"}",["T_WHITESPACE","\n\t\t",359],"}",["T_WHITESPACE","\n\t",360],"}",["T_WHITESPACE","\n\n\t",361],["T_PUBLIC","public",363],["T_WHITESPACE"," ",363],["T_FUNCTION","function",363],["T_WHITESPACE"," ",363],["T_STRING","getProductTaxClassId",363],"(",["T_VARIABLE","$product_id",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n\t\t",363],["T_VARIABLE","$qry",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","db",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","query",364],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `tax_class_id` FROM `\"",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_STRING","DB_PREFIX",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","\"product` WHERE `product_id` = '\"",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_INT_CAST","(int)",364],["T_VARIABLE","$product_id",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",364],")",";",["T_WHITESPACE","\n\n\t\t",364],["T_IF","if",366],"(",["T_VARIABLE","$qry",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","num_rows",366],["T_WHITESPACE"," ",366],">",["T_WHITESPACE"," ",366],["T_LNUMBER","0",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n\t\t\t",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$qry",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","row",367],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",367],"]",";",["T_WHITESPACE","\n\t\t",367],"}",["T_WHITESPACE"," ",368],["T_ELSE","else",368],["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n\t\t\t",368],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_STRING","false",369],";",["T_WHITESPACE","\n\t\t",369],"}",["T_WHITESPACE","\n\t",370],"}",["T_WHITESPACE","\n\n\t",371],["T_PUBLIC","public",373],["T_WHITESPACE"," ",373],["T_FUNCTION","function",373],["T_WHITESPACE"," ",373],["T_STRING","addonLoad",373],"(",["T_VARIABLE","$addon",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n\t\t",373],["T_VARIABLE","$addon",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_STRING","strtolower",374],"(",["T_STRING_CAST","(string)",374],["T_VARIABLE","$addon",374],")",";",["T_WHITESPACE","\n\n\t\t",374],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_EMPTY","empty",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","installed_modules",376],")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n\t\t\t",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","installed_modules",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_ARRAY","array",377],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",377],["T_VARIABLE","$rows",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","db",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","query",379],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `code` FROM \"",379],["T_WHITESPACE"," ",379],".",["T_WHITESPACE"," ",379],["T_STRING","DB_PREFIX",379],["T_WHITESPACE"," ",379],".",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","\"extension\"",379],")",["T_OBJECT_OPERATOR","->",379],["T_STRING","rows",379],";",["T_WHITESPACE","\n\n\t\t\t",379],["T_FOREACH","foreach",381],["T_WHITESPACE"," ",381],"(",["T_VARIABLE","$rows",381],["T_WHITESPACE"," ",381],["T_AS","as",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$row",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n\t\t\t\t",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","installed_modules",382],"[","]",["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","strtolower",382],"(",["T_VARIABLE","$row",382],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",382],"]",")",";",["T_WHITESPACE","\n\t\t\t",382],"}",["T_WHITESPACE","\n\t\t",383],"}",["T_WHITESPACE","\n\n\t\t",384],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_STRING","in_array",386],"(",["T_VARIABLE","$addon",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","installed_modules",386],")",";",["T_WHITESPACE","\n\t",386],"}",["T_WHITESPACE","\n\n\t",387],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getUserByEmail",389],"(",["T_VARIABLE","$email",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n\t\t",389],["T_VARIABLE","$qry",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","db",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","query",390],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_STRING","DB_PREFIX",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","\"customer` WHERE `email` = '\"",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","db",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","escape",390],"(",["T_VARIABLE","$email",390],")",["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","\"'\"",390],")",";",["T_WHITESPACE","\n\n\t\t",390],["T_IF","if",392],"(",["T_VARIABLE","$qry",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","num_rows",392],")","{",["T_WHITESPACE","\n\t\t\t",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$qry",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","row",393],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",393],"]",";",["T_WHITESPACE","\n\t\t",393],"}",["T_WHITESPACE"," ",394],["T_ELSE","else",394],["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n\t\t\t",394],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_STRING","false",395],";",["T_WHITESPACE","\n\t\t",395],"}",["T_WHITESPACE","\n\t",396],"}",["T_WHITESPACE","\n\n\t",397],["T_PUBLIC","public",399],["T_WHITESPACE"," ",399],["T_FUNCTION","function",399],["T_WHITESPACE"," ",399],["T_STRING","getProductOptions",399],"(",["T_VARIABLE","$product_id",399],")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n\t\t",399],["T_VARIABLE","$product_option_data",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_ARRAY","array",400],"(",")",";",["T_WHITESPACE","\n\n\t\t",400],["T_VARIABLE","$product_option_query",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","db",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","query",402],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_STRING","DB_PREFIX",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","\"product_option po LEFT JOIN `\"",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_STRING","DB_PREFIX",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","\"option` o ON (po.option_id = o.option_id) LEFT JOIN \"",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_STRING","DB_PREFIX",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","\"option_description od ON (o.option_id = od.option_id) WHERE po.product_id = '\"",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_INT_CAST","(int)",402],["T_VARIABLE","$product_id",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","\"' AND od.language_id = '\"",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_INT_CAST","(int)",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","config",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","get",402],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",402],")",["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY o.sort_order\"",402],")",";",["T_WHITESPACE","\n\n\t\t",402],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$product_option_query",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","rows",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$product_option",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n\t\t\t",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_VARIABLE","$product_option",405],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",405],"]",["T_WHITESPACE"," ",405],["T_IS_EQUAL","==",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'select'",405],["T_WHITESPACE"," ",405],["T_BOOLEAN_OR","||",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$product_option",405],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",405],"]",["T_WHITESPACE"," ",405],["T_IS_EQUAL","==",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'radio'",405],["T_WHITESPACE"," ",405],["T_BOOLEAN_OR","||",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$product_option",405],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",405],"]",["T_WHITESPACE"," ",405],["T_IS_EQUAL","==",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",405],["T_WHITESPACE"," ",405],["T_BOOLEAN_OR","||",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$product_option",405],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",405],"]",["T_WHITESPACE"," ",405],["T_IS_EQUAL","==",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'image'",405],")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n\t\t\t\t",405],["T_VARIABLE","$product_option_value_data",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_ARRAY","array",406],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",406],["T_VARIABLE","$product_option_value_query",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","db",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","query",408],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_STRING","DB_PREFIX",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","\"product_option_value pov LEFT JOIN \"",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_STRING","DB_PREFIX",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","\"option_value ov ON (pov.option_value_id = ov.option_value_id) LEFT JOIN \"",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_STRING","DB_PREFIX",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","\"option_value_description ovd ON (ov.option_value_id = ovd.option_value_id) WHERE pov.product_option_id = '\"",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_INT_CAST","(int)",408],["T_VARIABLE","$product_option",408],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",408],"]",["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","\"' AND ovd.language_id = '\"",408],["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_INT_CAST","(int)",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","config",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","get",408],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",408],")",["T_WHITESPACE"," ",408],".",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY ov.sort_order\"",408],")",";",["T_WHITESPACE","\n\n\t\t\t\t",408],["T_FOREACH","foreach",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$product_option_value_query",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","rows",410],["T_WHITESPACE"," ",410],["T_AS","as",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$product_option_value",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n\t\t\t\t\t",410],["T_VARIABLE","$product_option_value_data",411],"[","]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_ARRAY","array",411],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",411],["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$product_option_value",412],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",412],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",412],["T_CONSTANT_ENCAPSED_STRING","'option_value_id'",413],["T_WHITESPACE","         ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$product_option_value",413],"[",["T_CONSTANT_ENCAPSED_STRING","'option_value_id'",413],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",413],["T_CONSTANT_ENCAPSED_STRING","'name'",414],["T_WHITESPACE","                    ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$product_option_value",414],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",414],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",414],["T_CONSTANT_ENCAPSED_STRING","'image'",415],["T_WHITESPACE","                   ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$product_option_value",415],"[",["T_CONSTANT_ENCAPSED_STRING","'image'",415],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",415],["T_CONSTANT_ENCAPSED_STRING","'quantity'",416],["T_WHITESPACE","                ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$product_option_value",416],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",416],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",416],["T_CONSTANT_ENCAPSED_STRING","'subtract'",417],["T_WHITESPACE","                ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$product_option_value",417],"[",["T_CONSTANT_ENCAPSED_STRING","'subtract'",417],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",417],["T_CONSTANT_ENCAPSED_STRING","'price'",418],["T_WHITESPACE","                   ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$product_option_value",418],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",418],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",418],["T_CONSTANT_ENCAPSED_STRING","'price_prefix'",419],["T_WHITESPACE","            ",419],["T_DOUBLE_ARROW","=>",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$product_option_value",419],"[",["T_CONSTANT_ENCAPSED_STRING","'price_prefix'",419],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",419],["T_CONSTANT_ENCAPSED_STRING","'points'",420],["T_WHITESPACE","                  ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$product_option_value",420],"[",["T_CONSTANT_ENCAPSED_STRING","'points'",420],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",420],["T_CONSTANT_ENCAPSED_STRING","'points_prefix'",421],["T_WHITESPACE","           ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$product_option_value",421],"[",["T_CONSTANT_ENCAPSED_STRING","'points_prefix'",421],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",421],["T_CONSTANT_ENCAPSED_STRING","'weight'",422],["T_WHITESPACE","                  ",422],["T_DOUBLE_ARROW","=>",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$product_option_value",422],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",422],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",422],["T_CONSTANT_ENCAPSED_STRING","'weight_prefix'",423],["T_WHITESPACE","           ",423],["T_DOUBLE_ARROW","=>",423],["T_WHITESPACE"," ",423],["T_VARIABLE","$product_option_value",423],"[",["T_CONSTANT_ENCAPSED_STRING","'weight_prefix'",423],"]",["T_WHITESPACE","\n\t\t\t\t\t",423],")",";",["T_WHITESPACE","\n\t\t\t\t",424],"}",["T_WHITESPACE","\n\n\t\t\t\t",425],["T_VARIABLE","$product_option_data",427],"[","]",["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_ARRAY","array",427],"(",["T_WHITESPACE","\n\t\t\t\t\t",427],["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",428],["T_WHITESPACE","    ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$product_option",428],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",428],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",428],["T_CONSTANT_ENCAPSED_STRING","'option_id'",429],["T_WHITESPACE","            ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$product_option",429],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",429],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",429],["T_CONSTANT_ENCAPSED_STRING","'name'",430],["T_WHITESPACE","                 ",430],["T_DOUBLE_ARROW","=>",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$product_option",430],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",430],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",430],["T_CONSTANT_ENCAPSED_STRING","'type'",431],["T_WHITESPACE","                 ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$product_option",431],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",431],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",431],["T_CONSTANT_ENCAPSED_STRING","'product_option_value'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$product_option_value_data",432],",",["T_WHITESPACE","\n\t\t\t\t\t",432],["T_CONSTANT_ENCAPSED_STRING","'required'",433],["T_WHITESPACE","             ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$product_option",433],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",433],"]",["T_WHITESPACE","\n\t\t\t\t",433],")",";",["T_WHITESPACE","\n\t\t\t",434],"}",["T_WHITESPACE"," ",435],["T_ELSE","else",435],["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n\t\t\t\t",435],["T_VARIABLE","$product_option_data",436],"[","]",["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",["T_WHITESPACE","\n\t\t\t\t\t",436],["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$product_option",437],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",437],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",437],["T_CONSTANT_ENCAPSED_STRING","'option_id'",438],["T_WHITESPACE","         ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$product_option",438],"[",["T_CONSTANT_ENCAPSED_STRING","'option_id'",438],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",438],["T_CONSTANT_ENCAPSED_STRING","'name'",439],["T_WHITESPACE","              ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$product_option",439],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",439],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",439],["T_CONSTANT_ENCAPSED_STRING","'type'",440],["T_WHITESPACE","              ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$product_option",440],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",440],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",440],["T_CONSTANT_ENCAPSED_STRING","'option_value'",441],["T_WHITESPACE","      ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$product_option",441],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",441],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",441],["T_CONSTANT_ENCAPSED_STRING","'required'",442],["T_WHITESPACE","          ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$product_option",442],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",442],"]",["T_WHITESPACE","\n\t\t\t\t",442],")",";",["T_WHITESPACE","\n\t\t\t",443],"}",["T_WHITESPACE","\n\t\t",444],"}",["T_WHITESPACE","\n\n\t\t",445],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$product_option_data",447],";",["T_WHITESPACE","\n\t",447],"}",["T_WHITESPACE","\n\n\t",448],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","getOrderProducts",450],"(",["T_VARIABLE","$order_id",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n\t\t",450],["T_VARIABLE","$order_products",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","db",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","query",451],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `product_id`, `order_product_id` FROM `\"",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_STRING","DB_PREFIX",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","\"order_product` WHERE `order_id` = '\"",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_INT_CAST","(int)",451],["T_VARIABLE","$order_id",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","\"'\"",451],")",";",["T_WHITESPACE","\n\n\t\t",451],["T_IF","if",453],"(",["T_VARIABLE","$order_products",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","num_rows",453],["T_WHITESPACE"," ",453],">",["T_WHITESPACE"," ",453],["T_LNUMBER","0",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\t\t\t",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$order_products",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","rows",454],";",["T_WHITESPACE","\n\t\t",454],"}",["T_WHITESPACE"," ",455],["T_ELSE","else",455],["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n\t\t\t",455],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_ARRAY","array",456],"(",")",";",["T_WHITESPACE","\n\t\t",456],"}",["T_WHITESPACE","\n\t",457],"}",["T_WHITESPACE","\n\n\t",458],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","getOrderProductVariant",460],"(",["T_VARIABLE","$order_id",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$product_id",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$order_product_id",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n\t\t",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","load",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","model",461],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",461],")",";",["T_WHITESPACE","\n\n\t\t",461],["T_VARIABLE","$order_option_query",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","db",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","query",463],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_STRING","DB_PREFIX",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","\"order_option WHERE order_id = '\"",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_INT_CAST","(int)",463],["T_VARIABLE","$order_id",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","\"' AND order_product_id = '\"",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_INT_CAST","(int)",463],["T_VARIABLE","$order_product_id",463],["T_WHITESPACE"," ",463],".",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","\"'\"",463],")",";",["T_WHITESPACE","\n\n\t\t",463],["T_IF","if",465],["T_WHITESPACE"," ",465],"(",["T_VARIABLE","$order_option_query",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","num_rows",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n\t\t\t",465],["T_VARIABLE","$options",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_ARRAY","array",466],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",466],["T_FOREACH","foreach",468],["T_WHITESPACE"," ",468],"(",["T_VARIABLE","$order_option_query",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","rows",468],["T_WHITESPACE"," ",468],["T_AS","as",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$option",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n\t\t\t\t",468],["T_VARIABLE","$options",469],"[","]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$option",469],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",469],"]",";",["T_WHITESPACE","\n\t\t\t",469],"}",["T_WHITESPACE","\n\n\t\t\t",470],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","model_extension_module_openstock",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","getVariantByOptionValues",472],"(",["T_VARIABLE","$options",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$product_id",472],")",";",["T_WHITESPACE","\n\t\t",472],"}",["T_WHITESPACE","\n\t",473],"}",["T_WHITESPACE","\n",474],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","openbay",2],";",["T_WHITESPACE","\n\n",2],["T_CLASS","class",4],["T_WHITESPACE"," ",4],["T_STRING","fba",4],["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t",4],["T_PRIVATE","private",5],["T_WHITESPACE"," ",5],["T_VARIABLE","$api_key",5],";",["T_WHITESPACE","\n\t",5],["T_PRIVATE","private",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$api_account_id",6],";",["T_WHITESPACE","\n\t",6],["T_PRIVATE","private",7],["T_WHITESPACE"," ",7],["T_VARIABLE","$url",7],["T_WHITESPACE"," ",7],"=",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.openbaypro.io\/'",7],";",["T_WHITESPACE","\n\t",7],["T_PRIVATE","private",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$registry",8],";",["T_WHITESPACE","\n\n\t",8],["T_PRIVATE","private",10],["T_WHITESPACE"," ",10],["T_VARIABLE","$logging",10],["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_LNUMBER","1",10],";",["T_WHITESPACE","\n\t",10],["T_PRIVATE","private",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$logging_verbose",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_LNUMBER","1",11],";",["T_WHITESPACE","\n\t",11],["T_PRIVATE","private",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$max_log_size",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_LNUMBER","50",12],";",["T_WHITESPACE","\n\n\t",12],["T_DOC_COMMENT","\/**\n\t * Status IDs =\n\t * 0 = new\n\t * 1 = error\n\t * 2 = held\n\t * 3 = shipped\n\t * 4 = cancelled\n\t *\/",14],["T_WHITESPACE","\n\n\t",21],["T_DOC_COMMENT","\/**\n\t * Type IDs =\n\t * 0 = new\n\t * 1 = shipping\n\t * 2 = cancel\n\t *\/",23],["T_WHITESPACE","\n\n\t",28],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","__construct",30],"(",["T_VARIABLE","$registry",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","registry",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$registry",31],";",["T_WHITESPACE","\n\n\t\t",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","api_key",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","config",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","get",33],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_api_key'",33],")",";",["T_WHITESPACE","\n\t\t",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","api_account_id",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","config",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","get",34],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_api_account_id'",34],")",";",["T_WHITESPACE","\n\t\t",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","logging",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","config",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_debug_log'",35],")",";",["T_WHITESPACE","\n\n\t\t",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setLogger",37],"(",")",";",["T_WHITESPACE","\n\t",37],"}",["T_WHITESPACE","\n\n\t",38],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","__get",40],"(",["T_VARIABLE","$name",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t",40],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","registry",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_VARIABLE","$name",41],")",";",["T_WHITESPACE","\n\t",41],"}",["T_WHITESPACE","\n\n\t",42],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","setApiKey",44],"(",["T_VARIABLE","$api_key",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","api_key",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$api_key",45],";",["T_WHITESPACE","\n\t",45],"}",["T_WHITESPACE","\n\n\t",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","setAccountId",48],"(",["T_VARIABLE","$api_account_id",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","api_account_id",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$api_account_id",49],";",["T_WHITESPACE","\n\t",49],"}",["T_WHITESPACE","\n\n\t",50],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","call",52],"(",["T_VARIABLE","$uri",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$data",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$request_type",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'GET'",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","log",53],"(",["T_CONSTANT_ENCAPSED_STRING","\"Request: \"",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$request_type",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\" : \"",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","url",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$uri",53],")",";",["T_WHITESPACE","\n\n\t\t",53],["T_VARIABLE","$headers",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",";",["T_WHITESPACE","\n\t\t",55],["T_VARIABLE","$headers",56],"[","]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'X-Auth-Token: '",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","api_key",56],";",["T_WHITESPACE","\n\t\t",56],["T_VARIABLE","$headers",57],"[","]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",57],";",["T_WHITESPACE","\n\t\t",57],["T_VARIABLE","$headers",58],"[","]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'X-Account-ID: '",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","api_account_id",58],";",["T_WHITESPACE","\n\n\t\t",58],["T_VARIABLE","$defaults",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_WHITESPACE","\n\t\t\t",60],["T_STRING","CURLOPT_HTTPHEADER",61],["T_WHITESPACE","      ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$headers",61],",",["T_WHITESPACE","\n\t\t\t",61],["T_STRING","CURLOPT_URL",62],["T_WHITESPACE","             ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","url",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$uri",62],",",["T_WHITESPACE","\n\t\t\t",62],["T_STRING","CURLOPT_USERAGENT",63],["T_WHITESPACE","       ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'OpenBay Pro for Fulfillment by Amazon'",63],",",["T_WHITESPACE","\n\t\t\t",63],["T_STRING","CURLOPT_FRESH_CONNECT",64],["T_WHITESPACE","   ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_LNUMBER","1",64],",",["T_WHITESPACE","\n\t\t\t",64],["T_STRING","CURLOPT_RETURNTRANSFER",65],["T_WHITESPACE","  ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_LNUMBER","1",65],",",["T_WHITESPACE","\n\t\t\t",65],["T_STRING","CURLOPT_FORBID_REUSE",66],["T_WHITESPACE","    ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_LNUMBER","1",66],",",["T_WHITESPACE","\n\t\t\t",66],["T_STRING","CURLOPT_TIMEOUT",67],["T_WHITESPACE","         ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_LNUMBER","30",67],",",["T_WHITESPACE","\n\t\t\t",67],["T_STRING","CURLOPT_SSL_VERIFYPEER",68],["T_WHITESPACE","  ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_LNUMBER","0",68],",",["T_WHITESPACE","\n\t\t\t",68],["T_STRING","CURLOPT_SSL_VERIFYHOST",69],["T_WHITESPACE","  ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_LNUMBER","0",69],",",["T_WHITESPACE","\n\t\t",69],")",";",["T_WHITESPACE","\n\n\t\t",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","logging_verbose",72],["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_LNUMBER","1",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t",72],["T_VARIABLE","$defaults",73],"[",["T_STRING","CURLOPT_VERBOSE",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_LNUMBER","1",73],";",["T_WHITESPACE","\n\t\t\t",73],["T_VARIABLE","$defaults",74],"[",["T_STRING","CURLOPT_STDERR",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","fopen",74],"(",["T_STRING","DIR_LOGS",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'fba_verbose.log'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","\"a+\"",74],")",";",["T_WHITESPACE","\n\t\t",74],"}",["T_WHITESPACE","\n\n\t\t",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$request_type",77],["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","\"POST\"",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","log",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Request body:'",78],")",";",["T_WHITESPACE","\n\t\t\t",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","log",79],"(",["T_STRING","print_r",79],"(",["T_VARIABLE","$data",79],",",["T_WHITESPACE"," ",79],["T_STRING","true",79],")",")",";",["T_WHITESPACE","\n\t\t\t",79],["T_VARIABLE","$defaults",80],"[",["T_STRING","CURLOPT_POST",80],"]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","json_encode",80],"(",["T_VARIABLE","$data",80],")",";",["T_WHITESPACE","\n\t\t\t",80],["T_VARIABLE","$defaults",81],"[",["T_STRING","CURLOPT_POSTFIELDS",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","json_encode",81],"(",["T_VARIABLE","$data",81],")",";",["T_WHITESPACE","\n\t\t",81],"}",["T_WHITESPACE"," ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n\t\t\t",82],["T_VARIABLE","$defaults",83],"[",["T_STRING","CURLOPT_CUSTOMREQUEST",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","\"GET\"",83],";",["T_WHITESPACE","\n\t\t",83],"}",["T_WHITESPACE","\n\n\t\t",84],["T_VARIABLE","$ch",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","curl_init",86],"(",")",";",["T_WHITESPACE","\n\n\t\t",86],["T_STRING","curl_setopt_array",88],"(",["T_VARIABLE","$ch",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$defaults",88],")",";",["T_WHITESPACE","\n\n\t\t",88],["T_VARIABLE","$result",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","curl_exec",90],"(",["T_VARIABLE","$ch",90],")",";",["T_WHITESPACE","\n\n\t\t",90],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_VARIABLE","$result",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n\t\t\t",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","log",93],"(",["T_CONSTANT_ENCAPSED_STRING","'call() - Curl Failed '",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","curl_error",93],"(",["T_VARIABLE","$ch",93],")",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","' '",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","curl_errno",93],"(",["T_VARIABLE","$ch",93],")",")",";",["T_WHITESPACE","\n\n\t\t\t",93],["T_VARIABLE","$response",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_CONSTANT_ENCAPSED_STRING","'error'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","true",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'error_messages'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_STRING","curl_error",95],"(",["T_VARIABLE","$ch",95],")",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","' '",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_STRING","curl_errno",95],"(",["T_VARIABLE","$ch",95],")",")",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'body'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","null",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'response_http'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_LNUMBER","0",95],")",";",["T_WHITESPACE","\n\t\t",95],"}",["T_WHITESPACE"," ",96],["T_ELSE","else",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\t\t\t",96],["T_VARIABLE","$http_code",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","curl_getinfo",97],"(",["T_VARIABLE","$ch",97],",",["T_WHITESPACE"," ",97],["T_STRING","CURLINFO_HTTP_CODE",97],")",";",["T_WHITESPACE","\n\n\t\t\t",97],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","log",99],"(",["T_CONSTANT_ENCAPSED_STRING","\"Response: \"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_VARIABLE","$http_code",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\" : \"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","strlen",99],"(",["T_VARIABLE","$result",99],")",["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\" bytes\"",99],")",";",["T_WHITESPACE","\n\n\t\t\t",99],["T_VARIABLE","$encoding",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","mb_detect_encoding",101],"(",["T_VARIABLE","$result",101],")",";",["T_WHITESPACE","\n\n\t\t\t",101],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$encoding",103],["T_WHITESPACE"," ",103],["T_IS_EQUAL","==",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\t\t\t\t",103],["T_VARIABLE","$result",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","preg_replace",104],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^(\\x20-\\x7F)]*\/'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","''",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$result",104],")",";",["T_WHITESPACE","\n\t\t\t",104],"}",["T_WHITESPACE","\n\n\t\t\t",105],["T_VARIABLE","$result_parsed",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","json_decode",107],"(",["T_VARIABLE","$result",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","1",107],")",";",["T_WHITESPACE","\n\n\t\t\t",107],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","log",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Raw json response:'",109],")",";",["T_WHITESPACE","\n\t\t\t",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","log",110],"(",["T_VARIABLE","$result",110],")",";",["T_WHITESPACE","\n\n\t\t\t",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","log",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Parsed response:'",112],")",";",["T_WHITESPACE","\n\t\t\t",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","log",113],"(",["T_STRING","print_r",113],"(",["T_VARIABLE","$result_parsed",113],",",["T_WHITESPACE"," ",113],["T_STRING","true",113],")",")",";",["T_WHITESPACE","\n\n\t\t\t",113],["T_VARIABLE","$response",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n\t\t\t\t",115],["T_CONSTANT_ENCAPSED_STRING","'error'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","false",116],",",["T_WHITESPACE","\n\t\t\t\t",116],["T_CONSTANT_ENCAPSED_STRING","'error_messages'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",",",["T_WHITESPACE","\n\t\t\t\t",117],["T_CONSTANT_ENCAPSED_STRING","'body'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],"(",["T_ISSET","isset",118],"(",["T_VARIABLE","$result_parsed",118],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",118],"]",")",["T_WHITESPACE"," ",118],"?",["T_WHITESPACE"," ",118],["T_VARIABLE","$result_parsed",118],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",118],"]",["T_WHITESPACE"," ",118],":",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","''",118],")",",",["T_WHITESPACE","\n\t\t\t\t",118],["T_CONSTANT_ENCAPSED_STRING","'response_http'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$http_code",119],["T_WHITESPACE","\n\t\t\t",119],")",";",["T_WHITESPACE","\n\n\t\t\t",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_ISSET","isset",122],"(",["T_VARIABLE","$result_parsed",122],"[",["T_CONSTANT_ENCAPSED_STRING","'errors'",122],"]",")",["T_WHITESPACE"," ",122],["T_BOOLEAN_AND","&&",122],["T_WHITESPACE"," ",122],"!",["T_EMPTY","empty",122],"(",["T_VARIABLE","$result_parsed",122],"[",["T_CONSTANT_ENCAPSED_STRING","'errors'",122],"]",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\t\t\t\t",122],["T_VARIABLE","$response",123],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","true",123],";",["T_WHITESPACE","\n\t\t\t\t",123],["T_VARIABLE","$response",124],"[",["T_CONSTANT_ENCAPSED_STRING","'error_messages'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$result_parsed",124],"[",["T_CONSTANT_ENCAPSED_STRING","'errors'",124],"]",";",["T_WHITESPACE","\n\t\t\t",124],"}",["T_WHITESPACE","\n\t\t",125],"}",["T_WHITESPACE","\n\n\t\t",126],["T_STRING","curl_close",128],"(",["T_VARIABLE","$ch",128],")",";",["T_WHITESPACE","\n\n\t\t",128],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$response",130],";",["T_WHITESPACE","\n\t",130],"}",["T_WHITESPACE","\n\n\t",131],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getServerUrl",133],"(",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t",133],["T_RETURN","return",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","url",134],";",["T_WHITESPACE","\n\t",134],"}",["T_WHITESPACE","\n\n\t",135],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","validate",137],"(",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n\t\t",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","config",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","get",138],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_api_key'",138],")",["T_WHITESPACE"," ",138],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","config",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","get",138],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_fba_api_account_id'",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n\t\t\t",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","true",139],";",["T_WHITESPACE","\n\t\t",139],"}",["T_WHITESPACE"," ",140],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t\t\t",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_STRING","false",141],";",["T_WHITESPACE","\n\t\t",141],"}",["T_WHITESPACE","\n\t",142],"}",["T_WHITESPACE","\n\n\t",143],["T_PRIVATE","private",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","setLogger",145],"(",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n\t\t",145],["T_IF","if",146],"(",["T_STRING","file_exists",146],"(",["T_STRING","DIR_LOGS",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'fulfillment_by_amazon.log'",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t",146],["T_IF","if",147],"(",["T_STRING","filesize",147],"(",["T_STRING","DIR_LOGS",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'fulfillment_by_amazon.log'",147],")",["T_WHITESPACE"," ",147],">",["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","max_log_size",147],["T_WHITESPACE"," ",147],"*",["T_WHITESPACE"," ",147],["T_LNUMBER","1000000",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n\t\t\t\t",147],["T_STRING","rename",148],"(",["T_STRING","DIR_LOGS",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'fulfillment_by_amazon.log'",148],",",["T_WHITESPACE"," ",148],["T_STRING","DIR_LOGS",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'_fulfillment_by_amazon_'",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_STRING","date",148],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",148],")",["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'.log'",148],")",";",["T_WHITESPACE","\n\t\t\t",148],"}",["T_WHITESPACE","\n\t\t",149],"}",["T_WHITESPACE","\n\n\t\t",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","logger",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_NEW","new",152],["T_WHITESPACE"," ",152],["T_NS_SEPARATOR","\\",152],["T_STRING","Log",152],"(",["T_CONSTANT_ENCAPSED_STRING","'fulfillment_by_amazon.log'",152],")",";",["T_WHITESPACE","\n\t",152],"}",["T_WHITESPACE","\n\n\t",153],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","log",155],"(",["T_VARIABLE","$data",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t",155],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_STRING","function_exists",156],"(",["T_CONSTANT_ENCAPSED_STRING","'getmypid'",156],")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t\t",156],["T_VARIABLE","$process_id",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","getmypid",157],"(",")",";",["T_WHITESPACE","\n\t\t\t",157],["T_VARIABLE","$data",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$process_id",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","' - '",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_VARIABLE","$data",158],";",["T_WHITESPACE","\n\t\t",158],"}",["T_WHITESPACE","\n\n\t\t",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","logging",161],["T_WHITESPACE"," ",161],["T_IS_EQUAL","==",161],["T_WHITESPACE"," ",161],["T_LNUMBER","1",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n\t\t\t",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","logger",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","write",162],"(",["T_VARIABLE","$data",162],")",";",["T_WHITESPACE","\n\t\t",162],"}",["T_WHITESPACE","\n\t",163],"}",["T_WHITESPACE","\n\n\t",164],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","createFBAOrderID",166],"(",["T_VARIABLE","$order_id",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","db",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","query",167],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_STRING","DB_PREFIX",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` SET `order_id` = '\"",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_INT_CAST","(int)",167],["T_VARIABLE","$order_id",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","\"', `status` = 0, `created` = now()\"",167],")",";",["T_WHITESPACE","\n\n\t\t",167],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","db",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getLastId",169],"(",")",";",["T_WHITESPACE","\n\t",169],"}",["T_WHITESPACE","\n\n\t",170],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","updateFBAOrderStatus",172],"(",["T_VARIABLE","$order_id",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$status_id",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n\t\t",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","query",173],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_STRING","DB_PREFIX",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` SET `status` = '\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_INT_CAST","(int)",173],["T_VARIABLE","$status_id",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_INT_CAST","(int)",173],["T_VARIABLE","$order_id",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",173],")",";",["T_WHITESPACE","\n\t",173],"}",["T_WHITESPACE","\n\n\t",174],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","updateFBAOrderRef",176],"(",["T_VARIABLE","$order_id",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$ref",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n\t\t",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","db",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","query",177],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_STRING","DB_PREFIX",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` SET `fba_order_fulfillment_ref` = '\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","db",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","escape",177],"(",["T_VARIABLE","$ref",177],")",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_INT_CAST","(int)",177],["T_VARIABLE","$order_id",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",177],")",";",["T_WHITESPACE","\n\t",177],"}",["T_WHITESPACE","\n\n\t",178],["T_PUBLIC","public",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","updateFBAOrderFulfillmentID",180],"(",["T_VARIABLE","$order_id",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$fba_order_fulfillment_id",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n\t\t",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","db",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","query",181],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_STRING","DB_PREFIX",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` SET `fba_order_fulfillment_id` = '\"",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_INT_CAST","(int)",181],["T_VARIABLE","$fba_order_fulfillment_id",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_INT_CAST","(int)",181],["T_VARIABLE","$order_id",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"'\"",181],")",";",["T_WHITESPACE","\n\t",181],"}",["T_WHITESPACE","\n\n\t",182],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","createFBAFulfillmentID",184],"(",["T_VARIABLE","$order_id",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$type",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","db",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","query",185],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_STRING","DB_PREFIX",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"fba_order_fulfillment` SET `created` = now(), `order_id` = '\"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$order_id",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"', `type` = '\"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$type",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"'\"",185],")",";",["T_WHITESPACE","\n\n\t\t",185],["T_VARIABLE","$id",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","db",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getLastId",187],"(",")",";",["T_WHITESPACE","\n\n\t\t",187],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","db",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","query",189],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_STRING","DB_PREFIX",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` SET `fba_order_fulfillment_id` = '\"",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_INT_CAST","(int)",189],["T_VARIABLE","$id",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_INT_CAST","(int)",189],["T_VARIABLE","$order_id",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",189],")",";",["T_WHITESPACE","\n\n\t\t",189],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$id",191],";",["T_WHITESPACE","\n\t",191],"}",["T_WHITESPACE","\n\n\t",192],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","populateFBAFulfillment",194],"(",["T_VARIABLE","$request_body",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$response_body",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$header_code",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$fba_order_fulfillment_id",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t\t",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","db",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","query",195],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tUPDATE `\"",195],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_STRING","DB_PREFIX",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","\"fba_order_fulfillment`\n\t\t\t\tSET\n\t\t\t\t\t`request_body` = '\"",196],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","db",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","escape",198],"(",["T_VARIABLE","$request_body",198],")",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t\t`response_body` = '\"",198],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","db",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","escape",199],"(",["T_VARIABLE","$response_body",199],")",["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t\t`response_header_code` = '\"",199],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_INT_CAST","(int)",200],["T_VARIABLE","$header_code",200],["T_WHITESPACE"," ",200],".",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tWHERE\n\t\t\t\t\t`fba_order_fulfillment_id` = '\"",200],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_INT_CAST","(int)",202],["T_VARIABLE","$fba_order_fulfillment_id",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\"",202],")",";",["T_WHITESPACE","\n\n\t\t",203],["T_VARIABLE","$insert_id",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","db",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getLastId",205],"(",")",";",["T_WHITESPACE","\n\n\t\t",205],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$insert_id",207],";",["T_WHITESPACE","\n\t",207],"}",["T_WHITESPACE","\n\n\t",208],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","getFBAOrders",210],"(",["T_VARIABLE","$filter",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n\t\t",210],["T_VARIABLE","$sql",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","\"\"",211],";",["T_WHITESPACE","\n\n\t\t",211],["T_COMMENT","\/\/ start date filter\n",213],["T_WHITESPACE","\t\t",214],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$filter",214],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_start'",214],"]",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n\t\t\t",214],["T_VARIABLE","$sql",215],["T_WHITESPACE"," ",215],["T_CONCAT_EQUAL",".=",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\" AND `created` >= '\"",215],".",["T_VARIABLE","$filter",215],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_start'",215],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",215],";",["T_WHITESPACE","\n\t\t",215],"}",["T_WHITESPACE","\n\t\t",216],["T_COMMENT","\/\/ end date filter\n",217],["T_WHITESPACE","\t\t",218],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_ISSET","isset",218],"(",["T_VARIABLE","$filter",218],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_end'",218],"]",")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t",218],["T_VARIABLE","$sql",219],["T_WHITESPACE"," ",219],["T_CONCAT_EQUAL",".=",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","\" AND `created` <= '\"",219],".",["T_VARIABLE","$filter",219],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_end'",219],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",219],";",["T_WHITESPACE","\n\t\t",219],"}",["T_WHITESPACE","\n\t\t",220],["T_COMMENT","\/\/ status filter\n",221],["T_WHITESPACE","\t\t",222],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_ISSET","isset",222],"(",["T_VARIABLE","$filter",222],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_status'",222],"]",")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n\t\t\t",222],["T_VARIABLE","$sql",223],["T_WHITESPACE"," ",223],["T_CONCAT_EQUAL",".=",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","\" AND `status` = '\"",223],".",["T_VARIABLE","$filter",223],"[",["T_CONSTANT_ENCAPSED_STRING","'filter_status'",223],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",223],";",["T_WHITESPACE","\n\t\t",223],"}",["T_WHITESPACE","\n\n\t\t",224],["T_VARIABLE","$query",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","db",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","query",226],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_STRING","DB_PREFIX",226],["T_WHITESPACE"," ",226],".",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` WHERE 1 \"",226],".",["T_VARIABLE","$sql",226],".",["T_CONSTANT_ENCAPSED_STRING","\" ORDER BY `created` DESC\"",226],")",";",["T_WHITESPACE","\n\n\t\t",226],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$query",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","num_rows",228],["T_WHITESPACE"," ",228],["T_IS_EQUAL","==",228],["T_WHITESPACE"," ",228],["T_LNUMBER","0",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n\t\t\t",228],["T_RETURN","return",229],["T_WHITESPACE"," ",229],["T_STRING","false",229],";",["T_WHITESPACE","\n\t\t",229],"}",["T_WHITESPACE"," ",230],["T_ELSE","else",230],["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n\t\t\t",230],["T_RETURN","return",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$query",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","rows",231],";",["T_WHITESPACE","\n\t\t",231],"}",["T_WHITESPACE","\n\t",232],"}",["T_WHITESPACE","\n\n\t",233],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","getFBAOrder",235],"(",["T_VARIABLE","$order_id",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t",235],["T_VARIABLE","$query",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","db",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","query",236],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_STRING","DB_PREFIX",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` WHERE `order_id` = '\"",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_INT_CAST","(int)",236],["T_VARIABLE","$order_id",236],["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",236],")",";",["T_WHITESPACE","\n\n\t\t",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$query",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","num_rows",238],["T_WHITESPACE"," ",238],["T_IS_EQUAL","==",238],["T_WHITESPACE"," ",238],["T_LNUMBER","0",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n\t\t\t",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_STRING","false",239],";",["T_WHITESPACE","\n\t\t",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t\t",240],["T_VARIABLE","$fba_order",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","row",241],";",["T_WHITESPACE","\n\t\t\t",241],["T_VARIABLE","$fba_order",242],"[",["T_CONSTANT_ENCAPSED_STRING","'fulfillments'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getFBAOrderFulfillments",242],"(",["T_VARIABLE","$order_id",242],")",";",["T_WHITESPACE","\n\n\t\t\t",242],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$fba_order",244],";",["T_WHITESPACE","\n\t\t",244],"}",["T_WHITESPACE","\n\t",245],"}",["T_WHITESPACE","\n\n\t",246],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","getFBAOrderByRef",248],"(",["T_VARIABLE","$ref",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n\t\t",248],["T_VARIABLE","$query",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","db",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","query",249],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",249],["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_STRING","DB_PREFIX",249],["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","\"fba_order` WHERE `fba_order_fulfillment_ref` = '\"",249],["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","db",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","escape",249],"(",["T_VARIABLE","$ref",249],")",["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",249],")",";",["T_WHITESPACE","\n\n\t\t",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$query",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","num_rows",251],["T_WHITESPACE"," ",251],["T_IS_EQUAL","==",251],["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n\t\t\t",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_STRING","false",252],";",["T_WHITESPACE","\n\t\t",252],"}",["T_WHITESPACE"," ",253],["T_ELSE","else",253],["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n\t\t\t",253],["T_VARIABLE","$fba_order",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$query",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","row",254],";",["T_WHITESPACE","\n\t\t\t",254],["T_VARIABLE","$fba_order",255],"[",["T_CONSTANT_ENCAPSED_STRING","'fulfillments'",255],"]",["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$fba_order",255],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",255],"]",";",["T_WHITESPACE","\n\n\t\t\t",255],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$fba_order",257],";",["T_WHITESPACE","\n\t\t",257],"}",["T_WHITESPACE","\n\t",258],"}",["T_WHITESPACE","\n\n\t",259],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","getFBAOrderFulfillments",261],"(",["T_VARIABLE","$order_id",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n\t\t",261],["T_VARIABLE","$query",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","db",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","query",262],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_STRING","DB_PREFIX",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","\"fba_order_fulfillment` WHERE `order_id` = '\"",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_INT_CAST","(int)",262],["T_VARIABLE","$order_id",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `created` DESC\"",262],")",";",["T_WHITESPACE","\n\n\t\t",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$query",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","num_rows",264],["T_WHITESPACE"," ",264],["T_IS_EQUAL","==",264],["T_WHITESPACE"," ",264],["T_LNUMBER","0",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n\t\t\t",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","false",265],";",["T_WHITESPACE","\n\t\t",265],"}",["T_WHITESPACE"," ",266],["T_ELSE","else",266],["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n\t\t\t",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$query",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","rows",267],";",["T_WHITESPACE","\n\t\t",267],"}",["T_WHITESPACE","\n\t",268],"}",["T_WHITESPACE","\n\n\t",269],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","hasOrderFBAItems",271],"(",["T_VARIABLE","$order_id",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t",271],["T_VARIABLE","$query",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","db",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","query",272],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS `total` FROM `\"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_STRING","DB_PREFIX",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","\"order_product` `op` LEFT JOIN `\"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_STRING","DB_PREFIX",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","\"product` `p` ON `op`.`product_id` = `p`.`product_id` WHERE `p`.`location` = 'FBA' AND `op`.`order_id` = '\"",272],".",["T_INT_CAST","(int)",272],["T_VARIABLE","$order_id",272],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",272],")",";",["T_WHITESPACE","\n\n\t\t",272],["T_IF","if",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$query",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","num_rows",274],["T_WHITESPACE"," ",274],["T_IS_EQUAL","==",274],["T_WHITESPACE"," ",274],["T_LNUMBER","0",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\t\t\t",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_STRING","false",275],";",["T_WHITESPACE","\n\t\t",275],"}",["T_WHITESPACE"," ",276],["T_ELSE","else",276],["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n\t\t\t",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$query",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","row",277],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",277],"]",";",["T_WHITESPACE","\n\t\t",277],"}",["T_WHITESPACE","\n\t",278],"}",["T_WHITESPACE","\n",279],"}"]
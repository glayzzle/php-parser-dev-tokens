[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","openbay",2],";",["T_WHITESPACE","\n\n",2],["T_CLASS","class",4],["T_WHITESPACE"," ",4],["T_STRING","Amazon",4],["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t",4],["T_PRIVATE","private",5],["T_WHITESPACE"," ",5],["T_VARIABLE","$token",5],";",["T_WHITESPACE","\n\t",5],["T_PRIVATE","private",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$enc1",6],";",["T_WHITESPACE","\n\t",6],["T_PRIVATE","private",7],["T_WHITESPACE"," ",7],["T_VARIABLE","$enc2",7],";",["T_WHITESPACE","\n\t",7],["T_PRIVATE","private",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$url",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/uk-amazon.openbaypro.com\/'",8],";",["T_WHITESPACE","\n\t",8],["T_PRIVATE","private",9],["T_WHITESPACE"," ",9],["T_VARIABLE","$registry",9],";",["T_WHITESPACE","\n\n\t",9],["T_PUBLIC","public",11],["T_WHITESPACE"," ",11],["T_FUNCTION","function",11],["T_WHITESPACE"," ",11],["T_STRING","__construct",11],"(",["T_VARIABLE","$registry",11],")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t",11],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","registry",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$registry",12],";",["T_WHITESPACE","\n\n\t\t",12],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","token",14],["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","config",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_token'",14],")",";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","enc1",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","config",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_enc_string1'",15],")",";",["T_WHITESPACE","\n\t\t",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","enc2",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_enc_string2'",16],")",";",["T_WHITESPACE","\n\t",16],"}",["T_WHITESPACE","\n\n\t",17],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","__get",19],"(",["T_VARIABLE","$name",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\t\t",19],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","registry",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_VARIABLE","$name",20],")",";",["T_WHITESPACE","\n\t",20],"}",["T_WHITESPACE","\n\n\t",21],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","call",23],"(",["T_VARIABLE","$method",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$data",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",")",",",["T_WHITESPACE"," ",23],["T_VARIABLE","$is_json",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","true",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$is_json",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t\t",24],["T_VARIABLE","$arg_string",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","json_encode",25],"(",["T_VARIABLE","$data",25],")",";",["T_WHITESPACE","\n\t\t",25],"}",["T_WHITESPACE"," ",26],["T_ELSE","else",26],["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\t\t\t",26],["T_VARIABLE","$arg_string",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$data",27],";",["T_WHITESPACE","\n\t\t",27],"}",["T_WHITESPACE","\n\n\t\t",28],["T_VARIABLE","$crypt",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","encryptArgs",30],"(",["T_VARIABLE","$arg_string",30],")",";",["T_WHITESPACE","\n\n\t\t",30],["T_VARIABLE","$defaults",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_WHITESPACE","\n\t\t\t",32],["T_STRING","CURLOPT_POST",33],["T_WHITESPACE","            ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_LNUMBER","1",33],",",["T_WHITESPACE","\n\t\t\t",33],["T_STRING","CURLOPT_HEADER",34],["T_WHITESPACE","          ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_LNUMBER","0",34],",",["T_WHITESPACE","\n\t\t\t",34],["T_STRING","CURLOPT_URL",35],["T_WHITESPACE","             ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","url",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_VARIABLE","$method",35],",",["T_WHITESPACE","\n\t\t\t",35],["T_STRING","CURLOPT_USERAGENT",36],["T_WHITESPACE","       ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'OpenBay Pro for Amazon\/Opencart'",36],",",["T_WHITESPACE","\n\t\t\t",36],["T_STRING","CURLOPT_FRESH_CONNECT",37],["T_WHITESPACE","   ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],",",["T_WHITESPACE","\n\t\t\t",37],["T_STRING","CURLOPT_RETURNTRANSFER",38],["T_WHITESPACE","  ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_LNUMBER","1",38],",",["T_WHITESPACE","\n\t\t\t",38],["T_STRING","CURLOPT_FORBID_REUSE",39],["T_WHITESPACE","    ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_LNUMBER","1",39],",",["T_WHITESPACE","\n\t\t\t",39],["T_STRING","CURLOPT_TIMEOUT",40],["T_WHITESPACE","         ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_LNUMBER","30",40],",",["T_WHITESPACE","\n\t\t\t",40],["T_STRING","CURLOPT_SSL_VERIFYPEER",41],["T_WHITESPACE","  ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_LNUMBER","0",41],",",["T_WHITESPACE","\n\t\t\t",41],["T_STRING","CURLOPT_SSL_VERIFYHOST",42],["T_WHITESPACE","  ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","0",42],",",["T_WHITESPACE","\n\t\t\t",42],["T_STRING","CURLOPT_POSTFIELDS",43],["T_WHITESPACE","      ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'token='",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","token",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'&data='",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_STRING","rawurlencode",43],"(",["T_VARIABLE","$crypt",43],")",["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'&opencart_version='",43],["T_WHITESPACE"," ",43],".",["T_WHITESPACE"," ",43],["T_STRING","VERSION",43],",",["T_WHITESPACE","\n\t\t",43],")",";",["T_WHITESPACE","\n\t\t",44],["T_VARIABLE","$ch",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","curl_init",45],"(",")",";",["T_WHITESPACE","\n\n\t\t",45],["T_STRING","curl_setopt_array",47],"(",["T_VARIABLE","$ch",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$defaults",47],")",";",["T_WHITESPACE","\n\n\t\t",47],["T_VARIABLE","$response",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","curl_exec",49],"(",["T_VARIABLE","$ch",49],")",";",["T_WHITESPACE","\n\n\t\t",49],["T_STRING","curl_close",51],"(",["T_VARIABLE","$ch",51],")",";",["T_WHITESPACE","\n\n\t\t",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$response",53],";",["T_WHITESPACE","\n\t",53],"}",["T_WHITESPACE","\n\n\t",54],["T_PUBLIC","public",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","callNoResponse",56],"(",["T_VARIABLE","$method",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$data",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",",",["T_WHITESPACE"," ",56],["T_VARIABLE","$is_json",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","true",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$is_json",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n\t\t\t",57],["T_VARIABLE","$arg_string",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","json_encode",58],"(",["T_VARIABLE","$data",58],")",";",["T_WHITESPACE","\n\t\t",58],"}",["T_WHITESPACE"," ",59],["T_ELSE","else",59],["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$arg_string",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$data",60],";",["T_WHITESPACE","\n\t\t",60],"}",["T_WHITESPACE","\n\n\t\t",61],["T_VARIABLE","$crypt",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","encryptArgs",63],"(",["T_VARIABLE","$arg_string",63],")",";",["T_WHITESPACE","\n\n\t\t",63],["T_VARIABLE","$defaults",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n\t\t\t",65],["T_STRING","CURLOPT_POST",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_LNUMBER","1",66],",",["T_WHITESPACE","\n\t\t\t",66],["T_STRING","CURLOPT_HEADER",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_LNUMBER","0",67],",",["T_WHITESPACE","\n\t\t\t",67],["T_STRING","CURLOPT_URL",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","url",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$method",68],",",["T_WHITESPACE","\n\t\t\t",68],["T_STRING","CURLOPT_USERAGENT",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'OpenBay Pro for Amazon\/Opencart'",69],",",["T_WHITESPACE","\n\t\t\t",69],["T_STRING","CURLOPT_FRESH_CONNECT",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_LNUMBER","1",70],",",["T_WHITESPACE","\n\t\t\t",70],["T_STRING","CURLOPT_RETURNTRANSFER",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],",",["T_WHITESPACE","\n\t\t\t",71],["T_STRING","CURLOPT_FORBID_REUSE",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_LNUMBER","1",72],",",["T_WHITESPACE","\n\t\t\t",72],["T_STRING","CURLOPT_TIMEOUT",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","2",73],",",["T_WHITESPACE","\n\t\t\t",73],["T_STRING","CURLOPT_SSL_VERIFYPEER",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],",",["T_WHITESPACE","\n\t\t\t",74],["T_STRING","CURLOPT_SSL_VERIFYHOST",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_LNUMBER","0",75],",",["T_WHITESPACE","\n\t\t\t",75],["T_STRING","CURLOPT_POSTFIELDS",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'token='",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","token",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'&data='",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_STRING","rawurlencode",76],"(",["T_VARIABLE","$crypt",76],")",["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'&opencart_version='",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_STRING","VERSION",76],",",["T_WHITESPACE","\n\t\t",76],")",";",["T_WHITESPACE","\n\t\t",77],["T_VARIABLE","$ch",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","curl_init",78],"(",")",";",["T_WHITESPACE","\n\n\t\t",78],["T_STRING","curl_setopt_array",80],"(",["T_VARIABLE","$ch",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$defaults",80],")",";",["T_WHITESPACE","\n\n\t\t",80],["T_STRING","curl_exec",82],"(",["T_VARIABLE","$ch",82],")",";",["T_WHITESPACE","\n\n\t\t",82],["T_STRING","curl_close",84],"(",["T_VARIABLE","$ch",84],")",";",["T_WHITESPACE","\n\t",84],"}",["T_WHITESPACE","\n\n\t",85],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","encryptArgs",87],"(",["T_VARIABLE","$data",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t",87],["T_VARIABLE","$token",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","openbay",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","pbkdf2",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","enc1",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","enc2",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","1000",88],",",["T_WHITESPACE"," ",88],["T_LNUMBER","32",88],")",";",["T_WHITESPACE","\n\t\t",88],["T_VARIABLE","$crypt",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","openbay",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","encrypt",89],"(",["T_VARIABLE","$data",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$token",89],",",["T_WHITESPACE"," ",89],["T_STRING","true",89],")",";",["T_WHITESPACE","\n\n\t\t",89],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$crypt",91],";",["T_WHITESPACE","\n\t",91],"}",["T_WHITESPACE","\n\n\t",92],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","decryptArgs",94],"(",["T_VARIABLE","$crypt",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$is_base_64",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","true",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n\t\t",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$is_base_64",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t\t",95],["T_VARIABLE","$crypt",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","base64_decode",96],"(",["T_VARIABLE","$crypt",96],",",["T_WHITESPACE"," ",96],["T_STRING","true",96],")",";",["T_WHITESPACE","\n\t\t\t",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_VARIABLE","$crypt",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n\t\t\t\t",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_STRING","false",98],";",["T_WHITESPACE","\n\t\t\t",98],"}",["T_WHITESPACE","\n\t\t",99],"}",["T_WHITESPACE","\n\n\t\t",100],["T_VARIABLE","$token",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","openbay",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","pbkdf2",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","enc1",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","enc2",102],",",["T_WHITESPACE"," ",102],["T_LNUMBER","1000",102],",",["T_WHITESPACE"," ",102],["T_LNUMBER","32",102],")",";",["T_WHITESPACE","\n\t\t",102],["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","openbay",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","decrypt",103],"(",["T_VARIABLE","$crypt",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$token",103],")",";",["T_WHITESPACE","\n\n\t\t",103],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$data",105],";",["T_WHITESPACE","\n\t",105],"}",["T_WHITESPACE","\n\n\t",106],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getServer",108],"(",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","url",109],";",["T_WHITESPACE","\n\t",109],"}",["T_WHITESPACE","\n\n\t",110],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","productUpdateListen",112],"(",["T_VARIABLE","$product_id",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$data",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t\t",112],["T_VARIABLE","$logger",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_NS_SEPARATOR","\\",113],["T_STRING","Log",113],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_stocks.log'",113],")",";",["T_WHITESPACE","\n\t\t",113],["T_VARIABLE","$logger",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","write",114],"(",["T_CONSTANT_ENCAPSED_STRING","'productUpdateListen(), product ID: '",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$product_id",114],")",";",["T_WHITESPACE","\n\n\t\t",114],["T_VARIABLE","$product",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","db",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","query",116],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM `\"",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_STRING","DB_PREFIX",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","\"product` WHERE `product_id` = '\"",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_INT_CAST","(int)",116],["T_VARIABLE","$product_id",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",116],")",["T_OBJECT_OPERATOR","->",116],["T_STRING","row",116],";",["T_WHITESPACE","\n\n\t\t",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","openbay",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","addonLoad",118],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",118],")",["T_WHITESPACE"," ",118],["T_BOOLEAN_AND","&&",118],["T_WHITESPACE"," ",118],"(",["T_ISSET","isset",118],"(",["T_VARIABLE","$product",118],"[",["T_CONSTANT_ENCAPSED_STRING","'has_option'",118],"]",")",["T_WHITESPACE"," ",118],["T_BOOLEAN_AND","&&",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$product",118],"[",["T_CONSTANT_ENCAPSED_STRING","'has_option'",118],"]",["T_WHITESPACE"," ",118],["T_IS_EQUAL","==",118],["T_WHITESPACE"," ",118],["T_LNUMBER","1",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n\t\t\t",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","load",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","model",119],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",119],")",";",["T_WHITESPACE","\n\t\t\t",119],["T_VARIABLE","$logger",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","write",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Variant item'",120],")",";",["T_WHITESPACE","\n\n\t\t\t",120],["T_VARIABLE","$quantity_data",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",122],["T_COMMENT","\/\/ check if post data['variant'], if not then call db to get variants\n",124],["T_WHITESPACE","\t\t\t",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_ISSET","isset",125],"(",["T_VARIABLE","$data",125],"[",["T_CONSTANT_ENCAPSED_STRING","'variant'",125],"]",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n\t\t\t\t",125],["T_VARIABLE","$variants",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","model_extension_module_openstock",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getVariants",126],"(",["T_VARIABLE","$product_id",126],")",";",["T_WHITESPACE","\n\t\t\t",126],"}",["T_WHITESPACE"," ",127],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n\t\t\t\t",127],["T_VARIABLE","$variants",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'variant'",128],"]",";",["T_WHITESPACE","\n\t\t\t",128],"}",["T_WHITESPACE","\n\n\t\t\t",129],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$variants",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$variant",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\t\t\t\t",131],["T_VARIABLE","$amazon_sku_rows",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","db",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","query",132],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `amazon_sku` FROM `\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_STRING","DB_PREFIX",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = '\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_INT_CAST","(int)",132],["T_VARIABLE","$product_id",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","db",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","escape",132],"(",["T_VARIABLE","$variant",132],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",132],"]",")",["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"'\"",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","rows",132],";",["T_WHITESPACE","\n\n\t\t\t\t",132],["T_FOREACH","foreach",134],"(",["T_VARIABLE","$amazon_sku_rows",134],["T_WHITESPACE"," ",134],["T_AS","as",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$amazon_sku_row",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n\t\t\t\t\t",134],["T_VARIABLE","$quantity_data",135],"[",["T_VARIABLE","$amazon_sku_row",135],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",135],"]","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$variant",135],"[",["T_CONSTANT_ENCAPSED_STRING","'stock'",135],"]",";",["T_WHITESPACE","\n\t\t\t\t",135],"}",["T_WHITESPACE","\n\t\t\t",136],"}",["T_WHITESPACE","\n\n\t\t\t",137],["T_IF","if",139],"(","!",["T_EMPTY","empty",139],"(",["T_VARIABLE","$quantity_data",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n\t\t\t\t",139],["T_VARIABLE","$logger",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","write",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Updating with: '",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_STRING","print_r",140],"(",["T_VARIABLE","$quantity_data",140],",",["T_WHITESPACE"," ",140],["T_STRING","true",140],")",")",";",["T_WHITESPACE","\n\t\t\t\t",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","updateQuantities",141],"(",["T_VARIABLE","$quantity_data",141],")",";",["T_WHITESPACE","\n\t\t\t",141],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n\t\t\t\t",142],["T_VARIABLE","$logger",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","write",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Not required.'",143],")",";",["T_WHITESPACE","\n\t\t\t",143],"}",["T_WHITESPACE","\n\t\t",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n\t\t\t",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","putStockUpdateBulk",146],"(",["T_ARRAY","array",146],"(",["T_VARIABLE","$product_id",146],")",")",";",["T_WHITESPACE","\n\t\t",146],"}",["T_WHITESPACE","\n\n\t\t",147],["T_VARIABLE","$logger",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","write",149],"(",["T_CONSTANT_ENCAPSED_STRING","'productUpdateListen() - finished'",149],")",";",["T_WHITESPACE","\n\t",149],"}",["T_WHITESPACE","\n\n\t",150],["T_PUBLIC","public",152],["T_WHITESPACE"," ",152],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","bulkUpdateOrders",152],"(",["T_VARIABLE","$orders",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n\t\t",152],["T_COMMENT","\/\/ Is the module enabled and called from admin?\n",153],["T_WHITESPACE","\t\t",154],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","config",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","get",154],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_status'",154],")",["T_WHITESPACE"," ",154],["T_IS_NOT_EQUAL","!=",154],["T_WHITESPACE"," ",154],["T_LNUMBER","1",154],["T_WHITESPACE"," ",154],["T_BOOLEAN_OR","||",154],["T_WHITESPACE"," ",154],"!",["T_STRING","defined",154],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTPS_CATALOG'",154],")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n\t\t\t",154],["T_RETURN","return",155],";",["T_WHITESPACE","\n\t\t",155],"}",["T_WHITESPACE","\n\t\t",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","load",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","model",157],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/amazon'",157],")",";",["T_WHITESPACE","\n\n\t\t",157],["T_VARIABLE","$log",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_NEW","new",159],["T_WHITESPACE"," ",159],["T_NS_SEPARATOR","\\",159],["T_STRING","Log",159],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon.log'",159],")",";",["T_WHITESPACE","\n\t\t",159],["T_VARIABLE","$log",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","write",160],"(",["T_CONSTANT_ENCAPSED_STRING","'Called bulkUpdateOrders method'",160],")",";",["T_WHITESPACE","\n\n\t\t",160],["T_VARIABLE","$request",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_WHITESPACE","\n\t\t\t",162],["T_CONSTANT_ENCAPSED_STRING","'orders'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",",",["T_WHITESPACE","\n\t\t",163],")",";",["T_WHITESPACE","\n\n\t\t",164],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$orders",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$order",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t\t",166],["T_VARIABLE","$amazon_order",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getOrder",167],"(",["T_VARIABLE","$order",167],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",167],"]",")",";",["T_WHITESPACE","\n\t\t\t",167],["T_VARIABLE","$amazon_order_products",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","model_extension_openbay_amazon",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getAmazonOrderedProducts",168],"(",["T_VARIABLE","$order",168],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",168],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",168],["T_VARIABLE","$products",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",170],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$amazon_order_products",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$amazon_order_product",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n\t\t\t\t",172],["T_VARIABLE","$products",173],"[","]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_WHITESPACE","\n\t\t\t\t\t",173],["T_CONSTANT_ENCAPSED_STRING","'amazon_order_item_id'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$amazon_order_product",174],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_item_id'",174],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",174],["T_CONSTANT_ENCAPSED_STRING","'quantity'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$amazon_order_product",175],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",175],"]",",",["T_WHITESPACE","\n\t\t\t\t",175],")",";",["T_WHITESPACE","\n\t\t\t",176],"}",["T_WHITESPACE","\n\n\t\t\t",177],["T_VARIABLE","$order_info",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_WHITESPACE","\n\t\t\t\t",179],["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$amazon_order",180],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",180],"]",",",["T_WHITESPACE","\n\t\t\t\t",180],["T_CONSTANT_ENCAPSED_STRING","'status'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$order",181],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",181],"]",",",["T_WHITESPACE","\n\t\t\t\t",181],["T_CONSTANT_ENCAPSED_STRING","'products'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$products",182],",",["T_WHITESPACE","\n\t\t\t",182],")",";",["T_WHITESPACE","\n\n\t\t\t",183],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_VARIABLE","$order",185],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",185],"]",["T_WHITESPACE"," ",185],["T_IS_EQUAL","==",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'shipped'",185],["T_WHITESPACE"," ",185],["T_BOOLEAN_AND","&&",185],["T_WHITESPACE"," ",185],"!",["T_EMPTY","empty",185],"(",["T_VARIABLE","$order",185],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier'",185],"]",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n\t\t\t\t",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_VARIABLE","$order",186],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier_from_list'",186],"]",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n\t\t\t\t\t",186],["T_VARIABLE","$order_info",187],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier_id'",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$order",187],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier'",187],"]",";",["T_WHITESPACE","\n\t\t\t\t",187],"}",["T_WHITESPACE"," ",188],["T_ELSE","else",188],["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n\t\t\t\t\t",188],["T_VARIABLE","$order_info",189],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier_name'",189],"]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$order",189],"[",["T_CONSTANT_ENCAPSED_STRING","'carrier'",189],"]",";",["T_WHITESPACE","\n\t\t\t\t",189],"}",["T_WHITESPACE","\n\n\t\t\t\t",190],["T_VARIABLE","$order_info",192],"[",["T_CONSTANT_ENCAPSED_STRING","'tracking'",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$order",192],"[",["T_CONSTANT_ENCAPSED_STRING","'tracking'",192],"]",";",["T_WHITESPACE","\n\t\t\t",192],"}",["T_WHITESPACE","\n\n\t\t\t",193],["T_VARIABLE","$request",195],"[",["T_CONSTANT_ENCAPSED_STRING","'orders'",195],"]","[","]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$order_info",195],";",["T_WHITESPACE","\n\t\t",195],"}",["T_WHITESPACE","\n\n\t\t",196],["T_VARIABLE","$log",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","write",198],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/bulkUpdate call: '",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_STRING","print_r",198],"(",["T_VARIABLE","$request",198],",",["T_WHITESPACE"," ",198],["T_LNUMBER","1",198],")",")",";",["T_WHITESPACE","\n\n\t\t",198],["T_VARIABLE","$response",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","call",200],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/bulkUpdate'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$request",200],")",";",["T_WHITESPACE","\n\n\t\t",200],["T_VARIABLE","$log",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","write",202],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/bulkUpdate response: '",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$response",202],")",";",["T_WHITESPACE","\n\t",202],"}",["T_WHITESPACE","\n\n\t",203],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","updateOrder",205],"(",["T_VARIABLE","$order_id",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$order_status_string",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$courier_id",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","''",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$courier_from_list",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","true",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$tracking_no",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","''",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n\n\t\t",205],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","config",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_status'",207],")",["T_WHITESPACE"," ",207],["T_IS_NOT_EQUAL","!=",207],["T_WHITESPACE"," ",207],["T_LNUMBER","1",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\t\t\t",207],["T_RETURN","return",208],";",["T_WHITESPACE","\n\t\t",208],"}",["T_WHITESPACE","\n\n\t\t",209],["T_COMMENT","\/* Is called from admin? *\/",211],["T_WHITESPACE","\n\t\t",211],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_STRING","defined",212],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTPS_CATALOG'",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n\t\t\t",212],["T_RETURN","return",213],";",["T_WHITESPACE","\n\t\t",213],"}",["T_WHITESPACE","\n\n\t\t",214],["T_VARIABLE","$amazon_order",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getOrder",216],"(",["T_VARIABLE","$order_id",216],")",";",["T_WHITESPACE","\n\n\t\t",216],["T_IF","if",218],"(","!",["T_VARIABLE","$amazon_order",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t",218],["T_RETURN","return",219],";",["T_WHITESPACE","\n\t\t",219],"}",["T_WHITESPACE","\n\n\t\t",220],["T_VARIABLE","$amazon_order_id",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$amazon_order",222],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",222],"]",";",["T_WHITESPACE","\n\n\t\t",222],["T_VARIABLE","$log",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_NEW","new",224],["T_WHITESPACE"," ",224],["T_NS_SEPARATOR","\\",224],["T_STRING","Log",224],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon.log'",224],")",";",["T_WHITESPACE","\n\t\t",224],["T_VARIABLE","$log",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","write",225],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Order's ",225],["T_VARIABLE","$amazon_order_id",225],["T_ENCAPSED_AND_WHITESPACE"," status changed to ",225],["T_VARIABLE","$order_status_string",225],"\"",")",";",["T_WHITESPACE","\n\n\t\t",225],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","load",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","model",227],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/amazon'",227],")",";",["T_WHITESPACE","\n\t\t",227],["T_VARIABLE","$amazon_order_products",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","model_extension_openbay_amazon",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getAmazonOrderedProducts",228],"(",["T_VARIABLE","$order_id",228],")",";",["T_WHITESPACE","\n\n\t\t",228],["T_VARIABLE","$request_node",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_NEW","new",230],["T_WHITESPACE"," ",230],["T_NS_SEPARATOR","\\",230],["T_STRING","SimpleXMLElement",230],"(",["T_CONSTANT_ENCAPSED_STRING","'<Request\/>'",230],")",";",["T_WHITESPACE","\n\n\t\t",230],["T_VARIABLE","$request_node",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","addChild",232],"(",["T_CONSTANT_ENCAPSED_STRING","'AmazonOrderId'",232],",",["T_WHITESPACE"," ",232],["T_VARIABLE","$amazon_order_id",232],")",";",["T_WHITESPACE","\n\t\t",232],["T_VARIABLE","$request_node",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","addChild",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Status'",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$order_status_string",233],")",";",["T_WHITESPACE","\n\n\t\t",233],["T_IF","if",235],"(","!",["T_EMPTY","empty",235],"(",["T_VARIABLE","$courier_id",235],")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t",235],["T_IF","if",236],"(",["T_VARIABLE","$courier_from_list",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n\t\t\t\t",236],["T_VARIABLE","$request_node",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addChild",237],"(",["T_CONSTANT_ENCAPSED_STRING","'CourierId'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$courier_id",237],")",";",["T_WHITESPACE","\n\t\t\t",237],"}",["T_WHITESPACE"," ",238],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n\t\t\t\t",238],["T_VARIABLE","$request_node",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addChild",239],"(",["T_CONSTANT_ENCAPSED_STRING","'CourierOther'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$courier_id",239],")",";",["T_WHITESPACE","\n\t\t\t",239],"}",["T_WHITESPACE","\n\t\t\t",240],["T_VARIABLE","$request_node",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","addChild",241],"(",["T_CONSTANT_ENCAPSED_STRING","'TrackingNo'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$tracking_no",241],")",";",["T_WHITESPACE","\n\t\t",241],"}",["T_WHITESPACE","\n\n\t\t",242],["T_VARIABLE","$order_items_node",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$request_node",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","addChild",244],"(",["T_CONSTANT_ENCAPSED_STRING","'OrderItems'",244],")",";",["T_WHITESPACE","\n\n\t\t",244],["T_FOREACH","foreach",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$amazon_order_products",246],["T_WHITESPACE"," ",246],["T_AS","as",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$product",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n\t\t\t",246],["T_VARIABLE","$new_order_item",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$order_items_node",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","addChild",247],"(",["T_CONSTANT_ENCAPSED_STRING","'OrderItem'",247],")",";",["T_WHITESPACE","\n\t\t\t",247],["T_VARIABLE","$new_order_item",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addChild",248],"(",["T_CONSTANT_ENCAPSED_STRING","'ItemId'",248],",",["T_WHITESPACE"," ",248],["T_STRING","htmlspecialchars",248],"(",["T_VARIABLE","$product",248],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_item_id'",248],"]",")",")",";",["T_WHITESPACE","\n\t\t\t",248],["T_VARIABLE","$new_order_item",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","addChild",249],"(",["T_CONSTANT_ENCAPSED_STRING","'Quantity'",249],",",["T_WHITESPACE"," ",249],["T_INT_CAST","(int)",249],["T_VARIABLE","$product",249],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",249],"]",")",";",["T_WHITESPACE","\n\t\t",249],"}",["T_WHITESPACE","\n\n\t\t",250],["T_VARIABLE","$doc",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_NS_SEPARATOR","\\",252],["T_STRING","DOMDocument",252],"(",["T_CONSTANT_ENCAPSED_STRING","'1.0'",252],")",";",["T_WHITESPACE","\n\t\t",252],["T_VARIABLE","$doc",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","preserveWhiteSpace",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_STRING","false",253],";",["T_WHITESPACE","\n\t\t",253],["T_VARIABLE","$doc",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","loadXML",254],"(",["T_VARIABLE","$request_node",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","asXML",254],"(",")",")",";",["T_WHITESPACE","\n\t\t",254],["T_VARIABLE","$doc",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","formatOutput",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_STRING","true",255],";",["T_WHITESPACE","\n\n\t\t",255],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","model_extension_openbay_amazon",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","updateAmazonOrderTracking",257],"(",["T_VARIABLE","$order_id",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$courier_id",257],",",["T_WHITESPACE"," ",257],["T_VARIABLE","$courier_from_list",257],",",["T_WHITESPACE"," ",257],"!",["T_EMPTY","empty",257],"(",["T_VARIABLE","$courier_id",257],")",["T_WHITESPACE"," ",257],"?",["T_WHITESPACE"," ",257],["T_VARIABLE","$tracking_no",257],["T_WHITESPACE"," ",257],":",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","''",257],")",";",["T_WHITESPACE","\n\t\t",257],["T_VARIABLE","$log",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","write",258],"(",["T_CONSTANT_ENCAPSED_STRING","'Request: '",258],["T_WHITESPACE"," ",258],".",["T_WHITESPACE"," ",258],["T_VARIABLE","$doc",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","saveXML",258],"(",")",")",";",["T_WHITESPACE","\n\t\t",258],["T_VARIABLE","$response",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","call",259],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/update2'",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$doc",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","saveXML",259],"(",")",",",["T_WHITESPACE"," ",259],["T_STRING","false",259],")",";",["T_WHITESPACE","\n\t\t",259],["T_VARIABLE","$log",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","write",260],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Response for Order's status update: ",260],["T_VARIABLE","$response",260],"\"",")",";",["T_WHITESPACE","\n\t",260],"}",["T_WHITESPACE","\n\n\t",261],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","getCategoryTemplates",263],"(",")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n\t\t",263],["T_VARIABLE","$result",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","call",264],"(",["T_CONSTANT_ENCAPSED_STRING","\"productv2\/RequestTemplateList\"",264],")",";",["T_WHITESPACE","\n\t\t",264],["T_IF","if",265],"(",["T_ISSET","isset",265],"(",["T_VARIABLE","$result",265],")",")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n\t\t\t",265],["T_RETURN","return",266],["T_WHITESPACE"," ",266],["T_ARRAY_CAST","(array)",266],["T_STRING","json_decode",266],"(",["T_VARIABLE","$result",266],")",";",["T_WHITESPACE","\n\t\t",266],"}",["T_WHITESPACE"," ",267],["T_ELSE","else",267],["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n\t\t\t",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",")",";",["T_WHITESPACE","\n\t\t",268],"}",["T_WHITESPACE","\n\t",269],"}",["T_WHITESPACE","\n\n\t",270],["T_PUBLIC","public",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","registerInsertion",272],"(",["T_VARIABLE","$data",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n\t\t",272],["T_VARIABLE","$result",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","call",273],"(",["T_CONSTANT_ENCAPSED_STRING","\"productv2\/RegisterInsertionRequest\"",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$data",273],")",";",["T_WHITESPACE","\n\t\t",273],["T_IF","if",274],"(",["T_ISSET","isset",274],"(",["T_VARIABLE","$result",274],")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\t\t\t",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_ARRAY_CAST","(array)",275],["T_STRING","json_decode",275],"(",["T_VARIABLE","$result",275],")",";",["T_WHITESPACE","\n\t\t",275],"}",["T_WHITESPACE"," ",276],["T_ELSE","else",276],["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n\t\t\t",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",")",";",["T_WHITESPACE","\n\t\t",277],"}",["T_WHITESPACE","\n\t",278],"}",["T_WHITESPACE","\n\n\t",279],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","insertProduct",281],"(",["T_VARIABLE","$data",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n\t\t",281],["T_VARIABLE","$result",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","call",282],"(",["T_CONSTANT_ENCAPSED_STRING","\"productv2\/InsertProductRequest\"",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$data",282],")",";",["T_WHITESPACE","\n\t\t",282],["T_IF","if",283],"(",["T_ISSET","isset",283],"(",["T_VARIABLE","$result",283],")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n\t\t\t",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_ARRAY_CAST","(array)",284],["T_STRING","json_decode",284],"(",["T_VARIABLE","$result",284],")",";",["T_WHITESPACE","\n\t\t",284],"}",["T_WHITESPACE"," ",285],["T_ELSE","else",285],["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n\t\t\t",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",")",";",["T_WHITESPACE","\n\t\t",286],"}",["T_WHITESPACE","\n\t",287],"}",["T_WHITESPACE","\n\n\t",288],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","updateQuantities",290],"(",["T_VARIABLE","$data",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n\t\t",290],["T_VARIABLE","$result",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","call",291],"(",["T_CONSTANT_ENCAPSED_STRING","\"product\/UpdateQuantityRequest\"",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$data",291],")",";",["T_WHITESPACE","\n\t\t",291],["T_IF","if",292],"(",["T_ISSET","isset",292],"(",["T_VARIABLE","$result",292],")",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t",292],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_ARRAY_CAST","(array)",293],["T_STRING","json_decode",293],"(",["T_VARIABLE","$result",293],")",";",["T_WHITESPACE","\n\t\t",293],"}",["T_WHITESPACE"," ",294],["T_ELSE","else",294],["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n\t\t\t",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",")",";",["T_WHITESPACE","\n\t\t",295],"}",["T_WHITESPACE","\n\t",296],"}",["T_WHITESPACE","\n\n\t",297],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","getStockUpdatesStatus",299],"(",["T_VARIABLE","$data",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n\t\t",299],["T_VARIABLE","$result",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","call",300],"(",["T_CONSTANT_ENCAPSED_STRING","\"status\/StockUpdates\"",300],",",["T_WHITESPACE"," ",300],["T_VARIABLE","$data",300],")",";",["T_WHITESPACE","\n\t\t",300],["T_IF","if",301],"(",["T_ISSET","isset",301],"(",["T_VARIABLE","$result",301],")",")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n\t\t\t",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$result",302],";",["T_WHITESPACE","\n\t\t",302],"}",["T_WHITESPACE"," ",303],["T_ELSE","else",303],["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n\t\t\t",303],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","false",304],";",["T_WHITESPACE","\n\t\t",304],"}",["T_WHITESPACE","\n\t",305],"}",["T_WHITESPACE","\n\n\t",306],["T_PUBLIC","public",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","putStockUpdateBulk",308],"(",["T_VARIABLE","$product_id_array",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$end_inactive",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","false",308],")","{",["T_WHITESPACE","\n\t\t",308],["T_VARIABLE","$logger",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_NEW","new",309],["T_WHITESPACE"," ",309],["T_NS_SEPARATOR","\\",309],["T_STRING","Log",309],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_stocks.log'",309],")",";",["T_WHITESPACE","\n\t\t",309],["T_VARIABLE","$logger",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","write",310],"(",["T_CONSTANT_ENCAPSED_STRING","'putStockUpdateBulk(), End inactive: '",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_INT_CAST","(int)",310],["T_VARIABLE","$end_inactive",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","', ids: '",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_STRING","json_encode",310],"(",["T_VARIABLE","$product_id_array",310],")",")",";",["T_WHITESPACE","\n\n\t\t",310],["T_VARIABLE","$quantity_data",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",")",";",["T_WHITESPACE","\n\n\t\t",312],["T_FOREACH","foreach",314],"(",["T_VARIABLE","$product_id_array",314],["T_WHITESPACE"," ",314],["T_AS","as",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$product_id",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n\t\t\t",314],["T_VARIABLE","$linked_skus",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","db",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","query",315],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `amazon_sku` FROM `\"",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_STRING","DB_PREFIX",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = '\"",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_INT_CAST","(int)",315],["T_VARIABLE","$product_id",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","\"'\"",315],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","rows",315],";",["T_WHITESPACE","\n\n\t\t\t",315],["T_IF","if",317],["T_WHITESPACE"," ",317],"(","!",["T_EMPTY","empty",317],"(",["T_VARIABLE","$linked_skus",317],")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n\t\t\t\t",317],["T_FOREACH","foreach",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$linked_skus",318],["T_WHITESPACE"," ",318],["T_AS","as",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$sku",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t\t\t\t",318],["T_VARIABLE","$product",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","db",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","query",319],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `quantity`, `status` FROM `\"",319],["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_STRING","DB_PREFIX",319],["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","\"product` WHERE `product_id` = '\"",319],["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_INT_CAST","(int)",319],["T_VARIABLE","$product_id",319],["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","\"'\"",319],")",["T_OBJECT_OPERATOR","->",319],["T_STRING","row",319],";",["T_WHITESPACE","\n\n\t\t\t\t\t",319],["T_IF","if",321],["T_WHITESPACE"," ",321],"(","!",["T_EMPTY","empty",321],"(",["T_VARIABLE","$product",321],")",")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$end_inactive",322],["T_WHITESPACE"," ",322],["T_BOOLEAN_AND","&&",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$product",322],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",322],"]",["T_WHITESPACE"," ",322],["T_IS_EQUAL","==",322],["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'0'",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",322],["T_VARIABLE","$quantity_data",323],"[",["T_VARIABLE","$sku",323],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",323],"]","]",["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_LNUMBER","0",323],";",["T_WHITESPACE","\n\t\t\t\t\t\t",323],"}",["T_WHITESPACE"," ",324],["T_ELSE","else",324],["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",324],["T_VARIABLE","$quantity_data",325],"[",["T_VARIABLE","$sku",325],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_sku'",325],"]","]",["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$product",325],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",325],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",325],"}",["T_WHITESPACE","\n\t\t\t\t\t",326],"}",["T_WHITESPACE","\n\t\t\t\t",327],"}",["T_WHITESPACE","\n\t\t\t",328],"}",["T_WHITESPACE"," ",329],["T_ELSE","else",329],["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n\t\t\t\t",329],["T_VARIABLE","$logger",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","write",330],"(",["T_CONSTANT_ENCAPSED_STRING","'No linked SKU'",330],")",";",["T_WHITESPACE","\n\t\t\t",330],"}",["T_WHITESPACE","\n\t\t",331],"}",["T_WHITESPACE","\n\n\t\t",332],["T_IF","if",334],"(","!",["T_EMPTY","empty",334],"(",["T_VARIABLE","$quantity_data",334],")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n\t\t\t",334],["T_VARIABLE","$logger",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","write",335],"(",["T_CONSTANT_ENCAPSED_STRING","'New Qty:'",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_STRING","print_r",335],"(",["T_VARIABLE","$quantity_data",335],",",["T_WHITESPACE"," ",335],["T_STRING","true",335],")",")",";",["T_WHITESPACE","\n\n\t\t\t",335],["T_VARIABLE","$response",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","updateQuantities",337],"(",["T_VARIABLE","$quantity_data",337],")",";",["T_WHITESPACE","\n\n\t\t\t",337],["T_VARIABLE","$logger",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","write",339],"(",["T_CONSTANT_ENCAPSED_STRING","'API Response: '",339],["T_WHITESPACE"," ",339],".",["T_WHITESPACE"," ",339],["T_STRING","print_r",339],"(",["T_VARIABLE","$response",339],",",["T_WHITESPACE"," ",339],["T_STRING","true",339],")",")",";",["T_WHITESPACE","\n\t\t",339],"}",["T_WHITESPACE"," ",340],["T_ELSE","else",340],["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n\t\t\t",340],["T_VARIABLE","$logger",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","write",341],"(",["T_CONSTANT_ENCAPSED_STRING","'No update needed'",341],")",";",["T_WHITESPACE","\n\t\t",341],"}",["T_WHITESPACE","\n\t",342],"}",["T_WHITESPACE","\n\n\t",343],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","getOrderdProducts",345],"(",["T_VARIABLE","$order_id",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n\t\t",345],["T_RETURN","return",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","db",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","query",346],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `op`.`product_id`, `p`.`quantity` as `quantity_left` FROM `\"",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_STRING","DB_PREFIX",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","\"order_product` as `op` LEFT JOIN `\"",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_STRING","DB_PREFIX",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","\"product` as `p` ON `p`.`product_id` = `op`.`product_id` WHERE `op`.`order_id` = '\"",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_INT_CAST","(int)",346],["T_VARIABLE","$order_id",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","\"'\"",346],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","rows",346],";",["T_WHITESPACE","\n\t",346],"}",["T_WHITESPACE","\n\n\t",347],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","validate",349],"(",")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n\t\t",349],["T_IF","if",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","config",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","get",350],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_status'",350],")",["T_WHITESPACE"," ",350],["T_IS_NOT_EQUAL","!=",350],["T_WHITESPACE"," ",350],["T_LNUMBER","0",350],["T_WHITESPACE"," ",350],["T_BOOLEAN_AND","&&",350],["T_WHITESPACE","\n\t\t\t",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","config",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","get",351],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_token'",351],")",["T_WHITESPACE"," ",351],["T_IS_NOT_EQUAL","!=",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","''",351],["T_WHITESPACE"," ",351],["T_BOOLEAN_AND","&&",351],["T_WHITESPACE","\n\t\t\t",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","config",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","get",352],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_enc_string1'",352],")",["T_WHITESPACE"," ",352],["T_IS_NOT_EQUAL","!=",352],["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","''",352],["T_WHITESPACE"," ",352],["T_BOOLEAN_AND","&&",352],["T_WHITESPACE","\n\t\t\t",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","config",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","get",353],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_enc_string2'",353],")",["T_WHITESPACE"," ",353],["T_IS_NOT_EQUAL","!=",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","''",353],")","{",["T_WHITESPACE","\n\t\t\t",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_STRING","true",354],";",["T_WHITESPACE","\n\t\t",354],"}",["T_WHITESPACE"," ",355],["T_ELSE","else",355],["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n\t\t\t",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_STRING","false",356],";",["T_WHITESPACE","\n\t\t",356],"}",["T_WHITESPACE","\n\t",357],"}",["T_WHITESPACE","\n\n\t",358],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","deleteProduct",360],"(",["T_VARIABLE","$product_id",360],")","{",["T_WHITESPACE","\n\t\t",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","db",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","query",361],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_STRING","DB_PREFIX",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = '\"",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_INT_CAST","(int)",361],["T_VARIABLE","$product_id",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","\"'\"",361],")",";",["T_WHITESPACE","\n\t",361],"}",["T_WHITESPACE","\n\n\t",362],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","orderDelete",364],"(",["T_VARIABLE","$order_id",364],")","{",["T_WHITESPACE","\n\t\t",364],["T_DOC_COMMENT","\/**\n\t\t * @todo\n\t\t *\/",365],["T_WHITESPACE","\n\t",367],"}",["T_WHITESPACE","\n\n\t",368],["T_PUBLIC","public",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","getOrder",370],"(",["T_VARIABLE","$order_id",370],")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n\t\t",370],["T_VARIABLE","$qry",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","db",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","query",371],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",371],["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_STRING","DB_PREFIX",371],["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` WHERE `order_id` = '\"",371],["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_INT_CAST","(int)",371],["T_VARIABLE","$order_id",371],["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",371],")",";",["T_WHITESPACE","\n\n\t\t",371],["T_IF","if",373],"(",["T_VARIABLE","$qry",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","num_rows",373],["T_WHITESPACE"," ",373],">",["T_WHITESPACE"," ",373],["T_LNUMBER","0",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n\t\t\t",373],["T_RETURN","return",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$qry",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","row",374],";",["T_WHITESPACE","\n\t\t",374],"}",["T_WHITESPACE"," ",375],["T_ELSE","else",375],["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n\t\t\t",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_STRING","false",376],";",["T_WHITESPACE","\n\t\t",376],"}",["T_WHITESPACE","\n\t",377],"}",["T_WHITESPACE","\n\n\t",378],["T_PUBLIC","public",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","getCarriers",380],"(",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n\t\t",380],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_ARRAY","array",381],"(",["T_WHITESPACE","\n\t\t\t",381],["T_CONSTANT_ENCAPSED_STRING","\"USPS\"",382],",",["T_WHITESPACE","\n\t\t\t",382],["T_CONSTANT_ENCAPSED_STRING","\"UPS\"",383],",",["T_WHITESPACE","\n\t\t\t",383],["T_CONSTANT_ENCAPSED_STRING","\"UPSMI\"",384],",",["T_WHITESPACE","\n\t\t\t",384],["T_CONSTANT_ENCAPSED_STRING","\"FedEx\"",385],",",["T_WHITESPACE","\n\t\t\t",385],["T_CONSTANT_ENCAPSED_STRING","\"DHL\"",386],",",["T_WHITESPACE","\n\t\t\t",386],["T_CONSTANT_ENCAPSED_STRING","\"Fastway\"",387],",",["T_WHITESPACE","\n\t\t\t",387],["T_CONSTANT_ENCAPSED_STRING","\"GLS\"",388],",",["T_WHITESPACE","\n\t\t\t",388],["T_CONSTANT_ENCAPSED_STRING","\"GO!\"",389],",",["T_WHITESPACE","\n\t\t\t",389],["T_CONSTANT_ENCAPSED_STRING","\"Hermes Logistik Gruppe\"",390],",",["T_WHITESPACE","\n\t\t\t",390],["T_CONSTANT_ENCAPSED_STRING","\"Royal Mail\"",391],",",["T_WHITESPACE","\n\t\t\t",391],["T_CONSTANT_ENCAPSED_STRING","\"Parcelforce\"",392],",",["T_WHITESPACE","\n\t\t\t",392],["T_CONSTANT_ENCAPSED_STRING","\"City Link\"",393],",",["T_WHITESPACE","\n\t\t\t",393],["T_CONSTANT_ENCAPSED_STRING","\"TNT\"",394],",",["T_WHITESPACE","\n\t\t\t",394],["T_CONSTANT_ENCAPSED_STRING","\"Target\"",395],",",["T_WHITESPACE","\n\t\t\t",395],["T_CONSTANT_ENCAPSED_STRING","\"SagawaExpress\"",396],",",["T_WHITESPACE","\n\t\t\t",396],["T_CONSTANT_ENCAPSED_STRING","\"NipponExpress\"",397],",",["T_WHITESPACE","\n\t\t\t",397],["T_CONSTANT_ENCAPSED_STRING","\"YamatoTransport\"",398],",",["T_WHITESPACE","\n\t\t\t",398],["T_CONSTANT_ENCAPSED_STRING","\"DHL Global Mail\"",399],",",["T_WHITESPACE","\n\t\t\t",399],["T_CONSTANT_ENCAPSED_STRING","\"UPS Mail Innovations\"",400],",",["T_WHITESPACE","\n\t\t\t",400],["T_CONSTANT_ENCAPSED_STRING","\"FedEx SmartPost\"",401],",",["T_WHITESPACE","\n\t\t\t",401],["T_CONSTANT_ENCAPSED_STRING","\"OSM\"",402],",",["T_WHITESPACE","\n\t\t\t",402],["T_CONSTANT_ENCAPSED_STRING","\"OnTrac\"",403],",",["T_WHITESPACE","\n\t\t\t",403],["T_CONSTANT_ENCAPSED_STRING","\"Streamlite\"",404],",",["T_WHITESPACE","\n\t\t\t",404],["T_CONSTANT_ENCAPSED_STRING","\"Newgistics\"",405],",",["T_WHITESPACE","\n\t\t\t",405],["T_CONSTANT_ENCAPSED_STRING","\"Canada Post\"",406],",",["T_WHITESPACE","\n\t\t\t",406],["T_CONSTANT_ENCAPSED_STRING","\"Blue Package\"",407],",",["T_WHITESPACE","\n\t\t\t",407],["T_CONSTANT_ENCAPSED_STRING","\"Chronopost\"",408],",",["T_WHITESPACE","\n\t\t\t",408],["T_CONSTANT_ENCAPSED_STRING","\"Deutsche Post\"",409],",",["T_WHITESPACE","\n\t\t\t",409],["T_CONSTANT_ENCAPSED_STRING","\"DPD\"",410],",",["T_WHITESPACE","\n\t\t\t",410],["T_CONSTANT_ENCAPSED_STRING","\"La Poste\"",411],",",["T_WHITESPACE","\n\t\t\t",411],["T_CONSTANT_ENCAPSED_STRING","\"Parcelnet\"",412],",",["T_WHITESPACE","\n\t\t\t",412],["T_CONSTANT_ENCAPSED_STRING","\"Poste Italiane\"",413],",",["T_WHITESPACE","\n\t\t\t",413],["T_CONSTANT_ENCAPSED_STRING","\"SDA\"",414],",",["T_WHITESPACE","\n\t\t\t",414],["T_CONSTANT_ENCAPSED_STRING","\"Smartmail\"",415],",",["T_WHITESPACE","\n\t\t\t",415],["T_CONSTANT_ENCAPSED_STRING","\"FEDEX_JP\"",416],",",["T_WHITESPACE","\n\t\t\t",416],["T_CONSTANT_ENCAPSED_STRING","\"JP_EXPRESS\"",417],",",["T_WHITESPACE","\n\t\t\t",417],["T_CONSTANT_ENCAPSED_STRING","\"NITTSU\"",418],",",["T_WHITESPACE","\n\t\t\t",418],["T_CONSTANT_ENCAPSED_STRING","\"SAGAWA\"",419],",",["T_WHITESPACE","\n\t\t\t",419],["T_CONSTANT_ENCAPSED_STRING","\"YAMATO\"",420],",",["T_WHITESPACE","\n\t\t\t",420],["T_CONSTANT_ENCAPSED_STRING","\"BlueDart\"",421],",",["T_WHITESPACE","\n\t\t\t",421],["T_CONSTANT_ENCAPSED_STRING","\"AFL\/Fedex\"",422],",",["T_WHITESPACE","\n\t\t\t",422],["T_CONSTANT_ENCAPSED_STRING","\"Aramex\"",423],",",["T_WHITESPACE","\n\t\t\t",423],["T_CONSTANT_ENCAPSED_STRING","\"India Post\"",424],",",["T_WHITESPACE","\n\t\t\t",424],["T_CONSTANT_ENCAPSED_STRING","\"Professional\"",425],",",["T_WHITESPACE","\n\t\t\t",425],["T_CONSTANT_ENCAPSED_STRING","\"DTDC\"",426],",",["T_WHITESPACE","\n\t\t\t",426],["T_CONSTANT_ENCAPSED_STRING","\"Overnite Express\"",427],",",["T_WHITESPACE","\n\t\t\t",427],["T_CONSTANT_ENCAPSED_STRING","\"First Flight\"",428],",",["T_WHITESPACE","\n\t\t\t",428],["T_CONSTANT_ENCAPSED_STRING","\"Delhivery\"",429],",",["T_WHITESPACE","\n\t\t\t",429],["T_CONSTANT_ENCAPSED_STRING","\"Lasership\"",430],",",["T_WHITESPACE","\n\t\t",430],")",";",["T_WHITESPACE","\n\t",431],"}",["T_WHITESPACE","\n\n\t",432],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","parseCategoryTemplate",434],"(",["T_VARIABLE","$xml",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n\t\t",434],["T_VARIABLE","$simplexml",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","null",435],";",["T_WHITESPACE","\n\n\t\t",435],["T_STRING","libxml_use_internal_errors",437],"(",["T_STRING","true",437],")",";",["T_WHITESPACE","\n\t\t",437],["T_IF","if",438],"(","(",["T_VARIABLE","$simplexml",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_STRING","simplexml_load_string",438],"(",["T_VARIABLE","$xml",438],")",")",["T_WHITESPACE"," ",438],["T_IS_EQUAL","==",438],["T_WHITESPACE"," ",438],["T_STRING","false",438],")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n\t\t\t",438],["T_RETURN","return",439],["T_WHITESPACE"," ",439],["T_STRING","false",439],";",["T_WHITESPACE","\n\t\t",439],"}",["T_WHITESPACE","\n\n\t\t",440],["T_VARIABLE","$category",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING_CAST","(string)",442],["T_VARIABLE","$simplexml",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","filename",442],";",["T_WHITESPACE","\n\n\t\t",442],["T_VARIABLE","$tabs",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_ARRAY","array",444],"(",")",";",["T_WHITESPACE","\n\t\t",444],["T_FOREACH","foreach",445],"(",["T_VARIABLE","$simplexml",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","tabs",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","tab",445],["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$tab",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n\t\t\t",445],["T_VARIABLE","$attributes",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$tab",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","attributes",446],"(",")",";",["T_WHITESPACE","\n\t\t\t",446],["T_VARIABLE","$tabs",447],"[","]",["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_ARRAY","array",447],"(",["T_WHITESPACE","\n\t\t\t\t",447],["T_CONSTANT_ENCAPSED_STRING","'id'",448],["T_WHITESPACE"," ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],["T_STRING_CAST","(string)",448],["T_VARIABLE","$attributes",448],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",448],"]",",",["T_WHITESPACE","\n\t\t\t\t",448],["T_CONSTANT_ENCAPSED_STRING","'name'",449],["T_WHITESPACE"," ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],["T_STRING_CAST","(string)",449],["T_VARIABLE","$tab",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","name",449],",",["T_WHITESPACE","\n\t\t\t",449],")",";",["T_WHITESPACE","\n\t\t",450],"}",["T_WHITESPACE","\n\n\t\t",451],["T_VARIABLE","$fields",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_ARRAY","array",453],"(",")",";",["T_WHITESPACE","\n\t\t",453],["T_VARIABLE","$field_types",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_ARRAY","array",454],"(",["T_CONSTANT_ENCAPSED_STRING","'required'",454],",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'desired'",454],",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'optional'",454],")",";",["T_WHITESPACE","\n\t\t",454],["T_FOREACH","foreach",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$field_types",455],["T_WHITESPACE"," ",455],["T_AS","as",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$type",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n\t\t\t",455],["T_FOREACH","foreach",456],["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$simplexml",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","fields",456],["T_OBJECT_OPERATOR","->",456],["T_VARIABLE","$type",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","field",456],["T_WHITESPACE"," ",456],["T_AS","as",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$field",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n\t\t\t\t",456],["T_VARIABLE","$attributes",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$field",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","attributes",457],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",457],["T_VARIABLE","$fields",458],"[","]",["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_ARRAY","array",458],"(",["T_WHITESPACE","\n\t\t\t\t\t",458],["T_CONSTANT_ENCAPSED_STRING","'name'",459],["T_WHITESPACE"," ",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_STRING_CAST","(string)",459],["T_VARIABLE","$attributes",459],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",459],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",459],["T_CONSTANT_ENCAPSED_STRING","'title'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_STRING_CAST","(string)",460],["T_VARIABLE","$field",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","title",460],",",["T_WHITESPACE","\n\t\t\t\t\t",460],["T_CONSTANT_ENCAPSED_STRING","'definition'",461],["T_WHITESPACE"," ",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_STRING_CAST","(string)",461],["T_VARIABLE","$field",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","definition",461],",",["T_WHITESPACE","\n\t\t\t\t\t",461],["T_CONSTANT_ENCAPSED_STRING","'accepted'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_ARRAY_CAST","(array)",462],["T_VARIABLE","$field",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","accepted",462],",",["T_WHITESPACE","\n\t\t\t\t\t",462],["T_CONSTANT_ENCAPSED_STRING","'type'",463],["T_WHITESPACE"," ",463],["T_DOUBLE_ARROW","=>",463],["T_WHITESPACE"," ",463],["T_STRING_CAST","(string)",463],["T_VARIABLE","$type",463],",",["T_WHITESPACE","\n\t\t\t\t\t",463],["T_CONSTANT_ENCAPSED_STRING","'child'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_STRING","false",464],",",["T_WHITESPACE","\n\t\t\t\t\t",464],["T_CONSTANT_ENCAPSED_STRING","'order'",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],"(",["T_ISSET","isset",465],"(",["T_VARIABLE","$attributes",465],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",465],"]",")",")",["T_WHITESPACE"," ",465],"?",["T_WHITESPACE"," ",465],["T_STRING_CAST","(string)",465],["T_VARIABLE","$attributes",465],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",465],"]",["T_WHITESPACE"," ",465],":",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","''",465],",",["T_WHITESPACE","\n\t\t\t\t\t",465],["T_CONSTANT_ENCAPSED_STRING","'tab'",466],["T_WHITESPACE"," ",466],["T_DOUBLE_ARROW","=>",466],["T_WHITESPACE"," ",466],["T_STRING_CAST","(string)",466],["T_VARIABLE","$attributes",466],"[",["T_CONSTANT_ENCAPSED_STRING","'tab'",466],"]",",",["T_WHITESPACE","\n\t\t\t\t",466],")",";",["T_WHITESPACE","\n\t\t\t",467],"}",["T_WHITESPACE","\n\t\t\t",468],["T_FOREACH","foreach",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$simplexml",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","fields",469],["T_OBJECT_OPERATOR","->",469],["T_VARIABLE","$type",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","childfield",469],["T_WHITESPACE"," ",469],["T_AS","as",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$field",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n\t\t\t\t",469],["T_VARIABLE","$attributes",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$field",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","attributes",470],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",470],["T_VARIABLE","$fields",471],"[","]",["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_ARRAY","array",471],"(",["T_WHITESPACE","\n\t\t\t\t\t",471],["T_CONSTANT_ENCAPSED_STRING","'name'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_STRING_CAST","(string)",472],["T_VARIABLE","$attributes",472],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",472],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",472],["T_CONSTANT_ENCAPSED_STRING","'title'",473],["T_WHITESPACE"," ",473],["T_DOUBLE_ARROW","=>",473],["T_WHITESPACE"," ",473],["T_STRING_CAST","(string)",473],["T_VARIABLE","$field",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","title",473],",",["T_WHITESPACE","\n\t\t\t\t\t",473],["T_CONSTANT_ENCAPSED_STRING","'definition'",474],["T_WHITESPACE"," ",474],["T_DOUBLE_ARROW","=>",474],["T_WHITESPACE"," ",474],["T_STRING_CAST","(string)",474],["T_VARIABLE","$field",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","definition",474],",",["T_WHITESPACE","\n\t\t\t\t\t",474],["T_CONSTANT_ENCAPSED_STRING","'accepted'",475],["T_WHITESPACE"," ",475],["T_DOUBLE_ARROW","=>",475],["T_WHITESPACE"," ",475],["T_ARRAY_CAST","(array)",475],["T_VARIABLE","$field",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","accepted",475],",",["T_WHITESPACE","\n\t\t\t\t\t",475],["T_CONSTANT_ENCAPSED_STRING","'type'",476],["T_WHITESPACE"," ",476],["T_DOUBLE_ARROW","=>",476],["T_WHITESPACE"," ",476],["T_STRING_CAST","(string)",476],["T_VARIABLE","$type",476],",",["T_WHITESPACE","\n\t\t\t\t\t",476],["T_CONSTANT_ENCAPSED_STRING","'child'",477],["T_WHITESPACE"," ",477],["T_DOUBLE_ARROW","=>",477],["T_WHITESPACE"," ",477],["T_STRING","true",477],",",["T_WHITESPACE","\n\t\t\t\t\t",477],["T_CONSTANT_ENCAPSED_STRING","'parent'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_ARRAY_CAST","(array)",478],["T_VARIABLE","$field",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","parent",478],",",["T_WHITESPACE","\n\t\t\t\t\t",478],["T_CONSTANT_ENCAPSED_STRING","'order'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],"(",["T_ISSET","isset",479],"(",["T_VARIABLE","$attributes",479],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",479],"]",")",")",["T_WHITESPACE"," ",479],"?",["T_WHITESPACE"," ",479],["T_STRING_CAST","(string)",479],["T_VARIABLE","$attributes",479],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",479],"]",["T_WHITESPACE"," ",479],":",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","''",479],",",["T_WHITESPACE","\n\t\t\t\t\t",479],["T_CONSTANT_ENCAPSED_STRING","'tab'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_STRING_CAST","(string)",480],["T_VARIABLE","$attributes",480],"[",["T_CONSTANT_ENCAPSED_STRING","'tab'",480],"]",",",["T_WHITESPACE","\n\t\t\t\t",480],")",";",["T_WHITESPACE","\n\t\t\t",481],"}",["T_WHITESPACE","\n\t\t",482],"}",["T_WHITESPACE","\n\n\t\t",483],["T_FOREACH","foreach",485],"(",["T_VARIABLE","$fields",485],["T_WHITESPACE"," ",485],["T_AS","as",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$index",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$field",485],")",["T_WHITESPACE"," ",485],"{",["T_WHITESPACE","\n\t\t\t",485],["T_VARIABLE","$fields",486],"[",["T_VARIABLE","$index",486],"]","[",["T_CONSTANT_ENCAPSED_STRING","'unordered_index'",486],"]",["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_VARIABLE","$index",486],";",["T_WHITESPACE","\n\t\t",486],"}",["T_WHITESPACE","\n\n\t\t",487],["T_STRING","usort",489],"(",["T_VARIABLE","$fields",489],",",["T_WHITESPACE"," ",489],["T_ARRAY","array",489],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay\\Amazon'",489],",",["T_CONSTANT_ENCAPSED_STRING","'compareFields'",489],")",")",";",["T_WHITESPACE","\n\n\t\t",489],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_ARRAY","array",491],"(",["T_WHITESPACE","\n\t\t\t",491],["T_CONSTANT_ENCAPSED_STRING","'category'",492],["T_WHITESPACE"," ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$category",492],",",["T_WHITESPACE","\n\t\t\t",492],["T_CONSTANT_ENCAPSED_STRING","'fields'",493],["T_WHITESPACE"," ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_VARIABLE","$fields",493],",",["T_WHITESPACE","\n\t\t\t",493],["T_CONSTANT_ENCAPSED_STRING","'tabs'",494],["T_WHITESPACE"," ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_VARIABLE","$tabs",494],",",["T_WHITESPACE","\n\t\t",494],")",";",["T_WHITESPACE","\n\t",495],"}",["T_WHITESPACE","\n\n\t",496],["T_PRIVATE","private",498],["T_WHITESPACE"," ",498],["T_STATIC","static",498],["T_WHITESPACE"," ",498],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","compareFields",498],"(",["T_VARIABLE","$field1",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$field2",498],")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n\t\t",498],["T_IF","if",499],"(",["T_VARIABLE","$field1",499],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",499],"]",["T_WHITESPACE"," ",499],["T_IS_EQUAL","==",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$field2",499],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",499],"]",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n\t\t\t",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$field1",500],"[",["T_CONSTANT_ENCAPSED_STRING","'unordered_index'",500],"]",["T_WHITESPACE"," ",500],"<",["T_WHITESPACE"," ",500],["T_VARIABLE","$field2",500],"[",["T_CONSTANT_ENCAPSED_STRING","'unordered_index'",500],"]",")",["T_WHITESPACE"," ",500],"?",["T_WHITESPACE"," ",500],"-",["T_LNUMBER","1",500],["T_WHITESPACE"," ",500],":",["T_WHITESPACE"," ",500],["T_LNUMBER","1",500],";",["T_WHITESPACE","\n\t\t",500],"}",["T_WHITESPACE"," ",501],["T_ELSE","else",501],["T_WHITESPACE"," ",501],["T_IF","if",501],"(","!",["T_EMPTY","empty",501],"(",["T_VARIABLE","$field1",501],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",501],"]",")",["T_WHITESPACE"," ",501],["T_BOOLEAN_AND","&&",501],["T_WHITESPACE"," ",501],["T_EMPTY","empty",501],"(",["T_VARIABLE","$field2",501],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",501],"]",")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n\t\t\t",501],["T_RETURN","return",502],["T_WHITESPACE"," ",502],"-",["T_LNUMBER","1",502],";",["T_WHITESPACE","\n\t\t",502],"}",["T_WHITESPACE"," ",503],["T_ELSE","else",503],["T_WHITESPACE"," ",503],["T_IF","if",503],"(","!",["T_EMPTY","empty",503],"(",["T_VARIABLE","$field2",503],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",503],"]",")",["T_WHITESPACE"," ",503],["T_BOOLEAN_AND","&&",503],["T_WHITESPACE"," ",503],["T_EMPTY","empty",503],"(",["T_VARIABLE","$field1",503],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",503],"]",")",")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n\t\t\t",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_LNUMBER","1",504],";",["T_WHITESPACE","\n\t\t",504],"}",["T_WHITESPACE"," ",505],["T_ELSE","else",505],["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n\t\t\t",505],["T_RETURN","return",506],["T_WHITESPACE"," ",506],"(",["T_VARIABLE","$field1",506],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",506],"]",["T_WHITESPACE"," ",506],"<",["T_WHITESPACE"," ",506],["T_VARIABLE","$field2",506],"[",["T_CONSTANT_ENCAPSED_STRING","'order'",506],"]",")",["T_WHITESPACE"," ",506],"?",["T_WHITESPACE"," ",506],"-",["T_LNUMBER","1",506],["T_WHITESPACE"," ",506],":",["T_WHITESPACE"," ",506],["T_LNUMBER","1",506],";",["T_WHITESPACE","\n\t\t",506],"}",["T_WHITESPACE","\n\t",507],"}",["T_WHITESPACE","\n",508],"}"]
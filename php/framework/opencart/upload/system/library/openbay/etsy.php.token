[["T_OPEN_TAG","<?php\n",1],["T_NAMESPACE","namespace",2],["T_WHITESPACE"," ",2],["T_STRING","openbay",2],";",["T_WHITESPACE","\n\n",2],["T_FINAL","final",4],["T_WHITESPACE"," ",4],["T_CLASS","class",4],["T_WHITESPACE"," ",4],["T_STRING","Etsy",4],["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t",4],["T_PRIVATE","private",5],["T_WHITESPACE"," ",5],["T_VARIABLE","$token",5],";",["T_WHITESPACE","\n\t",5],["T_PRIVATE","private",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$enc1",6],";",["T_WHITESPACE","\n\t",6],["T_PRIVATE","private",7],["T_WHITESPACE"," ",7],["T_VARIABLE","$enc2",7],";",["T_WHITESPACE","\n\t",7],["T_PRIVATE","private",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$url",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.openbaypro.io\/'",8],";",["T_WHITESPACE","\n\t",8],["T_PRIVATE","private",9],["T_WHITESPACE"," ",9],["T_VARIABLE","$registry",9],";",["T_WHITESPACE","\n\t",9],["T_PRIVATE","private",10],["T_WHITESPACE"," ",10],["T_VARIABLE","$logger",10],";",["T_WHITESPACE","\n\t",10],["T_PRIVATE","private",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$max_log_size",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_LNUMBER","50",11],";",["T_WHITESPACE"," ",11],["T_COMMENT","\/\/max log size in Mb\n",11],["T_WHITESPACE","\n\t",12],["T_PUBLIC","public",13],["T_WHITESPACE"," ",13],["T_FUNCTION","function",13],["T_WHITESPACE"," ",13],["T_STRING","__construct",13],"(",["T_VARIABLE","$registry",13],")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\t\t",13],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","registry",14],["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$registry",14],";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","token",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","config",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_token'",15],")",";",["T_WHITESPACE","\n\t\t",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","enc1",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_enc1'",16],")",";",["T_WHITESPACE","\n\t\t",16],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","enc2",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","config",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_enc2'",17],")",";",["T_WHITESPACE","\n\t\t",17],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","logging",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","config",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_logging'",18],")",";",["T_WHITESPACE","\n\n\t\t",18],["T_IF","if",20],["T_WHITESPACE"," ",20],"(",["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","logging",20],["T_WHITESPACE"," ",20],["T_IS_EQUAL","==",20],["T_WHITESPACE"," ",20],["T_LNUMBER","1",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\t\t\t",20],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","setLogger",21],"(",")",";",["T_WHITESPACE","\n\t\t",21],"}",["T_WHITESPACE","\n\t",22],"}",["T_WHITESPACE","\n\n\t",23],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","__get",25],"(",["T_VARIABLE","$name",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n\t\t",25],["T_RETURN","return",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","registry",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_VARIABLE","$name",26],")",";",["T_WHITESPACE","\n\t",26],"}",["T_WHITESPACE","\n\t\n\t",27],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","resetConfig",29],"(",["T_VARIABLE","$token",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$enc1",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$enc2",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","token",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$token",30],";",["T_WHITESPACE","\n\t\t",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","enc1",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$enc1",31],";",["T_WHITESPACE","\n\t\t",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","enc2",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$enc2",32],";",["T_WHITESPACE","\n\t",32],"}",["T_WHITESPACE","\n\n\t",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","call",35],"(",["T_VARIABLE","$uri",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$method",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$data",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t",35],["T_IF","if",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","config",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_status'",36],")",["T_WHITESPACE"," ",36],["T_IS_EQUAL","==",36],["T_WHITESPACE"," ",36],["T_LNUMBER","1",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t",36],["T_VARIABLE","$headers",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],["T_WHITESPACE"," ",37],"(",")",";",["T_WHITESPACE","\n\t\t\t",37],["T_VARIABLE","$headers",38],"[","]",["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'X-Auth-Token: '",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","token",38],";",["T_WHITESPACE","\n\t\t\t",38],["T_VARIABLE","$headers",39],"[","]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'X-Auth-Enc: '",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","enc1",39],";",["T_WHITESPACE","\n\t\t\t",39],["T_VARIABLE","$headers",40],"[","]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",40],";",["T_WHITESPACE","\n\t\t\t",40],["T_COMMENT","\/\/$headers[] = 'Content-Length: '.strlen(json_encode($data));\n",41],["T_WHITESPACE","\n\t\t\t",42],["T_VARIABLE","$defaults",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n\t\t\t\t",43],["T_STRING","CURLOPT_HEADER",44],["T_WHITESPACE","      \t",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_LNUMBER","0",44],",",["T_WHITESPACE","\n\t\t\t\t",44],["T_STRING","CURLOPT_HTTPHEADER",45],["T_WHITESPACE","      ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$headers",45],",",["T_WHITESPACE","\n\t\t\t\t",45],["T_STRING","CURLOPT_URL",46],["T_WHITESPACE","             ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","url",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_VARIABLE","$uri",46],",",["T_WHITESPACE","\n\t\t\t\t",46],["T_STRING","CURLOPT_USERAGENT",47],["T_WHITESPACE","       ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"Mozilla\/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko\/20061204 Firefox\/2.0.0.1\"",47],",",["T_WHITESPACE","\n\t\t\t\t",47],["T_STRING","CURLOPT_FRESH_CONNECT",48],["T_WHITESPACE","   ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],",",["T_WHITESPACE","\n\t\t\t\t",48],["T_STRING","CURLOPT_RETURNTRANSFER",49],["T_WHITESPACE","  ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_LNUMBER","1",49],",",["T_WHITESPACE","\n\t\t\t\t",49],["T_STRING","CURLOPT_FORBID_REUSE",50],["T_WHITESPACE","    ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],",",["T_WHITESPACE","\n\t\t\t\t",50],["T_STRING","CURLOPT_TIMEOUT",51],["T_WHITESPACE","         ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_LNUMBER","10",51],",",["T_WHITESPACE","\n\t\t\t\t",51],["T_STRING","CURLOPT_SSL_VERIFYPEER",52],["T_WHITESPACE","  ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","0",52],",",["T_WHITESPACE","\n\t\t\t\t",52],["T_STRING","CURLOPT_SSL_VERIFYHOST",53],["T_WHITESPACE","  ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],",",["T_WHITESPACE","\n\t\t\t\t",53],["T_COMMENT","\/\/CURLOPT_VERBOSE \t\t=> true,\n",54],["T_WHITESPACE","\t\t\t\t",55],["T_COMMENT","\/\/CURLOPT_STDERR \t\t\t=> fopen(DIR_LOGS . 'curl_verbose.log', \"w+\")\n",55],["T_WHITESPACE","\t\t\t",56],")",";",["T_WHITESPACE","\n\n\t\t\t",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$method",58],["T_WHITESPACE"," ",58],["T_IS_EQUAL","==",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'POST'",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t\t\t",58],["T_VARIABLE","$defaults",59],"[",["T_STRING","CURLOPT_POST",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","1",59],";",["T_WHITESPACE","\n\t\t\t\t",59],["T_VARIABLE","$defaults",60],"[",["T_STRING","CURLOPT_POSTFIELDS",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","json_encode",60],"(",["T_VARIABLE","$data",60],")",";",["T_WHITESPACE","\n\t\t\t",60],"}",["T_WHITESPACE","\n\n\t\t\t",61],["T_VARIABLE","$ch",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","curl_init",63],"(",")",";",["T_WHITESPACE","\n\t\t\t",63],["T_STRING","curl_setopt_array",64],"(",["T_VARIABLE","$ch",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$defaults",64],")",";",["T_WHITESPACE","\n\n\t\t\t",64],["T_VARIABLE","$response",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_WHITESPACE"," ",68],["T_VARIABLE","$result",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","curl_exec",68],"(",["T_VARIABLE","$ch",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","log",69],"(",["T_CONSTANT_ENCAPSED_STRING","'call() - Curl Failed '",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_STRING","curl_error",69],"(",["T_VARIABLE","$ch",69],")",["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","' '",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_STRING","curl_errno",69],"(",["T_VARIABLE","$ch",69],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",69],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_STRING","false",71],";",["T_WHITESPACE","\n\t\t\t",71],"}",["T_WHITESPACE"," ",72],["T_ELSE","else",72],["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t\t",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","log",73],"(",["T_CONSTANT_ENCAPSED_STRING","'call() - Result of : \"'",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_STRING","print_r",73],"(",["T_VARIABLE","$result",73],",",["T_WHITESPACE"," ",73],["T_STRING","true",73],")",["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'\"'",73],")",";",["T_WHITESPACE","\n\n\t\t\t\t",73],["T_VARIABLE","$encoding",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","mb_detect_encoding",75],"(",["T_VARIABLE","$result",75],")",";",["T_WHITESPACE","\n\n\t\t\t\t",75],["T_IF","if",77],"(",["T_VARIABLE","$encoding",77],["T_WHITESPACE"," ",77],["T_IS_EQUAL","==",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t\t",77],["T_VARIABLE","$result",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","preg_replace",78],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^(\\x20-\\x7F)]*\/'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","''",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$result",78],")",";",["T_WHITESPACE","\n\t\t\t\t",78],"}",["T_WHITESPACE","\n\n\t\t\t\t",79],["T_VARIABLE","$result",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","json_decode",81],"(",["T_VARIABLE","$result",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],")",";",["T_WHITESPACE","\n\n\t\t\t\t",81],["T_VARIABLE","$response",83],"[",["T_CONSTANT_ENCAPSED_STRING","'header_code'",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","curl_getinfo",83],"(",["T_VARIABLE","$ch",83],",",["T_WHITESPACE"," ",83],["T_STRING","CURLINFO_HTTP_CODE",83],")",";",["T_WHITESPACE","\n\n\t\t\t\t",83],["T_IF","if",85],"(","!",["T_EMPTY","empty",85],"(",["T_VARIABLE","$result",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n\t\t\t\t\t",85],["T_VARIABLE","$response",86],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$result",86],";",["T_WHITESPACE","\n\t\t\t\t",86],"}",["T_WHITESPACE"," ",87],["T_ELSE","else",87],["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t\t\t\t",87],["T_VARIABLE","$response",88],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n\t\t\t\t",88],"}",["T_WHITESPACE","\n\t\t\t",89],"}",["T_WHITESPACE","\n\n\t\t\t",90],["T_STRING","curl_close",92],"(",["T_VARIABLE","$ch",92],")",";",["T_WHITESPACE","\n\n\t\t\t",92],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$response",94],";",["T_WHITESPACE","\n\t\t",94],"}",["T_WHITESPACE"," ",95],["T_ELSE","else",95],["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t\t",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","log",96],"(",["T_CONSTANT_ENCAPSED_STRING","'call() - OpenBay Pro \/ Etsy not active'",96],")",";",["T_WHITESPACE","\n\n\t\t\t",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_STRING","false",98],";",["T_WHITESPACE","\n\t\t",98],"}",["T_WHITESPACE","\n\t",99],"}",["T_WHITESPACE","\n\n\t",100],["T_PRIVATE","private",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","setLogger",102],"(",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n\t\t",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_STRING","file_exists",103],"(",["T_STRING","DIR_LOGS",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'etsylog.log'",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n\t\t\t",103],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_STRING","filesize",104],"(",["T_STRING","DIR_LOGS",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'etsylog.log'",104],")",["T_WHITESPACE"," ",104],">",["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","max_log_size",104],["T_WHITESPACE"," ",104],"*",["T_WHITESPACE"," ",104],["T_LNUMBER","1000000",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t\t",104],["T_STRING","rename",105],"(",["T_STRING","DIR_LOGS",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'etsylog.log'",105],",",["T_WHITESPACE"," ",105],["T_STRING","DIR_LOGS",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'_etsylog_'",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_STRING","date",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d_H-i-s'",105],")",["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'.log'",105],")",";",["T_WHITESPACE","\n\t\t\t",105],"}",["T_WHITESPACE","\n\t\t",106],"}",["T_WHITESPACE","\n\n\t\t",107],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","logger",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Log",109],"(",["T_CONSTANT_ENCAPSED_STRING","'etsylog.log'",109],")",";",["T_WHITESPACE","\n\t",109],"}",["T_WHITESPACE","\n\n\t",110],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","log",112],"(",["T_VARIABLE","$data",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$write",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","true",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t\t",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","logging",113],["T_WHITESPACE"," ",113],["T_IS_EQUAL","==",113],["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n\t\t\t",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","function_exists",114],"(",["T_CONSTANT_ENCAPSED_STRING","'getmypid'",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t\t\t",114],["T_VARIABLE","$process_id",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","getmypid",115],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",115],["T_VARIABLE","$data",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$process_id",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","' - '",116],["T_WHITESPACE"," ",116],".",["T_WHITESPACE"," ",116],["T_STRING","print_r",116],"(",["T_VARIABLE","$data",116],",",["T_WHITESPACE"," ",116],["T_STRING","true",116],")",";",["T_WHITESPACE","\n\t\t\t",116],"}",["T_WHITESPACE","\n\n\t\t\t",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$write",119],["T_WHITESPACE"," ",119],["T_IS_EQUAL","==",119],["T_WHITESPACE"," ",119],["T_STRING","true",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t\t\t",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","logger",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","write",120],"(",["T_VARIABLE","$data",120],")",";",["T_WHITESPACE","\n\t\t\t",120],"}",["T_WHITESPACE","\n\t\t",121],"}",["T_WHITESPACE","\n\t",122],"}",["T_WHITESPACE","\n\n\t",123],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","encryptArgs",125],"(",["T_VARIABLE","$data",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n\t\t",125],["T_VARIABLE","$token",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","openbay",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","pbkdf2",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","enc1",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","enc2",126],",",["T_WHITESPACE"," ",126],["T_LNUMBER","1000",126],",",["T_WHITESPACE"," ",126],["T_LNUMBER","32",126],")",";",["T_WHITESPACE","\n\t\t",126],["T_VARIABLE","$crypt",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","openbay",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","encrypt",127],"(",["T_VARIABLE","$data",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$token",127],",",["T_WHITESPACE"," ",127],["T_STRING","true",127],")",";",["T_WHITESPACE","\n\n\t\t",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$crypt",129],";",["T_WHITESPACE","\n\t",129],"}",["T_WHITESPACE","\n\n\t",130],["T_PUBLIC","public",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","decryptArgs",132],"(",["T_VARIABLE","$crypt",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$is_base_64",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","true",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n\t\t",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$is_base_64",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t\t",133],["T_VARIABLE","$crypt",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","base64_decode",134],"(",["T_VARIABLE","$crypt",134],",",["T_WHITESPACE"," ",134],["T_STRING","true",134],")",";",["T_WHITESPACE","\n\t\t\t",134],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_VARIABLE","$crypt",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n\t\t\t\t",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_STRING","false",136],";",["T_WHITESPACE","\n\t\t\t",136],"}",["T_WHITESPACE","\n\t\t",137],"}",["T_WHITESPACE","\n\n\t\t",138],["T_VARIABLE","$token",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","openbay",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","pbkdf2",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","enc1",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","enc2",140],",",["T_WHITESPACE"," ",140],["T_LNUMBER","1000",140],",",["T_WHITESPACE"," ",140],["T_LNUMBER","32",140],")",";",["T_WHITESPACE","\n\t\t",140],["T_VARIABLE","$data",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","openbay",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","decrypt",141],"(",["T_VARIABLE","$crypt",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$token",141],")",";",["T_WHITESPACE","\n\n\t\t",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$data",143],";",["T_WHITESPACE","\n\t",143],"}",["T_WHITESPACE","\n\n\t",144],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getServer",146],"(",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","url",147],";",["T_WHITESPACE","\n\t",147],"}",["T_WHITESPACE","\n\n\t",148],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","settingsUpdate",150],"(",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","log",151],"(",["T_CONSTANT_ENCAPSED_STRING","\"settingsUpdate() - start\"",151],")",";",["T_WHITESPACE","\n\n\t\t",151],["T_VARIABLE","$response",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","call",153],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/data\/type\/getSetup\/'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'GET'",153],")",";",["T_WHITESPACE","\n\n\t\t",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_ISSET","isset",155],"(",["T_VARIABLE","$response",155],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",155],"]",")",["T_WHITESPACE"," ",155],["T_BOOLEAN_AND","&&",155],["T_WHITESPACE"," ",155],["T_STRING","is_array",155],"(",["T_VARIABLE","$response",155],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",155],"]",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t",155],["T_FOREACH","foreach",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$response",156],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",156],"]",["T_WHITESPACE"," ",156],["T_AS","as",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$key",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$options",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t\t\t",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","db",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","query",157],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_STRING","DB_PREFIX",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","\"etsy_setting_option` WHERE  `key` = '\"",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","db",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","escape",157],"(",["T_VARIABLE","$key",157],")",["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",157],")",";",["T_WHITESPACE","\n\n\t\t\t\t",157],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","db",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","query",159],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_STRING","DB_PREFIX",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","\"etsy_setting_option` SET `data` = '\"",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","db",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","escape",159],"(",["T_STRING","serialize",159],"(",["T_VARIABLE","$options",159],")",")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","\"', `key` = '\"",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","db",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","escape",159],"(",["T_VARIABLE","$key",159],")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","\"', `last_updated`  = now()\"",159],")",";",["T_WHITESPACE","\n\n\t\t\t\t",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","log",161],"(",["T_CONSTANT_ENCAPSED_STRING","\"settingsUpdate() - updated option: \"",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_VARIABLE","$key",161],")",";",["T_WHITESPACE","\n\t\t\t",161],"}",["T_WHITESPACE","\n\n\t\t\t",162],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","log",164],"(",["T_CONSTANT_ENCAPSED_STRING","\"settingsUpdate() - complete\"",164],")",";",["T_WHITESPACE","\n\t\t",164],"}",["T_WHITESPACE"," ",165],["T_ELSE","else",165],["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n\t\t\t",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","log",166],"(",["T_CONSTANT_ENCAPSED_STRING","\"settingsUpdate() - failed - no data response\"",166],")",";",["T_WHITESPACE","\n\t\t",166],"}",["T_WHITESPACE","\n\t",167],"}",["T_WHITESPACE","\n\n\t",168],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","getSetting",170],"(",["T_VARIABLE","$key",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n\t\t",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","log",171],"(",["T_CONSTANT_ENCAPSED_STRING","\"getSetting() - \"",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$key",171],")",";",["T_WHITESPACE","\n\n\t\t",171],["T_VARIABLE","$qry",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","query",173],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `data` FROM `\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_STRING","DB_PREFIX",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"etsy_setting_option` WHERE `key` = '\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","escape",173],"(",["T_VARIABLE","$key",173],")",["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",173],")",";",["T_WHITESPACE","\n\n\t\t",173],["T_IF","if",175],"(",["T_VARIABLE","$qry",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","num_rows",175],["T_WHITESPACE"," ",175],">",["T_WHITESPACE"," ",175],["T_LNUMBER","0",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n\t\t\t",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","log",176],"(",["T_CONSTANT_ENCAPSED_STRING","\"getSetting() - Found setting\"",176],")",";",["T_WHITESPACE","\n\n\t\t\t",176],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_STRING","unserialize",178],"(",["T_VARIABLE","$qry",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","row",178],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",178],"]",")",";",["T_WHITESPACE","\n\t\t",178],"}",["T_WHITESPACE"," ",179],["T_ELSE","else",179],["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n\t\t\t",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_STRING","false",180],";",["T_WHITESPACE","\n\t\t",180],"}",["T_WHITESPACE","\n\t",181],"}",["T_WHITESPACE","\n\n\t",182],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","getLinks",184],"(",["T_VARIABLE","$product_id",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$status",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$limit",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_STRING","null",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","log",185],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinks() - Product_id: \"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$product_id",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\" status: \"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$status",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\" limit:\"",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$limit",185],")",";",["T_WHITESPACE","\n\n\t\t",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$limit",187],["T_WHITESPACE"," ",187],["T_IS_NOT_EQUAL","!=",187],["T_WHITESPACE"," ",187],["T_STRING","null",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n\t\t\t",187],["T_VARIABLE","$sql_limit",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","' LIMIT 1'",188],";",["T_WHITESPACE","\n\t\t",188],"}",["T_WHITESPACE"," ",189],["T_ELSE","else",189],["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t\t",189],["T_VARIABLE","$sql_limit",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","''",190],";",["T_WHITESPACE","\n\t\t",190],"}",["T_WHITESPACE","\n\n\t\t",191],["T_VARIABLE","$qry",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","db",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","query",193],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `el`.*, `p`.`quantity` FROM `\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","DB_PREFIX",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"etsy_listing` `el` LEFT JOIN `\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_STRING","DB_PREFIX",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"product` `p` ON `el`.`product_id` = `p`.`product_id` WHERE `el`.`product_id` = '\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_INT_CAST","(int)",193],["T_VARIABLE","$product_id",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"' AND `el`.`status` = '\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_INT_CAST","(int)",193],["T_VARIABLE","$status",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `el`.`created` DESC\"",193],["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$sql_limit",193],")",";",["T_WHITESPACE","\n\n\t\t",193],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$qry",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","num_rows",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n\t\t\t",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","log",196],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinks() - \"",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_VARIABLE","$qry",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","num_rows",196],["T_WHITESPACE"," ",196],".",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","\" found\"",196],")",";",["T_WHITESPACE","\n\n\t\t\t",196],["T_VARIABLE","$links",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_ARRAY","array",198],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",198],["T_FOREACH","foreach",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$qry",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","rows",200],["T_WHITESPACE"," ",200],["T_AS","as",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$row",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n\t\t\t\t",200],["T_VARIABLE","$links",201],"[","]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$row",201],";",["T_WHITESPACE","\n\t\t\t",201],"}",["T_WHITESPACE","\n\n\t\t\t",202],["T_RETURN","return",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$links",204],";",["T_WHITESPACE","\n\t\t",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n\t\t\t",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","log",206],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinks() - no links found\"",206],")",";",["T_WHITESPACE","\n\n\t\t\t",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_STRING","false",208],";",["T_WHITESPACE","\n\t\t",208],"}",["T_WHITESPACE","\n\t",209],"}",["T_WHITESPACE","\n\n\t",210],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","getLinkedProduct",212],"(",["T_VARIABLE","$etsy_item_id",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n\t\t",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","log",213],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinkedProduct() - etsy_item_id: \"",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_VARIABLE","$etsy_item_id",213],")",";",["T_WHITESPACE","\n\n\t\t",213],["T_VARIABLE","$qry",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","db",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","query",215],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `p`.`quantity`, `p`.`product_id`, `p`.`model`, `el`.`etsy_listing_id`, `el`.`status` AS `link_status` FROM `\"",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_STRING","DB_PREFIX",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\"etsy_listing` `el` LEFT JOIN `\"",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_STRING","DB_PREFIX",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\"product` `p` ON `p`.`product_id` = `el`.`product_id` WHERE `el`.`etsy_item_id` = '\"",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_INT_CAST","(int)",215],["T_VARIABLE","$etsy_item_id",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","\"' AND `el`.`status` = 1\"",215],")",";",["T_WHITESPACE","\n\n\t\t",215],["T_IF","if",217],"(",["T_VARIABLE","$qry",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","num_rows",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\t\t\t",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","log",218],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinkedProduct() - \"",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_VARIABLE","$qry",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","num_rows",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","\" found\"",218],")",";",["T_WHITESPACE","\n\n\t\t\t",218],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$qry",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","row",220],";",["T_WHITESPACE","\n\t\t",220],"}",["T_WHITESPACE"," ",221],["T_ELSE","else",221],["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n\t\t\t",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","log",222],"(",["T_CONSTANT_ENCAPSED_STRING","\"getLinkedProduct() - no link found\"",222],")",";",["T_WHITESPACE","\n\n\t\t\t",222],["T_RETURN","return",224],["T_WHITESPACE"," ",224],["T_STRING","false",224],";",["T_WHITESPACE","\n\t\t",224],"}",["T_WHITESPACE","\n\t",225],"}",["T_WHITESPACE","\n\n\t",226],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","updateListingStock",228],"(",["T_VARIABLE","$etsy_item_id",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$new_stock",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$status",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n\t\t",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","log",229],"(",["T_CONSTANT_ENCAPSED_STRING","\"updateListingStock() - ItemID: \"",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$etsy_item_id",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","\", new stock: \"",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$new_stock",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","\", status: \"",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$status",229],")",";",["T_WHITESPACE","\n\t\t\n\t\t",229],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$new_stock",231],["T_WHITESPACE"," ",231],">",["T_WHITESPACE"," ",231],["T_LNUMBER","0",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n\t\t\t",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","log",232],"(",["T_CONSTANT_ENCAPSED_STRING","\"updateListingStock() - stock > 0 - update stock\"",232],")",";",["T_WHITESPACE","\n\t\t\t\n\t\t\t",232],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$status",234],["T_WHITESPACE"," ",234],["T_IS_EQUAL","==",234],["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'edit'",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n\t\t\t\t",234],["T_VARIABLE","$status",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'inactive'",235],";",["T_WHITESPACE","\n\t\t\t",235],"}",["T_WHITESPACE","\n\n\t\t\t",236],["T_VARIABLE","$response",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","call",238],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/product\/listing\/'",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_INT_CAST","(int)",238],["T_VARIABLE","$etsy_item_id",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'\/updateStock\/'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'POST'",238],",",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",["T_CONSTANT_ENCAPSED_STRING","'quantity'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$new_stock",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'state'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$status",238],")",")",";",["T_WHITESPACE","\n\n\t\t\t",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_ISSET","isset",240],"(",["T_VARIABLE","$response",240],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",240],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",240],"]",")",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t\t\t",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$response",241],";",["T_WHITESPACE","\n\t\t\t",241],"}",["T_WHITESPACE"," ",242],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n\t\t\t\t",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_STRING","true",243],";",["T_WHITESPACE","\n\t\t\t",243],"}",["T_WHITESPACE","\n\t\t",244],"}",["T_WHITESPACE"," ",245],["T_ELSE","else",245],["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n\t\t\t",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","log",246],"(",["T_CONSTANT_ENCAPSED_STRING","\"updateListingStock() - stock > 0 - set to inactive\"",246],")",";",["T_WHITESPACE","\n\t\t\t\n\t\t\t",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","deleteLink",248],"(",["T_STRING","null",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$etsy_item_id",248],")",";",["T_WHITESPACE","\n\n\t\t\t",248],["T_VARIABLE","$response",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","call",250],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/product\/listing\/'",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_INT_CAST","(int)",250],["T_VARIABLE","$etsy_item_id",250],["T_WHITESPACE"," ",250],".",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'\/inactive\/'",250],",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'POST'",250],")",";",["T_WHITESPACE","\n\n\t\t\t",250],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_ISSET","isset",252],"(",["T_VARIABLE","$response",252],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",252],"]",")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t\t\t",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","log",253],"(",["T_CONSTANT_ENCAPSED_STRING","\"updateListingStock() - Error: \"",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_STRING","json_encode",253],"(",["T_VARIABLE","$response",253],")",")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t\t",253],["T_RETURN","return",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$response",255],";",["T_WHITESPACE","\n\t\t\t",255],"}",["T_WHITESPACE"," ",256],["T_ELSE","else",256],["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n\t\t\t\t",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","log",257],"(",["T_CONSTANT_ENCAPSED_STRING","\"updateListingStock() - Item ended OK\"",257],")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t\t",257],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_STRING","true",259],";",["T_WHITESPACE","\n\t\t\t",259],"}",["T_WHITESPACE","\n\t\t",260],"}",["T_WHITESPACE","\n\t",261],"}",["T_WHITESPACE","\n\n\t",262],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","deleteProduct",264],"(",["T_VARIABLE","$product_id",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n\t\t",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","log",265],"(",["T_CONSTANT_ENCAPSED_STRING","\"deleteProduct() - Product ID: \"",265],["T_WHITESPACE"," ",265],".",["T_WHITESPACE"," ",265],["T_VARIABLE","$product_id",265],")",";",["T_WHITESPACE","\n\n\t\t",265],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","db",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","query",267],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_STRING","DB_PREFIX",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","\"etsy_listing` WHERE `product_id` = '\"",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_INT_CAST","(int)",267],["T_VARIABLE","$product_id",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","\"'\"",267],")",";",["T_WHITESPACE","\n\t",267],"}",["T_WHITESPACE","\n\n\t",268],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","deleteLink",270],"(",["T_VARIABLE","$etsy_listing_id",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$etsy_item_id",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","null",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n\t\t",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","log",271],"(",["T_CONSTANT_ENCAPSED_STRING","\"deleteLink() - Listing ID: \"",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_VARIABLE","$etsy_listing_id",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","\", item ID\"",271],["T_WHITESPACE"," ",271],".",["T_WHITESPACE"," ",271],["T_VARIABLE","$etsy_item_id",271],")",";",["T_WHITESPACE","\n\n\t\t",271],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$etsy_listing_id",273],["T_WHITESPACE"," ",273],["T_IS_NOT_EQUAL","!=",273],["T_WHITESPACE"," ",273],["T_STRING","null",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","log",274],"(",["T_CONSTANT_ENCAPSED_STRING","\"deleteLink() - Listing ID is not null\"",274],")",";",["T_WHITESPACE","\n\n\t\t\t",274],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","db",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","query",276],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_STRING","DB_PREFIX",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"etsy_listing` SET `status` = 0 WHERE `etsy_listing_id` = '\"",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_INT_CAST","(int)",276],["T_VARIABLE","$etsy_listing_id",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",276],")",";",["T_WHITESPACE","\n\t\t",276],"}",["T_WHITESPACE"," ",277],["T_ELSEIF","elseif",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$etsy_item_id",277],["T_WHITESPACE"," ",277],["T_IS_NOT_EQUAL","!=",277],["T_WHITESPACE"," ",277],["T_STRING","null",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n\t\t\t",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","log",278],"(",["T_CONSTANT_ENCAPSED_STRING","\"deleteLink() - Item ID is not null\"",278],")",";",["T_WHITESPACE","\n\n\t\t\t",278],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","db",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","query",280],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_STRING","DB_PREFIX",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","\"etsy_listing` SET `status` = 0 WHERE `etsy_item_id` = '\"",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_INT_CAST","(int)",280],["T_VARIABLE","$etsy_item_id",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",280],")",";",["T_WHITESPACE","\n\t\t",280],"}",["T_WHITESPACE","\n\t",281],"}",["T_WHITESPACE","\n\n\t",282],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","productUpdateListen",284],"(",["T_VARIABLE","$product_id",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$data",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n\t\t",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","log",285],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - \"",285],["T_WHITESPACE"," ",285],".",["T_WHITESPACE"," ",285],["T_VARIABLE","$product_id",285],["T_WHITESPACE"," ",285],".",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","\", Data: \"",285],["T_WHITESPACE"," ",285],".",["T_WHITESPACE"," ",285],["T_STRING","json_encode",285],"(",["T_VARIABLE","$data",285],")",")",";",["T_WHITESPACE","\n\n\t\t",285],["T_VARIABLE","$links",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","getLinks",287],"(",["T_VARIABLE","$product_id",287],",",["T_WHITESPACE"," ",287],["T_LNUMBER","1",287],")",";",["T_WHITESPACE","\n\n\t\t",287],["T_IF","if",289],["T_WHITESPACE"," ",289],"(","!",["T_EMPTY","empty",289],"(",["T_VARIABLE","$links",289],")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n\t\t\t",289],["T_FOREACH","foreach",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$links",290],["T_WHITESPACE"," ",290],["T_AS","as",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$link",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n\t\t\t\t",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","log",291],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - Item ID: \"",291],["T_WHITESPACE"," ",291],".",["T_WHITESPACE"," ",291],["T_VARIABLE","$link",291],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_item_id'",291],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",291],["T_VARIABLE","$etsy_listing",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getEtsyItem",293],"(",["T_VARIABLE","$link",293],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_item_id'",293],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",293],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$etsy_listing",295],["T_WHITESPACE"," ",295],["T_IS_NOT_EQUAL","!=",295],["T_WHITESPACE"," ",295],["T_STRING","false",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_ISSET","isset",295],"(",["T_VARIABLE","$etsy_listing",295],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",295],"]",")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$etsy_listing",295],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",295],"]",["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'active'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_OR","||",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$etsy_listing",295],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",295],"]",["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'private'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_OR","||",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$etsy_listing",295],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",295],"]",["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'draft'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_OR","||",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$etsy_listing",295],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",295],"]",["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'edit'",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n\t\t\t\t\t",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","log",296],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - Listing state seems valid\"",296],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",296],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$etsy_listing",298],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",298],"]",["T_WHITESPACE"," ",298],["T_IS_NOT_EQUAL","!=",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$link",298],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",298],"]",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","log",299],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - Stock is different, do update\"",299],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",299],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","updateListingStock",301],"(",["T_VARIABLE","$link",301],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_item_id'",301],"]",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$link",301],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",301],"]",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$etsy_listing",301],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",301],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",301],"}",["T_WHITESPACE"," ",302],["T_ELSE","else",302],["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","log",303],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - Stock is the same: \"",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_VARIABLE","$etsy_listing",303],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",303],"]",["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","\" \"",303],["T_WHITESPACE"," ",303],".",["T_WHITESPACE"," ",303],["T_VARIABLE","$link",303],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",303],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",303],"}",["T_WHITESPACE","\n\t\t\t\t",304],"}",["T_WHITESPACE"," ",305],["T_ELSE","else",305],["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n\t\t\t\t\t",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","log",306],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - Listing state seems invalid\"",306],")",";",["T_WHITESPACE","\n\t\t\t\t\t",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","log",307],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - \"",307],["T_WHITESPACE"," ",307],".",["T_WHITESPACE"," ",307],["T_STRING","json_encode",307],"(",["T_VARIABLE","$etsy_listing",307],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",307],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","deleteLink",309],"(",["T_VARIABLE","$link",309],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_listing_id'",309],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",309],"}",["T_WHITESPACE","\n\t\t\t",310],"}",["T_WHITESPACE","\n\t\t",311],"}",["T_WHITESPACE"," ",312],["T_ELSE","else",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n\t\t\t",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","log",313],"(",["T_CONSTANT_ENCAPSED_STRING","\"productUpdateListen() - No links\"",313],")",";",["T_WHITESPACE","\n\t\t",313],"}",["T_WHITESPACE","\n\t",314],"}",["T_WHITESPACE","\n\n\t",315],["T_PUBLIC","public",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","orderFind",317],"(",["T_VARIABLE","$order_id",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","null",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$receipt_id",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_STRING","null",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n\t\t",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","log",318],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderFind() - OrderID: \"",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$order_id",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","\", Receipt ID: \"",318],["T_WHITESPACE"," ",318],".",["T_WHITESPACE"," ",318],["T_VARIABLE","$receipt_id",318],")",";",["T_WHITESPACE","\n\n\t\t",318],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$order_id",320],["T_WHITESPACE"," ",320],["T_IS_NOT_EQUAL","!=",320],["T_WHITESPACE"," ",320],["T_STRING","null",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n\t\t\t",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","log",321],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderFind() - Order ID is not null\"",321],")",";",["T_WHITESPACE","\n\n\t\t\t",321],["T_VARIABLE","$query",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","db",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","query",323],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_STRING","DB_PREFIX",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","\"etsy_order` WHERE `order_id` = '\"",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_INT_CAST","(int)",323],["T_VARIABLE","$order_id",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",323],")",";",["T_WHITESPACE","\n\n\t\t\t",323],["T_IF","if",325],"(",["T_VARIABLE","$query",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","num_rows",325],["T_WHITESPACE"," ",325],">",["T_WHITESPACE"," ",325],["T_LNUMBER","0",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n\t\t\t\t",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","log",326],"(",["T_CONSTANT_ENCAPSED_STRING","'orderFind() - Found'",326],")",";",["T_WHITESPACE","\n\t\t\t\t",326],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$query",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","row",327],";",["T_WHITESPACE","\n\t\t\t",327],"}",["T_WHITESPACE"," ",328],["T_ELSE","else",328],["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n\t\t\t\t",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","log",329],"(",["T_CONSTANT_ENCAPSED_STRING","'orderFind() - Not found'",329],")",";",["T_WHITESPACE","\n\t\t\t\t",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_STRING","false",330],";",["T_WHITESPACE","\n\t\t\t",330],"}",["T_WHITESPACE","\n\t\t",331],"}",["T_WHITESPACE"," ",332],["T_ELSEIF","elseif",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$receipt_id",332],["T_WHITESPACE"," ",332],["T_IS_NOT_EQUAL","!=",332],["T_WHITESPACE"," ",332],["T_STRING","null",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n\t\t\t",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","log",333],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderFind() - Receipt ID is not null\"",333],")",";",["T_WHITESPACE","\n\n\t\t\t",333],["T_VARIABLE","$query",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","db",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","query",335],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_STRING","DB_PREFIX",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","\"etsy_order` WHERE `receipt_id` = '\"",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_INT_CAST","(int)",335],["T_VARIABLE","$receipt_id",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",335],")",";",["T_WHITESPACE","\n\n\t\t\t",335],["T_IF","if",337],"(",["T_VARIABLE","$query",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","num_rows",337],["T_WHITESPACE"," ",337],">",["T_WHITESPACE"," ",337],["T_LNUMBER","0",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n\t\t\t\t",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","log",338],"(",["T_CONSTANT_ENCAPSED_STRING","'orderFind() - Found'",338],")",";",["T_WHITESPACE","\n\t\t\t\t",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$query",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","row",339],";",["T_WHITESPACE","\n\t\t\t",339],"}",["T_WHITESPACE"," ",340],["T_ELSE","else",340],["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n\t\t\t\t",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","log",341],"(",["T_CONSTANT_ENCAPSED_STRING","'orderFind() - Not found'",341],")",";",["T_WHITESPACE","\n\t\t\t\t",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_STRING","false",342],";",["T_WHITESPACE","\n\t\t\t",342],"}",["T_WHITESPACE","\n\t\t",343],"}",["T_WHITESPACE","\n\t",344],"}",["T_WHITESPACE","\n\n\t",345],["T_PUBLIC","public",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","orderDelete",347],"(",["T_VARIABLE","$order_id",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n\t\t",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","log",348],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderDelete() - ID: \"",348],["T_WHITESPACE"," ",348],".",["T_WHITESPACE"," ",348],["T_VARIABLE","$order_id",348],")",";",["T_WHITESPACE","\n\n\t\t",348],["T_IF","if",350],"(","!",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","orderFind",350],"(",["T_VARIABLE","$order_id",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n\t\t\t",350],["T_VARIABLE","$query",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","db",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","query",351],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `p`.`product_id` FROM `\"",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_STRING","DB_PREFIX",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","\"order_product` `op` LEFT JOIN `\"",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_STRING","DB_PREFIX",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","\"product` `p` ON `op`.`product_id` = `p`.`product_id` WHERE `op`.`order_id` = '\"",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_INT_CAST","(int)",351],["T_VARIABLE","$order_id",351],["T_WHITESPACE"," ",351],".",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","\"'\"",351],")",";",["T_WHITESPACE","\n\n\t\t\t",351],["T_IF","if",353],"(",["T_VARIABLE","$query",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","num_rows",353],["T_WHITESPACE"," ",353],">",["T_WHITESPACE"," ",353],["T_LNUMBER","0",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n\t\t\t\t",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","log",354],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderDelete() - \"",354],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_VARIABLE","$query",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","num_rows",354],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","\" products\"",354],")",";",["T_WHITESPACE","\n\n\t\t\t\t",354],["T_FOREACH","foreach",356],["T_WHITESPACE"," ",356],"(",["T_VARIABLE","$query",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","rows",356],["T_WHITESPACE"," ",356],["T_AS","as",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$product",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n\t\t\t\t\t",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","log",357],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderDelete() - Processing ID: \"",357],["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_VARIABLE","$product",357],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",357],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",357],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","productUpdateListen",359],"(",["T_INT_CAST","(int)",359],["T_VARIABLE","$product",359],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",359],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",359],"}",["T_WHITESPACE","\n\t\t\t",360],"}",["T_WHITESPACE"," ",361],["T_ELSE","else",361],["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n\t\t\t\t",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","log",362],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderDelete() - No products in order\"",362],")",";",["T_WHITESPACE","\n\t\t\t",362],"}",["T_WHITESPACE","\n\t\t",363],"}",["T_WHITESPACE"," ",364],["T_ELSE","else",364],["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n\t\t\t",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","log",365],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderDelete() - Not an Etsy order\"",365],")",";",["T_WHITESPACE","\n\t\t",365],"}",["T_WHITESPACE","\n\t",366],"}",["T_WHITESPACE","\n\n\t",367],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","orderUpdatePaid",369],"(",["T_VARIABLE","$receipt_id",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$status",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n\t\t",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","log",370],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdatePaid() - Receipt ID: \"",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_VARIABLE","$receipt_id",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","\", Status: \"",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_VARIABLE","$status",370],")",";",["T_WHITESPACE","\n\n\t\t",370],["T_VARIABLE","$response",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","openbay",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","etsy",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","call",372],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/order\/update\/payment\/'",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'POST'",372],",",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",["T_CONSTANT_ENCAPSED_STRING","'receipt_id'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$receipt_id",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'status'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$status",372],")",")",";",["T_WHITESPACE","\n\n\t\t",372],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_ISSET","isset",374],"(",["T_VARIABLE","$response",374],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",374],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",374],"]",")",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n\t\t\t",374],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","log",375],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdatePaid() - Error: \"",375],["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_STRING","json_encode",375],"(",["T_VARIABLE","$response",375],")",")",";",["T_WHITESPACE","\n\n\t\t\t",375],["T_RETURN","return",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$response",377],";",["T_WHITESPACE","\n\t\t",377],"}",["T_WHITESPACE"," ",378],["T_ELSE","else",378],["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n\t\t\t",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","log",379],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdatePaid() - OK\"",379],")",";",["T_WHITESPACE","\n\n\t\t\t",379],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_STRING","true",381],";",["T_WHITESPACE","\n\t\t",381],"}",["T_WHITESPACE","\n\t",382],"}",["T_WHITESPACE","\n\n\t",383],["T_PUBLIC","public",385],["T_WHITESPACE"," ",385],["T_FUNCTION","function",385],["T_WHITESPACE"," ",385],["T_STRING","orderUpdateShipped",385],"(",["T_VARIABLE","$receipt_id",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$status",385],")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n\t\t",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","log",386],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdateShipped() - Receipt ID: \"",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_VARIABLE","$receipt_id",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","\", Status: \"",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_VARIABLE","$status",386],")",";",["T_WHITESPACE","\n\n\t\t",386],["T_VARIABLE","$response",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","openbay",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","etsy",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","call",388],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/order\/update\/shipping\/'",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'POST'",388],",",["T_WHITESPACE"," ",388],["T_ARRAY","array",388],"(",["T_CONSTANT_ENCAPSED_STRING","'receipt_id'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$receipt_id",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'status'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_VARIABLE","$status",388],")",")",";",["T_WHITESPACE","\n\n\t\t",388],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_ISSET","isset",390],"(",["T_VARIABLE","$response",390],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",390],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",390],"]",")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n\t\t\t",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","log",391],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdateShipped() - Error: \"",391],["T_WHITESPACE"," ",391],".",["T_WHITESPACE"," ",391],["T_STRING","json_encode",391],"(",["T_VARIABLE","$response",391],")",")",";",["T_WHITESPACE","\n\n\t\t\t",391],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$response",393],";",["T_WHITESPACE","\n\t\t",393],"}",["T_WHITESPACE"," ",394],["T_ELSE","else",394],["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n\t\t\t",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","log",395],"(",["T_CONSTANT_ENCAPSED_STRING","\"orderUpdateShipped() - OK\"",395],")",";",["T_WHITESPACE","\n\n\t\t\t",395],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_STRING","true",397],";",["T_WHITESPACE","\n\t\t",397],"}",["T_WHITESPACE","\n\t",398],"}",["T_WHITESPACE","\n\n\t",399],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","putStockUpdateBulk",401],"(",["T_VARIABLE","$product_id_array",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$end_inactive",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n\t\t",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","log",402],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - ok\"",402],")",";",["T_WHITESPACE","\n\t\t",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","log",403],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Item count: \"",403],["T_WHITESPACE"," ",403],".",["T_WHITESPACE"," ",403],["T_STRING","count",403],"(",["T_VARIABLE","$product_id_array",403],")",")",";",["T_WHITESPACE","\n\n\t\t",403],["T_FOREACH","foreach",405],"(",["T_VARIABLE","$product_id_array",405],["T_WHITESPACE"," ",405],["T_AS","as",405],["T_WHITESPACE"," ",405],["T_VARIABLE","$product_id",405],")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n\t\t\t",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","log",406],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Product ID: \"",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$product_id",406],")",";",["T_WHITESPACE","\n\n\t\t\t",406],["T_VARIABLE","$links",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getLinks",408],"(",["T_VARIABLE","$product_id",408],",",["T_WHITESPACE"," ",408],["T_LNUMBER","1",408],")",";",["T_WHITESPACE","\n\n\t\t\t",408],["T_IF","if",410],["T_WHITESPACE"," ",410],"(","!",["T_EMPTY","empty",410],"(",["T_VARIABLE","$links",410],")",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n\t\t\t\t",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","log",411],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Links found: \"",411],["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_STRING","count",411],"(",["T_VARIABLE","$links",411],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",411],["T_FOREACH","foreach",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$links",413],["T_WHITESPACE"," ",413],["T_AS","as",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$link",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n\t\t\t\t\t",413],["T_VARIABLE","$etsy_listing",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getEtsyItem",414],"(",["T_VARIABLE","$link",414],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_item_id'",414],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",414],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$etsy_listing",416],["T_WHITESPACE"," ",416],["T_IS_NOT_EQUAL","!=",416],["T_WHITESPACE"," ",416],["T_STRING","false",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_AND","&&",416],["T_WHITESPACE"," ",416],["T_ISSET","isset",416],"(",["T_VARIABLE","$etsy_listing",416],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",416],"]",")",["T_WHITESPACE"," ",416],["T_BOOLEAN_AND","&&",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$etsy_listing",416],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",416],"]",["T_WHITESPACE"," ",416],["T_IS_EQUAL","==",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'active'",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_OR","||",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$etsy_listing",416],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",416],"]",["T_WHITESPACE"," ",416],["T_IS_EQUAL","==",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'private'",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_OR","||",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$etsy_listing",416],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",416],"]",["T_WHITESPACE"," ",416],["T_IS_EQUAL","==",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'draft'",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_OR","||",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$etsy_listing",416],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",416],"]",["T_WHITESPACE"," ",416],["T_IS_EQUAL","==",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'edit'",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","log",417],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Listing state seems valid\"",417],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",417],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$etsy_listing",419],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",419],"]",["T_WHITESPACE"," ",419],["T_IS_NOT_EQUAL","!=",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$link",419],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",419],"]",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","log",420],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Stock is different, do update\"",420],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",420],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","updateListingStock",422],"(",["T_VARIABLE","$link",422],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_item_id'",422],"]",",",["T_WHITESPACE"," ",422],["T_VARIABLE","$link",422],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",422],"]",",",["T_WHITESPACE"," ",422],["T_VARIABLE","$etsy_listing",422],"[",["T_CONSTANT_ENCAPSED_STRING","'state'",422],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",422],"}",["T_WHITESPACE"," ",423],["T_ELSE","else",423],["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",423],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","log",424],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Stock is the same: \"",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_VARIABLE","$etsy_listing",424],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",424],"]",["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","\" \"",424],["T_WHITESPACE"," ",424],".",["T_WHITESPACE"," ",424],["T_VARIABLE","$link",424],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",424],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",424],"}",["T_WHITESPACE","\n\t\t\t\t\t",425],"}",["T_WHITESPACE"," ",426],["T_ELSE","else",426],["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","log",427],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - Listing state seems invalid\"",427],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","log",428],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - \"",428],["T_WHITESPACE"," ",428],".",["T_WHITESPACE"," ",428],["T_STRING","json_encode",428],"(",["T_VARIABLE","$etsy_listing",428],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",428],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","deleteLink",430],"(",["T_VARIABLE","$link",430],"[",["T_CONSTANT_ENCAPSED_STRING","'etsy_listing_id'",430],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",430],"}",["T_WHITESPACE","\n\t\t\t\t",431],"}",["T_WHITESPACE","\n\t\t\t",432],"}",["T_WHITESPACE"," ",433],["T_ELSE","else",433],["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\t\t\t\t",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","log",434],"(",["T_CONSTANT_ENCAPSED_STRING","\"putStockUpdateBulk() - No link found\"",434],")",";",["T_WHITESPACE","\n\t\t\t",434],"}",["T_WHITESPACE","\n\t\t",435],"}",["T_WHITESPACE","\n\t",436],"}",["T_WHITESPACE","\n\n\t",437],["T_PUBLIC","public",439],["T_WHITESPACE"," ",439],["T_FUNCTION","function",439],["T_WHITESPACE"," ",439],["T_STRING","getEtsyItem",439],"(",["T_VARIABLE","$listing_id",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n\t\t",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","log",440],"(",["T_CONSTANT_ENCAPSED_STRING","\"getEtsyItem(): \"",440],["T_WHITESPACE"," ",440],".",["T_WHITESPACE"," ",440],["T_VARIABLE","$listing_id",440],")",";",["T_WHITESPACE","\n\n\t\t",440],["T_VARIABLE","$response",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","openbay",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","etsy",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","call",442],"(",["T_CONSTANT_ENCAPSED_STRING","'v1\/etsy\/product\/listing\/'",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_VARIABLE","$listing_id",442],["T_WHITESPACE"," ",442],".",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'\/'",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'GET'",442],")",";",["T_WHITESPACE","\n\n\t\t",442],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_ISSET","isset",444],"(",["T_VARIABLE","$response",444],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",444],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",444],"]",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n\t\t\t",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","log",445],"(",["T_CONSTANT_ENCAPSED_STRING","\"getEtsyItem() error: \"",445],".",["T_WHITESPACE"," ",445],["T_VARIABLE","$response",445],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",445],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",445],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",445],["T_RETURN","return",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$response",447],";",["T_WHITESPACE","\n\t\t",447],"}",["T_WHITESPACE"," ",448],["T_ELSE","else",448],["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n\t\t\t",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","log",449],"(",["T_CONSTANT_ENCAPSED_STRING","\"getEtsyItem() - OK : \"",449],["T_WHITESPACE"," ",449],".",["T_WHITESPACE"," ",449],["T_STRING","json_encode",449],"(",["T_VARIABLE","$response",449],")",")",";",["T_WHITESPACE","\n\n\t\t\t",449],["T_RETURN","return",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$response",451],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",451],"]","[",["T_CONSTANT_ENCAPSED_STRING","'results'",451],"]","[",["T_LNUMBER","0",451],"]",";",["T_WHITESPACE","\n\t\t",451],"}",["T_WHITESPACE","\n\t",452],"}",["T_WHITESPACE","\n\n\t",453],["T_PUBLIC","public",455],["T_WHITESPACE"," ",455],["T_FUNCTION","function",455],["T_WHITESPACE"," ",455],["T_STRING","validate",455],"(",")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n\t\t",455],["T_IF","if",456],["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","config",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","get",456],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_token'",456],")",["T_WHITESPACE"," ",456],["T_BOOLEAN_AND","&&",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","config",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","get",456],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_enc1'",456],")",["T_WHITESPACE"," ",456],["T_BOOLEAN_AND","&&",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","config",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","get",456],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_enc2'",456],")",")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n\t\t\t",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","log",457],"(",["T_CONSTANT_ENCAPSED_STRING","\"Etsy details valid\"",457],")",";",["T_WHITESPACE","\n\n\t\t\t",457],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_STRING","true",459],";",["T_WHITESPACE","\n\t\t",459],"}",["T_WHITESPACE"," ",460],["T_ELSE","else",460],["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n\t\t\t",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","log",461],"(",["T_CONSTANT_ENCAPSED_STRING","\"Etsy details are not valid\"",461],")",";",["T_WHITESPACE","\n\n\t\t\t",461],["T_RETURN","return",463],["T_WHITESPACE"," ",463],["T_STRING","false",463],";",["T_WHITESPACE","\n\t\t",463],"}",["T_WHITESPACE","\n\t",464],"}",["T_WHITESPACE","\n",465],"}"]
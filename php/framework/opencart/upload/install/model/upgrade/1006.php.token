[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelUpgrade1006",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","upgrade",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_COMMENT","\/\/ Update some language settings\n",4],["T_WHITESPACE","\t\t",5],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","db",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","query",5],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_STRING","DB_PREFIX",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `value` = 'en-gb' WHERE `key` = 'config_language' AND `value` = 'en'\"",5],")",";",["T_WHITESPACE","\n\t\t",5],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","query",6],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_STRING","DB_PREFIX",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `value` = 'en-gb' WHERE `key` = 'config_admin_language' AND `value` = 'en'\"",6],")",";",["T_WHITESPACE","\n\t\t",6],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","db",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","query",7],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_STRING","DB_PREFIX",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"language` SET `code` = 'en-gb' WHERE `code` = 'en'\"",7],")",";",["T_WHITESPACE","\n\n\t\t",7],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","cache",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","delete",9],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",9],")",";",["T_WHITESPACE","\n\n\t\t",9],["T_COMMENT","\/\/ Update the template setting\n",11],["T_WHITESPACE","\t\t",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","query",12],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_STRING","DB_PREFIX",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `key` = 'config_theme', value = 'theme_default' WHERE `key` = 'config_template' AND `value` = 'default'\"",12],")",";",["T_WHITESPACE","\n\n\t\t",12],["T_COMMENT","\/\/ Update the config.php by adding a DB_PORT\n",14],["T_WHITESPACE","\t\t",15],["T_IF","if",15],["T_WHITESPACE"," ",15],"(",["T_STRING","is_file",15],"(",["T_STRING","DIR_OPENCART",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'config.php'",15],")",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t\t",15],["T_VARIABLE","$files",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_STRING","glob",16],"(",["T_STRING","DIR_OPENCART",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'{config.php,admin\/config.php}'",16],",",["T_WHITESPACE"," ",16],["T_STRING","GLOB_BRACE",16],")",";",["T_WHITESPACE","\n\n\t\t\t",16],["T_FOREACH","foreach",18],["T_WHITESPACE"," ",18],"(",["T_VARIABLE","$files",18],["T_WHITESPACE"," ",18],["T_AS","as",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$file",18],")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\t\t\t\t",18],["T_VARIABLE","$upgrade",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","true",19],";",["T_WHITESPACE","\n\n\t\t\t\t",19],["T_VARIABLE","$lines",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","file",21],"(",["T_VARIABLE","$file",21],")",";",["T_WHITESPACE","\n\n\t\t\t\t",21],["T_FOREACH","foreach",23],["T_WHITESPACE"," ",23],"(",["T_VARIABLE","$lines",23],["T_WHITESPACE"," ",23],["T_AS","as",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$line",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t\t\t\t",23],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_STRING","strpos",24],"(",["T_STRING","strtoupper",24],"(",["T_VARIABLE","$line",24],")",",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'DB_PORT'",24],")",["T_WHITESPACE"," ",24],["T_IS_NOT_IDENTICAL","!==",24],["T_WHITESPACE"," ",24],["T_STRING","false",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",24],["T_VARIABLE","$upgrade",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","false",25],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",25],["T_BREAK","break",27],";",["T_WHITESPACE","\n\t\t\t\t\t",27],"}",["T_WHITESPACE","\n\t\t\t\t",28],"}",["T_WHITESPACE","\n\n\t\t\t\t",29],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_VARIABLE","$upgrade",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n\t\t\t\t\t",31],["T_VARIABLE","$output",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","''",32],";",["T_WHITESPACE","\n\n\t\t\t\t\t",32],["T_FOREACH","foreach",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$lines",34],["T_WHITESPACE"," ",34],["T_AS","as",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$line_id",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$line",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_STRING","strpos",35],"(",["T_VARIABLE","$line",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'DB_PREFIX'",35],")",["T_WHITESPACE"," ",35],["T_IS_NOT_IDENTICAL","!==",35],["T_WHITESPACE"," ",35],["T_STRING","false",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",35],["T_VARIABLE","$output",36],["T_WHITESPACE"," ",36],["T_CONCAT_EQUAL",".=",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'define(\\'DB_PORT\\', \\''",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_STRING","ini_get",36],"(",["T_CONSTANT_ENCAPSED_STRING","'mysqli.default_port'",36],")",["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'\\');'",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",36],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",36],["T_VARIABLE","$output",37],["T_WHITESPACE"," ",37],["T_CONCAT_EQUAL",".=",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$line",37],";",["T_WHITESPACE","\n\t\t\t\t\t\t",37],"}",["T_WHITESPACE"," ",38],["T_ELSE","else",38],["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",38],["T_VARIABLE","$output",39],["T_WHITESPACE"," ",39],["T_CONCAT_EQUAL",".=",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$line",39],";",["T_WHITESPACE","\n\t\t\t\t\t\t",39],"}",["T_WHITESPACE","\n\t\t\t\t\t",40],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",41],["T_VARIABLE","$file",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","fopen",43],"(",["T_VARIABLE","$file",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'w'",43],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",43],["T_STRING","fwrite",45],"(",["T_VARIABLE","$file",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$output",45],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",45],["T_STRING","fclose",47],"(",["T_VARIABLE","$file",47],")",";",["T_WHITESPACE","\n\t\t\t\t",47],"}",["T_WHITESPACE","\n\t\t\t",48],"}",["T_WHITESPACE","\n\t\t",49],"}",["T_WHITESPACE","\n\n\t\t",50],["T_COMMENT","\/\/ Update the config.php to add \/storage\/ to paths\n",52],["T_WHITESPACE","\t\t",53],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_STRING","is_file",53],"(",["T_STRING","DIR_OPENCART",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'config.php'",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n\t\t\t",53],["T_VARIABLE","$files",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","glob",54],"(",["T_STRING","DIR_OPENCART",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'{config.php,admin\/config.php}'",54],",",["T_WHITESPACE"," ",54],["T_STRING","GLOB_BRACE",54],")",";",["T_WHITESPACE","\n\n\t\t\t",54],["T_FOREACH","foreach",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$files",56],["T_WHITESPACE"," ",56],["T_AS","as",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$file",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t\t\t",56],["T_VARIABLE","$upgrade",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","true",57],";",["T_WHITESPACE","\n\n\t\t\t\t",57],["T_VARIABLE","$lines",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","file",59],"(",["T_VARIABLE","$file",59],")",";",["T_WHITESPACE","\n\n\t\t\t\t",59],["T_VARIABLE","$output",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","''",61],";",["T_WHITESPACE","\n\n\t\t\t\t",61],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$lines",63],["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$line_id",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$line",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n\t\t\t\t\t",63],["T_VARIABLE","$output",64],["T_WHITESPACE"," ",64],["T_CONCAT_EQUAL",".=",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$line",64],";",["T_WHITESPACE","\n\t\t\t\t",64],"}",["T_WHITESPACE","\n\n\t\t\t\t",65],["T_VARIABLE","$output",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","str_replace",67],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/modification'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/modification'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$output",67],")",";",["T_WHITESPACE","\n\t\t\t\t",67],["T_VARIABLE","$output",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","str_replace",68],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/upload'",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/upload'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$output",68],")",";",["T_WHITESPACE","\n\t\t\t\t",68],["T_VARIABLE","$output",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","str_replace",69],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/logs'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/logs'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$output",69],")",";",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$output",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","str_replace",70],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/cache'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/cache'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$output",70],")",";",["T_WHITESPACE","\n\n\t\t\t\t",70],["T_COMMENT","\/\/ Since the download folder has had multiple locations, first set them all back to \/download, then adjust to the new location\n",72],["T_WHITESPACE","\t\t\t\t",73],["T_VARIABLE","$output",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","str_replace",73],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/download'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'\/download'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$output",73],")",";",["T_WHITESPACE","\n\t\t\t\t",73],["T_VARIABLE","$output",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","str_replace",74],"(",["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/download'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'\/download'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$output",74],")",";",["T_WHITESPACE","\n\t\t\t\t",74],["T_VARIABLE","$output",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","str_replace",75],"(",["T_CONSTANT_ENCAPSED_STRING","'\/download'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'system\/storage\/download'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$output",75],")",";",["T_WHITESPACE","\n\n\t\t\t\t",75],["T_VARIABLE","$file",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","fopen",77],"(",["T_VARIABLE","$file",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'w'",77],")",";",["T_WHITESPACE","\n\n\t\t\t\t",77],["T_STRING","fwrite",79],"(",["T_VARIABLE","$file",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$output",79],")",";",["T_WHITESPACE","\n\n\t\t\t\t",79],["T_STRING","fclose",81],"(",["T_VARIABLE","$file",81],")",";",["T_WHITESPACE","\n\n\t\t\t",81],"}",["T_WHITESPACE","\n\t\t",83],"}",["T_WHITESPACE","\n\n\t\t",84],["T_COMMENT","\/\/ Disable any existing ocmods\n",86],["T_WHITESPACE","\t\t",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","db",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","query",87],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_STRING","DB_PREFIX",87],["T_WHITESPACE"," ",87],".",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","\"modification` SET status = 0\"",87],")",";",["T_WHITESPACE","\n\n\t\t",87],["T_COMMENT","\/\/ Cleanup files in old directories\n",89],["T_WHITESPACE","\t\t",90],["T_VARIABLE","$directories",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n\t\t\t",90],["T_STRING","DIR_SYSTEM",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'modification\/'",91],",",["T_WHITESPACE","\n\t\t\t",91],["T_STRING","DIR_SYSTEM",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'storage\/modification\/'",92],",",["T_WHITESPACE","\n\t\t\t",92],["T_STRING","DIR_SYSTEM",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'logs\/'",93],",",["T_WHITESPACE","\n\t\t\t",93],["T_STRING","DIR_SYSTEM",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'cache\/'",94],",",["T_WHITESPACE","\n\t\t",94],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$files",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n        ",97],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$directories",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$dir",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n\t\t\t",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_STRING","is_dir",100],"(",["T_VARIABLE","$dir",100],")",")","{",["T_WHITESPACE","\n\t\t\t\t",100],["T_COMMENT","\/\/ Make path into an array\n",101],["T_WHITESPACE","\t\t\t\t",102],["T_VARIABLE","$path",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_VARIABLE","$dir",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'*'",102],")",";",["T_WHITESPACE","\n\n\t\t\t\t",102],["T_COMMENT","\/\/ While the path array is still populated keep looping through\n",104],["T_WHITESPACE","\t\t\t\t",105],["T_WHILE","while",105],["T_WHITESPACE"," ",105],"(",["T_STRING","count",105],"(",["T_VARIABLE","$path",105],")",["T_WHITESPACE"," ",105],["T_IS_NOT_EQUAL","!=",105],["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n\t\t\t\t\t",105],["T_VARIABLE","$next",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","array_shift",106],"(",["T_VARIABLE","$path",106],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",106],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_STRING","glob",108],"(",["T_VARIABLE","$next",108],")",["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$file",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",108],["T_COMMENT","\/\/ If directory add to path array\n",109],["T_WHITESPACE","\t\t\t\t\t\t",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","is_dir",110],"(",["T_VARIABLE","$file",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",110],["T_VARIABLE","$path",111],"[","]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$file",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'\/*'",111],";",["T_WHITESPACE","\n\t\t\t\t\t\t",111],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",112],["T_COMMENT","\/\/ Add the file to the files to be deleted array\n",114],["T_WHITESPACE","\t\t\t\t\t\t",115],["T_VARIABLE","$files",115],"[","]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$file",115],";",["T_WHITESPACE","\n\t\t\t\t\t",115],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",116],["T_COMMENT","\/\/ Reverse sort the file array\n",118],["T_WHITESPACE","\t\t\t\t\t",119],["T_STRING","rsort",119],"(",["T_VARIABLE","$files",119],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",119],["T_COMMENT","\/\/ Clear all modification files\n",121],["T_WHITESPACE","\t\t\t\t\t",122],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$files",122],["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$file",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$file",123],["T_WHITESPACE"," ",123],["T_IS_NOT_EQUAL","!=",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$dir",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'index.html'",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",123],["T_COMMENT","\/\/ If file just delete\n",124],["T_WHITESPACE","\t\t\t\t\t\t\t",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","is_file",125],"(",["T_VARIABLE","$file",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",125],"@",["T_STRING","unlink",126],"(",["T_VARIABLE","$file",126],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",126],["T_COMMENT","\/\/ If directory use the remove directory function\n",128],["T_WHITESPACE","\t\t\t\t\t\t\t",129],"}",["T_WHITESPACE"," ",129],["T_ELSEIF","elseif",129],["T_WHITESPACE"," ",129],"(",["T_STRING","is_dir",129],"(",["T_VARIABLE","$file",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",129],"@",["T_STRING","rmdir",130],"(",["T_VARIABLE","$file",130],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",130],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",131],"}",["T_WHITESPACE","\n\t\t\t\t\t",132],"}",["T_WHITESPACE","\n\t\t\t\t",133],"}",["T_WHITESPACE","\n\t\t\t",134],"}",["T_WHITESPACE","\n\t\t",135],"}",["T_WHITESPACE","\n\n\t\t",136],["T_COMMENT","\/\/ Merge image\/data to image\/catalog\n",138],["T_WHITESPACE","\t\t",139],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_STRING","file_exists",139],"(",["T_STRING","DIR_IMAGE",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'data'",139],")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n\t\t\t",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(","!",["T_STRING","file_exists",140],"(",["T_STRING","DIR_IMAGE",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'catalog'",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t\t\t\t",140],["T_STRING","rename",141],"(",["T_STRING","DIR_IMAGE",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'data'",141],",",["T_WHITESPACE"," ",141],["T_STRING","DIR_IMAGE",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'catalog'",141],")",";",["T_WHITESPACE"," ",141],["T_COMMENT","\/\/ Rename data to catalog\n",141],["T_WHITESPACE","\t\t\t",142],"}",["T_WHITESPACE"," ",142],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n\t\t\t\t",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","recursive_move",143],"(",["T_STRING","DIR_IMAGE",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'data'",143],",",["T_WHITESPACE"," ",143],["T_STRING","DIR_IMAGE",143],["T_WHITESPACE"," ",143],".",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'catalog'",143],")",";",["T_WHITESPACE","\n\t\t\t",143],"}",["T_WHITESPACE","\n\t\t",144],"}",["T_WHITESPACE","\n\n\t\t",145],["T_COMMENT","\/\/ Merge system\/upload to system\/storage\/upload\n",147],["T_WHITESPACE","\t\t",148],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_STRING","file_exists",148],"(",["T_STRING","DIR_SYSTEM",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'upload'",148],")",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","recursive_move",149],"(",["T_STRING","DIR_SYSTEM",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'upload'",149],",",["T_WHITESPACE"," ",149],["T_STRING","DIR_SYSTEM",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'storage\/upload'",149],")",";",["T_WHITESPACE","\n\t\t",149],"}",["T_WHITESPACE","\n\n\t\t",150],["T_COMMENT","\/\/ Merge download or system\/download to system\/storage\/download\n",152],["T_WHITESPACE","\t\t",153],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_STRING","file_exists",153],"(",["T_STRING","DIR_OPENCART",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'download'",153],")",")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n\t\t\t",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","recursive_move",154],"(",["T_STRING","DIR_OPENCART",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'download'",154],",",["T_WHITESPACE"," ",154],["T_STRING","DIR_SYSTEM",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'storage\/download'",154],")",";",["T_WHITESPACE","\n\t\t",154],"}",["T_WHITESPACE","\n\n\t\t",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_STRING","file_exists",157],"(",["T_STRING","DIR_SYSTEM",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'download'",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n\t\t\t",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","recursive_move",158],"(",["T_STRING","DIR_SYSTEM",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'download'",158],",",["T_WHITESPACE"," ",158],["T_STRING","DIR_SYSTEM",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'storage\/download'",158],")",";",["T_WHITESPACE","\n\t\t",158],"}",["T_WHITESPACE","\n\n\t\t",159],["T_COMMENT","\/\/ Convert image\/data to image\/catalog\n",161],["T_WHITESPACE","\t\t",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","db",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","query",162],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_STRING","DB_PREFIX",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","\"banner_image` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",162],")",";",["T_WHITESPACE","\n\t\t",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","db",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","query",163],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_STRING","DB_PREFIX",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","\"category` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",163],")",";",["T_WHITESPACE","\n\t\t",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","db",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","query",164],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_STRING","DB_PREFIX",164],["T_WHITESPACE"," ",164],".",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","\"manufacturer` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",164],")",";",["T_WHITESPACE","\n\t\t",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","db",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","query",165],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_STRING","DB_PREFIX",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","\"product` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",165],")",";",["T_WHITESPACE","\n\t\t",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","db",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","query",166],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_STRING","DB_PREFIX",166],["T_WHITESPACE"," ",166],".",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","\"product_image` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",166],")",";",["T_WHITESPACE","\n\t\t",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","db",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","query",167],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_STRING","DB_PREFIX",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","\"option_value` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",167],")",";",["T_WHITESPACE","\n\t\t",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","db",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","query",168],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_STRING","DB_PREFIX",168],["T_WHITESPACE"," ",168],".",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","\"voucher_theme` SET `image` = REPLACE (image , 'data\/', 'catalog\/')\"",168],")",";",["T_WHITESPACE","\n\t\t",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","db",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","query",169],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_STRING","DB_PREFIX",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `value` = REPLACE (value , 'data\/', 'catalog\/')\"",169],")",";",["T_WHITESPACE","\n\t\t",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","db",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","query",170],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_STRING","DB_PREFIX",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `value` = REPLACE (value , 'data\/', 'catalog\/')\"",170],")",";",["T_WHITESPACE","\n\t\t",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","db",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","query",171],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_STRING","DB_PREFIX",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","\"product_description` SET `description` = REPLACE (description , 'data\/', 'catalog\/')\"",171],")",";",["T_WHITESPACE","\n\t\t",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","db",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","query",172],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_STRING","DB_PREFIX",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","\"category_description` SET `description` = REPLACE (description , 'data\/', 'catalog\/')\"",172],")",";",["T_WHITESPACE","\n\t\t",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","query",173],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_STRING","DB_PREFIX",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","\"information_description` SET `description` = REPLACE (description , 'data\/', 'catalog\/')\"",173],")",";",["T_WHITESPACE","\n\t",173],"}",["T_WHITESPACE","\n\n\t",174],["T_PRIVATE","private",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","recursive_move",176],"(",["T_VARIABLE","$src",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$dest",176],")","{",["T_WHITESPACE","\n\n\t    ",176],["T_COMMENT","\/\/ If source is not a directory stop processing\n",178],["T_WHITESPACE","\t    ",179],["T_IF","if",179],"(","!",["T_STRING","is_dir",179],"(",["T_VARIABLE","$src",179],")",")",["T_WHITESPACE"," ",179],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_STRING","false",179],";",["T_WHITESPACE","\n\n\t    ",179],["T_COMMENT","\/\/ If the destination directory does not exist create it\n",181],["T_WHITESPACE","\t    ",182],["T_IF","if",182],"(","!",["T_STRING","is_dir",182],"(",["T_VARIABLE","$dest",182],")",")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n\t        ",182],["T_IF","if",183],"(","!","@",["T_STRING","mkdir",183],"(",["T_VARIABLE","$dest",183],")",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t            ",183],["T_COMMENT","\/\/ If the destination directory could not be created stop processing\n",184],["T_WHITESPACE","\t    \t\t",185],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_STRING","false",185],";",["T_WHITESPACE","\n\t        ",185],"}",["T_WHITESPACE","\n\t    ",186],"}",["T_WHITESPACE","\n\n\t    ",187],["T_COMMENT","\/\/ Open the source directory to read in files\n",189],["T_WHITESPACE","\t    ",190],["T_VARIABLE","$i",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_STRING","DirectoryIterator",190],"(",["T_VARIABLE","$src",190],")",";",["T_WHITESPACE","\n\t    ",190],["T_FOREACH","foreach",191],"(",["T_VARIABLE","$i",191],["T_WHITESPACE"," ",191],["T_AS","as",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$f",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n\t        ",191],["T_IF","if",192],"(",["T_VARIABLE","$f",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","isFile",192],"(",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_AND","&&",192],["T_WHITESPACE"," ",192],"!",["T_STRING","file_exists",192],"(","\"",["T_VARIABLE","$dest",192],["T_ENCAPSED_AND_WHITESPACE","\/",192],"\"",["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_VARIABLE","$f",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getFilename",192],"(",")",")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n\t            ",192],"@",["T_STRING","rename",193],"(",["T_VARIABLE","$f",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getRealPath",193],"(",")",",",["T_WHITESPACE"," ",193],"\"",["T_VARIABLE","$dest",193],["T_ENCAPSED_AND_WHITESPACE","\/",193],"\"",["T_WHITESPACE"," ",193],".",["T_WHITESPACE"," ",193],["T_VARIABLE","$f",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getFilename",193],"(",")",")",";",["T_WHITESPACE","\n\t        ",193],"}",["T_WHITESPACE"," ",194],["T_ELSEIF","elseif",194],"(","!",["T_VARIABLE","$f",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","isDot",194],"(",")",["T_WHITESPACE"," ",194],["T_BOOLEAN_AND","&&",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$f",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","isDir",194],"(",")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t            ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","recursive_move",195],"(",["T_VARIABLE","$f",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getRealPath",195],"(",")",",",["T_WHITESPACE"," ",195],"\"",["T_VARIABLE","$dest",195],["T_ENCAPSED_AND_WHITESPACE","\/",195],["T_VARIABLE","$f",195],"\"",")",";",["T_WHITESPACE","\n\t            ",195],"@",["T_STRING","unlink",196],"(",["T_VARIABLE","$f",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getRealPath",196],"(",")",")",";",["T_WHITESPACE","\n\t        ",196],"}",["T_WHITESPACE","\n\t    ",197],"}",["T_WHITESPACE","\n\n\t\t",198],["T_COMMENT","\/\/ Remove source folder after move\n",200],["T_WHITESPACE","\t    ",201],"@",["T_STRING","unlink",201],"(",["T_VARIABLE","$src",201],")",";",["T_WHITESPACE","\n\t",201],"}",["T_WHITESPACE","\n",202],"}"]
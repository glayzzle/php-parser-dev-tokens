[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelUpgrade1002",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","upgrade",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_COMMENT","\/\/ setting\n",4],["T_WHITESPACE","\t\t",5],["T_VARIABLE","$query",5],["T_WHITESPACE"," ",5],"=",["T_WHITESPACE"," ",5],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","db",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","query",5],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT setting_id FROM `\"",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_STRING","DB_PREFIX",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `key` = 'config_product_limit'\"",5],")",";",["T_WHITESPACE","\n\n\t\t",5],["T_IF","if",7],["T_WHITESPACE"," ",7],"(","!",["T_VARIABLE","$query",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","num_rows",7],")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t\t",7],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","query",8],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_STRING","DB_PREFIX",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `key` = 'config_product_limit', `value` = '20', `code` = 'config', `store_id` = 0\"",8],")",";",["T_WHITESPACE","\n\t\t",8],"}",["T_WHITESPACE","\n\n\t\t",9],["T_COMMENT","\/\/  setting\n",11],["T_WHITESPACE","\t\t",12],["T_VARIABLE","$query",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","query",12],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT setting_id FROM `\"",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_STRING","DB_PREFIX",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `store_id` = '0' AND `key` = 'config_voucher_min'\"",12],")",";",["T_WHITESPACE","\n\n\t\t",12],["T_IF","if",14],["T_WHITESPACE"," ",14],"(","!",["T_VARIABLE","$query",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","num_rows",14],")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","query",15],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_STRING","DB_PREFIX",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `key` = 'config_voucher_min', `value` = '1', `code` = 'config', `store_id` = 0\"",15],")",";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_COMMENT","\/\/  setting\n",18],["T_WHITESPACE","\t\t",19],["T_VARIABLE","$query",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","db",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","query",19],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT setting_id FROM `\"",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_STRING","DB_PREFIX",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","\"setting` WHERE `store_id` = '0' AND `key` = 'config_voucher_max'\"",19],")",";",["T_WHITESPACE","\n\n\t\t",19],["T_IF","if",21],["T_WHITESPACE"," ",21],"(","!",["T_VARIABLE","$query",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","num_rows",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\t\t\t",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","db",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","query",22],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_STRING","DB_PREFIX",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","\"setting` SET `key` = 'config_voucher_max', `value` = '1000', `code` = 'config', `store_id` = 0\"",22],")",";",["T_WHITESPACE","\n\t\t",22],"}",["T_WHITESPACE","\n\n\t\t",23],["T_COMMENT","\/\/ customer\n",25],["T_WHITESPACE","\t\t",26],["T_VARIABLE","$query",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","db",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","query",26],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = '\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_DATABASE",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"' AND TABLE_NAME = '\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_PREFIX",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"customer' AND COLUMN_NAME = 'safe'\"",26],")",";",["T_WHITESPACE","\n\n\t\t",26],["T_IF","if",28],["T_WHITESPACE"," ",28],"(","!",["T_VARIABLE","$query",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","num_rows",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","db",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","query",29],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_STRING","DB_PREFIX",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","\"customer` ADD `safe` tinyint(1) NOT NULL AFTER `approved`\"",29],")",";",["T_WHITESPACE","\n\t\t",29],"}",["T_WHITESPACE","\n\n\t\t",30],["T_COMMENT","\/\/ customer\n",32],["T_WHITESPACE","\t\t",33],["T_VARIABLE","$query",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","query",33],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = '\"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_STRING","DB_DATABASE",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"' AND TABLE_NAME = '\"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_STRING","DB_PREFIX",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"customer_group' AND COLUMN_NAME = 'name'\"",33],")",";",["T_WHITESPACE","\n\n\t\t",33],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$query",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","num_rows",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_VARIABLE","$customer_group_query",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","db",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","query",36],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_STRING","DB_PREFIX",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"customer_group`\"",36],")",";",["T_WHITESPACE","\n\n\t\t\t",36],["T_FOREACH","foreach",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$customer_group_query",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","rows",38],["T_WHITESPACE"," ",38],["T_AS","as",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$customer_group",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t\t",38],["T_VARIABLE","$language_query",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","db",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","query",39],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `language_id` FROM `\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_STRING","DB_PREFIX",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"language`\"",39],")",";",["T_WHITESPACE","\n\n\t\t\t\t",39],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$language_query",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","rows",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$language",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t\t\t",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","db",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","query",42],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_STRING","DB_PREFIX",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"customer_group_description` SET `customer_group_id` = '\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_INT_CAST","(int)",42],["T_VARIABLE","$customer_group",42],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",42],"]",["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"', `language_id` = '\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_INT_CAST","(int)",42],["T_VARIABLE","$language",42],"[",["T_CONSTANT_ENCAPSED_STRING","'language_id'",42],"]",["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"', `name` = '\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","db",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","escape",42],"(",["T_VARIABLE","$customer_group",42],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",42],"]",")",["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"'\"",42],")",";",["T_WHITESPACE","\n\t\t\t\t",42],"}",["T_WHITESPACE","\n\t\t\t",43],"}",["T_WHITESPACE","\n\n\t\t\t",44],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_STRING","DB_PREFIX",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"customer_group` DROP `name`\"",46],")",";",["T_WHITESPACE","\n\t\t",46],"}",["T_WHITESPACE","\n\n\t\t",47],["T_COMMENT","\/\/ product_option\n",49],["T_WHITESPACE","\t\t",50],["T_VARIABLE","$query",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","db",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","query",50],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = '\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_DATABASE",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"' AND TABLE_NAME = '\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_PREFIX",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"product_option' AND COLUMN_NAME = 'option_value'\"",50],")",";",["T_WHITESPACE","\n\n\t\t",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$query",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","num_rows",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t\t",52],["T_COMMENT","\/\/ Drop product option value if exsits\n",53],["T_WHITESPACE","\t\t\t",54],["T_VARIABLE","$query",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","db",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","query",54],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = '\"",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_STRING","DB_DATABASE",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","\"' AND TABLE_NAME = '\"",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_STRING","DB_PREFIX",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","\"product_option' AND COLUMN_NAME = 'value'\"",54],")",";",["T_WHITESPACE","\n\n\t\t\t",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$query",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","num_rows",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n\t\t\t\t",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","db",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","query",57],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_STRING","DB_PREFIX",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","\"product_option` DROP `value`\"",57],")",";",["T_WHITESPACE","\n\t\t\t",57],"}",["T_WHITESPACE","\n\n\t\t\t",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","db",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","query",60],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_STRING","DB_PREFIX",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"product_option` CHANGE `option_value` `value` TEXT NOT NULL\"",60],")",";",["T_WHITESPACE","\n\t\t",60],"}",["T_WHITESPACE","\n\n\t\t",61],["T_COMMENT","\/\/ category\n",63],["T_WHITESPACE","\t\t",64],["T_VARIABLE","$primary_data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n\n\t\t",64],["T_VARIABLE","$query",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","db",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","query",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW KEYS FROM `\"",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_STRING","DB_PREFIX",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","\"category` WHERE Key_name = 'PRIMARY'\"",66],")",";",["T_WHITESPACE","\n\n\t\t",66],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$query",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","rows",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$result",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t",68],["T_VARIABLE","$primary_data",69],"[","]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$result",69],"[",["T_CONSTANT_ENCAPSED_STRING","'Column_name'",69],"]",";",["T_WHITESPACE","\n\t\t",69],"}",["T_WHITESPACE","\n\n\t\t",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(","!",["T_STRING","in_array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'category_id'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$primary_data",72],")",["T_WHITESPACE"," ",72],["T_BOOLEAN_OR","||",72],["T_WHITESPACE"," ",72],"!",["T_STRING","in_array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'parent_id'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$primary_data",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","db",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","query",73],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_STRING","DB_PREFIX",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","\"category` DROP PRIMARY KEY, ADD PRIMARY KEY(`category_id`, `parent_id`)\"",73],")",";",["T_WHITESPACE","\n\t\t",73],"}",["T_WHITESPACE","\n\n\t\t",74],["T_COMMENT","\/\/ category\n",76],["T_WHITESPACE","\t\t",77],["T_VARIABLE","$query",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","db",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","query",77],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = '\"",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_STRING","DB_DATABASE",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","\"' AND TABLE_NAME = '\"",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_STRING","DB_PREFIX",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","\"category_description' AND COLUMN_NAME = 'meta_title'\"",77],")",";",["T_WHITESPACE","\n\n\t\t",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(","!",["T_VARIABLE","$query",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","num_rows",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n\t\t\t",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","db",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","query",80],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_STRING","DB_PREFIX",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","\"category_description` ADD `meta_title` varchar(255) NOT NULL AFTER `description`\"",80],")",";",["T_WHITESPACE","\n\t\t",80],"}",["T_WHITESPACE","\n\n\t\t",81],["T_COMMENT","\/\/ Sort the categories to take advantage of the nested set model\n",83],["T_WHITESPACE","\t\t",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","repairCategories",84],"(",["T_LNUMBER","0",84],")",";",["T_WHITESPACE","\n\t",84],"}",["T_WHITESPACE","\n\n\t",85],["T_COMMENT","\/\/ Function to repair any erroneous categories that are not in the category path table.\n",87],["T_WHITESPACE","\t",88],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","repairCategories",88],"(",["T_VARIABLE","$parent_id",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_LNUMBER","0",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t",88],["T_VARIABLE","$query",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","db",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","query",89],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","DB_PREFIX",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"category` WHERE `parent_id` = '\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_INT_CAST","(int)",89],["T_VARIABLE","$parent_id",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"'\"",89],")",";",["T_WHITESPACE","\n\n\t\t",89],["T_FOREACH","foreach",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$query",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","rows",91],["T_WHITESPACE"," ",91],["T_AS","as",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$category",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n\t\t\t",91],["T_COMMENT","\/\/ Delete the path below the current one\n",92],["T_WHITESPACE","\t\t\t",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","query",93],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_STRING","DB_PREFIX",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"category_path` WHERE `category_id` = '\"",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_INT_CAST","(int)",93],["T_VARIABLE","$category",93],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",93],"]",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"'\"",93],")",";",["T_WHITESPACE","\n\n\t\t\t",93],["T_COMMENT","\/\/ Fix for records with no paths\n",95],["T_WHITESPACE","\t\t\t",96],["T_VARIABLE","$level",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_LNUMBER","0",96],";",["T_WHITESPACE","\n\n\t\t\t",96],["T_VARIABLE","$query",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","db",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","query",98],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_STRING","DB_PREFIX",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","\"category_path` WHERE `category_id` = '\"",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_INT_CAST","(int)",98],["T_VARIABLE","$parent_id",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `level` ASC\"",98],")",";",["T_WHITESPACE","\n\n\t\t\t",98],["T_FOREACH","foreach",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$query",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","rows",100],["T_WHITESPACE"," ",100],["T_AS","as",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$result",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n\t\t\t\t",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","db",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","query",101],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_STRING","DB_PREFIX",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"category_path` SET `category_id` = '\"",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_INT_CAST","(int)",101],["T_VARIABLE","$category",101],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",101],"]",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"', `path_id` = '\"",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_INT_CAST","(int)",101],["T_VARIABLE","$result",101],"[",["T_CONSTANT_ENCAPSED_STRING","'path_id'",101],"]",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"', `level` = '\"",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_INT_CAST","(int)",101],["T_VARIABLE","$level",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"'\"",101],")",";",["T_WHITESPACE","\n\n\t\t\t\t",101],["T_VARIABLE","$level",103],["T_INC","++",103],";",["T_WHITESPACE","\n\t\t\t",103],"}",["T_WHITESPACE","\n\n\t\t\t",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","db",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","query",106],"(",["T_CONSTANT_ENCAPSED_STRING","\"REPLACE INTO `\"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_STRING","DB_PREFIX",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"category_path` SET `category_id` = '\"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_VARIABLE","$category",106],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",106],"]",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"', `path_id` = '\"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_VARIABLE","$category",106],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",106],"]",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"', `level` = '\"",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_VARIABLE","$level",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"'\"",106],")",";",["T_WHITESPACE","\n\n\t\t\t",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","repairCategories",108],"(",["T_VARIABLE","$category",108],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",108],"]",")",";",["T_WHITESPACE","\n\t\t",108],"}",["T_WHITESPACE","\n\t",109],"}",["T_WHITESPACE","\n",110],"}"]
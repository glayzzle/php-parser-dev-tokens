[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelUpgrade1000",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","upgrade",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_COMMENT","\/\/ This is a generic upgrade script.\n",4],["T_WHITESPACE","\t\t",5],["T_COMMENT","\/\/ It makes mass changes to the DB by creating tables that are not in the current db, changes the charset and DB engine to the SQL schema.\n",5],["T_WHITESPACE","\t\t",6],["T_COMMENT","\/\/ The uprade script is not coherent because of the changes over time to the upgrades so im grouping the changes into different files\n",6],["T_WHITESPACE","\t\t",7],["T_COMMENT","\/\/ Future version should have a upgrade file name that matches the version number being changed to\n",7],["T_WHITESPACE","\n\t\t",8],["T_COMMENT","\/\/ Load the sql file\n",9],["T_WHITESPACE","\t\t",10],["T_VARIABLE","$file",10],["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_STRING","DIR_APPLICATION",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'opencart.sql'",10],";",["T_WHITESPACE","\n\n\t\t",10],["T_IF","if",12],["T_WHITESPACE"," ",12],"(","!",["T_STRING","file_exists",12],"(",["T_VARIABLE","$file",12],")",")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_EXIT","exit",13],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not load sql file: '",13],["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_VARIABLE","$file",13],")",";",["T_WHITESPACE","\n\t\t",13],"}",["T_WHITESPACE","\n\n\t\t",14],["T_VARIABLE","$string",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","''",16],";",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$lines",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_STRING","file",18],"(",["T_VARIABLE","$file",18],")",";",["T_WHITESPACE","\n\n\t\t",18],["T_VARIABLE","$status",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_STRING","false",20],";",["T_WHITESPACE","\n\n\t\t",20],["T_COMMENT","\/\/ Get only the create statements\n",22],["T_WHITESPACE","\t\t",23],["T_FOREACH","foreach",23],"(",["T_VARIABLE","$lines",23],["T_WHITESPACE"," ",23],["T_AS","as",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$line",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t\t",23],["T_COMMENT","\/\/ Set any prefix\n",24],["T_WHITESPACE","\t\t\t",25],["T_VARIABLE","$line",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","str_replace",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `oc_\"",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"DROP TABLE IF EXISTS `\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_STRING","DB_PREFIX",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$line",25],")",";",["T_WHITESPACE","\n\n\t\t\t",25],["T_VARIABLE","$line",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","str_replace",27],"(",["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE IF NOT EXISTS `oc_\"",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE `\"",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_STRING","DB_PREFIX",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$line",27],")",";",["T_WHITESPACE","\n\n\t\t\t",27],["T_VARIABLE","$line",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","str_replace",29],"(",["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE `oc_\"",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE `\"",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_STRING","DB_PREFIX",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$line",29],")",";",["T_WHITESPACE","\n\n\t\t\t",29],["T_COMMENT","\/\/ If line begins with create table we want to start recording\n",31],["T_WHITESPACE","\t\t\t",32],["T_IF","if",32],["T_WHITESPACE"," ",32],"(",["T_STRING","substr",32],"(",["T_VARIABLE","$line",32],",",["T_WHITESPACE"," ",32],["T_LNUMBER","0",32],",",["T_WHITESPACE"," ",32],["T_LNUMBER","12",32],")",["T_WHITESPACE"," ",32],["T_IS_EQUAL","==",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'CREATE TABLE'",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t\t\t",32],["T_VARIABLE","$status",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","true",33],";",["T_WHITESPACE","\n\t\t\t",33],"}",["T_WHITESPACE","\n\n\t\t\t",34],["T_IF","if",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$status",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t\t",36],["T_VARIABLE","$string",37],["T_WHITESPACE"," ",37],["T_CONCAT_EQUAL",".=",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$line",37],";",["T_WHITESPACE","\n\t\t\t",37],"}",["T_WHITESPACE","\n\n\t\t\t",38],["T_COMMENT","\/\/ If line contains with ; we want to stop recording\n",40],["T_WHITESPACE","\t\t\t",41],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_STRING","preg_match",41],"(",["T_CONSTANT_ENCAPSED_STRING","'\/;\/'",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$line",41],")",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t\t",41],["T_VARIABLE","$status",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","false",42],";",["T_WHITESPACE","\n\t\t\t",42],"}",["T_WHITESPACE","\n\t\t",43],"}",["T_WHITESPACE","\n\n\t\t",44],["T_VARIABLE","$table_new_data",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",";",["T_WHITESPACE","\n\n\t\t",46],["T_COMMENT","\/\/ Trim any spaces\n",48],["T_WHITESPACE","\t\t",49],["T_VARIABLE","$string",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","trim",49],"(",["T_VARIABLE","$string",49],")",";",["T_WHITESPACE","\n\n\t\t",49],["T_COMMENT","\/\/ Trim any ;\n",51],["T_WHITESPACE","\t\t",52],["T_VARIABLE","$string",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","trim",52],"(",["T_VARIABLE","$string",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","';'",52],")",";",["T_WHITESPACE","\n\n\t\t",52],["T_COMMENT","\/\/ Start reading each create statement\n",54],["T_WHITESPACE","\t\t",55],["T_VARIABLE","$statements",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","explode",55],"(",["T_CONSTANT_ENCAPSED_STRING","';'",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$string",55],")",";",["T_WHITESPACE","\n\n\t\t",55],["T_FOREACH","foreach",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$statements",57],["T_WHITESPACE"," ",57],["T_AS","as",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$sql",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n\t\t\t",57],["T_COMMENT","\/\/ Get all fields\n",58],["T_WHITESPACE","\t\t\t",59],["T_VARIABLE","$field_data",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",59],["T_STRING","preg_match_all",61],"(",["T_CONSTANT_ENCAPSED_STRING","'#`(\\w[\\w\\d]*)`\\s+((tinyint|smallint|mediumint|bigint|int|tinytext|text|mediumtext|longtext|tinyblob|blob|mediumblob|longblob|varchar|char|datetime|date|float|double|decimal|timestamp|time|year|enum|set|binary|varbinary)(\\((.*)\\))?){1}\\s*(collate (\\w+)\\s*)?(unsigned\\s*)?((NOT\\s*NULL\\s*)|(NULL\\s*))?(auto_increment\\s*)?(default \\'([^\\']*)\\'\\s*)?#i'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$sql",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$match",61],")",";",["T_WHITESPACE","\n\n\t\t\t",61],["T_FOREACH","foreach",63],"(",["T_STRING","array_keys",63],"(",["T_VARIABLE","$match",63],"[",["T_LNUMBER","0",63],"]",")",["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$key",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n\t\t\t\t",63],["T_VARIABLE","$field_data",64],"[","]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n\t\t\t\t\t",64],["T_CONSTANT_ENCAPSED_STRING","'name'",65],["T_WHITESPACE","          ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_STRING","trim",65],"(",["T_VARIABLE","$match",65],"[",["T_LNUMBER","1",65],"]","[",["T_VARIABLE","$key",65],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",65],["T_CONSTANT_ENCAPSED_STRING","'type'",66],["T_WHITESPACE","          ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","strtoupper",66],"(",["T_STRING","trim",66],"(",["T_VARIABLE","$match",66],"[",["T_LNUMBER","3",66],"]","[",["T_VARIABLE","$key",66],"]",")",")",",",["T_WHITESPACE","\n\t\t\t\t\t",66],["T_CONSTANT_ENCAPSED_STRING","'size'",67],["T_WHITESPACE","          ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_STRING","str_replace",67],"(",["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'('",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","')'",67],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","''",67],",",["T_WHITESPACE"," ",67],["T_STRING","trim",67],"(",["T_VARIABLE","$match",67],"[",["T_LNUMBER","4",67],"]","[",["T_VARIABLE","$key",67],"]",")",")",",",["T_WHITESPACE","\n\t\t\t\t\t",67],["T_CONSTANT_ENCAPSED_STRING","'sizeext'",68],["T_WHITESPACE","       ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_STRING","trim",68],"(",["T_VARIABLE","$match",68],"[",["T_LNUMBER","6",68],"]","[",["T_VARIABLE","$key",68],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",68],["T_CONSTANT_ENCAPSED_STRING","'collation'",69],["T_WHITESPACE","     ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","trim",69],"(",["T_VARIABLE","$match",69],"[",["T_LNUMBER","7",69],"]","[",["T_VARIABLE","$key",69],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",69],["T_CONSTANT_ENCAPSED_STRING","'unsigned'",70],["T_WHITESPACE","      ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_STRING","trim",70],"(",["T_VARIABLE","$match",70],"[",["T_LNUMBER","8",70],"]","[",["T_VARIABLE","$key",70],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",70],["T_CONSTANT_ENCAPSED_STRING","'notnull'",71],["T_WHITESPACE","       ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","trim",71],"(",["T_VARIABLE","$match",71],"[",["T_LNUMBER","9",71],"]","[",["T_VARIABLE","$key",71],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",71],["T_CONSTANT_ENCAPSED_STRING","'autoincrement'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","trim",72],"(",["T_VARIABLE","$match",72],"[",["T_LNUMBER","12",72],"]","[",["T_VARIABLE","$key",72],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t",72],["T_CONSTANT_ENCAPSED_STRING","'default'",73],["T_WHITESPACE","       ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_STRING","trim",73],"(",["T_VARIABLE","$match",73],"[",["T_LNUMBER","14",73],"]","[",["T_VARIABLE","$key",73],"]",")",["T_WHITESPACE","\n\t\t\t\t",73],")",";",["T_WHITESPACE","\n\t\t\t",74],"}",["T_WHITESPACE","\n\n\t\t\t",75],["T_COMMENT","\/\/ Get primary keys\n",77],["T_WHITESPACE","\t\t\t",78],["T_VARIABLE","$primary_data",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",78],["T_STRING","preg_match",80],"(",["T_CONSTANT_ENCAPSED_STRING","'#primary\\s*key\\s*\\([^)]+\\)#i'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$sql",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$match",80],")",";",["T_WHITESPACE","\n\n\t\t\t",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_ISSET","isset",82],"(",["T_VARIABLE","$match",82],"[",["T_LNUMBER","0",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n\t\t\t\t",82],["T_STRING","preg_match_all",83],"(",["T_CONSTANT_ENCAPSED_STRING","'#`(\\w[\\w\\d]*)`#'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$match",83],"[",["T_LNUMBER","0",83],"]",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$match",83],")",";",["T_WHITESPACE","\n\t\t\t",83],"}",["T_WHITESPACE"," ",84],["T_ELSE","else",84],"{",["T_WHITESPACE","\n\t\t\t\t",84],["T_VARIABLE","$match",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n\t\t\t",85],"}",["T_WHITESPACE","\n\n\t\t\t",86],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$match",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n\t\t\t\t",88],["T_FOREACH","foreach",89],"(",["T_VARIABLE","$match",89],"[",["T_LNUMBER","1",89],"]",["T_WHITESPACE"," ",89],["T_AS","as",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$primary",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n\t\t\t\t\t",89],["T_VARIABLE","$primary_data",90],"[","]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$primary",90],";",["T_WHITESPACE","\n\t\t\t\t",90],"}",["T_WHITESPACE","\n\t\t\t",91],"}",["T_WHITESPACE","\n\n\t\t\t",92],["T_COMMENT","\/\/ Get indexes\n",94],["T_WHITESPACE","\t\t\t",95],["T_VARIABLE","$index_data",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",95],["T_VARIABLE","$indexes",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",97],["T_STRING","preg_match_all",99],"(",["T_CONSTANT_ENCAPSED_STRING","'#key\\s*`\\w[\\w\\d]*`\\s*\\(.*\\)#i'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$sql",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$match",99],")",";",["T_WHITESPACE","\n\n\t\t\t",99],["T_FOREACH","foreach",101],"(",["T_VARIABLE","$match",101],"[",["T_LNUMBER","0",101],"]",["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$key",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t\t\t\t",101],["T_STRING","preg_match_all",102],"(",["T_CONSTANT_ENCAPSED_STRING","'#`(\\w[\\w\\d]*)`#'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$key",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$match",102],")",";",["T_WHITESPACE","\n\n\t\t\t\t",102],["T_VARIABLE","$indexes",104],"[","]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$match",104],";",["T_WHITESPACE","\n\t\t\t",104],"}",["T_WHITESPACE","\n\n\t\t\t",105],["T_FOREACH","foreach",107],"(",["T_VARIABLE","$indexes",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$index",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t\t\t",107],["T_VARIABLE","$key",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","''",108],";",["T_WHITESPACE","\n\n\t\t\t\t",108],["T_FOREACH","foreach",110],"(",["T_VARIABLE","$index",110],"[",["T_LNUMBER","1",110],"]",["T_WHITESPACE"," ",110],["T_AS","as",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$field",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n\t\t\t\t\t",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$key",111],["T_WHITESPACE"," ",111],["T_IS_EQUAL","==",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",111],["T_VARIABLE","$key",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$field",112],";",["T_WHITESPACE","\n\t\t\t\t\t",112],"}",["T_WHITESPACE"," ",113],["T_ELSE","else",113],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",113],["T_VARIABLE","$index_data",114],"[",["T_VARIABLE","$key",114],"]","[","]",["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$field",114],";",["T_WHITESPACE","\n\t\t\t\t\t",114],"}",["T_WHITESPACE","\n\t\t\t\t",115],"}",["T_WHITESPACE","\n\t\t\t",116],"}",["T_WHITESPACE","\n\n\t\t\t",117],["T_COMMENT","\/\/ Table options\n",119],["T_WHITESPACE","\t\t\t",120],["T_VARIABLE","$option_data",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",120],["T_STRING","preg_match_all",122],"(",["T_CONSTANT_ENCAPSED_STRING","'#(\\w+)=\\'?(\\w+\\~?\\w+)\\'?#'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$sql",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$option",122],")",";",["T_WHITESPACE","\n\n\t\t\t",122],["T_FOREACH","foreach",124],"(",["T_STRING","array_keys",124],"(",["T_VARIABLE","$option",124],"[",["T_LNUMBER","0",124],"]",")",["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$key",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n\t\t\t\t",124],["T_VARIABLE","$option_data",125],"[",["T_VARIABLE","$option",125],"[",["T_LNUMBER","1",125],"]","[",["T_VARIABLE","$key",125],"]","]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$option",125],"[",["T_LNUMBER","2",125],"]","[",["T_VARIABLE","$key",125],"]",";",["T_WHITESPACE","\n\t\t\t",125],"}",["T_WHITESPACE","\n\n\t\t\t",126],["T_COMMENT","\/\/ Get Table Name\n",128],["T_WHITESPACE","\t\t\t",129],["T_STRING","preg_match_all",129],"(",["T_CONSTANT_ENCAPSED_STRING","'#create\\s*table\\s*`(\\w[\\w\\d]*)`#i'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$sql",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$table",129],")",";",["T_WHITESPACE","\n\n\t\t\t",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_ISSET","isset",131],"(",["T_VARIABLE","$table",131],"[",["T_LNUMBER","1",131],"]","[",["T_LNUMBER","0",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\t\t\t\t",131],["T_VARIABLE","$table_new_data",132],"[","]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_WHITESPACE","\n\t\t\t\t\t",132],["T_CONSTANT_ENCAPSED_STRING","'sql'",133],["T_WHITESPACE","     ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$sql",133],",",["T_WHITESPACE","\n\t\t\t\t\t",133],["T_CONSTANT_ENCAPSED_STRING","'name'",134],["T_WHITESPACE","    ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$table",134],"[",["T_LNUMBER","1",134],"]","[",["T_LNUMBER","0",134],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",134],["T_CONSTANT_ENCAPSED_STRING","'field'",135],["T_WHITESPACE","   ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$field_data",135],",",["T_WHITESPACE","\n\t\t\t\t\t",135],["T_CONSTANT_ENCAPSED_STRING","'primary'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$primary_data",136],",",["T_WHITESPACE","\n\t\t\t\t\t",136],["T_CONSTANT_ENCAPSED_STRING","'index'",137],["T_WHITESPACE","   ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$index_data",137],",",["T_WHITESPACE","\n\t\t\t\t\t",137],["T_CONSTANT_ENCAPSED_STRING","'option'",138],["T_WHITESPACE","  ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$option_data",138],["T_WHITESPACE","\n\t\t\t\t",138],")",";",["T_WHITESPACE","\n\t\t\t",139],"}",["T_WHITESPACE","\n\t\t",140],"}",["T_WHITESPACE","\n\n\t\t",141],["T_COMMENT","\/\/ Get all current tables, fields, type, size, etc..\n",143],["T_WHITESPACE","\t\t",144],["T_VARIABLE","$table_old_data",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n\n\t\t",144],["T_VARIABLE","$table_query",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","db",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","query",146],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW TABLES FROM `\"",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_STRING","DB_DATABASE",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","\"`\"",146],")",";",["T_WHITESPACE","\n\n\t\t",146],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$table_query",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","rows",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$table",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_STRING","utf8_substr",149],"(",["T_VARIABLE","$table",149],"[",["T_CONSTANT_ENCAPSED_STRING","'Tables_in_'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_STRING","DB_DATABASE",149],"]",",",["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],",",["T_WHITESPACE"," ",149],["T_STRING","strlen",149],"(",["T_STRING","DB_PREFIX",149],")",")",["T_WHITESPACE"," ",149],["T_IS_EQUAL","==",149],["T_WHITESPACE"," ",149],["T_STRING","DB_PREFIX",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n\t\t\t\t",149],["T_VARIABLE","$field_data",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",150],["T_VARIABLE","$extended_field_data",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",151],["T_VARIABLE","$field_query",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","db",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","query",153],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW COLUMNS FROM `\"",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$table",153],"[",["T_CONSTANT_ENCAPSED_STRING","'Tables_in_'",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_STRING","DB_DATABASE",153],"]",["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","\"`\"",153],")",";",["T_WHITESPACE","\n\n\t\t\t\t",153],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$field_query",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","rows",155],["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$field",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t\t\t",155],["T_VARIABLE","$field_data",156],"[","]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$field",156],"[",["T_CONSTANT_ENCAPSED_STRING","'Field'",156],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",156],["T_VARIABLE","$extended_field_data",157],"[","]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$field",157],";",["T_WHITESPACE","\n\t\t\t\t",157],"}",["T_WHITESPACE","\n\n\t\t\t\t",158],["T_VARIABLE","$table_old_data",160],"[",["T_VARIABLE","$table",160],"[",["T_CONSTANT_ENCAPSED_STRING","'Tables_in_'",160],["T_WHITESPACE"," ",160],".",["T_WHITESPACE"," ",160],["T_STRING","DB_DATABASE",160],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'field_list'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$field_data",160],";",["T_WHITESPACE","\n\t\t\t\t",160],["T_VARIABLE","$table_old_data",161],"[",["T_VARIABLE","$table",161],"[",["T_CONSTANT_ENCAPSED_STRING","'Tables_in_'",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_STRING","DB_DATABASE",161],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'extended_field_data'",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$extended_field_data",161],";",["T_WHITESPACE","\n\t\t\t",161],"}",["T_WHITESPACE","\n\t\t",162],"}",["T_WHITESPACE","\n\n\t\t",163],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$table_new_data",165],["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$table",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n\t\t\t",165],["T_COMMENT","\/\/ If table is not found create it\n",166],["T_WHITESPACE","\t\t\t",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_ISSET","isset",167],"(",["T_VARIABLE","$table_old_data",167],"[",["T_VARIABLE","$table",167],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",167],"]","]",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n\t\t\t\t",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","db",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","query",168],"(",["T_VARIABLE","$table",168],"[",["T_CONSTANT_ENCAPSED_STRING","'sql'",168],"]",")",";",["T_WHITESPACE","\n\t\t\t",168],"}",["T_WHITESPACE"," ",169],["T_ELSE","else",169],["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n\t\t\t\t",169],["T_COMMENT","\/\/ DB Engine\n",170],["T_WHITESPACE","\t\t\t\t",171],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_ISSET","isset",171],"(",["T_VARIABLE","$table",171],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",171],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ENGINE'",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t\t\t",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","db",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","query",172],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$table",172],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",172],"]",["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","\"` ENGINE = `\"",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$table",172],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",172],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ENGINE'",172],"]",["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","\"`\"",172],")",";",["T_WHITESPACE","\n\t\t\t\t",172],"}",["T_WHITESPACE","\n\n\t\t\t\t",173],["T_COMMENT","\/\/ Charset\n",175],["T_WHITESPACE","\t\t\t\t",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_ISSET","isset",176],"(",["T_VARIABLE","$table",176],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",176],"]","[",["T_CONSTANT_ENCAPSED_STRING","'CHARSET'",176],"]",")",["T_WHITESPACE"," ",176],["T_BOOLEAN_AND","&&",176],["T_WHITESPACE"," ",176],["T_ISSET","isset",176],"(",["T_VARIABLE","$table",176],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",176],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLLATE'",176],"]",")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n\t\t\t\t\t",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","db",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","query",177],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$table",177],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",177],"]",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"` DEFAULT CHARACTER SET `\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$table",177],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",177],"]","[",["T_CONSTANT_ENCAPSED_STRING","'CHARSET'",177],"]",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"` COLLATE `\"",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$table",177],"[",["T_CONSTANT_ENCAPSED_STRING","'option'",177],"]","[",["T_CONSTANT_ENCAPSED_STRING","'COLLATE'",177],"]",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"`\"",177],")",";",["T_WHITESPACE","\n\t\t\t\t",177],"}",["T_WHITESPACE","\n\n\t\t\t\t",178],["T_COMMENT","\/\/ Loop through all tables and adjust based on opencart.sql file\n",180],["T_WHITESPACE","\t\t\t\t",181],["T_VARIABLE","$i",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_LNUMBER","0",181],";",["T_WHITESPACE","\n\n\t\t\t\t",181],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$table",183],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",183],"]",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$field",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\n\t\t\t\t\t",183],["T_COMMENT","\/\/ If field is not found create it\n",185],["T_WHITESPACE","\t\t\t\t\t",186],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_STRING","in_array",186],"(",["T_VARIABLE","$field",186],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",186],"]",",",["T_WHITESPACE"," ",186],["T_VARIABLE","$table_old_data",186],"[",["T_VARIABLE","$table",186],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",186],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'field_list'",186],"]",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n\n\t\t\t\t\t\t",186],["T_VARIABLE","$status",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","true",188],";",["T_WHITESPACE","\n\t\t\t\t\t\t",188],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$table_old_data",189],"[",["T_VARIABLE","$table",189],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",189],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'extended_field_data'",189],"]",["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$oldfield",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$oldfield",190],"[",["T_CONSTANT_ENCAPSED_STRING","'Extra'",190],"]",["T_WHITESPACE"," ",190],["T_IS_EQUAL","==",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$field",190],"[",["T_CONSTANT_ENCAPSED_STRING","'autoincrement'",190],"]",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",190],["T_VARIABLE","$sql",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$table",191],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",191],"]",["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"` CHANGE `\"",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$oldfield",191],"[",["T_CONSTANT_ENCAPSED_STRING","'Field'",191],"]",["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"` `\"",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$field",191],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",191],"]",["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","\"` \"",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_STRING","strtoupper",191],"(",["T_VARIABLE","$field",191],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",191],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",191],["T_VARIABLE","$status",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","false",192],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",192],["T_BREAK","break",193],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",193],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",194],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",195],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$status",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",197],["T_VARIABLE","$sql",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$table",198],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",198],"]",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"` ADD `\"",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$field",198],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",198],"]",["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"` \"",198],["T_WHITESPACE"," ",198],".",["T_WHITESPACE"," ",198],["T_VARIABLE","$field",198],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",198],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",198],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",199],["T_IF","if",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$field",201],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",201],"]",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",201],["T_VARIABLE","$sql",202],["T_WHITESPACE"," ",202],["T_CONCAT_EQUAL",".=",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","\"(\"",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$field",202],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",202],"]",["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","\")\"",202],";",["T_WHITESPACE","\n\t\t\t\t\t\t",202],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",203],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_VARIABLE","$field",205],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",205],"]",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",205],["T_VARIABLE","$sql",206],["T_WHITESPACE"," ",206],["T_CONCAT_EQUAL",".=",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","\" \"",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_VARIABLE","$field",206],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",206],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",206],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",207],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$field",209],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",209],"]",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",209],["T_VARIABLE","$sql",210],["T_WHITESPACE"," ",210],["T_CONCAT_EQUAL",".=",210],["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","\" \"",210],["T_WHITESPACE"," ",210],".",["T_WHITESPACE"," ",210],["T_VARIABLE","$field",210],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",210],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",210],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",211],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$field",213],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",213],"]",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",213],["T_VARIABLE","$sql",214],["T_WHITESPACE"," ",214],["T_CONCAT_EQUAL",".=",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","\" \"",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_VARIABLE","$field",214],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",214],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",214],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",215],["T_IF","if",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$field",217],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",217],"]",["T_WHITESPACE"," ",217],["T_IS_NOT_EQUAL","!=",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","''",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",217],["T_VARIABLE","$sql",218],["T_WHITESPACE"," ",218],["T_CONCAT_EQUAL",".=",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","\" DEFAULT '\"",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_VARIABLE","$field",218],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",218],"]",["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","\"'\"",218],";",["T_WHITESPACE","\n\t\t\t\t\t\t",218],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",219],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_ISSET","isset",221],"(",["T_VARIABLE","$table",221],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",221],"]","[",["T_VARIABLE","$i",221],["T_WHITESPACE"," ",221],"-",["T_WHITESPACE"," ",221],["T_LNUMBER","1",221],"]",")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",221],["T_VARIABLE","$sql",222],["T_WHITESPACE"," ",222],["T_CONCAT_EQUAL",".=",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","\" AFTER `\"",222],["T_WHITESPACE"," ",222],".",["T_WHITESPACE"," ",222],["T_VARIABLE","$table",222],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",222],"]","[",["T_VARIABLE","$i",222],["T_WHITESPACE"," ",222],"-",["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",222],"]",["T_WHITESPACE"," ",222],".",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","\"`\"",222],";",["T_WHITESPACE","\n\t\t\t\t\t\t",222],"}",["T_WHITESPACE"," ",223],["T_ELSE","else",223],["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",223],["T_VARIABLE","$sql",224],["T_WHITESPACE"," ",224],["T_CONCAT_EQUAL",".=",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","\" FIRST\"",224],";",["T_WHITESPACE","\n\t\t\t\t\t\t",224],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",225],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","db",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","query",227],"(",["T_VARIABLE","$sql",227],")",";",["T_WHITESPACE","\n\t\t\t\t\t",227],"}",["T_WHITESPACE"," ",228],["T_ELSE","else",228],["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",228],["T_COMMENT","\/\/ Remove auto increment from all fields\n",229],["T_WHITESPACE","\t\t\t\t\t\t",230],["T_VARIABLE","$sql",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$table",230],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",230],"]",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","\"` CHANGE `\"",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$field",230],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",230],"]",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","\"` `\"",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_VARIABLE","$field",230],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",230],"]",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","\"` \"",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_STRING","strtoupper",230],"(",["T_VARIABLE","$field",230],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",230],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$field",232],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",232],"]",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",232],["T_VARIABLE","$sql",233],["T_WHITESPACE"," ",233],["T_CONCAT_EQUAL",".=",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"(\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$field",233],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",233],"]",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\")\"",233],";",["T_WHITESPACE","\n\t\t\t\t\t\t",233],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$field",236],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",236],"]",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",236],["T_VARIABLE","$sql",237],["T_WHITESPACE"," ",237],["T_CONCAT_EQUAL",".=",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","\" \"",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$field",237],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",237],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",237],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",238],["T_IF","if",240],["T_WHITESPACE"," ",240],"(",["T_VARIABLE","$field",240],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",240],"]",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",240],["T_VARIABLE","$sql",241],["T_WHITESPACE"," ",241],["T_CONCAT_EQUAL",".=",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","\" \"",241],["T_WHITESPACE"," ",241],".",["T_WHITESPACE"," ",241],["T_VARIABLE","$field",241],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",241],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",241],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$field",244],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",244],"]",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",244],["T_VARIABLE","$sql",245],["T_WHITESPACE"," ",245],["T_CONCAT_EQUAL",".=",245],["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\" \"",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_VARIABLE","$field",245],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",245],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",245],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",246],["T_IF","if",248],["T_WHITESPACE"," ",248],"(",["T_VARIABLE","$field",248],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",248],"]",["T_WHITESPACE"," ",248],["T_IS_NOT_EQUAL","!=",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","''",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",248],["T_VARIABLE","$sql",249],["T_WHITESPACE"," ",249],["T_CONCAT_EQUAL",".=",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","\" DEFAULT '\"",249],["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_VARIABLE","$field",249],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",249],"]",["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","\"'\"",249],";",["T_WHITESPACE","\n\t\t\t\t\t\t",249],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",250],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_ISSET","isset",252],"(",["T_VARIABLE","$table",252],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",252],"]","[",["T_VARIABLE","$i",252],["T_WHITESPACE"," ",252],"-",["T_WHITESPACE"," ",252],["T_LNUMBER","1",252],"]",")",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",252],["T_VARIABLE","$sql",253],["T_WHITESPACE"," ",253],["T_CONCAT_EQUAL",".=",253],["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","\" AFTER `\"",253],["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_VARIABLE","$table",253],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",253],"]","[",["T_VARIABLE","$i",253],["T_WHITESPACE"," ",253],"-",["T_WHITESPACE"," ",253],["T_LNUMBER","1",253],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",253],"]",["T_WHITESPACE"," ",253],".",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","\"`\"",253],";",["T_WHITESPACE","\n\t\t\t\t\t\t",253],"}",["T_WHITESPACE"," ",254],["T_ELSE","else",254],["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",254],["T_VARIABLE","$sql",255],["T_WHITESPACE"," ",255],["T_CONCAT_EQUAL",".=",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","\" FIRST\"",255],";",["T_WHITESPACE","\n\t\t\t\t\t\t",255],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",256],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","db",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","query",258],"(",["T_VARIABLE","$sql",258],")",";",["T_WHITESPACE","\n\t\t\t\t\t",258],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",259],["T_VARIABLE","$i",261],["T_INC","++",261],";",["T_WHITESPACE","\n\t\t\t\t",261],"}",["T_WHITESPACE","\n\n\t\t\t\t",262],["T_VARIABLE","$status",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","false",264],";",["T_WHITESPACE","\n\n\t\t\t\t",264],["T_COMMENT","\/\/ Drop primary keys and indexes.\n",266],["T_WHITESPACE","\t\t\t\t",267],["T_VARIABLE","$query",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","db",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","query",267],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW INDEXES FROM `\"",267],["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_VARIABLE","$table",267],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",267],"]",["T_WHITESPACE"," ",267],".",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","\"`\"",267],")",";",["T_WHITESPACE","\n\n\t\t\t\t",267],["T_VARIABLE","$last_key_name",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","''",269],";",["T_WHITESPACE","\n\t\t\t\t",269],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$query",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","num_rows",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n\t\t\t\t\t",270],["T_FOREACH","foreach",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$query",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","rows",271],["T_WHITESPACE"," ",271],["T_AS","as",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$result",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$result",272],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",272],"]",["T_WHITESPACE"," ",272],["T_IS_NOT_EQUAL","!=",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",272],["T_WHITESPACE"," ",272],["T_BOOLEAN_AND","&&",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$result",272],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",272],"]",["T_WHITESPACE"," ",272],["T_IS_NOT_EQUAL","!=",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$last_key_name",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",272],["T_VARIABLE","$last_key_name",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$result",273],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",273],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","db",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","query",274],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$table",274],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",274],"]",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","\"` DROP INDEX `\"",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$result",274],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",274],"]",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","\"`\"",274],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",274],"}",["T_WHITESPACE"," ",275],["T_ELSE","else",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",275],["T_VARIABLE","$status",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_STRING","true",276],";",["T_WHITESPACE","\n\t\t\t\t\t\t",276],"}",["T_WHITESPACE","\n\t\t\t\t\t",277],"}",["T_WHITESPACE","\n\t\t\t\t",278],"}",["T_WHITESPACE","\n\n\t\t\t\t",279],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$status",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n\t\t\t\t\t",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","query",282],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$table",282],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",282],"]",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"` DROP PRIMARY KEY\"",282],")",";",["T_WHITESPACE","\n\t\t\t\t",282],"}",["T_WHITESPACE","\n\n\t\t\t\t",283],["T_COMMENT","\/\/ Add a new primary key.\n",285],["T_WHITESPACE","\t\t\t\t",286],["T_VARIABLE","$primary_data",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",286],["T_FOREACH","foreach",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$table",288],"[",["T_CONSTANT_ENCAPSED_STRING","'primary'",288],"]",["T_WHITESPACE"," ",288],["T_AS","as",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$primary",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n\t\t\t\t\t",288],["T_VARIABLE","$primary_data",289],"[","]",["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","\"`\"",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_VARIABLE","$primary",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","\"`\"",289],";",["T_WHITESPACE","\n\t\t\t\t",289],"}",["T_WHITESPACE","\n\n\t\t\t\t",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_VARIABLE","$primary_data",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t\t\t",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","db",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","query",293],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_VARIABLE","$table",293],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",293],"]",["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","\"` ADD PRIMARY KEY(\"",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_STRING","implode",293],"(",["T_CONSTANT_ENCAPSED_STRING","','",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$primary_data",293],")",["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","\")\"",293],")",";",["T_WHITESPACE","\n\t\t\t\t",293],"}",["T_WHITESPACE","\n\n\t\t\t\t",294],["T_COMMENT","\/\/ Add the new indexes\n",296],["T_WHITESPACE","\t\t\t\t",297],["T_FOREACH","foreach",297],["T_WHITESPACE"," ",297],"(",["T_VARIABLE","$table",297],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",297],"]",["T_WHITESPACE"," ",297],["T_AS","as",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$name",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$index",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n\t\t\t\t\t",297],["T_VARIABLE","$index_data",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",298],["T_FOREACH","foreach",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$index",300],["T_WHITESPACE"," ",300],["T_AS","as",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$key",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",300],["T_VARIABLE","$index_data",301],"[","]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'`'",301],["T_WHITESPACE"," ",301],".",["T_WHITESPACE"," ",301],["T_VARIABLE","$key",301],["T_WHITESPACE"," ",301],".",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'`'",301],";",["T_WHITESPACE","\n\t\t\t\t\t",301],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",302],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$index_data",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","db",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","query",305],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_VARIABLE","$table",305],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",305],"]",["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],"\"",["T_ENCAPSED_AND_WHITESPACE","` ADD INDEX `",305],["T_VARIABLE","$name",305],["T_ENCAPSED_AND_WHITESPACE","` (",305],"\"",["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_STRING","implode",305],"(",["T_CONSTANT_ENCAPSED_STRING","','",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$index_data",305],")",["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","\")\"",305],")",";",["T_WHITESPACE","\n\t\t\t\t\t",305],"}",["T_WHITESPACE","\n\t\t\t\t",306],"}",["T_WHITESPACE","\n\n\t\t\t\t",307],["T_COMMENT","\/\/ Add auto increment to primary keys again\n",309],["T_WHITESPACE","\t\t\t\t",310],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$table",310],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",310],"]",["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$field",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n\t\t\t\t\t",310],["T_IF","if",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$field",311],"[",["T_CONSTANT_ENCAPSED_STRING","'autoincrement'",311],"]",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",311],["T_VARIABLE","$sql",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","\"ALTER TABLE `\"",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_VARIABLE","$table",312],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",312],"]",["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","\"` CHANGE `\"",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_VARIABLE","$field",312],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",312],"]",["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","\"` `\"",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_VARIABLE","$field",312],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",312],"]",["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","\"` \"",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_STRING","strtoupper",312],"(",["T_VARIABLE","$field",312],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",312],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",312],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_VARIABLE","$field",314],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",314],"]",")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",314],["T_VARIABLE","$sql",315],["T_WHITESPACE"," ",315],["T_CONCAT_EQUAL",".=",315],["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","\"(\"",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_VARIABLE","$field",315],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",315],"]",["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","\")\"",315],";",["T_WHITESPACE","\n\t\t\t\t\t\t",315],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",316],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$field",318],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",318],"]",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",318],["T_VARIABLE","$sql",319],["T_WHITESPACE"," ",319],["T_CONCAT_EQUAL",".=",319],["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","\" \"",319],["T_WHITESPACE"," ",319],".",["T_WHITESPACE"," ",319],["T_VARIABLE","$field",319],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",319],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",319],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",320],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$field",322],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",322],"]",")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",322],["T_VARIABLE","$sql",323],["T_WHITESPACE"," ",323],["T_CONCAT_EQUAL",".=",323],["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","\" \"",323],["T_WHITESPACE"," ",323],".",["T_WHITESPACE"," ",323],["T_VARIABLE","$field",323],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",323],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",323],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",324],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$field",326],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",326],"]",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",326],["T_VARIABLE","$sql",327],["T_WHITESPACE"," ",327],["T_CONCAT_EQUAL",".=",327],["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","\" \"",327],["T_WHITESPACE"," ",327],".",["T_WHITESPACE"," ",327],["T_VARIABLE","$field",327],"[",["T_CONSTANT_ENCAPSED_STRING","'notnull'",327],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",327],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",328],["T_IF","if",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$field",330],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",330],"]",["T_WHITESPACE"," ",330],["T_IS_NOT_EQUAL","!=",330],["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","''",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",330],["T_VARIABLE","$sql",331],["T_WHITESPACE"," ",331],["T_CONCAT_EQUAL",".=",331],["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","\" DEFAULT '\"",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_VARIABLE","$field",331],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",331],"]",["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","\"'\"",331],";",["T_WHITESPACE","\n\t\t\t\t\t\t",331],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",332],["T_IF","if",334],["T_WHITESPACE"," ",334],"(",["T_VARIABLE","$field",334],"[",["T_CONSTANT_ENCAPSED_STRING","'autoincrement'",334],"]",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",334],["T_VARIABLE","$sql",335],["T_WHITESPACE"," ",335],["T_CONCAT_EQUAL",".=",335],["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","\" AUTO_INCREMENT\"",335],";",["T_WHITESPACE","\n\t\t\t\t\t\t",335],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",336],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","db",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","query",338],"(",["T_VARIABLE","$sql",338],")",";",["T_WHITESPACE","\n\t\t\t\t\t",338],"}",["T_WHITESPACE","\n\t\t\t\t",339],"}",["T_WHITESPACE","\n\t\t\t",340],"}",["T_WHITESPACE","\n\t\t",341],"}",["T_WHITESPACE","\n\t",342],"}",["T_WHITESPACE","\n",343],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerUpgradeUpgrade",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],"(",["T_CONSTANT_ENCAPSED_STRING","'upgrade\/upgrade'",4],")",";",["T_WHITESPACE","\n\t\t\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","document",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","setTitle",6],"(",["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","language",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","get",6],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",6],")",")",";",["T_WHITESPACE","\n\t\t\n\t\t",6],["T_VARIABLE","$data",8],"[",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",8],"]",["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","language",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",8],")",";",["T_WHITESPACE","\n\t\t\n\t\t",8],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'text_upgrade'",10],"]",["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","language",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'text_upgrade'",10],")",";",["T_WHITESPACE","\n\t\t",10],["T_VARIABLE","$data",11],"[",["T_CONSTANT_ENCAPSED_STRING","'text_server'",11],"]",["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","language",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'text_server'",11],")",";",["T_WHITESPACE","\n\t\t",11],["T_VARIABLE","$data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'text_steps'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'text_steps'",12],")",";",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'text_error'",13],"]",["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","language",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","get",13],"(",["T_CONSTANT_ENCAPSED_STRING","'text_error'",13],")",";",["T_WHITESPACE","\n\t\t",13],["T_VARIABLE","$data",14],"[",["T_CONSTANT_ENCAPSED_STRING","'text_clear'",14],"]",["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","language",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'text_clear'",14],")",";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'text_admin'",15],"]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","language",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'text_admin'",15],")",";",["T_WHITESPACE","\n\t\t",15],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'text_user'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","language",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'text_user'",16],")",";",["T_WHITESPACE","\n\t\t",16],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'text_setting'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","language",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'text_setting'",17],")",";",["T_WHITESPACE","\n\t\t",17],["T_VARIABLE","$data",18],"[",["T_CONSTANT_ENCAPSED_STRING","'text_store'",18],"]",["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","language",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'text_store'",18],")",";",["T_WHITESPACE","\n\t\t\n\t\t",18],["T_VARIABLE","$data",20],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_progress'",20],"]",["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","language",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_progress'",20],")",";",["T_WHITESPACE","\n\t\t\n\t\t",20],["T_VARIABLE","$data",22],"[",["T_CONSTANT_ENCAPSED_STRING","'button_continue'",22],"]",["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","language",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_CONSTANT_ENCAPSED_STRING","'button_continue'",22],")",";",["T_WHITESPACE","\n\n\t\t",22],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'store'",24],"]",["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","HTTP_OPENCART",24],";",["T_WHITESPACE","\n\n\t\t",24],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","count",26],"(",["T_STRING","glob",26],"(",["T_STRING","DIR_APPLICATION",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'model\/upgrade\/*.php'",26],")",")",";",["T_WHITESPACE","\n\n\t\t",26],["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'header'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","load",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","controller",28],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/header'",28],")",";",["T_WHITESPACE","\n\t\t",28],["T_VARIABLE","$data",29],"[",["T_CONSTANT_ENCAPSED_STRING","'footer'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","load",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","controller",29],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/footer'",29],")",";",["T_WHITESPACE","\n\t\t",29],["T_VARIABLE","$data",30],"[",["T_CONSTANT_ENCAPSED_STRING","'column_left'",30],"]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","load",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","controller",30],"(",["T_CONSTANT_ENCAPSED_STRING","'common\/column_left'",30],")",";",["T_WHITESPACE","\n\n\t\t",30],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","response",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","setOutput",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","load",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","view",32],"(",["T_CONSTANT_ENCAPSED_STRING","'upgrade\/upgrade'",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$data",32],")",")",";",["T_WHITESPACE","\n\t",32],"}",["T_WHITESPACE","\n\t\n\t",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","next",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","load",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","language",36],"(",["T_CONSTANT_ENCAPSED_STRING","'upgrade\/upgrade'",36],")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t",36],["T_VARIABLE","$json",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",")",";",["T_WHITESPACE","\n\n\t\t",38],["T_IF","if",40],["T_WHITESPACE"," ",40],"(",["T_ISSET","isset",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","request",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",40],"]",")",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t",40],["T_VARIABLE","$step",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","request",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"[",["T_CONSTANT_ENCAPSED_STRING","'step'",41],"]",";",["T_WHITESPACE","\n\t\t",41],"}",["T_WHITESPACE"," ",42],["T_ELSE","else",42],["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n\t\t\t",42],["T_VARIABLE","$step",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","1",43],";",["T_WHITESPACE","\n\t\t",43],"}",["T_WHITESPACE","\n\t\t\n\t\t",44],["T_VARIABLE","$files",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","glob",46],"(",["T_STRING","DIR_APPLICATION",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'model\/upgrade\/*.php'",46],")",";",["T_WHITESPACE","\n\n\t\t",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_ISSET","isset",48],"(",["T_VARIABLE","$files",48],"[",["T_VARIABLE","$step",48],["T_WHITESPACE"," ",48],"-",["T_WHITESPACE"," ",48],["T_LNUMBER","1",48],"]",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t",48],["T_COMMENT","\/\/ Get the upgrade file\n",49],["T_WHITESPACE","\t\t\t",50],["T_TRY","try",50],["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t\t\t",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","model",51],"(",["T_CONSTANT_ENCAPSED_STRING","'upgrade\/'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_STRING","basename",51],"(",["T_VARIABLE","$files",51],"[",["T_VARIABLE","$step",51],["T_WHITESPACE"," ",51],"-",["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],"]",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'.php'",51],")",")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t\t",51],["T_COMMENT","\/\/ All upgrade methods require a upgrade method\n",53],["T_WHITESPACE","\t\t\t\t",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],"{",["T_CONSTANT_ENCAPSED_STRING","'model_upgrade_'",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_STRING","str_replace",54],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","''",54],",",["T_WHITESPACE"," ",54],["T_STRING","basename",54],"(",["T_VARIABLE","$files",54],"[",["T_VARIABLE","$step",54],["T_WHITESPACE"," ",54],"-",["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],"]",",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'.php'",54],")",")","}",["T_OBJECT_OPERATOR","->",54],["T_STRING","upgrade",54],"(",")",";",["T_WHITESPACE","\n\t\t\t\n\t\t\t\t",54],["T_VARIABLE","$json",56],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","sprintf",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","language",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'text_progress'",56],")",",",["T_WHITESPACE"," ",56],["T_STRING","basename",56],"(",["T_VARIABLE","$files",56],"[",["T_VARIABLE","$step",56],["T_WHITESPACE"," ",56],"-",["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],"]",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'.php'",56],")",",",["T_WHITESPACE"," ",56],["T_VARIABLE","$step",56],",",["T_WHITESPACE"," ",56],["T_STRING","count",56],"(",["T_VARIABLE","$files",56],")",")",";",["T_WHITESPACE","\n\t\t\t\n\t\t\t\t",56],["T_VARIABLE","$json",58],"[",["T_CONSTANT_ENCAPSED_STRING","'next'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","str_replace",58],"(",["T_CONSTANT_ENCAPSED_STRING","'&amp;'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'&'",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","url",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","link",58],"(",["T_CONSTANT_ENCAPSED_STRING","'upgrade\/upgrade\/next'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'step='",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$step",58],["T_WHITESPACE"," ",58],"+",["T_WHITESPACE"," ",58],["T_LNUMBER","1",58],")",")",")",";",["T_WHITESPACE","\n\t\t\t",58],"}",["T_WHITESPACE"," ",59],["T_CATCH","catch",59],"(",["T_STRING","Exception",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$exception",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t\t",59],["T_VARIABLE","$json",60],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","sprintf",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","language",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'error_exception'",60],")",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$exception",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getCode",60],"(",")",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$exception",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getMessage",60],"(",")",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$exception",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getFile",60],"(",")",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$exception",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getLine",60],"(",")",")",";",["T_WHITESPACE","\n\t\t\t",60],"}",["T_WHITESPACE","\t\t\n\t\t",61],"}",["T_WHITESPACE"," ",62],["T_ELSE","else",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t\t",62],["T_VARIABLE","$json",63],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","language",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_CONSTANT_ENCAPSED_STRING","'text_success'",63],")",";",["T_WHITESPACE","\n\t\t",63],"}",["T_WHITESPACE","\n\t\t\t\t\n\t\t",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","response",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addHeader",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",66],")",";",["T_WHITESPACE","\n\t\t",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","response",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","setOutput",67],"(",["T_STRING","json_encode",67],"(",["T_VARIABLE","$json",67],")",")",";",["T_WHITESPACE","\t\t\t\n\t",67],"}",["T_WHITESPACE","\n",68],"}"]
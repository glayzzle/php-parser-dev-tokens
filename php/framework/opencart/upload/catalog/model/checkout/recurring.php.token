[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelCheckoutRecurring",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","create",3],"(",["T_VARIABLE","$recurring",3],",",["T_WHITESPACE"," ",3],["T_VARIABLE","$order_id",3],",",["T_WHITESPACE"," ",3],["T_VARIABLE","$description",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` SET `order_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$order_id",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = NOW(), `status` = 6, `product_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `product_name` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `product_quantity` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'recurring_id'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_name` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_description` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$description",4],")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_frequency` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'frequency'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_cycle` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cycle'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_duration` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'duration'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `recurring_price` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_DOUBLE_CAST","(float)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'price'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `trial` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trial'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `trial_frequency` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trial_frequency'",4],"]",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `trial_cycle` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trial_cycle'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `trial_duration` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trial_duration'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `trial_price` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_DOUBLE_CAST","(float)",4],["T_VARIABLE","$recurring",4],"[",["T_CONSTANT_ENCAPSED_STRING","'recurring'",4],"]","[",["T_CONSTANT_ENCAPSED_STRING","'trial_price'",4],"]",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"', `reference` = ''\"",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_RETURN","return",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","getLastId",6],"(",")",";",["T_WHITESPACE","\n\t",6],"}",["T_WHITESPACE","\n\n\t",7],["T_PUBLIC","public",9],["T_WHITESPACE"," ",9],["T_FUNCTION","function",9],["T_WHITESPACE"," ",9],["T_STRING","addReference",9],"(",["T_VARIABLE","$order_recurring_id",9],",",["T_WHITESPACE"," ",9],["T_VARIABLE","$reference",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t",9],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","query",10],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_STRING","DB_PREFIX",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring SET reference = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","db",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","escape",10],"(",["T_VARIABLE","$reference",10],")",["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE order_recurring_id = '\"",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_INT_CAST","(int)",10],["T_VARIABLE","$order_recurring_id",10],["T_WHITESPACE"," ",10],".",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","\"'\"",10],")",";",["T_WHITESPACE","\n\n\t\t",10],["T_IF","if",12],["T_WHITESPACE"," ",12],"(",["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","countAffected",12],"(",")",["T_WHITESPACE"," ",12],">",["T_WHITESPACE"," ",12],["T_LNUMBER","0",12],")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_RETURN","return",13],["T_WHITESPACE"," ",13],["T_STRING","true",13],";",["T_WHITESPACE","\n\t\t",13],"}",["T_WHITESPACE"," ",14],["T_ELSE","else",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_RETURN","return",15],["T_WHITESPACE"," ",15],["T_STRING","false",15],";",["T_WHITESPACE","\n\n\t\t",15],"}",["T_WHITESPACE","\n\t",17],"}",["T_WHITESPACE","\n",18],"}",["T_WHITESPACE","\n",19]]
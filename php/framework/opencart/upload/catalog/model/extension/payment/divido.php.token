[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionPaymentDivido",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_CONST","const",3],["T_WHITESPACE"," ",3],["T_STRING","CACHE_KEY_PLANS",3],["T_WHITESPACE"," ",3],"=",["T_WHITESPACE"," ",3],["T_CONSTANT_ENCAPSED_STRING","'divido_plans'",3],";",["T_WHITESPACE","\n\n\t",3],["T_PUBLIC","public",5],["T_WHITESPACE"," ",5],["T_FUNCTION","function",5],["T_WHITESPACE"," ",5],["T_STRING","setMerchant",5],"(",["T_VARIABLE","$api_key",5],")",["T_WHITESPACE"," ",5],"{",["T_WHITESPACE","\n\t\t",5],["T_IF","if",6],["T_WHITESPACE"," ",6],"(",["T_VARIABLE","$api_key",6],")",["T_WHITESPACE"," ",6],"{",["T_WHITESPACE","\n\t\t\t",6],["T_STRING","Divido",7],["T_DOUBLE_COLON","::",7],["T_STRING","setMerchant",7],"(",["T_VARIABLE","$api_key",7],")",";",["T_WHITESPACE","\n\t\t",7],"}",["T_WHITESPACE","\n\t",8],"}",["T_WHITESPACE","\n\n\t",9],["T_PUBLIC","public",11],["T_WHITESPACE"," ",11],["T_FUNCTION","function",11],["T_WHITESPACE"," ",11],["T_STRING","getMethod",11],"(",["T_VARIABLE","$payment_address",11],",",["T_WHITESPACE"," ",11],["T_VARIABLE","$total",11],")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t",11],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","load",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/divido'",12],")",";",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","load",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","model",13],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/currency'",13],")",";",["T_WHITESPACE","\n\n\t\t",13],["T_IF","if",15],["T_WHITESPACE"," ",15],"(","!",["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","isEnabled",15],"(",")",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t\t",15],["T_RETURN","return",16],["T_WHITESPACE"," ",16],["T_ARRAY","array",16],"(",")",";",["T_WHITESPACE","\n\t\t",16],"}",["T_WHITESPACE","\n\n\t\t",17],["T_IF","if",19],["T_WHITESPACE"," ",19],"(",["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","session",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","data",19],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",19],"]",["T_WHITESPACE"," ",19],["T_IS_NOT_EQUAL","!=",19],["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'GBP'",19],")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\t\t\t",19],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",")",";",["T_WHITESPACE","\n\t\t",20],"}",["T_WHITESPACE","\n\n\t\t",21],["T_IF","if",23],["T_WHITESPACE"," ",23],"(",["T_VARIABLE","$payment_address",23],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",23],"]",["T_WHITESPACE"," ",23],["T_IS_NOT_EQUAL","!=",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'GB'",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t\t",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",")",";",["T_WHITESPACE","\n\t\t",24],"}",["T_WHITESPACE","\n\n\t\t",25],["T_VARIABLE","$cart_threshold",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","config",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_cart_threshold'",27],")",";",["T_WHITESPACE","\n\t\t",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$cart_threshold",28],["T_WHITESPACE"," ",28],">",["T_WHITESPACE"," ",28],["T_VARIABLE","$total",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t",28],["T_RETURN","return",29],["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n\t\t",29],"}",["T_WHITESPACE","\n\n\t\t",30],["T_VARIABLE","$plans",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getCartPlans",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","cart",32],")",";",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$has_plan",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","false",33],";",["T_WHITESPACE","\n\n\t\t",33],["T_FOREACH","foreach",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$plans",35],["T_WHITESPACE"," ",35],["T_AS","as",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$plan",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_VARIABLE","$planMinTotal",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$total",36],["T_WHITESPACE"," ",36],"-",["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$total",36],["T_WHITESPACE"," ",36],"*",["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$plan",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","min_deposit",36],["T_WHITESPACE"," ",36],"\/",["T_WHITESPACE"," ",36],["T_LNUMBER","100",36],")",")",";",["T_WHITESPACE","\n\t\t\t",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$plan",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","min_amount",37],["T_WHITESPACE"," ",37],["T_IS_SMALLER_OR_EQUAL","<=",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$planMinTotal",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n\t\t\t\t",37],["T_VARIABLE","$has_plan",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","true",38],";",["T_WHITESPACE","\n\t\t\t\t",38],["T_BREAK","break",39],";",["T_WHITESPACE","\n\t\t\t",39],"}",["T_WHITESPACE","\n\t\t",40],"}",["T_WHITESPACE","\n\n\t\t",41],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","!",["T_VARIABLE","$has_plan",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n\t\t\t",43],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",")",";",["T_WHITESPACE","\n\t\t",44],"}",["T_WHITESPACE","\n\n\t\t",45],["T_VARIABLE","$title",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","language",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_CONSTANT_ENCAPSED_STRING","'text_checkout_title'",47],")",";",["T_WHITESPACE","\n\t\t",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$title_override",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","config",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_title'",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t",48],["T_VARIABLE","$title",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$title_override",49],";",["T_WHITESPACE","\n\t\t",49],"}",["T_WHITESPACE","\n\n\t\t",50],["T_VARIABLE","$method_data",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_WHITESPACE","\n\t\t\t",52],["T_CONSTANT_ENCAPSED_STRING","'code'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'divido'",53],",",["T_WHITESPACE","\n\t\t\t",53],["T_CONSTANT_ENCAPSED_STRING","'title'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$title",54],",",["T_WHITESPACE","\n\t\t\t",54],["T_CONSTANT_ENCAPSED_STRING","'terms'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","''",55],",",["T_WHITESPACE","\n\t\t\t",55],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","config",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_sort_order'",56],")",["T_WHITESPACE","\n\t\t",56],")",";",["T_WHITESPACE","\n\n\t\t",57],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$method_data",59],";",["T_WHITESPACE","\n\t",59],"}",["T_WHITESPACE","\n\n\t",60],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getProductSettings",62],"(",["T_VARIABLE","$product_id",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t",62],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","db",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","query",63],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `display`, `plans` FROM `\"",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_STRING","DB_PREFIX",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","\"divido_product` WHERE `product_id` = '\"",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_INT_CAST","(int)",63],["T_VARIABLE","$product_id",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","\"'\"",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","row",63],";",["T_WHITESPACE","\n\t",63],"}",["T_WHITESPACE","\n\n\t",64],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","isEnabled",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n\t\t",66],["T_VARIABLE","$api_key",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","config",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_api_key'",67],")",";",["T_WHITESPACE","\n\t\t",67],["T_VARIABLE","$enabled",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","config",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_status'",68],")",";",["T_WHITESPACE","\n\n\t\t",68],["T_RETURN","return",70],["T_WHITESPACE"," ",70],"!",["T_EMPTY","empty",70],"(",["T_VARIABLE","$api_key",70],")",["T_WHITESPACE"," ",70],["T_BOOLEAN_AND","&&",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$enabled",70],["T_WHITESPACE"," ",70],["T_IS_EQUAL","==",70],["T_WHITESPACE"," ",70],["T_LNUMBER","1",70],";",["T_WHITESPACE","\n\t",70],"}",["T_WHITESPACE","\n\n\t",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","hashOrderId",73],"(",["T_VARIABLE","$order_id",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$salt",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\t\t",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","hash",74],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$order_id",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$salt",74],")",";",["T_WHITESPACE","\n\t",74],"}",["T_WHITESPACE","\n\n\t",75],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","saveLookup",77],"(",["T_VARIABLE","$order_id",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$salt",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$proposal_id",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$application_id",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$deposit_amount",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","null",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t",77],["T_VARIABLE","$order_id",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_INT_CAST","(int)",78],["T_VARIABLE","$order_id",78],";",["T_WHITESPACE","\n\t\t",78],["T_VARIABLE","$salt",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","db",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","escape",79],"(",["T_VARIABLE","$salt",79],")",";",["T_WHITESPACE","\n\t\t",79],["T_VARIABLE","$proposal_id",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","db",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","escape",80],"(",["T_VARIABLE","$proposal_id",80],")",";",["T_WHITESPACE","\n\t\t",80],["T_VARIABLE","$application_id",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","db",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","escape",81],"(",["T_VARIABLE","$application_id",81],")",";",["T_WHITESPACE","\n\t\t",81],["T_VARIABLE","$deposit_amount",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","escape",82],"(",["T_VARIABLE","$deposit_amount",82],")",";",["T_WHITESPACE","\n\n\t\t",82],["T_VARIABLE","$query_get_lookup",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","\"SELECT `application_id` from `\"",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_STRING","DB_PREFIX",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","\"divido_lookup` WHERE order_id = \"",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$order_id",84],";",["T_WHITESPACE","\n\t\t",84],["T_VARIABLE","$result_get_lookup",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","db",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","query",85],"(",["T_VARIABLE","$query_get_lookup",85],")",";",["T_WHITESPACE","\n\n\t\t",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$result_get_lookup",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","num_rows",87],["T_WHITESPACE"," ",87],["T_IS_EQUAL","==",87],["T_WHITESPACE"," ",87],["T_LNUMBER","0",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t\t",87],["T_VARIABLE","$proposal_id",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$proposal_id",88],")",["T_WHITESPACE"," ",88],"?",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","\"'\"",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_VARIABLE","$proposal_id",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","\"'\"",88],["T_WHITESPACE"," ",88],":",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'NULL'",88],";",["T_WHITESPACE","\n\t\t\t",88],["T_VARIABLE","$application_id",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$application_id",89],")",["T_WHITESPACE"," ",89],"?",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"'\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$application_id",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"'\"",89],["T_WHITESPACE"," ",89],":",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'NULL'",89],";",["T_WHITESPACE","\n\t\t\t",89],["T_VARIABLE","$deposit_amount",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$deposit_amount",90],")",["T_WHITESPACE"," ",90],"?",["T_WHITESPACE"," ",90],["T_VARIABLE","$deposit_amount",90],["T_WHITESPACE"," ",90],":",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'NULL'",90],";",["T_WHITESPACE","\n\n\t\t\t",90],["T_VARIABLE","$query_upsert",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","DB_PREFIX",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"divido_lookup` (`order_id`, `salt`, `proposal_id`, `application_id`, `deposit_amount`) VALUES (\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$order_id",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\", '\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$salt",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"', \"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$proposal_id",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\", \"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$application_id",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\", \"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$deposit_amount",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\")\"",92],";",["T_WHITESPACE","\n\t\t",92],"}",["T_WHITESPACE"," ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n\t\t\t",93],["T_VARIABLE","$query_upsert",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_STRING","DB_PREFIX",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"divido_lookup` SET `salt` = '\"",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$salt",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","\"'\"",94],";",["T_WHITESPACE","\n\n\t\t\t",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$proposal_id",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\t\t\t\t",96],["T_VARIABLE","$query_upsert",97],["T_WHITESPACE"," ",97],["T_CONCAT_EQUAL",".=",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","\", `proposal_id` = '\"",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$proposal_id",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","\"'\"",97],";",["T_WHITESPACE","\n\t\t\t",97],"}",["T_WHITESPACE","\n\n\t\t\t",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$application_id",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n\t\t\t\t",100],["T_VARIABLE","$query_upsert",101],["T_WHITESPACE"," ",101],["T_CONCAT_EQUAL",".=",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\", `application_id` = '\"",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$application_id",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","\"'\"",101],";",["T_WHITESPACE","\n\t\t\t",101],"}",["T_WHITESPACE","\n\n\t\t\t",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$deposit_amount",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t\t",104],["T_VARIABLE","$query_upsert",105],["T_WHITESPACE"," ",105],["T_CONCAT_EQUAL",".=",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","\", `deposit_amount` = \"",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_VARIABLE","$deposit_amount",105],";",["T_WHITESPACE","\n\t\t\t",105],"}",["T_WHITESPACE","\n\n\t\t\t",106],["T_VARIABLE","$query_upsert",108],["T_WHITESPACE"," ",108],["T_CONCAT_EQUAL",".=",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\" WHERE `order_id` = \"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$order_id",108],";",["T_WHITESPACE","\n\t\t",108],"}",["T_WHITESPACE","\n\n\t\t",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","db",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","query",111],"(",["T_VARIABLE","$query_upsert",111],")",";",["T_WHITESPACE","\n\t",111],"}",["T_WHITESPACE","\n\n\t",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","getLookupByOrderId",114],"(",["T_VARIABLE","$order_id",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t",114],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","query",115],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_STRING","DB_PREFIX",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"divido_lookup` WHERE `order_id` = \"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$order_id",115],")",";",["T_WHITESPACE","\n\t",115],"}",["T_WHITESPACE","\n\t",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","getGlobalSelectedPlans",117],"(",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n\t\t",117],["T_VARIABLE","$all_plans",118],["T_WHITESPACE","     ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getAllPlans",118],"(",")",";",["T_WHITESPACE","\n\t\t",118],["T_VARIABLE","$display_plans",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","config",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","get",119],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_planselection'",119],")",";",["T_WHITESPACE","\n\n\t\t",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$display_plans",121],["T_WHITESPACE"," ",121],["T_IS_EQUAL","==",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'all'",121],["T_WHITESPACE"," ",121],["T_BOOLEAN_OR","||",121],["T_WHITESPACE"," ",121],["T_EMPTY","empty",121],"(",["T_VARIABLE","$display_plans",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t\t",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$all_plans",122],";",["T_WHITESPACE","\n\t\t",122],"}",["T_WHITESPACE","\n\n\t\t",123],["T_VARIABLE","$selected_plans",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","config",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","get",125],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_plans_selected'",125],")",";",["T_WHITESPACE","\n\t\t",125],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_VARIABLE","$selected_plans",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n\t\t\t",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",")",";",["T_WHITESPACE","\n\t\t",127],"}",["T_WHITESPACE","\n\n\t\t",128],["T_VARIABLE","$plans",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",")",";",["T_WHITESPACE","\n\t\t",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$all_plans",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$plan",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\t\t\t",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_STRING","in_array",132],"(",["T_VARIABLE","$plan",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","id",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$selected_plans",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n\t\t\t\t",132],["T_VARIABLE","$plans",133],"[","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$plan",133],";",["T_WHITESPACE","\n\t\t\t",133],"}",["T_WHITESPACE","\n\t\t",134],"}",["T_WHITESPACE","\n\n\t\t",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$plans",137],";",["T_WHITESPACE","\n\t",137],"}",["T_WHITESPACE","\n\n\t",138],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","getAllPlans",140],"(",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t\t",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$plans",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","cache",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_STRING","self",141],["T_DOUBLE_COLON","::",141],["T_STRING","CACHE_KEY_PLANS",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n\t\t\t",141],["T_COMMENT","\/\/ OpenCart 2.1 decodes json objects to associative arrays so we\n",142],["T_WHITESPACE","\t\t\t",143],["T_COMMENT","\/\/ need to make sure we're getting a list of simple objects back.\n",143],["T_WHITESPACE","\t\t\t",144],["T_VARIABLE","$plans",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","array_map",144],"(",["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$plan",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n\t\t\t\t",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_OBJECT_CAST","(object)",145],["T_VARIABLE","$plan",145],";",["T_WHITESPACE","\n\t\t\t",145],"}",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$plans",146],")",";",["T_WHITESPACE","\n\n\t\t\t",146],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$plans",148],";",["T_WHITESPACE","\n\t\t",148],"}",["T_WHITESPACE","\n\n\t\t",149],["T_VARIABLE","$api_key",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","config",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","get",151],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_api_key'",151],")",";",["T_WHITESPACE","\n\t\t",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(","!",["T_VARIABLE","$api_key",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n\t\t\t",152],["T_THROW","throw",153],["T_WHITESPACE"," ",153],["T_NEW","new",153],["T_WHITESPACE"," ",153],["T_STRING","Exception",153],"(",["T_CONSTANT_ENCAPSED_STRING","\"No Divido api-key defined\"",153],")",";",["T_WHITESPACE","\n\t\t",153],"}",["T_WHITESPACE","\n\n\t\t",154],["T_STRING","Divido",156],["T_DOUBLE_COLON","::",156],["T_STRING","setMerchant",156],"(",["T_VARIABLE","$api_key",156],")",";",["T_WHITESPACE","\n\n\t\t",156],["T_VARIABLE","$response",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","Divido_Finances",158],["T_DOUBLE_COLON","::",158],["T_STRING","all",158],"(",")",";",["T_WHITESPACE","\n\t\t",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$response",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","status",159],["T_WHITESPACE"," ",159],["T_IS_NOT_EQUAL","!=",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'ok'",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n\t\t\t",159],["T_THROW","throw",160],["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","Exception",160],"(",["T_CONSTANT_ENCAPSED_STRING","\"Can't get list of finance plans from Divido!\"",160],")",";",["T_WHITESPACE","\n\t\t",160],"}",["T_WHITESPACE","\n\n\t\t",161],["T_VARIABLE","$plans",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$response",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","finances",163],";",["T_WHITESPACE","\n\n\t\t",163],["T_COMMENT","\/\/ OpenCart 2.1 switched to json for their file storage cache, so\n",165],["T_WHITESPACE","\t\t",166],["T_COMMENT","\/\/ we need to convert to a simple object.\n",166],["T_WHITESPACE","\t\t",167],["T_VARIABLE","$plans_plain",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n\t\t",167],["T_FOREACH","foreach",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$plans",168],["T_WHITESPACE"," ",168],["T_AS","as",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$plan",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n\t\t\t",168],["T_VARIABLE","$plan_copy",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_STRING","stdClass",169],"(",")",";",["T_WHITESPACE","\n\t\t\t",169],["T_VARIABLE","$plan_copy",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],["T_WHITESPACE","                 ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$plan",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","id",170],";",["T_WHITESPACE","\n\t\t\t",170],["T_VARIABLE","$plan_copy",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","text",171],["T_WHITESPACE","               ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$plan",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","text",171],";",["T_WHITESPACE","\n\t\t\t",171],["T_VARIABLE","$plan_copy",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","country",172],["T_WHITESPACE","            ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$plan",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","country",172],";",["T_WHITESPACE","\n\t\t\t",172],["T_VARIABLE","$plan_copy",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","min_amount",173],["T_WHITESPACE","         ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$plan",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","min_amount",173],";",["T_WHITESPACE","\n\t\t\t",173],["T_VARIABLE","$plan_copy",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","min_deposit",174],["T_WHITESPACE","        ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$plan",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","min_deposit",174],";",["T_WHITESPACE","\n\t\t\t",174],["T_VARIABLE","$plan_copy",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","max_deposit",175],["T_WHITESPACE","        ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$plan",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","max_deposit",175],";",["T_WHITESPACE","\n\t\t\t",175],["T_VARIABLE","$plan_copy",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","interest_rate",176],["T_WHITESPACE","      ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$plan",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","interest_rate",176],";",["T_WHITESPACE","\n\t\t\t",176],["T_VARIABLE","$plan_copy",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","deferral_period",177],["T_WHITESPACE","    ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$plan",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","deferral_period",177],";",["T_WHITESPACE","\n\t\t\t",177],["T_VARIABLE","$plan_copy",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","agreement_duration",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$plan",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","agreement_duration",178],";",["T_WHITESPACE","\n\n\t\t\t",178],["T_VARIABLE","$plans_plain",180],"[","]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$plan_copy",180],";",["T_WHITESPACE","\n\t\t",180],"}",["T_WHITESPACE","\n\n\t\t",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","cache",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","set",183],"(",["T_STRING","self",183],["T_DOUBLE_COLON","::",183],["T_STRING","CACHE_KEY_PLANS",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$plans_plain",183],")",";",["T_WHITESPACE","\n\n\t\t",183],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$plans_plain",185],";",["T_WHITESPACE","\n\t",185],"}",["T_WHITESPACE","\n\n\t",186],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getCartPlans",188],"(",["T_VARIABLE","$cart",188],")",["T_WHITESPACE","\t",188],"{",["T_WHITESPACE","\n\t\t",188],["T_VARIABLE","$plans",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",")",";",["T_WHITESPACE","\n\t\t",189],["T_VARIABLE","$products",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$cart",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getProducts",190],"(",")",";",["T_WHITESPACE","\n\t\t",190],["T_FOREACH","foreach",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$products",191],["T_WHITESPACE"," ",191],["T_AS","as",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$product",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n\t\t\t",191],["T_VARIABLE","$product_plans",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","getProductPlans",192],"(",["T_VARIABLE","$product",192],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",192],"]",")",";",["T_WHITESPACE","\n\t\t\t",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$product_plans",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n\t\t\t\t",193],["T_VARIABLE","$plans",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","array_merge",194],"(",["T_VARIABLE","$plans",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$product_plans",194],")",";",["T_WHITESPACE","\n\t\t\t",194],"}",["T_WHITESPACE","\n\t\t",195],"}",["T_WHITESPACE","\n\n\t\t",196],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$plans",198],";",["T_WHITESPACE","\n\t",198],"}",["T_WHITESPACE","\n\n\t",199],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getPlans",201],"(",["T_VARIABLE","$default_plans",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n\t\t",201],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$default_plans",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n\t\t\t",202],["T_VARIABLE","$plans",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getGlobalSelectedPlans",203],"(",")",";",["T_WHITESPACE","\n\t\t",203],"}",["T_WHITESPACE"," ",204],["T_ELSE","else",204],["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t\t",204],["T_VARIABLE","$plans",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getAllPlans",205],"(",")",";",["T_WHITESPACE","\n\t\t",205],"}",["T_WHITESPACE","\n\n\t\t",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$plans",208],";",["T_WHITESPACE","\n\t",208],"}",["T_WHITESPACE","\n\n\t",209],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","getOrderTotals",211],"(",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n\t\t",211],["T_VARIABLE","$totals",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",")",";",["T_WHITESPACE","\n\t\t",212],["T_VARIABLE","$taxes",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","cart",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getTaxes",213],"(",")",";",["T_WHITESPACE","\n\t\t",213],["T_VARIABLE","$total",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_LNUMBER","0",214],";",["T_WHITESPACE","\n\n\t\t",214],["T_COMMENT","\/\/ Because __call can not keep var references so we put them into an array.\n",216],["T_WHITESPACE","\t\t",217],["T_VARIABLE","$total_data",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",["T_WHITESPACE","\n\t\t\t",217],["T_CONSTANT_ENCAPSED_STRING","'totals'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],"&",["T_VARIABLE","$totals",218],",",["T_WHITESPACE","\n\t\t\t",218],["T_CONSTANT_ENCAPSED_STRING","'taxes'",219],["T_WHITESPACE","  ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],"&",["T_VARIABLE","$taxes",219],",",["T_WHITESPACE","\n\t\t\t",219],["T_CONSTANT_ENCAPSED_STRING","'total'",220],["T_WHITESPACE","  ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],"&",["T_VARIABLE","$total",220],["T_WHITESPACE","\n\t\t",220],")",";",["T_WHITESPACE","\n\n\t\t",221],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","load",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","model",223],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/extension'",223],")",";",["T_WHITESPACE","\n\n\t\t",223],["T_VARIABLE","$sort_order",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n\n\t\t",225],["T_VARIABLE","$results",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","model_extension_extension",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getExtensions",227],"(",["T_CONSTANT_ENCAPSED_STRING","'total'",227],")",";",["T_WHITESPACE","\n\n\t\t",227],["T_FOREACH","foreach",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$results",229],["T_WHITESPACE"," ",229],["T_AS","as",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$key",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$value",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n\t\t\t",229],["T_VARIABLE","$sort_order",230],"[",["T_VARIABLE","$key",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","config",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","get",230],"(",["T_VARIABLE","$value",230],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",230],"]",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'_sort_order'",230],")",";",["T_WHITESPACE","\n\t\t",230],"}",["T_WHITESPACE","\n\n\t\t",231],["T_STRING","array_multisort",233],"(",["T_VARIABLE","$sort_order",233],",",["T_WHITESPACE"," ",233],["T_STRING","SORT_ASC",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$results",233],")",";",["T_WHITESPACE","\n\n\t\t",233],["T_FOREACH","foreach",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$results",235],["T_WHITESPACE"," ",235],["T_AS","as",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$result",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","config",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","get",236],"(",["T_VARIABLE","$result",236],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",236],"]",["T_WHITESPACE"," ",236],".",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'_status'",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n\t\t\t\t",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","load",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","model",237],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/'",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$result",237],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",237],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",237],["T_COMMENT","\/\/ We have to put the totals in an array so that they pass by reference.\n",239],["T_WHITESPACE","\t\t\t\t",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_total_'",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_VARIABLE","$result",240],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",240],"]","}",["T_OBJECT_OPERATOR","->",240],["T_STRING","getTotal",240],"(",["T_VARIABLE","$total_data",240],")",";",["T_WHITESPACE","\n\t\t\t",240],"}",["T_WHITESPACE","\n\t\t",241],"}",["T_WHITESPACE","\n\n\t\t",242],["T_VARIABLE","$sort_order",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_ARRAY","array",244],"(",")",";",["T_WHITESPACE","\n\n\t\t",244],["T_FOREACH","foreach",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$totals",246],["T_WHITESPACE"," ",246],["T_AS","as",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$key",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$value",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n\t\t\t",246],["T_VARIABLE","$sort_order",247],"[",["T_VARIABLE","$key",247],"]",["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$value",247],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",247],"]",";",["T_WHITESPACE","\n\t\t",247],"}",["T_WHITESPACE","\n\n\t\t",248],["T_STRING","array_multisort",250],"(",["T_VARIABLE","$sort_order",250],",",["T_WHITESPACE"," ",250],["T_STRING","SORT_ASC",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$totals",250],")",";",["T_WHITESPACE","\n\n\t\t",250],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",["T_VARIABLE","$total",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$totals",252],")",";",["T_WHITESPACE","\n\t",252],"}",["T_WHITESPACE","\n\n\t",253],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","getProductPlans",255],"(",["T_VARIABLE","$product_id",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n\t\t",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","load",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","model",256],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",256],")",";",["T_WHITESPACE","\n\n\t\t",256],["T_VARIABLE","$product_info",258],["T_WHITESPACE","       ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","model_catalog_product",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getProduct",258],"(",["T_VARIABLE","$product_id",258],")",";",["T_WHITESPACE","\n\t\t",258],["T_VARIABLE","$settings",259],["T_WHITESPACE","           ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getProductSettings",259],"(",["T_VARIABLE","$product_id",259],")",";",["T_WHITESPACE","\n\t\t",259],["T_VARIABLE","$product_selection",260],["T_WHITESPACE","  ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","config",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","get",260],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_productselection'",260],")",";",["T_WHITESPACE","\n\t\t",260],["T_VARIABLE","$divido_categories",261],["T_WHITESPACE","  ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","config",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","get",261],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_categories'",261],")",";",["T_WHITESPACE","\n\t\t",261],["T_VARIABLE","$price_threshold",262],["T_WHITESPACE","    ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","config",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","get",262],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_price_threshold'",262],")",";",["T_WHITESPACE","\n\n\t\t",262],["T_IF","if",264],["T_WHITESPACE"," ",264],"(",["T_VARIABLE","$divido_categories",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n\t\t\t",264],["T_VARIABLE","$product_categories",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","model_catalog_product",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getCategories",265],"(",["T_VARIABLE","$product_id",265],")",";",["T_WHITESPACE","\n\n\t\t\t",265],["T_VARIABLE","$all_categories",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",")",";",["T_WHITESPACE","\n\t\t\t",267],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$product_categories",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$product_category",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n\t\t\t\t",268],["T_VARIABLE","$all_categories",269],"[","]",["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$product_category",269],"[",["T_CONSTANT_ENCAPSED_STRING","'category_id'",269],"]",";",["T_WHITESPACE","\n\t\t\t",269],"}",["T_WHITESPACE","\n\t\t\t",270],["T_VARIABLE","$category_matches",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","array_intersect",271],"(",["T_VARIABLE","$all_categories",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$divido_categories",271],")",";",["T_WHITESPACE","\n\n\t\t\t",271],["T_IF","if",273],["T_WHITESPACE"," ",273],"(","!",["T_VARIABLE","$category_matches",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t\t",273],["T_RETURN","return",274],["T_WHITESPACE"," ",274],["T_STRING","null",274],";",["T_WHITESPACE","\n\t\t\t",274],"}",["T_WHITESPACE","\n\t\t",275],"}",["T_WHITESPACE","\n\n\t\t",276],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_EMPTY","empty",278],"(",["T_VARIABLE","$settings",278],")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n\t\t\t",278],["T_VARIABLE","$settings",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",["T_WHITESPACE","\n\t\t\t\t",279],["T_CONSTANT_ENCAPSED_STRING","'display'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'default'",280],",",["T_WHITESPACE","\n\t\t\t\t",280],["T_CONSTANT_ENCAPSED_STRING","'plans'",281],["T_WHITESPACE","   ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","''",281],",",["T_WHITESPACE","\n\t\t\t",281],")",";",["T_WHITESPACE","\n\t\t",282],"}",["T_WHITESPACE","\n\n\t\t",283],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$product_selection",285],["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'selected'",285],["T_WHITESPACE"," ",285],["T_BOOLEAN_AND","&&",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$settings",285],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",285],"]",["T_WHITESPACE"," ",285],["T_IS_EQUAL","==",285],["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'custom'",285],["T_WHITESPACE"," ",285],["T_BOOLEAN_AND","&&",285],["T_WHITESPACE"," ",285],["T_EMPTY","empty",285],"(",["T_VARIABLE","$settings",285],"[",["T_CONSTANT_ENCAPSED_STRING","'plans'",285],"]",")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n\t\t\t",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_STRING","null",286],";",["T_WHITESPACE","\n\t\t",286],"}",["T_WHITESPACE","\n\n\t\t",287],["T_VARIABLE","$price",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_LNUMBER","0",289],";",["T_WHITESPACE","\n\t\t",289],["T_IF","if",290],["T_WHITESPACE"," ",290],"(","(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","config",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","get",290],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_price'",290],")",["T_WHITESPACE"," ",290],["T_BOOLEAN_AND","&&",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","customer",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","isLogged",290],"(",")",")",["T_WHITESPACE"," ",290],["T_BOOLEAN_OR","||",290],["T_WHITESPACE"," ",290],"!",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","config",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","get",290],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_price'",290],")",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n\t\t\t",290],["T_VARIABLE","$base_price",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],"!",["T_EMPTY","empty",291],"(",["T_VARIABLE","$product_info",291],"[",["T_CONSTANT_ENCAPSED_STRING","'special'",291],"]",")",["T_WHITESPACE"," ",291],"?",["T_WHITESPACE"," ",291],["T_VARIABLE","$product_info",291],"[",["T_CONSTANT_ENCAPSED_STRING","'special'",291],"]",["T_WHITESPACE"," ",291],":",["T_WHITESPACE"," ",291],["T_VARIABLE","$product_info",291],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",291],"]",";",["T_WHITESPACE","\n\t\t\t",291],["T_VARIABLE","$price",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","tax",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","calculate",292],"(",["T_VARIABLE","$base_price",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$product_info",292],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",292],"]",",",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","config",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","get",292],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax'",292],")",")",";",["T_WHITESPACE","\n\t\t",292],"}",["T_WHITESPACE","\n\n\t\t",293],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$product_selection",295],["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'threshold'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],"!",["T_EMPTY","empty",295],"(",["T_VARIABLE","$price_threshold",295],")",["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$price",295],["T_WHITESPACE"," ",295],"<",["T_WHITESPACE"," ",295],["T_VARIABLE","$price_threshold",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n\t\t\t",295],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_STRING","null",296],";",["T_WHITESPACE","\n\t\t",296],"}",["T_WHITESPACE","\n\n\t\t",297],["T_IF","if",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$settings",299],"[",["T_CONSTANT_ENCAPSED_STRING","'display'",299],"]",["T_WHITESPACE"," ",299],["T_IS_EQUAL","==",299],["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'default'",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n\t\t\t",299],["T_VARIABLE","$plans",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getPlans",300],"(",["T_STRING","true",300],")",";",["T_WHITESPACE","\n\t\t\t",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$plans",301],";",["T_WHITESPACE","\n\t\t",301],"}",["T_WHITESPACE","\n\n\t\t",302],["T_COMMENT","\/\/ If the product has non-default plans, fetch all of them.\n",304],["T_WHITESPACE","\t\t",305],["T_VARIABLE","$available_plans",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getPlans",305],"(",["T_STRING","false",305],")",";",["T_WHITESPACE","\n\t\t",305],["T_VARIABLE","$selected_plans",306],["T_WHITESPACE","  ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","explode",306],"(",["T_CONSTANT_ENCAPSED_STRING","','",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$settings",306],"[",["T_CONSTANT_ENCAPSED_STRING","'plans'",306],"]",")",";",["T_WHITESPACE","\n\n\t\t",306],["T_VARIABLE","$plans",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",")",";",["T_WHITESPACE","\n\t\t",308],["T_FOREACH","foreach",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$available_plans",309],["T_WHITESPACE"," ",309],["T_AS","as",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$plan",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n\t\t\t",309],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_STRING","in_array",310],"(",["T_VARIABLE","$plan",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","id",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$selected_plans",310],")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n\t\t\t\t",310],["T_VARIABLE","$plans",311],"[","]",["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$plan",311],";",["T_WHITESPACE","\n\t\t\t",311],"}",["T_WHITESPACE","\n\t\t",312],"}",["T_WHITESPACE","\n\n\t\t",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_EMPTY","empty",315],"(",["T_VARIABLE","$plans",315],")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n\t\t\t",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_STRING","null",316],";",["T_WHITESPACE","\n\t\t",316],"}",["T_WHITESPACE","\n\n\t\t",317],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$plans",319],";",["T_WHITESPACE","\n\t",319],"}",["T_WHITESPACE","\n\n",320],"}",["T_WHITESPACE","\n",322]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_CLASS","class",3],["T_WHITESPACE"," ",3],["T_STRING","ModelExtensionPaymentBluePayHosted",3],["T_WHITESPACE"," ",3],["T_EXTENDS","extends",3],["T_WHITESPACE"," ",3],["T_STRING","Model",3],["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\n\t",3],["T_PUBLIC","public",5],["T_WHITESPACE"," ",5],["T_FUNCTION","function",5],["T_WHITESPACE"," ",5],["T_STRING","getMethod",5],"(",["T_VARIABLE","$address",5],",",["T_WHITESPACE"," ",5],["T_VARIABLE","$total",5],")",["T_WHITESPACE"," ",5],"{",["T_WHITESPACE","\n\t\t",5],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","load",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","language",6],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/bluepay_hosted'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$query",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","query",8],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_STRING","DB_PREFIX",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone` WHERE geo_zone_id = '\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_INT_CAST","(int)",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","config",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_geo_zone_id'",8],")",["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"' AND country_id = '\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_INT_CAST","(int)",8],["T_VARIABLE","$address",8],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",8],"]",["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"' AND (zone_id = '\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_INT_CAST","(int)",8],["T_VARIABLE","$address",8],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",8],"]",["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"' OR zone_id = '0')\"",8],")",";",["T_WHITESPACE","\n\n\t\t",8],["T_IF","if",10],["T_WHITESPACE"," ",10],"(",["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","config",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_total'",10],")",["T_WHITESPACE"," ",10],">",["T_WHITESPACE"," ",10],["T_LNUMBER","0",10],["T_WHITESPACE"," ",10],["T_BOOLEAN_AND","&&",10],["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","config",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_total'",10],")",["T_WHITESPACE"," ",10],">",["T_WHITESPACE"," ",10],["T_VARIABLE","$total",10],")",["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\t\t\t",10],["T_VARIABLE","$status",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_STRING","false",11],";",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE"," ",12],["T_ELSEIF","elseif",12],["T_WHITESPACE"," ",12],"(","!",["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","config",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_geo_zone_id'",12],")",")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$status",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_STRING","true",13],";",["T_WHITESPACE","\n\t\t",13],"}",["T_WHITESPACE"," ",14],["T_ELSEIF","elseif",14],["T_WHITESPACE"," ",14],"(",["T_VARIABLE","$query",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","num_rows",14],")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$status",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_STRING","true",15],";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE"," ",16],["T_ELSE","else",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$status",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","false",17],";",["T_WHITESPACE","\n\t\t",17],"}",["T_WHITESPACE","\n\n\t\t",18],["T_VARIABLE","$method_data",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",")",";",["T_WHITESPACE","\n\n\t\t",20],["T_IF","if",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$status",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\t\t\t",22],["T_VARIABLE","$method_data",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'code'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted'",24],",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'title'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","language",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'text_title'",25],")",",",["T_WHITESPACE","\n\t\t\t\t",25],["T_CONSTANT_ENCAPSED_STRING","'terms'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","''",26],",",["T_WHITESPACE","\n\t\t\t\t",26],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","config",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_sort_order'",27],")",["T_WHITESPACE","\n\t\t\t",27],")",";",["T_WHITESPACE","\n\t\t",28],"}",["T_WHITESPACE","\n\n\t\t",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$method_data",31],";",["T_WHITESPACE","\n\t",31],"}",["T_WHITESPACE","\n\n\t",32],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","addOrder",34],"(",["T_VARIABLE","$order_info",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$response_data",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","config",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_transaction'",35],")",["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'SALE'",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_VARIABLE","$release_status",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_LNUMBER","1",36],";",["T_WHITESPACE","\n\t\t",36],"}",["T_WHITESPACE"," ",37],["T_ELSE","else",37],["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n\t\t\t",37],["T_VARIABLE","$release_status",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","null",38],";",["T_WHITESPACE","\n\t\t",38],"}",["T_WHITESPACE","\n\n\t\t",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","query",41],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_STRING","DB_PREFIX",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"bluepay_hosted_order` SET `order_id` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$order_info",41],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",41],"]",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', `transaction_id` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","escape",41],"(",["T_VARIABLE","$response_data",41],"[",["T_CONSTANT_ENCAPSED_STRING","'RRNO'",41],"]",")",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `date_modified` = now(), `release_status` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$release_status",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', `currency_code` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","escape",41],"(",["T_VARIABLE","$order_info",41],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",41],"]",")",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', `total` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","currency",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","format",41],"(",["T_VARIABLE","$order_info",41],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$order_info",41],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",41],"]",",",["T_WHITESPACE"," ",41],["T_STRING","false",41],",",["T_WHITESPACE"," ",41],["T_STRING","false",41],")",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"'\"",41],")",";",["T_WHITESPACE","\n\n\t\t",41],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","db",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getLastId",43],"(",")",";",["T_WHITESPACE","\n\t",43],"}",["T_WHITESPACE","\n\n\t",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","addTransaction",46],"(",["T_VARIABLE","$bluepay_hosted_order_id",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$type",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$order_info",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n\t\t",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","db",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","query",47],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_STRING","DB_PREFIX",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"bluepay_hosted_order_transaction` SET `bluepay_hosted_order_id` = '\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_INT_CAST","(int)",47],["T_VARIABLE","$bluepay_hosted_order_id",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `type` = '\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","db",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","escape",47],"(",["T_VARIABLE","$type",47],")",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"', `amount` = '\"",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","currency",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","format",47],"(",["T_VARIABLE","$order_info",47],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",47],"]",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$order_info",47],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",47],"]",",",["T_WHITESPACE"," ",47],["T_STRING","false",47],",",["T_WHITESPACE"," ",47],["T_STRING","false",47],")",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","\"'\"",47],")",";",["T_WHITESPACE","\n\t",47],"}",["T_WHITESPACE","\n\n\t",48],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","logger",50],"(",["T_VARIABLE","$message",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","config",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted_debug'",51],")",["T_WHITESPACE"," ",51],["T_IS_EQUAL","==",51],["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t\t",51],["T_VARIABLE","$log",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","Log",52],"(",["T_CONSTANT_ENCAPSED_STRING","'bluepay_hosted.log'",52],")",";",["T_WHITESPACE","\n\t\t\t",52],["T_VARIABLE","$log",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","write",53],"(",["T_VARIABLE","$message",53],")",";",["T_WHITESPACE","\n\t\t",53],"}",["T_WHITESPACE","\n\t",54],"}",["T_WHITESPACE","\n\n",55],"}",["T_WHITESPACE","\n",57]]
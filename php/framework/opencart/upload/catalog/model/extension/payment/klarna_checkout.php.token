[["T_OPEN_TAG","<?php\n",1],["T_USE","use",2],["T_WHITESPACE"," ",2],["T_STRING","Klarna",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Rest",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Transport",2],["T_NS_SEPARATOR","\\",2],["T_STRING","Connector",2],["T_WHITESPACE"," ",2],["T_AS","as",2],["T_WHITESPACE"," ",2],["T_STRING","KCConnector",2],";",["T_WHITESPACE","\n",2],["T_USE","use",3],["T_WHITESPACE"," ",3],["T_STRING","Klarna",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Rest",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Transport",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ConnectorInterface",3],["T_WHITESPACE"," ",3],["T_AS","as",3],["T_WHITESPACE"," ",3],["T_STRING","KCConnectorInterface",3],";",["T_WHITESPACE","\n",3],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Klarna",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Rest",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Checkout",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Order",4],["T_WHITESPACE"," ",4],["T_AS","as",4],["T_WHITESPACE"," ",4],["T_STRING","KCOrder",4],";",["T_WHITESPACE","\n\n",4],["T_CLASS","class",6],["T_WHITESPACE"," ",6],["T_STRING","ModelExtensionPaymentKlarnaCheckout",6],["T_WHITESPACE"," ",6],["T_EXTENDS","extends",6],["T_WHITESPACE"," ",6],["T_STRING","Model",6],["T_WHITESPACE"," ",6],"{",["T_WHITESPACE","\n\t",6],["T_PUBLIC","public",7],["T_WHITESPACE"," ",7],["T_FUNCTION","function",7],["T_WHITESPACE"," ",7],["T_STRING","orderCreate",7],"(",["T_STRING","KCConnector",7],["T_WHITESPACE"," ",7],["T_VARIABLE","$connector",7],",",["T_WHITESPACE"," ",7],["T_VARIABLE","$order_data",7],")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t",7],["T_TRY","try",8],["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$checkout",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_NEW","new",9],["T_WHITESPACE"," ",9],["T_STRING","KCOrder",9],"(",["T_VARIABLE","$connector",9],")",";",["T_WHITESPACE","\n\t\t\t",9],["T_VARIABLE","$checkout",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","create",10],"(",["T_VARIABLE","$order_data",10],")",";",["T_WHITESPACE","\n\n\t\t\t",10],["T_RETURN","return",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$checkout",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","fetch",12],"(",")",";",["T_WHITESPACE","\n\t\t",12],"}",["T_WHITESPACE"," ",13],["T_CATCH","catch",13],["T_WHITESPACE"," ",13],"(",["T_NS_SEPARATOR","\\",13],["T_STRING","Exception",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$e",13],")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","log",14],"(",["T_VARIABLE","$e",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","getMessage",14],"(",")",",",["T_WHITESPACE"," ",14],["T_LNUMBER","1",14],")",";",["T_WHITESPACE","\n\n\t\t\t",14],["T_RETURN","return",16],["T_WHITESPACE"," ",16],["T_STRING","false",16],";",["T_WHITESPACE","\n\t\t",16],"}",["T_WHITESPACE","\n\t",17],"}",["T_WHITESPACE","\n\n\t",18],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","orderRetrieve",20],"(",["T_STRING","KCConnector",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$connector",20],",",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_id",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\t\t",20],["T_TRY","try",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\t\t\t",21],["T_VARIABLE","$checkout",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NEW","new",22],["T_WHITESPACE"," ",22],["T_STRING","KCOrder",22],"(",["T_VARIABLE","$connector",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$order_id",22],")",";",["T_WHITESPACE","\n\n\t\t\t",22],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$checkout",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","fetch",24],"(",")",";",["T_WHITESPACE","\n\t\t",24],"}",["T_WHITESPACE"," ",25],["T_CATCH","catch",25],["T_WHITESPACE"," ",25],"(",["T_NS_SEPARATOR","\\",25],["T_STRING","Exception",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$e",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n\t\t\t",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","log",26],"(",["T_VARIABLE","$e",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","getMessage",26],"(",")",",",["T_WHITESPACE"," ",26],["T_LNUMBER","1",26],")",";",["T_WHITESPACE","\n\n\t\t\t",26],["T_RETURN","return",28],["T_WHITESPACE"," ",28],["T_STRING","false",28],";",["T_WHITESPACE","\n\t\t",28],"}",["T_WHITESPACE","\n\t",29],"}",["T_WHITESPACE","\n\n\t",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","orderUpdate",32],"(",["T_STRING","KCConnector",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$connector",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$order_id",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$order_data",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t",32],["T_TRY","try",33],["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t",33],["T_VARIABLE","$checkout",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NEW","new",34],["T_WHITESPACE"," ",34],["T_STRING","KCOrder",34],"(",["T_VARIABLE","$connector",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$order_id",34],")",";",["T_WHITESPACE","\n\t\t\t",34],["T_VARIABLE","$checkout",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","update",35],"(",["T_VARIABLE","$order_data",35],")",";",["T_WHITESPACE","\n\n\t\t\t",35],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$checkout",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","fetch",37],"(",")",";",["T_WHITESPACE","\n\t\t",37],"}",["T_WHITESPACE"," ",38],["T_CATCH","catch",38],["T_WHITESPACE"," ",38],"(",["T_NS_SEPARATOR","\\",38],["T_STRING","Exception",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$e",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","log",39],"(",["T_VARIABLE","$e",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMessage",39],"(",")",",",["T_WHITESPACE"," ",39],["T_LNUMBER","1",39],")",";",["T_WHITESPACE","\n\n\t\t\t",39],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_STRING","false",41],";",["T_WHITESPACE","\n\t\t",41],"}",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\n\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","omOrderRetrieve",45],"(",["T_STRING","KCConnector",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$connector",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$order_id",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_TRY","try",46],["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n\t\t\t",46],["T_VARIABLE","$order",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Klarna",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Rest",47],["T_NS_SEPARATOR","\\",47],["T_STRING","OrderManagement",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Order",47],"(",["T_VARIABLE","$connector",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$order_id",47],")",";",["T_WHITESPACE","\n\n\t\t\t",47],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$order",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","fetch",49],"(",")",";",["T_WHITESPACE","\n\t\t",49],"}",["T_WHITESPACE"," ",50],["T_CATCH","catch",50],["T_WHITESPACE"," ",50],"(",["T_NS_SEPARATOR","\\",50],["T_STRING","Exception",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$e",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t\t",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","log",51],"(",["T_VARIABLE","$e",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMessage",51],"(",")",",",["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],")",";",["T_WHITESPACE","\n\n\t\t\t",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_STRING","false",53],";",["T_WHITESPACE","\n\t\t",53],"}",["T_WHITESPACE","\n\t",54],"}",["T_WHITESPACE","\n\n\t",55],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","getMethod",57],"(",["T_VARIABLE","$address",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$total",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n\t\t",57],["T_COMMENT","\/\/ Not shown in the payment method list\n",58],["T_WHITESPACE","\t\t",59],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\t",59],"}",["T_WHITESPACE","\n\n\t",60],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getConnector",62],"(",["T_VARIABLE","$accounts",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$currency",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t",62],["T_VARIABLE","$klarna_account",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","false",63],";",["T_WHITESPACE","\n\t\t",63],["T_VARIABLE","$connector",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","false",64],";",["T_WHITESPACE","\n\n\t\t",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$accounts",66],["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$currency",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n\t\t\t",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$accounts",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$account",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t\t",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$account",68],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",68],"]",["T_WHITESPACE"," ",68],["T_IS_EQUAL","==",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$currency",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t\t",68],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$account",69],"[",["T_CONSTANT_ENCAPSED_STRING","'environment'",69],"]",["T_WHITESPACE"," ",69],["T_IS_EQUAL","==",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'test'",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$account",70],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",70],"]",["T_WHITESPACE"," ",70],["T_IS_EQUAL","==",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'NA'",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",70],["T_VARIABLE","$base_url",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","KCConnectorInterface",71],["T_DOUBLE_COLON","::",71],["T_STRING","NA_TEST_BASE_URL",71],";",["T_WHITESPACE","\n\t\t\t\t\t\t",71],"}",["T_WHITESPACE"," ",72],["T_ELSEIF","elseif",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$account",72],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",72],"]",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'EU'",72],")",["T_WHITESPACE","  ",72],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",72],["T_VARIABLE","$base_url",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","KCConnectorInterface",73],["T_DOUBLE_COLON","::",73],["T_STRING","EU_TEST_BASE_URL",73],";",["T_WHITESPACE","\n\t\t\t\t\t\t",73],"}",["T_WHITESPACE","\n\t\t\t\t\t",74],"}",["T_WHITESPACE"," ",75],["T_ELSEIF","elseif",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$account",75],"[",["T_CONSTANT_ENCAPSED_STRING","'environment'",75],"]",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'live'",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$account",76],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",76],"]",["T_WHITESPACE"," ",76],["T_IS_EQUAL","==",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'NA'",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",76],["T_VARIABLE","$base_url",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","KCConnectorInterface",77],["T_DOUBLE_COLON","::",77],["T_STRING","NA_BASE_URL",77],";",["T_WHITESPACE","\n\t\t\t\t\t\t",77],"}",["T_WHITESPACE"," ",78],["T_ELSEIF","elseif",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$account",78],"[",["T_CONSTANT_ENCAPSED_STRING","'api'",78],"]",["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'EU'",78],")",["T_WHITESPACE","  ",78],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",78],["T_VARIABLE","$base_url",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","KCConnectorInterface",79],["T_DOUBLE_COLON","::",79],["T_STRING","EU_BASE_URL",79],";",["T_WHITESPACE","\n\t\t\t\t\t\t",79],"}",["T_WHITESPACE","\n\t\t\t\t\t",80],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",81],["T_VARIABLE","$klarna_account",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$account",83],";",["T_WHITESPACE","\n\t\t\t\t\t",83],["T_VARIABLE","$connector",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","connector",84],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",84],["T_VARIABLE","$account",85],"[",["T_CONSTANT_ENCAPSED_STRING","'merchant_id'",85],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",85],["T_VARIABLE","$account",86],"[",["T_CONSTANT_ENCAPSED_STRING","'secret'",86],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",86],["T_VARIABLE","$base_url",87],["T_WHITESPACE","\n\t\t\t\t\t",87],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",88],["T_BREAK","break",90],";",["T_WHITESPACE","\n\t\t\t\t",90],"}",["T_WHITESPACE","\n\t\t\t",91],"}",["T_WHITESPACE","\n\t\t",92],"}",["T_WHITESPACE","\n\n\t\t",93],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_VARIABLE","$klarna_account",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$connector",95],")",";",["T_WHITESPACE","\n\t",95],"}",["T_WHITESPACE","\n\n\t",96],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","getOrder",98],"(",["T_VARIABLE","$order_ref",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n\t\t",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","db",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","query",99],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_STRING","DB_PREFIX",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` WHERE `order_ref` = '\"",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","db",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","escape",99],"(",["T_VARIABLE","$order_ref",99],")",["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",99],")",["T_OBJECT_OPERATOR","->",99],["T_STRING","row",99],";",["T_WHITESPACE","\n\t",99],"}",["T_WHITESPACE","\n\n\t",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getOrderByOrderId",102],"(",["T_VARIABLE","$order_id",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n\t\t",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","db",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","query",103],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING","DB_PREFIX",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` WHERE `order_id` = '\"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_INT_CAST","(int)",103],["T_VARIABLE","$order_id",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","row",103],";",["T_WHITESPACE","\n\t",103],"}",["T_WHITESPACE","\n\n\t",104],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","addOrder",106],"(",["T_VARIABLE","$order_id",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$order_ref",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$data",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n\t\t",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","db",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","query",107],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_STRING","DB_PREFIX",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` SET `order_id` = '\"",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_INT_CAST","(int)",107],["T_VARIABLE","$order_id",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"', `order_ref` = '\"",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","db",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","escape",107],"(",["T_VARIABLE","$order_ref",107],")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"', `data` = '\"",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","db",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","escape",107],"(",["T_VARIABLE","$data",107],")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"'\"",107],")",";",["T_WHITESPACE","\n\t",107],"}",["T_WHITESPACE","\n\n\t",108],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","updateOrder",110],"(",["T_VARIABLE","$order_id",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$order_ref",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$data",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n\t\t",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","db",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","query",111],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_STRING","DB_PREFIX",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","\"klarna_checkout_order` SET `order_id` = '\"",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_INT_CAST","(int)",111],["T_VARIABLE","$order_id",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","\"', `data` = '\"",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","db",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","escape",111],"(",["T_VARIABLE","$data",111],")",["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_ref` = '\"",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","db",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","escape",111],"(",["T_VARIABLE","$order_ref",111],")",["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","\"'\"",111],")",";",["T_WHITESPACE","\n\t",111],"}",["T_WHITESPACE","\n\n\t",112],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","updateOcOrder",114],"(",["T_VARIABLE","$order_id",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$data",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","query",115],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_STRING","DB_PREFIX",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"order` SET `firstname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `lastname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `telephone` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'telephone'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_firstname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_lastname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_address_1` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_address_2` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_city` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_postcode` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_zone` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_zone_id` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_INT_CAST","(int)",115],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_id'",115],"]",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_country` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_country_id` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_INT_CAST","(int)",115],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",115],"]",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `payment_address_format` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_format'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_firstname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_lastname` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_address_1` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_1'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_address_2` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_2'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_city` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_postcode` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_zone` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_zone_id` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_INT_CAST","(int)",115],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_id'",115],"]",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_country` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_country_id` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_INT_CAST","(int)",115],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country_id'",115],"]",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"', `shipping_address_format` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","escape",115],"(",["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_format'",115],"]",")",["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_INT_CAST","(int)",115],["T_VARIABLE","$order_id",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","\"'\"",115],")",";",["T_WHITESPACE","\n\t",115],"}",["T_WHITESPACE","\n\n\t",116],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","updateOcOrderEmail",118],"(",["T_VARIABLE","$order_id",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$email",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n\t\t",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","db",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","query",119],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_STRING","DB_PREFIX",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","\"order` SET `email` = '\"",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","db",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","escape",119],"(",["T_VARIABLE","$email",119],")",["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_id` = '\"",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_INT_CAST","(int)",119],["T_VARIABLE","$order_id",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","\"'\"",119],")",";",["T_WHITESPACE","\n\t",119],"}",["T_WHITESPACE","\n\n\t",120],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getCountryByIsoCode2",122],"(",["T_VARIABLE","$iso_code_2",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\t\t",122],["T_VARIABLE","$query",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","db",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","query",123],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_STRING","DB_PREFIX",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","\"country WHERE `iso_code_2` = '\"",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","db",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","escape",123],"(",["T_VARIABLE","$iso_code_2",123],")",["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","\"' AND `status` = '1'\"",123],")",";",["T_WHITESPACE","\n\n\t\t",123],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$query",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","row",125],";",["T_WHITESPACE","\n\t",125],"}",["T_WHITESPACE","\n\n\t",126],["T_PUBLIC","public",128],["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","getCountryByIsoCode3",128],"(",["T_VARIABLE","$iso_code_3",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n\t\t",128],["T_VARIABLE","$query",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","db",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","query",129],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_STRING","DB_PREFIX",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","\"country WHERE `iso_code_3` = '\"",129],["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","db",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","escape",129],"(",["T_VARIABLE","$iso_code_3",129],")",["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","\"' AND `status` = '1'\"",129],")",";",["T_WHITESPACE","\n\n\t\t",129],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$query",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","row",131],";",["T_WHITESPACE","\n\t",131],"}",["T_WHITESPACE","\n\n\t",132],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","getZoneByCode",134],"(",["T_VARIABLE","$code",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$country_id",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n\t\t",134],["T_VARIABLE","$query",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","db",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","query",135],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_STRING","DB_PREFIX",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"zone WHERE (`code` = '\"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","db",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","escape",135],"(",["T_VARIABLE","$code",135],")",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"' OR `name` = '\"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","db",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","escape",135],"(",["T_VARIABLE","$code",135],")",["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"') AND `country_id` = '\"",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_INT_CAST","(int)",135],["T_VARIABLE","$country_id",135],["T_WHITESPACE"," ",135],".",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"' AND `status` = '1'\"",135],")",";",["T_WHITESPACE","\n\n\t\t",135],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$query",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","row",137],";",["T_WHITESPACE","\n\t",137],"}",["T_WHITESPACE","\n\n\t",138],["T_PUBLIC","public",140],["T_WHITESPACE"," ",140],["T_FUNCTION","function",140],["T_WHITESPACE"," ",140],["T_STRING","getCountriesByGeoZone",140],"(",["T_VARIABLE","$geo_zone_id",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t\t",140],["T_VARIABLE","$query",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","db",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","query",141],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_STRING","DB_PREFIX",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone WHERE geo_zone_id = '\"",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_INT_CAST","(int)",141],["T_VARIABLE","$geo_zone_id",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","\"' GROUP BY `country_id` ORDER BY `country_id` ASC\"",141],")",";",["T_WHITESPACE","\n\n\t\t",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$query",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","rows",143],";",["T_WHITESPACE","\n\t",143],"}",["T_WHITESPACE","\n\n\t",144],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","checkForPaymentTaxes",146],"(",["T_VARIABLE","$products",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t",146],["T_FOREACH","foreach",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$products",147],["T_WHITESPACE"," ",147],["T_AS","as",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$product",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n\t\t\t",147],["T_VARIABLE","$query",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","db",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","query",148],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS `total` FROM \"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_STRING","DB_PREFIX",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"tax_rule WHERE `based` = 'payment' AND `tax_class_id` = '\"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$product",148],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",148],"]",["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"'\"",148],")",";",["T_WHITESPACE","\n\n\t\t\t",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$query",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","row",150],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",150],"]",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t\t\t",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_STRING","true",151],";",["T_WHITESPACE","\n\t\t\t",151],"}",["T_WHITESPACE","\n\t\t",152],"}",["T_WHITESPACE","\n\n\t\t",153],["T_RETURN","return",155],["T_WHITESPACE"," ",155],["T_STRING","false",155],";",["T_WHITESPACE","\n\t",155],"}",["T_WHITESPACE","\n\n\t",156],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getDefaultShippingMethod",158],"(",["T_VARIABLE","$shipping_methods",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t",158],["T_VARIABLE","$first_shipping_method",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","reset",159],"(",["T_VARIABLE","$shipping_methods",159],")",";",["T_WHITESPACE","\n\n\t\t",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$first_shipping_method",161],["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],["T_ISSET","isset",161],"(",["T_VARIABLE","$first_shipping_method",161],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",161],"]",")",["T_WHITESPACE"," ",161],["T_BOOLEAN_AND","&&",161],["T_WHITESPACE"," ",161],"!",["T_EMPTY","empty",161],"(",["T_VARIABLE","$first_shipping_method",161],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",161],"]",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n\t\t\t",161],["T_VARIABLE","$first_shipping_method_quote",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","reset",162],"(",["T_VARIABLE","$first_shipping_method",162],"[",["T_CONSTANT_ENCAPSED_STRING","'quote'",162],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$first_shipping_method_quote",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t\t\t",164],["T_VARIABLE","$shipping",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","explode",165],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$first_shipping_method_quote",165],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",165],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",165],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$shipping_methods",167],"[",["T_VARIABLE","$shipping",167],"[",["T_LNUMBER","0",167],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'quote'",167],"]","[",["T_VARIABLE","$shipping",167],"[",["T_LNUMBER","1",167],"]","]",";",["T_WHITESPACE","\n\t\t\t",167],"}",["T_WHITESPACE","\n\t\t",168],"}",["T_WHITESPACE","\n\n\t\t",169],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",")",";",["T_WHITESPACE","\n\t",171],"}",["T_WHITESPACE","\n\n\t",172],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","log",174],"(",["T_VARIABLE","$data",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$step",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_LNUMBER","6",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n\t\t",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","config",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_checkout_debug'",175],")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n\t\t\t",175],["T_VARIABLE","$backtrace",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","debug_backtrace",176],"(",")",";",["T_WHITESPACE","\n\t\t\t",176],["T_VARIABLE","$log",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","Log",177],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_checkout.log'",177],")",";",["T_WHITESPACE","\n\t\t\t",177],["T_VARIABLE","$log",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","write",178],"(",["T_CONSTANT_ENCAPSED_STRING","'('",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$backtrace",178],"[",["T_VARIABLE","$step",178],"]","[",["T_CONSTANT_ENCAPSED_STRING","'class'",178],"]",["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'::'",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_VARIABLE","$backtrace",178],"[",["T_VARIABLE","$step",178],"]","[",["T_CONSTANT_ENCAPSED_STRING","'function'",178],"]",["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","') - '",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_STRING","print_r",178],"(",["T_VARIABLE","$data",178],",",["T_WHITESPACE"," ",178],["T_STRING","true",178],")",")",";",["T_WHITESPACE","\n\t\t",178],"}",["T_WHITESPACE","\n\t",179],"}",["T_WHITESPACE","\n\n\t",180],["T_PUBLIC","public",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","subscribeNewsletter",182],"(",["T_VARIABLE","$customer_id",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n\t\t",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","db",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","query",183],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_STRING","DB_PREFIX",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"customer SET newsletter = '1' WHERE customer_id = '\"",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_INT_CAST","(int)",183],["T_VARIABLE","$customer_id",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"'\"",183],")",";",["T_WHITESPACE","\n\t",183],"}",["T_WHITESPACE","\n\n\t",184],["T_PUBLIC","public",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","getTotals",186],"(",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n\t\t",186],["T_VARIABLE","$totals",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",";",["T_WHITESPACE","\n\t\t",187],["T_VARIABLE","$taxes",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","cart",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getTaxes",188],"(",")",";",["T_WHITESPACE","\n\t\t",188],["T_VARIABLE","$total",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_LNUMBER","0",189],";",["T_WHITESPACE","\n\n\t\t",189],["T_COMMENT","\/\/ Because __call can not keep var references so we put them into an array.\n",191],["T_WHITESPACE","\t\t",192],["T_VARIABLE","$total_data",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n\t\t\t",192],["T_CONSTANT_ENCAPSED_STRING","'totals'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],"&",["T_VARIABLE","$totals",193],",",["T_WHITESPACE","\n\t\t\t",193],["T_CONSTANT_ENCAPSED_STRING","'taxes'",194],["T_WHITESPACE","  ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],"&",["T_VARIABLE","$taxes",194],",",["T_WHITESPACE","\n\t\t\t",194],["T_CONSTANT_ENCAPSED_STRING","'total'",195],["T_WHITESPACE","  ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],"&",["T_VARIABLE","$total",195],["T_WHITESPACE","\n\t\t",195],")",";",["T_WHITESPACE","\n\n\t\t",196],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","load",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","model",198],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/extension'",198],")",";",["T_WHITESPACE","\n\n\t\t",198],["T_VARIABLE","$sort_order",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",")",";",["T_WHITESPACE","\n\n\t\t",200],["T_VARIABLE","$results",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","model_extension_extension",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getExtensions",202],"(",["T_CONSTANT_ENCAPSED_STRING","'total'",202],")",";",["T_WHITESPACE","\n\n\t\t",202],["T_FOREACH","foreach",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$results",204],["T_WHITESPACE"," ",204],["T_AS","as",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$key",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$value",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t\t",204],["T_VARIABLE","$sort_order",205],"[",["T_VARIABLE","$key",205],"]",["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","config",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","get",205],"(",["T_VARIABLE","$value",205],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",205],"]",["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'_sort_order'",205],")",";",["T_WHITESPACE","\n\t\t",205],"}",["T_WHITESPACE","\n\n\t\t",206],["T_STRING","array_multisort",208],"(",["T_VARIABLE","$sort_order",208],",",["T_WHITESPACE"," ",208],["T_STRING","SORT_ASC",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$results",208],")",";",["T_WHITESPACE","\n\n\t\t",208],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$results",210],["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$result",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n\t\t\t",210],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","config",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","get",211],"(",["T_VARIABLE","$result",211],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",211],"]",["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'_status'",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n\t\t\t\t",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","load",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","model",212],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/'",212],["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_VARIABLE","$result",212],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",212],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",212],["T_COMMENT","\/\/ We have to put the totals in an array so that they pass by reference.\n",214],["T_WHITESPACE","\t\t\t\t",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_total_'",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",215],"]","}",["T_OBJECT_OPERATOR","->",215],["T_STRING","getTotal",215],"(",["T_VARIABLE","$total_data",215],")",";",["T_WHITESPACE","\n\t\t\t",215],"}",["T_WHITESPACE","\n\t\t",216],"}",["T_WHITESPACE","\n\n\t\t",217],["T_VARIABLE","$sort_order",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",")",";",["T_WHITESPACE","\n\n\t\t",219],["T_FOREACH","foreach",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$totals",221],["T_WHITESPACE"," ",221],["T_AS","as",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$key",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$value",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n\t\t\t",221],["T_VARIABLE","$sort_order",222],"[",["T_VARIABLE","$key",222],"]",["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$value",222],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",222],"]",";",["T_WHITESPACE","\n\t\t",222],"}",["T_WHITESPACE","\n\n\t\t",223],["T_STRING","array_multisort",225],"(",["T_VARIABLE","$sort_order",225],",",["T_WHITESPACE"," ",225],["T_STRING","SORT_ASC",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$totals",225],")",";",["T_WHITESPACE","\n\n\t\t",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",["T_VARIABLE","$totals",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$taxes",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$total",227],")",";",["T_WHITESPACE","\n\t",227],"}",["T_WHITESPACE","\n\n\t",228],["T_PRIVATE","private",230],["T_WHITESPACE"," ",230],["T_FUNCTION","function",230],["T_WHITESPACE"," ",230],["T_STRING","connector",230],"(",["T_VARIABLE","$merchant_id",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$secret",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$url",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n\t\t",230],["T_TRY","try",231],["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n\t\t\t",231],["T_VARIABLE","$connector",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","KCConnector",232],["T_DOUBLE_COLON","::",232],["T_STRING","create",232],"(",["T_WHITESPACE","\n\t\t\t\t",232],["T_VARIABLE","$merchant_id",233],",",["T_WHITESPACE","\n\t\t\t\t",233],["T_VARIABLE","$secret",234],",",["T_WHITESPACE","\n\t\t\t\t",234],["T_VARIABLE","$url",235],["T_WHITESPACE","\n\t\t\t",235],")",";",["T_WHITESPACE","\n\n\t\t\t",236],["T_RETURN","return",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$connector",238],";",["T_WHITESPACE","\n\t\t",238],"}",["T_WHITESPACE"," ",239],["T_CATCH","catch",239],["T_WHITESPACE"," ",239],"(",["T_NS_SEPARATOR","\\",239],["T_STRING","Exception",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$e",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n\t\t\t",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","log",240],"(",["T_VARIABLE","$e",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getMessage",240],"(",")",",",["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],")",";",["T_WHITESPACE","\n\n\t\t\t",240],["T_RETURN","return",242],["T_WHITESPACE"," ",242],["T_STRING","false",242],";",["T_WHITESPACE","\n\t\t",242],"}",["T_WHITESPACE","\n\t",243],"}",["T_WHITESPACE","\n",244],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionPaymentPPPayflowIframe",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","getMethod",3],"(",["T_VARIABLE","$address",3],",",["T_WHITESPACE"," ",3],["T_VARIABLE","$total",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/pp_payflow_iframe'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$query",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","query",6],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_STRING","DB_PREFIX",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone WHERE geo_zone_id = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","config",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","get",6],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_geo_zone_id'",6],")",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' AND country_id = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$address",6],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",6],"]",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' AND (zone_id = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$address",6],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",6],"]",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' OR zone_id = '0')\"",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","config",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_total'",8],")",["T_WHITESPACE"," ",8],">",["T_WHITESPACE"," ",8],["T_VARIABLE","$total",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$status",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_STRING","false",9],";",["T_WHITESPACE","\n\t\t",9],"}",["T_WHITESPACE"," ",10],["T_ELSEIF","elseif",10],["T_WHITESPACE"," ",10],"(","!",["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","config",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_geo_zone_id'",10],")",")",["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\t\t\t",10],["T_VARIABLE","$status",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_STRING","true",11],";",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE"," ",12],["T_ELSEIF","elseif",12],["T_WHITESPACE"," ",12],"(",["T_VARIABLE","$query",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","num_rows",12],")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$status",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_STRING","true",13],";",["T_WHITESPACE","\n\t\t",13],"}",["T_WHITESPACE"," ",14],["T_ELSE","else",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$status",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_STRING","false",15],";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$method_data",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ARRAY","array",18],"(",")",";",["T_WHITESPACE","\n\n\t\t",18],["T_IF","if",20],["T_WHITESPACE"," ",20],"(",["T_VARIABLE","$status",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\t\t\t",20],["T_VARIABLE","$method_data",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_WHITESPACE","\n\t\t\t\t",21],["T_CONSTANT_ENCAPSED_STRING","'code'",22],["T_WHITESPACE"," ",22],["T_DOUBLE_ARROW","=>",22],["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe'",22],",",["T_WHITESPACE","\n\t\t\t\t",22],["T_CONSTANT_ENCAPSED_STRING","'title'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'text_title'",23],")",",",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'terms'",24],["T_WHITESPACE","      ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","''",24],",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","config",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_sort_order'",25],")",["T_WHITESPACE","\n\t\t\t",25],")",";",["T_WHITESPACE","\n\t\t",26],"}",["T_WHITESPACE","\n\n\t\t",27],["T_RETURN","return",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$method_data",29],";",["T_WHITESPACE","\n\t",29],"}",["T_WHITESPACE","\n\n\t",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","getOrderId",32],"(",["T_VARIABLE","$secure_token_id",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$result",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","query",33],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_id` FROM `\"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_STRING","DB_PREFIX",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"paypal_payflow_iframe_order` WHERE `secure_token_id` = '\"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","escape",33],"(",["T_VARIABLE","$secure_token_id",33],")",["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"'\"",33],")",["T_OBJECT_OPERATOR","->",33],["T_STRING","row",33],";",["T_WHITESPACE","\n\n\t\t",33],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$result",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_VARIABLE","$order_id",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$result",36],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",36],"]",";",["T_WHITESPACE","\n\t\t",36],"}",["T_WHITESPACE"," ",37],["T_ELSE","else",37],["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n\t\t\t",37],["T_VARIABLE","$order_id",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","false",38],";",["T_WHITESPACE","\n\t\t",38],"}",["T_WHITESPACE","\n\n\t\t",39],["T_RETURN","return",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$order_id",41],";",["T_WHITESPACE","\n\t",41],"}",["T_WHITESPACE","\n\n\t",42],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","addOrder",44],"(",["T_VARIABLE","$order_id",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$secure_token_id",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","db",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","query",45],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","DB_PREFIX",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"paypal_payflow_iframe_order` SET `order_id` = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_INT_CAST","(int)",45],["T_VARIABLE","$order_id",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"', `secure_token_id` = '\"",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","db",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","escape",45],"(",["T_VARIABLE","$secure_token_id",45],")",["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","\"'\"",45],")",";",["T_WHITESPACE","\n\t",45],"}",["T_WHITESPACE","\n\n\t",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","updateOrder",48],"(",["T_VARIABLE","$data",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","db",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","query",49],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tUPDATE `\"",49],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_PREFIX",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"paypal_payflow_iframe_order`\n\t\t\tSET `transaction_reference` = '\"",50],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","db",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","escape",51],"(",["T_VARIABLE","$data",51],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_reference'",51],"]",")",["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`transaction_type` = '\"",51],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","db",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","escape",52],"(",["T_VARIABLE","$data",52],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_type'",52],"]",")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`complete` = \"",52],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_INT_CAST","(int)",53],["T_VARIABLE","$data",53],"[",["T_CONSTANT_ENCAPSED_STRING","'complete'",53],"]",["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tWHERE `secure_token_id` = '\"",53],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","db",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","escape",54],"(",["T_VARIABLE","$data",54],"[",["T_CONSTANT_ENCAPSED_STRING","'secure_token_id'",54],"]",")",["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\"",54],")",";",["T_WHITESPACE","\n\t",55],"}",["T_WHITESPACE","\n\n\t",56],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","call",58],"(",["T_VARIABLE","$data",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t",58],["T_VARIABLE","$default_parameters",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE","\n\t\t\t",59],["T_CONSTANT_ENCAPSED_STRING","'USER'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","config",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_user'",60],")",",",["T_WHITESPACE","\n\t\t\t",60],["T_CONSTANT_ENCAPSED_STRING","'VENDOR'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","config",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_vendor'",61],")",",",["T_WHITESPACE","\n\t\t\t",61],["T_CONSTANT_ENCAPSED_STRING","'PWD'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","config",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_password'",62],")",",",["T_WHITESPACE","\n\t\t\t",62],["T_CONSTANT_ENCAPSED_STRING","'PARTNER'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","config",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_partner'",63],")",",",["T_WHITESPACE","\n\t\t\t",63],["T_CONSTANT_ENCAPSED_STRING","'BUTTONSOURCE'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'OpenCart_Cart_PFP'",64],",",["T_WHITESPACE","\n\t\t",64],")",";",["T_WHITESPACE","\n\n\t\t",65],["T_VARIABLE","$call_parameters",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","array_merge",67],"(",["T_VARIABLE","$data",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$default_parameters",67],")",";",["T_WHITESPACE","\n\n\t\t",67],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","config",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_test'",69],")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t\t",69],["T_VARIABLE","$url",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/pilot-payflowpro.paypal.com'",70],";",["T_WHITESPACE","\n\t\t",70],"}",["T_WHITESPACE"," ",71],["T_ELSE","else",71],["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n\t\t\t",71],["T_VARIABLE","$url",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/payflowpro.paypal.com'",72],";",["T_WHITESPACE","\n\t\t",72],"}",["T_WHITESPACE","\n\n\t\t",73],["T_VARIABLE","$query_params",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",";",["T_WHITESPACE","\n\n\t\t",75],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$call_parameters",77],["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$key",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$value",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t",77],["T_VARIABLE","$query_params",78],"[","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$key",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'='",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_STRING","utf8_decode",78],"(",["T_VARIABLE","$value",78],")",";",["T_WHITESPACE","\n\t\t",78],"}",["T_WHITESPACE","\n\n\t\t",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","log",81],"(",["T_CONSTANT_ENCAPSED_STRING","'Call data: '",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_STRING","implode",81],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$query_params",81],")",")",";",["T_WHITESPACE","\n\n\t\t",81],["T_VARIABLE","$curl",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","curl_init",83],"(",["T_VARIABLE","$url",83],")",";",["T_WHITESPACE","\n\n\t\t",83],["T_STRING","curl_setopt",85],"(",["T_VARIABLE","$curl",85],",",["T_WHITESPACE"," ",85],["T_STRING","CURLOPT_POST",85],",",["T_WHITESPACE"," ",85],["T_STRING","true",85],")",";",["T_WHITESPACE","\n\t\t",85],["T_STRING","curl_setopt",86],"(",["T_VARIABLE","$curl",86],",",["T_WHITESPACE"," ",86],["T_STRING","CURLOPT_POSTFIELDS",86],",",["T_WHITESPACE"," ",86],["T_STRING","implode",86],"(",["T_CONSTANT_ENCAPSED_STRING","'&'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$query_params",86],")",")",";",["T_WHITESPACE","\n\t\t",86],["T_STRING","curl_setopt",87],"(",["T_VARIABLE","$curl",87],",",["T_WHITESPACE"," ",87],["T_STRING","CURLOPT_RETURNTRANSFER",87],",",["T_WHITESPACE"," ",87],["T_STRING","true",87],")",";",["T_WHITESPACE","\n\t\t",87],["T_STRING","curl_setopt",88],"(",["T_VARIABLE","$curl",88],",",["T_WHITESPACE"," ",88],["T_STRING","CURLOPT_HEADER",88],",",["T_WHITESPACE"," ",88],["T_STRING","false",88],")",";",["T_WHITESPACE","\n\t\t",88],["T_STRING","curl_setopt",89],"(",["T_VARIABLE","$curl",89],",",["T_WHITESPACE"," ",89],["T_STRING","CURLOPT_TIMEOUT",89],",",["T_WHITESPACE"," ",89],["T_LNUMBER","30",89],")",";",["T_WHITESPACE","\n\t\t",89],["T_STRING","curl_setopt",90],"(",["T_VARIABLE","$curl",90],",",["T_WHITESPACE"," ",90],["T_STRING","CURLOPT_SSL_VERIFYPEER",90],",",["T_WHITESPACE"," ",90],["T_STRING","false",90],")",";",["T_WHITESPACE","\n\n\t\t",90],["T_VARIABLE","$response",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","curl_exec",92],"(",["T_VARIABLE","$curl",92],")",";",["T_WHITESPACE","\n\n\t\t",92],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","log",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Response data: '",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$response",94],")",";",["T_WHITESPACE","\n\n\t\t",94],["T_VARIABLE","$response_params",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",")",";",["T_WHITESPACE","\n\t\t",96],["T_STRING","parse_str",97],"(",["T_VARIABLE","$response",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$response_params",97],")",";",["T_WHITESPACE","\n\n\t\t",97],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$response_params",99],";",["T_WHITESPACE","\n\t",99],"}",["T_WHITESPACE","\n\n\t",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","addTransaction",102],"(",["T_VARIABLE","$data",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n\t\t",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","db",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","query",103],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\tINSERT INTO \"",103],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_STRING","DB_PREFIX",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","\"paypal_payflow_iframe_order_transaction\n\t\t\tSET order_id = \"",104],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_VARIABLE","$data",105],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",105],"]",["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","\",\n\t\t\t\ttransaction_reference = '\"",105],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","db",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","escape",106],"(",["T_VARIABLE","$data",106],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_reference'",106],"]",")",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\ttransaction_type = '\"",106],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","db",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","escape",107],"(",["T_VARIABLE","$data",107],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",107],"]",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t`time` = NOW(),\n\t\t\t\t`amount` = '\"",107],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","db",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","escape",109],"(",["T_VARIABLE","$data",109],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",109],"]",")",["T_WHITESPACE"," ",109],".",["T_WHITESPACE","  ",109],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\"",109],")",";",["T_WHITESPACE","\n\t",110],"}",["T_WHITESPACE","\n\n\t",111],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","log",113],"(",["T_VARIABLE","$message",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n\t\t",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","config",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","get",114],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_payflow_iframe_debug'",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t\t",114],["T_VARIABLE","$log",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","Log",115],"(",["T_CONSTANT_ENCAPSED_STRING","'payflow-iframe.log'",115],")",";",["T_WHITESPACE","\n\t\t\t",115],["T_VARIABLE","$log",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","write",116],"(",["T_VARIABLE","$message",116],")",";",["T_WHITESPACE","\n\t\t",116],"}",["T_WHITESPACE","\n\t",117],"}",["T_WHITESPACE","\n",118],"}"]
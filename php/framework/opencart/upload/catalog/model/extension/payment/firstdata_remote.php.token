[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionPaymentFirstdataRemote",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","getMethod",3],"(",["T_VARIABLE","$address",3],",",["T_WHITESPACE"," ",3],["T_VARIABLE","$total",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/firstdata_remote'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$query",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","db",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","query",6],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_STRING","DB_PREFIX",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"zone_to_geo_zone` WHERE `geo_zone_id` = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","config",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","get",6],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_geo_zone_id'",6],")",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' AND `country_id` = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$address",6],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",6],"]",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' AND (`zone_id` = '\"",6],["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_INT_CAST","(int)",6],["T_VARIABLE","$address",6],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",6],"]",["T_WHITESPACE"," ",6],".",["T_WHITESPACE"," ",6],["T_CONSTANT_ENCAPSED_STRING","\"' OR `zone_id` = '0')\"",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","config",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_total'",8],")",["T_WHITESPACE"," ",8],">",["T_WHITESPACE"," ",8],["T_LNUMBER","0",8],["T_WHITESPACE"," ",8],["T_BOOLEAN_AND","&&",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","config",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_total'",8],")",["T_WHITESPACE"," ",8],">",["T_WHITESPACE"," ",8],["T_VARIABLE","$total",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$status",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_STRING","false",9],";",["T_WHITESPACE","\n\t\t",9],"}",["T_WHITESPACE"," ",10],["T_ELSEIF","elseif",10],["T_WHITESPACE"," ",10],"(","!",["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","config",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_geo_zone_id'",10],")",")",["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\t\t\t",10],["T_VARIABLE","$status",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_STRING","true",11],";",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE"," ",12],["T_ELSEIF","elseif",12],["T_WHITESPACE"," ",12],"(",["T_VARIABLE","$query",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","num_rows",12],")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$status",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_STRING","true",13],";",["T_WHITESPACE","\n\t\t",13],"}",["T_WHITESPACE"," ",14],["T_ELSE","else",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$status",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_STRING","false",15],";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$method_data",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ARRAY","array",18],"(",")",";",["T_WHITESPACE","\n\n\t\t",18],["T_IF","if",20],["T_WHITESPACE"," ",20],"(",["T_VARIABLE","$status",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\t\t\t",20],["T_VARIABLE","$method_data",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_WHITESPACE","\n\t\t\t\t",21],["T_CONSTANT_ENCAPSED_STRING","'code'",22],["T_WHITESPACE","       ",22],["T_DOUBLE_ARROW","=>",22],["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote'",22],",",["T_WHITESPACE","\n\t\t\t\t",22],["T_CONSTANT_ENCAPSED_STRING","'title'",23],["T_WHITESPACE","      ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'text_title'",23],")",",",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'terms'",24],["T_WHITESPACE","      ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","''",24],",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","config",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_sort_order'",25],")",["T_WHITESPACE","\n\t\t\t",25],")",";",["T_WHITESPACE","\n\t\t",26],"}",["T_WHITESPACE","\n\n\t\t",27],["T_RETURN","return",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$method_data",29],";",["T_WHITESPACE","\n\t",29],"}",["T_WHITESPACE","\n\n\t",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","capturePayment",32],"(",["T_VARIABLE","$data",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$order_id",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","load",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","model",33],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",33],")",";",["T_WHITESPACE","\n\n\t\t",33],["T_VARIABLE","$order_info",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","model_checkout_order",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getOrder",35],"(",["T_VARIABLE","$order_id",35],")",";",["T_WHITESPACE","\n\n\t\t",35],["T_VARIABLE","$order_ref",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'API-'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_VARIABLE","$order_id",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'-'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_STRING","date",37],"(",["T_CONSTANT_ENCAPSED_STRING","\"Y-m-d-H-i-s\"",37],")",["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'-'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_STRING","rand",37],"(",["T_LNUMBER","10",37],",",["T_WHITESPACE"," ",37],["T_LNUMBER","500",37],")",";",["T_WHITESPACE","\n\n\t\t",37],["T_VARIABLE","$amount",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","currency",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","format",39],"(",["T_VARIABLE","$order_info",39],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",39],"]",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$order_info",39],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",39],"]",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$order_info",39],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",39],"]",",",["T_WHITESPACE"," ",39],["T_STRING","false",39],")",";",["T_WHITESPACE","\n\n\t\t",39],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","config",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_auto_settle'",41],")",["T_WHITESPACE"," ",41],["T_IS_EQUAL","==",41],["T_WHITESPACE"," ",41],["T_LNUMBER","1",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t",41],["T_VARIABLE","$type",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'sale'",42],";",["T_WHITESPACE","\n\t\t",42],"}",["T_WHITESPACE"," ",43],["T_ELSE","else",43],["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n\t\t\t",43],["T_VARIABLE","$type",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'preAuth'",44],";",["T_WHITESPACE","\n\t\t",44],"}",["T_WHITESPACE","\n\n\t\t",45],["T_VARIABLE","$currency",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","mapCurrency",47],"(",["T_VARIABLE","$order_info",47],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",47],"]",")",";",["T_WHITESPACE","\n\n\t\t",47],["T_VARIABLE","$token",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","''",49],";",["T_WHITESPACE","\n\t\t",49],["T_VARIABLE","$payment_token",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","''",50],";",["T_WHITESPACE","\n\t\t",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","config",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_card_storage'",51],")",["T_WHITESPACE"," ",51],["T_IS_EQUAL","==",51],["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t\t",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_ISSET","isset",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","request",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","post",52],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_choice'",52],"]",")",["T_WHITESPACE"," ",52],["T_BOOLEAN_AND","&&",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","request",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","post",52],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_choice'",52],"]",["T_WHITESPACE"," ",52],["T_IS_NOT_EQUAL","!=",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'new'",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t\t\t",52],["T_VARIABLE","$payment_token",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","request",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","post",53],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_choice'",53],"]",";",["T_WHITESPACE","\n\t\t\t",53],"}",["T_WHITESPACE"," ",54],["T_ELSEIF","elseif",54],["T_WHITESPACE"," ",54],"(",["T_ISSET","isset",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","request",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","post",54],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_store'",54],"]",")",["T_WHITESPACE"," ",54],["T_BOOLEAN_AND","&&",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","request",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","post",54],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_store'",54],"]",["T_WHITESPACE"," ",54],["T_IS_EQUAL","==",54],["T_WHITESPACE"," ",54],["T_LNUMBER","1",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n\t\t\t\t",54],["T_VARIABLE","$token",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","sha1",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","customer",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getId",55],"(",")",["T_WHITESPACE","  ",55],".",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'-'",55],["T_WHITESPACE"," ",55],".",["T_WHITESPACE"," ",55],["T_STRING","date",55],"(",["T_CONSTANT_ENCAPSED_STRING","\"Y-m-d-H-i-s\"",55],")",["T_WHITESPACE"," ",55],".",["T_WHITESPACE"," ",55],["T_STRING","rand",55],"(",["T_LNUMBER","10",55],",",["T_WHITESPACE"," ",55],["T_LNUMBER","500",55],")",")",";",["T_WHITESPACE","\n\t\t\t",55],"}",["T_WHITESPACE","\n\t\t",56],"}",["T_WHITESPACE","\n\n\t\t",57],["T_VARIABLE","$xml",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"UTF-8\"?>'",59],";",["T_WHITESPACE","\n\t\t",59],["T_VARIABLE","$xml",60],["T_WHITESPACE"," ",60],["T_CONCAT_EQUAL",".=",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http:\/\/schemas.xmlsoap.org\/soap\/envelope\/\">'",60],";",["T_WHITESPACE","\n\t\t\t",60],["T_VARIABLE","$xml",61],["T_WHITESPACE"," ",61],["T_CONCAT_EQUAL",".=",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Header \/>'",61],";",["T_WHITESPACE","\n\t\t\t\t",61],["T_VARIABLE","$xml",62],["T_WHITESPACE"," ",62],["T_CONCAT_EQUAL",".=",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'<SOAP-ENV:Body>'",62],";",["T_WHITESPACE","\n\t\t\t\t\t",62],["T_VARIABLE","$xml",63],["T_WHITESPACE"," ",63],["T_CONCAT_EQUAL",".=",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'<ipgapi:IPGApiOrderRequest xmlns:v1=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/v1\" xmlns:ipgapi=\"http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi\">'",63],";",["T_WHITESPACE","\n\t\t\t\t\t\t",63],["T_VARIABLE","$xml",64],["T_WHITESPACE"," ",64],["T_CONCAT_EQUAL",".=",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'<v1:Transaction>'",64],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",64],["T_VARIABLE","$xml",65],["T_WHITESPACE"," ",65],["T_CONCAT_EQUAL",".=",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'<v1:CreditCardTxType>'",65],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",65],["T_VARIABLE","$xml",66],["T_WHITESPACE"," ",66],["T_CONCAT_EQUAL",".=",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'<v1:Type>'",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_VARIABLE","$type",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Type>'",66],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",66],["T_VARIABLE","$xml",67],["T_WHITESPACE"," ",67],["T_CONCAT_EQUAL",".=",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CreditCardTxType>'",67],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_EMPTY","empty",68],"(",["T_VARIABLE","$payment_token",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",68],["T_VARIABLE","$xml",69],["T_WHITESPACE"," ",69],["T_CONCAT_EQUAL",".=",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'<v1:CreditCardData>'",69],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",69],["T_VARIABLE","$xml",70],["T_WHITESPACE"," ",70],["T_CONCAT_EQUAL",".=",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'<v1:CardNumber>'",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$data",70],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_number'",70],"]",["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CardNumber>'",70],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",70],["T_VARIABLE","$xml",71],["T_WHITESPACE"," ",71],["T_CONCAT_EQUAL",".=",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'<v1:ExpMonth>'",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_VARIABLE","$data",71],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_expire_date_month'",71],"]",["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:ExpMonth>'",71],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",71],["T_VARIABLE","$xml",72],["T_WHITESPACE"," ",72],["T_CONCAT_EQUAL",".=",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'<v1:ExpYear>'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$data",72],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_expire_date_year'",72],"]",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:ExpYear>'",72],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",72],["T_VARIABLE","$xml",73],["T_WHITESPACE"," ",73],["T_CONCAT_EQUAL",".=",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'<v1:CardCodeValue>'",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_VARIABLE","$data",73],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_cvv2'",73],"]",["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CardCodeValue>'",73],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",73],["T_VARIABLE","$xml",74],["T_WHITESPACE"," ",74],["T_CONCAT_EQUAL",".=",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CreditCardData>'",74],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",74],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t",75],["T_VARIABLE","$xml",76],["T_WHITESPACE"," ",76],["T_CONCAT_EQUAL",".=",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'<v1:Payment>'",76],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_EMPTY","empty",77],"(",["T_VARIABLE","$token",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",77],["T_VARIABLE","$xml",78],["T_WHITESPACE"," ",78],["T_CONCAT_EQUAL",".=",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'<v1:HostedDataID>'",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_VARIABLE","$token",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:HostedDataID>'",78],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",78],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(","!",["T_EMPTY","empty",80],"(",["T_VARIABLE","$payment_token",80],")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",80],["T_VARIABLE","$xml",81],["T_WHITESPACE"," ",81],["T_CONCAT_EQUAL",".=",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'<v1:HostedDataID>'",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$payment_token",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:HostedDataID>'",81],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",81],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",82],["T_VARIABLE","$xml",83],["T_WHITESPACE"," ",83],["T_CONCAT_EQUAL",".=",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'<v1:ChargeTotal>'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$amount",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:ChargeTotal>'",83],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",83],["T_VARIABLE","$xml",84],["T_WHITESPACE"," ",84],["T_CONCAT_EQUAL",".=",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'<v1:Currency>'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$currency",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Currency>'",84],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",84],["T_VARIABLE","$xml",85],["T_WHITESPACE"," ",85],["T_CONCAT_EQUAL",".=",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Payment>'",85],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",85],["T_VARIABLE","$xml",87],["T_WHITESPACE"," ",87],["T_CONCAT_EQUAL",".=",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'<v1:TransactionDetails>'",87],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",87],["T_VARIABLE","$xml",88],["T_WHITESPACE"," ",88],["T_CONCAT_EQUAL",".=",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'<v1:OrderId>'",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_VARIABLE","$order_ref",88],["T_WHITESPACE"," ",88],".",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:OrderId>'",88],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",88],["T_VARIABLE","$xml",89],["T_WHITESPACE"," ",89],["T_CONCAT_EQUAL",".=",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'<v1:Ip>'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$order_info",89],"[",["T_CONSTANT_ENCAPSED_STRING","'ip'",89],"]",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Ip>'",89],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",89],["T_VARIABLE","$xml",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'<v1:TransactionOrigin>ECI<\/v1:TransactionOrigin>'",90],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",90],["T_VARIABLE","$xml",91],["T_WHITESPACE"," ",91],["T_CONCAT_EQUAL",".=",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'<v1:PONumber>OPENCART2.0'",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","VERSION",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:PONumber>'",91],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",91],["T_VARIABLE","$xml",92],["T_WHITESPACE"," ",92],["T_CONCAT_EQUAL",".=",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:TransactionDetails>'",92],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",92],["T_VARIABLE","$xml",94],["T_WHITESPACE"," ",94],["T_CONCAT_EQUAL",".=",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'<v1:Billing>'",94],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",94],["T_VARIABLE","$xml",95],["T_WHITESPACE"," ",95],["T_CONCAT_EQUAL",".=",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'<v1:CustomerID>'",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","customer",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getId",95],"(",")",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:CustomerID>'",95],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",95],["T_VARIABLE","$xml",96],["T_WHITESPACE"," ",96],["T_CONCAT_EQUAL",".=",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'<v1:Name>'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$order_info",96],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",96],"]",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","' '",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$order_info",96],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",96],"]",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Name>'",96],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",96],["T_VARIABLE","$xml",97],["T_WHITESPACE"," ",97],["T_CONCAT_EQUAL",".=",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'<v1:Company>'",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$order_info",97],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_company'",97],"]",["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Company>'",97],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",97],["T_VARIABLE","$xml",98],["T_WHITESPACE"," ",98],["T_CONCAT_EQUAL",".=",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'<v1:Address1>'",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_VARIABLE","$order_info",98],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",98],"]",["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Address1>'",98],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",98],["T_VARIABLE","$xml",99],["T_WHITESPACE"," ",99],["T_CONCAT_EQUAL",".=",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'<v1:Address2>'",99],["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_VARIABLE","$order_info",99],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",99],"]",["T_WHITESPACE"," ",99],".",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Address2>'",99],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",99],["T_VARIABLE","$xml",100],["T_WHITESPACE"," ",100],["T_CONCAT_EQUAL",".=",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'<v1:City>'",100],["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_VARIABLE","$order_info",100],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",100],"]",["T_WHITESPACE"," ",100],".",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:City>'",100],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",100],["T_VARIABLE","$xml",101],["T_WHITESPACE"," ",101],["T_CONCAT_EQUAL",".=",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'<v1:State>'",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$order_info",101],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone'",101],"]",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:State>'",101],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",101],["T_VARIABLE","$xml",102],["T_WHITESPACE"," ",102],["T_CONCAT_EQUAL",".=",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'<v1:Zip>'",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_VARIABLE","$order_info",102],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",102],"]",["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Zip>'",102],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",102],["T_VARIABLE","$xml",103],["T_WHITESPACE"," ",103],["T_CONCAT_EQUAL",".=",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'<v1:Country>'",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_VARIABLE","$order_info",103],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_2'",103],"]",["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Country>'",103],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",103],["T_VARIABLE","$xml",104],["T_WHITESPACE"," ",104],["T_CONCAT_EQUAL",".=",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'<v1:Email>'",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$order_info",104],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",104],"]",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Email>'",104],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",104],["T_VARIABLE","$xml",105],["T_WHITESPACE"," ",105],["T_CONCAT_EQUAL",".=",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Billing>'",105],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",105],["T_VARIABLE","$xml",107],["T_WHITESPACE"," ",107],["T_CONCAT_EQUAL",".=",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'<v1:Shipping>'",107],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",107],["T_VARIABLE","$xml",108],["T_WHITESPACE"," ",108],["T_CONCAT_EQUAL",".=",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'<v1:Name>'",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$order_info",108],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",108],"]",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","' '",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$order_info",108],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",108],"]",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Name>'",108],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",108],["T_VARIABLE","$xml",109],["T_WHITESPACE"," ",109],["T_CONCAT_EQUAL",".=",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'<v1:Address1>'",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$order_info",109],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_1'",109],"]",["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Address1>'",109],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",109],["T_VARIABLE","$xml",110],["T_WHITESPACE"," ",110],["T_CONCAT_EQUAL",".=",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'<v1:Address2>'",110],["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_VARIABLE","$order_info",110],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_2'",110],"]",["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Address2>'",110],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",110],["T_VARIABLE","$xml",111],["T_WHITESPACE"," ",111],["T_CONCAT_EQUAL",".=",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'<v1:City>'",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_VARIABLE","$order_info",111],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",111],"]",["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:City>'",111],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",111],["T_VARIABLE","$xml",112],["T_WHITESPACE"," ",112],["T_CONCAT_EQUAL",".=",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'<v1:State>'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone'",112],"]",["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:State>'",112],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",112],["T_VARIABLE","$xml",113],["T_WHITESPACE"," ",113],["T_CONCAT_EQUAL",".=",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'<v1:Zip>'",113],["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_VARIABLE","$order_info",113],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",113],"]",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Zip>'",113],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",113],["T_VARIABLE","$xml",114],["T_WHITESPACE"," ",114],["T_CONCAT_EQUAL",".=",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'<v1:Country>'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$order_info",114],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_iso_code_2'",114],"]",["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Country>'",114],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",114],["T_VARIABLE","$xml",115],["T_WHITESPACE"," ",115],["T_CONCAT_EQUAL",".=",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Shipping>'",115],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",115],["T_VARIABLE","$xml",117],["T_WHITESPACE"," ",117],["T_CONCAT_EQUAL",".=",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'<\/v1:Transaction>'",117],";",["T_WHITESPACE","\n\t\t\t\t\t",117],["T_VARIABLE","$xml",118],["T_WHITESPACE"," ",118],["T_CONCAT_EQUAL",".=",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'<\/ipgapi:IPGApiOrderRequest>'",118],";",["T_WHITESPACE","\n\t\t\t\t",118],["T_VARIABLE","$xml",119],["T_WHITESPACE"," ",119],["T_CONCAT_EQUAL",".=",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Body>'",119],";",["T_WHITESPACE","\n\t\t",119],["T_VARIABLE","$xml",120],["T_WHITESPACE"," ",120],["T_CONCAT_EQUAL",".=",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'<\/SOAP-ENV:Envelope>'",120],";",["T_WHITESPACE","\n\n\t\t",120],["T_VARIABLE","$xml",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","simplexml_load_string",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","call",122],"(",["T_VARIABLE","$xml",122],")",")",";",["T_WHITESPACE","\n\n\t\t",122],["T_VARIABLE","$xml",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","registerXPathNamespace",124],"(",["T_CONSTANT_ENCAPSED_STRING","'ipgapi'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/ipg-online.com\/ipgapi\/schemas\/ipgapi'",124],")",";",["T_WHITESPACE","\n\t\t",124],["T_VARIABLE","$xml",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","registerXPathNamespace",125],"(",["T_CONSTANT_ENCAPSED_STRING","'soap'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/schemas.xmlsoap.org\/soap\/envelope\/'",125],")",";",["T_WHITESPACE","\n\n\t\t",125],["T_VARIABLE","$fault",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$xml",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","xpath",127],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/soap:Fault'",127],")",";",["T_WHITESPACE","\n\n\t\t",127],["T_VARIABLE","$response",129],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","''",129],";",["T_WHITESPACE","\n\t\t",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(","!",["T_EMPTY","empty",130],"(",["T_VARIABLE","$fault",130],"[",["T_LNUMBER","0",130],"]",")",["T_WHITESPACE"," ",130],["T_BOOLEAN_AND","&&",130],["T_WHITESPACE"," ",130],["T_ISSET","isset",130],"(",["T_VARIABLE","$fault",130],"[",["T_LNUMBER","0",130],"]",["T_OBJECT_OPERATOR","->",130],["T_STRING","detail",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n\t\t\t",130],["T_VARIABLE","$response",131],"[",["T_CONSTANT_ENCAPSED_STRING","'fault'",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING_CAST","(string)",131],["T_VARIABLE","$fault",131],"[",["T_LNUMBER","0",131],"]",["T_OBJECT_OPERATOR","->",131],["T_STRING","detail",131],";",["T_WHITESPACE","\n\t\t",131],"}",["T_WHITESPACE","\n\n\t\t",132],["T_VARIABLE","$string",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$xml",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","xpath",134],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:CommercialServiceProvider'",134],")",";",["T_WHITESPACE","\n\t\t",134],["T_VARIABLE","$response",135],"[",["T_CONSTANT_ENCAPSED_STRING","'provider'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_ISSET","isset",135],"(",["T_VARIABLE","$string",135],"[",["T_LNUMBER","0",135],"]",")",["T_WHITESPACE"," ",135],"?",["T_WHITESPACE"," ",135],["T_STRING_CAST","(string)",135],["T_VARIABLE","$string",135],"[",["T_LNUMBER","0",135],"]",["T_WHITESPACE"," ",135],":",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","''",135],";",["T_WHITESPACE","\n\n\t\t",135],["T_VARIABLE","$string",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$xml",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","xpath",137],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TransactionTime'",137],")",";",["T_WHITESPACE","\n\t\t",137],["T_VARIABLE","$response",138],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_time'",138],"]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ISSET","isset",138],"(",["T_VARIABLE","$string",138],"[",["T_LNUMBER","0",138],"]",")",["T_WHITESPACE"," ",138],"?",["T_WHITESPACE"," ",138],["T_STRING_CAST","(string)",138],["T_VARIABLE","$string",138],"[",["T_LNUMBER","0",138],"]",["T_WHITESPACE"," ",138],":",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","''",138],";",["T_WHITESPACE","\n\n\t\t",138],["T_VARIABLE","$string",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$xml",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","xpath",140],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorReferenceNumber'",140],")",";",["T_WHITESPACE","\n\t\t",140],["T_VARIABLE","$response",141],"[",["T_CONSTANT_ENCAPSED_STRING","'reference_number'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ISSET","isset",141],"(",["T_VARIABLE","$string",141],"[",["T_LNUMBER","0",141],"]",")",["T_WHITESPACE"," ",141],"?",["T_WHITESPACE"," ",141],["T_STRING_CAST","(string)",141],["T_VARIABLE","$string",141],"[",["T_LNUMBER","0",141],"]",["T_WHITESPACE"," ",141],":",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","''",141],";",["T_WHITESPACE","\n\n\t\t",141],["T_VARIABLE","$string",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$xml",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","xpath",143],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorResponseMessage'",143],")",";",["T_WHITESPACE","\n\t\t",143],["T_VARIABLE","$response",144],"[",["T_CONSTANT_ENCAPSED_STRING","'response_message'",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ISSET","isset",144],"(",["T_VARIABLE","$string",144],"[",["T_LNUMBER","0",144],"]",")",["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_STRING_CAST","(string)",144],["T_VARIABLE","$string",144],"[",["T_LNUMBER","0",144],"]",["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","''",144],";",["T_WHITESPACE","\n\n\t\t",144],["T_VARIABLE","$string",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$xml",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","xpath",146],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorResponseCode'",146],")",";",["T_WHITESPACE","\n\t\t",146],["T_VARIABLE","$response",147],"[",["T_CONSTANT_ENCAPSED_STRING","'response_code'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_ISSET","isset",147],"(",["T_VARIABLE","$string",147],"[",["T_LNUMBER","0",147],"]",")",["T_WHITESPACE"," ",147],"?",["T_WHITESPACE"," ",147],["T_STRING_CAST","(string)",147],["T_VARIABLE","$string",147],"[",["T_LNUMBER","0",147],"]",["T_WHITESPACE"," ",147],":",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],";",["T_WHITESPACE","\n\n\t\t",147],["T_VARIABLE","$string",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$xml",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","xpath",149],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ErrorMessage'",149],")",";",["T_WHITESPACE","\n\t\t",149],["T_VARIABLE","$response",150],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_ISSET","isset",150],"(",["T_VARIABLE","$string",150],"[",["T_LNUMBER","0",150],"]",")",["T_WHITESPACE"," ",150],"?",["T_WHITESPACE"," ",150],["T_STRING_CAST","(string)",150],["T_VARIABLE","$string",150],"[",["T_LNUMBER","0",150],"]",["T_WHITESPACE"," ",150],":",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","''",150],";",["T_WHITESPACE","\n\n\t\t",150],["T_VARIABLE","$string",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$xml",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","xpath",152],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:OrderId'",152],")",";",["T_WHITESPACE","\n\t\t",152],["T_VARIABLE","$response",153],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_ISSET","isset",153],"(",["T_VARIABLE","$string",153],"[",["T_LNUMBER","0",153],"]",")",["T_WHITESPACE"," ",153],"?",["T_WHITESPACE"," ",153],["T_STRING_CAST","(string)",153],["T_VARIABLE","$string",153],"[",["T_LNUMBER","0",153],"]",["T_WHITESPACE"," ",153],":",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","''",153],";",["T_WHITESPACE","\n\n\t\t",153],["T_VARIABLE","$string",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$xml",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","xpath",155],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ApprovalCode'",155],")",";",["T_WHITESPACE","\n\t\t",155],["T_VARIABLE","$response",156],"[",["T_CONSTANT_ENCAPSED_STRING","'approval_code'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_ISSET","isset",156],"(",["T_VARIABLE","$string",156],"[",["T_LNUMBER","0",156],"]",")",["T_WHITESPACE"," ",156],"?",["T_WHITESPACE"," ",156],["T_STRING_CAST","(string)",156],["T_VARIABLE","$string",156],"[",["T_LNUMBER","0",156],"]",["T_WHITESPACE"," ",156],":",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","''",156],";",["T_WHITESPACE","\n\n\t\t",156],["T_VARIABLE","$string",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$xml",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","xpath",158],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TDate'",158],")",";",["T_WHITESPACE","\n\t\t",158],["T_VARIABLE","$response",159],"[",["T_CONSTANT_ENCAPSED_STRING","'t_date'",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ISSET","isset",159],"(",["T_VARIABLE","$string",159],"[",["T_LNUMBER","0",159],"]",")",["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_STRING_CAST","(string)",159],["T_VARIABLE","$string",159],"[",["T_LNUMBER","0",159],"]",["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","''",159],";",["T_WHITESPACE","\n\n\t\t",159],["T_VARIABLE","$string",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$xml",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","xpath",161],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:TransactionResult'",161],")",";",["T_WHITESPACE","\n\t\t",161],["T_VARIABLE","$response",162],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_result'",162],"]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ISSET","isset",162],"(",["T_VARIABLE","$string",162],"[",["T_LNUMBER","0",162],"]",")",["T_WHITESPACE"," ",162],"?",["T_WHITESPACE"," ",162],["T_STRING_CAST","(string)",162],["T_VARIABLE","$string",162],"[",["T_LNUMBER","0",162],"]",["T_WHITESPACE"," ",162],":",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","''",162],";",["T_WHITESPACE","\n\n\t\t",162],["T_VARIABLE","$string",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$xml",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","xpath",164],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:PaymentType'",164],")",";",["T_WHITESPACE","\n\t\t",164],["T_VARIABLE","$response",165],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_type'",165],"]",["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_ISSET","isset",165],"(",["T_VARIABLE","$string",165],"[",["T_LNUMBER","0",165],"]",")",["T_WHITESPACE"," ",165],"?",["T_WHITESPACE"," ",165],["T_STRING_CAST","(string)",165],["T_VARIABLE","$string",165],"[",["T_LNUMBER","0",165],"]",["T_WHITESPACE"," ",165],":",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","''",165],";",["T_WHITESPACE","\n\n\t\t",165],["T_VARIABLE","$string",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$xml",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","xpath",167],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:Brand'",167],")",";",["T_WHITESPACE","\n\t\t",167],["T_VARIABLE","$response",168],"[",["T_CONSTANT_ENCAPSED_STRING","'brand'",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_ISSET","isset",168],"(",["T_VARIABLE","$string",168],"[",["T_LNUMBER","0",168],"]",")",["T_WHITESPACE"," ",168],"?",["T_WHITESPACE"," ",168],["T_STRING_CAST","(string)",168],["T_VARIABLE","$string",168],"[",["T_LNUMBER","0",168],"]",["T_WHITESPACE"," ",168],":",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","''",168],";",["T_WHITESPACE","\n\n\t\t",168],["T_VARIABLE","$string",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$xml",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","xpath",170],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:Country'",170],")",";",["T_WHITESPACE","\n\t\t",170],["T_VARIABLE","$response",171],"[",["T_CONSTANT_ENCAPSED_STRING","'country'",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ISSET","isset",171],"(",["T_VARIABLE","$string",171],"[",["T_LNUMBER","0",171],"]",")",["T_WHITESPACE"," ",171],"?",["T_WHITESPACE"," ",171],["T_STRING_CAST","(string)",171],["T_VARIABLE","$string",171],"[",["T_LNUMBER","0",171],"]",["T_WHITESPACE"," ",171],":",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","''",171],";",["T_WHITESPACE","\n\n\t\t",171],["T_VARIABLE","$string",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$xml",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","xpath",173],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorReceiptNumber'",173],")",";",["T_WHITESPACE","\n\t\t",173],["T_VARIABLE","$response",174],"[",["T_CONSTANT_ENCAPSED_STRING","'receipt_number'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ISSET","isset",174],"(",["T_VARIABLE","$string",174],"[",["T_LNUMBER","0",174],"]",")",["T_WHITESPACE"," ",174],"?",["T_WHITESPACE"," ",174],["T_STRING_CAST","(string)",174],["T_VARIABLE","$string",174],"[",["T_LNUMBER","0",174],"]",["T_WHITESPACE"," ",174],":",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","''",174],";",["T_WHITESPACE","\n\n\t\t",174],["T_VARIABLE","$string",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$xml",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","xpath",176],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorTraceNumber'",176],")",";",["T_WHITESPACE","\n\t\t",176],["T_VARIABLE","$response",177],"[",["T_CONSTANT_ENCAPSED_STRING","'trace_number'",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ISSET","isset",177],"(",["T_VARIABLE","$string",177],"[",["T_LNUMBER","0",177],"]",")",["T_WHITESPACE"," ",177],"?",["T_WHITESPACE"," ",177],["T_STRING_CAST","(string)",177],["T_VARIABLE","$string",177],"[",["T_LNUMBER","0",177],"]",["T_WHITESPACE"," ",177],":",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","''",177],";",["T_WHITESPACE","\n\n\t\t",177],["T_VARIABLE","$string",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$xml",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","xpath",179],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:ProcessorCCVResponse'",179],")",";",["T_WHITESPACE","\n\t\t",179],["T_VARIABLE","$response",180],"[",["T_CONSTANT_ENCAPSED_STRING","'ccv'",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_ISSET","isset",180],"(",["T_VARIABLE","$string",180],"[",["T_LNUMBER","0",180],"]",")",["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_STRING_CAST","(string)",180],["T_VARIABLE","$string",180],"[",["T_LNUMBER","0",180],"]",["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","''",180],";",["T_WHITESPACE","\n\n\t\t",180],["T_VARIABLE","$string",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$xml",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","xpath",182],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/ipgapi:AVSResponse'",182],")",";",["T_WHITESPACE","\n\t\t",182],["T_VARIABLE","$response",183],"[",["T_CONSTANT_ENCAPSED_STRING","'avs'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ISSET","isset",183],"(",["T_VARIABLE","$string",183],"[",["T_LNUMBER","0",183],"]",")",["T_WHITESPACE"," ",183],"?",["T_WHITESPACE"," ",183],["T_STRING_CAST","(string)",183],["T_VARIABLE","$string",183],"[",["T_LNUMBER","0",183],"]",["T_WHITESPACE"," ",183],":",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","''",183],";",["T_WHITESPACE","\n\n\t\t",183],["T_VARIABLE","$response",185],"[",["T_CONSTANT_ENCAPSED_STRING","'card_number_ref'",185],"]",["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING_CAST","(string)",185],["T_STRING","substr",185],"(",["T_VARIABLE","$data",185],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_number'",185],"]",",",["T_WHITESPACE"," ",185],"-",["T_LNUMBER","4",185],")",";",["T_WHITESPACE","\n\n\t\t",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_STRING","strtoupper",187],"(",["T_VARIABLE","$response",187],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction_result'",187],"]",")",["T_WHITESPACE"," ",187],["T_IS_EQUAL","==",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'APPROVED'",187],["T_WHITESPACE"," ",187],["T_BOOLEAN_AND","&&",187],["T_WHITESPACE"," ",187],"!",["T_EMPTY","empty",187],"(",["T_VARIABLE","$token",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n\t\t\t",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","storeCard",188],"(",["T_VARIABLE","$token",188],",",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","customer",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getId",188],"(",")",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$response",188],"[",["T_CONSTANT_ENCAPSED_STRING","'brand'",188],"]",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$data",188],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_expire_date_month'",188],"]",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$data",188],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_expire_date_year'",188],"]",",",["T_WHITESPACE"," ",188],["T_STRING_CAST","(string)",188],["T_STRING","substr",188],"(",["T_VARIABLE","$data",188],"[",["T_CONSTANT_ENCAPSED_STRING","'cc_number'",188],"]",",",["T_WHITESPACE"," ",188],"-",["T_LNUMBER","4",188],")",")",";",["T_WHITESPACE","\n\t\t",188],"}",["T_WHITESPACE","\n\n\t\t",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","logger",191],"(",["T_STRING","print_r",191],"(",["T_VARIABLE","$response",191],",",["T_WHITESPACE"," ",191],["T_LNUMBER","1",191],")",")",";",["T_WHITESPACE","\n\n\t\t",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$response",193],";",["T_WHITESPACE","\n\t",193],"}",["T_WHITESPACE","\n\n\t",194],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","call",196],"(",["T_VARIABLE","$xml",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n\t\t",196],["T_VARIABLE","$ch",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","curl_init",197],"(",")",";",["T_WHITESPACE","\n\t\t",197],["T_STRING","curl_setopt",198],"(",["T_VARIABLE","$ch",198],",",["T_WHITESPACE"," ",198],["T_STRING","CURLOPT_URL",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","\"https:\/\/test.ipg-online.com\/ipgapi\/services\"",198],")",";",["T_WHITESPACE","\n\t\t",198],["T_STRING","curl_setopt",199],"(",["T_VARIABLE","$ch",199],",",["T_WHITESPACE"," ",199],["T_STRING","CURLOPT_POST",199],",",["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],")",";",["T_WHITESPACE","\n\t\t",199],["T_STRING","curl_setopt",200],"(",["T_VARIABLE","$ch",200],",",["T_WHITESPACE"," ",200],["T_STRING","CURLOPT_HTTPHEADER",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","\"Content-Type: text\/xml\"",200],")",")",";",["T_WHITESPACE","\n\t\t",200],["T_STRING","curl_setopt",201],"(",["T_VARIABLE","$ch",201],",",["T_WHITESPACE"," ",201],["T_STRING","CURLOPT_HTTPAUTH",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'CURLAUTH_BASIC'",201],")",";",["T_WHITESPACE","\n\t\t",201],["T_STRING","curl_setopt",202],"(",["T_VARIABLE","$ch",202],",",["T_WHITESPACE"," ",202],["T_STRING","CURLOPT_USERPWD",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","config",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","get",202],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_user_id'",202],")",["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","':'",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","config",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","get",202],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_password'",202],")",")",";",["T_WHITESPACE","\n\t\t",202],["T_STRING","curl_setopt",203],"(",["T_VARIABLE","$ch",203],",",["T_WHITESPACE"," ",203],["T_STRING","CURLOPT_SSL_VERIFYPEER",203],",",["T_WHITESPACE"," ",203],["T_LNUMBER","1",203],")",";",["T_WHITESPACE","\n\t\t",203],["T_STRING","curl_setopt",204],"(",["T_VARIABLE","$ch",204],",",["T_WHITESPACE"," ",204],["T_STRING","CURLOPT_CAINFO",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","config",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","get",204],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_ca'",204],")",")",";",["T_WHITESPACE","\n\t\t",204],["T_STRING","curl_setopt",205],"(",["T_VARIABLE","$ch",205],",",["T_WHITESPACE"," ",205],["T_STRING","CURLOPT_SSLCERT",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","config",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","get",205],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_certificate'",205],")",")",";",["T_WHITESPACE","\n\t\t",205],["T_STRING","curl_setopt",206],"(",["T_VARIABLE","$ch",206],",",["T_WHITESPACE"," ",206],["T_STRING","CURLOPT_SSLKEY",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","config",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","get",206],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_key'",206],")",")",";",["T_WHITESPACE","\n\t\t",206],["T_STRING","curl_setopt",207],"(",["T_VARIABLE","$ch",207],",",["T_WHITESPACE"," ",207],["T_STRING","CURLOPT_SSLKEYPASSWD",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","config",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_key_pw'",207],")",")",";",["T_WHITESPACE","\n\t\t",207],["T_STRING","curl_setopt",208],"(",["T_VARIABLE","$ch",208],",",["T_WHITESPACE"," ",208],["T_STRING","CURLOPT_RETURNTRANSFER",208],",",["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],")",";",["T_WHITESPACE","\n\t\t",208],["T_STRING","curl_setopt",209],"(",["T_VARIABLE","$ch",209],",",["T_WHITESPACE"," ",209],["T_STRING","CURLOPT_POSTFIELDS",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$xml",209],")",";",["T_WHITESPACE","\n\t\t",209],["T_COMMENT","\/\/curl_setopt($ch, CURLOPT_STDERR, fopen(DIR_LOGS . \"\/headers.txt\", \"w+\"));\n",210],["T_WHITESPACE","\t\t",211],["T_STRING","curl_setopt",211],"(",["T_VARIABLE","$ch",211],",",["T_WHITESPACE"," ",211],["T_STRING","CURLOPT_VERBOSE",211],",",["T_WHITESPACE"," ",211],["T_STRING","true",211],")",";",["T_WHITESPACE","\n\t\t",211],["T_VARIABLE","$response",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","curl_exec",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$ch",212],")",";",["T_WHITESPACE","\n\n\t\t",212],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","logger",214],"(",["T_CONSTANT_ENCAPSED_STRING","'Post data: '",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_STRING","print_r",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","request",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","post",214],",",["T_WHITESPACE"," ",214],["T_LNUMBER","1",214],")",")",";",["T_WHITESPACE","\n\t\t",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","logger",215],"(",["T_CONSTANT_ENCAPSED_STRING","'Request: '",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$xml",215],")",";",["T_WHITESPACE","\n\t\t",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","logger",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl error #: '",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_STRING","curl_errno",216],"(",["T_VARIABLE","$ch",216],")",")",";",["T_WHITESPACE","\n\t\t",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","logger",217],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl error text: '",217],["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_STRING","curl_error",217],"(",["T_VARIABLE","$ch",217],")",")",";",["T_WHITESPACE","\n\t\t",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","logger",218],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl response info: '",218],["T_WHITESPACE"," ",218],".",["T_WHITESPACE"," ",218],["T_STRING","print_r",218],"(",["T_STRING","curl_getinfo",218],"(",["T_VARIABLE","$ch",218],")",",",["T_WHITESPACE"," ",218],["T_LNUMBER","1",218],")",")",";",["T_WHITESPACE","\n\t\t",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","logger",219],"(",["T_CONSTANT_ENCAPSED_STRING","'Curl response: '",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_VARIABLE","$response",219],")",";",["T_WHITESPACE","\n\n\t\t",219],["T_STRING","curl_close",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$ch",221],")",";",["T_WHITESPACE","\n\n\t\t",221],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$response",223],";",["T_WHITESPACE","\n\t",223],"}",["T_WHITESPACE","\n\n\t",224],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","addOrder",226],"(",["T_VARIABLE","$order_info",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$capture_result",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n\t\t",226],["T_IF","if",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","config",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","get",227],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_auto_settle'",227],")",["T_WHITESPACE"," ",227],["T_IS_EQUAL","==",227],["T_WHITESPACE"," ",227],["T_LNUMBER","1",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t\t\t",227],["T_VARIABLE","$settle_status",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_LNUMBER","1",228],";",["T_WHITESPACE","\n\t\t",228],"}",["T_WHITESPACE"," ",229],["T_ELSE","else",229],["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n\t\t\t",229],["T_VARIABLE","$settle_status",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],";",["T_WHITESPACE","\n\t\t",230],"}",["T_WHITESPACE","\n\n\t\t",231],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","query",233],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_STRING","DB_PREFIX",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order` SET `order_id` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_INT_CAST","(int)",233],["T_VARIABLE","$order_info",233],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",233],"]",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `order_ref` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","escape",233],"(",["T_VARIABLE","$capture_result",233],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",233],"]",")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `authcode` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","escape",233],"(",["T_VARIABLE","$capture_result",233],"[",["T_CONSTANT_ENCAPSED_STRING","'approval_code'",233],"]",")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `tdate` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","escape",233],"(",["T_VARIABLE","$capture_result",233],"[",["T_CONSTANT_ENCAPSED_STRING","'t_date'",233],"]",")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `date_modified` = now(), `capture_status` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_INT_CAST","(int)",233],["T_VARIABLE","$settle_status",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `currency_code` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","db",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","escape",233],"(",["T_VARIABLE","$order_info",233],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",233],"]",")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"', `total` = '\"",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","currency",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","format",233],"(",["T_VARIABLE","$order_info",233],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",233],"]",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$order_info",233],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",233],"]",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$order_info",233],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",233],"]",",",["T_WHITESPACE"," ",233],["T_STRING","false",233],")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","\"'\"",233],")",";",["T_WHITESPACE","\n\n\t\t",233],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","db",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getLastId",235],"(",")",";",["T_WHITESPACE","\n\t",235],"}",["T_WHITESPACE","\n\n\t",236],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","addTransaction",238],"(",["T_VARIABLE","$firstdata_remote_order_id",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$type",238],",",["T_WHITESPACE"," ",238],["T_VARIABLE","$order_info",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_ARRAY","array",238],"(",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n\t\t",238],["T_IF","if",239],["T_WHITESPACE"," ",239],"(","!",["T_EMPTY","empty",239],"(",["T_VARIABLE","$order_info",239],")",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n\t\t\t",239],["T_VARIABLE","$amount",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","currency",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","format",240],"(",["T_VARIABLE","$order_info",240],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",240],"]",",",["T_WHITESPACE"," ",240],["T_VARIABLE","$order_info",240],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",240],"]",",",["T_WHITESPACE"," ",240],["T_VARIABLE","$order_info",240],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",240],"]",",",["T_WHITESPACE"," ",240],["T_STRING","false",240],")",";",["T_WHITESPACE","\n\t\t",240],"}",["T_WHITESPACE"," ",241],["T_ELSE","else",241],["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n\t\t\t",241],["T_VARIABLE","$amount",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_DNUMBER","0.00",242],";",["T_WHITESPACE","\n\t\t",242],"}",["T_WHITESPACE","\n\n\t\t",243],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","db",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","query",245],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_STRING","DB_PREFIX",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_order_transaction` SET `firstdata_remote_order_id` = '\"",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_INT_CAST","(int)",245],["T_VARIABLE","$firstdata_remote_order_id",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `type` = '\"",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","db",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","escape",245],"(",["T_VARIABLE","$type",245],")",["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"', `amount` = '\"",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_DOUBLE_CAST","(float)",245],["T_VARIABLE","$amount",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"'\"",245],")",";",["T_WHITESPACE","\n\t",245],"}",["T_WHITESPACE","\n\n\t",246],["T_PUBLIC","public",248],["T_WHITESPACE"," ",248],["T_FUNCTION","function",248],["T_WHITESPACE"," ",248],["T_STRING","logger",248],"(",["T_VARIABLE","$message",248],")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n\t\t",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","config",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","get",249],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote_debug'",249],")",["T_WHITESPACE"," ",249],["T_IS_EQUAL","==",249],["T_WHITESPACE"," ",249],["T_LNUMBER","1",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n\t\t\t",249],["T_VARIABLE","$log",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_NEW","new",250],["T_WHITESPACE"," ",250],["T_STRING","Log",250],"(",["T_CONSTANT_ENCAPSED_STRING","'firstdata_remote.log'",250],")",";",["T_WHITESPACE","\n\t\t\t",250],["T_VARIABLE","$log",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","write",251],"(",["T_VARIABLE","$message",251],")",";",["T_WHITESPACE","\n\t\t",251],"}",["T_WHITESPACE","\n\t",252],"}",["T_WHITESPACE","\n\n\t",253],["T_PUBLIC","public",255],["T_WHITESPACE"," ",255],["T_FUNCTION","function",255],["T_WHITESPACE"," ",255],["T_STRING","addHistory",255],"(",["T_VARIABLE","$order_id",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$order_status_id",255],",",["T_WHITESPACE"," ",255],["T_VARIABLE","$comment",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n\t\t",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","db",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","query",256],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_STRING","DB_PREFIX",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","\"order_history` SET `order_id` = '\"",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_INT_CAST","(int)",256],["T_VARIABLE","$order_id",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","\"', `order_status_id` = '\"",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_INT_CAST","(int)",256],["T_VARIABLE","$order_status_id",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","\"', `notify` = '0', `comment` = '\"",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","db",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","escape",256],"(",["T_VARIABLE","$comment",256],")",["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = NOW()\"",256],")",";",["T_WHITESPACE","\n\t",256],"}",["T_WHITESPACE","\n\n\t",257],["T_PUBLIC","public",259],["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","mapCurrency",259],"(",["T_VARIABLE","$code",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n\t\t",259],["T_VARIABLE","$currency",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",["T_WHITESPACE","\n\t\t\t",260],["T_CONSTANT_ENCAPSED_STRING","'GBP'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_LNUMBER","826",261],",",["T_WHITESPACE","\n\t\t\t",261],["T_CONSTANT_ENCAPSED_STRING","'USD'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_LNUMBER","840",262],",",["T_WHITESPACE","\n\t\t\t",262],["T_CONSTANT_ENCAPSED_STRING","'EUR'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_LNUMBER","978",263],",",["T_WHITESPACE","\n\t\t",263],")",";",["T_WHITESPACE","\n\n\t\t",264],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_STRING","array_key_exists",266],"(",["T_VARIABLE","$code",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$currency",266],")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n\t\t\t",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$currency",267],"[",["T_VARIABLE","$code",267],"]",";",["T_WHITESPACE","\n\t\t",267],"}",["T_WHITESPACE"," ",268],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n\t\t\t",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_STRING","false",269],";",["T_WHITESPACE","\n\t\t",269],"}",["T_WHITESPACE","\n\t",270],"}",["T_WHITESPACE","\n\n\t",271],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","getStoredCards",273],"(",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t",273],["T_VARIABLE","$customer_id",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","customer",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","getId",274],"(",")",";",["T_WHITESPACE","\n\n\t\t",274],["T_VARIABLE","$query",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","db",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","query",276],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM \"",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_STRING","DB_PREFIX",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_card WHERE customer_id = '\"",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_INT_CAST","(int)",276],["T_VARIABLE","$customer_id",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"'\"",276],")",";",["T_WHITESPACE","\n\n\t\t",276],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$query",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","rows",278],";",["T_WHITESPACE","\n\t",278],"}",["T_WHITESPACE","\n\n\t",279],["T_PUBLIC","public",281],["T_WHITESPACE"," ",281],["T_FUNCTION","function",281],["T_WHITESPACE"," ",281],["T_STRING","storeCard",281],"(",["T_VARIABLE","$token",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$customer_id",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$type",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$month",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$year",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$digits",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n\t\t",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","query",282],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_STRING","DB_PREFIX",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"firstdata_remote_card` SET `customer_id` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_INT_CAST","(int)",282],["T_VARIABLE","$customer_id",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = now(), `token` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","escape",282],"(",["T_VARIABLE","$token",282],")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"', `card_type` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","escape",282],"(",["T_VARIABLE","$type",282],")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"', `expire_month` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","escape",282],"(",["T_VARIABLE","$month",282],")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"', `expire_year` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","escape",282],"(",["T_VARIABLE","$year",282],")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"', `digits` = '\"",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","db",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","escape",282],"(",["T_VARIABLE","$digits",282],")",["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","\"'\"",282],")",";",["T_WHITESPACE","\n\t",282],"}",["T_WHITESPACE","\n",283],"}"]
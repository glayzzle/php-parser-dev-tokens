[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayAmazonOrder",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","acknowledgeOrder",3],"(",["T_VARIABLE","$order_id",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$amazon_order_id",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","getAmazonOrderId",4],"(",["T_VARIABLE","$order_id",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$request_xml",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],"\"",["T_ENCAPSED_AND_WHITESPACE","<Request>\n  <AmazonOrderId>",6],["T_VARIABLE","$amazon_order_id",7],["T_ENCAPSED_AND_WHITESPACE","<\/AmazonOrderId>\n  <MerchantOrderId>",7],["T_VARIABLE","$order_id",8],["T_ENCAPSED_AND_WHITESPACE","<\/MerchantOrderId>\n<\/Request>",8],"\"",";",["T_WHITESPACE","\n\n\t\t",9],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","openbay",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","amazon",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","callNoResponse",11],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/acknowledge'",11],",",["T_WHITESPACE"," ",11],["T_VARIABLE","$request_xml",11],",",["T_WHITESPACE"," ",11],["T_STRING","false",11],")",";",["T_WHITESPACE","\n\t",11],"}",["T_WHITESPACE","\n\n\t",12],["T_PUBLIC","public",14],["T_WHITESPACE"," ",14],["T_FUNCTION","function",14],["T_WHITESPACE"," ",14],["T_STRING","getProductId",14],"(",["T_VARIABLE","$sku",14],")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$row",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","query",15],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `product_id` FROM `\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_STRING","DB_PREFIX",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `amazon_sku` = '\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","escape",15],"(",["T_VARIABLE","$sku",15],")",["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"'\"",15],")",["T_OBJECT_OPERATOR","->",15],["T_STRING","row",15],";",["T_WHITESPACE","\n\n\t\t",15],["T_IF","if",17],["T_WHITESPACE"," ",17],"(",["T_ISSET","isset",17],"(",["T_VARIABLE","$row",17],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",17],"]",")",["T_WHITESPACE"," ",17],["T_BOOLEAN_AND","&&",17],["T_WHITESPACE"," ",17],"!",["T_EMPTY","empty",17],"(",["T_VARIABLE","$row",17],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",17],"]",")",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\t\t\t",17],["T_RETURN","return",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$row",18],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",18],"]",";",["T_WHITESPACE","\n\t\t",18],"}",["T_WHITESPACE","\n\n\t\t",19],["T_RETURN","return",21],["T_WHITESPACE"," ",21],["T_LNUMBER","0",21],";",["T_WHITESPACE","\n\t",21],"}",["T_WHITESPACE","\n\n\t",22],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","getProductVar",24],"(",["T_VARIABLE","$sku",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t",24],["T_VARIABLE","$row",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","query",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `var` FROM `\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_STRING","DB_PREFIX",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `amazon_sku` = '\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","escape",25],"(",["T_VARIABLE","$sku",25],")",["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"'\"",25],")",["T_OBJECT_OPERATOR","->",25],["T_STRING","row",25],";",["T_WHITESPACE","\n\n\t\t",25],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_ISSET","isset",27],"(",["T_VARIABLE","$row",27],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",27],"]",")",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t",27],["T_RETURN","return",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$row",28],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",28],"]",";",["T_WHITESPACE","\n\t\t",28],"}",["T_WHITESPACE","\n\n\t\t",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","''",31],";",["T_WHITESPACE","\n\t",31],"}",["T_WHITESPACE","\n\n\t",32],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","decreaseProductQuantity",34],"(",["T_VARIABLE","$product_id",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$delta",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$var",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","''",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$product_id",35],["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_RETURN","return",36],";",["T_WHITESPACE","\n\t\t",36],"}",["T_WHITESPACE","\n\t\t",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$var",38],["T_WHITESPACE"," ",38],["T_IS_EQUAL","==",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","''",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","db",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","query",39],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_STRING","DB_PREFIX",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"product` SET `quantity` = GREATEST(`quantity` - '\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_INT_CAST","(int)",39],["T_VARIABLE","$delta",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"', 0) WHERE `product_id` = '\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_INT_CAST","(int)",39],["T_VARIABLE","$product_id",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"' AND `subtract` = '1'\"",39],")",";",["T_WHITESPACE","\n\t\t",39],"}",["T_WHITESPACE"," ",40],["T_ELSE","else",40],["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","query",41],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_STRING","DB_PREFIX",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant` SET `stock` = GREATEST(`stock` - '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$delta",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', 0) WHERE `product_id` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$product_id",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"' AND `sku` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","escape",41],"(",["T_VARIABLE","$var",41],")",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"' AND `subtract` = '1'\"",41],")",";",["T_WHITESPACE","\n\t\t",41],"}",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\n\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","getMappedStatus",45],"(",["T_VARIABLE","$amazon_status",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$amazon_status",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","trim",46],"(",["T_STRING","strtolower",46],"(",["T_VARIABLE","$amazon_status",46],")",")",";",["T_WHITESPACE","\n\n\t\t",46],["T_SWITCH","switch",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$amazon_status",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t",48],["T_CASE","case",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'pending'",49],":",["T_WHITESPACE","\n\t\t\t\t",49],["T_VARIABLE","$order_status",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","config",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_pending'",50],")",";",["T_WHITESPACE","\n\t\t\t\t",50],["T_BREAK","break",51],";",["T_WHITESPACE","\n\n\t\t\t",51],["T_CASE","case",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'unshipped'",53],":",["T_WHITESPACE","\n\t\t\t\t",53],["T_VARIABLE","$order_status",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","config",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_unshipped'",54],")",";",["T_WHITESPACE","\n\t\t\t\t",54],["T_BREAK","break",55],";",["T_WHITESPACE","\n\n\t\t\t",55],["T_CASE","case",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'partiallyshipped'",57],":",["T_WHITESPACE","\n\t\t\t\t",57],["T_VARIABLE","$order_status",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","config",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_partially_shipped'",58],")",";",["T_WHITESPACE","\n\t\t\t\t",58],["T_BREAK","break",59],";",["T_WHITESPACE","\n\n\t\t\t",59],["T_CASE","case",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'shipped'",61],":",["T_WHITESPACE","\n\t\t\t\t",61],["T_VARIABLE","$order_status",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","config",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_shipped'",62],")",";",["T_WHITESPACE","\n\t\t\t\t",62],["T_BREAK","break",63],";",["T_WHITESPACE","\n\n\t\t\t",63],["T_CASE","case",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'canceled'",65],":",["T_WHITESPACE","\n\t\t\t\t",65],["T_VARIABLE","$order_status",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","config",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_canceled'",66],")",";",["T_WHITESPACE","\n\t\t\t\t",66],["T_BREAK","break",67],";",["T_WHITESPACE","\n\n\t\t\t",67],["T_CASE","case",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'unfulfillable'",69],":",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$order_status",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_order_status_unfulfillable'",70],")",";",["T_WHITESPACE","\n\t\t\t\t",70],["T_BREAK","break",71],";",["T_WHITESPACE","\n\n\t\t\t",71],["T_DEFAULT","default",73],":",["T_WHITESPACE","\n\t\t\t\t",73],["T_VARIABLE","$order_status",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","config",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'config_order_status_id'",74],")",";",["T_WHITESPACE","\n\t\t\t\t",74],["T_BREAK","break",75],";",["T_WHITESPACE","\n\t\t",75],"}",["T_WHITESPACE","\n\n\t\t",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$order_status",78],";",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n\n\t",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getCountryName",81],"(",["T_VARIABLE","$country_code",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t",81],["T_VARIABLE","$row",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","query",82],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `name` FROM `\"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_STRING","DB_PREFIX",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"country` WHERE LOWER(`iso_code_2`) = '\"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","escape",82],"(",["T_STRING","strtolower",82],"(",["T_VARIABLE","$country_code",82],")",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"'\"",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","row",82],";",["T_WHITESPACE","\n\n\t\t",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_ISSET","isset",84],"(",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",84],"]",")",["T_WHITESPACE"," ",84],["T_BOOLEAN_AND","&&",84],["T_WHITESPACE"," ",84],"!",["T_EMPTY","empty",84],"(",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",84],"]",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n\t\t\t",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$row",85],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",85],"]",";",["T_WHITESPACE","\n\t\t",85],"}",["T_WHITESPACE","\n\n\t\t",86],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n\t",88],"}",["T_WHITESPACE","\n\n\t",89],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getCountryId",91],"(",["T_VARIABLE","$country_code",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n\t\t",91],["T_VARIABLE","$row",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","query",92],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `country_id` FROM `\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","DB_PREFIX",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"country` WHERE LOWER(`iso_code_2`) = '\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","escape",92],"(",["T_STRING","strtolower",92],"(",["T_VARIABLE","$country_code",92],")",")",["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"'\"",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","row",92],";",["T_WHITESPACE","\n\n\t\t",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_ISSET","isset",94],"(",["T_VARIABLE","$row",94],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",94],"]",")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],"!",["T_EMPTY","empty",94],"(",["T_VARIABLE","$row",94],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",94],"]",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n\t\t\t",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$row",95],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",95],"]",";",["T_WHITESPACE","\n\t\t",95],"}",["T_WHITESPACE","\n\n\t\t",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],";",["T_WHITESPACE","\n\t",98],"}",["T_WHITESPACE","\n\n\t",99],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getZoneId",101],"(",["T_VARIABLE","$zone_name",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t\t",101],["T_VARIABLE","$row",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","db",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","query",102],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `zone_id` FROM `\"",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_STRING","DB_PREFIX",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","\"zone` WHERE LOWER(`name`) = '\"",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","db",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","escape",102],"(",["T_STRING","strtolower",102],"(",["T_VARIABLE","$zone_name",102],")",")",["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","\"'\"",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","row",102],";",["T_WHITESPACE","\n\n\t\t",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_ISSET","isset",104],"(",["T_VARIABLE","$row",104],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",104],"]",")",["T_WHITESPACE"," ",104],["T_BOOLEAN_AND","&&",104],["T_WHITESPACE"," ",104],"!",["T_EMPTY","empty",104],"(",["T_VARIABLE","$row",104],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",104],"]",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_VARIABLE","$row",105],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",105],"]",";",["T_WHITESPACE","\n\t\t",105],"}",["T_WHITESPACE","\n\n\t\t",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],";",["T_WHITESPACE","\n\t",108],"}",["T_WHITESPACE","\n\n\t",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","updateOrderStatus",111],"(",["T_VARIABLE","$order_id",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$status_id",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","db",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","query",112],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_STRING","DB_PREFIX",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\"order_history` (`order_id`, `order_status_id`, `notify`, `comment`, `date_added`) VALUES (\"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_VARIABLE","$order_id",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\", \"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_VARIABLE","$status_id",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\", 0, '', NOW())\"",112],")",";",["T_WHITESPACE","\n\n\t\t",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","db",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","query",114],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_STRING","DB_PREFIX",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","\"order` SET `order_status_id` = \"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_INT_CAST","(int)",114],["T_VARIABLE","$status_id",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","\" WHERE `order_id` = \"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_INT_CAST","(int)",114],["T_VARIABLE","$order_id",114],")",";",["T_WHITESPACE","\n\t",114],"}",["T_WHITESPACE","\n\n\t",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addAmazonOrder",117],"(",["T_VARIABLE","$order_id",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$amazon_order_id",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n\t\t",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","db",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","query",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_STRING","DB_PREFIX",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` (`order_id`, `amazon_order_id`) VALUES (\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_INT_CAST","(int)",118],["T_VARIABLE","$order_id",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\", '\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","db",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","escape",118],"(",["T_VARIABLE","$amazon_order_id",118],")",["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"')\"",118],")",";",["T_WHITESPACE","\n\t",118],"}",["T_WHITESPACE","\n\n\t",119],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","addAmazonOrderProducts",121],"(",["T_VARIABLE","$order_id",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$data",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t",121],["T_FOREACH","foreach",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$data",122],["T_WHITESPACE"," ",122],["T_AS","as",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$sku",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$order_item_id",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\n\t\t\t",122],["T_VARIABLE","$row",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","db",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","query",124],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_product_id` FROM `\"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_STRING","DB_PREFIX",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","\"order_product` WHERE `model` = '\"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","db",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","escape",124],"(",["T_VARIABLE","$sku",124],")",["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","\"' AND `order_id` = \"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_INT_CAST","(int)",124],["T_VARIABLE","$order_id",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT 1\"",124],")",["T_OBJECT_OPERATOR","->",124],["T_STRING","row",124],";",["T_WHITESPACE","\n\n\t\t\t",124],["T_IF","if",126],["T_WHITESPACE"," ",126],"(","!",["T_ISSET","isset",126],"(",["T_VARIABLE","$row",126],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",126],"]",")",["T_WHITESPACE"," ",126],["T_BOOLEAN_OR","||",126],["T_WHITESPACE"," ",126],["T_EMPTY","empty",126],"(",["T_VARIABLE","$row",126],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",126],"]",")",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n\t\t\t\t",126],["T_CONTINUE","continue",127],";",["T_WHITESPACE","\n\t\t\t",127],"}",["T_WHITESPACE","\n\n\t\t\t",128],["T_VARIABLE","$order_product_id",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$row",130],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",130],"]",";",["T_WHITESPACE","\n\n\t\t\t",130],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","db",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","query",132],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_STRING","DB_PREFIX",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order_product` (`order_product_id`, `amazon_order_item_id`) VALUES (\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_INT_CAST","(int)",132],["T_VARIABLE","$order_product_id",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\", '\"",132],["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","db",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","escape",132],"(",["T_VARIABLE","$order_item_id",132],")",["T_WHITESPACE"," ",132],".",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"')\"",132],")",";",["T_WHITESPACE","\n\t\t",132],"}",["T_WHITESPACE","\n\t",133],"}",["T_WHITESPACE","\n\n\t",134],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getOrderId",136],"(",["T_VARIABLE","$amazon_order_id",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n\t\t",136],["T_VARIABLE","$row",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","db",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","query",137],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_id` FROM `\"",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_STRING","DB_PREFIX",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` WHERE `amazon_order_id` = '\"",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","db",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","escape",137],"(",["T_VARIABLE","$amazon_order_id",137],")",["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","row",137],";",["T_WHITESPACE","\n\n\t\t",137],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_ISSET","isset",139],"(",["T_VARIABLE","$row",139],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",139],"]",")",["T_WHITESPACE"," ",139],["T_BOOLEAN_AND","&&",139],["T_WHITESPACE"," ",139],"!",["T_EMPTY","empty",139],"(",["T_VARIABLE","$row",139],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",139],"]",")",")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n\t\t\t",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$row",140],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",140],"]",";",["T_WHITESPACE","\n\t\t",140],"}",["T_WHITESPACE","\n\n\t\t",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","''",143],";",["T_WHITESPACE","\n\t",143],"}",["T_WHITESPACE","\n\n\t",144],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","getOrderStatus",146],"(",["T_VARIABLE","$order_id",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t",146],["T_VARIABLE","$row",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","db",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","query",147],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_status_id` FROM `\"",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_STRING","DB_PREFIX",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","\"order` WHERE `order_id` = \"",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_INT_CAST","(int)",147],["T_VARIABLE","$order_id",147],")",["T_OBJECT_OPERATOR","->",147],["T_STRING","row",147],";",["T_WHITESPACE","\n\n\t\t",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_ISSET","isset",149],"(",["T_VARIABLE","$row",149],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",149],"]",")",["T_WHITESPACE"," ",149],["T_BOOLEAN_AND","&&",149],["T_WHITESPACE"," ",149],"!",["T_EMPTY","empty",149],"(",["T_VARIABLE","$row",149],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",149],"]",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n\t\t\t",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$row",150],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",150],"]",";",["T_WHITESPACE","\n\t\t",150],"}",["T_WHITESPACE","\n\n\t\t",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_LNUMBER","0",153],";",["T_WHITESPACE","\n\t",153],"}",["T_WHITESPACE","\n\n\t",154],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","getAmazonOrderId",156],"(",["T_VARIABLE","$order_id",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t",156],["T_VARIABLE","$row",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","db",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","query",157],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `amazon_order_id` FROM `\"",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_STRING","DB_PREFIX",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","\"amazon_order` WHERE `order_id` = \"",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_INT_CAST","(int)",157],["T_VARIABLE","$order_id",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT 1\"",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","row",157],";",["T_WHITESPACE","\n\n\t\t",157],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_ISSET","isset",159],"(",["T_VARIABLE","$row",159],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",159],"]",")",["T_WHITESPACE"," ",159],["T_BOOLEAN_AND","&&",159],["T_WHITESPACE"," ",159],"!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$row",159],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",159],"]",")",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n\t\t\t",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$row",160],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_order_id'",160],"]",";",["T_WHITESPACE","\n\t\t",160],"}",["T_WHITESPACE","\n\n\t\t",161],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","null",163],";",["T_WHITESPACE","\n\t",163],"}",["T_WHITESPACE","\n\n\t",164],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","getProductOptionsByVar",166],"(",["T_VARIABLE","$product_var",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t",166],["T_VARIABLE","$options",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n\n\t\t",167],["T_VARIABLE","$option_value_ids",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","explode",169],"(",["T_CONSTANT_ENCAPSED_STRING","':'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$product_var",169],")",";",["T_WHITESPACE","\n\t\t",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$option_value_ids",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$option_value_id",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n\t\t\t",170],["T_VARIABLE","$option_details_row",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","db",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","query",171],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT\n\t\t\t\tpov.product_option_id,\n\t\t\t\tpov.product_option_value_id,\n\t\t\t\tod.name,\n\t\t\t\tovd.name as value,\n\t\t\t\topt.type\n\t\t\tFROM `\"",171],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_STRING","DB_PREFIX",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","\"product_option_value` as pov,\n\t\t\t\t `\"",177],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_STRING","DB_PREFIX",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","\"product_option` as po,\n\t\t\t\t `\"",178],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_STRING","DB_PREFIX",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","\"option` as opt,\n\t\t\t\t `\"",179],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_STRING","DB_PREFIX",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","\"option_value_description` as ovd,\n\t\t\t\t `\"",180],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_STRING","DB_PREFIX",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"option_description` as od\n\t\t\tWHERE pov.product_option_value_id = '\"",181],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_INT_CAST","(int)",182],["T_VARIABLE","$option_value_id",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","\"' AND\n\t\t\t\tpo.product_option_id = pov.product_option_id AND\n\t\t\t\topt.option_id = pov.option_id AND\n\t\t\t\tovd.option_value_id = pov.option_value_id AND ovd.language_id = '\"",182],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_INT_CAST","(int)",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","config",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","get",185],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",185],")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","\"' AND\n\t\t\t\tod.option_id = pov.option_id AND od.language_id = '\"",185],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_INT_CAST","(int)",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","config",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","get",186],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",186],")",["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\"",186],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","row",187],";",["T_WHITESPACE","\n\n\t\t\t",187],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_EMPTY","empty",189],"(",["T_VARIABLE","$option_details_row",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t\t\t",189],["T_VARIABLE","$options",190],"[","]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_ARRAY","array",190],"(",["T_WHITESPACE","\n\t\t\t\t\t",190],["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_INT_CAST","(int)",191],["T_VARIABLE","$option_details_row",191],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",191],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",191],["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_INT_CAST","(int)",192],["T_VARIABLE","$option_details_row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",192],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",192],["T_CONSTANT_ENCAPSED_STRING","'name'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$option_details_row",193],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",193],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",193],["T_CONSTANT_ENCAPSED_STRING","'value'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$option_details_row",194],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",194],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",194],["T_CONSTANT_ENCAPSED_STRING","'type'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$option_details_row",195],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",195],"]",["T_WHITESPACE","\n\t\t\t\t",195],")",";",["T_WHITESPACE","\n\t\t\t",196],"}",["T_WHITESPACE","\n\t\t",197],"}",["T_WHITESPACE","\n\n\t\t",198],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$options",200],";",["T_WHITESPACE","\n\t",200],"}",["T_WHITESPACE","\n\n\t",201],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","addOrderHistory",203],"(",["T_VARIABLE","$order_id",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n\t\t",203],["T_VARIABLE","$logger",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Log",204],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_stocks.log'",204],")",";",["T_WHITESPACE","\n\t\t",204],["T_VARIABLE","$logger",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","write",205],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrderHistory() called with order id: '",205],["T_WHITESPACE"," ",205],".",["T_WHITESPACE"," ",205],["T_VARIABLE","$order_id",205],")",";",["T_WHITESPACE","\n\t\t\n\t\t",205],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","config",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_status'",207],")",["T_WHITESPACE"," ",207],["T_IS_NOT_EQUAL","!=",207],["T_WHITESPACE"," ",207],["T_LNUMBER","1",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\t\t\t",207],["T_VARIABLE","$logger",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","write",208],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrderHistory() openbay_amazon_status is disabled'",208],")",";",["T_WHITESPACE","\n\t\t\t",208],["T_RETURN","return",209],";",["T_WHITESPACE","\n\t\t",209],"}",["T_WHITESPACE","\n\t\t\n\t\t",210],["T_VARIABLE","$order_products",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","openbay",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getOrderProducts",212],"(",["T_VARIABLE","$order_id",212],")",";",["T_WHITESPACE","\n\t\t\n\t\t",212],["T_VARIABLE","$logger",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","write",214],"(",["T_VARIABLE","$order_products",214],")",";",["T_WHITESPACE","\n\n\t\t",214],["T_IF","if",216],["T_WHITESPACE"," ",216],"(","!",["T_EMPTY","empty",216],"(",["T_VARIABLE","$order_products",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n\t\t\t",216],["T_FOREACH","foreach",217],"(",["T_VARIABLE","$order_products",217],["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$order_product",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\t\t\t\t",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","openbay",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","amazon",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","productUpdateListen",218],"(",["T_VARIABLE","$order_product",218],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",218],"]",")",";",["T_WHITESPACE","\n\t\t\t",218],"}",["T_WHITESPACE","\n\t\t",219],"}",["T_WHITESPACE"," ",220],["T_ELSE","else",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n\t\t\t",220],["T_VARIABLE","$logger",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","write",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Order product array empty!'",221],")",";",["T_WHITESPACE","\n\t\t",221],"}",["T_WHITESPACE","\n\n\n\t\t",222],["T_VARIABLE","$logger",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","write",225],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrder() exiting'",225],")",";",["T_WHITESPACE","\n\t",225],"}",["T_WHITESPACE","\n",226],"}"]
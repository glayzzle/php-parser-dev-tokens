[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayAmazonProduct",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","setStatus",3],"(",["T_VARIABLE","$insertion_id",3],",",["T_WHITESPACE"," ",3],["T_VARIABLE","$status_string",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` SET `status` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$status_string",4],")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `insertion_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","escape",4],"(",["T_VARIABLE","$insertion_id",4],")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"'\"",4],")",";",["T_WHITESPACE","\n\t",4],"}",["T_WHITESPACE","\n\n\t",5],["T_PUBLIC","public",7],["T_WHITESPACE"," ",7],["T_FUNCTION","function",7],["T_WHITESPACE"," ",7],["T_STRING","getProductRows",7],"(",["T_VARIABLE","$insertion_id",7],")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t",7],["T_RETURN","return",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","query",8],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_STRING","DB_PREFIX",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `insertion_id` = '\"",8],["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","db",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","escape",8],"(",["T_VARIABLE","$insertion_id",8],")",["T_WHITESPACE"," ",8],".",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","\"'\"",8],")",["T_OBJECT_OPERATOR","->",8],["T_STRING","rows",8],";",["T_WHITESPACE","\n\t",8],"}",["T_WHITESPACE","\n\n\t",9],["T_PUBLIC","public",11],["T_WHITESPACE"," ",11],["T_FUNCTION","function",11],["T_WHITESPACE"," ",11],["T_STRING","getProduct",11],"(",["T_VARIABLE","$insertion_id",11],")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t",11],["T_RETURN","return",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","query",12],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_STRING","DB_PREFIX",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `insertion_id` = '\"",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","db",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","escape",12],"(",["T_VARIABLE","$insertion_id",12],")",["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","\"'\"",12],")",["T_OBJECT_OPERATOR","->",12],["T_STRING","row",12],";",["T_WHITESPACE","\n\t",12],"}",["T_WHITESPACE","\n\n\t",13],["T_PUBLIC","public",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","linkItems",15],"(",["T_ARRAY","array",15],["T_WHITESPACE"," ",15],["T_VARIABLE","$data",15],")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t",15],["T_FOREACH","foreach",16],["T_WHITESPACE"," ",16],"(",["T_VARIABLE","$data",16],["T_WHITESPACE"," ",16],["T_AS","as",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$amazon_sku",16],["T_WHITESPACE"," ",16],["T_DOUBLE_ARROW","=>",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$product_id",16],")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$var_row",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","db",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","query",17],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `var` FROM `\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_STRING","DB_PREFIX",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `sku` = '\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","db",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","escape",17],"(",["T_VARIABLE","$amazon_sku",17],")",["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"' AND `product_id` = '\"",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_INT_CAST","(int)",17],["T_VARIABLE","$product_id",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","\"'\"",17],")",["T_OBJECT_OPERATOR","->",17],["T_STRING","row",17],";",["T_WHITESPACE","\n\t\t\t",17],["T_VARIABLE","$var",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ISSET","isset",18],"(",["T_VARIABLE","$var_row",18],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",18],"]",")",["T_WHITESPACE"," ",18],"?",["T_WHITESPACE"," ",18],["T_VARIABLE","$var_row",18],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",18],"]",["T_WHITESPACE"," ",18],":",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","''",18],";",["T_WHITESPACE","\n\t\t\t",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","linkProduct",19],"(",["T_VARIABLE","$amazon_sku",19],",",["T_WHITESPACE"," ",19],["T_VARIABLE","$product_id",19],",",["T_WHITESPACE"," ",19],["T_VARIABLE","$var",19],")",";",["T_WHITESPACE","\n\t\t",19],"}",["T_WHITESPACE","\n\t",20],"}",["T_WHITESPACE","\n\n\t",21],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","insertError",23],"(",["T_VARIABLE","$data",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t",23],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","query",24],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_STRING","DB_PREFIX",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error` SET `sku` = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', `error_code` = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_INT_CAST","(int)",24],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'error_code'",24],"]",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', `message` = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"', `insertion_id` = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",24],"]",")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"'\"",24],")",";",["T_WHITESPACE","\n\n\t\t",24],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","db",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","query",26],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DB_PREFIX",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product`SET `status` = 'error' WHERE `sku` = '\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","db",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","escape",26],"(",["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",26],"]",")",["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"' AND `insertion_id` = '\"",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","db",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","escape",26],"(",["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",26],"]",")",["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","\"'\"",26],")",";",["T_WHITESPACE","\n\t",26],"}",["T_WHITESPACE","\n\n\t",27],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","deleteErrors",29],"(",["T_VARIABLE","$insertion_id",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","db",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","query",30],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_STRING","DB_PREFIX",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_error` WHERE `insertion_id` = '\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","db",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","escape",30],"(",["T_VARIABLE","$insertion_id",30],")",["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"'\"",30],")",";",["T_WHITESPACE","\n\t",30],"}",["T_WHITESPACE","\n\n\t",31],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setSubmitError",33],"(",["T_VARIABLE","$insertion_id",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$message",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t",33],["T_VARIABLE","$sku_rows",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","db",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","query",34],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `sku` FROM `\"",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_STRING","DB_PREFIX",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product` WHERE `insertion_id` = '\"",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","db",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","escape",34],"(",["T_VARIABLE","$insertion_id",34],")",["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"'\"",34],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","rows",34],";",["T_WHITESPACE","\n\n\t\t",34],["T_FOREACH","foreach",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$sku_rows",36],["T_WHITESPACE"," ",36],["T_AS","as",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$sku_row",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t",36],["T_VARIABLE","$data",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_WHITESPACE","\n\t\t\t\t",37],["T_CONSTANT_ENCAPSED_STRING","'sku'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$sku_row",38],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",38],"]",",",["T_WHITESPACE","\n\t\t\t\t",38],["T_CONSTANT_ENCAPSED_STRING","'error_code'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'0'",39],",",["T_WHITESPACE","\n\t\t\t\t",39],["T_CONSTANT_ENCAPSED_STRING","'message'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$message",40],",",["T_WHITESPACE","\n\t\t\t\t",40],["T_CONSTANT_ENCAPSED_STRING","'insertion_id'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$insertion_id",41],["T_WHITESPACE","\n\t\t\t",41],")",";",["T_WHITESPACE","\n\t\t\t",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","insertError",43],"(",["T_VARIABLE","$data",43],")",";",["T_WHITESPACE","\n\t\t",43],"}",["T_WHITESPACE","\n\t",44],"}",["T_WHITESPACE","\n\n\t",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","linkProduct",47],"(",["T_VARIABLE","$amazon_sku",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$product_id",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$var",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","''",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n\t\t",47],["T_VARIABLE","$count",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","db",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","query",48],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) as 'count' FROM `\"",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_STRING","DB_PREFIX",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` WHERE `product_id` = '\"",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_INT_CAST","(int)",48],["T_VARIABLE","$product_id",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"' AND `amazon_sku` = '\"",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","db",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","escape",48],"(",["T_VARIABLE","$amazon_sku",48],")",["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"' AND `var` = '\"",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","db",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","escape",48],"(",["T_VARIABLE","$var",48],")",["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","row",48],";",["T_WHITESPACE","\n\t\t",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$count",49],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",49],"]",["T_WHITESPACE"," ",49],["T_IS_EQUAL","==",49],["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\t\t\t",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","db",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","query",50],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_STRING","DB_PREFIX",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_link` SET `product_id` = '\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_INT_CAST","(int)",50],["T_VARIABLE","$product_id",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"', `amazon_sku` = '\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","db",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","escape",50],"(",["T_VARIABLE","$amazon_sku",50],")",["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"', `var` = '\"",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","db",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","escape",50],"(",["T_VARIABLE","$var",50],")",["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","\"'\"",50],")",";",["T_WHITESPACE","\n\t\t",50],"}",["T_WHITESPACE","\n\t",51],"}",["T_WHITESPACE","\n\n\t",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getProductQuantity",54],"(",["T_VARIABLE","$product_id",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$var",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","''",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n\t\t",54],["T_VARIABLE","$result",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","null",55],";",["T_WHITESPACE","\n\n\t\t",55],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$var",57],["T_WHITESPACE"," ",57],["T_IS_NOT_IDENTICAL","!==",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],["T_WHITESPACE"," ",57],["T_BOOLEAN_AND","&&",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","openbay",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addonLoad",57],"(",["T_CONSTANT_ENCAPSED_STRING","'openstock'",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n\t\t\t",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","load",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","model",58],"(",["T_CONSTANT_ENCAPSED_STRING","'tool\/image'",58],")",";",["T_WHITESPACE","\n\t\t\t",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","load",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","model",59],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/openstock'",59],")",";",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$option_stocks",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","model_extension_module_openstock",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getVariants",60],"(",["T_VARIABLE","$product_id",60],")",";",["T_WHITESPACE","\n\n\t\t\t",60],["T_VARIABLE","$option",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","null",62],";",["T_WHITESPACE","\n\t\t\t",62],["T_FOREACH","foreach",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$option_stocks",63],["T_WHITESPACE"," ",63],["T_AS","as",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$option_iterator",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n\t\t\t\t",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$option_iterator",64],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",64],"]",["T_WHITESPACE"," ",64],["T_IS_IDENTICAL","===",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$var",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n\t\t\t\t\t",64],["T_VARIABLE","$option",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$option_iterator",65],";",["T_WHITESPACE","\n\t\t\t\t\t",65],["T_BREAK","break",66],";",["T_WHITESPACE","\n\t\t\t\t",66],"}",["T_WHITESPACE","\n\t\t\t",67],"}",["T_WHITESPACE","\n\n\t\t\t",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$option",70],["T_WHITESPACE"," ",70],["T_IS_NOT_EQUAL","!=",70],["T_WHITESPACE"," ",70],["T_STRING","null",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n\t\t\t\t",70],["T_VARIABLE","$result",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$option",71],"[",["T_CONSTANT_ENCAPSED_STRING","'stock'",71],"]",";",["T_WHITESPACE","\n\t\t\t",71],"}",["T_WHITESPACE","\n\t\t",72],"}",["T_WHITESPACE"," ",73],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\t\t\t",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","load",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","model",74],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",74],")",";",["T_WHITESPACE","\n\t\t\t",74],["T_VARIABLE","$product_info",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","model_catalog_product",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getProduct",75],"(",["T_VARIABLE","$product_id",75],")",";",["T_WHITESPACE","\n\n\t\t\t",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_ISSET","isset",77],"(",["T_VARIABLE","$product_info",77],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",77],"]",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t",77],["T_VARIABLE","$result",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$product_info",78],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",78],"]",";",["T_WHITESPACE","\n\t\t\t",78],"}",["T_WHITESPACE","\n\t\t",79],"}",["T_WHITESPACE","\n\t\t",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$result",81],";",["T_WHITESPACE","\n\t",81],"}",["T_WHITESPACE","\n\n\t",82],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","updateSearch",84],"(",["T_VARIABLE","$results",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n\t\t",84],["T_FOREACH","foreach",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$results",85],["T_WHITESPACE"," ",85],["T_AS","as",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$result",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n\t\t\t",85],["T_VARIABLE","$results_found",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","count",86],"(",["T_VARIABLE","$result",86],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",86],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",86],["T_VARIABLE","$data",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","json_encode",88],"(",["T_VARIABLE","$result",88],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",88],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",88],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","db",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","query",90],"(",["T_CONSTANT_ENCAPSED_STRING","\"\n\t\t\t\tUPDATE \"",90],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","DB_PREFIX",91],["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","\"amazon_product_search\n\t\t\t\tSET matches = \"",91],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_INT_CAST","(int)",92],["T_VARIABLE","$results_found",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\",\n\t\t\t\t\t`data` = '\"",92],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","db",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","escape",93],"(",["T_VARIABLE","$data",93],")",["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","\"',\n\t\t\t\t\t`status` = 'finished'\n\t\t\t\tWHERE product_id = \"",93],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$result",95],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",95],"]",["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","\" AND\n\t\t\t\t\t  marketplace = '\"",95],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","db",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","escape",96],"(",["T_VARIABLE","$result",96],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace'",96],"]",")",["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\tLIMIT 1\n\t\t\t\"",96],")",";",["T_WHITESPACE","\n\t\t",98],"}",["T_WHITESPACE","\n\t",99],"}",["T_WHITESPACE","\n\n\t",100],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","addListingReport",102],"(",["T_VARIABLE","$data",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n\t\t",102],["T_VARIABLE","$sql",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING","DB_PREFIX",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"amazon_listing_report (marketplace, sku, quantity, asin, price) VALUES \"",103],";",["T_WHITESPACE","\n\n\t\t",103],["T_VARIABLE","$sql_values",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",")",";",["T_WHITESPACE","\n\n\t\t",105],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$data",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$product",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t\t",107],["T_VARIABLE","$sql_values",108],"[","]",["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\" ('\"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","db",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","escape",108],"(",["T_VARIABLE","$product",108],"[",["T_CONSTANT_ENCAPSED_STRING","'marketplace'",108],"]",")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\"', '\"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","db",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","escape",108],"(",["T_VARIABLE","$product",108],"[",["T_CONSTANT_ENCAPSED_STRING","'sku'",108],"]",")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\"', \"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_INT_CAST","(int)",108],["T_VARIABLE","$product",108],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",108],"]",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\", '\"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","db",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","escape",108],"(",["T_VARIABLE","$product",108],"[",["T_CONSTANT_ENCAPSED_STRING","'asin'",108],"]",")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\"', \"",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_DOUBLE_CAST","(double)",108],["T_VARIABLE","$product",108],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",108],"]",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","\") \"",108],";",["T_WHITESPACE","\n\t\t",108],"}",["T_WHITESPACE","\n\n\t\t",109],["T_VARIABLE","$sql",111],["T_WHITESPACE"," ",111],["T_CONCAT_EQUAL",".=",111],["T_WHITESPACE"," ",111],["T_STRING","implode",111],"(",["T_CONSTANT_ENCAPSED_STRING","','",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$sql_values",111],")",";",["T_WHITESPACE","\n\n\t\t",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","db",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","query",113],"(",["T_VARIABLE","$sql",113],")",";",["T_WHITESPACE","\n\t",113],"}",["T_WHITESPACE","\n\n\t",114],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","removeListingReportLock",116],"(",["T_VARIABLE","$marketplace",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n\t\t",116],["T_VARIABLE","$marketplaces",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","config",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","get",117],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_processing_listing_reports'",117],")",";",["T_WHITESPACE","\n\n\t\t",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$marketplaces",119],["T_WHITESPACE"," ",119],["T_BOOLEAN_AND","&&",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$key",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","array_search",119],"(",["T_VARIABLE","$marketplace",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$marketplaces",119],")",")",["T_WHITESPACE"," ",119],["T_IS_NOT_IDENTICAL","!==",119],["T_WHITESPACE"," ",119],["T_STRING","false",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t\t",119],["T_UNSET","unset",120],"(",["T_VARIABLE","$marketplaces",120],"[",["T_VARIABLE","$key",120],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",120],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","config",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","set",122],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazon_processing_listing_reports'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$marketplaces",122],")",";",["T_WHITESPACE","\n\n\t\t\t",122],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","db",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","query",124],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE \"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_STRING","DB_PREFIX",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","\"setting SET `value` = '\"",124],["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","db",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","escape",124],"(",["T_STRING","serialize",124],"(",["T_VARIABLE","$marketplaces",124],")",")",["T_WHITESPACE"," ",124],".",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","\"', serialized = 1 WHERE `key` = 'openbay_amazon_processing_listing_reports'\"",124],")",";",["T_WHITESPACE","\n\t\t",124],"}",["T_WHITESPACE","\n\t",125],"}",["T_WHITESPACE","\n",126],"}"]
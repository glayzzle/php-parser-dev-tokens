[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionOpenBayAmazonusOrder",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","acknowledgeOrder",3],"(",["T_VARIABLE","$order_id",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$amazonus_order_id",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","getAmazonusOrderId",4],"(",["T_VARIABLE","$order_id",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$request_xml",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],"\"",["T_ENCAPSED_AND_WHITESPACE","<Request>\n  <AmazonOrderId>",6],["T_VARIABLE","$amazonus_order_id",7],["T_ENCAPSED_AND_WHITESPACE","<\/AmazonOrderId>\n  <MerchantOrderId>",7],["T_VARIABLE","$order_id",8],["T_ENCAPSED_AND_WHITESPACE","<\/MerchantOrderId>\n<\/Request>",8],"\"",";",["T_WHITESPACE","\n\n\t\t",9],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","openbay",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","amazonus",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","callNoResponse",11],"(",["T_CONSTANT_ENCAPSED_STRING","'order\/acknowledge'",11],",",["T_WHITESPACE"," ",11],["T_VARIABLE","$request_xml",11],",",["T_WHITESPACE"," ",11],["T_STRING","false",11],")",";",["T_WHITESPACE","\n\t",11],"}",["T_WHITESPACE","\n\n\t",12],["T_PUBLIC","public",14],["T_WHITESPACE"," ",14],["T_FUNCTION","function",14],["T_WHITESPACE"," ",14],["T_STRING","getProductId",14],"(",["T_VARIABLE","$sku",14],")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$row",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","query",15],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `product_id` FROM `\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_STRING","DB_PREFIX",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` WHERE `amazonus_sku` = '\"",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","db",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","escape",15],"(",["T_VARIABLE","$sku",15],")",["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","\"'\"",15],")",["T_OBJECT_OPERATOR","->",15],["T_STRING","row",15],";",["T_WHITESPACE","\n\n\t\t",15],["T_IF","if",17],["T_WHITESPACE"," ",17],"(",["T_ISSET","isset",17],"(",["T_VARIABLE","$row",17],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",17],"]",")",["T_WHITESPACE"," ",17],["T_BOOLEAN_AND","&&",17],["T_WHITESPACE"," ",17],"!",["T_EMPTY","empty",17],"(",["T_VARIABLE","$row",17],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",17],"]",")",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\t\t\t",17],["T_RETURN","return",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$row",18],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",18],"]",";",["T_WHITESPACE","\n\t\t",18],"}",["T_WHITESPACE","\n\n\t\t",19],["T_RETURN","return",21],["T_WHITESPACE"," ",21],["T_LNUMBER","0",21],";",["T_WHITESPACE","\n\t",21],"}",["T_WHITESPACE","\n\n\t",22],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","getProductVar",24],"(",["T_VARIABLE","$sku",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t",24],["T_VARIABLE","$row",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","query",25],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `var` FROM `\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_STRING","DB_PREFIX",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_product_link` WHERE `amazonus_sku` = '\"",25],["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","db",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","escape",25],"(",["T_VARIABLE","$sku",25],")",["T_WHITESPACE"," ",25],".",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","\"'\"",25],")",["T_OBJECT_OPERATOR","->",25],["T_STRING","row",25],";",["T_WHITESPACE","\n\n\t\t",25],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_ISSET","isset",27],"(",["T_VARIABLE","$row",27],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",27],"]",")",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t",27],["T_RETURN","return",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$row",28],"[",["T_CONSTANT_ENCAPSED_STRING","'var'",28],"]",";",["T_WHITESPACE","\n\t\t",28],"}",["T_WHITESPACE","\n\n\t\t",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","''",31],";",["T_WHITESPACE","\n\t",31],"}",["T_WHITESPACE","\n\n\t",32],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","decreaseProductQuantity",34],"(",["T_VARIABLE","$product_id",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$delta",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$var",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","''",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$product_id",35],["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t",35],["T_RETURN","return",36],";",["T_WHITESPACE","\n\t\t",36],"}",["T_WHITESPACE","\n\t\t",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$var",38],["T_WHITESPACE"," ",38],["T_IS_EQUAL","==",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","''",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","db",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","query",39],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_STRING","DB_PREFIX",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"product` SET `quantity` = GREATEST(`quantity` - '\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_INT_CAST","(int)",39],["T_VARIABLE","$delta",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"', 0) WHERE `product_id` = '\"",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_INT_CAST","(int)",39],["T_VARIABLE","$product_id",39],["T_WHITESPACE"," ",39],".",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","\"' AND `subtract` = '1'\"",39],")",";",["T_WHITESPACE","\n\t\t",39],"}",["T_WHITESPACE"," ",40],["T_ELSE","else",40],["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","query",41],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_STRING","DB_PREFIX",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"product_option_variant` SET `stock` = GREATEST(`stock` - '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$delta",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"', 0) WHERE `product_id` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_INT_CAST","(int)",41],["T_VARIABLE","$product_id",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"' AND `sku` = '\"",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","db",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","escape",41],"(",["T_VARIABLE","$var",41],")",["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","\"' AND `subtract` = '1'\"",41],")",";",["T_WHITESPACE","\n\t\t",41],"}",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\n\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","getMappedStatus",45],"(",["T_VARIABLE","$amazonus_status",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$amazonus_status",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","trim",46],"(",["T_STRING","strtolower",46],"(",["T_VARIABLE","$amazonus_status",46],")",")",";",["T_WHITESPACE","\n\n\t\t",46],["T_SWITCH","switch",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$amazonus_status",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t",48],["T_CASE","case",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'pending'",49],":",["T_WHITESPACE","\n\t\t\t\t",49],["T_VARIABLE","$order_status",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","config",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_pending'",50],")",";",["T_WHITESPACE","\n\t\t\t\t",50],["T_BREAK","break",51],";",["T_WHITESPACE","\n\n\t\t\t",51],["T_CASE","case",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'unshipped'",53],":",["T_WHITESPACE","\n\t\t\t\t",53],["T_VARIABLE","$order_status",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","config",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_unshipped'",54],")",";",["T_WHITESPACE","\n\t\t\t\t",54],["T_BREAK","break",55],";",["T_WHITESPACE","\n\n\t\t\t",55],["T_CASE","case",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'partiallyshipped'",57],":",["T_WHITESPACE","\n\t\t\t\t",57],["T_VARIABLE","$order_status",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","config",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_partially_shipped'",58],")",";",["T_WHITESPACE","\n\t\t\t\t",58],["T_BREAK","break",59],";",["T_WHITESPACE","\n\n\t\t\t",59],["T_CASE","case",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'shipped'",61],":",["T_WHITESPACE","\n\t\t\t\t",61],["T_VARIABLE","$order_status",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","config",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_shipped'",62],")",";",["T_WHITESPACE","\n\t\t\t\t",62],["T_BREAK","break",63],";",["T_WHITESPACE","\n\n\t\t\t",63],["T_CASE","case",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'canceled'",65],":",["T_WHITESPACE","\n\t\t\t\t",65],["T_VARIABLE","$order_status",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","config",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_canceled'",66],")",";",["T_WHITESPACE","\n\t\t\t\t",66],["T_BREAK","break",67],";",["T_WHITESPACE","\n\n\t\t\t",67],["T_CASE","case",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'unfulfillable'",69],":",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$order_status",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_order_status_unfulfillable'",70],")",";",["T_WHITESPACE","\n\t\t\t\t",70],["T_BREAK","break",71],";",["T_WHITESPACE","\n\n\t\t\t",71],["T_DEFAULT","default",73],":",["T_WHITESPACE","\n\t\t\t\t",73],["T_VARIABLE","$order_status",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","config",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'config_order_status_id'",74],")",";",["T_WHITESPACE","\n\t\t\t\t",74],["T_BREAK","break",75],";",["T_WHITESPACE","\n\t\t",75],"}",["T_WHITESPACE","\n\n\t\t",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$order_status",78],";",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n\n\t",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","getCountryName",81],"(",["T_VARIABLE","$country_code",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t",81],["T_VARIABLE","$row",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","query",82],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `name` FROM `\"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_STRING","DB_PREFIX",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"country` WHERE LOWER(`iso_code_2`) = '\"",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","db",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","escape",82],"(",["T_STRING","strtolower",82],"(",["T_VARIABLE","$country_code",82],")",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","\"'\"",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","row",82],";",["T_WHITESPACE","\n\n\t\t",82],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_ISSET","isset",84],"(",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",84],"]",")",["T_WHITESPACE"," ",84],["T_BOOLEAN_AND","&&",84],["T_WHITESPACE"," ",84],"!",["T_EMPTY","empty",84],"(",["T_VARIABLE","$row",84],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",84],"]",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n\t\t\t",84],["T_RETURN","return",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$row",85],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",85],"]",";",["T_WHITESPACE","\n\t\t",85],"}",["T_WHITESPACE","\n\n\t\t",86],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","''",88],";",["T_WHITESPACE","\n\t",88],"}",["T_WHITESPACE","\n\n\t",89],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getCountryId",91],"(",["T_VARIABLE","$country_code",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n\t\t",91],["T_VARIABLE","$row",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","query",92],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `country_id` FROM `\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_STRING","DB_PREFIX",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"country` WHERE LOWER(`iso_code_2`) = '\"",92],["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","db",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","escape",92],"(",["T_STRING","strtolower",92],"(",["T_VARIABLE","$country_code",92],")",")",["T_WHITESPACE"," ",92],".",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","\"'\"",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","row",92],";",["T_WHITESPACE","\n\n\t\t",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_ISSET","isset",94],"(",["T_VARIABLE","$row",94],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",94],"]",")",["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],"!",["T_EMPTY","empty",94],"(",["T_VARIABLE","$row",94],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",94],"]",")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n\t\t\t",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_INT_CAST","(int)",95],["T_VARIABLE","$row",95],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",95],"]",";",["T_WHITESPACE","\n\t\t",95],"}",["T_WHITESPACE","\n\n\t\t",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],";",["T_WHITESPACE","\n\t",98],"}",["T_WHITESPACE","\n\n\t",99],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","getZoneId",101],"(",["T_VARIABLE","$zone_name",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t\t",101],["T_VARIABLE","$row",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","db",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","query",102],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `zone_id` FROM `\"",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_STRING","DB_PREFIX",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","\"zone` WHERE LOWER(`name`) = '\"",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","db",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","escape",102],"(",["T_STRING","strtolower",102],"(",["T_VARIABLE","$zone_name",102],")",")",["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","\"'\"",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","row",102],";",["T_WHITESPACE","\n\n\t\t",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_ISSET","isset",104],"(",["T_VARIABLE","$row",104],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",104],"]",")",["T_WHITESPACE"," ",104],["T_BOOLEAN_AND","&&",104],["T_WHITESPACE"," ",104],"!",["T_EMPTY","empty",104],"(",["T_VARIABLE","$row",104],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",104],"]",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_INT_CAST","(int)",105],["T_VARIABLE","$row",105],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",105],"]",";",["T_WHITESPACE","\n\t\t",105],"}",["T_WHITESPACE","\n\n\t\t",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_LNUMBER","0",108],";",["T_WHITESPACE","\n\t",108],"}",["T_WHITESPACE","\n\n\t",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","updateOrderStatus",111],"(",["T_VARIABLE","$order_id",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$status_id",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","db",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","query",112],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_STRING","DB_PREFIX",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\"order_history` (`order_id`, `order_status_id`, `notify`, `comment`, `date_added`) VALUES (\"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_VARIABLE","$order_id",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\", \"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_INT_CAST","(int)",112],["T_VARIABLE","$status_id",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\", 0, '', NOW())\"",112],")",";",["T_WHITESPACE","\n\n\t\t",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","db",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","query",114],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_STRING","DB_PREFIX",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","\"order` SET `order_status_id` = \"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_INT_CAST","(int)",114],["T_VARIABLE","$status_id",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","\" WHERE `order_id` = \"",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_INT_CAST","(int)",114],["T_VARIABLE","$order_id",114],")",";",["T_WHITESPACE","\n\t",114],"}",["T_WHITESPACE","\n\n\t",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addAmazonusOrder",117],"(",["T_VARIABLE","$order_id",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$amazonus_order_id",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n\t\t",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","db",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","query",118],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_STRING","DB_PREFIX",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order` (`order_id`, `amazonus_order_id`) VALUES (\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_INT_CAST","(int)",118],["T_VARIABLE","$order_id",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\", '\"",118],["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","db",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","escape",118],"(",["T_VARIABLE","$amazonus_order_id",118],")",["T_WHITESPACE"," ",118],".",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","\"')\"",118],")",";",["T_WHITESPACE","\n\t",118],"}",["T_WHITESPACE","\n\n\t",119],["T_COMMENT","\/* $data = array(PRODUCT_SKU => ORDER_ITEM_ID) *\/",121],["T_WHITESPACE","\n\t",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","addAmazonusOrderProducts",122],"(",["T_VARIABLE","$order_id",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$data",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\t\t",122],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$data",123],["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$sku",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$order_item_id",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n\n\t\t\t",123],["T_VARIABLE","$row",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","db",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","query",125],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_product_id` FROM `\"",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_STRING","DB_PREFIX",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","\"order_product` WHERE `model` = '\"",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","db",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","escape",125],"(",["T_VARIABLE","$sku",125],")",["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","\"' AND `order_id` = \"",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_INT_CAST","(int)",125],["T_VARIABLE","$order_id",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","\"LIMIT 1\"",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","row",125],";",["T_WHITESPACE","\n\n\t\t\t",125],["T_IF","if",127],["T_WHITESPACE"," ",127],"(","!",["T_ISSET","isset",127],"(",["T_VARIABLE","$row",127],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",127],"]",")",["T_WHITESPACE"," ",127],["T_BOOLEAN_OR","||",127],["T_WHITESPACE"," ",127],["T_EMPTY","empty",127],"(",["T_VARIABLE","$row",127],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",127],"]",")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n\t\t\t\t",127],["T_CONTINUE","continue",128],";",["T_WHITESPACE","\n\t\t\t",128],"}",["T_WHITESPACE","\n\n\t\t\t",129],["T_VARIABLE","$order_product_id",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$row",131],"[",["T_CONSTANT_ENCAPSED_STRING","'order_product_id'",131],"]",";",["T_WHITESPACE","\n\n\t\t\t",131],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","db",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","query",133],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_STRING","DB_PREFIX",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order_product` (`order_product_id`, `amazonus_order_item_id`) VALUES (\"",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_INT_CAST","(int)",133],["T_VARIABLE","$order_product_id",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","\", '\"",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","db",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","escape",133],"(",["T_VARIABLE","$order_item_id",133],")",["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","\"')\"",133],")",";",["T_WHITESPACE","\n\t\t",133],"}",["T_WHITESPACE","\n\t",134],"}",["T_WHITESPACE","\n\n\t",135],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getOrderId",137],"(",["T_VARIABLE","$amazonus_order_id",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n\t\t",137],["T_VARIABLE","$row",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","db",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","query",138],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_id` FROM `\"",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_STRING","DB_PREFIX",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order` WHERE `amazonus_order_id` = '\"",138],["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","db",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","escape",138],"(",["T_VARIABLE","$amazonus_order_id",138],")",["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","\"' LIMIT 1\"",138],")",["T_OBJECT_OPERATOR","->",138],["T_STRING","row",138],";",["T_WHITESPACE","\n\n\t\t",138],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_ISSET","isset",140],"(",["T_VARIABLE","$row",140],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",140],"]",")",["T_WHITESPACE"," ",140],["T_BOOLEAN_AND","&&",140],["T_WHITESPACE"," ",140],"!",["T_EMPTY","empty",140],"(",["T_VARIABLE","$row",140],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n\t\t\t",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$row",141],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",141],"]",";",["T_WHITESPACE","\n\t\t",141],"}",["T_WHITESPACE","\n\n\t\t",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","''",144],";",["T_WHITESPACE","\n\t",144],"}",["T_WHITESPACE","\n\n\t",145],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","getOrderStatus",147],"(",["T_VARIABLE","$order_id",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n\t\t",147],["T_VARIABLE","$row",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","db",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","query",148],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `order_status_id` FROM `\"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_STRING","DB_PREFIX",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"order` WHERE `order_id` = \"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_INT_CAST","(int)",148],["T_VARIABLE","$order_id",148],")",["T_OBJECT_OPERATOR","->",148],["T_STRING","row",148],";",["T_WHITESPACE","\n\n\t\t",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$row",150],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",150],"]",")",["T_WHITESPACE"," ",150],["T_BOOLEAN_AND","&&",150],["T_WHITESPACE"," ",150],"!",["T_EMPTY","empty",150],"(",["T_VARIABLE","$row",150],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",150],"]",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n\t\t\t",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$row",151],"[",["T_CONSTANT_ENCAPSED_STRING","'order_status_id'",151],"]",";",["T_WHITESPACE","\n\t\t",151],"}",["T_WHITESPACE","\n\n\t\t",152],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_LNUMBER","0",154],";",["T_WHITESPACE","\n\t",154],"}",["T_WHITESPACE","\n\n\t",155],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getAmazonusOrderId",157],"(",["T_VARIABLE","$order_id",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n\t\t",157],["T_VARIABLE","$row",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","db",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","query",158],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `amazonus_order_id` FROM `\"",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_STRING","DB_PREFIX",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","\"amazonus_order` WHERE `order_id` = \"",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_INT_CAST","(int)",158],["T_VARIABLE","$order_id",158],["T_WHITESPACE"," ",158],".",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","\" LIMIT 1\"",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","row",158],";",["T_WHITESPACE","\n\n\t\t",158],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$row",160],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",160],"]",")",["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],"!",["T_EMPTY","empty",160],"(",["T_VARIABLE","$row",160],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n\t\t\t",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$row",161],"[",["T_CONSTANT_ENCAPSED_STRING","'amazonus_order_id'",161],"]",";",["T_WHITESPACE","\n\t\t",161],"}",["T_WHITESPACE","\n\n\t\t",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_STRING","null",164],";",["T_WHITESPACE","\n\t",164],"}",["T_WHITESPACE","\n\n\t",165],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","getProductOptionsByVar",167],"(",["T_VARIABLE","$product_var",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n\t\t",167],["T_VARIABLE","$options",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",")",";",["T_WHITESPACE","\n\n\t\t",168],["T_VARIABLE","$option_value_ids",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","explode",170],"(",["T_CONSTANT_ENCAPSED_STRING","':'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$product_var",170],")",";",["T_WHITESPACE","\n\t\t",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$option_value_ids",171],["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$option_value_id",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t",171],["T_VARIABLE","$option_details_row",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","db",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","query",172],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT\n\t\t\t\tpov.product_option_id,\n\t\t\t\tpov.product_option_value_id,\n\t\t\t\tod.name,\n\t\t\t\tovd.name as value,\n\t\t\t\topt.type\n\t\t\tFROM `\"",172],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_STRING","DB_PREFIX",178],["T_WHITESPACE"," ",178],".",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","\"product_option_value` as pov,\n\t\t\t\t `\"",178],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_STRING","DB_PREFIX",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","\"product_option` as po,\n\t\t\t\t `\"",179],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_STRING","DB_PREFIX",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","\"option` as opt,\n\t\t\t\t `\"",180],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_STRING","DB_PREFIX",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"option_value_description` as ovd,\n\t\t\t\t `\"",181],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_STRING","DB_PREFIX",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","\"option_description` as od\n\t\t\tWHERE pov.product_option_value_id = '\"",182],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_INT_CAST","(int)",183],["T_VARIABLE","$option_value_id",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","\"' AND\n\t\t\t\tpo.product_option_id = pov.product_option_id AND\n\t\t\t\topt.option_id = pov.option_id AND\n\t\t\t\tovd.option_value_id = pov.option_value_id AND ovd.language_id = '\"",183],["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_INT_CAST","(int)",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","config",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","get",186],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",186],")",["T_WHITESPACE"," ",186],".",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","\"' AND\n\t\t\t\tod.option_id = pov.option_id AND od.language_id = '\"",186],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_INT_CAST","(int)",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","config",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","get",187],"(",["T_CONSTANT_ENCAPSED_STRING","'config_language_id'",187],")",["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","\"'\n\t\t\t\"",187],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","row",188],";",["T_WHITESPACE","\n\n\t\t\t",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(","!",["T_EMPTY","empty",190],"(",["T_VARIABLE","$option_details_row",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n\t\t\t\t",190],["T_VARIABLE","$options",191],"[","]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",["T_WHITESPACE","\n\t\t\t\t\t",191],["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_INT_CAST","(int)",192],["T_VARIABLE","$option_details_row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_id'",192],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",192],["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_INT_CAST","(int)",193],["T_VARIABLE","$option_details_row",193],"[",["T_CONSTANT_ENCAPSED_STRING","'product_option_value_id'",193],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",193],["T_CONSTANT_ENCAPSED_STRING","'name'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$option_details_row",194],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",194],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",194],["T_CONSTANT_ENCAPSED_STRING","'value'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$option_details_row",195],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",195],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",195],["T_CONSTANT_ENCAPSED_STRING","'type'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$option_details_row",196],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",196],"]",["T_WHITESPACE","\n\t\t\t\t",196],")",";",["T_WHITESPACE","\n\t\t\t",197],"}",["T_WHITESPACE","\n\t\t",198],"}",["T_WHITESPACE","\n\n\t\t",199],["T_RETURN","return",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$options",201],";",["T_WHITESPACE","\n\t",201],"}",["T_WHITESPACE","\n\n\t",202],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","addOrderHistory",204],"(",["T_VARIABLE","$order_id",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t",204],["T_VARIABLE","$logger",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_STRING","Log",205],"(",["T_CONSTANT_ENCAPSED_STRING","'amazonus_stocks.log'",205],")",";",["T_WHITESPACE","\n\t\t",205],["T_VARIABLE","$logger",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","write",206],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrderHistory() called with order id: '",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_VARIABLE","$order_id",206],")",";",["T_WHITESPACE","\n\n\t\t",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","config",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","get",208],"(",["T_CONSTANT_ENCAPSED_STRING","'openbay_amazonus_status'",208],")",["T_WHITESPACE"," ",208],["T_IS_NOT_EQUAL","!=",208],["T_WHITESPACE"," ",208],["T_LNUMBER","1",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n\t\t\t",208],["T_VARIABLE","$logger",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","write",209],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrderHistory() openbay_amazonus_status is disabled'",209],")",";",["T_WHITESPACE","\n\t\t\t",209],["T_RETURN","return",210],";",["T_WHITESPACE","\n\t\t",210],"}",["T_WHITESPACE","\n\n\t\t",211],["T_VARIABLE","$order_products",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","openbay",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getOrderProducts",213],"(",["T_VARIABLE","$order_id",213],")",";",["T_WHITESPACE","\n\t\t\n\t\t",213],["T_VARIABLE","$logger",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","write",215],"(",["T_VARIABLE","$order_products",215],")",";",["T_WHITESPACE","\n\n\t\t",215],["T_IF","if",217],["T_WHITESPACE"," ",217],"(","!",["T_EMPTY","empty",217],"(",["T_VARIABLE","$order_products",217],")",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n\t\t\t",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$order_products",218],["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$order_product",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t\t",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","openbay",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","amazonus",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","productUpdateListen",219],"(",["T_VARIABLE","$order_product",219],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",219],"]",")",";",["T_WHITESPACE","\n\t\t\t",219],"}",["T_WHITESPACE","\n\t\t",220],"}",["T_WHITESPACE"," ",221],["T_ELSE","else",221],["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n\t\t\t",221],["T_VARIABLE","$logger",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","write",222],"(",["T_CONSTANT_ENCAPSED_STRING","'Order product array empty!'",222],")",";",["T_WHITESPACE","\n\t\t",222],"}",["T_WHITESPACE","\n\n\t\t",223],["T_VARIABLE","$logger",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","write",225],"(",["T_CONSTANT_ENCAPSED_STRING","'addOrder() exiting'",225],")",";",["T_WHITESPACE","\n\t",225],"}",["T_WHITESPACE","\n",226],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionTotalCredit",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","getTotal",3],"(",["T_VARIABLE","$total",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/credit'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$balance",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","customer",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","getBalance",6],"(",")",";",["T_WHITESPACE","\n\n\t\t",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_DOUBLE_CAST","(float)",8],["T_VARIABLE","$balance",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$credit",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_STRING","min",9],"(",["T_VARIABLE","$balance",9],",",["T_WHITESPACE"," ",9],["T_VARIABLE","$total",9],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",9],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",9],["T_IF","if",11],["T_WHITESPACE"," ",11],"(",["T_VARIABLE","$credit",11],["T_WHITESPACE"," ",11],">",["T_WHITESPACE"," ",11],["T_LNUMBER","0",11],")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t\t\t",11],["T_VARIABLE","$total",12],"[",["T_CONSTANT_ENCAPSED_STRING","'totals'",12],"]","[","]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_ARRAY","array",12],"(",["T_WHITESPACE","\n\t\t\t\t\t",12],["T_CONSTANT_ENCAPSED_STRING","'code'",13],["T_WHITESPACE","       ",13],["T_DOUBLE_ARROW","=>",13],["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'credit'",13],",",["T_WHITESPACE","\n\t\t\t\t\t",13],["T_CONSTANT_ENCAPSED_STRING","'title'",14],["T_WHITESPACE","      ",14],["T_DOUBLE_ARROW","=>",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","language",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'text_credit'",14],")",",",["T_WHITESPACE","\n\t\t\t\t\t",14],["T_CONSTANT_ENCAPSED_STRING","'value'",15],["T_WHITESPACE","      ",15],["T_DOUBLE_ARROW","=>",15],["T_WHITESPACE"," ",15],"-",["T_VARIABLE","$credit",15],",",["T_WHITESPACE","\n\t\t\t\t\t",15],["T_CONSTANT_ENCAPSED_STRING","'sort_order'",16],["T_WHITESPACE"," ",16],["T_DOUBLE_ARROW","=>",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'credit_sort_order'",16],")",["T_WHITESPACE","\n\t\t\t\t",16],")",";",["T_WHITESPACE","\n\n\t\t\t\t",17],["T_VARIABLE","$total",19],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",19],"]",["T_WHITESPACE"," ",19],["T_MINUS_EQUAL","-=",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$credit",19],";",["T_WHITESPACE","\n\t\t\t",19],"}",["T_WHITESPACE","\n\t\t",20],"}",["T_WHITESPACE","\n\t",21],"}",["T_WHITESPACE","\n\n\t",22],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","confirm",24],"(",["T_VARIABLE","$order_info",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$order_total",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","load",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","language",25],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/credit'",25],")",";",["T_WHITESPACE","\n\n\t\t",25],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_VARIABLE","$order_info",27],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",27],"]",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","db",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","query",28],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO \"",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_STRING","DB_PREFIX",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"customer_transaction SET customer_id = '\"",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_INT_CAST","(int)",28],["T_VARIABLE","$order_info",28],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",28],"]",["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"', order_id = '\"",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_INT_CAST","(int)",28],["T_VARIABLE","$order_info",28],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",28],"]",["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"', description = '\"",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","db",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","escape",28],"(",["T_STRING","sprintf",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","language",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",["T_CONSTANT_ENCAPSED_STRING","'text_order_id'",28],")",",",["T_WHITESPACE"," ",28],["T_INT_CAST","(int)",28],["T_VARIABLE","$order_info",28],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",28],"]",")",")",["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"', amount = '\"",28],["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_DOUBLE_CAST","(float)",28],["T_VARIABLE","$order_total",28],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",28],"]",["T_WHITESPACE"," ",28],".",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","\"', date_added = NOW()\"",28],")",";",["T_WHITESPACE","\n\t\t",28],"}",["T_WHITESPACE","\n\t",29],"}",["T_WHITESPACE","\n\n\t",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","unconfirm",32],"(",["T_VARIABLE","$order_id",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","db",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","query",33],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM \"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_STRING","DB_PREFIX",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"customer_transaction WHERE order_id = '\"",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_INT_CAST","(int)",33],["T_VARIABLE","$order_id",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","\"'\"",33],")",";",["T_WHITESPACE","\n\t",33],"}",["T_WHITESPACE","\n",34],"}",["T_WHITESPACE","\n",35]]
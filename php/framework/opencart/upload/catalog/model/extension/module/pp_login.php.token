[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelExtensionModulePPLogin",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","getTokens",3],"(",["T_VARIABLE","$code",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_IF","if",4],["T_WHITESPACE"," ",4],"(",["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","config",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_login_sandbox'",4],")",")",["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t\t\t",4],["T_VARIABLE","$endpoint",5],["T_WHITESPACE"," ",5],"=",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.sandbox.paypal.com\/v1\/identity\/openidconnect\/tokenservice'",5],";",["T_WHITESPACE","\n\t\t",5],"}",["T_WHITESPACE"," ",6],["T_ELSE","else",6],["T_WHITESPACE"," ",6],"{",["T_WHITESPACE","\n\t\t\t",6],["T_VARIABLE","$endpoint",7],["T_WHITESPACE"," ",7],"=",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.paypal.com\/v1\/identity\/openidconnect\/tokenservice'",7],";",["T_WHITESPACE","\n\t\t",7],"}",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$request",10],["T_WHITESPACE","  ",10],"=",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","''",10],";",["T_WHITESPACE","\n\t\t",10],["T_VARIABLE","$request",11],["T_WHITESPACE"," ",11],["T_CONCAT_EQUAL",".=",11],["T_WHITESPACE"," ",11],["T_CONSTANT_ENCAPSED_STRING","'grant_type=authorization_code'",11],";",["T_WHITESPACE","\n\t\t",11],["T_VARIABLE","$request",12],["T_WHITESPACE"," ",12],["T_CONCAT_EQUAL",".=",12],["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","'&code='",12],["T_WHITESPACE"," ",12],".",["T_WHITESPACE"," ",12],["T_VARIABLE","$code",12],";",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$request",13],["T_WHITESPACE"," ",13],["T_CONCAT_EQUAL",".=",13],["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'&redirect_uri='",13],["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_STRING","urlencode",13],"(",["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","url",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","link",13],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/pp_login\/login'",13],",",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","''",13],",",["T_WHITESPACE"," ",13],["T_STRING","true",13],")",")",";",["T_WHITESPACE","\n\n\t\t",13],["T_VARIABLE","$additional_opts",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_ARRAY","array",15],"(",["T_WHITESPACE","\n\t\t\t",15],["T_STRING","CURLOPT_USERPWD",16],["T_WHITESPACE","    ",16],["T_DOUBLE_ARROW","=>",16],["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_login_client_id'",16],")",["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","':'",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_login_secret'",16],")",",",["T_WHITESPACE","\n\t\t\t",16],["T_STRING","CURLOPT_POST",17],["T_WHITESPACE","       ",17],["T_DOUBLE_ARROW","=>",17],["T_WHITESPACE"," ",17],["T_STRING","true",17],",",["T_WHITESPACE","\n\t\t\t",17],["T_STRING","CURLOPT_POSTFIELDS",18],["T_WHITESPACE"," ",18],["T_DOUBLE_ARROW","=>",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$request",18],["T_WHITESPACE","\n\t\t",18],")",";",["T_WHITESPACE","\n\n\t\t",19],["T_VARIABLE","$curl",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","curl",21],"(",["T_VARIABLE","$endpoint",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$additional_opts",21],")",";",["T_WHITESPACE","\n\n\t\t",21],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","log",23],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL Response: '",23],["T_WHITESPACE"," ",23],".",["T_WHITESPACE"," ",23],["T_STRING","print_r",23],"(",["T_VARIABLE","$curl",23],",",["T_WHITESPACE"," ",23],["T_LNUMBER","1",23],")",",",["T_WHITESPACE"," ",23],["T_LNUMBER","1",23],")",";",["T_WHITESPACE","\n\n\t\t",23],["T_RETURN","return",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$curl",25],";",["T_WHITESPACE","\n\t",25],"}",["T_WHITESPACE","\n\n\t",26],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","getUserInfo",28],"(",["T_VARIABLE","$access_token",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t",28],["T_IF","if",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","config",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_login_sandbox'",29],")",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t\t",29],["T_VARIABLE","$endpoint",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.sandbox.paypal.com\/v1\/identity\/openidconnect\/userinfo\/?schema=openid'",30],";",["T_WHITESPACE","\n\t\t",30],"}",["T_WHITESPACE"," ",31],["T_ELSE","else",31],["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n\t\t\t",31],["T_VARIABLE","$endpoint",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/api.paypal.com\/v1\/identity\/openidconnect\/userinfo\/?schema=openid'",32],";",["T_WHITESPACE","\n\t\t",32],"}",["T_WHITESPACE","\n\n\t\t",33],["T_VARIABLE","$header",35],["T_WHITESPACE","   ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",";",["T_WHITESPACE","\n\t\t",35],["T_VARIABLE","$header",36],"[","]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",36],";",["T_WHITESPACE","\n\t\t",36],["T_VARIABLE","$header",37],"[","]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Authorization: Bearer '",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_VARIABLE","$access_token",37],";",["T_WHITESPACE","\n\n\t\t",37],["T_VARIABLE","$additional_opts",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n\t\t\t",39],["T_STRING","CURLOPT_HTTPHEADER",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$header",40],",",["T_WHITESPACE","\n\t\t",40],")",";",["T_WHITESPACE","\n\n\t\t",41],["T_VARIABLE","$curl",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","curl",43],"(",["T_VARIABLE","$endpoint",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$additional_opts",43],")",";",["T_WHITESPACE","\n\n\t\t",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","log",45],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL Response: '",45],["T_WHITESPACE"," ",45],".",["T_WHITESPACE"," ",45],["T_STRING","print_r",45],"(",["T_VARIABLE","$curl",45],",",["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],")",",",["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],")",";",["T_WHITESPACE","\n\n\t\t",45],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$curl",47],";",["T_WHITESPACE","\n\t",47],"}",["T_WHITESPACE","\n\n\t",48],["T_PRIVATE","private",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","curl",50],"(",["T_VARIABLE","$endpoint",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$additional_opts",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t",50],["T_VARIABLE","$default_opts",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n\t\t\t",51],["T_STRING","CURLOPT_PORT",52],["T_WHITESPACE","           ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","443",52],",",["T_WHITESPACE","\n\t\t\t",52],["T_STRING","CURLOPT_HEADER",53],["T_WHITESPACE","         ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],",",["T_WHITESPACE","\n\t\t\t",53],["T_STRING","CURLOPT_SSL_VERIFYPEER",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_LNUMBER","0",54],",",["T_WHITESPACE","\n\t\t\t",54],["T_STRING","CURLOPT_RETURNTRANSFER",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_LNUMBER","1",55],",",["T_WHITESPACE","\n\t\t\t",55],["T_STRING","CURLOPT_FORBID_REUSE",56],["T_WHITESPACE","   ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],",",["T_WHITESPACE","\n\t\t\t",56],["T_STRING","CURLOPT_FRESH_CONNECT",57],["T_WHITESPACE","  ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","1",57],",",["T_WHITESPACE","\n\t\t\t",57],["T_STRING","CURLOPT_URL",58],["T_WHITESPACE","            ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$endpoint",58],",",["T_WHITESPACE","\n\t\t",58],")",";",["T_WHITESPACE","\n\n\t\t",59],["T_VARIABLE","$ch",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","curl_init",61],"(",["T_VARIABLE","$endpoint",61],")",";",["T_WHITESPACE","\n\n\t\t",61],["T_VARIABLE","$opts",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$default_opts",63],["T_WHITESPACE"," ",63],"+",["T_WHITESPACE"," ",63],["T_VARIABLE","$additional_opts",63],";",["T_WHITESPACE","\n\n\t\t",63],["T_STRING","curl_setopt_array",65],"(",["T_VARIABLE","$ch",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$opts",65],")",";",["T_WHITESPACE","\n\n\t\t",65],["T_VARIABLE","$response",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","json_decode",67],"(",["T_STRING","curl_exec",67],"(",["T_VARIABLE","$ch",67],")",")",";",["T_WHITESPACE","\n\n\t\t",67],["T_STRING","curl_close",69],"(",["T_VARIABLE","$ch",69],")",";",["T_WHITESPACE","\n\n\t\t",69],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$response",71],";",["T_WHITESPACE","\n\t",71],"}",["T_WHITESPACE","\n\n\t",72],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","log",74],"(",["T_VARIABLE","$data",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$class_step",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_LNUMBER","6",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n\t\t",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","config",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'pp_login_debug'",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n\t\t\t",75],["T_VARIABLE","$backtrace",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","debug_backtrace",76],"(",")",";",["T_WHITESPACE","\n\t\t\t",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","log",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","write",77],"(",["T_CONSTANT_ENCAPSED_STRING","'Log In with PayPal debug ('",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$backtrace",77],"[",["T_VARIABLE","$class_step",77],"]","[",["T_CONSTANT_ENCAPSED_STRING","'class'",77],"]",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'::'",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$backtrace",77],"[",["T_LNUMBER","6",77],"]","[",["T_CONSTANT_ENCAPSED_STRING","'function'",77],"]",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","') - '",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$data",77],")",";",["T_WHITESPACE","\n\t\t",77],"}",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n",79],"}"]
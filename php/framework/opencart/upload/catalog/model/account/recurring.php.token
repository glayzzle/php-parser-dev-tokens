[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ModelAccountRecurring",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Model",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","getOrderRecurring",3],"(",["T_VARIABLE","$order_recurring_id",3],")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$query",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","db",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","query",4],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `or`.*,`o`.`payment_method`,`o`.`payment_code`,`o`.`currency_code` FROM `\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` `or` LEFT JOIN `\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_STRING","DB_PREFIX",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"order` `o` ON `or`.`order_id` = `o`.`order_id` WHERE `or`.`order_recurring_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$order_recurring_id",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"' AND `o`.`customer_id` = '\"",4],["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_INT_CAST","(int)",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","customer",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","getId",4],"(",")",["T_WHITESPACE"," ",4],".",["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","\"'\"",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_RETURN","return",6],["T_WHITESPACE"," ",6],["T_VARIABLE","$query",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","row",6],";",["T_WHITESPACE","\n\t",6],"}",["T_WHITESPACE","\n\n\t",7],["T_PUBLIC","public",9],["T_WHITESPACE"," ",9],["T_FUNCTION","function",9],["T_WHITESPACE"," ",9],["T_STRING","getOrderRecurrings",9],"(",["T_VARIABLE","$start",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_LNUMBER","0",9],",",["T_WHITESPACE"," ",9],["T_VARIABLE","$limit",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_LNUMBER","20",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t",9],["T_IF","if",10],["T_WHITESPACE"," ",10],"(",["T_VARIABLE","$start",10],["T_WHITESPACE"," ",10],"<",["T_WHITESPACE"," ",10],["T_LNUMBER","0",10],")",["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\t\t\t",10],["T_VARIABLE","$start",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_LNUMBER","0",11],";",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE","\n\n\t\t",12],["T_IF","if",14],["T_WHITESPACE"," ",14],"(",["T_VARIABLE","$limit",14],["T_WHITESPACE"," ",14],"<",["T_WHITESPACE"," ",14],["T_LNUMBER","1",14],")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$limit",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_LNUMBER","1",15],";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$query",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","db",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","query",18],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `or`.*,`o`.`payment_method`,`o`.`currency_id`,`o`.`currency_value` FROM `\"",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_STRING","DB_PREFIX",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` `or` LEFT JOIN `\"",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_STRING","DB_PREFIX",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","\"order` `o` ON `or`.`order_id` = `o`.`order_id` WHERE `o`.`customer_id` = '\"",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_INT_CAST","(int)",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","customer",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","getId",18],"(",")",["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","\"' ORDER BY `o`.`order_id` DESC LIMIT \"",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_INT_CAST","(int)",18],["T_VARIABLE","$start",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","\",\"",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_INT_CAST","(int)",18],["T_VARIABLE","$limit",18],")",";",["T_WHITESPACE","\n\n\t\t",18],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$query",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","rows",20],";",["T_WHITESPACE","\n\t",20],"}",["T_WHITESPACE","\n\t\n\t",21],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","getOrderRecurringByReference",23],"(",["T_VARIABLE","$reference",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t",23],["T_VARIABLE","$query",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","query",24],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_STRING","DB_PREFIX",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` WHERE `reference` = '\"",24],["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","db",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","escape",24],"(",["T_VARIABLE","$reference",24],")",["T_WHITESPACE"," ",24],".",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","\"'\"",24],")",";",["T_WHITESPACE","\n\n\t\t",24],["T_RETURN","return",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$query",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","row",26],";",["T_WHITESPACE","\n\t",26],"}",["T_WHITESPACE","\n\n\t",27],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","getOrderRecurringTransactions",29],"(",["T_VARIABLE","$order_recurring_id",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t",29],["T_VARIABLE","$query",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","db",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","query",30],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM `\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_STRING","DB_PREFIX",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring_transaction` WHERE `order_recurring_id` = '\"",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_INT_CAST","(int)",30],["T_VARIABLE","$order_recurring_id",30],["T_WHITESPACE"," ",30],".",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","\"'\"",30],")",";",["T_WHITESPACE","\n\n\t\t",30],["T_RETURN","return",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$query",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","rows",32],";",["T_WHITESPACE","\n\t",32],"}",["T_WHITESPACE","\n\n\t",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","getTotalOrderRecurrings",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t",35],["T_VARIABLE","$query",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","db",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","query",36],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) AS total FROM `\"",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_STRING","DB_PREFIX",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` `or` LEFT JOIN `\"",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_STRING","DB_PREFIX",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"order` `o` ON `or`.`order_id` = `o`.`order_id` WHERE `o`.`customer_id` = '\"",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_INT_CAST","(int)",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","customer",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getId",36],"(",")",["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","\"'\"",36],")",";",["T_WHITESPACE","\n\n\t\t",36],["T_RETURN","return",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$query",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","row",38],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",38],"]",";",["T_WHITESPACE","\n\t",38],"}",["T_WHITESPACE","\n\t\n\t",39],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","addOrderRecurringTransaction",41],"(",["T_VARIABLE","$order_recurring_id",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$type",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","db",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","query",42],"(",["T_CONSTANT_ENCAPSED_STRING","\"INSERT INTO `\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_STRING","DB_PREFIX",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring_transaction` SET `order_recurring_id` = '\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_INT_CAST","(int)",42],["T_VARIABLE","$order_recurring_id",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"', `date_added` = NOW(), `type` = '\"",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_INT_CAST","(int)",42],["T_VARIABLE","$type",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"'\"",42],")",";",["T_WHITESPACE","\n\t",42],"}",["T_WHITESPACE","\t\n\t\n\t",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","editOrderRecurringStatus",45],"(",["T_VARIABLE","$order_recurring_id",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$status",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","db",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_STRING","DB_PREFIX",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"order_recurring` SET `status` = '\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$status",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"' WHERE `order_recurring_id` = '\"",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_INT_CAST","(int)",46],["T_VARIABLE","$order_recurring_id",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","\"'\"",46],")",";",["T_WHITESPACE","\n\t",46],"}",["T_WHITESPACE","\t\n",47],"}"]
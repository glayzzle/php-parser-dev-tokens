[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerStartupSession",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_IF","if",4],["T_WHITESPACE"," ",4],"(",["T_ISSET","isset",4],"(",["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","request",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",4],"]",")",["T_WHITESPACE"," ",4],["T_BOOLEAN_AND","&&",4],["T_WHITESPACE"," ",4],["T_ISSET","isset",4],"(",["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","request",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"[",["T_CONSTANT_ENCAPSED_STRING","'route'",4],"]",")",["T_WHITESPACE"," ",4],["T_BOOLEAN_AND","&&",4],["T_WHITESPACE"," ",4],["T_STRING","substr",4],"(",["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","request",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"[",["T_CONSTANT_ENCAPSED_STRING","'route'",4],"]",",",["T_WHITESPACE"," ",4],["T_LNUMBER","0",4],",",["T_WHITESPACE"," ",4],["T_LNUMBER","4",4],")",["T_WHITESPACE"," ",4],["T_IS_EQUAL","==",4],["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","'api\/'",4],")",["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","db",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","query",5],"(",["T_CONSTANT_ENCAPSED_STRING","\"DELETE FROM `\"",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_STRING","DB_PREFIX",5],["T_WHITESPACE"," ",5],".",["T_WHITESPACE"," ",5],["T_CONSTANT_ENCAPSED_STRING","\"api_session` WHERE TIMESTAMPADD(HOUR, 1, date_modified) < NOW()\"",5],")",";",["T_WHITESPACE","\n\t\t\n\t\t\t",5],["T_VARIABLE","$query",7],["T_WHITESPACE"," ",7],"=",["T_WHITESPACE"," ",7],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","db",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","query",7],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT DISTINCT * FROM `\"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_STRING","DB_PREFIX",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"api` `a` LEFT JOIN `\"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_STRING","DB_PREFIX",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"api_session` `as` ON (a.api_id = as.api_id) LEFT JOIN \"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_STRING","DB_PREFIX",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"api_ip `ai` ON (as.api_id = ai.api_id) WHERE a.status = '1' AND as.token = '\"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","db",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","escape",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","request",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","get",7],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",7],"]",")",["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"' AND ai.ip = '\"",7],["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","db",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","escape",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","request",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","server",7],"[",["T_CONSTANT_ENCAPSED_STRING","'REMOTE_ADDR'",7],"]",")",["T_WHITESPACE"," ",7],".",["T_WHITESPACE"," ",7],["T_CONSTANT_ENCAPSED_STRING","\"'\"",7],")",";",["T_WHITESPACE","\n\t\t\n\t\t\t",7],["T_IF","if",9],["T_WHITESPACE"," ",9],"(",["T_VARIABLE","$query",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","num_rows",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t\t\t",9],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","session",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","start",10],"(",["T_CONSTANT_ENCAPSED_STRING","'api'",10],",",["T_WHITESPACE"," ",10],["T_VARIABLE","$query",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","row",10],"[",["T_CONSTANT_ENCAPSED_STRING","'session_id'",10],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t\t",10],["T_COMMENT","\/\/ keep the session alive\n",12],["T_WHITESPACE","\t\t\t\t",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","db",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","query",13],"(",["T_CONSTANT_ENCAPSED_STRING","\"UPDATE `\"",13],["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_STRING","DB_PREFIX",13],["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","\"api_session` SET date_modified = NOW() WHERE api_session_id = '\"",13],["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_INT_CAST","(int)",13],["T_VARIABLE","$query",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","row",13],"[",["T_CONSTANT_ENCAPSED_STRING","'api_session_id'",13],"]",["T_WHITESPACE"," ",13],".",["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","\"'\"",13],")",";",["T_WHITESPACE","\n\t\t\t",13],"}",["T_WHITESPACE","\n\t\t",14],"}",["T_WHITESPACE"," ",15],["T_ELSE","else",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t\t",15],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","session",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","start",16],"(",")",";",["T_WHITESPACE","\n\t\t",16],"}",["T_WHITESPACE","\n\t",17],"}",["T_WHITESPACE","\n",18],"}"]
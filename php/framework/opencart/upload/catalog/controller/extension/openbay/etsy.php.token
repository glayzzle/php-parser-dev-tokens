[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionOpenbayEtsy",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","inbound",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_IF","if",4],["T_WHITESPACE"," ",4],"(",["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","config",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_status'",4],")",["T_WHITESPACE"," ",4],["T_IS_NOT_EQUAL","!=",4],["T_WHITESPACE"," ",4],["T_CONSTANT_ENCAPSED_STRING","'1'",4],")",["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","openbay",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","etsy",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","log",5],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy\/inbound - module inactive (503)'",5],")",";",["T_WHITESPACE","\n\t\t\t",5],["T_STRING","http_response_code",6],"(",["T_LNUMBER","503",6],")",";",["T_WHITESPACE","\n\t\t\t",6],["T_EXIT","exit",7],"(",")",";",["T_WHITESPACE","\n\t\t",7],"}",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$body",10],["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","request",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","post",10],";",["T_WHITESPACE","\n\n\t\t",10],["T_IF","if",12],["T_WHITESPACE"," ",12],"(","!",["T_ISSET","isset",12],"(",["T_VARIABLE","$body",12],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",12],"]",")",["T_WHITESPACE"," ",12],["T_BOOLEAN_OR","||",12],["T_WHITESPACE"," ",12],"!",["T_ISSET","isset",12],"(",["T_VARIABLE","$body",12],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",12],"]",")",")",["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","openbay",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","etsy",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","log",13],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy\/inbound - action or auth data not set (401)'",13],")",";",["T_WHITESPACE","\n\t\t\t",13],["T_STRING","http_response_code",14],"(",["T_LNUMBER","401",14],")",";",["T_WHITESPACE","\n\t\t\t",14],["T_EXIT","exit",15],"(",")",";",["T_WHITESPACE","\n\t\t",15],"}",["T_WHITESPACE","\n\n\t\t",16],["T_VARIABLE","$incoming_token",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ISSET","isset",18],"(",["T_VARIABLE","$body",18],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",18],"]","[",["T_CONSTANT_ENCAPSED_STRING","'token'",18],"]",")",["T_WHITESPACE"," ",18],"?",["T_WHITESPACE"," ",18],["T_VARIABLE","$body",18],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",18],"]","[",["T_CONSTANT_ENCAPSED_STRING","'token'",18],"]",["T_WHITESPACE"," ",18],":",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","''",18],";",["T_WHITESPACE","\n\t\t",18],["T_VARIABLE","$incoming_secret",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ISSET","isset",19],"(",["T_VARIABLE","$body",19],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",19],"]","[",["T_CONSTANT_ENCAPSED_STRING","'secret'",19],"]",")",["T_WHITESPACE"," ",19],"?",["T_WHITESPACE"," ",19],["T_VARIABLE","$body",19],"[",["T_CONSTANT_ENCAPSED_STRING","'auth'",19],"]","[",["T_CONSTANT_ENCAPSED_STRING","'secret'",19],"]",["T_WHITESPACE"," ",19],":",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","''",19],";",["T_WHITESPACE","\n\n\t\t",19],["T_IF","if",21],["T_WHITESPACE"," ",21],"(","!",["T_STRING","hash_equals",21],"(",["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","config",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_token'",21],")",",",["T_WHITESPACE"," ",21],["T_VARIABLE","$incoming_token",21],")",["T_WHITESPACE"," ",21],["T_BOOLEAN_OR","||",21],["T_WHITESPACE"," ",21],"!",["T_STRING","hash_equals",21],"(",["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","config",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy_enc1'",21],")",",",["T_WHITESPACE"," ",21],["T_VARIABLE","$incoming_secret",21],")",")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\t\t\t",21],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","openbay",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","etsy",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","log",22],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy\/inbound - Auth failed (401): '",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_VARIABLE","$incoming_token",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'\/'",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_VARIABLE","$incoming_secret",22],")",";",["T_WHITESPACE","\n\t\t\t",22],["T_STRING","http_response_code",23],"(",["T_LNUMBER","401",23],")",";",["T_WHITESPACE","\n\t\t\t",23],["T_EXIT","exit",24],"(",")",";",["T_WHITESPACE","\n\t\t",24],"}",["T_WHITESPACE","\n\n\t\t",25],["T_VARIABLE","$data",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_ARRAY","array",27],"(",")",";",["T_WHITESPACE","\n\n\t\t",27],["T_IF","if",29],["T_WHITESPACE"," ",29],"(",["T_ISSET","isset",29],"(",["T_VARIABLE","$body",29],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",29],"]",")",["T_WHITESPACE"," ",29],["T_BOOLEAN_AND","&&",29],["T_WHITESPACE"," ",29],"!",["T_EMPTY","empty",29],"(",["T_VARIABLE","$body",29],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",29],"]",")",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t\t",29],["T_VARIABLE","$decrypted",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","openbay",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","etsy",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","decryptArgs",30],"(",["T_VARIABLE","$body",30],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",30],"]",",",["T_WHITESPACE"," ",30],["T_STRING","true",30],")",";",["T_WHITESPACE","\n\n\t\t\t",30],["T_IF","if",32],["T_WHITESPACE"," ",32],"(","!",["T_VARIABLE","$decrypted",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n\t\t\t\t",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","openbay",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","etsy",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","log",33],"(",["T_CONSTANT_ENCAPSED_STRING","'etsy\/inbound Failed to decrypt data'",33],")",";",["T_WHITESPACE","\n\t\t\t\t",33],["T_STRING","http_response_code",34],"(",["T_LNUMBER","400",34],")",";",["T_WHITESPACE","\n\t\t\t\t",34],["T_EXIT","exit",35],"(",")",";",["T_WHITESPACE","\n\t\t\t",35],"}",["T_WHITESPACE","\n\n\t\t\t",36],["T_VARIABLE","$data",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","json_decode",38],"(",["T_VARIABLE","$decrypted",38],")",";",["T_WHITESPACE","\n\t\t",38],"}",["T_WHITESPACE","\n\n\t\t",39],["T_SWITCH","switch",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$body",41],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",41],"]",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\t\t\t",41],["T_CASE","case",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'orders'",42],":",["T_WHITESPACE","\n\t\t\t\t",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","load",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model",43],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/etsy_order'",43],")",";",["T_WHITESPACE","\n\n\t\t\t\t",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","openbay",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","etsy",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","log",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Orders action found'",45],")",";",["T_WHITESPACE","\n\n\t\t\t\t",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","model_extension_openbay_etsy_order",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","inbound",47],"(",["T_VARIABLE","$data",47],")",";",["T_WHITESPACE","\n\n\t\t\t\t",47],["T_BREAK","break",49],";",["T_WHITESPACE","\n\t\t\t",49],["T_CASE","case",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'products'",50],";",["T_WHITESPACE","\n\t\t\t\t",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","model",51],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/etsy_product'",51],")",";",["T_WHITESPACE","\n\n\t\t\t\t",51],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","model_extension_openbay_etsy_product",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","inbound",53],"(",["T_VARIABLE","$data",53],")",";",["T_WHITESPACE","\n\n\t\t\t\t",53],["T_BREAK","break",55],";",["T_WHITESPACE","\n\t\t",55],"}",["T_WHITESPACE","\n\t",56],"}",["T_WHITESPACE","\n\n\t",57],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","eventAddOrderHistory",59],"(",["T_VARIABLE","$route",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$data",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","openbay",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","etsy",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","log",60],"(",["T_CONSTANT_ENCAPSED_STRING","'eventAddOrderHistory Event fired: '",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$route",60],")",";",["T_WHITESPACE","\n\t\t\n\t\t",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_ISSET","isset",62],"(",["T_VARIABLE","$data",62],"[",["T_LNUMBER","0",62],"]",")",["T_WHITESPACE"," ",62],["T_BOOLEAN_AND","&&",62],["T_WHITESPACE"," ",62],"!",["T_EMPTY","empty",62],"(",["T_VARIABLE","$data",62],"[",["T_LNUMBER","0",62],"]",")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t\t",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","load",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","model",63],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/openbay\/etsy_order'",63],")",";",["T_WHITESPACE","\n\n\t\t\t",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","openbay",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","etsy",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","log",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Order ID: '",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_INT_CAST","(int)",65],["T_VARIABLE","$data",65],"[",["T_LNUMBER","0",65],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",65],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","model_extension_openbay_etsy_order",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","addOrderHistory",67],"(",["T_INT_CAST","(int)",67],["T_VARIABLE","$data",67],"[",["T_LNUMBER","0",67],"]",")",";",["T_WHITESPACE","\n\t\t",67],"}",["T_WHITESPACE","\n\t",68],"}",["T_WHITESPACE","\n",69],"}"]
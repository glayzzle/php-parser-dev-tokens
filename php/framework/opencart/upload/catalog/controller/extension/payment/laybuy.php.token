[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionPaymentLaybuy",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","load",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model",6],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","load",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","model",8],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",8],")",";",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",10],"]",["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","language",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",10],")",";",["T_WHITESPACE","\n\n\t\t",10],["T_VARIABLE","$data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'text_plan_preview'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'text_plan_preview'",12],")",";",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'text_payment'",13],"]",["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","language",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","get",13],"(",["T_CONSTANT_ENCAPSED_STRING","'text_payment'",13],")",";",["T_WHITESPACE","\n\t\t",13],["T_VARIABLE","$data",14],"[",["T_CONSTANT_ENCAPSED_STRING","'text_due_date'",14],"]",["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","language",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'text_due_date'",14],")",";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'text_amount'",15],"]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","language",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'text_amount'",15],")",";",["T_WHITESPACE","\n\t\t",15],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'text_downpayment'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","language",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'text_downpayment'",16],")",";",["T_WHITESPACE","\n\t\t",16],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'text_today'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","language",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'text_today'",17],")",";",["T_WHITESPACE","\n\t\t",17],["T_VARIABLE","$data",18],"[",["T_CONSTANT_ENCAPSED_STRING","'text_delivery_msg'",18],"]",["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","language",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'text_delivery_msg'",18],")",";",["T_WHITESPACE","\n\t\t",18],["T_VARIABLE","$data",19],"[",["T_CONSTANT_ENCAPSED_STRING","'text_fee_msg'",19],"]",["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","language",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","get",19],"(",["T_CONSTANT_ENCAPSED_STRING","'text_fee_msg'",19],")",";",["T_WHITESPACE","\n\t\t",19],["T_VARIABLE","$data",20],"[",["T_CONSTANT_ENCAPSED_STRING","'text_month'",20],"]",["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","language",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'text_month'",20],")",";",["T_WHITESPACE","\n\t\t",20],["T_VARIABLE","$data",21],"[",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",21],"]",["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","language",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",21],")",";",["T_WHITESPACE","\n\n\t\t",21],["T_VARIABLE","$data",23],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_initial'",23],"]",["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_initial'",23],")",";",["T_WHITESPACE","\n\t\t",23],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_months'",24],"]",["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","language",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","get",24],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_months'",24],")",";",["T_WHITESPACE","\n\n\t\t",24],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","language",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",26],")",";",["T_WHITESPACE","\n\n\t\t",26],["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","url",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","link",28],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy\/postToLaybuy'",28],")",";",["T_WHITESPACE","\n\n\t\t",28],["T_VARIABLE","$order_info",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","model_checkout_order",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getOrder",30],"(",["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","session",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","data",30],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",30],"]",")",";",["T_WHITESPACE","\n\n\t\t",30],["T_VARIABLE","$data",32],"[",["T_CONSTANT_ENCAPSED_STRING","'order_info'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$order_info",32],";",["T_WHITESPACE","\n\n\t\t",32],["T_VARIABLE","$data",34],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$order_info",34],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",34],"]",";",["T_WHITESPACE","\n\n\t\t",34],["T_VARIABLE","$data",36],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_symbol_left'",36],"]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","currency",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getSymbolLeft",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","session",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","data",36],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",36],"]",")",";",["T_WHITESPACE","\n\n\t\t",36],["T_VARIABLE","$data",38],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_symbol_right'",38],"]",["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","currency",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getSymbolRight",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","session",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","data",38],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",38],"]",")",";",["T_WHITESPACE","\n\n\t\t",38],["T_VARIABLE","$data",40],"[",["T_CONSTANT_ENCAPSED_STRING","'initial_payments'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","model_extension_payment_laybuy",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getInitialPayments",40],"(",")",";",["T_WHITESPACE","\n\n\t\t",40],["T_VARIABLE","$data",42],"[",["T_CONSTANT_ENCAPSED_STRING","'months'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","model_extension_payment_laybuy",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getMonths",42],"(",")",";",["T_WHITESPACE","\n\n\t\t",42],["T_RETURN","return",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","load",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","view",44],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$data",44],")",";",["T_WHITESPACE","\n\t",44],"}",["T_WHITESPACE","\n\n\t",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","postToLaybuy",47],"(",")",["T_WHITESPACE","\t",47],"{",["T_WHITESPACE","\n\t\t",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","load",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","model",48],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",48],")",";",["T_WHITESPACE","\n\n\t\t",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","model_extension_payment_laybuy",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","log",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Posting to Laybuy'",50],")",";",["T_WHITESPACE","\n\n\t\t",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","request",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","server",52],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",52],"]",["T_WHITESPACE"," ",52],["T_IS_EQUAL","==",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'POST'",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t\t",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","load",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","model",53],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",53],")",";",["T_WHITESPACE","\n\n\t\t\t",53],["T_VARIABLE","$order_info",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","model_checkout_order",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getOrder",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","session",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","data",55],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",55],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",55],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$order_info",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n\t\t\t\t",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","model_extension_payment_laybuy",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","log",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Order ID: '",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_VARIABLE","$order_info",58],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",58],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",58],["T_VARIABLE","$data",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",60],["T_VARIABLE","$data",62],"[",["T_CONSTANT_ENCAPSED_STRING","'VERSION'",62],"]",["T_WHITESPACE","      ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'0.2'",62],";",["T_WHITESPACE","\n\t\t\t\t",62],["T_VARIABLE","$data",63],"[",["T_CONSTANT_ENCAPSED_STRING","'MEMBER'",63],"]",["T_WHITESPACE","       ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","config",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuys_membership_id'",63],")",";",["T_WHITESPACE","\n\t\t\t\t",63],["T_VARIABLE","$data",64],"[",["T_CONSTANT_ENCAPSED_STRING","'RETURNURL'",64],"]",["T_WHITESPACE","    ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","url",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","link",64],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy\/callback'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","''",64],",",["T_WHITESPACE"," ",64],["T_STRING","true",64],")",";",["T_WHITESPACE","\n\t\t\t\t",64],["T_VARIABLE","$data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'CANCELURL'",65],"]",["T_WHITESPACE","    ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","url",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","link",65],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy\/cancel'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","''",65],",",["T_WHITESPACE"," ",65],["T_STRING","true",65],")",";",["T_WHITESPACE","\n\t\t\t\t",65],["T_VARIABLE","$data",66],"[",["T_CONSTANT_ENCAPSED_STRING","'AMOUNT'",66],"]",["T_WHITESPACE","       ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","round",66],"(",["T_STRING","floatval",66],"(",["T_VARIABLE","$order_info",66],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",66],"]",")",",",["T_WHITESPACE"," ",66],["T_LNUMBER","2",66],",",["T_WHITESPACE"," ",66],["T_STRING","PHP_ROUND_HALF_DOWN",66],")",";",["T_WHITESPACE","\n\t\t\t\t",66],["T_VARIABLE","$data",67],"[",["T_CONSTANT_ENCAPSED_STRING","'CURRENCY'",67],"]",["T_WHITESPACE","     ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$order_info",67],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",67],"]",";",["T_WHITESPACE","\n\t\t\t\t",67],["T_VARIABLE","$data",68],"[",["T_CONSTANT_ENCAPSED_STRING","'INIT'",68],"]",["T_WHITESPACE","         ",68],"=",["T_WHITESPACE"," ",68],["T_INT_CAST","(int)",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","request",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","post",68],"[",["T_CONSTANT_ENCAPSED_STRING","'INIT'",68],"]",";",["T_WHITESPACE","\n\t\t\t\t",68],["T_VARIABLE","$data",69],"[",["T_CONSTANT_ENCAPSED_STRING","'MONTHS'",69],"]",["T_WHITESPACE","       ",69],"=",["T_WHITESPACE"," ",69],["T_INT_CAST","(int)",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","request",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","post",69],"[",["T_CONSTANT_ENCAPSED_STRING","'MONTHS'",69],"]",";",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$data",70],"[",["T_CONSTANT_ENCAPSED_STRING","'MIND'",70],"]",["T_WHITESPACE","         ",70],"=",["T_WHITESPACE"," ",70],"(",["T_INT_CAST","(int)",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_min_deposit'",70],")",")",["T_WHITESPACE"," ",70],"?",["T_WHITESPACE"," ",70],["T_INT_CAST","(int)",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_min_deposit'",70],")",["T_WHITESPACE"," ",70],":",["T_WHITESPACE"," ",70],["T_LNUMBER","20",70],";",["T_WHITESPACE","\n\t\t\t\t",70],["T_VARIABLE","$data",71],"[",["T_CONSTANT_ENCAPSED_STRING","'MAXD'",71],"]",["T_WHITESPACE","         ",71],"=",["T_WHITESPACE"," ",71],"(",["T_INT_CAST","(int)",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","config",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_max_deposit'",71],")",")",["T_WHITESPACE"," ",71],"?",["T_WHITESPACE"," ",71],["T_INT_CAST","(int)",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","config",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_max_deposit'",71],")",["T_WHITESPACE"," ",71],":",["T_WHITESPACE"," ",71],["T_LNUMBER","50",71],";",["T_WHITESPACE","\n\t\t\t\t",71],["T_VARIABLE","$data",72],"[",["T_CONSTANT_ENCAPSED_STRING","'CUSTOM'",72],"]",["T_WHITESPACE","       ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$order_info",72],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",72],"]",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","':'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_STRING","md5",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","config",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",72],")",")",";",["T_WHITESPACE","\n\t\t\t\t",72],["T_VARIABLE","$data",73],"[",["T_CONSTANT_ENCAPSED_STRING","'EMAIL'",73],"]",["T_WHITESPACE","        ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$order_info",73],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",73],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",73],["T_VARIABLE","$data_string",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","''",75],";",["T_WHITESPACE","\n\n\t\t\t\t",75],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$data",77],["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$param",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$value",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t\t",77],["T_VARIABLE","$data_string",78],["T_WHITESPACE"," ",78],["T_CONCAT_EQUAL",".=",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$param",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'='",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_VARIABLE","$value",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'&'",78],";",["T_WHITESPACE","\n\t\t\t\t",78],"}",["T_WHITESPACE","\n\n\t\t\t\t",79],["T_VARIABLE","$data_string",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","rtrim",81],"(",["T_VARIABLE","$data_string",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'&'",81],")",";",["T_WHITESPACE","\n\n\t\t\t\t",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","model_extension_payment_laybuy",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","log",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Data String: '",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$data_string",83],")",";",["T_WHITESPACE","\n\n\t\t\t\t",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","model_extension_payment_laybuy",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","log",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Gateway URL: '",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","config",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_gateway_url'",85],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",85],["T_VARIABLE","$ch",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","curl_init",87],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",87],["T_STRING","curl_setopt",88],"(",["T_VARIABLE","$ch",88],",",["T_WHITESPACE"," ",88],["T_STRING","CURLOPT_URL",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","config",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","get",88],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_gateway_url'",88],")",")",";",["T_WHITESPACE","\n\t\t\t\t",88],["T_STRING","curl_setopt",89],"(",["T_VARIABLE","$ch",89],",",["T_WHITESPACE"," ",89],["T_STRING","CURLOPT_POST",89],",",["T_WHITESPACE"," ",89],["T_STRING","true",89],")",";",["T_WHITESPACE","\n\t\t\t\t",89],["T_STRING","curl_setopt",90],"(",["T_VARIABLE","$ch",90],",",["T_WHITESPACE"," ",90],["T_STRING","CURLOPT_POSTFIELDS",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$data_string",90],")",";",["T_WHITESPACE","\n\t\t\t\t",90],["T_STRING","curl_setopt",91],"(",["T_VARIABLE","$ch",91],",",["T_WHITESPACE"," ",91],["T_STRING","CURLOPT_RETURNTRANSFER",91],",",["T_WHITESPACE"," ",91],["T_STRING","true",91],")",";",["T_WHITESPACE","\n\t\t\t\t",91],["T_STRING","curl_setopt",92],"(",["T_VARIABLE","$ch",92],",",["T_WHITESPACE"," ",92],["T_STRING","CURLOPT_HEADER",92],",",["T_WHITESPACE"," ",92],["T_STRING","false",92],")",";",["T_WHITESPACE","\n\t\t\t\t",92],["T_STRING","curl_setopt",93],"(",["T_VARIABLE","$ch",93],",",["T_WHITESPACE"," ",93],["T_STRING","CURLOPT_TIMEOUT",93],",",["T_WHITESPACE"," ",93],["T_LNUMBER","30",93],")",";",["T_WHITESPACE","\n\t\t\t\t",93],["T_STRING","curl_setopt",94],"(",["T_VARIABLE","$ch",94],",",["T_WHITESPACE"," ",94],["T_STRING","CURLOPT_SSL_VERIFYPEER",94],",",["T_WHITESPACE"," ",94],["T_STRING","false",94],")",";",["T_WHITESPACE","\n\t\t\t\t",94],["T_VARIABLE","$result",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","curl_exec",95],"(",["T_VARIABLE","$ch",95],")",";",["T_WHITESPACE","\n\t\t\t\t",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_STRING","curl_errno",96],"(",["T_VARIABLE","$ch",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\t\t\t\t\t",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","model_extension_payment_laybuy",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","log",97],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL error: '",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_STRING","curl_errno",97],"(",["T_VARIABLE","$ch",97],")",")",";",["T_WHITESPACE","\n\t\t\t\t",97],"}",["T_WHITESPACE","\n\t\t\t\t",98],["T_STRING","curl_close",99],"(",["T_VARIABLE","$ch",99],")",";",["T_WHITESPACE","\n\n\t\t\t\t",99],["T_VARIABLE","$result",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","json_decode",101],"(",["T_VARIABLE","$result",101],",",["T_WHITESPACE"," ",101],["T_STRING","true",101],")",";",["T_WHITESPACE","\n\n\t\t\t\t",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","model_extension_payment_laybuy",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","log",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Response: '",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_STRING","print_r",103],"(",["T_VARIABLE","$result",103],",",["T_WHITESPACE"," ",103],["T_STRING","true",103],")",")",";",["T_WHITESPACE","\n\n\t\t\t \t",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$result",105],"[",["T_CONSTANT_ENCAPSED_STRING","'ACK'",105],"]",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_ISSET","isset",105],"(",["T_VARIABLE","$result",105],"[",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",105],"]",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$result",105],"[",["T_CONSTANT_ENCAPSED_STRING","'ACK'",105],"]",["T_WHITESPACE"," ",105],["T_IS_EQUAL","==",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'SUCCESS'",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n\t\t\t\t\t",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","model_extension_payment_laybuy",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","log",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Success response. Redirecting to PayPal.'",106],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","response",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","redirect",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","config",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_gateway_url'",108],")",["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'?TOKEN='",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_VARIABLE","$result",108],"[",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",108],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",108],"}",["T_WHITESPACE"," ",109],["T_ELSE","else",109],["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n\t\t\t\t\t",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","model_extension_payment_laybuy",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","log",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Failure response. Redirecting to checkout\/failure.'",110],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","response",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","redirect",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","url",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","link",112],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","''",112],",",["T_WHITESPACE"," ",112],["T_STRING","true",112],")",")",";",["T_WHITESPACE","\n\t\t\t\t",112],"}",["T_WHITESPACE","\n\t\t\t",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t\t\t",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","model_extension_payment_laybuy",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","log",115],"(",["T_CONSTANT_ENCAPSED_STRING","'No matching order. Redirecting to checkout\/failure.'",115],")",";",["T_WHITESPACE","\n\n\t\t\t\t",115],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","response",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","redirect",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","url",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","link",117],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","''",117],",",["T_WHITESPACE"," ",117],["T_STRING","true",117],")",")",";",["T_WHITESPACE","\n\t\t\t",117],"}",["T_WHITESPACE","\n\t\t",118],"}",["T_WHITESPACE"," ",119],["T_ELSE","else",119],["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n\t\t\t",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","model_extension_payment_laybuy",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","log",120],"(",["T_CONSTANT_ENCAPSED_STRING","'No $_POST data. Redirecting to checkout\/failure.'",120],")",";",["T_WHITESPACE","\n\n\t\t\t",120],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","response",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","redirect",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","url",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","link",122],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","''",122],",",["T_WHITESPACE"," ",122],["T_STRING","true",122],")",")",";",["T_WHITESPACE","\n\t\t",122],"}",["T_WHITESPACE","\n\t",123],"}",["T_WHITESPACE","\n\n\t",124],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","callback",126],"(",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n\t\t",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","load",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","model",127],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",127],")",";",["T_WHITESPACE","\n\n\t\t",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","model_extension_payment_laybuy",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","log",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Receiving callback'",129],")",";",["T_WHITESPACE","\n\n\t\t",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","server",131],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",131],"]",["T_WHITESPACE"," ",131],["T_IS_EQUAL","==",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'POST'",131],["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],["T_ISSET","isset",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","post",131],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",131],"]",")",["T_WHITESPACE"," ",131],["T_BOOLEAN_AND","&&",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","post",131],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",131],"]",["T_WHITESPACE"," ",131],["T_IS_EQUAL","==",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'SUCCESS'",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\t\t\t",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","load",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","model",132],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",132],")",";",["T_WHITESPACE","\n\n\t\t\t",132],["T_VARIABLE","$custom",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","request",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","post",134],"[",["T_CONSTANT_ENCAPSED_STRING","'CUSTOM'",134],"]",";",["T_WHITESPACE","\n\n\t\t\t",134],["T_VARIABLE","$custom",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","explode",136],"(",["T_CONSTANT_ENCAPSED_STRING","':'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$custom",136],")",";",["T_WHITESPACE","\n\n\t\t\t",136],["T_VARIABLE","$order_id",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$custom",138],"[",["T_LNUMBER","0",138],"]",";",["T_WHITESPACE","\n\n\t\t\t",138],["T_VARIABLE","$token",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$custom",140],"[",["T_LNUMBER","1",140],"]",";",["T_WHITESPACE","\n\n\t\t\t",140],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","model_extension_payment_laybuy",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","log",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Received Token: '",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_VARIABLE","$token",142],")",";",["T_WHITESPACE","\n\n\t\t\t",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","model_extension_payment_laybuy",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","log",144],"(",["T_CONSTANT_ENCAPSED_STRING","'Actual Token: '",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_STRING","md5",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","config",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","get",144],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",144],")",")",")",";",["T_WHITESPACE","\n\n\t\t\t",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_STRING","hash_equals",146],"(",["T_STRING","md5",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","config",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",146],")",")",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$token",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t\t",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","model_extension_payment_laybuy",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","log",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Order ID: '",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_VARIABLE","$order_id",147],")",";",["T_WHITESPACE","\n\n\t\t\t\t",147],["T_VARIABLE","$order_info",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","model_checkout_order",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getOrder",149],"(",["T_VARIABLE","$order_id",149],")",";",["T_WHITESPACE","\n\n\t\t\t\t",149],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$order_info",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n\t\t\t\t\t",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","model_checkout_order",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","addOrderHistory",152],"(",["T_VARIABLE","$order_id",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","config",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","get",152],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_order_status_id_pending'",152],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",152],["T_VARIABLE","$transaction_report",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","model_extension_payment_laybuy",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","prepareTransactionReport",154],"(",["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","request",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","post",154],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",154],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","model_extension_payment_laybuy",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","addTransaction",156],"(",["T_VARIABLE","$transaction_report",156],",",["T_WHITESPACE"," ",156],["T_LNUMBER","1",156],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",156],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","model_extension_payment_laybuy",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","log",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Success. Redirecting to checkout\/success.'",158],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",158],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","response",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","redirect",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","url",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","link",160],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","''",160],",",["T_WHITESPACE"," ",160],["T_STRING","true",160],")",")",";",["T_WHITESPACE","\n\t\t\t\t",160],"}",["T_WHITESPACE"," ",161],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n\t\t\t\t\t",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","model_extension_payment_laybuy",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","log",162],"(",["T_CONSTANT_ENCAPSED_STRING","'No matching order. Redirecting to checkout\/failure.'",162],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",162],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","response",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","redirect",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","url",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","link",164],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","''",164],",",["T_WHITESPACE"," ",164],["T_STRING","true",164],")",")",";",["T_WHITESPACE","\n\t\t\t\t",164],"}",["T_WHITESPACE","\n\t\t\t",165],"}",["T_WHITESPACE"," ",166],["T_ELSE","else",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t\t\t",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","model_extension_payment_laybuy",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","log",167],"(",["T_CONSTANT_ENCAPSED_STRING","'Token does not match. Redirecting to checkout\/failure.'",167],")",";",["T_WHITESPACE","\n\n\t\t\t\t",167],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","response",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","redirect",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","url",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","link",169],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","''",169],",",["T_WHITESPACE"," ",169],["T_STRING","true",169],")",")",";",["T_WHITESPACE","\n\t\t\t",169],"}",["T_WHITESPACE","\n\t\t",170],"}",["T_WHITESPACE"," ",171],["T_ELSEIF","elseif",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","request",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","server",171],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'POST'",171],["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_ISSET","isset",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","request",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","post",171],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",171],"]",")",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","request",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","post",171],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'FAILURE'",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","model_extension_payment_laybuy",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","log",172],"(",["T_CONSTANT_ENCAPSED_STRING","'Failure Response: '",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","request",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","post",172],")",";",["T_WHITESPACE","\n\n\t\t\t",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","model_extension_payment_laybuy",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","log",174],"(",["T_CONSTANT_ENCAPSED_STRING","'Redirecting to checkout\/failure.'",174],")",";",["T_WHITESPACE","\n\n\t\t\t",174],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","response",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","redirect",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","url",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","link",176],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","''",176],",",["T_WHITESPACE"," ",176],["T_STRING","true",176],")",")",";",["T_WHITESPACE","\n\t\t",176],"}",["T_WHITESPACE"," ",177],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n\t\t\t",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","model_extension_payment_laybuy",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","log",178],"(",["T_CONSTANT_ENCAPSED_STRING","'Either no $_POST data or unknown response. Redirecting to checkout\/failure.'",178],")",";",["T_WHITESPACE","\n\n\t\t\t",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","response",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","redirect",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","url",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","link",180],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","''",180],",",["T_WHITESPACE"," ",180],["T_STRING","true",180],")",")",";",["T_WHITESPACE","\n\t\t",180],"}",["T_WHITESPACE","\n\t",181],"}",["T_WHITESPACE","\n\n\t",182],["T_PUBLIC","public",184],["T_WHITESPACE"," ",184],["T_FUNCTION","function",184],["T_WHITESPACE"," ",184],["T_STRING","cancel",184],"(",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","load",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","model",185],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",185],")",";",["T_WHITESPACE","\n\n\t\t",185],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","model_extension_payment_laybuy",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","log",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction canceled by user. Redirecting to checkout\/checkout.'",187],")",";",["T_WHITESPACE","\n\n\t\t",187],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","response",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","redirect",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","url",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","link",189],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","''",189],",",["T_WHITESPACE"," ",189],["T_STRING","true",189],")",")",";",["T_WHITESPACE","\n\t",189],"}",["T_WHITESPACE","\n\n\t",190],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","reviseCallback",192],"(",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n\t\t",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","load",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","model",193],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",193],")",";",["T_WHITESPACE","\n\n\t\t",193],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","load",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","language",195],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",195],")",";",["T_WHITESPACE","\n\n\t\t",195],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","model_extension_payment_laybuy",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","log",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Receiving callback'",197],")",";",["T_WHITESPACE","\n\n\t\t",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","request",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","server",199],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",199],"]",["T_WHITESPACE"," ",199],["T_IS_EQUAL","==",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'POST'",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n\t\t\t",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_ISSET","isset",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","request",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","post",200],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",200],"]",")",["T_WHITESPACE"," ",200],["T_BOOLEAN_AND","&&",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","request",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","post",200],"[",["T_CONSTANT_ENCAPSED_STRING","'RESULT'",200],"]",["T_WHITESPACE"," ",200],["T_IS_EQUAL","==",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'SUCCESS'",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n\t\t\t\t",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","load",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","model",201],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",201],")",";",["T_WHITESPACE","\n\n\t\t\t\t",201],["T_VARIABLE","$custom",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","request",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","post",203],"[",["T_CONSTANT_ENCAPSED_STRING","'CUSTOM'",203],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",203],["T_VARIABLE","$custom",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","explode",205],"(",["T_CONSTANT_ENCAPSED_STRING","':'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$custom",205],")",";",["T_WHITESPACE","\n\n\t\t\t\t",205],["T_VARIABLE","$order_id",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$custom",207],"[",["T_LNUMBER","0",207],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",207],["T_VARIABLE","$token",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$custom",209],"[",["T_LNUMBER","1",209],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",209],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","model_extension_payment_laybuy",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","log",211],"(",["T_CONSTANT_ENCAPSED_STRING","'Received Token: '",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_VARIABLE","$token",211],")",";",["T_WHITESPACE","\n\n\t\t\t\t",211],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","model_extension_payment_laybuy",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","log",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Actual Token: '",213],["T_WHITESPACE"," ",213],".",["T_WHITESPACE"," ",213],["T_STRING","md5",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","config",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","get",213],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",213],")",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_STRING","hash_equals",215],"(",["T_STRING","md5",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","config",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","get",215],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",215],")",")",",",["T_WHITESPACE"," ",215],["T_VARIABLE","$token",215],")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t\t\t\t",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","model_extension_payment_laybuy",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","log",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Order ID: '",216],["T_WHITESPACE"," ",216],".",["T_WHITESPACE"," ",216],["T_VARIABLE","$order_id",216],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",216],["T_VARIABLE","$order_info",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","model_checkout_order",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getOrder",218],"(",["T_VARIABLE","$order_id",218],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",218],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$order_info",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",220],["T_VARIABLE","$response",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","request",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","post",221],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",221],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","model_extension_payment_laybuy",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","log",223],"(",["T_CONSTANT_ENCAPSED_STRING","'Response: '",223],["T_WHITESPACE"," ",223],".",["T_WHITESPACE"," ",223],["T_STRING","print_r",223],"(",["T_VARIABLE","$response",223],",",["T_WHITESPACE"," ",223],["T_STRING","true",223],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",223],["T_VARIABLE","$revised_transaction_id",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$response",225],"[",["T_CONSTANT_ENCAPSED_STRING","'MERCHANTS_REF_NO'",225],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",225],["T_VARIABLE","$revised_transaction",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","model_extension_payment_laybuy",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getRevisedTransaction",227],"(",["T_VARIABLE","$revised_transaction_id",227],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",227],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","model_extension_payment_laybuy",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","log",229],"(",["T_CONSTANT_ENCAPSED_STRING","'Revised transaction: '",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_STRING","print_r",229],"(",["T_VARIABLE","$revised_transaction",229],",",["T_WHITESPACE"," ",229],["T_STRING","true",229],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",229],["T_VARIABLE","$status",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_LNUMBER","1",231],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",231],["T_VARIABLE","$current_date",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","date",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d h:i:s'",233],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(","!",["T_ISSET","isset",235],"(",["T_VARIABLE","$response",235],"[",["T_CONSTANT_ENCAPSED_STRING","'DOWNPAYMENT'",235],"]",")",["T_WHITESPACE"," ",235],["T_BOOLEAN_AND","&&",235],["T_WHITESPACE"," ",235],"!",["T_VARIABLE","$revised_transaction",235],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_type'",235],"]",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","model_extension_payment_laybuy",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","log",236],"(",["T_CONSTANT_ENCAPSED_STRING","'Buy-Now'",236],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",236],["T_VARIABLE","$response",238],"[",["T_CONSTANT_ENCAPSED_STRING","'DOWNPAYMENT'",238],"]",["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_LNUMBER","100",238],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",238],["T_VARIABLE","$response",239],"[",["T_CONSTANT_ENCAPSED_STRING","'MONTHS'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_LNUMBER","0",239],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",239],["T_VARIABLE","$response",240],"[",["T_CONSTANT_ENCAPSED_STRING","'DOWNPAYMENT_AMOUNT'",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$response",240],"[",["T_CONSTANT_ENCAPSED_STRING","'AMOUNT'",240],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",240],["T_VARIABLE","$response",241],"[",["T_CONSTANT_ENCAPSED_STRING","'PAYMENT_AMOUNTS'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",241],["T_VARIABLE","$response",242],"[",["T_CONSTANT_ENCAPSED_STRING","'FIRST_PAYMENT_DUE'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$current_date",242],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",242],["T_VARIABLE","$response",243],"[",["T_CONSTANT_ENCAPSED_STRING","'LAST_PAYMENT_DUE'",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$current_date",243],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",243],["T_VARIABLE","$response",244],"[",["T_CONSTANT_ENCAPSED_STRING","'PAYPAL_PROFILE_ID'",244],"]",["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","''",244],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",244],["T_VARIABLE","$status",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_LNUMBER","5",246],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","model_checkout_order",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addOrderHistory",248],"(",["T_VARIABLE","$order_id",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","config",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","get",248],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_order_status_id_processing'",248],")",",",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","language",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","get",248],"(",["T_CONSTANT_ENCAPSED_STRING","'text_comment'",248],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",248],"}",["T_WHITESPACE"," ",249],["T_ELSE","else",249],["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","model_extension_payment_laybuy",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","log",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Lay-Buy'",250],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",250],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",251],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","session",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","data",253],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",253],"]",["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$order_id",253],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",253],["T_VARIABLE","$transaction_report",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","model_extension_payment_laybuy",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","prepareTransactionReport",255],"(",["T_VARIABLE","$response",255],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",255],["T_VARIABLE","$transaction_report",257],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",257],"]",["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$order_id",257],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",257],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","model_extension_payment_laybuy",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","addTransaction",259],"(",["T_VARIABLE","$transaction_report",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$status",259],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",259],["T_VARIABLE","$old_transaction",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","model_extension_payment_laybuy",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getTransaction",261],"(",["T_VARIABLE","$revised_transaction",261],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",261],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",261],["T_VARIABLE","$report_content",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","json_decode",263],"(",["T_VARIABLE","$old_transaction",263],"[",["T_CONSTANT_ENCAPSED_STRING","'report'",263],"]",",",["T_WHITESPACE"," ",263],["T_STRING","true",263],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",263],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$report_content",265],["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],"&",["T_VARIABLE","$array",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",265],["T_VARIABLE","$array",266],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",266],"]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","str_replace",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Pending'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'Canceled'",266],",",["T_WHITESPACE"," ",266],["T_VARIABLE","$array",266],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",266],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",266],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",267],["T_VARIABLE","$report_content",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","json_encode",269],"(",["T_VARIABLE","$report_content",269],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",269],["T_IF","if",271],["T_WHITESPACE"," ",271],"(",["T_VARIABLE","$old_transaction",271],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_profile_id'",271],"]",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","model_extension_payment_laybuy",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","log",272],"(",["T_CONSTANT_ENCAPSED_STRING","'Canceling transaction'",272],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",272],["T_VARIABLE","$data_string",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'mid='",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","config",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuys_membership_id'",274],")",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'&'",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'paypal_profile_id='",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$old_transaction",274],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_profile_id'",274],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",274],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","model_extension_payment_laybuy",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","log",276],"(",["T_CONSTANT_ENCAPSED_STRING","'Data String: '",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_VARIABLE","$data_string",276],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",276],["T_VARIABLE","$ch",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","curl_init",278],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",278],["T_VARIABLE","$url",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/lay-buys.com\/vtmob\/deal5cancel.php'",279],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",279],["T_STRING","curl_setopt",280],"(",["T_VARIABLE","$ch",280],",",["T_WHITESPACE"," ",280],["T_STRING","CURLOPT_URL",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$url",280],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",280],["T_STRING","curl_setopt",281],"(",["T_VARIABLE","$ch",281],",",["T_WHITESPACE"," ",281],["T_STRING","CURLOPT_POST",281],",",["T_WHITESPACE"," ",281],["T_STRING","true",281],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",281],["T_STRING","curl_setopt",282],"(",["T_VARIABLE","$ch",282],",",["T_WHITESPACE"," ",282],["T_STRING","CURLOPT_POSTFIELDS",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$data_string",282],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",282],["T_STRING","curl_setopt",283],"(",["T_VARIABLE","$ch",283],",",["T_WHITESPACE"," ",283],["T_STRING","CURLOPT_RETURNTRANSFER",283],",",["T_WHITESPACE"," ",283],["T_STRING","true",283],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",283],["T_STRING","curl_setopt",284],"(",["T_VARIABLE","$ch",284],",",["T_WHITESPACE"," ",284],["T_STRING","CURLOPT_HEADER",284],",",["T_WHITESPACE"," ",284],["T_STRING","false",284],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",284],["T_STRING","curl_setopt",285],"(",["T_VARIABLE","$ch",285],",",["T_WHITESPACE"," ",285],["T_STRING","CURLOPT_TIMEOUT",285],",",["T_WHITESPACE"," ",285],["T_LNUMBER","30",285],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",285],["T_STRING","curl_setopt",286],"(",["T_VARIABLE","$ch",286],",",["T_WHITESPACE"," ",286],["T_STRING","CURLOPT_SSL_VERIFYPEER",286],",",["T_WHITESPACE"," ",286],["T_STRING","false",286],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",286],["T_VARIABLE","$result",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","curl_exec",287],"(",["T_VARIABLE","$ch",287],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","curl_errno",288],"(",["T_VARIABLE","$ch",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","model_extension_payment_laybuy",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","log",289],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL error: '",289],["T_WHITESPACE"," ",289],".",["T_WHITESPACE"," ",289],["T_STRING","curl_errno",289],"(",["T_VARIABLE","$ch",289],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",289],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t",290],["T_STRING","curl_close",291],"(",["T_VARIABLE","$ch",291],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",291],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","model_extension_payment_laybuy",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","log",293],"(",["T_CONSTANT_ENCAPSED_STRING","'Response: '",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_VARIABLE","$result",293],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",293],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$result",295],["T_WHITESPACE"," ",295],["T_IS_EQUAL","==",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'success'",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","model_extension_payment_laybuy",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","log",296],"(",["T_CONSTANT_ENCAPSED_STRING","'Success'",296],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",296],"}",["T_WHITESPACE"," ",297],["T_ELSE","else",297],["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","model_extension_payment_laybuy",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","log",298],"(",["T_CONSTANT_ENCAPSED_STRING","'Failure'",298],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",298],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",299],"}",["T_WHITESPACE"," ",300],["T_ELSE","else",300],["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","model_extension_payment_laybuy",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","log",301],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction has no paypal_profile_id'",301],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",301],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",302],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","model_extension_payment_laybuy",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","updateTransaction",304],"(",["T_VARIABLE","$old_transaction",304],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",304],"]",",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'51'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$report_content",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$old_transaction",304],"[",["T_CONSTANT_ENCAPSED_STRING","'transaction'",304],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",304],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","model_extension_payment_laybuy",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","deleteRevisedTransaction",306],"(",["T_VARIABLE","$revised_transaction",306],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_revise_request_id'",306],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",306],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","response",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","redirect",308],"(",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","url",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","link",308],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","''",308],",",["T_WHITESPACE"," ",308],["T_STRING","true",308],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",308],"}",["T_WHITESPACE"," ",309],["T_ELSE","else",309],["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","model_extension_payment_laybuy",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","log",310],"(",["T_CONSTANT_ENCAPSED_STRING","'No matching order. Redirecting to checkout\/failure.'",310],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",310],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","response",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","redirect",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","url",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","link",312],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","''",312],",",["T_WHITESPACE"," ",312],["T_STRING","true",312],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",312],"}",["T_WHITESPACE","\n\t\t\t\t",313],"}",["T_WHITESPACE"," ",314],["T_ELSE","else",314],["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n\t\t\t\t\t",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","model_extension_payment_laybuy",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","log",315],"(",["T_CONSTANT_ENCAPSED_STRING","'Token does not match. Redirecting to checkout\/failure.'",315],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",315],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","response",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","redirect",317],"(",["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","url",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","link",317],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",317],",",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","''",317],",",["T_WHITESPACE"," ",317],["T_STRING","true",317],")",")",";",["T_WHITESPACE","\n\t\t\t\t",317],"}",["T_WHITESPACE","\n\t\t\t",318],"}",["T_WHITESPACE"," ",319],["T_ELSE","else",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n\t\t\t\t",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","model_extension_payment_laybuy",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","log",320],"(",["T_CONSTANT_ENCAPSED_STRING","'No success response'",320],")",";",["T_WHITESPACE","\n\n\t\t\t\t",320],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","response",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","redirect",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","url",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","link",322],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","''",322],",",["T_WHITESPACE"," ",322],["T_STRING","true",322],")",")",";",["T_WHITESPACE","\n\t\t\t",322],"}",["T_WHITESPACE","\n\t\t",323],"}",["T_WHITESPACE"," ",324],["T_ELSE","else",324],["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n\t\t\t",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","model_extension_payment_laybuy",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","log",325],"(",["T_CONSTANT_ENCAPSED_STRING","'No $_POST data'",325],")",";",["T_WHITESPACE","\n\n\t\t\t",325],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","response",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","redirect",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","url",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","link",327],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/failure'",327],",",["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","''",327],",",["T_WHITESPACE"," ",327],["T_STRING","true",327],")",")",";",["T_WHITESPACE","\n\t\t",327],"}",["T_WHITESPACE","\n\t",328],"}",["T_WHITESPACE","\n\n\t",329],["T_PUBLIC","public",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","reviseCancel",331],"(",")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n\t\t",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","load",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","model",332],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",332],")",";",["T_WHITESPACE","\n\n\t\t",332],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","model_extension_payment_laybuy",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","log",334],"(",["T_CONSTANT_ENCAPSED_STRING","'Revise canceled. Redirecting to checkout\/checkout.'",334],")",";",["T_WHITESPACE","\n\n\t\t",334],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","response",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","redirect",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","url",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","link",336],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","''",336],",",["T_WHITESPACE"," ",336],["T_STRING","true",336],")",")",";",["T_WHITESPACE","\n\t",336],"}",["T_WHITESPACE","\n\n\t",337],["T_PUBLIC","public",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","deleteOrder",339],"(",["T_VARIABLE","$route",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$output",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","''",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$order_id",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_LNUMBER","0",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$order_status_id",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_LNUMBER","0",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n\t\t",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","load",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","model",340],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",340],")",";",["T_WHITESPACE","\n\n\t\t",340],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_ISSET","isset",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","session",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","data",342],"[",["T_CONSTANT_ENCAPSED_STRING","'api_id'",342],"]",")",")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n\t\t\t",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","model_extension_payment_laybuy",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","log",343],"(",["T_CONSTANT_ENCAPSED_STRING","'Deleting order #'",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_VARIABLE","$order_id",343],")",";",["T_WHITESPACE","\n\n\t\t\t",343],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","model_extension_payment_laybuy",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","deleteTransactionByOrderId",345],"(",["T_VARIABLE","$order_id",345],")",";",["T_WHITESPACE","\n\t\t",345],"}",["T_WHITESPACE"," ",346],["T_ELSE","else",346],["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n\t\t\t",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","model_extension_payment_laybuy",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","log",347],"(",["T_CONSTANT_ENCAPSED_STRING","'No API ID in session'",347],")",";",["T_WHITESPACE","\n\t\t",347],"}",["T_WHITESPACE","\n\t",348],"}",["T_WHITESPACE","\n\n\t",349],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","cron",351],"(",")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n\t\t",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","load",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","model",352],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",352],")",";",["T_WHITESPACE","\n\n\t\t",352],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","load",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","language",354],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/laybuy'",354],")",";",["T_WHITESPACE","\n\n\t\t",354],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","model_extension_payment_laybuy",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","log",356],"(",["T_CONSTANT_ENCAPSED_STRING","'Running cron'",356],")",";",["T_WHITESPACE","\n\n\t\t",356],["T_IF","if",358],["T_WHITESPACE"," ",358],"(",["T_ISSET","isset",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","request",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",358],"]",")",["T_WHITESPACE"," ",358],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],["T_STRING","hash_equals",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","config",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_token'",358],")",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","request",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","get",358],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",358],"]",")",")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n\t\t\t",358],["T_VARIABLE","$paypal_profile_id_array",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","model_extension_payment_laybuy",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getPayPalProfileIds",359],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",359],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$paypal_profile_id_array",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n\t\t\t\t",361],["T_VARIABLE","$paypal_profile_ids",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","''",362],";",["T_WHITESPACE","\n\n\t\t\t\t",362],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$paypal_profile_id_array",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$profile_id",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n\t\t\t\t\t",364],["T_VARIABLE","$paypal_profile_ids",365],["T_WHITESPACE"," ",365],["T_CONCAT_EQUAL",".=",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$profile_id",365],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_profile_id'",365],"]",["T_WHITESPACE"," ",365],".",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","','",365],";",["T_WHITESPACE","\n\t\t\t\t",365],"}",["T_WHITESPACE","\n\n\t\t\t\t",366],["T_VARIABLE","$paypal_profile_ids",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_STRING","rtrim",368],"(",["T_VARIABLE","$paypal_profile_ids",368],",",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","','",368],")",";",["T_WHITESPACE","\n\n\t\t\t\t",368],["T_VARIABLE","$data_string",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'mid='",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","config",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","get",370],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuys_membership_id'",370],")",["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'&'",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'profileIds='",370],["T_WHITESPACE"," ",370],".",["T_WHITESPACE"," ",370],["T_VARIABLE","$paypal_profile_ids",370],";",["T_WHITESPACE","\n\n\t\t\t\t",370],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","model_extension_payment_laybuy",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","log",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Data String: '",372],["T_WHITESPACE"," ",372],".",["T_WHITESPACE"," ",372],["T_VARIABLE","$data_string",372],")",";",["T_WHITESPACE","\n\n\t\t\t\t",372],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","model_extension_payment_laybuy",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","log",374],"(",["T_CONSTANT_ENCAPSED_STRING","'API URL: '",374],["T_WHITESPACE"," ",374],".",["T_WHITESPACE"," ",374],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","config",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","get",374],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_api_url'",374],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",374],["T_VARIABLE","$ch",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","curl_init",376],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",376],["T_STRING","curl_setopt",377],"(",["T_VARIABLE","$ch",377],",",["T_WHITESPACE"," ",377],["T_STRING","CURLOPT_URL",377],",",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","config",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","get",377],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_api_url'",377],")",")",";",["T_WHITESPACE","\n\t\t\t\t",377],["T_STRING","curl_setopt",378],"(",["T_VARIABLE","$ch",378],",",["T_WHITESPACE"," ",378],["T_STRING","CURLOPT_POST",378],",",["T_WHITESPACE"," ",378],["T_STRING","true",378],")",";",["T_WHITESPACE","\n\t\t\t\t",378],["T_STRING","curl_setopt",379],"(",["T_VARIABLE","$ch",379],",",["T_WHITESPACE"," ",379],["T_STRING","CURLOPT_POSTFIELDS",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$data_string",379],")",";",["T_WHITESPACE","\n\t\t\t\t",379],["T_STRING","curl_setopt",380],"(",["T_VARIABLE","$ch",380],",",["T_WHITESPACE"," ",380],["T_STRING","CURLOPT_RETURNTRANSFER",380],",",["T_WHITESPACE"," ",380],["T_STRING","true",380],")",";",["T_WHITESPACE","\n\t\t\t\t",380],["T_STRING","curl_setopt",381],"(",["T_VARIABLE","$ch",381],",",["T_WHITESPACE"," ",381],["T_STRING","CURLOPT_HEADER",381],",",["T_WHITESPACE"," ",381],["T_STRING","false",381],")",";",["T_WHITESPACE","\n\t\t\t\t",381],["T_STRING","curl_setopt",382],"(",["T_VARIABLE","$ch",382],",",["T_WHITESPACE"," ",382],["T_STRING","CURLOPT_TIMEOUT",382],",",["T_WHITESPACE"," ",382],["T_LNUMBER","30",382],")",";",["T_WHITESPACE","\n\t\t\t\t",382],["T_STRING","curl_setopt",383],"(",["T_VARIABLE","$ch",383],",",["T_WHITESPACE"," ",383],["T_STRING","CURLOPT_SSL_VERIFYPEER",383],",",["T_WHITESPACE"," ",383],["T_STRING","false",383],")",";",["T_WHITESPACE","\n\t\t\t\t",383],["T_VARIABLE","$result",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","curl_exec",384],"(",["T_VARIABLE","$ch",384],")",";",["T_WHITESPACE","\n\t\t\t\t",384],["T_IF","if",385],["T_WHITESPACE"," ",385],"(",["T_STRING","curl_errno",385],"(",["T_VARIABLE","$ch",385],")",")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n\t\t\t\t\t",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","model_extension_payment_laybuy",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","log",386],"(",["T_CONSTANT_ENCAPSED_STRING","'cURL error: '",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_STRING","curl_errno",386],"(",["T_VARIABLE","$ch",386],")",")",";",["T_WHITESPACE","\n\t\t\t\t",386],"}",["T_WHITESPACE","\n\t\t\t\t",387],["T_STRING","curl_close",388],"(",["T_VARIABLE","$ch",388],")",";",["T_WHITESPACE","\n\n\t\t\t\t",388],["T_VARIABLE","$results",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","json_decode",390],"(",["T_VARIABLE","$result",390],",",["T_WHITESPACE"," ",390],["T_STRING","true",390],")",";",["T_WHITESPACE","\n\n\t\t\t\t",390],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","model_extension_payment_laybuy",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","log",392],"(",["T_CONSTANT_ENCAPSED_STRING","'Response: '",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_STRING","print_r",392],"(",["T_VARIABLE","$results",392],",",["T_WHITESPACE"," ",392],["T_STRING","true",392],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",392],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$results",394],")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n\t\t\t\t\t",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","load",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","model",395],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",395],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",395],["T_FOREACH","foreach",397],["T_WHITESPACE"," ",397],"(",["T_VARIABLE","$results",397],["T_WHITESPACE"," ",397],["T_AS","as",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$laybuy_ref_id",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$reports",397],")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",397],["T_VARIABLE","$status",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$reports",398],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",398],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",398],["T_VARIABLE","$report",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_VARIABLE","$reports",400],"[",["T_CONSTANT_ENCAPSED_STRING","'report'",400],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",400],["T_VARIABLE","$transaction",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_ARRAY","array",402],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",402],["T_VARIABLE","$transaction",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","model_extension_payment_laybuy",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getTransactionByLayBuyRefId",404],"(",["T_VARIABLE","$laybuy_ref_id",404],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",404],["T_VARIABLE","$order_id",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$transaction",406],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",406],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",406],["T_VARIABLE","$paypal_profile_id",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$transaction",408],"[",["T_CONSTANT_ENCAPSED_STRING","'paypal_profile_id'",408],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",408],["T_VARIABLE","$months",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$transaction",410],"[",["T_CONSTANT_ENCAPSED_STRING","'months'",410],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",410],["T_VARIABLE","$report_content",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_ARRAY","array",412],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",412],["T_VARIABLE","$pending_flag",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_STRING","false",414],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",414],["T_VARIABLE","$next_payment_status",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","language",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","get",416],"(",["T_CONSTANT_ENCAPSED_STRING","'text_status_1'",416],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",416],["T_FOREACH","foreach",418],["T_WHITESPACE"," ",418],"(",["T_VARIABLE","$report",418],["T_WHITESPACE"," ",418],["T_AS","as",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$month",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$payment",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",418],["T_VARIABLE","$payment",419],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentDate'",419],"]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","date",419],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d h:i:s'",419],",",["T_WHITESPACE"," ",419],["T_STRING","strtotime",419],"(",["T_STRING","str_replace",419],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",419],",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'-'",419],",",["T_WHITESPACE"," ",419],["T_VARIABLE","$payment",419],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentDate'",419],"]",")",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",419],["T_VARIABLE","$date",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","date",420],"(",["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","language",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","get",420],"(",["T_CONSTANT_ENCAPSED_STRING","'date_format_short'",420],")",",",["T_WHITESPACE"," ",420],["T_STRING","strtotime",420],"(",["T_VARIABLE","$payment",420],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentDate'",420],"]",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",420],["T_VARIABLE","$next_payment_date",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$payment",421],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentDate'",421],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",421],["T_IF","if",423],["T_WHITESPACE"," ",423],"(",["T_VARIABLE","$payment",423],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",423],"]",["T_WHITESPACE"," ",423],["T_IS_EQUAL","==",423],["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'d'",423],")",["T_WHITESPACE"," ",423],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",423],["T_VARIABLE","$report_content",424],"[","]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_ARRAY","array",424],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",424],["T_CONSTANT_ENCAPSED_STRING","'instalment'",425],["T_WHITESPACE","\t",425],["T_DOUBLE_ARROW","=>",425],["T_WHITESPACE"," ",425],["T_LNUMBER","0",425],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",425],["T_CONSTANT_ENCAPSED_STRING","'amount'",426],["T_WHITESPACE","\t\t",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","currency",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","format",426],"(",["T_VARIABLE","$payment",426],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",426],"]",",",["T_WHITESPACE"," ",426],["T_VARIABLE","$transaction",426],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",426],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",426],["T_CONSTANT_ENCAPSED_STRING","'date'",427],["T_WHITESPACE","\t\t\t",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_VARIABLE","$date",427],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",427],["T_CONSTANT_ENCAPSED_STRING","'pp_trans_id'",428],["T_WHITESPACE","\t",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$payment",428],"[",["T_CONSTANT_ENCAPSED_STRING","'txnID'",428],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",428],["T_CONSTANT_ENCAPSED_STRING","'status'",429],["T_WHITESPACE","\t\t",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$payment",429],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentStatus'",429],"]",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",429],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",430],"}",["T_WHITESPACE"," ",431],["T_ELSEIF","elseif",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$payment",431],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",431],"]",["T_WHITESPACE"," ",431],["T_IS_EQUAL","==",431],["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'p'",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",431],["T_VARIABLE","$pending_flag",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","true",432],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",432],["T_VARIABLE","$report_content",434],"[","]",["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_ARRAY","array",434],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",434],["T_CONSTANT_ENCAPSED_STRING","'instalment'",435],["T_WHITESPACE","\t",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$month",435],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",435],["T_CONSTANT_ENCAPSED_STRING","'amount'",436],["T_WHITESPACE","\t\t",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","currency",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","format",436],"(",["T_VARIABLE","$payment",436],"[",["T_CONSTANT_ENCAPSED_STRING","'amount'",436],"]",",",["T_WHITESPACE"," ",436],["T_VARIABLE","$transaction",436],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",436],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",436],["T_CONSTANT_ENCAPSED_STRING","'date'",437],["T_WHITESPACE","\t\t\t",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$date",437],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",437],["T_CONSTANT_ENCAPSED_STRING","'pp_trans_id'",438],["T_WHITESPACE","\t",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$payment",438],"[",["T_CONSTANT_ENCAPSED_STRING","'txnID'",438],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",438],["T_CONSTANT_ENCAPSED_STRING","'status'",439],["T_WHITESPACE","\t\t",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$payment",439],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentStatus'",439],"]",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",439],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",440],["T_VARIABLE","$next_payment_status",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$payment",442],"[",["T_CONSTANT_ENCAPSED_STRING","'paymentStatus'",442],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",442],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",443],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",444],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$pending_flag",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",446],["T_VARIABLE","$start_index",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$month",447],["T_WHITESPACE"," ",447],"+",["T_WHITESPACE"," ",447],["T_LNUMBER","1",447],";",["T_WHITESPACE","\n\t\t\t\t\t\t",447],"}",["T_WHITESPACE"," ",448],["T_ELSE","else",448],["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",448],["T_VARIABLE","$start_index",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$month",449],["T_WHITESPACE"," ",449],"+",["T_WHITESPACE"," ",449],["T_LNUMBER","2",449],";",["T_WHITESPACE","\n\t\t\t\t\t\t",449],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",450],["T_IF","if",452],["T_WHITESPACE"," ",452],"(",["T_VARIABLE","$month",452],["T_WHITESPACE"," ",452],"<",["T_WHITESPACE"," ",452],["T_VARIABLE","$months",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",452],["T_FOR","for",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$month",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_LNUMBER","1",453],";",["T_WHITESPACE"," ",453],["T_VARIABLE","$month",453],["T_WHITESPACE"," ",453],["T_IS_SMALLER_OR_EQUAL","<=",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$months",453],";",["T_WHITESPACE"," ",453],["T_VARIABLE","$month",453],["T_INC","++",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",453],["T_VARIABLE","$next_payment_date",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","date",454],"(",["T_CONSTANT_ENCAPSED_STRING","\"Y-m-d h:i:s\"",454],",",["T_WHITESPACE"," ",454],["T_STRING","strtotime",454],"(",["T_VARIABLE","$next_payment_date",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","\" +1 month\"",454],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",454],["T_VARIABLE","$date",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","date",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","language",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","get",455],"(",["T_CONSTANT_ENCAPSED_STRING","'date_format_short'",455],")",",",["T_WHITESPACE"," ",455],["T_STRING","strtotime",455],"(",["T_VARIABLE","$next_payment_date",455],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",455],["T_VARIABLE","$report_content",457],"[","]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_ARRAY","array",457],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",457],["T_CONSTANT_ENCAPSED_STRING","'instalment'",458],["T_WHITESPACE","\t",458],["T_DOUBLE_ARROW","=>",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$month",458],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",458],["T_CONSTANT_ENCAPSED_STRING","'amount'",459],["T_WHITESPACE","\t\t",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","currency",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","format",459],"(",["T_VARIABLE","$transaction",459],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_amounts'",459],"]",",",["T_WHITESPACE"," ",459],["T_VARIABLE","$transaction",459],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",459],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",459],["T_CONSTANT_ENCAPSED_STRING","'date'",460],["T_WHITESPACE","\t\t\t",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$date",460],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",460],["T_CONSTANT_ENCAPSED_STRING","'pp_trans_id'",461],["T_WHITESPACE","\t",461],["T_DOUBLE_ARROW","=>",461],["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","''",461],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",461],["T_CONSTANT_ENCAPSED_STRING","'status'",462],["T_WHITESPACE","\t\t",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$next_payment_status",462],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",462],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",463],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",464],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",465],["T_VARIABLE","$report_content",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","json_encode",467],"(",["T_VARIABLE","$report_content",467],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",467],["T_SWITCH","switch",469],["T_WHITESPACE"," ",469],"(",["T_VARIABLE","$status",469],")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",469],["T_CASE","case",470],["T_WHITESPACE"," ",470],"-",["T_LNUMBER","1",470],":",["T_WHITESPACE"," ",470],["T_COMMENT","\/\/ Cancel\n",470],["T_WHITESPACE","\t\t\t\t\t\t\t\t",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","model_extension_payment_laybuy",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","log",471],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction #'",471],["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_VARIABLE","$transaction",471],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",471],"]",["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","' canceled'",471],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",471],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","model_checkout_order",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","addOrderHistory",472],"(",["T_VARIABLE","$order_id",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","config",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","get",472],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_order_status_id_canceled'",472],")",",",["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","language",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","get",472],"(",["T_CONSTANT_ENCAPSED_STRING","'text_comment'",472],")",",",["T_WHITESPACE"," ",472],["T_STRING","false",472],",",["T_WHITESPACE"," ",472],["T_STRING","false",472],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",472],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","model_extension_payment_laybuy",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","updateTransaction",473],"(",["T_VARIABLE","$transaction",473],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",473],"]",",",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'7'",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$report_content",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$start_index",473],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",473],["T_BREAK","break",474],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",474],["T_CASE","case",475],["T_WHITESPACE"," ",475],["T_LNUMBER","0",475],":",["T_WHITESPACE"," ",475],["T_COMMENT","\/\/ Pending\n",475],["T_WHITESPACE","\t\t\t\t\t\t\t\t",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","model_extension_payment_laybuy",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","log",476],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction #'",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_VARIABLE","$transaction",476],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",476],"]",["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","' still pending'",476],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",476],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","model_extension_payment_laybuy",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","updateTransaction",477],"(",["T_VARIABLE","$transaction",477],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",477],"]",",",["T_WHITESPACE"," ",477],["T_VARIABLE","$transaction",477],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",477],"]",",",["T_WHITESPACE"," ",477],["T_VARIABLE","$report_content",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$start_index",477],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",477],["T_BREAK","break",478],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",478],["T_CASE","case",479],["T_WHITESPACE"," ",479],["T_LNUMBER","1",479],":",["T_WHITESPACE"," ",479],["T_COMMENT","\/\/ Paid\n",479],["T_WHITESPACE","\t\t\t\t\t\t\t\t",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","model_extension_payment_laybuy",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","log",480],"(",["T_CONSTANT_ENCAPSED_STRING","'Transaction #'",480],["T_WHITESPACE"," ",480],".",["T_WHITESPACE"," ",480],["T_VARIABLE","$transaction",480],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",480],"]",["T_WHITESPACE"," ",480],".",["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","' paid'",480],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","model_checkout_order",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","addOrderHistory",481],"(",["T_VARIABLE","$order_id",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","config",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","get",481],"(",["T_CONSTANT_ENCAPSED_STRING","'laybuy_order_status_id_processing'",481],")",",",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","language",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","get",481],"(",["T_CONSTANT_ENCAPSED_STRING","'text_comment'",481],")",",",["T_WHITESPACE"," ",481],["T_STRING","false",481],",",["T_WHITESPACE"," ",481],["T_STRING","false",481],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","model_extension_payment_laybuy",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","updateTransaction",482],"(",["T_VARIABLE","$transaction",482],"[",["T_CONSTANT_ENCAPSED_STRING","'laybuy_transaction_id'",482],"]",",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'5'",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$report_content",482],",",["T_WHITESPACE"," ",482],["T_VARIABLE","$start_index",482],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",482],["T_BREAK","break",483],";",["T_WHITESPACE","\n\t\t\t\t\t\t",483],"}",["T_WHITESPACE","\n\t\t\t\t\t",484],"}",["T_WHITESPACE","\n\t\t\t\t",485],"}",["T_WHITESPACE","\n\t\t\t",486],"}",["T_WHITESPACE"," ",487],["T_ELSE","else",487],["T_WHITESPACE"," ",487],"{",["T_WHITESPACE","\n\t\t\t\t",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","model_extension_payment_laybuy",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","log",488],"(",["T_CONSTANT_ENCAPSED_STRING","'No PayPal Profile IDs to update'",488],")",";",["T_WHITESPACE","\n\t\t\t",488],"}",["T_WHITESPACE","\n\n\t\t\t",489],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","model_extension_payment_laybuy",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","updateCronRunTime",491],"(",")",";",["T_WHITESPACE","\n\t\t",491],"}",["T_WHITESPACE"," ",492],["T_ELSE","else",492],["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n\t\t\t",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","model_extension_payment_laybuy",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","log",493],"(",["T_CONSTANT_ENCAPSED_STRING","'Token does not match.'",493],")",";",["T_WHITESPACE","\n\t\t",493],"}",["T_WHITESPACE","\n\t",494],"}",["T_WHITESPACE","\n",495],"}"]
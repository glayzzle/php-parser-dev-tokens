[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionPaymentKlarnaInvoice",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$order_info",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model_checkout_order",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","getOrder",6],"(",["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","session",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","data",6],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",6],"]",")",";",["T_WHITESPACE","\n\n\t\t",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_VARIABLE","$order_info",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","load",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","language",9],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/klarna_invoice'",9],")",";",["T_WHITESPACE","\n\n\t\t\t",9],["T_VARIABLE","$data",11],"[",["T_CONSTANT_ENCAPSED_STRING","'text_additional'",11],"]",["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","language",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'text_additional'",11],")",";",["T_WHITESPACE","\n\t\t\t",11],["T_VARIABLE","$data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'text_payment_option'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'text_payment_option'",12],")",";",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",13],"]",["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","language",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","get",13],"(",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",13],")",";",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$data",14],"[",["T_CONSTANT_ENCAPSED_STRING","'text_day'",14],"]",["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","language",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'text_day'",14],")",";",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'text_month'",15],"]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","language",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'text_month'",15],")",";",["T_WHITESPACE","\n\t\t\t",15],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'text_year'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","language",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'text_year'",16],")",";",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'text_male'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","language",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'text_male'",17],")",";",["T_WHITESPACE","\n\t\t\t",17],["T_VARIABLE","$data",18],"[",["T_CONSTANT_ENCAPSED_STRING","'text_female'",18],"]",["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","language",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'text_female'",18],")",";",["T_WHITESPACE","\n\n\t\t\t",18],["T_VARIABLE","$data",20],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_pno'",20],"]",["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","language",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_pno'",20],")",";",["T_WHITESPACE","\n\t\t\t",20],["T_VARIABLE","$data",21],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_dob'",21],"]",["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","language",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_dob'",21],")",";",["T_WHITESPACE","\n\t\t\t",21],["T_VARIABLE","$data",22],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_gender'",22],"]",["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","language",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_gender'",22],")",";",["T_WHITESPACE","\n\t\t\t",22],["T_VARIABLE","$data",23],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_street'",23],"]",["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_street'",23],")",";",["T_WHITESPACE","\n\t\t\t",23],["T_VARIABLE","$data",24],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_house_no'",24],"]",["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","language",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","get",24],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_house_no'",24],")",";",["T_WHITESPACE","\n\t\t\t",24],["T_VARIABLE","$data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_house_ext'",25],"]",["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","language",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_house_ext'",25],")",";",["T_WHITESPACE","\n\t\t\t",25],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_phone_no'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","language",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_phone_no'",26],")",";",["T_WHITESPACE","\n\t\t\t",26],["T_VARIABLE","$data",27],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_company'",27],"]",["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","language",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_company'",27],")",";",["T_WHITESPACE","\n\n\t\t\t",27],["T_VARIABLE","$data",29],"[",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","language",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",29],")",";",["T_WHITESPACE","\n\n\t\t\t",29],["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'days'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",31],["T_FOR","for",33],["T_WHITESPACE"," ",33],"(",["T_VARIABLE","$i",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_LNUMBER","1",33],";",["T_WHITESPACE"," ",33],["T_VARIABLE","$i",33],["T_WHITESPACE"," ",33],["T_IS_SMALLER_OR_EQUAL","<=",33],["T_WHITESPACE"," ",33],["T_LNUMBER","31",33],";",["T_WHITESPACE"," ",33],["T_VARIABLE","$i",33],["T_INC","++",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t\t",33],["T_VARIABLE","$data",34],"[",["T_CONSTANT_ENCAPSED_STRING","'days'",34],"]","[","]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n\t\t\t\t\t",34],["T_CONSTANT_ENCAPSED_STRING","'text'",35],["T_WHITESPACE","  ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_STRING","sprintf",35],"(",["T_CONSTANT_ENCAPSED_STRING","'%02d'",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$i",35],")",",",["T_WHITESPACE","\n\t\t\t\t\t",35],["T_CONSTANT_ENCAPSED_STRING","'value'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$i",36],["T_WHITESPACE","\n\t\t\t\t",36],")",";",["T_WHITESPACE","\n\t\t\t",37],"}",["T_WHITESPACE","\n\n\t\t\t",38],["T_VARIABLE","$data",40],"[",["T_CONSTANT_ENCAPSED_STRING","'months'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",40],["T_FOR","for",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$i",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_LNUMBER","1",42],";",["T_WHITESPACE"," ",42],["T_VARIABLE","$i",42],["T_WHITESPACE"," ",42],["T_IS_SMALLER_OR_EQUAL","<=",42],["T_WHITESPACE"," ",42],["T_LNUMBER","12",42],";",["T_WHITESPACE"," ",42],["T_VARIABLE","$i",42],["T_INC","++",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n\t\t\t\t",42],["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'months'",43],"]","[","]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE","\n\t\t\t\t\t",43],["T_CONSTANT_ENCAPSED_STRING","'text'",44],["T_WHITESPACE","  ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_STRING","sprintf",44],"(",["T_CONSTANT_ENCAPSED_STRING","'%02d'",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$i",44],")",",",["T_WHITESPACE","\n\t\t\t\t\t",44],["T_CONSTANT_ENCAPSED_STRING","'value'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$i",45],["T_WHITESPACE","\n\t\t\t\t",45],")",";",["T_WHITESPACE","\n\t\t\t",46],"}",["T_WHITESPACE","\n\n\t\t\t",47],["T_VARIABLE","$data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'years'",49],"]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",49],["T_FOR","for",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$i",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","date",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Y'",51],")",";",["T_WHITESPACE"," ",51],["T_VARIABLE","$i",51],["T_WHITESPACE"," ",51],["T_IS_GREATER_OR_EQUAL",">=",51],["T_WHITESPACE"," ",51],["T_LNUMBER","1900",51],";",["T_WHITESPACE"," ",51],["T_VARIABLE","$i",51],["T_DEC","--",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n\t\t\t\t",51],["T_VARIABLE","$data",52],"[",["T_CONSTANT_ENCAPSED_STRING","'years'",52],"]","[","]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_WHITESPACE","\n\t\t\t\t\t",52],["T_CONSTANT_ENCAPSED_STRING","'text'",53],["T_WHITESPACE","  ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$i",53],",",["T_WHITESPACE","\n\t\t\t\t\t",53],["T_CONSTANT_ENCAPSED_STRING","'value'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$i",54],["T_WHITESPACE","\n\t\t\t\t",54],")",";",["T_WHITESPACE","\n\t\t\t",55],"}",["T_WHITESPACE","\n\n\t\t\t",56],["T_COMMENT","\/\/ Store Taxes to send to Klarna\n",58],["T_WHITESPACE","\t\t\t",59],["T_VARIABLE","$total_data",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$total",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","0",60],";",["T_WHITESPACE","\n\n\t\t\t",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","load",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","model",62],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/extension'",62],")",";",["T_WHITESPACE","\n\n\t\t\t",62],["T_VARIABLE","$sort_order",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",64],["T_VARIABLE","$results",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","model_extension_extension",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getExtensions",66],"(",["T_CONSTANT_ENCAPSED_STRING","'total'",66],")",";",["T_WHITESPACE","\n\n\t\t\t",66],["T_FOREACH","foreach",68],["T_WHITESPACE"," ",68],"(",["T_VARIABLE","$results",68],["T_WHITESPACE"," ",68],["T_AS","as",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$key",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$value",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t",68],["T_VARIABLE","$sort_order",69],"[",["T_VARIABLE","$key",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","config",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_VARIABLE","$value",69],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",69],"]",["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'_sort_order'",69],")",";",["T_WHITESPACE","\n\t\t\t",69],"}",["T_WHITESPACE","\n\n\t\t\t",70],["T_STRING","array_multisort",72],"(",["T_VARIABLE","$sort_order",72],",",["T_WHITESPACE"," ",72],["T_STRING","SORT_ASC",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$results",72],")",";",["T_WHITESPACE","\n\n\t\t\t",72],["T_VARIABLE","$klarna_tax",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",74],["T_FOREACH","foreach",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$results",76],["T_WHITESPACE"," ",76],["T_AS","as",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$result",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t\t",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","config",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_VARIABLE","$result",77],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",77],"]",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'_status'",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t\t",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","load",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","model",78],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/'",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_VARIABLE","$result",78],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",78],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",78],["T_VARIABLE","$taxes",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t\n\t\t\t\t\t",80],["T_COMMENT","\/\/ We have to put the totals in an array so that they pass by reference.\n",82],["T_WHITESPACE","\t\t\t\t\t",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_total_'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$result",83],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",83],"]","}",["T_OBJECT_OPERATOR","->",83],["T_STRING","getTotal",83],"(",["T_ARRAY","array",83],"(",["T_VARIABLE","$total_data",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$total",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$taxes",83],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",83],["T_VARIABLE","$amount",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_LNUMBER","0",85],";",["T_WHITESPACE","\n\n\t\t\t\t\t",85],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$taxes",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$tax_id",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$value",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",87],["T_VARIABLE","$amount",88],["T_WHITESPACE"," ",88],["T_PLUS_EQUAL","+=",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$value",88],";",["T_WHITESPACE","\n\t\t\t\t\t",88],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",89],["T_VARIABLE","$klarna_tax",91],"[",["T_VARIABLE","$result",91],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",91],"]","]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$amount",91],";",["T_WHITESPACE","\n\t\t\t\t",91],"}",["T_WHITESPACE","\n\t\t\t",92],"}",["T_WHITESPACE","\n\n\t\t\t",93],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$total_data",95],["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$key",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$value",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n\t\t\t\t",95],["T_VARIABLE","$sort_order",96],"[",["T_VARIABLE","$key",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$value",96],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",96],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",96],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_ISSET","isset",98],"(",["T_VARIABLE","$klarna_tax",98],"[",["T_VARIABLE","$value",98],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",98],"]","]",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n\t\t\t\t\t",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$klarna_tax",99],"[",["T_VARIABLE","$value",99],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",99],"]","]",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",99],["T_VARIABLE","$total_data",100],"[",["T_VARIABLE","$key",100],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","abs",100],"(",["T_VARIABLE","$klarna_tax",100],"[",["T_VARIABLE","$value",100],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",100],"]","]",["T_WHITESPACE"," ",100],"\/",["T_WHITESPACE"," ",100],["T_VARIABLE","$value",100],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",100],"]",["T_WHITESPACE"," ",100],"*",["T_WHITESPACE"," ",100],["T_LNUMBER","100",100],")",";",["T_WHITESPACE","\n\t\t\t\t\t",100],"}",["T_WHITESPACE"," ",101],["T_ELSE","else",101],["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",101],["T_VARIABLE","$total_data",102],"[",["T_VARIABLE","$key",102],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_LNUMBER","0",102],";",["T_WHITESPACE","\n\t\t\t\t\t",102],"}",["T_WHITESPACE","\n\t\t\t\t",103],"}",["T_WHITESPACE"," ",104],["T_ELSE","else",104],["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t\t\t",104],["T_VARIABLE","$total_data",105],"[",["T_VARIABLE","$key",105],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",105],"]",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'0'",105],";",["T_WHITESPACE","\n\t\t\t\t",105],"}",["T_WHITESPACE","\n\t\t\t",106],"}",["T_WHITESPACE","\n\n\t\t\t",107],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","session",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","data",109],"[",["T_CONSTANT_ENCAPSED_STRING","'klarna'",109],"]","[",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","session",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","data",109],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",109],"]","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$total_data",109],";",["T_WHITESPACE","\n\n\t\t\t",109],["T_COMMENT","\/\/ Order must have identical shipping and billing address or have no shipping address at all\n",111],["T_WHITESPACE","\t\t\t",112],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","cart",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","hasShipping",112],"(",")",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],"!","(",["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_1'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_2'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_id'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_id'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_code'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_code'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country_id'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",112],"]",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",112],"]",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$order_info",112],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_iso_code_3'",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t\t\t\t",112],["T_VARIABLE","$data",113],"[",["T_CONSTANT_ENCAPSED_STRING","'error_warning'",113],"]",["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","language",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","get",113],"(",["T_CONSTANT_ENCAPSED_STRING","'error_address_match'",113],")",";",["T_WHITESPACE","\n\t\t\t",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t\t\t",114],["T_VARIABLE","$data",115],"[",["T_CONSTANT_ENCAPSED_STRING","'error_warning'",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","''",115],";",["T_WHITESPACE","\n\t\t\t",115],"}",["T_WHITESPACE","\n\n\t\t\t",116],["T_VARIABLE","$klarna_invoice",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","config",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","get",118],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_invoice'",118],")",";",["T_WHITESPACE","\n\n\t\t\t",118],["T_VARIABLE","$data",120],"[",["T_CONSTANT_ENCAPSED_STRING","'merchant'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$klarna_invoice",120],"[",["T_VARIABLE","$order_info",120],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",120],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'merchant'",120],"]",";",["T_WHITESPACE","\n\t\t\t",120],["T_VARIABLE","$data",121],"[",["T_CONSTANT_ENCAPSED_STRING","'phone_number'",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$order_info",121],"[",["T_CONSTANT_ENCAPSED_STRING","'telephone'",121],"]",";",["T_WHITESPACE","\n\n\t\t\t",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$order_info",123],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",123],"]",["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'DEU'",123],["T_WHITESPACE"," ",123],["T_BOOLEAN_OR","||",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$order_info",123],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",123],"]",["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'NLD'",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n\t\t\t\t",123],["T_VARIABLE","$address",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","splitAddress",124],"(",["T_VARIABLE","$order_info",124],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",124],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",124],["T_VARIABLE","$data",126],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$address",126],"[",["T_LNUMBER","0",126],"]",";",["T_WHITESPACE","\n\t\t\t\t",126],["T_VARIABLE","$data",127],"[",["T_CONSTANT_ENCAPSED_STRING","'street_number'",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$address",127],"[",["T_LNUMBER","1",127],"]",";",["T_WHITESPACE","\n\t\t\t\t",127],["T_VARIABLE","$data",128],"[",["T_CONSTANT_ENCAPSED_STRING","'street_extension'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$address",128],"[",["T_LNUMBER","2",128],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",128],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$order_info",130],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",130],"]",["T_WHITESPACE"," ",130],["T_IS_EQUAL","==",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'DEU'",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n\t\t\t\t\t",130],["T_VARIABLE","$data",131],"[",["T_CONSTANT_ENCAPSED_STRING","'street_number'",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","trim",131],"(",["T_VARIABLE","$address",131],"[",["T_LNUMBER","1",131],"]",["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","' '",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$address",131],"[",["T_LNUMBER","2",131],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",131],"}",["T_WHITESPACE","\n\t\t\t",132],"}",["T_WHITESPACE"," ",133],["T_ELSE","else",133],["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t\t\t",133],["T_VARIABLE","$data",134],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","''",134],";",["T_WHITESPACE","\n\t\t\t\t",134],["T_VARIABLE","$data",135],"[",["T_CONSTANT_ENCAPSED_STRING","'street_number'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","''",135],";",["T_WHITESPACE","\n\t\t\t\t",135],["T_VARIABLE","$data",136],"[",["T_CONSTANT_ENCAPSED_STRING","'street_extension'",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],";",["T_WHITESPACE","\n\t\t\t",136],"}",["T_WHITESPACE","\n\n\t\t\t",137],["T_VARIABLE","$data",139],"[",["T_CONSTANT_ENCAPSED_STRING","'company'",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$order_info",139],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_company'",139],"]",";",["T_WHITESPACE","\n\t\t\t",139],["T_VARIABLE","$data",140],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",140],"]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$order_info",140],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_2'",140],"]",";",["T_WHITESPACE","\n\t\t\t",140],["T_VARIABLE","$data",141],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$order_info",141],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",141],"]",";",["T_WHITESPACE","\n\n\t\t\t",141],["T_COMMENT","\/\/ Get the invoice fee\n",143],["T_WHITESPACE","\t\t\t",144],["T_VARIABLE","$query",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","db",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","query",144],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `value` FROM `\"",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_STRING","DB_PREFIX",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","\"order_total` WHERE `order_id` = \"",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_INT_CAST","(int)",144],["T_VARIABLE","$order_info",144],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",144],"]",["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","\" AND `code` = 'klarna_fee'\"",144],")",";",["T_WHITESPACE","\n\n\t\t\t",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","num_rows",146],["T_WHITESPACE"," ",146],["T_BOOLEAN_AND","&&",146],["T_WHITESPACE"," ",146],"!",["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","row",146],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",146],"]",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t\t\t",146],["T_VARIABLE","$data",147],"[",["T_CONSTANT_ENCAPSED_STRING","'klarna_fee'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$query",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","row",147],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",147],"]",";",["T_WHITESPACE","\n\t\t\t",147],"}",["T_WHITESPACE"," ",148],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t\t",148],["T_VARIABLE","$data",149],"[",["T_CONSTANT_ENCAPSED_STRING","'klarna_fee'",149],"]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","''",149],";",["T_WHITESPACE","\n\t\t\t",149],"}",["T_WHITESPACE","\n\n\t\t\t",150],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","load",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","view",152],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/klarna_invoice'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$data",152],")",";",["T_WHITESPACE","\n\t\t",152],"}",["T_WHITESPACE","\n\t",153],"}",["T_WHITESPACE","\n\n\t",154],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","send",156],"(",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","load",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","language",157],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/klarna_invoice'",157],")",";",["T_WHITESPACE","\n\n\t\t",157],["T_VARIABLE","$json",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",";",["T_WHITESPACE","\n\n\t\t",159],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","load",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","model",161],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",161],")",";",["T_WHITESPACE","\n\n\t\t",161],["T_VARIABLE","$order_info",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","model_checkout_order",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getOrder",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","session",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","data",163],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",163],"]",")",";",["T_WHITESPACE","\n\n\t\t",163],["T_COMMENT","\/\/ Order must have identical shipping and billing address or have no shipping address at all\n",165],["T_WHITESPACE","\t\t",166],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$order_info",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t\t",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$order_info",167],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",167],"]",["T_WHITESPACE"," ",167],["T_IS_EQUAL","==",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'DEU'",167],["T_WHITESPACE"," ",167],["T_BOOLEAN_AND","&&",167],["T_WHITESPACE"," ",167],["T_EMPTY","empty",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","request",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","post",167],"[",["T_CONSTANT_ENCAPSED_STRING","'deu_terms'",167],"]",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n\t\t\t\t",167],["T_VARIABLE","$json",168],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","language",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","get",168],"(",["T_CONSTANT_ENCAPSED_STRING","'error_deu_terms'",168],")",";",["T_WHITESPACE","\n\t\t\t",168],"}",["T_WHITESPACE","\n\n\t\t\t",169],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","cart",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","hasShipping",171],"(",")",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],"!","(",["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_1'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_2'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_id'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_id'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_code'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_code'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country_id'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",171],"]",["T_WHITESPACE"," ",171],["T_BOOLEAN_AND","&&",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",171],"]",["T_WHITESPACE"," ",171],["T_IS_EQUAL","==",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$order_info",171],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_iso_code_3'",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t\t",171],["T_VARIABLE","$json",172],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","language",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","get",172],"(",["T_CONSTANT_ENCAPSED_STRING","'error_address_match'",172],")",";",["T_WHITESPACE","\n\t\t\t",172],"}",["T_WHITESPACE","\n\n\t\t\t",173],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_VARIABLE","$json",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n\t\t\t\t",175],["T_VARIABLE","$klarna_invoice",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","config",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","get",176],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_invoice'",176],")",";",["T_WHITESPACE","\n\n\t\t\t\t",176],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$klarna_invoice",178],"[",["T_VARIABLE","$order_info",178],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",178],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'server'",178],"]",["T_WHITESPACE"," ",178],["T_IS_EQUAL","==",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'live'",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n\t\t\t\t\t",178],["T_VARIABLE","$url",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/payment.klarna.com\/'",179],";",["T_WHITESPACE","\n\t\t\t\t",179],"}",["T_WHITESPACE"," ",180],["T_ELSE","else",180],["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n\t\t\t\t\t",180],["T_VARIABLE","$url",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/payment.testdrive.klarna.com\/'",181],";",["T_WHITESPACE","\n\t\t\t\t",181],"}",["T_WHITESPACE","\n\n\t\t\t\t",182],["T_VARIABLE","$country_to_currency",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_ARRAY","array",184],"(",["T_WHITESPACE","\n\t\t\t\t\t",184],["T_CONSTANT_ENCAPSED_STRING","'NOR'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'NOK'",185],",",["T_WHITESPACE","\n\t\t\t\t\t",185],["T_CONSTANT_ENCAPSED_STRING","'SWE'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'SEK'",186],",",["T_WHITESPACE","\n\t\t\t\t\t",186],["T_CONSTANT_ENCAPSED_STRING","'FIN'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'EUR'",187],",",["T_WHITESPACE","\n\t\t\t\t\t",187],["T_CONSTANT_ENCAPSED_STRING","'DNK'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'DKK'",188],",",["T_WHITESPACE","\n\t\t\t\t\t",188],["T_CONSTANT_ENCAPSED_STRING","'DEU'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'EUR'",189],",",["T_WHITESPACE","\n\t\t\t\t\t",189],["T_CONSTANT_ENCAPSED_STRING","'NLD'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'EUR'",190],["T_WHITESPACE","\n\t\t\t\t",190],")",";",["T_WHITESPACE","\n\n\t\t\t\t",191],["T_SWITCH","switch",193],["T_WHITESPACE"," ",193],"(",["T_VARIABLE","$order_info",193],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",193],"]",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n\t\t\t\t\t",193],["T_COMMENT","\/\/ Sweden\n",194],["T_WHITESPACE","\t\t\t\t\t",195],["T_CASE","case",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'SWE'",195],":",["T_WHITESPACE","\n\t\t\t\t\t\t",195],["T_VARIABLE","$country",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","209",196],";",["T_WHITESPACE","\n\t\t\t\t\t\t",196],["T_VARIABLE","$language",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_LNUMBER","138",197],";",["T_WHITESPACE","\n\t\t\t\t\t\t",197],["T_VARIABLE","$encoding",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_LNUMBER","2",198],";",["T_WHITESPACE","\n\t\t\t\t\t\t",198],["T_VARIABLE","$currency",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_LNUMBER","0",199],";",["T_WHITESPACE","\n\t\t\t\t\t\t",199],["T_BREAK","break",200],";",["T_WHITESPACE","\n\t\t\t\t\t",200],["T_COMMENT","\/\/ Finland\n",201],["T_WHITESPACE","\t\t\t\t\t",202],["T_CASE","case",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'FIN'",202],":",["T_WHITESPACE","\n\t\t\t\t\t\t",202],["T_VARIABLE","$country",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_LNUMBER","73",203],";",["T_WHITESPACE","\n\t\t\t\t\t\t",203],["T_VARIABLE","$language",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_LNUMBER","37",204],";",["T_WHITESPACE","\n\t\t\t\t\t\t",204],["T_VARIABLE","$encoding",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","4",205],";",["T_WHITESPACE","\n\t\t\t\t\t\t",205],["T_VARIABLE","$currency",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_LNUMBER","2",206],";",["T_WHITESPACE","\n\t\t\t\t\t\t",206],["T_BREAK","break",207],";",["T_WHITESPACE","\n\t\t\t\t\t",207],["T_COMMENT","\/\/ Denmark\n",208],["T_WHITESPACE","\t\t\t\t\t",209],["T_CASE","case",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'DNK'",209],":",["T_WHITESPACE","\n\t\t\t\t\t\t",209],["T_VARIABLE","$country",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_LNUMBER","59",210],";",["T_WHITESPACE","\n\t\t\t\t\t\t",210],["T_VARIABLE","$language",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_LNUMBER","27",211],";",["T_WHITESPACE","\n\t\t\t\t\t\t",211],["T_VARIABLE","$encoding",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_LNUMBER","5",212],";",["T_WHITESPACE","\n\t\t\t\t\t\t",212],["T_VARIABLE","$currency",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_LNUMBER","3",213],";",["T_WHITESPACE","\n\t\t\t\t\t\t",213],["T_BREAK","break",214],";",["T_WHITESPACE","\n\t\t\t\t\t",214],["T_COMMENT","\/\/ Norway\n",215],["T_WHITESPACE","\t\t\t\t\t",216],["T_CASE","case",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'NOR'",216],":",["T_WHITESPACE","\n\t\t\t\t\t\t",216],["T_VARIABLE","$country",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_LNUMBER","164",217],";",["T_WHITESPACE","\n\t\t\t\t\t\t",217],["T_VARIABLE","$language",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_LNUMBER","97",218],";",["T_WHITESPACE","\n\t\t\t\t\t\t",218],["T_VARIABLE","$encoding",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_LNUMBER","3",219],";",["T_WHITESPACE","\n\t\t\t\t\t\t",219],["T_VARIABLE","$currency",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_LNUMBER","1",220],";",["T_WHITESPACE","\n\t\t\t\t\t\t",220],["T_BREAK","break",221],";",["T_WHITESPACE","\n\t\t\t\t\t",221],["T_COMMENT","\/\/ Germany\n",222],["T_WHITESPACE","\t\t\t\t\t",223],["T_CASE","case",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'DEU'",223],":",["T_WHITESPACE","\n\t\t\t\t\t\t",223],["T_VARIABLE","$country",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_LNUMBER","81",224],";",["T_WHITESPACE","\n\t\t\t\t\t\t",224],["T_VARIABLE","$language",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_LNUMBER","28",225],";",["T_WHITESPACE","\n\t\t\t\t\t\t",225],["T_VARIABLE","$encoding",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_LNUMBER","6",226],";",["T_WHITESPACE","\n\t\t\t\t\t\t",226],["T_VARIABLE","$currency",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_LNUMBER","2",227],";",["T_WHITESPACE","\n\t\t\t\t\t\t",227],["T_BREAK","break",228],";",["T_WHITESPACE","\n\t\t\t\t\t",228],["T_COMMENT","\/\/ Netherlands\n",229],["T_WHITESPACE","\t\t\t\t\t",230],["T_CASE","case",230],["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'NLD'",230],":",["T_WHITESPACE","\n\t\t\t\t\t\t",230],["T_VARIABLE","$country",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_LNUMBER","154",231],";",["T_WHITESPACE","\n\t\t\t\t\t\t",231],["T_VARIABLE","$language",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_LNUMBER","101",232],";",["T_WHITESPACE","\n\t\t\t\t\t\t",232],["T_VARIABLE","$encoding",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_LNUMBER","7",233],";",["T_WHITESPACE","\n\t\t\t\t\t\t",233],["T_VARIABLE","$currency",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_LNUMBER","2",234],";",["T_WHITESPACE","\n\t\t\t\t\t\t",234],["T_BREAK","break",235],";",["T_WHITESPACE","\n\t\t\t\t",235],"}",["T_WHITESPACE","\n\n\t\t\t\t",236],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_ISSET","isset",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","request",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","post",238],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n\t\t\t\t\t",238],["T_VARIABLE","$street",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","request",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","post",239],"[",["T_CONSTANT_ENCAPSED_STRING","'street'",239],"]",";",["T_WHITESPACE","\n\t\t\t\t",239],"}",["T_WHITESPACE"," ",240],["T_ELSE","else",240],["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t\t\t\t",240],["T_VARIABLE","$street",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$order_info",241],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",241],"]",";",["T_WHITESPACE","\n\t\t\t\t",241],"}",["T_WHITESPACE","\n\n\t\t\t\t",242],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_ISSET","isset",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","request",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","post",244],"[",["T_CONSTANT_ENCAPSED_STRING","'house_no'",244],"]",")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n\t\t\t\t\t",244],["T_VARIABLE","$house_no",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","request",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","post",245],"[",["T_CONSTANT_ENCAPSED_STRING","'house_no'",245],"]",";",["T_WHITESPACE","\n\t\t\t\t",245],"}",["T_WHITESPACE"," ",246],["T_ELSE","else",246],["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n\t\t\t\t\t",246],["T_VARIABLE","$house_no",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","''",247],";",["T_WHITESPACE","\n\t\t\t\t",247],"}",["T_WHITESPACE","\n\n\t\t\t\t",248],["T_IF","if",250],["T_WHITESPACE"," ",250],"(",["T_ISSET","isset",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","request",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","post",250],"[",["T_CONSTANT_ENCAPSED_STRING","'house_ext'",250],"]",")",")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n\t\t\t\t\t",250],["T_VARIABLE","$house_ext",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","request",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","post",251],"[",["T_CONSTANT_ENCAPSED_STRING","'house_ext'",251],"]",";",["T_WHITESPACE","\n\t\t\t\t",251],"}",["T_WHITESPACE"," ",252],["T_ELSE","else",252],["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t\t\t\t",252],["T_VARIABLE","$house_ext",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","''",253],";",["T_WHITESPACE","\n\t\t\t\t",253],"}",["T_WHITESPACE","\n\n\t\t\t\t",254],["T_VARIABLE","$address",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",["T_WHITESPACE","\n\t\t\t\t\t",256],["T_CONSTANT_ENCAPSED_STRING","'email'",257],["T_WHITESPACE","           ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$order_info",257],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",257],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",257],["T_CONSTANT_ENCAPSED_STRING","'telno'",258],["T_WHITESPACE","           ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","request",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","post",258],"[",["T_CONSTANT_ENCAPSED_STRING","'phone_no'",258],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",258],["T_CONSTANT_ENCAPSED_STRING","'cellno'",259],["T_WHITESPACE","          ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","''",259],",",["T_WHITESPACE","\n\t\t\t\t\t",259],["T_CONSTANT_ENCAPSED_STRING","'fname'",260],["T_WHITESPACE","           ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$order_info",260],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",260],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",260],["T_CONSTANT_ENCAPSED_STRING","'lname'",261],["T_WHITESPACE","           ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$order_info",261],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",261],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",261],["T_CONSTANT_ENCAPSED_STRING","'company'",262],["T_WHITESPACE","         ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$order_info",262],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_company'",262],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",262],["T_CONSTANT_ENCAPSED_STRING","'careof'",263],["T_WHITESPACE","          ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","''",263],",",["T_WHITESPACE","\n\t\t\t\t\t",263],["T_CONSTANT_ENCAPSED_STRING","'street'",264],["T_WHITESPACE","          ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$street",264],",",["T_WHITESPACE","\n\t\t\t\t\t",264],["T_CONSTANT_ENCAPSED_STRING","'house_number'",265],["T_WHITESPACE","    ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$house_no",265],",",["T_WHITESPACE","\n\t\t\t\t\t",265],["T_CONSTANT_ENCAPSED_STRING","'house_extension'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$house_ext",266],",",["T_WHITESPACE","\n\t\t\t\t\t",266],["T_CONSTANT_ENCAPSED_STRING","'zip'",267],["T_WHITESPACE","             ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$order_info",267],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",267],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",267],["T_CONSTANT_ENCAPSED_STRING","'city'",268],["T_WHITESPACE","            ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$order_info",268],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",268],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",268],["T_CONSTANT_ENCAPSED_STRING","'country'",269],["T_WHITESPACE","         ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$country",269],",",["T_WHITESPACE","\n\t\t\t\t",269],")",";",["T_WHITESPACE","\n\n\t\t\t\t",270],["T_VARIABLE","$product_query",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","db",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","query",272],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT `name`, `model`, `price`, `quantity`, `tax` \/ `price` * 100 AS 'tax_rate' FROM `\"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_STRING","DB_PREFIX",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","\"order_product` WHERE `order_id` = \"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_INT_CAST","(int)",272],["T_VARIABLE","$order_info",272],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",272],"]",["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","\" UNION ALL SELECT '', `code`, `amount`, '1', 0.00 FROM `\"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_STRING","DB_PREFIX",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","\"order_voucher` WHERE `order_id` = \"",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_INT_CAST","(int)",272],["T_VARIABLE","$order_info",272],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",272],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",272],["T_FOREACH","foreach",274],["T_WHITESPACE"," ",274],"(",["T_VARIABLE","$product_query",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","rows",274],["T_WHITESPACE"," ",274],["T_AS","as",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$product",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n\t\t\t\t\t",274],["T_VARIABLE","$goods_list",275],"[","]",["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_ARRAY","array",275],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",275],["T_CONSTANT_ENCAPSED_STRING","'qty'",276],["T_WHITESPACE","   ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_INT_CAST","(int)",276],["T_VARIABLE","$product",276],"[",["T_CONSTANT_ENCAPSED_STRING","'quantity'",276],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t",276],["T_CONSTANT_ENCAPSED_STRING","'goods'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",277],["T_CONSTANT_ENCAPSED_STRING","'artno'",278],["T_WHITESPACE","    ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$product",278],"[",["T_CONSTANT_ENCAPSED_STRING","'model'",278],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",278],["T_CONSTANT_ENCAPSED_STRING","'title'",279],["T_WHITESPACE","    ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$product",279],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",279],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",279],["T_CONSTANT_ENCAPSED_STRING","'price'",280],["T_WHITESPACE","    ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_INT_CAST","(int)",280],["T_STRING","str_replace",280],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","''",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","currency",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","format",280],"(",["T_VARIABLE","$product",280],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",280],"]",",",["T_WHITESPACE"," ",280],["T_VARIABLE","$country_to_currency",280],"[",["T_VARIABLE","$order_info",280],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",280],"]","]",",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","''",280],",",["T_WHITESPACE"," ",280],["T_STRING","false",280],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",280],["T_CONSTANT_ENCAPSED_STRING","'vat'",281],["T_WHITESPACE","      ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],["T_DOUBLE_CAST","(float)",281],["T_VARIABLE","$product",281],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",281],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",281],["T_CONSTANT_ENCAPSED_STRING","'discount'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_DNUMBER","0.0",282],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",282],["T_CONSTANT_ENCAPSED_STRING","'flags'",283],["T_WHITESPACE","    ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],["T_WHITESPACE","\n\t\t\t\t\t\t",283],")",["T_WHITESPACE","\n\t\t\t\t\t",284],")",";",["T_WHITESPACE","\n\t\t\t\t",285],"}",["T_WHITESPACE","\n\n\t\t\t\t",286],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_ISSET","isset",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","session",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","data",288],"[",["T_CONSTANT_ENCAPSED_STRING","'klarna'",288],"]","[",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","session",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","data",288],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",288],"]","]",")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n\t\t\t\t\t",288],["T_VARIABLE","$totals",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","session",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","data",289],"[",["T_CONSTANT_ENCAPSED_STRING","'klarna'",289],"]","[",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","session",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","data",289],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",289],"]","]",";",["T_WHITESPACE","\n\t\t\t\t",289],"}",["T_WHITESPACE"," ",290],["T_ELSE","else",290],["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n\t\t\t\t\t",290],["T_VARIABLE","$totals",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",291],"}",["T_WHITESPACE","\n\n\t\t\t\t",292],["T_FOREACH","foreach",294],["T_WHITESPACE"," ",294],"(",["T_VARIABLE","$totals",294],["T_WHITESPACE"," ",294],["T_AS","as",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$total",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n\t\t\t\t\t",294],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$total",295],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",295],"]",["T_WHITESPACE"," ",295],["T_IS_NOT_EQUAL","!=",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'sub_total'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$total",295],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",295],"]",["T_WHITESPACE"," ",295],["T_IS_NOT_EQUAL","!=",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'tax'",295],["T_WHITESPACE"," ",295],["T_BOOLEAN_AND","&&",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$total",295],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",295],"]",["T_WHITESPACE"," ",295],["T_IS_NOT_EQUAL","!=",295],["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'total'",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",295],["T_VARIABLE","$goods_list",296],"[","]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_ARRAY","array",296],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",296],["T_CONSTANT_ENCAPSED_STRING","'qty'",297],["T_WHITESPACE","   ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_LNUMBER","1",297],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",297],["T_CONSTANT_ENCAPSED_STRING","'goods'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",298],["T_CONSTANT_ENCAPSED_STRING","'artno'",299],["T_WHITESPACE","    ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","''",299],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",299],["T_CONSTANT_ENCAPSED_STRING","'title'",300],["T_WHITESPACE","    ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$total",300],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",300],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",300],["T_CONSTANT_ENCAPSED_STRING","'price'",301],["T_WHITESPACE","    ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_INT_CAST","(int)",301],["T_STRING","str_replace",301],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",301],",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","''",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","currency",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","format",301],"(",["T_VARIABLE","$total",301],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",301],"]",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$country_to_currency",301],"[",["T_VARIABLE","$order_info",301],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",301],"]","]",",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","''",301],",",["T_WHITESPACE"," ",301],["T_STRING","false",301],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",301],["T_CONSTANT_ENCAPSED_STRING","'vat'",302],["T_WHITESPACE","      ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_DOUBLE_CAST","(float)",302],["T_VARIABLE","$total",302],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_rate'",302],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",302],["T_CONSTANT_ENCAPSED_STRING","'discount'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_DNUMBER","0.0",303],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",303],["T_CONSTANT_ENCAPSED_STRING","'flags'",304],["T_WHITESPACE","    ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_LNUMBER","0",304],["T_WHITESPACE","\n\t\t\t\t\t\t\t",304],")",["T_WHITESPACE","\n\t\t\t\t\t\t",305],")",";",["T_WHITESPACE","\n\t\t\t\t\t",306],"}",["T_WHITESPACE","\n\t\t\t\t",307],"}",["T_WHITESPACE","\n\n\t\t\t\t",308],["T_VARIABLE","$digest",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","''",310],";",["T_WHITESPACE","\n\n\t\t\t\t",310],["T_FOREACH","foreach",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$goods_list",312],["T_WHITESPACE"," ",312],["T_AS","as",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$goods",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n\t\t\t\t\t",312],["T_VARIABLE","$digest",313],["T_WHITESPACE"," ",313],["T_CONCAT_EQUAL",".=",313],["T_WHITESPACE"," ",313],["T_STRING","utf8_decode",313],"(",["T_STRING","htmlspecialchars",313],"(",["T_STRING","html_entity_decode",313],"(",["T_VARIABLE","$goods",313],"[",["T_CONSTANT_ENCAPSED_STRING","'goods'",313],"]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",313],"]",",",["T_WHITESPACE"," ",313],["T_STRING","ENT_COMPAT",313],",",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","\"UTF-8\"",313],")",")",")",["T_WHITESPACE"," ",313],".",["T_WHITESPACE"," ",313],["T_CONSTANT_ENCAPSED_STRING","':'",313],";",["T_WHITESPACE","\n\t\t\t\t",313],"}",["T_WHITESPACE","\n\n\t\t\t\t",314],["T_VARIABLE","$digest",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","base64_encode",316],"(",["T_STRING","pack",316],"(",["T_CONSTANT_ENCAPSED_STRING","'H*'",316],",",["T_WHITESPACE"," ",316],["T_STRING","hash",316],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$digest",316],["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_VARIABLE","$klarna_invoice",316],"[",["T_VARIABLE","$order_info",316],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",316],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'secret'",316],"]",")",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",316],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_ISSET","isset",318],"(",["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","request",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","post",318],"[",["T_CONSTANT_ENCAPSED_STRING","'pno'",318],"]",")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t\t\t\t",318],["T_VARIABLE","$pno",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","request",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","post",319],"[",["T_CONSTANT_ENCAPSED_STRING","'pno'",319],"]",";",["T_WHITESPACE","\n\t\t\t\t",319],"}",["T_WHITESPACE"," ",320],["T_ELSE","else",320],["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n\t\t\t\t\t",320],["T_VARIABLE","$pno",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","sprintf",321],"(",["T_CONSTANT_ENCAPSED_STRING","'%02d'",321],",",["T_WHITESPACE"," ",321],["T_INT_CAST","(int)",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","request",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","post",321],"[",["T_CONSTANT_ENCAPSED_STRING","'pno_day'",321],"]",")",["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_STRING","sprintf",321],"(",["T_CONSTANT_ENCAPSED_STRING","'%02d'",321],",",["T_WHITESPACE"," ",321],["T_INT_CAST","(int)",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","request",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","post",321],"[",["T_CONSTANT_ENCAPSED_STRING","'pno_month'",321],"]",")",["T_WHITESPACE"," ",321],".",["T_WHITESPACE"," ",321],["T_INT_CAST","(int)",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","request",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","post",321],"[",["T_CONSTANT_ENCAPSED_STRING","'pno_year'",321],"]",";",["T_WHITESPACE","\n\t\t\t\t",321],"}",["T_WHITESPACE","\n\n\t\t\t\t",322],["T_VARIABLE","$pclass",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],"-",["T_LNUMBER","1",324],";",["T_WHITESPACE","\n\n\t\t\t\t",324],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_ISSET","isset",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","request",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","post",326],"[",["T_CONSTANT_ENCAPSED_STRING","'gender'",326],"]",")",["T_WHITESPACE"," ",326],["T_BOOLEAN_AND","&&",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$order_info",326],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",326],"]",["T_WHITESPACE"," ",326],["T_IS_EQUAL","==",326],["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'DEU'",326],["T_WHITESPACE"," ",326],["T_BOOLEAN_OR","||",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$order_info",326],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",326],"]",["T_WHITESPACE"," ",326],["T_IS_EQUAL","==",326],["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'NLD'",326],")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n\t\t\t\t\t",326],["T_VARIABLE","$gender",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_INT_CAST","(int)",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","request",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","post",327],"[",["T_CONSTANT_ENCAPSED_STRING","'gender'",327],"]",";",["T_WHITESPACE","\n\t\t\t\t",327],"}",["T_WHITESPACE"," ",328],["T_ELSE","else",328],["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n\t\t\t\t\t",328],["T_VARIABLE","$gender",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","''",329],";",["T_WHITESPACE","\n\t\t\t\t",329],"}",["T_WHITESPACE","\n\n\t\t\t\t",330],["T_VARIABLE","$transaction",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_ARRAY","array",332],"(",["T_WHITESPACE","\n\t\t\t\t\t",332],["T_CONSTANT_ENCAPSED_STRING","'4.1'",333],",",["T_WHITESPACE","\n\t\t\t\t\t",333],["T_CONSTANT_ENCAPSED_STRING","'API:OPENCART:'",334],["T_WHITESPACE"," ",334],".",["T_WHITESPACE"," ",334],["T_STRING","VERSION",334],",",["T_WHITESPACE","\n\t\t\t\t\t",334],["T_VARIABLE","$pno",335],",",["T_WHITESPACE","\n\t\t\t\t\t",335],["T_VARIABLE","$gender",336],",",["T_WHITESPACE","\n\t\t\t\t\t",336],["T_CONSTANT_ENCAPSED_STRING","''",337],",",["T_WHITESPACE","\n\t\t\t\t\t",337],["T_CONSTANT_ENCAPSED_STRING","''",338],",",["T_WHITESPACE","\n\t\t\t\t\t",338],["T_STRING_CAST","(string)",339],["T_VARIABLE","$order_info",339],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",339],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",339],["T_CONSTANT_ENCAPSED_STRING","''",340],",",["T_WHITESPACE","\n\t\t\t\t\t",340],["T_VARIABLE","$address",341],",",["T_WHITESPACE","\n\t\t\t\t\t",341],["T_VARIABLE","$address",342],",",["T_WHITESPACE","\n\t\t\t\t\t",342],["T_VARIABLE","$order_info",343],"[",["T_CONSTANT_ENCAPSED_STRING","'ip'",343],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",343],["T_LNUMBER","0",344],",",["T_WHITESPACE","\n\t\t\t\t\t",344],["T_VARIABLE","$currency",345],",",["T_WHITESPACE","\n\t\t\t\t\t",345],["T_VARIABLE","$country",346],",",["T_WHITESPACE","\n\t\t\t\t\t",346],["T_VARIABLE","$language",347],",",["T_WHITESPACE","\n\t\t\t\t\t",347],["T_INT_CAST","(int)",348],["T_VARIABLE","$klarna_invoice",348],"[",["T_VARIABLE","$order_info",348],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",348],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'merchant'",348],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",348],["T_VARIABLE","$digest",349],",",["T_WHITESPACE","\n\t\t\t\t\t",349],["T_VARIABLE","$encoding",350],",",["T_WHITESPACE","\n\t\t\t\t\t",350],["T_VARIABLE","$pclass",351],",",["T_WHITESPACE","\n\t\t\t\t\t",351],["T_VARIABLE","$goods_list",352],",",["T_WHITESPACE","\n\t\t\t\t\t",352],["T_VARIABLE","$order_info",353],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",353],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",353],["T_ARRAY","array",354],"(",["T_CONSTANT_ENCAPSED_STRING","'delay_adjust'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_LNUMBER","1",354],")",",",["T_WHITESPACE","\n\t\t\t\t\t",354],["T_ARRAY","array",355],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t",355],["T_ARRAY","array",356],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t",356],["T_ARRAY","array",357],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t",357],["T_ARRAY","array",358],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t",358],["T_ARRAY","array",359],"(",")",["T_WHITESPACE","\n\t\t\t\t",359],")",";",["T_WHITESPACE","\n\n\t\t\t\t",360],["T_VARIABLE","$xml",362],["T_WHITESPACE","  ",362],"=",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'<methodCall>'",362],";",["T_WHITESPACE","\n\t\t\t\t",362],["T_VARIABLE","$xml",363],["T_WHITESPACE"," ",363],["T_CONCAT_EQUAL",".=",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'  <methodName>add_invoice<\/methodName>'",363],";",["T_WHITESPACE","\n\t\t\t\t",363],["T_VARIABLE","$xml",364],["T_WHITESPACE"," ",364],["T_CONCAT_EQUAL",".=",364],["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'  <params>'",364],";",["T_WHITESPACE","\n\n\t\t\t\t",364],["T_FOREACH","foreach",366],["T_WHITESPACE"," ",366],"(",["T_VARIABLE","$transaction",366],["T_WHITESPACE"," ",366],["T_AS","as",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$parameter",366],")",["T_WHITESPACE","  ",366],"{",["T_WHITESPACE","\n\t\t\t\t\t",366],["T_VARIABLE","$xml",367],["T_WHITESPACE"," ",367],["T_CONCAT_EQUAL",".=",367],["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'    <param><value>'",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","constructXmlrpc",367],"(",["T_VARIABLE","$parameter",367],")",["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'<\/value><\/param>'",367],";",["T_WHITESPACE","\n\t\t\t\t",367],"}",["T_WHITESPACE","\n\n\t\t\t\t",368],["T_VARIABLE","$xml",370],["T_WHITESPACE"," ",370],["T_CONCAT_EQUAL",".=",370],["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'  <\/params>'",370],";",["T_WHITESPACE","\n\t\t\t\t",370],["T_VARIABLE","$xml",371],["T_WHITESPACE"," ",371],["T_CONCAT_EQUAL",".=",371],["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'<\/methodCall>'",371],";",["T_WHITESPACE","\n\n\t\t\t\t",371],["T_VARIABLE","$header",373],["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_ARRAY","array",373],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",373],["T_VARIABLE","$header",375],"[","]",["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/xml'",375],";",["T_WHITESPACE","\n\t\t\t\t",375],["T_VARIABLE","$header",376],"[","]",["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'Content-Length: '",376],["T_WHITESPACE"," ",376],".",["T_WHITESPACE"," ",376],["T_STRING","strlen",376],"(",["T_VARIABLE","$xml",376],")",";",["T_WHITESPACE","\n\n\t\t\t\t",376],["T_VARIABLE","$curl",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","curl_init",378],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",378],["T_STRING","curl_setopt",380],"(",["T_VARIABLE","$curl",380],",",["T_WHITESPACE"," ",380],["T_STRING","CURLOPT_URL",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$url",380],")",";",["T_WHITESPACE","\n\t\t\t\t",380],["T_STRING","curl_setopt",381],"(",["T_VARIABLE","$curl",381],",",["T_WHITESPACE"," ",381],["T_STRING","CURLOPT_SSL_VERIFYPEER",381],",",["T_WHITESPACE"," ",381],["T_STRING","false",381],")",";",["T_WHITESPACE","\n\t\t\t\t",381],["T_STRING","curl_setopt",382],"(",["T_VARIABLE","$curl",382],",",["T_WHITESPACE"," ",382],["T_STRING","CURLOPT_SSL_VERIFYHOST",382],",",["T_WHITESPACE"," ",382],["T_LNUMBER","1",382],")",";",["T_WHITESPACE","\n\t\t\t\t",382],["T_STRING","curl_setopt",383],"(",["T_VARIABLE","$curl",383],",",["T_WHITESPACE"," ",383],["T_STRING","CURLOPT_CUSTOMREQUEST",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'POST'",383],")",";",["T_WHITESPACE","\n\t\t\t\t",383],["T_STRING","curl_setopt",384],"(",["T_VARIABLE","$curl",384],",",["T_WHITESPACE"," ",384],["T_STRING","CURLOPT_RETURNTRANSFER",384],",",["T_WHITESPACE"," ",384],["T_LNUMBER","1",384],")",";",["T_WHITESPACE","\n\t\t\t\t",384],["T_STRING","curl_setopt",385],"(",["T_VARIABLE","$curl",385],",",["T_WHITESPACE"," ",385],["T_STRING","CURLOPT_HTTPHEADER",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$header",385],")",";",["T_WHITESPACE","\n\t\t\t\t",385],["T_STRING","curl_setopt",386],"(",["T_VARIABLE","$curl",386],",",["T_WHITESPACE"," ",386],["T_STRING","CURLOPT_POSTFIELDS",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$xml",386],")",";",["T_WHITESPACE","\n\n\t\t\t\t",386],["T_VARIABLE","$response",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","curl_exec",388],"(",["T_VARIABLE","$curl",388],")",";",["T_WHITESPACE","\n\n\t\t\t\t",388],["T_IF","if",390],["T_WHITESPACE"," ",390],"(",["T_STRING","curl_errno",390],"(",["T_VARIABLE","$curl",390],")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n\t\t\t\t\t",390],["T_VARIABLE","$log",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_NEW","new",391],["T_WHITESPACE"," ",391],["T_STRING","Log",391],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_invoice.log'",391],")",";",["T_WHITESPACE","\n\t\t\t\t\t",391],["T_VARIABLE","$log",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","write",392],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP Error for order #'",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_VARIABLE","$order_info",392],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",392],"]",["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'. Code: '",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_STRING","curl_errno",392],"(",["T_VARIABLE","$curl",392],")",["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","' message: '",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_STRING","curl_error",392],"(",["T_VARIABLE","$curl",392],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",392],["T_VARIABLE","$json",394],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",394],"]",["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","language",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","get",394],"(",["T_CONSTANT_ENCAPSED_STRING","'error_network'",394],")",";",["T_WHITESPACE","\n\t\t\t\t",394],"}",["T_WHITESPACE"," ",395],["T_ELSE","else",395],["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n\t\t\t\t\t",395],["T_STRING","preg_match",396],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<member><name>faultString<\\\/name><value><string>(.+)<\\\/string><\\\/value><\\\/member>\/'",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$response",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$match",396],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",396],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_ISSET","isset",398],"(",["T_VARIABLE","$match",398],"[",["T_LNUMBER","1",398],"]",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",398],["T_STRING","preg_match",399],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<member><name>faultCode<\\\/name><value><int>([0-9]+)<\\\/int><\\\/value><\\\/member>\/'",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$response",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$match2",399],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",399],["T_VARIABLE","$log",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_NEW","new",401],["T_WHITESPACE"," ",401],["T_STRING","Log",401],"(",["T_CONSTANT_ENCAPSED_STRING","'klarna_invoice.log'",401],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",401],["T_VARIABLE","$log",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","write",402],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create an invoice for order #'",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_VARIABLE","$order_info",402],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",402],"]",["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'. Message: '",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_STRING","utf8_encode",402],"(",["T_VARIABLE","$match",402],"[",["T_LNUMBER","1",402],"]",")",["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","' Code: '",402],["T_WHITESPACE"," ",402],".",["T_WHITESPACE"," ",402],["T_VARIABLE","$match2",402],"[",["T_LNUMBER","1",402],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",402],["T_VARIABLE","$json",404],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",404],"]",["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_STRING","utf8_encode",404],"(",["T_VARIABLE","$match",404],"[",["T_LNUMBER","1",404],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",404],"}",["T_WHITESPACE"," ",405],["T_ELSE","else",405],["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",405],["T_VARIABLE","$xml",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_NEW","new",406],["T_WHITESPACE"," ",406],["T_STRING","DOMDocument",406],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",406],["T_VARIABLE","$xml",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","loadXML",407],"(",["T_VARIABLE","$response",407],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",407],["T_VARIABLE","$invoice_number",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$xml",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getElementsByTagName",409],"(",["T_CONSTANT_ENCAPSED_STRING","'string'",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","item",409],"(",["T_LNUMBER","0",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","nodeValue",409],";",["T_WHITESPACE","\n\t\t\t\t\t\t",409],["T_VARIABLE","$klarna_order_status",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$xml",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getElementsByTagName",410],"(",["T_CONSTANT_ENCAPSED_STRING","'int'",410],")",["T_OBJECT_OPERATOR","->",410],["T_STRING","item",410],"(",["T_LNUMBER","0",410],")",["T_OBJECT_OPERATOR","->",410],["T_STRING","nodeValue",410],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",410],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$klarna_order_status",412],["T_WHITESPACE"," ",412],["T_IS_EQUAL","==",412],["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'1'",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",412],["T_VARIABLE","$order_status",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$klarna_invoice",413],"[",["T_VARIABLE","$order_info",413],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",413],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'accepted_status_id'",413],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",413],"}",["T_WHITESPACE"," ",414],["T_ELSEIF","elseif",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$klarna_order_status",414],["T_WHITESPACE"," ",414],["T_IS_EQUAL","==",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'2'",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",414],["T_VARIABLE","$order_status",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$klarna_invoice",415],"[",["T_VARIABLE","$order_info",415],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",415],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'pending_status_id'",415],"]",";",["T_WHITESPACE","\n\t\t\t\t\t\t",415],"}",["T_WHITESPACE"," ",416],["T_ELSE","else",416],["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",416],["T_VARIABLE","$order_status",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","config",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","get",417],"(",["T_CONSTANT_ENCAPSED_STRING","'config_order_status_id'",417],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",417],"}",["T_WHITESPACE","\n\n\t\t\t\t\t\t",418],["T_VARIABLE","$comment",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","sprintf",420],"(",["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","language",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","get",420],"(",["T_CONSTANT_ENCAPSED_STRING","'text_comment'",420],")",",",["T_WHITESPACE"," ",420],["T_VARIABLE","$invoice_number",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","config",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","get",420],"(",["T_CONSTANT_ENCAPSED_STRING","'config_currency'",420],")",",",["T_WHITESPACE"," ",420],["T_VARIABLE","$country_to_currency",420],"[",["T_VARIABLE","$order_info",420],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",420],"]","]",",",["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","currency",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","getValue",420],"(",["T_VARIABLE","$country_to_currency",420],"[",["T_VARIABLE","$order_info",420],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_iso_code_3'",420],"]","]",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",420],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","model_checkout_order",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","addOrderHistory",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","session",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","data",422],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",422],"]",",",["T_WHITESPACE"," ",422],["T_VARIABLE","$order_status",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$comment",422],",",["T_WHITESPACE"," ",422],["T_LNUMBER","1",422],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",422],["T_VARIABLE","$json",424],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",424],"]",["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","url",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","link",424],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",424],")",";",["T_WHITESPACE","\n\t\t\t\t\t",424],"}",["T_WHITESPACE","\n\t\t\t\t",425],"}",["T_WHITESPACE","\n\n\t\t\t\t",426],["T_STRING","curl_close",428],"(",["T_VARIABLE","$curl",428],")",";",["T_WHITESPACE","\n\t\t\t",428],"}",["T_WHITESPACE","\n\t\t",429],"}",["T_WHITESPACE","\n\n\t\t",430],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","response",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","addHeader",432],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",432],")",";",["T_WHITESPACE","\n\t\t",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","response",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","setOutput",433],"(",["T_STRING","json_encode",433],"(",["T_VARIABLE","$json",433],")",")",";",["T_WHITESPACE","\n\t",433],"}",["T_WHITESPACE","\n\n\t",434],["T_PRIVATE","private",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","constructXmlrpc",436],"(",["T_VARIABLE","$data",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n\t\t",436],["T_VARIABLE","$type",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","gettype",437],"(",["T_VARIABLE","$data",437],")",";",["T_WHITESPACE","\n\n\t\t",437],["T_SWITCH","switch",439],["T_WHITESPACE"," ",439],"(",["T_VARIABLE","$type",439],")",["T_WHITESPACE"," ",439],"{",["T_WHITESPACE","\n\t\t\t",439],["T_CASE","case",440],["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'boolean'",440],":",["T_WHITESPACE","\n\t\t\t\t",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$data",441],["T_WHITESPACE"," ",441],["T_IS_EQUAL","==",441],["T_WHITESPACE"," ",441],["T_STRING","true",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n\t\t\t\t\t",441],["T_VARIABLE","$value",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_LNUMBER","1",442],";",["T_WHITESPACE","\n\t\t\t\t",442],"}",["T_WHITESPACE"," ",443],["T_ELSE","else",443],["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n\t\t\t\t\t",443],["T_VARIABLE","$value",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","false",444],";",["T_WHITESPACE","\n\t\t\t\t",444],"}",["T_WHITESPACE","\n\n\t\t\t\t",445],["T_VARIABLE","$xml",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'<boolean>'",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_VARIABLE","$value",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'<\/boolean>'",447],";",["T_WHITESPACE","\n\t\t\t\t",447],["T_BREAK","break",448],";",["T_WHITESPACE","\n\t\t\t",448],["T_CASE","case",449],["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'integer'",449],":",["T_WHITESPACE","\n\t\t\t\t",449],["T_VARIABLE","$xml",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'<int>'",450],["T_WHITESPACE"," ",450],".",["T_WHITESPACE"," ",450],["T_INT_CAST","(int)",450],["T_VARIABLE","$data",450],["T_WHITESPACE"," ",450],".",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'<\/int>'",450],";",["T_WHITESPACE","\n\t\t\t\t",450],["T_BREAK","break",451],";",["T_WHITESPACE","\n\t\t\t",451],["T_CASE","case",452],["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'double'",452],":",["T_WHITESPACE","\n\t\t\t\t",452],["T_VARIABLE","$xml",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'<double>'",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_DOUBLE_CAST","(float)",453],["T_VARIABLE","$data",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'<\/double>'",453],";",["T_WHITESPACE","\n\t\t\t\t",453],["T_BREAK","break",454],";",["T_WHITESPACE","\n\t\t\t",454],["T_CASE","case",455],["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'string'",455],":",["T_WHITESPACE","\n\t\t\t\t\t",455],["T_VARIABLE","$xml",456],["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'<string>'",456],["T_WHITESPACE"," ",456],".",["T_WHITESPACE"," ",456],["T_STRING","htmlspecialchars",456],"(",["T_VARIABLE","$data",456],")",["T_WHITESPACE"," ",456],".",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'<\/string>'",456],";",["T_WHITESPACE","\n\t\t\t\t",456],["T_BREAK","break",457],";",["T_WHITESPACE","\n\t\t\t",457],["T_CASE","case",458],["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'array'",458],":",["T_WHITESPACE","\n\t\t\t\t",458],["T_COMMENT","\/\/ is numeric ?\n",459],["T_WHITESPACE","\t\t\t\t",460],["T_IF","if",460],["T_WHITESPACE"," ",460],"(",["T_VARIABLE","$data",460],["T_WHITESPACE"," ",460],["T_IS_IDENTICAL","===",460],["T_WHITESPACE"," ",460],["T_STRING","array_values",460],"(",["T_VARIABLE","$data",460],")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n\t\t\t\t\t",460],["T_VARIABLE","$xml",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'<array><data>'",461],";",["T_WHITESPACE","\n\n\t\t\t\t\t",461],["T_FOREACH","foreach",463],["T_WHITESPACE"," ",463],"(",["T_VARIABLE","$data",463],["T_WHITESPACE"," ",463],["T_AS","as",463],["T_WHITESPACE"," ",463],["T_VARIABLE","$value",463],")",["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",463],["T_VARIABLE","$xml",464],["T_WHITESPACE"," ",464],["T_CONCAT_EQUAL",".=",464],["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'<value>'",464],["T_WHITESPACE"," ",464],".",["T_WHITESPACE"," ",464],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","constructXmlrpc",464],"(",["T_VARIABLE","$value",464],")",["T_WHITESPACE"," ",464],".",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'<\/value>'",464],";",["T_WHITESPACE","\n\t\t\t\t\t",464],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",465],["T_VARIABLE","$xml",467],["T_WHITESPACE"," ",467],["T_CONCAT_EQUAL",".=",467],["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","'<\/data><\/array>'",467],";",["T_WHITESPACE","\n\n\t\t\t\t",467],"}",["T_WHITESPACE"," ",469],["T_ELSE","else",469],["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n\t\t\t\t\t",469],["T_COMMENT","\/\/ array is associative\n",470],["T_WHITESPACE","\t\t\t\t\t",471],["T_VARIABLE","$xml",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'<struct>'",471],";",["T_WHITESPACE","\n\n\t\t\t\t\t",471],["T_FOREACH","foreach",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$data",473],["T_WHITESPACE"," ",473],["T_AS","as",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$key",473],["T_WHITESPACE"," ",473],["T_DOUBLE_ARROW","=>",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$value",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",473],["T_VARIABLE","$xml",474],["T_WHITESPACE"," ",474],["T_CONCAT_EQUAL",".=",474],["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'<member>'",474],";",["T_WHITESPACE","\n\t\t\t\t\t\t",474],["T_VARIABLE","$xml",475],["T_WHITESPACE"," ",475],["T_CONCAT_EQUAL",".=",475],["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","'  <name>'",475],["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_STRING","htmlspecialchars",475],"(",["T_VARIABLE","$key",475],")",["T_WHITESPACE"," ",475],".",["T_WHITESPACE"," ",475],["T_CONSTANT_ENCAPSED_STRING","'<\/name>'",475],";",["T_WHITESPACE","\n\t\t\t\t\t\t",475],["T_VARIABLE","$xml",476],["T_WHITESPACE"," ",476],["T_CONCAT_EQUAL",".=",476],["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'  <value>'",476],["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","constructXmlrpc",476],"(",["T_VARIABLE","$value",476],")",["T_WHITESPACE"," ",476],".",["T_WHITESPACE"," ",476],["T_CONSTANT_ENCAPSED_STRING","'<\/value>'",476],";",["T_WHITESPACE","\n\t\t\t\t\t\t",476],["T_VARIABLE","$xml",477],["T_WHITESPACE"," ",477],["T_CONCAT_EQUAL",".=",477],["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'<\/member>'",477],";",["T_WHITESPACE","\n\t\t\t\t\t",477],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",478],["T_VARIABLE","$xml",480],["T_WHITESPACE"," ",480],["T_CONCAT_EQUAL",".=",480],["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'<\/struct>'",480],";",["T_WHITESPACE","\n\t\t\t\t",480],"}",["T_WHITESPACE","\n\n\t\t\t\t",481],["T_BREAK","break",483],";",["T_WHITESPACE","\n\t\t\t",483],["T_DEFAULT","default",484],":",["T_WHITESPACE","\n\t\t\t\t",484],["T_VARIABLE","$xml",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'<nil\/>'",485],";",["T_WHITESPACE","\n\t\t\t\t",485],["T_BREAK","break",486],";",["T_WHITESPACE","\n\t\t",486],"}",["T_WHITESPACE","\n\n\t\t",487],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$xml",489],";",["T_WHITESPACE","\n\t",489],"}",["T_WHITESPACE","\n\n\t",490],["T_PRIVATE","private",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","splitAddress",492],"(",["T_VARIABLE","$address",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n\t\t",492],["T_VARIABLE","$numbers",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",["T_CONSTANT_ENCAPSED_STRING","'0'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'1'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'2'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'3'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'4'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'5'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'6'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'7'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'8'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'9'",493],")",";",["T_WHITESPACE","\n\n\t\t",493],["T_VARIABLE","$characters",495],["T_WHITESPACE"," ",495],"=",["T_WHITESPACE"," ",495],["T_ARRAY","array",495],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'\/'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","' '",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'#'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'.'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'a'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'b'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'c'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'d'",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'e'",495],",",["T_WHITESPACE","\n\t\t\t\t\t\t",495],["T_CONSTANT_ENCAPSED_STRING","'f'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'g'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'h'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'i'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'j'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'k'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'l'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'m'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'n'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'o'",496],",",["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'p'",496],",",["T_WHITESPACE","\n\t\t\t\t\t\t",496],["T_CONSTANT_ENCAPSED_STRING","'q'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'r'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'s'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'t'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'u'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'v'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'w'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'x'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'y'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'z'",497],",",["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'A'",497],",",["T_WHITESPACE","\n\t\t\t\t\t\t",497],["T_CONSTANT_ENCAPSED_STRING","'B'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'C'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'D'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'E'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'F'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'G'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'H'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'I'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'J'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'K'",498],",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'L'",498],",",["T_WHITESPACE","\n\t\t\t\t\t\t",498],["T_CONSTANT_ENCAPSED_STRING","'M'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'N'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'O'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'P'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'Q'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'R'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'S'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'T'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'U'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'V'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'W'",499],",",["T_WHITESPACE","\n\t\t\t\t\t\t",499],["T_CONSTANT_ENCAPSED_STRING","'X'",500],",",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'Y'",500],",",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'Z'",500],")",";",["T_WHITESPACE","\n\n\t\t",500],["T_VARIABLE","$specialchars",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_ARRAY","array",502],"(",["T_CONSTANT_ENCAPSED_STRING","'-'",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'\/'",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","' '",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'#'",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'.'",502],")",";",["T_WHITESPACE","\n\n\t\t",502],["T_VARIABLE","$num_pos",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","strposArr",504],"(",["T_VARIABLE","$address",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$numbers",504],",",["T_WHITESPACE"," ",504],["T_LNUMBER","2",504],")",";",["T_WHITESPACE","\n\n\t\t",504],["T_VARIABLE","$street_name",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],["T_STRING","substr",506],"(",["T_VARIABLE","$address",506],",",["T_WHITESPACE"," ",506],["T_LNUMBER","0",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$num_pos",506],")",";",["T_WHITESPACE","\n\n\t\t",506],["T_VARIABLE","$street_name",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_STRING","trim",508],"(",["T_VARIABLE","$street_name",508],")",";",["T_WHITESPACE","\n\n\t\t",508],["T_VARIABLE","$number_part",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_STRING","substr",510],"(",["T_VARIABLE","$address",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$num_pos",510],")",";",["T_WHITESPACE","\n\n\t\t",510],["T_VARIABLE","$number_part",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING","trim",512],"(",["T_VARIABLE","$number_part",512],")",";",["T_WHITESPACE","\n\n\t\t",512],["T_VARIABLE","$ext_pos",514],["T_WHITESPACE"," ",514],"=",["T_WHITESPACE"," ",514],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","strposArr",514],"(",["T_VARIABLE","$number_part",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$characters",514],",",["T_WHITESPACE"," ",514],["T_LNUMBER","0",514],")",";",["T_WHITESPACE","\n\n\t\t",514],["T_IF","if",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$ext_pos",516],["T_WHITESPACE"," ",516],["T_IS_NOT_EQUAL","!=",516],["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","''",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n\t\t\t",516],["T_VARIABLE","$house_number",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_STRING","substr",517],"(",["T_VARIABLE","$number_part",517],",",["T_WHITESPACE"," ",517],["T_LNUMBER","0",517],",",["T_WHITESPACE"," ",517],["T_VARIABLE","$ext_pos",517],")",";",["T_WHITESPACE","\n\n\t\t\t",517],["T_VARIABLE","$house_extension",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_STRING","substr",519],"(",["T_VARIABLE","$number_part",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$ext_pos",519],")",";",["T_WHITESPACE","\n\n\t\t\t",519],["T_VARIABLE","$house_extension",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","str_replace",521],"(",["T_VARIABLE","$specialchars",521],",",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","''",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$house_extension",521],")",";",["T_WHITESPACE","\n\t\t",521],"}",["T_WHITESPACE"," ",522],["T_ELSE","else",522],["T_WHITESPACE"," ",522],"{",["T_WHITESPACE","\n\t\t\t",522],["T_VARIABLE","$house_number",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_VARIABLE","$number_part",523],";",["T_WHITESPACE","\n\t\t\t",523],["T_VARIABLE","$house_extension",524],["T_WHITESPACE"," ",524],"=",["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","''",524],";",["T_WHITESPACE","\n\t\t",524],"}",["T_WHITESPACE","\n\n\t\t",525],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_ARRAY","array",527],"(",["T_VARIABLE","$street_name",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$house_number",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$house_extension",527],")",";",["T_WHITESPACE","\n\t",527],"}",["T_WHITESPACE","\n\n\t",528],["T_PRIVATE","private",530],["T_WHITESPACE"," ",530],["T_FUNCTION","function",530],["T_WHITESPACE"," ",530],["T_STRING","strposArr",530],"(",["T_VARIABLE","$haystack",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$needle",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$where",530],")",["T_WHITESPACE"," ",530],"{",["T_WHITESPACE","\n\t\t",530],["T_VARIABLE","$defpos",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_LNUMBER","10000",531],";",["T_WHITESPACE","\n\n\t\t",531],["T_IF","if",533],["T_WHITESPACE"," ",533],"(","!",["T_STRING","is_array",533],"(",["T_VARIABLE","$needle",533],")",")",["T_WHITESPACE"," ",533],"{",["T_WHITESPACE","\n\t\t\t",533],["T_VARIABLE","$needle",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_ARRAY","array",534],"(",["T_VARIABLE","$needle",534],")",";",["T_WHITESPACE","\n\t\t",534],"}",["T_WHITESPACE","\n\n\t\t",535],["T_FOREACH","foreach",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$needle",537],["T_WHITESPACE"," ",537],["T_AS","as",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$what",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n\t\t\t",537],["T_IF","if",538],["T_WHITESPACE"," ",538],"(","(",["T_VARIABLE","$pos",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","strpos",538],"(",["T_VARIABLE","$haystack",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$what",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$where",538],")",")",["T_WHITESPACE"," ",538],["T_IS_NOT_IDENTICAL","!==",538],["T_WHITESPACE"," ",538],["T_STRING","false",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n\t\t\t\t",538],["T_IF","if",539],["T_WHITESPACE"," ",539],"(",["T_VARIABLE","$pos",539],["T_WHITESPACE"," ",539],"<",["T_WHITESPACE"," ",539],["T_VARIABLE","$defpos",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n\t\t\t\t\t",539],["T_VARIABLE","$defpos",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$pos",540],";",["T_WHITESPACE","\n\t\t\t\t",540],"}",["T_WHITESPACE","\n\t\t\t",541],"}",["T_WHITESPACE","\n\t\t",542],"}",["T_WHITESPACE","\n\n\t\t",543],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_VARIABLE","$defpos",545],";",["T_WHITESPACE","\n\t",545],"}",["T_WHITESPACE","\n",546],"}"]
[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionPaymentSecureTradingWs",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",4],")",";",["T_WHITESPACE","\n\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","load",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","language",5],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",5],")",";",["T_WHITESPACE","\n\n\t\t",5],["T_VARIABLE","$order_info",7],["T_WHITESPACE"," ",7],"=",["T_WHITESPACE"," ",7],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","model_checkout_order",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","getOrder",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","session",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","data",7],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",7],"]",")",";",["T_WHITESPACE","\n\n\t\t",7],["T_IF","if",9],["T_WHITESPACE"," ",9],"(",["T_VARIABLE","$order_info",9],")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t\t",9],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_type'",10],"]",["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_VARIABLE","$this",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","language",10],["T_OBJECT_OPERATOR","->",10],["T_STRING","get",10],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_type'",10],")",";",["T_WHITESPACE","\n\t\t\t",10],["T_VARIABLE","$data",11],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_number'",11],"]",["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","language",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_number'",11],")",";",["T_WHITESPACE","\n\t\t\t",11],["T_VARIABLE","$data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_expire_date'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_expire_date'",12],")",";",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_cvv2'",13],"]",["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","language",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","get",13],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_cvv2'",13],")",";",["T_WHITESPACE","\n\n\t\t\t",13],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'text_card_details'",15],"]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","language",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'text_card_details'",15],")",";",["T_WHITESPACE","\n\t\t\t",15],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'text_wait'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","language",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'text_wait'",16],")",";",["T_WHITESPACE","\n\n\t\t\t",16],["T_VARIABLE","$data",18],"[",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",18],"]",["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","language",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",18],")",";",["T_WHITESPACE","\n\n\t\t\t",18],["T_VARIABLE","$cards",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_WHITESPACE","\n\t\t\t\t",20],["T_CONSTANT_ENCAPSED_STRING","'AMEX'",21],["T_WHITESPACE"," ",21],["T_DOUBLE_ARROW","=>",21],["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'American Express'",21],",",["T_WHITESPACE","\n\t\t\t\t",21],["T_CONSTANT_ENCAPSED_STRING","'VISA'",22],["T_WHITESPACE"," ",22],["T_DOUBLE_ARROW","=>",22],["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'Visa'",22],",",["T_WHITESPACE","\n\t\t\t\t",22],["T_CONSTANT_ENCAPSED_STRING","'DELTA'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'Visa Debit'",23],",",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'ELECTRON'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'Visa Electron'",24],",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'PURCHASING'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'Visa Purchasing'",25],",",["T_WHITESPACE","\n\t\t\t\t",25],["T_CONSTANT_ENCAPSED_STRING","'VPAY'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'V Pay'",26],",",["T_WHITESPACE","\n\t\t\t\t",26],["T_CONSTANT_ENCAPSED_STRING","'MASTERCARD'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'MasterCard'",27],",",["T_WHITESPACE","\n\t\t\t\t",27],["T_CONSTANT_ENCAPSED_STRING","'MASTERCARDDEBIT'",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'MasterCard Debit'",28],",",["T_WHITESPACE","\n\t\t\t\t",28],["T_CONSTANT_ENCAPSED_STRING","'MAESTRO'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'Maestro'",29],",",["T_WHITESPACE","\n\t\t\t\t",29],["T_CONSTANT_ENCAPSED_STRING","'PAYPAL'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'PayPal'",30],",",["T_WHITESPACE","\n\t\t\t",30],")",";",["T_WHITESPACE","\n\n\t\t\t",31],["T_FOR","for",33],["T_WHITESPACE"," ",33],"(",["T_VARIABLE","$i",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_LNUMBER","1",33],";",["T_WHITESPACE"," ",33],["T_VARIABLE","$i",33],["T_WHITESPACE"," ",33],["T_IS_SMALLER_OR_EQUAL","<=",33],["T_WHITESPACE"," ",33],["T_LNUMBER","12",33],";",["T_WHITESPACE"," ",33],["T_VARIABLE","$i",33],["T_INC","++",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t\t",33],["T_VARIABLE","$data",34],"[",["T_CONSTANT_ENCAPSED_STRING","'months'",34],"]","[","]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n\t\t\t\t\t",34],["T_CONSTANT_ENCAPSED_STRING","'text'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_STRING","strftime",35],"(",["T_CONSTANT_ENCAPSED_STRING","'%B'",35],",",["T_WHITESPACE"," ",35],["T_STRING","mktime",35],"(",["T_LNUMBER","0",35],",",["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],",",["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$i",35],",",["T_WHITESPACE"," ",35],["T_LNUMBER","1",35],",",["T_WHITESPACE"," ",35],["T_LNUMBER","2000",35],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t",35],["T_CONSTANT_ENCAPSED_STRING","'value'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_STRING","sprintf",36],"(",["T_CONSTANT_ENCAPSED_STRING","'%02d'",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$i",36],")",["T_WHITESPACE","\n\t\t\t\t",36],")",";",["T_WHITESPACE","\n\t\t\t",37],"}",["T_WHITESPACE","\n\n\t\t\t",38],["T_VARIABLE","$today",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","getdate",40],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",40],["T_VARIABLE","$data",42],"[",["T_CONSTANT_ENCAPSED_STRING","'year_expire'",42],"]",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",42],["T_FOR","for",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$i",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$today",44],"[",["T_CONSTANT_ENCAPSED_STRING","'year'",44],"]",";",["T_WHITESPACE"," ",44],["T_VARIABLE","$i",44],["T_WHITESPACE"," ",44],"<",["T_WHITESPACE"," ",44],["T_VARIABLE","$today",44],"[",["T_CONSTANT_ENCAPSED_STRING","'year'",44],"]",["T_WHITESPACE"," ",44],"+",["T_WHITESPACE"," ",44],["T_LNUMBER","11",44],";",["T_WHITESPACE"," ",44],["T_VARIABLE","$i",44],["T_INC","++",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t\t\t",44],["T_VARIABLE","$data",45],"[",["T_CONSTANT_ENCAPSED_STRING","'year_expire'",45],"]","[","]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_WHITESPACE","\n\t\t\t\t\t",45],["T_CONSTANT_ENCAPSED_STRING","'text'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_STRING","strftime",46],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y'",46],",",["T_WHITESPACE"," ",46],["T_STRING","mktime",46],"(",["T_LNUMBER","0",46],",",["T_WHITESPACE"," ",46],["T_LNUMBER","0",46],",",["T_WHITESPACE"," ",46],["T_LNUMBER","0",46],",",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$i",46],")",")",",",["T_WHITESPACE","\n\t\t\t\t\t",46],["T_CONSTANT_ENCAPSED_STRING","'value'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_STRING","strftime",47],"(",["T_CONSTANT_ENCAPSED_STRING","'%Y'",47],",",["T_WHITESPACE"," ",47],["T_STRING","mktime",47],"(",["T_LNUMBER","0",47],",",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],",",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],",",["T_WHITESPACE"," ",47],["T_LNUMBER","1",47],",",["T_WHITESPACE"," ",47],["T_LNUMBER","1",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$i",47],")",")",["T_WHITESPACE","\n\t\t\t\t",47],")",";",["T_WHITESPACE","\n\t\t\t",48],"}",["T_WHITESPACE","\n\n\t\t\t",49],["T_VARIABLE","$data",51],"[",["T_CONSTANT_ENCAPSED_STRING","'cards'",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",51],["T_FOREACH","foreach",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","config",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","get",53],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_cards_accepted'",53],")",["T_WHITESPACE"," ",53],["T_AS","as",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$card_type",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n\t\t\t\t",53],["T_VARIABLE","$data",54],"[",["T_CONSTANT_ENCAPSED_STRING","'cards'",54],"]","[",["T_VARIABLE","$card_type",54],"]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$cards",54],"[",["T_VARIABLE","$card_type",54],"]",";",["T_WHITESPACE","\n\t\t\t",54],"}",["T_WHITESPACE","\n\n\t\t\t",55],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","load",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","view",57],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$data",57],")",";",["T_WHITESPACE","\n\t\t",57],"}",["T_WHITESPACE","\n\t",58],"}",["T_WHITESPACE","\n\n\t",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","process",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n\t\t",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","load",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","model",62],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",62],")",";",["T_WHITESPACE","\n\t\t",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","load",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","model",63],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/country'",63],")",";",["T_WHITESPACE","\n\t\t",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","load",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","model",64],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",64],")",";",["T_WHITESPACE","\n\t\t",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","load",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","language",65],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",65],")",";",["T_WHITESPACE","\n\n\t\t",65],["T_VARIABLE","$order_info",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","model_checkout_order",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getOrder",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","session",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","data",67],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",67],"]",")",";",["T_WHITESPACE","\n\n\t\t",67],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$order_info",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t\t",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_3d_secure'",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n\t\t\t\t",70],["T_VARIABLE","$requestblock_xml",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","SimpleXMLElement",71],"(",["T_CONSTANT_ENCAPSED_STRING","'<requestblock><\/requestblock>'",71],")",";",["T_WHITESPACE","\n\t\t\t\t",71],["T_VARIABLE","$requestblock_xml",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","addAttribute",72],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'3.67'",72],")",";",["T_WHITESPACE","\n\t\t\t\t",72],["T_VARIABLE","$requestblock_xml",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","addChild",73],"(",["T_CONSTANT_ENCAPSED_STRING","'alias'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","config",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_username'",73],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",73],["T_VARIABLE","$request_node",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$requestblock_xml",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addChild",75],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",75],")",";",["T_WHITESPACE","\n\t\t\t\t",75],["T_VARIABLE","$request_node",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","addAttribute",76],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'THREEDQUERY'",76],")",";",["T_WHITESPACE","\n\n\t\t\t\t",76],["T_VARIABLE","$merchant_node",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$request_node",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","addChild",78],"(",["T_CONSTANT_ENCAPSED_STRING","'merchant'",78],")",";",["T_WHITESPACE","\n\t\t\t\t",78],["T_VARIABLE","$merchant_node",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","addChild",79],"(",["T_CONSTANT_ENCAPSED_STRING","'orderreference'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$order_info",79],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",79],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",79],["T_VARIABLE","$merchant_node",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","addChild",80],"(",["T_CONSTANT_ENCAPSED_STRING","'termurl'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","url",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","link",80],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws\/threedreturn'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","''",80],",",["T_WHITESPACE"," ",80],["T_STRING","true",80],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",80],["T_VARIABLE","$settlement_node",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$request_node",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","addChild",82],"(",["T_CONSTANT_ENCAPSED_STRING","'settlement'",82],")",";",["T_WHITESPACE","\n\t\t\t\t",82],["T_VARIABLE","$settlement_date",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","date",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",83],",",["T_WHITESPACE"," ",83],["T_STRING","strtotime",83],"(",["T_STRING","date",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",83],")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","' +'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","config",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_settle_due_date'",83],")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","' days'",83],")",")",";",["T_WHITESPACE","\n\t\t\t\t",83],["T_VARIABLE","$settlement_node",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","addChild",84],"(",["T_CONSTANT_ENCAPSED_STRING","'settleduedate'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$settlement_date",84],")",";",["T_WHITESPACE","\n\t\t\t\t",84],["T_VARIABLE","$settlement_node",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","addChild",85],"(",["T_CONSTANT_ENCAPSED_STRING","'settlestatus'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","config",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_settle_status'",85],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",85],["T_VARIABLE","$customer_node",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$request_node",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","addChild",87],"(",["T_CONSTANT_ENCAPSED_STRING","'customer'",87],")",";",["T_WHITESPACE","\n\t\t\t\t",87],["T_VARIABLE","$customer_node",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","addChild",88],"(",["T_CONSTANT_ENCAPSED_STRING","'useragent'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$order_info",88],"[",["T_CONSTANT_ENCAPSED_STRING","'user_agent'",88],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",88],["T_VARIABLE","$customer_node",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","addChild",89],"(",["T_CONSTANT_ENCAPSED_STRING","'accept'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","request",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","server",89],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ACCEPT'",89],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",89],["T_VARIABLE","$billing_node",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$request_node",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","addChild",91],"(",["T_CONSTANT_ENCAPSED_STRING","'billing'",91],")",";",["T_WHITESPACE","\n\n\t\t\t\t",91],["T_VARIABLE","$amount_node",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$billing_node",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","addChild",93],"(",["T_CONSTANT_ENCAPSED_STRING","'amount'",93],",",["T_WHITESPACE"," ",93],["T_STRING","str_replace",93],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","''",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","currency",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","format",93],"(",["T_VARIABLE","$order_info",93],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$order_info",93],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$order_info",93],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",93],"]",",",["T_WHITESPACE"," ",93],["T_STRING","false",93],")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",93],["T_VARIABLE","$amount_node",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","addAttribute",94],"(",["T_CONSTANT_ENCAPSED_STRING","'currencycode'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$order_info",94],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",94],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",94],["T_VARIABLE","$billing_node",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","addChild",96],"(",["T_CONSTANT_ENCAPSED_STRING","'premise'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$order_info",96],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",96],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",96],["T_VARIABLE","$billing_node",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","addChild",97],"(",["T_CONSTANT_ENCAPSED_STRING","'postcode'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$order_info",97],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",97],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",97],["T_VARIABLE","$name_node",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$billing_node",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","addChild",99],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",99],")",";",["T_WHITESPACE","\n\t\t\t\t",99],["T_VARIABLE","$name_node",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","addChild",100],"(",["T_CONSTANT_ENCAPSED_STRING","'first'",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$order_info",100],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",100],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",100],["T_VARIABLE","$name_node",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","addChild",101],"(",["T_CONSTANT_ENCAPSED_STRING","'last'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$order_info",101],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",101],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",101],["T_VARIABLE","$payment_node",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$billing_node",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","addChild",103],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",103],")",";",["T_WHITESPACE","\n\t\t\t\t",103],["T_VARIABLE","$payment_node",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addAttribute",104],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","request",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","post",104],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",104],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",104],["T_VARIABLE","$payment_node",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","addChild",105],"(",["T_CONSTANT_ENCAPSED_STRING","'pan'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","request",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","post",105],"[",["T_CONSTANT_ENCAPSED_STRING","'number'",105],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",105],["T_VARIABLE","$payment_node",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addChild",106],"(",["T_CONSTANT_ENCAPSED_STRING","'expirydate'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","request",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","post",106],"[",["T_CONSTANT_ENCAPSED_STRING","'expire_month'",106],"]",["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'\/'",106],["T_WHITESPACE"," ",106],".",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","request",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","post",106],"[",["T_CONSTANT_ENCAPSED_STRING","'expire_year'",106],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",106],["T_VARIABLE","$payment_node",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","addChild",107],"(",["T_CONSTANT_ENCAPSED_STRING","'securitycode'",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","request",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","post",107],"[",["T_CONSTANT_ENCAPSED_STRING","'cvv2'",107],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",107],["T_VARIABLE","$operation_node",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$request_node",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","addChild",109],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",109],")",";",["T_WHITESPACE","\n\t\t\t\t",109],["T_VARIABLE","$operation_node",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","addChild",110],"(",["T_CONSTANT_ENCAPSED_STRING","'sitereference'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","config",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","get",110],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_site_reference'",110],")",")",";",["T_WHITESPACE","\n\t\t\t\t",110],["T_VARIABLE","$operation_node",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","addChild",111],"(",["T_CONSTANT_ENCAPSED_STRING","'accounttypedescription'",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'ECOM'",111],")",";",["T_WHITESPACE","\n\n\t\t\t\t",111],["T_VARIABLE","$response",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","model_extension_payment_securetrading_ws",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","call",113],"(",["T_VARIABLE","$requestblock_xml",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","asXML",113],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$response",115],["T_WHITESPACE"," ",115],["T_IS_NOT_IDENTICAL","!==",115],["T_WHITESPACE"," ",115],["T_STRING","false",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n\t\t\t\t\t",115],["T_VARIABLE","$response_xml",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","simplexml_load_string",116],"(",["T_VARIABLE","$response",116],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$response_xml",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","response",118],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",118],"]",["T_WHITESPACE"," ",118],["T_IS_EQUAL","==",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'THREEDQUERY'",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",118],["T_VARIABLE","$error_code",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_INT_CAST","(int)",119],["T_VARIABLE","$response_xml",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","response",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","error",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","code",119],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$error_code",121],["T_WHITESPACE"," ",121],["T_IS_EQUAL","==",121],["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",121],["T_VARIABLE","$enrolled",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING_CAST","(string)",122],["T_VARIABLE","$response_xml",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","response",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","threedsecure",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","enrolled",122],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t",122],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$enrolled",124],["T_WHITESPACE"," ",124],["T_IS_EQUAL","==",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'Y'",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",124],["T_VARIABLE","$acs_url",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING_CAST","(string)",125],["T_VARIABLE","$response_xml",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","response",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","threedsecure",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","acsurl",125],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",125],["T_VARIABLE","$md",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_STRING_CAST","(string)",126],["T_VARIABLE","$response_xml",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","response",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","threedsecure",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","md",126],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",126],["T_VARIABLE","$pareq",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING_CAST","(string)",127],["T_VARIABLE","$response_xml",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","response",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","threedsecure",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","pareq",127],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","model_extension_payment_securetrading_ws",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addMd",129],"(",["T_VARIABLE","$order_info",129],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",129],"]",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$md",129],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",129],["T_VARIABLE","$json",131],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",131],["T_VARIABLE","$json",132],"[",["T_CONSTANT_ENCAPSED_STRING","'acs_url'",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$acs_url",132],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",132],["T_VARIABLE","$json",133],"[",["T_CONSTANT_ENCAPSED_STRING","'md'",133],"]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$md",133],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",133],["T_VARIABLE","$json",134],"[",["T_CONSTANT_ENCAPSED_STRING","'pareq'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$pareq",134],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",134],["T_VARIABLE","$json",135],"[",["T_CONSTANT_ENCAPSED_STRING","'term_url'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","url",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","link",135],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws\/threedreturn'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","''",135],",",["T_WHITESPACE"," ",135],["T_STRING","true",135],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",135],"}",["T_WHITESPACE"," ",136],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",136],["T_VARIABLE","$requestblock_xml",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_STRING","SimpleXMLElement",137],"(",["T_CONSTANT_ENCAPSED_STRING","'<requestblock><\/requestblock>'",137],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",137],["T_VARIABLE","$requestblock_xml",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addAttribute",138],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'3.67'",138],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",138],["T_VARIABLE","$requestblock_xml",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addChild",139],"(",["T_CONSTANT_ENCAPSED_STRING","'alias'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","config",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","get",139],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_username'",139],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",139],["T_VARIABLE","$request_node",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$requestblock_xml",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","addChild",141],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",141],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",141],["T_VARIABLE","$request_node",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","addAttribute",142],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'AUTH'",142],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",142],["T_VARIABLE","$request_node",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","addChild",144],"(",["T_CONSTANT_ENCAPSED_STRING","'merchant'",144],")",["T_OBJECT_OPERATOR","->",144],["T_STRING","addChild",144],"(",["T_CONSTANT_ENCAPSED_STRING","'orderreference'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$order_info",144],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",144],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",144],["T_VARIABLE","$operation_node",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$request_node",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addChild",146],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",146],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",146],["T_VARIABLE","$operation_node",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","addChild",147],"(",["T_CONSTANT_ENCAPSED_STRING","'parenttransactionreference'",147],",",["T_WHITESPACE"," ",147],["T_STRING_CAST","(string)",147],["T_VARIABLE","$response_xml",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","response",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","transactionreference",147],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",147],["T_VARIABLE","$operation_node",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","addChild",148],"(",["T_CONSTANT_ENCAPSED_STRING","'sitereference'",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","config",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","get",148],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_site_reference'",148],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",148],["T_VARIABLE","$response",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","model_extension_payment_securetrading_ws",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","call",150],"(",["T_VARIABLE","$requestblock_xml",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","asXML",150],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t\t\t",150],["T_VARIABLE","$json",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","processAuthResponse",152],"(",["T_VARIABLE","$response",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$order_info",152],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",152],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",152],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",153],"}",["T_WHITESPACE"," ",154],["T_ELSE","else",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",154],["T_VARIABLE","$json",155],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",155],"]",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","language",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","get",155],"(",["T_CONSTANT_ENCAPSED_STRING","'text_transaction_declined'",155],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",155],["T_VARIABLE","$json",156],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_LNUMBER","0",156],";",["T_WHITESPACE","\n\t\t\t\t\t\t",156],"}",["T_WHITESPACE","\n\t\t\t\t\t",157],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",158],["T_VARIABLE","$json",159],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","language",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","get",159],"(",["T_CONSTANT_ENCAPSED_STRING","'text_transaction_failed'",159],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",159],["T_VARIABLE","$json",160],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",160],"]",["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_LNUMBER","0",160],";",["T_WHITESPACE","\n\t\t\t\t\t",160],"}",["T_WHITESPACE","\n\t\t\t\t",161],"}",["T_WHITESPACE"," ",162],["T_ELSE","else",162],["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n\t\t\t\t\t",162],["T_VARIABLE","$json",163],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","language",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","get",163],"(",["T_CONSTANT_ENCAPSED_STRING","'text_connection_error'",163],")",";",["T_WHITESPACE","\n\t\t\t\t\t",163],["T_VARIABLE","$json",164],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",164],"]",["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_LNUMBER","0",164],";",["T_WHITESPACE","\n\t\t\t\t",164],"}",["T_WHITESPACE","\n\t\t\t",165],"}",["T_WHITESPACE"," ",166],["T_ELSE","else",166],["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n\t\t\t\t",166],["T_VARIABLE","$country",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","model_localisation_country",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getCountry",167],"(",["T_VARIABLE","$order_info",167],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",167],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",167],["T_VARIABLE","$json",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",169],["T_VARIABLE","$requestblock_xml",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_NEW","new",171],["T_WHITESPACE"," ",171],["T_STRING","SimpleXMLElement",171],"(",["T_CONSTANT_ENCAPSED_STRING","'<requestblock><\/requestblock>'",171],")",";",["T_WHITESPACE","\n\t\t\t\t",171],["T_VARIABLE","$requestblock_xml",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","addAttribute",172],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'3.67'",172],")",";",["T_WHITESPACE","\n\t\t\t\t",172],["T_VARIABLE","$requestblock_xml",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","addChild",173],"(",["T_CONSTANT_ENCAPSED_STRING","'alias'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","config",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","get",173],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_username'",173],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",173],["T_VARIABLE","$request_node",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$requestblock_xml",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","addChild",175],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",175],")",";",["T_WHITESPACE","\n\t\t\t\t",175],["T_VARIABLE","$request_node",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","addAttribute",176],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'AUTH'",176],")",";",["T_WHITESPACE","\n\t\t\t\t",176],["T_VARIABLE","$operation_node",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$request_node",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","addChild",177],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",177],")",";",["T_WHITESPACE","\n\t\t\t\t",177],["T_VARIABLE","$operation_node",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","addChild",178],"(",["T_CONSTANT_ENCAPSED_STRING","'sitereference'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","config",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","get",178],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_site_reference'",178],")",")",";",["T_WHITESPACE","\n\t\t\t\t",178],["T_VARIABLE","$operation_node",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","addChild",179],"(",["T_CONSTANT_ENCAPSED_STRING","'accounttypedescription'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'ECOM'",179],")",";",["T_WHITESPACE","\n\n\t\t\t\t",179],["T_VARIABLE","$merchant_node",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$request_node",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","addChild",181],"(",["T_CONSTANT_ENCAPSED_STRING","'merchant'",181],")",";",["T_WHITESPACE","\n\t\t\t\t",181],["T_VARIABLE","$merchant_node",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","addChild",182],"(",["T_CONSTANT_ENCAPSED_STRING","'orderreference'",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$order_info",182],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",182],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",182],["T_VARIABLE","$settlement_node",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$request_node",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","addChild",184],"(",["T_CONSTANT_ENCAPSED_STRING","'settlement'",184],")",";",["T_WHITESPACE","\n\t\t\t\t",184],["T_VARIABLE","$settlement_date",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","date",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",185],",",["T_WHITESPACE"," ",185],["T_STRING","strtotime",185],"(",["T_STRING","date",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",185],")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","' +'",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","config",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","get",185],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_settle_due_date'",185],")",["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","' days'",185],")",")",";",["T_WHITESPACE","\n\t\t\t\t",185],["T_VARIABLE","$settlement_node",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addChild",186],"(",["T_CONSTANT_ENCAPSED_STRING","'settleduedate'",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$settlement_date",186],")",";",["T_WHITESPACE","\n\t\t\t\t",186],["T_VARIABLE","$settlement_node",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","addChild",187],"(",["T_CONSTANT_ENCAPSED_STRING","'settlestatus'",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","config",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","get",187],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_settle_status'",187],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",187],["T_VARIABLE","$billing_node",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$request_node",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","addChild",189],"(",["T_CONSTANT_ENCAPSED_STRING","'billing'",189],")",";",["T_WHITESPACE","\n\t\t\t\t",189],["T_VARIABLE","$billing_node",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","addChild",190],"(",["T_CONSTANT_ENCAPSED_STRING","'premise'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$order_info",190],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",190],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",190],["T_VARIABLE","$billing_node",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","addChild",191],"(",["T_CONSTANT_ENCAPSED_STRING","'street'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$order_info",191],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",191],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",191],["T_VARIABLE","$billing_node",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","addChild",192],"(",["T_CONSTANT_ENCAPSED_STRING","'town'",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$order_info",192],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",192],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",192],["T_VARIABLE","$billing_node",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","addChild",193],"(",["T_CONSTANT_ENCAPSED_STRING","'county'",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$order_info",193],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone'",193],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",193],["T_VARIABLE","$billing_node",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","addChild",194],"(",["T_CONSTANT_ENCAPSED_STRING","'country'",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$country",194],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",194],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",194],["T_VARIABLE","$billing_node",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","addChild",195],"(",["T_CONSTANT_ENCAPSED_STRING","'postcode'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$order_info",195],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",195],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",195],["T_VARIABLE","$billing_node",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addChild",196],"(",["T_CONSTANT_ENCAPSED_STRING","'email'",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$order_info",196],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",196],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",196],["T_VARIABLE","$name_node",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$billing_node",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","addChild",197],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",197],")",";",["T_WHITESPACE","\n\n\t\t\t\t",197],["T_VARIABLE","$name_node",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addChild",199],"(",["T_CONSTANT_ENCAPSED_STRING","'first'",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$order_info",199],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",199],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",199],["T_VARIABLE","$name_node",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","addChild",200],"(",["T_CONSTANT_ENCAPSED_STRING","'last'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$order_info",200],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",200],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",200],["T_VARIABLE","$amount_node",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$billing_node",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","addChild",202],"(",["T_CONSTANT_ENCAPSED_STRING","'amount'",202],",",["T_WHITESPACE"," ",202],["T_STRING","str_replace",202],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","''",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","currency",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","format",202],"(",["T_VARIABLE","$order_info",202],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",202],"]",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$order_info",202],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",202],"]",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$order_info",202],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",202],"]",",",["T_WHITESPACE"," ",202],["T_STRING","false",202],")",")",")",";",["T_WHITESPACE","\n\t\t\t\t",202],["T_VARIABLE","$amount_node",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","addAttribute",203],"(",["T_CONSTANT_ENCAPSED_STRING","'currencycode'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$order_info",203],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",203],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",203],["T_VARIABLE","$payment_node",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$billing_node",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","addChild",205],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",205],")",";",["T_WHITESPACE","\n\t\t\t\t",205],["T_VARIABLE","$payment_node",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","addAttribute",206],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","request",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","post",206],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",206],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",206],["T_VARIABLE","$payment_node",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","addChild",207],"(",["T_CONSTANT_ENCAPSED_STRING","'pan'",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","request",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","post",207],"[",["T_CONSTANT_ENCAPSED_STRING","'number'",207],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",207],["T_VARIABLE","$payment_node",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","addChild",208],"(",["T_CONSTANT_ENCAPSED_STRING","'expirydate'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","request",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","post",208],"[",["T_CONSTANT_ENCAPSED_STRING","'expire_month'",208],"]",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'\/'",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","request",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","post",208],"[",["T_CONSTANT_ENCAPSED_STRING","'expire_year'",208],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",208],["T_VARIABLE","$payment_node",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","addChild",209],"(",["T_CONSTANT_ENCAPSED_STRING","'securitycode'",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","request",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","post",209],"[",["T_CONSTANT_ENCAPSED_STRING","'cvv2'",209],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",209],["T_VARIABLE","$response",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","model_extension_payment_securetrading_ws",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","call",211],"(",["T_VARIABLE","$requestblock_xml",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","asXML",211],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",211],["T_VARIABLE","$json",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","processAuthResponse",213],"(",["T_VARIABLE","$response",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$order_info",213],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",213],"]",")",";",["T_WHITESPACE","\n\t\t\t",213],"}",["T_WHITESPACE","\n\t\t\t",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","response",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setOutput",215],"(",["T_STRING","json_encode",215],"(",["T_VARIABLE","$json",215],")",")",";",["T_WHITESPACE","\n\t\t",215],"}",["T_WHITESPACE","\n\t",216],"}",["T_WHITESPACE","\n\n\t",217],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","threedreturn",219],"(",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n\t\t",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","load",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","model",220],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",220],")",";",["T_WHITESPACE","\n\t\t",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","load",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","model",221],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",221],")",";",["T_WHITESPACE","\n\t\t",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","load",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","language",222],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_ws'",222],")",";",["T_WHITESPACE","\n\n\t\t",222],["T_COMMENT","\/\/ Using unmodified $_POST to access values as per Secure Trading's requirements\n",224],["T_WHITESPACE","\t\t",225],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_ISSET","isset",225],"(",["T_VARIABLE","$_POST",225],"[",["T_CONSTANT_ENCAPSED_STRING","'PaRes'",225],"]",")",["T_WHITESPACE"," ",225],["T_BOOLEAN_AND","&&",225],["T_WHITESPACE"," ",225],"!",["T_EMPTY","empty",225],"(",["T_VARIABLE","$_POST",225],"[",["T_CONSTANT_ENCAPSED_STRING","'PaRes'",225],"]",")",["T_WHITESPACE"," ",225],["T_BOOLEAN_AND","&&",225],["T_WHITESPACE"," ",225],["T_ISSET","isset",225],"(",["T_VARIABLE","$_POST",225],"[",["T_CONSTANT_ENCAPSED_STRING","'MD'",225],"]",")",["T_WHITESPACE"," ",225],["T_BOOLEAN_AND","&&",225],["T_WHITESPACE"," ",225],"!",["T_EMPTY","empty",225],"(",["T_VARIABLE","$_POST",225],"[",["T_CONSTANT_ENCAPSED_STRING","'MD'",225],"]",")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n\t\t\t",225],["T_VARIABLE","$md",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$_POST",226],"[",["T_CONSTANT_ENCAPSED_STRING","'MD'",226],"]",";",["T_WHITESPACE","\n\t\t\t",226],["T_VARIABLE","$pares",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$_POST",227],"[",["T_CONSTANT_ENCAPSED_STRING","'PaRes'",227],"]",";",["T_WHITESPACE","\n\n\t\t\t",227],["T_VARIABLE","$order_id",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","model_extension_payment_securetrading_ws",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","getOrderId",229],"(",["T_VARIABLE","$md",229],")",";",["T_WHITESPACE","\n\n\t\t\t",229],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_VARIABLE","$order_id",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n\t\t\t\t",231],["T_VARIABLE","$requestblock_xml",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_NEW","new",232],["T_WHITESPACE"," ",232],["T_STRING","SimpleXMLElement",232],"(",["T_CONSTANT_ENCAPSED_STRING","'<requestblock><\/requestblock>'",232],")",";",["T_WHITESPACE","\n\t\t\t\t",232],["T_VARIABLE","$requestblock_xml",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","addAttribute",233],"(",["T_CONSTANT_ENCAPSED_STRING","'version'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'3.67'",233],")",";",["T_WHITESPACE","\n\t\t\t\t",233],["T_VARIABLE","$requestblock_xml",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","addChild",234],"(",["T_CONSTANT_ENCAPSED_STRING","'alias'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","config",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","get",234],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_username'",234],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",234],["T_VARIABLE","$request_node",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$requestblock_xml",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","addChild",236],"(",["T_CONSTANT_ENCAPSED_STRING","'request'",236],")",";",["T_WHITESPACE","\n\t\t\t\t",236],["T_VARIABLE","$request_node",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","addAttribute",237],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'AUTH'",237],")",";",["T_WHITESPACE","\n\n\t\t\t\t",237],["T_VARIABLE","$request_node",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","addChild",239],"(",["T_CONSTANT_ENCAPSED_STRING","'merchant'",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","addChild",239],"(",["T_CONSTANT_ENCAPSED_STRING","'orderreference'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$order_id",239],")",";",["T_WHITESPACE","\n\n\t\t\t\t",239],["T_VARIABLE","$operation_node",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$request_node",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","addChild",241],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",241],")",";",["T_WHITESPACE","\n\t\t\t\t",241],["T_VARIABLE","$operation_node",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addChild",242],"(",["T_CONSTANT_ENCAPSED_STRING","'md'",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$md",242],")",";",["T_WHITESPACE","\n\t\t\t\t",242],["T_VARIABLE","$operation_node",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addChild",243],"(",["T_CONSTANT_ENCAPSED_STRING","'pares'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$pares",243],")",";",["T_WHITESPACE","\n\n\t\t\t\t",243],["T_VARIABLE","$response",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","model_extension_payment_securetrading_ws",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","call",245],"(",["T_VARIABLE","$requestblock_xml",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","asXML",245],"(",")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$response",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n\t\t\t\t\t",247],["T_VARIABLE","$response_xml",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","simplexml_load_string",248],"(",["T_VARIABLE","$response",248],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",248],["T_VARIABLE","$error_code",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_INT_CAST","(int)",250],["T_VARIABLE","$response_xml",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","response",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","error",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","code",250],";",["T_WHITESPACE","\n\n\t\t\t\t\t",250],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$error_code",252],["T_WHITESPACE"," ",252],["T_IS_EQUAL","==",252],["T_WHITESPACE"," ",252],["T_LNUMBER","0",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",252],["T_VARIABLE","$postcode_status",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_INT_CAST","(int)",253],["T_VARIABLE","$response_xml",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","response",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","security",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","postcode",253],";",["T_WHITESPACE","\n\t\t\t\t\t\t",253],["T_VARIABLE","$security_code_status",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_VARIABLE","$response_xml",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","response",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","security",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","securitycode",254],";",["T_WHITESPACE","\n\t\t\t\t\t\t",254],["T_VARIABLE","$address_status",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_INT_CAST","(int)",255],["T_VARIABLE","$response_xml",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","response",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","security",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","address",255],";",["T_WHITESPACE","\n\t\t\t\t\t\t",255],["T_VARIABLE","$authcode",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING_CAST","(string)",256],["T_VARIABLE","$response_xml",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","response",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","authcode",256],";",["T_WHITESPACE","\n\t\t\t\t\t\t",256],["T_VARIABLE","$threed_status",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_STRING_CAST","(string)",257],["T_VARIABLE","$response_xml",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","response",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","threedsecure",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","status",257],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",257],["T_VARIABLE","$status_code_mapping",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",259],["T_LNUMBER","0",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","language",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","get",260],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_given'",260],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",260],["T_LNUMBER","1",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","language",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","get",261],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_checked'",261],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",261],["T_LNUMBER","2",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","language",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","get",262],"(",["T_CONSTANT_ENCAPSED_STRING","'text_match'",262],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",262],["T_LNUMBER","4",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","language",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","get",263],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_match'",263],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",263],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",264],["T_VARIABLE","$threed_status_mapping",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",266],["T_CONSTANT_ENCAPSED_STRING","'Y'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","language",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","get",267],"(",["T_CONSTANT_ENCAPSED_STRING","'text_authenticated'",267],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",267],["T_CONSTANT_ENCAPSED_STRING","'N'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","language",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","get",268],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_authenticated'",268],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",268],["T_CONSTANT_ENCAPSED_STRING","'A'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","language",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","get",269],"(",["T_CONSTANT_ENCAPSED_STRING","'text_authentication_not_completed'",269],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",269],["T_CONSTANT_ENCAPSED_STRING","'U'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","language",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","get",270],"(",["T_CONSTANT_ENCAPSED_STRING","'text_unable_to_perform'",270],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",270],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",271],["T_VARIABLE","$message",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","sprintf",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","language",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","get",273],"(",["T_CONSTANT_ENCAPSED_STRING","'text_auth_code'",273],")",",",["T_WHITESPACE"," ",273],["T_VARIABLE","$authcode",273],")",["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",273],";",["T_WHITESPACE","\n\t\t\t\t\t\t",273],["T_VARIABLE","$message",274],["T_WHITESPACE"," ",274],["T_CONCAT_EQUAL",".=",274],["T_WHITESPACE"," ",274],["T_STRING","sprintf",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","language",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'text_postcode_check'",274],")",",",["T_WHITESPACE"," ",274],["T_VARIABLE","$status_code_mapping",274],"[",["T_VARIABLE","$postcode_status",274],"]",")",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",274],";",["T_WHITESPACE","\n\t\t\t\t\t\t",274],["T_VARIABLE","$message",275],["T_WHITESPACE"," ",275],["T_CONCAT_EQUAL",".=",275],["T_WHITESPACE"," ",275],["T_STRING","sprintf",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","language",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","get",275],"(",["T_CONSTANT_ENCAPSED_STRING","'text_security_code_check'",275],")",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$status_code_mapping",275],"[",["T_VARIABLE","$security_code_status",275],"]",")",["T_WHITESPACE"," ",275],".",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",275],";",["T_WHITESPACE","\n\t\t\t\t\t\t",275],["T_VARIABLE","$message",276],["T_WHITESPACE"," ",276],["T_CONCAT_EQUAL",".=",276],["T_WHITESPACE"," ",276],["T_STRING","sprintf",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","language",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","get",276],"(",["T_CONSTANT_ENCAPSED_STRING","'text_address_check'",276],")",",",["T_WHITESPACE"," ",276],["T_VARIABLE","$status_code_mapping",276],"[",["T_VARIABLE","$address_status",276],"]",")",["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",276],";",["T_WHITESPACE","\n\t\t\t\t\t\t",276],["T_VARIABLE","$message",277],["T_WHITESPACE"," ",277],["T_CONCAT_EQUAL",".=",277],["T_WHITESPACE"," ",277],["T_STRING","sprintf",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","language",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","get",277],"(",["T_CONSTANT_ENCAPSED_STRING","'text_3d_secure_check'",277],")",",",["T_WHITESPACE"," ",277],["T_VARIABLE","$threed_status_mapping",277],"[",["T_VARIABLE","$threed_status",277],"]",")",["T_WHITESPACE"," ",277],".",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",277],";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",277],["T_VARIABLE","$transaction_reference",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING_CAST","(string)",279],["T_VARIABLE","$response_xml",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","response",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","transactionreference",279],";",["T_WHITESPACE","\n\t\t\t\t\t\t",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","model_extension_payment_securetrading_ws",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","updateReference",280],"(",["T_VARIABLE","$order_id",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$transaction_reference",280],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",280],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","model_extension_payment_securetrading_ws",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","confirmOrder",282],"(",["T_VARIABLE","$order_id",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","config",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","get",282],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_order_status_id'",282],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","model_extension_payment_securetrading_ws",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","updateOrder",283],"(",["T_VARIABLE","$order_id",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","config",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","get",283],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_order_status_id'",283],")",",",["T_WHITESPACE"," ",283],["T_VARIABLE","$message",283],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",283],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","response",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","redirect",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","url",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","link",285],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","''",285],",",["T_WHITESPACE"," ",285],["T_STRING","true",285],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",285],"}",["T_WHITESPACE"," ",286],["T_ELSE","else",286],["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","model_extension_payment_securetrading_ws",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","updateOrder",287],"(",["T_VARIABLE","$order_id",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","config",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","get",287],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_declined_order_status_id'",287],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",287],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","session",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","data",289],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",289],"]",["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","language",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","get",289],"(",["T_CONSTANT_ENCAPSED_STRING","'text_transaction_declined'",289],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","response",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","redirect",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","url",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","link",290],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","''",290],",",["T_WHITESPACE"," ",290],["T_STRING","true",290],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",290],"}",["T_WHITESPACE","\n\t\t\t\t",291],"}",["T_WHITESPACE"," ",292],["T_ELSE","else",292],["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t\t\t",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","session",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","data",293],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",293],"]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","language",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","get",293],"(",["T_CONSTANT_ENCAPSED_STRING","'error_failure'",293],")",";",["T_WHITESPACE","\n\t\t\t\t\t",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","response",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","redirect",294],"(",["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","url",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","link",294],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",294],",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","''",294],",",["T_WHITESPACE"," ",294],["T_STRING","true",294],")",")",";",["T_WHITESPACE","\n\t\t\t\t",294],"}",["T_WHITESPACE","\n\t\t\t",295],"}",["T_WHITESPACE"," ",296],["T_ELSE","else",296],["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n\t\t\t\t",296],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","session",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","data",297],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",297],"]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","language",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","get",297],"(",["T_CONSTANT_ENCAPSED_STRING","'error_failure'",297],")",";",["T_WHITESPACE","\n\t\t\t\t",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","response",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","redirect",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","url",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","link",298],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","''",298],",",["T_WHITESPACE"," ",298],["T_STRING","true",298],")",")",";",["T_WHITESPACE","\n\t\t\t",298],"}",["T_WHITESPACE","\n\t\t",299],"}",["T_WHITESPACE"," ",300],["T_ELSE","else",300],["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n\t\t\t",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","session",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","data",301],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",301],"]",["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","language",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","get",301],"(",["T_CONSTANT_ENCAPSED_STRING","'error_failure'",301],")",";",["T_WHITESPACE","\n\t\t\t",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","response",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","redirect",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","url",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","link",302],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/checkout'",302],",",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","''",302],",",["T_WHITESPACE"," ",302],["T_STRING","true",302],")",")",";",["T_WHITESPACE","\n\t\t",302],"}",["T_WHITESPACE","\n\t",303],"}",["T_WHITESPACE","\n\n\t",304],["T_PRIVATE","private",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","processAuthResponse",306],"(",["T_VARIABLE","$response",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$order_id",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n\t\t",306],["T_VARIABLE","$json",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",")",";",["T_WHITESPACE","\n\n\t\t",307],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$response",309],["T_WHITESPACE"," ",309],["T_IS_NOT_IDENTICAL","!==",309],["T_WHITESPACE"," ",309],["T_STRING","false",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n\t\t\t",309],["T_VARIABLE","$response_xml",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_STRING","simplexml_load_string",310],"(",["T_VARIABLE","$response",310],")",";",["T_WHITESPACE","\n\n\t\t\t",310],["T_IF","if",312],["T_WHITESPACE"," ",312],"(",["T_VARIABLE","$response_xml",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","response",312],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",312],"]",["T_WHITESPACE"," ",312],["T_IS_EQUAL","==",312],["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'AUTH'",312],")",["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n\t\t\t\t",312],["T_VARIABLE","$error_code",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_INT_CAST","(int)",313],["T_VARIABLE","$response_xml",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","response",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","error",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","code",313],";",["T_WHITESPACE","\n\n\t\t\t\t",313],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$error_code",315],["T_WHITESPACE"," ",315],["T_IS_EQUAL","==",315],["T_WHITESPACE"," ",315],["T_LNUMBER","0",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n\t\t\t\t\t",315],["T_VARIABLE","$postcode_status",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_INT_CAST","(int)",316],["T_VARIABLE","$response_xml",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","response",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","security",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","postcode",316],";",["T_WHITESPACE","\n\t\t\t\t\t",316],["T_VARIABLE","$security_code_status",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_INT_CAST","(int)",317],["T_VARIABLE","$response_xml",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","response",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","security",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","securitycode",317],";",["T_WHITESPACE","\n\t\t\t\t\t",317],["T_VARIABLE","$address_status",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_INT_CAST","(int)",318],["T_VARIABLE","$response_xml",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","response",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","security",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","address",318],";",["T_WHITESPACE","\n\t\t\t\t\t",318],["T_VARIABLE","$authcode",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_STRING_CAST","(string)",319],["T_VARIABLE","$response_xml",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","response",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","authcode",319],";",["T_WHITESPACE","\n\n\t\t\t\t\t",319],["T_VARIABLE","$status_code_mapping",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_ARRAY","array",321],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",321],["T_LNUMBER","0",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","language",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","get",322],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_given'",322],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",322],["T_LNUMBER","1",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","language",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","get",323],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_checked'",323],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",323],["T_LNUMBER","2",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","language",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","get",324],"(",["T_CONSTANT_ENCAPSED_STRING","'text_match'",324],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",324],["T_LNUMBER","4",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","language",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","get",325],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_match'",325],")",",",["T_WHITESPACE","\n\t\t\t\t\t",325],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",326],["T_VARIABLE","$message",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","sprintf",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","language",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","get",328],"(",["T_CONSTANT_ENCAPSED_STRING","'text_auth_code'",328],")",",",["T_WHITESPACE"," ",328],["T_VARIABLE","$authcode",328],")",["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",328],";",["T_WHITESPACE","\n\t\t\t\t\t",328],["T_VARIABLE","$message",329],["T_WHITESPACE"," ",329],["T_CONCAT_EQUAL",".=",329],["T_WHITESPACE"," ",329],["T_STRING","sprintf",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","language",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","get",329],"(",["T_CONSTANT_ENCAPSED_STRING","'text_postcode_check'",329],")",",",["T_WHITESPACE"," ",329],["T_VARIABLE","$status_code_mapping",329],"[",["T_VARIABLE","$postcode_status",329],"]",")",["T_WHITESPACE"," ",329],".",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",329],";",["T_WHITESPACE","\n\t\t\t\t\t",329],["T_VARIABLE","$message",330],["T_WHITESPACE"," ",330],["T_CONCAT_EQUAL",".=",330],["T_WHITESPACE"," ",330],["T_STRING","sprintf",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","language",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","get",330],"(",["T_CONSTANT_ENCAPSED_STRING","'text_security_code_check'",330],")",",",["T_WHITESPACE"," ",330],["T_VARIABLE","$status_code_mapping",330],"[",["T_VARIABLE","$security_code_status",330],"]",")",["T_WHITESPACE"," ",330],".",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",330],";",["T_WHITESPACE","\n\t\t\t\t\t",330],["T_VARIABLE","$message",331],["T_WHITESPACE"," ",331],["T_CONCAT_EQUAL",".=",331],["T_WHITESPACE"," ",331],["T_STRING","sprintf",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","language",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","get",331],"(",["T_CONSTANT_ENCAPSED_STRING","'text_address_check'",331],")",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$status_code_mapping",331],"[",["T_VARIABLE","$address_status",331],"]",")",["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",331],";",["T_WHITESPACE","\n\n\t\t\t\t\t",331],["T_VARIABLE","$transaction_reference",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING_CAST","(string)",333],["T_VARIABLE","$response_xml",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","response",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","transactionreference",333],";",["T_WHITESPACE","\n\t\t\t\t\t",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","model_extension_payment_securetrading_ws",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","updateReference",334],"(",["T_VARIABLE","$order_id",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$transaction_reference",334],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",334],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","model_extension_payment_securetrading_ws",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","confirmOrder",336],"(",["T_VARIABLE","$order_id",336],",",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","config",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","get",336],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_order_status_id'",336],")",")",";",["T_WHITESPACE","\n\t\t\t\t\t",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","model_extension_payment_securetrading_ws",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","updateOrder",337],"(",["T_VARIABLE","$order_id",337],",",["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","config",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","get",337],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_order_status_id'",337],")",",",["T_WHITESPACE"," ",337],["T_VARIABLE","$message",337],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",337],["T_VARIABLE","$json",339],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",339],"]",["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","url",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","link",339],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",339],")",";",["T_WHITESPACE","\n\t\t\t\t\t",339],["T_VARIABLE","$json",340],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",340],"]",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_LNUMBER","1",340],";",["T_WHITESPACE","\n\t\t\t\t",340],"}",["T_WHITESPACE"," ",341],["T_ELSE","else",341],["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n\t\t\t\t\t",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","model_extension_payment_securetrading_ws",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","updateOrder",342],"(",["T_VARIABLE","$order_id",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","config",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","get",342],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_declined_order_status_id'",342],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",342],["T_VARIABLE","$json",344],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",344],"]",["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","language",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","get",344],"(",["T_CONSTANT_ENCAPSED_STRING","'text_transaction_declined'",344],")",";",["T_WHITESPACE","\n\t\t\t\t\t",344],["T_VARIABLE","$json",345],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",345],"]",["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_LNUMBER","0",345],";",["T_WHITESPACE","\n\t\t\t\t",345],"}",["T_WHITESPACE","\n\t\t\t",346],"}",["T_WHITESPACE"," ",347],["T_ELSE","else",347],["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n\t\t\t\t",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","model_extension_payment_securetrading_ws",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","updateOrder",348],"(",["T_VARIABLE","$order_id",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","config",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","get",348],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_ws_failed_order_status_id'",348],")",")",";",["T_WHITESPACE","\n\n\t\t\t\t",348],["T_VARIABLE","$json",350],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",350],"]",["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","language",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","get",350],"(",["T_CONSTANT_ENCAPSED_STRING","'text_transaction_failed'",350],")",";",["T_WHITESPACE","\n\t\t\t\t",350],["T_VARIABLE","$json",351],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",351],"]",["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_LNUMBER","0",351],";",["T_WHITESPACE","\n\t\t\t",351],"}",["T_WHITESPACE","\n\t\t",352],"}",["T_WHITESPACE"," ",353],["T_ELSE","else",353],["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n\t\t\t",353],["T_VARIABLE","$json",354],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",354],"]",["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","language",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","get",354],"(",["T_CONSTANT_ENCAPSED_STRING","'text_connection_error'",354],")",";",["T_WHITESPACE","\n\t\t\t",354],["T_VARIABLE","$json",355],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",355],"]",["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_LNUMBER","0",355],";",["T_WHITESPACE","\n\t\t",355],"}",["T_WHITESPACE","\n\n\t\t",356],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$json",358],";",["T_WHITESPACE","\n\t",358],"}",["T_WHITESPACE","\n",359],"}",["T_WHITESPACE","\n",360]]
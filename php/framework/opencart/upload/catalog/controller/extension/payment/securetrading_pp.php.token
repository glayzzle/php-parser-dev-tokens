[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionPaymentSecureTradingPp",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","model",4],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",4],")",";",["T_WHITESPACE","\n\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","load",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","model",5],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/country'",5],")",";",["T_WHITESPACE","\n\t\t",5],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","load",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model",6],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/zone'",6],")",";",["T_WHITESPACE","\n\t\t",6],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","load",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","language",7],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_pp'",7],")",";",["T_WHITESPACE","\n\n\t\t",7],["T_VARIABLE","$order_info",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","model_checkout_order",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","getOrder",9],"(",["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","session",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","data",9],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",9],"]",")",";",["T_WHITESPACE","\n\n\t\t",9],["T_IF","if",11],["T_WHITESPACE"," ",11],"(",["T_VARIABLE","$order_info",11],")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t\t",11],["T_VARIABLE","$data",12],"[",["T_CONSTANT_ENCAPSED_STRING","'order_info'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$order_info",12],";",["T_WHITESPACE","\n\t\t\t",12],["T_VARIABLE","$data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'site_reference'",13],"]",["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","config",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","get",13],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_site_reference'",13],")",";",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$data",14],"[",["T_CONSTANT_ENCAPSED_STRING","'parent_css'",14],"]",["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","config",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_parent_css'",14],")",";",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$data",15],"[",["T_CONSTANT_ENCAPSED_STRING","'child_css'",15],"]",["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","config",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_child_css'",15],")",";",["T_WHITESPACE","\n\t\t\t",15],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'currency'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$order_info",16],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",16],"]",";",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","currency",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","format",17],"(",["T_VARIABLE","$order_info",17],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",17],"]",",",["T_WHITESPACE"," ",17],["T_VARIABLE","$order_info",17],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",17],"]",",",["T_WHITESPACE"," ",17],["T_VARIABLE","$order_info",17],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",17],"]",",",["T_WHITESPACE"," ",17],["T_STRING","false",17],")",";",["T_WHITESPACE","\n\t\t\t",17],["T_VARIABLE","$data",18],"[",["T_CONSTANT_ENCAPSED_STRING","'settle_due_date'",18],"]",["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_STRING","date",18],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",18],",",["T_WHITESPACE"," ",18],["T_STRING","strtotime",18],"(",["T_STRING","date",18],"(",["T_CONSTANT_ENCAPSED_STRING","'Y-m-d'",18],")",["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","' +'",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","config",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_settle_due_date'",18],")",["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","' days'",18],")",")",";",["T_WHITESPACE","\n\t\t\t",18],["T_VARIABLE","$data",19],"[",["T_CONSTANT_ENCAPSED_STRING","'settle_status'",19],"]",["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","config",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","get",19],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_settle_status'",19],")",";",["T_WHITESPACE","\n\n\t\t\t",19],["T_VARIABLE","$payment_country",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","model_localisation_country",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","getCountry",21],"(",["T_VARIABLE","$order_info",21],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",21],"]",")",";",["T_WHITESPACE","\n\t\t\t",21],["T_VARIABLE","$payment_zone",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","model_localisation_zone",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getZone",22],"(",["T_VARIABLE","$order_info",22],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_id'",22],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",22],["T_VARIABLE","$shipping_country",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","model_localisation_country",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getCountry",24],"(",["T_VARIABLE","$order_info",24],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country_id'",24],"]",")",";",["T_WHITESPACE","\n\t\t\t",24],["T_VARIABLE","$shipping_zone",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","model_localisation_zone",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getZone",25],"(",["T_VARIABLE","$order_info",25],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_id'",25],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",25],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_VARIABLE","$payment_country",27],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",27],"]",["T_WHITESPACE"," ",27],["T_IS_EQUAL","==",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'USA'",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t\t",27],["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_county'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$payment_zone",28],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",28],"]",";",["T_WHITESPACE","\n\t\t\t",28],"}",["T_WHITESPACE"," ",29],["T_ELSE","else",29],["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t\t\t",29],["T_VARIABLE","$data",30],"[",["T_CONSTANT_ENCAPSED_STRING","'billing_county'",30],"]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$order_info",30],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone'",30],"]",";",["T_WHITESPACE","\n\t\t\t",30],"}",["T_WHITESPACE","\n\n\t\t\t",31],["T_IF","if",33],["T_WHITESPACE"," ",33],"(",["T_ISSET","isset",33],"(",["T_VARIABLE","$shipping_country",33],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",33],"]",")",["T_WHITESPACE"," ",33],["T_BOOLEAN_AND","&&",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$shipping_country",33],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",33],"]",["T_WHITESPACE"," ",33],["T_IS_EQUAL","==",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'USA'",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t\t",33],["T_VARIABLE","$data",34],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_county'",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$shipping_zone",34],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",34],"]",";",["T_WHITESPACE","\n\t\t\t",34],"}",["T_WHITESPACE"," ",35],["T_ELSE","else",35],["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t\t",35],["T_VARIABLE","$data",36],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_county'",36],"]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$order_info",36],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone'",36],"]",";",["T_WHITESPACE","\n\t\t\t",36],"}",["T_WHITESPACE","\n\n\t\t\t",37],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","!",["T_ISSET","isset",39],"(",["T_VARIABLE","$shipping_country",39],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",39],"]",")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n\t\t\t\t",39],["T_VARIABLE","$shipping_country",40],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$payment_country",40],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",40],"]",";",["T_WHITESPACE","\n\t\t\t",40],"}",["T_WHITESPACE","\n\n\t\t\t",41],["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country'",43],"]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$payment_country",43],";",["T_WHITESPACE","\n\t\t\t",43],["T_VARIABLE","$data",44],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",44],"]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$shipping_country",44],";",["T_WHITESPACE","\n\n\t\t\t",44],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","config",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","get",46],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_site_security_status'",46],")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n\t\t\t\t",46],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'site_security'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","hash",47],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$order_info",47],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'site_reference'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'settle_status'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$data",47],"[",["T_CONSTANT_ENCAPSED_STRING","'settle_due_date'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$order_info",47],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","config",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_site_security_password'",47],")",")",";",["T_WHITESPACE","\n\t\t\t",47],"}",["T_WHITESPACE"," ",48],["T_ELSE","else",48],["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\t\t\t\t",48],["T_VARIABLE","$data",49],"[",["T_CONSTANT_ENCAPSED_STRING","'site_security'",49],"]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","false",49],";",["T_WHITESPACE","\n\t\t\t",49],"}",["T_WHITESPACE","\n\n\t\t\t",50],["T_VARIABLE","$cards",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_WHITESPACE","\n\t\t\t\t",52],["T_CONSTANT_ENCAPSED_STRING","'AMEX'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'American Express'",53],",",["T_WHITESPACE","\n\t\t\t\t",53],["T_CONSTANT_ENCAPSED_STRING","'VISA'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'Visa'",54],",",["T_WHITESPACE","\n\t\t\t\t",54],["T_CONSTANT_ENCAPSED_STRING","'DELTA'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'Visa Debit'",55],",",["T_WHITESPACE","\n\t\t\t\t",55],["T_CONSTANT_ENCAPSED_STRING","'ELECTRON'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Visa Electron'",56],",",["T_WHITESPACE","\n\t\t\t\t",56],["T_CONSTANT_ENCAPSED_STRING","'PURCHASING'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Visa Purchasing'",57],",",["T_WHITESPACE","\n\t\t\t\t",57],["T_CONSTANT_ENCAPSED_STRING","'VPAY'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'V Pay'",58],",",["T_WHITESPACE","\n\t\t\t\t",58],["T_CONSTANT_ENCAPSED_STRING","'MASTERCARD'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'MasterCard'",59],",",["T_WHITESPACE","\n\t\t\t\t",59],["T_CONSTANT_ENCAPSED_STRING","'MASTERCARDDEBIT'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'MasterCard Debit'",60],",",["T_WHITESPACE","\n\t\t\t\t",60],["T_CONSTANT_ENCAPSED_STRING","'MAESTRO'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'Maestro'",61],",",["T_WHITESPACE","\n\t\t\t\t",61],["T_CONSTANT_ENCAPSED_STRING","'PAYPAL'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'PayPal'",62],",",["T_WHITESPACE","\n\t\t\t",62],")",";",["T_WHITESPACE","\n\n\t\t\t",63],["T_VARIABLE","$data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'cards'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",")",";",["T_WHITESPACE","\n\n\t\t\t",65],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$cards",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$key",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$value",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t\t",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_STRING","in_array",68],"(",["T_VARIABLE","$key",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","config",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_cards_accepted'",68],")",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t\t\t\t",68],["T_VARIABLE","$data",69],"[",["T_CONSTANT_ENCAPSED_STRING","'cards'",69],"]","[",["T_VARIABLE","$key",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$value",69],";",["T_WHITESPACE","\n\t\t\t\t",69],"}",["T_WHITESPACE","\n\t\t\t",70],"}",["T_WHITESPACE","\n\n\t\t\t",71],["T_VARIABLE","$data",73],"[",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","language",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",73],")",";",["T_WHITESPACE","\n\t\t\t",73],["T_VARIABLE","$data",74],"[",["T_CONSTANT_ENCAPSED_STRING","'text_payment_details'",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","language",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'text_payment_details'",74],")",";",["T_WHITESPACE","\n\t\t\t",74],["T_VARIABLE","$data",75],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_card_type'",75],"]",["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","language",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_card_type'",75],")",";",["T_WHITESPACE","\n\n\t\t\t",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","load",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","view",77],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_pp'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$data",77],")",";",["T_WHITESPACE","\n\t\t",77],"}",["T_WHITESPACE","\n\t",78],"}",["T_WHITESPACE","\n\n\t",79],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","ipn",81],"(",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","load",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","model",82],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",82],")",";",["T_WHITESPACE","\n\t\t",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","load",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","model",83],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_pp'",83],")",";",["T_WHITESPACE","\n\t\t",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","load",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","language",84],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/securetrading_pp'",84],")",";",["T_WHITESPACE","\n\n\t\t",84],["T_VARIABLE","$keys",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","array_keys",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","request",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","post",86],")",";",["T_WHITESPACE","\n\t\t",86],["T_STRING","sort",87],"(",["T_VARIABLE","$keys",87],")",";",["T_WHITESPACE","\n\n\t\t",87],["T_VARIABLE","$keys_ignore",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'notificationreference'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'responsesitesecurity'",89],")",";",["T_WHITESPACE","\n\n\t\t",89],["T_VARIABLE","$string_to_hash",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","''",91],";",["T_WHITESPACE","\n\n\t\t",91],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$keys",93],["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$key",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n\t\t\t",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","!",["T_STRING","in_array",94],"(",["T_VARIABLE","$key",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$keys_ignore",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n\t\t\t\t",94],["T_VARIABLE","$string_to_hash",95],["T_WHITESPACE"," ",95],["T_CONCAT_EQUAL",".=",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","request",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","post",95],"[",["T_VARIABLE","$key",95],"]",";",["T_WHITESPACE","\n\t\t\t",95],"}",["T_WHITESPACE","\n\t\t",96],"}",["T_WHITESPACE","\n\n\t\t",97],["T_VARIABLE","$string_to_hash",99],["T_WHITESPACE"," ",99],["T_CONCAT_EQUAL",".=",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","config",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_notification_password'",99],")",";",["T_WHITESPACE","\n\n\t\t",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_STRING","hash_equals",101],"(",["T_STRING","hash",101],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$string_to_hash",101],")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","request",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","post",101],"[",["T_CONSTANT_ENCAPSED_STRING","'responsesitesecurity'",101],"]",")",["T_WHITESPACE"," ",101],["T_BOOLEAN_AND","&&",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","request",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","post",101],"[",["T_CONSTANT_ENCAPSED_STRING","'sitereference'",101],"]",["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","config",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_site_reference'",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t\t\t",101],["T_VARIABLE","$order_info",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","model_checkout_order",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getOrder",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","request",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","post",102],"[",["T_CONSTANT_ENCAPSED_STRING","'orderreference'",102],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$order_info",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n\t\t\t\t",104],["T_VARIABLE","$order_total",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","currency",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","format",105],"(",["T_VARIABLE","$order_info",105],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",105],"]",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$order_info",105],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",105],"]",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$order_info",105],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",105],"]",",",["T_WHITESPACE"," ",105],["T_STRING","false",105],")",";",["T_WHITESPACE","\n\n\t\t\t\t",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$order_total",107],["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","request",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","post",107],"[",["T_CONSTANT_ENCAPSED_STRING","'mainamount'",107],"]",["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$order_info",107],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",107],"]",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","request",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","post",107],"[",["T_CONSTANT_ENCAPSED_STRING","'currencyiso3a'",107],"]",["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$order_info",107],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_code'",107],"]",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp'",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t\t\t\t",107],["T_VARIABLE","$status_code_mapping",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_WHITESPACE","\n\t\t\t\t\t\t",108],["T_LNUMBER","0",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","language",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","get",109],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_given'",109],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",109],["T_LNUMBER","1",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","language",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","get",110],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_checked'",110],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",110],["T_LNUMBER","2",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","language",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","get",111],"(",["T_CONSTANT_ENCAPSED_STRING","'text_match'",111],")",",",["T_WHITESPACE","\n\t\t\t\t\t\t",111],["T_LNUMBER","4",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","language",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","get",112],"(",["T_CONSTANT_ENCAPSED_STRING","'text_not_match'",112],")",",",["T_WHITESPACE","\n\t\t\t\t\t",112],")",";",["T_WHITESPACE","\n\t\t\t\t\t",113],["T_VARIABLE","$shipping_country",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","model_extension_payment_securetrading_pp",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getCountry",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","request",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","post",114],"[",["T_CONSTANT_ENCAPSED_STRING","'customercountryiso2a'",114],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",114],["T_VARIABLE","$payment_country",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","model_extension_payment_securetrading_pp",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getCountry",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","request",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","post",115],"[",["T_CONSTANT_ENCAPSED_STRING","'billingcountryiso2a'",115],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",115],["T_VARIABLE","$order_info",117],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",117],"]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","request",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","post",117],"[",["T_CONSTANT_ENCAPSED_STRING","'billingfirstname'",117],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",117],["T_VARIABLE","$order_info",118],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_lastname'",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","request",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","post",118],"[",["T_CONSTANT_ENCAPSED_STRING","'billinglastname'",118],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",118],["T_VARIABLE","$order_info",119],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","request",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","post",119],"[",["T_CONSTANT_ENCAPSED_STRING","'billingpremise'",119],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",119],["T_VARIABLE","$order_info",120],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","request",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","post",120],"[",["T_CONSTANT_ENCAPSED_STRING","'billingstreet'",120],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",120],["T_VARIABLE","$order_info",121],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","request",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","post",121],"[",["T_CONSTANT_ENCAPSED_STRING","'billingtown'",121],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",121],["T_VARIABLE","$order_info",122],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone'",122],"]",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","request",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","post",122],"[",["T_CONSTANT_ENCAPSED_STRING","'billingcounty'",122],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",122],["T_VARIABLE","$order_info",123],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_zone_id'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_LNUMBER","0",123],";",["T_WHITESPACE","\n\t\t\t\t\t",123],["T_VARIABLE","$order_info",124],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country'",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$payment_country",124],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",124],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",124],["T_VARIABLE","$order_info",125],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_country_id'",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$payment_country",125],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",125],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",125],["T_VARIABLE","$order_info",126],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_postcode'",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","request",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","post",126],"[",["T_CONSTANT_ENCAPSED_STRING","'billingpostcode'",126],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t",126],["T_VARIABLE","$order_info",128],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_firstname'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","request",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","post",128],"[",["T_CONSTANT_ENCAPSED_STRING","'customerfirstname'",128],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",128],["T_VARIABLE","$order_info",129],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_lastname'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","request",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","post",129],"[",["T_CONSTANT_ENCAPSED_STRING","'customerlastname'",129],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",129],["T_VARIABLE","$order_info",130],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_1'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","request",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","post",130],"[",["T_CONSTANT_ENCAPSED_STRING","'customerpremise'",130],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",130],["T_VARIABLE","$order_info",131],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address_2'",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","post",131],"[",["T_CONSTANT_ENCAPSED_STRING","'customerstreet'",131],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",131],["T_VARIABLE","$order_info",132],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_city'",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","request",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","post",132],"[",["T_CONSTANT_ENCAPSED_STRING","'customertown'",132],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",132],["T_VARIABLE","$order_info",133],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone'",133],"]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","request",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","post",133],"[",["T_CONSTANT_ENCAPSED_STRING","'customercounty'",133],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",133],["T_VARIABLE","$order_info",134],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_zone_id'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_LNUMBER","0",134],";",["T_WHITESPACE","\n\t\t\t\t\t",134],["T_VARIABLE","$order_info",135],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$shipping_country",135],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",135],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",135],["T_VARIABLE","$order_info",136],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_country_id'",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$shipping_country",136],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",136],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",136],["T_VARIABLE","$order_info",137],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_postcode'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","request",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","post",137],"[",["T_CONSTANT_ENCAPSED_STRING","'customerpostcode'",137],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","model_extension_payment_securetrading_pp",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","editOrder",139],"(",["T_VARIABLE","$order_info",139],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",139],"]",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$order_info",139],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",139],["T_VARIABLE","$postcode_status",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","request",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","post",141],"[",["T_CONSTANT_ENCAPSED_STRING","'securityresponsepostcode'",141],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",141],["T_VARIABLE","$security_code_status",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","request",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","post",142],"[",["T_CONSTANT_ENCAPSED_STRING","'securityresponsesecuritycode'",142],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",142],["T_VARIABLE","$address_status",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","request",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","post",143],"[",["T_CONSTANT_ENCAPSED_STRING","'securityresponseaddress'",143],"]",";",["T_WHITESPACE","\n\n\t\t\t\t\t",143],["T_VARIABLE","$message",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","sprintf",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","language",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_CONSTANT_ENCAPSED_STRING","'text_postcode_check'",145],")",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$status_code_mapping",145],"[",["T_VARIABLE","$postcode_status",145],"]",")",["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",145],";",["T_WHITESPACE","\n\t\t\t\t\t",145],["T_VARIABLE","$message",146],["T_WHITESPACE"," ",146],["T_CONCAT_EQUAL",".=",146],["T_WHITESPACE"," ",146],["T_STRING","sprintf",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","language",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_CONSTANT_ENCAPSED_STRING","'text_security_code_check'",146],")",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$status_code_mapping",146],"[",["T_VARIABLE","$security_code_status",146],"]",")",["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",146],";",["T_WHITESPACE","\n\t\t\t\t\t",146],["T_VARIABLE","$message",147],["T_WHITESPACE"," ",147],["T_CONCAT_EQUAL",".=",147],["T_WHITESPACE"," ",147],["T_STRING","sprintf",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","language",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'text_address_check'",147],")",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$status_code_mapping",147],"[",["T_VARIABLE","$address_status",147],"]",")",["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",147],";",["T_WHITESPACE","\n\n\t\t\t\t\t",147],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_ISSET","isset",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","request",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","post",149],"[",["T_CONSTANT_ENCAPSED_STRING","'transactionreference'",149],"]",")",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",149],["T_VARIABLE","$transactionreference",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","request",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","post",150],"[",["T_CONSTANT_ENCAPSED_STRING","'transactionreference'",150],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",150],"}",["T_WHITESPACE"," ",151],["T_ELSE","else",151],["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",151],["T_VARIABLE","$transactionreference",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","''",152],";",["T_WHITESPACE","\n\t\t\t\t\t",152],"}",["T_WHITESPACE","\n\t\t\t\t\t",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","model_extension_payment_securetrading_pp",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","addReference",154],"(",["T_VARIABLE","$order_info",154],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",154],"]",",",["T_WHITESPACE"," ",154],["T_VARIABLE","$transactionreference",154],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",154],["T_IF","if",156],["T_WHITESPACE"," ",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","request",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","post",156],"[",["T_CONSTANT_ENCAPSED_STRING","'errorcode'",156],"]",["T_WHITESPACE"," ",156],["T_IS_EQUAL","==",156],["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'0'",156],")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",156],["T_VARIABLE","$order_status_id",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","config",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","get",157],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_order_status_id'",157],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",157],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","model_extension_payment_securetrading_pp",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","confirmOrder",159],"(",["T_VARIABLE","$order_info",159],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",159],"]",",",["T_WHITESPACE"," ",159],["T_VARIABLE","$order_status_id",159],")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","model_extension_payment_securetrading_pp",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","updateOrder",160],"(",["T_VARIABLE","$order_info",160],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",160],"]",",",["T_WHITESPACE"," ",160],["T_VARIABLE","$order_status_id",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$message",160],")",";",["T_WHITESPACE","\n\t\t\t\t\t",160],"}",["T_WHITESPACE"," ",161],["T_ELSEIF","elseif",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","request",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","post",161],"[",["T_CONSTANT_ENCAPSED_STRING","'errorcode'",161],"]",["T_WHITESPACE"," ",161],["T_IS_EQUAL","==",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'70000'",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",161],["T_VARIABLE","$order_status_id",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","config",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'securetrading_pp_declined_order_status_id'",162],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",162],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","model_extension_payment_securetrading_pp",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","updateOrder",164],"(",["T_VARIABLE","$order_info",164],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",164],"]",",",["T_WHITESPACE"," ",164],["T_VARIABLE","$order_status_id",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$message",164],")",";",["T_WHITESPACE","\n\t\t\t\t\t",164],"}",["T_WHITESPACE","\n\t\t\t\t",165],"}",["T_WHITESPACE","\n\t\t\t",166],"}",["T_WHITESPACE","\n\t\t",167],"}",["T_WHITESPACE","\n\t",168],"}",["T_WHITESPACE","\n",169],"}"]
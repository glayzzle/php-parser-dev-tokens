[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionPaymentLiqPay",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$data",4],"[",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",4],"]",["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","get",4],"(",["T_CONSTANT_ENCAPSED_STRING","'button_confirm'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","load",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model",6],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$order_info",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","model_checkout_order",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","getOrder",8],"(",["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","session",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","data",8],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",8],"]",")",";",["T_WHITESPACE","\n\n\t\t",8],["T_VARIABLE","$data",10],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",10],"]",["T_WHITESPACE"," ",10],"=",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/liqpay.com\/?do=clickNbuy'",10],";",["T_WHITESPACE","\n\n\t\t",10],["T_VARIABLE","$xml",12],["T_WHITESPACE","  ",12],"=",["T_WHITESPACE"," ",12],["T_CONSTANT_ENCAPSED_STRING","'<request>'",12],";",["T_WHITESPACE","\n\t\t",12],["T_VARIABLE","$xml",13],["T_WHITESPACE"," ",13],["T_CONCAT_EQUAL",".=",13],["T_WHITESPACE"," ",13],["T_CONSTANT_ENCAPSED_STRING","'\t<version>1.2<\/version>'",13],";",["T_WHITESPACE","\n\t\t",13],["T_VARIABLE","$xml",14],["T_WHITESPACE"," ",14],["T_CONCAT_EQUAL",".=",14],["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","'\t<result_url>'",14],["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","url",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","link",14],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/success'",14],",",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","''",14],",",["T_WHITESPACE"," ",14],["T_STRING","true",14],")",["T_WHITESPACE"," ",14],".",["T_WHITESPACE"," ",14],["T_CONSTANT_ENCAPSED_STRING","'<\/result_url>'",14],";",["T_WHITESPACE","\n\t\t",14],["T_VARIABLE","$xml",15],["T_WHITESPACE"," ",15],["T_CONCAT_EQUAL",".=",15],["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'\t<server_url>'",15],["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","url",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","link",15],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/liqpay\/callback'",15],",",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","''",15],",",["T_WHITESPACE"," ",15],["T_STRING","true",15],")",["T_WHITESPACE"," ",15],".",["T_WHITESPACE"," ",15],["T_CONSTANT_ENCAPSED_STRING","'<\/server_url>'",15],";",["T_WHITESPACE","\n\t\t",15],["T_VARIABLE","$xml",16],["T_WHITESPACE"," ",16],["T_CONCAT_EQUAL",".=",16],["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'\t<merchant_id>'",16],["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_merchant'",16],")",["T_WHITESPACE"," ",16],".",["T_WHITESPACE"," ",16],["T_CONSTANT_ENCAPSED_STRING","'<\/merchant_id>'",16],";",["T_WHITESPACE","\n\t\t",16],["T_VARIABLE","$xml",17],["T_WHITESPACE"," ",17],["T_CONCAT_EQUAL",".=",17],["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'\t<order_id>'",17],["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","session",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'order_id'",17],"]",["T_WHITESPACE"," ",17],".",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'<\/order_id>'",17],";",["T_WHITESPACE","\n\t\t",17],["T_VARIABLE","$xml",18],["T_WHITESPACE"," ",18],["T_CONCAT_EQUAL",".=",18],["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'\t<amount>'",18],["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","currency",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","format",18],"(",["T_VARIABLE","$order_info",18],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",18],"]",",",["T_WHITESPACE"," ",18],["T_VARIABLE","$order_info",18],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",18],"]",",",["T_WHITESPACE"," ",18],["T_VARIABLE","$order_info",18],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_value'",18],"]",",",["T_WHITESPACE"," ",18],["T_STRING","false",18],")",["T_WHITESPACE"," ",18],".",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'<\/amount>'",18],";",["T_WHITESPACE","\n\t\t",18],["T_VARIABLE","$xml",19],["T_WHITESPACE"," ",19],["T_CONCAT_EQUAL",".=",19],["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'\t<currency>'",19],["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_VARIABLE","$order_info",19],"[",["T_CONSTANT_ENCAPSED_STRING","'currency_code'",19],"]",["T_WHITESPACE"," ",19],".",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'<\/currency>'",19],";",["T_WHITESPACE","\n\t\t",19],["T_VARIABLE","$xml",20],["T_WHITESPACE"," ",20],["T_CONCAT_EQUAL",".=",20],["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'\t<description>'",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","config",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'config_name'",20],")",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","' '",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_firstname'",20],"]",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","' '",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_1'",20],"]",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","' '",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address_2'",20],"]",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","' '",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_city'",20],"]",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","' '",20],["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_VARIABLE","$order_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",20],"]",["T_WHITESPACE"," ",20],".",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'<\/description>'",20],";",["T_WHITESPACE","\n\t\t",20],["T_VARIABLE","$xml",21],["T_WHITESPACE"," ",21],["T_CONCAT_EQUAL",".=",21],["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'\t<default_phone><\/default_phone>'",21],";",["T_WHITESPACE","\n\t\t",21],["T_VARIABLE","$xml",22],["T_WHITESPACE"," ",22],["T_CONCAT_EQUAL",".=",22],["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'\t<pay_way>'",22],["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","config",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_type'",22],")",["T_WHITESPACE"," ",22],".",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'<\/pay_way>'",22],";",["T_WHITESPACE","\n\t\t",22],["T_VARIABLE","$xml",23],["T_WHITESPACE"," ",23],["T_CONCAT_EQUAL",".=",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'<\/request>'",23],";",["T_WHITESPACE","\n\n\t\t",23],["T_VARIABLE","$data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'xml'",25],"]",["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","base64_encode",25],"(",["T_VARIABLE","$xml",25],")",";",["T_WHITESPACE","\n\t\t",25],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'signature'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","base64_encode",26],"(",["T_STRING","sha1",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","config",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_signature'",26],")",["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_VARIABLE","$xml",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","config",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_signature'",26],")",",",["T_WHITESPACE"," ",26],["T_STRING","true",26],")",")",";",["T_WHITESPACE","\n\n\t\t",26],["T_RETURN","return",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","load",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","view",28],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/liqpay'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$data",28],")",";",["T_WHITESPACE","\n\t",28],"}",["T_WHITESPACE","\n\n\t",29],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","callback",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n\t\t",31],["T_VARIABLE","$xml",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","base64_decode",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","request",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","post",32],"[",["T_CONSTANT_ENCAPSED_STRING","'operation_xml'",32],"]",")",";",["T_WHITESPACE","\n\t\t",32],["T_VARIABLE","$signature",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","base64_encode",33],"(",["T_STRING","sha1",33],"(",["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","config",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","get",33],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_signature'",33],")",["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_VARIABLE","$xml",33],["T_WHITESPACE"," ",33],".",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","config",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","get",33],"(",["T_CONSTANT_ENCAPSED_STRING","'liqpay_signature'",33],")",",",["T_WHITESPACE"," ",33],["T_STRING","true",33],")",")",";",["T_WHITESPACE","\n\n\t\t",33],["T_VARIABLE","$posleft",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","strpos",35],"(",["T_VARIABLE","$xml",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'order_id'",35],")",";",["T_WHITESPACE","\n\t\t",35],["T_VARIABLE","$posright",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","strpos",36],"(",["T_VARIABLE","$xml",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'\/order_id'",36],")",";",["T_WHITESPACE","\n\n\t\t",36],["T_VARIABLE","$order_id",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","substr",38],"(",["T_VARIABLE","$xml",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$posleft",38],["T_WHITESPACE"," ",38],"+",["T_WHITESPACE"," ",38],["T_LNUMBER","9",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$posright",38],["T_WHITESPACE"," ",38],"-",["T_WHITESPACE"," ",38],["T_VARIABLE","$posleft",38],["T_WHITESPACE"," ",38],"-",["T_WHITESPACE"," ",38],["T_LNUMBER","10",38],")",";",["T_WHITESPACE","\n\n\t\t",38],["T_IF","if",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$signature",40],["T_WHITESPACE"," ",40],["T_IS_EQUAL","==",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","request",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","post",40],"[",["T_CONSTANT_ENCAPSED_STRING","'signature'",40],"]",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","load",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","model",41],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/order'",41],")",";",["T_WHITESPACE","\n\n\t\t\t",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","model_checkout_order",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","addOrderHistory",43],"(",["T_VARIABLE","$order_id",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","config",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","get",43],"(",["T_CONSTANT_ENCAPSED_STRING","'config_order_status_id'",43],")",")",";",["T_WHITESPACE","\n\t\t",43],"}",["T_WHITESPACE","\n\t",44],"}",["T_WHITESPACE","\n",45],"}"]
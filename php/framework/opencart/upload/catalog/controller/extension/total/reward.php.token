[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionTotalReward",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$points",4],["T_WHITESPACE"," ",4],"=",["T_WHITESPACE"," ",4],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","customer",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","getRewardPoints",4],"(",")",";",["T_WHITESPACE","\n\n\t\t",4],["T_VARIABLE","$points_total",6],["T_WHITESPACE"," ",6],"=",["T_WHITESPACE"," ",6],["T_LNUMBER","0",6],";",["T_WHITESPACE","\n\n\t\t",6],["T_FOREACH","foreach",8],["T_WHITESPACE"," ",8],"(",["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","cart",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","getProducts",8],"(",")",["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$product",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t\t\t",8],["T_IF","if",9],["T_WHITESPACE"," ",9],"(",["T_VARIABLE","$product",9],"[",["T_CONSTANT_ENCAPSED_STRING","'points'",9],"]",")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t\t\t",9],["T_VARIABLE","$points_total",10],["T_WHITESPACE"," ",10],["T_PLUS_EQUAL","+=",10],["T_WHITESPACE"," ",10],["T_VARIABLE","$product",10],"[",["T_CONSTANT_ENCAPSED_STRING","'points'",10],"]",";",["T_WHITESPACE","\n\t\t\t",10],"}",["T_WHITESPACE","\n\t\t",11],"}",["T_WHITESPACE","\n\n\t\t",12],["T_IF","if",14],["T_WHITESPACE"," ",14],"(",["T_VARIABLE","$points",14],["T_WHITESPACE"," ",14],["T_BOOLEAN_AND","&&",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$points_total",14],["T_WHITESPACE"," ",14],["T_BOOLEAN_AND","&&",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","config",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'reward_status'",14],")",")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\t\t\t",14],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","load",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","language",15],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/reward'",15],")",";",["T_WHITESPACE","\n\n\t\t\t",15],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","sprintf",17],"(",["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","language",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'heading_title'",17],")",",",["T_WHITESPACE"," ",17],["T_VARIABLE","$points",17],")",";",["T_WHITESPACE","\n\n\t\t\t",17],["T_VARIABLE","$data",19],"[",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",19],"]",["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","language",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","get",19],"(",["T_CONSTANT_ENCAPSED_STRING","'text_loading'",19],")",";",["T_WHITESPACE","\n\n\t\t\t",19],["T_VARIABLE","$data",21],"[",["T_CONSTANT_ENCAPSED_STRING","'entry_reward'",21],"]",["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","sprintf",21],"(",["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","language",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","get",21],"(",["T_CONSTANT_ENCAPSED_STRING","'entry_reward'",21],")",",",["T_WHITESPACE"," ",21],["T_VARIABLE","$points_total",21],")",";",["T_WHITESPACE","\n\n\t\t\t",21],["T_VARIABLE","$data",23],"[",["T_CONSTANT_ENCAPSED_STRING","'button_reward'",23],"]",["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","language",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'button_reward'",23],")",";",["T_WHITESPACE","\n\n\t\t\t",23],["T_IF","if",25],["T_WHITESPACE"," ",25],"(",["T_ISSET","isset",25],"(",["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","session",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",25],"]",")",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n\t\t\t\t",25],["T_VARIABLE","$data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",26],"]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","session",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","data",26],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",26],"]",";",["T_WHITESPACE","\n\t\t\t",26],"}",["T_WHITESPACE"," ",27],["T_ELSE","else",27],["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t\t",27],["T_VARIABLE","$data",28],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",28],"]",["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","''",28],";",["T_WHITESPACE","\n\t\t\t",28],"}",["T_WHITESPACE","\n\n\t\t\t",29],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","load",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","view",31],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/reward'",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$data",31],")",";",["T_WHITESPACE","\n\t\t",31],"}",["T_WHITESPACE","\n\t",32],"}",["T_WHITESPACE","\n\n\t",33],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","reward",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","load",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","language",36],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/reward'",36],")",";",["T_WHITESPACE","\n\n\t\t",36],["T_VARIABLE","$json",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",")",";",["T_WHITESPACE","\n\n\t\t",38],["T_VARIABLE","$points",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","customer",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getRewardPoints",40],"(",")",";",["T_WHITESPACE","\n\n\t\t",40],["T_VARIABLE","$points_total",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_LNUMBER","0",42],";",["T_WHITESPACE","\n\n\t\t",42],["T_FOREACH","foreach",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","cart",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getProducts",44],"(",")",["T_WHITESPACE"," ",44],["T_AS","as",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$product",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t\t",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$product",45],"[",["T_CONSTANT_ENCAPSED_STRING","'points'",45],"]",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n\t\t\t\t",45],["T_VARIABLE","$points_total",46],["T_WHITESPACE"," ",46],["T_PLUS_EQUAL","+=",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$product",46],"[",["T_CONSTANT_ENCAPSED_STRING","'points'",46],"]",";",["T_WHITESPACE","\n\t\t\t",46],"}",["T_WHITESPACE","\n\t\t",47],"}",["T_WHITESPACE","\n\n\t\t",48],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_EMPTY","empty",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","request",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","post",50],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",50],"]",")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t\t",50],["T_VARIABLE","$json",51],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","language",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'error_reward'",51],")",";",["T_WHITESPACE","\n\t\t",51],"}",["T_WHITESPACE","\n\n\t\t",52],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","request",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","post",54],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",54],"]",["T_WHITESPACE"," ",54],">",["T_WHITESPACE"," ",54],["T_VARIABLE","$points",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n\t\t\t",54],["T_VARIABLE","$json",55],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","sprintf",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","language",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'error_points'",55],")",",",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","request",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","post",55],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",55],"]",")",";",["T_WHITESPACE","\n\t\t",55],"}",["T_WHITESPACE","\n\n\t\t",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","request",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","post",58],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",58],"]",["T_WHITESPACE"," ",58],">",["T_WHITESPACE"," ",58],["T_VARIABLE","$points_total",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t\t",58],["T_VARIABLE","$json",59],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","sprintf",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","language",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_CONSTANT_ENCAPSED_STRING","'error_maximum'",59],")",",",["T_WHITESPACE"," ",59],["T_VARIABLE","$points_total",59],")",";",["T_WHITESPACE","\n\t\t",59],"}",["T_WHITESPACE","\n\n\t\t",60],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_VARIABLE","$json",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t\t",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","session",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","data",63],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",63],"]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","abs",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","request",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","post",63],"[",["T_CONSTANT_ENCAPSED_STRING","'reward'",63],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","session",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","data",65],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",65],"]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","language",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'text_success'",65],")",";",["T_WHITESPACE","\n\n\t\t\t",65],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_ISSET","isset",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","request",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","post",67],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",67],"]",")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t\t",67],["T_VARIABLE","$json",68],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",68],"]",["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","url",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","link",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","request",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","post",68],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",68],"]",")",";",["T_WHITESPACE","\n\t\t\t",68],"}",["T_WHITESPACE"," ",69],["T_ELSE","else",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$json",70],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect'",70],"]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","url",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","link",70],"(",["T_CONSTANT_ENCAPSED_STRING","'checkout\/cart'",70],")",";",["T_WHITESPACE","\t\n\t\t\t",70],"}",["T_WHITESPACE","\n\t\t",71],"}",["T_WHITESPACE","\n\n\t\t",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","response",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","addHeader",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",74],")",";",["T_WHITESPACE","\n\t\t",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","response",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","setOutput",75],"(",["T_STRING","json_encode",75],"(",["T_VARIABLE","$json",75],")",")",";",["T_WHITESPACE","\n\t",75],"}",["T_WHITESPACE","\n",76],"}",["T_WHITESPACE","\n",77]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_CLASS","class",3],["T_WHITESPACE"," ",3],["T_STRING","ControllerExtensionModuleAmazonLogin",3],["T_WHITESPACE"," ",3],["T_EXTENDS","extends",3],["T_WHITESPACE"," ",3],["T_STRING","Controller",3],["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t",3],["T_PUBLIC","public",4],["T_WHITESPACE"," ",4],["T_FUNCTION","function",4],["T_WHITESPACE"," ",4],["T_STRING","index",4],"(",")",["T_WHITESPACE"," ",4],"{",["T_WHITESPACE","\n\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","load",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","model",5],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay'",5],")",";",["T_WHITESPACE","\n\n\t\t",5],["T_IF","if",7],["T_WHITESPACE"," ",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","config",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","get",7],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_status'",7],")",["T_WHITESPACE"," ",7],["T_BOOLEAN_AND","&&",7],["T_WHITESPACE"," ",7],["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","config",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","get",7],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_status'",7],")",["T_WHITESPACE"," ",7],["T_BOOLEAN_AND","&&",7],["T_WHITESPACE"," ",7],"!",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","customer",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","isLogged",7],"(",")",["T_WHITESPACE"," ",7],["T_BOOLEAN_AND","&&",7],["T_WHITESPACE"," ",7],"!",["T_EMPTY","empty",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","request",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","server",7],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTPS'",7],"]",")",")",["T_WHITESPACE"," ",7],"{",["T_WHITESPACE","\n\t\t\t",7],["T_COMMENT","\/\/ capital L in Amazon cookie name is required, do not alter for coding standards\n",8],["T_WHITESPACE","\t\t\t",9],["T_IF","if",9],["T_WHITESPACE"," ",9],"(",["T_ISSET","isset",9],"(",["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","request",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","cookie",9],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_Login_state_cache'",9],"]",")",")",["T_WHITESPACE"," ",9],"{",["T_WHITESPACE","\n\t\t\t\t",9],["T_STRING","setcookie",10],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_Login_state_cache'",10],",",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","''",10],",",["T_WHITESPACE"," ",10],["T_STRING","time",10],"(",")",["T_WHITESPACE"," ",10],"-",["T_WHITESPACE"," ",10],["T_LNUMBER","4815162342",10],")",";",["T_WHITESPACE","\n\t\t\t",10],"}",["T_WHITESPACE","\n\n\t\t\t",11],["T_VARIABLE","$amazon_payment_js",13],["T_WHITESPACE"," ",13],"=",["T_WHITESPACE"," ",13],["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","model_extension_payment_amazon_login_pay",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","getWidgetJs",13],"(",")",";",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","document",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","addScript",14],"(",["T_VARIABLE","$amazon_payment_js",14],")",";",["T_WHITESPACE","\n\n\t\t\t",14],["T_VARIABLE","$data",16],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_client_id'",16],"]",["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","config",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","get",16],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_client_id'",16],")",";",["T_WHITESPACE","\n\t\t\t",16],["T_VARIABLE","$data",17],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_return_url'",17],"]",["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","url",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","link",17],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/amazon_login\/login'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","''",17],",",["T_WHITESPACE"," ",17],["T_STRING","true",17],")",";",["T_WHITESPACE","\n\t\t\t",17],["T_IF","if",18],["T_WHITESPACE"," ",18],"(",["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","config",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_test'",18],")",["T_WHITESPACE"," ",18],["T_IS_EQUAL","==",18],["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'sandbox'",18],")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\t\t\t\t",18],["T_VARIABLE","$data",19],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_test'",19],"]",["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","true",19],";",["T_WHITESPACE","\n\t\t\t",19],"}",["T_WHITESPACE","\n\n\t\t\t",20],["T_IF","if",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","config",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","get",22],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_type'",22],")",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\t\t\t\t",22],["T_VARIABLE","$data",23],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_type'",23],"]",["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","config",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","get",23],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_type'",23],")",";",["T_WHITESPACE","\n\t\t\t",23],"}",["T_WHITESPACE"," ",24],["T_ELSE","else",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t\t\t",24],["T_VARIABLE","$data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_type'",25],"]",["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'lwa'",25],";",["T_WHITESPACE","\n\t\t\t",25],"}",["T_WHITESPACE","\n\n\t\t\t",26],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","config",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_colour'",28],")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t\t",28],["T_VARIABLE","$data",29],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_colour'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","config",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_colour'",29],")",";",["T_WHITESPACE","\n\t\t\t",29],"}",["T_WHITESPACE"," ",30],["T_ELSE","else",30],["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t\t\t",30],["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_colour'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'gold'",31],";",["T_WHITESPACE","\n\t\t\t",31],"}",["T_WHITESPACE","\n\n\t\t\t",32],["T_IF","if",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","config",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","get",34],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_size'",34],")",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t\t\t",34],["T_VARIABLE","$data",35],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_size'",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","config",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_size'",35],")",";",["T_WHITESPACE","\n\t\t\t",35],"}",["T_WHITESPACE"," ",36],["T_ELSE","else",36],["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n\t\t\t\t",36],["T_VARIABLE","$data",37],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_button_size'",37],"]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'medium'",37],";",["T_WHITESPACE","\n\t\t\t",37],"}",["T_WHITESPACE","\n\n\t\t\t",38],["T_IF","if",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","config",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_language'",40],")",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\t\t\t\t",40],["T_VARIABLE","$data",41],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_language'",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","config",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_language'",41],")",";",["T_WHITESPACE","\n\t\t\t",41],"}",["T_WHITESPACE"," ",42],["T_ELSE","else",42],["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n\t\t\t\t",42],["T_VARIABLE","$data",43],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_login_pay_language'",43],"]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'en-US'",43],";",["T_WHITESPACE","\n\t\t\t",43],"}",["T_WHITESPACE","\n\n\t\t\t",44],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","load",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","view",46],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/amazon_login'",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$data",46],")",";",["T_WHITESPACE","\n\t\t",46],"}",["T_WHITESPACE","\n\t",47],"}",["T_WHITESPACE","\n\n\t",48],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","login",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n\t\t",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","model",51],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay'",51],")",";",["T_WHITESPACE","\n\t\t",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","load",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","model",52],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/customer'",52],")",";",["T_WHITESPACE","\n\t\t",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","load",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","model",53],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/customer_group'",53],")",";",["T_WHITESPACE","\n\t\t",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","load",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","language",54],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay'",54],")",";",["T_WHITESPACE","\n\n\t\t",54],["T_UNSET","unset",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","session",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","data",56],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",56],"]",")",";",["T_WHITESPACE","\n\t\t",56],["T_UNSET","unset",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","session",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","data",57],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",57],"]",")",";",["T_WHITESPACE","\n\n\t\t",57],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_ISSET","isset",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","request",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",59],"]",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","session",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","data",60],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","request",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",60],"]",";",["T_WHITESPACE","\n\t\t\t",60],["T_VARIABLE","$user",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","model_extension_payment_amazon_login_pay",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getUserInfo",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","request",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",61],"]",")",";",["T_WHITESPACE","\n\t\t",61],"}",["T_WHITESPACE"," ",62],["T_ELSE","else",62],["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n\t\t\t",62],["T_VARIABLE","$user",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",")",";",["T_WHITESPACE","\n\t\t",63],"}",["T_WHITESPACE","\n\n\t\t",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_ARRAY_CAST","(array)",66],["T_VARIABLE","$user",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n\t\t\t",66],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_ISSET","isset",67],"(",["T_VARIABLE","$user",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","error",67],")",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t\t\t",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","model_extension_payment_amazon_login_pay",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","logger",68],"(",["T_VARIABLE","$user",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","error",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","': '",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$user",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","error_description",68],")",";",["T_WHITESPACE","\n\t\t\t\t",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","session",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","data",69],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",69],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",69],"]",["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","language",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'error_login'",69],")",";",["T_WHITESPACE","\n\t\t\t\t",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","response",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","redirect",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","url",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","link",70],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay\/loginFailure'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","''",70],",",["T_WHITESPACE"," ",70],["T_STRING","true",70],")",")",";",["T_WHITESPACE","\n\t\t\t",70],"}",["T_WHITESPACE","\n\n\t\t\t",71],["T_VARIABLE","$customer_info",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","model_account_customer",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getCustomerByEmail",73],"(",["T_VARIABLE","$user",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","email",73],")",";",["T_WHITESPACE","\n\t\t\t",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","model_extension_payment_amazon_login_pay",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","logger",74],"(",["T_VARIABLE","$user",74],")",";",["T_WHITESPACE","\n\n\t\t\t",74],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$customer_info",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n\t\t\t\t",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","validate",77],"(",["T_VARIABLE","$user",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","email",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n\t\t\t\t\t",77],["T_UNSET","unset",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","session",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","data",78],"[",["T_CONSTANT_ENCAPSED_STRING","'guest'",78],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",78],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","load",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","model",80],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/address'",80],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","config",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax_customer'",82],")",["T_WHITESPACE"," ",82],["T_IS_EQUAL","==",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'payment'",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",82],["T_VARIABLE","$payment_address",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","model_account_address",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAddress",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","customer",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getAddressId",83],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",83],["T_IF","if",84],"(",["T_VARIABLE","$payment_address",84],")","{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","session",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","data",85],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$payment_address",85],";",["T_WHITESPACE","\n\t\t\t\t\t\t",85],"}",["T_WHITESPACE","\n\t\t\t\t\t",86],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",87],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","config",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax_customer'",89],")",["T_WHITESPACE"," ",89],["T_IS_EQUAL","==",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'shipping'",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",89],["T_VARIABLE","$shipping_address",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","model_account_address",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getAddress",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","customer",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getAddressId",90],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",90],["T_IF","if",91],"(",["T_VARIABLE","$shipping_address",91],")","{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","session",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","data",92],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$shipping_address",92],";",["T_WHITESPACE","\n\t\t\t\t\t\t",92],"}",["T_WHITESPACE","\n\t\t\t\t\t",93],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","config",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","get",96],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_activity'",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","load",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","model",97],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/activity'",97],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",97],["T_VARIABLE","$activity_data",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",99],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","customer",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getId",100],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",100],["T_CONSTANT_ENCAPSED_STRING","'name'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","customer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getFirstName",101],"(",")",["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","' '",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","customer",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getLastName",101],"(",")",["T_WHITESPACE","\n\t\t\t\t\t\t",101],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","model_account_activity",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addActivity",104],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$activity_data",104],")",";",["T_WHITESPACE","\n\t\t\t\t\t",104],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","model_extension_payment_amazon_login_pay",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","logger",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer logged in - ID: '",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$customer_info",107],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",107],"]",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","', Email: '",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_VARIABLE","$customer_info",107],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",107],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",107],"}",["T_WHITESPACE"," ",108],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n\t\t\t\t\t",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","model_extension_payment_amazon_login_pay",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","logger",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not login to - ID: '",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$customer_info",109],"[",["T_CONSTANT_ENCAPSED_STRING","'customer_id'",109],"]",["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","', Email: '",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_VARIABLE","$customer_info",109],"[",["T_CONSTANT_ENCAPSED_STRING","'email'",109],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","session",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","data",110],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",110],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","language",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","get",110],"(",["T_CONSTANT_ENCAPSED_STRING","'error_login'",110],")",";",["T_WHITESPACE","\n\t\t\t\t\t",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","response",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","redirect",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","url",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","link",111],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay\/loginFailure'",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],",",["T_WHITESPACE"," ",111],["T_STRING","true",111],")",")",";",["T_WHITESPACE","\n\t\t\t\t",111],"}",["T_WHITESPACE","\n\t\t\t\t",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","response",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","redirect",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","url",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","link",113],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/account'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","''",113],",",["T_WHITESPACE"," ",113],["T_STRING","true",113],")",")",";",["T_WHITESPACE","\n\t\t\t",113],"}",["T_WHITESPACE"," ",114],["T_ELSE","else",114],["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n\t\t\t\t",114],["T_VARIABLE","$country_id",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_LNUMBER","0",115],";",["T_WHITESPACE","\n\t\t\t\t",115],["T_VARIABLE","$zone_id",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_LNUMBER","0",116],";",["T_WHITESPACE","\n\n\t\t\t\t",116],["T_VARIABLE","$full_name",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","explode",118],"(",["T_CONSTANT_ENCAPSED_STRING","' '",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$user",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","name",118],")",";",["T_WHITESPACE","\n\t\t\t\t",118],["T_VARIABLE","$last_name",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","array_pop",119],"(",["T_VARIABLE","$full_name",119],")",";",["T_WHITESPACE","\n\t\t\t\t",119],["T_VARIABLE","$first_name",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","implode",120],"(",["T_CONSTANT_ENCAPSED_STRING","' '",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$full_name",120],")",";",["T_WHITESPACE","\n\n\t\t\t\t",120],["T_VARIABLE","$data",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",["T_WHITESPACE","\n\t\t\t\t\t",122],["T_CONSTANT_ENCAPSED_STRING","'customer_group_id'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_INT_CAST","(int)",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","config",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","get",123],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",123],")",",",["T_WHITESPACE","\n\t\t\t\t\t",123],["T_CONSTANT_ENCAPSED_STRING","'firstname'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$first_name",124],",",["T_WHITESPACE","\n\t\t\t\t\t",124],["T_CONSTANT_ENCAPSED_STRING","'lastname'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$last_name",125],",",["T_WHITESPACE","\n\t\t\t\t\t",125],["T_CONSTANT_ENCAPSED_STRING","'email'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$user",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","email",126],",",["T_WHITESPACE","\n\t\t\t\t\t",126],["T_CONSTANT_ENCAPSED_STRING","'telephone'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","''",127],",",["T_WHITESPACE","\n\t\t\t\t\t",127],["T_CONSTANT_ENCAPSED_STRING","'fax'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","''",128],",",["T_WHITESPACE","\n\t\t\t\t\t",128],["T_CONSTANT_ENCAPSED_STRING","'password'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_STRING","uniqid",129],"(",["T_STRING","rand",129],"(",")",",",["T_WHITESPACE"," ",129],["T_STRING","true",129],")",",",["T_WHITESPACE","\n\t\t\t\t\t",129],["T_CONSTANT_ENCAPSED_STRING","'company'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","''",130],",",["T_WHITESPACE","\n\t\t\t\t\t",130],["T_CONSTANT_ENCAPSED_STRING","'address_1'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","''",131],",",["T_WHITESPACE","\n\t\t\t\t\t",131],["T_CONSTANT_ENCAPSED_STRING","'address_2'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","''",132],",",["T_WHITESPACE","\n\t\t\t\t\t",132],["T_CONSTANT_ENCAPSED_STRING","'city'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","''",133],",",["T_WHITESPACE","\n\t\t\t\t\t",133],["T_CONSTANT_ENCAPSED_STRING","'postcode'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","''",134],",",["T_WHITESPACE","\n\t\t\t\t\t",134],["T_CONSTANT_ENCAPSED_STRING","'country_id'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_INT_CAST","(int)",135],["T_VARIABLE","$country_id",135],",",["T_WHITESPACE","\n\t\t\t\t\t",135],["T_CONSTANT_ENCAPSED_STRING","'zone_id'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_INT_CAST","(int)",136],["T_VARIABLE","$zone_id",136],",",["T_WHITESPACE","\n\t\t\t\t",136],")",";",["T_WHITESPACE","\n\n\t\t\t\t",137],["T_VARIABLE","$customer_id",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","model_extension_payment_amazon_login_pay",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addCustomer",139],"(",["T_VARIABLE","$data",139],")",";",["T_WHITESPACE","\n\n\t\t\t\t",139],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","model_extension_payment_amazon_login_pay",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","logger",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer ID created: '",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$customer_id",141],")",";",["T_WHITESPACE","\n\n\t\t\t\t",141],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","validate",143],"(",["T_VARIABLE","$user",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","email",143],")",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n\t\t\t\t\t",143],["T_UNSET","unset",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","session",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","data",144],"[",["T_CONSTANT_ENCAPSED_STRING","'guest'",144],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","load",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","model",146],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/address'",146],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",146],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","config",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","get",148],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax_customer'",148],")",["T_WHITESPACE"," ",148],["T_IS_EQUAL","==",148],["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'payment'",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",148],["T_VARIABLE","$payment_address",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","model_account_address",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getAddress",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","customer",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getAddressId",149],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",149],["T_IF","if",150],"(",["T_VARIABLE","$payment_address",150],")","{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","session",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","data",151],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$payment_address",151],";",["T_WHITESPACE","\n\t\t\t\t\t\t",151],"}",["T_WHITESPACE","\n\t\t\t\t\t",152],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",153],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","config",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","get",155],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax_customer'",155],")",["T_WHITESPACE"," ",155],["T_IS_EQUAL","==",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'shipping'",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",155],["T_VARIABLE","$shipping_address",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","model_account_address",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getAddress",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","customer",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getAddressId",156],"(",")",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t",156],["T_IF","if",157],"(",["T_VARIABLE","$shipping_address",157],")","{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","session",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","data",158],"[",["T_CONSTANT_ENCAPSED_STRING","'shipping_address'",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$shipping_address",158],";",["T_WHITESPACE","\n\t\t\t\t\t\t",158],"}",["T_WHITESPACE","\n\t\t\t\t\t",159],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",160],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","config",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_activity'",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","load",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","model",163],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/activity'",163],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",163],["T_VARIABLE","$activity_data",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_WHITESPACE","\n\t\t\t\t\t\t\t",165],["T_CONSTANT_ENCAPSED_STRING","'customer_id'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","customer",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getId",166],"(",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t\t",166],["T_CONSTANT_ENCAPSED_STRING","'name'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","customer",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getFirstName",167],"(",")",["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","' '",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","customer",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getLastName",167],"(",")",["T_WHITESPACE","\n\t\t\t\t\t\t",167],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",168],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","model_account_activity",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","addActivity",170],"(",["T_CONSTANT_ENCAPSED_STRING","'login'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$activity_data",170],")",";",["T_WHITESPACE","\n\t\t\t\t\t",170],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",171],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","model_extension_payment_amazon_login_pay",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","logger",173],"(",["T_CONSTANT_ENCAPSED_STRING","'Customer logged in - ID: '",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$customer_id",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","', Email: '",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$user",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","email",173],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","response",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","redirect",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","url",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","link",175],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/account'",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","''",175],",",["T_WHITESPACE"," ",175],["T_STRING","true",175],")",")",";",["T_WHITESPACE","\n\t\t\t\t",175],"}",["T_WHITESPACE"," ",176],["T_ELSE","else",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n\t\t\t\t\t",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","model_extension_payment_amazon_login_pay",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","logger",177],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not login to - ID: '",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$customer_id",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","', Email: '",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$user",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","email",177],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",177],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","session",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","data",179],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",179],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","language",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","get",179],"(",["T_CONSTANT_ENCAPSED_STRING","'error_login'",179],")",";",["T_WHITESPACE","\n\t\t\t\t\t",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","response",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","redirect",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","url",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","link",180],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay\/loginFailure'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","''",180],",",["T_WHITESPACE"," ",180],["T_STRING","true",180],")",")",";",["T_WHITESPACE","\n\t\t\t\t",180],"}",["T_WHITESPACE","\n\t\t\t",181],"}",["T_WHITESPACE","\n\t\t",182],"}",["T_WHITESPACE"," ",183],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t\t\t",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","session",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","data",184],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",184],"]","[",["T_CONSTANT_ENCAPSED_STRING","'error'",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","language",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","get",184],"(",["T_CONSTANT_ENCAPSED_STRING","'error_login'",184],")",";",["T_WHITESPACE","\n\t\t\t",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","response",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","redirect",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","url",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","link",185],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/amazon_login_pay\/loginFailure'",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","''",185],",",["T_WHITESPACE"," ",185],["T_STRING","true",185],")",")",";",["T_WHITESPACE","\n\t\t",185],"}",["T_WHITESPACE","\n\t",186],"}",["T_WHITESPACE","\n\n\t",187],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","logout",189],"(",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t",189],["T_UNSET","unset",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","session",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","data",190],"[",["T_CONSTANT_ENCAPSED_STRING","'lpa'",190],"]",")",";",["T_WHITESPACE","\n\t\t",190],["T_UNSET","unset",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","session",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","data",191],"[",["T_CONSTANT_ENCAPSED_STRING","'access_token'",191],"]",")",";",["T_WHITESPACE","\n\n\t\t",191],["T_COMMENT","\/\/ capital L in Amazon cookie name is required, do not alter for coding standards\n",193],["T_WHITESPACE","\t\t",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_ISSET","isset",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","request",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","cookie",194],"[",["T_CONSTANT_ENCAPSED_STRING","'amazon_Login_state_cache'",194],"]",")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t\t\t",194],["T_STRING","setcookie",195],"(",["T_CONSTANT_ENCAPSED_STRING","'amazon_Login_state_cache'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","''",195],",",["T_WHITESPACE"," ",195],["T_STRING","time",195],"(",")",["T_WHITESPACE"," ",195],"-",["T_WHITESPACE"," ",195],["T_LNUMBER","4815162342",195],")",";",["T_WHITESPACE","\n\t\t",195],"}",["T_WHITESPACE","\n\t",196],"}",["T_WHITESPACE","\n\n\t",197],["T_PROTECTED","protected",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","validate",199],"(",["T_VARIABLE","$email",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n\t\t",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(","!",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","customer",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","login",200],"(",["T_VARIABLE","$email",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","''",200],",",["T_WHITESPACE"," ",200],["T_STRING","true",200],")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n\t\t\t",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","error",201],"[",["T_CONSTANT_ENCAPSED_STRING","'warning'",201],"]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","language",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","get",201],"(",["T_CONSTANT_ENCAPSED_STRING","'error_login'",201],")",";",["T_WHITESPACE","\n\t\t",201],"}",["T_WHITESPACE","\n\n\t\t",202],["T_VARIABLE","$customer_info",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","model_account_customer",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getCustomerByEmail",204],"(",["T_VARIABLE","$email",204],")",";",["T_WHITESPACE","\n\n\t\t",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$customer_info",206],["T_WHITESPACE"," ",206],["T_BOOLEAN_AND","&&",206],["T_WHITESPACE"," ",206],"!",["T_VARIABLE","$customer_info",206],"[",["T_CONSTANT_ENCAPSED_STRING","'approved'",206],"]",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n\t\t\t",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","error",207],"[",["T_CONSTANT_ENCAPSED_STRING","'warning'",207],"]",["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","language",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_CONSTANT_ENCAPSED_STRING","'error_approved'",207],")",";",["T_WHITESPACE","\n\t\t",207],"}",["T_WHITESPACE","\n\n\t\t",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],"!",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","error",210],";",["T_WHITESPACE","\n\t",210],"}",["T_WHITESPACE","\n\n",211],"}",["T_WHITESPACE","\n",213]]
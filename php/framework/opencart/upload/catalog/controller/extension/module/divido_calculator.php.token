[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerExtensionModuleDividoCalculator",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/divido_calculator'",4],")",";",["T_WHITESPACE","\n\t\t",4],["T_VARIABLE","$this",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","load",5],["T_OBJECT_OPERATOR","->",5],["T_STRING","model",5],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/divido'",5],")",";",["T_WHITESPACE","\n\t\t",5],["T_VARIABLE","$this",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","load",6],["T_OBJECT_OPERATOR","->",6],["T_STRING","model",6],"(",["T_CONSTANT_ENCAPSED_STRING","'catalog\/product'",6],")",";",["T_WHITESPACE","\n\n\t\t",6],["T_VARIABLE","$product_selection",8],["T_WHITESPACE"," ",8],"=",["T_WHITESPACE"," ",8],["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","config",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","get",8],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_productselection'",8],")",";",["T_WHITESPACE","\n\t\t",8],["T_VARIABLE","$product_threshold",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","config",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","get",9],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_price_threshold'",9],")",";",["T_WHITESPACE","\n\n\t\t",9],["T_IF","if",11],["T_WHITESPACE"," ",11],"(","!",["T_ISSET","isset",11],"(",["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","request",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",11],"]",")",["T_WHITESPACE"," ",11],["T_BOOLEAN_OR","||",11],["T_WHITESPACE"," ",11],"!",["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","config",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_status'",11],")",["T_WHITESPACE"," ",11],["T_BOOLEAN_OR","||",11],["T_WHITESPACE"," ",11],"!",["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","config",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","get",11],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_calculator_status'",11],")",")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t\t",11],["T_RETURN","return",12],["T_WHITESPACE"," ",12],["T_STRING","false",12],";",["T_WHITESPACE","\n\t\t",12],"}",["T_WHITESPACE","\n\n\t\t",13],["T_VARIABLE","$product_info",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","model_catalog_product",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","getProduct",15],"(",["T_VARIABLE","$this",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","request",15],["T_OBJECT_OPERATOR","->",15],["T_STRING","get",15],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",15],"]",")",";",["T_WHITESPACE","\n\n\t\t",15],["T_VARIABLE","$price",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","0",17],";",["T_WHITESPACE","\n\t\t",17],["T_IF","if",18],["T_WHITESPACE"," ",18],"(","(",["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","config",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_price'",18],")",["T_WHITESPACE"," ",18],["T_BOOLEAN_AND","&&",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","customer",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","isLogged",18],"(",")",")",["T_WHITESPACE"," ",18],["T_BOOLEAN_OR","||",18],["T_WHITESPACE"," ",18],"!",["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","config",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","get",18],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_price'",18],")",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\t\t\t",18],["T_VARIABLE","$base_price",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],"!",["T_EMPTY","empty",19],"(",["T_VARIABLE","$product_info",19],"[",["T_CONSTANT_ENCAPSED_STRING","'special'",19],"]",")",["T_WHITESPACE"," ",19],"?",["T_WHITESPACE"," ",19],["T_VARIABLE","$product_info",19],"[",["T_CONSTANT_ENCAPSED_STRING","'special'",19],"]",["T_WHITESPACE"," ",19],":",["T_WHITESPACE"," ",19],["T_VARIABLE","$product_info",19],"[",["T_CONSTANT_ENCAPSED_STRING","'price'",19],"]",";",["T_WHITESPACE","\n\t\t\t",19],["T_VARIABLE","$price",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","tax",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","calculate",20],"(",["T_VARIABLE","$base_price",20],",",["T_WHITESPACE"," ",20],["T_VARIABLE","$product_info",20],"[",["T_CONSTANT_ENCAPSED_STRING","'tax_class_id'",20],"]",",",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","config",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","get",20],"(",["T_CONSTANT_ENCAPSED_STRING","'config_tax'",20],")",")",";",["T_WHITESPACE","\n\t\t",20],"}",["T_WHITESPACE","\n\n\t\t",21],["T_IF","if",23],["T_WHITESPACE"," ",23],"(",["T_VARIABLE","$product_selection",23],["T_WHITESPACE"," ",23],["T_IS_EQUAL","==",23],["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'threshold'",23],["T_WHITESPACE"," ",23],["T_BOOLEAN_AND","&&",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$product_threshold",23],["T_WHITESPACE"," ",23],">",["T_WHITESPACE"," ",23],["T_VARIABLE","$price",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\t\t\t",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_STRING","false",24],";",["T_WHITESPACE","\n\t\t",24],"}",["T_WHITESPACE","\n\n\t\t",25],["T_VARIABLE","$api_key",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","config",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'divido_api_key'",27],")",";",["T_WHITESPACE","\n\t\t",27],["T_VARIABLE","$key_parts",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","explode",28],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$api_key",28],")",";",["T_WHITESPACE","\n\t\t",28],["T_VARIABLE","$js_key",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","strtolower",29],"(",["T_STRING","array_shift",29],"(",["T_VARIABLE","$key_parts",29],")",")",";",["T_WHITESPACE","\n\n\t\t",29],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","model_extension_payment_divido",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","setMerchant",31],"(",["T_VARIABLE","$api_key",31],")",";",["T_WHITESPACE","\n\t\t",31],["T_VARIABLE","$plans",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","model_extension_payment_divido",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","getProductPlans",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","request",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","get",32],"[",["T_CONSTANT_ENCAPSED_STRING","'product_id'",32],"]",")",";",["T_WHITESPACE","\n\n\t\t",32],["T_IF","if",34],["T_WHITESPACE"," ",34],"(","!",["T_VARIABLE","$plans",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t\t",34],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_STRING","false",35],";",["T_WHITESPACE","\n\t\t",35],"}",["T_WHITESPACE","\n\n\t\t",36],["T_VARIABLE","$plans_ids",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","array_map",38],"(",["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$plan",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n\t\t\t",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$plan",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","id",39],";",["T_WHITESPACE","\n\t\t",39],"}",",",["T_WHITESPACE"," ",40],["T_VARIABLE","$plans",40],")",";",["T_WHITESPACE","\n\t\t",40],["T_VARIABLE","$plans_ids",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","array_unique",41],"(",["T_VARIABLE","$plans_ids",41],")",";",["T_WHITESPACE","\n\t\t",41],["T_VARIABLE","$plans_list",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","implode",42],"(",["T_CONSTANT_ENCAPSED_STRING","','",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$plans_ids",42],")",";",["T_WHITESPACE","\n\n\t\t",42],["T_VARIABLE","$data",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_WHITESPACE","\n\t\t\t",44],["T_CONSTANT_ENCAPSED_STRING","'text_choose_deposit'",45],["T_WHITESPACE","\t\t",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","language",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'text_choose_deposit'",45],")",",",["T_WHITESPACE","\n\t\t\t",45],["T_CONSTANT_ENCAPSED_STRING","'text_choose_plan'",46],["T_WHITESPACE","\t\t\t",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","language",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","get",46],"(",["T_CONSTANT_ENCAPSED_STRING","'text_choose_plan'",46],")",",",["T_WHITESPACE","\n\t\t\t",46],["T_CONSTANT_ENCAPSED_STRING","'text_checkout_title'",47],["T_WHITESPACE","\t\t",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","language",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_CONSTANT_ENCAPSED_STRING","'text_checkout_title'",47],")",",",["T_WHITESPACE","\n\t\t\t",47],["T_CONSTANT_ENCAPSED_STRING","'text_monthly_payments'",48],["T_WHITESPACE","\t\t",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","language",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'text_monthly_payments'",48],")",",",["T_WHITESPACE","\n\t\t\t",48],["T_CONSTANT_ENCAPSED_STRING","'text_months'",49],["T_WHITESPACE","\t\t\t\t",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","language",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'text_months'",49],")",",",["T_WHITESPACE","\n\t\t\t",49],["T_CONSTANT_ENCAPSED_STRING","'text_term'",50],["T_WHITESPACE","\t\t\t\t\t",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","language",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'text_term'",50],")",",",["T_WHITESPACE","\n\t\t\t",50],["T_CONSTANT_ENCAPSED_STRING","'text_deposit'",51],["T_WHITESPACE","\t\t\t\t",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","language",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'text_deposit'",51],")",",",["T_WHITESPACE","\n\t\t\t",51],["T_CONSTANT_ENCAPSED_STRING","'text_credit_amount'",52],["T_WHITESPACE","\t\t",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","language",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'text_credit_amount'",52],")",",",["T_WHITESPACE","\n\t\t\t",52],["T_CONSTANT_ENCAPSED_STRING","'text_amount_payable'",53],["T_WHITESPACE","\t\t",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","language",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","get",53],"(",["T_CONSTANT_ENCAPSED_STRING","'text_amount_payable'",53],")",",",["T_WHITESPACE","\n\t\t\t",53],["T_CONSTANT_ENCAPSED_STRING","'text_total_interest'",54],["T_WHITESPACE","\t\t",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","language",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'text_total_interest'",54],")",",",["T_WHITESPACE","\n\t\t\t",54],["T_CONSTANT_ENCAPSED_STRING","'text_monthly_installment'",55],["T_WHITESPACE","\t",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","language",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","get",55],"(",["T_CONSTANT_ENCAPSED_STRING","'text_monthly_installment'",55],")",",",["T_WHITESPACE","\n\t\t\t",55],["T_CONSTANT_ENCAPSED_STRING","'text_redirection'",56],["T_WHITESPACE","\t\t\t",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","language",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'text_redirection'",56],")",",",["T_WHITESPACE","\n\t\t\t",56],["T_CONSTANT_ENCAPSED_STRING","'merchant_script'",57],["T_WHITESPACE","\t\t\t",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],"\"",["T_ENCAPSED_AND_WHITESPACE","\/\/cdn.divido.com\/calculator\/",57],["T_CURLY_OPEN","{",57],["T_VARIABLE","$js_key",57],"}",["T_ENCAPSED_AND_WHITESPACE",".js",57],"\"",",",["T_WHITESPACE","\n\t\t\t",57],["T_CONSTANT_ENCAPSED_STRING","'product_price'",58],["T_WHITESPACE","\t\t\t\t",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$price",58],",",["T_WHITESPACE","\n\t\t\t",58],["T_CONSTANT_ENCAPSED_STRING","'plan_list'",59],["T_WHITESPACE","\t\t\t\t\t",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$plans_list",59],",",["T_WHITESPACE","\n\t\t\t",59],["T_CONSTANT_ENCAPSED_STRING","'generic_credit_req_error'",60],["T_WHITESPACE","\t",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Credit request could not be initiated'",60],",",["T_WHITESPACE","\n\t\t",60],")",";",["T_WHITESPACE","\n\n\t\t",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","load",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","view",63],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/module\/divido_calculator'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$data",63],")",";",["T_WHITESPACE","\n\t",63],"}",["T_WHITESPACE","\n",64],"}",["T_WHITESPACE","\n",65]]
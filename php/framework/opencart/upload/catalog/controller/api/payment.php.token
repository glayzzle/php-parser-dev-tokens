[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerApiPayment",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","address",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/payment'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_COMMENT","\/\/ Delete old payment address, payment methods and method so not to cause any issues if there is an error\n",6],["T_WHITESPACE","\t\t",7],["T_UNSET","unset",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","session",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","data",7],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",7],"]",")",";",["T_WHITESPACE","\n\t\t",7],["T_UNSET","unset",8],"(",["T_VARIABLE","$this",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","session",8],["T_OBJECT_OPERATOR","->",8],["T_STRING","data",8],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",8],"]",")",";",["T_WHITESPACE","\n\t\t",8],["T_UNSET","unset",9],"(",["T_VARIABLE","$this",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","session",9],["T_OBJECT_OPERATOR","->",9],["T_STRING","data",9],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",9],"]",")",";",["T_WHITESPACE","\n\n\t\t",9],["T_VARIABLE","$json",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_ARRAY","array",11],"(",")",";",["T_WHITESPACE","\n\n\t\t",11],["T_IF","if",13],["T_WHITESPACE"," ",13],"(","!",["T_ISSET","isset",13],"(",["T_VARIABLE","$this",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","session",13],["T_OBJECT_OPERATOR","->",13],["T_STRING","data",13],"[",["T_CONSTANT_ENCAPSED_STRING","'api_id'",13],"]",")",")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$json",14],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",14],"]","[",["T_CONSTANT_ENCAPSED_STRING","'warning'",14],"]",["T_WHITESPACE"," ",14],"=",["T_WHITESPACE"," ",14],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","language",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","get",14],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",14],")",";",["T_WHITESPACE","\n\t\t",14],"}",["T_WHITESPACE"," ",15],["T_ELSE","else",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\t\t\t",15],["T_COMMENT","\/\/ Add keys for missing post vars\n",16],["T_WHITESPACE","\t\t\t",17],["T_VARIABLE","$keys",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_WHITESPACE","\n\t\t\t\t",17],["T_CONSTANT_ENCAPSED_STRING","'firstname'",18],",",["T_WHITESPACE","\n\t\t\t\t",18],["T_CONSTANT_ENCAPSED_STRING","'lastname'",19],",",["T_WHITESPACE","\n\t\t\t\t",19],["T_CONSTANT_ENCAPSED_STRING","'company'",20],",",["T_WHITESPACE","\n\t\t\t\t",20],["T_CONSTANT_ENCAPSED_STRING","'address_1'",21],",",["T_WHITESPACE","\n\t\t\t\t",21],["T_CONSTANT_ENCAPSED_STRING","'address_2'",22],",",["T_WHITESPACE","\n\t\t\t\t",22],["T_CONSTANT_ENCAPSED_STRING","'postcode'",23],",",["T_WHITESPACE","\n\t\t\t\t",23],["T_CONSTANT_ENCAPSED_STRING","'city'",24],",",["T_WHITESPACE","\n\t\t\t\t",24],["T_CONSTANT_ENCAPSED_STRING","'zone_id'",25],",",["T_WHITESPACE","\n\t\t\t\t",25],["T_CONSTANT_ENCAPSED_STRING","'country_id'",26],["T_WHITESPACE","\n\t\t\t",26],")",";",["T_WHITESPACE","\n\n\t\t\t",27],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$keys",29],["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$key",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n\t\t\t\t",29],["T_IF","if",30],["T_WHITESPACE"," ",30],"(","!",["T_ISSET","isset",30],"(",["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","request",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","post",30],"[",["T_VARIABLE","$key",30],"]",")",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t\t\t\t",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","request",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","post",31],"[",["T_VARIABLE","$key",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","''",31],";",["T_WHITESPACE","\n\t\t\t\t",31],"}",["T_WHITESPACE","\n\t\t\t",32],"}",["T_WHITESPACE","\n\n\t\t\t",33],["T_IF","if",35],["T_WHITESPACE"," ",35],"(","(",["T_STRING","utf8_strlen",35],"(",["T_STRING","trim",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","request",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","post",35],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",35],"]",")",")",["T_WHITESPACE"," ",35],"<",["T_WHITESPACE"," ",35],["T_LNUMBER","1",35],")",["T_WHITESPACE"," ",35],["T_BOOLEAN_OR","||",35],["T_WHITESPACE"," ",35],"(",["T_STRING","utf8_strlen",35],"(",["T_STRING","trim",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","request",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","post",35],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",35],"]",")",")",["T_WHITESPACE"," ",35],">",["T_WHITESPACE"," ",35],["T_LNUMBER","32",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n\t\t\t\t",35],["T_VARIABLE","$json",36],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",36],"]","[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",36],"]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","language",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",["T_CONSTANT_ENCAPSED_STRING","'error_firstname'",36],")",";",["T_WHITESPACE","\n\t\t\t",36],"}",["T_WHITESPACE","\n\n\t\t\t",37],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","(",["T_STRING","utf8_strlen",39],"(",["T_STRING","trim",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","request",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","post",39],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",39],"]",")",")",["T_WHITESPACE"," ",39],"<",["T_WHITESPACE"," ",39],["T_LNUMBER","1",39],")",["T_WHITESPACE"," ",39],["T_BOOLEAN_OR","||",39],["T_WHITESPACE"," ",39],"(",["T_STRING","utf8_strlen",39],"(",["T_STRING","trim",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","request",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","post",39],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",39],"]",")",")",["T_WHITESPACE"," ",39],">",["T_WHITESPACE"," ",39],["T_LNUMBER","32",39],")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n\t\t\t\t",39],["T_VARIABLE","$json",40],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",40],"]","[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","language",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'error_lastname'",40],")",";",["T_WHITESPACE","\n\t\t\t",40],"}",["T_WHITESPACE","\n\n\t\t\t",41],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","(",["T_STRING","utf8_strlen",43],"(",["T_STRING","trim",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","request",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","post",43],"[",["T_CONSTANT_ENCAPSED_STRING","'address_1'",43],"]",")",")",["T_WHITESPACE"," ",43],"<",["T_WHITESPACE"," ",43],["T_LNUMBER","3",43],")",["T_WHITESPACE"," ",43],["T_BOOLEAN_OR","||",43],["T_WHITESPACE"," ",43],"(",["T_STRING","utf8_strlen",43],"(",["T_STRING","trim",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","request",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","post",43],"[",["T_CONSTANT_ENCAPSED_STRING","'address_1'",43],"]",")",")",["T_WHITESPACE"," ",43],">",["T_WHITESPACE"," ",43],["T_LNUMBER","128",43],")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n\t\t\t\t",43],["T_VARIABLE","$json",44],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",44],"]","[",["T_CONSTANT_ENCAPSED_STRING","'address_1'",44],"]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","language",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'error_address_1'",44],")",";",["T_WHITESPACE","\n\t\t\t",44],"}",["T_WHITESPACE","\n\n\t\t\t",45],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","(",["T_STRING","utf8_strlen",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","request",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","post",47],"[",["T_CONSTANT_ENCAPSED_STRING","'city'",47],"]",")",["T_WHITESPACE"," ",47],"<",["T_WHITESPACE"," ",47],["T_LNUMBER","2",47],")",["T_WHITESPACE"," ",47],["T_BOOLEAN_OR","||",47],["T_WHITESPACE"," ",47],"(",["T_STRING","utf8_strlen",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","request",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","post",47],"[",["T_CONSTANT_ENCAPSED_STRING","'city'",47],"]",")",["T_WHITESPACE"," ",47],">",["T_WHITESPACE"," ",47],["T_LNUMBER","32",47],")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n\t\t\t\t",47],["T_VARIABLE","$json",48],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",48],"]","[",["T_CONSTANT_ENCAPSED_STRING","'city'",48],"]",["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","language",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'error_city'",48],")",";",["T_WHITESPACE","\n\t\t\t",48],"}",["T_WHITESPACE","\n\n\t\t\t",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","load",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","model",51],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/country'",51],")",";",["T_WHITESPACE","\n\n\t\t\t",51],["T_VARIABLE","$country_info",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","model_localisation_country",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getCountry",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","request",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","post",53],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",53],"]",")",";",["T_WHITESPACE","\n\n\t\t\t",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$country_info",55],["T_WHITESPACE"," ",55],["T_BOOLEAN_AND","&&",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$country_info",55],"[",["T_CONSTANT_ENCAPSED_STRING","'postcode_required'",55],"]",["T_WHITESPACE"," ",55],["T_BOOLEAN_AND","&&",55],["T_WHITESPACE"," ",55],"(",["T_STRING","utf8_strlen",55],"(",["T_STRING","trim",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","request",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","post",55],"[",["T_CONSTANT_ENCAPSED_STRING","'postcode'",55],"]",")",")",["T_WHITESPACE"," ",55],"<",["T_WHITESPACE"," ",55],["T_LNUMBER","2",55],["T_WHITESPACE"," ",55],["T_BOOLEAN_OR","||",55],["T_WHITESPACE"," ",55],["T_STRING","utf8_strlen",55],"(",["T_STRING","trim",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","request",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","post",55],"[",["T_CONSTANT_ENCAPSED_STRING","'postcode'",55],"]",")",")",["T_WHITESPACE"," ",55],">",["T_WHITESPACE"," ",55],["T_LNUMBER","10",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n\t\t\t\t",55],["T_VARIABLE","$json",56],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",56],"]","[",["T_CONSTANT_ENCAPSED_STRING","'postcode'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","language",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","get",56],"(",["T_CONSTANT_ENCAPSED_STRING","'error_postcode'",56],")",";",["T_WHITESPACE","\n\t\t\t",56],"}",["T_WHITESPACE","\n\n\t\t\t",57],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","request",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","post",59],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",59],"]",["T_WHITESPACE"," ",59],["T_IS_EQUAL","==",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","''",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t\t\t",59],["T_VARIABLE","$json",60],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",60],"]","[",["T_CONSTANT_ENCAPSED_STRING","'country'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","language",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'error_country'",60],")",";",["T_WHITESPACE","\n\t\t\t",60],"}",["T_WHITESPACE","\n\n\t\t\t",61],["T_IF","if",63],["T_WHITESPACE"," ",63],"(","!",["T_ISSET","isset",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","request",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","post",63],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",63],"]",")",["T_WHITESPACE"," ",63],["T_BOOLEAN_OR","||",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","request",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","post",63],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",63],"]",["T_WHITESPACE"," ",63],["T_IS_EQUAL","==",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","''",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n\t\t\t\t",63],["T_VARIABLE","$json",64],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",64],"]","[",["T_CONSTANT_ENCAPSED_STRING","'zone'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","language",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'error_zone'",64],")",";",["T_WHITESPACE","\n\t\t\t",64],"}",["T_WHITESPACE","\n\n\t\t\t",65],["T_COMMENT","\/\/ Custom field validation\n",67],["T_WHITESPACE","\t\t\t",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","load",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","model",68],"(",["T_CONSTANT_ENCAPSED_STRING","'account\/custom_field'",68],")",";",["T_WHITESPACE","\n\n\t\t\t",68],["T_VARIABLE","$custom_fields",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","model_account_custom_field",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getCustomFields",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","config",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'config_customer_group_id'",70],")",")",";",["T_WHITESPACE","\n\n\t\t\t",70],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$custom_fields",72],["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$custom_field",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t\t",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","(",["T_VARIABLE","$custom_field",73],"[",["T_CONSTANT_ENCAPSED_STRING","'location'",73],"]",["T_WHITESPACE"," ",73],["T_IS_EQUAL","==",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'address'",73],")",["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$custom_field",73],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",73],"]",["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_EMPTY","empty",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","request",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","post",73],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",73],"]","[",["T_VARIABLE","$custom_field",73],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field_id'",73],"]","]",")",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\t\t\t\t\t",73],["T_VARIABLE","$json",74],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",74],"]","[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$custom_field",74],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field_id'",74],"]","]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","sprintf",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","language",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'error_custom_field'",74],")",",",["T_WHITESPACE"," ",74],["T_VARIABLE","$custom_field",74],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",74],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",74],"}",["T_WHITESPACE"," ",75],["T_ELSEIF","elseif",75],["T_WHITESPACE"," ",75],"(","(",["T_VARIABLE","$custom_field",75],"[",["T_CONSTANT_ENCAPSED_STRING","'location'",75],"]",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'address'",75],")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$custom_field",75],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",75],"]",["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'text'",75],")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],"!",["T_EMPTY","empty",75],"(",["T_VARIABLE","$custom_field",75],"[",["T_CONSTANT_ENCAPSED_STRING","'validation'",75],"]",")",["T_WHITESPACE"," ",75],["T_BOOLEAN_AND","&&",75],["T_WHITESPACE"," ",75],"!",["T_STRING","filter_var",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","request",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","post",75],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",75],"]","[",["T_VARIABLE","$custom_field",75],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field_id'",75],"]","]",",",["T_WHITESPACE"," ",75],["T_STRING","FILTER_VALIDATE_REGEXP",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'regexp'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$custom_field",75],"[",["T_CONSTANT_ENCAPSED_STRING","'validation'",75],"]",")",")",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n\t\t\t\t\t",75],["T_VARIABLE","$json",76],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",76],"]","[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_VARIABLE","$custom_field",76],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field_id'",76],"]","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","sprintf",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","language",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'error_custom_field'",76],")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$custom_field",76],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",76],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",76],"}",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t",77],"}",["T_WHITESPACE","\n\n\t\t\t",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(","!",["T_VARIABLE","$json",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n\t\t\t\t",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","load",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","model",82],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/country'",82],")",";",["T_WHITESPACE","\n\n\t\t\t\t",82],["T_VARIABLE","$country_info",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","model_localisation_country",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getCountry",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","request",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","post",84],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",84],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$country_info",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n\t\t\t\t\t",86],["T_VARIABLE","$country",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$country_info",87],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",87],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",87],["T_VARIABLE","$iso_code_2",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$country_info",88],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",88],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",88],["T_VARIABLE","$iso_code_3",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$country_info",89],"[",["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",89],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",89],["T_VARIABLE","$address_format",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$country_info",90],"[",["T_CONSTANT_ENCAPSED_STRING","'address_format'",90],"]",";",["T_WHITESPACE","\n\t\t\t\t",90],"}",["T_WHITESPACE"," ",91],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n\t\t\t\t\t",91],["T_VARIABLE","$country",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","''",92],";",["T_WHITESPACE","\n\t\t\t\t\t",92],["T_VARIABLE","$iso_code_2",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","''",93],";",["T_WHITESPACE","\n\t\t\t\t\t",93],["T_VARIABLE","$iso_code_3",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","''",94],";",["T_WHITESPACE","\n\t\t\t\t\t",94],["T_VARIABLE","$address_format",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],";",["T_WHITESPACE","\n\t\t\t\t",95],"}",["T_WHITESPACE","\n\n\t\t\t\t",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","load",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","model",98],"(",["T_CONSTANT_ENCAPSED_STRING","'localisation\/zone'",98],")",";",["T_WHITESPACE","\n\n\t\t\t\t",98],["T_VARIABLE","$zone_info",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","model_localisation_zone",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getZone",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","request",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","post",100],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",100],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",100],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$zone_info",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n\t\t\t\t\t",102],["T_VARIABLE","$zone",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$zone_info",103],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",103],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",103],["T_VARIABLE","$zone_code",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$zone_info",104],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",104],"]",";",["T_WHITESPACE","\n\t\t\t\t",104],"}",["T_WHITESPACE"," ",105],["T_ELSE","else",105],["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n\t\t\t\t\t",105],["T_VARIABLE","$zone",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","''",106],";",["T_WHITESPACE","\n\t\t\t\t\t",106],["T_VARIABLE","$zone_code",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","''",107],";",["T_WHITESPACE","\n\t\t\t\t",107],"}",["T_WHITESPACE","\n\n\t\t\t\t",108],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","session",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","data",110],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_WHITESPACE","\n\t\t\t\t\t",110],["T_CONSTANT_ENCAPSED_STRING","'firstname'",111],["T_WHITESPACE","      ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","request",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","post",111],"[",["T_CONSTANT_ENCAPSED_STRING","'firstname'",111],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",111],["T_CONSTANT_ENCAPSED_STRING","'lastname'",112],["T_WHITESPACE","       ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","request",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","post",112],"[",["T_CONSTANT_ENCAPSED_STRING","'lastname'",112],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",112],["T_CONSTANT_ENCAPSED_STRING","'company'",113],["T_WHITESPACE","        ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","request",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","post",113],"[",["T_CONSTANT_ENCAPSED_STRING","'company'",113],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",113],["T_CONSTANT_ENCAPSED_STRING","'address_1'",114],["T_WHITESPACE","      ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","request",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","post",114],"[",["T_CONSTANT_ENCAPSED_STRING","'address_1'",114],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",114],["T_CONSTANT_ENCAPSED_STRING","'address_2'",115],["T_WHITESPACE","      ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","request",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","post",115],"[",["T_CONSTANT_ENCAPSED_STRING","'address_2'",115],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",115],["T_CONSTANT_ENCAPSED_STRING","'postcode'",116],["T_WHITESPACE","       ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","request",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","post",116],"[",["T_CONSTANT_ENCAPSED_STRING","'postcode'",116],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",116],["T_CONSTANT_ENCAPSED_STRING","'city'",117],["T_WHITESPACE","           ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","request",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","post",117],"[",["T_CONSTANT_ENCAPSED_STRING","'city'",117],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",117],["T_CONSTANT_ENCAPSED_STRING","'zone_id'",118],["T_WHITESPACE","        ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","request",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","post",118],"[",["T_CONSTANT_ENCAPSED_STRING","'zone_id'",118],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",118],["T_CONSTANT_ENCAPSED_STRING","'zone'",119],["T_WHITESPACE","           ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$zone",119],",",["T_WHITESPACE","\n\t\t\t\t\t",119],["T_CONSTANT_ENCAPSED_STRING","'zone_code'",120],["T_WHITESPACE","      ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$zone_code",120],",",["T_WHITESPACE","\n\t\t\t\t\t",120],["T_CONSTANT_ENCAPSED_STRING","'country_id'",121],["T_WHITESPACE","     ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","request",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","post",121],"[",["T_CONSTANT_ENCAPSED_STRING","'country_id'",121],"]",",",["T_WHITESPACE","\n\t\t\t\t\t",121],["T_CONSTANT_ENCAPSED_STRING","'country'",122],["T_WHITESPACE","        ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$country",122],",",["T_WHITESPACE","\n\t\t\t\t\t",122],["T_CONSTANT_ENCAPSED_STRING","'iso_code_2'",123],["T_WHITESPACE","     ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$iso_code_2",123],",",["T_WHITESPACE","\n\t\t\t\t\t",123],["T_CONSTANT_ENCAPSED_STRING","'iso_code_3'",124],["T_WHITESPACE","     ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$iso_code_3",124],",",["T_WHITESPACE","\n\t\t\t\t\t",124],["T_CONSTANT_ENCAPSED_STRING","'address_format'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$address_format",125],",",["T_WHITESPACE","\n\t\t\t\t\t",125],["T_CONSTANT_ENCAPSED_STRING","'custom_field'",126],["T_WHITESPACE","   ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_ISSET","isset",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","request",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","post",126],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",126],"]",")",["T_WHITESPACE"," ",126],"?",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","request",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","post",126],"[",["T_CONSTANT_ENCAPSED_STRING","'custom_field'",126],"]",["T_WHITESPACE"," ",126],":",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",")",["T_WHITESPACE","\n\t\t\t\t",126],")",";",["T_WHITESPACE","\n\n\t\t\t\t",127],["T_VARIABLE","$json",129],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","language",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","get",129],"(",["T_CONSTANT_ENCAPSED_STRING","'text_address'",129],")",";",["T_WHITESPACE","\n\t\t\t\t\n\t\t\t\t",129],["T_UNSET","unset",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","session",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","data",131],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",131],"]",")",";",["T_WHITESPACE","\n\t\t\t\t",131],["T_UNSET","unset",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","session",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","data",132],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",132],"]",")",";",["T_WHITESPACE","\n\t\t\t",132],"}",["T_WHITESPACE","\n\t\t",133],"}",["T_WHITESPACE","\n\n\t\t",134],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_ISSET","isset",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","request",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","server",136],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",136],"]",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n\t\t\t",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","response",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","addHeader",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin: '",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","request",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","server",137],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",137],"]",")",";",["T_WHITESPACE","\n\t\t\t",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","response",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","addHeader",138],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, OPTIONS'",138],")",";",["T_WHITESPACE","\n\t\t\t",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","response",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","addHeader",139],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Max-Age: 1000'",139],")",";",["T_WHITESPACE","\n\t\t\t",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","response",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","addHeader",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With'",140],")",";",["T_WHITESPACE","\n\t\t",140],"}",["T_WHITESPACE","\n\n\t\t",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","response",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","addHeader",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",143],")",";",["T_WHITESPACE","\n\t\t",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","response",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setOutput",144],"(",["T_STRING","json_encode",144],"(",["T_VARIABLE","$json",144],")",")",";",["T_WHITESPACE","\n\t",144],"}",["T_WHITESPACE","\n\n\t",145],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","methods",147],"(",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n\t\t",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","load",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","language",148],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/payment'",148],")",";",["T_WHITESPACE","\n\t\t\n\t\t",148],["T_COMMENT","\/\/ Delete past shipping methods and method just in case there is an error\n",150],["T_WHITESPACE","\t\t",151],["T_UNSET","unset",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","session",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","data",151],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",151],"]",")",";",["T_WHITESPACE","\n\t\t",151],["T_UNSET","unset",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","session",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","data",152],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",152],"]",")",";",["T_WHITESPACE","\n\n\t\t",152],["T_VARIABLE","$json",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",")",";",["T_WHITESPACE","\n\n\t\t",154],["T_IF","if",156],["T_WHITESPACE"," ",156],"(","!",["T_ISSET","isset",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","session",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","data",156],"[",["T_CONSTANT_ENCAPSED_STRING","'api_id'",156],"]",")",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n\t\t\t",156],["T_VARIABLE","$json",157],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",157],"]",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","language",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","get",157],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",157],")",";",["T_WHITESPACE","\n\t\t",157],"}",["T_WHITESPACE"," ",158],["T_ELSE","else",158],["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t",158],["T_COMMENT","\/\/ Payment Address\n",159],["T_WHITESPACE","\t\t\t",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(","!",["T_ISSET","isset",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","session",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","data",160],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n\t\t\t\t",160],["T_VARIABLE","$json",161],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",161],"]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","language",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","get",161],"(",["T_CONSTANT_ENCAPSED_STRING","'error_address'",161],")",";",["T_WHITESPACE","\n\t\t\t",161],"}",["T_WHITESPACE","\n\t\t\t\n\t\t\t",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(","!",["T_VARIABLE","$json",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t\t\t",164],["T_COMMENT","\/\/ Totals\n",165],["T_WHITESPACE","\t\t\t\t",166],["T_VARIABLE","$totals",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",166],["T_VARIABLE","$taxes",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","cart",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getTaxes",167],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",167],["T_VARIABLE","$total",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_LNUMBER","0",168],";",["T_WHITESPACE","\n\n\t\t\t\t",168],["T_COMMENT","\/\/ Because __call can not keep var references so we put them into an array. \n",170],["T_WHITESPACE","\t\t\t\t",171],["T_VARIABLE","$total_data",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_WHITESPACE","\n\t\t\t\t\t",171],["T_CONSTANT_ENCAPSED_STRING","'totals'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],"&",["T_VARIABLE","$totals",172],",",["T_WHITESPACE","\n\t\t\t\t\t",172],["T_CONSTANT_ENCAPSED_STRING","'taxes'",173],["T_WHITESPACE","  ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],"&",["T_VARIABLE","$taxes",173],",",["T_WHITESPACE","\n\t\t\t\t\t",173],["T_CONSTANT_ENCAPSED_STRING","'total'",174],["T_WHITESPACE","  ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],"&",["T_VARIABLE","$total",174],["T_WHITESPACE","\n\t\t\t\t",174],")",";",["T_WHITESPACE","\n\n\t\t\t\t",175],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","load",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","model",177],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/extension'",177],")",";",["T_WHITESPACE","\n\n\t\t\t\t",177],["T_VARIABLE","$sort_order",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",179],["T_VARIABLE","$results",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","model_extension_extension",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getExtensions",181],"(",["T_CONSTANT_ENCAPSED_STRING","'total'",181],")",";",["T_WHITESPACE","\n\n\t\t\t\t",181],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$results",183],["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$key",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$value",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t\t\t\t\t",183],["T_VARIABLE","$sort_order",184],"[",["T_VARIABLE","$key",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","config",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","get",184],"(",["T_VARIABLE","$value",184],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",184],"]",["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'_sort_order'",184],")",";",["T_WHITESPACE","\n\t\t\t\t",184],"}",["T_WHITESPACE","\n\n\t\t\t\t",185],["T_STRING","array_multisort",187],"(",["T_VARIABLE","$sort_order",187],",",["T_WHITESPACE"," ",187],["T_STRING","SORT_ASC",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$results",187],")",";",["T_WHITESPACE","\n\n\t\t\t\t",187],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_VARIABLE","$results",189],["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$result",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t\t\t\t",189],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","config",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","get",190],"(",["T_VARIABLE","$result",190],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",190],"]",["T_WHITESPACE"," ",190],".",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'_status'",190],")",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","load",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","model",191],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/'",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$result",191],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",191],"]",")",";",["T_WHITESPACE","\n\t\t\t\t\t\t\n\t\t\t\t\t\t",191],["T_COMMENT","\/\/ We have to put the totals in an array so that they pass by reference.\n",193],["T_WHITESPACE","\t\t\t\t\t\t",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_total_'",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$result",194],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",194],"]","}",["T_OBJECT_OPERATOR","->",194],["T_STRING","getTotal",194],"(",["T_VARIABLE","$total_data",194],")",";",["T_WHITESPACE","\n\t\t\t\t\t",194],"}",["T_WHITESPACE","\n\t\t\t\t",195],"}",["T_WHITESPACE","\n\n\t\t\t\t",196],["T_COMMENT","\/\/ Payment Methods\n",198],["T_WHITESPACE","\t\t\t\t",199],["T_VARIABLE","$json",199],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",199],"]",["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",199],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","load",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","model",201],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/extension'",201],")",";",["T_WHITESPACE","\n\n\t\t\t\t",201],["T_VARIABLE","$results",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","model_extension_extension",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getExtensions",203],"(",["T_CONSTANT_ENCAPSED_STRING","'payment'",203],")",";",["T_WHITESPACE","\n\n\t\t\t\t",203],["T_VARIABLE","$recurring",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","cart",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","hasRecurringProducts",205],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",205],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$results",207],["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$result",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n\t\t\t\t\t",207],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","config",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","get",208],"(",["T_VARIABLE","$result",208],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",208],"]",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'_status'",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","load",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","model",209],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/payment\/'",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_VARIABLE","$result",209],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",209],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",209],["T_VARIABLE","$method",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_payment_'",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_VARIABLE","$result",211],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",211],"]","}",["T_OBJECT_OPERATOR","->",211],["T_STRING","getMethod",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","session",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","data",211],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",211],"]",",",["T_WHITESPACE"," ",211],["T_VARIABLE","$total",211],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t\t",211],["T_IF","if",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$method",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_VARIABLE","$recurring",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_STRING","property_exists",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_payment_'",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",215],"]","}",",",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'recurringPayments'",215],")",["T_WHITESPACE"," ",215],["T_BOOLEAN_AND","&&",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],"{",["T_CONSTANT_ENCAPSED_STRING","'model_extension_payment_'",215],["T_WHITESPACE"," ",215],".",["T_WHITESPACE"," ",215],["T_VARIABLE","$result",215],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",215],"]","}",["T_OBJECT_OPERATOR","->",215],["T_STRING","recurringPayments",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t",215],["T_VARIABLE","$json",216],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",216],"]","[",["T_VARIABLE","$result",216],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",216],"]","]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$method",216],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",216],"}",["T_WHITESPACE","\n\t\t\t\t\t\t\t",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t",218],["T_VARIABLE","$json",219],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",219],"]","[",["T_VARIABLE","$result",219],"[",["T_CONSTANT_ENCAPSED_STRING","'code'",219],"]","]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$method",219],";",["T_WHITESPACE","\n\t\t\t\t\t\t\t",219],"}",["T_WHITESPACE","\n\t\t\t\t\t\t",220],"}",["T_WHITESPACE","\n\t\t\t\t\t",221],"}",["T_WHITESPACE","\n\t\t\t\t",222],"}",["T_WHITESPACE","\n\n\t\t\t\t",223],["T_VARIABLE","$sort_order",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",";",["T_WHITESPACE","\n\n\t\t\t\t",225],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_VARIABLE","$json",227],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",227],"]",["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$key",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$value",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t\t\t\t\t",227],["T_VARIABLE","$sort_order",228],"[",["T_VARIABLE","$key",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$value",228],"[",["T_CONSTANT_ENCAPSED_STRING","'sort_order'",228],"]",";",["T_WHITESPACE","\n\t\t\t\t",228],"}",["T_WHITESPACE","\n\n\t\t\t\t",229],["T_STRING","array_multisort",231],"(",["T_VARIABLE","$sort_order",231],",",["T_WHITESPACE"," ",231],["T_STRING","SORT_ASC",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$json",231],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",231],"]",")",";",["T_WHITESPACE","\n\n\t\t\t\t",231],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$json",233],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",233],"]",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n\t\t\t\t\t",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","session",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","data",234],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",234],"]",["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$json",234],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",234],"]",";",["T_WHITESPACE","\n\t\t\t\t",234],"}",["T_WHITESPACE"," ",235],["T_ELSE","else",235],["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t\t\t",235],["T_VARIABLE","$json",236],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","language",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","get",236],"(",["T_CONSTANT_ENCAPSED_STRING","'error_no_payment'",236],")",";",["T_WHITESPACE","\n\t\t\t\t",236],"}",["T_WHITESPACE","\n\t\t\t",237],"}",["T_WHITESPACE","\n\t\t",238],"}",["T_WHITESPACE","\n\n\t\t",239],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_ISSET","isset",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","request",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","server",241],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",241],"]",")",")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n\t\t\t",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","response",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addHeader",242],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin: '",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","request",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","server",242],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",242],"]",")",";",["T_WHITESPACE","\n\t\t\t",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","response",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addHeader",243],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, OPTIONS'",243],")",";",["T_WHITESPACE","\n\t\t\t",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","response",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","addHeader",244],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Max-Age: 1000'",244],")",";",["T_WHITESPACE","\n\t\t\t",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","response",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","addHeader",245],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With'",245],")",";",["T_WHITESPACE","\n\t\t",245],"}",["T_WHITESPACE","\n\n\t\t",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","response",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addHeader",248],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",248],")",";",["T_WHITESPACE","\n\t\t",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","response",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","setOutput",249],"(",["T_STRING","json_encode",249],"(",["T_VARIABLE","$json",249],")",")",";",["T_WHITESPACE","\n\t",249],"}",["T_WHITESPACE","\n\n\t",250],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","method",252],"(",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n\t\t",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","load",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","language",253],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/payment'",253],")",";",["T_WHITESPACE","\n\n\t\t",253],["T_COMMENT","\/\/ Delete old payment method so not to cause any issues if there is an error\n",255],["T_WHITESPACE","\t\t",256],["T_UNSET","unset",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","session",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","data",256],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",256],"]",")",";",["T_WHITESPACE","\n\n\t\t",256],["T_VARIABLE","$json",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",")",";",["T_WHITESPACE","\n\n\t\t",258],["T_IF","if",260],["T_WHITESPACE"," ",260],"(","!",["T_ISSET","isset",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","session",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","data",260],"[",["T_CONSTANT_ENCAPSED_STRING","'api_id'",260],"]",")",")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n\t\t\t",260],["T_VARIABLE","$json",261],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",261],"]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","language",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","get",261],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",261],")",";",["T_WHITESPACE","\n\t\t",261],"}",["T_WHITESPACE"," ",262],["T_ELSE","else",262],["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n\t\t\t",262],["T_COMMENT","\/\/ Payment Address\n",263],["T_WHITESPACE","\t\t\t",264],["T_IF","if",264],["T_WHITESPACE"," ",264],"(","!",["T_ISSET","isset",264],"(",["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","session",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","data",264],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_address'",264],"]",")",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n\t\t\t\t",264],["T_VARIABLE","$json",265],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",265],"]",["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","language",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","get",265],"(",["T_CONSTANT_ENCAPSED_STRING","'error_address'",265],")",";",["T_WHITESPACE","\n\t\t\t",265],"}",["T_WHITESPACE","\n\n\t\t\t",266],["T_COMMENT","\/\/ Payment Method\n",268],["T_WHITESPACE","\t\t\t",269],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_EMPTY","empty",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","session",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","data",269],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",269],"]",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n\t\t\t\t",269],["T_VARIABLE","$json",270],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",270],"]",["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","language",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","get",270],"(",["T_CONSTANT_ENCAPSED_STRING","'error_no_payment'",270],")",";",["T_WHITESPACE","\n\t\t\t",270],"}",["T_WHITESPACE"," ",271],["T_ELSEIF","elseif",271],["T_WHITESPACE"," ",271],"(","!",["T_ISSET","isset",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","request",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","post",271],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",271],"]",")",")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n\t\t\t\t",271],["T_VARIABLE","$json",272],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",272],"]",["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","language",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","get",272],"(",["T_CONSTANT_ENCAPSED_STRING","'error_method'",272],")",";",["T_WHITESPACE","\n\t\t\t",272],"}",["T_WHITESPACE"," ",273],["T_ELSEIF","elseif",273],["T_WHITESPACE"," ",273],"(","!",["T_ISSET","isset",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","session",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","data",273],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",273],"]","[",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","request",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","post",273],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",273],"]","]",")",")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n\t\t\t\t",273],["T_VARIABLE","$json",274],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","language",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'error_method'",274],")",";",["T_WHITESPACE","\n\t\t\t",274],"}",["T_WHITESPACE","\n\n\t\t\t",275],["T_IF","if",277],["T_WHITESPACE"," ",277],"(","!",["T_VARIABLE","$json",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n\t\t\t\t",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","session",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","data",278],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",278],"]",["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","session",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","data",278],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_methods'",278],"]","[",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","request",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","post",278],"[",["T_CONSTANT_ENCAPSED_STRING","'payment_method'",278],"]","]",";",["T_WHITESPACE","\n\n\t\t\t\t",278],["T_VARIABLE","$json",280],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",280],"]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","language",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","get",280],"(",["T_CONSTANT_ENCAPSED_STRING","'text_method'",280],")",";",["T_WHITESPACE","\n\t\t\t",280],"}",["T_WHITESPACE","\n\t\t",281],"}",["T_WHITESPACE","\n\n\t\t",282],["T_IF","if",284],["T_WHITESPACE"," ",284],"(",["T_ISSET","isset",284],"(",["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","request",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","server",284],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",284],"]",")",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n\t\t\t",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","response",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","addHeader",285],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin: '",285],["T_WHITESPACE"," ",285],".",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","request",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","server",285],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",285],"]",")",";",["T_WHITESPACE","\n\t\t\t",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","response",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","addHeader",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, OPTIONS'",286],")",";",["T_WHITESPACE","\n\t\t\t",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","response",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","addHeader",287],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Max-Age: 1000'",287],")",";",["T_WHITESPACE","\n\t\t\t",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","response",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","addHeader",288],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With'",288],")",";",["T_WHITESPACE","\n\t\t",288],"}",["T_WHITESPACE","\n\n\t\t",289],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","response",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","addHeader",291],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",291],")",";",["T_WHITESPACE","\n\t\t",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","response",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","setOutput",292],"(",["T_STRING","json_encode",292],"(",["T_VARIABLE","$json",292],")",")",";",["T_WHITESPACE","\n\t",292],"}",["T_WHITESPACE","\n",293],"}",["T_WHITESPACE","\n",294]]
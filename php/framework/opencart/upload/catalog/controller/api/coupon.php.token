[["T_OPEN_TAG","<?php\n",1],["T_CLASS","class",2],["T_WHITESPACE"," ",2],["T_STRING","ControllerApiCoupon",2],["T_WHITESPACE"," ",2],["T_EXTENDS","extends",2],["T_WHITESPACE"," ",2],["T_STRING","Controller",2],["T_WHITESPACE"," ",2],"{",["T_WHITESPACE","\n\t",2],["T_PUBLIC","public",3],["T_WHITESPACE"," ",3],["T_FUNCTION","function",3],["T_WHITESPACE"," ",3],["T_STRING","index",3],"(",")",["T_WHITESPACE"," ",3],"{",["T_WHITESPACE","\n\t\t",3],["T_VARIABLE","$this",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","load",4],["T_OBJECT_OPERATOR","->",4],["T_STRING","language",4],"(",["T_CONSTANT_ENCAPSED_STRING","'api\/coupon'",4],")",";",["T_WHITESPACE","\n\n\t\t",4],["T_COMMENT","\/\/ Delete past coupon in case there is an error\n",6],["T_WHITESPACE","\t\t",7],["T_UNSET","unset",7],"(",["T_VARIABLE","$this",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","session",7],["T_OBJECT_OPERATOR","->",7],["T_STRING","data",7],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",7],"]",")",";",["T_WHITESPACE","\n\n\t\t",7],["T_VARIABLE","$json",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_ARRAY","array",9],"(",")",";",["T_WHITESPACE","\n\n\t\t",9],["T_IF","if",11],["T_WHITESPACE"," ",11],"(","!",["T_ISSET","isset",11],"(",["T_VARIABLE","$this",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","session",11],["T_OBJECT_OPERATOR","->",11],["T_STRING","data",11],"[",["T_CONSTANT_ENCAPSED_STRING","'api_id'",11],"]",")",")",["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\t\t\t",11],["T_VARIABLE","$json",12],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",12],"]",["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_VARIABLE","$this",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","language",12],["T_OBJECT_OPERATOR","->",12],["T_STRING","get",12],"(",["T_CONSTANT_ENCAPSED_STRING","'error_permission'",12],")",";",["T_WHITESPACE","\n\t\t",12],"}",["T_WHITESPACE"," ",13],["T_ELSE","else",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\t\t\t",13],["T_VARIABLE","$this",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","load",14],["T_OBJECT_OPERATOR","->",14],["T_STRING","model",14],"(",["T_CONSTANT_ENCAPSED_STRING","'extension\/total\/coupon'",14],")",";",["T_WHITESPACE","\n\n\t\t\t",14],["T_IF","if",16],["T_WHITESPACE"," ",16],"(",["T_ISSET","isset",16],"(",["T_VARIABLE","$this",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","request",16],["T_OBJECT_OPERATOR","->",16],["T_STRING","post",16],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",16],"]",")",")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\t\t\t\t",16],["T_VARIABLE","$coupon",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","request",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","post",17],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",17],"]",";",["T_WHITESPACE","\n\t\t\t",17],"}",["T_WHITESPACE"," ",18],["T_ELSE","else",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\t\t\t\t",18],["T_VARIABLE","$coupon",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","''",19],";",["T_WHITESPACE","\n\t\t\t",19],"}",["T_WHITESPACE","\n\n\t\t\t",20],["T_VARIABLE","$coupon_info",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","model_extension_total_coupon",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getCoupon",22],"(",["T_VARIABLE","$coupon",22],")",";",["T_WHITESPACE","\n\n\t\t\t",22],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$coupon_info",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t\t\t\t",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","session",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","data",25],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",25],"]",["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","request",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","post",25],"[",["T_CONSTANT_ENCAPSED_STRING","'coupon'",25],"]",";",["T_WHITESPACE","\n\n\t\t\t\t",25],["T_VARIABLE","$json",27],"[",["T_CONSTANT_ENCAPSED_STRING","'success'",27],"]",["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","language",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'text_success'",27],")",";",["T_WHITESPACE","\n\t\t\t",27],"}",["T_WHITESPACE"," ",28],["T_ELSE","else",28],["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t\t\t",28],["T_VARIABLE","$json",29],"[",["T_CONSTANT_ENCAPSED_STRING","'error'",29],"]",["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","language",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get",29],"(",["T_CONSTANT_ENCAPSED_STRING","'error_coupon'",29],")",";",["T_WHITESPACE","\n\t\t\t",29],"}",["T_WHITESPACE","\n\t\t",30],"}",["T_WHITESPACE","\n\n\t\t",31],["T_IF","if",33],["T_WHITESPACE"," ",33],"(",["T_ISSET","isset",33],"(",["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","request",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","server",33],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",33],"]",")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n\t\t\t",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","response",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","addHeader",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Origin: '",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","request",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","server",34],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_ORIGIN'",34],"]",")",";",["T_WHITESPACE","\n\t\t\t",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","response",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","addHeader",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, OPTIONS'",35],")",";",["T_WHITESPACE","\n\t\t\t",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","response",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","addHeader",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Max-Age: 1000'",36],")",";",["T_WHITESPACE","\n\t\t\t",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","response",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","addHeader",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With'",37],")",";",["T_WHITESPACE","\n\t\t",37],"}",["T_WHITESPACE","\n\n\t\t",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","response",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","addHeader",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: application\/json'",40],")",";",["T_WHITESPACE","\n\t\t",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","response",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","setOutput",41],"(",["T_STRING","json_encode",41],"(",["T_VARIABLE","$json",41],")",")",";",["T_WHITESPACE","\n\t",41],"}",["T_WHITESPACE","\n",42],"}",["T_WHITESPACE","\n",43]]
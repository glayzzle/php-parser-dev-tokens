[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Handles Comment Post to WordPress and prevents duplicate comment posting.\n *\n * @package WordPress\n *\/",2],["T_WHITESPACE","\n\n",6],["T_IF","if",8],["T_WHITESPACE"," ",8],"(",["T_WHITESPACE"," ",8],["T_CONSTANT_ENCAPSED_STRING","'POST'",8],["T_WHITESPACE"," ",8],["T_IS_NOT_EQUAL","!=",8],["T_WHITESPACE"," ",8],["T_VARIABLE","$_SERVER",8],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",8],"]",["T_WHITESPACE"," ",8],")",["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\t",8],["T_VARIABLE","$protocol",9],["T_WHITESPACE"," ",9],"=",["T_WHITESPACE"," ",9],["T_VARIABLE","$_SERVER",9],"[",["T_CONSTANT_ENCAPSED_STRING","'SERVER_PROTOCOL'",9],"]",";",["T_WHITESPACE","\n\t",9],["T_IF","if",10],["T_WHITESPACE"," ",10],"(",["T_WHITESPACE"," ",10],"!",["T_WHITESPACE"," ",10],["T_STRING","in_array",10],"(",["T_WHITESPACE"," ",10],["T_VARIABLE","$protocol",10],",",["T_WHITESPACE"," ",10],["T_ARRAY","array",10],"(",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1'",10],",",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'HTTP\/2'",10],",",["T_WHITESPACE"," ",10],["T_CONSTANT_ENCAPSED_STRING","'HTTP\/2.0'",10],["T_WHITESPACE"," ",10],")",["T_WHITESPACE"," ",10],")",["T_WHITESPACE"," ",10],")",["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\t\t",10],["T_VARIABLE","$protocol",11],["T_WHITESPACE"," ",11],"=",["T_WHITESPACE"," ",11],["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.0'",11],";",["T_WHITESPACE","\n\t",11],"}",["T_WHITESPACE","\n\n\t",12],["T_STRING","header",14],"(",["T_CONSTANT_ENCAPSED_STRING","'Allow: POST'",14],")",";",["T_WHITESPACE","\n\t",14],["T_STRING","header",15],"(","\"",["T_VARIABLE","$protocol",15],["T_ENCAPSED_AND_WHITESPACE"," 405 Method Not Allowed",15],"\"",")",";",["T_WHITESPACE","\n\t",15],["T_STRING","header",16],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/plain'",16],")",";",["T_WHITESPACE","\n\t",16],["T_EXIT","exit",17],";",["T_WHITESPACE","\n",17],"}",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/** Sets up the WordPress Environment. *\/",20],["T_WHITESPACE","\n",20],["T_REQUIRE","require",21],"(",["T_WHITESPACE"," ",21],["T_STRING","dirname",21],"(",["T_FILE","__FILE__",21],")",["T_WHITESPACE"," ",21],".",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'\/wp-load.php'",21],["T_WHITESPACE"," ",21],")",";",["T_WHITESPACE","\n\n",21],["T_STRING","nocache_headers",23],"(",")",";",["T_WHITESPACE","\n\n",23],["T_VARIABLE","$comment",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","wp_handle_comment_submission",25],"(",["T_WHITESPACE"," ",25],["T_STRING","wp_unslash",25],"(",["T_WHITESPACE"," ",25],["T_VARIABLE","$_POST",25],["T_WHITESPACE"," ",25],")",["T_WHITESPACE"," ",25],")",";",["T_WHITESPACE","\n",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(",["T_WHITESPACE"," ",26],["T_STRING","is_wp_error",26],"(",["T_WHITESPACE"," ",26],["T_VARIABLE","$comment",26],["T_WHITESPACE"," ",26],")",["T_WHITESPACE"," ",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\t",26],["T_VARIABLE","$data",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","intval",27],"(",["T_WHITESPACE"," ",27],["T_VARIABLE","$comment",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get_error_data",27],"(",")",["T_WHITESPACE"," ",27],")",";",["T_WHITESPACE","\n\t",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_WHITESPACE"," ",28],"!",["T_WHITESPACE"," ",28],["T_EMPTY","empty",28],"(",["T_WHITESPACE"," ",28],["T_VARIABLE","$data",28],["T_WHITESPACE"," ",28],")",["T_WHITESPACE"," ",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n\t\t",28],["T_STRING","wp_die",29],"(",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'<p>'",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_VARIABLE","$comment",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","get_error_message",29],"(",")",["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'<\/p>'",29],",",["T_WHITESPACE"," ",29],["T_STRING","__",29],"(",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'Comment Submission Failure'",29],["T_WHITESPACE"," ",29],")",",",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'response'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$data",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'back_link'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_STRING","true",29],["T_WHITESPACE"," ",29],")",["T_WHITESPACE"," ",29],")",";",["T_WHITESPACE","\n\t",29],"}",["T_WHITESPACE"," ",30],["T_ELSE","else",30],["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n\t\t",30],["T_EXIT","exit",31],";",["T_WHITESPACE","\n\t",31],"}",["T_WHITESPACE","\n",32],"}",["T_WHITESPACE","\n\n",33],["T_VARIABLE","$user",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","wp_get_current_user",35],"(",")",";",["T_WHITESPACE","\n\n",35],["T_DOC_COMMENT","\/**\n * Perform other actions when comment cookies are set.\n *\n * @since 3.4.0\n *\n * @param WP_Comment $comment Comment object.\n * @param WP_User    $user    User object. The user may not exist.\n *\/",37],["T_WHITESPACE","\n",44],["T_STRING","do_action",45],"(",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'set_comment_cookies'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$comment",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$user",45],["T_WHITESPACE"," ",45],")",";",["T_WHITESPACE","\n\n",45],["T_VARIABLE","$location",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_EMPTY","empty",47],"(",["T_WHITESPACE"," ",47],["T_VARIABLE","$_POST",47],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect_to'",47],"]",["T_WHITESPACE"," ",47],")",["T_WHITESPACE"," ",47],"?",["T_WHITESPACE"," ",47],["T_STRING","get_comment_link",47],"(",["T_WHITESPACE"," ",47],["T_VARIABLE","$comment",47],["T_WHITESPACE"," ",47],")",["T_WHITESPACE"," ",47],":",["T_WHITESPACE"," ",47],["T_VARIABLE","$_POST",47],"[",["T_CONSTANT_ENCAPSED_STRING","'redirect_to'",47],"]",["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'#comment-'",47],["T_WHITESPACE"," ",47],".",["T_WHITESPACE"," ",47],["T_VARIABLE","$comment",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","comment_ID",47],";",["T_WHITESPACE","\n\n",47],["T_DOC_COMMENT","\/**\n * Filters the location URI to send the commenter after posting.\n *\n * @since 2.0.5\n *\n * @param string     $location The 'redirect_to' URI sent via $_POST.\n * @param WP_Comment $comment  Comment object.\n *\/",49],["T_WHITESPACE","\n",56],["T_VARIABLE","$location",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","apply_filters",57],"(",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'comment_post_redirect'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$location",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$comment",57],["T_WHITESPACE"," ",57],")",";",["T_WHITESPACE","\n\n",57],["T_STRING","wp_safe_redirect",59],"(",["T_WHITESPACE"," ",59],["T_VARIABLE","$location",59],["T_WHITESPACE"," ",59],")",";",["T_WHITESPACE","\n",59],["T_EXIT","exit",60],";",["T_WHITESPACE","\n",60]]
[["T_OPEN_TAG","<?php\n",1],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2],["T_COMMENT","\/\/ PhpConcept Library - Zip Module 2.8.2\n",3],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4],["T_COMMENT","\/\/ License GNU\/LGPL - Vincent Blavet - August 2009\n",5],["T_COMMENT","\/\/ http:\/\/www.phpconcept.net\n",6],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",7],["T_COMMENT","\/\/\n",8],["T_COMMENT","\/\/ Presentation :\n",9],["T_COMMENT","\/\/   PclZip is a PHP library that manage ZIP archives.\n",10],["T_COMMENT","\/\/   So far tests show that archives generated by PclZip are readable by\n",11],["T_COMMENT","\/\/   WinZip application and other tools.\n",12],["T_COMMENT","\/\/\n",13],["T_COMMENT","\/\/ Description :\n",14],["T_COMMENT","\/\/   See readme.txt and http:\/\/www.phpconcept.net\n",15],["T_COMMENT","\/\/\n",16],["T_COMMENT","\/\/ Warning :\n",17],["T_COMMENT","\/\/   This library and the associated files are non commercial, non professional\n",18],["T_COMMENT","\/\/   work.\n",19],["T_COMMENT","\/\/   It should not have unexpected results. However if any damage is caused by\n",20],["T_COMMENT","\/\/   this software the author can not be responsible.\n",21],["T_COMMENT","\/\/   The use of this software is at the risk of the user.\n",22],["T_COMMENT","\/\/\n",23],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",24],["T_COMMENT","\/\/ $Id: pclzip.lib.php,v 1.60 2009\/09\/30 21:01:04 vblavet Exp $\n",25],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",26],["T_WHITESPACE","\n  ",27],["T_COMMENT","\/\/ ----- Constants\n",28],["T_WHITESPACE","  ",29],["T_IF","if",29],["T_WHITESPACE"," ",29],"(","!",["T_STRING","defined",29],"(",["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_READ_BLOCK_SIZE'",29],")",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_STRING","define",30],"(",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_READ_BLOCK_SIZE'",30],",",["T_WHITESPACE"," ",30],["T_LNUMBER","2048",30],["T_WHITESPACE"," ",30],")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_COMMENT","\/\/ ----- File list separator\n",33],["T_WHITESPACE","  ",34],["T_COMMENT","\/\/ In version 1.x of PclZip, the separator for file list is a space\n",34],["T_WHITESPACE","  ",35],["T_COMMENT","\/\/ (which is not a very smart choice, specifically for windows paths !).\n",35],["T_WHITESPACE","  ",36],["T_COMMENT","\/\/ A better separator should be a comma (,). This constant gives you the\n",36],["T_WHITESPACE","  ",37],["T_COMMENT","\/\/ abilty to change that.\n",37],["T_WHITESPACE","  ",38],["T_COMMENT","\/\/ However notice that changing this value, may have impact on existing\n",38],["T_WHITESPACE","  ",39],["T_COMMENT","\/\/ scripts, using space separated filenames.\n",39],["T_WHITESPACE","  ",40],["T_COMMENT","\/\/ Recommanded values for compatibility with older versions :\n",40],["T_WHITESPACE","  ",41],["T_COMMENT","\/\/define( 'PCLZIP_SEPARATOR', ' ' );\n",41],["T_WHITESPACE","  ",42],["T_COMMENT","\/\/ Recommanded values for smart separation of filenames.\n",42],["T_WHITESPACE","  ",43],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","!",["T_STRING","defined",43],"(",["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_SEPARATOR'",43],")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_STRING","define",44],"(",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_SEPARATOR'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","','",44],["T_WHITESPACE"," ",44],")",";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_COMMENT","\/\/ ----- Error configuration\n",47],["T_WHITESPACE","  ",48],["T_COMMENT","\/\/ 0 : PclZip Class integrated error handling\n",48],["T_WHITESPACE","  ",49],["T_COMMENT","\/\/ 1 : PclError external library error handling. By enabling this\n",49],["T_WHITESPACE","  ",50],["T_COMMENT","\/\/     you must ensure that you have included PclError library.\n",50],["T_WHITESPACE","  ",51],["T_COMMENT","\/\/ [2,...] : reserved for futur use\n",51],["T_WHITESPACE","  ",52],["T_IF","if",52],["T_WHITESPACE"," ",52],"(","!",["T_STRING","defined",52],"(",["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERROR_EXTERNAL'",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_STRING","define",53],"(",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERROR_EXTERNAL'",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],["T_WHITESPACE"," ",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_COMMENT","\/\/ ----- Optional static temporary directory\n",56],["T_WHITESPACE","  ",57],["T_COMMENT","\/\/       By default temporary files are generated in the script current\n",57],["T_WHITESPACE","  ",58],["T_COMMENT","\/\/       path.\n",58],["T_WHITESPACE","  ",59],["T_COMMENT","\/\/       If defined :\n",59],["T_WHITESPACE","  ",60],["T_COMMENT","\/\/       - MUST BE terminated by a '\/'.\n",60],["T_WHITESPACE","  ",61],["T_COMMENT","\/\/       - MUST be a valid, already created directory\n",61],["T_WHITESPACE","  ",62],["T_COMMENT","\/\/       Samples :\n",62],["T_WHITESPACE","  ",63],["T_COMMENT","\/\/ define( 'PCLZIP_TEMPORARY_DIR', '\/temp\/' );\n",63],["T_WHITESPACE","  ",64],["T_COMMENT","\/\/ define( 'PCLZIP_TEMPORARY_DIR', 'C:\/Temp\/' );\n",64],["T_WHITESPACE","  ",65],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_STRING","defined",65],"(",["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_TEMPORARY_DIR'",65],")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n    ",65],["T_STRING","define",66],"(",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_TEMPORARY_DIR'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","''",66],["T_WHITESPACE"," ",66],")",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_COMMENT","\/\/ ----- Optional threshold ratio for use of temporary files\n",69],["T_WHITESPACE","  ",70],["T_COMMENT","\/\/       Pclzip sense the size of the file to add\/extract and decide to\n",70],["T_WHITESPACE","  ",71],["T_COMMENT","\/\/       use or not temporary file. The algorythm is looking for\n",71],["T_WHITESPACE","  ",72],["T_COMMENT","\/\/       memory_limit of PHP and apply a ratio.\n",72],["T_WHITESPACE","  ",73],["T_COMMENT","\/\/       threshold = memory_limit * ratio.\n",73],["T_WHITESPACE","  ",74],["T_COMMENT","\/\/       Recommended values are under 0.5. Default 0.47.\n",74],["T_WHITESPACE","  ",75],["T_COMMENT","\/\/       Samples :\n",75],["T_WHITESPACE","  ",76],["T_COMMENT","\/\/ define( 'PCLZIP_TEMPORARY_FILE_RATIO', 0.5 );\n",76],["T_WHITESPACE","  ",77],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_STRING","defined",77],"(",["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_TEMPORARY_FILE_RATIO'",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_STRING","define",78],"(",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_TEMPORARY_FILE_RATIO'",78],",",["T_WHITESPACE"," ",78],["T_DNUMBER","0.47",78],["T_WHITESPACE"," ",78],")",";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n",79],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",81],["T_COMMENT","\/\/ ***** UNDER THIS LINE NOTHING NEEDS TO BE MODIFIED *****\n",82],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",83],["T_WHITESPACE","\n  ",84],["T_COMMENT","\/\/ ----- Global variables\n",85],["T_WHITESPACE","  ",86],["T_VARIABLE","$g_pclzip_version",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","\"2.8.2\"",86],";",["T_WHITESPACE","\n\n  ",86],["T_COMMENT","\/\/ ----- Error codes\n",88],["T_WHITESPACE","  ",89],["T_COMMENT","\/\/   -1 : Unable to open file in binary write mode\n",89],["T_WHITESPACE","  ",90],["T_COMMENT","\/\/   -2 : Unable to open file in binary read mode\n",90],["T_WHITESPACE","  ",91],["T_COMMENT","\/\/   -3 : Invalid parameters\n",91],["T_WHITESPACE","  ",92],["T_COMMENT","\/\/   -4 : File does not exist\n",92],["T_WHITESPACE","  ",93],["T_COMMENT","\/\/   -5 : Filename is too long (max. 255)\n",93],["T_WHITESPACE","  ",94],["T_COMMENT","\/\/   -6 : Not a valid zip file\n",94],["T_WHITESPACE","  ",95],["T_COMMENT","\/\/   -7 : Invalid extracted file size\n",95],["T_WHITESPACE","  ",96],["T_COMMENT","\/\/   -8 : Unable to create directory\n",96],["T_WHITESPACE","  ",97],["T_COMMENT","\/\/   -9 : Invalid archive extension\n",97],["T_WHITESPACE","  ",98],["T_COMMENT","\/\/  -10 : Invalid archive format\n",98],["T_WHITESPACE","  ",99],["T_COMMENT","\/\/  -11 : Unable to delete file (unlink)\n",99],["T_WHITESPACE","  ",100],["T_COMMENT","\/\/  -12 : Unable to rename file (rename)\n",100],["T_WHITESPACE","  ",101],["T_COMMENT","\/\/  -13 : Invalid header checksum\n",101],["T_WHITESPACE","  ",102],["T_COMMENT","\/\/  -14 : Invalid archive size\n",102],["T_WHITESPACE","  ",103],["T_STRING","define",103],"(",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_USER_ABORTED'",103],",",["T_WHITESPACE"," ",103],["T_LNUMBER","2",103],["T_WHITESPACE"," ",103],")",";",["T_WHITESPACE","\n  ",103],["T_STRING","define",104],"(",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_NO_ERROR'",104],",",["T_WHITESPACE"," ",104],["T_LNUMBER","0",104],["T_WHITESPACE"," ",104],")",";",["T_WHITESPACE","\n  ",104],["T_STRING","define",105],"(",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_WRITE_OPEN_FAIL'",105],",",["T_WHITESPACE"," ",105],"-",["T_LNUMBER","1",105],["T_WHITESPACE"," ",105],")",";",["T_WHITESPACE","\n  ",105],["T_STRING","define",106],"(",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_READ_OPEN_FAIL'",106],",",["T_WHITESPACE"," ",106],"-",["T_LNUMBER","2",106],["T_WHITESPACE"," ",106],")",";",["T_WHITESPACE","\n  ",106],["T_STRING","define",107],"(",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_PARAMETER'",107],",",["T_WHITESPACE"," ",107],"-",["T_LNUMBER","3",107],["T_WHITESPACE"," ",107],")",";",["T_WHITESPACE","\n  ",107],["T_STRING","define",108],"(",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_MISSING_FILE'",108],",",["T_WHITESPACE"," ",108],"-",["T_LNUMBER","4",108],["T_WHITESPACE"," ",108],")",";",["T_WHITESPACE","\n  ",108],["T_STRING","define",109],"(",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_FILENAME_TOO_LONG'",109],",",["T_WHITESPACE"," ",109],"-",["T_LNUMBER","5",109],["T_WHITESPACE"," ",109],")",";",["T_WHITESPACE","\n  ",109],["T_STRING","define",110],"(",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ZIP'",110],",",["T_WHITESPACE"," ",110],"-",["T_LNUMBER","6",110],["T_WHITESPACE"," ",110],")",";",["T_WHITESPACE","\n  ",110],["T_STRING","define",111],"(",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_EXTRACTED_FILE'",111],",",["T_WHITESPACE"," ",111],"-",["T_LNUMBER","7",111],["T_WHITESPACE"," ",111],")",";",["T_WHITESPACE","\n  ",111],["T_STRING","define",112],"(",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DIR_CREATE_FAIL'",112],",",["T_WHITESPACE"," ",112],"-",["T_LNUMBER","8",112],["T_WHITESPACE"," ",112],")",";",["T_WHITESPACE","\n  ",112],["T_STRING","define",113],"(",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_EXTENSION'",113],",",["T_WHITESPACE"," ",113],"-",["T_LNUMBER","9",113],["T_WHITESPACE"," ",113],")",";",["T_WHITESPACE","\n  ",113],["T_STRING","define",114],"(",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_FORMAT'",114],",",["T_WHITESPACE"," ",114],"-",["T_LNUMBER","10",114],["T_WHITESPACE"," ",114],")",";",["T_WHITESPACE","\n  ",114],["T_STRING","define",115],"(",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DELETE_FILE_FAIL'",115],",",["T_WHITESPACE"," ",115],"-",["T_LNUMBER","11",115],["T_WHITESPACE"," ",115],")",";",["T_WHITESPACE","\n  ",115],["T_STRING","define",116],"(",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_RENAME_FILE_FAIL'",116],",",["T_WHITESPACE"," ",116],"-",["T_LNUMBER","12",116],["T_WHITESPACE"," ",116],")",";",["T_WHITESPACE","\n  ",116],["T_STRING","define",117],"(",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_CHECKSUM'",117],",",["T_WHITESPACE"," ",117],"-",["T_LNUMBER","13",117],["T_WHITESPACE"," ",117],")",";",["T_WHITESPACE","\n  ",117],["T_STRING","define",118],"(",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ARCHIVE_ZIP'",118],",",["T_WHITESPACE"," ",118],"-",["T_LNUMBER","14",118],["T_WHITESPACE"," ",118],")",";",["T_WHITESPACE","\n  ",118],["T_STRING","define",119],"(",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_MISSING_OPTION_VALUE'",119],",",["T_WHITESPACE"," ",119],"-",["T_LNUMBER","15",119],["T_WHITESPACE"," ",119],")",";",["T_WHITESPACE","\n  ",119],["T_STRING","define",120],"(",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_OPTION_VALUE'",120],",",["T_WHITESPACE"," ",120],"-",["T_LNUMBER","16",120],["T_WHITESPACE"," ",120],")",";",["T_WHITESPACE","\n  ",120],["T_STRING","define",121],"(",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_ALREADY_A_DIRECTORY'",121],",",["T_WHITESPACE"," ",121],"-",["T_LNUMBER","17",121],["T_WHITESPACE"," ",121],")",";",["T_WHITESPACE","\n  ",121],["T_STRING","define",122],"(",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_UNSUPPORTED_COMPRESSION'",122],",",["T_WHITESPACE"," ",122],"-",["T_LNUMBER","18",122],["T_WHITESPACE"," ",122],")",";",["T_WHITESPACE","\n  ",122],["T_STRING","define",123],"(",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_UNSUPPORTED_ENCRYPTION'",123],",",["T_WHITESPACE"," ",123],"-",["T_LNUMBER","19",123],["T_WHITESPACE"," ",123],")",";",["T_WHITESPACE","\n  ",123],["T_STRING","define",124],"(",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE'",124],",",["T_WHITESPACE"," ",124],"-",["T_LNUMBER","20",124],["T_WHITESPACE"," ",124],")",";",["T_WHITESPACE","\n  ",124],["T_STRING","define",125],"(",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DIRECTORY_RESTRICTION'",125],",",["T_WHITESPACE"," ",125],"-",["T_LNUMBER","21",125],["T_WHITESPACE"," ",125],")",";",["T_WHITESPACE","\n\n  ",125],["T_COMMENT","\/\/ ----- Options values\n",127],["T_WHITESPACE","  ",128],["T_STRING","define",128],"(",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_PATH'",128],",",["T_WHITESPACE"," ",128],["T_LNUMBER","77001",128],["T_WHITESPACE"," ",128],")",";",["T_WHITESPACE","\n  ",128],["T_STRING","define",129],"(",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_ADD_PATH'",129],",",["T_WHITESPACE"," ",129],["T_LNUMBER","77002",129],["T_WHITESPACE"," ",129],")",";",["T_WHITESPACE","\n  ",129],["T_STRING","define",130],"(",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_REMOVE_PATH'",130],",",["T_WHITESPACE"," ",130],["T_LNUMBER","77003",130],["T_WHITESPACE"," ",130],")",";",["T_WHITESPACE","\n  ",130],["T_STRING","define",131],"(",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_REMOVE_ALL_PATH'",131],",",["T_WHITESPACE"," ",131],["T_LNUMBER","77004",131],["T_WHITESPACE"," ",131],")",";",["T_WHITESPACE","\n  ",131],["T_STRING","define",132],"(",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_SET_CHMOD'",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","77005",132],["T_WHITESPACE"," ",132],")",";",["T_WHITESPACE","\n  ",132],["T_STRING","define",133],"(",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_EXTRACT_AS_STRING'",133],",",["T_WHITESPACE"," ",133],["T_LNUMBER","77006",133],["T_WHITESPACE"," ",133],")",";",["T_WHITESPACE","\n  ",133],["T_STRING","define",134],"(",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_NO_COMPRESSION'",134],",",["T_WHITESPACE"," ",134],["T_LNUMBER","77007",134],["T_WHITESPACE"," ",134],")",";",["T_WHITESPACE","\n  ",134],["T_STRING","define",135],"(",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_BY_NAME'",135],",",["T_WHITESPACE"," ",135],["T_LNUMBER","77008",135],["T_WHITESPACE"," ",135],")",";",["T_WHITESPACE","\n  ",135],["T_STRING","define",136],"(",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_BY_INDEX'",136],",",["T_WHITESPACE"," ",136],["T_LNUMBER","77009",136],["T_WHITESPACE"," ",136],")",";",["T_WHITESPACE","\n  ",136],["T_STRING","define",137],"(",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_BY_EREG'",137],",",["T_WHITESPACE"," ",137],["T_LNUMBER","77010",137],["T_WHITESPACE"," ",137],")",";",["T_WHITESPACE","\n  ",137],["T_STRING","define",138],"(",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_BY_PREG'",138],",",["T_WHITESPACE"," ",138],["T_LNUMBER","77011",138],["T_WHITESPACE"," ",138],")",";",["T_WHITESPACE","\n  ",138],["T_STRING","define",139],"(",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_COMMENT'",139],",",["T_WHITESPACE"," ",139],["T_LNUMBER","77012",139],["T_WHITESPACE"," ",139],")",";",["T_WHITESPACE","\n  ",139],["T_STRING","define",140],"(",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_ADD_COMMENT'",140],",",["T_WHITESPACE"," ",140],["T_LNUMBER","77013",140],["T_WHITESPACE"," ",140],")",";",["T_WHITESPACE","\n  ",140],["T_STRING","define",141],"(",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_PREPEND_COMMENT'",141],",",["T_WHITESPACE"," ",141],["T_LNUMBER","77014",141],["T_WHITESPACE"," ",141],")",";",["T_WHITESPACE","\n  ",141],["T_STRING","define",142],"(",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_EXTRACT_IN_OUTPUT'",142],",",["T_WHITESPACE"," ",142],["T_LNUMBER","77015",142],["T_WHITESPACE"," ",142],")",";",["T_WHITESPACE","\n  ",142],["T_STRING","define",143],"(",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_REPLACE_NEWER'",143],",",["T_WHITESPACE"," ",143],["T_LNUMBER","77016",143],["T_WHITESPACE"," ",143],")",";",["T_WHITESPACE","\n  ",143],["T_STRING","define",144],"(",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_STOP_ON_ERROR'",144],",",["T_WHITESPACE"," ",144],["T_LNUMBER","77017",144],["T_WHITESPACE"," ",144],")",";",["T_WHITESPACE","\n  ",144],["T_COMMENT","\/\/ Having big trouble with crypt. Need to multiply 2 long int\n",145],["T_WHITESPACE","  ",146],["T_COMMENT","\/\/ which is not correctly supported by PHP ...\n",146],["T_WHITESPACE","  ",147],["T_COMMENT","\/\/define( 'PCLZIP_OPT_CRYPT', 77018 );\n",147],["T_WHITESPACE","  ",148],["T_STRING","define",148],"(",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_EXTRACT_DIR_RESTRICTION'",148],",",["T_WHITESPACE"," ",148],["T_LNUMBER","77019",148],["T_WHITESPACE"," ",148],")",";",["T_WHITESPACE","\n  ",148],["T_STRING","define",149],"(",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_TEMP_FILE_THRESHOLD'",149],",",["T_WHITESPACE"," ",149],["T_LNUMBER","77020",149],["T_WHITESPACE"," ",149],")",";",["T_WHITESPACE","\n  ",149],["T_STRING","define",150],"(",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_ADD_TEMP_FILE_THRESHOLD'",150],",",["T_WHITESPACE"," ",150],["T_LNUMBER","77020",150],["T_WHITESPACE"," ",150],")",";",["T_WHITESPACE"," ",150],["T_COMMENT","\/\/ alias\n",150],["T_WHITESPACE","  ",151],["T_STRING","define",151],"(",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_TEMP_FILE_ON'",151],",",["T_WHITESPACE"," ",151],["T_LNUMBER","77021",151],["T_WHITESPACE"," ",151],")",";",["T_WHITESPACE","\n  ",151],["T_STRING","define",152],"(",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_ADD_TEMP_FILE_ON'",152],",",["T_WHITESPACE"," ",152],["T_LNUMBER","77021",152],["T_WHITESPACE"," ",152],")",";",["T_WHITESPACE"," ",152],["T_COMMENT","\/\/ alias\n",152],["T_WHITESPACE","  ",153],["T_STRING","define",153],"(",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_TEMP_FILE_OFF'",153],",",["T_WHITESPACE"," ",153],["T_LNUMBER","77022",153],["T_WHITESPACE"," ",153],")",";",["T_WHITESPACE","\n  ",153],["T_STRING","define",154],"(",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT_ADD_TEMP_FILE_OFF'",154],",",["T_WHITESPACE"," ",154],["T_LNUMBER","77022",154],["T_WHITESPACE"," ",154],")",";",["T_WHITESPACE"," ",154],["T_COMMENT","\/\/ alias\n",154],["T_WHITESPACE","\n  ",155],["T_COMMENT","\/\/ ----- File description attributes\n",156],["T_WHITESPACE","  ",157],["T_STRING","define",157],"(",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_NAME'",157],",",["T_WHITESPACE"," ",157],["T_LNUMBER","79001",157],["T_WHITESPACE"," ",157],")",";",["T_WHITESPACE","\n  ",157],["T_STRING","define",158],"(",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_NEW_SHORT_NAME'",158],",",["T_WHITESPACE"," ",158],["T_LNUMBER","79002",158],["T_WHITESPACE"," ",158],")",";",["T_WHITESPACE","\n  ",158],["T_STRING","define",159],"(",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_NEW_FULL_NAME'",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","79003",159],["T_WHITESPACE"," ",159],")",";",["T_WHITESPACE","\n  ",159],["T_STRING","define",160],"(",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_MTIME'",160],",",["T_WHITESPACE"," ",160],["T_LNUMBER","79004",160],["T_WHITESPACE"," ",160],")",";",["T_WHITESPACE","\n  ",160],["T_STRING","define",161],"(",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_CONTENT'",161],",",["T_WHITESPACE"," ",161],["T_LNUMBER","79005",161],["T_WHITESPACE"," ",161],")",";",["T_WHITESPACE","\n  ",161],["T_STRING","define",162],"(",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT_FILE_COMMENT'",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","79006",162],["T_WHITESPACE"," ",162],")",";",["T_WHITESPACE","\n\n  ",162],["T_COMMENT","\/\/ ----- Call backs values\n",164],["T_WHITESPACE","  ",165],["T_STRING","define",165],"(",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_CB_PRE_EXTRACT'",165],",",["T_WHITESPACE"," ",165],["T_LNUMBER","78001",165],["T_WHITESPACE"," ",165],")",";",["T_WHITESPACE","\n  ",165],["T_STRING","define",166],"(",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_CB_POST_EXTRACT'",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","78002",166],["T_WHITESPACE"," ",166],")",";",["T_WHITESPACE","\n  ",166],["T_STRING","define",167],"(",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_CB_PRE_ADD'",167],",",["T_WHITESPACE"," ",167],["T_LNUMBER","78003",167],["T_WHITESPACE"," ",167],")",";",["T_WHITESPACE","\n  ",167],["T_STRING","define",168],"(",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_CB_POST_ADD'",168],",",["T_WHITESPACE"," ",168],["T_LNUMBER","78004",168],["T_WHITESPACE"," ",168],")",";",["T_WHITESPACE","\n  ",168],["T_COMMENT","\/* For futur use\n  define( 'PCLZIP_CB_PRE_LIST', 78005 );\n  define( 'PCLZIP_CB_POST_LIST', 78006 );\n  define( 'PCLZIP_CB_PRE_DELETE', 78007 );\n  define( 'PCLZIP_CB_POST_DELETE', 78008 );\n  *\/",169],["T_WHITESPACE","\n\n  ",174],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",176],["T_WHITESPACE","  ",177],["T_COMMENT","\/\/ Class : PclZip\n",177],["T_WHITESPACE","  ",178],["T_COMMENT","\/\/ Description :\n",178],["T_WHITESPACE","  ",179],["T_COMMENT","\/\/   PclZip is the class that represent a Zip archive.\n",179],["T_WHITESPACE","  ",180],["T_COMMENT","\/\/   The public methods allow the manipulation of the archive.\n",180],["T_WHITESPACE","  ",181],["T_COMMENT","\/\/ Attributes :\n",181],["T_WHITESPACE","  ",182],["T_COMMENT","\/\/   Attributes must not be accessed directly.\n",182],["T_WHITESPACE","  ",183],["T_COMMENT","\/\/ Methods :\n",183],["T_WHITESPACE","  ",184],["T_COMMENT","\/\/   PclZip() : Object creator\n",184],["T_WHITESPACE","  ",185],["T_COMMENT","\/\/   create() : Creates the Zip archive\n",185],["T_WHITESPACE","  ",186],["T_COMMENT","\/\/   listContent() : List the content of the Zip archive\n",186],["T_WHITESPACE","  ",187],["T_COMMENT","\/\/   extract() : Extract the content of the archive\n",187],["T_WHITESPACE","  ",188],["T_COMMENT","\/\/   properties() : List the properties of the archive\n",188],["T_WHITESPACE","  ",189],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",189],["T_WHITESPACE","  ",190],["T_CLASS","class",190],["T_WHITESPACE"," ",190],["T_STRING","PclZip",190],["T_WHITESPACE","\n  ",190],"{",["T_WHITESPACE","\n    ",191],["T_COMMENT","\/\/ ----- Filename of the zip file\n",192],["T_WHITESPACE","    ",193],["T_VAR","var",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$zipname",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","''",193],";",["T_WHITESPACE","\n\n    ",193],["T_COMMENT","\/\/ ----- File descriptor of the zip file\n",195],["T_WHITESPACE","    ",196],["T_VAR","var",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$zip_fd",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ ----- Internal error handling\n",198],["T_WHITESPACE","    ",199],["T_VAR","var",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$error_code",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],";",["T_WHITESPACE","\n    ",199],["T_VAR","var",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$error_string",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","''",200],";",["T_WHITESPACE","\n\n    ",200],["T_COMMENT","\/\/ ----- Current status of the magic_quotes_runtime\n",202],["T_WHITESPACE","    ",203],["T_COMMENT","\/\/ This value store the php configuration for magic_quotes\n",203],["T_WHITESPACE","    ",204],["T_COMMENT","\/\/ The class can then disable the magic_quotes and reset it after\n",204],["T_WHITESPACE","    ",205],["T_VAR","var",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$magic_quotes_status",205],";",["T_WHITESPACE","\n\n  ",205],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",207],["T_WHITESPACE","  ",208],["T_COMMENT","\/\/ Function : PclZip()\n",208],["T_WHITESPACE","  ",209],["T_COMMENT","\/\/ Description :\n",209],["T_WHITESPACE","  ",210],["T_COMMENT","\/\/   Creates a PclZip object and set the name of the associated Zip archive\n",210],["T_WHITESPACE","  ",211],["T_COMMENT","\/\/   filename.\n",211],["T_WHITESPACE","  ",212],["T_COMMENT","\/\/   Note that no real action is taken, if the archive does not exist it is not\n",212],["T_WHITESPACE","  ",213],["T_COMMENT","\/\/   created. Use create() for that.\n",213],["T_WHITESPACE","  ",214],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",214],["T_WHITESPACE","  ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","__construct",215],"(",["T_VARIABLE","$p_zipname",215],")",["T_WHITESPACE","\n  ",215],"{",["T_WHITESPACE","\n\n    ",216],["T_COMMENT","\/\/ ----- Tests the zlib\n",218],["T_WHITESPACE","    ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(","!",["T_STRING","function_exists",219],"(",["T_CONSTANT_ENCAPSED_STRING","'gzopen'",219],")",")",["T_WHITESPACE","\n    ",219],"{",["T_WHITESPACE","\n      ",220],["T_EXIT","die",221],"(",["T_CONSTANT_ENCAPSED_STRING","'Abort '",221],".",["T_STRING","basename",221],"(",["T_FILE","__FILE__",221],")",".",["T_CONSTANT_ENCAPSED_STRING","' : Missing zlib extensions'",221],")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n\n    ",222],["T_COMMENT","\/\/ ----- Set the attributes\n",224],["T_WHITESPACE","    ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","zipname",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$p_zipname",225],";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","zip_fd",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_LNUMBER","0",226],";",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","magic_quotes_status",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],"-",["T_LNUMBER","1",227],";",["T_WHITESPACE","\n\n    ",227],["T_COMMENT","\/\/ ----- Return\n",229],["T_WHITESPACE","    ",230],["T_RETURN","return",230],";",["T_WHITESPACE","\n  ",230],"}",["T_WHITESPACE","\n\n  ",231],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","PclZip",233],"(",["T_VARIABLE","$p_zipname",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n    ",233],["T_STRING","self",234],["T_DOUBLE_COLON","::",234],["T_STRING","__construct",234],"(",["T_VARIABLE","$p_zipname",234],")",";",["T_WHITESPACE","\n  ",234],"}",["T_WHITESPACE","\n  ",235],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",236],["T_WHITESPACE","\n  ",237],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",238],["T_WHITESPACE","  ",239],["T_COMMENT","\/\/ Function :\n",239],["T_WHITESPACE","  ",240],["T_COMMENT","\/\/   create($p_filelist, $p_add_dir=\"\", $p_remove_dir=\"\")\n",240],["T_WHITESPACE","  ",241],["T_COMMENT","\/\/   create($p_filelist, $p_option, $p_option_value, ...)\n",241],["T_WHITESPACE","  ",242],["T_COMMENT","\/\/ Description :\n",242],["T_WHITESPACE","  ",243],["T_COMMENT","\/\/   This method supports two different synopsis. The first one is historical.\n",243],["T_WHITESPACE","  ",244],["T_COMMENT","\/\/   This method creates a Zip Archive. The Zip file is created in the\n",244],["T_WHITESPACE","  ",245],["T_COMMENT","\/\/   filesystem. The files and directories indicated in $p_filelist\n",245],["T_WHITESPACE","  ",246],["T_COMMENT","\/\/   are added in the archive. See the parameters description for the\n",246],["T_WHITESPACE","  ",247],["T_COMMENT","\/\/   supported format of $p_filelist.\n",247],["T_WHITESPACE","  ",248],["T_COMMENT","\/\/   When a directory is in the list, the directory and its content is added\n",248],["T_WHITESPACE","  ",249],["T_COMMENT","\/\/   in the archive.\n",249],["T_WHITESPACE","  ",250],["T_COMMENT","\/\/   In this synopsis, the function takes an optional variable list of\n",250],["T_WHITESPACE","  ",251],["T_COMMENT","\/\/   options. See bellow the supported options.\n",251],["T_WHITESPACE","  ",252],["T_COMMENT","\/\/ Parameters :\n",252],["T_WHITESPACE","  ",253],["T_COMMENT","\/\/   $p_filelist : An array containing file or directory names, or\n",253],["T_WHITESPACE","  ",254],["T_COMMENT","\/\/                 a string containing one filename or one directory name, or\n",254],["T_WHITESPACE","  ",255],["T_COMMENT","\/\/                 a string containing a list of filenames and\/or directory\n",255],["T_WHITESPACE","  ",256],["T_COMMENT","\/\/                 names separated by spaces.\n",256],["T_WHITESPACE","  ",257],["T_COMMENT","\/\/   $p_add_dir : A path to add before the real path of the archived file,\n",257],["T_WHITESPACE","  ",258],["T_COMMENT","\/\/                in order to have it memorized in the archive.\n",258],["T_WHITESPACE","  ",259],["T_COMMENT","\/\/   $p_remove_dir : A path to remove from the real path of the file to archive,\n",259],["T_WHITESPACE","  ",260],["T_COMMENT","\/\/                   in order to have a shorter path memorized in the archive.\n",260],["T_WHITESPACE","  ",261],["T_COMMENT","\/\/                   When $p_add_dir and $p_remove_dir are set, $p_remove_dir\n",261],["T_WHITESPACE","  ",262],["T_COMMENT","\/\/                   is removed first, before $p_add_dir is added.\n",262],["T_WHITESPACE","  ",263],["T_COMMENT","\/\/ Options :\n",263],["T_WHITESPACE","  ",264],["T_COMMENT","\/\/   PCLZIP_OPT_ADD_PATH :\n",264],["T_WHITESPACE","  ",265],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_PATH :\n",265],["T_WHITESPACE","  ",266],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_ALL_PATH :\n",266],["T_WHITESPACE","  ",267],["T_COMMENT","\/\/   PCLZIP_OPT_COMMENT :\n",267],["T_WHITESPACE","  ",268],["T_COMMENT","\/\/   PCLZIP_CB_PRE_ADD :\n",268],["T_WHITESPACE","  ",269],["T_COMMENT","\/\/   PCLZIP_CB_POST_ADD :\n",269],["T_WHITESPACE","  ",270],["T_COMMENT","\/\/ Return Values :\n",270],["T_WHITESPACE","  ",271],["T_COMMENT","\/\/   0 on failure,\n",271],["T_WHITESPACE","  ",272],["T_COMMENT","\/\/   The list of the added files, with a status of the add action.\n",272],["T_WHITESPACE","  ",273],["T_COMMENT","\/\/   (see PclZip::listContent() for list entry format)\n",273],["T_WHITESPACE","  ",274],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",274],["T_WHITESPACE","  ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","create",275],"(",["T_VARIABLE","$p_filelist",275],")",["T_WHITESPACE","\n  ",275],"{",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$v_result",277],"=",["T_LNUMBER","1",277],";",["T_WHITESPACE","\n\n    ",277],["T_COMMENT","\/\/ ----- Reset the error handler\n",279],["T_WHITESPACE","    ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","privErrorReset",280],"(",")",";",["T_WHITESPACE","\n\n    ",280],["T_COMMENT","\/\/ ----- Set default values\n",282],["T_WHITESPACE","    ",283],["T_VARIABLE","$v_options",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$v_options",284],"[",["T_STRING","PCLZIP_OPT_NO_COMPRESSION",284],"]",["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","FALSE",284],";",["T_WHITESPACE","\n\n    ",284],["T_COMMENT","\/\/ ----- Look for variable options arguments\n",286],["T_WHITESPACE","    ",287],["T_VARIABLE","$v_size",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","func_num_args",287],"(",")",";",["T_WHITESPACE","\n\n    ",287],["T_COMMENT","\/\/ ----- Look for arguments\n",289],["T_WHITESPACE","    ",290],["T_IF","if",290],["T_WHITESPACE"," ",290],"(",["T_VARIABLE","$v_size",290],["T_WHITESPACE"," ",290],">",["T_WHITESPACE"," ",290],["T_LNUMBER","1",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n      ",290],["T_COMMENT","\/\/ ----- Get the arguments\n",291],["T_WHITESPACE","      ",292],["T_VARIABLE","$v_arg_list",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","func_get_args",292],"(",")",";",["T_WHITESPACE","\n\n      ",292],["T_COMMENT","\/\/ ----- Remove from the options list the first argument\n",294],["T_WHITESPACE","      ",295],["T_STRING","array_shift",295],"(",["T_VARIABLE","$v_arg_list",295],")",";",["T_WHITESPACE","\n      ",295],["T_VARIABLE","$v_size",296],["T_DEC","--",296],";",["T_WHITESPACE","\n\n      ",296],["T_COMMENT","\/\/ ----- Look for first arg\n",298],["T_WHITESPACE","      ",299],["T_IF","if",299],["T_WHITESPACE"," ",299],"(","(",["T_STRING","is_integer",299],"(",["T_VARIABLE","$v_arg_list",299],"[",["T_LNUMBER","0",299],"]",")",")",["T_WHITESPACE"," ",299],["T_BOOLEAN_AND","&&",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$v_arg_list",299],"[",["T_LNUMBER","0",299],"]",["T_WHITESPACE"," ",299],">",["T_WHITESPACE"," ",299],["T_LNUMBER","77000",299],")",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n\n        ",299],["T_COMMENT","\/\/ ----- Parse the options\n",301],["T_WHITESPACE","        ",302],["T_VARIABLE","$v_result",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","privParseOptions",302],"(",["T_VARIABLE","$v_arg_list",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$v_size",302],",",["T_WHITESPACE"," ",302],["T_VARIABLE","$v_options",302],",",["T_WHITESPACE","\n                                            ",302],["T_ARRAY","array",303],["T_WHITESPACE"," ",303],"(",["T_STRING","PCLZIP_OPT_REMOVE_PATH",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'optional'",303],",",["T_WHITESPACE","\n                                                   ",303],["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'optional'",304],",",["T_WHITESPACE","\n                                                   ",304],["T_STRING","PCLZIP_OPT_ADD_PATH",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'optional'",305],",",["T_WHITESPACE","\n                                                   ",305],["T_STRING","PCLZIP_CB_PRE_ADD",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'optional'",306],",",["T_WHITESPACE","\n                                                   ",306],["T_STRING","PCLZIP_CB_POST_ADD",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'optional'",307],",",["T_WHITESPACE","\n                                                   ",307],["T_STRING","PCLZIP_OPT_NO_COMPRESSION",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'optional'",308],",",["T_WHITESPACE","\n                                                   ",308],["T_STRING","PCLZIP_OPT_COMMENT",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'optional'",309],",",["T_WHITESPACE","\n                                                   ",309],["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'optional'",310],",",["T_WHITESPACE","\n                                                   ",310],["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'optional'",311],",",["T_WHITESPACE","\n                                                   ",311],["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'optional'",312],["T_WHITESPACE","\n                                                   ",312],["T_COMMENT","\/\/, PCLZIP_OPT_CRYPT => 'optional'\n",313],["T_WHITESPACE","                                             ",314],")",")",";",["T_WHITESPACE","\n        ",314],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$v_result",315],["T_WHITESPACE"," ",315],["T_IS_NOT_EQUAL","!=",315],["T_WHITESPACE"," ",315],["T_LNUMBER","1",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n          ",315],["T_RETURN","return",316],["T_WHITESPACE"," ",316],["T_LNUMBER","0",316],";",["T_WHITESPACE","\n        ",316],"}",["T_WHITESPACE","\n      ",317],"}",["T_WHITESPACE","\n\n      ",318],["T_COMMENT","\/\/ ----- Look for 2 args\n",320],["T_WHITESPACE","      ",321],["T_COMMENT","\/\/ Here we need to support the first historic synopsis of the\n",321],["T_WHITESPACE","      ",322],["T_COMMENT","\/\/ method.\n",322],["T_WHITESPACE","      ",323],["T_ELSE","else",323],["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n\n        ",323],["T_COMMENT","\/\/ ----- Get the first argument\n",325],["T_WHITESPACE","        ",326],["T_VARIABLE","$v_options",326],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",326],"]",["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$v_arg_list",326],"[",["T_LNUMBER","0",326],"]",";",["T_WHITESPACE","\n\n        ",326],["T_COMMENT","\/\/ ----- Look for the optional second argument\n",328],["T_WHITESPACE","        ",329],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$v_size",329],["T_WHITESPACE"," ",329],["T_IS_EQUAL","==",329],["T_WHITESPACE"," ",329],["T_LNUMBER","2",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n          ",329],["T_VARIABLE","$v_options",330],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$v_arg_list",330],"[",["T_LNUMBER","1",330],"]",";",["T_WHITESPACE","\n        ",330],"}",["T_WHITESPACE","\n        ",331],["T_ELSE","else",332],["T_WHITESPACE"," ",332],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_VARIABLE","$v_size",332],["T_WHITESPACE"," ",332],">",["T_WHITESPACE"," ",332],["T_LNUMBER","2",332],")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n          ",332],["T_STRING","PclZip",333],["T_DOUBLE_COLON","::",333],["T_STRING","privErrorLog",333],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",333],",",["T_WHITESPACE","\n\t\t                       ",333],["T_CONSTANT_ENCAPSED_STRING","\"Invalid number \/ type of arguments\"",334],")",";",["T_WHITESPACE","\n          ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_LNUMBER","0",335],";",["T_WHITESPACE","\n        ",335],"}",["T_WHITESPACE","\n      ",336],"}",["T_WHITESPACE","\n    ",337],"}",["T_WHITESPACE","\n\n    ",338],["T_COMMENT","\/\/ ----- Look for default option values\n",340],["T_WHITESPACE","    ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","privOptionDefaultThreshold",341],"(",["T_VARIABLE","$v_options",341],")",";",["T_WHITESPACE","\n\n    ",341],["T_COMMENT","\/\/ ----- Init\n",343],["T_WHITESPACE","    ",344],["T_VARIABLE","$v_string_list",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_ARRAY","array",344],"(",")",";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$v_att_list",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",")",";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$v_filedescr_list",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_ARRAY","array",346],"(",")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$p_result_list",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",")",";",["T_WHITESPACE","\n\n    ",347],["T_COMMENT","\/\/ ----- Look if the $p_filelist is really an array\n",349],["T_WHITESPACE","    ",350],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_STRING","is_array",350],"(",["T_VARIABLE","$p_filelist",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n\n      ",350],["T_COMMENT","\/\/ ----- Look if the first element is also an array\n",352],["T_WHITESPACE","      ",353],["T_COMMENT","\/\/       This will mean that this is a file description entry\n",353],["T_WHITESPACE","      ",354],["T_IF","if",354],["T_WHITESPACE"," ",354],"(",["T_ISSET","isset",354],"(",["T_VARIABLE","$p_filelist",354],"[",["T_LNUMBER","0",354],"]",")",["T_WHITESPACE"," ",354],["T_BOOLEAN_AND","&&",354],["T_WHITESPACE"," ",354],["T_STRING","is_array",354],"(",["T_VARIABLE","$p_filelist",354],"[",["T_LNUMBER","0",354],"]",")",")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n        ",354],["T_VARIABLE","$v_att_list",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$p_filelist",355],";",["T_WHITESPACE","\n      ",355],"}",["T_WHITESPACE","\n\n      ",356],["T_COMMENT","\/\/ ----- The list is a list of string names\n",358],["T_WHITESPACE","      ",359],["T_ELSE","else",359],["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$v_string_list",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$p_filelist",360],";",["T_WHITESPACE","\n      ",360],"}",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n\n    ",362],["T_COMMENT","\/\/ ----- Look if the $p_filelist is a string\n",364],["T_WHITESPACE","    ",365],["T_ELSE","else",365],["T_WHITESPACE"," ",365],["T_IF","if",365],["T_WHITESPACE"," ",365],"(",["T_STRING","is_string",365],"(",["T_VARIABLE","$p_filelist",365],")",")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n      ",365],["T_COMMENT","\/\/ ----- Create a list from the string\n",366],["T_WHITESPACE","      ",367],["T_VARIABLE","$v_string_list",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","explode",367],"(",["T_STRING","PCLZIP_SEPARATOR",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$p_filelist",367],")",";",["T_WHITESPACE","\n    ",367],"}",["T_WHITESPACE","\n\n    ",368],["T_COMMENT","\/\/ ----- Invalid variable type for $p_filelist\n",370],["T_WHITESPACE","    ",371],["T_ELSE","else",371],["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n      ",371],["T_STRING","PclZip",372],["T_DOUBLE_COLON","::",372],["T_STRING","privErrorLog",372],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","\"Invalid variable type p_filelist\"",372],")",";",["T_WHITESPACE","\n      ",372],["T_RETURN","return",373],["T_WHITESPACE"," ",373],["T_LNUMBER","0",373],";",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n\n    ",374],["T_COMMENT","\/\/ ----- Reformat the string list\n",376],["T_WHITESPACE","    ",377],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_STRING","sizeof",377],"(",["T_VARIABLE","$v_string_list",377],")",["T_WHITESPACE"," ",377],["T_IS_NOT_EQUAL","!=",377],["T_WHITESPACE"," ",377],["T_LNUMBER","0",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n      ",377],["T_FOREACH","foreach",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$v_string_list",378],["T_WHITESPACE"," ",378],["T_AS","as",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$v_string",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n        ",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$v_string",379],["T_WHITESPACE"," ",379],["T_IS_NOT_EQUAL","!=",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","''",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n          ",379],["T_VARIABLE","$v_att_list",380],"[","]","[",["T_STRING","PCLZIP_ATT_FILE_NAME",380],"]",["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$v_string",380],";",["T_WHITESPACE","\n        ",380],"}",["T_WHITESPACE","\n        ",381],["T_ELSE","else",382],["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n      ",383],"}",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n\n    ",385],["T_COMMENT","\/\/ ----- For each file in the list check the attributes\n",387],["T_WHITESPACE","    ",388],["T_VARIABLE","$v_supported_attributes",388],["T_WHITESPACE","\n    ",388],"=",["T_WHITESPACE"," ",389],["T_ARRAY","array",389],["T_WHITESPACE"," ",389],"(",["T_WHITESPACE"," ",389],["T_STRING","PCLZIP_ATT_FILE_NAME",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'mandatory'",389],["T_WHITESPACE","\n             ",389],",",["T_STRING","PCLZIP_ATT_FILE_NEW_SHORT_NAME",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'optional'",390],["T_WHITESPACE","\n             ",390],",",["T_STRING","PCLZIP_ATT_FILE_NEW_FULL_NAME",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'optional'",391],["T_WHITESPACE","\n             ",391],",",["T_STRING","PCLZIP_ATT_FILE_MTIME",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'optional'",392],["T_WHITESPACE","\n             ",392],",",["T_STRING","PCLZIP_ATT_FILE_CONTENT",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'optional'",393],["T_WHITESPACE","\n             ",393],",",["T_STRING","PCLZIP_ATT_FILE_COMMENT",394],["T_WHITESPACE"," ",394],["T_DOUBLE_ARROW","=>",394],["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'optional'",394],["T_WHITESPACE","\n\t\t\t\t\t\t",394],")",";",["T_WHITESPACE","\n    ",395],["T_FOREACH","foreach",396],["T_WHITESPACE"," ",396],"(",["T_VARIABLE","$v_att_list",396],["T_WHITESPACE"," ",396],["T_AS","as",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$v_entry",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n      ",396],["T_VARIABLE","$v_result",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","privFileDescrParseAtt",397],"(",["T_VARIABLE","$v_entry",397],",",["T_WHITESPACE","\n                                               ",397],["T_VARIABLE","$v_filedescr_list",398],"[","]",",",["T_WHITESPACE","\n                                               ",398],["T_VARIABLE","$v_options",399],",",["T_WHITESPACE","\n                                               ",399],["T_VARIABLE","$v_supported_attributes",400],")",";",["T_WHITESPACE","\n      ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$v_result",401],["T_WHITESPACE"," ",401],["T_IS_NOT_EQUAL","!=",401],["T_WHITESPACE"," ",401],["T_LNUMBER","1",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n        ",401],["T_RETURN","return",402],["T_WHITESPACE"," ",402],["T_LNUMBER","0",402],";",["T_WHITESPACE","\n      ",402],"}",["T_WHITESPACE","\n    ",403],"}",["T_WHITESPACE","\n\n    ",404],["T_COMMENT","\/\/ ----- Expand the filelist (expand directories)\n",406],["T_WHITESPACE","    ",407],["T_VARIABLE","$v_result",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","privFileDescrExpand",407],"(",["T_VARIABLE","$v_filedescr_list",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$v_options",407],")",";",["T_WHITESPACE","\n    ",407],["T_IF","if",408],["T_WHITESPACE"," ",408],"(",["T_VARIABLE","$v_result",408],["T_WHITESPACE"," ",408],["T_IS_NOT_EQUAL","!=",408],["T_WHITESPACE"," ",408],["T_LNUMBER","1",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n      ",408],["T_RETURN","return",409],["T_WHITESPACE"," ",409],["T_LNUMBER","0",409],";",["T_WHITESPACE","\n    ",409],"}",["T_WHITESPACE","\n\n    ",410],["T_COMMENT","\/\/ ----- Call the create fct\n",412],["T_WHITESPACE","    ",413],["T_VARIABLE","$v_result",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","privCreate",413],"(",["T_VARIABLE","$v_filedescr_list",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$p_result_list",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$v_options",413],")",";",["T_WHITESPACE","\n    ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$v_result",414],["T_WHITESPACE"," ",414],["T_IS_NOT_EQUAL","!=",414],["T_WHITESPACE"," ",414],["T_LNUMBER","1",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n      ",414],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_LNUMBER","0",415],";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_COMMENT","\/\/ ----- Return\n",418],["T_WHITESPACE","    ",419],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$p_result_list",419],";",["T_WHITESPACE","\n  ",419],"}",["T_WHITESPACE","\n  ",420],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",421],["T_WHITESPACE","\n  ",422],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",423],["T_WHITESPACE","  ",424],["T_COMMENT","\/\/ Function :\n",424],["T_WHITESPACE","  ",425],["T_COMMENT","\/\/   add($p_filelist, $p_add_dir=\"\", $p_remove_dir=\"\")\n",425],["T_WHITESPACE","  ",426],["T_COMMENT","\/\/   add($p_filelist, $p_option, $p_option_value, ...)\n",426],["T_WHITESPACE","  ",427],["T_COMMENT","\/\/ Description :\n",427],["T_WHITESPACE","  ",428],["T_COMMENT","\/\/   This method supports two synopsis. The first one is historical.\n",428],["T_WHITESPACE","  ",429],["T_COMMENT","\/\/   This methods add the list of files in an existing archive.\n",429],["T_WHITESPACE","  ",430],["T_COMMENT","\/\/   If a file with the same name already exists, it is added at the end of the\n",430],["T_WHITESPACE","  ",431],["T_COMMENT","\/\/   archive, the first one is still present.\n",431],["T_WHITESPACE","  ",432],["T_COMMENT","\/\/   If the archive does not exist, it is created.\n",432],["T_WHITESPACE","  ",433],["T_COMMENT","\/\/ Parameters :\n",433],["T_WHITESPACE","  ",434],["T_COMMENT","\/\/   $p_filelist : An array containing file or directory names, or\n",434],["T_WHITESPACE","  ",435],["T_COMMENT","\/\/                 a string containing one filename or one directory name, or\n",435],["T_WHITESPACE","  ",436],["T_COMMENT","\/\/                 a string containing a list of filenames and\/or directory\n",436],["T_WHITESPACE","  ",437],["T_COMMENT","\/\/                 names separated by spaces.\n",437],["T_WHITESPACE","  ",438],["T_COMMENT","\/\/   $p_add_dir : A path to add before the real path of the archived file,\n",438],["T_WHITESPACE","  ",439],["T_COMMENT","\/\/                in order to have it memorized in the archive.\n",439],["T_WHITESPACE","  ",440],["T_COMMENT","\/\/   $p_remove_dir : A path to remove from the real path of the file to archive,\n",440],["T_WHITESPACE","  ",441],["T_COMMENT","\/\/                   in order to have a shorter path memorized in the archive.\n",441],["T_WHITESPACE","  ",442],["T_COMMENT","\/\/                   When $p_add_dir and $p_remove_dir are set, $p_remove_dir\n",442],["T_WHITESPACE","  ",443],["T_COMMENT","\/\/                   is removed first, before $p_add_dir is added.\n",443],["T_WHITESPACE","  ",444],["T_COMMENT","\/\/ Options :\n",444],["T_WHITESPACE","  ",445],["T_COMMENT","\/\/   PCLZIP_OPT_ADD_PATH :\n",445],["T_WHITESPACE","  ",446],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_PATH :\n",446],["T_WHITESPACE","  ",447],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_ALL_PATH :\n",447],["T_WHITESPACE","  ",448],["T_COMMENT","\/\/   PCLZIP_OPT_COMMENT :\n",448],["T_WHITESPACE","  ",449],["T_COMMENT","\/\/   PCLZIP_OPT_ADD_COMMENT :\n",449],["T_WHITESPACE","  ",450],["T_COMMENT","\/\/   PCLZIP_OPT_PREPEND_COMMENT :\n",450],["T_WHITESPACE","  ",451],["T_COMMENT","\/\/   PCLZIP_CB_PRE_ADD :\n",451],["T_WHITESPACE","  ",452],["T_COMMENT","\/\/   PCLZIP_CB_POST_ADD :\n",452],["T_WHITESPACE","  ",453],["T_COMMENT","\/\/ Return Values :\n",453],["T_WHITESPACE","  ",454],["T_COMMENT","\/\/   0 on failure,\n",454],["T_WHITESPACE","  ",455],["T_COMMENT","\/\/   The list of the added files, with a status of the add action.\n",455],["T_WHITESPACE","  ",456],["T_COMMENT","\/\/   (see PclZip::listContent() for list entry format)\n",456],["T_WHITESPACE","  ",457],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",457],["T_WHITESPACE","  ",458],["T_FUNCTION","function",458],["T_WHITESPACE"," ",458],["T_STRING","add",458],"(",["T_VARIABLE","$p_filelist",458],")",["T_WHITESPACE","\n  ",458],"{",["T_WHITESPACE","\n    ",459],["T_VARIABLE","$v_result",460],"=",["T_LNUMBER","1",460],";",["T_WHITESPACE","\n\n    ",460],["T_COMMENT","\/\/ ----- Reset the error handler\n",462],["T_WHITESPACE","    ",463],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","privErrorReset",463],"(",")",";",["T_WHITESPACE","\n\n    ",463],["T_COMMENT","\/\/ ----- Set default values\n",465],["T_WHITESPACE","    ",466],["T_VARIABLE","$v_options",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_ARRAY","array",466],"(",")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$v_options",467],"[",["T_STRING","PCLZIP_OPT_NO_COMPRESSION",467],"]",["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","FALSE",467],";",["T_WHITESPACE","\n\n    ",467],["T_COMMENT","\/\/ ----- Look for variable options arguments\n",469],["T_WHITESPACE","    ",470],["T_VARIABLE","$v_size",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","func_num_args",470],"(",")",";",["T_WHITESPACE","\n\n    ",470],["T_COMMENT","\/\/ ----- Look for arguments\n",472],["T_WHITESPACE","    ",473],["T_IF","if",473],["T_WHITESPACE"," ",473],"(",["T_VARIABLE","$v_size",473],["T_WHITESPACE"," ",473],">",["T_WHITESPACE"," ",473],["T_LNUMBER","1",473],")",["T_WHITESPACE"," ",473],"{",["T_WHITESPACE","\n      ",473],["T_COMMENT","\/\/ ----- Get the arguments\n",474],["T_WHITESPACE","      ",475],["T_VARIABLE","$v_arg_list",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","func_get_args",475],"(",")",";",["T_WHITESPACE","\n\n      ",475],["T_COMMENT","\/\/ ----- Remove form the options list the first argument\n",477],["T_WHITESPACE","      ",478],["T_STRING","array_shift",478],"(",["T_VARIABLE","$v_arg_list",478],")",";",["T_WHITESPACE","\n      ",478],["T_VARIABLE","$v_size",479],["T_DEC","--",479],";",["T_WHITESPACE","\n\n      ",479],["T_COMMENT","\/\/ ----- Look for first arg\n",481],["T_WHITESPACE","      ",482],["T_IF","if",482],["T_WHITESPACE"," ",482],"(","(",["T_STRING","is_integer",482],"(",["T_VARIABLE","$v_arg_list",482],"[",["T_LNUMBER","0",482],"]",")",")",["T_WHITESPACE"," ",482],["T_BOOLEAN_AND","&&",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$v_arg_list",482],"[",["T_LNUMBER","0",482],"]",["T_WHITESPACE"," ",482],">",["T_WHITESPACE"," ",482],["T_LNUMBER","77000",482],")",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n\n        ",482],["T_COMMENT","\/\/ ----- Parse the options\n",484],["T_WHITESPACE","        ",485],["T_VARIABLE","$v_result",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","privParseOptions",485],"(",["T_VARIABLE","$v_arg_list",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$v_size",485],",",["T_WHITESPACE"," ",485],["T_VARIABLE","$v_options",485],",",["T_WHITESPACE","\n                                            ",485],["T_ARRAY","array",486],["T_WHITESPACE"," ",486],"(",["T_STRING","PCLZIP_OPT_REMOVE_PATH",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'optional'",486],",",["T_WHITESPACE","\n                                                   ",486],["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'optional'",487],",",["T_WHITESPACE","\n                                                   ",487],["T_STRING","PCLZIP_OPT_ADD_PATH",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'optional'",488],",",["T_WHITESPACE","\n                                                   ",488],["T_STRING","PCLZIP_CB_PRE_ADD",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_CONSTANT_ENCAPSED_STRING","'optional'",489],",",["T_WHITESPACE","\n                                                   ",489],["T_STRING","PCLZIP_CB_POST_ADD",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_CONSTANT_ENCAPSED_STRING","'optional'",490],",",["T_WHITESPACE","\n                                                   ",490],["T_STRING","PCLZIP_OPT_NO_COMPRESSION",491],["T_WHITESPACE"," ",491],["T_DOUBLE_ARROW","=>",491],["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'optional'",491],",",["T_WHITESPACE","\n                                                   ",491],["T_STRING","PCLZIP_OPT_COMMENT",492],["T_WHITESPACE"," ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'optional'",492],",",["T_WHITESPACE","\n                                                   ",492],["T_STRING","PCLZIP_OPT_ADD_COMMENT",493],["T_WHITESPACE"," ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'optional'",493],",",["T_WHITESPACE","\n                                                   ",493],["T_STRING","PCLZIP_OPT_PREPEND_COMMENT",494],["T_WHITESPACE"," ",494],["T_DOUBLE_ARROW","=>",494],["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'optional'",494],",",["T_WHITESPACE","\n                                                   ",494],["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",495],["T_WHITESPACE"," ",495],["T_DOUBLE_ARROW","=>",495],["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'optional'",495],",",["T_WHITESPACE","\n                                                   ",495],["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_CONSTANT_ENCAPSED_STRING","'optional'",496],",",["T_WHITESPACE","\n                                                   ",496],["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",497],["T_WHITESPACE"," ",497],["T_DOUBLE_ARROW","=>",497],["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'optional'",497],["T_WHITESPACE","\n                                                   ",497],["T_COMMENT","\/\/, PCLZIP_OPT_CRYPT => 'optional'\n",498],["T_WHITESPACE","\t\t\t\t\t\t\t\t\t\t\t\t   ",499],")",")",";",["T_WHITESPACE","\n        ",499],["T_IF","if",500],["T_WHITESPACE"," ",500],"(",["T_VARIABLE","$v_result",500],["T_WHITESPACE"," ",500],["T_IS_NOT_EQUAL","!=",500],["T_WHITESPACE"," ",500],["T_LNUMBER","1",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n          ",500],["T_RETURN","return",501],["T_WHITESPACE"," ",501],["T_LNUMBER","0",501],";",["T_WHITESPACE","\n        ",501],"}",["T_WHITESPACE","\n      ",502],"}",["T_WHITESPACE","\n\n      ",503],["T_COMMENT","\/\/ ----- Look for 2 args\n",505],["T_WHITESPACE","      ",506],["T_COMMENT","\/\/ Here we need to support the first historic synopsis of the\n",506],["T_WHITESPACE","      ",507],["T_COMMENT","\/\/ method.\n",507],["T_WHITESPACE","      ",508],["T_ELSE","else",508],["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n\n        ",508],["T_COMMENT","\/\/ ----- Get the first argument\n",510],["T_WHITESPACE","        ",511],["T_VARIABLE","$v_options",511],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",511],"]",["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$v_add_path",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_VARIABLE","$v_arg_list",511],"[",["T_LNUMBER","0",511],"]",";",["T_WHITESPACE","\n\n        ",511],["T_COMMENT","\/\/ ----- Look for the optional second argument\n",513],["T_WHITESPACE","        ",514],["T_IF","if",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$v_size",514],["T_WHITESPACE"," ",514],["T_IS_EQUAL","==",514],["T_WHITESPACE"," ",514],["T_LNUMBER","2",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n          ",514],["T_VARIABLE","$v_options",515],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",515],"]",["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$v_arg_list",515],"[",["T_LNUMBER","1",515],"]",";",["T_WHITESPACE","\n        ",515],"}",["T_WHITESPACE","\n        ",516],["T_ELSE","else",517],["T_WHITESPACE"," ",517],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$v_size",517],["T_WHITESPACE"," ",517],">",["T_WHITESPACE"," ",517],["T_LNUMBER","2",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n          ",517],["T_COMMENT","\/\/ ----- Error log\n",518],["T_WHITESPACE","          ",519],["T_STRING","PclZip",519],["T_DOUBLE_COLON","::",519],["T_STRING","privErrorLog",519],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","\"Invalid number \/ type of arguments\"",519],")",";",["T_WHITESPACE","\n\n          ",519],["T_COMMENT","\/\/ ----- Return\n",521],["T_WHITESPACE","          ",522],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_LNUMBER","0",522],";",["T_WHITESPACE","\n        ",522],"}",["T_WHITESPACE","\n      ",523],"}",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n\n    ",525],["T_COMMENT","\/\/ ----- Look for default option values\n",527],["T_WHITESPACE","    ",528],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","privOptionDefaultThreshold",528],"(",["T_VARIABLE","$v_options",528],")",";",["T_WHITESPACE","\n\n    ",528],["T_COMMENT","\/\/ ----- Init\n",530],["T_WHITESPACE","    ",531],["T_VARIABLE","$v_string_list",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_ARRAY","array",531],"(",")",";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$v_att_list",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_ARRAY","array",532],"(",")",";",["T_WHITESPACE","\n    ",532],["T_VARIABLE","$v_filedescr_list",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",")",";",["T_WHITESPACE","\n    ",533],["T_VARIABLE","$p_result_list",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],["T_ARRAY","array",534],"(",")",";",["T_WHITESPACE","\n\n    ",534],["T_COMMENT","\/\/ ----- Look if the $p_filelist is really an array\n",536],["T_WHITESPACE","    ",537],["T_IF","if",537],["T_WHITESPACE"," ",537],"(",["T_STRING","is_array",537],"(",["T_VARIABLE","$p_filelist",537],")",")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n\n      ",537],["T_COMMENT","\/\/ ----- Look if the first element is also an array\n",539],["T_WHITESPACE","      ",540],["T_COMMENT","\/\/       This will mean that this is a file description entry\n",540],["T_WHITESPACE","      ",541],["T_IF","if",541],["T_WHITESPACE"," ",541],"(",["T_ISSET","isset",541],"(",["T_VARIABLE","$p_filelist",541],"[",["T_LNUMBER","0",541],"]",")",["T_WHITESPACE"," ",541],["T_BOOLEAN_AND","&&",541],["T_WHITESPACE"," ",541],["T_STRING","is_array",541],"(",["T_VARIABLE","$p_filelist",541],"[",["T_LNUMBER","0",541],"]",")",")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n        ",541],["T_VARIABLE","$v_att_list",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_VARIABLE","$p_filelist",542],";",["T_WHITESPACE","\n      ",542],"}",["T_WHITESPACE","\n\n      ",543],["T_COMMENT","\/\/ ----- The list is a list of string names\n",545],["T_WHITESPACE","      ",546],["T_ELSE","else",546],["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n        ",546],["T_VARIABLE","$v_string_list",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_VARIABLE","$p_filelist",547],";",["T_WHITESPACE","\n      ",547],"}",["T_WHITESPACE","\n    ",548],"}",["T_WHITESPACE","\n\n    ",549],["T_COMMENT","\/\/ ----- Look if the $p_filelist is a string\n",551],["T_WHITESPACE","    ",552],["T_ELSE","else",552],["T_WHITESPACE"," ",552],["T_IF","if",552],["T_WHITESPACE"," ",552],"(",["T_STRING","is_string",552],"(",["T_VARIABLE","$p_filelist",552],")",")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n      ",552],["T_COMMENT","\/\/ ----- Create a list from the string\n",553],["T_WHITESPACE","      ",554],["T_VARIABLE","$v_string_list",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_STRING","explode",554],"(",["T_STRING","PCLZIP_SEPARATOR",554],",",["T_WHITESPACE"," ",554],["T_VARIABLE","$p_filelist",554],")",";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n\n    ",555],["T_COMMENT","\/\/ ----- Invalid variable type for $p_filelist\n",557],["T_WHITESPACE","    ",558],["T_ELSE","else",558],["T_WHITESPACE"," ",558],"{",["T_WHITESPACE","\n      ",558],["T_STRING","PclZip",559],["T_DOUBLE_COLON","::",559],["T_STRING","privErrorLog",559],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",559],",",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","\"Invalid variable type '\"",559],".",["T_STRING","gettype",559],"(",["T_VARIABLE","$p_filelist",559],")",".",["T_CONSTANT_ENCAPSED_STRING","\"' for p_filelist\"",559],")",";",["T_WHITESPACE","\n      ",559],["T_RETURN","return",560],["T_WHITESPACE"," ",560],["T_LNUMBER","0",560],";",["T_WHITESPACE","\n    ",560],"}",["T_WHITESPACE","\n\n    ",561],["T_COMMENT","\/\/ ----- Reformat the string list\n",563],["T_WHITESPACE","    ",564],["T_IF","if",564],["T_WHITESPACE"," ",564],"(",["T_STRING","sizeof",564],"(",["T_VARIABLE","$v_string_list",564],")",["T_WHITESPACE"," ",564],["T_IS_NOT_EQUAL","!=",564],["T_WHITESPACE"," ",564],["T_LNUMBER","0",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n      ",564],["T_FOREACH","foreach",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$v_string_list",565],["T_WHITESPACE"," ",565],["T_AS","as",565],["T_WHITESPACE"," ",565],["T_VARIABLE","$v_string",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n        ",565],["T_VARIABLE","$v_att_list",566],"[","]","[",["T_STRING","PCLZIP_ATT_FILE_NAME",566],"]",["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$v_string",566],";",["T_WHITESPACE","\n      ",566],"}",["T_WHITESPACE","\n    ",567],"}",["T_WHITESPACE","\n\n    ",568],["T_COMMENT","\/\/ ----- For each file in the list check the attributes\n",570],["T_WHITESPACE","    ",571],["T_VARIABLE","$v_supported_attributes",571],["T_WHITESPACE","\n    ",571],"=",["T_WHITESPACE"," ",572],["T_ARRAY","array",572],["T_WHITESPACE"," ",572],"(",["T_WHITESPACE"," ",572],["T_STRING","PCLZIP_ATT_FILE_NAME",572],["T_WHITESPACE"," ",572],["T_DOUBLE_ARROW","=>",572],["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'mandatory'",572],["T_WHITESPACE","\n             ",572],",",["T_STRING","PCLZIP_ATT_FILE_NEW_SHORT_NAME",573],["T_WHITESPACE"," ",573],["T_DOUBLE_ARROW","=>",573],["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'optional'",573],["T_WHITESPACE","\n             ",573],",",["T_STRING","PCLZIP_ATT_FILE_NEW_FULL_NAME",574],["T_WHITESPACE"," ",574],["T_DOUBLE_ARROW","=>",574],["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'optional'",574],["T_WHITESPACE","\n             ",574],",",["T_STRING","PCLZIP_ATT_FILE_MTIME",575],["T_WHITESPACE"," ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],["T_CONSTANT_ENCAPSED_STRING","'optional'",575],["T_WHITESPACE","\n             ",575],",",["T_STRING","PCLZIP_ATT_FILE_CONTENT",576],["T_WHITESPACE"," ",576],["T_DOUBLE_ARROW","=>",576],["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'optional'",576],["T_WHITESPACE","\n             ",576],",",["T_STRING","PCLZIP_ATT_FILE_COMMENT",577],["T_WHITESPACE"," ",577],["T_DOUBLE_ARROW","=>",577],["T_WHITESPACE"," ",577],["T_CONSTANT_ENCAPSED_STRING","'optional'",577],["T_WHITESPACE","\n\t\t\t\t\t\t",577],")",";",["T_WHITESPACE","\n    ",578],["T_FOREACH","foreach",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$v_att_list",579],["T_WHITESPACE"," ",579],["T_AS","as",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$v_entry",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n      ",579],["T_VARIABLE","$v_result",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","privFileDescrParseAtt",580],"(",["T_VARIABLE","$v_entry",580],",",["T_WHITESPACE","\n                                               ",580],["T_VARIABLE","$v_filedescr_list",581],"[","]",",",["T_WHITESPACE","\n                                               ",581],["T_VARIABLE","$v_options",582],",",["T_WHITESPACE","\n                                               ",582],["T_VARIABLE","$v_supported_attributes",583],")",";",["T_WHITESPACE","\n      ",583],["T_IF","if",584],["T_WHITESPACE"," ",584],"(",["T_VARIABLE","$v_result",584],["T_WHITESPACE"," ",584],["T_IS_NOT_EQUAL","!=",584],["T_WHITESPACE"," ",584],["T_LNUMBER","1",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n        ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_LNUMBER","0",585],";",["T_WHITESPACE","\n      ",585],"}",["T_WHITESPACE","\n    ",586],"}",["T_WHITESPACE","\n\n    ",587],["T_COMMENT","\/\/ ----- Expand the filelist (expand directories)\n",589],["T_WHITESPACE","    ",590],["T_VARIABLE","$v_result",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_VARIABLE","$this",590],["T_OBJECT_OPERATOR","->",590],["T_STRING","privFileDescrExpand",590],"(",["T_VARIABLE","$v_filedescr_list",590],",",["T_WHITESPACE"," ",590],["T_VARIABLE","$v_options",590],")",";",["T_WHITESPACE","\n    ",590],["T_IF","if",591],["T_WHITESPACE"," ",591],"(",["T_VARIABLE","$v_result",591],["T_WHITESPACE"," ",591],["T_IS_NOT_EQUAL","!=",591],["T_WHITESPACE"," ",591],["T_LNUMBER","1",591],")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n      ",591],["T_RETURN","return",592],["T_WHITESPACE"," ",592],["T_LNUMBER","0",592],";",["T_WHITESPACE","\n    ",592],"}",["T_WHITESPACE","\n\n    ",593],["T_COMMENT","\/\/ ----- Call the create fct\n",595],["T_WHITESPACE","    ",596],["T_VARIABLE","$v_result",596],["T_WHITESPACE"," ",596],"=",["T_WHITESPACE"," ",596],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","privAdd",596],"(",["T_VARIABLE","$v_filedescr_list",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$p_result_list",596],",",["T_WHITESPACE"," ",596],["T_VARIABLE","$v_options",596],")",";",["T_WHITESPACE","\n    ",596],["T_IF","if",597],["T_WHITESPACE"," ",597],"(",["T_VARIABLE","$v_result",597],["T_WHITESPACE"," ",597],["T_IS_NOT_EQUAL","!=",597],["T_WHITESPACE"," ",597],["T_LNUMBER","1",597],")",["T_WHITESPACE"," ",597],"{",["T_WHITESPACE","\n      ",597],["T_RETURN","return",598],["T_WHITESPACE"," ",598],["T_LNUMBER","0",598],";",["T_WHITESPACE","\n    ",598],"}",["T_WHITESPACE","\n\n    ",599],["T_COMMENT","\/\/ ----- Return\n",601],["T_WHITESPACE","    ",602],["T_RETURN","return",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$p_result_list",602],";",["T_WHITESPACE","\n  ",602],"}",["T_WHITESPACE","\n  ",603],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",604],["T_WHITESPACE","\n  ",605],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",606],["T_WHITESPACE","  ",607],["T_COMMENT","\/\/ Function : listContent()\n",607],["T_WHITESPACE","  ",608],["T_COMMENT","\/\/ Description :\n",608],["T_WHITESPACE","  ",609],["T_COMMENT","\/\/   This public method, gives the list of the files and directories, with their\n",609],["T_WHITESPACE","  ",610],["T_COMMENT","\/\/   properties.\n",610],["T_WHITESPACE","  ",611],["T_COMMENT","\/\/   The properties of each entries in the list are (used also in other functions) :\n",611],["T_WHITESPACE","  ",612],["T_COMMENT","\/\/     filename : Name of the file. For a create or add action it is the filename\n",612],["T_WHITESPACE","  ",613],["T_COMMENT","\/\/                given by the user. For an extract function it is the filename\n",613],["T_WHITESPACE","  ",614],["T_COMMENT","\/\/                of the extracted file.\n",614],["T_WHITESPACE","  ",615],["T_COMMENT","\/\/     stored_filename : Name of the file \/ directory stored in the archive.\n",615],["T_WHITESPACE","  ",616],["T_COMMENT","\/\/     size : Size of the stored file.\n",616],["T_WHITESPACE","  ",617],["T_COMMENT","\/\/     compressed_size : Size of the file's data compressed in the archive\n",617],["T_WHITESPACE","  ",618],["T_COMMENT","\/\/                       (without the headers overhead)\n",618],["T_WHITESPACE","  ",619],["T_COMMENT","\/\/     mtime : Last known modification date of the file (UNIX timestamp)\n",619],["T_WHITESPACE","  ",620],["T_COMMENT","\/\/     comment : Comment associated with the file\n",620],["T_WHITESPACE","  ",621],["T_COMMENT","\/\/     folder : true | false\n",621],["T_WHITESPACE","  ",622],["T_COMMENT","\/\/     index : index of the file in the archive\n",622],["T_WHITESPACE","  ",623],["T_COMMENT","\/\/     status : status of the action (depending of the action) :\n",623],["T_WHITESPACE","  ",624],["T_COMMENT","\/\/              Values are :\n",624],["T_WHITESPACE","  ",625],["T_COMMENT","\/\/                ok : OK !\n",625],["T_WHITESPACE","  ",626],["T_COMMENT","\/\/                filtered : the file \/ dir is not extracted (filtered by user)\n",626],["T_WHITESPACE","  ",627],["T_COMMENT","\/\/                already_a_directory : the file can not be extracted because a\n",627],["T_WHITESPACE","  ",628],["T_COMMENT","\/\/                                      directory with the same name already exists\n",628],["T_WHITESPACE","  ",629],["T_COMMENT","\/\/                write_protected : the file can not be extracted because a file\n",629],["T_WHITESPACE","  ",630],["T_COMMENT","\/\/                                  with the same name already exists and is\n",630],["T_WHITESPACE","  ",631],["T_COMMENT","\/\/                                  write protected\n",631],["T_WHITESPACE","  ",632],["T_COMMENT","\/\/                newer_exist : the file was not extracted because a newer file exists\n",632],["T_WHITESPACE","  ",633],["T_COMMENT","\/\/                path_creation_fail : the file is not extracted because the folder\n",633],["T_WHITESPACE","  ",634],["T_COMMENT","\/\/                                     does not exist and can not be created\n",634],["T_WHITESPACE","  ",635],["T_COMMENT","\/\/                write_error : the file was not extracted because there was a\n",635],["T_WHITESPACE","  ",636],["T_COMMENT","\/\/                              error while writing the file\n",636],["T_WHITESPACE","  ",637],["T_COMMENT","\/\/                read_error : the file was not extracted because there was a error\n",637],["T_WHITESPACE","  ",638],["T_COMMENT","\/\/                             while reading the file\n",638],["T_WHITESPACE","  ",639],["T_COMMENT","\/\/                invalid_header : the file was not extracted because of an archive\n",639],["T_WHITESPACE","  ",640],["T_COMMENT","\/\/                                 format error (bad file header)\n",640],["T_WHITESPACE","  ",641],["T_COMMENT","\/\/   Note that each time a method can continue operating when there\n",641],["T_WHITESPACE","  ",642],["T_COMMENT","\/\/   is an action error on a file, the error is only logged in the file status.\n",642],["T_WHITESPACE","  ",643],["T_COMMENT","\/\/ Return Values :\n",643],["T_WHITESPACE","  ",644],["T_COMMENT","\/\/   0 on an unrecoverable failure,\n",644],["T_WHITESPACE","  ",645],["T_COMMENT","\/\/   The list of the files in the archive.\n",645],["T_WHITESPACE","  ",646],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",646],["T_WHITESPACE","  ",647],["T_FUNCTION","function",647],["T_WHITESPACE"," ",647],["T_STRING","listContent",647],"(",")",["T_WHITESPACE","\n  ",647],"{",["T_WHITESPACE","\n    ",648],["T_VARIABLE","$v_result",649],"=",["T_LNUMBER","1",649],";",["T_WHITESPACE","\n\n    ",649],["T_COMMENT","\/\/ ----- Reset the error handler\n",651],["T_WHITESPACE","    ",652],["T_VARIABLE","$this",652],["T_OBJECT_OPERATOR","->",652],["T_STRING","privErrorReset",652],"(",")",";",["T_WHITESPACE","\n\n    ",652],["T_COMMENT","\/\/ ----- Check archive\n",654],["T_WHITESPACE","    ",655],["T_IF","if",655],["T_WHITESPACE"," ",655],"(","!",["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","privCheckFormat",655],"(",")",")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n      ",655],["T_RETURN","return",656],"(",["T_LNUMBER","0",656],")",";",["T_WHITESPACE","\n    ",656],"}",["T_WHITESPACE","\n\n    ",657],["T_COMMENT","\/\/ ----- Call the extracting fct\n",659],["T_WHITESPACE","    ",660],["T_VARIABLE","$p_list",660],["T_WHITESPACE"," ",660],"=",["T_WHITESPACE"," ",660],["T_ARRAY","array",660],"(",")",";",["T_WHITESPACE","\n    ",660],["T_IF","if",661],["T_WHITESPACE"," ",661],"(","(",["T_VARIABLE","$v_result",661],["T_WHITESPACE"," ",661],"=",["T_WHITESPACE"," ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","privList",661],"(",["T_VARIABLE","$p_list",661],")",")",["T_WHITESPACE"," ",661],["T_IS_NOT_EQUAL","!=",661],["T_WHITESPACE"," ",661],["T_LNUMBER","1",661],")",["T_WHITESPACE","\n    ",661],"{",["T_WHITESPACE","\n      ",662],["T_UNSET","unset",663],"(",["T_VARIABLE","$p_list",663],")",";",["T_WHITESPACE","\n      ",663],["T_RETURN","return",664],"(",["T_LNUMBER","0",664],")",";",["T_WHITESPACE","\n    ",664],"}",["T_WHITESPACE","\n\n    ",665],["T_COMMENT","\/\/ ----- Return\n",667],["T_WHITESPACE","    ",668],["T_RETURN","return",668],["T_WHITESPACE"," ",668],["T_VARIABLE","$p_list",668],";",["T_WHITESPACE","\n  ",668],"}",["T_WHITESPACE","\n  ",669],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",670],["T_WHITESPACE","\n  ",671],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",672],["T_WHITESPACE","  ",673],["T_COMMENT","\/\/ Function :\n",673],["T_WHITESPACE","  ",674],["T_COMMENT","\/\/   extract($p_path=\".\/\", $p_remove_path=\"\")\n",674],["T_WHITESPACE","  ",675],["T_COMMENT","\/\/   extract([$p_option, $p_option_value, ...])\n",675],["T_WHITESPACE","  ",676],["T_COMMENT","\/\/ Description :\n",676],["T_WHITESPACE","  ",677],["T_COMMENT","\/\/   This method supports two synopsis. The first one is historical.\n",677],["T_WHITESPACE","  ",678],["T_COMMENT","\/\/   This method extract all the files \/ directories from the archive to the\n",678],["T_WHITESPACE","  ",679],["T_COMMENT","\/\/   folder indicated in $p_path.\n",679],["T_WHITESPACE","  ",680],["T_COMMENT","\/\/   If you want to ignore the 'root' part of path of the memorized files\n",680],["T_WHITESPACE","  ",681],["T_COMMENT","\/\/   you can indicate this in the optional $p_remove_path parameter.\n",681],["T_WHITESPACE","  ",682],["T_COMMENT","\/\/   By default, if a newer file with the same name already exists, the\n",682],["T_WHITESPACE","  ",683],["T_COMMENT","\/\/   file is not extracted.\n",683],["T_WHITESPACE","  ",684],["T_COMMENT","\/\/\n",684],["T_WHITESPACE","  ",685],["T_COMMENT","\/\/   If both PCLZIP_OPT_PATH and PCLZIP_OPT_ADD_PATH aoptions\n",685],["T_WHITESPACE","  ",686],["T_COMMENT","\/\/   are used, the path indicated in PCLZIP_OPT_ADD_PATH is append\n",686],["T_WHITESPACE","  ",687],["T_COMMENT","\/\/   at the end of the path value of PCLZIP_OPT_PATH.\n",687],["T_WHITESPACE","  ",688],["T_COMMENT","\/\/ Parameters :\n",688],["T_WHITESPACE","  ",689],["T_COMMENT","\/\/   $p_path : Path where the files and directories are to be extracted\n",689],["T_WHITESPACE","  ",690],["T_COMMENT","\/\/   $p_remove_path : First part ('root' part) of the memorized path\n",690],["T_WHITESPACE","  ",691],["T_COMMENT","\/\/                    (if any similar) to remove while extracting.\n",691],["T_WHITESPACE","  ",692],["T_COMMENT","\/\/ Options :\n",692],["T_WHITESPACE","  ",693],["T_COMMENT","\/\/   PCLZIP_OPT_PATH :\n",693],["T_WHITESPACE","  ",694],["T_COMMENT","\/\/   PCLZIP_OPT_ADD_PATH :\n",694],["T_WHITESPACE","  ",695],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_PATH :\n",695],["T_WHITESPACE","  ",696],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_ALL_PATH :\n",696],["T_WHITESPACE","  ",697],["T_COMMENT","\/\/   PCLZIP_CB_PRE_EXTRACT :\n",697],["T_WHITESPACE","  ",698],["T_COMMENT","\/\/   PCLZIP_CB_POST_EXTRACT :\n",698],["T_WHITESPACE","  ",699],["T_COMMENT","\/\/ Return Values :\n",699],["T_WHITESPACE","  ",700],["T_COMMENT","\/\/   0 or a negative value on failure,\n",700],["T_WHITESPACE","  ",701],["T_COMMENT","\/\/   The list of the extracted files, with a status of the action.\n",701],["T_WHITESPACE","  ",702],["T_COMMENT","\/\/   (see PclZip::listContent() for list entry format)\n",702],["T_WHITESPACE","  ",703],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",703],["T_WHITESPACE","  ",704],["T_FUNCTION","function",704],["T_WHITESPACE"," ",704],["T_STRING","extract",704],"(",")",["T_WHITESPACE","\n  ",704],"{",["T_WHITESPACE","\n    ",705],["T_VARIABLE","$v_result",706],"=",["T_LNUMBER","1",706],";",["T_WHITESPACE","\n\n    ",706],["T_COMMENT","\/\/ ----- Reset the error handler\n",708],["T_WHITESPACE","    ",709],["T_VARIABLE","$this",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","privErrorReset",709],"(",")",";",["T_WHITESPACE","\n\n    ",709],["T_COMMENT","\/\/ ----- Check archive\n",711],["T_WHITESPACE","    ",712],["T_IF","if",712],["T_WHITESPACE"," ",712],"(","!",["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","privCheckFormat",712],"(",")",")",["T_WHITESPACE"," ",712],"{",["T_WHITESPACE","\n      ",712],["T_RETURN","return",713],"(",["T_LNUMBER","0",713],")",";",["T_WHITESPACE","\n    ",713],"}",["T_WHITESPACE","\n\n    ",714],["T_COMMENT","\/\/ ----- Set default values\n",716],["T_WHITESPACE","    ",717],["T_VARIABLE","$v_options",717],["T_WHITESPACE"," ",717],"=",["T_WHITESPACE"," ",717],["T_ARRAY","array",717],"(",")",";",["T_WHITESPACE","\n",717],["T_COMMENT","\/\/    $v_path = \".\/\";\n",718],["T_WHITESPACE","    ",719],["T_VARIABLE","$v_path",719],["T_WHITESPACE"," ",719],"=",["T_WHITESPACE"," ",719],["T_CONSTANT_ENCAPSED_STRING","''",719],";",["T_WHITESPACE","\n    ",719],["T_VARIABLE","$v_remove_path",720],["T_WHITESPACE"," ",720],"=",["T_WHITESPACE"," ",720],["T_CONSTANT_ENCAPSED_STRING","\"\"",720],";",["T_WHITESPACE","\n    ",720],["T_VARIABLE","$v_remove_all_path",721],["T_WHITESPACE"," ",721],"=",["T_WHITESPACE"," ",721],["T_STRING","false",721],";",["T_WHITESPACE","\n\n    ",721],["T_COMMENT","\/\/ ----- Look for variable options arguments\n",723],["T_WHITESPACE","    ",724],["T_VARIABLE","$v_size",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],["T_STRING","func_num_args",724],"(",")",";",["T_WHITESPACE","\n\n    ",724],["T_COMMENT","\/\/ ----- Default values for option\n",726],["T_WHITESPACE","    ",727],["T_VARIABLE","$v_options",727],"[",["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",727],"]",["T_WHITESPACE"," ",727],"=",["T_WHITESPACE"," ",727],["T_STRING","FALSE",727],";",["T_WHITESPACE","\n\n    ",727],["T_COMMENT","\/\/ ----- Look for arguments\n",729],["T_WHITESPACE","    ",730],["T_IF","if",730],["T_WHITESPACE"," ",730],"(",["T_VARIABLE","$v_size",730],["T_WHITESPACE"," ",730],">",["T_WHITESPACE"," ",730],["T_LNUMBER","0",730],")",["T_WHITESPACE"," ",730],"{",["T_WHITESPACE","\n      ",730],["T_COMMENT","\/\/ ----- Get the arguments\n",731],["T_WHITESPACE","      ",732],["T_VARIABLE","$v_arg_list",732],["T_WHITESPACE"," ",732],"=",["T_WHITESPACE"," ",732],["T_STRING","func_get_args",732],"(",")",";",["T_WHITESPACE","\n\n      ",732],["T_COMMENT","\/\/ ----- Look for first arg\n",734],["T_WHITESPACE","      ",735],["T_IF","if",735],["T_WHITESPACE"," ",735],"(","(",["T_STRING","is_integer",735],"(",["T_VARIABLE","$v_arg_list",735],"[",["T_LNUMBER","0",735],"]",")",")",["T_WHITESPACE"," ",735],["T_BOOLEAN_AND","&&",735],["T_WHITESPACE"," ",735],"(",["T_VARIABLE","$v_arg_list",735],"[",["T_LNUMBER","0",735],"]",["T_WHITESPACE"," ",735],">",["T_WHITESPACE"," ",735],["T_LNUMBER","77000",735],")",")",["T_WHITESPACE"," ",735],"{",["T_WHITESPACE","\n\n        ",735],["T_COMMENT","\/\/ ----- Parse the options\n",737],["T_WHITESPACE","        ",738],["T_VARIABLE","$v_result",738],["T_WHITESPACE"," ",738],"=",["T_WHITESPACE"," ",738],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","privParseOptions",738],"(",["T_VARIABLE","$v_arg_list",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$v_size",738],",",["T_WHITESPACE"," ",738],["T_VARIABLE","$v_options",738],",",["T_WHITESPACE","\n                                            ",738],["T_ARRAY","array",739],["T_WHITESPACE"," ",739],"(",["T_STRING","PCLZIP_OPT_PATH",739],["T_WHITESPACE"," ",739],["T_DOUBLE_ARROW","=>",739],["T_WHITESPACE"," ",739],["T_CONSTANT_ENCAPSED_STRING","'optional'",739],",",["T_WHITESPACE","\n                                                   ",739],["T_STRING","PCLZIP_OPT_REMOVE_PATH",740],["T_WHITESPACE"," ",740],["T_DOUBLE_ARROW","=>",740],["T_WHITESPACE"," ",740],["T_CONSTANT_ENCAPSED_STRING","'optional'",740],",",["T_WHITESPACE","\n                                                   ",740],["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",741],["T_WHITESPACE"," ",741],["T_DOUBLE_ARROW","=>",741],["T_WHITESPACE"," ",741],["T_CONSTANT_ENCAPSED_STRING","'optional'",741],",",["T_WHITESPACE","\n                                                   ",741],["T_STRING","PCLZIP_OPT_ADD_PATH",742],["T_WHITESPACE"," ",742],["T_DOUBLE_ARROW","=>",742],["T_WHITESPACE"," ",742],["T_CONSTANT_ENCAPSED_STRING","'optional'",742],",",["T_WHITESPACE","\n                                                   ",742],["T_STRING","PCLZIP_CB_PRE_EXTRACT",743],["T_WHITESPACE"," ",743],["T_DOUBLE_ARROW","=>",743],["T_WHITESPACE"," ",743],["T_CONSTANT_ENCAPSED_STRING","'optional'",743],",",["T_WHITESPACE","\n                                                   ",743],["T_STRING","PCLZIP_CB_POST_EXTRACT",744],["T_WHITESPACE"," ",744],["T_DOUBLE_ARROW","=>",744],["T_WHITESPACE"," ",744],["T_CONSTANT_ENCAPSED_STRING","'optional'",744],",",["T_WHITESPACE","\n                                                   ",744],["T_STRING","PCLZIP_OPT_SET_CHMOD",745],["T_WHITESPACE"," ",745],["T_DOUBLE_ARROW","=>",745],["T_WHITESPACE"," ",745],["T_CONSTANT_ENCAPSED_STRING","'optional'",745],",",["T_WHITESPACE","\n                                                   ",745],["T_STRING","PCLZIP_OPT_BY_NAME",746],["T_WHITESPACE"," ",746],["T_DOUBLE_ARROW","=>",746],["T_WHITESPACE"," ",746],["T_CONSTANT_ENCAPSED_STRING","'optional'",746],",",["T_WHITESPACE","\n                                                   ",746],["T_STRING","PCLZIP_OPT_BY_EREG",747],["T_WHITESPACE"," ",747],["T_DOUBLE_ARROW","=>",747],["T_WHITESPACE"," ",747],["T_CONSTANT_ENCAPSED_STRING","'optional'",747],",",["T_WHITESPACE","\n                                                   ",747],["T_STRING","PCLZIP_OPT_BY_PREG",748],["T_WHITESPACE"," ",748],["T_DOUBLE_ARROW","=>",748],["T_WHITESPACE"," ",748],["T_CONSTANT_ENCAPSED_STRING","'optional'",748],",",["T_WHITESPACE","\n                                                   ",748],["T_STRING","PCLZIP_OPT_BY_INDEX",749],["T_WHITESPACE"," ",749],["T_DOUBLE_ARROW","=>",749],["T_WHITESPACE"," ",749],["T_CONSTANT_ENCAPSED_STRING","'optional'",749],",",["T_WHITESPACE","\n                                                   ",749],["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",750],["T_WHITESPACE"," ",750],["T_DOUBLE_ARROW","=>",750],["T_WHITESPACE"," ",750],["T_CONSTANT_ENCAPSED_STRING","'optional'",750],",",["T_WHITESPACE","\n                                                   ",750],["T_STRING","PCLZIP_OPT_EXTRACT_IN_OUTPUT",751],["T_WHITESPACE"," ",751],["T_DOUBLE_ARROW","=>",751],["T_WHITESPACE"," ",751],["T_CONSTANT_ENCAPSED_STRING","'optional'",751],",",["T_WHITESPACE","\n                                                   ",751],["T_STRING","PCLZIP_OPT_REPLACE_NEWER",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_CONSTANT_ENCAPSED_STRING","'optional'",752],["T_WHITESPACE","\n                                                   ",752],",",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",753],["T_WHITESPACE"," ",753],["T_DOUBLE_ARROW","=>",753],["T_WHITESPACE"," ",753],["T_CONSTANT_ENCAPSED_STRING","'optional'",753],["T_WHITESPACE","\n                                                   ",753],",",["T_STRING","PCLZIP_OPT_EXTRACT_DIR_RESTRICTION",754],["T_WHITESPACE"," ",754],["T_DOUBLE_ARROW","=>",754],["T_WHITESPACE"," ",754],["T_CONSTANT_ENCAPSED_STRING","'optional'",754],",",["T_WHITESPACE","\n                                                   ",754],["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",755],["T_WHITESPACE"," ",755],["T_DOUBLE_ARROW","=>",755],["T_WHITESPACE"," ",755],["T_CONSTANT_ENCAPSED_STRING","'optional'",755],",",["T_WHITESPACE","\n                                                   ",755],["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",756],["T_WHITESPACE"," ",756],["T_DOUBLE_ARROW","=>",756],["T_WHITESPACE"," ",756],["T_CONSTANT_ENCAPSED_STRING","'optional'",756],",",["T_WHITESPACE","\n                                                   ",756],["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",757],["T_WHITESPACE"," ",757],["T_DOUBLE_ARROW","=>",757],["T_WHITESPACE"," ",757],["T_CONSTANT_ENCAPSED_STRING","'optional'",757],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t\t\t\t    ",757],")",")",";",["T_WHITESPACE","\n        ",758],["T_IF","if",759],["T_WHITESPACE"," ",759],"(",["T_VARIABLE","$v_result",759],["T_WHITESPACE"," ",759],["T_IS_NOT_EQUAL","!=",759],["T_WHITESPACE"," ",759],["T_LNUMBER","1",759],")",["T_WHITESPACE"," ",759],"{",["T_WHITESPACE","\n          ",759],["T_RETURN","return",760],["T_WHITESPACE"," ",760],["T_LNUMBER","0",760],";",["T_WHITESPACE","\n        ",760],"}",["T_WHITESPACE","\n\n        ",761],["T_COMMENT","\/\/ ----- Set the arguments\n",763],["T_WHITESPACE","        ",764],["T_IF","if",764],["T_WHITESPACE"," ",764],"(",["T_ISSET","isset",764],"(",["T_VARIABLE","$v_options",764],"[",["T_STRING","PCLZIP_OPT_PATH",764],"]",")",")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n          ",764],["T_VARIABLE","$v_path",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_VARIABLE","$v_options",765],"[",["T_STRING","PCLZIP_OPT_PATH",765],"]",";",["T_WHITESPACE","\n        ",765],"}",["T_WHITESPACE","\n        ",766],["T_IF","if",767],["T_WHITESPACE"," ",767],"(",["T_ISSET","isset",767],"(",["T_VARIABLE","$v_options",767],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",767],"]",")",")",["T_WHITESPACE"," ",767],"{",["T_WHITESPACE","\n          ",767],["T_VARIABLE","$v_remove_path",768],["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$v_options",768],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",768],"]",";",["T_WHITESPACE","\n        ",768],"}",["T_WHITESPACE","\n        ",769],["T_IF","if",770],["T_WHITESPACE"," ",770],"(",["T_ISSET","isset",770],"(",["T_VARIABLE","$v_options",770],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",770],"]",")",")",["T_WHITESPACE"," ",770],"{",["T_WHITESPACE","\n          ",770],["T_VARIABLE","$v_remove_all_path",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$v_options",771],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",771],"]",";",["T_WHITESPACE","\n        ",771],"}",["T_WHITESPACE","\n        ",772],["T_IF","if",773],["T_WHITESPACE"," ",773],"(",["T_ISSET","isset",773],"(",["T_VARIABLE","$v_options",773],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",773],"]",")",")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n          ",773],["T_COMMENT","\/\/ ----- Check for '\/' in last path char\n",774],["T_WHITESPACE","          ",775],["T_IF","if",775],["T_WHITESPACE"," ",775],"(","(",["T_STRING","strlen",775],"(",["T_VARIABLE","$v_path",775],")",["T_WHITESPACE"," ",775],">",["T_WHITESPACE"," ",775],["T_LNUMBER","0",775],")",["T_WHITESPACE"," ",775],["T_BOOLEAN_AND","&&",775],["T_WHITESPACE"," ",775],"(",["T_STRING","substr",775],"(",["T_VARIABLE","$v_path",775],",",["T_WHITESPACE"," ",775],"-",["T_LNUMBER","1",775],")",["T_WHITESPACE"," ",775],["T_IS_NOT_EQUAL","!=",775],["T_WHITESPACE"," ",775],["T_CONSTANT_ENCAPSED_STRING","'\/'",775],")",")",["T_WHITESPACE"," ",775],"{",["T_WHITESPACE","\n            ",775],["T_VARIABLE","$v_path",776],["T_WHITESPACE"," ",776],["T_CONCAT_EQUAL",".=",776],["T_WHITESPACE"," ",776],["T_CONSTANT_ENCAPSED_STRING","'\/'",776],";",["T_WHITESPACE","\n          ",776],"}",["T_WHITESPACE","\n          ",777],["T_VARIABLE","$v_path",778],["T_WHITESPACE"," ",778],["T_CONCAT_EQUAL",".=",778],["T_WHITESPACE"," ",778],["T_VARIABLE","$v_options",778],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",778],"]",";",["T_WHITESPACE","\n        ",778],"}",["T_WHITESPACE","\n      ",779],"}",["T_WHITESPACE","\n\n      ",780],["T_COMMENT","\/\/ ----- Look for 2 args\n",782],["T_WHITESPACE","      ",783],["T_COMMENT","\/\/ Here we need to support the first historic synopsis of the\n",783],["T_WHITESPACE","      ",784],["T_COMMENT","\/\/ method.\n",784],["T_WHITESPACE","      ",785],["T_ELSE","else",785],["T_WHITESPACE"," ",785],"{",["T_WHITESPACE","\n\n        ",785],["T_COMMENT","\/\/ ----- Get the first argument\n",787],["T_WHITESPACE","        ",788],["T_VARIABLE","$v_path",788],["T_WHITESPACE"," ",788],"=",["T_WHITESPACE"," ",788],["T_VARIABLE","$v_arg_list",788],"[",["T_LNUMBER","0",788],"]",";",["T_WHITESPACE","\n\n        ",788],["T_COMMENT","\/\/ ----- Look for the optional second argument\n",790],["T_WHITESPACE","        ",791],["T_IF","if",791],["T_WHITESPACE"," ",791],"(",["T_VARIABLE","$v_size",791],["T_WHITESPACE"," ",791],["T_IS_EQUAL","==",791],["T_WHITESPACE"," ",791],["T_LNUMBER","2",791],")",["T_WHITESPACE"," ",791],"{",["T_WHITESPACE","\n          ",791],["T_VARIABLE","$v_remove_path",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_VARIABLE","$v_arg_list",792],"[",["T_LNUMBER","1",792],"]",";",["T_WHITESPACE","\n        ",792],"}",["T_WHITESPACE","\n        ",793],["T_ELSE","else",794],["T_WHITESPACE"," ",794],["T_IF","if",794],["T_WHITESPACE"," ",794],"(",["T_VARIABLE","$v_size",794],["T_WHITESPACE"," ",794],">",["T_WHITESPACE"," ",794],["T_LNUMBER","2",794],")",["T_WHITESPACE"," ",794],"{",["T_WHITESPACE","\n          ",794],["T_COMMENT","\/\/ ----- Error log\n",795],["T_WHITESPACE","          ",796],["T_STRING","PclZip",796],["T_DOUBLE_COLON","::",796],["T_STRING","privErrorLog",796],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",796],",",["T_WHITESPACE"," ",796],["T_CONSTANT_ENCAPSED_STRING","\"Invalid number \/ type of arguments\"",796],")",";",["T_WHITESPACE","\n\n          ",796],["T_COMMENT","\/\/ ----- Return\n",798],["T_WHITESPACE","          ",799],["T_RETURN","return",799],["T_WHITESPACE"," ",799],["T_LNUMBER","0",799],";",["T_WHITESPACE","\n        ",799],"}",["T_WHITESPACE","\n      ",800],"}",["T_WHITESPACE","\n    ",801],"}",["T_WHITESPACE","\n\n    ",802],["T_COMMENT","\/\/ ----- Look for default option values\n",804],["T_WHITESPACE","    ",805],["T_VARIABLE","$this",805],["T_OBJECT_OPERATOR","->",805],["T_STRING","privOptionDefaultThreshold",805],"(",["T_VARIABLE","$v_options",805],")",";",["T_WHITESPACE","\n\n    ",805],["T_COMMENT","\/\/ ----- Trace\n",807],["T_WHITESPACE","\n    ",808],["T_COMMENT","\/\/ ----- Call the extracting fct\n",809],["T_WHITESPACE","    ",810],["T_VARIABLE","$p_list",810],["T_WHITESPACE"," ",810],"=",["T_WHITESPACE"," ",810],["T_ARRAY","array",810],"(",")",";",["T_WHITESPACE","\n    ",810],["T_VARIABLE","$v_result",811],["T_WHITESPACE"," ",811],"=",["T_WHITESPACE"," ",811],["T_VARIABLE","$this",811],["T_OBJECT_OPERATOR","->",811],["T_STRING","privExtractByRule",811],"(",["T_VARIABLE","$p_list",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$v_path",811],",",["T_WHITESPACE"," ",811],["T_VARIABLE","$v_remove_path",811],",",["T_WHITESPACE","\n\t                                     ",811],["T_VARIABLE","$v_remove_all_path",812],",",["T_WHITESPACE"," ",812],["T_VARIABLE","$v_options",812],")",";",["T_WHITESPACE","\n    ",812],["T_IF","if",813],["T_WHITESPACE"," ",813],"(",["T_VARIABLE","$v_result",813],["T_WHITESPACE"," ",813],"<",["T_WHITESPACE"," ",813],["T_LNUMBER","1",813],")",["T_WHITESPACE"," ",813],"{",["T_WHITESPACE","\n      ",813],["T_UNSET","unset",814],"(",["T_VARIABLE","$p_list",814],")",";",["T_WHITESPACE","\n      ",814],["T_RETURN","return",815],"(",["T_LNUMBER","0",815],")",";",["T_WHITESPACE","\n    ",815],"}",["T_WHITESPACE","\n\n    ",816],["T_COMMENT","\/\/ ----- Return\n",818],["T_WHITESPACE","    ",819],["T_RETURN","return",819],["T_WHITESPACE"," ",819],["T_VARIABLE","$p_list",819],";",["T_WHITESPACE","\n  ",819],"}",["T_WHITESPACE","\n  ",820],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",821],["T_WHITESPACE","\n\n  ",822],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",824],["T_WHITESPACE","  ",825],["T_COMMENT","\/\/ Function :\n",825],["T_WHITESPACE","  ",826],["T_COMMENT","\/\/   extractByIndex($p_index, $p_path=\".\/\", $p_remove_path=\"\")\n",826],["T_WHITESPACE","  ",827],["T_COMMENT","\/\/   extractByIndex($p_index, [$p_option, $p_option_value, ...])\n",827],["T_WHITESPACE","  ",828],["T_COMMENT","\/\/ Description :\n",828],["T_WHITESPACE","  ",829],["T_COMMENT","\/\/   This method supports two synopsis. The first one is historical.\n",829],["T_WHITESPACE","  ",830],["T_COMMENT","\/\/   This method is doing a partial extract of the archive.\n",830],["T_WHITESPACE","  ",831],["T_COMMENT","\/\/   The extracted files or folders are identified by their index in the\n",831],["T_WHITESPACE","  ",832],["T_COMMENT","\/\/   archive (from 0 to n).\n",832],["T_WHITESPACE","  ",833],["T_COMMENT","\/\/   Note that if the index identify a folder, only the folder entry is\n",833],["T_WHITESPACE","  ",834],["T_COMMENT","\/\/   extracted, not all the files included in the archive.\n",834],["T_WHITESPACE","  ",835],["T_COMMENT","\/\/ Parameters :\n",835],["T_WHITESPACE","  ",836],["T_COMMENT","\/\/   $p_index : A single index (integer) or a string of indexes of files to\n",836],["T_WHITESPACE","  ",837],["T_COMMENT","\/\/              extract. The form of the string is \"0,4-6,8-12\" with only numbers\n",837],["T_WHITESPACE","  ",838],["T_COMMENT","\/\/              and '-' for range or ',' to separate ranges. No spaces or ';'\n",838],["T_WHITESPACE","  ",839],["T_COMMENT","\/\/              are allowed.\n",839],["T_WHITESPACE","  ",840],["T_COMMENT","\/\/   $p_path : Path where the files and directories are to be extracted\n",840],["T_WHITESPACE","  ",841],["T_COMMENT","\/\/   $p_remove_path : First part ('root' part) of the memorized path\n",841],["T_WHITESPACE","  ",842],["T_COMMENT","\/\/                    (if any similar) to remove while extracting.\n",842],["T_WHITESPACE","  ",843],["T_COMMENT","\/\/ Options :\n",843],["T_WHITESPACE","  ",844],["T_COMMENT","\/\/   PCLZIP_OPT_PATH :\n",844],["T_WHITESPACE","  ",845],["T_COMMENT","\/\/   PCLZIP_OPT_ADD_PATH :\n",845],["T_WHITESPACE","  ",846],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_PATH :\n",846],["T_WHITESPACE","  ",847],["T_COMMENT","\/\/   PCLZIP_OPT_REMOVE_ALL_PATH :\n",847],["T_WHITESPACE","  ",848],["T_COMMENT","\/\/   PCLZIP_OPT_EXTRACT_AS_STRING : The files are extracted as strings and\n",848],["T_WHITESPACE","  ",849],["T_COMMENT","\/\/     not as files.\n",849],["T_WHITESPACE","  ",850],["T_COMMENT","\/\/     The resulting content is in a new field 'content' in the file\n",850],["T_WHITESPACE","  ",851],["T_COMMENT","\/\/     structure.\n",851],["T_WHITESPACE","  ",852],["T_COMMENT","\/\/     This option must be used alone (any other options are ignored).\n",852],["T_WHITESPACE","  ",853],["T_COMMENT","\/\/   PCLZIP_CB_PRE_EXTRACT :\n",853],["T_WHITESPACE","  ",854],["T_COMMENT","\/\/   PCLZIP_CB_POST_EXTRACT :\n",854],["T_WHITESPACE","  ",855],["T_COMMENT","\/\/ Return Values :\n",855],["T_WHITESPACE","  ",856],["T_COMMENT","\/\/   0 on failure,\n",856],["T_WHITESPACE","  ",857],["T_COMMENT","\/\/   The list of the extracted files, with a status of the action.\n",857],["T_WHITESPACE","  ",858],["T_COMMENT","\/\/   (see PclZip::listContent() for list entry format)\n",858],["T_WHITESPACE","  ",859],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",859],["T_WHITESPACE","  ",860],["T_COMMENT","\/\/function extractByIndex($p_index, options...)\n",860],["T_WHITESPACE","  ",861],["T_FUNCTION","function",861],["T_WHITESPACE"," ",861],["T_STRING","extractByIndex",861],"(",["T_VARIABLE","$p_index",861],")",["T_WHITESPACE","\n  ",861],"{",["T_WHITESPACE","\n    ",862],["T_VARIABLE","$v_result",863],"=",["T_LNUMBER","1",863],";",["T_WHITESPACE","\n\n    ",863],["T_COMMENT","\/\/ ----- Reset the error handler\n",865],["T_WHITESPACE","    ",866],["T_VARIABLE","$this",866],["T_OBJECT_OPERATOR","->",866],["T_STRING","privErrorReset",866],"(",")",";",["T_WHITESPACE","\n\n    ",866],["T_COMMENT","\/\/ ----- Check archive\n",868],["T_WHITESPACE","    ",869],["T_IF","if",869],["T_WHITESPACE"," ",869],"(","!",["T_VARIABLE","$this",869],["T_OBJECT_OPERATOR","->",869],["T_STRING","privCheckFormat",869],"(",")",")",["T_WHITESPACE"," ",869],"{",["T_WHITESPACE","\n      ",869],["T_RETURN","return",870],"(",["T_LNUMBER","0",870],")",";",["T_WHITESPACE","\n    ",870],"}",["T_WHITESPACE","\n\n    ",871],["T_COMMENT","\/\/ ----- Set default values\n",873],["T_WHITESPACE","    ",874],["T_VARIABLE","$v_options",874],["T_WHITESPACE"," ",874],"=",["T_WHITESPACE"," ",874],["T_ARRAY","array",874],"(",")",";",["T_WHITESPACE","\n",874],["T_COMMENT","\/\/    $v_path = \".\/\";\n",875],["T_WHITESPACE","    ",876],["T_VARIABLE","$v_path",876],["T_WHITESPACE"," ",876],"=",["T_WHITESPACE"," ",876],["T_CONSTANT_ENCAPSED_STRING","''",876],";",["T_WHITESPACE","\n    ",876],["T_VARIABLE","$v_remove_path",877],["T_WHITESPACE"," ",877],"=",["T_WHITESPACE"," ",877],["T_CONSTANT_ENCAPSED_STRING","\"\"",877],";",["T_WHITESPACE","\n    ",877],["T_VARIABLE","$v_remove_all_path",878],["T_WHITESPACE"," ",878],"=",["T_WHITESPACE"," ",878],["T_STRING","false",878],";",["T_WHITESPACE","\n\n    ",878],["T_COMMENT","\/\/ ----- Look for variable options arguments\n",880],["T_WHITESPACE","    ",881],["T_VARIABLE","$v_size",881],["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_STRING","func_num_args",881],"(",")",";",["T_WHITESPACE","\n\n    ",881],["T_COMMENT","\/\/ ----- Default values for option\n",883],["T_WHITESPACE","    ",884],["T_VARIABLE","$v_options",884],"[",["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",884],"]",["T_WHITESPACE"," ",884],"=",["T_WHITESPACE"," ",884],["T_STRING","FALSE",884],";",["T_WHITESPACE","\n\n    ",884],["T_COMMENT","\/\/ ----- Look for arguments\n",886],["T_WHITESPACE","    ",887],["T_IF","if",887],["T_WHITESPACE"," ",887],"(",["T_VARIABLE","$v_size",887],["T_WHITESPACE"," ",887],">",["T_WHITESPACE"," ",887],["T_LNUMBER","1",887],")",["T_WHITESPACE"," ",887],"{",["T_WHITESPACE","\n      ",887],["T_COMMENT","\/\/ ----- Get the arguments\n",888],["T_WHITESPACE","      ",889],["T_VARIABLE","$v_arg_list",889],["T_WHITESPACE"," ",889],"=",["T_WHITESPACE"," ",889],["T_STRING","func_get_args",889],"(",")",";",["T_WHITESPACE","\n\n      ",889],["T_COMMENT","\/\/ ----- Remove form the options list the first argument\n",891],["T_WHITESPACE","      ",892],["T_STRING","array_shift",892],"(",["T_VARIABLE","$v_arg_list",892],")",";",["T_WHITESPACE","\n      ",892],["T_VARIABLE","$v_size",893],["T_DEC","--",893],";",["T_WHITESPACE","\n\n      ",893],["T_COMMENT","\/\/ ----- Look for first arg\n",895],["T_WHITESPACE","      ",896],["T_IF","if",896],["T_WHITESPACE"," ",896],"(","(",["T_STRING","is_integer",896],"(",["T_VARIABLE","$v_arg_list",896],"[",["T_LNUMBER","0",896],"]",")",")",["T_WHITESPACE"," ",896],["T_BOOLEAN_AND","&&",896],["T_WHITESPACE"," ",896],"(",["T_VARIABLE","$v_arg_list",896],"[",["T_LNUMBER","0",896],"]",["T_WHITESPACE"," ",896],">",["T_WHITESPACE"," ",896],["T_LNUMBER","77000",896],")",")",["T_WHITESPACE"," ",896],"{",["T_WHITESPACE","\n\n        ",896],["T_COMMENT","\/\/ ----- Parse the options\n",898],["T_WHITESPACE","        ",899],["T_VARIABLE","$v_result",899],["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],["T_VARIABLE","$this",899],["T_OBJECT_OPERATOR","->",899],["T_STRING","privParseOptions",899],"(",["T_VARIABLE","$v_arg_list",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$v_size",899],",",["T_WHITESPACE"," ",899],["T_VARIABLE","$v_options",899],",",["T_WHITESPACE","\n                                            ",899],["T_ARRAY","array",900],["T_WHITESPACE"," ",900],"(",["T_STRING","PCLZIP_OPT_PATH",900],["T_WHITESPACE"," ",900],["T_DOUBLE_ARROW","=>",900],["T_WHITESPACE"," ",900],["T_CONSTANT_ENCAPSED_STRING","'optional'",900],",",["T_WHITESPACE","\n                                                   ",900],["T_STRING","PCLZIP_OPT_REMOVE_PATH",901],["T_WHITESPACE"," ",901],["T_DOUBLE_ARROW","=>",901],["T_WHITESPACE"," ",901],["T_CONSTANT_ENCAPSED_STRING","'optional'",901],",",["T_WHITESPACE","\n                                                   ",901],["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",902],["T_WHITESPACE"," ",902],["T_DOUBLE_ARROW","=>",902],["T_WHITESPACE"," ",902],["T_CONSTANT_ENCAPSED_STRING","'optional'",902],",",["T_WHITESPACE","\n                                                   ",902],["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",903],["T_WHITESPACE"," ",903],["T_DOUBLE_ARROW","=>",903],["T_WHITESPACE"," ",903],["T_CONSTANT_ENCAPSED_STRING","'optional'",903],",",["T_WHITESPACE","\n                                                   ",903],["T_STRING","PCLZIP_OPT_ADD_PATH",904],["T_WHITESPACE"," ",904],["T_DOUBLE_ARROW","=>",904],["T_WHITESPACE"," ",904],["T_CONSTANT_ENCAPSED_STRING","'optional'",904],",",["T_WHITESPACE","\n                                                   ",904],["T_STRING","PCLZIP_CB_PRE_EXTRACT",905],["T_WHITESPACE"," ",905],["T_DOUBLE_ARROW","=>",905],["T_WHITESPACE"," ",905],["T_CONSTANT_ENCAPSED_STRING","'optional'",905],",",["T_WHITESPACE","\n                                                   ",905],["T_STRING","PCLZIP_CB_POST_EXTRACT",906],["T_WHITESPACE"," ",906],["T_DOUBLE_ARROW","=>",906],["T_WHITESPACE"," ",906],["T_CONSTANT_ENCAPSED_STRING","'optional'",906],",",["T_WHITESPACE","\n                                                   ",906],["T_STRING","PCLZIP_OPT_SET_CHMOD",907],["T_WHITESPACE"," ",907],["T_DOUBLE_ARROW","=>",907],["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'optional'",907],",",["T_WHITESPACE","\n                                                   ",907],["T_STRING","PCLZIP_OPT_REPLACE_NEWER",908],["T_WHITESPACE"," ",908],["T_DOUBLE_ARROW","=>",908],["T_WHITESPACE"," ",908],["T_CONSTANT_ENCAPSED_STRING","'optional'",908],["T_WHITESPACE","\n                                                   ",908],",",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",909],["T_WHITESPACE"," ",909],["T_DOUBLE_ARROW","=>",909],["T_WHITESPACE"," ",909],["T_CONSTANT_ENCAPSED_STRING","'optional'",909],["T_WHITESPACE","\n                                                   ",909],",",["T_STRING","PCLZIP_OPT_EXTRACT_DIR_RESTRICTION",910],["T_WHITESPACE"," ",910],["T_DOUBLE_ARROW","=>",910],["T_WHITESPACE"," ",910],["T_CONSTANT_ENCAPSED_STRING","'optional'",910],",",["T_WHITESPACE","\n                                                   ",910],["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",911],["T_WHITESPACE"," ",911],["T_DOUBLE_ARROW","=>",911],["T_WHITESPACE"," ",911],["T_CONSTANT_ENCAPSED_STRING","'optional'",911],",",["T_WHITESPACE","\n                                                   ",911],["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",912],["T_WHITESPACE"," ",912],["T_DOUBLE_ARROW","=>",912],["T_WHITESPACE"," ",912],["T_CONSTANT_ENCAPSED_STRING","'optional'",912],",",["T_WHITESPACE","\n                                                   ",912],["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",913],["T_WHITESPACE"," ",913],["T_DOUBLE_ARROW","=>",913],["T_WHITESPACE"," ",913],["T_CONSTANT_ENCAPSED_STRING","'optional'",913],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t\t\t\t   ",913],")",")",";",["T_WHITESPACE","\n        ",914],["T_IF","if",915],["T_WHITESPACE"," ",915],"(",["T_VARIABLE","$v_result",915],["T_WHITESPACE"," ",915],["T_IS_NOT_EQUAL","!=",915],["T_WHITESPACE"," ",915],["T_LNUMBER","1",915],")",["T_WHITESPACE"," ",915],"{",["T_WHITESPACE","\n          ",915],["T_RETURN","return",916],["T_WHITESPACE"," ",916],["T_LNUMBER","0",916],";",["T_WHITESPACE","\n        ",916],"}",["T_WHITESPACE","\n\n        ",917],["T_COMMENT","\/\/ ----- Set the arguments\n",919],["T_WHITESPACE","        ",920],["T_IF","if",920],["T_WHITESPACE"," ",920],"(",["T_ISSET","isset",920],"(",["T_VARIABLE","$v_options",920],"[",["T_STRING","PCLZIP_OPT_PATH",920],"]",")",")",["T_WHITESPACE"," ",920],"{",["T_WHITESPACE","\n          ",920],["T_VARIABLE","$v_path",921],["T_WHITESPACE"," ",921],"=",["T_WHITESPACE"," ",921],["T_VARIABLE","$v_options",921],"[",["T_STRING","PCLZIP_OPT_PATH",921],"]",";",["T_WHITESPACE","\n        ",921],"}",["T_WHITESPACE","\n        ",922],["T_IF","if",923],["T_WHITESPACE"," ",923],"(",["T_ISSET","isset",923],"(",["T_VARIABLE","$v_options",923],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",923],"]",")",")",["T_WHITESPACE"," ",923],"{",["T_WHITESPACE","\n          ",923],["T_VARIABLE","$v_remove_path",924],["T_WHITESPACE"," ",924],"=",["T_WHITESPACE"," ",924],["T_VARIABLE","$v_options",924],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",924],"]",";",["T_WHITESPACE","\n        ",924],"}",["T_WHITESPACE","\n        ",925],["T_IF","if",926],["T_WHITESPACE"," ",926],"(",["T_ISSET","isset",926],"(",["T_VARIABLE","$v_options",926],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",926],"]",")",")",["T_WHITESPACE"," ",926],"{",["T_WHITESPACE","\n          ",926],["T_VARIABLE","$v_remove_all_path",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE"," ",927],["T_VARIABLE","$v_options",927],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",927],"]",";",["T_WHITESPACE","\n        ",927],"}",["T_WHITESPACE","\n        ",928],["T_IF","if",929],["T_WHITESPACE"," ",929],"(",["T_ISSET","isset",929],"(",["T_VARIABLE","$v_options",929],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",929],"]",")",")",["T_WHITESPACE"," ",929],"{",["T_WHITESPACE","\n          ",929],["T_COMMENT","\/\/ ----- Check for '\/' in last path char\n",930],["T_WHITESPACE","          ",931],["T_IF","if",931],["T_WHITESPACE"," ",931],"(","(",["T_STRING","strlen",931],"(",["T_VARIABLE","$v_path",931],")",["T_WHITESPACE"," ",931],">",["T_WHITESPACE"," ",931],["T_LNUMBER","0",931],")",["T_WHITESPACE"," ",931],["T_BOOLEAN_AND","&&",931],["T_WHITESPACE"," ",931],"(",["T_STRING","substr",931],"(",["T_VARIABLE","$v_path",931],",",["T_WHITESPACE"," ",931],"-",["T_LNUMBER","1",931],")",["T_WHITESPACE"," ",931],["T_IS_NOT_EQUAL","!=",931],["T_WHITESPACE"," ",931],["T_CONSTANT_ENCAPSED_STRING","'\/'",931],")",")",["T_WHITESPACE"," ",931],"{",["T_WHITESPACE","\n            ",931],["T_VARIABLE","$v_path",932],["T_WHITESPACE"," ",932],["T_CONCAT_EQUAL",".=",932],["T_WHITESPACE"," ",932],["T_CONSTANT_ENCAPSED_STRING","'\/'",932],";",["T_WHITESPACE","\n          ",932],"}",["T_WHITESPACE","\n          ",933],["T_VARIABLE","$v_path",934],["T_WHITESPACE"," ",934],["T_CONCAT_EQUAL",".=",934],["T_WHITESPACE"," ",934],["T_VARIABLE","$v_options",934],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",934],"]",";",["T_WHITESPACE","\n        ",934],"}",["T_WHITESPACE","\n        ",935],["T_IF","if",936],["T_WHITESPACE"," ",936],"(","!",["T_ISSET","isset",936],"(",["T_VARIABLE","$v_options",936],"[",["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",936],"]",")",")",["T_WHITESPACE"," ",936],"{",["T_WHITESPACE","\n          ",936],["T_VARIABLE","$v_options",937],"[",["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",937],"]",["T_WHITESPACE"," ",937],"=",["T_WHITESPACE"," ",937],["T_STRING","FALSE",937],";",["T_WHITESPACE","\n        ",937],"}",["T_WHITESPACE","\n        ",938],["T_ELSE","else",939],["T_WHITESPACE"," ",939],"{",["T_WHITESPACE","\n        ",939],"}",["T_WHITESPACE","\n      ",940],"}",["T_WHITESPACE","\n\n      ",941],["T_COMMENT","\/\/ ----- Look for 2 args\n",943],["T_WHITESPACE","      ",944],["T_COMMENT","\/\/ Here we need to support the first historic synopsis of the\n",944],["T_WHITESPACE","      ",945],["T_COMMENT","\/\/ method.\n",945],["T_WHITESPACE","      ",946],["T_ELSE","else",946],["T_WHITESPACE"," ",946],"{",["T_WHITESPACE","\n\n        ",946],["T_COMMENT","\/\/ ----- Get the first argument\n",948],["T_WHITESPACE","        ",949],["T_VARIABLE","$v_path",949],["T_WHITESPACE"," ",949],"=",["T_WHITESPACE"," ",949],["T_VARIABLE","$v_arg_list",949],"[",["T_LNUMBER","0",949],"]",";",["T_WHITESPACE","\n\n        ",949],["T_COMMENT","\/\/ ----- Look for the optional second argument\n",951],["T_WHITESPACE","        ",952],["T_IF","if",952],["T_WHITESPACE"," ",952],"(",["T_VARIABLE","$v_size",952],["T_WHITESPACE"," ",952],["T_IS_EQUAL","==",952],["T_WHITESPACE"," ",952],["T_LNUMBER","2",952],")",["T_WHITESPACE"," ",952],"{",["T_WHITESPACE","\n          ",952],["T_VARIABLE","$v_remove_path",953],["T_WHITESPACE"," ",953],"=",["T_WHITESPACE"," ",953],["T_VARIABLE","$v_arg_list",953],"[",["T_LNUMBER","1",953],"]",";",["T_WHITESPACE","\n        ",953],"}",["T_WHITESPACE","\n        ",954],["T_ELSE","else",955],["T_WHITESPACE"," ",955],["T_IF","if",955],["T_WHITESPACE"," ",955],"(",["T_VARIABLE","$v_size",955],["T_WHITESPACE"," ",955],">",["T_WHITESPACE"," ",955],["T_LNUMBER","2",955],")",["T_WHITESPACE"," ",955],"{",["T_WHITESPACE","\n          ",955],["T_COMMENT","\/\/ ----- Error log\n",956],["T_WHITESPACE","          ",957],["T_STRING","PclZip",957],["T_DOUBLE_COLON","::",957],["T_STRING","privErrorLog",957],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",957],",",["T_WHITESPACE"," ",957],["T_CONSTANT_ENCAPSED_STRING","\"Invalid number \/ type of arguments\"",957],")",";",["T_WHITESPACE","\n\n          ",957],["T_COMMENT","\/\/ ----- Return\n",959],["T_WHITESPACE","          ",960],["T_RETURN","return",960],["T_WHITESPACE"," ",960],["T_LNUMBER","0",960],";",["T_WHITESPACE","\n        ",960],"}",["T_WHITESPACE","\n      ",961],"}",["T_WHITESPACE","\n    ",962],"}",["T_WHITESPACE","\n\n    ",963],["T_COMMENT","\/\/ ----- Trace\n",965],["T_WHITESPACE","\n    ",966],["T_COMMENT","\/\/ ----- Trick\n",967],["T_WHITESPACE","    ",968],["T_COMMENT","\/\/ Here I want to reuse extractByRule(), so I need to parse the $p_index\n",968],["T_WHITESPACE","    ",969],["T_COMMENT","\/\/ with privParseOptions()\n",969],["T_WHITESPACE","    ",970],["T_VARIABLE","$v_arg_trick",970],["T_WHITESPACE"," ",970],"=",["T_WHITESPACE"," ",970],["T_ARRAY","array",970],["T_WHITESPACE"," ",970],"(",["T_STRING","PCLZIP_OPT_BY_INDEX",970],",",["T_WHITESPACE"," ",970],["T_VARIABLE","$p_index",970],")",";",["T_WHITESPACE","\n    ",970],["T_VARIABLE","$v_options_trick",971],["T_WHITESPACE"," ",971],"=",["T_WHITESPACE"," ",971],["T_ARRAY","array",971],"(",")",";",["T_WHITESPACE","\n    ",971],["T_VARIABLE","$v_result",972],["T_WHITESPACE"," ",972],"=",["T_WHITESPACE"," ",972],["T_VARIABLE","$this",972],["T_OBJECT_OPERATOR","->",972],["T_STRING","privParseOptions",972],"(",["T_VARIABLE","$v_arg_trick",972],",",["T_WHITESPACE"," ",972],["T_STRING","sizeof",972],"(",["T_VARIABLE","$v_arg_trick",972],")",",",["T_WHITESPACE"," ",972],["T_VARIABLE","$v_options_trick",972],",",["T_WHITESPACE","\n                                        ",972],["T_ARRAY","array",973],["T_WHITESPACE"," ",973],"(",["T_STRING","PCLZIP_OPT_BY_INDEX",973],["T_WHITESPACE"," ",973],["T_DOUBLE_ARROW","=>",973],["T_WHITESPACE"," ",973],["T_CONSTANT_ENCAPSED_STRING","'optional'",973],["T_WHITESPACE"," ",973],")",")",";",["T_WHITESPACE","\n    ",973],["T_IF","if",974],["T_WHITESPACE"," ",974],"(",["T_VARIABLE","$v_result",974],["T_WHITESPACE"," ",974],["T_IS_NOT_EQUAL","!=",974],["T_WHITESPACE"," ",974],["T_LNUMBER","1",974],")",["T_WHITESPACE"," ",974],"{",["T_WHITESPACE","\n        ",974],["T_RETURN","return",975],["T_WHITESPACE"," ",975],["T_LNUMBER","0",975],";",["T_WHITESPACE","\n    ",975],"}",["T_WHITESPACE","\n    ",976],["T_VARIABLE","$v_options",977],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",977],"]",["T_WHITESPACE"," ",977],"=",["T_WHITESPACE"," ",977],["T_VARIABLE","$v_options_trick",977],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",977],"]",";",["T_WHITESPACE","\n\n    ",977],["T_COMMENT","\/\/ ----- Look for default option values\n",979],["T_WHITESPACE","    ",980],["T_VARIABLE","$this",980],["T_OBJECT_OPERATOR","->",980],["T_STRING","privOptionDefaultThreshold",980],"(",["T_VARIABLE","$v_options",980],")",";",["T_WHITESPACE","\n\n    ",980],["T_COMMENT","\/\/ ----- Call the extracting fct\n",982],["T_WHITESPACE","    ",983],["T_IF","if",983],["T_WHITESPACE"," ",983],"(","(",["T_VARIABLE","$v_result",983],["T_WHITESPACE"," ",983],"=",["T_WHITESPACE"," ",983],["T_VARIABLE","$this",983],["T_OBJECT_OPERATOR","->",983],["T_STRING","privExtractByRule",983],"(",["T_VARIABLE","$p_list",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$v_path",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$v_remove_path",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$v_remove_all_path",983],",",["T_WHITESPACE"," ",983],["T_VARIABLE","$v_options",983],")",")",["T_WHITESPACE"," ",983],"<",["T_WHITESPACE"," ",983],["T_LNUMBER","1",983],")",["T_WHITESPACE"," ",983],"{",["T_WHITESPACE","\n        ",983],["T_RETURN","return",984],"(",["T_LNUMBER","0",984],")",";",["T_WHITESPACE","\n    ",984],"}",["T_WHITESPACE","\n\n    ",985],["T_COMMENT","\/\/ ----- Return\n",987],["T_WHITESPACE","    ",988],["T_RETURN","return",988],["T_WHITESPACE"," ",988],["T_VARIABLE","$p_list",988],";",["T_WHITESPACE","\n  ",988],"}",["T_WHITESPACE","\n  ",989],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",990],["T_WHITESPACE","\n  ",991],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",992],["T_WHITESPACE","  ",993],["T_COMMENT","\/\/ Function :\n",993],["T_WHITESPACE","  ",994],["T_COMMENT","\/\/   delete([$p_option, $p_option_value, ...])\n",994],["T_WHITESPACE","  ",995],["T_COMMENT","\/\/ Description :\n",995],["T_WHITESPACE","  ",996],["T_COMMENT","\/\/   This method removes files from the archive.\n",996],["T_WHITESPACE","  ",997],["T_COMMENT","\/\/   If no parameters are given, then all the archive is emptied.\n",997],["T_WHITESPACE","  ",998],["T_COMMENT","\/\/ Parameters :\n",998],["T_WHITESPACE","  ",999],["T_COMMENT","\/\/   None or optional arguments.\n",999],["T_WHITESPACE","  ",1000],["T_COMMENT","\/\/ Options :\n",1000],["T_WHITESPACE","  ",1001],["T_COMMENT","\/\/   PCLZIP_OPT_BY_INDEX :\n",1001],["T_WHITESPACE","  ",1002],["T_COMMENT","\/\/   PCLZIP_OPT_BY_NAME :\n",1002],["T_WHITESPACE","  ",1003],["T_COMMENT","\/\/   PCLZIP_OPT_BY_EREG :\n",1003],["T_WHITESPACE","  ",1004],["T_COMMENT","\/\/   PCLZIP_OPT_BY_PREG :\n",1004],["T_WHITESPACE","  ",1005],["T_COMMENT","\/\/ Return Values :\n",1005],["T_WHITESPACE","  ",1006],["T_COMMENT","\/\/   0 on failure,\n",1006],["T_WHITESPACE","  ",1007],["T_COMMENT","\/\/   The list of the files which are still present in the archive.\n",1007],["T_WHITESPACE","  ",1008],["T_COMMENT","\/\/   (see PclZip::listContent() for list entry format)\n",1008],["T_WHITESPACE","  ",1009],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1009],["T_WHITESPACE","  ",1010],["T_FUNCTION","function",1010],["T_WHITESPACE"," ",1010],["T_STRING","delete",1010],"(",")",["T_WHITESPACE","\n  ",1010],"{",["T_WHITESPACE","\n    ",1011],["T_VARIABLE","$v_result",1012],"=",["T_LNUMBER","1",1012],";",["T_WHITESPACE","\n\n    ",1012],["T_COMMENT","\/\/ ----- Reset the error handler\n",1014],["T_WHITESPACE","    ",1015],["T_VARIABLE","$this",1015],["T_OBJECT_OPERATOR","->",1015],["T_STRING","privErrorReset",1015],"(",")",";",["T_WHITESPACE","\n\n    ",1015],["T_COMMENT","\/\/ ----- Check archive\n",1017],["T_WHITESPACE","    ",1018],["T_IF","if",1018],["T_WHITESPACE"," ",1018],"(","!",["T_VARIABLE","$this",1018],["T_OBJECT_OPERATOR","->",1018],["T_STRING","privCheckFormat",1018],"(",")",")",["T_WHITESPACE"," ",1018],"{",["T_WHITESPACE","\n      ",1018],["T_RETURN","return",1019],"(",["T_LNUMBER","0",1019],")",";",["T_WHITESPACE","\n    ",1019],"}",["T_WHITESPACE","\n\n    ",1020],["T_COMMENT","\/\/ ----- Set default values\n",1022],["T_WHITESPACE","    ",1023],["T_VARIABLE","$v_options",1023],["T_WHITESPACE"," ",1023],"=",["T_WHITESPACE"," ",1023],["T_ARRAY","array",1023],"(",")",";",["T_WHITESPACE","\n\n    ",1023],["T_COMMENT","\/\/ ----- Look for variable options arguments\n",1025],["T_WHITESPACE","    ",1026],["T_VARIABLE","$v_size",1026],["T_WHITESPACE"," ",1026],"=",["T_WHITESPACE"," ",1026],["T_STRING","func_num_args",1026],"(",")",";",["T_WHITESPACE","\n\n    ",1026],["T_COMMENT","\/\/ ----- Look for arguments\n",1028],["T_WHITESPACE","    ",1029],["T_IF","if",1029],["T_WHITESPACE"," ",1029],"(",["T_VARIABLE","$v_size",1029],["T_WHITESPACE"," ",1029],">",["T_WHITESPACE"," ",1029],["T_LNUMBER","0",1029],")",["T_WHITESPACE"," ",1029],"{",["T_WHITESPACE","\n      ",1029],["T_COMMENT","\/\/ ----- Get the arguments\n",1030],["T_WHITESPACE","      ",1031],["T_VARIABLE","$v_arg_list",1031],["T_WHITESPACE"," ",1031],"=",["T_WHITESPACE"," ",1031],["T_STRING","func_get_args",1031],"(",")",";",["T_WHITESPACE","\n\n      ",1031],["T_COMMENT","\/\/ ----- Parse the options\n",1033],["T_WHITESPACE","      ",1034],["T_VARIABLE","$v_result",1034],["T_WHITESPACE"," ",1034],"=",["T_WHITESPACE"," ",1034],["T_VARIABLE","$this",1034],["T_OBJECT_OPERATOR","->",1034],["T_STRING","privParseOptions",1034],"(",["T_VARIABLE","$v_arg_list",1034],",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$v_size",1034],",",["T_WHITESPACE"," ",1034],["T_VARIABLE","$v_options",1034],",",["T_WHITESPACE","\n                                        ",1034],["T_ARRAY","array",1035],["T_WHITESPACE"," ",1035],"(",["T_STRING","PCLZIP_OPT_BY_NAME",1035],["T_WHITESPACE"," ",1035],["T_DOUBLE_ARROW","=>",1035],["T_WHITESPACE"," ",1035],["T_CONSTANT_ENCAPSED_STRING","'optional'",1035],",",["T_WHITESPACE","\n                                               ",1035],["T_STRING","PCLZIP_OPT_BY_EREG",1036],["T_WHITESPACE"," ",1036],["T_DOUBLE_ARROW","=>",1036],["T_WHITESPACE"," ",1036],["T_CONSTANT_ENCAPSED_STRING","'optional'",1036],",",["T_WHITESPACE","\n                                               ",1036],["T_STRING","PCLZIP_OPT_BY_PREG",1037],["T_WHITESPACE"," ",1037],["T_DOUBLE_ARROW","=>",1037],["T_WHITESPACE"," ",1037],["T_CONSTANT_ENCAPSED_STRING","'optional'",1037],",",["T_WHITESPACE","\n                                               ",1037],["T_STRING","PCLZIP_OPT_BY_INDEX",1038],["T_WHITESPACE"," ",1038],["T_DOUBLE_ARROW","=>",1038],["T_WHITESPACE"," ",1038],["T_CONSTANT_ENCAPSED_STRING","'optional'",1038],["T_WHITESPACE"," ",1038],")",")",";",["T_WHITESPACE","\n      ",1038],["T_IF","if",1039],["T_WHITESPACE"," ",1039],"(",["T_VARIABLE","$v_result",1039],["T_WHITESPACE"," ",1039],["T_IS_NOT_EQUAL","!=",1039],["T_WHITESPACE"," ",1039],["T_LNUMBER","1",1039],")",["T_WHITESPACE"," ",1039],"{",["T_WHITESPACE","\n          ",1039],["T_RETURN","return",1040],["T_WHITESPACE"," ",1040],["T_LNUMBER","0",1040],";",["T_WHITESPACE","\n      ",1040],"}",["T_WHITESPACE","\n    ",1041],"}",["T_WHITESPACE","\n\n    ",1042],["T_COMMENT","\/\/ ----- Magic quotes trick\n",1044],["T_WHITESPACE","    ",1045],["T_VARIABLE","$this",1045],["T_OBJECT_OPERATOR","->",1045],["T_STRING","privDisableMagicQuotes",1045],"(",")",";",["T_WHITESPACE","\n\n    ",1045],["T_COMMENT","\/\/ ----- Call the delete fct\n",1047],["T_WHITESPACE","    ",1048],["T_VARIABLE","$v_list",1048],["T_WHITESPACE"," ",1048],"=",["T_WHITESPACE"," ",1048],["T_ARRAY","array",1048],"(",")",";",["T_WHITESPACE","\n    ",1048],["T_IF","if",1049],["T_WHITESPACE"," ",1049],"(","(",["T_VARIABLE","$v_result",1049],["T_WHITESPACE"," ",1049],"=",["T_WHITESPACE"," ",1049],["T_VARIABLE","$this",1049],["T_OBJECT_OPERATOR","->",1049],["T_STRING","privDeleteByRule",1049],"(",["T_VARIABLE","$v_list",1049],",",["T_WHITESPACE"," ",1049],["T_VARIABLE","$v_options",1049],")",")",["T_WHITESPACE"," ",1049],["T_IS_NOT_EQUAL","!=",1049],["T_WHITESPACE"," ",1049],["T_LNUMBER","1",1049],")",["T_WHITESPACE"," ",1049],"{",["T_WHITESPACE","\n      ",1049],["T_VARIABLE","$this",1050],["T_OBJECT_OPERATOR","->",1050],["T_STRING","privSwapBackMagicQuotes",1050],"(",")",";",["T_WHITESPACE","\n      ",1050],["T_UNSET","unset",1051],"(",["T_VARIABLE","$v_list",1051],")",";",["T_WHITESPACE","\n      ",1051],["T_RETURN","return",1052],"(",["T_LNUMBER","0",1052],")",";",["T_WHITESPACE","\n    ",1052],"}",["T_WHITESPACE","\n\n    ",1053],["T_COMMENT","\/\/ ----- Magic quotes trick\n",1055],["T_WHITESPACE","    ",1056],["T_VARIABLE","$this",1056],["T_OBJECT_OPERATOR","->",1056],["T_STRING","privSwapBackMagicQuotes",1056],"(",")",";",["T_WHITESPACE","\n\n    ",1056],["T_COMMENT","\/\/ ----- Return\n",1058],["T_WHITESPACE","    ",1059],["T_RETURN","return",1059],["T_WHITESPACE"," ",1059],["T_VARIABLE","$v_list",1059],";",["T_WHITESPACE","\n  ",1059],"}",["T_WHITESPACE","\n  ",1060],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1061],["T_WHITESPACE","\n  ",1062],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1063],["T_WHITESPACE","  ",1064],["T_COMMENT","\/\/ Function : deleteByIndex()\n",1064],["T_WHITESPACE","  ",1065],["T_COMMENT","\/\/ Description :\n",1065],["T_WHITESPACE","  ",1066],["T_COMMENT","\/\/   ***** Deprecated *****\n",1066],["T_WHITESPACE","  ",1067],["T_COMMENT","\/\/   delete(PCLZIP_OPT_BY_INDEX, $p_index) should be prefered.\n",1067],["T_WHITESPACE","  ",1068],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1068],["T_WHITESPACE","  ",1069],["T_FUNCTION","function",1069],["T_WHITESPACE"," ",1069],["T_STRING","deleteByIndex",1069],"(",["T_VARIABLE","$p_index",1069],")",["T_WHITESPACE","\n  ",1069],"{",["T_WHITESPACE","\n\n    ",1070],["T_VARIABLE","$p_list",1072],["T_WHITESPACE"," ",1072],"=",["T_WHITESPACE"," ",1072],["T_VARIABLE","$this",1072],["T_OBJECT_OPERATOR","->",1072],["T_STRING","delete",1072],"(",["T_STRING","PCLZIP_OPT_BY_INDEX",1072],",",["T_WHITESPACE"," ",1072],["T_VARIABLE","$p_index",1072],")",";",["T_WHITESPACE","\n\n    ",1072],["T_COMMENT","\/\/ ----- Return\n",1074],["T_WHITESPACE","    ",1075],["T_RETURN","return",1075],["T_WHITESPACE"," ",1075],["T_VARIABLE","$p_list",1075],";",["T_WHITESPACE","\n  ",1075],"}",["T_WHITESPACE","\n  ",1076],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1077],["T_WHITESPACE","\n  ",1078],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1079],["T_WHITESPACE","  ",1080],["T_COMMENT","\/\/ Function : properties()\n",1080],["T_WHITESPACE","  ",1081],["T_COMMENT","\/\/ Description :\n",1081],["T_WHITESPACE","  ",1082],["T_COMMENT","\/\/   This method gives the properties of the archive.\n",1082],["T_WHITESPACE","  ",1083],["T_COMMENT","\/\/   The properties are :\n",1083],["T_WHITESPACE","  ",1084],["T_COMMENT","\/\/     nb : Number of files in the archive\n",1084],["T_WHITESPACE","  ",1085],["T_COMMENT","\/\/     comment : Comment associated with the archive file\n",1085],["T_WHITESPACE","  ",1086],["T_COMMENT","\/\/     status : not_exist, ok\n",1086],["T_WHITESPACE","  ",1087],["T_COMMENT","\/\/ Parameters :\n",1087],["T_WHITESPACE","  ",1088],["T_COMMENT","\/\/   None\n",1088],["T_WHITESPACE","  ",1089],["T_COMMENT","\/\/ Return Values :\n",1089],["T_WHITESPACE","  ",1090],["T_COMMENT","\/\/   0 on failure,\n",1090],["T_WHITESPACE","  ",1091],["T_COMMENT","\/\/   An array with the archive properties.\n",1091],["T_WHITESPACE","  ",1092],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1092],["T_WHITESPACE","  ",1093],["T_FUNCTION","function",1093],["T_WHITESPACE"," ",1093],["T_STRING","properties",1093],"(",")",["T_WHITESPACE","\n  ",1093],"{",["T_WHITESPACE","\n\n    ",1094],["T_COMMENT","\/\/ ----- Reset the error handler\n",1096],["T_WHITESPACE","    ",1097],["T_VARIABLE","$this",1097],["T_OBJECT_OPERATOR","->",1097],["T_STRING","privErrorReset",1097],"(",")",";",["T_WHITESPACE","\n\n    ",1097],["T_COMMENT","\/\/ ----- Magic quotes trick\n",1099],["T_WHITESPACE","    ",1100],["T_VARIABLE","$this",1100],["T_OBJECT_OPERATOR","->",1100],["T_STRING","privDisableMagicQuotes",1100],"(",")",";",["T_WHITESPACE","\n\n    ",1100],["T_COMMENT","\/\/ ----- Check archive\n",1102],["T_WHITESPACE","    ",1103],["T_IF","if",1103],["T_WHITESPACE"," ",1103],"(","!",["T_VARIABLE","$this",1103],["T_OBJECT_OPERATOR","->",1103],["T_STRING","privCheckFormat",1103],"(",")",")",["T_WHITESPACE"," ",1103],"{",["T_WHITESPACE","\n      ",1103],["T_VARIABLE","$this",1104],["T_OBJECT_OPERATOR","->",1104],["T_STRING","privSwapBackMagicQuotes",1104],"(",")",";",["T_WHITESPACE","\n      ",1104],["T_RETURN","return",1105],"(",["T_LNUMBER","0",1105],")",";",["T_WHITESPACE","\n    ",1105],"}",["T_WHITESPACE","\n\n    ",1106],["T_COMMENT","\/\/ ----- Default properties\n",1108],["T_WHITESPACE","    ",1109],["T_VARIABLE","$v_prop",1109],["T_WHITESPACE"," ",1109],"=",["T_WHITESPACE"," ",1109],["T_ARRAY","array",1109],"(",")",";",["T_WHITESPACE","\n    ",1109],["T_VARIABLE","$v_prop",1110],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1110],"]",["T_WHITESPACE"," ",1110],"=",["T_WHITESPACE"," ",1110],["T_CONSTANT_ENCAPSED_STRING","''",1110],";",["T_WHITESPACE","\n    ",1110],["T_VARIABLE","$v_prop",1111],"[",["T_CONSTANT_ENCAPSED_STRING","'nb'",1111],"]",["T_WHITESPACE"," ",1111],"=",["T_WHITESPACE"," ",1111],["T_LNUMBER","0",1111],";",["T_WHITESPACE","\n    ",1111],["T_VARIABLE","$v_prop",1112],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1112],"]",["T_WHITESPACE"," ",1112],"=",["T_WHITESPACE"," ",1112],["T_CONSTANT_ENCAPSED_STRING","'not_exist'",1112],";",["T_WHITESPACE","\n\n    ",1112],["T_COMMENT","\/\/ ----- Look if file exists\n",1114],["T_WHITESPACE","    ",1115],["T_IF","if",1115],["T_WHITESPACE"," ",1115],"(","@",["T_STRING","is_file",1115],"(",["T_VARIABLE","$this",1115],["T_OBJECT_OPERATOR","->",1115],["T_STRING","zipname",1115],")",")",["T_WHITESPACE","\n    ",1115],"{",["T_WHITESPACE","\n      ",1116],["T_COMMENT","\/\/ ----- Open the zip file\n",1117],["T_WHITESPACE","      ",1118],["T_IF","if",1118],["T_WHITESPACE"," ",1118],"(","(",["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","zip_fd",1118],["T_WHITESPACE"," ",1118],"=",["T_WHITESPACE"," ",1118],"@",["T_STRING","fopen",1118],"(",["T_VARIABLE","$this",1118],["T_OBJECT_OPERATOR","->",1118],["T_STRING","zipname",1118],",",["T_WHITESPACE"," ",1118],["T_CONSTANT_ENCAPSED_STRING","'rb'",1118],")",")",["T_WHITESPACE"," ",1118],["T_IS_EQUAL","==",1118],["T_WHITESPACE"," ",1118],["T_LNUMBER","0",1118],")",["T_WHITESPACE","\n      ",1118],"{",["T_WHITESPACE","\n        ",1119],["T_VARIABLE","$this",1120],["T_OBJECT_OPERATOR","->",1120],["T_STRING","privSwapBackMagicQuotes",1120],"(",")",";",["T_WHITESPACE","\n\n        ",1120],["T_COMMENT","\/\/ ----- Error log\n",1122],["T_WHITESPACE","        ",1123],["T_STRING","PclZip",1123],["T_DOUBLE_COLON","::",1123],["T_STRING","privErrorLog",1123],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",1123],",",["T_WHITESPACE"," ",1123],["T_CONSTANT_ENCAPSED_STRING","'Unable to open archive \\''",1123],".",["T_VARIABLE","$this",1123],["T_OBJECT_OPERATOR","->",1123],["T_STRING","zipname",1123],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary read mode'",1123],")",";",["T_WHITESPACE","\n\n        ",1123],["T_COMMENT","\/\/ ----- Return\n",1125],["T_WHITESPACE","        ",1126],["T_RETURN","return",1126],["T_WHITESPACE"," ",1126],["T_LNUMBER","0",1126],";",["T_WHITESPACE","\n      ",1126],"}",["T_WHITESPACE","\n\n      ",1127],["T_COMMENT","\/\/ ----- Read the central directory informations\n",1129],["T_WHITESPACE","      ",1130],["T_VARIABLE","$v_central_dir",1130],["T_WHITESPACE"," ",1130],"=",["T_WHITESPACE"," ",1130],["T_ARRAY","array",1130],"(",")",";",["T_WHITESPACE","\n      ",1130],["T_IF","if",1131],["T_WHITESPACE"," ",1131],"(","(",["T_VARIABLE","$v_result",1131],["T_WHITESPACE"," ",1131],"=",["T_WHITESPACE"," ",1131],["T_VARIABLE","$this",1131],["T_OBJECT_OPERATOR","->",1131],["T_STRING","privReadEndCentralDir",1131],"(",["T_VARIABLE","$v_central_dir",1131],")",")",["T_WHITESPACE"," ",1131],["T_IS_NOT_EQUAL","!=",1131],["T_WHITESPACE"," ",1131],["T_LNUMBER","1",1131],")",["T_WHITESPACE","\n      ",1131],"{",["T_WHITESPACE","\n        ",1132],["T_VARIABLE","$this",1133],["T_OBJECT_OPERATOR","->",1133],["T_STRING","privSwapBackMagicQuotes",1133],"(",")",";",["T_WHITESPACE","\n        ",1133],["T_RETURN","return",1134],["T_WHITESPACE"," ",1134],["T_LNUMBER","0",1134],";",["T_WHITESPACE","\n      ",1134],"}",["T_WHITESPACE","\n\n      ",1135],["T_COMMENT","\/\/ ----- Close the zip file\n",1137],["T_WHITESPACE","      ",1138],["T_VARIABLE","$this",1138],["T_OBJECT_OPERATOR","->",1138],["T_STRING","privCloseFd",1138],"(",")",";",["T_WHITESPACE","\n\n      ",1138],["T_COMMENT","\/\/ ----- Set the user attributes\n",1140],["T_WHITESPACE","      ",1141],["T_VARIABLE","$v_prop",1141],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1141],"]",["T_WHITESPACE"," ",1141],"=",["T_WHITESPACE"," ",1141],["T_VARIABLE","$v_central_dir",1141],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1141],"]",";",["T_WHITESPACE","\n      ",1141],["T_VARIABLE","$v_prop",1142],"[",["T_CONSTANT_ENCAPSED_STRING","'nb'",1142],"]",["T_WHITESPACE"," ",1142],"=",["T_WHITESPACE"," ",1142],["T_VARIABLE","$v_central_dir",1142],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",1142],"]",";",["T_WHITESPACE","\n      ",1142],["T_VARIABLE","$v_prop",1143],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",1143],"]",["T_WHITESPACE"," ",1143],"=",["T_WHITESPACE"," ",1143],["T_CONSTANT_ENCAPSED_STRING","'ok'",1143],";",["T_WHITESPACE","\n    ",1143],"}",["T_WHITESPACE","\n\n    ",1144],["T_COMMENT","\/\/ ----- Magic quotes trick\n",1146],["T_WHITESPACE","    ",1147],["T_VARIABLE","$this",1147],["T_OBJECT_OPERATOR","->",1147],["T_STRING","privSwapBackMagicQuotes",1147],"(",")",";",["T_WHITESPACE","\n\n    ",1147],["T_COMMENT","\/\/ ----- Return\n",1149],["T_WHITESPACE","    ",1150],["T_RETURN","return",1150],["T_WHITESPACE"," ",1150],["T_VARIABLE","$v_prop",1150],";",["T_WHITESPACE","\n  ",1150],"}",["T_WHITESPACE","\n  ",1151],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1152],["T_WHITESPACE","\n  ",1153],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1154],["T_WHITESPACE","  ",1155],["T_COMMENT","\/\/ Function : duplicate()\n",1155],["T_WHITESPACE","  ",1156],["T_COMMENT","\/\/ Description :\n",1156],["T_WHITESPACE","  ",1157],["T_COMMENT","\/\/   This method creates an archive by copying the content of an other one. If\n",1157],["T_WHITESPACE","  ",1158],["T_COMMENT","\/\/   the archive already exist, it is replaced by the new one without any warning.\n",1158],["T_WHITESPACE","  ",1159],["T_COMMENT","\/\/ Parameters :\n",1159],["T_WHITESPACE","  ",1160],["T_COMMENT","\/\/   $p_archive : The filename of a valid archive, or\n",1160],["T_WHITESPACE","  ",1161],["T_COMMENT","\/\/                a valid PclZip object.\n",1161],["T_WHITESPACE","  ",1162],["T_COMMENT","\/\/ Return Values :\n",1162],["T_WHITESPACE","  ",1163],["T_COMMENT","\/\/   1 on success.\n",1163],["T_WHITESPACE","  ",1164],["T_COMMENT","\/\/   0 or a negative value on error (error code).\n",1164],["T_WHITESPACE","  ",1165],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1165],["T_WHITESPACE","  ",1166],["T_FUNCTION","function",1166],["T_WHITESPACE"," ",1166],["T_STRING","duplicate",1166],"(",["T_VARIABLE","$p_archive",1166],")",["T_WHITESPACE","\n  ",1166],"{",["T_WHITESPACE","\n    ",1167],["T_VARIABLE","$v_result",1168],["T_WHITESPACE"," ",1168],"=",["T_WHITESPACE"," ",1168],["T_LNUMBER","1",1168],";",["T_WHITESPACE","\n\n    ",1168],["T_COMMENT","\/\/ ----- Reset the error handler\n",1170],["T_WHITESPACE","    ",1171],["T_VARIABLE","$this",1171],["T_OBJECT_OPERATOR","->",1171],["T_STRING","privErrorReset",1171],"(",")",";",["T_WHITESPACE","\n\n    ",1171],["T_COMMENT","\/\/ ----- Look if the $p_archive is a PclZip object\n",1173],["T_WHITESPACE","    ",1174],["T_IF","if",1174],["T_WHITESPACE"," ",1174],"(","(",["T_STRING","is_object",1174],"(",["T_VARIABLE","$p_archive",1174],")",")",["T_WHITESPACE"," ",1174],["T_BOOLEAN_AND","&&",1174],["T_WHITESPACE"," ",1174],"(",["T_STRING","get_class",1174],"(",["T_VARIABLE","$p_archive",1174],")",["T_WHITESPACE"," ",1174],["T_IS_EQUAL","==",1174],["T_WHITESPACE"," ",1174],["T_CONSTANT_ENCAPSED_STRING","'pclzip'",1174],")",")",["T_WHITESPACE","\n    ",1174],"{",["T_WHITESPACE","\n\n      ",1175],["T_COMMENT","\/\/ ----- Duplicate the archive\n",1177],["T_WHITESPACE","      ",1178],["T_VARIABLE","$v_result",1178],["T_WHITESPACE"," ",1178],"=",["T_WHITESPACE"," ",1178],["T_VARIABLE","$this",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","privDuplicate",1178],"(",["T_VARIABLE","$p_archive",1178],["T_OBJECT_OPERATOR","->",1178],["T_STRING","zipname",1178],")",";",["T_WHITESPACE","\n    ",1178],"}",["T_WHITESPACE","\n\n    ",1179],["T_COMMENT","\/\/ ----- Look if the $p_archive is a string (so a filename)\n",1181],["T_WHITESPACE","    ",1182],["T_ELSE","else",1182],["T_WHITESPACE"," ",1182],["T_IF","if",1182],["T_WHITESPACE"," ",1182],"(",["T_STRING","is_string",1182],"(",["T_VARIABLE","$p_archive",1182],")",")",["T_WHITESPACE","\n    ",1182],"{",["T_WHITESPACE","\n\n      ",1183],["T_COMMENT","\/\/ ----- Check that $p_archive is a valid zip file\n",1185],["T_WHITESPACE","      ",1186],["T_COMMENT","\/\/ TBC : Should also check the archive format\n",1186],["T_WHITESPACE","      ",1187],["T_IF","if",1187],["T_WHITESPACE"," ",1187],"(","!",["T_STRING","is_file",1187],"(",["T_VARIABLE","$p_archive",1187],")",")",["T_WHITESPACE"," ",1187],"{",["T_WHITESPACE","\n        ",1187],["T_COMMENT","\/\/ ----- Error log\n",1188],["T_WHITESPACE","        ",1189],["T_STRING","PclZip",1189],["T_DOUBLE_COLON","::",1189],["T_STRING","privErrorLog",1189],"(",["T_STRING","PCLZIP_ERR_MISSING_FILE",1189],",",["T_WHITESPACE"," ",1189],["T_CONSTANT_ENCAPSED_STRING","\"No file with filename '\"",1189],".",["T_VARIABLE","$p_archive",1189],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1189],")",";",["T_WHITESPACE","\n        ",1189],["T_VARIABLE","$v_result",1190],["T_WHITESPACE"," ",1190],"=",["T_WHITESPACE"," ",1190],["T_STRING","PCLZIP_ERR_MISSING_FILE",1190],";",["T_WHITESPACE","\n      ",1190],"}",["T_WHITESPACE","\n      ",1191],["T_ELSE","else",1192],["T_WHITESPACE"," ",1192],"{",["T_WHITESPACE","\n        ",1192],["T_COMMENT","\/\/ ----- Duplicate the archive\n",1193],["T_WHITESPACE","        ",1194],["T_VARIABLE","$v_result",1194],["T_WHITESPACE"," ",1194],"=",["T_WHITESPACE"," ",1194],["T_VARIABLE","$this",1194],["T_OBJECT_OPERATOR","->",1194],["T_STRING","privDuplicate",1194],"(",["T_VARIABLE","$p_archive",1194],")",";",["T_WHITESPACE","\n      ",1194],"}",["T_WHITESPACE","\n    ",1195],"}",["T_WHITESPACE","\n\n    ",1196],["T_COMMENT","\/\/ ----- Invalid variable\n",1198],["T_WHITESPACE","    ",1199],["T_ELSE","else",1199],["T_WHITESPACE","\n    ",1199],"{",["T_WHITESPACE","\n      ",1200],["T_COMMENT","\/\/ ----- Error log\n",1201],["T_WHITESPACE","      ",1202],["T_STRING","PclZip",1202],["T_DOUBLE_COLON","::",1202],["T_STRING","privErrorLog",1202],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1202],",",["T_WHITESPACE"," ",1202],["T_CONSTANT_ENCAPSED_STRING","\"Invalid variable type p_archive_to_add\"",1202],")",";",["T_WHITESPACE","\n      ",1202],["T_VARIABLE","$v_result",1203],["T_WHITESPACE"," ",1203],"=",["T_WHITESPACE"," ",1203],["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1203],";",["T_WHITESPACE","\n    ",1203],"}",["T_WHITESPACE","\n\n    ",1204],["T_COMMENT","\/\/ ----- Return\n",1206],["T_WHITESPACE","    ",1207],["T_RETURN","return",1207],["T_WHITESPACE"," ",1207],["T_VARIABLE","$v_result",1207],";",["T_WHITESPACE","\n  ",1207],"}",["T_WHITESPACE","\n  ",1208],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1209],["T_WHITESPACE","\n  ",1210],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1211],["T_WHITESPACE","  ",1212],["T_COMMENT","\/\/ Function : merge()\n",1212],["T_WHITESPACE","  ",1213],["T_COMMENT","\/\/ Description :\n",1213],["T_WHITESPACE","  ",1214],["T_COMMENT","\/\/   This method merge the $p_archive_to_add archive at the end of the current\n",1214],["T_WHITESPACE","  ",1215],["T_COMMENT","\/\/   one ($this).\n",1215],["T_WHITESPACE","  ",1216],["T_COMMENT","\/\/   If the archive ($this) does not exist, the merge becomes a duplicate.\n",1216],["T_WHITESPACE","  ",1217],["T_COMMENT","\/\/   If the $p_archive_to_add archive does not exist, the merge is a success.\n",1217],["T_WHITESPACE","  ",1218],["T_COMMENT","\/\/ Parameters :\n",1218],["T_WHITESPACE","  ",1219],["T_COMMENT","\/\/   $p_archive_to_add : It can be directly the filename of a valid zip archive,\n",1219],["T_WHITESPACE","  ",1220],["T_COMMENT","\/\/                       or a PclZip object archive.\n",1220],["T_WHITESPACE","  ",1221],["T_COMMENT","\/\/ Return Values :\n",1221],["T_WHITESPACE","  ",1222],["T_COMMENT","\/\/   1 on success,\n",1222],["T_WHITESPACE","  ",1223],["T_COMMENT","\/\/   0 or negative values on error (see below).\n",1223],["T_WHITESPACE","  ",1224],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1224],["T_WHITESPACE","  ",1225],["T_FUNCTION","function",1225],["T_WHITESPACE"," ",1225],["T_STRING","merge",1225],"(",["T_VARIABLE","$p_archive_to_add",1225],")",["T_WHITESPACE","\n  ",1225],"{",["T_WHITESPACE","\n    ",1226],["T_VARIABLE","$v_result",1227],["T_WHITESPACE"," ",1227],"=",["T_WHITESPACE"," ",1227],["T_LNUMBER","1",1227],";",["T_WHITESPACE","\n\n    ",1227],["T_COMMENT","\/\/ ----- Reset the error handler\n",1229],["T_WHITESPACE","    ",1230],["T_VARIABLE","$this",1230],["T_OBJECT_OPERATOR","->",1230],["T_STRING","privErrorReset",1230],"(",")",";",["T_WHITESPACE","\n\n    ",1230],["T_COMMENT","\/\/ ----- Check archive\n",1232],["T_WHITESPACE","    ",1233],["T_IF","if",1233],["T_WHITESPACE"," ",1233],"(","!",["T_VARIABLE","$this",1233],["T_OBJECT_OPERATOR","->",1233],["T_STRING","privCheckFormat",1233],"(",")",")",["T_WHITESPACE"," ",1233],"{",["T_WHITESPACE","\n      ",1233],["T_RETURN","return",1234],"(",["T_LNUMBER","0",1234],")",";",["T_WHITESPACE","\n    ",1234],"}",["T_WHITESPACE","\n\n    ",1235],["T_COMMENT","\/\/ ----- Look if the $p_archive_to_add is a PclZip object\n",1237],["T_WHITESPACE","    ",1238],["T_IF","if",1238],["T_WHITESPACE"," ",1238],"(","(",["T_STRING","is_object",1238],"(",["T_VARIABLE","$p_archive_to_add",1238],")",")",["T_WHITESPACE"," ",1238],["T_BOOLEAN_AND","&&",1238],["T_WHITESPACE"," ",1238],"(",["T_STRING","get_class",1238],"(",["T_VARIABLE","$p_archive_to_add",1238],")",["T_WHITESPACE"," ",1238],["T_IS_EQUAL","==",1238],["T_WHITESPACE"," ",1238],["T_CONSTANT_ENCAPSED_STRING","'pclzip'",1238],")",")",["T_WHITESPACE","\n    ",1238],"{",["T_WHITESPACE","\n\n      ",1239],["T_COMMENT","\/\/ ----- Merge the archive\n",1241],["T_WHITESPACE","      ",1242],["T_VARIABLE","$v_result",1242],["T_WHITESPACE"," ",1242],"=",["T_WHITESPACE"," ",1242],["T_VARIABLE","$this",1242],["T_OBJECT_OPERATOR","->",1242],["T_STRING","privMerge",1242],"(",["T_VARIABLE","$p_archive_to_add",1242],")",";",["T_WHITESPACE","\n    ",1242],"}",["T_WHITESPACE","\n\n    ",1243],["T_COMMENT","\/\/ ----- Look if the $p_archive_to_add is a string (so a filename)\n",1245],["T_WHITESPACE","    ",1246],["T_ELSE","else",1246],["T_WHITESPACE"," ",1246],["T_IF","if",1246],["T_WHITESPACE"," ",1246],"(",["T_STRING","is_string",1246],"(",["T_VARIABLE","$p_archive_to_add",1246],")",")",["T_WHITESPACE","\n    ",1246],"{",["T_WHITESPACE","\n\n      ",1247],["T_COMMENT","\/\/ ----- Create a temporary archive\n",1249],["T_WHITESPACE","      ",1250],["T_VARIABLE","$v_object_archive",1250],["T_WHITESPACE"," ",1250],"=",["T_WHITESPACE"," ",1250],["T_NEW","new",1250],["T_WHITESPACE"," ",1250],["T_STRING","PclZip",1250],"(",["T_VARIABLE","$p_archive_to_add",1250],")",";",["T_WHITESPACE","\n\n      ",1250],["T_COMMENT","\/\/ ----- Merge the archive\n",1252],["T_WHITESPACE","      ",1253],["T_VARIABLE","$v_result",1253],["T_WHITESPACE"," ",1253],"=",["T_WHITESPACE"," ",1253],["T_VARIABLE","$this",1253],["T_OBJECT_OPERATOR","->",1253],["T_STRING","privMerge",1253],"(",["T_VARIABLE","$v_object_archive",1253],")",";",["T_WHITESPACE","\n    ",1253],"}",["T_WHITESPACE","\n\n    ",1254],["T_COMMENT","\/\/ ----- Invalid variable\n",1256],["T_WHITESPACE","    ",1257],["T_ELSE","else",1257],["T_WHITESPACE","\n    ",1257],"{",["T_WHITESPACE","\n      ",1258],["T_COMMENT","\/\/ ----- Error log\n",1259],["T_WHITESPACE","      ",1260],["T_STRING","PclZip",1260],["T_DOUBLE_COLON","::",1260],["T_STRING","privErrorLog",1260],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1260],",",["T_WHITESPACE"," ",1260],["T_CONSTANT_ENCAPSED_STRING","\"Invalid variable type p_archive_to_add\"",1260],")",";",["T_WHITESPACE","\n      ",1260],["T_VARIABLE","$v_result",1261],["T_WHITESPACE"," ",1261],"=",["T_WHITESPACE"," ",1261],["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1261],";",["T_WHITESPACE","\n    ",1261],"}",["T_WHITESPACE","\n\n    ",1262],["T_COMMENT","\/\/ ----- Return\n",1264],["T_WHITESPACE","    ",1265],["T_RETURN","return",1265],["T_WHITESPACE"," ",1265],["T_VARIABLE","$v_result",1265],";",["T_WHITESPACE","\n  ",1265],"}",["T_WHITESPACE","\n  ",1266],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1267],["T_WHITESPACE","\n\n\n  ",1268],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1271],["T_WHITESPACE","  ",1272],["T_COMMENT","\/\/ Function : errorCode()\n",1272],["T_WHITESPACE","  ",1273],["T_COMMENT","\/\/ Description :\n",1273],["T_WHITESPACE","  ",1274],["T_COMMENT","\/\/ Parameters :\n",1274],["T_WHITESPACE","  ",1275],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1275],["T_WHITESPACE","  ",1276],["T_FUNCTION","function",1276],["T_WHITESPACE"," ",1276],["T_STRING","errorCode",1276],"(",")",["T_WHITESPACE","\n  ",1276],"{",["T_WHITESPACE","\n    ",1277],["T_IF","if",1278],["T_WHITESPACE"," ",1278],"(",["T_STRING","PCLZIP_ERROR_EXTERNAL",1278],["T_WHITESPACE"," ",1278],["T_IS_EQUAL","==",1278],["T_WHITESPACE"," ",1278],["T_LNUMBER","1",1278],")",["T_WHITESPACE"," ",1278],"{",["T_WHITESPACE","\n      ",1278],["T_RETURN","return",1279],"(",["T_STRING","PclErrorCode",1279],"(",")",")",";",["T_WHITESPACE","\n    ",1279],"}",["T_WHITESPACE","\n    ",1280],["T_ELSE","else",1281],["T_WHITESPACE"," ",1281],"{",["T_WHITESPACE","\n      ",1281],["T_RETURN","return",1282],"(",["T_VARIABLE","$this",1282],["T_OBJECT_OPERATOR","->",1282],["T_STRING","error_code",1282],")",";",["T_WHITESPACE","\n    ",1282],"}",["T_WHITESPACE","\n  ",1283],"}",["T_WHITESPACE","\n  ",1284],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1285],["T_WHITESPACE","\n  ",1286],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1287],["T_WHITESPACE","  ",1288],["T_COMMENT","\/\/ Function : errorName()\n",1288],["T_WHITESPACE","  ",1289],["T_COMMENT","\/\/ Description :\n",1289],["T_WHITESPACE","  ",1290],["T_COMMENT","\/\/ Parameters :\n",1290],["T_WHITESPACE","  ",1291],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1291],["T_WHITESPACE","  ",1292],["T_FUNCTION","function",1292],["T_WHITESPACE"," ",1292],["T_STRING","errorName",1292],"(",["T_VARIABLE","$p_with_code",1292],"=",["T_STRING","false",1292],")",["T_WHITESPACE","\n  ",1292],"{",["T_WHITESPACE","\n    ",1293],["T_VARIABLE","$v_name",1294],["T_WHITESPACE"," ",1294],"=",["T_WHITESPACE"," ",1294],["T_ARRAY","array",1294],["T_WHITESPACE"," ",1294],"(",["T_WHITESPACE"," ",1294],["T_STRING","PCLZIP_ERR_NO_ERROR",1294],["T_WHITESPACE"," ",1294],["T_DOUBLE_ARROW","=>",1294],["T_WHITESPACE"," ",1294],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_NO_ERROR'",1294],",",["T_WHITESPACE","\n                      ",1294],["T_STRING","PCLZIP_ERR_WRITE_OPEN_FAIL",1295],["T_WHITESPACE"," ",1295],["T_DOUBLE_ARROW","=>",1295],["T_WHITESPACE"," ",1295],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_WRITE_OPEN_FAIL'",1295],",",["T_WHITESPACE","\n                      ",1295],["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",1296],["T_WHITESPACE"," ",1296],["T_DOUBLE_ARROW","=>",1296],["T_WHITESPACE"," ",1296],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_READ_OPEN_FAIL'",1296],",",["T_WHITESPACE","\n                      ",1296],["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1297],["T_WHITESPACE"," ",1297],["T_DOUBLE_ARROW","=>",1297],["T_WHITESPACE"," ",1297],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_PARAMETER'",1297],",",["T_WHITESPACE","\n                      ",1297],["T_STRING","PCLZIP_ERR_MISSING_FILE",1298],["T_WHITESPACE"," ",1298],["T_DOUBLE_ARROW","=>",1298],["T_WHITESPACE"," ",1298],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_MISSING_FILE'",1298],",",["T_WHITESPACE","\n                      ",1298],["T_STRING","PCLZIP_ERR_FILENAME_TOO_LONG",1299],["T_WHITESPACE"," ",1299],["T_DOUBLE_ARROW","=>",1299],["T_WHITESPACE"," ",1299],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_FILENAME_TOO_LONG'",1299],",",["T_WHITESPACE","\n                      ",1299],["T_STRING","PCLZIP_ERR_INVALID_ZIP",1300],["T_WHITESPACE"," ",1300],["T_DOUBLE_ARROW","=>",1300],["T_WHITESPACE"," ",1300],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ZIP'",1300],",",["T_WHITESPACE","\n                      ",1300],["T_STRING","PCLZIP_ERR_BAD_EXTRACTED_FILE",1301],["T_WHITESPACE"," ",1301],["T_DOUBLE_ARROW","=>",1301],["T_WHITESPACE"," ",1301],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_EXTRACTED_FILE'",1301],",",["T_WHITESPACE","\n                      ",1301],["T_STRING","PCLZIP_ERR_DIR_CREATE_FAIL",1302],["T_WHITESPACE"," ",1302],["T_DOUBLE_ARROW","=>",1302],["T_WHITESPACE"," ",1302],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DIR_CREATE_FAIL'",1302],",",["T_WHITESPACE","\n                      ",1302],["T_STRING","PCLZIP_ERR_BAD_EXTENSION",1303],["T_WHITESPACE"," ",1303],["T_DOUBLE_ARROW","=>",1303],["T_WHITESPACE"," ",1303],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_EXTENSION'",1303],",",["T_WHITESPACE","\n                      ",1303],["T_STRING","PCLZIP_ERR_BAD_FORMAT",1304],["T_WHITESPACE"," ",1304],["T_DOUBLE_ARROW","=>",1304],["T_WHITESPACE"," ",1304],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_FORMAT'",1304],",",["T_WHITESPACE","\n                      ",1304],["T_STRING","PCLZIP_ERR_DELETE_FILE_FAIL",1305],["T_WHITESPACE"," ",1305],["T_DOUBLE_ARROW","=>",1305],["T_WHITESPACE"," ",1305],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DELETE_FILE_FAIL'",1305],",",["T_WHITESPACE","\n                      ",1305],["T_STRING","PCLZIP_ERR_RENAME_FILE_FAIL",1306],["T_WHITESPACE"," ",1306],["T_DOUBLE_ARROW","=>",1306],["T_WHITESPACE"," ",1306],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_RENAME_FILE_FAIL'",1306],",",["T_WHITESPACE","\n                      ",1306],["T_STRING","PCLZIP_ERR_BAD_CHECKSUM",1307],["T_WHITESPACE"," ",1307],["T_DOUBLE_ARROW","=>",1307],["T_WHITESPACE"," ",1307],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_BAD_CHECKSUM'",1307],",",["T_WHITESPACE","\n                      ",1307],["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",1308],["T_WHITESPACE"," ",1308],["T_DOUBLE_ARROW","=>",1308],["T_WHITESPACE"," ",1308],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ARCHIVE_ZIP'",1308],",",["T_WHITESPACE","\n                      ",1308],["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1309],["T_WHITESPACE"," ",1309],["T_DOUBLE_ARROW","=>",1309],["T_WHITESPACE"," ",1309],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_MISSING_OPTION_VALUE'",1309],",",["T_WHITESPACE","\n                      ",1309],["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1310],["T_WHITESPACE"," ",1310],["T_DOUBLE_ARROW","=>",1310],["T_WHITESPACE"," ",1310],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_OPTION_VALUE'",1310],",",["T_WHITESPACE","\n                      ",1310],["T_STRING","PCLZIP_ERR_UNSUPPORTED_COMPRESSION",1311],["T_WHITESPACE"," ",1311],["T_DOUBLE_ARROW","=>",1311],["T_WHITESPACE"," ",1311],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_UNSUPPORTED_COMPRESSION'",1311],",",["T_WHITESPACE","\n                      ",1311],["T_STRING","PCLZIP_ERR_UNSUPPORTED_ENCRYPTION",1312],["T_WHITESPACE"," ",1312],["T_DOUBLE_ARROW","=>",1312],["T_WHITESPACE"," ",1312],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_UNSUPPORTED_ENCRYPTION'",1312],["T_WHITESPACE","\n                      ",1312],",",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1313],["T_WHITESPACE"," ",1313],["T_DOUBLE_ARROW","=>",1313],["T_WHITESPACE"," ",1313],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE'",1313],["T_WHITESPACE","\n                      ",1313],",",["T_STRING","PCLZIP_ERR_DIRECTORY_RESTRICTION",1314],["T_WHITESPACE"," ",1314],["T_DOUBLE_ARROW","=>",1314],["T_WHITESPACE"," ",1314],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ERR_DIRECTORY_RESTRICTION'",1314],["T_WHITESPACE","\n                    ",1314],")",";",["T_WHITESPACE","\n\n    ",1315],["T_IF","if",1317],["T_WHITESPACE"," ",1317],"(",["T_ISSET","isset",1317],"(",["T_VARIABLE","$v_name",1317],"[",["T_VARIABLE","$this",1317],["T_OBJECT_OPERATOR","->",1317],["T_STRING","error_code",1317],"]",")",")",["T_WHITESPACE"," ",1317],"{",["T_WHITESPACE","\n      ",1317],["T_VARIABLE","$v_value",1318],["T_WHITESPACE"," ",1318],"=",["T_WHITESPACE"," ",1318],["T_VARIABLE","$v_name",1318],"[",["T_VARIABLE","$this",1318],["T_OBJECT_OPERATOR","->",1318],["T_STRING","error_code",1318],"]",";",["T_WHITESPACE","\n    ",1318],"}",["T_WHITESPACE","\n    ",1319],["T_ELSE","else",1320],["T_WHITESPACE"," ",1320],"{",["T_WHITESPACE","\n      ",1320],["T_VARIABLE","$v_value",1321],["T_WHITESPACE"," ",1321],"=",["T_WHITESPACE"," ",1321],["T_CONSTANT_ENCAPSED_STRING","'NoName'",1321],";",["T_WHITESPACE","\n    ",1321],"}",["T_WHITESPACE","\n\n    ",1322],["T_IF","if",1324],["T_WHITESPACE"," ",1324],"(",["T_VARIABLE","$p_with_code",1324],")",["T_WHITESPACE"," ",1324],"{",["T_WHITESPACE","\n      ",1324],["T_RETURN","return",1325],"(",["T_VARIABLE","$v_value",1325],".",["T_CONSTANT_ENCAPSED_STRING","' ('",1325],".",["T_VARIABLE","$this",1325],["T_OBJECT_OPERATOR","->",1325],["T_STRING","error_code",1325],".",["T_CONSTANT_ENCAPSED_STRING","')'",1325],")",";",["T_WHITESPACE","\n    ",1325],"}",["T_WHITESPACE","\n    ",1326],["T_ELSE","else",1327],["T_WHITESPACE"," ",1327],"{",["T_WHITESPACE","\n      ",1327],["T_RETURN","return",1328],"(",["T_VARIABLE","$v_value",1328],")",";",["T_WHITESPACE","\n    ",1328],"}",["T_WHITESPACE","\n  ",1329],"}",["T_WHITESPACE","\n  ",1330],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1331],["T_WHITESPACE","\n  ",1332],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1333],["T_WHITESPACE","  ",1334],["T_COMMENT","\/\/ Function : errorInfo()\n",1334],["T_WHITESPACE","  ",1335],["T_COMMENT","\/\/ Description :\n",1335],["T_WHITESPACE","  ",1336],["T_COMMENT","\/\/ Parameters :\n",1336],["T_WHITESPACE","  ",1337],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1337],["T_WHITESPACE","  ",1338],["T_FUNCTION","function",1338],["T_WHITESPACE"," ",1338],["T_STRING","errorInfo",1338],"(",["T_VARIABLE","$p_full",1338],"=",["T_STRING","false",1338],")",["T_WHITESPACE","\n  ",1338],"{",["T_WHITESPACE","\n    ",1339],["T_IF","if",1340],["T_WHITESPACE"," ",1340],"(",["T_STRING","PCLZIP_ERROR_EXTERNAL",1340],["T_WHITESPACE"," ",1340],["T_IS_EQUAL","==",1340],["T_WHITESPACE"," ",1340],["T_LNUMBER","1",1340],")",["T_WHITESPACE"," ",1340],"{",["T_WHITESPACE","\n      ",1340],["T_RETURN","return",1341],"(",["T_STRING","PclErrorString",1341],"(",")",")",";",["T_WHITESPACE","\n    ",1341],"}",["T_WHITESPACE","\n    ",1342],["T_ELSE","else",1343],["T_WHITESPACE"," ",1343],"{",["T_WHITESPACE","\n      ",1343],["T_IF","if",1344],["T_WHITESPACE"," ",1344],"(",["T_VARIABLE","$p_full",1344],")",["T_WHITESPACE"," ",1344],"{",["T_WHITESPACE","\n        ",1344],["T_RETURN","return",1345],"(",["T_VARIABLE","$this",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","errorName",1345],"(",["T_STRING","true",1345],")",".",["T_CONSTANT_ENCAPSED_STRING","\" : \"",1345],".",["T_VARIABLE","$this",1345],["T_OBJECT_OPERATOR","->",1345],["T_STRING","error_string",1345],")",";",["T_WHITESPACE","\n      ",1345],"}",["T_WHITESPACE","\n      ",1346],["T_ELSE","else",1347],["T_WHITESPACE"," ",1347],"{",["T_WHITESPACE","\n        ",1347],["T_RETURN","return",1348],"(",["T_VARIABLE","$this",1348],["T_OBJECT_OPERATOR","->",1348],["T_STRING","error_string",1348],".",["T_CONSTANT_ENCAPSED_STRING","\" [code \"",1348],".",["T_VARIABLE","$this",1348],["T_OBJECT_OPERATOR","->",1348],["T_STRING","error_code",1348],".",["T_CONSTANT_ENCAPSED_STRING","\"]\"",1348],")",";",["T_WHITESPACE","\n      ",1348],"}",["T_WHITESPACE","\n    ",1349],"}",["T_WHITESPACE","\n  ",1350],"}",["T_WHITESPACE","\n  ",1351],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1352],["T_WHITESPACE","\n\n",1353],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1355],["T_COMMENT","\/\/ ***** UNDER THIS LINE ARE DEFINED PRIVATE INTERNAL FUNCTIONS *****\n",1356],["T_COMMENT","\/\/ *****                                                        *****\n",1357],["T_COMMENT","\/\/ *****       THESES FUNCTIONS MUST NOT BE USED DIRECTLY       *****\n",1358],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1359],["T_WHITESPACE","\n\n\n  ",1360],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1363],["T_WHITESPACE","  ",1364],["T_COMMENT","\/\/ Function : privCheckFormat()\n",1364],["T_WHITESPACE","  ",1365],["T_COMMENT","\/\/ Description :\n",1365],["T_WHITESPACE","  ",1366],["T_COMMENT","\/\/   This method check that the archive exists and is a valid zip archive.\n",1366],["T_WHITESPACE","  ",1367],["T_COMMENT","\/\/   Several level of check exists. (futur)\n",1367],["T_WHITESPACE","  ",1368],["T_COMMENT","\/\/ Parameters :\n",1368],["T_WHITESPACE","  ",1369],["T_COMMENT","\/\/   $p_level : Level of check. Default 0.\n",1369],["T_WHITESPACE","  ",1370],["T_COMMENT","\/\/              0 : Check the first bytes (magic codes) (default value))\n",1370],["T_WHITESPACE","  ",1371],["T_COMMENT","\/\/              1 : 0 + Check the central directory (futur)\n",1371],["T_WHITESPACE","  ",1372],["T_COMMENT","\/\/              2 : 1 + Check each file header (futur)\n",1372],["T_WHITESPACE","  ",1373],["T_COMMENT","\/\/ Return Values :\n",1373],["T_WHITESPACE","  ",1374],["T_COMMENT","\/\/   true on success,\n",1374],["T_WHITESPACE","  ",1375],["T_COMMENT","\/\/   false on error, the error code is set.\n",1375],["T_WHITESPACE","  ",1376],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1376],["T_WHITESPACE","  ",1377],["T_FUNCTION","function",1377],["T_WHITESPACE"," ",1377],["T_STRING","privCheckFormat",1377],"(",["T_VARIABLE","$p_level",1377],"=",["T_LNUMBER","0",1377],")",["T_WHITESPACE","\n  ",1377],"{",["T_WHITESPACE","\n    ",1378],["T_VARIABLE","$v_result",1379],["T_WHITESPACE"," ",1379],"=",["T_WHITESPACE"," ",1379],["T_STRING","true",1379],";",["T_WHITESPACE","\n\n\t",1379],["T_COMMENT","\/\/ ----- Reset the file system cache\n",1381],["T_WHITESPACE","    ",1382],["T_STRING","clearstatcache",1382],"(",")",";",["T_WHITESPACE","\n\n    ",1382],["T_COMMENT","\/\/ ----- Reset the error handler\n",1384],["T_WHITESPACE","    ",1385],["T_VARIABLE","$this",1385],["T_OBJECT_OPERATOR","->",1385],["T_STRING","privErrorReset",1385],"(",")",";",["T_WHITESPACE","\n\n    ",1385],["T_COMMENT","\/\/ ----- Look if the file exits\n",1387],["T_WHITESPACE","    ",1388],["T_IF","if",1388],["T_WHITESPACE"," ",1388],"(","!",["T_STRING","is_file",1388],"(",["T_VARIABLE","$this",1388],["T_OBJECT_OPERATOR","->",1388],["T_STRING","zipname",1388],")",")",["T_WHITESPACE"," ",1388],"{",["T_WHITESPACE","\n      ",1388],["T_COMMENT","\/\/ ----- Error log\n",1389],["T_WHITESPACE","      ",1390],["T_STRING","PclZip",1390],["T_DOUBLE_COLON","::",1390],["T_STRING","privErrorLog",1390],"(",["T_STRING","PCLZIP_ERR_MISSING_FILE",1390],",",["T_WHITESPACE"," ",1390],["T_CONSTANT_ENCAPSED_STRING","\"Missing archive file '\"",1390],".",["T_VARIABLE","$this",1390],["T_OBJECT_OPERATOR","->",1390],["T_STRING","zipname",1390],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1390],")",";",["T_WHITESPACE","\n      ",1390],["T_RETURN","return",1391],"(",["T_STRING","false",1391],")",";",["T_WHITESPACE","\n    ",1391],"}",["T_WHITESPACE","\n\n    ",1392],["T_COMMENT","\/\/ ----- Check that the file is readeable\n",1394],["T_WHITESPACE","    ",1395],["T_IF","if",1395],["T_WHITESPACE"," ",1395],"(","!",["T_STRING","is_readable",1395],"(",["T_VARIABLE","$this",1395],["T_OBJECT_OPERATOR","->",1395],["T_STRING","zipname",1395],")",")",["T_WHITESPACE"," ",1395],"{",["T_WHITESPACE","\n      ",1395],["T_COMMENT","\/\/ ----- Error log\n",1396],["T_WHITESPACE","      ",1397],["T_STRING","PclZip",1397],["T_DOUBLE_COLON","::",1397],["T_STRING","privErrorLog",1397],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",1397],",",["T_WHITESPACE"," ",1397],["T_CONSTANT_ENCAPSED_STRING","\"Unable to read archive '\"",1397],".",["T_VARIABLE","$this",1397],["T_OBJECT_OPERATOR","->",1397],["T_STRING","zipname",1397],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1397],")",";",["T_WHITESPACE","\n      ",1397],["T_RETURN","return",1398],"(",["T_STRING","false",1398],")",";",["T_WHITESPACE","\n    ",1398],"}",["T_WHITESPACE","\n\n    ",1399],["T_COMMENT","\/\/ ----- Check the magic code\n",1401],["T_WHITESPACE","    ",1402],["T_COMMENT","\/\/ TBC\n",1402],["T_WHITESPACE","\n    ",1403],["T_COMMENT","\/\/ ----- Check the central header\n",1404],["T_WHITESPACE","    ",1405],["T_COMMENT","\/\/ TBC\n",1405],["T_WHITESPACE","\n    ",1406],["T_COMMENT","\/\/ ----- Check each file header\n",1407],["T_WHITESPACE","    ",1408],["T_COMMENT","\/\/ TBC\n",1408],["T_WHITESPACE","\n    ",1409],["T_COMMENT","\/\/ ----- Return\n",1410],["T_WHITESPACE","    ",1411],["T_RETURN","return",1411],["T_WHITESPACE"," ",1411],["T_VARIABLE","$v_result",1411],";",["T_WHITESPACE","\n  ",1411],"}",["T_WHITESPACE","\n  ",1412],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1413],["T_WHITESPACE","\n  ",1414],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1415],["T_WHITESPACE","  ",1416],["T_COMMENT","\/\/ Function : privParseOptions()\n",1416],["T_WHITESPACE","  ",1417],["T_COMMENT","\/\/ Description :\n",1417],["T_WHITESPACE","  ",1418],["T_COMMENT","\/\/   This internal methods reads the variable list of arguments ($p_options_list,\n",1418],["T_WHITESPACE","  ",1419],["T_COMMENT","\/\/   $p_size) and generate an array with the options and values ($v_result_list).\n",1419],["T_WHITESPACE","  ",1420],["T_COMMENT","\/\/   $v_requested_options contains the options that can be present and those that\n",1420],["T_WHITESPACE","  ",1421],["T_COMMENT","\/\/   must be present.\n",1421],["T_WHITESPACE","  ",1422],["T_COMMENT","\/\/   $v_requested_options is an array, with the option value as key, and 'optional',\n",1422],["T_WHITESPACE","  ",1423],["T_COMMENT","\/\/   or 'mandatory' as value.\n",1423],["T_WHITESPACE","  ",1424],["T_COMMENT","\/\/ Parameters :\n",1424],["T_WHITESPACE","  ",1425],["T_COMMENT","\/\/   See above.\n",1425],["T_WHITESPACE","  ",1426],["T_COMMENT","\/\/ Return Values :\n",1426],["T_WHITESPACE","  ",1427],["T_COMMENT","\/\/   1 on success.\n",1427],["T_WHITESPACE","  ",1428],["T_COMMENT","\/\/   0 on failure.\n",1428],["T_WHITESPACE","  ",1429],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1429],["T_WHITESPACE","  ",1430],["T_FUNCTION","function",1430],["T_WHITESPACE"," ",1430],["T_STRING","privParseOptions",1430],"(","&",["T_VARIABLE","$p_options_list",1430],",",["T_WHITESPACE"," ",1430],["T_VARIABLE","$p_size",1430],",",["T_WHITESPACE"," ",1430],"&",["T_VARIABLE","$v_result_list",1430],",",["T_WHITESPACE"," ",1430],["T_VARIABLE","$v_requested_options",1430],"=",["T_STRING","false",1430],")",["T_WHITESPACE","\n  ",1430],"{",["T_WHITESPACE","\n    ",1431],["T_VARIABLE","$v_result",1432],"=",["T_LNUMBER","1",1432],";",["T_WHITESPACE","\n\n    ",1432],["T_COMMENT","\/\/ ----- Read the options\n",1434],["T_WHITESPACE","    ",1435],["T_VARIABLE","$i",1435],"=",["T_LNUMBER","0",1435],";",["T_WHITESPACE","\n    ",1435],["T_WHILE","while",1436],["T_WHITESPACE"," ",1436],"(",["T_VARIABLE","$i",1436],"<",["T_VARIABLE","$p_size",1436],")",["T_WHITESPACE"," ",1436],"{",["T_WHITESPACE","\n\n      ",1436],["T_COMMENT","\/\/ ----- Check if the option is supported\n",1438],["T_WHITESPACE","      ",1439],["T_IF","if",1439],["T_WHITESPACE"," ",1439],"(","!",["T_ISSET","isset",1439],"(",["T_VARIABLE","$v_requested_options",1439],"[",["T_VARIABLE","$p_options_list",1439],"[",["T_VARIABLE","$i",1439],"]","]",")",")",["T_WHITESPACE"," ",1439],"{",["T_WHITESPACE","\n        ",1439],["T_COMMENT","\/\/ ----- Error log\n",1440],["T_WHITESPACE","        ",1441],["T_STRING","PclZip",1441],["T_DOUBLE_COLON","::",1441],["T_STRING","privErrorLog",1441],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1441],",",["T_WHITESPACE"," ",1441],["T_CONSTANT_ENCAPSED_STRING","\"Invalid optional parameter '\"",1441],".",["T_VARIABLE","$p_options_list",1441],"[",["T_VARIABLE","$i",1441],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' for this method\"",1441],")",";",["T_WHITESPACE","\n\n        ",1441],["T_COMMENT","\/\/ ----- Return\n",1443],["T_WHITESPACE","        ",1444],["T_RETURN","return",1444],["T_WHITESPACE"," ",1444],["T_STRING","PclZip",1444],["T_DOUBLE_COLON","::",1444],["T_STRING","errorCode",1444],"(",")",";",["T_WHITESPACE","\n      ",1444],"}",["T_WHITESPACE","\n\n      ",1445],["T_COMMENT","\/\/ ----- Look for next option\n",1447],["T_WHITESPACE","      ",1448],["T_SWITCH","switch",1448],["T_WHITESPACE"," ",1448],"(",["T_VARIABLE","$p_options_list",1448],"[",["T_VARIABLE","$i",1448],"]",")",["T_WHITESPACE"," ",1448],"{",["T_WHITESPACE","\n        ",1448],["T_COMMENT","\/\/ ----- Look for options that request a path value\n",1449],["T_WHITESPACE","        ",1450],["T_CASE","case",1450],["T_WHITESPACE"," ",1450],["T_STRING","PCLZIP_OPT_PATH",1450],["T_WHITESPACE"," ",1450],":",["T_WHITESPACE","\n        ",1450],["T_CASE","case",1451],["T_WHITESPACE"," ",1451],["T_STRING","PCLZIP_OPT_REMOVE_PATH",1451],["T_WHITESPACE"," ",1451],":",["T_WHITESPACE","\n        ",1451],["T_CASE","case",1452],["T_WHITESPACE"," ",1452],["T_STRING","PCLZIP_OPT_ADD_PATH",1452],["T_WHITESPACE"," ",1452],":",["T_WHITESPACE","\n          ",1452],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1453],["T_WHITESPACE","          ",1454],["T_IF","if",1454],["T_WHITESPACE"," ",1454],"(","(",["T_VARIABLE","$i",1454],"+",["T_LNUMBER","1",1454],")",["T_WHITESPACE"," ",1454],["T_IS_GREATER_OR_EQUAL",">=",1454],["T_WHITESPACE"," ",1454],["T_VARIABLE","$p_size",1454],")",["T_WHITESPACE"," ",1454],"{",["T_WHITESPACE","\n            ",1454],["T_COMMENT","\/\/ ----- Error log\n",1455],["T_WHITESPACE","            ",1456],["T_STRING","PclZip",1456],["T_DOUBLE_COLON","::",1456],["T_STRING","privErrorLog",1456],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1456],",",["T_WHITESPACE"," ",1456],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1456],".",["T_STRING","PclZipUtilOptionText",1456],"(",["T_VARIABLE","$p_options_list",1456],"[",["T_VARIABLE","$i",1456],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1456],")",";",["T_WHITESPACE","\n\n            ",1456],["T_COMMENT","\/\/ ----- Return\n",1458],["T_WHITESPACE","            ",1459],["T_RETURN","return",1459],["T_WHITESPACE"," ",1459],["T_STRING","PclZip",1459],["T_DOUBLE_COLON","::",1459],["T_STRING","errorCode",1459],"(",")",";",["T_WHITESPACE","\n          ",1459],"}",["T_WHITESPACE","\n\n          ",1460],["T_COMMENT","\/\/ ----- Get the value\n",1462],["T_WHITESPACE","          ",1463],["T_VARIABLE","$v_result_list",1463],"[",["T_VARIABLE","$p_options_list",1463],"[",["T_VARIABLE","$i",1463],"]","]",["T_WHITESPACE"," ",1463],"=",["T_WHITESPACE"," ",1463],["T_STRING","PclZipUtilTranslateWinPath",1463],"(",["T_VARIABLE","$p_options_list",1463],"[",["T_VARIABLE","$i",1463],"+",["T_LNUMBER","1",1463],"]",",",["T_WHITESPACE"," ",1463],["T_STRING","FALSE",1463],")",";",["T_WHITESPACE","\n          ",1463],["T_VARIABLE","$i",1464],["T_INC","++",1464],";",["T_WHITESPACE","\n        ",1464],["T_BREAK","break",1465],";",["T_WHITESPACE","\n\n        ",1465],["T_CASE","case",1467],["T_WHITESPACE"," ",1467],["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1467],["T_WHITESPACE"," ",1467],":",["T_WHITESPACE","\n          ",1467],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1468],["T_WHITESPACE","          ",1469],["T_IF","if",1469],["T_WHITESPACE"," ",1469],"(","(",["T_VARIABLE","$i",1469],"+",["T_LNUMBER","1",1469],")",["T_WHITESPACE"," ",1469],["T_IS_GREATER_OR_EQUAL",">=",1469],["T_WHITESPACE"," ",1469],["T_VARIABLE","$p_size",1469],")",["T_WHITESPACE"," ",1469],"{",["T_WHITESPACE","\n            ",1469],["T_STRING","PclZip",1470],["T_DOUBLE_COLON","::",1470],["T_STRING","privErrorLog",1470],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1470],",",["T_WHITESPACE"," ",1470],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1470],".",["T_STRING","PclZipUtilOptionText",1470],"(",["T_VARIABLE","$p_options_list",1470],"[",["T_VARIABLE","$i",1470],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1470],")",";",["T_WHITESPACE","\n            ",1470],["T_RETURN","return",1471],["T_WHITESPACE"," ",1471],["T_STRING","PclZip",1471],["T_DOUBLE_COLON","::",1471],["T_STRING","errorCode",1471],"(",")",";",["T_WHITESPACE","\n          ",1471],"}",["T_WHITESPACE","\n\n          ",1472],["T_COMMENT","\/\/ ----- Check for incompatible options\n",1474],["T_WHITESPACE","          ",1475],["T_IF","if",1475],["T_WHITESPACE"," ",1475],"(",["T_ISSET","isset",1475],"(",["T_VARIABLE","$v_result_list",1475],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",1475],"]",")",")",["T_WHITESPACE"," ",1475],"{",["T_WHITESPACE","\n            ",1475],["T_STRING","PclZip",1476],["T_DOUBLE_COLON","::",1476],["T_STRING","privErrorLog",1476],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1476],",",["T_WHITESPACE"," ",1476],["T_CONSTANT_ENCAPSED_STRING","\"Option '\"",1476],".",["T_STRING","PclZipUtilOptionText",1476],"(",["T_VARIABLE","$p_options_list",1476],"[",["T_VARIABLE","$i",1476],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"' can not be used with option 'PCLZIP_OPT_TEMP_FILE_OFF'\"",1476],")",";",["T_WHITESPACE","\n            ",1476],["T_RETURN","return",1477],["T_WHITESPACE"," ",1477],["T_STRING","PclZip",1477],["T_DOUBLE_COLON","::",1477],["T_STRING","errorCode",1477],"(",")",";",["T_WHITESPACE","\n          ",1477],"}",["T_WHITESPACE","\n\n          ",1478],["T_COMMENT","\/\/ ----- Check the value\n",1480],["T_WHITESPACE","          ",1481],["T_VARIABLE","$v_value",1481],["T_WHITESPACE"," ",1481],"=",["T_WHITESPACE"," ",1481],["T_VARIABLE","$p_options_list",1481],"[",["T_VARIABLE","$i",1481],"+",["T_LNUMBER","1",1481],"]",";",["T_WHITESPACE","\n          ",1481],["T_IF","if",1482],["T_WHITESPACE"," ",1482],"(","(","!",["T_STRING","is_integer",1482],"(",["T_VARIABLE","$v_value",1482],")",")",["T_WHITESPACE"," ",1482],["T_BOOLEAN_OR","||",1482],["T_WHITESPACE"," ",1482],"(",["T_VARIABLE","$v_value",1482],"<",["T_LNUMBER","0",1482],")",")",["T_WHITESPACE"," ",1482],"{",["T_WHITESPACE","\n            ",1482],["T_STRING","PclZip",1483],["T_DOUBLE_COLON","::",1483],["T_STRING","privErrorLog",1483],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1483],",",["T_WHITESPACE"," ",1483],["T_CONSTANT_ENCAPSED_STRING","\"Integer expected for option '\"",1483],".",["T_STRING","PclZipUtilOptionText",1483],"(",["T_VARIABLE","$p_options_list",1483],"[",["T_VARIABLE","$i",1483],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1483],")",";",["T_WHITESPACE","\n            ",1483],["T_RETURN","return",1484],["T_WHITESPACE"," ",1484],["T_STRING","PclZip",1484],["T_DOUBLE_COLON","::",1484],["T_STRING","errorCode",1484],"(",")",";",["T_WHITESPACE","\n          ",1484],"}",["T_WHITESPACE","\n\n          ",1485],["T_COMMENT","\/\/ ----- Get the value (and convert it in bytes)\n",1487],["T_WHITESPACE","          ",1488],["T_VARIABLE","$v_result_list",1488],"[",["T_VARIABLE","$p_options_list",1488],"[",["T_VARIABLE","$i",1488],"]","]",["T_WHITESPACE"," ",1488],"=",["T_WHITESPACE"," ",1488],["T_VARIABLE","$v_value",1488],"*",["T_LNUMBER","1048576",1488],";",["T_WHITESPACE","\n          ",1488],["T_VARIABLE","$i",1489],["T_INC","++",1489],";",["T_WHITESPACE","\n        ",1489],["T_BREAK","break",1490],";",["T_WHITESPACE","\n\n        ",1490],["T_CASE","case",1492],["T_WHITESPACE"," ",1492],["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",1492],["T_WHITESPACE"," ",1492],":",["T_WHITESPACE","\n          ",1492],["T_COMMENT","\/\/ ----- Check for incompatible options\n",1493],["T_WHITESPACE","          ",1494],["T_IF","if",1494],["T_WHITESPACE"," ",1494],"(",["T_ISSET","isset",1494],"(",["T_VARIABLE","$v_result_list",1494],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",1494],"]",")",")",["T_WHITESPACE"," ",1494],"{",["T_WHITESPACE","\n            ",1494],["T_STRING","PclZip",1495],["T_DOUBLE_COLON","::",1495],["T_STRING","privErrorLog",1495],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1495],",",["T_WHITESPACE"," ",1495],["T_CONSTANT_ENCAPSED_STRING","\"Option '\"",1495],".",["T_STRING","PclZipUtilOptionText",1495],"(",["T_VARIABLE","$p_options_list",1495],"[",["T_VARIABLE","$i",1495],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"' can not be used with option 'PCLZIP_OPT_TEMP_FILE_OFF'\"",1495],")",";",["T_WHITESPACE","\n            ",1495],["T_RETURN","return",1496],["T_WHITESPACE"," ",1496],["T_STRING","PclZip",1496],["T_DOUBLE_COLON","::",1496],["T_STRING","errorCode",1496],"(",")",";",["T_WHITESPACE","\n          ",1496],"}",["T_WHITESPACE","\n\n          ",1497],["T_VARIABLE","$v_result_list",1499],"[",["T_VARIABLE","$p_options_list",1499],"[",["T_VARIABLE","$i",1499],"]","]",["T_WHITESPACE"," ",1499],"=",["T_WHITESPACE"," ",1499],["T_STRING","true",1499],";",["T_WHITESPACE","\n        ",1499],["T_BREAK","break",1500],";",["T_WHITESPACE","\n\n        ",1500],["T_CASE","case",1502],["T_WHITESPACE"," ",1502],["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",1502],["T_WHITESPACE"," ",1502],":",["T_WHITESPACE","\n          ",1502],["T_COMMENT","\/\/ ----- Check for incompatible options\n",1503],["T_WHITESPACE","          ",1504],["T_IF","if",1504],["T_WHITESPACE"," ",1504],"(",["T_ISSET","isset",1504],"(",["T_VARIABLE","$v_result_list",1504],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",1504],"]",")",")",["T_WHITESPACE"," ",1504],"{",["T_WHITESPACE","\n            ",1504],["T_STRING","PclZip",1505],["T_DOUBLE_COLON","::",1505],["T_STRING","privErrorLog",1505],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1505],",",["T_WHITESPACE"," ",1505],["T_CONSTANT_ENCAPSED_STRING","\"Option '\"",1505],".",["T_STRING","PclZipUtilOptionText",1505],"(",["T_VARIABLE","$p_options_list",1505],"[",["T_VARIABLE","$i",1505],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"' can not be used with option 'PCLZIP_OPT_TEMP_FILE_ON'\"",1505],")",";",["T_WHITESPACE","\n            ",1505],["T_RETURN","return",1506],["T_WHITESPACE"," ",1506],["T_STRING","PclZip",1506],["T_DOUBLE_COLON","::",1506],["T_STRING","errorCode",1506],"(",")",";",["T_WHITESPACE","\n          ",1506],"}",["T_WHITESPACE","\n          ",1507],["T_COMMENT","\/\/ ----- Check for incompatible options\n",1508],["T_WHITESPACE","          ",1509],["T_IF","if",1509],["T_WHITESPACE"," ",1509],"(",["T_ISSET","isset",1509],"(",["T_VARIABLE","$v_result_list",1509],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1509],"]",")",")",["T_WHITESPACE"," ",1509],"{",["T_WHITESPACE","\n            ",1509],["T_STRING","PclZip",1510],["T_DOUBLE_COLON","::",1510],["T_STRING","privErrorLog",1510],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1510],",",["T_WHITESPACE"," ",1510],["T_CONSTANT_ENCAPSED_STRING","\"Option '\"",1510],".",["T_STRING","PclZipUtilOptionText",1510],"(",["T_VARIABLE","$p_options_list",1510],"[",["T_VARIABLE","$i",1510],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"' can not be used with option 'PCLZIP_OPT_TEMP_FILE_THRESHOLD'\"",1510],")",";",["T_WHITESPACE","\n            ",1510],["T_RETURN","return",1511],["T_WHITESPACE"," ",1511],["T_STRING","PclZip",1511],["T_DOUBLE_COLON","::",1511],["T_STRING","errorCode",1511],"(",")",";",["T_WHITESPACE","\n          ",1511],"}",["T_WHITESPACE","\n\n          ",1512],["T_VARIABLE","$v_result_list",1514],"[",["T_VARIABLE","$p_options_list",1514],"[",["T_VARIABLE","$i",1514],"]","]",["T_WHITESPACE"," ",1514],"=",["T_WHITESPACE"," ",1514],["T_STRING","true",1514],";",["T_WHITESPACE","\n        ",1514],["T_BREAK","break",1515],";",["T_WHITESPACE","\n\n        ",1515],["T_CASE","case",1517],["T_WHITESPACE"," ",1517],["T_STRING","PCLZIP_OPT_EXTRACT_DIR_RESTRICTION",1517],["T_WHITESPACE"," ",1517],":",["T_WHITESPACE","\n          ",1517],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1518],["T_WHITESPACE","          ",1519],["T_IF","if",1519],["T_WHITESPACE"," ",1519],"(","(",["T_VARIABLE","$i",1519],"+",["T_LNUMBER","1",1519],")",["T_WHITESPACE"," ",1519],["T_IS_GREATER_OR_EQUAL",">=",1519],["T_WHITESPACE"," ",1519],["T_VARIABLE","$p_size",1519],")",["T_WHITESPACE"," ",1519],"{",["T_WHITESPACE","\n            ",1519],["T_COMMENT","\/\/ ----- Error log\n",1520],["T_WHITESPACE","            ",1521],["T_STRING","PclZip",1521],["T_DOUBLE_COLON","::",1521],["T_STRING","privErrorLog",1521],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1521],",",["T_WHITESPACE"," ",1521],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1521],".",["T_STRING","PclZipUtilOptionText",1521],"(",["T_VARIABLE","$p_options_list",1521],"[",["T_VARIABLE","$i",1521],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1521],")",";",["T_WHITESPACE","\n\n            ",1521],["T_COMMENT","\/\/ ----- Return\n",1523],["T_WHITESPACE","            ",1524],["T_RETURN","return",1524],["T_WHITESPACE"," ",1524],["T_STRING","PclZip",1524],["T_DOUBLE_COLON","::",1524],["T_STRING","errorCode",1524],"(",")",";",["T_WHITESPACE","\n          ",1524],"}",["T_WHITESPACE","\n\n          ",1525],["T_COMMENT","\/\/ ----- Get the value\n",1527],["T_WHITESPACE","          ",1528],["T_IF","if",1528],["T_WHITESPACE"," ",1528],"(",["T_WHITESPACE","   ",1528],["T_STRING","is_string",1528],"(",["T_VARIABLE","$p_options_list",1528],"[",["T_VARIABLE","$i",1528],"+",["T_LNUMBER","1",1528],"]",")",["T_WHITESPACE","\n              ",1528],["T_BOOLEAN_AND","&&",1529],["T_WHITESPACE"," ",1529],"(",["T_VARIABLE","$p_options_list",1529],"[",["T_VARIABLE","$i",1529],"+",["T_LNUMBER","1",1529],"]",["T_WHITESPACE"," ",1529],["T_IS_NOT_EQUAL","!=",1529],["T_WHITESPACE"," ",1529],["T_CONSTANT_ENCAPSED_STRING","''",1529],")",")",["T_WHITESPACE"," ",1529],"{",["T_WHITESPACE","\n            ",1529],["T_VARIABLE","$v_result_list",1530],"[",["T_VARIABLE","$p_options_list",1530],"[",["T_VARIABLE","$i",1530],"]","]",["T_WHITESPACE"," ",1530],"=",["T_WHITESPACE"," ",1530],["T_STRING","PclZipUtilTranslateWinPath",1530],"(",["T_VARIABLE","$p_options_list",1530],"[",["T_VARIABLE","$i",1530],"+",["T_LNUMBER","1",1530],"]",",",["T_WHITESPACE"," ",1530],["T_STRING","FALSE",1530],")",";",["T_WHITESPACE","\n            ",1530],["T_VARIABLE","$i",1531],["T_INC","++",1531],";",["T_WHITESPACE","\n          ",1531],"}",["T_WHITESPACE","\n          ",1532],["T_ELSE","else",1533],["T_WHITESPACE"," ",1533],"{",["T_WHITESPACE","\n          ",1533],"}",["T_WHITESPACE","\n        ",1534],["T_BREAK","break",1535],";",["T_WHITESPACE","\n\n        ",1535],["T_COMMENT","\/\/ ----- Look for options that request an array of string for value\n",1537],["T_WHITESPACE","        ",1538],["T_CASE","case",1538],["T_WHITESPACE"," ",1538],["T_STRING","PCLZIP_OPT_BY_NAME",1538],["T_WHITESPACE"," ",1538],":",["T_WHITESPACE","\n          ",1538],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1539],["T_WHITESPACE","          ",1540],["T_IF","if",1540],["T_WHITESPACE"," ",1540],"(","(",["T_VARIABLE","$i",1540],"+",["T_LNUMBER","1",1540],")",["T_WHITESPACE"," ",1540],["T_IS_GREATER_OR_EQUAL",">=",1540],["T_WHITESPACE"," ",1540],["T_VARIABLE","$p_size",1540],")",["T_WHITESPACE"," ",1540],"{",["T_WHITESPACE","\n            ",1540],["T_COMMENT","\/\/ ----- Error log\n",1541],["T_WHITESPACE","            ",1542],["T_STRING","PclZip",1542],["T_DOUBLE_COLON","::",1542],["T_STRING","privErrorLog",1542],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1542],",",["T_WHITESPACE"," ",1542],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1542],".",["T_STRING","PclZipUtilOptionText",1542],"(",["T_VARIABLE","$p_options_list",1542],"[",["T_VARIABLE","$i",1542],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1542],")",";",["T_WHITESPACE","\n\n            ",1542],["T_COMMENT","\/\/ ----- Return\n",1544],["T_WHITESPACE","            ",1545],["T_RETURN","return",1545],["T_WHITESPACE"," ",1545],["T_STRING","PclZip",1545],["T_DOUBLE_COLON","::",1545],["T_STRING","errorCode",1545],"(",")",";",["T_WHITESPACE","\n          ",1545],"}",["T_WHITESPACE","\n\n          ",1546],["T_COMMENT","\/\/ ----- Get the value\n",1548],["T_WHITESPACE","          ",1549],["T_IF","if",1549],["T_WHITESPACE"," ",1549],"(",["T_STRING","is_string",1549],"(",["T_VARIABLE","$p_options_list",1549],"[",["T_VARIABLE","$i",1549],"+",["T_LNUMBER","1",1549],"]",")",")",["T_WHITESPACE"," ",1549],"{",["T_WHITESPACE","\n              ",1549],["T_VARIABLE","$v_result_list",1550],"[",["T_VARIABLE","$p_options_list",1550],"[",["T_VARIABLE","$i",1550],"]","]","[",["T_LNUMBER","0",1550],"]",["T_WHITESPACE"," ",1550],"=",["T_WHITESPACE"," ",1550],["T_VARIABLE","$p_options_list",1550],"[",["T_VARIABLE","$i",1550],"+",["T_LNUMBER","1",1550],"]",";",["T_WHITESPACE","\n          ",1550],"}",["T_WHITESPACE","\n          ",1551],["T_ELSE","else",1552],["T_WHITESPACE"," ",1552],["T_IF","if",1552],["T_WHITESPACE"," ",1552],"(",["T_STRING","is_array",1552],"(",["T_VARIABLE","$p_options_list",1552],"[",["T_VARIABLE","$i",1552],"+",["T_LNUMBER","1",1552],"]",")",")",["T_WHITESPACE"," ",1552],"{",["T_WHITESPACE","\n              ",1552],["T_VARIABLE","$v_result_list",1553],"[",["T_VARIABLE","$p_options_list",1553],"[",["T_VARIABLE","$i",1553],"]","]",["T_WHITESPACE"," ",1553],"=",["T_WHITESPACE"," ",1553],["T_VARIABLE","$p_options_list",1553],"[",["T_VARIABLE","$i",1553],"+",["T_LNUMBER","1",1553],"]",";",["T_WHITESPACE","\n          ",1553],"}",["T_WHITESPACE","\n          ",1554],["T_ELSE","else",1555],["T_WHITESPACE"," ",1555],"{",["T_WHITESPACE","\n            ",1555],["T_COMMENT","\/\/ ----- Error log\n",1556],["T_WHITESPACE","            ",1557],["T_STRING","PclZip",1557],["T_DOUBLE_COLON","::",1557],["T_STRING","privErrorLog",1557],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1557],",",["T_WHITESPACE"," ",1557],["T_CONSTANT_ENCAPSED_STRING","\"Wrong parameter value for option '\"",1557],".",["T_STRING","PclZipUtilOptionText",1557],"(",["T_VARIABLE","$p_options_list",1557],"[",["T_VARIABLE","$i",1557],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1557],")",";",["T_WHITESPACE","\n\n            ",1557],["T_COMMENT","\/\/ ----- Return\n",1559],["T_WHITESPACE","            ",1560],["T_RETURN","return",1560],["T_WHITESPACE"," ",1560],["T_STRING","PclZip",1560],["T_DOUBLE_COLON","::",1560],["T_STRING","errorCode",1560],"(",")",";",["T_WHITESPACE","\n          ",1560],"}",["T_WHITESPACE","\n          ",1561],["T_VARIABLE","$i",1562],["T_INC","++",1562],";",["T_WHITESPACE","\n        ",1562],["T_BREAK","break",1563],";",["T_WHITESPACE","\n\n        ",1563],["T_COMMENT","\/\/ ----- Look for options that request an EREG or PREG expression\n",1565],["T_WHITESPACE","        ",1566],["T_CASE","case",1566],["T_WHITESPACE"," ",1566],["T_STRING","PCLZIP_OPT_BY_EREG",1566],["T_WHITESPACE"," ",1566],":",["T_WHITESPACE","\n          ",1566],["T_COMMENT","\/\/ ereg() is deprecated starting with PHP 5.3. Move PCLZIP_OPT_BY_EREG\n",1567],["T_WHITESPACE","          ",1568],["T_COMMENT","\/\/ to PCLZIP_OPT_BY_PREG\n",1568],["T_WHITESPACE","          ",1569],["T_VARIABLE","$p_options_list",1569],"[",["T_VARIABLE","$i",1569],"]",["T_WHITESPACE"," ",1569],"=",["T_WHITESPACE"," ",1569],["T_STRING","PCLZIP_OPT_BY_PREG",1569],";",["T_WHITESPACE","\n        ",1569],["T_CASE","case",1570],["T_WHITESPACE"," ",1570],["T_STRING","PCLZIP_OPT_BY_PREG",1570],["T_WHITESPACE"," ",1570],":",["T_WHITESPACE","\n        ",1570],["T_COMMENT","\/\/case PCLZIP_OPT_CRYPT :\n",1571],["T_WHITESPACE","          ",1572],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1572],["T_WHITESPACE","          ",1573],["T_IF","if",1573],["T_WHITESPACE"," ",1573],"(","(",["T_VARIABLE","$i",1573],"+",["T_LNUMBER","1",1573],")",["T_WHITESPACE"," ",1573],["T_IS_GREATER_OR_EQUAL",">=",1573],["T_WHITESPACE"," ",1573],["T_VARIABLE","$p_size",1573],")",["T_WHITESPACE"," ",1573],"{",["T_WHITESPACE","\n            ",1573],["T_COMMENT","\/\/ ----- Error log\n",1574],["T_WHITESPACE","            ",1575],["T_STRING","PclZip",1575],["T_DOUBLE_COLON","::",1575],["T_STRING","privErrorLog",1575],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1575],",",["T_WHITESPACE"," ",1575],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1575],".",["T_STRING","PclZipUtilOptionText",1575],"(",["T_VARIABLE","$p_options_list",1575],"[",["T_VARIABLE","$i",1575],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1575],")",";",["T_WHITESPACE","\n\n            ",1575],["T_COMMENT","\/\/ ----- Return\n",1577],["T_WHITESPACE","            ",1578],["T_RETURN","return",1578],["T_WHITESPACE"," ",1578],["T_STRING","PclZip",1578],["T_DOUBLE_COLON","::",1578],["T_STRING","errorCode",1578],"(",")",";",["T_WHITESPACE","\n          ",1578],"}",["T_WHITESPACE","\n\n          ",1579],["T_COMMENT","\/\/ ----- Get the value\n",1581],["T_WHITESPACE","          ",1582],["T_IF","if",1582],["T_WHITESPACE"," ",1582],"(",["T_STRING","is_string",1582],"(",["T_VARIABLE","$p_options_list",1582],"[",["T_VARIABLE","$i",1582],"+",["T_LNUMBER","1",1582],"]",")",")",["T_WHITESPACE"," ",1582],"{",["T_WHITESPACE","\n              ",1582],["T_VARIABLE","$v_result_list",1583],"[",["T_VARIABLE","$p_options_list",1583],"[",["T_VARIABLE","$i",1583],"]","]",["T_WHITESPACE"," ",1583],"=",["T_WHITESPACE"," ",1583],["T_VARIABLE","$p_options_list",1583],"[",["T_VARIABLE","$i",1583],"+",["T_LNUMBER","1",1583],"]",";",["T_WHITESPACE","\n          ",1583],"}",["T_WHITESPACE","\n          ",1584],["T_ELSE","else",1585],["T_WHITESPACE"," ",1585],"{",["T_WHITESPACE","\n            ",1585],["T_COMMENT","\/\/ ----- Error log\n",1586],["T_WHITESPACE","            ",1587],["T_STRING","PclZip",1587],["T_DOUBLE_COLON","::",1587],["T_STRING","privErrorLog",1587],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1587],",",["T_WHITESPACE"," ",1587],["T_CONSTANT_ENCAPSED_STRING","\"Wrong parameter value for option '\"",1587],".",["T_STRING","PclZipUtilOptionText",1587],"(",["T_VARIABLE","$p_options_list",1587],"[",["T_VARIABLE","$i",1587],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1587],")",";",["T_WHITESPACE","\n\n            ",1587],["T_COMMENT","\/\/ ----- Return\n",1589],["T_WHITESPACE","            ",1590],["T_RETURN","return",1590],["T_WHITESPACE"," ",1590],["T_STRING","PclZip",1590],["T_DOUBLE_COLON","::",1590],["T_STRING","errorCode",1590],"(",")",";",["T_WHITESPACE","\n          ",1590],"}",["T_WHITESPACE","\n          ",1591],["T_VARIABLE","$i",1592],["T_INC","++",1592],";",["T_WHITESPACE","\n        ",1592],["T_BREAK","break",1593],";",["T_WHITESPACE","\n\n        ",1593],["T_COMMENT","\/\/ ----- Look for options that takes a string\n",1595],["T_WHITESPACE","        ",1596],["T_CASE","case",1596],["T_WHITESPACE"," ",1596],["T_STRING","PCLZIP_OPT_COMMENT",1596],["T_WHITESPACE"," ",1596],":",["T_WHITESPACE","\n        ",1596],["T_CASE","case",1597],["T_WHITESPACE"," ",1597],["T_STRING","PCLZIP_OPT_ADD_COMMENT",1597],["T_WHITESPACE"," ",1597],":",["T_WHITESPACE","\n        ",1597],["T_CASE","case",1598],["T_WHITESPACE"," ",1598],["T_STRING","PCLZIP_OPT_PREPEND_COMMENT",1598],["T_WHITESPACE"," ",1598],":",["T_WHITESPACE","\n          ",1598],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1599],["T_WHITESPACE","          ",1600],["T_IF","if",1600],["T_WHITESPACE"," ",1600],"(","(",["T_VARIABLE","$i",1600],"+",["T_LNUMBER","1",1600],")",["T_WHITESPACE"," ",1600],["T_IS_GREATER_OR_EQUAL",">=",1600],["T_WHITESPACE"," ",1600],["T_VARIABLE","$p_size",1600],")",["T_WHITESPACE"," ",1600],"{",["T_WHITESPACE","\n            ",1600],["T_COMMENT","\/\/ ----- Error log\n",1601],["T_WHITESPACE","            ",1602],["T_STRING","PclZip",1602],["T_DOUBLE_COLON","::",1602],["T_STRING","privErrorLog",1602],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1602],",",["T_WHITESPACE","\n\t\t\t                     ",1602],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1603],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",1603],".",["T_STRING","PclZipUtilOptionText",1604],"(",["T_VARIABLE","$p_options_list",1604],"[",["T_VARIABLE","$i",1604],"]",")",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",1604],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1605],")",";",["T_WHITESPACE","\n\n            ",1605],["T_COMMENT","\/\/ ----- Return\n",1607],["T_WHITESPACE","            ",1608],["T_RETURN","return",1608],["T_WHITESPACE"," ",1608],["T_STRING","PclZip",1608],["T_DOUBLE_COLON","::",1608],["T_STRING","errorCode",1608],"(",")",";",["T_WHITESPACE","\n          ",1608],"}",["T_WHITESPACE","\n\n          ",1609],["T_COMMENT","\/\/ ----- Get the value\n",1611],["T_WHITESPACE","          ",1612],["T_IF","if",1612],["T_WHITESPACE"," ",1612],"(",["T_STRING","is_string",1612],"(",["T_VARIABLE","$p_options_list",1612],"[",["T_VARIABLE","$i",1612],"+",["T_LNUMBER","1",1612],"]",")",")",["T_WHITESPACE"," ",1612],"{",["T_WHITESPACE","\n              ",1612],["T_VARIABLE","$v_result_list",1613],"[",["T_VARIABLE","$p_options_list",1613],"[",["T_VARIABLE","$i",1613],"]","]",["T_WHITESPACE"," ",1613],"=",["T_WHITESPACE"," ",1613],["T_VARIABLE","$p_options_list",1613],"[",["T_VARIABLE","$i",1613],"+",["T_LNUMBER","1",1613],"]",";",["T_WHITESPACE","\n          ",1613],"}",["T_WHITESPACE","\n          ",1614],["T_ELSE","else",1615],["T_WHITESPACE"," ",1615],"{",["T_WHITESPACE","\n            ",1615],["T_COMMENT","\/\/ ----- Error log\n",1616],["T_WHITESPACE","            ",1617],["T_STRING","PclZip",1617],["T_DOUBLE_COLON","::",1617],["T_STRING","privErrorLog",1617],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1617],",",["T_WHITESPACE","\n\t\t\t                     ",1617],["T_CONSTANT_ENCAPSED_STRING","\"Wrong parameter value for option '\"",1618],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",1618],".",["T_STRING","PclZipUtilOptionText",1619],"(",["T_VARIABLE","$p_options_list",1619],"[",["T_VARIABLE","$i",1619],"]",")",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",1619],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1620],")",";",["T_WHITESPACE","\n\n            ",1620],["T_COMMENT","\/\/ ----- Return\n",1622],["T_WHITESPACE","            ",1623],["T_RETURN","return",1623],["T_WHITESPACE"," ",1623],["T_STRING","PclZip",1623],["T_DOUBLE_COLON","::",1623],["T_STRING","errorCode",1623],"(",")",";",["T_WHITESPACE","\n          ",1623],"}",["T_WHITESPACE","\n          ",1624],["T_VARIABLE","$i",1625],["T_INC","++",1625],";",["T_WHITESPACE","\n        ",1625],["T_BREAK","break",1626],";",["T_WHITESPACE","\n\n        ",1626],["T_COMMENT","\/\/ ----- Look for options that request an array of index\n",1628],["T_WHITESPACE","        ",1629],["T_CASE","case",1629],["T_WHITESPACE"," ",1629],["T_STRING","PCLZIP_OPT_BY_INDEX",1629],["T_WHITESPACE"," ",1629],":",["T_WHITESPACE","\n          ",1629],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1630],["T_WHITESPACE","          ",1631],["T_IF","if",1631],["T_WHITESPACE"," ",1631],"(","(",["T_VARIABLE","$i",1631],"+",["T_LNUMBER","1",1631],")",["T_WHITESPACE"," ",1631],["T_IS_GREATER_OR_EQUAL",">=",1631],["T_WHITESPACE"," ",1631],["T_VARIABLE","$p_size",1631],")",["T_WHITESPACE"," ",1631],"{",["T_WHITESPACE","\n            ",1631],["T_COMMENT","\/\/ ----- Error log\n",1632],["T_WHITESPACE","            ",1633],["T_STRING","PclZip",1633],["T_DOUBLE_COLON","::",1633],["T_STRING","privErrorLog",1633],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1633],",",["T_WHITESPACE"," ",1633],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1633],".",["T_STRING","PclZipUtilOptionText",1633],"(",["T_VARIABLE","$p_options_list",1633],"[",["T_VARIABLE","$i",1633],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1633],")",";",["T_WHITESPACE","\n\n            ",1633],["T_COMMENT","\/\/ ----- Return\n",1635],["T_WHITESPACE","            ",1636],["T_RETURN","return",1636],["T_WHITESPACE"," ",1636],["T_STRING","PclZip",1636],["T_DOUBLE_COLON","::",1636],["T_STRING","errorCode",1636],"(",")",";",["T_WHITESPACE","\n          ",1636],"}",["T_WHITESPACE","\n\n          ",1637],["T_COMMENT","\/\/ ----- Get the value\n",1639],["T_WHITESPACE","          ",1640],["T_VARIABLE","$v_work_list",1640],["T_WHITESPACE"," ",1640],"=",["T_WHITESPACE"," ",1640],["T_ARRAY","array",1640],"(",")",";",["T_WHITESPACE","\n          ",1640],["T_IF","if",1641],["T_WHITESPACE"," ",1641],"(",["T_STRING","is_string",1641],"(",["T_VARIABLE","$p_options_list",1641],"[",["T_VARIABLE","$i",1641],"+",["T_LNUMBER","1",1641],"]",")",")",["T_WHITESPACE"," ",1641],"{",["T_WHITESPACE","\n\n              ",1641],["T_COMMENT","\/\/ ----- Remove spaces\n",1643],["T_WHITESPACE","              ",1644],["T_VARIABLE","$p_options_list",1644],"[",["T_VARIABLE","$i",1644],"+",["T_LNUMBER","1",1644],"]",["T_WHITESPACE"," ",1644],"=",["T_WHITESPACE"," ",1644],["T_STRING","strtr",1644],"(",["T_VARIABLE","$p_options_list",1644],"[",["T_VARIABLE","$i",1644],"+",["T_LNUMBER","1",1644],"]",",",["T_WHITESPACE"," ",1644],["T_CONSTANT_ENCAPSED_STRING","' '",1644],",",["T_WHITESPACE"," ",1644],["T_CONSTANT_ENCAPSED_STRING","''",1644],")",";",["T_WHITESPACE","\n\n              ",1644],["T_COMMENT","\/\/ ----- Parse items\n",1646],["T_WHITESPACE","              ",1647],["T_VARIABLE","$v_work_list",1647],["T_WHITESPACE"," ",1647],"=",["T_WHITESPACE"," ",1647],["T_STRING","explode",1647],"(",["T_CONSTANT_ENCAPSED_STRING","\",\"",1647],",",["T_WHITESPACE"," ",1647],["T_VARIABLE","$p_options_list",1647],"[",["T_VARIABLE","$i",1647],"+",["T_LNUMBER","1",1647],"]",")",";",["T_WHITESPACE","\n          ",1647],"}",["T_WHITESPACE","\n          ",1648],["T_ELSE","else",1649],["T_WHITESPACE"," ",1649],["T_IF","if",1649],["T_WHITESPACE"," ",1649],"(",["T_STRING","is_integer",1649],"(",["T_VARIABLE","$p_options_list",1649],"[",["T_VARIABLE","$i",1649],"+",["T_LNUMBER","1",1649],"]",")",")",["T_WHITESPACE"," ",1649],"{",["T_WHITESPACE","\n              ",1649],["T_VARIABLE","$v_work_list",1650],"[",["T_LNUMBER","0",1650],"]",["T_WHITESPACE"," ",1650],"=",["T_WHITESPACE"," ",1650],["T_VARIABLE","$p_options_list",1650],"[",["T_VARIABLE","$i",1650],"+",["T_LNUMBER","1",1650],"]",".",["T_CONSTANT_ENCAPSED_STRING","'-'",1650],".",["T_VARIABLE","$p_options_list",1650],"[",["T_VARIABLE","$i",1650],"+",["T_LNUMBER","1",1650],"]",";",["T_WHITESPACE","\n          ",1650],"}",["T_WHITESPACE","\n          ",1651],["T_ELSE","else",1652],["T_WHITESPACE"," ",1652],["T_IF","if",1652],["T_WHITESPACE"," ",1652],"(",["T_STRING","is_array",1652],"(",["T_VARIABLE","$p_options_list",1652],"[",["T_VARIABLE","$i",1652],"+",["T_LNUMBER","1",1652],"]",")",")",["T_WHITESPACE"," ",1652],"{",["T_WHITESPACE","\n              ",1652],["T_VARIABLE","$v_work_list",1653],["T_WHITESPACE"," ",1653],"=",["T_WHITESPACE"," ",1653],["T_VARIABLE","$p_options_list",1653],"[",["T_VARIABLE","$i",1653],"+",["T_LNUMBER","1",1653],"]",";",["T_WHITESPACE","\n          ",1653],"}",["T_WHITESPACE","\n          ",1654],["T_ELSE","else",1655],["T_WHITESPACE"," ",1655],"{",["T_WHITESPACE","\n            ",1655],["T_COMMENT","\/\/ ----- Error log\n",1656],["T_WHITESPACE","            ",1657],["T_STRING","PclZip",1657],["T_DOUBLE_COLON","::",1657],["T_STRING","privErrorLog",1657],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1657],",",["T_WHITESPACE"," ",1657],["T_CONSTANT_ENCAPSED_STRING","\"Value must be integer, string or array for option '\"",1657],".",["T_STRING","PclZipUtilOptionText",1657],"(",["T_VARIABLE","$p_options_list",1657],"[",["T_VARIABLE","$i",1657],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1657],")",";",["T_WHITESPACE","\n\n            ",1657],["T_COMMENT","\/\/ ----- Return\n",1659],["T_WHITESPACE","            ",1660],["T_RETURN","return",1660],["T_WHITESPACE"," ",1660],["T_STRING","PclZip",1660],["T_DOUBLE_COLON","::",1660],["T_STRING","errorCode",1660],"(",")",";",["T_WHITESPACE","\n          ",1660],"}",["T_WHITESPACE","\n\n          ",1661],["T_COMMENT","\/\/ ----- Reduce the index list\n",1663],["T_WHITESPACE","          ",1664],["T_COMMENT","\/\/ each index item in the list must be a couple with a start and\n",1664],["T_WHITESPACE","          ",1665],["T_COMMENT","\/\/ an end value : [0,3], [5-5], [8-10], ...\n",1665],["T_WHITESPACE","          ",1666],["T_COMMENT","\/\/ ----- Check the format of each item\n",1666],["T_WHITESPACE","          ",1667],["T_VARIABLE","$v_sort_flag",1667],"=",["T_STRING","false",1667],";",["T_WHITESPACE","\n          ",1667],["T_VARIABLE","$v_sort_value",1668],"=",["T_LNUMBER","0",1668],";",["T_WHITESPACE","\n          ",1668],["T_FOR","for",1669],["T_WHITESPACE"," ",1669],"(",["T_VARIABLE","$j",1669],"=",["T_LNUMBER","0",1669],";",["T_WHITESPACE"," ",1669],["T_VARIABLE","$j",1669],"<",["T_STRING","sizeof",1669],"(",["T_VARIABLE","$v_work_list",1669],")",";",["T_WHITESPACE"," ",1669],["T_VARIABLE","$j",1669],["T_INC","++",1669],")",["T_WHITESPACE"," ",1669],"{",["T_WHITESPACE","\n              ",1669],["T_COMMENT","\/\/ ----- Explode the item\n",1670],["T_WHITESPACE","              ",1671],["T_VARIABLE","$v_item_list",1671],["T_WHITESPACE"," ",1671],"=",["T_WHITESPACE"," ",1671],["T_STRING","explode",1671],"(",["T_CONSTANT_ENCAPSED_STRING","\"-\"",1671],",",["T_WHITESPACE"," ",1671],["T_VARIABLE","$v_work_list",1671],"[",["T_VARIABLE","$j",1671],"]",")",";",["T_WHITESPACE","\n              ",1671],["T_VARIABLE","$v_size_item_list",1672],["T_WHITESPACE"," ",1672],"=",["T_WHITESPACE"," ",1672],["T_STRING","sizeof",1672],"(",["T_VARIABLE","$v_item_list",1672],")",";",["T_WHITESPACE","\n\n              ",1672],["T_COMMENT","\/\/ ----- TBC : Here we might check that each item is a\n",1674],["T_WHITESPACE","              ",1675],["T_COMMENT","\/\/ real integer ...\n",1675],["T_WHITESPACE","\n              ",1676],["T_COMMENT","\/\/ ----- Look for single value\n",1677],["T_WHITESPACE","              ",1678],["T_IF","if",1678],["T_WHITESPACE"," ",1678],"(",["T_VARIABLE","$v_size_item_list",1678],["T_WHITESPACE"," ",1678],["T_IS_EQUAL","==",1678],["T_WHITESPACE"," ",1678],["T_LNUMBER","1",1678],")",["T_WHITESPACE"," ",1678],"{",["T_WHITESPACE","\n                  ",1678],["T_COMMENT","\/\/ ----- Set the option value\n",1679],["T_WHITESPACE","                  ",1680],["T_VARIABLE","$v_result_list",1680],"[",["T_VARIABLE","$p_options_list",1680],"[",["T_VARIABLE","$i",1680],"]","]","[",["T_VARIABLE","$j",1680],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",1680],"]",["T_WHITESPACE"," ",1680],"=",["T_WHITESPACE"," ",1680],["T_VARIABLE","$v_item_list",1680],"[",["T_LNUMBER","0",1680],"]",";",["T_WHITESPACE","\n                  ",1680],["T_VARIABLE","$v_result_list",1681],"[",["T_VARIABLE","$p_options_list",1681],"[",["T_VARIABLE","$i",1681],"]","]","[",["T_VARIABLE","$j",1681],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",1681],"]",["T_WHITESPACE"," ",1681],"=",["T_WHITESPACE"," ",1681],["T_VARIABLE","$v_item_list",1681],"[",["T_LNUMBER","0",1681],"]",";",["T_WHITESPACE","\n              ",1681],"}",["T_WHITESPACE","\n              ",1682],["T_ELSEIF","elseif",1683],["T_WHITESPACE"," ",1683],"(",["T_VARIABLE","$v_size_item_list",1683],["T_WHITESPACE"," ",1683],["T_IS_EQUAL","==",1683],["T_WHITESPACE"," ",1683],["T_LNUMBER","2",1683],")",["T_WHITESPACE"," ",1683],"{",["T_WHITESPACE","\n                  ",1683],["T_COMMENT","\/\/ ----- Set the option value\n",1684],["T_WHITESPACE","                  ",1685],["T_VARIABLE","$v_result_list",1685],"[",["T_VARIABLE","$p_options_list",1685],"[",["T_VARIABLE","$i",1685],"]","]","[",["T_VARIABLE","$j",1685],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",1685],"]",["T_WHITESPACE"," ",1685],"=",["T_WHITESPACE"," ",1685],["T_VARIABLE","$v_item_list",1685],"[",["T_LNUMBER","0",1685],"]",";",["T_WHITESPACE","\n                  ",1685],["T_VARIABLE","$v_result_list",1686],"[",["T_VARIABLE","$p_options_list",1686],"[",["T_VARIABLE","$i",1686],"]","]","[",["T_VARIABLE","$j",1686],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",1686],"]",["T_WHITESPACE"," ",1686],"=",["T_WHITESPACE"," ",1686],["T_VARIABLE","$v_item_list",1686],"[",["T_LNUMBER","1",1686],"]",";",["T_WHITESPACE","\n              ",1686],"}",["T_WHITESPACE","\n              ",1687],["T_ELSE","else",1688],["T_WHITESPACE"," ",1688],"{",["T_WHITESPACE","\n                  ",1688],["T_COMMENT","\/\/ ----- Error log\n",1689],["T_WHITESPACE","                  ",1690],["T_STRING","PclZip",1690],["T_DOUBLE_COLON","::",1690],["T_STRING","privErrorLog",1690],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1690],",",["T_WHITESPACE"," ",1690],["T_CONSTANT_ENCAPSED_STRING","\"Too many values in index range for option '\"",1690],".",["T_STRING","PclZipUtilOptionText",1690],"(",["T_VARIABLE","$p_options_list",1690],"[",["T_VARIABLE","$i",1690],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1690],")",";",["T_WHITESPACE","\n\n                  ",1690],["T_COMMENT","\/\/ ----- Return\n",1692],["T_WHITESPACE","                  ",1693],["T_RETURN","return",1693],["T_WHITESPACE"," ",1693],["T_STRING","PclZip",1693],["T_DOUBLE_COLON","::",1693],["T_STRING","errorCode",1693],"(",")",";",["T_WHITESPACE","\n              ",1693],"}",["T_WHITESPACE","\n\n\n              ",1694],["T_COMMENT","\/\/ ----- Look for list sort\n",1697],["T_WHITESPACE","              ",1698],["T_IF","if",1698],["T_WHITESPACE"," ",1698],"(",["T_VARIABLE","$v_result_list",1698],"[",["T_VARIABLE","$p_options_list",1698],"[",["T_VARIABLE","$i",1698],"]","]","[",["T_VARIABLE","$j",1698],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",1698],"]",["T_WHITESPACE"," ",1698],"<",["T_WHITESPACE"," ",1698],["T_VARIABLE","$v_sort_value",1698],")",["T_WHITESPACE"," ",1698],"{",["T_WHITESPACE","\n                  ",1698],["T_VARIABLE","$v_sort_flag",1699],"=",["T_STRING","true",1699],";",["T_WHITESPACE","\n\n                  ",1699],["T_COMMENT","\/\/ ----- TBC : An automatic sort should be writen ...\n",1701],["T_WHITESPACE","                  ",1702],["T_COMMENT","\/\/ ----- Error log\n",1702],["T_WHITESPACE","                  ",1703],["T_STRING","PclZip",1703],["T_DOUBLE_COLON","::",1703],["T_STRING","privErrorLog",1703],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1703],",",["T_WHITESPACE"," ",1703],["T_CONSTANT_ENCAPSED_STRING","\"Invalid order of index range for option '\"",1703],".",["T_STRING","PclZipUtilOptionText",1703],"(",["T_VARIABLE","$p_options_list",1703],"[",["T_VARIABLE","$i",1703],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1703],")",";",["T_WHITESPACE","\n\n                  ",1703],["T_COMMENT","\/\/ ----- Return\n",1705],["T_WHITESPACE","                  ",1706],["T_RETURN","return",1706],["T_WHITESPACE"," ",1706],["T_STRING","PclZip",1706],["T_DOUBLE_COLON","::",1706],["T_STRING","errorCode",1706],"(",")",";",["T_WHITESPACE","\n              ",1706],"}",["T_WHITESPACE","\n              ",1707],["T_VARIABLE","$v_sort_value",1708],["T_WHITESPACE"," ",1708],"=",["T_WHITESPACE"," ",1708],["T_VARIABLE","$v_result_list",1708],"[",["T_VARIABLE","$p_options_list",1708],"[",["T_VARIABLE","$i",1708],"]","]","[",["T_VARIABLE","$j",1708],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",1708],"]",";",["T_WHITESPACE","\n          ",1708],"}",["T_WHITESPACE","\n\n          ",1709],["T_COMMENT","\/\/ ----- Sort the items\n",1711],["T_WHITESPACE","          ",1712],["T_IF","if",1712],["T_WHITESPACE"," ",1712],"(",["T_VARIABLE","$v_sort_flag",1712],")",["T_WHITESPACE"," ",1712],"{",["T_WHITESPACE","\n              ",1712],["T_COMMENT","\/\/ TBC : To Be Completed\n",1713],["T_WHITESPACE","          ",1714],"}",["T_WHITESPACE","\n\n          ",1714],["T_COMMENT","\/\/ ----- Next option\n",1716],["T_WHITESPACE","          ",1717],["T_VARIABLE","$i",1717],["T_INC","++",1717],";",["T_WHITESPACE","\n        ",1717],["T_BREAK","break",1718],";",["T_WHITESPACE","\n\n        ",1718],["T_COMMENT","\/\/ ----- Look for options that request no value\n",1720],["T_WHITESPACE","        ",1721],["T_CASE","case",1721],["T_WHITESPACE"," ",1721],["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",1721],["T_WHITESPACE"," ",1721],":",["T_WHITESPACE","\n        ",1721],["T_CASE","case",1722],["T_WHITESPACE"," ",1722],["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",1722],["T_WHITESPACE"," ",1722],":",["T_WHITESPACE","\n        ",1722],["T_CASE","case",1723],["T_WHITESPACE"," ",1723],["T_STRING","PCLZIP_OPT_NO_COMPRESSION",1723],["T_WHITESPACE"," ",1723],":",["T_WHITESPACE","\n        ",1723],["T_CASE","case",1724],["T_WHITESPACE"," ",1724],["T_STRING","PCLZIP_OPT_EXTRACT_IN_OUTPUT",1724],["T_WHITESPACE"," ",1724],":",["T_WHITESPACE","\n        ",1724],["T_CASE","case",1725],["T_WHITESPACE"," ",1725],["T_STRING","PCLZIP_OPT_REPLACE_NEWER",1725],["T_WHITESPACE"," ",1725],":",["T_WHITESPACE","\n        ",1725],["T_CASE","case",1726],["T_WHITESPACE"," ",1726],["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",1726],["T_WHITESPACE"," ",1726],":",["T_WHITESPACE","\n          ",1726],["T_VARIABLE","$v_result_list",1727],"[",["T_VARIABLE","$p_options_list",1727],"[",["T_VARIABLE","$i",1727],"]","]",["T_WHITESPACE"," ",1727],"=",["T_WHITESPACE"," ",1727],["T_STRING","true",1727],";",["T_WHITESPACE","\n        ",1727],["T_BREAK","break",1728],";",["T_WHITESPACE","\n\n        ",1728],["T_COMMENT","\/\/ ----- Look for options that request an octal value\n",1730],["T_WHITESPACE","        ",1731],["T_CASE","case",1731],["T_WHITESPACE"," ",1731],["T_STRING","PCLZIP_OPT_SET_CHMOD",1731],["T_WHITESPACE"," ",1731],":",["T_WHITESPACE","\n          ",1731],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1732],["T_WHITESPACE","          ",1733],["T_IF","if",1733],["T_WHITESPACE"," ",1733],"(","(",["T_VARIABLE","$i",1733],"+",["T_LNUMBER","1",1733],")",["T_WHITESPACE"," ",1733],["T_IS_GREATER_OR_EQUAL",">=",1733],["T_WHITESPACE"," ",1733],["T_VARIABLE","$p_size",1733],")",["T_WHITESPACE"," ",1733],"{",["T_WHITESPACE","\n            ",1733],["T_COMMENT","\/\/ ----- Error log\n",1734],["T_WHITESPACE","            ",1735],["T_STRING","PclZip",1735],["T_DOUBLE_COLON","::",1735],["T_STRING","privErrorLog",1735],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1735],",",["T_WHITESPACE"," ",1735],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1735],".",["T_STRING","PclZipUtilOptionText",1735],"(",["T_VARIABLE","$p_options_list",1735],"[",["T_VARIABLE","$i",1735],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1735],")",";",["T_WHITESPACE","\n\n            ",1735],["T_COMMENT","\/\/ ----- Return\n",1737],["T_WHITESPACE","            ",1738],["T_RETURN","return",1738],["T_WHITESPACE"," ",1738],["T_STRING","PclZip",1738],["T_DOUBLE_COLON","::",1738],["T_STRING","errorCode",1738],"(",")",";",["T_WHITESPACE","\n          ",1738],"}",["T_WHITESPACE","\n\n          ",1739],["T_COMMENT","\/\/ ----- Get the value\n",1741],["T_WHITESPACE","          ",1742],["T_VARIABLE","$v_result_list",1742],"[",["T_VARIABLE","$p_options_list",1742],"[",["T_VARIABLE","$i",1742],"]","]",["T_WHITESPACE"," ",1742],"=",["T_WHITESPACE"," ",1742],["T_VARIABLE","$p_options_list",1742],"[",["T_VARIABLE","$i",1742],"+",["T_LNUMBER","1",1742],"]",";",["T_WHITESPACE","\n          ",1742],["T_VARIABLE","$i",1743],["T_INC","++",1743],";",["T_WHITESPACE","\n        ",1743],["T_BREAK","break",1744],";",["T_WHITESPACE","\n\n        ",1744],["T_COMMENT","\/\/ ----- Look for options that request a call-back\n",1746],["T_WHITESPACE","        ",1747],["T_CASE","case",1747],["T_WHITESPACE"," ",1747],["T_STRING","PCLZIP_CB_PRE_EXTRACT",1747],["T_WHITESPACE"," ",1747],":",["T_WHITESPACE","\n        ",1747],["T_CASE","case",1748],["T_WHITESPACE"," ",1748],["T_STRING","PCLZIP_CB_POST_EXTRACT",1748],["T_WHITESPACE"," ",1748],":",["T_WHITESPACE","\n        ",1748],["T_CASE","case",1749],["T_WHITESPACE"," ",1749],["T_STRING","PCLZIP_CB_PRE_ADD",1749],["T_WHITESPACE"," ",1749],":",["T_WHITESPACE","\n        ",1749],["T_CASE","case",1750],["T_WHITESPACE"," ",1750],["T_STRING","PCLZIP_CB_POST_ADD",1750],["T_WHITESPACE"," ",1750],":",["T_WHITESPACE","\n        ",1750],["T_COMMENT","\/* for futur use\n        case PCLZIP_CB_PRE_DELETE :\n        case PCLZIP_CB_POST_DELETE :\n        case PCLZIP_CB_PRE_LIST :\n        case PCLZIP_CB_POST_LIST :\n        *\/",1751],["T_WHITESPACE","\n          ",1756],["T_COMMENT","\/\/ ----- Check the number of parameters\n",1757],["T_WHITESPACE","          ",1758],["T_IF","if",1758],["T_WHITESPACE"," ",1758],"(","(",["T_VARIABLE","$i",1758],"+",["T_LNUMBER","1",1758],")",["T_WHITESPACE"," ",1758],["T_IS_GREATER_OR_EQUAL",">=",1758],["T_WHITESPACE"," ",1758],["T_VARIABLE","$p_size",1758],")",["T_WHITESPACE"," ",1758],"{",["T_WHITESPACE","\n            ",1758],["T_COMMENT","\/\/ ----- Error log\n",1759],["T_WHITESPACE","            ",1760],["T_STRING","PclZip",1760],["T_DOUBLE_COLON","::",1760],["T_STRING","privErrorLog",1760],"(",["T_STRING","PCLZIP_ERR_MISSING_OPTION_VALUE",1760],",",["T_WHITESPACE"," ",1760],["T_CONSTANT_ENCAPSED_STRING","\"Missing parameter value for option '\"",1760],".",["T_STRING","PclZipUtilOptionText",1760],"(",["T_VARIABLE","$p_options_list",1760],"[",["T_VARIABLE","$i",1760],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1760],")",";",["T_WHITESPACE","\n\n            ",1760],["T_COMMENT","\/\/ ----- Return\n",1762],["T_WHITESPACE","            ",1763],["T_RETURN","return",1763],["T_WHITESPACE"," ",1763],["T_STRING","PclZip",1763],["T_DOUBLE_COLON","::",1763],["T_STRING","errorCode",1763],"(",")",";",["T_WHITESPACE","\n          ",1763],"}",["T_WHITESPACE","\n\n          ",1764],["T_COMMENT","\/\/ ----- Get the value\n",1766],["T_WHITESPACE","          ",1767],["T_VARIABLE","$v_function_name",1767],["T_WHITESPACE"," ",1767],"=",["T_WHITESPACE"," ",1767],["T_VARIABLE","$p_options_list",1767],"[",["T_VARIABLE","$i",1767],"+",["T_LNUMBER","1",1767],"]",";",["T_WHITESPACE","\n\n          ",1767],["T_COMMENT","\/\/ ----- Check that the value is a valid existing function\n",1769],["T_WHITESPACE","          ",1770],["T_IF","if",1770],["T_WHITESPACE"," ",1770],"(","!",["T_STRING","function_exists",1770],"(",["T_VARIABLE","$v_function_name",1770],")",")",["T_WHITESPACE"," ",1770],"{",["T_WHITESPACE","\n            ",1770],["T_COMMENT","\/\/ ----- Error log\n",1771],["T_WHITESPACE","            ",1772],["T_STRING","PclZip",1772],["T_DOUBLE_COLON","::",1772],["T_STRING","privErrorLog",1772],"(",["T_STRING","PCLZIP_ERR_INVALID_OPTION_VALUE",1772],",",["T_WHITESPACE"," ",1772],["T_CONSTANT_ENCAPSED_STRING","\"Function '\"",1772],".",["T_VARIABLE","$v_function_name",1772],".",["T_CONSTANT_ENCAPSED_STRING","\"()' is not an existing function for option '\"",1772],".",["T_STRING","PclZipUtilOptionText",1772],"(",["T_VARIABLE","$p_options_list",1772],"[",["T_VARIABLE","$i",1772],"]",")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1772],")",";",["T_WHITESPACE","\n\n            ",1772],["T_COMMENT","\/\/ ----- Return\n",1774],["T_WHITESPACE","            ",1775],["T_RETURN","return",1775],["T_WHITESPACE"," ",1775],["T_STRING","PclZip",1775],["T_DOUBLE_COLON","::",1775],["T_STRING","errorCode",1775],"(",")",";",["T_WHITESPACE","\n          ",1775],"}",["T_WHITESPACE","\n\n          ",1776],["T_COMMENT","\/\/ ----- Set the attribute\n",1778],["T_WHITESPACE","          ",1779],["T_VARIABLE","$v_result_list",1779],"[",["T_VARIABLE","$p_options_list",1779],"[",["T_VARIABLE","$i",1779],"]","]",["T_WHITESPACE"," ",1779],"=",["T_WHITESPACE"," ",1779],["T_VARIABLE","$v_function_name",1779],";",["T_WHITESPACE","\n          ",1779],["T_VARIABLE","$i",1780],["T_INC","++",1780],";",["T_WHITESPACE","\n        ",1780],["T_BREAK","break",1781],";",["T_WHITESPACE","\n\n        ",1781],["T_DEFAULT","default",1783],["T_WHITESPACE"," ",1783],":",["T_WHITESPACE","\n          ",1783],["T_COMMENT","\/\/ ----- Error log\n",1784],["T_WHITESPACE","          ",1785],["T_STRING","PclZip",1785],["T_DOUBLE_COLON","::",1785],["T_STRING","privErrorLog",1785],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1785],",",["T_WHITESPACE","\n\t\t                       ",1785],["T_CONSTANT_ENCAPSED_STRING","\"Unknown parameter '\"",1786],["T_WHITESPACE","\n\t\t\t\t\t\t\t   ",1786],".",["T_VARIABLE","$p_options_list",1787],"[",["T_VARIABLE","$i",1787],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1787],")",";",["T_WHITESPACE","\n\n          ",1787],["T_COMMENT","\/\/ ----- Return\n",1789],["T_WHITESPACE","          ",1790],["T_RETURN","return",1790],["T_WHITESPACE"," ",1790],["T_STRING","PclZip",1790],["T_DOUBLE_COLON","::",1790],["T_STRING","errorCode",1790],"(",")",";",["T_WHITESPACE","\n      ",1790],"}",["T_WHITESPACE","\n\n      ",1791],["T_COMMENT","\/\/ ----- Next options\n",1793],["T_WHITESPACE","      ",1794],["T_VARIABLE","$i",1794],["T_INC","++",1794],";",["T_WHITESPACE","\n    ",1794],"}",["T_WHITESPACE","\n\n    ",1795],["T_COMMENT","\/\/ ----- Look for mandatory options\n",1797],["T_WHITESPACE","    ",1798],["T_IF","if",1798],["T_WHITESPACE"," ",1798],"(",["T_VARIABLE","$v_requested_options",1798],["T_WHITESPACE"," ",1798],["T_IS_NOT_IDENTICAL","!==",1798],["T_WHITESPACE"," ",1798],["T_STRING","false",1798],")",["T_WHITESPACE"," ",1798],"{",["T_WHITESPACE","\n      ",1798],["T_FOR","for",1799],["T_WHITESPACE"," ",1799],"(",["T_VARIABLE","$key",1799],"=",["T_STRING","reset",1799],"(",["T_VARIABLE","$v_requested_options",1799],")",";",["T_WHITESPACE"," ",1799],["T_VARIABLE","$key",1799],"=",["T_STRING","key",1799],"(",["T_VARIABLE","$v_requested_options",1799],")",";",["T_WHITESPACE"," ",1799],["T_VARIABLE","$key",1799],"=",["T_STRING","next",1799],"(",["T_VARIABLE","$v_requested_options",1799],")",")",["T_WHITESPACE"," ",1799],"{",["T_WHITESPACE","\n        ",1799],["T_COMMENT","\/\/ ----- Look for mandatory option\n",1800],["T_WHITESPACE","        ",1801],["T_IF","if",1801],["T_WHITESPACE"," ",1801],"(",["T_VARIABLE","$v_requested_options",1801],"[",["T_VARIABLE","$key",1801],"]",["T_WHITESPACE"," ",1801],["T_IS_EQUAL","==",1801],["T_WHITESPACE"," ",1801],["T_CONSTANT_ENCAPSED_STRING","'mandatory'",1801],")",["T_WHITESPACE"," ",1801],"{",["T_WHITESPACE","\n          ",1801],["T_COMMENT","\/\/ ----- Look if present\n",1802],["T_WHITESPACE","          ",1803],["T_IF","if",1803],["T_WHITESPACE"," ",1803],"(","!",["T_ISSET","isset",1803],"(",["T_VARIABLE","$v_result_list",1803],"[",["T_VARIABLE","$key",1803],"]",")",")",["T_WHITESPACE"," ",1803],"{",["T_WHITESPACE","\n            ",1803],["T_COMMENT","\/\/ ----- Error log\n",1804],["T_WHITESPACE","            ",1805],["T_STRING","PclZip",1805],["T_DOUBLE_COLON","::",1805],["T_STRING","privErrorLog",1805],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1805],",",["T_WHITESPACE"," ",1805],["T_CONSTANT_ENCAPSED_STRING","\"Missing mandatory parameter \"",1805],".",["T_STRING","PclZipUtilOptionText",1805],"(",["T_VARIABLE","$key",1805],")",".",["T_CONSTANT_ENCAPSED_STRING","\"(\"",1805],".",["T_VARIABLE","$key",1805],".",["T_CONSTANT_ENCAPSED_STRING","\")\"",1805],")",";",["T_WHITESPACE","\n\n            ",1805],["T_COMMENT","\/\/ ----- Return\n",1807],["T_WHITESPACE","            ",1808],["T_RETURN","return",1808],["T_WHITESPACE"," ",1808],["T_STRING","PclZip",1808],["T_DOUBLE_COLON","::",1808],["T_STRING","errorCode",1808],"(",")",";",["T_WHITESPACE","\n          ",1808],"}",["T_WHITESPACE","\n        ",1809],"}",["T_WHITESPACE","\n      ",1810],"}",["T_WHITESPACE","\n    ",1811],"}",["T_WHITESPACE","\n\n    ",1812],["T_COMMENT","\/\/ ----- Look for default values\n",1814],["T_WHITESPACE","    ",1815],["T_IF","if",1815],["T_WHITESPACE"," ",1815],"(","!",["T_ISSET","isset",1815],"(",["T_VARIABLE","$v_result_list",1815],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1815],"]",")",")",["T_WHITESPACE"," ",1815],"{",["T_WHITESPACE","\n\n    ",1815],"}",["T_WHITESPACE","\n\n    ",1817],["T_COMMENT","\/\/ ----- Return\n",1819],["T_WHITESPACE","    ",1820],["T_RETURN","return",1820],["T_WHITESPACE"," ",1820],["T_VARIABLE","$v_result",1820],";",["T_WHITESPACE","\n  ",1820],"}",["T_WHITESPACE","\n  ",1821],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1822],["T_WHITESPACE","\n  ",1823],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1824],["T_WHITESPACE","  ",1825],["T_COMMENT","\/\/ Function : privOptionDefaultThreshold()\n",1825],["T_WHITESPACE","  ",1826],["T_COMMENT","\/\/ Description :\n",1826],["T_WHITESPACE","  ",1827],["T_COMMENT","\/\/ Parameters :\n",1827],["T_WHITESPACE","  ",1828],["T_COMMENT","\/\/ Return Values :\n",1828],["T_WHITESPACE","  ",1829],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1829],["T_WHITESPACE","  ",1830],["T_FUNCTION","function",1830],["T_WHITESPACE"," ",1830],["T_STRING","privOptionDefaultThreshold",1830],"(","&",["T_VARIABLE","$p_options",1830],")",["T_WHITESPACE","\n  ",1830],"{",["T_WHITESPACE","\n    ",1831],["T_VARIABLE","$v_result",1832],"=",["T_LNUMBER","1",1832],";",["T_WHITESPACE","\n\n    ",1832],["T_IF","if",1834],["T_WHITESPACE"," ",1834],"(",["T_ISSET","isset",1834],"(",["T_VARIABLE","$p_options",1834],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1834],"]",")",["T_WHITESPACE","\n        ",1834],["T_BOOLEAN_OR","||",1835],["T_WHITESPACE"," ",1835],["T_ISSET","isset",1835],"(",["T_VARIABLE","$p_options",1835],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",1835],"]",")",")",["T_WHITESPACE"," ",1835],"{",["T_WHITESPACE","\n      ",1835],["T_RETURN","return",1836],["T_WHITESPACE"," ",1836],["T_VARIABLE","$v_result",1836],";",["T_WHITESPACE","\n    ",1836],"}",["T_WHITESPACE","\n\n    ",1837],["T_COMMENT","\/\/ ----- Get 'memory_limit' configuration value\n",1839],["T_WHITESPACE","    ",1840],["T_VARIABLE","$v_memory_limit",1840],["T_WHITESPACE"," ",1840],"=",["T_WHITESPACE"," ",1840],["T_STRING","ini_get",1840],"(",["T_CONSTANT_ENCAPSED_STRING","'memory_limit'",1840],")",";",["T_WHITESPACE","\n    ",1840],["T_VARIABLE","$v_memory_limit",1841],["T_WHITESPACE"," ",1841],"=",["T_WHITESPACE"," ",1841],["T_STRING","trim",1841],"(",["T_VARIABLE","$v_memory_limit",1841],")",";",["T_WHITESPACE","\n    ",1841],["T_VARIABLE","$v_memory_limit_int",1842],["T_WHITESPACE"," ",1842],"=",["T_WHITESPACE"," ",1842],["T_INT_CAST","(int)",1842],["T_WHITESPACE"," ",1842],["T_VARIABLE","$v_memory_limit",1842],";",["T_WHITESPACE","\n    ",1842],["T_VARIABLE","$last",1843],["T_WHITESPACE"," ",1843],"=",["T_WHITESPACE"," ",1843],["T_STRING","strtolower",1843],"(",["T_STRING","substr",1843],"(",["T_VARIABLE","$v_memory_limit",1843],",",["T_WHITESPACE"," ",1843],"-",["T_LNUMBER","1",1843],")",")",";",["T_WHITESPACE","\n\n    ",1843],["T_IF","if",1845],"(",["T_VARIABLE","$last",1845],["T_WHITESPACE"," ",1845],["T_IS_EQUAL","==",1845],["T_WHITESPACE"," ",1845],["T_CONSTANT_ENCAPSED_STRING","'g'",1845],")",["T_WHITESPACE","\n        ",1845],["T_COMMENT","\/\/$v_memory_limit_int = $v_memory_limit_int*1024*1024*1024;\n",1846],["T_WHITESPACE","        ",1847],["T_VARIABLE","$v_memory_limit_int",1847],["T_WHITESPACE"," ",1847],"=",["T_WHITESPACE"," ",1847],["T_VARIABLE","$v_memory_limit_int",1847],"*",["T_LNUMBER","1073741824",1847],";",["T_WHITESPACE","\n    ",1847],["T_IF","if",1848],"(",["T_VARIABLE","$last",1848],["T_WHITESPACE"," ",1848],["T_IS_EQUAL","==",1848],["T_WHITESPACE"," ",1848],["T_CONSTANT_ENCAPSED_STRING","'m'",1848],")",["T_WHITESPACE","\n        ",1848],["T_COMMENT","\/\/$v_memory_limit_int = $v_memory_limit_int*1024*1024;\n",1849],["T_WHITESPACE","        ",1850],["T_VARIABLE","$v_memory_limit_int",1850],["T_WHITESPACE"," ",1850],"=",["T_WHITESPACE"," ",1850],["T_VARIABLE","$v_memory_limit_int",1850],"*",["T_LNUMBER","1048576",1850],";",["T_WHITESPACE","\n    ",1850],["T_IF","if",1851],"(",["T_VARIABLE","$last",1851],["T_WHITESPACE"," ",1851],["T_IS_EQUAL","==",1851],["T_WHITESPACE"," ",1851],["T_CONSTANT_ENCAPSED_STRING","'k'",1851],")",["T_WHITESPACE","\n        ",1851],["T_VARIABLE","$v_memory_limit_int",1852],["T_WHITESPACE"," ",1852],"=",["T_WHITESPACE"," ",1852],["T_VARIABLE","$v_memory_limit_int",1852],"*",["T_LNUMBER","1024",1852],";",["T_WHITESPACE","\n\n    ",1852],["T_VARIABLE","$p_options",1854],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1854],"]",["T_WHITESPACE"," ",1854],"=",["T_WHITESPACE"," ",1854],["T_STRING","floor",1854],"(",["T_VARIABLE","$v_memory_limit_int",1854],"*",["T_STRING","PCLZIP_TEMPORARY_FILE_RATIO",1854],")",";",["T_WHITESPACE","\n\n\n    ",1854],["T_COMMENT","\/\/ ----- Sanity check : No threshold if value lower than 1M\n",1857],["T_WHITESPACE","    ",1858],["T_IF","if",1858],["T_WHITESPACE"," ",1858],"(",["T_VARIABLE","$p_options",1858],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1858],"]",["T_WHITESPACE"," ",1858],"<",["T_WHITESPACE"," ",1858],["T_LNUMBER","1048576",1858],")",["T_WHITESPACE"," ",1858],"{",["T_WHITESPACE","\n      ",1858],["T_UNSET","unset",1859],"(",["T_VARIABLE","$p_options",1859],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",1859],"]",")",";",["T_WHITESPACE","\n    ",1859],"}",["T_WHITESPACE","\n\n    ",1860],["T_COMMENT","\/\/ ----- Return\n",1862],["T_WHITESPACE","    ",1863],["T_RETURN","return",1863],["T_WHITESPACE"," ",1863],["T_VARIABLE","$v_result",1863],";",["T_WHITESPACE","\n  ",1863],"}",["T_WHITESPACE","\n  ",1864],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1865],["T_WHITESPACE","\n  ",1866],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1867],["T_WHITESPACE","  ",1868],["T_COMMENT","\/\/ Function : privFileDescrParseAtt()\n",1868],["T_WHITESPACE","  ",1869],["T_COMMENT","\/\/ Description :\n",1869],["T_WHITESPACE","  ",1870],["T_COMMENT","\/\/ Parameters :\n",1870],["T_WHITESPACE","  ",1871],["T_COMMENT","\/\/ Return Values :\n",1871],["T_WHITESPACE","  ",1872],["T_COMMENT","\/\/   1 on success.\n",1872],["T_WHITESPACE","  ",1873],["T_COMMENT","\/\/   0 on failure.\n",1873],["T_WHITESPACE","  ",1874],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1874],["T_WHITESPACE","  ",1875],["T_FUNCTION","function",1875],["T_WHITESPACE"," ",1875],["T_STRING","privFileDescrParseAtt",1875],"(","&",["T_VARIABLE","$p_file_list",1875],",",["T_WHITESPACE"," ",1875],"&",["T_VARIABLE","$p_filedescr",1875],",",["T_WHITESPACE"," ",1875],["T_VARIABLE","$v_options",1875],",",["T_WHITESPACE"," ",1875],["T_VARIABLE","$v_requested_options",1875],"=",["T_STRING","false",1875],")",["T_WHITESPACE","\n  ",1875],"{",["T_WHITESPACE","\n    ",1876],["T_VARIABLE","$v_result",1877],"=",["T_LNUMBER","1",1877],";",["T_WHITESPACE","\n\n    ",1877],["T_COMMENT","\/\/ ----- For each file in the list check the attributes\n",1879],["T_WHITESPACE","    ",1880],["T_FOREACH","foreach",1880],["T_WHITESPACE"," ",1880],"(",["T_VARIABLE","$p_file_list",1880],["T_WHITESPACE"," ",1880],["T_AS","as",1880],["T_WHITESPACE"," ",1880],["T_VARIABLE","$v_key",1880],["T_WHITESPACE"," ",1880],["T_DOUBLE_ARROW","=>",1880],["T_WHITESPACE"," ",1880],["T_VARIABLE","$v_value",1880],")",["T_WHITESPACE"," ",1880],"{",["T_WHITESPACE","\n\n      ",1880],["T_COMMENT","\/\/ ----- Check if the option is supported\n",1882],["T_WHITESPACE","      ",1883],["T_IF","if",1883],["T_WHITESPACE"," ",1883],"(","!",["T_ISSET","isset",1883],"(",["T_VARIABLE","$v_requested_options",1883],"[",["T_VARIABLE","$v_key",1883],"]",")",")",["T_WHITESPACE"," ",1883],"{",["T_WHITESPACE","\n        ",1883],["T_COMMENT","\/\/ ----- Error log\n",1884],["T_WHITESPACE","        ",1885],["T_STRING","PclZip",1885],["T_DOUBLE_COLON","::",1885],["T_STRING","privErrorLog",1885],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1885],",",["T_WHITESPACE"," ",1885],["T_CONSTANT_ENCAPSED_STRING","\"Invalid file attribute '\"",1885],".",["T_VARIABLE","$v_key",1885],".",["T_CONSTANT_ENCAPSED_STRING","\"' for this file\"",1885],")",";",["T_WHITESPACE","\n\n        ",1885],["T_COMMENT","\/\/ ----- Return\n",1887],["T_WHITESPACE","        ",1888],["T_RETURN","return",1888],["T_WHITESPACE"," ",1888],["T_STRING","PclZip",1888],["T_DOUBLE_COLON","::",1888],["T_STRING","errorCode",1888],"(",")",";",["T_WHITESPACE","\n      ",1888],"}",["T_WHITESPACE","\n\n      ",1889],["T_COMMENT","\/\/ ----- Look for attribute\n",1891],["T_WHITESPACE","      ",1892],["T_SWITCH","switch",1892],["T_WHITESPACE"," ",1892],"(",["T_VARIABLE","$v_key",1892],")",["T_WHITESPACE"," ",1892],"{",["T_WHITESPACE","\n        ",1892],["T_CASE","case",1893],["T_WHITESPACE"," ",1893],["T_STRING","PCLZIP_ATT_FILE_NAME",1893],["T_WHITESPACE"," ",1893],":",["T_WHITESPACE","\n          ",1893],["T_IF","if",1894],["T_WHITESPACE"," ",1894],"(","!",["T_STRING","is_string",1894],"(",["T_VARIABLE","$v_value",1894],")",")",["T_WHITESPACE"," ",1894],"{",["T_WHITESPACE","\n            ",1894],["T_STRING","PclZip",1895],["T_DOUBLE_COLON","::",1895],["T_STRING","privErrorLog",1895],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1895],",",["T_WHITESPACE"," ",1895],["T_CONSTANT_ENCAPSED_STRING","\"Invalid type \"",1895],".",["T_STRING","gettype",1895],"(",["T_VARIABLE","$v_value",1895],")",".",["T_CONSTANT_ENCAPSED_STRING","\". String expected for attribute '\"",1895],".",["T_STRING","PclZipUtilOptionText",1895],"(",["T_VARIABLE","$v_key",1895],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1895],")",";",["T_WHITESPACE","\n            ",1895],["T_RETURN","return",1896],["T_WHITESPACE"," ",1896],["T_STRING","PclZip",1896],["T_DOUBLE_COLON","::",1896],["T_STRING","errorCode",1896],"(",")",";",["T_WHITESPACE","\n          ",1896],"}",["T_WHITESPACE","\n\n          ",1897],["T_VARIABLE","$p_filedescr",1899],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",1899],"]",["T_WHITESPACE"," ",1899],"=",["T_WHITESPACE"," ",1899],["T_STRING","PclZipUtilPathReduction",1899],"(",["T_VARIABLE","$v_value",1899],")",";",["T_WHITESPACE","\n\n          ",1899],["T_IF","if",1901],["T_WHITESPACE"," ",1901],"(",["T_VARIABLE","$p_filedescr",1901],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",1901],"]",["T_WHITESPACE"," ",1901],["T_IS_EQUAL","==",1901],["T_WHITESPACE"," ",1901],["T_CONSTANT_ENCAPSED_STRING","''",1901],")",["T_WHITESPACE"," ",1901],"{",["T_WHITESPACE","\n            ",1901],["T_STRING","PclZip",1902],["T_DOUBLE_COLON","::",1902],["T_STRING","privErrorLog",1902],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1902],",",["T_WHITESPACE"," ",1902],["T_CONSTANT_ENCAPSED_STRING","\"Invalid empty filename for attribute '\"",1902],".",["T_STRING","PclZipUtilOptionText",1902],"(",["T_VARIABLE","$v_key",1902],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1902],")",";",["T_WHITESPACE","\n            ",1902],["T_RETURN","return",1903],["T_WHITESPACE"," ",1903],["T_STRING","PclZip",1903],["T_DOUBLE_COLON","::",1903],["T_STRING","errorCode",1903],"(",")",";",["T_WHITESPACE","\n          ",1903],"}",["T_WHITESPACE","\n\n        ",1904],["T_BREAK","break",1906],";",["T_WHITESPACE","\n\n        ",1906],["T_CASE","case",1908],["T_WHITESPACE"," ",1908],["T_STRING","PCLZIP_ATT_FILE_NEW_SHORT_NAME",1908],["T_WHITESPACE"," ",1908],":",["T_WHITESPACE","\n          ",1908],["T_IF","if",1909],["T_WHITESPACE"," ",1909],"(","!",["T_STRING","is_string",1909],"(",["T_VARIABLE","$v_value",1909],")",")",["T_WHITESPACE"," ",1909],"{",["T_WHITESPACE","\n            ",1909],["T_STRING","PclZip",1910],["T_DOUBLE_COLON","::",1910],["T_STRING","privErrorLog",1910],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1910],",",["T_WHITESPACE"," ",1910],["T_CONSTANT_ENCAPSED_STRING","\"Invalid type \"",1910],".",["T_STRING","gettype",1910],"(",["T_VARIABLE","$v_value",1910],")",".",["T_CONSTANT_ENCAPSED_STRING","\". String expected for attribute '\"",1910],".",["T_STRING","PclZipUtilOptionText",1910],"(",["T_VARIABLE","$v_key",1910],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1910],")",";",["T_WHITESPACE","\n            ",1910],["T_RETURN","return",1911],["T_WHITESPACE"," ",1911],["T_STRING","PclZip",1911],["T_DOUBLE_COLON","::",1911],["T_STRING","errorCode",1911],"(",")",";",["T_WHITESPACE","\n          ",1911],"}",["T_WHITESPACE","\n\n          ",1912],["T_VARIABLE","$p_filedescr",1914],"[",["T_CONSTANT_ENCAPSED_STRING","'new_short_name'",1914],"]",["T_WHITESPACE"," ",1914],"=",["T_WHITESPACE"," ",1914],["T_STRING","PclZipUtilPathReduction",1914],"(",["T_VARIABLE","$v_value",1914],")",";",["T_WHITESPACE","\n\n          ",1914],["T_IF","if",1916],["T_WHITESPACE"," ",1916],"(",["T_VARIABLE","$p_filedescr",1916],"[",["T_CONSTANT_ENCAPSED_STRING","'new_short_name'",1916],"]",["T_WHITESPACE"," ",1916],["T_IS_EQUAL","==",1916],["T_WHITESPACE"," ",1916],["T_CONSTANT_ENCAPSED_STRING","''",1916],")",["T_WHITESPACE"," ",1916],"{",["T_WHITESPACE","\n            ",1916],["T_STRING","PclZip",1917],["T_DOUBLE_COLON","::",1917],["T_STRING","privErrorLog",1917],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1917],",",["T_WHITESPACE"," ",1917],["T_CONSTANT_ENCAPSED_STRING","\"Invalid empty short filename for attribute '\"",1917],".",["T_STRING","PclZipUtilOptionText",1917],"(",["T_VARIABLE","$v_key",1917],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1917],")",";",["T_WHITESPACE","\n            ",1917],["T_RETURN","return",1918],["T_WHITESPACE"," ",1918],["T_STRING","PclZip",1918],["T_DOUBLE_COLON","::",1918],["T_STRING","errorCode",1918],"(",")",";",["T_WHITESPACE","\n          ",1918],"}",["T_WHITESPACE","\n        ",1919],["T_BREAK","break",1920],";",["T_WHITESPACE","\n\n        ",1920],["T_CASE","case",1922],["T_WHITESPACE"," ",1922],["T_STRING","PCLZIP_ATT_FILE_NEW_FULL_NAME",1922],["T_WHITESPACE"," ",1922],":",["T_WHITESPACE","\n          ",1922],["T_IF","if",1923],["T_WHITESPACE"," ",1923],"(","!",["T_STRING","is_string",1923],"(",["T_VARIABLE","$v_value",1923],")",")",["T_WHITESPACE"," ",1923],"{",["T_WHITESPACE","\n            ",1923],["T_STRING","PclZip",1924],["T_DOUBLE_COLON","::",1924],["T_STRING","privErrorLog",1924],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1924],",",["T_WHITESPACE"," ",1924],["T_CONSTANT_ENCAPSED_STRING","\"Invalid type \"",1924],".",["T_STRING","gettype",1924],"(",["T_VARIABLE","$v_value",1924],")",".",["T_CONSTANT_ENCAPSED_STRING","\". String expected for attribute '\"",1924],".",["T_STRING","PclZipUtilOptionText",1924],"(",["T_VARIABLE","$v_key",1924],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1924],")",";",["T_WHITESPACE","\n            ",1924],["T_RETURN","return",1925],["T_WHITESPACE"," ",1925],["T_STRING","PclZip",1925],["T_DOUBLE_COLON","::",1925],["T_STRING","errorCode",1925],"(",")",";",["T_WHITESPACE","\n          ",1925],"}",["T_WHITESPACE","\n\n          ",1926],["T_VARIABLE","$p_filedescr",1928],"[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",1928],"]",["T_WHITESPACE"," ",1928],"=",["T_WHITESPACE"," ",1928],["T_STRING","PclZipUtilPathReduction",1928],"(",["T_VARIABLE","$v_value",1928],")",";",["T_WHITESPACE","\n\n          ",1928],["T_IF","if",1930],["T_WHITESPACE"," ",1930],"(",["T_VARIABLE","$p_filedescr",1930],"[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",1930],"]",["T_WHITESPACE"," ",1930],["T_IS_EQUAL","==",1930],["T_WHITESPACE"," ",1930],["T_CONSTANT_ENCAPSED_STRING","''",1930],")",["T_WHITESPACE"," ",1930],"{",["T_WHITESPACE","\n            ",1930],["T_STRING","PclZip",1931],["T_DOUBLE_COLON","::",1931],["T_STRING","privErrorLog",1931],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1931],",",["T_WHITESPACE"," ",1931],["T_CONSTANT_ENCAPSED_STRING","\"Invalid empty full filename for attribute '\"",1931],".",["T_STRING","PclZipUtilOptionText",1931],"(",["T_VARIABLE","$v_key",1931],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1931],")",";",["T_WHITESPACE","\n            ",1931],["T_RETURN","return",1932],["T_WHITESPACE"," ",1932],["T_STRING","PclZip",1932],["T_DOUBLE_COLON","::",1932],["T_STRING","errorCode",1932],"(",")",";",["T_WHITESPACE","\n          ",1932],"}",["T_WHITESPACE","\n        ",1933],["T_BREAK","break",1934],";",["T_WHITESPACE","\n\n        ",1934],["T_COMMENT","\/\/ ----- Look for options that takes a string\n",1936],["T_WHITESPACE","        ",1937],["T_CASE","case",1937],["T_WHITESPACE"," ",1937],["T_STRING","PCLZIP_ATT_FILE_COMMENT",1937],["T_WHITESPACE"," ",1937],":",["T_WHITESPACE","\n          ",1937],["T_IF","if",1938],["T_WHITESPACE"," ",1938],"(","!",["T_STRING","is_string",1938],"(",["T_VARIABLE","$v_value",1938],")",")",["T_WHITESPACE"," ",1938],"{",["T_WHITESPACE","\n            ",1938],["T_STRING","PclZip",1939],["T_DOUBLE_COLON","::",1939],["T_STRING","privErrorLog",1939],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1939],",",["T_WHITESPACE"," ",1939],["T_CONSTANT_ENCAPSED_STRING","\"Invalid type \"",1939],".",["T_STRING","gettype",1939],"(",["T_VARIABLE","$v_value",1939],")",".",["T_CONSTANT_ENCAPSED_STRING","\". String expected for attribute '\"",1939],".",["T_STRING","PclZipUtilOptionText",1939],"(",["T_VARIABLE","$v_key",1939],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1939],")",";",["T_WHITESPACE","\n            ",1939],["T_RETURN","return",1940],["T_WHITESPACE"," ",1940],["T_STRING","PclZip",1940],["T_DOUBLE_COLON","::",1940],["T_STRING","errorCode",1940],"(",")",";",["T_WHITESPACE","\n          ",1940],"}",["T_WHITESPACE","\n\n          ",1941],["T_VARIABLE","$p_filedescr",1943],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",1943],"]",["T_WHITESPACE"," ",1943],"=",["T_WHITESPACE"," ",1943],["T_VARIABLE","$v_value",1943],";",["T_WHITESPACE","\n        ",1943],["T_BREAK","break",1944],";",["T_WHITESPACE","\n\n        ",1944],["T_CASE","case",1946],["T_WHITESPACE"," ",1946],["T_STRING","PCLZIP_ATT_FILE_MTIME",1946],["T_WHITESPACE"," ",1946],":",["T_WHITESPACE","\n          ",1946],["T_IF","if",1947],["T_WHITESPACE"," ",1947],"(","!",["T_STRING","is_integer",1947],"(",["T_VARIABLE","$v_value",1947],")",")",["T_WHITESPACE"," ",1947],"{",["T_WHITESPACE","\n            ",1947],["T_STRING","PclZip",1948],["T_DOUBLE_COLON","::",1948],["T_STRING","privErrorLog",1948],"(",["T_STRING","PCLZIP_ERR_INVALID_ATTRIBUTE_VALUE",1948],",",["T_WHITESPACE"," ",1948],["T_CONSTANT_ENCAPSED_STRING","\"Invalid type \"",1948],".",["T_STRING","gettype",1948],"(",["T_VARIABLE","$v_value",1948],")",".",["T_CONSTANT_ENCAPSED_STRING","\". Integer expected for attribute '\"",1948],".",["T_STRING","PclZipUtilOptionText",1948],"(",["T_VARIABLE","$v_key",1948],")",".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1948],")",";",["T_WHITESPACE","\n            ",1948],["T_RETURN","return",1949],["T_WHITESPACE"," ",1949],["T_STRING","PclZip",1949],["T_DOUBLE_COLON","::",1949],["T_STRING","errorCode",1949],"(",")",";",["T_WHITESPACE","\n          ",1949],"}",["T_WHITESPACE","\n\n          ",1950],["T_VARIABLE","$p_filedescr",1952],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",1952],"]",["T_WHITESPACE"," ",1952],"=",["T_WHITESPACE"," ",1952],["T_VARIABLE","$v_value",1952],";",["T_WHITESPACE","\n        ",1952],["T_BREAK","break",1953],";",["T_WHITESPACE","\n\n        ",1953],["T_CASE","case",1955],["T_WHITESPACE"," ",1955],["T_STRING","PCLZIP_ATT_FILE_CONTENT",1955],["T_WHITESPACE"," ",1955],":",["T_WHITESPACE","\n          ",1955],["T_VARIABLE","$p_filedescr",1956],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",1956],"]",["T_WHITESPACE"," ",1956],"=",["T_WHITESPACE"," ",1956],["T_VARIABLE","$v_value",1956],";",["T_WHITESPACE","\n        ",1956],["T_BREAK","break",1957],";",["T_WHITESPACE","\n\n        ",1957],["T_DEFAULT","default",1959],["T_WHITESPACE"," ",1959],":",["T_WHITESPACE","\n          ",1959],["T_COMMENT","\/\/ ----- Error log\n",1960],["T_WHITESPACE","          ",1961],["T_STRING","PclZip",1961],["T_DOUBLE_COLON","::",1961],["T_STRING","privErrorLog",1961],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1961],",",["T_WHITESPACE","\n\t\t                           ",1961],["T_CONSTANT_ENCAPSED_STRING","\"Unknown parameter '\"",1962],".",["T_VARIABLE","$v_key",1962],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",1962],")",";",["T_WHITESPACE","\n\n          ",1962],["T_COMMENT","\/\/ ----- Return\n",1964],["T_WHITESPACE","          ",1965],["T_RETURN","return",1965],["T_WHITESPACE"," ",1965],["T_STRING","PclZip",1965],["T_DOUBLE_COLON","::",1965],["T_STRING","errorCode",1965],"(",")",";",["T_WHITESPACE","\n      ",1965],"}",["T_WHITESPACE","\n\n      ",1966],["T_COMMENT","\/\/ ----- Look for mandatory options\n",1968],["T_WHITESPACE","      ",1969],["T_IF","if",1969],["T_WHITESPACE"," ",1969],"(",["T_VARIABLE","$v_requested_options",1969],["T_WHITESPACE"," ",1969],["T_IS_NOT_IDENTICAL","!==",1969],["T_WHITESPACE"," ",1969],["T_STRING","false",1969],")",["T_WHITESPACE"," ",1969],"{",["T_WHITESPACE","\n        ",1969],["T_FOR","for",1970],["T_WHITESPACE"," ",1970],"(",["T_VARIABLE","$key",1970],"=",["T_STRING","reset",1970],"(",["T_VARIABLE","$v_requested_options",1970],")",";",["T_WHITESPACE"," ",1970],["T_VARIABLE","$key",1970],"=",["T_STRING","key",1970],"(",["T_VARIABLE","$v_requested_options",1970],")",";",["T_WHITESPACE"," ",1970],["T_VARIABLE","$key",1970],"=",["T_STRING","next",1970],"(",["T_VARIABLE","$v_requested_options",1970],")",")",["T_WHITESPACE"," ",1970],"{",["T_WHITESPACE","\n          ",1970],["T_COMMENT","\/\/ ----- Look for mandatory option\n",1971],["T_WHITESPACE","          ",1972],["T_IF","if",1972],["T_WHITESPACE"," ",1972],"(",["T_VARIABLE","$v_requested_options",1972],"[",["T_VARIABLE","$key",1972],"]",["T_WHITESPACE"," ",1972],["T_IS_EQUAL","==",1972],["T_WHITESPACE"," ",1972],["T_CONSTANT_ENCAPSED_STRING","'mandatory'",1972],")",["T_WHITESPACE"," ",1972],"{",["T_WHITESPACE","\n            ",1972],["T_COMMENT","\/\/ ----- Look if present\n",1973],["T_WHITESPACE","            ",1974],["T_IF","if",1974],["T_WHITESPACE"," ",1974],"(","!",["T_ISSET","isset",1974],"(",["T_VARIABLE","$p_file_list",1974],"[",["T_VARIABLE","$key",1974],"]",")",")",["T_WHITESPACE"," ",1974],"{",["T_WHITESPACE","\n              ",1974],["T_STRING","PclZip",1975],["T_DOUBLE_COLON","::",1975],["T_STRING","privErrorLog",1975],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",1975],",",["T_WHITESPACE"," ",1975],["T_CONSTANT_ENCAPSED_STRING","\"Missing mandatory parameter \"",1975],".",["T_STRING","PclZipUtilOptionText",1975],"(",["T_VARIABLE","$key",1975],")",".",["T_CONSTANT_ENCAPSED_STRING","\"(\"",1975],".",["T_VARIABLE","$key",1975],".",["T_CONSTANT_ENCAPSED_STRING","\")\"",1975],")",";",["T_WHITESPACE","\n              ",1975],["T_RETURN","return",1976],["T_WHITESPACE"," ",1976],["T_STRING","PclZip",1976],["T_DOUBLE_COLON","::",1976],["T_STRING","errorCode",1976],"(",")",";",["T_WHITESPACE","\n            ",1976],"}",["T_WHITESPACE","\n          ",1977],"}",["T_WHITESPACE","\n        ",1978],"}",["T_WHITESPACE","\n      ",1979],"}",["T_WHITESPACE","\n\n    ",1980],["T_COMMENT","\/\/ end foreach\n",1982],["T_WHITESPACE","    ",1983],"}",["T_WHITESPACE","\n\n    ",1983],["T_COMMENT","\/\/ ----- Return\n",1985],["T_WHITESPACE","    ",1986],["T_RETURN","return",1986],["T_WHITESPACE"," ",1986],["T_VARIABLE","$v_result",1986],";",["T_WHITESPACE","\n  ",1986],"}",["T_WHITESPACE","\n  ",1987],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1988],["T_WHITESPACE","\n  ",1989],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",1990],["T_WHITESPACE","  ",1991],["T_COMMENT","\/\/ Function : privFileDescrExpand()\n",1991],["T_WHITESPACE","  ",1992],["T_COMMENT","\/\/ Description :\n",1992],["T_WHITESPACE","  ",1993],["T_COMMENT","\/\/   This method look for each item of the list to see if its a file, a folder\n",1993],["T_WHITESPACE","  ",1994],["T_COMMENT","\/\/   or a string to be added as file. For any other type of files (link, other)\n",1994],["T_WHITESPACE","  ",1995],["T_COMMENT","\/\/   just ignore the item.\n",1995],["T_WHITESPACE","  ",1996],["T_COMMENT","\/\/   Then prepare the information that will be stored for that file.\n",1996],["T_WHITESPACE","  ",1997],["T_COMMENT","\/\/   When its a folder, expand the folder with all the files that are in that\n",1997],["T_WHITESPACE","  ",1998],["T_COMMENT","\/\/   folder (recursively).\n",1998],["T_WHITESPACE","  ",1999],["T_COMMENT","\/\/ Parameters :\n",1999],["T_WHITESPACE","  ",2000],["T_COMMENT","\/\/ Return Values :\n",2000],["T_WHITESPACE","  ",2001],["T_COMMENT","\/\/   1 on success.\n",2001],["T_WHITESPACE","  ",2002],["T_COMMENT","\/\/   0 on failure.\n",2002],["T_WHITESPACE","  ",2003],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2003],["T_WHITESPACE","  ",2004],["T_FUNCTION","function",2004],["T_WHITESPACE"," ",2004],["T_STRING","privFileDescrExpand",2004],"(","&",["T_VARIABLE","$p_filedescr_list",2004],",",["T_WHITESPACE"," ",2004],"&",["T_VARIABLE","$p_options",2004],")",["T_WHITESPACE","\n  ",2004],"{",["T_WHITESPACE","\n    ",2005],["T_VARIABLE","$v_result",2006],"=",["T_LNUMBER","1",2006],";",["T_WHITESPACE","\n\n    ",2006],["T_COMMENT","\/\/ ----- Create a result list\n",2008],["T_WHITESPACE","    ",2009],["T_VARIABLE","$v_result_list",2009],["T_WHITESPACE"," ",2009],"=",["T_WHITESPACE"," ",2009],["T_ARRAY","array",2009],"(",")",";",["T_WHITESPACE","\n\n    ",2009],["T_COMMENT","\/\/ ----- Look each entry\n",2011],["T_WHITESPACE","    ",2012],["T_FOR","for",2012],["T_WHITESPACE"," ",2012],"(",["T_VARIABLE","$i",2012],"=",["T_LNUMBER","0",2012],";",["T_WHITESPACE"," ",2012],["T_VARIABLE","$i",2012],"<",["T_STRING","sizeof",2012],"(",["T_VARIABLE","$p_filedescr_list",2012],")",";",["T_WHITESPACE"," ",2012],["T_VARIABLE","$i",2012],["T_INC","++",2012],")",["T_WHITESPACE"," ",2012],"{",["T_WHITESPACE","\n\n      ",2012],["T_COMMENT","\/\/ ----- Get filedescr\n",2014],["T_WHITESPACE","      ",2015],["T_VARIABLE","$v_descr",2015],["T_WHITESPACE"," ",2015],"=",["T_WHITESPACE"," ",2015],["T_VARIABLE","$p_filedescr_list",2015],"[",["T_VARIABLE","$i",2015],"]",";",["T_WHITESPACE","\n\n      ",2015],["T_COMMENT","\/\/ ----- Reduce the filename\n",2017],["T_WHITESPACE","      ",2018],["T_VARIABLE","$v_descr",2018],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2018],"]",["T_WHITESPACE"," ",2018],"=",["T_WHITESPACE"," ",2018],["T_STRING","PclZipUtilTranslateWinPath",2018],"(",["T_VARIABLE","$v_descr",2018],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2018],"]",",",["T_WHITESPACE"," ",2018],["T_STRING","false",2018],")",";",["T_WHITESPACE","\n      ",2018],["T_VARIABLE","$v_descr",2019],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2019],"]",["T_WHITESPACE"," ",2019],"=",["T_WHITESPACE"," ",2019],["T_STRING","PclZipUtilPathReduction",2019],"(",["T_VARIABLE","$v_descr",2019],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2019],"]",")",";",["T_WHITESPACE","\n\n      ",2019],["T_COMMENT","\/\/ ----- Look for real file or folder\n",2021],["T_WHITESPACE","      ",2022],["T_IF","if",2022],["T_WHITESPACE"," ",2022],"(",["T_STRING","file_exists",2022],"(",["T_VARIABLE","$v_descr",2022],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2022],"]",")",")",["T_WHITESPACE"," ",2022],"{",["T_WHITESPACE","\n        ",2022],["T_IF","if",2023],["T_WHITESPACE"," ",2023],"(","@",["T_STRING","is_file",2023],"(",["T_VARIABLE","$v_descr",2023],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2023],"]",")",")",["T_WHITESPACE"," ",2023],"{",["T_WHITESPACE","\n          ",2023],["T_VARIABLE","$v_descr",2024],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2024],"]",["T_WHITESPACE"," ",2024],"=",["T_WHITESPACE"," ",2024],["T_CONSTANT_ENCAPSED_STRING","'file'",2024],";",["T_WHITESPACE","\n        ",2024],"}",["T_WHITESPACE","\n        ",2025],["T_ELSE","else",2026],["T_WHITESPACE"," ",2026],["T_IF","if",2026],["T_WHITESPACE"," ",2026],"(","@",["T_STRING","is_dir",2026],"(",["T_VARIABLE","$v_descr",2026],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2026],"]",")",")",["T_WHITESPACE"," ",2026],"{",["T_WHITESPACE","\n          ",2026],["T_VARIABLE","$v_descr",2027],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2027],"]",["T_WHITESPACE"," ",2027],"=",["T_WHITESPACE"," ",2027],["T_CONSTANT_ENCAPSED_STRING","'folder'",2027],";",["T_WHITESPACE","\n        ",2027],"}",["T_WHITESPACE","\n        ",2028],["T_ELSE","else",2029],["T_WHITESPACE"," ",2029],["T_IF","if",2029],["T_WHITESPACE"," ",2029],"(","@",["T_STRING","is_link",2029],"(",["T_VARIABLE","$v_descr",2029],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2029],"]",")",")",["T_WHITESPACE"," ",2029],"{",["T_WHITESPACE","\n          ",2029],["T_COMMENT","\/\/ skip\n",2030],["T_WHITESPACE","          ",2031],["T_CONTINUE","continue",2031],";",["T_WHITESPACE","\n        ",2031],"}",["T_WHITESPACE","\n        ",2032],["T_ELSE","else",2033],["T_WHITESPACE"," ",2033],"{",["T_WHITESPACE","\n          ",2033],["T_COMMENT","\/\/ skip\n",2034],["T_WHITESPACE","          ",2035],["T_CONTINUE","continue",2035],";",["T_WHITESPACE","\n        ",2035],"}",["T_WHITESPACE","\n      ",2036],"}",["T_WHITESPACE","\n\n      ",2037],["T_COMMENT","\/\/ ----- Look for string added as file\n",2039],["T_WHITESPACE","      ",2040],["T_ELSE","else",2040],["T_WHITESPACE"," ",2040],["T_IF","if",2040],["T_WHITESPACE"," ",2040],"(",["T_ISSET","isset",2040],"(",["T_VARIABLE","$v_descr",2040],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",2040],"]",")",")",["T_WHITESPACE"," ",2040],"{",["T_WHITESPACE","\n        ",2040],["T_VARIABLE","$v_descr",2041],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2041],"]",["T_WHITESPACE"," ",2041],"=",["T_WHITESPACE"," ",2041],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2041],";",["T_WHITESPACE","\n      ",2041],"}",["T_WHITESPACE","\n\n      ",2042],["T_COMMENT","\/\/ ----- Missing file\n",2044],["T_WHITESPACE","      ",2045],["T_ELSE","else",2045],["T_WHITESPACE"," ",2045],"{",["T_WHITESPACE","\n        ",2045],["T_COMMENT","\/\/ ----- Error log\n",2046],["T_WHITESPACE","        ",2047],["T_STRING","PclZip",2047],["T_DOUBLE_COLON","::",2047],["T_STRING","privErrorLog",2047],"(",["T_STRING","PCLZIP_ERR_MISSING_FILE",2047],",",["T_WHITESPACE"," ",2047],["T_CONSTANT_ENCAPSED_STRING","\"File '\"",2047],".",["T_VARIABLE","$v_descr",2047],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2047],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' does not exist\"",2047],")",";",["T_WHITESPACE","\n\n        ",2047],["T_COMMENT","\/\/ ----- Return\n",2049],["T_WHITESPACE","        ",2050],["T_RETURN","return",2050],["T_WHITESPACE"," ",2050],["T_STRING","PclZip",2050],["T_DOUBLE_COLON","::",2050],["T_STRING","errorCode",2050],"(",")",";",["T_WHITESPACE","\n      ",2050],"}",["T_WHITESPACE","\n\n      ",2051],["T_COMMENT","\/\/ ----- Calculate the stored filename\n",2053],["T_WHITESPACE","      ",2054],["T_VARIABLE","$this",2054],["T_OBJECT_OPERATOR","->",2054],["T_STRING","privCalculateStoredFilename",2054],"(",["T_VARIABLE","$v_descr",2054],",",["T_WHITESPACE"," ",2054],["T_VARIABLE","$p_options",2054],")",";",["T_WHITESPACE","\n\n      ",2054],["T_COMMENT","\/\/ ----- Add the descriptor in result list\n",2056],["T_WHITESPACE","      ",2057],["T_VARIABLE","$v_result_list",2057],"[",["T_STRING","sizeof",2057],"(",["T_VARIABLE","$v_result_list",2057],")","]",["T_WHITESPACE"," ",2057],"=",["T_WHITESPACE"," ",2057],["T_VARIABLE","$v_descr",2057],";",["T_WHITESPACE","\n\n      ",2057],["T_COMMENT","\/\/ ----- Look for folder\n",2059],["T_WHITESPACE","      ",2060],["T_IF","if",2060],["T_WHITESPACE"," ",2060],"(",["T_VARIABLE","$v_descr",2060],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2060],"]",["T_WHITESPACE"," ",2060],["T_IS_EQUAL","==",2060],["T_WHITESPACE"," ",2060],["T_CONSTANT_ENCAPSED_STRING","'folder'",2060],")",["T_WHITESPACE"," ",2060],"{",["T_WHITESPACE","\n        ",2060],["T_COMMENT","\/\/ ----- List of items in folder\n",2061],["T_WHITESPACE","        ",2062],["T_VARIABLE","$v_dirlist_descr",2062],["T_WHITESPACE"," ",2062],"=",["T_WHITESPACE"," ",2062],["T_ARRAY","array",2062],"(",")",";",["T_WHITESPACE","\n        ",2062],["T_VARIABLE","$v_dirlist_nb",2063],["T_WHITESPACE"," ",2063],"=",["T_WHITESPACE"," ",2063],["T_LNUMBER","0",2063],";",["T_WHITESPACE","\n        ",2063],["T_IF","if",2064],["T_WHITESPACE"," ",2064],"(",["T_VARIABLE","$v_folder_handler",2064],["T_WHITESPACE"," ",2064],"=",["T_WHITESPACE"," ",2064],"@",["T_STRING","opendir",2064],"(",["T_VARIABLE","$v_descr",2064],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2064],"]",")",")",["T_WHITESPACE"," ",2064],"{",["T_WHITESPACE","\n          ",2064],["T_WHILE","while",2065],["T_WHITESPACE"," ",2065],"(","(",["T_VARIABLE","$v_item_handler",2065],["T_WHITESPACE"," ",2065],"=",["T_WHITESPACE"," ",2065],"@",["T_STRING","readdir",2065],"(",["T_VARIABLE","$v_folder_handler",2065],")",")",["T_WHITESPACE"," ",2065],["T_IS_NOT_IDENTICAL","!==",2065],["T_WHITESPACE"," ",2065],["T_STRING","false",2065],")",["T_WHITESPACE"," ",2065],"{",["T_WHITESPACE","\n\n            ",2065],["T_COMMENT","\/\/ ----- Skip '.' and '..'\n",2067],["T_WHITESPACE","            ",2068],["T_IF","if",2068],["T_WHITESPACE"," ",2068],"(","(",["T_VARIABLE","$v_item_handler",2068],["T_WHITESPACE"," ",2068],["T_IS_EQUAL","==",2068],["T_WHITESPACE"," ",2068],["T_CONSTANT_ENCAPSED_STRING","'.'",2068],")",["T_WHITESPACE"," ",2068],["T_BOOLEAN_OR","||",2068],["T_WHITESPACE"," ",2068],"(",["T_VARIABLE","$v_item_handler",2068],["T_WHITESPACE"," ",2068],["T_IS_EQUAL","==",2068],["T_WHITESPACE"," ",2068],["T_CONSTANT_ENCAPSED_STRING","'..'",2068],")",")",["T_WHITESPACE"," ",2068],"{",["T_WHITESPACE","\n                ",2068],["T_CONTINUE","continue",2069],";",["T_WHITESPACE","\n            ",2069],"}",["T_WHITESPACE","\n\n            ",2070],["T_COMMENT","\/\/ ----- Compose the full filename\n",2072],["T_WHITESPACE","            ",2073],["T_VARIABLE","$v_dirlist_descr",2073],"[",["T_VARIABLE","$v_dirlist_nb",2073],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2073],"]",["T_WHITESPACE"," ",2073],"=",["T_WHITESPACE"," ",2073],["T_VARIABLE","$v_descr",2073],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2073],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",2073],".",["T_VARIABLE","$v_item_handler",2073],";",["T_WHITESPACE","\n\n            ",2073],["T_COMMENT","\/\/ ----- Look for different stored filename\n",2075],["T_WHITESPACE","            ",2076],["T_COMMENT","\/\/ Because the name of the folder was changed, the name of the\n",2076],["T_WHITESPACE","            ",2077],["T_COMMENT","\/\/ files\/sub-folders also change\n",2077],["T_WHITESPACE","            ",2078],["T_IF","if",2078],["T_WHITESPACE"," ",2078],"(","(",["T_VARIABLE","$v_descr",2078],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2078],"]",["T_WHITESPACE"," ",2078],["T_IS_NOT_EQUAL","!=",2078],["T_WHITESPACE"," ",2078],["T_VARIABLE","$v_descr",2078],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2078],"]",")",["T_WHITESPACE","\n                 ",2078],["T_BOOLEAN_AND","&&",2079],["T_WHITESPACE"," ",2079],"(","!",["T_ISSET","isset",2079],"(",["T_VARIABLE","$p_options",2079],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",2079],"]",")",")",")",["T_WHITESPACE"," ",2079],"{",["T_WHITESPACE","\n              ",2079],["T_IF","if",2080],["T_WHITESPACE"," ",2080],"(",["T_VARIABLE","$v_descr",2080],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2080],"]",["T_WHITESPACE"," ",2080],["T_IS_NOT_EQUAL","!=",2080],["T_WHITESPACE"," ",2080],["T_CONSTANT_ENCAPSED_STRING","''",2080],")",["T_WHITESPACE"," ",2080],"{",["T_WHITESPACE","\n                ",2080],["T_VARIABLE","$v_dirlist_descr",2081],"[",["T_VARIABLE","$v_dirlist_nb",2081],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",2081],"]",["T_WHITESPACE"," ",2081],"=",["T_WHITESPACE"," ",2081],["T_VARIABLE","$v_descr",2081],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2081],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",2081],".",["T_VARIABLE","$v_item_handler",2081],";",["T_WHITESPACE","\n              ",2081],"}",["T_WHITESPACE","\n              ",2082],["T_ELSE","else",2083],["T_WHITESPACE"," ",2083],"{",["T_WHITESPACE","\n                ",2083],["T_VARIABLE","$v_dirlist_descr",2084],"[",["T_VARIABLE","$v_dirlist_nb",2084],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",2084],"]",["T_WHITESPACE"," ",2084],"=",["T_WHITESPACE"," ",2084],["T_VARIABLE","$v_item_handler",2084],";",["T_WHITESPACE","\n              ",2084],"}",["T_WHITESPACE","\n            ",2085],"}",["T_WHITESPACE","\n\n            ",2086],["T_VARIABLE","$v_dirlist_nb",2088],["T_INC","++",2088],";",["T_WHITESPACE","\n          ",2088],"}",["T_WHITESPACE","\n\n          ",2089],"@",["T_STRING","closedir",2091],"(",["T_VARIABLE","$v_folder_handler",2091],")",";",["T_WHITESPACE","\n        ",2091],"}",["T_WHITESPACE","\n        ",2092],["T_ELSE","else",2093],["T_WHITESPACE"," ",2093],"{",["T_WHITESPACE","\n          ",2093],["T_COMMENT","\/\/ TBC : unable to open folder in read mode\n",2094],["T_WHITESPACE","        ",2095],"}",["T_WHITESPACE","\n\n        ",2095],["T_COMMENT","\/\/ ----- Expand each element of the list\n",2097],["T_WHITESPACE","        ",2098],["T_IF","if",2098],["T_WHITESPACE"," ",2098],"(",["T_VARIABLE","$v_dirlist_nb",2098],["T_WHITESPACE"," ",2098],["T_IS_NOT_EQUAL","!=",2098],["T_WHITESPACE"," ",2098],["T_LNUMBER","0",2098],")",["T_WHITESPACE"," ",2098],"{",["T_WHITESPACE","\n          ",2098],["T_COMMENT","\/\/ ----- Expand\n",2099],["T_WHITESPACE","          ",2100],["T_IF","if",2100],["T_WHITESPACE"," ",2100],"(","(",["T_VARIABLE","$v_result",2100],["T_WHITESPACE"," ",2100],"=",["T_WHITESPACE"," ",2100],["T_VARIABLE","$this",2100],["T_OBJECT_OPERATOR","->",2100],["T_STRING","privFileDescrExpand",2100],"(",["T_VARIABLE","$v_dirlist_descr",2100],",",["T_WHITESPACE"," ",2100],["T_VARIABLE","$p_options",2100],")",")",["T_WHITESPACE"," ",2100],["T_IS_NOT_EQUAL","!=",2100],["T_WHITESPACE"," ",2100],["T_LNUMBER","1",2100],")",["T_WHITESPACE"," ",2100],"{",["T_WHITESPACE","\n            ",2100],["T_RETURN","return",2101],["T_WHITESPACE"," ",2101],["T_VARIABLE","$v_result",2101],";",["T_WHITESPACE","\n          ",2101],"}",["T_WHITESPACE","\n\n          ",2102],["T_COMMENT","\/\/ ----- Concat the resulting list\n",2104],["T_WHITESPACE","          ",2105],["T_VARIABLE","$v_result_list",2105],["T_WHITESPACE"," ",2105],"=",["T_WHITESPACE"," ",2105],["T_STRING","array_merge",2105],"(",["T_VARIABLE","$v_result_list",2105],",",["T_WHITESPACE"," ",2105],["T_VARIABLE","$v_dirlist_descr",2105],")",";",["T_WHITESPACE","\n        ",2105],"}",["T_WHITESPACE","\n        ",2106],["T_ELSE","else",2107],["T_WHITESPACE"," ",2107],"{",["T_WHITESPACE","\n        ",2107],"}",["T_WHITESPACE","\n\n        ",2108],["T_COMMENT","\/\/ ----- Free local array\n",2110],["T_WHITESPACE","        ",2111],["T_UNSET","unset",2111],"(",["T_VARIABLE","$v_dirlist_descr",2111],")",";",["T_WHITESPACE","\n      ",2111],"}",["T_WHITESPACE","\n    ",2112],"}",["T_WHITESPACE","\n\n    ",2113],["T_COMMENT","\/\/ ----- Get the result list\n",2115],["T_WHITESPACE","    ",2116],["T_VARIABLE","$p_filedescr_list",2116],["T_WHITESPACE"," ",2116],"=",["T_WHITESPACE"," ",2116],["T_VARIABLE","$v_result_list",2116],";",["T_WHITESPACE","\n\n    ",2116],["T_COMMENT","\/\/ ----- Return\n",2118],["T_WHITESPACE","    ",2119],["T_RETURN","return",2119],["T_WHITESPACE"," ",2119],["T_VARIABLE","$v_result",2119],";",["T_WHITESPACE","\n  ",2119],"}",["T_WHITESPACE","\n  ",2120],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2121],["T_WHITESPACE","\n  ",2122],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2123],["T_WHITESPACE","  ",2124],["T_COMMENT","\/\/ Function : privCreate()\n",2124],["T_WHITESPACE","  ",2125],["T_COMMENT","\/\/ Description :\n",2125],["T_WHITESPACE","  ",2126],["T_COMMENT","\/\/ Parameters :\n",2126],["T_WHITESPACE","  ",2127],["T_COMMENT","\/\/ Return Values :\n",2127],["T_WHITESPACE","  ",2128],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2128],["T_WHITESPACE","  ",2129],["T_FUNCTION","function",2129],["T_WHITESPACE"," ",2129],["T_STRING","privCreate",2129],"(",["T_VARIABLE","$p_filedescr_list",2129],",",["T_WHITESPACE"," ",2129],"&",["T_VARIABLE","$p_result_list",2129],",",["T_WHITESPACE"," ",2129],"&",["T_VARIABLE","$p_options",2129],")",["T_WHITESPACE","\n  ",2129],"{",["T_WHITESPACE","\n    ",2130],["T_VARIABLE","$v_result",2131],"=",["T_LNUMBER","1",2131],";",["T_WHITESPACE","\n    ",2131],["T_VARIABLE","$v_list_detail",2132],["T_WHITESPACE"," ",2132],"=",["T_WHITESPACE"," ",2132],["T_ARRAY","array",2132],"(",")",";",["T_WHITESPACE","\n\n    ",2132],["T_COMMENT","\/\/ ----- Magic quotes trick\n",2134],["T_WHITESPACE","    ",2135],["T_VARIABLE","$this",2135],["T_OBJECT_OPERATOR","->",2135],["T_STRING","privDisableMagicQuotes",2135],"(",")",";",["T_WHITESPACE","\n\n    ",2135],["T_COMMENT","\/\/ ----- Open the file in write mode\n",2137],["T_WHITESPACE","    ",2138],["T_IF","if",2138],["T_WHITESPACE"," ",2138],"(","(",["T_VARIABLE","$v_result",2138],["T_WHITESPACE"," ",2138],"=",["T_WHITESPACE"," ",2138],["T_VARIABLE","$this",2138],["T_OBJECT_OPERATOR","->",2138],["T_STRING","privOpenFd",2138],"(",["T_CONSTANT_ENCAPSED_STRING","'wb'",2138],")",")",["T_WHITESPACE"," ",2138],["T_IS_NOT_EQUAL","!=",2138],["T_WHITESPACE"," ",2138],["T_LNUMBER","1",2138],")",["T_WHITESPACE","\n    ",2138],"{",["T_WHITESPACE","\n      ",2139],["T_COMMENT","\/\/ ----- Return\n",2140],["T_WHITESPACE","      ",2141],["T_RETURN","return",2141],["T_WHITESPACE"," ",2141],["T_VARIABLE","$v_result",2141],";",["T_WHITESPACE","\n    ",2141],"}",["T_WHITESPACE","\n\n    ",2142],["T_COMMENT","\/\/ ----- Add the list of files\n",2144],["T_WHITESPACE","    ",2145],["T_VARIABLE","$v_result",2145],["T_WHITESPACE"," ",2145],"=",["T_WHITESPACE"," ",2145],["T_VARIABLE","$this",2145],["T_OBJECT_OPERATOR","->",2145],["T_STRING","privAddList",2145],"(",["T_VARIABLE","$p_filedescr_list",2145],",",["T_WHITESPACE"," ",2145],["T_VARIABLE","$p_result_list",2145],",",["T_WHITESPACE"," ",2145],["T_VARIABLE","$p_options",2145],")",";",["T_WHITESPACE","\n\n    ",2145],["T_COMMENT","\/\/ ----- Close\n",2147],["T_WHITESPACE","    ",2148],["T_VARIABLE","$this",2148],["T_OBJECT_OPERATOR","->",2148],["T_STRING","privCloseFd",2148],"(",")",";",["T_WHITESPACE","\n\n    ",2148],["T_COMMENT","\/\/ ----- Magic quotes trick\n",2150],["T_WHITESPACE","    ",2151],["T_VARIABLE","$this",2151],["T_OBJECT_OPERATOR","->",2151],["T_STRING","privSwapBackMagicQuotes",2151],"(",")",";",["T_WHITESPACE","\n\n    ",2151],["T_COMMENT","\/\/ ----- Return\n",2153],["T_WHITESPACE","    ",2154],["T_RETURN","return",2154],["T_WHITESPACE"," ",2154],["T_VARIABLE","$v_result",2154],";",["T_WHITESPACE","\n  ",2154],"}",["T_WHITESPACE","\n  ",2155],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2156],["T_WHITESPACE","\n  ",2157],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2158],["T_WHITESPACE","  ",2159],["T_COMMENT","\/\/ Function : privAdd()\n",2159],["T_WHITESPACE","  ",2160],["T_COMMENT","\/\/ Description :\n",2160],["T_WHITESPACE","  ",2161],["T_COMMENT","\/\/ Parameters :\n",2161],["T_WHITESPACE","  ",2162],["T_COMMENT","\/\/ Return Values :\n",2162],["T_WHITESPACE","  ",2163],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2163],["T_WHITESPACE","  ",2164],["T_FUNCTION","function",2164],["T_WHITESPACE"," ",2164],["T_STRING","privAdd",2164],"(",["T_VARIABLE","$p_filedescr_list",2164],",",["T_WHITESPACE"," ",2164],"&",["T_VARIABLE","$p_result_list",2164],",",["T_WHITESPACE"," ",2164],"&",["T_VARIABLE","$p_options",2164],")",["T_WHITESPACE","\n  ",2164],"{",["T_WHITESPACE","\n    ",2165],["T_VARIABLE","$v_result",2166],"=",["T_LNUMBER","1",2166],";",["T_WHITESPACE","\n    ",2166],["T_VARIABLE","$v_list_detail",2167],["T_WHITESPACE"," ",2167],"=",["T_WHITESPACE"," ",2167],["T_ARRAY","array",2167],"(",")",";",["T_WHITESPACE","\n\n    ",2167],["T_COMMENT","\/\/ ----- Look if the archive exists or is empty\n",2169],["T_WHITESPACE","    ",2170],["T_IF","if",2170],["T_WHITESPACE"," ",2170],"(","(","!",["T_STRING","is_file",2170],"(",["T_VARIABLE","$this",2170],["T_OBJECT_OPERATOR","->",2170],["T_STRING","zipname",2170],")",")",["T_WHITESPACE"," ",2170],["T_BOOLEAN_OR","||",2170],["T_WHITESPACE"," ",2170],"(",["T_STRING","filesize",2170],"(",["T_VARIABLE","$this",2170],["T_OBJECT_OPERATOR","->",2170],["T_STRING","zipname",2170],")",["T_WHITESPACE"," ",2170],["T_IS_EQUAL","==",2170],["T_WHITESPACE"," ",2170],["T_LNUMBER","0",2170],")",")",["T_WHITESPACE","\n    ",2170],"{",["T_WHITESPACE","\n\n      ",2171],["T_COMMENT","\/\/ ----- Do a create\n",2173],["T_WHITESPACE","      ",2174],["T_VARIABLE","$v_result",2174],["T_WHITESPACE"," ",2174],"=",["T_WHITESPACE"," ",2174],["T_VARIABLE","$this",2174],["T_OBJECT_OPERATOR","->",2174],["T_STRING","privCreate",2174],"(",["T_VARIABLE","$p_filedescr_list",2174],",",["T_WHITESPACE"," ",2174],["T_VARIABLE","$p_result_list",2174],",",["T_WHITESPACE"," ",2174],["T_VARIABLE","$p_options",2174],")",";",["T_WHITESPACE","\n\n      ",2174],["T_COMMENT","\/\/ ----- Return\n",2176],["T_WHITESPACE","      ",2177],["T_RETURN","return",2177],["T_WHITESPACE"," ",2177],["T_VARIABLE","$v_result",2177],";",["T_WHITESPACE","\n    ",2177],"}",["T_WHITESPACE","\n    ",2178],["T_COMMENT","\/\/ ----- Magic quotes trick\n",2179],["T_WHITESPACE","    ",2180],["T_VARIABLE","$this",2180],["T_OBJECT_OPERATOR","->",2180],["T_STRING","privDisableMagicQuotes",2180],"(",")",";",["T_WHITESPACE","\n\n    ",2180],["T_COMMENT","\/\/ ----- Open the zip file\n",2182],["T_WHITESPACE","    ",2183],["T_IF","if",2183],["T_WHITESPACE"," ",2183],"(","(",["T_VARIABLE","$v_result",2183],"=",["T_VARIABLE","$this",2183],["T_OBJECT_OPERATOR","->",2183],["T_STRING","privOpenFd",2183],"(",["T_CONSTANT_ENCAPSED_STRING","'rb'",2183],")",")",["T_WHITESPACE"," ",2183],["T_IS_NOT_EQUAL","!=",2183],["T_WHITESPACE"," ",2183],["T_LNUMBER","1",2183],")",["T_WHITESPACE","\n    ",2183],"{",["T_WHITESPACE","\n      ",2184],["T_COMMENT","\/\/ ----- Magic quotes trick\n",2185],["T_WHITESPACE","      ",2186],["T_VARIABLE","$this",2186],["T_OBJECT_OPERATOR","->",2186],["T_STRING","privSwapBackMagicQuotes",2186],"(",")",";",["T_WHITESPACE","\n\n      ",2186],["T_COMMENT","\/\/ ----- Return\n",2188],["T_WHITESPACE","      ",2189],["T_RETURN","return",2189],["T_WHITESPACE"," ",2189],["T_VARIABLE","$v_result",2189],";",["T_WHITESPACE","\n    ",2189],"}",["T_WHITESPACE","\n\n    ",2190],["T_COMMENT","\/\/ ----- Read the central directory informations\n",2192],["T_WHITESPACE","    ",2193],["T_VARIABLE","$v_central_dir",2193],["T_WHITESPACE"," ",2193],"=",["T_WHITESPACE"," ",2193],["T_ARRAY","array",2193],"(",")",";",["T_WHITESPACE","\n    ",2193],["T_IF","if",2194],["T_WHITESPACE"," ",2194],"(","(",["T_VARIABLE","$v_result",2194],["T_WHITESPACE"," ",2194],"=",["T_WHITESPACE"," ",2194],["T_VARIABLE","$this",2194],["T_OBJECT_OPERATOR","->",2194],["T_STRING","privReadEndCentralDir",2194],"(",["T_VARIABLE","$v_central_dir",2194],")",")",["T_WHITESPACE"," ",2194],["T_IS_NOT_EQUAL","!=",2194],["T_WHITESPACE"," ",2194],["T_LNUMBER","1",2194],")",["T_WHITESPACE","\n    ",2194],"{",["T_WHITESPACE","\n      ",2195],["T_VARIABLE","$this",2196],["T_OBJECT_OPERATOR","->",2196],["T_STRING","privCloseFd",2196],"(",")",";",["T_WHITESPACE","\n      ",2196],["T_VARIABLE","$this",2197],["T_OBJECT_OPERATOR","->",2197],["T_STRING","privSwapBackMagicQuotes",2197],"(",")",";",["T_WHITESPACE","\n      ",2197],["T_RETURN","return",2198],["T_WHITESPACE"," ",2198],["T_VARIABLE","$v_result",2198],";",["T_WHITESPACE","\n    ",2198],"}",["T_WHITESPACE","\n\n    ",2199],["T_COMMENT","\/\/ ----- Go to beginning of File\n",2201],["T_WHITESPACE","    ",2202],"@",["T_STRING","rewind",2202],"(",["T_VARIABLE","$this",2202],["T_OBJECT_OPERATOR","->",2202],["T_STRING","zip_fd",2202],")",";",["T_WHITESPACE","\n\n    ",2202],["T_COMMENT","\/\/ ----- Creates a temporay file\n",2204],["T_WHITESPACE","    ",2205],["T_VARIABLE","$v_zip_temp_name",2205],["T_WHITESPACE"," ",2205],"=",["T_WHITESPACE"," ",2205],["T_STRING","PCLZIP_TEMPORARY_DIR",2205],".",["T_STRING","uniqid",2205],"(",["T_CONSTANT_ENCAPSED_STRING","'pclzip-'",2205],")",".",["T_CONSTANT_ENCAPSED_STRING","'.tmp'",2205],";",["T_WHITESPACE","\n\n    ",2205],["T_COMMENT","\/\/ ----- Open the temporary file in write mode\n",2207],["T_WHITESPACE","    ",2208],["T_IF","if",2208],["T_WHITESPACE"," ",2208],"(","(",["T_VARIABLE","$v_zip_temp_fd",2208],["T_WHITESPACE"," ",2208],"=",["T_WHITESPACE"," ",2208],"@",["T_STRING","fopen",2208],"(",["T_VARIABLE","$v_zip_temp_name",2208],",",["T_WHITESPACE"," ",2208],["T_CONSTANT_ENCAPSED_STRING","'wb'",2208],")",")",["T_WHITESPACE"," ",2208],["T_IS_EQUAL","==",2208],["T_WHITESPACE"," ",2208],["T_LNUMBER","0",2208],")",["T_WHITESPACE","\n    ",2208],"{",["T_WHITESPACE","\n      ",2209],["T_VARIABLE","$this",2210],["T_OBJECT_OPERATOR","->",2210],["T_STRING","privCloseFd",2210],"(",")",";",["T_WHITESPACE","\n      ",2210],["T_VARIABLE","$this",2211],["T_OBJECT_OPERATOR","->",2211],["T_STRING","privSwapBackMagicQuotes",2211],"(",")",";",["T_WHITESPACE","\n\n      ",2211],["T_STRING","PclZip",2213],["T_DOUBLE_COLON","::",2213],["T_STRING","privErrorLog",2213],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2213],",",["T_WHITESPACE"," ",2213],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",2213],".",["T_VARIABLE","$v_zip_temp_name",2213],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary write mode'",2213],")",";",["T_WHITESPACE","\n\n      ",2213],["T_COMMENT","\/\/ ----- Return\n",2215],["T_WHITESPACE","      ",2216],["T_RETURN","return",2216],["T_WHITESPACE"," ",2216],["T_STRING","PclZip",2216],["T_DOUBLE_COLON","::",2216],["T_STRING","errorCode",2216],"(",")",";",["T_WHITESPACE","\n    ",2216],"}",["T_WHITESPACE","\n\n    ",2217],["T_COMMENT","\/\/ ----- Copy the files from the archive to the temporary file\n",2219],["T_WHITESPACE","    ",2220],["T_COMMENT","\/\/ TBC : Here I should better append the file and go back to erase the central dir\n",2220],["T_WHITESPACE","    ",2221],["T_VARIABLE","$v_size",2221],["T_WHITESPACE"," ",2221],"=",["T_WHITESPACE"," ",2221],["T_VARIABLE","$v_central_dir",2221],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",2221],"]",";",["T_WHITESPACE","\n    ",2221],["T_WHILE","while",2222],["T_WHITESPACE"," ",2222],"(",["T_VARIABLE","$v_size",2222],["T_WHITESPACE"," ",2222],["T_IS_NOT_EQUAL","!=",2222],["T_WHITESPACE"," ",2222],["T_LNUMBER","0",2222],")",["T_WHITESPACE","\n    ",2222],"{",["T_WHITESPACE","\n      ",2223],["T_VARIABLE","$v_read_size",2224],["T_WHITESPACE"," ",2224],"=",["T_WHITESPACE"," ",2224],"(",["T_VARIABLE","$v_size",2224],["T_WHITESPACE"," ",2224],"<",["T_WHITESPACE"," ",2224],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2224],["T_WHITESPACE"," ",2224],"?",["T_WHITESPACE"," ",2224],["T_VARIABLE","$v_size",2224],["T_WHITESPACE"," ",2224],":",["T_WHITESPACE"," ",2224],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2224],")",";",["T_WHITESPACE","\n      ",2224],["T_VARIABLE","$v_buffer",2225],["T_WHITESPACE"," ",2225],"=",["T_WHITESPACE"," ",2225],["T_STRING","fread",2225],"(",["T_VARIABLE","$this",2225],["T_OBJECT_OPERATOR","->",2225],["T_STRING","zip_fd",2225],",",["T_WHITESPACE"," ",2225],["T_VARIABLE","$v_read_size",2225],")",";",["T_WHITESPACE","\n      ",2225],"@",["T_STRING","fwrite",2226],"(",["T_VARIABLE","$v_zip_temp_fd",2226],",",["T_WHITESPACE"," ",2226],["T_VARIABLE","$v_buffer",2226],",",["T_WHITESPACE"," ",2226],["T_VARIABLE","$v_read_size",2226],")",";",["T_WHITESPACE","\n      ",2226],["T_VARIABLE","$v_size",2227],["T_WHITESPACE"," ",2227],["T_MINUS_EQUAL","-=",2227],["T_WHITESPACE"," ",2227],["T_VARIABLE","$v_read_size",2227],";",["T_WHITESPACE","\n    ",2227],"}",["T_WHITESPACE","\n\n    ",2228],["T_COMMENT","\/\/ ----- Swap the file descriptor\n",2230],["T_WHITESPACE","    ",2231],["T_COMMENT","\/\/ Here is a trick : I swap the temporary fd with the zip fd, in order to use\n",2231],["T_WHITESPACE","    ",2232],["T_COMMENT","\/\/ the following methods on the temporary fil and not the real archive\n",2232],["T_WHITESPACE","    ",2233],["T_VARIABLE","$v_swap",2233],["T_WHITESPACE"," ",2233],"=",["T_WHITESPACE"," ",2233],["T_VARIABLE","$this",2233],["T_OBJECT_OPERATOR","->",2233],["T_STRING","zip_fd",2233],";",["T_WHITESPACE","\n    ",2233],["T_VARIABLE","$this",2234],["T_OBJECT_OPERATOR","->",2234],["T_STRING","zip_fd",2234],["T_WHITESPACE"," ",2234],"=",["T_WHITESPACE"," ",2234],["T_VARIABLE","$v_zip_temp_fd",2234],";",["T_WHITESPACE","\n    ",2234],["T_VARIABLE","$v_zip_temp_fd",2235],["T_WHITESPACE"," ",2235],"=",["T_WHITESPACE"," ",2235],["T_VARIABLE","$v_swap",2235],";",["T_WHITESPACE","\n\n    ",2235],["T_COMMENT","\/\/ ----- Add the files\n",2237],["T_WHITESPACE","    ",2238],["T_VARIABLE","$v_header_list",2238],["T_WHITESPACE"," ",2238],"=",["T_WHITESPACE"," ",2238],["T_ARRAY","array",2238],"(",")",";",["T_WHITESPACE","\n    ",2238],["T_IF","if",2239],["T_WHITESPACE"," ",2239],"(","(",["T_VARIABLE","$v_result",2239],["T_WHITESPACE"," ",2239],"=",["T_WHITESPACE"," ",2239],["T_VARIABLE","$this",2239],["T_OBJECT_OPERATOR","->",2239],["T_STRING","privAddFileList",2239],"(",["T_VARIABLE","$p_filedescr_list",2239],",",["T_WHITESPACE"," ",2239],["T_VARIABLE","$v_header_list",2239],",",["T_WHITESPACE"," ",2239],["T_VARIABLE","$p_options",2239],")",")",["T_WHITESPACE"," ",2239],["T_IS_NOT_EQUAL","!=",2239],["T_WHITESPACE"," ",2239],["T_LNUMBER","1",2239],")",["T_WHITESPACE","\n    ",2239],"{",["T_WHITESPACE","\n      ",2240],["T_STRING","fclose",2241],"(",["T_VARIABLE","$v_zip_temp_fd",2241],")",";",["T_WHITESPACE","\n      ",2241],["T_VARIABLE","$this",2242],["T_OBJECT_OPERATOR","->",2242],["T_STRING","privCloseFd",2242],"(",")",";",["T_WHITESPACE","\n      ",2242],"@",["T_STRING","unlink",2243],"(",["T_VARIABLE","$v_zip_temp_name",2243],")",";",["T_WHITESPACE","\n      ",2243],["T_VARIABLE","$this",2244],["T_OBJECT_OPERATOR","->",2244],["T_STRING","privSwapBackMagicQuotes",2244],"(",")",";",["T_WHITESPACE","\n\n      ",2244],["T_COMMENT","\/\/ ----- Return\n",2246],["T_WHITESPACE","      ",2247],["T_RETURN","return",2247],["T_WHITESPACE"," ",2247],["T_VARIABLE","$v_result",2247],";",["T_WHITESPACE","\n    ",2247],"}",["T_WHITESPACE","\n\n    ",2248],["T_COMMENT","\/\/ ----- Store the offset of the central dir\n",2250],["T_WHITESPACE","    ",2251],["T_VARIABLE","$v_offset",2251],["T_WHITESPACE"," ",2251],"=",["T_WHITESPACE"," ",2251],"@",["T_STRING","ftell",2251],"(",["T_VARIABLE","$this",2251],["T_OBJECT_OPERATOR","->",2251],["T_STRING","zip_fd",2251],")",";",["T_WHITESPACE","\n\n    ",2251],["T_COMMENT","\/\/ ----- Copy the block of file headers from the old archive\n",2253],["T_WHITESPACE","    ",2254],["T_VARIABLE","$v_size",2254],["T_WHITESPACE"," ",2254],"=",["T_WHITESPACE"," ",2254],["T_VARIABLE","$v_central_dir",2254],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2254],"]",";",["T_WHITESPACE","\n    ",2254],["T_WHILE","while",2255],["T_WHITESPACE"," ",2255],"(",["T_VARIABLE","$v_size",2255],["T_WHITESPACE"," ",2255],["T_IS_NOT_EQUAL","!=",2255],["T_WHITESPACE"," ",2255],["T_LNUMBER","0",2255],")",["T_WHITESPACE","\n    ",2255],"{",["T_WHITESPACE","\n      ",2256],["T_VARIABLE","$v_read_size",2257],["T_WHITESPACE"," ",2257],"=",["T_WHITESPACE"," ",2257],"(",["T_VARIABLE","$v_size",2257],["T_WHITESPACE"," ",2257],"<",["T_WHITESPACE"," ",2257],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2257],["T_WHITESPACE"," ",2257],"?",["T_WHITESPACE"," ",2257],["T_VARIABLE","$v_size",2257],["T_WHITESPACE"," ",2257],":",["T_WHITESPACE"," ",2257],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2257],")",";",["T_WHITESPACE","\n      ",2257],["T_VARIABLE","$v_buffer",2258],["T_WHITESPACE"," ",2258],"=",["T_WHITESPACE"," ",2258],"@",["T_STRING","fread",2258],"(",["T_VARIABLE","$v_zip_temp_fd",2258],",",["T_WHITESPACE"," ",2258],["T_VARIABLE","$v_read_size",2258],")",";",["T_WHITESPACE","\n      ",2258],"@",["T_STRING","fwrite",2259],"(",["T_VARIABLE","$this",2259],["T_OBJECT_OPERATOR","->",2259],["T_STRING","zip_fd",2259],",",["T_WHITESPACE"," ",2259],["T_VARIABLE","$v_buffer",2259],",",["T_WHITESPACE"," ",2259],["T_VARIABLE","$v_read_size",2259],")",";",["T_WHITESPACE","\n      ",2259],["T_VARIABLE","$v_size",2260],["T_WHITESPACE"," ",2260],["T_MINUS_EQUAL","-=",2260],["T_WHITESPACE"," ",2260],["T_VARIABLE","$v_read_size",2260],";",["T_WHITESPACE","\n    ",2260],"}",["T_WHITESPACE","\n\n    ",2261],["T_COMMENT","\/\/ ----- Create the Central Dir files header\n",2263],["T_WHITESPACE","    ",2264],["T_FOR","for",2264],["T_WHITESPACE"," ",2264],"(",["T_VARIABLE","$i",2264],"=",["T_LNUMBER","0",2264],",",["T_WHITESPACE"," ",2264],["T_VARIABLE","$v_count",2264],"=",["T_LNUMBER","0",2264],";",["T_WHITESPACE"," ",2264],["T_VARIABLE","$i",2264],"<",["T_STRING","sizeof",2264],"(",["T_VARIABLE","$v_header_list",2264],")",";",["T_WHITESPACE"," ",2264],["T_VARIABLE","$i",2264],["T_INC","++",2264],")",["T_WHITESPACE","\n    ",2264],"{",["T_WHITESPACE","\n      ",2265],["T_COMMENT","\/\/ ----- Create the file header\n",2266],["T_WHITESPACE","      ",2267],["T_IF","if",2267],["T_WHITESPACE"," ",2267],"(",["T_VARIABLE","$v_header_list",2267],"[",["T_VARIABLE","$i",2267],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",2267],"]",["T_WHITESPACE"," ",2267],["T_IS_EQUAL","==",2267],["T_WHITESPACE"," ",2267],["T_CONSTANT_ENCAPSED_STRING","'ok'",2267],")",["T_WHITESPACE"," ",2267],"{",["T_WHITESPACE","\n        ",2267],["T_IF","if",2268],["T_WHITESPACE"," ",2268],"(","(",["T_VARIABLE","$v_result",2268],["T_WHITESPACE"," ",2268],"=",["T_WHITESPACE"," ",2268],["T_VARIABLE","$this",2268],["T_OBJECT_OPERATOR","->",2268],["T_STRING","privWriteCentralFileHeader",2268],"(",["T_VARIABLE","$v_header_list",2268],"[",["T_VARIABLE","$i",2268],"]",")",")",["T_WHITESPACE"," ",2268],["T_IS_NOT_EQUAL","!=",2268],["T_WHITESPACE"," ",2268],["T_LNUMBER","1",2268],")",["T_WHITESPACE"," ",2268],"{",["T_WHITESPACE","\n          ",2268],["T_STRING","fclose",2269],"(",["T_VARIABLE","$v_zip_temp_fd",2269],")",";",["T_WHITESPACE","\n          ",2269],["T_VARIABLE","$this",2270],["T_OBJECT_OPERATOR","->",2270],["T_STRING","privCloseFd",2270],"(",")",";",["T_WHITESPACE","\n          ",2270],"@",["T_STRING","unlink",2271],"(",["T_VARIABLE","$v_zip_temp_name",2271],")",";",["T_WHITESPACE","\n          ",2271],["T_VARIABLE","$this",2272],["T_OBJECT_OPERATOR","->",2272],["T_STRING","privSwapBackMagicQuotes",2272],"(",")",";",["T_WHITESPACE","\n\n          ",2272],["T_COMMENT","\/\/ ----- Return\n",2274],["T_WHITESPACE","          ",2275],["T_RETURN","return",2275],["T_WHITESPACE"," ",2275],["T_VARIABLE","$v_result",2275],";",["T_WHITESPACE","\n        ",2275],"}",["T_WHITESPACE","\n        ",2276],["T_VARIABLE","$v_count",2277],["T_INC","++",2277],";",["T_WHITESPACE","\n      ",2277],"}",["T_WHITESPACE","\n\n      ",2278],["T_COMMENT","\/\/ ----- Transform the header to a 'usable' info\n",2280],["T_WHITESPACE","      ",2281],["T_VARIABLE","$this",2281],["T_OBJECT_OPERATOR","->",2281],["T_STRING","privConvertHeader2FileInfo",2281],"(",["T_VARIABLE","$v_header_list",2281],"[",["T_VARIABLE","$i",2281],"]",",",["T_WHITESPACE"," ",2281],["T_VARIABLE","$p_result_list",2281],"[",["T_VARIABLE","$i",2281],"]",")",";",["T_WHITESPACE","\n    ",2281],"}",["T_WHITESPACE","\n\n    ",2282],["T_COMMENT","\/\/ ----- Zip file comment\n",2284],["T_WHITESPACE","    ",2285],["T_VARIABLE","$v_comment",2285],["T_WHITESPACE"," ",2285],"=",["T_WHITESPACE"," ",2285],["T_VARIABLE","$v_central_dir",2285],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2285],"]",";",["T_WHITESPACE","\n    ",2285],["T_IF","if",2286],["T_WHITESPACE"," ",2286],"(",["T_ISSET","isset",2286],"(",["T_VARIABLE","$p_options",2286],"[",["T_STRING","PCLZIP_OPT_COMMENT",2286],"]",")",")",["T_WHITESPACE"," ",2286],"{",["T_WHITESPACE","\n      ",2286],["T_VARIABLE","$v_comment",2287],["T_WHITESPACE"," ",2287],"=",["T_WHITESPACE"," ",2287],["T_VARIABLE","$p_options",2287],"[",["T_STRING","PCLZIP_OPT_COMMENT",2287],"]",";",["T_WHITESPACE","\n    ",2287],"}",["T_WHITESPACE","\n    ",2288],["T_IF","if",2289],["T_WHITESPACE"," ",2289],"(",["T_ISSET","isset",2289],"(",["T_VARIABLE","$p_options",2289],"[",["T_STRING","PCLZIP_OPT_ADD_COMMENT",2289],"]",")",")",["T_WHITESPACE"," ",2289],"{",["T_WHITESPACE","\n      ",2289],["T_VARIABLE","$v_comment",2290],["T_WHITESPACE"," ",2290],"=",["T_WHITESPACE"," ",2290],["T_VARIABLE","$v_comment",2290],".",["T_VARIABLE","$p_options",2290],"[",["T_STRING","PCLZIP_OPT_ADD_COMMENT",2290],"]",";",["T_WHITESPACE","\n    ",2290],"}",["T_WHITESPACE","\n    ",2291],["T_IF","if",2292],["T_WHITESPACE"," ",2292],"(",["T_ISSET","isset",2292],"(",["T_VARIABLE","$p_options",2292],"[",["T_STRING","PCLZIP_OPT_PREPEND_COMMENT",2292],"]",")",")",["T_WHITESPACE"," ",2292],"{",["T_WHITESPACE","\n      ",2292],["T_VARIABLE","$v_comment",2293],["T_WHITESPACE"," ",2293],"=",["T_WHITESPACE"," ",2293],["T_VARIABLE","$p_options",2293],"[",["T_STRING","PCLZIP_OPT_PREPEND_COMMENT",2293],"]",".",["T_VARIABLE","$v_comment",2293],";",["T_WHITESPACE","\n    ",2293],"}",["T_WHITESPACE","\n\n    ",2294],["T_COMMENT","\/\/ ----- Calculate the size of the central header\n",2296],["T_WHITESPACE","    ",2297],["T_VARIABLE","$v_size",2297],["T_WHITESPACE"," ",2297],"=",["T_WHITESPACE"," ",2297],"@",["T_STRING","ftell",2297],"(",["T_VARIABLE","$this",2297],["T_OBJECT_OPERATOR","->",2297],["T_STRING","zip_fd",2297],")","-",["T_VARIABLE","$v_offset",2297],";",["T_WHITESPACE","\n\n    ",2297],["T_COMMENT","\/\/ ----- Create the central dir footer\n",2299],["T_WHITESPACE","    ",2300],["T_IF","if",2300],["T_WHITESPACE"," ",2300],"(","(",["T_VARIABLE","$v_result",2300],["T_WHITESPACE"," ",2300],"=",["T_WHITESPACE"," ",2300],["T_VARIABLE","$this",2300],["T_OBJECT_OPERATOR","->",2300],["T_STRING","privWriteCentralHeader",2300],"(",["T_VARIABLE","$v_count",2300],"+",["T_VARIABLE","$v_central_dir",2300],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",2300],"]",",",["T_WHITESPACE"," ",2300],["T_VARIABLE","$v_size",2300],",",["T_WHITESPACE"," ",2300],["T_VARIABLE","$v_offset",2300],",",["T_WHITESPACE"," ",2300],["T_VARIABLE","$v_comment",2300],")",")",["T_WHITESPACE"," ",2300],["T_IS_NOT_EQUAL","!=",2300],["T_WHITESPACE"," ",2300],["T_LNUMBER","1",2300],")",["T_WHITESPACE","\n    ",2300],"{",["T_WHITESPACE","\n      ",2301],["T_COMMENT","\/\/ ----- Reset the file list\n",2302],["T_WHITESPACE","      ",2303],["T_UNSET","unset",2303],"(",["T_VARIABLE","$v_header_list",2303],")",";",["T_WHITESPACE","\n      ",2303],["T_VARIABLE","$this",2304],["T_OBJECT_OPERATOR","->",2304],["T_STRING","privSwapBackMagicQuotes",2304],"(",")",";",["T_WHITESPACE","\n\n      ",2304],["T_COMMENT","\/\/ ----- Return\n",2306],["T_WHITESPACE","      ",2307],["T_RETURN","return",2307],["T_WHITESPACE"," ",2307],["T_VARIABLE","$v_result",2307],";",["T_WHITESPACE","\n    ",2307],"}",["T_WHITESPACE","\n\n    ",2308],["T_COMMENT","\/\/ ----- Swap back the file descriptor\n",2310],["T_WHITESPACE","    ",2311],["T_VARIABLE","$v_swap",2311],["T_WHITESPACE"," ",2311],"=",["T_WHITESPACE"," ",2311],["T_VARIABLE","$this",2311],["T_OBJECT_OPERATOR","->",2311],["T_STRING","zip_fd",2311],";",["T_WHITESPACE","\n    ",2311],["T_VARIABLE","$this",2312],["T_OBJECT_OPERATOR","->",2312],["T_STRING","zip_fd",2312],["T_WHITESPACE"," ",2312],"=",["T_WHITESPACE"," ",2312],["T_VARIABLE","$v_zip_temp_fd",2312],";",["T_WHITESPACE","\n    ",2312],["T_VARIABLE","$v_zip_temp_fd",2313],["T_WHITESPACE"," ",2313],"=",["T_WHITESPACE"," ",2313],["T_VARIABLE","$v_swap",2313],";",["T_WHITESPACE","\n\n    ",2313],["T_COMMENT","\/\/ ----- Close\n",2315],["T_WHITESPACE","    ",2316],["T_VARIABLE","$this",2316],["T_OBJECT_OPERATOR","->",2316],["T_STRING","privCloseFd",2316],"(",")",";",["T_WHITESPACE","\n\n    ",2316],["T_COMMENT","\/\/ ----- Close the temporary file\n",2318],["T_WHITESPACE","    ",2319],"@",["T_STRING","fclose",2319],"(",["T_VARIABLE","$v_zip_temp_fd",2319],")",";",["T_WHITESPACE","\n\n    ",2319],["T_COMMENT","\/\/ ----- Magic quotes trick\n",2321],["T_WHITESPACE","    ",2322],["T_VARIABLE","$this",2322],["T_OBJECT_OPERATOR","->",2322],["T_STRING","privSwapBackMagicQuotes",2322],"(",")",";",["T_WHITESPACE","\n\n    ",2322],["T_COMMENT","\/\/ ----- Delete the zip file\n",2324],["T_WHITESPACE","    ",2325],["T_COMMENT","\/\/ TBC : I should test the result ...\n",2325],["T_WHITESPACE","    ",2326],"@",["T_STRING","unlink",2326],"(",["T_VARIABLE","$this",2326],["T_OBJECT_OPERATOR","->",2326],["T_STRING","zipname",2326],")",";",["T_WHITESPACE","\n\n    ",2326],["T_COMMENT","\/\/ ----- Rename the temporary file\n",2328],["T_WHITESPACE","    ",2329],["T_COMMENT","\/\/ TBC : I should test the result ...\n",2329],["T_WHITESPACE","    ",2330],["T_COMMENT","\/\/@rename($v_zip_temp_name, $this->zipname);\n",2330],["T_WHITESPACE","    ",2331],["T_STRING","PclZipUtilRename",2331],"(",["T_VARIABLE","$v_zip_temp_name",2331],",",["T_WHITESPACE"," ",2331],["T_VARIABLE","$this",2331],["T_OBJECT_OPERATOR","->",2331],["T_STRING","zipname",2331],")",";",["T_WHITESPACE","\n\n    ",2331],["T_COMMENT","\/\/ ----- Return\n",2333],["T_WHITESPACE","    ",2334],["T_RETURN","return",2334],["T_WHITESPACE"," ",2334],["T_VARIABLE","$v_result",2334],";",["T_WHITESPACE","\n  ",2334],"}",["T_WHITESPACE","\n  ",2335],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2336],["T_WHITESPACE","\n  ",2337],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2338],["T_WHITESPACE","  ",2339],["T_COMMENT","\/\/ Function : privOpenFd()\n",2339],["T_WHITESPACE","  ",2340],["T_COMMENT","\/\/ Description :\n",2340],["T_WHITESPACE","  ",2341],["T_COMMENT","\/\/ Parameters :\n",2341],["T_WHITESPACE","  ",2342],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2342],["T_WHITESPACE","  ",2343],["T_FUNCTION","function",2343],["T_WHITESPACE"," ",2343],["T_STRING","privOpenFd",2343],"(",["T_VARIABLE","$p_mode",2343],")",["T_WHITESPACE","\n  ",2343],"{",["T_WHITESPACE","\n    ",2344],["T_VARIABLE","$v_result",2345],"=",["T_LNUMBER","1",2345],";",["T_WHITESPACE","\n\n    ",2345],["T_COMMENT","\/\/ ----- Look if already open\n",2347],["T_WHITESPACE","    ",2348],["T_IF","if",2348],["T_WHITESPACE"," ",2348],"(",["T_VARIABLE","$this",2348],["T_OBJECT_OPERATOR","->",2348],["T_STRING","zip_fd",2348],["T_WHITESPACE"," ",2348],["T_IS_NOT_EQUAL","!=",2348],["T_WHITESPACE"," ",2348],["T_LNUMBER","0",2348],")",["T_WHITESPACE","\n    ",2348],"{",["T_WHITESPACE","\n      ",2349],["T_COMMENT","\/\/ ----- Error log\n",2350],["T_WHITESPACE","      ",2351],["T_STRING","PclZip",2351],["T_DOUBLE_COLON","::",2351],["T_STRING","privErrorLog",2351],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2351],",",["T_WHITESPACE"," ",2351],["T_CONSTANT_ENCAPSED_STRING","'Zip file \\''",2351],".",["T_VARIABLE","$this",2351],["T_OBJECT_OPERATOR","->",2351],["T_STRING","zipname",2351],".",["T_CONSTANT_ENCAPSED_STRING","'\\' already open'",2351],")",";",["T_WHITESPACE","\n\n      ",2351],["T_COMMENT","\/\/ ----- Return\n",2353],["T_WHITESPACE","      ",2354],["T_RETURN","return",2354],["T_WHITESPACE"," ",2354],["T_STRING","PclZip",2354],["T_DOUBLE_COLON","::",2354],["T_STRING","errorCode",2354],"(",")",";",["T_WHITESPACE","\n    ",2354],"}",["T_WHITESPACE","\n\n    ",2355],["T_COMMENT","\/\/ ----- Open the zip file\n",2357],["T_WHITESPACE","    ",2358],["T_IF","if",2358],["T_WHITESPACE"," ",2358],"(","(",["T_VARIABLE","$this",2358],["T_OBJECT_OPERATOR","->",2358],["T_STRING","zip_fd",2358],["T_WHITESPACE"," ",2358],"=",["T_WHITESPACE"," ",2358],"@",["T_STRING","fopen",2358],"(",["T_VARIABLE","$this",2358],["T_OBJECT_OPERATOR","->",2358],["T_STRING","zipname",2358],",",["T_WHITESPACE"," ",2358],["T_VARIABLE","$p_mode",2358],")",")",["T_WHITESPACE"," ",2358],["T_IS_EQUAL","==",2358],["T_WHITESPACE"," ",2358],["T_LNUMBER","0",2358],")",["T_WHITESPACE","\n    ",2358],"{",["T_WHITESPACE","\n      ",2359],["T_COMMENT","\/\/ ----- Error log\n",2360],["T_WHITESPACE","      ",2361],["T_STRING","PclZip",2361],["T_DOUBLE_COLON","::",2361],["T_STRING","privErrorLog",2361],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2361],",",["T_WHITESPACE"," ",2361],["T_CONSTANT_ENCAPSED_STRING","'Unable to open archive \\''",2361],".",["T_VARIABLE","$this",2361],["T_OBJECT_OPERATOR","->",2361],["T_STRING","zipname",2361],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in '",2361],".",["T_VARIABLE","$p_mode",2361],".",["T_CONSTANT_ENCAPSED_STRING","' mode'",2361],")",";",["T_WHITESPACE","\n\n      ",2361],["T_COMMENT","\/\/ ----- Return\n",2363],["T_WHITESPACE","      ",2364],["T_RETURN","return",2364],["T_WHITESPACE"," ",2364],["T_STRING","PclZip",2364],["T_DOUBLE_COLON","::",2364],["T_STRING","errorCode",2364],"(",")",";",["T_WHITESPACE","\n    ",2364],"}",["T_WHITESPACE","\n\n    ",2365],["T_COMMENT","\/\/ ----- Return\n",2367],["T_WHITESPACE","    ",2368],["T_RETURN","return",2368],["T_WHITESPACE"," ",2368],["T_VARIABLE","$v_result",2368],";",["T_WHITESPACE","\n  ",2368],"}",["T_WHITESPACE","\n  ",2369],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2370],["T_WHITESPACE","\n  ",2371],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2372],["T_WHITESPACE","  ",2373],["T_COMMENT","\/\/ Function : privCloseFd()\n",2373],["T_WHITESPACE","  ",2374],["T_COMMENT","\/\/ Description :\n",2374],["T_WHITESPACE","  ",2375],["T_COMMENT","\/\/ Parameters :\n",2375],["T_WHITESPACE","  ",2376],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2376],["T_WHITESPACE","  ",2377],["T_FUNCTION","function",2377],["T_WHITESPACE"," ",2377],["T_STRING","privCloseFd",2377],"(",")",["T_WHITESPACE","\n  ",2377],"{",["T_WHITESPACE","\n    ",2378],["T_VARIABLE","$v_result",2379],"=",["T_LNUMBER","1",2379],";",["T_WHITESPACE","\n\n    ",2379],["T_IF","if",2381],["T_WHITESPACE"," ",2381],"(",["T_VARIABLE","$this",2381],["T_OBJECT_OPERATOR","->",2381],["T_STRING","zip_fd",2381],["T_WHITESPACE"," ",2381],["T_IS_NOT_EQUAL","!=",2381],["T_WHITESPACE"," ",2381],["T_LNUMBER","0",2381],")",["T_WHITESPACE","\n      ",2381],"@",["T_STRING","fclose",2382],"(",["T_VARIABLE","$this",2382],["T_OBJECT_OPERATOR","->",2382],["T_STRING","zip_fd",2382],")",";",["T_WHITESPACE","\n    ",2382],["T_VARIABLE","$this",2383],["T_OBJECT_OPERATOR","->",2383],["T_STRING","zip_fd",2383],["T_WHITESPACE"," ",2383],"=",["T_WHITESPACE"," ",2383],["T_LNUMBER","0",2383],";",["T_WHITESPACE","\n\n    ",2383],["T_COMMENT","\/\/ ----- Return\n",2385],["T_WHITESPACE","    ",2386],["T_RETURN","return",2386],["T_WHITESPACE"," ",2386],["T_VARIABLE","$v_result",2386],";",["T_WHITESPACE","\n  ",2386],"}",["T_WHITESPACE","\n  ",2387],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2388],["T_WHITESPACE","\n  ",2389],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2390],["T_WHITESPACE","  ",2391],["T_COMMENT","\/\/ Function : privAddList()\n",2391],["T_WHITESPACE","  ",2392],["T_COMMENT","\/\/ Description :\n",2392],["T_WHITESPACE","  ",2393],["T_COMMENT","\/\/   $p_add_dir and $p_remove_dir will give the ability to memorize a path which is\n",2393],["T_WHITESPACE","  ",2394],["T_COMMENT","\/\/   different from the real path of the file. This is usefull if you want to have PclTar\n",2394],["T_WHITESPACE","  ",2395],["T_COMMENT","\/\/   running in any directory, and memorize relative path from an other directory.\n",2395],["T_WHITESPACE","  ",2396],["T_COMMENT","\/\/ Parameters :\n",2396],["T_WHITESPACE","  ",2397],["T_COMMENT","\/\/   $p_list : An array containing the file or directory names to add in the tar\n",2397],["T_WHITESPACE","  ",2398],["T_COMMENT","\/\/   $p_result_list : list of added files with their properties (specially the status field)\n",2398],["T_WHITESPACE","  ",2399],["T_COMMENT","\/\/   $p_add_dir : Path to add in the filename path archived\n",2399],["T_WHITESPACE","  ",2400],["T_COMMENT","\/\/   $p_remove_dir : Path to remove in the filename path archived\n",2400],["T_WHITESPACE","  ",2401],["T_COMMENT","\/\/ Return Values :\n",2401],["T_WHITESPACE","  ",2402],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2402],["T_COMMENT","\/\/  function privAddList($p_list, &$p_result_list, $p_add_dir, $p_remove_dir, $p_remove_all_dir, &$p_options)\n",2403],["T_WHITESPACE","  ",2404],["T_FUNCTION","function",2404],["T_WHITESPACE"," ",2404],["T_STRING","privAddList",2404],"(",["T_VARIABLE","$p_filedescr_list",2404],",",["T_WHITESPACE"," ",2404],"&",["T_VARIABLE","$p_result_list",2404],",",["T_WHITESPACE"," ",2404],"&",["T_VARIABLE","$p_options",2404],")",["T_WHITESPACE","\n  ",2404],"{",["T_WHITESPACE","\n    ",2405],["T_VARIABLE","$v_result",2406],"=",["T_LNUMBER","1",2406],";",["T_WHITESPACE","\n\n    ",2406],["T_COMMENT","\/\/ ----- Add the files\n",2408],["T_WHITESPACE","    ",2409],["T_VARIABLE","$v_header_list",2409],["T_WHITESPACE"," ",2409],"=",["T_WHITESPACE"," ",2409],["T_ARRAY","array",2409],"(",")",";",["T_WHITESPACE","\n    ",2409],["T_IF","if",2410],["T_WHITESPACE"," ",2410],"(","(",["T_VARIABLE","$v_result",2410],["T_WHITESPACE"," ",2410],"=",["T_WHITESPACE"," ",2410],["T_VARIABLE","$this",2410],["T_OBJECT_OPERATOR","->",2410],["T_STRING","privAddFileList",2410],"(",["T_VARIABLE","$p_filedescr_list",2410],",",["T_WHITESPACE"," ",2410],["T_VARIABLE","$v_header_list",2410],",",["T_WHITESPACE"," ",2410],["T_VARIABLE","$p_options",2410],")",")",["T_WHITESPACE"," ",2410],["T_IS_NOT_EQUAL","!=",2410],["T_WHITESPACE"," ",2410],["T_LNUMBER","1",2410],")",["T_WHITESPACE","\n    ",2410],"{",["T_WHITESPACE","\n      ",2411],["T_COMMENT","\/\/ ----- Return\n",2412],["T_WHITESPACE","      ",2413],["T_RETURN","return",2413],["T_WHITESPACE"," ",2413],["T_VARIABLE","$v_result",2413],";",["T_WHITESPACE","\n    ",2413],"}",["T_WHITESPACE","\n\n    ",2414],["T_COMMENT","\/\/ ----- Store the offset of the central dir\n",2416],["T_WHITESPACE","    ",2417],["T_VARIABLE","$v_offset",2417],["T_WHITESPACE"," ",2417],"=",["T_WHITESPACE"," ",2417],"@",["T_STRING","ftell",2417],"(",["T_VARIABLE","$this",2417],["T_OBJECT_OPERATOR","->",2417],["T_STRING","zip_fd",2417],")",";",["T_WHITESPACE","\n\n    ",2417],["T_COMMENT","\/\/ ----- Create the Central Dir files header\n",2419],["T_WHITESPACE","    ",2420],["T_FOR","for",2420],["T_WHITESPACE"," ",2420],"(",["T_VARIABLE","$i",2420],"=",["T_LNUMBER","0",2420],",",["T_VARIABLE","$v_count",2420],"=",["T_LNUMBER","0",2420],";",["T_WHITESPACE"," ",2420],["T_VARIABLE","$i",2420],"<",["T_STRING","sizeof",2420],"(",["T_VARIABLE","$v_header_list",2420],")",";",["T_WHITESPACE"," ",2420],["T_VARIABLE","$i",2420],["T_INC","++",2420],")",["T_WHITESPACE","\n    ",2420],"{",["T_WHITESPACE","\n      ",2421],["T_COMMENT","\/\/ ----- Create the file header\n",2422],["T_WHITESPACE","      ",2423],["T_IF","if",2423],["T_WHITESPACE"," ",2423],"(",["T_VARIABLE","$v_header_list",2423],"[",["T_VARIABLE","$i",2423],"]","[",["T_CONSTANT_ENCAPSED_STRING","'status'",2423],"]",["T_WHITESPACE"," ",2423],["T_IS_EQUAL","==",2423],["T_WHITESPACE"," ",2423],["T_CONSTANT_ENCAPSED_STRING","'ok'",2423],")",["T_WHITESPACE"," ",2423],"{",["T_WHITESPACE","\n        ",2423],["T_IF","if",2424],["T_WHITESPACE"," ",2424],"(","(",["T_VARIABLE","$v_result",2424],["T_WHITESPACE"," ",2424],"=",["T_WHITESPACE"," ",2424],["T_VARIABLE","$this",2424],["T_OBJECT_OPERATOR","->",2424],["T_STRING","privWriteCentralFileHeader",2424],"(",["T_VARIABLE","$v_header_list",2424],"[",["T_VARIABLE","$i",2424],"]",")",")",["T_WHITESPACE"," ",2424],["T_IS_NOT_EQUAL","!=",2424],["T_WHITESPACE"," ",2424],["T_LNUMBER","1",2424],")",["T_WHITESPACE"," ",2424],"{",["T_WHITESPACE","\n          ",2424],["T_COMMENT","\/\/ ----- Return\n",2425],["T_WHITESPACE","          ",2426],["T_RETURN","return",2426],["T_WHITESPACE"," ",2426],["T_VARIABLE","$v_result",2426],";",["T_WHITESPACE","\n        ",2426],"}",["T_WHITESPACE","\n        ",2427],["T_VARIABLE","$v_count",2428],["T_INC","++",2428],";",["T_WHITESPACE","\n      ",2428],"}",["T_WHITESPACE","\n\n      ",2429],["T_COMMENT","\/\/ ----- Transform the header to a 'usable' info\n",2431],["T_WHITESPACE","      ",2432],["T_VARIABLE","$this",2432],["T_OBJECT_OPERATOR","->",2432],["T_STRING","privConvertHeader2FileInfo",2432],"(",["T_VARIABLE","$v_header_list",2432],"[",["T_VARIABLE","$i",2432],"]",",",["T_WHITESPACE"," ",2432],["T_VARIABLE","$p_result_list",2432],"[",["T_VARIABLE","$i",2432],"]",")",";",["T_WHITESPACE","\n    ",2432],"}",["T_WHITESPACE","\n\n    ",2433],["T_COMMENT","\/\/ ----- Zip file comment\n",2435],["T_WHITESPACE","    ",2436],["T_VARIABLE","$v_comment",2436],["T_WHITESPACE"," ",2436],"=",["T_WHITESPACE"," ",2436],["T_CONSTANT_ENCAPSED_STRING","''",2436],";",["T_WHITESPACE","\n    ",2436],["T_IF","if",2437],["T_WHITESPACE"," ",2437],"(",["T_ISSET","isset",2437],"(",["T_VARIABLE","$p_options",2437],"[",["T_STRING","PCLZIP_OPT_COMMENT",2437],"]",")",")",["T_WHITESPACE"," ",2437],"{",["T_WHITESPACE","\n      ",2437],["T_VARIABLE","$v_comment",2438],["T_WHITESPACE"," ",2438],"=",["T_WHITESPACE"," ",2438],["T_VARIABLE","$p_options",2438],"[",["T_STRING","PCLZIP_OPT_COMMENT",2438],"]",";",["T_WHITESPACE","\n    ",2438],"}",["T_WHITESPACE","\n\n    ",2439],["T_COMMENT","\/\/ ----- Calculate the size of the central header\n",2441],["T_WHITESPACE","    ",2442],["T_VARIABLE","$v_size",2442],["T_WHITESPACE"," ",2442],"=",["T_WHITESPACE"," ",2442],"@",["T_STRING","ftell",2442],"(",["T_VARIABLE","$this",2442],["T_OBJECT_OPERATOR","->",2442],["T_STRING","zip_fd",2442],")","-",["T_VARIABLE","$v_offset",2442],";",["T_WHITESPACE","\n\n    ",2442],["T_COMMENT","\/\/ ----- Create the central dir footer\n",2444],["T_WHITESPACE","    ",2445],["T_IF","if",2445],["T_WHITESPACE"," ",2445],"(","(",["T_VARIABLE","$v_result",2445],["T_WHITESPACE"," ",2445],"=",["T_WHITESPACE"," ",2445],["T_VARIABLE","$this",2445],["T_OBJECT_OPERATOR","->",2445],["T_STRING","privWriteCentralHeader",2445],"(",["T_VARIABLE","$v_count",2445],",",["T_WHITESPACE"," ",2445],["T_VARIABLE","$v_size",2445],",",["T_WHITESPACE"," ",2445],["T_VARIABLE","$v_offset",2445],",",["T_WHITESPACE"," ",2445],["T_VARIABLE","$v_comment",2445],")",")",["T_WHITESPACE"," ",2445],["T_IS_NOT_EQUAL","!=",2445],["T_WHITESPACE"," ",2445],["T_LNUMBER","1",2445],")",["T_WHITESPACE","\n    ",2445],"{",["T_WHITESPACE","\n      ",2446],["T_COMMENT","\/\/ ----- Reset the file list\n",2447],["T_WHITESPACE","      ",2448],["T_UNSET","unset",2448],"(",["T_VARIABLE","$v_header_list",2448],")",";",["T_WHITESPACE","\n\n      ",2448],["T_COMMENT","\/\/ ----- Return\n",2450],["T_WHITESPACE","      ",2451],["T_RETURN","return",2451],["T_WHITESPACE"," ",2451],["T_VARIABLE","$v_result",2451],";",["T_WHITESPACE","\n    ",2451],"}",["T_WHITESPACE","\n\n    ",2452],["T_COMMENT","\/\/ ----- Return\n",2454],["T_WHITESPACE","    ",2455],["T_RETURN","return",2455],["T_WHITESPACE"," ",2455],["T_VARIABLE","$v_result",2455],";",["T_WHITESPACE","\n  ",2455],"}",["T_WHITESPACE","\n  ",2456],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2457],["T_WHITESPACE","\n  ",2458],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2459],["T_WHITESPACE","  ",2460],["T_COMMENT","\/\/ Function : privAddFileList()\n",2460],["T_WHITESPACE","  ",2461],["T_COMMENT","\/\/ Description :\n",2461],["T_WHITESPACE","  ",2462],["T_COMMENT","\/\/ Parameters :\n",2462],["T_WHITESPACE","  ",2463],["T_COMMENT","\/\/   $p_filedescr_list : An array containing the file description\n",2463],["T_WHITESPACE","  ",2464],["T_COMMENT","\/\/                      or directory names to add in the zip\n",2464],["T_WHITESPACE","  ",2465],["T_COMMENT","\/\/   $p_result_list : list of added files with their properties (specially the status field)\n",2465],["T_WHITESPACE","  ",2466],["T_COMMENT","\/\/ Return Values :\n",2466],["T_WHITESPACE","  ",2467],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2467],["T_WHITESPACE","  ",2468],["T_FUNCTION","function",2468],["T_WHITESPACE"," ",2468],["T_STRING","privAddFileList",2468],"(",["T_VARIABLE","$p_filedescr_list",2468],",",["T_WHITESPACE"," ",2468],"&",["T_VARIABLE","$p_result_list",2468],",",["T_WHITESPACE"," ",2468],"&",["T_VARIABLE","$p_options",2468],")",["T_WHITESPACE","\n  ",2468],"{",["T_WHITESPACE","\n    ",2469],["T_VARIABLE","$v_result",2470],"=",["T_LNUMBER","1",2470],";",["T_WHITESPACE","\n    ",2470],["T_VARIABLE","$v_header",2471],["T_WHITESPACE"," ",2471],"=",["T_WHITESPACE"," ",2471],["T_ARRAY","array",2471],"(",")",";",["T_WHITESPACE","\n\n    ",2471],["T_COMMENT","\/\/ ----- Recuperate the current number of elt in list\n",2473],["T_WHITESPACE","    ",2474],["T_VARIABLE","$v_nb",2474],["T_WHITESPACE"," ",2474],"=",["T_WHITESPACE"," ",2474],["T_STRING","sizeof",2474],"(",["T_VARIABLE","$p_result_list",2474],")",";",["T_WHITESPACE","\n\n    ",2474],["T_COMMENT","\/\/ ----- Loop on the files\n",2476],["T_WHITESPACE","    ",2477],["T_FOR","for",2477],["T_WHITESPACE"," ",2477],"(",["T_VARIABLE","$j",2477],"=",["T_LNUMBER","0",2477],";",["T_WHITESPACE"," ",2477],"(",["T_VARIABLE","$j",2477],"<",["T_STRING","sizeof",2477],"(",["T_VARIABLE","$p_filedescr_list",2477],")",")",["T_WHITESPACE"," ",2477],["T_BOOLEAN_AND","&&",2477],["T_WHITESPACE"," ",2477],"(",["T_VARIABLE","$v_result",2477],["T_IS_EQUAL","==",2477],["T_LNUMBER","1",2477],")",";",["T_WHITESPACE"," ",2477],["T_VARIABLE","$j",2477],["T_INC","++",2477],")",["T_WHITESPACE"," ",2477],"{",["T_WHITESPACE","\n      ",2477],["T_COMMENT","\/\/ ----- Format the filename\n",2478],["T_WHITESPACE","      ",2479],["T_VARIABLE","$p_filedescr_list",2479],"[",["T_VARIABLE","$j",2479],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2479],"]",["T_WHITESPACE","\n      ",2479],"=",["T_WHITESPACE"," ",2480],["T_STRING","PclZipUtilTranslateWinPath",2480],"(",["T_VARIABLE","$p_filedescr_list",2480],"[",["T_VARIABLE","$j",2480],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2480],"]",",",["T_WHITESPACE"," ",2480],["T_STRING","false",2480],")",";",["T_WHITESPACE","\n\n\n      ",2480],["T_COMMENT","\/\/ ----- Skip empty file names\n",2483],["T_WHITESPACE","      ",2484],["T_COMMENT","\/\/ TBC : Can this be possible ? not checked in DescrParseAtt ?\n",2484],["T_WHITESPACE","      ",2485],["T_IF","if",2485],["T_WHITESPACE"," ",2485],"(",["T_VARIABLE","$p_filedescr_list",2485],"[",["T_VARIABLE","$j",2485],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2485],"]",["T_WHITESPACE"," ",2485],["T_IS_EQUAL","==",2485],["T_WHITESPACE"," ",2485],["T_CONSTANT_ENCAPSED_STRING","\"\"",2485],")",["T_WHITESPACE"," ",2485],"{",["T_WHITESPACE","\n        ",2485],["T_CONTINUE","continue",2486],";",["T_WHITESPACE","\n      ",2486],"}",["T_WHITESPACE","\n\n      ",2487],["T_COMMENT","\/\/ ----- Check the filename\n",2489],["T_WHITESPACE","      ",2490],["T_IF","if",2490],["T_WHITESPACE"," ",2490],"(",["T_WHITESPACE","   ",2490],"(",["T_VARIABLE","$p_filedescr_list",2490],"[",["T_VARIABLE","$j",2490],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",2490],"]",["T_WHITESPACE"," ",2490],["T_IS_NOT_EQUAL","!=",2490],["T_WHITESPACE"," ",2490],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2490],")",["T_WHITESPACE","\n          ",2490],["T_BOOLEAN_AND","&&",2491],["T_WHITESPACE"," ",2491],"(","!",["T_STRING","file_exists",2491],"(",["T_VARIABLE","$p_filedescr_list",2491],"[",["T_VARIABLE","$j",2491],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2491],"]",")",")",")",["T_WHITESPACE"," ",2491],"{",["T_WHITESPACE","\n        ",2491],["T_STRING","PclZip",2492],["T_DOUBLE_COLON","::",2492],["T_STRING","privErrorLog",2492],"(",["T_STRING","PCLZIP_ERR_MISSING_FILE",2492],",",["T_WHITESPACE"," ",2492],["T_CONSTANT_ENCAPSED_STRING","\"File '\"",2492],".",["T_VARIABLE","$p_filedescr_list",2492],"[",["T_VARIABLE","$j",2492],"]","[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2492],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' does not exist\"",2492],")",";",["T_WHITESPACE","\n        ",2492],["T_RETURN","return",2493],["T_WHITESPACE"," ",2493],["T_STRING","PclZip",2493],["T_DOUBLE_COLON","::",2493],["T_STRING","errorCode",2493],"(",")",";",["T_WHITESPACE","\n      ",2493],"}",["T_WHITESPACE","\n\n      ",2494],["T_COMMENT","\/\/ ----- Look if it is a file or a dir with no all path remove option\n",2496],["T_WHITESPACE","      ",2497],["T_COMMENT","\/\/ or a dir with all its path removed\n",2497],["T_COMMENT","\/\/      if (   (is_file($p_filedescr_list[$j]['filename']))\n",2498],["T_COMMENT","\/\/          || (   is_dir($p_filedescr_list[$j]['filename'])\n",2499],["T_WHITESPACE","      ",2500],["T_IF","if",2500],["T_WHITESPACE"," ",2500],"(",["T_WHITESPACE","   ",2500],"(",["T_VARIABLE","$p_filedescr_list",2500],"[",["T_VARIABLE","$j",2500],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",2500],"]",["T_WHITESPACE"," ",2500],["T_IS_EQUAL","==",2500],["T_WHITESPACE"," ",2500],["T_CONSTANT_ENCAPSED_STRING","'file'",2500],")",["T_WHITESPACE","\n          ",2500],["T_BOOLEAN_OR","||",2501],["T_WHITESPACE"," ",2501],"(",["T_VARIABLE","$p_filedescr_list",2501],"[",["T_VARIABLE","$j",2501],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",2501],"]",["T_WHITESPACE"," ",2501],["T_IS_EQUAL","==",2501],["T_WHITESPACE"," ",2501],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2501],")",["T_WHITESPACE","\n          ",2501],["T_BOOLEAN_OR","||",2502],["T_WHITESPACE"," ",2502],"(",["T_WHITESPACE","   ",2502],"(",["T_VARIABLE","$p_filedescr_list",2502],"[",["T_VARIABLE","$j",2502],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",2502],"]",["T_WHITESPACE"," ",2502],["T_IS_EQUAL","==",2502],["T_WHITESPACE"," ",2502],["T_CONSTANT_ENCAPSED_STRING","'folder'",2502],")",["T_WHITESPACE","\n              ",2502],["T_BOOLEAN_AND","&&",2503],["T_WHITESPACE"," ",2503],"(",["T_WHITESPACE","   ",2503],"!",["T_ISSET","isset",2503],"(",["T_VARIABLE","$p_options",2503],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",2503],"]",")",["T_WHITESPACE","\n                  ",2503],["T_BOOLEAN_OR","||",2504],["T_WHITESPACE"," ",2504],"!",["T_VARIABLE","$p_options",2504],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",2504],"]",")",")",["T_WHITESPACE","\n          ",2504],")",["T_WHITESPACE"," ",2505],"{",["T_WHITESPACE","\n\n        ",2505],["T_COMMENT","\/\/ ----- Add the file\n",2507],["T_WHITESPACE","        ",2508],["T_VARIABLE","$v_result",2508],["T_WHITESPACE"," ",2508],"=",["T_WHITESPACE"," ",2508],["T_VARIABLE","$this",2508],["T_OBJECT_OPERATOR","->",2508],["T_STRING","privAddFile",2508],"(",["T_VARIABLE","$p_filedescr_list",2508],"[",["T_VARIABLE","$j",2508],"]",",",["T_WHITESPACE"," ",2508],["T_VARIABLE","$v_header",2508],",",["T_WHITESPACE","\n                                       ",2508],["T_VARIABLE","$p_options",2509],")",";",["T_WHITESPACE","\n        ",2509],["T_IF","if",2510],["T_WHITESPACE"," ",2510],"(",["T_VARIABLE","$v_result",2510],["T_WHITESPACE"," ",2510],["T_IS_NOT_EQUAL","!=",2510],["T_WHITESPACE"," ",2510],["T_LNUMBER","1",2510],")",["T_WHITESPACE"," ",2510],"{",["T_WHITESPACE","\n          ",2510],["T_RETURN","return",2511],["T_WHITESPACE"," ",2511],["T_VARIABLE","$v_result",2511],";",["T_WHITESPACE","\n        ",2511],"}",["T_WHITESPACE","\n\n        ",2512],["T_COMMENT","\/\/ ----- Store the file infos\n",2514],["T_WHITESPACE","        ",2515],["T_VARIABLE","$p_result_list",2515],"[",["T_VARIABLE","$v_nb",2515],["T_INC","++",2515],"]",["T_WHITESPACE"," ",2515],"=",["T_WHITESPACE"," ",2515],["T_VARIABLE","$v_header",2515],";",["T_WHITESPACE","\n      ",2515],"}",["T_WHITESPACE","\n    ",2516],"}",["T_WHITESPACE","\n\n    ",2517],["T_COMMENT","\/\/ ----- Return\n",2519],["T_WHITESPACE","    ",2520],["T_RETURN","return",2520],["T_WHITESPACE"," ",2520],["T_VARIABLE","$v_result",2520],";",["T_WHITESPACE","\n  ",2520],"}",["T_WHITESPACE","\n  ",2521],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2522],["T_WHITESPACE","\n  ",2523],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2524],["T_WHITESPACE","  ",2525],["T_COMMENT","\/\/ Function : privAddFile()\n",2525],["T_WHITESPACE","  ",2526],["T_COMMENT","\/\/ Description :\n",2526],["T_WHITESPACE","  ",2527],["T_COMMENT","\/\/ Parameters :\n",2527],["T_WHITESPACE","  ",2528],["T_COMMENT","\/\/ Return Values :\n",2528],["T_WHITESPACE","  ",2529],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2529],["T_WHITESPACE","  ",2530],["T_FUNCTION","function",2530],["T_WHITESPACE"," ",2530],["T_STRING","privAddFile",2530],"(",["T_VARIABLE","$p_filedescr",2530],",",["T_WHITESPACE"," ",2530],"&",["T_VARIABLE","$p_header",2530],",",["T_WHITESPACE"," ",2530],"&",["T_VARIABLE","$p_options",2530],")",["T_WHITESPACE","\n  ",2530],"{",["T_WHITESPACE","\n    ",2531],["T_VARIABLE","$v_result",2532],"=",["T_LNUMBER","1",2532],";",["T_WHITESPACE","\n\n    ",2532],["T_COMMENT","\/\/ ----- Working variable\n",2534],["T_WHITESPACE","    ",2535],["T_VARIABLE","$p_filename",2535],["T_WHITESPACE"," ",2535],"=",["T_WHITESPACE"," ",2535],["T_VARIABLE","$p_filedescr",2535],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2535],"]",";",["T_WHITESPACE","\n\n    ",2535],["T_COMMENT","\/\/ TBC : Already done in the fileAtt check ... ?\n",2537],["T_WHITESPACE","    ",2538],["T_IF","if",2538],["T_WHITESPACE"," ",2538],"(",["T_VARIABLE","$p_filename",2538],["T_WHITESPACE"," ",2538],["T_IS_EQUAL","==",2538],["T_WHITESPACE"," ",2538],["T_CONSTANT_ENCAPSED_STRING","\"\"",2538],")",["T_WHITESPACE"," ",2538],"{",["T_WHITESPACE","\n      ",2538],["T_COMMENT","\/\/ ----- Error log\n",2539],["T_WHITESPACE","      ",2540],["T_STRING","PclZip",2540],["T_DOUBLE_COLON","::",2540],["T_STRING","privErrorLog",2540],"(",["T_STRING","PCLZIP_ERR_INVALID_PARAMETER",2540],",",["T_WHITESPACE"," ",2540],["T_CONSTANT_ENCAPSED_STRING","\"Invalid file list parameter (invalid or empty list)\"",2540],")",";",["T_WHITESPACE","\n\n      ",2540],["T_COMMENT","\/\/ ----- Return\n",2542],["T_WHITESPACE","      ",2543],["T_RETURN","return",2543],["T_WHITESPACE"," ",2543],["T_STRING","PclZip",2543],["T_DOUBLE_COLON","::",2543],["T_STRING","errorCode",2543],"(",")",";",["T_WHITESPACE","\n    ",2543],"}",["T_WHITESPACE","\n\n    ",2544],["T_COMMENT","\/\/ ----- Look for a stored different filename\n",2546],["T_WHITESPACE","    ",2547],["T_COMMENT","\/* TBC : Removed\n    if (isset($p_filedescr['stored_filename'])) {\n      $v_stored_filename = $p_filedescr['stored_filename'];\n    }\n    else {\n      $v_stored_filename = $p_filedescr['stored_filename'];\n    }\n    *\/",2547],["T_WHITESPACE","\n\n    ",2554],["T_COMMENT","\/\/ ----- Set the file properties\n",2556],["T_WHITESPACE","    ",2557],["T_STRING","clearstatcache",2557],"(",")",";",["T_WHITESPACE","\n    ",2557],["T_VARIABLE","$p_header",2558],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",2558],"]",["T_WHITESPACE"," ",2558],"=",["T_WHITESPACE"," ",2558],["T_LNUMBER","20",2558],";",["T_WHITESPACE","\n    ",2558],["T_VARIABLE","$p_header",2559],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",2559],"]",["T_WHITESPACE"," ",2559],"=",["T_WHITESPACE"," ",2559],["T_LNUMBER","10",2559],";",["T_WHITESPACE","\n    ",2559],["T_VARIABLE","$p_header",2560],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",2560],"]",["T_WHITESPACE"," ",2560],"=",["T_WHITESPACE"," ",2560],["T_LNUMBER","0",2560],";",["T_WHITESPACE","\n    ",2560],["T_VARIABLE","$p_header",2561],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2561],"]",["T_WHITESPACE"," ",2561],"=",["T_WHITESPACE"," ",2561],["T_LNUMBER","0",2561],";",["T_WHITESPACE","\n    ",2561],["T_VARIABLE","$p_header",2562],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",2562],"]",["T_WHITESPACE"," ",2562],"=",["T_WHITESPACE"," ",2562],["T_LNUMBER","0",2562],";",["T_WHITESPACE","\n    ",2562],["T_VARIABLE","$p_header",2563],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2563],"]",["T_WHITESPACE"," ",2563],"=",["T_WHITESPACE"," ",2563],["T_LNUMBER","0",2563],";",["T_WHITESPACE","\n    ",2563],["T_VARIABLE","$p_header",2564],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",2564],"]",["T_WHITESPACE"," ",2564],"=",["T_WHITESPACE"," ",2564],["T_STRING","strlen",2564],"(",["T_VARIABLE","$p_filename",2564],")",";",["T_WHITESPACE","\n    ",2564],["T_VARIABLE","$p_header",2565],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",2565],"]",["T_WHITESPACE"," ",2565],"=",["T_WHITESPACE"," ",2565],["T_LNUMBER","0",2565],";",["T_WHITESPACE","\n    ",2565],["T_VARIABLE","$p_header",2566],"[",["T_CONSTANT_ENCAPSED_STRING","'disk'",2566],"]",["T_WHITESPACE"," ",2566],"=",["T_WHITESPACE"," ",2566],["T_LNUMBER","0",2566],";",["T_WHITESPACE","\n    ",2566],["T_VARIABLE","$p_header",2567],"[",["T_CONSTANT_ENCAPSED_STRING","'internal'",2567],"]",["T_WHITESPACE"," ",2567],"=",["T_WHITESPACE"," ",2567],["T_LNUMBER","0",2567],";",["T_WHITESPACE","\n    ",2567],["T_VARIABLE","$p_header",2568],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",2568],"]",["T_WHITESPACE"," ",2568],"=",["T_WHITESPACE"," ",2568],["T_LNUMBER","0",2568],";",["T_WHITESPACE","\n    ",2568],["T_VARIABLE","$p_header",2569],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2569],"]",["T_WHITESPACE"," ",2569],"=",["T_WHITESPACE"," ",2569],["T_VARIABLE","$p_filename",2569],";",["T_WHITESPACE","\n",2569],["T_COMMENT","\/\/ TBC : Removed    $p_header['stored_filename'] = $v_stored_filename;\n",2570],["T_WHITESPACE","    ",2571],["T_VARIABLE","$p_header",2571],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2571],"]",["T_WHITESPACE"," ",2571],"=",["T_WHITESPACE"," ",2571],["T_VARIABLE","$p_filedescr",2571],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2571],"]",";",["T_WHITESPACE","\n    ",2571],["T_VARIABLE","$p_header",2572],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",2572],"]",["T_WHITESPACE"," ",2572],"=",["T_WHITESPACE"," ",2572],["T_CONSTANT_ENCAPSED_STRING","''",2572],";",["T_WHITESPACE","\n    ",2572],["T_VARIABLE","$p_header",2573],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",2573],"]",["T_WHITESPACE"," ",2573],"=",["T_WHITESPACE"," ",2573],["T_CONSTANT_ENCAPSED_STRING","'ok'",2573],";",["T_WHITESPACE","\n    ",2573],["T_VARIABLE","$p_header",2574],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",2574],"]",["T_WHITESPACE"," ",2574],"=",["T_WHITESPACE"," ",2574],"-",["T_LNUMBER","1",2574],";",["T_WHITESPACE","\n\n    ",2574],["T_COMMENT","\/\/ ----- Look for regular file\n",2576],["T_WHITESPACE","    ",2577],["T_IF","if",2577],["T_WHITESPACE"," ",2577],"(",["T_VARIABLE","$p_filedescr",2577],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2577],"]",["T_IS_EQUAL","==",2577],["T_CONSTANT_ENCAPSED_STRING","'file'",2577],")",["T_WHITESPACE"," ",2577],"{",["T_WHITESPACE","\n      ",2577],["T_VARIABLE","$p_header",2578],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",2578],"]",["T_WHITESPACE"," ",2578],"=",["T_WHITESPACE"," ",2578],["T_LNUMBER","0x00000000",2578],";",["T_WHITESPACE","\n      ",2578],["T_VARIABLE","$p_header",2579],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2579],"]",["T_WHITESPACE"," ",2579],"=",["T_WHITESPACE"," ",2579],["T_STRING","filesize",2579],"(",["T_VARIABLE","$p_filename",2579],")",";",["T_WHITESPACE","\n    ",2579],"}",["T_WHITESPACE","\n\n    ",2580],["T_COMMENT","\/\/ ----- Look for regular folder\n",2582],["T_WHITESPACE","    ",2583],["T_ELSE","else",2583],["T_WHITESPACE"," ",2583],["T_IF","if",2583],["T_WHITESPACE"," ",2583],"(",["T_VARIABLE","$p_filedescr",2583],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2583],"]",["T_IS_EQUAL","==",2583],["T_CONSTANT_ENCAPSED_STRING","'folder'",2583],")",["T_WHITESPACE"," ",2583],"{",["T_WHITESPACE","\n      ",2583],["T_VARIABLE","$p_header",2584],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",2584],"]",["T_WHITESPACE"," ",2584],"=",["T_WHITESPACE"," ",2584],["T_LNUMBER","0x00000010",2584],";",["T_WHITESPACE","\n      ",2584],["T_VARIABLE","$p_header",2585],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2585],"]",["T_WHITESPACE"," ",2585],"=",["T_WHITESPACE"," ",2585],["T_STRING","filemtime",2585],"(",["T_VARIABLE","$p_filename",2585],")",";",["T_WHITESPACE","\n      ",2585],["T_VARIABLE","$p_header",2586],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2586],"]",["T_WHITESPACE"," ",2586],"=",["T_WHITESPACE"," ",2586],["T_STRING","filesize",2586],"(",["T_VARIABLE","$p_filename",2586],")",";",["T_WHITESPACE","\n    ",2586],"}",["T_WHITESPACE","\n\n    ",2587],["T_COMMENT","\/\/ ----- Look for virtual file\n",2589],["T_WHITESPACE","    ",2590],["T_ELSE","else",2590],["T_WHITESPACE"," ",2590],["T_IF","if",2590],["T_WHITESPACE"," ",2590],"(",["T_VARIABLE","$p_filedescr",2590],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2590],"]",["T_WHITESPACE"," ",2590],["T_IS_EQUAL","==",2590],["T_WHITESPACE"," ",2590],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2590],")",["T_WHITESPACE"," ",2590],"{",["T_WHITESPACE","\n      ",2590],["T_VARIABLE","$p_header",2591],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",2591],"]",["T_WHITESPACE"," ",2591],"=",["T_WHITESPACE"," ",2591],["T_LNUMBER","0x00000000",2591],";",["T_WHITESPACE","\n      ",2591],["T_VARIABLE","$p_header",2592],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2592],"]",["T_WHITESPACE"," ",2592],"=",["T_WHITESPACE"," ",2592],["T_STRING","strlen",2592],"(",["T_VARIABLE","$p_filedescr",2592],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",2592],"]",")",";",["T_WHITESPACE","\n    ",2592],"}",["T_WHITESPACE","\n\n\n    ",2593],["T_COMMENT","\/\/ ----- Look for filetime\n",2596],["T_WHITESPACE","    ",2597],["T_IF","if",2597],["T_WHITESPACE"," ",2597],"(",["T_ISSET","isset",2597],"(",["T_VARIABLE","$p_filedescr",2597],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2597],"]",")",")",["T_WHITESPACE"," ",2597],"{",["T_WHITESPACE","\n      ",2597],["T_VARIABLE","$p_header",2598],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2598],"]",["T_WHITESPACE"," ",2598],"=",["T_WHITESPACE"," ",2598],["T_VARIABLE","$p_filedescr",2598],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2598],"]",";",["T_WHITESPACE","\n    ",2598],"}",["T_WHITESPACE","\n    ",2599],["T_ELSE","else",2600],["T_WHITESPACE"," ",2600],["T_IF","if",2600],["T_WHITESPACE"," ",2600],"(",["T_VARIABLE","$p_filedescr",2600],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2600],"]",["T_WHITESPACE"," ",2600],["T_IS_EQUAL","==",2600],["T_WHITESPACE"," ",2600],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2600],")",["T_WHITESPACE"," ",2600],"{",["T_WHITESPACE","\n      ",2600],["T_VARIABLE","$p_header",2601],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2601],"]",["T_WHITESPACE"," ",2601],"=",["T_WHITESPACE"," ",2601],["T_STRING","time",2601],"(",")",";",["T_WHITESPACE","\n    ",2601],"}",["T_WHITESPACE","\n    ",2602],["T_ELSE","else",2603],["T_WHITESPACE"," ",2603],"{",["T_WHITESPACE","\n      ",2603],["T_VARIABLE","$p_header",2604],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",2604],"]",["T_WHITESPACE"," ",2604],"=",["T_WHITESPACE"," ",2604],["T_STRING","filemtime",2604],"(",["T_VARIABLE","$p_filename",2604],")",";",["T_WHITESPACE","\n    ",2604],"}",["T_WHITESPACE","\n\n    ",2605],["T_COMMENT","\/\/ ------ Look for file comment\n",2607],["T_WHITESPACE","    ",2608],["T_IF","if",2608],["T_WHITESPACE"," ",2608],"(",["T_ISSET","isset",2608],"(",["T_VARIABLE","$p_filedescr",2608],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2608],"]",")",")",["T_WHITESPACE"," ",2608],"{",["T_WHITESPACE","\n      ",2608],["T_VARIABLE","$p_header",2609],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",2609],"]",["T_WHITESPACE"," ",2609],"=",["T_WHITESPACE"," ",2609],["T_STRING","strlen",2609],"(",["T_VARIABLE","$p_filedescr",2609],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2609],"]",")",";",["T_WHITESPACE","\n      ",2609],["T_VARIABLE","$p_header",2610],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2610],"]",["T_WHITESPACE"," ",2610],"=",["T_WHITESPACE"," ",2610],["T_VARIABLE","$p_filedescr",2610],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2610],"]",";",["T_WHITESPACE","\n    ",2610],"}",["T_WHITESPACE","\n    ",2611],["T_ELSE","else",2612],["T_WHITESPACE"," ",2612],"{",["T_WHITESPACE","\n      ",2612],["T_VARIABLE","$p_header",2613],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",2613],"]",["T_WHITESPACE"," ",2613],"=",["T_WHITESPACE"," ",2613],["T_LNUMBER","0",2613],";",["T_WHITESPACE","\n      ",2613],["T_VARIABLE","$p_header",2614],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",2614],"]",["T_WHITESPACE"," ",2614],"=",["T_WHITESPACE"," ",2614],["T_CONSTANT_ENCAPSED_STRING","''",2614],";",["T_WHITESPACE","\n    ",2614],"}",["T_WHITESPACE","\n\n    ",2615],["T_COMMENT","\/\/ ----- Look for pre-add callback\n",2617],["T_WHITESPACE","    ",2618],["T_IF","if",2618],["T_WHITESPACE"," ",2618],"(",["T_ISSET","isset",2618],"(",["T_VARIABLE","$p_options",2618],"[",["T_STRING","PCLZIP_CB_PRE_ADD",2618],"]",")",")",["T_WHITESPACE"," ",2618],"{",["T_WHITESPACE","\n\n      ",2618],["T_COMMENT","\/\/ ----- Generate a local information\n",2620],["T_WHITESPACE","      ",2621],["T_VARIABLE","$v_local_header",2621],["T_WHITESPACE"," ",2621],"=",["T_WHITESPACE"," ",2621],["T_ARRAY","array",2621],"(",")",";",["T_WHITESPACE","\n      ",2621],["T_VARIABLE","$this",2622],["T_OBJECT_OPERATOR","->",2622],["T_STRING","privConvertHeader2FileInfo",2622],"(",["T_VARIABLE","$p_header",2622],",",["T_WHITESPACE"," ",2622],["T_VARIABLE","$v_local_header",2622],")",";",["T_WHITESPACE","\n\n      ",2622],["T_COMMENT","\/\/ ----- Call the callback\n",2624],["T_WHITESPACE","      ",2625],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",2625],["T_WHITESPACE","      ",2626],["T_COMMENT","\/\/ header.\n",2626],["T_WHITESPACE","      ",2627],["T_VARIABLE","$v_result",2627],["T_WHITESPACE"," ",2627],"=",["T_WHITESPACE"," ",2627],["T_VARIABLE","$p_options",2627],"[",["T_STRING","PCLZIP_CB_PRE_ADD",2627],"]","(",["T_STRING","PCLZIP_CB_PRE_ADD",2627],",",["T_WHITESPACE"," ",2627],["T_VARIABLE","$v_local_header",2627],")",";",["T_WHITESPACE","\n      ",2627],["T_IF","if",2628],["T_WHITESPACE"," ",2628],"(",["T_VARIABLE","$v_result",2628],["T_WHITESPACE"," ",2628],["T_IS_EQUAL","==",2628],["T_WHITESPACE"," ",2628],["T_LNUMBER","0",2628],")",["T_WHITESPACE"," ",2628],"{",["T_WHITESPACE","\n        ",2628],["T_COMMENT","\/\/ ----- Change the file status\n",2629],["T_WHITESPACE","        ",2630],["T_VARIABLE","$p_header",2630],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",2630],"]",["T_WHITESPACE"," ",2630],"=",["T_WHITESPACE"," ",2630],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",2630],";",["T_WHITESPACE","\n        ",2630],["T_VARIABLE","$v_result",2631],["T_WHITESPACE"," ",2631],"=",["T_WHITESPACE"," ",2631],["T_LNUMBER","1",2631],";",["T_WHITESPACE","\n      ",2631],"}",["T_WHITESPACE","\n\n      ",2632],["T_COMMENT","\/\/ ----- Update the informations\n",2634],["T_WHITESPACE","      ",2635],["T_COMMENT","\/\/ Only some fields can be modified\n",2635],["T_WHITESPACE","      ",2636],["T_IF","if",2636],["T_WHITESPACE"," ",2636],"(",["T_VARIABLE","$p_header",2636],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2636],"]",["T_WHITESPACE"," ",2636],["T_IS_NOT_EQUAL","!=",2636],["T_WHITESPACE"," ",2636],["T_VARIABLE","$v_local_header",2636],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2636],"]",")",["T_WHITESPACE"," ",2636],"{",["T_WHITESPACE","\n        ",2636],["T_VARIABLE","$p_header",2637],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2637],"]",["T_WHITESPACE"," ",2637],"=",["T_WHITESPACE"," ",2637],["T_STRING","PclZipUtilPathReduction",2637],"(",["T_VARIABLE","$v_local_header",2637],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2637],"]",")",";",["T_WHITESPACE","\n      ",2637],"}",["T_WHITESPACE","\n    ",2638],"}",["T_WHITESPACE","\n\n    ",2639],["T_COMMENT","\/\/ ----- Look for empty stored filename\n",2641],["T_WHITESPACE","    ",2642],["T_IF","if",2642],["T_WHITESPACE"," ",2642],"(",["T_VARIABLE","$p_header",2642],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2642],"]",["T_WHITESPACE"," ",2642],["T_IS_EQUAL","==",2642],["T_WHITESPACE"," ",2642],["T_CONSTANT_ENCAPSED_STRING","\"\"",2642],")",["T_WHITESPACE"," ",2642],"{",["T_WHITESPACE","\n      ",2642],["T_VARIABLE","$p_header",2643],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",2643],"]",["T_WHITESPACE"," ",2643],"=",["T_WHITESPACE"," ",2643],["T_CONSTANT_ENCAPSED_STRING","\"filtered\"",2643],";",["T_WHITESPACE","\n    ",2643],"}",["T_WHITESPACE","\n\n    ",2644],["T_COMMENT","\/\/ ----- Check the path length\n",2646],["T_WHITESPACE","    ",2647],["T_IF","if",2647],["T_WHITESPACE"," ",2647],"(",["T_STRING","strlen",2647],"(",["T_VARIABLE","$p_header",2647],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2647],"]",")",["T_WHITESPACE"," ",2647],">",["T_WHITESPACE"," ",2647],["T_LNUMBER","0xFF",2647],")",["T_WHITESPACE"," ",2647],"{",["T_WHITESPACE","\n      ",2647],["T_VARIABLE","$p_header",2648],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",2648],"]",["T_WHITESPACE"," ",2648],"=",["T_WHITESPACE"," ",2648],["T_CONSTANT_ENCAPSED_STRING","'filename_too_long'",2648],";",["T_WHITESPACE","\n    ",2648],"}",["T_WHITESPACE","\n\n    ",2649],["T_COMMENT","\/\/ ----- Look if no error, or file not skipped\n",2651],["T_WHITESPACE","    ",2652],["T_IF","if",2652],["T_WHITESPACE"," ",2652],"(",["T_VARIABLE","$p_header",2652],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",2652],"]",["T_WHITESPACE"," ",2652],["T_IS_EQUAL","==",2652],["T_WHITESPACE"," ",2652],["T_CONSTANT_ENCAPSED_STRING","'ok'",2652],")",["T_WHITESPACE"," ",2652],"{",["T_WHITESPACE","\n\n      ",2652],["T_COMMENT","\/\/ ----- Look for a file\n",2654],["T_WHITESPACE","      ",2655],["T_IF","if",2655],["T_WHITESPACE"," ",2655],"(",["T_VARIABLE","$p_filedescr",2655],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2655],"]",["T_WHITESPACE"," ",2655],["T_IS_EQUAL","==",2655],["T_WHITESPACE"," ",2655],["T_CONSTANT_ENCAPSED_STRING","'file'",2655],")",["T_WHITESPACE"," ",2655],"{",["T_WHITESPACE","\n        ",2655],["T_COMMENT","\/\/ ----- Look for using temporary file to zip\n",2656],["T_WHITESPACE","        ",2657],["T_IF","if",2657],["T_WHITESPACE"," ",2657],"(",["T_WHITESPACE"," ",2657],"(","!",["T_ISSET","isset",2657],"(",["T_VARIABLE","$p_options",2657],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",2657],"]",")",")",["T_WHITESPACE","\n            ",2657],["T_BOOLEAN_AND","&&",2658],["T_WHITESPACE"," ",2658],"(",["T_ISSET","isset",2658],"(",["T_VARIABLE","$p_options",2658],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",2658],"]",")",["T_WHITESPACE","\n                ",2658],["T_BOOLEAN_OR","||",2659],["T_WHITESPACE"," ",2659],"(",["T_ISSET","isset",2659],"(",["T_VARIABLE","$p_options",2659],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",2659],"]",")",["T_WHITESPACE","\n                    ",2659],["T_BOOLEAN_AND","&&",2660],["T_WHITESPACE"," ",2660],"(",["T_VARIABLE","$p_options",2660],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",2660],"]",["T_WHITESPACE"," ",2660],["T_IS_SMALLER_OR_EQUAL","<=",2660],["T_WHITESPACE"," ",2660],["T_VARIABLE","$p_header",2660],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2660],"]",")",")",["T_WHITESPACE"," ",2660],")",["T_WHITESPACE"," ",2660],")",["T_WHITESPACE"," ",2660],"{",["T_WHITESPACE","\n          ",2660],["T_VARIABLE","$v_result",2661],["T_WHITESPACE"," ",2661],"=",["T_WHITESPACE"," ",2661],["T_VARIABLE","$this",2661],["T_OBJECT_OPERATOR","->",2661],["T_STRING","privAddFileUsingTempFile",2661],"(",["T_VARIABLE","$p_filedescr",2661],",",["T_WHITESPACE"," ",2661],["T_VARIABLE","$p_header",2661],",",["T_WHITESPACE"," ",2661],["T_VARIABLE","$p_options",2661],")",";",["T_WHITESPACE","\n          ",2661],["T_IF","if",2662],["T_WHITESPACE"," ",2662],"(",["T_VARIABLE","$v_result",2662],["T_WHITESPACE"," ",2662],"<",["T_WHITESPACE"," ",2662],["T_STRING","PCLZIP_ERR_NO_ERROR",2662],")",["T_WHITESPACE"," ",2662],"{",["T_WHITESPACE","\n            ",2662],["T_RETURN","return",2663],["T_WHITESPACE"," ",2663],["T_VARIABLE","$v_result",2663],";",["T_WHITESPACE","\n          ",2663],"}",["T_WHITESPACE","\n        ",2664],"}",["T_WHITESPACE","\n\n        ",2665],["T_COMMENT","\/\/ ----- Use \"in memory\" zip algo\n",2667],["T_WHITESPACE","        ",2668],["T_ELSE","else",2668],["T_WHITESPACE"," ",2668],"{",["T_WHITESPACE","\n\n        ",2668],["T_COMMENT","\/\/ ----- Open the source file\n",2670],["T_WHITESPACE","        ",2671],["T_IF","if",2671],["T_WHITESPACE"," ",2671],"(","(",["T_VARIABLE","$v_file",2671],["T_WHITESPACE"," ",2671],"=",["T_WHITESPACE"," ",2671],"@",["T_STRING","fopen",2671],"(",["T_VARIABLE","$p_filename",2671],",",["T_WHITESPACE"," ",2671],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",2671],")",")",["T_WHITESPACE"," ",2671],["T_IS_EQUAL","==",2671],["T_WHITESPACE"," ",2671],["T_LNUMBER","0",2671],")",["T_WHITESPACE"," ",2671],"{",["T_WHITESPACE","\n          ",2671],["T_STRING","PclZip",2672],["T_DOUBLE_COLON","::",2672],["T_STRING","privErrorLog",2672],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2672],",",["T_WHITESPACE"," ",2672],"\"",["T_ENCAPSED_AND_WHITESPACE","Unable to open file '",2672],["T_VARIABLE","$p_filename",2672],["T_ENCAPSED_AND_WHITESPACE","' in binary read mode",2672],"\"",")",";",["T_WHITESPACE","\n          ",2672],["T_RETURN","return",2673],["T_WHITESPACE"," ",2673],["T_STRING","PclZip",2673],["T_DOUBLE_COLON","::",2673],["T_STRING","errorCode",2673],"(",")",";",["T_WHITESPACE","\n        ",2673],"}",["T_WHITESPACE","\n\n        ",2674],["T_COMMENT","\/\/ ----- Read the file content\n",2676],["T_WHITESPACE","        ",2677],["T_VARIABLE","$v_content",2677],["T_WHITESPACE"," ",2677],"=",["T_WHITESPACE"," ",2677],"@",["T_STRING","fread",2677],"(",["T_VARIABLE","$v_file",2677],",",["T_WHITESPACE"," ",2677],["T_VARIABLE","$p_header",2677],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2677],"]",")",";",["T_WHITESPACE","\n\n        ",2677],["T_COMMENT","\/\/ ----- Close the file\n",2679],["T_WHITESPACE","        ",2680],"@",["T_STRING","fclose",2680],"(",["T_VARIABLE","$v_file",2680],")",";",["T_WHITESPACE","\n\n        ",2680],["T_COMMENT","\/\/ ----- Calculate the CRC\n",2682],["T_WHITESPACE","        ",2683],["T_VARIABLE","$p_header",2683],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",2683],"]",["T_WHITESPACE"," ",2683],"=",["T_WHITESPACE"," ",2683],"@",["T_STRING","crc32",2683],"(",["T_VARIABLE","$v_content",2683],")",";",["T_WHITESPACE","\n\n        ",2683],["T_COMMENT","\/\/ ----- Look for no compression\n",2685],["T_WHITESPACE","        ",2686],["T_IF","if",2686],["T_WHITESPACE"," ",2686],"(",["T_VARIABLE","$p_options",2686],"[",["T_STRING","PCLZIP_OPT_NO_COMPRESSION",2686],"]",")",["T_WHITESPACE"," ",2686],"{",["T_WHITESPACE","\n          ",2686],["T_COMMENT","\/\/ ----- Set header parameters\n",2687],["T_WHITESPACE","          ",2688],["T_VARIABLE","$p_header",2688],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2688],"]",["T_WHITESPACE"," ",2688],"=",["T_WHITESPACE"," ",2688],["T_VARIABLE","$p_header",2688],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2688],"]",";",["T_WHITESPACE","\n          ",2688],["T_VARIABLE","$p_header",2689],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2689],"]",["T_WHITESPACE"," ",2689],"=",["T_WHITESPACE"," ",2689],["T_LNUMBER","0",2689],";",["T_WHITESPACE","\n        ",2689],"}",["T_WHITESPACE","\n\n        ",2690],["T_COMMENT","\/\/ ----- Look for normal compression\n",2692],["T_WHITESPACE","        ",2693],["T_ELSE","else",2693],["T_WHITESPACE"," ",2693],"{",["T_WHITESPACE","\n          ",2693],["T_COMMENT","\/\/ ----- Compress the content\n",2694],["T_WHITESPACE","          ",2695],["T_VARIABLE","$v_content",2695],["T_WHITESPACE"," ",2695],"=",["T_WHITESPACE"," ",2695],"@",["T_STRING","gzdeflate",2695],"(",["T_VARIABLE","$v_content",2695],")",";",["T_WHITESPACE","\n\n          ",2695],["T_COMMENT","\/\/ ----- Set header parameters\n",2697],["T_WHITESPACE","          ",2698],["T_VARIABLE","$p_header",2698],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2698],"]",["T_WHITESPACE"," ",2698],"=",["T_WHITESPACE"," ",2698],["T_STRING","strlen",2698],"(",["T_VARIABLE","$v_content",2698],")",";",["T_WHITESPACE","\n          ",2698],["T_VARIABLE","$p_header",2699],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2699],"]",["T_WHITESPACE"," ",2699],"=",["T_WHITESPACE"," ",2699],["T_LNUMBER","8",2699],";",["T_WHITESPACE","\n        ",2699],"}",["T_WHITESPACE","\n\n        ",2700],["T_COMMENT","\/\/ ----- Call the header generation\n",2702],["T_WHITESPACE","        ",2703],["T_IF","if",2703],["T_WHITESPACE"," ",2703],"(","(",["T_VARIABLE","$v_result",2703],["T_WHITESPACE"," ",2703],"=",["T_WHITESPACE"," ",2703],["T_VARIABLE","$this",2703],["T_OBJECT_OPERATOR","->",2703],["T_STRING","privWriteFileHeader",2703],"(",["T_VARIABLE","$p_header",2703],")",")",["T_WHITESPACE"," ",2703],["T_IS_NOT_EQUAL","!=",2703],["T_WHITESPACE"," ",2703],["T_LNUMBER","1",2703],")",["T_WHITESPACE"," ",2703],"{",["T_WHITESPACE","\n          ",2703],"@",["T_STRING","fclose",2704],"(",["T_VARIABLE","$v_file",2704],")",";",["T_WHITESPACE","\n          ",2704],["T_RETURN","return",2705],["T_WHITESPACE"," ",2705],["T_VARIABLE","$v_result",2705],";",["T_WHITESPACE","\n        ",2705],"}",["T_WHITESPACE","\n\n        ",2706],["T_COMMENT","\/\/ ----- Write the compressed (or not) content\n",2708],["T_WHITESPACE","        ",2709],"@",["T_STRING","fwrite",2709],"(",["T_VARIABLE","$this",2709],["T_OBJECT_OPERATOR","->",2709],["T_STRING","zip_fd",2709],",",["T_WHITESPACE"," ",2709],["T_VARIABLE","$v_content",2709],",",["T_WHITESPACE"," ",2709],["T_VARIABLE","$p_header",2709],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2709],"]",")",";",["T_WHITESPACE","\n\n        ",2709],"}",["T_WHITESPACE","\n\n      ",2711],"}",["T_WHITESPACE","\n\n      ",2713],["T_COMMENT","\/\/ ----- Look for a virtual file (a file from string)\n",2715],["T_WHITESPACE","      ",2716],["T_ELSE","else",2716],["T_WHITESPACE"," ",2716],["T_IF","if",2716],["T_WHITESPACE"," ",2716],"(",["T_VARIABLE","$p_filedescr",2716],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2716],"]",["T_WHITESPACE"," ",2716],["T_IS_EQUAL","==",2716],["T_WHITESPACE"," ",2716],["T_CONSTANT_ENCAPSED_STRING","'virtual_file'",2716],")",["T_WHITESPACE"," ",2716],"{",["T_WHITESPACE","\n\n        ",2716],["T_VARIABLE","$v_content",2718],["T_WHITESPACE"," ",2718],"=",["T_WHITESPACE"," ",2718],["T_VARIABLE","$p_filedescr",2718],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",2718],"]",";",["T_WHITESPACE","\n\n        ",2718],["T_COMMENT","\/\/ ----- Calculate the CRC\n",2720],["T_WHITESPACE","        ",2721],["T_VARIABLE","$p_header",2721],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",2721],"]",["T_WHITESPACE"," ",2721],"=",["T_WHITESPACE"," ",2721],"@",["T_STRING","crc32",2721],"(",["T_VARIABLE","$v_content",2721],")",";",["T_WHITESPACE","\n\n        ",2721],["T_COMMENT","\/\/ ----- Look for no compression\n",2723],["T_WHITESPACE","        ",2724],["T_IF","if",2724],["T_WHITESPACE"," ",2724],"(",["T_VARIABLE","$p_options",2724],"[",["T_STRING","PCLZIP_OPT_NO_COMPRESSION",2724],"]",")",["T_WHITESPACE"," ",2724],"{",["T_WHITESPACE","\n          ",2724],["T_COMMENT","\/\/ ----- Set header parameters\n",2725],["T_WHITESPACE","          ",2726],["T_VARIABLE","$p_header",2726],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2726],"]",["T_WHITESPACE"," ",2726],"=",["T_WHITESPACE"," ",2726],["T_VARIABLE","$p_header",2726],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2726],"]",";",["T_WHITESPACE","\n          ",2726],["T_VARIABLE","$p_header",2727],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2727],"]",["T_WHITESPACE"," ",2727],"=",["T_WHITESPACE"," ",2727],["T_LNUMBER","0",2727],";",["T_WHITESPACE","\n        ",2727],"}",["T_WHITESPACE","\n\n        ",2728],["T_COMMENT","\/\/ ----- Look for normal compression\n",2730],["T_WHITESPACE","        ",2731],["T_ELSE","else",2731],["T_WHITESPACE"," ",2731],"{",["T_WHITESPACE","\n          ",2731],["T_COMMENT","\/\/ ----- Compress the content\n",2732],["T_WHITESPACE","          ",2733],["T_VARIABLE","$v_content",2733],["T_WHITESPACE"," ",2733],"=",["T_WHITESPACE"," ",2733],"@",["T_STRING","gzdeflate",2733],"(",["T_VARIABLE","$v_content",2733],")",";",["T_WHITESPACE","\n\n          ",2733],["T_COMMENT","\/\/ ----- Set header parameters\n",2735],["T_WHITESPACE","          ",2736],["T_VARIABLE","$p_header",2736],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2736],"]",["T_WHITESPACE"," ",2736],"=",["T_WHITESPACE"," ",2736],["T_STRING","strlen",2736],"(",["T_VARIABLE","$v_content",2736],")",";",["T_WHITESPACE","\n          ",2736],["T_VARIABLE","$p_header",2737],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2737],"]",["T_WHITESPACE"," ",2737],"=",["T_WHITESPACE"," ",2737],["T_LNUMBER","8",2737],";",["T_WHITESPACE","\n        ",2737],"}",["T_WHITESPACE","\n\n        ",2738],["T_COMMENT","\/\/ ----- Call the header generation\n",2740],["T_WHITESPACE","        ",2741],["T_IF","if",2741],["T_WHITESPACE"," ",2741],"(","(",["T_VARIABLE","$v_result",2741],["T_WHITESPACE"," ",2741],"=",["T_WHITESPACE"," ",2741],["T_VARIABLE","$this",2741],["T_OBJECT_OPERATOR","->",2741],["T_STRING","privWriteFileHeader",2741],"(",["T_VARIABLE","$p_header",2741],")",")",["T_WHITESPACE"," ",2741],["T_IS_NOT_EQUAL","!=",2741],["T_WHITESPACE"," ",2741],["T_LNUMBER","1",2741],")",["T_WHITESPACE"," ",2741],"{",["T_WHITESPACE","\n          ",2741],"@",["T_STRING","fclose",2742],"(",["T_VARIABLE","$v_file",2742],")",";",["T_WHITESPACE","\n          ",2742],["T_RETURN","return",2743],["T_WHITESPACE"," ",2743],["T_VARIABLE","$v_result",2743],";",["T_WHITESPACE","\n        ",2743],"}",["T_WHITESPACE","\n\n        ",2744],["T_COMMENT","\/\/ ----- Write the compressed (or not) content\n",2746],["T_WHITESPACE","        ",2747],"@",["T_STRING","fwrite",2747],"(",["T_VARIABLE","$this",2747],["T_OBJECT_OPERATOR","->",2747],["T_STRING","zip_fd",2747],",",["T_WHITESPACE"," ",2747],["T_VARIABLE","$v_content",2747],",",["T_WHITESPACE"," ",2747],["T_VARIABLE","$p_header",2747],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2747],"]",")",";",["T_WHITESPACE","\n      ",2747],"}",["T_WHITESPACE","\n\n      ",2748],["T_COMMENT","\/\/ ----- Look for a directory\n",2750],["T_WHITESPACE","      ",2751],["T_ELSE","else",2751],["T_WHITESPACE"," ",2751],["T_IF","if",2751],["T_WHITESPACE"," ",2751],"(",["T_VARIABLE","$p_filedescr",2751],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",2751],"]",["T_WHITESPACE"," ",2751],["T_IS_EQUAL","==",2751],["T_WHITESPACE"," ",2751],["T_CONSTANT_ENCAPSED_STRING","'folder'",2751],")",["T_WHITESPACE"," ",2751],"{",["T_WHITESPACE","\n        ",2751],["T_COMMENT","\/\/ ----- Look for directory last '\/'\n",2752],["T_WHITESPACE","        ",2753],["T_IF","if",2753],["T_WHITESPACE"," ",2753],"(","@",["T_STRING","substr",2753],"(",["T_VARIABLE","$p_header",2753],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2753],"]",",",["T_WHITESPACE"," ",2753],"-",["T_LNUMBER","1",2753],")",["T_WHITESPACE"," ",2753],["T_IS_NOT_EQUAL","!=",2753],["T_WHITESPACE"," ",2753],["T_CONSTANT_ENCAPSED_STRING","'\/'",2753],")",["T_WHITESPACE"," ",2753],"{",["T_WHITESPACE","\n          ",2753],["T_VARIABLE","$p_header",2754],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",2754],"]",["T_WHITESPACE"," ",2754],["T_CONCAT_EQUAL",".=",2754],["T_WHITESPACE"," ",2754],["T_CONSTANT_ENCAPSED_STRING","'\/'",2754],";",["T_WHITESPACE","\n        ",2754],"}",["T_WHITESPACE","\n\n        ",2755],["T_COMMENT","\/\/ ----- Set the file properties\n",2757],["T_WHITESPACE","        ",2758],["T_VARIABLE","$p_header",2758],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",2758],"]",["T_WHITESPACE"," ",2758],"=",["T_WHITESPACE"," ",2758],["T_LNUMBER","0",2758],";",["T_WHITESPACE","\n        ",2758],["T_COMMENT","\/\/$p_header['external'] = 0x41FF0010;   \/\/ Value for a folder : to be checked\n",2759],["T_WHITESPACE","        ",2760],["T_VARIABLE","$p_header",2760],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",2760],"]",["T_WHITESPACE"," ",2760],"=",["T_WHITESPACE"," ",2760],["T_LNUMBER","0x00000010",2760],";",["T_WHITESPACE","   ",2760],["T_COMMENT","\/\/ Value for a folder : to be checked\n",2760],["T_WHITESPACE","\n        ",2761],["T_COMMENT","\/\/ ----- Call the header generation\n",2762],["T_WHITESPACE","        ",2763],["T_IF","if",2763],["T_WHITESPACE"," ",2763],"(","(",["T_VARIABLE","$v_result",2763],["T_WHITESPACE"," ",2763],"=",["T_WHITESPACE"," ",2763],["T_VARIABLE","$this",2763],["T_OBJECT_OPERATOR","->",2763],["T_STRING","privWriteFileHeader",2763],"(",["T_VARIABLE","$p_header",2763],")",")",["T_WHITESPACE"," ",2763],["T_IS_NOT_EQUAL","!=",2763],["T_WHITESPACE"," ",2763],["T_LNUMBER","1",2763],")",["T_WHITESPACE","\n        ",2763],"{",["T_WHITESPACE","\n          ",2764],["T_RETURN","return",2765],["T_WHITESPACE"," ",2765],["T_VARIABLE","$v_result",2765],";",["T_WHITESPACE","\n        ",2765],"}",["T_WHITESPACE","\n      ",2766],"}",["T_WHITESPACE","\n    ",2767],"}",["T_WHITESPACE","\n\n    ",2768],["T_COMMENT","\/\/ ----- Look for post-add callback\n",2770],["T_WHITESPACE","    ",2771],["T_IF","if",2771],["T_WHITESPACE"," ",2771],"(",["T_ISSET","isset",2771],"(",["T_VARIABLE","$p_options",2771],"[",["T_STRING","PCLZIP_CB_POST_ADD",2771],"]",")",")",["T_WHITESPACE"," ",2771],"{",["T_WHITESPACE","\n\n      ",2771],["T_COMMENT","\/\/ ----- Generate a local information\n",2773],["T_WHITESPACE","      ",2774],["T_VARIABLE","$v_local_header",2774],["T_WHITESPACE"," ",2774],"=",["T_WHITESPACE"," ",2774],["T_ARRAY","array",2774],"(",")",";",["T_WHITESPACE","\n      ",2774],["T_VARIABLE","$this",2775],["T_OBJECT_OPERATOR","->",2775],["T_STRING","privConvertHeader2FileInfo",2775],"(",["T_VARIABLE","$p_header",2775],",",["T_WHITESPACE"," ",2775],["T_VARIABLE","$v_local_header",2775],")",";",["T_WHITESPACE","\n\n      ",2775],["T_COMMENT","\/\/ ----- Call the callback\n",2777],["T_WHITESPACE","      ",2778],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",2778],["T_WHITESPACE","      ",2779],["T_COMMENT","\/\/ header.\n",2779],["T_WHITESPACE","      ",2780],["T_VARIABLE","$v_result",2780],["T_WHITESPACE"," ",2780],"=",["T_WHITESPACE"," ",2780],["T_VARIABLE","$p_options",2780],"[",["T_STRING","PCLZIP_CB_POST_ADD",2780],"]","(",["T_STRING","PCLZIP_CB_POST_ADD",2780],",",["T_WHITESPACE"," ",2780],["T_VARIABLE","$v_local_header",2780],")",";",["T_WHITESPACE","\n      ",2780],["T_IF","if",2781],["T_WHITESPACE"," ",2781],"(",["T_VARIABLE","$v_result",2781],["T_WHITESPACE"," ",2781],["T_IS_EQUAL","==",2781],["T_WHITESPACE"," ",2781],["T_LNUMBER","0",2781],")",["T_WHITESPACE"," ",2781],"{",["T_WHITESPACE","\n        ",2781],["T_COMMENT","\/\/ ----- Ignored\n",2782],["T_WHITESPACE","        ",2783],["T_VARIABLE","$v_result",2783],["T_WHITESPACE"," ",2783],"=",["T_WHITESPACE"," ",2783],["T_LNUMBER","1",2783],";",["T_WHITESPACE","\n      ",2783],"}",["T_WHITESPACE","\n\n      ",2784],["T_COMMENT","\/\/ ----- Update the informations\n",2786],["T_WHITESPACE","      ",2787],["T_COMMENT","\/\/ Nothing can be modified\n",2787],["T_WHITESPACE","    ",2788],"}",["T_WHITESPACE","\n\n    ",2788],["T_COMMENT","\/\/ ----- Return\n",2790],["T_WHITESPACE","    ",2791],["T_RETURN","return",2791],["T_WHITESPACE"," ",2791],["T_VARIABLE","$v_result",2791],";",["T_WHITESPACE","\n  ",2791],"}",["T_WHITESPACE","\n  ",2792],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2793],["T_WHITESPACE","\n  ",2794],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2795],["T_WHITESPACE","  ",2796],["T_COMMENT","\/\/ Function : privAddFileUsingTempFile()\n",2796],["T_WHITESPACE","  ",2797],["T_COMMENT","\/\/ Description :\n",2797],["T_WHITESPACE","  ",2798],["T_COMMENT","\/\/ Parameters :\n",2798],["T_WHITESPACE","  ",2799],["T_COMMENT","\/\/ Return Values :\n",2799],["T_WHITESPACE","  ",2800],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2800],["T_WHITESPACE","  ",2801],["T_FUNCTION","function",2801],["T_WHITESPACE"," ",2801],["T_STRING","privAddFileUsingTempFile",2801],"(",["T_VARIABLE","$p_filedescr",2801],",",["T_WHITESPACE"," ",2801],"&",["T_VARIABLE","$p_header",2801],",",["T_WHITESPACE"," ",2801],"&",["T_VARIABLE","$p_options",2801],")",["T_WHITESPACE","\n  ",2801],"{",["T_WHITESPACE","\n    ",2802],["T_VARIABLE","$v_result",2803],"=",["T_STRING","PCLZIP_ERR_NO_ERROR",2803],";",["T_WHITESPACE","\n\n    ",2803],["T_COMMENT","\/\/ ----- Working variable\n",2805],["T_WHITESPACE","    ",2806],["T_VARIABLE","$p_filename",2806],["T_WHITESPACE"," ",2806],"=",["T_WHITESPACE"," ",2806],["T_VARIABLE","$p_filedescr",2806],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2806],"]",";",["T_WHITESPACE","\n\n\n    ",2806],["T_COMMENT","\/\/ ----- Open the source file\n",2809],["T_WHITESPACE","    ",2810],["T_IF","if",2810],["T_WHITESPACE"," ",2810],"(","(",["T_VARIABLE","$v_file",2810],["T_WHITESPACE"," ",2810],"=",["T_WHITESPACE"," ",2810],"@",["T_STRING","fopen",2810],"(",["T_VARIABLE","$p_filename",2810],",",["T_WHITESPACE"," ",2810],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",2810],")",")",["T_WHITESPACE"," ",2810],["T_IS_EQUAL","==",2810],["T_WHITESPACE"," ",2810],["T_LNUMBER","0",2810],")",["T_WHITESPACE"," ",2810],"{",["T_WHITESPACE","\n      ",2810],["T_STRING","PclZip",2811],["T_DOUBLE_COLON","::",2811],["T_STRING","privErrorLog",2811],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2811],",",["T_WHITESPACE"," ",2811],"\"",["T_ENCAPSED_AND_WHITESPACE","Unable to open file '",2811],["T_VARIABLE","$p_filename",2811],["T_ENCAPSED_AND_WHITESPACE","' in binary read mode",2811],"\"",")",";",["T_WHITESPACE","\n      ",2811],["T_RETURN","return",2812],["T_WHITESPACE"," ",2812],["T_STRING","PclZip",2812],["T_DOUBLE_COLON","::",2812],["T_STRING","errorCode",2812],"(",")",";",["T_WHITESPACE","\n    ",2812],"}",["T_WHITESPACE","\n\n    ",2813],["T_COMMENT","\/\/ ----- Creates a compressed temporary file\n",2815],["T_WHITESPACE","    ",2816],["T_VARIABLE","$v_gzip_temp_name",2816],["T_WHITESPACE"," ",2816],"=",["T_WHITESPACE"," ",2816],["T_STRING","PCLZIP_TEMPORARY_DIR",2816],".",["T_STRING","uniqid",2816],"(",["T_CONSTANT_ENCAPSED_STRING","'pclzip-'",2816],")",".",["T_CONSTANT_ENCAPSED_STRING","'.gz'",2816],";",["T_WHITESPACE","\n    ",2816],["T_IF","if",2817],["T_WHITESPACE"," ",2817],"(","(",["T_VARIABLE","$v_file_compressed",2817],["T_WHITESPACE"," ",2817],"=",["T_WHITESPACE"," ",2817],"@",["T_STRING","gzopen",2817],"(",["T_VARIABLE","$v_gzip_temp_name",2817],",",["T_WHITESPACE"," ",2817],["T_CONSTANT_ENCAPSED_STRING","\"wb\"",2817],")",")",["T_WHITESPACE"," ",2817],["T_IS_EQUAL","==",2817],["T_WHITESPACE"," ",2817],["T_LNUMBER","0",2817],")",["T_WHITESPACE"," ",2817],"{",["T_WHITESPACE","\n      ",2817],["T_STRING","fclose",2818],"(",["T_VARIABLE","$v_file",2818],")",";",["T_WHITESPACE","\n      ",2818],["T_STRING","PclZip",2819],["T_DOUBLE_COLON","::",2819],["T_STRING","privErrorLog",2819],"(",["T_STRING","PCLZIP_ERR_WRITE_OPEN_FAIL",2819],",",["T_WHITESPACE"," ",2819],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",2819],".",["T_VARIABLE","$v_gzip_temp_name",2819],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary write mode'",2819],")",";",["T_WHITESPACE","\n      ",2819],["T_RETURN","return",2820],["T_WHITESPACE"," ",2820],["T_STRING","PclZip",2820],["T_DOUBLE_COLON","::",2820],["T_STRING","errorCode",2820],"(",")",";",["T_WHITESPACE","\n    ",2820],"}",["T_WHITESPACE","\n\n    ",2821],["T_COMMENT","\/\/ ----- Read the file by PCLZIP_READ_BLOCK_SIZE octets blocks\n",2823],["T_WHITESPACE","    ",2824],["T_VARIABLE","$v_size",2824],["T_WHITESPACE"," ",2824],"=",["T_WHITESPACE"," ",2824],["T_STRING","filesize",2824],"(",["T_VARIABLE","$p_filename",2824],")",";",["T_WHITESPACE","\n    ",2824],["T_WHILE","while",2825],["T_WHITESPACE"," ",2825],"(",["T_VARIABLE","$v_size",2825],["T_WHITESPACE"," ",2825],["T_IS_NOT_EQUAL","!=",2825],["T_WHITESPACE"," ",2825],["T_LNUMBER","0",2825],")",["T_WHITESPACE"," ",2825],"{",["T_WHITESPACE","\n      ",2825],["T_VARIABLE","$v_read_size",2826],["T_WHITESPACE"," ",2826],"=",["T_WHITESPACE"," ",2826],"(",["T_VARIABLE","$v_size",2826],["T_WHITESPACE"," ",2826],"<",["T_WHITESPACE"," ",2826],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2826],["T_WHITESPACE"," ",2826],"?",["T_WHITESPACE"," ",2826],["T_VARIABLE","$v_size",2826],["T_WHITESPACE"," ",2826],":",["T_WHITESPACE"," ",2826],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2826],")",";",["T_WHITESPACE","\n      ",2826],["T_VARIABLE","$v_buffer",2827],["T_WHITESPACE"," ",2827],"=",["T_WHITESPACE"," ",2827],"@",["T_STRING","fread",2827],"(",["T_VARIABLE","$v_file",2827],",",["T_WHITESPACE"," ",2827],["T_VARIABLE","$v_read_size",2827],")",";",["T_WHITESPACE","\n      ",2827],["T_COMMENT","\/\/$v_binary_data = pack('a'.$v_read_size, $v_buffer);\n",2828],["T_WHITESPACE","      ",2829],"@",["T_STRING","gzputs",2829],"(",["T_VARIABLE","$v_file_compressed",2829],",",["T_WHITESPACE"," ",2829],["T_VARIABLE","$v_buffer",2829],",",["T_WHITESPACE"," ",2829],["T_VARIABLE","$v_read_size",2829],")",";",["T_WHITESPACE","\n      ",2829],["T_VARIABLE","$v_size",2830],["T_WHITESPACE"," ",2830],["T_MINUS_EQUAL","-=",2830],["T_WHITESPACE"," ",2830],["T_VARIABLE","$v_read_size",2830],";",["T_WHITESPACE","\n    ",2830],"}",["T_WHITESPACE","\n\n    ",2831],["T_COMMENT","\/\/ ----- Close the file\n",2833],["T_WHITESPACE","    ",2834],"@",["T_STRING","fclose",2834],"(",["T_VARIABLE","$v_file",2834],")",";",["T_WHITESPACE","\n    ",2834],"@",["T_STRING","gzclose",2835],"(",["T_VARIABLE","$v_file_compressed",2835],")",";",["T_WHITESPACE","\n\n    ",2835],["T_COMMENT","\/\/ ----- Check the minimum file size\n",2837],["T_WHITESPACE","    ",2838],["T_IF","if",2838],["T_WHITESPACE"," ",2838],"(",["T_STRING","filesize",2838],"(",["T_VARIABLE","$v_gzip_temp_name",2838],")",["T_WHITESPACE"," ",2838],"<",["T_WHITESPACE"," ",2838],["T_LNUMBER","18",2838],")",["T_WHITESPACE"," ",2838],"{",["T_WHITESPACE","\n      ",2838],["T_STRING","PclZip",2839],["T_DOUBLE_COLON","::",2839],["T_STRING","privErrorLog",2839],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",2839],",",["T_WHITESPACE"," ",2839],["T_CONSTANT_ENCAPSED_STRING","'gzip temporary file \\''",2839],".",["T_VARIABLE","$v_gzip_temp_name",2839],".",["T_CONSTANT_ENCAPSED_STRING","'\\' has invalid filesize - should be minimum 18 bytes'",2839],")",";",["T_WHITESPACE","\n      ",2839],["T_RETURN","return",2840],["T_WHITESPACE"," ",2840],["T_STRING","PclZip",2840],["T_DOUBLE_COLON","::",2840],["T_STRING","errorCode",2840],"(",")",";",["T_WHITESPACE","\n    ",2840],"}",["T_WHITESPACE","\n\n    ",2841],["T_COMMENT","\/\/ ----- Extract the compressed attributes\n",2843],["T_WHITESPACE","    ",2844],["T_IF","if",2844],["T_WHITESPACE"," ",2844],"(","(",["T_VARIABLE","$v_file_compressed",2844],["T_WHITESPACE"," ",2844],"=",["T_WHITESPACE"," ",2844],"@",["T_STRING","fopen",2844],"(",["T_VARIABLE","$v_gzip_temp_name",2844],",",["T_WHITESPACE"," ",2844],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",2844],")",")",["T_WHITESPACE"," ",2844],["T_IS_EQUAL","==",2844],["T_WHITESPACE"," ",2844],["T_LNUMBER","0",2844],")",["T_WHITESPACE"," ",2844],"{",["T_WHITESPACE","\n      ",2844],["T_STRING","PclZip",2845],["T_DOUBLE_COLON","::",2845],["T_STRING","privErrorLog",2845],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2845],",",["T_WHITESPACE"," ",2845],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",2845],".",["T_VARIABLE","$v_gzip_temp_name",2845],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary read mode'",2845],")",";",["T_WHITESPACE","\n      ",2845],["T_RETURN","return",2846],["T_WHITESPACE"," ",2846],["T_STRING","PclZip",2846],["T_DOUBLE_COLON","::",2846],["T_STRING","errorCode",2846],"(",")",";",["T_WHITESPACE","\n    ",2846],"}",["T_WHITESPACE","\n\n    ",2847],["T_COMMENT","\/\/ ----- Read the gzip file header\n",2849],["T_WHITESPACE","    ",2850],["T_VARIABLE","$v_binary_data",2850],["T_WHITESPACE"," ",2850],"=",["T_WHITESPACE"," ",2850],"@",["T_STRING","fread",2850],"(",["T_VARIABLE","$v_file_compressed",2850],",",["T_WHITESPACE"," ",2850],["T_LNUMBER","10",2850],")",";",["T_WHITESPACE","\n    ",2850],["T_VARIABLE","$v_data_header",2851],["T_WHITESPACE"," ",2851],"=",["T_WHITESPACE"," ",2851],["T_STRING","unpack",2851],"(",["T_CONSTANT_ENCAPSED_STRING","'a1id1\/a1id2\/a1cm\/a1flag\/Vmtime\/a1xfl\/a1os'",2851],",",["T_WHITESPACE"," ",2851],["T_VARIABLE","$v_binary_data",2851],")",";",["T_WHITESPACE","\n\n    ",2851],["T_COMMENT","\/\/ ----- Check some parameters\n",2853],["T_WHITESPACE","    ",2854],["T_VARIABLE","$v_data_header",2854],"[",["T_CONSTANT_ENCAPSED_STRING","'os'",2854],"]",["T_WHITESPACE"," ",2854],"=",["T_WHITESPACE"," ",2854],["T_STRING","bin2hex",2854],"(",["T_VARIABLE","$v_data_header",2854],"[",["T_CONSTANT_ENCAPSED_STRING","'os'",2854],"]",")",";",["T_WHITESPACE","\n\n    ",2854],["T_COMMENT","\/\/ ----- Read the gzip file footer\n",2856],["T_WHITESPACE","    ",2857],"@",["T_STRING","fseek",2857],"(",["T_VARIABLE","$v_file_compressed",2857],",",["T_WHITESPACE"," ",2857],["T_STRING","filesize",2857],"(",["T_VARIABLE","$v_gzip_temp_name",2857],")","-",["T_LNUMBER","8",2857],")",";",["T_WHITESPACE","\n    ",2857],["T_VARIABLE","$v_binary_data",2858],["T_WHITESPACE"," ",2858],"=",["T_WHITESPACE"," ",2858],"@",["T_STRING","fread",2858],"(",["T_VARIABLE","$v_file_compressed",2858],",",["T_WHITESPACE"," ",2858],["T_LNUMBER","8",2858],")",";",["T_WHITESPACE","\n    ",2858],["T_VARIABLE","$v_data_footer",2859],["T_WHITESPACE"," ",2859],"=",["T_WHITESPACE"," ",2859],["T_STRING","unpack",2859],"(",["T_CONSTANT_ENCAPSED_STRING","'Vcrc\/Vcompressed_size'",2859],",",["T_WHITESPACE"," ",2859],["T_VARIABLE","$v_binary_data",2859],")",";",["T_WHITESPACE","\n\n    ",2859],["T_COMMENT","\/\/ ----- Set the attributes\n",2861],["T_WHITESPACE","    ",2862],["T_VARIABLE","$p_header",2862],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",2862],"]",["T_WHITESPACE"," ",2862],"=",["T_WHITESPACE"," ",2862],["T_STRING","ord",2862],"(",["T_VARIABLE","$v_data_header",2862],"[",["T_CONSTANT_ENCAPSED_STRING","'cm'",2862],"]",")",";",["T_WHITESPACE","\n    ",2862],["T_COMMENT","\/\/$p_header['mtime'] = $v_data_header['mtime'];\n",2863],["T_WHITESPACE","    ",2864],["T_VARIABLE","$p_header",2864],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",2864],"]",["T_WHITESPACE"," ",2864],"=",["T_WHITESPACE"," ",2864],["T_VARIABLE","$v_data_footer",2864],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",2864],"]",";",["T_WHITESPACE","\n    ",2864],["T_VARIABLE","$p_header",2865],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2865],"]",["T_WHITESPACE"," ",2865],"=",["T_WHITESPACE"," ",2865],["T_STRING","filesize",2865],"(",["T_VARIABLE","$v_gzip_temp_name",2865],")","-",["T_LNUMBER","18",2865],";",["T_WHITESPACE","\n\n    ",2865],["T_COMMENT","\/\/ ----- Close the file\n",2867],["T_WHITESPACE","    ",2868],"@",["T_STRING","fclose",2868],"(",["T_VARIABLE","$v_file_compressed",2868],")",";",["T_WHITESPACE","\n\n    ",2868],["T_COMMENT","\/\/ ----- Call the header generation\n",2870],["T_WHITESPACE","    ",2871],["T_IF","if",2871],["T_WHITESPACE"," ",2871],"(","(",["T_VARIABLE","$v_result",2871],["T_WHITESPACE"," ",2871],"=",["T_WHITESPACE"," ",2871],["T_VARIABLE","$this",2871],["T_OBJECT_OPERATOR","->",2871],["T_STRING","privWriteFileHeader",2871],"(",["T_VARIABLE","$p_header",2871],")",")",["T_WHITESPACE"," ",2871],["T_IS_NOT_EQUAL","!=",2871],["T_WHITESPACE"," ",2871],["T_LNUMBER","1",2871],")",["T_WHITESPACE"," ",2871],"{",["T_WHITESPACE","\n      ",2871],["T_RETURN","return",2872],["T_WHITESPACE"," ",2872],["T_VARIABLE","$v_result",2872],";",["T_WHITESPACE","\n    ",2872],"}",["T_WHITESPACE","\n\n    ",2873],["T_COMMENT","\/\/ ----- Add the compressed data\n",2875],["T_WHITESPACE","    ",2876],["T_IF","if",2876],["T_WHITESPACE"," ",2876],"(","(",["T_VARIABLE","$v_file_compressed",2876],["T_WHITESPACE"," ",2876],"=",["T_WHITESPACE"," ",2876],"@",["T_STRING","fopen",2876],"(",["T_VARIABLE","$v_gzip_temp_name",2876],",",["T_WHITESPACE"," ",2876],["T_CONSTANT_ENCAPSED_STRING","\"rb\"",2876],")",")",["T_WHITESPACE"," ",2876],["T_IS_EQUAL","==",2876],["T_WHITESPACE"," ",2876],["T_LNUMBER","0",2876],")",["T_WHITESPACE","\n    ",2876],"{",["T_WHITESPACE","\n      ",2877],["T_STRING","PclZip",2878],["T_DOUBLE_COLON","::",2878],["T_STRING","privErrorLog",2878],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",2878],",",["T_WHITESPACE"," ",2878],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",2878],".",["T_VARIABLE","$v_gzip_temp_name",2878],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary read mode'",2878],")",";",["T_WHITESPACE","\n      ",2878],["T_RETURN","return",2879],["T_WHITESPACE"," ",2879],["T_STRING","PclZip",2879],["T_DOUBLE_COLON","::",2879],["T_STRING","errorCode",2879],"(",")",";",["T_WHITESPACE","\n    ",2879],"}",["T_WHITESPACE","\n\n    ",2880],["T_COMMENT","\/\/ ----- Read the file by PCLZIP_READ_BLOCK_SIZE octets blocks\n",2882],["T_WHITESPACE","    ",2883],["T_STRING","fseek",2883],"(",["T_VARIABLE","$v_file_compressed",2883],",",["T_WHITESPACE"," ",2883],["T_LNUMBER","10",2883],")",";",["T_WHITESPACE","\n    ",2883],["T_VARIABLE","$v_size",2884],["T_WHITESPACE"," ",2884],"=",["T_WHITESPACE"," ",2884],["T_VARIABLE","$p_header",2884],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",2884],"]",";",["T_WHITESPACE","\n    ",2884],["T_WHILE","while",2885],["T_WHITESPACE"," ",2885],"(",["T_VARIABLE","$v_size",2885],["T_WHITESPACE"," ",2885],["T_IS_NOT_EQUAL","!=",2885],["T_WHITESPACE"," ",2885],["T_LNUMBER","0",2885],")",["T_WHITESPACE","\n    ",2885],"{",["T_WHITESPACE","\n      ",2886],["T_VARIABLE","$v_read_size",2887],["T_WHITESPACE"," ",2887],"=",["T_WHITESPACE"," ",2887],"(",["T_VARIABLE","$v_size",2887],["T_WHITESPACE"," ",2887],"<",["T_WHITESPACE"," ",2887],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2887],["T_WHITESPACE"," ",2887],"?",["T_WHITESPACE"," ",2887],["T_VARIABLE","$v_size",2887],["T_WHITESPACE"," ",2887],":",["T_WHITESPACE"," ",2887],["T_STRING","PCLZIP_READ_BLOCK_SIZE",2887],")",";",["T_WHITESPACE","\n      ",2887],["T_VARIABLE","$v_buffer",2888],["T_WHITESPACE"," ",2888],"=",["T_WHITESPACE"," ",2888],"@",["T_STRING","fread",2888],"(",["T_VARIABLE","$v_file_compressed",2888],",",["T_WHITESPACE"," ",2888],["T_VARIABLE","$v_read_size",2888],")",";",["T_WHITESPACE","\n      ",2888],["T_COMMENT","\/\/$v_binary_data = pack('a'.$v_read_size, $v_buffer);\n",2889],["T_WHITESPACE","      ",2890],"@",["T_STRING","fwrite",2890],"(",["T_VARIABLE","$this",2890],["T_OBJECT_OPERATOR","->",2890],["T_STRING","zip_fd",2890],",",["T_WHITESPACE"," ",2890],["T_VARIABLE","$v_buffer",2890],",",["T_WHITESPACE"," ",2890],["T_VARIABLE","$v_read_size",2890],")",";",["T_WHITESPACE","\n      ",2890],["T_VARIABLE","$v_size",2891],["T_WHITESPACE"," ",2891],["T_MINUS_EQUAL","-=",2891],["T_WHITESPACE"," ",2891],["T_VARIABLE","$v_read_size",2891],";",["T_WHITESPACE","\n    ",2891],"}",["T_WHITESPACE","\n\n    ",2892],["T_COMMENT","\/\/ ----- Close the file\n",2894],["T_WHITESPACE","    ",2895],"@",["T_STRING","fclose",2895],"(",["T_VARIABLE","$v_file_compressed",2895],")",";",["T_WHITESPACE","\n\n    ",2895],["T_COMMENT","\/\/ ----- Unlink the temporary file\n",2897],["T_WHITESPACE","    ",2898],"@",["T_STRING","unlink",2898],"(",["T_VARIABLE","$v_gzip_temp_name",2898],")",";",["T_WHITESPACE","\n\n    ",2898],["T_COMMENT","\/\/ ----- Return\n",2900],["T_WHITESPACE","    ",2901],["T_RETURN","return",2901],["T_WHITESPACE"," ",2901],["T_VARIABLE","$v_result",2901],";",["T_WHITESPACE","\n  ",2901],"}",["T_WHITESPACE","\n  ",2902],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2903],["T_WHITESPACE","\n  ",2904],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2905],["T_WHITESPACE","  ",2906],["T_COMMENT","\/\/ Function : privCalculateStoredFilename()\n",2906],["T_WHITESPACE","  ",2907],["T_COMMENT","\/\/ Description :\n",2907],["T_WHITESPACE","  ",2908],["T_COMMENT","\/\/   Based on file descriptor properties and global options, this method\n",2908],["T_WHITESPACE","  ",2909],["T_COMMENT","\/\/   calculate the filename that will be stored in the archive.\n",2909],["T_WHITESPACE","  ",2910],["T_COMMENT","\/\/ Parameters :\n",2910],["T_WHITESPACE","  ",2911],["T_COMMENT","\/\/ Return Values :\n",2911],["T_WHITESPACE","  ",2912],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",2912],["T_WHITESPACE","  ",2913],["T_FUNCTION","function",2913],["T_WHITESPACE"," ",2913],["T_STRING","privCalculateStoredFilename",2913],"(","&",["T_VARIABLE","$p_filedescr",2913],",",["T_WHITESPACE"," ",2913],"&",["T_VARIABLE","$p_options",2913],")",["T_WHITESPACE","\n  ",2913],"{",["T_WHITESPACE","\n    ",2914],["T_VARIABLE","$v_result",2915],"=",["T_LNUMBER","1",2915],";",["T_WHITESPACE","\n\n    ",2915],["T_COMMENT","\/\/ ----- Working variables\n",2917],["T_WHITESPACE","    ",2918],["T_VARIABLE","$p_filename",2918],["T_WHITESPACE"," ",2918],"=",["T_WHITESPACE"," ",2918],["T_VARIABLE","$p_filedescr",2918],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",2918],"]",";",["T_WHITESPACE","\n    ",2918],["T_IF","if",2919],["T_WHITESPACE"," ",2919],"(",["T_ISSET","isset",2919],"(",["T_VARIABLE","$p_options",2919],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",2919],"]",")",")",["T_WHITESPACE"," ",2919],"{",["T_WHITESPACE","\n      ",2919],["T_VARIABLE","$p_add_dir",2920],["T_WHITESPACE"," ",2920],"=",["T_WHITESPACE"," ",2920],["T_VARIABLE","$p_options",2920],"[",["T_STRING","PCLZIP_OPT_ADD_PATH",2920],"]",";",["T_WHITESPACE","\n    ",2920],"}",["T_WHITESPACE","\n    ",2921],["T_ELSE","else",2922],["T_WHITESPACE"," ",2922],"{",["T_WHITESPACE","\n      ",2922],["T_VARIABLE","$p_add_dir",2923],["T_WHITESPACE"," ",2923],"=",["T_WHITESPACE"," ",2923],["T_CONSTANT_ENCAPSED_STRING","''",2923],";",["T_WHITESPACE","\n    ",2923],"}",["T_WHITESPACE","\n    ",2924],["T_IF","if",2925],["T_WHITESPACE"," ",2925],"(",["T_ISSET","isset",2925],"(",["T_VARIABLE","$p_options",2925],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",2925],"]",")",")",["T_WHITESPACE"," ",2925],"{",["T_WHITESPACE","\n      ",2925],["T_VARIABLE","$p_remove_dir",2926],["T_WHITESPACE"," ",2926],"=",["T_WHITESPACE"," ",2926],["T_VARIABLE","$p_options",2926],"[",["T_STRING","PCLZIP_OPT_REMOVE_PATH",2926],"]",";",["T_WHITESPACE","\n    ",2926],"}",["T_WHITESPACE","\n    ",2927],["T_ELSE","else",2928],["T_WHITESPACE"," ",2928],"{",["T_WHITESPACE","\n      ",2928],["T_VARIABLE","$p_remove_dir",2929],["T_WHITESPACE"," ",2929],"=",["T_WHITESPACE"," ",2929],["T_CONSTANT_ENCAPSED_STRING","''",2929],";",["T_WHITESPACE","\n    ",2929],"}",["T_WHITESPACE","\n    ",2930],["T_IF","if",2931],["T_WHITESPACE"," ",2931],"(",["T_ISSET","isset",2931],"(",["T_VARIABLE","$p_options",2931],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",2931],"]",")",")",["T_WHITESPACE"," ",2931],"{",["T_WHITESPACE","\n      ",2931],["T_VARIABLE","$p_remove_all_dir",2932],["T_WHITESPACE"," ",2932],"=",["T_WHITESPACE"," ",2932],["T_VARIABLE","$p_options",2932],"[",["T_STRING","PCLZIP_OPT_REMOVE_ALL_PATH",2932],"]",";",["T_WHITESPACE","\n    ",2932],"}",["T_WHITESPACE","\n    ",2933],["T_ELSE","else",2934],["T_WHITESPACE"," ",2934],"{",["T_WHITESPACE","\n      ",2934],["T_VARIABLE","$p_remove_all_dir",2935],["T_WHITESPACE"," ",2935],"=",["T_WHITESPACE"," ",2935],["T_LNUMBER","0",2935],";",["T_WHITESPACE","\n    ",2935],"}",["T_WHITESPACE","\n\n\n    ",2936],["T_COMMENT","\/\/ ----- Look for full name change\n",2939],["T_WHITESPACE","    ",2940],["T_IF","if",2940],["T_WHITESPACE"," ",2940],"(",["T_ISSET","isset",2940],"(",["T_VARIABLE","$p_filedescr",2940],"[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",2940],"]",")",")",["T_WHITESPACE"," ",2940],"{",["T_WHITESPACE","\n      ",2940],["T_COMMENT","\/\/ ----- Remove drive letter if any\n",2941],["T_WHITESPACE","      ",2942],["T_VARIABLE","$v_stored_filename",2942],["T_WHITESPACE"," ",2942],"=",["T_WHITESPACE"," ",2942],["T_STRING","PclZipUtilTranslateWinPath",2942],"(",["T_VARIABLE","$p_filedescr",2942],"[",["T_CONSTANT_ENCAPSED_STRING","'new_full_name'",2942],"]",")",";",["T_WHITESPACE","\n    ",2942],"}",["T_WHITESPACE","\n\n    ",2943],["T_COMMENT","\/\/ ----- Look for path and\/or short name change\n",2945],["T_WHITESPACE","    ",2946],["T_ELSE","else",2946],["T_WHITESPACE"," ",2946],"{",["T_WHITESPACE","\n\n      ",2946],["T_COMMENT","\/\/ ----- Look for short name change\n",2948],["T_WHITESPACE","      ",2949],["T_COMMENT","\/\/ Its when we cahnge just the filename but not the path\n",2949],["T_WHITESPACE","      ",2950],["T_IF","if",2950],["T_WHITESPACE"," ",2950],"(",["T_ISSET","isset",2950],"(",["T_VARIABLE","$p_filedescr",2950],"[",["T_CONSTANT_ENCAPSED_STRING","'new_short_name'",2950],"]",")",")",["T_WHITESPACE"," ",2950],"{",["T_WHITESPACE","\n        ",2950],["T_VARIABLE","$v_path_info",2951],["T_WHITESPACE"," ",2951],"=",["T_WHITESPACE"," ",2951],["T_STRING","pathinfo",2951],"(",["T_VARIABLE","$p_filename",2951],")",";",["T_WHITESPACE","\n        ",2951],["T_VARIABLE","$v_dir",2952],["T_WHITESPACE"," ",2952],"=",["T_WHITESPACE"," ",2952],["T_CONSTANT_ENCAPSED_STRING","''",2952],";",["T_WHITESPACE","\n        ",2952],["T_IF","if",2953],["T_WHITESPACE"," ",2953],"(",["T_VARIABLE","$v_path_info",2953],"[",["T_CONSTANT_ENCAPSED_STRING","'dirname'",2953],"]",["T_WHITESPACE"," ",2953],["T_IS_NOT_EQUAL","!=",2953],["T_WHITESPACE"," ",2953],["T_CONSTANT_ENCAPSED_STRING","''",2953],")",["T_WHITESPACE"," ",2953],"{",["T_WHITESPACE","\n          ",2953],["T_VARIABLE","$v_dir",2954],["T_WHITESPACE"," ",2954],"=",["T_WHITESPACE"," ",2954],["T_VARIABLE","$v_path_info",2954],"[",["T_CONSTANT_ENCAPSED_STRING","'dirname'",2954],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",2954],";",["T_WHITESPACE","\n        ",2954],"}",["T_WHITESPACE","\n        ",2955],["T_VARIABLE","$v_stored_filename",2956],["T_WHITESPACE"," ",2956],"=",["T_WHITESPACE"," ",2956],["T_VARIABLE","$v_dir",2956],".",["T_VARIABLE","$p_filedescr",2956],"[",["T_CONSTANT_ENCAPSED_STRING","'new_short_name'",2956],"]",";",["T_WHITESPACE","\n      ",2956],"}",["T_WHITESPACE","\n      ",2957],["T_ELSE","else",2958],["T_WHITESPACE"," ",2958],"{",["T_WHITESPACE","\n        ",2958],["T_COMMENT","\/\/ ----- Calculate the stored filename\n",2959],["T_WHITESPACE","        ",2960],["T_VARIABLE","$v_stored_filename",2960],["T_WHITESPACE"," ",2960],"=",["T_WHITESPACE"," ",2960],["T_VARIABLE","$p_filename",2960],";",["T_WHITESPACE","\n      ",2960],"}",["T_WHITESPACE","\n\n      ",2961],["T_COMMENT","\/\/ ----- Look for all path to remove\n",2963],["T_WHITESPACE","      ",2964],["T_IF","if",2964],["T_WHITESPACE"," ",2964],"(",["T_VARIABLE","$p_remove_all_dir",2964],")",["T_WHITESPACE"," ",2964],"{",["T_WHITESPACE","\n        ",2964],["T_VARIABLE","$v_stored_filename",2965],["T_WHITESPACE"," ",2965],"=",["T_WHITESPACE"," ",2965],["T_STRING","basename",2965],"(",["T_VARIABLE","$p_filename",2965],")",";",["T_WHITESPACE","\n      ",2965],"}",["T_WHITESPACE","\n      ",2966],["T_COMMENT","\/\/ ----- Look for partial path remove\n",2967],["T_WHITESPACE","      ",2968],["T_ELSE","else",2968],["T_WHITESPACE"," ",2968],["T_IF","if",2968],["T_WHITESPACE"," ",2968],"(",["T_VARIABLE","$p_remove_dir",2968],["T_WHITESPACE"," ",2968],["T_IS_NOT_EQUAL","!=",2968],["T_WHITESPACE"," ",2968],["T_CONSTANT_ENCAPSED_STRING","\"\"",2968],")",["T_WHITESPACE"," ",2968],"{",["T_WHITESPACE","\n        ",2968],["T_IF","if",2969],["T_WHITESPACE"," ",2969],"(",["T_STRING","substr",2969],"(",["T_VARIABLE","$p_remove_dir",2969],",",["T_WHITESPACE"," ",2969],"-",["T_LNUMBER","1",2969],")",["T_WHITESPACE"," ",2969],["T_IS_NOT_EQUAL","!=",2969],["T_WHITESPACE"," ",2969],["T_CONSTANT_ENCAPSED_STRING","'\/'",2969],")",["T_WHITESPACE","\n          ",2969],["T_VARIABLE","$p_remove_dir",2970],["T_WHITESPACE"," ",2970],["T_CONCAT_EQUAL",".=",2970],["T_WHITESPACE"," ",2970],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",2970],";",["T_WHITESPACE","\n\n        ",2970],["T_IF","if",2972],["T_WHITESPACE"," ",2972],"(",["T_WHITESPACE","   ",2972],"(",["T_STRING","substr",2972],"(",["T_VARIABLE","$p_filename",2972],",",["T_WHITESPACE"," ",2972],["T_LNUMBER","0",2972],",",["T_WHITESPACE"," ",2972],["T_LNUMBER","2",2972],")",["T_WHITESPACE"," ",2972],["T_IS_EQUAL","==",2972],["T_WHITESPACE"," ",2972],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2972],")",["T_WHITESPACE","\n            ",2972],["T_BOOLEAN_OR","||",2973],["T_WHITESPACE"," ",2973],"(",["T_STRING","substr",2973],"(",["T_VARIABLE","$p_remove_dir",2973],",",["T_WHITESPACE"," ",2973],["T_LNUMBER","0",2973],",",["T_WHITESPACE"," ",2973],["T_LNUMBER","2",2973],")",["T_WHITESPACE"," ",2973],["T_IS_EQUAL","==",2973],["T_WHITESPACE"," ",2973],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2973],")",")",["T_WHITESPACE"," ",2973],"{",["T_WHITESPACE","\n\n          ",2973],["T_IF","if",2975],["T_WHITESPACE"," ",2975],"(",["T_WHITESPACE","   ",2975],"(",["T_STRING","substr",2975],"(",["T_VARIABLE","$p_filename",2975],",",["T_WHITESPACE"," ",2975],["T_LNUMBER","0",2975],",",["T_WHITESPACE"," ",2975],["T_LNUMBER","2",2975],")",["T_WHITESPACE"," ",2975],["T_IS_EQUAL","==",2975],["T_WHITESPACE"," ",2975],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2975],")",["T_WHITESPACE","\n              ",2975],["T_BOOLEAN_AND","&&",2976],["T_WHITESPACE"," ",2976],"(",["T_STRING","substr",2976],"(",["T_VARIABLE","$p_remove_dir",2976],",",["T_WHITESPACE"," ",2976],["T_LNUMBER","0",2976],",",["T_WHITESPACE"," ",2976],["T_LNUMBER","2",2976],")",["T_WHITESPACE"," ",2976],["T_IS_NOT_EQUAL","!=",2976],["T_WHITESPACE"," ",2976],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2976],")",")",["T_WHITESPACE"," ",2976],"{",["T_WHITESPACE","\n            ",2976],["T_VARIABLE","$p_remove_dir",2977],["T_WHITESPACE"," ",2977],"=",["T_WHITESPACE"," ",2977],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2977],".",["T_VARIABLE","$p_remove_dir",2977],";",["T_WHITESPACE","\n          ",2977],"}",["T_WHITESPACE","\n          ",2978],["T_IF","if",2979],["T_WHITESPACE"," ",2979],"(",["T_WHITESPACE","   ",2979],"(",["T_STRING","substr",2979],"(",["T_VARIABLE","$p_filename",2979],",",["T_WHITESPACE"," ",2979],["T_LNUMBER","0",2979],",",["T_WHITESPACE"," ",2979],["T_LNUMBER","2",2979],")",["T_WHITESPACE"," ",2979],["T_IS_NOT_EQUAL","!=",2979],["T_WHITESPACE"," ",2979],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2979],")",["T_WHITESPACE","\n              ",2979],["T_BOOLEAN_AND","&&",2980],["T_WHITESPACE"," ",2980],"(",["T_STRING","substr",2980],"(",["T_VARIABLE","$p_remove_dir",2980],",",["T_WHITESPACE"," ",2980],["T_LNUMBER","0",2980],",",["T_WHITESPACE"," ",2980],["T_LNUMBER","2",2980],")",["T_WHITESPACE"," ",2980],["T_IS_EQUAL","==",2980],["T_WHITESPACE"," ",2980],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",2980],")",")",["T_WHITESPACE"," ",2980],"{",["T_WHITESPACE","\n            ",2980],["T_VARIABLE","$p_remove_dir",2981],["T_WHITESPACE"," ",2981],"=",["T_WHITESPACE"," ",2981],["T_STRING","substr",2981],"(",["T_VARIABLE","$p_remove_dir",2981],",",["T_WHITESPACE"," ",2981],["T_LNUMBER","2",2981],")",";",["T_WHITESPACE","\n          ",2981],"}",["T_WHITESPACE","\n        ",2982],"}",["T_WHITESPACE","\n\n        ",2983],["T_VARIABLE","$v_compare",2985],["T_WHITESPACE"," ",2985],"=",["T_WHITESPACE"," ",2985],["T_STRING","PclZipUtilPathInclusion",2985],"(",["T_VARIABLE","$p_remove_dir",2985],",",["T_WHITESPACE","\n                                             ",2985],["T_VARIABLE","$v_stored_filename",2986],")",";",["T_WHITESPACE","\n        ",2986],["T_IF","if",2987],["T_WHITESPACE"," ",2987],"(",["T_VARIABLE","$v_compare",2987],["T_WHITESPACE"," ",2987],">",["T_WHITESPACE"," ",2987],["T_LNUMBER","0",2987],")",["T_WHITESPACE"," ",2987],"{",["T_WHITESPACE","\n          ",2987],["T_IF","if",2988],["T_WHITESPACE"," ",2988],"(",["T_VARIABLE","$v_compare",2988],["T_WHITESPACE"," ",2988],["T_IS_EQUAL","==",2988],["T_WHITESPACE"," ",2988],["T_LNUMBER","2",2988],")",["T_WHITESPACE"," ",2988],"{",["T_WHITESPACE","\n            ",2988],["T_VARIABLE","$v_stored_filename",2989],["T_WHITESPACE"," ",2989],"=",["T_WHITESPACE"," ",2989],["T_CONSTANT_ENCAPSED_STRING","\"\"",2989],";",["T_WHITESPACE","\n          ",2989],"}",["T_WHITESPACE","\n          ",2990],["T_ELSE","else",2991],["T_WHITESPACE"," ",2991],"{",["T_WHITESPACE","\n            ",2991],["T_VARIABLE","$v_stored_filename",2992],["T_WHITESPACE"," ",2992],"=",["T_WHITESPACE"," ",2992],["T_STRING","substr",2992],"(",["T_VARIABLE","$v_stored_filename",2992],",",["T_WHITESPACE","\n                                        ",2992],["T_STRING","strlen",2993],"(",["T_VARIABLE","$p_remove_dir",2993],")",")",";",["T_WHITESPACE","\n          ",2993],"}",["T_WHITESPACE","\n        ",2994],"}",["T_WHITESPACE","\n      ",2995],"}",["T_WHITESPACE","\n\n      ",2996],["T_COMMENT","\/\/ ----- Remove drive letter if any\n",2998],["T_WHITESPACE","      ",2999],["T_VARIABLE","$v_stored_filename",2999],["T_WHITESPACE"," ",2999],"=",["T_WHITESPACE"," ",2999],["T_STRING","PclZipUtilTranslateWinPath",2999],"(",["T_VARIABLE","$v_stored_filename",2999],")",";",["T_WHITESPACE","\n\n      ",2999],["T_COMMENT","\/\/ ----- Look for path to add\n",3001],["T_WHITESPACE","      ",3002],["T_IF","if",3002],["T_WHITESPACE"," ",3002],"(",["T_VARIABLE","$p_add_dir",3002],["T_WHITESPACE"," ",3002],["T_IS_NOT_EQUAL","!=",3002],["T_WHITESPACE"," ",3002],["T_CONSTANT_ENCAPSED_STRING","\"\"",3002],")",["T_WHITESPACE"," ",3002],"{",["T_WHITESPACE","\n        ",3002],["T_IF","if",3003],["T_WHITESPACE"," ",3003],"(",["T_STRING","substr",3003],"(",["T_VARIABLE","$p_add_dir",3003],",",["T_WHITESPACE"," ",3003],"-",["T_LNUMBER","1",3003],")",["T_WHITESPACE"," ",3003],["T_IS_EQUAL","==",3003],["T_WHITESPACE"," ",3003],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3003],")",["T_WHITESPACE","\n          ",3003],["T_VARIABLE","$v_stored_filename",3004],["T_WHITESPACE"," ",3004],"=",["T_WHITESPACE"," ",3004],["T_VARIABLE","$p_add_dir",3004],".",["T_VARIABLE","$v_stored_filename",3004],";",["T_WHITESPACE","\n        ",3004],["T_ELSE","else",3005],["T_WHITESPACE","\n          ",3005],["T_VARIABLE","$v_stored_filename",3006],["T_WHITESPACE"," ",3006],"=",["T_WHITESPACE"," ",3006],["T_VARIABLE","$p_add_dir",3006],".",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3006],".",["T_VARIABLE","$v_stored_filename",3006],";",["T_WHITESPACE","\n      ",3006],"}",["T_WHITESPACE","\n    ",3007],"}",["T_WHITESPACE","\n\n    ",3008],["T_COMMENT","\/\/ ----- Filename (reduce the path of stored name)\n",3010],["T_WHITESPACE","    ",3011],["T_VARIABLE","$v_stored_filename",3011],["T_WHITESPACE"," ",3011],"=",["T_WHITESPACE"," ",3011],["T_STRING","PclZipUtilPathReduction",3011],"(",["T_VARIABLE","$v_stored_filename",3011],")",";",["T_WHITESPACE","\n    ",3011],["T_VARIABLE","$p_filedescr",3012],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3012],"]",["T_WHITESPACE"," ",3012],"=",["T_WHITESPACE"," ",3012],["T_VARIABLE","$v_stored_filename",3012],";",["T_WHITESPACE","\n\n    ",3012],["T_COMMENT","\/\/ ----- Return\n",3014],["T_WHITESPACE","    ",3015],["T_RETURN","return",3015],["T_WHITESPACE"," ",3015],["T_VARIABLE","$v_result",3015],";",["T_WHITESPACE","\n  ",3015],"}",["T_WHITESPACE","\n  ",3016],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3017],["T_WHITESPACE","\n  ",3018],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3019],["T_WHITESPACE","  ",3020],["T_COMMENT","\/\/ Function : privWriteFileHeader()\n",3020],["T_WHITESPACE","  ",3021],["T_COMMENT","\/\/ Description :\n",3021],["T_WHITESPACE","  ",3022],["T_COMMENT","\/\/ Parameters :\n",3022],["T_WHITESPACE","  ",3023],["T_COMMENT","\/\/ Return Values :\n",3023],["T_WHITESPACE","  ",3024],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3024],["T_WHITESPACE","  ",3025],["T_FUNCTION","function",3025],["T_WHITESPACE"," ",3025],["T_STRING","privWriteFileHeader",3025],"(","&",["T_VARIABLE","$p_header",3025],")",["T_WHITESPACE","\n  ",3025],"{",["T_WHITESPACE","\n    ",3026],["T_VARIABLE","$v_result",3027],"=",["T_LNUMBER","1",3027],";",["T_WHITESPACE","\n\n    ",3027],["T_COMMENT","\/\/ ----- Store the offset position of the file\n",3029],["T_WHITESPACE","    ",3030],["T_VARIABLE","$p_header",3030],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",3030],"]",["T_WHITESPACE"," ",3030],"=",["T_WHITESPACE"," ",3030],["T_STRING","ftell",3030],"(",["T_VARIABLE","$this",3030],["T_OBJECT_OPERATOR","->",3030],["T_STRING","zip_fd",3030],")",";",["T_WHITESPACE","\n\n    ",3030],["T_COMMENT","\/\/ ----- Transform UNIX mtime to DOS format mdate\/mtime\n",3032],["T_WHITESPACE","    ",3033],["T_VARIABLE","$v_date",3033],["T_WHITESPACE"," ",3033],"=",["T_WHITESPACE"," ",3033],["T_STRING","getdate",3033],"(",["T_VARIABLE","$p_header",3033],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3033],"]",")",";",["T_WHITESPACE","\n    ",3033],["T_VARIABLE","$v_mtime",3034],["T_WHITESPACE"," ",3034],"=",["T_WHITESPACE"," ",3034],"(",["T_VARIABLE","$v_date",3034],"[",["T_CONSTANT_ENCAPSED_STRING","'hours'",3034],"]",["T_SL","<<",3034],["T_LNUMBER","11",3034],")",["T_WHITESPACE"," ",3034],"+",["T_WHITESPACE"," ",3034],"(",["T_VARIABLE","$v_date",3034],"[",["T_CONSTANT_ENCAPSED_STRING","'minutes'",3034],"]",["T_SL","<<",3034],["T_LNUMBER","5",3034],")",["T_WHITESPACE"," ",3034],"+",["T_WHITESPACE"," ",3034],["T_VARIABLE","$v_date",3034],"[",["T_CONSTANT_ENCAPSED_STRING","'seconds'",3034],"]","\/",["T_LNUMBER","2",3034],";",["T_WHITESPACE","\n    ",3034],["T_VARIABLE","$v_mdate",3035],["T_WHITESPACE"," ",3035],"=",["T_WHITESPACE"," ",3035],"(","(",["T_VARIABLE","$v_date",3035],"[",["T_CONSTANT_ENCAPSED_STRING","'year'",3035],"]","-",["T_LNUMBER","1980",3035],")",["T_SL","<<",3035],["T_LNUMBER","9",3035],")",["T_WHITESPACE"," ",3035],"+",["T_WHITESPACE"," ",3035],"(",["T_VARIABLE","$v_date",3035],"[",["T_CONSTANT_ENCAPSED_STRING","'mon'",3035],"]",["T_SL","<<",3035],["T_LNUMBER","5",3035],")",["T_WHITESPACE"," ",3035],"+",["T_WHITESPACE"," ",3035],["T_VARIABLE","$v_date",3035],"[",["T_CONSTANT_ENCAPSED_STRING","'mday'",3035],"]",";",["T_WHITESPACE","\n\n    ",3035],["T_COMMENT","\/\/ ----- Packed data\n",3037],["T_WHITESPACE","    ",3038],["T_VARIABLE","$v_binary_data",3038],["T_WHITESPACE"," ",3038],"=",["T_WHITESPACE"," ",3038],["T_STRING","pack",3038],"(",["T_CONSTANT_ENCAPSED_STRING","\"VvvvvvVVVvv\"",3038],",",["T_WHITESPACE"," ",3038],["T_LNUMBER","0x04034b50",3038],",",["T_WHITESPACE","\n\t                      ",3038],["T_VARIABLE","$p_header",3039],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",3039],"]",",",["T_WHITESPACE"," ",3039],["T_VARIABLE","$p_header",3039],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",3039],"]",",",["T_WHITESPACE","\n                          ",3039],["T_VARIABLE","$p_header",3040],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3040],"]",",",["T_WHITESPACE"," ",3040],["T_VARIABLE","$v_mtime",3040],",",["T_WHITESPACE"," ",3040],["T_VARIABLE","$v_mdate",3040],",",["T_WHITESPACE","\n                          ",3040],["T_VARIABLE","$p_header",3041],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",3041],"]",",",["T_WHITESPACE"," ",3041],["T_VARIABLE","$p_header",3041],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3041],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3041],["T_VARIABLE","$p_header",3042],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3042],"]",",",["T_WHITESPACE","\n                          ",3042],["T_STRING","strlen",3043],"(",["T_VARIABLE","$p_header",3043],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3043],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3043],["T_VARIABLE","$p_header",3044],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3044],"]",")",";",["T_WHITESPACE","\n\n    ",3044],["T_COMMENT","\/\/ ----- Write the first 148 bytes of the header in the archive\n",3046],["T_WHITESPACE","    ",3047],["T_STRING","fputs",3047],"(",["T_VARIABLE","$this",3047],["T_OBJECT_OPERATOR","->",3047],["T_STRING","zip_fd",3047],",",["T_WHITESPACE"," ",3047],["T_VARIABLE","$v_binary_data",3047],",",["T_WHITESPACE"," ",3047],["T_LNUMBER","30",3047],")",";",["T_WHITESPACE","\n\n    ",3047],["T_COMMENT","\/\/ ----- Write the variable fields\n",3049],["T_WHITESPACE","    ",3050],["T_IF","if",3050],["T_WHITESPACE"," ",3050],"(",["T_STRING","strlen",3050],"(",["T_VARIABLE","$p_header",3050],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3050],"]",")",["T_WHITESPACE"," ",3050],["T_IS_NOT_EQUAL","!=",3050],["T_WHITESPACE"," ",3050],["T_LNUMBER","0",3050],")",["T_WHITESPACE","\n    ",3050],"{",["T_WHITESPACE","\n      ",3051],["T_STRING","fputs",3052],"(",["T_VARIABLE","$this",3052],["T_OBJECT_OPERATOR","->",3052],["T_STRING","zip_fd",3052],",",["T_WHITESPACE"," ",3052],["T_VARIABLE","$p_header",3052],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3052],"]",",",["T_WHITESPACE"," ",3052],["T_STRING","strlen",3052],"(",["T_VARIABLE","$p_header",3052],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3052],"]",")",")",";",["T_WHITESPACE","\n    ",3052],"}",["T_WHITESPACE","\n    ",3053],["T_IF","if",3054],["T_WHITESPACE"," ",3054],"(",["T_VARIABLE","$p_header",3054],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3054],"]",["T_WHITESPACE"," ",3054],["T_IS_NOT_EQUAL","!=",3054],["T_WHITESPACE"," ",3054],["T_LNUMBER","0",3054],")",["T_WHITESPACE","\n    ",3054],"{",["T_WHITESPACE","\n      ",3055],["T_STRING","fputs",3056],"(",["T_VARIABLE","$this",3056],["T_OBJECT_OPERATOR","->",3056],["T_STRING","zip_fd",3056],",",["T_WHITESPACE"," ",3056],["T_VARIABLE","$p_header",3056],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",3056],"]",",",["T_WHITESPACE"," ",3056],["T_VARIABLE","$p_header",3056],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3056],"]",")",";",["T_WHITESPACE","\n    ",3056],"}",["T_WHITESPACE","\n\n    ",3057],["T_COMMENT","\/\/ ----- Return\n",3059],["T_WHITESPACE","    ",3060],["T_RETURN","return",3060],["T_WHITESPACE"," ",3060],["T_VARIABLE","$v_result",3060],";",["T_WHITESPACE","\n  ",3060],"}",["T_WHITESPACE","\n  ",3061],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3062],["T_WHITESPACE","\n  ",3063],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3064],["T_WHITESPACE","  ",3065],["T_COMMENT","\/\/ Function : privWriteCentralFileHeader()\n",3065],["T_WHITESPACE","  ",3066],["T_COMMENT","\/\/ Description :\n",3066],["T_WHITESPACE","  ",3067],["T_COMMENT","\/\/ Parameters :\n",3067],["T_WHITESPACE","  ",3068],["T_COMMENT","\/\/ Return Values :\n",3068],["T_WHITESPACE","  ",3069],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3069],["T_WHITESPACE","  ",3070],["T_FUNCTION","function",3070],["T_WHITESPACE"," ",3070],["T_STRING","privWriteCentralFileHeader",3070],"(","&",["T_VARIABLE","$p_header",3070],")",["T_WHITESPACE","\n  ",3070],"{",["T_WHITESPACE","\n    ",3071],["T_VARIABLE","$v_result",3072],"=",["T_LNUMBER","1",3072],";",["T_WHITESPACE","\n\n    ",3072],["T_COMMENT","\/\/ TBC\n",3074],["T_WHITESPACE","    ",3075],["T_COMMENT","\/\/for(reset($p_header); $key = key($p_header); next($p_header)) {\n",3075],["T_WHITESPACE","    ",3076],["T_COMMENT","\/\/}\n",3076],["T_WHITESPACE","\n    ",3077],["T_COMMENT","\/\/ ----- Transform UNIX mtime to DOS format mdate\/mtime\n",3078],["T_WHITESPACE","    ",3079],["T_VARIABLE","$v_date",3079],["T_WHITESPACE"," ",3079],"=",["T_WHITESPACE"," ",3079],["T_STRING","getdate",3079],"(",["T_VARIABLE","$p_header",3079],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3079],"]",")",";",["T_WHITESPACE","\n    ",3079],["T_VARIABLE","$v_mtime",3080],["T_WHITESPACE"," ",3080],"=",["T_WHITESPACE"," ",3080],"(",["T_VARIABLE","$v_date",3080],"[",["T_CONSTANT_ENCAPSED_STRING","'hours'",3080],"]",["T_SL","<<",3080],["T_LNUMBER","11",3080],")",["T_WHITESPACE"," ",3080],"+",["T_WHITESPACE"," ",3080],"(",["T_VARIABLE","$v_date",3080],"[",["T_CONSTANT_ENCAPSED_STRING","'minutes'",3080],"]",["T_SL","<<",3080],["T_LNUMBER","5",3080],")",["T_WHITESPACE"," ",3080],"+",["T_WHITESPACE"," ",3080],["T_VARIABLE","$v_date",3080],"[",["T_CONSTANT_ENCAPSED_STRING","'seconds'",3080],"]","\/",["T_LNUMBER","2",3080],";",["T_WHITESPACE","\n    ",3080],["T_VARIABLE","$v_mdate",3081],["T_WHITESPACE"," ",3081],"=",["T_WHITESPACE"," ",3081],"(","(",["T_VARIABLE","$v_date",3081],"[",["T_CONSTANT_ENCAPSED_STRING","'year'",3081],"]","-",["T_LNUMBER","1980",3081],")",["T_SL","<<",3081],["T_LNUMBER","9",3081],")",["T_WHITESPACE"," ",3081],"+",["T_WHITESPACE"," ",3081],"(",["T_VARIABLE","$v_date",3081],"[",["T_CONSTANT_ENCAPSED_STRING","'mon'",3081],"]",["T_SL","<<",3081],["T_LNUMBER","5",3081],")",["T_WHITESPACE"," ",3081],"+",["T_WHITESPACE"," ",3081],["T_VARIABLE","$v_date",3081],"[",["T_CONSTANT_ENCAPSED_STRING","'mday'",3081],"]",";",["T_WHITESPACE","\n\n\n    ",3081],["T_COMMENT","\/\/ ----- Packed data\n",3084],["T_WHITESPACE","    ",3085],["T_VARIABLE","$v_binary_data",3085],["T_WHITESPACE"," ",3085],"=",["T_WHITESPACE"," ",3085],["T_STRING","pack",3085],"(",["T_CONSTANT_ENCAPSED_STRING","\"VvvvvvvVVVvvvvvVV\"",3085],",",["T_WHITESPACE"," ",3085],["T_LNUMBER","0x02014b50",3085],",",["T_WHITESPACE","\n\t                      ",3085],["T_VARIABLE","$p_header",3086],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",3086],"]",",",["T_WHITESPACE"," ",3086],["T_VARIABLE","$p_header",3086],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",3086],"]",",",["T_WHITESPACE","\n                          ",3086],["T_VARIABLE","$p_header",3087],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",3087],"]",",",["T_WHITESPACE"," ",3087],["T_VARIABLE","$p_header",3087],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3087],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3087],["T_VARIABLE","$v_mtime",3088],",",["T_WHITESPACE"," ",3088],["T_VARIABLE","$v_mdate",3088],",",["T_WHITESPACE"," ",3088],["T_VARIABLE","$p_header",3088],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",3088],"]",",",["T_WHITESPACE","\n                          ",3088],["T_VARIABLE","$p_header",3089],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3089],"]",",",["T_WHITESPACE"," ",3089],["T_VARIABLE","$p_header",3089],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3089],"]",",",["T_WHITESPACE","\n                          ",3089],["T_STRING","strlen",3090],"(",["T_VARIABLE","$p_header",3090],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3090],"]",")",",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3090],["T_VARIABLE","$p_header",3091],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3091],"]",",",["T_WHITESPACE"," ",3091],["T_VARIABLE","$p_header",3091],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",3091],"]",",",["T_WHITESPACE","\n                          ",3091],["T_VARIABLE","$p_header",3092],"[",["T_CONSTANT_ENCAPSED_STRING","'disk'",3092],"]",",",["T_WHITESPACE"," ",3092],["T_VARIABLE","$p_header",3092],"[",["T_CONSTANT_ENCAPSED_STRING","'internal'",3092],"]",",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3092],["T_VARIABLE","$p_header",3093],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3093],"]",",",["T_WHITESPACE"," ",3093],["T_VARIABLE","$p_header",3093],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",3093],"]",")",";",["T_WHITESPACE","\n\n    ",3093],["T_COMMENT","\/\/ ----- Write the 42 bytes of the header in the zip file\n",3095],["T_WHITESPACE","    ",3096],["T_STRING","fputs",3096],"(",["T_VARIABLE","$this",3096],["T_OBJECT_OPERATOR","->",3096],["T_STRING","zip_fd",3096],",",["T_WHITESPACE"," ",3096],["T_VARIABLE","$v_binary_data",3096],",",["T_WHITESPACE"," ",3096],["T_LNUMBER","46",3096],")",";",["T_WHITESPACE","\n\n    ",3096],["T_COMMENT","\/\/ ----- Write the variable fields\n",3098],["T_WHITESPACE","    ",3099],["T_IF","if",3099],["T_WHITESPACE"," ",3099],"(",["T_STRING","strlen",3099],"(",["T_VARIABLE","$p_header",3099],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3099],"]",")",["T_WHITESPACE"," ",3099],["T_IS_NOT_EQUAL","!=",3099],["T_WHITESPACE"," ",3099],["T_LNUMBER","0",3099],")",["T_WHITESPACE","\n    ",3099],"{",["T_WHITESPACE","\n      ",3100],["T_STRING","fputs",3101],"(",["T_VARIABLE","$this",3101],["T_OBJECT_OPERATOR","->",3101],["T_STRING","zip_fd",3101],",",["T_WHITESPACE"," ",3101],["T_VARIABLE","$p_header",3101],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3101],"]",",",["T_WHITESPACE"," ",3101],["T_STRING","strlen",3101],"(",["T_VARIABLE","$p_header",3101],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3101],"]",")",")",";",["T_WHITESPACE","\n    ",3101],"}",["T_WHITESPACE","\n    ",3102],["T_IF","if",3103],["T_WHITESPACE"," ",3103],"(",["T_VARIABLE","$p_header",3103],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3103],"]",["T_WHITESPACE"," ",3103],["T_IS_NOT_EQUAL","!=",3103],["T_WHITESPACE"," ",3103],["T_LNUMBER","0",3103],")",["T_WHITESPACE","\n    ",3103],"{",["T_WHITESPACE","\n      ",3104],["T_STRING","fputs",3105],"(",["T_VARIABLE","$this",3105],["T_OBJECT_OPERATOR","->",3105],["T_STRING","zip_fd",3105],",",["T_WHITESPACE"," ",3105],["T_VARIABLE","$p_header",3105],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",3105],"]",",",["T_WHITESPACE"," ",3105],["T_VARIABLE","$p_header",3105],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",3105],"]",")",";",["T_WHITESPACE","\n    ",3105],"}",["T_WHITESPACE","\n    ",3106],["T_IF","if",3107],["T_WHITESPACE"," ",3107],"(",["T_VARIABLE","$p_header",3107],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",3107],"]",["T_WHITESPACE"," ",3107],["T_IS_NOT_EQUAL","!=",3107],["T_WHITESPACE"," ",3107],["T_LNUMBER","0",3107],")",["T_WHITESPACE","\n    ",3107],"{",["T_WHITESPACE","\n      ",3108],["T_STRING","fputs",3109],"(",["T_VARIABLE","$this",3109],["T_OBJECT_OPERATOR","->",3109],["T_STRING","zip_fd",3109],",",["T_WHITESPACE"," ",3109],["T_VARIABLE","$p_header",3109],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",3109],"]",",",["T_WHITESPACE"," ",3109],["T_VARIABLE","$p_header",3109],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",3109],"]",")",";",["T_WHITESPACE","\n    ",3109],"}",["T_WHITESPACE","\n\n    ",3110],["T_COMMENT","\/\/ ----- Return\n",3112],["T_WHITESPACE","    ",3113],["T_RETURN","return",3113],["T_WHITESPACE"," ",3113],["T_VARIABLE","$v_result",3113],";",["T_WHITESPACE","\n  ",3113],"}",["T_WHITESPACE","\n  ",3114],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3115],["T_WHITESPACE","\n  ",3116],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3117],["T_WHITESPACE","  ",3118],["T_COMMENT","\/\/ Function : privWriteCentralHeader()\n",3118],["T_WHITESPACE","  ",3119],["T_COMMENT","\/\/ Description :\n",3119],["T_WHITESPACE","  ",3120],["T_COMMENT","\/\/ Parameters :\n",3120],["T_WHITESPACE","  ",3121],["T_COMMENT","\/\/ Return Values :\n",3121],["T_WHITESPACE","  ",3122],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3122],["T_WHITESPACE","  ",3123],["T_FUNCTION","function",3123],["T_WHITESPACE"," ",3123],["T_STRING","privWriteCentralHeader",3123],"(",["T_VARIABLE","$p_nb_entries",3123],",",["T_WHITESPACE"," ",3123],["T_VARIABLE","$p_size",3123],",",["T_WHITESPACE"," ",3123],["T_VARIABLE","$p_offset",3123],",",["T_WHITESPACE"," ",3123],["T_VARIABLE","$p_comment",3123],")",["T_WHITESPACE","\n  ",3123],"{",["T_WHITESPACE","\n    ",3124],["T_VARIABLE","$v_result",3125],"=",["T_LNUMBER","1",3125],";",["T_WHITESPACE","\n\n    ",3125],["T_COMMENT","\/\/ ----- Packed data\n",3127],["T_WHITESPACE","    ",3128],["T_VARIABLE","$v_binary_data",3128],["T_WHITESPACE"," ",3128],"=",["T_WHITESPACE"," ",3128],["T_STRING","pack",3128],"(",["T_CONSTANT_ENCAPSED_STRING","\"VvvvvVVv\"",3128],",",["T_WHITESPACE"," ",3128],["T_LNUMBER","0x06054b50",3128],",",["T_WHITESPACE"," ",3128],["T_LNUMBER","0",3128],",",["T_WHITESPACE"," ",3128],["T_LNUMBER","0",3128],",",["T_WHITESPACE"," ",3128],["T_VARIABLE","$p_nb_entries",3128],",",["T_WHITESPACE","\n\t                      ",3128],["T_VARIABLE","$p_nb_entries",3129],",",["T_WHITESPACE"," ",3129],["T_VARIABLE","$p_size",3129],",",["T_WHITESPACE","\n\t\t\t\t\t\t  ",3129],["T_VARIABLE","$p_offset",3130],",",["T_WHITESPACE"," ",3130],["T_STRING","strlen",3130],"(",["T_VARIABLE","$p_comment",3130],")",")",";",["T_WHITESPACE","\n\n    ",3130],["T_COMMENT","\/\/ ----- Write the 22 bytes of the header in the zip file\n",3132],["T_WHITESPACE","    ",3133],["T_STRING","fputs",3133],"(",["T_VARIABLE","$this",3133],["T_OBJECT_OPERATOR","->",3133],["T_STRING","zip_fd",3133],",",["T_WHITESPACE"," ",3133],["T_VARIABLE","$v_binary_data",3133],",",["T_WHITESPACE"," ",3133],["T_LNUMBER","22",3133],")",";",["T_WHITESPACE","\n\n    ",3133],["T_COMMENT","\/\/ ----- Write the variable fields\n",3135],["T_WHITESPACE","    ",3136],["T_IF","if",3136],["T_WHITESPACE"," ",3136],"(",["T_STRING","strlen",3136],"(",["T_VARIABLE","$p_comment",3136],")",["T_WHITESPACE"," ",3136],["T_IS_NOT_EQUAL","!=",3136],["T_WHITESPACE"," ",3136],["T_LNUMBER","0",3136],")",["T_WHITESPACE","\n    ",3136],"{",["T_WHITESPACE","\n      ",3137],["T_STRING","fputs",3138],"(",["T_VARIABLE","$this",3138],["T_OBJECT_OPERATOR","->",3138],["T_STRING","zip_fd",3138],",",["T_WHITESPACE"," ",3138],["T_VARIABLE","$p_comment",3138],",",["T_WHITESPACE"," ",3138],["T_STRING","strlen",3138],"(",["T_VARIABLE","$p_comment",3138],")",")",";",["T_WHITESPACE","\n    ",3138],"}",["T_WHITESPACE","\n\n    ",3139],["T_COMMENT","\/\/ ----- Return\n",3141],["T_WHITESPACE","    ",3142],["T_RETURN","return",3142],["T_WHITESPACE"," ",3142],["T_VARIABLE","$v_result",3142],";",["T_WHITESPACE","\n  ",3142],"}",["T_WHITESPACE","\n  ",3143],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3144],["T_WHITESPACE","\n  ",3145],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3146],["T_WHITESPACE","  ",3147],["T_COMMENT","\/\/ Function : privList()\n",3147],["T_WHITESPACE","  ",3148],["T_COMMENT","\/\/ Description :\n",3148],["T_WHITESPACE","  ",3149],["T_COMMENT","\/\/ Parameters :\n",3149],["T_WHITESPACE","  ",3150],["T_COMMENT","\/\/ Return Values :\n",3150],["T_WHITESPACE","  ",3151],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3151],["T_WHITESPACE","  ",3152],["T_FUNCTION","function",3152],["T_WHITESPACE"," ",3152],["T_STRING","privList",3152],"(","&",["T_VARIABLE","$p_list",3152],")",["T_WHITESPACE","\n  ",3152],"{",["T_WHITESPACE","\n    ",3153],["T_VARIABLE","$v_result",3154],"=",["T_LNUMBER","1",3154],";",["T_WHITESPACE","\n\n    ",3154],["T_COMMENT","\/\/ ----- Magic quotes trick\n",3156],["T_WHITESPACE","    ",3157],["T_VARIABLE","$this",3157],["T_OBJECT_OPERATOR","->",3157],["T_STRING","privDisableMagicQuotes",3157],"(",")",";",["T_WHITESPACE","\n\n    ",3157],["T_COMMENT","\/\/ ----- Open the zip file\n",3159],["T_WHITESPACE","    ",3160],["T_IF","if",3160],["T_WHITESPACE"," ",3160],"(","(",["T_VARIABLE","$this",3160],["T_OBJECT_OPERATOR","->",3160],["T_STRING","zip_fd",3160],["T_WHITESPACE"," ",3160],"=",["T_WHITESPACE"," ",3160],"@",["T_STRING","fopen",3160],"(",["T_VARIABLE","$this",3160],["T_OBJECT_OPERATOR","->",3160],["T_STRING","zipname",3160],",",["T_WHITESPACE"," ",3160],["T_CONSTANT_ENCAPSED_STRING","'rb'",3160],")",")",["T_WHITESPACE"," ",3160],["T_IS_EQUAL","==",3160],["T_WHITESPACE"," ",3160],["T_LNUMBER","0",3160],")",["T_WHITESPACE","\n    ",3160],"{",["T_WHITESPACE","\n      ",3161],["T_COMMENT","\/\/ ----- Magic quotes trick\n",3162],["T_WHITESPACE","      ",3163],["T_VARIABLE","$this",3163],["T_OBJECT_OPERATOR","->",3163],["T_STRING","privSwapBackMagicQuotes",3163],"(",")",";",["T_WHITESPACE","\n\n      ",3163],["T_COMMENT","\/\/ ----- Error log\n",3165],["T_WHITESPACE","      ",3166],["T_STRING","PclZip",3166],["T_DOUBLE_COLON","::",3166],["T_STRING","privErrorLog",3166],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",3166],",",["T_WHITESPACE"," ",3166],["T_CONSTANT_ENCAPSED_STRING","'Unable to open archive \\''",3166],".",["T_VARIABLE","$this",3166],["T_OBJECT_OPERATOR","->",3166],["T_STRING","zipname",3166],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary read mode'",3166],")",";",["T_WHITESPACE","\n\n      ",3166],["T_COMMENT","\/\/ ----- Return\n",3168],["T_WHITESPACE","      ",3169],["T_RETURN","return",3169],["T_WHITESPACE"," ",3169],["T_STRING","PclZip",3169],["T_DOUBLE_COLON","::",3169],["T_STRING","errorCode",3169],"(",")",";",["T_WHITESPACE","\n    ",3169],"}",["T_WHITESPACE","\n\n    ",3170],["T_COMMENT","\/\/ ----- Read the central directory informations\n",3172],["T_WHITESPACE","    ",3173],["T_VARIABLE","$v_central_dir",3173],["T_WHITESPACE"," ",3173],"=",["T_WHITESPACE"," ",3173],["T_ARRAY","array",3173],"(",")",";",["T_WHITESPACE","\n    ",3173],["T_IF","if",3174],["T_WHITESPACE"," ",3174],"(","(",["T_VARIABLE","$v_result",3174],["T_WHITESPACE"," ",3174],"=",["T_WHITESPACE"," ",3174],["T_VARIABLE","$this",3174],["T_OBJECT_OPERATOR","->",3174],["T_STRING","privReadEndCentralDir",3174],"(",["T_VARIABLE","$v_central_dir",3174],")",")",["T_WHITESPACE"," ",3174],["T_IS_NOT_EQUAL","!=",3174],["T_WHITESPACE"," ",3174],["T_LNUMBER","1",3174],")",["T_WHITESPACE","\n    ",3174],"{",["T_WHITESPACE","\n      ",3175],["T_VARIABLE","$this",3176],["T_OBJECT_OPERATOR","->",3176],["T_STRING","privSwapBackMagicQuotes",3176],"(",")",";",["T_WHITESPACE","\n      ",3176],["T_RETURN","return",3177],["T_WHITESPACE"," ",3177],["T_VARIABLE","$v_result",3177],";",["T_WHITESPACE","\n    ",3177],"}",["T_WHITESPACE","\n\n    ",3178],["T_COMMENT","\/\/ ----- Go to beginning of Central Dir\n",3180],["T_WHITESPACE","    ",3181],"@",["T_STRING","rewind",3181],"(",["T_VARIABLE","$this",3181],["T_OBJECT_OPERATOR","->",3181],["T_STRING","zip_fd",3181],")",";",["T_WHITESPACE","\n    ",3181],["T_IF","if",3182],["T_WHITESPACE"," ",3182],"(","@",["T_STRING","fseek",3182],"(",["T_VARIABLE","$this",3182],["T_OBJECT_OPERATOR","->",3182],["T_STRING","zip_fd",3182],",",["T_WHITESPACE"," ",3182],["T_VARIABLE","$v_central_dir",3182],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",3182],"]",")",")",["T_WHITESPACE","\n    ",3182],"{",["T_WHITESPACE","\n      ",3183],["T_VARIABLE","$this",3184],["T_OBJECT_OPERATOR","->",3184],["T_STRING","privSwapBackMagicQuotes",3184],"(",")",";",["T_WHITESPACE","\n\n      ",3184],["T_COMMENT","\/\/ ----- Error log\n",3186],["T_WHITESPACE","      ",3187],["T_STRING","PclZip",3187],["T_DOUBLE_COLON","::",3187],["T_STRING","privErrorLog",3187],"(",["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",3187],",",["T_WHITESPACE"," ",3187],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive size'",3187],")",";",["T_WHITESPACE","\n\n      ",3187],["T_COMMENT","\/\/ ----- Return\n",3189],["T_WHITESPACE","      ",3190],["T_RETURN","return",3190],["T_WHITESPACE"," ",3190],["T_STRING","PclZip",3190],["T_DOUBLE_COLON","::",3190],["T_STRING","errorCode",3190],"(",")",";",["T_WHITESPACE","\n    ",3190],"}",["T_WHITESPACE","\n\n    ",3191],["T_COMMENT","\/\/ ----- Read each entry\n",3193],["T_WHITESPACE","    ",3194],["T_FOR","for",3194],["T_WHITESPACE"," ",3194],"(",["T_VARIABLE","$i",3194],"=",["T_LNUMBER","0",3194],";",["T_WHITESPACE"," ",3194],["T_VARIABLE","$i",3194],"<",["T_VARIABLE","$v_central_dir",3194],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",3194],"]",";",["T_WHITESPACE"," ",3194],["T_VARIABLE","$i",3194],["T_INC","++",3194],")",["T_WHITESPACE","\n    ",3194],"{",["T_WHITESPACE","\n      ",3195],["T_COMMENT","\/\/ ----- Read the file header\n",3196],["T_WHITESPACE","      ",3197],["T_IF","if",3197],["T_WHITESPACE"," ",3197],"(","(",["T_VARIABLE","$v_result",3197],["T_WHITESPACE"," ",3197],"=",["T_WHITESPACE"," ",3197],["T_VARIABLE","$this",3197],["T_OBJECT_OPERATOR","->",3197],["T_STRING","privReadCentralFileHeader",3197],"(",["T_VARIABLE","$v_header",3197],")",")",["T_WHITESPACE"," ",3197],["T_IS_NOT_EQUAL","!=",3197],["T_WHITESPACE"," ",3197],["T_LNUMBER","1",3197],")",["T_WHITESPACE","\n      ",3197],"{",["T_WHITESPACE","\n        ",3198],["T_VARIABLE","$this",3199],["T_OBJECT_OPERATOR","->",3199],["T_STRING","privSwapBackMagicQuotes",3199],"(",")",";",["T_WHITESPACE","\n        ",3199],["T_RETURN","return",3200],["T_WHITESPACE"," ",3200],["T_VARIABLE","$v_result",3200],";",["T_WHITESPACE","\n      ",3200],"}",["T_WHITESPACE","\n      ",3201],["T_VARIABLE","$v_header",3202],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",3202],"]",["T_WHITESPACE"," ",3202],"=",["T_WHITESPACE"," ",3202],["T_VARIABLE","$i",3202],";",["T_WHITESPACE","\n\n      ",3202],["T_COMMENT","\/\/ ----- Get the only interesting attributes\n",3204],["T_WHITESPACE","      ",3205],["T_VARIABLE","$this",3205],["T_OBJECT_OPERATOR","->",3205],["T_STRING","privConvertHeader2FileInfo",3205],"(",["T_VARIABLE","$v_header",3205],",",["T_WHITESPACE"," ",3205],["T_VARIABLE","$p_list",3205],"[",["T_VARIABLE","$i",3205],"]",")",";",["T_WHITESPACE","\n      ",3205],["T_UNSET","unset",3206],"(",["T_VARIABLE","$v_header",3206],")",";",["T_WHITESPACE","\n    ",3206],"}",["T_WHITESPACE","\n\n    ",3207],["T_COMMENT","\/\/ ----- Close the zip file\n",3209],["T_WHITESPACE","    ",3210],["T_VARIABLE","$this",3210],["T_OBJECT_OPERATOR","->",3210],["T_STRING","privCloseFd",3210],"(",")",";",["T_WHITESPACE","\n\n    ",3210],["T_COMMENT","\/\/ ----- Magic quotes trick\n",3212],["T_WHITESPACE","    ",3213],["T_VARIABLE","$this",3213],["T_OBJECT_OPERATOR","->",3213],["T_STRING","privSwapBackMagicQuotes",3213],"(",")",";",["T_WHITESPACE","\n\n    ",3213],["T_COMMENT","\/\/ ----- Return\n",3215],["T_WHITESPACE","    ",3216],["T_RETURN","return",3216],["T_WHITESPACE"," ",3216],["T_VARIABLE","$v_result",3216],";",["T_WHITESPACE","\n  ",3216],"}",["T_WHITESPACE","\n  ",3217],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3218],["T_WHITESPACE","\n  ",3219],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3220],["T_WHITESPACE","  ",3221],["T_COMMENT","\/\/ Function : privConvertHeader2FileInfo()\n",3221],["T_WHITESPACE","  ",3222],["T_COMMENT","\/\/ Description :\n",3222],["T_WHITESPACE","  ",3223],["T_COMMENT","\/\/   This function takes the file informations from the central directory\n",3223],["T_WHITESPACE","  ",3224],["T_COMMENT","\/\/   entries and extract the interesting parameters that will be given back.\n",3224],["T_WHITESPACE","  ",3225],["T_COMMENT","\/\/   The resulting file infos are set in the array $p_info\n",3225],["T_WHITESPACE","  ",3226],["T_COMMENT","\/\/     $p_info['filename'] : Filename with full path. Given by user (add),\n",3226],["T_WHITESPACE","  ",3227],["T_COMMENT","\/\/                           extracted in the filesystem (extract).\n",3227],["T_WHITESPACE","  ",3228],["T_COMMENT","\/\/     $p_info['stored_filename'] : Stored filename in the archive.\n",3228],["T_WHITESPACE","  ",3229],["T_COMMENT","\/\/     $p_info['size'] = Size of the file.\n",3229],["T_WHITESPACE","  ",3230],["T_COMMENT","\/\/     $p_info['compressed_size'] = Compressed size of the file.\n",3230],["T_WHITESPACE","  ",3231],["T_COMMENT","\/\/     $p_info['mtime'] = Last modification date of the file.\n",3231],["T_WHITESPACE","  ",3232],["T_COMMENT","\/\/     $p_info['comment'] = Comment associated with the file.\n",3232],["T_WHITESPACE","  ",3233],["T_COMMENT","\/\/     $p_info['folder'] = true\/false : indicates if the entry is a folder or not.\n",3233],["T_WHITESPACE","  ",3234],["T_COMMENT","\/\/     $p_info['status'] = status of the action on the file.\n",3234],["T_WHITESPACE","  ",3235],["T_COMMENT","\/\/     $p_info['crc'] = CRC of the file content.\n",3235],["T_WHITESPACE","  ",3236],["T_COMMENT","\/\/ Parameters :\n",3236],["T_WHITESPACE","  ",3237],["T_COMMENT","\/\/ Return Values :\n",3237],["T_WHITESPACE","  ",3238],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3238],["T_WHITESPACE","  ",3239],["T_FUNCTION","function",3239],["T_WHITESPACE"," ",3239],["T_STRING","privConvertHeader2FileInfo",3239],"(",["T_VARIABLE","$p_header",3239],",",["T_WHITESPACE"," ",3239],"&",["T_VARIABLE","$p_info",3239],")",["T_WHITESPACE","\n  ",3239],"{",["T_WHITESPACE","\n    ",3240],["T_VARIABLE","$v_result",3241],"=",["T_LNUMBER","1",3241],";",["T_WHITESPACE","\n\n    ",3241],["T_COMMENT","\/\/ ----- Get the interesting attributes\n",3243],["T_WHITESPACE","    ",3244],["T_VARIABLE","$v_temp_path",3244],["T_WHITESPACE"," ",3244],"=",["T_WHITESPACE"," ",3244],["T_STRING","PclZipUtilPathReduction",3244],"(",["T_VARIABLE","$p_header",3244],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3244],"]",")",";",["T_WHITESPACE","\n    ",3244],["T_VARIABLE","$p_info",3245],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3245],"]",["T_WHITESPACE"," ",3245],"=",["T_WHITESPACE"," ",3245],["T_VARIABLE","$v_temp_path",3245],";",["T_WHITESPACE","\n    ",3245],["T_VARIABLE","$v_temp_path",3246],["T_WHITESPACE"," ",3246],"=",["T_WHITESPACE"," ",3246],["T_STRING","PclZipUtilPathReduction",3246],"(",["T_VARIABLE","$p_header",3246],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3246],"]",")",";",["T_WHITESPACE","\n    ",3246],["T_VARIABLE","$p_info",3247],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3247],"]",["T_WHITESPACE"," ",3247],"=",["T_WHITESPACE"," ",3247],["T_VARIABLE","$v_temp_path",3247],";",["T_WHITESPACE","\n    ",3247],["T_VARIABLE","$p_info",3248],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3248],"]",["T_WHITESPACE"," ",3248],"=",["T_WHITESPACE"," ",3248],["T_VARIABLE","$p_header",3248],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3248],"]",";",["T_WHITESPACE","\n    ",3248],["T_VARIABLE","$p_info",3249],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3249],"]",["T_WHITESPACE"," ",3249],"=",["T_WHITESPACE"," ",3249],["T_VARIABLE","$p_header",3249],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3249],"]",";",["T_WHITESPACE","\n    ",3249],["T_VARIABLE","$p_info",3250],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3250],"]",["T_WHITESPACE"," ",3250],"=",["T_WHITESPACE"," ",3250],["T_VARIABLE","$p_header",3250],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3250],"]",";",["T_WHITESPACE","\n    ",3250],["T_VARIABLE","$p_info",3251],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",3251],"]",["T_WHITESPACE"," ",3251],"=",["T_WHITESPACE"," ",3251],["T_VARIABLE","$p_header",3251],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",3251],"]",";",["T_WHITESPACE","\n    ",3251],["T_VARIABLE","$p_info",3252],"[",["T_CONSTANT_ENCAPSED_STRING","'folder'",3252],"]",["T_WHITESPACE"," ",3252],"=",["T_WHITESPACE"," ",3252],"(","(",["T_VARIABLE","$p_header",3252],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3252],"]","&",["T_LNUMBER","0x00000010",3252],")",["T_IS_EQUAL","==",3252],["T_LNUMBER","0x00000010",3252],")",";",["T_WHITESPACE","\n    ",3252],["T_VARIABLE","$p_info",3253],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",3253],"]",["T_WHITESPACE"," ",3253],"=",["T_WHITESPACE"," ",3253],["T_VARIABLE","$p_header",3253],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",3253],"]",";",["T_WHITESPACE","\n    ",3253],["T_VARIABLE","$p_info",3254],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3254],"]",["T_WHITESPACE"," ",3254],"=",["T_WHITESPACE"," ",3254],["T_VARIABLE","$p_header",3254],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3254],"]",";",["T_WHITESPACE","\n    ",3254],["T_VARIABLE","$p_info",3255],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",3255],"]",["T_WHITESPACE"," ",3255],"=",["T_WHITESPACE"," ",3255],["T_VARIABLE","$p_header",3255],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",3255],"]",";",["T_WHITESPACE","\n\n    ",3255],["T_COMMENT","\/\/ ----- Return\n",3257],["T_WHITESPACE","    ",3258],["T_RETURN","return",3258],["T_WHITESPACE"," ",3258],["T_VARIABLE","$v_result",3258],";",["T_WHITESPACE","\n  ",3258],"}",["T_WHITESPACE","\n  ",3259],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3260],["T_WHITESPACE","\n  ",3261],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3262],["T_WHITESPACE","  ",3263],["T_COMMENT","\/\/ Function : privExtractByRule()\n",3263],["T_WHITESPACE","  ",3264],["T_COMMENT","\/\/ Description :\n",3264],["T_WHITESPACE","  ",3265],["T_COMMENT","\/\/   Extract a file or directory depending of rules (by index, by name, ...)\n",3265],["T_WHITESPACE","  ",3266],["T_COMMENT","\/\/ Parameters :\n",3266],["T_WHITESPACE","  ",3267],["T_COMMENT","\/\/   $p_file_list : An array where will be placed the properties of each\n",3267],["T_WHITESPACE","  ",3268],["T_COMMENT","\/\/                  extracted file\n",3268],["T_WHITESPACE","  ",3269],["T_COMMENT","\/\/   $p_path : Path to add while writing the extracted files\n",3269],["T_WHITESPACE","  ",3270],["T_COMMENT","\/\/   $p_remove_path : Path to remove (from the file memorized path) while writing the\n",3270],["T_WHITESPACE","  ",3271],["T_COMMENT","\/\/                    extracted files. If the path does not match the file path,\n",3271],["T_WHITESPACE","  ",3272],["T_COMMENT","\/\/                    the file is extracted with its memorized path.\n",3272],["T_WHITESPACE","  ",3273],["T_COMMENT","\/\/                    $p_remove_path does not apply to 'list' mode.\n",3273],["T_WHITESPACE","  ",3274],["T_COMMENT","\/\/                    $p_path and $p_remove_path are commulative.\n",3274],["T_WHITESPACE","  ",3275],["T_COMMENT","\/\/ Return Values :\n",3275],["T_WHITESPACE","  ",3276],["T_COMMENT","\/\/   1 on success,0 or less on error (see error code list)\n",3276],["T_WHITESPACE","  ",3277],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3277],["T_WHITESPACE","  ",3278],["T_FUNCTION","function",3278],["T_WHITESPACE"," ",3278],["T_STRING","privExtractByRule",3278],"(","&",["T_VARIABLE","$p_file_list",3278],",",["T_WHITESPACE"," ",3278],["T_VARIABLE","$p_path",3278],",",["T_WHITESPACE"," ",3278],["T_VARIABLE","$p_remove_path",3278],",",["T_WHITESPACE"," ",3278],["T_VARIABLE","$p_remove_all_path",3278],",",["T_WHITESPACE"," ",3278],"&",["T_VARIABLE","$p_options",3278],")",["T_WHITESPACE","\n  ",3278],"{",["T_WHITESPACE","\n    ",3279],["T_VARIABLE","$v_result",3280],"=",["T_LNUMBER","1",3280],";",["T_WHITESPACE","\n\n    ",3280],["T_COMMENT","\/\/ ----- Magic quotes trick\n",3282],["T_WHITESPACE","    ",3283],["T_VARIABLE","$this",3283],["T_OBJECT_OPERATOR","->",3283],["T_STRING","privDisableMagicQuotes",3283],"(",")",";",["T_WHITESPACE","\n\n    ",3283],["T_COMMENT","\/\/ ----- Check the path\n",3285],["T_WHITESPACE","    ",3286],["T_IF","if",3286],["T_WHITESPACE"," ",3286],"(",["T_WHITESPACE","   ",3286],"(",["T_VARIABLE","$p_path",3286],["T_WHITESPACE"," ",3286],["T_IS_EQUAL","==",3286],["T_WHITESPACE"," ",3286],["T_CONSTANT_ENCAPSED_STRING","\"\"",3286],")",["T_WHITESPACE","\n\t    ",3286],["T_BOOLEAN_OR","||",3287],["T_WHITESPACE"," ",3287],"(",["T_WHITESPACE","   ",3287],"(",["T_STRING","substr",3287],"(",["T_VARIABLE","$p_path",3287],",",["T_WHITESPACE"," ",3287],["T_LNUMBER","0",3287],",",["T_WHITESPACE"," ",3287],["T_LNUMBER","1",3287],")",["T_WHITESPACE"," ",3287],["T_IS_NOT_EQUAL","!=",3287],["T_WHITESPACE"," ",3287],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3287],")",["T_WHITESPACE","\n\t\t    ",3287],["T_BOOLEAN_AND","&&",3288],["T_WHITESPACE"," ",3288],"(",["T_STRING","substr",3288],"(",["T_VARIABLE","$p_path",3288],",",["T_WHITESPACE"," ",3288],["T_LNUMBER","0",3288],",",["T_WHITESPACE"," ",3288],["T_LNUMBER","3",3288],")",["T_WHITESPACE"," ",3288],["T_IS_NOT_EQUAL","!=",3288],["T_WHITESPACE"," ",3288],["T_CONSTANT_ENCAPSED_STRING","\"..\/\"",3288],")",["T_WHITESPACE","\n\t\t\t",3288],["T_BOOLEAN_AND","&&",3289],["T_WHITESPACE"," ",3289],"(",["T_STRING","substr",3289],"(",["T_VARIABLE","$p_path",3289],",",["T_LNUMBER","1",3289],",",["T_LNUMBER","2",3289],")",["T_IS_NOT_EQUAL","!=",3289],["T_CONSTANT_ENCAPSED_STRING","\":\/\"",3289],")",")",")",["T_WHITESPACE","\n      ",3289],["T_VARIABLE","$p_path",3290],["T_WHITESPACE"," ",3290],"=",["T_WHITESPACE"," ",3290],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",3290],".",["T_VARIABLE","$p_path",3290],";",["T_WHITESPACE","\n\n    ",3290],["T_COMMENT","\/\/ ----- Reduce the path last (and duplicated) '\/'\n",3292],["T_WHITESPACE","    ",3293],["T_IF","if",3293],["T_WHITESPACE"," ",3293],"(","(",["T_VARIABLE","$p_path",3293],["T_WHITESPACE"," ",3293],["T_IS_NOT_EQUAL","!=",3293],["T_WHITESPACE"," ",3293],["T_CONSTANT_ENCAPSED_STRING","\".\/\"",3293],")",["T_WHITESPACE"," ",3293],["T_BOOLEAN_AND","&&",3293],["T_WHITESPACE"," ",3293],"(",["T_VARIABLE","$p_path",3293],["T_WHITESPACE"," ",3293],["T_IS_NOT_EQUAL","!=",3293],["T_WHITESPACE"," ",3293],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3293],")",")",["T_WHITESPACE","\n    ",3293],"{",["T_WHITESPACE","\n      ",3294],["T_COMMENT","\/\/ ----- Look for the path end '\/'\n",3295],["T_WHITESPACE","      ",3296],["T_WHILE","while",3296],["T_WHITESPACE"," ",3296],"(",["T_STRING","substr",3296],"(",["T_VARIABLE","$p_path",3296],",",["T_WHITESPACE"," ",3296],"-",["T_LNUMBER","1",3296],")",["T_WHITESPACE"," ",3296],["T_IS_EQUAL","==",3296],["T_WHITESPACE"," ",3296],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3296],")",["T_WHITESPACE","\n      ",3296],"{",["T_WHITESPACE","\n        ",3297],["T_VARIABLE","$p_path",3298],["T_WHITESPACE"," ",3298],"=",["T_WHITESPACE"," ",3298],["T_STRING","substr",3298],"(",["T_VARIABLE","$p_path",3298],",",["T_WHITESPACE"," ",3298],["T_LNUMBER","0",3298],",",["T_WHITESPACE"," ",3298],["T_STRING","strlen",3298],"(",["T_VARIABLE","$p_path",3298],")","-",["T_LNUMBER","1",3298],")",";",["T_WHITESPACE","\n      ",3298],"}",["T_WHITESPACE","\n    ",3299],"}",["T_WHITESPACE","\n\n    ",3300],["T_COMMENT","\/\/ ----- Look for path to remove format (should end by \/)\n",3302],["T_WHITESPACE","    ",3303],["T_IF","if",3303],["T_WHITESPACE"," ",3303],"(","(",["T_VARIABLE","$p_remove_path",3303],["T_WHITESPACE"," ",3303],["T_IS_NOT_EQUAL","!=",3303],["T_WHITESPACE"," ",3303],["T_CONSTANT_ENCAPSED_STRING","\"\"",3303],")",["T_WHITESPACE"," ",3303],["T_BOOLEAN_AND","&&",3303],["T_WHITESPACE"," ",3303],"(",["T_STRING","substr",3303],"(",["T_VARIABLE","$p_remove_path",3303],",",["T_WHITESPACE"," ",3303],"-",["T_LNUMBER","1",3303],")",["T_WHITESPACE"," ",3303],["T_IS_NOT_EQUAL","!=",3303],["T_WHITESPACE"," ",3303],["T_CONSTANT_ENCAPSED_STRING","'\/'",3303],")",")",["T_WHITESPACE","\n    ",3303],"{",["T_WHITESPACE","\n      ",3304],["T_VARIABLE","$p_remove_path",3305],["T_WHITESPACE"," ",3305],["T_CONCAT_EQUAL",".=",3305],["T_WHITESPACE"," ",3305],["T_CONSTANT_ENCAPSED_STRING","'\/'",3305],";",["T_WHITESPACE","\n    ",3305],"}",["T_WHITESPACE","\n    ",3306],["T_VARIABLE","$p_remove_path_size",3307],["T_WHITESPACE"," ",3307],"=",["T_WHITESPACE"," ",3307],["T_STRING","strlen",3307],"(",["T_VARIABLE","$p_remove_path",3307],")",";",["T_WHITESPACE","\n\n    ",3307],["T_COMMENT","\/\/ ----- Open the zip file\n",3309],["T_WHITESPACE","    ",3310],["T_IF","if",3310],["T_WHITESPACE"," ",3310],"(","(",["T_VARIABLE","$v_result",3310],["T_WHITESPACE"," ",3310],"=",["T_WHITESPACE"," ",3310],["T_VARIABLE","$this",3310],["T_OBJECT_OPERATOR","->",3310],["T_STRING","privOpenFd",3310],"(",["T_CONSTANT_ENCAPSED_STRING","'rb'",3310],")",")",["T_WHITESPACE"," ",3310],["T_IS_NOT_EQUAL","!=",3310],["T_WHITESPACE"," ",3310],["T_LNUMBER","1",3310],")",["T_WHITESPACE","\n    ",3310],"{",["T_WHITESPACE","\n      ",3311],["T_VARIABLE","$this",3312],["T_OBJECT_OPERATOR","->",3312],["T_STRING","privSwapBackMagicQuotes",3312],"(",")",";",["T_WHITESPACE","\n      ",3312],["T_RETURN","return",3313],["T_WHITESPACE"," ",3313],["T_VARIABLE","$v_result",3313],";",["T_WHITESPACE","\n    ",3313],"}",["T_WHITESPACE","\n\n    ",3314],["T_COMMENT","\/\/ ----- Read the central directory informations\n",3316],["T_WHITESPACE","    ",3317],["T_VARIABLE","$v_central_dir",3317],["T_WHITESPACE"," ",3317],"=",["T_WHITESPACE"," ",3317],["T_ARRAY","array",3317],"(",")",";",["T_WHITESPACE","\n    ",3317],["T_IF","if",3318],["T_WHITESPACE"," ",3318],"(","(",["T_VARIABLE","$v_result",3318],["T_WHITESPACE"," ",3318],"=",["T_WHITESPACE"," ",3318],["T_VARIABLE","$this",3318],["T_OBJECT_OPERATOR","->",3318],["T_STRING","privReadEndCentralDir",3318],"(",["T_VARIABLE","$v_central_dir",3318],")",")",["T_WHITESPACE"," ",3318],["T_IS_NOT_EQUAL","!=",3318],["T_WHITESPACE"," ",3318],["T_LNUMBER","1",3318],")",["T_WHITESPACE","\n    ",3318],"{",["T_WHITESPACE","\n      ",3319],["T_COMMENT","\/\/ ----- Close the zip file\n",3320],["T_WHITESPACE","      ",3321],["T_VARIABLE","$this",3321],["T_OBJECT_OPERATOR","->",3321],["T_STRING","privCloseFd",3321],"(",")",";",["T_WHITESPACE","\n      ",3321],["T_VARIABLE","$this",3322],["T_OBJECT_OPERATOR","->",3322],["T_STRING","privSwapBackMagicQuotes",3322],"(",")",";",["T_WHITESPACE","\n\n      ",3322],["T_RETURN","return",3324],["T_WHITESPACE"," ",3324],["T_VARIABLE","$v_result",3324],";",["T_WHITESPACE","\n    ",3324],"}",["T_WHITESPACE","\n\n    ",3325],["T_COMMENT","\/\/ ----- Start at beginning of Central Dir\n",3327],["T_WHITESPACE","    ",3328],["T_VARIABLE","$v_pos_entry",3328],["T_WHITESPACE"," ",3328],"=",["T_WHITESPACE"," ",3328],["T_VARIABLE","$v_central_dir",3328],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",3328],"]",";",["T_WHITESPACE","\n\n    ",3328],["T_COMMENT","\/\/ ----- Read each entry\n",3330],["T_WHITESPACE","    ",3331],["T_VARIABLE","$j_start",3331],["T_WHITESPACE"," ",3331],"=",["T_WHITESPACE"," ",3331],["T_LNUMBER","0",3331],";",["T_WHITESPACE","\n    ",3331],["T_FOR","for",3332],["T_WHITESPACE"," ",3332],"(",["T_VARIABLE","$i",3332],"=",["T_LNUMBER","0",3332],",",["T_WHITESPACE"," ",3332],["T_VARIABLE","$v_nb_extracted",3332],"=",["T_LNUMBER","0",3332],";",["T_WHITESPACE"," ",3332],["T_VARIABLE","$i",3332],"<",["T_VARIABLE","$v_central_dir",3332],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",3332],"]",";",["T_WHITESPACE"," ",3332],["T_VARIABLE","$i",3332],["T_INC","++",3332],")",["T_WHITESPACE","\n    ",3332],"{",["T_WHITESPACE","\n\n      ",3333],["T_COMMENT","\/\/ ----- Read next Central dir entry\n",3335],["T_WHITESPACE","      ",3336],"@",["T_STRING","rewind",3336],"(",["T_VARIABLE","$this",3336],["T_OBJECT_OPERATOR","->",3336],["T_STRING","zip_fd",3336],")",";",["T_WHITESPACE","\n      ",3336],["T_IF","if",3337],["T_WHITESPACE"," ",3337],"(","@",["T_STRING","fseek",3337],"(",["T_VARIABLE","$this",3337],["T_OBJECT_OPERATOR","->",3337],["T_STRING","zip_fd",3337],",",["T_WHITESPACE"," ",3337],["T_VARIABLE","$v_pos_entry",3337],")",")",["T_WHITESPACE","\n      ",3337],"{",["T_WHITESPACE","\n        ",3338],["T_COMMENT","\/\/ ----- Close the zip file\n",3339],["T_WHITESPACE","        ",3340],["T_VARIABLE","$this",3340],["T_OBJECT_OPERATOR","->",3340],["T_STRING","privCloseFd",3340],"(",")",";",["T_WHITESPACE","\n        ",3340],["T_VARIABLE","$this",3341],["T_OBJECT_OPERATOR","->",3341],["T_STRING","privSwapBackMagicQuotes",3341],"(",")",";",["T_WHITESPACE","\n\n        ",3341],["T_COMMENT","\/\/ ----- Error log\n",3343],["T_WHITESPACE","        ",3344],["T_STRING","PclZip",3344],["T_DOUBLE_COLON","::",3344],["T_STRING","privErrorLog",3344],"(",["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",3344],",",["T_WHITESPACE"," ",3344],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive size'",3344],")",";",["T_WHITESPACE","\n\n        ",3344],["T_COMMENT","\/\/ ----- Return\n",3346],["T_WHITESPACE","        ",3347],["T_RETURN","return",3347],["T_WHITESPACE"," ",3347],["T_STRING","PclZip",3347],["T_DOUBLE_COLON","::",3347],["T_STRING","errorCode",3347],"(",")",";",["T_WHITESPACE","\n      ",3347],"}",["T_WHITESPACE","\n\n      ",3348],["T_COMMENT","\/\/ ----- Read the file header\n",3350],["T_WHITESPACE","      ",3351],["T_VARIABLE","$v_header",3351],["T_WHITESPACE"," ",3351],"=",["T_WHITESPACE"," ",3351],["T_ARRAY","array",3351],"(",")",";",["T_WHITESPACE","\n      ",3351],["T_IF","if",3352],["T_WHITESPACE"," ",3352],"(","(",["T_VARIABLE","$v_result",3352],["T_WHITESPACE"," ",3352],"=",["T_WHITESPACE"," ",3352],["T_VARIABLE","$this",3352],["T_OBJECT_OPERATOR","->",3352],["T_STRING","privReadCentralFileHeader",3352],"(",["T_VARIABLE","$v_header",3352],")",")",["T_WHITESPACE"," ",3352],["T_IS_NOT_EQUAL","!=",3352],["T_WHITESPACE"," ",3352],["T_LNUMBER","1",3352],")",["T_WHITESPACE","\n      ",3352],"{",["T_WHITESPACE","\n        ",3353],["T_COMMENT","\/\/ ----- Close the zip file\n",3354],["T_WHITESPACE","        ",3355],["T_VARIABLE","$this",3355],["T_OBJECT_OPERATOR","->",3355],["T_STRING","privCloseFd",3355],"(",")",";",["T_WHITESPACE","\n        ",3355],["T_VARIABLE","$this",3356],["T_OBJECT_OPERATOR","->",3356],["T_STRING","privSwapBackMagicQuotes",3356],"(",")",";",["T_WHITESPACE","\n\n        ",3356],["T_RETURN","return",3358],["T_WHITESPACE"," ",3358],["T_VARIABLE","$v_result",3358],";",["T_WHITESPACE","\n      ",3358],"}",["T_WHITESPACE","\n\n      ",3359],["T_COMMENT","\/\/ ----- Store the index\n",3361],["T_WHITESPACE","      ",3362],["T_VARIABLE","$v_header",3362],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",3362],"]",["T_WHITESPACE"," ",3362],"=",["T_WHITESPACE"," ",3362],["T_VARIABLE","$i",3362],";",["T_WHITESPACE","\n\n      ",3362],["T_COMMENT","\/\/ ----- Store the file position\n",3364],["T_WHITESPACE","      ",3365],["T_VARIABLE","$v_pos_entry",3365],["T_WHITESPACE"," ",3365],"=",["T_WHITESPACE"," ",3365],["T_STRING","ftell",3365],"(",["T_VARIABLE","$this",3365],["T_OBJECT_OPERATOR","->",3365],["T_STRING","zip_fd",3365],")",";",["T_WHITESPACE","\n\n      ",3365],["T_COMMENT","\/\/ ----- Look for the specific extract rules\n",3367],["T_WHITESPACE","      ",3368],["T_VARIABLE","$v_extract",3368],["T_WHITESPACE"," ",3368],"=",["T_WHITESPACE"," ",3368],["T_STRING","false",3368],";",["T_WHITESPACE","\n\n      ",3368],["T_COMMENT","\/\/ ----- Look for extract by name rule\n",3370],["T_WHITESPACE","      ",3371],["T_IF","if",3371],["T_WHITESPACE"," ",3371],"(",["T_WHITESPACE","   ",3371],"(",["T_ISSET","isset",3371],"(",["T_VARIABLE","$p_options",3371],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3371],"]",")",")",["T_WHITESPACE","\n          ",3371],["T_BOOLEAN_AND","&&",3372],["T_WHITESPACE"," ",3372],"(",["T_VARIABLE","$p_options",3372],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3372],"]",["T_WHITESPACE"," ",3372],["T_IS_NOT_EQUAL","!=",3372],["T_WHITESPACE"," ",3372],["T_LNUMBER","0",3372],")",")",["T_WHITESPACE"," ",3372],"{",["T_WHITESPACE","\n\n          ",3372],["T_COMMENT","\/\/ ----- Look if the filename is in the list\n",3374],["T_WHITESPACE","          ",3375],["T_FOR","for",3375],["T_WHITESPACE"," ",3375],"(",["T_VARIABLE","$j",3375],"=",["T_LNUMBER","0",3375],";",["T_WHITESPACE"," ",3375],"(",["T_VARIABLE","$j",3375],"<",["T_STRING","sizeof",3375],"(",["T_VARIABLE","$p_options",3375],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3375],"]",")",")",["T_WHITESPACE"," ",3375],["T_BOOLEAN_AND","&&",3375],["T_WHITESPACE"," ",3375],"(","!",["T_VARIABLE","$v_extract",3375],")",";",["T_WHITESPACE"," ",3375],["T_VARIABLE","$j",3375],["T_INC","++",3375],")",["T_WHITESPACE"," ",3375],"{",["T_WHITESPACE","\n\n              ",3375],["T_COMMENT","\/\/ ----- Look for a directory\n",3377],["T_WHITESPACE","              ",3378],["T_IF","if",3378],["T_WHITESPACE"," ",3378],"(",["T_STRING","substr",3378],"(",["T_VARIABLE","$p_options",3378],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3378],"]","[",["T_VARIABLE","$j",3378],"]",",",["T_WHITESPACE"," ",3378],"-",["T_LNUMBER","1",3378],")",["T_WHITESPACE"," ",3378],["T_IS_EQUAL","==",3378],["T_WHITESPACE"," ",3378],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3378],")",["T_WHITESPACE"," ",3378],"{",["T_WHITESPACE","\n\n                  ",3378],["T_COMMENT","\/\/ ----- Look if the directory is in the filename path\n",3380],["T_WHITESPACE","                  ",3381],["T_IF","if",3381],["T_WHITESPACE"," ",3381],"(",["T_WHITESPACE","   ",3381],"(",["T_STRING","strlen",3381],"(",["T_VARIABLE","$v_header",3381],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3381],"]",")",["T_WHITESPACE"," ",3381],">",["T_WHITESPACE"," ",3381],["T_STRING","strlen",3381],"(",["T_VARIABLE","$p_options",3381],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3381],"]","[",["T_VARIABLE","$j",3381],"]",")",")",["T_WHITESPACE","\n                      ",3381],["T_BOOLEAN_AND","&&",3382],["T_WHITESPACE"," ",3382],"(",["T_STRING","substr",3382],"(",["T_VARIABLE","$v_header",3382],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3382],"]",",",["T_WHITESPACE"," ",3382],["T_LNUMBER","0",3382],",",["T_WHITESPACE"," ",3382],["T_STRING","strlen",3382],"(",["T_VARIABLE","$p_options",3382],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3382],"]","[",["T_VARIABLE","$j",3382],"]",")",")",["T_WHITESPACE"," ",3382],["T_IS_EQUAL","==",3382],["T_WHITESPACE"," ",3382],["T_VARIABLE","$p_options",3382],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3382],"]","[",["T_VARIABLE","$j",3382],"]",")",")",["T_WHITESPACE"," ",3382],"{",["T_WHITESPACE","\n                      ",3382],["T_VARIABLE","$v_extract",3383],["T_WHITESPACE"," ",3383],"=",["T_WHITESPACE"," ",3383],["T_STRING","true",3383],";",["T_WHITESPACE","\n                  ",3383],"}",["T_WHITESPACE","\n              ",3384],"}",["T_WHITESPACE","\n              ",3385],["T_COMMENT","\/\/ ----- Look for a filename\n",3386],["T_WHITESPACE","              ",3387],["T_ELSEIF","elseif",3387],["T_WHITESPACE"," ",3387],"(",["T_VARIABLE","$v_header",3387],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3387],"]",["T_WHITESPACE"," ",3387],["T_IS_EQUAL","==",3387],["T_WHITESPACE"," ",3387],["T_VARIABLE","$p_options",3387],"[",["T_STRING","PCLZIP_OPT_BY_NAME",3387],"]","[",["T_VARIABLE","$j",3387],"]",")",["T_WHITESPACE"," ",3387],"{",["T_WHITESPACE","\n                  ",3387],["T_VARIABLE","$v_extract",3388],["T_WHITESPACE"," ",3388],"=",["T_WHITESPACE"," ",3388],["T_STRING","true",3388],";",["T_WHITESPACE","\n              ",3388],"}",["T_WHITESPACE","\n          ",3389],"}",["T_WHITESPACE","\n      ",3390],"}",["T_WHITESPACE","\n\n      ",3391],["T_COMMENT","\/\/ ----- Look for extract by ereg rule\n",3393],["T_WHITESPACE","      ",3394],["T_COMMENT","\/\/ ereg() is deprecated with PHP 5.3\n",3394],["T_WHITESPACE","      ",3395],["T_COMMENT","\/*\n      else if (   (isset($p_options[PCLZIP_OPT_BY_EREG]))\n               && ($p_options[PCLZIP_OPT_BY_EREG] != \"\")) {\n\n          if (ereg($p_options[PCLZIP_OPT_BY_EREG], $v_header['stored_filename'])) {\n              $v_extract = true;\n          }\n      }\n      *\/",3395],["T_WHITESPACE","\n\n      ",3403],["T_COMMENT","\/\/ ----- Look for extract by preg rule\n",3405],["T_WHITESPACE","      ",3406],["T_ELSE","else",3406],["T_WHITESPACE"," ",3406],["T_IF","if",3406],["T_WHITESPACE"," ",3406],"(",["T_WHITESPACE","   ",3406],"(",["T_ISSET","isset",3406],"(",["T_VARIABLE","$p_options",3406],"[",["T_STRING","PCLZIP_OPT_BY_PREG",3406],"]",")",")",["T_WHITESPACE","\n               ",3406],["T_BOOLEAN_AND","&&",3407],["T_WHITESPACE"," ",3407],"(",["T_VARIABLE","$p_options",3407],"[",["T_STRING","PCLZIP_OPT_BY_PREG",3407],"]",["T_WHITESPACE"," ",3407],["T_IS_NOT_EQUAL","!=",3407],["T_WHITESPACE"," ",3407],["T_CONSTANT_ENCAPSED_STRING","\"\"",3407],")",")",["T_WHITESPACE"," ",3407],"{",["T_WHITESPACE","\n\n          ",3407],["T_IF","if",3409],["T_WHITESPACE"," ",3409],"(",["T_STRING","preg_match",3409],"(",["T_VARIABLE","$p_options",3409],"[",["T_STRING","PCLZIP_OPT_BY_PREG",3409],"]",",",["T_WHITESPACE"," ",3409],["T_VARIABLE","$v_header",3409],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3409],"]",")",")",["T_WHITESPACE"," ",3409],"{",["T_WHITESPACE","\n              ",3409],["T_VARIABLE","$v_extract",3410],["T_WHITESPACE"," ",3410],"=",["T_WHITESPACE"," ",3410],["T_STRING","true",3410],";",["T_WHITESPACE","\n          ",3410],"}",["T_WHITESPACE","\n      ",3411],"}",["T_WHITESPACE","\n\n      ",3412],["T_COMMENT","\/\/ ----- Look for extract by index rule\n",3414],["T_WHITESPACE","      ",3415],["T_ELSE","else",3415],["T_WHITESPACE"," ",3415],["T_IF","if",3415],["T_WHITESPACE"," ",3415],"(",["T_WHITESPACE","   ",3415],"(",["T_ISSET","isset",3415],"(",["T_VARIABLE","$p_options",3415],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3415],"]",")",")",["T_WHITESPACE","\n               ",3415],["T_BOOLEAN_AND","&&",3416],["T_WHITESPACE"," ",3416],"(",["T_VARIABLE","$p_options",3416],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3416],"]",["T_WHITESPACE"," ",3416],["T_IS_NOT_EQUAL","!=",3416],["T_WHITESPACE"," ",3416],["T_LNUMBER","0",3416],")",")",["T_WHITESPACE"," ",3416],"{",["T_WHITESPACE","\n\n          ",3416],["T_COMMENT","\/\/ ----- Look if the index is in the list\n",3418],["T_WHITESPACE","          ",3419],["T_FOR","for",3419],["T_WHITESPACE"," ",3419],"(",["T_VARIABLE","$j",3419],"=",["T_VARIABLE","$j_start",3419],";",["T_WHITESPACE"," ",3419],"(",["T_VARIABLE","$j",3419],"<",["T_STRING","sizeof",3419],"(",["T_VARIABLE","$p_options",3419],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3419],"]",")",")",["T_WHITESPACE"," ",3419],["T_BOOLEAN_AND","&&",3419],["T_WHITESPACE"," ",3419],"(","!",["T_VARIABLE","$v_extract",3419],")",";",["T_WHITESPACE"," ",3419],["T_VARIABLE","$j",3419],["T_INC","++",3419],")",["T_WHITESPACE"," ",3419],"{",["T_WHITESPACE","\n\n              ",3419],["T_IF","if",3421],["T_WHITESPACE"," ",3421],"(","(",["T_VARIABLE","$i",3421],["T_IS_GREATER_OR_EQUAL",">=",3421],["T_VARIABLE","$p_options",3421],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3421],"]","[",["T_VARIABLE","$j",3421],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",3421],"]",")",["T_WHITESPACE"," ",3421],["T_BOOLEAN_AND","&&",3421],["T_WHITESPACE"," ",3421],"(",["T_VARIABLE","$i",3421],["T_IS_SMALLER_OR_EQUAL","<=",3421],["T_VARIABLE","$p_options",3421],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3421],"]","[",["T_VARIABLE","$j",3421],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",3421],"]",")",")",["T_WHITESPACE"," ",3421],"{",["T_WHITESPACE","\n                  ",3421],["T_VARIABLE","$v_extract",3422],["T_WHITESPACE"," ",3422],"=",["T_WHITESPACE"," ",3422],["T_STRING","true",3422],";",["T_WHITESPACE","\n              ",3422],"}",["T_WHITESPACE","\n              ",3423],["T_IF","if",3424],["T_WHITESPACE"," ",3424],"(",["T_VARIABLE","$i",3424],["T_IS_GREATER_OR_EQUAL",">=",3424],["T_VARIABLE","$p_options",3424],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3424],"]","[",["T_VARIABLE","$j",3424],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",3424],"]",")",["T_WHITESPACE"," ",3424],"{",["T_WHITESPACE","\n                  ",3424],["T_VARIABLE","$j_start",3425],["T_WHITESPACE"," ",3425],"=",["T_WHITESPACE"," ",3425],["T_VARIABLE","$j",3425],"+",["T_LNUMBER","1",3425],";",["T_WHITESPACE","\n              ",3425],"}",["T_WHITESPACE","\n\n              ",3426],["T_IF","if",3428],["T_WHITESPACE"," ",3428],"(",["T_VARIABLE","$p_options",3428],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",3428],"]","[",["T_VARIABLE","$j",3428],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",3428],"]",">",["T_VARIABLE","$i",3428],")",["T_WHITESPACE"," ",3428],"{",["T_WHITESPACE","\n                  ",3428],["T_BREAK","break",3429],";",["T_WHITESPACE","\n              ",3429],"}",["T_WHITESPACE","\n          ",3430],"}",["T_WHITESPACE","\n      ",3431],"}",["T_WHITESPACE","\n\n      ",3432],["T_COMMENT","\/\/ ----- Look for no rule, which means extract all the archive\n",3434],["T_WHITESPACE","      ",3435],["T_ELSE","else",3435],["T_WHITESPACE"," ",3435],"{",["T_WHITESPACE","\n          ",3435],["T_VARIABLE","$v_extract",3436],["T_WHITESPACE"," ",3436],"=",["T_WHITESPACE"," ",3436],["T_STRING","true",3436],";",["T_WHITESPACE","\n      ",3436],"}",["T_WHITESPACE","\n\n\t  ",3437],["T_COMMENT","\/\/ ----- Check compression method\n",3439],["T_WHITESPACE","\t  ",3440],["T_IF","if",3440],["T_WHITESPACE"," ",3440],"(",["T_WHITESPACE","   ",3440],"(",["T_VARIABLE","$v_extract",3440],")",["T_WHITESPACE","\n\t      ",3440],["T_BOOLEAN_AND","&&",3441],["T_WHITESPACE"," ",3441],"(",["T_WHITESPACE","   ",3441],"(",["T_VARIABLE","$v_header",3441],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3441],"]",["T_WHITESPACE"," ",3441],["T_IS_NOT_EQUAL","!=",3441],["T_WHITESPACE"," ",3441],["T_LNUMBER","8",3441],")",["T_WHITESPACE","\n\t\t      ",3441],["T_BOOLEAN_AND","&&",3442],["T_WHITESPACE"," ",3442],"(",["T_VARIABLE","$v_header",3442],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3442],"]",["T_WHITESPACE"," ",3442],["T_IS_NOT_EQUAL","!=",3442],["T_WHITESPACE"," ",3442],["T_LNUMBER","0",3442],")",")",")",["T_WHITESPACE"," ",3442],"{",["T_WHITESPACE","\n          ",3442],["T_VARIABLE","$v_header",3443],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3443],"]",["T_WHITESPACE"," ",3443],"=",["T_WHITESPACE"," ",3443],["T_CONSTANT_ENCAPSED_STRING","'unsupported_compression'",3443],";",["T_WHITESPACE","\n\n          ",3443],["T_COMMENT","\/\/ ----- Look for PCLZIP_OPT_STOP_ON_ERROR\n",3445],["T_WHITESPACE","          ",3446],["T_IF","if",3446],["T_WHITESPACE"," ",3446],"(",["T_WHITESPACE","   ",3446],"(",["T_ISSET","isset",3446],"(",["T_VARIABLE","$p_options",3446],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3446],"]",")",")",["T_WHITESPACE","\n\t\t      ",3446],["T_BOOLEAN_AND","&&",3447],["T_WHITESPACE"," ",3447],"(",["T_VARIABLE","$p_options",3447],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3447],"]",["T_IS_IDENTICAL","===",3447],["T_STRING","true",3447],")",")",["T_WHITESPACE"," ",3447],"{",["T_WHITESPACE","\n\n              ",3447],["T_VARIABLE","$this",3449],["T_OBJECT_OPERATOR","->",3449],["T_STRING","privSwapBackMagicQuotes",3449],"(",")",";",["T_WHITESPACE","\n\n              ",3449],["T_STRING","PclZip",3451],["T_DOUBLE_COLON","::",3451],["T_STRING","privErrorLog",3451],"(",["T_STRING","PCLZIP_ERR_UNSUPPORTED_COMPRESSION",3451],",",["T_WHITESPACE","\n\t\t\t                       ",3451],["T_CONSTANT_ENCAPSED_STRING","\"Filename '\"",3452],".",["T_VARIABLE","$v_header",3452],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3452],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' is \"",3452],["T_WHITESPACE","\n\t\t\t\t  \t    \t  \t   ",3452],".",["T_CONSTANT_ENCAPSED_STRING","\"compressed by an unsupported compression \"",3453],["T_WHITESPACE","\n\t\t\t\t  \t    \t  \t   ",3453],".",["T_CONSTANT_ENCAPSED_STRING","\"method (\"",3454],".",["T_VARIABLE","$v_header",3454],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3454],"]",".",["T_CONSTANT_ENCAPSED_STRING","\") \"",3454],")",";",["T_WHITESPACE","\n\n              ",3454],["T_RETURN","return",3456],["T_WHITESPACE"," ",3456],["T_STRING","PclZip",3456],["T_DOUBLE_COLON","::",3456],["T_STRING","errorCode",3456],"(",")",";",["T_WHITESPACE","\n\t\t  ",3456],"}",["T_WHITESPACE","\n\t  ",3457],"}",["T_WHITESPACE","\n\n\t  ",3458],["T_COMMENT","\/\/ ----- Check encrypted files\n",3460],["T_WHITESPACE","\t  ",3461],["T_IF","if",3461],["T_WHITESPACE"," ",3461],"(","(",["T_VARIABLE","$v_extract",3461],")",["T_WHITESPACE"," ",3461],["T_BOOLEAN_AND","&&",3461],["T_WHITESPACE"," ",3461],"(","(",["T_VARIABLE","$v_header",3461],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",3461],"]",["T_WHITESPACE"," ",3461],"&",["T_WHITESPACE"," ",3461],["T_LNUMBER","1",3461],")",["T_WHITESPACE"," ",3461],["T_IS_EQUAL","==",3461],["T_WHITESPACE"," ",3461],["T_LNUMBER","1",3461],")",")",["T_WHITESPACE"," ",3461],"{",["T_WHITESPACE","\n          ",3461],["T_VARIABLE","$v_header",3462],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3462],"]",["T_WHITESPACE"," ",3462],"=",["T_WHITESPACE"," ",3462],["T_CONSTANT_ENCAPSED_STRING","'unsupported_encryption'",3462],";",["T_WHITESPACE","\n\n          ",3462],["T_COMMENT","\/\/ ----- Look for PCLZIP_OPT_STOP_ON_ERROR\n",3464],["T_WHITESPACE","          ",3465],["T_IF","if",3465],["T_WHITESPACE"," ",3465],"(",["T_WHITESPACE","   ",3465],"(",["T_ISSET","isset",3465],"(",["T_VARIABLE","$p_options",3465],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3465],"]",")",")",["T_WHITESPACE","\n\t\t      ",3465],["T_BOOLEAN_AND","&&",3466],["T_WHITESPACE"," ",3466],"(",["T_VARIABLE","$p_options",3466],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3466],"]",["T_IS_IDENTICAL","===",3466],["T_STRING","true",3466],")",")",["T_WHITESPACE"," ",3466],"{",["T_WHITESPACE","\n\n              ",3466],["T_VARIABLE","$this",3468],["T_OBJECT_OPERATOR","->",3468],["T_STRING","privSwapBackMagicQuotes",3468],"(",")",";",["T_WHITESPACE","\n\n              ",3468],["T_STRING","PclZip",3470],["T_DOUBLE_COLON","::",3470],["T_STRING","privErrorLog",3470],"(",["T_STRING","PCLZIP_ERR_UNSUPPORTED_ENCRYPTION",3470],",",["T_WHITESPACE","\n\t\t\t                       ",3470],["T_CONSTANT_ENCAPSED_STRING","\"Unsupported encryption for \"",3471],["T_WHITESPACE","\n\t\t\t\t  \t    \t  \t   ",3471],".",["T_CONSTANT_ENCAPSED_STRING","\" filename '\"",3472],".",["T_VARIABLE","$v_header",3472],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",3472],"]",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t   ",3472],".",["T_CONSTANT_ENCAPSED_STRING","\"'\"",3473],")",";",["T_WHITESPACE","\n\n              ",3473],["T_RETURN","return",3475],["T_WHITESPACE"," ",3475],["T_STRING","PclZip",3475],["T_DOUBLE_COLON","::",3475],["T_STRING","errorCode",3475],"(",")",";",["T_WHITESPACE","\n\t\t  ",3475],"}",["T_WHITESPACE","\n    ",3476],"}",["T_WHITESPACE","\n\n      ",3477],["T_COMMENT","\/\/ ----- Look for real extraction\n",3479],["T_WHITESPACE","      ",3480],["T_IF","if",3480],["T_WHITESPACE"," ",3480],"(","(",["T_VARIABLE","$v_extract",3480],")",["T_WHITESPACE"," ",3480],["T_BOOLEAN_AND","&&",3480],["T_WHITESPACE"," ",3480],"(",["T_VARIABLE","$v_header",3480],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3480],"]",["T_WHITESPACE"," ",3480],["T_IS_NOT_EQUAL","!=",3480],["T_WHITESPACE"," ",3480],["T_CONSTANT_ENCAPSED_STRING","'ok'",3480],")",")",["T_WHITESPACE"," ",3480],"{",["T_WHITESPACE","\n          ",3480],["T_VARIABLE","$v_result",3481],["T_WHITESPACE"," ",3481],"=",["T_WHITESPACE"," ",3481],["T_VARIABLE","$this",3481],["T_OBJECT_OPERATOR","->",3481],["T_STRING","privConvertHeader2FileInfo",3481],"(",["T_VARIABLE","$v_header",3481],",",["T_WHITESPACE","\n\t\t                                        ",3481],["T_VARIABLE","$p_file_list",3482],"[",["T_VARIABLE","$v_nb_extracted",3482],["T_INC","++",3482],"]",")",";",["T_WHITESPACE","\n          ",3482],["T_IF","if",3483],["T_WHITESPACE"," ",3483],"(",["T_VARIABLE","$v_result",3483],["T_WHITESPACE"," ",3483],["T_IS_NOT_EQUAL","!=",3483],["T_WHITESPACE"," ",3483],["T_LNUMBER","1",3483],")",["T_WHITESPACE"," ",3483],"{",["T_WHITESPACE","\n              ",3483],["T_VARIABLE","$this",3484],["T_OBJECT_OPERATOR","->",3484],["T_STRING","privCloseFd",3484],"(",")",";",["T_WHITESPACE","\n              ",3484],["T_VARIABLE","$this",3485],["T_OBJECT_OPERATOR","->",3485],["T_STRING","privSwapBackMagicQuotes",3485],"(",")",";",["T_WHITESPACE","\n              ",3485],["T_RETURN","return",3486],["T_WHITESPACE"," ",3486],["T_VARIABLE","$v_result",3486],";",["T_WHITESPACE","\n          ",3486],"}",["T_WHITESPACE","\n\n          ",3487],["T_VARIABLE","$v_extract",3489],["T_WHITESPACE"," ",3489],"=",["T_WHITESPACE"," ",3489],["T_STRING","false",3489],";",["T_WHITESPACE","\n      ",3489],"}",["T_WHITESPACE","\n\n      ",3490],["T_COMMENT","\/\/ ----- Look for real extraction\n",3492],["T_WHITESPACE","      ",3493],["T_IF","if",3493],["T_WHITESPACE"," ",3493],"(",["T_VARIABLE","$v_extract",3493],")",["T_WHITESPACE","\n      ",3493],"{",["T_WHITESPACE","\n\n        ",3494],["T_COMMENT","\/\/ ----- Go to the file position\n",3496],["T_WHITESPACE","        ",3497],"@",["T_STRING","rewind",3497],"(",["T_VARIABLE","$this",3497],["T_OBJECT_OPERATOR","->",3497],["T_STRING","zip_fd",3497],")",";",["T_WHITESPACE","\n        ",3497],["T_IF","if",3498],["T_WHITESPACE"," ",3498],"(","@",["T_STRING","fseek",3498],"(",["T_VARIABLE","$this",3498],["T_OBJECT_OPERATOR","->",3498],["T_STRING","zip_fd",3498],",",["T_WHITESPACE"," ",3498],["T_VARIABLE","$v_header",3498],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",3498],"]",")",")",["T_WHITESPACE","\n        ",3498],"{",["T_WHITESPACE","\n          ",3499],["T_COMMENT","\/\/ ----- Close the zip file\n",3500],["T_WHITESPACE","          ",3501],["T_VARIABLE","$this",3501],["T_OBJECT_OPERATOR","->",3501],["T_STRING","privCloseFd",3501],"(",")",";",["T_WHITESPACE","\n\n          ",3501],["T_VARIABLE","$this",3503],["T_OBJECT_OPERATOR","->",3503],["T_STRING","privSwapBackMagicQuotes",3503],"(",")",";",["T_WHITESPACE","\n\n          ",3503],["T_COMMENT","\/\/ ----- Error log\n",3505],["T_WHITESPACE","          ",3506],["T_STRING","PclZip",3506],["T_DOUBLE_COLON","::",3506],["T_STRING","privErrorLog",3506],"(",["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",3506],",",["T_WHITESPACE"," ",3506],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive size'",3506],")",";",["T_WHITESPACE","\n\n          ",3506],["T_COMMENT","\/\/ ----- Return\n",3508],["T_WHITESPACE","          ",3509],["T_RETURN","return",3509],["T_WHITESPACE"," ",3509],["T_STRING","PclZip",3509],["T_DOUBLE_COLON","::",3509],["T_STRING","errorCode",3509],"(",")",";",["T_WHITESPACE","\n        ",3509],"}",["T_WHITESPACE","\n\n        ",3510],["T_COMMENT","\/\/ ----- Look for extraction as string\n",3512],["T_WHITESPACE","        ",3513],["T_IF","if",3513],["T_WHITESPACE"," ",3513],"(",["T_VARIABLE","$p_options",3513],"[",["T_STRING","PCLZIP_OPT_EXTRACT_AS_STRING",3513],"]",")",["T_WHITESPACE"," ",3513],"{",["T_WHITESPACE","\n\n          ",3513],["T_VARIABLE","$v_string",3515],["T_WHITESPACE"," ",3515],"=",["T_WHITESPACE"," ",3515],["T_CONSTANT_ENCAPSED_STRING","''",3515],";",["T_WHITESPACE","\n\n          ",3515],["T_COMMENT","\/\/ ----- Extracting the file\n",3517],["T_WHITESPACE","          ",3518],["T_VARIABLE","$v_result1",3518],["T_WHITESPACE"," ",3518],"=",["T_WHITESPACE"," ",3518],["T_VARIABLE","$this",3518],["T_OBJECT_OPERATOR","->",3518],["T_STRING","privExtractFileAsString",3518],"(",["T_VARIABLE","$v_header",3518],",",["T_WHITESPACE"," ",3518],["T_VARIABLE","$v_string",3518],",",["T_WHITESPACE"," ",3518],["T_VARIABLE","$p_options",3518],")",";",["T_WHITESPACE","\n          ",3518],["T_IF","if",3519],["T_WHITESPACE"," ",3519],"(",["T_VARIABLE","$v_result1",3519],["T_WHITESPACE"," ",3519],"<",["T_WHITESPACE"," ",3519],["T_LNUMBER","1",3519],")",["T_WHITESPACE"," ",3519],"{",["T_WHITESPACE","\n            ",3519],["T_VARIABLE","$this",3520],["T_OBJECT_OPERATOR","->",3520],["T_STRING","privCloseFd",3520],"(",")",";",["T_WHITESPACE","\n            ",3520],["T_VARIABLE","$this",3521],["T_OBJECT_OPERATOR","->",3521],["T_STRING","privSwapBackMagicQuotes",3521],"(",")",";",["T_WHITESPACE","\n            ",3521],["T_RETURN","return",3522],["T_WHITESPACE"," ",3522],["T_VARIABLE","$v_result1",3522],";",["T_WHITESPACE","\n          ",3522],"}",["T_WHITESPACE","\n\n          ",3523],["T_COMMENT","\/\/ ----- Get the only interesting attributes\n",3525],["T_WHITESPACE","          ",3526],["T_IF","if",3526],["T_WHITESPACE"," ",3526],"(","(",["T_VARIABLE","$v_result",3526],["T_WHITESPACE"," ",3526],"=",["T_WHITESPACE"," ",3526],["T_VARIABLE","$this",3526],["T_OBJECT_OPERATOR","->",3526],["T_STRING","privConvertHeader2FileInfo",3526],"(",["T_VARIABLE","$v_header",3526],",",["T_WHITESPACE"," ",3526],["T_VARIABLE","$p_file_list",3526],"[",["T_VARIABLE","$v_nb_extracted",3526],"]",")",")",["T_WHITESPACE"," ",3526],["T_IS_NOT_EQUAL","!=",3526],["T_WHITESPACE"," ",3526],["T_LNUMBER","1",3526],")",["T_WHITESPACE","\n          ",3526],"{",["T_WHITESPACE","\n            ",3527],["T_COMMENT","\/\/ ----- Close the zip file\n",3528],["T_WHITESPACE","            ",3529],["T_VARIABLE","$this",3529],["T_OBJECT_OPERATOR","->",3529],["T_STRING","privCloseFd",3529],"(",")",";",["T_WHITESPACE","\n            ",3529],["T_VARIABLE","$this",3530],["T_OBJECT_OPERATOR","->",3530],["T_STRING","privSwapBackMagicQuotes",3530],"(",")",";",["T_WHITESPACE","\n\n            ",3530],["T_RETURN","return",3532],["T_WHITESPACE"," ",3532],["T_VARIABLE","$v_result",3532],";",["T_WHITESPACE","\n          ",3532],"}",["T_WHITESPACE","\n\n          ",3533],["T_COMMENT","\/\/ ----- Set the file content\n",3535],["T_WHITESPACE","          ",3536],["T_VARIABLE","$p_file_list",3536],"[",["T_VARIABLE","$v_nb_extracted",3536],"]","[",["T_CONSTANT_ENCAPSED_STRING","'content'",3536],"]",["T_WHITESPACE"," ",3536],"=",["T_WHITESPACE"," ",3536],["T_VARIABLE","$v_string",3536],";",["T_WHITESPACE","\n\n          ",3536],["T_COMMENT","\/\/ ----- Next extracted file\n",3538],["T_WHITESPACE","          ",3539],["T_VARIABLE","$v_nb_extracted",3539],["T_INC","++",3539],";",["T_WHITESPACE","\n\n          ",3539],["T_COMMENT","\/\/ ----- Look for user callback abort\n",3541],["T_WHITESPACE","          ",3542],["T_IF","if",3542],["T_WHITESPACE"," ",3542],"(",["T_VARIABLE","$v_result1",3542],["T_WHITESPACE"," ",3542],["T_IS_EQUAL","==",3542],["T_WHITESPACE"," ",3542],["T_LNUMBER","2",3542],")",["T_WHITESPACE"," ",3542],"{",["T_WHITESPACE","\n          \t",3542],["T_BREAK","break",3543],";",["T_WHITESPACE","\n          ",3543],"}",["T_WHITESPACE","\n        ",3544],"}",["T_WHITESPACE","\n        ",3545],["T_COMMENT","\/\/ ----- Look for extraction in standard output\n",3546],["T_WHITESPACE","        ",3547],["T_ELSEIF","elseif",3547],["T_WHITESPACE"," ",3547],"(",["T_WHITESPACE","   ",3547],"(",["T_ISSET","isset",3547],"(",["T_VARIABLE","$p_options",3547],"[",["T_STRING","PCLZIP_OPT_EXTRACT_IN_OUTPUT",3547],"]",")",")",["T_WHITESPACE","\n\t\t        ",3547],["T_BOOLEAN_AND","&&",3548],["T_WHITESPACE"," ",3548],"(",["T_VARIABLE","$p_options",3548],"[",["T_STRING","PCLZIP_OPT_EXTRACT_IN_OUTPUT",3548],"]",")",")",["T_WHITESPACE"," ",3548],"{",["T_WHITESPACE","\n          ",3548],["T_COMMENT","\/\/ ----- Extracting the file in standard output\n",3549],["T_WHITESPACE","          ",3550],["T_VARIABLE","$v_result1",3550],["T_WHITESPACE"," ",3550],"=",["T_WHITESPACE"," ",3550],["T_VARIABLE","$this",3550],["T_OBJECT_OPERATOR","->",3550],["T_STRING","privExtractFileInOutput",3550],"(",["T_VARIABLE","$v_header",3550],",",["T_WHITESPACE"," ",3550],["T_VARIABLE","$p_options",3550],")",";",["T_WHITESPACE","\n          ",3550],["T_IF","if",3551],["T_WHITESPACE"," ",3551],"(",["T_VARIABLE","$v_result1",3551],["T_WHITESPACE"," ",3551],"<",["T_WHITESPACE"," ",3551],["T_LNUMBER","1",3551],")",["T_WHITESPACE"," ",3551],"{",["T_WHITESPACE","\n            ",3551],["T_VARIABLE","$this",3552],["T_OBJECT_OPERATOR","->",3552],["T_STRING","privCloseFd",3552],"(",")",";",["T_WHITESPACE","\n            ",3552],["T_VARIABLE","$this",3553],["T_OBJECT_OPERATOR","->",3553],["T_STRING","privSwapBackMagicQuotes",3553],"(",")",";",["T_WHITESPACE","\n            ",3553],["T_RETURN","return",3554],["T_WHITESPACE"," ",3554],["T_VARIABLE","$v_result1",3554],";",["T_WHITESPACE","\n          ",3554],"}",["T_WHITESPACE","\n\n          ",3555],["T_COMMENT","\/\/ ----- Get the only interesting attributes\n",3557],["T_WHITESPACE","          ",3558],["T_IF","if",3558],["T_WHITESPACE"," ",3558],"(","(",["T_VARIABLE","$v_result",3558],["T_WHITESPACE"," ",3558],"=",["T_WHITESPACE"," ",3558],["T_VARIABLE","$this",3558],["T_OBJECT_OPERATOR","->",3558],["T_STRING","privConvertHeader2FileInfo",3558],"(",["T_VARIABLE","$v_header",3558],",",["T_WHITESPACE"," ",3558],["T_VARIABLE","$p_file_list",3558],"[",["T_VARIABLE","$v_nb_extracted",3558],["T_INC","++",3558],"]",")",")",["T_WHITESPACE"," ",3558],["T_IS_NOT_EQUAL","!=",3558],["T_WHITESPACE"," ",3558],["T_LNUMBER","1",3558],")",["T_WHITESPACE"," ",3558],"{",["T_WHITESPACE","\n            ",3558],["T_VARIABLE","$this",3559],["T_OBJECT_OPERATOR","->",3559],["T_STRING","privCloseFd",3559],"(",")",";",["T_WHITESPACE","\n            ",3559],["T_VARIABLE","$this",3560],["T_OBJECT_OPERATOR","->",3560],["T_STRING","privSwapBackMagicQuotes",3560],"(",")",";",["T_WHITESPACE","\n            ",3560],["T_RETURN","return",3561],["T_WHITESPACE"," ",3561],["T_VARIABLE","$v_result",3561],";",["T_WHITESPACE","\n          ",3561],"}",["T_WHITESPACE","\n\n          ",3562],["T_COMMENT","\/\/ ----- Look for user callback abort\n",3564],["T_WHITESPACE","          ",3565],["T_IF","if",3565],["T_WHITESPACE"," ",3565],"(",["T_VARIABLE","$v_result1",3565],["T_WHITESPACE"," ",3565],["T_IS_EQUAL","==",3565],["T_WHITESPACE"," ",3565],["T_LNUMBER","2",3565],")",["T_WHITESPACE"," ",3565],"{",["T_WHITESPACE","\n          \t",3565],["T_BREAK","break",3566],";",["T_WHITESPACE","\n          ",3566],"}",["T_WHITESPACE","\n        ",3567],"}",["T_WHITESPACE","\n        ",3568],["T_COMMENT","\/\/ ----- Look for normal extraction\n",3569],["T_WHITESPACE","        ",3570],["T_ELSE","else",3570],["T_WHITESPACE"," ",3570],"{",["T_WHITESPACE","\n          ",3570],["T_COMMENT","\/\/ ----- Extracting the file\n",3571],["T_WHITESPACE","          ",3572],["T_VARIABLE","$v_result1",3572],["T_WHITESPACE"," ",3572],"=",["T_WHITESPACE"," ",3572],["T_VARIABLE","$this",3572],["T_OBJECT_OPERATOR","->",3572],["T_STRING","privExtractFile",3572],"(",["T_VARIABLE","$v_header",3572],",",["T_WHITESPACE","\n\t\t                                      ",3572],["T_VARIABLE","$p_path",3573],",",["T_WHITESPACE"," ",3573],["T_VARIABLE","$p_remove_path",3573],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t\t\t  ",3573],["T_VARIABLE","$p_remove_all_path",3574],",",["T_WHITESPACE","\n\t\t\t\t\t\t\t\t\t\t\t  ",3574],["T_VARIABLE","$p_options",3575],")",";",["T_WHITESPACE","\n          ",3575],["T_IF","if",3576],["T_WHITESPACE"," ",3576],"(",["T_VARIABLE","$v_result1",3576],["T_WHITESPACE"," ",3576],"<",["T_WHITESPACE"," ",3576],["T_LNUMBER","1",3576],")",["T_WHITESPACE"," ",3576],"{",["T_WHITESPACE","\n            ",3576],["T_VARIABLE","$this",3577],["T_OBJECT_OPERATOR","->",3577],["T_STRING","privCloseFd",3577],"(",")",";",["T_WHITESPACE","\n            ",3577],["T_VARIABLE","$this",3578],["T_OBJECT_OPERATOR","->",3578],["T_STRING","privSwapBackMagicQuotes",3578],"(",")",";",["T_WHITESPACE","\n            ",3578],["T_RETURN","return",3579],["T_WHITESPACE"," ",3579],["T_VARIABLE","$v_result1",3579],";",["T_WHITESPACE","\n          ",3579],"}",["T_WHITESPACE","\n\n          ",3580],["T_COMMENT","\/\/ ----- Get the only interesting attributes\n",3582],["T_WHITESPACE","          ",3583],["T_IF","if",3583],["T_WHITESPACE"," ",3583],"(","(",["T_VARIABLE","$v_result",3583],["T_WHITESPACE"," ",3583],"=",["T_WHITESPACE"," ",3583],["T_VARIABLE","$this",3583],["T_OBJECT_OPERATOR","->",3583],["T_STRING","privConvertHeader2FileInfo",3583],"(",["T_VARIABLE","$v_header",3583],",",["T_WHITESPACE"," ",3583],["T_VARIABLE","$p_file_list",3583],"[",["T_VARIABLE","$v_nb_extracted",3583],["T_INC","++",3583],"]",")",")",["T_WHITESPACE"," ",3583],["T_IS_NOT_EQUAL","!=",3583],["T_WHITESPACE"," ",3583],["T_LNUMBER","1",3583],")",["T_WHITESPACE","\n          ",3583],"{",["T_WHITESPACE","\n            ",3584],["T_COMMENT","\/\/ ----- Close the zip file\n",3585],["T_WHITESPACE","            ",3586],["T_VARIABLE","$this",3586],["T_OBJECT_OPERATOR","->",3586],["T_STRING","privCloseFd",3586],"(",")",";",["T_WHITESPACE","\n            ",3586],["T_VARIABLE","$this",3587],["T_OBJECT_OPERATOR","->",3587],["T_STRING","privSwapBackMagicQuotes",3587],"(",")",";",["T_WHITESPACE","\n\n            ",3587],["T_RETURN","return",3589],["T_WHITESPACE"," ",3589],["T_VARIABLE","$v_result",3589],";",["T_WHITESPACE","\n          ",3589],"}",["T_WHITESPACE","\n\n          ",3590],["T_COMMENT","\/\/ ----- Look for user callback abort\n",3592],["T_WHITESPACE","          ",3593],["T_IF","if",3593],["T_WHITESPACE"," ",3593],"(",["T_VARIABLE","$v_result1",3593],["T_WHITESPACE"," ",3593],["T_IS_EQUAL","==",3593],["T_WHITESPACE"," ",3593],["T_LNUMBER","2",3593],")",["T_WHITESPACE"," ",3593],"{",["T_WHITESPACE","\n          \t",3593],["T_BREAK","break",3594],";",["T_WHITESPACE","\n          ",3594],"}",["T_WHITESPACE","\n        ",3595],"}",["T_WHITESPACE","\n      ",3596],"}",["T_WHITESPACE","\n    ",3597],"}",["T_WHITESPACE","\n\n    ",3598],["T_COMMENT","\/\/ ----- Close the zip file\n",3600],["T_WHITESPACE","    ",3601],["T_VARIABLE","$this",3601],["T_OBJECT_OPERATOR","->",3601],["T_STRING","privCloseFd",3601],"(",")",";",["T_WHITESPACE","\n    ",3601],["T_VARIABLE","$this",3602],["T_OBJECT_OPERATOR","->",3602],["T_STRING","privSwapBackMagicQuotes",3602],"(",")",";",["T_WHITESPACE","\n\n    ",3602],["T_COMMENT","\/\/ ----- Return\n",3604],["T_WHITESPACE","    ",3605],["T_RETURN","return",3605],["T_WHITESPACE"," ",3605],["T_VARIABLE","$v_result",3605],";",["T_WHITESPACE","\n  ",3605],"}",["T_WHITESPACE","\n  ",3606],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3607],["T_WHITESPACE","\n  ",3608],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3609],["T_WHITESPACE","  ",3610],["T_COMMENT","\/\/ Function : privExtractFile()\n",3610],["T_WHITESPACE","  ",3611],["T_COMMENT","\/\/ Description :\n",3611],["T_WHITESPACE","  ",3612],["T_COMMENT","\/\/ Parameters :\n",3612],["T_WHITESPACE","  ",3613],["T_COMMENT","\/\/ Return Values :\n",3613],["T_WHITESPACE","  ",3614],["T_COMMENT","\/\/\n",3614],["T_WHITESPACE","  ",3615],["T_COMMENT","\/\/ 1 : ... ?\n",3615],["T_WHITESPACE","  ",3616],["T_COMMENT","\/\/ PCLZIP_ERR_USER_ABORTED(2) : User ask for extraction stop in callback\n",3616],["T_WHITESPACE","  ",3617],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3617],["T_WHITESPACE","  ",3618],["T_FUNCTION","function",3618],["T_WHITESPACE"," ",3618],["T_STRING","privExtractFile",3618],"(","&",["T_VARIABLE","$p_entry",3618],",",["T_WHITESPACE"," ",3618],["T_VARIABLE","$p_path",3618],",",["T_WHITESPACE"," ",3618],["T_VARIABLE","$p_remove_path",3618],",",["T_WHITESPACE"," ",3618],["T_VARIABLE","$p_remove_all_path",3618],",",["T_WHITESPACE"," ",3618],"&",["T_VARIABLE","$p_options",3618],")",["T_WHITESPACE","\n  ",3618],"{",["T_WHITESPACE","\n    ",3619],["T_VARIABLE","$v_result",3620],"=",["T_LNUMBER","1",3620],";",["T_WHITESPACE","\n\n    ",3620],["T_COMMENT","\/\/ ----- Read the file header\n",3622],["T_WHITESPACE","    ",3623],["T_IF","if",3623],["T_WHITESPACE"," ",3623],"(","(",["T_VARIABLE","$v_result",3623],["T_WHITESPACE"," ",3623],"=",["T_WHITESPACE"," ",3623],["T_VARIABLE","$this",3623],["T_OBJECT_OPERATOR","->",3623],["T_STRING","privReadFileHeader",3623],"(",["T_VARIABLE","$v_header",3623],")",")",["T_WHITESPACE"," ",3623],["T_IS_NOT_EQUAL","!=",3623],["T_WHITESPACE"," ",3623],["T_LNUMBER","1",3623],")",["T_WHITESPACE","\n    ",3623],"{",["T_WHITESPACE","\n      ",3624],["T_COMMENT","\/\/ ----- Return\n",3625],["T_WHITESPACE","      ",3626],["T_RETURN","return",3626],["T_WHITESPACE"," ",3626],["T_VARIABLE","$v_result",3626],";",["T_WHITESPACE","\n    ",3626],"}",["T_WHITESPACE","\n\n\n    ",3627],["T_COMMENT","\/\/ ----- Check that the file header is coherent with $p_entry info\n",3630],["T_WHITESPACE","    ",3631],["T_IF","if",3631],["T_WHITESPACE"," ",3631],"(",["T_VARIABLE","$this",3631],["T_OBJECT_OPERATOR","->",3631],["T_STRING","privCheckFileHeaders",3631],"(",["T_VARIABLE","$v_header",3631],",",["T_WHITESPACE"," ",3631],["T_VARIABLE","$p_entry",3631],")",["T_WHITESPACE"," ",3631],["T_IS_NOT_EQUAL","!=",3631],["T_WHITESPACE"," ",3631],["T_LNUMBER","1",3631],")",["T_WHITESPACE"," ",3631],"{",["T_WHITESPACE","\n        ",3631],["T_COMMENT","\/\/ TBC\n",3632],["T_WHITESPACE","    ",3633],"}",["T_WHITESPACE","\n\n    ",3633],["T_COMMENT","\/\/ ----- Look for all path to remove\n",3635],["T_WHITESPACE","    ",3636],["T_IF","if",3636],["T_WHITESPACE"," ",3636],"(",["T_VARIABLE","$p_remove_all_path",3636],["T_WHITESPACE"," ",3636],["T_IS_EQUAL","==",3636],["T_WHITESPACE"," ",3636],["T_STRING","true",3636],")",["T_WHITESPACE"," ",3636],"{",["T_WHITESPACE","\n        ",3636],["T_COMMENT","\/\/ ----- Look for folder entry that not need to be extracted\n",3637],["T_WHITESPACE","        ",3638],["T_IF","if",3638],["T_WHITESPACE"," ",3638],"(","(",["T_VARIABLE","$p_entry",3638],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3638],"]","&",["T_LNUMBER","0x00000010",3638],")",["T_IS_EQUAL","==",3638],["T_LNUMBER","0x00000010",3638],")",["T_WHITESPACE"," ",3638],"{",["T_WHITESPACE","\n\n            ",3638],["T_VARIABLE","$p_entry",3640],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3640],"]",["T_WHITESPACE"," ",3640],"=",["T_WHITESPACE"," ",3640],["T_CONSTANT_ENCAPSED_STRING","\"filtered\"",3640],";",["T_WHITESPACE","\n\n            ",3640],["T_RETURN","return",3642],["T_WHITESPACE"," ",3642],["T_VARIABLE","$v_result",3642],";",["T_WHITESPACE","\n        ",3642],"}",["T_WHITESPACE","\n\n        ",3643],["T_COMMENT","\/\/ ----- Get the basename of the path\n",3645],["T_WHITESPACE","        ",3646],["T_VARIABLE","$p_entry",3646],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3646],"]",["T_WHITESPACE"," ",3646],"=",["T_WHITESPACE"," ",3646],["T_STRING","basename",3646],"(",["T_VARIABLE","$p_entry",3646],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3646],"]",")",";",["T_WHITESPACE","\n    ",3646],"}",["T_WHITESPACE","\n\n    ",3647],["T_COMMENT","\/\/ ----- Look for path to remove\n",3649],["T_WHITESPACE","    ",3650],["T_ELSE","else",3650],["T_WHITESPACE"," ",3650],["T_IF","if",3650],["T_WHITESPACE"," ",3650],"(",["T_VARIABLE","$p_remove_path",3650],["T_WHITESPACE"," ",3650],["T_IS_NOT_EQUAL","!=",3650],["T_WHITESPACE"," ",3650],["T_CONSTANT_ENCAPSED_STRING","\"\"",3650],")",["T_WHITESPACE","\n    ",3650],"{",["T_WHITESPACE","\n      ",3651],["T_IF","if",3652],["T_WHITESPACE"," ",3652],"(",["T_STRING","PclZipUtilPathInclusion",3652],"(",["T_VARIABLE","$p_remove_path",3652],",",["T_WHITESPACE"," ",3652],["T_VARIABLE","$p_entry",3652],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3652],"]",")",["T_WHITESPACE"," ",3652],["T_IS_EQUAL","==",3652],["T_WHITESPACE"," ",3652],["T_LNUMBER","2",3652],")",["T_WHITESPACE","\n      ",3652],"{",["T_WHITESPACE","\n\n        ",3653],["T_COMMENT","\/\/ ----- Change the file status\n",3655],["T_WHITESPACE","        ",3656],["T_VARIABLE","$p_entry",3656],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3656],"]",["T_WHITESPACE"," ",3656],"=",["T_WHITESPACE"," ",3656],["T_CONSTANT_ENCAPSED_STRING","\"filtered\"",3656],";",["T_WHITESPACE","\n\n        ",3656],["T_COMMENT","\/\/ ----- Return\n",3658],["T_WHITESPACE","        ",3659],["T_RETURN","return",3659],["T_WHITESPACE"," ",3659],["T_VARIABLE","$v_result",3659],";",["T_WHITESPACE","\n      ",3659],"}",["T_WHITESPACE","\n\n      ",3660],["T_VARIABLE","$p_remove_path_size",3662],["T_WHITESPACE"," ",3662],"=",["T_WHITESPACE"," ",3662],["T_STRING","strlen",3662],"(",["T_VARIABLE","$p_remove_path",3662],")",";",["T_WHITESPACE","\n      ",3662],["T_IF","if",3663],["T_WHITESPACE"," ",3663],"(",["T_STRING","substr",3663],"(",["T_VARIABLE","$p_entry",3663],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3663],"]",",",["T_WHITESPACE"," ",3663],["T_LNUMBER","0",3663],",",["T_WHITESPACE"," ",3663],["T_VARIABLE","$p_remove_path_size",3663],")",["T_WHITESPACE"," ",3663],["T_IS_EQUAL","==",3663],["T_WHITESPACE"," ",3663],["T_VARIABLE","$p_remove_path",3663],")",["T_WHITESPACE","\n      ",3663],"{",["T_WHITESPACE","\n\n        ",3664],["T_COMMENT","\/\/ ----- Remove the path\n",3666],["T_WHITESPACE","        ",3667],["T_VARIABLE","$p_entry",3667],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3667],"]",["T_WHITESPACE"," ",3667],"=",["T_WHITESPACE"," ",3667],["T_STRING","substr",3667],"(",["T_VARIABLE","$p_entry",3667],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3667],"]",",",["T_WHITESPACE"," ",3667],["T_VARIABLE","$p_remove_path_size",3667],")",";",["T_WHITESPACE","\n\n      ",3667],"}",["T_WHITESPACE","\n    ",3669],"}",["T_WHITESPACE","\n\n    ",3670],["T_COMMENT","\/\/ ----- Add the path\n",3672],["T_WHITESPACE","    ",3673],["T_IF","if",3673],["T_WHITESPACE"," ",3673],"(",["T_VARIABLE","$p_path",3673],["T_WHITESPACE"," ",3673],["T_IS_NOT_EQUAL","!=",3673],["T_WHITESPACE"," ",3673],["T_CONSTANT_ENCAPSED_STRING","''",3673],")",["T_WHITESPACE"," ",3673],"{",["T_WHITESPACE","\n      ",3673],["T_VARIABLE","$p_entry",3674],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3674],"]",["T_WHITESPACE"," ",3674],"=",["T_WHITESPACE"," ",3674],["T_VARIABLE","$p_path",3674],".",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3674],".",["T_VARIABLE","$p_entry",3674],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3674],"]",";",["T_WHITESPACE","\n    ",3674],"}",["T_WHITESPACE","\n\n    ",3675],["T_COMMENT","\/\/ ----- Check a base_dir_restriction\n",3677],["T_WHITESPACE","    ",3678],["T_IF","if",3678],["T_WHITESPACE"," ",3678],"(",["T_ISSET","isset",3678],"(",["T_VARIABLE","$p_options",3678],"[",["T_STRING","PCLZIP_OPT_EXTRACT_DIR_RESTRICTION",3678],"]",")",")",["T_WHITESPACE"," ",3678],"{",["T_WHITESPACE","\n      ",3678],["T_VARIABLE","$v_inclusion",3679],["T_WHITESPACE","\n      ",3679],"=",["T_WHITESPACE"," ",3680],["T_STRING","PclZipUtilPathInclusion",3680],"(",["T_VARIABLE","$p_options",3680],"[",["T_STRING","PCLZIP_OPT_EXTRACT_DIR_RESTRICTION",3680],"]",",",["T_WHITESPACE","\n                                ",3680],["T_VARIABLE","$p_entry",3681],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3681],"]",")",";",["T_WHITESPACE","\n      ",3681],["T_IF","if",3682],["T_WHITESPACE"," ",3682],"(",["T_VARIABLE","$v_inclusion",3682],["T_WHITESPACE"," ",3682],["T_IS_EQUAL","==",3682],["T_WHITESPACE"," ",3682],["T_LNUMBER","0",3682],")",["T_WHITESPACE"," ",3682],"{",["T_WHITESPACE","\n\n        ",3682],["T_STRING","PclZip",3684],["T_DOUBLE_COLON","::",3684],["T_STRING","privErrorLog",3684],"(",["T_STRING","PCLZIP_ERR_DIRECTORY_RESTRICTION",3684],",",["T_WHITESPACE","\n\t\t\t                     ",3684],["T_CONSTANT_ENCAPSED_STRING","\"Filename '\"",3685],".",["T_VARIABLE","$p_entry",3685],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3685],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' is \"",3685],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",3685],".",["T_CONSTANT_ENCAPSED_STRING","\"outside PCLZIP_OPT_EXTRACT_DIR_RESTRICTION\"",3686],")",";",["T_WHITESPACE","\n\n        ",3686],["T_RETURN","return",3688],["T_WHITESPACE"," ",3688],["T_STRING","PclZip",3688],["T_DOUBLE_COLON","::",3688],["T_STRING","errorCode",3688],"(",")",";",["T_WHITESPACE","\n      ",3688],"}",["T_WHITESPACE","\n    ",3689],"}",["T_WHITESPACE","\n\n    ",3690],["T_COMMENT","\/\/ ----- Look for pre-extract callback\n",3692],["T_WHITESPACE","    ",3693],["T_IF","if",3693],["T_WHITESPACE"," ",3693],"(",["T_ISSET","isset",3693],"(",["T_VARIABLE","$p_options",3693],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",3693],"]",")",")",["T_WHITESPACE"," ",3693],"{",["T_WHITESPACE","\n\n      ",3693],["T_COMMENT","\/\/ ----- Generate a local information\n",3695],["T_WHITESPACE","      ",3696],["T_VARIABLE","$v_local_header",3696],["T_WHITESPACE"," ",3696],"=",["T_WHITESPACE"," ",3696],["T_ARRAY","array",3696],"(",")",";",["T_WHITESPACE","\n      ",3696],["T_VARIABLE","$this",3697],["T_OBJECT_OPERATOR","->",3697],["T_STRING","privConvertHeader2FileInfo",3697],"(",["T_VARIABLE","$p_entry",3697],",",["T_WHITESPACE"," ",3697],["T_VARIABLE","$v_local_header",3697],")",";",["T_WHITESPACE","\n\n      ",3697],["T_COMMENT","\/\/ ----- Call the callback\n",3699],["T_WHITESPACE","      ",3700],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",3700],["T_WHITESPACE","      ",3701],["T_COMMENT","\/\/ header.\n",3701],["T_WHITESPACE","      ",3702],["T_VARIABLE","$v_result",3702],["T_WHITESPACE"," ",3702],"=",["T_WHITESPACE"," ",3702],["T_VARIABLE","$p_options",3702],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",3702],"]","(",["T_STRING","PCLZIP_CB_PRE_EXTRACT",3702],",",["T_WHITESPACE"," ",3702],["T_VARIABLE","$v_local_header",3702],")",";",["T_WHITESPACE","\n      ",3702],["T_IF","if",3703],["T_WHITESPACE"," ",3703],"(",["T_VARIABLE","$v_result",3703],["T_WHITESPACE"," ",3703],["T_IS_EQUAL","==",3703],["T_WHITESPACE"," ",3703],["T_LNUMBER","0",3703],")",["T_WHITESPACE"," ",3703],"{",["T_WHITESPACE","\n        ",3703],["T_COMMENT","\/\/ ----- Change the file status\n",3704],["T_WHITESPACE","        ",3705],["T_VARIABLE","$p_entry",3705],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3705],"]",["T_WHITESPACE"," ",3705],"=",["T_WHITESPACE"," ",3705],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",3705],";",["T_WHITESPACE","\n        ",3705],["T_VARIABLE","$v_result",3706],["T_WHITESPACE"," ",3706],"=",["T_WHITESPACE"," ",3706],["T_LNUMBER","1",3706],";",["T_WHITESPACE","\n      ",3706],"}",["T_WHITESPACE","\n\n      ",3707],["T_COMMENT","\/\/ ----- Look for abort result\n",3709],["T_WHITESPACE","      ",3710],["T_IF","if",3710],["T_WHITESPACE"," ",3710],"(",["T_VARIABLE","$v_result",3710],["T_WHITESPACE"," ",3710],["T_IS_EQUAL","==",3710],["T_WHITESPACE"," ",3710],["T_LNUMBER","2",3710],")",["T_WHITESPACE"," ",3710],"{",["T_WHITESPACE","\n        ",3710],["T_COMMENT","\/\/ ----- This status is internal and will be changed in 'skipped'\n",3711],["T_WHITESPACE","        ",3712],["T_VARIABLE","$p_entry",3712],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3712],"]",["T_WHITESPACE"," ",3712],"=",["T_WHITESPACE"," ",3712],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",3712],";",["T_WHITESPACE","\n      \t",3712],["T_VARIABLE","$v_result",3713],["T_WHITESPACE"," ",3713],"=",["T_WHITESPACE"," ",3713],["T_STRING","PCLZIP_ERR_USER_ABORTED",3713],";",["T_WHITESPACE","\n      ",3713],"}",["T_WHITESPACE","\n\n      ",3714],["T_COMMENT","\/\/ ----- Update the informations\n",3716],["T_WHITESPACE","      ",3717],["T_COMMENT","\/\/ Only some fields can be modified\n",3717],["T_WHITESPACE","      ",3718],["T_VARIABLE","$p_entry",3718],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3718],"]",["T_WHITESPACE"," ",3718],"=",["T_WHITESPACE"," ",3718],["T_VARIABLE","$v_local_header",3718],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3718],"]",";",["T_WHITESPACE","\n    ",3718],"}",["T_WHITESPACE","\n\n\n    ",3719],["T_COMMENT","\/\/ ----- Look if extraction should be done\n",3722],["T_WHITESPACE","    ",3723],["T_IF","if",3723],["T_WHITESPACE"," ",3723],"(",["T_VARIABLE","$p_entry",3723],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3723],"]",["T_WHITESPACE"," ",3723],["T_IS_EQUAL","==",3723],["T_WHITESPACE"," ",3723],["T_CONSTANT_ENCAPSED_STRING","'ok'",3723],")",["T_WHITESPACE"," ",3723],"{",["T_WHITESPACE","\n\n    ",3723],["T_COMMENT","\/\/ ----- Look for specific actions while the file exist\n",3725],["T_WHITESPACE","    ",3726],["T_IF","if",3726],["T_WHITESPACE"," ",3726],"(",["T_STRING","file_exists",3726],"(",["T_VARIABLE","$p_entry",3726],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3726],"]",")",")",["T_WHITESPACE","\n    ",3726],"{",["T_WHITESPACE","\n\n      ",3727],["T_COMMENT","\/\/ ----- Look if file is a directory\n",3729],["T_WHITESPACE","      ",3730],["T_IF","if",3730],["T_WHITESPACE"," ",3730],"(",["T_STRING","is_dir",3730],"(",["T_VARIABLE","$p_entry",3730],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3730],"]",")",")",["T_WHITESPACE","\n      ",3730],"{",["T_WHITESPACE","\n\n        ",3731],["T_COMMENT","\/\/ ----- Change the file status\n",3733],["T_WHITESPACE","        ",3734],["T_VARIABLE","$p_entry",3734],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3734],"]",["T_WHITESPACE"," ",3734],"=",["T_WHITESPACE"," ",3734],["T_CONSTANT_ENCAPSED_STRING","\"already_a_directory\"",3734],";",["T_WHITESPACE","\n\n        ",3734],["T_COMMENT","\/\/ ----- Look for PCLZIP_OPT_STOP_ON_ERROR\n",3736],["T_WHITESPACE","        ",3737],["T_COMMENT","\/\/ For historical reason first PclZip implementation does not stop\n",3737],["T_WHITESPACE","        ",3738],["T_COMMENT","\/\/ when this kind of error occurs.\n",3738],["T_WHITESPACE","        ",3739],["T_IF","if",3739],["T_WHITESPACE"," ",3739],"(",["T_WHITESPACE","   ",3739],"(",["T_ISSET","isset",3739],"(",["T_VARIABLE","$p_options",3739],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3739],"]",")",")",["T_WHITESPACE","\n\t\t    ",3739],["T_BOOLEAN_AND","&&",3740],["T_WHITESPACE"," ",3740],"(",["T_VARIABLE","$p_options",3740],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3740],"]",["T_IS_IDENTICAL","===",3740],["T_STRING","true",3740],")",")",["T_WHITESPACE"," ",3740],"{",["T_WHITESPACE","\n\n            ",3740],["T_STRING","PclZip",3742],["T_DOUBLE_COLON","::",3742],["T_STRING","privErrorLog",3742],"(",["T_STRING","PCLZIP_ERR_ALREADY_A_DIRECTORY",3742],",",["T_WHITESPACE","\n\t\t\t                     ",3742],["T_CONSTANT_ENCAPSED_STRING","\"Filename '\"",3743],".",["T_VARIABLE","$p_entry",3743],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3743],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' is \"",3743],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",3743],".",["T_CONSTANT_ENCAPSED_STRING","\"already used by an existing directory\"",3744],")",";",["T_WHITESPACE","\n\n            ",3744],["T_RETURN","return",3746],["T_WHITESPACE"," ",3746],["T_STRING","PclZip",3746],["T_DOUBLE_COLON","::",3746],["T_STRING","errorCode",3746],"(",")",";",["T_WHITESPACE","\n\t\t    ",3746],"}",["T_WHITESPACE","\n      ",3747],"}",["T_WHITESPACE","\n      ",3748],["T_COMMENT","\/\/ ----- Look if file is write protected\n",3749],["T_WHITESPACE","      ",3750],["T_ELSE","else",3750],["T_WHITESPACE"," ",3750],["T_IF","if",3750],["T_WHITESPACE"," ",3750],"(","!",["T_STRING","is_writeable",3750],"(",["T_VARIABLE","$p_entry",3750],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3750],"]",")",")",["T_WHITESPACE","\n      ",3750],"{",["T_WHITESPACE","\n\n        ",3751],["T_COMMENT","\/\/ ----- Change the file status\n",3753],["T_WHITESPACE","        ",3754],["T_VARIABLE","$p_entry",3754],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3754],"]",["T_WHITESPACE"," ",3754],"=",["T_WHITESPACE"," ",3754],["T_CONSTANT_ENCAPSED_STRING","\"write_protected\"",3754],";",["T_WHITESPACE","\n\n        ",3754],["T_COMMENT","\/\/ ----- Look for PCLZIP_OPT_STOP_ON_ERROR\n",3756],["T_WHITESPACE","        ",3757],["T_COMMENT","\/\/ For historical reason first PclZip implementation does not stop\n",3757],["T_WHITESPACE","        ",3758],["T_COMMENT","\/\/ when this kind of error occurs.\n",3758],["T_WHITESPACE","        ",3759],["T_IF","if",3759],["T_WHITESPACE"," ",3759],"(",["T_WHITESPACE","   ",3759],"(",["T_ISSET","isset",3759],"(",["T_VARIABLE","$p_options",3759],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3759],"]",")",")",["T_WHITESPACE","\n\t\t    ",3759],["T_BOOLEAN_AND","&&",3760],["T_WHITESPACE"," ",3760],"(",["T_VARIABLE","$p_options",3760],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3760],"]",["T_IS_IDENTICAL","===",3760],["T_STRING","true",3760],")",")",["T_WHITESPACE"," ",3760],"{",["T_WHITESPACE","\n\n            ",3760],["T_STRING","PclZip",3762],["T_DOUBLE_COLON","::",3762],["T_STRING","privErrorLog",3762],"(",["T_STRING","PCLZIP_ERR_WRITE_OPEN_FAIL",3762],",",["T_WHITESPACE","\n\t\t\t                     ",3762],["T_CONSTANT_ENCAPSED_STRING","\"Filename '\"",3763],".",["T_VARIABLE","$p_entry",3763],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3763],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' exists \"",3763],["T_WHITESPACE","\n\t\t\t\t\t\t\t\t ",3763],".",["T_CONSTANT_ENCAPSED_STRING","\"and is write protected\"",3764],")",";",["T_WHITESPACE","\n\n            ",3764],["T_RETURN","return",3766],["T_WHITESPACE"," ",3766],["T_STRING","PclZip",3766],["T_DOUBLE_COLON","::",3766],["T_STRING","errorCode",3766],"(",")",";",["T_WHITESPACE","\n\t\t    ",3766],"}",["T_WHITESPACE","\n      ",3767],"}",["T_WHITESPACE","\n\n      ",3768],["T_COMMENT","\/\/ ----- Look if the extracted file is older\n",3770],["T_WHITESPACE","      ",3771],["T_ELSE","else",3771],["T_WHITESPACE"," ",3771],["T_IF","if",3771],["T_WHITESPACE"," ",3771],"(",["T_STRING","filemtime",3771],"(",["T_VARIABLE","$p_entry",3771],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3771],"]",")",["T_WHITESPACE"," ",3771],">",["T_WHITESPACE"," ",3771],["T_VARIABLE","$p_entry",3771],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3771],"]",")",["T_WHITESPACE","\n      ",3771],"{",["T_WHITESPACE","\n        ",3772],["T_COMMENT","\/\/ ----- Change the file status\n",3773],["T_WHITESPACE","        ",3774],["T_IF","if",3774],["T_WHITESPACE"," ",3774],"(",["T_WHITESPACE","   ",3774],"(",["T_ISSET","isset",3774],"(",["T_VARIABLE","$p_options",3774],"[",["T_STRING","PCLZIP_OPT_REPLACE_NEWER",3774],"]",")",")",["T_WHITESPACE","\n\t\t    ",3774],["T_BOOLEAN_AND","&&",3775],["T_WHITESPACE"," ",3775],"(",["T_VARIABLE","$p_options",3775],"[",["T_STRING","PCLZIP_OPT_REPLACE_NEWER",3775],"]",["T_IS_IDENTICAL","===",3775],["T_STRING","true",3775],")",")",["T_WHITESPACE"," ",3775],"{",["T_WHITESPACE","\n\t  \t  ",3775],"}",["T_WHITESPACE","\n\t\t    ",3776],["T_ELSE","else",3777],["T_WHITESPACE"," ",3777],"{",["T_WHITESPACE","\n            ",3777],["T_VARIABLE","$p_entry",3778],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3778],"]",["T_WHITESPACE"," ",3778],"=",["T_WHITESPACE"," ",3778],["T_CONSTANT_ENCAPSED_STRING","\"newer_exist\"",3778],";",["T_WHITESPACE","\n\n            ",3778],["T_COMMENT","\/\/ ----- Look for PCLZIP_OPT_STOP_ON_ERROR\n",3780],["T_WHITESPACE","            ",3781],["T_COMMENT","\/\/ For historical reason first PclZip implementation does not stop\n",3781],["T_WHITESPACE","            ",3782],["T_COMMENT","\/\/ when this kind of error occurs.\n",3782],["T_WHITESPACE","            ",3783],["T_IF","if",3783],["T_WHITESPACE"," ",3783],"(",["T_WHITESPACE","   ",3783],"(",["T_ISSET","isset",3783],"(",["T_VARIABLE","$p_options",3783],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3783],"]",")",")",["T_WHITESPACE","\n\t\t        ",3783],["T_BOOLEAN_AND","&&",3784],["T_WHITESPACE"," ",3784],"(",["T_VARIABLE","$p_options",3784],"[",["T_STRING","PCLZIP_OPT_STOP_ON_ERROR",3784],"]",["T_IS_IDENTICAL","===",3784],["T_STRING","true",3784],")",")",["T_WHITESPACE"," ",3784],"{",["T_WHITESPACE","\n\n                ",3784],["T_STRING","PclZip",3786],["T_DOUBLE_COLON","::",3786],["T_STRING","privErrorLog",3786],"(",["T_STRING","PCLZIP_ERR_WRITE_OPEN_FAIL",3786],",",["T_WHITESPACE","\n\t\t\t             ",3786],["T_CONSTANT_ENCAPSED_STRING","\"Newer version of '\"",3787],".",["T_VARIABLE","$p_entry",3787],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3787],"]",".",["T_CONSTANT_ENCAPSED_STRING","\"' exists \"",3787],["T_WHITESPACE","\n\t\t\t\t\t    ",3787],".",["T_CONSTANT_ENCAPSED_STRING","\"and option PCLZIP_OPT_REPLACE_NEWER is not selected\"",3788],")",";",["T_WHITESPACE","\n\n                ",3788],["T_RETURN","return",3790],["T_WHITESPACE"," ",3790],["T_STRING","PclZip",3790],["T_DOUBLE_COLON","::",3790],["T_STRING","errorCode",3790],"(",")",";",["T_WHITESPACE","\n\t\t      ",3790],"}",["T_WHITESPACE","\n\t\t    ",3791],"}",["T_WHITESPACE","\n      ",3792],"}",["T_WHITESPACE","\n      ",3793],["T_ELSE","else",3794],["T_WHITESPACE"," ",3794],"{",["T_WHITESPACE","\n      ",3794],"}",["T_WHITESPACE","\n    ",3795],"}",["T_WHITESPACE","\n\n    ",3796],["T_COMMENT","\/\/ ----- Check the directory availability and create it if necessary\n",3798],["T_WHITESPACE","    ",3799],["T_ELSE","else",3799],["T_WHITESPACE"," ",3799],"{",["T_WHITESPACE","\n      ",3799],["T_IF","if",3800],["T_WHITESPACE"," ",3800],"(","(","(",["T_VARIABLE","$p_entry",3800],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3800],"]","&",["T_LNUMBER","0x00000010",3800],")",["T_IS_EQUAL","==",3800],["T_LNUMBER","0x00000010",3800],")",["T_WHITESPACE"," ",3800],["T_BOOLEAN_OR","||",3800],["T_WHITESPACE"," ",3800],"(",["T_STRING","substr",3800],"(",["T_VARIABLE","$p_entry",3800],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3800],"]",",",["T_WHITESPACE"," ",3800],"-",["T_LNUMBER","1",3800],")",["T_WHITESPACE"," ",3800],["T_IS_EQUAL","==",3800],["T_WHITESPACE"," ",3800],["T_CONSTANT_ENCAPSED_STRING","'\/'",3800],")",")",["T_WHITESPACE","\n        ",3800],["T_VARIABLE","$v_dir_to_check",3801],["T_WHITESPACE"," ",3801],"=",["T_WHITESPACE"," ",3801],["T_VARIABLE","$p_entry",3801],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3801],"]",";",["T_WHITESPACE","\n      ",3801],["T_ELSE","else",3802],["T_WHITESPACE"," ",3802],["T_IF","if",3802],["T_WHITESPACE"," ",3802],"(","!",["T_STRING","strstr",3802],"(",["T_VARIABLE","$p_entry",3802],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3802],"]",",",["T_WHITESPACE"," ",3802],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",3802],")",")",["T_WHITESPACE","\n        ",3802],["T_VARIABLE","$v_dir_to_check",3803],["T_WHITESPACE"," ",3803],"=",["T_WHITESPACE"," ",3803],["T_CONSTANT_ENCAPSED_STRING","\"\"",3803],";",["T_WHITESPACE","\n      ",3803],["T_ELSE","else",3804],["T_WHITESPACE","\n        ",3804],["T_VARIABLE","$v_dir_to_check",3805],["T_WHITESPACE"," ",3805],"=",["T_WHITESPACE"," ",3805],["T_STRING","dirname",3805],"(",["T_VARIABLE","$p_entry",3805],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3805],"]",")",";",["T_WHITESPACE","\n\n        ",3805],["T_IF","if",3807],["T_WHITESPACE"," ",3807],"(","(",["T_VARIABLE","$v_result",3807],["T_WHITESPACE"," ",3807],"=",["T_WHITESPACE"," ",3807],["T_VARIABLE","$this",3807],["T_OBJECT_OPERATOR","->",3807],["T_STRING","privDirCheck",3807],"(",["T_VARIABLE","$v_dir_to_check",3807],",",["T_WHITESPACE"," ",3807],"(","(",["T_VARIABLE","$p_entry",3807],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3807],"]","&",["T_LNUMBER","0x00000010",3807],")",["T_IS_EQUAL","==",3807],["T_LNUMBER","0x00000010",3807],")",")",")",["T_WHITESPACE"," ",3807],["T_IS_NOT_EQUAL","!=",3807],["T_WHITESPACE"," ",3807],["T_LNUMBER","1",3807],")",["T_WHITESPACE"," ",3807],"{",["T_WHITESPACE","\n\n          ",3807],["T_COMMENT","\/\/ ----- Change the file status\n",3809],["T_WHITESPACE","          ",3810],["T_VARIABLE","$p_entry",3810],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3810],"]",["T_WHITESPACE"," ",3810],"=",["T_WHITESPACE"," ",3810],["T_CONSTANT_ENCAPSED_STRING","\"path_creation_fail\"",3810],";",["T_WHITESPACE","\n\n          ",3810],["T_COMMENT","\/\/ ----- Return\n",3812],["T_WHITESPACE","          ",3813],["T_COMMENT","\/\/return $v_result;\n",3813],["T_WHITESPACE","          ",3814],["T_VARIABLE","$v_result",3814],["T_WHITESPACE"," ",3814],"=",["T_WHITESPACE"," ",3814],["T_LNUMBER","1",3814],";",["T_WHITESPACE","\n        ",3814],"}",["T_WHITESPACE","\n      ",3815],"}",["T_WHITESPACE","\n    ",3816],"}",["T_WHITESPACE","\n\n    ",3817],["T_COMMENT","\/\/ ----- Look if extraction should be done\n",3819],["T_WHITESPACE","    ",3820],["T_IF","if",3820],["T_WHITESPACE"," ",3820],"(",["T_VARIABLE","$p_entry",3820],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3820],"]",["T_WHITESPACE"," ",3820],["T_IS_EQUAL","==",3820],["T_WHITESPACE"," ",3820],["T_CONSTANT_ENCAPSED_STRING","'ok'",3820],")",["T_WHITESPACE"," ",3820],"{",["T_WHITESPACE","\n\n      ",3820],["T_COMMENT","\/\/ ----- Do the extraction (if not a folder)\n",3822],["T_WHITESPACE","      ",3823],["T_IF","if",3823],["T_WHITESPACE"," ",3823],"(","!","(","(",["T_VARIABLE","$p_entry",3823],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",3823],"]","&",["T_LNUMBER","0x00000010",3823],")",["T_IS_EQUAL","==",3823],["T_LNUMBER","0x00000010",3823],")",")",["T_WHITESPACE","\n      ",3823],"{",["T_WHITESPACE","\n        ",3824],["T_COMMENT","\/\/ ----- Look for not compressed file\n",3825],["T_WHITESPACE","        ",3826],["T_IF","if",3826],["T_WHITESPACE"," ",3826],"(",["T_VARIABLE","$p_entry",3826],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3826],"]",["T_WHITESPACE"," ",3826],["T_IS_EQUAL","==",3826],["T_WHITESPACE"," ",3826],["T_LNUMBER","0",3826],")",["T_WHITESPACE"," ",3826],"{",["T_WHITESPACE","\n\n    \t\t  ",3826],["T_COMMENT","\/\/ ----- Opening destination file\n",3828],["T_WHITESPACE","          ",3829],["T_IF","if",3829],["T_WHITESPACE"," ",3829],"(","(",["T_VARIABLE","$v_dest_file",3829],["T_WHITESPACE"," ",3829],"=",["T_WHITESPACE"," ",3829],"@",["T_STRING","fopen",3829],"(",["T_VARIABLE","$p_entry",3829],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3829],"]",",",["T_WHITESPACE"," ",3829],["T_CONSTANT_ENCAPSED_STRING","'wb'",3829],")",")",["T_WHITESPACE"," ",3829],["T_IS_EQUAL","==",3829],["T_WHITESPACE"," ",3829],["T_LNUMBER","0",3829],")",["T_WHITESPACE","\n          ",3829],"{",["T_WHITESPACE","\n\n            ",3830],["T_COMMENT","\/\/ ----- Change the file status\n",3832],["T_WHITESPACE","            ",3833],["T_VARIABLE","$p_entry",3833],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3833],"]",["T_WHITESPACE"," ",3833],"=",["T_WHITESPACE"," ",3833],["T_CONSTANT_ENCAPSED_STRING","\"write_error\"",3833],";",["T_WHITESPACE","\n\n            ",3833],["T_COMMENT","\/\/ ----- Return\n",3835],["T_WHITESPACE","            ",3836],["T_RETURN","return",3836],["T_WHITESPACE"," ",3836],["T_VARIABLE","$v_result",3836],";",["T_WHITESPACE","\n          ",3836],"}",["T_WHITESPACE","\n\n\n          ",3837],["T_COMMENT","\/\/ ----- Read the file by PCLZIP_READ_BLOCK_SIZE octets blocks\n",3840],["T_WHITESPACE","          ",3841],["T_VARIABLE","$v_size",3841],["T_WHITESPACE"," ",3841],"=",["T_WHITESPACE"," ",3841],["T_VARIABLE","$p_entry",3841],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3841],"]",";",["T_WHITESPACE","\n          ",3841],["T_WHILE","while",3842],["T_WHITESPACE"," ",3842],"(",["T_VARIABLE","$v_size",3842],["T_WHITESPACE"," ",3842],["T_IS_NOT_EQUAL","!=",3842],["T_WHITESPACE"," ",3842],["T_LNUMBER","0",3842],")",["T_WHITESPACE","\n          ",3842],"{",["T_WHITESPACE","\n            ",3843],["T_VARIABLE","$v_read_size",3844],["T_WHITESPACE"," ",3844],"=",["T_WHITESPACE"," ",3844],"(",["T_VARIABLE","$v_size",3844],["T_WHITESPACE"," ",3844],"<",["T_WHITESPACE"," ",3844],["T_STRING","PCLZIP_READ_BLOCK_SIZE",3844],["T_WHITESPACE"," ",3844],"?",["T_WHITESPACE"," ",3844],["T_VARIABLE","$v_size",3844],["T_WHITESPACE"," ",3844],":",["T_WHITESPACE"," ",3844],["T_STRING","PCLZIP_READ_BLOCK_SIZE",3844],")",";",["T_WHITESPACE","\n            ",3844],["T_VARIABLE","$v_buffer",3845],["T_WHITESPACE"," ",3845],"=",["T_WHITESPACE"," ",3845],"@",["T_STRING","fread",3845],"(",["T_VARIABLE","$this",3845],["T_OBJECT_OPERATOR","->",3845],["T_STRING","zip_fd",3845],",",["T_WHITESPACE"," ",3845],["T_VARIABLE","$v_read_size",3845],")",";",["T_WHITESPACE","\n            ",3845],["T_COMMENT","\/* Try to speed up the code\n            $v_binary_data = pack('a'.$v_read_size, $v_buffer);\n            @fwrite($v_dest_file, $v_binary_data, $v_read_size);\n            *\/",3846],["T_WHITESPACE","\n            ",3849],"@",["T_STRING","fwrite",3850],"(",["T_VARIABLE","$v_dest_file",3850],",",["T_WHITESPACE"," ",3850],["T_VARIABLE","$v_buffer",3850],",",["T_WHITESPACE"," ",3850],["T_VARIABLE","$v_read_size",3850],")",";",["T_WHITESPACE","\n            ",3850],["T_VARIABLE","$v_size",3851],["T_WHITESPACE"," ",3851],["T_MINUS_EQUAL","-=",3851],["T_WHITESPACE"," ",3851],["T_VARIABLE","$v_read_size",3851],";",["T_WHITESPACE","\n          ",3851],"}",["T_WHITESPACE","\n\n          ",3852],["T_COMMENT","\/\/ ----- Closing the destination file\n",3854],["T_WHITESPACE","          ",3855],["T_STRING","fclose",3855],"(",["T_VARIABLE","$v_dest_file",3855],")",";",["T_WHITESPACE","\n\n          ",3855],["T_COMMENT","\/\/ ----- Change the file mtime\n",3857],["T_WHITESPACE","          ",3858],["T_STRING","touch",3858],"(",["T_VARIABLE","$p_entry",3858],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3858],"]",",",["T_WHITESPACE"," ",3858],["T_VARIABLE","$p_entry",3858],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3858],"]",")",";",["T_WHITESPACE","\n\n\n        ",3858],"}",["T_WHITESPACE","\n        ",3861],["T_ELSE","else",3862],["T_WHITESPACE"," ",3862],"{",["T_WHITESPACE","\n          ",3862],["T_COMMENT","\/\/ ----- TBC\n",3863],["T_WHITESPACE","          ",3864],["T_COMMENT","\/\/ Need to be finished\n",3864],["T_WHITESPACE","          ",3865],["T_IF","if",3865],["T_WHITESPACE"," ",3865],"(","(",["T_VARIABLE","$p_entry",3865],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",3865],"]",["T_WHITESPACE"," ",3865],"&",["T_WHITESPACE"," ",3865],["T_LNUMBER","1",3865],")",["T_WHITESPACE"," ",3865],["T_IS_EQUAL","==",3865],["T_WHITESPACE"," ",3865],["T_LNUMBER","1",3865],")",["T_WHITESPACE"," ",3865],"{",["T_WHITESPACE","\n            ",3865],["T_STRING","PclZip",3866],["T_DOUBLE_COLON","::",3866],["T_STRING","privErrorLog",3866],"(",["T_STRING","PCLZIP_ERR_UNSUPPORTED_ENCRYPTION",3866],",",["T_WHITESPACE"," ",3866],["T_CONSTANT_ENCAPSED_STRING","'File \\''",3866],".",["T_VARIABLE","$p_entry",3866],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3866],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\\' is encrypted. Encrypted files are not supported.'",3866],")",";",["T_WHITESPACE","\n            ",3866],["T_RETURN","return",3867],["T_WHITESPACE"," ",3867],["T_STRING","PclZip",3867],["T_DOUBLE_COLON","::",3867],["T_STRING","errorCode",3867],"(",")",";",["T_WHITESPACE","\n          ",3867],"}",["T_WHITESPACE","\n\n\n          ",3868],["T_COMMENT","\/\/ ----- Look for using temporary file to unzip\n",3871],["T_WHITESPACE","          ",3872],["T_IF","if",3872],["T_WHITESPACE"," ",3872],"(",["T_WHITESPACE"," ",3872],"(","!",["T_ISSET","isset",3872],"(",["T_VARIABLE","$p_options",3872],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_OFF",3872],"]",")",")",["T_WHITESPACE","\n              ",3872],["T_BOOLEAN_AND","&&",3873],["T_WHITESPACE"," ",3873],"(",["T_ISSET","isset",3873],"(",["T_VARIABLE","$p_options",3873],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_ON",3873],"]",")",["T_WHITESPACE","\n                  ",3873],["T_BOOLEAN_OR","||",3874],["T_WHITESPACE"," ",3874],"(",["T_ISSET","isset",3874],"(",["T_VARIABLE","$p_options",3874],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",3874],"]",")",["T_WHITESPACE","\n                      ",3874],["T_BOOLEAN_AND","&&",3875],["T_WHITESPACE"," ",3875],"(",["T_VARIABLE","$p_options",3875],"[",["T_STRING","PCLZIP_OPT_TEMP_FILE_THRESHOLD",3875],"]",["T_WHITESPACE"," ",3875],["T_IS_SMALLER_OR_EQUAL","<=",3875],["T_WHITESPACE"," ",3875],["T_VARIABLE","$p_entry",3875],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3875],"]",")",")",["T_WHITESPACE"," ",3875],")",["T_WHITESPACE"," ",3875],")",["T_WHITESPACE"," ",3875],"{",["T_WHITESPACE","\n            ",3875],["T_VARIABLE","$v_result",3876],["T_WHITESPACE"," ",3876],"=",["T_WHITESPACE"," ",3876],["T_VARIABLE","$this",3876],["T_OBJECT_OPERATOR","->",3876],["T_STRING","privExtractFileUsingTempFile",3876],"(",["T_VARIABLE","$p_entry",3876],",",["T_WHITESPACE"," ",3876],["T_VARIABLE","$p_options",3876],")",";",["T_WHITESPACE","\n            ",3876],["T_IF","if",3877],["T_WHITESPACE"," ",3877],"(",["T_VARIABLE","$v_result",3877],["T_WHITESPACE"," ",3877],"<",["T_WHITESPACE"," ",3877],["T_STRING","PCLZIP_ERR_NO_ERROR",3877],")",["T_WHITESPACE"," ",3877],"{",["T_WHITESPACE","\n              ",3877],["T_RETURN","return",3878],["T_WHITESPACE"," ",3878],["T_VARIABLE","$v_result",3878],";",["T_WHITESPACE","\n            ",3878],"}",["T_WHITESPACE","\n          ",3879],"}",["T_WHITESPACE","\n\n          ",3880],["T_COMMENT","\/\/ ----- Look for extract in memory\n",3882],["T_WHITESPACE","          ",3883],["T_ELSE","else",3883],["T_WHITESPACE"," ",3883],"{",["T_WHITESPACE","\n\n\n            ",3883],["T_COMMENT","\/\/ ----- Read the compressed file in a buffer (one shot)\n",3886],["T_WHITESPACE","            ",3887],["T_VARIABLE","$v_buffer",3887],["T_WHITESPACE"," ",3887],"=",["T_WHITESPACE"," ",3887],"@",["T_STRING","fread",3887],"(",["T_VARIABLE","$this",3887],["T_OBJECT_OPERATOR","->",3887],["T_STRING","zip_fd",3887],",",["T_WHITESPACE"," ",3887],["T_VARIABLE","$p_entry",3887],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3887],"]",")",";",["T_WHITESPACE","\n\n            ",3887],["T_COMMENT","\/\/ ----- Decompress the file\n",3889],["T_WHITESPACE","            ",3890],["T_VARIABLE","$v_file_content",3890],["T_WHITESPACE"," ",3890],"=",["T_WHITESPACE"," ",3890],"@",["T_STRING","gzinflate",3890],"(",["T_VARIABLE","$v_buffer",3890],")",";",["T_WHITESPACE","\n            ",3890],["T_UNSET","unset",3891],"(",["T_VARIABLE","$v_buffer",3891],")",";",["T_WHITESPACE","\n            ",3891],["T_IF","if",3892],["T_WHITESPACE"," ",3892],"(",["T_VARIABLE","$v_file_content",3892],["T_WHITESPACE"," ",3892],["T_IS_IDENTICAL","===",3892],["T_WHITESPACE"," ",3892],["T_STRING","FALSE",3892],")",["T_WHITESPACE"," ",3892],"{",["T_WHITESPACE","\n\n              ",3892],["T_COMMENT","\/\/ ----- Change the file status\n",3894],["T_WHITESPACE","              ",3895],["T_COMMENT","\/\/ TBC\n",3895],["T_WHITESPACE","              ",3896],["T_VARIABLE","$p_entry",3896],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3896],"]",["T_WHITESPACE"," ",3896],"=",["T_WHITESPACE"," ",3896],["T_CONSTANT_ENCAPSED_STRING","\"error\"",3896],";",["T_WHITESPACE","\n\n              ",3896],["T_RETURN","return",3898],["T_WHITESPACE"," ",3898],["T_VARIABLE","$v_result",3898],";",["T_WHITESPACE","\n            ",3898],"}",["T_WHITESPACE","\n\n            ",3899],["T_COMMENT","\/\/ ----- Opening destination file\n",3901],["T_WHITESPACE","            ",3902],["T_IF","if",3902],["T_WHITESPACE"," ",3902],"(","(",["T_VARIABLE","$v_dest_file",3902],["T_WHITESPACE"," ",3902],"=",["T_WHITESPACE"," ",3902],"@",["T_STRING","fopen",3902],"(",["T_VARIABLE","$p_entry",3902],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3902],"]",",",["T_WHITESPACE"," ",3902],["T_CONSTANT_ENCAPSED_STRING","'wb'",3902],")",")",["T_WHITESPACE"," ",3902],["T_IS_EQUAL","==",3902],["T_WHITESPACE"," ",3902],["T_LNUMBER","0",3902],")",["T_WHITESPACE"," ",3902],"{",["T_WHITESPACE","\n\n              ",3902],["T_COMMENT","\/\/ ----- Change the file status\n",3904],["T_WHITESPACE","              ",3905],["T_VARIABLE","$p_entry",3905],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3905],"]",["T_WHITESPACE"," ",3905],"=",["T_WHITESPACE"," ",3905],["T_CONSTANT_ENCAPSED_STRING","\"write_error\"",3905],";",["T_WHITESPACE","\n\n              ",3905],["T_RETURN","return",3907],["T_WHITESPACE"," ",3907],["T_VARIABLE","$v_result",3907],";",["T_WHITESPACE","\n            ",3907],"}",["T_WHITESPACE","\n\n            ",3908],["T_COMMENT","\/\/ ----- Write the uncompressed data\n",3910],["T_WHITESPACE","            ",3911],"@",["T_STRING","fwrite",3911],"(",["T_VARIABLE","$v_dest_file",3911],",",["T_WHITESPACE"," ",3911],["T_VARIABLE","$v_file_content",3911],",",["T_WHITESPACE"," ",3911],["T_VARIABLE","$p_entry",3911],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3911],"]",")",";",["T_WHITESPACE","\n            ",3911],["T_UNSET","unset",3912],"(",["T_VARIABLE","$v_file_content",3912],")",";",["T_WHITESPACE","\n\n            ",3912],["T_COMMENT","\/\/ ----- Closing the destination file\n",3914],["T_WHITESPACE","            ",3915],"@",["T_STRING","fclose",3915],"(",["T_VARIABLE","$v_dest_file",3915],")",";",["T_WHITESPACE","\n\n          ",3915],"}",["T_WHITESPACE","\n\n          ",3917],["T_COMMENT","\/\/ ----- Change the file mtime\n",3919],["T_WHITESPACE","          ",3920],"@",["T_STRING","touch",3920],"(",["T_VARIABLE","$p_entry",3920],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3920],"]",",",["T_WHITESPACE"," ",3920],["T_VARIABLE","$p_entry",3920],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",3920],"]",")",";",["T_WHITESPACE","\n        ",3920],"}",["T_WHITESPACE","\n\n        ",3921],["T_COMMENT","\/\/ ----- Look for chmod option\n",3923],["T_WHITESPACE","        ",3924],["T_IF","if",3924],["T_WHITESPACE"," ",3924],"(",["T_ISSET","isset",3924],"(",["T_VARIABLE","$p_options",3924],"[",["T_STRING","PCLZIP_OPT_SET_CHMOD",3924],"]",")",")",["T_WHITESPACE"," ",3924],"{",["T_WHITESPACE","\n\n          ",3924],["T_COMMENT","\/\/ ----- Change the mode of the file\n",3926],["T_WHITESPACE","          ",3927],"@",["T_STRING","chmod",3927],"(",["T_VARIABLE","$p_entry",3927],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",3927],"]",",",["T_WHITESPACE"," ",3927],["T_VARIABLE","$p_options",3927],"[",["T_STRING","PCLZIP_OPT_SET_CHMOD",3927],"]",")",";",["T_WHITESPACE","\n        ",3927],"}",["T_WHITESPACE","\n\n      ",3928],"}",["T_WHITESPACE","\n    ",3930],"}",["T_WHITESPACE","\n\n  \t",3931],["T_COMMENT","\/\/ ----- Change abort status\n",3933],["T_WHITESPACE","  \t",3934],["T_IF","if",3934],["T_WHITESPACE"," ",3934],"(",["T_VARIABLE","$p_entry",3934],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3934],"]",["T_WHITESPACE"," ",3934],["T_IS_EQUAL","==",3934],["T_WHITESPACE"," ",3934],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",3934],")",["T_WHITESPACE"," ",3934],"{",["T_WHITESPACE","\n        ",3934],["T_VARIABLE","$p_entry",3935],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",3935],"]",["T_WHITESPACE"," ",3935],"=",["T_WHITESPACE"," ",3935],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",3935],";",["T_WHITESPACE","\n  \t",3935],"}",["T_WHITESPACE","\n\n    ",3936],["T_COMMENT","\/\/ ----- Look for post-extract callback\n",3938],["T_WHITESPACE","    ",3939],["T_ELSEIF","elseif",3939],["T_WHITESPACE"," ",3939],"(",["T_ISSET","isset",3939],"(",["T_VARIABLE","$p_options",3939],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",3939],"]",")",")",["T_WHITESPACE"," ",3939],"{",["T_WHITESPACE","\n\n      ",3939],["T_COMMENT","\/\/ ----- Generate a local information\n",3941],["T_WHITESPACE","      ",3942],["T_VARIABLE","$v_local_header",3942],["T_WHITESPACE"," ",3942],"=",["T_WHITESPACE"," ",3942],["T_ARRAY","array",3942],"(",")",";",["T_WHITESPACE","\n      ",3942],["T_VARIABLE","$this",3943],["T_OBJECT_OPERATOR","->",3943],["T_STRING","privConvertHeader2FileInfo",3943],"(",["T_VARIABLE","$p_entry",3943],",",["T_WHITESPACE"," ",3943],["T_VARIABLE","$v_local_header",3943],")",";",["T_WHITESPACE","\n\n      ",3943],["T_COMMENT","\/\/ ----- Call the callback\n",3945],["T_WHITESPACE","      ",3946],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",3946],["T_WHITESPACE","      ",3947],["T_COMMENT","\/\/ header.\n",3947],["T_WHITESPACE","      ",3948],["T_VARIABLE","$v_result",3948],["T_WHITESPACE"," ",3948],"=",["T_WHITESPACE"," ",3948],["T_VARIABLE","$p_options",3948],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",3948],"]","(",["T_STRING","PCLZIP_CB_POST_EXTRACT",3948],",",["T_WHITESPACE"," ",3948],["T_VARIABLE","$v_local_header",3948],")",";",["T_WHITESPACE","\n\n      ",3948],["T_COMMENT","\/\/ ----- Look for abort result\n",3950],["T_WHITESPACE","      ",3951],["T_IF","if",3951],["T_WHITESPACE"," ",3951],"(",["T_VARIABLE","$v_result",3951],["T_WHITESPACE"," ",3951],["T_IS_EQUAL","==",3951],["T_WHITESPACE"," ",3951],["T_LNUMBER","2",3951],")",["T_WHITESPACE"," ",3951],"{",["T_WHITESPACE","\n      \t",3951],["T_VARIABLE","$v_result",3952],["T_WHITESPACE"," ",3952],"=",["T_WHITESPACE"," ",3952],["T_STRING","PCLZIP_ERR_USER_ABORTED",3952],";",["T_WHITESPACE","\n      ",3952],"}",["T_WHITESPACE","\n    ",3953],"}",["T_WHITESPACE","\n\n    ",3954],["T_COMMENT","\/\/ ----- Return\n",3956],["T_WHITESPACE","    ",3957],["T_RETURN","return",3957],["T_WHITESPACE"," ",3957],["T_VARIABLE","$v_result",3957],";",["T_WHITESPACE","\n  ",3957],"}",["T_WHITESPACE","\n  ",3958],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3959],["T_WHITESPACE","\n  ",3960],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3961],["T_WHITESPACE","  ",3962],["T_COMMENT","\/\/ Function : privExtractFileUsingTempFile()\n",3962],["T_WHITESPACE","  ",3963],["T_COMMENT","\/\/ Description :\n",3963],["T_WHITESPACE","  ",3964],["T_COMMENT","\/\/ Parameters :\n",3964],["T_WHITESPACE","  ",3965],["T_COMMENT","\/\/ Return Values :\n",3965],["T_WHITESPACE","  ",3966],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",3966],["T_WHITESPACE","  ",3967],["T_FUNCTION","function",3967],["T_WHITESPACE"," ",3967],["T_STRING","privExtractFileUsingTempFile",3967],"(","&",["T_VARIABLE","$p_entry",3967],",",["T_WHITESPACE"," ",3967],"&",["T_VARIABLE","$p_options",3967],")",["T_WHITESPACE","\n  ",3967],"{",["T_WHITESPACE","\n    ",3968],["T_VARIABLE","$v_result",3969],"=",["T_LNUMBER","1",3969],";",["T_WHITESPACE","\n\n    ",3969],["T_COMMENT","\/\/ ----- Creates a temporary file\n",3971],["T_WHITESPACE","    ",3972],["T_VARIABLE","$v_gzip_temp_name",3972],["T_WHITESPACE"," ",3972],"=",["T_WHITESPACE"," ",3972],["T_STRING","PCLZIP_TEMPORARY_DIR",3972],".",["T_STRING","uniqid",3972],"(",["T_CONSTANT_ENCAPSED_STRING","'pclzip-'",3972],")",".",["T_CONSTANT_ENCAPSED_STRING","'.gz'",3972],";",["T_WHITESPACE","\n    ",3972],["T_IF","if",3973],["T_WHITESPACE"," ",3973],"(","(",["T_VARIABLE","$v_dest_file",3973],["T_WHITESPACE"," ",3973],"=",["T_WHITESPACE"," ",3973],"@",["T_STRING","fopen",3973],"(",["T_VARIABLE","$v_gzip_temp_name",3973],",",["T_WHITESPACE"," ",3973],["T_CONSTANT_ENCAPSED_STRING","\"wb\"",3973],")",")",["T_WHITESPACE"," ",3973],["T_IS_EQUAL","==",3973],["T_WHITESPACE"," ",3973],["T_LNUMBER","0",3973],")",["T_WHITESPACE"," ",3973],"{",["T_WHITESPACE","\n      ",3973],["T_STRING","fclose",3974],"(",["T_VARIABLE","$v_file",3974],")",";",["T_WHITESPACE","\n      ",3974],["T_STRING","PclZip",3975],["T_DOUBLE_COLON","::",3975],["T_STRING","privErrorLog",3975],"(",["T_STRING","PCLZIP_ERR_WRITE_OPEN_FAIL",3975],",",["T_WHITESPACE"," ",3975],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",3975],".",["T_VARIABLE","$v_gzip_temp_name",3975],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary write mode'",3975],")",";",["T_WHITESPACE","\n      ",3975],["T_RETURN","return",3976],["T_WHITESPACE"," ",3976],["T_STRING","PclZip",3976],["T_DOUBLE_COLON","::",3976],["T_STRING","errorCode",3976],"(",")",";",["T_WHITESPACE","\n    ",3976],"}",["T_WHITESPACE","\n\n\n    ",3977],["T_COMMENT","\/\/ ----- Write gz file format header\n",3980],["T_WHITESPACE","    ",3981],["T_VARIABLE","$v_binary_data",3981],["T_WHITESPACE"," ",3981],"=",["T_WHITESPACE"," ",3981],["T_STRING","pack",3981],"(",["T_CONSTANT_ENCAPSED_STRING","'va1a1Va1a1'",3981],",",["T_WHITESPACE"," ",3981],["T_LNUMBER","0x8b1f",3981],",",["T_WHITESPACE"," ",3981],["T_STRING","Chr",3981],"(",["T_VARIABLE","$p_entry",3981],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",3981],"]",")",",",["T_WHITESPACE"," ",3981],["T_STRING","Chr",3981],"(",["T_LNUMBER","0x00",3981],")",",",["T_WHITESPACE"," ",3981],["T_STRING","time",3981],"(",")",",",["T_WHITESPACE"," ",3981],["T_STRING","Chr",3981],"(",["T_LNUMBER","0x00",3981],")",",",["T_WHITESPACE"," ",3981],["T_STRING","Chr",3981],"(",["T_LNUMBER","3",3981],")",")",";",["T_WHITESPACE","\n    ",3981],"@",["T_STRING","fwrite",3982],"(",["T_VARIABLE","$v_dest_file",3982],",",["T_WHITESPACE"," ",3982],["T_VARIABLE","$v_binary_data",3982],",",["T_WHITESPACE"," ",3982],["T_LNUMBER","10",3982],")",";",["T_WHITESPACE","\n\n    ",3982],["T_COMMENT","\/\/ ----- Read the file by PCLZIP_READ_BLOCK_SIZE octets blocks\n",3984],["T_WHITESPACE","    ",3985],["T_VARIABLE","$v_size",3985],["T_WHITESPACE"," ",3985],"=",["T_WHITESPACE"," ",3985],["T_VARIABLE","$p_entry",3985],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",3985],"]",";",["T_WHITESPACE","\n    ",3985],["T_WHILE","while",3986],["T_WHITESPACE"," ",3986],"(",["T_VARIABLE","$v_size",3986],["T_WHITESPACE"," ",3986],["T_IS_NOT_EQUAL","!=",3986],["T_WHITESPACE"," ",3986],["T_LNUMBER","0",3986],")",["T_WHITESPACE","\n    ",3986],"{",["T_WHITESPACE","\n      ",3987],["T_VARIABLE","$v_read_size",3988],["T_WHITESPACE"," ",3988],"=",["T_WHITESPACE"," ",3988],"(",["T_VARIABLE","$v_size",3988],["T_WHITESPACE"," ",3988],"<",["T_WHITESPACE"," ",3988],["T_STRING","PCLZIP_READ_BLOCK_SIZE",3988],["T_WHITESPACE"," ",3988],"?",["T_WHITESPACE"," ",3988],["T_VARIABLE","$v_size",3988],["T_WHITESPACE"," ",3988],":",["T_WHITESPACE"," ",3988],["T_STRING","PCLZIP_READ_BLOCK_SIZE",3988],")",";",["T_WHITESPACE","\n      ",3988],["T_VARIABLE","$v_buffer",3989],["T_WHITESPACE"," ",3989],"=",["T_WHITESPACE"," ",3989],"@",["T_STRING","fread",3989],"(",["T_VARIABLE","$this",3989],["T_OBJECT_OPERATOR","->",3989],["T_STRING","zip_fd",3989],",",["T_WHITESPACE"," ",3989],["T_VARIABLE","$v_read_size",3989],")",";",["T_WHITESPACE","\n      ",3989],["T_COMMENT","\/\/$v_binary_data = pack('a'.$v_read_size, $v_buffer);\n",3990],["T_WHITESPACE","      ",3991],"@",["T_STRING","fwrite",3991],"(",["T_VARIABLE","$v_dest_file",3991],",",["T_WHITESPACE"," ",3991],["T_VARIABLE","$v_buffer",3991],",",["T_WHITESPACE"," ",3991],["T_VARIABLE","$v_read_size",3991],")",";",["T_WHITESPACE","\n      ",3991],["T_VARIABLE","$v_size",3992],["T_WHITESPACE"," ",3992],["T_MINUS_EQUAL","-=",3992],["T_WHITESPACE"," ",3992],["T_VARIABLE","$v_read_size",3992],";",["T_WHITESPACE","\n    ",3992],"}",["T_WHITESPACE","\n\n    ",3993],["T_COMMENT","\/\/ ----- Write gz file format footer\n",3995],["T_WHITESPACE","    ",3996],["T_VARIABLE","$v_binary_data",3996],["T_WHITESPACE"," ",3996],"=",["T_WHITESPACE"," ",3996],["T_STRING","pack",3996],"(",["T_CONSTANT_ENCAPSED_STRING","'VV'",3996],",",["T_WHITESPACE"," ",3996],["T_VARIABLE","$p_entry",3996],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",3996],"]",",",["T_WHITESPACE"," ",3996],["T_VARIABLE","$p_entry",3996],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",3996],"]",")",";",["T_WHITESPACE","\n    ",3996],"@",["T_STRING","fwrite",3997],"(",["T_VARIABLE","$v_dest_file",3997],",",["T_WHITESPACE"," ",3997],["T_VARIABLE","$v_binary_data",3997],",",["T_WHITESPACE"," ",3997],["T_LNUMBER","8",3997],")",";",["T_WHITESPACE","\n\n    ",3997],["T_COMMENT","\/\/ ----- Close the temporary file\n",3999],["T_WHITESPACE","    ",4000],"@",["T_STRING","fclose",4000],"(",["T_VARIABLE","$v_dest_file",4000],")",";",["T_WHITESPACE","\n\n    ",4000],["T_COMMENT","\/\/ ----- Opening destination file\n",4002],["T_WHITESPACE","    ",4003],["T_IF","if",4003],["T_WHITESPACE"," ",4003],"(","(",["T_VARIABLE","$v_dest_file",4003],["T_WHITESPACE"," ",4003],"=",["T_WHITESPACE"," ",4003],"@",["T_STRING","fopen",4003],"(",["T_VARIABLE","$p_entry",4003],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4003],"]",",",["T_WHITESPACE"," ",4003],["T_CONSTANT_ENCAPSED_STRING","'wb'",4003],")",")",["T_WHITESPACE"," ",4003],["T_IS_EQUAL","==",4003],["T_WHITESPACE"," ",4003],["T_LNUMBER","0",4003],")",["T_WHITESPACE"," ",4003],"{",["T_WHITESPACE","\n      ",4003],["T_VARIABLE","$p_entry",4004],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4004],"]",["T_WHITESPACE"," ",4004],"=",["T_WHITESPACE"," ",4004],["T_CONSTANT_ENCAPSED_STRING","\"write_error\"",4004],";",["T_WHITESPACE","\n      ",4004],["T_RETURN","return",4005],["T_WHITESPACE"," ",4005],["T_VARIABLE","$v_result",4005],";",["T_WHITESPACE","\n    ",4005],"}",["T_WHITESPACE","\n\n    ",4006],["T_COMMENT","\/\/ ----- Open the temporary gz file\n",4008],["T_WHITESPACE","    ",4009],["T_IF","if",4009],["T_WHITESPACE"," ",4009],"(","(",["T_VARIABLE","$v_src_file",4009],["T_WHITESPACE"," ",4009],"=",["T_WHITESPACE"," ",4009],"@",["T_STRING","gzopen",4009],"(",["T_VARIABLE","$v_gzip_temp_name",4009],",",["T_WHITESPACE"," ",4009],["T_CONSTANT_ENCAPSED_STRING","'rb'",4009],")",")",["T_WHITESPACE"," ",4009],["T_IS_EQUAL","==",4009],["T_WHITESPACE"," ",4009],["T_LNUMBER","0",4009],")",["T_WHITESPACE"," ",4009],"{",["T_WHITESPACE","\n      ",4009],"@",["T_STRING","fclose",4010],"(",["T_VARIABLE","$v_dest_file",4010],")",";",["T_WHITESPACE","\n      ",4010],["T_VARIABLE","$p_entry",4011],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4011],"]",["T_WHITESPACE"," ",4011],"=",["T_WHITESPACE"," ",4011],["T_CONSTANT_ENCAPSED_STRING","\"read_error\"",4011],";",["T_WHITESPACE","\n      ",4011],["T_STRING","PclZip",4012],["T_DOUBLE_COLON","::",4012],["T_STRING","privErrorLog",4012],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",4012],",",["T_WHITESPACE"," ",4012],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",4012],".",["T_VARIABLE","$v_gzip_temp_name",4012],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary read mode'",4012],")",";",["T_WHITESPACE","\n      ",4012],["T_RETURN","return",4013],["T_WHITESPACE"," ",4013],["T_STRING","PclZip",4013],["T_DOUBLE_COLON","::",4013],["T_STRING","errorCode",4013],"(",")",";",["T_WHITESPACE","\n    ",4013],"}",["T_WHITESPACE","\n\n\n    ",4014],["T_COMMENT","\/\/ ----- Read the file by PCLZIP_READ_BLOCK_SIZE octets blocks\n",4017],["T_WHITESPACE","    ",4018],["T_VARIABLE","$v_size",4018],["T_WHITESPACE"," ",4018],"=",["T_WHITESPACE"," ",4018],["T_VARIABLE","$p_entry",4018],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4018],"]",";",["T_WHITESPACE","\n    ",4018],["T_WHILE","while",4019],["T_WHITESPACE"," ",4019],"(",["T_VARIABLE","$v_size",4019],["T_WHITESPACE"," ",4019],["T_IS_NOT_EQUAL","!=",4019],["T_WHITESPACE"," ",4019],["T_LNUMBER","0",4019],")",["T_WHITESPACE"," ",4019],"{",["T_WHITESPACE","\n      ",4019],["T_VARIABLE","$v_read_size",4020],["T_WHITESPACE"," ",4020],"=",["T_WHITESPACE"," ",4020],"(",["T_VARIABLE","$v_size",4020],["T_WHITESPACE"," ",4020],"<",["T_WHITESPACE"," ",4020],["T_STRING","PCLZIP_READ_BLOCK_SIZE",4020],["T_WHITESPACE"," ",4020],"?",["T_WHITESPACE"," ",4020],["T_VARIABLE","$v_size",4020],["T_WHITESPACE"," ",4020],":",["T_WHITESPACE"," ",4020],["T_STRING","PCLZIP_READ_BLOCK_SIZE",4020],")",";",["T_WHITESPACE","\n      ",4020],["T_VARIABLE","$v_buffer",4021],["T_WHITESPACE"," ",4021],"=",["T_WHITESPACE"," ",4021],"@",["T_STRING","gzread",4021],"(",["T_VARIABLE","$v_src_file",4021],",",["T_WHITESPACE"," ",4021],["T_VARIABLE","$v_read_size",4021],")",";",["T_WHITESPACE","\n      ",4021],["T_COMMENT","\/\/$v_binary_data = pack('a'.$v_read_size, $v_buffer);\n",4022],["T_WHITESPACE","      ",4023],"@",["T_STRING","fwrite",4023],"(",["T_VARIABLE","$v_dest_file",4023],",",["T_WHITESPACE"," ",4023],["T_VARIABLE","$v_buffer",4023],",",["T_WHITESPACE"," ",4023],["T_VARIABLE","$v_read_size",4023],")",";",["T_WHITESPACE","\n      ",4023],["T_VARIABLE","$v_size",4024],["T_WHITESPACE"," ",4024],["T_MINUS_EQUAL","-=",4024],["T_WHITESPACE"," ",4024],["T_VARIABLE","$v_read_size",4024],";",["T_WHITESPACE","\n    ",4024],"}",["T_WHITESPACE","\n    ",4025],"@",["T_STRING","fclose",4026],"(",["T_VARIABLE","$v_dest_file",4026],")",";",["T_WHITESPACE","\n    ",4026],"@",["T_STRING","gzclose",4027],"(",["T_VARIABLE","$v_src_file",4027],")",";",["T_WHITESPACE","\n\n    ",4027],["T_COMMENT","\/\/ ----- Delete the temporary file\n",4029],["T_WHITESPACE","    ",4030],"@",["T_STRING","unlink",4030],"(",["T_VARIABLE","$v_gzip_temp_name",4030],")",";",["T_WHITESPACE","\n\n    ",4030],["T_COMMENT","\/\/ ----- Return\n",4032],["T_WHITESPACE","    ",4033],["T_RETURN","return",4033],["T_WHITESPACE"," ",4033],["T_VARIABLE","$v_result",4033],";",["T_WHITESPACE","\n  ",4033],"}",["T_WHITESPACE","\n  ",4034],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4035],["T_WHITESPACE","\n  ",4036],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4037],["T_WHITESPACE","  ",4038],["T_COMMENT","\/\/ Function : privExtractFileInOutput()\n",4038],["T_WHITESPACE","  ",4039],["T_COMMENT","\/\/ Description :\n",4039],["T_WHITESPACE","  ",4040],["T_COMMENT","\/\/ Parameters :\n",4040],["T_WHITESPACE","  ",4041],["T_COMMENT","\/\/ Return Values :\n",4041],["T_WHITESPACE","  ",4042],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4042],["T_WHITESPACE","  ",4043],["T_FUNCTION","function",4043],["T_WHITESPACE"," ",4043],["T_STRING","privExtractFileInOutput",4043],"(","&",["T_VARIABLE","$p_entry",4043],",",["T_WHITESPACE"," ",4043],"&",["T_VARIABLE","$p_options",4043],")",["T_WHITESPACE","\n  ",4043],"{",["T_WHITESPACE","\n    ",4044],["T_VARIABLE","$v_result",4045],"=",["T_LNUMBER","1",4045],";",["T_WHITESPACE","\n\n    ",4045],["T_COMMENT","\/\/ ----- Read the file header\n",4047],["T_WHITESPACE","    ",4048],["T_IF","if",4048],["T_WHITESPACE"," ",4048],"(","(",["T_VARIABLE","$v_result",4048],["T_WHITESPACE"," ",4048],"=",["T_WHITESPACE"," ",4048],["T_VARIABLE","$this",4048],["T_OBJECT_OPERATOR","->",4048],["T_STRING","privReadFileHeader",4048],"(",["T_VARIABLE","$v_header",4048],")",")",["T_WHITESPACE"," ",4048],["T_IS_NOT_EQUAL","!=",4048],["T_WHITESPACE"," ",4048],["T_LNUMBER","1",4048],")",["T_WHITESPACE"," ",4048],"{",["T_WHITESPACE","\n      ",4048],["T_RETURN","return",4049],["T_WHITESPACE"," ",4049],["T_VARIABLE","$v_result",4049],";",["T_WHITESPACE","\n    ",4049],"}",["T_WHITESPACE","\n\n\n    ",4050],["T_COMMENT","\/\/ ----- Check that the file header is coherent with $p_entry info\n",4053],["T_WHITESPACE","    ",4054],["T_IF","if",4054],["T_WHITESPACE"," ",4054],"(",["T_VARIABLE","$this",4054],["T_OBJECT_OPERATOR","->",4054],["T_STRING","privCheckFileHeaders",4054],"(",["T_VARIABLE","$v_header",4054],",",["T_WHITESPACE"," ",4054],["T_VARIABLE","$p_entry",4054],")",["T_WHITESPACE"," ",4054],["T_IS_NOT_EQUAL","!=",4054],["T_WHITESPACE"," ",4054],["T_LNUMBER","1",4054],")",["T_WHITESPACE"," ",4054],"{",["T_WHITESPACE","\n        ",4054],["T_COMMENT","\/\/ TBC\n",4055],["T_WHITESPACE","    ",4056],"}",["T_WHITESPACE","\n\n    ",4056],["T_COMMENT","\/\/ ----- Look for pre-extract callback\n",4058],["T_WHITESPACE","    ",4059],["T_IF","if",4059],["T_WHITESPACE"," ",4059],"(",["T_ISSET","isset",4059],"(",["T_VARIABLE","$p_options",4059],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4059],"]",")",")",["T_WHITESPACE"," ",4059],"{",["T_WHITESPACE","\n\n      ",4059],["T_COMMENT","\/\/ ----- Generate a local information\n",4061],["T_WHITESPACE","      ",4062],["T_VARIABLE","$v_local_header",4062],["T_WHITESPACE"," ",4062],"=",["T_WHITESPACE"," ",4062],["T_ARRAY","array",4062],"(",")",";",["T_WHITESPACE","\n      ",4062],["T_VARIABLE","$this",4063],["T_OBJECT_OPERATOR","->",4063],["T_STRING","privConvertHeader2FileInfo",4063],"(",["T_VARIABLE","$p_entry",4063],",",["T_WHITESPACE"," ",4063],["T_VARIABLE","$v_local_header",4063],")",";",["T_WHITESPACE","\n\n      ",4063],["T_COMMENT","\/\/ ----- Call the callback\n",4065],["T_WHITESPACE","      ",4066],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",4066],["T_WHITESPACE","      ",4067],["T_COMMENT","\/\/ header.\n",4067],["T_COMMENT","\/\/      eval('$v_result = '.$p_options[PCLZIP_CB_PRE_EXTRACT].'(PCLZIP_CB_PRE_EXTRACT, $v_local_header);');\n",4068],["T_WHITESPACE","      ",4069],["T_VARIABLE","$v_result",4069],["T_WHITESPACE"," ",4069],"=",["T_WHITESPACE"," ",4069],["T_VARIABLE","$p_options",4069],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4069],"]","(",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4069],",",["T_WHITESPACE"," ",4069],["T_VARIABLE","$v_local_header",4069],")",";",["T_WHITESPACE","\n      ",4069],["T_IF","if",4070],["T_WHITESPACE"," ",4070],"(",["T_VARIABLE","$v_result",4070],["T_WHITESPACE"," ",4070],["T_IS_EQUAL","==",4070],["T_WHITESPACE"," ",4070],["T_LNUMBER","0",4070],")",["T_WHITESPACE"," ",4070],"{",["T_WHITESPACE","\n        ",4070],["T_COMMENT","\/\/ ----- Change the file status\n",4071],["T_WHITESPACE","        ",4072],["T_VARIABLE","$p_entry",4072],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4072],"]",["T_WHITESPACE"," ",4072],"=",["T_WHITESPACE"," ",4072],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",4072],";",["T_WHITESPACE","\n        ",4072],["T_VARIABLE","$v_result",4073],["T_WHITESPACE"," ",4073],"=",["T_WHITESPACE"," ",4073],["T_LNUMBER","1",4073],";",["T_WHITESPACE","\n      ",4073],"}",["T_WHITESPACE","\n\n      ",4074],["T_COMMENT","\/\/ ----- Look for abort result\n",4076],["T_WHITESPACE","      ",4077],["T_IF","if",4077],["T_WHITESPACE"," ",4077],"(",["T_VARIABLE","$v_result",4077],["T_WHITESPACE"," ",4077],["T_IS_EQUAL","==",4077],["T_WHITESPACE"," ",4077],["T_LNUMBER","2",4077],")",["T_WHITESPACE"," ",4077],"{",["T_WHITESPACE","\n        ",4077],["T_COMMENT","\/\/ ----- This status is internal and will be changed in 'skipped'\n",4078],["T_WHITESPACE","        ",4079],["T_VARIABLE","$p_entry",4079],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4079],"]",["T_WHITESPACE"," ",4079],"=",["T_WHITESPACE"," ",4079],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",4079],";",["T_WHITESPACE","\n      \t",4079],["T_VARIABLE","$v_result",4080],["T_WHITESPACE"," ",4080],"=",["T_WHITESPACE"," ",4080],["T_STRING","PCLZIP_ERR_USER_ABORTED",4080],";",["T_WHITESPACE","\n      ",4080],"}",["T_WHITESPACE","\n\n      ",4081],["T_COMMENT","\/\/ ----- Update the informations\n",4083],["T_WHITESPACE","      ",4084],["T_COMMENT","\/\/ Only some fields can be modified\n",4084],["T_WHITESPACE","      ",4085],["T_VARIABLE","$p_entry",4085],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4085],"]",["T_WHITESPACE"," ",4085],"=",["T_WHITESPACE"," ",4085],["T_VARIABLE","$v_local_header",4085],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4085],"]",";",["T_WHITESPACE","\n    ",4085],"}",["T_WHITESPACE","\n\n    ",4086],["T_COMMENT","\/\/ ----- Trace\n",4088],["T_WHITESPACE","\n    ",4089],["T_COMMENT","\/\/ ----- Look if extraction should be done\n",4090],["T_WHITESPACE","    ",4091],["T_IF","if",4091],["T_WHITESPACE"," ",4091],"(",["T_VARIABLE","$p_entry",4091],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4091],"]",["T_WHITESPACE"," ",4091],["T_IS_EQUAL","==",4091],["T_WHITESPACE"," ",4091],["T_CONSTANT_ENCAPSED_STRING","'ok'",4091],")",["T_WHITESPACE"," ",4091],"{",["T_WHITESPACE","\n\n      ",4091],["T_COMMENT","\/\/ ----- Do the extraction (if not a folder)\n",4093],["T_WHITESPACE","      ",4094],["T_IF","if",4094],["T_WHITESPACE"," ",4094],"(","!","(","(",["T_VARIABLE","$p_entry",4094],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",4094],"]","&",["T_LNUMBER","0x00000010",4094],")",["T_IS_EQUAL","==",4094],["T_LNUMBER","0x00000010",4094],")",")",["T_WHITESPACE"," ",4094],"{",["T_WHITESPACE","\n        ",4094],["T_COMMENT","\/\/ ----- Look for not compressed file\n",4095],["T_WHITESPACE","        ",4096],["T_IF","if",4096],["T_WHITESPACE"," ",4096],"(",["T_VARIABLE","$p_entry",4096],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4096],"]",["T_WHITESPACE"," ",4096],["T_IS_EQUAL","==",4096],["T_WHITESPACE"," ",4096],["T_VARIABLE","$p_entry",4096],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4096],"]",")",["T_WHITESPACE"," ",4096],"{",["T_WHITESPACE","\n\n          ",4096],["T_COMMENT","\/\/ ----- Read the file in a buffer (one shot)\n",4098],["T_WHITESPACE","          ",4099],["T_VARIABLE","$v_buffer",4099],["T_WHITESPACE"," ",4099],"=",["T_WHITESPACE"," ",4099],"@",["T_STRING","fread",4099],"(",["T_VARIABLE","$this",4099],["T_OBJECT_OPERATOR","->",4099],["T_STRING","zip_fd",4099],",",["T_WHITESPACE"," ",4099],["T_VARIABLE","$p_entry",4099],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4099],"]",")",";",["T_WHITESPACE","\n\n          ",4099],["T_COMMENT","\/\/ ----- Send the file to the output\n",4101],["T_WHITESPACE","          ",4102],["T_ECHO","echo",4102],["T_WHITESPACE"," ",4102],["T_VARIABLE","$v_buffer",4102],";",["T_WHITESPACE","\n          ",4102],["T_UNSET","unset",4103],"(",["T_VARIABLE","$v_buffer",4103],")",";",["T_WHITESPACE","\n        ",4103],"}",["T_WHITESPACE","\n        ",4104],["T_ELSE","else",4105],["T_WHITESPACE"," ",4105],"{",["T_WHITESPACE","\n\n          ",4105],["T_COMMENT","\/\/ ----- Read the compressed file in a buffer (one shot)\n",4107],["T_WHITESPACE","          ",4108],["T_VARIABLE","$v_buffer",4108],["T_WHITESPACE"," ",4108],"=",["T_WHITESPACE"," ",4108],"@",["T_STRING","fread",4108],"(",["T_VARIABLE","$this",4108],["T_OBJECT_OPERATOR","->",4108],["T_STRING","zip_fd",4108],",",["T_WHITESPACE"," ",4108],["T_VARIABLE","$p_entry",4108],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4108],"]",")",";",["T_WHITESPACE","\n\n          ",4108],["T_COMMENT","\/\/ ----- Decompress the file\n",4110],["T_WHITESPACE","          ",4111],["T_VARIABLE","$v_file_content",4111],["T_WHITESPACE"," ",4111],"=",["T_WHITESPACE"," ",4111],["T_STRING","gzinflate",4111],"(",["T_VARIABLE","$v_buffer",4111],")",";",["T_WHITESPACE","\n          ",4111],["T_UNSET","unset",4112],"(",["T_VARIABLE","$v_buffer",4112],")",";",["T_WHITESPACE","\n\n          ",4112],["T_COMMENT","\/\/ ----- Send the file to the output\n",4114],["T_WHITESPACE","          ",4115],["T_ECHO","echo",4115],["T_WHITESPACE"," ",4115],["T_VARIABLE","$v_file_content",4115],";",["T_WHITESPACE","\n          ",4115],["T_UNSET","unset",4116],"(",["T_VARIABLE","$v_file_content",4116],")",";",["T_WHITESPACE","\n        ",4116],"}",["T_WHITESPACE","\n      ",4117],"}",["T_WHITESPACE","\n    ",4118],"}",["T_WHITESPACE","\n\n\t",4119],["T_COMMENT","\/\/ ----- Change abort status\n",4121],["T_WHITESPACE","\t",4122],["T_IF","if",4122],["T_WHITESPACE"," ",4122],"(",["T_VARIABLE","$p_entry",4122],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4122],"]",["T_WHITESPACE"," ",4122],["T_IS_EQUAL","==",4122],["T_WHITESPACE"," ",4122],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",4122],")",["T_WHITESPACE"," ",4122],"{",["T_WHITESPACE","\n      ",4122],["T_VARIABLE","$p_entry",4123],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4123],"]",["T_WHITESPACE"," ",4123],"=",["T_WHITESPACE"," ",4123],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",4123],";",["T_WHITESPACE","\n\t",4123],"}",["T_WHITESPACE","\n\n    ",4124],["T_COMMENT","\/\/ ----- Look for post-extract callback\n",4126],["T_WHITESPACE","    ",4127],["T_ELSEIF","elseif",4127],["T_WHITESPACE"," ",4127],"(",["T_ISSET","isset",4127],"(",["T_VARIABLE","$p_options",4127],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",4127],"]",")",")",["T_WHITESPACE"," ",4127],"{",["T_WHITESPACE","\n\n      ",4127],["T_COMMENT","\/\/ ----- Generate a local information\n",4129],["T_WHITESPACE","      ",4130],["T_VARIABLE","$v_local_header",4130],["T_WHITESPACE"," ",4130],"=",["T_WHITESPACE"," ",4130],["T_ARRAY","array",4130],"(",")",";",["T_WHITESPACE","\n      ",4130],["T_VARIABLE","$this",4131],["T_OBJECT_OPERATOR","->",4131],["T_STRING","privConvertHeader2FileInfo",4131],"(",["T_VARIABLE","$p_entry",4131],",",["T_WHITESPACE"," ",4131],["T_VARIABLE","$v_local_header",4131],")",";",["T_WHITESPACE","\n\n      ",4131],["T_COMMENT","\/\/ ----- Call the callback\n",4133],["T_WHITESPACE","      ",4134],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",4134],["T_WHITESPACE","      ",4135],["T_COMMENT","\/\/ header.\n",4135],["T_WHITESPACE","      ",4136],["T_VARIABLE","$v_result",4136],["T_WHITESPACE"," ",4136],"=",["T_WHITESPACE"," ",4136],["T_VARIABLE","$p_options",4136],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",4136],"]","(",["T_STRING","PCLZIP_CB_POST_EXTRACT",4136],",",["T_WHITESPACE"," ",4136],["T_VARIABLE","$v_local_header",4136],")",";",["T_WHITESPACE","\n\n      ",4136],["T_COMMENT","\/\/ ----- Look for abort result\n",4138],["T_WHITESPACE","      ",4139],["T_IF","if",4139],["T_WHITESPACE"," ",4139],"(",["T_VARIABLE","$v_result",4139],["T_WHITESPACE"," ",4139],["T_IS_EQUAL","==",4139],["T_WHITESPACE"," ",4139],["T_LNUMBER","2",4139],")",["T_WHITESPACE"," ",4139],"{",["T_WHITESPACE","\n      \t",4139],["T_VARIABLE","$v_result",4140],["T_WHITESPACE"," ",4140],"=",["T_WHITESPACE"," ",4140],["T_STRING","PCLZIP_ERR_USER_ABORTED",4140],";",["T_WHITESPACE","\n      ",4140],"}",["T_WHITESPACE","\n    ",4141],"}",["T_WHITESPACE","\n\n    ",4142],["T_RETURN","return",4144],["T_WHITESPACE"," ",4144],["T_VARIABLE","$v_result",4144],";",["T_WHITESPACE","\n  ",4144],"}",["T_WHITESPACE","\n  ",4145],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4146],["T_WHITESPACE","\n  ",4147],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4148],["T_WHITESPACE","  ",4149],["T_COMMENT","\/\/ Function : privExtractFileAsString()\n",4149],["T_WHITESPACE","  ",4150],["T_COMMENT","\/\/ Description :\n",4150],["T_WHITESPACE","  ",4151],["T_COMMENT","\/\/ Parameters :\n",4151],["T_WHITESPACE","  ",4152],["T_COMMENT","\/\/ Return Values :\n",4152],["T_WHITESPACE","  ",4153],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4153],["T_WHITESPACE","  ",4154],["T_FUNCTION","function",4154],["T_WHITESPACE"," ",4154],["T_STRING","privExtractFileAsString",4154],"(","&",["T_VARIABLE","$p_entry",4154],",",["T_WHITESPACE"," ",4154],"&",["T_VARIABLE","$p_string",4154],",",["T_WHITESPACE"," ",4154],"&",["T_VARIABLE","$p_options",4154],")",["T_WHITESPACE","\n  ",4154],"{",["T_WHITESPACE","\n    ",4155],["T_VARIABLE","$v_result",4156],"=",["T_LNUMBER","1",4156],";",["T_WHITESPACE","\n\n    ",4156],["T_COMMENT","\/\/ ----- Read the file header\n",4158],["T_WHITESPACE","    ",4159],["T_VARIABLE","$v_header",4159],["T_WHITESPACE"," ",4159],"=",["T_WHITESPACE"," ",4159],["T_ARRAY","array",4159],"(",")",";",["T_WHITESPACE","\n    ",4159],["T_IF","if",4160],["T_WHITESPACE"," ",4160],"(","(",["T_VARIABLE","$v_result",4160],["T_WHITESPACE"," ",4160],"=",["T_WHITESPACE"," ",4160],["T_VARIABLE","$this",4160],["T_OBJECT_OPERATOR","->",4160],["T_STRING","privReadFileHeader",4160],"(",["T_VARIABLE","$v_header",4160],")",")",["T_WHITESPACE"," ",4160],["T_IS_NOT_EQUAL","!=",4160],["T_WHITESPACE"," ",4160],["T_LNUMBER","1",4160],")",["T_WHITESPACE","\n    ",4160],"{",["T_WHITESPACE","\n      ",4161],["T_COMMENT","\/\/ ----- Return\n",4162],["T_WHITESPACE","      ",4163],["T_RETURN","return",4163],["T_WHITESPACE"," ",4163],["T_VARIABLE","$v_result",4163],";",["T_WHITESPACE","\n    ",4163],"}",["T_WHITESPACE","\n\n\n    ",4164],["T_COMMENT","\/\/ ----- Check that the file header is coherent with $p_entry info\n",4167],["T_WHITESPACE","    ",4168],["T_IF","if",4168],["T_WHITESPACE"," ",4168],"(",["T_VARIABLE","$this",4168],["T_OBJECT_OPERATOR","->",4168],["T_STRING","privCheckFileHeaders",4168],"(",["T_VARIABLE","$v_header",4168],",",["T_WHITESPACE"," ",4168],["T_VARIABLE","$p_entry",4168],")",["T_WHITESPACE"," ",4168],["T_IS_NOT_EQUAL","!=",4168],["T_WHITESPACE"," ",4168],["T_LNUMBER","1",4168],")",["T_WHITESPACE"," ",4168],"{",["T_WHITESPACE","\n        ",4168],["T_COMMENT","\/\/ TBC\n",4169],["T_WHITESPACE","    ",4170],"}",["T_WHITESPACE","\n\n    ",4170],["T_COMMENT","\/\/ ----- Look for pre-extract callback\n",4172],["T_WHITESPACE","    ",4173],["T_IF","if",4173],["T_WHITESPACE"," ",4173],"(",["T_ISSET","isset",4173],"(",["T_VARIABLE","$p_options",4173],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4173],"]",")",")",["T_WHITESPACE"," ",4173],"{",["T_WHITESPACE","\n\n      ",4173],["T_COMMENT","\/\/ ----- Generate a local information\n",4175],["T_WHITESPACE","      ",4176],["T_VARIABLE","$v_local_header",4176],["T_WHITESPACE"," ",4176],"=",["T_WHITESPACE"," ",4176],["T_ARRAY","array",4176],"(",")",";",["T_WHITESPACE","\n      ",4176],["T_VARIABLE","$this",4177],["T_OBJECT_OPERATOR","->",4177],["T_STRING","privConvertHeader2FileInfo",4177],"(",["T_VARIABLE","$p_entry",4177],",",["T_WHITESPACE"," ",4177],["T_VARIABLE","$v_local_header",4177],")",";",["T_WHITESPACE","\n\n      ",4177],["T_COMMENT","\/\/ ----- Call the callback\n",4179],["T_WHITESPACE","      ",4180],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",4180],["T_WHITESPACE","      ",4181],["T_COMMENT","\/\/ header.\n",4181],["T_WHITESPACE","      ",4182],["T_VARIABLE","$v_result",4182],["T_WHITESPACE"," ",4182],"=",["T_WHITESPACE"," ",4182],["T_VARIABLE","$p_options",4182],"[",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4182],"]","(",["T_STRING","PCLZIP_CB_PRE_EXTRACT",4182],",",["T_WHITESPACE"," ",4182],["T_VARIABLE","$v_local_header",4182],")",";",["T_WHITESPACE","\n      ",4182],["T_IF","if",4183],["T_WHITESPACE"," ",4183],"(",["T_VARIABLE","$v_result",4183],["T_WHITESPACE"," ",4183],["T_IS_EQUAL","==",4183],["T_WHITESPACE"," ",4183],["T_LNUMBER","0",4183],")",["T_WHITESPACE"," ",4183],"{",["T_WHITESPACE","\n        ",4183],["T_COMMENT","\/\/ ----- Change the file status\n",4184],["T_WHITESPACE","        ",4185],["T_VARIABLE","$p_entry",4185],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4185],"]",["T_WHITESPACE"," ",4185],"=",["T_WHITESPACE"," ",4185],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",4185],";",["T_WHITESPACE","\n        ",4185],["T_VARIABLE","$v_result",4186],["T_WHITESPACE"," ",4186],"=",["T_WHITESPACE"," ",4186],["T_LNUMBER","1",4186],";",["T_WHITESPACE","\n      ",4186],"}",["T_WHITESPACE","\n\n      ",4187],["T_COMMENT","\/\/ ----- Look for abort result\n",4189],["T_WHITESPACE","      ",4190],["T_IF","if",4190],["T_WHITESPACE"," ",4190],"(",["T_VARIABLE","$v_result",4190],["T_WHITESPACE"," ",4190],["T_IS_EQUAL","==",4190],["T_WHITESPACE"," ",4190],["T_LNUMBER","2",4190],")",["T_WHITESPACE"," ",4190],"{",["T_WHITESPACE","\n        ",4190],["T_COMMENT","\/\/ ----- This status is internal and will be changed in 'skipped'\n",4191],["T_WHITESPACE","        ",4192],["T_VARIABLE","$p_entry",4192],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4192],"]",["T_WHITESPACE"," ",4192],"=",["T_WHITESPACE"," ",4192],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",4192],";",["T_WHITESPACE","\n      \t",4192],["T_VARIABLE","$v_result",4193],["T_WHITESPACE"," ",4193],"=",["T_WHITESPACE"," ",4193],["T_STRING","PCLZIP_ERR_USER_ABORTED",4193],";",["T_WHITESPACE","\n      ",4193],"}",["T_WHITESPACE","\n\n      ",4194],["T_COMMENT","\/\/ ----- Update the informations\n",4196],["T_WHITESPACE","      ",4197],["T_COMMENT","\/\/ Only some fields can be modified\n",4197],["T_WHITESPACE","      ",4198],["T_VARIABLE","$p_entry",4198],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4198],"]",["T_WHITESPACE"," ",4198],"=",["T_WHITESPACE"," ",4198],["T_VARIABLE","$v_local_header",4198],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4198],"]",";",["T_WHITESPACE","\n    ",4198],"}",["T_WHITESPACE","\n\n\n    ",4199],["T_COMMENT","\/\/ ----- Look if extraction should be done\n",4202],["T_WHITESPACE","    ",4203],["T_IF","if",4203],["T_WHITESPACE"," ",4203],"(",["T_VARIABLE","$p_entry",4203],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4203],"]",["T_WHITESPACE"," ",4203],["T_IS_EQUAL","==",4203],["T_WHITESPACE"," ",4203],["T_CONSTANT_ENCAPSED_STRING","'ok'",4203],")",["T_WHITESPACE"," ",4203],"{",["T_WHITESPACE","\n\n      ",4203],["T_COMMENT","\/\/ ----- Do the extraction (if not a folder)\n",4205],["T_WHITESPACE","      ",4206],["T_IF","if",4206],["T_WHITESPACE"," ",4206],"(","!","(","(",["T_VARIABLE","$p_entry",4206],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",4206],"]","&",["T_LNUMBER","0x00000010",4206],")",["T_IS_EQUAL","==",4206],["T_LNUMBER","0x00000010",4206],")",")",["T_WHITESPACE"," ",4206],"{",["T_WHITESPACE","\n        ",4206],["T_COMMENT","\/\/ ----- Look for not compressed file\n",4207],["T_WHITESPACE","  ",4208],["T_COMMENT","\/\/      if ($p_entry['compressed_size'] == $p_entry['size'])\n",4208],["T_WHITESPACE","        ",4209],["T_IF","if",4209],["T_WHITESPACE"," ",4209],"(",["T_VARIABLE","$p_entry",4209],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",4209],"]",["T_WHITESPACE"," ",4209],["T_IS_EQUAL","==",4209],["T_WHITESPACE"," ",4209],["T_LNUMBER","0",4209],")",["T_WHITESPACE"," ",4209],"{",["T_WHITESPACE","\n\n          ",4209],["T_COMMENT","\/\/ ----- Reading the file\n",4211],["T_WHITESPACE","          ",4212],["T_VARIABLE","$p_string",4212],["T_WHITESPACE"," ",4212],"=",["T_WHITESPACE"," ",4212],"@",["T_STRING","fread",4212],"(",["T_VARIABLE","$this",4212],["T_OBJECT_OPERATOR","->",4212],["T_STRING","zip_fd",4212],",",["T_WHITESPACE"," ",4212],["T_VARIABLE","$p_entry",4212],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4212],"]",")",";",["T_WHITESPACE","\n        ",4212],"}",["T_WHITESPACE","\n        ",4213],["T_ELSE","else",4214],["T_WHITESPACE"," ",4214],"{",["T_WHITESPACE","\n\n          ",4214],["T_COMMENT","\/\/ ----- Reading the file\n",4216],["T_WHITESPACE","          ",4217],["T_VARIABLE","$v_data",4217],["T_WHITESPACE"," ",4217],"=",["T_WHITESPACE"," ",4217],"@",["T_STRING","fread",4217],"(",["T_VARIABLE","$this",4217],["T_OBJECT_OPERATOR","->",4217],["T_STRING","zip_fd",4217],",",["T_WHITESPACE"," ",4217],["T_VARIABLE","$p_entry",4217],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4217],"]",")",";",["T_WHITESPACE","\n\n          ",4217],["T_COMMENT","\/\/ ----- Decompress the file\n",4219],["T_WHITESPACE","          ",4220],["T_IF","if",4220],["T_WHITESPACE"," ",4220],"(","(",["T_VARIABLE","$p_string",4220],["T_WHITESPACE"," ",4220],"=",["T_WHITESPACE"," ",4220],"@",["T_STRING","gzinflate",4220],"(",["T_VARIABLE","$v_data",4220],")",")",["T_WHITESPACE"," ",4220],["T_IS_IDENTICAL","===",4220],["T_WHITESPACE"," ",4220],["T_STRING","FALSE",4220],")",["T_WHITESPACE"," ",4220],"{",["T_WHITESPACE","\n              ",4220],["T_COMMENT","\/\/ TBC\n",4221],["T_WHITESPACE","          ",4222],"}",["T_WHITESPACE","\n        ",4222],"}",["T_WHITESPACE","\n\n        ",4223],["T_COMMENT","\/\/ ----- Trace\n",4225],["T_WHITESPACE","      ",4226],"}",["T_WHITESPACE","\n      ",4226],["T_ELSE","else",4227],["T_WHITESPACE"," ",4227],"{",["T_WHITESPACE","\n          ",4227],["T_COMMENT","\/\/ TBC : error : can not extract a folder in a string\n",4228],["T_WHITESPACE","      ",4229],"}",["T_WHITESPACE","\n\n    ",4229],"}",["T_WHITESPACE","\n\n  \t",4231],["T_COMMENT","\/\/ ----- Change abort status\n",4233],["T_WHITESPACE","  \t",4234],["T_IF","if",4234],["T_WHITESPACE"," ",4234],"(",["T_VARIABLE","$p_entry",4234],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4234],"]",["T_WHITESPACE"," ",4234],["T_IS_EQUAL","==",4234],["T_WHITESPACE"," ",4234],["T_CONSTANT_ENCAPSED_STRING","\"aborted\"",4234],")",["T_WHITESPACE"," ",4234],"{",["T_WHITESPACE","\n        ",4234],["T_VARIABLE","$p_entry",4235],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4235],"]",["T_WHITESPACE"," ",4235],"=",["T_WHITESPACE"," ",4235],["T_CONSTANT_ENCAPSED_STRING","\"skipped\"",4235],";",["T_WHITESPACE","\n  \t",4235],"}",["T_WHITESPACE","\n\n    ",4236],["T_COMMENT","\/\/ ----- Look for post-extract callback\n",4238],["T_WHITESPACE","    ",4239],["T_ELSEIF","elseif",4239],["T_WHITESPACE"," ",4239],"(",["T_ISSET","isset",4239],"(",["T_VARIABLE","$p_options",4239],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",4239],"]",")",")",["T_WHITESPACE"," ",4239],"{",["T_WHITESPACE","\n\n      ",4239],["T_COMMENT","\/\/ ----- Generate a local information\n",4241],["T_WHITESPACE","      ",4242],["T_VARIABLE","$v_local_header",4242],["T_WHITESPACE"," ",4242],"=",["T_WHITESPACE"," ",4242],["T_ARRAY","array",4242],"(",")",";",["T_WHITESPACE","\n      ",4242],["T_VARIABLE","$this",4243],["T_OBJECT_OPERATOR","->",4243],["T_STRING","privConvertHeader2FileInfo",4243],"(",["T_VARIABLE","$p_entry",4243],",",["T_WHITESPACE"," ",4243],["T_VARIABLE","$v_local_header",4243],")",";",["T_WHITESPACE","\n\n      ",4243],["T_COMMENT","\/\/ ----- Swap the content to header\n",4245],["T_WHITESPACE","      ",4246],["T_VARIABLE","$v_local_header",4246],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",4246],"]",["T_WHITESPACE"," ",4246],"=",["T_WHITESPACE"," ",4246],["T_VARIABLE","$p_string",4246],";",["T_WHITESPACE","\n      ",4246],["T_VARIABLE","$p_string",4247],["T_WHITESPACE"," ",4247],"=",["T_WHITESPACE"," ",4247],["T_CONSTANT_ENCAPSED_STRING","''",4247],";",["T_WHITESPACE","\n\n      ",4247],["T_COMMENT","\/\/ ----- Call the callback\n",4249],["T_WHITESPACE","      ",4250],["T_COMMENT","\/\/ Here I do not use call_user_func() because I need to send a reference to the\n",4250],["T_WHITESPACE","      ",4251],["T_COMMENT","\/\/ header.\n",4251],["T_WHITESPACE","      ",4252],["T_VARIABLE","$v_result",4252],["T_WHITESPACE"," ",4252],"=",["T_WHITESPACE"," ",4252],["T_VARIABLE","$p_options",4252],"[",["T_STRING","PCLZIP_CB_POST_EXTRACT",4252],"]","(",["T_STRING","PCLZIP_CB_POST_EXTRACT",4252],",",["T_WHITESPACE"," ",4252],["T_VARIABLE","$v_local_header",4252],")",";",["T_WHITESPACE","\n\n      ",4252],["T_COMMENT","\/\/ ----- Swap back the content to header\n",4254],["T_WHITESPACE","      ",4255],["T_VARIABLE","$p_string",4255],["T_WHITESPACE"," ",4255],"=",["T_WHITESPACE"," ",4255],["T_VARIABLE","$v_local_header",4255],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",4255],"]",";",["T_WHITESPACE","\n      ",4255],["T_UNSET","unset",4256],"(",["T_VARIABLE","$v_local_header",4256],"[",["T_CONSTANT_ENCAPSED_STRING","'content'",4256],"]",")",";",["T_WHITESPACE","\n\n      ",4256],["T_COMMENT","\/\/ ----- Look for abort result\n",4258],["T_WHITESPACE","      ",4259],["T_IF","if",4259],["T_WHITESPACE"," ",4259],"(",["T_VARIABLE","$v_result",4259],["T_WHITESPACE"," ",4259],["T_IS_EQUAL","==",4259],["T_WHITESPACE"," ",4259],["T_LNUMBER","2",4259],")",["T_WHITESPACE"," ",4259],"{",["T_WHITESPACE","\n      \t",4259],["T_VARIABLE","$v_result",4260],["T_WHITESPACE"," ",4260],"=",["T_WHITESPACE"," ",4260],["T_STRING","PCLZIP_ERR_USER_ABORTED",4260],";",["T_WHITESPACE","\n      ",4260],"}",["T_WHITESPACE","\n    ",4261],"}",["T_WHITESPACE","\n\n    ",4262],["T_COMMENT","\/\/ ----- Return\n",4264],["T_WHITESPACE","    ",4265],["T_RETURN","return",4265],["T_WHITESPACE"," ",4265],["T_VARIABLE","$v_result",4265],";",["T_WHITESPACE","\n  ",4265],"}",["T_WHITESPACE","\n  ",4266],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4267],["T_WHITESPACE","\n  ",4268],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4269],["T_WHITESPACE","  ",4270],["T_COMMENT","\/\/ Function : privReadFileHeader()\n",4270],["T_WHITESPACE","  ",4271],["T_COMMENT","\/\/ Description :\n",4271],["T_WHITESPACE","  ",4272],["T_COMMENT","\/\/ Parameters :\n",4272],["T_WHITESPACE","  ",4273],["T_COMMENT","\/\/ Return Values :\n",4273],["T_WHITESPACE","  ",4274],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4274],["T_WHITESPACE","  ",4275],["T_FUNCTION","function",4275],["T_WHITESPACE"," ",4275],["T_STRING","privReadFileHeader",4275],"(","&",["T_VARIABLE","$p_header",4275],")",["T_WHITESPACE","\n  ",4275],"{",["T_WHITESPACE","\n    ",4276],["T_VARIABLE","$v_result",4277],"=",["T_LNUMBER","1",4277],";",["T_WHITESPACE","\n\n    ",4277],["T_COMMENT","\/\/ ----- Read the 4 bytes signature\n",4279],["T_WHITESPACE","    ",4280],["T_VARIABLE","$v_binary_data",4280],["T_WHITESPACE"," ",4280],"=",["T_WHITESPACE"," ",4280],"@",["T_STRING","fread",4280],"(",["T_VARIABLE","$this",4280],["T_OBJECT_OPERATOR","->",4280],["T_STRING","zip_fd",4280],",",["T_WHITESPACE"," ",4280],["T_LNUMBER","4",4280],")",";",["T_WHITESPACE","\n    ",4280],["T_VARIABLE","$v_data",4281],["T_WHITESPACE"," ",4281],"=",["T_WHITESPACE"," ",4281],["T_STRING","unpack",4281],"(",["T_CONSTANT_ENCAPSED_STRING","'Vid'",4281],",",["T_WHITESPACE"," ",4281],["T_VARIABLE","$v_binary_data",4281],")",";",["T_WHITESPACE","\n\n    ",4281],["T_COMMENT","\/\/ ----- Check signature\n",4283],["T_WHITESPACE","    ",4284],["T_IF","if",4284],["T_WHITESPACE"," ",4284],"(",["T_VARIABLE","$v_data",4284],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",4284],"]",["T_WHITESPACE"," ",4284],["T_IS_NOT_EQUAL","!=",4284],["T_WHITESPACE"," ",4284],["T_LNUMBER","0x04034b50",4284],")",["T_WHITESPACE","\n    ",4284],"{",["T_WHITESPACE","\n\n      ",4285],["T_COMMENT","\/\/ ----- Error log\n",4287],["T_WHITESPACE","      ",4288],["T_STRING","PclZip",4288],["T_DOUBLE_COLON","::",4288],["T_STRING","privErrorLog",4288],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4288],",",["T_WHITESPACE"," ",4288],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive structure'",4288],")",";",["T_WHITESPACE","\n\n      ",4288],["T_COMMENT","\/\/ ----- Return\n",4290],["T_WHITESPACE","      ",4291],["T_RETURN","return",4291],["T_WHITESPACE"," ",4291],["T_STRING","PclZip",4291],["T_DOUBLE_COLON","::",4291],["T_STRING","errorCode",4291],"(",")",";",["T_WHITESPACE","\n    ",4291],"}",["T_WHITESPACE","\n\n    ",4292],["T_COMMENT","\/\/ ----- Read the first 42 bytes of the header\n",4294],["T_WHITESPACE","    ",4295],["T_VARIABLE","$v_binary_data",4295],["T_WHITESPACE"," ",4295],"=",["T_WHITESPACE"," ",4295],["T_STRING","fread",4295],"(",["T_VARIABLE","$this",4295],["T_OBJECT_OPERATOR","->",4295],["T_STRING","zip_fd",4295],",",["T_WHITESPACE"," ",4295],["T_LNUMBER","26",4295],")",";",["T_WHITESPACE","\n\n    ",4295],["T_COMMENT","\/\/ ----- Look for invalid block size\n",4297],["T_WHITESPACE","    ",4298],["T_IF","if",4298],["T_WHITESPACE"," ",4298],"(",["T_STRING","strlen",4298],"(",["T_VARIABLE","$v_binary_data",4298],")",["T_WHITESPACE"," ",4298],["T_IS_NOT_EQUAL","!=",4298],["T_WHITESPACE"," ",4298],["T_LNUMBER","26",4298],")",["T_WHITESPACE","\n    ",4298],"{",["T_WHITESPACE","\n      ",4299],["T_VARIABLE","$p_header",4300],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4300],"]",["T_WHITESPACE"," ",4300],"=",["T_WHITESPACE"," ",4300],["T_CONSTANT_ENCAPSED_STRING","\"\"",4300],";",["T_WHITESPACE","\n      ",4300],["T_VARIABLE","$p_header",4301],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4301],"]",["T_WHITESPACE"," ",4301],"=",["T_WHITESPACE"," ",4301],["T_CONSTANT_ENCAPSED_STRING","\"invalid_header\"",4301],";",["T_WHITESPACE","\n\n      ",4301],["T_COMMENT","\/\/ ----- Error log\n",4303],["T_WHITESPACE","      ",4304],["T_STRING","PclZip",4304],["T_DOUBLE_COLON","::",4304],["T_STRING","privErrorLog",4304],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4304],",",["T_WHITESPACE"," ",4304],["T_CONSTANT_ENCAPSED_STRING","\"Invalid block size : \"",4304],".",["T_STRING","strlen",4304],"(",["T_VARIABLE","$v_binary_data",4304],")",")",";",["T_WHITESPACE","\n\n      ",4304],["T_COMMENT","\/\/ ----- Return\n",4306],["T_WHITESPACE","      ",4307],["T_RETURN","return",4307],["T_WHITESPACE"," ",4307],["T_STRING","PclZip",4307],["T_DOUBLE_COLON","::",4307],["T_STRING","errorCode",4307],"(",")",";",["T_WHITESPACE","\n    ",4307],"}",["T_WHITESPACE","\n\n    ",4308],["T_COMMENT","\/\/ ----- Extract the values\n",4310],["T_WHITESPACE","    ",4311],["T_VARIABLE","$v_data",4311],["T_WHITESPACE"," ",4311],"=",["T_WHITESPACE"," ",4311],["T_STRING","unpack",4311],"(",["T_CONSTANT_ENCAPSED_STRING","'vversion\/vflag\/vcompression\/vmtime\/vmdate\/Vcrc\/Vcompressed_size\/Vsize\/vfilename_len\/vextra_len'",4311],",",["T_WHITESPACE"," ",4311],["T_VARIABLE","$v_binary_data",4311],")",";",["T_WHITESPACE","\n\n    ",4311],["T_COMMENT","\/\/ ----- Get filename\n",4313],["T_WHITESPACE","    ",4314],["T_VARIABLE","$p_header",4314],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4314],"]",["T_WHITESPACE"," ",4314],"=",["T_WHITESPACE"," ",4314],["T_STRING","fread",4314],"(",["T_VARIABLE","$this",4314],["T_OBJECT_OPERATOR","->",4314],["T_STRING","zip_fd",4314],",",["T_WHITESPACE"," ",4314],["T_VARIABLE","$v_data",4314],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4314],"]",")",";",["T_WHITESPACE","\n\n    ",4314],["T_COMMENT","\/\/ ----- Get extra_fields\n",4316],["T_WHITESPACE","    ",4317],["T_IF","if",4317],["T_WHITESPACE"," ",4317],"(",["T_VARIABLE","$v_data",4317],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",4317],"]",["T_WHITESPACE"," ",4317],["T_IS_NOT_EQUAL","!=",4317],["T_WHITESPACE"," ",4317],["T_LNUMBER","0",4317],")",["T_WHITESPACE"," ",4317],"{",["T_WHITESPACE","\n      ",4317],["T_VARIABLE","$p_header",4318],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",4318],"]",["T_WHITESPACE"," ",4318],"=",["T_WHITESPACE"," ",4318],["T_STRING","fread",4318],"(",["T_VARIABLE","$this",4318],["T_OBJECT_OPERATOR","->",4318],["T_STRING","zip_fd",4318],",",["T_WHITESPACE"," ",4318],["T_VARIABLE","$v_data",4318],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",4318],"]",")",";",["T_WHITESPACE","\n    ",4318],"}",["T_WHITESPACE","\n    ",4319],["T_ELSE","else",4320],["T_WHITESPACE"," ",4320],"{",["T_WHITESPACE","\n      ",4320],["T_VARIABLE","$p_header",4321],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",4321],"]",["T_WHITESPACE"," ",4321],"=",["T_WHITESPACE"," ",4321],["T_CONSTANT_ENCAPSED_STRING","''",4321],";",["T_WHITESPACE","\n    ",4321],"}",["T_WHITESPACE","\n\n    ",4322],["T_COMMENT","\/\/ ----- Extract properties\n",4324],["T_WHITESPACE","    ",4325],["T_VARIABLE","$p_header",4325],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",4325],"]",["T_WHITESPACE"," ",4325],"=",["T_WHITESPACE"," ",4325],["T_VARIABLE","$v_data",4325],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",4325],"]",";",["T_WHITESPACE","\n    ",4325],["T_VARIABLE","$p_header",4326],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",4326],"]",["T_WHITESPACE"," ",4326],"=",["T_WHITESPACE"," ",4326],["T_VARIABLE","$v_data",4326],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",4326],"]",";",["T_WHITESPACE","\n    ",4326],["T_VARIABLE","$p_header",4327],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4327],"]",["T_WHITESPACE"," ",4327],"=",["T_WHITESPACE"," ",4327],["T_VARIABLE","$v_data",4327],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4327],"]",";",["T_WHITESPACE","\n    ",4327],["T_VARIABLE","$p_header",4328],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4328],"]",["T_WHITESPACE"," ",4328],"=",["T_WHITESPACE"," ",4328],["T_VARIABLE","$v_data",4328],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4328],"]",";",["T_WHITESPACE","\n    ",4328],["T_VARIABLE","$p_header",4329],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",4329],"]",["T_WHITESPACE"," ",4329],"=",["T_WHITESPACE"," ",4329],["T_VARIABLE","$v_data",4329],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",4329],"]",";",["T_WHITESPACE","\n    ",4329],["T_VARIABLE","$p_header",4330],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",4330],"]",["T_WHITESPACE"," ",4330],"=",["T_WHITESPACE"," ",4330],["T_VARIABLE","$v_data",4330],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",4330],"]",";",["T_WHITESPACE","\n    ",4330],["T_VARIABLE","$p_header",4331],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4331],"]",["T_WHITESPACE"," ",4331],"=",["T_WHITESPACE"," ",4331],["T_VARIABLE","$v_data",4331],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4331],"]",";",["T_WHITESPACE","\n\n    ",4331],["T_COMMENT","\/\/ ----- Recuperate date in UNIX format\n",4333],["T_WHITESPACE","    ",4334],["T_VARIABLE","$p_header",4334],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4334],"]",["T_WHITESPACE"," ",4334],"=",["T_WHITESPACE"," ",4334],["T_VARIABLE","$v_data",4334],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4334],"]",";",["T_WHITESPACE","\n    ",4334],["T_VARIABLE","$p_header",4335],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4335],"]",["T_WHITESPACE"," ",4335],"=",["T_WHITESPACE"," ",4335],["T_VARIABLE","$v_data",4335],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4335],"]",";",["T_WHITESPACE","\n    ",4335],["T_IF","if",4336],["T_WHITESPACE"," ",4336],"(",["T_VARIABLE","$p_header",4336],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4336],"]",["T_WHITESPACE"," ",4336],["T_BOOLEAN_AND","&&",4336],["T_WHITESPACE"," ",4336],["T_VARIABLE","$p_header",4336],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4336],"]",")",["T_WHITESPACE","\n    ",4336],"{",["T_WHITESPACE","\n      ",4337],["T_COMMENT","\/\/ ----- Extract time\n",4338],["T_WHITESPACE","      ",4339],["T_VARIABLE","$v_hour",4339],["T_WHITESPACE"," ",4339],"=",["T_WHITESPACE"," ",4339],"(",["T_VARIABLE","$p_header",4339],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4339],"]",["T_WHITESPACE"," ",4339],"&",["T_WHITESPACE"," ",4339],["T_LNUMBER","0xF800",4339],")",["T_WHITESPACE"," ",4339],["T_SR",">>",4339],["T_WHITESPACE"," ",4339],["T_LNUMBER","11",4339],";",["T_WHITESPACE","\n      ",4339],["T_VARIABLE","$v_minute",4340],["T_WHITESPACE"," ",4340],"=",["T_WHITESPACE"," ",4340],"(",["T_VARIABLE","$p_header",4340],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4340],"]",["T_WHITESPACE"," ",4340],"&",["T_WHITESPACE"," ",4340],["T_LNUMBER","0x07E0",4340],")",["T_WHITESPACE"," ",4340],["T_SR",">>",4340],["T_WHITESPACE"," ",4340],["T_LNUMBER","5",4340],";",["T_WHITESPACE","\n      ",4340],["T_VARIABLE","$v_seconde",4341],["T_WHITESPACE"," ",4341],"=",["T_WHITESPACE"," ",4341],"(",["T_VARIABLE","$p_header",4341],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4341],"]",["T_WHITESPACE"," ",4341],"&",["T_WHITESPACE"," ",4341],["T_LNUMBER","0x001F",4341],")","*",["T_LNUMBER","2",4341],";",["T_WHITESPACE","\n\n      ",4341],["T_COMMENT","\/\/ ----- Extract date\n",4343],["T_WHITESPACE","      ",4344],["T_VARIABLE","$v_year",4344],["T_WHITESPACE"," ",4344],"=",["T_WHITESPACE"," ",4344],"(","(",["T_VARIABLE","$p_header",4344],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4344],"]",["T_WHITESPACE"," ",4344],"&",["T_WHITESPACE"," ",4344],["T_LNUMBER","0xFE00",4344],")",["T_WHITESPACE"," ",4344],["T_SR",">>",4344],["T_WHITESPACE"," ",4344],["T_LNUMBER","9",4344],")",["T_WHITESPACE"," ",4344],"+",["T_WHITESPACE"," ",4344],["T_LNUMBER","1980",4344],";",["T_WHITESPACE","\n      ",4344],["T_VARIABLE","$v_month",4345],["T_WHITESPACE"," ",4345],"=",["T_WHITESPACE"," ",4345],"(",["T_VARIABLE","$p_header",4345],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4345],"]",["T_WHITESPACE"," ",4345],"&",["T_WHITESPACE"," ",4345],["T_LNUMBER","0x01E0",4345],")",["T_WHITESPACE"," ",4345],["T_SR",">>",4345],["T_WHITESPACE"," ",4345],["T_LNUMBER","5",4345],";",["T_WHITESPACE","\n      ",4345],["T_VARIABLE","$v_day",4346],["T_WHITESPACE"," ",4346],"=",["T_WHITESPACE"," ",4346],["T_VARIABLE","$p_header",4346],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4346],"]",["T_WHITESPACE"," ",4346],"&",["T_WHITESPACE"," ",4346],["T_LNUMBER","0x001F",4346],";",["T_WHITESPACE","\n\n      ",4346],["T_COMMENT","\/\/ ----- Get UNIX date format\n",4348],["T_WHITESPACE","      ",4349],["T_VARIABLE","$p_header",4349],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4349],"]",["T_WHITESPACE"," ",4349],"=",["T_WHITESPACE"," ",4349],"@",["T_STRING","mktime",4349],"(",["T_VARIABLE","$v_hour",4349],",",["T_WHITESPACE"," ",4349],["T_VARIABLE","$v_minute",4349],",",["T_WHITESPACE"," ",4349],["T_VARIABLE","$v_seconde",4349],",",["T_WHITESPACE"," ",4349],["T_VARIABLE","$v_month",4349],",",["T_WHITESPACE"," ",4349],["T_VARIABLE","$v_day",4349],",",["T_WHITESPACE"," ",4349],["T_VARIABLE","$v_year",4349],")",";",["T_WHITESPACE","\n\n    ",4349],"}",["T_WHITESPACE","\n    ",4351],["T_ELSE","else",4352],["T_WHITESPACE","\n    ",4352],"{",["T_WHITESPACE","\n      ",4353],["T_VARIABLE","$p_header",4354],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4354],"]",["T_WHITESPACE"," ",4354],"=",["T_WHITESPACE"," ",4354],["T_STRING","time",4354],"(",")",";",["T_WHITESPACE","\n    ",4354],"}",["T_WHITESPACE","\n\n    ",4355],["T_COMMENT","\/\/ TBC\n",4357],["T_WHITESPACE","    ",4358],["T_COMMENT","\/\/for(reset($v_data); $key = key($v_data); next($v_data)) {\n",4358],["T_WHITESPACE","    ",4359],["T_COMMENT","\/\/}\n",4359],["T_WHITESPACE","\n    ",4360],["T_COMMENT","\/\/ ----- Set the stored filename\n",4361],["T_WHITESPACE","    ",4362],["T_VARIABLE","$p_header",4362],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4362],"]",["T_WHITESPACE"," ",4362],"=",["T_WHITESPACE"," ",4362],["T_VARIABLE","$p_header",4362],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4362],"]",";",["T_WHITESPACE","\n\n    ",4362],["T_COMMENT","\/\/ ----- Set the status field\n",4364],["T_WHITESPACE","    ",4365],["T_VARIABLE","$p_header",4365],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4365],"]",["T_WHITESPACE"," ",4365],"=",["T_WHITESPACE"," ",4365],["T_CONSTANT_ENCAPSED_STRING","\"ok\"",4365],";",["T_WHITESPACE","\n\n    ",4365],["T_COMMENT","\/\/ ----- Return\n",4367],["T_WHITESPACE","    ",4368],["T_RETURN","return",4368],["T_WHITESPACE"," ",4368],["T_VARIABLE","$v_result",4368],";",["T_WHITESPACE","\n  ",4368],"}",["T_WHITESPACE","\n  ",4369],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4370],["T_WHITESPACE","\n  ",4371],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4372],["T_WHITESPACE","  ",4373],["T_COMMENT","\/\/ Function : privReadCentralFileHeader()\n",4373],["T_WHITESPACE","  ",4374],["T_COMMENT","\/\/ Description :\n",4374],["T_WHITESPACE","  ",4375],["T_COMMENT","\/\/ Parameters :\n",4375],["T_WHITESPACE","  ",4376],["T_COMMENT","\/\/ Return Values :\n",4376],["T_WHITESPACE","  ",4377],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4377],["T_WHITESPACE","  ",4378],["T_FUNCTION","function",4378],["T_WHITESPACE"," ",4378],["T_STRING","privReadCentralFileHeader",4378],"(","&",["T_VARIABLE","$p_header",4378],")",["T_WHITESPACE","\n  ",4378],"{",["T_WHITESPACE","\n    ",4379],["T_VARIABLE","$v_result",4380],"=",["T_LNUMBER","1",4380],";",["T_WHITESPACE","\n\n    ",4380],["T_COMMENT","\/\/ ----- Read the 4 bytes signature\n",4382],["T_WHITESPACE","    ",4383],["T_VARIABLE","$v_binary_data",4383],["T_WHITESPACE"," ",4383],"=",["T_WHITESPACE"," ",4383],"@",["T_STRING","fread",4383],"(",["T_VARIABLE","$this",4383],["T_OBJECT_OPERATOR","->",4383],["T_STRING","zip_fd",4383],",",["T_WHITESPACE"," ",4383],["T_LNUMBER","4",4383],")",";",["T_WHITESPACE","\n    ",4383],["T_VARIABLE","$v_data",4384],["T_WHITESPACE"," ",4384],"=",["T_WHITESPACE"," ",4384],["T_STRING","unpack",4384],"(",["T_CONSTANT_ENCAPSED_STRING","'Vid'",4384],",",["T_WHITESPACE"," ",4384],["T_VARIABLE","$v_binary_data",4384],")",";",["T_WHITESPACE","\n\n    ",4384],["T_COMMENT","\/\/ ----- Check signature\n",4386],["T_WHITESPACE","    ",4387],["T_IF","if",4387],["T_WHITESPACE"," ",4387],"(",["T_VARIABLE","$v_data",4387],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",4387],"]",["T_WHITESPACE"," ",4387],["T_IS_NOT_EQUAL","!=",4387],["T_WHITESPACE"," ",4387],["T_LNUMBER","0x02014b50",4387],")",["T_WHITESPACE","\n    ",4387],"{",["T_WHITESPACE","\n\n      ",4388],["T_COMMENT","\/\/ ----- Error log\n",4390],["T_WHITESPACE","      ",4391],["T_STRING","PclZip",4391],["T_DOUBLE_COLON","::",4391],["T_STRING","privErrorLog",4391],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4391],",",["T_WHITESPACE"," ",4391],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive structure'",4391],")",";",["T_WHITESPACE","\n\n      ",4391],["T_COMMENT","\/\/ ----- Return\n",4393],["T_WHITESPACE","      ",4394],["T_RETURN","return",4394],["T_WHITESPACE"," ",4394],["T_STRING","PclZip",4394],["T_DOUBLE_COLON","::",4394],["T_STRING","errorCode",4394],"(",")",";",["T_WHITESPACE","\n    ",4394],"}",["T_WHITESPACE","\n\n    ",4395],["T_COMMENT","\/\/ ----- Read the first 42 bytes of the header\n",4397],["T_WHITESPACE","    ",4398],["T_VARIABLE","$v_binary_data",4398],["T_WHITESPACE"," ",4398],"=",["T_WHITESPACE"," ",4398],["T_STRING","fread",4398],"(",["T_VARIABLE","$this",4398],["T_OBJECT_OPERATOR","->",4398],["T_STRING","zip_fd",4398],",",["T_WHITESPACE"," ",4398],["T_LNUMBER","42",4398],")",";",["T_WHITESPACE","\n\n    ",4398],["T_COMMENT","\/\/ ----- Look for invalid block size\n",4400],["T_WHITESPACE","    ",4401],["T_IF","if",4401],["T_WHITESPACE"," ",4401],"(",["T_STRING","strlen",4401],"(",["T_VARIABLE","$v_binary_data",4401],")",["T_WHITESPACE"," ",4401],["T_IS_NOT_EQUAL","!=",4401],["T_WHITESPACE"," ",4401],["T_LNUMBER","42",4401],")",["T_WHITESPACE","\n    ",4401],"{",["T_WHITESPACE","\n      ",4402],["T_VARIABLE","$p_header",4403],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4403],"]",["T_WHITESPACE"," ",4403],"=",["T_WHITESPACE"," ",4403],["T_CONSTANT_ENCAPSED_STRING","\"\"",4403],";",["T_WHITESPACE","\n      ",4403],["T_VARIABLE","$p_header",4404],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4404],"]",["T_WHITESPACE"," ",4404],"=",["T_WHITESPACE"," ",4404],["T_CONSTANT_ENCAPSED_STRING","\"invalid_header\"",4404],";",["T_WHITESPACE","\n\n      ",4404],["T_COMMENT","\/\/ ----- Error log\n",4406],["T_WHITESPACE","      ",4407],["T_STRING","PclZip",4407],["T_DOUBLE_COLON","::",4407],["T_STRING","privErrorLog",4407],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4407],",",["T_WHITESPACE"," ",4407],["T_CONSTANT_ENCAPSED_STRING","\"Invalid block size : \"",4407],".",["T_STRING","strlen",4407],"(",["T_VARIABLE","$v_binary_data",4407],")",")",";",["T_WHITESPACE","\n\n      ",4407],["T_COMMENT","\/\/ ----- Return\n",4409],["T_WHITESPACE","      ",4410],["T_RETURN","return",4410],["T_WHITESPACE"," ",4410],["T_STRING","PclZip",4410],["T_DOUBLE_COLON","::",4410],["T_STRING","errorCode",4410],"(",")",";",["T_WHITESPACE","\n    ",4410],"}",["T_WHITESPACE","\n\n    ",4411],["T_COMMENT","\/\/ ----- Extract the values\n",4413],["T_WHITESPACE","    ",4414],["T_VARIABLE","$p_header",4414],["T_WHITESPACE"," ",4414],"=",["T_WHITESPACE"," ",4414],["T_STRING","unpack",4414],"(",["T_CONSTANT_ENCAPSED_STRING","'vversion\/vversion_extracted\/vflag\/vcompression\/vmtime\/vmdate\/Vcrc\/Vcompressed_size\/Vsize\/vfilename_len\/vextra_len\/vcomment_len\/vdisk\/vinternal\/Vexternal\/Voffset'",4414],",",["T_WHITESPACE"," ",4414],["T_VARIABLE","$v_binary_data",4414],")",";",["T_WHITESPACE","\n\n    ",4414],["T_COMMENT","\/\/ ----- Get filename\n",4416],["T_WHITESPACE","    ",4417],["T_IF","if",4417],["T_WHITESPACE"," ",4417],"(",["T_VARIABLE","$p_header",4417],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4417],"]",["T_WHITESPACE"," ",4417],["T_IS_NOT_EQUAL","!=",4417],["T_WHITESPACE"," ",4417],["T_LNUMBER","0",4417],")",["T_WHITESPACE","\n      ",4417],["T_VARIABLE","$p_header",4418],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4418],"]",["T_WHITESPACE"," ",4418],"=",["T_WHITESPACE"," ",4418],["T_STRING","fread",4418],"(",["T_VARIABLE","$this",4418],["T_OBJECT_OPERATOR","->",4418],["T_STRING","zip_fd",4418],",",["T_WHITESPACE"," ",4418],["T_VARIABLE","$p_header",4418],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4418],"]",")",";",["T_WHITESPACE","\n    ",4418],["T_ELSE","else",4419],["T_WHITESPACE","\n      ",4419],["T_VARIABLE","$p_header",4420],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4420],"]",["T_WHITESPACE"," ",4420],"=",["T_WHITESPACE"," ",4420],["T_CONSTANT_ENCAPSED_STRING","''",4420],";",["T_WHITESPACE","\n\n    ",4420],["T_COMMENT","\/\/ ----- Get extra\n",4422],["T_WHITESPACE","    ",4423],["T_IF","if",4423],["T_WHITESPACE"," ",4423],"(",["T_VARIABLE","$p_header",4423],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",4423],"]",["T_WHITESPACE"," ",4423],["T_IS_NOT_EQUAL","!=",4423],["T_WHITESPACE"," ",4423],["T_LNUMBER","0",4423],")",["T_WHITESPACE","\n      ",4423],["T_VARIABLE","$p_header",4424],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",4424],"]",["T_WHITESPACE"," ",4424],"=",["T_WHITESPACE"," ",4424],["T_STRING","fread",4424],"(",["T_VARIABLE","$this",4424],["T_OBJECT_OPERATOR","->",4424],["T_STRING","zip_fd",4424],",",["T_WHITESPACE"," ",4424],["T_VARIABLE","$p_header",4424],"[",["T_CONSTANT_ENCAPSED_STRING","'extra_len'",4424],"]",")",";",["T_WHITESPACE","\n    ",4424],["T_ELSE","else",4425],["T_WHITESPACE","\n      ",4425],["T_VARIABLE","$p_header",4426],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",4426],"]",["T_WHITESPACE"," ",4426],"=",["T_WHITESPACE"," ",4426],["T_CONSTANT_ENCAPSED_STRING","''",4426],";",["T_WHITESPACE","\n\n    ",4426],["T_COMMENT","\/\/ ----- Get comment\n",4428],["T_WHITESPACE","    ",4429],["T_IF","if",4429],["T_WHITESPACE"," ",4429],"(",["T_VARIABLE","$p_header",4429],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",4429],"]",["T_WHITESPACE"," ",4429],["T_IS_NOT_EQUAL","!=",4429],["T_WHITESPACE"," ",4429],["T_LNUMBER","0",4429],")",["T_WHITESPACE","\n      ",4429],["T_VARIABLE","$p_header",4430],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",4430],"]",["T_WHITESPACE"," ",4430],"=",["T_WHITESPACE"," ",4430],["T_STRING","fread",4430],"(",["T_VARIABLE","$this",4430],["T_OBJECT_OPERATOR","->",4430],["T_STRING","zip_fd",4430],",",["T_WHITESPACE"," ",4430],["T_VARIABLE","$p_header",4430],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_len'",4430],"]",")",";",["T_WHITESPACE","\n    ",4430],["T_ELSE","else",4431],["T_WHITESPACE","\n      ",4431],["T_VARIABLE","$p_header",4432],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",4432],"]",["T_WHITESPACE"," ",4432],"=",["T_WHITESPACE"," ",4432],["T_CONSTANT_ENCAPSED_STRING","''",4432],";",["T_WHITESPACE","\n\n    ",4432],["T_COMMENT","\/\/ ----- Extract properties\n",4434],["T_WHITESPACE","\n    ",4435],["T_COMMENT","\/\/ ----- Recuperate date in UNIX format\n",4436],["T_WHITESPACE","    ",4437],["T_COMMENT","\/\/if ($p_header['mdate'] && $p_header['mtime'])\n",4437],["T_WHITESPACE","    ",4438],["T_COMMENT","\/\/ TBC : bug : this was ignoring time with 0\/0\/0\n",4438],["T_WHITESPACE","    ",4439],["T_IF","if",4439],["T_WHITESPACE"," ",4439],"(",["T_LNUMBER","1",4439],")",["T_WHITESPACE","\n    ",4439],"{",["T_WHITESPACE","\n      ",4440],["T_COMMENT","\/\/ ----- Extract time\n",4441],["T_WHITESPACE","      ",4442],["T_VARIABLE","$v_hour",4442],["T_WHITESPACE"," ",4442],"=",["T_WHITESPACE"," ",4442],"(",["T_VARIABLE","$p_header",4442],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4442],"]",["T_WHITESPACE"," ",4442],"&",["T_WHITESPACE"," ",4442],["T_LNUMBER","0xF800",4442],")",["T_WHITESPACE"," ",4442],["T_SR",">>",4442],["T_WHITESPACE"," ",4442],["T_LNUMBER","11",4442],";",["T_WHITESPACE","\n      ",4442],["T_VARIABLE","$v_minute",4443],["T_WHITESPACE"," ",4443],"=",["T_WHITESPACE"," ",4443],"(",["T_VARIABLE","$p_header",4443],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4443],"]",["T_WHITESPACE"," ",4443],"&",["T_WHITESPACE"," ",4443],["T_LNUMBER","0x07E0",4443],")",["T_WHITESPACE"," ",4443],["T_SR",">>",4443],["T_WHITESPACE"," ",4443],["T_LNUMBER","5",4443],";",["T_WHITESPACE","\n      ",4443],["T_VARIABLE","$v_seconde",4444],["T_WHITESPACE"," ",4444],"=",["T_WHITESPACE"," ",4444],"(",["T_VARIABLE","$p_header",4444],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4444],"]",["T_WHITESPACE"," ",4444],"&",["T_WHITESPACE"," ",4444],["T_LNUMBER","0x001F",4444],")","*",["T_LNUMBER","2",4444],";",["T_WHITESPACE","\n\n      ",4444],["T_COMMENT","\/\/ ----- Extract date\n",4446],["T_WHITESPACE","      ",4447],["T_VARIABLE","$v_year",4447],["T_WHITESPACE"," ",4447],"=",["T_WHITESPACE"," ",4447],"(","(",["T_VARIABLE","$p_header",4447],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4447],"]",["T_WHITESPACE"," ",4447],"&",["T_WHITESPACE"," ",4447],["T_LNUMBER","0xFE00",4447],")",["T_WHITESPACE"," ",4447],["T_SR",">>",4447],["T_WHITESPACE"," ",4447],["T_LNUMBER","9",4447],")",["T_WHITESPACE"," ",4447],"+",["T_WHITESPACE"," ",4447],["T_LNUMBER","1980",4447],";",["T_WHITESPACE","\n      ",4447],["T_VARIABLE","$v_month",4448],["T_WHITESPACE"," ",4448],"=",["T_WHITESPACE"," ",4448],"(",["T_VARIABLE","$p_header",4448],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4448],"]",["T_WHITESPACE"," ",4448],"&",["T_WHITESPACE"," ",4448],["T_LNUMBER","0x01E0",4448],")",["T_WHITESPACE"," ",4448],["T_SR",">>",4448],["T_WHITESPACE"," ",4448],["T_LNUMBER","5",4448],";",["T_WHITESPACE","\n      ",4448],["T_VARIABLE","$v_day",4449],["T_WHITESPACE"," ",4449],"=",["T_WHITESPACE"," ",4449],["T_VARIABLE","$p_header",4449],"[",["T_CONSTANT_ENCAPSED_STRING","'mdate'",4449],"]",["T_WHITESPACE"," ",4449],"&",["T_WHITESPACE"," ",4449],["T_LNUMBER","0x001F",4449],";",["T_WHITESPACE","\n\n      ",4449],["T_COMMENT","\/\/ ----- Get UNIX date format\n",4451],["T_WHITESPACE","      ",4452],["T_VARIABLE","$p_header",4452],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4452],"]",["T_WHITESPACE"," ",4452],"=",["T_WHITESPACE"," ",4452],"@",["T_STRING","mktime",4452],"(",["T_VARIABLE","$v_hour",4452],",",["T_WHITESPACE"," ",4452],["T_VARIABLE","$v_minute",4452],",",["T_WHITESPACE"," ",4452],["T_VARIABLE","$v_seconde",4452],",",["T_WHITESPACE"," ",4452],["T_VARIABLE","$v_month",4452],",",["T_WHITESPACE"," ",4452],["T_VARIABLE","$v_day",4452],",",["T_WHITESPACE"," ",4452],["T_VARIABLE","$v_year",4452],")",";",["T_WHITESPACE","\n\n    ",4452],"}",["T_WHITESPACE","\n    ",4454],["T_ELSE","else",4455],["T_WHITESPACE","\n    ",4455],"{",["T_WHITESPACE","\n      ",4456],["T_VARIABLE","$p_header",4457],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4457],"]",["T_WHITESPACE"," ",4457],"=",["T_WHITESPACE"," ",4457],["T_STRING","time",4457],"(",")",";",["T_WHITESPACE","\n    ",4457],"}",["T_WHITESPACE","\n\n    ",4458],["T_COMMENT","\/\/ ----- Set the stored filename\n",4460],["T_WHITESPACE","    ",4461],["T_VARIABLE","$p_header",4461],"[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4461],"]",["T_WHITESPACE"," ",4461],"=",["T_WHITESPACE"," ",4461],["T_VARIABLE","$p_header",4461],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4461],"]",";",["T_WHITESPACE","\n\n    ",4461],["T_COMMENT","\/\/ ----- Set default status to ok\n",4463],["T_WHITESPACE","    ",4464],["T_VARIABLE","$p_header",4464],"[",["T_CONSTANT_ENCAPSED_STRING","'status'",4464],"]",["T_WHITESPACE"," ",4464],"=",["T_WHITESPACE"," ",4464],["T_CONSTANT_ENCAPSED_STRING","'ok'",4464],";",["T_WHITESPACE","\n\n    ",4464],["T_COMMENT","\/\/ ----- Look if it is a directory\n",4466],["T_WHITESPACE","    ",4467],["T_IF","if",4467],["T_WHITESPACE"," ",4467],"(",["T_STRING","substr",4467],"(",["T_VARIABLE","$p_header",4467],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4467],"]",",",["T_WHITESPACE"," ",4467],"-",["T_LNUMBER","1",4467],")",["T_WHITESPACE"," ",4467],["T_IS_EQUAL","==",4467],["T_WHITESPACE"," ",4467],["T_CONSTANT_ENCAPSED_STRING","'\/'",4467],")",["T_WHITESPACE"," ",4467],"{",["T_WHITESPACE","\n      ",4467],["T_COMMENT","\/\/$p_header['external'] = 0x41FF0010;\n",4468],["T_WHITESPACE","      ",4469],["T_VARIABLE","$p_header",4469],"[",["T_CONSTANT_ENCAPSED_STRING","'external'",4469],"]",["T_WHITESPACE"," ",4469],"=",["T_WHITESPACE"," ",4469],["T_LNUMBER","0x00000010",4469],";",["T_WHITESPACE","\n    ",4469],"}",["T_WHITESPACE","\n\n\n    ",4470],["T_COMMENT","\/\/ ----- Return\n",4473],["T_WHITESPACE","    ",4474],["T_RETURN","return",4474],["T_WHITESPACE"," ",4474],["T_VARIABLE","$v_result",4474],";",["T_WHITESPACE","\n  ",4474],"}",["T_WHITESPACE","\n  ",4475],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4476],["T_WHITESPACE","\n  ",4477],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4478],["T_WHITESPACE","  ",4479],["T_COMMENT","\/\/ Function : privCheckFileHeaders()\n",4479],["T_WHITESPACE","  ",4480],["T_COMMENT","\/\/ Description :\n",4480],["T_WHITESPACE","  ",4481],["T_COMMENT","\/\/ Parameters :\n",4481],["T_WHITESPACE","  ",4482],["T_COMMENT","\/\/ Return Values :\n",4482],["T_WHITESPACE","  ",4483],["T_COMMENT","\/\/   1 on success,\n",4483],["T_WHITESPACE","  ",4484],["T_COMMENT","\/\/   0 on error;\n",4484],["T_WHITESPACE","  ",4485],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4485],["T_WHITESPACE","  ",4486],["T_FUNCTION","function",4486],["T_WHITESPACE"," ",4486],["T_STRING","privCheckFileHeaders",4486],"(","&",["T_VARIABLE","$p_local_header",4486],",",["T_WHITESPACE"," ",4486],"&",["T_VARIABLE","$p_central_header",4486],")",["T_WHITESPACE","\n  ",4486],"{",["T_WHITESPACE","\n    ",4487],["T_VARIABLE","$v_result",4488],"=",["T_LNUMBER","1",4488],";",["T_WHITESPACE","\n\n  \t",4488],["T_COMMENT","\/\/ ----- Check the static values\n",4490],["T_WHITESPACE","  \t",4491],["T_COMMENT","\/\/ TBC\n",4491],["T_WHITESPACE","  \t",4492],["T_IF","if",4492],["T_WHITESPACE"," ",4492],"(",["T_VARIABLE","$p_local_header",4492],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4492],"]",["T_WHITESPACE"," ",4492],["T_IS_NOT_EQUAL","!=",4492],["T_WHITESPACE"," ",4492],["T_VARIABLE","$p_central_header",4492],"[",["T_CONSTANT_ENCAPSED_STRING","'filename'",4492],"]",")",["T_WHITESPACE"," ",4492],"{",["T_WHITESPACE","\n  \t",4492],"}",["T_WHITESPACE","\n  \t",4493],["T_IF","if",4494],["T_WHITESPACE"," ",4494],"(",["T_VARIABLE","$p_local_header",4494],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",4494],"]",["T_WHITESPACE"," ",4494],["T_IS_NOT_EQUAL","!=",4494],["T_WHITESPACE"," ",4494],["T_VARIABLE","$p_central_header",4494],"[",["T_CONSTANT_ENCAPSED_STRING","'version_extracted'",4494],"]",")",["T_WHITESPACE"," ",4494],"{",["T_WHITESPACE","\n  \t",4494],"}",["T_WHITESPACE","\n  \t",4495],["T_IF","if",4496],["T_WHITESPACE"," ",4496],"(",["T_VARIABLE","$p_local_header",4496],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",4496],"]",["T_WHITESPACE"," ",4496],["T_IS_NOT_EQUAL","!=",4496],["T_WHITESPACE"," ",4496],["T_VARIABLE","$p_central_header",4496],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",4496],"]",")",["T_WHITESPACE"," ",4496],"{",["T_WHITESPACE","\n  \t",4496],"}",["T_WHITESPACE","\n  \t",4497],["T_IF","if",4498],["T_WHITESPACE"," ",4498],"(",["T_VARIABLE","$p_local_header",4498],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",4498],"]",["T_WHITESPACE"," ",4498],["T_IS_NOT_EQUAL","!=",4498],["T_WHITESPACE"," ",4498],["T_VARIABLE","$p_central_header",4498],"[",["T_CONSTANT_ENCAPSED_STRING","'compression'",4498],"]",")",["T_WHITESPACE"," ",4498],"{",["T_WHITESPACE","\n  \t",4498],"}",["T_WHITESPACE","\n  \t",4499],["T_IF","if",4500],["T_WHITESPACE"," ",4500],"(",["T_VARIABLE","$p_local_header",4500],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4500],"]",["T_WHITESPACE"," ",4500],["T_IS_NOT_EQUAL","!=",4500],["T_WHITESPACE"," ",4500],["T_VARIABLE","$p_central_header",4500],"[",["T_CONSTANT_ENCAPSED_STRING","'mtime'",4500],"]",")",["T_WHITESPACE"," ",4500],"{",["T_WHITESPACE","\n  \t",4500],"}",["T_WHITESPACE","\n  \t",4501],["T_IF","if",4502],["T_WHITESPACE"," ",4502],"(",["T_VARIABLE","$p_local_header",4502],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4502],"]",["T_WHITESPACE"," ",4502],["T_IS_NOT_EQUAL","!=",4502],["T_WHITESPACE"," ",4502],["T_VARIABLE","$p_central_header",4502],"[",["T_CONSTANT_ENCAPSED_STRING","'filename_len'",4502],"]",")",["T_WHITESPACE"," ",4502],"{",["T_WHITESPACE","\n  \t",4502],"}",["T_WHITESPACE","\n\n  \t",4503],["T_COMMENT","\/\/ ----- Look for flag bit 3\n",4505],["T_WHITESPACE","  \t",4506],["T_IF","if",4506],["T_WHITESPACE"," ",4506],"(","(",["T_VARIABLE","$p_local_header",4506],"[",["T_CONSTANT_ENCAPSED_STRING","'flag'",4506],"]",["T_WHITESPACE"," ",4506],"&",["T_WHITESPACE"," ",4506],["T_LNUMBER","8",4506],")",["T_WHITESPACE"," ",4506],["T_IS_EQUAL","==",4506],["T_WHITESPACE"," ",4506],["T_LNUMBER","8",4506],")",["T_WHITESPACE"," ",4506],"{",["T_WHITESPACE","\n          ",4506],["T_VARIABLE","$p_local_header",4507],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4507],"]",["T_WHITESPACE"," ",4507],"=",["T_WHITESPACE"," ",4507],["T_VARIABLE","$p_central_header",4507],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4507],"]",";",["T_WHITESPACE","\n          ",4507],["T_VARIABLE","$p_local_header",4508],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4508],"]",["T_WHITESPACE"," ",4508],"=",["T_WHITESPACE"," ",4508],["T_VARIABLE","$p_central_header",4508],"[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4508],"]",";",["T_WHITESPACE","\n          ",4508],["T_VARIABLE","$p_local_header",4509],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",4509],"]",["T_WHITESPACE"," ",4509],"=",["T_WHITESPACE"," ",4509],["T_VARIABLE","$p_central_header",4509],"[",["T_CONSTANT_ENCAPSED_STRING","'crc'",4509],"]",";",["T_WHITESPACE","\n  \t",4509],"}",["T_WHITESPACE","\n\n    ",4510],["T_COMMENT","\/\/ ----- Return\n",4512],["T_WHITESPACE","    ",4513],["T_RETURN","return",4513],["T_WHITESPACE"," ",4513],["T_VARIABLE","$v_result",4513],";",["T_WHITESPACE","\n  ",4513],"}",["T_WHITESPACE","\n  ",4514],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4515],["T_WHITESPACE","\n  ",4516],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4517],["T_WHITESPACE","  ",4518],["T_COMMENT","\/\/ Function : privReadEndCentralDir()\n",4518],["T_WHITESPACE","  ",4519],["T_COMMENT","\/\/ Description :\n",4519],["T_WHITESPACE","  ",4520],["T_COMMENT","\/\/ Parameters :\n",4520],["T_WHITESPACE","  ",4521],["T_COMMENT","\/\/ Return Values :\n",4521],["T_WHITESPACE","  ",4522],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4522],["T_WHITESPACE","  ",4523],["T_FUNCTION","function",4523],["T_WHITESPACE"," ",4523],["T_STRING","privReadEndCentralDir",4523],"(","&",["T_VARIABLE","$p_central_dir",4523],")",["T_WHITESPACE","\n  ",4523],"{",["T_WHITESPACE","\n    ",4524],["T_VARIABLE","$v_result",4525],"=",["T_LNUMBER","1",4525],";",["T_WHITESPACE","\n\n    ",4525],["T_COMMENT","\/\/ ----- Go to the end of the zip file\n",4527],["T_WHITESPACE","    ",4528],["T_VARIABLE","$v_size",4528],["T_WHITESPACE"," ",4528],"=",["T_WHITESPACE"," ",4528],["T_STRING","filesize",4528],"(",["T_VARIABLE","$this",4528],["T_OBJECT_OPERATOR","->",4528],["T_STRING","zipname",4528],")",";",["T_WHITESPACE","\n    ",4528],"@",["T_STRING","fseek",4529],"(",["T_VARIABLE","$this",4529],["T_OBJECT_OPERATOR","->",4529],["T_STRING","zip_fd",4529],",",["T_WHITESPACE"," ",4529],["T_VARIABLE","$v_size",4529],")",";",["T_WHITESPACE","\n    ",4529],["T_IF","if",4530],["T_WHITESPACE"," ",4530],"(","@",["T_STRING","ftell",4530],"(",["T_VARIABLE","$this",4530],["T_OBJECT_OPERATOR","->",4530],["T_STRING","zip_fd",4530],")",["T_WHITESPACE"," ",4530],["T_IS_NOT_EQUAL","!=",4530],["T_WHITESPACE"," ",4530],["T_VARIABLE","$v_size",4530],")",["T_WHITESPACE","\n    ",4530],"{",["T_WHITESPACE","\n      ",4531],["T_COMMENT","\/\/ ----- Error log\n",4532],["T_WHITESPACE","      ",4533],["T_STRING","PclZip",4533],["T_DOUBLE_COLON","::",4533],["T_STRING","privErrorLog",4533],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4533],",",["T_WHITESPACE"," ",4533],["T_CONSTANT_ENCAPSED_STRING","'Unable to go to the end of the archive \\''",4533],".",["T_VARIABLE","$this",4533],["T_OBJECT_OPERATOR","->",4533],["T_STRING","zipname",4533],".",["T_CONSTANT_ENCAPSED_STRING","'\\''",4533],")",";",["T_WHITESPACE","\n\n      ",4533],["T_COMMENT","\/\/ ----- Return\n",4535],["T_WHITESPACE","      ",4536],["T_RETURN","return",4536],["T_WHITESPACE"," ",4536],["T_STRING","PclZip",4536],["T_DOUBLE_COLON","::",4536],["T_STRING","errorCode",4536],"(",")",";",["T_WHITESPACE","\n    ",4536],"}",["T_WHITESPACE","\n\n    ",4537],["T_COMMENT","\/\/ ----- First try : look if this is an archive with no commentaries (most of the time)\n",4539],["T_WHITESPACE","    ",4540],["T_COMMENT","\/\/ in this case the end of central dir is at 22 bytes of the file end\n",4540],["T_WHITESPACE","    ",4541],["T_VARIABLE","$v_found",4541],["T_WHITESPACE"," ",4541],"=",["T_WHITESPACE"," ",4541],["T_LNUMBER","0",4541],";",["T_WHITESPACE","\n    ",4541],["T_IF","if",4542],["T_WHITESPACE"," ",4542],"(",["T_VARIABLE","$v_size",4542],["T_WHITESPACE"," ",4542],">",["T_WHITESPACE"," ",4542],["T_LNUMBER","26",4542],")",["T_WHITESPACE"," ",4542],"{",["T_WHITESPACE","\n      ",4542],"@",["T_STRING","fseek",4543],"(",["T_VARIABLE","$this",4543],["T_OBJECT_OPERATOR","->",4543],["T_STRING","zip_fd",4543],",",["T_WHITESPACE"," ",4543],["T_VARIABLE","$v_size",4543],"-",["T_LNUMBER","22",4543],")",";",["T_WHITESPACE","\n      ",4543],["T_IF","if",4544],["T_WHITESPACE"," ",4544],"(","(",["T_VARIABLE","$v_pos",4544],["T_WHITESPACE"," ",4544],"=",["T_WHITESPACE"," ",4544],"@",["T_STRING","ftell",4544],"(",["T_VARIABLE","$this",4544],["T_OBJECT_OPERATOR","->",4544],["T_STRING","zip_fd",4544],")",")",["T_WHITESPACE"," ",4544],["T_IS_NOT_EQUAL","!=",4544],["T_WHITESPACE"," ",4544],"(",["T_VARIABLE","$v_size",4544],"-",["T_LNUMBER","22",4544],")",")",["T_WHITESPACE","\n      ",4544],"{",["T_WHITESPACE","\n        ",4545],["T_COMMENT","\/\/ ----- Error log\n",4546],["T_WHITESPACE","        ",4547],["T_STRING","PclZip",4547],["T_DOUBLE_COLON","::",4547],["T_STRING","privErrorLog",4547],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4547],",",["T_WHITESPACE"," ",4547],["T_CONSTANT_ENCAPSED_STRING","'Unable to seek back to the middle of the archive \\''",4547],".",["T_VARIABLE","$this",4547],["T_OBJECT_OPERATOR","->",4547],["T_STRING","zipname",4547],".",["T_CONSTANT_ENCAPSED_STRING","'\\''",4547],")",";",["T_WHITESPACE","\n\n        ",4547],["T_COMMENT","\/\/ ----- Return\n",4549],["T_WHITESPACE","        ",4550],["T_RETURN","return",4550],["T_WHITESPACE"," ",4550],["T_STRING","PclZip",4550],["T_DOUBLE_COLON","::",4550],["T_STRING","errorCode",4550],"(",")",";",["T_WHITESPACE","\n      ",4550],"}",["T_WHITESPACE","\n\n      ",4551],["T_COMMENT","\/\/ ----- Read for bytes\n",4553],["T_WHITESPACE","      ",4554],["T_VARIABLE","$v_binary_data",4554],["T_WHITESPACE"," ",4554],"=",["T_WHITESPACE"," ",4554],"@",["T_STRING","fread",4554],"(",["T_VARIABLE","$this",4554],["T_OBJECT_OPERATOR","->",4554],["T_STRING","zip_fd",4554],",",["T_WHITESPACE"," ",4554],["T_LNUMBER","4",4554],")",";",["T_WHITESPACE","\n      ",4554],["T_VARIABLE","$v_data",4555],["T_WHITESPACE"," ",4555],"=",["T_WHITESPACE"," ",4555],"@",["T_STRING","unpack",4555],"(",["T_CONSTANT_ENCAPSED_STRING","'Vid'",4555],",",["T_WHITESPACE"," ",4555],["T_VARIABLE","$v_binary_data",4555],")",";",["T_WHITESPACE","\n\n      ",4555],["T_COMMENT","\/\/ ----- Check signature\n",4557],["T_WHITESPACE","      ",4558],["T_IF","if",4558],["T_WHITESPACE"," ",4558],"(",["T_VARIABLE","$v_data",4558],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",4558],"]",["T_WHITESPACE"," ",4558],["T_IS_EQUAL","==",4558],["T_WHITESPACE"," ",4558],["T_LNUMBER","0x06054b50",4558],")",["T_WHITESPACE"," ",4558],"{",["T_WHITESPACE","\n        ",4558],["T_VARIABLE","$v_found",4559],["T_WHITESPACE"," ",4559],"=",["T_WHITESPACE"," ",4559],["T_LNUMBER","1",4559],";",["T_WHITESPACE","\n      ",4559],"}",["T_WHITESPACE","\n\n      ",4560],["T_VARIABLE","$v_pos",4562],["T_WHITESPACE"," ",4562],"=",["T_WHITESPACE"," ",4562],["T_STRING","ftell",4562],"(",["T_VARIABLE","$this",4562],["T_OBJECT_OPERATOR","->",4562],["T_STRING","zip_fd",4562],")",";",["T_WHITESPACE","\n    ",4562],"}",["T_WHITESPACE","\n\n    ",4563],["T_COMMENT","\/\/ ----- Go back to the maximum possible size of the Central Dir End Record\n",4565],["T_WHITESPACE","    ",4566],["T_IF","if",4566],["T_WHITESPACE"," ",4566],"(","!",["T_VARIABLE","$v_found",4566],")",["T_WHITESPACE"," ",4566],"{",["T_WHITESPACE","\n      ",4566],["T_VARIABLE","$v_maximum_size",4567],["T_WHITESPACE"," ",4567],"=",["T_WHITESPACE"," ",4567],["T_LNUMBER","65557",4567],";",["T_WHITESPACE"," ",4567],["T_COMMENT","\/\/ 0xFFFF + 22;\n",4567],["T_WHITESPACE","      ",4568],["T_IF","if",4568],["T_WHITESPACE"," ",4568],"(",["T_VARIABLE","$v_maximum_size",4568],["T_WHITESPACE"," ",4568],">",["T_WHITESPACE"," ",4568],["T_VARIABLE","$v_size",4568],")",["T_WHITESPACE","\n        ",4568],["T_VARIABLE","$v_maximum_size",4569],["T_WHITESPACE"," ",4569],"=",["T_WHITESPACE"," ",4569],["T_VARIABLE","$v_size",4569],";",["T_WHITESPACE","\n      ",4569],"@",["T_STRING","fseek",4570],"(",["T_VARIABLE","$this",4570],["T_OBJECT_OPERATOR","->",4570],["T_STRING","zip_fd",4570],",",["T_WHITESPACE"," ",4570],["T_VARIABLE","$v_size",4570],"-",["T_VARIABLE","$v_maximum_size",4570],")",";",["T_WHITESPACE","\n      ",4570],["T_IF","if",4571],["T_WHITESPACE"," ",4571],"(","@",["T_STRING","ftell",4571],"(",["T_VARIABLE","$this",4571],["T_OBJECT_OPERATOR","->",4571],["T_STRING","zip_fd",4571],")",["T_WHITESPACE"," ",4571],["T_IS_NOT_EQUAL","!=",4571],["T_WHITESPACE"," ",4571],"(",["T_VARIABLE","$v_size",4571],"-",["T_VARIABLE","$v_maximum_size",4571],")",")",["T_WHITESPACE","\n      ",4571],"{",["T_WHITESPACE","\n        ",4572],["T_COMMENT","\/\/ ----- Error log\n",4573],["T_WHITESPACE","        ",4574],["T_STRING","PclZip",4574],["T_DOUBLE_COLON","::",4574],["T_STRING","privErrorLog",4574],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4574],",",["T_WHITESPACE"," ",4574],["T_CONSTANT_ENCAPSED_STRING","'Unable to seek back to the middle of the archive \\''",4574],".",["T_VARIABLE","$this",4574],["T_OBJECT_OPERATOR","->",4574],["T_STRING","zipname",4574],".",["T_CONSTANT_ENCAPSED_STRING","'\\''",4574],")",";",["T_WHITESPACE","\n\n        ",4574],["T_COMMENT","\/\/ ----- Return\n",4576],["T_WHITESPACE","        ",4577],["T_RETURN","return",4577],["T_WHITESPACE"," ",4577],["T_STRING","PclZip",4577],["T_DOUBLE_COLON","::",4577],["T_STRING","errorCode",4577],"(",")",";",["T_WHITESPACE","\n      ",4577],"}",["T_WHITESPACE","\n\n      ",4578],["T_COMMENT","\/\/ ----- Read byte per byte in order to find the signature\n",4580],["T_WHITESPACE","      ",4581],["T_VARIABLE","$v_pos",4581],["T_WHITESPACE"," ",4581],"=",["T_WHITESPACE"," ",4581],["T_STRING","ftell",4581],"(",["T_VARIABLE","$this",4581],["T_OBJECT_OPERATOR","->",4581],["T_STRING","zip_fd",4581],")",";",["T_WHITESPACE","\n      ",4581],["T_VARIABLE","$v_bytes",4582],["T_WHITESPACE"," ",4582],"=",["T_WHITESPACE"," ",4582],["T_LNUMBER","0x00000000",4582],";",["T_WHITESPACE","\n      ",4582],["T_WHILE","while",4583],["T_WHITESPACE"," ",4583],"(",["T_VARIABLE","$v_pos",4583],["T_WHITESPACE"," ",4583],"<",["T_WHITESPACE"," ",4583],["T_VARIABLE","$v_size",4583],")",["T_WHITESPACE","\n      ",4583],"{",["T_WHITESPACE","\n        ",4584],["T_COMMENT","\/\/ ----- Read a byte\n",4585],["T_WHITESPACE","        ",4586],["T_VARIABLE","$v_byte",4586],["T_WHITESPACE"," ",4586],"=",["T_WHITESPACE"," ",4586],"@",["T_STRING","fread",4586],"(",["T_VARIABLE","$this",4586],["T_OBJECT_OPERATOR","->",4586],["T_STRING","zip_fd",4586],",",["T_WHITESPACE"," ",4586],["T_LNUMBER","1",4586],")",";",["T_WHITESPACE","\n\n        ",4586],["T_COMMENT","\/\/ -----  Add the byte\n",4588],["T_WHITESPACE","        ",4589],["T_COMMENT","\/\/$v_bytes = ($v_bytes << 8) | Ord($v_byte);\n",4589],["T_WHITESPACE","        ",4590],["T_COMMENT","\/\/ Note we mask the old value down such that once shifted we can never end up with more than a 32bit number\n",4590],["T_WHITESPACE","        ",4591],["T_COMMENT","\/\/ Otherwise on systems where we have 64bit integers the check below for the magic number will fail.\n",4591],["T_WHITESPACE","        ",4592],["T_VARIABLE","$v_bytes",4592],["T_WHITESPACE"," ",4592],"=",["T_WHITESPACE"," ",4592],"(",["T_WHITESPACE"," ",4592],"(",["T_VARIABLE","$v_bytes",4592],["T_WHITESPACE"," ",4592],"&",["T_WHITESPACE"," ",4592],["T_LNUMBER","0xFFFFFF",4592],")",["T_WHITESPACE"," ",4592],["T_SL","<<",4592],["T_WHITESPACE"," ",4592],["T_LNUMBER","8",4592],")",["T_WHITESPACE"," ",4592],"|",["T_WHITESPACE"," ",4592],["T_STRING","Ord",4592],"(",["T_VARIABLE","$v_byte",4592],")",";",["T_WHITESPACE","\n\n        ",4592],["T_COMMENT","\/\/ ----- Compare the bytes\n",4594],["T_WHITESPACE","        ",4595],["T_IF","if",4595],["T_WHITESPACE"," ",4595],"(",["T_VARIABLE","$v_bytes",4595],["T_WHITESPACE"," ",4595],["T_IS_EQUAL","==",4595],["T_WHITESPACE"," ",4595],["T_LNUMBER","0x504b0506",4595],")",["T_WHITESPACE","\n        ",4595],"{",["T_WHITESPACE","\n          ",4596],["T_VARIABLE","$v_pos",4597],["T_INC","++",4597],";",["T_WHITESPACE","\n          ",4597],["T_BREAK","break",4598],";",["T_WHITESPACE","\n        ",4598],"}",["T_WHITESPACE","\n\n        ",4599],["T_VARIABLE","$v_pos",4601],["T_INC","++",4601],";",["T_WHITESPACE","\n      ",4601],"}",["T_WHITESPACE","\n\n      ",4602],["T_COMMENT","\/\/ ----- Look if not found end of central dir\n",4604],["T_WHITESPACE","      ",4605],["T_IF","if",4605],["T_WHITESPACE"," ",4605],"(",["T_VARIABLE","$v_pos",4605],["T_WHITESPACE"," ",4605],["T_IS_EQUAL","==",4605],["T_WHITESPACE"," ",4605],["T_VARIABLE","$v_size",4605],")",["T_WHITESPACE","\n      ",4605],"{",["T_WHITESPACE","\n\n        ",4606],["T_COMMENT","\/\/ ----- Error log\n",4608],["T_WHITESPACE","        ",4609],["T_STRING","PclZip",4609],["T_DOUBLE_COLON","::",4609],["T_STRING","privErrorLog",4609],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4609],",",["T_WHITESPACE"," ",4609],["T_CONSTANT_ENCAPSED_STRING","\"Unable to find End of Central Dir Record signature\"",4609],")",";",["T_WHITESPACE","\n\n        ",4609],["T_COMMENT","\/\/ ----- Return\n",4611],["T_WHITESPACE","        ",4612],["T_RETURN","return",4612],["T_WHITESPACE"," ",4612],["T_STRING","PclZip",4612],["T_DOUBLE_COLON","::",4612],["T_STRING","errorCode",4612],"(",")",";",["T_WHITESPACE","\n      ",4612],"}",["T_WHITESPACE","\n    ",4613],"}",["T_WHITESPACE","\n\n    ",4614],["T_COMMENT","\/\/ ----- Read the first 18 bytes of the header\n",4616],["T_WHITESPACE","    ",4617],["T_VARIABLE","$v_binary_data",4617],["T_WHITESPACE"," ",4617],"=",["T_WHITESPACE"," ",4617],["T_STRING","fread",4617],"(",["T_VARIABLE","$this",4617],["T_OBJECT_OPERATOR","->",4617],["T_STRING","zip_fd",4617],",",["T_WHITESPACE"," ",4617],["T_LNUMBER","18",4617],")",";",["T_WHITESPACE","\n\n    ",4617],["T_COMMENT","\/\/ ----- Look for invalid block size\n",4619],["T_WHITESPACE","    ",4620],["T_IF","if",4620],["T_WHITESPACE"," ",4620],"(",["T_STRING","strlen",4620],"(",["T_VARIABLE","$v_binary_data",4620],")",["T_WHITESPACE"," ",4620],["T_IS_NOT_EQUAL","!=",4620],["T_WHITESPACE"," ",4620],["T_LNUMBER","18",4620],")",["T_WHITESPACE","\n    ",4620],"{",["T_WHITESPACE","\n\n      ",4621],["T_COMMENT","\/\/ ----- Error log\n",4623],["T_WHITESPACE","      ",4624],["T_STRING","PclZip",4624],["T_DOUBLE_COLON","::",4624],["T_STRING","privErrorLog",4624],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4624],",",["T_WHITESPACE"," ",4624],["T_CONSTANT_ENCAPSED_STRING","\"Invalid End of Central Dir Record size : \"",4624],".",["T_STRING","strlen",4624],"(",["T_VARIABLE","$v_binary_data",4624],")",")",";",["T_WHITESPACE","\n\n      ",4624],["T_COMMENT","\/\/ ----- Return\n",4626],["T_WHITESPACE","      ",4627],["T_RETURN","return",4627],["T_WHITESPACE"," ",4627],["T_STRING","PclZip",4627],["T_DOUBLE_COLON","::",4627],["T_STRING","errorCode",4627],"(",")",";",["T_WHITESPACE","\n    ",4627],"}",["T_WHITESPACE","\n\n    ",4628],["T_COMMENT","\/\/ ----- Extract the values\n",4630],["T_WHITESPACE","    ",4631],["T_VARIABLE","$v_data",4631],["T_WHITESPACE"," ",4631],"=",["T_WHITESPACE"," ",4631],["T_STRING","unpack",4631],"(",["T_CONSTANT_ENCAPSED_STRING","'vdisk\/vdisk_start\/vdisk_entries\/ventries\/Vsize\/Voffset\/vcomment_size'",4631],",",["T_WHITESPACE"," ",4631],["T_VARIABLE","$v_binary_data",4631],")",";",["T_WHITESPACE","\n\n    ",4631],["T_COMMENT","\/\/ ----- Check the global size\n",4633],["T_WHITESPACE","    ",4634],["T_IF","if",4634],["T_WHITESPACE"," ",4634],"(","(",["T_VARIABLE","$v_pos",4634],["T_WHITESPACE"," ",4634],"+",["T_WHITESPACE"," ",4634],["T_VARIABLE","$v_data",4634],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_size'",4634],"]",["T_WHITESPACE"," ",4634],"+",["T_WHITESPACE"," ",4634],["T_LNUMBER","18",4634],")",["T_WHITESPACE"," ",4634],["T_IS_NOT_EQUAL","!=",4634],["T_WHITESPACE"," ",4634],["T_VARIABLE","$v_size",4634],")",["T_WHITESPACE"," ",4634],"{",["T_WHITESPACE","\n\n\t  ",4634],["T_COMMENT","\/\/ ----- Removed in release 2.2 see readme file\n",4636],["T_WHITESPACE","\t  ",4637],["T_COMMENT","\/\/ The check of the file size is a little too strict.\n",4637],["T_WHITESPACE","\t  ",4638],["T_COMMENT","\/\/ Some bugs where found when a zip is encrypted\/decrypted with 'crypt'.\n",4638],["T_WHITESPACE","\t  ",4639],["T_COMMENT","\/\/ While decrypted, zip has training 0 bytes\n",4639],["T_WHITESPACE","\t  ",4640],["T_IF","if",4640],["T_WHITESPACE"," ",4640],"(",["T_LNUMBER","0",4640],")",["T_WHITESPACE"," ",4640],"{",["T_WHITESPACE","\n      ",4640],["T_COMMENT","\/\/ ----- Error log\n",4641],["T_WHITESPACE","      ",4642],["T_STRING","PclZip",4642],["T_DOUBLE_COLON","::",4642],["T_STRING","privErrorLog",4642],"(",["T_STRING","PCLZIP_ERR_BAD_FORMAT",4642],",",["T_WHITESPACE","\n\t                       ",4642],["T_CONSTANT_ENCAPSED_STRING","'The central dir is not at the end of the archive.'",4643],["T_WHITESPACE","\n\t\t\t\t\t\t   ",4643],".",["T_CONSTANT_ENCAPSED_STRING","' Some trailing bytes exists after the archive.'",4644],")",";",["T_WHITESPACE","\n\n      ",4644],["T_COMMENT","\/\/ ----- Return\n",4646],["T_WHITESPACE","      ",4647],["T_RETURN","return",4647],["T_WHITESPACE"," ",4647],["T_STRING","PclZip",4647],["T_DOUBLE_COLON","::",4647],["T_STRING","errorCode",4647],"(",")",";",["T_WHITESPACE","\n\t  ",4647],"}",["T_WHITESPACE","\n    ",4648],"}",["T_WHITESPACE","\n\n    ",4649],["T_COMMENT","\/\/ ----- Get comment\n",4651],["T_WHITESPACE","    ",4652],["T_IF","if",4652],["T_WHITESPACE"," ",4652],"(",["T_VARIABLE","$v_data",4652],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_size'",4652],"]",["T_WHITESPACE"," ",4652],["T_IS_NOT_EQUAL","!=",4652],["T_WHITESPACE"," ",4652],["T_LNUMBER","0",4652],")",["T_WHITESPACE"," ",4652],"{",["T_WHITESPACE","\n      ",4652],["T_VARIABLE","$p_central_dir",4653],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",4653],"]",["T_WHITESPACE"," ",4653],"=",["T_WHITESPACE"," ",4653],["T_STRING","fread",4653],"(",["T_VARIABLE","$this",4653],["T_OBJECT_OPERATOR","->",4653],["T_STRING","zip_fd",4653],",",["T_WHITESPACE"," ",4653],["T_VARIABLE","$v_data",4653],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_size'",4653],"]",")",";",["T_WHITESPACE","\n    ",4653],"}",["T_WHITESPACE","\n    ",4654],["T_ELSE","else",4655],["T_WHITESPACE","\n      ",4655],["T_VARIABLE","$p_central_dir",4656],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",4656],"]",["T_WHITESPACE"," ",4656],"=",["T_WHITESPACE"," ",4656],["T_CONSTANT_ENCAPSED_STRING","''",4656],";",["T_WHITESPACE","\n\n    ",4656],["T_VARIABLE","$p_central_dir",4658],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",4658],"]",["T_WHITESPACE"," ",4658],"=",["T_WHITESPACE"," ",4658],["T_VARIABLE","$v_data",4658],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",4658],"]",";",["T_WHITESPACE","\n    ",4658],["T_VARIABLE","$p_central_dir",4659],"[",["T_CONSTANT_ENCAPSED_STRING","'disk_entries'",4659],"]",["T_WHITESPACE"," ",4659],"=",["T_WHITESPACE"," ",4659],["T_VARIABLE","$v_data",4659],"[",["T_CONSTANT_ENCAPSED_STRING","'disk_entries'",4659],"]",";",["T_WHITESPACE","\n    ",4659],["T_VARIABLE","$p_central_dir",4660],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",4660],"]",["T_WHITESPACE"," ",4660],"=",["T_WHITESPACE"," ",4660],["T_VARIABLE","$v_data",4660],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",4660],"]",";",["T_WHITESPACE","\n    ",4660],["T_VARIABLE","$p_central_dir",4661],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4661],"]",["T_WHITESPACE"," ",4661],"=",["T_WHITESPACE"," ",4661],["T_VARIABLE","$v_data",4661],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",4661],"]",";",["T_WHITESPACE","\n    ",4661],["T_VARIABLE","$p_central_dir",4662],"[",["T_CONSTANT_ENCAPSED_STRING","'disk'",4662],"]",["T_WHITESPACE"," ",4662],"=",["T_WHITESPACE"," ",4662],["T_VARIABLE","$v_data",4662],"[",["T_CONSTANT_ENCAPSED_STRING","'disk'",4662],"]",";",["T_WHITESPACE","\n    ",4662],["T_VARIABLE","$p_central_dir",4663],"[",["T_CONSTANT_ENCAPSED_STRING","'disk_start'",4663],"]",["T_WHITESPACE"," ",4663],"=",["T_WHITESPACE"," ",4663],["T_VARIABLE","$v_data",4663],"[",["T_CONSTANT_ENCAPSED_STRING","'disk_start'",4663],"]",";",["T_WHITESPACE","\n\n    ",4663],["T_COMMENT","\/\/ TBC\n",4665],["T_WHITESPACE","    ",4666],["T_COMMENT","\/\/for(reset($p_central_dir); $key = key($p_central_dir); next($p_central_dir)) {\n",4666],["T_WHITESPACE","    ",4667],["T_COMMENT","\/\/}\n",4667],["T_WHITESPACE","\n    ",4668],["T_COMMENT","\/\/ ----- Return\n",4669],["T_WHITESPACE","    ",4670],["T_RETURN","return",4670],["T_WHITESPACE"," ",4670],["T_VARIABLE","$v_result",4670],";",["T_WHITESPACE","\n  ",4670],"}",["T_WHITESPACE","\n  ",4671],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4672],["T_WHITESPACE","\n  ",4673],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4674],["T_WHITESPACE","  ",4675],["T_COMMENT","\/\/ Function : privDeleteByRule()\n",4675],["T_WHITESPACE","  ",4676],["T_COMMENT","\/\/ Description :\n",4676],["T_WHITESPACE","  ",4677],["T_COMMENT","\/\/ Parameters :\n",4677],["T_WHITESPACE","  ",4678],["T_COMMENT","\/\/ Return Values :\n",4678],["T_WHITESPACE","  ",4679],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4679],["T_WHITESPACE","  ",4680],["T_FUNCTION","function",4680],["T_WHITESPACE"," ",4680],["T_STRING","privDeleteByRule",4680],"(","&",["T_VARIABLE","$p_result_list",4680],",",["T_WHITESPACE"," ",4680],"&",["T_VARIABLE","$p_options",4680],")",["T_WHITESPACE","\n  ",4680],"{",["T_WHITESPACE","\n    ",4681],["T_VARIABLE","$v_result",4682],"=",["T_LNUMBER","1",4682],";",["T_WHITESPACE","\n    ",4682],["T_VARIABLE","$v_list_detail",4683],["T_WHITESPACE"," ",4683],"=",["T_WHITESPACE"," ",4683],["T_ARRAY","array",4683],"(",")",";",["T_WHITESPACE","\n\n    ",4683],["T_COMMENT","\/\/ ----- Open the zip file\n",4685],["T_WHITESPACE","    ",4686],["T_IF","if",4686],["T_WHITESPACE"," ",4686],"(","(",["T_VARIABLE","$v_result",4686],"=",["T_VARIABLE","$this",4686],["T_OBJECT_OPERATOR","->",4686],["T_STRING","privOpenFd",4686],"(",["T_CONSTANT_ENCAPSED_STRING","'rb'",4686],")",")",["T_WHITESPACE"," ",4686],["T_IS_NOT_EQUAL","!=",4686],["T_WHITESPACE"," ",4686],["T_LNUMBER","1",4686],")",["T_WHITESPACE","\n    ",4686],"{",["T_WHITESPACE","\n      ",4687],["T_COMMENT","\/\/ ----- Return\n",4688],["T_WHITESPACE","      ",4689],["T_RETURN","return",4689],["T_WHITESPACE"," ",4689],["T_VARIABLE","$v_result",4689],";",["T_WHITESPACE","\n    ",4689],"}",["T_WHITESPACE","\n\n    ",4690],["T_COMMENT","\/\/ ----- Read the central directory informations\n",4692],["T_WHITESPACE","    ",4693],["T_VARIABLE","$v_central_dir",4693],["T_WHITESPACE"," ",4693],"=",["T_WHITESPACE"," ",4693],["T_ARRAY","array",4693],"(",")",";",["T_WHITESPACE","\n    ",4693],["T_IF","if",4694],["T_WHITESPACE"," ",4694],"(","(",["T_VARIABLE","$v_result",4694],["T_WHITESPACE"," ",4694],"=",["T_WHITESPACE"," ",4694],["T_VARIABLE","$this",4694],["T_OBJECT_OPERATOR","->",4694],["T_STRING","privReadEndCentralDir",4694],"(",["T_VARIABLE","$v_central_dir",4694],")",")",["T_WHITESPACE"," ",4694],["T_IS_NOT_EQUAL","!=",4694],["T_WHITESPACE"," ",4694],["T_LNUMBER","1",4694],")",["T_WHITESPACE","\n    ",4694],"{",["T_WHITESPACE","\n      ",4695],["T_VARIABLE","$this",4696],["T_OBJECT_OPERATOR","->",4696],["T_STRING","privCloseFd",4696],"(",")",";",["T_WHITESPACE","\n      ",4696],["T_RETURN","return",4697],["T_WHITESPACE"," ",4697],["T_VARIABLE","$v_result",4697],";",["T_WHITESPACE","\n    ",4697],"}",["T_WHITESPACE","\n\n    ",4698],["T_COMMENT","\/\/ ----- Go to beginning of File\n",4700],["T_WHITESPACE","    ",4701],"@",["T_STRING","rewind",4701],"(",["T_VARIABLE","$this",4701],["T_OBJECT_OPERATOR","->",4701],["T_STRING","zip_fd",4701],")",";",["T_WHITESPACE","\n\n    ",4701],["T_COMMENT","\/\/ ----- Scan all the files\n",4703],["T_WHITESPACE","    ",4704],["T_COMMENT","\/\/ ----- Start at beginning of Central Dir\n",4704],["T_WHITESPACE","    ",4705],["T_VARIABLE","$v_pos_entry",4705],["T_WHITESPACE"," ",4705],"=",["T_WHITESPACE"," ",4705],["T_VARIABLE","$v_central_dir",4705],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",4705],"]",";",["T_WHITESPACE","\n    ",4705],"@",["T_STRING","rewind",4706],"(",["T_VARIABLE","$this",4706],["T_OBJECT_OPERATOR","->",4706],["T_STRING","zip_fd",4706],")",";",["T_WHITESPACE","\n    ",4706],["T_IF","if",4707],["T_WHITESPACE"," ",4707],"(","@",["T_STRING","fseek",4707],"(",["T_VARIABLE","$this",4707],["T_OBJECT_OPERATOR","->",4707],["T_STRING","zip_fd",4707],",",["T_WHITESPACE"," ",4707],["T_VARIABLE","$v_pos_entry",4707],")",")",["T_WHITESPACE","\n    ",4707],"{",["T_WHITESPACE","\n      ",4708],["T_COMMENT","\/\/ ----- Close the zip file\n",4709],["T_WHITESPACE","      ",4710],["T_VARIABLE","$this",4710],["T_OBJECT_OPERATOR","->",4710],["T_STRING","privCloseFd",4710],"(",")",";",["T_WHITESPACE","\n\n      ",4710],["T_COMMENT","\/\/ ----- Error log\n",4712],["T_WHITESPACE","      ",4713],["T_STRING","PclZip",4713],["T_DOUBLE_COLON","::",4713],["T_STRING","privErrorLog",4713],"(",["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",4713],",",["T_WHITESPACE"," ",4713],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive size'",4713],")",";",["T_WHITESPACE","\n\n      ",4713],["T_COMMENT","\/\/ ----- Return\n",4715],["T_WHITESPACE","      ",4716],["T_RETURN","return",4716],["T_WHITESPACE"," ",4716],["T_STRING","PclZip",4716],["T_DOUBLE_COLON","::",4716],["T_STRING","errorCode",4716],"(",")",";",["T_WHITESPACE","\n    ",4716],"}",["T_WHITESPACE","\n\n    ",4717],["T_COMMENT","\/\/ ----- Read each entry\n",4719],["T_WHITESPACE","    ",4720],["T_VARIABLE","$v_header_list",4720],["T_WHITESPACE"," ",4720],"=",["T_WHITESPACE"," ",4720],["T_ARRAY","array",4720],"(",")",";",["T_WHITESPACE","\n    ",4720],["T_VARIABLE","$j_start",4721],["T_WHITESPACE"," ",4721],"=",["T_WHITESPACE"," ",4721],["T_LNUMBER","0",4721],";",["T_WHITESPACE","\n    ",4721],["T_FOR","for",4722],["T_WHITESPACE"," ",4722],"(",["T_VARIABLE","$i",4722],"=",["T_LNUMBER","0",4722],",",["T_WHITESPACE"," ",4722],["T_VARIABLE","$v_nb_extracted",4722],"=",["T_LNUMBER","0",4722],";",["T_WHITESPACE"," ",4722],["T_VARIABLE","$i",4722],"<",["T_VARIABLE","$v_central_dir",4722],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",4722],"]",";",["T_WHITESPACE"," ",4722],["T_VARIABLE","$i",4722],["T_INC","++",4722],")",["T_WHITESPACE","\n    ",4722],"{",["T_WHITESPACE","\n\n      ",4723],["T_COMMENT","\/\/ ----- Read the file header\n",4725],["T_WHITESPACE","      ",4726],["T_VARIABLE","$v_header_list",4726],"[",["T_VARIABLE","$v_nb_extracted",4726],"]",["T_WHITESPACE"," ",4726],"=",["T_WHITESPACE"," ",4726],["T_ARRAY","array",4726],"(",")",";",["T_WHITESPACE","\n      ",4726],["T_IF","if",4727],["T_WHITESPACE"," ",4727],"(","(",["T_VARIABLE","$v_result",4727],["T_WHITESPACE"," ",4727],"=",["T_WHITESPACE"," ",4727],["T_VARIABLE","$this",4727],["T_OBJECT_OPERATOR","->",4727],["T_STRING","privReadCentralFileHeader",4727],"(",["T_VARIABLE","$v_header_list",4727],"[",["T_VARIABLE","$v_nb_extracted",4727],"]",")",")",["T_WHITESPACE"," ",4727],["T_IS_NOT_EQUAL","!=",4727],["T_WHITESPACE"," ",4727],["T_LNUMBER","1",4727],")",["T_WHITESPACE","\n      ",4727],"{",["T_WHITESPACE","\n        ",4728],["T_COMMENT","\/\/ ----- Close the zip file\n",4729],["T_WHITESPACE","        ",4730],["T_VARIABLE","$this",4730],["T_OBJECT_OPERATOR","->",4730],["T_STRING","privCloseFd",4730],"(",")",";",["T_WHITESPACE","\n\n        ",4730],["T_RETURN","return",4732],["T_WHITESPACE"," ",4732],["T_VARIABLE","$v_result",4732],";",["T_WHITESPACE","\n      ",4732],"}",["T_WHITESPACE","\n\n\n      ",4733],["T_COMMENT","\/\/ ----- Store the index\n",4736],["T_WHITESPACE","      ",4737],["T_VARIABLE","$v_header_list",4737],"[",["T_VARIABLE","$v_nb_extracted",4737],"]","[",["T_CONSTANT_ENCAPSED_STRING","'index'",4737],"]",["T_WHITESPACE"," ",4737],"=",["T_WHITESPACE"," ",4737],["T_VARIABLE","$i",4737],";",["T_WHITESPACE","\n\n      ",4737],["T_COMMENT","\/\/ ----- Look for the specific extract rules\n",4739],["T_WHITESPACE","      ",4740],["T_VARIABLE","$v_found",4740],["T_WHITESPACE"," ",4740],"=",["T_WHITESPACE"," ",4740],["T_STRING","false",4740],";",["T_WHITESPACE","\n\n      ",4740],["T_COMMENT","\/\/ ----- Look for extract by name rule\n",4742],["T_WHITESPACE","      ",4743],["T_IF","if",4743],["T_WHITESPACE"," ",4743],"(",["T_WHITESPACE","   ",4743],"(",["T_ISSET","isset",4743],"(",["T_VARIABLE","$p_options",4743],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4743],"]",")",")",["T_WHITESPACE","\n          ",4743],["T_BOOLEAN_AND","&&",4744],["T_WHITESPACE"," ",4744],"(",["T_VARIABLE","$p_options",4744],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4744],"]",["T_WHITESPACE"," ",4744],["T_IS_NOT_EQUAL","!=",4744],["T_WHITESPACE"," ",4744],["T_LNUMBER","0",4744],")",")",["T_WHITESPACE"," ",4744],"{",["T_WHITESPACE","\n\n          ",4744],["T_COMMENT","\/\/ ----- Look if the filename is in the list\n",4746],["T_WHITESPACE","          ",4747],["T_FOR","for",4747],["T_WHITESPACE"," ",4747],"(",["T_VARIABLE","$j",4747],"=",["T_LNUMBER","0",4747],";",["T_WHITESPACE"," ",4747],"(",["T_VARIABLE","$j",4747],"<",["T_STRING","sizeof",4747],"(",["T_VARIABLE","$p_options",4747],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4747],"]",")",")",["T_WHITESPACE"," ",4747],["T_BOOLEAN_AND","&&",4747],["T_WHITESPACE"," ",4747],"(","!",["T_VARIABLE","$v_found",4747],")",";",["T_WHITESPACE"," ",4747],["T_VARIABLE","$j",4747],["T_INC","++",4747],")",["T_WHITESPACE"," ",4747],"{",["T_WHITESPACE","\n\n              ",4747],["T_COMMENT","\/\/ ----- Look for a directory\n",4749],["T_WHITESPACE","              ",4750],["T_IF","if",4750],["T_WHITESPACE"," ",4750],"(",["T_STRING","substr",4750],"(",["T_VARIABLE","$p_options",4750],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4750],"]","[",["T_VARIABLE","$j",4750],"]",",",["T_WHITESPACE"," ",4750],"-",["T_LNUMBER","1",4750],")",["T_WHITESPACE"," ",4750],["T_IS_EQUAL","==",4750],["T_WHITESPACE"," ",4750],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",4750],")",["T_WHITESPACE"," ",4750],"{",["T_WHITESPACE","\n\n                  ",4750],["T_COMMENT","\/\/ ----- Look if the directory is in the filename path\n",4752],["T_WHITESPACE","                  ",4753],["T_IF","if",4753],["T_WHITESPACE"," ",4753],"(",["T_WHITESPACE","   ",4753],"(",["T_STRING","strlen",4753],"(",["T_VARIABLE","$v_header_list",4753],"[",["T_VARIABLE","$v_nb_extracted",4753],"]","[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4753],"]",")",["T_WHITESPACE"," ",4753],">",["T_WHITESPACE"," ",4753],["T_STRING","strlen",4753],"(",["T_VARIABLE","$p_options",4753],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4753],"]","[",["T_VARIABLE","$j",4753],"]",")",")",["T_WHITESPACE","\n                      ",4753],["T_BOOLEAN_AND","&&",4754],["T_WHITESPACE"," ",4754],"(",["T_STRING","substr",4754],"(",["T_VARIABLE","$v_header_list",4754],"[",["T_VARIABLE","$v_nb_extracted",4754],"]","[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4754],"]",",",["T_WHITESPACE"," ",4754],["T_LNUMBER","0",4754],",",["T_WHITESPACE"," ",4754],["T_STRING","strlen",4754],"(",["T_VARIABLE","$p_options",4754],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4754],"]","[",["T_VARIABLE","$j",4754],"]",")",")",["T_WHITESPACE"," ",4754],["T_IS_EQUAL","==",4754],["T_WHITESPACE"," ",4754],["T_VARIABLE","$p_options",4754],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4754],"]","[",["T_VARIABLE","$j",4754],"]",")",")",["T_WHITESPACE"," ",4754],"{",["T_WHITESPACE","\n                      ",4754],["T_VARIABLE","$v_found",4755],["T_WHITESPACE"," ",4755],"=",["T_WHITESPACE"," ",4755],["T_STRING","true",4755],";",["T_WHITESPACE","\n                  ",4755],"}",["T_WHITESPACE","\n                  ",4756],["T_ELSEIF","elseif",4757],["T_WHITESPACE"," ",4757],"(",["T_WHITESPACE","   ",4757],"(","(",["T_VARIABLE","$v_header_list",4757],"[",["T_VARIABLE","$v_nb_extracted",4757],"]","[",["T_CONSTANT_ENCAPSED_STRING","'external'",4757],"]","&",["T_LNUMBER","0x00000010",4757],")",["T_IS_EQUAL","==",4757],["T_LNUMBER","0x00000010",4757],")",["T_WHITESPACE"," ",4757],["T_COMMENT","\/* Indicates a folder *\/",4757],["T_WHITESPACE","\n                          ",4757],["T_BOOLEAN_AND","&&",4758],["T_WHITESPACE"," ",4758],"(",["T_VARIABLE","$v_header_list",4758],"[",["T_VARIABLE","$v_nb_extracted",4758],"]","[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4758],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",4758],["T_WHITESPACE"," ",4758],["T_IS_EQUAL","==",4758],["T_WHITESPACE"," ",4758],["T_VARIABLE","$p_options",4758],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4758],"]","[",["T_VARIABLE","$j",4758],"]",")",")",["T_WHITESPACE"," ",4758],"{",["T_WHITESPACE","\n                      ",4758],["T_VARIABLE","$v_found",4759],["T_WHITESPACE"," ",4759],"=",["T_WHITESPACE"," ",4759],["T_STRING","true",4759],";",["T_WHITESPACE","\n                  ",4759],"}",["T_WHITESPACE","\n              ",4760],"}",["T_WHITESPACE","\n              ",4761],["T_COMMENT","\/\/ ----- Look for a filename\n",4762],["T_WHITESPACE","              ",4763],["T_ELSEIF","elseif",4763],["T_WHITESPACE"," ",4763],"(",["T_VARIABLE","$v_header_list",4763],"[",["T_VARIABLE","$v_nb_extracted",4763],"]","[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4763],"]",["T_WHITESPACE"," ",4763],["T_IS_EQUAL","==",4763],["T_WHITESPACE"," ",4763],["T_VARIABLE","$p_options",4763],"[",["T_STRING","PCLZIP_OPT_BY_NAME",4763],"]","[",["T_VARIABLE","$j",4763],"]",")",["T_WHITESPACE"," ",4763],"{",["T_WHITESPACE","\n                  ",4763],["T_VARIABLE","$v_found",4764],["T_WHITESPACE"," ",4764],"=",["T_WHITESPACE"," ",4764],["T_STRING","true",4764],";",["T_WHITESPACE","\n              ",4764],"}",["T_WHITESPACE","\n          ",4765],"}",["T_WHITESPACE","\n      ",4766],"}",["T_WHITESPACE","\n\n      ",4767],["T_COMMENT","\/\/ ----- Look for extract by ereg rule\n",4769],["T_WHITESPACE","      ",4770],["T_COMMENT","\/\/ ereg() is deprecated with PHP 5.3\n",4770],["T_WHITESPACE","      ",4771],["T_COMMENT","\/*\n      else if (   (isset($p_options[PCLZIP_OPT_BY_EREG]))\n               && ($p_options[PCLZIP_OPT_BY_EREG] != \"\")) {\n\n          if (ereg($p_options[PCLZIP_OPT_BY_EREG], $v_header_list[$v_nb_extracted]['stored_filename'])) {\n              $v_found = true;\n          }\n      }\n      *\/",4771],["T_WHITESPACE","\n\n      ",4779],["T_COMMENT","\/\/ ----- Look for extract by preg rule\n",4781],["T_WHITESPACE","      ",4782],["T_ELSE","else",4782],["T_WHITESPACE"," ",4782],["T_IF","if",4782],["T_WHITESPACE"," ",4782],"(",["T_WHITESPACE","   ",4782],"(",["T_ISSET","isset",4782],"(",["T_VARIABLE","$p_options",4782],"[",["T_STRING","PCLZIP_OPT_BY_PREG",4782],"]",")",")",["T_WHITESPACE","\n               ",4782],["T_BOOLEAN_AND","&&",4783],["T_WHITESPACE"," ",4783],"(",["T_VARIABLE","$p_options",4783],"[",["T_STRING","PCLZIP_OPT_BY_PREG",4783],"]",["T_WHITESPACE"," ",4783],["T_IS_NOT_EQUAL","!=",4783],["T_WHITESPACE"," ",4783],["T_CONSTANT_ENCAPSED_STRING","\"\"",4783],")",")",["T_WHITESPACE"," ",4783],"{",["T_WHITESPACE","\n\n          ",4783],["T_IF","if",4785],["T_WHITESPACE"," ",4785],"(",["T_STRING","preg_match",4785],"(",["T_VARIABLE","$p_options",4785],"[",["T_STRING","PCLZIP_OPT_BY_PREG",4785],"]",",",["T_WHITESPACE"," ",4785],["T_VARIABLE","$v_header_list",4785],"[",["T_VARIABLE","$v_nb_extracted",4785],"]","[",["T_CONSTANT_ENCAPSED_STRING","'stored_filename'",4785],"]",")",")",["T_WHITESPACE"," ",4785],"{",["T_WHITESPACE","\n              ",4785],["T_VARIABLE","$v_found",4786],["T_WHITESPACE"," ",4786],"=",["T_WHITESPACE"," ",4786],["T_STRING","true",4786],";",["T_WHITESPACE","\n          ",4786],"}",["T_WHITESPACE","\n      ",4787],"}",["T_WHITESPACE","\n\n      ",4788],["T_COMMENT","\/\/ ----- Look for extract by index rule\n",4790],["T_WHITESPACE","      ",4791],["T_ELSE","else",4791],["T_WHITESPACE"," ",4791],["T_IF","if",4791],["T_WHITESPACE"," ",4791],"(",["T_WHITESPACE","   ",4791],"(",["T_ISSET","isset",4791],"(",["T_VARIABLE","$p_options",4791],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4791],"]",")",")",["T_WHITESPACE","\n               ",4791],["T_BOOLEAN_AND","&&",4792],["T_WHITESPACE"," ",4792],"(",["T_VARIABLE","$p_options",4792],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4792],"]",["T_WHITESPACE"," ",4792],["T_IS_NOT_EQUAL","!=",4792],["T_WHITESPACE"," ",4792],["T_LNUMBER","0",4792],")",")",["T_WHITESPACE"," ",4792],"{",["T_WHITESPACE","\n\n          ",4792],["T_COMMENT","\/\/ ----- Look if the index is in the list\n",4794],["T_WHITESPACE","          ",4795],["T_FOR","for",4795],["T_WHITESPACE"," ",4795],"(",["T_VARIABLE","$j",4795],"=",["T_VARIABLE","$j_start",4795],";",["T_WHITESPACE"," ",4795],"(",["T_VARIABLE","$j",4795],"<",["T_STRING","sizeof",4795],"(",["T_VARIABLE","$p_options",4795],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4795],"]",")",")",["T_WHITESPACE"," ",4795],["T_BOOLEAN_AND","&&",4795],["T_WHITESPACE"," ",4795],"(","!",["T_VARIABLE","$v_found",4795],")",";",["T_WHITESPACE"," ",4795],["T_VARIABLE","$j",4795],["T_INC","++",4795],")",["T_WHITESPACE"," ",4795],"{",["T_WHITESPACE","\n\n              ",4795],["T_IF","if",4797],["T_WHITESPACE"," ",4797],"(","(",["T_VARIABLE","$i",4797],["T_IS_GREATER_OR_EQUAL",">=",4797],["T_VARIABLE","$p_options",4797],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4797],"]","[",["T_VARIABLE","$j",4797],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",4797],"]",")",["T_WHITESPACE"," ",4797],["T_BOOLEAN_AND","&&",4797],["T_WHITESPACE"," ",4797],"(",["T_VARIABLE","$i",4797],["T_IS_SMALLER_OR_EQUAL","<=",4797],["T_VARIABLE","$p_options",4797],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4797],"]","[",["T_VARIABLE","$j",4797],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",4797],"]",")",")",["T_WHITESPACE"," ",4797],"{",["T_WHITESPACE","\n                  ",4797],["T_VARIABLE","$v_found",4798],["T_WHITESPACE"," ",4798],"=",["T_WHITESPACE"," ",4798],["T_STRING","true",4798],";",["T_WHITESPACE","\n              ",4798],"}",["T_WHITESPACE","\n              ",4799],["T_IF","if",4800],["T_WHITESPACE"," ",4800],"(",["T_VARIABLE","$i",4800],["T_IS_GREATER_OR_EQUAL",">=",4800],["T_VARIABLE","$p_options",4800],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4800],"]","[",["T_VARIABLE","$j",4800],"]","[",["T_CONSTANT_ENCAPSED_STRING","'end'",4800],"]",")",["T_WHITESPACE"," ",4800],"{",["T_WHITESPACE","\n                  ",4800],["T_VARIABLE","$j_start",4801],["T_WHITESPACE"," ",4801],"=",["T_WHITESPACE"," ",4801],["T_VARIABLE","$j",4801],"+",["T_LNUMBER","1",4801],";",["T_WHITESPACE","\n              ",4801],"}",["T_WHITESPACE","\n\n              ",4802],["T_IF","if",4804],["T_WHITESPACE"," ",4804],"(",["T_VARIABLE","$p_options",4804],"[",["T_STRING","PCLZIP_OPT_BY_INDEX",4804],"]","[",["T_VARIABLE","$j",4804],"]","[",["T_CONSTANT_ENCAPSED_STRING","'start'",4804],"]",">",["T_VARIABLE","$i",4804],")",["T_WHITESPACE"," ",4804],"{",["T_WHITESPACE","\n                  ",4804],["T_BREAK","break",4805],";",["T_WHITESPACE","\n              ",4805],"}",["T_WHITESPACE","\n          ",4806],"}",["T_WHITESPACE","\n      ",4807],"}",["T_WHITESPACE","\n      ",4808],["T_ELSE","else",4809],["T_WHITESPACE"," ",4809],"{",["T_WHITESPACE","\n      \t",4809],["T_VARIABLE","$v_found",4810],["T_WHITESPACE"," ",4810],"=",["T_WHITESPACE"," ",4810],["T_STRING","true",4810],";",["T_WHITESPACE","\n      ",4810],"}",["T_WHITESPACE","\n\n      ",4811],["T_COMMENT","\/\/ ----- Look for deletion\n",4813],["T_WHITESPACE","      ",4814],["T_IF","if",4814],["T_WHITESPACE"," ",4814],"(",["T_VARIABLE","$v_found",4814],")",["T_WHITESPACE","\n      ",4814],"{",["T_WHITESPACE","\n        ",4815],["T_UNSET","unset",4816],"(",["T_VARIABLE","$v_header_list",4816],"[",["T_VARIABLE","$v_nb_extracted",4816],"]",")",";",["T_WHITESPACE","\n      ",4816],"}",["T_WHITESPACE","\n      ",4817],["T_ELSE","else",4818],["T_WHITESPACE","\n      ",4818],"{",["T_WHITESPACE","\n        ",4819],["T_VARIABLE","$v_nb_extracted",4820],["T_INC","++",4820],";",["T_WHITESPACE","\n      ",4820],"}",["T_WHITESPACE","\n    ",4821],"}",["T_WHITESPACE","\n\n    ",4822],["T_COMMENT","\/\/ ----- Look if something need to be deleted\n",4824],["T_WHITESPACE","    ",4825],["T_IF","if",4825],["T_WHITESPACE"," ",4825],"(",["T_VARIABLE","$v_nb_extracted",4825],["T_WHITESPACE"," ",4825],">",["T_WHITESPACE"," ",4825],["T_LNUMBER","0",4825],")",["T_WHITESPACE"," ",4825],"{",["T_WHITESPACE","\n\n        ",4825],["T_COMMENT","\/\/ ----- Creates a temporay file\n",4827],["T_WHITESPACE","        ",4828],["T_VARIABLE","$v_zip_temp_name",4828],["T_WHITESPACE"," ",4828],"=",["T_WHITESPACE"," ",4828],["T_STRING","PCLZIP_TEMPORARY_DIR",4828],".",["T_STRING","uniqid",4828],"(",["T_CONSTANT_ENCAPSED_STRING","'pclzip-'",4828],")",".",["T_CONSTANT_ENCAPSED_STRING","'.tmp'",4828],";",["T_WHITESPACE","\n\n        ",4828],["T_COMMENT","\/\/ ----- Creates a temporary zip archive\n",4830],["T_WHITESPACE","        ",4831],["T_VARIABLE","$v_temp_zip",4831],["T_WHITESPACE"," ",4831],"=",["T_WHITESPACE"," ",4831],["T_NEW","new",4831],["T_WHITESPACE"," ",4831],["T_STRING","PclZip",4831],"(",["T_VARIABLE","$v_zip_temp_name",4831],")",";",["T_WHITESPACE","\n\n        ",4831],["T_COMMENT","\/\/ ----- Open the temporary zip file in write mode\n",4833],["T_WHITESPACE","        ",4834],["T_IF","if",4834],["T_WHITESPACE"," ",4834],"(","(",["T_VARIABLE","$v_result",4834],["T_WHITESPACE"," ",4834],"=",["T_WHITESPACE"," ",4834],["T_VARIABLE","$v_temp_zip",4834],["T_OBJECT_OPERATOR","->",4834],["T_STRING","privOpenFd",4834],"(",["T_CONSTANT_ENCAPSED_STRING","'wb'",4834],")",")",["T_WHITESPACE"," ",4834],["T_IS_NOT_EQUAL","!=",4834],["T_WHITESPACE"," ",4834],["T_LNUMBER","1",4834],")",["T_WHITESPACE"," ",4834],"{",["T_WHITESPACE","\n            ",4834],["T_VARIABLE","$this",4835],["T_OBJECT_OPERATOR","->",4835],["T_STRING","privCloseFd",4835],"(",")",";",["T_WHITESPACE","\n\n            ",4835],["T_COMMENT","\/\/ ----- Return\n",4837],["T_WHITESPACE","            ",4838],["T_RETURN","return",4838],["T_WHITESPACE"," ",4838],["T_VARIABLE","$v_result",4838],";",["T_WHITESPACE","\n        ",4838],"}",["T_WHITESPACE","\n\n        ",4839],["T_COMMENT","\/\/ ----- Look which file need to be kept\n",4841],["T_WHITESPACE","        ",4842],["T_FOR","for",4842],["T_WHITESPACE"," ",4842],"(",["T_VARIABLE","$i",4842],"=",["T_LNUMBER","0",4842],";",["T_WHITESPACE"," ",4842],["T_VARIABLE","$i",4842],"<",["T_STRING","sizeof",4842],"(",["T_VARIABLE","$v_header_list",4842],")",";",["T_WHITESPACE"," ",4842],["T_VARIABLE","$i",4842],["T_INC","++",4842],")",["T_WHITESPACE"," ",4842],"{",["T_WHITESPACE","\n\n            ",4842],["T_COMMENT","\/\/ ----- Calculate the position of the header\n",4844],["T_WHITESPACE","            ",4845],"@",["T_STRING","rewind",4845],"(",["T_VARIABLE","$this",4845],["T_OBJECT_OPERATOR","->",4845],["T_STRING","zip_fd",4845],")",";",["T_WHITESPACE","\n            ",4845],["T_IF","if",4846],["T_WHITESPACE"," ",4846],"(","@",["T_STRING","fseek",4846],"(",["T_VARIABLE","$this",4846],["T_OBJECT_OPERATOR","->",4846],["T_STRING","zip_fd",4846],",",["T_WHITESPACE","  ",4846],["T_VARIABLE","$v_header_list",4846],"[",["T_VARIABLE","$i",4846],"]","[",["T_CONSTANT_ENCAPSED_STRING","'offset'",4846],"]",")",")",["T_WHITESPACE"," ",4846],"{",["T_WHITESPACE","\n                ",4846],["T_COMMENT","\/\/ ----- Close the zip file\n",4847],["T_WHITESPACE","                ",4848],["T_VARIABLE","$this",4848],["T_OBJECT_OPERATOR","->",4848],["T_STRING","privCloseFd",4848],"(",")",";",["T_WHITESPACE","\n                ",4848],["T_VARIABLE","$v_temp_zip",4849],["T_OBJECT_OPERATOR","->",4849],["T_STRING","privCloseFd",4849],"(",")",";",["T_WHITESPACE","\n                ",4849],"@",["T_STRING","unlink",4850],"(",["T_VARIABLE","$v_zip_temp_name",4850],")",";",["T_WHITESPACE","\n\n                ",4850],["T_COMMENT","\/\/ ----- Error log\n",4852],["T_WHITESPACE","                ",4853],["T_STRING","PclZip",4853],["T_DOUBLE_COLON","::",4853],["T_STRING","privErrorLog",4853],"(",["T_STRING","PCLZIP_ERR_INVALID_ARCHIVE_ZIP",4853],",",["T_WHITESPACE"," ",4853],["T_CONSTANT_ENCAPSED_STRING","'Invalid archive size'",4853],")",";",["T_WHITESPACE","\n\n                ",4853],["T_COMMENT","\/\/ ----- Return\n",4855],["T_WHITESPACE","                ",4856],["T_RETURN","return",4856],["T_WHITESPACE"," ",4856],["T_STRING","PclZip",4856],["T_DOUBLE_COLON","::",4856],["T_STRING","errorCode",4856],"(",")",";",["T_WHITESPACE","\n            ",4856],"}",["T_WHITESPACE","\n\n            ",4857],["T_COMMENT","\/\/ ----- Read the file header\n",4859],["T_WHITESPACE","            ",4860],["T_VARIABLE","$v_local_header",4860],["T_WHITESPACE"," ",4860],"=",["T_WHITESPACE"," ",4860],["T_ARRAY","array",4860],"(",")",";",["T_WHITESPACE","\n            ",4860],["T_IF","if",4861],["T_WHITESPACE"," ",4861],"(","(",["T_VARIABLE","$v_result",4861],["T_WHITESPACE"," ",4861],"=",["T_WHITESPACE"," ",4861],["T_VARIABLE","$this",4861],["T_OBJECT_OPERATOR","->",4861],["T_STRING","privReadFileHeader",4861],"(",["T_VARIABLE","$v_local_header",4861],")",")",["T_WHITESPACE"," ",4861],["T_IS_NOT_EQUAL","!=",4861],["T_WHITESPACE"," ",4861],["T_LNUMBER","1",4861],")",["T_WHITESPACE"," ",4861],"{",["T_WHITESPACE","\n                ",4861],["T_COMMENT","\/\/ ----- Close the zip file\n",4862],["T_WHITESPACE","                ",4863],["T_VARIABLE","$this",4863],["T_OBJECT_OPERATOR","->",4863],["T_STRING","privCloseFd",4863],"(",")",";",["T_WHITESPACE","\n                ",4863],["T_VARIABLE","$v_temp_zip",4864],["T_OBJECT_OPERATOR","->",4864],["T_STRING","privCloseFd",4864],"(",")",";",["T_WHITESPACE","\n                ",4864],"@",["T_STRING","unlink",4865],"(",["T_VARIABLE","$v_zip_temp_name",4865],")",";",["T_WHITESPACE","\n\n                ",4865],["T_COMMENT","\/\/ ----- Return\n",4867],["T_WHITESPACE","                ",4868],["T_RETURN","return",4868],["T_WHITESPACE"," ",4868],["T_VARIABLE","$v_result",4868],";",["T_WHITESPACE","\n            ",4868],"}",["T_WHITESPACE","\n\n            ",4869],["T_COMMENT","\/\/ ----- Check that local file header is same as central file header\n",4871],["T_WHITESPACE","            ",4872],["T_IF","if",4872],["T_WHITESPACE"," ",4872],"(",["T_VARIABLE","$this",4872],["T_OBJECT_OPERATOR","->",4872],["T_STRING","privCheckFileHeaders",4872],"(",["T_VARIABLE","$v_local_header",4872],",",["T_WHITESPACE","\n\t\t\t                                ",4872],["T_VARIABLE","$v_header_list",4873],"[",["T_VARIABLE","$i",4873],"]",")",["T_WHITESPACE"," ",4873],["T_IS_NOT_EQUAL","!=",4873],["T_WHITESPACE"," ",4873],["T_LNUMBER","1",4873],")",["T_WHITESPACE"," ",4873],"{",["T_WHITESPACE","\n                ",4873],["T_COMMENT","\/\/ TBC\n",4874],["T_WHITESPACE","            ",4875],"}",["T_WHITESPACE","\n            ",4875],["T_UNSET","unset",4876],"(",["T_VARIABLE","$v_local_header",4876],")",";",["T_WHITESPACE","\n\n            ",4876],["T_COMMENT","\/\/ ----- Write the file header\n",4878],["T_WHITESPACE","            ",4879],["T_IF","if",4879],["T_WHITESPACE"," ",4879],"(","(",["T_VARIABLE","$v_result",4879],["T_WHITESPACE"," ",4879],"=",["T_WHITESPACE"," ",4879],["T_VARIABLE","$v_temp_zip",4879],["T_OBJECT_OPERATOR","->",4879],["T_STRING","privWriteFileHeader",4879],"(",["T_VARIABLE","$v_header_list",4879],"[",["T_VARIABLE","$i",4879],"]",")",")",["T_WHITESPACE"," ",4879],["T_IS_NOT_EQUAL","!=",4879],["T_WHITESPACE"," ",4879],["T_LNUMBER","1",4879],")",["T_WHITESPACE"," ",4879],"{",["T_WHITESPACE","\n                ",4879],["T_COMMENT","\/\/ ----- Close the zip file\n",4880],["T_WHITESPACE","                ",4881],["T_VARIABLE","$this",4881],["T_OBJECT_OPERATOR","->",4881],["T_STRING","privCloseFd",4881],"(",")",";",["T_WHITESPACE","\n                ",4881],["T_VARIABLE","$v_temp_zip",4882],["T_OBJECT_OPERATOR","->",4882],["T_STRING","privCloseFd",4882],"(",")",";",["T_WHITESPACE","\n                ",4882],"@",["T_STRING","unlink",4883],"(",["T_VARIABLE","$v_zip_temp_name",4883],")",";",["T_WHITESPACE","\n\n                ",4883],["T_COMMENT","\/\/ ----- Return\n",4885],["T_WHITESPACE","                ",4886],["T_RETURN","return",4886],["T_WHITESPACE"," ",4886],["T_VARIABLE","$v_result",4886],";",["T_WHITESPACE","\n            ",4886],"}",["T_WHITESPACE","\n\n            ",4887],["T_COMMENT","\/\/ ----- Read\/write the data block\n",4889],["T_WHITESPACE","            ",4890],["T_IF","if",4890],["T_WHITESPACE"," ",4890],"(","(",["T_VARIABLE","$v_result",4890],["T_WHITESPACE"," ",4890],"=",["T_WHITESPACE"," ",4890],["T_STRING","PclZipUtilCopyBlock",4890],"(",["T_VARIABLE","$this",4890],["T_OBJECT_OPERATOR","->",4890],["T_STRING","zip_fd",4890],",",["T_WHITESPACE"," ",4890],["T_VARIABLE","$v_temp_zip",4890],["T_OBJECT_OPERATOR","->",4890],["T_STRING","zip_fd",4890],",",["T_WHITESPACE"," ",4890],["T_VARIABLE","$v_header_list",4890],"[",["T_VARIABLE","$i",4890],"]","[",["T_CONSTANT_ENCAPSED_STRING","'compressed_size'",4890],"]",")",")",["T_WHITESPACE"," ",4890],["T_IS_NOT_EQUAL","!=",4890],["T_WHITESPACE"," ",4890],["T_LNUMBER","1",4890],")",["T_WHITESPACE"," ",4890],"{",["T_WHITESPACE","\n                ",4890],["T_COMMENT","\/\/ ----- Close the zip file\n",4891],["T_WHITESPACE","                ",4892],["T_VARIABLE","$this",4892],["T_OBJECT_OPERATOR","->",4892],["T_STRING","privCloseFd",4892],"(",")",";",["T_WHITESPACE","\n                ",4892],["T_VARIABLE","$v_temp_zip",4893],["T_OBJECT_OPERATOR","->",4893],["T_STRING","privCloseFd",4893],"(",")",";",["T_WHITESPACE","\n                ",4893],"@",["T_STRING","unlink",4894],"(",["T_VARIABLE","$v_zip_temp_name",4894],")",";",["T_WHITESPACE","\n\n                ",4894],["T_COMMENT","\/\/ ----- Return\n",4896],["T_WHITESPACE","                ",4897],["T_RETURN","return",4897],["T_WHITESPACE"," ",4897],["T_VARIABLE","$v_result",4897],";",["T_WHITESPACE","\n            ",4897],"}",["T_WHITESPACE","\n        ",4898],"}",["T_WHITESPACE","\n\n        ",4899],["T_COMMENT","\/\/ ----- Store the offset of the central dir\n",4901],["T_WHITESPACE","        ",4902],["T_VARIABLE","$v_offset",4902],["T_WHITESPACE"," ",4902],"=",["T_WHITESPACE"," ",4902],"@",["T_STRING","ftell",4902],"(",["T_VARIABLE","$v_temp_zip",4902],["T_OBJECT_OPERATOR","->",4902],["T_STRING","zip_fd",4902],")",";",["T_WHITESPACE","\n\n        ",4902],["T_COMMENT","\/\/ ----- Re-Create the Central Dir files header\n",4904],["T_WHITESPACE","        ",4905],["T_FOR","for",4905],["T_WHITESPACE"," ",4905],"(",["T_VARIABLE","$i",4905],"=",["T_LNUMBER","0",4905],";",["T_WHITESPACE"," ",4905],["T_VARIABLE","$i",4905],"<",["T_STRING","sizeof",4905],"(",["T_VARIABLE","$v_header_list",4905],")",";",["T_WHITESPACE"," ",4905],["T_VARIABLE","$i",4905],["T_INC","++",4905],")",["T_WHITESPACE"," ",4905],"{",["T_WHITESPACE","\n            ",4905],["T_COMMENT","\/\/ ----- Create the file header\n",4906],["T_WHITESPACE","            ",4907],["T_IF","if",4907],["T_WHITESPACE"," ",4907],"(","(",["T_VARIABLE","$v_result",4907],["T_WHITESPACE"," ",4907],"=",["T_WHITESPACE"," ",4907],["T_VARIABLE","$v_temp_zip",4907],["T_OBJECT_OPERATOR","->",4907],["T_STRING","privWriteCentralFileHeader",4907],"(",["T_VARIABLE","$v_header_list",4907],"[",["T_VARIABLE","$i",4907],"]",")",")",["T_WHITESPACE"," ",4907],["T_IS_NOT_EQUAL","!=",4907],["T_WHITESPACE"," ",4907],["T_LNUMBER","1",4907],")",["T_WHITESPACE"," ",4907],"{",["T_WHITESPACE","\n                ",4907],["T_VARIABLE","$v_temp_zip",4908],["T_OBJECT_OPERATOR","->",4908],["T_STRING","privCloseFd",4908],"(",")",";",["T_WHITESPACE","\n                ",4908],["T_VARIABLE","$this",4909],["T_OBJECT_OPERATOR","->",4909],["T_STRING","privCloseFd",4909],"(",")",";",["T_WHITESPACE","\n                ",4909],"@",["T_STRING","unlink",4910],"(",["T_VARIABLE","$v_zip_temp_name",4910],")",";",["T_WHITESPACE","\n\n                ",4910],["T_COMMENT","\/\/ ----- Return\n",4912],["T_WHITESPACE","                ",4913],["T_RETURN","return",4913],["T_WHITESPACE"," ",4913],["T_VARIABLE","$v_result",4913],";",["T_WHITESPACE","\n            ",4913],"}",["T_WHITESPACE","\n\n            ",4914],["T_COMMENT","\/\/ ----- Transform the header to a 'usable' info\n",4916],["T_WHITESPACE","            ",4917],["T_VARIABLE","$v_temp_zip",4917],["T_OBJECT_OPERATOR","->",4917],["T_STRING","privConvertHeader2FileInfo",4917],"(",["T_VARIABLE","$v_header_list",4917],"[",["T_VARIABLE","$i",4917],"]",",",["T_WHITESPACE"," ",4917],["T_VARIABLE","$p_result_list",4917],"[",["T_VARIABLE","$i",4917],"]",")",";",["T_WHITESPACE","\n        ",4917],"}",["T_WHITESPACE","\n\n\n        ",4918],["T_COMMENT","\/\/ ----- Zip file comment\n",4921],["T_WHITESPACE","        ",4922],["T_VARIABLE","$v_comment",4922],["T_WHITESPACE"," ",4922],"=",["T_WHITESPACE"," ",4922],["T_CONSTANT_ENCAPSED_STRING","''",4922],";",["T_WHITESPACE","\n        ",4922],["T_IF","if",4923],["T_WHITESPACE"," ",4923],"(",["T_ISSET","isset",4923],"(",["T_VARIABLE","$p_options",4923],"[",["T_STRING","PCLZIP_OPT_COMMENT",4923],"]",")",")",["T_WHITESPACE"," ",4923],"{",["T_WHITESPACE","\n          ",4923],["T_VARIABLE","$v_comment",4924],["T_WHITESPACE"," ",4924],"=",["T_WHITESPACE"," ",4924],["T_VARIABLE","$p_options",4924],"[",["T_STRING","PCLZIP_OPT_COMMENT",4924],"]",";",["T_WHITESPACE","\n        ",4924],"}",["T_WHITESPACE","\n\n        ",4925],["T_COMMENT","\/\/ ----- Calculate the size of the central header\n",4927],["T_WHITESPACE","        ",4928],["T_VARIABLE","$v_size",4928],["T_WHITESPACE"," ",4928],"=",["T_WHITESPACE"," ",4928],"@",["T_STRING","ftell",4928],"(",["T_VARIABLE","$v_temp_zip",4928],["T_OBJECT_OPERATOR","->",4928],["T_STRING","zip_fd",4928],")","-",["T_VARIABLE","$v_offset",4928],";",["T_WHITESPACE","\n\n        ",4928],["T_COMMENT","\/\/ ----- Create the central dir footer\n",4930],["T_WHITESPACE","        ",4931],["T_IF","if",4931],["T_WHITESPACE"," ",4931],"(","(",["T_VARIABLE","$v_result",4931],["T_WHITESPACE"," ",4931],"=",["T_WHITESPACE"," ",4931],["T_VARIABLE","$v_temp_zip",4931],["T_OBJECT_OPERATOR","->",4931],["T_STRING","privWriteCentralHeader",4931],"(",["T_STRING","sizeof",4931],"(",["T_VARIABLE","$v_header_list",4931],")",",",["T_WHITESPACE"," ",4931],["T_VARIABLE","$v_size",4931],",",["T_WHITESPACE"," ",4931],["T_VARIABLE","$v_offset",4931],",",["T_WHITESPACE"," ",4931],["T_VARIABLE","$v_comment",4931],")",")",["T_WHITESPACE"," ",4931],["T_IS_NOT_EQUAL","!=",4931],["T_WHITESPACE"," ",4931],["T_LNUMBER","1",4931],")",["T_WHITESPACE"," ",4931],"{",["T_WHITESPACE","\n            ",4931],["T_COMMENT","\/\/ ----- Reset the file list\n",4932],["T_WHITESPACE","            ",4933],["T_UNSET","unset",4933],"(",["T_VARIABLE","$v_header_list",4933],")",";",["T_WHITESPACE","\n            ",4933],["T_VARIABLE","$v_temp_zip",4934],["T_OBJECT_OPERATOR","->",4934],["T_STRING","privCloseFd",4934],"(",")",";",["T_WHITESPACE","\n            ",4934],["T_VARIABLE","$this",4935],["T_OBJECT_OPERATOR","->",4935],["T_STRING","privCloseFd",4935],"(",")",";",["T_WHITESPACE","\n            ",4935],"@",["T_STRING","unlink",4936],"(",["T_VARIABLE","$v_zip_temp_name",4936],")",";",["T_WHITESPACE","\n\n            ",4936],["T_COMMENT","\/\/ ----- Return\n",4938],["T_WHITESPACE","            ",4939],["T_RETURN","return",4939],["T_WHITESPACE"," ",4939],["T_VARIABLE","$v_result",4939],";",["T_WHITESPACE","\n        ",4939],"}",["T_WHITESPACE","\n\n        ",4940],["T_COMMENT","\/\/ ----- Close\n",4942],["T_WHITESPACE","        ",4943],["T_VARIABLE","$v_temp_zip",4943],["T_OBJECT_OPERATOR","->",4943],["T_STRING","privCloseFd",4943],"(",")",";",["T_WHITESPACE","\n        ",4943],["T_VARIABLE","$this",4944],["T_OBJECT_OPERATOR","->",4944],["T_STRING","privCloseFd",4944],"(",")",";",["T_WHITESPACE","\n\n        ",4944],["T_COMMENT","\/\/ ----- Delete the zip file\n",4946],["T_WHITESPACE","        ",4947],["T_COMMENT","\/\/ TBC : I should test the result ...\n",4947],["T_WHITESPACE","        ",4948],"@",["T_STRING","unlink",4948],"(",["T_VARIABLE","$this",4948],["T_OBJECT_OPERATOR","->",4948],["T_STRING","zipname",4948],")",";",["T_WHITESPACE","\n\n        ",4948],["T_COMMENT","\/\/ ----- Rename the temporary file\n",4950],["T_WHITESPACE","        ",4951],["T_COMMENT","\/\/ TBC : I should test the result ...\n",4951],["T_WHITESPACE","        ",4952],["T_COMMENT","\/\/@rename($v_zip_temp_name, $this->zipname);\n",4952],["T_WHITESPACE","        ",4953],["T_STRING","PclZipUtilRename",4953],"(",["T_VARIABLE","$v_zip_temp_name",4953],",",["T_WHITESPACE"," ",4953],["T_VARIABLE","$this",4953],["T_OBJECT_OPERATOR","->",4953],["T_STRING","zipname",4953],")",";",["T_WHITESPACE","\n\n        ",4953],["T_COMMENT","\/\/ ----- Destroy the temporary archive\n",4955],["T_WHITESPACE","        ",4956],["T_UNSET","unset",4956],"(",["T_VARIABLE","$v_temp_zip",4956],")",";",["T_WHITESPACE","\n    ",4956],"}",["T_WHITESPACE","\n\n    ",4957],["T_COMMENT","\/\/ ----- Remove every files : reset the file\n",4959],["T_WHITESPACE","    ",4960],["T_ELSE","else",4960],["T_WHITESPACE"," ",4960],["T_IF","if",4960],["T_WHITESPACE"," ",4960],"(",["T_VARIABLE","$v_central_dir",4960],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",4960],"]",["T_WHITESPACE"," ",4960],["T_IS_NOT_EQUAL","!=",4960],["T_WHITESPACE"," ",4960],["T_LNUMBER","0",4960],")",["T_WHITESPACE"," ",4960],"{",["T_WHITESPACE","\n        ",4960],["T_VARIABLE","$this",4961],["T_OBJECT_OPERATOR","->",4961],["T_STRING","privCloseFd",4961],"(",")",";",["T_WHITESPACE","\n\n        ",4961],["T_IF","if",4963],["T_WHITESPACE"," ",4963],"(","(",["T_VARIABLE","$v_result",4963],["T_WHITESPACE"," ",4963],"=",["T_WHITESPACE"," ",4963],["T_VARIABLE","$this",4963],["T_OBJECT_OPERATOR","->",4963],["T_STRING","privOpenFd",4963],"(",["T_CONSTANT_ENCAPSED_STRING","'wb'",4963],")",")",["T_WHITESPACE"," ",4963],["T_IS_NOT_EQUAL","!=",4963],["T_WHITESPACE"," ",4963],["T_LNUMBER","1",4963],")",["T_WHITESPACE"," ",4963],"{",["T_WHITESPACE","\n          ",4963],["T_RETURN","return",4964],["T_WHITESPACE"," ",4964],["T_VARIABLE","$v_result",4964],";",["T_WHITESPACE","\n        ",4964],"}",["T_WHITESPACE","\n\n        ",4965],["T_IF","if",4967],["T_WHITESPACE"," ",4967],"(","(",["T_VARIABLE","$v_result",4967],["T_WHITESPACE"," ",4967],"=",["T_WHITESPACE"," ",4967],["T_VARIABLE","$this",4967],["T_OBJECT_OPERATOR","->",4967],["T_STRING","privWriteCentralHeader",4967],"(",["T_LNUMBER","0",4967],",",["T_WHITESPACE"," ",4967],["T_LNUMBER","0",4967],",",["T_WHITESPACE"," ",4967],["T_LNUMBER","0",4967],",",["T_WHITESPACE"," ",4967],["T_CONSTANT_ENCAPSED_STRING","''",4967],")",")",["T_WHITESPACE"," ",4967],["T_IS_NOT_EQUAL","!=",4967],["T_WHITESPACE"," ",4967],["T_LNUMBER","1",4967],")",["T_WHITESPACE"," ",4967],"{",["T_WHITESPACE","\n          ",4967],["T_RETURN","return",4968],["T_WHITESPACE"," ",4968],["T_VARIABLE","$v_result",4968],";",["T_WHITESPACE","\n        ",4968],"}",["T_WHITESPACE","\n\n        ",4969],["T_VARIABLE","$this",4971],["T_OBJECT_OPERATOR","->",4971],["T_STRING","privCloseFd",4971],"(",")",";",["T_WHITESPACE","\n    ",4971],"}",["T_WHITESPACE","\n\n    ",4972],["T_COMMENT","\/\/ ----- Return\n",4974],["T_WHITESPACE","    ",4975],["T_RETURN","return",4975],["T_WHITESPACE"," ",4975],["T_VARIABLE","$v_result",4975],";",["T_WHITESPACE","\n  ",4975],"}",["T_WHITESPACE","\n  ",4976],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4977],["T_WHITESPACE","\n  ",4978],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4979],["T_WHITESPACE","  ",4980],["T_COMMENT","\/\/ Function : privDirCheck()\n",4980],["T_WHITESPACE","  ",4981],["T_COMMENT","\/\/ Description :\n",4981],["T_WHITESPACE","  ",4982],["T_COMMENT","\/\/   Check if a directory exists, if not it creates it and all the parents directory\n",4982],["T_WHITESPACE","  ",4983],["T_COMMENT","\/\/   which may be useful.\n",4983],["T_WHITESPACE","  ",4984],["T_COMMENT","\/\/ Parameters :\n",4984],["T_WHITESPACE","  ",4985],["T_COMMENT","\/\/   $p_dir : Directory path to check.\n",4985],["T_WHITESPACE","  ",4986],["T_COMMENT","\/\/ Return Values :\n",4986],["T_WHITESPACE","  ",4987],["T_COMMENT","\/\/    1 : OK\n",4987],["T_WHITESPACE","  ",4988],["T_COMMENT","\/\/   -1 : Unable to create directory\n",4988],["T_WHITESPACE","  ",4989],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",4989],["T_WHITESPACE","  ",4990],["T_FUNCTION","function",4990],["T_WHITESPACE"," ",4990],["T_STRING","privDirCheck",4990],"(",["T_VARIABLE","$p_dir",4990],",",["T_WHITESPACE"," ",4990],["T_VARIABLE","$p_is_dir",4990],"=",["T_STRING","false",4990],")",["T_WHITESPACE","\n  ",4990],"{",["T_WHITESPACE","\n    ",4991],["T_VARIABLE","$v_result",4992],["T_WHITESPACE"," ",4992],"=",["T_WHITESPACE"," ",4992],["T_LNUMBER","1",4992],";",["T_WHITESPACE","\n\n\n    ",4992],["T_COMMENT","\/\/ ----- Remove the final '\/'\n",4995],["T_WHITESPACE","    ",4996],["T_IF","if",4996],["T_WHITESPACE"," ",4996],"(","(",["T_VARIABLE","$p_is_dir",4996],")",["T_WHITESPACE"," ",4996],["T_BOOLEAN_AND","&&",4996],["T_WHITESPACE"," ",4996],"(",["T_STRING","substr",4996],"(",["T_VARIABLE","$p_dir",4996],",",["T_WHITESPACE"," ",4996],"-",["T_LNUMBER","1",4996],")",["T_IS_EQUAL","==",4996],["T_CONSTANT_ENCAPSED_STRING","'\/'",4996],")",")",["T_WHITESPACE","\n    ",4996],"{",["T_WHITESPACE","\n      ",4997],["T_VARIABLE","$p_dir",4998],["T_WHITESPACE"," ",4998],"=",["T_WHITESPACE"," ",4998],["T_STRING","substr",4998],"(",["T_VARIABLE","$p_dir",4998],",",["T_WHITESPACE"," ",4998],["T_LNUMBER","0",4998],",",["T_WHITESPACE"," ",4998],["T_STRING","strlen",4998],"(",["T_VARIABLE","$p_dir",4998],")","-",["T_LNUMBER","1",4998],")",";",["T_WHITESPACE","\n    ",4998],"}",["T_WHITESPACE","\n\n    ",4999],["T_COMMENT","\/\/ ----- Check the directory availability\n",5001],["T_WHITESPACE","    ",5002],["T_IF","if",5002],["T_WHITESPACE"," ",5002],"(","(",["T_STRING","is_dir",5002],"(",["T_VARIABLE","$p_dir",5002],")",")",["T_WHITESPACE"," ",5002],["T_BOOLEAN_OR","||",5002],["T_WHITESPACE"," ",5002],"(",["T_VARIABLE","$p_dir",5002],["T_WHITESPACE"," ",5002],["T_IS_EQUAL","==",5002],["T_WHITESPACE"," ",5002],["T_CONSTANT_ENCAPSED_STRING","\"\"",5002],")",")",["T_WHITESPACE","\n    ",5002],"{",["T_WHITESPACE","\n      ",5003],["T_RETURN","return",5004],["T_WHITESPACE"," ",5004],["T_LNUMBER","1",5004],";",["T_WHITESPACE","\n    ",5004],"}",["T_WHITESPACE","\n\n    ",5005],["T_COMMENT","\/\/ ----- Extract parent directory\n",5007],["T_WHITESPACE","    ",5008],["T_VARIABLE","$p_parent_dir",5008],["T_WHITESPACE"," ",5008],"=",["T_WHITESPACE"," ",5008],["T_STRING","dirname",5008],"(",["T_VARIABLE","$p_dir",5008],")",";",["T_WHITESPACE","\n\n    ",5008],["T_COMMENT","\/\/ ----- Just a check\n",5010],["T_WHITESPACE","    ",5011],["T_IF","if",5011],["T_WHITESPACE"," ",5011],"(",["T_VARIABLE","$p_parent_dir",5011],["T_WHITESPACE"," ",5011],["T_IS_NOT_EQUAL","!=",5011],["T_WHITESPACE"," ",5011],["T_VARIABLE","$p_dir",5011],")",["T_WHITESPACE","\n    ",5011],"{",["T_WHITESPACE","\n      ",5012],["T_COMMENT","\/\/ ----- Look for parent directory\n",5013],["T_WHITESPACE","      ",5014],["T_IF","if",5014],["T_WHITESPACE"," ",5014],"(",["T_VARIABLE","$p_parent_dir",5014],["T_WHITESPACE"," ",5014],["T_IS_NOT_EQUAL","!=",5014],["T_WHITESPACE"," ",5014],["T_CONSTANT_ENCAPSED_STRING","\"\"",5014],")",["T_WHITESPACE","\n      ",5014],"{",["T_WHITESPACE","\n        ",5015],["T_IF","if",5016],["T_WHITESPACE"," ",5016],"(","(",["T_VARIABLE","$v_result",5016],["T_WHITESPACE"," ",5016],"=",["T_WHITESPACE"," ",5016],["T_VARIABLE","$this",5016],["T_OBJECT_OPERATOR","->",5016],["T_STRING","privDirCheck",5016],"(",["T_VARIABLE","$p_parent_dir",5016],")",")",["T_WHITESPACE"," ",5016],["T_IS_NOT_EQUAL","!=",5016],["T_WHITESPACE"," ",5016],["T_LNUMBER","1",5016],")",["T_WHITESPACE","\n        ",5016],"{",["T_WHITESPACE","\n          ",5017],["T_RETURN","return",5018],["T_WHITESPACE"," ",5018],["T_VARIABLE","$v_result",5018],";",["T_WHITESPACE","\n        ",5018],"}",["T_WHITESPACE","\n      ",5019],"}",["T_WHITESPACE","\n    ",5020],"}",["T_WHITESPACE","\n\n    ",5021],["T_COMMENT","\/\/ ----- Create the directory\n",5023],["T_WHITESPACE","    ",5024],["T_IF","if",5024],["T_WHITESPACE"," ",5024],"(","!","@",["T_STRING","mkdir",5024],"(",["T_VARIABLE","$p_dir",5024],",",["T_WHITESPACE"," ",5024],["T_LNUMBER","0777",5024],")",")",["T_WHITESPACE","\n    ",5024],"{",["T_WHITESPACE","\n      ",5025],["T_COMMENT","\/\/ ----- Error log\n",5026],["T_WHITESPACE","      ",5027],["T_STRING","PclZip",5027],["T_DOUBLE_COLON","::",5027],["T_STRING","privErrorLog",5027],"(",["T_STRING","PCLZIP_ERR_DIR_CREATE_FAIL",5027],",",["T_WHITESPACE"," ",5027],"\"",["T_ENCAPSED_AND_WHITESPACE","Unable to create directory '",5027],["T_VARIABLE","$p_dir",5027],["T_ENCAPSED_AND_WHITESPACE","'",5027],"\"",")",";",["T_WHITESPACE","\n\n      ",5027],["T_COMMENT","\/\/ ----- Return\n",5029],["T_WHITESPACE","      ",5030],["T_RETURN","return",5030],["T_WHITESPACE"," ",5030],["T_STRING","PclZip",5030],["T_DOUBLE_COLON","::",5030],["T_STRING","errorCode",5030],"(",")",";",["T_WHITESPACE","\n    ",5030],"}",["T_WHITESPACE","\n\n    ",5031],["T_COMMENT","\/\/ ----- Return\n",5033],["T_WHITESPACE","    ",5034],["T_RETURN","return",5034],["T_WHITESPACE"," ",5034],["T_VARIABLE","$v_result",5034],";",["T_WHITESPACE","\n  ",5034],"}",["T_WHITESPACE","\n  ",5035],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5036],["T_WHITESPACE","\n  ",5037],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5038],["T_WHITESPACE","  ",5039],["T_COMMENT","\/\/ Function : privMerge()\n",5039],["T_WHITESPACE","  ",5040],["T_COMMENT","\/\/ Description :\n",5040],["T_WHITESPACE","  ",5041],["T_COMMENT","\/\/   If $p_archive_to_add does not exist, the function exit with a success result.\n",5041],["T_WHITESPACE","  ",5042],["T_COMMENT","\/\/ Parameters :\n",5042],["T_WHITESPACE","  ",5043],["T_COMMENT","\/\/ Return Values :\n",5043],["T_WHITESPACE","  ",5044],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5044],["T_WHITESPACE","  ",5045],["T_FUNCTION","function",5045],["T_WHITESPACE"," ",5045],["T_STRING","privMerge",5045],"(","&",["T_VARIABLE","$p_archive_to_add",5045],")",["T_WHITESPACE","\n  ",5045],"{",["T_WHITESPACE","\n    ",5046],["T_VARIABLE","$v_result",5047],"=",["T_LNUMBER","1",5047],";",["T_WHITESPACE","\n\n    ",5047],["T_COMMENT","\/\/ ----- Look if the archive_to_add exists\n",5049],["T_WHITESPACE","    ",5050],["T_IF","if",5050],["T_WHITESPACE"," ",5050],"(","!",["T_STRING","is_file",5050],"(",["T_VARIABLE","$p_archive_to_add",5050],["T_OBJECT_OPERATOR","->",5050],["T_STRING","zipname",5050],")",")",["T_WHITESPACE","\n    ",5050],"{",["T_WHITESPACE","\n\n      ",5051],["T_COMMENT","\/\/ ----- Nothing to merge, so merge is a success\n",5053],["T_WHITESPACE","      ",5054],["T_VARIABLE","$v_result",5054],["T_WHITESPACE"," ",5054],"=",["T_WHITESPACE"," ",5054],["T_LNUMBER","1",5054],";",["T_WHITESPACE","\n\n      ",5054],["T_COMMENT","\/\/ ----- Return\n",5056],["T_WHITESPACE","      ",5057],["T_RETURN","return",5057],["T_WHITESPACE"," ",5057],["T_VARIABLE","$v_result",5057],";",["T_WHITESPACE","\n    ",5057],"}",["T_WHITESPACE","\n\n    ",5058],["T_COMMENT","\/\/ ----- Look if the archive exists\n",5060],["T_WHITESPACE","    ",5061],["T_IF","if",5061],["T_WHITESPACE"," ",5061],"(","!",["T_STRING","is_file",5061],"(",["T_VARIABLE","$this",5061],["T_OBJECT_OPERATOR","->",5061],["T_STRING","zipname",5061],")",")",["T_WHITESPACE","\n    ",5061],"{",["T_WHITESPACE","\n\n      ",5062],["T_COMMENT","\/\/ ----- Do a duplicate\n",5064],["T_WHITESPACE","      ",5065],["T_VARIABLE","$v_result",5065],["T_WHITESPACE"," ",5065],"=",["T_WHITESPACE"," ",5065],["T_VARIABLE","$this",5065],["T_OBJECT_OPERATOR","->",5065],["T_STRING","privDuplicate",5065],"(",["T_VARIABLE","$p_archive_to_add",5065],["T_OBJECT_OPERATOR","->",5065],["T_STRING","zipname",5065],")",";",["T_WHITESPACE","\n\n      ",5065],["T_COMMENT","\/\/ ----- Return\n",5067],["T_WHITESPACE","      ",5068],["T_RETURN","return",5068],["T_WHITESPACE"," ",5068],["T_VARIABLE","$v_result",5068],";",["T_WHITESPACE","\n    ",5068],"}",["T_WHITESPACE","\n\n    ",5069],["T_COMMENT","\/\/ ----- Open the zip file\n",5071],["T_WHITESPACE","    ",5072],["T_IF","if",5072],["T_WHITESPACE"," ",5072],"(","(",["T_VARIABLE","$v_result",5072],"=",["T_VARIABLE","$this",5072],["T_OBJECT_OPERATOR","->",5072],["T_STRING","privOpenFd",5072],"(",["T_CONSTANT_ENCAPSED_STRING","'rb'",5072],")",")",["T_WHITESPACE"," ",5072],["T_IS_NOT_EQUAL","!=",5072],["T_WHITESPACE"," ",5072],["T_LNUMBER","1",5072],")",["T_WHITESPACE","\n    ",5072],"{",["T_WHITESPACE","\n      ",5073],["T_COMMENT","\/\/ ----- Return\n",5074],["T_WHITESPACE","      ",5075],["T_RETURN","return",5075],["T_WHITESPACE"," ",5075],["T_VARIABLE","$v_result",5075],";",["T_WHITESPACE","\n    ",5075],"}",["T_WHITESPACE","\n\n    ",5076],["T_COMMENT","\/\/ ----- Read the central directory informations\n",5078],["T_WHITESPACE","    ",5079],["T_VARIABLE","$v_central_dir",5079],["T_WHITESPACE"," ",5079],"=",["T_WHITESPACE"," ",5079],["T_ARRAY","array",5079],"(",")",";",["T_WHITESPACE","\n    ",5079],["T_IF","if",5080],["T_WHITESPACE"," ",5080],"(","(",["T_VARIABLE","$v_result",5080],["T_WHITESPACE"," ",5080],"=",["T_WHITESPACE"," ",5080],["T_VARIABLE","$this",5080],["T_OBJECT_OPERATOR","->",5080],["T_STRING","privReadEndCentralDir",5080],"(",["T_VARIABLE","$v_central_dir",5080],")",")",["T_WHITESPACE"," ",5080],["T_IS_NOT_EQUAL","!=",5080],["T_WHITESPACE"," ",5080],["T_LNUMBER","1",5080],")",["T_WHITESPACE","\n    ",5080],"{",["T_WHITESPACE","\n      ",5081],["T_VARIABLE","$this",5082],["T_OBJECT_OPERATOR","->",5082],["T_STRING","privCloseFd",5082],"(",")",";",["T_WHITESPACE","\n      ",5082],["T_RETURN","return",5083],["T_WHITESPACE"," ",5083],["T_VARIABLE","$v_result",5083],";",["T_WHITESPACE","\n    ",5083],"}",["T_WHITESPACE","\n\n    ",5084],["T_COMMENT","\/\/ ----- Go to beginning of File\n",5086],["T_WHITESPACE","    ",5087],"@",["T_STRING","rewind",5087],"(",["T_VARIABLE","$this",5087],["T_OBJECT_OPERATOR","->",5087],["T_STRING","zip_fd",5087],")",";",["T_WHITESPACE","\n\n    ",5087],["T_COMMENT","\/\/ ----- Open the archive_to_add file\n",5089],["T_WHITESPACE","    ",5090],["T_IF","if",5090],["T_WHITESPACE"," ",5090],"(","(",["T_VARIABLE","$v_result",5090],"=",["T_VARIABLE","$p_archive_to_add",5090],["T_OBJECT_OPERATOR","->",5090],["T_STRING","privOpenFd",5090],"(",["T_CONSTANT_ENCAPSED_STRING","'rb'",5090],")",")",["T_WHITESPACE"," ",5090],["T_IS_NOT_EQUAL","!=",5090],["T_WHITESPACE"," ",5090],["T_LNUMBER","1",5090],")",["T_WHITESPACE","\n    ",5090],"{",["T_WHITESPACE","\n      ",5091],["T_VARIABLE","$this",5092],["T_OBJECT_OPERATOR","->",5092],["T_STRING","privCloseFd",5092],"(",")",";",["T_WHITESPACE","\n\n      ",5092],["T_COMMENT","\/\/ ----- Return\n",5094],["T_WHITESPACE","      ",5095],["T_RETURN","return",5095],["T_WHITESPACE"," ",5095],["T_VARIABLE","$v_result",5095],";",["T_WHITESPACE","\n    ",5095],"}",["T_WHITESPACE","\n\n    ",5096],["T_COMMENT","\/\/ ----- Read the central directory informations\n",5098],["T_WHITESPACE","    ",5099],["T_VARIABLE","$v_central_dir_to_add",5099],["T_WHITESPACE"," ",5099],"=",["T_WHITESPACE"," ",5099],["T_ARRAY","array",5099],"(",")",";",["T_WHITESPACE","\n    ",5099],["T_IF","if",5100],["T_WHITESPACE"," ",5100],"(","(",["T_VARIABLE","$v_result",5100],["T_WHITESPACE"," ",5100],"=",["T_WHITESPACE"," ",5100],["T_VARIABLE","$p_archive_to_add",5100],["T_OBJECT_OPERATOR","->",5100],["T_STRING","privReadEndCentralDir",5100],"(",["T_VARIABLE","$v_central_dir_to_add",5100],")",")",["T_WHITESPACE"," ",5100],["T_IS_NOT_EQUAL","!=",5100],["T_WHITESPACE"," ",5100],["T_LNUMBER","1",5100],")",["T_WHITESPACE","\n    ",5100],"{",["T_WHITESPACE","\n      ",5101],["T_VARIABLE","$this",5102],["T_OBJECT_OPERATOR","->",5102],["T_STRING","privCloseFd",5102],"(",")",";",["T_WHITESPACE","\n      ",5102],["T_VARIABLE","$p_archive_to_add",5103],["T_OBJECT_OPERATOR","->",5103],["T_STRING","privCloseFd",5103],"(",")",";",["T_WHITESPACE","\n\n      ",5103],["T_RETURN","return",5105],["T_WHITESPACE"," ",5105],["T_VARIABLE","$v_result",5105],";",["T_WHITESPACE","\n    ",5105],"}",["T_WHITESPACE","\n\n    ",5106],["T_COMMENT","\/\/ ----- Go to beginning of File\n",5108],["T_WHITESPACE","    ",5109],"@",["T_STRING","rewind",5109],"(",["T_VARIABLE","$p_archive_to_add",5109],["T_OBJECT_OPERATOR","->",5109],["T_STRING","zip_fd",5109],")",";",["T_WHITESPACE","\n\n    ",5109],["T_COMMENT","\/\/ ----- Creates a temporay file\n",5111],["T_WHITESPACE","    ",5112],["T_VARIABLE","$v_zip_temp_name",5112],["T_WHITESPACE"," ",5112],"=",["T_WHITESPACE"," ",5112],["T_STRING","PCLZIP_TEMPORARY_DIR",5112],".",["T_STRING","uniqid",5112],"(",["T_CONSTANT_ENCAPSED_STRING","'pclzip-'",5112],")",".",["T_CONSTANT_ENCAPSED_STRING","'.tmp'",5112],";",["T_WHITESPACE","\n\n    ",5112],["T_COMMENT","\/\/ ----- Open the temporary file in write mode\n",5114],["T_WHITESPACE","    ",5115],["T_IF","if",5115],["T_WHITESPACE"," ",5115],"(","(",["T_VARIABLE","$v_zip_temp_fd",5115],["T_WHITESPACE"," ",5115],"=",["T_WHITESPACE"," ",5115],"@",["T_STRING","fopen",5115],"(",["T_VARIABLE","$v_zip_temp_name",5115],",",["T_WHITESPACE"," ",5115],["T_CONSTANT_ENCAPSED_STRING","'wb'",5115],")",")",["T_WHITESPACE"," ",5115],["T_IS_EQUAL","==",5115],["T_WHITESPACE"," ",5115],["T_LNUMBER","0",5115],")",["T_WHITESPACE","\n    ",5115],"{",["T_WHITESPACE","\n      ",5116],["T_VARIABLE","$this",5117],["T_OBJECT_OPERATOR","->",5117],["T_STRING","privCloseFd",5117],"(",")",";",["T_WHITESPACE","\n      ",5117],["T_VARIABLE","$p_archive_to_add",5118],["T_OBJECT_OPERATOR","->",5118],["T_STRING","privCloseFd",5118],"(",")",";",["T_WHITESPACE","\n\n      ",5118],["T_STRING","PclZip",5120],["T_DOUBLE_COLON","::",5120],["T_STRING","privErrorLog",5120],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",5120],",",["T_WHITESPACE"," ",5120],["T_CONSTANT_ENCAPSED_STRING","'Unable to open temporary file \\''",5120],".",["T_VARIABLE","$v_zip_temp_name",5120],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary write mode'",5120],")",";",["T_WHITESPACE","\n\n      ",5120],["T_COMMENT","\/\/ ----- Return\n",5122],["T_WHITESPACE","      ",5123],["T_RETURN","return",5123],["T_WHITESPACE"," ",5123],["T_STRING","PclZip",5123],["T_DOUBLE_COLON","::",5123],["T_STRING","errorCode",5123],"(",")",";",["T_WHITESPACE","\n    ",5123],"}",["T_WHITESPACE","\n\n    ",5124],["T_COMMENT","\/\/ ----- Copy the files from the archive to the temporary file\n",5126],["T_WHITESPACE","    ",5127],["T_COMMENT","\/\/ TBC : Here I should better append the file and go back to erase the central dir\n",5127],["T_WHITESPACE","    ",5128],["T_VARIABLE","$v_size",5128],["T_WHITESPACE"," ",5128],"=",["T_WHITESPACE"," ",5128],["T_VARIABLE","$v_central_dir",5128],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",5128],"]",";",["T_WHITESPACE","\n    ",5128],["T_WHILE","while",5129],["T_WHITESPACE"," ",5129],"(",["T_VARIABLE","$v_size",5129],["T_WHITESPACE"," ",5129],["T_IS_NOT_EQUAL","!=",5129],["T_WHITESPACE"," ",5129],["T_LNUMBER","0",5129],")",["T_WHITESPACE","\n    ",5129],"{",["T_WHITESPACE","\n      ",5130],["T_VARIABLE","$v_read_size",5131],["T_WHITESPACE"," ",5131],"=",["T_WHITESPACE"," ",5131],"(",["T_VARIABLE","$v_size",5131],["T_WHITESPACE"," ",5131],"<",["T_WHITESPACE"," ",5131],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5131],["T_WHITESPACE"," ",5131],"?",["T_WHITESPACE"," ",5131],["T_VARIABLE","$v_size",5131],["T_WHITESPACE"," ",5131],":",["T_WHITESPACE"," ",5131],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5131],")",";",["T_WHITESPACE","\n      ",5131],["T_VARIABLE","$v_buffer",5132],["T_WHITESPACE"," ",5132],"=",["T_WHITESPACE"," ",5132],["T_STRING","fread",5132],"(",["T_VARIABLE","$this",5132],["T_OBJECT_OPERATOR","->",5132],["T_STRING","zip_fd",5132],",",["T_WHITESPACE"," ",5132],["T_VARIABLE","$v_read_size",5132],")",";",["T_WHITESPACE","\n      ",5132],"@",["T_STRING","fwrite",5133],"(",["T_VARIABLE","$v_zip_temp_fd",5133],",",["T_WHITESPACE"," ",5133],["T_VARIABLE","$v_buffer",5133],",",["T_WHITESPACE"," ",5133],["T_VARIABLE","$v_read_size",5133],")",";",["T_WHITESPACE","\n      ",5133],["T_VARIABLE","$v_size",5134],["T_WHITESPACE"," ",5134],["T_MINUS_EQUAL","-=",5134],["T_WHITESPACE"," ",5134],["T_VARIABLE","$v_read_size",5134],";",["T_WHITESPACE","\n    ",5134],"}",["T_WHITESPACE","\n\n    ",5135],["T_COMMENT","\/\/ ----- Copy the files from the archive_to_add into the temporary file\n",5137],["T_WHITESPACE","    ",5138],["T_VARIABLE","$v_size",5138],["T_WHITESPACE"," ",5138],"=",["T_WHITESPACE"," ",5138],["T_VARIABLE","$v_central_dir_to_add",5138],"[",["T_CONSTANT_ENCAPSED_STRING","'offset'",5138],"]",";",["T_WHITESPACE","\n    ",5138],["T_WHILE","while",5139],["T_WHITESPACE"," ",5139],"(",["T_VARIABLE","$v_size",5139],["T_WHITESPACE"," ",5139],["T_IS_NOT_EQUAL","!=",5139],["T_WHITESPACE"," ",5139],["T_LNUMBER","0",5139],")",["T_WHITESPACE","\n    ",5139],"{",["T_WHITESPACE","\n      ",5140],["T_VARIABLE","$v_read_size",5141],["T_WHITESPACE"," ",5141],"=",["T_WHITESPACE"," ",5141],"(",["T_VARIABLE","$v_size",5141],["T_WHITESPACE"," ",5141],"<",["T_WHITESPACE"," ",5141],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5141],["T_WHITESPACE"," ",5141],"?",["T_WHITESPACE"," ",5141],["T_VARIABLE","$v_size",5141],["T_WHITESPACE"," ",5141],":",["T_WHITESPACE"," ",5141],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5141],")",";",["T_WHITESPACE","\n      ",5141],["T_VARIABLE","$v_buffer",5142],["T_WHITESPACE"," ",5142],"=",["T_WHITESPACE"," ",5142],["T_STRING","fread",5142],"(",["T_VARIABLE","$p_archive_to_add",5142],["T_OBJECT_OPERATOR","->",5142],["T_STRING","zip_fd",5142],",",["T_WHITESPACE"," ",5142],["T_VARIABLE","$v_read_size",5142],")",";",["T_WHITESPACE","\n      ",5142],"@",["T_STRING","fwrite",5143],"(",["T_VARIABLE","$v_zip_temp_fd",5143],",",["T_WHITESPACE"," ",5143],["T_VARIABLE","$v_buffer",5143],",",["T_WHITESPACE"," ",5143],["T_VARIABLE","$v_read_size",5143],")",";",["T_WHITESPACE","\n      ",5143],["T_VARIABLE","$v_size",5144],["T_WHITESPACE"," ",5144],["T_MINUS_EQUAL","-=",5144],["T_WHITESPACE"," ",5144],["T_VARIABLE","$v_read_size",5144],";",["T_WHITESPACE","\n    ",5144],"}",["T_WHITESPACE","\n\n    ",5145],["T_COMMENT","\/\/ ----- Store the offset of the central dir\n",5147],["T_WHITESPACE","    ",5148],["T_VARIABLE","$v_offset",5148],["T_WHITESPACE"," ",5148],"=",["T_WHITESPACE"," ",5148],"@",["T_STRING","ftell",5148],"(",["T_VARIABLE","$v_zip_temp_fd",5148],")",";",["T_WHITESPACE","\n\n    ",5148],["T_COMMENT","\/\/ ----- Copy the block of file headers from the old archive\n",5150],["T_WHITESPACE","    ",5151],["T_VARIABLE","$v_size",5151],["T_WHITESPACE"," ",5151],"=",["T_WHITESPACE"," ",5151],["T_VARIABLE","$v_central_dir",5151],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",5151],"]",";",["T_WHITESPACE","\n    ",5151],["T_WHILE","while",5152],["T_WHITESPACE"," ",5152],"(",["T_VARIABLE","$v_size",5152],["T_WHITESPACE"," ",5152],["T_IS_NOT_EQUAL","!=",5152],["T_WHITESPACE"," ",5152],["T_LNUMBER","0",5152],")",["T_WHITESPACE","\n    ",5152],"{",["T_WHITESPACE","\n      ",5153],["T_VARIABLE","$v_read_size",5154],["T_WHITESPACE"," ",5154],"=",["T_WHITESPACE"," ",5154],"(",["T_VARIABLE","$v_size",5154],["T_WHITESPACE"," ",5154],"<",["T_WHITESPACE"," ",5154],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5154],["T_WHITESPACE"," ",5154],"?",["T_WHITESPACE"," ",5154],["T_VARIABLE","$v_size",5154],["T_WHITESPACE"," ",5154],":",["T_WHITESPACE"," ",5154],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5154],")",";",["T_WHITESPACE","\n      ",5154],["T_VARIABLE","$v_buffer",5155],["T_WHITESPACE"," ",5155],"=",["T_WHITESPACE"," ",5155],"@",["T_STRING","fread",5155],"(",["T_VARIABLE","$this",5155],["T_OBJECT_OPERATOR","->",5155],["T_STRING","zip_fd",5155],",",["T_WHITESPACE"," ",5155],["T_VARIABLE","$v_read_size",5155],")",";",["T_WHITESPACE","\n      ",5155],"@",["T_STRING","fwrite",5156],"(",["T_VARIABLE","$v_zip_temp_fd",5156],",",["T_WHITESPACE"," ",5156],["T_VARIABLE","$v_buffer",5156],",",["T_WHITESPACE"," ",5156],["T_VARIABLE","$v_read_size",5156],")",";",["T_WHITESPACE","\n      ",5156],["T_VARIABLE","$v_size",5157],["T_WHITESPACE"," ",5157],["T_MINUS_EQUAL","-=",5157],["T_WHITESPACE"," ",5157],["T_VARIABLE","$v_read_size",5157],";",["T_WHITESPACE","\n    ",5157],"}",["T_WHITESPACE","\n\n    ",5158],["T_COMMENT","\/\/ ----- Copy the block of file headers from the archive_to_add\n",5160],["T_WHITESPACE","    ",5161],["T_VARIABLE","$v_size",5161],["T_WHITESPACE"," ",5161],"=",["T_WHITESPACE"," ",5161],["T_VARIABLE","$v_central_dir_to_add",5161],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",5161],"]",";",["T_WHITESPACE","\n    ",5161],["T_WHILE","while",5162],["T_WHITESPACE"," ",5162],"(",["T_VARIABLE","$v_size",5162],["T_WHITESPACE"," ",5162],["T_IS_NOT_EQUAL","!=",5162],["T_WHITESPACE"," ",5162],["T_LNUMBER","0",5162],")",["T_WHITESPACE","\n    ",5162],"{",["T_WHITESPACE","\n      ",5163],["T_VARIABLE","$v_read_size",5164],["T_WHITESPACE"," ",5164],"=",["T_WHITESPACE"," ",5164],"(",["T_VARIABLE","$v_size",5164],["T_WHITESPACE"," ",5164],"<",["T_WHITESPACE"," ",5164],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5164],["T_WHITESPACE"," ",5164],"?",["T_WHITESPACE"," ",5164],["T_VARIABLE","$v_size",5164],["T_WHITESPACE"," ",5164],":",["T_WHITESPACE"," ",5164],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5164],")",";",["T_WHITESPACE","\n      ",5164],["T_VARIABLE","$v_buffer",5165],["T_WHITESPACE"," ",5165],"=",["T_WHITESPACE"," ",5165],"@",["T_STRING","fread",5165],"(",["T_VARIABLE","$p_archive_to_add",5165],["T_OBJECT_OPERATOR","->",5165],["T_STRING","zip_fd",5165],",",["T_WHITESPACE"," ",5165],["T_VARIABLE","$v_read_size",5165],")",";",["T_WHITESPACE","\n      ",5165],"@",["T_STRING","fwrite",5166],"(",["T_VARIABLE","$v_zip_temp_fd",5166],",",["T_WHITESPACE"," ",5166],["T_VARIABLE","$v_buffer",5166],",",["T_WHITESPACE"," ",5166],["T_VARIABLE","$v_read_size",5166],")",";",["T_WHITESPACE","\n      ",5166],["T_VARIABLE","$v_size",5167],["T_WHITESPACE"," ",5167],["T_MINUS_EQUAL","-=",5167],["T_WHITESPACE"," ",5167],["T_VARIABLE","$v_read_size",5167],";",["T_WHITESPACE","\n    ",5167],"}",["T_WHITESPACE","\n\n    ",5168],["T_COMMENT","\/\/ ----- Merge the file comments\n",5170],["T_WHITESPACE","    ",5171],["T_VARIABLE","$v_comment",5171],["T_WHITESPACE"," ",5171],"=",["T_WHITESPACE"," ",5171],["T_VARIABLE","$v_central_dir",5171],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",5171],"]",".",["T_CONSTANT_ENCAPSED_STRING","' '",5171],".",["T_VARIABLE","$v_central_dir_to_add",5171],"[",["T_CONSTANT_ENCAPSED_STRING","'comment'",5171],"]",";",["T_WHITESPACE","\n\n    ",5171],["T_COMMENT","\/\/ ----- Calculate the size of the (new) central header\n",5173],["T_WHITESPACE","    ",5174],["T_VARIABLE","$v_size",5174],["T_WHITESPACE"," ",5174],"=",["T_WHITESPACE"," ",5174],"@",["T_STRING","ftell",5174],"(",["T_VARIABLE","$v_zip_temp_fd",5174],")","-",["T_VARIABLE","$v_offset",5174],";",["T_WHITESPACE","\n\n    ",5174],["T_COMMENT","\/\/ ----- Swap the file descriptor\n",5176],["T_WHITESPACE","    ",5177],["T_COMMENT","\/\/ Here is a trick : I swap the temporary fd with the zip fd, in order to use\n",5177],["T_WHITESPACE","    ",5178],["T_COMMENT","\/\/ the following methods on the temporary fil and not the real archive fd\n",5178],["T_WHITESPACE","    ",5179],["T_VARIABLE","$v_swap",5179],["T_WHITESPACE"," ",5179],"=",["T_WHITESPACE"," ",5179],["T_VARIABLE","$this",5179],["T_OBJECT_OPERATOR","->",5179],["T_STRING","zip_fd",5179],";",["T_WHITESPACE","\n    ",5179],["T_VARIABLE","$this",5180],["T_OBJECT_OPERATOR","->",5180],["T_STRING","zip_fd",5180],["T_WHITESPACE"," ",5180],"=",["T_WHITESPACE"," ",5180],["T_VARIABLE","$v_zip_temp_fd",5180],";",["T_WHITESPACE","\n    ",5180],["T_VARIABLE","$v_zip_temp_fd",5181],["T_WHITESPACE"," ",5181],"=",["T_WHITESPACE"," ",5181],["T_VARIABLE","$v_swap",5181],";",["T_WHITESPACE","\n\n    ",5181],["T_COMMENT","\/\/ ----- Create the central dir footer\n",5183],["T_WHITESPACE","    ",5184],["T_IF","if",5184],["T_WHITESPACE"," ",5184],"(","(",["T_VARIABLE","$v_result",5184],["T_WHITESPACE"," ",5184],"=",["T_WHITESPACE"," ",5184],["T_VARIABLE","$this",5184],["T_OBJECT_OPERATOR","->",5184],["T_STRING","privWriteCentralHeader",5184],"(",["T_VARIABLE","$v_central_dir",5184],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",5184],"]","+",["T_VARIABLE","$v_central_dir_to_add",5184],"[",["T_CONSTANT_ENCAPSED_STRING","'entries'",5184],"]",",",["T_WHITESPACE"," ",5184],["T_VARIABLE","$v_size",5184],",",["T_WHITESPACE"," ",5184],["T_VARIABLE","$v_offset",5184],",",["T_WHITESPACE"," ",5184],["T_VARIABLE","$v_comment",5184],")",")",["T_WHITESPACE"," ",5184],["T_IS_NOT_EQUAL","!=",5184],["T_WHITESPACE"," ",5184],["T_LNUMBER","1",5184],")",["T_WHITESPACE","\n    ",5184],"{",["T_WHITESPACE","\n      ",5185],["T_VARIABLE","$this",5186],["T_OBJECT_OPERATOR","->",5186],["T_STRING","privCloseFd",5186],"(",")",";",["T_WHITESPACE","\n      ",5186],["T_VARIABLE","$p_archive_to_add",5187],["T_OBJECT_OPERATOR","->",5187],["T_STRING","privCloseFd",5187],"(",")",";",["T_WHITESPACE","\n      ",5187],"@",["T_STRING","fclose",5188],"(",["T_VARIABLE","$v_zip_temp_fd",5188],")",";",["T_WHITESPACE","\n      ",5188],["T_VARIABLE","$this",5189],["T_OBJECT_OPERATOR","->",5189],["T_STRING","zip_fd",5189],["T_WHITESPACE"," ",5189],"=",["T_WHITESPACE"," ",5189],["T_STRING","null",5189],";",["T_WHITESPACE","\n\n      ",5189],["T_COMMENT","\/\/ ----- Reset the file list\n",5191],["T_WHITESPACE","      ",5192],["T_UNSET","unset",5192],"(",["T_VARIABLE","$v_header_list",5192],")",";",["T_WHITESPACE","\n\n      ",5192],["T_COMMENT","\/\/ ----- Return\n",5194],["T_WHITESPACE","      ",5195],["T_RETURN","return",5195],["T_WHITESPACE"," ",5195],["T_VARIABLE","$v_result",5195],";",["T_WHITESPACE","\n    ",5195],"}",["T_WHITESPACE","\n\n    ",5196],["T_COMMENT","\/\/ ----- Swap back the file descriptor\n",5198],["T_WHITESPACE","    ",5199],["T_VARIABLE","$v_swap",5199],["T_WHITESPACE"," ",5199],"=",["T_WHITESPACE"," ",5199],["T_VARIABLE","$this",5199],["T_OBJECT_OPERATOR","->",5199],["T_STRING","zip_fd",5199],";",["T_WHITESPACE","\n    ",5199],["T_VARIABLE","$this",5200],["T_OBJECT_OPERATOR","->",5200],["T_STRING","zip_fd",5200],["T_WHITESPACE"," ",5200],"=",["T_WHITESPACE"," ",5200],["T_VARIABLE","$v_zip_temp_fd",5200],";",["T_WHITESPACE","\n    ",5200],["T_VARIABLE","$v_zip_temp_fd",5201],["T_WHITESPACE"," ",5201],"=",["T_WHITESPACE"," ",5201],["T_VARIABLE","$v_swap",5201],";",["T_WHITESPACE","\n\n    ",5201],["T_COMMENT","\/\/ ----- Close\n",5203],["T_WHITESPACE","    ",5204],["T_VARIABLE","$this",5204],["T_OBJECT_OPERATOR","->",5204],["T_STRING","privCloseFd",5204],"(",")",";",["T_WHITESPACE","\n    ",5204],["T_VARIABLE","$p_archive_to_add",5205],["T_OBJECT_OPERATOR","->",5205],["T_STRING","privCloseFd",5205],"(",")",";",["T_WHITESPACE","\n\n    ",5205],["T_COMMENT","\/\/ ----- Close the temporary file\n",5207],["T_WHITESPACE","    ",5208],"@",["T_STRING","fclose",5208],"(",["T_VARIABLE","$v_zip_temp_fd",5208],")",";",["T_WHITESPACE","\n\n    ",5208],["T_COMMENT","\/\/ ----- Delete the zip file\n",5210],["T_WHITESPACE","    ",5211],["T_COMMENT","\/\/ TBC : I should test the result ...\n",5211],["T_WHITESPACE","    ",5212],"@",["T_STRING","unlink",5212],"(",["T_VARIABLE","$this",5212],["T_OBJECT_OPERATOR","->",5212],["T_STRING","zipname",5212],")",";",["T_WHITESPACE","\n\n    ",5212],["T_COMMENT","\/\/ ----- Rename the temporary file\n",5214],["T_WHITESPACE","    ",5215],["T_COMMENT","\/\/ TBC : I should test the result ...\n",5215],["T_WHITESPACE","    ",5216],["T_COMMENT","\/\/@rename($v_zip_temp_name, $this->zipname);\n",5216],["T_WHITESPACE","    ",5217],["T_STRING","PclZipUtilRename",5217],"(",["T_VARIABLE","$v_zip_temp_name",5217],",",["T_WHITESPACE"," ",5217],["T_VARIABLE","$this",5217],["T_OBJECT_OPERATOR","->",5217],["T_STRING","zipname",5217],")",";",["T_WHITESPACE","\n\n    ",5217],["T_COMMENT","\/\/ ----- Return\n",5219],["T_WHITESPACE","    ",5220],["T_RETURN","return",5220],["T_WHITESPACE"," ",5220],["T_VARIABLE","$v_result",5220],";",["T_WHITESPACE","\n  ",5220],"}",["T_WHITESPACE","\n  ",5221],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5222],["T_WHITESPACE","\n  ",5223],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5224],["T_WHITESPACE","  ",5225],["T_COMMENT","\/\/ Function : privDuplicate()\n",5225],["T_WHITESPACE","  ",5226],["T_COMMENT","\/\/ Description :\n",5226],["T_WHITESPACE","  ",5227],["T_COMMENT","\/\/ Parameters :\n",5227],["T_WHITESPACE","  ",5228],["T_COMMENT","\/\/ Return Values :\n",5228],["T_WHITESPACE","  ",5229],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5229],["T_WHITESPACE","  ",5230],["T_FUNCTION","function",5230],["T_WHITESPACE"," ",5230],["T_STRING","privDuplicate",5230],"(",["T_VARIABLE","$p_archive_filename",5230],")",["T_WHITESPACE","\n  ",5230],"{",["T_WHITESPACE","\n    ",5231],["T_VARIABLE","$v_result",5232],"=",["T_LNUMBER","1",5232],";",["T_WHITESPACE","\n\n    ",5232],["T_COMMENT","\/\/ ----- Look if the $p_archive_filename exists\n",5234],["T_WHITESPACE","    ",5235],["T_IF","if",5235],["T_WHITESPACE"," ",5235],"(","!",["T_STRING","is_file",5235],"(",["T_VARIABLE","$p_archive_filename",5235],")",")",["T_WHITESPACE","\n    ",5235],"{",["T_WHITESPACE","\n\n      ",5236],["T_COMMENT","\/\/ ----- Nothing to duplicate, so duplicate is a success.\n",5238],["T_WHITESPACE","      ",5239],["T_VARIABLE","$v_result",5239],["T_WHITESPACE"," ",5239],"=",["T_WHITESPACE"," ",5239],["T_LNUMBER","1",5239],";",["T_WHITESPACE","\n\n      ",5239],["T_COMMENT","\/\/ ----- Return\n",5241],["T_WHITESPACE","      ",5242],["T_RETURN","return",5242],["T_WHITESPACE"," ",5242],["T_VARIABLE","$v_result",5242],";",["T_WHITESPACE","\n    ",5242],"}",["T_WHITESPACE","\n\n    ",5243],["T_COMMENT","\/\/ ----- Open the zip file\n",5245],["T_WHITESPACE","    ",5246],["T_IF","if",5246],["T_WHITESPACE"," ",5246],"(","(",["T_VARIABLE","$v_result",5246],"=",["T_VARIABLE","$this",5246],["T_OBJECT_OPERATOR","->",5246],["T_STRING","privOpenFd",5246],"(",["T_CONSTANT_ENCAPSED_STRING","'wb'",5246],")",")",["T_WHITESPACE"," ",5246],["T_IS_NOT_EQUAL","!=",5246],["T_WHITESPACE"," ",5246],["T_LNUMBER","1",5246],")",["T_WHITESPACE","\n    ",5246],"{",["T_WHITESPACE","\n      ",5247],["T_COMMENT","\/\/ ----- Return\n",5248],["T_WHITESPACE","      ",5249],["T_RETURN","return",5249],["T_WHITESPACE"," ",5249],["T_VARIABLE","$v_result",5249],";",["T_WHITESPACE","\n    ",5249],"}",["T_WHITESPACE","\n\n    ",5250],["T_COMMENT","\/\/ ----- Open the temporary file in write mode\n",5252],["T_WHITESPACE","    ",5253],["T_IF","if",5253],["T_WHITESPACE"," ",5253],"(","(",["T_VARIABLE","$v_zip_temp_fd",5253],["T_WHITESPACE"," ",5253],"=",["T_WHITESPACE"," ",5253],"@",["T_STRING","fopen",5253],"(",["T_VARIABLE","$p_archive_filename",5253],",",["T_WHITESPACE"," ",5253],["T_CONSTANT_ENCAPSED_STRING","'rb'",5253],")",")",["T_WHITESPACE"," ",5253],["T_IS_EQUAL","==",5253],["T_WHITESPACE"," ",5253],["T_LNUMBER","0",5253],")",["T_WHITESPACE","\n    ",5253],"{",["T_WHITESPACE","\n      ",5254],["T_VARIABLE","$this",5255],["T_OBJECT_OPERATOR","->",5255],["T_STRING","privCloseFd",5255],"(",")",";",["T_WHITESPACE","\n\n      ",5255],["T_STRING","PclZip",5257],["T_DOUBLE_COLON","::",5257],["T_STRING","privErrorLog",5257],"(",["T_STRING","PCLZIP_ERR_READ_OPEN_FAIL",5257],",",["T_WHITESPACE"," ",5257],["T_CONSTANT_ENCAPSED_STRING","'Unable to open archive file \\''",5257],".",["T_VARIABLE","$p_archive_filename",5257],".",["T_CONSTANT_ENCAPSED_STRING","'\\' in binary write mode'",5257],")",";",["T_WHITESPACE","\n\n      ",5257],["T_COMMENT","\/\/ ----- Return\n",5259],["T_WHITESPACE","      ",5260],["T_RETURN","return",5260],["T_WHITESPACE"," ",5260],["T_STRING","PclZip",5260],["T_DOUBLE_COLON","::",5260],["T_STRING","errorCode",5260],"(",")",";",["T_WHITESPACE","\n    ",5260],"}",["T_WHITESPACE","\n\n    ",5261],["T_COMMENT","\/\/ ----- Copy the files from the archive to the temporary file\n",5263],["T_WHITESPACE","    ",5264],["T_COMMENT","\/\/ TBC : Here I should better append the file and go back to erase the central dir\n",5264],["T_WHITESPACE","    ",5265],["T_VARIABLE","$v_size",5265],["T_WHITESPACE"," ",5265],"=",["T_WHITESPACE"," ",5265],["T_STRING","filesize",5265],"(",["T_VARIABLE","$p_archive_filename",5265],")",";",["T_WHITESPACE","\n    ",5265],["T_WHILE","while",5266],["T_WHITESPACE"," ",5266],"(",["T_VARIABLE","$v_size",5266],["T_WHITESPACE"," ",5266],["T_IS_NOT_EQUAL","!=",5266],["T_WHITESPACE"," ",5266],["T_LNUMBER","0",5266],")",["T_WHITESPACE","\n    ",5266],"{",["T_WHITESPACE","\n      ",5267],["T_VARIABLE","$v_read_size",5268],["T_WHITESPACE"," ",5268],"=",["T_WHITESPACE"," ",5268],"(",["T_VARIABLE","$v_size",5268],["T_WHITESPACE"," ",5268],"<",["T_WHITESPACE"," ",5268],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5268],["T_WHITESPACE"," ",5268],"?",["T_WHITESPACE"," ",5268],["T_VARIABLE","$v_size",5268],["T_WHITESPACE"," ",5268],":",["T_WHITESPACE"," ",5268],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5268],")",";",["T_WHITESPACE","\n      ",5268],["T_VARIABLE","$v_buffer",5269],["T_WHITESPACE"," ",5269],"=",["T_WHITESPACE"," ",5269],["T_STRING","fread",5269],"(",["T_VARIABLE","$v_zip_temp_fd",5269],",",["T_WHITESPACE"," ",5269],["T_VARIABLE","$v_read_size",5269],")",";",["T_WHITESPACE","\n      ",5269],"@",["T_STRING","fwrite",5270],"(",["T_VARIABLE","$this",5270],["T_OBJECT_OPERATOR","->",5270],["T_STRING","zip_fd",5270],",",["T_WHITESPACE"," ",5270],["T_VARIABLE","$v_buffer",5270],",",["T_WHITESPACE"," ",5270],["T_VARIABLE","$v_read_size",5270],")",";",["T_WHITESPACE","\n      ",5270],["T_VARIABLE","$v_size",5271],["T_WHITESPACE"," ",5271],["T_MINUS_EQUAL","-=",5271],["T_WHITESPACE"," ",5271],["T_VARIABLE","$v_read_size",5271],";",["T_WHITESPACE","\n    ",5271],"}",["T_WHITESPACE","\n\n    ",5272],["T_COMMENT","\/\/ ----- Close\n",5274],["T_WHITESPACE","    ",5275],["T_VARIABLE","$this",5275],["T_OBJECT_OPERATOR","->",5275],["T_STRING","privCloseFd",5275],"(",")",";",["T_WHITESPACE","\n\n    ",5275],["T_COMMENT","\/\/ ----- Close the temporary file\n",5277],["T_WHITESPACE","    ",5278],"@",["T_STRING","fclose",5278],"(",["T_VARIABLE","$v_zip_temp_fd",5278],")",";",["T_WHITESPACE","\n\n    ",5278],["T_COMMENT","\/\/ ----- Return\n",5280],["T_WHITESPACE","    ",5281],["T_RETURN","return",5281],["T_WHITESPACE"," ",5281],["T_VARIABLE","$v_result",5281],";",["T_WHITESPACE","\n  ",5281],"}",["T_WHITESPACE","\n  ",5282],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5283],["T_WHITESPACE","\n  ",5284],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5285],["T_WHITESPACE","  ",5286],["T_COMMENT","\/\/ Function : privErrorLog()\n",5286],["T_WHITESPACE","  ",5287],["T_COMMENT","\/\/ Description :\n",5287],["T_WHITESPACE","  ",5288],["T_COMMENT","\/\/ Parameters :\n",5288],["T_WHITESPACE","  ",5289],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5289],["T_WHITESPACE","  ",5290],["T_FUNCTION","function",5290],["T_WHITESPACE"," ",5290],["T_STRING","privErrorLog",5290],"(",["T_VARIABLE","$p_error_code",5290],"=",["T_LNUMBER","0",5290],",",["T_WHITESPACE"," ",5290],["T_VARIABLE","$p_error_string",5290],"=",["T_CONSTANT_ENCAPSED_STRING","''",5290],")",["T_WHITESPACE","\n  ",5290],"{",["T_WHITESPACE","\n    ",5291],["T_IF","if",5292],["T_WHITESPACE"," ",5292],"(",["T_STRING","PCLZIP_ERROR_EXTERNAL",5292],["T_WHITESPACE"," ",5292],["T_IS_EQUAL","==",5292],["T_WHITESPACE"," ",5292],["T_LNUMBER","1",5292],")",["T_WHITESPACE"," ",5292],"{",["T_WHITESPACE","\n      ",5292],["T_STRING","PclError",5293],"(",["T_VARIABLE","$p_error_code",5293],",",["T_WHITESPACE"," ",5293],["T_VARIABLE","$p_error_string",5293],")",";",["T_WHITESPACE","\n    ",5293],"}",["T_WHITESPACE","\n    ",5294],["T_ELSE","else",5295],["T_WHITESPACE"," ",5295],"{",["T_WHITESPACE","\n      ",5295],["T_VARIABLE","$this",5296],["T_OBJECT_OPERATOR","->",5296],["T_STRING","error_code",5296],["T_WHITESPACE"," ",5296],"=",["T_WHITESPACE"," ",5296],["T_VARIABLE","$p_error_code",5296],";",["T_WHITESPACE","\n      ",5296],["T_VARIABLE","$this",5297],["T_OBJECT_OPERATOR","->",5297],["T_STRING","error_string",5297],["T_WHITESPACE"," ",5297],"=",["T_WHITESPACE"," ",5297],["T_VARIABLE","$p_error_string",5297],";",["T_WHITESPACE","\n    ",5297],"}",["T_WHITESPACE","\n  ",5298],"}",["T_WHITESPACE","\n  ",5299],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5300],["T_WHITESPACE","\n  ",5301],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5302],["T_WHITESPACE","  ",5303],["T_COMMENT","\/\/ Function : privErrorReset()\n",5303],["T_WHITESPACE","  ",5304],["T_COMMENT","\/\/ Description :\n",5304],["T_WHITESPACE","  ",5305],["T_COMMENT","\/\/ Parameters :\n",5305],["T_WHITESPACE","  ",5306],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5306],["T_WHITESPACE","  ",5307],["T_FUNCTION","function",5307],["T_WHITESPACE"," ",5307],["T_STRING","privErrorReset",5307],"(",")",["T_WHITESPACE","\n  ",5307],"{",["T_WHITESPACE","\n    ",5308],["T_IF","if",5309],["T_WHITESPACE"," ",5309],"(",["T_STRING","PCLZIP_ERROR_EXTERNAL",5309],["T_WHITESPACE"," ",5309],["T_IS_EQUAL","==",5309],["T_WHITESPACE"," ",5309],["T_LNUMBER","1",5309],")",["T_WHITESPACE"," ",5309],"{",["T_WHITESPACE","\n      ",5309],["T_STRING","PclErrorReset",5310],"(",")",";",["T_WHITESPACE","\n    ",5310],"}",["T_WHITESPACE","\n    ",5311],["T_ELSE","else",5312],["T_WHITESPACE"," ",5312],"{",["T_WHITESPACE","\n      ",5312],["T_VARIABLE","$this",5313],["T_OBJECT_OPERATOR","->",5313],["T_STRING","error_code",5313],["T_WHITESPACE"," ",5313],"=",["T_WHITESPACE"," ",5313],["T_LNUMBER","0",5313],";",["T_WHITESPACE","\n      ",5313],["T_VARIABLE","$this",5314],["T_OBJECT_OPERATOR","->",5314],["T_STRING","error_string",5314],["T_WHITESPACE"," ",5314],"=",["T_WHITESPACE"," ",5314],["T_CONSTANT_ENCAPSED_STRING","''",5314],";",["T_WHITESPACE","\n    ",5314],"}",["T_WHITESPACE","\n  ",5315],"}",["T_WHITESPACE","\n  ",5316],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5317],["T_WHITESPACE","\n  ",5318],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5319],["T_WHITESPACE","  ",5320],["T_COMMENT","\/\/ Function : privDisableMagicQuotes()\n",5320],["T_WHITESPACE","  ",5321],["T_COMMENT","\/\/ Description :\n",5321],["T_WHITESPACE","  ",5322],["T_COMMENT","\/\/ Parameters :\n",5322],["T_WHITESPACE","  ",5323],["T_COMMENT","\/\/ Return Values :\n",5323],["T_WHITESPACE","  ",5324],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5324],["T_WHITESPACE","  ",5325],["T_FUNCTION","function",5325],["T_WHITESPACE"," ",5325],["T_STRING","privDisableMagicQuotes",5325],"(",")",["T_WHITESPACE","\n  ",5325],"{",["T_WHITESPACE","\n    ",5326],["T_VARIABLE","$v_result",5327],"=",["T_LNUMBER","1",5327],";",["T_WHITESPACE","\n\n    ",5327],["T_COMMENT","\/\/ ----- Look if function exists\n",5329],["T_WHITESPACE","    ",5330],["T_IF","if",5330],["T_WHITESPACE"," ",5330],"(",["T_WHITESPACE","   ",5330],"(","!",["T_STRING","function_exists",5330],"(",["T_CONSTANT_ENCAPSED_STRING","\"get_magic_quotes_runtime\"",5330],")",")",["T_WHITESPACE","\n\t    ",5330],["T_BOOLEAN_OR","||",5331],["T_WHITESPACE"," ",5331],"(","!",["T_STRING","function_exists",5331],"(",["T_CONSTANT_ENCAPSED_STRING","\"set_magic_quotes_runtime\"",5331],")",")",")",["T_WHITESPACE"," ",5331],"{",["T_WHITESPACE","\n      ",5331],["T_RETURN","return",5332],["T_WHITESPACE"," ",5332],["T_VARIABLE","$v_result",5332],";",["T_WHITESPACE","\n\t",5332],"}",["T_WHITESPACE","\n\n    ",5333],["T_COMMENT","\/\/ ----- Look if already done\n",5335],["T_WHITESPACE","    ",5336],["T_IF","if",5336],["T_WHITESPACE"," ",5336],"(",["T_VARIABLE","$this",5336],["T_OBJECT_OPERATOR","->",5336],["T_STRING","magic_quotes_status",5336],["T_WHITESPACE"," ",5336],["T_IS_NOT_EQUAL","!=",5336],["T_WHITESPACE"," ",5336],"-",["T_LNUMBER","1",5336],")",["T_WHITESPACE"," ",5336],"{",["T_WHITESPACE","\n      ",5336],["T_RETURN","return",5337],["T_WHITESPACE"," ",5337],["T_VARIABLE","$v_result",5337],";",["T_WHITESPACE","\n\t",5337],"}",["T_WHITESPACE","\n\n\t",5338],["T_COMMENT","\/\/ ----- Get and memorize the magic_quote value\n",5340],["T_WHITESPACE","\t",5341],["T_VARIABLE","$this",5341],["T_OBJECT_OPERATOR","->",5341],["T_STRING","magic_quotes_status",5341],["T_WHITESPACE"," ",5341],"=",["T_WHITESPACE"," ",5341],"@",["T_STRING","get_magic_quotes_runtime",5341],"(",")",";",["T_WHITESPACE","\n\n\t",5341],["T_COMMENT","\/\/ ----- Disable magic_quotes\n",5343],["T_WHITESPACE","\t",5344],["T_IF","if",5344],["T_WHITESPACE"," ",5344],"(",["T_VARIABLE","$this",5344],["T_OBJECT_OPERATOR","->",5344],["T_STRING","magic_quotes_status",5344],["T_WHITESPACE"," ",5344],["T_IS_EQUAL","==",5344],["T_WHITESPACE"," ",5344],["T_LNUMBER","1",5344],")",["T_WHITESPACE"," ",5344],"{",["T_WHITESPACE","\n\t  ",5344],"@",["T_STRING","set_magic_quotes_runtime",5345],"(",["T_LNUMBER","0",5345],")",";",["T_WHITESPACE","\n\t",5345],"}",["T_WHITESPACE","\n\n    ",5346],["T_COMMENT","\/\/ ----- Return\n",5348],["T_WHITESPACE","    ",5349],["T_RETURN","return",5349],["T_WHITESPACE"," ",5349],["T_VARIABLE","$v_result",5349],";",["T_WHITESPACE","\n  ",5349],"}",["T_WHITESPACE","\n  ",5350],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5351],["T_WHITESPACE","\n  ",5352],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5353],["T_WHITESPACE","  ",5354],["T_COMMENT","\/\/ Function : privSwapBackMagicQuotes()\n",5354],["T_WHITESPACE","  ",5355],["T_COMMENT","\/\/ Description :\n",5355],["T_WHITESPACE","  ",5356],["T_COMMENT","\/\/ Parameters :\n",5356],["T_WHITESPACE","  ",5357],["T_COMMENT","\/\/ Return Values :\n",5357],["T_WHITESPACE","  ",5358],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5358],["T_WHITESPACE","  ",5359],["T_FUNCTION","function",5359],["T_WHITESPACE"," ",5359],["T_STRING","privSwapBackMagicQuotes",5359],"(",")",["T_WHITESPACE","\n  ",5359],"{",["T_WHITESPACE","\n    ",5360],["T_VARIABLE","$v_result",5361],"=",["T_LNUMBER","1",5361],";",["T_WHITESPACE","\n\n    ",5361],["T_COMMENT","\/\/ ----- Look if function exists\n",5363],["T_WHITESPACE","    ",5364],["T_IF","if",5364],["T_WHITESPACE"," ",5364],"(",["T_WHITESPACE","   ",5364],"(","!",["T_STRING","function_exists",5364],"(",["T_CONSTANT_ENCAPSED_STRING","\"get_magic_quotes_runtime\"",5364],")",")",["T_WHITESPACE","\n\t    ",5364],["T_BOOLEAN_OR","||",5365],["T_WHITESPACE"," ",5365],"(","!",["T_STRING","function_exists",5365],"(",["T_CONSTANT_ENCAPSED_STRING","\"set_magic_quotes_runtime\"",5365],")",")",")",["T_WHITESPACE"," ",5365],"{",["T_WHITESPACE","\n      ",5365],["T_RETURN","return",5366],["T_WHITESPACE"," ",5366],["T_VARIABLE","$v_result",5366],";",["T_WHITESPACE","\n\t",5366],"}",["T_WHITESPACE","\n\n    ",5367],["T_COMMENT","\/\/ ----- Look if something to do\n",5369],["T_WHITESPACE","    ",5370],["T_IF","if",5370],["T_WHITESPACE"," ",5370],"(",["T_VARIABLE","$this",5370],["T_OBJECT_OPERATOR","->",5370],["T_STRING","magic_quotes_status",5370],["T_WHITESPACE"," ",5370],["T_IS_NOT_EQUAL","!=",5370],["T_WHITESPACE"," ",5370],"-",["T_LNUMBER","1",5370],")",["T_WHITESPACE"," ",5370],"{",["T_WHITESPACE","\n      ",5370],["T_RETURN","return",5371],["T_WHITESPACE"," ",5371],["T_VARIABLE","$v_result",5371],";",["T_WHITESPACE","\n\t",5371],"}",["T_WHITESPACE","\n\n\t",5372],["T_COMMENT","\/\/ ----- Swap back magic_quotes\n",5374],["T_WHITESPACE","\t",5375],["T_IF","if",5375],["T_WHITESPACE"," ",5375],"(",["T_VARIABLE","$this",5375],["T_OBJECT_OPERATOR","->",5375],["T_STRING","magic_quotes_status",5375],["T_WHITESPACE"," ",5375],["T_IS_EQUAL","==",5375],["T_WHITESPACE"," ",5375],["T_LNUMBER","1",5375],")",["T_WHITESPACE"," ",5375],"{",["T_WHITESPACE","\n  \t  ",5375],"@",["T_STRING","set_magic_quotes_runtime",5376],"(",["T_VARIABLE","$this",5376],["T_OBJECT_OPERATOR","->",5376],["T_STRING","magic_quotes_status",5376],")",";",["T_WHITESPACE","\n\t",5376],"}",["T_WHITESPACE","\n\n    ",5377],["T_COMMENT","\/\/ ----- Return\n",5379],["T_WHITESPACE","    ",5380],["T_RETURN","return",5380],["T_WHITESPACE"," ",5380],["T_VARIABLE","$v_result",5380],";",["T_WHITESPACE","\n  ",5380],"}",["T_WHITESPACE","\n  ",5381],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5382],["T_WHITESPACE","\n  ",5383],"}",["T_WHITESPACE","\n  ",5384],["T_COMMENT","\/\/ End of class\n",5385],["T_WHITESPACE","  ",5386],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5386],["T_WHITESPACE","\n  ",5387],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5388],["T_WHITESPACE","  ",5389],["T_COMMENT","\/\/ Function : PclZipUtilPathReduction()\n",5389],["T_WHITESPACE","  ",5390],["T_COMMENT","\/\/ Description :\n",5390],["T_WHITESPACE","  ",5391],["T_COMMENT","\/\/ Parameters :\n",5391],["T_WHITESPACE","  ",5392],["T_COMMENT","\/\/ Return Values :\n",5392],["T_WHITESPACE","  ",5393],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5393],["T_WHITESPACE","  ",5394],["T_FUNCTION","function",5394],["T_WHITESPACE"," ",5394],["T_STRING","PclZipUtilPathReduction",5394],"(",["T_VARIABLE","$p_dir",5394],")",["T_WHITESPACE","\n  ",5394],"{",["T_WHITESPACE","\n    ",5395],["T_VARIABLE","$v_result",5396],["T_WHITESPACE"," ",5396],"=",["T_WHITESPACE"," ",5396],["T_CONSTANT_ENCAPSED_STRING","\"\"",5396],";",["T_WHITESPACE","\n\n    ",5396],["T_COMMENT","\/\/ ----- Look for not empty path\n",5398],["T_WHITESPACE","    ",5399],["T_IF","if",5399],["T_WHITESPACE"," ",5399],"(",["T_VARIABLE","$p_dir",5399],["T_WHITESPACE"," ",5399],["T_IS_NOT_EQUAL","!=",5399],["T_WHITESPACE"," ",5399],["T_CONSTANT_ENCAPSED_STRING","\"\"",5399],")",["T_WHITESPACE"," ",5399],"{",["T_WHITESPACE","\n      ",5399],["T_COMMENT","\/\/ ----- Explode path by directory names\n",5400],["T_WHITESPACE","      ",5401],["T_VARIABLE","$v_list",5401],["T_WHITESPACE"," ",5401],"=",["T_WHITESPACE"," ",5401],["T_STRING","explode",5401],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",5401],",",["T_WHITESPACE"," ",5401],["T_VARIABLE","$p_dir",5401],")",";",["T_WHITESPACE","\n\n      ",5401],["T_COMMENT","\/\/ ----- Study directories from last to first\n",5403],["T_WHITESPACE","      ",5404],["T_VARIABLE","$v_skip",5404],["T_WHITESPACE"," ",5404],"=",["T_WHITESPACE"," ",5404],["T_LNUMBER","0",5404],";",["T_WHITESPACE","\n      ",5404],["T_FOR","for",5405],["T_WHITESPACE"," ",5405],"(",["T_VARIABLE","$i",5405],"=",["T_STRING","sizeof",5405],"(",["T_VARIABLE","$v_list",5405],")","-",["T_LNUMBER","1",5405],";",["T_WHITESPACE"," ",5405],["T_VARIABLE","$i",5405],["T_IS_GREATER_OR_EQUAL",">=",5405],["T_LNUMBER","0",5405],";",["T_WHITESPACE"," ",5405],["T_VARIABLE","$i",5405],["T_DEC","--",5405],")",["T_WHITESPACE"," ",5405],"{",["T_WHITESPACE","\n        ",5405],["T_COMMENT","\/\/ ----- Look for current path\n",5406],["T_WHITESPACE","        ",5407],["T_IF","if",5407],["T_WHITESPACE"," ",5407],"(",["T_VARIABLE","$v_list",5407],"[",["T_VARIABLE","$i",5407],"]",["T_WHITESPACE"," ",5407],["T_IS_EQUAL","==",5407],["T_WHITESPACE"," ",5407],["T_CONSTANT_ENCAPSED_STRING","\".\"",5407],")",["T_WHITESPACE"," ",5407],"{",["T_WHITESPACE","\n          ",5407],["T_COMMENT","\/\/ ----- Ignore this directory\n",5408],["T_WHITESPACE","          ",5409],["T_COMMENT","\/\/ Should be the first $i=0, but no check is done\n",5409],["T_WHITESPACE","        ",5410],"}",["T_WHITESPACE","\n        ",5410],["T_ELSE","else",5411],["T_WHITESPACE"," ",5411],["T_IF","if",5411],["T_WHITESPACE"," ",5411],"(",["T_VARIABLE","$v_list",5411],"[",["T_VARIABLE","$i",5411],"]",["T_WHITESPACE"," ",5411],["T_IS_EQUAL","==",5411],["T_WHITESPACE"," ",5411],["T_CONSTANT_ENCAPSED_STRING","\"..\"",5411],")",["T_WHITESPACE"," ",5411],"{",["T_WHITESPACE","\n\t\t  ",5411],["T_VARIABLE","$v_skip",5412],["T_INC","++",5412],";",["T_WHITESPACE","\n        ",5412],"}",["T_WHITESPACE","\n        ",5413],["T_ELSE","else",5414],["T_WHITESPACE"," ",5414],["T_IF","if",5414],["T_WHITESPACE"," ",5414],"(",["T_VARIABLE","$v_list",5414],"[",["T_VARIABLE","$i",5414],"]",["T_WHITESPACE"," ",5414],["T_IS_EQUAL","==",5414],["T_WHITESPACE"," ",5414],["T_CONSTANT_ENCAPSED_STRING","\"\"",5414],")",["T_WHITESPACE"," ",5414],"{",["T_WHITESPACE","\n\t\t  ",5414],["T_COMMENT","\/\/ ----- First '\/' i.e. root slash\n",5415],["T_WHITESPACE","\t\t  ",5416],["T_IF","if",5416],["T_WHITESPACE"," ",5416],"(",["T_VARIABLE","$i",5416],["T_WHITESPACE"," ",5416],["T_IS_EQUAL","==",5416],["T_WHITESPACE"," ",5416],["T_LNUMBER","0",5416],")",["T_WHITESPACE"," ",5416],"{",["T_WHITESPACE","\n            ",5416],["T_VARIABLE","$v_result",5417],["T_WHITESPACE"," ",5417],"=",["T_WHITESPACE"," ",5417],["T_CONSTANT_ENCAPSED_STRING","\"\/\"",5417],".",["T_VARIABLE","$v_result",5417],";",["T_WHITESPACE","\n\t\t    ",5417],["T_IF","if",5418],["T_WHITESPACE"," ",5418],"(",["T_VARIABLE","$v_skip",5418],["T_WHITESPACE"," ",5418],">",["T_WHITESPACE"," ",5418],["T_LNUMBER","0",5418],")",["T_WHITESPACE"," ",5418],"{",["T_WHITESPACE","\n\t\t        ",5418],["T_COMMENT","\/\/ ----- It is an invalid path, so the path is not modified\n",5419],["T_WHITESPACE","\t\t        ",5420],["T_COMMENT","\/\/ TBC\n",5420],["T_WHITESPACE","\t\t        ",5421],["T_VARIABLE","$v_result",5421],["T_WHITESPACE"," ",5421],"=",["T_WHITESPACE"," ",5421],["T_VARIABLE","$p_dir",5421],";",["T_WHITESPACE","\n                ",5421],["T_VARIABLE","$v_skip",5422],["T_WHITESPACE"," ",5422],"=",["T_WHITESPACE"," ",5422],["T_LNUMBER","0",5422],";",["T_WHITESPACE","\n\t\t    ",5422],"}",["T_WHITESPACE","\n\t\t  ",5423],"}",["T_WHITESPACE","\n\t\t  ",5424],["T_COMMENT","\/\/ ----- Last '\/' i.e. indicates a directory\n",5425],["T_WHITESPACE","\t\t  ",5426],["T_ELSE","else",5426],["T_WHITESPACE"," ",5426],["T_IF","if",5426],["T_WHITESPACE"," ",5426],"(",["T_VARIABLE","$i",5426],["T_WHITESPACE"," ",5426],["T_IS_EQUAL","==",5426],["T_WHITESPACE"," ",5426],"(",["T_STRING","sizeof",5426],"(",["T_VARIABLE","$v_list",5426],")","-",["T_LNUMBER","1",5426],")",")",["T_WHITESPACE"," ",5426],"{",["T_WHITESPACE","\n            ",5426],["T_VARIABLE","$v_result",5427],["T_WHITESPACE"," ",5427],"=",["T_WHITESPACE"," ",5427],["T_VARIABLE","$v_list",5427],"[",["T_VARIABLE","$i",5427],"]",";",["T_WHITESPACE","\n\t\t  ",5427],"}",["T_WHITESPACE","\n\t\t  ",5428],["T_COMMENT","\/\/ ----- Double '\/' inside the path\n",5429],["T_WHITESPACE","\t\t  ",5430],["T_ELSE","else",5430],["T_WHITESPACE"," ",5430],"{",["T_WHITESPACE","\n            ",5430],["T_COMMENT","\/\/ ----- Ignore only the double '\/\/' in path,\n",5431],["T_WHITESPACE","            ",5432],["T_COMMENT","\/\/ but not the first and last '\/'\n",5432],["T_WHITESPACE","\t\t  ",5433],"}",["T_WHITESPACE","\n        ",5433],"}",["T_WHITESPACE","\n        ",5434],["T_ELSE","else",5435],["T_WHITESPACE"," ",5435],"{",["T_WHITESPACE","\n\t\t  ",5435],["T_COMMENT","\/\/ ----- Look for item to skip\n",5436],["T_WHITESPACE","\t\t  ",5437],["T_IF","if",5437],["T_WHITESPACE"," ",5437],"(",["T_VARIABLE","$v_skip",5437],["T_WHITESPACE"," ",5437],">",["T_WHITESPACE"," ",5437],["T_LNUMBER","0",5437],")",["T_WHITESPACE"," ",5437],"{",["T_WHITESPACE","\n\t\t    ",5437],["T_VARIABLE","$v_skip",5438],["T_DEC","--",5438],";",["T_WHITESPACE","\n\t\t  ",5438],"}",["T_WHITESPACE","\n\t\t  ",5439],["T_ELSE","else",5440],["T_WHITESPACE"," ",5440],"{",["T_WHITESPACE","\n            ",5440],["T_VARIABLE","$v_result",5441],["T_WHITESPACE"," ",5441],"=",["T_WHITESPACE"," ",5441],["T_VARIABLE","$v_list",5441],"[",["T_VARIABLE","$i",5441],"]",".","(",["T_VARIABLE","$i",5441],["T_IS_NOT_EQUAL","!=",5441],"(",["T_STRING","sizeof",5441],"(",["T_VARIABLE","$v_list",5441],")","-",["T_LNUMBER","1",5441],")","?",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",5441],".",["T_VARIABLE","$v_result",5441],":",["T_CONSTANT_ENCAPSED_STRING","\"\"",5441],")",";",["T_WHITESPACE","\n\t\t  ",5441],"}",["T_WHITESPACE","\n        ",5442],"}",["T_WHITESPACE","\n      ",5443],"}",["T_WHITESPACE","\n\n      ",5444],["T_COMMENT","\/\/ ----- Look for skip\n",5446],["T_WHITESPACE","      ",5447],["T_IF","if",5447],["T_WHITESPACE"," ",5447],"(",["T_VARIABLE","$v_skip",5447],["T_WHITESPACE"," ",5447],">",["T_WHITESPACE"," ",5447],["T_LNUMBER","0",5447],")",["T_WHITESPACE"," ",5447],"{",["T_WHITESPACE","\n        ",5447],["T_WHILE","while",5448],["T_WHITESPACE"," ",5448],"(",["T_VARIABLE","$v_skip",5448],["T_WHITESPACE"," ",5448],">",["T_WHITESPACE"," ",5448],["T_LNUMBER","0",5448],")",["T_WHITESPACE"," ",5448],"{",["T_WHITESPACE","\n            ",5448],["T_VARIABLE","$v_result",5449],["T_WHITESPACE"," ",5449],"=",["T_WHITESPACE"," ",5449],["T_CONSTANT_ENCAPSED_STRING","'..\/'",5449],".",["T_VARIABLE","$v_result",5449],";",["T_WHITESPACE","\n            ",5449],["T_VARIABLE","$v_skip",5450],["T_DEC","--",5450],";",["T_WHITESPACE","\n        ",5450],"}",["T_WHITESPACE","\n      ",5451],"}",["T_WHITESPACE","\n    ",5452],"}",["T_WHITESPACE","\n\n    ",5453],["T_COMMENT","\/\/ ----- Return\n",5455],["T_WHITESPACE","    ",5456],["T_RETURN","return",5456],["T_WHITESPACE"," ",5456],["T_VARIABLE","$v_result",5456],";",["T_WHITESPACE","\n  ",5456],"}",["T_WHITESPACE","\n  ",5457],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5458],["T_WHITESPACE","\n  ",5459],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5460],["T_WHITESPACE","  ",5461],["T_COMMENT","\/\/ Function : PclZipUtilPathInclusion()\n",5461],["T_WHITESPACE","  ",5462],["T_COMMENT","\/\/ Description :\n",5462],["T_WHITESPACE","  ",5463],["T_COMMENT","\/\/   This function indicates if the path $p_path is under the $p_dir tree. Or,\n",5463],["T_WHITESPACE","  ",5464],["T_COMMENT","\/\/   said in an other way, if the file or sub-dir $p_path is inside the dir\n",5464],["T_WHITESPACE","  ",5465],["T_COMMENT","\/\/   $p_dir.\n",5465],["T_WHITESPACE","  ",5466],["T_COMMENT","\/\/   The function indicates also if the path is exactly the same as the dir.\n",5466],["T_WHITESPACE","  ",5467],["T_COMMENT","\/\/   This function supports path with duplicated '\/' like '\/\/', but does not\n",5467],["T_WHITESPACE","  ",5468],["T_COMMENT","\/\/   support '.' or '..' statements.\n",5468],["T_WHITESPACE","  ",5469],["T_COMMENT","\/\/ Parameters :\n",5469],["T_WHITESPACE","  ",5470],["T_COMMENT","\/\/ Return Values :\n",5470],["T_WHITESPACE","  ",5471],["T_COMMENT","\/\/   0 if $p_path is not inside directory $p_dir\n",5471],["T_WHITESPACE","  ",5472],["T_COMMENT","\/\/   1 if $p_path is inside directory $p_dir\n",5472],["T_WHITESPACE","  ",5473],["T_COMMENT","\/\/   2 if $p_path is exactly the same as $p_dir\n",5473],["T_WHITESPACE","  ",5474],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5474],["T_WHITESPACE","  ",5475],["T_FUNCTION","function",5475],["T_WHITESPACE"," ",5475],["T_STRING","PclZipUtilPathInclusion",5475],"(",["T_VARIABLE","$p_dir",5475],",",["T_WHITESPACE"," ",5475],["T_VARIABLE","$p_path",5475],")",["T_WHITESPACE","\n  ",5475],"{",["T_WHITESPACE","\n    ",5476],["T_VARIABLE","$v_result",5477],["T_WHITESPACE"," ",5477],"=",["T_WHITESPACE"," ",5477],["T_LNUMBER","1",5477],";",["T_WHITESPACE","\n\n    ",5477],["T_COMMENT","\/\/ ----- Look for path beginning by .\/\n",5479],["T_WHITESPACE","    ",5480],["T_IF","if",5480],["T_WHITESPACE"," ",5480],"(",["T_WHITESPACE","   ",5480],"(",["T_VARIABLE","$p_dir",5480],["T_WHITESPACE"," ",5480],["T_IS_EQUAL","==",5480],["T_WHITESPACE"," ",5480],["T_CONSTANT_ENCAPSED_STRING","'.'",5480],")",["T_WHITESPACE","\n        ",5480],["T_BOOLEAN_OR","||",5481],["T_WHITESPACE"," ",5481],"(","(",["T_STRING","strlen",5481],"(",["T_VARIABLE","$p_dir",5481],")",["T_WHITESPACE"," ",5481],["T_IS_GREATER_OR_EQUAL",">=",5481],["T_LNUMBER","2",5481],")",["T_WHITESPACE"," ",5481],["T_BOOLEAN_AND","&&",5481],["T_WHITESPACE"," ",5481],"(",["T_STRING","substr",5481],"(",["T_VARIABLE","$p_dir",5481],",",["T_WHITESPACE"," ",5481],["T_LNUMBER","0",5481],",",["T_WHITESPACE"," ",5481],["T_LNUMBER","2",5481],")",["T_WHITESPACE"," ",5481],["T_IS_EQUAL","==",5481],["T_WHITESPACE"," ",5481],["T_CONSTANT_ENCAPSED_STRING","'.\/'",5481],")",")",")",["T_WHITESPACE"," ",5481],"{",["T_WHITESPACE","\n      ",5481],["T_VARIABLE","$p_dir",5482],["T_WHITESPACE"," ",5482],"=",["T_WHITESPACE"," ",5482],["T_STRING","PclZipUtilTranslateWinPath",5482],"(",["T_STRING","getcwd",5482],"(",")",",",["T_WHITESPACE"," ",5482],["T_STRING","FALSE",5482],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",5482],".",["T_STRING","substr",5482],"(",["T_VARIABLE","$p_dir",5482],",",["T_WHITESPACE"," ",5482],["T_LNUMBER","1",5482],")",";",["T_WHITESPACE","\n    ",5482],"}",["T_WHITESPACE","\n    ",5483],["T_IF","if",5484],["T_WHITESPACE"," ",5484],"(",["T_WHITESPACE","   ",5484],"(",["T_VARIABLE","$p_path",5484],["T_WHITESPACE"," ",5484],["T_IS_EQUAL","==",5484],["T_WHITESPACE"," ",5484],["T_CONSTANT_ENCAPSED_STRING","'.'",5484],")",["T_WHITESPACE","\n        ",5484],["T_BOOLEAN_OR","||",5485],["T_WHITESPACE"," ",5485],"(","(",["T_STRING","strlen",5485],"(",["T_VARIABLE","$p_path",5485],")",["T_WHITESPACE"," ",5485],["T_IS_GREATER_OR_EQUAL",">=",5485],["T_LNUMBER","2",5485],")",["T_WHITESPACE"," ",5485],["T_BOOLEAN_AND","&&",5485],["T_WHITESPACE"," ",5485],"(",["T_STRING","substr",5485],"(",["T_VARIABLE","$p_path",5485],",",["T_WHITESPACE"," ",5485],["T_LNUMBER","0",5485],",",["T_WHITESPACE"," ",5485],["T_LNUMBER","2",5485],")",["T_WHITESPACE"," ",5485],["T_IS_EQUAL","==",5485],["T_WHITESPACE"," ",5485],["T_CONSTANT_ENCAPSED_STRING","'.\/'",5485],")",")",")",["T_WHITESPACE"," ",5485],"{",["T_WHITESPACE","\n      ",5485],["T_VARIABLE","$p_path",5486],["T_WHITESPACE"," ",5486],"=",["T_WHITESPACE"," ",5486],["T_STRING","PclZipUtilTranslateWinPath",5486],"(",["T_STRING","getcwd",5486],"(",")",",",["T_WHITESPACE"," ",5486],["T_STRING","FALSE",5486],")",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",5486],".",["T_STRING","substr",5486],"(",["T_VARIABLE","$p_path",5486],",",["T_WHITESPACE"," ",5486],["T_LNUMBER","1",5486],")",";",["T_WHITESPACE","\n    ",5486],"}",["T_WHITESPACE","\n\n    ",5487],["T_COMMENT","\/\/ ----- Explode dir and path by directory separator\n",5489],["T_WHITESPACE","    ",5490],["T_VARIABLE","$v_list_dir",5490],["T_WHITESPACE"," ",5490],"=",["T_WHITESPACE"," ",5490],["T_STRING","explode",5490],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",5490],",",["T_WHITESPACE"," ",5490],["T_VARIABLE","$p_dir",5490],")",";",["T_WHITESPACE","\n    ",5490],["T_VARIABLE","$v_list_dir_size",5491],["T_WHITESPACE"," ",5491],"=",["T_WHITESPACE"," ",5491],["T_STRING","sizeof",5491],"(",["T_VARIABLE","$v_list_dir",5491],")",";",["T_WHITESPACE","\n    ",5491],["T_VARIABLE","$v_list_path",5492],["T_WHITESPACE"," ",5492],"=",["T_WHITESPACE"," ",5492],["T_STRING","explode",5492],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/\"",5492],",",["T_WHITESPACE"," ",5492],["T_VARIABLE","$p_path",5492],")",";",["T_WHITESPACE","\n    ",5492],["T_VARIABLE","$v_list_path_size",5493],["T_WHITESPACE"," ",5493],"=",["T_WHITESPACE"," ",5493],["T_STRING","sizeof",5493],"(",["T_VARIABLE","$v_list_path",5493],")",";",["T_WHITESPACE","\n\n    ",5493],["T_COMMENT","\/\/ ----- Study directories paths\n",5495],["T_WHITESPACE","    ",5496],["T_VARIABLE","$i",5496],["T_WHITESPACE"," ",5496],"=",["T_WHITESPACE"," ",5496],["T_LNUMBER","0",5496],";",["T_WHITESPACE","\n    ",5496],["T_VARIABLE","$j",5497],["T_WHITESPACE"," ",5497],"=",["T_WHITESPACE"," ",5497],["T_LNUMBER","0",5497],";",["T_WHITESPACE","\n    ",5497],["T_WHILE","while",5498],["T_WHITESPACE"," ",5498],"(","(",["T_VARIABLE","$i",5498],["T_WHITESPACE"," ",5498],"<",["T_WHITESPACE"," ",5498],["T_VARIABLE","$v_list_dir_size",5498],")",["T_WHITESPACE"," ",5498],["T_BOOLEAN_AND","&&",5498],["T_WHITESPACE"," ",5498],"(",["T_VARIABLE","$j",5498],["T_WHITESPACE"," ",5498],"<",["T_WHITESPACE"," ",5498],["T_VARIABLE","$v_list_path_size",5498],")",["T_WHITESPACE"," ",5498],["T_BOOLEAN_AND","&&",5498],["T_WHITESPACE"," ",5498],"(",["T_VARIABLE","$v_result",5498],")",")",["T_WHITESPACE"," ",5498],"{",["T_WHITESPACE","\n\n      ",5498],["T_COMMENT","\/\/ ----- Look for empty dir (path reduction)\n",5500],["T_WHITESPACE","      ",5501],["T_IF","if",5501],["T_WHITESPACE"," ",5501],"(",["T_VARIABLE","$v_list_dir",5501],"[",["T_VARIABLE","$i",5501],"]",["T_WHITESPACE"," ",5501],["T_IS_EQUAL","==",5501],["T_WHITESPACE"," ",5501],["T_CONSTANT_ENCAPSED_STRING","''",5501],")",["T_WHITESPACE"," ",5501],"{",["T_WHITESPACE","\n        ",5501],["T_VARIABLE","$i",5502],["T_INC","++",5502],";",["T_WHITESPACE","\n        ",5502],["T_CONTINUE","continue",5503],";",["T_WHITESPACE","\n      ",5503],"}",["T_WHITESPACE","\n      ",5504],["T_IF","if",5505],["T_WHITESPACE"," ",5505],"(",["T_VARIABLE","$v_list_path",5505],"[",["T_VARIABLE","$j",5505],"]",["T_WHITESPACE"," ",5505],["T_IS_EQUAL","==",5505],["T_WHITESPACE"," ",5505],["T_CONSTANT_ENCAPSED_STRING","''",5505],")",["T_WHITESPACE"," ",5505],"{",["T_WHITESPACE","\n        ",5505],["T_VARIABLE","$j",5506],["T_INC","++",5506],";",["T_WHITESPACE","\n        ",5506],["T_CONTINUE","continue",5507],";",["T_WHITESPACE","\n      ",5507],"}",["T_WHITESPACE","\n\n      ",5508],["T_COMMENT","\/\/ ----- Compare the items\n",5510],["T_WHITESPACE","      ",5511],["T_IF","if",5511],["T_WHITESPACE"," ",5511],"(","(",["T_VARIABLE","$v_list_dir",5511],"[",["T_VARIABLE","$i",5511],"]",["T_WHITESPACE"," ",5511],["T_IS_NOT_EQUAL","!=",5511],["T_WHITESPACE"," ",5511],["T_VARIABLE","$v_list_path",5511],"[",["T_VARIABLE","$j",5511],"]",")",["T_WHITESPACE"," ",5511],["T_BOOLEAN_AND","&&",5511],["T_WHITESPACE"," ",5511],"(",["T_VARIABLE","$v_list_dir",5511],"[",["T_VARIABLE","$i",5511],"]",["T_WHITESPACE"," ",5511],["T_IS_NOT_EQUAL","!=",5511],["T_WHITESPACE"," ",5511],["T_CONSTANT_ENCAPSED_STRING","''",5511],")",["T_WHITESPACE"," ",5511],["T_BOOLEAN_AND","&&",5511],["T_WHITESPACE"," ",5511],"(",["T_WHITESPACE"," ",5511],["T_VARIABLE","$v_list_path",5511],"[",["T_VARIABLE","$j",5511],"]",["T_WHITESPACE"," ",5511],["T_IS_NOT_EQUAL","!=",5511],["T_WHITESPACE"," ",5511],["T_CONSTANT_ENCAPSED_STRING","''",5511],")",")",["T_WHITESPACE","  ",5511],"{",["T_WHITESPACE","\n        ",5511],["T_VARIABLE","$v_result",5512],["T_WHITESPACE"," ",5512],"=",["T_WHITESPACE"," ",5512],["T_LNUMBER","0",5512],";",["T_WHITESPACE","\n      ",5512],"}",["T_WHITESPACE","\n\n      ",5513],["T_COMMENT","\/\/ ----- Next items\n",5515],["T_WHITESPACE","      ",5516],["T_VARIABLE","$i",5516],["T_INC","++",5516],";",["T_WHITESPACE","\n      ",5516],["T_VARIABLE","$j",5517],["T_INC","++",5517],";",["T_WHITESPACE","\n    ",5517],"}",["T_WHITESPACE","\n\n    ",5518],["T_COMMENT","\/\/ ----- Look if everything seems to be the same\n",5520],["T_WHITESPACE","    ",5521],["T_IF","if",5521],["T_WHITESPACE"," ",5521],"(",["T_VARIABLE","$v_result",5521],")",["T_WHITESPACE"," ",5521],"{",["T_WHITESPACE","\n      ",5521],["T_COMMENT","\/\/ ----- Skip all the empty items\n",5522],["T_WHITESPACE","      ",5523],["T_WHILE","while",5523],["T_WHITESPACE"," ",5523],"(","(",["T_VARIABLE","$j",5523],["T_WHITESPACE"," ",5523],"<",["T_WHITESPACE"," ",5523],["T_VARIABLE","$v_list_path_size",5523],")",["T_WHITESPACE"," ",5523],["T_BOOLEAN_AND","&&",5523],["T_WHITESPACE"," ",5523],"(",["T_VARIABLE","$v_list_path",5523],"[",["T_VARIABLE","$j",5523],"]",["T_WHITESPACE"," ",5523],["T_IS_EQUAL","==",5523],["T_WHITESPACE"," ",5523],["T_CONSTANT_ENCAPSED_STRING","''",5523],")",")",["T_WHITESPACE"," ",5523],["T_VARIABLE","$j",5523],["T_INC","++",5523],";",["T_WHITESPACE","\n      ",5523],["T_WHILE","while",5524],["T_WHITESPACE"," ",5524],"(","(",["T_VARIABLE","$i",5524],["T_WHITESPACE"," ",5524],"<",["T_WHITESPACE"," ",5524],["T_VARIABLE","$v_list_dir_size",5524],")",["T_WHITESPACE"," ",5524],["T_BOOLEAN_AND","&&",5524],["T_WHITESPACE"," ",5524],"(",["T_VARIABLE","$v_list_dir",5524],"[",["T_VARIABLE","$i",5524],"]",["T_WHITESPACE"," ",5524],["T_IS_EQUAL","==",5524],["T_WHITESPACE"," ",5524],["T_CONSTANT_ENCAPSED_STRING","''",5524],")",")",["T_WHITESPACE"," ",5524],["T_VARIABLE","$i",5524],["T_INC","++",5524],";",["T_WHITESPACE","\n\n      ",5524],["T_IF","if",5526],["T_WHITESPACE"," ",5526],"(","(",["T_VARIABLE","$i",5526],["T_WHITESPACE"," ",5526],["T_IS_GREATER_OR_EQUAL",">=",5526],["T_WHITESPACE"," ",5526],["T_VARIABLE","$v_list_dir_size",5526],")",["T_WHITESPACE"," ",5526],["T_BOOLEAN_AND","&&",5526],["T_WHITESPACE"," ",5526],"(",["T_VARIABLE","$j",5526],["T_WHITESPACE"," ",5526],["T_IS_GREATER_OR_EQUAL",">=",5526],["T_WHITESPACE"," ",5526],["T_VARIABLE","$v_list_path_size",5526],")",")",["T_WHITESPACE"," ",5526],"{",["T_WHITESPACE","\n        ",5526],["T_COMMENT","\/\/ ----- There are exactly the same\n",5527],["T_WHITESPACE","        ",5528],["T_VARIABLE","$v_result",5528],["T_WHITESPACE"," ",5528],"=",["T_WHITESPACE"," ",5528],["T_LNUMBER","2",5528],";",["T_WHITESPACE","\n      ",5528],"}",["T_WHITESPACE","\n      ",5529],["T_ELSE","else",5530],["T_WHITESPACE"," ",5530],["T_IF","if",5530],["T_WHITESPACE"," ",5530],"(",["T_VARIABLE","$i",5530],["T_WHITESPACE"," ",5530],"<",["T_WHITESPACE"," ",5530],["T_VARIABLE","$v_list_dir_size",5530],")",["T_WHITESPACE"," ",5530],"{",["T_WHITESPACE","\n        ",5530],["T_COMMENT","\/\/ ----- The path is shorter than the dir\n",5531],["T_WHITESPACE","        ",5532],["T_VARIABLE","$v_result",5532],["T_WHITESPACE"," ",5532],"=",["T_WHITESPACE"," ",5532],["T_LNUMBER","0",5532],";",["T_WHITESPACE","\n      ",5532],"}",["T_WHITESPACE","\n    ",5533],"}",["T_WHITESPACE","\n\n    ",5534],["T_COMMENT","\/\/ ----- Return\n",5536],["T_WHITESPACE","    ",5537],["T_RETURN","return",5537],["T_WHITESPACE"," ",5537],["T_VARIABLE","$v_result",5537],";",["T_WHITESPACE","\n  ",5537],"}",["T_WHITESPACE","\n  ",5538],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5539],["T_WHITESPACE","\n  ",5540],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5541],["T_WHITESPACE","  ",5542],["T_COMMENT","\/\/ Function : PclZipUtilCopyBlock()\n",5542],["T_WHITESPACE","  ",5543],["T_COMMENT","\/\/ Description :\n",5543],["T_WHITESPACE","  ",5544],["T_COMMENT","\/\/ Parameters :\n",5544],["T_WHITESPACE","  ",5545],["T_COMMENT","\/\/   $p_mode : read\/write compression mode\n",5545],["T_WHITESPACE","  ",5546],["T_COMMENT","\/\/             0 : src & dest normal\n",5546],["T_WHITESPACE","  ",5547],["T_COMMENT","\/\/             1 : src gzip, dest normal\n",5547],["T_WHITESPACE","  ",5548],["T_COMMENT","\/\/             2 : src normal, dest gzip\n",5548],["T_WHITESPACE","  ",5549],["T_COMMENT","\/\/             3 : src & dest gzip\n",5549],["T_WHITESPACE","  ",5550],["T_COMMENT","\/\/ Return Values :\n",5550],["T_WHITESPACE","  ",5551],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5551],["T_WHITESPACE","  ",5552],["T_FUNCTION","function",5552],["T_WHITESPACE"," ",5552],["T_STRING","PclZipUtilCopyBlock",5552],"(",["T_VARIABLE","$p_src",5552],",",["T_WHITESPACE"," ",5552],["T_VARIABLE","$p_dest",5552],",",["T_WHITESPACE"," ",5552],["T_VARIABLE","$p_size",5552],",",["T_WHITESPACE"," ",5552],["T_VARIABLE","$p_mode",5552],"=",["T_LNUMBER","0",5552],")",["T_WHITESPACE","\n  ",5552],"{",["T_WHITESPACE","\n    ",5553],["T_VARIABLE","$v_result",5554],["T_WHITESPACE"," ",5554],"=",["T_WHITESPACE"," ",5554],["T_LNUMBER","1",5554],";",["T_WHITESPACE","\n\n    ",5554],["T_IF","if",5556],["T_WHITESPACE"," ",5556],"(",["T_VARIABLE","$p_mode",5556],["T_IS_EQUAL","==",5556],["T_LNUMBER","0",5556],")",["T_WHITESPACE","\n    ",5556],"{",["T_WHITESPACE","\n      ",5557],["T_WHILE","while",5558],["T_WHITESPACE"," ",5558],"(",["T_VARIABLE","$p_size",5558],["T_WHITESPACE"," ",5558],["T_IS_NOT_EQUAL","!=",5558],["T_WHITESPACE"," ",5558],["T_LNUMBER","0",5558],")",["T_WHITESPACE","\n      ",5558],"{",["T_WHITESPACE","\n        ",5559],["T_VARIABLE","$v_read_size",5560],["T_WHITESPACE"," ",5560],"=",["T_WHITESPACE"," ",5560],"(",["T_VARIABLE","$p_size",5560],["T_WHITESPACE"," ",5560],"<",["T_WHITESPACE"," ",5560],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5560],["T_WHITESPACE"," ",5560],"?",["T_WHITESPACE"," ",5560],["T_VARIABLE","$p_size",5560],["T_WHITESPACE"," ",5560],":",["T_WHITESPACE"," ",5560],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5560],")",";",["T_WHITESPACE","\n        ",5560],["T_VARIABLE","$v_buffer",5561],["T_WHITESPACE"," ",5561],"=",["T_WHITESPACE"," ",5561],"@",["T_STRING","fread",5561],"(",["T_VARIABLE","$p_src",5561],",",["T_WHITESPACE"," ",5561],["T_VARIABLE","$v_read_size",5561],")",";",["T_WHITESPACE","\n        ",5561],"@",["T_STRING","fwrite",5562],"(",["T_VARIABLE","$p_dest",5562],",",["T_WHITESPACE"," ",5562],["T_VARIABLE","$v_buffer",5562],",",["T_WHITESPACE"," ",5562],["T_VARIABLE","$v_read_size",5562],")",";",["T_WHITESPACE","\n        ",5562],["T_VARIABLE","$p_size",5563],["T_WHITESPACE"," ",5563],["T_MINUS_EQUAL","-=",5563],["T_WHITESPACE"," ",5563],["T_VARIABLE","$v_read_size",5563],";",["T_WHITESPACE","\n      ",5563],"}",["T_WHITESPACE","\n    ",5564],"}",["T_WHITESPACE","\n    ",5565],["T_ELSE","else",5566],["T_WHITESPACE"," ",5566],["T_IF","if",5566],["T_WHITESPACE"," ",5566],"(",["T_VARIABLE","$p_mode",5566],["T_IS_EQUAL","==",5566],["T_LNUMBER","1",5566],")",["T_WHITESPACE","\n    ",5566],"{",["T_WHITESPACE","\n      ",5567],["T_WHILE","while",5568],["T_WHITESPACE"," ",5568],"(",["T_VARIABLE","$p_size",5568],["T_WHITESPACE"," ",5568],["T_IS_NOT_EQUAL","!=",5568],["T_WHITESPACE"," ",5568],["T_LNUMBER","0",5568],")",["T_WHITESPACE","\n      ",5568],"{",["T_WHITESPACE","\n        ",5569],["T_VARIABLE","$v_read_size",5570],["T_WHITESPACE"," ",5570],"=",["T_WHITESPACE"," ",5570],"(",["T_VARIABLE","$p_size",5570],["T_WHITESPACE"," ",5570],"<",["T_WHITESPACE"," ",5570],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5570],["T_WHITESPACE"," ",5570],"?",["T_WHITESPACE"," ",5570],["T_VARIABLE","$p_size",5570],["T_WHITESPACE"," ",5570],":",["T_WHITESPACE"," ",5570],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5570],")",";",["T_WHITESPACE","\n        ",5570],["T_VARIABLE","$v_buffer",5571],["T_WHITESPACE"," ",5571],"=",["T_WHITESPACE"," ",5571],"@",["T_STRING","gzread",5571],"(",["T_VARIABLE","$p_src",5571],",",["T_WHITESPACE"," ",5571],["T_VARIABLE","$v_read_size",5571],")",";",["T_WHITESPACE","\n        ",5571],"@",["T_STRING","fwrite",5572],"(",["T_VARIABLE","$p_dest",5572],",",["T_WHITESPACE"," ",5572],["T_VARIABLE","$v_buffer",5572],",",["T_WHITESPACE"," ",5572],["T_VARIABLE","$v_read_size",5572],")",";",["T_WHITESPACE","\n        ",5572],["T_VARIABLE","$p_size",5573],["T_WHITESPACE"," ",5573],["T_MINUS_EQUAL","-=",5573],["T_WHITESPACE"," ",5573],["T_VARIABLE","$v_read_size",5573],";",["T_WHITESPACE","\n      ",5573],"}",["T_WHITESPACE","\n    ",5574],"}",["T_WHITESPACE","\n    ",5575],["T_ELSE","else",5576],["T_WHITESPACE"," ",5576],["T_IF","if",5576],["T_WHITESPACE"," ",5576],"(",["T_VARIABLE","$p_mode",5576],["T_IS_EQUAL","==",5576],["T_LNUMBER","2",5576],")",["T_WHITESPACE","\n    ",5576],"{",["T_WHITESPACE","\n      ",5577],["T_WHILE","while",5578],["T_WHITESPACE"," ",5578],"(",["T_VARIABLE","$p_size",5578],["T_WHITESPACE"," ",5578],["T_IS_NOT_EQUAL","!=",5578],["T_WHITESPACE"," ",5578],["T_LNUMBER","0",5578],")",["T_WHITESPACE","\n      ",5578],"{",["T_WHITESPACE","\n        ",5579],["T_VARIABLE","$v_read_size",5580],["T_WHITESPACE"," ",5580],"=",["T_WHITESPACE"," ",5580],"(",["T_VARIABLE","$p_size",5580],["T_WHITESPACE"," ",5580],"<",["T_WHITESPACE"," ",5580],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5580],["T_WHITESPACE"," ",5580],"?",["T_WHITESPACE"," ",5580],["T_VARIABLE","$p_size",5580],["T_WHITESPACE"," ",5580],":",["T_WHITESPACE"," ",5580],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5580],")",";",["T_WHITESPACE","\n        ",5580],["T_VARIABLE","$v_buffer",5581],["T_WHITESPACE"," ",5581],"=",["T_WHITESPACE"," ",5581],"@",["T_STRING","fread",5581],"(",["T_VARIABLE","$p_src",5581],",",["T_WHITESPACE"," ",5581],["T_VARIABLE","$v_read_size",5581],")",";",["T_WHITESPACE","\n        ",5581],"@",["T_STRING","gzwrite",5582],"(",["T_VARIABLE","$p_dest",5582],",",["T_WHITESPACE"," ",5582],["T_VARIABLE","$v_buffer",5582],",",["T_WHITESPACE"," ",5582],["T_VARIABLE","$v_read_size",5582],")",";",["T_WHITESPACE","\n        ",5582],["T_VARIABLE","$p_size",5583],["T_WHITESPACE"," ",5583],["T_MINUS_EQUAL","-=",5583],["T_WHITESPACE"," ",5583],["T_VARIABLE","$v_read_size",5583],";",["T_WHITESPACE","\n      ",5583],"}",["T_WHITESPACE","\n    ",5584],"}",["T_WHITESPACE","\n    ",5585],["T_ELSE","else",5586],["T_WHITESPACE"," ",5586],["T_IF","if",5586],["T_WHITESPACE"," ",5586],"(",["T_VARIABLE","$p_mode",5586],["T_IS_EQUAL","==",5586],["T_LNUMBER","3",5586],")",["T_WHITESPACE","\n    ",5586],"{",["T_WHITESPACE","\n      ",5587],["T_WHILE","while",5588],["T_WHITESPACE"," ",5588],"(",["T_VARIABLE","$p_size",5588],["T_WHITESPACE"," ",5588],["T_IS_NOT_EQUAL","!=",5588],["T_WHITESPACE"," ",5588],["T_LNUMBER","0",5588],")",["T_WHITESPACE","\n      ",5588],"{",["T_WHITESPACE","\n        ",5589],["T_VARIABLE","$v_read_size",5590],["T_WHITESPACE"," ",5590],"=",["T_WHITESPACE"," ",5590],"(",["T_VARIABLE","$p_size",5590],["T_WHITESPACE"," ",5590],"<",["T_WHITESPACE"," ",5590],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5590],["T_WHITESPACE"," ",5590],"?",["T_WHITESPACE"," ",5590],["T_VARIABLE","$p_size",5590],["T_WHITESPACE"," ",5590],":",["T_WHITESPACE"," ",5590],["T_STRING","PCLZIP_READ_BLOCK_SIZE",5590],")",";",["T_WHITESPACE","\n        ",5590],["T_VARIABLE","$v_buffer",5591],["T_WHITESPACE"," ",5591],"=",["T_WHITESPACE"," ",5591],"@",["T_STRING","gzread",5591],"(",["T_VARIABLE","$p_src",5591],",",["T_WHITESPACE"," ",5591],["T_VARIABLE","$v_read_size",5591],")",";",["T_WHITESPACE","\n        ",5591],"@",["T_STRING","gzwrite",5592],"(",["T_VARIABLE","$p_dest",5592],",",["T_WHITESPACE"," ",5592],["T_VARIABLE","$v_buffer",5592],",",["T_WHITESPACE"," ",5592],["T_VARIABLE","$v_read_size",5592],")",";",["T_WHITESPACE","\n        ",5592],["T_VARIABLE","$p_size",5593],["T_WHITESPACE"," ",5593],["T_MINUS_EQUAL","-=",5593],["T_WHITESPACE"," ",5593],["T_VARIABLE","$v_read_size",5593],";",["T_WHITESPACE","\n      ",5593],"}",["T_WHITESPACE","\n    ",5594],"}",["T_WHITESPACE","\n\n    ",5595],["T_COMMENT","\/\/ ----- Return\n",5597],["T_WHITESPACE","    ",5598],["T_RETURN","return",5598],["T_WHITESPACE"," ",5598],["T_VARIABLE","$v_result",5598],";",["T_WHITESPACE","\n  ",5598],"}",["T_WHITESPACE","\n  ",5599],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5600],["T_WHITESPACE","\n  ",5601],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5602],["T_WHITESPACE","  ",5603],["T_COMMENT","\/\/ Function : PclZipUtilRename()\n",5603],["T_WHITESPACE","  ",5604],["T_COMMENT","\/\/ Description :\n",5604],["T_WHITESPACE","  ",5605],["T_COMMENT","\/\/   This function tries to do a simple rename() function. If it fails, it\n",5605],["T_WHITESPACE","  ",5606],["T_COMMENT","\/\/   tries to copy the $p_src file in a new $p_dest file and then unlink the\n",5606],["T_WHITESPACE","  ",5607],["T_COMMENT","\/\/   first one.\n",5607],["T_WHITESPACE","  ",5608],["T_COMMENT","\/\/ Parameters :\n",5608],["T_WHITESPACE","  ",5609],["T_COMMENT","\/\/   $p_src : Old filename\n",5609],["T_WHITESPACE","  ",5610],["T_COMMENT","\/\/   $p_dest : New filename\n",5610],["T_WHITESPACE","  ",5611],["T_COMMENT","\/\/ Return Values :\n",5611],["T_WHITESPACE","  ",5612],["T_COMMENT","\/\/   1 on success, 0 on failure.\n",5612],["T_WHITESPACE","  ",5613],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5613],["T_WHITESPACE","  ",5614],["T_FUNCTION","function",5614],["T_WHITESPACE"," ",5614],["T_STRING","PclZipUtilRename",5614],"(",["T_VARIABLE","$p_src",5614],",",["T_WHITESPACE"," ",5614],["T_VARIABLE","$p_dest",5614],")",["T_WHITESPACE","\n  ",5614],"{",["T_WHITESPACE","\n    ",5615],["T_VARIABLE","$v_result",5616],["T_WHITESPACE"," ",5616],"=",["T_WHITESPACE"," ",5616],["T_LNUMBER","1",5616],";",["T_WHITESPACE","\n\n    ",5616],["T_COMMENT","\/\/ ----- Try to rename the files\n",5618],["T_WHITESPACE","    ",5619],["T_IF","if",5619],["T_WHITESPACE"," ",5619],"(","!","@",["T_STRING","rename",5619],"(",["T_VARIABLE","$p_src",5619],",",["T_WHITESPACE"," ",5619],["T_VARIABLE","$p_dest",5619],")",")",["T_WHITESPACE"," ",5619],"{",["T_WHITESPACE","\n\n      ",5619],["T_COMMENT","\/\/ ----- Try to copy & unlink the src\n",5621],["T_WHITESPACE","      ",5622],["T_IF","if",5622],["T_WHITESPACE"," ",5622],"(","!","@",["T_STRING","copy",5622],"(",["T_VARIABLE","$p_src",5622],",",["T_WHITESPACE"," ",5622],["T_VARIABLE","$p_dest",5622],")",")",["T_WHITESPACE"," ",5622],"{",["T_WHITESPACE","\n        ",5622],["T_VARIABLE","$v_result",5623],["T_WHITESPACE"," ",5623],"=",["T_WHITESPACE"," ",5623],["T_LNUMBER","0",5623],";",["T_WHITESPACE","\n      ",5623],"}",["T_WHITESPACE","\n      ",5624],["T_ELSE","else",5625],["T_WHITESPACE"," ",5625],["T_IF","if",5625],["T_WHITESPACE"," ",5625],"(","!","@",["T_STRING","unlink",5625],"(",["T_VARIABLE","$p_src",5625],")",")",["T_WHITESPACE"," ",5625],"{",["T_WHITESPACE","\n        ",5625],["T_VARIABLE","$v_result",5626],["T_WHITESPACE"," ",5626],"=",["T_WHITESPACE"," ",5626],["T_LNUMBER","0",5626],";",["T_WHITESPACE","\n      ",5626],"}",["T_WHITESPACE","\n    ",5627],"}",["T_WHITESPACE","\n\n    ",5628],["T_COMMENT","\/\/ ----- Return\n",5630],["T_WHITESPACE","    ",5631],["T_RETURN","return",5631],["T_WHITESPACE"," ",5631],["T_VARIABLE","$v_result",5631],";",["T_WHITESPACE","\n  ",5631],"}",["T_WHITESPACE","\n  ",5632],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5633],["T_WHITESPACE","\n  ",5634],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5635],["T_WHITESPACE","  ",5636],["T_COMMENT","\/\/ Function : PclZipUtilOptionText()\n",5636],["T_WHITESPACE","  ",5637],["T_COMMENT","\/\/ Description :\n",5637],["T_WHITESPACE","  ",5638],["T_COMMENT","\/\/   Translate option value in text. Mainly for debug purpose.\n",5638],["T_WHITESPACE","  ",5639],["T_COMMENT","\/\/ Parameters :\n",5639],["T_WHITESPACE","  ",5640],["T_COMMENT","\/\/   $p_option : the option value.\n",5640],["T_WHITESPACE","  ",5641],["T_COMMENT","\/\/ Return Values :\n",5641],["T_WHITESPACE","  ",5642],["T_COMMENT","\/\/   The option text value.\n",5642],["T_WHITESPACE","  ",5643],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5643],["T_WHITESPACE","  ",5644],["T_FUNCTION","function",5644],["T_WHITESPACE"," ",5644],["T_STRING","PclZipUtilOptionText",5644],"(",["T_VARIABLE","$p_option",5644],")",["T_WHITESPACE","\n  ",5644],"{",["T_WHITESPACE","\n\n    ",5645],["T_VARIABLE","$v_list",5647],["T_WHITESPACE"," ",5647],"=",["T_WHITESPACE"," ",5647],["T_STRING","get_defined_constants",5647],"(",")",";",["T_WHITESPACE","\n    ",5647],["T_FOR","for",5648],["T_WHITESPACE"," ",5648],"(",["T_STRING","reset",5648],"(",["T_VARIABLE","$v_list",5648],")",";",["T_WHITESPACE"," ",5648],["T_VARIABLE","$v_key",5648],["T_WHITESPACE"," ",5648],"=",["T_WHITESPACE"," ",5648],["T_STRING","key",5648],"(",["T_VARIABLE","$v_list",5648],")",";",["T_WHITESPACE"," ",5648],["T_STRING","next",5648],"(",["T_VARIABLE","$v_list",5648],")",")",["T_WHITESPACE"," ",5648],"{",["T_WHITESPACE","\n\t    ",5648],["T_VARIABLE","$v_prefix",5649],["T_WHITESPACE"," ",5649],"=",["T_WHITESPACE"," ",5649],["T_STRING","substr",5649],"(",["T_VARIABLE","$v_key",5649],",",["T_WHITESPACE"," ",5649],["T_LNUMBER","0",5649],",",["T_WHITESPACE"," ",5649],["T_LNUMBER","10",5649],")",";",["T_WHITESPACE","\n\t    ",5649],["T_IF","if",5650],["T_WHITESPACE"," ",5650],"(","(",["T_WHITESPACE","   ",5650],"(",["T_VARIABLE","$v_prefix",5650],["T_WHITESPACE"," ",5650],["T_IS_EQUAL","==",5650],["T_WHITESPACE"," ",5650],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_OPT'",5650],")",["T_WHITESPACE","\n           ",5650],["T_BOOLEAN_OR","||",5651],["T_WHITESPACE"," ",5651],"(",["T_VARIABLE","$v_prefix",5651],["T_WHITESPACE"," ",5651],["T_IS_EQUAL","==",5651],["T_WHITESPACE"," ",5651],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_CB_'",5651],")",["T_WHITESPACE","\n           ",5651],["T_BOOLEAN_OR","||",5652],["T_WHITESPACE"," ",5652],"(",["T_VARIABLE","$v_prefix",5652],["T_WHITESPACE"," ",5652],["T_IS_EQUAL","==",5652],["T_WHITESPACE"," ",5652],["T_CONSTANT_ENCAPSED_STRING","'PCLZIP_ATT'",5652],")",")",["T_WHITESPACE","\n\t        ",5652],["T_BOOLEAN_AND","&&",5653],["T_WHITESPACE"," ",5653],"(",["T_VARIABLE","$v_list",5653],"[",["T_VARIABLE","$v_key",5653],"]",["T_WHITESPACE"," ",5653],["T_IS_EQUAL","==",5653],["T_WHITESPACE"," ",5653],["T_VARIABLE","$p_option",5653],")",")",["T_WHITESPACE"," ",5653],"{",["T_WHITESPACE","\n        ",5653],["T_RETURN","return",5654],["T_WHITESPACE"," ",5654],["T_VARIABLE","$v_key",5654],";",["T_WHITESPACE","\n\t    ",5654],"}",["T_WHITESPACE","\n    ",5655],"}",["T_WHITESPACE","\n\n    ",5656],["T_VARIABLE","$v_result",5658],["T_WHITESPACE"," ",5658],"=",["T_WHITESPACE"," ",5658],["T_CONSTANT_ENCAPSED_STRING","'Unknown'",5658],";",["T_WHITESPACE","\n\n    ",5658],["T_RETURN","return",5660],["T_WHITESPACE"," ",5660],["T_VARIABLE","$v_result",5660],";",["T_WHITESPACE","\n  ",5660],"}",["T_WHITESPACE","\n  ",5661],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5662],["T_WHITESPACE","\n  ",5663],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5664],["T_WHITESPACE","  ",5665],["T_COMMENT","\/\/ Function : PclZipUtilTranslateWinPath()\n",5665],["T_WHITESPACE","  ",5666],["T_COMMENT","\/\/ Description :\n",5666],["T_WHITESPACE","  ",5667],["T_COMMENT","\/\/   Translate windows path by replacing '\\' by '\/' and optionally removing\n",5667],["T_WHITESPACE","  ",5668],["T_COMMENT","\/\/   drive letter.\n",5668],["T_WHITESPACE","  ",5669],["T_COMMENT","\/\/ Parameters :\n",5669],["T_WHITESPACE","  ",5670],["T_COMMENT","\/\/   $p_path : path to translate.\n",5670],["T_WHITESPACE","  ",5671],["T_COMMENT","\/\/   $p_remove_disk_letter : true | false\n",5671],["T_WHITESPACE","  ",5672],["T_COMMENT","\/\/ Return Values :\n",5672],["T_WHITESPACE","  ",5673],["T_COMMENT","\/\/   The path translated.\n",5673],["T_WHITESPACE","  ",5674],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5674],["T_WHITESPACE","  ",5675],["T_FUNCTION","function",5675],["T_WHITESPACE"," ",5675],["T_STRING","PclZipUtilTranslateWinPath",5675],"(",["T_VARIABLE","$p_path",5675],",",["T_WHITESPACE"," ",5675],["T_VARIABLE","$p_remove_disk_letter",5675],"=",["T_STRING","true",5675],")",["T_WHITESPACE","\n  ",5675],"{",["T_WHITESPACE","\n    ",5676],["T_IF","if",5677],["T_WHITESPACE"," ",5677],"(",["T_STRING","stristr",5677],"(",["T_STRING","php_uname",5677],"(",")",",",["T_WHITESPACE"," ",5677],["T_CONSTANT_ENCAPSED_STRING","'windows'",5677],")",")",["T_WHITESPACE"," ",5677],"{",["T_WHITESPACE","\n      ",5677],["T_COMMENT","\/\/ ----- Look for potential disk letter\n",5678],["T_WHITESPACE","      ",5679],["T_IF","if",5679],["T_WHITESPACE"," ",5679],"(","(",["T_VARIABLE","$p_remove_disk_letter",5679],")",["T_WHITESPACE"," ",5679],["T_BOOLEAN_AND","&&",5679],["T_WHITESPACE"," ",5679],"(","(",["T_VARIABLE","$v_position",5679],["T_WHITESPACE"," ",5679],"=",["T_WHITESPACE"," ",5679],["T_STRING","strpos",5679],"(",["T_VARIABLE","$p_path",5679],",",["T_WHITESPACE"," ",5679],["T_CONSTANT_ENCAPSED_STRING","':'",5679],")",")",["T_WHITESPACE"," ",5679],["T_IS_NOT_EQUAL","!=",5679],["T_WHITESPACE"," ",5679],["T_STRING","false",5679],")",")",["T_WHITESPACE"," ",5679],"{",["T_WHITESPACE","\n          ",5679],["T_VARIABLE","$p_path",5680],["T_WHITESPACE"," ",5680],"=",["T_WHITESPACE"," ",5680],["T_STRING","substr",5680],"(",["T_VARIABLE","$p_path",5680],",",["T_WHITESPACE"," ",5680],["T_VARIABLE","$v_position",5680],"+",["T_LNUMBER","1",5680],")",";",["T_WHITESPACE","\n      ",5680],"}",["T_WHITESPACE","\n      ",5681],["T_COMMENT","\/\/ ----- Change potential windows directory separator\n",5682],["T_WHITESPACE","      ",5683],["T_IF","if",5683],["T_WHITESPACE"," ",5683],"(","(",["T_STRING","strpos",5683],"(",["T_VARIABLE","$p_path",5683],",",["T_WHITESPACE"," ",5683],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",5683],")",["T_WHITESPACE"," ",5683],">",["T_WHITESPACE"," ",5683],["T_LNUMBER","0",5683],")",["T_WHITESPACE"," ",5683],["T_BOOLEAN_OR","||",5683],["T_WHITESPACE"," ",5683],"(",["T_STRING","substr",5683],"(",["T_VARIABLE","$p_path",5683],",",["T_WHITESPACE"," ",5683],["T_LNUMBER","0",5683],",",["T_LNUMBER","1",5683],")",["T_WHITESPACE"," ",5683],["T_IS_EQUAL","==",5683],["T_WHITESPACE"," ",5683],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",5683],")",")",["T_WHITESPACE"," ",5683],"{",["T_WHITESPACE","\n          ",5683],["T_VARIABLE","$p_path",5684],["T_WHITESPACE"," ",5684],"=",["T_WHITESPACE"," ",5684],["T_STRING","strtr",5684],"(",["T_VARIABLE","$p_path",5684],",",["T_WHITESPACE"," ",5684],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",5684],",",["T_WHITESPACE"," ",5684],["T_CONSTANT_ENCAPSED_STRING","'\/'",5684],")",";",["T_WHITESPACE","\n      ",5684],"}",["T_WHITESPACE","\n    ",5685],"}",["T_WHITESPACE","\n    ",5686],["T_RETURN","return",5687],["T_WHITESPACE"," ",5687],["T_VARIABLE","$p_path",5687],";",["T_WHITESPACE","\n  ",5687],"}",["T_WHITESPACE","\n  ",5688],["T_COMMENT","\/\/ --------------------------------------------------------------------------------\n",5689],["T_WHITESPACE","\n\n",5690],["T_CLOSE_TAG","?>\n",5692]]
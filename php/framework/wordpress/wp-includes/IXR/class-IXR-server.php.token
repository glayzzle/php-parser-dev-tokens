[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * IXR_Server\n *\n * @package IXR\n * @since 1.5.0\n *\/",3],["T_WHITESPACE","\n",8],["T_CLASS","class",9],["T_WHITESPACE"," ",9],["T_STRING","IXR_Server",9],["T_WHITESPACE","\n",9],"{",["T_WHITESPACE","\n    ",10],["T_VAR","var",11],["T_WHITESPACE"," ",11],["T_VARIABLE","$data",11],";",["T_WHITESPACE","\n    ",11],["T_VAR","var",12],["T_WHITESPACE"," ",12],["T_VARIABLE","$callbacks",12],["T_WHITESPACE"," ",12],"=",["T_WHITESPACE"," ",12],["T_ARRAY","array",12],"(",")",";",["T_WHITESPACE","\n    ",12],["T_VAR","var",13],["T_WHITESPACE"," ",13],["T_VARIABLE","$message",13],";",["T_WHITESPACE","\n    ",13],["T_VAR","var",14],["T_WHITESPACE"," ",14],["T_VARIABLE","$capabilities",14],";",["T_WHITESPACE","\n\n\t",14],["T_DOC_COMMENT","\/**\n\t * PHP5 constructor.\n\t *\/",16],["T_WHITESPACE","\n    ",18],["T_FUNCTION","function",19],["T_WHITESPACE"," ",19],["T_STRING","__construct",19],"(",["T_WHITESPACE"," ",19],["T_VARIABLE","$callbacks",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","false",19],",",["T_WHITESPACE"," ",19],["T_VARIABLE","$data",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","false",19],",",["T_WHITESPACE"," ",19],["T_VARIABLE","$wait",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","false",19],["T_WHITESPACE"," ",19],")",["T_WHITESPACE","\n    ",19],"{",["T_WHITESPACE","\n        ",20],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","setCapabilities",21],"(",")",";",["T_WHITESPACE","\n        ",21],["T_IF","if",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$callbacks",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n            ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","callbacks",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$callbacks",23],";",["T_WHITESPACE","\n        ",23],"}",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","setCallbacks",25],"(",")",";",["T_WHITESPACE","\n        ",25],["T_IF","if",26],["T_WHITESPACE"," ",26],"(","!",["T_VARIABLE","$wait",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n            ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","serve",27],"(",["T_VARIABLE","$data",27],")",";",["T_WHITESPACE","\n        ",27],"}",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n\n\t",29],["T_DOC_COMMENT","\/**\n\t * PHP4 constructor.\n\t *\/",31],["T_WHITESPACE","\n\t",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","IXR_Server",34],"(",["T_WHITESPACE"," ",34],["T_VARIABLE","$callbacks",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","false",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$data",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","false",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$wait",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","false",34],["T_WHITESPACE"," ",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n\t\t",34],["T_STRING","self",35],["T_DOUBLE_COLON","::",35],["T_STRING","__construct",35],"(",["T_WHITESPACE"," ",35],["T_VARIABLE","$callbacks",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$data",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$wait",35],["T_WHITESPACE"," ",35],")",";",["T_WHITESPACE","\n\t",35],"}",["T_WHITESPACE","\n\n    ",36],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","serve",38],"(",["T_VARIABLE","$data",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","false",38],")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_IF","if",40],["T_WHITESPACE"," ",40],"(","!",["T_VARIABLE","$data",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n            ",40],["T_IF","if",41],["T_WHITESPACE"," ",41],"(",["T_ISSET","isset",41],"(",["T_VARIABLE","$_SERVER",41],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",41],"]",")",["T_WHITESPACE"," ",41],["T_BOOLEAN_AND","&&",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$_SERVER",41],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",41],"]",["T_WHITESPACE"," ",41],["T_IS_NOT_IDENTICAL","!==",41],["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'POST'",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n                ",41],["T_IF","if",42],["T_WHITESPACE"," ",42],"(",["T_WHITESPACE"," ",42],["T_STRING","function_exists",42],"(",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'status_header'",42],["T_WHITESPACE"," ",42],")",["T_WHITESPACE"," ",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n                    ",42],["T_STRING","status_header",43],"(",["T_WHITESPACE"," ",43],["T_LNUMBER","405",43],["T_WHITESPACE"," ",43],")",";",["T_WHITESPACE"," ",43],["T_COMMENT","\/\/ WP #20986\n",43],["T_WHITESPACE","                    ",44],["T_STRING","header",44],"(",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Allow: POST'",44],["T_WHITESPACE"," ",44],")",";",["T_WHITESPACE","\n                ",44],"}",["T_WHITESPACE","\n                ",45],["T_STRING","header",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/plain'",46],")",";",["T_WHITESPACE"," ",46],["T_COMMENT","\/\/ merged from WP #9093\n",46],["T_WHITESPACE","                ",47],["T_EXIT","die",47],"(",["T_CONSTANT_ENCAPSED_STRING","'XML-RPC server accepts POST requests only.'",47],")",";",["T_WHITESPACE","\n            ",47],"}",["T_WHITESPACE","\n\n            ",48],["T_GLOBAL","global",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$HTTP_RAW_POST_DATA",50],";",["T_WHITESPACE","\n            ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_EMPTY","empty",51],"(",["T_VARIABLE","$HTTP_RAW_POST_DATA",51],")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n                ",51],["T_COMMENT","\/\/ workaround for a bug in PHP 5.2.2 - http:\/\/bugs.php.net\/bug.php?id=41293\n",52],["T_WHITESPACE","                ",53],["T_VARIABLE","$data",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","file_get_contents",53],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/input'",53],")",";",["T_WHITESPACE","\n            ",53],"}",["T_WHITESPACE"," ",54],["T_ELSE","else",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n                ",54],["T_VARIABLE","$data",55],["T_WHITESPACE"," ",55],"=","&",["T_WHITESPACE"," ",55],["T_VARIABLE","$HTTP_RAW_POST_DATA",55],";",["T_WHITESPACE","\n            ",55],"}",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","message",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","IXR_Message",58],"(",["T_VARIABLE","$data",58],")",";",["T_WHITESPACE","\n        ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(","!",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","message",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","parse",59],"(",")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n            ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","error",60],"(","-",["T_LNUMBER","32700",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'parse error. not well formed'",60],")",";",["T_WHITESPACE","\n        ",60],"}",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","message",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","messageType",62],["T_WHITESPACE"," ",62],["T_IS_NOT_EQUAL","!=",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'methodCall'",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","error",63],"(","-",["T_LNUMBER","32600",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'server error. invalid xml-rpc. not conforming to spec. Request must be a methodCall'",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$result",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","call",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","message",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","methodName",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","message",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","params",65],")",";",["T_WHITESPACE","\n\n        ",65],["T_COMMENT","\/\/ Is the result an error?\n",67],["T_WHITESPACE","        ",68],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_STRING","is_a",68],"(",["T_VARIABLE","$result",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'IXR_Error'",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","error",69],"(",["T_VARIABLE","$result",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_COMMENT","\/\/ Encode the result\n",72],["T_WHITESPACE","        ",73],["T_VARIABLE","$r",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_STRING","IXR_Value",73],"(",["T_VARIABLE","$result",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$resultxml",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$r",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getXml",74],"(",")",";",["T_WHITESPACE","\n\n        ",74],["T_COMMENT","\/\/ Create the XML\n",76],["T_WHITESPACE","        ",77],["T_VARIABLE","$xml",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_START_HEREDOC","<<<EOD\n",77],["T_ENCAPSED_AND_WHITESPACE","<methodResponse>\n  <params>\n    <param>\n      <value>\n      ",78],["T_VARIABLE","$resultxml",82],["T_ENCAPSED_AND_WHITESPACE","\n      <\/value>\n    <\/param>\n  <\/params>\n<\/methodResponse>\n\n",82],["T_END_HEREDOC","EOD",88],";",["T_WHITESPACE","\n      ",88],["T_COMMENT","\/\/ Send it\n",89],["T_WHITESPACE","      ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","output",90],"(",["T_VARIABLE","$xml",90],")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n\n    ",91],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","call",93],"(",["T_VARIABLE","$methodname",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$args",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","hasMethod",95],"(",["T_VARIABLE","$methodname",95],")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n            ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_NEW","new",96],["T_WHITESPACE"," ",96],["T_STRING","IXR_Error",96],"(","-",["T_LNUMBER","32601",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'server error. requested method '",96],".",["T_VARIABLE","$methodname",96],".",["T_CONSTANT_ENCAPSED_STRING","' does not exist.'",96],")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$method",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","callbacks",98],"[",["T_VARIABLE","$methodname",98],"]",";",["T_WHITESPACE","\n\n        ",98],["T_COMMENT","\/\/ Perform the callback and send the response\n",100],["T_WHITESPACE","        ",101],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_STRING","count",101],"(",["T_VARIABLE","$args",101],")",["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_LNUMBER","1",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_COMMENT","\/\/ If only one parameter just send that instead of the whole array\n",102],["T_WHITESPACE","            ",103],["T_VARIABLE","$args",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$args",103],"[",["T_LNUMBER","0",103],"]",";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_COMMENT","\/\/ Are we dealing with a function or a method?\n",106],["T_WHITESPACE","        ",107],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","is_string",107],"(",["T_VARIABLE","$method",107],")",["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],["T_STRING","substr",107],"(",["T_VARIABLE","$method",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","5",107],")",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'this:'",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_COMMENT","\/\/ It's a class method - check it exists\n",108],["T_WHITESPACE","            ",109],["T_VARIABLE","$method",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","substr",109],"(",["T_VARIABLE","$method",109],",",["T_WHITESPACE"," ",109],["T_LNUMBER","5",109],")",";",["T_WHITESPACE","\n            ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_STRING","method_exists",110],"(",["T_VARIABLE","$this",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$method",110],")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","IXR_Error",111],"(","-",["T_LNUMBER","32601",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'server error. requested class method \"'",111],".",["T_VARIABLE","$method",111],".",["T_CONSTANT_ENCAPSED_STRING","'\" does not exist.'",111],")",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_COMMENT","\/\/Call the method\n",114],["T_WHITESPACE","            ",115],["T_VARIABLE","$result",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_VARIABLE","$method",115],"(",["T_VARIABLE","$args",115],")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE"," ",116],["T_ELSE","else",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n            ",116],["T_COMMENT","\/\/ It's a function - does it exist?\n",117],["T_WHITESPACE","            ",118],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","is_array",118],"(",["T_VARIABLE","$method",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_STRING","is_callable",119],"(",["T_ARRAY","array",119],"(",["T_VARIABLE","$method",119],"[",["T_LNUMBER","0",119],"]",",",["T_WHITESPACE"," ",119],["T_VARIABLE","$method",119],"[",["T_LNUMBER","1",119],"]",")",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                    ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_STRING","IXR_Error",120],"(","-",["T_LNUMBER","32601",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'server error. requested object method \"'",120],".",["T_VARIABLE","$method",120],"[",["T_LNUMBER","1",120],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\" does not exist.'",120],")",";",["T_WHITESPACE","\n                ",120],"}",["T_WHITESPACE","\n            ",121],"}",["T_WHITESPACE"," ",122],["T_ELSE","else",122],["T_WHITESPACE"," ",122],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_STRING","function_exists",122],"(",["T_VARIABLE","$method",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_STRING","IXR_Error",123],"(","-",["T_LNUMBER","32601",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'server error. requested function \"'",123],".",["T_VARIABLE","$method",123],".",["T_CONSTANT_ENCAPSED_STRING","'\" does not exist.'",123],")",";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n\n            ",124],["T_COMMENT","\/\/ Call the function\n",126],["T_WHITESPACE","            ",127],["T_VARIABLE","$result",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","call_user_func",127],"(",["T_VARIABLE","$method",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$args",127],")",";",["T_WHITESPACE","\n        ",127],"}",["T_WHITESPACE","\n        ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$result",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n\n    ",130],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","error",132],"(",["T_VARIABLE","$error",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$message",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","false",132],")",["T_WHITESPACE","\n    ",132],"{",["T_WHITESPACE","\n        ",133],["T_COMMENT","\/\/ Accepts either an error object or an error code and message\n",134],["T_WHITESPACE","        ",135],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_VARIABLE","$message",135],["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],"!",["T_STRING","is_object",135],"(",["T_VARIABLE","$error",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n            ",135],["T_VARIABLE","$error",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_STRING","IXR_Error",136],"(",["T_VARIABLE","$error",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$message",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","output",138],"(",["T_VARIABLE","$error",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getXml",138],"(",")",")",";",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n\n    ",139],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","output",141],"(",["T_VARIABLE","$xml",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$charset",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","function_exists",143],"(",["T_CONSTANT_ENCAPSED_STRING","'get_option'",143],")",["T_WHITESPACE"," ",143],"?",["T_WHITESPACE"," ",143],["T_STRING","get_option",143],"(",["T_CONSTANT_ENCAPSED_STRING","'blog_charset'",143],")",["T_WHITESPACE"," ",143],":",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","''",143],";",["T_WHITESPACE","\n        ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$charset",144],")",["T_WHITESPACE","\n            ",144],["T_VARIABLE","$xml",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\" encoding=\"'",145],".",["T_VARIABLE","$charset",145],".",["T_CONSTANT_ENCAPSED_STRING","'\"?>'",145],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",145],".",["T_VARIABLE","$xml",145],";",["T_WHITESPACE","\n        ",145],["T_ELSE","else",146],["T_WHITESPACE","\n            ",146],["T_VARIABLE","$xml",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'<?xml version=\"1.0\"?>'",147],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",147],".",["T_VARIABLE","$xml",147],";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$length",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","strlen",148],"(",["T_VARIABLE","$xml",148],")",";",["T_WHITESPACE","\n        ",148],["T_STRING","header",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Connection: close'",149],")",";",["T_WHITESPACE","\n        ",149],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$charset",150],")",["T_WHITESPACE","\n            ",150],["T_STRING","header",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/xml; charset='",151],".",["T_VARIABLE","$charset",151],")",";",["T_WHITESPACE","\n        ",151],["T_ELSE","else",152],["T_WHITESPACE","\n            ",152],["T_STRING","header",153],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/xml'",153],")",";",["T_WHITESPACE","\n        ",153],["T_STRING","header",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Date: '",154],".",["T_STRING","date",154],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",154],")",")",";",["T_WHITESPACE","\n        ",154],["T_ECHO","echo",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$xml",155],";",["T_WHITESPACE","\n        ",155],["T_EXIT","exit",156],";",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n\n    ",157],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","hasMethod",159],"(",["T_VARIABLE","$method",159],")",["T_WHITESPACE","\n    ",159],"{",["T_WHITESPACE","\n        ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_STRING","in_array",161],"(",["T_VARIABLE","$method",161],",",["T_WHITESPACE"," ",161],["T_STRING","array_keys",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","callbacks",161],")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","setCapabilities",164],"(",")",["T_WHITESPACE","\n    ",164],"{",["T_WHITESPACE","\n        ",165],["T_COMMENT","\/\/ Initialises capabilities array\n",166],["T_WHITESPACE","        ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","capabilities",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","'xmlrpc'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",["T_WHITESPACE","\n                ",168],["T_CONSTANT_ENCAPSED_STRING","'specUrl'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/www.xmlrpc.com\/spec'",169],",",["T_WHITESPACE","\n                ",169],["T_CONSTANT_ENCAPSED_STRING","'specVersion'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","1",170],["T_WHITESPACE","\n        ",170],")",",",["T_WHITESPACE","\n            ",171],["T_CONSTANT_ENCAPSED_STRING","'faults_interop'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_WHITESPACE","\n                ",172],["T_CONSTANT_ENCAPSED_STRING","'specUrl'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/xmlrpc-epi.sourceforge.net\/specs\/rfc.fault_codes.php'",173],",",["T_WHITESPACE","\n                ",173],["T_CONSTANT_ENCAPSED_STRING","'specVersion'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_LNUMBER","20010516",174],["T_WHITESPACE","\n        ",174],")",",",["T_WHITESPACE","\n            ",175],["T_CONSTANT_ENCAPSED_STRING","'system.multicall'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_WHITESPACE","\n                ",176],["T_CONSTANT_ENCAPSED_STRING","'specUrl'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/www.xmlrpc.com\/discuss\/msgReader$1208'",177],",",["T_WHITESPACE","\n                ",177],["T_CONSTANT_ENCAPSED_STRING","'specVersion'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_LNUMBER","1",178],["T_WHITESPACE","\n        ",178],")",",",["T_WHITESPACE","\n        ",179],")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getCapabilities",183],"(",["T_VARIABLE","$args",183],")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","capabilities",185],";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","setCallbacks",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","callbacks",190],"[",["T_CONSTANT_ENCAPSED_STRING","'system.getCapabilities'",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'this:getCapabilities'",190],";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","callbacks",191],"[",["T_CONSTANT_ENCAPSED_STRING","'system.listMethods'",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'this:listMethods'",191],";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","callbacks",192],"[",["T_CONSTANT_ENCAPSED_STRING","'system.multicall'",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'this:multiCall'",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","listMethods",195],"(",["T_VARIABLE","$args",195],")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_COMMENT","\/\/ Returns a list of methods - uses array_reverse to ensure user defined\n",197],["T_WHITESPACE","        ",198],["T_COMMENT","\/\/ methods are listed before server defined methods\n",198],["T_WHITESPACE","        ",199],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","array_reverse",199],"(",["T_STRING","array_keys",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","callbacks",199],")",")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","multiCall",202],"(",["T_VARIABLE","$methodcalls",202],")",["T_WHITESPACE","\n    ",202],"{",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/\/ See http:\/\/www.xmlrpc.com\/discuss\/msgReader$1208\n",204],["T_WHITESPACE","        ",205],["T_VARIABLE","$return",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_ARRAY","array",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$methodcalls",206],["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$call",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_VARIABLE","$method",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$call",207],"[",["T_CONSTANT_ENCAPSED_STRING","'methodName'",207],"]",";",["T_WHITESPACE","\n            ",207],["T_VARIABLE","$params",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$call",208],"[",["T_CONSTANT_ENCAPSED_STRING","'params'",208],"]",";",["T_WHITESPACE","\n            ",208],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$method",209],["T_WHITESPACE"," ",209],["T_IS_EQUAL","==",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'system.multicall'",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n                ",209],["T_VARIABLE","$result",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_NEW","new",210],["T_WHITESPACE"," ",210],["T_STRING","IXR_Error",210],"(","-",["T_LNUMBER","32600",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'Recursive calls to system.multicall are forbidden'",210],")",";",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE"," ",211],["T_ELSE","else",211],["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n                ",211],["T_VARIABLE","$result",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","call",212],"(",["T_VARIABLE","$method",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$params",212],")",";",["T_WHITESPACE","\n            ",212],"}",["T_WHITESPACE","\n            ",213],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_STRING","is_a",214],"(",["T_VARIABLE","$result",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'IXR_Error'",214],")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n                ",214],["T_VARIABLE","$return",215],"[","]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_WHITESPACE","\n                    ",215],["T_CONSTANT_ENCAPSED_STRING","'faultCode'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$result",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","code",216],",",["T_WHITESPACE","\n                    ",216],["T_CONSTANT_ENCAPSED_STRING","'faultString'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$result",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","message",217],["T_WHITESPACE","\n                ",217],")",";",["T_WHITESPACE","\n            ",218],"}",["T_WHITESPACE"," ",219],["T_ELSE","else",219],["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n                ",219],["T_VARIABLE","$return",220],"[","]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_VARIABLE","$result",220],")",";",["T_WHITESPACE","\n            ",220],"}",["T_WHITESPACE","\n        ",221],"}",["T_WHITESPACE","\n        ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_VARIABLE","$return",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n",224],"}",["T_WHITESPACE","\n",225]]
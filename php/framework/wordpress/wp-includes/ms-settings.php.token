[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Used to set up and fix common variables and include\n * the Multisite procedural and class library.\n *\n * Allows for some configuration in wp-config.php (see ms-default-constants.php)\n *\n * @package WordPress\n * @subpackage Multisite\n * @since 3.0.0\n *\/",2],["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Objects representing the current network and current site.\n *\n * These may be populated through a custom `sunrise.php`. If not, then this\n * file will attempt to populate them based on the current request.\n *\n * @global WP_Network $current_site The current network.\n * @global object     $current_blog The current site.\n * @since 3.0.0\n *\/",13],["T_WHITESPACE","\n",22],["T_GLOBAL","global",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$current_site",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$current_blog",23],";",["T_WHITESPACE","\n\n",23],["T_DOC_COMMENT","\/** WP_Network class *\/",25],["T_WHITESPACE","\n",25],["T_REQUIRE_ONCE","require_once",26],"(",["T_WHITESPACE"," ",26],["T_STRING","ABSPATH",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","WPINC",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'\/class-wp-network.php'",26],["T_WHITESPACE"," ",26],")",";",["T_WHITESPACE","\n\n",26],["T_DOC_COMMENT","\/** WP_Site class *\/",28],["T_WHITESPACE","\n",28],["T_REQUIRE_ONCE","require_once",29],"(",["T_WHITESPACE"," ",29],["T_STRING","ABSPATH",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_STRING","WPINC",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'\/class-wp-site.php'",29],["T_WHITESPACE"," ",29],")",";",["T_WHITESPACE","\n\n",29],["T_DOC_COMMENT","\/** Multisite loader *\/",31],["T_WHITESPACE","\n",31],["T_REQUIRE_ONCE","require_once",32],"(",["T_WHITESPACE"," ",32],["T_STRING","ABSPATH",32],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_STRING","WPINC",32],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'\/ms-load.php'",32],["T_WHITESPACE"," ",32],")",";",["T_WHITESPACE","\n\n",32],["T_DOC_COMMENT","\/** Default Multisite constants *\/",34],["T_WHITESPACE","\n",34],["T_REQUIRE_ONCE","require_once",35],"(",["T_WHITESPACE"," ",35],["T_STRING","ABSPATH",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_STRING","WPINC",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'\/ms-default-constants.php'",35],["T_WHITESPACE"," ",35],")",";",["T_WHITESPACE","\n\n",35],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_WHITESPACE"," ",37],["T_STRING","defined",37],"(",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'SUNRISE'",37],["T_WHITESPACE"," ",37],")",["T_WHITESPACE"," ",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n\t",37],["T_INCLUDE_ONCE","include_once",38],"(",["T_WHITESPACE"," ",38],["T_STRING","WP_CONTENT_DIR",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'\/sunrise.php'",38],["T_WHITESPACE"," ",38],")",";",["T_WHITESPACE","\n",38],"}",["T_WHITESPACE","\n\n",39],["T_DOC_COMMENT","\/** Check for and define SUBDOMAIN_INSTALL and the deprecated VHOST constant. *\/",41],["T_WHITESPACE","\n",41],["T_STRING","ms_subdomain_constants",42],"(",")",";",["T_WHITESPACE","\n\n",42],["T_COMMENT","\/\/ This block will process a request if the current network or current site objects\n",44],["T_COMMENT","\/\/ have not been populated in the global scope through something like `sunrise.php`.\n",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_WHITESPACE"," ",46],"!",["T_ISSET","isset",46],"(",["T_WHITESPACE"," ",46],["T_VARIABLE","$current_site",46],["T_WHITESPACE"," ",46],")",["T_WHITESPACE"," ",46],["T_BOOLEAN_OR","||",46],["T_WHITESPACE"," ",46],"!",["T_ISSET","isset",46],"(",["T_WHITESPACE"," ",46],["T_VARIABLE","$current_blog",46],["T_WHITESPACE"," ",46],")",["T_WHITESPACE"," ",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n\n\t",46],["T_VARIABLE","$domain",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","strtolower",48],"(",["T_WHITESPACE"," ",48],["T_STRING","stripslashes",48],"(",["T_WHITESPACE"," ",48],["T_VARIABLE","$_SERVER",48],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",48],"]",["T_WHITESPACE"," ",48],")",["T_WHITESPACE"," ",48],")",";",["T_WHITESPACE","\n\t",48],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_WHITESPACE"," ",49],["T_STRING","substr",49],"(",["T_WHITESPACE"," ",49],["T_VARIABLE","$domain",49],",",["T_WHITESPACE"," ",49],"-",["T_LNUMBER","3",49],["T_WHITESPACE"," ",49],")",["T_WHITESPACE"," ",49],["T_IS_EQUAL","==",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","':80'",49],["T_WHITESPACE"," ",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n\t\t",49],["T_VARIABLE","$domain",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","substr",50],"(",["T_WHITESPACE"," ",50],["T_VARIABLE","$domain",50],",",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],",",["T_WHITESPACE"," ",50],"-",["T_LNUMBER","3",50],["T_WHITESPACE"," ",50],")",";",["T_WHITESPACE","\n\t\t",50],["T_VARIABLE","$_SERVER",51],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","substr",51],"(",["T_WHITESPACE"," ",51],["T_VARIABLE","$_SERVER",51],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",51],"]",",",["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],",",["T_WHITESPACE"," ",51],"-",["T_LNUMBER","3",51],["T_WHITESPACE"," ",51],")",";",["T_WHITESPACE","\n\t",51],"}",["T_WHITESPACE"," ",52],["T_ELSEIF","elseif",52],["T_WHITESPACE"," ",52],"(",["T_WHITESPACE"," ",52],["T_STRING","substr",52],"(",["T_WHITESPACE"," ",52],["T_VARIABLE","$domain",52],",",["T_WHITESPACE"," ",52],"-",["T_LNUMBER","4",52],["T_WHITESPACE"," ",52],")",["T_WHITESPACE"," ",52],["T_IS_EQUAL","==",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","':443'",52],["T_WHITESPACE"," ",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n\t\t",52],["T_VARIABLE","$domain",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","substr",53],"(",["T_WHITESPACE"," ",53],["T_VARIABLE","$domain",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","0",53],",",["T_WHITESPACE"," ",53],"-",["T_LNUMBER","4",53],["T_WHITESPACE"," ",53],")",";",["T_WHITESPACE","\n\t\t",53],["T_VARIABLE","$_SERVER",54],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",54],"]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","substr",54],"(",["T_WHITESPACE"," ",54],["T_VARIABLE","$_SERVER",54],"[",["T_CONSTANT_ENCAPSED_STRING","'HTTP_HOST'",54],"]",",",["T_WHITESPACE"," ",54],["T_LNUMBER","0",54],",",["T_WHITESPACE"," ",54],"-",["T_LNUMBER","4",54],["T_WHITESPACE"," ",54],")",";",["T_WHITESPACE","\n\t",54],"}",["T_WHITESPACE","\n\n\t",55],["T_VARIABLE","$path",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","stripslashes",57],"(",["T_WHITESPACE"," ",57],["T_VARIABLE","$_SERVER",57],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_URI'",57],"]",["T_WHITESPACE"," ",57],")",";",["T_WHITESPACE","\n\t",57],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_WHITESPACE"," ",58],["T_STRING","is_admin",58],"(",")",["T_WHITESPACE"," ",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n\t\t",58],["T_VARIABLE","$path",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","preg_replace",59],"(",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'#(.*)\/wp-admin\/.*#'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'$1\/'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$path",59],["T_WHITESPACE"," ",59],")",";",["T_WHITESPACE","\n\t",59],"}",["T_WHITESPACE","\n\t",60],["T_LIST","list",61],"(",["T_WHITESPACE"," ",61],["T_VARIABLE","$path",61],["T_WHITESPACE"," ",61],")",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","explode",61],"(",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'?'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$path",61],["T_WHITESPACE"," ",61],")",";",["T_WHITESPACE","\n\n\t",61],["T_VARIABLE","$bootstrap_result",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","ms_load_current_site_and_network",63],"(",["T_WHITESPACE"," ",63],["T_VARIABLE","$domain",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$path",63],",",["T_WHITESPACE"," ",63],["T_STRING","is_subdomain_install",63],"(",")",["T_WHITESPACE"," ",63],")",";",["T_WHITESPACE","\n\n\t",63],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_WHITESPACE"," ",65],["T_STRING","true",65],["T_WHITESPACE"," ",65],["T_IS_IDENTICAL","===",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$bootstrap_result",65],["T_WHITESPACE"," ",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n\t\t",65],["T_COMMENT","\/\/ `$current_blog` and `$current_site are now populated.\n",66],["T_WHITESPACE","\t",67],"}",["T_WHITESPACE"," ",67],["T_ELSEIF","elseif",67],["T_WHITESPACE"," ",67],"(",["T_WHITESPACE"," ",67],["T_STRING","false",67],["T_WHITESPACE"," ",67],["T_IS_IDENTICAL","===",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$bootstrap_result",67],["T_WHITESPACE"," ",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n\t\t",67],["T_STRING","ms_not_installed",68],"(",["T_WHITESPACE"," ",68],["T_VARIABLE","$domain",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$path",68],["T_WHITESPACE"," ",68],")",";",["T_WHITESPACE","\n\t",68],"}",["T_WHITESPACE"," ",69],["T_ELSE","else",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\t\t",69],["T_STRING","header",70],"(",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Location: '",70],["T_WHITESPACE"," ",70],".",["T_WHITESPACE"," ",70],["T_VARIABLE","$bootstrap_result",70],["T_WHITESPACE"," ",70],")",";",["T_WHITESPACE","\n\t\t",70],["T_EXIT","exit",71],";",["T_WHITESPACE","\n\t",71],"}",["T_WHITESPACE","\n\t",72],["T_UNSET","unset",73],"(",["T_WHITESPACE"," ",73],["T_VARIABLE","$bootstrap_result",73],["T_WHITESPACE"," ",73],")",";",["T_WHITESPACE","\n\n\t",73],["T_VARIABLE","$blog_id",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$current_blog",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","blog_id",75],";",["T_WHITESPACE","\n\t",75],["T_VARIABLE","$public",76],["T_WHITESPACE","  ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$current_blog",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","public",76],";",["T_WHITESPACE","\n\n\t",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_WHITESPACE"," ",78],["T_EMPTY","empty",78],"(",["T_WHITESPACE"," ",78],["T_VARIABLE","$current_blog",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","site_id",78],["T_WHITESPACE"," ",78],")",["T_WHITESPACE"," ",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n\t\t",78],["T_COMMENT","\/\/ This dates to [MU134] and shouldn't be relevant anymore,\n",79],["T_WHITESPACE","\t\t",80],["T_COMMENT","\/\/ but it could be possible for arguments passed to insert_blog() etc.\n",80],["T_WHITESPACE","\t\t",81],["T_VARIABLE","$current_blog",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","site_id",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],";",["T_WHITESPACE","\n\t",81],"}",["T_WHITESPACE","\n\n\t",82],["T_VARIABLE","$site_id",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$current_blog",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","site_id",84],";",["T_WHITESPACE","\n\t",84],["T_STRING","wp_load_core_site_options",85],"(",["T_WHITESPACE"," ",85],["T_VARIABLE","$site_id",85],["T_WHITESPACE"," ",85],")",";",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n\n",86],["T_VARIABLE","$wpdb",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","set_prefix",88],"(",["T_WHITESPACE"," ",88],["T_VARIABLE","$table_prefix",88],",",["T_WHITESPACE"," ",88],["T_STRING","false",88],["T_WHITESPACE"," ",88],")",";",["T_WHITESPACE"," ",88],["T_COMMENT","\/\/ $table_prefix can be set in sunrise.php\n",88],["T_VARIABLE","$wpdb",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","set_blog_id",89],"(",["T_WHITESPACE"," ",89],["T_VARIABLE","$current_blog",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","blog_id",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$current_blog",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","site_id",89],["T_WHITESPACE"," ",89],")",";",["T_WHITESPACE","\n",89],["T_VARIABLE","$table_prefix",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$wpdb",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get_blog_prefix",90],"(",")",";",["T_WHITESPACE","\n",90],["T_VARIABLE","$_wp_switched_stack",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",")",";",["T_WHITESPACE","\n",91],["T_VARIABLE","$switched",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","false",92],";",["T_WHITESPACE","\n\n",92],["T_COMMENT","\/\/ need to init cache again after blog_id is set\n",94],["T_STRING","wp_start_object_cache",95],"(",")",";",["T_WHITESPACE","\n\n",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_WHITESPACE"," ",97],"!",["T_WHITESPACE"," ",97],["T_VARIABLE","$current_site",97],["T_WHITESPACE"," ",97],["T_INSTANCEOF","instanceof",97],["T_WHITESPACE"," ",97],["T_STRING","WP_Network",97],["T_WHITESPACE"," ",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n\t",97],["T_VARIABLE","$current_site",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_STRING","WP_Network",98],"(",["T_WHITESPACE"," ",98],["T_VARIABLE","$current_site",98],["T_WHITESPACE"," ",98],")",";",["T_WHITESPACE","\n",98],"}",["T_WHITESPACE","\n\n",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_WHITESPACE"," ",101],"!",["T_WHITESPACE"," ",101],["T_VARIABLE","$current_blog",101],["T_WHITESPACE"," ",101],["T_INSTANCEOF","instanceof",101],["T_WHITESPACE"," ",101],["T_STRING","WP_Site",101],["T_WHITESPACE"," ",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n\t",101],["T_VARIABLE","$current_blog",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","WP_Site",102],"(",["T_WHITESPACE"," ",102],["T_VARIABLE","$current_blog",102],["T_WHITESPACE"," ",102],")",";",["T_WHITESPACE","\n",102],"}",["T_WHITESPACE","\n\n",103],["T_COMMENT","\/\/ Define upload directory constants\n",105],["T_STRING","ms_upload_constants",106],"(",")",";",["T_WHITESPACE","\n\n",106],["T_DOC_COMMENT","\/**\n * Fires after the current site and network have been detected and loaded\n * in multisite's bootstrap.\n *\n * @since 4.6.0\n *\/",108],["T_WHITESPACE","\n",113],["T_STRING","do_action",114],"(",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'ms_loaded'",114],["T_WHITESPACE"," ",114],")",";",["T_WHITESPACE","\n",114]]
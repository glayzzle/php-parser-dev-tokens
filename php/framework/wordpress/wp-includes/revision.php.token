[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Post revision functions.\n *\n * @package WordPress\n * @subpackage Post_Revisions\n *\/",2],["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Determines which fields of posts are to be saved in revisions.\n *\n * @since 2.6.0\n * @since 4.5.0 A `WP_Post` object can now be passed to the `$post` parameter.\n * @since 4.5.0 The optional `$autosave` parameter was deprecated and renamed to `$deprecated`.\n * @access private\n *\n * @staticvar array $fields\n *\n * @param array|WP_Post $post       Optional. A post array or a WP_Post object being processed\n *                                  for insertion as a post revision. Default empty array.\n * @param bool          $deprecated Not used.\n * @return array Array of fields that can be versioned.\n *\/",9],["T_WHITESPACE","\n",23],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","_wp_post_revision_fields",24],"(",["T_WHITESPACE"," ",24],["T_VARIABLE","$post",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",")",",",["T_WHITESPACE"," ",24],["T_VARIABLE","$deprecated",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","false",24],["T_WHITESPACE"," ",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\t",24],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$fields",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","null",25],";",["T_WHITESPACE","\n\n\t",25],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_WHITESPACE"," ",27],"!",["T_WHITESPACE"," ",27],["T_STRING","is_array",27],"(",["T_WHITESPACE"," ",27],["T_VARIABLE","$post",27],["T_WHITESPACE"," ",27],")",["T_WHITESPACE"," ",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t",27],["T_VARIABLE","$post",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","get_post",28],"(",["T_WHITESPACE"," ",28],["T_VARIABLE","$post",28],",",["T_WHITESPACE"," ",28],["T_STRING","ARRAY_A",28],["T_WHITESPACE"," ",28],")",";",["T_WHITESPACE","\n\t",28],"}",["T_WHITESPACE","\n\n\t",29],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_WHITESPACE"," ",31],["T_STRING","is_null",31],"(",["T_WHITESPACE"," ",31],["T_VARIABLE","$fields",31],["T_WHITESPACE"," ",31],")",["T_WHITESPACE"," ",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n\t\t",31],["T_COMMENT","\/\/ Allow these to be versioned\n",32],["T_WHITESPACE","\t\t",33],["T_VARIABLE","$fields",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_WHITESPACE","\n\t\t\t",33],["T_CONSTANT_ENCAPSED_STRING","'post_title'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_STRING","__",34],"(",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'Title'",34],["T_WHITESPACE"," ",34],")",",",["T_WHITESPACE","\n\t\t\t",34],["T_CONSTANT_ENCAPSED_STRING","'post_content'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_STRING","__",35],"(",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'Content'",35],["T_WHITESPACE"," ",35],")",",",["T_WHITESPACE","\n\t\t\t",35],["T_CONSTANT_ENCAPSED_STRING","'post_excerpt'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_STRING","__",36],"(",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'Excerpt'",36],["T_WHITESPACE"," ",36],")",",",["T_WHITESPACE","\n\t\t",36],")",";",["T_WHITESPACE","\n\t",37],"}",["T_WHITESPACE","\n\n\t",38],["T_DOC_COMMENT","\/**\n\t * Filters the list of fields saved in post revisions.\n\t *\n\t * Included by default: 'post_title', 'post_content' and 'post_excerpt'.\n\t *\n\t * Disallowed fields: 'ID', 'post_name', 'post_parent', 'post_date',\n\t * 'post_date_gmt', 'post_status', 'post_type', 'comment_count',\n\t * and 'post_author'.\n\t *\n\t * @since 2.6.0\n\t * @since 4.5.0 The `$post` parameter was added.\n\t *\n\t * @param array $fields List of fields to revision. Contains 'post_title',\n\t *                      'post_content', and 'post_excerpt' by default.\n\t * @param array $post   A post array being processed for insertion as a post revision.\n\t *\/",40],["T_WHITESPACE","\n\t",55],["T_VARIABLE","$fields",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","apply_filters",56],"(",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'_wp_post_revision_fields'",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$fields",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$post",56],["T_WHITESPACE"," ",56],")",";",["T_WHITESPACE","\n\n\t",56],["T_COMMENT","\/\/ WP uses these internally either in versioning or elsewhere - they cannot be versioned\n",58],["T_WHITESPACE","\t",59],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'ID'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_name'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_parent'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_date'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_date_gmt'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_status'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_type'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'post_author'",59],["T_WHITESPACE"," ",59],")",["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$protect",59],["T_WHITESPACE"," ",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n\t\t",59],["T_UNSET","unset",60],"(",["T_WHITESPACE"," ",60],["T_VARIABLE","$fields",60],"[",["T_WHITESPACE"," ",60],["T_VARIABLE","$protect",60],["T_WHITESPACE"," ",60],"]",["T_WHITESPACE"," ",60],")",";",["T_WHITESPACE","\n\t",60],"}",["T_WHITESPACE","\n\n\n\t",61],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$fields",64],";",["T_WHITESPACE","\n",64],"}",["T_WHITESPACE","\n\n",65],["T_DOC_COMMENT","\/**\n * Returns a post array ready to be inserted into the posts table as a post revision.\n *\n * @since 4.5.0\n * @access private\n *\n * @param array|WP_Post $post     Optional. A post array or a WP_Post object to be processed\n *                                for insertion as a post revision. Default empty array.\n * @param bool          $autosave Optional. Is the revision an autosave? Default false.\n * @return array Post array ready to be inserted as a post revision.\n *\/",67],["T_WHITESPACE","\n",77],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","_wp_post_revision_data",78],"(",["T_WHITESPACE"," ",78],["T_VARIABLE","$post",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$autosave",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","false",78],["T_WHITESPACE"," ",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n\t",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_WHITESPACE"," ",79],"!",["T_WHITESPACE"," ",79],["T_STRING","is_array",79],"(",["T_WHITESPACE"," ",79],["T_VARIABLE","$post",79],["T_WHITESPACE"," ",79],")",["T_WHITESPACE"," ",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n\t\t",79],["T_VARIABLE","$post",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","get_post",80],"(",["T_WHITESPACE"," ",80],["T_VARIABLE","$post",80],",",["T_WHITESPACE"," ",80],["T_STRING","ARRAY_A",80],["T_WHITESPACE"," ",80],")",";",["T_WHITESPACE","\n\t",80],"}",["T_WHITESPACE","\n\n\t",81],["T_VARIABLE","$fields",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","_wp_post_revision_fields",83],"(",["T_WHITESPACE"," ",83],["T_VARIABLE","$post",83],["T_WHITESPACE"," ",83],")",";",["T_WHITESPACE","\n\n\t",83],["T_VARIABLE","$revision_data",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n\n\t",85],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_WHITESPACE"," ",87],["T_STRING","array_intersect",87],"(",["T_WHITESPACE"," ",87],["T_STRING","array_keys",87],"(",["T_WHITESPACE"," ",87],["T_VARIABLE","$post",87],["T_WHITESPACE"," ",87],")",",",["T_WHITESPACE"," ",87],["T_STRING","array_keys",87],"(",["T_WHITESPACE"," ",87],["T_VARIABLE","$fields",87],["T_WHITESPACE"," ",87],")",["T_WHITESPACE"," ",87],")",["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$field",87],["T_WHITESPACE"," ",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n\t\t",87],["T_VARIABLE","$revision_data",88],"[",["T_WHITESPACE"," ",88],["T_VARIABLE","$field",88],["T_WHITESPACE"," ",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$post",88],"[",["T_WHITESPACE"," ",88],["T_VARIABLE","$field",88],["T_WHITESPACE"," ",88],"]",";",["T_WHITESPACE","\n\t",88],"}",["T_WHITESPACE","\n\n\t",89],["T_VARIABLE","$revision_data",91],"[",["T_CONSTANT_ENCAPSED_STRING","'post_parent'",91],"]",["T_WHITESPACE","   ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$post",91],"[",["T_CONSTANT_ENCAPSED_STRING","'ID'",91],"]",";",["T_WHITESPACE","\n\t",91],["T_VARIABLE","$revision_data",92],"[",["T_CONSTANT_ENCAPSED_STRING","'post_status'",92],"]",["T_WHITESPACE","   ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'inherit'",92],";",["T_WHITESPACE","\n\t",92],["T_VARIABLE","$revision_data",93],"[",["T_CONSTANT_ENCAPSED_STRING","'post_type'",93],"]",["T_WHITESPACE","     ",93],"=",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'revision'",93],";",["T_WHITESPACE","\n\t",93],["T_VARIABLE","$revision_data",94],"[",["T_CONSTANT_ENCAPSED_STRING","'post_name'",94],"]",["T_WHITESPACE","     ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$autosave",94],["T_WHITESPACE"," ",94],"?",["T_WHITESPACE"," ",94],"\"",["T_VARIABLE","$post",94],"[",["T_STRING","ID",94],"]",["T_ENCAPSED_AND_WHITESPACE","-autosave-v1",94],"\"",["T_WHITESPACE"," ",94],":",["T_WHITESPACE"," ",94],"\"",["T_VARIABLE","$post",94],"[",["T_STRING","ID",94],"]",["T_ENCAPSED_AND_WHITESPACE","-revision-v1",94],"\"",";",["T_WHITESPACE"," ",94],["T_COMMENT","\/\/ \"1\" is the revisioning system version\n",94],["T_WHITESPACE","\t",95],["T_VARIABLE","$revision_data",95],"[",["T_CONSTANT_ENCAPSED_STRING","'post_date'",95],"]",["T_WHITESPACE","     ",95],"=",["T_WHITESPACE"," ",95],["T_ISSET","isset",95],"(",["T_WHITESPACE"," ",95],["T_VARIABLE","$post",95],"[",["T_CONSTANT_ENCAPSED_STRING","'post_modified'",95],"]",["T_WHITESPACE"," ",95],")",["T_WHITESPACE"," ",95],"?",["T_WHITESPACE"," ",95],["T_VARIABLE","$post",95],"[",["T_CONSTANT_ENCAPSED_STRING","'post_modified'",95],"]",["T_WHITESPACE"," ",95],":",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],";",["T_WHITESPACE","\n\t",95],["T_VARIABLE","$revision_data",96],"[",["T_CONSTANT_ENCAPSED_STRING","'post_date_gmt'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ISSET","isset",96],"(",["T_WHITESPACE"," ",96],["T_VARIABLE","$post",96],"[",["T_CONSTANT_ENCAPSED_STRING","'post_modified_gmt'",96],"]",["T_WHITESPACE"," ",96],")",["T_WHITESPACE"," ",96],"?",["T_WHITESPACE"," ",96],["T_VARIABLE","$post",96],"[",["T_CONSTANT_ENCAPSED_STRING","'post_modified_gmt'",96],"]",["T_WHITESPACE"," ",96],":",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","''",96],";",["T_WHITESPACE","\n\n\t",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$revision_data",98],";",["T_WHITESPACE","\n",98],"}",["T_WHITESPACE","\n\n",99],["T_DOC_COMMENT","\/**\n * Creates a revision for the current version of a post.\n *\n * Typically used immediately after a post update, as every update is a revision,\n * and the most recent revision always matches the current post.\n *\n * @since 2.6.0\n *\n * @param int $post_id The ID of the post to save as a revision.\n * @return int|WP_Error|void Void or 0 if error, new revision ID, if success.\n *\/",101],["T_WHITESPACE","\n",111],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","wp_save_post_revision",112],"(",["T_WHITESPACE"," ",112],["T_VARIABLE","$post_id",112],["T_WHITESPACE"," ",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n\t",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_WHITESPACE"," ",113],["T_STRING","defined",113],"(",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'DOING_AUTOSAVE'",113],["T_WHITESPACE"," ",113],")",["T_WHITESPACE"," ",113],["T_BOOLEAN_AND","&&",113],["T_WHITESPACE"," ",113],["T_STRING","DOING_AUTOSAVE",113],["T_WHITESPACE"," ",113],")",["T_WHITESPACE","\n\t\t",113],["T_RETURN","return",114],";",["T_WHITESPACE","\n\n\t",114],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_WHITESPACE"," ",116],"!",["T_WHITESPACE"," ",116],["T_VARIABLE","$post",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","get_post",116],"(",["T_WHITESPACE"," ",116],["T_VARIABLE","$post_id",116],["T_WHITESPACE"," ",116],")",["T_WHITESPACE"," ",116],")",["T_WHITESPACE","\n\t\t",116],["T_RETURN","return",117],";",["T_WHITESPACE","\n\n\t",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_WHITESPACE"," ",119],"!",["T_WHITESPACE"," ",119],["T_STRING","post_type_supports",119],"(",["T_WHITESPACE"," ",119],["T_VARIABLE","$post",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","post_type",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'revisions'",119],["T_WHITESPACE"," ",119],")",["T_WHITESPACE"," ",119],")",["T_WHITESPACE","\n\t\t",119],["T_RETURN","return",120],";",["T_WHITESPACE","\n\n\t",120],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'auto-draft'",122],["T_WHITESPACE"," ",122],["T_IS_EQUAL","==",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$post",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","post_status",122],["T_WHITESPACE"," ",122],")",["T_WHITESPACE","\n\t\t",122],["T_RETURN","return",123],";",["T_WHITESPACE","\n\n\t",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_WHITESPACE"," ",125],"!",["T_WHITESPACE"," ",125],["T_STRING","wp_revisions_enabled",125],"(",["T_WHITESPACE"," ",125],["T_VARIABLE","$post",125],["T_WHITESPACE"," ",125],")",["T_WHITESPACE"," ",125],")",["T_WHITESPACE","\n\t\t",125],["T_RETURN","return",126],";",["T_WHITESPACE","\n\n\t",126],["T_COMMENT","\/\/ Compare the proposed update with the last stored revision verifying that\n",128],["T_WHITESPACE","\t",129],["T_COMMENT","\/\/ they are different, unless a plugin tells us to always save regardless.\n",129],["T_WHITESPACE","\t",130],["T_COMMENT","\/\/ If no previous revisions, save one\n",130],["T_WHITESPACE","\t",131],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_WHITESPACE"," ",131],["T_VARIABLE","$revisions",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","wp_get_post_revisions",131],"(",["T_WHITESPACE"," ",131],["T_VARIABLE","$post_id",131],["T_WHITESPACE"," ",131],")",["T_WHITESPACE"," ",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n\t\t",131],["T_COMMENT","\/\/ grab the last revision, but not an autosave\n",132],["T_WHITESPACE","\t\t",133],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_WHITESPACE"," ",133],["T_VARIABLE","$revisions",133],["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$revision",133],["T_WHITESPACE"," ",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n\t\t\t",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_WHITESPACE"," ",134],["T_STRING","false",134],["T_WHITESPACE"," ",134],["T_IS_NOT_IDENTICAL","!==",134],["T_WHITESPACE"," ",134],["T_STRING","strpos",134],"(",["T_WHITESPACE"," ",134],["T_VARIABLE","$revision",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","post_name",134],",",["T_WHITESPACE"," ",134],"\"",["T_CURLY_OPEN","{",134],["T_VARIABLE","$revision",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","post_parent",134],"}",["T_ENCAPSED_AND_WHITESPACE","-revision",134],"\"",["T_WHITESPACE"," ",134],")",["T_WHITESPACE"," ",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n\t\t\t\t",134],["T_VARIABLE","$last_revision",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$revision",135],";",["T_WHITESPACE","\n\t\t\t\t",135],["T_BREAK","break",136],";",["T_WHITESPACE","\n\t\t\t",136],"}",["T_WHITESPACE","\n\t\t",137],"}",["T_WHITESPACE","\n\n\t\t",138],["T_DOC_COMMENT","\/**\n\t\t * Filters whether the post has changed since the last revision.\n\t\t *\n\t\t * By default a revision is saved only if one of the revisioned fields has changed.\n\t\t * This filter can override that so a revision is saved even if nothing has changed.\n\t\t *\n\t\t * @since 3.6.0\n\t\t *\n\t\t * @param bool    $check_for_changes Whether to check for changes before saving a new revision.\n\t\t *                                   Default true.\n\t\t * @param WP_Post $last_revision     The last revision post object.\n\t\t * @param WP_Post $post              The post object.\n\t\t *\n\t\t *\/",140],["T_WHITESPACE","\n\t\t",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(",["T_WHITESPACE"," ",154],["T_ISSET","isset",154],"(",["T_WHITESPACE"," ",154],["T_VARIABLE","$last_revision",154],["T_WHITESPACE"," ",154],")",["T_WHITESPACE"," ",154],["T_BOOLEAN_AND","&&",154],["T_WHITESPACE"," ",154],["T_STRING","apply_filters",154],"(",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'wp_save_post_revision_check_for_changes'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$check_for_changes",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","true",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$last_revision",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$post",154],["T_WHITESPACE"," ",154],")",["T_WHITESPACE"," ",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n\t\t\t",154],["T_VARIABLE","$post_has_changed",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","false",155],";",["T_WHITESPACE","\n\n\t\t\t",155],["T_FOREACH","foreach",157],["T_WHITESPACE"," ",157],"(",["T_WHITESPACE"," ",157],["T_STRING","array_keys",157],"(",["T_WHITESPACE"," ",157],["T_STRING","_wp_post_revision_fields",157],"(",["T_WHITESPACE"," ",157],["T_VARIABLE","$post",157],["T_WHITESPACE"," ",157],")",["T_WHITESPACE"," ",157],")",["T_WHITESPACE"," ",157],["T_AS","as",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$field",157],["T_WHITESPACE"," ",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n\t\t\t\t",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_WHITESPACE"," ",158],["T_STRING","normalize_whitespace",158],"(",["T_WHITESPACE"," ",158],["T_VARIABLE","$post",158],["T_OBJECT_OPERATOR","->",158],["T_VARIABLE","$field",158],["T_WHITESPACE"," ",158],")",["T_WHITESPACE"," ",158],["T_IS_NOT_EQUAL","!=",158],["T_WHITESPACE"," ",158],["T_STRING","normalize_whitespace",158],"(",["T_WHITESPACE"," ",158],["T_VARIABLE","$last_revision",158],["T_OBJECT_OPERATOR","->",158],["T_VARIABLE","$field",158],["T_WHITESPACE"," ",158],")",["T_WHITESPACE"," ",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t\t\t\t",158],["T_VARIABLE","$post_has_changed",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","true",159],";",["T_WHITESPACE","\n\t\t\t\t\t",159],["T_BREAK","break",160],";",["T_WHITESPACE","\n\t\t\t\t",160],"}",["T_WHITESPACE","\n\t\t\t",161],"}",["T_WHITESPACE","\n\n\t\t\t",162],["T_DOC_COMMENT","\/**\n\t\t\t * Filters whether a post has changed.\n\t\t\t *\n\t\t\t * By default a revision is saved only if one of the revisioned fields has changed.\n\t\t\t * This filter allows for additional checks to determine if there were changes.\n\t\t\t *\n\t\t\t * @since 4.1.0\n\t\t\t *\n\t\t\t * @param bool    $post_has_changed Whether the post has changed.\n\t\t\t * @param WP_Post $last_revision    The last revision post object.\n\t\t\t * @param WP_Post $post             The post object.\n\t\t\t *\n\t\t\t *\/",164],["T_WHITESPACE","\n\t\t\t",176],["T_VARIABLE","$post_has_changed",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_BOOL_CAST","(bool)",177],["T_WHITESPACE"," ",177],["T_STRING","apply_filters",177],"(",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'wp_save_post_revision_post_has_changed'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$post_has_changed",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$last_revision",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$post",177],["T_WHITESPACE"," ",177],")",";",["T_WHITESPACE","\n\n\t\t\t",177],["T_COMMENT","\/\/don't save revision if post unchanged\n",179],["T_WHITESPACE","\t\t\t",180],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_WHITESPACE"," ",180],"!",["T_WHITESPACE"," ",180],["T_VARIABLE","$post_has_changed",180],["T_WHITESPACE"," ",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n\t\t\t\t",180],["T_RETURN","return",181],";",["T_WHITESPACE","\n\t\t\t",181],"}",["T_WHITESPACE","\n\t\t",182],"}",["T_WHITESPACE","\n\t",183],"}",["T_WHITESPACE","\n\n\t",184],["T_VARIABLE","$return",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","_wp_put_post_revision",186],"(",["T_WHITESPACE"," ",186],["T_VARIABLE","$post",186],["T_WHITESPACE"," ",186],")",";",["T_WHITESPACE","\n\n\t",186],["T_COMMENT","\/\/ If a limit for the number of revisions to keep has been set,\n",188],["T_WHITESPACE","\t",189],["T_COMMENT","\/\/ delete the oldest ones.\n",189],["T_WHITESPACE","\t",190],["T_VARIABLE","$revisions_to_keep",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","wp_revisions_to_keep",190],"(",["T_WHITESPACE"," ",190],["T_VARIABLE","$post",190],["T_WHITESPACE"," ",190],")",";",["T_WHITESPACE","\n\n\t",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_WHITESPACE"," ",192],["T_VARIABLE","$revisions_to_keep",192],["T_WHITESPACE"," ",192],"<",["T_WHITESPACE"," ",192],["T_LNUMBER","0",192],["T_WHITESPACE"," ",192],")",["T_WHITESPACE","\n\t\t",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$return",193],";",["T_WHITESPACE","\n\n\t",193],["T_VARIABLE","$revisions",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","wp_get_post_revisions",195],"(",["T_WHITESPACE"," ",195],["T_VARIABLE","$post_id",195],",",["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'order'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'ASC'",195],["T_WHITESPACE"," ",195],")",["T_WHITESPACE"," ",195],")",";",["T_WHITESPACE","\n\n\t",195],["T_VARIABLE","$delete",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","count",197],"(",["T_VARIABLE","$revisions",197],")",["T_WHITESPACE"," ",197],"-",["T_WHITESPACE"," ",197],["T_VARIABLE","$revisions_to_keep",197],";",["T_WHITESPACE","\n\n\t",197],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_WHITESPACE"," ",199],["T_VARIABLE","$delete",199],["T_WHITESPACE"," ",199],"<",["T_WHITESPACE"," ",199],["T_LNUMBER","1",199],["T_WHITESPACE"," ",199],")",["T_WHITESPACE","\n\t\t",199],["T_RETURN","return",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$return",200],";",["T_WHITESPACE","\n\n\t",200],["T_VARIABLE","$revisions",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","array_slice",202],"(",["T_WHITESPACE"," ",202],["T_VARIABLE","$revisions",202],",",["T_WHITESPACE"," ",202],["T_LNUMBER","0",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$delete",202],["T_WHITESPACE"," ",202],")",";",["T_WHITESPACE","\n\n\t",202],["T_FOR","for",204],["T_WHITESPACE"," ",204],"(",["T_WHITESPACE"," ",204],["T_VARIABLE","$i",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_LNUMBER","0",204],";",["T_WHITESPACE"," ",204],["T_ISSET","isset",204],"(",["T_WHITESPACE"," ",204],["T_VARIABLE","$revisions",204],"[",["T_VARIABLE","$i",204],"]",["T_WHITESPACE"," ",204],")",";",["T_WHITESPACE"," ",204],["T_VARIABLE","$i",204],["T_INC","++",204],["T_WHITESPACE"," ",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n\t\t",204],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_WHITESPACE"," ",205],["T_STRING","false",205],["T_WHITESPACE"," ",205],["T_IS_NOT_IDENTICAL","!==",205],["T_WHITESPACE"," ",205],["T_STRING","strpos",205],"(",["T_WHITESPACE"," ",205],["T_VARIABLE","$revisions",205],"[",["T_WHITESPACE"," ",205],["T_VARIABLE","$i",205],["T_WHITESPACE"," ",205],"]",["T_OBJECT_OPERATOR","->",205],["T_STRING","post_name",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'autosave'",205],["T_WHITESPACE"," ",205],")",["T_WHITESPACE"," ",205],")",["T_WHITESPACE","\n\t\t\t",205],["T_CONTINUE","continue",206],";",["T_WHITESPACE","\n\n\t\t",206],["T_STRING","wp_delete_post_revision",208],"(",["T_WHITESPACE"," ",208],["T_VARIABLE","$revisions",208],"[",["T_WHITESPACE"," ",208],["T_VARIABLE","$i",208],["T_WHITESPACE"," ",208],"]",["T_OBJECT_OPERATOR","->",208],["T_STRING","ID",208],["T_WHITESPACE"," ",208],")",";",["T_WHITESPACE","\n\t",208],"}",["T_WHITESPACE","\n\n\t",209],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$return",211],";",["T_WHITESPACE","\n",211],"}",["T_WHITESPACE","\n\n",212],["T_DOC_COMMENT","\/**\n * Retrieve the autosaved data of the specified post.\n *\n * Returns a post object containing the information that was autosaved for the\n * specified post. If the optional $user_id is passed, returns the autosave for that user\n * otherwise returns the latest autosave.\n *\n * @since 2.6.0\n *\n * @param int $post_id The post ID.\n * @param int $user_id Optional The post author ID.\n * @return WP_Post|false The autosaved data or false on failure or when no autosave exists.\n *\/",214],["T_WHITESPACE","\n",226],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","wp_get_post_autosave",227],"(",["T_WHITESPACE"," ",227],["T_VARIABLE","$post_id",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$user_id",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_LNUMBER","0",227],["T_WHITESPACE"," ",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t",227],["T_VARIABLE","$revisions",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","wp_get_post_revisions",228],"(",["T_WHITESPACE"," ",228],["T_VARIABLE","$post_id",228],",",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'check_enabled'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_STRING","false",228],["T_WHITESPACE"," ",228],")",["T_WHITESPACE"," ",228],")",";",["T_WHITESPACE","\n\n\t",228],["T_FOREACH","foreach",230],["T_WHITESPACE"," ",230],"(",["T_WHITESPACE"," ",230],["T_VARIABLE","$revisions",230],["T_WHITESPACE"," ",230],["T_AS","as",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$revision",230],["T_WHITESPACE"," ",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n\t\t",230],["T_IF","if",231],["T_WHITESPACE"," ",231],"(",["T_WHITESPACE"," ",231],["T_STRING","false",231],["T_WHITESPACE"," ",231],["T_IS_NOT_IDENTICAL","!==",231],["T_WHITESPACE"," ",231],["T_STRING","strpos",231],"(",["T_WHITESPACE"," ",231],["T_VARIABLE","$revision",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","post_name",231],",",["T_WHITESPACE"," ",231],"\"",["T_CURLY_OPEN","{",231],["T_VARIABLE","$post_id",231],"}",["T_ENCAPSED_AND_WHITESPACE","-autosave",231],"\"",["T_WHITESPACE"," ",231],")",["T_WHITESPACE"," ",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n\t\t\t",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_WHITESPACE"," ",232],["T_VARIABLE","$user_id",232],["T_WHITESPACE"," ",232],["T_BOOLEAN_AND","&&",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$user_id",232],["T_WHITESPACE"," ",232],["T_IS_NOT_EQUAL","!=",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$revision",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","post_author",232],["T_WHITESPACE"," ",232],")",["T_WHITESPACE","\n\t\t\t\t",232],["T_CONTINUE","continue",233],";",["T_WHITESPACE","\n\n\t\t\t",233],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$revision",235],";",["T_WHITESPACE","\n\t\t",235],"}",["T_WHITESPACE","\n\t",236],"}",["T_WHITESPACE","\n\n\t",237],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_STRING","false",239],";",["T_WHITESPACE","\n",239],"}",["T_WHITESPACE","\n\n",240],["T_DOC_COMMENT","\/**\n * Determines if the specified post is a revision.\n *\n * @since 2.6.0\n *\n * @param int|WP_Post $post Post ID or post object.\n * @return false|int False if not a revision, ID of revision's parent otherwise.\n *\/",242],["T_WHITESPACE","\n",249],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","wp_is_post_revision",250],"(",["T_WHITESPACE"," ",250],["T_VARIABLE","$post",250],["T_WHITESPACE"," ",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n\t",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_WHITESPACE"," ",251],"!",["T_VARIABLE","$post",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_STRING","wp_get_post_revision",251],"(",["T_WHITESPACE"," ",251],["T_VARIABLE","$post",251],["T_WHITESPACE"," ",251],")",["T_WHITESPACE"," ",251],")",["T_WHITESPACE","\n\t\t",251],["T_RETURN","return",252],["T_WHITESPACE"," ",252],["T_STRING","false",252],";",["T_WHITESPACE","\n\n\t",252],["T_RETURN","return",254],["T_WHITESPACE"," ",254],["T_INT_CAST","(int)",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$post",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","post_parent",254],";",["T_WHITESPACE","\n",254],"}",["T_WHITESPACE","\n\n",255],["T_DOC_COMMENT","\/**\n * Determines if the specified post is an autosave.\n *\n * @since 2.6.0\n *\n * @param int|WP_Post $post Post ID or post object.\n * @return false|int False if not a revision, ID of autosave's parent otherwise\n *\/",257],["T_WHITESPACE","\n",264],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","wp_is_post_autosave",265],"(",["T_WHITESPACE"," ",265],["T_VARIABLE","$post",265],["T_WHITESPACE"," ",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n\t",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_WHITESPACE"," ",266],"!",["T_VARIABLE","$post",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_STRING","wp_get_post_revision",266],"(",["T_WHITESPACE"," ",266],["T_VARIABLE","$post",266],["T_WHITESPACE"," ",266],")",["T_WHITESPACE"," ",266],")",["T_WHITESPACE","\n\t\t",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_STRING","false",267],";",["T_WHITESPACE","\n\n\t",267],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_WHITESPACE"," ",269],["T_STRING","false",269],["T_WHITESPACE"," ",269],["T_IS_NOT_IDENTICAL","!==",269],["T_WHITESPACE"," ",269],["T_STRING","strpos",269],"(",["T_WHITESPACE"," ",269],["T_VARIABLE","$post",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","post_name",269],",",["T_WHITESPACE"," ",269],"\"",["T_CURLY_OPEN","{",269],["T_VARIABLE","$post",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","post_parent",269],"}",["T_ENCAPSED_AND_WHITESPACE","-autosave",269],"\"",["T_WHITESPACE"," ",269],")",["T_WHITESPACE"," ",269],")",["T_WHITESPACE","\n\t\t",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_INT_CAST","(int)",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$post",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","post_parent",270],";",["T_WHITESPACE","\n\n\t",270],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_STRING","false",272],";",["T_WHITESPACE","\n",272],"}",["T_WHITESPACE","\n\n",273],["T_DOC_COMMENT","\/**\n * Inserts post data into the posts table as a post revision.\n *\n * @since 2.6.0\n * @access private\n *\n * @param int|WP_Post|array|null $post     Post ID, post object OR post array.\n * @param bool                   $autosave Optional. Is the revision an autosave?\n * @return int|WP_Error WP_Error or 0 if error, new revision ID if success.\n *\/",275],["T_WHITESPACE","\n",284],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","_wp_put_post_revision",285],"(",["T_WHITESPACE"," ",285],["T_VARIABLE","$post",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","null",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$autosave",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","false",285],["T_WHITESPACE"," ",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n\t",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_WHITESPACE"," ",286],["T_STRING","is_object",286],"(",["T_VARIABLE","$post",286],")",["T_WHITESPACE"," ",286],")",["T_WHITESPACE","\n\t\t",286],["T_VARIABLE","$post",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","get_object_vars",287],"(",["T_WHITESPACE"," ",287],["T_VARIABLE","$post",287],["T_WHITESPACE"," ",287],")",";",["T_WHITESPACE","\n\t",287],["T_ELSEIF","elseif",288],["T_WHITESPACE"," ",288],"(",["T_WHITESPACE"," ",288],"!",["T_STRING","is_array",288],"(",["T_VARIABLE","$post",288],")",["T_WHITESPACE"," ",288],")",["T_WHITESPACE","\n\t\t",288],["T_VARIABLE","$post",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","get_post",289],"(",["T_VARIABLE","$post",289],",",["T_WHITESPACE"," ",289],["T_STRING","ARRAY_A",289],")",";",["T_WHITESPACE","\n\n\t",289],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_WHITESPACE"," ",291],"!",["T_WHITESPACE"," ",291],["T_VARIABLE","$post",291],["T_WHITESPACE"," ",291],["T_BOOLEAN_OR","||",291],["T_WHITESPACE"," ",291],["T_EMPTY","empty",291],"(",["T_VARIABLE","$post",291],"[",["T_CONSTANT_ENCAPSED_STRING","'ID'",291],"]",")",["T_WHITESPACE"," ",291],")",["T_WHITESPACE","\n\t\t",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_NEW","new",292],["T_WHITESPACE"," ",292],["T_STRING","WP_Error",292],"(",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'invalid_post'",292],",",["T_WHITESPACE"," ",292],["T_STRING","__",292],"(",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'Invalid post ID.'",292],["T_WHITESPACE"," ",292],")",["T_WHITESPACE"," ",292],")",";",["T_WHITESPACE","\n\n\t",292],["T_IF","if",294],["T_WHITESPACE"," ",294],"(",["T_WHITESPACE"," ",294],["T_ISSET","isset",294],"(",["T_VARIABLE","$post",294],"[",["T_CONSTANT_ENCAPSED_STRING","'post_type'",294],"]",")",["T_WHITESPACE"," ",294],["T_BOOLEAN_AND","&&",294],["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'revision'",294],["T_WHITESPACE"," ",294],["T_IS_EQUAL","==",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$post",294],"[",["T_CONSTANT_ENCAPSED_STRING","'post_type'",294],"]",["T_WHITESPACE"," ",294],")",["T_WHITESPACE","\n\t\t",294],["T_RETURN","return",295],["T_WHITESPACE"," ",295],["T_NEW","new",295],["T_WHITESPACE"," ",295],["T_STRING","WP_Error",295],"(",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'post_type'",295],",",["T_WHITESPACE"," ",295],["T_STRING","__",295],"(",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'Cannot create a revision of a revision'",295],["T_WHITESPACE"," ",295],")",["T_WHITESPACE"," ",295],")",";",["T_WHITESPACE","\n\n\t",295],["T_VARIABLE","$post",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","_wp_post_revision_data",297],"(",["T_WHITESPACE"," ",297],["T_VARIABLE","$post",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$autosave",297],["T_WHITESPACE"," ",297],")",";",["T_WHITESPACE","\n\t",297],["T_VARIABLE","$post",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","wp_slash",298],"(",["T_VARIABLE","$post",298],")",";",["T_WHITESPACE"," ",298],["T_COMMENT","\/\/since data is from db\n",298],["T_WHITESPACE","\n\t",299],["T_VARIABLE","$revision_id",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","wp_insert_post",300],"(",["T_WHITESPACE"," ",300],["T_VARIABLE","$post",300],["T_WHITESPACE"," ",300],")",";",["T_WHITESPACE","\n\t",300],["T_IF","if",301],["T_WHITESPACE"," ",301],"(",["T_WHITESPACE"," ",301],["T_STRING","is_wp_error",301],"(",["T_VARIABLE","$revision_id",301],")",["T_WHITESPACE"," ",301],")",["T_WHITESPACE","\n\t\t",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$revision_id",302],";",["T_WHITESPACE","\n\n\t",302],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_WHITESPACE"," ",304],["T_VARIABLE","$revision_id",304],["T_WHITESPACE"," ",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n\t\t",304],["T_DOC_COMMENT","\/**\n\t\t * Fires once a revision has been saved.\n\t\t *\n\t\t * @since 2.6.0\n\t\t *\n\t\t * @param int $revision_id Post revision ID.\n\t\t *\/",305],["T_WHITESPACE","\n\t\t",311],["T_STRING","do_action",312],"(",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'_wp_put_post_revision'",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$revision_id",312],["T_WHITESPACE"," ",312],")",";",["T_WHITESPACE","\n\t",312],"}",["T_WHITESPACE","\n\n\t",313],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$revision_id",315],";",["T_WHITESPACE","\n",315],"}",["T_WHITESPACE","\n\n",316],["T_DOC_COMMENT","\/**\n * Gets a post revision.\n *\n * @since 2.6.0\n *\n * @param int|WP_Post $post   The post ID or object.\n * @param string      $output Optional. The required return type. One of OBJECT, ARRAY_A, or ARRAY_N, which correspond to\n *                            a WP_Post object, an associative array, or a numeric array, respectively. Default OBJECT.\n * @param string      $filter Optional sanitation filter. See sanitize_post().\n * @return WP_Post|array|null WP_Post (or array) on success, or null on failure.\n *\/",318],["T_WHITESPACE","\n",328],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","wp_get_post_revision",329],"(","&",["T_VARIABLE","$post",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$output",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","OBJECT",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$filter",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'raw'",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n\t",329],["T_IF","if",330],["T_WHITESPACE"," ",330],"(",["T_WHITESPACE"," ",330],"!",["T_VARIABLE","$revision",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","get_post",330],"(",["T_WHITESPACE"," ",330],["T_VARIABLE","$post",330],",",["T_WHITESPACE"," ",330],["T_STRING","OBJECT",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$filter",330],["T_WHITESPACE"," ",330],")",["T_WHITESPACE"," ",330],")",["T_WHITESPACE","\n\t\t",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$revision",331],";",["T_WHITESPACE","\n\t",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'revision'",332],["T_WHITESPACE"," ",332],["T_IS_NOT_IDENTICAL","!==",332],["T_WHITESPACE"," ",332],["T_VARIABLE","$revision",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","post_type",332],["T_WHITESPACE"," ",332],")",["T_WHITESPACE","\n\t\t",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_STRING","null",333],";",["T_WHITESPACE","\n\n\t",333],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_WHITESPACE"," ",335],["T_VARIABLE","$output",335],["T_WHITESPACE"," ",335],["T_IS_EQUAL","==",335],["T_WHITESPACE"," ",335],["T_STRING","OBJECT",335],["T_WHITESPACE"," ",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n\t\t",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$revision",336],";",["T_WHITESPACE","\n\t",336],"}",["T_WHITESPACE"," ",337],["T_ELSEIF","elseif",337],["T_WHITESPACE"," ",337],"(",["T_WHITESPACE"," ",337],["T_VARIABLE","$output",337],["T_WHITESPACE"," ",337],["T_IS_EQUAL","==",337],["T_WHITESPACE"," ",337],["T_STRING","ARRAY_A",337],["T_WHITESPACE"," ",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n\t\t",337],["T_VARIABLE","$_revision",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_STRING","get_object_vars",338],"(",["T_VARIABLE","$revision",338],")",";",["T_WHITESPACE","\n\t\t",338],["T_RETURN","return",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$_revision",339],";",["T_WHITESPACE","\n\t",339],"}",["T_WHITESPACE"," ",340],["T_ELSEIF","elseif",340],["T_WHITESPACE"," ",340],"(",["T_WHITESPACE"," ",340],["T_VARIABLE","$output",340],["T_WHITESPACE"," ",340],["T_IS_EQUAL","==",340],["T_WHITESPACE"," ",340],["T_STRING","ARRAY_N",340],["T_WHITESPACE"," ",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n\t\t",340],["T_VARIABLE","$_revision",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","array_values",341],"(",["T_STRING","get_object_vars",341],"(",["T_VARIABLE","$revision",341],")",")",";",["T_WHITESPACE","\n\t\t",341],["T_RETURN","return",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$_revision",342],";",["T_WHITESPACE","\n\t",342],"}",["T_WHITESPACE","\n\n\t",343],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$revision",345],";",["T_WHITESPACE","\n",345],"}",["T_WHITESPACE","\n\n",346],["T_DOC_COMMENT","\/**\n * Restores a post to the specified revision.\n *\n * Can restore a past revision using all fields of the post revision, or only selected fields.\n *\n * @since 2.6.0\n *\n * @param int|WP_Post $revision_id Revision ID or revision object.\n * @param array       $fields      Optional. What fields to restore from. Defaults to all.\n * @return int|false|null Null if error, false if no fields to restore, (int) post ID if success.\n *\/",348],["T_WHITESPACE","\n",358],["T_FUNCTION","function",359],["T_WHITESPACE"," ",359],["T_STRING","wp_restore_post_revision",359],"(",["T_WHITESPACE"," ",359],["T_VARIABLE","$revision_id",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$fields",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","null",359],["T_WHITESPACE"," ",359],")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n\t",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(",["T_WHITESPACE"," ",360],"!",["T_VARIABLE","$revision",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_STRING","wp_get_post_revision",360],"(",["T_WHITESPACE"," ",360],["T_VARIABLE","$revision_id",360],",",["T_WHITESPACE"," ",360],["T_STRING","ARRAY_A",360],["T_WHITESPACE"," ",360],")",["T_WHITESPACE"," ",360],")",["T_WHITESPACE","\n\t\t",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$revision",361],";",["T_WHITESPACE","\n\n\t",361],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_WHITESPACE"," ",363],"!",["T_STRING","is_array",363],"(",["T_WHITESPACE"," ",363],["T_VARIABLE","$fields",363],["T_WHITESPACE"," ",363],")",["T_WHITESPACE"," ",363],")",["T_WHITESPACE","\n\t\t",363],["T_VARIABLE","$fields",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","array_keys",364],"(",["T_WHITESPACE"," ",364],["T_STRING","_wp_post_revision_fields",364],"(",["T_WHITESPACE"," ",364],["T_VARIABLE","$revision",364],["T_WHITESPACE"," ",364],")",["T_WHITESPACE"," ",364],")",";",["T_WHITESPACE","\n\n\t",364],["T_VARIABLE","$update",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_ARRAY","array",366],"(",")",";",["T_WHITESPACE","\n\t",366],["T_FOREACH","foreach",367],["T_WHITESPACE"," ",367],"(",["T_WHITESPACE"," ",367],["T_STRING","array_intersect",367],"(",["T_WHITESPACE"," ",367],["T_STRING","array_keys",367],"(",["T_WHITESPACE"," ",367],["T_VARIABLE","$revision",367],["T_WHITESPACE"," ",367],")",",",["T_WHITESPACE"," ",367],["T_VARIABLE","$fields",367],["T_WHITESPACE"," ",367],")",["T_WHITESPACE"," ",367],["T_AS","as",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$field",367],["T_WHITESPACE"," ",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n\t\t",367],["T_VARIABLE","$update",368],"[",["T_VARIABLE","$field",368],"]",["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$revision",368],"[",["T_VARIABLE","$field",368],"]",";",["T_WHITESPACE","\n\t",368],"}",["T_WHITESPACE","\n\n\t",369],["T_IF","if",371],["T_WHITESPACE"," ",371],"(",["T_WHITESPACE"," ",371],"!",["T_VARIABLE","$update",371],["T_WHITESPACE"," ",371],")",["T_WHITESPACE","\n\t\t",371],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_STRING","false",372],";",["T_WHITESPACE","\n\n\t",372],["T_VARIABLE","$update",374],"[",["T_CONSTANT_ENCAPSED_STRING","'ID'",374],"]",["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_VARIABLE","$revision",374],"[",["T_CONSTANT_ENCAPSED_STRING","'post_parent'",374],"]",";",["T_WHITESPACE","\n\n\t",374],["T_VARIABLE","$update",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","wp_slash",376],"(",["T_WHITESPACE"," ",376],["T_VARIABLE","$update",376],["T_WHITESPACE"," ",376],")",";",["T_WHITESPACE"," ",376],["T_COMMENT","\/\/since data is from db\n",376],["T_WHITESPACE","\n\t",377],["T_VARIABLE","$post_id",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","wp_update_post",378],"(",["T_WHITESPACE"," ",378],["T_VARIABLE","$update",378],["T_WHITESPACE"," ",378],")",";",["T_WHITESPACE","\n\t",378],["T_IF","if",379],["T_WHITESPACE"," ",379],"(",["T_WHITESPACE"," ",379],"!",["T_WHITESPACE"," ",379],["T_VARIABLE","$post_id",379],["T_WHITESPACE"," ",379],["T_BOOLEAN_OR","||",379],["T_WHITESPACE"," ",379],["T_STRING","is_wp_error",379],"(",["T_WHITESPACE"," ",379],["T_VARIABLE","$post_id",379],["T_WHITESPACE"," ",379],")",["T_WHITESPACE"," ",379],")",["T_WHITESPACE","\n\t\t",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$post_id",380],";",["T_WHITESPACE","\n\n\t",380],["T_COMMENT","\/\/ Update last edit user\n",382],["T_WHITESPACE","\t",383],["T_STRING","update_post_meta",383],"(",["T_WHITESPACE"," ",383],["T_VARIABLE","$post_id",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'_edit_last'",383],",",["T_WHITESPACE"," ",383],["T_STRING","get_current_user_id",383],"(",")",["T_WHITESPACE"," ",383],")",";",["T_WHITESPACE","\n\n\t",383],["T_DOC_COMMENT","\/**\n\t * Fires after a post revision has been restored.\n\t *\n\t * @since 2.6.0\n\t *\n\t * @param int $post_id     Post ID.\n\t * @param int $revision_id Post revision ID.\n\t *\/",385],["T_WHITESPACE","\n\t",392],["T_STRING","do_action",393],"(",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'wp_restore_post_revision'",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$post_id",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$revision",393],"[",["T_CONSTANT_ENCAPSED_STRING","'ID'",393],"]",["T_WHITESPACE"," ",393],")",";",["T_WHITESPACE","\n\n\t",393],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$post_id",395],";",["T_WHITESPACE","\n",395],"}",["T_WHITESPACE","\n\n",396],["T_DOC_COMMENT","\/**\n * Deletes a revision.\n *\n * Deletes the row from the posts table corresponding to the specified revision.\n *\n * @since 2.6.0\n *\n * @param int|WP_Post $revision_id Revision ID or revision object.\n * @return array|false|WP_Post|WP_Error|null Null or WP_Error if error, deleted post if success.\n *\/",398],["T_WHITESPACE","\n",407],["T_FUNCTION","function",408],["T_WHITESPACE"," ",408],["T_STRING","wp_delete_post_revision",408],"(",["T_WHITESPACE"," ",408],["T_VARIABLE","$revision_id",408],["T_WHITESPACE"," ",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n\t",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_WHITESPACE"," ",409],"!",["T_WHITESPACE"," ",409],["T_VARIABLE","$revision",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","wp_get_post_revision",409],"(",["T_WHITESPACE"," ",409],["T_VARIABLE","$revision_id",409],["T_WHITESPACE"," ",409],")",["T_WHITESPACE"," ",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n\t\t",409],["T_RETURN","return",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$revision",410],";",["T_WHITESPACE","\n\t",410],"}",["T_WHITESPACE","\n\n\t",411],["T_VARIABLE","$delete",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","wp_delete_post",413],"(",["T_WHITESPACE"," ",413],["T_VARIABLE","$revision",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","ID",413],["T_WHITESPACE"," ",413],")",";",["T_WHITESPACE","\n\t",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_WHITESPACE"," ",414],["T_VARIABLE","$delete",414],["T_WHITESPACE"," ",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n\t\t",414],["T_DOC_COMMENT","\/**\n\t\t * Fires once a post revision has been deleted.\n\t\t *\n\t\t * @since 2.6.0\n\t\t *\n\t\t * @param int          $revision_id Post revision ID.\n\t\t * @param object|array $revision    Post revision object or array.\n\t\t *\/",415],["T_WHITESPACE","\n\t\t",422],["T_STRING","do_action",423],"(",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'wp_delete_post_revision'",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$revision",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","ID",423],",",["T_WHITESPACE"," ",423],["T_VARIABLE","$revision",423],["T_WHITESPACE"," ",423],")",";",["T_WHITESPACE","\n\t",423],"}",["T_WHITESPACE","\n\n\t",424],["T_RETURN","return",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$delete",426],";",["T_WHITESPACE","\n",426],"}",["T_WHITESPACE","\n\n",427],["T_DOC_COMMENT","\/**\n * Returns all revisions of specified post.\n *\n * @since 2.6.0\n *\n * @see get_children()\n *\n * @param int|WP_Post $post_id Optional. Post ID or WP_Post object. Default is global `$post`.\n * @param array|null  $args    Optional. Arguments for retrieving post revisions. Default null.\n * @return array An array of revisions, or an empty array if none.\n *\/",429],["T_WHITESPACE","\n",439],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","wp_get_post_revisions",440],"(",["T_WHITESPACE"," ",440],["T_VARIABLE","$post_id",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_LNUMBER","0",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$args",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","null",440],["T_WHITESPACE"," ",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n\t",440],["T_VARIABLE","$post",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","get_post",441],"(",["T_WHITESPACE"," ",441],["T_VARIABLE","$post_id",441],["T_WHITESPACE"," ",441],")",";",["T_WHITESPACE","\n\t",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_WHITESPACE"," ",442],"!",["T_WHITESPACE"," ",442],["T_VARIABLE","$post",442],["T_WHITESPACE"," ",442],["T_BOOLEAN_OR","||",442],["T_WHITESPACE"," ",442],["T_EMPTY","empty",442],"(",["T_WHITESPACE"," ",442],["T_VARIABLE","$post",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","ID",442],["T_WHITESPACE"," ",442],")",["T_WHITESPACE"," ",442],")",["T_WHITESPACE","\n\t\t",442],["T_RETURN","return",443],["T_WHITESPACE"," ",443],["T_ARRAY","array",443],"(",")",";",["T_WHITESPACE","\n\n\t",443],["T_VARIABLE","$defaults",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_ARRAY","array",445],"(",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'order'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'DESC'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'orderby'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'date ID'",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'check_enabled'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_STRING","true",445],["T_WHITESPACE"," ",445],")",";",["T_WHITESPACE","\n\t",445],["T_VARIABLE","$args",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_STRING","wp_parse_args",446],"(",["T_WHITESPACE"," ",446],["T_VARIABLE","$args",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$defaults",446],["T_WHITESPACE"," ",446],")",";",["T_WHITESPACE","\n\n\t",446],["T_IF","if",448],["T_WHITESPACE"," ",448],"(",["T_WHITESPACE"," ",448],["T_VARIABLE","$args",448],"[",["T_CONSTANT_ENCAPSED_STRING","'check_enabled'",448],"]",["T_WHITESPACE"," ",448],["T_BOOLEAN_AND","&&",448],["T_WHITESPACE"," ",448],"!",["T_WHITESPACE"," ",448],["T_STRING","wp_revisions_enabled",448],"(",["T_WHITESPACE"," ",448],["T_VARIABLE","$post",448],["T_WHITESPACE"," ",448],")",["T_WHITESPACE"," ",448],")",["T_WHITESPACE","\n\t\t",448],["T_RETURN","return",449],["T_WHITESPACE"," ",449],["T_ARRAY","array",449],"(",")",";",["T_WHITESPACE","\n\n\t",449],["T_VARIABLE","$args",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_STRING","array_merge",451],"(",["T_WHITESPACE"," ",451],["T_VARIABLE","$args",451],",",["T_WHITESPACE"," ",451],["T_ARRAY","array",451],"(",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'post_parent'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$post",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","ID",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'post_type'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'revision'",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'post_status'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'inherit'",451],["T_WHITESPACE"," ",451],")",["T_WHITESPACE"," ",451],")",";",["T_WHITESPACE","\n\n\t",451],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_WHITESPACE"," ",453],"!",["T_WHITESPACE"," ",453],["T_VARIABLE","$revisions",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING","get_children",453],"(",["T_WHITESPACE"," ",453],["T_VARIABLE","$args",453],["T_WHITESPACE"," ",453],")",["T_WHITESPACE"," ",453],")",["T_WHITESPACE","\n\t\t",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_ARRAY","array",454],"(",")",";",["T_WHITESPACE","\n\n\t",454],["T_RETURN","return",456],["T_WHITESPACE"," ",456],["T_VARIABLE","$revisions",456],";",["T_WHITESPACE","\n",456],"}",["T_WHITESPACE","\n\n",457],["T_DOC_COMMENT","\/**\n * Determine if revisions are enabled for a given post.\n *\n * @since 3.6.0\n *\n * @param WP_Post $post The post object.\n * @return bool True if number of revisions to keep isn't zero, false otherwise.\n *\/",459],["T_WHITESPACE","\n",466],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","wp_revisions_enabled",467],"(",["T_WHITESPACE"," ",467],["T_VARIABLE","$post",467],["T_WHITESPACE"," ",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n\t",467],["T_RETURN","return",468],["T_WHITESPACE"," ",468],["T_STRING","wp_revisions_to_keep",468],"(",["T_WHITESPACE"," ",468],["T_VARIABLE","$post",468],["T_WHITESPACE"," ",468],")",["T_WHITESPACE"," ",468],["T_IS_NOT_IDENTICAL","!==",468],["T_WHITESPACE"," ",468],["T_LNUMBER","0",468],";",["T_WHITESPACE","\n",468],"}",["T_WHITESPACE","\n\n",469],["T_DOC_COMMENT","\/**\n * Determine how many revisions to retain for a given post.\n *\n * By default, an infinite number of revisions are kept.\n *\n * The constant WP_POST_REVISIONS can be set in wp-config to specify the limit\n * of revisions to keep.\n *\n * @since 3.6.0\n *\n * @param WP_Post $post The post object.\n * @return int The number of revisions to keep.\n *\/",471],["T_WHITESPACE","\n",483],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","wp_revisions_to_keep",484],"(",["T_WHITESPACE"," ",484],["T_VARIABLE","$post",484],["T_WHITESPACE"," ",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n\t",484],["T_VARIABLE","$num",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING","WP_POST_REVISIONS",485],";",["T_WHITESPACE","\n\n\t",485],["T_IF","if",487],["T_WHITESPACE"," ",487],"(",["T_WHITESPACE"," ",487],["T_STRING","true",487],["T_WHITESPACE"," ",487],["T_IS_IDENTICAL","===",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$num",487],["T_WHITESPACE"," ",487],")",["T_WHITESPACE","\n\t\t",487],["T_VARIABLE","$num",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],"-",["T_LNUMBER","1",488],";",["T_WHITESPACE","\n\t",488],["T_ELSE","else",489],["T_WHITESPACE","\n\t\t",489],["T_VARIABLE","$num",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_STRING","intval",490],"(",["T_WHITESPACE"," ",490],["T_VARIABLE","$num",490],["T_WHITESPACE"," ",490],")",";",["T_WHITESPACE","\n\n\t",490],["T_IF","if",492],["T_WHITESPACE"," ",492],"(",["T_WHITESPACE"," ",492],"!",["T_WHITESPACE"," ",492],["T_STRING","post_type_supports",492],"(",["T_WHITESPACE"," ",492],["T_VARIABLE","$post",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","post_type",492],",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'revisions'",492],["T_WHITESPACE"," ",492],")",["T_WHITESPACE"," ",492],")",["T_WHITESPACE","\n\t\t",492],["T_VARIABLE","$num",493],["T_WHITESPACE"," ",493],"=",["T_WHITESPACE"," ",493],["T_LNUMBER","0",493],";",["T_WHITESPACE","\n\n\t",493],["T_DOC_COMMENT","\/**\n\t * Filters the number of revisions to save for the given post.\n\t *\n\t * Overrides the value of WP_POST_REVISIONS.\n\t *\n\t * @since 3.6.0\n\t *\n\t * @param int     $num  Number of revisions to store.\n\t * @param WP_Post $post Post object.\n\t *\/",495],["T_WHITESPACE","\n\t",504],["T_RETURN","return",505],["T_WHITESPACE"," ",505],["T_INT_CAST","(int)",505],["T_WHITESPACE"," ",505],["T_STRING","apply_filters",505],"(",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'wp_revisions_to_keep'",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$num",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$post",505],["T_WHITESPACE"," ",505],")",";",["T_WHITESPACE","\n",505],"}",["T_WHITESPACE","\n\n",506],["T_DOC_COMMENT","\/**\n * Sets up the post object for preview based on the post autosave.\n *\n * @since 2.7.0\n * @access private\n *\n * @param WP_Post $post\n * @return WP_Post|false\n *\/",508],["T_WHITESPACE","\n",516],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","_set_preview",517],"(",["T_WHITESPACE"," ",517],["T_VARIABLE","$post",517],["T_WHITESPACE"," ",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n\t",517],["T_IF","if",518],["T_WHITESPACE"," ",518],"(",["T_WHITESPACE"," ",518],"!",["T_WHITESPACE"," ",518],["T_STRING","is_object",518],"(",["T_WHITESPACE"," ",518],["T_VARIABLE","$post",518],["T_WHITESPACE"," ",518],")",["T_WHITESPACE"," ",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n\t\t",518],["T_RETURN","return",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$post",519],";",["T_WHITESPACE","\n\t",519],"}",["T_WHITESPACE","\n\n\t",520],["T_VARIABLE","$preview",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_STRING","wp_get_post_autosave",522],"(",["T_WHITESPACE"," ",522],["T_VARIABLE","$post",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","ID",522],["T_WHITESPACE"," ",522],")",";",["T_WHITESPACE","\n\t",522],["T_IF","if",523],["T_WHITESPACE"," ",523],"(",["T_WHITESPACE"," ",523],"!",["T_WHITESPACE"," ",523],["T_STRING","is_object",523],"(",["T_WHITESPACE"," ",523],["T_VARIABLE","$preview",523],["T_WHITESPACE"," ",523],")",["T_WHITESPACE"," ",523],")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n\t\t",523],["T_RETURN","return",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$post",524],";",["T_WHITESPACE","\n\t",524],"}",["T_WHITESPACE","\n\n\t",525],["T_VARIABLE","$preview",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_STRING","sanitize_post",527],"(",["T_WHITESPACE"," ",527],["T_VARIABLE","$preview",527],["T_WHITESPACE"," ",527],")",";",["T_WHITESPACE","\n\n\t",527],["T_VARIABLE","$post",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","post_content",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$preview",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","post_content",529],";",["T_WHITESPACE","\n\t",529],["T_VARIABLE","$post",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","post_title",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$preview",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","post_title",530],";",["T_WHITESPACE","\n\t",530],["T_VARIABLE","$post",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","post_excerpt",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$preview",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","post_excerpt",531],";",["T_WHITESPACE","\n\n\t",531],["T_STRING","add_filter",533],"(",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'get_the_terms'",533],",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'_wp_preview_terms_filter'",533],",",["T_WHITESPACE"," ",533],["T_LNUMBER","10",533],",",["T_WHITESPACE"," ",533],["T_LNUMBER","3",533],["T_WHITESPACE"," ",533],")",";",["T_WHITESPACE","\n\t",533],["T_STRING","add_filter",534],"(",["T_WHITESPACE"," ",534],["T_CONSTANT_ENCAPSED_STRING","'get_post_metadata'",534],",",["T_WHITESPACE"," ",534],["T_CONSTANT_ENCAPSED_STRING","'_wp_preview_post_thumbnail_filter'",534],",",["T_WHITESPACE"," ",534],["T_LNUMBER","10",534],",",["T_WHITESPACE"," ",534],["T_LNUMBER","3",534],["T_WHITESPACE"," ",534],")",";",["T_WHITESPACE","\n\n\t",534],["T_RETURN","return",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$post",536],";",["T_WHITESPACE","\n",536],"}",["T_WHITESPACE","\n\n",537],["T_DOC_COMMENT","\/**\n * Filters the latest content for preview from the post autosave.\n *\n * @since 2.7.0\n * @access private\n *\/",539],["T_WHITESPACE","\n",544],["T_FUNCTION","function",545],["T_WHITESPACE"," ",545],["T_STRING","_show_post_preview",545],"(",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n\t",545],["T_IF","if",546],["T_WHITESPACE"," ",546],"(",["T_WHITESPACE"," ",546],["T_ISSET","isset",546],"(",["T_VARIABLE","$_GET",546],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_id'",546],"]",")",["T_WHITESPACE"," ",546],["T_BOOLEAN_AND","&&",546],["T_WHITESPACE"," ",546],["T_ISSET","isset",546],"(",["T_VARIABLE","$_GET",546],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_nonce'",546],"]",")",["T_WHITESPACE"," ",546],")",["T_WHITESPACE"," ",546],"{",["T_WHITESPACE","\n\t\t",546],["T_VARIABLE","$id",547],["T_WHITESPACE"," ",547],"=",["T_WHITESPACE"," ",547],["T_INT_CAST","(int)",547],["T_WHITESPACE"," ",547],["T_VARIABLE","$_GET",547],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_id'",547],"]",";",["T_WHITESPACE","\n\n\t\t",547],["T_IF","if",549],["T_WHITESPACE"," ",549],"(",["T_WHITESPACE"," ",549],["T_STRING","false",549],["T_WHITESPACE"," ",549],["T_IS_IDENTICAL","===",549],["T_WHITESPACE"," ",549],["T_STRING","wp_verify_nonce",549],"(",["T_WHITESPACE"," ",549],["T_VARIABLE","$_GET",549],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_nonce'",549],"]",",",["T_WHITESPACE"," ",549],["T_CONSTANT_ENCAPSED_STRING","'post_preview_'",549],["T_WHITESPACE"," ",549],".",["T_WHITESPACE"," ",549],["T_VARIABLE","$id",549],["T_WHITESPACE"," ",549],")",["T_WHITESPACE"," ",549],")",["T_WHITESPACE","\n\t\t\t",549],["T_STRING","wp_die",550],"(",["T_WHITESPACE"," ",550],["T_STRING","__",550],"(",["T_CONSTANT_ENCAPSED_STRING","'Sorry, you are not allowed to preview drafts.'",550],")",["T_WHITESPACE"," ",550],")",";",["T_WHITESPACE","\n\n\t\t",550],["T_STRING","add_filter",552],"(",["T_CONSTANT_ENCAPSED_STRING","'the_preview'",552],",",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","'_set_preview'",552],")",";",["T_WHITESPACE","\n\t",552],"}",["T_WHITESPACE","\n",553],"}",["T_WHITESPACE","\n\n",554],["T_DOC_COMMENT","\/**\n * Filters terms lookup to set the post format.\n *\n * @since 3.6.0\n * @access private\n *\n * @param array  $terms\n * @param int    $post_id\n * @param string $taxonomy\n * @return array\n *\/",556],["T_WHITESPACE","\n",566],["T_FUNCTION","function",567],["T_WHITESPACE"," ",567],["T_STRING","_wp_preview_terms_filter",567],"(",["T_WHITESPACE"," ",567],["T_VARIABLE","$terms",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$post_id",567],",",["T_WHITESPACE"," ",567],["T_VARIABLE","$taxonomy",567],["T_WHITESPACE"," ",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n\t",567],["T_IF","if",568],["T_WHITESPACE"," ",568],"(",["T_WHITESPACE"," ",568],"!",["T_WHITESPACE"," ",568],["T_VARIABLE","$post",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","get_post",568],"(",")",["T_WHITESPACE"," ",568],")",["T_WHITESPACE","\n\t\t",568],["T_RETURN","return",569],["T_WHITESPACE"," ",569],["T_VARIABLE","$terms",569],";",["T_WHITESPACE","\n\n\t",569],["T_IF","if",571],["T_WHITESPACE"," ",571],"(",["T_WHITESPACE"," ",571],["T_EMPTY","empty",571],"(",["T_WHITESPACE"," ",571],["T_VARIABLE","$_REQUEST",571],"[",["T_CONSTANT_ENCAPSED_STRING","'post_format'",571],"]",["T_WHITESPACE"," ",571],")",["T_WHITESPACE"," ",571],["T_BOOLEAN_OR","||",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$post",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","ID",571],["T_WHITESPACE"," ",571],["T_IS_NOT_EQUAL","!=",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$post_id",571],["T_WHITESPACE"," ",571],["T_BOOLEAN_OR","||",571],["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","'post_format'",571],["T_WHITESPACE"," ",571],["T_IS_NOT_EQUAL","!=",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$taxonomy",571],["T_WHITESPACE"," ",571],["T_BOOLEAN_OR","||",571],["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","'revision'",571],["T_WHITESPACE"," ",571],["T_IS_EQUAL","==",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$post",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","post_type",571],["T_WHITESPACE"," ",571],")",["T_WHITESPACE","\n\t\t",571],["T_RETURN","return",572],["T_WHITESPACE"," ",572],["T_VARIABLE","$terms",572],";",["T_WHITESPACE","\n\n\t",572],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'standard'",574],["T_WHITESPACE"," ",574],["T_IS_EQUAL","==",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$_REQUEST",574],"[",["T_CONSTANT_ENCAPSED_STRING","'post_format'",574],"]",["T_WHITESPACE"," ",574],")",["T_WHITESPACE","\n\t\t",574],["T_VARIABLE","$terms",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_ARRAY","array",575],"(",")",";",["T_WHITESPACE","\n\t",575],["T_ELSEIF","elseif",576],["T_WHITESPACE"," ",576],"(",["T_WHITESPACE"," ",576],["T_VARIABLE","$term",576],["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_STRING","get_term_by",576],"(",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'slug'",576],",",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'post-format-'",576],["T_WHITESPACE"," ",576],".",["T_WHITESPACE"," ",576],["T_STRING","sanitize_key",576],"(",["T_WHITESPACE"," ",576],["T_VARIABLE","$_REQUEST",576],"[",["T_CONSTANT_ENCAPSED_STRING","'post_format'",576],"]",["T_WHITESPACE"," ",576],")",",",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'post_format'",576],["T_WHITESPACE"," ",576],")",["T_WHITESPACE"," ",576],")",["T_WHITESPACE","\n\t\t",576],["T_VARIABLE","$terms",577],["T_WHITESPACE"," ",577],"=",["T_WHITESPACE"," ",577],["T_ARRAY","array",577],"(",["T_WHITESPACE"," ",577],["T_VARIABLE","$term",577],["T_WHITESPACE"," ",577],")",";",["T_WHITESPACE"," ",577],["T_COMMENT","\/\/ Can only have one post format\n",577],["T_WHITESPACE","\n\t",578],["T_RETURN","return",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$terms",579],";",["T_WHITESPACE","\n",579],"}",["T_WHITESPACE","\n\n",580],["T_DOC_COMMENT","\/**\n * Filters post thumbnail lookup to set the post thumbnail.\n *\n * @since 4.6.0\n * @access private\n *\n * @param null|array|string $value    The value to return - a single metadata value, or an array of values.\n * @param int               $post_id  Post ID.\n * @param string            $meta_key Meta key.\n * @return null|array The default return value or the post thumbnail meta array.\n *\/",582],["T_WHITESPACE","\n",592],["T_FUNCTION","function",593],["T_WHITESPACE"," ",593],["T_STRING","_wp_preview_post_thumbnail_filter",593],"(",["T_WHITESPACE"," ",593],["T_VARIABLE","$value",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$post_id",593],",",["T_WHITESPACE"," ",593],["T_VARIABLE","$meta_key",593],["T_WHITESPACE"," ",593],")",["T_WHITESPACE"," ",593],"{",["T_WHITESPACE","\n\t",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_WHITESPACE"," ",594],"!",["T_WHITESPACE"," ",594],["T_VARIABLE","$post",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_STRING","get_post",594],"(",")",["T_WHITESPACE"," ",594],")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n\t\t",594],["T_RETURN","return",595],["T_WHITESPACE"," ",595],["T_VARIABLE","$value",595],";",["T_WHITESPACE","\n\t",595],"}",["T_WHITESPACE","\n\n\t",596],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_WHITESPACE"," ",598],["T_EMPTY","empty",598],"(",["T_WHITESPACE"," ",598],["T_VARIABLE","$_REQUEST",598],"[",["T_CONSTANT_ENCAPSED_STRING","'_thumbnail_id'",598],"]",["T_WHITESPACE"," ",598],")",["T_WHITESPACE"," ",598],["T_BOOLEAN_OR","||",598],["T_WHITESPACE","\n\t     ",598],["T_EMPTY","empty",599],"(",["T_WHITESPACE"," ",599],["T_VARIABLE","$_REQUEST",599],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_id'",599],"]",["T_WHITESPACE"," ",599],")",["T_WHITESPACE"," ",599],["T_BOOLEAN_OR","||",599],["T_WHITESPACE","\n\t     ",599],["T_VARIABLE","$post",600],["T_OBJECT_OPERATOR","->",600],["T_STRING","ID",600],["T_WHITESPACE"," ",600],["T_IS_NOT_EQUAL","!=",600],["T_WHITESPACE"," ",600],["T_VARIABLE","$post_id",600],["T_WHITESPACE"," ",600],["T_BOOLEAN_OR","||",600],["T_WHITESPACE","\n\t     ",600],["T_CONSTANT_ENCAPSED_STRING","'_thumbnail_id'",601],["T_WHITESPACE"," ",601],["T_IS_NOT_EQUAL","!=",601],["T_WHITESPACE"," ",601],["T_VARIABLE","$meta_key",601],["T_WHITESPACE"," ",601],["T_BOOLEAN_OR","||",601],["T_WHITESPACE","\n\t     ",601],["T_CONSTANT_ENCAPSED_STRING","'revision'",602],["T_WHITESPACE"," ",602],["T_IS_EQUAL","==",602],["T_WHITESPACE"," ",602],["T_VARIABLE","$post",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","post_type",602],["T_WHITESPACE"," ",602],["T_BOOLEAN_OR","||",602],["T_WHITESPACE","\n\t     ",602],["T_VARIABLE","$post_id",603],["T_WHITESPACE"," ",603],["T_IS_NOT_EQUAL","!=",603],["T_WHITESPACE"," ",603],["T_VARIABLE","$_REQUEST",603],"[",["T_CONSTANT_ENCAPSED_STRING","'preview_id'",603],"]",["T_WHITESPACE","\n\t",603],")",["T_WHITESPACE"," ",604],"{",["T_WHITESPACE","\n\t\t",604],["T_RETURN","return",605],["T_WHITESPACE"," ",605],["T_VARIABLE","$value",605],";",["T_WHITESPACE","\n\t",605],"}",["T_WHITESPACE","\n\n\t",606],["T_VARIABLE","$thumbnail_id",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_STRING","intval",608],"(",["T_WHITESPACE"," ",608],["T_VARIABLE","$_REQUEST",608],"[",["T_CONSTANT_ENCAPSED_STRING","'_thumbnail_id'",608],"]",["T_WHITESPACE"," ",608],")",";",["T_WHITESPACE","\n\t",608],["T_IF","if",609],["T_WHITESPACE"," ",609],"(",["T_WHITESPACE"," ",609],["T_VARIABLE","$thumbnail_id",609],["T_WHITESPACE"," ",609],["T_IS_SMALLER_OR_EQUAL","<=",609],["T_WHITESPACE"," ",609],["T_LNUMBER","0",609],["T_WHITESPACE"," ",609],")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n\t\t",609],["T_RETURN","return",610],["T_WHITESPACE"," ",610],["T_CONSTANT_ENCAPSED_STRING","''",610],";",["T_WHITESPACE","\n\t",610],"}",["T_WHITESPACE","\n\n\t",611],["T_RETURN","return",613],["T_WHITESPACE"," ",613],["T_STRING","strval",613],"(",["T_WHITESPACE"," ",613],["T_VARIABLE","$thumbnail_id",613],["T_WHITESPACE"," ",613],")",";",["T_WHITESPACE","\n",613],"}",["T_WHITESPACE","\n\n",614],["T_DOC_COMMENT","\/**\n * Gets the post revision version.\n *\n * @since 3.6.0\n * @access private\n *\n * @param WP_Post $revision\n * @return int|false\n *\/",616],["T_WHITESPACE","\n",624],["T_FUNCTION","function",625],["T_WHITESPACE"," ",625],["T_STRING","_wp_get_post_revision_version",625],"(",["T_WHITESPACE"," ",625],["T_VARIABLE","$revision",625],["T_WHITESPACE"," ",625],")",["T_WHITESPACE"," ",625],"{",["T_WHITESPACE","\n\t",625],["T_IF","if",626],["T_WHITESPACE"," ",626],"(",["T_WHITESPACE"," ",626],["T_STRING","is_object",626],"(",["T_WHITESPACE"," ",626],["T_VARIABLE","$revision",626],["T_WHITESPACE"," ",626],")",["T_WHITESPACE"," ",626],")",["T_WHITESPACE","\n\t\t",626],["T_VARIABLE","$revision",627],["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],["T_STRING","get_object_vars",627],"(",["T_WHITESPACE"," ",627],["T_VARIABLE","$revision",627],["T_WHITESPACE"," ",627],")",";",["T_WHITESPACE","\n\t",627],["T_ELSEIF","elseif",628],["T_WHITESPACE"," ",628],"(",["T_WHITESPACE"," ",628],"!",["T_STRING","is_array",628],"(",["T_WHITESPACE"," ",628],["T_VARIABLE","$revision",628],["T_WHITESPACE"," ",628],")",["T_WHITESPACE"," ",628],")",["T_WHITESPACE","\n\t\t",628],["T_RETURN","return",629],["T_WHITESPACE"," ",629],["T_STRING","false",629],";",["T_WHITESPACE","\n\n\t",629],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_WHITESPACE"," ",631],["T_STRING","preg_match",631],"(",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","'\/^\\d+-(?:autosave|revision)-v(\\d+)$\/'",631],",",["T_WHITESPACE"," ",631],["T_VARIABLE","$revision",631],"[",["T_CONSTANT_ENCAPSED_STRING","'post_name'",631],"]",",",["T_WHITESPACE"," ",631],["T_VARIABLE","$matches",631],["T_WHITESPACE"," ",631],")",["T_WHITESPACE"," ",631],")",["T_WHITESPACE","\n\t\t",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_INT_CAST","(int)",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$matches",632],"[",["T_LNUMBER","1",632],"]",";",["T_WHITESPACE","\n\n\t",632],["T_RETURN","return",634],["T_WHITESPACE"," ",634],["T_LNUMBER","0",634],";",["T_WHITESPACE","\n",634],"}",["T_WHITESPACE","\n\n",635],["T_DOC_COMMENT","\/**\n * Upgrade the revisions author, add the current post as a revision and set the revisions version to 1\n *\n * @since 3.6.0\n * @access private\n *\n * @global wpdb $wpdb WordPress database abstraction object.\n *\n * @param WP_Post $post      Post object\n * @param array   $revisions Current revisions of the post\n * @return bool true if the revisions were upgraded, false if problems\n *\/",637],["T_WHITESPACE","\n",648],["T_FUNCTION","function",649],["T_WHITESPACE"," ",649],["T_STRING","_wp_upgrade_revisions_of_post",649],"(",["T_WHITESPACE"," ",649],["T_VARIABLE","$post",649],",",["T_WHITESPACE"," ",649],["T_VARIABLE","$revisions",649],["T_WHITESPACE"," ",649],")",["T_WHITESPACE"," ",649],"{",["T_WHITESPACE","\n\t",649],["T_GLOBAL","global",650],["T_WHITESPACE"," ",650],["T_VARIABLE","$wpdb",650],";",["T_WHITESPACE","\n\n\t",650],["T_COMMENT","\/\/ Add post option exclusively\n",652],["T_WHITESPACE","\t",653],["T_VARIABLE","$lock",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],"\"",["T_ENCAPSED_AND_WHITESPACE","revision-upgrade-",653],["T_CURLY_OPEN","{",653],["T_VARIABLE","$post",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","ID",653],"}","\"",";",["T_WHITESPACE","\n\t",653],["T_VARIABLE","$now",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_STRING","time",654],"(",")",";",["T_WHITESPACE","\n\t",654],["T_VARIABLE","$result",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_VARIABLE","$wpdb",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","query",655],"(",["T_WHITESPACE"," ",655],["T_VARIABLE","$wpdb",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","prepare",655],"(",["T_WHITESPACE"," ",655],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT IGNORE INTO `",655],["T_VARIABLE","$wpdb",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","options",655],["T_ENCAPSED_AND_WHITESPACE","` (`option_name`, `option_value`, `autoload`) VALUES (%s, %s, 'no') \/* LOCK *\/",655],"\"",",",["T_WHITESPACE"," ",655],["T_VARIABLE","$lock",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$now",655],["T_WHITESPACE"," ",655],")",["T_WHITESPACE"," ",655],")",";",["T_WHITESPACE","\n\t",655],["T_IF","if",656],["T_WHITESPACE"," ",656],"(",["T_WHITESPACE"," ",656],"!",["T_WHITESPACE"," ",656],["T_VARIABLE","$result",656],["T_WHITESPACE"," ",656],")",["T_WHITESPACE"," ",656],"{",["T_WHITESPACE","\n\t\t",656],["T_COMMENT","\/\/ If we couldn't get a lock, see how old the previous lock is\n",657],["T_WHITESPACE","\t\t",658],["T_VARIABLE","$locked",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_STRING","get_option",658],"(",["T_WHITESPACE"," ",658],["T_VARIABLE","$lock",658],["T_WHITESPACE"," ",658],")",";",["T_WHITESPACE","\n\t\t",658],["T_IF","if",659],["T_WHITESPACE"," ",659],"(",["T_WHITESPACE"," ",659],"!",["T_WHITESPACE"," ",659],["T_VARIABLE","$locked",659],["T_WHITESPACE"," ",659],")",["T_WHITESPACE"," ",659],"{",["T_WHITESPACE","\n\t\t\t",659],["T_COMMENT","\/\/ Can't write to the lock, and can't read the lock.\n",660],["T_WHITESPACE","\t\t\t",661],["T_COMMENT","\/\/ Something broken has happened\n",661],["T_WHITESPACE","\t\t\t",662],["T_RETURN","return",662],["T_WHITESPACE"," ",662],["T_STRING","false",662],";",["T_WHITESPACE","\n\t\t",662],"}",["T_WHITESPACE","\n\n\t\t",663],["T_IF","if",665],["T_WHITESPACE"," ",665],"(",["T_WHITESPACE"," ",665],["T_VARIABLE","$locked",665],["T_WHITESPACE"," ",665],">",["T_WHITESPACE"," ",665],["T_VARIABLE","$now",665],["T_WHITESPACE"," ",665],"-",["T_WHITESPACE"," ",665],["T_LNUMBER","3600",665],["T_WHITESPACE"," ",665],")",["T_WHITESPACE"," ",665],"{",["T_WHITESPACE","\n\t\t\t",665],["T_COMMENT","\/\/ Lock is not too old: some other process may be upgrading this post.  Bail.\n",666],["T_WHITESPACE","\t\t\t",667],["T_RETURN","return",667],["T_WHITESPACE"," ",667],["T_STRING","false",667],";",["T_WHITESPACE","\n\t\t",667],"}",["T_WHITESPACE","\n\n\t\t",668],["T_COMMENT","\/\/ Lock is too old - update it (below) and continue\n",670],["T_WHITESPACE","\t",671],"}",["T_WHITESPACE","\n\n\t",671],["T_COMMENT","\/\/ If we could get a lock, re-\"add\" the option to fire all the correct filters.\n",673],["T_WHITESPACE","\t",674],["T_STRING","update_option",674],"(",["T_WHITESPACE"," ",674],["T_VARIABLE","$lock",674],",",["T_WHITESPACE"," ",674],["T_VARIABLE","$now",674],["T_WHITESPACE"," ",674],")",";",["T_WHITESPACE","\n\n\t",674],["T_STRING","reset",676],"(",["T_WHITESPACE"," ",676],["T_VARIABLE","$revisions",676],["T_WHITESPACE"," ",676],")",";",["T_WHITESPACE","\n\t",676],["T_VARIABLE","$add_last",677],["T_WHITESPACE"," ",677],"=",["T_WHITESPACE"," ",677],["T_STRING","true",677],";",["T_WHITESPACE","\n\n\t",677],["T_DO","do",679],["T_WHITESPACE"," ",679],"{",["T_WHITESPACE","\n\t\t",679],["T_VARIABLE","$this_revision",680],["T_WHITESPACE"," ",680],"=",["T_WHITESPACE"," ",680],["T_STRING","current",680],"(",["T_WHITESPACE"," ",680],["T_VARIABLE","$revisions",680],["T_WHITESPACE"," ",680],")",";",["T_WHITESPACE","\n\t\t",680],["T_VARIABLE","$prev_revision",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_STRING","next",681],"(",["T_WHITESPACE"," ",681],["T_VARIABLE","$revisions",681],["T_WHITESPACE"," ",681],")",";",["T_WHITESPACE","\n\n\t\t",681],["T_VARIABLE","$this_revision_version",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],["T_STRING","_wp_get_post_revision_version",683],"(",["T_WHITESPACE"," ",683],["T_VARIABLE","$this_revision",683],["T_WHITESPACE"," ",683],")",";",["T_WHITESPACE","\n\n\t\t",683],["T_COMMENT","\/\/ Something terrible happened\n",685],["T_WHITESPACE","\t\t",686],["T_IF","if",686],["T_WHITESPACE"," ",686],"(",["T_WHITESPACE"," ",686],["T_STRING","false",686],["T_WHITESPACE"," ",686],["T_IS_IDENTICAL","===",686],["T_WHITESPACE"," ",686],["T_VARIABLE","$this_revision_version",686],["T_WHITESPACE"," ",686],")",["T_WHITESPACE","\n\t\t\t",686],["T_CONTINUE","continue",687],";",["T_WHITESPACE","\n\n\t\t",687],["T_COMMENT","\/\/ 1 is the latest revision version, so we're already up to date.\n",689],["T_WHITESPACE","\t\t",690],["T_COMMENT","\/\/ No need to add a copy of the post as latest revision.\n",690],["T_WHITESPACE","\t\t",691],["T_IF","if",691],["T_WHITESPACE"," ",691],"(",["T_WHITESPACE"," ",691],["T_LNUMBER","0",691],["T_WHITESPACE"," ",691],"<",["T_WHITESPACE"," ",691],["T_VARIABLE","$this_revision_version",691],["T_WHITESPACE"," ",691],")",["T_WHITESPACE"," ",691],"{",["T_WHITESPACE","\n\t\t\t",691],["T_VARIABLE","$add_last",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_STRING","false",692],";",["T_WHITESPACE","\n\t\t\t",692],["T_CONTINUE","continue",693],";",["T_WHITESPACE","\n\t\t",693],"}",["T_WHITESPACE","\n\n\t\t",694],["T_COMMENT","\/\/ Always update the revision version\n",696],["T_WHITESPACE","\t\t",697],["T_VARIABLE","$update",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],["T_ARRAY","array",697],"(",["T_WHITESPACE","\n\t\t\t",697],["T_CONSTANT_ENCAPSED_STRING","'post_name'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],["T_STRING","preg_replace",698],"(",["T_WHITESPACE"," ",698],["T_CONSTANT_ENCAPSED_STRING","'\/^(\\d+-(?:autosave|revision))[\\d-]*$\/'",698],",",["T_WHITESPACE"," ",698],["T_CONSTANT_ENCAPSED_STRING","'$1-v1'",698],",",["T_WHITESPACE"," ",698],["T_VARIABLE","$this_revision",698],["T_OBJECT_OPERATOR","->",698],["T_STRING","post_name",698],["T_WHITESPACE"," ",698],")",",",["T_WHITESPACE","\n\t\t",698],")",";",["T_WHITESPACE","\n\n\t\t",699],["T_COMMENT","\/\/ If this revision is the oldest revision of the post, i.e. no $prev_revision,\n",701],["T_WHITESPACE","\t\t",702],["T_COMMENT","\/\/ the correct post_author is probably $post->post_author, but that's only a good guess.\n",702],["T_WHITESPACE","\t\t",703],["T_COMMENT","\/\/ Update the revision version only and Leave the author as-is.\n",703],["T_WHITESPACE","\t\t",704],["T_IF","if",704],["T_WHITESPACE"," ",704],"(",["T_WHITESPACE"," ",704],["T_VARIABLE","$prev_revision",704],["T_WHITESPACE"," ",704],")",["T_WHITESPACE"," ",704],"{",["T_WHITESPACE","\n\t\t\t",704],["T_VARIABLE","$prev_revision_version",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_STRING","_wp_get_post_revision_version",705],"(",["T_WHITESPACE"," ",705],["T_VARIABLE","$prev_revision",705],["T_WHITESPACE"," ",705],")",";",["T_WHITESPACE","\n\n\t\t\t",705],["T_COMMENT","\/\/ If the previous revision is already up to date, it no longer has the information we need :(\n",707],["T_WHITESPACE","\t\t\t",708],["T_IF","if",708],["T_WHITESPACE"," ",708],"(",["T_WHITESPACE"," ",708],["T_VARIABLE","$prev_revision_version",708],["T_WHITESPACE"," ",708],"<",["T_WHITESPACE"," ",708],["T_LNUMBER","1",708],["T_WHITESPACE"," ",708],")",["T_WHITESPACE","\n\t\t\t\t",708],["T_VARIABLE","$update",709],"[",["T_CONSTANT_ENCAPSED_STRING","'post_author'",709],"]",["T_WHITESPACE"," ",709],"=",["T_WHITESPACE"," ",709],["T_VARIABLE","$prev_revision",709],["T_OBJECT_OPERATOR","->",709],["T_STRING","post_author",709],";",["T_WHITESPACE","\n\t\t",709],"}",["T_WHITESPACE","\n\n\t\t",710],["T_COMMENT","\/\/ Upgrade this revision\n",712],["T_WHITESPACE","\t\t",713],["T_VARIABLE","$result",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],["T_VARIABLE","$wpdb",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","update",713],"(",["T_WHITESPACE"," ",713],["T_VARIABLE","$wpdb",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","posts",713],",",["T_WHITESPACE"," ",713],["T_VARIABLE","$update",713],",",["T_WHITESPACE"," ",713],["T_ARRAY","array",713],"(",["T_WHITESPACE"," ",713],["T_CONSTANT_ENCAPSED_STRING","'ID'",713],["T_WHITESPACE"," ",713],["T_DOUBLE_ARROW","=>",713],["T_WHITESPACE"," ",713],["T_VARIABLE","$this_revision",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","ID",713],["T_WHITESPACE"," ",713],")",["T_WHITESPACE"," ",713],")",";",["T_WHITESPACE","\n\n\t\t",713],["T_IF","if",715],["T_WHITESPACE"," ",715],"(",["T_WHITESPACE"," ",715],["T_VARIABLE","$result",715],["T_WHITESPACE"," ",715],")",["T_WHITESPACE","\n\t\t\t",715],["T_STRING","wp_cache_delete",716],"(",["T_WHITESPACE"," ",716],["T_VARIABLE","$this_revision",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","ID",716],",",["T_WHITESPACE"," ",716],["T_CONSTANT_ENCAPSED_STRING","'posts'",716],["T_WHITESPACE"," ",716],")",";",["T_WHITESPACE","\n\n\t",716],"}",["T_WHITESPACE"," ",718],["T_WHILE","while",718],["T_WHITESPACE"," ",718],"(",["T_WHITESPACE"," ",718],["T_VARIABLE","$prev_revision",718],["T_WHITESPACE"," ",718],")",";",["T_WHITESPACE","\n\n\t",718],["T_STRING","delete_option",720],"(",["T_WHITESPACE"," ",720],["T_VARIABLE","$lock",720],["T_WHITESPACE"," ",720],")",";",["T_WHITESPACE","\n\n\t",720],["T_COMMENT","\/\/ Add a copy of the post as latest revision.\n",722],["T_WHITESPACE","\t",723],["T_IF","if",723],["T_WHITESPACE"," ",723],"(",["T_WHITESPACE"," ",723],["T_VARIABLE","$add_last",723],["T_WHITESPACE"," ",723],")",["T_WHITESPACE","\n\t\t",723],["T_STRING","wp_save_post_revision",724],"(",["T_WHITESPACE"," ",724],["T_VARIABLE","$post",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","ID",724],["T_WHITESPACE"," ",724],")",";",["T_WHITESPACE","\n\n\t",724],["T_RETURN","return",726],["T_WHITESPACE"," ",726],["T_STRING","true",726],";",["T_WHITESPACE","\n",726],"}",["T_WHITESPACE","\n",727]]
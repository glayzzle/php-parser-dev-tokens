[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * Taxonomy API: WP_Tax_Query class\n *\n * @package WordPress\n * @subpackage Taxonomy\n * @since 4.4.0\n *\/",2],["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Core class used to implement taxonomy queries for the Taxonomy API.\n *\n * Used for generating SQL clauses that filter a primary query according to object\n * taxonomy terms.\n *\n * WP_Tax_Query is a helper that allows primary query classes, such as WP_Query, to filter\n * their results by object metadata, by generating `JOIN` and `WHERE` subclauses to be\n * attached to the primary SQL query string.\n *\n * @since 3.1.0\n *\/",10],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","WP_Tax_Query",22],["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\n\t",22],["T_DOC_COMMENT","\/**\n\t * Array of taxonomy queries.\n\t *\n\t * See WP_Tax_Query::__construct() for information on tax query arguments.\n\t *\n\t * @since 3.1.0\n\t * @access public\n\t * @var array\n\t *\/",24],["T_WHITESPACE","\n\t",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$queries",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",")",";",["T_WHITESPACE","\n\n\t",33],["T_DOC_COMMENT","\/**\n\t * The relation between the queries. Can be one of 'AND' or 'OR'.\n\t *\n\t * @since 3.1.0\n\t * @access public\n\t * @var string\n\t *\/",35],["T_WHITESPACE","\n\t",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$relation",42],";",["T_WHITESPACE","\n\n\t",42],["T_DOC_COMMENT","\/**\n\t * Standard response when the query should not return any rows.\n\t *\n\t * @since 3.2.0\n\t *\n\t * @static\n\t * @access private\n\t * @var string\n\t *\/",44],["T_WHITESPACE","\n\t",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_STATIC","static",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$no_results",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'join'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","''",53],["T_WHITESPACE"," ",53],")",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'where'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'0 = 1'",53],["T_WHITESPACE"," ",53],")",["T_WHITESPACE"," ",53],")",";",["T_WHITESPACE","\n\n\t",53],["T_DOC_COMMENT","\/**\n\t * A flat list of table aliases used in the JOIN clauses.\n\t *\n\t * @since 4.1.0\n\t * @access protected\n\t * @var array\n\t *\/",55],["T_WHITESPACE","\n\t",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$table_aliases",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",")",";",["T_WHITESPACE","\n\n\t",62],["T_DOC_COMMENT","\/**\n\t * Terms and taxonomies fetched by this query.\n\t *\n\t * We store this data in a flat array because they are referenced in a\n\t * number of places by WP_Query.\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t * @var array\n\t *\/",64],["T_WHITESPACE","\n\t",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$queried_terms",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",")",";",["T_WHITESPACE","\n\n\t",74],["T_DOC_COMMENT","\/**\n\t * Database table that where the metadata's objects are stored (eg $wpdb->users).\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t * @var string\n\t *\/",76],["T_WHITESPACE","\n\t",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$primary_table",83],";",["T_WHITESPACE","\n\n\t",83],["T_DOC_COMMENT","\/**\n\t * Column in 'primary_table' that represents the ID of the object.\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t * @var string\n\t *\/",85],["T_WHITESPACE","\n\t",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$primary_id_column",92],";",["T_WHITESPACE","\n\n\t",92],["T_DOC_COMMENT","\/**\n\t * Constructor.\n\t *\n\t * @since 3.1.0\n\t * @since 4.1.0 Added support for `$operator` 'NOT EXISTS' and 'EXISTS' values.\n\t * @access public\n\t *\n\t * @param array $tax_query {\n\t *     Array of taxonomy query clauses.\n\t *\n\t *     @type string $relation Optional. The MySQL keyword used to join\n\t *                            the clauses of the query. Accepts 'AND', or 'OR'. Default 'AND'.\n\t *     @type array {\n\t *         Optional. An array of first-order clause parameters, or another fully-formed tax query.\n\t *\n\t *         @type string           $taxonomy         Taxonomy being queried. Optional when field=term_taxonomy_id.\n\t *         @type string|int|array $terms            Term or terms to filter by.\n\t *         @type string           $field            Field to match $terms against. Accepts 'term_id', 'slug',\n\t *                                                 'name', or 'term_taxonomy_id'. Default: 'term_id'.\n\t *         @type string           $operator         MySQL operator to be used with $terms in the WHERE clause.\n\t *                                                  Accepts 'AND', 'IN', 'NOT IN', 'EXISTS', 'NOT EXISTS'.\n\t *                                                  Default: 'IN'.\n\t *         @type bool             $include_children Optional. Whether to include child terms.\n\t *                                                  Requires a $taxonomy. Default: true.\n\t *     }\n\t * }\n\t *\/",94],["T_WHITESPACE","\n\t",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","__construct",121],"(",["T_WHITESPACE"," ",121],["T_VARIABLE","$tax_query",121],["T_WHITESPACE"," ",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_WHITESPACE"," ",122],["T_ISSET","isset",122],"(",["T_WHITESPACE"," ",122],["T_VARIABLE","$tax_query",122],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",122],"]",["T_WHITESPACE"," ",122],")",["T_WHITESPACE"," ",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n\t\t\t",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","relation",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","sanitize_relation",123],"(",["T_WHITESPACE"," ",123],["T_VARIABLE","$tax_query",123],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",123],"]",["T_WHITESPACE"," ",123],")",";",["T_WHITESPACE","\n\t\t",123],"}",["T_WHITESPACE"," ",124],["T_ELSE","else",124],["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n\t\t\t",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","relation",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'AND'",125],";",["T_WHITESPACE","\n\t\t",125],"}",["T_WHITESPACE","\n\n\t\t",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","queries",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","sanitize_query",128],"(",["T_WHITESPACE"," ",128],["T_VARIABLE","$tax_query",128],["T_WHITESPACE"," ",128],")",";",["T_WHITESPACE","\n\t",128],"}",["T_WHITESPACE","\n\n\t",129],["T_DOC_COMMENT","\/**\n\t * Ensure the 'tax_query' argument passed to the class constructor is well-formed.\n\t *\n\t * Ensures that each query-level clause has a 'relation' key, and that\n\t * each first-order clause contains all the necessary keys from `$defaults`.\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t *\n\t * @param array $queries Array of queries clauses.\n\t * @return array Sanitized array of query clauses.\n\t *\/",131],["T_WHITESPACE","\n\t",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","sanitize_query",143],"(",["T_WHITESPACE"," ",143],["T_VARIABLE","$queries",143],["T_WHITESPACE"," ",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n\t\t",143],["T_VARIABLE","$cleaned_query",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n\n\t\t",144],["T_VARIABLE","$defaults",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_WHITESPACE","\n\t\t\t",146],["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],",",["T_WHITESPACE","\n\t\t\t",147],["T_CONSTANT_ENCAPSED_STRING","'terms'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",")",",",["T_WHITESPACE","\n\t\t\t",148],["T_CONSTANT_ENCAPSED_STRING","'field'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'term_id'",149],",",["T_WHITESPACE","\n\t\t\t",149],["T_CONSTANT_ENCAPSED_STRING","'operator'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'IN'",150],",",["T_WHITESPACE","\n\t\t\t",150],["T_CONSTANT_ENCAPSED_STRING","'include_children'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_STRING","true",151],",",["T_WHITESPACE","\n\t\t",151],")",";",["T_WHITESPACE","\n\n\t\t",152],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_WHITESPACE"," ",154],["T_VARIABLE","$queries",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$key",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$query",154],["T_WHITESPACE"," ",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n\t\t\t",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'relation'",155],["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$key",155],["T_WHITESPACE"," ",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n\t\t\t\t",155],["T_VARIABLE","$cleaned_query",156],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","sanitize_relation",156],"(",["T_WHITESPACE"," ",156],["T_VARIABLE","$query",156],["T_WHITESPACE"," ",156],")",";",["T_WHITESPACE","\n\n\t\t\t",156],["T_COMMENT","\/\/ First-order clause.\n",158],["T_WHITESPACE","\t\t\t",159],"}",["T_WHITESPACE"," ",159],["T_ELSEIF","elseif",159],["T_WHITESPACE"," ",159],"(",["T_WHITESPACE"," ",159],["T_STRING","self",159],["T_DOUBLE_COLON","::",159],["T_STRING","is_first_order_clause",159],"(",["T_WHITESPACE"," ",159],["T_VARIABLE","$query",159],["T_WHITESPACE"," ",159],")",["T_WHITESPACE"," ",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n\n\t\t\t\t",159],["T_VARIABLE","$cleaned_clause",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","array_merge",161],"(",["T_WHITESPACE"," ",161],["T_VARIABLE","$defaults",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$query",161],["T_WHITESPACE"," ",161],")",";",["T_WHITESPACE","\n\t\t\t\t",161],["T_VARIABLE","$cleaned_clause",162],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",162],"]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY_CAST","(array)",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$cleaned_clause",162],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",162],"]",";",["T_WHITESPACE","\n\t\t\t\t",162],["T_VARIABLE","$cleaned_query",163],"[","]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$cleaned_clause",163],";",["T_WHITESPACE","\n\n\t\t\t\t",163],["T_COMMENT","\/*\n\t\t\t\t * Keep a copy of the clause in the flate\n\t\t\t\t * $queried_terms array, for use in WP_Query.\n\t\t\t\t *\/",165],["T_WHITESPACE","\n\t\t\t\t",168],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_WHITESPACE"," ",169],"!",["T_WHITESPACE"," ",169],["T_EMPTY","empty",169],"(",["T_WHITESPACE"," ",169],["T_VARIABLE","$cleaned_clause",169],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",169],"]",["T_WHITESPACE"," ",169],")",["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'NOT IN'",169],["T_WHITESPACE"," ",169],["T_IS_NOT_IDENTICAL","!==",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$cleaned_clause",169],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",169],"]",["T_WHITESPACE"," ",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n\t\t\t\t\t",169],["T_VARIABLE","$taxonomy",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$cleaned_clause",170],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",170],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_WHITESPACE"," ",171],"!",["T_WHITESPACE"," ",171],["T_ISSET","isset",171],"(",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","queried_terms",171],"[",["T_WHITESPACE"," ",171],["T_VARIABLE","$taxonomy",171],["T_WHITESPACE"," ",171],"]",["T_WHITESPACE"," ",171],")",["T_WHITESPACE"," ",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","queried_terms",172],"[",["T_WHITESPACE"," ",172],["T_VARIABLE","$taxonomy",172],["T_WHITESPACE"," ",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",")",";",["T_WHITESPACE","\n\t\t\t\t\t",172],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",173],["T_COMMENT","\/*\n\t\t\t\t\t * Backward compatibility: Only store the first\n\t\t\t\t\t * 'terms' and 'field' found for a given taxonomy.\n\t\t\t\t\t *\/",175],["T_WHITESPACE","\n\t\t\t\t\t",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_WHITESPACE"," ",179],"!",["T_WHITESPACE"," ",179],["T_EMPTY","empty",179],"(",["T_WHITESPACE"," ",179],["T_VARIABLE","$cleaned_clause",179],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",179],"]",["T_WHITESPACE"," ",179],")",["T_WHITESPACE"," ",179],["T_BOOLEAN_AND","&&",179],["T_WHITESPACE"," ",179],"!",["T_WHITESPACE"," ",179],["T_ISSET","isset",179],"(",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","queried_terms",179],"[",["T_WHITESPACE"," ",179],["T_VARIABLE","$taxonomy",179],["T_WHITESPACE"," ",179],"]","[",["T_CONSTANT_ENCAPSED_STRING","'terms'",179],"]",["T_WHITESPACE"," ",179],")",["T_WHITESPACE"," ",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","queried_terms",180],"[",["T_WHITESPACE"," ",180],["T_VARIABLE","$taxonomy",180],["T_WHITESPACE"," ",180],"]","[",["T_CONSTANT_ENCAPSED_STRING","'terms'",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$cleaned_clause",180],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",180],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",180],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",181],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_WHITESPACE"," ",183],"!",["T_WHITESPACE"," ",183],["T_EMPTY","empty",183],"(",["T_WHITESPACE"," ",183],["T_VARIABLE","$cleaned_clause",183],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",183],"]",["T_WHITESPACE"," ",183],")",["T_WHITESPACE"," ",183],["T_BOOLEAN_AND","&&",183],["T_WHITESPACE"," ",183],"!",["T_WHITESPACE"," ",183],["T_ISSET","isset",183],"(",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","queried_terms",183],"[",["T_WHITESPACE"," ",183],["T_VARIABLE","$taxonomy",183],["T_WHITESPACE"," ",183],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",183],"]",["T_WHITESPACE"," ",183],")",["T_WHITESPACE"," ",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","queried_terms",184],"[",["T_WHITESPACE"," ",184],["T_VARIABLE","$taxonomy",184],["T_WHITESPACE"," ",184],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",184],"]",["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$cleaned_clause",184],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",184],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",184],"}",["T_WHITESPACE","\n\t\t\t\t",185],"}",["T_WHITESPACE","\n\n\t\t\t",186],["T_COMMENT","\/\/ Otherwise, it's a nested query, so we recurse.\n",188],["T_WHITESPACE","\t\t\t",189],"}",["T_WHITESPACE"," ",189],["T_ELSEIF","elseif",189],["T_WHITESPACE"," ",189],"(",["T_WHITESPACE"," ",189],["T_STRING","is_array",189],"(",["T_WHITESPACE"," ",189],["T_VARIABLE","$query",189],["T_WHITESPACE"," ",189],")",["T_WHITESPACE"," ",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n\t\t\t\t",189],["T_VARIABLE","$cleaned_subquery",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","sanitize_query",190],"(",["T_WHITESPACE"," ",190],["T_VARIABLE","$query",190],["T_WHITESPACE"," ",190],")",";",["T_WHITESPACE","\n\n\t\t\t\t",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_WHITESPACE"," ",192],"!",["T_WHITESPACE"," ",192],["T_EMPTY","empty",192],"(",["T_WHITESPACE"," ",192],["T_VARIABLE","$cleaned_subquery",192],["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n\t\t\t\t\t",192],["T_COMMENT","\/\/ All queries with children must have a relation.\n",193],["T_WHITESPACE","\t\t\t\t\t",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_WHITESPACE"," ",194],"!",["T_WHITESPACE"," ",194],["T_ISSET","isset",194],"(",["T_WHITESPACE"," ",194],["T_VARIABLE","$cleaned_subquery",194],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",194],"]",["T_WHITESPACE"," ",194],")",["T_WHITESPACE"," ",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",194],["T_VARIABLE","$cleaned_subquery",195],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",195],"]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'AND'",195],";",["T_WHITESPACE","\n\t\t\t\t\t",195],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",196],["T_VARIABLE","$cleaned_query",198],"[","]",["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$cleaned_subquery",198],";",["T_WHITESPACE","\n\t\t\t\t",198],"}",["T_WHITESPACE","\n\t\t\t",199],"}",["T_WHITESPACE","\n\t\t",200],"}",["T_WHITESPACE","\n\n\t\t",201],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$cleaned_query",203],";",["T_WHITESPACE","\n\t",203],"}",["T_WHITESPACE","\n\n\t",204],["T_DOC_COMMENT","\/**\n\t * Sanitize a 'relation' operator.\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t *\n\t * @param string $relation Raw relation key from the query argument.\n\t * @return string Sanitized relation ('AND' or 'OR').\n\t *\/",206],["T_WHITESPACE","\n\t",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","sanitize_relation",215],"(",["T_WHITESPACE"," ",215],["T_VARIABLE","$relation",215],["T_WHITESPACE"," ",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n\t\t",215],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'OR'",216],["T_WHITESPACE"," ",216],["T_IS_IDENTICAL","===",216],["T_WHITESPACE"," ",216],["T_STRING","strtoupper",216],"(",["T_WHITESPACE"," ",216],["T_VARIABLE","$relation",216],["T_WHITESPACE"," ",216],")",["T_WHITESPACE"," ",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n\t\t\t",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'OR'",217],";",["T_WHITESPACE","\n\t\t",217],"}",["T_WHITESPACE"," ",218],["T_ELSE","else",218],["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n\t\t\t",218],["T_RETURN","return",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'AND'",219],";",["T_WHITESPACE","\n\t\t",219],"}",["T_WHITESPACE","\n\t",220],"}",["T_WHITESPACE","\n\n\t",221],["T_DOC_COMMENT","\/**\n\t * Determine whether a clause is first-order.\n\t *\n\t * A \"first-order\" clause is one that contains any of the first-order\n\t * clause keys ('terms', 'taxonomy', 'include_children', 'field',\n\t * 'operator'). An empty clause also counts as a first-order clause,\n\t * for backward compatibility. Any clause that doesn't meet this is\n\t * determined, by process of elimination, to be a higher-order query.\n\t *\n\t * @since 4.1.0\n\t *\n\t * @static\n\t * @access protected\n\t *\n\t * @param array $query Tax query arguments.\n\t * @return bool Whether the query clause is a first-order clause.\n\t *\/",223],["T_WHITESPACE","\n\t",239],["T_PROTECTED","protected",240],["T_WHITESPACE"," ",240],["T_STATIC","static",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","is_first_order_clause",240],"(",["T_WHITESPACE"," ",240],["T_VARIABLE","$query",240],["T_WHITESPACE"," ",240],")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n\t\t",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_STRING","is_array",241],"(",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_AND","&&",241],["T_WHITESPACE"," ",241],"(",["T_WHITESPACE"," ",241],["T_EMPTY","empty",241],"(",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","array_key_exists",241],"(",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'terms'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","array_key_exists",241],"(",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","array_key_exists",241],"(",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'include_children'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","array_key_exists",241],"(",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'field'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_STRING","array_key_exists",241],"(",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'operator'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$query",241],["T_WHITESPACE"," ",241],")",["T_WHITESPACE"," ",241],")",";",["T_WHITESPACE","\n\t",241],"}",["T_WHITESPACE","\n\n\t",242],["T_DOC_COMMENT","\/**\n\t * Generates SQL clauses to be appended to a main query.\n\t *\n\t * @since 3.1.0\n\t *\n\t * @static\n\t * @access public\n\t *\n\t * @param string $primary_table     Database table where the object being filtered is stored (eg wp_users).\n\t * @param string $primary_id_column ID column for the filtered object in $primary_table.\n\t * @return array {\n\t *     Array containing JOIN and WHERE SQL clauses to append to the main query.\n\t *\n\t *     @type string $join  SQL fragment to append to the main JOIN clause.\n\t *     @type string $where SQL fragment to append to the main WHERE clause.\n\t * }\n\t *\/",244],["T_WHITESPACE","\n\t",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","get_sql",261],"(",["T_WHITESPACE"," ",261],["T_VARIABLE","$primary_table",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$primary_id_column",261],["T_WHITESPACE"," ",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n\t\t",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","primary_table",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$primary_table",262],";",["T_WHITESPACE","\n\t\t",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","primary_id_column",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$primary_id_column",263],";",["T_WHITESPACE","\n\n\t\t",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","get_sql_clauses",265],"(",")",";",["T_WHITESPACE","\n\t",265],"}",["T_WHITESPACE","\n\n\t",266],["T_DOC_COMMENT","\/**\n\t * Generate SQL clauses to be appended to a main query.\n\t *\n\t * Called by the public WP_Tax_Query::get_sql(), this method\n\t * is abstracted out to maintain parity with the other Query classes.\n\t *\n\t * @since 4.1.0\n\t * @access protected\n\t *\n\t * @return array {\n\t *     Array containing JOIN and WHERE SQL clauses to append to the main query.\n\t *\n\t *     @type string $join  SQL fragment to append to the main JOIN clause.\n\t *     @type string $where SQL fragment to append to the main WHERE clause.\n\t * }\n\t *\/",268],["T_WHITESPACE","\n\t",283],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","get_sql_clauses",284],"(",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n\t\t",284],["T_COMMENT","\/*\n\t\t * $queries are passed by reference to get_sql_for_query() for recursion.\n\t\t * To keep $this->queries unaltered, pass a copy.\n\t\t *\/",285],["T_WHITESPACE","\n\t\t",288],["T_VARIABLE","$queries",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","queries",289],";",["T_WHITESPACE","\n\t\t",289],["T_VARIABLE","$sql",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","get_sql_for_query",290],"(",["T_WHITESPACE"," ",290],["T_VARIABLE","$queries",290],["T_WHITESPACE"," ",290],")",";",["T_WHITESPACE","\n\n\t\t",290],["T_IF","if",292],["T_WHITESPACE"," ",292],"(",["T_WHITESPACE"," ",292],"!",["T_WHITESPACE"," ",292],["T_EMPTY","empty",292],"(",["T_WHITESPACE"," ",292],["T_VARIABLE","$sql",292],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",292],"]",["T_WHITESPACE"," ",292],")",["T_WHITESPACE"," ",292],")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n\t\t\t",292],["T_VARIABLE","$sql",293],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",293],"]",["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","' AND '",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_VARIABLE","$sql",293],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",293],"]",";",["T_WHITESPACE","\n\t\t",293],"}",["T_WHITESPACE","\n\n\t\t",294],["T_RETURN","return",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$sql",296],";",["T_WHITESPACE","\n\t",296],"}",["T_WHITESPACE","\n\n\t",297],["T_DOC_COMMENT","\/**\n\t * Generate SQL clauses for a single query array.\n\t *\n\t * If nested subqueries are found, this method recurses the tree to\n\t * produce the properly nested SQL.\n\t *\n\t * @since 4.1.0\n\t * @access protected\n\t *\n\t * @param array $query Query to parse, passed by reference.\n\t * @param int   $depth Optional. Number of tree levels deep we currently are.\n\t *                     Used to calculate indentation. Default 0.\n\t * @return array {\n\t *     Array containing JOIN and WHERE SQL clauses to append to a single query array.\n\t *\n\t *     @type string $join  SQL fragment to append to the main JOIN clause.\n\t *     @type string $where SQL fragment to append to the main WHERE clause.\n\t * }\n\t *\/",299],["T_WHITESPACE","\n\t",317],["T_PROTECTED","protected",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","get_sql_for_query",318],"(",["T_WHITESPACE"," ",318],"&",["T_VARIABLE","$query",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$depth",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_LNUMBER","0",318],["T_WHITESPACE"," ",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t",318],["T_VARIABLE","$sql_chunks",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_ARRAY","array",319],"(",["T_WHITESPACE","\n\t\t\t",319],["T_CONSTANT_ENCAPSED_STRING","'join'",320],["T_WHITESPACE","  ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",")",",",["T_WHITESPACE","\n\t\t\t",320],["T_CONSTANT_ENCAPSED_STRING","'where'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_ARRAY","array",321],"(",")",",",["T_WHITESPACE","\n\t\t",321],")",";",["T_WHITESPACE","\n\n\t\t",322],["T_VARIABLE","$sql",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_ARRAY","array",324],"(",["T_WHITESPACE","\n\t\t\t",324],["T_CONSTANT_ENCAPSED_STRING","'join'",325],["T_WHITESPACE","  ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","''",325],",",["T_WHITESPACE","\n\t\t\t",325],["T_CONSTANT_ENCAPSED_STRING","'where'",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","''",326],",",["T_WHITESPACE","\n\t\t",326],")",";",["T_WHITESPACE","\n\n\t\t",327],["T_VARIABLE","$indent",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","''",329],";",["T_WHITESPACE","\n\t\t",329],["T_FOR","for",330],["T_WHITESPACE"," ",330],"(",["T_WHITESPACE"," ",330],["T_VARIABLE","$i",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_LNUMBER","0",330],";",["T_WHITESPACE"," ",330],["T_VARIABLE","$i",330],["T_WHITESPACE"," ",330],"<",["T_WHITESPACE"," ",330],["T_VARIABLE","$depth",330],";",["T_WHITESPACE"," ",330],["T_VARIABLE","$i",330],["T_INC","++",330],["T_WHITESPACE"," ",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n\t\t\t",330],["T_VARIABLE","$indent",331],["T_WHITESPACE"," ",331],["T_CONCAT_EQUAL",".=",331],["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","\"  \"",331],";",["T_WHITESPACE","\n\t\t",331],"}",["T_WHITESPACE","\n\n\t\t",332],["T_FOREACH","foreach",334],["T_WHITESPACE"," ",334],"(",["T_WHITESPACE"," ",334],["T_VARIABLE","$query",334],["T_WHITESPACE"," ",334],["T_AS","as",334],["T_WHITESPACE"," ",334],["T_VARIABLE","$key",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],"&",["T_VARIABLE","$clause",334],["T_WHITESPACE"," ",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n\t\t\t",334],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'relation'",335],["T_WHITESPACE"," ",335],["T_IS_IDENTICAL","===",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$key",335],["T_WHITESPACE"," ",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n\t\t\t\t",335],["T_VARIABLE","$relation",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$query",336],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",336],"]",";",["T_WHITESPACE","\n\t\t\t",336],"}",["T_WHITESPACE"," ",337],["T_ELSEIF","elseif",337],["T_WHITESPACE"," ",337],"(",["T_WHITESPACE"," ",337],["T_STRING","is_array",337],"(",["T_WHITESPACE"," ",337],["T_VARIABLE","$clause",337],["T_WHITESPACE"," ",337],")",["T_WHITESPACE"," ",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n\n\t\t\t\t",337],["T_COMMENT","\/\/ This is a first-order clause.\n",339],["T_WHITESPACE","\t\t\t\t",340],["T_IF","if",340],["T_WHITESPACE"," ",340],"(",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","is_first_order_clause",340],"(",["T_WHITESPACE"," ",340],["T_VARIABLE","$clause",340],["T_WHITESPACE"," ",340],")",["T_WHITESPACE"," ",340],")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n\t\t\t\t\t",340],["T_VARIABLE","$clause_sql",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","get_sql_for_clause",341],"(",["T_WHITESPACE"," ",341],["T_VARIABLE","$clause",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$query",341],["T_WHITESPACE"," ",341],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",341],["T_VARIABLE","$where_count",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_STRING","count",343],"(",["T_WHITESPACE"," ",343],["T_VARIABLE","$clause_sql",343],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",343],"]",["T_WHITESPACE"," ",343],")",";",["T_WHITESPACE","\n\t\t\t\t\t",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_WHITESPACE"," ",344],"!",["T_WHITESPACE"," ",344],["T_VARIABLE","$where_count",344],["T_WHITESPACE"," ",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",344],["T_VARIABLE","$sql_chunks",345],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",345],"]","[","]",["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","''",345],";",["T_WHITESPACE","\n\t\t\t\t\t",345],"}",["T_WHITESPACE"," ",346],["T_ELSEIF","elseif",346],["T_WHITESPACE"," ",346],"(",["T_WHITESPACE"," ",346],["T_LNUMBER","1",346],["T_WHITESPACE"," ",346],["T_IS_IDENTICAL","===",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$where_count",346],["T_WHITESPACE"," ",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",346],["T_VARIABLE","$sql_chunks",347],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",347],"]","[","]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$clause_sql",347],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",347],"]","[",["T_LNUMBER","0",347],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",347],"}",["T_WHITESPACE"," ",348],["T_ELSE","else",348],["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n\t\t\t\t\t\t",348],["T_VARIABLE","$sql_chunks",349],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",349],"]","[","]",["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'( '",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_STRING","implode",349],"(",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","' AND '",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$clause_sql",349],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",349],"]",["T_WHITESPACE"," ",349],")",["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","' )'",349],";",["T_WHITESPACE","\n\t\t\t\t\t",349],"}",["T_WHITESPACE","\n\n\t\t\t\t\t",350],["T_VARIABLE","$sql_chunks",352],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",352],"]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","array_merge",352],"(",["T_WHITESPACE"," ",352],["T_VARIABLE","$sql_chunks",352],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",352],"]",",",["T_WHITESPACE"," ",352],["T_VARIABLE","$clause_sql",352],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",352],"]",["T_WHITESPACE"," ",352],")",";",["T_WHITESPACE","\n\t\t\t\t",352],["T_COMMENT","\/\/ This is a subquery, so we recurse.\n",353],["T_WHITESPACE","\t\t\t\t",354],"}",["T_WHITESPACE"," ",354],["T_ELSE","else",354],["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n\t\t\t\t\t",354],["T_VARIABLE","$clause_sql",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","get_sql_for_query",355],"(",["T_WHITESPACE"," ",355],["T_VARIABLE","$clause",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$depth",355],["T_WHITESPACE"," ",355],"+",["T_WHITESPACE"," ",355],["T_LNUMBER","1",355],["T_WHITESPACE"," ",355],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",355],["T_VARIABLE","$sql_chunks",357],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",357],"]","[","]",["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$clause_sql",357],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",357],"]",";",["T_WHITESPACE","\n\t\t\t\t\t",357],["T_VARIABLE","$sql_chunks",358],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",358],"]","[","]",["T_WHITESPACE","  ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$clause_sql",358],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",358],"]",";",["T_WHITESPACE","\n\t\t\t\t",358],"}",["T_WHITESPACE","\n\t\t\t",359],"}",["T_WHITESPACE","\n\t\t",360],"}",["T_WHITESPACE","\n\n\t\t",361],["T_COMMENT","\/\/ Filter to remove empties.\n",363],["T_WHITESPACE","\t\t",364],["T_VARIABLE","$sql_chunks",364],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",364],"]",["T_WHITESPACE","  ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","array_filter",364],"(",["T_WHITESPACE"," ",364],["T_VARIABLE","$sql_chunks",364],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",364],"]",["T_WHITESPACE"," ",364],")",";",["T_WHITESPACE","\n\t\t",364],["T_VARIABLE","$sql_chunks",365],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",365],"]",["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","array_filter",365],"(",["T_WHITESPACE"," ",365],["T_VARIABLE","$sql_chunks",365],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",365],"]",["T_WHITESPACE"," ",365],")",";",["T_WHITESPACE","\n\n\t\t",365],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_WHITESPACE"," ",367],["T_EMPTY","empty",367],"(",["T_WHITESPACE"," ",367],["T_VARIABLE","$relation",367],["T_WHITESPACE"," ",367],")",["T_WHITESPACE"," ",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n\t\t\t",367],["T_VARIABLE","$relation",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'AND'",368],";",["T_WHITESPACE","\n\t\t",368],"}",["T_WHITESPACE","\n\n\t\t",369],["T_COMMENT","\/\/ Filter duplicate JOIN clauses and combine into a single string.\n",371],["T_WHITESPACE","\t\t",372],["T_IF","if",372],["T_WHITESPACE"," ",372],"(",["T_WHITESPACE"," ",372],"!",["T_WHITESPACE"," ",372],["T_EMPTY","empty",372],"(",["T_WHITESPACE"," ",372],["T_VARIABLE","$sql_chunks",372],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",372],"]",["T_WHITESPACE"," ",372],")",["T_WHITESPACE"," ",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n\t\t\t",372],["T_VARIABLE","$sql",373],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",373],"]",["T_WHITESPACE"," ",373],"=",["T_WHITESPACE"," ",373],["T_STRING","implode",373],"(",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","' '",373],",",["T_WHITESPACE"," ",373],["T_STRING","array_unique",373],"(",["T_WHITESPACE"," ",373],["T_VARIABLE","$sql_chunks",373],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",373],"]",["T_WHITESPACE"," ",373],")",["T_WHITESPACE"," ",373],")",";",["T_WHITESPACE","\n\t\t",373],"}",["T_WHITESPACE","\n\n\t\t",374],["T_COMMENT","\/\/ Generate a single WHERE clause with proper brackets and indentation.\n",376],["T_WHITESPACE","\t\t",377],["T_IF","if",377],["T_WHITESPACE"," ",377],"(",["T_WHITESPACE"," ",377],"!",["T_WHITESPACE"," ",377],["T_EMPTY","empty",377],"(",["T_WHITESPACE"," ",377],["T_VARIABLE","$sql_chunks",377],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",377],"]",["T_WHITESPACE"," ",377],")",["T_WHITESPACE"," ",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n\t\t\t",377],["T_VARIABLE","$sql",378],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",378],"]",["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'( '",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\n  \"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$indent",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_STRING","implode",378],"(",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","' '",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\n  \"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$indent",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$relation",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","' '",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\n  \"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$indent",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$sql_chunks",378],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",378],"]",["T_WHITESPACE"," ",378],")",["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$indent",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","')'",378],";",["T_WHITESPACE","\n\t\t",378],"}",["T_WHITESPACE","\n\n\t\t",379],["T_RETURN","return",381],["T_WHITESPACE"," ",381],["T_VARIABLE","$sql",381],";",["T_WHITESPACE","\n\t",381],"}",["T_WHITESPACE","\n\n\t",382],["T_DOC_COMMENT","\/**\n\t * Generate SQL JOIN and WHERE clauses for a \"first-order\" query clause.\n\t *\n\t * @since 4.1.0\n\t * @access public\n\t *\n\t * @global wpdb $wpdb The WordPress database abstraction object.\n\t *\n\t * @param array $clause       Query clause, passed by reference.\n\t * @param array $parent_query Parent query array.\n\t * @return array {\n\t *     Array containing JOIN and WHERE SQL clauses to append to a first-order query.\n\t *\n\t *     @type string $join  SQL fragment to append to the main JOIN clause.\n\t *     @type string $where SQL fragment to append to the main WHERE clause.\n\t * }\n\t *\/",384],["T_WHITESPACE","\n\t",400],["T_PUBLIC","public",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","get_sql_for_clause",401],"(",["T_WHITESPACE"," ",401],"&",["T_VARIABLE","$clause",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$parent_query",401],["T_WHITESPACE"," ",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n\t\t",401],["T_GLOBAL","global",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$wpdb",402],";",["T_WHITESPACE","\n\n\t\t",402],["T_VARIABLE","$sql",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_ARRAY","array",404],"(",["T_WHITESPACE","\n\t\t\t",404],["T_CONSTANT_ENCAPSED_STRING","'where'",405],["T_WHITESPACE"," ",405],["T_DOUBLE_ARROW","=>",405],["T_WHITESPACE"," ",405],["T_ARRAY","array",405],"(",")",",",["T_WHITESPACE","\n\t\t\t",405],["T_CONSTANT_ENCAPSED_STRING","'join'",406],["T_WHITESPACE","  ",406],["T_DOUBLE_ARROW","=>",406],["T_WHITESPACE"," ",406],["T_ARRAY","array",406],"(",")",",",["T_WHITESPACE","\n\t\t",406],")",";",["T_WHITESPACE","\n\n\t\t",407],["T_VARIABLE","$join",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$where",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","''",409],";",["T_WHITESPACE","\n\n\t\t",409],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","clean_query",411],"(",["T_WHITESPACE"," ",411],["T_VARIABLE","$clause",411],["T_WHITESPACE"," ",411],")",";",["T_WHITESPACE","\n\n\t\t",411],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_WHITESPACE"," ",413],["T_STRING","is_wp_error",413],"(",["T_WHITESPACE"," ",413],["T_VARIABLE","$clause",413],["T_WHITESPACE"," ",413],")",["T_WHITESPACE"," ",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n\t\t\t",413],["T_RETURN","return",414],["T_WHITESPACE"," ",414],["T_STRING","self",414],["T_DOUBLE_COLON","::",414],["T_VARIABLE","$no_results",414],";",["T_WHITESPACE","\n\t\t",414],"}",["T_WHITESPACE","\n\n\t\t",415],["T_VARIABLE","$terms",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$clause",417],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",417],"]",";",["T_WHITESPACE","\n\t\t",417],["T_VARIABLE","$operator",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_STRING","strtoupper",418],"(",["T_WHITESPACE"," ",418],["T_VARIABLE","$clause",418],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",418],"]",["T_WHITESPACE"," ",418],")",";",["T_WHITESPACE","\n\n\t\t",418],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'IN'",420],["T_WHITESPACE"," ",420],["T_IS_EQUAL","==",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$operator",420],["T_WHITESPACE"," ",420],")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n\n\t\t\t",420],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_WHITESPACE"," ",422],["T_EMPTY","empty",422],"(",["T_WHITESPACE"," ",422],["T_VARIABLE","$terms",422],["T_WHITESPACE"," ",422],")",["T_WHITESPACE"," ",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n\t\t\t\t",422],["T_RETURN","return",423],["T_WHITESPACE"," ",423],["T_STRING","self",423],["T_DOUBLE_COLON","::",423],["T_VARIABLE","$no_results",423],";",["T_WHITESPACE","\n\t\t\t",423],"}",["T_WHITESPACE","\n\n\t\t\t",424],["T_VARIABLE","$terms",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_STRING","implode",426],"(",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","','",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$terms",426],["T_WHITESPACE"," ",426],")",";",["T_WHITESPACE","\n\n\t\t\t",426],["T_COMMENT","\/*\n\t\t\t * Before creating another table join, see if this clause has a\n\t\t\t * sibling with an existing join that can be shared.\n\t\t\t *\/",428],["T_WHITESPACE","\n\t\t\t",431],["T_VARIABLE","$alias",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","find_compatible_table_alias",432],"(",["T_WHITESPACE"," ",432],["T_VARIABLE","$clause",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$parent_query",432],["T_WHITESPACE"," ",432],")",";",["T_WHITESPACE","\n\t\t\t",432],["T_IF","if",433],["T_WHITESPACE"," ",433],"(",["T_WHITESPACE"," ",433],["T_STRING","false",433],["T_WHITESPACE"," ",433],["T_IS_IDENTICAL","===",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$alias",433],["T_WHITESPACE"," ",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n\t\t\t\t",433],["T_VARIABLE","$i",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_STRING","count",434],"(",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","table_aliases",434],["T_WHITESPACE"," ",434],")",";",["T_WHITESPACE","\n\t\t\t\t",434],["T_VARIABLE","$alias",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_VARIABLE","$i",435],["T_WHITESPACE"," ",435],"?",["T_WHITESPACE"," ",435],["T_CONSTANT_ENCAPSED_STRING","'tt'",435],["T_WHITESPACE"," ",435],".",["T_WHITESPACE"," ",435],["T_VARIABLE","$i",435],["T_WHITESPACE"," ",435],":",["T_WHITESPACE"," ",435],["T_VARIABLE","$wpdb",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","term_relationships",435],";",["T_WHITESPACE","\n\n\t\t\t\t",435],["T_COMMENT","\/\/ Store the alias as part of a flat array to build future iterators.\n",437],["T_WHITESPACE","\t\t\t\t",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","table_aliases",438],"[","]",["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_VARIABLE","$alias",438],";",["T_WHITESPACE","\n\n\t\t\t\t",438],["T_COMMENT","\/\/ Store the alias with this clause, so later siblings can use it.\n",440],["T_WHITESPACE","\t\t\t\t",441],["T_VARIABLE","$clause",441],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",441],"]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$alias",441],";",["T_WHITESPACE","\n\n\t\t\t\t",441],["T_VARIABLE","$join",443],["T_WHITESPACE"," ",443],["T_CONCAT_EQUAL",".=",443],["T_WHITESPACE"," ",443],"\"",["T_ENCAPSED_AND_WHITESPACE"," LEFT JOIN ",443],["T_VARIABLE","$wpdb",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","term_relationships",443],"\"",";",["T_WHITESPACE","\n\t\t\t\t",443],["T_VARIABLE","$join",444],["T_WHITESPACE"," ",444],["T_CONCAT_EQUAL",".=",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$i",444],["T_WHITESPACE"," ",444],"?",["T_WHITESPACE"," ",444],"\"",["T_ENCAPSED_AND_WHITESPACE"," AS ",444],["T_VARIABLE","$alias",444],"\"",["T_WHITESPACE"," ",444],":",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","''",444],";",["T_WHITESPACE","\n\t\t\t\t",444],["T_VARIABLE","$join",445],["T_WHITESPACE"," ",445],["T_CONCAT_EQUAL",".=",445],["T_WHITESPACE"," ",445],"\"",["T_ENCAPSED_AND_WHITESPACE"," ON (",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","primary_table",445],["T_ENCAPSED_AND_WHITESPACE",".",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","primary_id_column",445],["T_ENCAPSED_AND_WHITESPACE"," = ",445],["T_VARIABLE","$alias",445],["T_ENCAPSED_AND_WHITESPACE",".object_id)",445],"\"",";",["T_WHITESPACE","\n\t\t\t",445],"}",["T_WHITESPACE","\n\n\n\t\t\t",446],["T_VARIABLE","$where",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],"\"",["T_VARIABLE","$alias",449],["T_ENCAPSED_AND_WHITESPACE",".term_taxonomy_id ",449],["T_VARIABLE","$operator",449],["T_ENCAPSED_AND_WHITESPACE"," (",449],["T_VARIABLE","$terms",449],["T_ENCAPSED_AND_WHITESPACE",")",449],"\"",";",["T_WHITESPACE","\n\n\t\t",449],"}",["T_WHITESPACE"," ",451],["T_ELSEIF","elseif",451],["T_WHITESPACE"," ",451],"(",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'NOT IN'",451],["T_WHITESPACE"," ",451],["T_IS_EQUAL","==",451],["T_WHITESPACE"," ",451],["T_VARIABLE","$operator",451],["T_WHITESPACE"," ",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n\n\t\t\t",451],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_WHITESPACE"," ",453],["T_EMPTY","empty",453],"(",["T_WHITESPACE"," ",453],["T_VARIABLE","$terms",453],["T_WHITESPACE"," ",453],")",["T_WHITESPACE"," ",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n\t\t\t\t",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$sql",454],";",["T_WHITESPACE","\n\t\t\t",454],"}",["T_WHITESPACE","\n\n\t\t\t",455],["T_VARIABLE","$terms",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_STRING","implode",457],"(",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","','",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$terms",457],["T_WHITESPACE"," ",457],")",";",["T_WHITESPACE","\n\n\t\t\t",457],["T_VARIABLE","$where",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],"\"",["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","primary_table",459],["T_ENCAPSED_AND_WHITESPACE",".",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","primary_id_column",459],["T_ENCAPSED_AND_WHITESPACE"," NOT IN (\n\t\t\t\tSELECT object_id\n\t\t\t\tFROM ",459],["T_VARIABLE","$wpdb",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","term_relationships",461],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\tWHERE term_taxonomy_id IN (",461],["T_VARIABLE","$terms",462],["T_ENCAPSED_AND_WHITESPACE",")\n\t\t\t)",462],"\"",";",["T_WHITESPACE","\n\n\t\t",463],"}",["T_WHITESPACE"," ",465],["T_ELSEIF","elseif",465],["T_WHITESPACE"," ",465],"(",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'AND'",465],["T_WHITESPACE"," ",465],["T_IS_EQUAL","==",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$operator",465],["T_WHITESPACE"," ",465],")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n\n\t\t\t",465],["T_IF","if",467],["T_WHITESPACE"," ",467],"(",["T_WHITESPACE"," ",467],["T_EMPTY","empty",467],"(",["T_WHITESPACE"," ",467],["T_VARIABLE","$terms",467],["T_WHITESPACE"," ",467],")",["T_WHITESPACE"," ",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n\t\t\t\t",467],["T_RETURN","return",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$sql",468],";",["T_WHITESPACE","\n\t\t\t",468],"}",["T_WHITESPACE","\n\n\t\t\t",469],["T_VARIABLE","$num_terms",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_STRING","count",471],"(",["T_WHITESPACE"," ",471],["T_VARIABLE","$terms",471],["T_WHITESPACE"," ",471],")",";",["T_WHITESPACE","\n\n\t\t\t",471],["T_VARIABLE","$terms",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_STRING","implode",473],"(",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","','",473],",",["T_WHITESPACE"," ",473],["T_VARIABLE","$terms",473],["T_WHITESPACE"," ",473],")",";",["T_WHITESPACE","\n\n\t\t\t",473],["T_VARIABLE","$where",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],"\"",["T_ENCAPSED_AND_WHITESPACE","(\n\t\t\t\tSELECT COUNT(1)\n\t\t\t\tFROM ",475],["T_VARIABLE","$wpdb",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","term_relationships",477],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\tWHERE term_taxonomy_id IN (",477],["T_VARIABLE","$terms",478],["T_ENCAPSED_AND_WHITESPACE",")\n\t\t\t\tAND object_id = ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","primary_table",479],["T_ENCAPSED_AND_WHITESPACE",".",479],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","primary_id_column",479],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t) = ",479],["T_VARIABLE","$num_terms",480],"\"",";",["T_WHITESPACE","\n\n\t\t",480],"}",["T_WHITESPACE"," ",482],["T_ELSEIF","elseif",482],["T_WHITESPACE"," ",482],"(",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'NOT EXISTS'",482],["T_WHITESPACE"," ",482],["T_IS_IDENTICAL","===",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$operator",482],["T_WHITESPACE"," ",482],["T_BOOLEAN_OR","||",482],["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'EXISTS'",482],["T_WHITESPACE"," ",482],["T_IS_IDENTICAL","===",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$operator",482],["T_WHITESPACE"," ",482],")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n\n\t\t\t",482],["T_VARIABLE","$where",484],["T_WHITESPACE"," ",484],"=",["T_WHITESPACE"," ",484],["T_VARIABLE","$wpdb",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","prepare",484],"(",["T_WHITESPACE"," ",484],"\"",["T_VARIABLE","$operator",484],["T_ENCAPSED_AND_WHITESPACE"," (\n\t\t\t\tSELECT 1\n\t\t\t\tFROM ",484],["T_VARIABLE","$wpdb",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","term_relationships",486],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\tINNER JOIN ",486],["T_VARIABLE","$wpdb",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","term_taxonomy",487],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\tON ",487],["T_VARIABLE","$wpdb",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","term_taxonomy",488],["T_ENCAPSED_AND_WHITESPACE",".term_taxonomy_id = ",488],["T_VARIABLE","$wpdb",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","term_relationships",488],["T_ENCAPSED_AND_WHITESPACE",".term_taxonomy_id\n\t\t\t\tWHERE ",488],["T_VARIABLE","$wpdb",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","term_taxonomy",489],["T_ENCAPSED_AND_WHITESPACE",".taxonomy = %s\n\t\t\t\tAND ",489],["T_VARIABLE","$wpdb",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","term_relationships",490],["T_ENCAPSED_AND_WHITESPACE",".object_id = ",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","primary_table",490],["T_ENCAPSED_AND_WHITESPACE",".",490],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","primary_id_column",490],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t)",490],"\"",",",["T_WHITESPACE"," ",491],["T_VARIABLE","$clause",491],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",491],"]",["T_WHITESPACE"," ",491],")",";",["T_WHITESPACE","\n\n\t\t",491],"}",["T_WHITESPACE","\n\n\t\t",493],["T_VARIABLE","$sql",495],"[",["T_CONSTANT_ENCAPSED_STRING","'join'",495],"]","[","]",["T_WHITESPACE","  ",495],"=",["T_WHITESPACE"," ",495],["T_VARIABLE","$join",495],";",["T_WHITESPACE","\n\t\t",495],["T_VARIABLE","$sql",496],"[",["T_CONSTANT_ENCAPSED_STRING","'where'",496],"]","[","]",["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$where",496],";",["T_WHITESPACE","\n\t\t",496],["T_RETURN","return",497],["T_WHITESPACE"," ",497],["T_VARIABLE","$sql",497],";",["T_WHITESPACE","\n\t",497],"}",["T_WHITESPACE","\n\n\t",498],["T_DOC_COMMENT","\/**\n\t * Identify an existing table alias that is compatible with the current query clause.\n\t *\n\t * We avoid unnecessary table joins by allowing each clause to look for\n\t * an existing table alias that is compatible with the query that it\n\t * needs to perform.\n\t *\n\t * An existing alias is compatible if (a) it is a sibling of `$clause`\n\t * (ie, it's under the scope of the same relation), and (b) the combination\n\t * of operator and relation between the clauses allows for a shared table\n\t * join. In the case of WP_Tax_Query, this only applies to 'IN'\n\t * clauses that are connected by the relation 'OR'.\n\t *\n\t * @since 4.1.0\n\t * @access protected\n\t *\n\t * @param array       $clause       Query clause.\n\t * @param array       $parent_query Parent query of $clause.\n\t * @return string|false Table alias if found, otherwise false.\n\t *\/",500],["T_WHITESPACE","\n\t",519],["T_PROTECTED","protected",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","find_compatible_table_alias",520],"(",["T_WHITESPACE"," ",520],["T_VARIABLE","$clause",520],",",["T_WHITESPACE"," ",520],["T_VARIABLE","$parent_query",520],["T_WHITESPACE"," ",520],")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n\t\t",520],["T_VARIABLE","$alias",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_STRING","false",521],";",["T_WHITESPACE","\n\n\t\t",521],["T_COMMENT","\/\/ Sanity check. Only IN queries use the JOIN syntax .\n",523],["T_WHITESPACE","\t\t",524],["T_IF","if",524],["T_WHITESPACE"," ",524],"(",["T_WHITESPACE"," ",524],"!",["T_WHITESPACE"," ",524],["T_ISSET","isset",524],"(",["T_WHITESPACE"," ",524],["T_VARIABLE","$clause",524],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",524],"]",["T_WHITESPACE"," ",524],")",["T_WHITESPACE"," ",524],["T_BOOLEAN_OR","||",524],["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","'IN'",524],["T_WHITESPACE"," ",524],["T_IS_NOT_IDENTICAL","!==",524],["T_WHITESPACE"," ",524],["T_VARIABLE","$clause",524],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",524],"]",["T_WHITESPACE"," ",524],")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n\t\t\t",524],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$alias",525],";",["T_WHITESPACE","\n\t\t",525],"}",["T_WHITESPACE","\n\n\t\t",526],["T_COMMENT","\/\/ Since we're only checking IN queries, we're only concerned with OR relations.\n",528],["T_WHITESPACE","\t\t",529],["T_IF","if",529],["T_WHITESPACE"," ",529],"(",["T_WHITESPACE"," ",529],"!",["T_WHITESPACE"," ",529],["T_ISSET","isset",529],"(",["T_WHITESPACE"," ",529],["T_VARIABLE","$parent_query",529],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",529],"]",["T_WHITESPACE"," ",529],")",["T_WHITESPACE"," ",529],["T_BOOLEAN_OR","||",529],["T_WHITESPACE"," ",529],["T_CONSTANT_ENCAPSED_STRING","'OR'",529],["T_WHITESPACE"," ",529],["T_IS_NOT_IDENTICAL","!==",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$parent_query",529],"[",["T_CONSTANT_ENCAPSED_STRING","'relation'",529],"]",["T_WHITESPACE"," ",529],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n\t\t\t",529],["T_RETURN","return",530],["T_WHITESPACE"," ",530],["T_VARIABLE","$alias",530],";",["T_WHITESPACE","\n\t\t",530],"}",["T_WHITESPACE","\n\n\t\t",531],["T_VARIABLE","$compatible_operators",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'IN'",533],["T_WHITESPACE"," ",533],")",";",["T_WHITESPACE","\n\n\t\t",533],["T_FOREACH","foreach",535],["T_WHITESPACE"," ",535],"(",["T_WHITESPACE"," ",535],["T_VARIABLE","$parent_query",535],["T_WHITESPACE"," ",535],["T_AS","as",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$sibling",535],["T_WHITESPACE"," ",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n\t\t\t",535],["T_IF","if",536],["T_WHITESPACE"," ",536],"(",["T_WHITESPACE"," ",536],"!",["T_WHITESPACE"," ",536],["T_STRING","is_array",536],"(",["T_WHITESPACE"," ",536],["T_VARIABLE","$sibling",536],["T_WHITESPACE"," ",536],")",["T_WHITESPACE"," ",536],["T_BOOLEAN_OR","||",536],["T_WHITESPACE"," ",536],"!",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","is_first_order_clause",536],"(",["T_WHITESPACE"," ",536],["T_VARIABLE","$sibling",536],["T_WHITESPACE"," ",536],")",["T_WHITESPACE"," ",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n\t\t\t\t",536],["T_CONTINUE","continue",537],";",["T_WHITESPACE","\n\t\t\t",537],"}",["T_WHITESPACE","\n\n\t\t\t",538],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_WHITESPACE"," ",540],["T_EMPTY","empty",540],"(",["T_WHITESPACE"," ",540],["T_VARIABLE","$sibling",540],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",540],"]",["T_WHITESPACE"," ",540],")",["T_WHITESPACE"," ",540],["T_BOOLEAN_OR","||",540],["T_WHITESPACE"," ",540],["T_EMPTY","empty",540],"(",["T_WHITESPACE"," ",540],["T_VARIABLE","$sibling",540],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",540],"]",["T_WHITESPACE"," ",540],")",["T_WHITESPACE"," ",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n\t\t\t\t",540],["T_CONTINUE","continue",541],";",["T_WHITESPACE","\n\t\t\t",541],"}",["T_WHITESPACE","\n\n\t\t\t",542],["T_COMMENT","\/\/ The sibling must both have compatible operator to share its alias.\n",544],["T_WHITESPACE","\t\t\t",545],["T_IF","if",545],["T_WHITESPACE"," ",545],"(",["T_WHITESPACE"," ",545],["T_STRING","in_array",545],"(",["T_WHITESPACE"," ",545],["T_STRING","strtoupper",545],"(",["T_WHITESPACE"," ",545],["T_VARIABLE","$sibling",545],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",545],"]",["T_WHITESPACE"," ",545],")",",",["T_WHITESPACE"," ",545],["T_VARIABLE","$compatible_operators",545],["T_WHITESPACE"," ",545],")",["T_WHITESPACE"," ",545],")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n\t\t\t\t",545],["T_VARIABLE","$alias",546],["T_WHITESPACE"," ",546],"=",["T_WHITESPACE"," ",546],["T_VARIABLE","$sibling",546],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",546],"]",";",["T_WHITESPACE","\n\t\t\t\t",546],["T_BREAK","break",547],";",["T_WHITESPACE","\n\t\t\t",547],"}",["T_WHITESPACE","\n\t\t",548],"}",["T_WHITESPACE","\n\n\t\t",549],["T_RETURN","return",551],["T_WHITESPACE"," ",551],["T_VARIABLE","$alias",551],";",["T_WHITESPACE","\n\t",551],"}",["T_WHITESPACE","\n\n\t",552],["T_DOC_COMMENT","\/**\n\t * Validates a single query.\n\t *\n\t * @since 3.2.0\n\t * @access private\n\t *\n\t * @param array $query The single query. Passed by reference.\n\t *\/",554],["T_WHITESPACE","\n\t",561],["T_PRIVATE","private",562],["T_WHITESPACE"," ",562],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","clean_query",562],"(",["T_WHITESPACE"," ",562],"&",["T_VARIABLE","$query",562],["T_WHITESPACE"," ",562],")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n\t\t",562],["T_IF","if",563],["T_WHITESPACE"," ",563],"(",["T_WHITESPACE"," ",563],["T_EMPTY","empty",563],"(",["T_WHITESPACE"," ",563],["T_VARIABLE","$query",563],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",563],"]",["T_WHITESPACE"," ",563],")",["T_WHITESPACE"," ",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n\t\t\t",563],["T_IF","if",564],["T_WHITESPACE"," ",564],"(",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'term_taxonomy_id'",564],["T_WHITESPACE"," ",564],["T_IS_NOT_IDENTICAL","!==",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$query",564],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",564],"]",["T_WHITESPACE"," ",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n\t\t\t\t",564],["T_VARIABLE","$query",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_NEW","new",565],["T_WHITESPACE"," ",565],["T_STRING","WP_Error",565],"(",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'invalid_taxonomy'",565],",",["T_WHITESPACE"," ",565],["T_STRING","__",565],"(",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'Invalid taxonomy.'",565],["T_WHITESPACE"," ",565],")",["T_WHITESPACE"," ",565],")",";",["T_WHITESPACE","\n\t\t\t\t",565],["T_RETURN","return",566],";",["T_WHITESPACE","\n\t\t\t",566],"}",["T_WHITESPACE","\n\n\t\t\t",567],["T_COMMENT","\/\/ so long as there are shared terms, include_children requires that a taxonomy is set\n",569],["T_WHITESPACE","\t\t\t",570],["T_VARIABLE","$query",570],"[",["T_CONSTANT_ENCAPSED_STRING","'include_children'",570],"]",["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_STRING","false",570],";",["T_WHITESPACE","\n\t\t",570],"}",["T_WHITESPACE"," ",571],["T_ELSEIF","elseif",571],["T_WHITESPACE"," ",571],"(",["T_WHITESPACE"," ",571],"!",["T_WHITESPACE"," ",571],["T_STRING","taxonomy_exists",571],"(",["T_WHITESPACE"," ",571],["T_VARIABLE","$query",571],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",571],"]",["T_WHITESPACE"," ",571],")",["T_WHITESPACE"," ",571],")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n\t\t\t",571],["T_VARIABLE","$query",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_NEW","new",572],["T_WHITESPACE"," ",572],["T_STRING","WP_Error",572],"(",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'invalid_taxonomy'",572],",",["T_WHITESPACE"," ",572],["T_STRING","__",572],"(",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'Invalid taxonomy.'",572],["T_WHITESPACE"," ",572],")",["T_WHITESPACE"," ",572],")",";",["T_WHITESPACE","\n\t\t\t",572],["T_RETURN","return",573],";",["T_WHITESPACE","\n\t\t",573],"}",["T_WHITESPACE","\n\n\t\t",574],["T_VARIABLE","$query",576],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",576],"]",["T_WHITESPACE"," ",576],"=",["T_WHITESPACE"," ",576],["T_STRING","array_unique",576],"(",["T_WHITESPACE"," ",576],["T_ARRAY_CAST","(array)",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$query",576],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",576],"]",["T_WHITESPACE"," ",576],")",";",["T_WHITESPACE","\n\n\t\t",576],["T_IF","if",578],["T_WHITESPACE"," ",578],"(",["T_WHITESPACE"," ",578],["T_STRING","is_taxonomy_hierarchical",578],"(",["T_WHITESPACE"," ",578],["T_VARIABLE","$query",578],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",578],"]",["T_WHITESPACE"," ",578],")",["T_WHITESPACE"," ",578],["T_BOOLEAN_AND","&&",578],["T_WHITESPACE"," ",578],["T_VARIABLE","$query",578],"[",["T_CONSTANT_ENCAPSED_STRING","'include_children'",578],"]",["T_WHITESPACE"," ",578],")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n\t\t\t",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","transform_query",579],"(",["T_WHITESPACE"," ",579],["T_VARIABLE","$query",579],",",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'term_id'",579],["T_WHITESPACE"," ",579],")",";",["T_WHITESPACE","\n\n\t\t\t",579],["T_IF","if",581],["T_WHITESPACE"," ",581],"(",["T_WHITESPACE"," ",581],["T_STRING","is_wp_error",581],"(",["T_WHITESPACE"," ",581],["T_VARIABLE","$query",581],["T_WHITESPACE"," ",581],")",["T_WHITESPACE"," ",581],")",["T_WHITESPACE","\n\t\t\t\t",581],["T_RETURN","return",582],";",["T_WHITESPACE","\n\n\t\t\t",582],["T_VARIABLE","$children",584],["T_WHITESPACE"," ",584],"=",["T_WHITESPACE"," ",584],["T_ARRAY","array",584],"(",")",";",["T_WHITESPACE","\n\t\t\t",584],["T_FOREACH","foreach",585],["T_WHITESPACE"," ",585],"(",["T_WHITESPACE"," ",585],["T_VARIABLE","$query",585],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",585],"]",["T_WHITESPACE"," ",585],["T_AS","as",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$term",585],["T_WHITESPACE"," ",585],")",["T_WHITESPACE"," ",585],"{",["T_WHITESPACE","\n\t\t\t\t",585],["T_VARIABLE","$children",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_STRING","array_merge",586],"(",["T_WHITESPACE"," ",586],["T_VARIABLE","$children",586],",",["T_WHITESPACE"," ",586],["T_STRING","get_term_children",586],"(",["T_WHITESPACE"," ",586],["T_VARIABLE","$term",586],",",["T_WHITESPACE"," ",586],["T_VARIABLE","$query",586],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",586],"]",["T_WHITESPACE"," ",586],")",["T_WHITESPACE"," ",586],")",";",["T_WHITESPACE","\n\t\t\t\t",586],["T_VARIABLE","$children",587],"[","]",["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$term",587],";",["T_WHITESPACE","\n\t\t\t",587],"}",["T_WHITESPACE","\n\t\t\t",588],["T_VARIABLE","$query",589],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",589],"]",["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_VARIABLE","$children",589],";",["T_WHITESPACE","\n\t\t",589],"}",["T_WHITESPACE","\n\n\t\t",590],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","transform_query",592],"(",["T_WHITESPACE"," ",592],["T_VARIABLE","$query",592],",",["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'term_taxonomy_id'",592],["T_WHITESPACE"," ",592],")",";",["T_WHITESPACE","\n\t",592],"}",["T_WHITESPACE","\n\n\t",593],["T_DOC_COMMENT","\/**\n\t * Transforms a single query, from one field to another.\n\t *\n\t * @since 3.2.0\n\t *\n\t * @global wpdb $wpdb The WordPress database abstraction object.\n\t *\n\t * @param array  $query           The single query. Passed by reference.\n\t * @param string $resulting_field The resulting field. Accepts 'slug', 'name', 'term_taxonomy_id',\n\t *                                or 'term_id'. Default 'term_id'.\n\t *\/",595],["T_WHITESPACE","\n\t",605],["T_PUBLIC","public",606],["T_WHITESPACE"," ",606],["T_FUNCTION","function",606],["T_WHITESPACE"," ",606],["T_STRING","transform_query",606],"(",["T_WHITESPACE"," ",606],"&",["T_VARIABLE","$query",606],",",["T_WHITESPACE"," ",606],["T_VARIABLE","$resulting_field",606],["T_WHITESPACE"," ",606],")",["T_WHITESPACE"," ",606],"{",["T_WHITESPACE","\n\t\t",606],["T_GLOBAL","global",607],["T_WHITESPACE"," ",607],["T_VARIABLE","$wpdb",607],";",["T_WHITESPACE","\n\n\t\t",607],["T_IF","if",609],["T_WHITESPACE"," ",609],"(",["T_WHITESPACE"," ",609],["T_EMPTY","empty",609],"(",["T_WHITESPACE"," ",609],["T_VARIABLE","$query",609],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",609],"]",["T_WHITESPACE"," ",609],")",["T_WHITESPACE"," ",609],")",["T_WHITESPACE","\n\t\t\t",609],["T_RETURN","return",610],";",["T_WHITESPACE","\n\n\t\t",610],["T_IF","if",612],["T_WHITESPACE"," ",612],"(",["T_WHITESPACE"," ",612],["T_VARIABLE","$query",612],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",612],"]",["T_WHITESPACE"," ",612],["T_IS_EQUAL","==",612],["T_WHITESPACE"," ",612],["T_VARIABLE","$resulting_field",612],["T_WHITESPACE"," ",612],")",["T_WHITESPACE","\n\t\t\t",612],["T_RETURN","return",613],";",["T_WHITESPACE","\n\n\t\t",613],["T_VARIABLE","$resulting_field",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_STRING","sanitize_key",615],"(",["T_WHITESPACE"," ",615],["T_VARIABLE","$resulting_field",615],["T_WHITESPACE"," ",615],")",";",["T_WHITESPACE","\n\n\t\t",615],["T_SWITCH","switch",617],["T_WHITESPACE"," ",617],"(",["T_WHITESPACE"," ",617],["T_VARIABLE","$query",617],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",617],"]",["T_WHITESPACE"," ",617],")",["T_WHITESPACE"," ",617],"{",["T_WHITESPACE","\n\t\t\t",617],["T_CASE","case",618],["T_WHITESPACE"," ",618],["T_CONSTANT_ENCAPSED_STRING","'slug'",618],":",["T_WHITESPACE","\n\t\t\t",618],["T_CASE","case",619],["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","'name'",619],":",["T_WHITESPACE","\n\t\t\t\t",619],["T_FOREACH","foreach",620],["T_WHITESPACE"," ",620],"(",["T_WHITESPACE"," ",620],["T_VARIABLE","$query",620],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",620],"]",["T_WHITESPACE"," ",620],["T_AS","as",620],["T_WHITESPACE"," ",620],"&",["T_VARIABLE","$term",620],["T_WHITESPACE"," ",620],")",["T_WHITESPACE"," ",620],"{",["T_WHITESPACE","\n\t\t\t\t\t",620],["T_COMMENT","\/*\n\t\t\t\t\t * 0 is the $term_id parameter. We don't have a term ID yet, but it doesn't\n\t\t\t\t\t * matter because `sanitize_term_field()` ignores the $term_id param when the\n\t\t\t\t\t * context is 'db'.\n\t\t\t\t\t *\/",621],["T_WHITESPACE","\n\t\t\t\t\t",625],["T_VARIABLE","$clean_term",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_STRING","sanitize_term_field",626],"(",["T_WHITESPACE"," ",626],["T_VARIABLE","$query",626],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",626],"]",",",["T_WHITESPACE"," ",626],["T_VARIABLE","$term",626],",",["T_WHITESPACE"," ",626],["T_LNUMBER","0",626],",",["T_WHITESPACE"," ",626],["T_VARIABLE","$query",626],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",626],"]",",",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'db'",626],["T_WHITESPACE"," ",626],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",626],["T_COMMENT","\/\/ Match sanitization in wp_insert_term().\n",628],["T_WHITESPACE","\t\t\t\t\t",629],["T_VARIABLE","$clean_term",629],["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],["T_STRING","wp_unslash",629],"(",["T_WHITESPACE"," ",629],["T_VARIABLE","$clean_term",629],["T_WHITESPACE"," ",629],")",";",["T_WHITESPACE","\n\n\t\t\t\t\t",629],["T_VARIABLE","$term",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","\"'\"",631],["T_WHITESPACE"," ",631],".",["T_WHITESPACE"," ",631],["T_STRING","esc_sql",631],"(",["T_WHITESPACE"," ",631],["T_VARIABLE","$clean_term",631],["T_WHITESPACE"," ",631],")",["T_WHITESPACE"," ",631],".",["T_WHITESPACE"," ",631],["T_CONSTANT_ENCAPSED_STRING","\"'\"",631],";",["T_WHITESPACE","\n\t\t\t\t",631],"}",["T_WHITESPACE","\n\n\t\t\t\t",632],["T_VARIABLE","$terms",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_STRING","implode",634],"(",["T_WHITESPACE"," ",634],["T_CONSTANT_ENCAPSED_STRING","\",\"",634],",",["T_WHITESPACE"," ",634],["T_VARIABLE","$query",634],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",634],"]",["T_WHITESPACE"," ",634],")",";",["T_WHITESPACE","\n\n\t\t\t\t",634],["T_VARIABLE","$terms",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$wpdb",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","get_col",636],"(",["T_WHITESPACE"," ",636],"\"",["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tSELECT ",636],["T_VARIABLE","$wpdb",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","term_taxonomy",637],["T_ENCAPSED_AND_WHITESPACE",".",637],["T_VARIABLE","$resulting_field",637],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tFROM ",637],["T_VARIABLE","$wpdb",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","term_taxonomy",638],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tINNER JOIN ",638],["T_VARIABLE","$wpdb",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","terms",639],["T_ENCAPSED_AND_WHITESPACE"," USING (term_id)\n\t\t\t\t\tWHERE taxonomy = '",639],["T_CURLY_OPEN","{",640],["T_VARIABLE","$query",640],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",640],"]","}",["T_ENCAPSED_AND_WHITESPACE","'\n\t\t\t\t\tAND ",640],["T_VARIABLE","$wpdb",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","terms",641],["T_ENCAPSED_AND_WHITESPACE",".",641],["T_CURLY_OPEN","{",641],["T_VARIABLE","$query",641],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",641],"]","}",["T_ENCAPSED_AND_WHITESPACE"," IN (",641],["T_VARIABLE","$terms",641],["T_ENCAPSED_AND_WHITESPACE",")\n\t\t\t\t",641],"\"",["T_WHITESPACE"," ",642],")",";",["T_WHITESPACE","\n\t\t\t\t",642],["T_BREAK","break",643],";",["T_WHITESPACE","\n\t\t\t",643],["T_CASE","case",644],["T_WHITESPACE"," ",644],["T_CONSTANT_ENCAPSED_STRING","'term_taxonomy_id'",644],":",["T_WHITESPACE","\n\t\t\t\t",644],["T_VARIABLE","$terms",645],["T_WHITESPACE"," ",645],"=",["T_WHITESPACE"," ",645],["T_STRING","implode",645],"(",["T_WHITESPACE"," ",645],["T_CONSTANT_ENCAPSED_STRING","','",645],",",["T_WHITESPACE"," ",645],["T_STRING","array_map",645],"(",["T_WHITESPACE"," ",645],["T_CONSTANT_ENCAPSED_STRING","'intval'",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$query",645],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",645],"]",["T_WHITESPACE"," ",645],")",["T_WHITESPACE"," ",645],")",";",["T_WHITESPACE","\n\t\t\t\t",645],["T_VARIABLE","$terms",646],["T_WHITESPACE"," ",646],"=",["T_WHITESPACE"," ",646],["T_VARIABLE","$wpdb",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","get_col",646],"(",["T_WHITESPACE"," ",646],"\"",["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tSELECT ",646],["T_VARIABLE","$resulting_field",647],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tFROM ",647],["T_VARIABLE","$wpdb",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","term_taxonomy",648],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tWHERE term_taxonomy_id IN (",648],["T_VARIABLE","$terms",649],["T_ENCAPSED_AND_WHITESPACE",")\n\t\t\t\t",649],"\"",["T_WHITESPACE"," ",650],")",";",["T_WHITESPACE","\n\t\t\t\t",650],["T_BREAK","break",651],";",["T_WHITESPACE","\n\t\t\t",651],["T_DEFAULT","default",652],":",["T_WHITESPACE","\n\t\t\t\t",652],["T_VARIABLE","$terms",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_STRING","implode",653],"(",["T_WHITESPACE"," ",653],["T_CONSTANT_ENCAPSED_STRING","','",653],",",["T_WHITESPACE"," ",653],["T_STRING","array_map",653],"(",["T_WHITESPACE"," ",653],["T_CONSTANT_ENCAPSED_STRING","'intval'",653],",",["T_WHITESPACE"," ",653],["T_VARIABLE","$query",653],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",653],"]",["T_WHITESPACE"," ",653],")",["T_WHITESPACE"," ",653],")",";",["T_WHITESPACE","\n\t\t\t\t",653],["T_VARIABLE","$terms",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_VARIABLE","$wpdb",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","get_col",654],"(",["T_WHITESPACE"," ",654],"\"",["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tSELECT ",654],["T_VARIABLE","$resulting_field",655],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tFROM ",655],["T_VARIABLE","$wpdb",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","term_taxonomy",656],["T_ENCAPSED_AND_WHITESPACE","\n\t\t\t\t\tWHERE taxonomy = '",656],["T_CURLY_OPEN","{",657],["T_VARIABLE","$query",657],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",657],"]","}",["T_ENCAPSED_AND_WHITESPACE","'\n\t\t\t\t\tAND term_id IN (",657],["T_VARIABLE","$terms",658],["T_ENCAPSED_AND_WHITESPACE",")\n\t\t\t\t",658],"\"",["T_WHITESPACE"," ",659],")",";",["T_WHITESPACE","\n\t\t",659],"}",["T_WHITESPACE","\n\n\t\t",660],["T_IF","if",662],["T_WHITESPACE"," ",662],"(",["T_WHITESPACE"," ",662],["T_CONSTANT_ENCAPSED_STRING","'AND'",662],["T_WHITESPACE"," ",662],["T_IS_EQUAL","==",662],["T_WHITESPACE"," ",662],["T_VARIABLE","$query",662],"[",["T_CONSTANT_ENCAPSED_STRING","'operator'",662],"]",["T_WHITESPACE"," ",662],["T_BOOLEAN_AND","&&",662],["T_WHITESPACE"," ",662],["T_STRING","count",662],"(",["T_WHITESPACE"," ",662],["T_VARIABLE","$terms",662],["T_WHITESPACE"," ",662],")",["T_WHITESPACE"," ",662],"<",["T_WHITESPACE"," ",662],["T_STRING","count",662],"(",["T_WHITESPACE"," ",662],["T_VARIABLE","$query",662],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",662],"]",["T_WHITESPACE"," ",662],")",["T_WHITESPACE"," ",662],")",["T_WHITESPACE"," ",662],"{",["T_WHITESPACE","\n\t\t\t",662],["T_VARIABLE","$query",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_NEW","new",663],["T_WHITESPACE"," ",663],["T_STRING","WP_Error",663],"(",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'inexistent_terms'",663],",",["T_WHITESPACE"," ",663],["T_STRING","__",663],"(",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'Inexistent terms.'",663],["T_WHITESPACE"," ",663],")",["T_WHITESPACE"," ",663],")",";",["T_WHITESPACE","\n\t\t\t",663],["T_RETURN","return",664],";",["T_WHITESPACE","\n\t\t",664],"}",["T_WHITESPACE","\n\n\t\t",665],["T_VARIABLE","$query",667],"[",["T_CONSTANT_ENCAPSED_STRING","'terms'",667],"]",["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_VARIABLE","$terms",667],";",["T_WHITESPACE","\n\t\t",667],["T_VARIABLE","$query",668],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",668],"]",["T_WHITESPACE"," ",668],"=",["T_WHITESPACE"," ",668],["T_VARIABLE","$resulting_field",668],";",["T_WHITESPACE","\n\t",668],"}",["T_WHITESPACE","\n",669],"}",["T_WHITESPACE","\n",670]]
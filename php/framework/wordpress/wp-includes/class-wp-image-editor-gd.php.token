[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * WordPress GD Image Editor\n *\n * @package WordPress\n * @subpackage Image_Editor\n *\/",2],["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * WordPress Image Editor Class for Image Manipulation through GD\n *\n * @since 3.5.0\n * @package WordPress\n * @subpackage Image_Editor\n * @uses WP_Image_Editor Extends class\n *\/",9],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","WP_Image_Editor_GD",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","WP_Image_Editor",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\t",17],["T_DOC_COMMENT","\/**\n\t * GD Resource.\n\t *\n\t * @access protected\n\t * @var resource\n\t *\/",18],["T_WHITESPACE","\n\t",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$image",24],";",["T_WHITESPACE","\n\n\t",24],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","__destruct",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\t\t",26],["T_IF","if",27],["T_WHITESPACE"," ",27],"(",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","image",27],["T_WHITESPACE"," ",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\t\t\t",27],["T_COMMENT","\/\/ we don't need the original in memory anymore\n",28],["T_WHITESPACE","\t\t\t",29],["T_STRING","imagedestroy",29],"(",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","image",29],["T_WHITESPACE"," ",29],")",";",["T_WHITESPACE","\n\t\t",29],"}",["T_WHITESPACE","\n\t",30],"}",["T_WHITESPACE","\n\n\t",31],["T_DOC_COMMENT","\/**\n\t * Checks to see if current environment supports GD.\n\t *\n\t * @since 3.5.0\n\t *\n\t * @static\n\t * @access public\n\t *\n\t * @param array $args\n\t * @return bool\n\t *\/",33],["T_WHITESPACE","\n\t",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_STATIC","static",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","test",44],"(",["T_WHITESPACE"," ",44],["T_VARIABLE","$args",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",")",["T_WHITESPACE"," ",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n\t\t",44],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_WHITESPACE"," ",45],"!",["T_WHITESPACE"," ",45],["T_STRING","extension_loaded",45],"(",["T_CONSTANT_ENCAPSED_STRING","'gd'",45],")",["T_WHITESPACE"," ",45],["T_BOOLEAN_OR","||",45],["T_WHITESPACE"," ",45],"!",["T_WHITESPACE"," ",45],["T_STRING","function_exists",45],"(",["T_CONSTANT_ENCAPSED_STRING","'gd_info'",45],")",["T_WHITESPACE"," ",45],")",["T_WHITESPACE","\n\t\t\t",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_STRING","false",46],";",["T_WHITESPACE","\n\n\t\t",46],["T_COMMENT","\/\/ On some setups GD library does not provide imagerotate() - Ticket #11536\n",48],["T_WHITESPACE","\t\t",49],["T_IF","if",49],["T_WHITESPACE"," ",49],"(",["T_WHITESPACE"," ",49],["T_ISSET","isset",49],"(",["T_WHITESPACE"," ",49],["T_VARIABLE","$args",49],"[",["T_CONSTANT_ENCAPSED_STRING","'methods'",49],"]",["T_WHITESPACE"," ",49],")",["T_WHITESPACE"," ",49],["T_BOOLEAN_AND","&&",49],["T_WHITESPACE","\n\t\t\t ",49],["T_STRING","in_array",50],"(",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'rotate'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$args",50],"[",["T_CONSTANT_ENCAPSED_STRING","'methods'",50],"]",["T_WHITESPACE"," ",50],")",["T_WHITESPACE"," ",50],["T_BOOLEAN_AND","&&",50],["T_WHITESPACE","\n\t\t\t ",50],"!",["T_WHITESPACE"," ",51],["T_STRING","function_exists",51],"(",["T_CONSTANT_ENCAPSED_STRING","'imagerotate'",51],")",["T_WHITESPACE"," ",51],")","{",["T_WHITESPACE","\n\n\t\t\t\t",51],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_STRING","false",53],";",["T_WHITESPACE","\n\t\t",53],"}",["T_WHITESPACE","\n\n\t\t",54],["T_RETURN","return",56],["T_WHITESPACE"," ",56],["T_STRING","true",56],";",["T_WHITESPACE","\n\t",56],"}",["T_WHITESPACE","\n\n\t",57],["T_DOC_COMMENT","\/**\n\t * Checks to see if editor supports the mime-type specified.\n\t *\n\t * @since 3.5.0\n\t *\n\t * @static\n\t * @access public\n\t *\n\t * @param string $mime_type\n\t * @return bool\n\t *\/",59],["T_WHITESPACE","\n\t",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_STATIC","static",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","supports_mime_type",70],"(",["T_WHITESPACE"," ",70],["T_VARIABLE","$mime_type",70],["T_WHITESPACE"," ",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n\t\t",70],["T_VARIABLE","$image_types",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","imagetypes",71],"(",")",";",["T_WHITESPACE","\n\t\t",71],["T_SWITCH","switch",72],"(",["T_WHITESPACE"," ",72],["T_VARIABLE","$mime_type",72],["T_WHITESPACE"," ",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n\t\t\t",72],["T_CASE","case",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",73],":",["T_WHITESPACE","\n\t\t\t\t",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$image_types",74],["T_WHITESPACE"," ",74],"&",["T_WHITESPACE"," ",74],["T_STRING","IMG_JPG",74],")",["T_WHITESPACE"," ",74],["T_IS_NOT_EQUAL","!=",74],["T_WHITESPACE"," ",74],["T_LNUMBER","0",74],";",["T_WHITESPACE","\n\t\t\t",74],["T_CASE","case",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",75],":",["T_WHITESPACE","\n\t\t\t\t",75],["T_RETURN","return",76],["T_WHITESPACE"," ",76],"(",["T_VARIABLE","$image_types",76],["T_WHITESPACE"," ",76],"&",["T_WHITESPACE"," ",76],["T_STRING","IMG_PNG",76],")",["T_WHITESPACE"," ",76],["T_IS_NOT_EQUAL","!=",76],["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],";",["T_WHITESPACE","\n\t\t\t",76],["T_CASE","case",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",77],":",["T_WHITESPACE","\n\t\t\t\t",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$image_types",78],["T_WHITESPACE"," ",78],"&",["T_WHITESPACE"," ",78],["T_STRING","IMG_GIF",78],")",["T_WHITESPACE"," ",78],["T_IS_NOT_EQUAL","!=",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],";",["T_WHITESPACE","\n\t\t",78],"}",["T_WHITESPACE","\n\n\t\t",79],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","false",81],";",["T_WHITESPACE","\n\t",81],"}",["T_WHITESPACE","\n\n\t",82],["T_DOC_COMMENT","\/**\n\t * Loads image from $this->file into new GD Resource.\n\t *\n\t * @since 3.5.0\n\t * @access protected\n\t *\n\t * @return bool|WP_Error True if loaded successfully; WP_Error on failure.\n\t *\/",84],["T_WHITESPACE","\n\t",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","load",92],"(",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n\t\t",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","image",93],["T_WHITESPACE"," ",93],")",["T_WHITESPACE","\n\t\t\t",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_STRING","true",94],";",["T_WHITESPACE","\n\n\t\t",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_WHITESPACE"," ",96],"!",["T_WHITESPACE"," ",96],["T_STRING","is_file",96],"(",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","file",96],["T_WHITESPACE"," ",96],")",["T_WHITESPACE"," ",96],["T_BOOLEAN_AND","&&",96],["T_WHITESPACE"," ",96],"!",["T_WHITESPACE"," ",96],["T_STRING","preg_match",96],"(",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'|^https?:\/\/|'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","file",96],["T_WHITESPACE"," ",96],")",["T_WHITESPACE"," ",96],")",["T_WHITESPACE","\n\t\t\t",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","WP_Error",97],"(",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'error_loading_image'",97],",",["T_WHITESPACE"," ",97],["T_STRING","__",97],"(",["T_CONSTANT_ENCAPSED_STRING","'File doesn&#8217;t exist?'",97],")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","file",97],["T_WHITESPACE"," ",97],")",";",["T_WHITESPACE","\n\n\t\t",97],["T_COMMENT","\/\/ Set artificially high because GD uses uncompressed images in memory.\n",99],["T_WHITESPACE","\t\t",100],["T_STRING","wp_raise_memory_limit",100],"(",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'image'",100],["T_WHITESPACE"," ",100],")",";",["T_WHITESPACE","\n\n\t\t",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","image",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],"@",["T_STRING","imagecreatefromstring",102],"(",["T_WHITESPACE"," ",102],["T_STRING","file_get_contents",102],"(",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","file",102],["T_WHITESPACE"," ",102],")",["T_WHITESPACE"," ",102],")",";",["T_WHITESPACE","\n\n\t\t",102],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_WHITESPACE"," ",104],"!",["T_WHITESPACE"," ",104],["T_STRING","is_resource",104],"(",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","image",104],["T_WHITESPACE"," ",104],")",["T_WHITESPACE"," ",104],")",["T_WHITESPACE","\n\t\t\t",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","WP_Error",105],"(",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'invalid_image'",105],",",["T_WHITESPACE"," ",105],["T_STRING","__",105],"(",["T_CONSTANT_ENCAPSED_STRING","'File is not an image.'",105],")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","file",105],["T_WHITESPACE"," ",105],")",";",["T_WHITESPACE","\n\n\t\t",105],["T_VARIABLE","$size",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"@",["T_STRING","getimagesize",107],"(",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","file",107],["T_WHITESPACE"," ",107],")",";",["T_WHITESPACE","\n\t\t",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_WHITESPACE"," ",108],"!",["T_WHITESPACE"," ",108],["T_VARIABLE","$size",108],["T_WHITESPACE"," ",108],")",["T_WHITESPACE","\n\t\t\t",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_STRING","WP_Error",109],"(",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'invalid_image'",109],",",["T_WHITESPACE"," ",109],["T_STRING","__",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not read image size.'",109],")",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","file",109],["T_WHITESPACE"," ",109],")",";",["T_WHITESPACE","\n\n\t\t",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_WHITESPACE"," ",111],["T_STRING","function_exists",111],"(",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'imagealphablending'",111],["T_WHITESPACE"," ",111],")",["T_WHITESPACE"," ",111],["T_BOOLEAN_AND","&&",111],["T_WHITESPACE"," ",111],["T_STRING","function_exists",111],"(",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'imagesavealpha'",111],["T_WHITESPACE"," ",111],")",["T_WHITESPACE"," ",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n\t\t\t",111],["T_STRING","imagealphablending",112],"(",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","image",112],",",["T_WHITESPACE"," ",112],["T_STRING","false",112],["T_WHITESPACE"," ",112],")",";",["T_WHITESPACE","\n\t\t\t",112],["T_STRING","imagesavealpha",113],"(",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","image",113],",",["T_WHITESPACE"," ",113],["T_STRING","true",113],["T_WHITESPACE"," ",113],")",";",["T_WHITESPACE","\n\t\t",113],"}",["T_WHITESPACE","\n\n\t\t",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","update_size",116],"(",["T_WHITESPACE"," ",116],["T_VARIABLE","$size",116],"[",["T_LNUMBER","0",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$size",116],"[",["T_LNUMBER","1",116],"]",["T_WHITESPACE"," ",116],")",";",["T_WHITESPACE","\n\t\t",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","mime_type",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$size",117],"[",["T_CONSTANT_ENCAPSED_STRING","'mime'",117],"]",";",["T_WHITESPACE","\n\n\t\t",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","set_quality",119],"(",")",";",["T_WHITESPACE","\n\t",119],"}",["T_WHITESPACE","\n\n\t",120],["T_DOC_COMMENT","\/**\n\t * Sets or updates current image size.\n\t *\n\t * @since 3.5.0\n\t * @access protected\n\t *\n\t * @param int $width\n\t * @param int $height\n\t * @return true\n\t *\/",122],["T_WHITESPACE","\n\t",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","update_size",132],"(",["T_WHITESPACE"," ",132],["T_VARIABLE","$width",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","false",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$height",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","false",132],["T_WHITESPACE"," ",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n\t\t",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(",["T_WHITESPACE"," ",133],"!",["T_WHITESPACE"," ",133],["T_VARIABLE","$width",133],["T_WHITESPACE"," ",133],")",["T_WHITESPACE","\n\t\t\t",133],["T_VARIABLE","$width",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","imagesx",134],"(",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","image",134],["T_WHITESPACE"," ",134],")",";",["T_WHITESPACE","\n\n\t\t",134],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_WHITESPACE"," ",136],"!",["T_WHITESPACE"," ",136],["T_VARIABLE","$height",136],["T_WHITESPACE"," ",136],")",["T_WHITESPACE","\n\t\t\t",136],["T_VARIABLE","$height",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","imagesy",137],"(",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","image",137],["T_WHITESPACE"," ",137],")",";",["T_WHITESPACE","\n\n\t\t",137],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_STRING","parent",139],["T_DOUBLE_COLON","::",139],["T_STRING","update_size",139],"(",["T_WHITESPACE"," ",139],["T_VARIABLE","$width",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$height",139],["T_WHITESPACE"," ",139],")",";",["T_WHITESPACE","\n\t",139],"}",["T_WHITESPACE","\n\n\t",140],["T_DOC_COMMENT","\/**\n\t * Resizes current image.\n\t * Wraps _resize, since _resize returns a GD Resource.\n\t *\n\t * At minimum, either a height or width must be provided.\n\t * If one of the two is set to null, the resize will\n\t * maintain aspect ratio according to the provided dimension.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param  int|null $max_w Image width.\n\t * @param  int|null $max_h Image height.\n\t * @param  bool     $crop\n\t * @return true|WP_Error\n\t *\/",142],["T_WHITESPACE","\n\t",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","resize",158],"(",["T_WHITESPACE"," ",158],["T_VARIABLE","$max_w",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$max_h",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$crop",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","false",158],["T_WHITESPACE"," ",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n\t\t",158],["T_IF","if",159],["T_WHITESPACE"," ",159],"(",["T_WHITESPACE"," ",159],"(",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","size",159],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",159],"]",["T_WHITESPACE"," ",159],["T_IS_EQUAL","==",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$max_w",159],["T_WHITESPACE"," ",159],")",["T_WHITESPACE"," ",159],["T_BOOLEAN_AND","&&",159],["T_WHITESPACE"," ",159],"(",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","size",159],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",159],"]",["T_WHITESPACE"," ",159],["T_IS_EQUAL","==",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$max_h",159],["T_WHITESPACE"," ",159],")",["T_WHITESPACE"," ",159],")",["T_WHITESPACE","\n\t\t\t",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_STRING","true",160],";",["T_WHITESPACE","\n\n\t\t",160],["T_VARIABLE","$resized",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","_resize",162],"(",["T_WHITESPACE"," ",162],["T_VARIABLE","$max_w",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$max_h",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$crop",162],["T_WHITESPACE"," ",162],")",";",["T_WHITESPACE","\n\n\t\t",162],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_WHITESPACE"," ",164],["T_STRING","is_resource",164],"(",["T_WHITESPACE"," ",164],["T_VARIABLE","$resized",164],["T_WHITESPACE"," ",164],")",["T_WHITESPACE"," ",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n\t\t\t",164],["T_STRING","imagedestroy",165],"(",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","image",165],["T_WHITESPACE"," ",165],")",";",["T_WHITESPACE","\n\t\t\t",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","image",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$resized",166],";",["T_WHITESPACE","\n\t\t\t",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_STRING","true",167],";",["T_WHITESPACE","\n\n\t\t",167],"}",["T_WHITESPACE"," ",169],["T_ELSEIF","elseif",169],["T_WHITESPACE"," ",169],"(",["T_WHITESPACE"," ",169],["T_STRING","is_wp_error",169],"(",["T_WHITESPACE"," ",169],["T_VARIABLE","$resized",169],["T_WHITESPACE"," ",169],")",["T_WHITESPACE"," ",169],")",["T_WHITESPACE","\n\t\t\t",169],["T_RETURN","return",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$resized",170],";",["T_WHITESPACE","\n\n\t\t",170],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","WP_Error",172],"(",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'image_resize_error'",172],",",["T_WHITESPACE"," ",172],["T_STRING","__",172],"(",["T_CONSTANT_ENCAPSED_STRING","'Image resize failed.'",172],")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","file",172],["T_WHITESPACE"," ",172],")",";",["T_WHITESPACE","\n\t",172],"}",["T_WHITESPACE","\n\n\t",173],["T_DOC_COMMENT","\/**\n\t *\n\t * @param int $max_w\n\t * @param int $max_h\n\t * @param bool|array $crop\n\t * @return resource|WP_Error\n\t *\/",175],["T_WHITESPACE","\n\t",181],["T_PROTECTED","protected",182],["T_WHITESPACE"," ",182],["T_FUNCTION","function",182],["T_WHITESPACE"," ",182],["T_STRING","_resize",182],"(",["T_WHITESPACE"," ",182],["T_VARIABLE","$max_w",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$max_h",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$crop",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","false",182],["T_WHITESPACE"," ",182],")",["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n\t\t",182],["T_VARIABLE","$dims",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","image_resize_dimensions",183],"(",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","size",183],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",183],"]",",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","size",183],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",183],"]",",",["T_WHITESPACE"," ",183],["T_VARIABLE","$max_w",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$max_h",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$crop",183],["T_WHITESPACE"," ",183],")",";",["T_WHITESPACE","\n\t\t",183],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_WHITESPACE"," ",184],"!",["T_WHITESPACE"," ",184],["T_VARIABLE","$dims",184],["T_WHITESPACE"," ",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n\t\t\t",184],["T_RETURN","return",185],["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","WP_Error",185],"(",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'error_getting_dimensions'",185],",",["T_WHITESPACE"," ",185],["T_STRING","__",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not calculate resized image dimensions'",185],")",",",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","file",185],["T_WHITESPACE"," ",185],")",";",["T_WHITESPACE","\n\t\t",185],"}",["T_WHITESPACE","\n\t\t",186],["T_LIST","list",187],"(",["T_WHITESPACE"," ",187],["T_VARIABLE","$dst_x",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$dst_y",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$src_x",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$src_y",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$dst_w",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$dst_h",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$src_w",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$src_h",187],["T_WHITESPACE"," ",187],")",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$dims",187],";",["T_WHITESPACE","\n\n\t\t",187],["T_VARIABLE","$resized",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","wp_imagecreatetruecolor",189],"(",["T_WHITESPACE"," ",189],["T_VARIABLE","$dst_w",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$dst_h",189],["T_WHITESPACE"," ",189],")",";",["T_WHITESPACE","\n\t\t",189],["T_STRING","imagecopyresampled",190],"(",["T_WHITESPACE"," ",190],["T_VARIABLE","$resized",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","image",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$dst_x",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$dst_y",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$src_x",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$src_y",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$dst_w",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$dst_h",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$src_w",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$src_h",190],["T_WHITESPACE"," ",190],")",";",["T_WHITESPACE","\n\n\t\t",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_WHITESPACE"," ",192],["T_STRING","is_resource",192],"(",["T_WHITESPACE"," ",192],["T_VARIABLE","$resized",192],["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n\t\t\t",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","update_size",193],"(",["T_WHITESPACE"," ",193],["T_VARIABLE","$dst_w",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$dst_h",193],["T_WHITESPACE"," ",193],")",";",["T_WHITESPACE","\n\t\t\t",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$resized",194],";",["T_WHITESPACE","\n\t\t",194],"}",["T_WHITESPACE","\n\n\t\t",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_NEW","new",197],["T_WHITESPACE"," ",197],["T_STRING","WP_Error",197],"(",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'image_resize_error'",197],",",["T_WHITESPACE"," ",197],["T_STRING","__",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Image resize failed.'",197],")",",",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","file",197],["T_WHITESPACE"," ",197],")",";",["T_WHITESPACE","\n\t",197],"}",["T_WHITESPACE","\n\n\t",198],["T_DOC_COMMENT","\/**\n\t * Resize multiple images from a single source.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param array $sizes {\n\t *     An array of image size arrays. Default sizes are 'small', 'medium', 'medium_large', 'large'.\n\t *\n\t *     Either a height or width must be provided.\n\t *     If one of the two is set to null, the resize will\n\t *     maintain aspect ratio according to the provided dimension.\n\t *\n\t *     @type array $size {\n\t *         Array of height, width values, and whether to crop.\n\t *\n\t *         @type int  $width  Image width. Optional if `$height` is specified.\n\t *         @type int  $height Image height. Optional if `$width` is specified.\n\t *         @type bool $crop   Optional. Whether to crop the image. Default false.\n\t *     }\n\t * }\n\t * @return array An array of resized images' metadata by size.\n\t *\/",200],["T_WHITESPACE","\n\t",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","multi_resize",223],"(",["T_WHITESPACE"," ",223],["T_VARIABLE","$sizes",223],["T_WHITESPACE"," ",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n\t\t",223],["T_VARIABLE","$metadata",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_ARRAY","array",224],"(",")",";",["T_WHITESPACE","\n\t\t",224],["T_VARIABLE","$orig_size",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","size",225],";",["T_WHITESPACE","\n\n\t\t",225],["T_FOREACH","foreach",227],["T_WHITESPACE"," ",227],"(",["T_WHITESPACE"," ",227],["T_VARIABLE","$sizes",227],["T_WHITESPACE"," ",227],["T_AS","as",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$size",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$size_data",227],["T_WHITESPACE"," ",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n\t\t\t",227],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_WHITESPACE"," ",228],"!",["T_WHITESPACE"," ",228],["T_ISSET","isset",228],"(",["T_WHITESPACE"," ",228],["T_VARIABLE","$size_data",228],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",228],"]",["T_WHITESPACE"," ",228],")",["T_WHITESPACE"," ",228],["T_BOOLEAN_AND","&&",228],["T_WHITESPACE"," ",228],"!",["T_WHITESPACE"," ",228],["T_ISSET","isset",228],"(",["T_WHITESPACE"," ",228],["T_VARIABLE","$size_data",228],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",228],"]",["T_WHITESPACE"," ",228],")",["T_WHITESPACE"," ",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n\t\t\t\t",228],["T_CONTINUE","continue",229],";",["T_WHITESPACE","\n\t\t\t",229],"}",["T_WHITESPACE","\n\n\t\t\t",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_WHITESPACE"," ",232],"!",["T_WHITESPACE"," ",232],["T_ISSET","isset",232],"(",["T_WHITESPACE"," ",232],["T_VARIABLE","$size_data",232],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",232],"]",["T_WHITESPACE"," ",232],")",["T_WHITESPACE"," ",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n\t\t\t\t",232],["T_VARIABLE","$size_data",233],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",233],"]",["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","null",233],";",["T_WHITESPACE","\n\t\t\t",233],"}",["T_WHITESPACE","\n\t\t\t",234],["T_IF","if",235],["T_WHITESPACE"," ",235],"(",["T_WHITESPACE"," ",235],"!",["T_WHITESPACE"," ",235],["T_ISSET","isset",235],"(",["T_WHITESPACE"," ",235],["T_VARIABLE","$size_data",235],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",235],"]",["T_WHITESPACE"," ",235],")",["T_WHITESPACE"," ",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n\t\t\t\t",235],["T_VARIABLE","$size_data",236],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",236],"]",["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","null",236],";",["T_WHITESPACE","\n\t\t\t",236],"}",["T_WHITESPACE","\n\n\t\t\t",237],["T_IF","if",239],["T_WHITESPACE"," ",239],"(",["T_WHITESPACE"," ",239],"!",["T_WHITESPACE"," ",239],["T_ISSET","isset",239],"(",["T_WHITESPACE"," ",239],["T_VARIABLE","$size_data",239],"[",["T_CONSTANT_ENCAPSED_STRING","'crop'",239],"]",["T_WHITESPACE"," ",239],")",["T_WHITESPACE"," ",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n\t\t\t\t",239],["T_VARIABLE","$size_data",240],"[",["T_CONSTANT_ENCAPSED_STRING","'crop'",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","false",240],";",["T_WHITESPACE","\n\t\t\t",240],"}",["T_WHITESPACE","\n\n\t\t\t",241],["T_VARIABLE","$image",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","_resize",243],"(",["T_WHITESPACE"," ",243],["T_VARIABLE","$size_data",243],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",243],"]",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$size_data",243],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",243],"]",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$size_data",243],"[",["T_CONSTANT_ENCAPSED_STRING","'crop'",243],"]",["T_WHITESPACE"," ",243],")",";",["T_WHITESPACE","\n\t\t\t",243],["T_VARIABLE","$duplicate",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"(",["T_WHITESPACE"," ",244],"(",["T_WHITESPACE"," ",244],["T_VARIABLE","$orig_size",244],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",244],"]",["T_WHITESPACE"," ",244],["T_IS_EQUAL","==",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$size_data",244],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",244],"]",["T_WHITESPACE"," ",244],")",["T_WHITESPACE"," ",244],["T_BOOLEAN_AND","&&",244],["T_WHITESPACE"," ",244],"(",["T_WHITESPACE"," ",244],["T_VARIABLE","$orig_size",244],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",244],"]",["T_WHITESPACE"," ",244],["T_IS_EQUAL","==",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$size_data",244],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",244],"]",["T_WHITESPACE"," ",244],")",["T_WHITESPACE"," ",244],")",";",["T_WHITESPACE","\n\n\t\t\t",244],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_WHITESPACE"," ",246],"!",["T_WHITESPACE"," ",246],["T_STRING","is_wp_error",246],"(",["T_WHITESPACE"," ",246],["T_VARIABLE","$image",246],["T_WHITESPACE"," ",246],")",["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],"!",["T_WHITESPACE"," ",246],["T_VARIABLE","$duplicate",246],["T_WHITESPACE"," ",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n\t\t\t\t",246],["T_VARIABLE","$resized",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","_save",247],"(",["T_WHITESPACE"," ",247],["T_VARIABLE","$image",247],["T_WHITESPACE"," ",247],")",";",["T_WHITESPACE","\n\n\t\t\t\t",247],["T_STRING","imagedestroy",249],"(",["T_WHITESPACE"," ",249],["T_VARIABLE","$image",249],["T_WHITESPACE"," ",249],")",";",["T_WHITESPACE","\n\n\t\t\t\t",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_WHITESPACE"," ",251],"!",["T_WHITESPACE"," ",251],["T_STRING","is_wp_error",251],"(",["T_WHITESPACE"," ",251],["T_VARIABLE","$resized",251],["T_WHITESPACE"," ",251],")",["T_WHITESPACE"," ",251],["T_BOOLEAN_AND","&&",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$resized",251],["T_WHITESPACE"," ",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n\t\t\t\t\t",251],["T_UNSET","unset",252],"(",["T_WHITESPACE"," ",252],["T_VARIABLE","$resized",252],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",252],"]",["T_WHITESPACE"," ",252],")",";",["T_WHITESPACE","\n\t\t\t\t\t",252],["T_VARIABLE","$metadata",253],"[",["T_VARIABLE","$size",253],"]",["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$resized",253],";",["T_WHITESPACE","\n\t\t\t\t",253],"}",["T_WHITESPACE","\n\t\t\t",254],"}",["T_WHITESPACE","\n\n\t\t\t",255],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","size",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$orig_size",257],";",["T_WHITESPACE","\n\t\t",257],"}",["T_WHITESPACE","\n\n\t\t",258],["T_RETURN","return",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$metadata",260],";",["T_WHITESPACE","\n\t",260],"}",["T_WHITESPACE","\n\n\t",261],["T_DOC_COMMENT","\/**\n\t * Crops Image.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param int  $src_x   The start x position to crop from.\n\t * @param int  $src_y   The start y position to crop from.\n\t * @param int  $src_w   The width to crop.\n\t * @param int  $src_h   The height to crop.\n\t * @param int  $dst_w   Optional. The destination width.\n\t * @param int  $dst_h   Optional. The destination height.\n\t * @param bool $src_abs Optional. If the source crop points are absolute.\n\t * @return bool|WP_Error\n\t *\/",263],["T_WHITESPACE","\n\t",277],["T_PUBLIC","public",278],["T_WHITESPACE"," ",278],["T_FUNCTION","function",278],["T_WHITESPACE"," ",278],["T_STRING","crop",278],"(",["T_WHITESPACE"," ",278],["T_VARIABLE","$src_x",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$src_y",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$src_w",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$src_h",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$dst_w",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","null",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$dst_h",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","null",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$src_abs",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","false",278],["T_WHITESPACE"," ",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n\t\t",278],["T_COMMENT","\/\/ If destination width\/height isn't specified, use same as\n",279],["T_WHITESPACE","\t\t",280],["T_COMMENT","\/\/ width\/height from source.\n",280],["T_WHITESPACE","\t\t",281],["T_IF","if",281],["T_WHITESPACE"," ",281],"(",["T_WHITESPACE"," ",281],"!",["T_WHITESPACE"," ",281],["T_VARIABLE","$dst_w",281],["T_WHITESPACE"," ",281],")",["T_WHITESPACE","\n\t\t\t",281],["T_VARIABLE","$dst_w",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$src_w",282],";",["T_WHITESPACE","\n\t\t",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_WHITESPACE"," ",283],"!",["T_WHITESPACE"," ",283],["T_VARIABLE","$dst_h",283],["T_WHITESPACE"," ",283],")",["T_WHITESPACE","\n\t\t\t",283],["T_VARIABLE","$dst_h",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$src_h",284],";",["T_WHITESPACE","\n\n\t\t",284],["T_VARIABLE","$dst",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","wp_imagecreatetruecolor",286],"(",["T_WHITESPACE"," ",286],["T_VARIABLE","$dst_w",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$dst_h",286],["T_WHITESPACE"," ",286],")",";",["T_WHITESPACE","\n\n\t\t",286],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_WHITESPACE"," ",288],["T_VARIABLE","$src_abs",288],["T_WHITESPACE"," ",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n\t\t\t",288],["T_VARIABLE","$src_w",289],["T_WHITESPACE"," ",289],["T_MINUS_EQUAL","-=",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$src_x",289],";",["T_WHITESPACE","\n\t\t\t",289],["T_VARIABLE","$src_h",290],["T_WHITESPACE"," ",290],["T_MINUS_EQUAL","-=",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$src_y",290],";",["T_WHITESPACE","\n\t\t",290],"}",["T_WHITESPACE","\n\n\t\t",291],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_WHITESPACE"," ",293],["T_STRING","function_exists",293],"(",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'imageantialias'",293],["T_WHITESPACE"," ",293],")",["T_WHITESPACE"," ",293],")",["T_WHITESPACE","\n\t\t\t",293],["T_STRING","imageantialias",294],"(",["T_WHITESPACE"," ",294],["T_VARIABLE","$dst",294],",",["T_WHITESPACE"," ",294],["T_STRING","true",294],["T_WHITESPACE"," ",294],")",";",["T_WHITESPACE","\n\n\t\t",294],["T_STRING","imagecopyresampled",296],"(",["T_WHITESPACE"," ",296],["T_VARIABLE","$dst",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","image",296],",",["T_WHITESPACE"," ",296],["T_LNUMBER","0",296],",",["T_WHITESPACE"," ",296],["T_LNUMBER","0",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$src_x",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$src_y",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$dst_w",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$dst_h",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$src_w",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$src_h",296],["T_WHITESPACE"," ",296],")",";",["T_WHITESPACE","\n\n\t\t",296],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_WHITESPACE"," ",298],["T_STRING","is_resource",298],"(",["T_WHITESPACE"," ",298],["T_VARIABLE","$dst",298],["T_WHITESPACE"," ",298],")",["T_WHITESPACE"," ",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n\t\t\t",298],["T_STRING","imagedestroy",299],"(",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","image",299],["T_WHITESPACE"," ",299],")",";",["T_WHITESPACE","\n\t\t\t",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","image",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$dst",300],";",["T_WHITESPACE","\n\t\t\t",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","update_size",301],"(",")",";",["T_WHITESPACE","\n\t\t\t",301],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_STRING","true",302],";",["T_WHITESPACE","\n\t\t",302],"}",["T_WHITESPACE","\n\n\t\t",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_NEW","new",305],["T_WHITESPACE"," ",305],["T_STRING","WP_Error",305],"(",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'image_crop_error'",305],",",["T_WHITESPACE"," ",305],["T_STRING","__",305],"(",["T_CONSTANT_ENCAPSED_STRING","'Image crop failed.'",305],")",",",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","file",305],["T_WHITESPACE"," ",305],")",";",["T_WHITESPACE","\n\t",305],"}",["T_WHITESPACE","\n\n\t",306],["T_DOC_COMMENT","\/**\n\t * Rotates current image counter-clockwise by $angle.\n\t * Ported from image-edit.php\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param float $angle\n\t * @return true|WP_Error\n\t *\/",308],["T_WHITESPACE","\n\t",317],["T_PUBLIC","public",318],["T_WHITESPACE"," ",318],["T_FUNCTION","function",318],["T_WHITESPACE"," ",318],["T_STRING","rotate",318],"(",["T_WHITESPACE"," ",318],["T_VARIABLE","$angle",318],["T_WHITESPACE"," ",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n\t\t",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(",["T_WHITESPACE"," ",319],["T_STRING","function_exists",319],"(",["T_CONSTANT_ENCAPSED_STRING","'imagerotate'",319],")",["T_WHITESPACE"," ",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n\t\t\t",319],["T_VARIABLE","$transparency",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","imagecolorallocatealpha",320],"(",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","image",320],",",["T_WHITESPACE"," ",320],["T_LNUMBER","255",320],",",["T_WHITESPACE"," ",320],["T_LNUMBER","255",320],",",["T_WHITESPACE"," ",320],["T_LNUMBER","255",320],",",["T_WHITESPACE"," ",320],["T_LNUMBER","127",320],["T_WHITESPACE"," ",320],")",";",["T_WHITESPACE","\n\t\t\t",320],["T_VARIABLE","$rotated",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","imagerotate",321],"(",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","image",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$angle",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$transparency",321],["T_WHITESPACE"," ",321],")",";",["T_WHITESPACE","\n\n\t\t\t",321],["T_IF","if",323],["T_WHITESPACE"," ",323],"(",["T_WHITESPACE"," ",323],["T_STRING","is_resource",323],"(",["T_WHITESPACE"," ",323],["T_VARIABLE","$rotated",323],["T_WHITESPACE"," ",323],")",["T_WHITESPACE"," ",323],")",["T_WHITESPACE"," ",323],"{",["T_WHITESPACE","\n\t\t\t\t",323],["T_STRING","imagealphablending",324],"(",["T_WHITESPACE"," ",324],["T_VARIABLE","$rotated",324],",",["T_WHITESPACE"," ",324],["T_STRING","true",324],["T_WHITESPACE"," ",324],")",";",["T_WHITESPACE","\n\t\t\t\t",324],["T_STRING","imagesavealpha",325],"(",["T_WHITESPACE"," ",325],["T_VARIABLE","$rotated",325],",",["T_WHITESPACE"," ",325],["T_STRING","true",325],["T_WHITESPACE"," ",325],")",";",["T_WHITESPACE","\n\t\t\t\t",325],["T_STRING","imagedestroy",326],"(",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","image",326],["T_WHITESPACE"," ",326],")",";",["T_WHITESPACE","\n\t\t\t\t",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","image",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$rotated",327],";",["T_WHITESPACE","\n\t\t\t\t",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","update_size",328],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",328],["T_RETURN","return",329],["T_WHITESPACE"," ",329],["T_STRING","true",329],";",["T_WHITESPACE","\n\t\t\t",329],"}",["T_WHITESPACE","\n\t\t",330],"}",["T_WHITESPACE","\n\t\t",331],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_NEW","new",332],["T_WHITESPACE"," ",332],["T_STRING","WP_Error",332],"(",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'image_rotate_error'",332],",",["T_WHITESPACE"," ",332],["T_STRING","__",332],"(",["T_CONSTANT_ENCAPSED_STRING","'Image rotate failed.'",332],")",",",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","file",332],["T_WHITESPACE"," ",332],")",";",["T_WHITESPACE","\n\t",332],"}",["T_WHITESPACE","\n\n\t",333],["T_DOC_COMMENT","\/**\n\t * Flips current image.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param bool $horz Flip along Horizontal Axis\n\t * @param bool $vert Flip along Vertical Axis\n\t * @return true|WP_Error\n\t *\/",335],["T_WHITESPACE","\n\t",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","flip",345],"(",["T_WHITESPACE"," ",345],["T_VARIABLE","$horz",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$vert",345],["T_WHITESPACE"," ",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n\t\t",345],["T_VARIABLE","$w",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","size",346],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",346],"]",";",["T_WHITESPACE","\n\t\t",346],["T_VARIABLE","$h",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","size",347],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",347],"]",";",["T_WHITESPACE","\n\t\t",347],["T_VARIABLE","$dst",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","wp_imagecreatetruecolor",348],"(",["T_WHITESPACE"," ",348],["T_VARIABLE","$w",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$h",348],["T_WHITESPACE"," ",348],")",";",["T_WHITESPACE","\n\n\t\t",348],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_WHITESPACE"," ",350],["T_STRING","is_resource",350],"(",["T_WHITESPACE"," ",350],["T_VARIABLE","$dst",350],["T_WHITESPACE"," ",350],")",["T_WHITESPACE"," ",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n\t\t\t",350],["T_VARIABLE","$sx",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_VARIABLE","$vert",351],["T_WHITESPACE"," ",351],"?",["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$w",351],["T_WHITESPACE"," ",351],"-",["T_WHITESPACE"," ",351],["T_LNUMBER","1",351],")",["T_WHITESPACE"," ",351],":",["T_WHITESPACE"," ",351],["T_LNUMBER","0",351],";",["T_WHITESPACE","\n\t\t\t",351],["T_VARIABLE","$sy",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$horz",352],["T_WHITESPACE"," ",352],"?",["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$h",352],["T_WHITESPACE"," ",352],"-",["T_WHITESPACE"," ",352],["T_LNUMBER","1",352],")",["T_WHITESPACE"," ",352],":",["T_WHITESPACE"," ",352],["T_LNUMBER","0",352],";",["T_WHITESPACE","\n\t\t\t",352],["T_VARIABLE","$sw",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$vert",353],["T_WHITESPACE"," ",353],"?",["T_WHITESPACE"," ",353],"-",["T_VARIABLE","$w",353],["T_WHITESPACE"," ",353],":",["T_WHITESPACE"," ",353],["T_VARIABLE","$w",353],";",["T_WHITESPACE","\n\t\t\t",353],["T_VARIABLE","$sh",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$horz",354],["T_WHITESPACE"," ",354],"?",["T_WHITESPACE"," ",354],"-",["T_VARIABLE","$h",354],["T_WHITESPACE"," ",354],":",["T_WHITESPACE"," ",354],["T_VARIABLE","$h",354],";",["T_WHITESPACE","\n\n\t\t\t",354],["T_IF","if",356],["T_WHITESPACE"," ",356],"(",["T_WHITESPACE"," ",356],["T_STRING","imagecopyresampled",356],"(",["T_WHITESPACE"," ",356],["T_VARIABLE","$dst",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","image",356],",",["T_WHITESPACE"," ",356],["T_LNUMBER","0",356],",",["T_WHITESPACE"," ",356],["T_LNUMBER","0",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$sx",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$sy",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$w",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$h",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$sw",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$sh",356],["T_WHITESPACE"," ",356],")",["T_WHITESPACE"," ",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n\t\t\t\t",356],["T_STRING","imagedestroy",357],"(",["T_WHITESPACE"," ",357],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","image",357],["T_WHITESPACE"," ",357],")",";",["T_WHITESPACE","\n\t\t\t\t",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","image",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$dst",358],";",["T_WHITESPACE","\n\t\t\t\t",358],["T_RETURN","return",359],["T_WHITESPACE"," ",359],["T_STRING","true",359],";",["T_WHITESPACE","\n\t\t\t",359],"}",["T_WHITESPACE","\n\t\t",360],"}",["T_WHITESPACE","\n\t\t",361],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_NEW","new",362],["T_WHITESPACE"," ",362],["T_STRING","WP_Error",362],"(",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'image_flip_error'",362],",",["T_WHITESPACE"," ",362],["T_STRING","__",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Image flip failed.'",362],")",",",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","file",362],["T_WHITESPACE"," ",362],")",";",["T_WHITESPACE","\n\t",362],"}",["T_WHITESPACE","\n\n\t",363],["T_DOC_COMMENT","\/**\n\t * Saves current in-memory image to file.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param string|null $filename\n\t * @param string|null $mime_type\n\t * @return array|WP_Error {'path'=>string, 'file'=>string, 'width'=>int, 'height'=>int, 'mime-type'=>string}\n\t *\/",365],["T_WHITESPACE","\n\t",374],["T_PUBLIC","public",375],["T_WHITESPACE"," ",375],["T_FUNCTION","function",375],["T_WHITESPACE"," ",375],["T_STRING","save",375],"(",["T_WHITESPACE"," ",375],["T_VARIABLE","$filename",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","null",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$mime_type",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","null",375],["T_WHITESPACE"," ",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n\t\t",375],["T_VARIABLE","$saved",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","_save",376],"(",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","image",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$filename",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$mime_type",376],["T_WHITESPACE"," ",376],")",";",["T_WHITESPACE","\n\n\t\t",376],["T_IF","if",378],["T_WHITESPACE"," ",378],"(",["T_WHITESPACE"," ",378],"!",["T_WHITESPACE"," ",378],["T_STRING","is_wp_error",378],"(",["T_WHITESPACE"," ",378],["T_VARIABLE","$saved",378],["T_WHITESPACE"," ",378],")",["T_WHITESPACE"," ",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n\t\t\t",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","file",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$saved",379],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",379],"]",";",["T_WHITESPACE","\n\t\t\t",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","mime_type",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$saved",380],"[",["T_CONSTANT_ENCAPSED_STRING","'mime-type'",380],"]",";",["T_WHITESPACE","\n\t\t",380],"}",["T_WHITESPACE","\n\n\t\t",381],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$saved",383],";",["T_WHITESPACE","\n\t",383],"}",["T_WHITESPACE","\n\n\t",384],["T_DOC_COMMENT","\/**\n\t * @param resource $image\n\t * @param string|null $filename\n\t * @param string|null $mime_type\n\t * @return WP_Error|array\n\t *\/",386],["T_WHITESPACE","\n\t",391],["T_PROTECTED","protected",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","_save",392],"(",["T_WHITESPACE"," ",392],["T_VARIABLE","$image",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$filename",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","null",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$mime_type",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_STRING","null",392],["T_WHITESPACE"," ",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n\t\t",392],["T_LIST","list",393],"(",["T_WHITESPACE"," ",393],["T_VARIABLE","$filename",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$extension",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$mime_type",393],["T_WHITESPACE"," ",393],")",["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","get_output_format",393],"(",["T_WHITESPACE"," ",393],["T_VARIABLE","$filename",393],",",["T_WHITESPACE"," ",393],["T_VARIABLE","$mime_type",393],["T_WHITESPACE"," ",393],")",";",["T_WHITESPACE","\n\n\t\t",393],["T_IF","if",395],["T_WHITESPACE"," ",395],"(",["T_WHITESPACE"," ",395],"!",["T_WHITESPACE"," ",395],["T_VARIABLE","$filename",395],["T_WHITESPACE"," ",395],")",["T_WHITESPACE","\n\t\t\t",395],["T_VARIABLE","$filename",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","generate_filename",396],"(",["T_WHITESPACE"," ",396],["T_STRING","null",396],",",["T_WHITESPACE"," ",396],["T_STRING","null",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$extension",396],["T_WHITESPACE"," ",396],")",";",["T_WHITESPACE","\n\n\t\t",396],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",398],["T_WHITESPACE"," ",398],["T_IS_EQUAL","==",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$mime_type",398],["T_WHITESPACE"," ",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n\t\t\t",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(",["T_WHITESPACE"," ",399],"!",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","make_image",399],"(",["T_WHITESPACE"," ",399],["T_VARIABLE","$filename",399],",",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'imagegif'",399],",",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_WHITESPACE"," ",399],["T_VARIABLE","$image",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$filename",399],["T_WHITESPACE"," ",399],")",["T_WHITESPACE"," ",399],")",["T_WHITESPACE"," ",399],")",["T_WHITESPACE","\n\t\t\t\t",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_NEW","new",400],["T_WHITESPACE"," ",400],["T_STRING","WP_Error",400],"(",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'image_save_error'",400],",",["T_WHITESPACE"," ",400],["T_STRING","__",400],"(",["T_CONSTANT_ENCAPSED_STRING","'Image Editor Save Failed'",400],")",["T_WHITESPACE"," ",400],")",";",["T_WHITESPACE","\n\t\t",400],"}",["T_WHITESPACE","\n\t\t",401],["T_ELSEIF","elseif",402],["T_WHITESPACE"," ",402],"(",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",402],["T_WHITESPACE"," ",402],["T_IS_EQUAL","==",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$mime_type",402],["T_WHITESPACE"," ",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n\t\t\t",402],["T_COMMENT","\/\/ convert from full colors to index colors, like original PNG.\n",403],["T_WHITESPACE","\t\t\t",404],["T_IF","if",404],["T_WHITESPACE"," ",404],"(",["T_WHITESPACE"," ",404],["T_STRING","function_exists",404],"(",["T_CONSTANT_ENCAPSED_STRING","'imageistruecolor'",404],")",["T_WHITESPACE"," ",404],["T_BOOLEAN_AND","&&",404],["T_WHITESPACE"," ",404],"!",["T_WHITESPACE"," ",404],["T_STRING","imageistruecolor",404],"(",["T_WHITESPACE"," ",404],["T_VARIABLE","$image",404],["T_WHITESPACE"," ",404],")",["T_WHITESPACE"," ",404],")",["T_WHITESPACE","\n\t\t\t\t",404],["T_STRING","imagetruecolortopalette",405],"(",["T_WHITESPACE"," ",405],["T_VARIABLE","$image",405],",",["T_WHITESPACE"," ",405],["T_STRING","false",405],",",["T_WHITESPACE"," ",405],["T_STRING","imagecolorstotal",405],"(",["T_WHITESPACE"," ",405],["T_VARIABLE","$image",405],["T_WHITESPACE"," ",405],")",["T_WHITESPACE"," ",405],")",";",["T_WHITESPACE","\n\n\t\t\t",405],["T_IF","if",407],["T_WHITESPACE"," ",407],"(",["T_WHITESPACE"," ",407],"!",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","make_image",407],"(",["T_WHITESPACE"," ",407],["T_VARIABLE","$filename",407],",",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'imagepng'",407],",",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],"(",["T_WHITESPACE"," ",407],["T_VARIABLE","$image",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$filename",407],["T_WHITESPACE"," ",407],")",["T_WHITESPACE"," ",407],")",["T_WHITESPACE"," ",407],")",["T_WHITESPACE","\n\t\t\t\t",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","WP_Error",408],"(",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'image_save_error'",408],",",["T_WHITESPACE"," ",408],["T_STRING","__",408],"(",["T_CONSTANT_ENCAPSED_STRING","'Image Editor Save Failed'",408],")",["T_WHITESPACE"," ",408],")",";",["T_WHITESPACE","\n\t\t",408],"}",["T_WHITESPACE","\n\t\t",409],["T_ELSEIF","elseif",410],["T_WHITESPACE"," ",410],"(",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",410],["T_WHITESPACE"," ",410],["T_IS_EQUAL","==",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$mime_type",410],["T_WHITESPACE"," ",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n\t\t\t",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_WHITESPACE"," ",411],"!",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","make_image",411],"(",["T_WHITESPACE"," ",411],["T_VARIABLE","$filename",411],",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'imagejpeg'",411],",",["T_WHITESPACE"," ",411],["T_ARRAY","array",411],"(",["T_WHITESPACE"," ",411],["T_VARIABLE","$image",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$filename",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","get_quality",411],"(",")",["T_WHITESPACE"," ",411],")",["T_WHITESPACE"," ",411],")",["T_WHITESPACE"," ",411],")",["T_WHITESPACE","\n\t\t\t\t",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_NEW","new",412],["T_WHITESPACE"," ",412],["T_STRING","WP_Error",412],"(",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'image_save_error'",412],",",["T_WHITESPACE"," ",412],["T_STRING","__",412],"(",["T_CONSTANT_ENCAPSED_STRING","'Image Editor Save Failed'",412],")",["T_WHITESPACE"," ",412],")",";",["T_WHITESPACE","\n\t\t",412],"}",["T_WHITESPACE","\n\t\t",413],["T_ELSE","else",414],["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n\t\t\t",414],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_NEW","new",415],["T_WHITESPACE"," ",415],["T_STRING","WP_Error",415],"(",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'image_save_error'",415],",",["T_WHITESPACE"," ",415],["T_STRING","__",415],"(",["T_CONSTANT_ENCAPSED_STRING","'Image Editor Save Failed'",415],")",["T_WHITESPACE"," ",415],")",";",["T_WHITESPACE","\n\t\t",415],"}",["T_WHITESPACE","\n\n\t\t",416],["T_COMMENT","\/\/ Set correct file permissions\n",418],["T_WHITESPACE","\t\t",419],["T_VARIABLE","$stat",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","stat",419],"(",["T_WHITESPACE"," ",419],["T_STRING","dirname",419],"(",["T_WHITESPACE"," ",419],["T_VARIABLE","$filename",419],["T_WHITESPACE"," ",419],")",["T_WHITESPACE"," ",419],")",";",["T_WHITESPACE","\n\t\t",419],["T_VARIABLE","$perms",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$stat",420],"[",["T_CONSTANT_ENCAPSED_STRING","'mode'",420],"]",["T_WHITESPACE"," ",420],"&",["T_WHITESPACE"," ",420],["T_LNUMBER","0000666",420],";",["T_WHITESPACE"," ",420],["T_COMMENT","\/\/same permissions as parent folder, strip off the executable bits\n",420],["T_WHITESPACE","\t\t",421],"@",["T_WHITESPACE"," ",421],["T_STRING","chmod",421],"(",["T_WHITESPACE"," ",421],["T_VARIABLE","$filename",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$perms",421],["T_WHITESPACE"," ",421],")",";",["T_WHITESPACE","\n\n\t\t",421],["T_DOC_COMMENT","\/**\n\t\t * Filters the name of the saved image file.\n\t\t *\n\t\t * @since 2.6.0\n\t\t *\n\t\t * @param string $filename Name of the file.\n\t\t *\/",423],["T_WHITESPACE","\n\t\t",429],["T_RETURN","return",430],["T_WHITESPACE"," ",430],["T_ARRAY","array",430],"(",["T_WHITESPACE","\n\t\t\t",430],["T_CONSTANT_ENCAPSED_STRING","'path'",431],["T_WHITESPACE","      ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$filename",431],",",["T_WHITESPACE","\n\t\t\t",431],["T_CONSTANT_ENCAPSED_STRING","'file'",432],["T_WHITESPACE","      ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_STRING","wp_basename",432],"(",["T_WHITESPACE"," ",432],["T_STRING","apply_filters",432],"(",["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'image_make_intermediate_size'",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$filename",432],["T_WHITESPACE"," ",432],")",["T_WHITESPACE"," ",432],")",",",["T_WHITESPACE","\n\t\t\t",432],["T_CONSTANT_ENCAPSED_STRING","'width'",433],["T_WHITESPACE","     ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","size",433],"[",["T_CONSTANT_ENCAPSED_STRING","'width'",433],"]",",",["T_WHITESPACE","\n\t\t\t",433],["T_CONSTANT_ENCAPSED_STRING","'height'",434],["T_WHITESPACE","    ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","size",434],"[",["T_CONSTANT_ENCAPSED_STRING","'height'",434],"]",",",["T_WHITESPACE","\n\t\t\t",434],["T_CONSTANT_ENCAPSED_STRING","'mime-type'",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$mime_type",435],",",["T_WHITESPACE","\n\t\t",435],")",";",["T_WHITESPACE","\n\t",436],"}",["T_WHITESPACE","\n\n\t",437],["T_DOC_COMMENT","\/**\n\t * Returns stream of current image.\n\t *\n\t * @since 3.5.0\n\t * @access public\n\t *\n\t * @param string $mime_type\n\t * @return bool\n\t *\/",439],["T_WHITESPACE","\n\t",447],["T_PUBLIC","public",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","stream",448],"(",["T_WHITESPACE"," ",448],["T_VARIABLE","$mime_type",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING","null",448],["T_WHITESPACE"," ",448],")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n\t\t",448],["T_LIST","list",449],"(",["T_WHITESPACE"," ",449],["T_VARIABLE","$filename",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$extension",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$mime_type",449],["T_WHITESPACE"," ",449],")",["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","get_output_format",449],"(",["T_WHITESPACE"," ",449],["T_STRING","null",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$mime_type",449],["T_WHITESPACE"," ",449],")",";",["T_WHITESPACE","\n\n\t\t",449],["T_SWITCH","switch",451],["T_WHITESPACE"," ",451],"(",["T_WHITESPACE"," ",451],["T_VARIABLE","$mime_type",451],["T_WHITESPACE"," ",451],")",["T_WHITESPACE"," ",451],"{",["T_WHITESPACE","\n\t\t\t",451],["T_CASE","case",452],["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",452],":",["T_WHITESPACE","\n\t\t\t\t",452],["T_STRING","header",453],"(",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: image\/png'",453],["T_WHITESPACE"," ",453],")",";",["T_WHITESPACE","\n\t\t\t\t",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_STRING","imagepng",454],"(",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","image",454],["T_WHITESPACE"," ",454],")",";",["T_WHITESPACE","\n\t\t\t",454],["T_CASE","case",455],["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'image\/gif'",455],":",["T_WHITESPACE","\n\t\t\t\t",455],["T_STRING","header",456],"(",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: image\/gif'",456],["T_WHITESPACE"," ",456],")",";",["T_WHITESPACE","\n\t\t\t\t",456],["T_RETURN","return",457],["T_WHITESPACE"," ",457],["T_STRING","imagegif",457],"(",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","image",457],["T_WHITESPACE"," ",457],")",";",["T_WHITESPACE","\n\t\t\t",457],["T_DEFAULT","default",458],":",["T_WHITESPACE","\n\t\t\t\t",458],["T_STRING","header",459],"(",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'Content-Type: image\/jpeg'",459],["T_WHITESPACE"," ",459],")",";",["T_WHITESPACE","\n\t\t\t\t",459],["T_RETURN","return",460],["T_WHITESPACE"," ",460],["T_STRING","imagejpeg",460],"(",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","image",460],",",["T_WHITESPACE"," ",460],["T_STRING","null",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","get_quality",460],"(",")",["T_WHITESPACE"," ",460],")",";",["T_WHITESPACE","\n\t\t",460],"}",["T_WHITESPACE","\n\t",461],"}",["T_WHITESPACE","\n\n\t",462],["T_DOC_COMMENT","\/**\n\t * Either calls editor's save function or handles file as a stream.\n\t *\n\t * @since 3.5.0\n\t * @access protected\n\t *\n\t * @param string|stream $filename\n\t * @param callable $function\n\t * @param array $arguments\n\t * @return bool\n\t *\/",464],["T_WHITESPACE","\n\t",474],["T_PROTECTED","protected",475],["T_WHITESPACE"," ",475],["T_FUNCTION","function",475],["T_WHITESPACE"," ",475],["T_STRING","make_image",475],"(",["T_WHITESPACE"," ",475],["T_VARIABLE","$filename",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$function",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$arguments",475],["T_WHITESPACE"," ",475],")",["T_WHITESPACE"," ",475],"{",["T_WHITESPACE","\n\t\t",475],["T_IF","if",476],["T_WHITESPACE"," ",476],"(",["T_WHITESPACE"," ",476],["T_STRING","wp_is_stream",476],"(",["T_WHITESPACE"," ",476],["T_VARIABLE","$filename",476],["T_WHITESPACE"," ",476],")",["T_WHITESPACE"," ",476],")",["T_WHITESPACE","\n\t\t\t",476],["T_VARIABLE","$arguments",477],"[",["T_LNUMBER","1",477],"]",["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","null",477],";",["T_WHITESPACE","\n\n\t\t",477],["T_RETURN","return",479],["T_WHITESPACE"," ",479],["T_STRING","parent",479],["T_DOUBLE_COLON","::",479],["T_STRING","make_image",479],"(",["T_WHITESPACE"," ",479],["T_VARIABLE","$filename",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$function",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$arguments",479],["T_WHITESPACE"," ",479],")",";",["T_WHITESPACE","\n\t",479],"}",["T_WHITESPACE","\n",480],"}",["T_WHITESPACE","\n",481]]
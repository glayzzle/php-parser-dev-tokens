[["T_OPEN_TAG","<?php\n",1],["T_DOC_COMMENT","\/**\n * HTTP API: WP_HTTP_Proxy class\n *\n * @package WordPress\n * @subpackage HTTP\n * @since 4.4.0\n *\/",2],["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Core class used to implement HTTP API proxy support.\n *\n * There are caveats to proxy support. It requires that defines be made in the wp-config.php file to\n * enable proxy support. There are also a few filters that plugins can hook into for some of the\n * constants.\n *\n * Please note that only BASIC authentication is supported by most transports.\n * cURL MAY support more methods (such as NTLM authentication) depending on your environment.\n *\n * The constants are as follows:\n * <ol>\n * <li>WP_PROXY_HOST - Enable proxy support and host for connecting.<\/li>\n * <li>WP_PROXY_PORT - Proxy port for connection. No default, must be defined.<\/li>\n * <li>WP_PROXY_USERNAME - Proxy username, if it requires authentication.<\/li>\n * <li>WP_PROXY_PASSWORD - Proxy password, if it requires authentication.<\/li>\n * <li>WP_PROXY_BYPASS_HOSTS - Will prevent the hosts in this list from going through the proxy.\n * You do not need to have localhost and the site host in this list, because they will not be passed\n * through the proxy. The list should be presented in a comma separated list, wildcards using * are supported, eg. *.wordpress.org<\/li>\n * <\/ol>\n *\n * An example can be as seen below.\n *\n *     define('WP_PROXY_HOST', '192.168.84.101');\n *     define('WP_PROXY_PORT', '8080');\n *     define('WP_PROXY_BYPASS_HOSTS', 'localhost, www.example.com, *.wordpress.org');\n *\n * @link https:\/\/core.trac.wordpress.org\/ticket\/4011 Proxy support ticket in WordPress.\n * @link https:\/\/core.trac.wordpress.org\/ticket\/14636 Allow wildcard domains in WP_PROXY_BYPASS_HOSTS\n *\n * @since 2.8.0\n *\/",10],["T_WHITESPACE","\n",41],["T_CLASS","class",42],["T_WHITESPACE"," ",42],["T_STRING","WP_HTTP_Proxy",42],["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n\n\t",42],["T_DOC_COMMENT","\/**\n\t * Whether proxy connection should be used.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @use WP_PROXY_HOST\n\t * @use WP_PROXY_PORT\n\t *\n\t * @return bool\n\t *\/",44],["T_WHITESPACE","\n\t",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","is_enabled",54],"(",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n\t\t",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_STRING","defined",55],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_HOST'",55],")",["T_WHITESPACE"," ",55],["T_BOOLEAN_AND","&&",55],["T_WHITESPACE"," ",55],["T_STRING","defined",55],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_PORT'",55],")",";",["T_WHITESPACE","\n\t",55],"}",["T_WHITESPACE","\n\n\t",56],["T_DOC_COMMENT","\/**\n\t * Whether authentication should be used.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @use WP_PROXY_USERNAME\n\t * @use WP_PROXY_PASSWORD\n\t *\n\t * @return bool\n\t *\/",58],["T_WHITESPACE","\n\t",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","use_authentication",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n\t\t",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_STRING","defined",69],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_USERNAME'",69],")",["T_WHITESPACE"," ",69],["T_BOOLEAN_AND","&&",69],["T_WHITESPACE"," ",69],["T_STRING","defined",69],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_PASSWORD'",69],")",";",["T_WHITESPACE","\n\t",69],"}",["T_WHITESPACE","\n\n\t",70],["T_DOC_COMMENT","\/**\n\t * Retrieve the host for the proxy server.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",72],["T_WHITESPACE","\n\t",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","host",79],"(",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n\t\t",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_WHITESPACE"," ",80],["T_STRING","defined",80],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_HOST'",80],")",["T_WHITESPACE"," ",80],")",["T_WHITESPACE","\n\t\t\t",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","WP_PROXY_HOST",81],";",["T_WHITESPACE","\n\n\t\t",81],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","''",83],";",["T_WHITESPACE","\n\t",83],"}",["T_WHITESPACE","\n\n\t",84],["T_DOC_COMMENT","\/**\n\t * Retrieve the port for the proxy server.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",86],["T_WHITESPACE","\n\t",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","port",93],"(",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n\t\t",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_WHITESPACE"," ",94],["T_STRING","defined",94],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_PORT'",94],")",["T_WHITESPACE"," ",94],")",["T_WHITESPACE","\n\t\t\t",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_STRING","WP_PROXY_PORT",95],";",["T_WHITESPACE","\n\n\t\t",95],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","''",97],";",["T_WHITESPACE","\n\t",97],"}",["T_WHITESPACE","\n\n\t",98],["T_DOC_COMMENT","\/**\n\t * Retrieve the username for proxy authentication.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",100],["T_WHITESPACE","\n\t",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","username",107],"(",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n\t\t",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_WHITESPACE"," ",108],["T_STRING","defined",108],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_USERNAME'",108],")",["T_WHITESPACE"," ",108],")",["T_WHITESPACE","\n\t\t\t",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_STRING","WP_PROXY_USERNAME",109],";",["T_WHITESPACE","\n\n\t\t",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],";",["T_WHITESPACE","\n\t",111],"}",["T_WHITESPACE","\n\n\t",112],["T_DOC_COMMENT","\/**\n\t * Retrieve the password for proxy authentication.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",114],["T_WHITESPACE","\n\t",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","password",121],"(",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n\t\t",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_WHITESPACE"," ",122],["T_STRING","defined",122],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_PASSWORD'",122],")",["T_WHITESPACE"," ",122],")",["T_WHITESPACE","\n\t\t\t",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_STRING","WP_PROXY_PASSWORD",123],";",["T_WHITESPACE","\n\n\t\t",123],["T_RETURN","return",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],";",["T_WHITESPACE","\n\t",125],"}",["T_WHITESPACE","\n\n\t",126],["T_DOC_COMMENT","\/**\n\t * Retrieve authentication string for proxy authentication.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",128],["T_WHITESPACE","\n\t",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","authentication",135],"(",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n\t\t",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","username",136],"(",")",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","':'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","password",136],"(",")",";",["T_WHITESPACE","\n\t",136],"}",["T_WHITESPACE","\n\n\t",137],["T_DOC_COMMENT","\/**\n\t * Retrieve header string for proxy authentication.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @return string\n\t *\/",139],["T_WHITESPACE","\n\t",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","authentication_header",146],"(",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\t\t",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'Proxy-Authorization: Basic '",147],["T_WHITESPACE"," ",147],".",["T_WHITESPACE"," ",147],["T_STRING","base64_encode",147],"(",["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","authentication",147],"(",")",["T_WHITESPACE"," ",147],")",";",["T_WHITESPACE","\n\t",147],"}",["T_WHITESPACE","\n\n\t",148],["T_DOC_COMMENT","\/**\n\t * Whether URL should be sent through the proxy server.\n\t *\n\t * We want to keep localhost and the site URL from being sent through the proxy server, because\n\t * some proxies can not handle this. We also have the constant available for defining other\n\t * hosts that won't be sent through the proxy.\n\t *\n\t * @since 2.8.0\n\t *\n\t * @staticvar array|null $bypass_hosts\n\t * @staticvar array      $wildcard_regex\n\t *\n\t * @param string $uri URI to check.\n\t * @return bool True, to send through the proxy and false if, the proxy should not be used.\n\t *\/",150],["T_WHITESPACE","\n\t",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","send_through_proxy",165],"(",["T_WHITESPACE"," ",165],["T_VARIABLE","$uri",165],["T_WHITESPACE"," ",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n\t\t",165],["T_COMMENT","\/*\n\t\t * parse_url() only handles http, https type URLs, and will emit E_WARNING on failure.\n\t\t * This will be displayed on sites, which is not reasonable.\n\t\t *\/",166],["T_WHITESPACE","\n\t\t",169],["T_VARIABLE","$check",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"@",["T_STRING","parse_url",170],"(",["T_VARIABLE","$uri",170],")",";",["T_WHITESPACE","\n\n\t\t",170],["T_COMMENT","\/\/ Malformed URL, can not process, but this could mean ssl, so let through anyway.\n",172],["T_WHITESPACE","\t\t",173],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_WHITESPACE"," ",173],["T_VARIABLE","$check",173],["T_WHITESPACE"," ",173],["T_IS_IDENTICAL","===",173],["T_WHITESPACE"," ",173],["T_STRING","false",173],["T_WHITESPACE"," ",173],")",["T_WHITESPACE","\n\t\t\t",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","true",174],";",["T_WHITESPACE","\n\n\t\t",174],["T_VARIABLE","$home",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","parse_url",176],"(",["T_WHITESPACE"," ",176],["T_STRING","get_option",176],"(",["T_CONSTANT_ENCAPSED_STRING","'siteurl'",176],")",["T_WHITESPACE"," ",176],")",";",["T_WHITESPACE","\n\n\t\t",176],["T_DOC_COMMENT","\/**\n\t\t * Filters whether to preempt sending the request through the proxy server.\n\t\t *\n\t\t * Returning false will bypass the proxy; returning true will send\n\t\t * the request through the proxy. Returning null bypasses the filter.\n\t\t *\n\t\t * @since 3.5.0\n\t\t *\n\t\t * @param null   $override Whether to override the request result. Default null.\n\t\t * @param string $uri      URL to check.\n\t\t * @param array  $check    Associative array result of parsing the URI.\n\t\t * @param array  $home     Associative array result of parsing the site URL.\n\t\t *\/",178],["T_WHITESPACE","\n\t\t",190],["T_VARIABLE","$result",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","apply_filters",191],"(",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'pre_http_send_through_proxy'",191],",",["T_WHITESPACE"," ",191],["T_STRING","null",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$uri",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$check",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$home",191],["T_WHITESPACE"," ",191],")",";",["T_WHITESPACE","\n\t\t",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_WHITESPACE"," ",192],"!",["T_WHITESPACE"," ",192],["T_STRING","is_null",192],"(",["T_WHITESPACE"," ",192],["T_VARIABLE","$result",192],["T_WHITESPACE"," ",192],")",["T_WHITESPACE"," ",192],")",["T_WHITESPACE","\n\t\t\t",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$result",193],";",["T_WHITESPACE","\n\n\t\t",193],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'localhost'",195],["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$check",195],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",195],"]",["T_WHITESPACE"," ",195],["T_BOOLEAN_OR","||",195],["T_WHITESPACE"," ",195],"(",["T_WHITESPACE"," ",195],["T_ISSET","isset",195],"(",["T_WHITESPACE"," ",195],["T_VARIABLE","$home",195],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",195],"]",["T_WHITESPACE"," ",195],")",["T_WHITESPACE"," ",195],["T_BOOLEAN_AND","&&",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$home",195],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",195],"]",["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$check",195],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",195],"]",["T_WHITESPACE"," ",195],")",["T_WHITESPACE"," ",195],")",["T_WHITESPACE","\n\t\t\t",195],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_STRING","false",196],";",["T_WHITESPACE","\n\n\t\t",196],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_WHITESPACE"," ",198],"!",["T_STRING","defined",198],"(",["T_CONSTANT_ENCAPSED_STRING","'WP_PROXY_BYPASS_HOSTS'",198],")",["T_WHITESPACE"," ",198],")",["T_WHITESPACE","\n\t\t\t",198],["T_RETURN","return",199],["T_WHITESPACE"," ",199],["T_STRING","true",199],";",["T_WHITESPACE","\n\n\t\t",199],["T_STATIC","static",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$bypass_hosts",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","null",201],";",["T_WHITESPACE","\n\t\t",201],["T_STATIC","static",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$wildcard_regex",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",")",";",["T_WHITESPACE","\n\t\t",202],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_WHITESPACE"," ",203],["T_STRING","null",203],["T_WHITESPACE"," ",203],["T_IS_IDENTICAL","===",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$bypass_hosts",203],["T_WHITESPACE"," ",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n\t\t\t",203],["T_VARIABLE","$bypass_hosts",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","preg_split",204],"(",["T_CONSTANT_ENCAPSED_STRING","'|,\\s*|'",204],",",["T_WHITESPACE"," ",204],["T_STRING","WP_PROXY_BYPASS_HOSTS",204],")",";",["T_WHITESPACE","\n\n\t\t\t",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_WHITESPACE"," ",206],["T_STRING","false",206],["T_WHITESPACE"," ",206],["T_IS_NOT_IDENTICAL","!==",206],["T_WHITESPACE"," ",206],["T_STRING","strpos",206],"(",["T_STRING","WP_PROXY_BYPASS_HOSTS",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'*'",206],")",["T_WHITESPACE"," ",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n\t\t\t\t",206],["T_VARIABLE","$wildcard_regex",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",")",";",["T_WHITESPACE","\n\t\t\t\t",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_WHITESPACE"," ",208],["T_VARIABLE","$bypass_hosts",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$host",208],["T_WHITESPACE"," ",208],")",["T_WHITESPACE","\n\t\t\t\t\t",208],["T_VARIABLE","$wildcard_regex",209],"[","]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","str_replace",209],"(",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'\\*'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'.+'",209],",",["T_WHITESPACE"," ",209],["T_STRING","preg_quote",209],"(",["T_WHITESPACE"," ",209],["T_VARIABLE","$host",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'\/'",209],["T_WHITESPACE"," ",209],")",["T_WHITESPACE"," ",209],")",";",["T_WHITESPACE","\n\t\t\t\t",209],["T_VARIABLE","$wildcard_regex",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'\/^('",210],["T_WHITESPACE"," ",210],".",["T_WHITESPACE"," ",210],["T_STRING","implode",210],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$wildcard_regex",210],")",["T_WHITESPACE"," ",210],".",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","')$\/i'",210],";",["T_WHITESPACE","\n\t\t\t",210],"}",["T_WHITESPACE","\n\t\t",211],"}",["T_WHITESPACE","\n\n\t\t",212],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_WHITESPACE"," ",214],"!",["T_EMPTY","empty",214],"(",["T_VARIABLE","$wildcard_regex",214],")",["T_WHITESPACE"," ",214],")",["T_WHITESPACE","\n\t\t\t",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],"!",["T_STRING","preg_match",215],"(",["T_VARIABLE","$wildcard_regex",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$check",215],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",215],"]",")",";",["T_WHITESPACE","\n\t\t",215],["T_ELSE","else",216],["T_WHITESPACE","\n\t\t\t",216],["T_RETURN","return",217],["T_WHITESPACE"," ",217],"!",["T_STRING","in_array",217],"(",["T_WHITESPACE"," ",217],["T_VARIABLE","$check",217],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",217],"]",",",["T_WHITESPACE"," ",217],["T_VARIABLE","$bypass_hosts",217],["T_WHITESPACE"," ",217],")",";",["T_WHITESPACE","\n\t",217],"}",["T_WHITESPACE","\n",218],"}",["T_WHITESPACE","\n",219]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bridge",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Doctrine",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpFoundation",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Doctrine",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DBAL",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Connection",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Doctrine",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DBAL",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Driver",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DriverException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Doctrine",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DBAL",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Driver",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ServerInfoAwareConnection",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Doctrine",17],["T_NS_SEPARATOR","\\",17],["T_STRING","DBAL",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Platforms",17],["T_NS_SEPARATOR","\\",17],["T_STRING","SQLServer2008Platform",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * DBAL based session storage.\n *\n * This implementation is very similar to Symfony\\Component\\HttpFoundation\\Session\\Storage\\Handler\\PdoSessionHandler\n * but uses a Doctrine connection and thus also works with non-PDO-based drivers like mysqli and OCI8.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n * @author Johannes M. Schmitt <schmittjoh@gmail.com>\n * @author Tobias Schultze <http:\/\/tobion.de>\n *\/",19],["T_WHITESPACE","\n",28],["T_CLASS","class",29],["T_WHITESPACE"," ",29],["T_STRING","DbalSessionHandler",29],["T_WHITESPACE"," ",29],["T_IMPLEMENTS","implements",29],["T_WHITESPACE"," ",29],["T_NS_SEPARATOR","\\",29],["T_STRING","SessionHandlerInterface",29],["T_WHITESPACE","\n",29],"{",["T_WHITESPACE","\n    ",30],["T_DOC_COMMENT","\/**\n     * @var Connection\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$con",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",36],["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$table",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @var string Column for session id\n     *\/",41],["T_WHITESPACE","\n    ",43],["T_PRIVATE","private",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$idCol",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'sess_id'",44],";",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * @var string Column for session data\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PRIVATE","private",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$dataCol",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'sess_data'",49],";",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @var string Column for timestamp\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PRIVATE","private",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$timeCol",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'sess_time'",54],";",["T_WHITESPACE","\n\n    ",54],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param Connection $con       A connection\n     * @param string     $tableName Table name\n     *\/",56],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","__construct",62],"(",["T_STRING","Connection",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$con",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$tableName",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'sessions'",62],")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","con",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$con",64],";",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","table",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$tableName",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",68],["T_WHITESPACE","\n    ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","open",71],"(",["T_VARIABLE","$savePath",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$sessionName",71],")",["T_WHITESPACE","\n    ",71],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_STRING","true",73],";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","close",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_STRING","true",81],";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","destroy",87],"(",["T_VARIABLE","$sessionId",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_COMMENT","\/\/ delete the record associated with this id\n",89],["T_WHITESPACE","        ",90],["T_VARIABLE","$sql",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"\"",["T_ENCAPSED_AND_WHITESPACE","DELETE FROM ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","table",90],["T_ENCAPSED_AND_WHITESPACE"," WHERE ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","idCol",90],["T_ENCAPSED_AND_WHITESPACE"," = :id",90],"\"",";",["T_WHITESPACE","\n\n        ",90],["T_TRY","try",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$stmt",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","con",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","prepare",93],"(",["T_VARIABLE","$sql",93],")",";",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$stmt",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","bindParam",94],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$sessionId",94],",",["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","PDO",94],["T_DOUBLE_COLON","::",94],["T_STRING","PARAM_STR",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$stmt",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","execute",95],"(",")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE"," ",96],["T_CATCH","catch",96],["T_WHITESPACE"," ",96],"(",["T_NS_SEPARATOR","\\",96],["T_STRING","Exception",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$e",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n            ",96],["T_THROW","throw",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_NS_SEPARATOR","\\",97],["T_STRING","RuntimeException",97],"(",["T_STRING","sprintf",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception was thrown when trying to delete a session: %s'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$e",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getMessage",97],"(",")",")",",",["T_WHITESPACE"," ",97],["T_LNUMBER","0",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$e",97],")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n\n        ",98],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_STRING","true",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",103],["T_WHITESPACE","\n    ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","gc",106],"(",["T_VARIABLE","$maxlifetime",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_COMMENT","\/\/ delete the session records that have expired\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$sql",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"\"",["T_ENCAPSED_AND_WHITESPACE","DELETE FROM ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","table",109],["T_ENCAPSED_AND_WHITESPACE"," WHERE ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","timeCol",109],["T_ENCAPSED_AND_WHITESPACE"," < :time",109],"\"",";",["T_WHITESPACE","\n\n        ",109],["T_TRY","try",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$stmt",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","con",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","prepare",112],"(",["T_VARIABLE","$sql",112],")",";",["T_WHITESPACE","\n            ",112],["T_VARIABLE","$stmt",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","bindValue",113],"(",["T_CONSTANT_ENCAPSED_STRING","':time'",113],",",["T_WHITESPACE"," ",113],["T_STRING","time",113],"(",")",["T_WHITESPACE"," ",113],"-",["T_WHITESPACE"," ",113],["T_VARIABLE","$maxlifetime",113],",",["T_WHITESPACE"," ",113],["T_NS_SEPARATOR","\\",113],["T_STRING","PDO",113],["T_DOUBLE_COLON","::",113],["T_STRING","PARAM_INT",113],")",";",["T_WHITESPACE","\n            ",113],["T_VARIABLE","$stmt",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","execute",114],"(",")",";",["T_WHITESPACE","\n        ",114],"}",["T_WHITESPACE"," ",115],["T_CATCH","catch",115],["T_WHITESPACE"," ",115],"(",["T_NS_SEPARATOR","\\",115],["T_STRING","Exception",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$e",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","RuntimeException",116],"(",["T_STRING","sprintf",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception was thrown when trying to delete expired sessions: %s'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$e",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getMessage",116],"(",")",")",",",["T_WHITESPACE"," ",116],["T_LNUMBER","0",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$e",116],")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","true",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",122],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","read",125],"(",["T_VARIABLE","$sessionId",125],")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$sql",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"\"",["T_ENCAPSED_AND_WHITESPACE","SELECT ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","dataCol",127],["T_ENCAPSED_AND_WHITESPACE"," FROM ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","table",127],["T_ENCAPSED_AND_WHITESPACE"," WHERE ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","idCol",127],["T_ENCAPSED_AND_WHITESPACE"," = :id",127],"\"",";",["T_WHITESPACE","\n\n        ",127],["T_TRY","try",129],["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$stmt",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","con",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","prepare",130],"(",["T_VARIABLE","$sql",130],")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$stmt",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","bindParam",131],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$sessionId",131],",",["T_WHITESPACE"," ",131],["T_NS_SEPARATOR","\\",131],["T_STRING","PDO",131],["T_DOUBLE_COLON","::",131],["T_STRING","PARAM_STR",131],")",";",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$stmt",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","execute",132],"(",")",";",["T_WHITESPACE","\n\n            ",132],["T_COMMENT","\/\/ We use fetchAll instead of fetchColumn to make sure the DB cursor gets closed\n",134],["T_WHITESPACE","            ",135],["T_VARIABLE","$sessionRows",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$stmt",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","fetchAll",135],"(",["T_NS_SEPARATOR","\\",135],["T_STRING","PDO",135],["T_DOUBLE_COLON","::",135],["T_STRING","FETCH_NUM",135],")",";",["T_WHITESPACE","\n\n            ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$sessionRows",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n                ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_STRING","base64_decode",138],"(",["T_VARIABLE","$sessionRows",138],"[",["T_LNUMBER","0",138],"]","[",["T_LNUMBER","0",138],"]",")",";",["T_WHITESPACE","\n            ",138],"}",["T_WHITESPACE","\n\n            ",139],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","''",141],";",["T_WHITESPACE","\n        ",141],"}",["T_WHITESPACE"," ",142],["T_CATCH","catch",142],["T_WHITESPACE"," ",142],"(",["T_NS_SEPARATOR","\\",142],["T_STRING","Exception",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$e",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_THROW","throw",143],["T_WHITESPACE"," ",143],["T_NEW","new",143],["T_WHITESPACE"," ",143],["T_NS_SEPARATOR","\\",143],["T_STRING","RuntimeException",143],"(",["T_STRING","sprintf",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception was thrown when trying to read the session data: %s'",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getMessage",143],"(",")",")",",",["T_WHITESPACE"," ",143],["T_LNUMBER","0",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",147],["T_WHITESPACE","\n    ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","write",150],"(",["T_VARIABLE","$sessionId",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$data",150],")",["T_WHITESPACE","\n    ",150],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$encoded",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_STRING","base64_encode",152],"(",["T_VARIABLE","$data",152],")",";",["T_WHITESPACE","\n\n        ",152],["T_TRY","try",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n            ",154],["T_COMMENT","\/\/ We use a single MERGE SQL query when supported by the database.\n",155],["T_WHITESPACE","            ",156],["T_VARIABLE","$mergeSql",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getMergeSql",156],"(",")",";",["T_WHITESPACE","\n\n            ",156],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_STRING","null",158],["T_WHITESPACE"," ",158],["T_IS_NOT_IDENTICAL","!==",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$mergeSql",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                ",158],["T_VARIABLE","$mergeStmt",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","con",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","prepare",159],"(",["T_VARIABLE","$mergeSql",159],")",";",["T_WHITESPACE","\n                ",159],["T_VARIABLE","$mergeStmt",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","bindParam",160],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$sessionId",160],",",["T_WHITESPACE"," ",160],["T_NS_SEPARATOR","\\",160],["T_STRING","PDO",160],["T_DOUBLE_COLON","::",160],["T_STRING","PARAM_STR",160],")",";",["T_WHITESPACE","\n                ",160],["T_VARIABLE","$mergeStmt",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","bindParam",161],"(",["T_CONSTANT_ENCAPSED_STRING","':data'",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$encoded",161],",",["T_WHITESPACE"," ",161],["T_NS_SEPARATOR","\\",161],["T_STRING","PDO",161],["T_DOUBLE_COLON","::",161],["T_STRING","PARAM_STR",161],")",";",["T_WHITESPACE","\n                ",161],["T_VARIABLE","$mergeStmt",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","bindValue",162],"(",["T_CONSTANT_ENCAPSED_STRING","':time'",162],",",["T_WHITESPACE"," ",162],["T_STRING","time",162],"(",")",",",["T_WHITESPACE"," ",162],["T_NS_SEPARATOR","\\",162],["T_STRING","PDO",162],["T_DOUBLE_COLON","::",162],["T_STRING","PARAM_INT",162],")",";",["T_WHITESPACE","\n\n                ",162],["T_COMMENT","\/\/ Oracle has a bug that will intermittently happen if you\n",164],["T_WHITESPACE","                ",165],["T_COMMENT","\/\/ have only 1 bind on a CLOB field for 2 different statements\n",165],["T_WHITESPACE","                ",166],["T_COMMENT","\/\/ (INSERT and UPDATE in this case)\n",166],["T_WHITESPACE","                ",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_CONSTANT_ENCAPSED_STRING","'oracle'",167],["T_WHITESPACE"," ",167],["T_IS_EQUAL","==",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","con",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getDatabasePlatform",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","getName",167],"(",")",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n                    ",167],["T_VARIABLE","$mergeStmt",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","bindParam",168],"(",["T_CONSTANT_ENCAPSED_STRING","':data2'",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$encoded",168],",",["T_WHITESPACE"," ",168],["T_NS_SEPARATOR","\\",168],["T_STRING","PDO",168],["T_DOUBLE_COLON","::",168],["T_STRING","PARAM_STR",168],")",";",["T_WHITESPACE","\n                ",168],"}",["T_WHITESPACE","\n\n                ",169],["T_VARIABLE","$mergeStmt",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","execute",171],"(",")",";",["T_WHITESPACE","\n\n                ",171],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_STRING","true",173],";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n\n            ",174],["T_VARIABLE","$updateStmt",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","con",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","prepare",176],"(",["T_WHITESPACE","\n                ",176],"\"",["T_ENCAPSED_AND_WHITESPACE","UPDATE ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","table",177],["T_ENCAPSED_AND_WHITESPACE"," SET ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","dataCol",177],["T_ENCAPSED_AND_WHITESPACE"," = :data, ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","timeCol",177],["T_ENCAPSED_AND_WHITESPACE"," = :time WHERE ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","idCol",177],["T_ENCAPSED_AND_WHITESPACE"," = :id",177],"\"",["T_WHITESPACE","\n            ",177],")",";",["T_WHITESPACE","\n            ",178],["T_VARIABLE","$updateStmt",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","bindParam",179],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$sessionId",179],",",["T_WHITESPACE"," ",179],["T_NS_SEPARATOR","\\",179],["T_STRING","PDO",179],["T_DOUBLE_COLON","::",179],["T_STRING","PARAM_STR",179],")",";",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$updateStmt",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","bindParam",180],"(",["T_CONSTANT_ENCAPSED_STRING","':data'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$encoded",180],",",["T_WHITESPACE"," ",180],["T_NS_SEPARATOR","\\",180],["T_STRING","PDO",180],["T_DOUBLE_COLON","::",180],["T_STRING","PARAM_STR",180],")",";",["T_WHITESPACE","\n            ",180],["T_VARIABLE","$updateStmt",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","bindValue",181],"(",["T_CONSTANT_ENCAPSED_STRING","':time'",181],",",["T_WHITESPACE"," ",181],["T_STRING","time",181],"(",")",",",["T_WHITESPACE"," ",181],["T_NS_SEPARATOR","\\",181],["T_STRING","PDO",181],["T_DOUBLE_COLON","::",181],["T_STRING","PARAM_INT",181],")",";",["T_WHITESPACE","\n            ",181],["T_VARIABLE","$updateStmt",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","execute",182],"(",")",";",["T_WHITESPACE","\n\n            ",182],["T_COMMENT","\/\/ When MERGE is not supported, like in Postgres < 9.5, we have to use this approach that can result in\n",184],["T_WHITESPACE","            ",185],["T_COMMENT","\/\/ duplicate key errors when the same session is written simultaneously. We can just catch such an\n",185],["T_WHITESPACE","            ",186],["T_COMMENT","\/\/ error and re-execute the update. This is similar to a serializable transaction with retry logic\n",186],["T_WHITESPACE","            ",187],["T_COMMENT","\/\/ on serialization failures but without the overhead and without possible false positives due to\n",187],["T_WHITESPACE","            ",188],["T_COMMENT","\/\/ longer gap locking.\n",188],["T_WHITESPACE","            ",189],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_VARIABLE","$updateStmt",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","rowCount",189],"(",")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n                ",189],["T_TRY","try",190],["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n                    ",190],["T_VARIABLE","$insertStmt",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","con",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","prepare",191],"(",["T_WHITESPACE","\n                        ",191],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","table",192],["T_ENCAPSED_AND_WHITESPACE"," (",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","idCol",192],["T_ENCAPSED_AND_WHITESPACE",", ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","dataCol",192],["T_ENCAPSED_AND_WHITESPACE",", ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","timeCol",192],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time)",192],"\"",["T_WHITESPACE","\n                    ",192],")",";",["T_WHITESPACE","\n                    ",193],["T_VARIABLE","$insertStmt",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","bindParam",194],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$sessionId",194],",",["T_WHITESPACE"," ",194],["T_NS_SEPARATOR","\\",194],["T_STRING","PDO",194],["T_DOUBLE_COLON","::",194],["T_STRING","PARAM_STR",194],")",";",["T_WHITESPACE","\n                    ",194],["T_VARIABLE","$insertStmt",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","bindParam",195],"(",["T_CONSTANT_ENCAPSED_STRING","':data'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$encoded",195],",",["T_WHITESPACE"," ",195],["T_NS_SEPARATOR","\\",195],["T_STRING","PDO",195],["T_DOUBLE_COLON","::",195],["T_STRING","PARAM_STR",195],")",";",["T_WHITESPACE","\n                    ",195],["T_VARIABLE","$insertStmt",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","bindValue",196],"(",["T_CONSTANT_ENCAPSED_STRING","':time'",196],",",["T_WHITESPACE"," ",196],["T_STRING","time",196],"(",")",",",["T_WHITESPACE"," ",196],["T_NS_SEPARATOR","\\",196],["T_STRING","PDO",196],["T_DOUBLE_COLON","::",196],["T_STRING","PARAM_INT",196],")",";",["T_WHITESPACE","\n                    ",196],["T_VARIABLE","$insertStmt",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","execute",197],"(",")",";",["T_WHITESPACE","\n                ",197],"}",["T_WHITESPACE"," ",198],["T_CATCH","catch",198],["T_WHITESPACE"," ",198],"(",["T_NS_SEPARATOR","\\",198],["T_STRING","Exception",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$e",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n                    ",198],["T_VARIABLE","$driverException",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$e",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getPrevious",199],"(",")",";",["T_WHITESPACE","\n                    ",199],["T_COMMENT","\/\/ Handle integrity violation SQLSTATE 23000 (or a subclass like 23505 in Postgres) for duplicate keys\n",200],["T_WHITESPACE","                    ",201],["T_COMMENT","\/\/ DriverException only available since DBAL 2.5\n",201],["T_WHITESPACE","                    ",202],["T_IF","if",202],["T_WHITESPACE"," ",202],"(",["T_WHITESPACE","\n                        ",202],"(",["T_VARIABLE","$driverException",203],["T_WHITESPACE"," ",203],["T_INSTANCEOF","instanceof",203],["T_WHITESPACE"," ",203],["T_STRING","DriverException",203],["T_WHITESPACE"," ",203],["T_BOOLEAN_AND","&&",203],["T_WHITESPACE"," ",203],["T_LNUMBER","0",203],["T_WHITESPACE"," ",203],["T_IS_IDENTICAL","===",203],["T_WHITESPACE"," ",203],["T_STRING","strpos",203],"(",["T_VARIABLE","$driverException",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getSQLState",203],"(",")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'23'",203],")",")",["T_WHITESPACE"," ",203],["T_BOOLEAN_OR","||",203],["T_WHITESPACE","\n                        ",203],"(",["T_VARIABLE","$driverException",204],["T_WHITESPACE"," ",204],["T_INSTANCEOF","instanceof",204],["T_WHITESPACE"," ",204],["T_NS_SEPARATOR","\\",204],["T_STRING","PDOException",204],["T_WHITESPACE"," ",204],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],["T_LNUMBER","0",204],["T_WHITESPACE"," ",204],["T_IS_IDENTICAL","===",204],["T_WHITESPACE"," ",204],["T_STRING","strpos",204],"(",["T_VARIABLE","$driverException",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getCode",204],"(",")",",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'23'",204],")",")",["T_WHITESPACE","\n                    ",204],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                        ",205],["T_VARIABLE","$updateStmt",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","execute",206],"(",")",";",["T_WHITESPACE","\n                    ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                        ",207],["T_THROW","throw",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$e",208],";",["T_WHITESPACE","\n                    ",208],"}",["T_WHITESPACE","\n                ",209],"}",["T_WHITESPACE","\n            ",210],"}",["T_WHITESPACE","\n        ",211],"}",["T_WHITESPACE"," ",212],["T_CATCH","catch",212],["T_WHITESPACE"," ",212],"(",["T_NS_SEPARATOR","\\",212],["T_STRING","Exception",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$e",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n            ",212],["T_THROW","throw",213],["T_WHITESPACE"," ",213],["T_NEW","new",213],["T_WHITESPACE"," ",213],["T_NS_SEPARATOR","\\",213],["T_STRING","RuntimeException",213],"(",["T_STRING","sprintf",213],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception was thrown when trying to write the session data: %s'",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$e",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getMessage",213],"(",")",")",",",["T_WHITESPACE"," ",213],["T_LNUMBER","0",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$e",213],")",";",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n\n        ",214],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","true",216],";",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_DOC_COMMENT","\/**\n     * Returns a merge\/upsert (i.e. insert or update) SQL query when supported by the database.\n     *\n     * @return string|null The SQL string or null when not supported\n     *\/",219],["T_WHITESPACE","\n    ",223],["T_PRIVATE","private",224],["T_WHITESPACE"," ",224],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","getMergeSql",224],"(",")",["T_WHITESPACE","\n    ",224],"{",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$platform",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","con",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDatabasePlatform",226],"(",")",["T_OBJECT_OPERATOR","->",226],["T_STRING","getName",226],"(",")",";",["T_WHITESPACE","\n\n        ",226],["T_SWITCH","switch",228],["T_WHITESPACE"," ",228],"(",["T_STRING","true",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n            ",228],["T_CASE","case",229],["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'mysql'",229],["T_WHITESPACE"," ",229],["T_IS_IDENTICAL","===",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$platform",229],":",["T_WHITESPACE","\n                ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","table",230],["T_ENCAPSED_AND_WHITESPACE"," (",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","idCol",230],["T_ENCAPSED_AND_WHITESPACE",", ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","dataCol",230],["T_ENCAPSED_AND_WHITESPACE",", ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","timeCol",230],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time) ",230],"\"",".",["T_WHITESPACE","\n                    ",230],"\"",["T_ENCAPSED_AND_WHITESPACE","ON DUPLICATE KEY UPDATE ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","dataCol",231],["T_ENCAPSED_AND_WHITESPACE"," = VALUES(",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","dataCol",231],["T_ENCAPSED_AND_WHITESPACE","), ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","timeCol",231],["T_ENCAPSED_AND_WHITESPACE"," = VALUES(",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","timeCol",231],["T_ENCAPSED_AND_WHITESPACE",")",231],"\"",";",["T_WHITESPACE","\n            ",231],["T_CASE","case",232],["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'oracle'",232],["T_WHITESPACE"," ",232],["T_IS_IDENTICAL","===",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$platform",232],":",["T_WHITESPACE","\n                ",232],["T_COMMENT","\/\/ DUAL is Oracle specific dummy table\n",233],["T_WHITESPACE","                ",234],["T_RETURN","return",234],["T_WHITESPACE"," ",234],"\"",["T_ENCAPSED_AND_WHITESPACE","MERGE INTO ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","table",234],["T_ENCAPSED_AND_WHITESPACE"," USING DUAL ON (",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","idCol",234],["T_ENCAPSED_AND_WHITESPACE"," = :id) ",234],"\"",".",["T_WHITESPACE","\n                    ",234],"\"",["T_ENCAPSED_AND_WHITESPACE","WHEN NOT MATCHED THEN INSERT (",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","idCol",235],["T_ENCAPSED_AND_WHITESPACE",", ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","dataCol",235],["T_ENCAPSED_AND_WHITESPACE",", ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","timeCol",235],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time) ",235],"\"",".",["T_WHITESPACE","\n                    ",235],"\"",["T_ENCAPSED_AND_WHITESPACE","WHEN MATCHED THEN UPDATE SET ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","dataCol",236],["T_ENCAPSED_AND_WHITESPACE"," = :data2, ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","timeCol",236],["T_ENCAPSED_AND_WHITESPACE"," = :time",236],"\"",";",["T_WHITESPACE","\n            ",236],["T_CASE","case",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","con",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getDatabasePlatform",237],"(",")",["T_WHITESPACE"," ",237],["T_INSTANCEOF","instanceof",237],["T_WHITESPACE"," ",237],["T_STRING","SQLServer2008Platform",237],":",["T_WHITESPACE","\n                ",237],["T_COMMENT","\/\/ MERGE is only available since SQL Server 2008 and must be terminated by semicolon\n",238],["T_WHITESPACE","                ",239],["T_COMMENT","\/\/ It also requires HOLDLOCK according to http:\/\/weblogs.sqlteam.com\/dang\/archive\/2009\/01\/31\/UPSERT-Race-Condition-With-MERGE.aspx\n",239],["T_WHITESPACE","                ",240],["T_RETURN","return",240],["T_WHITESPACE"," ",240],"\"",["T_ENCAPSED_AND_WHITESPACE","MERGE INTO ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","table",240],["T_ENCAPSED_AND_WHITESPACE"," WITH (HOLDLOCK) USING (SELECT 1 AS dummy) AS src ON (",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","idCol",240],["T_ENCAPSED_AND_WHITESPACE"," = :id) ",240],"\"",".",["T_WHITESPACE","\n                    ",240],"\"",["T_ENCAPSED_AND_WHITESPACE","WHEN NOT MATCHED THEN INSERT (",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","idCol",241],["T_ENCAPSED_AND_WHITESPACE",", ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","dataCol",241],["T_ENCAPSED_AND_WHITESPACE",", ",241],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","timeCol",241],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time) ",241],"\"",".",["T_WHITESPACE","\n                    ",241],"\"",["T_ENCAPSED_AND_WHITESPACE","WHEN MATCHED THEN UPDATE SET ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","dataCol",242],["T_ENCAPSED_AND_WHITESPACE"," = :data, ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","timeCol",242],["T_ENCAPSED_AND_WHITESPACE"," = :time;",242],"\"",";",["T_WHITESPACE","\n            ",242],["T_CASE","case",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",243],["T_WHITESPACE"," ",243],["T_IS_IDENTICAL","===",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$platform",243],":",["T_WHITESPACE","\n                ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT OR REPLACE INTO ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","table",244],["T_ENCAPSED_AND_WHITESPACE"," (",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","idCol",244],["T_ENCAPSED_AND_WHITESPACE",", ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","dataCol",244],["T_ENCAPSED_AND_WHITESPACE",", ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","timeCol",244],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time)",244],"\"",";",["T_WHITESPACE","\n            ",244],["T_CASE","case",245],["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'postgresql'",245],["T_WHITESPACE"," ",245],["T_IS_IDENTICAL","===",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$platform",245],["T_WHITESPACE"," ",245],["T_BOOLEAN_AND","&&",245],["T_WHITESPACE"," ",245],["T_STRING","version_compare",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getServerVersion",245],"(",")",",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'9.5'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'>='",245],")",":",["T_WHITESPACE","\n                ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],"\"",["T_ENCAPSED_AND_WHITESPACE","INSERT INTO ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","table",246],["T_ENCAPSED_AND_WHITESPACE"," (",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","idCol",246],["T_ENCAPSED_AND_WHITESPACE",", ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","dataCol",246],["T_ENCAPSED_AND_WHITESPACE",", ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","timeCol",246],["T_ENCAPSED_AND_WHITESPACE",") VALUES (:id, :data, :time) ",246],"\"",".",["T_WHITESPACE","\n                    ",246],"\"",["T_ENCAPSED_AND_WHITESPACE","ON CONFLICT (",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","idCol",247],["T_ENCAPSED_AND_WHITESPACE",") DO UPDATE SET (",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","dataCol",247],["T_ENCAPSED_AND_WHITESPACE",", ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","timeCol",247],["T_ENCAPSED_AND_WHITESPACE",") = (EXCLUDED.",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","dataCol",247],["T_ENCAPSED_AND_WHITESPACE",", EXCLUDED.",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","timeCol",247],["T_ENCAPSED_AND_WHITESPACE",")",247],"\"",";",["T_WHITESPACE","\n        ",247],"}",["T_WHITESPACE","\n    ",248],"}",["T_WHITESPACE","\n\n    ",249],["T_PRIVATE","private",251],["T_WHITESPACE"," ",251],["T_FUNCTION","function",251],["T_WHITESPACE"," ",251],["T_STRING","getServerVersion",251],"(",")",["T_WHITESPACE","\n    ",251],"{",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$params",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","con",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getParams",253],"(",")",";",["T_WHITESPACE","\n\n        ",253],["T_COMMENT","\/\/ Explicit platform version requested (supersedes auto-detection), so we respect it.\n",255],["T_WHITESPACE","        ",256],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_ISSET","isset",256],"(",["T_VARIABLE","$params",256],"[",["T_CONSTANT_ENCAPSED_STRING","'serverVersion'",256],"]",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n            ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$params",257],"[",["T_CONSTANT_ENCAPSED_STRING","'serverVersion'",257],"]",";",["T_WHITESPACE","\n        ",257],"}",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$wrappedConnection",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","con",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getWrappedConnection",260],"(",")",";",["T_WHITESPACE","\n\n        ",260],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$wrappedConnection",262],["T_WHITESPACE"," ",262],["T_INSTANCEOF","instanceof",262],["T_WHITESPACE"," ",262],["T_STRING","ServerInfoAwareConnection",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n            ",262],["T_RETURN","return",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$wrappedConnection",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getServerVersion",263],"(",")",";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n\n        ",264],["T_COMMENT","\/\/ Support DBAL 2.4 by accessing it directly when using PDO PgSQL\n",266],["T_WHITESPACE","        ",267],["T_IF","if",267],["T_WHITESPACE"," ",267],"(",["T_VARIABLE","$wrappedConnection",267],["T_WHITESPACE"," ",267],["T_INSTANCEOF","instanceof",267],["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","PDO",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n            ",267],["T_RETURN","return",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$wrappedConnection",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getAttribute",268],"(",["T_NS_SEPARATOR","\\",268],["T_STRING","PDO",268],["T_DOUBLE_COLON","::",268],["T_STRING","ATTR_SERVER_VERSION",268],")",";",["T_WHITESPACE","\n        ",268],"}",["T_WHITESPACE","\n\n        ",269],["T_COMMENT","\/\/ If we cannot guess the version, the empty string will mean we won't use the code for newer versions when doing version checks.\n",271],["T_WHITESPACE","        ",272],["T_RETURN","return",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","''",272],";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n",273],"}",["T_WHITESPACE","\n",274]]
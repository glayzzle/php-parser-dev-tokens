[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bridge",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Doctrine",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Logger",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Psr",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Log",14],["T_NS_SEPARATOR","\\",14],["T_STRING","LoggerInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Stopwatch",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Stopwatch",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Doctrine",16],["T_NS_SEPARATOR","\\",16],["T_STRING","DBAL",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Logging",16],["T_NS_SEPARATOR","\\",16],["T_STRING","SQLLogger",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * DbalLogger.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n *\/",18],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","DbalLogger",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","SQLLogger",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","MAX_STRING_LENGTH",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_LNUMBER","32",25],";",["T_WHITESPACE","\n    ",25],["T_CONST","const",26],["T_WHITESPACE"," ",26],["T_STRING","BINARY_DATA_VALUE",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'(binary value)'",26],";",["T_WHITESPACE","\n\n    ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$logger",28],";",["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$stopwatch",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param LoggerInterface $logger    A LoggerInterface instance\n     * @param Stopwatch       $stopwatch A Stopwatch instance\n     *\/",31],["T_WHITESPACE","\n    ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","__construct",37],"(",["T_STRING","LoggerInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$logger",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],",",["T_WHITESPACE"," ",37],["T_STRING","Stopwatch",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$stopwatch",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","null",37],")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","logger",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$logger",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","stopwatch",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$stopwatch",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",43],["T_WHITESPACE","\n    ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","startQuery",46],"(",["T_VARIABLE","$sql",46],",",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$params",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],",",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$types",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","null",46],")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_STRING","null",48],["T_WHITESPACE"," ",48],["T_IS_NOT_IDENTICAL","!==",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","stopwatch",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","stopwatch",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","start",49],"(",["T_CONSTANT_ENCAPSED_STRING","'doctrine'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'doctrine'",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_STRING","null",52],["T_WHITESPACE"," ",52],["T_IS_NOT_IDENTICAL","!==",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","logger",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","log",53],"(",["T_VARIABLE","$sql",53],",",["T_WHITESPACE"," ",53],["T_STRING","null",53],["T_WHITESPACE"," ",53],["T_IS_IDENTICAL","===",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$params",53],["T_WHITESPACE"," ",53],"?",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",")",["T_WHITESPACE"," ",53],":",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","normalizeParams",53],"(",["T_VARIABLE","$params",53],")",")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",57],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","stopQuery",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_STRING","null",62],["T_WHITESPACE"," ",62],["T_IS_NOT_IDENTICAL","!==",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","stopwatch",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","stopwatch",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","stop",63],"(",["T_CONSTANT_ENCAPSED_STRING","'doctrine'",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * Logs a message.\n     *\n     * @param string $message A message to log\n     * @param array  $params  The context\n     *\/",67],["T_WHITESPACE","\n    ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","log",73],"(",["T_VARIABLE","$message",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$params",73],")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","logger",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","debug",75],"(",["T_VARIABLE","$message",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$params",75],")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_PRIVATE","private",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","normalizeParams",78],"(",["T_ARRAY","array",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$params",78],")",["T_WHITESPACE","\n    ",78],"{",["T_WHITESPACE","\n        ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$params",80],["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$index",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$param",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_COMMENT","\/\/ normalize recursively\n",81],["T_WHITESPACE","            ",82],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","is_array",82],"(",["T_VARIABLE","$param",82],")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                ",82],["T_VARIABLE","$params",83],"[",["T_VARIABLE","$index",83],"]",["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","normalizeParams",83],"(",["T_VARIABLE","$param",83],")",";",["T_WHITESPACE","\n                ",83],["T_CONTINUE","continue",84],";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n\n            ",85],["T_IF","if",87],["T_WHITESPACE"," ",87],"(","!",["T_STRING","is_string",87],"(",["T_VARIABLE","$params",87],"[",["T_VARIABLE","$index",87],"]",")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                ",87],["T_CONTINUE","continue",88],";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n\n            ",89],["T_COMMENT","\/\/ non utf-8 strings break json encoding\n",91],["T_WHITESPACE","            ",92],["T_IF","if",92],["T_WHITESPACE"," ",92],"(","!",["T_STRING","preg_match",92],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/u'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$params",92],"[",["T_VARIABLE","$index",92],"]",")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$params",93],"[",["T_VARIABLE","$index",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","self",93],["T_DOUBLE_COLON","::",93],["T_STRING","BINARY_DATA_VALUE",93],";",["T_WHITESPACE","\n                ",93],["T_CONTINUE","continue",94],";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n\n            ",95],["T_COMMENT","\/\/ detect if the too long string must be shorten\n",97],["T_WHITESPACE","            ",98],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","self",98],["T_DOUBLE_COLON","::",98],["T_STRING","MAX_STRING_LENGTH",98],["T_WHITESPACE"," ",98],"<",["T_WHITESPACE"," ",98],["T_STRING","mb_strlen",98],"(",["T_VARIABLE","$params",98],"[",["T_VARIABLE","$index",98],"]",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n                ",98],["T_VARIABLE","$params",99],"[",["T_VARIABLE","$index",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","mb_substr",99],"(",["T_VARIABLE","$params",99],"[",["T_VARIABLE","$index",99],"]",",",["T_WHITESPACE"," ",99],["T_LNUMBER","0",99],",",["T_WHITESPACE"," ",99],["T_STRING","self",99],["T_DOUBLE_COLON","::",99],["T_STRING","MAX_STRING_LENGTH",99],["T_WHITESPACE"," ",99],"-",["T_WHITESPACE"," ",99],["T_LNUMBER","6",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",99],")",".",["T_CONSTANT_ENCAPSED_STRING","' [...]'",99],";",["T_WHITESPACE","\n                ",99],["T_CONTINUE","continue",100],";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n\n        ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$params",104],";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n",105],"}",["T_WHITESPACE","\n",106]]
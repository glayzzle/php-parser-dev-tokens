[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bridge",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Doctrine",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","User",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Doctrine",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Common",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Persistence",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ManagerRegistry",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Security",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UnsupportedUserException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Core",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UsernameNotFoundException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","User",17],["T_NS_SEPARATOR","\\",17],["T_STRING","UserProviderInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Core",18],["T_NS_SEPARATOR","\\",18],["T_STRING","User",18],["T_NS_SEPARATOR","\\",18],["T_STRING","UserInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Wrapper around a Doctrine ObjectManager.\n *\n * Provides easy to use provisioning for Doctrine entity users.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n * @author Johannes M. Schmitt <schmittjoh@gmail.com>\n *\/",20],["T_WHITESPACE","\n",27],["T_CLASS","class",28],["T_WHITESPACE"," ",28],["T_STRING","EntityUserProvider",28],["T_WHITESPACE"," ",28],["T_IMPLEMENTS","implements",28],["T_WHITESPACE"," ",28],["T_STRING","UserProviderInterface",28],["T_WHITESPACE","\n",28],"{",["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$registry",30],";",["T_WHITESPACE","\n    ",30],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$managerName",31],";",["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$classOrAlias",32],";",["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$class",33],";",["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$property",34],";",["T_WHITESPACE","\n\n    ",34],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_STRING","ManagerRegistry",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$registry",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$classOrAlias",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$property",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","null",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$managerName",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","null",36],")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","registry",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$registry",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","managerName",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$managerName",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","classOrAlias",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$classOrAlias",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","property",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$property",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",44],["T_WHITESPACE","\n    ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","loadUserByUsername",47],"(",["T_VARIABLE","$username",47],")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$repository",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getRepository",49],"(",")",";",["T_WHITESPACE","\n        ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_STRING","null",50],["T_WHITESPACE"," ",50],["T_IS_NOT_IDENTICAL","!==",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","property",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_VARIABLE","$user",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$repository",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","findOneBy",51],"(",["T_ARRAY","array",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","property",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$username",51],")",")",";",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE"," ",52],["T_ELSE","else",52],["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n            ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(","!",["T_VARIABLE","$repository",53],["T_WHITESPACE"," ",53],["T_INSTANCEOF","instanceof",53],["T_WHITESPACE"," ",53],["T_STRING","UserLoaderInterface",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n                ",53],["T_THROW","throw",54],["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","InvalidArgumentException",54],"(",["T_STRING","sprintf",54],"(",["T_CONSTANT_ENCAPSED_STRING","'You must either make the \"%s\" entity Doctrine Repository (\"%s\") implement \"Symfony\\Bridge\\Doctrine\\Security\\User\\UserLoaderInterface\" or set the \"property\" option in the corresponding entity provider configuration.'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","classOrAlias",54],",",["T_WHITESPACE"," ",54],["T_STRING","get_class",54],"(",["T_VARIABLE","$repository",54],")",")",")",";",["T_WHITESPACE","\n            ",54],"}",["T_WHITESPACE","\n\n            ",55],["T_VARIABLE","$user",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$repository",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","loadUserByUsername",57],"(",["T_VARIABLE","$username",57],")",";",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","null",60],["T_WHITESPACE"," ",60],["T_IS_IDENTICAL","===",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$user",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_THROW","throw",61],["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_STRING","UsernameNotFoundException",61],"(",["T_STRING","sprintf",61],"(",["T_CONSTANT_ENCAPSED_STRING","'User \"%s\" not found.'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$username",61],")",")",";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n\n        ",62],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$user",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","refreshUser",70],"(",["T_STRING","UserInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$user",70],")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$class",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getClass",72],"(",")",";",["T_WHITESPACE","\n        ",72],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$user",73],["T_WHITESPACE"," ",73],["T_INSTANCEOF","instanceof",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$class",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_THROW","throw",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","UnsupportedUserException",74],"(",["T_STRING","sprintf",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Instances of \"%s\" are not supported.'",74],",",["T_WHITESPACE"," ",74],["T_STRING","get_class",74],"(",["T_VARIABLE","$user",74],")",")",")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$repository",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getRepository",77],"(",")",";",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$repository",78],["T_WHITESPACE"," ",78],["T_INSTANCEOF","instanceof",78],["T_WHITESPACE"," ",78],["T_STRING","UserProviderInterface",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$refreshedUser",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$repository",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","refreshUser",79],"(",["T_VARIABLE","$user",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_COMMENT","\/\/ The user must be reloaded via the primary key as all other data\n",81],["T_WHITESPACE","            ",82],["T_COMMENT","\/\/ might have changed without proper persistence in the database.\n",82],["T_WHITESPACE","            ",83],["T_COMMENT","\/\/ That's the case when the user has been changed by a form with\n",83],["T_WHITESPACE","            ",84],["T_COMMENT","\/\/ validation errors.\n",84],["T_WHITESPACE","            ",85],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$id",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getClassMetadata",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getIdentifierValues",85],"(",["T_VARIABLE","$user",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","InvalidArgumentException",86],"(",["T_CONSTANT_ENCAPSED_STRING","'You cannot refresh a user '",86],".",["T_WHITESPACE","\n                    ",86],["T_CONSTANT_ENCAPSED_STRING","'from the EntityUserProvider that does not contain an identifier. '",87],".",["T_WHITESPACE","\n                    ",87],["T_CONSTANT_ENCAPSED_STRING","'The user object has to be serialized with its own identifier '",88],".",["T_WHITESPACE","\n                    ",88],["T_CONSTANT_ENCAPSED_STRING","'mapped by Doctrine.'",89],["T_WHITESPACE","\n                ",89],")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_VARIABLE","$refreshedUser",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$repository",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","find",93],"(",["T_VARIABLE","$id",93],")",";",["T_WHITESPACE","\n            ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","null",94],["T_WHITESPACE"," ",94],["T_IS_IDENTICAL","===",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$refreshedUser",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n                ",94],["T_THROW","throw",95],["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","UsernameNotFoundException",95],"(",["T_STRING","sprintf",95],"(",["T_CONSTANT_ENCAPSED_STRING","'User with id %s not found'",95],",",["T_WHITESPACE"," ",95],["T_STRING","json_encode",95],"(",["T_VARIABLE","$id",95],")",")",")",";",["T_WHITESPACE","\n            ",95],"}",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n\n        ",97],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$refreshedUser",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",102],["T_WHITESPACE","\n    ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","supportsClass",105],"(",["T_VARIABLE","$class",105],")",["T_WHITESPACE","\n    ",105],"{",["T_WHITESPACE","\n        ",106],["T_RETURN","return",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$class",107],["T_WHITESPACE"," ",107],["T_IS_IDENTICAL","===",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getClass",107],"(",")",["T_WHITESPACE"," ",107],["T_BOOLEAN_OR","||",107],["T_WHITESPACE"," ",107],["T_STRING","is_subclass_of",107],"(",["T_VARIABLE","$class",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getClass",107],"(",")",")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_PRIVATE","private",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getObjectManager",110],"(",")",["T_WHITESPACE","\n    ",110],"{",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","registry",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getManager",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","managerName",112],")",";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_PRIVATE","private",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","getRepository",115],"(",")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getObjectManager",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","getRepository",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","classOrAlias",117],")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_PRIVATE","private",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","getClass",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_STRING","null",122],["T_WHITESPACE"," ",122],["T_IS_IDENTICAL","===",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","class",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n            ",122],["T_VARIABLE","$class",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","classOrAlias",123],";",["T_WHITESPACE","\n\n            ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","false",125],["T_WHITESPACE"," ",125],["T_IS_NOT_IDENTICAL","!==",125],["T_WHITESPACE"," ",125],["T_STRING","strpos",125],"(",["T_VARIABLE","$class",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","':'",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_VARIABLE","$class",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getClassMetadata",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getName",126],"(",")",";",["T_WHITESPACE","\n            ",126],"}",["T_WHITESPACE","\n\n            ",127],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","class",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$class",129],";",["T_WHITESPACE","\n        ",129],"}",["T_WHITESPACE","\n\n        ",130],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","class",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n\n    ",133],["T_PRIVATE","private",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getClassMetadata",135],"(",")",["T_WHITESPACE","\n    ",135],"{",["T_WHITESPACE","\n        ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getObjectManager",137],"(",")",["T_OBJECT_OPERATOR","->",137],["T_STRING","getClassMetadata",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","classOrAlias",137],")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n",138],"}",["T_WHITESPACE","\n",139]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ChoiceList",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Factory",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Form",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ChoiceList",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ChoiceListInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Form",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ChoiceList",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Loader",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ChoiceLoaderInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Form",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ChoiceList",16],["T_NS_SEPARATOR","\\",16],["T_STRING","View",16],["T_NS_SEPARATOR","\\",16],["T_STRING","ChoiceListView",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Caches the choice lists created by the decorated factory.\n *\n * @author Bernhard Schussek <bschussek@gmail.com>\n *\/",18],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","CachingFactoryDecorator",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","ChoiceListFactoryInterface",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/**\n     * @var ChoiceListFactoryInterface\n     *\/",25],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$decoratedFactory",28],";",["T_WHITESPACE","\n\n    ",28],["T_DOC_COMMENT","\/**\n     * @var ChoiceListInterface[]\n     *\/",30],["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$lists",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_DOC_COMMENT","\/**\n     * @var ChoiceListView[]\n     *\/",35],["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$views",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",")",";",["T_WHITESPACE","\n\n    ",38],["T_DOC_COMMENT","\/**\n     * Generates a SHA-256 hash for the given value.\n     *\n     * Optionally, a namespace string can be passed. Calling this method will\n     * the same values, but different namespaces, will return different hashes.\n     *\n     * @param mixed  $value     The value to hash\n     * @param string $namespace Optional. The namespace\n     *\n     * @return string The SHA-256 hash\n     *\n     * @internal Should not be used by user-land code.\n     *\/",40],["T_WHITESPACE","\n    ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_STATIC","static",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","generateHash",53],"(",["T_VARIABLE","$value",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$namespace",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","''",53],")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_STRING","is_object",55],"(",["T_VARIABLE","$value",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_VARIABLE","$value",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","spl_object_hash",56],"(",["T_VARIABLE","$value",56],")",";",["T_WHITESPACE","\n        ",56],"}",["T_WHITESPACE"," ",57],["T_ELSEIF","elseif",57],["T_WHITESPACE"," ",57],"(",["T_STRING","is_array",57],"(",["T_VARIABLE","$value",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n            ",57],["T_STRING","array_walk_recursive",58],"(",["T_VARIABLE","$value",58],",",["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],"(","&",["T_VARIABLE","$v",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n                ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_STRING","is_object",59],"(",["T_VARIABLE","$v",59],")",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                    ",59],["T_VARIABLE","$v",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","spl_object_hash",60],"(",["T_VARIABLE","$v",60],")",";",["T_WHITESPACE","\n                ",60],"}",["T_WHITESPACE","\n            ",61],"}",")",";",["T_WHITESPACE","\n        ",62],"}",["T_WHITESPACE","\n\n        ",63],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_STRING","hash",65],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$namespace",65],".",["T_CONSTANT_ENCAPSED_STRING","':'",65],".",["T_STRING","serialize",65],"(",["T_VARIABLE","$value",65],")",")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_DOC_COMMENT","\/**\n     * Flattens an array into the given output variable.\n     *\n     * @param array $array  The array to flatten\n     * @param array $output The flattened output\n     *\n     * @internal Should not be used by user-land code\n     *\/",68],["T_WHITESPACE","\n    ",75],["T_PRIVATE","private",76],["T_WHITESPACE"," ",76],["T_STATIC","static",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","flatten",76],"(",["T_ARRAY","array",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$array",76],",",["T_WHITESPACE"," ",76],"&",["T_VARIABLE","$output",76],")",["T_WHITESPACE","\n    ",76],"{",["T_WHITESPACE","\n        ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","null",78],["T_WHITESPACE"," ",78],["T_IS_IDENTICAL","===",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$output",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$output",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$array",82],["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$key",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$value",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n            ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_STRING","is_array",83],"(",["T_VARIABLE","$value",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                ",83],["T_STRING","self",84],["T_DOUBLE_COLON","::",84],["T_STRING","flatten",84],"(",["T_VARIABLE","$value",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$output",84],")",";",["T_WHITESPACE","\n                ",84],["T_CONTINUE","continue",85],";",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n\n            ",86],["T_VARIABLE","$output",88],"[",["T_VARIABLE","$key",88],"]",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$value",88],";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Decorates the given factory.\n     *\n     * @param ChoiceListFactoryInterface $decoratedFactory The decorated factory\n     *\/",92],["T_WHITESPACE","\n    ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","__construct",97],"(",["T_STRING","ChoiceListFactoryInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$decoratedFactory",97],")",["T_WHITESPACE","\n    ",97],"{",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","decoratedFactory",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$decoratedFactory",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_DOC_COMMENT","\/**\n     * Returns the decorated factory.\n     *\n     * @return ChoiceListFactoryInterface The decorated factory\n     *\/",102],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getDecoratedFactory",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","decoratedFactory",109],";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",112],["T_WHITESPACE","\n    ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","createListFromChoices",115],"(",["T_VARIABLE","$choices",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$value",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","null",115],")",["T_WHITESPACE","\n    ",115],"{",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$choices",117],["T_WHITESPACE"," ",117],["T_INSTANCEOF","instanceof",117],["T_WHITESPACE"," ",117],["T_NS_SEPARATOR","\\",117],["T_STRING","Traversable",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n            ",117],["T_VARIABLE","$choices",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","iterator_to_array",118],"(",["T_VARIABLE","$choices",118],")",";",["T_WHITESPACE","\n        ",118],"}",["T_WHITESPACE","\n\n        ",119],["T_COMMENT","\/\/ The value is not validated on purpose. The decorated factory may\n",121],["T_WHITESPACE","        ",122],["T_COMMENT","\/\/ decide which values to accept and which not.\n",122],["T_WHITESPACE","\n        ",123],["T_COMMENT","\/\/ We ignore the choice groups for caching. If two choice lists are\n",124],["T_WHITESPACE","        ",125],["T_COMMENT","\/\/ requested with the same choices, but a different grouping, the same\n",125],["T_WHITESPACE","        ",126],["T_COMMENT","\/\/ choice list is returned.\n",126],["T_WHITESPACE","        ",127],["T_STRING","self",127],["T_DOUBLE_COLON","::",127],["T_STRING","flatten",127],"(",["T_VARIABLE","$choices",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$flatChoices",127],")",";",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$hash",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","self",129],["T_DOUBLE_COLON","::",129],["T_STRING","generateHash",129],"(",["T_ARRAY","array",129],"(",["T_VARIABLE","$flatChoices",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$value",129],")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'fromChoices'",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_ISSET","isset",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","lists",131],"[",["T_VARIABLE","$hash",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n            ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","lists",132],"[",["T_VARIABLE","$hash",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","decoratedFactory",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","createListFromChoices",132],"(",["T_VARIABLE","$choices",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$value",132],")",";",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","lists",135],"[",["T_VARIABLE","$hash",135],"]",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",138],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","createListFromLoader",141],"(",["T_STRING","ChoiceLoaderInterface",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$loader",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$value",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","null",141],")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_VARIABLE","$hash",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","self",143],["T_DOUBLE_COLON","::",143],["T_STRING","generateHash",143],"(",["T_ARRAY","array",143],"(",["T_VARIABLE","$loader",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$value",143],")",",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'fromLoader'",143],")",";",["T_WHITESPACE","\n\n        ",143],["T_IF","if",145],["T_WHITESPACE"," ",145],"(","!",["T_ISSET","isset",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","lists",145],"[",["T_VARIABLE","$hash",145],"]",")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","lists",146],"[",["T_VARIABLE","$hash",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","decoratedFactory",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","createListFromLoader",146],"(",["T_VARIABLE","$loader",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$value",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n\n        ",147],["T_RETURN","return",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","lists",149],"[",["T_VARIABLE","$hash",149],"]",";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n\n    ",150],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",152],["T_WHITESPACE","\n    ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","createView",155],"(",["T_STRING","ChoiceListInterface",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$list",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$preferredChoices",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$label",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$index",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$groupBy",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$attr",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","null",155],")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_COMMENT","\/\/ The input is not validated on purpose. This way, the decorated\n",157],["T_WHITESPACE","        ",158],["T_COMMENT","\/\/ factory may decide which input to accept and which not.\n",158],["T_WHITESPACE","        ",159],["T_VARIABLE","$hash",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","self",159],["T_DOUBLE_COLON","::",159],["T_STRING","generateHash",159],"(",["T_ARRAY","array",159],"(",["T_VARIABLE","$list",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$preferredChoices",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$label",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$index",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$groupBy",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$attr",159],")",")",";",["T_WHITESPACE","\n\n        ",159],["T_IF","if",161],["T_WHITESPACE"," ",161],"(","!",["T_ISSET","isset",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","views",161],"[",["T_VARIABLE","$hash",161],"]",")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","views",162],"[",["T_VARIABLE","$hash",162],"]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","decoratedFactory",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","createView",162],"(",["T_WHITESPACE","\n                ",162],["T_VARIABLE","$list",163],",",["T_WHITESPACE","\n                ",163],["T_VARIABLE","$preferredChoices",164],",",["T_WHITESPACE","\n                ",164],["T_VARIABLE","$label",165],",",["T_WHITESPACE","\n                ",165],["T_VARIABLE","$index",166],",",["T_WHITESPACE","\n                ",166],["T_VARIABLE","$groupBy",167],",",["T_WHITESPACE","\n                ",167],["T_VARIABLE","$attr",168],["T_WHITESPACE","\n            ",168],")",";",["T_WHITESPACE","\n        ",169],"}",["T_WHITESPACE","\n\n        ",170],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","views",172],"[",["T_VARIABLE","$hash",172],"]",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n",173],"}",["T_WHITESPACE","\n",174]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Extension",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EventListener",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Form",14],["T_NS_SEPARATOR","\\",14],["T_STRING","FormEvents",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Form",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FormEvent",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Form",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UnexpectedTypeException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventDispatcher",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventSubscriberInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Resize a collection form element based on the data sent from the client.\n *\n * @author Bernhard Schussek <bschussek@gmail.com>\n *\/",19],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","ResizeFormListener",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","EventSubscriberInterface",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/**\n     * @var string\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$type",29],";",["T_WHITESPACE","\n\n    ",29],["T_DOC_COMMENT","\/**\n     * @var array\n     *\/",31],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$options",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Whether children could be added to the group.\n     *\n     * @var bool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$allowAdd",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Whether children could be removed from the group.\n     *\n     * @var bool\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$allowDelete",48],";",["T_WHITESPACE","\n\n    ",48],["T_DOC_COMMENT","\/**\n     * @var bool\n     *\/",50],["T_WHITESPACE","\n    ",52],["T_PRIVATE","private",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$deleteEmpty",53],";",["T_WHITESPACE","\n\n    ",53],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_VARIABLE","$type",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$options",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",")",",",["T_WHITESPACE"," ",55],["T_VARIABLE","$allowAdd",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","false",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$allowDelete",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","false",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$deleteEmpty",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","false",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","type",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$type",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","allowAdd",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$allowAdd",58],";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","allowDelete",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$allowDelete",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","options",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$options",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","deleteEmpty",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$deleteEmpty",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_STATIC","static",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","getSubscribedEvents",64],"(",")",["T_WHITESPACE","\n    ",64],"{",["T_WHITESPACE","\n        ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n            ",66],["T_STRING","FormEvents",67],["T_DOUBLE_COLON","::",67],["T_STRING","PRE_SET_DATA",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'preSetData'",67],",",["T_WHITESPACE","\n            ",67],["T_STRING","FormEvents",68],["T_DOUBLE_COLON","::",68],["T_STRING","PRE_SUBMIT",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'preSubmit'",68],",",["T_WHITESPACE","\n            ",68],["T_COMMENT","\/\/ (MergeCollectionListener, MergeDoctrineCollectionListener)\n",69],["T_WHITESPACE","            ",70],["T_STRING","FormEvents",70],["T_DOUBLE_COLON","::",70],["T_STRING","SUBMIT",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_CONSTANT_ENCAPSED_STRING","'onSubmit'",70],",",["T_WHITESPACE"," ",70],["T_LNUMBER","50",70],")",",",["T_WHITESPACE","\n        ",70],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","preSetData",74],"(",["T_STRING","FormEvent",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$event",74],")",["T_WHITESPACE","\n    ",74],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$form",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$event",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getForm",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$data",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$event",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getData",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_STRING","null",79],["T_WHITESPACE"," ",79],["T_IS_IDENTICAL","===",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$data",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n            ",79],["T_VARIABLE","$data",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n\n        ",81],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_STRING","is_array",83],"(",["T_VARIABLE","$data",83],")",["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],"!","(",["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],["T_INSTANCEOF","instanceof",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Traversable",83],["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],["T_INSTANCEOF","instanceof",83],["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","ArrayAccess",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n            ",83],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","UnexpectedTypeException",84],"(",["T_VARIABLE","$data",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'array or (\\Traversable and \\ArrayAccess)'",84],")",";",["T_WHITESPACE","\n        ",84],"}",["T_WHITESPACE","\n\n        ",85],["T_COMMENT","\/\/ First remove all rows\n",87],["T_WHITESPACE","        ",88],["T_FOREACH","foreach",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$form",88],["T_WHITESPACE"," ",88],["T_AS","as",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$name",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$child",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n            ",88],["T_VARIABLE","$form",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","remove",89],"(",["T_VARIABLE","$name",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n\n        ",90],["T_COMMENT","\/\/ Then add all rows again in the correct order\n",92],["T_WHITESPACE","        ",93],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$data",93],["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$name",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$value",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n            ",93],["T_VARIABLE","$form",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","add",94],"(",["T_VARIABLE","$name",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","type",94],",",["T_WHITESPACE"," ",94],["T_STRING","array_replace",94],"(",["T_ARRAY","array",94],"(",["T_WHITESPACE","\n                ",94],["T_CONSTANT_ENCAPSED_STRING","'property_path'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'['",95],".",["T_VARIABLE","$name",95],".",["T_CONSTANT_ENCAPSED_STRING","']'",95],",",["T_WHITESPACE","\n            ",95],")",",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","options",96],")",")",";",["T_WHITESPACE","\n        ",96],"}",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","preSubmit",100],"(",["T_STRING","FormEvent",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$event",100],")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$form",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$event",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getForm",102],"(",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$data",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$event",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getData",103],"(",")",";",["T_WHITESPACE","\n\n        ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$data",105],["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","Traversable",105],["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$data",105],["T_WHITESPACE"," ",105],["T_INSTANCEOF","instanceof",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","ArrayAccess",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],"@",["T_STRING","trigger_error",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Support for objects implementing both \\Traversable and \\ArrayAccess is deprecated since version 3.1 and will be removed in 4.0. Use an array instead.'",106],",",["T_WHITESPACE"," ",106],["T_STRING","E_USER_DEPRECATED",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(","!",["T_STRING","is_array",109],"(",["T_VARIABLE","$data",109],")",["T_WHITESPACE"," ",109],["T_BOOLEAN_AND","&&",109],["T_WHITESPACE"," ",109],"!","(",["T_VARIABLE","$data",109],["T_WHITESPACE"," ",109],["T_INSTANCEOF","instanceof",109],["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","Traversable",109],["T_WHITESPACE"," ",109],["T_BOOLEAN_AND","&&",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$data",109],["T_WHITESPACE"," ",109],["T_INSTANCEOF","instanceof",109],["T_WHITESPACE"," ",109],["T_NS_SEPARATOR","\\",109],["T_STRING","ArrayAccess",109],")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_VARIABLE","$data",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",")",";",["T_WHITESPACE","\n        ",110],"}",["T_WHITESPACE","\n\n        ",111],["T_COMMENT","\/\/ Remove all empty rows\n",113],["T_WHITESPACE","        ",114],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","allowDelete",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n            ",114],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$form",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$name",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$child",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(","!",["T_ISSET","isset",116],"(",["T_VARIABLE","$data",116],"[",["T_VARIABLE","$name",116],"]",")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n                    ",116],["T_VARIABLE","$form",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","remove",117],"(",["T_VARIABLE","$name",117],")",";",["T_WHITESPACE","\n                ",117],"}",["T_WHITESPACE","\n            ",118],"}",["T_WHITESPACE","\n        ",119],"}",["T_WHITESPACE","\n\n        ",120],["T_COMMENT","\/\/ Add all additional rows\n",122],["T_WHITESPACE","        ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","allowAdd",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n            ",123],["T_FOREACH","foreach",124],["T_WHITESPACE"," ",124],"(",["T_VARIABLE","$data",124],["T_WHITESPACE"," ",124],["T_AS","as",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$name",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$value",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_VARIABLE","$form",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","has",125],"(",["T_VARIABLE","$name",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                    ",125],["T_VARIABLE","$form",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","add",126],"(",["T_VARIABLE","$name",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","type",126],",",["T_WHITESPACE"," ",126],["T_STRING","array_replace",126],"(",["T_ARRAY","array",126],"(",["T_WHITESPACE","\n                        ",126],["T_CONSTANT_ENCAPSED_STRING","'property_path'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'['",127],".",["T_VARIABLE","$name",127],".",["T_CONSTANT_ENCAPSED_STRING","']'",127],",",["T_WHITESPACE","\n                    ",127],")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","options",128],")",")",";",["T_WHITESPACE","\n                ",128],"}",["T_WHITESPACE","\n            ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","onSubmit",134],"(",["T_STRING","FormEvent",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$event",134],")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$form",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$event",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getForm",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$data",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$event",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getData",137],"(",")",";",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ At this point, $data is an array or an array-like object that already contains the\n",139],["T_WHITESPACE","        ",140],["T_COMMENT","\/\/ new entries, which were added by the data mapper. The data mapper ignores existing\n",140],["T_WHITESPACE","        ",141],["T_COMMENT","\/\/ entries, so we need to manually unset removed entries in the collection.\n",141],["T_WHITESPACE","\n        ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_STRING","null",143],["T_WHITESPACE"," ",143],["T_IS_IDENTICAL","===",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$data",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$data",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",")",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE","\n\n        ",145],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_STRING","is_array",147],"(",["T_VARIABLE","$data",147],")",["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],"!","(",["T_VARIABLE","$data",147],["T_WHITESPACE"," ",147],["T_INSTANCEOF","instanceof",147],["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","Traversable",147],["T_WHITESPACE"," ",147],["T_BOOLEAN_AND","&&",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$data",147],["T_WHITESPACE"," ",147],["T_INSTANCEOF","instanceof",147],["T_WHITESPACE"," ",147],["T_NS_SEPARATOR","\\",147],["T_STRING","ArrayAccess",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n            ",147],["T_THROW","throw",148],["T_WHITESPACE"," ",148],["T_NEW","new",148],["T_WHITESPACE"," ",148],["T_STRING","UnexpectedTypeException",148],"(",["T_VARIABLE","$data",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'array or (\\Traversable and \\ArrayAccess)'",148],")",";",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","deleteEmpty",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$previousData",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$event",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getForm",152],"(",")",["T_OBJECT_OPERATOR","->",152],["T_STRING","getData",152],"(",")",";",["T_WHITESPACE","\n            ",152],["T_FOREACH","foreach",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$form",153],["T_WHITESPACE"," ",153],["T_AS","as",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$name",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$child",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_VARIABLE","$isNew",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],"!",["T_ISSET","isset",154],"(",["T_VARIABLE","$previousData",154],"[",["T_VARIABLE","$name",154],"]",")",";",["T_WHITESPACE","\n\n                ",154],["T_COMMENT","\/\/ $isNew can only be true if allowAdd is true, so we don't\n",156],["T_WHITESPACE","                ",157],["T_COMMENT","\/\/ need to check allowAdd again\n",157],["T_WHITESPACE","                ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$child",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","isEmpty",158],"(",")",["T_WHITESPACE"," ",158],["T_BOOLEAN_AND","&&",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$isNew",158],["T_WHITESPACE"," ",158],["T_BOOLEAN_OR","||",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","allowDelete",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n                    ",158],["T_UNSET","unset",159],"(",["T_VARIABLE","$data",159],"[",["T_VARIABLE","$name",159],"]",")",";",["T_WHITESPACE","\n                    ",159],["T_VARIABLE","$form",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","remove",160],"(",["T_VARIABLE","$name",160],")",";",["T_WHITESPACE","\n                ",160],"}",["T_WHITESPACE","\n            ",161],"}",["T_WHITESPACE","\n        ",162],"}",["T_WHITESPACE","\n\n        ",163],["T_COMMENT","\/\/ The data mapper only adds, but does not remove items, so do this\n",165],["T_WHITESPACE","        ",166],["T_COMMENT","\/\/ here\n",166],["T_WHITESPACE","        ",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","allowDelete",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n            ",167],["T_VARIABLE","$toDelete",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_ARRAY","array",168],"(",")",";",["T_WHITESPACE","\n\n            ",168],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$data",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$name",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$child",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n                ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_VARIABLE","$form",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","has",171],"(",["T_VARIABLE","$name",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n                    ",171],["T_VARIABLE","$toDelete",172],"[","]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$name",172],";",["T_WHITESPACE","\n                ",172],"}",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n\n            ",174],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$toDelete",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$name",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n                ",176],["T_UNSET","unset",177],"(",["T_VARIABLE","$data",177],"[",["T_VARIABLE","$name",177],"]",")",";",["T_WHITESPACE","\n            ",177],"}",["T_WHITESPACE","\n        ",178],"}",["T_WHITESPACE","\n\n        ",179],["T_VARIABLE","$event",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setData",181],"(",["T_VARIABLE","$data",181],")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n",182],"}",["T_WHITESPACE","\n",183]]
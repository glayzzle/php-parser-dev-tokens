[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Ldap",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Adapter",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ExtLdap",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Ldap",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Adapter",14],["T_NS_SEPARATOR","\\",14],["T_STRING","CollectionInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Ldap",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Entry",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Ldap",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","LdapException",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * @author Charles Sarrazin <charles@sarraz.in>\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","Collection",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","CollectionInterface",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$connection",23],";",["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$search",24],";",["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$entries",25],";",["T_WHITESPACE","\n\n    ",25],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","__construct",27],"(",["T_STRING","Connection",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$connection",27],",",["T_WHITESPACE"," ",27],["T_STRING","Query",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$search",27],")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","connection",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$connection",29],";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","search",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$search",30],";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",33],["T_WHITESPACE","\n    ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","toArray",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_STRING","null",38],["T_WHITESPACE"," ",38],["T_IS_IDENTICAL","===",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","entries",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","entries",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","iterator_to_array",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getIterator",39],"(",")",",",["T_WHITESPACE"," ",39],["T_STRING","false",39],")",";",["T_WHITESPACE","\n        ",39],"}",["T_WHITESPACE","\n\n        ",40],["T_RETURN","return",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","entries",42],";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","count",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_STRING","false",47],["T_WHITESPACE"," ",47],["T_IS_NOT_IDENTICAL","!==",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$count",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","ldap_count_entries",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","connection",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getResource",47],"(",")",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","search",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getResource",47],"(",")",")",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$count",48],";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_THROW","throw",51],["T_WHITESPACE"," ",51],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_STRING","LdapException",51],"(",["T_STRING","sprintf",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Error while retrieving entry count: %s'",51],",",["T_WHITESPACE"," ",51],["T_STRING","ldap_error",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","connection",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getResource",51],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getIterator",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$con",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","connection",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getResource",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$search",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","search",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getResource",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$current",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","ldap_first_entry",58],"(",["T_VARIABLE","$con",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$search",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_LNUMBER","0",60],["T_WHITESPACE"," ",60],["T_IS_IDENTICAL","===",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","count",60],"(",")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_RETURN","return",61],";",["T_WHITESPACE","\n        ",61],"}",["T_WHITESPACE","\n\n        ",62],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_STRING","false",64],["T_WHITESPACE"," ",64],["T_IS_IDENTICAL","===",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$current",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n            ",64],["T_THROW","throw",65],["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","LdapException",65],"(",["T_STRING","sprintf",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not rewind entries array: %s'",65],",",["T_WHITESPACE"," ",65],["T_STRING","ldap_error",65],"(",["T_VARIABLE","$con",65],")",")",")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_YIELD","yield",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getSingleEntry",68],"(",["T_VARIABLE","$con",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$current",68],")",";",["T_WHITESPACE","\n\n        ",68],["T_WHILE","while",70],["T_WHITESPACE"," ",70],"(",["T_STRING","false",70],["T_WHITESPACE"," ",70],["T_IS_NOT_IDENTICAL","!==",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$current",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","ldap_next_entry",70],"(",["T_VARIABLE","$con",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$current",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_YIELD","yield",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getSingleEntry",71],"(",["T_VARIABLE","$con",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$current",71],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","offsetExists",75],"(",["T_VARIABLE","$offset",75],")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","toArray",77],"(",")",";",["T_WHITESPACE","\n\n        ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_ISSET","isset",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","entries",79],"[",["T_VARIABLE","$offset",79],"]",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","offsetGet",82],"(",["T_VARIABLE","$offset",82],")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","toArray",84],"(",")",";",["T_WHITESPACE","\n\n        ",84],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_ISSET","isset",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","entries",86],"[",["T_VARIABLE","$offset",86],"]",")",["T_WHITESPACE"," ",86],"?",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","entries",86],"[",["T_VARIABLE","$offset",86],"]",["T_WHITESPACE"," ",86],":",["T_WHITESPACE"," ",86],["T_STRING","null",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","offsetSet",89],"(",["T_VARIABLE","$offset",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$value",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","toArray",91],"(",")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","entries",93],"[",["T_VARIABLE","$offset",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$value",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","offsetUnset",96],"(",["T_VARIABLE","$offset",96],")",["T_WHITESPACE","\n    ",96],"{",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","toArray",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_UNSET","unset",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","entries",100],"[",["T_VARIABLE","$offset",100],"]",")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_PRIVATE","private",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getSingleEntry",103],"(",["T_VARIABLE","$con",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$current",103],")",["T_WHITESPACE","\n    ",103],"{",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$attributes",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","ldap_get_attributes",105],"(",["T_VARIABLE","$con",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$current",105],")",";",["T_WHITESPACE","\n\n        ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","false",107],["T_WHITESPACE"," ",107],["T_IS_IDENTICAL","===",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$attributes",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n            ",107],["T_THROW","throw",108],["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","LdapException",108],"(",["T_STRING","sprintf",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not fetch attributes: %s'",108],",",["T_WHITESPACE"," ",108],["T_STRING","ldap_error",108],"(",["T_VARIABLE","$con",108],")",")",")",";",["T_WHITESPACE","\n        ",108],"}",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$attributes",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","cleanupAttributes",111],"(",["T_VARIABLE","$attributes",111],")",";",["T_WHITESPACE","\n\n        ",111],["T_VARIABLE","$dn",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","ldap_get_dn",113],"(",["T_VARIABLE","$con",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$current",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","false",115],["T_WHITESPACE"," ",115],["T_IS_IDENTICAL","===",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$dn",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_STRING","LdapException",116],"(",["T_STRING","sprintf",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Could not fetch DN: %s'",116],",",["T_WHITESPACE"," ",116],["T_STRING","ldap_error",116],"(",["T_VARIABLE","$con",116],")",")",")",";",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n\n        ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Entry",119],"(",["T_VARIABLE","$dn",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$attributes",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_PRIVATE","private",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","cleanupAttributes",122],"(",["T_ARRAY","array",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$entry",122],")",["T_WHITESPACE","\n    ",122],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$attributes",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","array_diff_key",124],"(",["T_VARIABLE","$entry",124],",",["T_WHITESPACE"," ",124],["T_STRING","array_flip",124],"(",["T_STRING","range",124],"(",["T_LNUMBER","0",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$entry",124],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",124],"]",["T_WHITESPACE"," ",124],"-",["T_WHITESPACE"," ",124],["T_LNUMBER","1",124],")",")",["T_WHITESPACE"," ",124],"+",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_WHITESPACE","\n                ",124],["T_CONSTANT_ENCAPSED_STRING","'count'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","null",125],",",["T_WHITESPACE","\n                ",125],["T_CONSTANT_ENCAPSED_STRING","'dn'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_STRING","null",126],",",["T_WHITESPACE","\n            ",126],")",")",";",["T_WHITESPACE","\n        ",127],["T_STRING","array_walk",128],"(",["T_VARIABLE","$attributes",128],",",["T_WHITESPACE"," ",128],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],"(","&",["T_VARIABLE","$value",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n            ",128],["T_UNSET","unset",129],"(",["T_VARIABLE","$value",129],"[",["T_CONSTANT_ENCAPSED_STRING","'count'",129],"]",")",";",["T_WHITESPACE","\n        ",129],"}",")",";",["T_WHITESPACE","\n\n        ",130],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$attributes",132],";",["T_WHITESPACE","\n    ",132],"}",["T_WHITESPACE","\n",133],"}",["T_WHITESPACE","\n",134]]
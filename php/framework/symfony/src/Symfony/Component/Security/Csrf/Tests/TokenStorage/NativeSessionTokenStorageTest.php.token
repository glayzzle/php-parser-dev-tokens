[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Csrf",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","TokenStorage",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Security",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Csrf",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TokenStorage",14],["T_NS_SEPARATOR","\\",14],["T_STRING","NativeSessionTokenStorage",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * @author Bernhard Schussek <bschussek@gmail.com>\n *\n * @runTestsInSeparateProcesses\n * @preserveGlobalState disabled\n *\/",16],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","NativeSessionTokenStorageTest",22],["T_WHITESPACE"," ",22],["T_EXTENDS","extends",22],["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","PHPUnit_Framework_TestCase",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n    ",23],["T_CONST","const",24],["T_WHITESPACE"," ",24],["T_STRING","SESSION_NAMESPACE",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'foobar'",24],";",["T_WHITESPACE","\n\n    ",24],["T_DOC_COMMENT","\/**\n     * @var NativeSessionTokenStorage\n     *\/",26],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$storage",29],";",["T_WHITESPACE","\n\n    ",29],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_STATIC","static",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUpBeforeClass",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_STRING","ini_set",33],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_handler'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'files'",33],")",";",["T_WHITESPACE","\n        ",33],["T_STRING","ini_set",34],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_path'",34],",",["T_WHITESPACE"," ",34],["T_STRING","sys_get_temp_dir",34],"(",")",")",";",["T_WHITESPACE","\n\n        ",34],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","setUpBeforeClass",36],"(",")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$_SESSION",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","storage",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","NativeSessionTokenStorage",43],"(",["T_STRING","self",43],["T_DOUBLE_COLON","::",43],["T_STRING","SESSION_NAMESPACE",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testStoreTokenInClosedSession",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","storage",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setToken",48],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertSame",50],"(",["T_ARRAY","array",50],"(",["T_STRING","self",50],["T_DOUBLE_COLON","::",50],["T_STRING","SESSION_NAMESPACE",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",50],")",")",",",["T_WHITESPACE"," ",50],["T_VARIABLE","$_SESSION",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testStoreTokenInClosedSessionWithExistingSessionId",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_STRING","session_id",55],"(",["T_CONSTANT_ENCAPSED_STRING","'foobar'",55],")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertSame",57],"(",["T_STRING","PHP_SESSION_NONE",57],",",["T_WHITESPACE"," ",57],["T_STRING","session_status",57],"(",")",")",";",["T_WHITESPACE","\n\n        ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","storage",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","setToken",59],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",59],")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertSame",61],"(",["T_STRING","PHP_SESSION_ACTIVE",61],",",["T_WHITESPACE"," ",61],["T_STRING","session_status",61],"(",")",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertSame",62],"(",["T_ARRAY","array",62],"(",["T_STRING","self",62],["T_DOUBLE_COLON","::",62],["T_STRING","SESSION_NAMESPACE",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",62],")",")",",",["T_WHITESPACE"," ",62],["T_VARIABLE","$_SESSION",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_PUBLIC","public",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","testStoreTokenInActiveSession",65],"(",")",["T_WHITESPACE","\n    ",65],"{",["T_WHITESPACE","\n        ",66],["T_STRING","session_start",67],"(",")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","storage",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setToken",69],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertSame",71],"(",["T_ARRAY","array",71],"(",["T_STRING","self",71],["T_DOUBLE_COLON","::",71],["T_STRING","SESSION_NAMESPACE",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",71],")",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$_SESSION",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_DOC_COMMENT","\/**\n     * @depends testStoreTokenInClosedSession\n     *\/",74],["T_WHITESPACE","\n    ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testCheckToken",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertFalse",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","storage",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","hasToken",79],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",79],")",")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","storage",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setToken",81],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",81],")",";",["T_WHITESPACE","\n\n        ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertTrue",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","storage",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","hasToken",83],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",83],")",")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_DOC_COMMENT","\/**\n     * @depends testStoreTokenInClosedSession\n     *\/",86],["T_WHITESPACE","\n    ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","testGetExistingToken",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","storage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","setToken",91],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",91],")",";",["T_WHITESPACE","\n\n        ",91],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertSame",93],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","storage",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getToken",93],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",93],")",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_DOC_COMMENT","\/**\n     * @expectedException \\Symfony\\Component\\Security\\Csrf\\Exception\\TokenNotFoundException\n     *\/",96],["T_WHITESPACE","\n    ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testGetNonExistingToken",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","storage",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getToken",101],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",101],")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_DOC_COMMENT","\/**\n     * @depends testCheckToken\n     *\/",104],["T_WHITESPACE","\n    ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","testRemoveNonExistingToken",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertNull",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","storage",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","removeToken",109],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",109],")",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertFalse",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","storage",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","hasToken",110],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",110],")",")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_DOC_COMMENT","\/**\n     * @depends testCheckToken\n     *\/",113],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","testRemoveExistingToken",116],"(",")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","storage",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","setToken",118],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",118],")",";",["T_WHITESPACE","\n\n        ",118],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertSame",120],"(",["T_CONSTANT_ENCAPSED_STRING","'TOKEN'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","storage",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","removeToken",120],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",120],")",")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertFalse",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","storage",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","hasToken",121],"(",["T_CONSTANT_ENCAPSED_STRING","'token_id'",121],")",")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n",122],"}",["T_WHITESPACE","\n",123]]
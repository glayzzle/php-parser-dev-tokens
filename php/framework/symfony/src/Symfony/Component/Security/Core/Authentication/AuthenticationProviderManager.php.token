[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Authentication",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Security",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Event",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AuthenticationFailureEvent",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Security",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Event",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AuthenticationEvent",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Core",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AuthenticationEvents",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventDispatcher",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventDispatcherInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Core",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","AccountStatusException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Security",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Core",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Exception",19],["T_NS_SEPARATOR","\\",19],["T_STRING","AuthenticationException",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Security",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Core",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Exception",20],["T_NS_SEPARATOR","\\",20],["T_STRING","ProviderNotFoundException",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Symfony",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Component",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Security",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Core",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Authentication",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Provider",21],["T_NS_SEPARATOR","\\",21],["T_STRING","AuthenticationProviderInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Symfony",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Component",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Security",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Core",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Authentication",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Token",22],["T_NS_SEPARATOR","\\",22],["T_STRING","TokenInterface",22],";",["T_WHITESPACE","\n\n",22],["T_DOC_COMMENT","\/**\n * AuthenticationProviderManager uses a list of AuthenticationProviderInterface\n * instances to authenticate a Token.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n * @author Johannes M. Schmitt <schmittjoh@gmail.com>\n *\/",24],["T_WHITESPACE","\n",30],["T_CLASS","class",31],["T_WHITESPACE"," ",31],["T_STRING","AuthenticationProviderManager",31],["T_WHITESPACE"," ",31],["T_IMPLEMENTS","implements",31],["T_WHITESPACE"," ",31],["T_STRING","AuthenticationManagerInterface",31],["T_WHITESPACE","\n",31],"{",["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$providers",33],";",["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$eraseCredentials",34],";",["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$eventDispatcher",35],";",["T_WHITESPACE","\n\n    ",35],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param AuthenticationProviderInterface[] $providers        An array of AuthenticationProviderInterface instances\n     * @param bool                              $eraseCredentials Whether to erase credentials after authentication or not\n     *\n     * @throws \\InvalidArgumentException\n     *\/",37],["T_WHITESPACE","\n    ",44],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","__construct",45],"(",["T_ARRAY","array",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$providers",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$eraseCredentials",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","true",45],")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_IF","if",47],["T_WHITESPACE"," ",47],"(","!",["T_VARIABLE","$providers",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n            ",47],["T_THROW","throw",48],["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","InvalidArgumentException",48],"(",["T_CONSTANT_ENCAPSED_STRING","'You must at least add one authentication provider.'",48],")",";",["T_WHITESPACE","\n        ",48],"}",["T_WHITESPACE","\n\n        ",49],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$providers",51],["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$provider",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(","!",["T_VARIABLE","$provider",52],["T_WHITESPACE"," ",52],["T_INSTANCEOF","instanceof",52],["T_WHITESPACE"," ",52],["T_STRING","AuthenticationProviderInterface",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n                ",52],["T_THROW","throw",53],["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_NS_SEPARATOR","\\",53],["T_STRING","InvalidArgumentException",53],"(",["T_STRING","sprintf",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Provider \"%s\" must implement the AuthenticationProviderInterface.'",53],",",["T_WHITESPACE"," ",53],["T_STRING","get_class",53],"(",["T_VARIABLE","$provider",53],")",")",")",";",["T_WHITESPACE","\n            ",53],"}",["T_WHITESPACE","\n        ",54],"}",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","providers",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$providers",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","eraseCredentials",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_BOOL_CAST","(bool)",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$eraseCredentials",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","setEventDispatcher",61],"(",["T_STRING","EventDispatcherInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$dispatcher",61],")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","eventDispatcher",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$dispatcher",63],";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",66],["T_WHITESPACE","\n    ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","authenticate",69],"(",["T_STRING","TokenInterface",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$token",69],")",["T_WHITESPACE","\n    ",69],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$lastException",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","null",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$result",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],";",["T_WHITESPACE","\n\n        ",72],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","providers",74],["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$provider",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n            ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_VARIABLE","$provider",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","supports",75],"(",["T_VARIABLE","$token",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                ",75],["T_CONTINUE","continue",76],";",["T_WHITESPACE","\n            ",76],"}",["T_WHITESPACE","\n\n            ",77],["T_TRY","try",79],["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_VARIABLE","$result",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$provider",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","authenticate",80],"(",["T_VARIABLE","$token",80],")",";",["T_WHITESPACE","\n\n                ",80],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","null",82],["T_WHITESPACE"," ",82],["T_IS_NOT_IDENTICAL","!==",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$result",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n                    ",82],["T_BREAK","break",83],";",["T_WHITESPACE","\n                ",83],"}",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE"," ",85],["T_CATCH","catch",85],["T_WHITESPACE"," ",85],"(",["T_STRING","AccountStatusException",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$e",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n                ",85],["T_VARIABLE","$e",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","setToken",86],"(",["T_VARIABLE","$token",86],")",";",["T_WHITESPACE","\n\n                ",86],["T_THROW","throw",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$e",88],";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE"," ",89],["T_CATCH","catch",89],["T_WHITESPACE"," ",89],"(",["T_STRING","AuthenticationException",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$e",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$lastException",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$e",90],";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n\n        ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_STRING","null",94],["T_WHITESPACE"," ",94],["T_IS_NOT_IDENTICAL","!==",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$result",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n            ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_STRING","true",95],["T_WHITESPACE"," ",95],["T_IS_IDENTICAL","===",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","eraseCredentials",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n                ",95],["T_VARIABLE","$result",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","eraseCredentials",96],"(",")",";",["T_WHITESPACE","\n            ",96],"}",["T_WHITESPACE","\n\n            ",97],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_STRING","null",99],["T_WHITESPACE"," ",99],["T_IS_NOT_IDENTICAL","!==",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","eventDispatcher",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","eventDispatcher",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","dispatch",100],"(",["T_STRING","AuthenticationEvents",100],["T_DOUBLE_COLON","::",100],["T_STRING","AUTHENTICATION_SUCCESS",100],",",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","AuthenticationEvent",100],"(",["T_VARIABLE","$result",100],")",")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n\n            ",101],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$result",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_STRING","null",106],["T_WHITESPACE"," ",106],["T_IS_IDENTICAL","===",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$lastException",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n            ",106],["T_VARIABLE","$lastException",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_STRING","ProviderNotFoundException",107],"(",["T_STRING","sprintf",107],"(",["T_CONSTANT_ENCAPSED_STRING","'No Authentication Provider found for token of class \"%s\".'",107],",",["T_WHITESPACE"," ",107],["T_STRING","get_class",107],"(",["T_VARIABLE","$token",107],")",")",")",";",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n\n        ",108],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_STRING","null",110],["T_WHITESPACE"," ",110],["T_IS_NOT_IDENTICAL","!==",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","eventDispatcher",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","eventDispatcher",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","dispatch",111],"(",["T_STRING","AuthenticationEvents",111],["T_DOUBLE_COLON","::",111],["T_STRING","AUTHENTICATION_FAILURE",111],",",["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","AuthenticationFailureEvent",111],"(",["T_VARIABLE","$token",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$lastException",111],")",")",";",["T_WHITESPACE","\n        ",111],"}",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$lastException",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","setToken",114],"(",["T_VARIABLE","$token",114],")",";",["T_WHITESPACE","\n\n        ",114],["T_THROW","throw",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$lastException",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n",117],"}",["T_WHITESPACE","\n",118]]
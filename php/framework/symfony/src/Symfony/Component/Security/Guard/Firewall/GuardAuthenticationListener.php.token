[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Guard",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Firewall",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Response",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Event",16],["T_NS_SEPARATOR","\\",16],["T_STRING","GetResponseEvent",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Guard",17],["T_NS_SEPARATOR","\\",17],["T_STRING","GuardAuthenticatorHandler",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Guard",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Token",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PreAuthenticationGuardToken",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Security",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Core",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Authentication",19],["T_NS_SEPARATOR","\\",19],["T_STRING","AuthenticationManagerInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Security",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Guard",20],["T_NS_SEPARATOR","\\",20],["T_STRING","GuardAuthenticatorInterface",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Psr",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Log",21],["T_NS_SEPARATOR","\\",21],["T_STRING","LoggerInterface",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Symfony",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Component",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Security",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Core",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Authentication",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Token",22],["T_NS_SEPARATOR","\\",22],["T_STRING","TokenInterface",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Symfony",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Component",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Security",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Core",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Exception",23],["T_NS_SEPARATOR","\\",23],["T_STRING","AuthenticationException",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Symfony",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Component",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Security",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Http",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Firewall",24],["T_NS_SEPARATOR","\\",24],["T_STRING","ListenerInterface",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Symfony",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Component",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Security",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Http",25],["T_NS_SEPARATOR","\\",25],["T_STRING","RememberMe",25],["T_NS_SEPARATOR","\\",25],["T_STRING","RememberMeServicesInterface",25],";",["T_WHITESPACE","\n\n",25],["T_DOC_COMMENT","\/**\n * Authentication listener for the \"guard\" system.\n *\n * @author Ryan Weaver <ryan@knpuniversity.com>\n *\/",27],["T_WHITESPACE","\n",31],["T_CLASS","class",32],["T_WHITESPACE"," ",32],["T_STRING","GuardAuthenticationListener",32],["T_WHITESPACE"," ",32],["T_IMPLEMENTS","implements",32],["T_WHITESPACE"," ",32],["T_STRING","ListenerInterface",32],["T_WHITESPACE","\n",32],"{",["T_WHITESPACE","\n    ",33],["T_PRIVATE","private",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$guardHandler",34],";",["T_WHITESPACE","\n    ",34],["T_PRIVATE","private",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$authenticationManager",35],";",["T_WHITESPACE","\n    ",35],["T_PRIVATE","private",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$providerKey",36],";",["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$guardAuthenticators",37],";",["T_WHITESPACE","\n    ",37],["T_PRIVATE","private",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$logger",38],";",["T_WHITESPACE","\n    ",38],["T_PRIVATE","private",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$rememberMeServices",39],";",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/**\n     * @param GuardAuthenticatorHandler      $guardHandler          The Guard handler\n     * @param AuthenticationManagerInterface $authenticationManager An AuthenticationManagerInterface instance\n     * @param string                         $providerKey           The provider (i.e. firewall) key\n     * @param GuardAuthenticatorInterface[]  $guardAuthenticators   The authenticators, with keys that match what's passed to GuardAuthenticationProvider\n     * @param LoggerInterface                $logger                A LoggerInterface instance\n     *\/",41],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","__construct",48],"(",["T_STRING","GuardAuthenticatorHandler",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$guardHandler",48],",",["T_WHITESPACE"," ",48],["T_STRING","AuthenticationManagerInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$authenticationManager",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$providerKey",48],",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$guardAuthenticators",48],",",["T_WHITESPACE"," ",48],["T_STRING","LoggerInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$logger",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_EMPTY","empty",50],"(",["T_VARIABLE","$providerKey",50],")",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n            ",50],["T_THROW","throw",51],["T_WHITESPACE"," ",51],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","InvalidArgumentException",51],"(",["T_CONSTANT_ENCAPSED_STRING","'$providerKey must not be empty.'",51],")",";",["T_WHITESPACE","\n        ",51],"}",["T_WHITESPACE","\n\n        ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","guardHandler",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$guardHandler",54],";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","authenticationManager",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$authenticationManager",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","providerKey",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$providerKey",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","guardAuthenticators",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$guardAuthenticators",57],";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","logger",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$logger",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_DOC_COMMENT","\/**\n     * Iterates over each authenticator to see if each wants to authenticate the request.\n     *\n     * @param GetResponseEvent $event\n     *\/",61],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","handle",66],"(",["T_STRING","GetResponseEvent",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$event",66],")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_STRING","null",68],["T_WHITESPACE"," ",68],["T_IS_NOT_IDENTICAL","!==",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","logger",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","logger",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","debug",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Checking for guard authentication credentials.'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","'firewall_key'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","providerKey",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'authenticators'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_STRING","count",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","guardAuthenticators",69],")",")",")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_FOREACH","foreach",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","guardAuthenticators",72],["T_WHITESPACE"," ",72],["T_AS","as",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$key",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$guardAuthenticator",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_COMMENT","\/\/ get a key that's unique to *this* guard authenticator\n",73],["T_WHITESPACE","            ",74],["T_COMMENT","\/\/ this MUST be the same as GuardAuthenticationProvider\n",74],["T_WHITESPACE","            ",75],["T_VARIABLE","$uniqueGuardKey",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","providerKey",75],".",["T_CONSTANT_ENCAPSED_STRING","'_'",75],".",["T_VARIABLE","$key",75],";",["T_WHITESPACE","\n\n            ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","executeGuardAuthenticator",77],"(",["T_VARIABLE","$uniqueGuardKey",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$guardAuthenticator",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$event",77],")",";",["T_WHITESPACE","\n\n            ",77],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$event",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","hasResponse",79],"(",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n                ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_STRING","null",80],["T_WHITESPACE"," ",80],["T_IS_NOT_IDENTICAL","!==",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","logger",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n                    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","logger",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","debug",81],"(",["T_CONSTANT_ENCAPSED_STRING","'The \"{authenticator}\" authenticator set the response. Any later authenticator will not be called'",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'authenticator'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","get_class",81],"(",["T_VARIABLE","$guardAuthenticator",81],")",")",")",";",["T_WHITESPACE","\n                ",81],"}",["T_WHITESPACE","\n\n                ",82],["T_BREAK","break",84],";",["T_WHITESPACE","\n            ",84],"}",["T_WHITESPACE","\n        ",85],"}",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_PRIVATE","private",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","executeGuardAuthenticator",89],"(",["T_VARIABLE","$uniqueGuardKey",89],",",["T_WHITESPACE"," ",89],["T_STRING","GuardAuthenticatorInterface",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$guardAuthenticator",89],",",["T_WHITESPACE"," ",89],["T_STRING","GetResponseEvent",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$event",89],")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$request",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$event",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getRequest",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_TRY","try",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n            ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_STRING","null",93],["T_WHITESPACE"," ",93],["T_IS_NOT_IDENTICAL","!==",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","logger",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","logger",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","debug",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Calling getCredentials() on guard configurator.'",94],",",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",["T_CONSTANT_ENCAPSED_STRING","'firewall_key'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","providerKey",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'authenticator'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_STRING","get_class",94],"(",["T_VARIABLE","$guardAuthenticator",94],")",")",")",";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n\n            ",95],["T_COMMENT","\/\/ allow the authenticator to fetch authentication info from the request\n",97],["T_WHITESPACE","            ",98],["T_VARIABLE","$credentials",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$guardAuthenticator",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getCredentials",98],"(",["T_VARIABLE","$request",98],")",";",["T_WHITESPACE","\n\n            ",98],["T_COMMENT","\/\/ allow null to be returned to skip authentication\n",100],["T_WHITESPACE","            ",101],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_STRING","null",101],["T_WHITESPACE"," ",101],["T_IS_IDENTICAL","===",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$credentials",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n                ",101],["T_RETURN","return",102],";",["T_WHITESPACE","\n            ",102],"}",["T_WHITESPACE","\n\n            ",103],["T_COMMENT","\/\/ create a token with the unique key, so that the provider knows which authenticator to use\n",105],["T_WHITESPACE","            ",106],["T_VARIABLE","$token",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","PreAuthenticationGuardToken",106],"(",["T_VARIABLE","$credentials",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$uniqueGuardKey",106],")",";",["T_WHITESPACE","\n\n            ",106],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_STRING","null",108],["T_WHITESPACE"," ",108],["T_IS_NOT_IDENTICAL","!==",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","logger",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","logger",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","debug",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Passing guard token information to the GuardAuthenticationProvider'",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'firewall_key'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","providerKey",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'authenticator'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","get_class",109],"(",["T_VARIABLE","$guardAuthenticator",109],")",")",")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n            ",110],["T_COMMENT","\/\/ pass the token into the AuthenticationManager system\n",111],["T_WHITESPACE","            ",112],["T_COMMENT","\/\/ this indirectly calls GuardAuthenticationProvider::authenticate()\n",112],["T_WHITESPACE","            ",113],["T_VARIABLE","$token",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","authenticationManager",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","authenticate",113],"(",["T_VARIABLE","$token",113],")",";",["T_WHITESPACE","\n\n            ",113],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","null",115],["T_WHITESPACE"," ",115],["T_IS_NOT_IDENTICAL","!==",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","logger",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n                ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","logger",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","info",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Guard authentication successful!'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'token'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$token",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'authenticator'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","get_class",116],"(",["T_VARIABLE","$guardAuthenticator",116],")",")",")",";",["T_WHITESPACE","\n            ",116],"}",["T_WHITESPACE","\n\n            ",117],["T_COMMENT","\/\/ sets the token on the token storage, etc\n",119],["T_WHITESPACE","            ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","guardHandler",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","authenticateWithToken",120],"(",["T_VARIABLE","$token",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$request",120],")",";",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE"," ",121],["T_CATCH","catch",121],["T_WHITESPACE"," ",121],"(",["T_STRING","AuthenticationException",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$e",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_COMMENT","\/\/ oh no! Authentication failed!\n",122],["T_WHITESPACE","\n            ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_STRING","null",124],["T_WHITESPACE"," ",124],["T_IS_NOT_IDENTICAL","!==",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","logger",124],")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n                ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","logger",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","info",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Guard authentication failed.'",125],",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'exception'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$e",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'authenticator'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","get_class",125],"(",["T_VARIABLE","$guardAuthenticator",125],")",")",")",";",["T_WHITESPACE","\n            ",125],"}",["T_WHITESPACE","\n\n            ",126],["T_VARIABLE","$response",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","guardHandler",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","handleAuthenticationFailure",128],"(",["T_VARIABLE","$e",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$request",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$guardAuthenticator",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","providerKey",128],")",";",["T_WHITESPACE","\n\n            ",128],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$response",130],["T_WHITESPACE"," ",130],["T_INSTANCEOF","instanceof",130],["T_WHITESPACE"," ",130],["T_STRING","Response",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n                ",130],["T_VARIABLE","$event",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setResponse",131],"(",["T_VARIABLE","$response",131],")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n\n            ",132],["T_RETURN","return",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_COMMENT","\/\/ success!\n",137],["T_WHITESPACE","        ",138],["T_VARIABLE","$response",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","guardHandler",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","handleAuthenticationSuccess",138],"(",["T_VARIABLE","$token",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$request",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$guardAuthenticator",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","providerKey",138],")",";",["T_WHITESPACE","\n        ",138],["T_IF","if",139],["T_WHITESPACE"," ",139],"(",["T_VARIABLE","$response",139],["T_WHITESPACE"," ",139],["T_INSTANCEOF","instanceof",139],["T_WHITESPACE"," ",139],["T_STRING","Response",139],")",["T_WHITESPACE"," ",139],"{",["T_WHITESPACE","\n            ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_STRING","null",140],["T_WHITESPACE"," ",140],["T_IS_NOT_IDENTICAL","!==",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","logger",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n                ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","logger",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","debug",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Guard authenticator set success response.'",141],",",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'response'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$response",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'authenticator'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_STRING","get_class",141],"(",["T_VARIABLE","$guardAuthenticator",141],")",")",")",";",["T_WHITESPACE","\n            ",141],"}",["T_WHITESPACE","\n\n            ",142],["T_VARIABLE","$event",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setResponse",144],"(",["T_VARIABLE","$response",144],")",";",["T_WHITESPACE","\n        ",144],"}",["T_WHITESPACE"," ",145],["T_ELSE","else",145],["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n            ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_STRING","null",146],["T_WHITESPACE"," ",146],["T_IS_NOT_IDENTICAL","!==",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","logger",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","logger",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","debug",147],"(",["T_CONSTANT_ENCAPSED_STRING","'Guard authenticator set no success response: request continues.'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'authenticator'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_STRING","get_class",147],"(",["T_VARIABLE","$guardAuthenticator",147],")",")",")",";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n        ",148],"}",["T_WHITESPACE","\n\n        ",149],["T_COMMENT","\/\/ attempt to trigger the remember me functionality\n",151],["T_WHITESPACE","        ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","triggerRememberMe",152],"(",["T_VARIABLE","$guardAuthenticator",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$request",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$token",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$response",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * Should be called if this listener will support remember me.\n     *\n     * @param RememberMeServicesInterface $rememberMeServices\n     *\/",155],["T_WHITESPACE","\n    ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","setRememberMeServices",160],"(",["T_STRING","RememberMeServicesInterface",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$rememberMeServices",160],")",["T_WHITESPACE","\n    ",160],"{",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","rememberMeServices",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$rememberMeServices",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_DOC_COMMENT","\/**\n     * Checks to see if remember me is supported in the authenticator and\n     * on the firewall. If it is, the RememberMeServicesInterface is notified.\n     *\n     * @param GuardAuthenticatorInterface $guardAuthenticator\n     * @param Request                     $request\n     * @param TokenInterface              $token\n     * @param Response                    $response\n     *\/",165],["T_WHITESPACE","\n    ",173],["T_PRIVATE","private",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","triggerRememberMe",174],"(",["T_STRING","GuardAuthenticatorInterface",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$guardAuthenticator",174],",",["T_WHITESPACE"," ",174],["T_STRING","Request",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$request",174],",",["T_WHITESPACE"," ",174],["T_STRING","TokenInterface",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$token",174],",",["T_WHITESPACE"," ",174],["T_STRING","Response",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$response",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","null",174],")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","null",176],["T_WHITESPACE"," ",176],["T_IS_IDENTICAL","===",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","rememberMeServices",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n            ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_STRING","null",177],["T_WHITESPACE"," ",177],["T_IS_NOT_IDENTICAL","!==",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","logger",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n                ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","logger",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","debug",178],"(",["T_CONSTANT_ENCAPSED_STRING","'Remember me skipped: it is not configured for the firewall.'",178],",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_CONSTANT_ENCAPSED_STRING","'authenticator'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","get_class",178],"(",["T_VARIABLE","$guardAuthenticator",178],")",")",")",";",["T_WHITESPACE","\n            ",178],"}",["T_WHITESPACE","\n\n            ",179],["T_RETURN","return",181],";",["T_WHITESPACE","\n        ",181],"}",["T_WHITESPACE","\n\n        ",182],["T_IF","if",184],["T_WHITESPACE"," ",184],"(","!",["T_VARIABLE","$guardAuthenticator",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","supportsRememberMe",184],"(",")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n            ",184],["T_IF","if",185],["T_WHITESPACE"," ",185],"(",["T_STRING","null",185],["T_WHITESPACE"," ",185],["T_IS_NOT_IDENTICAL","!==",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","logger",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n                ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","logger",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","debug",186],"(",["T_CONSTANT_ENCAPSED_STRING","'Remember me skipped: your authenticator does not support it.'",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_CONSTANT_ENCAPSED_STRING","'authenticator'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_STRING","get_class",186],"(",["T_VARIABLE","$guardAuthenticator",186],")",")",")",";",["T_WHITESPACE","\n            ",186],"}",["T_WHITESPACE","\n\n            ",187],["T_RETURN","return",189],";",["T_WHITESPACE","\n        ",189],"}",["T_WHITESPACE","\n\n        ",190],["T_IF","if",192],["T_WHITESPACE"," ",192],"(","!",["T_VARIABLE","$response",192],["T_WHITESPACE"," ",192],["T_INSTANCEOF","instanceof",192],["T_WHITESPACE"," ",192],["T_STRING","Response",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n            ",192],["T_THROW","throw",193],["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_NS_SEPARATOR","\\",193],["T_STRING","LogicException",193],"(",["T_STRING","sprintf",193],"(",["T_WHITESPACE","\n                ",193],["T_CONSTANT_ENCAPSED_STRING","'%s::onAuthenticationSuccess *must* return a Response if you want to use the remember me functionality. Return a Response, or set remember_me to false under the guard configuration.'",194],",",["T_WHITESPACE","\n                ",194],["T_STRING","get_class",195],"(",["T_VARIABLE","$guardAuthenticator",195],")",["T_WHITESPACE","\n            ",195],")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","rememberMeServices",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","loginSuccess",199],"(",["T_VARIABLE","$request",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$response",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$token",199],")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n",200],"}",["T_WHITESPACE","\n",201]]
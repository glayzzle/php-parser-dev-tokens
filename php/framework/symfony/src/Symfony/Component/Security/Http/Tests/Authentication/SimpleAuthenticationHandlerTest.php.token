[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Response",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Security",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Authentication",15],["T_NS_SEPARATOR","\\",15],["T_STRING","SimpleAuthenticatorInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Core",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AuthenticationException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Http",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Authentication",17],["T_NS_SEPARATOR","\\",17],["T_STRING","AuthenticationFailureHandlerInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Http",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Authentication",18],["T_NS_SEPARATOR","\\",18],["T_STRING","AuthenticationSuccessHandlerInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Security",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Http",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Authentication",19],["T_NS_SEPARATOR","\\",19],["T_STRING","SimpleAuthenticationHandler",19],";",["T_WHITESPACE","\n\n",19],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","SimpleAuthenticationHandlerTest",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","PHPUnit_Framework_TestCase",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$successHandler",23],";",["T_WHITESPACE","\n\n    ",23],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$failureHandler",25],";",["T_WHITESPACE","\n\n    ",25],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$request",27],";",["T_WHITESPACE","\n\n    ",27],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$token",29],";",["T_WHITESPACE","\n\n    ",29],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$authenticationException",31],";",["T_WHITESPACE","\n\n    ",31],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$response",33],";",["T_WHITESPACE","\n\n    ",33],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","setUp",35],"(",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","successHandler",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMockBuilder",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Authentication\\AuthenticationSuccessHandlerInterface'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","failureHandler",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMockBuilder",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Authentication\\AuthenticationFailureHandlerInterface'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","getMock",38],"(",")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","request",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getMockBuilder",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Request'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","getMock",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","token",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMockBuilder",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\TokenInterface'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","getMock",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_COMMENT","\/\/ No methods are invoked on the exception; we just assert on its class\n",42],["T_WHITESPACE","        ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","authenticationException",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","AuthenticationException",43],"(",")",";",["T_WHITESPACE","\n\n        ",43],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","response",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NEW","new",45],["T_WHITESPACE"," ",45],["T_STRING","Response",45],"(",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","testOnAuthenticationSuccessFallsBackToDefaultHandlerIfSimpleIsNotASuccessHandler",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$authenticator",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMockBuilder",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\SimpleAuthenticatorInterface'",50],")",["T_OBJECT_OPERATOR","->",50],["T_STRING","getMock",50],"(",")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","successHandler",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","expects",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","once",52],"(",")",")",["T_WHITESPACE","\n            ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","method",53],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",53],")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","with",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","request",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","token",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","will",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","returnValue",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","response",55],")",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$handler",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","SimpleAuthenticationHandler",57],"(",["T_VARIABLE","$authenticator",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","successHandler",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","failureHandler",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$result",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$handler",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","onAuthenticationSuccess",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","request",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","token",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertSame",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","response",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$result",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testOnAuthenticationSuccessCallsSimpleAuthenticator",63],"(",")",["T_WHITESPACE","\n    ",63],"{",["T_WHITESPACE","\n        ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","successHandler",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","expects",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","never",65],"(",")",")",["T_WHITESPACE","\n            ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","method",66],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",66],")",";",["T_WHITESPACE","\n\n        ",66],["T_VARIABLE","$authenticator",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getMockForAbstractClass",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestSuccessHandlerInterface'",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$authenticator",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","expects",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","once",69],"(",")",")",["T_WHITESPACE","\n            ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","method",70],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",70],")",["T_WHITESPACE","\n            ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","with",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","request",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","token",71],")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","will",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","returnValue",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","response",72],")",")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$handler",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","SimpleAuthenticationHandler",74],"(",["T_VARIABLE","$authenticator",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","successHandler",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","failureHandler",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$result",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$handler",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","onAuthenticationSuccess",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","request",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","token",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertSame",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","response",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$result",77],")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_DOC_COMMENT","\/**\n     * @expectedException        \\UnexpectedValueException\n     * @expectedExceptionMessage onAuthenticationSuccess method must return null to use the default success handler, or a Response object\n     *\/",80],["T_WHITESPACE","\n    ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testOnAuthenticationSuccessThrowsAnExceptionIfNonResponseIsReturned",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","successHandler",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","expects",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","never",86],"(",")",")",["T_WHITESPACE","\n            ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","method",87],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$authenticator",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getMockForAbstractClass",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestSuccessHandlerInterface'",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$authenticator",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","expects",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","once",90],"(",")",")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","method",91],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",91],")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","with",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","request",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","token",92],")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","will",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","returnValue",93],"(",["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","stdClass",93],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",93],["T_VARIABLE","$handler",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","SimpleAuthenticationHandler",95],"(",["T_VARIABLE","$authenticator",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","successHandler",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","failureHandler",95],")",";",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$handler",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","onAuthenticationSuccess",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","request",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","token",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testOnAuthenticationSuccessFallsBackToDefaultHandlerIfNullIsReturned",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","successHandler",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","expects",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","once",101],"(",")",")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","method",102],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",102],")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","with",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","request",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","token",103],")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","will",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","returnValue",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","response",104],")",")",";",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$authenticator",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getMockForAbstractClass",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestSuccessHandlerInterface'",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$authenticator",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","expects",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","once",107],"(",")",")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","method",108],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationSuccess'",108],")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","with",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","request",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","token",109],")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","will",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","returnValue",110],"(",["T_STRING","null",110],")",")",";",["T_WHITESPACE","\n\n        ",110],["T_VARIABLE","$handler",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","SimpleAuthenticationHandler",112],"(",["T_VARIABLE","$authenticator",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","successHandler",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","failureHandler",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$result",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$handler",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","onAuthenticationSuccess",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","request",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","token",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertSame",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","response",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$result",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","testOnAuthenticationFailureFallsBackToDefaultHandlerIfSimpleIsNotAFailureHandler",118],"(",")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$authenticator",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getMockBuilder",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\SimpleAuthenticatorInterface'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","getMock",120],"(",")",";",["T_WHITESPACE","\n\n        ",120],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","failureHandler",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","expects",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","once",122],"(",")",")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","method",123],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","with",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","request",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","authenticationException",124],")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","will",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","returnValue",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","response",125],")",")",";",["T_WHITESPACE","\n\n        ",125],["T_VARIABLE","$handler",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_NEW","new",127],["T_WHITESPACE"," ",127],["T_STRING","SimpleAuthenticationHandler",127],"(",["T_VARIABLE","$authenticator",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","successHandler",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","failureHandler",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$result",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$handler",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","onAuthenticationFailure",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","request",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","authenticationException",128],")",";",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertSame",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","response",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$result",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","testOnAuthenticationFailureCallsSimpleAuthenticator",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","failureHandler",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","expects",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","never",135],"(",")",")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","method",136],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$authenticator",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getMockForAbstractClass",138],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestFailureHandlerInterface'",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$authenticator",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","expects",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","once",139],"(",")",")",["T_WHITESPACE","\n            ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","method",140],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",140],")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","with",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","request",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","authenticationException",141],")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","will",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","returnValue",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","response",142],")",")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$handler",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_NEW","new",144],["T_WHITESPACE"," ",144],["T_STRING","SimpleAuthenticationHandler",144],"(",["T_VARIABLE","$authenticator",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","successHandler",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","failureHandler",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$result",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$handler",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","onAuthenticationFailure",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","request",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","authenticationException",145],")",";",["T_WHITESPACE","\n\n        ",145],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertSame",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","response",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$result",147],")",";",["T_WHITESPACE","\n    ",147],"}",["T_WHITESPACE","\n\n    ",148],["T_DOC_COMMENT","\/**\n     * @expectedException        \\UnexpectedValueException\n     * @expectedExceptionMessage onAuthenticationFailure method must return null to use the default failure handler, or a Response object\n     *\/",150],["T_WHITESPACE","\n    ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","testOnAuthenticationFailureThrowsAnExceptionIfNonResponseIsReturned",154],"(",")",["T_WHITESPACE","\n    ",154],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","failureHandler",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","expects",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","never",156],"(",")",")",["T_WHITESPACE","\n            ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","method",157],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",157],")",";",["T_WHITESPACE","\n\n        ",157],["T_VARIABLE","$authenticator",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getMockForAbstractClass",159],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestFailureHandlerInterface'",159],")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$authenticator",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","expects",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","once",160],"(",")",")",["T_WHITESPACE","\n            ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",161],")",["T_WHITESPACE","\n            ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","with",162],"(",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","request",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","authenticationException",162],")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","will",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","returnValue",163],"(",["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_NS_SEPARATOR","\\",163],["T_STRING","stdClass",163],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$handler",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_NEW","new",165],["T_WHITESPACE"," ",165],["T_STRING","SimpleAuthenticationHandler",165],"(",["T_VARIABLE","$authenticator",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","successHandler",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","failureHandler",165],")",";",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$handler",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","onAuthenticationFailure",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","request",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","authenticationException",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","testOnAuthenticationFailureFallsBackToDefaultHandlerIfNullIsReturned",169],"(",")",["T_WHITESPACE","\n    ",169],"{",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","failureHandler",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","expects",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","once",171],"(",")",")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","method",172],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",172],")",["T_WHITESPACE","\n            ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","with",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","request",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","authenticationException",173],")",["T_WHITESPACE","\n            ",173],["T_OBJECT_OPERATOR","->",174],["T_STRING","will",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","returnValue",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","response",174],")",")",";",["T_WHITESPACE","\n\n        ",174],["T_VARIABLE","$authenticator",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getMockForAbstractClass",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Tests\\TestFailureHandlerInterface'",176],")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$authenticator",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","expects",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","once",177],"(",")",")",["T_WHITESPACE","\n            ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","method",178],"(",["T_CONSTANT_ENCAPSED_STRING","'onAuthenticationFailure'",178],")",["T_WHITESPACE","\n            ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","with",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","request",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","authenticationException",179],")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","will",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","returnValue",180],"(",["T_STRING","null",180],")",")",";",["T_WHITESPACE","\n\n        ",180],["T_VARIABLE","$handler",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_NEW","new",182],["T_WHITESPACE"," ",182],["T_STRING","SimpleAuthenticationHandler",182],"(",["T_VARIABLE","$authenticator",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","successHandler",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","failureHandler",182],")",";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$result",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$handler",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","onAuthenticationFailure",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","request",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","authenticationException",183],")",";",["T_WHITESPACE","\n\n        ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertSame",185],"(",["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","response",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$result",185],")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n",186],"}",["T_WHITESPACE","\n\n",187],["T_INTERFACE","interface",189],["T_WHITESPACE"," ",189],["T_STRING","TestSuccessHandlerInterface",189],["T_WHITESPACE"," ",189],["T_EXTENDS","extends",189],["T_WHITESPACE"," ",189],["T_STRING","AuthenticationSuccessHandlerInterface",189],",",["T_WHITESPACE"," ",189],["T_STRING","SimpleAuthenticatorInterface",189],["T_WHITESPACE","\n",189],"{",["T_WHITESPACE","\n",190],"}",["T_WHITESPACE","\n\n",191],["T_INTERFACE","interface",193],["T_WHITESPACE"," ",193],["T_STRING","TestFailureHandlerInterface",193],["T_WHITESPACE"," ",193],["T_EXTENDS","extends",193],["T_WHITESPACE"," ",193],["T_STRING","AuthenticationFailureHandlerInterface",193],",",["T_WHITESPACE"," ",193],["T_STRING","SimpleAuthenticatorInterface",193],["T_WHITESPACE","\n",193],"{",["T_WHITESPACE","\n",194],"}",["T_WHITESPACE","\n",195]]
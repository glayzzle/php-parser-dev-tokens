[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Logout",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","RequestStack",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Routing",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Generator",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UrlGeneratorInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Core",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Authentication",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Token",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Storage",16],["T_NS_SEPARATOR","\\",16],["T_STRING","TokenStorageInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Csrf",17],["T_NS_SEPARATOR","\\",17],["T_STRING","CsrfTokenManagerInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Provides generator functions for the logout URL.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n * @author Jeremy Mikola <jmikola@gmail.com>\n *\/",19],["T_WHITESPACE","\n",24],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","LogoutUrlGenerator",25],["T_WHITESPACE","\n",25],"{",["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$requestStack",27],";",["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$router",28],";",["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$tokenStorage",29],";",["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$listeners",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",")",";",["T_WHITESPACE","\n\n    ",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","__construct",32],"(",["T_STRING","RequestStack",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$requestStack",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],",",["T_WHITESPACE"," ",32],["T_STRING","UrlGeneratorInterface",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$router",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],",",["T_WHITESPACE"," ",32],["T_STRING","TokenStorageInterface",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$tokenStorage",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","null",32],")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","requestStack",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$requestStack",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","router",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$router",35],";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","tokenStorage",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$tokenStorage",36],";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_DOC_COMMENT","\/**\n     * Registers a firewall's LogoutListener, allowing its URL to be generated.\n     *\n     * @param string                    $key              The firewall key\n     * @param string                    $logoutPath       The path that starts the logout process\n     * @param string                    $csrfTokenId      The ID of the CSRF token\n     * @param string                    $csrfParameter    The CSRF token parameter name\n     * @param CsrfTokenManagerInterface $csrfTokenManager A CsrfTokenManagerInterface instance\n     *\/",39],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","registerListener",48],"(",["T_VARIABLE","$key",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$logoutPath",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$csrfTokenId",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$csrfParameter",48],",",["T_WHITESPACE"," ",48],["T_STRING","CsrfTokenManagerInterface",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$csrfTokenManager",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","listeners",50],"[",["T_VARIABLE","$key",50],"]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_VARIABLE","$logoutPath",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$csrfTokenId",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$csrfParameter",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$csrfTokenManager",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Generates the absolute logout path for the firewall.\n     *\n     * @param string|null $key The firewall key or null to use the current firewall key\n     *\n     * @return string The logout path\n     *\/",53],["T_WHITESPACE","\n    ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getLogoutPath",60],"(",["T_VARIABLE","$key",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","null",60],")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","generateLogoutUrl",62],"(",["T_VARIABLE","$key",62],",",["T_WHITESPACE"," ",62],["T_STRING","UrlGeneratorInterface",62],["T_DOUBLE_COLON","::",62],["T_STRING","ABSOLUTE_PATH",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * Generates the absolute logout URL for the firewall.\n     *\n     * @param string|null $key The firewall key or null to use the current firewall key\n     *\n     * @return string The logout URL\n     *\/",65],["T_WHITESPACE","\n    ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getLogoutUrl",72],"(",["T_VARIABLE","$key",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","null",72],")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","generateLogoutUrl",74],"(",["T_VARIABLE","$key",74],",",["T_WHITESPACE"," ",74],["T_STRING","UrlGeneratorInterface",74],["T_DOUBLE_COLON","::",74],["T_STRING","ABSOLUTE_URL",74],")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_DOC_COMMENT","\/**\n     * Generates the logout URL for the firewall.\n     *\n     * @param string|null $key           The firewall key or null to use the current firewall key\n     * @param int         $referenceType The type of reference (one of the constants in UrlGeneratorInterface)\n     *\n     * @return string The logout URL\n     *\n     * @throws \\InvalidArgumentException if no LogoutListener is registered for the key or the key could not be found automatically.\n     *\/",77],["T_WHITESPACE","\n    ",86],["T_PRIVATE","private",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","generateLogoutUrl",87],"(",["T_VARIABLE","$key",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$referenceType",87],")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_COMMENT","\/\/ Fetch the current provider key from token, if possible\n",89],["T_WHITESPACE","        ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_STRING","null",90],["T_WHITESPACE"," ",90],["T_IS_IDENTICAL","===",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$key",90],["T_WHITESPACE"," ",90],["T_BOOLEAN_AND","&&",90],["T_WHITESPACE"," ",90],["T_STRING","null",90],["T_WHITESPACE"," ",90],["T_IS_NOT_IDENTICAL","!==",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","tokenStorage",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$token",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","tokenStorage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getToken",91],"(",")",";",["T_WHITESPACE","\n            ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_STRING","null",92],["T_WHITESPACE"," ",92],["T_IS_NOT_IDENTICAL","!==",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$token",92],["T_WHITESPACE"," ",92],["T_BOOLEAN_AND","&&",92],["T_WHITESPACE"," ",92],["T_STRING","method_exists",92],"(",["T_VARIABLE","$token",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'getProviderKey'",92],")",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n                ",92],["T_VARIABLE","$key",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$token",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getProviderKey",93],"(",")",";",["T_WHITESPACE","\n            ",93],"}",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n\n        ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_STRING","null",97],["T_WHITESPACE"," ",97],["T_IS_IDENTICAL","===",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$key",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n            ",97],["T_THROW","throw",98],["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","InvalidArgumentException",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to find the current firewall LogoutListener, please provide the provider key manually.'",98],")",";",["T_WHITESPACE","\n        ",98],"}",["T_WHITESPACE","\n\n        ",99],["T_IF","if",101],["T_WHITESPACE"," ",101],"(","!",["T_STRING","array_key_exists",101],"(",["T_VARIABLE","$key",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","listeners",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n            ",101],["T_THROW","throw",102],["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","InvalidArgumentException",102],"(",["T_STRING","sprintf",102],"(",["T_CONSTANT_ENCAPSED_STRING","'No LogoutListener found for firewall key \"%s\".'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$key",102],")",")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_LIST","list",105],"(",["T_VARIABLE","$logoutPath",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$csrfTokenId",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$csrfParameter",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$csrfTokenManager",105],")",["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","listeners",105],"[",["T_VARIABLE","$key",105],"]",";",["T_WHITESPACE","\n\n        ",105],["T_VARIABLE","$parameters",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","null",107],["T_WHITESPACE"," ",107],["T_IS_NOT_IDENTICAL","!==",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$csrfTokenManager",107],["T_WHITESPACE"," ",107],"?",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_VARIABLE","$csrfParameter",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING_CAST","(string)",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$csrfTokenManager",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getToken",107],"(",["T_VARIABLE","$csrfTokenId",107],")",")",["T_WHITESPACE"," ",107],":",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",";",["T_WHITESPACE","\n\n        ",107],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",109],["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$logoutPath",109],"[",["T_LNUMBER","0",109],"]",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n            ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","requestStack",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                ",110],["T_THROW","throw",111],["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_NS_SEPARATOR","\\",111],["T_STRING","LogicException",111],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to generate the logout URL without a RequestStack.'",111],")",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_VARIABLE","$request",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","requestStack",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getCurrentRequest",114],"(",")",";",["T_WHITESPACE","\n\n            ",114],["T_VARIABLE","$url",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","UrlGeneratorInterface",116],["T_DOUBLE_COLON","::",116],["T_STRING","ABSOLUTE_URL",116],["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$referenceType",116],["T_WHITESPACE"," ",116],"?",["T_WHITESPACE"," ",116],["T_VARIABLE","$request",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getUriForPath",116],"(",["T_VARIABLE","$logoutPath",116],")",["T_WHITESPACE"," ",116],":",["T_WHITESPACE"," ",116],["T_VARIABLE","$request",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getBaseUrl",116],"(",")",".",["T_VARIABLE","$logoutPath",116],";",["T_WHITESPACE","\n\n            ",116],["T_IF","if",118],["T_WHITESPACE"," ",118],"(","!",["T_EMPTY","empty",118],"(",["T_VARIABLE","$parameters",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n                ",118],["T_VARIABLE","$url",119],["T_WHITESPACE"," ",119],["T_CONCAT_EQUAL",".=",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'?'",119],".",["T_STRING","http_build_query",119],"(",["T_VARIABLE","$parameters",119],")",";",["T_WHITESPACE","\n            ",119],"}",["T_WHITESPACE","\n        ",120],"}",["T_WHITESPACE"," ",121],["T_ELSE","else",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n            ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","router",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                ",122],["T_THROW","throw",123],["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","LogicException",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to generate the logout URL without a Router.'",123],")",";",["T_WHITESPACE","\n            ",123],"}",["T_WHITESPACE","\n\n            ",124],["T_VARIABLE","$url",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","router",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","generate",126],"(",["T_VARIABLE","$logoutPath",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$parameters",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$referenceType",126],")",";",["T_WHITESPACE","\n        ",126],"}",["T_WHITESPACE","\n\n        ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$url",129],";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n",130],"}",["T_WHITESPACE","\n",131]]
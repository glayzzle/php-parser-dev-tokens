[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Firewall",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Security",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Role",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Role",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Security",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Http",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Event",15],["T_NS_SEPARATOR","\\",15],["T_STRING","SwitchUserEvent",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Http",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Firewall",16],["T_NS_SEPARATOR","\\",16],["T_STRING","SwitchUserListener",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Http",17],["T_NS_SEPARATOR","\\",17],["T_STRING","SecurityEvents",17],";",["T_WHITESPACE","\n\n",17],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","SwitchUserListenerTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_NS_SEPARATOR","\\",19],["T_STRING","PHPUnit_Framework_TestCase",19],["T_WHITESPACE","\n",19],"{",["T_WHITESPACE","\n    ",20],["T_PRIVATE","private",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$tokenStorage",21],";",["T_WHITESPACE","\n\n    ",21],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$userProvider",23],";",["T_WHITESPACE","\n\n    ",23],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$userChecker",25],";",["T_WHITESPACE","\n\n    ",25],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$accessDecisionManager",27],";",["T_WHITESPACE","\n\n    ",27],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$request",29],";",["T_WHITESPACE","\n\n    ",29],["T_PRIVATE","private",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$event",31],";",["T_WHITESPACE","\n\n    ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","tokenStorage",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getMockBuilder",35],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\Storage\\TokenStorageInterface'",35],")",["T_OBJECT_OPERATOR","->",35],["T_STRING","getMock",35],"(",")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","userProvider",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getMockBuilder",36],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserProviderInterface'",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","getMock",36],"(",")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","userChecker",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMockBuilder",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserCheckerInterface'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getMock",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","accessDecisionManager",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMockBuilder",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authorization\\AccessDecisionManagerInterface'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","getMock",38],"(",")",";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","request",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMockBuilder",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Request'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","getMock",39],"(",")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","request",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","query",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getMockBuilder",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\ParameterBag'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","getMock",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","request",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","server",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMockBuilder",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\ServerBag'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","getMock",41],"(",")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","event",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getEvent",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","request",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_DOC_COMMENT","\/**\n     * @expectedException \\InvalidArgumentException\n     * @expectedExceptionMessage $providerKey must not be empty\n     *\/",45],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testProviderKeyIsRequired",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_NEW","new",51],["T_WHITESPACE"," ",51],["T_STRING","SwitchUserListener",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","tokenStorage",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","userProvider",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","userChecker",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","''",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","accessDecisionManager",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","testEventIsIgnoredIfUsernameIsNotPassedWithTheRequest",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","request",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","expects",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","any",56],"(",")",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","method",56],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","with",56],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",56],")",["T_OBJECT_OPERATOR","->",56],["T_STRING","will",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","returnValue",56],"(",["T_STRING","null",56],")",")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","event",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","expects",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","never",58],"(",")",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","method",58],"(",["T_CONSTANT_ENCAPSED_STRING","'setResponse'",58],")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","tokenStorage",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","expects",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","never",59],"(",")",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","method",59],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",59],")",";",["T_WHITESPACE","\n\n        ",59],["T_VARIABLE","$listener",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_NEW","new",61],["T_WHITESPACE"," ",61],["T_STRING","SwitchUserListener",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","tokenStorage",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","userProvider",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","userChecker",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'provider123'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","accessDecisionManager",61],")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$listener",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","handle",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","event",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n\n    ",63],["T_DOC_COMMENT","\/**\n     * @expectedException \\Symfony\\Component\\Security\\Core\\Exception\\AuthenticationCredentialsNotFoundException\n     *\/",65],["T_WHITESPACE","\n    ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testExitUserThrowsAuthenticationExceptionIfOriginalTokenCannotBeFound",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$token",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getToken",70],"(",["T_ARRAY","array",70],"(",["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_STRING","Role",70],"(",["T_CONSTANT_ENCAPSED_STRING","'the role'",70],")",")",")",";",["T_WHITESPACE","\n\n        ",70],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","tokenStorage",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","expects",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","any",72],"(",")",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","method",72],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","will",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","returnValue",72],"(",["T_VARIABLE","$token",72],")",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","request",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","expects",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","any",73],"(",")",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","method",73],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","with",73],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","will",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","returnValue",73],"(",["T_CONSTANT_ENCAPSED_STRING","'_exit'",73],")",")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$listener",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_STRING","SwitchUserListener",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","tokenStorage",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","userProvider",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","userChecker",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'provider123'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","accessDecisionManager",75],")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$listener",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","handle",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","event",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testExitUserUpdatesToken",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$originalToken",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getToken",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$role",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getMockBuilder",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Role\\SwitchUserRole'",82],")",["T_WHITESPACE","\n            ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","disableOriginalConstructor",83],"(",")",["T_WHITESPACE","\n            ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","getMock",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$role",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","expects",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","any",85],"(",")",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","method",85],"(",["T_CONSTANT_ENCAPSED_STRING","'getSource'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","will",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","returnValue",85],"(",["T_VARIABLE","$originalToken",85],")",")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","tokenStorage",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","expects",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","any",87],"(",")",")",["T_WHITESPACE","\n            ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","method",88],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",88],")",["T_WHITESPACE","\n            ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","will",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","returnValue",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getToken",89],"(",["T_ARRAY","array",89],"(",["T_VARIABLE","$role",89],")",")",")",")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","request",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","expects",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","any",91],"(",")",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","method",91],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","with",91],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","will",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","returnValue",91],"(",["T_CONSTANT_ENCAPSED_STRING","'_exit'",91],")",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","request",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","expects",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","any",92],"(",")",")",["T_OBJECT_OPERATOR","->",92],["T_STRING","method",92],"(",["T_CONSTANT_ENCAPSED_STRING","'getUri'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","will",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","returnValue",92],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",92],")",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","request",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","query",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","expects",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","once",93],"(",")",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","method",93],"(",["T_CONSTANT_ENCAPSED_STRING","'remove'",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",93],")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","request",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","query",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","expects",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","any",94],"(",")",")",["T_OBJECT_OPERATOR","->",94],["T_STRING","method",94],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","will",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","returnValue",94],"(",["T_ARRAY","array",94],"(",")",")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","request",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","server",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","expects",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","once",95],"(",")",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","method",95],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","with",95],"(",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","''",95],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","tokenStorage",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","once",97],"(",")",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","method",98],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","with",98],"(",["T_VARIABLE","$originalToken",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","event",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","expects",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","once",99],"(",")",")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'setResponse'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","with",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","isInstanceOf",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\RedirectResponse'",100],")",")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$listener",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","SwitchUserListener",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","tokenStorage",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","userProvider",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","userChecker",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'provider123'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","accessDecisionManager",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$listener",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","handle",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","event",103],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","testExitUserDispatchesEventWithRefreshedUser",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$originalUser",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getMockBuilder",108],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserInterface'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","getMock",108],"(",")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$refreshedUser",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getMockBuilder",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserInterface'",109],")",["T_OBJECT_OPERATOR","->",109],["T_STRING","getMock",109],"(",")",";",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$this",110],["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","userProvider",111],["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","expects",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","any",112],"(",")",")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","method",113],"(",["T_CONSTANT_ENCAPSED_STRING","'refreshUser'",113],")",["T_WHITESPACE","\n            ",113],["T_OBJECT_OPERATOR","->",114],["T_STRING","with",114],"(",["T_VARIABLE","$originalUser",114],")",["T_WHITESPACE","\n            ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","willReturn",115],"(",["T_VARIABLE","$refreshedUser",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$originalToken",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getToken",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$originalToken",117],["T_WHITESPACE","\n            ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","expects",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","any",118],"(",")",")",["T_WHITESPACE","\n            ",118],["T_OBJECT_OPERATOR","->",119],["T_STRING","method",119],"(",["T_CONSTANT_ENCAPSED_STRING","'getUser'",119],")",["T_WHITESPACE","\n            ",119],["T_OBJECT_OPERATOR","->",120],["T_STRING","willReturn",120],"(",["T_VARIABLE","$originalUser",120],")",";",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$role",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_WHITESPACE","\n            ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","getMockBuilder",122],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Role\\SwitchUserRole'",122],")",["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","disableOriginalConstructor",123],"(",")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","getMock",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$role",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","expects",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","any",125],"(",")",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","method",125],"(",["T_CONSTANT_ENCAPSED_STRING","'getSource'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","willReturn",125],"(",["T_VARIABLE","$originalToken",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_WHITESPACE","\n            ",126],["T_OBJECT_OPERATOR","->",127],["T_STRING","tokenStorage",127],["T_WHITESPACE","\n            ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","expects",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","any",128],"(",")",")",["T_WHITESPACE","\n            ",128],["T_OBJECT_OPERATOR","->",129],["T_STRING","method",129],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",129],")",["T_WHITESPACE","\n            ",129],["T_OBJECT_OPERATOR","->",130],["T_STRING","willReturn",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getToken",130],"(",["T_ARRAY","array",130],"(",["T_VARIABLE","$role",130],")",")",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_WHITESPACE","\n            ",131],["T_OBJECT_OPERATOR","->",132],["T_STRING","request",132],["T_WHITESPACE","\n            ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","expects",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","any",133],"(",")",")",["T_WHITESPACE","\n            ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","method",134],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",134],")",["T_WHITESPACE","\n            ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","with",135],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",135],")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","willReturn",136],"(",["T_CONSTANT_ENCAPSED_STRING","'_exit'",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$this",137],["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","request",138],["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","expects",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","any",139],"(",")",")",["T_WHITESPACE","\n            ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","method",140],"(",["T_CONSTANT_ENCAPSED_STRING","'getUri'",140],")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","willReturn",141],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","request",143],["T_WHITESPACE","\n            ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","query",144],["T_WHITESPACE","\n            ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","expects",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","any",145],"(",")",")",["T_WHITESPACE","\n            ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","method",146],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",146],")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","will",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","returnValue",147],"(",["T_ARRAY","array",147],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$dispatcher",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getMockBuilder",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\EventDispatcher\\EventDispatcherInterface'",149],")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getMock",149],"(",")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$dispatcher",150],["T_WHITESPACE","\n            ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","expects",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","once",151],"(",")",")",["T_WHITESPACE","\n            ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","method",152],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",152],")",["T_WHITESPACE","\n            ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","with",153],"(",["T_STRING","SecurityEvents",153],["T_DOUBLE_COLON","::",153],["T_STRING","SWITCH_USER",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","callback",153],"(",["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],"(",["T_STRING","SwitchUserEvent",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$event",153],")",["T_WHITESPACE"," ",153],["T_USE","use",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$refreshedUser",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                ",153],["T_RETURN","return",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$event",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getTargetUser",154],"(",")",["T_WHITESPACE"," ",154],["T_IS_IDENTICAL","===",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$refreshedUser",154],";",["T_WHITESPACE","\n            ",154],"}",")",")",["T_WHITESPACE","\n        ",155],";",["T_WHITESPACE","\n\n        ",156],["T_VARIABLE","$listener",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","SwitchUserListener",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","tokenStorage",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","userProvider",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","userChecker",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'provider123'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","accessDecisionManager",158],",",["T_WHITESPACE"," ",158],["T_STRING","null",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'ROLE_ALLOWED_TO_SWITCH'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$dispatcher",158],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$listener",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","handle",159],"(",["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","event",159],")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_PUBLIC","public",162],["T_WHITESPACE"," ",162],["T_FUNCTION","function",162],["T_WHITESPACE"," ",162],["T_STRING","testExitUserDoesNotDispatchEventWithStringUser",162],"(",")",["T_WHITESPACE","\n    ",162],"{",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$originalUser",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'anon.'",164],";",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_WHITESPACE","\n            ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","userProvider",166],["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","expects",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","never",167],"(",")",")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","method",168],"(",["T_CONSTANT_ENCAPSED_STRING","'refreshUser'",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$originalToken",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getToken",169],"(",")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$originalToken",170],["T_WHITESPACE","\n            ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","expects",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","any",171],"(",")",")",["T_WHITESPACE","\n            ",171],["T_OBJECT_OPERATOR","->",172],["T_STRING","method",172],"(",["T_CONSTANT_ENCAPSED_STRING","'getUser'",172],")",["T_WHITESPACE","\n            ",172],["T_OBJECT_OPERATOR","->",173],["T_STRING","willReturn",173],"(",["T_VARIABLE","$originalUser",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$role",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_WHITESPACE","\n            ",174],["T_OBJECT_OPERATOR","->",175],["T_STRING","getMockBuilder",175],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Role\\SwitchUserRole'",175],")",["T_WHITESPACE","\n            ",175],["T_OBJECT_OPERATOR","->",176],["T_STRING","disableOriginalConstructor",176],"(",")",["T_WHITESPACE","\n            ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","getMock",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$role",178],["T_WHITESPACE","\n            ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","expects",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","any",179],"(",")",")",["T_WHITESPACE","\n            ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","method",180],"(",["T_CONSTANT_ENCAPSED_STRING","'getSource'",180],")",["T_WHITESPACE","\n            ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","willReturn",181],"(",["T_VARIABLE","$originalToken",181],")",";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_WHITESPACE","\n            ",182],["T_OBJECT_OPERATOR","->",183],["T_STRING","tokenStorage",183],["T_WHITESPACE","\n            ",183],["T_OBJECT_OPERATOR","->",184],["T_STRING","expects",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","any",184],"(",")",")",["T_WHITESPACE","\n            ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","method",185],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",185],")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","willReturn",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getToken",186],"(",["T_ARRAY","array",186],"(",["T_VARIABLE","$role",186],")",")",")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$this",187],["T_WHITESPACE","\n            ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","request",188],["T_WHITESPACE","\n            ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","expects",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","any",189],"(",")",")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","method",190],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","with",191],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",191],")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","willReturn",192],"(",["T_CONSTANT_ENCAPSED_STRING","'_exit'",192],")",";",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$this",193],["T_WHITESPACE","\n            ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","request",194],["T_WHITESPACE","\n            ",194],["T_OBJECT_OPERATOR","->",195],["T_STRING","query",195],["T_WHITESPACE","\n            ",195],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","any",196],"(",")",")",["T_WHITESPACE","\n            ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","method",197],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",197],")",["T_WHITESPACE","\n            ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","will",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","returnValue",198],"(",["T_ARRAY","array",198],"(",")",")",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$this",199],["T_WHITESPACE","\n            ",199],["T_OBJECT_OPERATOR","->",200],["T_STRING","request",200],["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","expects",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","any",201],"(",")",")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","method",202],"(",["T_CONSTANT_ENCAPSED_STRING","'getUri'",202],")",["T_WHITESPACE","\n            ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","willReturn",203],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",203],")",";",["T_WHITESPACE","\n\n        ",203],["T_VARIABLE","$dispatcher",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","getMockBuilder",205],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\EventDispatcher\\EventDispatcherInterface'",205],")",["T_OBJECT_OPERATOR","->",205],["T_STRING","getMock",205],"(",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$dispatcher",206],["T_WHITESPACE","\n            ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","expects",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","never",207],"(",")",")",["T_WHITESPACE","\n            ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","method",208],"(",["T_CONSTANT_ENCAPSED_STRING","'dispatch'",208],")",["T_WHITESPACE","\n        ",208],";",["T_WHITESPACE","\n\n        ",209],["T_VARIABLE","$listener",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_NEW","new",211],["T_WHITESPACE"," ",211],["T_STRING","SwitchUserListener",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","tokenStorage",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","userProvider",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","userChecker",211],",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'provider123'",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","accessDecisionManager",211],",",["T_WHITESPACE"," ",211],["T_STRING","null",211],",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",211],",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'ROLE_ALLOWED_TO_SWITCH'",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$dispatcher",211],")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$listener",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","handle",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","event",212],")",";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_DOC_COMMENT","\/**\n     * @expectedException \\Symfony\\Component\\Security\\Core\\Exception\\AccessDeniedException\n     *\/",215],["T_WHITESPACE","\n    ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","testSwitchUserIsDisallowed",218],"(",")",["T_WHITESPACE","\n    ",218],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$token",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getToken",220],"(",["T_ARRAY","array",220],"(",["T_NEW","new",220],["T_WHITESPACE"," ",220],["T_STRING","Role",220],"(",["T_CONSTANT_ENCAPSED_STRING","'the role'",220],")",")",")",";",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","tokenStorage",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","expects",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","any",222],"(",")",")",["T_OBJECT_OPERATOR","->",222],["T_STRING","method",222],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",222],")",["T_OBJECT_OPERATOR","->",222],["T_STRING","will",222],"(",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","returnValue",222],"(",["T_VARIABLE","$token",222],")",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","request",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","expects",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","any",223],"(",")",")",["T_OBJECT_OPERATOR","->",223],["T_STRING","method",223],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","with",223],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","will",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","returnValue",223],"(",["T_CONSTANT_ENCAPSED_STRING","'kuba'",223],")",")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","accessDecisionManager",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","expects",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","once",225],"(",")",")",["T_WHITESPACE","\n            ",225],["T_OBJECT_OPERATOR","->",226],["T_STRING","method",226],"(",["T_CONSTANT_ENCAPSED_STRING","'decide'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","with",226],"(",["T_VARIABLE","$token",226],",",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_CONSTANT_ENCAPSED_STRING","'ROLE_ALLOWED_TO_SWITCH'",226],")",")",["T_WHITESPACE","\n            ",226],["T_OBJECT_OPERATOR","->",227],["T_STRING","will",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","returnValue",227],"(",["T_STRING","false",227],")",")",";",["T_WHITESPACE","\n\n        ",227],["T_VARIABLE","$listener",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","SwitchUserListener",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","tokenStorage",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","userProvider",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","userChecker",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'provider123'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","accessDecisionManager",229],")",";",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$listener",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","handle",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","event",230],")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_PUBLIC","public",233],["T_WHITESPACE"," ",233],["T_FUNCTION","function",233],["T_WHITESPACE"," ",233],["T_STRING","testSwitchUser",233],"(",")",["T_WHITESPACE","\n    ",233],"{",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$token",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getToken",235],"(",["T_ARRAY","array",235],"(",["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_STRING","Role",235],"(",["T_CONSTANT_ENCAPSED_STRING","'the role'",235],")",")",")",";",["T_WHITESPACE","\n        ",235],["T_VARIABLE","$user",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getMockBuilder",236],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserInterface'",236],")",["T_OBJECT_OPERATOR","->",236],["T_STRING","getMock",236],"(",")",";",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$user",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","expects",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","any",237],"(",")",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","method",237],"(",["T_CONSTANT_ENCAPSED_STRING","'getRoles'",237],")",["T_OBJECT_OPERATOR","->",237],["T_STRING","will",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","returnValue",237],"(",["T_ARRAY","array",237],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",237],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","tokenStorage",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","expects",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","any",239],"(",")",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","method",239],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",239],")",["T_OBJECT_OPERATOR","->",239],["T_STRING","will",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","returnValue",239],"(",["T_VARIABLE","$token",239],")",")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","request",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","expects",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","any",240],"(",")",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","method",240],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","with",240],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","will",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","returnValue",240],"(",["T_CONSTANT_ENCAPSED_STRING","'kuba'",240],")",")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","request",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","query",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","expects",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","once",241],"(",")",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","method",241],"(",["T_CONSTANT_ENCAPSED_STRING","'remove'",241],",",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","request",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","query",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","expects",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","any",242],"(",")",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","method",242],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",242],")",["T_OBJECT_OPERATOR","->",242],["T_STRING","will",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","returnValue",242],"(",["T_ARRAY","array",242],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",242],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","request",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","expects",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","any",244],"(",")",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","method",244],"(",["T_CONSTANT_ENCAPSED_STRING","'getUri'",244],")",["T_OBJECT_OPERATOR","->",244],["T_STRING","will",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","returnValue",244],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",244],")",")",";",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","request",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","server",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","expects",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","once",245],"(",")",")",["T_OBJECT_OPERATOR","->",245],["T_STRING","method",245],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",245],")",["T_OBJECT_OPERATOR","->",245],["T_STRING","with",245],"(",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","''",245],")",";",["T_WHITESPACE","\n\n        ",245],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","accessDecisionManager",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","expects",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","once",247],"(",")",")",["T_WHITESPACE","\n            ",247],["T_OBJECT_OPERATOR","->",248],["T_STRING","method",248],"(",["T_CONSTANT_ENCAPSED_STRING","'decide'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","with",248],"(",["T_VARIABLE","$token",248],",",["T_WHITESPACE"," ",248],["T_ARRAY","array",248],"(",["T_CONSTANT_ENCAPSED_STRING","'ROLE_ALLOWED_TO_SWITCH'",248],")",")",["T_WHITESPACE","\n            ",248],["T_OBJECT_OPERATOR","->",249],["T_STRING","will",249],"(",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","returnValue",249],"(",["T_STRING","true",249],")",")",";",["T_WHITESPACE","\n\n        ",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","userProvider",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","expects",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","once",251],"(",")",")",["T_WHITESPACE","\n            ",251],["T_OBJECT_OPERATOR","->",252],["T_STRING","method",252],"(",["T_CONSTANT_ENCAPSED_STRING","'loadUserByUsername'",252],")",["T_OBJECT_OPERATOR","->",252],["T_STRING","with",252],"(",["T_CONSTANT_ENCAPSED_STRING","'kuba'",252],")",["T_WHITESPACE","\n            ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","will",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","returnValue",253],"(",["T_VARIABLE","$user",253],")",")",";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","userChecker",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","expects",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","once",254],"(",")",")",["T_WHITESPACE","\n            ",254],["T_OBJECT_OPERATOR","->",255],["T_STRING","method",255],"(",["T_CONSTANT_ENCAPSED_STRING","'checkPostAuth'",255],")",["T_OBJECT_OPERATOR","->",255],["T_STRING","with",255],"(",["T_VARIABLE","$user",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","tokenStorage",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","expects",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","once",256],"(",")",")",["T_WHITESPACE","\n            ",256],["T_OBJECT_OPERATOR","->",257],["T_STRING","method",257],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",257],")",["T_OBJECT_OPERATOR","->",257],["T_STRING","with",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","isInstanceOf",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\UsernamePasswordToken'",257],")",")",";",["T_WHITESPACE","\n\n        ",257],["T_VARIABLE","$listener",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_STRING","SwitchUserListener",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","tokenStorage",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","userProvider",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","userChecker",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'provider123'",259],",",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","accessDecisionManager",259],")",";",["T_WHITESPACE","\n        ",259],["T_VARIABLE","$listener",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","handle",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","event",260],")",";",["T_WHITESPACE","\n    ",260],"}",["T_WHITESPACE","\n\n    ",261],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","testSwitchUserKeepsOtherQueryStringParameters",263],"(",")",["T_WHITESPACE","\n    ",263],"{",["T_WHITESPACE","\n        ",264],["T_VARIABLE","$token",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","getToken",265],"(",["T_ARRAY","array",265],"(",["T_NEW","new",265],["T_WHITESPACE"," ",265],["T_STRING","Role",265],"(",["T_CONSTANT_ENCAPSED_STRING","'the role'",265],")",")",")",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$user",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getMockBuilder",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\User\\UserInterface'",266],")",["T_OBJECT_OPERATOR","->",266],["T_STRING","getMock",266],"(",")",";",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$user",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","expects",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","any",267],"(",")",")",["T_OBJECT_OPERATOR","->",267],["T_STRING","method",267],"(",["T_CONSTANT_ENCAPSED_STRING","'getRoles'",267],")",["T_OBJECT_OPERATOR","->",267],["T_STRING","will",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","returnValue",267],"(",["T_ARRAY","array",267],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",267],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","tokenStorage",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","expects",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","any",269],"(",")",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","method",269],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",269],")",["T_OBJECT_OPERATOR","->",269],["T_STRING","will",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","returnValue",269],"(",["T_VARIABLE","$token",269],")",")",";",["T_WHITESPACE","\n        ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","request",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","expects",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","any",270],"(",")",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","method",270],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",270],")",["T_OBJECT_OPERATOR","->",270],["T_STRING","with",270],"(",["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",270],")",["T_OBJECT_OPERATOR","->",270],["T_STRING","will",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","returnValue",270],"(",["T_CONSTANT_ENCAPSED_STRING","'kuba'",270],")",")",";",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","request",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","query",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","expects",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","once",271],"(",")",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","method",271],"(",["T_CONSTANT_ENCAPSED_STRING","'remove'",271],",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'_switch_user'",271],")",";",["T_WHITESPACE","\n        ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","request",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","query",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","expects",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","any",272],"(",")",")",["T_OBJECT_OPERATOR","->",272],["T_STRING","method",272],"(",["T_CONSTANT_ENCAPSED_STRING","'all'",272],")",["T_OBJECT_OPERATOR","->",272],["T_STRING","will",272],"(",["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","returnValue",272],"(",["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'page'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_LNUMBER","3",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'section'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_LNUMBER","2",272],")",")",")",";",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","request",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","expects",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","any",273],"(",")",")",["T_OBJECT_OPERATOR","->",273],["T_STRING","method",273],"(",["T_CONSTANT_ENCAPSED_STRING","'getUri'",273],")",["T_OBJECT_OPERATOR","->",273],["T_STRING","will",273],"(",["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","returnValue",273],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",273],")",")",";",["T_WHITESPACE","\n        ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","request",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","server",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","expects",274],"(",["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","once",274],"(",")",")",["T_OBJECT_OPERATOR","->",274],["T_STRING","method",274],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",274],")",["T_OBJECT_OPERATOR","->",274],["T_STRING","with",274],"(",["T_CONSTANT_ENCAPSED_STRING","'QUERY_STRING'",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'page=3&section=2'",274],")",";",["T_WHITESPACE","\n\n        ",274],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","accessDecisionManager",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","expects",276],"(",["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","once",276],"(",")",")",["T_WHITESPACE","\n            ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","method",277],"(",["T_CONSTANT_ENCAPSED_STRING","'decide'",277],")",["T_OBJECT_OPERATOR","->",277],["T_STRING","with",277],"(",["T_VARIABLE","$token",277],",",["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",["T_CONSTANT_ENCAPSED_STRING","'ROLE_ALLOWED_TO_SWITCH'",277],")",")",["T_WHITESPACE","\n            ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","will",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","returnValue",278],"(",["T_STRING","true",278],")",")",";",["T_WHITESPACE","\n\n        ",278],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","userProvider",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","expects",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","once",280],"(",")",")",["T_WHITESPACE","\n            ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","method",281],"(",["T_CONSTANT_ENCAPSED_STRING","'loadUserByUsername'",281],")",["T_OBJECT_OPERATOR","->",281],["T_STRING","with",281],"(",["T_CONSTANT_ENCAPSED_STRING","'kuba'",281],")",["T_WHITESPACE","\n            ",281],["T_OBJECT_OPERATOR","->",282],["T_STRING","will",282],"(",["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","returnValue",282],"(",["T_VARIABLE","$user",282],")",")",";",["T_WHITESPACE","\n        ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","userChecker",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","expects",283],"(",["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","once",283],"(",")",")",["T_WHITESPACE","\n            ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","method",284],"(",["T_CONSTANT_ENCAPSED_STRING","'checkPostAuth'",284],")",["T_OBJECT_OPERATOR","->",284],["T_STRING","with",284],"(",["T_VARIABLE","$user",284],")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","tokenStorage",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","expects",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","once",285],"(",")",")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","method",286],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",286],")",["T_OBJECT_OPERATOR","->",286],["T_STRING","with",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","isInstanceOf",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\UsernamePasswordToken'",286],")",")",";",["T_WHITESPACE","\n\n        ",286],["T_VARIABLE","$listener",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_NEW","new",288],["T_WHITESPACE"," ",288],["T_STRING","SwitchUserListener",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","tokenStorage",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","userProvider",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","userChecker",288],",",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'provider123'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","accessDecisionManager",288],")",";",["T_WHITESPACE","\n        ",288],["T_VARIABLE","$listener",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","handle",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","event",289],")",";",["T_WHITESPACE","\n    ",289],"}",["T_WHITESPACE","\n\n    ",290],["T_PRIVATE","private",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","getEvent",292],"(",["T_VARIABLE","$request",292],")",["T_WHITESPACE","\n    ",292],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$event",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getMockBuilder",294],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent'",294],")",["T_WHITESPACE","\n            ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","disableOriginalConstructor",295],"(",")",["T_WHITESPACE","\n            ",295],["T_OBJECT_OPERATOR","->",296],["T_STRING","getMock",296],"(",")",";",["T_WHITESPACE","\n\n        ",296],["T_VARIABLE","$event",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","expects",298],"(",["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","any",298],"(",")",")",["T_WHITESPACE","\n            ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","method",299],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",299],")",["T_WHITESPACE","\n            ",299],["T_OBJECT_OPERATOR","->",300],["T_STRING","will",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","returnValue",300],"(",["T_VARIABLE","$request",300],")",")",";",["T_WHITESPACE","\n\n        ",300],["T_RETURN","return",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$event",302],";",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_PRIVATE","private",305],["T_WHITESPACE"," ",305],["T_FUNCTION","function",305],["T_WHITESPACE"," ",305],["T_STRING","getToken",305],"(",["T_ARRAY","array",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$roles",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",")",")",["T_WHITESPACE","\n    ",305],"{",["T_WHITESPACE","\n        ",306],["T_VARIABLE","$token",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getMockBuilder",307],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\TokenInterface'",307],")",["T_OBJECT_OPERATOR","->",307],["T_STRING","getMock",307],"(",")",";",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$token",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","expects",308],"(",["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","any",308],"(",")",")",["T_WHITESPACE","\n            ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","method",309],"(",["T_CONSTANT_ENCAPSED_STRING","'getRoles'",309],")",["T_WHITESPACE","\n            ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","will",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","returnValue",310],"(",["T_VARIABLE","$roles",310],")",")",";",["T_WHITESPACE","\n\n        ",310],["T_RETURN","return",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$token",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n",313],"}",["T_WHITESPACE","\n",314]]
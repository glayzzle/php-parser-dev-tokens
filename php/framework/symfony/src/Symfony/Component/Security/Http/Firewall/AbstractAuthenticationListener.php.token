[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Firewall",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Security",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Http",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SessionAuthenticationStrategyInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Security",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Http",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Authentication",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AuthenticationFailureHandlerInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Http",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Authentication",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AuthenticationSuccessHandlerInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Security",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Http",17],["T_NS_SEPARATOR","\\",17],["T_STRING","RememberMe",17],["T_NS_SEPARATOR","\\",17],["T_STRING","RememberMeServicesInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Core",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Security",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Security",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Core",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Authentication",19],["T_NS_SEPARATOR","\\",19],["T_STRING","AuthenticationManagerInterface",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Security",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Core",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Authentication",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Token",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Storage",20],["T_NS_SEPARATOR","\\",20],["T_STRING","TokenStorageInterface",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Symfony",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Component",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Security",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Core",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Authentication",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Token",21],["T_NS_SEPARATOR","\\",21],["T_STRING","UsernamePasswordToken",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Symfony",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Component",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Security",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Core",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Exception",22],["T_NS_SEPARATOR","\\",22],["T_STRING","AuthenticationException",22],";",["T_WHITESPACE","\n",22],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Symfony",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Component",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Security",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Core",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Exception",23],["T_NS_SEPARATOR","\\",23],["T_STRING","SessionUnavailableException",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Psr",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Log",24],["T_NS_SEPARATOR","\\",24],["T_STRING","LoggerInterface",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Symfony",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Component",25],["T_NS_SEPARATOR","\\",25],["T_STRING","HttpKernel",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Event",25],["T_NS_SEPARATOR","\\",25],["T_STRING","GetResponseEvent",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Symfony",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Component",26],["T_NS_SEPARATOR","\\",26],["T_STRING","HttpFoundation",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Request",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","Symfony",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Component",27],["T_NS_SEPARATOR","\\",27],["T_STRING","HttpFoundation",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Response",27],";",["T_WHITESPACE","\n",27],["T_USE","use",28],["T_WHITESPACE"," ",28],["T_STRING","Symfony",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Component",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Security",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Core",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Authentication",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Token",28],["T_NS_SEPARATOR","\\",28],["T_STRING","TokenInterface",28],";",["T_WHITESPACE","\n",28],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Symfony",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Component",29],["T_NS_SEPARATOR","\\",29],["T_STRING","EventDispatcher",29],["T_NS_SEPARATOR","\\",29],["T_STRING","EventDispatcherInterface",29],";",["T_WHITESPACE","\n",29],["T_USE","use",30],["T_WHITESPACE"," ",30],["T_STRING","Symfony",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Component",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Security",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Http",30],["T_NS_SEPARATOR","\\",30],["T_STRING","Event",30],["T_NS_SEPARATOR","\\",30],["T_STRING","InteractiveLoginEvent",30],";",["T_WHITESPACE","\n",30],["T_USE","use",31],["T_WHITESPACE"," ",31],["T_STRING","Symfony",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Component",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Security",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Http",31],["T_NS_SEPARATOR","\\",31],["T_STRING","SecurityEvents",31],";",["T_WHITESPACE","\n",31],["T_USE","use",32],["T_WHITESPACE"," ",32],["T_STRING","Symfony",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Component",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Security",32],["T_NS_SEPARATOR","\\",32],["T_STRING","Http",32],["T_NS_SEPARATOR","\\",32],["T_STRING","HttpUtils",32],";",["T_WHITESPACE","\n\n",32],["T_DOC_COMMENT","\/**\n * The AbstractAuthenticationListener is the preferred base class for all\n * browser-\/HTTP-based authentication requests.\n *\n * Subclasses likely have to implement the following:\n * - an TokenInterface to hold authentication related data\n * - an AuthenticationProvider to perform the actual authentication of the\n *   token, retrieve the UserInterface implementation from a database, and\n *   perform the specific account checks using the UserChecker\n *\n * By default, this listener only is active for a specific path, e.g.\n * \/login_check. If you want to change this behavior, you can overwrite the\n * requiresAuthentication() method.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n * @author Johannes M. Schmitt <schmittjoh@gmail.com>\n *\/",34],["T_WHITESPACE","\n",50],["T_ABSTRACT","abstract",51],["T_WHITESPACE"," ",51],["T_CLASS","class",51],["T_WHITESPACE"," ",51],["T_STRING","AbstractAuthenticationListener",51],["T_WHITESPACE"," ",51],["T_IMPLEMENTS","implements",51],["T_WHITESPACE"," ",51],["T_STRING","ListenerInterface",51],["T_WHITESPACE","\n",51],"{",["T_WHITESPACE","\n    ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$options",53],";",["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$logger",54],";",["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$authenticationManager",55],";",["T_WHITESPACE","\n    ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$providerKey",56],";",["T_WHITESPACE","\n    ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$httpUtils",57],";",["T_WHITESPACE","\n\n    ",57],["T_PRIVATE","private",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$tokenStorage",59],";",["T_WHITESPACE","\n    ",59],["T_PRIVATE","private",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$sessionStrategy",60],";",["T_WHITESPACE","\n    ",60],["T_PRIVATE","private",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$dispatcher",61],";",["T_WHITESPACE","\n    ",61],["T_PRIVATE","private",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$successHandler",62],";",["T_WHITESPACE","\n    ",62],["T_PRIVATE","private",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$failureHandler",63],";",["T_WHITESPACE","\n    ",63],["T_PRIVATE","private",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$rememberMeServices",64],";",["T_WHITESPACE","\n\n    ",64],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param TokenStorageInterface                  $tokenStorage          A TokenStorageInterface instance\n     * @param AuthenticationManagerInterface         $authenticationManager An AuthenticationManagerInterface instance\n     * @param SessionAuthenticationStrategyInterface $sessionStrategy\n     * @param HttpUtils                              $httpUtils             An HttpUtilsInterface instance\n     * @param string                                 $providerKey\n     * @param AuthenticationSuccessHandlerInterface  $successHandler\n     * @param AuthenticationFailureHandlerInterface  $failureHandler\n     * @param array                                  $options               An array of options for the processing of a\n     *                                                                      successful, or failed authentication attempt\n     * @param LoggerInterface                        $logger                A LoggerInterface instance\n     * @param EventDispatcherInterface               $dispatcher            An EventDispatcherInterface instance\n     *\n     * @throws \\InvalidArgumentException\n     *\/",66],["T_WHITESPACE","\n    ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","__construct",83],"(",["T_STRING","TokenStorageInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$tokenStorage",83],",",["T_WHITESPACE"," ",83],["T_STRING","AuthenticationManagerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$authenticationManager",83],",",["T_WHITESPACE"," ",83],["T_STRING","SessionAuthenticationStrategyInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$sessionStrategy",83],",",["T_WHITESPACE"," ",83],["T_STRING","HttpUtils",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$httpUtils",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$providerKey",83],",",["T_WHITESPACE"," ",83],["T_STRING","AuthenticationSuccessHandlerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$successHandler",83],",",["T_WHITESPACE"," ",83],["T_STRING","AuthenticationFailureHandlerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$failureHandler",83],",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$options",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",")",",",["T_WHITESPACE"," ",83],["T_STRING","LoggerInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$logger",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],",",["T_WHITESPACE"," ",83],["T_STRING","EventDispatcherInterface",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$dispatcher",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","null",83],")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_EMPTY","empty",85],"(",["T_VARIABLE","$providerKey",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n            ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","InvalidArgumentException",86],"(",["T_CONSTANT_ENCAPSED_STRING","'$providerKey must not be empty.'",86],")",";",["T_WHITESPACE","\n        ",86],"}",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","tokenStorage",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$tokenStorage",89],";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","authenticationManager",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$authenticationManager",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","sessionStrategy",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$sessionStrategy",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","providerKey",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$providerKey",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","successHandler",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$successHandler",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","failureHandler",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$failureHandler",94],";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","options",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","array_merge",95],"(",["T_ARRAY","array",95],"(",["T_WHITESPACE","\n            ",95],["T_CONSTANT_ENCAPSED_STRING","'check_path'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/login_check'",96],",",["T_WHITESPACE","\n            ",96],["T_CONSTANT_ENCAPSED_STRING","'login_path'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'\/login'",97],",",["T_WHITESPACE","\n            ",97],["T_CONSTANT_ENCAPSED_STRING","'always_use_default_target_path'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_STRING","false",98],",",["T_WHITESPACE","\n            ",98],["T_CONSTANT_ENCAPSED_STRING","'default_target_path'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'\/'",99],",",["T_WHITESPACE","\n            ",99],["T_CONSTANT_ENCAPSED_STRING","'target_path_parameter'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'_target_path'",100],",",["T_WHITESPACE","\n            ",100],["T_CONSTANT_ENCAPSED_STRING","'use_referer'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_STRING","false",101],",",["T_WHITESPACE","\n            ",101],["T_CONSTANT_ENCAPSED_STRING","'failure_path'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_STRING","null",102],",",["T_WHITESPACE","\n            ",102],["T_CONSTANT_ENCAPSED_STRING","'failure_forward'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_STRING","false",103],",",["T_WHITESPACE","\n            ",103],["T_CONSTANT_ENCAPSED_STRING","'require_previous_session'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_STRING","true",104],",",["T_WHITESPACE","\n        ",104],")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$options",105],")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","logger",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$logger",106],";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","dispatcher",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$dispatcher",107],";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","httpUtils",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$httpUtils",108],";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_DOC_COMMENT","\/**\n     * Sets the RememberMeServices implementation to use.\n     *\n     * @param RememberMeServicesInterface $rememberMeServices\n     *\/",111],["T_WHITESPACE","\n    ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","setRememberMeServices",116],"(",["T_STRING","RememberMeServicesInterface",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$rememberMeServices",116],")",["T_WHITESPACE","\n    ",116],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","rememberMeServices",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$rememberMeServices",118],";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_DOC_COMMENT","\/**\n     * Handles form based authentication.\n     *\n     * @param GetResponseEvent $event A GetResponseEvent instance\n     *\n     * @throws \\RuntimeException\n     * @throws SessionUnavailableException\n     *\/",121],["T_WHITESPACE","\n    ",128],["T_FINAL","final",129],["T_WHITESPACE"," ",129],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","handle",129],"(",["T_STRING","GetResponseEvent",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$event",129],")",["T_WHITESPACE","\n    ",129],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$request",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$event",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getRequest",131],"(",")",";",["T_WHITESPACE","\n\n        ",131],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","requiresAuthentication",133],"(",["T_VARIABLE","$request",133],")",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n            ",133],["T_RETURN","return",134],";",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n\n        ",135],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_VARIABLE","$request",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","hasSession",137],"(",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n            ",137],["T_THROW","throw",138],["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_NS_SEPARATOR","\\",138],["T_STRING","RuntimeException",138],"(",["T_CONSTANT_ENCAPSED_STRING","'This authentication method requires a session.'",138],")",";",["T_WHITESPACE","\n        ",138],"}",["T_WHITESPACE","\n\n        ",139],["T_TRY","try",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'require_previous_session'",142],"]",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],"!",["T_VARIABLE","$request",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","hasPreviousSession",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n                ",142],["T_THROW","throw",143],["T_WHITESPACE"," ",143],["T_NEW","new",143],["T_WHITESPACE"," ",143],["T_STRING","SessionUnavailableException",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Your session has timed out, or you have disabled cookies.'",143],")",";",["T_WHITESPACE","\n            ",143],"}",["T_WHITESPACE","\n\n            ",144],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_STRING","null",146],["T_WHITESPACE"," ",146],["T_IS_IDENTICAL","===",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$returnValue",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","attemptAuthentication",146],"(",["T_VARIABLE","$request",146],")",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n                ",146],["T_RETURN","return",147],";",["T_WHITESPACE","\n            ",147],"}",["T_WHITESPACE","\n\n            ",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$returnValue",150],["T_WHITESPACE"," ",150],["T_INSTANCEOF","instanceof",150],["T_WHITESPACE"," ",150],["T_STRING","TokenInterface",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n                ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","sessionStrategy",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","onAuthentication",151],"(",["T_VARIABLE","$request",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$returnValue",151],")",";",["T_WHITESPACE","\n\n                ",151],["T_VARIABLE","$response",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","onSuccess",153],"(",["T_VARIABLE","$request",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$returnValue",153],")",";",["T_WHITESPACE","\n            ",153],"}",["T_WHITESPACE"," ",154],["T_ELSEIF","elseif",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$returnValue",154],["T_WHITESPACE"," ",154],["T_INSTANCEOF","instanceof",154],["T_WHITESPACE"," ",154],["T_STRING","Response",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n                ",154],["T_VARIABLE","$response",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$returnValue",155],";",["T_WHITESPACE","\n            ",155],"}",["T_WHITESPACE"," ",156],["T_ELSE","else",156],["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n                ",156],["T_THROW","throw",157],["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_NS_SEPARATOR","\\",157],["T_STRING","RuntimeException",157],"(",["T_CONSTANT_ENCAPSED_STRING","'attemptAuthentication() must either return a Response, an implementation of TokenInterface, or null.'",157],")",";",["T_WHITESPACE","\n            ",157],"}",["T_WHITESPACE","\n        ",158],"}",["T_WHITESPACE"," ",159],["T_CATCH","catch",159],["T_WHITESPACE"," ",159],"(",["T_STRING","AuthenticationException",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$e",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n            ",159],["T_VARIABLE","$response",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","onFailure",160],"(",["T_VARIABLE","$request",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$e",160],")",";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n\n        ",161],["T_VARIABLE","$event",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","setResponse",163],"(",["T_VARIABLE","$response",163],")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_DOC_COMMENT","\/**\n     * Whether this request requires authentication.\n     *\n     * The default implementation only processes requests to a specific path,\n     * but a subclass could change this to only authenticate requests where a\n     * certain parameters is present.\n     *\n     * @param Request $request\n     *\n     * @return bool\n     *\/",166],["T_WHITESPACE","\n    ",176],["T_PROTECTED","protected",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","requiresAuthentication",177],"(",["T_STRING","Request",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$request",177],")",["T_WHITESPACE","\n    ",177],"{",["T_WHITESPACE","\n        ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","httpUtils",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","checkRequestPath",179],"(",["T_VARIABLE","$request",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","options",179],"[",["T_CONSTANT_ENCAPSED_STRING","'check_path'",179],"]",")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_DOC_COMMENT","\/**\n     * Performs authentication.\n     *\n     * @param Request $request A Request instance\n     *\n     * @return TokenInterface|Response|null The authenticated token, null if full authentication is not possible, or a Response\n     *\n     * @throws AuthenticationException if the authentication fails\n     *\/",182],["T_WHITESPACE","\n    ",190],["T_ABSTRACT","abstract",191],["T_WHITESPACE"," ",191],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","attemptAuthentication",191],"(",["T_STRING","Request",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$request",191],")",";",["T_WHITESPACE","\n\n    ",191],["T_PRIVATE","private",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","onFailure",193],"(",["T_STRING","Request",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$request",193],",",["T_WHITESPACE"," ",193],["T_STRING","AuthenticationException",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$failed",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(",["T_STRING","null",195],["T_WHITESPACE"," ",195],["T_IS_NOT_IDENTICAL","!==",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","logger",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n            ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","logger",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","info",196],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication request failed.'",196],",",["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",["T_CONSTANT_ENCAPSED_STRING","'exception'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$failed",196],")",")",";",["T_WHITESPACE","\n        ",196],"}",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$token",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","tokenStorage",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getToken",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$token",200],["T_WHITESPACE"," ",200],["T_INSTANCEOF","instanceof",200],["T_WHITESPACE"," ",200],["T_STRING","UsernamePasswordToken",200],["T_WHITESPACE"," ",200],["T_BOOLEAN_AND","&&",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","providerKey",200],["T_WHITESPACE"," ",200],["T_IS_IDENTICAL","===",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$token",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getProviderKey",200],"(",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","tokenStorage",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setToken",201],"(",["T_STRING","null",201],")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n\n        ",202],["T_VARIABLE","$response",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","failureHandler",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","onAuthenticationFailure",204],"(",["T_VARIABLE","$request",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$failed",204],")",";",["T_WHITESPACE","\n\n        ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(","!",["T_VARIABLE","$response",206],["T_WHITESPACE"," ",206],["T_INSTANCEOF","instanceof",206],["T_WHITESPACE"," ",206],["T_STRING","Response",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n            ",206],["T_THROW","throw",207],["T_WHITESPACE"," ",207],["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_NS_SEPARATOR","\\",207],["T_STRING","RuntimeException",207],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication Failure Handler did not return a Response.'",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_RETURN","return",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$response",210],";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_PRIVATE","private",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","onSuccess",213],"(",["T_STRING","Request",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$request",213],",",["T_WHITESPACE"," ",213],["T_STRING","TokenInterface",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$token",213],")",["T_WHITESPACE","\n    ",213],"{",["T_WHITESPACE","\n        ",214],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_STRING","null",215],["T_WHITESPACE"," ",215],["T_IS_NOT_IDENTICAL","!==",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","logger",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n            ",215],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","logger",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","info",216],"(",["T_CONSTANT_ENCAPSED_STRING","'User has been authenticated successfully.'",216],",",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_CONSTANT_ENCAPSED_STRING","'username'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$token",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getUsername",216],"(",")",")",")",";",["T_WHITESPACE","\n        ",216],"}",["T_WHITESPACE","\n\n        ",217],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","tokenStorage",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","setToken",219],"(",["T_VARIABLE","$token",219],")",";",["T_WHITESPACE","\n\n        ",219],["T_VARIABLE","$session",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$request",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getSession",221],"(",")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$session",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","remove",222],"(",["T_STRING","Security",222],["T_DOUBLE_COLON","::",222],["T_STRING","AUTHENTICATION_ERROR",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$session",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","remove",223],"(",["T_STRING","Security",223],["T_DOUBLE_COLON","::",223],["T_STRING","LAST_USERNAME",223],")",";",["T_WHITESPACE","\n\n        ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_STRING","null",225],["T_WHITESPACE"," ",225],["T_IS_NOT_IDENTICAL","!==",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","dispatcher",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n            ",225],["T_VARIABLE","$loginEvent",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_NEW","new",226],["T_WHITESPACE"," ",226],["T_STRING","InteractiveLoginEvent",226],"(",["T_VARIABLE","$request",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$token",226],")",";",["T_WHITESPACE","\n            ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","dispatcher",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","dispatch",227],"(",["T_STRING","SecurityEvents",227],["T_DOUBLE_COLON","::",227],["T_STRING","INTERACTIVE_LOGIN",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$loginEvent",227],")",";",["T_WHITESPACE","\n        ",227],"}",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$response",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","successHandler",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","onAuthenticationSuccess",230],"(",["T_VARIABLE","$request",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$token",230],")",";",["T_WHITESPACE","\n\n        ",230],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_VARIABLE","$response",232],["T_WHITESPACE"," ",232],["T_INSTANCEOF","instanceof",232],["T_WHITESPACE"," ",232],["T_STRING","Response",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n            ",232],["T_THROW","throw",233],["T_WHITESPACE"," ",233],["T_NEW","new",233],["T_WHITESPACE"," ",233],["T_NS_SEPARATOR","\\",233],["T_STRING","RuntimeException",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Authentication Success Handler did not return a Response.'",233],")",";",["T_WHITESPACE","\n        ",233],"}",["T_WHITESPACE","\n\n        ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_STRING","null",236],["T_WHITESPACE"," ",236],["T_IS_NOT_IDENTICAL","!==",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","rememberMeServices",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n            ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","rememberMeServices",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","loginSuccess",237],"(",["T_VARIABLE","$request",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$response",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$token",237],")",";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE","\n\n        ",238],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$response",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n",241],"}",["T_WHITESPACE","\n",242]]
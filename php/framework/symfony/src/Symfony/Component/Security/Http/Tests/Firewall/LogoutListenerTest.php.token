[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Security",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Http",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Firewall",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Response",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Security",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Http",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Firewall",16],["T_NS_SEPARATOR","\\",16],["T_STRING","LogoutListener",16],";",["T_WHITESPACE","\n\n",16],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","LogoutListenerTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","testHandleUnmatchedPath",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_LIST","list",22],"(",["T_VARIABLE","$listener",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$tokenStorage",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$httpUtils",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$options",22],")",["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","getListener",22],"(",")",";",["T_WHITESPACE","\n\n        ",22],["T_LIST","list",24],"(",["T_VARIABLE","$event",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$request",24],")",["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getGetResponseEvent",24],"(",")",";",["T_WHITESPACE","\n\n        ",24],["T_VARIABLE","$event",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","expects",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","never",26],"(",")",")",["T_WHITESPACE","\n            ",26],["T_OBJECT_OPERATOR","->",27],["T_STRING","method",27],"(",["T_CONSTANT_ENCAPSED_STRING","'setResponse'",27],")",";",["T_WHITESPACE","\n\n        ",27],["T_VARIABLE","$httpUtils",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","expects",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","once",29],"(",")",")",["T_WHITESPACE","\n            ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","method",30],"(",["T_CONSTANT_ENCAPSED_STRING","'checkRequestPath'",30],")",["T_WHITESPACE","\n            ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","with",31],"(",["T_VARIABLE","$request",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$options",31],"[",["T_CONSTANT_ENCAPSED_STRING","'logout_path'",31],"]",")",["T_WHITESPACE","\n            ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","will",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","returnValue",32],"(",["T_STRING","false",32],")",")",";",["T_WHITESPACE","\n\n        ",32],["T_VARIABLE","$listener",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","handle",34],"(",["T_VARIABLE","$event",34],")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","testHandleMatchedPathWithSuccessHandlerAndCsrfValidation",37],"(",")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$successHandler",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getSuccessHandler",39],"(",")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$tokenManager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","getTokenManager",40],"(",")",";",["T_WHITESPACE","\n\n        ",40],["T_LIST","list",42],"(",["T_VARIABLE","$listener",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$tokenStorage",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$httpUtils",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$options",42],")",["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getListener",42],"(",["T_VARIABLE","$successHandler",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$tokenManager",42],")",";",["T_WHITESPACE","\n\n        ",42],["T_LIST","list",44],"(",["T_VARIABLE","$event",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$request",44],")",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getGetResponseEvent",44],"(",")",";",["T_WHITESPACE","\n\n        ",44],["T_VARIABLE","$request",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","query",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","set",46],"(",["T_CONSTANT_ENCAPSED_STRING","'_csrf_token'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'token'",46],")",";",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$httpUtils",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","expects",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","once",48],"(",")",")",["T_WHITESPACE","\n            ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","method",49],"(",["T_CONSTANT_ENCAPSED_STRING","'checkRequestPath'",49],")",["T_WHITESPACE","\n            ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","with",50],"(",["T_VARIABLE","$request",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$options",50],"[",["T_CONSTANT_ENCAPSED_STRING","'logout_path'",50],"]",")",["T_WHITESPACE","\n            ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","will",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","returnValue",51],"(",["T_STRING","true",51],")",")",";",["T_WHITESPACE","\n\n        ",51],["T_VARIABLE","$tokenManager",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","expects",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","once",53],"(",")",")",["T_WHITESPACE","\n            ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","method",54],"(",["T_CONSTANT_ENCAPSED_STRING","'isTokenValid'",54],")",["T_WHITESPACE","\n            ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","will",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","returnValue",55],"(",["T_STRING","true",55],")",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$successHandler",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","expects",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","once",57],"(",")",")",["T_WHITESPACE","\n            ",57],["T_OBJECT_OPERATOR","->",58],["T_STRING","method",58],"(",["T_CONSTANT_ENCAPSED_STRING","'onLogoutSuccess'",58],")",["T_WHITESPACE","\n            ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","with",59],"(",["T_VARIABLE","$request",59],")",["T_WHITESPACE","\n            ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","will",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","returnValue",60],"(",["T_VARIABLE","$response",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_NEW","new",60],["T_WHITESPACE"," ",60],["T_STRING","Response",60],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$tokenStorage",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","expects",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","once",62],"(",")",")",["T_WHITESPACE","\n            ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","method",63],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",63],")",["T_WHITESPACE","\n            ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","will",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","returnValue",64],"(",["T_VARIABLE","$token",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getToken",64],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$handler",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getHandler",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$handler",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","expects",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","once",67],"(",")",")",["T_WHITESPACE","\n            ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","method",68],"(",["T_CONSTANT_ENCAPSED_STRING","'logout'",68],")",["T_WHITESPACE","\n            ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","with",69],"(",["T_VARIABLE","$request",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$response",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$token",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$tokenStorage",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","expects",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","once",71],"(",")",")",["T_WHITESPACE","\n            ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","method",72],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",72],")",["T_WHITESPACE","\n            ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","with",73],"(",["T_STRING","null",73],")",";",["T_WHITESPACE","\n\n        ",73],["T_VARIABLE","$event",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","expects",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","once",75],"(",")",")",["T_WHITESPACE","\n            ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","method",76],"(",["T_CONSTANT_ENCAPSED_STRING","'setResponse'",76],")",["T_WHITESPACE","\n            ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","with",77],"(",["T_VARIABLE","$response",77],")",";",["T_WHITESPACE","\n\n        ",77],["T_VARIABLE","$listener",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","addHandler",79],"(",["T_VARIABLE","$handler",79],")",";",["T_WHITESPACE","\n\n        ",79],["T_VARIABLE","$listener",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","handle",81],"(",["T_VARIABLE","$event",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testHandleMatchedPathWithoutSuccessHandlerAndCsrfValidation",84],"(",")",["T_WHITESPACE","\n    ",84],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$successHandler",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getSuccessHandler",86],"(",")",";",["T_WHITESPACE","\n\n        ",86],["T_LIST","list",88],"(",["T_VARIABLE","$listener",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$tokenStorage",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$httpUtils",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$options",88],")",["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getListener",88],"(",["T_VARIABLE","$successHandler",88],")",";",["T_WHITESPACE","\n\n        ",88],["T_LIST","list",90],"(",["T_VARIABLE","$event",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$request",90],")",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getGetResponseEvent",90],"(",")",";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$httpUtils",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","expects",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","once",92],"(",")",")",["T_WHITESPACE","\n            ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","method",93],"(",["T_CONSTANT_ENCAPSED_STRING","'checkRequestPath'",93],")",["T_WHITESPACE","\n            ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","with",94],"(",["T_VARIABLE","$request",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'logout_path'",94],"]",")",["T_WHITESPACE","\n            ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","will",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","returnValue",95],"(",["T_STRING","true",95],")",")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$successHandler",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","once",97],"(",")",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","method",98],"(",["T_CONSTANT_ENCAPSED_STRING","'onLogoutSuccess'",98],")",["T_WHITESPACE","\n            ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","with",99],"(",["T_VARIABLE","$request",99],")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","will",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","returnValue",100],"(",["T_VARIABLE","$response",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","Response",100],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$tokenStorage",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","expects",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","once",102],"(",")",")",["T_WHITESPACE","\n            ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","method",103],"(",["T_CONSTANT_ENCAPSED_STRING","'getToken'",103],")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","will",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","returnValue",104],"(",["T_VARIABLE","$token",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getToken",104],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",104],["T_VARIABLE","$handler",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getHandler",106],"(",")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$handler",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","expects",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","once",107],"(",")",")",["T_WHITESPACE","\n            ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","method",108],"(",["T_CONSTANT_ENCAPSED_STRING","'logout'",108],")",["T_WHITESPACE","\n            ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","with",109],"(",["T_VARIABLE","$request",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$response",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$token",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_VARIABLE","$tokenStorage",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","expects",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","once",111],"(",")",")",["T_WHITESPACE","\n            ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","method",112],"(",["T_CONSTANT_ENCAPSED_STRING","'setToken'",112],")",["T_WHITESPACE","\n            ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","with",113],"(",["T_STRING","null",113],")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$event",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","expects",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","once",115],"(",")",")",["T_WHITESPACE","\n            ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","method",116],"(",["T_CONSTANT_ENCAPSED_STRING","'setResponse'",116],")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","with",117],"(",["T_VARIABLE","$response",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$listener",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","addHandler",119],"(",["T_VARIABLE","$handler",119],")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$listener",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","handle",121],"(",["T_VARIABLE","$event",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",124],["T_WHITESPACE","\n    ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","testSuccessHandlerReturnsNonResponse",127],"(",")",["T_WHITESPACE","\n    ",127],"{",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$successHandler",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getSuccessHandler",129],"(",")",";",["T_WHITESPACE","\n\n        ",129],["T_LIST","list",131],"(",["T_VARIABLE","$listener",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$tokenStorage",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$httpUtils",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$options",131],")",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getListener",131],"(",["T_VARIABLE","$successHandler",131],")",";",["T_WHITESPACE","\n\n        ",131],["T_LIST","list",133],"(",["T_VARIABLE","$event",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$request",133],")",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getGetResponseEvent",133],"(",")",";",["T_WHITESPACE","\n\n        ",133],["T_VARIABLE","$httpUtils",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","expects",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","once",135],"(",")",")",["T_WHITESPACE","\n            ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","method",136],"(",["T_CONSTANT_ENCAPSED_STRING","'checkRequestPath'",136],")",["T_WHITESPACE","\n            ",136],["T_OBJECT_OPERATOR","->",137],["T_STRING","with",137],"(",["T_VARIABLE","$request",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$options",137],"[",["T_CONSTANT_ENCAPSED_STRING","'logout_path'",137],"]",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","will",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","returnValue",138],"(",["T_STRING","true",138],")",")",";",["T_WHITESPACE","\n\n        ",138],["T_VARIABLE","$successHandler",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","expects",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","once",140],"(",")",")",["T_WHITESPACE","\n            ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","method",141],"(",["T_CONSTANT_ENCAPSED_STRING","'onLogoutSuccess'",141],")",["T_WHITESPACE","\n            ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","with",142],"(",["T_VARIABLE","$request",142],")",["T_WHITESPACE","\n            ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","will",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","returnValue",143],"(",["T_STRING","null",143],")",")",";",["T_WHITESPACE","\n\n        ",143],["T_VARIABLE","$listener",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","handle",145],"(",["T_VARIABLE","$event",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n\n    ",146],["T_DOC_COMMENT","\/**\n     * @expectedException \\Symfony\\Component\\Security\\Core\\Exception\\LogoutException\n     *\/",148],["T_WHITESPACE","\n    ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","testCsrfValidationFails",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$tokenManager",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getTokenManager",153],"(",")",";",["T_WHITESPACE","\n\n        ",153],["T_LIST","list",155],"(",["T_VARIABLE","$listener",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$tokenStorage",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$httpUtils",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$options",155],")",["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getListener",155],"(",["T_STRING","null",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$tokenManager",155],")",";",["T_WHITESPACE","\n\n        ",155],["T_LIST","list",157],"(",["T_VARIABLE","$event",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$request",157],")",["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getGetResponseEvent",157],"(",")",";",["T_WHITESPACE","\n\n        ",157],["T_VARIABLE","$request",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","query",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","set",159],"(",["T_CONSTANT_ENCAPSED_STRING","'_csrf_token'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'token'",159],")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$httpUtils",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","expects",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","once",161],"(",")",")",["T_WHITESPACE","\n            ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","method",162],"(",["T_CONSTANT_ENCAPSED_STRING","'checkRequestPath'",162],")",["T_WHITESPACE","\n            ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","with",163],"(",["T_VARIABLE","$request",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$options",163],"[",["T_CONSTANT_ENCAPSED_STRING","'logout_path'",163],"]",")",["T_WHITESPACE","\n            ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","will",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","returnValue",164],"(",["T_STRING","true",164],")",")",";",["T_WHITESPACE","\n\n        ",164],["T_VARIABLE","$tokenManager",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","expects",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","once",166],"(",")",")",["T_WHITESPACE","\n            ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","method",167],"(",["T_CONSTANT_ENCAPSED_STRING","'isTokenValid'",167],")",["T_WHITESPACE","\n            ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","will",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","returnValue",168],"(",["T_STRING","false",168],")",")",";",["T_WHITESPACE","\n\n        ",168],["T_VARIABLE","$listener",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","handle",170],"(",["T_VARIABLE","$event",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_PRIVATE","private",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getTokenManager",173],"(",")",["T_WHITESPACE","\n    ",173],"{",["T_WHITESPACE","\n        ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getMockBuilder",175],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Csrf\\CsrfTokenManagerInterface'",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getMock",175],"(",")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_PRIVATE","private",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","getTokenStorage",178],"(",")",["T_WHITESPACE","\n    ",178],"{",["T_WHITESPACE","\n        ",179],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getMockBuilder",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\Storage\\TokenStorageInterface'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","getMock",180],"(",")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_PRIVATE","private",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getGetResponseEvent",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$event",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getMockBuilder",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent'",185],")",["T_WHITESPACE","\n            ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","disableOriginalConstructor",186],"(",")",["T_WHITESPACE","\n            ",186],["T_OBJECT_OPERATOR","->",187],["T_STRING","getMock",187],"(",")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$event",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","expects",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","any",189],"(",")",")",["T_WHITESPACE","\n            ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","method",190],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",190],")",["T_WHITESPACE","\n            ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","will",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","returnValue",191],"(",["T_VARIABLE","$request",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_NEW","new",191],["T_WHITESPACE"," ",191],["T_STRING","Request",191],"(",")",")",")",";",["T_WHITESPACE","\n\n        ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_ARRAY","array",193],"(",["T_VARIABLE","$event",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$request",193],")",";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_PRIVATE","private",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","getHandler",196],"(",")",["T_WHITESPACE","\n    ",196],"{",["T_WHITESPACE","\n        ",197],["T_RETURN","return",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getMockBuilder",198],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Logout\\LogoutHandlerInterface'",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getMock",198],"(",")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n\n    ",199],["T_PRIVATE","private",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","getHttpUtils",201],"(",")",["T_WHITESPACE","\n    ",201],"{",["T_WHITESPACE","\n        ",202],["T_RETURN","return",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getMockBuilder",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\HttpUtils'",203],")",["T_WHITESPACE","\n            ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","disableOriginalConstructor",204],"(",")",["T_WHITESPACE","\n            ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","getMock",205],"(",")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n\n    ",206],["T_PRIVATE","private",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getListener",208],"(",["T_VARIABLE","$successHandler",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$tokenManager",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","null",208],")",["T_WHITESPACE","\n    ",208],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$listener",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_NEW","new",210],["T_WHITESPACE"," ",210],["T_STRING","LogoutListener",210],"(",["T_WHITESPACE","\n            ",210],["T_VARIABLE","$tokenStorage",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getTokenStorage",211],"(",")",",",["T_WHITESPACE","\n            ",211],["T_VARIABLE","$httpUtils",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getHttpUtils",212],"(",")",",",["T_WHITESPACE","\n            ",212],["T_VARIABLE","$successHandler",213],["T_WHITESPACE"," ",213],"?",":",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getSuccessHandler",213],"(",")",",",["T_WHITESPACE","\n            ",213],["T_VARIABLE","$options",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n                ",214],["T_CONSTANT_ENCAPSED_STRING","'csrf_parameter'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'_csrf_token'",215],",",["T_WHITESPACE","\n                ",215],["T_CONSTANT_ENCAPSED_STRING","'csrf_token_id'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'logout'",216],",",["T_WHITESPACE","\n                ",216],["T_CONSTANT_ENCAPSED_STRING","'logout_path'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'\/logout'",217],",",["T_WHITESPACE","\n                ",217],["T_CONSTANT_ENCAPSED_STRING","'target_url'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'\/'",218],",",["T_WHITESPACE","\n            ",218],")",",",["T_WHITESPACE","\n            ",219],["T_VARIABLE","$tokenManager",220],["T_WHITESPACE","\n        ",220],")",";",["T_WHITESPACE","\n\n        ",221],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_VARIABLE","$listener",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$tokenStorage",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$httpUtils",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$options",223],")",";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_PRIVATE","private",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getSuccessHandler",226],"(",")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getMockBuilder",228],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Http\\Logout\\LogoutSuccessHandlerInterface'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getMock",228],"(",")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_PRIVATE","private",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","getToken",231],"(",")",["T_WHITESPACE","\n    ",231],"{",["T_WHITESPACE","\n        ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getMockBuilder",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Security\\Core\\Authentication\\Token\\TokenInterface'",233],")",["T_OBJECT_OPERATOR","->",233],["T_STRING","getMock",233],"(",")",";",["T_WHITESPACE","\n    ",233],"}",["T_WHITESPACE","\n",234],"}",["T_WHITESPACE","\n",235]]
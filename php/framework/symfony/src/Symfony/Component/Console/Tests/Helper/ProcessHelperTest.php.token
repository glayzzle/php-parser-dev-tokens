[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Console",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Helper",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Console",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Helper",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DebugFormatterHelper",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Console",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Helper",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HelperSet",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Console",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Output",16],["T_NS_SEPARATOR","\\",16],["T_STRING","StreamOutput",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Console",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Helper",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ProcessHelper",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Process",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Process",18],";",["T_WHITESPACE","\n\n",18],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","ProcessHelperTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","PHPUnit_Framework_TestCase",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @dataProvider provideCommandsAndOutput\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","testVariousProcessRuns",25],"(",["T_VARIABLE","$expected",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$cmd",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$verbosity",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$error",25],")",["T_WHITESPACE","\n    ",25],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$helper",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_NEW","new",27],["T_WHITESPACE"," ",27],["T_STRING","ProcessHelper",27],"(",")",";",["T_WHITESPACE","\n        ",27],["T_VARIABLE","$helper",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","setHelperSet",28],"(",["T_NEW","new",28],["T_WHITESPACE"," ",28],["T_STRING","HelperSet",28],"(",["T_ARRAY","array",28],"(",["T_NEW","new",28],["T_WHITESPACE"," ",28],["T_STRING","DebugFormatterHelper",28],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$output",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getOutputStream",29],"(",["T_VARIABLE","$verbosity",29],")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$helper",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","run",30],"(",["T_VARIABLE","$output",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$cmd",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$error",30],")",";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","assertEquals",31],"(",["T_VARIABLE","$expected",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getOutput",31],"(",["T_VARIABLE","$output",31],")",")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n\n    ",32],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testPassedCallbackIsExecuted",34],"(",")",["T_WHITESPACE","\n    ",34],"{",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$helper",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NEW","new",36],["T_WHITESPACE"," ",36],["T_STRING","ProcessHelper",36],"(",")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$helper",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setHelperSet",37],"(",["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","HelperSet",37],"(",["T_ARRAY","array",37],"(",["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","DebugFormatterHelper",37],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$output",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getOutputStream",38],"(",["T_STRING","StreamOutput",38],["T_DOUBLE_COLON","::",38],["T_STRING","VERBOSITY_NORMAL",38],")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$executed",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","false",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$callback",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],"(",")",["T_WHITESPACE"," ",41],["T_USE","use",41],["T_WHITESPACE"," ",41],"(","&",["T_VARIABLE","$executed",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE"," ",41],["T_VARIABLE","$executed",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","true",41],";",["T_WHITESPACE"," ",41],"}",";",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$helper",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","run",43],"(",["T_VARIABLE","$output",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo 42;\"'",43],",",["T_WHITESPACE"," ",43],["T_STRING","null",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$callback",43],")",";",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertTrue",44],"(",["T_VARIABLE","$executed",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n\n    ",45],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","provideCommandsAndOutput",47],"(",")",["T_WHITESPACE","\n    ",47],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$successOutputVerbose",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_START_HEREDOC","<<<'EOT'\n",49],["T_ENCAPSED_AND_WHITESPACE","  RUN  php -r \"echo 42;\"\n  RES  Command ran successfully\n\n",50],["T_END_HEREDOC","EOT",53],";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$successOutputDebug",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_START_HEREDOC","<<<'EOT'\n",54],["T_ENCAPSED_AND_WHITESPACE","  RUN  php -r \"echo 42;\"\n  OUT  42\n  RES  Command ran successfully\n\n",55],["T_END_HEREDOC","EOT",59],";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$successOutputDebugWithTags",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_START_HEREDOC","<<<'EOT'\n",60],["T_ENCAPSED_AND_WHITESPACE","  RUN  php -r \"echo '<info>42<\/info>';\"\n  OUT  <info>42<\/info>\n  RES  Command ran successfully\n\n",61],["T_END_HEREDOC","EOT",65],";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$successOutputProcessDebug",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_START_HEREDOC","<<<'EOT'\n",66],["T_ENCAPSED_AND_WHITESPACE","  RUN  'php' '-r' 'echo 42;'\n  OUT  42\n  RES  Command ran successfully\n\n",67],["T_END_HEREDOC","EOT",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$syntaxErrorOutputVerbose",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_START_HEREDOC","<<<'EOT'\n",72],["T_ENCAPSED_AND_WHITESPACE","  RUN  php -r \"fwrite(STDERR, 'error message');usleep(50000);fwrite(STDOUT, 'out message');exit(252);\"\n  RES  252 Command did not run successfully\n\n",73],["T_END_HEREDOC","EOT",76],";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$syntaxErrorOutputDebug",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_START_HEREDOC","<<<'EOT'\n",77],["T_ENCAPSED_AND_WHITESPACE","  RUN  php -r \"fwrite(STDERR, 'error message');usleep(500000);fwrite(STDOUT, 'out message');exit(252);\"\n  ERR  error message\n  OUT  out message\n  RES  252 Command did not run successfully\n\n",78],["T_END_HEREDOC","EOT",83],";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$errorMessage",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'An error occurred'",85],";",["T_WHITESPACE","\n        ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",86],["T_WHITESPACE"," ",86],["T_IS_IDENTICAL","===",86],["T_WHITESPACE"," ",86],["T_STRING","DIRECTORY_SEPARATOR",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n            ",86],["T_VARIABLE","$successOutputProcessDebug",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","str_replace",87],"(",["T_CONSTANT_ENCAPSED_STRING","\"'\"",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'\"'",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$successOutputProcessDebug",87],")",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n\n        ",88],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_WHITESPACE","\n            ",90],["T_ARRAY","array",91],"(",["T_CONSTANT_ENCAPSED_STRING","''",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo 42;\"'",91],",",["T_WHITESPACE"," ",91],["T_STRING","StreamOutput",91],["T_DOUBLE_COLON","::",91],["T_STRING","VERBOSITY_VERBOSE",91],",",["T_WHITESPACE"," ",91],["T_STRING","null",91],")",",",["T_WHITESPACE","\n            ",91],["T_ARRAY","array",92],"(",["T_VARIABLE","$successOutputVerbose",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo 42;\"'",92],",",["T_WHITESPACE"," ",92],["T_STRING","StreamOutput",92],["T_DOUBLE_COLON","::",92],["T_STRING","VERBOSITY_VERY_VERBOSE",92],",",["T_WHITESPACE"," ",92],["T_STRING","null",92],")",",",["T_WHITESPACE","\n            ",92],["T_ARRAY","array",93],"(",["T_VARIABLE","$successOutputDebug",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo 42;\"'",93],",",["T_WHITESPACE"," ",93],["T_STRING","StreamOutput",93],["T_DOUBLE_COLON","::",93],["T_STRING","VERBOSITY_DEBUG",93],",",["T_WHITESPACE"," ",93],["T_STRING","null",93],")",",",["T_WHITESPACE","\n            ",93],["T_ARRAY","array",94],"(",["T_VARIABLE","$successOutputDebugWithTags",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo \\'<info>42<\/info>\\';\"'",94],",",["T_WHITESPACE"," ",94],["T_STRING","StreamOutput",94],["T_DOUBLE_COLON","::",94],["T_STRING","VERBOSITY_DEBUG",94],",",["T_WHITESPACE"," ",94],["T_STRING","null",94],")",",",["T_WHITESPACE","\n            ",94],["T_ARRAY","array",95],"(",["T_CONSTANT_ENCAPSED_STRING","''",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'php -r \"syntax error\"'",95],",",["T_WHITESPACE"," ",95],["T_STRING","StreamOutput",95],["T_DOUBLE_COLON","::",95],["T_STRING","VERBOSITY_VERBOSE",95],",",["T_WHITESPACE"," ",95],["T_STRING","null",95],")",",",["T_WHITESPACE","\n            ",95],["T_ARRAY","array",96],"(",["T_VARIABLE","$syntaxErrorOutputVerbose",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'php -r \"fwrite(STDERR, \\'error message\\');usleep(50000);fwrite(STDOUT, \\'out message\\');exit(252);\"'",96],",",["T_WHITESPACE"," ",96],["T_STRING","StreamOutput",96],["T_DOUBLE_COLON","::",96],["T_STRING","VERBOSITY_VERY_VERBOSE",96],",",["T_WHITESPACE"," ",96],["T_STRING","null",96],")",",",["T_WHITESPACE","\n            ",96],["T_ARRAY","array",97],"(",["T_VARIABLE","$syntaxErrorOutputDebug",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'php -r \"fwrite(STDERR, \\'error message\\');usleep(500000);fwrite(STDOUT, \\'out message\\');exit(252);\"'",97],",",["T_WHITESPACE"," ",97],["T_STRING","StreamOutput",97],["T_DOUBLE_COLON","::",97],["T_STRING","VERBOSITY_DEBUG",97],",",["T_WHITESPACE"," ",97],["T_STRING","null",97],")",",",["T_WHITESPACE","\n            ",97],["T_ARRAY","array",98],"(",["T_VARIABLE","$errorMessage",98],".",["T_STRING","PHP_EOL",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'php -r \"fwrite(STDERR, \\'error message\\');usleep(50000);fwrite(STDOUT, \\'out message\\');exit(252);\"'",98],",",["T_WHITESPACE"," ",98],["T_STRING","StreamOutput",98],["T_DOUBLE_COLON","::",98],["T_STRING","VERBOSITY_VERBOSE",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$errorMessage",98],")",",",["T_WHITESPACE","\n            ",98],["T_ARRAY","array",99],"(",["T_VARIABLE","$syntaxErrorOutputVerbose",99],".",["T_VARIABLE","$errorMessage",99],".",["T_STRING","PHP_EOL",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'php -r \"fwrite(STDERR, \\'error message\\');usleep(50000);fwrite(STDOUT, \\'out message\\');exit(252);\"'",99],",",["T_WHITESPACE"," ",99],["T_STRING","StreamOutput",99],["T_DOUBLE_COLON","::",99],["T_STRING","VERBOSITY_VERY_VERBOSE",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$errorMessage",99],")",",",["T_WHITESPACE","\n            ",99],["T_ARRAY","array",100],"(",["T_VARIABLE","$syntaxErrorOutputDebug",100],".",["T_VARIABLE","$errorMessage",100],".",["T_STRING","PHP_EOL",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'php -r \"fwrite(STDERR, \\'error message\\');usleep(500000);fwrite(STDOUT, \\'out message\\');exit(252);\"'",100],",",["T_WHITESPACE"," ",100],["T_STRING","StreamOutput",100],["T_DOUBLE_COLON","::",100],["T_STRING","VERBOSITY_DEBUG",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$errorMessage",100],")",",",["T_WHITESPACE","\n            ",100],["T_ARRAY","array",101],"(",["T_VARIABLE","$successOutputProcessDebug",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'php'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'-r'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'echo 42;'",101],")",",",["T_WHITESPACE"," ",101],["T_STRING","StreamOutput",101],["T_DOUBLE_COLON","::",101],["T_STRING","VERBOSITY_DEBUG",101],",",["T_WHITESPACE"," ",101],["T_STRING","null",101],")",",",["T_WHITESPACE","\n            ",101],["T_ARRAY","array",102],"(",["T_VARIABLE","$successOutputDebug",102],",",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","Process",102],"(",["T_CONSTANT_ENCAPSED_STRING","'php -r \"echo 42;\"'",102],")",",",["T_WHITESPACE"," ",102],["T_STRING","StreamOutput",102],["T_DOUBLE_COLON","::",102],["T_STRING","VERBOSITY_DEBUG",102],",",["T_WHITESPACE"," ",102],["T_STRING","null",102],")",",",["T_WHITESPACE","\n        ",102],")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_PRIVATE","private",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","getOutputStream",106],"(",["T_VARIABLE","$verbosity",106],")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","StreamOutput",108],"(",["T_STRING","fopen",108],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/memory'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'r+'",108],",",["T_WHITESPACE"," ",108],["T_STRING","false",108],")",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$verbosity",108],",",["T_WHITESPACE"," ",108],["T_STRING","false",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_PRIVATE","private",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","getOutput",111],"(",["T_STRING","StreamOutput",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$output",111],")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_STRING","rewind",113],"(",["T_VARIABLE","$output",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getStream",113],"(",")",")",";",["T_WHITESPACE","\n\n        ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_STRING","stream_get_contents",115],"(",["T_VARIABLE","$output",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getStream",115],"(",")",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n",116],"}",["T_WHITESPACE","\n",117]]
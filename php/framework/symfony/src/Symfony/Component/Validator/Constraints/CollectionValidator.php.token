[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Validator",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Constraints",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Validator",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Constraint",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Validator",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ConstraintValidator",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Validator",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UnexpectedTypeException",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * @author Bernhard Schussek <bschussek@gmail.com>\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","CollectionValidator",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","ConstraintValidator",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",23],["T_WHITESPACE","\n    ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","validate",26],"(",["T_VARIABLE","$value",26],",",["T_WHITESPACE"," ",26],["T_STRING","Constraint",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$constraint",26],")",["T_WHITESPACE","\n    ",26],"{",["T_WHITESPACE","\n        ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(","!",["T_VARIABLE","$constraint",28],["T_WHITESPACE"," ",28],["T_INSTANCEOF","instanceof",28],["T_WHITESPACE"," ",28],["T_STRING","Collection",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n            ",28],["T_THROW","throw",29],["T_WHITESPACE"," ",29],["T_NEW","new",29],["T_WHITESPACE"," ",29],["T_STRING","UnexpectedTypeException",29],"(",["T_VARIABLE","$constraint",29],",",["T_WHITESPACE"," ",29],["T_NS_C","__NAMESPACE__",29],".",["T_CONSTANT_ENCAPSED_STRING","'\\Collection'",29],")",";",["T_WHITESPACE","\n        ",29],"}",["T_WHITESPACE","\n\n        ",30],["T_IF","if",32],["T_WHITESPACE"," ",32],"(",["T_STRING","null",32],["T_WHITESPACE"," ",32],["T_IS_IDENTICAL","===",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$value",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n            ",32],["T_RETURN","return",33],";",["T_WHITESPACE","\n        ",33],"}",["T_WHITESPACE","\n\n        ",34],["T_IF","if",36],["T_WHITESPACE"," ",36],"(","!",["T_STRING","is_array",36],"(",["T_VARIABLE","$value",36],")",["T_WHITESPACE"," ",36],["T_BOOLEAN_AND","&&",36],["T_WHITESPACE"," ",36],"!","(",["T_VARIABLE","$value",36],["T_WHITESPACE"," ",36],["T_INSTANCEOF","instanceof",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Traversable",36],["T_WHITESPACE"," ",36],["T_BOOLEAN_AND","&&",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$value",36],["T_WHITESPACE"," ",36],["T_INSTANCEOF","instanceof",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","ArrayAccess",36],")",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n            ",36],["T_THROW","throw",37],["T_WHITESPACE"," ",37],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","UnexpectedTypeException",37],"(",["T_VARIABLE","$value",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'array or Traversable and ArrayAccess'",37],")",";",["T_WHITESPACE","\n        ",37],"}",["T_WHITESPACE","\n\n        ",38],["T_COMMENT","\/\/ We need to keep the initialized context when CollectionValidator\n",40],["T_WHITESPACE","        ",41],["T_COMMENT","\/\/ calls itself recursively (Collection constraints can be nested).\n",41],["T_WHITESPACE","        ",42],["T_COMMENT","\/\/ Since the context of the validator is overwritten when initialize()\n",42],["T_WHITESPACE","        ",43],["T_COMMENT","\/\/ is called for the nested constraint, the outer validator is\n",43],["T_WHITESPACE","        ",44],["T_COMMENT","\/\/ acting on the wrong context when the nested validation terminates.\n",44],["T_WHITESPACE","        ",45],["T_COMMENT","\/\/\n",45],["T_WHITESPACE","        ",46],["T_COMMENT","\/\/ A better solution - which should be approached in Symfony 3.0 - is to\n",46],["T_WHITESPACE","        ",47],["T_COMMENT","\/\/ remove the initialize() method and pass the context as last argument\n",47],["T_WHITESPACE","        ",48],["T_COMMENT","\/\/ to validate() instead.\n",48],["T_WHITESPACE","        ",49],["T_VARIABLE","$context",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","context",49],";",["T_WHITESPACE","\n\n        ",49],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$constraint",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","fields",51],["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$field",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$fieldConstraint",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_COMMENT","\/\/ bug fix issue #2779\n",52],["T_WHITESPACE","            ",53],["T_VARIABLE","$existsInArray",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","is_array",53],"(",["T_VARIABLE","$value",53],")",["T_WHITESPACE"," ",53],["T_BOOLEAN_AND","&&",53],["T_WHITESPACE"," ",53],["T_STRING","array_key_exists",53],"(",["T_VARIABLE","$field",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$value",53],")",";",["T_WHITESPACE","\n            ",53],["T_VARIABLE","$existsInArrayAccess",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$value",54],["T_WHITESPACE"," ",54],["T_INSTANCEOF","instanceof",54],["T_WHITESPACE"," ",54],["T_NS_SEPARATOR","\\",54],["T_STRING","ArrayAccess",54],["T_WHITESPACE"," ",54],["T_BOOLEAN_AND","&&",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$value",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","offsetExists",54],"(",["T_VARIABLE","$field",54],")",";",["T_WHITESPACE","\n\n            ",54],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$existsInArray",56],["T_WHITESPACE"," ",56],["T_BOOLEAN_OR","||",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$existsInArrayAccess",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n                ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_STRING","count",57],"(",["T_VARIABLE","$fieldConstraint",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","constraints",57],")",["T_WHITESPACE"," ",57],">",["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n                    ",57],["T_VARIABLE","$context",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getValidator",58],"(",")",["T_WHITESPACE","\n                        ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","inContext",59],"(",["T_VARIABLE","$context",59],")",["T_WHITESPACE","\n                        ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","atPath",60],"(",["T_CONSTANT_ENCAPSED_STRING","'['",60],".",["T_VARIABLE","$field",60],".",["T_CONSTANT_ENCAPSED_STRING","']'",60],")",["T_WHITESPACE","\n                        ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","validate",61],"(",["T_VARIABLE","$value",61],"[",["T_VARIABLE","$field",61],"]",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$fieldConstraint",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","constraints",61],")",";",["T_WHITESPACE","\n                ",61],"}",["T_WHITESPACE","\n            ",62],"}",["T_WHITESPACE"," ",63],["T_ELSEIF","elseif",63],["T_WHITESPACE"," ",63],"(","!",["T_VARIABLE","$fieldConstraint",63],["T_WHITESPACE"," ",63],["T_INSTANCEOF","instanceof",63],["T_WHITESPACE"," ",63],["T_STRING","Optional",63],["T_WHITESPACE"," ",63],["T_BOOLEAN_AND","&&",63],["T_WHITESPACE"," ",63],"!",["T_VARIABLE","$constraint",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","allowMissingFields",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$context",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","buildViolation",64],"(",["T_VARIABLE","$constraint",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","missingFieldsMessage",64],")",["T_WHITESPACE","\n                    ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","atPath",65],"(",["T_CONSTANT_ENCAPSED_STRING","'['",65],".",["T_VARIABLE","$field",65],".",["T_CONSTANT_ENCAPSED_STRING","']'",65],")",["T_WHITESPACE","\n                    ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","setParameter",66],"(",["T_CONSTANT_ENCAPSED_STRING","'{{ field }}'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","formatValue",66],"(",["T_VARIABLE","$field",66],")",")",["T_WHITESPACE","\n                    ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setInvalidValue",67],"(",["T_STRING","null",67],")",["T_WHITESPACE","\n                    ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","setCode",68],"(",["T_STRING","Collection",68],["T_DOUBLE_COLON","::",68],["T_STRING","MISSING_FIELD_ERROR",68],")",["T_WHITESPACE","\n                    ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","addViolation",69],"(",")",";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n\n        ",71],["T_IF","if",73],["T_WHITESPACE"," ",73],"(","!",["T_VARIABLE","$constraint",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","allowExtraFields",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_FOREACH","foreach",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$value",74],["T_WHITESPACE"," ",74],["T_AS","as",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$field",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$fieldValue",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n                ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(","!",["T_ISSET","isset",75],"(",["T_VARIABLE","$constraint",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","fields",75],"[",["T_VARIABLE","$field",75],"]",")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n                    ",75],["T_VARIABLE","$context",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","buildViolation",76],"(",["T_VARIABLE","$constraint",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","extraFieldsMessage",76],")",["T_WHITESPACE","\n                        ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","atPath",77],"(",["T_CONSTANT_ENCAPSED_STRING","'['",77],".",["T_VARIABLE","$field",77],".",["T_CONSTANT_ENCAPSED_STRING","']'",77],")",["T_WHITESPACE","\n                        ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","setParameter",78],"(",["T_CONSTANT_ENCAPSED_STRING","'{{ field }}'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","formatValue",78],"(",["T_VARIABLE","$field",78],")",")",["T_WHITESPACE","\n                        ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","setInvalidValue",79],"(",["T_VARIABLE","$fieldValue",79],")",["T_WHITESPACE","\n                        ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","setCode",80],"(",["T_STRING","Collection",80],["T_DOUBLE_COLON","::",80],["T_STRING","NO_SUCH_FIELD_ERROR",80],")",["T_WHITESPACE","\n                        ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","addViolation",81],"(",")",";",["T_WHITESPACE","\n                ",81],"}",["T_WHITESPACE","\n            ",82],"}",["T_WHITESPACE","\n        ",83],"}",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
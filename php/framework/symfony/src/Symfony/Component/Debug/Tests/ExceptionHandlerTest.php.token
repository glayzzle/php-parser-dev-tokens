[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Debug",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Debug",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ExceptionHandler",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Debug",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","OutOfMemoryException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","NotFoundHttpException",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpKernel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Exception",17],["T_NS_SEPARATOR","\\",17],["T_STRING","MethodNotAllowedHttpException",17],";",["T_WHITESPACE","\n\n",17],["T_REQUIRE_ONCE","require_once",19],["T_WHITESPACE"," ",19],["T_DIR","__DIR__",19],".",["T_CONSTANT_ENCAPSED_STRING","'\/HeaderMock.php'",19],";",["T_WHITESPACE","\n\n",19],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","ExceptionHandlerTest",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_NS_SEPARATOR","\\",21],["T_STRING","PHPUnit_Framework_TestCase",21],["T_WHITESPACE","\n",21],"{",["T_WHITESPACE","\n    ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE","\n    ",23],"{",["T_WHITESPACE","\n        ",24],["T_STRING","testHeader",25],"(",")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","tearDown",28],"(",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_STRING","testHeader",30],"(",")",";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","testDebug",33],"(",")",["T_WHITESPACE","\n    ",33],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$handler",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_NEW","new",35],["T_WHITESPACE"," ",35],["T_STRING","ExceptionHandler",35],"(",["T_STRING","false",35],")",";",["T_WHITESPACE","\n\n        ",35],["T_STRING","ob_start",37],"(",")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$handler",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","sendPhpResponse",38],"(",["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","RuntimeException",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Foo'",38],")",")",";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$response",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","ob_get_clean",39],"(",")",";",["T_WHITESPACE","\n\n        ",39],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertContains",41],"(",["T_CONSTANT_ENCAPSED_STRING","'<h1>Whoops, looks like something went wrong.<\/h1>'",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$response",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertNotContains",42],"(",["T_CONSTANT_ENCAPSED_STRING","'<h2 class=\"block_exception clear_fix\">'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$response",42],")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$handler",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_NEW","new",44],["T_WHITESPACE"," ",44],["T_STRING","ExceptionHandler",44],"(",["T_STRING","true",44],")",";",["T_WHITESPACE","\n\n        ",44],["T_STRING","ob_start",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$handler",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","sendPhpResponse",47],"(",["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","RuntimeException",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Foo'",47],")",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$response",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","ob_get_clean",48],"(",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertContains",50],"(",["T_CONSTANT_ENCAPSED_STRING","'<h1>Whoops, looks like something went wrong.<\/h1>'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$response",50],")",";",["T_WHITESPACE","\n        ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertContains",51],"(",["T_CONSTANT_ENCAPSED_STRING","'<h2 class=\"block_exception clear_fix\">'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$response",51],")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","testStatusCode",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$handler",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","ExceptionHandler",56],"(",["T_STRING","false",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'iso8859-1'",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_STRING","ob_start",58],"(",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$handler",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","sendPhpResponse",59],"(",["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","NotFoundHttpException",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Foo'",59],")",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$response",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","ob_get_clean",60],"(",")",";",["T_WHITESPACE","\n\n        ",60],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertContains",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Sorry, the page you are looking for could not be found.'",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$response",62],")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$expectedHeaders",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n            ",64],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.0 404'",65],",",["T_WHITESPACE"," ",65],["T_STRING","true",65],",",["T_WHITESPACE"," ",65],["T_STRING","null",65],")",",",["T_WHITESPACE","\n            ",65],["T_ARRAY","array",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/html; charset=iso8859-1'",66],",",["T_WHITESPACE"," ",66],["T_STRING","true",66],",",["T_WHITESPACE"," ",66],["T_STRING","null",66],")",",",["T_WHITESPACE","\n        ",66],")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertSame",69],"(",["T_VARIABLE","$expectedHeaders",69],",",["T_WHITESPACE"," ",69],["T_STRING","testHeader",69],"(",")",")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","testHeaders",72],"(",")",["T_WHITESPACE","\n    ",72],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$handler",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","ExceptionHandler",74],"(",["T_STRING","false",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'iso8859-1'",74],")",";",["T_WHITESPACE","\n\n        ",74],["T_STRING","ob_start",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$handler",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","sendPhpResponse",77],"(",["T_NEW","new",77],["T_WHITESPACE"," ",77],["T_STRING","MethodNotAllowedHttpException",77],"(",["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'POST'",77],")",")",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$response",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","ob_get_clean",78],"(",")",";",["T_WHITESPACE","\n\n        ",78],["T_VARIABLE","$expectedHeaders",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n            ",80],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.0 405'",81],",",["T_WHITESPACE"," ",81],["T_STRING","true",81],",",["T_WHITESPACE"," ",81],["T_STRING","null",81],")",",",["T_WHITESPACE","\n            ",81],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Allow: POST'",82],",",["T_WHITESPACE"," ",82],["T_STRING","false",82],",",["T_WHITESPACE"," ",82],["T_STRING","null",82],")",",",["T_WHITESPACE","\n            ",82],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type: text\/html; charset=iso8859-1'",83],",",["T_WHITESPACE"," ",83],["T_STRING","true",83],",",["T_WHITESPACE"," ",83],["T_STRING","null",83],")",",",["T_WHITESPACE","\n        ",83],")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertSame",86],"(",["T_VARIABLE","$expectedHeaders",86],",",["T_WHITESPACE"," ",86],["T_STRING","testHeader",86],"(",")",")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","testNestedExceptions",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$handler",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STRING","ExceptionHandler",91],"(",["T_STRING","true",91],")",";",["T_WHITESPACE","\n        ",91],["T_STRING","ob_start",92],"(",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$handler",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","sendPhpResponse",93],"(",["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","RuntimeException",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Foo'",93],",",["T_WHITESPACE"," ",93],["T_LNUMBER","0",93],",",["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","RuntimeException",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Bar'",93],")",")",")",";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$response",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","ob_get_clean",94],"(",")",";",["T_WHITESPACE","\n\n        ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertStringMatchesFormat",96],"(",["T_CONSTANT_ENCAPSED_STRING","'%A<span class=\"exception_message\">Foo<\/span>%A<span class=\"exception_message\">Bar<\/span>%A'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$response",96],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n\n    ",97],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testHandle",99],"(",")",["T_WHITESPACE","\n    ",99],"{",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$exception",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_NS_SEPARATOR","\\",101],["T_STRING","Exception",101],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$handler",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMockBuilder",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Debug\\ExceptionHandler'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","setMethods",103],"(",["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'sendPhpResponse'",103],")",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","getMock",103],"(",")",";",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$handler",104],["T_WHITESPACE","\n            ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","expects",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","exactly",105],"(",["T_LNUMBER","2",105],")",")",["T_WHITESPACE","\n            ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","method",106],"(",["T_CONSTANT_ENCAPSED_STRING","'sendPhpResponse'",106],")",";",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$handler",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","handle",108],"(",["T_VARIABLE","$exception",108],")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$handler",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","setHandler",110],"(",["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$e",110],")",["T_WHITESPACE"," ",110],["T_USE","use",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$exception",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n            ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertSame",111],"(",["T_VARIABLE","$exception",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$e",111],")",";",["T_WHITESPACE","\n        ",111],"}",")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$handler",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","handle",114],"(",["T_VARIABLE","$exception",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","testHandleOutOfMemoryException",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$exception",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","OutOfMemoryException",119],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",119],",",["T_WHITESPACE"," ",119],["T_LNUMBER","0",119],",",["T_WHITESPACE"," ",119],["T_STRING","E_ERROR",119],",",["T_WHITESPACE"," ",119],["T_FILE","__FILE__",119],",",["T_WHITESPACE"," ",119],["T_LINE","__LINE__",119],")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$handler",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMockBuilder",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Debug\\ExceptionHandler'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","setMethods",121],"(",["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","'sendPhpResponse'",121],")",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","getMock",121],"(",")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$handler",122],["T_WHITESPACE","\n            ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","expects",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","once",123],"(",")",")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","method",124],"(",["T_CONSTANT_ENCAPSED_STRING","'sendPhpResponse'",124],")",";",["T_WHITESPACE","\n\n        ",124],["T_VARIABLE","$handler",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","setHandler",126],"(",["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],"(",["T_VARIABLE","$e",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n            ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","fail",127],"(",["T_CONSTANT_ENCAPSED_STRING","'OutOfMemoryException should bypass the handler'",127],")",";",["T_WHITESPACE","\n        ",127],"}",")",";",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$handler",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","handle",130],"(",["T_VARIABLE","$exception",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n",131],"}",["T_WHITESPACE","\n",132]]
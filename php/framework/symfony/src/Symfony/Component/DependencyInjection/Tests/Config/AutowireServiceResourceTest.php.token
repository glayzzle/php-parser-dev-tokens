[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","DependencyInjection",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Config",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Compiler",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AutowirePass",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","DependencyInjection",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Config",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AutowireServiceResource",15],";",["T_WHITESPACE","\n\n",15],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","AutowireServiceResourceTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_NS_SEPARATOR","\\",17],["T_STRING","PHPUnit_Framework_TestCase",17],["T_WHITESPACE","\n",17],"{",["T_WHITESPACE","\n    ",18],["T_DOC_COMMENT","\/**\n     * @var AutowireServiceResource\n     *\/",19],["T_WHITESPACE","\n    ",21],["T_PRIVATE","private",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$resource",22],";",["T_WHITESPACE","\n    ",22],["T_PRIVATE","private",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$file",23],";",["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$class",24],";",["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$time",25],";",["T_WHITESPACE","\n\n    ",25],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","setUp",27],"(",")",["T_WHITESPACE","\n    ",27],"{",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","file",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","realpath",29],"(",["T_STRING","sys_get_temp_dir",29],"(",")",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/tmp.php'",29],";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","time",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","time",30],"(",")",";",["T_WHITESPACE","\n        ",30],["T_STRING","touch",31],"(",["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","file",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","time",31],")",";",["T_WHITESPACE","\n\n        ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","class",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_NS_C","__NAMESPACE__",33],".",["T_CONSTANT_ENCAPSED_STRING","'\\Foo'",33],";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","resource",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NEW","new",34],["T_WHITESPACE"," ",34],["T_STRING","AutowireServiceResource",34],"(",["T_WHITESPACE","\n            ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","class",35],",",["T_WHITESPACE","\n            ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","file",36],",",["T_WHITESPACE","\n            ",36],["T_ARRAY","array",37],"(",")",["T_WHITESPACE","\n        ",37],")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","testToString",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertSame",43],"(",["T_CONSTANT_ENCAPSED_STRING","'service.autowire.'",43],".",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","class",43],",",["T_WHITESPACE"," ",43],["T_STRING_CAST","(string)",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","resource",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testSerializeUnserialize",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$unserialized",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","unserialize",48],"(",["T_STRING","serialize",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","resource",48],")",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEquals",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","resource",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$unserialized",50],")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testIsFresh",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertTrue",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","resource",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","isFresh",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","time",55],")",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns true if the resource has not changed in same second'",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertTrue",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","resource",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","isFresh",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","time",56],["T_WHITESPACE"," ",56],"+",["T_WHITESPACE"," ",56],["T_LNUMBER","10",56],")",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns true if the resource has not changed'",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertFalse",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","resource",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isFresh",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","time",57],["T_WHITESPACE"," ",57],"-",["T_WHITESPACE"," ",57],["T_LNUMBER","86400",57],")",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns false if the resource has been updated'",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testIsFreshForDeletedResources",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_STRING","unlink",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","file",62],")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertFalse",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","resource",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","isFresh",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getStaleFileTime",64],"(",")",")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns false if the resource does not exist'",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","testIsNotFreshChangedResource",67],"(",")",["T_WHITESPACE","\n    ",67],"{",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$oldResource",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","AutowireServiceResource",69],"(",["T_WHITESPACE","\n            ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","class",70],",",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","file",71],",",["T_WHITESPACE","\n            ",71],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'will_be_different'",72],")",["T_WHITESPACE","\n        ",72],")",";",["T_WHITESPACE","\n\n        ",73],["T_COMMENT","\/\/ test with a stale file *and* a resource that *will* be different than the actual\n",75],["T_WHITESPACE","        ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertFalse",76],"(",["T_VARIABLE","$oldResource",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","isFresh",76],"(",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getStaleFileTime",76],"(",")",")",",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns false if the constructor arguments have changed'",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testIsFreshSameConstructorArgs",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$oldResource",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","AutowirePass",81],["T_DOUBLE_COLON","::",81],["T_STRING","createResourceForClass",81],"(",["T_WHITESPACE","\n            ",81],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","ReflectionClass",82],"(",["T_NS_C","__NAMESPACE__",82],".",["T_CONSTANT_ENCAPSED_STRING","'\\Foo'",82],")",["T_WHITESPACE","\n        ",82],")",";",["T_WHITESPACE","\n\n        ",83],["T_COMMENT","\/\/ test with a stale file *but* the resource will not be changed\n",85],["T_WHITESPACE","        ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertTrue",86],"(",["T_VARIABLE","$oldResource",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","isFresh",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getStaleFileTime",86],"(",")",")",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns false if the constructor arguments have changed'",86],")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","testNotFreshIfClassNotFound",89],"(",")",["T_WHITESPACE","\n    ",89],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$resource",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STRING","AutowireServiceResource",91],"(",["T_WHITESPACE","\n            ",91],["T_CONSTANT_ENCAPSED_STRING","'Some\\Non\\Existent\\Class'",92],",",["T_WHITESPACE","\n            ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","file",93],",",["T_WHITESPACE","\n            ",93],["T_ARRAY","array",94],"(",")",["T_WHITESPACE","\n        ",94],")",";",["T_WHITESPACE","\n\n        ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertFalse",97],"(",["T_VARIABLE","$resource",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","isFresh",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStaleFileTime",97],"(",")",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'->isFresh() returns false if the class no longer exists'",97],")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_PROTECTED","protected",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","tearDown",100],"(",")",["T_WHITESPACE","\n    ",100],"{",["T_WHITESPACE","\n        ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(","!",["T_STRING","file_exists",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","file",102],")",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n            ",102],["T_RETURN","return",103],";",["T_WHITESPACE","\n        ",103],"}",["T_WHITESPACE","\n\n        ",104],["T_STRING","unlink",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","file",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_PRIVATE","private",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","getStaleFileTime",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","time",111],["T_WHITESPACE"," ",111],"-",["T_WHITESPACE"," ",111],["T_LNUMBER","10",111],";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n",112],"}",["T_WHITESPACE","\n\n",113],["T_CLASS","class",115],["T_WHITESPACE"," ",115],["T_STRING","Foo",115],["T_WHITESPACE","\n",115],"{",["T_WHITESPACE","\n    ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","__construct",117],"(",["T_VARIABLE","$foo",117],")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n",119],"}",["T_WHITESPACE","\n",120]]
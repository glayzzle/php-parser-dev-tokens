[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpKernel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpCache",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpKernel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpCache",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Esi",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpFoundation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Response",16],";",["T_WHITESPACE","\n\n",16],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","EsiTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","testHasSurrogateEsiCapability",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$esi",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NEW","new",22],["T_WHITESPACE"," ",22],["T_STRING","Esi",22],"(",")",";",["T_WHITESPACE","\n\n        ",22],["T_VARIABLE","$request",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","Request",24],["T_DOUBLE_COLON","::",24],["T_STRING","create",24],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",24],")",";",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$request",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","headers",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","set",25],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'abc=\"ESI\/1.0\"'",25],")",";",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","assertTrue",26],"(",["T_VARIABLE","$esi",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","hasSurrogateCapability",26],"(",["T_VARIABLE","$request",26],")",")",";",["T_WHITESPACE","\n\n        ",26],["T_VARIABLE","$request",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","Request",28],["T_DOUBLE_COLON","::",28],["T_STRING","create",28],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",28],")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$request",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","headers",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","set",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'foobar'",29],")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertFalse",30],"(",["T_VARIABLE","$esi",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","hasSurrogateCapability",30],"(",["T_VARIABLE","$request",30],")",")",";",["T_WHITESPACE","\n\n        ",30],["T_VARIABLE","$request",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","Request",32],["T_DOUBLE_COLON","::",32],["T_STRING","create",32],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",32],")",";",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertFalse",33],"(",["T_VARIABLE","$esi",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","hasSurrogateCapability",33],"(",["T_VARIABLE","$request",33],")",")",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n\n    ",34],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testAddSurrogateEsiCapability",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$esi",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","Esi",38],"(",")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$request",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Request",40],["T_DOUBLE_COLON","::",40],["T_STRING","create",40],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$esi",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","addSurrogateCapability",41],"(",["T_VARIABLE","$request",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertEquals",42],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony=\"ESI\/1.0\"'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$request",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","headers",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",42],")",")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$esi",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addSurrogateCapability",44],"(",["T_VARIABLE","$request",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertEquals",45],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony=\"ESI\/1.0\", symfony=\"ESI\/1.0\"'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$request",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","headers",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",45],")",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","testAddSurrogateControl",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$esi",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","Esi",50],"(",")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$response",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","Response",52],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:include src=\"\" \/>'",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$esi",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","addSurrogateControl",53],"(",["T_VARIABLE","$response",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertEquals",54],"(",["T_CONSTANT_ENCAPSED_STRING","'content=\"ESI\/1.0\"'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$response",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","headers",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",54],")",")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$response",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","Response",56],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$esi",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addSurrogateControl",57],"(",["T_VARIABLE","$response",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEquals",58],"(",["T_CONSTANT_ENCAPSED_STRING","''",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$response",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","headers",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",58],")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testNeedsEsiParsing",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$esi",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","Esi",63],"(",")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$response",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","Response",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$response",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","headers",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","set",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'content=\"ESI\/1.0\"'",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_VARIABLE","$esi",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","needsParsing",67],"(",["T_VARIABLE","$response",67],")",")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$response",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Response",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertFalse",70],"(",["T_VARIABLE","$esi",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","needsParsing",70],"(",["T_VARIABLE","$response",70],")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testRenderIncludeTag",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$esi",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_STRING","Esi",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEquals",77],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:include src=\"\/\" onerror=\"continue\" alt=\"\/alt\" \/>'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$esi",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","renderIncludeTag",77],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",77],",",["T_WHITESPACE"," ",77],["T_STRING","true",77],")",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:include src=\"\/\" alt=\"\/alt\" \/>'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$esi",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","renderIncludeTag",78],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",78],",",["T_WHITESPACE"," ",78],["T_STRING","false",78],")",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEquals",79],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:include src=\"\/\" onerror=\"continue\" \/>'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$esi",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","renderIncludeTag",79],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",79],")",")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertEquals",80],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:comment text=\"some comment\" \/>'",80],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",80],".",["T_CONSTANT_ENCAPSED_STRING","'<esi:include src=\"\/\" onerror=\"continue\" alt=\"\/alt\" \/>'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$esi",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","renderIncludeTag",80],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",80],",",["T_WHITESPACE"," ",80],["T_STRING","true",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'some comment'",80],")",")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","testProcessDoesNothingIfContentTypeIsNotHtml",83],"(",")",["T_WHITESPACE","\n    ",83],"{",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$esi",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Esi",85],"(",")",";",["T_WHITESPACE","\n\n        ",85],["T_VARIABLE","$request",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","Request",87],["T_DOUBLE_COLON","::",87],["T_STRING","create",87],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",87],")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$response",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","Response",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$response",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","headers",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","set",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$esi",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","process",90],"(",["T_VARIABLE","$request",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$response",90],")",";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertFalse",92],"(",["T_VARIABLE","$response",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","headers",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","has",92],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",92],")",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testMultilineEsiRemoveTagsAreRemoved",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$esi",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","Esi",97],"(",")",";",["T_WHITESPACE","\n\n        ",97],["T_VARIABLE","$request",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Request",99],["T_DOUBLE_COLON","::",99],["T_STRING","create",99],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$response",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_NEW","new",100],["T_WHITESPACE"," ",100],["T_STRING","Response",100],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:remove> <a href=\"http:\/\/www.example.com\">www.example.com<\/a> <\/esi:remove> Keep this'",100],".",["T_CONSTANT_ENCAPSED_STRING","\"<esi:remove>\\n <a>www.example.com<\/a> <\/esi:remove> And this\"",100],")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$esi",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","process",101],"(",["T_VARIABLE","$request",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$response",101],")",";",["T_WHITESPACE","\n\n        ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertEquals",103],"(",["T_CONSTANT_ENCAPSED_STRING","' Keep this And this'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$response",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getContent",103],"(",")",")",";",["T_WHITESPACE","\n    ",103],"}",["T_WHITESPACE","\n\n    ",104],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","testCommentTagsAreRemoved",106],"(",")",["T_WHITESPACE","\n    ",106],"{",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$esi",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_NEW","new",108],["T_WHITESPACE"," ",108],["T_STRING","Esi",108],"(",")",";",["T_WHITESPACE","\n\n        ",108],["T_VARIABLE","$request",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Request",110],["T_DOUBLE_COLON","::",110],["T_STRING","create",110],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",110],")",";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$response",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_NEW","new",111],["T_WHITESPACE"," ",111],["T_STRING","Response",111],"(",["T_CONSTANT_ENCAPSED_STRING","'<esi:comment text=\"some comment &gt;\" \/> Keep this'",111],")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$esi",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","process",112],"(",["T_VARIABLE","$request",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$response",112],")",";",["T_WHITESPACE","\n\n        ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertEquals",114],"(",["T_CONSTANT_ENCAPSED_STRING","' Keep this'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$response",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getContent",114],"(",")",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n\n    ",115],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","testProcess",117],"(",")",["T_WHITESPACE","\n    ",117],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$esi",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Esi",119],"(",")",";",["T_WHITESPACE","\n\n        ",119],["T_VARIABLE","$request",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","Request",121],["T_DOUBLE_COLON","::",121],["T_STRING","create",121],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$response",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_NEW","new",122],["T_WHITESPACE"," ",122],["T_STRING","Response",122],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:comment text=\"some comment\" \/><esi:include src=\"...\" alt=\"alt\" onerror=\"continue\" \/>'",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$esi",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","process",123],"(",["T_VARIABLE","$request",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$response",123],")",";",["T_WHITESPACE","\n\n        ",123],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertEquals",125],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <?php echo $this->surrogate->handle($this, \\'...\\', \\'alt\\', true) ?>'",125],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$response",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getContent",125],"(",")",")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEquals",126],"(",["T_CONSTANT_ENCAPSED_STRING","'ESI'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$response",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","headers",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",126],")",")",";",["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$response",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_STRING","Response",128],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:comment text=\"some comment\" \/><esi:include src=\"foo\\'\" alt=\"bar\\'\" onerror=\"continue\" \/>'",128],")",";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$esi",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","process",129],"(",["T_VARIABLE","$request",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$response",129],")",";",["T_WHITESPACE","\n\n        ",129],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEquals",131],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <?php echo $this->surrogate->handle($this, \\'foo\\\\\\'\\', \\'bar\\\\\\'\\', true) ?>'",131],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$response",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getContent",131],"(",")",")",";",["T_WHITESPACE","\n\n        ",131],["T_VARIABLE","$response",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_NEW","new",133],["T_WHITESPACE"," ",133],["T_STRING","Response",133],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:include src=\"...\" \/>'",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$esi",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","process",134],"(",["T_VARIABLE","$request",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$response",134],")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEquals",136],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <?php echo $this->surrogate->handle($this, \\'...\\', \\'\\', false) ?>'",136],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$response",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getContent",136],"(",")",")",";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$response",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_NEW","new",138],["T_WHITESPACE"," ",138],["T_STRING","Response",138],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:include src=\"...\"><\/esi:include>'",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$esi",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","process",139],"(",["T_VARIABLE","$request",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$response",139],")",";",["T_WHITESPACE","\n\n        ",139],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertEquals",141],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <?php echo $this->surrogate->handle($this, \\'...\\', \\'\\', false) ?>'",141],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$response",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getContent",141],"(",")",")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testProcessEscapesPhpTags",144],"(",")",["T_WHITESPACE","\n    ",144],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$esi",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_NEW","new",146],["T_WHITESPACE"," ",146],["T_STRING","Esi",146],"(",")",";",["T_WHITESPACE","\n\n        ",146],["T_VARIABLE","$request",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Request",148],["T_DOUBLE_COLON","::",148],["T_STRING","create",148],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",148],")",";",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$response",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_NEW","new",149],["T_WHITESPACE"," ",149],["T_STRING","Response",149],"(",["T_CONSTANT_ENCAPSED_STRING","'<?php <? <% <script language=php>'",149],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$esi",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","process",150],"(",["T_VARIABLE","$request",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$response",150],")",";",["T_WHITESPACE","\n\n        ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEquals",152],"(",["T_CONSTANT_ENCAPSED_STRING","'<?php echo \"<?\"; ?>php <?php echo \"<?\"; ?> <?php echo \"<%\"; ?> <?php echo \"<s\"; ?>cript language=php>'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$response",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getContent",152],"(",")",")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",155],["T_WHITESPACE","\n    ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","testProcessWhenNoSrcInAnEsi",158],"(",")",["T_WHITESPACE","\n    ",158],"{",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$esi",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_NEW","new",160],["T_WHITESPACE"," ",160],["T_STRING","Esi",160],"(",")",";",["T_WHITESPACE","\n\n        ",160],["T_VARIABLE","$request",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","Request",162],["T_DOUBLE_COLON","::",162],["T_STRING","create",162],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$response",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_STRING","Response",163],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:include \/>'",163],")",";",["T_WHITESPACE","\n        ",163],["T_VARIABLE","$esi",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","process",164],"(",["T_VARIABLE","$request",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$response",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","testProcessRemoveSurrogateControlHeader",167],"(",")",["T_WHITESPACE","\n    ",167],"{",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$esi",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_STRING","Esi",169],"(",")",";",["T_WHITESPACE","\n\n        ",169],["T_VARIABLE","$request",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","Request",171],["T_DOUBLE_COLON","::",171],["T_STRING","create",171],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$response",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Response",172],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <esi:include src=\"...\" \/>'",172],")",";",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$response",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","headers",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","set",173],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'content=\"ESI\/1.0\"'",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$esi",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","process",174],"(",["T_VARIABLE","$request",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$response",174],")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertEquals",175],"(",["T_CONSTANT_ENCAPSED_STRING","'ESI'",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$response",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","headers",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",175],")",")",";",["T_WHITESPACE","\n\n        ",175],["T_VARIABLE","$response",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","headers",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","set",177],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'no-store, content=\"ESI\/1.0\"'",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$esi",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","process",178],"(",["T_VARIABLE","$request",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$response",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertEquals",179],"(",["T_CONSTANT_ENCAPSED_STRING","'ESI'",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$response",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","headers",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","get",179],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",179],")",")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEquals",180],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$response",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","headers",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","get",180],"(",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",180],")",")",";",["T_WHITESPACE","\n\n        ",180],["T_VARIABLE","$response",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","headers",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","set",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'content=\"ESI\/1.0\", no-store'",182],")",";",["T_WHITESPACE","\n        ",182],["T_VARIABLE","$esi",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","process",183],"(",["T_VARIABLE","$request",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$response",183],")",";",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertEquals",184],"(",["T_CONSTANT_ENCAPSED_STRING","'ESI'",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$response",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","headers",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","get",184],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",184],")",")",";",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertEquals",185],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store'",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$response",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","headers",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","get",185],"(",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",185],")",")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","testHandle",188],"(",")",["T_WHITESPACE","\n    ",188],"{",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$esi",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_NEW","new",190],["T_WHITESPACE"," ",190],["T_STRING","Esi",190],"(",")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$cache",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getCache",191],"(",["T_STRING","Request",191],["T_DOUBLE_COLON","::",191],["T_STRING","create",191],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",191],")",",",["T_WHITESPACE"," ",191],["T_NEW","new",191],["T_WHITESPACE"," ",191],["T_STRING","Response",191],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",191],")",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEquals",192],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$esi",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","handle",192],"(",["T_VARIABLE","$cache",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'\/'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",192],",",["T_WHITESPACE"," ",192],["T_STRING","true",192],")",")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",195],["T_WHITESPACE","\n    ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","testHandleWhenResponseIsNot200",198],"(",")",["T_WHITESPACE","\n    ",198],"{",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$esi",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_NEW","new",200],["T_WHITESPACE"," ",200],["T_STRING","Esi",200],"(",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$response",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_NEW","new",201],["T_WHITESPACE"," ",201],["T_STRING","Response",201],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$response",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setStatusCode",202],"(",["T_LNUMBER","404",202],")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$cache",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getCache",203],"(",["T_STRING","Request",203],["T_DOUBLE_COLON","::",203],["T_STRING","create",203],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",203],")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$response",203],")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$esi",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","handle",204],"(",["T_VARIABLE","$cache",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'\/'",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",204],",",["T_WHITESPACE"," ",204],["T_STRING","false",204],")",";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_PUBLIC","public",207],["T_WHITESPACE"," ",207],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","testHandleWhenResponseIsNot200AndErrorsAreIgnored",207],"(",")",["T_WHITESPACE","\n    ",207],"{",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$esi",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","Esi",209],"(",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$response",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_NEW","new",210],["T_WHITESPACE"," ",210],["T_STRING","Response",210],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",210],")",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$response",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","setStatusCode",211],"(",["T_LNUMBER","404",211],")",";",["T_WHITESPACE","\n        ",211],["T_VARIABLE","$cache",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getCache",212],"(",["T_STRING","Request",212],["T_DOUBLE_COLON","::",212],["T_STRING","create",212],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",212],")",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$response",212],")",";",["T_WHITESPACE","\n        ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","assertEquals",213],"(",["T_CONSTANT_ENCAPSED_STRING","''",213],",",["T_WHITESPACE"," ",213],["T_VARIABLE","$esi",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","handle",213],"(",["T_VARIABLE","$cache",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",213],",",["T_WHITESPACE"," ",213],["T_STRING","true",213],")",")",";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","testHandleWhenResponseIsNot200AndAltIsPresent",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$esi",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_NEW","new",218],["T_WHITESPACE"," ",218],["T_STRING","Esi",218],"(",")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$response1",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_NEW","new",219],["T_WHITESPACE"," ",219],["T_STRING","Response",219],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",219],")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$response1",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","setStatusCode",220],"(",["T_LNUMBER","404",220],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$response2",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_NEW","new",221],["T_WHITESPACE"," ",221],["T_STRING","Response",221],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",221],")",";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$cache",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getCache",222],"(",["T_STRING","Request",222],["T_DOUBLE_COLON","::",222],["T_STRING","create",222],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",222],")",",",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_VARIABLE","$response1",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$response2",222],")",")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertEquals",223],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$esi",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","handle",223],"(",["T_VARIABLE","$cache",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'\/'",223],",",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",223],",",["T_WHITESPACE"," ",223],["T_STRING","false",223],")",")",";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","getCache",226],"(",["T_VARIABLE","$request",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$response",226],")",["T_WHITESPACE","\n    ",226],"{",["T_WHITESPACE","\n        ",227],["T_VARIABLE","$cache",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getMockBuilder",228],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\HttpCache\\HttpCache'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","setMethods",228],"(",["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'handle'",228],")",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","disableOriginalConstructor",228],"(",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","getMock",228],"(",")",";",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$cache",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","expects",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","any",229],"(",")",")",["T_WHITESPACE","\n              ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","method",230],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",230],")",["T_WHITESPACE","\n              ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","will",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","returnValue",231],"(",["T_VARIABLE","$request",231],")",")",["T_WHITESPACE","\n        ",231],";",["T_WHITESPACE","\n        ",232],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_STRING","is_array",233],"(",["T_VARIABLE","$response",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$cache",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","expects",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","any",234],"(",")",")",["T_WHITESPACE","\n                  ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","method",235],"(",["T_CONSTANT_ENCAPSED_STRING","'handle'",235],")",["T_WHITESPACE","\n                  ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","will",236],"(",["T_STRING","call_user_func_array",236],"(",["T_ARRAY","array",236],"(",["T_VARIABLE","$this",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'onConsecutiveCalls'",236],")",",",["T_WHITESPACE"," ",236],["T_VARIABLE","$response",236],")",")",["T_WHITESPACE","\n            ",236],";",["T_WHITESPACE","\n        ",237],"}",["T_WHITESPACE"," ",238],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n            ",238],["T_VARIABLE","$cache",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","expects",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","any",239],"(",")",")",["T_WHITESPACE","\n                  ",239],["T_OBJECT_OPERATOR","->",240],["T_STRING","method",240],"(",["T_CONSTANT_ENCAPSED_STRING","'handle'",240],")",["T_WHITESPACE","\n                  ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","will",241],"(",["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","returnValue",241],"(",["T_VARIABLE","$response",241],")",")",["T_WHITESPACE","\n            ",241],";",["T_WHITESPACE","\n        ",242],"}",["T_WHITESPACE","\n\n        ",243],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$cache",245],";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n",246],"}",["T_WHITESPACE","\n",247]]
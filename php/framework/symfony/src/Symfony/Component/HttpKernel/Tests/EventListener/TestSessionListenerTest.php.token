[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpKernel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EventListener",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Response",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernelInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpKernel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Event",17],["T_NS_SEPARATOR","\\",17],["T_STRING","FilterResponseEvent",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpFoundation",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Session",18],["T_NS_SEPARATOR","\\",18],["T_STRING","SessionInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * SessionListenerTest.\n *\n * Tests SessionListener.\n *\n * @author Bulat Shakirzyanov <mallluhuct@gmail.com>\n *\/",20],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","TestSessionListenerTest",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","PHPUnit_Framework_TestCase",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * @var TestSessionListener\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PRIVATE","private",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$listener",32],";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/**\n     * @var SessionInterface\n     *\/",34],["T_WHITESPACE","\n    ",36],["T_PRIVATE","private",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$session",37],";",["T_WHITESPACE","\n\n    ",37],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE","\n    ",39],"{",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","listener",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getMockForAbstractClass",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\EventListener\\TestSessionListener'",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","session",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getSession",42],"(",")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n\n    ",43],["T_PUBLIC","public",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","testShouldSaveMasterRequestSession",45],"(",")",["T_WHITESPACE","\n    ",45],"{",["T_WHITESPACE","\n        ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","sessionHasBeenStarted",47],"(",")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","sessionMustBeSaved",48],"(",")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","filterResponse",50],"(",["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","Request",50],"(",")",")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testShouldNotSaveSubRequestSession",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","sessionMustNotBeSaved",55],"(",")",";",["T_WHITESPACE","\n\n        ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","filterResponse",57],"(",["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","Request",57],"(",")",",",["T_WHITESPACE"," ",57],["T_STRING","HttpKernelInterface",57],["T_DOUBLE_COLON","::",57],["T_STRING","SUB_REQUEST",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n\n    ",58],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testDoesNotDeleteCookieIfUsingSessionLifetime",60],"(",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","sessionHasBeenStarted",62],"(",")",";",["T_WHITESPACE","\n\n        ",62],["T_VARIABLE","$params",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","session_get_cookie_params",64],"(",")",";",["T_WHITESPACE","\n        ",64],["T_STRING","session_set_cookie_params",65],"(",["T_LNUMBER","0",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",65],"]",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],"[",["T_CONSTANT_ENCAPSED_STRING","'domain'",65],"]",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],"[",["T_CONSTANT_ENCAPSED_STRING","'secure'",65],"]",",",["T_WHITESPACE"," ",65],["T_VARIABLE","$params",65],"[",["T_CONSTANT_ENCAPSED_STRING","'httponly'",65],"]",")",";",["T_WHITESPACE","\n\n        ",65],["T_VARIABLE","$response",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","filterResponse",67],"(",["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","Request",67],"(",")",",",["T_WHITESPACE"," ",67],["T_STRING","HttpKernelInterface",67],["T_DOUBLE_COLON","::",67],["T_STRING","MASTER_REQUEST",67],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$cookies",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$response",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","headers",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getCookies",68],"(",")",";",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEquals",70],"(",["T_LNUMBER","0",70],",",["T_WHITESPACE"," ",70],["T_STRING","reset",70],"(",["T_VARIABLE","$cookies",70],")",["T_OBJECT_OPERATOR","->",70],["T_STRING","getExpiresTime",70],"(",")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testUnstartedSessionIsNotSave",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","sessionHasNotBeenStarted",75],"(",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","sessionMustNotBeSaved",76],"(",")",";",["T_WHITESPACE","\n\n        ",76],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","filterResponse",78],"(",["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_STRING","Request",78],"(",")",")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_PRIVATE","private",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","filterResponse",81],"(",["T_STRING","Request",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$request",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$type",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","HttpKernelInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","MASTER_REQUEST",81],")",["T_WHITESPACE","\n    ",81],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$request",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","setSession",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","session",83],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$response",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","Response",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_VARIABLE","$kernel",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getMockBuilder",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\HttpKernelInterface'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","getMock",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$event",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","FilterResponseEvent",86],"(",["T_VARIABLE","$kernel",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$request",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$type",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$response",86],")",";",["T_WHITESPACE","\n\n        ",86],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","listener",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","onKernelResponse",88],"(",["T_VARIABLE","$event",88],")",";",["T_WHITESPACE","\n\n        ",88],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertSame",90],"(",["T_VARIABLE","$response",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$event",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getResponse",90],"(",")",")",";",["T_WHITESPACE","\n\n        ",90],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$response",92],";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_PRIVATE","private",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","sessionMustNotBeSaved",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","session",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","never",97],"(",")",")",["T_WHITESPACE","\n            ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","method",98],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_PRIVATE","private",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","sessionMustBeSaved",101],"(",")",["T_WHITESPACE","\n    ",101],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","session",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","expects",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","once",103],"(",")",")",["T_WHITESPACE","\n            ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","method",104],"(",["T_CONSTANT_ENCAPSED_STRING","'save'",104],")",";",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n\n    ",105],["T_PRIVATE","private",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","sessionHasBeenStarted",107],"(",")",["T_WHITESPACE","\n    ",107],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","session",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","expects",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","once",109],"(",")",")",["T_WHITESPACE","\n            ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","method",110],"(",["T_CONSTANT_ENCAPSED_STRING","'isStarted'",110],")",["T_WHITESPACE","\n            ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","will",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","returnValue",111],"(",["T_STRING","true",111],")",")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_PRIVATE","private",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","sessionHasNotBeenStarted",114],"(",")",["T_WHITESPACE","\n    ",114],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","session",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","expects",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","once",116],"(",")",")",["T_WHITESPACE","\n            ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","method",117],"(",["T_CONSTANT_ENCAPSED_STRING","'isStarted'",117],")",["T_WHITESPACE","\n            ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","will",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","returnValue",118],"(",["T_STRING","false",118],")",")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_PRIVATE","private",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getSession",121],"(",")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$mock",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getMockBuilder",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Session'",123],")",["T_WHITESPACE","\n            ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","disableOriginalConstructor",124],"(",")",["T_WHITESPACE","\n            ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","getMock",125],"(",")",";",["T_WHITESPACE","\n\n        ",125],["T_COMMENT","\/\/ set return value for getName()\n",127],["T_WHITESPACE","        ",128],["T_VARIABLE","$mock",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","expects",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","any",128],"(",")",")",["T_OBJECT_OPERATOR","->",128],["T_STRING","method",128],"(",["T_CONSTANT_ENCAPSED_STRING","'getName'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","will",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","returnValue",128],"(",["T_CONSTANT_ENCAPSED_STRING","'MOCKSESSID'",128],")",")",";",["T_WHITESPACE","\n\n        ",128],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$mock",130],";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n",131],"}",["T_WHITESPACE","\n",132]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpKernel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EventListener",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpKernel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventListener",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ResponseListener",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpFoundation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Response",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpKernel",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpKernelInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpKernel",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Event",18],["T_NS_SEPARATOR","\\",18],["T_STRING","FilterResponseEvent",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpKernel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","KernelEvents",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","EventDispatcher",20],["T_NS_SEPARATOR","\\",20],["T_STRING","EventDispatcher",20],";",["T_WHITESPACE","\n\n",20],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","ResponseListenerTest",22],["T_WHITESPACE"," ",22],["T_EXTENDS","extends",22],["T_WHITESPACE"," ",22],["T_NS_SEPARATOR","\\",22],["T_STRING","PHPUnit_Framework_TestCase",22],["T_WHITESPACE","\n",22],"{",["T_WHITESPACE","\n    ",23],["T_PRIVATE","private",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$dispatcher",24],";",["T_WHITESPACE","\n\n    ",24],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$kernel",26],";",["T_WHITESPACE","\n\n    ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE","\n    ",28],"{",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","dispatcher",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_NEW","new",30],["T_WHITESPACE"," ",30],["T_STRING","EventDispatcher",30],"(",")",";",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$listener",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_NEW","new",31],["T_WHITESPACE"," ",31],["T_STRING","ResponseListener",31],"(",["T_CONSTANT_ENCAPSED_STRING","'UTF-8'",31],")",";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","dispatcher",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","addListener",32],"(",["T_STRING","KernelEvents",32],["T_DOUBLE_COLON","::",32],["T_STRING","RESPONSE",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_VARIABLE","$listener",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'onKernelResponse'",32],")",")",";",["T_WHITESPACE","\n\n        ",32],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","kernel",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","getMockBuilder",34],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\HttpKernelInterface'",34],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","getMock",34],"(",")",";",["T_WHITESPACE","\n    ",34],"}",["T_WHITESPACE","\n\n    ",35],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","tearDown",37],"(",")",["T_WHITESPACE","\n    ",37],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","dispatcher",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","null",39],";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","kernel",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","null",40],";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","testFilterDoesNothingForSubRequests",43],"(",")",["T_WHITESPACE","\n    ",43],"{",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$response",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NEW","new",45],["T_WHITESPACE"," ",45],["T_STRING","Response",45],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",45],")",";",["T_WHITESPACE","\n\n        ",45],["T_VARIABLE","$event",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","FilterResponseEvent",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","kernel",47],",",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_STRING","Request",47],"(",")",",",["T_WHITESPACE"," ",47],["T_STRING","HttpKernelInterface",47],["T_DOUBLE_COLON","::",47],["T_STRING","SUB_REQUEST",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$response",47],")",";",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","dispatcher",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","dispatch",48],"(",["T_STRING","KernelEvents",48],["T_DOUBLE_COLON","::",48],["T_STRING","RESPONSE",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$event",48],")",";",["T_WHITESPACE","\n\n        ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertEquals",50],"(",["T_CONSTANT_ENCAPSED_STRING","''",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$event",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getResponse",50],"(",")",["T_OBJECT_OPERATOR","->",50],["T_STRING","headers",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'content-type'",50],")",")",";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","testFilterSetsNonDefaultCharsetIfNotOverridden",53],"(",")",["T_WHITESPACE","\n    ",53],"{",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$listener",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_STRING","ResponseListener",55],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-15'",55],")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","dispatcher",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","addListener",56],"(",["T_STRING","KernelEvents",56],["T_DOUBLE_COLON","::",56],["T_STRING","RESPONSE",56],",",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_VARIABLE","$listener",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'onKernelResponse'",56],")",",",["T_WHITESPACE"," ",56],["T_LNUMBER","1",56],")",";",["T_WHITESPACE","\n\n        ",56],["T_VARIABLE","$response",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","Response",58],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$event",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_NEW","new",60],["T_WHITESPACE"," ",60],["T_STRING","FilterResponseEvent",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","kernel",60],",",["T_WHITESPACE"," ",60],["T_STRING","Request",60],["T_DOUBLE_COLON","::",60],["T_STRING","create",60],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",60],")",",",["T_WHITESPACE"," ",60],["T_STRING","HttpKernelInterface",60],["T_DOUBLE_COLON","::",60],["T_STRING","MASTER_REQUEST",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$response",60],")",";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","dispatcher",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","dispatch",61],"(",["T_STRING","KernelEvents",61],["T_DOUBLE_COLON","::",61],["T_STRING","RESPONSE",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$event",61],")",";",["T_WHITESPACE","\n\n        ",61],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertEquals",63],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-15'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$response",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getCharset",63],"(",")",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","testFilterDoesNothingIfCharsetIsOverridden",66],"(",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$listener",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","ResponseListener",68],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-15'",68],")",";",["T_WHITESPACE","\n        ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","dispatcher",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","addListener",69],"(",["T_STRING","KernelEvents",69],["T_DOUBLE_COLON","::",69],["T_STRING","RESPONSE",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_VARIABLE","$listener",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'onKernelResponse'",69],")",",",["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],")",";",["T_WHITESPACE","\n\n        ",69],["T_VARIABLE","$response",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","Response",71],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$response",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setCharset",72],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-1'",72],")",";",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$event",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","FilterResponseEvent",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","kernel",74],",",["T_WHITESPACE"," ",74],["T_STRING","Request",74],["T_DOUBLE_COLON","::",74],["T_STRING","create",74],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",74],")",",",["T_WHITESPACE"," ",74],["T_STRING","HttpKernelInterface",74],["T_DOUBLE_COLON","::",74],["T_STRING","MASTER_REQUEST",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$response",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","dispatcher",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","dispatch",75],"(",["T_STRING","KernelEvents",75],["T_DOUBLE_COLON","::",75],["T_STRING","RESPONSE",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$event",75],")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEquals",77],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-1'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$response",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getCharset",77],"(",")",")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testFiltersSetsNonDefaultCharsetIfNotOverriddenOnNonTextContentType",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$listener",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","ResponseListener",82],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-15'",82],")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","dispatcher",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","addListener",83],"(",["T_STRING","KernelEvents",83],["T_DOUBLE_COLON","::",83],["T_STRING","RESPONSE",83],",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_VARIABLE","$listener",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'onKernelResponse'",83],")",",",["T_WHITESPACE"," ",83],["T_LNUMBER","1",83],")",";",["T_WHITESPACE","\n\n        ",83],["T_VARIABLE","$response",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","Response",85],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",85],")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$request",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","Request",86],["T_DOUBLE_COLON","::",86],["T_STRING","create",86],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$request",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","setRequestFormat",87],"(",["T_CONSTANT_ENCAPSED_STRING","'application\/json'",87],")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$event",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_NEW","new",89],["T_WHITESPACE"," ",89],["T_STRING","FilterResponseEvent",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","kernel",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$request",89],",",["T_WHITESPACE"," ",89],["T_STRING","HttpKernelInterface",89],["T_DOUBLE_COLON","::",89],["T_STRING","MASTER_REQUEST",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$response",89],")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","dispatcher",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","dispatch",90],"(",["T_STRING","KernelEvents",90],["T_DOUBLE_COLON","::",90],["T_STRING","RESPONSE",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$event",90],")",";",["T_WHITESPACE","\n\n        ",90],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertEquals",92],"(",["T_CONSTANT_ENCAPSED_STRING","'ISO-8859-15'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$response",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getCharset",92],"(",")",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n",93],"}",["T_WHITESPACE","\n",94]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpKernel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpCache",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Request",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Response",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpCache",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Ssi",16],";",["T_WHITESPACE","\n\n",16],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","SsiTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_NS_SEPARATOR","\\",18],["T_STRING","PHPUnit_Framework_TestCase",18],["T_WHITESPACE","\n",18],"{",["T_WHITESPACE","\n    ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","testHasSurrogateSsiCapability",20],"(",")",["T_WHITESPACE","\n    ",20],"{",["T_WHITESPACE","\n        ",21],["T_VARIABLE","$ssi",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_NEW","new",22],["T_WHITESPACE"," ",22],["T_STRING","Ssi",22],"(",")",";",["T_WHITESPACE","\n\n        ",22],["T_VARIABLE","$request",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","Request",24],["T_DOUBLE_COLON","::",24],["T_STRING","create",24],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",24],")",";",["T_WHITESPACE","\n        ",24],["T_VARIABLE","$request",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","headers",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","set",25],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'abc=\"SSI\/1.0\"'",25],")",";",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","assertTrue",26],"(",["T_VARIABLE","$ssi",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","hasSurrogateCapability",26],"(",["T_VARIABLE","$request",26],")",")",";",["T_WHITESPACE","\n\n        ",26],["T_VARIABLE","$request",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","Request",28],["T_DOUBLE_COLON","::",28],["T_STRING","create",28],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",28],")",";",["T_WHITESPACE","\n        ",28],["T_VARIABLE","$request",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","headers",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","set",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'foobar'",29],")",";",["T_WHITESPACE","\n        ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertFalse",30],"(",["T_VARIABLE","$ssi",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","hasSurrogateCapability",30],"(",["T_VARIABLE","$request",30],")",")",";",["T_WHITESPACE","\n\n        ",30],["T_VARIABLE","$request",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","Request",32],["T_DOUBLE_COLON","::",32],["T_STRING","create",32],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",32],")",";",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertFalse",33],"(",["T_VARIABLE","$ssi",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","hasSurrogateCapability",33],"(",["T_VARIABLE","$request",33],")",")",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n\n    ",34],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testAddSurrogateSsiCapability",36],"(",")",["T_WHITESPACE","\n    ",36],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$ssi",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","Ssi",38],"(",")",";",["T_WHITESPACE","\n\n        ",38],["T_VARIABLE","$request",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Request",40],["T_DOUBLE_COLON","::",40],["T_STRING","create",40],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",40],")",";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$ssi",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","addSurrogateCapability",41],"(",["T_VARIABLE","$request",41],")",";",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertEquals",42],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony=\"SSI\/1.0\"'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$request",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","headers",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",42],")",")",";",["T_WHITESPACE","\n\n        ",42],["T_VARIABLE","$ssi",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","addSurrogateCapability",44],"(",["T_VARIABLE","$request",44],")",";",["T_WHITESPACE","\n        ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertEquals",45],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony=\"SSI\/1.0\", symfony=\"SSI\/1.0\"'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$request",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","headers",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Capability'",45],")",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","testAddSurrogateControl",48],"(",")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$ssi",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_STRING","Ssi",50],"(",")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$response",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","Response",52],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <!--#include virtual=\"\" -->'",52],")",";",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$ssi",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","addSurrogateControl",53],"(",["T_VARIABLE","$response",53],")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertEquals",54],"(",["T_CONSTANT_ENCAPSED_STRING","'content=\"SSI\/1.0\"'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$response",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","headers",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",54],")",")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$response",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","Response",56],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",56],")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$ssi",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addSurrogateControl",57],"(",["T_VARIABLE","$response",57],")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEquals",58],"(",["T_CONSTANT_ENCAPSED_STRING","''",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$response",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","headers",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",58],")",")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n\n    ",59],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testNeedsSsiParsing",61],"(",")",["T_WHITESPACE","\n    ",61],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$ssi",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","Ssi",63],"(",")",";",["T_WHITESPACE","\n\n        ",63],["T_VARIABLE","$response",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","Response",65],"(",")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$response",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","headers",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","set",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'content=\"SSI\/1.0\"'",66],")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_VARIABLE","$ssi",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","needsParsing",67],"(",["T_VARIABLE","$response",67],")",")",";",["T_WHITESPACE","\n\n        ",67],["T_VARIABLE","$response",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","Response",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertFalse",70],"(",["T_VARIABLE","$ssi",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","needsParsing",70],"(",["T_VARIABLE","$response",70],")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n\n    ",71],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testRenderIncludeTag",73],"(",")",["T_WHITESPACE","\n    ",73],"{",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$ssi",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_NEW","new",75],["T_WHITESPACE"," ",75],["T_STRING","Ssi",75],"(",")",";",["T_WHITESPACE","\n\n        ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEquals",77],"(",["T_CONSTANT_ENCAPSED_STRING","'<!--#include virtual=\"\/\" -->'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$ssi",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","renderIncludeTag",77],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",77],",",["T_WHITESPACE"," ",77],["T_STRING","true",77],")",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEquals",78],"(",["T_CONSTANT_ENCAPSED_STRING","'<!--#include virtual=\"\/\" -->'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$ssi",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","renderIncludeTag",78],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",78],",",["T_WHITESPACE"," ",78],["T_STRING","false",78],")",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEquals",79],"(",["T_CONSTANT_ENCAPSED_STRING","'<!--#include virtual=\"\/\" -->'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$ssi",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","renderIncludeTag",79],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",79],")",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","testProcessDoesNothingIfContentTypeIsNotHtml",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$ssi",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","Ssi",84],"(",")",";",["T_WHITESPACE","\n\n        ",84],["T_VARIABLE","$request",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","Request",86],["T_DOUBLE_COLON","::",86],["T_STRING","create",86],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",86],")",";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$response",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_STRING","Response",87],"(",")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$response",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","headers",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","set",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'text\/plain'",88],")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$ssi",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","process",89],"(",["T_VARIABLE","$request",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$response",89],")",";",["T_WHITESPACE","\n\n        ",89],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertFalse",91],"(",["T_VARIABLE","$response",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","headers",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","has",91],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",91],")",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testProcess",94],"(",")",["T_WHITESPACE","\n    ",94],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$ssi",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_NEW","new",96],["T_WHITESPACE"," ",96],["T_STRING","Ssi",96],"(",")",";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$request",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","Request",98],["T_DOUBLE_COLON","::",98],["T_STRING","create",98],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",98],")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$response",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","Response",99],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <!--#include virtual=\"...\" -->'",99],")",";",["T_WHITESPACE","\n        ",99],["T_VARIABLE","$ssi",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","process",100],"(",["T_VARIABLE","$request",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$response",100],")",";",["T_WHITESPACE","\n\n        ",100],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEquals",102],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <?php echo $this->surrogate->handle($this, \\'...\\', \\'\\', false) ?>'",102],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$response",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getContent",102],"(",")",")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertEquals",103],"(",["T_CONSTANT_ENCAPSED_STRING","'SSI'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$response",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","headers",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",103],")",")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$response",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","Response",105],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <!--#include virtual=\"foo\\'\" -->'",105],")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$ssi",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","process",106],"(",["T_VARIABLE","$request",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$response",106],")",";",["T_WHITESPACE","\n\n        ",106],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertEquals",108],"(",["T_CONSTANT_ENCAPSED_STRING","\"foo <?php echo \\$this->surrogate->handle(\\$this, 'foo\\\\'', '', false) ?>\"",108],".",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$response",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getContent",108],"(",")",")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_PUBLIC","public",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","testProcessEscapesPhpTags",111],"(",")",["T_WHITESPACE","\n    ",111],"{",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$ssi",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","Ssi",113],"(",")",";",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$request",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","Request",115],["T_DOUBLE_COLON","::",115],["T_STRING","create",115],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",115],")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$response",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_STRING","Response",116],"(",["T_CONSTANT_ENCAPSED_STRING","'<?php <? <% <script language=php>'",116],")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$ssi",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","process",117],"(",["T_VARIABLE","$request",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$response",117],")",";",["T_WHITESPACE","\n\n        ",117],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEquals",119],"(",["T_CONSTANT_ENCAPSED_STRING","'<?php echo \"<?\"; ?>php <?php echo \"<?\"; ?> <?php echo \"<%\"; ?> <?php echo \"<s\"; ?>cript language=php>'",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$response",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getContent",119],"(",")",")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",122],["T_WHITESPACE","\n    ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testProcessWhenNoSrcInAnSsi",125],"(",")",["T_WHITESPACE","\n    ",125],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$ssi",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_NEW","new",127],["T_WHITESPACE"," ",127],["T_STRING","Ssi",127],"(",")",";",["T_WHITESPACE","\n\n        ",127],["T_VARIABLE","$request",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Request",129],["T_DOUBLE_COLON","::",129],["T_STRING","create",129],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",129],")",";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$response",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_NEW","new",130],["T_WHITESPACE"," ",130],["T_STRING","Response",130],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <!--#include -->'",130],")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$ssi",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","process",131],"(",["T_VARIABLE","$request",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$response",131],")",";",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_PUBLIC","public",134],["T_WHITESPACE"," ",134],["T_FUNCTION","function",134],["T_WHITESPACE"," ",134],["T_STRING","testProcessRemoveSurrogateControlHeader",134],"(",")",["T_WHITESPACE","\n    ",134],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$ssi",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_STRING","Ssi",136],"(",")",";",["T_WHITESPACE","\n\n        ",136],["T_VARIABLE","$request",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","Request",138],["T_DOUBLE_COLON","::",138],["T_STRING","create",138],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",138],")",";",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$response",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Response",139],"(",["T_CONSTANT_ENCAPSED_STRING","'foo <!--#include virtual=\"...\" -->'",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$response",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","headers",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","set",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'content=\"SSI\/1.0\"'",140],")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$ssi",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","process",141],"(",["T_VARIABLE","$request",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$response",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertEquals",142],"(",["T_CONSTANT_ENCAPSED_STRING","'SSI'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$response",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","headers",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","get",142],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",142],")",")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$response",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","headers",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","set",144],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'no-store, content=\"SSI\/1.0\"'",144],")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$ssi",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","process",145],"(",["T_VARIABLE","$request",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$response",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertEquals",146],"(",["T_CONSTANT_ENCAPSED_STRING","'SSI'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$response",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","headers",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",146],")",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertEquals",147],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$response",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","headers",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",147],")",")",";",["T_WHITESPACE","\n\n        ",147],["T_VARIABLE","$response",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","headers",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","set",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'content=\"SSI\/1.0\", no-store'",149],")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$ssi",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","process",150],"(",["T_VARIABLE","$request",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$response",150],")",";",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEquals",151],"(",["T_CONSTANT_ENCAPSED_STRING","'SSI'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$response",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","headers",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","get",151],"(",["T_CONSTANT_ENCAPSED_STRING","'x-body-eval'",151],")",")",";",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEquals",152],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store'",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$response",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","headers",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","get",152],"(",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",152],")",")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testHandle",155],"(",")",["T_WHITESPACE","\n    ",155],"{",["T_WHITESPACE","\n        ",156],["T_VARIABLE","$ssi",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_NEW","new",157],["T_WHITESPACE"," ",157],["T_STRING","Ssi",157],"(",")",";",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$cache",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getCache",158],"(",["T_STRING","Request",158],["T_DOUBLE_COLON","::",158],["T_STRING","create",158],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",158],")",",",["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","Response",158],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",158],")",")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertEquals",159],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$ssi",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","handle",159],"(",["T_VARIABLE","$cache",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\/'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",159],",",["T_WHITESPACE"," ",159],["T_STRING","true",159],")",")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n\n    ",160],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",162],["T_WHITESPACE","\n    ",164],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","testHandleWhenResponseIsNot200",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$ssi",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_NEW","new",167],["T_WHITESPACE"," ",167],["T_STRING","Ssi",167],"(",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$response",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","Response",168],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",168],")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$response",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setStatusCode",169],"(",["T_LNUMBER","404",169],")",";",["T_WHITESPACE","\n        ",169],["T_VARIABLE","$cache",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getCache",170],"(",["T_STRING","Request",170],["T_DOUBLE_COLON","::",170],["T_STRING","create",170],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",170],")",",",["T_WHITESPACE"," ",170],["T_VARIABLE","$response",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$ssi",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","handle",171],"(",["T_VARIABLE","$cache",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'\/'",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",171],",",["T_WHITESPACE"," ",171],["T_STRING","false",171],")",";",["T_WHITESPACE","\n    ",171],"}",["T_WHITESPACE","\n\n    ",172],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","testHandleWhenResponseIsNot200AndErrorsAreIgnored",174],"(",")",["T_WHITESPACE","\n    ",174],"{",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$ssi",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","Ssi",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$response",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","Response",177],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",177],")",";",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$response",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","setStatusCode",178],"(",["T_LNUMBER","404",178],")",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$cache",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getCache",179],"(",["T_STRING","Request",179],["T_DOUBLE_COLON","::",179],["T_STRING","create",179],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",179],")",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$response",179],")",";",["T_WHITESPACE","\n        ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEquals",180],"(",["T_CONSTANT_ENCAPSED_STRING","''",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$ssi",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","handle",180],"(",["T_VARIABLE","$cache",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'\/'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",180],",",["T_WHITESPACE"," ",180],["T_STRING","true",180],")",")",";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","testHandleWhenResponseIsNot200AndAltIsPresent",183],"(",")",["T_WHITESPACE","\n    ",183],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$ssi",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_NEW","new",185],["T_WHITESPACE"," ",185],["T_STRING","Ssi",185],"(",")",";",["T_WHITESPACE","\n        ",185],["T_VARIABLE","$response1",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_NEW","new",186],["T_WHITESPACE"," ",186],["T_STRING","Response",186],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",186],")",";",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$response1",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","setStatusCode",187],"(",["T_LNUMBER","404",187],")",";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$response2",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_NEW","new",188],["T_WHITESPACE"," ",188],["T_STRING","Response",188],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",188],")",";",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$cache",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getCache",189],"(",["T_STRING","Request",189],["T_DOUBLE_COLON","::",189],["T_STRING","create",189],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",189],")",",",["T_WHITESPACE"," ",189],["T_ARRAY","array",189],"(",["T_VARIABLE","$response1",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$response2",189],")",")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertEquals",190],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$ssi",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","handle",190],"(",["T_VARIABLE","$cache",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'\/'",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'\/alt'",190],",",["T_WHITESPACE"," ",190],["T_STRING","false",190],")",")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n\n    ",191],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","getCache",193],"(",["T_VARIABLE","$request",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$response",193],")",["T_WHITESPACE","\n    ",193],"{",["T_WHITESPACE","\n        ",194],["T_VARIABLE","$cache",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getMockBuilder",195],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpKernel\\HttpCache\\HttpCache'",195],")",["T_OBJECT_OPERATOR","->",195],["T_STRING","setMethods",195],"(",["T_ARRAY","array",195],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'handle'",195],")",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","disableOriginalConstructor",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","getMock",195],"(",")",";",["T_WHITESPACE","\n        ",195],["T_VARIABLE","$cache",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","expects",196],"(",["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","any",196],"(",")",")",["T_WHITESPACE","\n              ",196],["T_OBJECT_OPERATOR","->",197],["T_STRING","method",197],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequest'",197],")",["T_WHITESPACE","\n              ",197],["T_OBJECT_OPERATOR","->",198],["T_STRING","will",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","returnValue",198],"(",["T_VARIABLE","$request",198],")",")",["T_WHITESPACE","\n        ",198],";",["T_WHITESPACE","\n        ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_STRING","is_array",200],"(",["T_VARIABLE","$response",200],")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n            ",200],["T_VARIABLE","$cache",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","expects",201],"(",["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","any",201],"(",")",")",["T_WHITESPACE","\n                  ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","method",202],"(",["T_CONSTANT_ENCAPSED_STRING","'handle'",202],")",["T_WHITESPACE","\n                  ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","will",203],"(",["T_STRING","call_user_func_array",203],"(",["T_ARRAY","array",203],"(",["T_VARIABLE","$this",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'onConsecutiveCalls'",203],")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$response",203],")",")",["T_WHITESPACE","\n            ",203],";",["T_WHITESPACE","\n        ",204],"}",["T_WHITESPACE"," ",205],["T_ELSE","else",205],["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n            ",205],["T_VARIABLE","$cache",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","expects",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","any",206],"(",")",")",["T_WHITESPACE","\n                  ",206],["T_OBJECT_OPERATOR","->",207],["T_STRING","method",207],"(",["T_CONSTANT_ENCAPSED_STRING","'handle'",207],")",["T_WHITESPACE","\n                  ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","will",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","returnValue",208],"(",["T_VARIABLE","$response",208],")",")",["T_WHITESPACE","\n            ",208],";",["T_WHITESPACE","\n        ",209],"}",["T_WHITESPACE","\n\n        ",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$cache",212],";",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n",213],"}",["T_WHITESPACE","\n",214]]
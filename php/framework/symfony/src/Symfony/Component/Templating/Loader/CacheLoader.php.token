[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Templating",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Loader",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Templating",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Storage",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Storage",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Templating",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Storage",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FileStorage",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Templating",16],["T_NS_SEPARATOR","\\",16],["T_STRING","TemplateReferenceInterface",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * CacheLoader is a loader that caches other loaders responses\n * on the filesystem.\n *\n * This cache only caches on disk to allow PHP accelerators to cache the opcodes.\n * All other mechanism would imply the use of `eval()`.\n *\n * @author Fabien Potencier <fabien@symfony.com>\n *\/",18],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","CacheLoader",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","Loader",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$loader",29],";",["T_WHITESPACE","\n    ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$dir",30],";",["T_WHITESPACE","\n\n    ",30],["T_DOC_COMMENT","\/**\n     * Constructor.\n     *\n     * @param LoaderInterface $loader A Loader instance\n     * @param string          $dir    The directory where to store the cache files\n     *\/",32],["T_WHITESPACE","\n    ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_STRING","LoaderInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$loader",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$dir",38],")",["T_WHITESPACE","\n    ",38],"{",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","loader",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$loader",40],";",["T_WHITESPACE","\n        ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","dir",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$dir",41],";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/**\n     * Loads a template.\n     *\n     * @param TemplateReferenceInterface $template A template\n     *\n     * @return Storage|bool false if the template cannot be loaded, a Storage instance otherwise\n     *\/",44],["T_WHITESPACE","\n    ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","load",51],"(",["T_STRING","TemplateReferenceInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$template",51],")",["T_WHITESPACE","\n    ",51],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$key",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","hash",53],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$template",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getLogicalName",53],"(",")",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$dir",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","dir",54],".",["T_STRING","DIRECTORY_SEPARATOR",54],".",["T_STRING","substr",54],"(",["T_VARIABLE","$key",54],",",["T_WHITESPACE"," ",54],["T_LNUMBER","0",54],",",["T_WHITESPACE"," ",54],["T_LNUMBER","2",54],")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$file",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","substr",55],"(",["T_VARIABLE","$key",55],",",["T_WHITESPACE"," ",55],["T_LNUMBER","2",55],")",".",["T_CONSTANT_ENCAPSED_STRING","'.tpl'",55],";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$path",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$dir",56],".",["T_STRING","DIRECTORY_SEPARATOR",56],".",["T_VARIABLE","$file",56],";",["T_WHITESPACE","\n\n        ",56],["T_IF","if",58],["T_WHITESPACE"," ",58],"(",["T_STRING","is_file",58],"(",["T_VARIABLE","$path",58],")",")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n            ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_STRING","null",59],["T_WHITESPACE"," ",59],["T_IS_NOT_IDENTICAL","!==",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","logger",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n                ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","logger",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","debug",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Fetching template from cache.'",60],",",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$template",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",60],")",")",")",";",["T_WHITESPACE","\n            ",60],"}",["T_WHITESPACE","\n\n            ",61],["T_RETURN","return",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","FileStorage",63],"(",["T_VARIABLE","$path",63],")",";",["T_WHITESPACE","\n        ",63],"}",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(",["T_STRING","false",66],["T_WHITESPACE"," ",66],["T_IS_IDENTICAL","===",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$storage",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","loader",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_VARIABLE","$template",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_STRING","false",67],";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_VARIABLE","$content",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$storage",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getContent",70],"(",")",";",["T_WHITESPACE","\n\n        ",70],["T_IF","if",72],["T_WHITESPACE"," ",72],"(","!",["T_STRING","is_dir",72],"(",["T_VARIABLE","$dir",72],")",["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],"!","@",["T_STRING","mkdir",72],"(",["T_VARIABLE","$dir",72],",",["T_WHITESPACE"," ",72],["T_LNUMBER","0777",72],",",["T_WHITESPACE"," ",72],["T_STRING","true",72],")",["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],"!",["T_STRING","is_dir",72],"(",["T_VARIABLE","$dir",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n            ",72],["T_THROW","throw",73],["T_WHITESPACE"," ",73],["T_NEW","new",73],["T_WHITESPACE"," ",73],["T_NS_SEPARATOR","\\",73],["T_STRING","RuntimeException",73],"(",["T_STRING","sprintf",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache Loader was not able to create directory \"%s\"'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$dir",73],")",")",";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n\n        ",74],["T_STRING","file_put_contents",76],"(",["T_VARIABLE","$path",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$content",76],")",";",["T_WHITESPACE","\n\n        ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","null",78],["T_WHITESPACE"," ",78],["T_IS_NOT_IDENTICAL","!==",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","logger",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","logger",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","debug",79],"(",["T_CONSTANT_ENCAPSED_STRING","'Storing template in cache.'",79],",",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$template",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",79],")",")",")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE","\n\n        ",80],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","FileStorage",82],"(",["T_VARIABLE","$path",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * Returns true if the template is still fresh.\n     *\n     * @param TemplateReferenceInterface $template A template\n     * @param int                        $time     The last modification time of the cached template (timestamp)\n     *\n     * @return bool\n     *\/",85],["T_WHITESPACE","\n    ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","isFresh",93],"(",["T_STRING","TemplateReferenceInterface",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$template",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$time",93],")",["T_WHITESPACE","\n    ",93],"{",["T_WHITESPACE","\n        ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","loader",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isFresh",95],"(",["T_VARIABLE","$template",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$time",95],")",";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n",96],"}",["T_WHITESPACE","\n",97]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpFoundation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Session",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Storage",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Handler",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Storage",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Handler",14],["T_NS_SEPARATOR","\\",14],["T_STRING","MongoDbSessionHandler",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * @author Markus Bachmann <markus.bachmann@bachi.biz>\n * @group time-sensitive\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","MongoDbSessionHandlerTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","PHPUnit_Framework_TestCase",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/**\n     * @var \\PHPUnit_Framework_MockObject_MockObject\n     *\/",22],["T_WHITESPACE","\n    ",24],["T_PRIVATE","private",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$mongo",25],";",["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$storage",26],";",["T_WHITESPACE","\n    ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$options",27],";",["T_WHITESPACE","\n\n    ",27],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","setUp",29],"(",")",["T_WHITESPACE","\n    ",29],"{",["T_WHITESPACE","\n        ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n        ",31],["T_IF","if",33],["T_WHITESPACE"," ",33],"(","!",["T_STRING","extension_loaded",33],"(",["T_CONSTANT_ENCAPSED_STRING","'mongo'",33],")",["T_WHITESPACE"," ",33],["T_BOOLEAN_AND","&&",33],["T_WHITESPACE"," ",33],"!",["T_STRING","extension_loaded",33],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",33],")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n            ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","markTestSkipped",34],"(",["T_CONSTANT_ENCAPSED_STRING","'The Mongo or MongoDB extension is required.'",34],")",";",["T_WHITESPACE","\n        ",34],"}",["T_WHITESPACE","\n\n        ",35],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_STRING","phpversion",37],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",37],")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_VARIABLE","$mongoClass",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\Client'",38],";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE"," ",39],["T_ELSE","else",39],["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n            ",39],["T_VARIABLE","$mongoClass",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","version_compare",40],"(",["T_STRING","phpversion",40],"(",["T_CONSTANT_ENCAPSED_STRING","'mongo'",40],")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'1.3.0'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'<'",40],")",["T_WHITESPACE"," ",40],"?",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Mongo'",40],["T_WHITESPACE"," ",40],":",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'MongoClient'",40],";",["T_WHITESPACE","\n        ",40],"}",["T_WHITESPACE","\n\n        ",41],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","mongo",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getMockBuilder",43],"(",["T_VARIABLE","$mongoClass",43],")",["T_WHITESPACE","\n            ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","disableOriginalConstructor",44],"(",")",["T_WHITESPACE","\n            ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","getMock",45],"(",")",";",["T_WHITESPACE","\n\n        ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","options",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_WHITESPACE","\n            ",47],["T_CONSTANT_ENCAPSED_STRING","'id_field'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'_id'",48],",",["T_WHITESPACE","\n            ",48],["T_CONSTANT_ENCAPSED_STRING","'data_field'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'data'",49],",",["T_WHITESPACE","\n            ",49],["T_CONSTANT_ENCAPSED_STRING","'time_field'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'time'",50],",",["T_WHITESPACE","\n            ",50],["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'expires_at'",51],",",["T_WHITESPACE","\n            ",51],["T_CONSTANT_ENCAPSED_STRING","'database'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'sf2-test'",52],",",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'collection'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'session-test'",53],",",["T_WHITESPACE","\n        ",53],")",";",["T_WHITESPACE","\n\n        ",54],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","storage",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","MongoDbSessionHandler",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","mongo",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","options",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_DOC_COMMENT","\/**\n     * @expectedException \\InvalidArgumentException\n     *\/",59],["T_WHITESPACE","\n    ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testConstructorShouldThrowExceptionForInvalidMongo",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_STRING","MongoDbSessionHandler",64],"(",["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_NS_SEPARATOR","\\",64],["T_STRING","stdClass",64],"(",")",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","options",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_DOC_COMMENT","\/**\n     * @expectedException \\InvalidArgumentException\n     *\/",67],["T_WHITESPACE","\n    ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testConstructorShouldThrowExceptionForMissingOptions",70],"(",")",["T_WHITESPACE","\n    ",70],"{",["T_WHITESPACE","\n        ",71],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_STRING","MongoDbSessionHandler",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","mongo",72],",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",")",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","testOpenMethodAlwaysReturnTrue",75],"(",")",["T_WHITESPACE","\n    ",75],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertTrue",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","storage",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","open",77],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'test'",77],")",",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'The \"open\" method should always return true'",77],")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testCloseMethodAlwaysReturnTrue",80],"(",")",["T_WHITESPACE","\n    ",80],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertTrue",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","storage",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","close",82],"(",")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'The \"close\" method should always return true'",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testRead",85],"(",")",["T_WHITESPACE","\n    ",85],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$collection",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","createMongoCollectionMock",87],"(",")",";",["T_WHITESPACE","\n\n        ",87],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","mongo",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","expects",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","once",89],"(",")",")",["T_WHITESPACE","\n            ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",90],")",["T_WHITESPACE","\n            ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","with",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","options",91],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",91],"]",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","options",91],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",91],"]",")",["T_WHITESPACE","\n            ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","will",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","returnValue",92],"(",["T_VARIABLE","$collection",92],")",")",";",["T_WHITESPACE","\n\n        ",92],["T_COMMENT","\/\/ defining the timeout before the actual method call\n",94],["T_WHITESPACE","        ",95],["T_COMMENT","\/\/ allows to test for \"greater than\" values in the $criteria\n",95],["T_WHITESPACE","        ",96],["T_VARIABLE","$testTimeout",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","time",96],"(",")",["T_WHITESPACE"," ",96],"+",["T_WHITESPACE"," ",96],["T_LNUMBER","1",96],";",["T_WHITESPACE","\n\n        ",96],["T_VARIABLE","$collection",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","expects",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","once",98],"(",")",")",["T_WHITESPACE","\n            ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","method",99],"(",["T_CONSTANT_ENCAPSED_STRING","'findOne'",99],")",["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","will",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","returnCallback",100],"(",["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$criteria",100],")",["T_WHITESPACE"," ",100],["T_USE","use",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$testTimeout",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n                ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertArrayHasKey",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","options",101],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",101],"]",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$criteria",101],")",";",["T_WHITESPACE","\n                ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEquals",102],"(",["T_VARIABLE","$criteria",102],"[",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","options",102],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",102],"]","]",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'foo'",102],")",";",["T_WHITESPACE","\n\n                ",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertArrayHasKey",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","options",104],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",104],"]",",",["T_WHITESPACE"," ",104],["T_VARIABLE","$criteria",104],")",";",["T_WHITESPACE","\n                ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertArrayHasKey",105],"(",["T_CONSTANT_ENCAPSED_STRING","'$gte'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$criteria",105],"[",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","options",105],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",105],"]","]",")",";",["T_WHITESPACE","\n\n                ",105],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_STRING","phpversion",107],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n                    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertInstanceOf",108],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$criteria",108],"[",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","options",108],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",108],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$gte'",108],"]",")",";",["T_WHITESPACE","\n                    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertGreaterThanOrEqual",109],"(",["T_STRING","round",109],"(",["T_STRING","intval",109],"(",["T_STRING_CAST","(string)",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$criteria",109],"[",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","options",109],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",109],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$gte'",109],"]",")",["T_WHITESPACE"," ",109],"\/",["T_WHITESPACE"," ",109],["T_LNUMBER","1000",109],")",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$testTimeout",109],")",";",["T_WHITESPACE","\n                ",109],"}",["T_WHITESPACE"," ",110],["T_ELSE","else",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n                    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertInstanceOf",111],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$criteria",111],"[",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","options",111],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",111],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$gte'",111],"]",")",";",["T_WHITESPACE","\n                    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertGreaterThanOrEqual",112],"(",["T_VARIABLE","$criteria",112],"[",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","options",112],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",112],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$gte'",112],"]",["T_OBJECT_OPERATOR","->",112],["T_STRING","sec",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$testTimeout",112],")",";",["T_WHITESPACE","\n                ",112],"}",["T_WHITESPACE","\n\n                ",113],["T_VARIABLE","$fields",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n                    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",116],"]",["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'foo'",116],",",["T_WHITESPACE","\n                ",116],")",";",["T_WHITESPACE","\n\n                ",117],["T_IF","if",119],["T_WHITESPACE"," ",119],"(",["T_STRING","phpversion",119],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n                    ",119],["T_VARIABLE","$fields",120],"[",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","options",120],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",120],"]","]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_NEW","new",120],["T_WHITESPACE"," ",120],["T_NS_SEPARATOR","\\",120],["T_STRING","MongoDB",120],["T_NS_SEPARATOR","\\",120],["T_STRING","BSON",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Binary",120],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",120],",",["T_WHITESPACE"," ",120],["T_NS_SEPARATOR","\\",120],["T_STRING","MongoDB",120],["T_NS_SEPARATOR","\\",120],["T_STRING","BSON",120],["T_NS_SEPARATOR","\\",120],["T_STRING","Binary",120],["T_DOUBLE_COLON","::",120],["T_STRING","TYPE_OLD_BINARY",120],")",";",["T_WHITESPACE","\n                    ",120],["T_VARIABLE","$fields",121],"[",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","options",121],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",121],"]","]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_NEW","new",121],["T_WHITESPACE"," ",121],["T_NS_SEPARATOR","\\",121],["T_STRING","MongoDB",121],["T_NS_SEPARATOR","\\",121],["T_STRING","BSON",121],["T_NS_SEPARATOR","\\",121],["T_STRING","UTCDateTime",121],"(",["T_STRING","time",121],"(",")",["T_WHITESPACE"," ",121],"*",["T_WHITESPACE"," ",121],["T_LNUMBER","1000",121],")",";",["T_WHITESPACE","\n                ",121],"}",["T_WHITESPACE"," ",122],["T_ELSE","else",122],["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n                    ",122],["T_VARIABLE","$fields",123],"[",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","options",123],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",123],"]","]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","MongoBinData",123],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",123],",",["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","MongoBinData",123],["T_DOUBLE_COLON","::",123],["T_STRING","BYTE_ARRAY",123],")",";",["T_WHITESPACE","\n                    ",123],["T_VARIABLE","$fields",124],"[",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","options",124],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",124],"]","]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_NEW","new",124],["T_WHITESPACE"," ",124],["T_NS_SEPARATOR","\\",124],["T_STRING","MongoDate",124],"(",")",";",["T_WHITESPACE","\n                ",124],"}",["T_WHITESPACE","\n\n                ",125],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$fields",127],";",["T_WHITESPACE","\n            ",127],"}",")",")",";",["T_WHITESPACE","\n\n        ",128],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEquals",130],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","storage",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","read",130],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",130],")",")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","testWrite",133],"(",")",["T_WHITESPACE","\n    ",133],"{",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$collection",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","createMongoCollectionMock",135],"(",")",";",["T_WHITESPACE","\n\n        ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","mongo",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","expects",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","once",137],"(",")",")",["T_WHITESPACE","\n            ",137],["T_OBJECT_OPERATOR","->",138],["T_STRING","method",138],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",138],")",["T_WHITESPACE","\n            ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","with",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","options",139],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",139],"]",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","options",139],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",139],"]",")",["T_WHITESPACE","\n            ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","will",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","returnValue",140],"(",["T_VARIABLE","$collection",140],")",")",";",["T_WHITESPACE","\n\n        ",140],["T_VARIABLE","$data",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",")",";",["T_WHITESPACE","\n\n        ",142],["T_VARIABLE","$methodName",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","phpversion",144],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",144],")",["T_WHITESPACE"," ",144],"?",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'updateOne'",144],["T_WHITESPACE"," ",144],":",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'update'",144],";",["T_WHITESPACE","\n\n        ",144],["T_VARIABLE","$collection",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","expects",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","once",146],"(",")",")",["T_WHITESPACE","\n            ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","method",147],"(",["T_VARIABLE","$methodName",147],")",["T_WHITESPACE","\n            ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","will",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","returnCallback",148],"(",["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$criteria",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$updateData",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$options",148],")",["T_WHITESPACE"," ",148],["T_USE","use",148],["T_WHITESPACE"," ",148],"(","&",["T_VARIABLE","$data",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n                ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertEquals",149],"(",["T_ARRAY","array",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","options",149],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",149],"]",["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'foo'",149],")",",",["T_WHITESPACE"," ",149],["T_VARIABLE","$criteria",149],")",";",["T_WHITESPACE","\n\n                ",149],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_STRING","phpversion",151],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n                    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEquals",152],"(",["T_ARRAY","array",152],"(",["T_CONSTANT_ENCAPSED_STRING","'upsert'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_STRING","true",152],")",",",["T_WHITESPACE"," ",152],["T_VARIABLE","$options",152],")",";",["T_WHITESPACE","\n                ",152],"}",["T_WHITESPACE"," ",153],["T_ELSE","else",153],["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n                    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertEquals",154],"(",["T_ARRAY","array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'upsert'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","true",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'multiple'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","false",154],")",",",["T_WHITESPACE"," ",154],["T_VARIABLE","$options",154],")",";",["T_WHITESPACE","\n                ",154],"}",["T_WHITESPACE","\n\n                ",155],["T_VARIABLE","$data",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$updateData",157],"[",["T_CONSTANT_ENCAPSED_STRING","'$set'",157],"]",";",["T_WHITESPACE","\n            ",157],"}",")",")",";",["T_WHITESPACE","\n\n        ",158],["T_VARIABLE","$expectedExpiry",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","time",160],"(",")",["T_WHITESPACE"," ",160],"+",["T_WHITESPACE"," ",160],["T_INT_CAST","(int)",160],["T_WHITESPACE"," ",160],["T_STRING","ini_get",160],"(",["T_CONSTANT_ENCAPSED_STRING","'session.gc_maxlifetime'",160],")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertTrue",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","storage",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","write",161],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'bar'",161],")",")",";",["T_WHITESPACE","\n\n        ",161],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_STRING","phpversion",163],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",163],")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertEquals",164],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$data",164],"[",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","options",164],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",164],"]","]",["T_OBJECT_OPERATOR","->",164],["T_STRING","getData",164],"(",")",")",";",["T_WHITESPACE","\n            ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertInstanceOf",165],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$data",165],"[",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","options",165],"[",["T_CONSTANT_ENCAPSED_STRING","'time_field'",165],"]","]",")",";",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertInstanceOf",166],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$data",166],"[",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","options",166],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",166],"]","]",")",";",["T_WHITESPACE","\n            ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertGreaterThanOrEqual",167],"(",["T_VARIABLE","$expectedExpiry",167],",",["T_WHITESPACE"," ",167],["T_STRING","round",167],"(",["T_STRING","intval",167],"(",["T_STRING_CAST","(string)",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$data",167],"[",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","options",167],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",167],"]","]",")",["T_WHITESPACE"," ",167],"\/",["T_WHITESPACE"," ",167],["T_LNUMBER","1000",167],")",")",";",["T_WHITESPACE","\n        ",167],"}",["T_WHITESPACE"," ",168],["T_ELSE","else",168],["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEquals",169],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$data",169],"[",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","options",169],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",169],"]","]",["T_OBJECT_OPERATOR","->",169],["T_STRING","bin",169],")",";",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertInstanceOf",170],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$data",170],"[",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","options",170],"[",["T_CONSTANT_ENCAPSED_STRING","'time_field'",170],"]","]",")",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertInstanceOf",171],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$data",171],"[",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","options",171],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",171],"]","]",")",";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertGreaterThanOrEqual",172],"(",["T_VARIABLE","$expectedExpiry",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$data",172],"[",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","options",172],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",172],"]","]",["T_OBJECT_OPERATOR","->",172],["T_STRING","sec",172],")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n\n    ",174],["T_PUBLIC","public",176],["T_WHITESPACE"," ",176],["T_FUNCTION","function",176],["T_WHITESPACE"," ",176],["T_STRING","testWriteWhenUsingExpiresField",176],"(",")",["T_WHITESPACE","\n    ",176],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","options",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_WHITESPACE","\n            ",178],["T_CONSTANT_ENCAPSED_STRING","'id_field'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'_id'",179],",",["T_WHITESPACE","\n            ",179],["T_CONSTANT_ENCAPSED_STRING","'data_field'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'data'",180],",",["T_WHITESPACE","\n            ",180],["T_CONSTANT_ENCAPSED_STRING","'time_field'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'time'",181],",",["T_WHITESPACE","\n            ",181],["T_CONSTANT_ENCAPSED_STRING","'database'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'sf2-test'",182],",",["T_WHITESPACE","\n            ",182],["T_CONSTANT_ENCAPSED_STRING","'collection'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'session-test'",183],",",["T_WHITESPACE","\n            ",183],["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'expiresAt'",184],",",["T_WHITESPACE","\n        ",184],")",";",["T_WHITESPACE","\n\n        ",185],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","storage",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_NEW","new",187],["T_WHITESPACE"," ",187],["T_STRING","MongoDbSessionHandler",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","mongo",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","options",187],")",";",["T_WHITESPACE","\n\n        ",187],["T_VARIABLE","$collection",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","createMongoCollectionMock",189],"(",")",";",["T_WHITESPACE","\n\n        ",189],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","mongo",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","expects",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","once",191],"(",")",")",["T_WHITESPACE","\n            ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","method",192],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",192],")",["T_WHITESPACE","\n            ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","with",193],"(",["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","options",193],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",193],"]",",",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","options",193],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",193],"]",")",["T_WHITESPACE","\n            ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","will",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","returnValue",194],"(",["T_VARIABLE","$collection",194],")",")",";",["T_WHITESPACE","\n\n        ",194],["T_VARIABLE","$data",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",")",";",["T_WHITESPACE","\n\n        ",196],["T_VARIABLE","$methodName",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","phpversion",198],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",198],")",["T_WHITESPACE"," ",198],"?",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'updateOne'",198],["T_WHITESPACE"," ",198],":",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'update'",198],";",["T_WHITESPACE","\n\n        ",198],["T_VARIABLE","$collection",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","expects",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","once",200],"(",")",")",["T_WHITESPACE","\n            ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","method",201],"(",["T_VARIABLE","$methodName",201],")",["T_WHITESPACE","\n            ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","will",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","returnCallback",202],"(",["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$criteria",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$updateData",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$options",202],")",["T_WHITESPACE"," ",202],["T_USE","use",202],["T_WHITESPACE"," ",202],"(","&",["T_VARIABLE","$data",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n                ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertEquals",203],"(",["T_ARRAY","array",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","options",203],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",203],"]",["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'foo'",203],")",",",["T_WHITESPACE"," ",203],["T_VARIABLE","$criteria",203],")",";",["T_WHITESPACE","\n\n                ",203],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_STRING","phpversion",205],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",205],")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n                    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertEquals",206],"(",["T_ARRAY","array",206],"(",["T_CONSTANT_ENCAPSED_STRING","'upsert'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_STRING","true",206],")",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$options",206],")",";",["T_WHITESPACE","\n                ",206],"}",["T_WHITESPACE"," ",207],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n                    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertEquals",208],"(",["T_ARRAY","array",208],"(",["T_CONSTANT_ENCAPSED_STRING","'upsert'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_STRING","true",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'multiple'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_STRING","false",208],")",",",["T_WHITESPACE"," ",208],["T_VARIABLE","$options",208],")",";",["T_WHITESPACE","\n                ",208],"}",["T_WHITESPACE","\n\n                ",209],["T_VARIABLE","$data",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$updateData",211],"[",["T_CONSTANT_ENCAPSED_STRING","'$set'",211],"]",";",["T_WHITESPACE","\n            ",211],"}",")",")",";",["T_WHITESPACE","\n\n        ",212],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertTrue",214],"(",["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","storage",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","write",214],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'bar'",214],")",")",";",["T_WHITESPACE","\n\n        ",214],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_STRING","phpversion",216],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",216],")",")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n            ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","assertEquals",217],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$data",217],"[",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","options",217],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",217],"]","]",["T_OBJECT_OPERATOR","->",217],["T_STRING","getData",217],"(",")",")",";",["T_WHITESPACE","\n            ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertInstanceOf",218],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$data",218],"[",["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","options",218],"[",["T_CONSTANT_ENCAPSED_STRING","'time_field'",218],"]","]",")",";",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","assertInstanceOf",219],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",219],",",["T_WHITESPACE"," ",219],["T_VARIABLE","$data",219],"[",["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","options",219],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",219],"]","]",")",";",["T_WHITESPACE","\n        ",219],"}",["T_WHITESPACE"," ",220],["T_ELSE","else",220],["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n            ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","assertEquals",221],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$data",221],"[",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","options",221],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",221],"]","]",["T_OBJECT_OPERATOR","->",221],["T_STRING","bin",221],")",";",["T_WHITESPACE","\n            ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","assertInstanceOf",222],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$data",222],"[",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","options",222],"[",["T_CONSTANT_ENCAPSED_STRING","'time_field'",222],"]","]",")",";",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertInstanceOf",223],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$data",223],"[",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","options",223],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",223],"]","]",")",";",["T_WHITESPACE","\n        ",223],"}",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_PUBLIC","public",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","testReplaceSessionData",227],"(",")",["T_WHITESPACE","\n    ",227],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$collection",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","createMongoCollectionMock",229],"(",")",";",["T_WHITESPACE","\n\n        ",229],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","mongo",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","expects",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","once",231],"(",")",")",["T_WHITESPACE","\n            ",231],["T_OBJECT_OPERATOR","->",232],["T_STRING","method",232],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",232],")",["T_WHITESPACE","\n            ",232],["T_OBJECT_OPERATOR","->",233],["T_STRING","with",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","options",233],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",233],"]",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","options",233],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",233],"]",")",["T_WHITESPACE","\n            ",233],["T_OBJECT_OPERATOR","->",234],["T_STRING","will",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","returnValue",234],"(",["T_VARIABLE","$collection",234],")",")",";",["T_WHITESPACE","\n\n        ",234],["T_VARIABLE","$data",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_ARRAY","array",236],"(",")",";",["T_WHITESPACE","\n\n        ",236],["T_VARIABLE","$methodName",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","phpversion",238],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",238],")",["T_WHITESPACE"," ",238],"?",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'updateOne'",238],["T_WHITESPACE"," ",238],":",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'update'",238],";",["T_WHITESPACE","\n\n        ",238],["T_VARIABLE","$collection",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","expects",240],"(",["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","exactly",240],"(",["T_LNUMBER","2",240],")",")",["T_WHITESPACE","\n            ",240],["T_OBJECT_OPERATOR","->",241],["T_STRING","method",241],"(",["T_VARIABLE","$methodName",241],")",["T_WHITESPACE","\n            ",241],["T_OBJECT_OPERATOR","->",242],["T_STRING","will",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","returnCallback",242],"(",["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$criteria",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$updateData",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$options",242],")",["T_WHITESPACE"," ",242],["T_USE","use",242],["T_WHITESPACE"," ",242],"(","&",["T_VARIABLE","$data",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n                ",242],["T_VARIABLE","$data",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$updateData",243],";",["T_WHITESPACE","\n            ",243],"}",")",")",";",["T_WHITESPACE","\n\n        ",244],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","storage",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","write",246],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'bar'",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","storage",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","write",247],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'foobar'",247],")",";",["T_WHITESPACE","\n\n        ",247],["T_IF","if",249],["T_WHITESPACE"," ",249],"(",["T_STRING","phpversion",249],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n            ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertEquals",250],"(",["T_CONSTANT_ENCAPSED_STRING","'foobar'",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$data",250],"[",["T_CONSTANT_ENCAPSED_STRING","'$set'",250],"]","[",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","options",250],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",250],"]","]",["T_OBJECT_OPERATOR","->",250],["T_STRING","getData",250],"(",")",")",";",["T_WHITESPACE","\n        ",250],"}",["T_WHITESPACE"," ",251],["T_ELSE","else",251],["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n            ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","assertEquals",252],"(",["T_CONSTANT_ENCAPSED_STRING","'foobar'",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$data",252],"[",["T_CONSTANT_ENCAPSED_STRING","'$set'",252],"]","[",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","options",252],"[",["T_CONSTANT_ENCAPSED_STRING","'data_field'",252],"]","]",["T_OBJECT_OPERATOR","->",252],["T_STRING","bin",252],")",";",["T_WHITESPACE","\n        ",252],"}",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n\n    ",254],["T_PUBLIC","public",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","testDestroy",256],"(",")",["T_WHITESPACE","\n    ",256],"{",["T_WHITESPACE","\n        ",257],["T_VARIABLE","$collection",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","createMongoCollectionMock",258],"(",")",";",["T_WHITESPACE","\n\n        ",258],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","mongo",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","expects",260],"(",["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","once",260],"(",")",")",["T_WHITESPACE","\n            ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","method",261],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",261],")",["T_WHITESPACE","\n            ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","with",262],"(",["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","options",262],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",262],"]",",",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","options",262],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",262],"]",")",["T_WHITESPACE","\n            ",262],["T_OBJECT_OPERATOR","->",263],["T_STRING","will",263],"(",["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","returnValue",263],"(",["T_VARIABLE","$collection",263],")",")",";",["T_WHITESPACE","\n\n        ",263],["T_VARIABLE","$methodName",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","phpversion",265],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",265],")",["T_WHITESPACE"," ",265],"?",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'deleteOne'",265],["T_WHITESPACE"," ",265],":",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'remove'",265],";",["T_WHITESPACE","\n\n        ",265],["T_VARIABLE","$collection",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","expects",267],"(",["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","once",267],"(",")",")",["T_WHITESPACE","\n            ",267],["T_OBJECT_OPERATOR","->",268],["T_STRING","method",268],"(",["T_VARIABLE","$methodName",268],")",["T_WHITESPACE","\n            ",268],["T_OBJECT_OPERATOR","->",269],["T_STRING","with",269],"(",["T_ARRAY","array",269],"(",["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","options",269],"[",["T_CONSTANT_ENCAPSED_STRING","'id_field'",269],"]",["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'foo'",269],")",")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertTrue",271],"(",["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","storage",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","destroy",271],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",271],")",")",";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","testGc",274],"(",")",["T_WHITESPACE","\n    ",274],"{",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$collection",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","createMongoCollectionMock",276],"(",")",";",["T_WHITESPACE","\n\n        ",276],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","mongo",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","expects",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","once",278],"(",")",")",["T_WHITESPACE","\n            ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","method",279],"(",["T_CONSTANT_ENCAPSED_STRING","'selectCollection'",279],")",["T_WHITESPACE","\n            ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","with",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","options",280],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",280],"]",",",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","options",280],"[",["T_CONSTANT_ENCAPSED_STRING","'collection'",280],"]",")",["T_WHITESPACE","\n            ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","will",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","returnValue",281],"(",["T_VARIABLE","$collection",281],")",")",";",["T_WHITESPACE","\n\n        ",281],["T_VARIABLE","$methodName",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","phpversion",283],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",283],")",["T_WHITESPACE"," ",283],"?",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'deleteOne'",283],["T_WHITESPACE"," ",283],":",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'remove'",283],";",["T_WHITESPACE","\n\n        ",283],["T_VARIABLE","$collection",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","expects",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","once",285],"(",")",")",["T_WHITESPACE","\n            ",285],["T_OBJECT_OPERATOR","->",286],["T_STRING","method",286],"(",["T_VARIABLE","$methodName",286],")",["T_WHITESPACE","\n            ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","will",287],"(",["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","returnCallback",287],"(",["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],"(",["T_VARIABLE","$criteria",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n                ",287],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_STRING","phpversion",288],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n                    ",288],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","assertInstanceOf",289],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\BSON\\UTCDateTime'",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$criteria",289],"[",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","options",289],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",289],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$lt'",289],"]",")",";",["T_WHITESPACE","\n                    ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","assertGreaterThanOrEqual",290],"(",["T_STRING","time",290],"(",")",["T_WHITESPACE"," ",290],"-",["T_WHITESPACE"," ",290],["T_LNUMBER","1",290],",",["T_WHITESPACE"," ",290],["T_STRING","round",290],"(",["T_STRING","intval",290],"(",["T_STRING_CAST","(string)",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$criteria",290],"[",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","options",290],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",290],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$lt'",290],"]",")",["T_WHITESPACE"," ",290],"\/",["T_WHITESPACE"," ",290],["T_LNUMBER","1000",290],")",")",";",["T_WHITESPACE","\n                ",290],"}",["T_WHITESPACE"," ",291],["T_ELSE","else",291],["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n                    ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","assertInstanceOf",292],"(",["T_CONSTANT_ENCAPSED_STRING","'MongoDate'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$criteria",292],"[",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","options",292],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",292],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$lt'",292],"]",")",";",["T_WHITESPACE","\n                    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertGreaterThanOrEqual",293],"(",["T_STRING","time",293],"(",")",["T_WHITESPACE"," ",293],"-",["T_WHITESPACE"," ",293],["T_LNUMBER","1",293],",",["T_WHITESPACE"," ",293],["T_VARIABLE","$criteria",293],"[",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","options",293],"[",["T_CONSTANT_ENCAPSED_STRING","'expiry_field'",293],"]","]","[",["T_CONSTANT_ENCAPSED_STRING","'$lt'",293],"]",["T_OBJECT_OPERATOR","->",293],["T_STRING","sec",293],")",";",["T_WHITESPACE","\n                ",293],"}",["T_WHITESPACE","\n            ",294],"}",")",")",";",["T_WHITESPACE","\n\n        ",295],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","assertTrue",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","storage",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","gc",297],"(",["T_LNUMBER","1",297],")",")",";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","testGetConnection",300],"(",")",["T_WHITESPACE","\n    ",300],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$method",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_NEW","new",302],["T_WHITESPACE"," ",302],["T_NS_SEPARATOR","\\",302],["T_STRING","ReflectionMethod",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","storage",302],",",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'getMongo'",302],")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$method",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setAccessible",303],"(",["T_STRING","true",303],")",";",["T_WHITESPACE","\n\n        ",303],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_STRING","phpversion",305],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",305],")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$mongoClass",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\Client'",306],";",["T_WHITESPACE","\n        ",306],"}",["T_WHITESPACE"," ",307],["T_ELSE","else",307],["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n            ",307],["T_VARIABLE","$mongoClass",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_STRING","version_compare",308],"(",["T_STRING","phpversion",308],"(",["T_CONSTANT_ENCAPSED_STRING","'mongo'",308],")",",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'1.3.0'",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'<'",308],")",["T_WHITESPACE"," ",308],"?",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'Mongo'",308],["T_WHITESPACE"," ",308],":",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'MongoClient'",308],";",["T_WHITESPACE","\n        ",308],"}",["T_WHITESPACE","\n\n        ",309],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","assertInstanceOf",311],"(",["T_VARIABLE","$mongoClass",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$method",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","invoke",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","storage",311],")",")",";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_PRIVATE","private",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","createMongoCollectionMock",314],"(",")",["T_WHITESPACE","\n    ",314],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$collectionClass",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'MongoCollection'",316],";",["T_WHITESPACE","\n        ",316],["T_IF","if",317],["T_WHITESPACE"," ",317],"(",["T_STRING","phpversion",317],"(",["T_CONSTANT_ENCAPSED_STRING","'mongodb'",317],")",")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_VARIABLE","$collectionClass",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'MongoDB\\Collection'",318],";",["T_WHITESPACE","\n        ",318],"}",["T_WHITESPACE","\n\n        ",319],["T_VARIABLE","$collection",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getMockBuilder",321],"(",["T_VARIABLE","$collectionClass",321],")",["T_WHITESPACE","\n            ",321],["T_OBJECT_OPERATOR","->",322],["T_STRING","disableOriginalConstructor",322],"(",")",["T_WHITESPACE","\n            ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","getMock",323],"(",")",";",["T_WHITESPACE","\n\n        ",323],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$collection",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n",326],"}",["T_WHITESPACE","\n",327]]
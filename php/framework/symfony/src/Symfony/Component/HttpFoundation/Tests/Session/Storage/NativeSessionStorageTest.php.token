[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpFoundation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Session",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Storage",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Attribute",14],["T_NS_SEPARATOR","\\",14],["T_STRING","AttributeBag",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Session",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Flash",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FlashBag",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpFoundation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Session",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Storage",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Handler",16],["T_NS_SEPARATOR","\\",16],["T_STRING","NativeSessionHandler",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpFoundation",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Session",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Storage",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Handler",17],["T_NS_SEPARATOR","\\",17],["T_STRING","NullSessionHandler",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpFoundation",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Session",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Storage",18],["T_NS_SEPARATOR","\\",18],["T_STRING","NativeSessionStorage",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpFoundation",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Session",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Storage",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Proxy",19],["T_NS_SEPARATOR","\\",19],["T_STRING","SessionHandlerProxy",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Test class for NativeSessionStorage.\n *\n * @author Drak <drak@zikula.org>\n *\n * These tests require separate processes.\n *\n * @runTestsInSeparateProcesses\n * @preserveGlobalState disabled\n *\/",21],["T_WHITESPACE","\n",30],["T_CLASS","class",31],["T_WHITESPACE"," ",31],["T_STRING","NativeSessionStorageTest",31],["T_WHITESPACE"," ",31],["T_EXTENDS","extends",31],["T_WHITESPACE"," ",31],["T_NS_SEPARATOR","\\",31],["T_STRING","PHPUnit_Framework_TestCase",31],["T_WHITESPACE","\n",31],"{",["T_WHITESPACE","\n    ",32],["T_PRIVATE","private",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$savePath",33],";",["T_WHITESPACE","\n\n    ",33],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","setUp",35],"(",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","iniSet",37],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_handler'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'files'",37],")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","iniSet",38],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_path'",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","savePath",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","sys_get_temp_dir",38],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/sf2test'",38],")",";",["T_WHITESPACE","\n        ",38],["T_IF","if",39],["T_WHITESPACE"," ",39],"(","!",["T_STRING","is_dir",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","savePath",39],")",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n            ",39],["T_STRING","mkdir",40],"(",["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","savePath",40],")",";",["T_WHITESPACE","\n        ",40],"}",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n\n    ",42],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","tearDown",44],"(",")",["T_WHITESPACE","\n    ",44],"{",["T_WHITESPACE","\n        ",45],["T_STRING","session_write_close",46],"(",")",";",["T_WHITESPACE","\n        ",46],["T_STRING","array_map",47],"(",["T_CONSTANT_ENCAPSED_STRING","'unlink'",47],",",["T_WHITESPACE"," ",47],["T_STRING","glob",47],"(",["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","savePath",47],".",["T_CONSTANT_ENCAPSED_STRING","'\/*'",47],")",")",";",["T_WHITESPACE","\n        ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_STRING","is_dir",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","savePath",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n            ",48],["T_STRING","rmdir",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","savePath",49],")",";",["T_WHITESPACE","\n        ",49],"}",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","savePath",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","null",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @param array $options\n     *\n     * @return NativeSessionStorage\n     *\/",55],["T_WHITESPACE","\n    ",59],["T_PROTECTED","protected",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getStorage",60],"(",["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$options",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",")",["T_WHITESPACE","\n    ",60],"{",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$storage",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_NEW","new",62],["T_WHITESPACE"," ",62],["T_STRING","NativeSessionStorage",62],"(",["T_VARIABLE","$options",62],")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$storage",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","registerBag",63],"(",["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","AttributeBag",63],"(",")",")",";",["T_WHITESPACE","\n\n        ",63],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$storage",65],";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testBag",68],"(",")",["T_WHITESPACE","\n    ",68],"{",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$storage",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getStorage",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$bag",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","FlashBag",71],"(",")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$storage",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","registerBag",72],"(",["T_VARIABLE","$bag",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertSame",73],"(",["T_VARIABLE","$bag",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$storage",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getBag",73],"(",["T_VARIABLE","$bag",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getName",73],"(",")",")",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_DOC_COMMENT","\/**\n     * @expectedException \\InvalidArgumentException\n     *\/",76],["T_WHITESPACE","\n    ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testRegisterBagException",79],"(",")",["T_WHITESPACE","\n    ",79],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$storage",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getStorage",81],"(",")",";",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$storage",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getBag",82],"(",["T_CONSTANT_ENCAPSED_STRING","'non_existing'",82],")",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_DOC_COMMENT","\/**\n     * @expectedException \\LogicException\n     *\/",85],["T_WHITESPACE","\n    ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","testRegisterBagForAStartedSessionThrowsException",88],"(",")",["T_WHITESPACE","\n    ",88],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$storage",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getStorage",90],"(",")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$storage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","start",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$storage",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","registerBag",92],"(",["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_STRING","AttributeBag",92],"(",")",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testGetId",95],"(",")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$storage",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStorage",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertSame",98],"(",["T_CONSTANT_ENCAPSED_STRING","''",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$storage",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getId",98],"(",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Empty ID before starting session'",98],")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$storage",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","start",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$id",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$storage",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getId",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertInternalType",102],"(",["T_CONSTANT_ENCAPSED_STRING","'string'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$id",102],")",";",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertNotSame",103],"(",["T_CONSTANT_ENCAPSED_STRING","''",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$id",103],")",";",["T_WHITESPACE","\n\n        ",103],["T_VARIABLE","$storage",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","save",105],"(",")",";",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertSame",106],"(",["T_VARIABLE","$id",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$storage",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getId",106],"(",")",",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'ID stays after saving session'",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","testRegenerate",109],"(",")",["T_WHITESPACE","\n    ",109],"{",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$storage",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getStorage",111],"(",")",";",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$storage",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","start",112],"(",")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$id",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$storage",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getId",113],"(",")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$storage",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getBag",114],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","set",114],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",114],",",["T_WHITESPACE"," ",114],["T_LNUMBER","7",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$storage",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","regenerate",115],"(",")",";",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertNotEquals",116],"(",["T_VARIABLE","$id",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$storage",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getId",116],"(",")",")",";",["T_WHITESPACE","\n        ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertEquals",117],"(",["T_LNUMBER","7",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$storage",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getBag",117],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","get",117],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",117],")",")",";",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_PUBLIC","public",120],["T_WHITESPACE"," ",120],["T_FUNCTION","function",120],["T_WHITESPACE"," ",120],["T_STRING","testRegenerateDestroy",120],"(",")",["T_WHITESPACE","\n    ",120],"{",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$storage",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","getStorage",122],"(",")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$storage",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","start",123],"(",")",";",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$id",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$storage",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getId",124],"(",")",";",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$storage",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getBag",125],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",125],")",["T_OBJECT_OPERATOR","->",125],["T_STRING","set",125],"(",["T_CONSTANT_ENCAPSED_STRING","'legs'",125],",",["T_WHITESPACE"," ",125],["T_LNUMBER","11",125],")",";",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$storage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","regenerate",126],"(",["T_STRING","true",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertNotEquals",127],"(",["T_VARIABLE","$id",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$storage",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getId",127],"(",")",")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEquals",128],"(",["T_LNUMBER","11",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$storage",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getBag",128],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","get",128],"(",["T_CONSTANT_ENCAPSED_STRING","'legs'",128],")",")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","testSessionGlobalIsUpToDateAfterIdRegeneration",131],"(",")",["T_WHITESPACE","\n    ",131],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$storage",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getStorage",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$storage",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","start",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$storage",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getBag",135],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","set",135],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",135],",",["T_WHITESPACE"," ",135],["T_LNUMBER","7",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$storage",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","regenerate",136],"(",")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$storage",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getBag",137],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",137],")",["T_OBJECT_OPERATOR","->",137],["T_STRING","set",137],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",137],",",["T_WHITESPACE"," ",137],["T_LNUMBER","42",137],")",";",["T_WHITESPACE","\n\n        ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEquals",139],"(",["T_LNUMBER","42",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$_SESSION",139],"[",["T_CONSTANT_ENCAPSED_STRING","'_sf2_attributes'",139],"]","[",["T_CONSTANT_ENCAPSED_STRING","'lucky'",139],"]",")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","testRegenerationFailureDoesNotFlagStorageAsStarted",142],"(",")",["T_WHITESPACE","\n    ",142],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$storage",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getStorage",144],"(",")",";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertFalse",145],"(",["T_VARIABLE","$storage",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","regenerate",145],"(",")",")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertFalse",146],"(",["T_VARIABLE","$storage",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","isStarted",146],"(",")",")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n\n    ",147],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","testDefaultSessionCacheLimiter",149],"(",")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","iniSet",151],"(",["T_CONSTANT_ENCAPSED_STRING","'session.cache_limiter'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'nocache'",151],")",";",["T_WHITESPACE","\n\n        ",151],["T_VARIABLE","$storage",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_NEW","new",153],["T_WHITESPACE"," ",153],["T_STRING","NativeSessionStorage",153],"(",")",";",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertEquals",154],"(",["T_CONSTANT_ENCAPSED_STRING","''",154],",",["T_WHITESPACE"," ",154],["T_STRING","ini_get",154],"(",["T_CONSTANT_ENCAPSED_STRING","'session.cache_limiter'",154],")",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","testExplicitSessionCacheLimiter",157],"(",")",["T_WHITESPACE","\n    ",157],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","iniSet",159],"(",["T_CONSTANT_ENCAPSED_STRING","'session.cache_limiter'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'nocache'",159],")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$storage",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","NativeSessionStorage",161],"(",["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_limiter'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'public'",161],")",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertEquals",162],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",162],",",["T_WHITESPACE"," ",162],["T_STRING","ini_get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'session.cache_limiter'",162],")",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n\n    ",163],["T_PUBLIC","public",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","testCookieOptions",165],"(",")",["T_WHITESPACE","\n    ",165],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$options",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_WHITESPACE","\n            ",167],["T_CONSTANT_ENCAPSED_STRING","'cookie_lifetime'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_LNUMBER","123456",168],",",["T_WHITESPACE","\n            ",168],["T_CONSTANT_ENCAPSED_STRING","'cookie_path'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'\/my\/cookie\/path'",169],",",["T_WHITESPACE","\n            ",169],["T_CONSTANT_ENCAPSED_STRING","'cookie_domain'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'symfony.example.com'",170],",",["T_WHITESPACE","\n            ",170],["T_CONSTANT_ENCAPSED_STRING","'cookie_secure'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_STRING","true",171],",",["T_WHITESPACE","\n            ",171],["T_CONSTANT_ENCAPSED_STRING","'cookie_httponly'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_STRING","false",172],",",["T_WHITESPACE","\n        ",172],")",";",["T_WHITESPACE","\n\n        ",173],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getStorage",175],"(",["T_VARIABLE","$options",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$temp",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_STRING","session_get_cookie_params",176],"(",")",";",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$gco",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",";",["T_WHITESPACE","\n\n        ",177],["T_FOREACH","foreach",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$temp",179],["T_WHITESPACE"," ",179],["T_AS","as",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$key",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$value",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n            ",179],["T_VARIABLE","$gco",180],"[",["T_CONSTANT_ENCAPSED_STRING","'cookie_'",180],".",["T_VARIABLE","$key",180],"]",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$value",180],";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n\n        ",181],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertEquals",183],"(",["T_VARIABLE","$options",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$gco",183],")",";",["T_WHITESPACE","\n    ",183],"}",["T_WHITESPACE","\n\n    ",184],["T_DOC_COMMENT","\/**\n     * @expectedException \\InvalidArgumentException\n     *\/",186],["T_WHITESPACE","\n    ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","testSetSaveHandlerException",189],"(",")",["T_WHITESPACE","\n    ",189],"{",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$storage",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getStorage",191],"(",")",";",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$storage",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","setSaveHandler",192],"(",["T_NEW","new",192],["T_WHITESPACE"," ",192],["T_NS_SEPARATOR","\\",192],["T_STRING","stdClass",192],"(",")",")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_PUBLIC","public",195],["T_WHITESPACE"," ",195],["T_FUNCTION","function",195],["T_WHITESPACE"," ",195],["T_STRING","testSetSaveHandler",195],"(",")",["T_WHITESPACE","\n    ",195],"{",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","iniSet",197],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_handler'",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'files'",197],")",";",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$storage",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getStorage",198],"(",")",";",["T_WHITESPACE","\n        ",198],["T_VARIABLE","$storage",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","setSaveHandler",199],"(",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertInstanceOf",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$storage",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getSaveHandler",200],"(",")",")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$storage",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","setSaveHandler",201],"(",["T_STRING","null",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertInstanceOf",202],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$storage",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getSaveHandler",202],"(",")",")",";",["T_WHITESPACE","\n        ",202],["T_VARIABLE","$storage",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setSaveHandler",203],"(",["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_STRING","SessionHandlerProxy",203],"(",["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_STRING","NativeSessionHandler",203],"(",")",")",")",";",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertInstanceOf",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$storage",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getSaveHandler",204],"(",")",")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$storage",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","setSaveHandler",205],"(",["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_STRING","NativeSessionHandler",205],"(",")",")",";",["T_WHITESPACE","\n        ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertInstanceOf",206],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$storage",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getSaveHandler",206],"(",")",")",";",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$storage",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","setSaveHandler",207],"(",["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_STRING","SessionHandlerProxy",207],"(",["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_STRING","NullSessionHandler",207],"(",")",")",")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertInstanceOf",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$storage",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getSaveHandler",208],"(",")",")",";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$storage",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setSaveHandler",209],"(",["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","NullSessionHandler",209],"(",")",")",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertInstanceOf",210],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\HttpFoundation\\Session\\Storage\\Proxy\\SessionHandlerProxy'",210],",",["T_WHITESPACE"," ",210],["T_VARIABLE","$storage",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getSaveHandler",210],"(",")",")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_DOC_COMMENT","\/**\n     * @expectedException \\RuntimeException\n     *\/",213],["T_WHITESPACE","\n    ",215],["T_PUBLIC","public",216],["T_WHITESPACE"," ",216],["T_FUNCTION","function",216],["T_WHITESPACE"," ",216],["T_STRING","testStarted",216],"(",")",["T_WHITESPACE","\n    ",216],"{",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$storage",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getStorage",218],"(",")",";",["T_WHITESPACE","\n\n        ",218],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","assertFalse",220],"(",["T_VARIABLE","$storage",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getSaveHandler",220],"(",")",["T_OBJECT_OPERATOR","->",220],["T_STRING","isActive",220],"(",")",")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","assertFalse",221],"(",["T_VARIABLE","$storage",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","isStarted",221],"(",")",")",";",["T_WHITESPACE","\n\n        ",221],["T_STRING","session_start",223],"(",")",";",["T_WHITESPACE","\n        ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","assertTrue",224],"(",["T_ISSET","isset",224],"(",["T_VARIABLE","$_SESSION",224],")",")",";",["T_WHITESPACE","\n        ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","assertTrue",225],"(",["T_VARIABLE","$storage",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getSaveHandler",225],"(",")",["T_OBJECT_OPERATOR","->",225],["T_STRING","isActive",225],"(",")",")",";",["T_WHITESPACE","\n\n        ",225],["T_COMMENT","\/\/ PHP session might have started, but the storage driver has not, so false is correct here\n",227],["T_WHITESPACE","        ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","assertFalse",228],"(",["T_VARIABLE","$storage",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","isStarted",228],"(",")",")",";",["T_WHITESPACE","\n\n        ",228],["T_VARIABLE","$key",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$storage",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getMetadataBag",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","getStorageKey",230],"(",")",";",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertFalse",231],"(",["T_ISSET","isset",231],"(",["T_VARIABLE","$_SESSION",231],"[",["T_VARIABLE","$key",231],"]",")",")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$storage",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","start",232],"(",")",";",["T_WHITESPACE","\n    ",232],"}",["T_WHITESPACE","\n\n    ",233],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","testRestart",235],"(",")",["T_WHITESPACE","\n    ",235],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$storage",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getStorage",237],"(",")",";",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$storage",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","start",238],"(",")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$id",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$storage",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getId",239],"(",")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$storage",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getBag",240],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","set",240],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",240],",",["T_WHITESPACE"," ",240],["T_LNUMBER","7",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$storage",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","save",241],"(",")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$storage",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","start",242],"(",")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","assertSame",243],"(",["T_VARIABLE","$id",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$storage",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getId",243],"(",")",",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'Same session ID after restarting'",243],")",";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","assertSame",244],"(",["T_LNUMBER","7",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$storage",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getBag",244],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",244],")",["T_OBJECT_OPERATOR","->",244],["T_STRING","get",244],"(",["T_CONSTANT_ENCAPSED_STRING","'lucky'",244],")",",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'Data still available'",244],")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n",245],"}",["T_WHITESPACE","\n",246]]
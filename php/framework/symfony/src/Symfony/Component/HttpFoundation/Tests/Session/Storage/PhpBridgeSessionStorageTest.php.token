[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpFoundation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Session",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Storage",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Session",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Storage",14],["T_NS_SEPARATOR","\\",14],["T_STRING","PhpBridgeSessionStorage",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Session",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Attribute",15],["T_NS_SEPARATOR","\\",15],["T_STRING","AttributeBag",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Test class for PhpSessionStorage.\n *\n * @author Drak <drak@zikula.org>\n *\n * These tests require separate processes.\n *\n * @runTestsInSeparateProcesses\n * @preserveGlobalState disabled\n *\/",17],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","PhpBridgeSessionStorageTest",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","PHPUnit_Framework_TestCase",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$savePath",29],";",["T_WHITESPACE","\n\n    ",29],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE","\n    ",31],"{",["T_WHITESPACE","\n        ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","iniSet",33],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_handler'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'files'",33],")",";",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","iniSet",34],"(",["T_CONSTANT_ENCAPSED_STRING","'session.save_path'",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","savePath",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","sys_get_temp_dir",34],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/sf2test'",34],")",";",["T_WHITESPACE","\n        ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(","!",["T_STRING","is_dir",35],"(",["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","savePath",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n            ",35],["T_STRING","mkdir",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","savePath",36],")",";",["T_WHITESPACE","\n        ",36],"}",["T_WHITESPACE","\n    ",37],"}",["T_WHITESPACE","\n\n    ",38],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","tearDown",40],"(",")",["T_WHITESPACE","\n    ",40],"{",["T_WHITESPACE","\n        ",41],["T_STRING","session_write_close",42],"(",")",";",["T_WHITESPACE","\n        ",42],["T_STRING","array_map",43],"(",["T_CONSTANT_ENCAPSED_STRING","'unlink'",43],",",["T_WHITESPACE"," ",43],["T_STRING","glob",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","savePath",43],".",["T_CONSTANT_ENCAPSED_STRING","'\/*'",43],")",")",";",["T_WHITESPACE","\n        ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_STRING","is_dir",44],"(",["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","savePath",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n            ",44],["T_STRING","rmdir",45],"(",["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","savePath",45],")",";",["T_WHITESPACE","\n        ",45],"}",["T_WHITESPACE","\n\n        ",46],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","savePath",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","null",48],";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_DOC_COMMENT","\/**\n     * @return PhpBridgeSessionStorage\n     *\/",51],["T_WHITESPACE","\n    ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getStorage",54],"(",")",["T_WHITESPACE","\n    ",54],"{",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$storage",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_NEW","new",56],["T_WHITESPACE"," ",56],["T_STRING","PhpBridgeSessionStorage",56],"(",")",";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$storage",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","registerBag",57],"(",["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","AttributeBag",57],"(",")",")",";",["T_WHITESPACE","\n\n        ",57],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$storage",59],";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testPhpSession",62],"(",")",["T_WHITESPACE","\n    ",62],"{",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$storage",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getStorage",64],"(",")",";",["T_WHITESPACE","\n\n        ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertFalse",66],"(",["T_VARIABLE","$storage",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getSaveHandler",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","isActive",66],"(",")",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertFalse",67],"(",["T_VARIABLE","$storage",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","isStarted",67],"(",")",")",";",["T_WHITESPACE","\n\n        ",67],["T_STRING","session_start",69],"(",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertTrue",70],"(",["T_ISSET","isset",70],"(",["T_VARIABLE","$_SESSION",70],")",")",";",["T_WHITESPACE","\n        ",70],["T_COMMENT","\/\/ in PHP 5.4 we can reliably detect a session started\n",71],["T_WHITESPACE","        ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertTrue",72],"(",["T_VARIABLE","$storage",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getSaveHandler",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","isActive",72],"(",")",")",";",["T_WHITESPACE","\n        ",72],["T_COMMENT","\/\/ PHP session might have started, but the storage driver has not, so false is correct here\n",73],["T_WHITESPACE","        ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertFalse",74],"(",["T_VARIABLE","$storage",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","isStarted",74],"(",")",")",";",["T_WHITESPACE","\n\n        ",74],["T_VARIABLE","$key",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$storage",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMetadataBag",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getStorageKey",76],"(",")",";",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertFalse",77],"(",["T_ISSET","isset",77],"(",["T_VARIABLE","$_SESSION",77],"[",["T_VARIABLE","$key",77],"]",")",")",";",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$storage",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","start",78],"(",")",";",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertTrue",79],"(",["T_ISSET","isset",79],"(",["T_VARIABLE","$_SESSION",79],"[",["T_VARIABLE","$key",79],"]",")",")",";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n\n    ",80],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","testClear",82],"(",")",["T_WHITESPACE","\n    ",82],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$storage",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getStorage",84],"(",")",";",["T_WHITESPACE","\n        ",84],["T_STRING","session_start",85],"(",")",";",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$_SESSION",86],"[",["T_CONSTANT_ENCAPSED_STRING","'drak'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'loves symfony'",86],";",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$storage",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getBag",87],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",87],")",["T_OBJECT_OPERATOR","->",87],["T_STRING","set",87],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'greatness'",87],")",";",["T_WHITESPACE","\n        ",87],["T_VARIABLE","$key",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$storage",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getBag",88],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",88],")",["T_OBJECT_OPERATOR","->",88],["T_STRING","getStorageKey",88],"(",")",";",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertEquals",89],"(",["T_VARIABLE","$_SESSION",89],"[",["T_VARIABLE","$key",89],"]",",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'symfony'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'greatness'",89],")",")",";",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertEquals",90],"(",["T_VARIABLE","$_SESSION",90],"[",["T_CONSTANT_ENCAPSED_STRING","'drak'",90],"]",",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'loves symfony'",90],")",";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$storage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","clear",91],"(",")",";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertEquals",92],"(",["T_VARIABLE","$_SESSION",92],"[",["T_VARIABLE","$key",92],"]",",",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",")",";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertEquals",93],"(",["T_VARIABLE","$_SESSION",93],"[",["T_CONSTANT_ENCAPSED_STRING","'drak'",93],"]",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'loves symfony'",93],")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n",94],"}",["T_WHITESPACE","\n",95]]
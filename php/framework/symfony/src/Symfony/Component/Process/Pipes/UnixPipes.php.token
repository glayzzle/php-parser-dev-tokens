[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Process",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Pipes",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Process",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Process",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * UnixPipes implementation uses unix pipes as handles.\n *\n * @author Romain Neutron <imprec@gmail.com>\n *\n * @internal\n *\/",16],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","UnixPipes",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","AbstractPipes",23],["T_WHITESPACE","\n",23],"{",["T_WHITESPACE","\n    ",24],["T_DOC_COMMENT","\/** @var bool *\/",25],["T_WHITESPACE","\n    ",25],["T_PRIVATE","private",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$ttyMode",26],";",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/** @var bool *\/",27],["T_WHITESPACE","\n    ",27],["T_PRIVATE","private",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$ptyMode",28],";",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/** @var bool *\/",29],["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$haveReadSupport",30],";",["T_WHITESPACE","\n\n    ",30],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","__construct",32],"(",["T_VARIABLE","$ttyMode",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$ptyMode",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$input",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$haveReadSupport",32],")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","ttyMode",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_BOOL_CAST","(bool)",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$ttyMode",34],";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","ptyMode",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_BOOL_CAST","(bool)",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$ptyMode",35],";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","haveReadSupport",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_BOOL_CAST","(bool)",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$haveReadSupport",36],";",["T_WHITESPACE","\n\n        ",36],["T_STRING","parent",38],["T_DOUBLE_COLON","::",38],["T_STRING","__construct",38],"(",["T_VARIABLE","$input",38],")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__destruct",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","close",43],"(",")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",46],["T_WHITESPACE","\n    ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","getDescriptors",49],"(",")",["T_WHITESPACE","\n    ",49],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(","!",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","haveReadSupport",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$nullstream",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","fopen",52],"(",["T_CONSTANT_ENCAPSED_STRING","'\/dev\/null'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'c'",52],")",";",["T_WHITESPACE","\n\n            ",52],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n                ",54],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'pipe'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'r'",55],")",",",["T_WHITESPACE","\n                ",55],["T_VARIABLE","$nullstream",56],",",["T_WHITESPACE","\n                ",56],["T_VARIABLE","$nullstream",57],",",["T_WHITESPACE","\n            ",57],")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n\n        ",59],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","ttyMode",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n            ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_WHITESPACE","\n                ",62],["T_ARRAY","array",63],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'\/dev\/tty'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'r'",63],")",",",["T_WHITESPACE","\n                ",63],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/dev\/tty'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'w'",64],")",",",["T_WHITESPACE","\n                ",64],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'\/dev\/tty'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'w'",65],")",",",["T_WHITESPACE","\n            ",65],")",";",["T_WHITESPACE","\n        ",66],"}",["T_WHITESPACE","\n\n        ",67],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","ptyMode",69],["T_WHITESPACE"," ",69],["T_BOOLEAN_AND","&&",69],["T_WHITESPACE"," ",69],["T_STRING","Process",69],["T_DOUBLE_COLON","::",69],["T_STRING","isPtySupported",69],"(",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n            ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n                ",70],["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'pty'",71],")",",",["T_WHITESPACE","\n                ",71],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'pty'",72],")",",",["T_WHITESPACE","\n                ",72],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'pty'",73],")",",",["T_WHITESPACE","\n            ",73],")",";",["T_WHITESPACE","\n        ",74],"}",["T_WHITESPACE","\n\n        ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_WHITESPACE","\n            ",77],["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'pipe'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'r'",78],")",",",["T_WHITESPACE","\n            ",78],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'pipe'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'w'",79],")",",",["T_WHITESPACE"," ",79],["T_COMMENT","\/\/ stdout\n",79],["T_WHITESPACE","            ",80],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'pipe'",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'w'",80],")",",",["T_WHITESPACE"," ",80],["T_COMMENT","\/\/ stderr\n",80],["T_WHITESPACE","        ",81],")",";",["T_WHITESPACE","\n    ",81],"}",["T_WHITESPACE","\n\n    ",82],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",84],["T_WHITESPACE","\n    ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getFiles",87],"(",")",["T_WHITESPACE","\n    ",87],"{",["T_WHITESPACE","\n        ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",92],["T_WHITESPACE","\n    ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","readAndWrite",95],"(",["T_VARIABLE","$blocking",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$close",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","false",95],")",["T_WHITESPACE","\n    ",95],"{",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","unblock",97],"(",")",";",["T_WHITESPACE","\n        ",97],["T_VARIABLE","$w",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","write",98],"(",")",";",["T_WHITESPACE","\n\n        ",98],["T_VARIABLE","$read",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",")",";",["T_WHITESPACE","\n        ",100],["T_VARIABLE","$r",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","pipes",101],";",["T_WHITESPACE","\n        ",101],["T_UNSET","unset",102],"(",["T_VARIABLE","$r",102],"[",["T_LNUMBER","0",102],"]",")",";",["T_WHITESPACE","\n\n        ",102],["T_COMMENT","\/\/ let's have a look if something changed in streams\n",104],["T_WHITESPACE","        ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","(",["T_VARIABLE","$r",105],["T_WHITESPACE"," ",105],["T_BOOLEAN_OR","||",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$w",105],")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_STRING","false",105],["T_WHITESPACE"," ",105],["T_IS_IDENTICAL","===",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$n",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],"@",["T_STRING","stream_select",105],"(",["T_VARIABLE","$r",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$w",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$e",105],",",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$blocking",105],["T_WHITESPACE"," ",105],"?",["T_WHITESPACE"," ",105],["T_STRING","Process",105],["T_DOUBLE_COLON","::",105],["T_STRING","TIMEOUT_PRECISION",105],["T_WHITESPACE"," ",105],"*",["T_WHITESPACE"," ",105],["T_DNUMBER","1E6",105],["T_WHITESPACE"," ",105],":",["T_WHITESPACE"," ",105],["T_LNUMBER","0",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_COMMENT","\/\/ if a system call has been interrupted, forget about it, let's try again\n",106],["T_WHITESPACE","            ",107],["T_COMMENT","\/\/ otherwise, an error occurred, let's reset pipes\n",107],["T_WHITESPACE","            ",108],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","hasSystemCallBeenInterrupted",108],"(",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n                ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","pipes",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",")",";",["T_WHITESPACE","\n            ",109],"}",["T_WHITESPACE","\n\n            ",110],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$read",112],";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_FOREACH","foreach",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$r",115],["T_WHITESPACE"," ",115],["T_AS","as",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$pipe",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n            ",115],["T_COMMENT","\/\/ prior PHP 5.4 the array passed to stream_select is modified and\n",116],["T_WHITESPACE","            ",117],["T_COMMENT","\/\/ lose key association, we have to find back the key\n",117],["T_WHITESPACE","            ",118],["T_VARIABLE","$read",118],"[",["T_VARIABLE","$type",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_search",118],"(",["T_VARIABLE","$pipe",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","pipes",118],",",["T_WHITESPACE"," ",118],["T_STRING","true",118],")","]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","''",118],";",["T_WHITESPACE","\n\n            ",118],["T_DO","do",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n                ",120],["T_VARIABLE","$data",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","fread",121],"(",["T_VARIABLE","$pipe",121],",",["T_WHITESPACE"," ",121],["T_STRING","self",121],["T_DOUBLE_COLON","::",121],["T_STRING","CHUNK_SIZE",121],")",";",["T_WHITESPACE","\n                ",121],["T_VARIABLE","$read",122],"[",["T_VARIABLE","$type",122],"]",["T_WHITESPACE"," ",122],["T_CONCAT_EQUAL",".=",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$data",122],";",["T_WHITESPACE","\n            ",122],"}",["T_WHITESPACE"," ",123],["T_WHILE","while",123],["T_WHITESPACE"," ",123],"(",["T_ISSET","isset",123],"(",["T_VARIABLE","$data",123],"[",["T_LNUMBER","0",123],"]",")",["T_WHITESPACE"," ",123],["T_BOOLEAN_AND","&&",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$close",123],["T_WHITESPACE"," ",123],["T_BOOLEAN_OR","||",123],["T_WHITESPACE"," ",123],["T_ISSET","isset",123],"(",["T_VARIABLE","$data",123],"[",["T_STRING","self",123],["T_DOUBLE_COLON","::",123],["T_STRING","CHUNK_SIZE",123],["T_WHITESPACE"," ",123],"-",["T_WHITESPACE"," ",123],["T_LNUMBER","1",123],"]",")",")",")",";",["T_WHITESPACE","\n\n            ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(","!",["T_ISSET","isset",125],"(",["T_VARIABLE","$read",125],"[",["T_VARIABLE","$type",125],"]","[",["T_LNUMBER","0",125],"]",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n                ",125],["T_UNSET","unset",126],"(",["T_VARIABLE","$read",126],"[",["T_VARIABLE","$type",126],"]",")",";",["T_WHITESPACE","\n            ",126],"}",["T_WHITESPACE","\n\n            ",127],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$close",129],["T_WHITESPACE"," ",129],["T_BOOLEAN_AND","&&",129],["T_WHITESPACE"," ",129],["T_STRING","feof",129],"(",["T_VARIABLE","$pipe",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n                ",129],["T_STRING","fclose",130],"(",["T_VARIABLE","$pipe",130],")",";",["T_WHITESPACE","\n                ",130],["T_UNSET","unset",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","pipes",131],"[",["T_VARIABLE","$type",131],"]",")",";",["T_WHITESPACE","\n            ",131],"}",["T_WHITESPACE","\n        ",132],"}",["T_WHITESPACE","\n\n        ",133],["T_RETURN","return",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$read",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",138],["T_WHITESPACE","\n    ",140],["T_PUBLIC","public",141],["T_WHITESPACE"," ",141],["T_FUNCTION","function",141],["T_WHITESPACE"," ",141],["T_STRING","haveReadSupport",141],"(",")",["T_WHITESPACE","\n    ",141],"{",["T_WHITESPACE","\n        ",142],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","haveReadSupport",143],";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",146],["T_WHITESPACE","\n    ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","areOpen",149],"(",")",["T_WHITESPACE","\n    ",149],"{",["T_WHITESPACE","\n        ",150],["T_RETURN","return",151],["T_WHITESPACE"," ",151],["T_BOOL_CAST","(bool)",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","pipes",151],";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n",152],"}",["T_WHITESPACE","\n",153]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Translation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Dumper",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Translation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","MessageCatalogue",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Translation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Exception",15],["T_NS_SEPARATOR","\\",15],["T_STRING","InvalidArgumentException",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Translation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","RuntimeException",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * FileDumper is an implementation of DumperInterface that dump a message catalogue to file(s).\n * Performs backup of already existing files.\n *\n * Options:\n * - path (mandatory): the directory where the files should be saved\n *\n * @author Michel Salib <michelsalib@hotmail.com>\n *\/",18],["T_WHITESPACE","\n",26],["T_ABSTRACT","abstract",27],["T_WHITESPACE"," ",27],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","FileDumper",27],["T_WHITESPACE"," ",27],["T_IMPLEMENTS","implements",27],["T_WHITESPACE"," ",27],["T_STRING","DumperInterface",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * A template for the relative paths to files.\n     *\n     * @var string\n     *\/",29],["T_WHITESPACE","\n    ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$relativePathTemplate",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'%domain%.%locale%.%extension%'",34],";",["T_WHITESPACE","\n\n    ",34],["T_DOC_COMMENT","\/**\n     * Make file backup before the dump.\n     *\n     * @var bool\n     *\/",36],["T_WHITESPACE","\n    ",40],["T_PRIVATE","private",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$backup",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","true",41],";",["T_WHITESPACE","\n\n    ",41],["T_DOC_COMMENT","\/**\n     * Sets the template for the relative paths to files.\n     *\n     * @param string $relativePathTemplate A template for the relative paths to files\n     *\/",43],["T_WHITESPACE","\n    ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","setRelativePathTemplate",48],"(",["T_VARIABLE","$relativePathTemplate",48],")",["T_WHITESPACE","\n    ",48],"{",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","relativePathTemplate",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$relativePathTemplate",50],";",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n\n    ",51],["T_DOC_COMMENT","\/**\n     * Sets backup flag.\n     *\n     * @param bool\n     *\/",53],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","setBackup",58],"(",["T_VARIABLE","$backup",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","backup",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$backup",60],";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",63],["T_WHITESPACE","\n    ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","dump",66],"(",["T_STRING","MessageCatalogue",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$messages",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$options",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",")",["T_WHITESPACE","\n    ",66],"{",["T_WHITESPACE","\n        ",67],["T_IF","if",68],["T_WHITESPACE"," ",68],"(","!",["T_STRING","array_key_exists",68],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$options",68],")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n            ",68],["T_THROW","throw",69],["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_STRING","InvalidArgumentException",69],"(",["T_CONSTANT_ENCAPSED_STRING","'The file dumper needs a path option.'",69],")",";",["T_WHITESPACE","\n        ",69],"}",["T_WHITESPACE","\n\n        ",70],["T_COMMENT","\/\/ save a file for each domain\n",72],["T_WHITESPACE","        ",73],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$messages",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getDomains",73],"(",")",["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$domain",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n            ",73],["T_COMMENT","\/\/ backup\n",74],["T_WHITESPACE","            ",75],["T_VARIABLE","$fullpath",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$options",75],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",75],"]",".",["T_CONSTANT_ENCAPSED_STRING","'\/'",75],".",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRelativePath",75],"(",["T_VARIABLE","$domain",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$messages",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getLocale",75],"(",")",")",";",["T_WHITESPACE","\n            ",75],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_STRING","file_exists",76],"(",["T_VARIABLE","$fullpath",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n                ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","backup",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n                    ",77],"@",["T_STRING","trigger_error",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Creating a backup while dumping a message catalogue is deprecated since version 3.1 and will be removed in 4.0. Use TranslationWriter::disableBackup() to disable the backup.'",78],",",["T_WHITESPACE"," ",78],["T_STRING","E_USER_DEPRECATED",78],")",";",["T_WHITESPACE","\n                    ",78],["T_STRING","copy",79],"(",["T_VARIABLE","$fullpath",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$fullpath",79],".",["T_CONSTANT_ENCAPSED_STRING","'~'",79],")",";",["T_WHITESPACE","\n                ",79],"}",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE"," ",81],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n                ",81],["T_VARIABLE","$directory",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","dirname",82],"(",["T_VARIABLE","$fullpath",82],")",";",["T_WHITESPACE","\n                ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(","!",["T_STRING","file_exists",83],"(",["T_VARIABLE","$directory",83],")",["T_WHITESPACE"," ",83],["T_BOOLEAN_AND","&&",83],["T_WHITESPACE"," ",83],"!","@",["T_STRING","mkdir",83],"(",["T_VARIABLE","$directory",83],",",["T_WHITESPACE"," ",83],["T_LNUMBER","0777",83],",",["T_WHITESPACE"," ",83],["T_STRING","true",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n                    ",83],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_NEW","new",84],["T_WHITESPACE"," ",84],["T_STRING","RuntimeException",84],"(",["T_STRING","sprintf",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to create directory \"%s\".'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$directory",84],")",")",";",["T_WHITESPACE","\n                ",84],"}",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n            ",86],["T_COMMENT","\/\/ save file\n",87],["T_WHITESPACE","            ",88],["T_STRING","file_put_contents",88],"(",["T_VARIABLE","$fullpath",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","formatCatalogue",88],"(",["T_VARIABLE","$messages",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$domain",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$options",88],")",")",";",["T_WHITESPACE","\n        ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_DOC_COMMENT","\/**\n     * Transforms a domain of a message catalogue to its string representation.\n     *\n     * @param MessageCatalogue $messages\n     * @param string           $domain\n     * @param array            $options\n     *\n     * @return string representation\n     *\/",92],["T_WHITESPACE","\n    ",100],["T_ABSTRACT","abstract",101],["T_WHITESPACE"," ",101],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","formatCatalogue",101],"(",["T_STRING","MessageCatalogue",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$messages",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$domain",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$options",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",")",")",";",["T_WHITESPACE","\n\n    ",101],["T_DOC_COMMENT","\/**\n     * Gets the file extension of the dumper.\n     *\n     * @return string file extension\n     *\/",103],["T_WHITESPACE","\n    ",107],["T_ABSTRACT","abstract",108],["T_WHITESPACE"," ",108],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getExtension",108],"(",")",";",["T_WHITESPACE","\n\n    ",108],["T_DOC_COMMENT","\/**\n     * Gets the relative file path using the template.\n     *\n     * @param string $domain The domain\n     * @param string $locale The locale\n     *\n     * @return string The relative file path\n     *\/",110],["T_WHITESPACE","\n    ",117],["T_PRIVATE","private",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","getRelativePath",118],"(",["T_VARIABLE","$domain",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$locale",118],")",["T_WHITESPACE","\n    ",118],"{",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_STRING","strtr",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","relativePathTemplate",120],",",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_WHITESPACE","\n            ",120],["T_CONSTANT_ENCAPSED_STRING","'%domain%'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$domain",121],",",["T_WHITESPACE","\n            ",121],["T_CONSTANT_ENCAPSED_STRING","'%locale%'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$locale",122],",",["T_WHITESPACE","\n            ",122],["T_CONSTANT_ENCAPSED_STRING","'%extension%'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getExtension",123],"(",")",",",["T_WHITESPACE","\n        ",123],")",")",";",["T_WHITESPACE","\n    ",124],"}",["T_WHITESPACE","\n",125],"}",["T_WHITESPACE","\n",126]]
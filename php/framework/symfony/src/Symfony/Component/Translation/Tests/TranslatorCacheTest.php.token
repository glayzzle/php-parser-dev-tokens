[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Translation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Config",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Resource",14],["T_NS_SEPARATOR","\\",14],["T_STRING","SelfCheckingResourceInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Translation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Loader",15],["T_NS_SEPARATOR","\\",15],["T_STRING","ArrayLoader",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Translation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Loader",16],["T_NS_SEPARATOR","\\",16],["T_STRING","LoaderInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Translation",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Translator",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Translation",18],["T_NS_SEPARATOR","\\",18],["T_STRING","MessageCatalogue",18],";",["T_WHITESPACE","\n\n",18],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","TranslatorCacheTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_NS_SEPARATOR","\\",20],["T_STRING","PHPUnit_Framework_TestCase",20],["T_WHITESPACE","\n",20],"{",["T_WHITESPACE","\n    ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$tmpDir",22],";",["T_WHITESPACE","\n\n    ",22],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE","\n    ",24],"{",["T_WHITESPACE","\n        ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","tmpDir",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","sys_get_temp_dir",26],"(",")",".",["T_CONSTANT_ENCAPSED_STRING","'\/sf2_translation'",26],";",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","deleteTmpDir",27],"(",")",";",["T_WHITESPACE","\n    ",27],"}",["T_WHITESPACE","\n\n    ",28],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","tearDown",30],"(",")",["T_WHITESPACE","\n    ",30],"{",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","deleteTmpDir",32],"(",")",";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","deleteTmpDir",35],"(",")",["T_WHITESPACE","\n    ",35],"{",["T_WHITESPACE","\n        ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(","!",["T_STRING","file_exists",37],"(",["T_VARIABLE","$dir",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","tmpDir",37],")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n            ",37],["T_RETURN","return",38],";",["T_WHITESPACE","\n        ",38],"}",["T_WHITESPACE","\n\n        ",39],["T_VARIABLE","$iterator",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NEW","new",41],["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","RecursiveIteratorIterator",41],"(",["T_NEW","new",41],["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","RecursiveDirectoryIterator",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","tmpDir",41],")",",",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","RecursiveIteratorIterator",41],["T_DOUBLE_COLON","::",41],["T_STRING","CHILD_FIRST",41],")",";",["T_WHITESPACE","\n        ",41],["T_FOREACH","foreach",42],["T_WHITESPACE"," ",42],"(",["T_VARIABLE","$iterator",42],["T_WHITESPACE"," ",42],["T_AS","as",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$path",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n            ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_STRING","preg_match",43],"(",["T_CONSTANT_ENCAPSED_STRING","'#[\/\\\\\\\\]\\.\\.?$#'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$path",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","__toString",43],"(",")",")",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n                ",43],["T_CONTINUE","continue",44],";",["T_WHITESPACE","\n            ",44],"}",["T_WHITESPACE","\n            ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_VARIABLE","$path",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","isDir",46],"(",")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n                ",46],["T_STRING","rmdir",47],"(",["T_VARIABLE","$path",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","__toString",47],"(",")",")",";",["T_WHITESPACE","\n            ",47],"}",["T_WHITESPACE"," ",48],["T_ELSE","else",48],["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n                ",48],["T_STRING","unlink",49],"(",["T_VARIABLE","$path",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","__toString",49],"(",")",")",";",["T_WHITESPACE","\n            ",49],"}",["T_WHITESPACE","\n        ",50],"}",["T_WHITESPACE","\n        ",51],["T_STRING","rmdir",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","tmpDir",52],")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_DOC_COMMENT","\/**\n     * @dataProvider runForDebugAndProduction\n     *\/",55],["T_WHITESPACE","\n    ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","testThatACacheIsUsed",58],"(",["T_VARIABLE","$debug",58],")",["T_WHITESPACE","\n    ",58],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$locale",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'any_locale'",60],";",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$format",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'some_format'",61],";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$msgid",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'test'",62],";",["T_WHITESPACE","\n\n        ",62],["T_COMMENT","\/\/ Prime the cache\n",64],["T_WHITESPACE","        ",65],["T_VARIABLE","$translator",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_NEW","new",65],["T_WHITESPACE"," ",65],["T_STRING","Translator",65],"(",["T_VARIABLE","$locale",65],",",["T_WHITESPACE"," ",65],["T_STRING","null",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","tmpDir",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$debug",65],")",";",["T_WHITESPACE","\n        ",65],["T_VARIABLE","$translator",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addLoader",66],"(",["T_VARIABLE","$format",66],",",["T_WHITESPACE"," ",66],["T_NEW","new",66],["T_WHITESPACE"," ",66],["T_STRING","ArrayLoader",66],"(",")",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$translator",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","addResource",67],"(",["T_VARIABLE","$format",67],",",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_VARIABLE","$msgid",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'OK'",67],")",",",["T_WHITESPACE"," ",67],["T_VARIABLE","$locale",67],")",";",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$translator",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","trans",68],"(",["T_VARIABLE","$msgid",68],")",";",["T_WHITESPACE","\n\n        ",68],["T_COMMENT","\/\/ Try again and see we get a valid result whilst no loader can be used\n",70],["T_WHITESPACE","        ",71],["T_VARIABLE","$translator",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","Translator",71],"(",["T_VARIABLE","$locale",71],",",["T_WHITESPACE"," ",71],["T_STRING","null",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","tmpDir",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$debug",71],")",";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$translator",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","addLoader",72],"(",["T_VARIABLE","$format",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","createFailingLoader",72],"(",")",")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$translator",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","addResource",73],"(",["T_VARIABLE","$format",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_VARIABLE","$msgid",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'OK'",73],")",",",["T_WHITESPACE"," ",73],["T_VARIABLE","$locale",73],")",";",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEquals",74],"(",["T_CONSTANT_ENCAPSED_STRING","'OK'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$translator",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","trans",74],"(",["T_VARIABLE","$msgid",74],")",",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'-> caching does not work in '",74],".","(",["T_VARIABLE","$debug",74],["T_WHITESPACE"," ",74],"?",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'debug'",74],["T_WHITESPACE"," ",74],":",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'production'",74],")",")",";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testCatalogueIsReloadedWhenResourcesAreNoLongerFresh",77],"(",")",["T_WHITESPACE","\n    ",77],"{",["T_WHITESPACE","\n        ",78],["T_COMMENT","\/*\n         * The testThatACacheIsUsed() test showed that we don't need the loader as long as the cache\n         * is fresh.\n         *\n         * Now we add a Resource that is never fresh and make sure that the\n         * cache is discarded (the loader is called twice).\n         *\n         * We need to run this for debug=true only because in production the cache\n         * will never be revalidated.\n         *\/",79],["T_WHITESPACE","\n\n        ",88],["T_VARIABLE","$locale",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'any_locale'",90],";",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$format",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'some_format'",91],";",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$msgid",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'test'",92],";",["T_WHITESPACE","\n\n        ",92],["T_VARIABLE","$catalogue",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","MessageCatalogue",94],"(",["T_VARIABLE","$locale",94],",",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$catalogue",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","addResource",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","StaleResource",95],"(",")",")",";",["T_WHITESPACE"," ",95],["T_COMMENT","\/\/ better use a helper class than a mock, because it gets serialized in the cache and re-loaded\n",95],["T_WHITESPACE","\n        ",96],["T_DOC_COMMENT","\/** @var LoaderInterface|\\PHPUnit_Framework_MockObject_MockObject $loader *\/",97],["T_WHITESPACE","\n        ",97],["T_VARIABLE","$loader",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getMockBuilder",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Translation\\Loader\\LoaderInterface'",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getMock",98],"(",")",";",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$loader",99],["T_WHITESPACE","\n            ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","expects",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","exactly",100],"(",["T_LNUMBER","2",100],")",")",["T_WHITESPACE","\n            ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","method",101],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",101],")",["T_WHITESPACE","\n            ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","will",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","returnValue",102],"(",["T_VARIABLE","$catalogue",102],")",")",["T_WHITESPACE","\n        ",102],";",["T_WHITESPACE","\n\n        ",103],["T_COMMENT","\/\/ 1st pass\n",105],["T_WHITESPACE","        ",106],["T_VARIABLE","$translator",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_NEW","new",106],["T_WHITESPACE"," ",106],["T_STRING","Translator",106],"(",["T_VARIABLE","$locale",106],",",["T_WHITESPACE"," ",106],["T_STRING","null",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","tmpDir",106],",",["T_WHITESPACE"," ",106],["T_STRING","true",106],")",";",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$translator",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","addLoader",107],"(",["T_VARIABLE","$format",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$loader",107],")",";",["T_WHITESPACE","\n        ",107],["T_VARIABLE","$translator",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","addResource",108],"(",["T_VARIABLE","$format",108],",",["T_WHITESPACE"," ",108],["T_STRING","null",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$locale",108],")",";",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$translator",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","trans",109],"(",["T_VARIABLE","$msgid",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_COMMENT","\/\/ 2nd pass\n",111],["T_WHITESPACE","        ",112],["T_VARIABLE","$translator",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","Translator",112],"(",["T_VARIABLE","$locale",112],",",["T_WHITESPACE"," ",112],["T_STRING","null",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","tmpDir",112],",",["T_WHITESPACE"," ",112],["T_STRING","true",112],")",";",["T_WHITESPACE","\n        ",112],["T_VARIABLE","$translator",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","addLoader",113],"(",["T_VARIABLE","$format",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$loader",113],")",";",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$translator",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","addResource",114],"(",["T_VARIABLE","$format",114],",",["T_WHITESPACE"," ",114],["T_STRING","null",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$locale",114],")",";",["T_WHITESPACE","\n        ",114],["T_VARIABLE","$translator",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","trans",115],"(",["T_VARIABLE","$msgid",115],")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @dataProvider runForDebugAndProduction\n     *\/",118],["T_WHITESPACE","\n    ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","testDifferentTranslatorsForSameLocaleDoNotOverwriteEachOthersCache",121],"(",["T_VARIABLE","$debug",121],")",["T_WHITESPACE","\n    ",121],"{",["T_WHITESPACE","\n        ",122],["T_COMMENT","\/*\n         * Similar to the previous test. After we used the second translator, make\n         * sure there's still a useable cache for the first one.\n         *\/",123],["T_WHITESPACE","\n\n        ",126],["T_VARIABLE","$locale",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'any_locale'",128],";",["T_WHITESPACE","\n        ",128],["T_VARIABLE","$format",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'some_format'",129],";",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$msgid",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'test'",130],";",["T_WHITESPACE","\n\n        ",130],["T_COMMENT","\/\/ Create a Translator and prime its cache\n",132],["T_WHITESPACE","        ",133],["T_VARIABLE","$translator",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_NEW","new",133],["T_WHITESPACE"," ",133],["T_STRING","Translator",133],"(",["T_VARIABLE","$locale",133],",",["T_WHITESPACE"," ",133],["T_STRING","null",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","tmpDir",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$debug",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$translator",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","addLoader",134],"(",["T_VARIABLE","$format",134],",",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","ArrayLoader",134],"(",")",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$translator",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","addResource",135],"(",["T_VARIABLE","$format",135],",",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_VARIABLE","$msgid",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'OK'",135],")",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$locale",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$translator",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","trans",136],"(",["T_VARIABLE","$msgid",136],")",";",["T_WHITESPACE","\n\n        ",136],["T_COMMENT","\/\/ Create another Translator with a different catalogue for the same locale\n",138],["T_WHITESPACE","        ",139],["T_VARIABLE","$translator",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_STRING","Translator",139],"(",["T_VARIABLE","$locale",139],",",["T_WHITESPACE"," ",139],["T_STRING","null",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","tmpDir",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$debug",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$translator",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","addLoader",140],"(",["T_VARIABLE","$format",140],",",["T_WHITESPACE"," ",140],["T_NEW","new",140],["T_WHITESPACE"," ",140],["T_STRING","ArrayLoader",140],"(",")",")",";",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$translator",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","addResource",141],"(",["T_VARIABLE","$format",141],",",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_VARIABLE","$msgid",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'FAIL'",141],")",",",["T_WHITESPACE"," ",141],["T_VARIABLE","$locale",141],")",";",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$translator",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","trans",142],"(",["T_VARIABLE","$msgid",142],")",";",["T_WHITESPACE","\n\n        ",142],["T_COMMENT","\/\/ Now the first translator must still have a useable cache.\n",144],["T_WHITESPACE","        ",145],["T_VARIABLE","$translator",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","Translator",145],"(",["T_VARIABLE","$locale",145],",",["T_WHITESPACE"," ",145],["T_STRING","null",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","tmpDir",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$debug",145],")",";",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$translator",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addLoader",146],"(",["T_VARIABLE","$format",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","createFailingLoader",146],"(",")",")",";",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$translator",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","addResource",147],"(",["T_VARIABLE","$format",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_VARIABLE","$msgid",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'OK'",147],")",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$locale",147],")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertEquals",148],"(",["T_CONSTANT_ENCAPSED_STRING","'OK'",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$translator",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","trans",148],"(",["T_VARIABLE","$msgid",148],")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'-> the cache was overwritten by another translator instance in '",148],".","(",["T_VARIABLE","$debug",148],["T_WHITESPACE"," ",148],"?",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'debug'",148],["T_WHITESPACE"," ",148],":",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'production'",148],")",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","testDifferentCacheFilesAreUsedForDifferentSetsOfFallbackLocales",151],"(",")",["T_WHITESPACE","\n    ",151],"{",["T_WHITESPACE","\n        ",152],["T_COMMENT","\/*\n         * Because the cache file contains a catalogue including all of its fallback\n         * catalogues, we must take the set of fallback locales into consideration when\n         * loading a catalogue from the cache.\n         *\/",153],["T_WHITESPACE","\n        ",157],["T_VARIABLE","$translator",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_NEW","new",158],["T_WHITESPACE"," ",158],["T_STRING","Translator",158],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",158],",",["T_WHITESPACE"," ",158],["T_STRING","null",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","tmpDir",158],")",";",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$translator",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","setFallbackLocales",159],"(",["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",159],")",")",";",["T_WHITESPACE","\n\n        ",159],["T_VARIABLE","$translator",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","addLoader",161],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",161],",",["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","ArrayLoader",161],"(",")",")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$translator",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","addResource",162],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",162],",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'foo (a)'",162],")",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'a'",162],")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$translator",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","addResource",163],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",163],",",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'bar (b)'",163],")",",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'b'",163],")",";",["T_WHITESPACE","\n\n        ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertEquals",165],"(",["T_CONSTANT_ENCAPSED_STRING","'bar (b)'",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$translator",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","trans",165],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",165],")",")",";",["T_WHITESPACE","\n\n        ",165],["T_COMMENT","\/\/ Remove fallback locale\n",167],["T_WHITESPACE","        ",168],["T_VARIABLE","$translator",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","setFallbackLocales",168],"(",["T_ARRAY","array",168],"(",")",")",";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEquals",169],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$translator",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","trans",169],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",169],")",")",";",["T_WHITESPACE","\n\n        ",169],["T_COMMENT","\/\/ Use a fresh translator with no fallback locales, result should be the same\n",171],["T_WHITESPACE","        ",172],["T_VARIABLE","$translator",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Translator",172],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",172],",",["T_WHITESPACE"," ",172],["T_STRING","null",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","tmpDir",172],")",";",["T_WHITESPACE","\n\n        ",172],["T_VARIABLE","$translator",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","addLoader",174],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",174],",",["T_WHITESPACE"," ",174],["T_NEW","new",174],["T_WHITESPACE"," ",174],["T_STRING","ArrayLoader",174],"(",")",")",";",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$translator",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","addResource",175],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",175],",",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'foo (a)'",175],")",",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'a'",175],")",";",["T_WHITESPACE","\n        ",175],["T_VARIABLE","$translator",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","addResource",176],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'bar (b)'",176],")",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'b'",176],")",";",["T_WHITESPACE","\n\n        ",176],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertEquals",178],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$translator",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","trans",178],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",178],")",")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","testPrimaryAndFallbackCataloguesContainTheSameMessagesRegardlessOfCaching",181],"(",")",["T_WHITESPACE","\n    ",181],"{",["T_WHITESPACE","\n        ",182],["T_COMMENT","\/*\n         * As a safeguard against potential BC breaks, make sure that primary and fallback\n         * catalogues (reachable via getFallbackCatalogue()) always contain the full set of\n         * messages provided by the loader. This must also be the case when these catalogues\n         * are (internally) read from a cache.\n         *\n         * Optimizations inside the translator must not change this behaviour.\n         *\/",183],["T_WHITESPACE","\n\n        ",190],["T_COMMENT","\/*\n         * Create a translator that loads two catalogues for two different locales.\n         * The catalogues contain distinct sets of messages.\n         *\/",192],["T_WHITESPACE","\n        ",195],["T_VARIABLE","$translator",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_NEW","new",196],["T_WHITESPACE"," ",196],["T_STRING","Translator",196],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",196],",",["T_WHITESPACE"," ",196],["T_STRING","null",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","tmpDir",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$translator",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","setFallbackLocales",197],"(",["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",197],")",")",";",["T_WHITESPACE","\n\n        ",197],["T_VARIABLE","$translator",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","addLoader",199],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",199],",",["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_STRING","ArrayLoader",199],"(",")",")",";",["T_WHITESPACE","\n        ",199],["T_VARIABLE","$translator",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","addResource",200],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'foo (a)'",200],")",",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'a'",200],")",";",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$translator",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","addResource",201],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'foo (b)'",201],")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'b'",201],")",";",["T_WHITESPACE","\n        ",201],["T_VARIABLE","$translator",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","addResource",202],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",202],",",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'bar (b)'",202],")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'b'",202],")",";",["T_WHITESPACE","\n\n        ",202],["T_VARIABLE","$catalogue",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$translator",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getCatalogue",204],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",204],")",";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","assertFalse",205],"(",["T_VARIABLE","$catalogue",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","defines",205],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",205],")",")",";",["T_WHITESPACE"," ",205],["T_COMMENT","\/\/ Sure, the \"a\" catalogue does not contain that message.\n",205],["T_WHITESPACE","\n        ",206],["T_VARIABLE","$fallback",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$catalogue",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getFallbackCatalogue",207],"(",")",";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertTrue",208],"(",["T_VARIABLE","$fallback",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","defines",208],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",208],")",")",";",["T_WHITESPACE"," ",208],["T_COMMENT","\/\/ \"foo\" is present in \"a\" and \"b\"\n",208],["T_WHITESPACE","\n        ",209],["T_COMMENT","\/*\n         * Now, repeat the same test.\n         * Behind the scenes, the cache is used. But that should not matter, right?\n         *\/",210],["T_WHITESPACE","\n        ",213],["T_VARIABLE","$translator",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_NEW","new",214],["T_WHITESPACE"," ",214],["T_STRING","Translator",214],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",214],",",["T_WHITESPACE"," ",214],["T_STRING","null",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","tmpDir",214],")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$translator",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","setFallbackLocales",215],"(",["T_ARRAY","array",215],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",215],")",")",";",["T_WHITESPACE","\n\n        ",215],["T_VARIABLE","$translator",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","addLoader",217],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",217],",",["T_WHITESPACE"," ",217],["T_NEW","new",217],["T_WHITESPACE"," ",217],["T_STRING","ArrayLoader",217],"(",")",")",";",["T_WHITESPACE","\n        ",217],["T_VARIABLE","$translator",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","addResource",218],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",218],",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'foo (a)'",218],")",",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'a'",218],")",";",["T_WHITESPACE","\n        ",218],["T_VARIABLE","$translator",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","addResource",219],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",219],",",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'foo (b)'",219],")",",",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'b'",219],")",";",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$translator",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","addResource",220],"(",["T_CONSTANT_ENCAPSED_STRING","'array'",220],",",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'bar (b)'",220],")",",",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'b'",220],")",";",["T_WHITESPACE","\n\n        ",220],["T_VARIABLE","$catalogue",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$translator",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","getCatalogue",222],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",222],")",";",["T_WHITESPACE","\n        ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertFalse",223],"(",["T_VARIABLE","$catalogue",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","defines",223],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",223],")",")",";",["T_WHITESPACE","\n\n        ",223],["T_VARIABLE","$fallback",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$catalogue",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getFallbackCatalogue",225],"(",")",";",["T_WHITESPACE","\n        ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertTrue",226],"(",["T_VARIABLE","$fallback",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","defines",226],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",226],")",")",";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","testRefreshCacheWhenResourcesAreNoLongerFresh",229],"(",")",["T_WHITESPACE","\n    ",229],"{",["T_WHITESPACE","\n        ",230],["T_VARIABLE","$resource",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getMockBuilder",231],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Config\\Resource\\SelfCheckingResourceInterface'",231],")",["T_OBJECT_OPERATOR","->",231],["T_STRING","getMock",231],"(",")",";",["T_WHITESPACE","\n        ",231],["T_VARIABLE","$loader",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","getMockBuilder",232],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Translation\\Loader\\LoaderInterface'",232],")",["T_OBJECT_OPERATOR","->",232],["T_STRING","getMock",232],"(",")",";",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$resource",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","method",233],"(",["T_CONSTANT_ENCAPSED_STRING","'isFresh'",233],")",["T_OBJECT_OPERATOR","->",233],["T_STRING","will",233],"(",["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","returnValue",233],"(",["T_STRING","false",233],")",")",";",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$loader",234],["T_WHITESPACE","\n            ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","expects",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","exactly",235],"(",["T_LNUMBER","2",235],")",")",["T_WHITESPACE","\n            ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","method",236],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",236],")",["T_WHITESPACE","\n            ",236],["T_OBJECT_OPERATOR","->",237],["T_STRING","will",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","returnValue",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getCatalogue",237],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",237],",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",["T_VARIABLE","$resource",237],")",")",")",")",";",["T_WHITESPACE","\n\n        ",237],["T_COMMENT","\/\/ prime the cache\n",239],["T_WHITESPACE","        ",240],["T_VARIABLE","$translator",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_NEW","new",240],["T_WHITESPACE"," ",240],["T_STRING","Translator",240],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",240],",",["T_WHITESPACE"," ",240],["T_STRING","null",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","tmpDir",240],",",["T_WHITESPACE"," ",240],["T_STRING","true",240],")",";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$translator",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","addLoader",241],"(",["T_CONSTANT_ENCAPSED_STRING","'loader'",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$loader",241],")",";",["T_WHITESPACE","\n        ",241],["T_VARIABLE","$translator",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","addResource",242],"(",["T_CONSTANT_ENCAPSED_STRING","'loader'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'foo'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'fr'",242],")",";",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$translator",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","trans",243],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",243],")",";",["T_WHITESPACE","\n\n        ",243],["T_COMMENT","\/\/ prime the cache second time\n",245],["T_WHITESPACE","        ",246],["T_VARIABLE","$translator",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_NEW","new",246],["T_WHITESPACE"," ",246],["T_STRING","Translator",246],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",246],",",["T_WHITESPACE"," ",246],["T_STRING","null",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","tmpDir",246],",",["T_WHITESPACE"," ",246],["T_STRING","true",246],")",";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$translator",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","addLoader",247],"(",["T_CONSTANT_ENCAPSED_STRING","'loader'",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$loader",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$translator",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","addResource",248],"(",["T_CONSTANT_ENCAPSED_STRING","'loader'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'foo'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'fr'",248],")",";",["T_WHITESPACE","\n        ",248],["T_VARIABLE","$translator",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","trans",249],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",249],")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n\n    ",250],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","getCatalogue",252],"(",["T_VARIABLE","$locale",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$messages",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$resources",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",")",")",["T_WHITESPACE","\n    ",252],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$catalogue",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_NEW","new",254],["T_WHITESPACE"," ",254],["T_STRING","MessageCatalogue",254],"(",["T_VARIABLE","$locale",254],")",";",["T_WHITESPACE","\n        ",254],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$messages",255],["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$key",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$translation",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n            ",255],["T_VARIABLE","$catalogue",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","set",256],"(",["T_VARIABLE","$key",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$translation",256],")",";",["T_WHITESPACE","\n        ",256],"}",["T_WHITESPACE","\n        ",257],["T_FOREACH","foreach",258],["T_WHITESPACE"," ",258],"(",["T_VARIABLE","$resources",258],["T_WHITESPACE"," ",258],["T_AS","as",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$resource",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n            ",258],["T_VARIABLE","$catalogue",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","addResource",259],"(",["T_VARIABLE","$resource",259],")",";",["T_WHITESPACE","\n        ",259],"}",["T_WHITESPACE","\n\n        ",260],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$catalogue",262],";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_PUBLIC","public",265],["T_WHITESPACE"," ",265],["T_FUNCTION","function",265],["T_WHITESPACE"," ",265],["T_STRING","runForDebugAndProduction",265],"(",")",["T_WHITESPACE","\n    ",265],"{",["T_WHITESPACE","\n        ",266],["T_RETURN","return",267],["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",["T_ARRAY","array",267],"(",["T_STRING","true",267],")",",",["T_WHITESPACE"," ",267],["T_ARRAY","array",267],"(",["T_STRING","false",267],")",")",";",["T_WHITESPACE","\n    ",267],"}",["T_WHITESPACE","\n\n    ",268],["T_DOC_COMMENT","\/**\n     * @return LoaderInterface\n     *\/",270],["T_WHITESPACE","\n    ",272],["T_PRIVATE","private",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","createFailingLoader",273],"(",")",["T_WHITESPACE","\n    ",273],"{",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$loader",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","getMockBuilder",275],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Translation\\Loader\\LoaderInterface'",275],")",["T_OBJECT_OPERATOR","->",275],["T_STRING","getMock",275],"(",")",";",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$loader",276],["T_WHITESPACE","\n            ",276],["T_OBJECT_OPERATOR","->",277],["T_STRING","expects",277],"(",["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","never",277],"(",")",")",["T_WHITESPACE","\n            ",277],["T_OBJECT_OPERATOR","->",278],["T_STRING","method",278],"(",["T_CONSTANT_ENCAPSED_STRING","'load'",278],")",";",["T_WHITESPACE","\n\n        ",278],["T_RETURN","return",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$loader",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n",281],"}",["T_WHITESPACE","\n\n",282],["T_CLASS","class",284],["T_WHITESPACE"," ",284],["T_STRING","StaleResource",284],["T_WHITESPACE"," ",284],["T_IMPLEMENTS","implements",284],["T_WHITESPACE"," ",284],["T_STRING","SelfCheckingResourceInterface",284],["T_WHITESPACE","\n",284],"{",["T_WHITESPACE","\n    ",285],["T_PUBLIC","public",286],["T_WHITESPACE"," ",286],["T_FUNCTION","function",286],["T_WHITESPACE"," ",286],["T_STRING","isFresh",286],"(",["T_VARIABLE","$timestamp",286],")",["T_WHITESPACE","\n    ",286],"{",["T_WHITESPACE","\n        ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_STRING","false",288],";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","getResource",291],"(",")",["T_WHITESPACE","\n    ",291],"{",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","__toString",295],"(",")",["T_WHITESPACE","\n    ",295],"{",["T_WHITESPACE","\n        ",296],["T_RETURN","return",297],["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","''",297],";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n",298],"}",["T_WHITESPACE","\n",299]]
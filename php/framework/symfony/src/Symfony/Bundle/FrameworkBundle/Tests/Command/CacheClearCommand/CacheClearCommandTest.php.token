[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bundle",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FrameworkBundle",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Tests",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Command",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CacheClearCommand",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Bundle",14],["T_NS_SEPARATOR","\\",14],["T_STRING","FrameworkBundle",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Console",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Application",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Bundle",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FrameworkBundle",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Tests",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Command",15],["T_NS_SEPARATOR","\\",15],["T_STRING","CacheClearCommand",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Fixture",15],["T_NS_SEPARATOR","\\",15],["T_STRING","TestAppKernel",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Bundle",16],["T_NS_SEPARATOR","\\",16],["T_STRING","FrameworkBundle",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Tests",16],["T_NS_SEPARATOR","\\",16],["T_STRING","TestCase",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Config",17],["T_NS_SEPARATOR","\\",17],["T_STRING","ConfigCacheFactory",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Config",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Resource",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ResourceInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Console",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Input",19],["T_NS_SEPARATOR","\\",19],["T_STRING","ArrayInput",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Console",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Output",20],["T_NS_SEPARATOR","\\",20],["T_STRING","NullOutput",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Symfony",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Component",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Filesystem",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Filesystem",21],";",["T_WHITESPACE","\n",21],["T_USE","use",22],["T_WHITESPACE"," ",22],["T_STRING","Symfony",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Component",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Finder",22],["T_NS_SEPARATOR","\\",22],["T_STRING","Finder",22],";",["T_WHITESPACE","\n\n",22],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","CacheClearCommandTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","TestCase",24],["T_WHITESPACE","\n",24],"{",["T_WHITESPACE","\n    ",25],["T_DOC_COMMENT","\/** @var TestAppKernel *\/",26],["T_WHITESPACE","\n    ",26],["T_PRIVATE","private",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$kernel",27],";",["T_WHITESPACE","\n    ",27],["T_DOC_COMMENT","\/** @var Filesystem *\/",28],["T_WHITESPACE","\n    ",28],["T_PRIVATE","private",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$fs",29],";",["T_WHITESPACE","\n    ",29],["T_PRIVATE","private",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$rootDir",30],";",["T_WHITESPACE","\n\n    ",30],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","setUp",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","fs",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NEW","new",34],["T_WHITESPACE"," ",34],["T_STRING","Filesystem",34],"(",")",";",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","kernel",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_NEW","new",35],["T_WHITESPACE"," ",35],["T_STRING","TestAppKernel",35],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",35],",",["T_WHITESPACE"," ",35],["T_STRING","true",35],")",";",["T_WHITESPACE","\n        ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","rootDir",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","sys_get_temp_dir",36],"(",")",".",["T_STRING","DIRECTORY_SEPARATOR",36],".",["T_STRING","uniqid",36],"(",["T_CONSTANT_ENCAPSED_STRING","'sf2_cache_'",36],",",["T_WHITESPACE"," ",36],["T_STRING","true",36],")",";",["T_WHITESPACE","\n        ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","kernel",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setRootDir",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","rootDir",37],")",";",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","fs",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","mkdir",38],"(",["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","rootDir",38],")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","tearDown",41],"(",")",["T_WHITESPACE","\n    ",41],"{",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","fs",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","remove",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","rootDir",43],")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testCacheIsFreshAfterCacheClearedWithWarmup",46],"(",")",["T_WHITESPACE","\n    ",46],"{",["T_WHITESPACE","\n        ",47],["T_VARIABLE","$input",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_STRING","ArrayInput",48],"(",["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'cache:clear'",48],")",")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$application",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NEW","new",49],["T_WHITESPACE"," ",49],["T_STRING","Application",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","kernel",49],")",";",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$application",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setCatchExceptions",50],"(",["T_STRING","false",50],")",";",["T_WHITESPACE","\n\n        ",50],["T_VARIABLE","$application",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","doRun",52],"(",["T_VARIABLE","$input",52],",",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_STRING","NullOutput",52],"(",")",")",";",["T_WHITESPACE","\n\n        ",52],["T_COMMENT","\/\/ Ensure that all *.meta files are fresh\n",54],["T_WHITESPACE","        ",55],["T_VARIABLE","$finder",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_STRING","Finder",55],"(",")",";",["T_WHITESPACE","\n        ",55],["T_VARIABLE","$metaFiles",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$finder",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","files",56],"(",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","in",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","kernel",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getCacheDir",56],"(",")",")",["T_OBJECT_OPERATOR","->",56],["T_STRING","name",56],"(",["T_CONSTANT_ENCAPSED_STRING","'*.php.meta'",56],")",";",["T_WHITESPACE","\n        ",56],["T_COMMENT","\/\/ simply check that cache is warmed up\n",57],["T_WHITESPACE","        ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertGreaterThanOrEqual",58],"(",["T_LNUMBER","1",58],",",["T_WHITESPACE"," ",58],["T_STRING","count",58],"(",["T_VARIABLE","$metaFiles",58],")",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$configCacheFactory",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_NEW","new",59],["T_WHITESPACE"," ",59],["T_STRING","ConfigCacheFactory",59],"(",["T_STRING","true",59],")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$that",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],";",["T_WHITESPACE","\n\n        ",60],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$metaFiles",62],["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$file",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$configCacheFactory",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","cache",63],"(",["T_STRING","substr",63],"(",["T_VARIABLE","$file",63],",",["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],",",["T_WHITESPACE"," ",63],"-",["T_LNUMBER","5",63],")",",",["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],"(",")",["T_WHITESPACE"," ",63],["T_USE","use",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$that",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$file",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n                ",63],["T_VARIABLE","$that",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","fail",64],"(",["T_STRING","sprintf",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Meta file \"%s\" is not fresh'",64],",",["T_WHITESPACE"," ",64],["T_STRING_CAST","(string)",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$file",64],")",")",";",["T_WHITESPACE","\n            ",64],"}",")",";",["T_WHITESPACE","\n        ",65],"}",["T_WHITESPACE","\n\n        ",66],["T_COMMENT","\/\/ check that app kernel file present in meta file of container's cache\n",68],["T_WHITESPACE","        ",69],["T_VARIABLE","$containerRef",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_NEW","new",69],["T_WHITESPACE"," ",69],["T_NS_SEPARATOR","\\",69],["T_STRING","ReflectionObject",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","kernel",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getContainer",69],"(",")",")",";",["T_WHITESPACE","\n        ",69],["T_VARIABLE","$containerFile",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$containerRef",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getFileName",70],"(",")",";",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$containerMetaFile",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$containerFile",71],".",["T_CONSTANT_ENCAPSED_STRING","'.meta'",71],";",["T_WHITESPACE","\n        ",71],["T_VARIABLE","$kernelRef",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","ReflectionObject",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","kernel",72],")",";",["T_WHITESPACE","\n        ",72],["T_VARIABLE","$kernelFile",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$kernelRef",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getFileName",73],"(",")",";",["T_WHITESPACE","\n        ",73],["T_DOC_COMMENT","\/** @var ResourceInterface[] $meta *\/",74],["T_WHITESPACE","\n        ",74],["T_VARIABLE","$meta",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","unserialize",75],"(",["T_STRING","file_get_contents",75],"(",["T_VARIABLE","$containerMetaFile",75],")",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$found",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","false",76],";",["T_WHITESPACE","\n        ",76],["T_FOREACH","foreach",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$meta",77],["T_WHITESPACE"," ",77],["T_AS","as",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$resource",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n            ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING_CAST","(string)",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$resource",78],["T_WHITESPACE"," ",78],["T_IS_IDENTICAL","===",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$kernelFile",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n                ",78],["T_VARIABLE","$found",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","true",79],";",["T_WHITESPACE","\n                ",79],["T_BREAK","break",80],";",["T_WHITESPACE","\n            ",80],"}",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertTrue",83],"(",["T_VARIABLE","$found",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'Kernel file should present as resource'",83],")",";",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertRegExp",84],"(",["T_STRING","sprintf",84],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\'kernel.container_class\\'\\s*=>\\s*\\'%s\\'\/'",84],",",["T_WHITESPACE"," ",84],["T_STRING","get_class",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","kernel",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getContainer",84],"(",")",")",")",",",["T_WHITESPACE"," ",84],["T_STRING","file_get_contents",84],"(",["T_VARIABLE","$containerFile",84],")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'kernel.container_class is properly set on the dumped container'",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n",85],"}",["T_WHITESPACE","\n",86]]
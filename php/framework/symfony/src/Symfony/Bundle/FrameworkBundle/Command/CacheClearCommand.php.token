[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_COMMENT","\/*\n * This file is part of the Symfony package.\n *\n * (c) Fabien Potencier <fabien@symfony.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n *\/",3],["T_WHITESPACE","\n\n",10],["T_NAMESPACE","namespace",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Bundle",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FrameworkBundle",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Command",12],";",["T_WHITESPACE","\n\n",12],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Console",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Input",14],["T_NS_SEPARATOR","\\",14],["T_STRING","InputInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Console",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Input",15],["T_NS_SEPARATOR","\\",15],["T_STRING","InputOption",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Console",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Output",16],["T_NS_SEPARATOR","\\",16],["T_STRING","OutputInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Console",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Style",17],["T_NS_SEPARATOR","\\",17],["T_STRING","SymfonyStyle",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpKernel",18],["T_NS_SEPARATOR","\\",18],["T_STRING","KernelInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Finder",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Finder",19],";",["T_WHITESPACE","\n\n",19],["T_DOC_COMMENT","\/**\n * Clear and Warmup the cache.\n *\n * @author Francis Besset <francis.besset@gmail.com>\n * @author Fabien Potencier <fabien@symfony.com>\n *\/",21],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","CacheClearCommand",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","ContainerAwareCommand",27],["T_WHITESPACE","\n",27],"{",["T_WHITESPACE","\n    ",28],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",29],["T_WHITESPACE","\n    ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","configure",32],"(",")",["T_WHITESPACE","\n    ",32],"{",["T_WHITESPACE","\n        ",33],["T_VARIABLE","$this",34],["T_WHITESPACE","\n            ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","setName",35],"(",["T_CONSTANT_ENCAPSED_STRING","'cache:clear'",35],")",["T_WHITESPACE","\n            ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","setDefinition",36],"(",["T_ARRAY","array",36],"(",["T_WHITESPACE","\n                ",36],["T_NEW","new",37],["T_WHITESPACE"," ",37],["T_STRING","InputOption",37],"(",["T_CONSTANT_ENCAPSED_STRING","'no-warmup'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","''",37],",",["T_WHITESPACE"," ",37],["T_STRING","InputOption",37],["T_DOUBLE_COLON","::",37],["T_STRING","VALUE_NONE",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Do not warm up the cache'",37],")",",",["T_WHITESPACE","\n                ",37],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","InputOption",38],"(",["T_CONSTANT_ENCAPSED_STRING","'no-optional-warmers'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","''",38],",",["T_WHITESPACE"," ",38],["T_STRING","InputOption",38],["T_DOUBLE_COLON","::",38],["T_STRING","VALUE_NONE",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Skip optional cache warmers (faster)'",38],")",",",["T_WHITESPACE","\n            ",38],")",")",["T_WHITESPACE","\n            ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","setDescription",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Clears the cache'",40],")",["T_WHITESPACE","\n            ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","setHelp",41],"(",["T_START_HEREDOC","<<<'EOF'\n",41],["T_ENCAPSED_AND_WHITESPACE","The <info>%command.name%<\/info> command clears the application cache for a given environment\nand debug mode:\n\n  <info>php %command.full_name% --env=dev<\/info>\n  <info>php %command.full_name% --env=prod --no-debug<\/info>\n",42],["T_END_HEREDOC","EOF",47],["T_WHITESPACE","\n            ",47],")",["T_WHITESPACE","\n        ",48],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_DOC_COMMENT","\/**\n     * {@inheritdoc}\n     *\/",52],["T_WHITESPACE","\n    ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","execute",55],"(",["T_STRING","InputInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$input",55],",",["T_WHITESPACE"," ",55],["T_STRING","OutputInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$output",55],")",["T_WHITESPACE","\n    ",55],"{",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$outputIsVerbose",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$output",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isVerbose",57],"(",")",";",["T_WHITESPACE","\n        ",57],["T_VARIABLE","$io",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","SymfonyStyle",58],"(",["T_VARIABLE","$input",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$output",58],")",";",["T_WHITESPACE","\n\n        ",58],["T_VARIABLE","$realCacheDir",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getContainer",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","getParameter",60],"(",["T_CONSTANT_ENCAPSED_STRING","'kernel.cache_dir'",60],")",";",["T_WHITESPACE","\n        ",60],["T_COMMENT","\/\/ the old cache dir name must not be longer than the real one to avoid exceeding\n",61],["T_WHITESPACE","        ",62],["T_COMMENT","\/\/ the maximum length of a directory or file path within it (esp. Windows MAX_PATH)\n",62],["T_WHITESPACE","        ",63],["T_VARIABLE","$oldCacheDir",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","substr",63],"(",["T_VARIABLE","$realCacheDir",63],",",["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],",",["T_WHITESPACE"," ",63],"-",["T_LNUMBER","1",63],")",".","(",["T_CONSTANT_ENCAPSED_STRING","'~'",63],["T_WHITESPACE"," ",63],["T_IS_IDENTICAL","===",63],["T_WHITESPACE"," ",63],["T_STRING","substr",63],"(",["T_VARIABLE","$realCacheDir",63],",",["T_WHITESPACE"," ",63],"-",["T_LNUMBER","1",63],")",["T_WHITESPACE"," ",63],"?",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'+'",63],["T_WHITESPACE"," ",63],":",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'~'",63],")",";",["T_WHITESPACE","\n        ",63],["T_VARIABLE","$filesystem",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getContainer",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'filesystem'",64],")",";",["T_WHITESPACE","\n\n        ",64],["T_IF","if",66],["T_WHITESPACE"," ",66],"(","!",["T_STRING","is_writable",66],"(",["T_VARIABLE","$realCacheDir",66],")",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n            ",66],["T_THROW","throw",67],["T_WHITESPACE"," ",67],["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_NS_SEPARATOR","\\",67],["T_STRING","RuntimeException",67],"(",["T_STRING","sprintf",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to write in the \"%s\" directory'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$realCacheDir",67],")",")",";",["T_WHITESPACE","\n        ",67],"}",["T_WHITESPACE","\n\n        ",68],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$filesystem",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","exists",70],"(",["T_VARIABLE","$oldCacheDir",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$filesystem",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","remove",71],"(",["T_VARIABLE","$oldCacheDir",71],")",";",["T_WHITESPACE","\n        ",71],"}",["T_WHITESPACE","\n\n        ",72],["T_VARIABLE","$kernel",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getContainer",74],"(",")",["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'kernel'",74],")",";",["T_WHITESPACE","\n        ",74],["T_VARIABLE","$io",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","comment",75],"(",["T_STRING","sprintf",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Clearing the cache for the <info>%s<\/info> environment with debug <info>%s<\/info>'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$kernel",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getEnvironment",75],"(",")",",",["T_WHITESPACE"," ",75],["T_STRING","var_export",75],"(",["T_VARIABLE","$kernel",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","isDebug",75],"(",")",",",["T_WHITESPACE"," ",75],["T_STRING","true",75],")",")",")",";",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getContainer",76],"(",")",["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_clearer'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","clear",76],"(",["T_VARIABLE","$realCacheDir",76],")",";",["T_WHITESPACE","\n\n        ",76],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$input",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getOption",78],"(",["T_CONSTANT_ENCAPSED_STRING","'no-warmup'",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n            ",78],["T_VARIABLE","$filesystem",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","rename",79],"(",["T_VARIABLE","$realCacheDir",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$oldCacheDir",79],")",";",["T_WHITESPACE","\n        ",79],"}",["T_WHITESPACE"," ",80],["T_ELSE","else",80],["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n            ",80],["T_COMMENT","\/\/ the warmup cache dir name must have the same length than the real one\n",81],["T_WHITESPACE","            ",82],["T_COMMENT","\/\/ to avoid the many problems in serialized resources files\n",82],["T_WHITESPACE","            ",83],["T_VARIABLE","$realCacheDir",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","realpath",83],"(",["T_VARIABLE","$realCacheDir",83],")",";",["T_WHITESPACE","\n            ",83],["T_VARIABLE","$warmupDir",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","substr",84],"(",["T_VARIABLE","$realCacheDir",84],",",["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],",",["T_WHITESPACE"," ",84],"-",["T_LNUMBER","1",84],")",".","(",["T_CONSTANT_ENCAPSED_STRING","'_'",84],["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_STRING","substr",84],"(",["T_VARIABLE","$realCacheDir",84],",",["T_WHITESPACE"," ",84],"-",["T_LNUMBER","1",84],")",["T_WHITESPACE"," ",84],"?",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'-'",84],["T_WHITESPACE"," ",84],":",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'_'",84],")",";",["T_WHITESPACE","\n\n            ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$filesystem",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","exists",86],"(",["T_VARIABLE","$warmupDir",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n                ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$outputIsVerbose",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n                    ",87],["T_VARIABLE","$io",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","comment",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Clearing outdated warmup directory...'",88],")",";",["T_WHITESPACE","\n                ",88],"}",["T_WHITESPACE","\n                ",89],["T_VARIABLE","$filesystem",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","remove",90],"(",["T_VARIABLE","$warmupDir",90],")",";",["T_WHITESPACE","\n            ",90],"}",["T_WHITESPACE","\n\n            ",91],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$outputIsVerbose",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n                ",93],["T_VARIABLE","$io",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","comment",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Warming up cache...'",94],")",";",["T_WHITESPACE","\n            ",94],"}",["T_WHITESPACE","\n            ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","warmup",96],"(",["T_VARIABLE","$warmupDir",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$realCacheDir",96],",",["T_WHITESPACE"," ",96],"!",["T_VARIABLE","$input",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getOption",96],"(",["T_CONSTANT_ENCAPSED_STRING","'no-optional-warmers'",96],")",")",";",["T_WHITESPACE","\n\n            ",96],["T_VARIABLE","$filesystem",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","rename",98],"(",["T_VARIABLE","$realCacheDir",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$oldCacheDir",98],")",";",["T_WHITESPACE","\n            ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",99],["T_WHITESPACE"," ",99],["T_IS_IDENTICAL","===",99],["T_WHITESPACE"," ",99],["T_STRING","DIRECTORY_SEPARATOR",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n                ",99],["T_STRING","sleep",100],"(",["T_LNUMBER","1",100],")",";",["T_WHITESPACE","  ",100],["T_COMMENT","\/\/ workaround for Windows PHP rename bug\n",100],["T_WHITESPACE","            ",101],"}",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$filesystem",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","rename",102],"(",["T_VARIABLE","$warmupDir",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$realCacheDir",102],")",";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n\n        ",103],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$outputIsVerbose",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$io",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","comment",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Removing old cache directory...'",106],")",";",["T_WHITESPACE","\n        ",106],"}",["T_WHITESPACE","\n\n        ",107],["T_VARIABLE","$filesystem",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","remove",109],"(",["T_VARIABLE","$oldCacheDir",109],")",";",["T_WHITESPACE","\n\n        ",109],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$outputIsVerbose",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n            ",111],["T_VARIABLE","$io",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","comment",112],"(",["T_CONSTANT_ENCAPSED_STRING","'Finished'",112],")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n\n        ",113],["T_VARIABLE","$io",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","success",115],"(",["T_STRING","sprintf",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache for the \"%s\" environment (debug=%s) was successfully cleared.'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$kernel",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getEnvironment",115],"(",")",",",["T_WHITESPACE"," ",115],["T_STRING","var_export",115],"(",["T_VARIABLE","$kernel",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","isDebug",115],"(",")",",",["T_WHITESPACE"," ",115],["T_STRING","true",115],")",")",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_DOC_COMMENT","\/**\n     * @param string $warmupDir\n     * @param string $realCacheDir\n     * @param bool   $enableOptionalWarmers\n     *\/",118],["T_WHITESPACE","\n    ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","warmup",123],"(",["T_VARIABLE","$warmupDir",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$realCacheDir",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$enableOptionalWarmers",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","true",123],")",["T_WHITESPACE","\n    ",123],"{",["T_WHITESPACE","\n        ",124],["T_COMMENT","\/\/ create a temporary kernel\n",125],["T_WHITESPACE","        ",126],["T_VARIABLE","$realKernel",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getContainer",126],"(",")",["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_CONSTANT_ENCAPSED_STRING","'kernel'",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$realKernelClass",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","get_class",127],"(",["T_VARIABLE","$realKernel",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$namespace",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","''",128],";",["T_WHITESPACE","\n        ",128],["T_IF","if",129],["T_WHITESPACE"," ",129],"(",["T_STRING","false",129],["T_WHITESPACE"," ",129],["T_IS_NOT_IDENTICAL","!==",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$pos",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","strrpos",129],"(",["T_VARIABLE","$realKernelClass",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",129],")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n            ",129],["T_VARIABLE","$namespace",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","substr",130],"(",["T_VARIABLE","$realKernelClass",130],",",["T_WHITESPACE"," ",130],["T_LNUMBER","0",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$pos",130],")",";",["T_WHITESPACE","\n            ",130],["T_VARIABLE","$realKernelClass",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","substr",131],"(",["T_VARIABLE","$realKernelClass",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$pos",131],["T_WHITESPACE"," ",131],"+",["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],")",";",["T_WHITESPACE","\n        ",131],"}",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$tempKernel",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getTempKernel",133],"(",["T_VARIABLE","$realKernel",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$namespace",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$realKernelClass",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$warmupDir",133],")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$tempKernel",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","boot",134],"(",")",";",["T_WHITESPACE","\n\n        ",134],["T_VARIABLE","$tempKernelReflection",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_NS_SEPARATOR","\\",136],["T_STRING","ReflectionObject",136],"(",["T_VARIABLE","$tempKernel",136],")",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$tempKernelFile",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$tempKernelReflection",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getFileName",137],"(",")",";",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ warmup temporary dir\n",139],["T_WHITESPACE","        ",140],["T_VARIABLE","$warmer",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$tempKernel",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getContainer",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","get",140],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_warmer'",140],")",";",["T_WHITESPACE","\n        ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$enableOptionalWarmers",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n            ",141],["T_VARIABLE","$warmer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","enableOptionalWarmers",142],"(",")",";",["T_WHITESPACE","\n        ",142],"}",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$warmer",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","warmUp",144],"(",["T_VARIABLE","$warmupDir",144],")",";",["T_WHITESPACE","\n\n        ",144],["T_COMMENT","\/\/ fix references to the Kernel in .meta files\n",146],["T_WHITESPACE","        ",147],["T_VARIABLE","$safeTempKernel",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","str_replace",147],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'\\\\\\\\'",147],",",["T_WHITESPACE"," ",147],["T_STRING","get_class",147],"(",["T_VARIABLE","$tempKernel",147],")",")",";",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$realKernelFQN",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","get_class",148],"(",["T_VARIABLE","$realKernel",148],")",";",["T_WHITESPACE","\n\n        ",148],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_STRING","Finder",150],["T_DOUBLE_COLON","::",150],["T_STRING","create",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","files",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","name",150],"(",["T_CONSTANT_ENCAPSED_STRING","'*.meta'",150],")",["T_OBJECT_OPERATOR","->",150],["T_STRING","in",150],"(",["T_VARIABLE","$warmupDir",150],")",["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$file",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n            ",150],["T_STRING","file_put_contents",151],"(",["T_VARIABLE","$file",151],",",["T_WHITESPACE"," ",151],["T_STRING","preg_replace",151],"(",["T_WHITESPACE","\n                ",151],["T_CONSTANT_ENCAPSED_STRING","'\/(C\\:\\d+\\:)\"'",152],".",["T_VARIABLE","$safeTempKernel",152],".",["T_CONSTANT_ENCAPSED_STRING","'\"\/'",152],",",["T_WHITESPACE","\n                ",152],["T_STRING","sprintf",153],"(",["T_CONSTANT_ENCAPSED_STRING","'$1\"%s\"'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$realKernelFQN",153],")",",",["T_WHITESPACE","\n                ",153],["T_STRING","file_get_contents",154],"(",["T_VARIABLE","$file",154],")",["T_WHITESPACE","\n            ",154],")",")",";",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n\n        ",156],["T_COMMENT","\/\/ fix references to cached files with the real cache directory name\n",158],["T_WHITESPACE","        ",159],["T_VARIABLE","$search",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_VARIABLE","$warmupDir",159],",",["T_WHITESPACE"," ",159],["T_STRING","str_replace",159],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\\\\\\\\'",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$warmupDir",159],")",")",";",["T_WHITESPACE","\n        ",159],["T_VARIABLE","$replace",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_STRING","str_replace",160],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'\/'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$realCacheDir",160],")",";",["T_WHITESPACE","\n        ",160],["T_FOREACH","foreach",161],["T_WHITESPACE"," ",161],"(",["T_STRING","Finder",161],["T_DOUBLE_COLON","::",161],["T_STRING","create",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","files",161],"(",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","in",161],"(",["T_VARIABLE","$warmupDir",161],")",["T_WHITESPACE"," ",161],["T_AS","as",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$file",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n            ",161],["T_VARIABLE","$content",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","str_replace",162],"(",["T_VARIABLE","$search",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$replace",162],",",["T_WHITESPACE"," ",162],["T_STRING","file_get_contents",162],"(",["T_VARIABLE","$file",162],")",")",";",["T_WHITESPACE","\n            ",162],["T_STRING","file_put_contents",163],"(",["T_VARIABLE","$file",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$content",163],")",";",["T_WHITESPACE","\n        ",163],"}",["T_WHITESPACE","\n\n        ",164],["T_COMMENT","\/\/ fix references to container's class\n",166],["T_WHITESPACE","        ",167],["T_VARIABLE","$tempContainerClass",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","get_class",167],"(",["T_VARIABLE","$tempKernel",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getContainer",167],"(",")",")",";",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$realContainerClass",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","get_class",168],"(",["T_VARIABLE","$realKernel",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getContainer",168],"(",")",")",";",["T_WHITESPACE","\n        ",168],["T_FOREACH","foreach",169],["T_WHITESPACE"," ",169],"(",["T_STRING","Finder",169],["T_DOUBLE_COLON","::",169],["T_STRING","create",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","files",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","name",169],"(",["T_VARIABLE","$tempContainerClass",169],".",["T_CONSTANT_ENCAPSED_STRING","'*'",169],")",["T_OBJECT_OPERATOR","->",169],["T_STRING","in",169],"(",["T_VARIABLE","$warmupDir",169],")",["T_WHITESPACE"," ",169],["T_AS","as",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$file",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$content",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","str_replace",170],"(",["T_VARIABLE","$tempContainerClass",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$realContainerClass",170],",",["T_WHITESPACE"," ",170],["T_STRING","file_get_contents",170],"(",["T_VARIABLE","$file",170],")",")",";",["T_WHITESPACE","\n            ",170],["T_STRING","file_put_contents",171],"(",["T_VARIABLE","$file",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$content",171],")",";",["T_WHITESPACE","\n            ",171],["T_STRING","rename",172],"(",["T_VARIABLE","$file",172],",",["T_WHITESPACE"," ",172],["T_STRING","str_replace",172],"(",["T_STRING","DIRECTORY_SEPARATOR",172],".",["T_VARIABLE","$tempContainerClass",172],",",["T_WHITESPACE"," ",172],["T_STRING","DIRECTORY_SEPARATOR",172],".",["T_VARIABLE","$realContainerClass",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$file",172],")",")",";",["T_WHITESPACE","\n        ",172],"}",["T_WHITESPACE","\n\n        ",173],["T_COMMENT","\/\/ remove temp kernel file after cache warmed up\n",175],["T_WHITESPACE","        ",176],"@",["T_STRING","unlink",176],"(",["T_VARIABLE","$tempKernelFile",176],")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_DOC_COMMENT","\/**\n     * @param KernelInterface $parent\n     * @param string          $namespace\n     * @param string          $parentClass\n     * @param string          $warmupDir\n     *\n     * @return KernelInterface\n     *\/",179],["T_WHITESPACE","\n    ",186],["T_PROTECTED","protected",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","getTempKernel",187],"(",["T_STRING","KernelInterface",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$parent",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$namespace",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$parentClass",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$warmupDir",187],")",["T_WHITESPACE","\n    ",187],"{",["T_WHITESPACE","\n        ",188],["T_VARIABLE","$cacheDir",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","var_export",189],"(",["T_VARIABLE","$warmupDir",189],",",["T_WHITESPACE"," ",189],["T_STRING","true",189],")",";",["T_WHITESPACE","\n        ",189],["T_VARIABLE","$rootDir",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","var_export",190],"(",["T_STRING","realpath",190],"(",["T_VARIABLE","$parent",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getRootDir",190],"(",")",")",",",["T_WHITESPACE"," ",190],["T_STRING","true",190],")",";",["T_WHITESPACE","\n        ",190],["T_VARIABLE","$logDir",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","var_export",191],"(",["T_STRING","realpath",191],"(",["T_VARIABLE","$parent",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getLogDir",191],"(",")",")",",",["T_WHITESPACE"," ",191],["T_STRING","true",191],")",";",["T_WHITESPACE","\n        ",191],["T_COMMENT","\/\/ the temp kernel class name must have the same length than the real one\n",192],["T_WHITESPACE","        ",193],["T_COMMENT","\/\/ to avoid the many problems in serialized resources files\n",193],["T_WHITESPACE","        ",194],["T_VARIABLE","$class",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_STRING","substr",194],"(",["T_VARIABLE","$parentClass",194],",",["T_WHITESPACE"," ",194],["T_LNUMBER","0",194],",",["T_WHITESPACE"," ",194],"-",["T_LNUMBER","1",194],")",".",["T_CONSTANT_ENCAPSED_STRING","'_'",194],";",["T_WHITESPACE","\n        ",194],["T_COMMENT","\/\/ the temp container class must be changed too\n",195],["T_WHITESPACE","        ",196],["T_VARIABLE","$containerClass",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_STRING","var_export",196],"(",["T_STRING","substr",196],"(",["T_STRING","get_class",196],"(",["T_VARIABLE","$parent",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getContainer",196],"(",")",")",",",["T_WHITESPACE"," ",196],["T_LNUMBER","0",196],",",["T_WHITESPACE"," ",196],"-",["T_LNUMBER","1",196],")",".",["T_CONSTANT_ENCAPSED_STRING","'_'",196],",",["T_WHITESPACE"," ",196],["T_STRING","true",196],")",";",["T_WHITESPACE","\n        ",196],["T_VARIABLE","$code",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_START_HEREDOC","<<<EOF\n",197],["T_ENCAPSED_AND_WHITESPACE","<?php\n\nnamespace ",198],["T_VARIABLE","$namespace",200],["T_ENCAPSED_AND_WHITESPACE","\n{\n    class ",200],["T_VARIABLE","$class",202],["T_ENCAPSED_AND_WHITESPACE"," extends ",202],["T_VARIABLE","$parentClass",202],["T_ENCAPSED_AND_WHITESPACE","\n    {\n        public function getCacheDir()\n        {\n            return ",202],["T_VARIABLE","$cacheDir",206],["T_ENCAPSED_AND_WHITESPACE",";\n        }\n\n        public function getRootDir()\n        {\n            return ",206],["T_VARIABLE","$rootDir",211],["T_ENCAPSED_AND_WHITESPACE",";\n        }\n\n        public function getLogDir()\n        {\n            return ",211],["T_VARIABLE","$logDir",216],["T_ENCAPSED_AND_WHITESPACE",";\n        }\n\n        protected function getContainerClass()\n        {\n            return ",216],["T_VARIABLE","$containerClass",221],["T_ENCAPSED_AND_WHITESPACE",";\n        }\n\n        protected function buildContainer()\n        {\n            \\$container = parent::buildContainer();\n\n            \/\/ filter container's resources, removing reference to temp kernel file\n            \\$resources = \\$container->getResources();\n            \\$filteredResources = array();\n            foreach (\\$resources as \\$resource) {\n                if ((string) \\$resource !== __FILE__) {\n                    \\$filteredResources[] = \\$resource;\n                }\n            }\n\n            \\$container->setResources(\\$filteredResources);\n\n            return \\$container;\n        }\n    }\n}\n",221],["T_END_HEREDOC","EOF",243],";",["T_WHITESPACE","\n        ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getContainer",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","get",244],"(",["T_CONSTANT_ENCAPSED_STRING","'filesystem'",244],")",["T_OBJECT_OPERATOR","->",244],["T_STRING","mkdir",244],"(",["T_VARIABLE","$warmupDir",244],")",";",["T_WHITESPACE","\n        ",244],["T_STRING","file_put_contents",245],"(",["T_VARIABLE","$file",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$warmupDir",245],".",["T_CONSTANT_ENCAPSED_STRING","'\/kernel.tmp'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$code",245],")",";",["T_WHITESPACE","\n        ",245],["T_REQUIRE_ONCE","require_once",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$file",246],";",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$class",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],"\"",["T_VARIABLE","$namespace",247],["T_ENCAPSED_AND_WHITESPACE","\\\\",247],["T_VARIABLE","$class",247],"\"",";",["T_WHITESPACE","\n\n        ",247],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_NEW","new",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$class",249],"(",["T_VARIABLE","$parent",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","getEnvironment",249],"(",")",",",["T_WHITESPACE"," ",249],["T_VARIABLE","$parent",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","isDebug",249],"(",")",")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n",250],"}",["T_WHITESPACE","\n",251]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","StreamWrapper",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PublicStream",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Provides methods to create test files from given values.\n *\n * This trait is meant to be used only by test classes.\n *\/",7],["T_WHITESPACE","\n",11],["T_TRAIT","trait",12],["T_WHITESPACE"," ",12],["T_STRING","TestFileCreationTrait",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Whether the files were copied to the test files directory.\n   *\n   * @var bool\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$generatedTestFiles",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","FALSE",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Gets a list of files that can be used in tests.\n   *\n   * The first time this method is called, it will call\n   * $this->generateFile() to generate binary and ASCII text files in the\n   * public:\/\/ directory. It will also copy all files in\n   * core\/modules\/simpletest\/files to public:\/\/. These contain image, SQL, PHP,\n   * JavaScript, and HTML files.\n   *\n   * All filenames are prefixed with their type and have appropriate extensions:\n   * - text-*.txt\n   * - binary-*.txt\n   * - html-*.html and html-*.txt\n   * - image-*.png, image-*.jpg, and image-*.gif\n   * - javascript-*.txt and javascript-*.script\n   * - php-*.txt and php-*.php\n   * - sql-*.txt and sql-*.sql\n   *\n   * Any subsequent calls will not generate any new files, or copy the files\n   * over again. However, if a test class adds a new file to public:\/\/ that\n   * is prefixed with one of the above types, it will get returned as well, even\n   * on subsequent calls.\n   *\n   * @param $type\n   *   File type, possible values: 'binary', 'html', 'image', 'javascript',\n   *   'php', 'sql', 'text'.\n   * @param $size\n   *   (optional) File size in bytes to match. Defaults to NULL, which will not\n   *   filter the returned list by size.\n   *\n   * @return array[]\n   *   List of files in public:\/\/ that match the filter(s).\n   *\/",21],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","getTestFiles",54],"(",["T_VARIABLE","$type",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$size",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","NULL",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_EMPTY","empty",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","generatedTestFiles",55],")",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_COMMENT","\/\/ Generate binary test files.\n",56],["T_WHITESPACE","      ",57],["T_VARIABLE","$lines",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"[",["T_LNUMBER","64",57],",",["T_WHITESPACE"," ",57],["T_LNUMBER","1024",57],"]",";",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$count",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],";",["T_WHITESPACE","\n      ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$lines",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$line",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","generateFile",60],"(",["T_CONSTANT_ENCAPSED_STRING","'binary-'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$count",60],["T_INC","++",60],",",["T_WHITESPACE"," ",60],["T_LNUMBER","64",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$line",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'binary'",60],")",";",["T_WHITESPACE","\n      ",60],"}",["T_WHITESPACE","\n\n      ",61],["T_COMMENT","\/\/ Generate ASCII text test files.\n",63],["T_WHITESPACE","      ",64],["T_VARIABLE","$lines",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],"[",["T_LNUMBER","16",64],",",["T_WHITESPACE"," ",64],["T_LNUMBER","256",64],",",["T_WHITESPACE"," ",64],["T_LNUMBER","1024",64],",",["T_WHITESPACE"," ",64],["T_LNUMBER","2048",64],",",["T_WHITESPACE"," ",64],["T_LNUMBER","20480",64],"]",";",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$count",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],";",["T_WHITESPACE","\n      ",65],["T_FOREACH","foreach",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$lines",66],["T_WHITESPACE"," ",66],["T_AS","as",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$line",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","generateFile",67],"(",["T_CONSTANT_ENCAPSED_STRING","'text-'",67],["T_WHITESPACE"," ",67],".",["T_WHITESPACE"," ",67],["T_VARIABLE","$count",67],["T_INC","++",67],",",["T_WHITESPACE"," ",67],["T_LNUMBER","64",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$line",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'text'",67],")",";",["T_WHITESPACE","\n      ",67],"}",["T_WHITESPACE","\n\n      ",68],["T_COMMENT","\/\/ Copy other test files from simpletest.\n",70],["T_WHITESPACE","      ",71],["T_VARIABLE","$original",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","drupal_get_path",71],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'simpletest'",71],")",["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'\/files'",71],";",["T_WHITESPACE","\n      ",71],["T_VARIABLE","$files",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","file_scan_directory",72],"(",["T_VARIABLE","$original",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'\/(html|image|javascript|php|sql)-.*\/'",72],")",";",["T_WHITESPACE","\n      ",72],["T_FOREACH","foreach",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$files",73],["T_WHITESPACE"," ",73],["T_AS","as",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$file",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_STRING","file_unmanaged_copy",74],"(",["T_VARIABLE","$file",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","uri",74],",",["T_WHITESPACE"," ",74],["T_STRING","PublicStream",74],["T_DOUBLE_COLON","::",74],["T_STRING","basePath",74],"(",")",")",";",["T_WHITESPACE","\n      ",74],"}",["T_WHITESPACE","\n\n      ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","generatedTestFiles",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","TRUE",77],";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$files",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[","]",";",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Make sure type is valid.\n",81],["T_WHITESPACE","    ",82],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_STRING","in_array",82],"(",["T_VARIABLE","$type",82],",",["T_WHITESPACE"," ",82],"[",["T_CONSTANT_ENCAPSED_STRING","'binary'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'html'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'image'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'javascript'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'php'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'sql'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'text'",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$files",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","file_scan_directory",83],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$type",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\\-.*\/'",83],")",";",["T_WHITESPACE","\n\n      ",83],["T_COMMENT","\/\/ If size is set then remove any files that are not of that size.\n",85],["T_WHITESPACE","      ",86],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$size",86],["T_WHITESPACE"," ",86],["T_IS_NOT_IDENTICAL","!==",86],["T_WHITESPACE"," ",86],["T_STRING","NULL",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$files",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$file",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n          ",87],["T_VARIABLE","$stats",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","stat",88],"(",["T_VARIABLE","$file",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","uri",88],")",";",["T_WHITESPACE","\n          ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$stats",89],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",89],"]",["T_WHITESPACE"," ",89],["T_IS_NOT_EQUAL","!=",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$size",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n            ",89],["T_UNSET","unset",90],"(",["T_VARIABLE","$files",90],"[",["T_VARIABLE","$file",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","uri",90],"]",")",";",["T_WHITESPACE","\n          ",90],"}",["T_WHITESPACE","\n        ",91],"}",["T_WHITESPACE","\n      ",92],"}",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n    ",94],["T_STRING","usort",95],"(",["T_VARIABLE","$files",95],",",["T_WHITESPACE"," ",95],"[",["T_VARIABLE","$this",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'compareFiles'",95],"]",")",";",["T_WHITESPACE","\n    ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$files",96],";",["T_WHITESPACE","\n  ",96],"}",["T_WHITESPACE","\n\n  ",97],["T_DOC_COMMENT","\/**\n   * Compares two files based on size and file name.\n   *\n   * Callback for uasort() within \\TestFileCreationTrait::getTestFiles().\n   *\n   * @param \\stdClass $file1\n   *   The first file.\n   * @param \\stdClass $file2\n   *   The second class.\n   *\n   * @return int\n   *\/",99],["T_WHITESPACE","\n  ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","compareFiles",111],"(",["T_VARIABLE","$file1",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$file2",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$compare_size",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","filesize",112],"(",["T_VARIABLE","$file1",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","uri",112],")",["T_WHITESPACE"," ",112],"-",["T_WHITESPACE"," ",112],["T_STRING","filesize",112],"(",["T_VARIABLE","$file2",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","uri",112],")",";",["T_WHITESPACE","\n    ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$compare_size",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_COMMENT","\/\/ Sort by file size.\n",114],["T_WHITESPACE","      ",115],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$compare_size",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n    ",116],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_COMMENT","\/\/ The files were the same size, so sort alphabetically.\n",118],["T_WHITESPACE","      ",119],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","strnatcmp",119],"(",["T_VARIABLE","$file1",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","name",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$file2",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","name",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * Generates a test file.\n   *\n   * @param string $filename\n   *   The name of the file, including the path. The suffix '.txt' is appended\n   *   to the supplied file name and the file is put into the public:\/\/ files\n   *   directory.\n   * @param int $width\n   *   The number of characters on one line.\n   * @param int $lines\n   *   The number of lines in the file.\n   * @param string $type\n   *   (optional) The type, one of:\n   *   - text: The generated file contains random ASCII characters.\n   *   - binary: The generated file contains random characters whose codes are\n   *     in the range of 0 to 31.\n   *   - binary-text: The generated file contains random sequence of '0' and '1'\n   *     values.\n   *\n   * @return string\n   *   The name of the file, including the path.\n   *\/",123],["T_WHITESPACE","\n  ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_STATIC","static",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","generateFile",145],"(",["T_VARIABLE","$filename",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$width",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$lines",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$type",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'binary-text'",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$text",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","''",146],";",["T_WHITESPACE","\n    ",146],["T_FOR","for",147],["T_WHITESPACE"," ",147],"(",["T_VARIABLE","$i",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],";",["T_WHITESPACE"," ",147],["T_VARIABLE","$i",147],["T_WHITESPACE"," ",147],"<",["T_WHITESPACE"," ",147],["T_VARIABLE","$lines",147],";",["T_WHITESPACE"," ",147],["T_VARIABLE","$i",147],["T_INC","++",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_COMMENT","\/\/ Generate $width - 1 characters to leave space for the \"\\n\" character.\n",148],["T_WHITESPACE","      ",149],["T_FOR","for",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$j",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_LNUMBER","0",149],";",["T_WHITESPACE"," ",149],["T_VARIABLE","$j",149],["T_WHITESPACE"," ",149],"<",["T_WHITESPACE"," ",149],["T_VARIABLE","$width",149],["T_WHITESPACE"," ",149],"-",["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],";",["T_WHITESPACE"," ",149],["T_VARIABLE","$j",149],["T_INC","++",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n        ",149],["T_SWITCH","switch",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$type",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n          ",150],["T_CASE","case",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'text'",151],":",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$text",152],["T_WHITESPACE"," ",152],["T_CONCAT_EQUAL",".=",152],["T_WHITESPACE"," ",152],["T_STRING","chr",152],"(",["T_STRING","rand",152],"(",["T_LNUMBER","32",152],",",["T_WHITESPACE"," ",152],["T_LNUMBER","126",152],")",")",";",["T_WHITESPACE","\n            ",152],["T_BREAK","break",153],";",["T_WHITESPACE","\n          ",153],["T_CASE","case",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'binary'",154],":",["T_WHITESPACE","\n            ",154],["T_VARIABLE","$text",155],["T_WHITESPACE"," ",155],["T_CONCAT_EQUAL",".=",155],["T_WHITESPACE"," ",155],["T_STRING","chr",155],"(",["T_STRING","rand",155],"(",["T_LNUMBER","0",155],",",["T_WHITESPACE"," ",155],["T_LNUMBER","31",155],")",")",";",["T_WHITESPACE","\n            ",155],["T_BREAK","break",156],";",["T_WHITESPACE","\n          ",156],["T_CASE","case",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'binary-text'",157],":",["T_WHITESPACE","\n          ",157],["T_DEFAULT","default",158],":",["T_WHITESPACE","\n            ",158],["T_VARIABLE","$text",159],["T_WHITESPACE"," ",159],["T_CONCAT_EQUAL",".=",159],["T_WHITESPACE"," ",159],["T_STRING","rand",159],"(",["T_LNUMBER","0",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","1",159],")",";",["T_WHITESPACE","\n            ",159],["T_BREAK","break",160],";",["T_WHITESPACE","\n        ",160],"}",["T_WHITESPACE","\n      ",161],"}",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$text",163],["T_WHITESPACE"," ",163],["T_CONCAT_EQUAL",".=",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_COMMENT","\/\/ Create filename.\n",166],["T_WHITESPACE","    ",167],["T_STRING","file_put_contents",167],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/'",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_VARIABLE","$filename",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'.txt'",167],",",["T_WHITESPACE"," ",167],["T_VARIABLE","$text",167],")",";",["T_WHITESPACE","\n    ",167],["T_RETURN","return",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$filename",168],";",["T_WHITESPACE","\n  ",168],"}",["T_WHITESPACE","\n\n",169],"}",["T_WHITESPACE","\n",171]]
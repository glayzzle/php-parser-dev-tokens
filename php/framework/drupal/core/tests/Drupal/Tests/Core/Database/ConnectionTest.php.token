[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Stub",5],["T_NS_SEPARATOR","\\",5],["T_STRING","StubConnection",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","UnitTestCase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the Connection class.\n *\n * @group Database\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ConnectionTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","UnitTestCase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Dataprovider for testPrefixRoundTrip().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Arguments to pass to Connection::setPrefix().\n   *   - Expected result from Connection::tablePrefix().\n   *\/",15],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","providerPrefixRoundTrip",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_WHITESPACE","\n      ",24],["T_ARRAY","array",25],"(",["T_WHITESPACE","\n        ",25],["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","''",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'test_'",26],")",",",["T_WHITESPACE","\n        ",26],["T_CONSTANT_ENCAPSED_STRING","'test_'",27],",",["T_WHITESPACE","\n      ",27],")",",",["T_WHITESPACE","\n      ",28],["T_ARRAY","array",29],"(",["T_WHITESPACE","\n        ",29],["T_ARRAY","array",30],"(",["T_WHITESPACE","\n          ",30],["T_CONSTANT_ENCAPSED_STRING","'fooTable'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'foo_'",31],",",["T_WHITESPACE","\n          ",31],["T_CONSTANT_ENCAPSED_STRING","'barTable'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'bar_'",32],",",["T_WHITESPACE","\n        ",32],")",",",["T_WHITESPACE","\n        ",33],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n          ",34],["T_CONSTANT_ENCAPSED_STRING","'fooTable'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'foo_'",35],",",["T_WHITESPACE","\n          ",35],["T_CONSTANT_ENCAPSED_STRING","'barTable'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'bar_'",36],",",["T_WHITESPACE","\n        ",36],")",",",["T_WHITESPACE","\n      ",37],")",",",["T_WHITESPACE","\n    ",38],")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Exercise setPrefix() and tablePrefix().\n   *\n   * @dataProvider providerPrefixRoundTrip\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","testPrefixRoundTrip",47],"(",["T_VARIABLE","$expected",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$prefix_info",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$mock_pdo",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getMock",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$connection",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_NEW","new",49],["T_WHITESPACE"," ",49],["T_STRING","StubConnection",49],"(",["T_VARIABLE","$mock_pdo",49],",",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ setPrefix() is protected, so we make it accessible with reflection.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$reflection",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NEW","new",52],["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","ReflectionClass",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubConnection'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$set_prefix",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$reflection",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMethod",53],"(",["T_CONSTANT_ENCAPSED_STRING","'setPrefix'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$set_prefix",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","setAccessible",54],"(",["T_STRING","TRUE",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Set the prefix data.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$set_prefix",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","invokeArgs",57],"(",["T_VARIABLE","$connection",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_VARIABLE","$prefix_info",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Check the round-trip.\n",58],["T_WHITESPACE","    ",59],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$expected",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$table",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$prefix",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertEquals",60],"(",["T_VARIABLE","$prefix",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$connection",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","tablePrefix",60],"(",["T_VARIABLE","$table",60],")",")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * Dataprovider for testPrefixTables().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected result.\n   *   - Table prefix.\n   *   - Query to be prefixed.\n   *\/",64],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","providerTestPrefixTables",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_WHITESPACE","\n      ",74],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM test_table'",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'test_'",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {table}'",78],",",["T_WHITESPACE","\n      ",78],")",",",["T_WHITESPACE","\n      ",79],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM first_table JOIN second_thingie'",81],",",["T_WHITESPACE","\n        ",81],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n          ",82],["T_CONSTANT_ENCAPSED_STRING","'table'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'first_'",83],",",["T_WHITESPACE","\n          ",83],["T_CONSTANT_ENCAPSED_STRING","'thingie'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'second_'",84],",",["T_WHITESPACE","\n        ",84],")",",",["T_WHITESPACE","\n        ",85],["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {table} JOIN {thingie}'",86],",",["T_WHITESPACE","\n      ",86],")",",",["T_WHITESPACE","\n    ",87],")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Exercise the prefixTables() method.\n   *\n   * @dataProvider providerTestPrefixTables\n   *\/",91],["T_WHITESPACE","\n  ",95],["T_PUBLIC","public",96],["T_WHITESPACE"," ",96],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","testPrefixTables",96],"(",["T_VARIABLE","$expected",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$prefix_info",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$query",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$mock_pdo",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getMock",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$connection",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_STRING","StubConnection",98],"(",["T_VARIABLE","$mock_pdo",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'prefix'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$prefix_info",98],")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEquals",99],"(",["T_VARIABLE","$expected",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$connection",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","prefixTables",99],"(",["T_VARIABLE","$query",99],")",")",";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n  ",100],["T_DOC_COMMENT","\/**\n   * Dataprovider for testEscapeMethods().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected escaped string.\n   *   - String to escape.\n   *\/",102],["T_WHITESPACE","\n  ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","providerEscapeMethods",110],"(",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n    ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n      ",111],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'thing'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'thing'",112],")",",",["T_WHITESPACE","\n      ",112],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'_item'",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'_item'",113],")",",",["T_WHITESPACE","\n      ",113],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'item_'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'item_'",114],")",",",["T_WHITESPACE","\n      ",114],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'_item_'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'_item_'",115],")",",",["T_WHITESPACE","\n      ",115],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","''",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'!@#$%^&*()-=+'",116],")",",",["T_WHITESPACE","\n      ",116],["T_ARRAY","array",117],"(",["T_CONSTANT_ENCAPSED_STRING","'123'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'!1@2#3'",117],")",",",["T_WHITESPACE","\n    ",117],")",";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * Test the various escaping methods.\n   *\n   * All tested together since they're basically the same method\n   * with different names.\n   *\n   * @dataProvider providerEscapeMethods\n   * @todo Separate test method for each escape method?\n   *\/",121],["T_WHITESPACE","\n  ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","testEscapeMethods",130],"(",["T_VARIABLE","$expected",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$name",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$mock_pdo",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getMock",131],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$connection",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_NEW","new",132],["T_WHITESPACE"," ",132],["T_STRING","StubConnection",132],"(",["T_VARIABLE","$mock_pdo",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",")",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertEquals",133],"(",["T_VARIABLE","$expected",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$connection",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","escapeDatabase",133],"(",["T_VARIABLE","$name",133],")",")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertEquals",134],"(",["T_VARIABLE","$expected",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$connection",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","escapeTable",134],"(",["T_VARIABLE","$name",134],")",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEquals",135],"(",["T_VARIABLE","$expected",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$connection",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","escapeField",135],"(",["T_VARIABLE","$name",135],")",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEquals",136],"(",["T_VARIABLE","$expected",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$connection",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","escapeAlias",136],"(",["T_VARIABLE","$name",136],")",")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * Dataprovider for testGetDriverClass().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected namespaced class name.\n   *   - Driver.\n   *   - Namespace.\n   *   - Class name without namespace.\n   *\/",139],["T_WHITESPACE","\n  ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","providerGetDriverClass",149],"(",")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n    ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_WHITESPACE","\n      ",150],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n        ",151],["T_CONSTANT_ENCAPSED_STRING","'nonexistent_class'",152],",",["T_WHITESPACE","\n        ",152],["T_CONSTANT_ENCAPSED_STRING","'\\\\'",153],",",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'nonexistent_class'",154],",",["T_WHITESPACE","\n      ",154],")",",",["T_WHITESPACE","\n      ",155],["T_ARRAY","array",156],"(",["T_WHITESPACE","\n        ",156],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\Select'",157],",",["T_WHITESPACE","\n        ",157],["T_STRING","NULL",158],",",["T_WHITESPACE","\n        ",158],["T_CONSTANT_ENCAPSED_STRING","'Select'",159],",",["T_WHITESPACE","\n      ",159],")",",",["T_WHITESPACE","\n      ",160],["T_ARRAY","array",161],"(",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver\\\\Schema'",162],",",["T_WHITESPACE","\n        ",162],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver'",163],",",["T_WHITESPACE","\n        ",163],["T_CONSTANT_ENCAPSED_STRING","'Schema'",164],",",["T_WHITESPACE","\n      ",164],")",",",["T_WHITESPACE","\n    ",165],")",";",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n  ",167],["T_DOC_COMMENT","\/**\n   * Test getDriverClass().\n   *\n   * @dataProvider providerGetDriverClass\n   *\/",169],["T_WHITESPACE","\n  ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","testGetDriverClass",174],"(",["T_VARIABLE","$expected",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$namespace",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$class",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$mock_pdo",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getMock",175],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",175],")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$connection",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","StubConnection",176],"(",["T_VARIABLE","$mock_pdo",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'namespace'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$namespace",176],")",")",";",["T_WHITESPACE","\n    ",176],["T_COMMENT","\/\/ Set the driver using our stub class' public property.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertEquals",178],"(",["T_VARIABLE","$expected",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$connection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getDriverClass",178],"(",["T_VARIABLE","$class",178],")",")",";",["T_WHITESPACE","\n  ",178],"}",["T_WHITESPACE","\n\n  ",179],["T_DOC_COMMENT","\/**\n   * Dataprovider for testSchema().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected namespaced class of schema object.\n   *   - Driver for PDO connection.\n   *   - Namespace for connection.\n   *\/",181],["T_WHITESPACE","\n  ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","providerSchema",190],"(",")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n    ",190],["T_RETURN","return",191],["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",["T_WHITESPACE","\n      ",191],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n        ",192],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver\\\\Schema'",193],",",["T_WHITESPACE","\n        ",193],["T_CONSTANT_ENCAPSED_STRING","'stub'",194],",",["T_WHITESPACE","\n        ",194],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver'",195],",",["T_WHITESPACE","\n      ",195],")",",",["T_WHITESPACE","\n    ",196],")",";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Test Connection::schema().\n   *\n   * @dataProvider providerSchema\n   *\/",200],["T_WHITESPACE","\n  ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","testSchema",205],"(",["T_VARIABLE","$expected",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$driver",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$namespace",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$mock_pdo",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getMock",206],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$connection",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_NEW","new",207],["T_WHITESPACE"," ",207],["T_STRING","StubConnection",207],"(",["T_VARIABLE","$mock_pdo",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_CONSTANT_ENCAPSED_STRING","'namespace'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$namespace",207],")",")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$connection",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","driver",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$driver",208],";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertInstanceOf",209],"(",["T_VARIABLE","$expected",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$connection",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","schema",209],"(",")",")",";",["T_WHITESPACE","\n  ",209],"}",["T_WHITESPACE","\n\n  ",210],["T_DOC_COMMENT","\/**\n   * Test Connection::destroy().\n   *\/",212],["T_WHITESPACE","\n  ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","testDestroy",215],"(",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$mock_pdo",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","getMock",216],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",216],")",";",["T_WHITESPACE","\n    ",216],["T_COMMENT","\/\/ Mocking StubConnection gives us access to the $schema attribute.\n",217],["T_WHITESPACE","    ",218],["T_VARIABLE","$connection",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getMock",218],"(",["T_WHITESPACE","\n      ",218],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubConnection'",219],",",["T_WHITESPACE","\n      ",219],["T_STRING","NULL",220],",",["T_WHITESPACE","\n      ",220],["T_ARRAY","array",221],"(",["T_VARIABLE","$mock_pdo",221],",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],"(",["T_CONSTANT_ENCAPSED_STRING","'namespace'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver'",221],")",")",["T_WHITESPACE","\n    ",221],")",";",["T_WHITESPACE","\n    ",222],["T_COMMENT","\/\/ Generate a schema object in order to verify that we've NULLed it later.\n",223],["T_WHITESPACE","    ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","assertInstanceOf",224],"(",["T_WHITESPACE","\n      ",224],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Tests\\\\Core\\\\Database\\\\Stub\\\\Driver\\\\Schema'",225],",",["T_WHITESPACE","\n      ",225],["T_VARIABLE","$connection",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","schema",226],"(",")",["T_WHITESPACE","\n    ",226],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$connection",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","destroy",228],"(",")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","assertAttributeEquals",229],"(",["T_STRING","NULL",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'schema'",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$connection",229],")",";",["T_WHITESPACE","\n  ",229],"}",["T_WHITESPACE","\n\n  ",230],["T_DOC_COMMENT","\/**\n   * Dataprovider for testMakeComments().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected filtered comment.\n   *   - Arguments for Connection::makeComment().\n   *\/",232],["T_WHITESPACE","\n  ",239],["T_PUBLIC","public",240],["T_WHITESPACE"," ",240],["T_FUNCTION","function",240],["T_WHITESPACE"," ",240],["T_STRING","providerMakeComments",240],"(",")",["T_WHITESPACE"," ",240],"{",["T_WHITESPACE","\n    ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",["T_WHITESPACE","\n      ",241],["T_ARRAY","array",242],"(",["T_WHITESPACE","\n        ",242],["T_CONSTANT_ENCAPSED_STRING","'\/*  *\/ '",243],",",["T_WHITESPACE","\n        ",243],["T_ARRAY","array",244],"(",["T_CONSTANT_ENCAPSED_STRING","''",244],")",",",["T_WHITESPACE","\n      ",244],")",",",["T_WHITESPACE","\n      ",245],["T_ARRAY","array",246],"(",["T_WHITESPACE","\n        ",246],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  *  \/ DROP TABLE node. -- *\/ '",247],",",["T_WHITESPACE","\n        ",247],["T_ARRAY","array",248],"(",["T_CONSTANT_ENCAPSED_STRING","'Exploit * \/ DROP TABLE node; --'",248],")",",",["T_WHITESPACE","\n      ",248],")",",",["T_WHITESPACE","\n      ",249],["T_ARRAY","array",250],"(",["T_WHITESPACE","\n        ",250],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  *  \/ DROP TABLE node. --. another comment *\/ '",251],",",["T_WHITESPACE","\n        ",251],["T_ARRAY","array",252],"(",["T_CONSTANT_ENCAPSED_STRING","'Exploit * \/ DROP TABLE node; --'",252],",",["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'another comment'",252],")",",",["T_WHITESPACE","\n      ",252],")",",",["T_WHITESPACE","\n    ",253],")",";",["T_WHITESPACE","\n  ",254],"}",["T_WHITESPACE","\n\n  ",255],["T_DOC_COMMENT","\/**\n   * Test Connection::makeComments().\n   *\n   * @dataProvider providerMakeComments\n   *\/",257],["T_WHITESPACE","\n  ",261],["T_PUBLIC","public",262],["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],["T_WHITESPACE"," ",262],["T_STRING","testMakeComments",262],"(",["T_VARIABLE","$expected",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$comment_array",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$mock_pdo",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","getMock",263],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",263],")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$connection",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_NEW","new",264],["T_WHITESPACE"," ",264],["T_STRING","StubConnection",264],"(",["T_VARIABLE","$mock_pdo",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",")",")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","assertEquals",265],"(",["T_VARIABLE","$expected",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$connection",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","makeComment",265],"(",["T_VARIABLE","$comment_array",265],")",")",";",["T_WHITESPACE","\n  ",265],"}",["T_WHITESPACE","\n\n  ",266],["T_DOC_COMMENT","\/**\n   * Dataprovider for testFilterComments().\n   *\n   * @return array\n   *   Array of arrays with the following elements:\n   *   - Expected filtered comment.\n   *   - Comment to filter.\n   *\/",268],["T_WHITESPACE","\n  ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","providerFilterComments",276],"(",")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n    ",276],["T_RETURN","return",277],["T_WHITESPACE"," ",277],["T_ARRAY","array",277],"(",["T_WHITESPACE","\n      ",277],["T_ARRAY","array",278],"(",["T_CONSTANT_ENCAPSED_STRING","''",278],",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","''",278],")",",",["T_WHITESPACE","\n      ",278],["T_ARRAY","array",279],"(",["T_CONSTANT_ENCAPSED_STRING","'Exploit  *  \/ DROP TABLE node. --'",279],",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'Exploit * \/ DROP TABLE node; --'",279],")",",",["T_WHITESPACE","\n      ",279],["T_ARRAY","array",280],"(",["T_CONSTANT_ENCAPSED_STRING","'Exploit  * \/ DROP TABLE node. --'",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'Exploit *\/ DROP TABLE node; --'",280],")",",",["T_WHITESPACE","\n    ",280],")",";",["T_WHITESPACE","\n  ",281],"}",["T_WHITESPACE","\n\n  ",282],["T_DOC_COMMENT","\/**\n   * Test Connection::filterComments().\n   *\n   * @dataProvider providerFilterComments\n   *\/",284],["T_WHITESPACE","\n  ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","testFilterComments",289],"(",["T_VARIABLE","$expected",289],",",["T_WHITESPACE"," ",289],["T_VARIABLE","$comment",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$mock_pdo",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getMock",290],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubPDO'",290],")",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$connection",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_NEW","new",291],["T_WHITESPACE"," ",291],["T_STRING","StubConnection",291],"(",["T_VARIABLE","$mock_pdo",291],",",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",")",";",["T_WHITESPACE","\n\n    ",291],["T_COMMENT","\/\/ filterComment() is protected, so we make it accessible with reflection.\n",293],["T_WHITESPACE","    ",294],["T_VARIABLE","$reflection",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_NEW","new",294],["T_WHITESPACE"," ",294],["T_NS_SEPARATOR","\\",294],["T_STRING","ReflectionClass",294],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Tests\\Core\\Database\\Stub\\StubConnection'",294],")",";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$filter_comment",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$reflection",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getMethod",295],"(",["T_CONSTANT_ENCAPSED_STRING","'filterComment'",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$filter_comment",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","setAccessible",296],"(",["T_STRING","TRUE",296],")",";",["T_WHITESPACE","\n\n    ",296],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertEquals",298],"(",["T_WHITESPACE","\n      ",298],["T_VARIABLE","$expected",299],",",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$filter_comment",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","invokeArgs",300],"(",["T_VARIABLE","$connection",300],",",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",["T_VARIABLE","$comment",300],")",")",["T_WHITESPACE","\n    ",300],")",";",["T_WHITESPACE","\n  ",301],"}",["T_WHITESPACE","\n\n",302],"}",["T_WHITESPACE","\n",304]]
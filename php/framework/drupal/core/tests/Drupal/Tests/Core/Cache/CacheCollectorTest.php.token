[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Cache",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","UnitTestCase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\Cache\\CacheCollector\n * @group Cache\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","CacheCollectorTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","UnitTestCase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The cache backend that should be used.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$cacheBackend",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The cache tags invalidator.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheTagsInvalidatorInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$cacheTagsInvalidator",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The lock backend that should be used.\n   *\n   * @var \\PHPUnit_Framework_MockObject_MockObject\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$lock",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The cache id used for the test.\n   *\n   * @var string\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$cid",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Cache collector implementation to test.\n   *\n   * @var \\Drupal\\Tests\\Core\\Cache\\CacheCollectorHelper\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$collector",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","setUp",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","cacheBackend",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getMock",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Cache\\CacheBackendInterface'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","cacheTagsInvalidator",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMock",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Cache\\CacheTagsInvalidatorInterface'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","lock",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMock",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Lock\\LockBackendInterface'",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","cid",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","randomMachineName",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","collector",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","CacheCollectorHelper",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","cid",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","cacheBackend",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","lock",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getContainerWithCacheTagsInvalidator",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","cacheTagsInvalidator",59],")",";",["T_WHITESPACE","\n  ",59],"}",["T_WHITESPACE","\n\n\n  ",60],["T_DOC_COMMENT","\/**\n   * Tests the resolve cache miss function.\n   *\/",63],["T_WHITESPACE","\n  ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","testResolveCacheMiss",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$key",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","randomMachineName",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$value",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","randomMachineName",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","collector",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","setCacheMissData",69],"(",["T_VARIABLE","$key",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$value",69],")",";",["T_WHITESPACE","\n\n    ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEquals",71],"(",["T_VARIABLE","$value",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","collector",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_VARIABLE","$key",71],")",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Tests setting and getting values when the cache is empty.\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","testSetAndGet",77],"(",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$key",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","randomMachineName",78],"(",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$value",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","randomMachineName",79],"(",")",";",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertNull",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","collector",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",["T_VARIABLE","$key",81],")",")",";",["T_WHITESPACE","\n\n    ",81],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","collector",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","set",83],"(",["T_VARIABLE","$key",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$value",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertTrue",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","collector",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","has",84],"(",["T_VARIABLE","$key",84],")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEquals",85],"(",["T_VARIABLE","$value",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","collector",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_VARIABLE","$key",85],")",")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Makes sure that NULL is a valid value and is collected.\n   *\/",89],["T_WHITESPACE","\n  ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","testSetAndGetNull",92],"(",")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$key",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","randomMachineName",93],"(",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$value",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","NULL",94],";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","cacheBackend",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","expects",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","once",96],"(",")",")",["T_WHITESPACE","\n      ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'invalidate'",97],")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","with",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","cid",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","collector",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","set",99],"(",["T_VARIABLE","$key",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$value",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertTrue",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","collector",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","has",100],"(",["T_VARIABLE","$key",100],")",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEquals",101],"(",["T_VARIABLE","$value",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","collector",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_VARIABLE","$key",101],")",")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Ensure that getting a value that isn't set does not mark it as\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ existent.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$non_existing_key",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","randomMachineName",105],"(",["T_LNUMBER","7",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","collector",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_VARIABLE","$non_existing_key",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertFalse",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","collector",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","has",107],"(",["T_VARIABLE","$non_existing_key",107],")",")",";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * Tests returning value from the collected cache.\n   *\/",110],["T_WHITESPACE","\n  ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","testGetFromCache",113],"(",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$key",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","randomMachineName",114],"(",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$value",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","randomMachineName",115],"(",")",";",["T_WHITESPACE","\n\n    ",115],["T_VARIABLE","$cache",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_OBJECT_CAST","(object)",117],["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'data'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_VARIABLE","$key",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$value",118],")",",",["T_WHITESPACE","\n      ",118],["T_CONSTANT_ENCAPSED_STRING","'created'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_INT_CAST","(int)",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$_SERVER",119],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",119],"]",",",["T_WHITESPACE","\n    ",119],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","cacheBackend",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","expects",121],"(",["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","once",121],"(",")",")",["T_WHITESPACE","\n      ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","method",122],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",122],")",["T_WHITESPACE","\n      ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","with",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","cid",123],")",["T_WHITESPACE","\n      ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","will",124],"(",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","returnValue",124],"(",["T_VARIABLE","$cache",124],")",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertTrue",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","collector",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","has",125],"(",["T_VARIABLE","$key",125],")",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEquals",126],"(",["T_VARIABLE","$value",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","collector",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","get",126],"(",["T_VARIABLE","$key",126],")",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertEquals",127],"(",["T_LNUMBER","0",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","collector",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getCacheMisses",127],"(",")",")",";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * Tests setting and deleting values.\n   *\/",130],["T_WHITESPACE","\n  ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","testDelete",133],"(",")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$key",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","randomMachineName",134],"(",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$value",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","randomMachineName",135],"(",")",";",["T_WHITESPACE","\n\n    ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertNull",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","collector",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","get",137],"(",["T_VARIABLE","$key",137],")",")",";",["T_WHITESPACE","\n\n    ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","collector",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","set",139],"(",["T_VARIABLE","$key",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$value",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertTrue",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","collector",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","has",140],"(",["T_VARIABLE","$key",140],")",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertEquals",141],"(",["T_VARIABLE","$value",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","collector",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_VARIABLE","$key",141],")",")",";",["T_WHITESPACE","\n\n    ",141],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","cacheBackend",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","expects",143],"(",["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","once",143],"(",")",")",["T_WHITESPACE","\n      ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","method",144],"(",["T_CONSTANT_ENCAPSED_STRING","'invalidate'",144],")",["T_WHITESPACE","\n      ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","with",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","cid",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","collector",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","delete",146],"(",["T_VARIABLE","$key",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertFalse",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","collector",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","has",147],"(",["T_VARIABLE","$key",147],")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertEquals",148],"(",["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","collector",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","get",148],"(",["T_VARIABLE","$key",148],")",")",";",["T_WHITESPACE","\n  ",148],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * Tests updating the cache when no changes were made.\n   *\/",151],["T_WHITESPACE","\n  ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","testUpdateCacheNoChanges",154],"(",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","lock",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","expects",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","never",155],"(",")",")",["T_WHITESPACE","\n      ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","method",156],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","cacheBackend",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","expects",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","never",157],"(",")",")",["T_WHITESPACE","\n      ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","method",158],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","collector",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","destruct",161],"(",")",";",["T_WHITESPACE","\n  ",161],"}",["T_WHITESPACE","\n\n  ",162],["T_DOC_COMMENT","\/**\n   * Tests updating the cache after a set.\n   *\/",164],["T_WHITESPACE","\n  ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","testUpdateCache",167],"(",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$key",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","randomMachineName",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$value",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","randomMachineName",169],"(",")",";",["T_WHITESPACE","\n\n    ",169],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","collector",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","setCacheMissData",171],"(",["T_VARIABLE","$key",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$value",171],")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","collector",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","get",172],"(",["T_VARIABLE","$key",172],")",";",["T_WHITESPACE","\n\n    ",172],["T_COMMENT","\/\/ Set up mock objects for the expected calls, first a lock acquire, then\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ cache get to look for conflicting cache entries, then a cache set and\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/ finally the lock is released again.\n",176],["T_WHITESPACE","    ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","lock",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","expects",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","once",177],"(",")",")",["T_WHITESPACE","\n      ",177],["T_OBJECT_OPERATOR","->",178],["T_STRING","method",178],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",178],")",["T_WHITESPACE","\n      ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","with",179],"(",["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","cid",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",179],")",["T_WHITESPACE","\n      ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","will",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","returnValue",180],"(",["T_STRING","TRUE",180],")",")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","cacheBackend",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","expects",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","once",181],"(",")",")",["T_WHITESPACE","\n      ",181],["T_OBJECT_OPERATOR","->",182],["T_STRING","method",182],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",182],")",["T_WHITESPACE","\n      ",182],["T_OBJECT_OPERATOR","->",183],["T_STRING","with",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","cid",183],",",["T_WHITESPACE"," ",183],["T_STRING","FALSE",183],")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","cacheBackend",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","expects",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","once",184],"(",")",")",["T_WHITESPACE","\n      ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","method",185],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",185],")",["T_WHITESPACE","\n      ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","with",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","cid",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_VARIABLE","$key",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$value",186],")",",",["T_WHITESPACE"," ",186],["T_STRING","Cache",186],["T_DOUBLE_COLON","::",186],["T_STRING","PERMANENT",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",")",")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","lock",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","expects",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","once",187],"(",")",")",["T_WHITESPACE","\n      ",187],["T_OBJECT_OPERATOR","->",188],["T_STRING","method",188],"(",["T_CONSTANT_ENCAPSED_STRING","'release'",188],")",["T_WHITESPACE","\n      ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","with",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","cid",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",189],")",";",["T_WHITESPACE","\n\n    ",189],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",191],["T_WHITESPACE","    ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","collector",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","destruct",192],"(",")",";",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n\n  ",193],["T_DOC_COMMENT","\/**\n   * Tests updating the cache when the lock acquire fails.\n   *\/",196],["T_WHITESPACE","\n  ",198],["T_PUBLIC","public",199],["T_WHITESPACE"," ",199],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","testUpdateCacheLockFail",199],"(",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$key",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","randomMachineName",200],"(",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$value",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","randomMachineName",201],"(",")",";",["T_WHITESPACE","\n\n    ",201],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","collector",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setCacheMissData",203],"(",["T_VARIABLE","$key",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$value",203],")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","collector",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","get",204],"(",["T_VARIABLE","$key",204],")",";",["T_WHITESPACE","\n\n    ",204],["T_COMMENT","\/\/ The lock acquire returns false, so the method should abort.\n",206],["T_WHITESPACE","    ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","lock",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","expects",207],"(",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","once",207],"(",")",")",["T_WHITESPACE","\n      ",207],["T_OBJECT_OPERATOR","->",208],["T_STRING","method",208],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",208],")",["T_WHITESPACE","\n      ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","with",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","cid",209],["T_WHITESPACE"," ",209],".",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",209],")",["T_WHITESPACE","\n      ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","will",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","returnValue",210],"(",["T_STRING","FALSE",210],")",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","cacheBackend",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","expects",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","never",211],"(",")",")",["T_WHITESPACE","\n      ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","method",212],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",212],")",";",["T_WHITESPACE","\n\n    ",212],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",214],["T_WHITESPACE","    ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","collector",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","destruct",215],"(",")",";",["T_WHITESPACE","\n  ",215],"}",["T_WHITESPACE","\n\n  ",216],["T_DOC_COMMENT","\/**\n   * Tests updating the cache when there is a conflict after cache invalidation.\n   *\/",218],["T_WHITESPACE","\n  ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","testUpdateCacheInvalidatedConflict",221],"(",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$key",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","randomMachineName",222],"(",")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$value",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","randomMachineName",223],"(",")",";",["T_WHITESPACE","\n\n    ",223],["T_VARIABLE","$cache",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_OBJECT_CAST","(object)",225],["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",["T_WHITESPACE","\n      ",225],["T_CONSTANT_ENCAPSED_STRING","'data'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_VARIABLE","$key",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$value",226],")",",",["T_WHITESPACE","\n      ",226],["T_CONSTANT_ENCAPSED_STRING","'created'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_INT_CAST","(int)",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$_SERVER",227],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",227],"]",",",["T_WHITESPACE","\n    ",227],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","cacheBackend",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","expects",229],"(",["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","at",229],"(",["T_LNUMBER","0",229],")",")",["T_WHITESPACE","\n      ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","method",230],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",230],")",["T_WHITESPACE","\n      ",230],["T_OBJECT_OPERATOR","->",231],["T_STRING","with",231],"(",["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","cid",231],")",["T_WHITESPACE","\n      ",231],["T_OBJECT_OPERATOR","->",232],["T_STRING","will",232],"(",["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","returnValue",232],"(",["T_VARIABLE","$cache",232],")",")",";",["T_WHITESPACE","\n\n    ",232],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","cacheBackend",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","expects",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","at",234],"(",["T_LNUMBER","1",234],")",")",["T_WHITESPACE","\n      ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","method",235],"(",["T_CONSTANT_ENCAPSED_STRING","'invalidate'",235],")",["T_WHITESPACE","\n      ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","with",236],"(",["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","cid",236],")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","collector",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","set",237],"(",["T_VARIABLE","$key",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'new value'",237],")",";",["T_WHITESPACE","\n\n    ",237],["T_COMMENT","\/\/ Set up mock objects for the expected calls, first a lock acquire, then\n",239],["T_WHITESPACE","    ",240],["T_COMMENT","\/\/ cache get to look for conflicting cache entries, which does find\n",240],["T_WHITESPACE","    ",241],["T_COMMENT","\/\/ and then it deletes the cache and aborts.\n",241],["T_WHITESPACE","    ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","lock",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","expects",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","once",242],"(",")",")",["T_WHITESPACE","\n      ",242],["T_OBJECT_OPERATOR","->",243],["T_STRING","method",243],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",243],")",["T_WHITESPACE","\n      ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","with",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","cid",244],["T_WHITESPACE"," ",244],".",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",244],")",["T_WHITESPACE","\n      ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","will",245],"(",["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","returnValue",245],"(",["T_STRING","TRUE",245],")",")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$cache",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_OBJECT_CAST","(object)",246],["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'data'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_ARRAY","array",247],"(",["T_VARIABLE","$key",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$value",247],")",",",["T_WHITESPACE","\n      ",247],["T_CONSTANT_ENCAPSED_STRING","'created'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_INT_CAST","(int)",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$_SERVER",248],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",248],"]",["T_WHITESPACE"," ",248],"+",["T_WHITESPACE"," ",248],["T_LNUMBER","1",248],",",["T_WHITESPACE","\n    ",248],")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","cacheBackend",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","expects",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","at",250],"(",["T_LNUMBER","0",250],")",")",["T_WHITESPACE","\n      ",250],["T_OBJECT_OPERATOR","->",251],["T_STRING","method",251],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",251],")",["T_WHITESPACE","\n      ",251],["T_OBJECT_OPERATOR","->",252],["T_STRING","with",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","cid",252],")",["T_WHITESPACE","\n      ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","will",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","returnValue",253],"(",["T_VARIABLE","$cache",253],")",")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","cacheBackend",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","expects",254],"(",["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","once",254],"(",")",")",["T_WHITESPACE","\n      ",254],["T_OBJECT_OPERATOR","->",255],["T_STRING","method",255],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",255],")",["T_WHITESPACE","\n      ",255],["T_OBJECT_OPERATOR","->",256],["T_STRING","with",256],"(",["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","cid",256],")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","lock",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","expects",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","once",257],"(",")",")",["T_WHITESPACE","\n      ",257],["T_OBJECT_OPERATOR","->",258],["T_STRING","method",258],"(",["T_CONSTANT_ENCAPSED_STRING","'release'",258],")",["T_WHITESPACE","\n      ",258],["T_OBJECT_OPERATOR","->",259],["T_STRING","with",259],"(",["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","cid",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",259],")",";",["T_WHITESPACE","\n\n    ",259],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",261],["T_WHITESPACE","    ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","collector",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","destruct",262],"(",")",";",["T_WHITESPACE","\n  ",262],"}",["T_WHITESPACE","\n\n  ",263],["T_DOC_COMMENT","\/**\n   * Tests updating the cache when a different request\n   *\/",265],["T_WHITESPACE","\n  ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","testUpdateCacheMerge",268],"(",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$key",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","randomMachineName",269],"(",")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$value",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","randomMachineName",270],"(",")",";",["T_WHITESPACE","\n\n    ",270],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","collector",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","setCacheMissData",272],"(",["T_VARIABLE","$key",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$value",272],")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","collector",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","get",273],"(",["T_VARIABLE","$key",273],")",";",["T_WHITESPACE","\n\n    ",273],["T_COMMENT","\/\/ Set up mock objects for the expected calls, first a lock acquire, then\n",275],["T_WHITESPACE","    ",276],["T_COMMENT","\/\/ cache get to look for existing cache entries, which does find\n",276],["T_WHITESPACE","    ",277],["T_COMMENT","\/\/ and then it merges them.\n",277],["T_WHITESPACE","    ",278],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","lock",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","expects",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","once",278],"(",")",")",["T_WHITESPACE","\n      ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","method",279],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",279],")",["T_WHITESPACE","\n      ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","with",280],"(",["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","cid",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",280],")",["T_WHITESPACE","\n      ",280],["T_OBJECT_OPERATOR","->",281],["T_STRING","will",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","returnValue",281],"(",["T_STRING","TRUE",281],")",")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$cache",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_OBJECT_CAST","(object)",282],["T_WHITESPACE"," ",282],["T_ARRAY","array",282],"(",["T_WHITESPACE","\n      ",282],["T_CONSTANT_ENCAPSED_STRING","'data'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'other key'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'other value'",283],")",",",["T_WHITESPACE","\n      ",283],["T_CONSTANT_ENCAPSED_STRING","'created'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_INT_CAST","(int)",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$_SERVER",284],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",284],"]",["T_WHITESPACE"," ",284],"+",["T_WHITESPACE"," ",284],["T_LNUMBER","1",284],",",["T_WHITESPACE","\n    ",284],")",";",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","cacheBackend",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","expects",286],"(",["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","at",286],"(",["T_LNUMBER","0",286],")",")",["T_WHITESPACE","\n      ",286],["T_OBJECT_OPERATOR","->",287],["T_STRING","method",287],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",287],")",["T_WHITESPACE","\n      ",287],["T_OBJECT_OPERATOR","->",288],["T_STRING","with",288],"(",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","cid",288],")",["T_WHITESPACE","\n      ",288],["T_OBJECT_OPERATOR","->",289],["T_STRING","will",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","returnValue",289],"(",["T_VARIABLE","$cache",289],")",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","cacheBackend",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","expects",290],"(",["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","once",290],"(",")",")",["T_WHITESPACE","\n      ",290],["T_OBJECT_OPERATOR","->",291],["T_STRING","method",291],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",291],")",["T_WHITESPACE","\n      ",291],["T_OBJECT_OPERATOR","->",292],["T_STRING","with",292],"(",["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","cid",292],",",["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",["T_CONSTANT_ENCAPSED_STRING","'other key'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'other value'",292],",",["T_WHITESPACE"," ",292],["T_VARIABLE","$key",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_VARIABLE","$value",292],")",",",["T_WHITESPACE"," ",292],["T_STRING","Cache",292],["T_DOUBLE_COLON","::",292],["T_STRING","PERMANENT",292],",",["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",")",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","lock",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","expects",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","once",293],"(",")",")",["T_WHITESPACE","\n      ",293],["T_OBJECT_OPERATOR","->",294],["T_STRING","method",294],"(",["T_CONSTANT_ENCAPSED_STRING","'release'",294],")",["T_WHITESPACE","\n      ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","with",295],"(",["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","cid",295],["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",295],")",";",["T_WHITESPACE","\n\n    ",295],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",297],["T_WHITESPACE","    ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","collector",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","destruct",298],"(",")",";",["T_WHITESPACE","\n  ",298],"}",["T_WHITESPACE","\n\n  ",299],["T_DOC_COMMENT","\/**\n   * Tests updating the cache after a delete.\n   *\/",301],["T_WHITESPACE","\n  ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","testUpdateCacheDelete",304],"(",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$key",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","randomMachineName",305],"(",")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$value",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","randomMachineName",306],"(",")",";",["T_WHITESPACE","\n\n    ",306],["T_VARIABLE","$cache",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_OBJECT_CAST","(object)",308],["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_WHITESPACE","\n      ",308],["T_CONSTANT_ENCAPSED_STRING","'data'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",["T_VARIABLE","$key",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$value",309],")",",",["T_WHITESPACE","\n      ",309],["T_CONSTANT_ENCAPSED_STRING","'created'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_INT_CAST","(int)",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$_SERVER",310],"[",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_TIME'",310],"]",",",["T_WHITESPACE","\n    ",310],")",";",["T_WHITESPACE","\n    ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","cacheBackend",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","expects",312],"(",["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","at",312],"(",["T_LNUMBER","0",312],")",")",["T_WHITESPACE","\n      ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","method",313],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",313],")",["T_WHITESPACE","\n      ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","with",314],"(",["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","cid",314],")",["T_WHITESPACE","\n      ",314],["T_OBJECT_OPERATOR","->",315],["T_STRING","will",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","returnValue",315],"(",["T_VARIABLE","$cache",315],")",")",";",["T_WHITESPACE","\n\n    ",315],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","collector",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","delete",317],"(",["T_VARIABLE","$key",317],")",";",["T_WHITESPACE","\n\n    ",317],["T_COMMENT","\/\/ Set up mock objects for the expected calls, first a lock acquire, then\n",319],["T_WHITESPACE","    ",320],["T_COMMENT","\/\/ cache get to look for conflicting cache entries, then a cache set and\n",320],["T_WHITESPACE","    ",321],["T_COMMENT","\/\/ finally the lock is released again.\n",321],["T_WHITESPACE","    ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","lock",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","expects",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","once",322],"(",")",")",["T_WHITESPACE","\n      ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","method",323],"(",["T_CONSTANT_ENCAPSED_STRING","'acquire'",323],")",["T_WHITESPACE","\n      ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","with",324],"(",["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","cid",324],["T_WHITESPACE"," ",324],".",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",324],")",["T_WHITESPACE","\n      ",324],["T_OBJECT_OPERATOR","->",325],["T_STRING","will",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","returnValue",325],"(",["T_STRING","TRUE",325],")",")",";",["T_WHITESPACE","\n    ",325],["T_COMMENT","\/\/ The second argument is set to TRUE because we triggered a cache\n",326],["T_WHITESPACE","    ",327],["T_COMMENT","\/\/ invalidation.\n",327],["T_WHITESPACE","    ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","cacheBackend",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","expects",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","at",328],"(",["T_LNUMBER","0",328],")",")",["T_WHITESPACE","\n      ",328],["T_OBJECT_OPERATOR","->",329],["T_STRING","method",329],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",329],")",["T_WHITESPACE","\n      ",329],["T_OBJECT_OPERATOR","->",330],["T_STRING","with",330],"(",["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","cid",330],",",["T_WHITESPACE"," ",330],["T_STRING","TRUE",330],")",";",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","cacheBackend",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","expects",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","once",331],"(",")",")",["T_WHITESPACE","\n      ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","method",332],"(",["T_CONSTANT_ENCAPSED_STRING","'set'",332],")",["T_WHITESPACE","\n      ",332],["T_OBJECT_OPERATOR","->",333],["T_STRING","with",333],"(",["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","cid",333],",",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",")",",",["T_WHITESPACE"," ",333],["T_STRING","Cache",333],["T_DOUBLE_COLON","::",333],["T_STRING","PERMANENT",333],",",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",")",")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","lock",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","expects",334],"(",["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","once",334],"(",")",")",["T_WHITESPACE","\n      ",334],["T_OBJECT_OPERATOR","->",335],["T_STRING","method",335],"(",["T_CONSTANT_ENCAPSED_STRING","'release'",335],")",["T_WHITESPACE","\n      ",335],["T_OBJECT_OPERATOR","->",336],["T_STRING","with",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","cid",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","':Drupal\\Core\\Cache\\CacheCollector'",336],")",";",["T_WHITESPACE","\n\n    ",336],["T_COMMENT","\/\/ Destruct the object to trigger the update data process.\n",338],["T_WHITESPACE","    ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","collector",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","destruct",339],"(",")",";",["T_WHITESPACE","\n  ",339],"}",["T_WHITESPACE","\n\n  ",340],["T_DOC_COMMENT","\/**\n   * Tests a reset of the cache collector.\n   *\/",342],["T_WHITESPACE","\n  ",344],["T_PUBLIC","public",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","testUpdateCacheReset",345],"(",")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$key",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","randomMachineName",346],"(",")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$value",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","randomMachineName",347],"(",")",";",["T_WHITESPACE","\n\n    ",347],["T_COMMENT","\/\/ Set the data and request it.\n",349],["T_WHITESPACE","    ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","collector",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","setCacheMissData",350],"(",["T_VARIABLE","$key",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$value",350],")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","assertEquals",351],"(",["T_VARIABLE","$value",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","collector",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","get",351],"(",["T_VARIABLE","$key",351],")",")",";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","assertEquals",352],"(",["T_VARIABLE","$value",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","collector",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","get",352],"(",["T_VARIABLE","$key",352],")",")",";",["T_WHITESPACE","\n\n    ",352],["T_COMMENT","\/\/ Should have been added to the storage and only be requested once.\n",354],["T_WHITESPACE","    ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","assertEquals",355],"(",["T_LNUMBER","1",355],",",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","collector",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getCacheMisses",355],"(",")",")",";",["T_WHITESPACE","\n\n    ",355],["T_COMMENT","\/\/ Reset the collected cache, should call it again.\n",357],["T_WHITESPACE","    ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","collector",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","reset",358],"(",")",";",["T_WHITESPACE","\n    ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","assertEquals",359],"(",["T_VARIABLE","$value",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","collector",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","get",359],"(",["T_VARIABLE","$key",359],")",")",";",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","assertEquals",360],"(",["T_LNUMBER","2",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","collector",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getCacheMisses",360],"(",")",")",";",["T_WHITESPACE","\n  ",360],"}",["T_WHITESPACE","\n\n  ",361],["T_DOC_COMMENT","\/**\n   * Tests a clear of the cache collector.\n   *\/",363],["T_WHITESPACE","\n  ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","testUpdateCacheClear",366],"(",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$key",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","randomMachineName",367],"(",")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$value",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","randomMachineName",368],"(",")",";",["T_WHITESPACE","\n\n    ",368],["T_COMMENT","\/\/ Set the data and request it.\n",370],["T_WHITESPACE","    ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","collector",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","setCacheMissData",371],"(",["T_VARIABLE","$key",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$value",371],")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","assertEquals",372],"(",["T_VARIABLE","$value",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","collector",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","get",372],"(",["T_VARIABLE","$key",372],")",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertEquals",373],"(",["T_VARIABLE","$value",373],",",["T_WHITESPACE"," ",373],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","collector",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","get",373],"(",["T_VARIABLE","$key",373],")",")",";",["T_WHITESPACE","\n\n    ",373],["T_COMMENT","\/\/ Should have been added to the storage and only be requested once.\n",375],["T_WHITESPACE","    ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertEquals",376],"(",["T_LNUMBER","1",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","collector",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getCacheMisses",376],"(",")",")",";",["T_WHITESPACE","\n\n    ",376],["T_COMMENT","\/\/ Clear the collected cache, should call it again.\n",378],["T_WHITESPACE","    ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","cacheBackend",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","expects",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","once",379],"(",")",")",["T_WHITESPACE","\n      ",379],["T_OBJECT_OPERATOR","->",380],["T_STRING","method",380],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",380],")",["T_WHITESPACE","\n      ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","with",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","cid",381],")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","cacheTagsInvalidator",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","expects",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","never",382],"(",")",")",["T_WHITESPACE","\n      ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","method",383],"(",["T_CONSTANT_ENCAPSED_STRING","'invalidateTags'",383],")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","collector",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","clear",384],"(",")",";",["T_WHITESPACE","\n    ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","assertEquals",385],"(",["T_VARIABLE","$value",385],",",["T_WHITESPACE"," ",385],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","collector",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","get",385],"(",["T_VARIABLE","$key",385],")",")",";",["T_WHITESPACE","\n    ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","assertEquals",386],"(",["T_LNUMBER","2",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","collector",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getCacheMisses",386],"(",")",")",";",["T_WHITESPACE","\n  ",386],"}",["T_WHITESPACE","\n\n  ",387],["T_DOC_COMMENT","\/**\n   * Tests a clear of the cache collector using tags.\n   *\/",389],["T_WHITESPACE","\n  ",391],["T_PUBLIC","public",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","testUpdateCacheClearTags",392],"(",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$key",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","randomMachineName",393],"(",")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$value",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","randomMachineName",394],"(",")",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$tags",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_ARRAY","array",395],"(",["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","randomMachineName",395],"(",")",")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","collector",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_NEW","new",396],["T_WHITESPACE"," ",396],["T_STRING","CacheCollectorHelper",396],"(",["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","cid",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","cacheBackend",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","lock",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$tags",396],")",";",["T_WHITESPACE","\n\n    ",396],["T_COMMENT","\/\/ Set the data and request it.\n",398],["T_WHITESPACE","    ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","collector",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","setCacheMissData",399],"(",["T_VARIABLE","$key",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$value",399],")",";",["T_WHITESPACE","\n    ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","assertEquals",400],"(",["T_VARIABLE","$value",400],",",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","collector",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","get",400],"(",["T_VARIABLE","$key",400],")",")",";",["T_WHITESPACE","\n    ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","assertEquals",401],"(",["T_VARIABLE","$value",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","collector",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","get",401],"(",["T_VARIABLE","$key",401],")",")",";",["T_WHITESPACE","\n\n    ",401],["T_COMMENT","\/\/ Should have been added to the storage and only be requested once.\n",403],["T_WHITESPACE","    ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","assertEquals",404],"(",["T_LNUMBER","1",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","collector",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","getCacheMisses",404],"(",")",")",";",["T_WHITESPACE","\n\n    ",404],["T_COMMENT","\/\/ Clear the collected cache using the tags, should call it again.\n",406],["T_WHITESPACE","    ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","cacheBackend",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","expects",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","never",407],"(",")",")",["T_WHITESPACE","\n      ",407],["T_OBJECT_OPERATOR","->",408],["T_STRING","method",408],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",408],")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","cacheTagsInvalidator",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","expects",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","once",409],"(",")",")",["T_WHITESPACE","\n      ",409],["T_OBJECT_OPERATOR","->",410],["T_STRING","method",410],"(",["T_CONSTANT_ENCAPSED_STRING","'invalidateTags'",410],")",["T_WHITESPACE","\n      ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","with",411],"(",["T_VARIABLE","$tags",411],")",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","collector",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","clear",412],"(",")",";",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","assertEquals",413],"(",["T_VARIABLE","$value",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","collector",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","get",413],"(",["T_VARIABLE","$key",413],")",")",";",["T_WHITESPACE","\n    ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","assertEquals",414],"(",["T_LNUMBER","2",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","collector",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getCacheMisses",414],"(",")",")",";",["T_WHITESPACE","\n  ",414],"}",["T_WHITESPACE","\n\n",415],"}",["T_WHITESPACE","\n",417]]
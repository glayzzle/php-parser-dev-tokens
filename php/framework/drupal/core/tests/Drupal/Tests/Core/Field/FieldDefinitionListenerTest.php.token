[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Field",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Exception",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PluginNotFoundException",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DynamicallyFieldableEntityStorageInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityFieldManagerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityTypeInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityTypeManagerInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Field",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FieldDefinitionInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Field",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FieldDefinitionListener",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","KeyValueStore",14],["T_NS_SEPARATOR","\\",14],["T_STRING","KeyValueFactoryInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","KeyValueStore",15],["T_NS_SEPARATOR","\\",15],["T_STRING","KeyValueStoreInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Tests",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UnitTestCase",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Prophecy",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Argument",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\Field\\FieldDefinitionListener\n * @group Field\n *\/",19],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","FieldDefinitionListenerTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","UnitTestCase",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The key-value factory.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface|\\Prophecy\\Prophecy\\ProphecyInterface\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$keyValueFactory",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface|\\Prophecy\\Prophecy\\ProphecyInterface\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$entityTypeManager",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * The entity field manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityFieldManagerInterface|\\Prophecy\\Prophecy\\ProphecyInterface\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$entityFieldManager",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * The cache backend.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface|\\Prophecy\\Prophecy\\ProphecyInterface\n   *\/",46],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$cacheBackend",51],";",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * The field definition listener under test.\n   *\n   * @var \\Drupal\\Core\\Field\\FieldDefinitionListener\n   *\/",53],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$fieldDefinitionListener",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","setUp",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","setUp",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","keyValueFactory",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","prophesize",66],"(",["T_STRING","KeyValueFactoryInterface",66],["T_DOUBLE_COLON","::",66],["T_CLASS","class",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","entityTypeManager",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","prophesize",67],"(",["T_STRING","EntityTypeManagerInterface",67],["T_DOUBLE_COLON","::",67],["T_CLASS","class",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","entityFieldManager",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","prophesize",68],"(",["T_STRING","EntityFieldManagerInterface",68],["T_DOUBLE_COLON","::",68],["T_CLASS","class",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","cacheBackend",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","prophesize",69],"(",["T_STRING","CacheBackendInterface",69],["T_DOUBLE_COLON","::",69],["T_CLASS","class",69],")",";",["T_WHITESPACE","\n\n    ",69],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","fieldDefinitionListener",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","FieldDefinitionListener",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","entityTypeManager",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","reveal",71],"(",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","entityFieldManager",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","reveal",71],"(",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","keyValueFactory",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","reveal",71],"(",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","cacheBackend",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","reveal",71],"(",")",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Sets up the entity manager to be tested.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface[]|\\Prophecy\\Prophecy\\ProphecyInterface[] $definitions\n   *   (optional) An array of entity type definitions.\n   *\/",74],["T_WHITESPACE","\n  ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","setUpEntityManager",80],"(",["T_VARIABLE","$definitions",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$class",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getMockClass",81],"(",["T_STRING","EntityInterface",81],["T_DOUBLE_COLON","::",81],["T_CLASS","class",81],")",";",["T_WHITESPACE","\n    ",81],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$definitions",82],["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$key",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_COMMENT","\/\/ \\Drupal\\Core\\Entity\\EntityTypeInterface::getLinkTemplates() is called\n",83],["T_WHITESPACE","      ",84],["T_COMMENT","\/\/ by \\Drupal\\Core\\Entity\\EntityManager::processDefinition() so it must\n",84],["T_WHITESPACE","      ",85],["T_COMMENT","\/\/ always be mocked.\n",85],["T_WHITESPACE","      ",86],["T_VARIABLE","$entity_type",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getLinkTemplates",86],"(",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","willReturn",86],"(","[","]",")",";",["T_WHITESPACE","\n\n      ",86],["T_COMMENT","\/\/ Give the entity type a legitimate class to return.\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$entity_type",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getClass",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","willReturn",89],"(",["T_VARIABLE","$class",89],")",";",["T_WHITESPACE","\n\n      ",89],["T_VARIABLE","$definitions",91],"[",["T_VARIABLE","$key",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$entity_type",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","reveal",91],"(",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","entityTypeManager",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getDefinition",94],"(",["T_STRING","Argument",94],["T_DOUBLE_COLON","::",94],["T_STRING","cetera",94],"(",")",")",["T_WHITESPACE","\n      ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","will",95],"(",["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$args",95],")",["T_WHITESPACE"," ",95],["T_USE","use",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$definitions",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n        ",95],["T_VARIABLE","$entity_type_id",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$args",96],"[",["T_LNUMBER","0",96],"]",";",["T_WHITESPACE","\n        ",96],["T_VARIABLE","$exception_on_invalid",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$args",97],"[",["T_LNUMBER","1",97],"]",";",["T_WHITESPACE","\n        ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_ISSET","isset",98],"(",["T_VARIABLE","$definitions",98],"[",["T_VARIABLE","$entity_type_id",98],"]",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n          ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$definitions",99],"[",["T_VARIABLE","$entity_type_id",99],"]",";",["T_WHITESPACE","\n        ",99],"}",["T_WHITESPACE","\n        ",100],["T_ELSEIF","elseif",101],["T_WHITESPACE"," ",101],"(","!",["T_VARIABLE","$exception_on_invalid",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n          ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_STRING","NULL",102],";",["T_WHITESPACE","\n        ",102],"}",["T_WHITESPACE","\n        ",103],["T_ELSE","else",104],["T_WHITESPACE"," ",104],["T_THROW","throw",104],["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","PluginNotFoundException",104],"(",["T_VARIABLE","$entity_type_id",104],")",";",["T_WHITESPACE","\n      ",104],"}",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","entityTypeManager",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getDefinitions",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","willReturn",106],"(",["T_VARIABLE","$definitions",106],")",";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n  ",107],["T_DOC_COMMENT","\/**\n   * @covers ::onFieldDefinitionCreate\n   *\/",109],["T_WHITESPACE","\n  ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","testOnFieldDefinitionCreateNewField",112],"(",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$field_definition",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","prophesize",113],"(",["T_STRING","FieldDefinitionInterface",113],["T_DOUBLE_COLON","::",113],["T_CLASS","class",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$field_definition",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getTargetEntityTypeId",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","willReturn",114],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$field_definition",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getTargetBundle",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","willReturn",115],"(",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$field_definition",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getName",116],"(",")",["T_OBJECT_OPERATOR","->",116],["T_STRING","willReturn",116],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field'",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$field_definition",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getType",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","willReturn",117],"(",["T_CONSTANT_ENCAPSED_STRING","'test_type'",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$storage",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","prophesize",119],"(",["T_STRING","DynamicallyFieldableEntityStorageInterface",119],["T_DOUBLE_COLON","::",119],["T_CLASS","class",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$storage",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","onFieldDefinitionCreate",120],"(",["T_VARIABLE","$field_definition",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","reveal",120],"(",")",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","shouldBeCalledTimes",120],"(",["T_LNUMBER","1",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","entityTypeManager",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getStorage",121],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","willReturn",121],"(",["T_VARIABLE","$storage",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","reveal",121],"(",")",")",";",["T_WHITESPACE","\n\n    ",121],["T_VARIABLE","$entity",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","prophesize",123],"(",["T_STRING","EntityTypeInterface",123],["T_DOUBLE_COLON","::",123],["T_CLASS","class",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","setUpEntityManager",124],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$entity",124],"]",")",";",["T_WHITESPACE","\n\n    ",124],["T_COMMENT","\/\/ Set up the stored bundle field map.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$key_value_store",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","prophesize",127],"(",["T_STRING","KeyValueStoreInterface",127],["T_DOUBLE_COLON","::",127],["T_CLASS","class",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","keyValueFactory",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","get",128],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.bundle_field_map'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","willReturn",128],"(",["T_VARIABLE","$key_value_store",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","reveal",128],"(",")",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$key_value_store",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","get",129],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","willReturn",129],"(","[","]",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$key_value_store",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","set",130],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",130],",",["T_WHITESPACE"," ",130],"[",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'test_field'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],"[",["T_WHITESPACE","\n        ",131],["T_CONSTANT_ENCAPSED_STRING","'type'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'test_type'",132],",",["T_WHITESPACE","\n        ",132],["T_CONSTANT_ENCAPSED_STRING","'bundles'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],"[",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",133],"]",",",["T_WHITESPACE","\n      ",133],"]",",",["T_WHITESPACE","\n    ",134],"]",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","shouldBeCalled",135],"(",")",";",["T_WHITESPACE","\n\n    ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","fieldDefinitionListener",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","onFieldDefinitionCreate",137],"(",["T_VARIABLE","$field_definition",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","reveal",137],"(",")",")",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * @covers ::onFieldDefinitionCreate\n   *\/",140],["T_WHITESPACE","\n  ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","testOnFieldDefinitionCreateExistingField",143],"(",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$field_definition",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","prophesize",144],"(",["T_STRING","FieldDefinitionInterface",144],["T_DOUBLE_COLON","::",144],["T_CLASS","class",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$field_definition",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getTargetEntityTypeId",145],"(",")",["T_OBJECT_OPERATOR","->",145],["T_STRING","willReturn",145],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$field_definition",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getTargetBundle",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","willReturn",146],"(",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$field_definition",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getName",147],"(",")",["T_OBJECT_OPERATOR","->",147],["T_STRING","willReturn",147],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field'",147],")",";",["T_WHITESPACE","\n\n    ",147],["T_VARIABLE","$storage",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","prophesize",149],"(",["T_STRING","DynamicallyFieldableEntityStorageInterface",149],["T_DOUBLE_COLON","::",149],["T_CLASS","class",149],")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$storage",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","onFieldDefinitionCreate",150],"(",["T_VARIABLE","$field_definition",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","reveal",150],"(",")",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","shouldBeCalledTimes",150],"(",["T_LNUMBER","1",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","entityTypeManager",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getStorage",151],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","willReturn",151],"(",["T_VARIABLE","$storage",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","reveal",151],"(",")",")",";",["T_WHITESPACE","\n\n    ",151],["T_VARIABLE","$entity",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","prophesize",153],"(",["T_STRING","EntityTypeInterface",153],["T_DOUBLE_COLON","::",153],["T_CLASS","class",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setUpEntityManager",154],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$entity",154],"]",")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Set up the stored bundle field map.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$key_value_store",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","prophesize",157],"(",["T_STRING","KeyValueStoreInterface",157],["T_DOUBLE_COLON","::",157],["T_CLASS","class",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","keyValueFactory",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","get",158],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.bundle_field_map'",158],")",["T_OBJECT_OPERATOR","->",158],["T_STRING","willReturn",158],"(",["T_VARIABLE","$key_value_store",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","reveal",158],"(",")",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$key_value_store",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","get",159],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","willReturn",159],"(","[",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'test_field'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],"[",["T_WHITESPACE","\n        ",160],["T_CONSTANT_ENCAPSED_STRING","'type'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'test_type'",161],",",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'bundles'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_bundle'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'existing_bundle'",162],"]",",",["T_WHITESPACE","\n      ",162],"]",",",["T_WHITESPACE","\n    ",163],"]",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$key_value_store",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","set",165],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",165],",",["T_WHITESPACE"," ",165],"[",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'test_field'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],"[",["T_WHITESPACE","\n        ",166],["T_CONSTANT_ENCAPSED_STRING","'type'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'test_type'",167],",",["T_WHITESPACE","\n        ",167],["T_CONSTANT_ENCAPSED_STRING","'bundles'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_bundle'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'existing_bundle'",168],",",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",168],"]",",",["T_WHITESPACE","\n      ",168],"]",",",["T_WHITESPACE","\n    ",169],"]",")",["T_WHITESPACE","\n      ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","shouldBeCalled",171],"(",")",";",["T_WHITESPACE","\n\n    ",171],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","fieldDefinitionListener",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","onFieldDefinitionCreate",173],"(",["T_VARIABLE","$field_definition",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","reveal",173],"(",")",")",";",["T_WHITESPACE","\n  ",173],"}",["T_WHITESPACE","\n\n  ",174],["T_DOC_COMMENT","\/**\n   * @covers ::onFieldDefinitionUpdate\n   *\/",176],["T_WHITESPACE","\n  ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","testOnFieldDefinitionUpdate",179],"(",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$field_definition",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","prophesize",180],"(",["T_STRING","FieldDefinitionInterface",180],["T_DOUBLE_COLON","::",180],["T_CLASS","class",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$field_definition",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getTargetEntityTypeId",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","willReturn",181],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",181],")",";",["T_WHITESPACE","\n\n    ",181],["T_VARIABLE","$storage",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","prophesize",183],"(",["T_STRING","DynamicallyFieldableEntityStorageInterface",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$storage",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","onFieldDefinitionUpdate",184],"(",["T_VARIABLE","$field_definition",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","reveal",184],"(",")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$field_definition",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","reveal",184],"(",")",")",["T_OBJECT_OPERATOR","->",184],["T_STRING","shouldBeCalledTimes",184],"(",["T_LNUMBER","1",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","entityTypeManager",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","getStorage",185],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",185],")",["T_OBJECT_OPERATOR","->",185],["T_STRING","willReturn",185],"(",["T_VARIABLE","$storage",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","reveal",185],"(",")",")",";",["T_WHITESPACE","\n\n    ",185],["T_VARIABLE","$entity",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","prophesize",187],"(",["T_STRING","EntityTypeInterface",187],["T_DOUBLE_COLON","::",187],["T_CLASS","class",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","setUpEntityManager",188],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$entity",188],"]",")",";",["T_WHITESPACE","\n\n    ",188],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","fieldDefinitionListener",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","onFieldDefinitionUpdate",190],"(",["T_VARIABLE","$field_definition",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","reveal",190],"(",")",",",["T_WHITESPACE"," ",190],["T_VARIABLE","$field_definition",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","reveal",190],"(",")",")",";",["T_WHITESPACE","\n  ",190],"}",["T_WHITESPACE","\n\n  ",191],["T_DOC_COMMENT","\/**\n   * @covers ::onFieldDefinitionDelete\n   *\/",193],["T_WHITESPACE","\n  ",195],["T_PUBLIC","public",196],["T_WHITESPACE"," ",196],["T_FUNCTION","function",196],["T_WHITESPACE"," ",196],["T_STRING","testOnFieldDefinitionDeleteMultipleBundles",196],"(",")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$field_definition",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","prophesize",197],"(",["T_STRING","FieldDefinitionInterface",197],["T_DOUBLE_COLON","::",197],["T_CLASS","class",197],")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$field_definition",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTargetEntityTypeId",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","willReturn",198],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",198],")",";",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$field_definition",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getTargetBundle",199],"(",")",["T_OBJECT_OPERATOR","->",199],["T_STRING","willReturn",199],"(",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",199],")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$field_definition",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getName",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","willReturn",200],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field'",200],")",";",["T_WHITESPACE","\n\n    ",200],["T_VARIABLE","$storage",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","prophesize",202],"(",["T_STRING","DynamicallyFieldableEntityStorageInterface",202],["T_DOUBLE_COLON","::",202],["T_CLASS","class",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$storage",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","onFieldDefinitionDelete",203],"(",["T_VARIABLE","$field_definition",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","reveal",203],"(",")",")",["T_OBJECT_OPERATOR","->",203],["T_STRING","shouldBeCalledTimes",203],"(",["T_LNUMBER","1",203],")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","entityTypeManager",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getStorage",204],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","willReturn",204],"(",["T_VARIABLE","$storage",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","reveal",204],"(",")",")",";",["T_WHITESPACE","\n\n    ",204],["T_VARIABLE","$entity",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","prophesize",206],"(",["T_STRING","EntityTypeInterface",206],["T_DOUBLE_COLON","::",206],["T_CLASS","class",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","setUpEntityManager",207],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$entity",207],"]",")",";",["T_WHITESPACE","\n\n    ",207],["T_COMMENT","\/\/ Set up the stored bundle field map.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$key_value_store",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","prophesize",210],"(",["T_STRING","KeyValueStoreInterface",210],["T_DOUBLE_COLON","::",210],["T_CLASS","class",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","keyValueFactory",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","get",211],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.bundle_field_map'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","willReturn",211],"(",["T_VARIABLE","$key_value_store",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","reveal",211],"(",")",")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$key_value_store",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","get",212],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",212],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","willReturn",212],"(","[",["T_WHITESPACE","\n      ",212],["T_CONSTANT_ENCAPSED_STRING","'test_field'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],"[",["T_WHITESPACE","\n        ",213],["T_CONSTANT_ENCAPSED_STRING","'type'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'test_type'",214],",",["T_WHITESPACE","\n        ",214],["T_CONSTANT_ENCAPSED_STRING","'bundles'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],"[",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",215],"]",",",["T_WHITESPACE","\n      ",215],"]",",",["T_WHITESPACE","\n      ",216],["T_CONSTANT_ENCAPSED_STRING","'second_field'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],"[",["T_WHITESPACE","\n        ",217],["T_CONSTANT_ENCAPSED_STRING","'type'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'test_type'",218],",",["T_WHITESPACE","\n        ",218],["T_CONSTANT_ENCAPSED_STRING","'bundles'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],"[",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",219],"]",",",["T_WHITESPACE","\n      ",219],"]",",",["T_WHITESPACE","\n    ",220],"]",")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$key_value_store",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","set",222],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",222],",",["T_WHITESPACE"," ",222],"[",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'second_field'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],"[",["T_WHITESPACE","\n        ",223],["T_CONSTANT_ENCAPSED_STRING","'type'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'test_type'",224],",",["T_WHITESPACE","\n        ",224],["T_CONSTANT_ENCAPSED_STRING","'bundles'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],"[",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",225],"]",",",["T_WHITESPACE","\n      ",225],"]",",",["T_WHITESPACE","\n    ",226],"]",")",["T_WHITESPACE","\n      ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","shouldBeCalled",228],"(",")",";",["T_WHITESPACE","\n\n    ",228],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","fieldDefinitionListener",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","onFieldDefinitionDelete",230],"(",["T_VARIABLE","$field_definition",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","reveal",230],"(",")",")",";",["T_WHITESPACE","\n  ",230],"}",["T_WHITESPACE","\n\n\n  ",231],["T_DOC_COMMENT","\/**\n   * @covers ::onFieldDefinitionDelete\n   *\/",234],["T_WHITESPACE","\n  ",236],["T_PUBLIC","public",237],["T_WHITESPACE"," ",237],["T_FUNCTION","function",237],["T_WHITESPACE"," ",237],["T_STRING","testOnFieldDefinitionDeleteSingleBundles",237],"(",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$field_definition",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","prophesize",238],"(",["T_STRING","FieldDefinitionInterface",238],["T_DOUBLE_COLON","::",238],["T_CLASS","class",238],")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$field_definition",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getTargetEntityTypeId",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","willReturn",239],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",239],")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$field_definition",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getTargetBundle",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","willReturn",240],"(",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",240],")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$field_definition",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","getName",241],"(",")",["T_OBJECT_OPERATOR","->",241],["T_STRING","willReturn",241],"(",["T_CONSTANT_ENCAPSED_STRING","'test_field'",241],")",";",["T_WHITESPACE","\n\n    ",241],["T_VARIABLE","$storage",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","prophesize",243],"(",["T_STRING","DynamicallyFieldableEntityStorageInterface",243],["T_DOUBLE_COLON","::",243],["T_CLASS","class",243],")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$storage",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","onFieldDefinitionDelete",244],"(",["T_VARIABLE","$field_definition",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","reveal",244],"(",")",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","shouldBeCalledTimes",244],"(",["T_LNUMBER","1",244],")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","entityTypeManager",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","getStorage",245],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",245],")",["T_OBJECT_OPERATOR","->",245],["T_STRING","willReturn",245],"(",["T_VARIABLE","$storage",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","reveal",245],"(",")",")",";",["T_WHITESPACE","\n\n    ",245],["T_VARIABLE","$entity",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","prophesize",247],"(",["T_STRING","EntityTypeInterface",247],["T_DOUBLE_COLON","::",247],["T_CLASS","class",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","setUpEntityManager",248],"(","[",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$entity",248],"]",")",";",["T_WHITESPACE","\n\n    ",248],["T_COMMENT","\/\/ Set up the stored bundle field map.\n",250],["T_WHITESPACE","    ",251],["T_VARIABLE","$key_value_store",251],["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","prophesize",251],"(",["T_STRING","KeyValueStoreInterface",251],["T_DOUBLE_COLON","::",251],["T_CLASS","class",251],")",";",["T_WHITESPACE","\n    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","keyValueFactory",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","get",252],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.bundle_field_map'",252],")",["T_OBJECT_OPERATOR","->",252],["T_STRING","willReturn",252],"(",["T_VARIABLE","$key_value_store",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","reveal",252],"(",")",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$key_value_store",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","get",253],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",253],")",["T_OBJECT_OPERATOR","->",253],["T_STRING","willReturn",253],"(","[",["T_WHITESPACE","\n      ",253],["T_CONSTANT_ENCAPSED_STRING","'test_field'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],"[",["T_WHITESPACE","\n        ",254],["T_CONSTANT_ENCAPSED_STRING","'type'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'test_type'",255],",",["T_WHITESPACE","\n        ",255],["T_CONSTANT_ENCAPSED_STRING","'bundles'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],"[",["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'test_bundle'",256],",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'second_bundle'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'second_bundle'",256],"]",",",["T_WHITESPACE","\n      ",256],"]",",",["T_WHITESPACE","\n    ",257],"]",")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$key_value_store",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","set",259],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity_type'",259],",",["T_WHITESPACE"," ",259],"[",["T_WHITESPACE","\n      ",259],["T_CONSTANT_ENCAPSED_STRING","'test_field'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],"[",["T_WHITESPACE","\n        ",260],["T_CONSTANT_ENCAPSED_STRING","'type'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'test_type'",261],",",["T_WHITESPACE","\n        ",261],["T_CONSTANT_ENCAPSED_STRING","'bundles'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],"[",["T_CONSTANT_ENCAPSED_STRING","'second_bundle'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'second_bundle'",262],"]",",",["T_WHITESPACE","\n      ",262],"]",",",["T_WHITESPACE","\n    ",263],"]",")",["T_WHITESPACE","\n      ",264],["T_OBJECT_OPERATOR","->",265],["T_STRING","shouldBeCalled",265],"(",")",";",["T_WHITESPACE","\n\n    ",265],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","fieldDefinitionListener",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","onFieldDefinitionDelete",267],"(",["T_VARIABLE","$field_definition",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","reveal",267],"(",")",")",";",["T_WHITESPACE","\n  ",267],"}",["T_WHITESPACE","\n\n",268],"}",["T_WHITESPACE","\n",270]]
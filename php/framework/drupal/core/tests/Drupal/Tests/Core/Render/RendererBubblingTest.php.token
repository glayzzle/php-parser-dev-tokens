[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Contains \\Drupal\\Tests\\Core\\Render\\RendererBubblingTest.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Render",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Cache",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MemoryBackend",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","KeyValueStore",11],["T_NS_SEPARATOR","\\",11],["T_STRING","KeyValueMemoryFactory",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],["T_NS_SEPARATOR","\\",12],["T_STRING","State",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Cache",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Cache",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\Render\\Renderer\n * @group Render\n *\/",15],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","RendererBubblingTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","RendererTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Disable the required cache contexts, so that this test can test just the\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ bubbling behavior.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","rendererConfig",27],"[",["T_CONSTANT_ENCAPSED_STRING","'required_cache_contexts'",27],"]",["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[","]",";",["T_WHITESPACE","\n\n    ",27],["T_STRING","parent",29],["T_DOUBLE_COLON","::",29],["T_STRING","setUp",29],"(",")",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Tests bubbling of assets when NOT using #pre_render callbacks.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testBubblingWithoutPreRender",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setUpRequest",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","setupMemoryCache",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","cacheContextsManager",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","expects",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","any",39],"(",")",")",["T_WHITESPACE","\n      ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","method",40],"(",["T_CONSTANT_ENCAPSED_STRING","'convertTokensToKeys'",40],")",["T_WHITESPACE","\n      ",40],["T_OBJECT_OPERATOR","->",41],["T_STRING","willReturnArgument",41],"(",["T_LNUMBER","0",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Create an element with a child and subchild. Each element loads a\n",43],["T_WHITESPACE","    ",44],["T_COMMENT","\/\/ different library using #attached.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$element",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'#type'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'container'",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'#cache'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],"[",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'keys'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'simpletest'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'drupal_render'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'children_attached'",48],"]",",",["T_WHITESPACE","\n      ",48],"]",",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'#attached'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'test\/parent'",50],"]","]",",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'#title'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Parent'",51],",",["T_WHITESPACE","\n    ",51],"]",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$element",53],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",53],"]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'#type'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'container'",54],",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'#attached'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],"[",["T_CONSTANT_ENCAPSED_STRING","'test\/child'",55],"]","]",",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'#title'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Child'",56],",",["T_WHITESPACE","\n    ",56],"]",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$element",58],"[",["T_CONSTANT_ENCAPSED_STRING","'child'",58],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subchild'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'#attached'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'test\/subchild'",59],"]","]",",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'#markup'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Subchild'",60],",",["T_WHITESPACE","\n    ",60],"]",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Render the element and verify the presence of #attached JavaScript.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","renderer",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","renderRoot",64],"(",["T_VARIABLE","$element",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$expected_libraries",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[",["T_CONSTANT_ENCAPSED_STRING","'test\/parent'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'test\/child'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'test\/subchild'",65],"]",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertEquals",66],"(",["T_VARIABLE","$element",66],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",66],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",66],"]",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$expected_libraries",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'The element, child and subchild #attached libraries are included.'",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Load the element from cache and verify the presence of the #attached\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/ JavaScript.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$element",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'simpletest'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'drupal_render'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'children_attached'",70],"]","]","]",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertTrue",71],"(",["T_STRING","strlen",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","renderer",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","renderRoot",71],"(",["T_VARIABLE","$element",71],")",")",["T_WHITESPACE"," ",71],">",["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'The element was retrieved from cache.'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEquals",72],"(",["T_VARIABLE","$element",72],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",72],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",72],"]",",",["T_WHITESPACE"," ",72],["T_VARIABLE","$expected_libraries",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'The element, child and subchild #attached libraries are included.'",72],")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Tests cache context bubbling with a custom cache bin.\n   *\/",75],["T_WHITESPACE","\n  ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","testContextBubblingCustomCacheBin",78],"(",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$bin",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","randomMachineName",79],"(",")",";",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","setUpRequest",81],"(",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","memoryCache",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","MemoryBackend",82],"(",["T_CONSTANT_ENCAPSED_STRING","'render'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$custom_cache",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_STRING","MemoryBackend",83],"(",["T_VARIABLE","$bin",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","cacheFactory",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","expects",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","atLeastOnce",85],"(",")",")",["T_WHITESPACE","\n      ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","method",86],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",86],")",["T_WHITESPACE","\n      ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","with",87],"(",["T_VARIABLE","$bin",87],")",["T_WHITESPACE","\n      ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","willReturnCallback",88],"(",["T_FUNCTION","function",88],"(",["T_VARIABLE","$requested_bin",88],")",["T_WHITESPACE"," ",88],["T_USE","use",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$bin",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$custom_cache",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n        ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$requested_bin",89],["T_WHITESPACE"," ",89],["T_IS_IDENTICAL","===",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$bin",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n          ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$custom_cache",90],";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_ELSE","else",92],["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n          ",92],["T_THROW","throw",93],["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_NS_SEPARATOR","\\",93],["T_STRING","Exception",93],"(",")",";",["T_WHITESPACE","\n        ",93],"}",["T_WHITESPACE","\n      ",94],"}",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","cacheContextsManager",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","expects",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","any",96],"(",")",")",["T_WHITESPACE","\n      ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","method",97],"(",["T_CONSTANT_ENCAPSED_STRING","'convertTokensToKeys'",97],")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","willReturnArgument",98],"(",["T_LNUMBER","0",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_VARIABLE","$build",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'#cache'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],"[",["T_WHITESPACE","\n        ",101],["T_CONSTANT_ENCAPSED_STRING","'keys'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",102],"]",",",["T_WHITESPACE","\n        ",102],["T_CONSTANT_ENCAPSED_STRING","'contexts'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",103],"]",",",["T_WHITESPACE","\n        ",103],["T_CONSTANT_ENCAPSED_STRING","'bin'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$bin",104],",",["T_WHITESPACE","\n      ",104],"]",",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'#markup'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'parent'",106],",",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'child'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],"[",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'#cache'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],"[",["T_WHITESPACE","\n          ",108],["T_CONSTANT_ENCAPSED_STRING","'contexts'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",109],"]",",",["T_WHITESPACE","\n          ",109],["T_CONSTANT_ENCAPSED_STRING","'max-age'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","3600",110],",",["T_WHITESPACE","\n        ",110],"]",",",["T_WHITESPACE","\n      ",111],"]",",",["T_WHITESPACE","\n    ",112],"]",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","renderer",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","renderRoot",114],"(",["T_VARIABLE","$build",114],")",";",["T_WHITESPACE","\n\n    ",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertRenderCacheItem",116],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:foo'",116],",",["T_WHITESPACE"," ",116],"[",["T_WHITESPACE","\n      ",116],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","TRUE",117],",",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'#cache'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],"[",["T_WHITESPACE","\n        ",118],["T_CONSTANT_ENCAPSED_STRING","'keys'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",119],"]",",",["T_WHITESPACE","\n        ",119],["T_CONSTANT_ENCAPSED_STRING","'contexts'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'foo'",120],"]",",",["T_WHITESPACE","\n        ",120],["T_CONSTANT_ENCAPSED_STRING","'tags'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],"[","]",",",["T_WHITESPACE","\n        ",121],["T_CONSTANT_ENCAPSED_STRING","'bin'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$bin",122],",",["T_WHITESPACE","\n        ",122],["T_CONSTANT_ENCAPSED_STRING","'max-age'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_LNUMBER","3600",123],",",["T_WHITESPACE","\n      ",123],"]",",",["T_WHITESPACE","\n    ",124],"]",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$bin",125],")",";",["T_WHITESPACE","\n  ",125],"}",["T_WHITESPACE","\n\n  ",126],["T_DOC_COMMENT","\/**\n   * Tests cache context bubbling in edge cases, because it affects the CID.\n   *\n   * ::testBubblingWithPrerender() already tests the common case.\n   *\n   * @dataProvider providerTestContextBubblingEdgeCases\n   *\/",128],["T_WHITESPACE","\n  ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","testContextBubblingEdgeCases",135],"(",["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$element",135],",",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$expected_top_level_contexts",135],",",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$expected_cache_items",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","setUpRequest",136],"(",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","setupMemoryCache",137],"(",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","cacheContextsManager",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","expects",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","any",138],"(",")",")",["T_WHITESPACE","\n      ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","method",139],"(",["T_CONSTANT_ENCAPSED_STRING","'convertTokensToKeys'",139],")",["T_WHITESPACE","\n      ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","willReturnArgument",140],"(",["T_LNUMBER","0",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","renderer",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","renderRoot",142],"(",["T_VARIABLE","$element",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertEquals",144],"(",["T_VARIABLE","$expected_top_level_contexts",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$element",144],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",144],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",144],"]",",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'Expected cache contexts found.'",144],")",";",["T_WHITESPACE","\n    ",144],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$expected_cache_items",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$cid",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$expected_cache_item",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertRenderCacheItem",146],"(",["T_VARIABLE","$cid",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$expected_cache_item",146],")",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n  ",148],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","providerTestContextBubblingEdgeCases",150],"(",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$data",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],"[","]",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Cache contexts of inaccessible children aren't bubbled (because those\n",153],["T_WHITESPACE","    ",154],["T_COMMENT","\/\/ children are not rendered at all).\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$test_element",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],"[",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'#cache'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],"[",["T_WHITESPACE","\n        ",156],["T_CONSTANT_ENCAPSED_STRING","'keys'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",157],"]",",",["T_WHITESPACE","\n        ",157],["T_CONSTANT_ENCAPSED_STRING","'contexts'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],"[","]",",",["T_WHITESPACE","\n      ",158],"]",",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'#markup'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'parent'",160],",",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'child'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],"[",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'#access'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_STRING","FALSE",162],",",["T_WHITESPACE","\n        ",162],["T_CONSTANT_ENCAPSED_STRING","'#cache'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],"[",["T_WHITESPACE","\n          ",163],["T_CONSTANT_ENCAPSED_STRING","'contexts'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",164],"]",",",["T_WHITESPACE","\n        ",164],"]",",",["T_WHITESPACE","\n      ",165],"]",",",["T_WHITESPACE","\n    ",166],"]",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$expected_cache_items",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"[",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'parent'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],"[",["T_WHITESPACE","\n        ",169],["T_CONSTANT_ENCAPSED_STRING","'#attached'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],"[","]",",",["T_WHITESPACE","\n        ",170],["T_CONSTANT_ENCAPSED_STRING","'#cache'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],"[",["T_WHITESPACE","\n          ",171],["T_CONSTANT_ENCAPSED_STRING","'contexts'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],"[","]",",",["T_WHITESPACE","\n          ",172],["T_CONSTANT_ENCAPSED_STRING","'tags'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],"[","]",",",["T_WHITESPACE","\n          ",173],["T_CONSTANT_ENCAPSED_STRING","'max-age'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_STRING","Cache",174],["T_DOUBLE_COLON","::",174],["T_STRING","PERMANENT",174],",",["T_WHITESPACE","\n        ",174],"]",",",["T_WHITESPACE","\n        ",175],["T_CONSTANT_ENCAPSED_STRING","'#markup'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'parent'",176],",",["T_WHITESPACE","\n      ",176],"]",",",["T_WHITESPACE","\n    ",177],"]",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$data",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"[",["T_VARIABLE","$test_element",179],",",["T_WHITESPACE"," ",179],"[","]",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$expected_cache_items",179],"]",";",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ Assert cache contexts are sorted when they are used to generate a CID.\n",181],["T_WHITESPACE","    ",182],["T_COMMENT","\/\/ (Necessary to ensure that different render arrays where the same keys +\n",182],["T_WHITESPACE","    ",183],["T_COMMENT","\/\/ set of contexts are present point to the same cache item. Regardless of\n",183],["T_WHITESPACE","    ",184],["T_COMMENT","\/\/ the contexts' order. A sad necessity because PHP doesn't have sets.)\n",184],["T_WHITESPACE","    ",185],["T_VARIABLE","$test_element",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],"[",["T_WHITESPACE","\n     ",185],["T_CONSTANT_ENCAPSED_STRING","'#cache'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],"[",["T_WHITESPACE","\n        ",186],["T_CONSTANT_ENCAPSED_STRING","'keys'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],"[",["T_CONSTANT_ENCAPSED_STRING","'set_test'",187],"]",",",["T_WHITESPACE","\n        ",187],["T_CONSTANT_ENCAPSED_STRING","'contexts'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],"[","]",",",["T_WHITESPACE","\n      ",188],"]",",",["T_WHITESPACE","\n    ",189],"]",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$expected_cache_items",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],"[",["T_WHITESPACE","\n      ",191],["T_CONSTANT_ENCAPSED_STRING","'set_test:bar:baz:foo'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],"[",["T_WHITESPACE","\n        ",192],["T_CONSTANT_ENCAPSED_STRING","'#attached'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],"[","]",",",["T_WHITESPACE","\n        ",193],["T_CONSTANT_ENCAPSED_STRING","'#cache'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],"[",["T_WHITESPACE","\n          ",194],["T_CONSTANT_ENCAPSED_STRING","'contexts'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],"[","]",",",["T_WHITESPACE","\n          ",195],["T_CONSTANT_ENCAPSED_STRING","'tags'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],"[","]",",",["T_WHITESPACE","\n          ",196],["T_CONSTANT_ENCAPSED_STRING","'max-age'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_STRING","Cache",197],["T_DOUBLE_COLON","::",197],["T_STRING","PERMANENT",197],",",["T_WHITESPACE","\n        ",197],"]",",",["T_WHITESPACE","\n        ",198],["T_CONSTANT_ENCAPSED_STRING","'#markup'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","''",199],",",["T_WHITESPACE","\n      ",199],"]",",",["T_WHITESPACE","\n    ",200],"]",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$context_orders",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],"[",["T_WHITESPACE","\n      ",202],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'bar'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'baz'",203],"]",",",["T_WHITESPACE","\n      ",203],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'baz'",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'bar'",204],"]",",",["T_WHITESPACE","\n      ",204],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'foo'",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'baz'",205],"]",",",["T_WHITESPACE","\n      ",205],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'baz'",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'foo'",206],"]",",",["T_WHITESPACE","\n      ",206],"[",["T_CONSTANT_ENCAPSED_STRING","'baz'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'foo'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'bar'",207],"]",",",["T_WHITESPACE","\n      ",207],"[",["T_CONSTANT_ENCAPSED_STRING","'baz'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'bar'",208],",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'foo'",208],"]",",",["T_WHITESPACE","\n    ",208],"]",";",["T_WHITESPACE","\n    ",209],["T_FOREACH","foreach",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$context_orders",210],["T_WHITESPACE"," ",210],["T_AS","as",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$context_order",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n      ",210],["T_VARIABLE","$test_element",211],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",211],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$context_order",211],";",["T_WHITESPACE","\n      ",211],["T_STRING","sort",212],"(",["T_VARIABLE","$context_order",212],")",";",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$expected_cache_items",213],"[",["T_CONSTANT_ENCAPSED_STRING","'set_test:bar:baz:foo'",213],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",213],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",213],"]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$context_order",213],";",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$data",214],"[","]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],"[",["T_VARIABLE","$test_element",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$context_order",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$expected_cache_items",214],"]",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_COMMENT","\/\/ A parent with a certain set of cache contexts is unaffected by a child\n",217],["T_WHITESPACE","    ",218],["T_COMMENT","\/\/ that has a subset of those contexts.\n",218],["T_WHITESPACE","    ",219],["T_VARIABLE","$test_element",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],"[",["T_WHITESPACE","\n      ",219],["T_CONSTANT_ENCAPSED_STRING","'#cache'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],"[",["T_WHITESPACE","\n        ",220],["T_CONSTANT_ENCAPSED_STRING","'keys'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",221],"]",",",["T_WHITESPACE","\n        ",221],["T_CONSTANT_ENCAPSED_STRING","'contexts'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'bar'",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'baz'",222],"]",",",["T_WHITESPACE","\n      ",222],"]",",",["T_WHITESPACE","\n      ",223],["T_CONSTANT_ENCAPSED_STRING","'#markup'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'parent'",224],",",["T_WHITESPACE","\n      ",224],["T_CONSTANT_ENCAPSED_STRING","'child'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],"[",["T_WHITESPACE","\n        ",225],["T_CONSTANT_ENCAPSED_STRING","'#cache'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],"[",["T_WHITESPACE","\n          ",226],["T_CONSTANT_ENCAPSED_STRING","'contexts'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",227],",",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'baz'",227],"]",",",["T_WHITESPACE","\n          ",227],["T_CONSTANT_ENCAPSED_STRING","'max-age'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_LNUMBER","3600",228],",",["T_WHITESPACE","\n        ",228],"]",",",["T_WHITESPACE","\n      ",229],"]",",",["T_WHITESPACE","\n    ",230],"]",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$expected_cache_items",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],"[",["T_WHITESPACE","\n      ",232],["T_CONSTANT_ENCAPSED_STRING","'parent:bar:baz:foo'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],"[",["T_WHITESPACE","\n        ",233],["T_CONSTANT_ENCAPSED_STRING","'#attached'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"[","]",",",["T_WHITESPACE","\n        ",234],["T_CONSTANT_ENCAPSED_STRING","'#cache'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],"[",["T_WHITESPACE","\n          ",235],["T_CONSTANT_ENCAPSED_STRING","'contexts'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'baz'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'foo'",236],"]",",",["T_WHITESPACE","\n          ",236],["T_CONSTANT_ENCAPSED_STRING","'tags'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],"[","]",",",["T_WHITESPACE","\n          ",237],["T_CONSTANT_ENCAPSED_STRING","'max-age'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_LNUMBER","3600",238],",",["T_WHITESPACE","\n        ",238],"]",",",["T_WHITESPACE","\n        ",239],["T_CONSTANT_ENCAPSED_STRING","'#markup'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'parent'",240],",",["T_WHITESPACE","\n      ",240],"]",",",["T_WHITESPACE","\n    ",241],"]",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$data",243],"[","]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],"[",["T_VARIABLE","$test_element",243],",",["T_WHITESPACE"," ",243],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",243],",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'baz'",243],",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'foo'",243],"]",",",["T_WHITESPACE"," ",243],["T_VARIABLE","$expected_cache_items",243],"]",";",["T_WHITESPACE","\n\n    ",243],["T_COMMENT","\/\/ A parent with a certain set of cache contexts that is a subset of the\n",245],["T_WHITESPACE","    ",246],["T_COMMENT","\/\/ cache contexts of a child gets a redirecting cache item for the cache ID\n",246],["T_WHITESPACE","    ",247],["T_COMMENT","\/\/ created pre-bubbling (without the child's additional cache contexts). It\n",247],["T_WHITESPACE","    ",248],["T_COMMENT","\/\/ points to a cache item with a post-bubbling cache ID (i.e. with the\n",248],["T_WHITESPACE","    ",249],["T_COMMENT","\/\/ child's additional cache contexts).\n",249],["T_WHITESPACE","    ",250],["T_COMMENT","\/\/ Furthermore, the redirecting cache item also includes the children's\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ cache tags, since changes in the children may cause those children to get\n",251],["T_WHITESPACE","    ",252],["T_COMMENT","\/\/ different cache contexts and therefore cause different cache contexts to\n",252],["T_WHITESPACE","    ",253],["T_COMMENT","\/\/ be stored in the redirecting cache item.\n",253],["T_WHITESPACE","    ",254],["T_VARIABLE","$test_element",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],"[",["T_WHITESPACE","\n      ",254],["T_CONSTANT_ENCAPSED_STRING","'#cache'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],"[",["T_WHITESPACE","\n        ",255],["T_CONSTANT_ENCAPSED_STRING","'keys'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",256],"]",",",["T_WHITESPACE","\n        ",256],["T_CONSTANT_ENCAPSED_STRING","'contexts'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",257],"]",",",["T_WHITESPACE","\n        ",257],["T_CONSTANT_ENCAPSED_STRING","'tags'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],"[",["T_CONSTANT_ENCAPSED_STRING","'yar'",258],",",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'har'",258],"]",",",["T_WHITESPACE","\n      ",258],"]",",",["T_WHITESPACE","\n      ",259],["T_CONSTANT_ENCAPSED_STRING","'#markup'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'parent'",260],",",["T_WHITESPACE","\n      ",260],["T_CONSTANT_ENCAPSED_STRING","'child'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],"[",["T_WHITESPACE","\n        ",261],["T_CONSTANT_ENCAPSED_STRING","'#cache'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],"[",["T_WHITESPACE","\n          ",262],["T_CONSTANT_ENCAPSED_STRING","'contexts'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",263],"]",",",["T_WHITESPACE","\n          ",263],["T_CONSTANT_ENCAPSED_STRING","'tags'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],"[",["T_CONSTANT_ENCAPSED_STRING","'fiddle'",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'dee'",264],"]",",",["T_WHITESPACE","\n        ",264],"]",",",["T_WHITESPACE","\n        ",265],["T_CONSTANT_ENCAPSED_STRING","'#markup'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","''",266],",",["T_WHITESPACE","\n      ",266],"]",",",["T_WHITESPACE","\n    ",267],"]",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$expected_cache_items",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],"[",["T_WHITESPACE","\n      ",269],["T_CONSTANT_ENCAPSED_STRING","'parent:foo'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n        ",270],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_STRING","TRUE",271],",",["T_WHITESPACE","\n        ",271],["T_CONSTANT_ENCAPSED_STRING","'#cache'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],"[",["T_WHITESPACE","\n          ",272],["T_COMMENT","\/\/ The keys + contexts this redirects to.\n",273],["T_WHITESPACE","          ",274],["T_CONSTANT_ENCAPSED_STRING","'keys'",274],["T_WHITESPACE"," ",274],["T_DOUBLE_ARROW","=>",274],["T_WHITESPACE"," ",274],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",274],"]",",",["T_WHITESPACE","\n          ",274],["T_CONSTANT_ENCAPSED_STRING","'contexts'",275],["T_WHITESPACE"," ",275],["T_DOUBLE_ARROW","=>",275],["T_WHITESPACE"," ",275],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'foo'",275],"]",",",["T_WHITESPACE","\n          ",275],["T_CONSTANT_ENCAPSED_STRING","'tags'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],"[",["T_CONSTANT_ENCAPSED_STRING","'dee'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'fiddle'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'har'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'yar'",276],"]",",",["T_WHITESPACE","\n          ",276],["T_CONSTANT_ENCAPSED_STRING","'bin'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'render'",277],",",["T_WHITESPACE","\n          ",277],["T_CONSTANT_ENCAPSED_STRING","'max-age'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_STRING","Cache",278],["T_DOUBLE_COLON","::",278],["T_STRING","PERMANENT",278],",",["T_WHITESPACE","\n        ",278],"]",",",["T_WHITESPACE","\n      ",279],"]",",",["T_WHITESPACE","\n      ",280],["T_CONSTANT_ENCAPSED_STRING","'parent:bar:foo'",281],["T_WHITESPACE"," ",281],["T_DOUBLE_ARROW","=>",281],["T_WHITESPACE"," ",281],"[",["T_WHITESPACE","\n        ",281],["T_CONSTANT_ENCAPSED_STRING","'#attached'",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],"[","]",",",["T_WHITESPACE","\n        ",282],["T_CONSTANT_ENCAPSED_STRING","'#cache'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],"[",["T_WHITESPACE","\n          ",283],["T_CONSTANT_ENCAPSED_STRING","'contexts'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",284],",",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'foo'",284],"]",",",["T_WHITESPACE","\n          ",284],["T_CONSTANT_ENCAPSED_STRING","'tags'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],"[",["T_CONSTANT_ENCAPSED_STRING","'dee'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'fiddle'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'har'",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'yar'",285],"]",",",["T_WHITESPACE","\n          ",285],["T_CONSTANT_ENCAPSED_STRING","'max-age'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_STRING","Cache",286],["T_DOUBLE_COLON","::",286],["T_STRING","PERMANENT",286],",",["T_WHITESPACE","\n        ",286],"]",",",["T_WHITESPACE","\n        ",287],["T_CONSTANT_ENCAPSED_STRING","'#markup'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","'parent'",288],",",["T_WHITESPACE","\n      ",288],"]",",",["T_WHITESPACE","\n    ",289],"]",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$data",291],"[","]",["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],"[",["T_VARIABLE","$test_element",291],",",["T_WHITESPACE"," ",291],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",291],",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'foo'",291],"]",",",["T_WHITESPACE"," ",291],["T_VARIABLE","$expected_cache_items",291],"]",";",["T_WHITESPACE","\n\n    ",291],["T_RETURN","return",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$data",293],";",["T_WHITESPACE","\n  ",293],"}",["T_WHITESPACE","\n\n  ",294],["T_DOC_COMMENT","\/**\n   * Tests the self-healing of the redirect with conditional cache contexts.\n   *\/",296],["T_WHITESPACE","\n  ",298],["T_PUBLIC","public",299],["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],["T_WHITESPACE"," ",299],["T_STRING","testConditionalCacheContextBubblingSelfHealing",299],"(",")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$current_user_role",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],"&",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","currentUserRole",300],";",["T_WHITESPACE","\n\n    ",300],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","setUpRequest",302],"(",")",";",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setupMemoryCache",303],"(",")",";",["T_WHITESPACE","\n\n    ",303],["T_VARIABLE","$test_element",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],"[",["T_WHITESPACE","\n      ",305],["T_CONSTANT_ENCAPSED_STRING","'#cache'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],"[",["T_WHITESPACE","\n        ",306],["T_CONSTANT_ENCAPSED_STRING","'keys'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",307],"]",",",["T_WHITESPACE","\n        ",307],["T_CONSTANT_ENCAPSED_STRING","'tags'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",308],"]",",",["T_WHITESPACE","\n      ",308],"]",",",["T_WHITESPACE","\n      ",309],["T_CONSTANT_ENCAPSED_STRING","'#markup'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'parent'",310],",",["T_WHITESPACE","\n      ",310],["T_CONSTANT_ENCAPSED_STRING","'child'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],"[",["T_WHITESPACE","\n        ",311],["T_CONSTANT_ENCAPSED_STRING","'#cache'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],"[",["T_WHITESPACE","\n          ",312],["T_CONSTANT_ENCAPSED_STRING","'contexts'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],"[",["T_CONSTANT_ENCAPSED_STRING","'user.roles'",313],"]",",",["T_WHITESPACE","\n          ",313],["T_CONSTANT_ENCAPSED_STRING","'tags'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'b'",314],"]",",",["T_WHITESPACE","\n        ",314],"]",",",["T_WHITESPACE","\n        ",315],["T_CONSTANT_ENCAPSED_STRING","'grandchild'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],"[",["T_WHITESPACE","\n          ",316],["T_CONSTANT_ENCAPSED_STRING","'#access_callback'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],"(",")",["T_WHITESPACE"," ",317],["T_USE","use",317],["T_WHITESPACE"," ",317],"(","&",["T_VARIABLE","$current_user_role",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n            ",317],["T_COMMENT","\/\/ Only role A cannot access this subtree.\n",318],["T_WHITESPACE","            ",319],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$current_user_role",319],["T_WHITESPACE"," ",319],["T_IS_NOT_IDENTICAL","!==",319],["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'A'",319],";",["T_WHITESPACE","\n          ",319],"}",",",["T_WHITESPACE","\n          ",320],["T_CONSTANT_ENCAPSED_STRING","'#cache'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],"[",["T_WHITESPACE","\n            ",321],["T_CONSTANT_ENCAPSED_STRING","'contexts'",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",322],"]",",",["T_WHITESPACE","\n            ",322],["T_CONSTANT_ENCAPSED_STRING","'tags'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],"[",["T_CONSTANT_ENCAPSED_STRING","'c'",323],"]",",",["T_WHITESPACE","\n            ",323],["T_COMMENT","\/\/ A lower max-age; the redirecting cache item should be updated.\n",324],["T_WHITESPACE","            ",325],["T_CONSTANT_ENCAPSED_STRING","'max-age'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_LNUMBER","1800",325],",",["T_WHITESPACE","\n          ",325],"]",",",["T_WHITESPACE","\n          ",326],["T_CONSTANT_ENCAPSED_STRING","'grandgrandchild'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],"[",["T_WHITESPACE","\n            ",327],["T_CONSTANT_ENCAPSED_STRING","'#access_callback'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],"(",")",["T_WHITESPACE"," ",328],["T_USE","use",328],["T_WHITESPACE"," ",328],"(","&",["T_VARIABLE","$current_user_role",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n              ",328],["T_COMMENT","\/\/ Only role C can access this subtree.\n",329],["T_WHITESPACE","              ",330],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$current_user_role",330],["T_WHITESPACE"," ",330],["T_IS_IDENTICAL","===",330],["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'C'",330],";",["T_WHITESPACE","\n            ",330],"}",",",["T_WHITESPACE","\n            ",331],["T_CONSTANT_ENCAPSED_STRING","'#cache'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],"[",["T_WHITESPACE","\n              ",332],["T_CONSTANT_ENCAPSED_STRING","'contexts'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",333],"]",",",["T_WHITESPACE","\n              ",333],["T_CONSTANT_ENCAPSED_STRING","'tags'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],"[",["T_CONSTANT_ENCAPSED_STRING","'d'",334],"]",",",["T_WHITESPACE","\n              ",334],["T_COMMENT","\/\/ A lower max-age; the redirecting cache item should be updated.\n",335],["T_WHITESPACE","              ",336],["T_CONSTANT_ENCAPSED_STRING","'max-age'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_LNUMBER","300",336],",",["T_WHITESPACE","\n            ",336],"]",",",["T_WHITESPACE","\n          ",337],"]",",",["T_WHITESPACE","\n        ",338],"]",",",["T_WHITESPACE","\n      ",339],"]",",",["T_WHITESPACE","\n    ",340],"]",";",["T_WHITESPACE","\n\n    ",341],["T_COMMENT","\/\/ Request 1: role A, the grandchild isn't accessible => bubbled cache\n",343],["T_WHITESPACE","    ",344],["T_COMMENT","\/\/ contexts: user.roles.\n",344],["T_WHITESPACE","    ",345],["T_VARIABLE","$element",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$test_element",345],";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$current_user_role",346],["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'A'",346],";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","renderer",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","renderRoot",347],"(",["T_VARIABLE","$element",347],")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","assertRenderCacheItem",348],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",348],",",["T_WHITESPACE"," ",348],"[",["T_WHITESPACE","\n      ",348],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_STRING","TRUE",349],",",["T_WHITESPACE","\n      ",349],["T_CONSTANT_ENCAPSED_STRING","'#cache'",350],["T_WHITESPACE"," ",350],["T_DOUBLE_ARROW","=>",350],["T_WHITESPACE"," ",350],"[",["T_WHITESPACE","\n        ",350],["T_CONSTANT_ENCAPSED_STRING","'keys'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",351],"]",",",["T_WHITESPACE","\n        ",351],["T_CONSTANT_ENCAPSED_STRING","'contexts'",352],["T_WHITESPACE"," ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],"[",["T_CONSTANT_ENCAPSED_STRING","'user.roles'",352],"]",",",["T_WHITESPACE","\n        ",352],["T_CONSTANT_ENCAPSED_STRING","'tags'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",353],",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'b'",353],"]",",",["T_WHITESPACE","\n        ",353],["T_CONSTANT_ENCAPSED_STRING","'bin'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'render'",354],",",["T_WHITESPACE","\n        ",354],["T_CONSTANT_ENCAPSED_STRING","'max-age'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_STRING","Cache",355],["T_DOUBLE_COLON","::",355],["T_STRING","PERMANENT",355],",",["T_WHITESPACE","\n      ",355],"]",",",["T_WHITESPACE","\n    ",356],"]",")",";",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","assertRenderCacheItem",358],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:r.A'",358],",",["T_WHITESPACE"," ",358],"[",["T_WHITESPACE","\n      ",358],["T_CONSTANT_ENCAPSED_STRING","'#attached'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],"[","]",",",["T_WHITESPACE","\n      ",359],["T_CONSTANT_ENCAPSED_STRING","'#cache'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],"[",["T_WHITESPACE","\n        ",360],["T_CONSTANT_ENCAPSED_STRING","'contexts'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],"[",["T_CONSTANT_ENCAPSED_STRING","'user.roles'",361],"]",",",["T_WHITESPACE","\n        ",361],["T_CONSTANT_ENCAPSED_STRING","'tags'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'b'",362],"]",",",["T_WHITESPACE","\n        ",362],["T_CONSTANT_ENCAPSED_STRING","'max-age'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_STRING","Cache",363],["T_DOUBLE_COLON","::",363],["T_STRING","PERMANENT",363],",",["T_WHITESPACE","\n      ",363],"]",",",["T_WHITESPACE","\n      ",364],["T_CONSTANT_ENCAPSED_STRING","'#markup'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'parent'",365],",",["T_WHITESPACE","\n    ",365],"]",")",";",["T_WHITESPACE","\n\n    ",366],["T_COMMENT","\/\/ Request 2: role B, the grandchild is accessible => bubbled cache\n",368],["T_WHITESPACE","    ",369],["T_COMMENT","\/\/ contexts: foo, user.roles + merged max-age: 1800.\n",369],["T_WHITESPACE","    ",370],["T_VARIABLE","$element",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_VARIABLE","$test_element",370],";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$current_user_role",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'B'",371],";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","renderer",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","renderRoot",372],"(",["T_VARIABLE","$element",372],")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertRenderCacheItem",373],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",373],",",["T_WHITESPACE"," ",373],"[",["T_WHITESPACE","\n      ",373],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_STRING","TRUE",374],",",["T_WHITESPACE","\n      ",374],["T_CONSTANT_ENCAPSED_STRING","'#cache'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],"[",["T_WHITESPACE","\n        ",375],["T_CONSTANT_ENCAPSED_STRING","'keys'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",376],"]",",",["T_WHITESPACE","\n        ",376],["T_CONSTANT_ENCAPSED_STRING","'contexts'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",377],",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",377],"]",",",["T_WHITESPACE","\n        ",377],["T_CONSTANT_ENCAPSED_STRING","'tags'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'b'",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'c'",378],"]",",",["T_WHITESPACE","\n        ",378],["T_CONSTANT_ENCAPSED_STRING","'bin'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'render'",379],",",["T_WHITESPACE","\n        ",379],["T_CONSTANT_ENCAPSED_STRING","'max-age'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_LNUMBER","1800",380],",",["T_WHITESPACE","\n      ",380],"]",",",["T_WHITESPACE","\n    ",381],"]",")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","assertRenderCacheItem",383],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:foo:r.B'",383],",",["T_WHITESPACE"," ",383],"[",["T_WHITESPACE","\n      ",383],["T_CONSTANT_ENCAPSED_STRING","'#attached'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],"[","]",",",["T_WHITESPACE","\n      ",384],["T_CONSTANT_ENCAPSED_STRING","'#cache'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],"[",["T_WHITESPACE","\n        ",385],["T_CONSTANT_ENCAPSED_STRING","'contexts'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",386],",",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",386],"]",",",["T_WHITESPACE","\n        ",386],["T_CONSTANT_ENCAPSED_STRING","'tags'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'b'",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'c'",387],"]",",",["T_WHITESPACE","\n        ",387],["T_CONSTANT_ENCAPSED_STRING","'max-age'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_LNUMBER","1800",388],",",["T_WHITESPACE","\n      ",388],"]",",",["T_WHITESPACE","\n      ",389],["T_CONSTANT_ENCAPSED_STRING","'#markup'",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'parent'",390],",",["T_WHITESPACE","\n    ",390],"]",")",";",["T_WHITESPACE","\n\n    ",391],["T_COMMENT","\/\/ Request 3: role A again, the grandchild is inaccessible again => bubbled\n",393],["T_WHITESPACE","    ",394],["T_COMMENT","\/\/ cache contexts: user.roles; but that's a subset of the already-bubbled\n",394],["T_WHITESPACE","    ",395],["T_COMMENT","\/\/ cache contexts, so nothing is actually changed in the redirecting cache\n",395],["T_WHITESPACE","    ",396],["T_COMMENT","\/\/ item. However, the cache item we were looking for in request 1 is\n",396],["T_WHITESPACE","    ",397],["T_COMMENT","\/\/ technically the same one we're looking for now (it's the exact same\n",397],["T_WHITESPACE","    ",398],["T_COMMENT","\/\/ request), but with one additional cache context. This is necessary to\n",398],["T_WHITESPACE","    ",399],["T_COMMENT","\/\/ avoid \"cache ping-pong\". (Requests 1 and 3 are identical, but without the\n",399],["T_WHITESPACE","    ",400],["T_COMMENT","\/\/ right merging logic to handle request 2, the redirecting cache item would\n",400],["T_WHITESPACE","    ",401],["T_COMMENT","\/\/ toggle between only the 'user.roles' cache context and both the 'foo'\n",401],["T_WHITESPACE","    ",402],["T_COMMENT","\/\/ and 'user.roles' cache contexts, resulting in a cache miss every time.)\n",402],["T_WHITESPACE","    ",403],["T_VARIABLE","$element",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$test_element",403],";",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$current_user_role",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'A'",404],";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","renderer",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","renderRoot",405],"(",["T_VARIABLE","$element",405],")",";",["T_WHITESPACE","\n    ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","assertRenderCacheItem",406],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",406],",",["T_WHITESPACE"," ",406],"[",["T_WHITESPACE","\n      ",406],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",407],["T_WHITESPACE"," ",407],["T_DOUBLE_ARROW","=>",407],["T_WHITESPACE"," ",407],["T_STRING","TRUE",407],",",["T_WHITESPACE","\n      ",407],["T_CONSTANT_ENCAPSED_STRING","'#cache'",408],["T_WHITESPACE"," ",408],["T_DOUBLE_ARROW","=>",408],["T_WHITESPACE"," ",408],"[",["T_WHITESPACE","\n        ",408],["T_CONSTANT_ENCAPSED_STRING","'keys'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",409],"]",",",["T_WHITESPACE","\n        ",409],["T_CONSTANT_ENCAPSED_STRING","'contexts'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",410],",",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",410],"]",",",["T_WHITESPACE","\n        ",410],["T_CONSTANT_ENCAPSED_STRING","'tags'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",411],",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'b'",411],",",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","'c'",411],"]",",",["T_WHITESPACE","\n        ",411],["T_CONSTANT_ENCAPSED_STRING","'bin'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'render'",412],",",["T_WHITESPACE","\n        ",412],["T_CONSTANT_ENCAPSED_STRING","'max-age'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_LNUMBER","1800",413],",",["T_WHITESPACE","\n      ",413],"]",",",["T_WHITESPACE","\n    ",414],"]",")",";",["T_WHITESPACE","\n    ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","assertRenderCacheItem",416],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:foo:r.A'",416],",",["T_WHITESPACE"," ",416],"[",["T_WHITESPACE","\n      ",416],["T_CONSTANT_ENCAPSED_STRING","'#attached'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],"[","]",",",["T_WHITESPACE","\n      ",417],["T_CONSTANT_ENCAPSED_STRING","'#cache'",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],"[",["T_WHITESPACE","\n        ",418],["T_CONSTANT_ENCAPSED_STRING","'contexts'",419],["T_WHITESPACE"," ",419],["T_DOUBLE_ARROW","=>",419],["T_WHITESPACE"," ",419],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",419],",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",419],"]",",",["T_WHITESPACE","\n        ",419],["T_CONSTANT_ENCAPSED_STRING","'tags'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'b'",420],"]",",",["T_WHITESPACE","\n        ",420],["T_COMMENT","\/\/ Note that the max-age here is unaffected. When role A, the grandchild\n",421],["T_WHITESPACE","        ",422],["T_COMMENT","\/\/ is never rendered, so neither is its max-age of 1800 present here,\n",422],["T_WHITESPACE","        ",423],["T_COMMENT","\/\/ despite 1800 being the max-age of the redirecting cache item.\n",423],["T_WHITESPACE","        ",424],["T_CONSTANT_ENCAPSED_STRING","'max-age'",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_STRING","Cache",424],["T_DOUBLE_COLON","::",424],["T_STRING","PERMANENT",424],",",["T_WHITESPACE","\n      ",424],"]",",",["T_WHITESPACE","\n      ",425],["T_CONSTANT_ENCAPSED_STRING","'#markup'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'parent'",426],",",["T_WHITESPACE","\n    ",426],"]",")",";",["T_WHITESPACE","\n\n    ",427],["T_COMMENT","\/\/ Request 4: role C, both the grandchild and the grandgrandchild are\n",429],["T_WHITESPACE","    ",430],["T_COMMENT","\/\/ accessible => bubbled cache contexts: foo, bar, user.roles + merged\n",430],["T_WHITESPACE","    ",431],["T_COMMENT","\/\/ max-age: 300.\n",431],["T_WHITESPACE","    ",432],["T_VARIABLE","$element",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$test_element",432],";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$current_user_role",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'C'",433],";",["T_WHITESPACE","\n    ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","renderer",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","renderRoot",434],"(",["T_VARIABLE","$element",434],")",";",["T_WHITESPACE","\n    ",434],["T_VARIABLE","$final_parent_cache_item",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],"[",["T_WHITESPACE","\n      ",435],["T_CONSTANT_ENCAPSED_STRING","'#cache_redirect'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_STRING","TRUE",436],",",["T_WHITESPACE","\n      ",436],["T_CONSTANT_ENCAPSED_STRING","'#cache'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],"[",["T_WHITESPACE","\n        ",437],["T_CONSTANT_ENCAPSED_STRING","'keys'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",438],"]",",",["T_WHITESPACE","\n        ",438],["T_CONSTANT_ENCAPSED_STRING","'contexts'",439],["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'foo'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",439],"]",",",["T_WHITESPACE","\n        ",439],["T_CONSTANT_ENCAPSED_STRING","'tags'",440],["T_WHITESPACE"," ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'b'",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'c'",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'d'",440],"]",",",["T_WHITESPACE","\n        ",440],["T_CONSTANT_ENCAPSED_STRING","'bin'",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'render'",441],",",["T_WHITESPACE","\n        ",441],["T_CONSTANT_ENCAPSED_STRING","'max-age'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_LNUMBER","300",442],",",["T_WHITESPACE","\n      ",442],"]",",",["T_WHITESPACE","\n    ",443],"]",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","assertRenderCacheItem",445],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",445],",",["T_WHITESPACE"," ",445],["T_VARIABLE","$final_parent_cache_item",445],")",";",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","assertRenderCacheItem",446],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:bar:foo:r.C'",446],",",["T_WHITESPACE"," ",446],"[",["T_WHITESPACE","\n      ",446],["T_CONSTANT_ENCAPSED_STRING","'#attached'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],"[","]",",",["T_WHITESPACE","\n      ",447],["T_CONSTANT_ENCAPSED_STRING","'#cache'",448],["T_WHITESPACE"," ",448],["T_DOUBLE_ARROW","=>",448],["T_WHITESPACE"," ",448],"[",["T_WHITESPACE","\n        ",448],["T_CONSTANT_ENCAPSED_STRING","'contexts'",449],["T_WHITESPACE"," ",449],["T_DOUBLE_ARROW","=>",449],["T_WHITESPACE"," ",449],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'foo'",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",449],"]",",",["T_WHITESPACE","\n        ",449],["T_CONSTANT_ENCAPSED_STRING","'tags'",450],["T_WHITESPACE"," ",450],["T_DOUBLE_ARROW","=>",450],["T_WHITESPACE"," ",450],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'b'",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'c'",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'d'",450],"]",",",["T_WHITESPACE","\n        ",450],["T_CONSTANT_ENCAPSED_STRING","'max-age'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_LNUMBER","300",451],",",["T_WHITESPACE","\n      ",451],"]",",",["T_WHITESPACE","\n      ",452],["T_CONSTANT_ENCAPSED_STRING","'#markup'",453],["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'parent'",453],",",["T_WHITESPACE","\n    ",453],"]",")",";",["T_WHITESPACE","\n\n    ",454],["T_COMMENT","\/\/ Request 5: role A again, verifying the merging like we did for request 3.\n",456],["T_WHITESPACE","    ",457],["T_VARIABLE","$element",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$test_element",457],";",["T_WHITESPACE","\n    ",457],["T_VARIABLE","$current_user_role",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'A'",458],";",["T_WHITESPACE","\n    ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","renderer",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","renderRoot",459],"(",["T_VARIABLE","$element",459],")",";",["T_WHITESPACE","\n    ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","assertRenderCacheItem",460],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$final_parent_cache_item",460],")",";",["T_WHITESPACE","\n    ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","assertRenderCacheItem",461],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:bar:foo:r.A'",461],",",["T_WHITESPACE"," ",461],"[",["T_WHITESPACE","\n      ",461],["T_CONSTANT_ENCAPSED_STRING","'#attached'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],"[","]",",",["T_WHITESPACE","\n      ",462],["T_CONSTANT_ENCAPSED_STRING","'#cache'",463],["T_WHITESPACE"," ",463],["T_DOUBLE_ARROW","=>",463],["T_WHITESPACE"," ",463],"[",["T_WHITESPACE","\n        ",463],["T_CONSTANT_ENCAPSED_STRING","'contexts'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'foo'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",464],"]",",",["T_WHITESPACE","\n        ",464],["T_CONSTANT_ENCAPSED_STRING","'tags'",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'b'",465],"]",",",["T_WHITESPACE","\n        ",465],["T_COMMENT","\/\/ Note that the max-age here is unaffected. When role A, the grandchild\n",466],["T_WHITESPACE","        ",467],["T_COMMENT","\/\/ is never rendered, so neither is its max-age of 1800 present here,\n",467],["T_WHITESPACE","        ",468],["T_COMMENT","\/\/ nor the grandgrandchild's max-age of 300, despite 300 being the\n",468],["T_WHITESPACE","        ",469],["T_COMMENT","\/\/ max-age of the redirecting cache item.\n",469],["T_WHITESPACE","        ",470],["T_CONSTANT_ENCAPSED_STRING","'max-age'",470],["T_WHITESPACE"," ",470],["T_DOUBLE_ARROW","=>",470],["T_WHITESPACE"," ",470],["T_STRING","Cache",470],["T_DOUBLE_COLON","::",470],["T_STRING","PERMANENT",470],",",["T_WHITESPACE","\n      ",470],"]",",",["T_WHITESPACE","\n      ",471],["T_CONSTANT_ENCAPSED_STRING","'#markup'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'parent'",472],",",["T_WHITESPACE","\n    ",472],"]",")",";",["T_WHITESPACE","\n\n    ",473],["T_COMMENT","\/\/ Request 6: role B again, verifying the merging like we did for request 3.\n",475],["T_WHITESPACE","    ",476],["T_VARIABLE","$element",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$test_element",476],";",["T_WHITESPACE","\n    ",476],["T_VARIABLE","$current_user_role",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'B'",477],";",["T_WHITESPACE","\n    ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","renderer",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","renderRoot",478],"(",["T_VARIABLE","$element",478],")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","assertRenderCacheItem",479],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",479],",",["T_WHITESPACE"," ",479],["T_VARIABLE","$final_parent_cache_item",479],")",";",["T_WHITESPACE","\n    ",479],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","assertRenderCacheItem",480],"(",["T_CONSTANT_ENCAPSED_STRING","'parent:bar:foo:r.B'",480],",",["T_WHITESPACE"," ",480],"[",["T_WHITESPACE","\n      ",480],["T_CONSTANT_ENCAPSED_STRING","'#attached'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],"[","]",",",["T_WHITESPACE","\n      ",481],["T_CONSTANT_ENCAPSED_STRING","'#cache'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],"[",["T_WHITESPACE","\n        ",482],["T_CONSTANT_ENCAPSED_STRING","'contexts'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'foo'",483],",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'user.roles'",483],"]",",",["T_WHITESPACE","\n        ",483],["T_CONSTANT_ENCAPSED_STRING","'tags'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],"[",["T_CONSTANT_ENCAPSED_STRING","'a'",484],",",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'b'",484],",",["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'c'",484],"]",",",["T_WHITESPACE","\n        ",484],["T_COMMENT","\/\/ Note that the max-age here is unaffected. When role B, the\n",485],["T_WHITESPACE","        ",486],["T_COMMENT","\/\/ grandgrandchild is never rendered, so neither is its max-age of 300\n",486],["T_WHITESPACE","        ",487],["T_COMMENT","\/\/ present here, despite 300 being the max-age of the redirecting cache\n",487],["T_WHITESPACE","        ",488],["T_COMMENT","\/\/ item.\n",488],["T_WHITESPACE","        ",489],["T_CONSTANT_ENCAPSED_STRING","'max-age'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_LNUMBER","1800",489],",",["T_WHITESPACE","\n      ",489],"]",",",["T_WHITESPACE","\n      ",490],["T_CONSTANT_ENCAPSED_STRING","'#markup'",491],["T_WHITESPACE"," ",491],["T_DOUBLE_ARROW","=>",491],["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'parent'",491],",",["T_WHITESPACE","\n    ",491],"]",")",";",["T_WHITESPACE","\n  ",492],"}",["T_WHITESPACE","\n\n  ",493],["T_DOC_COMMENT","\/**\n   * Tests bubbling of bubbleable metadata added by #pre_render callbacks.\n   *\n   * @dataProvider providerTestBubblingWithPrerender\n   *\/",495],["T_WHITESPACE","\n  ",499],["T_PUBLIC","public",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","testBubblingWithPrerender",500],"(",["T_VARIABLE","$test_element",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n    ",500],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","setUpRequest",501],"(",")",";",["T_WHITESPACE","\n    ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","setupMemoryCache",502],"(",")",";",["T_WHITESPACE","\n\n    ",502],["T_COMMENT","\/\/ Mock the State service.\n",504],["T_WHITESPACE","    ",505],["T_VARIABLE","$memory_state",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_NEW","new",505],["T_WHITESPACE"," ",505],["T_STRING","State",505],"(",["T_NEW","new",505],["T_WHITESPACE"," ",505],["T_STRING","KeyValueMemoryFactory",505],"(",")",")",";",";",["T_WHITESPACE","\n    ",505],["T_NS_SEPARATOR","\\",506],["T_STRING","Drupal",506],["T_DOUBLE_COLON","::",506],["T_STRING","getContainer",506],"(",")",["T_OBJECT_OPERATOR","->",506],["T_STRING","set",506],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$memory_state",506],")",";",["T_WHITESPACE","\n    ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","controllerResolver",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","expects",507],"(",["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","any",507],"(",")",")",["T_WHITESPACE","\n      ",507],["T_OBJECT_OPERATOR","->",508],["T_STRING","method",508],"(",["T_CONSTANT_ENCAPSED_STRING","'getControllerFromDefinition'",508],")",["T_WHITESPACE","\n      ",508],["T_OBJECT_OPERATOR","->",509],["T_STRING","willReturnArgument",509],"(",["T_LNUMBER","0",509],")",";",["T_WHITESPACE","\n\n    ",509],["T_COMMENT","\/\/ Simulate the theme system\/Twig: a recursive call to Renderer::render(),\n",511],["T_WHITESPACE","    ",512],["T_COMMENT","\/\/ just like the theme system or a Twig template would have done.\n",512],["T_WHITESPACE","    ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","themeManager",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","expects",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","any",513],"(",")",")",["T_WHITESPACE","\n      ",513],["T_OBJECT_OPERATOR","->",514],["T_STRING","method",514],"(",["T_CONSTANT_ENCAPSED_STRING","'render'",514],")",["T_WHITESPACE","\n      ",514],["T_OBJECT_OPERATOR","->",515],["T_STRING","willReturnCallback",515],"(",["T_FUNCTION","function",515],["T_WHITESPACE"," ",515],"(",["T_VARIABLE","$hook",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$vars",515],")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n        ",515],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","renderer",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","render",516],"(",["T_VARIABLE","$vars",516],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",516],"]",")",";",["T_WHITESPACE","\n      ",516],"}",")",";",["T_WHITESPACE","\n\n    ",517],["T_COMMENT","\/\/ ::bubblingPreRender() verifies that a #pre_render callback for a render\n",519],["T_WHITESPACE","    ",520],["T_COMMENT","\/\/ array that is cacheable and \u00e2\u0080\u00a6\n",520],["T_WHITESPACE","    ",521],["T_COMMENT","\/\/ - \u00e2\u0080\u00a6 is cached does NOT get called. (Also mock a render cache item.)\n",521],["T_WHITESPACE","    ",522],["T_COMMENT","\/\/ - \u00e2\u0080\u00a6 is not cached DOES get called.\n",522],["T_WHITESPACE","    ",523],["T_NS_SEPARATOR","\\",523],["T_STRING","Drupal",523],["T_DOUBLE_COLON","::",523],["T_STRING","state",523],"(",")",["T_OBJECT_OPERATOR","->",523],["T_STRING","set",523],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_cached'",523],",",["T_WHITESPACE"," ",523],["T_STRING","FALSE",523],")",";",["T_WHITESPACE","\n    ",523],["T_NS_SEPARATOR","\\",524],["T_STRING","Drupal",524],["T_DOUBLE_COLON","::",524],["T_STRING","state",524],"(",")",["T_OBJECT_OPERATOR","->",524],["T_STRING","set",524],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_uncached'",524],",",["T_WHITESPACE"," ",524],["T_STRING","FALSE",524],")",";",["T_WHITESPACE","\n    ",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","memoryCache",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","set",525],"(",["T_CONSTANT_ENCAPSED_STRING","'cached_nested'",525],",",["T_WHITESPACE"," ",525],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'Cached nested!'",525],",",["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'#attached'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],"[","]",",",["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'#cache'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],"[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],"[","]",",",["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'tags'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],"[","]","]","]",")",";",["T_WHITESPACE","\n\n    ",525],["T_COMMENT","\/\/ Simulate the rendering of an entire response (i.e. a root call).\n",527],["T_WHITESPACE","    ",528],["T_VARIABLE","$output",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","renderer",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","renderRoot",528],"(",["T_VARIABLE","$test_element",528],")",";",["T_WHITESPACE","\n\n    ",528],["T_COMMENT","\/\/ First, assert the render array is of the expected form.\n",530],["T_WHITESPACE","    ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","assertEquals",531],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache context!Cache tag!Asset!Placeholder!barquxNested!Cached nested!'",531],",",["T_WHITESPACE"," ",531],["T_STRING","trim",531],"(",["T_VARIABLE","$output",531],")",",",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'Expected HTML generated.'",531],")",";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","assertEquals",532],"(","[",["T_CONSTANT_ENCAPSED_STRING","'child.cache_context'",532],"]",",",["T_WHITESPACE"," ",532],["T_VARIABLE","$test_element",532],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",532],"]","[",["T_CONSTANT_ENCAPSED_STRING","'contexts'",532],"]",",",["T_WHITESPACE"," ",532],["T_CONSTANT_ENCAPSED_STRING","'Expected cache contexts found.'",532],")",";",["T_WHITESPACE","\n    ",532],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","assertEquals",533],"(","[",["T_CONSTANT_ENCAPSED_STRING","'child:cache_tag'",533],"]",",",["T_WHITESPACE"," ",533],["T_VARIABLE","$test_element",533],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",533],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tags'",533],"]",",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'Expected cache tags found.'",533],")",";",["T_WHITESPACE","\n    ",533],["T_VARIABLE","$expected_attached",534],["T_WHITESPACE"," ",534],"=",["T_WHITESPACE"," ",534],"[",["T_WHITESPACE","\n      ",534],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",535],["T_WHITESPACE"," ",535],["T_DOUBLE_ARROW","=>",535],["T_WHITESPACE"," ",535],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",535],["T_WHITESPACE"," ",535],["T_DOUBLE_ARROW","=>",535],["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","'bar'",535],"]",",",["T_WHITESPACE","\n      ",535],["T_CONSTANT_ENCAPSED_STRING","'placeholders'",536],["T_WHITESPACE"," ",536],["T_DOUBLE_ARROW","=>",536],["T_WHITESPACE"," ",536],"[","]",",",["T_WHITESPACE","\n    ",536],"]",";",["T_WHITESPACE","\n    ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","assertEquals",538],"(",["T_VARIABLE","$expected_attached",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$test_element",538],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",538],"]",",",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'Expected attachments found.'",538],")",";",["T_WHITESPACE","\n\n    ",538],["T_COMMENT","\/\/ Second, assert that #pre_render callbacks are only executed if they don't\n",540],["T_WHITESPACE","    ",541],["T_COMMENT","\/\/ have a render cache hit (and hence a #pre_render callback for a render\n",541],["T_WHITESPACE","    ",542],["T_COMMENT","\/\/ cached item cannot bubble more metadata).\n",542],["T_WHITESPACE","    ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","assertTrue",543],"(",["T_NS_SEPARATOR","\\",543],["T_STRING","Drupal",543],["T_DOUBLE_COLON","::",543],["T_STRING","state",543],"(",")",["T_OBJECT_OPERATOR","->",543],["T_STRING","get",543],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_uncached'",543],")",")",";",["T_WHITESPACE","\n    ",543],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","assertFalse",544],"(",["T_NS_SEPARATOR","\\",544],["T_STRING","Drupal",544],["T_DOUBLE_COLON","::",544],["T_STRING","state",544],"(",")",["T_OBJECT_OPERATOR","->",544],["T_STRING","get",544],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_cached'",544],")",")",";",["T_WHITESPACE","\n  ",544],"}",["T_WHITESPACE","\n\n  ",545],["T_DOC_COMMENT","\/**\n   * Provides two test elements: one without, and one with the theme system.\n   *\n   * @return array\n   *\/",547],["T_WHITESPACE","\n  ",551],["T_PUBLIC","public",552],["T_WHITESPACE"," ",552],["T_FUNCTION","function",552],["T_WHITESPACE"," ",552],["T_STRING","providerTestBubblingWithPrerender",552],"(",")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n    ",552],["T_VARIABLE","$data",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],"[","]",";",["T_WHITESPACE","\n\n    ",553],["T_COMMENT","\/\/ Test element without theme.\n",555],["T_WHITESPACE","    ",556],["T_VARIABLE","$data",556],"[","]",["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],"[","[",["T_WHITESPACE","\n      ",556],["T_CONSTANT_ENCAPSED_STRING","'foo'",557],["T_WHITESPACE"," ",557],["T_DOUBLE_ARROW","=>",557],["T_WHITESPACE"," ",557],"[",["T_WHITESPACE","\n        ",557],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",558],["T_WHITESPACE"," ",558],["T_DOUBLE_ARROW","=>",558],["T_WHITESPACE"," ",558],"[",["T_NS_C","__NAMESPACE__",558],["T_WHITESPACE"," ",558],".",["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'\\\\BubblingTest::bubblingPreRender'",558],"]",",",["T_WHITESPACE","\n      ",558],"]","]","]",";",["T_WHITESPACE","\n\n    ",559],["T_COMMENT","\/\/ Test element with theme.\n",561],["T_WHITESPACE","    ",562],["T_VARIABLE","$data",562],"[","]",["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],"[","[",["T_WHITESPACE","\n      ",562],["T_CONSTANT_ENCAPSED_STRING","'#theme'",563],["T_WHITESPACE"," ",563],["T_DOUBLE_ARROW","=>",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'common_test_render_element'",563],",",["T_WHITESPACE","\n      ",563],["T_CONSTANT_ENCAPSED_STRING","'foo'",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],"[",["T_WHITESPACE","\n        ",564],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",565],["T_WHITESPACE"," ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],"[",["T_NS_C","__NAMESPACE__",565],["T_WHITESPACE"," ",565],".",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'\\\\BubblingTest::bubblingPreRender'",565],"]",",",["T_WHITESPACE","\n      ",565],"]","]","]",";",["T_WHITESPACE","\n\n    ",566],["T_RETURN","return",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$data",568],";",["T_WHITESPACE","\n  ",568],"}",["T_WHITESPACE","\n\n  ",569],["T_DOC_COMMENT","\/**\n   * Tests that an element's cache keys cannot be changed during its rendering.\n   *\n   * @expectedException \\LogicException\n   * @expectedExceptionMessage Cache keys may not be changed after initial setup. Use the contexts property instead to bubble additional metadata.\n   *\/",571],["T_WHITESPACE","\n  ",576],["T_PUBLIC","public",577],["T_WHITESPACE"," ",577],["T_FUNCTION","function",577],["T_WHITESPACE"," ",577],["T_STRING","testOverWriteCacheKeys",577],"(",")",["T_WHITESPACE"," ",577],"{",["T_WHITESPACE","\n    ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","setUpRequest",578],"(",")",";",["T_WHITESPACE","\n    ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","setupMemoryCache",579],"(",")",";",["T_WHITESPACE","\n\n    ",579],["T_COMMENT","\/\/ Ensure a logic exception\n",581],["T_WHITESPACE","    ",582],["T_VARIABLE","$data",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],"[",["T_WHITESPACE","\n      ",582],["T_CONSTANT_ENCAPSED_STRING","'#cache'",583],["T_WHITESPACE"," ",583],["T_DOUBLE_ARROW","=>",583],["T_WHITESPACE"," ",583],"[",["T_WHITESPACE","\n        ",583],["T_CONSTANT_ENCAPSED_STRING","'keys'",584],["T_WHITESPACE"," ",584],["T_DOUBLE_ARROW","=>",584],["T_WHITESPACE"," ",584],"[",["T_CONSTANT_ENCAPSED_STRING","'llama'",584],",",["T_WHITESPACE"," ",584],["T_CONSTANT_ENCAPSED_STRING","'bar'",584],"]",",",["T_WHITESPACE","\n       ",584],"]",",",["T_WHITESPACE","\n      ",585],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",586],["T_WHITESPACE"," ",586],["T_DOUBLE_ARROW","=>",586],["T_WHITESPACE"," ",586],"[",["T_NS_C","__NAMESPACE__",586],["T_WHITESPACE"," ",586],".",["T_WHITESPACE"," ",586],["T_CONSTANT_ENCAPSED_STRING","'\\\\BubblingTest::bubblingCacheOverwritePrerender'",586],"]",",",["T_WHITESPACE","\n    ",586],"]",";",["T_WHITESPACE","\n    ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","renderer",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","renderRoot",588],"(",["T_VARIABLE","$data",588],")",";",["T_WHITESPACE","\n  ",588],"}",["T_WHITESPACE","\n\n",589],"}",["T_WHITESPACE","\n\n\n",591],["T_CLASS","class",594],["T_WHITESPACE"," ",594],["T_STRING","BubblingTest",594],["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n\n  ",594],["T_DOC_COMMENT","\/**\n   * #pre_render callback for testBubblingWithPrerender().\n   *\/",596],["T_WHITESPACE","\n  ",598],["T_PUBLIC","public",599],["T_WHITESPACE"," ",599],["T_STATIC","static",599],["T_WHITESPACE"," ",599],["T_FUNCTION","function",599],["T_WHITESPACE"," ",599],["T_STRING","bubblingPreRender",599],"(",["T_VARIABLE","$elements",599],")",["T_WHITESPACE"," ",599],"{",["T_WHITESPACE","\n    ",599],["T_VARIABLE","$elements",600],["T_WHITESPACE"," ",600],["T_PLUS_EQUAL","+=",600],["T_WHITESPACE"," ",600],"[",["T_WHITESPACE","\n      ",600],["T_CONSTANT_ENCAPSED_STRING","'child_cache_context'",601],["T_WHITESPACE"," ",601],["T_DOUBLE_ARROW","=>",601],["T_WHITESPACE"," ",601],"[",["T_WHITESPACE","\n        ",601],["T_CONSTANT_ENCAPSED_STRING","'#cache'",602],["T_WHITESPACE"," ",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],"[",["T_WHITESPACE","\n          ",602],["T_CONSTANT_ENCAPSED_STRING","'contexts'",603],["T_WHITESPACE"," ",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],"[",["T_CONSTANT_ENCAPSED_STRING","'child.cache_context'",603],"]",",",["T_WHITESPACE","\n        ",603],"]",",",["T_WHITESPACE","\n        ",604],["T_CONSTANT_ENCAPSED_STRING","'#markup'",605],["T_WHITESPACE"," ",605],["T_DOUBLE_ARROW","=>",605],["T_WHITESPACE"," ",605],["T_CONSTANT_ENCAPSED_STRING","'Cache context!'",605],",",["T_WHITESPACE","\n      ",605],"]",",",["T_WHITESPACE","\n      ",606],["T_CONSTANT_ENCAPSED_STRING","'child_cache_tag'",607],["T_WHITESPACE"," ",607],["T_DOUBLE_ARROW","=>",607],["T_WHITESPACE"," ",607],"[",["T_WHITESPACE","\n        ",607],["T_CONSTANT_ENCAPSED_STRING","'#cache'",608],["T_WHITESPACE"," ",608],["T_DOUBLE_ARROW","=>",608],["T_WHITESPACE"," ",608],"[",["T_WHITESPACE","\n          ",608],["T_CONSTANT_ENCAPSED_STRING","'tags'",609],["T_WHITESPACE"," ",609],["T_DOUBLE_ARROW","=>",609],["T_WHITESPACE"," ",609],"[",["T_CONSTANT_ENCAPSED_STRING","'child:cache_tag'",609],"]",",",["T_WHITESPACE","\n        ",609],"]",",",["T_WHITESPACE","\n        ",610],["T_CONSTANT_ENCAPSED_STRING","'#markup'",611],["T_WHITESPACE"," ",611],["T_DOUBLE_ARROW","=>",611],["T_WHITESPACE"," ",611],["T_CONSTANT_ENCAPSED_STRING","'Cache tag!'",611],",",["T_WHITESPACE","\n      ",611],"]",",",["T_WHITESPACE","\n      ",612],["T_CONSTANT_ENCAPSED_STRING","'child_asset'",613],["T_WHITESPACE"," ",613],["T_DOUBLE_ARROW","=>",613],["T_WHITESPACE"," ",613],"[",["T_WHITESPACE","\n        ",613],["T_CONSTANT_ENCAPSED_STRING","'#attached'",614],["T_WHITESPACE"," ",614],["T_DOUBLE_ARROW","=>",614],["T_WHITESPACE"," ",614],"[",["T_WHITESPACE","\n          ",614],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",615],["T_WHITESPACE"," ",615],["T_DOUBLE_ARROW","=>",615],["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'bar'",615],"]",",",["T_WHITESPACE","\n        ",615],"]",",",["T_WHITESPACE","\n        ",616],["T_CONSTANT_ENCAPSED_STRING","'#markup'",617],["T_WHITESPACE"," ",617],["T_DOUBLE_ARROW","=>",617],["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","'Asset!'",617],",",["T_WHITESPACE","\n      ",617],"]",",",["T_WHITESPACE","\n      ",618],["T_CONSTANT_ENCAPSED_STRING","'child_placeholder'",619],["T_WHITESPACE"," ",619],["T_DOUBLE_ARROW","=>",619],["T_WHITESPACE"," ",619],"[",["T_WHITESPACE","\n        ",619],["T_CONSTANT_ENCAPSED_STRING","'#create_placeholder'",620],["T_WHITESPACE"," ",620],["T_DOUBLE_ARROW","=>",620],["T_WHITESPACE"," ",620],["T_STRING","TRUE",620],",",["T_WHITESPACE","\n        ",620],["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",621],["T_WHITESPACE"," ",621],["T_DOUBLE_ARROW","=>",621],["T_WHITESPACE"," ",621],"[",["T_CLASS_C","__CLASS__",621],["T_WHITESPACE"," ",621],".",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","'::bubblingPlaceholder'",621],",",["T_WHITESPACE"," ",621],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",621],",",["T_WHITESPACE"," ",621],["T_CONSTANT_ENCAPSED_STRING","'qux'",621],"]","]",",",["T_WHITESPACE","\n      ",621],"]",",",["T_WHITESPACE","\n      ",622],["T_CONSTANT_ENCAPSED_STRING","'child_nested_pre_render_uncached'",623],["T_WHITESPACE"," ",623],["T_DOUBLE_ARROW","=>",623],["T_WHITESPACE"," ",623],"[",["T_WHITESPACE","\n        ",623],["T_CONSTANT_ENCAPSED_STRING","'#cache'",624],["T_WHITESPACE"," ",624],["T_DOUBLE_ARROW","=>",624],["T_WHITESPACE"," ",624],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",624],["T_WHITESPACE"," ",624],["T_DOUBLE_ARROW","=>",624],["T_WHITESPACE"," ",624],"[",["T_CONSTANT_ENCAPSED_STRING","'uncached_nested'",624],"]","]",",",["T_WHITESPACE","\n        ",624],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",625],["T_WHITESPACE"," ",625],["T_DOUBLE_ARROW","=>",625],["T_WHITESPACE"," ",625],"[",["T_CLASS_C","__CLASS__",625],["T_WHITESPACE"," ",625],".",["T_WHITESPACE"," ",625],["T_CONSTANT_ENCAPSED_STRING","'::bubblingNestedPreRenderUncached'",625],"]",",",["T_WHITESPACE","\n      ",625],"]",",",["T_WHITESPACE","\n      ",626],["T_CONSTANT_ENCAPSED_STRING","'child_nested_pre_render_cached'",627],["T_WHITESPACE"," ",627],["T_DOUBLE_ARROW","=>",627],["T_WHITESPACE"," ",627],"[",["T_WHITESPACE","\n        ",627],["T_CONSTANT_ENCAPSED_STRING","'#cache'",628],["T_WHITESPACE"," ",628],["T_DOUBLE_ARROW","=>",628],["T_WHITESPACE"," ",628],"[",["T_CONSTANT_ENCAPSED_STRING","'keys'",628],["T_WHITESPACE"," ",628],["T_DOUBLE_ARROW","=>",628],["T_WHITESPACE"," ",628],"[",["T_CONSTANT_ENCAPSED_STRING","'cached_nested'",628],"]","]",",",["T_WHITESPACE","\n        ",628],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",629],["T_WHITESPACE"," ",629],["T_DOUBLE_ARROW","=>",629],["T_WHITESPACE"," ",629],"[",["T_CLASS_C","__CLASS__",629],["T_WHITESPACE"," ",629],".",["T_WHITESPACE"," ",629],["T_CONSTANT_ENCAPSED_STRING","'::bubblingNestedPreRenderCached'",629],"]",",",["T_WHITESPACE","\n      ",629],"]",",",["T_WHITESPACE","\n    ",630],"]",";",["T_WHITESPACE","\n    ",631],["T_RETURN","return",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$elements",632],";",["T_WHITESPACE","\n  ",632],"}",["T_WHITESPACE","\n\n  ",633],["T_DOC_COMMENT","\/**\n   * #pre_render callback for testBubblingWithPrerender().\n   *\/",635],["T_WHITESPACE","\n  ",637],["T_PUBLIC","public",638],["T_WHITESPACE"," ",638],["T_STATIC","static",638],["T_WHITESPACE"," ",638],["T_FUNCTION","function",638],["T_WHITESPACE"," ",638],["T_STRING","bubblingNestedPreRenderUncached",638],"(",["T_VARIABLE","$elements",638],")",["T_WHITESPACE"," ",638],"{",["T_WHITESPACE","\n    ",638],["T_NS_SEPARATOR","\\",639],["T_STRING","Drupal",639],["T_DOUBLE_COLON","::",639],["T_STRING","state",639],"(",")",["T_OBJECT_OPERATOR","->",639],["T_STRING","set",639],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_uncached'",639],",",["T_WHITESPACE"," ",639],["T_STRING","TRUE",639],")",";",["T_WHITESPACE","\n    ",639],["T_VARIABLE","$elements",640],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",640],"]",["T_WHITESPACE"," ",640],"=",["T_WHITESPACE"," ",640],["T_CONSTANT_ENCAPSED_STRING","'Nested!'",640],";",["T_WHITESPACE","\n    ",640],["T_RETURN","return",641],["T_WHITESPACE"," ",641],["T_VARIABLE","$elements",641],";",["T_WHITESPACE","\n  ",641],"}",["T_WHITESPACE","\n\n  ",642],["T_DOC_COMMENT","\/**\n   * #pre_render callback for testBubblingWithPrerender().\n   *\/",644],["T_WHITESPACE","\n  ",646],["T_PUBLIC","public",647],["T_WHITESPACE"," ",647],["T_STATIC","static",647],["T_WHITESPACE"," ",647],["T_FUNCTION","function",647],["T_WHITESPACE"," ",647],["T_STRING","bubblingNestedPreRenderCached",647],"(",["T_VARIABLE","$elements",647],")",["T_WHITESPACE"," ",647],"{",["T_WHITESPACE","\n    ",647],["T_NS_SEPARATOR","\\",648],["T_STRING","Drupal",648],["T_DOUBLE_COLON","::",648],["T_STRING","state",648],"(",")",["T_OBJECT_OPERATOR","->",648],["T_STRING","set",648],"(",["T_CONSTANT_ENCAPSED_STRING","'bubbling_nested_pre_render_cached'",648],",",["T_WHITESPACE"," ",648],["T_STRING","TRUE",648],")",";",["T_WHITESPACE","\n    ",648],["T_RETURN","return",649],["T_WHITESPACE"," ",649],["T_VARIABLE","$elements",649],";",["T_WHITESPACE","\n  ",649],"}",["T_WHITESPACE","\n\n  ",650],["T_DOC_COMMENT","\/**\n   * #lazy_builder callback for testBubblingWithPrerender().\n   *\/",652],["T_WHITESPACE","\n  ",654],["T_PUBLIC","public",655],["T_WHITESPACE"," ",655],["T_STATIC","static",655],["T_WHITESPACE"," ",655],["T_FUNCTION","function",655],["T_WHITESPACE"," ",655],["T_STRING","bubblingPlaceholder",655],"(",["T_VARIABLE","$foo",655],",",["T_WHITESPACE"," ",655],["T_VARIABLE","$baz",655],")",["T_WHITESPACE"," ",655],"{",["T_WHITESPACE","\n    ",655],["T_RETURN","return",656],["T_WHITESPACE"," ",656],"[",["T_WHITESPACE","\n      ",656],["T_CONSTANT_ENCAPSED_STRING","'#markup'",657],["T_WHITESPACE"," ",657],["T_DOUBLE_ARROW","=>",657],["T_WHITESPACE"," ",657],["T_CONSTANT_ENCAPSED_STRING","'Placeholder!'",657],["T_WHITESPACE"," ",657],".",["T_WHITESPACE"," ",657],["T_VARIABLE","$foo",657],["T_WHITESPACE"," ",657],".",["T_WHITESPACE"," ",657],["T_VARIABLE","$baz",657],",",["T_WHITESPACE","\n    ",657],"]",";",["T_WHITESPACE","\n  ",658],"}",["T_WHITESPACE","\n\n  ",659],["T_DOC_COMMENT","\/**\n   * #pre_render callback for testOverWriteCacheKeys().\n   *\/",661],["T_WHITESPACE","\n  ",663],["T_PUBLIC","public",664],["T_WHITESPACE"," ",664],["T_STATIC","static",664],["T_WHITESPACE"," ",664],["T_FUNCTION","function",664],["T_WHITESPACE"," ",664],["T_STRING","bubblingCacheOverwritePrerender",664],"(",["T_VARIABLE","$elements",664],")",["T_WHITESPACE"," ",664],"{",["T_WHITESPACE","\n    ",664],["T_COMMENT","\/\/ Overwrite the #cache entry with new data.\n",665],["T_WHITESPACE","    ",666],["T_VARIABLE","$elements",666],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",666],"]",["T_WHITESPACE"," ",666],"=",["T_WHITESPACE"," ",666],"[",["T_WHITESPACE","\n      ",666],["T_CONSTANT_ENCAPSED_STRING","'keys'",667],["T_WHITESPACE"," ",667],["T_DOUBLE_ARROW","=>",667],["T_WHITESPACE"," ",667],"[",["T_CONSTANT_ENCAPSED_STRING","'llama'",667],",",["T_WHITESPACE"," ",667],["T_CONSTANT_ENCAPSED_STRING","'foo'",667],"]",",",["T_WHITESPACE","\n    ",667],"]",";",["T_WHITESPACE","\n    ",668],["T_VARIABLE","$elements",669],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",669],"]",["T_WHITESPACE"," ",669],"=",["T_WHITESPACE"," ",669],["T_CONSTANT_ENCAPSED_STRING","'Setting cache keys just now!'",669],";",["T_WHITESPACE","\n    ",669],["T_RETURN","return",670],["T_WHITESPACE"," ",670],["T_VARIABLE","$elements",670],";",["T_WHITESPACE","\n  ",670],"}",["T_WHITESPACE","\n\n",671],"}",["T_WHITESPACE","\n",673]]
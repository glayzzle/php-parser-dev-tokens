[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","PageCache",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PageCache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","RequestPolicyInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","PageCache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ChainRequestPolicy",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UnitTestCase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpFoundation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Request",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\PageCache\\ChainRequestPolicy\n * @group PageCache\n *\/",10],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ChainRequestPolicyTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","UnitTestCase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * The chain request policy under test.\n   *\n   * @var \\Drupal\\Core\\PageCache\\ChainRequestPolicy\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$policy",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * A request object.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\Request\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$request",28],";",["T_WHITESPACE","\n\n  ",28],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","policy",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_NEW","new",31],["T_WHITESPACE"," ",31],["T_STRING","ChainRequestPolicy",31],"(",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","request",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_NEW","new",32],["T_WHITESPACE"," ",32],["T_STRING","Request",32],"(",")",";",["T_WHITESPACE","\n  ",32],"}",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns NULL if the chain is empty.\n   *\n   * @covers ::check\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","testEmptyChain",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$result",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","policy",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","check",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","request",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertSame",42],"(",["T_STRING","NULL",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$result",42],")",";",["T_WHITESPACE","\n  ",42],"}",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns NULL if a rule returns NULL.\n   *\n   * @covers ::check\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","testNullRuleChain",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$rule",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getMock",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$rule",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","expects",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","once",52],"(",")",")",["T_WHITESPACE","\n      ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","method",53],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",53],")",["T_WHITESPACE","\n      ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","with",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","request",54],")",["T_WHITESPACE","\n      ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","will",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","returnValue",55],"(",["T_STRING","NULL",55],")",")",";",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","policy",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addPolicy",57],"(",["T_VARIABLE","$rule",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$result",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","policy",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","check",59],"(",["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","request",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertSame",60],"(",["T_STRING","NULL",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$result",60],")",";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Asserts that check() throws an exception if a rule returns an invalid value.\n   *\n   * @expectedException \\UnexpectedValueException\n   * @dataProvider providerChainExceptionOnInvalidReturnValue\n   * @covers ::check\n   *\/",63],["T_WHITESPACE","\n  ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testChainExceptionOnInvalidReturnValue",70],"(",["T_VARIABLE","$return_value",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$rule",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMock",71],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$rule",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","expects",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","once",72],"(",")",")",["T_WHITESPACE","\n      ",72],["T_OBJECT_OPERATOR","->",73],["T_STRING","method",73],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",73],")",["T_WHITESPACE","\n      ",73],["T_OBJECT_OPERATOR","->",74],["T_STRING","with",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","request",74],")",["T_WHITESPACE","\n      ",74],["T_OBJECT_OPERATOR","->",75],["T_STRING","will",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","returnValue",75],"(",["T_VARIABLE","$return_value",75],")",")",";",["T_WHITESPACE","\n\n    ",75],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","policy",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","addPolicy",77],"(",["T_VARIABLE","$rule",77],")",";",["T_WHITESPACE","\n\n    ",77],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","policy",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","check",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","request",79],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Provides test data for testChainExceptionOnInvalidReturnValue.\n   *\n   * @return array\n   *   Test input and expected result.\n   *\/",82],["T_WHITESPACE","\n  ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","providerChainExceptionOnInvalidReturnValue",88],"(",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n    ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],"[",["T_WHITESPACE","\n      ",89],"[",["T_STRING","FALSE",90],"]",",",["T_WHITESPACE","\n      ",90],"[",["T_LNUMBER","0",91],"]",",",["T_WHITESPACE","\n      ",91],"[",["T_LNUMBER","1",92],"]",",",["T_WHITESPACE","\n      ",92],"[",["T_STRING","TRUE",93],"]",",",["T_WHITESPACE","\n      ",93],"[","[",["T_LNUMBER","1",94],",",["T_WHITESPACE"," ",94],["T_LNUMBER","2",94],",",["T_WHITESPACE"," ",94],["T_LNUMBER","3",94],"]","]",",",["T_WHITESPACE","\n      ",94],"[",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","stdClass",95],"(",")","]",",",["T_WHITESPACE","\n    ",95],"]",";",["T_WHITESPACE","\n  ",96],"}",["T_WHITESPACE","\n\n  ",97],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns ALLOW if any of the rules returns ALLOW.\n   *\n   * @dataProvider providerAllowIfAnyRuleReturnedAllow\n   * @covers ::check\n   *\/",99],["T_WHITESPACE","\n  ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","testAllowIfAnyRuleReturnedAllow",105],"(",["T_VARIABLE","$return_values",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n    ",105],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$return_values",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$return_value",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$rule",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getMock",107],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",107],")",";",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$rule",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","expects",108],"(",["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","once",108],"(",")",")",["T_WHITESPACE","\n        ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","method",109],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",109],")",["T_WHITESPACE","\n        ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","with",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","request",110],")",["T_WHITESPACE","\n        ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","will",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","returnValue",111],"(",["T_VARIABLE","$return_value",111],")",")",";",["T_WHITESPACE","\n\n      ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","policy",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","addPolicy",113],"(",["T_VARIABLE","$rule",113],")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_VARIABLE","$actual_result",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","policy",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","check",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","request",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertSame",117],"(",["T_STRING","RequestPolicyInterface",117],["T_DOUBLE_COLON","::",117],["T_STRING","ALLOW",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$actual_result",117],")",";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n  ",118],["T_DOC_COMMENT","\/**\n   * Provides test data for testAllowIfAnyRuleReturnedAllow.\n   *\n   * @return array\n   *   Test input and expected result.\n   *\/",120],["T_WHITESPACE","\n  ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","providerAllowIfAnyRuleReturnedAllow",126],"(",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n    ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],"[",["T_WHITESPACE","\n      ",127],"[","[",["T_STRING","RequestPolicyInterface",128],["T_DOUBLE_COLON","::",128],["T_STRING","ALLOW",128],"]","]",",",["T_WHITESPACE","\n      ",128],"[","[",["T_STRING","NULL",129],",",["T_WHITESPACE"," ",129],["T_STRING","RequestPolicyInterface",129],["T_DOUBLE_COLON","::",129],["T_STRING","ALLOW",129],"]","]",",",["T_WHITESPACE","\n    ",129],"]",";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns immediately when a rule returned DENY.\n   *\/",133],["T_WHITESPACE","\n  ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","testStopChainOnFirstDeny",136],"(",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$rule1",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getMock",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$rule1",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","expects",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","once",138],"(",")",")",["T_WHITESPACE","\n      ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","method",139],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",139],")",["T_WHITESPACE","\n      ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","with",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","request",140],")",["T_WHITESPACE","\n      ",140],["T_OBJECT_OPERATOR","->",141],["T_STRING","will",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","returnValue",141],"(",["T_STRING","RequestPolicyInterface",141],["T_DOUBLE_COLON","::",141],["T_STRING","ALLOW",141],")",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","policy",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","addPolicy",142],"(",["T_VARIABLE","$rule1",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_VARIABLE","$deny_rule",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getMock",144],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$deny_rule",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","expects",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","once",145],"(",")",")",["T_WHITESPACE","\n      ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","method",146],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",146],")",["T_WHITESPACE","\n      ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","with",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","request",147],")",["T_WHITESPACE","\n      ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","will",148],"(",["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","returnValue",148],"(",["T_STRING","RequestPolicyInterface",148],["T_DOUBLE_COLON","::",148],["T_STRING","DENY",148],")",")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","policy",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","addPolicy",149],"(",["T_VARIABLE","$deny_rule",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$ignored_rule",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getMock",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\RequestPolicyInterface'",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$ignored_rule",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","expects",152],"(",["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","never",152],"(",")",")",["T_WHITESPACE","\n      ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","method",153],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","policy",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","addPolicy",154],"(",["T_VARIABLE","$ignored_rule",154],")",";",["T_WHITESPACE","\n\n    ",154],["T_VARIABLE","$actual_result",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","policy",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","check",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","request",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertsame",157],"(",["T_STRING","RequestPolicyInterface",157],["T_DOUBLE_COLON","::",157],["T_STRING","DENY",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$actual_result",157],")",";",["T_WHITESPACE","\n  ",157],"}",["T_WHITESPACE","\n\n",158],"}",["T_WHITESPACE","\n",160]]
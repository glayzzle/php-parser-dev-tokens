[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","PageCache",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PageCache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ResponsePolicyInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","PageCache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ChainResponsePolicy",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UnitTestCase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpFoundation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Request",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpFoundation",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Response",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\PageCache\\ChainResponsePolicy\n * @group PageCache\n *\/",11],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ChainResponsePolicyTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","UnitTestCase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * The chain response policy under test.\n   *\n   * @var \\Drupal\\Core\\PageCache\\ChainResponsePolicy\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$policy",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * A request object.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\Request\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$request",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * A response object.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\Response\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$response",36],";",["T_WHITESPACE","\n\n  ",36],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","setUp",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","policy",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NEW","new",39],["T_WHITESPACE"," ",39],["T_STRING","ChainResponsePolicy",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","response",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_NEW","new",40],["T_WHITESPACE"," ",40],["T_STRING","Response",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","request",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NEW","new",41],["T_WHITESPACE"," ",41],["T_STRING","Request",41],"(",")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns NULL if the chain is empty.\n   *\n   * @covers ::check\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testEmptyChain",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$result",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","policy",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","check",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","response",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","request",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertSame",51],"(",["T_STRING","NULL",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$result",51],")",";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns NULL if a rule returns NULL.\n   *\n   * @covers ::check\n   *\/",54],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","testNullRuleChain",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$rule",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getMock",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\ResponsePolicyInterface'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$rule",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","expects",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","once",61],"(",")",")",["T_WHITESPACE","\n      ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","method",62],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",62],")",["T_WHITESPACE","\n      ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","with",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","response",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","request",63],")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","will",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","returnValue",64],"(",["T_STRING","NULL",64],")",")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","policy",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","addPolicy",66],"(",["T_VARIABLE","$rule",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_VARIABLE","$result",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","policy",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","check",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","response",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","request",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertSame",69],"(",["T_STRING","NULL",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$result",69],")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Asserts that check() throws an exception if a rule returns an invalid value.\n   *\n   * @expectedException \\UnexpectedValueException\n   * @dataProvider providerChainExceptionOnInvalidReturnValue\n   * @covers ::check\n   *\/",72],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testChainExceptionOnInvalidReturnValue",79],"(",["T_VARIABLE","$return_value",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$rule",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getMock",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\ResponsePolicyInterface'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$rule",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","expects",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","once",81],"(",")",")",["T_WHITESPACE","\n      ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","method",82],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",82],")",["T_WHITESPACE","\n      ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","with",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","response",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","request",83],")",["T_WHITESPACE","\n      ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","will",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","returnValue",84],"(",["T_VARIABLE","$return_value",84],")",")",";",["T_WHITESPACE","\n\n    ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","policy",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","addPolicy",86],"(",["T_VARIABLE","$rule",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$actual_result",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","policy",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","check",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","response",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","request",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertSame",89],"(",["T_STRING","NULL",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$actual_result",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Provides test data for testChainExceptionOnInvalidReturnValue.\n   *\n   * @return array\n   *   Test input and expected result.\n   *\/",92],["T_WHITESPACE","\n  ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","providerChainExceptionOnInvalidReturnValue",98],"(",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],"[",["T_WHITESPACE","\n      ",99],"[",["T_STRING","FALSE",100],"]",",",["T_WHITESPACE","\n      ",100],"[",["T_LNUMBER","0",101],"]",",",["T_WHITESPACE","\n      ",101],"[",["T_LNUMBER","1",102],"]",",",["T_WHITESPACE","\n      ",102],"[",["T_STRING","TRUE",103],"]",",",["T_WHITESPACE","\n      ",103],"[","[",["T_LNUMBER","1",104],",",["T_WHITESPACE"," ",104],["T_LNUMBER","2",104],",",["T_WHITESPACE"," ",104],["T_LNUMBER","3",104],"]","]",",",["T_WHITESPACE","\n      ",104],"[",["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","stdClass",105],"(",")","]",",",["T_WHITESPACE","\n    ",105],"]",";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n  ",107],["T_DOC_COMMENT","\/**\n   * Asserts that check() returns immediately when a rule returned DENY.\n   *\/",109],["T_WHITESPACE","\n  ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","testStopChainOnFirstDeny",112],"(",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$rule1",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMock",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\ResponsePolicyInterface'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$rule1",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","expects",114],"(",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","once",114],"(",")",")",["T_WHITESPACE","\n      ",114],["T_OBJECT_OPERATOR","->",115],["T_STRING","method",115],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",115],")",["T_WHITESPACE","\n      ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","with",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","response",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","request",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","policy",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","addPolicy",117],"(",["T_VARIABLE","$rule1",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$deny_rule",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getMock",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\ResponsePolicyInterface'",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$deny_rule",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","expects",120],"(",["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","once",120],"(",")",")",["T_WHITESPACE","\n      ",120],["T_OBJECT_OPERATOR","->",121],["T_STRING","method",121],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",121],")",["T_WHITESPACE","\n      ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","with",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","response",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","request",122],")",["T_WHITESPACE","\n      ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","will",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","returnValue",123],"(",["T_STRING","ResponsePolicyInterface",123],["T_DOUBLE_COLON","::",123],["T_STRING","DENY",123],")",")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","policy",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addPolicy",124],"(",["T_VARIABLE","$deny_rule",124],")",";",["T_WHITESPACE","\n\n    ",124],["T_VARIABLE","$ignored_rule",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getMock",126],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\PageCache\\ResponsePolicyInterface'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$ignored_rule",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","expects",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","never",127],"(",")",")",["T_WHITESPACE","\n      ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","method",128],"(",["T_CONSTANT_ENCAPSED_STRING","'check'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","policy",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","addPolicy",129],"(",["T_VARIABLE","$ignored_rule",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$actual_result",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","policy",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","check",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","response",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertsame",132],"(",["T_STRING","ResponsePolicyInterface",132],["T_DOUBLE_COLON","::",132],["T_STRING","DENY",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$actual_result",132],")",";",["T_WHITESPACE","\n  ",132],"}",["T_WHITESPACE","\n\n",133],"}",["T_WHITESPACE","\n",135]]
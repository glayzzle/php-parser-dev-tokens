[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Access",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AccessResult",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Context",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheContextsManager",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Container",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityCreateAccessCheck",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tests",9],["T_NS_SEPARATOR","\\",9],["T_STRING","UnitTestCase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DependencyInjection",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ParameterBag",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ParameterBag",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Core\\Entity\\EntityCreateAccessCheck\n *\n * @group Access\n * @group Entity\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","EntityCreateAccessCheckTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","UnitTestCase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The mocked entity manager.\n   *\n   * @var \\PHPUnit_Framework_MockObject_MockObject\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$entityManager",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_VARIABLE","$cache_contexts_manager",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","prophesize",33],"(",["T_STRING","CacheContextsManager",33],["T_DOUBLE_COLON","::",33],["T_CLASS","class",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$cache_contexts_manager",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","assertValidTokens",34],"(",")",["T_OBJECT_OPERATOR","->",34],["T_STRING","willReturn",34],"(",["T_STRING","TRUE",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$cache_contexts_manager",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","reveal",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$container",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NEW","new",36],["T_WHITESPACE"," ",36],["T_STRING","Container",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","set",37],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_contexts_manager'",37],",",["T_WHITESPACE"," ",37],["T_VARIABLE","$cache_contexts_manager",37],")",";",["T_WHITESPACE","\n    ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","setContainer",38],"(",["T_VARIABLE","$container",38],")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * Provides test data for testAccess.\n   *\n   * @return array\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","providerTestAccess",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$no_access",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","FALSE",47],";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$access",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","TRUE",48],";",["T_WHITESPACE","\n\n    ",48],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","''",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$no_access",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$no_access",51],")",",",["T_WHITESPACE","\n      ",51],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","''",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$access",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$access",52],")",",",["T_WHITESPACE","\n      ",52],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'entity_test:test_entity'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$access",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$access",53],")",",",["T_WHITESPACE","\n      ",53],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'entity_test:test_entity'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$no_access",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$no_access",54],")",",",["T_WHITESPACE","\n      ",54],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'entity_test:{bundle_argument}'",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$access",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$access",55],")",",",["T_WHITESPACE","\n      ",55],["T_ARRAY","array",56],"(",["T_CONSTANT_ENCAPSED_STRING","'test_entity'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'entity_test:{bundle_argument}'",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$no_access",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$no_access",56],")",",",["T_WHITESPACE","\n      ",56],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","''",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'entity_test:{bundle_argument}'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$no_access",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$no_access",57],",",["T_WHITESPACE"," ",57],["T_STRING","FALSE",57],")",",",["T_WHITESPACE","\n      ",57],["T_COMMENT","\/\/ When the bundle is not provided, access should be denied even if the\n",58],["T_WHITESPACE","      ",59],["T_COMMENT","\/\/ access control handler would allow access.\n",59],["T_WHITESPACE","      ",60],["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","''",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'entity_test:{bundle_argument}'",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$access",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$no_access",60],",",["T_WHITESPACE"," ",60],["T_STRING","FALSE",60],")",",",["T_WHITESPACE","\n    ",60],")",";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * Tests the method for checking access to routes.\n   *\n   * @dataProvider providerTestAccess\n   *\/",64],["T_WHITESPACE","\n  ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","testAccess",69],"(",["T_VARIABLE","$entity_bundle",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$requirement",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$access",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$expected",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$expect_permission_context",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","TRUE",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ Set up the access result objects for allowing or denying access.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$access_result",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$access",72],["T_WHITESPACE"," ",72],"?",["T_WHITESPACE"," ",72],["T_STRING","AccessResult",72],["T_DOUBLE_COLON","::",72],["T_STRING","allowed",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","cachePerPermissions",72],"(",")",["T_WHITESPACE"," ",72],":",["T_WHITESPACE"," ",72],["T_STRING","AccessResult",72],["T_DOUBLE_COLON","::",72],["T_STRING","neutral",72],"(",")",["T_OBJECT_OPERATOR","->",72],["T_STRING","cachePerPermissions",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$expected_access_result",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$expected",73],["T_WHITESPACE"," ",73],"?",["T_WHITESPACE"," ",73],["T_STRING","AccessResult",73],["T_DOUBLE_COLON","::",73],["T_STRING","allowed",73],"(",")",["T_WHITESPACE"," ",73],":",["T_WHITESPACE"," ",73],["T_STRING","AccessResult",73],["T_DOUBLE_COLON","::",73],["T_STRING","neutral",73],"(",")",";",["T_WHITESPACE","\n    ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(",["T_VARIABLE","$expect_permission_context",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$expected_access_result",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","cachePerPermissions",75],"(",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$entity_manager",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getMock",78],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\EntityManagerInterface'",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Don't expect a call to the access control handler when we have a bundle\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ argument requirement but no bundle is provided.\n",81],["T_WHITESPACE","    ",82],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$entity_bundle",82],["T_WHITESPACE"," ",82],["T_BOOLEAN_OR","||",82],["T_WHITESPACE"," ",82],["T_STRING","strpos",82],"(",["T_VARIABLE","$requirement",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'{'",82],")",["T_WHITESPACE"," ",82],["T_IS_IDENTICAL","===",82],["T_WHITESPACE"," ",82],["T_STRING","FALSE",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$access_control_handler",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getMock",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\EntityAccessControlHandlerInterface'",83],")",";",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$access_control_handler",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","expects",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","once",84],"(",")",")",["T_WHITESPACE","\n        ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","method",85],"(",["T_CONSTANT_ENCAPSED_STRING","'createAccess'",85],")",["T_WHITESPACE","\n        ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","with",86],"(",["T_VARIABLE","$entity_bundle",86],")",["T_WHITESPACE","\n        ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","will",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","returnValue",87],"(",["T_VARIABLE","$access_result",87],")",")",";",["T_WHITESPACE","\n\n      ",87],["T_VARIABLE","$entity_manager",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","expects",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","any",89],"(",")",")",["T_WHITESPACE","\n        ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_CONSTANT_ENCAPSED_STRING","'getAccessControlHandler'",90],")",["T_WHITESPACE","\n        ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","will",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","returnValue",91],"(",["T_VARIABLE","$access_control_handler",91],")",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_VARIABLE","$applies_check",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_NEW","new",94],["T_WHITESPACE"," ",94],["T_STRING","EntityCreateAccessCheck",94],"(",["T_VARIABLE","$entity_manager",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$route",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getMockBuilder",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\Routing\\Route'",96],")",["T_WHITESPACE","\n      ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","disableOriginalConstructor",97],"(",")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","getMock",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$route",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","expects",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","any",99],"(",")",")",["T_WHITESPACE","\n      ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'getRequirement'",100],")",["T_WHITESPACE","\n      ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","with",101],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_create_access'",101],")",["T_WHITESPACE","\n      ",101],["T_OBJECT_OPERATOR","->",102],["T_STRING","will",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","returnValue",102],"(",["T_VARIABLE","$requirement",102],")",")",";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$raw_variables",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","ParameterBag",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$entity_bundle",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$raw_variables",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","set",106],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle_argument'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity_bundle",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_VARIABLE","$route_match",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getMock",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Routing\\RouteMatchInterface'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$route_match",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","expects",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","any",110],"(",")",")",["T_WHITESPACE","\n      ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","method",111],"(",["T_CONSTANT_ENCAPSED_STRING","'getRawParameters'",111],")",["T_WHITESPACE","\n      ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","will",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","returnValue",112],"(",["T_VARIABLE","$raw_variables",112],")",")",";",["T_WHITESPACE","\n\n    ",112],["T_VARIABLE","$account",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getMock",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Session\\AccountInterface'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertEquals",115],"(",["T_VARIABLE","$expected_access_result",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$applies_check",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","access",115],"(",["T_VARIABLE","$route",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$route_match",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$account",115],")",")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n",116],"}",["T_WHITESPACE","\n",118]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Component",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Discovery",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","UnitTestCase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryCachedTrait\n * @uses \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryTrait\n * @group Plugin\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","DiscoveryCachedTraitTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","UnitTestCase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Data provider for testGetDefinition().\n   *\n   * @return array\n   *   - Expected result from getDefinition().\n   *   - Cached definitions to be placed into self::$definitions\n   *   - Definitions to be returned by getDefinitions().\n   *   - Plugin name to query for.\n   *\/",14],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","providerGetDefinition",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_WHITESPACE","\n      ",24],"[",["T_CONSTANT_ENCAPSED_STRING","'definition'",25],",",["T_WHITESPACE"," ",25],"[","]",",",["T_WHITESPACE"," ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin_name'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'definition'",25],"]",",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'plugin_name'",25],"]",",",["T_WHITESPACE","\n      ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'definition'",26],",",["T_WHITESPACE"," ",26],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin_name'",26],["T_WHITESPACE"," ",26],["T_DOUBLE_ARROW","=>",26],["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'definition'",26],"]",",",["T_WHITESPACE"," ",26],"[","]",",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'plugin_name'",26],"]",",",["T_WHITESPACE","\n      ",26],"[",["T_STRING","NULL",27],",",["T_WHITESPACE"," ",27],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin_name'",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'definition'",27],"]",",",["T_WHITESPACE"," ",27],"[","]",",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'bad_plugin_name'",27],"]",",",["T_WHITESPACE","\n    ",27],")",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * @covers ::getDefinition\n   * @dataProvider providerGetDefinition\n   *\/",31],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testGetDefinition",35],"(",["T_VARIABLE","$expected",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$cached_definitions",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$get_definitions",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$plugin_id",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Mock a DiscoveryCachedTrait.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$trait",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getMockForTrait",37],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Component\\Plugin\\Discovery\\DiscoveryCachedTrait'",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$reflection_definitions",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","ReflectionProperty",38],"(",["T_VARIABLE","$trait",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'definitions'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$reflection_definitions",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","setAccessible",39],"(",["T_STRING","TRUE",39],")",";",["T_WHITESPACE","\n    ",39],["T_COMMENT","\/\/ getDefinition() needs the ::$definitions property to be set in one of two\n",40],["T_WHITESPACE","    ",41],["T_COMMENT","\/\/ ways: 1) As existing cached data, or 2) as a side-effect of calling\n",41],["T_WHITESPACE","    ",42],["T_COMMENT","\/\/ getDefinitions().\n",42],["T_WHITESPACE","    ",43],["T_COMMENT","\/\/ If there are no cached definitions, then we have to fake the side-effect\n",43],["T_WHITESPACE","    ",44],["T_COMMENT","\/\/ of getDefinitions().\n",44],["T_WHITESPACE","    ",45],["T_IF","if",45],["T_WHITESPACE"," ",45],"(",["T_STRING","count",45],"(",["T_VARIABLE","$cached_definitions",45],")",["T_WHITESPACE"," ",45],"<",["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$trait",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","expects",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","once",46],"(",")",")",["T_WHITESPACE","\n        ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","method",47],"(",["T_CONSTANT_ENCAPSED_STRING","'getDefinitions'",47],")",["T_WHITESPACE","\n        ",47],["T_COMMENT","\/\/ Use a callback method, so we can perform the side-effects.\n",48],["T_WHITESPACE","        ",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","willReturnCallback",49],"(",["T_FUNCTION","function",49],"(",")",["T_WHITESPACE"," ",49],["T_USE","use",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$reflection_definitions",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$trait",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$get_definitions",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n          ",49],["T_VARIABLE","$reflection_definitions",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setValue",50],"(",["T_VARIABLE","$trait",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$get_definitions",50],")",";",["T_WHITESPACE","\n          ",50],["T_RETURN","return",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$get_definitions",51],";",["T_WHITESPACE","\n        ",51],"}",")",";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n    ",53],["T_ELSE","else",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n      ",54],["T_COMMENT","\/\/ Put $cached_definitions into our mocked ::$definitions.\n",55],["T_WHITESPACE","      ",56],["T_VARIABLE","$reflection_definitions",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setValue",56],"(",["T_VARIABLE","$trait",56],",",["T_WHITESPACE"," ",56],["T_VARIABLE","$cached_definitions",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Call getDefinition(), with $exception_on_invalid always FALSE.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertSame",59],"(",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$expected",60],",",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$trait",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getDefinition",61],"(",["T_VARIABLE","$plugin_id",61],",",["T_WHITESPACE"," ",61],["T_STRING","FALSE",61],")",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n",63],"}",["T_WHITESPACE","\n",65]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Component",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Serialization",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","UnitTestCase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\Component\\Serialization\\Json\n * @group Serialization\n *\/",8],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","JsonTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","UnitTestCase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * A test string with the full ASCII table.\n   *\n   * @var string\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$string",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * An array of unsafe html characters which has to be encoded.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$htmlUnsafe",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * An array of unsafe html characters which are already escaped.\n   *\n   * @var array\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$htmlUnsafeEscaped",33],";",["T_WHITESPACE","\n\n\n  ",33],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","setUp",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Setup a string with the full ASCII table.\n",42],["T_WHITESPACE","    ",43],["T_COMMENT","\/\/ @todo: Add tests for non-ASCII characters and Unicode.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","string",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","''",44],";",["T_WHITESPACE","\n    ",44],["T_FOR","for",45],["T_WHITESPACE"," ",45],"(",["T_VARIABLE","$i",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],";",["T_WHITESPACE"," ",45],["T_VARIABLE","$i",45],["T_WHITESPACE"," ",45],"<",["T_WHITESPACE"," ",45],["T_LNUMBER","128",45],";",["T_WHITESPACE"," ",45],["T_VARIABLE","$i",45],["T_INC","++",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","string",46],["T_WHITESPACE"," ",46],["T_CONCAT_EQUAL",".=",46],["T_WHITESPACE"," ",46],["T_STRING","chr",46],"(",["T_VARIABLE","$i",46],")",";",["T_WHITESPACE","\n    ",46],"}",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Characters that must be escaped.\n",49],["T_WHITESPACE","    ",50],["T_COMMENT","\/\/ We check for unescaped \" separately.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","htmlUnsafe",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'<'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'>'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'\\''",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'&'",51],")",";",["T_WHITESPACE","\n    ",51],["T_COMMENT","\/\/ The following are the encoded forms of: < > ' & \"\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","htmlUnsafeEscaped",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'\\u003C'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\\u003E'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\\u0027'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\\u0026'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\\u0022'",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Tests encoding for every ASCII character.\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","testEncodingAscii",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Verify there aren't character encoding problems with the source string.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertSame",61],"(",["T_STRING","strlen",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","string",61],")",",",["T_WHITESPACE"," ",61],["T_LNUMBER","127",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'A string with the full ASCII table has the correct length.'",61],")",";",["T_WHITESPACE","\n    ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","htmlUnsafe",62],["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$char",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertTrue",63],"(",["T_STRING","strpos",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","string",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$char",63],")",["T_WHITESPACE"," ",63],">",["T_WHITESPACE"," ",63],["T_LNUMBER","0",63],",",["T_WHITESPACE"," ",63],["T_STRING","sprintf",63],"(",["T_CONSTANT_ENCAPSED_STRING","'A string with the full ASCII table includes %s.'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$char",63],")",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Tests encoding length.\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testEncodingLength",70],"(",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Verify that JSON encoding produces a string with all of the characters.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$json",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Json",72],["T_DOUBLE_COLON","::",72],["T_STRING","encode",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","string",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertTrue",73],"(",["T_STRING","strlen",73],"(",["T_VARIABLE","$json",73],")",["T_WHITESPACE"," ",73],">",["T_WHITESPACE"," ",73],["T_STRING","strlen",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","string",73],")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string is larger than the source string.'",73],")",";",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n  ",74],["T_DOC_COMMENT","\/**\n   * Tests end and start of the encoded string.\n   *\/",76],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testEncodingStartEnd",79],"(",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$json",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Json",80],["T_DOUBLE_COLON","::",80],["T_STRING","encode",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","string",80],")",";",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ The first and last characters should be \", and no others.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertTrue",82],"(",["T_VARIABLE","$json",82],"[",["T_LNUMBER","0",82],"]",["T_WHITESPACE"," ",82],["T_IS_EQUAL","==",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\"'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string begins with \".'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertTrue",83],"(",["T_VARIABLE","$json",83],"[",["T_STRING","strlen",83],"(",["T_VARIABLE","$json",83],")",["T_WHITESPACE"," ",83],"-",["T_WHITESPACE"," ",83],["T_LNUMBER","1",83],"]",["T_WHITESPACE"," ",83],["T_IS_EQUAL","==",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\"'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string ends with \".'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertTrue",84],"(",["T_STRING","substr_count",84],"(",["T_VARIABLE","$json",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\"'",84],")",["T_WHITESPACE"," ",84],["T_IS_EQUAL","==",84],["T_WHITESPACE"," ",84],["T_LNUMBER","2",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string contains exactly two \".'",84],")",";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * Tests converting PHP variables to JSON strings and back.\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","testReversibility",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$json",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Json",91],["T_DOUBLE_COLON","::",91],["T_STRING","encode",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","string",91],")",";",["T_WHITESPACE","\n    ",91],["T_COMMENT","\/\/ Verify that encoding\/decoding is reversible.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$json_decoded",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","Json",93],["T_DOUBLE_COLON","::",93],["T_STRING","decode",93],"(",["T_VARIABLE","$json",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertSame",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","string",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$json_decoded",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'Encoding a string to JSON and decoding back results in the original string.'",94],")",";",["T_WHITESPACE","\n  ",94],"}",["T_WHITESPACE","\n\n  ",95],["T_DOC_COMMENT","\/**\n   * Test the reversibility of structured data\n   *\/",97],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","testStructuredReversibility",100],"(",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_COMMENT","\/\/ Verify reversibility for structured data. Also verify that necessary\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ characters are escaped.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$source",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_STRING","TRUE",103],",",["T_WHITESPACE"," ",103],["T_STRING","FALSE",103],",",["T_WHITESPACE"," ",103],["T_LNUMBER","0",103],",",["T_WHITESPACE"," ",103],["T_LNUMBER","1",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'0'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'1'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","string",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'key1'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","string",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'key2'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'nested'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_STRING","TRUE",103],")",")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$json",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","Json",104],["T_DOUBLE_COLON","::",104],["T_STRING","encode",104],"(",["T_VARIABLE","$source",104],")",";",["T_WHITESPACE","\n    ",104],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","htmlUnsafe",105],["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$char",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertTrue",106],"(",["T_STRING","strpos",106],"(",["T_VARIABLE","$json",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$char",106],")",["T_WHITESPACE"," ",106],["T_IS_IDENTICAL","===",106],["T_WHITESPACE"," ",106],["T_STRING","FALSE",106],",",["T_WHITESPACE"," ",106],["T_STRING","sprintf",106],"(",["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string does not contain %s.'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$char",106],")",")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n    ",107],["T_COMMENT","\/\/ Verify that JSON encoding escapes the HTML unsafe characters\n",108],["T_WHITESPACE","    ",109],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","htmlUnsafeEscaped",109],["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$char",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertTrue",110],"(",["T_STRING","strpos",110],"(",["T_VARIABLE","$json",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$char",110],")",["T_WHITESPACE"," ",110],">",["T_WHITESPACE"," ",110],["T_LNUMBER","0",110],",",["T_WHITESPACE"," ",110],["T_STRING","sprintf",110],"(",["T_CONSTANT_ENCAPSED_STRING","'A JSON encoded string contains %s.'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$char",110],")",")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$json_decoded",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Json",112],["T_DOUBLE_COLON","::",112],["T_STRING","decode",112],"(",["T_VARIABLE","$json",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertNotSame",113],"(",["T_VARIABLE","$source",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$json",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'An array encoded in JSON is identical to the source.'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertSame",114],"(",["T_VARIABLE","$source",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$json_decoded",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Encoding structured data to JSON and decoding back not results in the original data.'",114],")",";",["T_WHITESPACE","\n  ",114],"}",["T_WHITESPACE","\n\n",115],"}",["T_WHITESPACE","\n",117]]
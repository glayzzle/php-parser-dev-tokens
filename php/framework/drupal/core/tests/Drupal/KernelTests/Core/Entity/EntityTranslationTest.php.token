[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SafeMarkup",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","entity_test",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityTestMulRev",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldConfig",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldStorageConfig",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","language",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigurableLanguage",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Tests entity translation functionality.\n *\n * @group Entity\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","EntityTranslationTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","EntityLanguageTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Tests language related methods of the Entity class.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testEntityLanguageMethods",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_COMMENT","\/\/ All entity variations have to have the same results.\n",23],["T_WHITESPACE","    ",24],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_STRING","entity_test_entity_types",24],"(",")",["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$entity_type",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","doTestEntityLanguageMethods",25],"(",["T_VARIABLE","$entity_type",25],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Executes the entity language method tests for the given entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",29],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","doTestEntityLanguageMethods",35],"(",["T_VARIABLE","$entity_type",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$langcode_key",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","entityManager",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getDefinition",36],"(",["T_VARIABLE","$entity_type",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","getKey",36],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",36],")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$entity",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",37],")",["T_WHITESPACE","\n      ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","getStorage",38],"(",["T_VARIABLE","$entity_type",38],")",["T_WHITESPACE","\n      ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","create",39],"(",["T_ARRAY","array",39],"(",["T_WHITESPACE","\n        ",39],["T_CONSTANT_ENCAPSED_STRING","'name'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'test'",40],",",["T_WHITESPACE","\n        ",40],["T_CONSTANT_ENCAPSED_STRING","'user_id'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","container",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","get",41],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",41],")",["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",",",["T_WHITESPACE","\n      ",41],")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertEqual",43],"(",["T_VARIABLE","$entity",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","language",43],"(",")",["T_OBJECT_OPERATOR","->",43],["T_STRING","getId",43],"(",")",",",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","languageManager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getDefaultLanguage",43],"(",")",["T_OBJECT_OPERATOR","->",43],["T_STRING","getId",43],"(",")",",",["T_WHITESPACE"," ",43],["T_STRING","format_string",43],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Entity created with API has default language.'",43],",",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$entity_type",43],")",")",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$entity",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","container",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",44],")",["T_WHITESPACE","\n      ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","getStorage",45],"(",["T_VARIABLE","$entity_type",45],")",["T_WHITESPACE","\n      ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","create",46],"(",["T_ARRAY","array",46],"(",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'name'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'test'",47],",",["T_WHITESPACE","\n        ",47],["T_CONSTANT_ENCAPSED_STRING","'user_id'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_NS_SEPARATOR","\\",48],["T_STRING","Drupal",48],["T_DOUBLE_COLON","::",48],["T_STRING","currentUser",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","id",48],"(",")",",",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$langcode_key",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_STRING","LanguageInterface",49],["T_DOUBLE_COLON","::",49],["T_STRING","LANGCODE_NOT_SPECIFIED",49],",",["T_WHITESPACE","\n      ",49],")",")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_VARIABLE","$entity",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","language",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getId",52],"(",")",",",["T_WHITESPACE"," ",52],["T_STRING","LanguageInterface",52],["T_DOUBLE_COLON","::",52],["T_STRING","LANGCODE_NOT_SPECIFIED",52],",",["T_WHITESPACE"," ",52],["T_STRING","format_string",52],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Entity language not specified.'",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$entity_type",52],")",")",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertFalse",53],"(",["T_VARIABLE","$entity",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getTranslationLanguages",53],"(",["T_STRING","FALSE",53],")",",",["T_WHITESPACE"," ",53],["T_STRING","format_string",53],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: No translations are available'",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$entity_type",53],")",")",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Set the value in default language.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$entity",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","set",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","fieldName",56],",",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_LNUMBER","0",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'default value'",56],")",")",")",";",["T_WHITESPACE","\n    ",56],["T_COMMENT","\/\/ Get the value.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$field",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$entity",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getTranslation",58],"(",["T_STRING","LanguageInterface",58],["T_DOUBLE_COLON","::",58],["T_STRING","LANGCODE_DEFAULT",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","get",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","fieldName",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertEqual",59],"(",["T_VARIABLE","$field",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","value",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'default value'",59],",",["T_WHITESPACE"," ",59],["T_STRING","format_string",59],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Untranslated value retrieved.'",59],",",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$entity_type",59],")",")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertEqual",60],"(",["T_VARIABLE","$field",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getLangcode",60],"(",")",",",["T_WHITESPACE"," ",60],["T_STRING","LanguageInterface",60],["T_DOUBLE_COLON","::",60],["T_STRING","LANGCODE_NOT_SPECIFIED",60],",",["T_WHITESPACE"," ",60],["T_STRING","format_string",60],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Field object has the expected langcode.'",60],",",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$entity_type",60],")",")",")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Try to get add a translation to language neutral entity.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$message",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Adding a translation to a language-neutral entity results in an error.'",63],";",["T_WHITESPACE","\n    ",63],["T_TRY","try",64],["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$entity",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","addTranslation",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","langcodes",65],"[",["T_LNUMBER","1",65],"]",")",";",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","fail",66],"(",["T_VARIABLE","$message",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_CATCH","catch",68],["T_WHITESPACE"," ",68],"(",["T_NS_SEPARATOR","\\",68],["T_STRING","InvalidArgumentException",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$e",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","pass",69],"(",["T_VARIABLE","$message",69],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Now, make the entity language-specific by assigning a language and test\n",72],["T_WHITESPACE","    ",73],["T_COMMENT","\/\/ translating it.\n",73],["T_WHITESPACE","    ",74],["T_VARIABLE","$default_langcode",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","langcodes",74],"[",["T_LNUMBER","0",74],"]",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$entity",75],["T_OBJECT_OPERATOR","->",75],"{",["T_VARIABLE","$langcode_key",75],"}",["T_OBJECT_OPERATOR","->",75],["T_STRING","value",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$default_langcode",75],";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$entity",76],["T_OBJECT_OPERATOR","->",76],"{",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","fieldName",76],"}",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertEqual",77],"(",["T_VARIABLE","$entity",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","language",77],"(",")",",",["T_WHITESPACE"," ",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Drupal",77],["T_DOUBLE_COLON","::",77],["T_STRING","languageManager",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","getLanguage",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","langcodes",77],"[",["T_LNUMBER","0",77],"]",")",",",["T_WHITESPACE"," ",77],["T_STRING","format_string",77],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Entity language retrieved.'",77],",",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$entity_type",77],")",")",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertFalse",78],"(",["T_VARIABLE","$entity",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getTranslationLanguages",78],"(",["T_STRING","FALSE",78],")",",",["T_WHITESPACE"," ",78],["T_STRING","format_string",78],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: No translations are available'",78],",",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$entity_type",78],")",")",")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Set the value in default language.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$entity",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","set",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","fieldName",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_LNUMBER","0",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'default value'",81],")",")",")",";",["T_WHITESPACE","\n    ",81],["T_COMMENT","\/\/ Get the value.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$field",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$entity",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","fieldName",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertEqual",84],"(",["T_VARIABLE","$field",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","value",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'default value'",84],",",["T_WHITESPACE"," ",84],["T_STRING","format_string",84],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Untranslated value retrieved.'",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$entity_type",84],")",")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEqual",85],"(",["T_VARIABLE","$field",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getLangcode",85],"(",")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$default_langcode",85],",",["T_WHITESPACE"," ",85],["T_STRING","format_string",85],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Field object has the expected langcode.'",85],",",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$entity_type",85],")",")",")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Set a translation.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$entity",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","addTranslation",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","langcodes",88],"[",["T_LNUMBER","1",88],"]",")",["T_OBJECT_OPERATOR","->",88],["T_STRING","set",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","fieldName",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_LNUMBER","0",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'translation 1'",88],")",")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$field",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$entity",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getTranslation",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","langcodes",89],"[",["T_LNUMBER","1",89],"]",")",["T_OBJECT_OPERATOR","->",89],"{",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","fieldName",89],"}",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertEqual",90],"(",["T_VARIABLE","$field",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","value",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'translation 1'",90],",",["T_WHITESPACE"," ",90],["T_STRING","format_string",90],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Translated value set.'",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$entity_type",90],")",")",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertEqual",91],"(",["T_VARIABLE","$field",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getLangcode",91],"(",")",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","langcodes",91],"[",["T_LNUMBER","1",91],"]",",",["T_WHITESPACE"," ",91],["T_STRING","format_string",91],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Field object has the expected langcode.'",91],",",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$entity_type",91],")",")",")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Make sure the untranslated value stays.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$field",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$entity",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","fieldName",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertEqual",95],"(",["T_VARIABLE","$field",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","value",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'default value'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'Untranslated value stays.'",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEqual",96],"(",["T_VARIABLE","$field",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getLangcode",96],"(",")",",",["T_WHITESPACE"," ",96],["T_VARIABLE","$default_langcode",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'Untranslated value has the expected langcode.'",96],")",";",["T_WHITESPACE","\n\n    ",96],["T_VARIABLE","$translations",98],"[",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","langcodes",98],"[",["T_LNUMBER","1",98],"]","]",["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_NS_SEPARATOR","\\",98],["T_STRING","Drupal",98],["T_DOUBLE_COLON","::",98],["T_STRING","languageManager",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getLanguage",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","langcodes",98],"[",["T_LNUMBER","1",98],"]",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_VARIABLE","$entity",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getTranslationLanguages",99],"(",["T_STRING","FALSE",99],")",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$translations",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Translations retrieved.'",99],")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Try to get a value using a language code for a non-existing translation.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$message",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Getting a non existing translation results in an error.'",102],";",["T_WHITESPACE","\n    ",102],["T_TRY","try",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$entity",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getTranslation",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","langcodes",104],"[",["T_LNUMBER","2",104],"]",")",["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","fieldName",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","value",104],";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","fail",105],"(",["T_VARIABLE","$message",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n    ",106],["T_CATCH","catch",107],["T_WHITESPACE"," ",107],"(",["T_NS_SEPARATOR","\\",107],["T_STRING","InvalidArgumentException",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$e",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","pass",108],"(",["T_VARIABLE","$message",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_COMMENT","\/\/ Try to get a not available translation.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertNull",112],"(",["T_VARIABLE","$entity",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","addTranslation",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","langcodes",112],"[",["T_LNUMBER","2",112],"]",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","get",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fieldName",112],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","value",112],",",["T_WHITESPACE"," ",112],["T_STRING","format_string",112],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: A translation that is not available is NULL.'",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$entity_type",112],")",")",")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Try to get a value using an invalid language code.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$message",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Getting an invalid translation results in an error.'",115],";",["T_WHITESPACE","\n    ",115],["T_TRY","try",116],["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$entity",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getTranslation",117],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid'",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","get",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","fieldName",117],")",["T_OBJECT_OPERATOR","->",117],["T_STRING","value",117],";",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","fail",118],"(",["T_VARIABLE","$message",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n    ",119],["T_CATCH","catch",120],["T_WHITESPACE"," ",120],"(",["T_NS_SEPARATOR","\\",120],["T_STRING","InvalidArgumentException",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$e",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","pass",121],"(",["T_VARIABLE","$message",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Try to set a value using an invalid language code.\n",124],["T_WHITESPACE","    ",125],["T_TRY","try",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getTranslation",126],"(",["T_CONSTANT_ENCAPSED_STRING","'invalid'",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","set",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","fieldName",126],",",["T_WHITESPACE"," ",126],["T_STRING","NULL",126],")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","fail",127],"(",["T_STRING","format_string",127],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Setting a translation for an invalid language throws an exception.'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$entity_type",127],")",")",")",";",["T_WHITESPACE","\n    ",127],"}",["T_WHITESPACE","\n    ",128],["T_CATCH","catch",129],["T_WHITESPACE"," ",129],"(",["T_NS_SEPARATOR","\\",129],["T_STRING","InvalidArgumentException",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$e",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","pass",130],"(",["T_STRING","format_string",130],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Setting a translation for an invalid language throws an exception.'",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$entity_type",130],")",")",")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Set the value in default language.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$field_name",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'field_test_text'",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$entity",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getTranslation",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","langcodes",135],"[",["T_LNUMBER","1",135],"]",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","set",135],"(",["T_VARIABLE","$field_name",135],",",["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_LNUMBER","0",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_ARRAY","array",135],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'default value2'",135],")",")",")",";",["T_WHITESPACE","\n    ",135],["T_COMMENT","\/\/ Get the value.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$field",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$entity",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","get",137],"(",["T_VARIABLE","$field_name",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertEqual",138],"(",["T_VARIABLE","$field",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","value",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'default value2'",138],",",["T_WHITESPACE"," ",138],["T_STRING","format_string",138],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Untranslated value set into a translation in non-strict mode.'",138],",",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$entity_type",138],")",")",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEqual",139],"(",["T_VARIABLE","$field",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getLangcode",139],"(",")",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$default_langcode",139],",",["T_WHITESPACE"," ",139],["T_STRING","format_string",139],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Field object has the expected langcode.'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$entity_type",139],")",")",")",";",["T_WHITESPACE","\n  ",139],"}",["T_WHITESPACE","\n\n  ",140],["T_DOC_COMMENT","\/**\n   * Tests multilingual properties.\n   *\/",142],["T_WHITESPACE","\n  ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","testMultilingualProperties",145],"(",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_COMMENT","\/\/ Test all entity variations with data table support.\n",146],["T_WHITESPACE","    ",147],["T_FOREACH","foreach",147],["T_WHITESPACE"," ",147],"(",["T_STRING","entity_test_entity_types",147],"(",["T_STRING","ENTITY_TEST_TYPES_MULTILINGUAL",147],")",["T_WHITESPACE"," ",147],["T_AS","as",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$entity_type",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","doTestMultilingualProperties",148],"(",["T_VARIABLE","$entity_type",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n  ",149],"}",["T_WHITESPACE","\n\n  ",150],["T_DOC_COMMENT","\/**\n   * Executes the multilingual property tests for the given entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",152],["T_WHITESPACE","\n  ",157],["T_PROTECTED","protected",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","doTestMultilingualProperties",158],"(",["T_VARIABLE","$entity_type",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$langcode_key",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","entityManager",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getDefinition",159],"(",["T_VARIABLE","$entity_type",159],")",["T_OBJECT_OPERATOR","->",159],["T_STRING","getKey",159],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$default_langcode_key",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","entityManager",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getDefinition",160],"(",["T_VARIABLE","$entity_type",160],")",["T_OBJECT_OPERATOR","->",160],["T_STRING","getKey",160],"(",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$name",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","randomMachineName",161],"(",")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$uid",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","mt_rand",162],"(",["T_LNUMBER","0",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","127",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$langcode",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","langcodes",163],"[",["T_LNUMBER","0",163],"]",";",["T_WHITESPACE","\n\n    ",163],["T_COMMENT","\/\/ Create a language neutral entity and check that properties are stored\n",165],["T_WHITESPACE","    ",166],["T_COMMENT","\/\/ as language neutral.\n",166],["T_WHITESPACE","    ",167],["T_VARIABLE","$storage",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","container",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","get",167],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",167],")",["T_WHITESPACE","\n      ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","getStorage",168],"(",["T_VARIABLE","$entity_type",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$entity",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$storage",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","create",169],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$name",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'user_id'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$uid",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$langcode_key",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_STRING","LanguageInterface",169],["T_DOUBLE_COLON","::",169],["T_STRING","LANGCODE_NOT_SPECIFIED",169],"]",")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$entity",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","save",170],"(",")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$entity",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$storage",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","load",171],"(",["T_VARIABLE","$entity",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],"(",")",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$default_langcode",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$entity",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","language",172],"(",")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getId",172],"(",")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertEqual",173],"(",["T_VARIABLE","$default_langcode",173],",",["T_WHITESPACE"," ",173],["T_STRING","LanguageInterface",173],["T_DOUBLE_COLON","::",173],["T_STRING","LANGCODE_NOT_SPECIFIED",173],",",["T_WHITESPACE"," ",173],["T_STRING","format_string",173],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Entity created as language neutral.'",173],",",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$entity_type",173],")",")",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$field",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$entity",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getTranslation",174],"(",["T_STRING","LanguageInterface",174],["T_DOUBLE_COLON","::",174],["T_STRING","LANGCODE_DEFAULT",174],")",["T_OBJECT_OPERATOR","->",174],["T_STRING","get",174],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertEqual",175],"(",["T_VARIABLE","$name",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$field",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","value",175],",",["T_WHITESPACE"," ",175],["T_STRING","format_string",175],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity name has been correctly stored as language neutral.'",175],",",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$entity_type",175],")",")",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_VARIABLE","$default_langcode",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$field",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getLangcode",176],"(",")",",",["T_WHITESPACE"," ",176],["T_STRING","format_string",176],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The field object has the expect langcode.'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$entity_type",176],")",")",")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertEqual",177],"(",["T_VARIABLE","$uid",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$entity",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getTranslation",177],"(",["T_STRING","LanguageInterface",177],["T_DOUBLE_COLON","::",177],["T_STRING","LANGCODE_DEFAULT",177],")",["T_OBJECT_OPERATOR","->",177],["T_STRING","get",177],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",177],")",["T_OBJECT_OPERATOR","->",177],["T_STRING","target_id",177],",",["T_WHITESPACE"," ",177],["T_STRING","format_string",177],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity author has been correctly stored as language neutral.'",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$entity_type",177],")",")",")",";",["T_WHITESPACE","\n\n    ",177],["T_VARIABLE","$translation",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$entity",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getTranslation",179],"(",["T_STRING","LanguageInterface",179],["T_DOUBLE_COLON","::",179],["T_STRING","LANGCODE_DEFAULT",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$field",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$translation",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","get",180],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertEqual",181],"(",["T_VARIABLE","$name",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$field",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","value",181],",",["T_WHITESPACE"," ",181],["T_STRING","format_string",181],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity name defaults to neutral language.'",181],",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$entity_type",181],")",")",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertEqual",182],"(",["T_VARIABLE","$default_langcode",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$field",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getLangcode",182],"(",")",",",["T_WHITESPACE"," ",182],["T_STRING","format_string",182],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The field object has the expect langcode.'",182],",",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$entity_type",182],")",")",")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertEqual",183],"(",["T_VARIABLE","$uid",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$translation",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","get",183],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",183],")",["T_OBJECT_OPERATOR","->",183],["T_STRING","target_id",183],",",["T_WHITESPACE"," ",183],["T_STRING","format_string",183],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity author defaults to neutral language.'",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$entity_type",183],")",")",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$field",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$entity",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","get",184],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertEqual",185],"(",["T_VARIABLE","$name",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$field",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","value",185],",",["T_WHITESPACE"," ",185],["T_STRING","format_string",185],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity name can be retrieved without specifying a language.'",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$entity_type",185],")",")",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertEqual",186],"(",["T_VARIABLE","$default_langcode",186],",",["T_WHITESPACE"," ",186],["T_VARIABLE","$field",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getLangcode",186],"(",")",",",["T_WHITESPACE"," ",186],["T_STRING","format_string",186],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The field object has the expect langcode.'",186],",",["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$entity_type",186],")",")",")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertEqual",187],"(",["T_VARIABLE","$uid",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$entity",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","get",187],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","target_id",187],",",["T_WHITESPACE"," ",187],["T_STRING","format_string",187],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity author can be retrieved without specifying a language.'",187],",",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$entity_type",187],")",")",")",";",["T_WHITESPACE","\n\n    ",187],["T_COMMENT","\/\/ Create a language-aware entity and check that properties are stored\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ as language-aware.\n",190],["T_WHITESPACE","    ",191],["T_VARIABLE","$entity",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","container",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","get",191],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",191],")",["T_WHITESPACE","\n      ",191],["T_OBJECT_OPERATOR","->",192],["T_STRING","getStorage",192],"(",["T_VARIABLE","$entity_type",192],")",["T_WHITESPACE","\n      ",192],["T_OBJECT_OPERATOR","->",193],["T_STRING","create",193],"(",["T_ARRAY","array",193],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$name",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'user_id'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$uid",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$langcode_key",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$langcode",193],")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$entity",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","save",194],"(",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$entity",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$storage",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","load",195],"(",["T_VARIABLE","$entity",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","id",195],"(",")",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$default_langcode",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$entity",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","language",196],"(",")",["T_OBJECT_OPERATOR","->",196],["T_STRING","getId",196],"(",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertEqual",197],"(",["T_VARIABLE","$default_langcode",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$langcode",197],",",["T_WHITESPACE"," ",197],["T_STRING","format_string",197],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Entity created as language specific.'",197],",",["T_WHITESPACE"," ",197],["T_ARRAY","array",197],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entity_type",197],")",")",")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$field",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$entity",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTranslation",198],"(",["T_VARIABLE","$langcode",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","get",198],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",198],")",";",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","assertEqual",199],"(",["T_VARIABLE","$name",199],",",["T_WHITESPACE"," ",199],["T_VARIABLE","$field",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","value",199],",",["T_WHITESPACE"," ",199],["T_STRING","format_string",199],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity name has been correctly stored as a language-aware property.'",199],",",["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_VARIABLE","$entity_type",199],")",")",")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertEqual",200],"(",["T_VARIABLE","$default_langcode",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$field",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getLangcode",200],"(",")",",",["T_WHITESPACE"," ",200],["T_STRING","format_string",200],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The field object has the expect langcode.'",200],",",["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$entity_type",200],")",")",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertEqual",201],"(",["T_VARIABLE","$uid",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$entity",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getTranslation",201],"(",["T_VARIABLE","$langcode",201],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","get",201],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",201],")",["T_OBJECT_OPERATOR","->",201],["T_STRING","target_id",201],",",["T_WHITESPACE"," ",201],["T_STRING","format_string",201],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity author has been correctly stored as a language-aware property.'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$entity_type",201],")",")",")",";",["T_WHITESPACE","\n\n    ",201],["T_COMMENT","\/\/ Create property translations.\n",203],["T_WHITESPACE","    ",204],["T_VARIABLE","$properties",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",")",";",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$default_langcode",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_VARIABLE","$langcode",205],";",["T_WHITESPACE","\n    ",205],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","langcodes",206],["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$langcode",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n      ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$langcode",207],["T_WHITESPACE"," ",207],["T_IS_NOT_EQUAL","!=",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$default_langcode",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$properties",208],"[",["T_VARIABLE","$langcode",208],"]",["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],"(",["T_WHITESPACE","\n          ",208],["T_CONSTANT_ENCAPSED_STRING","'name'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",["T_LNUMBER","0",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","randomMachineName",209],"(",")",")",",",["T_WHITESPACE","\n          ",209],["T_CONSTANT_ENCAPSED_STRING","'user_id'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_LNUMBER","0",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_STRING","mt_rand",210],"(",["T_LNUMBER","128",210],",",["T_WHITESPACE"," ",210],["T_LNUMBER","256",210],")",")",",",["T_WHITESPACE","\n        ",210],")",";",["T_WHITESPACE","\n      ",211],"}",["T_WHITESPACE","\n      ",212],["T_ELSE","else",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$properties",214],"[",["T_VARIABLE","$langcode",214],"]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n          ",214],["T_CONSTANT_ENCAPSED_STRING","'name'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",["T_LNUMBER","0",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$name",215],")",",",["T_WHITESPACE","\n          ",215],["T_CONSTANT_ENCAPSED_STRING","'user_id'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_LNUMBER","0",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$uid",216],")",",",["T_WHITESPACE","\n        ",216],")",";",["T_WHITESPACE","\n      ",217],"}",["T_WHITESPACE","\n      ",218],["T_VARIABLE","$translation",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$entity",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","hasTranslation",219],"(",["T_VARIABLE","$langcode",219],")",["T_WHITESPACE"," ",219],"?",["T_WHITESPACE"," ",219],["T_VARIABLE","$entity",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getTranslation",219],"(",["T_VARIABLE","$langcode",219],")",["T_WHITESPACE"," ",219],":",["T_WHITESPACE"," ",219],["T_VARIABLE","$entity",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","addTranslation",219],"(",["T_VARIABLE","$langcode",219],")",";",["T_WHITESPACE","\n      ",219],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$properties",220],"[",["T_VARIABLE","$langcode",220],"]",["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$field_name",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$values",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$translation",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","set",221],"(",["T_VARIABLE","$field_name",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$values",221],")",";",["T_WHITESPACE","\n      ",221],"}",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$entity",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","save",224],"(",")",";",["T_WHITESPACE","\n\n    ",224],["T_COMMENT","\/\/ Check that property translation were correctly stored.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$entity",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$storage",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","load",227],"(",["T_VARIABLE","$entity",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","id",227],"(",")",")",";",["T_WHITESPACE","\n    ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","langcodes",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$langcode",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n      ",228],["T_VARIABLE","$args",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_WHITESPACE","\n        ",229],["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$entity_type",230],",",["T_WHITESPACE","\n        ",230],["T_CONSTANT_ENCAPSED_STRING","'%langcode'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$langcode",231],",",["T_WHITESPACE","\n      ",231],")",";",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$field",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$entity",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getTranslation",233],"(",["T_VARIABLE","$langcode",233],")",["T_OBJECT_OPERATOR","->",233],["T_STRING","get",233],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",233],")",";",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","assertEqual",234],"(",["T_VARIABLE","$properties",234],"[",["T_VARIABLE","$langcode",234],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",234],"]","[",["T_LNUMBER","0",234],"]",",",["T_WHITESPACE"," ",234],["T_VARIABLE","$field",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","value",234],",",["T_WHITESPACE"," ",234],["T_STRING","format_string",234],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity name has been correctly stored for language %langcode.'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$args",234],")",")",";",["T_WHITESPACE","\n      ",234],["T_VARIABLE","$field_langcode",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$langcode",235],["T_WHITESPACE"," ",235],["T_IS_EQUAL","==",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$entity",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","language",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","getId",235],"(",")",")",["T_WHITESPACE"," ",235],"?",["T_WHITESPACE"," ",235],["T_VARIABLE","$default_langcode",235],["T_WHITESPACE"," ",235],":",["T_WHITESPACE"," ",235],["T_VARIABLE","$langcode",235],";",["T_WHITESPACE","\n      ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","assertEqual",236],"(",["T_VARIABLE","$field_langcode",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$field",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getLangcode",236],"(",")",",",["T_WHITESPACE"," ",236],["T_STRING","format_string",236],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The field object has the expected langcode  %langcode.'",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$args",236],")",")",";",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertEqual",237],"(",["T_VARIABLE","$properties",237],"[",["T_VARIABLE","$langcode",237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",237],"]","[",["T_LNUMBER","0",237],"]",",",["T_WHITESPACE"," ",237],["T_VARIABLE","$entity",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getTranslation",237],"(",["T_VARIABLE","$langcode",237],")",["T_OBJECT_OPERATOR","->",237],["T_STRING","get",237],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",237],")",["T_OBJECT_OPERATOR","->",237],["T_STRING","target_id",237],",",["T_WHITESPACE"," ",237],["T_STRING","format_string",237],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: The entity author has been correctly stored for language %langcode.'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$args",237],")",")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ Test query conditions (cache is reset at each call).\n",240],["T_WHITESPACE","    ",241],["T_VARIABLE","$translated_id",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_VARIABLE","$entity",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","id",241],"(",")",";",["T_WHITESPACE","\n    ",241],["T_COMMENT","\/\/ Create an additional entity with only the uid set. The uid for the\n",242],["T_WHITESPACE","    ",243],["T_COMMENT","\/\/ original language is the same of one used for a translation.\n",243],["T_WHITESPACE","    ",244],["T_VARIABLE","$langcode",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","langcodes",244],"[",["T_LNUMBER","1",244],"]",";",["T_WHITESPACE","\n    ",244],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityStorageInterface $storage *\/",245],["T_WHITESPACE","\n    ",245],["T_VARIABLE","$storage",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","container",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","get",246],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",246],")",["T_WHITESPACE","\n      ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","getStorage",247],"(",["T_VARIABLE","$entity_type",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$storage",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","create",248],"(","[",["T_WHITESPACE","\n        ",248],["T_CONSTANT_ENCAPSED_STRING","'user_id'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$properties",249],"[",["T_VARIABLE","$langcode",249],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",249],"]",",",["T_WHITESPACE","\n        ",249],["T_CONSTANT_ENCAPSED_STRING","'name'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'some name'",250],",",["T_WHITESPACE","\n        ",250],["T_VARIABLE","$langcode_key",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_STRING","LanguageInterface",251],["T_DOUBLE_COLON","::",251],["T_STRING","LANGCODE_NOT_SPECIFIED",251],",",["T_WHITESPACE","\n      ",251],"]",")",["T_WHITESPACE","\n      ",252],["T_OBJECT_OPERATOR","->",253],["T_STRING","save",253],"(",")",";",["T_WHITESPACE","\n\n    ",253],["T_VARIABLE","$entities",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$storage",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","loadMultiple",255],"(",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertEqual",256],"(",["T_STRING","count",256],"(",["T_VARIABLE","$entities",256],")",",",["T_WHITESPACE"," ",256],["T_LNUMBER","3",256],",",["T_WHITESPACE"," ",256],["T_STRING","format_string",256],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Three entities were created.'",256],",",["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$entity_type",256],")",")",")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$entities",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$storage",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","loadMultiple",257],"(","[",["T_VARIABLE","$translated_id",257],"]",")",";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","assertEqual",258],"(",["T_STRING","count",258],"(",["T_VARIABLE","$entities",258],")",",",["T_WHITESPACE"," ",258],["T_LNUMBER","1",258],",",["T_WHITESPACE"," ",258],["T_STRING","format_string",258],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity correctly loaded by id.'",258],",",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$entity_type",258],")",")",")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$entities",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$storage",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","loadByProperties",259],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",259],["T_WHITESPACE"," ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$name",259],"]",")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","assertEqual",260],"(",["T_STRING","count",260],"(",["T_VARIABLE","$entities",260],")",",",["T_WHITESPACE"," ",260],["T_LNUMBER","2",260],",",["T_WHITESPACE"," ",260],["T_STRING","format_string",260],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Two entities correctly loaded by name.'",260],",",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$entity_type",260],")",")",")",";",["T_WHITESPACE","\n    ",260],["T_COMMENT","\/\/ @todo The default language condition should go away in favor of an\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/ explicit parameter.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$entities",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$storage",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","loadByProperties",263],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$properties",263],"[",["T_VARIABLE","$langcode",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",263],"]","[",["T_LNUMBER","0",263],"]",",",["T_WHITESPACE"," ",263],["T_VARIABLE","$default_langcode_key",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_LNUMBER","0",263],"]",")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","assertEqual",264],"(",["T_STRING","count",264],"(",["T_VARIABLE","$entities",264],")",",",["T_WHITESPACE"," ",264],["T_LNUMBER","1",264],",",["T_WHITESPACE"," ",264],["T_STRING","format_string",264],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity correctly loaded by name translation.'",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$entity_type",264],")",")",")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$entities",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$storage",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","loadByProperties",265],"(","[",["T_VARIABLE","$langcode_key",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$default_langcode",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'name'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$name",265],"]",")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertEqual",266],"(",["T_STRING","count",266],"(",["T_VARIABLE","$entities",266],")",",",["T_WHITESPACE"," ",266],["T_LNUMBER","1",266],",",["T_WHITESPACE"," ",266],["T_STRING","format_string",266],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity correctly loaded by name and language.'",266],",",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$entity_type",266],")",")",")",";",["T_WHITESPACE","\n\n    ",266],["T_VARIABLE","$entities",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$storage",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","loadByProperties",268],"(","[",["T_VARIABLE","$langcode_key",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$langcode",268],",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'name'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$properties",268],"[",["T_VARIABLE","$langcode",268],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",268],"]","[",["T_LNUMBER","0",268],"]","]",")",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","assertEqual",269],"(",["T_STRING","count",269],"(",["T_VARIABLE","$entities",269],")",",",["T_WHITESPACE"," ",269],["T_LNUMBER","0",269],",",["T_WHITESPACE"," ",269],["T_STRING","format_string",269],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: No entity loaded by name translation specifying the translation language.'",269],",",["T_WHITESPACE"," ",269],["T_ARRAY","array",269],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$entity_type",269],")",")",")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$entities",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$storage",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","loadByProperties",270],"(","[",["T_VARIABLE","$langcode_key",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$langcode",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'name'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$properties",270],"[",["T_VARIABLE","$langcode",270],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",270],"]","[",["T_LNUMBER","0",270],"]",",",["T_WHITESPACE"," ",270],["T_VARIABLE","$default_langcode_key",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_LNUMBER","0",270],"]",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertEqual",271],"(",["T_STRING","count",271],"(",["T_VARIABLE","$entities",271],")",",",["T_WHITESPACE"," ",271],["T_LNUMBER","1",271],",",["T_WHITESPACE"," ",271],["T_STRING","format_string",271],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity loaded by name translation and language specifying to look for translations.'",271],",",["T_WHITESPACE"," ",271],["T_ARRAY","array",271],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$entity_type",271],")",")",")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$entities",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$storage",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","loadByProperties",272],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$properties",272],"[",["T_VARIABLE","$langcode",272],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",272],"]","[",["T_LNUMBER","0",272],"]",",",["T_WHITESPACE"," ",272],["T_VARIABLE","$default_langcode_key",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_STRING","NULL",272],"]",")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertEqual",273],"(",["T_STRING","count",273],"(",["T_VARIABLE","$entities",273],")",",",["T_WHITESPACE"," ",273],["T_LNUMBER","2",273],",",["T_WHITESPACE"," ",273],["T_STRING","format_string",273],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: Two entities loaded by uid without caring about property translatability.'",273],",",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$entity_type",273],")",")",")",";",["T_WHITESPACE","\n\n    ",273],["T_COMMENT","\/\/ Test property conditions and orders with multiple languages in the same\n",275],["T_WHITESPACE","    ",276],["T_COMMENT","\/\/ query.\n",276],["T_WHITESPACE","    ",277],["T_VARIABLE","$query",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_NS_SEPARATOR","\\",277],["T_STRING","Drupal",277],["T_DOUBLE_COLON","::",277],["T_STRING","entityQuery",277],"(",["T_VARIABLE","$entity_type",277],")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$group",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$query",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","andConditionGroup",278],"(",")",["T_WHITESPACE","\n      ",278],["T_OBJECT_OPERATOR","->",279],["T_STRING","condition",279],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$properties",279],"[",["T_VARIABLE","$default_langcode",279],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",279],"]","[",["T_LNUMBER","0",279],"]",",",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'='",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$default_langcode",279],")",["T_WHITESPACE","\n      ",279],["T_OBJECT_OPERATOR","->",280],["T_STRING","condition",280],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$properties",280],"[",["T_VARIABLE","$default_langcode",280],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",280],"]","[",["T_LNUMBER","0",280],"]",",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'='",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$default_langcode",280],")",";",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$result",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$query",281],["T_WHITESPACE","\n      ",281],["T_OBJECT_OPERATOR","->",282],["T_STRING","condition",282],"(",["T_VARIABLE","$group",282],")",["T_WHITESPACE","\n      ",282],["T_OBJECT_OPERATOR","->",283],["T_STRING","condition",283],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$properties",283],"[",["T_VARIABLE","$langcode",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",283],"]","[",["T_LNUMBER","0",283],"]",",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'='",283],",",["T_WHITESPACE"," ",283],["T_VARIABLE","$langcode",283],")",["T_WHITESPACE","\n      ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","execute",284],"(",")",";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertEqual",285],"(",["T_STRING","count",285],"(",["T_VARIABLE","$result",285],")",",",["T_WHITESPACE"," ",285],["T_LNUMBER","1",285],",",["T_WHITESPACE"," ",285],["T_STRING","format_string",285],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity loaded by name and uid using different language meta conditions.'",285],",",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$entity_type",285],")",")",")",";",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Test mixed property and field conditions.\n",287],["T_WHITESPACE","    ",288],["T_VARIABLE","$storage",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","resetCache",288],"(",["T_VARIABLE","$result",288],")",";",["T_WHITESPACE","\n    ",288],["T_VARIABLE","$entity",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_VARIABLE","$storage",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","load",289],"(",["T_STRING","reset",289],"(",["T_VARIABLE","$result",289],")",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$field_value",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","randomString",290],"(",")",";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$entity",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getTranslation",291],"(",["T_VARIABLE","$langcode",291],")",["T_OBJECT_OPERATOR","->",291],["T_STRING","set",291],"(",["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","fieldName",291],",",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",["T_ARRAY","array",291],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$field_value",291],")",")",")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$entity",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","save",292],"(",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$query",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_NS_SEPARATOR","\\",293],["T_STRING","Drupal",293],["T_DOUBLE_COLON","::",293],["T_STRING","entityQuery",293],"(",["T_VARIABLE","$entity_type",293],")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$default_langcode_group",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$query",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","andConditionGroup",294],"(",")",["T_WHITESPACE","\n      ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","condition",295],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$properties",295],"[",["T_VARIABLE","$default_langcode",295],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",295],"]","[",["T_LNUMBER","0",295],"]",",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'='",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$default_langcode",295],")",["T_WHITESPACE","\n      ",295],["T_OBJECT_OPERATOR","->",296],["T_STRING","condition",296],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$properties",296],"[",["T_VARIABLE","$default_langcode",296],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",296],"]","[",["T_LNUMBER","0",296],"]",",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'='",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$default_langcode",296],")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$langcode_group",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$query",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","andConditionGroup",297],"(",")",["T_WHITESPACE","\n      ",297],["T_OBJECT_OPERATOR","->",298],["T_STRING","condition",298],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$properties",298],"[",["T_VARIABLE","$langcode",298],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",298],"]","[",["T_LNUMBER","0",298],"]",",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'='",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$langcode",298],")",["T_WHITESPACE","\n      ",298],["T_OBJECT_OPERATOR","->",299],["T_STRING","condition",299],"(","\"",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","fieldName",299],["T_ENCAPSED_AND_WHITESPACE",".value",299],"\"",",",["T_WHITESPACE"," ",299],["T_VARIABLE","$field_value",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'='",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$langcode",299],")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$result",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$query",300],["T_WHITESPACE","\n      ",300],["T_OBJECT_OPERATOR","->",301],["T_STRING","condition",301],"(",["T_VARIABLE","$langcode_key",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$default_langcode",301],")",["T_WHITESPACE","\n      ",301],["T_OBJECT_OPERATOR","->",302],["T_STRING","condition",302],"(",["T_VARIABLE","$default_langcode_group",302],")",["T_WHITESPACE","\n      ",302],["T_OBJECT_OPERATOR","->",303],["T_STRING","condition",303],"(",["T_VARIABLE","$langcode_group",303],")",["T_WHITESPACE","\n      ",303],["T_OBJECT_OPERATOR","->",304],["T_STRING","execute",304],"(",")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","assertEqual",305],"(",["T_STRING","count",305],"(",["T_VARIABLE","$result",305],")",",",["T_WHITESPACE"," ",305],["T_LNUMBER","1",305],",",["T_WHITESPACE"," ",305],["T_STRING","format_string",305],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type: One entity loaded by name, uid and field value using different language meta conditions.'",305],",",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$entity_type",305],")",")",")",";",["T_WHITESPACE","\n  ",305],"}",["T_WHITESPACE","\n\n  ",306],["T_DOC_COMMENT","\/**\n   * Tests the Entity Translation API behavior.\n   *\/",308],["T_WHITESPACE","\n  ",310],["T_FUNCTION","function",311],["T_WHITESPACE"," ",311],["T_STRING","testEntityTranslationAPI",311],"(",")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n    ",311],["T_COMMENT","\/\/ Test all entity variations with data table support.\n",312],["T_WHITESPACE","    ",313],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_STRING","entity_test_entity_types",313],"(",["T_STRING","ENTITY_TEST_TYPES_MULTILINGUAL",313],")",["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$entity_type",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n      ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","doTestEntityTranslationAPI",314],"(",["T_VARIABLE","$entity_type",314],")",";",["T_WHITESPACE","\n    ",314],"}",["T_WHITESPACE","\n  ",315],"}",["T_WHITESPACE","\n\n  ",316],["T_DOC_COMMENT","\/**\n   * Executes the Entity Translation API tests for the given entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",318],["T_WHITESPACE","\n  ",323],["T_PROTECTED","protected",324],["T_WHITESPACE"," ",324],["T_FUNCTION","function",324],["T_WHITESPACE"," ",324],["T_STRING","doTestEntityTranslationAPI",324],"(",["T_VARIABLE","$entity_type",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n    ",324],["T_VARIABLE","$default_langcode",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","langcodes",325],"[",["T_LNUMBER","0",325],"]",";",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$langcode",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","langcodes",326],"[",["T_LNUMBER","1",326],"]",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$langcode_key",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","entityManager",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getDefinition",327],"(",["T_VARIABLE","$entity_type",327],")",["T_OBJECT_OPERATOR","->",327],["T_STRING","getKey",327],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",327],")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$default_langcode_key",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","entityManager",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getDefinition",328],"(",["T_VARIABLE","$entity_type",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","getKey",328],"(",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",328],")",";",["T_WHITESPACE","\n\n    ",328],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",330],["T_WHITESPACE","\n    ",330],["T_VARIABLE","$entity",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","entityManager",331],["T_WHITESPACE","\n      ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","getStorage",332],"(",["T_VARIABLE","$entity_type",332],")",["T_WHITESPACE","\n      ",332],["T_OBJECT_OPERATOR","->",333],["T_STRING","create",333],"(",["T_ARRAY","array",333],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","randomMachineName",333],"(",")",",",["T_WHITESPACE"," ",333],["T_VARIABLE","$langcode_key",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_STRING","LanguageInterface",333],["T_DOUBLE_COLON","::",333],["T_STRING","LANGCODE_NOT_SPECIFIED",333],")",")",";",["T_WHITESPACE","\n\n    ",333],["T_VARIABLE","$entity",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","save",335],"(",")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$hooks",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getHooksInfo",336],"(",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","assertFalse",337],"(",["T_VARIABLE","$hooks",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'No entity translation hooks are fired when creating an entity.'",337],")",";",["T_WHITESPACE","\n\n    ",337],["T_COMMENT","\/\/ Verify that we obtain the entity object itself when we attempt to\n",339],["T_WHITESPACE","    ",340],["T_COMMENT","\/\/ retrieve a translation referring to it.\n",340],["T_WHITESPACE","    ",341],["T_VARIABLE","$translation",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$entity",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getTranslation",341],"(",["T_STRING","LanguageInterface",341],["T_DOUBLE_COLON","::",341],["T_STRING","LANGCODE_NOT_SPECIFIED",341],")",";",["T_WHITESPACE","\n    ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","assertFalse",342],"(",["T_VARIABLE","$translation",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","isNewTranslation",342],"(",")",",",["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","'Existing translations are not marked as new.'",342],")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","assertIdentical",343],"(",["T_VARIABLE","$entity",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$translation",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'The translation object corresponding to a non-default language is the entity object itself when the entity is language-neutral.'",343],")",";",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$entity",344],["T_OBJECT_OPERATOR","->",344],"{",["T_VARIABLE","$langcode_key",344],"}",["T_OBJECT_OPERATOR","->",344],["T_STRING","value",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$default_langcode",344],";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$translation",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$entity",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getTranslation",345],"(",["T_VARIABLE","$default_langcode",345],")",";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","assertIdentical",346],"(",["T_VARIABLE","$entity",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$translation",346],",",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'The translation object corresponding to the default language (explicit) is the entity object itself.'",346],")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$translation",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$entity",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getTranslation",347],"(",["T_STRING","LanguageInterface",347],["T_DOUBLE_COLON","::",347],["T_STRING","LANGCODE_DEFAULT",347],")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","assertIdentical",348],"(",["T_VARIABLE","$entity",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$translation",348],",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'The translation object corresponding to the default language (implicit) is the entity object itself.'",348],")",";",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","assertTrue",349],"(",["T_VARIABLE","$entity",349],["T_OBJECT_OPERATOR","->",349],"{",["T_VARIABLE","$default_langcode_key",349],"}",["T_OBJECT_OPERATOR","->",349],["T_STRING","value",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'The translation object is the default one.'",349],")",";",["T_WHITESPACE","\n\n    ",349],["T_COMMENT","\/\/ Verify that trying to retrieve a translation for a locked language when\n",351],["T_WHITESPACE","    ",352],["T_COMMENT","\/\/ the entity is language-aware causes an exception to be thrown.\n",352],["T_WHITESPACE","    ",353],["T_VARIABLE","$message",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'A language-neutral translation cannot be retrieved.'",353],";",["T_WHITESPACE","\n    ",353],["T_TRY","try",354],["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n      ",354],["T_VARIABLE","$entity",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getTranslation",355],"(",["T_STRING","LanguageInterface",355],["T_DOUBLE_COLON","::",355],["T_STRING","LANGCODE_NOT_SPECIFIED",355],")",";",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","fail",356],"(",["T_VARIABLE","$message",356],")",";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n    ",357],["T_CATCH","catch",358],["T_WHITESPACE"," ",358],"(",["T_NS_SEPARATOR","\\",358],["T_STRING","LogicException",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$e",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n      ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","pass",359],"(",["T_VARIABLE","$message",359],")",";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_COMMENT","\/\/ Create a translation and verify that the translation object and the\n",362],["T_WHITESPACE","    ",363],["T_COMMENT","\/\/ original object behave independently.\n",363],["T_WHITESPACE","    ",364],["T_VARIABLE","$name",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$default_langcode",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'_'",364],["T_WHITESPACE"," ",364],".",["T_WHITESPACE"," ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","randomMachineName",364],"(",")",";",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$entity",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","name",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","value",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_VARIABLE","$name",365],";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$name_translated",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$langcode",366],["T_WHITESPACE"," ",366],".",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'_'",366],["T_WHITESPACE"," ",366],".",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","randomMachineName",366],"(",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$translation",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$entity",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","addTranslation",367],"(",["T_VARIABLE","$langcode",367],")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertTrue",368],"(",["T_VARIABLE","$translation",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","isNewTranslation",368],"(",")",",",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","'Newly added translations are marked as new.'",368],")",";",["T_WHITESPACE","\n    ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","assertNotIdentical",369],"(",["T_VARIABLE","$entity",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$translation",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'The entity and the translation object differ from one another.'",369],")",";",["T_WHITESPACE","\n    ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","assertTrue",370],"(",["T_VARIABLE","$entity",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","hasTranslation",370],"(",["T_VARIABLE","$langcode",370],")",",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'The new translation exists.'",370],")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","assertEqual",371],"(",["T_VARIABLE","$translation",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","language",371],"(",")",["T_OBJECT_OPERATOR","->",371],["T_STRING","getId",371],"(",")",",",["T_WHITESPACE"," ",371],["T_VARIABLE","$langcode",371],",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'The translation language matches the specified one.'",371],")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","assertEqual",372],"(",["T_VARIABLE","$translation",372],["T_OBJECT_OPERATOR","->",372],"{",["T_VARIABLE","$langcode_key",372],"}",["T_OBJECT_OPERATOR","->",372],["T_STRING","value",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$langcode",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'The translation field language value matches the specified one.'",372],")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertFalse",373],"(",["T_VARIABLE","$translation",373],["T_OBJECT_OPERATOR","->",373],"{",["T_VARIABLE","$default_langcode_key",373],"}",["T_OBJECT_OPERATOR","->",373],["T_STRING","value",373],",",["T_WHITESPACE"," ",373],["T_CONSTANT_ENCAPSED_STRING","'The translation object is not the default one.'",373],")",";",["T_WHITESPACE","\n    ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","assertEqual",374],"(",["T_VARIABLE","$translation",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","getUntranslated",374],"(",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","language",374],"(",")",["T_OBJECT_OPERATOR","->",374],["T_STRING","getId",374],"(",")",",",["T_WHITESPACE"," ",374],["T_VARIABLE","$default_langcode",374],",",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'The original language can still be retrieved.'",374],")",";",["T_WHITESPACE","\n    ",374],["T_VARIABLE","$translation",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","name",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","value",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$name_translated",375],";",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertEqual",376],"(",["T_VARIABLE","$entity",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","name",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","value",376],",",["T_WHITESPACE"," ",376],["T_VARIABLE","$name",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'The original name is retained after setting a translated value.'",376],")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$entity",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","name",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","value",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$name",377],";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","assertEqual",378],"(",["T_VARIABLE","$translation",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","name",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","value",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$name_translated",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'The translated name is retained after setting the original value.'",378],")",";",["T_WHITESPACE","\n\n    ",378],["T_COMMENT","\/\/ Save the translation and check that the expected hooks are fired.\n",380],["T_WHITESPACE","    ",381],["T_VARIABLE","$translation",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","save",381],"(",")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$hooks",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getHooksInfo",382],"(",")",";",["T_WHITESPACE","\n\n    ",382],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","assertEqual",384],"(",["T_VARIABLE","$hooks",384],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_create'",384],"]",",",["T_WHITESPACE"," ",384],["T_VARIABLE","$langcode",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation creation hook has fired.'",384],")",";",["T_WHITESPACE","\n    ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","assertEqual",385],"(",["T_VARIABLE","$hooks",385],"[",["T_VARIABLE","$entity_type",385],["T_WHITESPACE"," ",385],".",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'_translation_create'",385],"]",",",["T_WHITESPACE"," ",385],["T_VARIABLE","$langcode",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation creation hook has fired.'",385],")",";",["T_WHITESPACE","\n\n    ",385],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","assertEqual",387],"(",["T_VARIABLE","$hooks",387],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_insert'",387],"]",",",["T_WHITESPACE"," ",387],["T_VARIABLE","$langcode",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation insertion hook has fired.'",387],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","assertEqual",388],"(",["T_VARIABLE","$hooks",388],"[",["T_VARIABLE","$entity_type",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'_translation_insert'",388],"]",",",["T_WHITESPACE"," ",388],["T_VARIABLE","$langcode",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation insertion hook has fired.'",388],")",";",["T_WHITESPACE","\n\n    ",388],["T_COMMENT","\/\/ Verify that changing translation language causes an exception to be\n",390],["T_WHITESPACE","    ",391],["T_COMMENT","\/\/ thrown.\n",391],["T_WHITESPACE","    ",392],["T_VARIABLE","$message",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'The translation language cannot be changed.'",392],";",["T_WHITESPACE","\n    ",392],["T_TRY","try",393],["T_WHITESPACE"," ",393],"{",["T_WHITESPACE","\n      ",393],["T_VARIABLE","$translation",394],["T_OBJECT_OPERATOR","->",394],"{",["T_VARIABLE","$langcode_key",394],"}",["T_OBJECT_OPERATOR","->",394],["T_STRING","value",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","langcodes",394],"[",["T_LNUMBER","2",394],"]",";",["T_WHITESPACE","\n      ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","fail",395],"(",["T_VARIABLE","$message",395],")",";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n    ",396],["T_CATCH","catch",397],["T_WHITESPACE"," ",397],"(",["T_NS_SEPARATOR","\\",397],["T_STRING","LogicException",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$e",397],")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n      ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","pass",398],"(",["T_VARIABLE","$message",398],")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n\n    ",399],["T_COMMENT","\/\/ Verify that reassigning the same translation language is allowed.\n",401],["T_WHITESPACE","    ",402],["T_VARIABLE","$message",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'The translation language can be reassigned the same value.'",402],";",["T_WHITESPACE","\n    ",402],["T_TRY","try",403],["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n      ",403],["T_VARIABLE","$translation",404],["T_OBJECT_OPERATOR","->",404],"{",["T_VARIABLE","$langcode_key",404],"}",["T_OBJECT_OPERATOR","->",404],["T_STRING","value",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$langcode",404],";",["T_WHITESPACE","\n      ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","pass",405],"(",["T_VARIABLE","$message",405],")",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n    ",406],["T_CATCH","catch",407],["T_WHITESPACE"," ",407],"(",["T_NS_SEPARATOR","\\",407],["T_STRING","LogicException",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$e",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n      ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","fail",408],"(",["T_VARIABLE","$message",408],")",";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_COMMENT","\/\/ Verify that changing the default translation flag causes an exception to\n",411],["T_WHITESPACE","    ",412],["T_COMMENT","\/\/ be thrown.\n",412],["T_WHITESPACE","    ",413],["T_FOREACH","foreach",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$entity",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getTranslationLanguages",413],"(",")",["T_WHITESPACE"," ",413],["T_AS","as",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$t_langcode",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$language",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$translation",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$entity",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getTranslation",414],"(",["T_VARIABLE","$t_langcode",414],")",";",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$default",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$translation",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","isDefaultTranslation",415],"(",")",";",["T_WHITESPACE","\n\n      ",415],["T_VARIABLE","$message",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","'The default translation flag can be reassigned the same value.'",417],";",["T_WHITESPACE","\n      ",417],["T_TRY","try",418],["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n        ",418],["T_VARIABLE","$translation",419],["T_OBJECT_OPERATOR","->",419],"{",["T_VARIABLE","$default_langcode_key",419],"}",["T_OBJECT_OPERATOR","->",419],["T_STRING","value",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$default",419],";",["T_WHITESPACE","\n        ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","pass",420],"(",["T_VARIABLE","$message",420],")",";",["T_WHITESPACE","\n      ",420],"}",["T_WHITESPACE","\n      ",421],["T_CATCH","catch",422],["T_WHITESPACE"," ",422],"(",["T_NS_SEPARATOR","\\",422],["T_STRING","LogicException",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$e",422],")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n        ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","fail",423],"(",["T_VARIABLE","$message",423],")",";",["T_WHITESPACE","\n      ",423],"}",["T_WHITESPACE","\n\n      ",424],["T_VARIABLE","$message",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'The default translation flag cannot be changed.'",426],";",["T_WHITESPACE","\n      ",426],["T_TRY","try",427],["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$translation",428],["T_OBJECT_OPERATOR","->",428],"{",["T_VARIABLE","$default_langcode_key",428],"}",["T_OBJECT_OPERATOR","->",428],["T_STRING","value",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],"!",["T_VARIABLE","$default",428],";",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","fail",429],"(",["T_VARIABLE","$message",429],")",";",["T_WHITESPACE","\n      ",429],"}",["T_WHITESPACE","\n      ",430],["T_CATCH","catch",431],["T_WHITESPACE"," ",431],"(",["T_NS_SEPARATOR","\\",431],["T_STRING","LogicException",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$e",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n        ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","pass",432],"(",["T_VARIABLE","$message",432],")",";",["T_WHITESPACE","\n      ",432],"}",["T_WHITESPACE","\n\n      ",433],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","assertEqual",435],"(",["T_VARIABLE","$translation",435],["T_OBJECT_OPERATOR","->",435],"{",["T_VARIABLE","$default_langcode_key",435],"}",["T_OBJECT_OPERATOR","->",435],["T_STRING","value",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$default",435],")",";",["T_WHITESPACE","\n    ",435],"}",["T_WHITESPACE","\n\n    ",436],["T_COMMENT","\/\/ Check that after loading an entity the language is the default one.\n",438],["T_WHITESPACE","    ",439],["T_VARIABLE","$entity",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","reloadEntity",439],"(",["T_VARIABLE","$entity",439],")",";",["T_WHITESPACE","\n    ",439],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","assertEqual",440],"(",["T_VARIABLE","$entity",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","language",440],"(",")",["T_OBJECT_OPERATOR","->",440],["T_STRING","getId",440],"(",")",",",["T_WHITESPACE"," ",440],["T_VARIABLE","$default_langcode",440],",",["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","'The loaded entity is the original one.'",440],")",";",["T_WHITESPACE","\n\n    ",440],["T_COMMENT","\/\/ Add another translation and check that everything works as expected. A\n",442],["T_WHITESPACE","    ",443],["T_COMMENT","\/\/ new translation object can be obtained also by just specifying a valid\n",443],["T_WHITESPACE","    ",444],["T_COMMENT","\/\/ language.\n",444],["T_WHITESPACE","    ",445],["T_VARIABLE","$langcode2",445],["T_WHITESPACE"," ",445],"=",["T_WHITESPACE"," ",445],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","langcodes",445],"[",["T_LNUMBER","2",445],"]",";",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$translation",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$entity",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","addTranslation",446],"(",["T_VARIABLE","$langcode2",446],")",";",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$value",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$entity",447],["T_WHITESPACE"," ",447],["T_IS_NOT_IDENTICAL","!==",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$translation",447],["T_WHITESPACE"," ",447],["T_BOOLEAN_AND","&&",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$translation",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","language",447],"(",")",["T_OBJECT_OPERATOR","->",447],["T_STRING","getId",447],"(",")",["T_WHITESPACE"," ",447],["T_IS_EQUAL","==",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$langcode2",447],["T_WHITESPACE"," ",447],["T_BOOLEAN_AND","&&",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$entity",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","hasTranslation",447],"(",["T_VARIABLE","$langcode2",447],")",";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","assertTrue",448],"(",["T_VARIABLE","$value",448],",",["T_WHITESPACE"," ",448],["T_CONSTANT_ENCAPSED_STRING","'A new translation object can be obtained also by specifying a valid language.'",448],")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","assertEqual",449],"(",["T_VARIABLE","$entity",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","language",449],"(",")",["T_OBJECT_OPERATOR","->",449],["T_STRING","getId",449],"(",")",",",["T_WHITESPACE"," ",449],["T_VARIABLE","$default_langcode",449],",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'The original language has been preserved.'",449],")",";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$translation",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","save",450],"(",")",";",["T_WHITESPACE","\n    ",450],["T_VARIABLE","$hooks",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getHooksInfo",451],"(",")",";",["T_WHITESPACE","\n\n    ",451],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","assertEqual",453],"(",["T_VARIABLE","$hooks",453],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_create'",453],"]",",",["T_WHITESPACE"," ",453],["T_VARIABLE","$langcode2",453],",",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation creation hook has fired.'",453],")",";",["T_WHITESPACE","\n    ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","assertEqual",454],"(",["T_VARIABLE","$hooks",454],"[",["T_VARIABLE","$entity_type",454],["T_WHITESPACE"," ",454],".",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'_translation_create'",454],"]",",",["T_WHITESPACE"," ",454],["T_VARIABLE","$langcode2",454],",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation creation hook has fired.'",454],")",";",["T_WHITESPACE","\n\n    ",454],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","assertEqual",456],"(",["T_VARIABLE","$hooks",456],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_insert'",456],"]",",",["T_WHITESPACE"," ",456],["T_VARIABLE","$langcode2",456],",",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation insertion hook has fired.'",456],")",";",["T_WHITESPACE","\n    ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","assertEqual",457],"(",["T_VARIABLE","$hooks",457],"[",["T_VARIABLE","$entity_type",457],["T_WHITESPACE"," ",457],".",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'_translation_insert'",457],"]",",",["T_WHITESPACE"," ",457],["T_VARIABLE","$langcode2",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation insertion hook has fired.'",457],")",";",["T_WHITESPACE","\n\n    ",457],["T_COMMENT","\/\/ Verify that trying to manipulate a translation object referring to a\n",459],["T_WHITESPACE","    ",460],["T_COMMENT","\/\/ removed translation results in exceptions being thrown.\n",460],["T_WHITESPACE","    ",461],["T_VARIABLE","$entity",461],["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","reloadEntity",461],"(",["T_VARIABLE","$entity",461],")",";",["T_WHITESPACE","\n    ",461],["T_VARIABLE","$translation",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$entity",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getTranslation",462],"(",["T_VARIABLE","$langcode2",462],")",";",["T_WHITESPACE","\n    ",462],["T_VARIABLE","$entity",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","removeTranslation",463],"(",["T_VARIABLE","$langcode2",463],")",";",["T_WHITESPACE","\n    ",463],["T_FOREACH","foreach",464],["T_WHITESPACE"," ",464],"(",["T_ARRAY","array",464],"(",["T_CONSTANT_ENCAPSED_STRING","'get'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'set'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'__get'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'__set'",464],",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'createDuplicate'",464],")",["T_WHITESPACE"," ",464],["T_AS","as",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$method",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n      ",464],["T_VARIABLE","$message",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_STRING","format_string",465],"(",["T_CONSTANT_ENCAPSED_STRING","'The @method method raises an exception when trying to manipulate a removed translation.'",465],",",["T_WHITESPACE"," ",465],["T_ARRAY","array",465],"(",["T_CONSTANT_ENCAPSED_STRING","'@method'",465],["T_WHITESPACE"," ",465],["T_DOUBLE_ARROW","=>",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$method",465],")",")",";",["T_WHITESPACE","\n      ",465],["T_TRY","try",466],["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$translation",467],["T_OBJECT_OPERATOR","->",467],"{",["T_VARIABLE","$method",467],"}","(",["T_CONSTANT_ENCAPSED_STRING","'name'",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","randomMachineName",467],"(",")",")",";",["T_WHITESPACE","\n        ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","fail",468],"(",["T_VARIABLE","$message",468],")",";",["T_WHITESPACE","\n      ",468],"}",["T_WHITESPACE","\n      ",469],["T_CATCH","catch",470],["T_WHITESPACE"," ",470],"(",["T_NS_SEPARATOR","\\",470],["T_STRING","Exception",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$e",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n        ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","pass",471],"(",["T_VARIABLE","$message",471],")",";",["T_WHITESPACE","\n      ",471],"}",["T_WHITESPACE","\n    ",472],"}",["T_WHITESPACE","\n\n    ",473],["T_COMMENT","\/\/ Verify that deletion hooks are fired when saving an entity with a removed\n",475],["T_WHITESPACE","    ",476],["T_COMMENT","\/\/ translation.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$entity",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","save",477],"(",")",";",["T_WHITESPACE","\n    ",477],["T_VARIABLE","$hooks",478],["T_WHITESPACE"," ",478],"=",["T_WHITESPACE"," ",478],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","getHooksInfo",478],"(",")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","assertEqual",479],"(",["T_VARIABLE","$hooks",479],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_delete'",479],"]",",",["T_WHITESPACE"," ",479],["T_VARIABLE","$langcode2",479],",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation deletion hook has fired.'",479],")",";",["T_WHITESPACE","\n    ",479],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","assertEqual",480],"(",["T_VARIABLE","$hooks",480],"[",["T_VARIABLE","$entity_type",480],["T_WHITESPACE"," ",480],".",["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'_translation_delete'",480],"]",",",["T_WHITESPACE"," ",480],["T_VARIABLE","$langcode2",480],",",["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation deletion hook has fired.'",480],")",";",["T_WHITESPACE","\n    ",480],["T_VARIABLE","$entity",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","reloadEntity",481],"(",["T_VARIABLE","$entity",481],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","assertFalse",482],"(",["T_VARIABLE","$entity",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","hasTranslation",482],"(",["T_VARIABLE","$langcode2",482],")",",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'The translation does not appear among available translations after saving the entity.'",482],")",";",["T_WHITESPACE","\n\n    ",482],["T_COMMENT","\/\/ Check that removing an invalid translation causes an exception to be\n",484],["T_WHITESPACE","    ",485],["T_COMMENT","\/\/ thrown.\n",485],["T_WHITESPACE","    ",486],["T_FOREACH","foreach",486],["T_WHITESPACE"," ",486],"(",["T_ARRAY","array",486],"(",["T_VARIABLE","$default_langcode",486],",",["T_WHITESPACE"," ",486],["T_STRING","LanguageInterface",486],["T_DOUBLE_COLON","::",486],["T_STRING","LANGCODE_DEFAULT",486],",",["T_WHITESPACE"," ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","randomMachineName",486],"(",")",")",["T_WHITESPACE"," ",486],["T_AS","as",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$invalid_langcode",486],")",["T_WHITESPACE"," ",486],"{",["T_WHITESPACE","\n      ",486],["T_VARIABLE","$message",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_STRING","format_string",487],"(",["T_CONSTANT_ENCAPSED_STRING","'Removing an invalid translation (@langcode) causes an exception to be thrown.'",487],",",["T_WHITESPACE"," ",487],["T_ARRAY","array",487],"(",["T_CONSTANT_ENCAPSED_STRING","'@langcode'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$invalid_langcode",487],")",")",";",["T_WHITESPACE","\n      ",487],["T_TRY","try",488],["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n        ",488],["T_VARIABLE","$entity",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","removeTranslation",489],"(",["T_VARIABLE","$invalid_langcode",489],")",";",["T_WHITESPACE","\n        ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","fail",490],"(",["T_VARIABLE","$message",490],")",";",["T_WHITESPACE","\n      ",490],"}",["T_WHITESPACE","\n      ",491],["T_CATCH","catch",492],["T_WHITESPACE"," ",492],"(",["T_NS_SEPARATOR","\\",492],["T_STRING","Exception",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$e",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n        ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","pass",493],"(",["T_VARIABLE","$message",493],")",";",["T_WHITESPACE","\n      ",493],"}",["T_WHITESPACE","\n    ",494],"}",["T_WHITESPACE","\n\n    ",495],["T_COMMENT","\/\/ Check that hooks are fired only when actually storing data.\n",497],["T_WHITESPACE","    ",498],["T_VARIABLE","$entity",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","reloadEntity",498],"(",["T_VARIABLE","$entity",498],")",";",["T_WHITESPACE","\n    ",498],["T_VARIABLE","$entity",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","addTranslation",499],"(",["T_VARIABLE","$langcode2",499],")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$entity",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","removeTranslation",500],"(",["T_VARIABLE","$langcode2",500],")",";",["T_WHITESPACE","\n    ",500],["T_VARIABLE","$entity",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","save",501],"(",")",";",["T_WHITESPACE","\n    ",501],["T_VARIABLE","$hooks",502],["T_WHITESPACE"," ",502],"=",["T_WHITESPACE"," ",502],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","getHooksInfo",502],"(",")",";",["T_WHITESPACE","\n\n    ",502],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","assertTrue",504],"(",["T_ISSET","isset",504],"(",["T_VARIABLE","$hooks",504],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_create'",504],"]",")",",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'The generic entity translation creation hook is run when adding and removing a translation without storing it.'",504],")",";",["T_WHITESPACE","\n    ",504],["T_UNSET","unset",505],"(",["T_VARIABLE","$hooks",505],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_translation_create'",505],"]",")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","assertTrue",506],"(",["T_ISSET","isset",506],"(",["T_VARIABLE","$hooks",506],"[",["T_VARIABLE","$entity_type",506],["T_WHITESPACE"," ",506],".",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'_translation_create'",506],"]",")",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'The entity-type-specific entity translation creation hook is run when adding and removing a translation without storing it.'",506],")",";",["T_WHITESPACE","\n    ",506],["T_UNSET","unset",507],"(",["T_VARIABLE","$hooks",507],"[",["T_VARIABLE","$entity_type",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'_translation_create'",507],"]",")",";",["T_WHITESPACE","\n\n    ",507],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","assertFalse",509],"(",["T_VARIABLE","$hooks",509],",",["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'No other hooks beyond the entity translation creation hooks are run when adding and removing a translation without storing it.'",509],")",";",["T_WHITESPACE","\n\n    ",509],["T_COMMENT","\/\/ Check that hooks are fired only when actually storing data.\n",511],["T_WHITESPACE","    ",512],["T_VARIABLE","$entity",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","reloadEntity",512],"(",["T_VARIABLE","$entity",512],")",";",["T_WHITESPACE","\n    ",512],["T_VARIABLE","$entity",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","addTranslation",513],"(",["T_VARIABLE","$langcode2",513],")",";",["T_WHITESPACE","\n    ",513],["T_VARIABLE","$entity",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","save",514],"(",")",";",["T_WHITESPACE","\n    ",514],["T_VARIABLE","$entity",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","reloadEntity",515],"(",["T_VARIABLE","$entity",515],")",";",["T_WHITESPACE","\n    ",515],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","assertTrue",516],"(",["T_VARIABLE","$entity",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","hasTranslation",516],"(",["T_VARIABLE","$langcode2",516],")",",",["T_WHITESPACE"," ",516],["T_CONSTANT_ENCAPSED_STRING","'Entity has translation after adding one and saving.'",516],")",";",["T_WHITESPACE","\n    ",516],["T_VARIABLE","$entity",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","removeTranslation",517],"(",["T_VARIABLE","$langcode2",517],")",";",["T_WHITESPACE","\n    ",517],["T_VARIABLE","$entity",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","save",518],"(",")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$entity",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","reloadEntity",519],"(",["T_VARIABLE","$entity",519],")",";",["T_WHITESPACE","\n    ",519],["T_VARIABLE","$this",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","assertFalse",520],"(",["T_VARIABLE","$entity",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","hasTranslation",520],"(",["T_VARIABLE","$langcode2",520],")",",",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'Entity does not have translation after removing it and saving.'",520],")",";",["T_WHITESPACE","\n    ",520],["T_COMMENT","\/\/ Reset hook firing information.\n",521],["T_WHITESPACE","    ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","getHooksInfo",522],"(",")",";",["T_WHITESPACE","\n\n    ",522],["T_COMMENT","\/\/ Verify that entity serialization does not cause stale references to be\n",524],["T_WHITESPACE","    ",525],["T_COMMENT","\/\/ left around.\n",525],["T_WHITESPACE","    ",526],["T_VARIABLE","$entity",526],["T_WHITESPACE"," ",526],"=",["T_WHITESPACE"," ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","reloadEntity",526],"(",["T_VARIABLE","$entity",526],")",";",["T_WHITESPACE","\n    ",526],["T_VARIABLE","$translation",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$entity",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getTranslation",527],"(",["T_VARIABLE","$langcode",527],")",";",["T_WHITESPACE","\n    ",527],["T_VARIABLE","$entity",528],["T_WHITESPACE"," ",528],"=",["T_WHITESPACE"," ",528],["T_STRING","unserialize",528],"(",["T_STRING","serialize",528],"(",["T_VARIABLE","$entity",528],")",")",";",["T_WHITESPACE","\n    ",528],["T_VARIABLE","$entity",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","name",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","value",529],["T_WHITESPACE"," ",529],"=",["T_WHITESPACE"," ",529],["T_VARIABLE","$this",529],["T_OBJECT_OPERATOR","->",529],["T_STRING","randomMachineName",529],"(",")",";",["T_WHITESPACE","\n    ",529],["T_VARIABLE","$name",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$default_langcode",530],["T_WHITESPACE"," ",530],".",["T_WHITESPACE"," ",530],["T_CONSTANT_ENCAPSED_STRING","'_'",530],["T_WHITESPACE"," ",530],".",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","randomMachineName",530],"(",")",";",["T_WHITESPACE","\n    ",530],["T_VARIABLE","$entity",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","getTranslation",531],"(",["T_VARIABLE","$default_langcode",531],")",["T_OBJECT_OPERATOR","->",531],["T_STRING","name",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","value",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$name",531],";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","assertEqual",532],"(",["T_VARIABLE","$entity",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","name",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","value",532],",",["T_WHITESPACE"," ",532],["T_VARIABLE","$name",532],",",["T_WHITESPACE"," ",532],["T_CONSTANT_ENCAPSED_STRING","'No stale reference for the translation object corresponding to the original language.'",532],")",";",["T_WHITESPACE","\n    ",532],["T_VARIABLE","$translation2",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_VARIABLE","$entity",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getTranslation",533],"(",["T_VARIABLE","$langcode",533],")",";",["T_WHITESPACE","\n    ",533],["T_VARIABLE","$translation2",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","name",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","value",534],["T_WHITESPACE"," ",534],["T_CONCAT_EQUAL",".=",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","randomMachineName",534],"(",")",";",["T_WHITESPACE","\n    ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","assertNotEqual",535],"(",["T_VARIABLE","$translation",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","name",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","value",535],",",["T_WHITESPACE"," ",535],["T_VARIABLE","$translation2",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","name",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","value",535],",",["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","'No stale reference for the actual translation object.'",535],")",";",["T_WHITESPACE","\n    ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","assertEqual",536],"(",["T_VARIABLE","$entity",536],",",["T_WHITESPACE"," ",536],["T_VARIABLE","$translation2",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getUntranslated",536],"(",")",",",["T_WHITESPACE"," ",536],["T_CONSTANT_ENCAPSED_STRING","'No stale reference in the actual translation object.'",536],")",";",["T_WHITESPACE","\n\n    ",536],["T_COMMENT","\/\/ Verify that deep-cloning is still available when we are not instantiating\n",538],["T_WHITESPACE","    ",539],["T_COMMENT","\/\/ a translation object, which instead relies on shallow cloning.\n",539],["T_WHITESPACE","    ",540],["T_VARIABLE","$entity",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","reloadEntity",540],"(",["T_VARIABLE","$entity",540],")",";",["T_WHITESPACE","\n    ",540],["T_VARIABLE","$entity",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getTranslation",541],"(",["T_VARIABLE","$langcode",541],")",";",["T_WHITESPACE","\n    ",541],["T_VARIABLE","$cloned",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_CLONE","clone",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$entity",542],";",["T_WHITESPACE","\n    ",542],["T_VARIABLE","$translation",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$cloned",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getTranslation",543],"(",["T_VARIABLE","$langcode",543],")",";",["T_WHITESPACE","\n    ",543],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","assertNotIdentical",544],"(",["T_VARIABLE","$entity",544],",",["T_WHITESPACE"," ",544],["T_VARIABLE","$translation",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","getUntranslated",544],"(",")",",",["T_WHITESPACE"," ",544],["T_CONSTANT_ENCAPSED_STRING","'A cloned entity object has no reference to the original one.'",544],")",";",["T_WHITESPACE","\n    ",544],["T_VARIABLE","$entity",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","removeTranslation",545],"(",["T_VARIABLE","$langcode",545],")",";",["T_WHITESPACE","\n    ",545],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","assertFalse",546],"(",["T_VARIABLE","$entity",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","hasTranslation",546],"(",["T_VARIABLE","$langcode",546],")",")",";",["T_WHITESPACE","\n    ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","assertTrue",547],"(",["T_VARIABLE","$cloned",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","hasTranslation",547],"(",["T_VARIABLE","$langcode",547],")",")",";",["T_WHITESPACE","\n\n    ",547],["T_COMMENT","\/\/ Check that untranslatable field references keep working after serializing\n",549],["T_WHITESPACE","    ",550],["T_COMMENT","\/\/ and cloning the entity.\n",550],["T_WHITESPACE","    ",551],["T_VARIABLE","$entity",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","reloadEntity",551],"(",["T_VARIABLE","$entity",551],")",";",["T_WHITESPACE","\n    ",551],["T_VARIABLE","$type",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","randomMachineName",552],"(",")",";",["T_WHITESPACE","\n    ",552],["T_VARIABLE","$entity",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","getTranslation",553],"(",["T_VARIABLE","$langcode",553],")",["T_OBJECT_OPERATOR","->",553],["T_STRING","type",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","value",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$type",553],";",["T_WHITESPACE","\n    ",553],["T_VARIABLE","$entity",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_STRING","unserialize",554],"(",["T_STRING","serialize",554],"(",["T_VARIABLE","$entity",554],")",")",";",["T_WHITESPACE","\n    ",554],["T_VARIABLE","$cloned",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_CLONE","clone",555],["T_WHITESPACE"," ",555],["T_VARIABLE","$entity",555],";",["T_WHITESPACE","\n    ",555],["T_VARIABLE","$translation",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],["T_VARIABLE","$cloned",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","getTranslation",556],"(",["T_VARIABLE","$langcode",556],")",";",["T_WHITESPACE","\n    ",556],["T_VARIABLE","$translation",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","type",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","value",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_STRING","strrev",557],"(",["T_VARIABLE","$type",557],")",";",["T_WHITESPACE","\n    ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","assertEqual",558],"(",["T_VARIABLE","$cloned",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","type",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","value",558],",",["T_WHITESPACE"," ",558],["T_VARIABLE","$translation",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","type",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","value",558],",",["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'Untranslatable field references keep working after serializing and cloning the entity.'",558],")",";",["T_WHITESPACE","\n\n    ",558],["T_COMMENT","\/\/ Check that per-language defaults are properly populated. The\n",560],["T_WHITESPACE","    ",561],["T_COMMENT","\/\/ 'entity_test_mul_default_value' entity type is translatable and uses\n",561],["T_WHITESPACE","    ",562],["T_COMMENT","\/\/ entity_test_field_default_value() as a \"default value callback\" for its\n",562],["T_WHITESPACE","    ",563],["T_COMMENT","\/\/ 'description' field.\n",563],["T_WHITESPACE","    ",564],["T_VARIABLE","$entity",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","entityManager",564],["T_WHITESPACE","\n      ",564],["T_OBJECT_OPERATOR","->",565],["T_STRING","getStorage",565],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul_default_value'",565],")",["T_WHITESPACE","\n      ",565],["T_OBJECT_OPERATOR","->",566],["T_STRING","create",566],"(","[",["T_CONSTANT_ENCAPSED_STRING","'name'",566],["T_WHITESPACE"," ",566],["T_DOUBLE_ARROW","=>",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","randomMachineName",566],"(",")",",",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'langcode'",566],["T_WHITESPACE"," ",566],["T_DOUBLE_ARROW","=>",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$langcode",566],"]",")",";",["T_WHITESPACE","\n    ",566],["T_VARIABLE","$translation",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_VARIABLE","$entity",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","addTranslation",567],"(",["T_VARIABLE","$langcode2",567],")",";",["T_WHITESPACE","\n    ",567],["T_VARIABLE","$expected",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_ARRAY","array",568],"(",["T_WHITESPACE","\n      ",568],["T_ARRAY","array",569],"(",["T_WHITESPACE","\n        ",569],["T_CONSTANT_ENCAPSED_STRING","'shape'",570],["T_WHITESPACE"," ",570],["T_DOUBLE_ARROW","=>",570],["T_WHITESPACE"," ",570],"\"",["T_ENCAPSED_AND_WHITESPACE","shape:0:description_",570],["T_VARIABLE","$langcode2",570],"\"",",",["T_WHITESPACE","\n        ",570],["T_CONSTANT_ENCAPSED_STRING","'color'",571],["T_WHITESPACE"," ",571],["T_DOUBLE_ARROW","=>",571],["T_WHITESPACE"," ",571],"\"",["T_ENCAPSED_AND_WHITESPACE","color:0:description_",571],["T_VARIABLE","$langcode2",571],"\"",",",["T_WHITESPACE","\n      ",571],")",",",["T_WHITESPACE","\n      ",572],["T_ARRAY","array",573],"(",["T_WHITESPACE","\n        ",573],["T_CONSTANT_ENCAPSED_STRING","'shape'",574],["T_WHITESPACE"," ",574],["T_DOUBLE_ARROW","=>",574],["T_WHITESPACE"," ",574],"\"",["T_ENCAPSED_AND_WHITESPACE","shape:1:description_",574],["T_VARIABLE","$langcode2",574],"\"",",",["T_WHITESPACE","\n        ",574],["T_CONSTANT_ENCAPSED_STRING","'color'",575],["T_WHITESPACE"," ",575],["T_DOUBLE_ARROW","=>",575],["T_WHITESPACE"," ",575],"\"",["T_ENCAPSED_AND_WHITESPACE","color:1:description_",575],["T_VARIABLE","$langcode2",575],"\"",",",["T_WHITESPACE","\n      ",575],")",",",["T_WHITESPACE","\n    ",576],")",";",["T_WHITESPACE","\n    ",577],["T_VARIABLE","$this",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","assertEqual",578],"(",["T_VARIABLE","$translation",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","description",578],["T_OBJECT_OPERATOR","->",578],["T_STRING","getValue",578],"(",")",",",["T_WHITESPACE"," ",578],["T_VARIABLE","$expected",578],",",["T_WHITESPACE"," ",578],["T_CONSTANT_ENCAPSED_STRING","'Language-aware default values correctly populated.'",578],")",";",["T_WHITESPACE","\n    ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","assertEqual",579],"(",["T_VARIABLE","$translation",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","description",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","getLangcode",579],"(",")",",",["T_WHITESPACE"," ",579],["T_VARIABLE","$langcode2",579],",",["T_WHITESPACE"," ",579],["T_CONSTANT_ENCAPSED_STRING","'Field object has the expected langcode.'",579],")",";",["T_WHITESPACE","\n\n    ",579],["T_COMMENT","\/\/ Reset hook firing information.\n",581],["T_WHITESPACE","    ",582],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","getHooksInfo",582],"(",")",";",["T_WHITESPACE","\n  ",582],"}",["T_WHITESPACE","\n\n  ",583],["T_DOC_COMMENT","\/**\n   * Tests language fallback applied to field and entity translations.\n   *\/",585],["T_WHITESPACE","\n  ",587],["T_FUNCTION","function",588],["T_WHITESPACE"," ",588],["T_STRING","testLanguageFallback",588],"(",")",["T_WHITESPACE"," ",588],"{",["T_WHITESPACE","\n    ",588],["T_COMMENT","\/\/ Test all entity variations with data table support.\n",589],["T_WHITESPACE","    ",590],["T_FOREACH","foreach",590],["T_WHITESPACE"," ",590],"(",["T_STRING","entity_test_entity_types",590],"(",["T_STRING","ENTITY_TEST_TYPES_MULTILINGUAL",590],")",["T_WHITESPACE"," ",590],["T_AS","as",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$entity_type",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n      ",590],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","doTestLanguageFallback",591],"(",["T_VARIABLE","$entity_type",591],")",";",["T_WHITESPACE","\n    ",591],"}",["T_WHITESPACE","\n  ",592],"}",["T_WHITESPACE","\n\n  ",593],["T_DOC_COMMENT","\/**\n   * Executes the language fallback test for the given entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",595],["T_WHITESPACE","\n  ",600],["T_PROTECTED","protected",601],["T_WHITESPACE"," ",601],["T_FUNCTION","function",601],["T_WHITESPACE"," ",601],["T_STRING","doTestLanguageFallback",601],"(",["T_VARIABLE","$entity_type",601],")",["T_WHITESPACE"," ",601],"{",["T_WHITESPACE","\n    ",601],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",602],["T_WHITESPACE","\n    ",602],["T_VARIABLE","$renderer",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","container",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","get",603],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",603],")",";",["T_WHITESPACE","\n\n    ",603],["T_VARIABLE","$current_langcode",605],["T_WHITESPACE"," ",605],"=",["T_WHITESPACE"," ",605],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","languageManager",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","getCurrentLanguage",605],"(",["T_STRING","LanguageInterface",605],["T_DOUBLE_COLON","::",605],["T_STRING","TYPE_CONTENT",605],")",["T_OBJECT_OPERATOR","->",605],["T_STRING","getId",605],"(",")",";",["T_WHITESPACE","\n    ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","langcodes",606],"[","]",["T_WHITESPACE"," ",606],"=",["T_WHITESPACE"," ",606],["T_VARIABLE","$current_langcode",606],";",["T_WHITESPACE","\n\n    ",606],["T_VARIABLE","$values",608],["T_WHITESPACE"," ",608],"=",["T_WHITESPACE"," ",608],["T_ARRAY","array",608],"(",")",";",["T_WHITESPACE","\n    ",608],["T_FOREACH","foreach",609],["T_WHITESPACE"," ",609],"(",["T_VARIABLE","$this",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","langcodes",609],["T_WHITESPACE"," ",609],["T_AS","as",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$langcode",609],")",["T_WHITESPACE"," ",609],"{",["T_WHITESPACE","\n      ",609],["T_VARIABLE","$values",610],"[",["T_VARIABLE","$langcode",610],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",610],"]",["T_WHITESPACE"," ",610],"=",["T_WHITESPACE"," ",610],["T_VARIABLE","$this",610],["T_OBJECT_OPERATOR","->",610],["T_STRING","randomMachineName",610],"(",")",";",["T_WHITESPACE","\n      ",610],["T_VARIABLE","$values",611],"[",["T_VARIABLE","$langcode",611],"]","[",["T_CONSTANT_ENCAPSED_STRING","'user_id'",611],"]",["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_STRING","mt_rand",611],"(",["T_LNUMBER","0",611],",",["T_WHITESPACE"," ",611],["T_LNUMBER","127",611],")",";",["T_WHITESPACE","\n    ",611],"}",["T_WHITESPACE","\n\n    ",612],["T_VARIABLE","$default_langcode",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","langcodes",614],"[",["T_LNUMBER","0",614],"]",";",["T_WHITESPACE","\n    ",614],["T_VARIABLE","$langcode",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","langcodes",615],"[",["T_LNUMBER","1",615],"]",";",["T_WHITESPACE","\n    ",615],["T_VARIABLE","$langcode2",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","langcodes",616],"[",["T_LNUMBER","2",616],"]",";",["T_WHITESPACE","\n    ",616],["T_VARIABLE","$langcode_key",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","entityManager",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","getDefinition",617],"(",["T_VARIABLE","$entity_type",617],")",["T_OBJECT_OPERATOR","->",617],["T_STRING","getKey",617],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",617],")",";",["T_WHITESPACE","\n    ",617],["T_VARIABLE","$languages",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","languageManager",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","getLanguages",618],"(",")",";",["T_WHITESPACE","\n    ",618],["T_VARIABLE","$language",619],["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],["T_STRING","ConfigurableLanguage",619],["T_DOUBLE_COLON","::",619],["T_STRING","load",619],"(",["T_VARIABLE","$languages",619],"[",["T_VARIABLE","$langcode",619],"]",["T_OBJECT_OPERATOR","->",619],["T_STRING","getId",619],"(",")",")",";",["T_WHITESPACE","\n    ",619],["T_VARIABLE","$language",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","set",620],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",620],",",["T_WHITESPACE"," ",620],["T_LNUMBER","1",620],")",";",["T_WHITESPACE","\n    ",620],["T_VARIABLE","$language",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","save",621],"(",")",";",["T_WHITESPACE","\n    ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","languageManager",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","reset",622],"(",")",";",["T_WHITESPACE","\n\n    ",622],["T_VARIABLE","$controller",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],["T_VARIABLE","$this",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","entityManager",624],["T_OBJECT_OPERATOR","->",624],["T_STRING","getStorage",624],"(",["T_VARIABLE","$entity_type",624],")",";",["T_WHITESPACE","\n    ",624],["T_VARIABLE","$entity",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],["T_VARIABLE","$controller",625],["T_OBJECT_OPERATOR","->",625],["T_STRING","create",625],"(",["T_ARRAY","array",625],"(",["T_VARIABLE","$langcode_key",625],["T_WHITESPACE"," ",625],["T_DOUBLE_ARROW","=>",625],["T_WHITESPACE"," ",625],["T_VARIABLE","$default_langcode",625],")",["T_WHITESPACE"," ",625],"+",["T_WHITESPACE"," ",625],["T_VARIABLE","$values",625],"[",["T_VARIABLE","$default_langcode",625],"]",")",";",["T_WHITESPACE","\n    ",625],["T_VARIABLE","$entity",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","save",626],"(",")",";",["T_WHITESPACE","\n\n    ",626],["T_VARIABLE","$entity",628],["T_OBJECT_OPERATOR","->",628],["T_STRING","addTranslation",628],"(",["T_VARIABLE","$langcode",628],",",["T_WHITESPACE"," ",628],["T_VARIABLE","$values",628],"[",["T_VARIABLE","$langcode",628],"]",")",";",["T_WHITESPACE","\n    ",628],["T_VARIABLE","$entity",629],["T_OBJECT_OPERATOR","->",629],["T_STRING","save",629],"(",")",";",["T_WHITESPACE","\n\n    ",629],["T_COMMENT","\/\/ Check that retrieving the current translation works as expected.\n",631],["T_WHITESPACE","    ",632],["T_VARIABLE","$entity",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","reloadEntity",632],"(",["T_VARIABLE","$entity",632],")",";",["T_WHITESPACE","\n    ",632],["T_VARIABLE","$translation",633],["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","entityManager",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","getTranslationFromContext",633],"(",["T_VARIABLE","$entity",633],",",["T_WHITESPACE"," ",633],["T_VARIABLE","$langcode2",633],")",";",["T_WHITESPACE","\n    ",633],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","assertEqual",634],"(",["T_VARIABLE","$translation",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","language",634],"(",")",["T_OBJECT_OPERATOR","->",634],["T_STRING","getId",634],"(",")",",",["T_WHITESPACE"," ",634],["T_VARIABLE","$default_langcode",634],",",["T_WHITESPACE"," ",634],["T_CONSTANT_ENCAPSED_STRING","'The current translation language matches the expected one.'",634],")",";",["T_WHITESPACE","\n\n    ",634],["T_COMMENT","\/\/ Check that language fallback respects language weight by default.\n",636],["T_WHITESPACE","    ",637],["T_VARIABLE","$language",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_STRING","ConfigurableLanguage",637],["T_DOUBLE_COLON","::",637],["T_STRING","load",637],"(",["T_VARIABLE","$languages",637],"[",["T_VARIABLE","$langcode",637],"]",["T_OBJECT_OPERATOR","->",637],["T_STRING","getId",637],"(",")",")",";",["T_WHITESPACE","\n    ",637],["T_VARIABLE","$language",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","set",638],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",638],",",["T_WHITESPACE"," ",638],"-",["T_LNUMBER","1",638],")",";",["T_WHITESPACE","\n    ",638],["T_VARIABLE","$language",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","save",639],"(",")",";",["T_WHITESPACE","\n    ",639],["T_VARIABLE","$translation",640],["T_WHITESPACE"," ",640],"=",["T_WHITESPACE"," ",640],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","entityManager",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","getTranslationFromContext",640],"(",["T_VARIABLE","$entity",640],",",["T_WHITESPACE"," ",640],["T_VARIABLE","$langcode2",640],")",";",["T_WHITESPACE","\n    ",640],["T_VARIABLE","$this",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","assertEqual",641],"(",["T_VARIABLE","$translation",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","language",641],"(",")",["T_OBJECT_OPERATOR","->",641],["T_STRING","getId",641],"(",")",",",["T_WHITESPACE"," ",641],["T_VARIABLE","$langcode",641],",",["T_WHITESPACE"," ",641],["T_CONSTANT_ENCAPSED_STRING","'The current translation language matches the expected one.'",641],")",";",["T_WHITESPACE","\n\n    ",641],["T_COMMENT","\/\/ Check that the current translation is properly returned.\n",643],["T_WHITESPACE","    ",644],["T_VARIABLE","$translation",644],["T_WHITESPACE"," ",644],"=",["T_WHITESPACE"," ",644],["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","entityManager",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getTranslationFromContext",644],"(",["T_VARIABLE","$entity",644],")",";",["T_WHITESPACE","\n    ",644],["T_VARIABLE","$this",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","assertEqual",645],"(",["T_VARIABLE","$langcode",645],",",["T_WHITESPACE"," ",645],["T_VARIABLE","$translation",645],["T_OBJECT_OPERATOR","->",645],["T_STRING","language",645],"(",")",["T_OBJECT_OPERATOR","->",645],["T_STRING","getId",645],"(",")",",",["T_WHITESPACE"," ",645],["T_CONSTANT_ENCAPSED_STRING","'The current translation language matches the topmost language fallback candidate.'",645],")",";",["T_WHITESPACE","\n    ",645],["T_VARIABLE","$entity",646],["T_OBJECT_OPERATOR","->",646],["T_STRING","addTranslation",646],"(",["T_VARIABLE","$current_langcode",646],",",["T_WHITESPACE"," ",646],["T_VARIABLE","$values",646],"[",["T_VARIABLE","$current_langcode",646],"]",")",";",["T_WHITESPACE","\n    ",646],["T_VARIABLE","$translation",647],["T_WHITESPACE"," ",647],"=",["T_WHITESPACE"," ",647],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","entityManager",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","getTranslationFromContext",647],"(",["T_VARIABLE","$entity",647],")",";",["T_WHITESPACE","\n    ",647],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","assertEqual",648],"(",["T_VARIABLE","$current_langcode",648],",",["T_WHITESPACE"," ",648],["T_VARIABLE","$translation",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","language",648],"(",")",["T_OBJECT_OPERATOR","->",648],["T_STRING","getId",648],"(",")",",",["T_WHITESPACE"," ",648],["T_CONSTANT_ENCAPSED_STRING","'The current translation language matches the current language.'",648],")",";",["T_WHITESPACE","\n\n    ",648],["T_COMMENT","\/\/ Check that if the entity has no translation no fallback is applied.\n",650],["T_WHITESPACE","    ",651],["T_VARIABLE","$entity2",651],["T_WHITESPACE"," ",651],"=",["T_WHITESPACE"," ",651],["T_VARIABLE","$controller",651],["T_OBJECT_OPERATOR","->",651],["T_STRING","create",651],"(",["T_ARRAY","array",651],"(",["T_VARIABLE","$langcode_key",651],["T_WHITESPACE"," ",651],["T_DOUBLE_ARROW","=>",651],["T_WHITESPACE"," ",651],["T_VARIABLE","$default_langcode",651],")",")",";",["T_WHITESPACE","\n    ",651],["T_COMMENT","\/\/ Get an view builder.\n",652],["T_WHITESPACE","    ",653],["T_VARIABLE","$controller",653],["T_WHITESPACE"," ",653],"=",["T_WHITESPACE"," ",653],["T_VARIABLE","$this",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","entityManager",653],["T_OBJECT_OPERATOR","->",653],["T_STRING","getViewBuilder",653],"(",["T_VARIABLE","$entity_type",653],")",";",["T_WHITESPACE","\n    ",653],["T_VARIABLE","$entity2_build",654],["T_WHITESPACE"," ",654],"=",["T_WHITESPACE"," ",654],["T_VARIABLE","$controller",654],["T_OBJECT_OPERATOR","->",654],["T_STRING","view",654],"(",["T_VARIABLE","$entity2",654],")",";",["T_WHITESPACE","\n    ",654],["T_VARIABLE","$entity2_output",655],["T_WHITESPACE"," ",655],"=",["T_WHITESPACE"," ",655],["T_STRING_CAST","(string)",655],["T_WHITESPACE"," ",655],["T_VARIABLE","$renderer",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","renderRoot",655],"(",["T_VARIABLE","$entity2_build",655],")",";",["T_WHITESPACE","\n    ",655],["T_VARIABLE","$translation",656],["T_WHITESPACE"," ",656],"=",["T_WHITESPACE"," ",656],["T_VARIABLE","$this",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","entityManager",656],["T_OBJECT_OPERATOR","->",656],["T_STRING","getTranslationFromContext",656],"(",["T_VARIABLE","$entity2",656],",",["T_WHITESPACE"," ",656],["T_VARIABLE","$default_langcode",656],")",";",["T_WHITESPACE","\n    ",656],["T_VARIABLE","$translation_build",657],["T_WHITESPACE"," ",657],"=",["T_WHITESPACE"," ",657],["T_VARIABLE","$controller",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","view",657],"(",["T_VARIABLE","$translation",657],")",";",["T_WHITESPACE","\n    ",657],["T_VARIABLE","$translation_output",658],["T_WHITESPACE"," ",658],"=",["T_WHITESPACE"," ",658],["T_STRING_CAST","(string)",658],["T_WHITESPACE"," ",658],["T_VARIABLE","$renderer",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","renderRoot",658],"(",["T_VARIABLE","$translation_build",658],")",";",["T_WHITESPACE","\n    ",658],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","assertIdentical",659],"(",["T_VARIABLE","$entity2_output",659],",",["T_WHITESPACE"," ",659],["T_VARIABLE","$translation_output",659],",",["T_WHITESPACE"," ",659],["T_CONSTANT_ENCAPSED_STRING","'When the entity has no translation no fallback is applied.'",659],")",";",["T_WHITESPACE","\n\n    ",659],["T_COMMENT","\/\/ Checks that entity translations are rendered properly.\n",661],["T_WHITESPACE","    ",662],["T_VARIABLE","$controller",662],["T_WHITESPACE"," ",662],"=",["T_WHITESPACE"," ",662],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","entityManager",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","getViewBuilder",662],"(",["T_VARIABLE","$entity_type",662],")",";",["T_WHITESPACE","\n    ",662],["T_VARIABLE","$build",663],["T_WHITESPACE"," ",663],"=",["T_WHITESPACE"," ",663],["T_VARIABLE","$controller",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","view",663],"(",["T_VARIABLE","$entity",663],")",";",["T_WHITESPACE","\n    ",663],["T_VARIABLE","$renderer",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","renderRoot",664],"(",["T_VARIABLE","$build",664],")",";",["T_WHITESPACE","\n    ",664],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","assertEqual",665],"(",["T_VARIABLE","$build",665],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",665],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",665],"]",",",["T_WHITESPACE"," ",665],["T_VARIABLE","$values",665],"[",["T_VARIABLE","$current_langcode",665],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",665],"]",",",["T_WHITESPACE"," ",665],["T_CONSTANT_ENCAPSED_STRING","'By default the entity is rendered in the current language.'",665],")",";",["T_WHITESPACE","\n\n    ",665],["T_VARIABLE","$langcodes",667],["T_WHITESPACE"," ",667],"=",["T_WHITESPACE"," ",667],["T_STRING","array_combine",667],"(",["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","langcodes",667],",",["T_WHITESPACE"," ",667],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","langcodes",667],")",";",["T_WHITESPACE","\n    ",667],["T_COMMENT","\/\/ We have no translation for the $langcode2 language, hence the expected\n",668],["T_WHITESPACE","    ",669],["T_COMMENT","\/\/ result is the topmost existing translation, that is $langcode.\n",669],["T_WHITESPACE","    ",670],["T_VARIABLE","$langcodes",670],"[",["T_VARIABLE","$langcode2",670],"]",["T_WHITESPACE"," ",670],"=",["T_WHITESPACE"," ",670],["T_VARIABLE","$langcode",670],";",["T_WHITESPACE","\n    ",670],["T_FOREACH","foreach",671],["T_WHITESPACE"," ",671],"(",["T_VARIABLE","$langcodes",671],["T_WHITESPACE"," ",671],["T_AS","as",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$desired",671],["T_WHITESPACE"," ",671],["T_DOUBLE_ARROW","=>",671],["T_WHITESPACE"," ",671],["T_VARIABLE","$expected",671],")",["T_WHITESPACE"," ",671],"{",["T_WHITESPACE","\n      ",671],["T_VARIABLE","$build",672],["T_WHITESPACE"," ",672],"=",["T_WHITESPACE"," ",672],["T_VARIABLE","$controller",672],["T_OBJECT_OPERATOR","->",672],["T_STRING","view",672],"(",["T_VARIABLE","$entity",672],",",["T_WHITESPACE"," ",672],["T_CONSTANT_ENCAPSED_STRING","'full'",672],",",["T_WHITESPACE"," ",672],["T_VARIABLE","$desired",672],")",";",["T_WHITESPACE","\n      ",672],["T_COMMENT","\/\/ Unset the #cache key so that a fresh render is produced with each pass,\n",673],["T_WHITESPACE","      ",674],["T_COMMENT","\/\/ making the renderable array keys available to compare.\n",674],["T_WHITESPACE","      ",675],["T_UNSET","unset",675],"(",["T_VARIABLE","$build",675],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",675],"]",")",";",["T_WHITESPACE","\n      ",675],["T_VARIABLE","$renderer",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","renderRoot",676],"(",["T_VARIABLE","$build",676],")",";",["T_WHITESPACE","\n      ",676],["T_VARIABLE","$this",677],["T_OBJECT_OPERATOR","->",677],["T_STRING","assertEqual",677],"(",["T_VARIABLE","$build",677],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",677],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",677],"]",",",["T_WHITESPACE"," ",677],["T_VARIABLE","$values",677],"[",["T_VARIABLE","$expected",677],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",677],"]",",",["T_WHITESPACE"," ",677],["T_CONSTANT_ENCAPSED_STRING","'The entity is rendered in the expected language.'",677],")",";",["T_WHITESPACE","\n    ",677],"}",["T_WHITESPACE","\n  ",678],"}",["T_WHITESPACE","\n\n  ",679],["T_DOC_COMMENT","\/**\n   * Check that field translatability is handled properly.\n   *\/",681],["T_WHITESPACE","\n  ",683],["T_FUNCTION","function",684],["T_WHITESPACE"," ",684],["T_STRING","testFieldDefinitions",684],"(",")",["T_WHITESPACE"," ",684],"{",["T_WHITESPACE","\n    ",684],["T_COMMENT","\/\/ Check that field translatability can be altered to be enabled or disabled\n",685],["T_WHITESPACE","    ",686],["T_COMMENT","\/\/ in field definitions.\n",686],["T_WHITESPACE","    ",687],["T_VARIABLE","$entity_type",687],["T_WHITESPACE"," ",687],"=",["T_WHITESPACE"," ",687],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mulrev'",687],";",["T_WHITESPACE","\n    ",687],["T_VARIABLE","$this",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","state",688],["T_OBJECT_OPERATOR","->",688],["T_STRING","set",688],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.field_definitions.translatable'",688],",",["T_WHITESPACE"," ",688],["T_ARRAY","array",688],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",688],["T_WHITESPACE"," ",688],["T_DOUBLE_ARROW","=>",688],["T_WHITESPACE"," ",688],["T_STRING","FALSE",688],")",")",";",["T_WHITESPACE","\n    ",688],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","entityManager",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","clearCachedFieldDefinitions",689],"(",")",";",["T_WHITESPACE","\n    ",689],["T_VARIABLE","$definitions",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","entityManager",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","getBaseFieldDefinitions",690],"(",["T_VARIABLE","$entity_type",690],")",";",["T_WHITESPACE","\n    ",690],["T_VARIABLE","$this",691],["T_OBJECT_OPERATOR","->",691],["T_STRING","assertFalse",691],"(",["T_VARIABLE","$definitions",691],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",691],"]",["T_OBJECT_OPERATOR","->",691],["T_STRING","isTranslatable",691],"(",")",",",["T_WHITESPACE"," ",691],["T_CONSTANT_ENCAPSED_STRING","'Field translatability can be disabled programmatically.'",691],")",";",["T_WHITESPACE","\n\n    ",691],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","state",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","set",693],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.field_definitions.translatable'",693],",",["T_WHITESPACE"," ",693],["T_ARRAY","array",693],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",693],["T_WHITESPACE"," ",693],["T_DOUBLE_ARROW","=>",693],["T_WHITESPACE"," ",693],["T_STRING","TRUE",693],")",")",";",["T_WHITESPACE","\n    ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","entityManager",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","clearCachedFieldDefinitions",694],"(",")",";",["T_WHITESPACE","\n    ",694],["T_VARIABLE","$definitions",695],["T_WHITESPACE"," ",695],"=",["T_WHITESPACE"," ",695],["T_VARIABLE","$this",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","entityManager",695],["T_OBJECT_OPERATOR","->",695],["T_STRING","getBaseFieldDefinitions",695],"(",["T_VARIABLE","$entity_type",695],")",";",["T_WHITESPACE","\n    ",695],["T_VARIABLE","$this",696],["T_OBJECT_OPERATOR","->",696],["T_STRING","assertTrue",696],"(",["T_VARIABLE","$definitions",696],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",696],"]",["T_OBJECT_OPERATOR","->",696],["T_STRING","isTranslatable",696],"(",")",",",["T_WHITESPACE"," ",696],["T_CONSTANT_ENCAPSED_STRING","'Field translatability can be enabled programmatically.'",696],")",";",["T_WHITESPACE","\n\n    ",696],["T_COMMENT","\/\/ Check that field translatability is disabled by default.\n",698],["T_WHITESPACE","    ",699],["T_VARIABLE","$base_field_definitions",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],["T_STRING","EntityTestMulRev",699],["T_DOUBLE_COLON","::",699],["T_STRING","baseFieldDefinitions",699],"(",["T_VARIABLE","$this",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","entityManager",699],["T_OBJECT_OPERATOR","->",699],["T_STRING","getDefinition",699],"(",["T_VARIABLE","$entity_type",699],")",")",";",["T_WHITESPACE","\n    ",699],["T_VARIABLE","$this",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","assertTrue",700],"(","!",["T_ISSET","isset",700],"(",["T_VARIABLE","$base_field_definitions",700],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",700],"]",["T_OBJECT_OPERATOR","->",700],["T_STRING","translatable",700],")",",",["T_WHITESPACE"," ",700],["T_CONSTANT_ENCAPSED_STRING","'Translatability for the <em>id<\/em> field is not defined.'",700],")",";",["T_WHITESPACE","\n    ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","assertFalse",701],"(",["T_VARIABLE","$definitions",701],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",701],"]",["T_OBJECT_OPERATOR","->",701],["T_STRING","isTranslatable",701],"(",")",",",["T_WHITESPACE"," ",701],["T_CONSTANT_ENCAPSED_STRING","'Field translatability is disabled by default.'",701],")",";",["T_WHITESPACE","\n\n    ",701],["T_COMMENT","\/\/ Check that entity id keys have the expect translatability.\n",703],["T_WHITESPACE","    ",704],["T_VARIABLE","$translatable_fields",704],["T_WHITESPACE"," ",704],"=",["T_WHITESPACE"," ",704],["T_ARRAY","array",704],"(",["T_WHITESPACE","\n      ",704],["T_CONSTANT_ENCAPSED_STRING","'id'",705],["T_WHITESPACE"," ",705],["T_DOUBLE_ARROW","=>",705],["T_WHITESPACE"," ",705],["T_STRING","TRUE",705],",",["T_WHITESPACE","\n      ",705],["T_CONSTANT_ENCAPSED_STRING","'uuid'",706],["T_WHITESPACE"," ",706],["T_DOUBLE_ARROW","=>",706],["T_WHITESPACE"," ",706],["T_STRING","TRUE",706],",",["T_WHITESPACE","\n      ",706],["T_CONSTANT_ENCAPSED_STRING","'revision_id'",707],["T_WHITESPACE"," ",707],["T_DOUBLE_ARROW","=>",707],["T_WHITESPACE"," ",707],["T_STRING","TRUE",707],",",["T_WHITESPACE","\n      ",707],["T_CONSTANT_ENCAPSED_STRING","'type'",708],["T_WHITESPACE"," ",708],["T_DOUBLE_ARROW","=>",708],["T_WHITESPACE"," ",708],["T_STRING","TRUE",708],",",["T_WHITESPACE","\n      ",708],["T_CONSTANT_ENCAPSED_STRING","'langcode'",709],["T_WHITESPACE"," ",709],["T_DOUBLE_ARROW","=>",709],["T_WHITESPACE"," ",709],["T_STRING","FALSE",709],",",["T_WHITESPACE","\n    ",709],")",";",["T_WHITESPACE","\n    ",710],["T_FOREACH","foreach",711],["T_WHITESPACE"," ",711],"(",["T_VARIABLE","$translatable_fields",711],["T_WHITESPACE"," ",711],["T_AS","as",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$name",711],["T_WHITESPACE"," ",711],["T_DOUBLE_ARROW","=>",711],["T_WHITESPACE"," ",711],["T_VARIABLE","$translatable",711],")",["T_WHITESPACE"," ",711],"{",["T_WHITESPACE","\n      ",711],["T_VARIABLE","$this",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","state",712],["T_OBJECT_OPERATOR","->",712],["T_STRING","set",712],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.field_definitions.translatable'",712],",",["T_WHITESPACE"," ",712],["T_ARRAY","array",712],"(",["T_VARIABLE","$name",712],["T_WHITESPACE"," ",712],["T_DOUBLE_ARROW","=>",712],["T_WHITESPACE"," ",712],["T_VARIABLE","$translatable",712],")",")",";",["T_WHITESPACE","\n      ",712],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","entityManager",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","clearCachedFieldDefinitions",713],"(",")",";",["T_WHITESPACE","\n      ",713],["T_VARIABLE","$message",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_STRING","format_string",714],"(",["T_CONSTANT_ENCAPSED_STRING","'Field %field cannot be translatable.'",714],",",["T_WHITESPACE"," ",714],["T_ARRAY","array",714],"(",["T_CONSTANT_ENCAPSED_STRING","'%field'",714],["T_WHITESPACE"," ",714],["T_DOUBLE_ARROW","=>",714],["T_WHITESPACE"," ",714],["T_VARIABLE","$name",714],")",")",";",["T_WHITESPACE","\n\n      ",714],["T_TRY","try",716],["T_WHITESPACE"," ",716],"{",["T_WHITESPACE","\n        ",716],["T_VARIABLE","$this",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","entityManager",717],["T_OBJECT_OPERATOR","->",717],["T_STRING","getBaseFieldDefinitions",717],"(",["T_VARIABLE","$entity_type",717],")",";",["T_WHITESPACE","\n        ",717],["T_VARIABLE","$this",718],["T_OBJECT_OPERATOR","->",718],["T_STRING","fail",718],"(",["T_VARIABLE","$message",718],")",";",["T_WHITESPACE","\n      ",718],"}",["T_WHITESPACE","\n      ",719],["T_CATCH","catch",720],["T_WHITESPACE"," ",720],"(",["T_NS_SEPARATOR","\\",720],["T_STRING","LogicException",720],["T_WHITESPACE"," ",720],["T_VARIABLE","$e",720],")",["T_WHITESPACE"," ",720],"{",["T_WHITESPACE","\n        ",720],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","pass",721],"(",["T_VARIABLE","$message",721],")",";",["T_WHITESPACE","\n      ",721],"}",["T_WHITESPACE","\n    ",722],"}",["T_WHITESPACE","\n  ",723],"}",["T_WHITESPACE","\n\n  ",724],["T_DOC_COMMENT","\/**\n   * Tests that changing entity language does not break field language.\n   *\/",726],["T_WHITESPACE","\n  ",728],["T_PUBLIC","public",729],["T_WHITESPACE"," ",729],["T_FUNCTION","function",729],["T_WHITESPACE"," ",729],["T_STRING","testLanguageChange",729],"(",")",["T_WHITESPACE"," ",729],"{",["T_WHITESPACE","\n    ",729],["T_COMMENT","\/\/ Test all entity variations with data table support.\n",730],["T_WHITESPACE","    ",731],["T_FOREACH","foreach",731],["T_WHITESPACE"," ",731],"(",["T_STRING","entity_test_entity_types",731],"(",["T_STRING","ENTITY_TEST_TYPES_MULTILINGUAL",731],")",["T_WHITESPACE"," ",731],["T_AS","as",731],["T_WHITESPACE"," ",731],["T_VARIABLE","$entity_type",731],")",["T_WHITESPACE"," ",731],"{",["T_WHITESPACE","\n      ",731],["T_VARIABLE","$this",732],["T_OBJECT_OPERATOR","->",732],["T_STRING","doTestLanguageChange",732],"(",["T_VARIABLE","$entity_type",732],")",";",["T_WHITESPACE","\n    ",732],"}",["T_WHITESPACE","\n  ",733],"}",["T_WHITESPACE","\n\n  ",734],["T_DOC_COMMENT","\/**\n   * Executes the entity language change test for the given entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",736],["T_WHITESPACE","\n  ",741],["T_PROTECTED","protected",742],["T_WHITESPACE"," ",742],["T_FUNCTION","function",742],["T_WHITESPACE"," ",742],["T_STRING","doTestLanguageChange",742],"(",["T_VARIABLE","$entity_type",742],")",["T_WHITESPACE"," ",742],"{",["T_WHITESPACE","\n    ",742],["T_VARIABLE","$langcode_key",743],["T_WHITESPACE"," ",743],"=",["T_WHITESPACE"," ",743],["T_VARIABLE","$this",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","entityManager",743],["T_OBJECT_OPERATOR","->",743],["T_STRING","getDefinition",743],"(",["T_VARIABLE","$entity_type",743],")",["T_OBJECT_OPERATOR","->",743],["T_STRING","getKey",743],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",743],")",";",["T_WHITESPACE","\n    ",743],["T_VARIABLE","$controller",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],["T_VARIABLE","$this",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","entityManager",744],["T_OBJECT_OPERATOR","->",744],["T_STRING","getStorage",744],"(",["T_VARIABLE","$entity_type",744],")",";",["T_WHITESPACE","\n    ",744],["T_VARIABLE","$langcode",745],["T_WHITESPACE"," ",745],"=",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","langcodes",745],"[",["T_LNUMBER","0",745],"]",";",["T_WHITESPACE","\n\n    ",745],["T_COMMENT","\/\/ check that field languages match entity language regardless of field\n",747],["T_WHITESPACE","    ",748],["T_COMMENT","\/\/ translatability.\n",748],["T_WHITESPACE","    ",749],["T_VARIABLE","$values",749],["T_WHITESPACE"," ",749],"=",["T_WHITESPACE"," ",749],["T_ARRAY","array",749],"(",["T_WHITESPACE","\n      ",749],["T_VARIABLE","$langcode_key",750],["T_WHITESPACE"," ",750],["T_DOUBLE_ARROW","=>",750],["T_WHITESPACE"," ",750],["T_VARIABLE","$langcode",750],",",["T_WHITESPACE","\n      ",750],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","fieldName",751],["T_WHITESPACE"," ",751],["T_DOUBLE_ARROW","=>",751],["T_WHITESPACE"," ",751],["T_VARIABLE","$this",751],["T_OBJECT_OPERATOR","->",751],["T_STRING","randomMachineName",751],"(",")",",",["T_WHITESPACE","\n      ",751],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","untranslatableFieldName",752],["T_WHITESPACE"," ",752],["T_DOUBLE_ARROW","=>",752],["T_WHITESPACE"," ",752],["T_VARIABLE","$this",752],["T_OBJECT_OPERATOR","->",752],["T_STRING","randomMachineName",752],"(",")",",",["T_WHITESPACE","\n    ",752],")",";",["T_WHITESPACE","\n    ",753],["T_VARIABLE","$entity",754],["T_WHITESPACE"," ",754],"=",["T_WHITESPACE"," ",754],["T_VARIABLE","$controller",754],["T_OBJECT_OPERATOR","->",754],["T_STRING","create",754],"(",["T_VARIABLE","$values",754],")",";",["T_WHITESPACE","\n    ",754],["T_FOREACH","foreach",755],["T_WHITESPACE"," ",755],"(",["T_ARRAY","array",755],"(",["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","fieldName",755],",",["T_WHITESPACE"," ",755],["T_VARIABLE","$this",755],["T_OBJECT_OPERATOR","->",755],["T_STRING","untranslatableFieldName",755],")",["T_WHITESPACE"," ",755],["T_AS","as",755],["T_WHITESPACE"," ",755],["T_VARIABLE","$field_name",755],")",["T_WHITESPACE"," ",755],"{",["T_WHITESPACE","\n      ",755],["T_VARIABLE","$this",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","assertEqual",756],"(",["T_VARIABLE","$entity",756],["T_OBJECT_OPERATOR","->",756],["T_STRING","get",756],"(",["T_VARIABLE","$field_name",756],")",["T_OBJECT_OPERATOR","->",756],["T_STRING","getLangcode",756],"(",")",",",["T_WHITESPACE"," ",756],["T_VARIABLE","$langcode",756],",",["T_WHITESPACE"," ",756],["T_CONSTANT_ENCAPSED_STRING","'Field language works as expected.'",756],")",";",["T_WHITESPACE","\n    ",756],"}",["T_WHITESPACE","\n\n    ",757],["T_COMMENT","\/\/ Check that field languages keep matching entity language even after\n",759],["T_WHITESPACE","    ",760],["T_COMMENT","\/\/ changing it.\n",760],["T_WHITESPACE","    ",761],["T_VARIABLE","$langcode",761],["T_WHITESPACE"," ",761],"=",["T_WHITESPACE"," ",761],["T_VARIABLE","$this",761],["T_OBJECT_OPERATOR","->",761],["T_STRING","langcodes",761],"[",["T_LNUMBER","1",761],"]",";",["T_WHITESPACE","\n    ",761],["T_VARIABLE","$entity",762],["T_OBJECT_OPERATOR","->",762],"{",["T_VARIABLE","$langcode_key",762],"}",["T_OBJECT_OPERATOR","->",762],["T_STRING","value",762],["T_WHITESPACE"," ",762],"=",["T_WHITESPACE"," ",762],["T_VARIABLE","$langcode",762],";",["T_WHITESPACE","\n    ",762],["T_FOREACH","foreach",763],["T_WHITESPACE"," ",763],"(",["T_ARRAY","array",763],"(",["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","fieldName",763],",",["T_WHITESPACE"," ",763],["T_VARIABLE","$this",763],["T_OBJECT_OPERATOR","->",763],["T_STRING","untranslatableFieldName",763],")",["T_WHITESPACE"," ",763],["T_AS","as",763],["T_WHITESPACE"," ",763],["T_VARIABLE","$field_name",763],")",["T_WHITESPACE"," ",763],"{",["T_WHITESPACE","\n      ",763],["T_VARIABLE","$this",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","assertEqual",764],"(",["T_VARIABLE","$entity",764],["T_OBJECT_OPERATOR","->",764],["T_STRING","get",764],"(",["T_VARIABLE","$field_name",764],")",["T_OBJECT_OPERATOR","->",764],["T_STRING","getLangcode",764],"(",")",",",["T_WHITESPACE"," ",764],["T_VARIABLE","$langcode",764],",",["T_WHITESPACE"," ",764],["T_CONSTANT_ENCAPSED_STRING","'Field language works as expected after changing entity language.'",764],")",";",["T_WHITESPACE","\n    ",764],"}",["T_WHITESPACE","\n\n    ",765],["T_COMMENT","\/\/ Check that entity translation does not affect the language of original\n",767],["T_WHITESPACE","    ",768],["T_COMMENT","\/\/ field values and untranslatable ones.\n",768],["T_WHITESPACE","    ",769],["T_VARIABLE","$langcode",769],["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],["T_VARIABLE","$this",769],["T_OBJECT_OPERATOR","->",769],["T_STRING","langcodes",769],"[",["T_LNUMBER","0",769],"]",";",["T_WHITESPACE","\n    ",769],["T_VARIABLE","$entity",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","addTranslation",770],"(",["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","langcodes",770],"[",["T_LNUMBER","2",770],"]",",",["T_WHITESPACE"," ",770],["T_ARRAY","array",770],"(",["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","fieldName",770],["T_WHITESPACE"," ",770],["T_DOUBLE_ARROW","=>",770],["T_WHITESPACE"," ",770],["T_VARIABLE","$this",770],["T_OBJECT_OPERATOR","->",770],["T_STRING","randomMachineName",770],"(",")",")",")",";",["T_WHITESPACE","\n    ",770],["T_VARIABLE","$entity",771],["T_OBJECT_OPERATOR","->",771],"{",["T_VARIABLE","$langcode_key",771],"}",["T_OBJECT_OPERATOR","->",771],["T_STRING","value",771],["T_WHITESPACE"," ",771],"=",["T_WHITESPACE"," ",771],["T_VARIABLE","$langcode",771],";",["T_WHITESPACE","\n    ",771],["T_FOREACH","foreach",772],["T_WHITESPACE"," ",772],"(",["T_ARRAY","array",772],"(",["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","fieldName",772],",",["T_WHITESPACE"," ",772],["T_VARIABLE","$this",772],["T_OBJECT_OPERATOR","->",772],["T_STRING","untranslatableFieldName",772],")",["T_WHITESPACE"," ",772],["T_AS","as",772],["T_WHITESPACE"," ",772],["T_VARIABLE","$field_name",772],")",["T_WHITESPACE"," ",772],"{",["T_WHITESPACE","\n      ",772],["T_VARIABLE","$this",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","assertEqual",773],"(",["T_VARIABLE","$entity",773],["T_OBJECT_OPERATOR","->",773],["T_STRING","get",773],"(",["T_VARIABLE","$field_name",773],")",["T_OBJECT_OPERATOR","->",773],["T_STRING","getLangcode",773],"(",")",",",["T_WHITESPACE"," ",773],["T_VARIABLE","$langcode",773],",",["T_WHITESPACE"," ",773],["T_CONSTANT_ENCAPSED_STRING","'Field language works as expected after translating the entity and changing language.'",773],")",";",["T_WHITESPACE","\n    ",773],"}",["T_WHITESPACE","\n\n    ",774],["T_COMMENT","\/\/ Check that setting the default language to an existing translation\n",776],["T_WHITESPACE","    ",777],["T_COMMENT","\/\/ language causes an exception to be thrown.\n",777],["T_WHITESPACE","    ",778],["T_VARIABLE","$message",778],["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_CONSTANT_ENCAPSED_STRING","'An exception is thrown when setting the default language to an existing translation language'",778],";",["T_WHITESPACE","\n    ",778],["T_TRY","try",779],["T_WHITESPACE"," ",779],"{",["T_WHITESPACE","\n      ",779],["T_VARIABLE","$entity",780],["T_OBJECT_OPERATOR","->",780],"{",["T_VARIABLE","$langcode_key",780],"}",["T_OBJECT_OPERATOR","->",780],["T_STRING","value",780],["T_WHITESPACE"," ",780],"=",["T_WHITESPACE"," ",780],["T_VARIABLE","$this",780],["T_OBJECT_OPERATOR","->",780],["T_STRING","langcodes",780],"[",["T_LNUMBER","2",780],"]",";",["T_WHITESPACE","\n      ",780],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","fail",781],"(",["T_VARIABLE","$message",781],")",";",["T_WHITESPACE","\n    ",781],"}",["T_WHITESPACE","\n    ",782],["T_CATCH","catch",783],["T_WHITESPACE"," ",783],"(",["T_NS_SEPARATOR","\\",783],["T_STRING","InvalidArgumentException",783],["T_WHITESPACE"," ",783],["T_VARIABLE","$e",783],")",["T_WHITESPACE"," ",783],"{",["T_WHITESPACE","\n      ",783],["T_VARIABLE","$this",784],["T_OBJECT_OPERATOR","->",784],["T_STRING","pass",784],"(",["T_VARIABLE","$message",784],")",";",["T_WHITESPACE","\n    ",784],"}",["T_WHITESPACE","\n  ",785],"}",["T_WHITESPACE","\n\n  ",786],["T_DOC_COMMENT","\/**\n   * Tests how entity adapters work with translations.\n   *\/",788],["T_WHITESPACE","\n  ",790],["T_FUNCTION","function",791],["T_WHITESPACE"," ",791],["T_STRING","testEntityAdapter",791],"(",")",["T_WHITESPACE"," ",791],"{",["T_WHITESPACE","\n    ",791],["T_VARIABLE","$entity_type",792],["T_WHITESPACE"," ",792],"=",["T_WHITESPACE"," ",792],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",792],";",["T_WHITESPACE","\n    ",792],["T_VARIABLE","$default_langcode",793],["T_WHITESPACE"," ",793],"=",["T_WHITESPACE"," ",793],["T_CONSTANT_ENCAPSED_STRING","'en'",793],";",["T_WHITESPACE","\n    ",793],["T_VARIABLE","$values",794],"[",["T_VARIABLE","$default_langcode",794],"]",["T_WHITESPACE"," ",794],"=",["T_WHITESPACE"," ",794],["T_ARRAY","array",794],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",794],["T_WHITESPACE"," ",794],["T_DOUBLE_ARROW","=>",794],["T_WHITESPACE"," ",794],["T_VARIABLE","$this",794],["T_OBJECT_OPERATOR","->",794],["T_STRING","randomString",794],"(",")",")",";",["T_WHITESPACE","\n    ",794],["T_VARIABLE","$controller",795],["T_WHITESPACE"," ",795],"=",["T_WHITESPACE"," ",795],["T_VARIABLE","$this",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","entityManager",795],["T_OBJECT_OPERATOR","->",795],["T_STRING","getStorage",795],"(",["T_VARIABLE","$entity_type",795],")",";",["T_WHITESPACE","\n    ",795],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",796],["T_WHITESPACE","\n    ",796],["T_VARIABLE","$entity",797],["T_WHITESPACE"," ",797],"=",["T_WHITESPACE"," ",797],["T_VARIABLE","$controller",797],["T_OBJECT_OPERATOR","->",797],["T_STRING","create",797],"(",["T_VARIABLE","$values",797],"[",["T_VARIABLE","$default_langcode",797],"]",")",";",["T_WHITESPACE","\n\n    ",797],["T_FOREACH","foreach",799],["T_WHITESPACE"," ",799],"(",["T_VARIABLE","$this",799],["T_OBJECT_OPERATOR","->",799],["T_STRING","langcodes",799],["T_WHITESPACE"," ",799],["T_AS","as",799],["T_WHITESPACE"," ",799],["T_VARIABLE","$langcode",799],")",["T_WHITESPACE"," ",799],"{",["T_WHITESPACE","\n      ",799],["T_VARIABLE","$values",800],"[",["T_VARIABLE","$langcode",800],"]",["T_WHITESPACE"," ",800],"=",["T_WHITESPACE"," ",800],["T_ARRAY","array",800],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",800],["T_WHITESPACE"," ",800],["T_DOUBLE_ARROW","=>",800],["T_WHITESPACE"," ",800],["T_VARIABLE","$this",800],["T_OBJECT_OPERATOR","->",800],["T_STRING","randomString",800],"(",")",")",";",["T_WHITESPACE","\n      ",800],["T_VARIABLE","$entity",801],["T_OBJECT_OPERATOR","->",801],["T_STRING","addTranslation",801],"(",["T_VARIABLE","$langcode",801],",",["T_WHITESPACE"," ",801],["T_VARIABLE","$values",801],"[",["T_VARIABLE","$langcode",801],"]",")",";",["T_WHITESPACE","\n    ",801],"}",["T_WHITESPACE","\n\n    ",802],["T_VARIABLE","$langcodes",804],["T_WHITESPACE"," ",804],"=",["T_WHITESPACE"," ",804],["T_STRING","array_merge",804],"(",["T_ARRAY","array",804],"(",["T_VARIABLE","$default_langcode",804],")",",",["T_WHITESPACE"," ",804],["T_VARIABLE","$this",804],["T_OBJECT_OPERATOR","->",804],["T_STRING","langcodes",804],")",";",["T_WHITESPACE","\n    ",804],["T_FOREACH","foreach",805],["T_WHITESPACE"," ",805],"(",["T_VARIABLE","$langcodes",805],["T_WHITESPACE"," ",805],["T_AS","as",805],["T_WHITESPACE"," ",805],["T_VARIABLE","$langcode",805],")",["T_WHITESPACE"," ",805],"{",["T_WHITESPACE","\n      ",805],["T_VARIABLE","$adapter",806],["T_WHITESPACE"," ",806],"=",["T_WHITESPACE"," ",806],["T_VARIABLE","$entity",806],["T_OBJECT_OPERATOR","->",806],["T_STRING","getTranslation",806],"(",["T_VARIABLE","$langcode",806],")",["T_OBJECT_OPERATOR","->",806],["T_STRING","getTypedData",806],"(",")",";",["T_WHITESPACE","\n      ",806],["T_VARIABLE","$name",807],["T_WHITESPACE"," ",807],"=",["T_WHITESPACE"," ",807],["T_VARIABLE","$adapter",807],["T_OBJECT_OPERATOR","->",807],["T_STRING","get",807],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",807],")",["T_OBJECT_OPERATOR","->",807],["T_STRING","value",807],";",["T_WHITESPACE","\n      ",807],["T_VARIABLE","$this",808],["T_OBJECT_OPERATOR","->",808],["T_STRING","assertEqual",808],"(",["T_VARIABLE","$name",808],",",["T_WHITESPACE"," ",808],["T_VARIABLE","$values",808],"[",["T_VARIABLE","$langcode",808],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",808],"]",",",["T_WHITESPACE"," ",808],["T_STRING","SafeMarkup",808],["T_DOUBLE_COLON","::",808],["T_STRING","format",808],"(",["T_CONSTANT_ENCAPSED_STRING","'Name correctly retrieved from \"@langcode\" adapter'",808],",",["T_WHITESPACE"," ",808],["T_ARRAY","array",808],"(",["T_CONSTANT_ENCAPSED_STRING","'@langcode'",808],["T_WHITESPACE"," ",808],["T_DOUBLE_ARROW","=>",808],["T_WHITESPACE"," ",808],["T_VARIABLE","$langcode",808],")",")",")",";",["T_WHITESPACE","\n    ",808],"}",["T_WHITESPACE","\n  ",809],"}",["T_WHITESPACE","\n\n  ",810],["T_DOC_COMMENT","\/**\n   * Tests if entity references are correct after adding a new translation.\n   *\/",812],["T_WHITESPACE","\n  ",814],["T_PUBLIC","public",815],["T_WHITESPACE"," ",815],["T_FUNCTION","function",815],["T_WHITESPACE"," ",815],["T_STRING","testFieldEntityReference",815],"(",")",["T_WHITESPACE"," ",815],"{",["T_WHITESPACE","\n    ",815],["T_VARIABLE","$entity_type",816],["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",816],";",["T_WHITESPACE","\n    ",816],["T_VARIABLE","$controller",817],["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],["T_VARIABLE","$this",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","entityManager",817],["T_OBJECT_OPERATOR","->",817],["T_STRING","getStorage",817],"(",["T_VARIABLE","$entity_type",817],")",";",["T_WHITESPACE","\n    ",817],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",818],["T_WHITESPACE","\n    ",818],["T_VARIABLE","$entity",819],["T_WHITESPACE"," ",819],"=",["T_WHITESPACE"," ",819],["T_VARIABLE","$controller",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","create",819],"(",")",";",["T_WHITESPACE","\n\n    ",819],["T_FOREACH","foreach",821],["T_WHITESPACE"," ",821],"(",["T_VARIABLE","$this",821],["T_OBJECT_OPERATOR","->",821],["T_STRING","langcodes",821],["T_WHITESPACE"," ",821],["T_AS","as",821],["T_WHITESPACE"," ",821],["T_VARIABLE","$langcode",821],")",["T_WHITESPACE"," ",821],"{",["T_WHITESPACE","\n      ",821],["T_VARIABLE","$entity",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","addTranslation",822],"(",["T_VARIABLE","$langcode",822],")",";",["T_WHITESPACE","\n    ",822],"}",["T_WHITESPACE","\n\n    ",823],["T_VARIABLE","$default_langcode",825],["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],["T_VARIABLE","$entity",825],["T_OBJECT_OPERATOR","->",825],["T_STRING","getUntranslated",825],"(",")",["T_OBJECT_OPERATOR","->",825],["T_STRING","language",825],"(",")",["T_OBJECT_OPERATOR","->",825],["T_STRING","getId",825],"(",")",";",["T_WHITESPACE","\n    ",825],["T_FOREACH","foreach",826],["T_WHITESPACE"," ",826],"(",["T_STRING","array_keys",826],"(",["T_VARIABLE","$entity",826],["T_OBJECT_OPERATOR","->",826],["T_STRING","getTranslationLanguages",826],"(",")",")",["T_WHITESPACE"," ",826],["T_AS","as",826],["T_WHITESPACE"," ",826],["T_VARIABLE","$langcode",826],")",["T_WHITESPACE"," ",826],"{",["T_WHITESPACE","\n      ",826],["T_VARIABLE","$translation",827],["T_WHITESPACE"," ",827],"=",["T_WHITESPACE"," ",827],["T_VARIABLE","$entity",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","getTranslation",827],"(",["T_VARIABLE","$langcode",827],")",";",["T_WHITESPACE","\n      ",827],["T_FOREACH","foreach",828],["T_WHITESPACE"," ",828],"(",["T_VARIABLE","$translation",828],["T_OBJECT_OPERATOR","->",828],["T_STRING","getFields",828],"(",")",["T_WHITESPACE"," ",828],["T_AS","as",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$field_name",828],["T_WHITESPACE"," ",828],["T_DOUBLE_ARROW","=>",828],["T_WHITESPACE"," ",828],["T_VARIABLE","$field",828],")",["T_WHITESPACE"," ",828],"{",["T_WHITESPACE","\n        ",828],["T_IF","if",829],["T_WHITESPACE"," ",829],"(",["T_VARIABLE","$field",829],["T_OBJECT_OPERATOR","->",829],["T_STRING","getFieldDefinition",829],"(",")",["T_OBJECT_OPERATOR","->",829],["T_STRING","isTranslatable",829],"(",")",")",["T_WHITESPACE"," ",829],"{",["T_WHITESPACE","\n          ",829],["T_VARIABLE","$args",830],["T_WHITESPACE"," ",830],"=",["T_WHITESPACE"," ",830],"[",["T_CONSTANT_ENCAPSED_STRING","'%field_name'",830],["T_WHITESPACE"," ",830],["T_DOUBLE_ARROW","=>",830],["T_WHITESPACE"," ",830],["T_VARIABLE","$field_name",830],",",["T_WHITESPACE"," ",830],["T_CONSTANT_ENCAPSED_STRING","'%langcode'",830],["T_WHITESPACE"," ",830],["T_DOUBLE_ARROW","=>",830],["T_WHITESPACE"," ",830],["T_VARIABLE","$langcode",830],"]",";",["T_WHITESPACE","\n          ",830],["T_VARIABLE","$this",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","assertEqual",831],"(",["T_VARIABLE","$langcode",831],",",["T_WHITESPACE"," ",831],["T_VARIABLE","$field",831],["T_OBJECT_OPERATOR","->",831],["T_STRING","getEntity",831],"(",")",["T_OBJECT_OPERATOR","->",831],["T_STRING","language",831],"(",")",["T_OBJECT_OPERATOR","->",831],["T_STRING","getId",831],"(",")",",",["T_WHITESPACE"," ",831],["T_STRING","format_string",831],"(",["T_CONSTANT_ENCAPSED_STRING","'Translatable field %field_name on translation %langcode has correct entity reference in translation %langcode.'",831],",",["T_WHITESPACE"," ",831],["T_VARIABLE","$args",831],")",")",";",["T_WHITESPACE","\n        ",831],"}",["T_WHITESPACE","\n        ",832],["T_ELSE","else",833],["T_WHITESPACE"," ",833],"{",["T_WHITESPACE","\n          ",833],["T_VARIABLE","$args",834],["T_WHITESPACE"," ",834],"=",["T_WHITESPACE"," ",834],"[",["T_CONSTANT_ENCAPSED_STRING","'%field_name'",834],["T_WHITESPACE"," ",834],["T_DOUBLE_ARROW","=>",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$field_name",834],",",["T_WHITESPACE"," ",834],["T_CONSTANT_ENCAPSED_STRING","'%langcode'",834],["T_WHITESPACE"," ",834],["T_DOUBLE_ARROW","=>",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$langcode",834],",",["T_WHITESPACE"," ",834],["T_CONSTANT_ENCAPSED_STRING","'%default_langcode'",834],["T_WHITESPACE"," ",834],["T_DOUBLE_ARROW","=>",834],["T_WHITESPACE"," ",834],["T_VARIABLE","$default_langcode",834],"]",";",["T_WHITESPACE","\n          ",834],["T_VARIABLE","$this",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","assertEqual",835],"(",["T_VARIABLE","$default_langcode",835],",",["T_WHITESPACE"," ",835],["T_VARIABLE","$field",835],["T_OBJECT_OPERATOR","->",835],["T_STRING","getEntity",835],"(",")",["T_OBJECT_OPERATOR","->",835],["T_STRING","language",835],"(",")",["T_OBJECT_OPERATOR","->",835],["T_STRING","getId",835],"(",")",",",["T_WHITESPACE"," ",835],["T_STRING","format_string",835],"(",["T_CONSTANT_ENCAPSED_STRING","'Non translatable field %field_name on translation %langcode has correct entity reference in the default translation %default_langcode.'",835],",",["T_WHITESPACE"," ",835],["T_VARIABLE","$args",835],")",")",";",["T_WHITESPACE","\n        ",835],"}",["T_WHITESPACE","\n      ",836],"}",["T_WHITESPACE","\n    ",837],"}",["T_WHITESPACE","\n  ",838],"}",["T_WHITESPACE","\n\n  ",839],["T_DOC_COMMENT","\/**\n   * Tests if entity translation statuses are correct after removing two\n   * translation.\n   *\/",841],["T_WHITESPACE","\n  ",844],["T_PUBLIC","public",845],["T_WHITESPACE"," ",845],["T_FUNCTION","function",845],["T_WHITESPACE"," ",845],["T_STRING","testDeleteEntityTranslation",845],"(",")",["T_WHITESPACE"," ",845],"{",["T_WHITESPACE","\n    ",845],["T_VARIABLE","$entity_type",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",846],";",["T_WHITESPACE","\n    ",846],["T_VARIABLE","$controller",847],["T_WHITESPACE"," ",847],"=",["T_WHITESPACE"," ",847],["T_VARIABLE","$this",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","entityManager",847],["T_OBJECT_OPERATOR","->",847],["T_STRING","getStorage",847],"(",["T_VARIABLE","$entity_type",847],")",";",["T_WHITESPACE","\n\n    ",847],["T_COMMENT","\/\/ Create a translatable test field.\n",849],["T_WHITESPACE","    ",850],["T_VARIABLE","$field_storage",850],["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],["T_STRING","FieldStorageConfig",850],["T_DOUBLE_COLON","::",850],["T_STRING","create",850],"(","[",["T_WHITESPACE","\n      ",850],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",851],["T_WHITESPACE"," ",851],["T_DOUBLE_ARROW","=>",851],["T_WHITESPACE"," ",851],["T_VARIABLE","$entity_type",851],",",["T_WHITESPACE","\n      ",851],["T_CONSTANT_ENCAPSED_STRING","'field_name'",852],["T_WHITESPACE"," ",852],["T_DOUBLE_ARROW","=>",852],["T_WHITESPACE"," ",852],["T_CONSTANT_ENCAPSED_STRING","'translatable_test_field'",852],",",["T_WHITESPACE","\n      ",852],["T_CONSTANT_ENCAPSED_STRING","'type'",853],["T_WHITESPACE"," ",853],["T_DOUBLE_ARROW","=>",853],["T_WHITESPACE"," ",853],["T_CONSTANT_ENCAPSED_STRING","'field_test'",853],",",["T_WHITESPACE","\n    ",853],"]",")",";",["T_WHITESPACE","\n    ",854],["T_VARIABLE","$field_storage",855],["T_OBJECT_OPERATOR","->",855],["T_STRING","save",855],"(",")",";",["T_WHITESPACE","\n\n    ",855],["T_VARIABLE","$field",857],["T_WHITESPACE"," ",857],"=",["T_WHITESPACE"," ",857],["T_STRING","FieldConfig",857],["T_DOUBLE_COLON","::",857],["T_STRING","create",857],"(","[",["T_WHITESPACE","\n      ",857],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",858],["T_WHITESPACE"," ",858],["T_DOUBLE_ARROW","=>",858],["T_WHITESPACE"," ",858],["T_VARIABLE","$field_storage",858],",",["T_WHITESPACE","\n      ",858],["T_CONSTANT_ENCAPSED_STRING","'label'",859],["T_WHITESPACE"," ",859],["T_DOUBLE_ARROW","=>",859],["T_WHITESPACE"," ",859],["T_VARIABLE","$this",859],["T_OBJECT_OPERATOR","->",859],["T_STRING","randomMachineName",859],"(",")",",",["T_WHITESPACE","\n      ",859],["T_CONSTANT_ENCAPSED_STRING","'bundle'",860],["T_WHITESPACE"," ",860],["T_DOUBLE_ARROW","=>",860],["T_WHITESPACE"," ",860],["T_VARIABLE","$entity_type",860],",",["T_WHITESPACE","\n    ",860],"]",")",";",["T_WHITESPACE","\n    ",861],["T_VARIABLE","$field",862],["T_OBJECT_OPERATOR","->",862],["T_STRING","save",862],"(",")",";",["T_WHITESPACE","\n\n    ",862],["T_COMMENT","\/\/ Create an untranslatable test field.\n",864],["T_WHITESPACE","    ",865],["T_VARIABLE","$field_storage",865],["T_WHITESPACE"," ",865],"=",["T_WHITESPACE"," ",865],["T_STRING","FieldStorageConfig",865],["T_DOUBLE_COLON","::",865],["T_STRING","create",865],"(","[",["T_WHITESPACE","\n      ",865],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",866],["T_WHITESPACE"," ",866],["T_DOUBLE_ARROW","=>",866],["T_WHITESPACE"," ",866],["T_VARIABLE","$entity_type",866],",",["T_WHITESPACE","\n      ",866],["T_CONSTANT_ENCAPSED_STRING","'field_name'",867],["T_WHITESPACE"," ",867],["T_DOUBLE_ARROW","=>",867],["T_WHITESPACE"," ",867],["T_CONSTANT_ENCAPSED_STRING","'untranslatable_test_field'",867],",",["T_WHITESPACE","\n      ",867],["T_CONSTANT_ENCAPSED_STRING","'type'",868],["T_WHITESPACE"," ",868],["T_DOUBLE_ARROW","=>",868],["T_WHITESPACE"," ",868],["T_CONSTANT_ENCAPSED_STRING","'field_test'",868],",",["T_WHITESPACE","\n      ",868],["T_CONSTANT_ENCAPSED_STRING","'translatable'",869],["T_WHITESPACE"," ",869],["T_DOUBLE_ARROW","=>",869],["T_WHITESPACE"," ",869],["T_STRING","FALSE",869],",",["T_WHITESPACE","\n    ",869],"]",")",";",["T_WHITESPACE","\n    ",870],["T_VARIABLE","$field_storage",871],["T_OBJECT_OPERATOR","->",871],["T_STRING","save",871],"(",")",";",["T_WHITESPACE","\n\n    ",871],["T_VARIABLE","$field",873],["T_WHITESPACE"," ",873],"=",["T_WHITESPACE"," ",873],["T_STRING","FieldConfig",873],["T_DOUBLE_COLON","::",873],["T_STRING","create",873],"(","[",["T_WHITESPACE","\n      ",873],["T_CONSTANT_ENCAPSED_STRING","'field_storage'",874],["T_WHITESPACE"," ",874],["T_DOUBLE_ARROW","=>",874],["T_WHITESPACE"," ",874],["T_VARIABLE","$field_storage",874],",",["T_WHITESPACE","\n      ",874],["T_CONSTANT_ENCAPSED_STRING","'label'",875],["T_WHITESPACE"," ",875],["T_DOUBLE_ARROW","=>",875],["T_WHITESPACE"," ",875],["T_VARIABLE","$this",875],["T_OBJECT_OPERATOR","->",875],["T_STRING","randomMachineName",875],"(",")",",",["T_WHITESPACE","\n      ",875],["T_CONSTANT_ENCAPSED_STRING","'bundle'",876],["T_WHITESPACE"," ",876],["T_DOUBLE_ARROW","=>",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$entity_type",876],",",["T_WHITESPACE","\n    ",876],"]",")",";",["T_WHITESPACE","\n    ",877],["T_VARIABLE","$field",878],["T_OBJECT_OPERATOR","->",878],["T_STRING","save",878],"(",")",";",["T_WHITESPACE","\n\n    ",878],["T_COMMENT","\/\/ Create an entity with both translatable and untranslatable test fields.\n",880],["T_WHITESPACE","    ",881],["T_VARIABLE","$values",881],["T_WHITESPACE"," ",881],"=",["T_WHITESPACE"," ",881],["T_ARRAY","array",881],"(",["T_WHITESPACE","\n      ",881],["T_CONSTANT_ENCAPSED_STRING","'name'",882],["T_WHITESPACE"," ",882],["T_DOUBLE_ARROW","=>",882],["T_WHITESPACE"," ",882],["T_VARIABLE","$this",882],["T_OBJECT_OPERATOR","->",882],["T_STRING","randomString",882],"(",")",",",["T_WHITESPACE","\n      ",882],["T_CONSTANT_ENCAPSED_STRING","'translatable_test_field'",883],["T_WHITESPACE"," ",883],["T_DOUBLE_ARROW","=>",883],["T_WHITESPACE"," ",883],["T_VARIABLE","$this",883],["T_OBJECT_OPERATOR","->",883],["T_STRING","randomString",883],"(",")",",",["T_WHITESPACE","\n      ",883],["T_CONSTANT_ENCAPSED_STRING","'untranslatable_test_field'",884],["T_WHITESPACE"," ",884],["T_DOUBLE_ARROW","=>",884],["T_WHITESPACE"," ",884],["T_VARIABLE","$this",884],["T_OBJECT_OPERATOR","->",884],["T_STRING","randomString",884],"(",")",",",["T_WHITESPACE","\n    ",884],")",";",["T_WHITESPACE","\n\n    ",885],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",887],["T_WHITESPACE","\n    ",887],["T_VARIABLE","$entity",888],["T_WHITESPACE"," ",888],"=",["T_WHITESPACE"," ",888],["T_VARIABLE","$controller",888],["T_OBJECT_OPERATOR","->",888],["T_STRING","create",888],"(",["T_VARIABLE","$values",888],")",";",["T_WHITESPACE","\n\n    ",888],["T_FOREACH","foreach",890],["T_WHITESPACE"," ",890],"(",["T_VARIABLE","$this",890],["T_OBJECT_OPERATOR","->",890],["T_STRING","langcodes",890],["T_WHITESPACE"," ",890],["T_AS","as",890],["T_WHITESPACE"," ",890],["T_VARIABLE","$langcode",890],")",["T_WHITESPACE"," ",890],"{",["T_WHITESPACE","\n      ",890],["T_VARIABLE","$entity",891],["T_OBJECT_OPERATOR","->",891],["T_STRING","addTranslation",891],"(",["T_VARIABLE","$langcode",891],",",["T_WHITESPACE"," ",891],["T_VARIABLE","$values",891],")",";",["T_WHITESPACE","\n    ",891],"}",["T_WHITESPACE","\n    ",892],["T_VARIABLE","$entity",893],["T_OBJECT_OPERATOR","->",893],["T_STRING","save",893],"(",")",";",["T_WHITESPACE","\n\n    ",893],["T_COMMENT","\/\/ Assert there are no deleted languages in the lists yet.\n",895],["T_WHITESPACE","    ",896],["T_VARIABLE","$this",896],["T_OBJECT_OPERATOR","->",896],["T_STRING","assertNull",896],"(",["T_NS_SEPARATOR","\\",896],["T_STRING","Drupal",896],["T_DOUBLE_COLON","::",896],["T_STRING","state",896],"(",")",["T_OBJECT_OPERATOR","->",896],["T_STRING","get",896],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.translatable_test_field'",896],")",")",";",["T_WHITESPACE","\n    ",896],["T_VARIABLE","$this",897],["T_OBJECT_OPERATOR","->",897],["T_STRING","assertNull",897],"(",["T_NS_SEPARATOR","\\",897],["T_STRING","Drupal",897],["T_DOUBLE_COLON","::",897],["T_STRING","state",897],"(",")",["T_OBJECT_OPERATOR","->",897],["T_STRING","get",897],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.untranslatable_test_field'",897],")",")",";",["T_WHITESPACE","\n\n    ",897],["T_COMMENT","\/\/ Remove the second and third langcodes from the entity.\n",899],["T_WHITESPACE","    ",900],["T_VARIABLE","$entity",900],["T_OBJECT_OPERATOR","->",900],["T_STRING","removeTranslation",900],"(",["T_CONSTANT_ENCAPSED_STRING","'l1'",900],")",";",["T_WHITESPACE","\n    ",900],["T_VARIABLE","$entity",901],["T_OBJECT_OPERATOR","->",901],["T_STRING","removeTranslation",901],"(",["T_CONSTANT_ENCAPSED_STRING","'l2'",901],")",";",["T_WHITESPACE","\n    ",901],["T_VARIABLE","$entity",902],["T_OBJECT_OPERATOR","->",902],["T_STRING","save",902],"(",")",";",["T_WHITESPACE","\n\n    ",902],["T_COMMENT","\/\/ Ensure that for the translatable test field the second and third\n",904],["T_WHITESPACE","    ",905],["T_COMMENT","\/\/ langcodes are in the deleted languages list.\n",905],["T_WHITESPACE","    ",906],["T_VARIABLE","$actual",906],["T_WHITESPACE"," ",906],"=",["T_WHITESPACE"," ",906],["T_NS_SEPARATOR","\\",906],["T_STRING","Drupal",906],["T_DOUBLE_COLON","::",906],["T_STRING","state",906],"(",")",["T_OBJECT_OPERATOR","->",906],["T_STRING","get",906],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.translatable_test_field'",906],")",";",["T_WHITESPACE","\n    ",906],["T_VARIABLE","$expected_translatable",907],["T_WHITESPACE"," ",907],"=",["T_WHITESPACE"," ",907],"[",["T_CONSTANT_ENCAPSED_STRING","'l1'",907],",",["T_WHITESPACE"," ",907],["T_CONSTANT_ENCAPSED_STRING","'l2'",907],"]",";",["T_WHITESPACE","\n    ",907],["T_STRING","sort",908],"(",["T_VARIABLE","$actual",908],")",";",["T_WHITESPACE","\n    ",908],["T_STRING","sort",909],"(",["T_VARIABLE","$expected_translatable",909],")",";",["T_WHITESPACE","\n    ",909],["T_VARIABLE","$this",910],["T_OBJECT_OPERATOR","->",910],["T_STRING","assertEqual",910],"(",["T_VARIABLE","$actual",910],",",["T_WHITESPACE"," ",910],["T_VARIABLE","$expected_translatable",910],")",";",["T_WHITESPACE","\n    ",910],["T_COMMENT","\/\/ Ensure that the untranslatable test field is untouched.\n",911],["T_WHITESPACE","    ",912],["T_VARIABLE","$this",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","assertNull",912],"(",["T_NS_SEPARATOR","\\",912],["T_STRING","Drupal",912],["T_DOUBLE_COLON","::",912],["T_STRING","state",912],"(",")",["T_OBJECT_OPERATOR","->",912],["T_STRING","get",912],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.untranslatable_test_field'",912],")",")",";",["T_WHITESPACE","\n\n    ",912],["T_COMMENT","\/\/ Delete the entity, which removes all remaining translations.\n",914],["T_WHITESPACE","    ",915],["T_VARIABLE","$entity",915],["T_OBJECT_OPERATOR","->",915],["T_STRING","delete",915],"(",")",";",["T_WHITESPACE","\n\n    ",915],["T_COMMENT","\/\/ All languages have been deleted now.\n",917],["T_WHITESPACE","    ",918],["T_VARIABLE","$actual",918],["T_WHITESPACE"," ",918],"=",["T_WHITESPACE"," ",918],["T_NS_SEPARATOR","\\",918],["T_STRING","Drupal",918],["T_DOUBLE_COLON","::",918],["T_STRING","state",918],"(",")",["T_OBJECT_OPERATOR","->",918],["T_STRING","get",918],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.translatable_test_field'",918],")",";",["T_WHITESPACE","\n    ",918],["T_VARIABLE","$expected_translatable",919],"[","]",["T_WHITESPACE"," ",919],"=",["T_WHITESPACE"," ",919],["T_CONSTANT_ENCAPSED_STRING","'en'",919],";",["T_WHITESPACE","\n    ",919],["T_VARIABLE","$expected_translatable",920],"[","]",["T_WHITESPACE"," ",920],"=",["T_WHITESPACE"," ",920],["T_CONSTANT_ENCAPSED_STRING","'l0'",920],";",["T_WHITESPACE","\n    ",920],["T_STRING","sort",921],"(",["T_VARIABLE","$actual",921],")",";",["T_WHITESPACE","\n    ",921],["T_STRING","sort",922],"(",["T_VARIABLE","$expected_translatable",922],")",";",["T_WHITESPACE","\n    ",922],["T_VARIABLE","$this",923],["T_OBJECT_OPERATOR","->",923],["T_STRING","assertEqual",923],"(",["T_VARIABLE","$actual",923],",",["T_WHITESPACE"," ",923],["T_VARIABLE","$expected_translatable",923],")",";",["T_WHITESPACE","\n\n    ",923],["T_COMMENT","\/\/ The untranslatable field is shared and only deleted once, for the\n",925],["T_WHITESPACE","    ",926],["T_COMMENT","\/\/ default langcode.\n",926],["T_WHITESPACE","    ",927],["T_VARIABLE","$actual",927],["T_WHITESPACE"," ",927],"=",["T_WHITESPACE"," ",927],["T_NS_SEPARATOR","\\",927],["T_STRING","Drupal",927],["T_DOUBLE_COLON","::",927],["T_STRING","state",927],"(",")",["T_OBJECT_OPERATOR","->",927],["T_STRING","get",927],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test.delete.untranslatable_test_field'",927],")",";",["T_WHITESPACE","\n    ",927],["T_VARIABLE","$expected_untranslatable",928],["T_WHITESPACE"," ",928],"=",["T_WHITESPACE"," ",928],"[",["T_CONSTANT_ENCAPSED_STRING","'en'",928],"]",";",["T_WHITESPACE","\n    ",928],["T_STRING","sort",929],"(",["T_VARIABLE","$actual",929],")",";",["T_WHITESPACE","\n    ",929],["T_STRING","sort",930],"(",["T_VARIABLE","$expected_untranslatable",930],")",";",["T_WHITESPACE","\n    ",930],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","assertEqual",931],"(",["T_VARIABLE","$actual",931],",",["T_WHITESPACE"," ",931],["T_VARIABLE","$expected_untranslatable",931],")",";",["T_WHITESPACE","\n  ",931],"}",["T_WHITESPACE","\n\n",932],"}",["T_WHITESPACE","\n",934]]
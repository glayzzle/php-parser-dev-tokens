[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DatabaseExceptionWrapper",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests of the core database system.\n *\n * @group Database\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ConnectionTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","DatabaseTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Tests that connections return appropriate connection objects.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","testConnectionRouting",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_COMMENT","\/\/ Clone the primary credentials to a replica connection.\n",19],["T_WHITESPACE","    ",20],["T_COMMENT","\/\/ Note this will result in two independent connection objects that happen\n",20],["T_WHITESPACE","    ",21],["T_COMMENT","\/\/ to point to the same place.\n",21],["T_WHITESPACE","    ",22],["T_VARIABLE","$connection_info",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","Database",22],["T_DOUBLE_COLON","::",22],["T_STRING","getConnectionInfo",22],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",22],")",";",["T_WHITESPACE","\n    ",22],["T_STRING","Database",23],["T_DOUBLE_COLON","::",23],["T_STRING","addConnectionInfo",23],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'replica'",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$connection_info",23],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",23],"]",")",";",["T_WHITESPACE","\n\n    ",23],["T_VARIABLE","$db1",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","Database",25],["T_DOUBLE_COLON","::",25],["T_STRING","getConnection",25],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'default'",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$db2",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","Database",26],["T_DOUBLE_COLON","::",26],["T_STRING","getConnection",26],"(",["T_CONSTANT_ENCAPSED_STRING","'replica'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'default'",26],")",";",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","assertNotNull",28],"(",["T_VARIABLE","$db1",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'default connection is a real connection object.'",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","assertNotNull",29],"(",["T_VARIABLE","$db2",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'replica connection is a real connection object.'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","assertNotIdentical",30],"(",["T_VARIABLE","$db1",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$db2",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Each target refers to a different connection.'",30],")",";",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Try to open those targets another time, that should return the same objects.\n",32],["T_WHITESPACE","    ",33],["T_VARIABLE","$db1b",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","Database",33],["T_DOUBLE_COLON","::",33],["T_STRING","getConnection",33],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'default'",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$db2b",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","Database",34],["T_DOUBLE_COLON","::",34],["T_STRING","getConnection",34],"(",["T_CONSTANT_ENCAPSED_STRING","'replica'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'default'",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertIdentical",35],"(",["T_VARIABLE","$db1",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$db1b",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'A second call to getConnection() returns the same object.'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertIdentical",36],"(",["T_VARIABLE","$db2",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$db2b",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'A second call to getConnection() returns the same object.'",36],")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Try to open an unknown target.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$unknown_target",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","randomMachineName",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$db3",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","Database",40],["T_DOUBLE_COLON","::",40],["T_STRING","getConnection",40],"(",["T_VARIABLE","$unknown_target",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'default'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertNotNull",41],"(",["T_VARIABLE","$db3",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Opening an unknown target returns a real connection object.'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertIdentical",42],"(",["T_VARIABLE","$db1",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$db3",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'An unknown target opens the default connection.'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Try to open that unknown target another time, that should return the same object.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$db3b",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","Database",45],["T_DOUBLE_COLON","::",45],["T_STRING","getConnection",45],"(",["T_VARIABLE","$unknown_target",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'default'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertIdentical",46],"(",["T_VARIABLE","$db3",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$db3b",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'A second call to getConnection() returns the same object.'",46],")",";",["T_WHITESPACE","\n  ",46],"}",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * Tests that connections return appropriate connection objects.\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","testConnectionRoutingOverride",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_COMMENT","\/\/ Clone the primary credentials to a replica connection.\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ Note this will result in two independent connection objects that happen\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ to point to the same place.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$connection_info",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Database",56],["T_DOUBLE_COLON","::",56],["T_STRING","getConnectionInfo",56],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",56],")",";",["T_WHITESPACE","\n    ",56],["T_STRING","Database",57],["T_DOUBLE_COLON","::",57],["T_STRING","addConnectionInfo",57],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'replica'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$connection_info",57],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",57],"]",")",";",["T_WHITESPACE","\n\n    ",57],["T_STRING","Database",59],["T_DOUBLE_COLON","::",59],["T_STRING","ignoreTarget",59],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'replica'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$db1",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Database",61],["T_DOUBLE_COLON","::",61],["T_STRING","getConnection",61],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'default'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$db2",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","Database",62],["T_DOUBLE_COLON","::",62],["T_STRING","getConnection",62],"(",["T_CONSTANT_ENCAPSED_STRING","'replica'",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'default'",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertIdentical",64],"(",["T_VARIABLE","$db1",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$db2",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Both targets refer to the same connection.'",64],")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Tests the closing of a database connection.\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","testConnectionClosing",70],"(",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Open the default target so we have an object to compare.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$db1",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Database",72],["T_DOUBLE_COLON","::",72],["T_STRING","getConnection",72],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'default'",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Try to close the default connection, then open a new one.\n",74],["T_WHITESPACE","    ",75],["T_STRING","Database",75],["T_DOUBLE_COLON","::",75],["T_STRING","closeConnection",75],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'default'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$db2",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","Database",76],["T_DOUBLE_COLON","::",76],["T_STRING","getConnection",76],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'default'",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Opening a connection after closing it should yield an object different than the original.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertNotIdentical",79],"(",["T_VARIABLE","$db1",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$db2",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'Opening the default connection after it is closed returns a new object.'",79],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Tests the connection options of the active database.\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","testConnectionOptions",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$connection_info",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","Database",86],["T_DOUBLE_COLON","::",86],["T_STRING","getConnectionInfo",86],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Be sure we're connected to the default database.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$db",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","Database",89],["T_DOUBLE_COLON","::",89],["T_STRING","getConnection",89],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'default'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$connectionOptions",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$db",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getConnectionOptions",90],"(",")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ In the MySQL driver, the port can be different, so check individual\n",92],["T_WHITESPACE","    ",93],["T_COMMENT","\/\/ options.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertEqual",94],"(",["T_VARIABLE","$connection_info",94],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",94],"]","[",["T_CONSTANT_ENCAPSED_STRING","'driver'",94],"]",",",["T_WHITESPACE"," ",94],["T_VARIABLE","$connectionOptions",94],"[",["T_CONSTANT_ENCAPSED_STRING","'driver'",94],"]",",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'The default connection info driver matches the current connection options driver.'",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertEqual",95],"(",["T_VARIABLE","$connection_info",95],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",95],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",95],"]",",",["T_WHITESPACE"," ",95],["T_VARIABLE","$connectionOptions",95],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",95],"]",",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'The default connection info database matches the current connection options database.'",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Set up identical replica and confirm connection options are identical.\n",97],["T_WHITESPACE","    ",98],["T_STRING","Database",98],["T_DOUBLE_COLON","::",98],["T_STRING","addConnectionInfo",98],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'replica'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$connection_info",98],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",98],"]",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$db2",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","Database",99],["T_DOUBLE_COLON","::",99],["T_STRING","getConnection",99],"(",["T_CONSTANT_ENCAPSED_STRING","'replica'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'default'",99],")",";",["T_WHITESPACE","\n    ",99],["T_COMMENT","\/\/ Getting a driver class ensures the namespace option is set.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEquals",101],"(",["T_VARIABLE","$db",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getDriverClass",101],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",101],")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$db2",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getDriverClass",101],"(",["T_CONSTANT_ENCAPSED_STRING","'select'",101],")",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$connectionOptions2",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$db2",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getConnectionOptions",102],"(",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Get a fresh copy of the default connection options.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$connectionOptions",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$db",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getConnectionOptions",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertIdentical",106],"(",["T_VARIABLE","$connectionOptions",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$connectionOptions2",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'The default and replica connection options are identical.'",106],")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Set up a new connection with different connection info.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$test",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$connection_info",109],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",109],"]",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$test",110],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",110],"]",["T_WHITESPACE"," ",110],["T_CONCAT_EQUAL",".=",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'test'",110],";",["T_WHITESPACE","\n    ",110],["T_STRING","Database",111],["T_DOUBLE_COLON","::",111],["T_STRING","addConnectionInfo",111],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'default'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$test",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$connection_info",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Database",112],["T_DOUBLE_COLON","::",112],["T_STRING","getConnectionInfo",112],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",112],")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Get a fresh copy of the default connection options.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$connectionOptions",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$db",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getConnectionOptions",115],"(",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertNotEqual",116],"(",["T_VARIABLE","$connection_info",116],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",116],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$connectionOptions",116],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",116],"]",",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'The test connection info database does not match the current connection options database.'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Ensure that you cannot execute multiple statements on phpversion() > 5.5.21 or > 5.6.5.\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","testMultipleStatementsForNewPhp",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_COMMENT","\/\/ This just tests mysql, as other PDO integrations don't allow disabling\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ multiple statements.\n",124],["T_WHITESPACE","    ",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_STRING","Database",125],["T_DOUBLE_COLON","::",125],["T_STRING","getConnection",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","databaseType",125],"(",")",["T_WHITESPACE"," ",125],["T_IS_NOT_IDENTICAL","!==",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'mysql'",125],["T_WHITESPACE"," ",125],["T_BOOLEAN_OR","||",125],["T_WHITESPACE"," ",125],"!",["T_STRING","defined",125],"(",["T_CONSTANT_ENCAPSED_STRING","'\\PDO::MYSQL_ATTR_MULTI_STATEMENTS'",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_RETURN","return",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_VARIABLE","$db",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","Database",129],["T_DOUBLE_COLON","::",129],["T_STRING","getConnection",129],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'default'",129],")",";",["T_WHITESPACE","\n    ",129],["T_COMMENT","\/\/ Disable the protection at the PHP level.\n",130],["T_WHITESPACE","    ",131],["T_TRY","try",131],["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$db",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","query",132],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {test}; SELECT * FROM {test_people}'",132],",",["T_WHITESPACE","\n        ",132],"[","]",",",["T_WHITESPACE","\n        ",133],"[",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'allow_delimiter_in_query'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_STRING","TRUE",134],["T_WHITESPACE"," ",134],"]",["T_WHITESPACE","\n      ",134],")",";",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","fail",136],"(",["T_CONSTANT_ENCAPSED_STRING","'No PDO exception thrown for multiple statements.'",136],")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n    ",137],["T_CATCH","catch",138],["T_WHITESPACE"," ",138],"(",["T_STRING","DatabaseExceptionWrapper",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$e",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","pass",139],"(",["T_CONSTANT_ENCAPSED_STRING","'PDO exception thrown for multiple statements.'",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n  ",141],["T_DOC_COMMENT","\/**\n   * Ensure that you cannot execute multiple statements.\n   *\/",143],["T_WHITESPACE","\n  ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","testMultipleStatements",146],"(",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n\n    ",146],["T_VARIABLE","$db",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","Database",148],["T_DOUBLE_COLON","::",148],["T_STRING","getConnection",148],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'default'",148],")",";",["T_WHITESPACE","\n    ",148],["T_TRY","try",149],["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n      ",149],["T_VARIABLE","$db",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","query",150],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {test}; SELECT * FROM {test_people}'",150],")",";",["T_WHITESPACE","\n      ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","fail",151],"(",["T_CONSTANT_ENCAPSED_STRING","'No exception thrown for multiple statements.'",151],")",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n    ",152],["T_CATCH","catch",153],["T_WHITESPACE"," ",153],"(",["T_NS_SEPARATOR","\\",153],["T_STRING","InvalidArgumentException",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$e",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","pass",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception thrown for multiple statements.'",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n  ",155],"}",["T_WHITESPACE","\n\n  ",156],["T_DOC_COMMENT","\/**\n   * Test the escapeTable(), escapeField() and escapeAlias() methods with all possible reserved words in PostgreSQL.\n   *\/",158],["T_WHITESPACE","\n  ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","testPostgresqlReservedWords",161],"(",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_STRING","Database",162],["T_DOUBLE_COLON","::",162],["T_STRING","getConnection",162],"(",")",["T_OBJECT_OPERATOR","->",162],["T_STRING","databaseType",162],"(",")",["T_WHITESPACE"," ",162],["T_IS_NOT_IDENTICAL","!==",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_RETURN","return",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_VARIABLE","$db",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","Database",166],["T_DOUBLE_COLON","::",166],["T_STRING","getConnection",166],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'default'",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$stmt",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$db",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","query",167],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT word FROM pg_get_keywords() WHERE catcode IN ('R', 'T')\"",167],")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$stmt",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","execute",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_FOREACH","foreach",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$stmt",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","fetchAllAssoc",169],"(",["T_CONSTANT_ENCAPSED_STRING","'word'",169],")",["T_WHITESPACE"," ",169],["T_AS","as",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$word",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$row",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n      ",169],["T_VARIABLE","$expected",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'\"'",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_VARIABLE","$word",170],["T_WHITESPACE"," ",170],".",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'\"'",170],";",["T_WHITESPACE","\n      ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertIdentical",171],"(",["T_VARIABLE","$db",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","escapeTable",171],"(",["T_VARIABLE","$word",171],")",",",["T_WHITESPACE"," ",171],["T_VARIABLE","$expected",171],",",["T_WHITESPACE"," ",171],["T_STRING","format_string",171],"(",["T_CONSTANT_ENCAPSED_STRING","'The reserved word %word was correctly escaped when used as a table name.'",171],",",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","'%word'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$word",171],")",")",")",";",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertIdentical",172],"(",["T_VARIABLE","$db",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","escapeField",172],"(",["T_VARIABLE","$word",172],")",",",["T_WHITESPACE"," ",172],["T_VARIABLE","$expected",172],",",["T_WHITESPACE"," ",172],["T_STRING","format_string",172],"(",["T_CONSTANT_ENCAPSED_STRING","'The reserved word %word was correctly escaped when used as a column name.'",172],",",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_CONSTANT_ENCAPSED_STRING","'%word'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$word",172],")",")",")",";",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertIdentical",173],"(",["T_VARIABLE","$db",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","escapeAlias",173],"(",["T_VARIABLE","$word",173],")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$expected",173],",",["T_WHITESPACE"," ",173],["T_STRING","format_string",173],"(",["T_CONSTANT_ENCAPSED_STRING","'The reserved word %word was correctly escaped when used as an alias.'",173],",",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",["T_CONSTANT_ENCAPSED_STRING","'%word'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$word",173],")",")",")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n  ",174],"}",["T_WHITESPACE","\n\n",175],"}",["T_WHITESPACE","\n",177]]
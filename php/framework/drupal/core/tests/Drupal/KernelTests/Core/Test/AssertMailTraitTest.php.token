[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Test",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AssertMailTrait",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests \\Drupal\\Core\\Test\\AssertMailTrait works.\n *\n * @group Test\n *\n * @coversDefaultClass \\Drupal\\Core\\Test\\AssertMailTrait\n *\/",8],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","AssertMailTraitTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","KernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n  ",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","AssertMailTrait",16],";",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Tests that the maintenance theme initializes the theme and its base themes.\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","testAssertMailTrait",21],"(",")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/* @var \\Drupal\\Core\\Mail\\MailManagerInterface $mail_service *\/",22],["T_WHITESPACE","\n    ",22],["T_VARIABLE","$mail_service",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Drupal",23],["T_DOUBLE_COLON","::",23],["T_STRING","service",23],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.mail'",23],")",";",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/\/ Create an email.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$subject",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","randomString",26],"(",["T_LNUMBER","64",26],")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$body",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","randomString",27],"(",["T_LNUMBER","128",27],")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$message",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[",["T_WHITESPACE","\n      ",28],["T_CONSTANT_ENCAPSED_STRING","'id'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",29],",",["T_WHITESPACE","\n      ",29],["T_CONSTANT_ENCAPSED_STRING","'headers'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'text\/html'",30],"]",",",["T_WHITESPACE","\n      ",30],["T_CONSTANT_ENCAPSED_STRING","'subject'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$subject",31],",",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'to'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'foobar@example.com'",32],",",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'body'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$body",33],",",["T_WHITESPACE","\n    ",33],"]",";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Before we send the email, \\Drupal\\Core\\Test\\AssertMailTrait::getMails()\n",36],["T_WHITESPACE","    ",37],["T_COMMENT","\/\/ should return an empty array.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$captured_emails",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getMails",38],"(",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertCount",39],"(",["T_LNUMBER","0",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$captured_emails",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'The captured emails queue is empty.'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Send the email.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$mail_service",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getInstance",42],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'simpletest'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'key'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",42],"]",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","mail",42],"(",["T_VARIABLE","$message",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Ensure that there is one email in the captured emails array.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$captured_emails",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getMails",45],"(",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertEquals",46],"(",["T_STRING","count",46],"(",["T_VARIABLE","$captured_emails",46],")",",",["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'One email was captured.'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Assert that the email was sent by iterating over the message properties\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ and ensuring that they are captured intact.\n",49],["T_WHITESPACE","    ",50],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$message",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$field",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$value",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertMail",51],"(",["T_VARIABLE","$field",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$value",51],",",["T_WHITESPACE"," ",51],"\"",["T_ENCAPSED_AND_WHITESPACE","The email was sent and the value for property ",51],["T_VARIABLE","$field",51],["T_ENCAPSED_AND_WHITESPACE"," is intact.",51],"\"",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Send additional emails so more than one email is captured.\n",54],["T_WHITESPACE","    ",55],["T_FOR","for",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$index",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_LNUMBER","0",55],";",["T_WHITESPACE"," ",55],["T_VARIABLE","$index",55],["T_WHITESPACE"," ",55],"<",["T_WHITESPACE"," ",55],["T_LNUMBER","5",55],";",["T_WHITESPACE"," ",55],["T_VARIABLE","$index",55],["T_INC","++",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$message",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'id'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test_'",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$index",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'headers'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],"[",["T_CONSTANT_ENCAPSED_STRING","'Content-type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'text\/html'",58],"]",",",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'subject'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","randomString",59],"(",["T_LNUMBER","64",59],")",",",["T_WHITESPACE","\n        ",59],["T_CONSTANT_ENCAPSED_STRING","'to'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","randomMachineName",60],"(",["T_LNUMBER","32",60],")",["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",60],",",["T_WHITESPACE","\n        ",60],["T_CONSTANT_ENCAPSED_STRING","'body'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","randomString",61],"(",["T_LNUMBER","512",61],")",",",["T_WHITESPACE","\n      ",61],"]",";",["T_WHITESPACE","\n      ",62],["T_VARIABLE","$mail_service",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getInstance",63],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'key'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$index",63],"]",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","mail",63],"(",["T_VARIABLE","$message",63],")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ There should now be 6 emails captured.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$captured_emails",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMails",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertCount",68],"(",["T_LNUMBER","6",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$captured_emails",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'All emails were captured.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Test different ways of getting filtered emails via\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ \\Drupal\\Core\\Test\\AssertMailTrait::getMails().\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$captured_emails",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getMails",72],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",72],"]",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertCount",73],"(",["T_LNUMBER","1",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$captured_emails",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Only one email is returned when filtering by id.'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$captured_emails",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getMails",74],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'subject'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$subject",74],"]",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertCount",75],"(",["T_LNUMBER","1",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$captured_emails",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'Only one email is returned when filtering by id and subject.'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$captured_emails",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getMails",76],"(","[",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'id'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",77],",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'subject'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$subject",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'from'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'this_was_not_used@example.com'",79],",",["T_WHITESPACE","\n    ",79],"]",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertCount",81],"(",["T_LNUMBER","0",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$captured_emails",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'No emails are returned when querying with an unused from address.'",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Send the last email again, so we can confirm that\n",83],["T_WHITESPACE","    ",84],["T_COMMENT","\/\/ \\Drupal\\Core\\Test\\AssertMailTrait::getMails() filters correctly returns\n",84],["T_WHITESPACE","    ",85],["T_COMMENT","\/\/ all emails with a given property\/value.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$mail_service",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getInstance",86],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'key'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$index",86],"]",")",["T_OBJECT_OPERATOR","->",86],["T_STRING","mail",86],"(",["T_VARIABLE","$message",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$captured_emails",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getMails",87],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'drupal_mail_test_4'",87],"]",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertCount",88],"(",["T_LNUMBER","2",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$captured_emails",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'All emails with the same id are returned when filtering by id.'",88],")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n",89],"}",["T_WHITESPACE","\n",91]]
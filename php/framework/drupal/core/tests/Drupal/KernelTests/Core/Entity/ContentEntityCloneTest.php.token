[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","entity_test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTestMul",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigurableLanguage",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests proper cloning of content entities.\n *\n * @group Entity\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","ContentEntityCloneTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","EntityKernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$modules",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",18],"]",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","setUp",24],"(",")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Enable an additional language.\n",26],["T_WHITESPACE","    ",27],["T_STRING","ConfigurableLanguage",27],["T_DOUBLE_COLON","::",27],["T_STRING","createFromLangcode",27],"(",["T_CONSTANT_ENCAPSED_STRING","'de'",27],")",["T_OBJECT_OPERATOR","->",27],["T_STRING","save",27],"(",")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","installEntitySchema",29],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",29],")",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Tests if entity references on fields are still correct after cloning.\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","testFieldEntityReferenceAfterClone",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$user",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","createUser",36],"(",")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Create a test entity.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$entity",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","EntityTestMul",39],["T_DOUBLE_COLON","::",39],["T_STRING","create",39],"(","[",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'name'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","randomString",40],"(",")",",",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'user_id'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$user",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",",",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'language'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'en'",42],",",["T_WHITESPACE","\n    ",42],"]",")",";",["T_WHITESPACE","\n\n    ",43],["T_VARIABLE","$clone",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CLONE","clone",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$entity",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","addTranslation",45],"(",["T_CONSTANT_ENCAPSED_STRING","'de'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_VARIABLE","$entity",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getTranslationLanguages",47],"(",")",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$clone",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getTranslationLanguages",47],"(",")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'The entity and its clone have the same translation languages.'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$default_langcode",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$entity",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getUntranslated",49],"(",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","language",49],"(",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","getId",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_STRING","array_keys",50],"(",["T_VARIABLE","$clone",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getTranslationLanguages",50],"(",")",")",["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$langcode",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$translation",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$clone",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getTranslation",51],"(",["T_VARIABLE","$langcode",51],")",";",["T_WHITESPACE","\n      ",51],["T_FOREACH","foreach",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$translation",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getFields",52],"(",")",["T_WHITESPACE"," ",52],["T_AS","as",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$field_name",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$field",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n        ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$field",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getFieldDefinition",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","isTranslatable",53],"(",")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n          ",53],["T_VARIABLE","$args",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],"[",["T_CONSTANT_ENCAPSED_STRING","'%field_name'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$field_name",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'%langcode'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$langcode",54],"]",";",["T_WHITESPACE","\n          ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$langcode",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$field",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getEntity",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","language",55],"(",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","getId",55],"(",")",",",["T_WHITESPACE"," ",55],["T_STRING","format_string",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Translatable field %field_name on translation %langcode has correct entity reference in translation %langcode after cloning.'",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$args",55],")",")",";",["T_WHITESPACE","\n        ",55],"}",["T_WHITESPACE","\n        ",56],["T_ELSE","else",57],["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n          ",57],["T_VARIABLE","$args",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],"[",["T_CONSTANT_ENCAPSED_STRING","'%field_name'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$field_name",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'%langcode'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$langcode",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'%default_langcode'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$default_langcode",58],"]",";",["T_WHITESPACE","\n          ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertEqual",59],"(",["T_VARIABLE","$default_langcode",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$field",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getEntity",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","language",59],"(",")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getId",59],"(",")",",",["T_WHITESPACE"," ",59],["T_STRING","format_string",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Non translatable field %field_name on translation %langcode has correct entity reference in the default translation %default_langcode after cloning.'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$args",59],")",")",";",["T_WHITESPACE","\n        ",59],"}",["T_WHITESPACE","\n      ",60],"}",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Tests that the flag for enforcing a new entity is not shared.\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","testEnforceIsNewOnClonedEntityTranslation",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Create a test entity.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$entity",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","EntityTestMul",70],["T_DOUBLE_COLON","::",70],["T_STRING","create",70],"(","[",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'name'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","randomString",71],"(",")",",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'language'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'en'",72],",",["T_WHITESPACE","\n    ",72],"]",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$entity",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","save",74],"(",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$entity_translation",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$entity",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","addTranslation",75],"(",["T_CONSTANT_ENCAPSED_STRING","'de'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$entity",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","save",76],"(",")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ The entity is not new anymore.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertFalse",79],"(",["T_VARIABLE","$entity_translation",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","isNew",79],"(",")",")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ The clone should not be new as well.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$clone",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_CLONE","clone",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_translation",82],";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertFalse",83],"(",["T_VARIABLE","$clone",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","isNew",83],"(",")",")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ After enforcing the clone to be new only it should be flagged as new,\n",85],["T_WHITESPACE","    ",86],["T_COMMENT","\/\/ but the original entity should not be flagged as new.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$clone",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","enforceIsNew",87],"(",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertTrue",88],"(",["T_VARIABLE","$clone",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","isNew",88],"(",")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertFalse",89],"(",["T_VARIABLE","$entity_translation",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","isNew",89],"(",")",")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n",90],"}",["T_WHITESPACE","\n",92]]
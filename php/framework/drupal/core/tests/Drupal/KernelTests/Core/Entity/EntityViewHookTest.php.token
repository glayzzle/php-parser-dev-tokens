[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","entity_test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTest",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Test view\/render hooks for entities.\n *\n * @todo Add tests for the following hooks. https:\/\/www.drupal.org\/node\/2755353\n * hook_entity_view_display_alter()\n * hook_entity_prepare_view()\n * hook_ENTITY_TYPE_view()\n * hook_entity_view()\n * hook_ENTITY_TYPE_view_alter()\n * hook_entity_view_alter()\n *\n * @group Entity\n *\/",7],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","EntityViewHookTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","EntityKernelTestBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Test hook_entity_display_build_alter().\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_FUNCTION","function",25],["T_WHITESPACE"," ",25],["T_STRING","testHookEntityDisplayBuildAlter",25],"(",")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n    ",25],["T_STRING","entity_test_create_bundle",26],"(",["T_CONSTANT_ENCAPSED_STRING","'display_build_alter_bundle'",26],")",";",["T_WHITESPACE","\n    ",26],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",27],["T_WHITESPACE","\n    ",27],["T_VARIABLE","$renderer",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","container",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","get",28],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",28],")",";",["T_WHITESPACE","\n\n    ",28],["T_VARIABLE","$entity_ids",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],"[","]",";",["T_WHITESPACE","\n    ",30],["T_COMMENT","\/\/ Create some entities to test.\n",31],["T_WHITESPACE","    ",32],["T_FOR","for",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$i",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_LNUMBER","0",32],";",["T_WHITESPACE"," ",32],["T_VARIABLE","$i",32],["T_WHITESPACE"," ",32],"<",["T_WHITESPACE"," ",32],["T_LNUMBER","5",32],";",["T_WHITESPACE"," ",32],["T_VARIABLE","$i",32],["T_INC","++",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n      ",32],["T_VARIABLE","$entity",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","EntityTest",33],["T_DOUBLE_COLON","::",33],["T_STRING","create",33],"(","[",["T_WHITESPACE","\n        ",33],["T_CONSTANT_ENCAPSED_STRING","'name'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","randomMachineName",34],"(",")",",",["T_WHITESPACE","\n        ",34],["T_CONSTANT_ENCAPSED_STRING","'type'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'display_build_alter_bundle'",35],",",["T_WHITESPACE","\n      ",35],"]",")",";",["T_WHITESPACE","\n      ",36],["T_VARIABLE","$entity",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","save",37],"(",")",";",["T_WHITESPACE","\n      ",37],["T_VARIABLE","$entity_ids",38],"[","]",["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$entity",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","id",38],"(",")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_DOC_COMMENT","\/** @var \\Drupal\\entity_test\\EntityTestViewBuilder $view_builder *\/",41],["T_WHITESPACE","\n    ",41],["T_VARIABLE","$view_builder",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","container",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","getViewBuilder",42],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityStorageInterface $storage *\/",44],["T_WHITESPACE","\n    ",44],["T_VARIABLE","$storage",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","container",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","getStorage",45],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$storage",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","resetCache",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$entities",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$storage",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","loadMultiple",47],"(",["T_VARIABLE","$entity_ids",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$build",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$view_builder",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","viewMultiple",49],"(",["T_VARIABLE","$entities",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$output",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$renderer",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","renderRoot",51],"(",["T_VARIABLE","$build",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setRawContent",52],"(",["T_VARIABLE","$output",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","__toString",52],"(",")",")",";",["T_WHITESPACE","\n    ",52],["T_COMMENT","\/\/ Confirm that the content added in\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ entity_test_entity_display_build_alter() appears multiple times, not\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ just for the final entity.\n",55],["T_WHITESPACE","    ",56],["T_FOREACH","foreach",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$entity_ids",56],["T_WHITESPACE"," ",56],["T_AS","as",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$id",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertText",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Content added in hook_entity_display_build_alter for entity id '",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$id",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n",59],"}",["T_WHITESPACE","\n",61]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","TypedData",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","TypedData",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DataDefinition",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","TypedData",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MapDataDefinition",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests ComplexData validation constraint with both valid and invalid values\n * for a key.\n *\n * @group Validation\n *\/",9],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ComplexDataConstraintValidatorTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","KernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * The typed data manager to use.\n   *\n   * @var \\Drupal\\Core\\TypedData\\TypedDataManager\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$typedData",22],";",["T_WHITESPACE","\n\n  ",22],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","setUp",25],"(",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","typedData",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","container",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'typed_data_manager'",26],")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Tests the ComplexData validation constraint validator.\n   *\n   * For testing a map including a constraint on one of its keys is defined.\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testValidation",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_COMMENT","\/\/ Create a definition that specifies some ComplexData constraint.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$definition",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","MapDataDefinition",36],["T_DOUBLE_COLON","::",36],["T_STRING","create",36],"(",")",["T_WHITESPACE","\n      ",36],["T_OBJECT_OPERATOR","->",37],["T_STRING","setPropertyDefinition",37],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",37],",",["T_WHITESPACE"," ",37],["T_STRING","DataDefinition",37],["T_DOUBLE_COLON","::",37],["T_STRING","create",37],"(",["T_CONSTANT_ENCAPSED_STRING","'integer'",37],")",")",["T_WHITESPACE","\n      ",37],["T_OBJECT_OPERATOR","->",38],["T_STRING","addConstraint",38],"(",["T_CONSTANT_ENCAPSED_STRING","'ComplexData'",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'key'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_WHITESPACE","\n          ",39],["T_CONSTANT_ENCAPSED_STRING","'AllowedValues'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",["T_LNUMBER","1",40],",",["T_WHITESPACE"," ",40],["T_LNUMBER","2",40],",",["T_WHITESPACE"," ",40],["T_LNUMBER","3",40],")",["T_WHITESPACE","\n        ",40],")",",",["T_WHITESPACE","\n      ",41],")",")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Test the validation.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$typed_data",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","typedData",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","create",45],"(",["T_VARIABLE","$definition",45],",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_LNUMBER","1",45],")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$violations",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$typed_data",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","validate",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_VARIABLE","$violations",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","count",47],"(",")",",",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Validation passed for correct value.'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Test the validation when an invalid value is passed.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$typed_data",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","typedData",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","create",50],"(",["T_VARIABLE","$definition",50],",",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","4",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$violations",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$typed_data",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","validate",51],"(",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_VARIABLE","$violations",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","count",52],"(",")",",",["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Validation failed for incorrect value.'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Make sure the information provided by a violation is correct.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$violation",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$violations",55],"[",["T_LNUMBER","0",55],"]",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertEqual",56],"(",["T_VARIABLE","$violation",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getMessage",56],"(",")",",",["T_WHITESPACE"," ",56],["T_STRING","t",56],"(",["T_CONSTANT_ENCAPSED_STRING","'The value you selected is not a valid choice.'",56],")",",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'The message for invalid value is correct.'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertEqual",57],"(",["T_VARIABLE","$violation",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getRoot",57],"(",")",",",["T_WHITESPACE"," ",57],["T_VARIABLE","$typed_data",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Violation root is correct.'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEqual",58],"(",["T_VARIABLE","$violation",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getInvalidValue",58],"(",")",",",["T_WHITESPACE"," ",58],["T_LNUMBER","4",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'The invalid value is set correctly in the violation.'",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Test using the constraint with a map without the specified key. This\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ should be ignored as long as there is no NotNull or NotBlank constraint.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$typed_data",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","typedData",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","create",62],"(",["T_VARIABLE","$definition",62],",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'bar'",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$violations",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$typed_data",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","validate",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEqual",64],"(",["T_VARIABLE","$violations",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","count",64],"(",")",",",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Constraint on non-existing key is ignored.'",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$definition",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","MapDataDefinition",66],["T_DOUBLE_COLON","::",66],["T_STRING","create",66],"(",")",["T_WHITESPACE","\n      ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","setPropertyDefinition",67],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",67],",",["T_WHITESPACE"," ",67],["T_STRING","DataDefinition",67],["T_DOUBLE_COLON","::",67],["T_STRING","create",67],"(",["T_CONSTANT_ENCAPSED_STRING","'integer'",67],")",")",["T_WHITESPACE","\n      ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","addConstraint",68],"(",["T_CONSTANT_ENCAPSED_STRING","'ComplexData'",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'key'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n          ",69],["T_CONSTANT_ENCAPSED_STRING","'NotNull'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",["T_WHITESPACE","\n        ",70],")",",",["T_WHITESPACE","\n      ",71],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$typed_data",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","typedData",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","create",74],"(",["T_VARIABLE","$definition",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'bar'",74],")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$violations",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$typed_data",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","validate",75],"(",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_VARIABLE","$violations",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","count",76],"(",")",",",["T_WHITESPACE"," ",76],["T_LNUMBER","1",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'Key is required.'",76],")",";",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n",77],"}",["T_WHITESPACE","\n",79]]
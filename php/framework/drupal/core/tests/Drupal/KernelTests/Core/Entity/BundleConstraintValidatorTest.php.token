[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","TypedData",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DataDefinition",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests validation constraints for BundleConstraintValidator.\n *\n * @group Entity\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","BundleConstraintValidatorTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","KernelTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * The typed data manager to use.\n   *\n   * @var \\Drupal\\Core\\TypedData\\TypedDataManager\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$typedData",20],";",["T_WHITESPACE","\n\n  ",20],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$modules",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'field'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'text'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'user'",22],")",";",["T_WHITESPACE","\n\n  ",22],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","setUp",25],"(",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","installEntitySchema",26],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",26],")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","typedData",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","container",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'typed_data_manager'",27],")",";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Tests bundle constraint validation.\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","testValidation",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_COMMENT","\/\/ Test with multiple values.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertValidation",35],"(",["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'bar'",35],")",")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Test with a single string value as well.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertValidation",37],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",37],")",";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Executes the BundleConstraintValidator test for a given bundle.\n   *\n   * @param string|array $bundle\n   *   Bundle\/bundles to use as constraint option.\n   *\/",40],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","assertValidation",46],"(",["T_VARIABLE","$bundle",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ Create a typed data definition with a Bundle constraint.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$definition",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","DataDefinition",48],["T_DOUBLE_COLON","::",48],["T_STRING","create",48],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",48],")",["T_WHITESPACE","\n      ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","addConstraint",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Bundle'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$bundle",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Test the validation.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$node",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","container",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getStorage",52],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","create",52],"(",["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'foo'",52],")",")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$typed_data",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","typedData",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","create",54],"(",["T_VARIABLE","$definition",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$node",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$violations",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$typed_data",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","validate",55],"(",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertEqual",56],"(",["T_VARIABLE","$violations",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","count",56],"(",")",",",["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Validation passed for correct value.'",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Test the validation when an invalid value is passed.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$page_node",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","container",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","get",59],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","getStorage",59],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",59],")",["T_OBJECT_OPERATOR","->",59],["T_STRING","create",59],"(",["T_ARRAY","array",59],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'baz'",59],")",")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$typed_data",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","typedData",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","create",61],"(",["T_VARIABLE","$definition",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$page_node",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$violations",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$typed_data",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","validate",62],"(",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertEqual",63],"(",["T_VARIABLE","$violations",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","count",63],"(",")",",",["T_WHITESPACE"," ",63],["T_LNUMBER","1",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'Validation failed for incorrect value.'",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Make sure the information provided by a violation is correct.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$violation",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$violations",66],"[",["T_LNUMBER","0",66],"]",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertEqual",67],"(",["T_VARIABLE","$violation",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMessage",67],"(",")",",",["T_WHITESPACE"," ",67],["T_STRING","t",67],"(",["T_CONSTANT_ENCAPSED_STRING","'The entity must be of bundle %bundle.'",67],",",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'%bundle'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_STRING","implode",67],"(",["T_CONSTANT_ENCAPSED_STRING","', '",67],",",["T_WHITESPACE"," ",67],["T_ARRAY_CAST","(array)",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$bundle",67],")",")",")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'The message for invalid value is correct.'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertEqual",68],"(",["T_VARIABLE","$violation",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getRoot",68],"(",")",",",["T_WHITESPACE"," ",68],["T_VARIABLE","$typed_data",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Violation root is correct.'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertEqual",69],"(",["T_VARIABLE","$violation",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getInvalidValue",69],"(",")",",",["T_WHITESPACE"," ",69],["T_VARIABLE","$page_node",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'The invalid value is set correctly in the violation.'",69],")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n",70],"}",["T_WHITESPACE","\n",72]]
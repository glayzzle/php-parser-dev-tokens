[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityViewBuilder",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LanguageInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityReference",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityReferenceTestTrait",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cache",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cache",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Role",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","user",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RoleInterface",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Tests the entity view builder.\n *\n * @group Entity\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","EntityViewBuilderTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","EntityKernelTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","EntityReferenceTestTrait",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","setUp",25],"(",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","installConfig",26],"(",["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",26],")",")",";",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ Give anonymous users permission to view test entities.\n",28],["T_WHITESPACE","    ",29],["T_STRING","Role",29],["T_DOUBLE_COLON","::",29],["T_STRING","load",29],"(",["T_STRING","RoleInterface",29],["T_DOUBLE_COLON","::",29],["T_STRING","ANONYMOUS_ID",29],")",["T_WHITESPACE","\n      ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","grantPermission",30],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity'",30],")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","save",31],"(",")",";",["T_WHITESPACE","\n  ",31],"}",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * Tests entity render cache handling.\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","testEntityViewBuilderCache",37],"(",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",38],["T_WHITESPACE","\n    ",38],["T_VARIABLE","$renderer",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$cache_contexts_manager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_NS_SEPARATOR","\\",40],["T_STRING","Drupal",40],["T_DOUBLE_COLON","::",40],["T_STRING","service",40],"(",["T_CONSTANT_ENCAPSED_STRING","\"cache_contexts_manager\"",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$cache",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Drupal",41],["T_DOUBLE_COLON","::",41],["T_STRING","cache",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Force a request via GET so we can get drupal_render() cache working.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$request",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_NS_SEPARATOR","\\",44],["T_STRING","Drupal",44],["T_DOUBLE_COLON","::",44],["T_STRING","request",44],"(",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$request_method",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$request",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","server",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","get",45],"(",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$request",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","setMethod",46],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_VARIABLE","$entity_test",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","createTestEntity",48],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Test that new entities (before they are saved for the first time) do not\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ generate a cache entry.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$build",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","container",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getViewBuilder",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","view",52],"(",["T_VARIABLE","$entity_test",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'full'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertTrue",53],"(",["T_ISSET","isset",53],"(",["T_VARIABLE","$build",53],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",53],"]",")",["T_WHITESPACE"," ",53],["T_BOOLEAN_AND","&&",53],["T_WHITESPACE"," ",53],["T_STRING","array_keys",53],"(",["T_VARIABLE","$build",53],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",53],"]",")",["T_WHITESPACE"," ",53],["T_IS_EQUAL","==",53],["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'contexts'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'max-age'",53],"]",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'The render array element of new (unsaved) entities is not cached, but does have cache tags set.'",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Get a fully built entity view render array.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$entity_test",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","save",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$build",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","container",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","get",57],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","getViewBuilder",57],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","view",57],"(",["T_VARIABLE","$entity_test",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'full'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$cid_parts",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","array_merge",58],"(",["T_VARIABLE","$build",58],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",58],"]","[",["T_CONSTANT_ENCAPSED_STRING","'keys'",58],"]",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$cache_contexts_manager",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","convertTokensToKeys",58],"(","[",["T_CONSTANT_ENCAPSED_STRING","'languages:'",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_STRING","LanguageInterface",58],["T_DOUBLE_COLON","::",58],["T_STRING","TYPE_INTERFACE",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'theme'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",58],"]",")",["T_OBJECT_OPERATOR","->",58],["T_STRING","getKeys",58],"(",")",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$cid",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","implode",59],"(",["T_CONSTANT_ENCAPSED_STRING","':'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$cid_parts",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$bin",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$build",60],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",60],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bin'",60],"]",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Mock the build array to not require the theme registry.\n",62],["T_WHITESPACE","    ",63],["T_UNSET","unset",63],"(",["T_VARIABLE","$build",63],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",63],"]",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$build",64],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",64],"]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'entity_render_test'",64],";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Test that a cache entry is created.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$renderer",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","renderRoot",67],"(",["T_VARIABLE","$build",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertTrue",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","container",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$bin",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","get",68],"(",["T_VARIABLE","$cid",68],")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'The entity render element has been cached.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Re-save the entity and check that the cache entry has been deleted.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$cache",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","set",71],"(",["T_CONSTANT_ENCAPSED_STRING","'kittens'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'Kitten data'",71],",",["T_WHITESPACE"," ",71],["T_STRING","Cache",71],["T_DOUBLE_COLON","::",71],["T_STRING","PERMANENT",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$build",71],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",71],"]","[",["T_CONSTANT_ENCAPSED_STRING","'tags'",71],"]",")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$entity_test",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","save",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertFalse",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","container",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_VARIABLE","$bin",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_VARIABLE","$cid",73],")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'The entity render cache has been cleared when the entity was saved.'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertFalse",74],"(",["T_VARIABLE","$cache",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'kittens'",74],")",",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'The entity saving has invalidated cache tags.'",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Rebuild the render array (creating a new cache entry in the process) and\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ delete the entity to check the cache entry is deleted.\n",77],["T_WHITESPACE","    ",78],["T_UNSET","unset",78],"(",["T_VARIABLE","$build",78],"[",["T_CONSTANT_ENCAPSED_STRING","'#printed'",78],"]",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$renderer",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","renderRoot",79],"(",["T_VARIABLE","$build",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertTrue",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","container",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$bin",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_VARIABLE","$cid",80],")",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'The entity render element has been cached.'",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$entity_test",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","delete",81],"(",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertFalse",82],"(",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","container",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$bin",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_VARIABLE","$cid",82],")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'The entity render cache has been cleared when the entity was deleted.'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Restore the previous request method.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","setMethod",85],"(",["T_VARIABLE","$request_method",85],")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Tests entity render cache with references.\n   *\/",88],["T_WHITESPACE","\n  ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","testEntityViewBuilderCacheWithReferences",91],"(",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",92],["T_WHITESPACE","\n    ",92],["T_VARIABLE","$renderer",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","container",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$cache_contexts_manager",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_NS_SEPARATOR","\\",94],["T_STRING","Drupal",94],["T_DOUBLE_COLON","::",94],["T_STRING","service",94],"(",["T_CONSTANT_ENCAPSED_STRING","\"cache_contexts_manager\"",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ Force a request via GET so we can get drupal_render() cache working.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$request",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Drupal",97],["T_DOUBLE_COLON","::",97],["T_STRING","request",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$request_method",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$request",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","server",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","get",98],"(",["T_CONSTANT_ENCAPSED_STRING","'REQUEST_METHOD'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$request",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","setMethod",99],"(",["T_CONSTANT_ENCAPSED_STRING","'GET'",99],")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Create an entity reference field and an entity that will be referenced.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","createEntityReferenceField",102],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'reference_field'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Reference'",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",102],")",";",["T_WHITESPACE","\n    ",102],["T_STRING","entity_get_display",103],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'full'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","setComponent",103],"(",["T_CONSTANT_ENCAPSED_STRING","'reference_field'",103],",",["T_WHITESPACE"," ",103],"[",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'type'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_entity_view'",104],",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'settings'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],"[",["T_CONSTANT_ENCAPSED_STRING","'link'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_STRING","FALSE",105],"]",",",["T_WHITESPACE","\n    ",105],"]",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","save",106],"(",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$entity_test_reference",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","createTestEntity",107],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$entity_test_reference",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","save",108],"(",")",";",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ Get a fully built entity view render array for the referenced entity.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$build",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","container",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","get",111],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","getViewBuilder",111],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","view",111],"(",["T_VARIABLE","$entity_test_reference",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'full'",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$cid_parts",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","array_merge",112],"(",["T_VARIABLE","$build",112],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",112],"]","[",["T_CONSTANT_ENCAPSED_STRING","'keys'",112],"]",",",["T_WHITESPACE"," ",112],["T_VARIABLE","$cache_contexts_manager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","convertTokensToKeys",112],"(","[",["T_CONSTANT_ENCAPSED_STRING","'languages:'",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_STRING","LanguageInterface",112],["T_DOUBLE_COLON","::",112],["T_STRING","TYPE_INTERFACE",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'theme'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",112],"]",")",["T_OBJECT_OPERATOR","->",112],["T_STRING","getKeys",112],"(",")",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$cid_reference",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","implode",113],"(",["T_CONSTANT_ENCAPSED_STRING","':'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$cid_parts",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$bin_reference",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$build",114],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",114],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bin'",114],"]",";",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ Mock the build array to not require the theme registry.\n",116],["T_WHITESPACE","    ",117],["T_UNSET","unset",117],"(",["T_VARIABLE","$build",117],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",117],"]",")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$build",118],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'entity_render_test'",118],";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$renderer",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","renderRoot",119],"(",["T_VARIABLE","$build",119],")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Test that a cache entry was created for the referenced entity.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertTrue",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","container",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$bin_reference",122],")",["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_VARIABLE","$cid_reference",122],")",",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'The entity render element for the referenced entity has been cached.'",122],")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Create another entity that references the first one.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$entity_test",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","createTestEntity",125],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$entity_test",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","reference_field",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","entity",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$entity_test_reference",126],";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$entity_test",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","save",127],"(",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Get a fully built entity view render array.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$build",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","container",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","get",130],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","getViewBuilder",130],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",130],")",["T_OBJECT_OPERATOR","->",130],["T_STRING","view",130],"(",["T_VARIABLE","$entity_test",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'full'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$cid_parts",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","array_merge",131],"(",["T_VARIABLE","$build",131],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",131],"]","[",["T_CONSTANT_ENCAPSED_STRING","'keys'",131],"]",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$cache_contexts_manager",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","convertTokensToKeys",131],"(","[",["T_CONSTANT_ENCAPSED_STRING","'languages:'",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_STRING","LanguageInterface",131],["T_DOUBLE_COLON","::",131],["T_STRING","TYPE_INTERFACE",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'theme'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",131],"]",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","getKeys",131],"(",")",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$cid",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","implode",132],"(",["T_CONSTANT_ENCAPSED_STRING","':'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$cid_parts",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$bin",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$build",133],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",133],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bin'",133],"]",";",["T_WHITESPACE","\n\n    ",133],["T_COMMENT","\/\/ Mock the build array to not require the theme registry.\n",135],["T_WHITESPACE","    ",136],["T_UNSET","unset",136],"(",["T_VARIABLE","$build",136],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",136],"]",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$build",137],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'entity_render_test'",137],";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$renderer",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","renderRoot",138],"(",["T_VARIABLE","$build",138],")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Test that a cache entry is created.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertTrue",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","container",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$bin",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_VARIABLE","$cid",141],")",",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'The entity render element has been cached.'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Save the entity and verify that both cache entries have been deleted.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$entity_test_reference",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","save",144],"(",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertFalse",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","container",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$bin",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_VARIABLE","$cid",145],")",",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'The entity render cache has been cleared when the entity was deleted.'",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertFalse",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","container",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_VARIABLE","$bin_reference",146],")",["T_OBJECT_OPERATOR","->",146],["T_STRING","get",146],"(",["T_VARIABLE","$cid_reference",146],")",",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'The entity render cache for the referenced entity has been cleared when the entity was deleted.'",146],")",";",["T_WHITESPACE","\n\n    ",146],["T_COMMENT","\/\/ Restore the previous request method.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$request",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setMethod",149],"(",["T_VARIABLE","$request_method",149],")",";",["T_WHITESPACE","\n  ",149],"}",["T_WHITESPACE","\n\n  ",150],["T_DOC_COMMENT","\/**\n   * Tests entity render cache toggling.\n   *\/",152],["T_WHITESPACE","\n  ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testEntityViewBuilderCacheToggling",155],"(",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$entity_test",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","createTestEntity",156],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$entity_test",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","save",157],"(",")",";",["T_WHITESPACE","\n\n    ",157],["T_COMMENT","\/\/ Test a view mode in default conditions: render caching is enabled for\n",159],["T_WHITESPACE","    ",160],["T_COMMENT","\/\/ the entity type and the view mode.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$build",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","container",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","get",161],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","getViewBuilder",161],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",161],")",["T_OBJECT_OPERATOR","->",161],["T_STRING","view",161],"(",["T_VARIABLE","$entity_test",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'full'",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertTrue",162],"(",["T_ISSET","isset",162],"(",["T_VARIABLE","$build",162],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",162],"]",")",["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],["T_STRING","array_keys",162],"(",["T_VARIABLE","$build",162],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",162],"]",")",["T_WHITESPACE"," ",162],["T_IS_EQUAL","==",162],["T_WHITESPACE"," ",162],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'contexts'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'max-age'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'keys'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'bin'",162],"]",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'A view mode with render cache enabled has the correct output (cache tags, keys, contexts, max-age and bin).'",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ Test that a view mode can opt out of render caching.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$build",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","container",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","get",165],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",165],")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getViewBuilder",165],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",165],")",["T_OBJECT_OPERATOR","->",165],["T_STRING","view",165],"(",["T_VARIABLE","$entity_test",165],",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'test'",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertTrue",166],"(",["T_ISSET","isset",166],"(",["T_VARIABLE","$build",166],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",166],"]",")",["T_WHITESPACE"," ",166],["T_BOOLEAN_AND","&&",166],["T_WHITESPACE"," ",166],["T_STRING","array_keys",166],"(",["T_VARIABLE","$build",166],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",166],"]",")",["T_WHITESPACE"," ",166],["T_IS_EQUAL","==",166],["T_WHITESPACE"," ",166],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'contexts'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'max-age'",166],"]",",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'A view mode with render cache disabled has the correct output (only cache tags, contexts and max-age).'",166],")",";",["T_WHITESPACE","\n\n    ",166],["T_COMMENT","\/\/ Test that an entity type can opt out of render caching completely.\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","installEntitySchema",169],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_label'",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$entity_test_no_cache",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","createTestEntity",170],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_label'",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$entity_test_no_cache",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","save",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$build",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","container",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","get",172],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getViewBuilder",172],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_label'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","view",172],"(",["T_VARIABLE","$entity_test_no_cache",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'full'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertTrue",173],"(",["T_ISSET","isset",173],"(",["T_VARIABLE","$build",173],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",173],"]",")",["T_WHITESPACE"," ",173],["T_BOOLEAN_AND","&&",173],["T_WHITESPACE"," ",173],["T_STRING","array_keys",173],"(",["T_VARIABLE","$build",173],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",173],"]",")",["T_WHITESPACE"," ",173],["T_IS_EQUAL","==",173],["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'contexts'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'max-age'",173],"]",",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'An entity type can opt out of render caching regardless of view mode configuration, but always has cache tags, contexts and max-age set.'",173],")",";",["T_WHITESPACE","\n  ",173],"}",["T_WHITESPACE","\n\n  ",174],["T_DOC_COMMENT","\/**\n   * Tests weighting of display components.\n   *\/",176],["T_WHITESPACE","\n  ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","testEntityViewBuilderWeight",179],"(",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n    ",179],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",180],["T_WHITESPACE","\n    ",180],["T_VARIABLE","$renderer",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","container",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","get",181],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",181],")",";",["T_WHITESPACE","\n\n    ",181],["T_COMMENT","\/\/ Set a weight for the label component.\n",183],["T_WHITESPACE","    ",184],["T_STRING","entity_get_display",184],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'full'",184],")",["T_WHITESPACE","\n      ",184],["T_OBJECT_OPERATOR","->",185],["T_STRING","setComponent",185],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'weight'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","20",185],")",")",["T_WHITESPACE","\n      ",185],["T_OBJECT_OPERATOR","->",186],["T_STRING","save",186],"(",")",";",["T_WHITESPACE","\n\n    ",186],["T_COMMENT","\/\/ Create and build a test entity.\n",188],["T_WHITESPACE","    ",189],["T_VARIABLE","$entity_test",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","createTestEntity",189],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",189],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$view",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","container",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","get",190],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",190],")",["T_OBJECT_OPERATOR","->",190],["T_STRING","getViewBuilder",190],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",190],")",["T_OBJECT_OPERATOR","->",190],["T_STRING","view",190],"(",["T_VARIABLE","$entity_test",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'full'",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$renderer",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","renderRoot",191],"(",["T_VARIABLE","$view",191],")",";",["T_WHITESPACE","\n\n    ",191],["T_COMMENT","\/\/ Check that the weight is respected.\n",193],["T_WHITESPACE","    ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertEqual",194],"(",["T_VARIABLE","$view",194],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#weight'",194],"]",",",["T_WHITESPACE"," ",194],["T_LNUMBER","20",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'The weight of a display component is respected.'",194],")",";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n  ",195],["T_DOC_COMMENT","\/**\n   * Creates an entity for testing.\n   *\n   * @param string $entity_type\n   *   The entity type.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface\n   *   The created entity.\n   *\/",197],["T_WHITESPACE","\n  ",205],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","createTestEntity",206],"(",["T_VARIABLE","$entity_type",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$data",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_WHITESPACE","\n      ",207],["T_CONSTANT_ENCAPSED_STRING","'bundle'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$entity_type",208],",",["T_WHITESPACE","\n      ",208],["T_CONSTANT_ENCAPSED_STRING","'name'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","randomMachineName",209],"(",")",",",["T_WHITESPACE","\n    ",209],")",";",["T_WHITESPACE","\n    ",210],["T_RETURN","return",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","container",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","get",211],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","getStorage",211],"(",["T_VARIABLE","$entity_type",211],")",["T_OBJECT_OPERATOR","->",211],["T_STRING","create",211],"(",["T_VARIABLE","$data",211],")",";",["T_WHITESPACE","\n  ",211],"}",["T_WHITESPACE","\n\n  ",212],["T_DOC_COMMENT","\/**\n   * Tests that viewing an entity without template does not specify #theme.\n   *\/",214],["T_WHITESPACE","\n  ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","testNoTemplate",217],"(",")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n    ",217],["T_COMMENT","\/\/ Ensure that an entity type without explicit view builder uses the\n",218],["T_WHITESPACE","    ",219],["T_COMMENT","\/\/ default.\n",219],["T_WHITESPACE","    ",220],["T_VARIABLE","$entity_type_manager",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_NS_SEPARATOR","\\",220],["T_STRING","Drupal",220],["T_DOUBLE_COLON","::",220],["T_STRING","entityTypeManager",220],"(",")",";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$entity_type",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_VARIABLE","$entity_type_manager",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","getDefinition",221],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_base_field_display'",221],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","assertTrue",222],"(",["T_VARIABLE","$entity_type",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","hasViewBuilderClass",222],"(",")",")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertEquals",223],"(",["T_STRING","EntityViewBuilder",223],["T_DOUBLE_COLON","::",223],["T_CLASS","class",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$entity_type",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getViewBuilderClass",223],"(",")",")",";",["T_WHITESPACE","\n\n    ",223],["T_COMMENT","\/\/ Ensure that an entity without matching template does not have a #theme\n",225],["T_WHITESPACE","    ",226],["T_COMMENT","\/\/ key.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$entity",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","createTestEntity",227],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",227],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$build",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$entity_type_manager",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getViewBuilder",228],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",228],")",["T_OBJECT_OPERATOR","->",228],["T_STRING","view",228],"(",["T_VARIABLE","$entity",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","assertEquals",229],"(",["T_VARIABLE","$entity",229],",",["T_WHITESPACE"," ",229],["T_VARIABLE","$build",229],"[",["T_CONSTANT_ENCAPSED_STRING","'#entity_test'",229],"]",")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","assertFalse",230],"(",["T_STRING","array_key_exists",230],"(",["T_CONSTANT_ENCAPSED_STRING","'#theme'",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$build",230],")",")",";",["T_WHITESPACE","\n  ",230],"}",["T_WHITESPACE","\n\n",231],"}",["T_WHITESPACE","\n",233]]
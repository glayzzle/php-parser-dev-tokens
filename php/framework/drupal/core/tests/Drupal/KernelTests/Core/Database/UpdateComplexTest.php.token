[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the Update query builder, complex queries.\n *\n * @group Database\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","UpdateComplexTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","DatabaseTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Tests updates with OR conditionals.\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","testOrConditionUpdate",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$update",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_STRING","db_update",16],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",16],")",["T_WHITESPACE","\n      ",16],["T_OBJECT_OPERATOR","->",17],["T_STRING","fields",17],"(",["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",17],["T_WHITESPACE"," ",17],["T_DOUBLE_ARROW","=>",17],["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'Musician'",17],")",")",["T_WHITESPACE","\n      ",17],["T_OBJECT_OPERATOR","->",18],["T_STRING","condition",18],"(",["T_STRING","db_or",18],"(",")",["T_WHITESPACE","\n        ",18],["T_OBJECT_OPERATOR","->",19],["T_STRING","condition",19],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'John'",19],")",["T_WHITESPACE","\n        ",19],["T_OBJECT_OPERATOR","->",20],["T_STRING","condition",20],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'Paul'",20],")",["T_WHITESPACE","\n      ",20],")",";",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$num_updated",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$update",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","execute",22],"(",")",";",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","assertIdentical",23],"(",["T_VARIABLE","$num_updated",23],",",["T_WHITESPACE"," ",23],["T_LNUMBER","2",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'Updated 2 records.'",23],")",";",["T_WHITESPACE","\n\n    ",23],["T_VARIABLE","$num_matches",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","db_query",25],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",25],",",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'Musician'",25],")",")",["T_OBJECT_OPERATOR","->",25],["T_STRING","fetchField",25],"(",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","assertIdentical",26],"(",["T_VARIABLE","$num_matches",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'2'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",26],")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Tests WHERE IN clauses.\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","testInConditionUpdate",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$num_updated",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","db_update",33],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",33],")",["T_WHITESPACE","\n      ",33],["T_OBJECT_OPERATOR","->",34],["T_STRING","fields",34],"(",["T_ARRAY","array",34],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'Musician'",34],")",")",["T_WHITESPACE","\n      ",34],["T_OBJECT_OPERATOR","->",35],["T_STRING","condition",35],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",35],",",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'John'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'Paul'",35],")",",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'IN'",35],")",["T_WHITESPACE","\n      ",35],["T_OBJECT_OPERATOR","->",36],["T_STRING","execute",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertIdentical",37],"(",["T_VARIABLE","$num_updated",37],",",["T_WHITESPACE"," ",37],["T_LNUMBER","2",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'Updated 2 records.'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$num_matches",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","db_query",39],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",39],",",["T_WHITESPACE"," ",39],["T_ARRAY","array",39],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'Musician'",39],")",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","fetchField",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertIdentical",40],"(",["T_VARIABLE","$num_matches",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'2'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Tests WHERE NOT IN clauses.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testNotInConditionUpdate",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ The o is lowercase in the 'NoT IN' operator, to make sure the operators\n",47],["T_WHITESPACE","    ",48],["T_COMMENT","\/\/ work in mixed case.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$num_updated",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","db_update",49],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",49],")",["T_WHITESPACE","\n      ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","fields",50],"(",["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'Musician'",50],")",")",["T_WHITESPACE","\n      ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","condition",51],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'John'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Paul'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'George'",51],")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'NoT IN'",51],")",["T_WHITESPACE","\n      ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","execute",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertIdentical",53],"(",["T_VARIABLE","$num_updated",53],",",["T_WHITESPACE"," ",53],["T_LNUMBER","1",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Updated 1 record.'",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_VARIABLE","$num_matches",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","db_query",55],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'Musician'",55],")",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","fetchField",55],"(",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertIdentical",56],"(",["T_VARIABLE","$num_matches",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'1'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",56],")",";",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Tests BETWEEN conditional clauses.\n   *\/",59],["T_WHITESPACE","\n  ",61],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testBetweenConditionUpdate",62],"(",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$num_updated",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","db_update",63],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",63],")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","fields",64],"(",["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Musician'",64],")",")",["T_WHITESPACE","\n      ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","condition",65],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_LNUMBER","25",65],",",["T_WHITESPACE"," ",65],["T_LNUMBER","26",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'BETWEEN'",65],")",["T_WHITESPACE","\n      ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","execute",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertIdentical",67],"(",["T_VARIABLE","$num_updated",67],",",["T_WHITESPACE"," ",67],["T_LNUMBER","2",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Updated 2 records.'",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_VARIABLE","$num_matches",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","db_query",69],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Musician'",69],")",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","fetchField",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertIdentical",70],"(",["T_VARIABLE","$num_matches",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'2'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Tests LIKE conditionals.\n   *\/",73],["T_WHITESPACE","\n  ",75],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testLikeConditionUpdate",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$num_updated",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","db_update",77],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",77],")",["T_WHITESPACE","\n      ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","fields",78],"(",["T_ARRAY","array",78],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'Musician'",78],")",")",["T_WHITESPACE","\n      ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","condition",79],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'%ge%'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'LIKE'",79],")",["T_WHITESPACE","\n      ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","execute",80],"(",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertIdentical",81],"(",["T_VARIABLE","$num_updated",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'Updated 1 record.'",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_VARIABLE","$num_matches",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","db_query",83],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",83],",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'Musician'",83],")",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","fetchField",83],"(",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertIdentical",84],"(",["T_VARIABLE","$num_matches",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'1'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",84],")",";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * Tests UPDATE with expression values.\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","testUpdateExpression",90],"(",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$before_age",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","db_query",91],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",91],",",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",91],")",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","fetchField",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$GLOBALS",92],"[",["T_CONSTANT_ENCAPSED_STRING","'larry_test'",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_LNUMBER","1",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$num_updated",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","db_update",93],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",93],")",["T_WHITESPACE","\n      ",93],["T_OBJECT_OPERATOR","->",94],["T_STRING","condition",94],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",94],")",["T_WHITESPACE","\n      ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","fields",95],"(",["T_ARRAY","array",95],"(",["T_CONSTANT_ENCAPSED_STRING","'job'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'Musician'",95],")",")",["T_WHITESPACE","\n      ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","expression",96],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'age + :age'",96],",",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","':age'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","4",96],")",")",["T_WHITESPACE","\n      ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","execute",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertIdentical",98],"(",["T_VARIABLE","$num_updated",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","1",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Updated 1 record.'",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_VARIABLE","$num_matches",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","db_query",100],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test} WHERE job = :job'",100],",",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",["T_CONSTANT_ENCAPSED_STRING","':job'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Musician'",100],")",")",["T_OBJECT_OPERATOR","->",100],["T_STRING","fetchField",100],"(",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertIdentical",101],"(",["T_VARIABLE","$num_matches",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'1'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Updated fields successfully.'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$person",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","db_query",103],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {test} WHERE name = :name'",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",103],")",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","fetch",103],"(",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertEqual",104],"(",["T_VARIABLE","$person",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","name",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'Name set correctly.'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEqual",105],"(",["T_VARIABLE","$person",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","age",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$before_age",105],["T_WHITESPACE"," ",105],"+",["T_WHITESPACE"," ",105],["T_LNUMBER","4",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Age set correctly.'",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertEqual",106],"(",["T_VARIABLE","$person",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","job",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Musician'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Job set correctly.'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$GLOBALS",107],"[",["T_CONSTANT_ENCAPSED_STRING","'larry_test'",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * Tests UPDATE with only expression values.\n   *\/",110],["T_WHITESPACE","\n  ",112],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","testUpdateOnlyExpression",113],"(",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$before_age",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STRING","db_query",114],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",114],")",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","fetchField",114],"(",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$num_updated",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","db_update",115],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",115],")",["T_WHITESPACE","\n      ",115],["T_OBJECT_OPERATOR","->",116],["T_STRING","condition",116],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",116],")",["T_WHITESPACE","\n      ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","expression",117],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'age + :age'",117],",",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_CONSTANT_ENCAPSED_STRING","':age'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_LNUMBER","4",117],")",")",["T_WHITESPACE","\n      ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","execute",118],"(",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertIdentical",119],"(",["T_VARIABLE","$num_updated",119],",",["T_WHITESPACE"," ",119],["T_LNUMBER","1",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'Updated 1 record.'",119],")",";",["T_WHITESPACE","\n\n    ",119],["T_VARIABLE","$after_age",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","db_query",121],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",121],",",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",121],")",")",["T_OBJECT_OPERATOR","->",121],["T_STRING","fetchField",121],"(",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertEqual",122],"(",["T_VARIABLE","$before_age",122],["T_WHITESPACE"," ",122],"+",["T_WHITESPACE"," ",122],["T_LNUMBER","4",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$after_age",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'Age updated correctly'",122],")",";",["T_WHITESPACE","\n  ",122],"}",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * Test UPDATE with a subselect value.\n   *\/",125],["T_WHITESPACE","\n  ",127],["T_FUNCTION","function",128],["T_WHITESPACE"," ",128],["T_STRING","testSubSelectUpdate",128],"(",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$subselect",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","db_select",129],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'t'",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$subselect",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","addExpression",130],"(",["T_CONSTANT_ENCAPSED_STRING","'MAX(priority) + :increment'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'max_priority'",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","':increment'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","30",130],")",")",";",["T_WHITESPACE","\n    ",130],["T_COMMENT","\/\/ Clone this to make sure we are running a different query when\n",131],["T_WHITESPACE","    ",132],["T_COMMENT","\/\/ asserting.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$select",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CLONE","clone",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$subselect",133],";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$query",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","db_update",134],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",134],")",["T_WHITESPACE","\n      ",134],["T_OBJECT_OPERATOR","->",135],["T_STRING","expression",135],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$subselect",135],")",["T_WHITESPACE","\n      ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","condition",136],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",136],")",";",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ Save the number of rows that updated for assertion later.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$num_updated",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$query",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","execute",138],"(",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$after_age",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","db_query",139],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",139],")",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","fetchField",139],"(",")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$expected_age",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$select",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","execute",140],"(",")",["T_OBJECT_OPERATOR","->",140],["T_STRING","fetchField",140],"(",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertEqual",141],"(",["T_VARIABLE","$after_age",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$expected_age",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertEqual",142],"(",["T_LNUMBER","1",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$num_updated",142],",",["T_WHITESPACE"," ",142],["T_STRING","t",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected 1 row to be updated in subselect update query.'",142],")",")",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n",143],"}",["T_WHITESPACE","\n",145]]
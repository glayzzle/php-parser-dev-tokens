[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the insert builder.\n *\n * @group Database\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","InsertTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","DatabaseTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Tests very basic insert functionality.\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","testSimpleInsert",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$num_records_before",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_STRING","db_query",16],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",16],")",["T_OBJECT_OPERATOR","->",16],["T_STRING","fetchField",16],"(",")",";",["T_WHITESPACE","\n\n    ",16],["T_VARIABLE","$query",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_STRING","db_insert",18],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$query",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","fields",19],"(",["T_ARRAY","array",19],"(",["T_WHITESPACE","\n      ",19],["T_CONSTANT_ENCAPSED_STRING","'name'",20],["T_WHITESPACE"," ",20],["T_DOUBLE_ARROW","=>",20],["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'Yoko'",20],",",["T_WHITESPACE","\n      ",20],["T_CONSTANT_ENCAPSED_STRING","'age'",21],["T_WHITESPACE"," ",21],["T_DOUBLE_ARROW","=>",21],["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'29'",21],",",["T_WHITESPACE","\n    ",21],")",")",";",["T_WHITESPACE","\n\n    ",22],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",24],["T_WHITESPACE","    ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","assertIdentical",25],"(",["T_VARIABLE","$query",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","count",25],"(",")",",",["T_WHITESPACE"," ",25],["T_LNUMBER","1",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'One record is queued for insertion.'",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$query",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","execute",26],"(",")",";",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$num_records_after",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","db_query",28],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",28],")",["T_OBJECT_OPERATOR","->",28],["T_STRING","fetchField",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","assertIdentical",29],"(",["T_VARIABLE","$num_records_before",29],["T_WHITESPACE"," ",29],"+",["T_WHITESPACE"," ",29],["T_LNUMBER","1",29],",",["T_WHITESPACE"," ",29],["T_INT_CAST","(int)",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$num_records_after",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'Record inserts correctly.'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$saved_age",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","db_query",30],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",30],",",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Yoko'",30],")",")",["T_OBJECT_OPERATOR","->",30],["T_STRING","fetchField",30],"(",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","assertIdentical",31],"(",["T_VARIABLE","$saved_age",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'29'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",31],")",";",["T_WHITESPACE","\n  ",31],"}",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * Tests that we can insert multiple records in one query object.\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","testMultiInsert",37],"(",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$num_records_before",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_INT_CAST","(int)",38],["T_WHITESPACE"," ",38],["T_STRING","db_query",38],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","fetchField",38],"(",")",";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$query",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","db_insert",40],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$query",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","fields",41],"(",["T_ARRAY","array",41],"(",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'name'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Larry'",42],",",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'age'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'30'",43],",",["T_WHITESPACE","\n    ",43],")",")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ We should be able to specify values in any order if named.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$query",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","values",47],"(",["T_ARRAY","array",47],"(",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'age'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'31'",48],",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'name'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Curly'",49],",",["T_WHITESPACE","\n    ",49],")",")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertIdentical",53],"(",["T_VARIABLE","$query",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","count",53],"(",")",",",["T_WHITESPACE"," ",53],["T_LNUMBER","2",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Two records are queued for insertion.'",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ We should be able to say \"use the field order\".\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ This is not the recommended mechanism for most cases, but it should work.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$query",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","values",57],"(",["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Moe'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'32'",57],")",")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertIdentical",60],"(",["T_VARIABLE","$query",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","count",60],"(",")",",",["T_WHITESPACE"," ",60],["T_LNUMBER","3",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Three records are queued for insertion.'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$query",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","execute",61],"(",")",";",["T_WHITESPACE","\n\n    ",61],["T_VARIABLE","$num_records_after",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_INT_CAST","(int)",63],["T_WHITESPACE"," ",63],["T_STRING","db_query",63],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","fetchField",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertIdentical",64],"(",["T_VARIABLE","$num_records_before",64],["T_WHITESPACE"," ",64],"+",["T_WHITESPACE"," ",64],["T_LNUMBER","3",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$num_records_after",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'Record inserts correctly.'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$saved_age",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","db_query",65],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'Larry'",65],")",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","fetchField",65],"(",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertIdentical",66],"(",["T_VARIABLE","$saved_age",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'30'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$saved_age",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","db_query",67],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",67],",",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Curly'",67],")",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","fetchField",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertIdentical",68],"(",["T_VARIABLE","$saved_age",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'31'",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$saved_age",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","db_query",69],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Moe'",69],")",")",["T_OBJECT_OPERATOR","->",69],["T_STRING","fetchField",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertIdentical",70],"(",["T_VARIABLE","$saved_age",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'32'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Tests that an insert object can be reused with new data after it executes.\n   *\/",73],["T_WHITESPACE","\n  ",75],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","testRepeatedInsert",76],"(",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$num_records_before",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","db_query",77],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","fetchField",77],"(",")",";",["T_WHITESPACE","\n\n    ",77],["T_VARIABLE","$query",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","db_insert",79],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$query",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","fields",81],"(",["T_ARRAY","array",81],"(",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'name'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'Larry'",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'age'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'30'",83],",",["T_WHITESPACE","\n    ",83],")",")",";",["T_WHITESPACE","\n    ",84],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertIdentical",86],"(",["T_VARIABLE","$query",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","count",86],"(",")",",",["T_WHITESPACE"," ",86],["T_LNUMBER","1",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'One record is queued for insertion.'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$query",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","execute",87],"(",")",";",["T_WHITESPACE","  ",87],["T_COMMENT","\/\/ This should run the insert, but leave the fields intact.\n",87],["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ We should be able to specify values in any order if named.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$query",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","values",90],"(",["T_ARRAY","array",90],"(",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'age'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'31'",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'name'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'Curly'",92],",",["T_WHITESPACE","\n    ",92],")",")",";",["T_WHITESPACE","\n    ",93],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertIdentical",95],"(",["T_VARIABLE","$query",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","count",95],"(",")",",",["T_WHITESPACE"," ",95],["T_LNUMBER","1",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'One record is queued for insertion.'",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$query",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","execute",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ We should be able to say \"use the field order\".\n",98],["T_WHITESPACE","    ",99],["T_VARIABLE","$query",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","values",99],"(",["T_ARRAY","array",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Moe'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'32'",99],")",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Check how many records are queued for insertion.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertIdentical",102],"(",["T_VARIABLE","$query",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","count",102],"(",")",",",["T_WHITESPACE"," ",102],["T_LNUMBER","1",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'One record is queued for insertion.'",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$query",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","execute",103],"(",")",";",["T_WHITESPACE","\n\n    ",103],["T_VARIABLE","$num_records_after",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","db_query",105],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {test}'",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","fetchField",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertIdentical",106],"(",["T_INT_CAST","(int)",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$num_records_before",106],["T_WHITESPACE"," ",106],"+",["T_WHITESPACE"," ",106],["T_LNUMBER","3",106],",",["T_WHITESPACE"," ",106],["T_INT_CAST","(int)",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$num_records_after",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Record inserts correctly.'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$saved_age",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","db_query",107],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",107],",",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'Larry'",107],")",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","fetchField",107],"(",")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertIdentical",108],"(",["T_VARIABLE","$saved_age",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'30'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$saved_age",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","db_query",109],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Curly'",109],")",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","fetchField",109],"(",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertIdentical",110],"(",["T_VARIABLE","$saved_age",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'31'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$saved_age",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","db_query",111],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Moe'",111],")",")",["T_OBJECT_OPERATOR","->",111],["T_STRING","fetchField",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertIdentical",112],"(",["T_VARIABLE","$saved_age",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'32'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",112],")",";",["T_WHITESPACE","\n  ",112],"}",["T_WHITESPACE","\n\n  ",113],["T_DOC_COMMENT","\/**\n   * Tests that we can specify fields without values and specify values later.\n   *\/",115],["T_WHITESPACE","\n  ",117],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","testInsertFieldOnlyDefinition",118],"(",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ This is useful for importers, when we want to create a query and define\n",119],["T_WHITESPACE","    ",120],["T_COMMENT","\/\/ its fields once, then loop over a multi-insert execution.\n",120],["T_WHITESPACE","    ",121],["T_STRING","db_insert",121],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",121],")",["T_WHITESPACE","\n      ",121],["T_OBJECT_OPERATOR","->",122],["T_STRING","fields",122],"(",["T_ARRAY","array",122],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'age'",122],")",")",["T_WHITESPACE","\n      ",122],["T_OBJECT_OPERATOR","->",123],["T_STRING","values",123],"(",["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Larry'",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'30'",123],")",")",["T_WHITESPACE","\n      ",123],["T_OBJECT_OPERATOR","->",124],["T_STRING","values",124],"(",["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'Curly'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'31'",124],")",")",["T_WHITESPACE","\n      ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","values",125],"(",["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Moe'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'32'",125],")",")",["T_WHITESPACE","\n      ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","execute",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$saved_age",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_STRING","db_query",127],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",127],",",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'Larry'",127],")",")",["T_OBJECT_OPERATOR","->",127],["T_STRING","fetchField",127],"(",")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertIdentical",128],"(",["T_VARIABLE","$saved_age",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'30'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$saved_age",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","db_query",129],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",129],",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Curly'",129],")",")",["T_OBJECT_OPERATOR","->",129],["T_STRING","fetchField",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertIdentical",130],"(",["T_VARIABLE","$saved_age",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'31'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$saved_age",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","db_query",131],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",131],",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Moe'",131],")",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","fetchField",131],"(",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertIdentical",132],"(",["T_VARIABLE","$saved_age",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'32'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",132],")",";",["T_WHITESPACE","\n  ",132],"}",["T_WHITESPACE","\n\n  ",133],["T_DOC_COMMENT","\/**\n   * Tests that inserts return the proper auto-increment ID.\n   *\/",135],["T_WHITESPACE","\n  ",137],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","testInsertLastInsertID",138],"(",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$id",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","db_insert",139],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",139],")",["T_WHITESPACE","\n      ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","fields",140],"(",["T_ARRAY","array",140],"(",["T_WHITESPACE","\n        ",140],["T_CONSTANT_ENCAPSED_STRING","'name'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'Larry'",141],",",["T_WHITESPACE","\n        ",141],["T_CONSTANT_ENCAPSED_STRING","'age'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'30'",142],",",["T_WHITESPACE","\n      ",142],")",")",["T_WHITESPACE","\n      ",143],["T_OBJECT_OPERATOR","->",144],["T_STRING","execute",144],"(",")",";",["T_WHITESPACE","\n\n    ",144],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertIdentical",146],"(",["T_VARIABLE","$id",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'5'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'Auto-increment ID returned successfully.'",146],")",";",["T_WHITESPACE","\n  ",146],"}",["T_WHITESPACE","\n\n  ",147],["T_DOC_COMMENT","\/**\n   * Tests that the INSERT INTO ... SELECT (fields) ... syntax works.\n   *\/",149],["T_WHITESPACE","\n  ",151],["T_FUNCTION","function",152],["T_WHITESPACE"," ",152],["T_STRING","testInsertSelectFields",152],"(",")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$query",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","db_select",153],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'tp'",153],")",";",["T_WHITESPACE","\n    ",153],["T_COMMENT","\/\/ The query builder will always append expressions after fields.\n",154],["T_WHITESPACE","    ",155],["T_COMMENT","\/\/ Add the expression first to test that the insert fields are correctly\n",155],["T_WHITESPACE","    ",156],["T_COMMENT","\/\/ re-ordered.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$query",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","addExpression",157],"(",["T_CONSTANT_ENCAPSED_STRING","'tp.age'",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'age'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$query",158],["T_WHITESPACE","\n      ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","fields",159],"(",["T_CONSTANT_ENCAPSED_STRING","'tp'",159],",",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'job'",159],")",")",["T_WHITESPACE","\n      ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","condition",160],"(",["T_CONSTANT_ENCAPSED_STRING","'tp.name'",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'Meredith'",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",162],["T_WHITESPACE","    ",163],["T_COMMENT","\/\/ INSERT INTO test (age, name, job)\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ SELECT tp.age AS age, tp.name AS name, tp.job AS job\n",164],["T_WHITESPACE","    ",165],["T_COMMENT","\/\/ FROM test_people tp\n",165],["T_WHITESPACE","    ",166],["T_COMMENT","\/\/ WHERE tp.name = 'Meredith'\n",166],["T_WHITESPACE","    ",167],["T_STRING","db_insert",167],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",167],")",["T_WHITESPACE","\n      ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","from",168],"(",["T_VARIABLE","$query",168],")",["T_WHITESPACE","\n      ",168],["T_OBJECT_OPERATOR","->",169],["T_STRING","execute",169],"(",")",";",["T_WHITESPACE","\n\n    ",169],["T_VARIABLE","$saved_age",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","db_query",171],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test} WHERE name = :name'",171],",",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'Meredith'",171],")",")",["T_OBJECT_OPERATOR","->",171],["T_STRING","fetchField",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertIdentical",172],"(",["T_VARIABLE","$saved_age",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'30'",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",172],")",";",["T_WHITESPACE","\n  ",172],"}",["T_WHITESPACE","\n\n  ",173],["T_DOC_COMMENT","\/**\n   * Tests that the INSERT INTO ... SELECT * ... syntax works.\n   *\/",175],["T_WHITESPACE","\n  ",177],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","testInsertSelectAll",178],"(",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$query",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","db_select",179],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'tp'",179],")",["T_WHITESPACE","\n      ",179],["T_OBJECT_OPERATOR","->",180],["T_STRING","fields",180],"(",["T_CONSTANT_ENCAPSED_STRING","'tp'",180],")",["T_WHITESPACE","\n      ",180],["T_OBJECT_OPERATOR","->",181],["T_STRING","condition",181],"(",["T_CONSTANT_ENCAPSED_STRING","'tp.name'",181],",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'Meredith'",181],")",";",["T_WHITESPACE","\n\n    ",181],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",183],["T_WHITESPACE","    ",184],["T_COMMENT","\/\/ INSERT INTO test_people_copy\n",184],["T_WHITESPACE","    ",185],["T_COMMENT","\/\/ SELECT *\n",185],["T_WHITESPACE","    ",186],["T_COMMENT","\/\/ FROM test_people tp\n",186],["T_WHITESPACE","    ",187],["T_COMMENT","\/\/ WHERE tp.name = 'Meredith'\n",187],["T_WHITESPACE","    ",188],["T_STRING","db_insert",188],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people_copy'",188],")",["T_WHITESPACE","\n      ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","from",189],"(",["T_VARIABLE","$query",189],")",["T_WHITESPACE","\n      ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","execute",190],"(",")",";",["T_WHITESPACE","\n\n    ",190],["T_VARIABLE","$saved_age",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","db_query",192],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT age FROM {test_people_copy} WHERE name = :name'",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_CONSTANT_ENCAPSED_STRING","':name'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Meredith'",192],")",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","fetchField",192],"(",")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertIdentical",193],"(",["T_VARIABLE","$saved_age",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'30'",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve after inserting.'",193],")",";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n  ",194],["T_DOC_COMMENT","\/**\n   * Tests that we can INSERT INTO a special named column.\n   *\/",196],["T_WHITESPACE","\n  ",198],["T_FUNCTION","function",199],["T_WHITESPACE"," ",199],["T_STRING","testSpecialColumnInsert",199],"(",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$id",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","db_insert",200],"(",["T_CONSTANT_ENCAPSED_STRING","'test_special_columns'",200],")",["T_WHITESPACE","\n      ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","fields",201],"(",["T_ARRAY","array",201],"(",["T_WHITESPACE","\n        ",201],["T_CONSTANT_ENCAPSED_STRING","'id'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_LNUMBER","2",202],",",["T_WHITESPACE","\n        ",202],["T_CONSTANT_ENCAPSED_STRING","'offset'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'Offset value 2'",203],",",["T_WHITESPACE","\n      ",203],")",")",["T_WHITESPACE","\n      ",204],["T_OBJECT_OPERATOR","->",205],["T_STRING","execute",205],"(",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$saved_value",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","db_query",206],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT \"offset\" FROM {test_special_columns} WHERE id = :id'",206],",",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_CONSTANT_ENCAPSED_STRING","':id'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_LNUMBER","2",206],")",")",["T_OBJECT_OPERATOR","->",206],["T_STRING","fetchField",206],"(",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","assertIdentical",207],"(",["T_VARIABLE","$saved_value",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'Offset value 2'",207],",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'Can retrieve special column name value after inserting.'",207],")",";",["T_WHITESPACE","\n  ",207],"}",["T_WHITESPACE","\n\n",208],"}",["T_WHITESPACE","\n",210]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the Select query builder.\n *\n * @group Database\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","SelectSubqueryTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","DatabaseTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Tests that we can use a subquery in a FROM clause.\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","testFromSubquerySelect",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_COMMENT","\/\/ Create a subquery, which is just a normal query object.\n",16],["T_WHITESPACE","    ",17],["T_VARIABLE","$subquery",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","db_select",17],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'tt'",17],")",";",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$subquery",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","addField",18],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'pid'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'pid'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$subquery",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","addField",19],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'task'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'task'",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$subquery",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","condition",20],"(",["T_CONSTANT_ENCAPSED_STRING","'priority'",20],",",["T_WHITESPACE"," ",20],["T_LNUMBER","1",20],")",";",["T_WHITESPACE","\n\n    ",20],["T_FOR","for",22],["T_WHITESPACE"," ",22],"(",["T_VARIABLE","$i",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_LNUMBER","0",22],";",["T_WHITESPACE"," ",22],["T_VARIABLE","$i",22],["T_WHITESPACE"," ",22],"<",["T_WHITESPACE"," ",22],["T_LNUMBER","2",22],";",["T_WHITESPACE"," ",22],["T_VARIABLE","$i",22],["T_INC","++",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n      ",22],["T_COMMENT","\/\/ Create another query that joins against the virtual table resulting\n",23],["T_WHITESPACE","      ",24],["T_COMMENT","\/\/ from the subquery.\n",24],["T_WHITESPACE","      ",25],["T_VARIABLE","$select",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_STRING","db_select",25],"(",["T_VARIABLE","$subquery",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'tt2'",25],")",";",["T_WHITESPACE","\n      ",25],["T_VARIABLE","$select",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","join",26],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'t'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'t.id=tt2.pid'",26],")",";",["T_WHITESPACE","\n      ",26],["T_VARIABLE","$select",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","addField",27],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'name'",27],")",";",["T_WHITESPACE","\n      ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$i",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n        ",28],["T_COMMENT","\/\/ Use a different number of conditions here to confuse the subquery\n",29],["T_WHITESPACE","        ",30],["T_COMMENT","\/\/ placeholder counter, testing https:\/\/www.drupal.org\/node\/1112854.\n",30],["T_WHITESPACE","        ",31],["T_VARIABLE","$select",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","condition",31],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'John'",31],")",";",["T_WHITESPACE","\n      ",31],"}",["T_WHITESPACE","\n      ",32],["T_VARIABLE","$select",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","condition",33],"(",["T_CONSTANT_ENCAPSED_STRING","'task'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'code'",33],")",";",["T_WHITESPACE","\n\n      ",33],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",35],["T_WHITESPACE","      ",36],["T_COMMENT","\/\/ SELECT t.name\n",36],["T_WHITESPACE","      ",37],["T_COMMENT","\/\/ FROM (SELECT tt.pid AS pid, tt.task AS task FROM test_task tt WHERE priority=1) tt\n",37],["T_WHITESPACE","      ",38],["T_COMMENT","\/\/   INNER JOIN test t ON t.id=tt.pid\n",38],["T_WHITESPACE","      ",39],["T_COMMENT","\/\/ WHERE tt.task = 'code'\n",39],["T_WHITESPACE","      ",40],["T_VARIABLE","$people",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$select",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","execute",40],"(",")",["T_OBJECT_OPERATOR","->",40],["T_STRING","fetchCol",40],"(",")",";",["T_WHITESPACE","\n\n      ",40],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertEqual",42],"(",["T_STRING","count",42],"(",["T_VARIABLE","$people",42],")",",",["T_WHITESPACE"," ",42],["T_LNUMBER","1",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",42],")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * Tests that we can use a subquery in a FROM clause with a LIMIT.\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","testFromSubquerySelectWithLimit",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_COMMENT","\/\/ Create a subquery, which is just a normal query object.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$subquery",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","db_select",51],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'tt'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$subquery",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","addField",52],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'pid'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'pid'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$subquery",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","addField",53],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'task'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'task'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$subquery",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","orderBy",54],"(",["T_CONSTANT_ENCAPSED_STRING","'priority'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'DESC'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$subquery",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","range",55],"(",["T_LNUMBER","0",55],",",["T_WHITESPACE"," ",55],["T_LNUMBER","1",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Create another query that joins against the virtual table resulting\n",57],["T_WHITESPACE","    ",58],["T_COMMENT","\/\/ from the subquery.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$select",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","db_select",59],"(",["T_VARIABLE","$subquery",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'tt2'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$select",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","join",60],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'t'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'t.id=tt2.pid'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$select",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","addField",61],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'name'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ SELECT t.name\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ FROM (SELECT tt.pid AS pid, tt.task AS task FROM test_task tt ORDER BY priority DESC LIMIT 1 OFFSET 0) tt\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/   INNER JOIN test t ON t.id=tt.pid\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$people",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$select",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","execute",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","fetchCol",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertEqual",69],"(",["T_STRING","count",69],"(",["T_VARIABLE","$people",69],")",",",["T_WHITESPACE"," ",69],["T_LNUMBER","1",69],",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",69],")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Tests that we can use a subquery in a WHERE clause.\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","testConditionSubquerySelect",75],"(",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_COMMENT","\/\/ Create a subquery, which is just a normal query object.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$subquery",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","db_select",77],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'tt'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$subquery",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","addField",78],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'pid'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'pid'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$subquery",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","condition",79],"(",["T_CONSTANT_ENCAPSED_STRING","'tt.priority'",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","1",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Create another query that joins against the virtual table resulting\n",81],["T_WHITESPACE","    ",82],["T_COMMENT","\/\/ from the subquery.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$select",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","db_select",83],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'tt2'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$select",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","addField",84],"(",["T_CONSTANT_ENCAPSED_STRING","'tt2'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'task'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$select",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","condition",85],"(",["T_CONSTANT_ENCAPSED_STRING","'tt2.pid'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$subquery",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'IN'",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",87],["T_WHITESPACE","    ",88],["T_COMMENT","\/\/ SELECT tt2.name\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ FROM test tt2\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ WHERE tt2.pid IN (SELECT tt.pid AS pid FROM test_task tt WHERE tt.priority=1)\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$people",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$select",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","execute",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","fetchCol",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertEqual",92],"(",["T_STRING","count",92],"(",["T_VARIABLE","$people",92],")",",",["T_WHITESPACE"," ",92],["T_LNUMBER","5",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",92],")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n  ",93],["T_DOC_COMMENT","\/**\n   * Tests that we can use a subquery in a JOIN clause.\n   *\/",95],["T_WHITESPACE","\n  ",97],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","testJoinSubquerySelect",98],"(",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_COMMENT","\/\/ Create a subquery, which is just a normal query object.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$subquery",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","db_select",100],"(",["T_CONSTANT_ENCAPSED_STRING","'test_task'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'tt'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$subquery",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","addField",101],"(",["T_CONSTANT_ENCAPSED_STRING","'tt'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'pid'",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'pid'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$subquery",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","condition",102],"(",["T_CONSTANT_ENCAPSED_STRING","'priority'",102],",",["T_WHITESPACE"," ",102],["T_LNUMBER","1",102],")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ Create another query that joins against the virtual table resulting\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ from the subquery.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$select",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","db_select",106],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'t'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$select",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","join",107],"(",["T_VARIABLE","$subquery",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'tt'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'t.id=tt.pid'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$select",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","addField",108],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'name'",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ The resulting query should be equivalent to:\n",110],["T_WHITESPACE","    ",111],["T_COMMENT","\/\/ SELECT t.name\n",111],["T_WHITESPACE","    ",112],["T_COMMENT","\/\/ FROM test t\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/   INNER JOIN (SELECT tt.pid AS pid FROM test_task tt WHERE priority=1) tt ON t.id=tt.pid\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$people",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$select",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","execute",114],"(",")",["T_OBJECT_OPERATOR","->",114],["T_STRING","fetchCol",114],"(",")",";",["T_WHITESPACE","\n\n    ",114],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEqual",116],"(",["T_STRING","count",116],"(",["T_VARIABLE","$people",116],")",",",["T_WHITESPACE"," ",116],["T_LNUMBER","2",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Tests EXISTS subquery conditionals on SELECT statements.\n   *\n   * We essentially select all rows from the {test} table that have matching\n   * rows in the {test_people} table based on the shared name column.\n   *\/",119],["T_WHITESPACE","\n  ",124],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testExistsSubquerySelect",125],"(",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_COMMENT","\/\/ Put George into {test_people}.\n",126],["T_WHITESPACE","    ",127],["T_STRING","db_insert",127],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",127],")",["T_WHITESPACE","\n      ",127],["T_OBJECT_OPERATOR","->",128],["T_STRING","fields",128],"(",["T_ARRAY","array",128],"(",["T_WHITESPACE","\n        ",128],["T_CONSTANT_ENCAPSED_STRING","'name'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'George'",129],",",["T_WHITESPACE","\n        ",129],["T_CONSTANT_ENCAPSED_STRING","'age'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","27",130],",",["T_WHITESPACE","\n        ",130],["T_CONSTANT_ENCAPSED_STRING","'job'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Singer'",131],",",["T_WHITESPACE","\n      ",131],")",")",["T_WHITESPACE","\n      ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","execute",133],"(",")",";",["T_WHITESPACE","\n    ",133],["T_COMMENT","\/\/ Base query to {test}.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$query",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","db_select",135],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'t'",135],")",["T_WHITESPACE","\n      ",135],["T_OBJECT_OPERATOR","->",136],["T_STRING","fields",136],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",136],",",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",136],")",")",";",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ Subquery to {test_people}.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$subquery",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","db_select",138],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'tp'",138],")",["T_WHITESPACE","\n      ",138],["T_OBJECT_OPERATOR","->",139],["T_STRING","fields",139],"(",["T_CONSTANT_ENCAPSED_STRING","'tp'",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",139],")",")",["T_WHITESPACE","\n      ",139],["T_OBJECT_OPERATOR","->",140],["T_STRING","where",140],"(",["T_CONSTANT_ENCAPSED_STRING","'tp.name = t.name'",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$query",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","exists",141],"(",["T_VARIABLE","$subquery",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$result",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$query",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","execute",142],"(",")",";",["T_WHITESPACE","\n\n    ",142],["T_COMMENT","\/\/ Ensure that we got the right record.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$record",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$result",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","fetch",145],"(",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertEqual",146],"(",["T_VARIABLE","$record",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","name",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'George'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'Fetched name is correct using EXISTS query.'",146],")",";",["T_WHITESPACE","\n  ",146],"}",["T_WHITESPACE","\n\n  ",147],["T_DOC_COMMENT","\/**\n   * Tests NOT EXISTS subquery conditionals on SELECT statements.\n   *\n   * We essentially select all rows from the {test} table that don't have\n   * matching rows in the {test_people} table based on the shared name column.\n   *\/",149],["T_WHITESPACE","\n  ",154],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testNotExistsSubquerySelect",155],"(",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_COMMENT","\/\/ Put George into {test_people}.\n",156],["T_WHITESPACE","    ",157],["T_STRING","db_insert",157],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",157],")",["T_WHITESPACE","\n      ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","fields",158],"(",["T_ARRAY","array",158],"(",["T_WHITESPACE","\n        ",158],["T_CONSTANT_ENCAPSED_STRING","'name'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'George'",159],",",["T_WHITESPACE","\n        ",159],["T_CONSTANT_ENCAPSED_STRING","'age'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_LNUMBER","27",160],",",["T_WHITESPACE","\n        ",160],["T_CONSTANT_ENCAPSED_STRING","'job'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'Singer'",161],",",["T_WHITESPACE","\n      ",161],")",")",["T_WHITESPACE","\n      ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","execute",163],"(",")",";",["T_WHITESPACE","\n\n    ",163],["T_COMMENT","\/\/ Base query to {test}.\n",165],["T_WHITESPACE","    ",166],["T_VARIABLE","$query",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","db_select",166],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'t'",166],")",["T_WHITESPACE","\n      ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","fields",167],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",167],")",")",";",["T_WHITESPACE","\n    ",167],["T_COMMENT","\/\/ Subquery to {test_people}.\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$subquery",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","db_select",169],"(",["T_CONSTANT_ENCAPSED_STRING","'test_people'",169],",",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'tp'",169],")",["T_WHITESPACE","\n      ",169],["T_OBJECT_OPERATOR","->",170],["T_STRING","fields",170],"(",["T_CONSTANT_ENCAPSED_STRING","'tp'",170],",",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",170],")",")",["T_WHITESPACE","\n      ",170],["T_OBJECT_OPERATOR","->",171],["T_STRING","where",171],"(",["T_CONSTANT_ENCAPSED_STRING","'tp.name = t.name'",171],")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$query",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","notExists",172],"(",["T_VARIABLE","$subquery",172],")",";",["T_WHITESPACE","\n\n    ",172],["T_COMMENT","\/\/ Ensure that we got the right number of records.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$people",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$query",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","execute",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","fetchCol",175],"(",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_STRING","count",176],"(",["T_VARIABLE","$people",176],")",",",["T_WHITESPACE"," ",176],["T_LNUMBER","3",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'NOT EXISTS query returned the correct results.'",176],")",";",["T_WHITESPACE","\n  ",176],"}",["T_WHITESPACE","\n\n",177],"}",["T_WHITESPACE","\n",179]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Config",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Calculating the difference between two sets of configuration.\n *\n * @group config\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ConfigDiffTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","KernelTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'system'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Tests calculating the difference between two sets of configuration.\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testDiff",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$active",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","container",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$sync",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","container",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","get",26],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage.sync'",26],")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$config_name",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'config_test.system'",27],";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$change_key",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'foo'",28],";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$remove_key",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'404'",29],";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$add_key",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'biff'",30],";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$add_data",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'bangpow'",31],";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$change_data",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'foobar'",32],";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Install the default config.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","installConfig",35],"(",["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",35],")",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$original_data",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Drupal",36],["T_DOUBLE_COLON","::",36],["T_STRING","config",36],"(",["T_VARIABLE","$config_name",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Change a configuration value in sync.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$sync_data",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$original_data",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$sync_data",40],"[",["T_VARIABLE","$change_key",40],"]",["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$change_data",40],";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$sync_data",41],"[",["T_VARIABLE","$add_key",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$add_data",41],";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$sync",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","write",42],"(",["T_VARIABLE","$config_name",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$sync_data",42],")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Verify that the diff reflects a change.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$diff",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Drupal",45],["T_DOUBLE_COLON","::",45],["T_STRING","service",45],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","diff",45],"(",["T_VARIABLE","$active",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$sync",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$config_name",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$edits",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$diff",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getEdits",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertYamlEdit",47],"(",["T_VARIABLE","$edits",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$change_key",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'change'",47],",",["T_WHITESPACE","\n      ",47],"[",["T_VARIABLE","$change_key",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","': '",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$original_data",48],"[",["T_VARIABLE","$change_key",48],"]","]",",",["T_WHITESPACE","\n      ",48],"[",["T_VARIABLE","$change_key",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","': '",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$change_data",49],"]",")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Reset data back to original, and remove a key\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$sync_data",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$original_data",52],";",["T_WHITESPACE","\n    ",52],["T_UNSET","unset",53],"(",["T_VARIABLE","$sync_data",53],"[",["T_VARIABLE","$remove_key",53],"]",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$sync",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","write",54],"(",["T_VARIABLE","$config_name",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$sync_data",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Verify that the diff reflects a removed key.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$diff",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NS_SEPARATOR","\\",57],["T_STRING","Drupal",57],["T_DOUBLE_COLON","::",57],["T_STRING","service",57],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",57],")",["T_OBJECT_OPERATOR","->",57],["T_STRING","diff",57],"(",["T_VARIABLE","$active",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$sync",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$config_name",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$edits",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$diff",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getEdits",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertYamlEdit",59],"(",["T_VARIABLE","$edits",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$change_key",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'copy'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertYamlEdit",60],"(",["T_VARIABLE","$edits",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$remove_key",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'delete'",60],",",["T_WHITESPACE","\n      ",60],"[",["T_VARIABLE","$remove_key",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","': '",61],["T_WHITESPACE"," ",61],".",["T_WHITESPACE"," ",61],["T_VARIABLE","$original_data",61],"[",["T_VARIABLE","$remove_key",61],"]","]",",",["T_WHITESPACE","\n      ",61],["T_STRING","FALSE",62],["T_WHITESPACE","\n    ",62],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Reset data back to original and add a key\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$sync_data",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$original_data",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$sync_data",67],"[",["T_VARIABLE","$add_key",67],"]",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$add_data",67],";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$sync",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","write",68],"(",["T_VARIABLE","$config_name",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$sync_data",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Verify that the diff reflects an added key.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$diff",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NS_SEPARATOR","\\",71],["T_STRING","Drupal",71],["T_DOUBLE_COLON","::",71],["T_STRING","service",71],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","diff",71],"(",["T_VARIABLE","$active",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$sync",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$config_name",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$edits",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$diff",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getEdits",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertYamlEdit",73],"(",["T_VARIABLE","$edits",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$change_key",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'copy'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertYamlEdit",74],"(",["T_VARIABLE","$edits",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$add_key",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'add'",74],",",["T_WHITESPACE"," ",74],["T_STRING","FALSE",74],",",["T_WHITESPACE"," ",74],"[",["T_VARIABLE","$add_key",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","': '",74],["T_WHITESPACE"," ",74],".",["T_WHITESPACE"," ",74],["T_VARIABLE","$add_data",74],"]",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Test diffing a renamed config entity.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$test_entity_id",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","randomMachineName",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$test_entity",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","entity_create",78],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",78],",",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'id'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$test_entity_id",79],",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'label'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","randomMachineName",80],"(",")",",",["T_WHITESPACE","\n    ",80],")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$test_entity",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","save",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$data",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$active",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","read",83],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$test_entity_id",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$sync",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","write",84],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$test_entity_id",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$data",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$config_name",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.'",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_VARIABLE","$test_entity_id",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$diff",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Drupal",86],["T_DOUBLE_COLON","::",86],["T_STRING","service",86],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","diff",86],"(",["T_VARIABLE","$active",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$sync",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$config_name",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$config_name",86],")",";",["T_WHITESPACE","\n    ",86],["T_COMMENT","\/\/ Prove the fields match.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$edits",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$diff",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getEdits",88],"(",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertEqual",89],"(",["T_VARIABLE","$edits",89],"[",["T_LNUMBER","0",89],"]",["T_OBJECT_OPERATOR","->",89],["T_STRING","type",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'copy'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'The first item in the diff is a copy.'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertEqual",90],"(",["T_STRING","count",90],"(",["T_VARIABLE","$edits",90],")",",",["T_WHITESPACE"," ",90],["T_LNUMBER","1",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'There is one item in the diff'",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Rename the entity.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$new_test_entity_id",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","randomMachineName",93],"(",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$test_entity",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","set",94],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$new_test_entity_id",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$test_entity",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","save",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$diff",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NS_SEPARATOR","\\",97],["T_STRING","Drupal",97],["T_DOUBLE_COLON","::",97],["T_STRING","service",97],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",97],")",["T_OBJECT_OPERATOR","->",97],["T_STRING","diff",97],"(",["T_VARIABLE","$active",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$sync",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.'",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$new_test_entity_id",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$config_name",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$edits",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$diff",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getEdits",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertYamlEdit",99],"(",["T_VARIABLE","$edits",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'uuid'",99],",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'copy'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertYamlEdit",100],"(",["T_VARIABLE","$edits",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'id'",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'change'",100],",",["T_WHITESPACE","\n      ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'id: '",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_VARIABLE","$new_test_entity_id",101],"]",",",["T_WHITESPACE","\n      ",101],"[",["T_CONSTANT_ENCAPSED_STRING","'id: '",102],["T_WHITESPACE"," ",102],".",["T_WHITESPACE"," ",102],["T_VARIABLE","$test_entity_id",102],"]",")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertYamlEdit",103],"(",["T_VARIABLE","$edits",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'label'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'copy'",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertEqual",104],"(",["T_VARIABLE","$edits",104],"[",["T_LNUMBER","2",104],"]",["T_OBJECT_OPERATOR","->",104],["T_STRING","type",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'copy'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'The third item in the diff is a copy.'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEqual",105],"(",["T_STRING","count",105],"(",["T_VARIABLE","$edits",105],")",",",["T_WHITESPACE"," ",105],["T_LNUMBER","3",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'There are three items in the diff.'",105],")",";",["T_WHITESPACE","\n  ",105],"}",["T_WHITESPACE","\n\n  ",106],["T_DOC_COMMENT","\/**\n   * Tests calculating the difference between two sets of config collections.\n   *\/",108],["T_WHITESPACE","\n  ",110],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","testCollectionDiff",111],"(",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n    ",111],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\StorageInterface $active *\/",112],["T_WHITESPACE","\n    ",112],["T_VARIABLE","$active",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","container",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","get",113],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",113],")",";",["T_WHITESPACE","\n    ",113],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\StorageInterface $sync *\/",114],["T_WHITESPACE","\n    ",114],["T_VARIABLE","$sync",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","container",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","get",115],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage.sync'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$active_test_collection",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$active",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","createCollection",116],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$sync_test_collection",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$sync",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","createCollection",117],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$config_name",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'config_test.test'",119],";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$data",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'bar'",120],")",";",["T_WHITESPACE","\n\n    ",120],["T_VARIABLE","$active",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","write",122],"(",["T_VARIABLE","$config_name",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$data",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$sync",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","write",123],"(",["T_VARIABLE","$config_name",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$data",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$active_test_collection",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","write",124],"(",["T_VARIABLE","$config_name",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$data",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$sync_test_collection",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","write",125],"(",["T_VARIABLE","$config_name",125],",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'baz'",125],")",")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ Test the fields match in the default collection diff.\n",127],["T_WHITESPACE","    ",128],["T_VARIABLE","$diff",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NS_SEPARATOR","\\",128],["T_STRING","Drupal",128],["T_DOUBLE_COLON","::",128],["T_STRING","service",128],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",128],")",["T_OBJECT_OPERATOR","->",128],["T_STRING","diff",128],"(",["T_VARIABLE","$active",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$sync",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$config_name",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$edits",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$diff",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getEdits",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEqual",130],"(",["T_VARIABLE","$edits",130],"[",["T_LNUMBER","0",130],"]",["T_OBJECT_OPERATOR","->",130],["T_STRING","type",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'copy'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'The first item in the diff is a copy.'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEqual",131],"(",["T_STRING","count",131],"(",["T_VARIABLE","$edits",131],")",",",["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'There is one item in the diff'",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Test that the differences are detected when diffing the collection.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$diff",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NS_SEPARATOR","\\",134],["T_STRING","Drupal",134],["T_DOUBLE_COLON","::",134],["T_STRING","service",134],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",134],")",["T_OBJECT_OPERATOR","->",134],["T_STRING","diff",134],"(",["T_VARIABLE","$active",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$sync",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$config_name",134],",",["T_WHITESPACE"," ",134],["T_STRING","NULL",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'test'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$edits",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$diff",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getEdits",135],"(",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertYamlEdit",136],"(",["T_VARIABLE","$edits",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'foo'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'change'",136],",",["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'foo: bar'",136],"]",",",["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'foo: baz'",136],"]",")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * Helper method to test that an edit is found in a diff'd YAML file.\n   *\n   * @param array $edits\n   *   A list of edits.\n   * @param string $field\n   *   The field key that is being asserted.\n   * @param string $type\n   *   The type of edit that is being asserted.\n   * @param mixed $orig\n   *   (optional) The original value of of the edit. If not supplied, assertion\n   *   is skipped.\n   * @param mixed $closing\n   *   (optional) The closing value of of the edit. If not supplied, assertion\n   *   is skipped.\n   *\/",139],["T_WHITESPACE","\n  ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","assertYamlEdit",155],"(",["T_ARRAY","array",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$edits",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$field",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$type",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$orig",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","NULL",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$closing",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","NULL",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$match",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","FALSE",156],";",["T_WHITESPACE","\n    ",156],["T_FOREACH","foreach",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$edits",157],["T_WHITESPACE"," ",157],["T_AS","as",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$edit",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_COMMENT","\/\/ Choose which section to search for the field.\n",158],["T_WHITESPACE","      ",159],["T_VARIABLE","$haystack",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$type",159],["T_WHITESPACE"," ",159],["T_IS_EQUAL","==",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'add'",159],["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_VARIABLE","$edit",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","closing",159],["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_VARIABLE","$edit",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","orig",159],";",["T_WHITESPACE","\n      ",159],["T_COMMENT","\/\/ Look through each line and try and find the key.\n",160],["T_WHITESPACE","      ",161],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_STRING","is_array",161],"(",["T_VARIABLE","$haystack",161],")",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n        ",161],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$haystack",162],["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$item",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n          ",162],["T_IF","if",163],["T_WHITESPACE"," ",163],"(",["T_STRING","strpos",163],"(",["T_VARIABLE","$item",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$field",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","':'",163],")",["T_WHITESPACE"," ",163],["T_IS_IDENTICAL","===",163],["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n            ",163],["T_VARIABLE","$match",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","TRUE",164],";",["T_WHITESPACE","\n            ",164],["T_COMMENT","\/\/ Assert that the edit is of the type specified.\n",165],["T_WHITESPACE","            ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertEqual",166],"(",["T_VARIABLE","$edit",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","type",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$type",166],",",["T_WHITESPACE"," ",166],"\"",["T_ENCAPSED_AND_WHITESPACE","The ",166],["T_VARIABLE","$field",166],["T_ENCAPSED_AND_WHITESPACE"," item in the diff is a ",166],["T_VARIABLE","$type",166],"\"",")",";",["T_WHITESPACE","\n            ",166],["T_COMMENT","\/\/ If an original value was given, assert that it matches.\n",167],["T_WHITESPACE","            ",168],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_ISSET","isset",168],"(",["T_VARIABLE","$orig",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n              ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertIdentical",169],"(",["T_VARIABLE","$edit",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","orig",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$orig",169],",",["T_WHITESPACE"," ",169],"\"",["T_ENCAPSED_AND_WHITESPACE","The original value for key '",169],["T_VARIABLE","$field",169],["T_ENCAPSED_AND_WHITESPACE","' is correct.",169],"\"",")",";",["T_WHITESPACE","\n            ",169],"}",["T_WHITESPACE","\n            ",170],["T_COMMENT","\/\/ If a closing value was given, assert that it matches.\n",171],["T_WHITESPACE","            ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_ISSET","isset",172],"(",["T_VARIABLE","$closing",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n              ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertIdentical",173],"(",["T_VARIABLE","$edit",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","closing",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$closing",173],",",["T_WHITESPACE"," ",173],"\"",["T_ENCAPSED_AND_WHITESPACE","The closing value for key '",173],["T_VARIABLE","$field",173],["T_ENCAPSED_AND_WHITESPACE","' is correct.",173],"\"",")",";",["T_WHITESPACE","\n            ",173],"}",["T_WHITESPACE","\n            ",174],["T_COMMENT","\/\/ Break out of the search entirely.\n",175],["T_WHITESPACE","            ",176],["T_BREAK","break",176],["T_WHITESPACE"," ",176],["T_LNUMBER","2",176],";",["T_WHITESPACE","\n          ",176],"}",["T_WHITESPACE","\n        ",177],"}",["T_WHITESPACE","\n      ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_COMMENT","\/\/ If we didn't match anything, fail.\n",182],["T_WHITESPACE","    ",183],["T_IF","if",183],["T_WHITESPACE"," ",183],"(","!",["T_VARIABLE","$match",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","fail",184],"(","\"",["T_VARIABLE","$field",184],["T_ENCAPSED_AND_WHITESPACE"," edit was not matched",184],"\"",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n  ",185],"}",["T_WHITESPACE","\n\n",186],"}",["T_WHITESPACE","\n",188]]
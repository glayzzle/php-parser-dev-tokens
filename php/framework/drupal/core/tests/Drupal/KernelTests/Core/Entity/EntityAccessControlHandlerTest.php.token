[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","LanguageInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Session",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AccountInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Access",7],["T_NS_SEPARATOR","\\",7],["T_STRING","AccessibleInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityAccessControlHandler",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Session",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AnonymousUserSession",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","entity_test",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityTest",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","entity_test",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityTestDefaultAccess",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","entity_test",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityTestLabel",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","language",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Entity",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ConfigurableLanguage",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","user",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Tests the entity access control handler.\n *\n * @group Entity\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","EntityAccessControlHandlerTest",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","EntityLanguageTestBase",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Asserts entity access correctly grants or denies access.\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","assertEntityAccess",26],"(",["T_VARIABLE","$ops",26],",",["T_WHITESPACE"," ",26],["T_STRING","AccessibleInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$object",26],",",["T_WHITESPACE"," ",26],["T_STRING","AccountInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$account",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","NULL",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_FOREACH","foreach",27],["T_WHITESPACE"," ",27],"(",["T_VARIABLE","$ops",27],["T_WHITESPACE"," ",27],["T_AS","as",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$op",27],["T_WHITESPACE"," ",27],["T_DOUBLE_ARROW","=>",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$result",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n      ",27],["T_VARIABLE","$message",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","format_string",28],"(",["T_CONSTANT_ENCAPSED_STRING","\"Entity access returns @result with operation '@op'.\"",28],",",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_WHITESPACE","\n        ",28],["T_CONSTANT_ENCAPSED_STRING","'@result'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],"!",["T_ISSET","isset",29],"(",["T_VARIABLE","$result",29],")",["T_WHITESPACE"," ",29],"?",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'null'",29],["T_WHITESPACE"," ",29],":",["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$result",29],["T_WHITESPACE"," ",29],"?",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'true'",29],["T_WHITESPACE"," ",29],":",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'false'",29],")",",",["T_WHITESPACE","\n        ",29],["T_CONSTANT_ENCAPSED_STRING","'@op'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$op",30],",",["T_WHITESPACE","\n      ",30],")",")",";",["T_WHITESPACE","\n\n      ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertEqual",33],"(",["T_VARIABLE","$result",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$object",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","access",33],"(",["T_VARIABLE","$op",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$account",33],")",",",["T_WHITESPACE"," ",33],["T_VARIABLE","$message",33],")",";",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n  ",34],"}",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Ensures user labels are accessible for everyone.\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","testUserLabelAccess",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_COMMENT","\/\/ Set up a non-admin user.\n",41],["T_WHITESPACE","    ",42],["T_NS_SEPARATOR","\\",42],["T_STRING","Drupal",42],["T_DOUBLE_COLON","::",42],["T_STRING","currentUser",42],"(",")",["T_OBJECT_OPERATOR","->",42],["T_STRING","setAccount",42],"(",["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","createUser",42],"(","[",["T_CONSTANT_ENCAPSED_STRING","'uid'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","2",42],"]",")",")",";",["T_WHITESPACE","\n\n    ",42],["T_VARIABLE","$anonymous_user",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","User",44],["T_DOUBLE_COLON","::",44],["T_STRING","getAnonymousUser",44],"(",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$user",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","createUser",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ The current user is allowed to view the anonymous user label.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEntityAccess",48],"(",["T_ARRAY","array",48],"(",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'create'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_STRING","FALSE",49],",",["T_WHITESPACE","\n      ",49],["T_CONSTANT_ENCAPSED_STRING","'update'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_STRING","FALSE",50],",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'delete'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_STRING","FALSE",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'view'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_STRING","FALSE",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'view label'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_STRING","TRUE",53],",",["T_WHITESPACE","\n    ",53],")",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$anonymous_user",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ The current user is allowed to view user labels.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertEntityAccess",57],"(",["T_ARRAY","array",57],"(",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'create'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_STRING","FALSE",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'update'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_STRING","FALSE",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'delete'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_STRING","FALSE",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'view'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_STRING","FALSE",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'view label'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],",",["T_WHITESPACE","\n    ",62],")",",",["T_WHITESPACE"," ",63],["T_VARIABLE","$user",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Switch to a anonymous user account.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$account_switcher",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Drupal",66],["T_DOUBLE_COLON","::",66],["T_STRING","service",66],"(",["T_CONSTANT_ENCAPSED_STRING","'account_switcher'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$account_switcher",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","switchTo",67],"(",["T_NEW","new",67],["T_WHITESPACE"," ",67],["T_STRING","AnonymousUserSession",67],"(",")",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ The anonymous user is allowed to view the anonymous user label.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEntityAccess",70],"(",["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'create'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","FALSE",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'update'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","FALSE",72],",",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'delete'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_STRING","FALSE",73],",",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'view'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_STRING","FALSE",74],",",["T_WHITESPACE","\n      ",74],["T_CONSTANT_ENCAPSED_STRING","'view label'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_STRING","TRUE",75],",",["T_WHITESPACE","\n    ",75],")",",",["T_WHITESPACE"," ",76],["T_VARIABLE","$anonymous_user",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ The anonymous user is allowed to view user labels.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEntityAccess",79],"(",["T_ARRAY","array",79],"(",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'create'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_STRING","FALSE",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'update'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_STRING","FALSE",81],",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'delete'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","FALSE",82],",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'view'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","FALSE",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'view label'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_STRING","TRUE",84],",",["T_WHITESPACE","\n    ",84],")",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$user",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Restore user account.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$account_switcher",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","switchBack",88],"(",")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Ensures entity access is properly working.\n   *\/",91],["T_WHITESPACE","\n  ",93],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","testEntityAccess",94],"(",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_COMMENT","\/\/ Set up a non-admin user that is allowed to view test entities.\n",95],["T_WHITESPACE","    ",96],["T_NS_SEPARATOR","\\",96],["T_STRING","Drupal",96],["T_DOUBLE_COLON","::",96],["T_STRING","currentUser",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","setAccount",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","createUser",96],"(",["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_LNUMBER","2",96],")",",",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity'",96],")",")",")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Use the 'entity_test_label' entity type in order to test the 'view label'\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ access operation.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$entity",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","EntityTestLabel",100],["T_DOUBLE_COLON","::",100],["T_STRING","create",100],"(",["T_ARRAY","array",100],"(",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'name'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'test'",101],",",["T_WHITESPACE","\n    ",101],")",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ The current user is allowed to view entities.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertEntityAccess",105],"(",["T_ARRAY","array",105],"(",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'create'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_STRING","FALSE",106],",",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'update'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_STRING","FALSE",107],",",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'delete'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_STRING","FALSE",108],",",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'view'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_STRING","TRUE",109],",",["T_WHITESPACE","\n      ",109],["T_CONSTANT_ENCAPSED_STRING","'view label'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_STRING","TRUE",110],",",["T_WHITESPACE","\n    ",110],")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$entity",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ The custom user is not allowed to perform any operation on test entities,\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ except for viewing their label.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$custom_user",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","createUser",115],"(",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEntityAccess",116],"(",["T_ARRAY","array",116],"(",["T_WHITESPACE","\n      ",116],["T_CONSTANT_ENCAPSED_STRING","'create'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_STRING","FALSE",117],",",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'update'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_STRING","FALSE",118],",",["T_WHITESPACE","\n      ",118],["T_CONSTANT_ENCAPSED_STRING","'delete'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","FALSE",119],",",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'view'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_STRING","FALSE",120],",",["T_WHITESPACE","\n      ",120],["T_CONSTANT_ENCAPSED_STRING","'view label'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","TRUE",121],",",["T_WHITESPACE","\n    ",121],")",",",["T_WHITESPACE"," ",122],["T_VARIABLE","$entity",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$custom_user",122],")",";",["T_WHITESPACE","\n  ",122],"}",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * Ensures default entity access is checked when necessary.\n   *\n   * This ensures that the default checkAccess() implementation of the\n   * entity access control handler is considered if hook_entity_access() has not\n   * explicitly forbidden access. Therefore the default checkAccess()\n   * implementation can forbid access, even after access was already explicitly\n   * allowed by hook_entity_access().\n   *\n   * @see \\Drupal\\entity_test\\EntityTestAccessControlHandler::checkAccess()\n   * @see entity_test_entity_access()\n   *\/",125],["T_WHITESPACE","\n  ",136],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","testDefaultEntityAccess",137],"(",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_COMMENT","\/\/ Set up a non-admin user that is allowed to view test entities.\n",138],["T_WHITESPACE","    ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Drupal",139],["T_DOUBLE_COLON","::",139],["T_STRING","currentUser",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","setAccount",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","createUser",139],"(",["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_LNUMBER","2",139],")",",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity'",139],")",")",")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$entity",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_STRING","EntityTest",140],["T_DOUBLE_COLON","::",140],["T_STRING","create",140],"(",["T_ARRAY","array",140],"(",["T_WHITESPACE","\n        ",140],["T_CONSTANT_ENCAPSED_STRING","'name'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'forbid_access'",141],",",["T_WHITESPACE","\n      ",141],")",")",";",["T_WHITESPACE","\n\n    ",142],["T_COMMENT","\/\/ The user is denied access to the entity.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertEntityAccess",145],"(",["T_ARRAY","array",145],"(",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'create'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_STRING","FALSE",146],",",["T_WHITESPACE","\n        ",146],["T_CONSTANT_ENCAPSED_STRING","'update'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_STRING","FALSE",147],",",["T_WHITESPACE","\n        ",147],["T_CONSTANT_ENCAPSED_STRING","'delete'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_STRING","FALSE",148],",",["T_WHITESPACE","\n        ",148],["T_CONSTANT_ENCAPSED_STRING","'view'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_STRING","FALSE",149],",",["T_WHITESPACE","\n      ",149],")",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$entity",150],")",";",["T_WHITESPACE","\n  ",150],"}",["T_WHITESPACE","\n\n  ",151],["T_DOC_COMMENT","\/**\n   * Ensures that the default handler is used as a fallback.\n   *\/",153],["T_WHITESPACE","\n  ",155],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","testEntityAccessDefaultController",156],"(",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n    ",156],["T_COMMENT","\/\/ The implementation requires that the global user id can be loaded.\n",157],["T_WHITESPACE","    ",158],["T_NS_SEPARATOR","\\",158],["T_STRING","Drupal",158],["T_DOUBLE_COLON","::",158],["T_STRING","currentUser",158],"(",")",["T_OBJECT_OPERATOR","->",158],["T_STRING","setAccount",158],"(",["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","createUser",158],"(",["T_ARRAY","array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_LNUMBER","2",158],")",")",")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Check that the default access control handler is used for entities that don't\n",160],["T_WHITESPACE","    ",161],["T_COMMENT","\/\/ have a specific access control handler defined.\n",161],["T_WHITESPACE","    ",162],["T_VARIABLE","$handler",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","container",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",162],")",["T_OBJECT_OPERATOR","->",162],["T_STRING","getAccessControlHandler",162],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_default_access'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertTrue",163],"(",["T_VARIABLE","$handler",163],["T_WHITESPACE"," ",163],["T_INSTANCEOF","instanceof",163],["T_WHITESPACE"," ",163],["T_STRING","EntityAccessControlHandler",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'The default entity handler is used for the entity_test_default_access entity type.'",163],")",";",["T_WHITESPACE","\n\n    ",163],["T_VARIABLE","$entity",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","EntityTestDefaultAccess",165],["T_DOUBLE_COLON","::",165],["T_STRING","create",165],"(",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertEntityAccess",166],"(",["T_ARRAY","array",166],"(",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'create'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_STRING","FALSE",167],",",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'update'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_STRING","FALSE",168],",",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'delete'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_STRING","FALSE",169],",",["T_WHITESPACE","\n      ",169],["T_CONSTANT_ENCAPSED_STRING","'view'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","FALSE",170],",",["T_WHITESPACE","\n    ",170],")",",",["T_WHITESPACE"," ",171],["T_VARIABLE","$entity",171],")",";",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * Ensures entity access for entity translations is properly working.\n   *\/",174],["T_WHITESPACE","\n  ",176],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","testEntityTranslationAccess",177],"(",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Set up a non-admin user that is allowed to view test entity translations.\n",179],["T_WHITESPACE","    ",180],["T_NS_SEPARATOR","\\",180],["T_STRING","Drupal",180],["T_DOUBLE_COLON","::",180],["T_STRING","currentUser",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","setAccount",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","createUser",180],"(",["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_LNUMBER","2",180],")",",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'view test entity translations'",180],")",")",")",";",["T_WHITESPACE","\n\n    ",180],["T_COMMENT","\/\/ Create two test languages.\n",182],["T_WHITESPACE","    ",183],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_ARRAY","array",183],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'bar'",183],")",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$langcode",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_STRING","ConfigurableLanguage",184],["T_DOUBLE_COLON","::",184],["T_STRING","create",184],"(",["T_ARRAY","array",184],"(",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'id'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$langcode",185],",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'label'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","randomString",186],"(",")",",",["T_WHITESPACE","\n      ",186],")",")",["T_OBJECT_OPERATOR","->",187],["T_STRING","save",187],"(",")",";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n\n    ",188],["T_VARIABLE","$entity",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_STRING","EntityTest",190],["T_DOUBLE_COLON","::",190],["T_STRING","create",190],"(",["T_ARRAY","array",190],"(",["T_WHITESPACE","\n      ",190],["T_CONSTANT_ENCAPSED_STRING","'name'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'test'",191],",",["T_WHITESPACE","\n      ",191],["T_CONSTANT_ENCAPSED_STRING","'langcode'",192],["T_WHITESPACE"," ",192],["T_DOUBLE_ARROW","=>",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'foo'",192],",",["T_WHITESPACE","\n    ",192],")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$entity",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","save",194],"(",")",";",["T_WHITESPACE","\n\n    ",194],["T_VARIABLE","$translation",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$entity",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addTranslation",196],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertEntityAccess",197],"(",["T_ARRAY","array",197],"(",["T_WHITESPACE","\n      ",197],["T_CONSTANT_ENCAPSED_STRING","'view'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_STRING","TRUE",198],",",["T_WHITESPACE","\n    ",198],")",",",["T_WHITESPACE"," ",199],["T_VARIABLE","$translation",199],")",";",["T_WHITESPACE","\n  ",199],"}",["T_WHITESPACE","\n\n  ",200],["T_DOC_COMMENT","\/**\n   * Tests hook invocations.\n   *\/",202],["T_WHITESPACE","\n  ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","testHooks",205],"(",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$state",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","container",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","get",206],"(",["T_CONSTANT_ENCAPSED_STRING","'state'",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$entity",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","EntityTest",207],["T_DOUBLE_COLON","::",207],["T_STRING","create",207],"(",["T_ARRAY","array",207],"(",["T_WHITESPACE","\n      ",207],["T_CONSTANT_ENCAPSED_STRING","'name'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'test'",208],",",["T_WHITESPACE","\n    ",208],")",")",";",["T_WHITESPACE","\n\n    ",209],["T_COMMENT","\/\/ Test hook_entity_create_access() and hook_ENTITY_TYPE_create_access().\n",211],["T_WHITESPACE","    ",212],["T_VARIABLE","$entity",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","access",212],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",212],")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","assertEqual",213],"(",["T_VARIABLE","$state",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","get",213],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_entity_create_access'",213],")",",",["T_WHITESPACE"," ",213],["T_STRING","TRUE",213],")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertIdentical",214],"(",["T_VARIABLE","$state",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","get",214],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_entity_create_access_context'",214],")",",",["T_WHITESPACE"," ",214],"[",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",215],",",["T_WHITESPACE","\n      ",215],["T_CONSTANT_ENCAPSED_STRING","'langcode'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_STRING","LanguageInterface",216],["T_DOUBLE_COLON","::",216],["T_STRING","LANGCODE_DEFAULT",216],",",["T_WHITESPACE","\n    ",216],"]",")",";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertEqual",218],"(",["T_VARIABLE","$state",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","get",218],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_entity_test_create_access'",218],")",",",["T_WHITESPACE"," ",218],["T_STRING","TRUE",218],")",";",["T_WHITESPACE","\n\n    ",218],["T_COMMENT","\/\/ Test hook_entity_access() and hook_ENTITY_TYPE_access().\n",220],["T_WHITESPACE","    ",221],["T_VARIABLE","$entity",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","access",221],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",221],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","assertEqual",222],"(",["T_VARIABLE","$state",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","get",222],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_entity_access'",222],")",",",["T_WHITESPACE"," ",222],["T_STRING","TRUE",222],")",";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","assertEqual",223],"(",["T_VARIABLE","$state",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","get",223],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_entity_test_access'",223],")",",",["T_WHITESPACE"," ",223],["T_STRING","TRUE",223],")",";",["T_WHITESPACE","\n  ",223],"}",["T_WHITESPACE","\n\n",224],"}",["T_WHITESPACE","\n",226]]
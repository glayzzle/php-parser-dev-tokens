[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Config",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","entity_test",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTest",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityKernelTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests for configuration dependencies.\n *\n * @coversDefaultClass \\Drupal\\Core\\Config\\ConfigManager\n *\n * @group config\n *\/",8],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ConfigDependencyTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","EntityKernelTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * The entity_test module is enabled to provide content entity types.\n   *\n   * @var array\n   *\/",17],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'user'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Tests that calculating dependencies for system module.\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","testNonEntity",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","installConfig",30],"(",["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",30],")",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$config_manager",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_NS_SEPARATOR","\\",31],["T_STRING","Drupal",31],["T_DOUBLE_COLON","::",31],["T_STRING","service",31],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",31],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$dependents",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$config_manager",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","findConfigEntityDependents",32],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",32],")",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertTrue",33],"(",["T_ISSET","isset",33],"(",["T_VARIABLE","$dependents",33],"[",["T_CONSTANT_ENCAPSED_STRING","'system.site'",33],"]",")",",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Simple configuration system.site has a UUID key even though it is not a configuration entity and therefore is found when looking for dependencies of the System module.'",33],")",";",["T_WHITESPACE","\n    ",33],["T_COMMENT","\/\/ Ensure that calling\n",34],["T_WHITESPACE","    ",35],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigManager::findConfigEntityDependentsAsEntities()\n",35],["T_WHITESPACE","    ",36],["T_COMMENT","\/\/ does not try to load system.site as an entity.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$config_manager",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","findConfigEntityDependentsAsEntities",37],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",37],",",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",37],")",")",";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Tests creating dependencies on configuration entities.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","testDependencyManagement",43],"(",")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",44],["T_WHITESPACE","\n    ",44],["T_VARIABLE","$config_manager",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Drupal",45],["T_DOUBLE_COLON","::",45],["T_STRING","service",45],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$storage",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","container",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","get",46],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","getStorage",46],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",46],")",";",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ Test dependencies between modules.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$entity1",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$storage",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","create",48],"(",["T_WHITESPACE","\n      ",48],["T_ARRAY","array",49],"(",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'id'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'entity1'",50],",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n          ",51],["T_CONSTANT_ENCAPSED_STRING","'enforced'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_WHITESPACE","\n            ",52],["T_CONSTANT_ENCAPSED_STRING","'module'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",53],")",["T_WHITESPACE","\n          ",53],")",["T_WHITESPACE","\n        ",54],")",["T_WHITESPACE","\n      ",55],")",["T_WHITESPACE","\n    ",56],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$entity1",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","save",58],"(",")",";",["T_WHITESPACE","\n\n    ",58],["T_VARIABLE","$dependents",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$config_manager",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","findConfigEntityDependents",60],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",60],",",["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",60],")",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertTrue",61],"(",["T_ISSET","isset",61],"(",["T_VARIABLE","$dependents",61],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",61],"]",")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 has a dependency on the Node module.'",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$dependents",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$config_manager",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","findConfigEntityDependents",62],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",62],",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertTrue",63],"(",["T_ISSET","isset",63],"(",["T_VARIABLE","$dependents",63],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",63],"]",")",",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 has a dependency on the config_test module.'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$dependents",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$config_manager",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","findConfigEntityDependents",64],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertFalse",65],"(",["T_ISSET","isset",65],"(",["T_VARIABLE","$dependents",65],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",65],"]",")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on the Views module.'",65],")",";",["T_WHITESPACE","\n    ",65],["T_COMMENT","\/\/ Ensure that the provider of the config entity is not actually written to\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ the dependencies array.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$raw_config",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","config",68],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$root_module_dependencies",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$raw_config",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'dependencies.module'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertTrue",70],"(",["T_EMPTY","empty",70],"(",["T_VARIABLE","$root_module_dependencies",70],")",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Node module is not written to the root dependencies array as it is enforced.'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Create additional entities to test dependencies on config entities.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$entity2",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$storage",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","create",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'entity2'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'enforced'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_VARIABLE","$entity1",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getConfigDependencyName",73],"(",")",")",")",")",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$entity2",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","save",74],"(",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$entity3",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$storage",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","create",75],"(",["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'entity3'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'enforced'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_VARIABLE","$entity2",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getConfigDependencyName",75],"(",")",")",")",")",")",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$entity3",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","save",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$entity4",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$storage",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","create",77],"(",["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'entity4'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'enforced'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_VARIABLE","$entity3",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getConfigDependencyName",77],"(",")",")",")",")",")",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$entity4",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","save",78],"(",")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Test getting $entity1's dependencies as configuration dependency objects.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$dependents",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$config_manager",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","findConfigEntityDependents",81],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",81],",",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_VARIABLE","$entity1",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getConfigDependencyName",81],"(",")",")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertFalse",82],"(",["T_ISSET","isset",82],"(",["T_VARIABLE","$dependents",82],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",82],"]",")",",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on itself.'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertTrue",83],"(",["T_ISSET","isset",83],"(",["T_VARIABLE","$dependents",83],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2'",83],"]",")",",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 has a dependency on config_test.dynamic.entity1.'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertTrue",84],"(",["T_ISSET","isset",84],"(",["T_VARIABLE","$dependents",84],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3'",84],"]",")",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on config_test.dynamic.entity1.'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertTrue",85],"(",["T_ISSET","isset",85],"(",["T_VARIABLE","$dependents",85],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4'",85],"]",")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on config_test.dynamic.entity1.'",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Test getting $entity2's dependencies as entities.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$dependents",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$config_manager",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","findConfigEntityDependentsAsEntities",88],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_VARIABLE","$entity2",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getConfigDependencyName",88],"(",")",")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$dependent_ids",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getDependentIds",89],"(",["T_VARIABLE","$dependents",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertFalse",90],"(",["T_STRING","in_array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity1'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$dependent_ids",90],")",",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on config_test.dynamic.entity1.'",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertFalse",91],"(",["T_STRING","in_array",91],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity2'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$dependent_ids",91],")",",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 does not have a dependency on itself.'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertTrue",92],"(",["T_STRING","in_array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity3'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$dependent_ids",92],")",",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on config_test.dynamic.entity2.'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertTrue",93],"(",["T_STRING","in_array",93],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity4'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$dependent_ids",93],")",",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on config_test.dynamic.entity2.'",93],")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Test getting node module's dependencies as configuration dependency\n",95],["T_WHITESPACE","    ",96],["T_COMMENT","\/\/ objects.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$dependents",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$config_manager",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","findConfigEntityDependents",97],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",97],",",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",97],")",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertTrue",98],"(",["T_ISSET","isset",98],"(",["T_VARIABLE","$dependents",98],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",98],"]",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 has a dependency on the Node module.'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertTrue",99],"(",["T_ISSET","isset",99],"(",["T_VARIABLE","$dependents",99],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2'",99],"]",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 has a dependency on the Node module.'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertTrue",100],"(",["T_ISSET","isset",100],"(",["T_VARIABLE","$dependents",100],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3'",100],"]",")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on the Node module.'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertTrue",101],"(",["T_ISSET","isset",101],"(",["T_VARIABLE","$dependents",101],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4'",101],"]",")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on the Node module.'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Test getting node module's dependencies as configuration dependency\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ objects after making $entity3 also dependent on node module but $entity1\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ no longer depend on node module.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$entity1",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setEnforcedDependencies",106],"(","[","]",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","save",106],"(",")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$entity3",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setEnforcedDependencies",107],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",107],"]",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'config'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],"[",["T_VARIABLE","$entity2",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getConfigDependencyName",107],"(",")","]","]",")",["T_OBJECT_OPERATOR","->",107],["T_STRING","save",107],"(",")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$dependents",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$config_manager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","findConfigEntityDependents",108],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",108],",",["T_WHITESPACE"," ",108],["T_ARRAY","array",108],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",108],")",")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertFalse",109],"(",["T_ISSET","isset",109],"(",["T_VARIABLE","$dependents",109],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",109],"]",")",",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on the Node module.'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertFalse",110],"(",["T_ISSET","isset",110],"(",["T_VARIABLE","$dependents",110],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2'",110],"]",")",",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 does not have a dependency on the Node module.'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertTrue",111],"(",["T_ISSET","isset",111],"(",["T_VARIABLE","$dependents",111],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3'",111],"]",")",",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on the Node module.'",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertTrue",112],"(",["T_ISSET","isset",112],"(",["T_VARIABLE","$dependents",112],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4'",112],"]",")",",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on the Node module.'",112],")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Test dependency on a content entity.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$entity_test",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","EntityTest",115],["T_DOUBLE_COLON","::",115],["T_STRING","create",115],"(",["T_ARRAY","array",115],"(",["T_WHITESPACE","\n      ",115],["T_CONSTANT_ENCAPSED_STRING","'name'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","randomString",116],"(",")",",",["T_WHITESPACE","\n      ",116],["T_CONSTANT_ENCAPSED_STRING","'type'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",117],",",["T_WHITESPACE","\n    ",117],")",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$entity_test",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","save",119],"(",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$entity2",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setEnforcedDependencies",120],"(","[",["T_CONSTANT_ENCAPSED_STRING","'config'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],"[",["T_VARIABLE","$entity1",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getConfigDependencyName",120],"(",")","]",",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'content'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],"[",["T_VARIABLE","$entity_test",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getConfigDependencyName",120],"(",")","]","]",")",["T_OBJECT_OPERATOR","->",120],["T_STRING","save",120],"(",")",";",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$dependents",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$config_manager",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","findConfigEntityDependents",121],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",121],",",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_VARIABLE","$entity_test",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getConfigDependencyName",121],"(",")",")",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertFalse",122],"(",["T_ISSET","isset",122],"(",["T_VARIABLE","$dependents",122],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1'",122],"]",")",",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on the content entity.'",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertTrue",123],"(",["T_ISSET","isset",123],"(",["T_VARIABLE","$dependents",123],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2'",123],"]",")",",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 has a dependency on the content entity.'",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertTrue",124],"(",["T_ISSET","isset",124],"(",["T_VARIABLE","$dependents",124],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3'",124],"]",")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on the content entity (via entity2).'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertTrue",125],"(",["T_ISSET","isset",125],"(",["T_VARIABLE","$dependents",125],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4'",125],"]",")",",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on the content entity (via entity3).'",125],")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ Create a configuration entity of a different type with the same ID as one\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ of the entities already created.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$alt_storage",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","container",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","get",129],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",129],")",["T_OBJECT_OPERATOR","->",129],["T_STRING","getStorage",129],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test'",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$alt_storage",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","create",130],"(",["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'entity1'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'enforced'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_VARIABLE","$entity1",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getConfigDependencyName",130],"(",")",")",")",")",")",")",["T_OBJECT_OPERATOR","->",130],["T_STRING","save",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$alt_storage",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","create",131],"(",["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'entity2'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'enforced'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",131],")",")",")",")",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","save",131],"(",")",";",["T_WHITESPACE","\n\n    ",131],["T_VARIABLE","$dependents",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$config_manager",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","findConfigEntityDependentsAsEntities",133],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_VARIABLE","$entity1",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getConfigDependencyName",133],"(",")",")",")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$dependent_ids",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getDependentIds",134],"(",["T_VARIABLE","$dependents",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertFalse",135],"(",["T_STRING","in_array",135],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity1'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$dependent_ids",135],")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on itself.'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertTrue",136],"(",["T_STRING","in_array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity2'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$dependent_ids",136],")",",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 has a dependency on config_test.dynamic.entity1.'",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertTrue",137],"(",["T_STRING","in_array",137],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity3'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$dependent_ids",137],")",",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on config_test.dynamic.entity1.'",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertTrue",138],"(",["T_STRING","in_array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity4'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$dependent_ids",138],")",",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on config_test.dynamic.entity1.'",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertTrue",139],"(",["T_STRING","in_array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity1'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$dependent_ids",139],")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'config_query_test.dynamic.entity1 has a dependency on config_test.dynamic.entity1.'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertFalse",140],"(",["T_STRING","in_array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity2'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$dependent_ids",140],")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'config_query_test.dynamic.entity2 does not have a dependency on config_test.dynamic.entity1.'",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$dependents",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$config_manager",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","findConfigEntityDependentsAsEntities",142],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",142],",",["T_WHITESPACE"," ",142],["T_ARRAY","array",142],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'views'",142],")",")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$dependent_ids",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getDependentIds",143],"(",["T_VARIABLE","$dependents",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertFalse",144],"(",["T_STRING","in_array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity1'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$dependent_ids",144],")",",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 does not have a dependency on Views or Node.'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertFalse",145],"(",["T_STRING","in_array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity2'",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$dependent_ids",145],")",",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 does not have a dependency on Views or Node.'",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertTrue",146],"(",["T_STRING","in_array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity3'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$dependent_ids",146],")",",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on Views or Node.'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertTrue",147],"(",["T_STRING","in_array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity4'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$dependent_ids",147],")",",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on Views or Node.'",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertFalse",148],"(",["T_STRING","in_array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity1'",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$dependent_ids",148],")",",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'config_test.query.entity1 does not have a dependency on Views or Node.'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertTrue",149],"(",["T_STRING","in_array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity2'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$dependent_ids",149],")",",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'config_test.query.entity2 has a dependency on Views or Node.'",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$dependents",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$config_manager",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","findConfigEntityDependentsAsEntities",151],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",151],",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",151],")",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$dependent_ids",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getDependentIds",152],"(",["T_VARIABLE","$dependents",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertTrue",153],"(",["T_STRING","in_array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity1'",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$dependent_ids",153],")",",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity1 has a dependency on config_test module.'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertTrue",154],"(",["T_STRING","in_array",154],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity2'",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$dependent_ids",154],")",",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity2 has a dependency on config_test module.'",154],")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertTrue",155],"(",["T_STRING","in_array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity3'",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$dependent_ids",155],")",",",["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity3 has a dependency on config_test module.'",155],")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertTrue",156],"(",["T_STRING","in_array",156],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test:entity4'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$dependent_ids",156],")",",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'config_test.dynamic.entity4 has a dependency on config_test module.'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertTrue",157],"(",["T_STRING","in_array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity1'",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$dependent_ids",157],")",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'config_test.query.entity1 has a dependency on config_test module.'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertTrue",158],"(",["T_STRING","in_array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'config_query_test:entity2'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$dependent_ids",158],")",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'config_test.query.entity2 has a dependency on config_test module.'",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Test the ability to find missing content dependencies.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$missing_dependencies",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$config_manager",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","findMissingContentDependencies",161],"(",")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertEqual",162],"(","[","]",",",["T_WHITESPACE"," ",162],["T_VARIABLE","$missing_dependencies",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_VARIABLE","$expected",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],"[",["T_VARIABLE","$entity_test",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","uuid",164],"(",")",["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],"[",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'bundle'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$entity_test",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","bundle",166],"(",")",",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'uuid'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$entity_test",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","uuid",167],"(",")",",",["T_WHITESPACE","\n    ",167],"]","]",";",["T_WHITESPACE","\n    ",168],["T_COMMENT","\/\/ Delete the content entity so that is it now missing.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$entity_test",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","delete",170],"(",")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$missing_dependencies",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$config_manager",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","findMissingContentDependencies",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertEqual",172],"(",["T_VARIABLE","$expected",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$missing_dependencies",172],")",";",["T_WHITESPACE","\n\n    ",172],["T_COMMENT","\/\/ Add a fake missing dependency to ensure multiple missing dependencies\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ work.\n",175],["T_WHITESPACE","    ",176],["T_VARIABLE","$entity1",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setEnforcedDependencies",176],"(","[",["T_CONSTANT_ENCAPSED_STRING","'content'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],"[",["T_VARIABLE","$entity_test",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getConfigDependencyName",176],"(",")",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'entity_test:bundle:uuid'",176],"]","]",")",["T_OBJECT_OPERATOR","->",176],["T_STRING","save",176],"(",")",";",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$expected",177],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",177],"]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",178],",",["T_WHITESPACE","\n      ",178],["T_CONSTANT_ENCAPSED_STRING","'bundle'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'bundle'",179],",",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'uuid'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'uuid'",180],",",["T_WHITESPACE","\n    ",180],"]",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$missing_dependencies",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$config_manager",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","findMissingContentDependencies",182],"(",")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertEqual",183],"(",["T_VARIABLE","$expected",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$missing_dependencies",183],")",";",["T_WHITESPACE","\n  ",183],"}",["T_WHITESPACE","\n\n  ",184],["T_DOC_COMMENT","\/**\n   * Tests ConfigManager::uninstall() and config entity dependency management.\n   *\/",186],["T_WHITESPACE","\n  ",188],["T_PUBLIC","public",189],["T_WHITESPACE"," ",189],["T_FUNCTION","function",189],["T_WHITESPACE"," ",189],["T_STRING","testConfigEntityUninstall",189],"(",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n    ",189],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",190],["T_WHITESPACE","\n    ",190],["T_VARIABLE","$config_manager",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Drupal",191],["T_DOUBLE_COLON","::",191],["T_STRING","service",191],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",191],")",";",["T_WHITESPACE","\n    ",191],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityStorage $storage *\/",192],["T_WHITESPACE","\n    ",192],["T_VARIABLE","$storage",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","container",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","get",193],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",193],")",["T_WHITESPACE","\n      ",193],["T_OBJECT_OPERATOR","->",194],["T_STRING","getStorage",194],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",194],")",";",["T_WHITESPACE","\n    ",194],["T_COMMENT","\/\/ Test dependencies between modules.\n",195],["T_WHITESPACE","    ",196],["T_VARIABLE","$entity1",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$storage",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","create",196],"(",["T_WHITESPACE","\n      ",196],["T_ARRAY","array",197],"(",["T_WHITESPACE","\n        ",197],["T_CONSTANT_ENCAPSED_STRING","'id'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'entity1'",198],",",["T_WHITESPACE","\n        ",198],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_WHITESPACE","\n          ",199],["T_CONSTANT_ENCAPSED_STRING","'enforced'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_WHITESPACE","\n            ",200],["T_CONSTANT_ENCAPSED_STRING","'module'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'config_test'",201],")",["T_WHITESPACE","\n          ",201],")",",",["T_WHITESPACE","\n        ",202],")",",",["T_WHITESPACE","\n      ",203],")",["T_WHITESPACE","\n    ",204],")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$entity1",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","save",206],"(",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$entity2",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$storage",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","create",207],"(",["T_WHITESPACE","\n      ",207],["T_ARRAY","array",208],"(",["T_WHITESPACE","\n        ",208],["T_CONSTANT_ENCAPSED_STRING","'id'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'entity2'",209],",",["T_WHITESPACE","\n        ",209],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_WHITESPACE","\n          ",210],["T_CONSTANT_ENCAPSED_STRING","'enforced'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'config'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_ARRAY","array",212],"(",["T_VARIABLE","$entity1",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getConfigDependencyName",212],"(",")",")",",",["T_WHITESPACE","\n          ",212],")",",",["T_WHITESPACE","\n        ",213],")",",",["T_WHITESPACE","\n      ",214],")",["T_WHITESPACE","\n    ",215],")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$entity2",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","save",217],"(",")",";",["T_WHITESPACE","\n    ",217],["T_COMMENT","\/\/ Perform a module rebuild so we can know where the node module is located\n",218],["T_WHITESPACE","    ",219],["T_COMMENT","\/\/ and uninstall it.\n",219],["T_WHITESPACE","    ",220],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",220],["T_WHITESPACE","    ",221],["T_STRING","system_rebuild_module_data",221],"(",")",";",["T_WHITESPACE","\n    ",221],["T_COMMENT","\/\/ Test that doing a config uninstall of the node module deletes entity2\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ since it is dependent on entity1 which is dependent on the node module.\n",223],["T_WHITESPACE","    ",224],["T_VARIABLE","$config_manager",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","uninstall",224],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",224],",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'node'",224],")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","assertFalse",225],"(",["T_VARIABLE","$storage",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","load",225],"(",["T_CONSTANT_ENCAPSED_STRING","'entity1'",225],")",",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 deleted'",225],")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertFalse",226],"(",["T_VARIABLE","$storage",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","load",226],"(",["T_CONSTANT_ENCAPSED_STRING","'entity2'",226],")",",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 deleted'",226],")",";",["T_WHITESPACE","\n  ",226],"}",["T_WHITESPACE","\n\n  ",227],["T_DOC_COMMENT","\/**\n   * Data provider for self::testConfigEntityUninstallComplex().\n   *\/",229],["T_WHITESPACE","\n  ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","providerConfigEntityUninstallComplex",232],"(",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n    ",232],["T_COMMENT","\/\/ Ensure that alphabetical order has no influence on dependency fixing and\n",233],["T_WHITESPACE","    ",234],["T_COMMENT","\/\/ removal.\n",234],["T_WHITESPACE","    ",235],["T_RETURN","return",235],["T_WHITESPACE"," ",235],"[",["T_WHITESPACE","\n      ",235],"[","[",["T_CONSTANT_ENCAPSED_STRING","'a'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'b'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'c'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'d'",236],"]","]",",",["T_WHITESPACE","\n      ",236],"[","[",["T_CONSTANT_ENCAPSED_STRING","'d'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'c'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'b'",237],",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'a'",237],"]","]",",",["T_WHITESPACE","\n      ",237],"[","[",["T_CONSTANT_ENCAPSED_STRING","'c'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'d'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'a'",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'b'",238],"]","]",",",["T_WHITESPACE","\n    ",238],"]",";",["T_WHITESPACE","\n  ",239],"}",["T_WHITESPACE","\n\n  ",240],["T_DOC_COMMENT","\/**\n   * Tests complex configuration entity dependency handling during uninstall.\n   *\n   * Configuration entities can be deleted or updated during module uninstall\n   * because they have dependencies on the module.\n   *\n   * @param array $entity_id_suffixes\n   *   The suffixes to add to the 4 entities created by the test.\n   *\n   * @dataProvider providerConfigEntityUninstallComplex\n   *\/",242],["T_WHITESPACE","\n  ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","testConfigEntityUninstallComplex",253],"(",["T_ARRAY","array",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$entity_id_suffixes",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n    ",253],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",254],["T_WHITESPACE","\n    ",254],["T_VARIABLE","$config_manager",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_NS_SEPARATOR","\\",255],["T_STRING","Drupal",255],["T_DOUBLE_COLON","::",255],["T_STRING","service",255],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",255],")",";",["T_WHITESPACE","\n    ",255],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityStorage $storage *\/",256],["T_WHITESPACE","\n    ",256],["T_VARIABLE","$storage",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","container",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","get",257],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",257],")",["T_WHITESPACE","\n      ",257],["T_OBJECT_OPERATOR","->",258],["T_STRING","getStorage",258],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",258],")",";",["T_WHITESPACE","\n    ",258],["T_COMMENT","\/\/ Entity 1 will be deleted because it depends on node.\n",259],["T_WHITESPACE","    ",260],["T_VARIABLE","$entity_1",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$storage",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","create",260],"(",["T_WHITESPACE","\n      ",260],["T_ARRAY","array",261],"(",["T_WHITESPACE","\n        ",261],["T_CONSTANT_ENCAPSED_STRING","'id'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'entity_'",262],["T_WHITESPACE"," ",262],".",["T_WHITESPACE"," ",262],["T_VARIABLE","$entity_id_suffixes",262],"[",["T_LNUMBER","0",262],"]",",",["T_WHITESPACE","\n        ",262],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_ARRAY","array",263],"(",["T_WHITESPACE","\n          ",263],["T_CONSTANT_ENCAPSED_STRING","'enforced'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_ARRAY","array",264],"(",["T_WHITESPACE","\n            ",264],["T_CONSTANT_ENCAPSED_STRING","'module'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'config_test'",265],")",["T_WHITESPACE","\n          ",265],")",",",["T_WHITESPACE","\n        ",266],")",",",["T_WHITESPACE","\n      ",267],")",["T_WHITESPACE","\n    ",268],")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$entity_1",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","save",270],"(",")",";",["T_WHITESPACE","\n\n    ",270],["T_COMMENT","\/\/ Entity 2 has a dependency on entity 1 but it can be fixed because\n",272],["T_WHITESPACE","    ",273],["T_COMMENT","\/\/ \\Drupal\\config_test\\Entity::onDependencyRemoval() will remove the\n",273],["T_WHITESPACE","    ",274],["T_COMMENT","\/\/ dependency before config entities are deleted.\n",274],["T_WHITESPACE","    ",275],["T_VARIABLE","$entity_2",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$storage",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","create",275],"(",["T_WHITESPACE","\n      ",275],["T_ARRAY","array",276],"(",["T_WHITESPACE","\n        ",276],["T_CONSTANT_ENCAPSED_STRING","'id'",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'entity_'",277],["T_WHITESPACE"," ",277],".",["T_WHITESPACE"," ",277],["T_VARIABLE","$entity_id_suffixes",277],"[",["T_LNUMBER","1",277],"]",",",["T_WHITESPACE","\n        ",277],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",278],["T_WHITESPACE"," ",278],["T_DOUBLE_ARROW","=>",278],["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",["T_WHITESPACE","\n          ",278],["T_CONSTANT_ENCAPSED_STRING","'enforced'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_ARRAY","array",279],"(",["T_WHITESPACE","\n            ",279],["T_CONSTANT_ENCAPSED_STRING","'config'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_ARRAY","array",280],"(",["T_VARIABLE","$entity_1",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getConfigDependencyName",280],"(",")",")",",",["T_WHITESPACE","\n          ",280],")",",",["T_WHITESPACE","\n        ",281],")",",",["T_WHITESPACE","\n      ",282],")",["T_WHITESPACE","\n    ",283],")",";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$entity_2",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","save",285],"(",")",";",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Entity 3 will be unchanged because it is dependent on entity 2 which can\n",287],["T_WHITESPACE","    ",288],["T_COMMENT","\/\/ be fixed. The ConfigEntityInterface::onDependencyRemoval() method will\n",288],["T_WHITESPACE","    ",289],["T_COMMENT","\/\/ not be called for this entity.\n",289],["T_WHITESPACE","    ",290],["T_VARIABLE","$entity_3",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$storage",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","create",290],"(",["T_WHITESPACE","\n      ",290],["T_ARRAY","array",291],"(",["T_WHITESPACE","\n        ",291],["T_CONSTANT_ENCAPSED_STRING","'id'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'entity_'",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$entity_id_suffixes",292],"[",["T_LNUMBER","2",292],"]",",",["T_WHITESPACE","\n        ",292],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",293],["T_WHITESPACE"," ",293],["T_DOUBLE_ARROW","=>",293],["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",["T_WHITESPACE","\n          ",293],["T_CONSTANT_ENCAPSED_STRING","'enforced'",294],["T_WHITESPACE"," ",294],["T_DOUBLE_ARROW","=>",294],["T_WHITESPACE"," ",294],["T_ARRAY","array",294],"(",["T_WHITESPACE","\n            ",294],["T_CONSTANT_ENCAPSED_STRING","'config'",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",["T_VARIABLE","$entity_2",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getConfigDependencyName",295],"(",")",")",",",["T_WHITESPACE","\n          ",295],")",",",["T_WHITESPACE","\n        ",296],")",",",["T_WHITESPACE","\n      ",297],")",["T_WHITESPACE","\n    ",298],")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$entity_3",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","save",300],"(",")",";",["T_WHITESPACE","\n\n    ",300],["T_COMMENT","\/\/ Entity 4's config dependency will be fixed but it will still be deleted\n",302],["T_WHITESPACE","    ",303],["T_COMMENT","\/\/ because it also depends on the node module.\n",303],["T_WHITESPACE","    ",304],["T_VARIABLE","$entity_4",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$storage",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","create",304],"(",["T_WHITESPACE","\n      ",304],["T_ARRAY","array",305],"(",["T_WHITESPACE","\n        ",305],["T_CONSTANT_ENCAPSED_STRING","'id'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'entity_'",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$entity_id_suffixes",306],"[",["T_LNUMBER","3",306],"]",",",["T_WHITESPACE","\n        ",306],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_WHITESPACE","\n          ",307],["T_CONSTANT_ENCAPSED_STRING","'enforced'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_WHITESPACE","\n            ",308],["T_CONSTANT_ENCAPSED_STRING","'config'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",["T_VARIABLE","$entity_1",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getConfigDependencyName",309],"(",")",")",",",["T_WHITESPACE","\n            ",309],["T_CONSTANT_ENCAPSED_STRING","'module'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_ARRAY","array",310],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",310],",",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'config_test'",310],")",["T_WHITESPACE","\n          ",310],")",",",["T_WHITESPACE","\n        ",311],")",",",["T_WHITESPACE","\n      ",312],")",["T_WHITESPACE","\n    ",313],")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$entity_4",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","save",315],"(",")",";",["T_WHITESPACE","\n\n    ",315],["T_COMMENT","\/\/ Set a more complicated test where dependencies will be fixed.\n",317],["T_WHITESPACE","    ",318],["T_NS_SEPARATOR","\\",318],["T_STRING","Drupal",318],["T_DOUBLE_COLON","::",318],["T_STRING","state",318],"(",")",["T_OBJECT_OPERATOR","->",318],["T_STRING","set",318],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.fix_dependencies'",318],",",["T_WHITESPACE"," ",318],["T_ARRAY","array",318],"(",["T_VARIABLE","$entity_1",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getConfigDependencyName",318],"(",")",")",")",";",["T_WHITESPACE","\n    ",318],["T_NS_SEPARATOR","\\",319],["T_STRING","Drupal",319],["T_DOUBLE_COLON","::",319],["T_STRING","state",319],"(",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","set",319],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.on_dependency_removal_called'",319],",",["T_WHITESPACE"," ",319],"[","]",")",";",["T_WHITESPACE","\n\n    ",319],["T_COMMENT","\/\/ Do a dry run using\n",321],["T_WHITESPACE","    ",322],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigManager::getConfigEntitiesToChangeOnDependencyRemoval().\n",322],["T_WHITESPACE","    ",323],["T_VARIABLE","$config_entities",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$config_manager",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",323],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",323],",",["T_WHITESPACE"," ",323],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",323],"]",")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","assertEqual",324],"(",["T_VARIABLE","$entity_1",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","uuid",324],"(",")",",",["T_WHITESPACE"," ",324],["T_VARIABLE","$config_entities",324],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",324],"]","[",["T_LNUMBER","1",324],"]",["T_OBJECT_OPERATOR","->",324],["T_STRING","uuid",324],"(",")",",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 will be deleted.'",324],")",";",["T_WHITESPACE","\n    ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","assertEqual",325],"(",["T_VARIABLE","$entity_2",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","uuid",325],"(",")",",",["T_WHITESPACE"," ",325],["T_STRING","reset",325],"(",["T_VARIABLE","$config_entities",325],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",325],"]",")",["T_OBJECT_OPERATOR","->",325],["T_STRING","uuid",325],"(",")",",",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 will be updated.'",325],")",";",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","assertEqual",326],"(",["T_VARIABLE","$entity_3",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","uuid",326],"(",")",",",["T_WHITESPACE"," ",326],["T_STRING","reset",326],"(",["T_VARIABLE","$config_entities",326],"[",["T_CONSTANT_ENCAPSED_STRING","'unchanged'",326],"]",")",["T_OBJECT_OPERATOR","->",326],["T_STRING","uuid",326],"(",")",",",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 is not changed.'",326],")",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","assertEqual",327],"(",["T_VARIABLE","$entity_4",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","uuid",327],"(",")",",",["T_WHITESPACE"," ",327],["T_VARIABLE","$config_entities",327],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",327],"]","[",["T_LNUMBER","0",327],"]",["T_OBJECT_OPERATOR","->",327],["T_STRING","uuid",327],"(",")",",",["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","'Entity 4 will be deleted.'",327],")",";",["T_WHITESPACE","\n\n    ",327],["T_VARIABLE","$called",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_NS_SEPARATOR","\\",329],["T_STRING","Drupal",329],["T_DOUBLE_COLON","::",329],["T_STRING","state",329],"(",")",["T_OBJECT_OPERATOR","->",329],["T_STRING","get",329],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.on_dependency_removal_called'",329],",",["T_WHITESPACE"," ",329],"[","]",")",";",["T_WHITESPACE","\n    ",329],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","assertFalse",330],"(",["T_STRING","in_array",330],"(",["T_VARIABLE","$entity_3",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","id",330],"(",")",",",["T_WHITESPACE"," ",330],["T_VARIABLE","$called",330],")",",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'ConfigEntityInterface::onDependencyRemoval() is not called for entity 3.'",330],")",";",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","assertIdentical",331],"(","[",["T_VARIABLE","$entity_1",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","id",331],"(",")",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$entity_4",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","id",331],"(",")",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$entity_2",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","id",331],"(",")","]",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$called",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'The most dependent entites have ConfigEntityInterface::onDependencyRemoval() called first.'",331],")",";",["T_WHITESPACE","\n\n    ",331],["T_COMMENT","\/\/ Perform a module rebuild so we can know where the node module is located\n",333],["T_WHITESPACE","    ",334],["T_COMMENT","\/\/ and uninstall it.\n",334],["T_WHITESPACE","    ",335],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",335],["T_WHITESPACE","    ",336],["T_STRING","system_rebuild_module_data",336],"(",")",";",["T_WHITESPACE","\n    ",336],["T_COMMENT","\/\/ Perform the uninstall.\n",337],["T_WHITESPACE","    ",338],["T_VARIABLE","$config_manager",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","uninstall",338],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'node'",338],")",";",["T_WHITESPACE","\n\n    ",338],["T_COMMENT","\/\/ Test that expected actions have been performed.\n",340],["T_WHITESPACE","    ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","assertFalse",341],"(",["T_VARIABLE","$storage",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","load",341],"(",["T_VARIABLE","$entity_1",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","id",341],"(",")",")",",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 deleted'",341],")",";",["T_WHITESPACE","\n    ",341],["T_VARIABLE","$entity_2",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$storage",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","load",342],"(",["T_VARIABLE","$entity_2",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","id",342],"(",")",")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","assertTrue",343],"(",["T_VARIABLE","$entity_2",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 not deleted'",343],")",";",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","assertEqual",344],"(",["T_VARIABLE","$entity_2",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","calculateDependencies",344],"(",")",["T_OBJECT_OPERATOR","->",344],["T_STRING","getDependencies",344],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",344],"]",",",["T_WHITESPACE"," ",344],["T_ARRAY","array",344],"(",")",",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 dependencies updated to remove dependency on entity 1.'",344],")",";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$entity_3",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$storage",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","load",345],"(",["T_VARIABLE","$entity_3",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","id",345],"(",")",")",";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","assertTrue",346],"(",["T_VARIABLE","$entity_3",346],",",["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 not deleted'",346],")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","assertEqual",347],"(",["T_VARIABLE","$entity_3",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","calculateDependencies",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","getDependencies",347],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",347],"]",",",["T_WHITESPACE"," ",347],"[",["T_VARIABLE","$entity_2",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getConfigDependencyName",347],"(",")","]",",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 still depends on entity 2.'",347],")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","assertFalse",348],"(",["T_VARIABLE","$storage",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","load",348],"(",["T_VARIABLE","$entity_4",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","id",348],"(",")",")",",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'Entity 4 deleted'",348],")",";",["T_WHITESPACE","\n  ",348],"}",["T_WHITESPACE","\n\n  ",349],["T_DOC_COMMENT","\/**\n   * @covers ::uninstall\n   * @covers ::getConfigEntitiesToChangeOnDependencyRemoval\n   *\/",351],["T_WHITESPACE","\n  ",354],["T_PUBLIC","public",355],["T_WHITESPACE"," ",355],["T_FUNCTION","function",355],["T_WHITESPACE"," ",355],["T_STRING","testConfigEntityUninstallThirdParty",355],"(",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n    ",355],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",356],["T_WHITESPACE","\n    ",356],["T_VARIABLE","$config_manager",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_NS_SEPARATOR","\\",357],["T_STRING","Drupal",357],["T_DOUBLE_COLON","::",357],["T_STRING","service",357],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",357],")",";",["T_WHITESPACE","\n    ",357],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityStorage $storage *\/",358],["T_WHITESPACE","\n    ",358],["T_VARIABLE","$storage",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","container",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","get",359],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",359],")",["T_WHITESPACE","\n      ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","getStorage",360],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",360],")",";",["T_WHITESPACE","\n    ",360],["T_COMMENT","\/\/ Entity 1 will be fixed because it only has a dependency via third-party\n",361],["T_WHITESPACE","    ",362],["T_COMMENT","\/\/ settings, which are fixable.\n",362],["T_WHITESPACE","    ",363],["T_VARIABLE","$entity_1",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$storage",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","create",363],"(","[",["T_WHITESPACE","\n      ",363],["T_CONSTANT_ENCAPSED_STRING","'id'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'entity_1'",364],",",["T_WHITESPACE","\n      ",364],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],"[",["T_WHITESPACE","\n        ",365],["T_CONSTANT_ENCAPSED_STRING","'enforced'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],"[",["T_WHITESPACE","\n          ",366],["T_CONSTANT_ENCAPSED_STRING","'module'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],"[",["T_CONSTANT_ENCAPSED_STRING","'config_test'",367],"]",",",["T_WHITESPACE","\n        ",367],"]",",",["T_WHITESPACE","\n      ",368],"]",",",["T_WHITESPACE","\n      ",369],["T_CONSTANT_ENCAPSED_STRING","'third_party_settings'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],"[",["T_WHITESPACE","\n        ",370],["T_CONSTANT_ENCAPSED_STRING","'node'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],"[",["T_WHITESPACE","\n          ",371],["T_CONSTANT_ENCAPSED_STRING","'foo'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'bar'",372],",",["T_WHITESPACE","\n        ",372],"]",",",["T_WHITESPACE","\n      ",373],"]",",",["T_WHITESPACE","\n    ",374],"]",")",";",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$entity_1",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","save",376],"(",")",";",["T_WHITESPACE","\n\n    ",376],["T_COMMENT","\/\/ Entity 2 has a dependency on entity 1.\n",378],["T_WHITESPACE","    ",379],["T_VARIABLE","$entity_2",379],["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$storage",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","create",379],"(","[",["T_WHITESPACE","\n      ",379],["T_CONSTANT_ENCAPSED_STRING","'id'",380],["T_WHITESPACE"," ",380],["T_DOUBLE_ARROW","=>",380],["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'entity_2'",380],",",["T_WHITESPACE","\n      ",380],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],"[",["T_WHITESPACE","\n        ",381],["T_CONSTANT_ENCAPSED_STRING","'enforced'",382],["T_WHITESPACE"," ",382],["T_DOUBLE_ARROW","=>",382],["T_WHITESPACE"," ",382],"[",["T_WHITESPACE","\n          ",382],["T_CONSTANT_ENCAPSED_STRING","'config'",383],["T_WHITESPACE"," ",383],["T_DOUBLE_ARROW","=>",383],["T_WHITESPACE"," ",383],"[",["T_VARIABLE","$entity_1",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getConfigDependencyName",383],"(",")","]",",",["T_WHITESPACE","\n        ",383],"]",",",["T_WHITESPACE","\n      ",384],"]",",",["T_WHITESPACE","\n      ",385],["T_CONSTANT_ENCAPSED_STRING","'third_party_settings'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],"[",["T_WHITESPACE","\n        ",386],["T_CONSTANT_ENCAPSED_STRING","'node'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],"[",["T_WHITESPACE","\n          ",387],["T_CONSTANT_ENCAPSED_STRING","'foo'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'bar'",388],",",["T_WHITESPACE","\n        ",388],"]",",",["T_WHITESPACE","\n      ",389],"]",",",["T_WHITESPACE","\n    ",390],"]",")",";",["T_WHITESPACE","\n    ",391],["T_VARIABLE","$entity_2",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","save",392],"(",")",";",["T_WHITESPACE","\n\n    ",392],["T_COMMENT","\/\/ Entity 3 will be unchanged because it is dependent on entity 2 which can\n",394],["T_WHITESPACE","    ",395],["T_COMMENT","\/\/ be fixed. The ConfigEntityInterface::onDependencyRemoval() method will\n",395],["T_WHITESPACE","    ",396],["T_COMMENT","\/\/ not be called for this entity.\n",396],["T_WHITESPACE","    ",397],["T_VARIABLE","$entity_3",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$storage",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","create",397],"(","[",["T_WHITESPACE","\n      ",397],["T_CONSTANT_ENCAPSED_STRING","'id'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'entity_3'",398],",",["T_WHITESPACE","\n      ",398],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],"[",["T_WHITESPACE","\n        ",399],["T_CONSTANT_ENCAPSED_STRING","'enforced'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],"[",["T_WHITESPACE","\n          ",400],["T_CONSTANT_ENCAPSED_STRING","'config'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],"[",["T_VARIABLE","$entity_2",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","getConfigDependencyName",401],"(",")","]",",",["T_WHITESPACE","\n        ",401],"]",",",["T_WHITESPACE","\n      ",402],"]",",",["T_WHITESPACE","\n    ",403],"]",")",";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$entity_3",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","save",405],"(",")",";",["T_WHITESPACE","\n\n    ",405],["T_COMMENT","\/\/ Entity 4's config dependency will be fixed but it will still be deleted\n",407],["T_WHITESPACE","    ",408],["T_COMMENT","\/\/ because it also depends on the node module.\n",408],["T_WHITESPACE","    ",409],["T_VARIABLE","$entity_4",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$storage",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","create",409],"(","[",["T_WHITESPACE","\n      ",409],["T_CONSTANT_ENCAPSED_STRING","'id'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'entity_4'",410],",",["T_WHITESPACE","\n      ",410],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],"[",["T_WHITESPACE","\n        ",411],["T_CONSTANT_ENCAPSED_STRING","'enforced'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],"[",["T_WHITESPACE","\n          ",412],["T_CONSTANT_ENCAPSED_STRING","'config'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],"[",["T_VARIABLE","$entity_1",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getConfigDependencyName",413],"(",")","]",",",["T_WHITESPACE","\n          ",413],["T_CONSTANT_ENCAPSED_STRING","'module'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",414],",",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'config_test'",414],"]",",",["T_WHITESPACE","\n        ",414],"]",",",["T_WHITESPACE","\n      ",415],"]",",",["T_WHITESPACE","\n    ",416],"]",")",";",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$entity_4",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","save",418],"(",")",";",["T_WHITESPACE","\n\n    ",418],["T_NS_SEPARATOR","\\",420],["T_STRING","Drupal",420],["T_DOUBLE_COLON","::",420],["T_STRING","state",420],"(",")",["T_OBJECT_OPERATOR","->",420],["T_STRING","set",420],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.fix_dependencies'",420],",",["T_WHITESPACE"," ",420],"[","]",")",";",["T_WHITESPACE","\n    ",420],["T_NS_SEPARATOR","\\",421],["T_STRING","Drupal",421],["T_DOUBLE_COLON","::",421],["T_STRING","state",421],"(",")",["T_OBJECT_OPERATOR","->",421],["T_STRING","set",421],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.on_dependency_removal_called'",421],",",["T_WHITESPACE"," ",421],"[","]",")",";",["T_WHITESPACE","\n\n    ",421],["T_COMMENT","\/\/ Do a dry run using\n",423],["T_WHITESPACE","    ",424],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigManager::getConfigEntitiesToChangeOnDependencyRemoval().\n",424],["T_WHITESPACE","    ",425],["T_VARIABLE","$config_entities",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$config_manager",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",425],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",425],",",["T_WHITESPACE"," ",425],"[",["T_CONSTANT_ENCAPSED_STRING","'node'",425],"]",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$config_entity_ids",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],"[",["T_WHITESPACE","\n      ",426],["T_CONSTANT_ENCAPSED_STRING","'update'",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],"[","]",",",["T_WHITESPACE","\n      ",427],["T_CONSTANT_ENCAPSED_STRING","'delete'",428],["T_WHITESPACE"," ",428],["T_DOUBLE_ARROW","=>",428],["T_WHITESPACE"," ",428],"[","]",",",["T_WHITESPACE","\n      ",428],["T_CONSTANT_ENCAPSED_STRING","'unchanged'",429],["T_WHITESPACE"," ",429],["T_DOUBLE_ARROW","=>",429],["T_WHITESPACE"," ",429],"[","]",",",["T_WHITESPACE","\n    ",429],"]",";",["T_WHITESPACE","\n    ",430],["T_FOREACH","foreach",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$config_entities",431],["T_WHITESPACE"," ",431],["T_AS","as",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$type",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$config_entities_by_type",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n      ",431],["T_FOREACH","foreach",432],["T_WHITESPACE"," ",432],"(",["T_VARIABLE","$config_entities_by_type",432],["T_WHITESPACE"," ",432],["T_AS","as",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$config_entity",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n        ",432],["T_VARIABLE","$config_entity_ids",433],"[",["T_VARIABLE","$type",433],"]","[","]",["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$config_entity",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","id",433],"(",")",";",["T_WHITESPACE","\n      ",433],"}",["T_WHITESPACE","\n    ",434],"}",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$expected",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],"[",["T_WHITESPACE","\n      ",436],["T_CONSTANT_ENCAPSED_STRING","'update'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],"[",["T_VARIABLE","$entity_1",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","id",437],"(",")",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$entity_2",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","id",437],"(",")","]",",",["T_WHITESPACE","\n      ",437],["T_CONSTANT_ENCAPSED_STRING","'delete'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],"[",["T_VARIABLE","$entity_4",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","id",438],"(",")","]",",",["T_WHITESPACE","\n      ",438],["T_CONSTANT_ENCAPSED_STRING","'unchanged'",439],["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],"[",["T_VARIABLE","$entity_3",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","id",439],"(",")","]",",",["T_WHITESPACE","\n    ",439],"]",";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","assertSame",441],"(",["T_VARIABLE","$expected",441],",",["T_WHITESPACE"," ",441],["T_VARIABLE","$config_entity_ids",441],")",";",["T_WHITESPACE","\n\n    ",441],["T_VARIABLE","$called",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_NS_SEPARATOR","\\",443],["T_STRING","Drupal",443],["T_DOUBLE_COLON","::",443],["T_STRING","state",443],"(",")",["T_OBJECT_OPERATOR","->",443],["T_STRING","get",443],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.on_dependency_removal_called'",443],",",["T_WHITESPACE"," ",443],"[","]",")",";",["T_WHITESPACE","\n    ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","assertFalse",444],"(",["T_STRING","in_array",444],"(",["T_VARIABLE","$entity_3",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","id",444],"(",")",",",["T_WHITESPACE"," ",444],["T_VARIABLE","$called",444],")",",",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'ConfigEntityInterface::onDependencyRemoval() is not called for entity 3.'",444],")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","assertSame",445],"(","[",["T_VARIABLE","$entity_1",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","id",445],"(",")",",",["T_WHITESPACE"," ",445],["T_VARIABLE","$entity_4",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","id",445],"(",")",",",["T_WHITESPACE"," ",445],["T_VARIABLE","$entity_2",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","id",445],"(",")","]",",",["T_WHITESPACE"," ",445],["T_VARIABLE","$called",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'The most dependent entities have ConfigEntityInterface::onDependencyRemoval() called first.'",445],")",";",["T_WHITESPACE","\n\n    ",445],["T_COMMENT","\/\/ Perform a module rebuild so we can know where the node module is located\n",447],["T_WHITESPACE","    ",448],["T_COMMENT","\/\/ and uninstall it.\n",448],["T_WHITESPACE","    ",449],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",449],["T_WHITESPACE","    ",450],["T_STRING","system_rebuild_module_data",450],"(",")",";",["T_WHITESPACE","\n    ",450],["T_COMMENT","\/\/ Perform the uninstall.\n",451],["T_WHITESPACE","    ",452],["T_VARIABLE","$config_manager",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","uninstall",452],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'node'",452],")",";",["T_WHITESPACE","\n\n    ",452],["T_COMMENT","\/\/ Test that expected actions have been performed.\n",454],["T_WHITESPACE","    ",455],["T_VARIABLE","$entity_1",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$storage",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","load",455],"(",["T_VARIABLE","$entity_1",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","id",455],"(",")",")",";",["T_WHITESPACE","\n    ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","assertTrue",456],"(",["T_VARIABLE","$entity_1",456],",",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 not deleted'",456],")",";",["T_WHITESPACE","\n    ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","assertSame",457],"(",["T_VARIABLE","$entity_1",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","getThirdPartySettings",457],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",457],")",",",["T_WHITESPACE"," ",457],"[","]",",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 third party settings updated.'",457],")",";",["T_WHITESPACE","\n    ",457],["T_VARIABLE","$entity_2",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$storage",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","load",458],"(",["T_VARIABLE","$entity_2",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","id",458],"(",")",")",";",["T_WHITESPACE","\n    ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","assertTrue",459],"(",["T_VARIABLE","$entity_2",459],",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 not deleted'",459],")",";",["T_WHITESPACE","\n    ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","assertSame",460],"(",["T_VARIABLE","$entity_2",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","getThirdPartySettings",460],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",460],")",",",["T_WHITESPACE"," ",460],"[","]",",",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 third party settings updated.'",460],")",";",["T_WHITESPACE","\n    ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","assertSame",461],"(",["T_VARIABLE","$entity_2",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","calculateDependencies",461],"(",")",["T_OBJECT_OPERATOR","->",461],["T_STRING","getDependencies",461],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",461],"]",",",["T_WHITESPACE"," ",461],"[",["T_VARIABLE","$entity_1",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getConfigDependencyName",461],"(",")","]",",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 still depends on entity 1.'",461],")",";",["T_WHITESPACE","\n    ",461],["T_VARIABLE","$entity_3",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_VARIABLE","$storage",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","load",462],"(",["T_VARIABLE","$entity_3",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","id",462],"(",")",")",";",["T_WHITESPACE","\n    ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","assertTrue",463],"(",["T_VARIABLE","$entity_3",463],",",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 not deleted'",463],")",";",["T_WHITESPACE","\n    ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","assertSame",464],"(",["T_VARIABLE","$entity_3",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","calculateDependencies",464],"(",")",["T_OBJECT_OPERATOR","->",464],["T_STRING","getDependencies",464],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",464],"]",",",["T_WHITESPACE"," ",464],"[",["T_VARIABLE","$entity_2",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","getConfigDependencyName",464],"(",")","]",",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 still depends on entity 2.'",464],")",";",["T_WHITESPACE","\n    ",464],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","assertFalse",465],"(",["T_VARIABLE","$storage",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","load",465],"(",["T_VARIABLE","$entity_4",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","id",465],"(",")",")",",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'Entity 4 deleted'",465],")",";",["T_WHITESPACE","\n  ",465],"}",["T_WHITESPACE","\n\n  ",466],["T_DOC_COMMENT","\/**\n   * Tests deleting a configuration entity and dependency management.\n   *\/",468],["T_WHITESPACE","\n  ",470],["T_PUBLIC","public",471],["T_WHITESPACE"," ",471],["T_FUNCTION","function",471],["T_WHITESPACE"," ",471],["T_STRING","testConfigEntityDelete",471],"(",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n    ",471],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",472],["T_WHITESPACE","\n    ",472],["T_VARIABLE","$config_manager",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_NS_SEPARATOR","\\",473],["T_STRING","Drupal",473],["T_DOUBLE_COLON","::",473],["T_STRING","service",473],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",473],")",";",["T_WHITESPACE","\n    ",473],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityStorage $storage *\/",474],["T_WHITESPACE","\n    ",474],["T_VARIABLE","$storage",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","container",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","get",475],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",475],")",["T_OBJECT_OPERATOR","->",475],["T_STRING","getStorage",475],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",475],")",";",["T_WHITESPACE","\n    ",475],["T_COMMENT","\/\/ Test dependencies between configuration entities.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$entity1",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_VARIABLE","$storage",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","create",477],"(",["T_WHITESPACE","\n      ",477],["T_ARRAY","array",478],"(",["T_WHITESPACE","\n        ",478],["T_CONSTANT_ENCAPSED_STRING","'id'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'entity1'",479],["T_WHITESPACE","\n      ",479],")",["T_WHITESPACE","\n    ",480],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$entity1",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","save",482],"(",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$entity2",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_VARIABLE","$storage",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","create",483],"(",["T_WHITESPACE","\n      ",483],["T_ARRAY","array",484],"(",["T_WHITESPACE","\n        ",484],["T_CONSTANT_ENCAPSED_STRING","'id'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'entity2'",485],",",["T_WHITESPACE","\n        ",485],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",["T_WHITESPACE","\n          ",486],["T_CONSTANT_ENCAPSED_STRING","'enforced'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_ARRAY","array",487],"(",["T_WHITESPACE","\n            ",487],["T_CONSTANT_ENCAPSED_STRING","'config'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_ARRAY","array",488],"(",["T_VARIABLE","$entity1",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getConfigDependencyName",488],"(",")",")",",",["T_WHITESPACE","\n          ",488],")",",",["T_WHITESPACE","\n        ",489],")",",",["T_WHITESPACE","\n      ",490],")",["T_WHITESPACE","\n    ",491],")",";",["T_WHITESPACE","\n    ",492],["T_VARIABLE","$entity2",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","save",493],"(",")",";",["T_WHITESPACE","\n\n    ",493],["T_COMMENT","\/\/ Do a dry run using\n",495],["T_WHITESPACE","    ",496],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigManager::getConfigEntitiesToChangeOnDependencyRemoval().\n",496],["T_WHITESPACE","    ",497],["T_VARIABLE","$config_entities",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$config_manager",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",497],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",497],",",["T_WHITESPACE"," ",497],"[",["T_VARIABLE","$entity1",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","getConfigDependencyName",497],"(",")","]",")",";",["T_WHITESPACE","\n    ",497],["T_VARIABLE","$this",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","assertEqual",498],"(",["T_VARIABLE","$entity2",498],["T_OBJECT_OPERATOR","->",498],["T_STRING","uuid",498],"(",")",",",["T_WHITESPACE"," ",498],["T_STRING","reset",498],"(",["T_VARIABLE","$config_entities",498],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",498],"]",")",["T_OBJECT_OPERATOR","->",498],["T_STRING","uuid",498],"(",")",",",["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 will be deleted.'",498],")",";",["T_WHITESPACE","\n    ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","assertTrue",499],"(",["T_EMPTY","empty",499],"(",["T_VARIABLE","$config_entities",499],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",499],"]",")",",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'No dependent configuration entities will be updated.'",499],")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","assertTrue",500],"(",["T_EMPTY","empty",500],"(",["T_VARIABLE","$config_entities",500],"[",["T_CONSTANT_ENCAPSED_STRING","'unchanged'",500],"]",")",",",["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'No dependent configuration entities will be unchanged.'",500],")",";",["T_WHITESPACE","\n\n    ",500],["T_COMMENT","\/\/ Test that doing a delete of entity1 deletes entity2 since it is dependent\n",502],["T_WHITESPACE","    ",503],["T_COMMENT","\/\/ on entity1.\n",503],["T_WHITESPACE","    ",504],["T_VARIABLE","$entity1",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","delete",504],"(",")",";",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","assertFalse",505],"(",["T_VARIABLE","$storage",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","load",505],"(",["T_CONSTANT_ENCAPSED_STRING","'entity1'",505],")",",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 deleted'",505],")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","assertFalse",506],"(",["T_VARIABLE","$storage",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","load",506],"(",["T_CONSTANT_ENCAPSED_STRING","'entity2'",506],")",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 deleted'",506],")",";",["T_WHITESPACE","\n\n    ",506],["T_COMMENT","\/\/ Set a more complicated test where dependencies will be fixed.\n",508],["T_WHITESPACE","    ",509],["T_NS_SEPARATOR","\\",509],["T_STRING","Drupal",509],["T_DOUBLE_COLON","::",509],["T_STRING","state",509],"(",")",["T_OBJECT_OPERATOR","->",509],["T_STRING","set",509],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test.fix_dependencies'",509],",",["T_WHITESPACE"," ",509],["T_ARRAY","array",509],"(",["T_VARIABLE","$entity1",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getConfigDependencyName",509],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",509],["T_COMMENT","\/\/ Entity1 will be deleted by the test.\n",511],["T_WHITESPACE","    ",512],["T_VARIABLE","$entity1",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$storage",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","create",512],"(",["T_WHITESPACE","\n      ",512],["T_ARRAY","array",513],"(",["T_WHITESPACE","\n        ",513],["T_CONSTANT_ENCAPSED_STRING","'id'",514],["T_WHITESPACE"," ",514],["T_DOUBLE_ARROW","=>",514],["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'entity1'",514],",",["T_WHITESPACE","\n      ",514],")",["T_WHITESPACE","\n    ",515],")",";",["T_WHITESPACE","\n    ",516],["T_VARIABLE","$entity1",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","save",517],"(",")",";",["T_WHITESPACE","\n\n    ",517],["T_COMMENT","\/\/ Entity2 has a dependency on Entity1 but it can be fixed because\n",519],["T_WHITESPACE","    ",520],["T_COMMENT","\/\/ \\Drupal\\config_test\\Entity::onDependencyRemoval() will remove the\n",520],["T_WHITESPACE","    ",521],["T_COMMENT","\/\/ dependency before config entities are deleted.\n",521],["T_WHITESPACE","    ",522],["T_VARIABLE","$entity2",522],["T_WHITESPACE"," ",522],"=",["T_WHITESPACE"," ",522],["T_VARIABLE","$storage",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","create",522],"(",["T_WHITESPACE","\n      ",522],["T_ARRAY","array",523],"(",["T_WHITESPACE","\n        ",523],["T_CONSTANT_ENCAPSED_STRING","'id'",524],["T_WHITESPACE"," ",524],["T_DOUBLE_ARROW","=>",524],["T_WHITESPACE"," ",524],["T_CONSTANT_ENCAPSED_STRING","'entity2'",524],",",["T_WHITESPACE","\n        ",524],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],["T_ARRAY","array",525],"(",["T_WHITESPACE","\n          ",525],["T_CONSTANT_ENCAPSED_STRING","'enforced'",526],["T_WHITESPACE"," ",526],["T_DOUBLE_ARROW","=>",526],["T_WHITESPACE"," ",526],["T_ARRAY","array",526],"(",["T_WHITESPACE","\n            ",526],["T_CONSTANT_ENCAPSED_STRING","'config'",527],["T_WHITESPACE"," ",527],["T_DOUBLE_ARROW","=>",527],["T_WHITESPACE"," ",527],["T_ARRAY","array",527],"(",["T_VARIABLE","$entity1",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","getConfigDependencyName",527],"(",")",")",",",["T_WHITESPACE","\n          ",527],")",",",["T_WHITESPACE","\n        ",528],")",",",["T_WHITESPACE","\n      ",529],")",["T_WHITESPACE","\n    ",530],")",";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$entity2",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","save",532],"(",")",";",["T_WHITESPACE","\n\n    ",532],["T_COMMENT","\/\/ Entity3 will be unchanged because it is dependent on Entity2 which can\n",534],["T_WHITESPACE","    ",535],["T_COMMENT","\/\/ be fixed.\n",535],["T_WHITESPACE","    ",536],["T_VARIABLE","$entity3",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$storage",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","create",536],"(",["T_WHITESPACE","\n      ",536],["T_ARRAY","array",537],"(",["T_WHITESPACE","\n        ",537],["T_CONSTANT_ENCAPSED_STRING","'id'",538],["T_WHITESPACE"," ",538],["T_DOUBLE_ARROW","=>",538],["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'entity3'",538],",",["T_WHITESPACE","\n        ",538],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",539],["T_WHITESPACE"," ",539],["T_DOUBLE_ARROW","=>",539],["T_WHITESPACE"," ",539],["T_ARRAY","array",539],"(",["T_WHITESPACE","\n          ",539],["T_CONSTANT_ENCAPSED_STRING","'enforced'",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_ARRAY","array",540],"(",["T_WHITESPACE","\n            ",540],["T_CONSTANT_ENCAPSED_STRING","'config'",541],["T_WHITESPACE"," ",541],["T_DOUBLE_ARROW","=>",541],["T_WHITESPACE"," ",541],["T_ARRAY","array",541],"(",["T_VARIABLE","$entity2",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","getConfigDependencyName",541],"(",")",")",",",["T_WHITESPACE","\n          ",541],")",",",["T_WHITESPACE","\n        ",542],")",",",["T_WHITESPACE","\n      ",543],")",["T_WHITESPACE","\n    ",544],")",";",["T_WHITESPACE","\n    ",545],["T_VARIABLE","$entity3",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","save",546],"(",")",";",["T_WHITESPACE","\n\n    ",546],["T_COMMENT","\/\/ Do a dry run using\n",548],["T_WHITESPACE","    ",549],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\ConfigManager::getConfigEntitiesToChangeOnDependencyRemoval().\n",549],["T_WHITESPACE","    ",550],["T_VARIABLE","$config_entities",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$config_manager",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",550],"(",["T_CONSTANT_ENCAPSED_STRING","'config'",550],",",["T_WHITESPACE"," ",550],"[",["T_VARIABLE","$entity1",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","getConfigDependencyName",550],"(",")","]",")",";",["T_WHITESPACE","\n    ",550],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","assertTrue",551],"(",["T_EMPTY","empty",551],"(",["T_VARIABLE","$config_entities",551],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",551],"]",")",",",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'No dependent configuration entities will be deleted.'",551],")",";",["T_WHITESPACE","\n    ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","assertEqual",552],"(",["T_VARIABLE","$entity2",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","uuid",552],"(",")",",",["T_WHITESPACE"," ",552],["T_STRING","reset",552],"(",["T_VARIABLE","$config_entities",552],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",552],"]",")",["T_OBJECT_OPERATOR","->",552],["T_STRING","uuid",552],"(",")",",",["T_WHITESPACE"," ",552],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 will be updated.'",552],")",";",["T_WHITESPACE","\n    ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","assertEqual",553],"(",["T_VARIABLE","$entity3",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","uuid",553],"(",")",",",["T_WHITESPACE"," ",553],["T_STRING","reset",553],"(",["T_VARIABLE","$config_entities",553],"[",["T_CONSTANT_ENCAPSED_STRING","'unchanged'",553],"]",")",["T_OBJECT_OPERATOR","->",553],["T_STRING","uuid",553],"(",")",",",["T_WHITESPACE"," ",553],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 is not changed.'",553],")",";",["T_WHITESPACE","\n\n    ",553],["T_COMMENT","\/\/ Perform the uninstall.\n",555],["T_WHITESPACE","    ",556],["T_VARIABLE","$entity1",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","delete",556],"(",")",";",["T_WHITESPACE","\n\n    ",556],["T_COMMENT","\/\/ Test that expected actions have been performed.\n",558],["T_WHITESPACE","    ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","assertFalse",559],"(",["T_VARIABLE","$storage",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","load",559],"(",["T_CONSTANT_ENCAPSED_STRING","'entity1'",559],")",",",["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 deleted'",559],")",";",["T_WHITESPACE","\n    ",559],["T_VARIABLE","$entity2",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$storage",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","load",560],"(",["T_CONSTANT_ENCAPSED_STRING","'entity2'",560],")",";",["T_WHITESPACE","\n    ",560],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","assertTrue",561],"(",["T_VARIABLE","$entity2",561],",",["T_WHITESPACE"," ",561],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 not deleted'",561],")",";",["T_WHITESPACE","\n    ",561],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","assertEqual",562],"(",["T_VARIABLE","$entity2",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","calculateDependencies",562],"(",")",["T_OBJECT_OPERATOR","->",562],["T_STRING","getDependencies",562],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",562],"]",",",["T_WHITESPACE"," ",562],["T_ARRAY","array",562],"(",")",",",["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 dependencies updated to remove dependency on Entity1.'",562],")",";",["T_WHITESPACE","\n    ",562],["T_VARIABLE","$entity3",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$storage",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","load",563],"(",["T_CONSTANT_ENCAPSED_STRING","'entity3'",563],")",";",["T_WHITESPACE","\n    ",563],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","assertTrue",564],"(",["T_VARIABLE","$entity3",564],",",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 not deleted'",564],")",";",["T_WHITESPACE","\n    ",564],["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","assertEqual",565],"(",["T_VARIABLE","$entity3",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","calculateDependencies",565],"(",")",["T_OBJECT_OPERATOR","->",565],["T_STRING","getDependencies",565],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'config'",565],"]",",",["T_WHITESPACE"," ",565],"[",["T_VARIABLE","$entity2",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","getConfigDependencyName",565],"(",")","]",",",["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'Entity 3 still depends on Entity 2.'",565],")",";",["T_WHITESPACE","\n  ",565],"}",["T_WHITESPACE","\n\n  ",566],["T_DOC_COMMENT","\/**\n   * Tests getConfigEntitiesToChangeOnDependencyRemoval() with content entities.\n   *\n   * At the moment there is no runtime code that calculates configuration\n   * dependencies on content entity delete because this calculation is expensive\n   * and all content dependencies are soft. This test ensures that the code\n   * works for content entities.\n   *\n   * @see \\Drupal\\Core\\Config\\ConfigManager::getConfigEntitiesToChangeOnDependencyRemoval()\n   *\/",568],["T_WHITESPACE","\n  ",577],["T_PUBLIC","public",578],["T_WHITESPACE"," ",578],["T_FUNCTION","function",578],["T_WHITESPACE"," ",578],["T_STRING","testContentEntityDelete",578],"(",")",["T_WHITESPACE"," ",578],"{",["T_WHITESPACE","\n    ",578],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","installEntitySchema",579],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",579],")",";",["T_WHITESPACE","\n    ",579],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager *\/",580],["T_WHITESPACE","\n    ",580],["T_VARIABLE","$config_manager",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_NS_SEPARATOR","\\",581],["T_STRING","Drupal",581],["T_DOUBLE_COLON","::",581],["T_STRING","service",581],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",581],")",";",["T_WHITESPACE","\n\n    ",581],["T_VARIABLE","$content_entity",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_STRING","EntityTest",583],["T_DOUBLE_COLON","::",583],["T_STRING","create",583],"(",")",";",["T_WHITESPACE","\n    ",583],["T_VARIABLE","$content_entity",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","save",584],"(",")",";",["T_WHITESPACE","\n    ",584],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityStorage $storage *\/",585],["T_WHITESPACE","\n    ",585],["T_VARIABLE","$storage",586],["T_WHITESPACE"," ",586],"=",["T_WHITESPACE"," ",586],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","container",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","get",586],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",586],")",["T_OBJECT_OPERATOR","->",586],["T_STRING","getStorage",586],"(",["T_CONSTANT_ENCAPSED_STRING","'config_test'",586],")",";",["T_WHITESPACE","\n    ",586],["T_VARIABLE","$entity1",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_VARIABLE","$storage",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","create",587],"(",["T_WHITESPACE","\n      ",587],["T_ARRAY","array",588],"(",["T_WHITESPACE","\n        ",588],["T_CONSTANT_ENCAPSED_STRING","'id'",589],["T_WHITESPACE"," ",589],["T_DOUBLE_ARROW","=>",589],["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","'entity1'",589],",",["T_WHITESPACE","\n        ",589],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",590],["T_WHITESPACE"," ",590],["T_DOUBLE_ARROW","=>",590],["T_WHITESPACE"," ",590],["T_ARRAY","array",590],"(",["T_WHITESPACE","\n          ",590],["T_CONSTANT_ENCAPSED_STRING","'enforced'",591],["T_WHITESPACE"," ",591],["T_DOUBLE_ARROW","=>",591],["T_WHITESPACE"," ",591],["T_ARRAY","array",591],"(",["T_WHITESPACE","\n            ",591],["T_CONSTANT_ENCAPSED_STRING","'content'",592],["T_WHITESPACE"," ",592],["T_DOUBLE_ARROW","=>",592],["T_WHITESPACE"," ",592],["T_ARRAY","array",592],"(",["T_VARIABLE","$content_entity",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","getConfigDependencyName",592],"(",")",")",["T_WHITESPACE","\n          ",592],")",",",["T_WHITESPACE","\n        ",593],")",",",["T_WHITESPACE","\n      ",594],")",["T_WHITESPACE","\n    ",595],")",";",["T_WHITESPACE","\n    ",596],["T_VARIABLE","$entity1",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","save",597],"(",")",";",["T_WHITESPACE","\n    ",597],["T_VARIABLE","$entity2",598],["T_WHITESPACE"," ",598],"=",["T_WHITESPACE"," ",598],["T_VARIABLE","$storage",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","create",598],"(",["T_WHITESPACE","\n      ",598],["T_ARRAY","array",599],"(",["T_WHITESPACE","\n        ",599],["T_CONSTANT_ENCAPSED_STRING","'id'",600],["T_WHITESPACE"," ",600],["T_DOUBLE_ARROW","=>",600],["T_WHITESPACE"," ",600],["T_CONSTANT_ENCAPSED_STRING","'entity2'",600],",",["T_WHITESPACE","\n        ",600],["T_CONSTANT_ENCAPSED_STRING","'dependencies'",601],["T_WHITESPACE"," ",601],["T_DOUBLE_ARROW","=>",601],["T_WHITESPACE"," ",601],["T_ARRAY","array",601],"(",["T_WHITESPACE","\n          ",601],["T_CONSTANT_ENCAPSED_STRING","'enforced'",602],["T_WHITESPACE"," ",602],["T_DOUBLE_ARROW","=>",602],["T_WHITESPACE"," ",602],["T_ARRAY","array",602],"(",["T_WHITESPACE","\n            ",602],["T_CONSTANT_ENCAPSED_STRING","'config'",603],["T_WHITESPACE"," ",603],["T_DOUBLE_ARROW","=>",603],["T_WHITESPACE"," ",603],["T_ARRAY","array",603],"(",["T_VARIABLE","$entity1",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","getConfigDependencyName",603],"(",")",")",["T_WHITESPACE","\n          ",603],")",",",["T_WHITESPACE","\n        ",604],")",",",["T_WHITESPACE","\n      ",605],")",["T_WHITESPACE","\n    ",606],")",";",["T_WHITESPACE","\n    ",607],["T_VARIABLE","$entity2",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","save",608],"(",")",";",["T_WHITESPACE","\n\n    ",608],["T_COMMENT","\/\/ Create a configuration entity that is not in the dependency chain.\n",610],["T_WHITESPACE","    ",611],["T_VARIABLE","$entity3",611],["T_WHITESPACE"," ",611],"=",["T_WHITESPACE"," ",611],["T_VARIABLE","$storage",611],["T_OBJECT_OPERATOR","->",611],["T_STRING","create",611],"(",["T_ARRAY","array",611],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",611],["T_WHITESPACE"," ",611],["T_DOUBLE_ARROW","=>",611],["T_WHITESPACE"," ",611],["T_CONSTANT_ENCAPSED_STRING","'entity3'",611],")",")",";",["T_WHITESPACE","\n    ",611],["T_VARIABLE","$entity3",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","save",612],"(",")",";",["T_WHITESPACE","\n\n    ",612],["T_VARIABLE","$config_entities",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$config_manager",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",614],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",614],",",["T_WHITESPACE"," ",614],"[",["T_VARIABLE","$content_entity",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","getConfigDependencyName",614],"(",")","]",")",";",["T_WHITESPACE","\n    ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","assertEqual",615],"(",["T_VARIABLE","$entity1",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","uuid",615],"(",")",",",["T_WHITESPACE"," ",615],["T_VARIABLE","$config_entities",615],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",615],"]","[",["T_LNUMBER","1",615],"]",["T_OBJECT_OPERATOR","->",615],["T_STRING","uuid",615],"(",")",",",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'Entity 1 will be deleted.'",615],")",";",["T_WHITESPACE","\n    ",615],["T_VARIABLE","$this",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","assertEqual",616],"(",["T_VARIABLE","$entity2",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","uuid",616],"(",")",",",["T_WHITESPACE"," ",616],["T_VARIABLE","$config_entities",616],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",616],"]","[",["T_LNUMBER","0",616],"]",["T_OBJECT_OPERATOR","->",616],["T_STRING","uuid",616],"(",")",",",["T_WHITESPACE"," ",616],["T_CONSTANT_ENCAPSED_STRING","'Entity 2 will be deleted.'",616],")",";",["T_WHITESPACE","\n    ",616],["T_VARIABLE","$this",617],["T_OBJECT_OPERATOR","->",617],["T_STRING","assertTrue",617],"(",["T_EMPTY","empty",617],"(",["T_VARIABLE","$config_entities",617],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",617],"]",")",",",["T_WHITESPACE"," ",617],["T_CONSTANT_ENCAPSED_STRING","'No dependencies of the content entity will be updated.'",617],")",";",["T_WHITESPACE","\n    ",617],["T_VARIABLE","$this",618],["T_OBJECT_OPERATOR","->",618],["T_STRING","assertTrue",618],"(",["T_EMPTY","empty",618],"(",["T_VARIABLE","$config_entities",618],"[",["T_CONSTANT_ENCAPSED_STRING","'unchanged'",618],"]",")",",",["T_WHITESPACE"," ",618],["T_CONSTANT_ENCAPSED_STRING","'No dependencies of the content entity will be unchanged.'",618],")",";",["T_WHITESPACE","\n  ",618],"}",["T_WHITESPACE","\n\n  ",619],["T_DOC_COMMENT","\/**\n   * Gets a list of identifiers from an array of configuration entities.\n   *\n   * @param \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface[] $dependents\n   *   An array of configuration entities.\n   *\n   * @return array\n   *   An array with values of entity_type_id:ID\n   *\/",621],["T_WHITESPACE","\n  ",629],["T_PROTECTED","protected",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","getDependentIds",630],"(",["T_ARRAY","array",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$dependents",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n    ",630],["T_VARIABLE","$dependent_ids",631],["T_WHITESPACE"," ",631],"=",["T_WHITESPACE"," ",631],["T_ARRAY","array",631],"(",")",";",["T_WHITESPACE","\n    ",631],["T_FOREACH","foreach",632],["T_WHITESPACE"," ",632],"(",["T_VARIABLE","$dependents",632],["T_WHITESPACE"," ",632],["T_AS","as",632],["T_WHITESPACE"," ",632],["T_VARIABLE","$dependent",632],")",["T_WHITESPACE"," ",632],"{",["T_WHITESPACE","\n      ",632],["T_VARIABLE","$dependent_ids",633],"[","]",["T_WHITESPACE"," ",633],"=",["T_WHITESPACE"," ",633],["T_VARIABLE","$dependent",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","getEntityTypeId",633],"(",")",["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_CONSTANT_ENCAPSED_STRING","':'",633],["T_WHITESPACE"," ",633],".",["T_WHITESPACE"," ",633],["T_VARIABLE","$dependent",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","id",633],"(",")",";",["T_WHITESPACE","\n    ",633],"}",["T_WHITESPACE","\n    ",634],["T_RETURN","return",635],["T_WHITESPACE"," ",635],["T_VARIABLE","$dependent_ids",635],";",["T_WHITESPACE","\n  ",635],"}",["T_WHITESPACE","\n\n",636],"}",["T_WHITESPACE","\n",638]]
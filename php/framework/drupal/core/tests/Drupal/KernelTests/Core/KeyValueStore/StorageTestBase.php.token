[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KeyValueStore",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Base class for testing key-value storages.\n *\/",7],["T_WHITESPACE","\n",9],["T_ABSTRACT","abstract",10],["T_WHITESPACE"," ",10],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","StorageTestBase",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","KernelTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * An array of random stdClass objects.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$objects",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * An array of data collection labels.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$collections",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Whether we are using an expirable key\/value store.\n   *\n   * @var bool\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$factory",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",31],";",["T_WHITESPACE","\n\n  ",31],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Define two data collections,\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","collections",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_LNUMBER","0",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'zero'",37],",",["T_WHITESPACE"," ",37],["T_LNUMBER","1",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'one'",37],")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Create several objects for testing.\n",39],["T_WHITESPACE","    ",40],["T_FOR","for",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$i",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_LNUMBER","0",40],";",["T_WHITESPACE"," ",40],["T_VARIABLE","$i",40],["T_WHITESPACE"," ",40],["T_IS_SMALLER_OR_EQUAL","<=",40],["T_WHITESPACE"," ",40],["T_LNUMBER","5",40],";",["T_WHITESPACE"," ",40],["T_VARIABLE","$i",40],["T_INC","++",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","objects",41],"[",["T_VARIABLE","$i",41],"]",["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","randomObject",41],"(",")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n  ",42],"}",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Tests CRUD operations.\n   *\/",45],["T_WHITESPACE","\n  ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","testCRUD",48],"(",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$stores",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","createStorage",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_COMMENT","\/\/ Verify that each store returns its own collection name.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertIdentical",51],"(",["T_VARIABLE","$stores",51],"[",["T_LNUMBER","0",51],"]",["T_OBJECT_OPERATOR","->",51],["T_STRING","getCollectionName",51],"(",")",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","collections",51],"[",["T_LNUMBER","0",51],"]",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertIdentical",52],"(",["T_VARIABLE","$stores",52],"[",["T_LNUMBER","1",52],"]",["T_OBJECT_OPERATOR","->",52],["T_STRING","getCollectionName",52],"(",")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","collections",52],"[",["T_LNUMBER","1",52],"]",")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Verify that an item can be stored.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$stores",55],"[",["T_LNUMBER","0",55],"]",["T_OBJECT_OPERATOR","->",55],["T_STRING","set",55],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","objects",55],"[",["T_LNUMBER","0",55],"]",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertTrue",56],"(",["T_VARIABLE","$stores",56],"[",["T_LNUMBER","0",56],"]",["T_OBJECT_OPERATOR","->",56],["T_STRING","has",56],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",56],")",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertIdenticalObject",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","objects",57],"[",["T_LNUMBER","0",57],"]",",",["T_WHITESPACE"," ",57],["T_VARIABLE","$stores",57],"[",["T_LNUMBER","0",57],"]",["T_OBJECT_OPERATOR","->",57],["T_STRING","get",57],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_COMMENT","\/\/ Verify that the other collection is not affected.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertFalse",59],"(",["T_VARIABLE","$stores",59],"[",["T_LNUMBER","1",59],"]",["T_OBJECT_OPERATOR","->",59],["T_STRING","has",59],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",59],")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertFalse",60],"(",["T_VARIABLE","$stores",60],"[",["T_LNUMBER","1",60],"]",["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",60],")",")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Verify that an item can be updated.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$stores",63],"[",["T_LNUMBER","0",63],"]",["T_OBJECT_OPERATOR","->",63],["T_STRING","set",63],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","objects",63],"[",["T_LNUMBER","1",63],"]",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertIdenticalObject",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","objects",64],"[",["T_LNUMBER","1",64],"]",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$stores",64],"[",["T_LNUMBER","0",64],"]",["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ Verify that the other collection is still not affected.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertFalse",66],"(",["T_VARIABLE","$stores",66],"[",["T_LNUMBER","1",66],"]",["T_OBJECT_OPERATOR","->",66],["T_STRING","get",66],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",66],")",")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Verify that a collection\/name pair is unique.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$stores",69],"[",["T_LNUMBER","1",69],"]",["T_OBJECT_OPERATOR","->",69],["T_STRING","set",69],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","objects",69],"[",["T_LNUMBER","2",69],"]",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertIdenticalObject",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","objects",70],"[",["T_LNUMBER","1",70],"]",",",["T_WHITESPACE"," ",70],["T_VARIABLE","$stores",70],"[",["T_LNUMBER","0",70],"]",["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",70],")",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertIdenticalObject",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","objects",71],"[",["T_LNUMBER","2",71],"]",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$stores",71],"[",["T_LNUMBER","1",71],"]",["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",71],")",")",";",["T_WHITESPACE","\n\n    ",71],["T_COMMENT","\/\/ Verify that an item can be deleted.\n",73],["T_WHITESPACE","    ",74],["T_VARIABLE","$stores",74],"[",["T_LNUMBER","0",74],"]",["T_OBJECT_OPERATOR","->",74],["T_STRING","delete",74],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertFalse",75],"(",["T_VARIABLE","$stores",75],"[",["T_LNUMBER","0",75],"]",["T_OBJECT_OPERATOR","->",75],["T_STRING","has",75],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",75],")",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertFalse",76],"(",["T_VARIABLE","$stores",76],"[",["T_LNUMBER","0",76],"]",["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",76],")",")",";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ Verify that the other collection is not affected.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertTrue",79],"(",["T_VARIABLE","$stores",79],"[",["T_LNUMBER","1",79],"]",["T_OBJECT_OPERATOR","->",79],["T_STRING","has",79],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",79],")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertIdenticalObject",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","objects",80],"[",["T_LNUMBER","2",80],"]",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$stores",80],"[",["T_LNUMBER","1",80],"]",["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",80],")",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$stores",81],"[",["T_LNUMBER","1",81],"]",["T_OBJECT_OPERATOR","->",81],["T_STRING","delete",81],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertFalse",82],"(",["T_VARIABLE","$stores",82],"[",["T_LNUMBER","1",82],"]",["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",82],")",")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Verify that multiple items can be stored.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$values",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'foo'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","objects",86],"[",["T_LNUMBER","3",86],"]",",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'bar'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","objects",87],"[",["T_LNUMBER","4",87],"]",",",["T_WHITESPACE","\n    ",87],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$stores",89],"[",["T_LNUMBER","0",89],"]",["T_OBJECT_OPERATOR","->",89],["T_STRING","setMultiple",89],"(",["T_VARIABLE","$values",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Verify that multiple items can be retrieved.\n",91],["T_WHITESPACE","    ",92],["T_VARIABLE","$result",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$stores",92],"[",["T_LNUMBER","0",92],"]",["T_OBJECT_OPERATOR","->",92],["T_STRING","getMultiple",92],"(",["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'bar'",92],")",")",";",["T_WHITESPACE","\n    ",92],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$values",93],["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$j",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$value",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertIdenticalObject",94],"(",["T_VARIABLE","$value",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$result",94],"[",["T_VARIABLE","$j",94],"]",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Verify that the other collection was not affected.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertFalse",98],"(",["T_VARIABLE","$stores",98],"[",["T_LNUMBER","1",98],"]",["T_OBJECT_OPERATOR","->",98],["T_STRING","get",98],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",98],")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertFalse",99],"(",["T_VARIABLE","$stores",99],"[",["T_LNUMBER","1",99],"]",["T_OBJECT_OPERATOR","->",99],["T_STRING","get",99],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",99],")",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Verify that all items in a collection can be retrieved.\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ Ensure that an item with the same name exists in the other collection.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$stores",103],"[",["T_LNUMBER","1",103],"]",["T_OBJECT_OPERATOR","->",103],["T_STRING","set",103],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","objects",103],"[",["T_LNUMBER","5",103],"]",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$result",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$stores",104],"[",["T_LNUMBER","0",104],"]",["T_OBJECT_OPERATOR","->",104],["T_STRING","getAll",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_COMMENT","\/\/ Not using assertIdentical(), since the order is not defined for getAll().\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertEqual",106],"(",["T_STRING","count",106],"(",["T_VARIABLE","$result",106],")",",",["T_WHITESPACE"," ",106],["T_STRING","count",106],"(",["T_VARIABLE","$values",106],")",")",";",["T_WHITESPACE","\n    ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$key",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$value",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertEqual",108],"(",["T_VARIABLE","$values",108],"[",["T_VARIABLE","$key",108],"]",",",["T_WHITESPACE"," ",108],["T_VARIABLE","$value",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n    ",109],["T_COMMENT","\/\/ Verify that all items in the other collection are different.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$result",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$stores",111],"[",["T_LNUMBER","1",111],"]",["T_OBJECT_OPERATOR","->",111],["T_STRING","getAll",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertEqual",112],"(",["T_VARIABLE","$result",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","objects",112],"[",["T_LNUMBER","5",112],"]",")",")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Verify that multiple items can be deleted.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$stores",115],"[",["T_LNUMBER","0",115],"]",["T_OBJECT_OPERATOR","->",115],["T_STRING","deleteMultiple",115],"(",["T_STRING","array_keys",115],"(",["T_VARIABLE","$values",115],")",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertFalse",116],"(",["T_VARIABLE","$stores",116],"[",["T_LNUMBER","0",116],"]",["T_OBJECT_OPERATOR","->",116],["T_STRING","get",116],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",116],")",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertFalse",117],"(",["T_VARIABLE","$stores",117],"[",["T_LNUMBER","0",117],"]",["T_OBJECT_OPERATOR","->",117],["T_STRING","get",117],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",117],")",")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertFalse",118],"(",["T_VARIABLE","$stores",118],"[",["T_LNUMBER","0",118],"]",["T_OBJECT_OPERATOR","->",118],["T_STRING","getMultiple",118],"(",["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'bar'",118],")",")",")",";",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ Verify that deleting no items does not cause an error.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$stores",120],"[",["T_LNUMBER","0",120],"]",["T_OBJECT_OPERATOR","->",120],["T_STRING","deleteMultiple",120],"(",["T_ARRAY","array",120],"(",")",")",";",["T_WHITESPACE","\n    ",120],["T_COMMENT","\/\/ Verify that the item in the other collection still exists.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertIdenticalObject",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","objects",122],"[",["T_LNUMBER","5",122],"]",",",["T_WHITESPACE"," ",122],["T_VARIABLE","$stores",122],"[",["T_LNUMBER","1",122],"]",["T_OBJECT_OPERATOR","->",122],["T_STRING","get",122],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",122],")",")",";",["T_WHITESPACE","\n\n  ",122],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * Tests expected behavior for non-existing keys.\n   *\/",126],["T_WHITESPACE","\n  ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","testNonExistingKeys",129],"(",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$stores",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","createStorage",131],"(",")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Verify that a non-existing key returns NULL as value.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertNull",134],"(",["T_VARIABLE","$stores",134],"[",["T_LNUMBER","0",134],"]",["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",134],")",")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Verify that a non-existing key with a default returns the default.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertIdentical",137],"(",["T_VARIABLE","$stores",137],"[",["T_LNUMBER","0",137],"]",["T_OBJECT_OPERATOR","->",137],["T_STRING","get",137],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'bar'",137],")",",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'bar'",137],")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Verify that a FALSE value can be stored.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$stores",140],"[",["T_LNUMBER","0",140],"]",["T_OBJECT_OPERATOR","->",140],["T_STRING","set",140],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",140],",",["T_WHITESPACE"," ",140],["T_STRING","FALSE",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertIdentical",141],"(",["T_VARIABLE","$stores",141],"[",["T_LNUMBER","0",141],"]",["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",141],")",",",["T_WHITESPACE"," ",141],["T_STRING","FALSE",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Verify that a deleted key returns NULL as value.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$stores",144],"[",["T_LNUMBER","0",144],"]",["T_OBJECT_OPERATOR","->",144],["T_STRING","delete",144],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertNull",145],"(",["T_VARIABLE","$stores",145],"[",["T_LNUMBER","0",145],"]",["T_OBJECT_OPERATOR","->",145],["T_STRING","get",145],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",145],")",")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Verify that a non-existing key is not returned when getting multiple keys.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$stores",148],"[",["T_LNUMBER","0",148],"]",["T_OBJECT_OPERATOR","->",148],["T_STRING","set",148],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'baz'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$values",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$stores",149],"[",["T_LNUMBER","0",149],"]",["T_OBJECT_OPERATOR","->",149],["T_STRING","getMultiple",149],"(",["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'bar'",149],")",")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertFalse",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$values",150],"[",["T_CONSTANT_ENCAPSED_STRING","'foo'",150],"]",")",",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","\"Key 'foo' not found.\"",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertIdentical",151],"(",["T_VARIABLE","$values",151],"[",["T_CONSTANT_ENCAPSED_STRING","'bar'",151],"]",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'baz'",151],")",";",["T_WHITESPACE","\n  ",151],"}",["T_WHITESPACE","\n\n  ",152],["T_DOC_COMMENT","\/**\n   * Tests the setIfNotExists() method.\n   *\/",154],["T_WHITESPACE","\n  ",156],["T_PUBLIC","public",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","testSetIfNotExists",157],"(",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$stores",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","createStorage",158],"(",")",";",["T_WHITESPACE","\n\n    ",158],["T_VARIABLE","$key",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","randomMachineName",160],"(",")",";",["T_WHITESPACE","\n    ",160],["T_COMMENT","\/\/ Test that setIfNotExists() succeeds only the first time.\n",161],["T_WHITESPACE","    ",162],["T_FOR","for",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$i",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_LNUMBER","0",162],";",["T_WHITESPACE"," ",162],["T_VARIABLE","$i",162],["T_WHITESPACE"," ",162],["T_IS_SMALLER_OR_EQUAL","<=",162],["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],";",["T_WHITESPACE"," ",162],["T_VARIABLE","$i",162],["T_INC","++",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_COMMENT","\/\/ setIfNotExists() should be TRUE the first time (when $i is 0) and\n",163],["T_WHITESPACE","      ",164],["T_COMMENT","\/\/ FALSE the second time (when $i is 1).\n",164],["T_WHITESPACE","      ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertEqual",165],"(","!",["T_VARIABLE","$i",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$stores",165],"[",["T_LNUMBER","0",165],"]",["T_OBJECT_OPERATOR","->",165],["T_STRING","setIfNotExists",165],"(",["T_VARIABLE","$key",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","objects",165],"[",["T_VARIABLE","$i",165],"]",")",")",";",["T_WHITESPACE","\n      ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertIdenticalObject",166],"(",["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","objects",166],"[",["T_LNUMBER","0",166],"]",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$stores",166],"[",["T_LNUMBER","0",166],"]",["T_OBJECT_OPERATOR","->",166],["T_STRING","get",166],"(",["T_VARIABLE","$key",166],")",")",";",["T_WHITESPACE","\n      ",166],["T_COMMENT","\/\/ Verify that the other collection is not affected.\n",167],["T_WHITESPACE","      ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertFalse",168],"(",["T_VARIABLE","$stores",168],"[",["T_LNUMBER","1",168],"]",["T_OBJECT_OPERATOR","->",168],["T_STRING","get",168],"(",["T_VARIABLE","$key",168],")",")",";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_COMMENT","\/\/ Remove the item and try to set it again.\n",171],["T_WHITESPACE","    ",172],["T_VARIABLE","$stores",172],"[",["T_LNUMBER","0",172],"]",["T_OBJECT_OPERATOR","->",172],["T_STRING","delete",172],"(",["T_VARIABLE","$key",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$stores",173],"[",["T_LNUMBER","0",173],"]",["T_OBJECT_OPERATOR","->",173],["T_STRING","setIfNotExists",173],"(",["T_VARIABLE","$key",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","objects",173],"[",["T_LNUMBER","1",173],"]",")",";",["T_WHITESPACE","\n    ",173],["T_COMMENT","\/\/ This time it should succeed.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertIdenticalObject",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","objects",175],"[",["T_LNUMBER","1",175],"]",",",["T_WHITESPACE"," ",175],["T_VARIABLE","$stores",175],"[",["T_LNUMBER","0",175],"]",["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_VARIABLE","$key",175],")",")",";",["T_WHITESPACE","\n    ",175],["T_COMMENT","\/\/ Verify that the other collection is still not affected.\n",176],["T_WHITESPACE","    ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertFalse",177],"(",["T_VARIABLE","$stores",177],"[",["T_LNUMBER","1",177],"]",["T_OBJECT_OPERATOR","->",177],["T_STRING","get",177],"(",["T_VARIABLE","$key",177],")",")",";",["T_WHITESPACE","\n  ",177],"}",["T_WHITESPACE","\n\n  ",178],["T_DOC_COMMENT","\/**\n   * Tests the rename operation.\n   *\/",180],["T_WHITESPACE","\n  ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","testRename",183],"(",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$stores",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","createStorage",184],"(",")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$store",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$stores",185],"[",["T_LNUMBER","0",185],"]",";",["T_WHITESPACE","\n\n    ",185],["T_VARIABLE","$store",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","set",187],"(",["T_CONSTANT_ENCAPSED_STRING","'old'",187],",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'thing'",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertIdentical",188],"(",["T_VARIABLE","$store",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","get",188],"(",["T_CONSTANT_ENCAPSED_STRING","'old'",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'thing'",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$store",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","rename",189],"(",["T_CONSTANT_ENCAPSED_STRING","'old'",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'new'",189],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertIdentical",190],"(",["T_VARIABLE","$store",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","get",190],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",190],")",",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'thing'",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertNull",191],"(",["T_VARIABLE","$store",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","get",191],"(",["T_CONSTANT_ENCAPSED_STRING","'old'",191],")",")",";",["T_WHITESPACE","\n  ",191],"}",["T_WHITESPACE","\n\n  ",192],["T_DOC_COMMENT","\/**\n   * Creates storage objects for each collection defined for this class.\n   *\n   * Storing the storage objects in a class member variable causes a fatal\n   * exception in DatabaseStorageExpirableTest, because in that situation\n   * garbage collection is not triggered until the test class itself is\n   * destructed, after tearDown() has deleted the database tables. Instead,\n   * create the storage objects locally in each test using this method.\n   *\n   * @see \\Drupal\\system\\Tests\\KeyValueStore\\DatabaseStorageExpirable\n   * @see \\Drupal\\Core\\KeyValueStore\\DatabaseStorageExpirable::garbageCollection()\n   *\/",194],["T_WHITESPACE","\n  ",205],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","createStorage",206],"(",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$stores",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",")",";",["T_WHITESPACE","\n    ",207],["T_FOREACH","foreach",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","collections",208],["T_WHITESPACE"," ",208],["T_AS","as",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$i",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$collection",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n      ",208],["T_VARIABLE","$stores",209],"[",["T_VARIABLE","$i",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","container",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","get",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","factory",209],")",["T_OBJECT_OPERATOR","->",209],["T_STRING","get",209],"(",["T_VARIABLE","$collection",209],")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$stores",212],";",["T_WHITESPACE","\n  ",212],"}",["T_WHITESPACE","\n\n",213],"}",["T_WHITESPACE","\n",215]]
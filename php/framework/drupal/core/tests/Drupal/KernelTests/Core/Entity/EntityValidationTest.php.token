[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Validation",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Constraint",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CompositeConstraintBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the Entity Validation API.\n *\n * @group Entity\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","EntityValidationTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","EntityKernelTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'filter'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'text'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * @var string\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$entityName",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\user\\Entity\\User\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$entityUser",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * @var string\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$entityFieldText",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","setUp",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Create the test field.\n",42],["T_WHITESPACE","    ",43],["T_STRING","module_load_install",43],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",43],")",";",["T_WHITESPACE","\n    ",43],["T_STRING","entity_test_install",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Install required default configuration for filter module.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","installConfig",47],"(",["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'filter'",47],")",")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Creates a test entity.\n   *\n   * @param string $entity_type\n   *   An entity type.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface\n   *   The created test entity.\n   *\/",50],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","createTestEntity",59],"(",["T_VARIABLE","$entity_type",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","entityName",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","randomMachineName",60],"(",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","entityUser",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","createUser",61],"(",")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Pass in the value of the name field when creating. With the user\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ field we test setting a field after creation.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$entity",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","container",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",65],")",["T_WHITESPACE","\n      ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","getStorage",66],"(",["T_VARIABLE","$entity_type",66],")",["T_WHITESPACE","\n      ",66],["T_OBJECT_OPERATOR","->",67],["T_STRING","create",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$entity",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","user_id",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","target_id",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","entityUser",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","id",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$entity",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","name",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","value",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","entityName",69],";",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ Set a value for the test field.\n",71],["T_WHITESPACE","    ",72],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$entity",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","hasField",72],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_text'",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n      ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","entityFieldText",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","randomMachineName",73],"(",")",";",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$entity",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","field_test_text",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","value",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","entityFieldText",74],";",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$entity",77],";",["T_WHITESPACE","\n  ",77],"}",["T_WHITESPACE","\n\n  ",78],["T_DOC_COMMENT","\/**\n   * Tests validating test entity types.\n   *\/",80],["T_WHITESPACE","\n  ",82],["T_PUBLIC","public",83],["T_WHITESPACE"," ",83],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","testValidation",83],"(",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_COMMENT","\/\/ Ensure that the constraint manager is marked as cached cleared.\n",84],["T_WHITESPACE","\n    ",85],["T_COMMENT","\/\/ Use the protected property on the cache_clearer first to check whether\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ the constraint manager is added there.\n",87],["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ Ensure that the proxy class is initialized, which has the necessary\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ method calls attached.\n",90],["T_WHITESPACE","    ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Drupal",91],["T_DOUBLE_COLON","::",91],["T_STRING","service",91],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.cache_clearer'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$plugin_cache_clearer",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_NS_SEPARATOR","\\",92],["T_STRING","Drupal",92],["T_DOUBLE_COLON","::",92],["T_STRING","service",92],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal.proxy_original_service.plugin.cache_clearer'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$get_cached_discoveries",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],"(",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","cachedDiscoveries",94],";",["T_WHITESPACE","\n    ",94],"}",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$get_cached_discoveries",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$get_cached_discoveries",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","bindTo",96],"(",["T_VARIABLE","$plugin_cache_clearer",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$plugin_cache_clearer",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$cached_discoveries",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$get_cached_discoveries",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$cached_discovery_classes",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],"[","]",";",["T_WHITESPACE","\n    ",98],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$cached_discoveries",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$cached_discovery",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$cached_discovery_classes",100],"[","]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","get_class",100],"(",["T_VARIABLE","$cached_discovery",100],")",";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertTrue",102],"(",["T_STRING","in_array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Validation\\ConstraintManager'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$cached_discovery_classes",102],")",")",";",["T_WHITESPACE","\n\n    ",102],["T_COMMENT","\/\/ All entity variations have to have the same results.\n",104],["T_WHITESPACE","    ",105],["T_FOREACH","foreach",105],["T_WHITESPACE"," ",105],"(",["T_STRING","entity_test_entity_types",105],"(",")",["T_WHITESPACE"," ",105],["T_AS","as",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$entity_type",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","checkValidation",106],"(",["T_VARIABLE","$entity_type",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n  ",108],["T_DOC_COMMENT","\/**\n   * Executes the validation test set for a defined entity type.\n   *\n   * @param string $entity_type\n   *   The entity type to run the tests with.\n   *\/",110],["T_WHITESPACE","\n  ",115],["T_PROTECTED","protected",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","checkValidation",116],"(",["T_VARIABLE","$entity_type",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$entity",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","createTestEntity",117],"(",["T_VARIABLE","$entity_type",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$violations",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$entity",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","validate",118],"(",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEqual",119],"(",["T_VARIABLE","$violations",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","count",119],"(",")",",",["T_WHITESPACE"," ",119],["T_LNUMBER","0",119],",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'Validation passes.'",119],")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Test triggering a fail for each of the constraints specified.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$test_entity",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CLONE","clone",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$entity",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$test_entity",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","id",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","value",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],"-",["T_LNUMBER","1",123],";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$violations",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$test_entity",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","validate",124],"(",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","assertEqual",125],"(",["T_VARIABLE","$violations",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","count",125],"(",")",",",["T_WHITESPACE"," ",125],["T_LNUMBER","1",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEqual",126],"(",["T_VARIABLE","$violations",126],"[",["T_LNUMBER","0",126],"]",["T_OBJECT_OPERATOR","->",126],["T_STRING","getMessage",126],"(",")",",",["T_WHITESPACE"," ",126],["T_STRING","t",126],"(",["T_CONSTANT_ENCAPSED_STRING","'%name: The integer must be larger or equal to %min.'",126],",",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'ID'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'%min'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],")",")",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$test_entity",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_CLONE","clone",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$entity",128],";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$test_entity",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","uuid",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","value",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","randomString",129],"(",["T_LNUMBER","129",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$violations",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$test_entity",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","validate",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEqual",131],"(",["T_VARIABLE","$violations",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","count",131],"(",")",",",["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertEqual",132],"(",["T_VARIABLE","$violations",132],"[",["T_LNUMBER","0",132],"]",["T_OBJECT_OPERATOR","->",132],["T_STRING","getMessage",132],"(",")",",",["T_WHITESPACE"," ",132],["T_STRING","t",132],"(",["T_CONSTANT_ENCAPSED_STRING","'%name: may not be longer than @max characters.'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'UUID'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'@max'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_LNUMBER","128",132],")",")",")",";",["T_WHITESPACE","\n\n    ",132],["T_VARIABLE","$test_entity",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CLONE","clone",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$entity",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$langcode_key",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","entityManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getDefinition",135],"(",["T_VARIABLE","$entity_type",135],")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getKey",135],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$test_entity",136],["T_OBJECT_OPERATOR","->",136],"{",["T_VARIABLE","$langcode_key",136],"}",["T_OBJECT_OPERATOR","->",136],["T_STRING","value",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","randomString",136],"(",["T_LNUMBER","13",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$violations",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$test_entity",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","validate",137],"(",")",";",["T_WHITESPACE","\n    ",137],["T_COMMENT","\/\/ This should fail on AllowedValues and Length constraints.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEqual",139],"(",["T_VARIABLE","$violations",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","count",139],"(",")",",",["T_WHITESPACE"," ",139],["T_LNUMBER","2",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertEqual",140],"(",["T_VARIABLE","$violations",140],"[",["T_LNUMBER","0",140],"]",["T_OBJECT_OPERATOR","->",140],["T_STRING","getMessage",140],"(",")",",",["T_WHITESPACE"," ",140],["T_STRING","t",140],"(",["T_CONSTANT_ENCAPSED_STRING","'This value is too long. It should have %limit characters or less.'",140],",",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'%limit'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'12'",140],")",")",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertEqual",141],"(",["T_VARIABLE","$violations",141],"[",["T_LNUMBER","1",141],"]",["T_OBJECT_OPERATOR","->",141],["T_STRING","getMessage",141],"(",")",",",["T_WHITESPACE"," ",141],["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'The value you selected is not a valid choice.'",141],")",")",";",["T_WHITESPACE","\n\n    ",141],["T_VARIABLE","$test_entity",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_CLONE","clone",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$entity",143],";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$test_entity",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","type",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","value",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","NULL",144],";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$violations",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$test_entity",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","validate",145],"(",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertEqual",146],"(",["T_VARIABLE","$violations",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","count",146],"(",")",",",["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertEqual",147],"(",["T_VARIABLE","$violations",147],"[",["T_LNUMBER","0",147],"]",["T_OBJECT_OPERATOR","->",147],["T_STRING","getMessage",147],"(",")",",",["T_WHITESPACE"," ",147],["T_STRING","t",147],"(",["T_CONSTANT_ENCAPSED_STRING","'This value should not be null.'",147],")",")",";",["T_WHITESPACE","\n\n    ",147],["T_VARIABLE","$test_entity",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_CLONE","clone",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$entity",149],";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$test_entity",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","name",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","value",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","randomString",150],"(",["T_LNUMBER","33",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$violations",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$test_entity",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","validate",151],"(",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEqual",152],"(",["T_VARIABLE","$violations",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","count",152],"(",")",",",["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertEqual",153],"(",["T_VARIABLE","$violations",153],"[",["T_LNUMBER","0",153],"]",["T_OBJECT_OPERATOR","->",153],["T_STRING","getMessage",153],"(",")",",",["T_WHITESPACE"," ",153],["T_STRING","t",153],"(",["T_CONSTANT_ENCAPSED_STRING","'%name: may not be longer than @max characters.'",153],",",["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Name'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'@max'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_LNUMBER","32",153],")",")",")",";",["T_WHITESPACE","\n\n    ",153],["T_COMMENT","\/\/ Make sure the information provided by a violation is correct.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$violation",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$violations",156],"[",["T_LNUMBER","0",156],"]",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertEqual",157],"(",["T_VARIABLE","$violation",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getRoot",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","getValue",157],"(",")",",",["T_WHITESPACE"," ",157],["T_VARIABLE","$test_entity",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'Violation root is entity.'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertEqual",158],"(",["T_VARIABLE","$violation",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getPropertyPath",158],"(",")",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'name.0.value'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'Violation property path is correct.'",158],")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertEqual",159],"(",["T_VARIABLE","$violation",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getInvalidValue",159],"(",")",",",["T_WHITESPACE"," ",159],["T_VARIABLE","$test_entity",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","name",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","value",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'Violation contains invalid value.'",159],")",";",["T_WHITESPACE","\n\n    ",159],["T_VARIABLE","$test_entity",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_CLONE","clone",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$entity",161],";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$test_entity",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","set",162],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",162],",",["T_WHITESPACE"," ",162],["T_LNUMBER","9999",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$violations",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$test_entity",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","validate",163],"(",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertEqual",164],"(",["T_VARIABLE","$violations",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","count",164],"(",")",",",["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertEqual",165],"(",["T_VARIABLE","$violations",165],"[",["T_LNUMBER","0",165],"]",["T_OBJECT_OPERATOR","->",165],["T_STRING","getMessage",165],"(",")",",",["T_WHITESPACE"," ",165],["T_STRING","t",165],"(",["T_CONSTANT_ENCAPSED_STRING","'The referenced entity (%type: %id) does not exist.'",165],",",["T_WHITESPACE"," ",165],["T_ARRAY","array",165],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'user'",165],",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'%id'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_LNUMBER","9999",165],")",")",")",";",["T_WHITESPACE","\n\n    ",165],["T_VARIABLE","$test_entity",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_CLONE","clone",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$entity",167],";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$test_entity",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","field_test_text",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","format",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","randomString",168],"(",["T_LNUMBER","33",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$violations",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$test_entity",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","validate",169],"(",")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertEqual",170],"(",["T_VARIABLE","$violations",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","count",170],"(",")",",",["T_WHITESPACE"," ",170],["T_LNUMBER","1",170],",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'Validation failed.'",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertEqual",171],"(",["T_VARIABLE","$violations",171],"[",["T_LNUMBER","0",171],"]",["T_OBJECT_OPERATOR","->",171],["T_STRING","getMessage",171],"(",")",",",["T_WHITESPACE"," ",171],["T_STRING","t",171],"(",["T_CONSTANT_ENCAPSED_STRING","'The value you selected is not a valid choice.'",171],")",")",";",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ Make sure the information provided by a violation is correct.\n",173],["T_WHITESPACE","    ",174],["T_VARIABLE","$violation",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$violations",174],"[",["T_LNUMBER","0",174],"]",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertEqual",175],"(",["T_VARIABLE","$violation",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getRoot",175],"(",")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getValue",175],"(",")",",",["T_WHITESPACE"," ",175],["T_VARIABLE","$test_entity",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'Violation root is entity.'",175],")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_VARIABLE","$violation",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getPropertyPath",176],"(",")",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'field_test_text.0.format'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'Violation property path is correct.'",176],")",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","assertEqual",177],"(",["T_VARIABLE","$violation",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getInvalidValue",177],"(",")",",",["T_WHITESPACE"," ",177],["T_VARIABLE","$test_entity",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","field_test_text",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","format",177],",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'Violation contains invalid value.'",177],")",";",["T_WHITESPACE","\n  ",177],"}",["T_WHITESPACE","\n\n  ",178],["T_DOC_COMMENT","\/**\n   * Tests composite constraints.\n   *\/",180],["T_WHITESPACE","\n  ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","testCompositeConstraintValidation",183],"(",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$entity",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","createTestEntity",184],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_composite_constraint'",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$violations",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$entity",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","validate",185],"(",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertEqual",186],"(",["T_VARIABLE","$violations",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","count",186],"(",")",",",["T_WHITESPACE"," ",186],["T_LNUMBER","0",186],")",";",["T_WHITESPACE","\n\n    ",186],["T_COMMENT","\/\/ Trigger violation condition.\n",188],["T_WHITESPACE","    ",189],["T_VARIABLE","$entity",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","name",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","value",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'test'",189],";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$entity",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","type",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","value",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'test2'",190],";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$violations",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$entity",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","validate",191],"(",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEqual",192],"(",["T_VARIABLE","$violations",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","count",192],"(",")",",",["T_WHITESPACE"," ",192],["T_LNUMBER","1",192],")",";",["T_WHITESPACE","\n\n    ",192],["T_COMMENT","\/\/ Make sure we can determine this is composite constraint.\n",194],["T_WHITESPACE","    ",195],["T_VARIABLE","$constraint",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$violations",195],"[",["T_LNUMBER","0",195],"]",["T_OBJECT_OPERATOR","->",195],["T_STRING","getConstraint",195],"(",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertTrue",196],"(",["T_VARIABLE","$constraint",196],["T_WHITESPACE"," ",196],["T_INSTANCEOF","instanceof",196],["T_WHITESPACE"," ",196],["T_STRING","CompositeConstraintBase",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'Constraint is composite constraint.'",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertEqual",197],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$violations",197],"[",["T_LNUMBER","0",197],"]",["T_OBJECT_OPERATOR","->",197],["T_STRING","getPropertyPath",197],"(",")",")",";",["T_WHITESPACE","\n\n    ",197],["T_DOC_COMMENT","\/** @var CompositeConstraintBase $constraint *\/",199],["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertEqual",200],"(",["T_VARIABLE","$constraint",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","coversFields",200],"(",")",",",["T_WHITESPACE"," ",200],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'type'",200],"]",",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'Information about covered fields can be retrieved.'",200],")",";",["T_WHITESPACE","\n  ",200],"}",["T_WHITESPACE","\n\n",201],"}",["T_WHITESPACE","\n",203]]
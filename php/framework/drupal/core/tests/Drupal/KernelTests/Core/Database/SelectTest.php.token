[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n",3],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Drupal",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Core",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Database",4],["T_NS_SEPARATOR","\\",4],["T_STRING","InvalidQueryException",4],";",["T_WHITESPACE","\n",4],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests the Select query builder.\n *\n * @group Database\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","SelectTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","DatabaseTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Tests rudimentary SELECT statements.\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","testSimpleSelect",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$query",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_STRING","db_select",18],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$query",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","addField",19],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'name'",19],")",";",["T_WHITESPACE","\n    ",19],["T_VARIABLE","$query",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","addField",20],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'age'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'age'",20],")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$num_records",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$query",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","countQuery",21],"(",")",["T_OBJECT_OPERATOR","->",21],["T_STRING","execute",21],"(",")",["T_OBJECT_OPERATOR","->",21],["T_STRING","fetchField",21],"(",")",";",["T_WHITESPACE","\n\n    ",21],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","assertEqual",23],"(",["T_VARIABLE","$num_records",23],",",["T_WHITESPACE"," ",23],["T_LNUMBER","4",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",23],")",";",["T_WHITESPACE","\n  ",23],"}",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Tests rudimentary SELECT statement with a COMMENT.\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","testSimpleComment",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$query",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","db_select",30],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",30],")",["T_OBJECT_OPERATOR","->",30],["T_STRING","comment",30],"(",["T_CONSTANT_ENCAPSED_STRING","'Testing query comments'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$query",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","addField",31],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'name'",31],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$query",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","addField",32],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'age'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'age'",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$result",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$query",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","execute",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$records",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$result",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","fetchAll",35],"(",")",";",["T_WHITESPACE","\n\n    ",35],["T_VARIABLE","$query",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING_CAST","(string)",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$query",37],";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$expected",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","\"\/* Testing query comments *\/\"",38],";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertEqual",40],"(",["T_STRING","count",40],"(",["T_VARIABLE","$records",40],")",",",["T_WHITESPACE"," ",40],["T_LNUMBER","4",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertNotIdentical",41],"(",["T_STRING","FALSE",41],",",["T_WHITESPACE"," ",41],["T_STRING","strpos",41],"(",["T_VARIABLE","$query",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$expected",41],")",",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'The flattened query contains the comment string.'",41],")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Tests query COMMENT system against vulnerabilities.\n   *\/",44],["T_WHITESPACE","\n  ",46],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","testVulnerableComment",47],"(",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$query",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","db_select",48],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","comment",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Testing query comments *\/ SELECT nid FROM {node}; --'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$query",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","addField",49],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'name'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$query",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","addField",50],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'age'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'age'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$result",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$query",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","execute",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_VARIABLE","$records",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$result",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","fetchAll",53],"(",")",";",["T_WHITESPACE","\n\n    ",53],["T_VARIABLE","$query",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING_CAST","(string)",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$query",55],";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$expected",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","\"\/* Testing query comments  * \/ SELECT nid FROM {node}. -- *\/ SELECT test.name AS name, test.age AS age\\nFROM \\n{test} test\"",56],";",["T_WHITESPACE","\n\n    ",56],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertEqual",58],"(",["T_STRING","count",58],"(",["T_VARIABLE","$records",58],")",",",["T_WHITESPACE"," ",58],["T_LNUMBER","4",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct number of rows.'",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertNotIdentical",59],"(",["T_STRING","FALSE",59],",",["T_WHITESPACE"," ",59],["T_STRING","strpos",59],"(",["T_VARIABLE","$query",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$expected",59],")",",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'The flattened query contains the sanitised comment string.'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$connection",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Database",61],["T_DOUBLE_COLON","::",61],["T_STRING","getConnection",61],"(",")",";",["T_WHITESPACE","\n    ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","makeCommentsProvider",62],"(",")",["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$test_set",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_LIST","list",63],"(",["T_VARIABLE","$expected",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$comments",63],")",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$test_set",63],";",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEqual",64],"(",["T_VARIABLE","$expected",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$connection",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","makeComment",64],"(",["T_VARIABLE","$comments",64],")",")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n  ",65],"}",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Provides expected and input values for testVulnerableComment().\n   *\/",68],["T_WHITESPACE","\n  ",70],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","makeCommentsProvider",71],"(",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n      ",72],"[",["T_WHITESPACE","\n        ",73],["T_CONSTANT_ENCAPSED_STRING","'\/*  *\/ '",74],",",["T_WHITESPACE","\n        ",74],"[",["T_CONSTANT_ENCAPSED_STRING","''",75],"]",",",["T_WHITESPACE","\n      ",75],"]",",",["T_WHITESPACE","\n      ",76],["T_COMMENT","\/\/ Try and close the comment early.\n",77],["T_WHITESPACE","      ",78],"[",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  * \/ DROP TABLE node. -- *\/ '",79],",",["T_WHITESPACE","\n        ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'Exploit *\/ DROP TABLE node; --'",80],"]",",",["T_WHITESPACE","\n      ",80],"]",",",["T_WHITESPACE","\n      ",81],["T_COMMENT","\/\/ Variations on comment closing.\n",82],["T_WHITESPACE","      ",83],"[",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  * \/ * \/ DROP TABLE node. -- *\/ '",84],",",["T_WHITESPACE","\n        ",84],"[",["T_CONSTANT_ENCAPSED_STRING","'Exploit *\/*\/ DROP TABLE node; --'",85],"]",",",["T_WHITESPACE","\n      ",85],"]",",",["T_WHITESPACE","\n      ",86],"[",["T_WHITESPACE","\n        ",87],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  *  * \/\/ DROP TABLE node. -- *\/ '",88],",",["T_WHITESPACE","\n        ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'Exploit **\/\/ DROP TABLE node; --'",89],"]",",",["T_WHITESPACE","\n      ",89],"]",",",["T_WHITESPACE","\n      ",90],["T_COMMENT","\/\/ Try closing the comment in the second string which is appended.\n",91],["T_WHITESPACE","      ",92],"[",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'\/* Exploit  * \/ DROP TABLE node. --. Another try  * \/ DROP TABLE node. -- *\/ '",93],",",["T_WHITESPACE","\n        ",93],"[",["T_CONSTANT_ENCAPSED_STRING","'Exploit *\/ DROP TABLE node; --'",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'Another try *\/ DROP TABLE node; --'",94],"]",",",["T_WHITESPACE","\n      ",94],"]",",",["T_WHITESPACE","\n    ",95],"]",";",["T_WHITESPACE","\n  ",96],"}",["T_WHITESPACE","\n\n  ",97],["T_DOC_COMMENT","\/**\n   * Tests basic conditionals on SELECT statements.\n   *\/",99],["T_WHITESPACE","\n  ",101],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","testSimpleSelectConditional",102],"(",")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$query",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","db_select",103],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$name_field",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$query",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addField",104],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'name'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$age_field",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$query",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","addField",105],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'age'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'age'",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$query",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","condition",106],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",106],",",["T_WHITESPACE"," ",106],["T_LNUMBER","27",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$query",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","execute",107],"(",")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Check that the aliases are being created the way we want.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertEqual",110],"(",["T_VARIABLE","$name_field",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'name'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'Name field alias is correct.'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertEqual",111],"(",["T_VARIABLE","$age_field",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'age'",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Age field alias is correct.'",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Ensure that we got the right record.\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$record",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$result",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","fetch",114],"(",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertEqual",115],"(",["T_VARIABLE","$record",115],["T_OBJECT_OPERATOR","->",115],["T_VARIABLE","$name_field",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'George'",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Fetched name is correct.'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEqual",116],"(",["T_VARIABLE","$record",116],["T_OBJECT_OPERATOR","->",116],["T_VARIABLE","$age_field",116],",",["T_WHITESPACE"," ",116],["T_LNUMBER","27",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Fetched age is correct.'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Tests SELECT statements with expressions.\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","testSimpleSelectExpression",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$query",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","db_select",123],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$name_field",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$query",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","addField",124],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'name'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$age_field",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$query",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","addExpression",125],"(",["T_CONSTANT_ENCAPSED_STRING","\"age*2\"",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'double_age'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$query",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","condition",126],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",126],",",["T_WHITESPACE"," ",126],["T_LNUMBER","27",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$result",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$query",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","execute",127],"(",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Check that the aliases are being created the way we want.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEqual",130],"(",["T_VARIABLE","$name_field",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'name'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'Name field alias is correct.'",130],")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEqual",131],"(",["T_VARIABLE","$age_field",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'double_age'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Age field alias is correct.'",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Ensure that we got the right record.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$record",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$result",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","fetch",134],"(",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEqual",135],"(",["T_VARIABLE","$record",135],["T_OBJECT_OPERATOR","->",135],["T_VARIABLE","$name_field",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'George'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Fetched name is correct.'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertEqual",136],"(",["T_VARIABLE","$record",136],["T_OBJECT_OPERATOR","->",136],["T_VARIABLE","$age_field",136],",",["T_WHITESPACE"," ",136],["T_LNUMBER","27",136],["T_WHITESPACE"," ",136],"*",["T_WHITESPACE"," ",136],["T_LNUMBER","2",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'Fetched age expression is correct.'",136],")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * Tests SELECT statements with multiple expressions.\n   *\/",139],["T_WHITESPACE","\n  ",141],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","testSimpleSelectExpressionMultiple",142],"(",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$query",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","db_select",143],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$name_field",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$query",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","addField",144],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'name'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$age_double_field",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$query",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","addExpression",145],"(",["T_CONSTANT_ENCAPSED_STRING","\"age*2\"",145],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$age_triple_field",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","addExpression",146],"(",["T_CONSTANT_ENCAPSED_STRING","\"age*3\"",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$query",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","condition",147],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",147],",",["T_WHITESPACE"," ",147],["T_LNUMBER","27",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$result",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$query",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","execute",148],"(",")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Check that the aliases are being created the way we want.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEqual",151],"(",["T_VARIABLE","$age_double_field",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'expression'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'Double age field alias is correct.'",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertEqual",152],"(",["T_VARIABLE","$age_triple_field",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'expression_2'",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Triple age field alias is correct.'",152],")",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ Ensure that we got the right record.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$record",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$result",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","fetch",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertEqual",156],"(",["T_VARIABLE","$record",156],["T_OBJECT_OPERATOR","->",156],["T_VARIABLE","$name_field",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'George'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'Fetched name is correct.'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertEqual",157],"(",["T_VARIABLE","$record",157],["T_OBJECT_OPERATOR","->",157],["T_VARIABLE","$age_double_field",157],",",["T_WHITESPACE"," ",157],["T_LNUMBER","27",157],["T_WHITESPACE"," ",157],"*",["T_WHITESPACE"," ",157],["T_LNUMBER","2",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'Fetched double age expression is correct.'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertEqual",158],"(",["T_VARIABLE","$record",158],["T_OBJECT_OPERATOR","->",158],["T_VARIABLE","$age_triple_field",158],",",["T_WHITESPACE"," ",158],["T_LNUMBER","27",158],["T_WHITESPACE"," ",158],"*",["T_WHITESPACE"," ",158],["T_LNUMBER","3",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'Fetched triple age expression is correct.'",158],")",";",["T_WHITESPACE","\n  ",158],"}",["T_WHITESPACE","\n\n  ",159],["T_DOC_COMMENT","\/**\n   * Tests adding multiple fields to a SELECT statement at the same time.\n   *\/",161],["T_WHITESPACE","\n  ",163],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","testSimpleSelectMultipleFields",164],"(",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$record",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","db_select",165],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",165],")",["T_WHITESPACE","\n      ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","fields",166],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",166],",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'name'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'age'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'job'",166],")",")",["T_WHITESPACE","\n      ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","condition",167],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",167],",",["T_WHITESPACE"," ",167],["T_LNUMBER","27",167],")",["T_WHITESPACE","\n      ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","execute",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","fetchObject",168],"(",")",";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ Check that all fields we asked for are present.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertNotNull",171],"(",["T_VARIABLE","$record",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'ID field is present.'",171],")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertNotNull",172],"(",["T_VARIABLE","$record",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","name",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'Name field is present.'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertNotNull",173],"(",["T_VARIABLE","$record",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","age",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'Age field is present.'",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertNotNull",174],"(",["T_VARIABLE","$record",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","job",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'Job field is present.'",174],")",";",["T_WHITESPACE","\n\n    ",174],["T_COMMENT","\/\/ Ensure that we got the right record.\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ Check that all fields we asked for are present.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertEqual",178],"(",["T_VARIABLE","$record",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","id",178],",",["T_WHITESPACE"," ",178],["T_LNUMBER","2",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'ID field has the correct value.'",178],")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","assertEqual",179],"(",["T_VARIABLE","$record",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","name",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'George'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'Name field has the correct value.'",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEqual",180],"(",["T_VARIABLE","$record",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","age",180],",",["T_WHITESPACE"," ",180],["T_LNUMBER","27",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Age field has the correct value.'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertEqual",181],"(",["T_VARIABLE","$record",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","job",181],",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'Singer'",181],",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'Job field has the correct value.'",181],")",";",["T_WHITESPACE","\n  ",181],"}",["T_WHITESPACE","\n\n  ",182],["T_DOC_COMMENT","\/**\n   * Tests adding all fields from a given table to a SELECT statement.\n   *\/",184],["T_WHITESPACE","\n  ",186],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","testSimpleSelectAllFields",187],"(",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$record",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","db_select",188],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",188],")",["T_WHITESPACE","\n      ",188],["T_OBJECT_OPERATOR","->",189],["T_STRING","fields",189],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",189],")",["T_WHITESPACE","\n      ",189],["T_OBJECT_OPERATOR","->",190],["T_STRING","condition",190],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",190],",",["T_WHITESPACE"," ",190],["T_LNUMBER","27",190],")",["T_WHITESPACE","\n      ",190],["T_OBJECT_OPERATOR","->",191],["T_STRING","execute",191],"(",")",["T_OBJECT_OPERATOR","->",191],["T_STRING","fetchObject",191],"(",")",";",["T_WHITESPACE","\n\n    ",191],["T_COMMENT","\/\/ Check that all fields we asked for are present.\n",193],["T_WHITESPACE","    ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertNotNull",194],"(",["T_VARIABLE","$record",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","id",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'ID field is present.'",194],")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertNotNull",195],"(",["T_VARIABLE","$record",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","name",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'Name field is present.'",195],")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertNotNull",196],"(",["T_VARIABLE","$record",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","age",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'Age field is present.'",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertNotNull",197],"(",["T_VARIABLE","$record",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","job",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'Job field is present.'",197],")",";",["T_WHITESPACE","\n\n    ",197],["T_COMMENT","\/\/ Ensure that we got the right record.\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ Check that all fields we asked for are present.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertEqual",201],"(",["T_VARIABLE","$record",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","id",201],",",["T_WHITESPACE"," ",201],["T_LNUMBER","2",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'ID field has the correct value.'",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertEqual",202],"(",["T_VARIABLE","$record",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","name",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'George'",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'Name field has the correct value.'",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertEqual",203],"(",["T_VARIABLE","$record",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","age",203],",",["T_WHITESPACE"," ",203],["T_LNUMBER","27",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'Age field has the correct value.'",203],")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertEqual",204],"(",["T_VARIABLE","$record",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","job",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'Singer'",204],",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'Job field has the correct value.'",204],")",";",["T_WHITESPACE","\n  ",204],"}",["T_WHITESPACE","\n\n  ",205],["T_DOC_COMMENT","\/**\n   * Tests that a comparison with NULL is always FALSE.\n   *\/",207],["T_WHITESPACE","\n  ",209],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","testNullCondition",210],"(",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","ensureSampleDataNull",211],"(",")",";",["T_WHITESPACE","\n\n    ",211],["T_VARIABLE","$names",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","db_select",213],"(",["T_CONSTANT_ENCAPSED_STRING","'test_null'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'tn'",213],")",["T_WHITESPACE","\n      ",213],["T_OBJECT_OPERATOR","->",214],["T_STRING","fields",214],"(",["T_CONSTANT_ENCAPSED_STRING","'tn'",214],",",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",214],")",")",["T_WHITESPACE","\n      ",214],["T_OBJECT_OPERATOR","->",215],["T_STRING","condition",215],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",215],",",["T_WHITESPACE"," ",215],["T_STRING","NULL",215],")",["T_WHITESPACE","\n      ",215],["T_OBJECT_OPERATOR","->",216],["T_STRING","execute",216],"(",")",["T_OBJECT_OPERATOR","->",216],["T_STRING","fetchCol",216],"(",")",";",["T_WHITESPACE","\n\n    ",216],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertEqual",218],"(",["T_STRING","count",218],"(",["T_VARIABLE","$names",218],")",",",["T_WHITESPACE"," ",218],["T_LNUMBER","0",218],",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'No records found when comparing to NULL.'",218],")",";",["T_WHITESPACE","\n  ",218],"}",["T_WHITESPACE","\n\n  ",219],["T_DOC_COMMENT","\/**\n   * Tests that we can find a record with a NULL value.\n   *\/",221],["T_WHITESPACE","\n  ",223],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","testIsNullCondition",224],"(",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","ensureSampleDataNull",225],"(",")",";",["T_WHITESPACE","\n\n    ",225],["T_VARIABLE","$names",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","db_select",227],"(",["T_CONSTANT_ENCAPSED_STRING","'test_null'",227],",",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'tn'",227],")",["T_WHITESPACE","\n      ",227],["T_OBJECT_OPERATOR","->",228],["T_STRING","fields",228],"(",["T_CONSTANT_ENCAPSED_STRING","'tn'",228],",",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",228],")",")",["T_WHITESPACE","\n      ",228],["T_OBJECT_OPERATOR","->",229],["T_STRING","isNull",229],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",229],")",["T_WHITESPACE","\n      ",229],["T_OBJECT_OPERATOR","->",230],["T_STRING","execute",230],"(",")",["T_OBJECT_OPERATOR","->",230],["T_STRING","fetchCol",230],"(",")",";",["T_WHITESPACE","\n\n    ",230],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertEqual",232],"(",["T_STRING","count",232],"(",["T_VARIABLE","$names",232],")",",",["T_WHITESPACE"," ",232],["T_LNUMBER","1",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'Correct number of records found with NULL age.'",232],")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","assertEqual",233],"(",["T_VARIABLE","$names",233],"[",["T_LNUMBER","0",233],"]",",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'Fozzie'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'Correct record returned for NULL age.'",233],")",";",["T_WHITESPACE","\n  ",233],"}",["T_WHITESPACE","\n\n  ",234],["T_DOC_COMMENT","\/**\n   * Tests that we can find a record without a NULL value.\n   *\/",236],["T_WHITESPACE","\n  ",238],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","testIsNotNullCondition",239],"(",")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","ensureSampleDataNull",240],"(",")",";",["T_WHITESPACE","\n\n    ",240],["T_VARIABLE","$names",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","db_select",242],"(",["T_CONSTANT_ENCAPSED_STRING","'test_null'",242],",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'tn'",242],")",["T_WHITESPACE","\n      ",242],["T_OBJECT_OPERATOR","->",243],["T_STRING","fields",243],"(",["T_CONSTANT_ENCAPSED_STRING","'tn'",243],",",["T_WHITESPACE"," ",243],["T_ARRAY","array",243],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",243],")",")",["T_WHITESPACE","\n      ",243],["T_OBJECT_OPERATOR","->",244],["T_STRING","isNotNull",244],"(",["T_CONSTANT_ENCAPSED_STRING","'tn.age'",244],")",["T_WHITESPACE","\n      ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","orderBy",245],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",245],")",["T_WHITESPACE","\n      ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","execute",246],"(",")",["T_OBJECT_OPERATOR","->",246],["T_STRING","fetchCol",246],"(",")",";",["T_WHITESPACE","\n\n    ",246],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertEqual",248],"(",["T_STRING","count",248],"(",["T_VARIABLE","$names",248],")",",",["T_WHITESPACE"," ",248],["T_LNUMBER","2",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'Correct number of records found withNOT NULL age.'",248],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertEqual",249],"(",["T_VARIABLE","$names",249],"[",["T_LNUMBER","0",249],"]",",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'Gonzo'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'Correct record returned for NOT NULL age.'",249],")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertEqual",250],"(",["T_VARIABLE","$names",250],"[",["T_LNUMBER","1",250],"]",",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'Kermit'",250],",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'Correct record returned for NOT NULL age.'",250],")",";",["T_WHITESPACE","\n  ",250],"}",["T_WHITESPACE","\n\n  ",251],["T_DOC_COMMENT","\/**\n   * Tests that we can UNION multiple Select queries together.\n   *\n   * This is semantically equal to UNION DISTINCT, so we don't explicitly test\n   * that.\n   *\/",253],["T_WHITESPACE","\n  ",258],["T_FUNCTION","function",259],["T_WHITESPACE"," ",259],["T_STRING","testUnion",259],"(",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$query_1",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_STRING","db_select",260],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'t'",260],")",["T_WHITESPACE","\n      ",260],["T_OBJECT_OPERATOR","->",261],["T_STRING","fields",261],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",261],")",")",["T_WHITESPACE","\n      ",261],["T_OBJECT_OPERATOR","->",262],["T_STRING","condition",262],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",262],",",["T_WHITESPACE"," ",262],["T_ARRAY","array",262],"(",["T_LNUMBER","27",262],",",["T_WHITESPACE"," ",262],["T_LNUMBER","28",262],")",",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'IN'",262],")",";",["T_WHITESPACE","\n\n    ",262],["T_VARIABLE","$query_2",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","db_select",264],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",264],",",["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'t'",264],")",["T_WHITESPACE","\n      ",264],["T_OBJECT_OPERATOR","->",265],["T_STRING","fields",265],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",265],",",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",265],")",")",["T_WHITESPACE","\n      ",265],["T_OBJECT_OPERATOR","->",266],["T_STRING","condition",266],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",266],",",["T_WHITESPACE"," ",266],["T_LNUMBER","28",266],")",";",["T_WHITESPACE","\n\n    ",266],["T_VARIABLE","$query_1",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","union",268],"(",["T_VARIABLE","$query_2",268],")",";",["T_WHITESPACE","\n\n    ",268],["T_VARIABLE","$names",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$query_1",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","execute",270],"(",")",["T_OBJECT_OPERATOR","->",270],["T_STRING","fetchCol",270],"(",")",";",["T_WHITESPACE","\n\n    ",270],["T_COMMENT","\/\/ Ensure we only get 2 records.\n",272],["T_WHITESPACE","    ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertEqual",273],"(",["T_STRING","count",273],"(",["T_VARIABLE","$names",273],")",",",["T_WHITESPACE"," ",273],["T_LNUMBER","2",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'UNION correctly discarded duplicates.'",273],")",";",["T_WHITESPACE","\n\n    ",273],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","assertEqual",275],"(",["T_VARIABLE","$names",275],"[",["T_LNUMBER","0",275],"]",",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'George'",275],",",["T_WHITESPACE"," ",275],["T_CONSTANT_ENCAPSED_STRING","'First query returned correct name.'",275],")",";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","assertEqual",276],"(",["T_VARIABLE","$names",276],"[",["T_LNUMBER","1",276],"]",",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'Second query returned correct name.'",276],")",";",["T_WHITESPACE","\n  ",276],"}",["T_WHITESPACE","\n\n  ",277],["T_DOC_COMMENT","\/**\n   * Tests that we can UNION ALL multiple SELECT queries together.\n   *\/",279],["T_WHITESPACE","\n  ",281],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","testUnionAll",282],"(",")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$query_1",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_STRING","db_select",283],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'t'",283],")",["T_WHITESPACE","\n      ",283],["T_OBJECT_OPERATOR","->",284],["T_STRING","fields",284],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",284],",",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",284],")",")",["T_WHITESPACE","\n      ",284],["T_OBJECT_OPERATOR","->",285],["T_STRING","condition",285],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",285],",",["T_WHITESPACE"," ",285],["T_ARRAY","array",285],"(",["T_LNUMBER","27",285],",",["T_WHITESPACE"," ",285],["T_LNUMBER","28",285],")",",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'IN'",285],")",";",["T_WHITESPACE","\n\n    ",285],["T_VARIABLE","$query_2",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","db_select",287],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",287],",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'t'",287],")",["T_WHITESPACE","\n      ",287],["T_OBJECT_OPERATOR","->",288],["T_STRING","fields",288],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",288],",",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",288],")",")",["T_WHITESPACE","\n      ",288],["T_OBJECT_OPERATOR","->",289],["T_STRING","condition",289],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",289],",",["T_WHITESPACE"," ",289],["T_LNUMBER","28",289],")",";",["T_WHITESPACE","\n\n    ",289],["T_VARIABLE","$query_1",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","union",291],"(",["T_VARIABLE","$query_2",291],",",["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'ALL'",291],")",";",["T_WHITESPACE","\n\n    ",291],["T_VARIABLE","$names",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$query_1",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","execute",293],"(",")",["T_OBJECT_OPERATOR","->",293],["T_STRING","fetchCol",293],"(",")",";",["T_WHITESPACE","\n\n    ",293],["T_COMMENT","\/\/ Ensure we get all 3 records.\n",295],["T_WHITESPACE","    ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertEqual",296],"(",["T_STRING","count",296],"(",["T_VARIABLE","$names",296],")",",",["T_WHITESPACE"," ",296],["T_LNUMBER","3",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'UNION ALL correctly preserved duplicates.'",296],")",";",["T_WHITESPACE","\n\n    ",296],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertEqual",298],"(",["T_VARIABLE","$names",298],"[",["T_LNUMBER","0",298],"]",",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'George'",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'First query returned correct first name.'",298],")",";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","assertEqual",299],"(",["T_VARIABLE","$names",299],"[",["T_LNUMBER","1",299],"]",",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'Second query returned correct second name.'",299],")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertEqual",300],"(",["T_VARIABLE","$names",300],"[",["T_LNUMBER","2",300],"]",",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'Third query returned correct name.'",300],")",";",["T_WHITESPACE","\n  ",300],"}",["T_WHITESPACE","\n\n  ",301],["T_DOC_COMMENT","\/**\n   * Tests that we can get a count query for a UNION Select query.\n   *\/",303],["T_WHITESPACE","\n  ",305],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","testUnionCount",306],"(",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$query_1",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","db_select",307],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'t'",307],")",["T_WHITESPACE","\n      ",307],["T_OBJECT_OPERATOR","->",308],["T_STRING","fields",308],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",308],",",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'age'",308],")",")",["T_WHITESPACE","\n      ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","condition",309],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",309],",",["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",["T_LNUMBER","27",309],",",["T_WHITESPACE"," ",309],["T_LNUMBER","28",309],")",",",["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'IN'",309],")",";",["T_WHITESPACE","\n\n    ",309],["T_VARIABLE","$query_2",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","db_select",311],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'t'",311],")",["T_WHITESPACE","\n      ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","fields",312],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",312],",",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'age'",312],")",")",["T_WHITESPACE","\n      ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","condition",313],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",313],",",["T_WHITESPACE"," ",313],["T_LNUMBER","28",313],")",";",["T_WHITESPACE","\n\n    ",313],["T_VARIABLE","$query_1",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","union",315],"(",["T_VARIABLE","$query_2",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'ALL'",315],")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$names",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$query_1",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","execute",316],"(",")",["T_OBJECT_OPERATOR","->",316],["T_STRING","fetchCol",316],"(",")",";",["T_WHITESPACE","\n\n    ",316],["T_VARIABLE","$query_3",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$query_1",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","countQuery",318],"(",")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$count",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$query_3",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","execute",319],"(",")",["T_OBJECT_OPERATOR","->",319],["T_STRING","fetchField",319],"(",")",";",["T_WHITESPACE","\n\n    ",319],["T_COMMENT","\/\/ Ensure the counts match.\n",321],["T_WHITESPACE","    ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","assertEqual",322],"(",["T_STRING","count",322],"(",["T_VARIABLE","$names",322],")",",",["T_WHITESPACE"," ",322],["T_VARIABLE","$count",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","\"The count query's result matched the number of rows in the UNION query.\"",322],")",";",["T_WHITESPACE","\n  ",322],"}",["T_WHITESPACE","\n\n  ",323],["T_DOC_COMMENT","\/**\n   * Tests that we can UNION multiple Select queries together and set the ORDER.\n   *\/",325],["T_WHITESPACE","\n  ",327],["T_FUNCTION","function",328],["T_WHITESPACE"," ",328],["T_STRING","testUnionOrder",328],"(",")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n    ",328],["T_COMMENT","\/\/ This gives George and Ringo.\n",329],["T_WHITESPACE","    ",330],["T_VARIABLE","$query_1",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_STRING","db_select",330],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",330],",",["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'t'",330],")",["T_WHITESPACE","\n      ",330],["T_OBJECT_OPERATOR","->",331],["T_STRING","fields",331],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",331],",",["T_WHITESPACE"," ",331],["T_ARRAY","array",331],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",331],")",")",["T_WHITESPACE","\n      ",331],["T_OBJECT_OPERATOR","->",332],["T_STRING","condition",332],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",332],",",["T_WHITESPACE"," ",332],["T_ARRAY","array",332],"(",["T_LNUMBER","27",332],",",["T_WHITESPACE"," ",332],["T_LNUMBER","28",332],")",",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'IN'",332],")",";",["T_WHITESPACE","\n\n    ",332],["T_COMMENT","\/\/ This gives Paul.\n",334],["T_WHITESPACE","    ",335],["T_VARIABLE","$query_2",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","db_select",335],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",335],",",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'t'",335],")",["T_WHITESPACE","\n      ",335],["T_OBJECT_OPERATOR","->",336],["T_STRING","fields",336],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",336],",",["T_WHITESPACE"," ",336],["T_ARRAY","array",336],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",336],")",")",["T_WHITESPACE","\n      ",336],["T_OBJECT_OPERATOR","->",337],["T_STRING","condition",337],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",337],",",["T_WHITESPACE"," ",337],["T_LNUMBER","26",337],")",";",["T_WHITESPACE","\n\n    ",337],["T_VARIABLE","$query_1",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","union",339],"(",["T_VARIABLE","$query_2",339],")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$query_1",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","orderBy",340],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",340],",",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'DESC'",340],")",";",["T_WHITESPACE","\n\n    ",340],["T_VARIABLE","$names",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$query_1",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","execute",342],"(",")",["T_OBJECT_OPERATOR","->",342],["T_STRING","fetchCol",342],"(",")",";",["T_WHITESPACE","\n\n    ",342],["T_COMMENT","\/\/ Ensure we get all 3 records.\n",344],["T_WHITESPACE","    ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","assertEqual",345],"(",["T_STRING","count",345],"(",["T_VARIABLE","$names",345],")",",",["T_WHITESPACE"," ",345],["T_LNUMBER","3",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'UNION returned rows from both queries.'",345],")",";",["T_WHITESPACE","\n\n    ",345],["T_COMMENT","\/\/ Ensure that the names are in the correct reverse alphabetical order,\n",347],["T_WHITESPACE","    ",348],["T_COMMENT","\/\/ regardless of which query they came from.\n",348],["T_WHITESPACE","    ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","assertEqual",349],"(",["T_VARIABLE","$names",349],"[",["T_LNUMBER","0",349],"]",",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'First query returned correct name.'",349],")",";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","assertEqual",350],"(",["T_VARIABLE","$names",350],"[",["T_LNUMBER","1",350],"]",",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'Paul'",350],",",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'Second query returned correct name.'",350],")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","assertEqual",351],"(",["T_VARIABLE","$names",351],"[",["T_LNUMBER","2",351],"]",",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'George'",351],",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'Third query returned correct name.'",351],")",";",["T_WHITESPACE","\n  ",351],"}",["T_WHITESPACE","\n\n  ",352],["T_DOC_COMMENT","\/**\n   * Tests that we can UNION multiple Select queries together with and a LIMIT.\n   *\/",354],["T_WHITESPACE","\n  ",356],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","testUnionOrderLimit",357],"(",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n    ",357],["T_COMMENT","\/\/ This gives George and Ringo.\n",358],["T_WHITESPACE","    ",359],["T_VARIABLE","$query_1",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_STRING","db_select",359],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",359],",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'t'",359],")",["T_WHITESPACE","\n      ",359],["T_OBJECT_OPERATOR","->",360],["T_STRING","fields",360],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",360],",",["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",360],")",")",["T_WHITESPACE","\n      ",360],["T_OBJECT_OPERATOR","->",361],["T_STRING","condition",361],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",361],",",["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_LNUMBER","27",361],",",["T_WHITESPACE"," ",361],["T_LNUMBER","28",361],")",",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'IN'",361],")",";",["T_WHITESPACE","\n\n    ",361],["T_COMMENT","\/\/ This gives Paul.\n",363],["T_WHITESPACE","    ",364],["T_VARIABLE","$query_2",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","db_select",364],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",364],",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'t'",364],")",["T_WHITESPACE","\n      ",364],["T_OBJECT_OPERATOR","->",365],["T_STRING","fields",365],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",365],",",["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",365],")",")",["T_WHITESPACE","\n      ",365],["T_OBJECT_OPERATOR","->",366],["T_STRING","condition",366],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",366],",",["T_WHITESPACE"," ",366],["T_LNUMBER","26",366],")",";",["T_WHITESPACE","\n\n    ",366],["T_VARIABLE","$query_1",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","union",368],"(",["T_VARIABLE","$query_2",368],")",";",["T_WHITESPACE","\n    ",368],["T_VARIABLE","$query_1",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","orderBy",369],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",369],",",["T_WHITESPACE"," ",369],["T_CONSTANT_ENCAPSED_STRING","'DESC'",369],")",";",["T_WHITESPACE","\n    ",369],["T_VARIABLE","$query_1",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","range",370],"(",["T_LNUMBER","0",370],",",["T_WHITESPACE"," ",370],["T_LNUMBER","2",370],")",";",["T_WHITESPACE","\n\n    ",370],["T_VARIABLE","$names",372],["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$query_1",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","execute",372],"(",")",["T_OBJECT_OPERATOR","->",372],["T_STRING","fetchCol",372],"(",")",";",["T_WHITESPACE","\n\n    ",372],["T_COMMENT","\/\/ Ensure we get all only 2 of the 3 records.\n",374],["T_WHITESPACE","    ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","assertEqual",375],"(",["T_STRING","count",375],"(",["T_VARIABLE","$names",375],")",",",["T_WHITESPACE"," ",375],["T_LNUMBER","2",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'UNION with a limit returned rows from both queries.'",375],")",";",["T_WHITESPACE","\n\n    ",375],["T_COMMENT","\/\/ Ensure that the names are in the correct reverse alphabetical order,\n",377],["T_WHITESPACE","    ",378],["T_COMMENT","\/\/ regardless of which query they came from.\n",378],["T_WHITESPACE","    ",379],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","assertEqual",379],"(",["T_VARIABLE","$names",379],"[",["T_LNUMBER","0",379],"]",",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'First query returned correct name.'",379],")",";",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","assertEqual",380],"(",["T_VARIABLE","$names",380],"[",["T_LNUMBER","1",380],"]",",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'Paul'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'Second query returned correct name.'",380],")",";",["T_WHITESPACE","\n  ",380],"}",["T_WHITESPACE","\n\n  ",381],["T_DOC_COMMENT","\/**\n   * Tests that random ordering of queries works.\n   *\n   * We take the approach of testing the Drupal layer only, rather than trying\n   * to test that the database's random number generator actually produces\n   * random queries (which is very difficult to do without an unacceptable risk\n   * of the test failing by accident).\n   *\n   * Therefore, in this test we simply run the same query twice and assert that\n   * the two results are reordered versions of each other (as well as of the\n   * same query without the random ordering). It is reasonable to assume that\n   * if we run the same select query twice and the results are in a different\n   * order each time, the only way this could happen is if we have successfully\n   * triggered the database's random ordering functionality.\n   *\/",383],["T_WHITESPACE","\n  ",397],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","testRandomOrder",398],"(",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n    ",398],["T_COMMENT","\/\/ Use 52 items, so the chance that this test fails by accident will be the\n",399],["T_WHITESPACE","    ",400],["T_COMMENT","\/\/ same as the chance that a deck of cards will come out in the same order\n",400],["T_WHITESPACE","    ",401],["T_COMMENT","\/\/ after shuffling it (in other words, nearly impossible).\n",401],["T_WHITESPACE","    ",402],["T_VARIABLE","$number_of_items",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_LNUMBER","52",402],";",["T_WHITESPACE","\n    ",402],["T_WHILE","while",403],["T_WHITESPACE"," ",403],"(",["T_STRING","db_query",403],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT MAX(id) FROM {test}\"",403],")",["T_OBJECT_OPERATOR","->",403],["T_STRING","fetchField",403],"(",")",["T_WHITESPACE"," ",403],"<",["T_WHITESPACE"," ",403],["T_VARIABLE","$number_of_items",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n      ",403],["T_STRING","db_insert",404],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",404],")",["T_OBJECT_OPERATOR","->",404],["T_STRING","fields",404],"(",["T_ARRAY","array",404],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",404],["T_WHITESPACE"," ",404],["T_DOUBLE_ARROW","=>",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","randomMachineName",404],"(",")",")",")",["T_OBJECT_OPERATOR","->",404],["T_STRING","execute",404],"(",")",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_COMMENT","\/\/ First select the items in order and make sure we get an ordered list.\n",407],["T_WHITESPACE","    ",408],["T_VARIABLE","$expected_ids",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_STRING","range",408],"(",["T_LNUMBER","1",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$number_of_items",408],")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$ordered_ids",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","db_select",409],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",409],",",["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'t'",409],")",["T_WHITESPACE","\n      ",409],["T_OBJECT_OPERATOR","->",410],["T_STRING","fields",410],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",410],",",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",410],")",")",["T_WHITESPACE","\n      ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","range",411],"(",["T_LNUMBER","0",411],",",["T_WHITESPACE"," ",411],["T_VARIABLE","$number_of_items",411],")",["T_WHITESPACE","\n      ",411],["T_OBJECT_OPERATOR","->",412],["T_STRING","orderBy",412],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",412],")",["T_WHITESPACE","\n      ",412],["T_OBJECT_OPERATOR","->",413],["T_STRING","execute",413],"(",")",["T_WHITESPACE","\n      ",413],["T_OBJECT_OPERATOR","->",414],["T_STRING","fetchCol",414],"(",")",";",["T_WHITESPACE","\n    ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","assertEqual",415],"(",["T_VARIABLE","$ordered_ids",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$expected_ids",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'A query without random ordering returns IDs in the correct order.'",415],")",";",["T_WHITESPACE","\n\n    ",415],["T_COMMENT","\/\/ Now perform the same query, but instead choose a random ordering. We\n",417],["T_WHITESPACE","    ",418],["T_COMMENT","\/\/ expect this to contain a differently ordered version of the original\n",418],["T_WHITESPACE","    ",419],["T_COMMENT","\/\/ result.\n",419],["T_WHITESPACE","    ",420],["T_VARIABLE","$randomized_ids",420],["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","db_select",420],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'t'",420],")",["T_WHITESPACE","\n      ",420],["T_OBJECT_OPERATOR","->",421],["T_STRING","fields",421],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",421],",",["T_WHITESPACE"," ",421],["T_ARRAY","array",421],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",421],")",")",["T_WHITESPACE","\n      ",421],["T_OBJECT_OPERATOR","->",422],["T_STRING","range",422],"(",["T_LNUMBER","0",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$number_of_items",422],")",["T_WHITESPACE","\n      ",422],["T_OBJECT_OPERATOR","->",423],["T_STRING","orderRandom",423],"(",")",["T_WHITESPACE","\n      ",423],["T_OBJECT_OPERATOR","->",424],["T_STRING","execute",424],"(",")",["T_WHITESPACE","\n      ",424],["T_OBJECT_OPERATOR","->",425],["T_STRING","fetchCol",425],"(",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","assertNotEqual",426],"(",["T_VARIABLE","$randomized_ids",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$ordered_ids",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'A query with random ordering returns an unordered set of IDs.'",426],")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$sorted_ids",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$randomized_ids",427],";",["T_WHITESPACE","\n    ",427],["T_STRING","sort",428],"(",["T_VARIABLE","$sorted_ids",428],")",";",["T_WHITESPACE","\n    ",428],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","assertEqual",429],"(",["T_VARIABLE","$sorted_ids",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$ordered_ids",429],",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'After sorting the random list, the result matches the original query.'",429],")",";",["T_WHITESPACE","\n\n    ",429],["T_COMMENT","\/\/ Now perform the exact same query again, and make sure the order is\n",431],["T_WHITESPACE","    ",432],["T_COMMENT","\/\/ different.\n",432],["T_WHITESPACE","    ",433],["T_VARIABLE","$randomized_ids_second_set",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_STRING","db_select",433],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",433],",",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'t'",433],")",["T_WHITESPACE","\n      ",433],["T_OBJECT_OPERATOR","->",434],["T_STRING","fields",434],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",434],",",["T_WHITESPACE"," ",434],["T_ARRAY","array",434],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",434],")",")",["T_WHITESPACE","\n      ",434],["T_OBJECT_OPERATOR","->",435],["T_STRING","range",435],"(",["T_LNUMBER","0",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$number_of_items",435],")",["T_WHITESPACE","\n      ",435],["T_OBJECT_OPERATOR","->",436],["T_STRING","orderRandom",436],"(",")",["T_WHITESPACE","\n      ",436],["T_OBJECT_OPERATOR","->",437],["T_STRING","execute",437],"(",")",["T_WHITESPACE","\n      ",437],["T_OBJECT_OPERATOR","->",438],["T_STRING","fetchCol",438],"(",")",";",["T_WHITESPACE","\n    ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","assertNotEqual",439],"(",["T_VARIABLE","$randomized_ids_second_set",439],",",["T_WHITESPACE"," ",439],["T_VARIABLE","$randomized_ids",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'Performing the query with random ordering a second time returns IDs in a different order.'",439],")",";",["T_WHITESPACE","\n    ",439],["T_VARIABLE","$sorted_ids_second_set",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$randomized_ids_second_set",440],";",["T_WHITESPACE","\n    ",440],["T_STRING","sort",441],"(",["T_VARIABLE","$sorted_ids_second_set",441],")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertEqual",442],"(",["T_VARIABLE","$sorted_ids_second_set",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$sorted_ids",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'After sorting the second random list, the result matches the sorted version of the first random list.'",442],")",";",["T_WHITESPACE","\n  ",442],"}",["T_WHITESPACE","\n\n  ",443],["T_DOC_COMMENT","\/**\n   * Tests that filter by a regular expression works as expected.\n   *\/",445],["T_WHITESPACE","\n  ",447],["T_PUBLIC","public",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","testRegexCondition",448],"(",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n\n    ",448],["T_VARIABLE","$test_groups",450],"[","]",["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_ARRAY","array",450],"(",["T_WHITESPACE","\n      ",450],["T_CONSTANT_ENCAPSED_STRING","'regex'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'hn$'",451],",",["T_WHITESPACE","\n      ",451],["T_CONSTANT_ENCAPSED_STRING","'expected'",452],["T_WHITESPACE"," ",452],["T_DOUBLE_ARROW","=>",452],["T_WHITESPACE"," ",452],["T_ARRAY","array",452],"(",["T_WHITESPACE","\n        ",452],["T_CONSTANT_ENCAPSED_STRING","'John'",453],",",["T_WHITESPACE","\n      ",453],")",",",["T_WHITESPACE","\n    ",454],")",";",["T_WHITESPACE","\n    ",455],["T_VARIABLE","$test_groups",456],"[","]",["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_ARRAY","array",456],"(",["T_WHITESPACE","\n      ",456],["T_CONSTANT_ENCAPSED_STRING","'regex'",457],["T_WHITESPACE"," ",457],["T_DOUBLE_ARROW","=>",457],["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'^Pau'",457],",",["T_WHITESPACE","\n      ",457],["T_CONSTANT_ENCAPSED_STRING","'expected'",458],["T_WHITESPACE"," ",458],["T_DOUBLE_ARROW","=>",458],["T_WHITESPACE"," ",458],["T_ARRAY","array",458],"(",["T_WHITESPACE","\n        ",458],["T_CONSTANT_ENCAPSED_STRING","'Paul'",459],",",["T_WHITESPACE","\n      ",459],")",",",["T_WHITESPACE","\n    ",460],")",";",["T_WHITESPACE","\n    ",461],["T_VARIABLE","$test_groups",462],"[","]",["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_ARRAY","array",462],"(",["T_WHITESPACE","\n      ",462],["T_CONSTANT_ENCAPSED_STRING","'regex'",463],["T_WHITESPACE"," ",463],["T_DOUBLE_ARROW","=>",463],["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'Ringo|George'",463],",",["T_WHITESPACE","\n      ",463],["T_CONSTANT_ENCAPSED_STRING","'expected'",464],["T_WHITESPACE"," ",464],["T_DOUBLE_ARROW","=>",464],["T_WHITESPACE"," ",464],["T_ARRAY","array",464],"(",["T_WHITESPACE","\n        ",464],["T_CONSTANT_ENCAPSED_STRING","'Ringo'",465],",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'George'",465],",",["T_WHITESPACE","\n      ",465],")",",",["T_WHITESPACE","\n    ",466],")",";",["T_WHITESPACE","\n\n\n    ",467],["T_VARIABLE","$database",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","container",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","get",470],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",470],")",";",["T_WHITESPACE","\n    ",470],["T_FOREACH","foreach",471],["T_WHITESPACE"," ",471],"(",["T_VARIABLE","$test_groups",471],["T_WHITESPACE"," ",471],["T_AS","as",471],["T_WHITESPACE"," ",471],["T_VARIABLE","$test_group",471],")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n      ",471],["T_VARIABLE","$query",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_VARIABLE","$database",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","select",472],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'t'",472],")",";",["T_WHITESPACE","\n      ",472],["T_VARIABLE","$query",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","addField",473],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",473],",",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'name'",473],")",";",["T_WHITESPACE","\n      ",473],["T_VARIABLE","$query",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","condition",474],"(",["T_CONSTANT_ENCAPSED_STRING","'t.name'",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$test_group",474],"[",["T_CONSTANT_ENCAPSED_STRING","'regex'",474],"]",",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'REGEXP'",474],")",";",["T_WHITESPACE","\n      ",474],["T_VARIABLE","$result",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_VARIABLE","$query",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","execute",475],"(",")",["T_OBJECT_OPERATOR","->",475],["T_STRING","fetchCol",475],"(",")",";",["T_WHITESPACE","\n\n      ",475],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","assertEqual",477],"(",["T_STRING","count",477],"(",["T_VARIABLE","$result",477],")",",",["T_WHITESPACE"," ",477],["T_STRING","count",477],"(",["T_VARIABLE","$test_group",477],"[",["T_CONSTANT_ENCAPSED_STRING","'expected'",477],"]",")",",",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'Returns the expected number of rows.'",477],")",";",["T_WHITESPACE","\n      ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","assertEqual",478],"(",["T_STRING","sort",478],"(",["T_VARIABLE","$result",478],")",",",["T_WHITESPACE"," ",478],["T_STRING","sort",478],"(",["T_VARIABLE","$test_group",478],"[",["T_CONSTANT_ENCAPSED_STRING","'expected'",478],"]",")",",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'Returns the expected rows.'",478],")",";",["T_WHITESPACE","\n    ",478],"}",["T_WHITESPACE","\n\n    ",479],["T_COMMENT","\/\/ Ensure that filter by \"#\" still works due to the quoting.\n",481],["T_WHITESPACE","    ",482],["T_VARIABLE","$database",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","insert",482],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",482],")",["T_WHITESPACE","\n      ",482],["T_OBJECT_OPERATOR","->",483],["T_STRING","fields",483],"(",["T_ARRAY","array",483],"(",["T_WHITESPACE","\n        ",483],["T_CONSTANT_ENCAPSED_STRING","'name'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_CONSTANT_ENCAPSED_STRING","'Pete'",484],",",["T_WHITESPACE","\n        ",484],["T_CONSTANT_ENCAPSED_STRING","'age'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_LNUMBER","26",485],",",["T_WHITESPACE","\n        ",485],["T_CONSTANT_ENCAPSED_STRING","'job'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'#Drummer'",486],",",["T_WHITESPACE","\n      ",486],")",")",["T_WHITESPACE","\n      ",487],["T_OBJECT_OPERATOR","->",488],["T_STRING","execute",488],"(",")",";",["T_WHITESPACE","\n\n    ",488],["T_VARIABLE","$test_groups",490],["T_WHITESPACE"," ",490],"=",["T_WHITESPACE"," ",490],["T_ARRAY","array",490],"(",")",";",["T_WHITESPACE","\n    ",490],["T_VARIABLE","$test_groups",491],"[","]",["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_ARRAY","array",491],"(",["T_WHITESPACE","\n      ",491],["T_CONSTANT_ENCAPSED_STRING","'regex'",492],["T_WHITESPACE"," ",492],["T_DOUBLE_ARROW","=>",492],["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'#Drummer'",492],",",["T_WHITESPACE","\n      ",492],["T_CONSTANT_ENCAPSED_STRING","'expected'",493],["T_WHITESPACE"," ",493],["T_DOUBLE_ARROW","=>",493],["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",["T_WHITESPACE","\n        ",493],["T_CONSTANT_ENCAPSED_STRING","'Pete'",494],",",["T_WHITESPACE","\n      ",494],")",",",["T_WHITESPACE","\n    ",495],")",";",["T_WHITESPACE","\n    ",496],["T_VARIABLE","$test_groups",497],"[","]",["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_ARRAY","array",497],"(",["T_WHITESPACE","\n      ",497],["T_CONSTANT_ENCAPSED_STRING","'regex'",498],["T_WHITESPACE"," ",498],["T_DOUBLE_ARROW","=>",498],["T_WHITESPACE"," ",498],["T_CONSTANT_ENCAPSED_STRING","'#Singer'",498],",",["T_WHITESPACE","\n      ",498],["T_CONSTANT_ENCAPSED_STRING","'expected'",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_ARRAY","array",499],"(",["T_WHITESPACE","\n      ",499],")",",",["T_WHITESPACE","\n    ",500],")",";",["T_WHITESPACE","\n\n    ",501],["T_FOREACH","foreach",503],["T_WHITESPACE"," ",503],"(",["T_VARIABLE","$test_groups",503],["T_WHITESPACE"," ",503],["T_AS","as",503],["T_WHITESPACE"," ",503],["T_VARIABLE","$test_group",503],")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n      ",503],["T_VARIABLE","$query",504],["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_VARIABLE","$database",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","select",504],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",504],",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'t'",504],")",";",["T_WHITESPACE","\n      ",504],["T_VARIABLE","$query",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","addField",505],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'name'",505],")",";",["T_WHITESPACE","\n      ",505],["T_VARIABLE","$query",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","condition",506],"(",["T_CONSTANT_ENCAPSED_STRING","'t.job'",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$test_group",506],"[",["T_CONSTANT_ENCAPSED_STRING","'regex'",506],"]",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'REGEXP'",506],")",";",["T_WHITESPACE","\n      ",506],["T_VARIABLE","$result",507],["T_WHITESPACE"," ",507],"=",["T_WHITESPACE"," ",507],["T_VARIABLE","$query",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","execute",507],"(",")",["T_OBJECT_OPERATOR","->",507],["T_STRING","fetchCol",507],"(",")",";",["T_WHITESPACE","\n\n      ",507],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","assertEqual",509],"(",["T_STRING","count",509],"(",["T_VARIABLE","$result",509],")",",",["T_WHITESPACE"," ",509],["T_STRING","count",509],"(",["T_VARIABLE","$test_group",509],"[",["T_CONSTANT_ENCAPSED_STRING","'expected'",509],"]",")",",",["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'Returns the expected number of rows.'",509],")",";",["T_WHITESPACE","\n      ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","assertEqual",510],"(",["T_STRING","sort",510],"(",["T_VARIABLE","$result",510],")",",",["T_WHITESPACE"," ",510],["T_STRING","sort",510],"(",["T_VARIABLE","$test_group",510],"[",["T_CONSTANT_ENCAPSED_STRING","'expected'",510],"]",")",",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'Returns the expected rows.'",510],")",";",["T_WHITESPACE","\n    ",510],"}",["T_WHITESPACE","\n  ",511],"}",["T_WHITESPACE","\n\n  ",512],["T_DOC_COMMENT","\/**\n   * Tests that aliases are renamed when they are duplicates.\n   *\/",514],["T_WHITESPACE","\n  ",516],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","testSelectDuplicateAlias",517],"(",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n    ",517],["T_VARIABLE","$query",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING","db_select",518],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",518],",",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'t'",518],")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$alias1",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_VARIABLE","$query",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","addField",519],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'name'",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'the_alias'",519],")",";",["T_WHITESPACE","\n    ",519],["T_VARIABLE","$alias2",520],["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$query",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","addField",520],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",520],",",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'age'",520],",",["T_WHITESPACE"," ",520],["T_CONSTANT_ENCAPSED_STRING","'the_alias'",520],")",";",["T_WHITESPACE","\n    ",520],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","assertNotIdentical",521],"(",["T_VARIABLE","$alias1",521],",",["T_WHITESPACE"," ",521],["T_VARIABLE","$alias2",521],",",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","'Duplicate aliases are renamed.'",521],")",";",["T_WHITESPACE","\n  ",521],"}",["T_WHITESPACE","\n\n  ",522],["T_DOC_COMMENT","\/**\n   * Tests that an invalid merge query throws an exception.\n   *\/",524],["T_WHITESPACE","\n  ",526],["T_FUNCTION","function",527],["T_WHITESPACE"," ",527],["T_STRING","testInvalidSelectCount",527],"(",")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n    ",527],["T_TRY","try",528],["T_WHITESPACE"," ",528],"{",["T_WHITESPACE","\n      ",528],["T_COMMENT","\/\/ This query will fail because the table does not exist.\n",529],["T_WHITESPACE","      ",530],["T_COMMENT","\/\/ Normally it would throw an exception but we are suppressing\n",530],["T_WHITESPACE","      ",531],["T_COMMENT","\/\/ it with the throw_exception option.\n",531],["T_WHITESPACE","      ",532],["T_VARIABLE","$options",532],"[",["T_CONSTANT_ENCAPSED_STRING","'throw_exception'",532],"]",["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_STRING","FALSE",532],";",["T_WHITESPACE","\n      ",532],["T_STRING","db_select",533],"(",["T_CONSTANT_ENCAPSED_STRING","'some_table_that_doesnt_exist'",533],",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'t'",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$options",533],")",["T_WHITESPACE","\n        ",533],["T_OBJECT_OPERATOR","->",534],["T_STRING","fields",534],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",534],")",["T_WHITESPACE","\n        ",534],["T_OBJECT_OPERATOR","->",535],["T_STRING","countQuery",535],"(",")",["T_WHITESPACE","\n        ",535],["T_OBJECT_OPERATOR","->",536],["T_STRING","execute",536],"(",")",";",["T_WHITESPACE","\n\n      ",536],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","pass",538],"(",["T_CONSTANT_ENCAPSED_STRING","'$options[\\'throw_exception\\'] is FALSE, no Exception thrown.'",538],")",";",["T_WHITESPACE","\n    ",538],"}",["T_WHITESPACE","\n    ",539],["T_CATCH","catch",540],["T_WHITESPACE"," ",540],"(",["T_NS_SEPARATOR","\\",540],["T_STRING","Exception",540],["T_WHITESPACE"," ",540],["T_VARIABLE","$e",540],")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n      ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","fail",541],"(",["T_CONSTANT_ENCAPSED_STRING","'$options[\\'throw_exception\\'] is FALSE, but Exception thrown for invalid query.'",541],")",";",["T_WHITESPACE","\n      ",541],["T_RETURN","return",542],";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n\n    ",543],["T_TRY","try",545],["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n      ",545],["T_COMMENT","\/\/ This query will fail because the table does not exist.\n",546],["T_WHITESPACE","      ",547],["T_STRING","db_select",547],"(",["T_CONSTANT_ENCAPSED_STRING","'some_table_that_doesnt_exist'",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'t'",547],")",["T_WHITESPACE","\n        ",547],["T_OBJECT_OPERATOR","->",548],["T_STRING","fields",548],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",548],")",["T_WHITESPACE","\n        ",548],["T_OBJECT_OPERATOR","->",549],["T_STRING","countQuery",549],"(",")",["T_WHITESPACE","\n        ",549],["T_OBJECT_OPERATOR","->",550],["T_STRING","execute",550],"(",")",";",["T_WHITESPACE","\n    ",550],"}",["T_WHITESPACE","\n    ",551],["T_CATCH","catch",552],["T_WHITESPACE"," ",552],"(",["T_NS_SEPARATOR","\\",552],["T_STRING","Exception",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$e",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n      ",552],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","pass",553],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception thrown for invalid query.'",553],")",";",["T_WHITESPACE","\n      ",553],["T_RETURN","return",554],";",["T_WHITESPACE","\n    ",554],"}",["T_WHITESPACE","\n    ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","fail",556],"(",["T_CONSTANT_ENCAPSED_STRING","'No Exception thrown.'",556],")",";",["T_WHITESPACE","\n  ",556],"}",["T_WHITESPACE","\n\n  ",557],["T_DOC_COMMENT","\/**\n   * Tests thrown exception for IN query conditions with an empty array.\n   *\/",559],["T_WHITESPACE","\n  ",561],["T_FUNCTION","function",562],["T_WHITESPACE"," ",562],["T_STRING","testEmptyInCondition",562],"(",")",["T_WHITESPACE"," ",562],"{",["T_WHITESPACE","\n    ",562],["T_TRY","try",563],["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n      ",563],["T_STRING","db_select",564],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",564],",",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'t'",564],")",["T_WHITESPACE","\n        ",564],["T_OBJECT_OPERATOR","->",565],["T_STRING","fields",565],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",565],")",["T_WHITESPACE","\n        ",565],["T_OBJECT_OPERATOR","->",566],["T_STRING","condition",566],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",566],",",["T_WHITESPACE"," ",566],["T_ARRAY","array",566],"(",")",",",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'IN'",566],")",["T_WHITESPACE","\n        ",566],["T_OBJECT_OPERATOR","->",567],["T_STRING","execute",567],"(",")",";",["T_WHITESPACE","\n\n      ",567],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","fail",569],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception not thrown'",569],")",";",["T_WHITESPACE","\n    ",569],"}",["T_WHITESPACE","\n    ",570],["T_CATCH","catch",571],["T_WHITESPACE"," ",571],"(",["T_STRING","InvalidQueryException",571],["T_WHITESPACE"," ",571],["T_VARIABLE","$e",571],")",["T_WHITESPACE"," ",571],"{",["T_WHITESPACE","\n      ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","assertEqual",572],"(",["T_CONSTANT_ENCAPSED_STRING","\"Query condition 'age IN ()' cannot be empty.\"",572],",",["T_WHITESPACE"," ",572],["T_VARIABLE","$e",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getMessage",572],"(",")",")",";",["T_WHITESPACE","\n    ",572],"}",["T_WHITESPACE","\n\n    ",573],["T_TRY","try",575],["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n      ",575],["T_STRING","db_select",576],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",576],",",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","'t'",576],")",["T_WHITESPACE","\n        ",576],["T_OBJECT_OPERATOR","->",577],["T_STRING","fields",577],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",577],")",["T_WHITESPACE","\n        ",577],["T_OBJECT_OPERATOR","->",578],["T_STRING","condition",578],"(",["T_CONSTANT_ENCAPSED_STRING","'age'",578],",",["T_WHITESPACE"," ",578],["T_ARRAY","array",578],"(",")",",",["T_WHITESPACE"," ",578],["T_CONSTANT_ENCAPSED_STRING","'NOT IN'",578],")",["T_WHITESPACE","\n        ",578],["T_OBJECT_OPERATOR","->",579],["T_STRING","execute",579],"(",")",";",["T_WHITESPACE","\n\n      ",579],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","fail",581],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception not thrown'",581],")",";",["T_WHITESPACE","\n    ",581],"}",["T_WHITESPACE","\n    ",582],["T_CATCH","catch",583],["T_WHITESPACE"," ",583],"(",["T_STRING","InvalidQueryException",583],["T_WHITESPACE"," ",583],["T_VARIABLE","$e",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n      ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","assertEqual",584],"(",["T_CONSTANT_ENCAPSED_STRING","\"Query condition 'age NOT IN ()' cannot be empty.\"",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$e",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","getMessage",584],"(",")",")",";",["T_WHITESPACE","\n    ",584],"}",["T_WHITESPACE","\n  ",585],"}",["T_WHITESPACE","\n\n",586],"}",["T_WHITESPACE","\n",588]]
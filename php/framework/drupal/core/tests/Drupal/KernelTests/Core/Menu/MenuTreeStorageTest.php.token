[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Menu",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Exception",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PluginException",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Menu",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MenuTreeParameters",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Menu",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MenuTreeStorage",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTestBase",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests the menu tree storage.\n *\n * @group Menu\n *\n * @see \\Drupal\\Core\\Menu\\MenuTreeStorage\n *\/",10],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","MenuTreeStorageTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","KernelTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The tested tree storage.\n   *\n   * @var \\Drupal\\Core\\Menu\\MenuTreeStorage\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$treeStorage",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * The database connection.\n   *\n   * @var \\Drupal\\Core\\Database\\Connection\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$connection",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","setUp",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_STRING","parent",37],["T_DOUBLE_COLON","::",37],["T_STRING","setUp",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","treeStorage",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_NEW","new",39],["T_WHITESPACE"," ",39],["T_STRING","MenuTreeStorage",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",39],")",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.menu'",39],")",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_tags.invalidator'",39],")",",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'menu_tree'",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","connection",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","container",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Tests the tree storage when no tree was built yet.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testBasicMethods",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","doTestEmptyStorage",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","doTestTable",48],"(",")",";",["T_WHITESPACE","\n  ",48],"}",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * Ensures that there are no menu links by default.\n   *\/",51],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","doTestEmptyStorage",54],"(",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_LNUMBER","0",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","treeStorage",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","countMenuLinks",55],"(",")",")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Ensures that table gets created on the fly.\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","doTestTable",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ Test that we can create a tree storage with an arbitrary table name and\n",62],["T_WHITESPACE","    ",63],["T_COMMENT","\/\/ that selecting from the storage creates the table.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$tree_storage",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_STRING","MenuTreeStorage",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","container",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'database'",64],")",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","container",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.menu'",64],")",",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","container",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_tags.invalidator'",64],")",",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'test_menu_tree'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertFalse",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","connection",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","schema",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","tableExists",65],"(",["T_CONSTANT_ENCAPSED_STRING","'test_menu_tree'",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'Test table is not yet created'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$tree_storage",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","countMenuLinks",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","connection",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","schema",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","tableExists",67],"(",["T_CONSTANT_ENCAPSED_STRING","'test_menu_tree'",67],")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Test table was created'",67],")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Tests with a simple linear hierarchy.\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testSimpleHierarchy",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Add some links with parent on the previous one and test some values.\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ <tools>\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ - test1\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ -- test2\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ --- test3\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","addMenuLink",79],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","''",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertMenuLink",80],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",80],",",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","0",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'depth'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","1",80],")",")",";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","addMenuLink",82],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'test1'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertMenuLink",83],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",83],",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_LNUMBER","1",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'depth'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_LNUMBER","1",83],")",",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",")",",",["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",83],")",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertMenuLink",84],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","0",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'depth'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_LNUMBER","2",84],")",",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",84],")",")",";",["T_WHITESPACE","\n\n    ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","addMenuLink",86],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'test2'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertMenuLink",87],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","1",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'depth'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","1",87],")",",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'test3'",87],")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertMenuLink",88],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_LNUMBER","1",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'depth'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_LNUMBER","2",88],")",",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",88],")",",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",88],")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertMenuLink",89],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",89],",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","0",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'depth'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_LNUMBER","3",89],")",",",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'test1'",89],")",")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Tests the tree with moving links inside the hierarchy.\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testMenuLinkMoving",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_COMMENT","\/\/ Before the move.\n",96],["T_WHITESPACE","    ",97],["T_COMMENT","\/\/ <tools>\n",97],["T_WHITESPACE","    ",98],["T_COMMENT","\/\/ - test1\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ -- test2\n",99],["T_WHITESPACE","    ",100],["T_COMMENT","\/\/ --- test3\n",100],["T_WHITESPACE","    ",101],["T_COMMENT","\/\/ - test4\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ -- test5\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ --- test6\n",103],["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","addMenuLink",105],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","''",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addMenuLink",106],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'test1'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","addMenuLink",107],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'test2'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","addMenuLink",108],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","''",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","addMenuLink",109],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'test4'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","addMenuLink",110],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'test5'",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertMenuLink",112],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_LNUMBER","1",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'depth'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_LNUMBER","1",112],")",",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'test3'",112],")",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertMenuLink",113],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'depth'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_LNUMBER","2",113],")",",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",113],")",",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",113],")",")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertMenuLink",114],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_LNUMBER","1",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'depth'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_LNUMBER","1",114],")",",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",")",",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'test6'",114],")",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertMenuLink",115],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_LNUMBER","1",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'depth'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_LNUMBER","2",115],")",",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",115],")",",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",115],")",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertMenuLink",116],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_LNUMBER","0",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'depth'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_LNUMBER","3",116],")",",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'test4'",116],")",")",";",["T_WHITESPACE","\n\n    ",116],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","moveMenuLink",118],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'test5'",118],")",";",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ After the 1st move.\n",119],["T_WHITESPACE","    ",120],["T_COMMENT","\/\/ <tools>\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ - test1\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ - test4\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ -- test5\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ --- test2\n",124],["T_WHITESPACE","    ",125],["T_COMMENT","\/\/ ---- test3\n",125],["T_WHITESPACE","    ",126],["T_COMMENT","\/\/ --- test6\n",126],["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertMenuLink",128],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","0",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'depth'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],")",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertMenuLink",129],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",129],",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_LNUMBER","1",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'depth'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_LNUMBER","3",129],")",",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'test4'",129],")",",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",129],")",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertMenuLink",130],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","0",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'depth'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","4",130],")",",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'test5'",130],",",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'test4'",130],")",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertMenuLink",131],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",131],",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'depth'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],")",",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",")",",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'test2'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'test3'",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'test6'",131],")",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertMenuLink",132],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_LNUMBER","1",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'depth'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_LNUMBER","2",132],")",",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",132],")",",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'test3'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'test6'",132],")",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertMenuLink",133],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'depth'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_LNUMBER","3",133],")",",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'test4'",133],")",")",";",["T_WHITESPACE","\n\n    ",133],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","moveMenuLink",135],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'test1'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","moveMenuLink",136],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'test1'",136],")",";",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ After the next 2 moves.\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ <tools>\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ - test1\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ -- test3\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ -- test4\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ --- test5\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ ---- test2\n",143],["T_WHITESPACE","    ",144],["T_COMMENT","\/\/ ---- test6\n",144],["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertMenuLink",146],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",146],",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'depth'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_LNUMBER","1",146],")",",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",")",",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'test5'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'test2'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'test3'",146],",",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'test6'",146],")",")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertMenuLink",147],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",147],",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","0",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'depth'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],["T_LNUMBER","4",147],")",",",["T_WHITESPACE"," ",147],["T_ARRAY","array",147],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'test4'",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'test1'",147],")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertMenuLink",148],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_LNUMBER","0",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'depth'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_LNUMBER","2",148],")",",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",148],")",")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertMenuLink",149],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",149],",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'depth'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_LNUMBER","2",149],")",",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",149],")",",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'test5'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'test6'",149],")",")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertMenuLink",150],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",150],",",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_LNUMBER","1",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'depth'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_LNUMBER","3",150],")",",",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'test1'",150],")",",",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'test6'",150],")",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertMenuLink",151],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",151],",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","0",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'depth'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","4",151],")",",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'test4'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'test1'",151],")",")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Deleting a link in the middle should re-attach child links to the parent.\n",153],["T_WHITESPACE","    ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","treeStorage",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","delete",154],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",154],")",";",["T_WHITESPACE","\n    ",154],["T_COMMENT","\/\/ After the delete.\n",155],["T_WHITESPACE","    ",156],["T_COMMENT","\/\/ <tools>\n",156],["T_WHITESPACE","    ",157],["T_COMMENT","\/\/ - test1\n",157],["T_WHITESPACE","    ",158],["T_COMMENT","\/\/ -- test3\n",158],["T_WHITESPACE","    ",159],["T_COMMENT","\/\/ -- test5\n",159],["T_WHITESPACE","    ",160],["T_COMMENT","\/\/ --- test2\n",160],["T_WHITESPACE","    ",161],["T_COMMENT","\/\/ --- test6\n",161],["T_WHITESPACE","    ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertMenuLink",162],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",162],",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'depth'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_LNUMBER","1",162],")",",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'test2'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'test3'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'test6'",162],")",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertMenuLink",163],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",163],",",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_LNUMBER","0",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'depth'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_LNUMBER","3",163],")",",",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'test1'",163],")",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertMenuLink",164],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",164],",",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_LNUMBER","0",164],",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'depth'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_LNUMBER","2",164],")",",",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",164],")",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertFalse",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","treeStorage",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","load",165],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",165],")",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertMenuLink",166],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",166],",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_LNUMBER","1",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'depth'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_LNUMBER","2",166],")",",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",166],")",",",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",166],",",["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'test6'",166],")",")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertMenuLink",167],"(",["T_CONSTANT_ENCAPSED_STRING","'test6'",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_LNUMBER","0",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'depth'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_LNUMBER","3",167],")",",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'test1'",167],")",")",";",["T_WHITESPACE","\n  ",167],"}",["T_WHITESPACE","\n\n  ",168],["T_DOC_COMMENT","\/**\n   * Tests with disabled child links.\n   *\/",170],["T_WHITESPACE","\n  ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","testMenuDisabledChildLinks",173],"(",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n    ",173],["T_COMMENT","\/\/ Add some links with parent on the previous one and test some values.\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ <tools>\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/ - test1\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ -- test2 (disabled)\n",177],["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","addMenuLink",179],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","''",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertMenuLink",180],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",180],",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_LNUMBER","0",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'depth'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_LNUMBER","1",180],")",")",";",["T_WHITESPACE","\n\n    ",180],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","addMenuLink",182],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'test1'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'<front>'",182],",",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",")",",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'tools'",182],",",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_CONSTANT_ENCAPSED_STRING","'enabled'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_LNUMBER","0",182],")",")",";",["T_WHITESPACE","\n    ",182],["T_COMMENT","\/\/ The 1st link does not have any visible children, so has_children is 0.\n",183],["T_WHITESPACE","    ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertMenuLink",184],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",184],",",["T_WHITESPACE"," ",184],["T_ARRAY","array",184],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_LNUMBER","0",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'depth'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_LNUMBER","1",184],")",")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","assertMenuLink",185],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","0",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'depth'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","2",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'enabled'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","0",185],")",",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",185],")",")",";",["T_WHITESPACE","\n\n    ",185],["T_COMMENT","\/\/ Add more links with parent on the previous one.\n",187],["T_WHITESPACE","    ",188],["T_COMMENT","\/\/ <footer>\n",188],["T_WHITESPACE","    ",189],["T_COMMENT","\/\/ - footerA\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ ===============\n",190],["T_WHITESPACE","    ",191],["T_COMMENT","\/\/ <tools>\n",191],["T_WHITESPACE","    ",192],["T_COMMENT","\/\/ - test1\n",192],["T_WHITESPACE","    ",193],["T_COMMENT","\/\/ -- test2 (disabled)\n",193],["T_WHITESPACE","    ",194],["T_COMMENT","\/\/ --- test3\n",194],["T_WHITESPACE","    ",195],["T_COMMENT","\/\/ ---- test4\n",195],["T_WHITESPACE","    ",196],["T_COMMENT","\/\/ ----- test5\n",196],["T_WHITESPACE","    ",197],["T_COMMENT","\/\/ ------ test6\n",197],["T_WHITESPACE","    ",198],["T_COMMENT","\/\/ ------- test7\n",198],["T_WHITESPACE","    ",199],["T_COMMENT","\/\/ -------- test8\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ --------- test9\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","addMenuLink",201],"(",["T_CONSTANT_ENCAPSED_STRING","'footerA'",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","''",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'<front>'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'footer'",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$visible_children",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",")",";",["T_WHITESPACE","\n    ",202],["T_FOR","for",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$i",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_LNUMBER","3",203],";",["T_WHITESPACE"," ",203],["T_VARIABLE","$i",203],["T_WHITESPACE"," ",203],["T_IS_SMALLER_OR_EQUAL","<=",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","treeStorage",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","maxDepth",203],"(",")",";",["T_WHITESPACE"," ",203],["T_VARIABLE","$i",203],["T_INC","++",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n      ",203],["T_VARIABLE","$parent",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$i",204],["T_WHITESPACE"," ",204],"-",["T_WHITESPACE"," ",204],["T_LNUMBER","1",204],";",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","addMenuLink",205],"(","\"",["T_ENCAPSED_AND_WHITESPACE","test",205],["T_VARIABLE","$i",205],"\"",",",["T_WHITESPACE"," ",205],"\"",["T_ENCAPSED_AND_WHITESPACE","test",205],["T_VARIABLE","$parent",205],"\"",")",";",["T_WHITESPACE","\n      ",205],["T_VARIABLE","$visible_children",206],"[","]",["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],"\"",["T_ENCAPSED_AND_WHITESPACE","test",206],["T_VARIABLE","$i",206],"\"",";",["T_WHITESPACE","\n    ",206],"}",["T_WHITESPACE","\n    ",207],["T_COMMENT","\/\/ The 1st link does not have any visible children, so has_children is still\n",208],["T_WHITESPACE","    ",209],["T_COMMENT","\/\/ 0. However, it has visible links below it that will be found.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","assertMenuLink",210],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",210],",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_LNUMBER","0",210],",",["T_WHITESPACE"," ",210],["T_CONSTANT_ENCAPSED_STRING","'depth'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_LNUMBER","1",210],")",",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",")",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$visible_children",210],")",";",["T_WHITESPACE","\n    ",210],["T_COMMENT","\/\/ This should fail since test9 would end up at greater than max depth.\n",211],["T_WHITESPACE","    ",212],["T_TRY","try",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","moveMenuLink",213],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'footerA'",213],")",";",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","fail",214],"(",["T_CONSTANT_ENCAPSED_STRING","'Exception was not thrown'",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n    ",215],["T_CATCH","catch",216],["T_WHITESPACE"," ",216],"(",["T_STRING","PluginException",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$e",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n      ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","pass",217],"(",["T_VARIABLE","$e",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getMessage",217],"(",")",")",";",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n    ",218],["T_COMMENT","\/\/ The opposite move should work, and change the has_children flag.\n",219],["T_WHITESPACE","    ",220],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","moveMenuLink",220],"(",["T_CONSTANT_ENCAPSED_STRING","'footerA'",220],",",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'test1'",220],")",";",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$visible_children",221],"[","]",["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'footerA'",221],";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","assertMenuLink",222],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",222],",",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_CONSTANT_ENCAPSED_STRING","'has_children'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],",",["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'depth'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_LNUMBER","1",222],")",",",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",")",",",["T_WHITESPACE"," ",222],["T_VARIABLE","$visible_children",222],")",";",["T_WHITESPACE","\n  ",222],"}",["T_WHITESPACE","\n\n  ",223],["T_DOC_COMMENT","\/**\n   * Tests the loadTreeData method.\n   *\/",225],["T_WHITESPACE","\n  ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","testLoadTree",228],"(",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","addMenuLink",229],"(",["T_CONSTANT_ENCAPSED_STRING","'test1'",229],",",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","''",229],")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","addMenuLink",230],"(",["T_CONSTANT_ENCAPSED_STRING","'test2'",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'test1'",230],")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","addMenuLink",231],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'test2'",231],")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","addMenuLink",232],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",232],")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","addMenuLink",233],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'test4'",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_VARIABLE","$data",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","treeStorage",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","loadTreeData",235],"(",["T_CONSTANT_ENCAPSED_STRING","'tools'",235],",",["T_WHITESPACE"," ",235],["T_NEW","new",235],["T_WHITESPACE"," ",235],["T_STRING","MenuTreeParameters",235],"(",")",")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$tree",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$data",236],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",236],"]",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertEqual",237],"(",["T_STRING","count",237],"(",["T_VARIABLE","$tree",237],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",237],"]",")",",",["T_WHITESPACE"," ",237],["T_LNUMBER","1",237],")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertEqual",238],"(",["T_STRING","count",238],"(",["T_VARIABLE","$tree",238],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",238],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",238],"]",")",",",["T_WHITESPACE"," ",238],["T_LNUMBER","1",238],")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","assertEqual",239],"(",["T_STRING","count",239],"(",["T_VARIABLE","$tree",239],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test3'",239],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",239],"]",")",",",["T_WHITESPACE"," ",239],["T_LNUMBER","0",239],")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","assertEqual",240],"(",["T_STRING","count",240],"(",["T_VARIABLE","$tree",240],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",240],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",240],"]",")",",",["T_WHITESPACE"," ",240],["T_LNUMBER","1",240],")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","assertEqual",241],"(",["T_STRING","count",241],"(",["T_VARIABLE","$tree",241],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test5'",241],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",241],"]",")",",",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],")",";",["T_WHITESPACE","\n\n    ",241],["T_VARIABLE","$parameters",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_NEW","new",243],["T_WHITESPACE"," ",243],["T_STRING","MenuTreeParameters",243],"(",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$parameters",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","setActiveTrail",244],"(",["T_ARRAY","array",244],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",244],",",["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'test5'",244],")",")",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$data",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","treeStorage",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","loadTreeData",245],"(",["T_CONSTANT_ENCAPSED_STRING","'tools'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$parameters",245],")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$tree",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$data",246],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",246],"]",";",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","assertEqual",247],"(",["T_STRING","count",247],"(",["T_VARIABLE","$tree",247],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",247],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",247],"]",")",",",["T_WHITESPACE"," ",247],["T_LNUMBER","1",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertFalse",248],"(",["T_VARIABLE","$tree",248],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",248],"]","[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",248],"]",")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertEqual",249],"(",["T_STRING","count",249],"(",["T_VARIABLE","$tree",249],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",249],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",249],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",249],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",249],"]",")",",",["T_WHITESPACE"," ",249],["T_LNUMBER","1",249],")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertFalse",250],"(",["T_VARIABLE","$tree",250],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",250],"]",")",";",["T_WHITESPACE","\n    ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertEqual",251],"(",["T_STRING","count",251],"(",["T_VARIABLE","$tree",251],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test3'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",251],"]",")",",",["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],")",";",["T_WHITESPACE","\n    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","assertFalse",252],"(",["T_VARIABLE","$tree",252],"[",["T_CONSTANT_ENCAPSED_STRING","'test1'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test3'",252],"]","[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",252],"]",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","assertEqual",253],"(",["T_STRING","count",253],"(",["T_VARIABLE","$tree",253],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",253],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",253],"]",")",",",["T_WHITESPACE"," ",253],["T_LNUMBER","1",253],")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertTrue",254],"(",["T_VARIABLE","$tree",254],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",254],"]","[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",254],"]",")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertEqual",255],"(",["T_STRING","count",255],"(",["T_VARIABLE","$tree",255],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",255],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",255],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test5'",255],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",255],"]",")",",",["T_WHITESPACE"," ",255],["T_LNUMBER","0",255],")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertTrue",256],"(",["T_VARIABLE","$tree",256],"[",["T_CONSTANT_ENCAPSED_STRING","'test4'",256],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",256],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test5'",256],"]","[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",256],"]",")",";",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Add some conditions to ensure that conditions work as expected.\n",258],["T_WHITESPACE","    ",259],["T_VARIABLE","$parameters",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_NEW","new",259],["T_WHITESPACE"," ",259],["T_STRING","MenuTreeParameters",259],"(",")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$parameters",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","addCondition",260],"(",["T_CONSTANT_ENCAPSED_STRING","'parent'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'test1'",260],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$data",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","treeStorage",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","loadTreeData",261],"(",["T_CONSTANT_ENCAPSED_STRING","'tools'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$parameters",261],")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","assertEqual",262],"(",["T_STRING","count",262],"(",["T_VARIABLE","$data",262],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",262],"]",")",",",["T_WHITESPACE"," ",262],["T_LNUMBER","1",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertEqual",263],"(",["T_VARIABLE","$data",263],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'definition'",263],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",263],"]",",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'test2'",263],")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","assertEqual",264],"(",["T_VARIABLE","$data",264],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",264],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",264],"]",",",["T_WHITESPACE"," ",264],"[","]",")",";",["T_WHITESPACE","\n\n    ",264],["T_COMMENT","\/\/ Test for only enabled links.\n",266],["T_WHITESPACE","    ",267],["T_VARIABLE","$link",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","treeStorage",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","load",267],"(",["T_CONSTANT_ENCAPSED_STRING","'test3'",267],")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$link",268],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",268],"]",["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_STRING","FALSE",268],";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","treeStorage",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","save",269],"(",["T_VARIABLE","$link",269],")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$link",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","treeStorage",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","load",270],"(",["T_CONSTANT_ENCAPSED_STRING","'test4'",270],")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$link",271],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",271],"]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","FALSE",271],";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","treeStorage",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","save",272],"(",["T_VARIABLE","$link",272],")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$link",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","treeStorage",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","load",273],"(",["T_CONSTANT_ENCAPSED_STRING","'test5'",273],")",";",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$link",274],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",274],"]",["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","FALSE",274],";",["T_WHITESPACE","\n    ",274],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","treeStorage",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","save",275],"(",["T_VARIABLE","$link",275],")",";",["T_WHITESPACE","\n\n    ",275],["T_VARIABLE","$parameters",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_NEW","new",277],["T_WHITESPACE"," ",277],["T_STRING","MenuTreeParameters",277],"(",")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$parameters",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","onlyEnabledLinks",278],"(",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$data",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","treeStorage",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","loadTreeData",279],"(",["T_CONSTANT_ENCAPSED_STRING","'tools'",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$parameters",279],")",";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertEqual",280],"(",["T_STRING","count",280],"(",["T_VARIABLE","$data",280],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",280],"]",")",",",["T_WHITESPACE"," ",280],["T_LNUMBER","1",280],")",";",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertEqual",281],"(",["T_VARIABLE","$data",281],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test1'",281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'definition'",281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",281],"]",",",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'test1'",281],")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","assertEqual",282],"(",["T_STRING","count",282],"(",["T_VARIABLE","$data",282],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",282],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test1'",282],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",282],"]",")",",",["T_WHITESPACE"," ",282],["T_LNUMBER","1",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertEqual",283],"(",["T_VARIABLE","$data",283],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test1'",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'definition'",283],"]","[",["T_CONSTANT_ENCAPSED_STRING","'id'",283],"]",",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'test2'",283],")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertEqual",284],"(",["T_VARIABLE","$data",284],"[",["T_CONSTANT_ENCAPSED_STRING","'tree'",284],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test1'",284],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",284],"]","[",["T_CONSTANT_ENCAPSED_STRING","'test2'",284],"]","[",["T_CONSTANT_ENCAPSED_STRING","'subtree'",284],"]",",",["T_WHITESPACE"," ",284],"[","]",")",";",["T_WHITESPACE","\n\n  ",284],"}",["T_WHITESPACE","\n\n  ",286],["T_DOC_COMMENT","\/**\n   * Tests finding the subtree height with content menu links.\n   *\/",288],["T_WHITESPACE","\n  ",290],["T_PUBLIC","public",291],["T_WHITESPACE"," ",291],["T_FUNCTION","function",291],["T_WHITESPACE"," ",291],["T_STRING","testSubtreeHeight",291],"(",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n    ",291],["T_COMMENT","\/\/ root\n",292],["T_WHITESPACE","    ",293],["T_COMMENT","\/\/ - child1\n",293],["T_WHITESPACE","    ",294],["T_COMMENT","\/\/ -- child2\n",294],["T_WHITESPACE","    ",295],["T_COMMENT","\/\/ --- child3\n",295],["T_WHITESPACE","    ",296],["T_COMMENT","\/\/ ---- child4\n",296],["T_WHITESPACE","    ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","addMenuLink",297],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",297],")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","addMenuLink",298],"(",["T_CONSTANT_ENCAPSED_STRING","'child1'",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'root'",298],")",";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","addMenuLink",299],"(",["T_CONSTANT_ENCAPSED_STRING","'child2'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'child1'",299],")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","addMenuLink",300],"(",["T_CONSTANT_ENCAPSED_STRING","'child3'",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'child2'",300],")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","addMenuLink",301],"(",["T_CONSTANT_ENCAPSED_STRING","'child4'",301],",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'child3'",301],")",";",["T_WHITESPACE","\n\n    ",301],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","assertEqual",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","treeStorage",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getSubtreeHeight",303],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",303],")",",",["T_WHITESPACE"," ",303],["T_LNUMBER","5",303],")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","assertEqual",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","treeStorage",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getSubtreeHeight",304],"(",["T_CONSTANT_ENCAPSED_STRING","'child1'",304],")",",",["T_WHITESPACE"," ",304],["T_LNUMBER","4",304],")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","assertEqual",305],"(",["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","treeStorage",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","getSubtreeHeight",305],"(",["T_CONSTANT_ENCAPSED_STRING","'child2'",305],")",",",["T_WHITESPACE"," ",305],["T_LNUMBER","3",305],")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","assertEqual",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","treeStorage",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getSubtreeHeight",306],"(",["T_CONSTANT_ENCAPSED_STRING","'child3'",306],")",",",["T_WHITESPACE"," ",306],["T_LNUMBER","2",306],")",";",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertEqual",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","treeStorage",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getSubtreeHeight",307],"(",["T_CONSTANT_ENCAPSED_STRING","'child4'",307],")",",",["T_WHITESPACE"," ",307],["T_LNUMBER","1",307],")",";",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n  ",308],["T_DOC_COMMENT","\/**\n   * Ensure hierarchy persists after a menu rebuild.\n   *\/",310],["T_WHITESPACE","\n  ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","testMenuRebuild",313],"(",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n    ",313],["T_COMMENT","\/\/ root\n",314],["T_WHITESPACE","    ",315],["T_COMMENT","\/\/ - child1\n",315],["T_WHITESPACE","    ",316],["T_COMMENT","\/\/ -- child2\n",316],["T_WHITESPACE","    ",317],["T_COMMENT","\/\/ --- child3\n",317],["T_WHITESPACE","    ",318],["T_COMMENT","\/\/ ---- child4\n",318],["T_WHITESPACE","    ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","addMenuLink",319],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",319],")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","addMenuLink",320],"(",["T_CONSTANT_ENCAPSED_STRING","'child1'",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'root'",320],")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","addMenuLink",321],"(",["T_CONSTANT_ENCAPSED_STRING","'child2'",321],",",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","'child1'",321],")",";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","addMenuLink",322],"(",["T_CONSTANT_ENCAPSED_STRING","'child3'",322],",",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'child2'",322],")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","addMenuLink",323],"(",["T_CONSTANT_ENCAPSED_STRING","'child4'",323],",",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'child3'",323],")",";",["T_WHITESPACE","\n\n    ",323],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","assertEqual",325],"(",["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","treeStorage",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","getSubtreeHeight",325],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",325],")",",",["T_WHITESPACE"," ",325],["T_LNUMBER","5",325],")",";",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","assertEqual",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","treeStorage",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getSubtreeHeight",326],"(",["T_CONSTANT_ENCAPSED_STRING","'child1'",326],")",",",["T_WHITESPACE"," ",326],["T_LNUMBER","4",326],")",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","assertEqual",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","treeStorage",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getSubtreeHeight",327],"(",["T_CONSTANT_ENCAPSED_STRING","'child2'",327],")",",",["T_WHITESPACE"," ",327],["T_LNUMBER","3",327],")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertEqual",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","treeStorage",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getSubtreeHeight",328],"(",["T_CONSTANT_ENCAPSED_STRING","'child3'",328],")",",",["T_WHITESPACE"," ",328],["T_LNUMBER","2",328],")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","assertEqual",329],"(",["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","treeStorage",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","getSubtreeHeight",329],"(",["T_CONSTANT_ENCAPSED_STRING","'child4'",329],")",",",["T_WHITESPACE"," ",329],["T_LNUMBER","1",329],")",";",["T_WHITESPACE","\n\n    ",329],["T_COMMENT","\/\/ Intentionally leave child3 out to mimic static or external links.\n",331],["T_WHITESPACE","    ",332],["T_VARIABLE","$definitions",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","treeStorage",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","loadMultiple",332],"(","[",["T_CONSTANT_ENCAPSED_STRING","'root'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'child1'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'child2'",332],",",["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'child4'",332],"]",")",";",["T_WHITESPACE","\n    ",332],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","treeStorage",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","rebuild",333],"(",["T_VARIABLE","$definitions",333],")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","assertEqual",334],"(",["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","treeStorage",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getSubtreeHeight",334],"(",["T_CONSTANT_ENCAPSED_STRING","'root'",334],")",",",["T_WHITESPACE"," ",334],["T_LNUMBER","5",334],")",";",["T_WHITESPACE","\n    ",334],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","assertEqual",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","treeStorage",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getSubtreeHeight",335],"(",["T_CONSTANT_ENCAPSED_STRING","'child1'",335],")",",",["T_WHITESPACE"," ",335],["T_LNUMBER","4",335],")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","assertEqual",336],"(",["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","treeStorage",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getSubtreeHeight",336],"(",["T_CONSTANT_ENCAPSED_STRING","'child2'",336],")",",",["T_WHITESPACE"," ",336],["T_LNUMBER","3",336],")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","assertEqual",337],"(",["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","treeStorage",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","getSubtreeHeight",337],"(",["T_CONSTANT_ENCAPSED_STRING","'child3'",337],")",",",["T_WHITESPACE"," ",337],["T_LNUMBER","2",337],")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertEqual",338],"(",["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","treeStorage",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getSubtreeHeight",338],"(",["T_CONSTANT_ENCAPSED_STRING","'child4'",338],")",",",["T_WHITESPACE"," ",338],["T_LNUMBER","1",338],")",";",["T_WHITESPACE","\n  ",338],"}",["T_WHITESPACE","\n\n  ",339],["T_DOC_COMMENT","\/**\n   * Tests MenuTreeStorage::loadByProperties().\n   *\/",341],["T_WHITESPACE","\n  ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","testLoadByProperties",344],"(",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$tests",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_WHITESPACE","\n      ",345],["T_ARRAY","array",346],"(",["T_CONSTANT_ENCAPSED_STRING","'foo'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'bar'",346],")",",",["T_WHITESPACE","\n      ",346],["T_ARRAY","array",347],"(",["T_LNUMBER","0",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'wrong'",347],")",",",["T_WHITESPACE","\n    ",347],")",";",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$message",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'An invalid property name throws an exception.'",349],";",["T_WHITESPACE","\n    ",349],["T_FOREACH","foreach",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$tests",350],["T_WHITESPACE"," ",350],["T_AS","as",350],["T_WHITESPACE"," ",350],["T_VARIABLE","$properties",350],")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n      ",350],["T_TRY","try",351],["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","treeStorage",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","loadByProperties",352],"(",["T_VARIABLE","$properties",352],")",";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","fail",353],"(",["T_VARIABLE","$message",353],")",";",["T_WHITESPACE","\n      ",353],"}",["T_WHITESPACE","\n      ",354],["T_CATCH","catch",355],["T_WHITESPACE"," ",355],"(",["T_NS_SEPARATOR","\\",355],["T_STRING","InvalidArgumentException",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$e",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n        ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","assertTrue",356],"(",["T_STRING","preg_match",356],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^An invalid property name, .+ was specified. Allowed property names are:\/'",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$e",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getMessage",356],"(",")",")",",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'Found expected exception message.'",356],")",";",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","pass",357],"(",["T_VARIABLE","$message",357],")",";",["T_WHITESPACE","\n      ",357],"}",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","addMenuLink",360],"(",["T_CONSTANT_ENCAPSED_STRING","'test_link.1'",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","''",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'test'",360],",",["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",")",",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'menu1'",360],")",";",["T_WHITESPACE","\n    ",360],["T_VARIABLE","$properties",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_ARRAY","array",361],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_name'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'menu1'",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$links",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","treeStorage",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","loadByProperties",362],"(",["T_VARIABLE","$properties",362],")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","assertEqual",363],"(",["T_CONSTANT_ENCAPSED_STRING","'menu1'",363],",",["T_WHITESPACE"," ",363],["T_VARIABLE","$links",363],"[",["T_CONSTANT_ENCAPSED_STRING","'test_link.1'",363],"]","[",["T_CONSTANT_ENCAPSED_STRING","'menu_name'",363],"]",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","assertEqual",364],"(",["T_CONSTANT_ENCAPSED_STRING","'test'",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$links",364],"[",["T_CONSTANT_ENCAPSED_STRING","'test_link.1'",364],"]","[",["T_CONSTANT_ENCAPSED_STRING","'route_name'",364],"]",")",";",["T_WHITESPACE","\n  ",364],"}",["T_WHITESPACE","\n\n  ",365],["T_DOC_COMMENT","\/**\n   * Adds a link with the given ID and supply defaults.\n   *\/",367],["T_WHITESPACE","\n  ",369],["T_PROTECTED","protected",370],["T_WHITESPACE"," ",370],["T_FUNCTION","function",370],["T_WHITESPACE"," ",370],["T_STRING","addMenuLink",370],"(",["T_VARIABLE","$id",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$parent",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","''",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$route_name",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'test'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$route_parameters",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",")",",",["T_WHITESPACE"," ",370],["T_VARIABLE","$menu_name",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'tools'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$extra",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$link",371],["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",["T_WHITESPACE","\n      ",371],["T_CONSTANT_ENCAPSED_STRING","'id'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$id",372],",",["T_WHITESPACE","\n      ",372],["T_CONSTANT_ENCAPSED_STRING","'menu_name'",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$menu_name",373],",",["T_WHITESPACE","\n      ",373],["T_CONSTANT_ENCAPSED_STRING","'route_name'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$route_name",374],",",["T_WHITESPACE","\n      ",374],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$route_parameters",375],",",["T_WHITESPACE","\n      ",375],["T_CONSTANT_ENCAPSED_STRING","'title'",376],["T_WHITESPACE"," ",376],["T_DOUBLE_ARROW","=>",376],["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'test'",376],",",["T_WHITESPACE","\n      ",376],["T_CONSTANT_ENCAPSED_STRING","'parent'",377],["T_WHITESPACE"," ",377],["T_DOUBLE_ARROW","=>",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$parent",377],",",["T_WHITESPACE","\n      ",377],["T_CONSTANT_ENCAPSED_STRING","'options'",378],["T_WHITESPACE"," ",378],["T_DOUBLE_ARROW","=>",378],["T_WHITESPACE"," ",378],["T_ARRAY","array",378],"(",")",",",["T_WHITESPACE","\n      ",378],["T_CONSTANT_ENCAPSED_STRING","'metadata'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_ARRAY","array",379],"(",")",",",["T_WHITESPACE","\n    ",379],")",["T_WHITESPACE"," ",380],"+",["T_WHITESPACE"," ",380],["T_VARIABLE","$extra",380],";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","treeStorage",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","save",381],"(",["T_VARIABLE","$link",381],")",";",["T_WHITESPACE","\n  ",381],"}",["T_WHITESPACE","\n\n  ",382],["T_DOC_COMMENT","\/**\n   * Moves the link with the given ID so it's under a new parent.\n   *\n   * @param string $id\n   *   The ID of the menu link to move.\n   * @param string $new_parent\n   *   The ID of the new parent link.\n   *\/",384],["T_WHITESPACE","\n  ",391],["T_PROTECTED","protected",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","moveMenuLink",392],"(",["T_VARIABLE","$id",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$new_parent",392],")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$menu_link",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","treeStorage",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","load",393],"(",["T_VARIABLE","$id",393],")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$menu_link",394],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",394],"]",["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$new_parent",394],";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","treeStorage",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","save",395],"(",["T_VARIABLE","$menu_link",395],")",";",["T_WHITESPACE","\n  ",395],"}",["T_WHITESPACE","\n\n  ",396],["T_DOC_COMMENT","\/**\n   * Tests that a link's stored representation matches the expected values.\n   *\n   * @param string $id\n   *   The ID of the menu link to test\n   * @param array $expected_properties\n   *   A keyed array of column names and values like has_children and depth.\n   * @param array $parents\n   *   An ordered array of the IDs of the menu links that are the parents.\n   * @param array $children\n   *   Array of child IDs that are visible (enabled == 1).\n   *\/",398],["T_WHITESPACE","\n  ",409],["T_PROTECTED","protected",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","assertMenuLink",410],"(",["T_VARIABLE","$id",410],",",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$expected_properties",410],",",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$parents",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",")",",",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$children",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",")",")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$query",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","connection",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","select",411],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_tree'",411],")",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$query",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","fields",412],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_tree'",412],")",";",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$query",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","condition",413],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$id",413],")",";",["T_WHITESPACE","\n    ",413],["T_FOREACH","foreach",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$expected_properties",414],["T_WHITESPACE"," ",414],["T_AS","as",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$field",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$value",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$query",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","condition",415],"(",["T_VARIABLE","$field",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$value",415],")",";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n    ",416],["T_VARIABLE","$all",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$query",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","execute",417],"(",")",["T_OBJECT_OPERATOR","->",417],["T_STRING","fetchAll",417],"(",["T_NS_SEPARATOR","\\",417],["T_STRING","PDO",417],["T_DOUBLE_COLON","::",417],["T_STRING","FETCH_ASSOC",417],")",";",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","assertEqual",418],"(",["T_STRING","count",418],"(",["T_VARIABLE","$all",418],")",",",["T_WHITESPACE"," ",418],["T_LNUMBER","1",418],",",["T_WHITESPACE"," ",418],"\"",["T_ENCAPSED_AND_WHITESPACE","Found link ",418],["T_VARIABLE","$id",418],["T_ENCAPSED_AND_WHITESPACE"," matching all the expected properties",418],"\"",")",";",["T_WHITESPACE","\n    ",418],["T_VARIABLE","$raw",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_STRING","reset",419],"(",["T_VARIABLE","$all",419],")",";",["T_WHITESPACE","\n\n    ",419],["T_COMMENT","\/\/ Put the current link onto the front.\n",421],["T_WHITESPACE","    ",422],["T_STRING","array_unshift",422],"(",["T_VARIABLE","$parents",422],",",["T_WHITESPACE"," ",422],["T_VARIABLE","$raw",422],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",422],"]",")",";",["T_WHITESPACE","\n\n    ",422],["T_VARIABLE","$query",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","connection",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","select",424],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_tree'",424],")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$query",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","fields",425],"(",["T_CONSTANT_ENCAPSED_STRING","'menu_tree'",425],",",["T_WHITESPACE"," ",425],["T_ARRAY","array",425],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",425],",",["T_WHITESPACE"," ",425],["T_CONSTANT_ENCAPSED_STRING","'mlid'",425],")",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$query",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","condition",426],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$parents",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'IN'",426],")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$found_parents",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$query",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","execute",427],"(",")",["T_OBJECT_OPERATOR","->",427],["T_STRING","fetchAllKeyed",427],"(",["T_LNUMBER","0",427],",",["T_WHITESPACE"," ",427],["T_LNUMBER","1",427],")",";",["T_WHITESPACE","\n\n    ",427],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","assertEqual",429],"(",["T_STRING","count",429],"(",["T_VARIABLE","$parents",429],")",",",["T_WHITESPACE"," ",429],["T_STRING","count",429],"(",["T_VARIABLE","$found_parents",429],")",",",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'Found expected number of parents'",429],")",";",["T_WHITESPACE","\n    ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","assertEqual",430],"(",["T_VARIABLE","$raw",430],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",430],"]",",",["T_WHITESPACE"," ",430],["T_STRING","count",430],"(",["T_VARIABLE","$found_parents",430],")",",",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'Number of parents is the same as the depth'",430],")",";",["T_WHITESPACE","\n\n    ",430],["T_VARIABLE","$materialized_path",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","treeStorage",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","getRootPathIds",432],"(",["T_VARIABLE","$id",432],")",";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","assertEqual",433],"(",["T_STRING","array_values",433],"(",["T_VARIABLE","$materialized_path",433],")",",",["T_WHITESPACE"," ",433],["T_STRING","array_values",433],"(",["T_VARIABLE","$parents",433],")",",",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'Parents match the materialized path'",433],")",";",["T_WHITESPACE","\n    ",433],["T_COMMENT","\/\/ Check that the selected mlid values of the parents are in the correct\n",434],["T_WHITESPACE","    ",435],["T_COMMENT","\/\/ column, including the link's own.\n",435],["T_WHITESPACE","    ",436],["T_FOR","for",436],["T_WHITESPACE"," ",436],"(",["T_VARIABLE","$i",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$raw",436],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",436],"]",";",["T_WHITESPACE"," ",436],["T_VARIABLE","$i",436],["T_WHITESPACE"," ",436],["T_IS_GREATER_OR_EQUAL",">=",436],["T_WHITESPACE"," ",436],["T_LNUMBER","1",436],";",["T_WHITESPACE"," ",436],["T_VARIABLE","$i",436],["T_DEC","--",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n      ",436],["T_VARIABLE","$parent_id",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","array_shift",437],"(",["T_VARIABLE","$parents",437],")",";",["T_WHITESPACE","\n      ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertEqual",438],"(",["T_VARIABLE","$raw",438],"[","\"",["T_ENCAPSED_AND_WHITESPACE","p",438],["T_VARIABLE","$i",438],"\"","]",",",["T_WHITESPACE"," ",438],["T_VARIABLE","$found_parents",438],"[",["T_VARIABLE","$parent_id",438],"]",",",["T_WHITESPACE"," ",438],"\"",["T_ENCAPSED_AND_WHITESPACE","mlid of parent matches at column p",438],["T_VARIABLE","$i",438],"\"",")",";",["T_WHITESPACE","\n    ",438],"}",["T_WHITESPACE","\n    ",439],["T_FOR","for",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$i",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$raw",440],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",440],"]",["T_WHITESPACE"," ",440],"+",["T_WHITESPACE"," ",440],["T_LNUMBER","1",440],";",["T_WHITESPACE"," ",440],["T_VARIABLE","$i",440],["T_WHITESPACE"," ",440],["T_IS_SMALLER_OR_EQUAL","<=",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","treeStorage",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","maxDepth",440],"(",")",";",["T_WHITESPACE"," ",440],["T_VARIABLE","$i",440],["T_INC","++",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n      ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","assertEqual",441],"(",["T_VARIABLE","$raw",441],"[","\"",["T_ENCAPSED_AND_WHITESPACE","p",441],["T_VARIABLE","$i",441],"\"","]",",",["T_WHITESPACE"," ",441],["T_LNUMBER","0",441],",",["T_WHITESPACE"," ",441],"\"",["T_ENCAPSED_AND_WHITESPACE","parent is 0 at column p",441],["T_VARIABLE","$i",441],["T_ENCAPSED_AND_WHITESPACE"," greater than depth",441],"\"",")",";",["T_WHITESPACE","\n    ",441],"}",["T_WHITESPACE","\n    ",442],["T_IF","if",443],["T_WHITESPACE"," ",443],"(",["T_VARIABLE","$parents",443],")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n      ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","assertEqual",444],"(",["T_VARIABLE","$raw",444],"[",["T_CONSTANT_ENCAPSED_STRING","'parent'",444],"]",",",["T_WHITESPACE"," ",444],["T_STRING","end",444],"(",["T_VARIABLE","$parents",444],")",",",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'Ensure that the parent field is set properly'",444],")",";",["T_WHITESPACE","\n    ",444],"}",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$found_children",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_STRING","array_keys",446],"(",["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","treeStorage",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","loadAllChildren",446],"(",["T_VARIABLE","$id",446],")",")",";",["T_WHITESPACE","\n    ",446],["T_COMMENT","\/\/ We need both these checks since the 2nd will pass if there are extra\n",447],["T_WHITESPACE","    ",448],["T_COMMENT","\/\/ IDs loaded in $found_children.\n",448],["T_WHITESPACE","    ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","assertEqual",449],"(",["T_STRING","count",449],"(",["T_VARIABLE","$children",449],")",",",["T_WHITESPACE"," ",449],["T_STRING","count",449],"(",["T_VARIABLE","$found_children",449],")",",",["T_WHITESPACE"," ",449],"\"",["T_ENCAPSED_AND_WHITESPACE","Found expected number of children for ",449],["T_VARIABLE","$id",449],"\"",")",";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","assertEqual",450],"(",["T_STRING","array_intersect",450],"(",["T_VARIABLE","$children",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$found_children",450],")",",",["T_WHITESPACE"," ",450],["T_VARIABLE","$children",450],",",["T_WHITESPACE"," ",450],["T_CONSTANT_ENCAPSED_STRING","'Child IDs match'",450],")",";",["T_WHITESPACE","\n  ",450],"}",["T_WHITESPACE","\n\n",451],"}",["T_WHITESPACE","\n",453]]
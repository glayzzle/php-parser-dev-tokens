[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests that the prefix info for a database schema is correct.\n *\n * @group Database\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","PrefixInfoTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","DatabaseTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Tests that DatabaseSchema::getPrefixInfo() returns the right database.\n   *\n   * We are testing if the return array of the method\n   * \\Drupal\\Core\\Database\\Driver\\mysql\\Schema::getPrefixInfo(). This return\n   * array is a keyed array with info about amongst other things the database.\n   * The other two by Drupal core supported databases do not have this variable\n   * set in the return array.\n   *\/",14],["T_WHITESPACE","\n  ",22],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","testGetPrefixInfo",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$connection_info",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","Database",24],["T_DOUBLE_COLON","::",24],["T_STRING","getConnectionInfo",24],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",24],")",";",["T_WHITESPACE","\n    ",24],["T_IF","if",25],["T_WHITESPACE"," ",25],"(",["T_VARIABLE","$connection_info",25],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",25],"]","[",["T_CONSTANT_ENCAPSED_STRING","'driver'",25],"]",["T_WHITESPACE"," ",25],["T_IS_EQUAL","==",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'mysql'",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n      ",25],["T_COMMENT","\/\/ Copy the default connection info to the 'extra' key.\n",26],["T_WHITESPACE","      ",27],["T_STRING","Database",27],["T_DOUBLE_COLON","::",27],["T_STRING","addConnectionInfo",27],"(",["T_CONSTANT_ENCAPSED_STRING","'extra'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'default'",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$connection_info",27],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",27],"]",")",";",["T_WHITESPACE","\n\n      ",27],["T_VARIABLE","$db1_connection",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","Database",29],["T_DOUBLE_COLON","::",29],["T_STRING","getConnection",29],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'default'",29],")",";",["T_WHITESPACE","\n      ",29],["T_VARIABLE","$db1_schema",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$db1_connection",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","schema",30],"(",")",";",["T_WHITESPACE","\n      ",30],["T_VARIABLE","$db2_connection",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","Database",31],["T_DOUBLE_COLON","::",31],["T_STRING","getConnection",31],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'extra'",31],")",";",["T_WHITESPACE","\n\n      ",31],["T_COMMENT","\/\/ Get the prefix info for the first databse.\n",33],["T_WHITESPACE","      ",34],["T_VARIABLE","$method",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_NEW","new",34],["T_WHITESPACE"," ",34],["T_NS_SEPARATOR","\\",34],["T_STRING","ReflectionMethod",34],"(",["T_VARIABLE","$db1_schema",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'getPrefixInfo'",34],")",";",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$method",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","setAccessible",35],"(",["T_STRING","TRUE",35],")",";",["T_WHITESPACE","\n      ",35],["T_VARIABLE","$db1_info",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$method",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","invoke",36],"(",["T_VARIABLE","$db1_schema",36],")",";",["T_WHITESPACE","\n\n      ",36],["T_COMMENT","\/\/ We change the database after opening the connection, so as to prevent\n",38],["T_WHITESPACE","      ",39],["T_COMMENT","\/\/ connecting to a non-existent database.\n",39],["T_WHITESPACE","      ",40],["T_VARIABLE","$reflection",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_NEW","new",40],["T_WHITESPACE"," ",40],["T_NS_SEPARATOR","\\",40],["T_STRING","ReflectionObject",40],"(",["T_VARIABLE","$db2_connection",40],")",";",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$property",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$reflection",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getProperty",41],"(",["T_CONSTANT_ENCAPSED_STRING","'connectionOptions'",41],")",";",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$property",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setAccessible",42],"(",["T_STRING","TRUE",42],")",";",["T_WHITESPACE","\n      ",42],["T_VARIABLE","$connection_info",43],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",43],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",43],"]",["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'foobar'",43],";",["T_WHITESPACE","\n      ",43],["T_VARIABLE","$property",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setValue",44],"(",["T_VARIABLE","$db2_connection",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$connection_info",44],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",44],"]",")",";",["T_WHITESPACE","\n\n      ",44],["T_COMMENT","\/\/ For testing purposes, we also change the database info.\n",46],["T_WHITESPACE","      ",47],["T_VARIABLE","$reflection_class",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_NEW","new",47],["T_WHITESPACE"," ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","ReflectionClass",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Database\\Database'",47],")",";",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$property",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$reflection_class",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getProperty",48],"(",["T_CONSTANT_ENCAPSED_STRING","'databaseInfo'",48],")",";",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$property",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","setAccessible",49],"(",["T_STRING","TRUE",49],")",";",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$info",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$property",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getValue",50],"(",")",";",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$info",51],"[",["T_CONSTANT_ENCAPSED_STRING","'extra'",51],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",51],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",51],"]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'foobar'",51],";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$property",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setValue",52],"(",["T_STRING","NULL",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$info",52],")",";",["T_WHITESPACE","\n\n      ",52],["T_VARIABLE","$extra_info",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","Database",54],["T_DOUBLE_COLON","::",54],["T_STRING","getConnectionInfo",54],"(",["T_CONSTANT_ENCAPSED_STRING","'extra'",54],")",";",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertSame",55],"(",["T_VARIABLE","$extra_info",55],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",55],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",55],"]",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'foobar'",55],")",";",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$db2_schema",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$db2_connection",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","schema",56],"(",")",";",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$db2_info",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$method",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","invoke",57],"(",["T_VARIABLE","$db2_schema",57],")",";",["T_WHITESPACE","\n\n      ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertNotSame",59],"(",["T_VARIABLE","$db2_info",59],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",59],"]",",",["T_WHITESPACE"," ",59],["T_VARIABLE","$db1_info",59],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",59],"]",",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'Each target connection has a different database.'",59],")",";",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertSame",60],"(",["T_VARIABLE","$db2_info",60],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",60],"]",",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'foobar'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'The new profile has a different database.'",60],")",";",["T_WHITESPACE","\n\n      ",60],["T_STRING","Database",62],["T_DOUBLE_COLON","::",62],["T_STRING","removeConnection",62],"(",["T_CONSTANT_ENCAPSED_STRING","'extra'",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n",64],"}",["T_WHITESPACE","\n",66]]
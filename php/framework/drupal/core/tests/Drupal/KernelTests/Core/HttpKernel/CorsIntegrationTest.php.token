[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","HttpKernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DependencyInjection",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ContainerBuilder",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencyInjection",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ServiceModifierInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KernelTestBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpFoundation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Request",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpFoundation",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Response",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests CORS provided by Drupal.\n *\n * @see sites\/default\/default.services.yml\n * @see \\Asm89\\Stack\\Cors\n * @see \\Asm89\\Stack\\CorsService\n *\n * @group Http\n *\/",11],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","CorsIntegrationTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","KernelTestBase",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","ServiceModifierInterface",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The cors container configuration.\n   *\n   * @var null|array\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$corsConfig",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","NULL",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_STATIC","static",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$modules",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],"[",["T_CONSTANT_ENCAPSED_STRING","'system'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",32],"]",";",["T_WHITESPACE","\n\n  ",32],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","setUp",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","setUp",35],"(",")",";",["T_WHITESPACE","\n\n    ",35],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","installSchema",37],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'router'",37],")",";",["T_WHITESPACE","\n    ",37],["T_NS_SEPARATOR","\\",38],["T_STRING","Drupal",38],["T_DOUBLE_COLON","::",38],["T_STRING","service",38],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","rebuild",38],"(",")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","testCrossSiteRequest",41],"(",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Test default parameters.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$cors_config",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","container",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getParameter",44],"(",["T_CONSTANT_ENCAPSED_STRING","'cors.config'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertSame",45],"(",["T_STRING","FALSE",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$cors_config",45],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",45],"]",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertSame",46],"(","[","]",",",["T_WHITESPACE"," ",46],["T_VARIABLE","$cors_config",46],"[",["T_CONSTANT_ENCAPSED_STRING","'allowedHeaders'",46],"]",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertSame",47],"(","[","]",",",["T_WHITESPACE"," ",47],["T_VARIABLE","$cors_config",47],"[",["T_CONSTANT_ENCAPSED_STRING","'allowedMethods'",47],"]",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertSame",48],"(","[",["T_CONSTANT_ENCAPSED_STRING","'*'",48],"]",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$cors_config",48],"[",["T_CONSTANT_ENCAPSED_STRING","'allowedOrigins'",48],"]",")",";",["T_WHITESPACE","\n\n    ",48],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertSame",50],"(",["T_STRING","FALSE",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$cors_config",50],"[",["T_CONSTANT_ENCAPSED_STRING","'exposedHeaders'",50],"]",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertSame",51],"(",["T_STRING","FALSE",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$cors_config",51],"[",["T_CONSTANT_ENCAPSED_STRING","'maxAge'",51],"]",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertSame",52],"(",["T_STRING","FALSE",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$cors_config",52],"[",["T_CONSTANT_ENCAPSED_STRING","'supportsCredentials'",52],"]",")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Configure the CORS stack to allow a specific set of origins, but don't\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ specify an origin header.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$request",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","Request",56],["T_DOUBLE_COLON","::",56],["T_STRING","create",56],"(",["T_CONSTANT_ENCAPSED_STRING","'\/test-page'",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$request",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","headers",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","set",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Origin'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","''",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$cors_config",58],"[",["T_CONSTANT_ENCAPSED_STRING","'enabled'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","TRUE",58],";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$cors_config",59],"[",["T_CONSTANT_ENCAPSED_STRING","'allowedOrigins'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com'",59],"]",";",["T_WHITESPACE","\n\n    ",59],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","corsConfig",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$cors_config",61],";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","container",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'kernel'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","rebuildContainer",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_DOC_COMMENT","\/** @var \\Symfony\\Component\\HttpFoundation\\Response $response *\/",64],["T_WHITESPACE","\n    ",64],["T_VARIABLE","$response",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","container",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_CONSTANT_ENCAPSED_STRING","'http_kernel'",65],")",["T_OBJECT_OPERATOR","->",65],["T_STRING","handle",65],"(",["T_VARIABLE","$request",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertEquals",66],"(",["T_STRING","Response",66],["T_DOUBLE_COLON","::",66],["T_STRING","HTTP_FORBIDDEN",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$response",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getStatusCode",66],"(",")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertEquals",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Not allowed.'",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$response",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getContent",67],"(",")",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Specify a valid origin.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$request",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","headers",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","set",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Origin'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com'",70],")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$response",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","container",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","get",71],"(",["T_CONSTANT_ENCAPSED_STRING","'http_kernel'",71],")",["T_OBJECT_OPERATOR","->",71],["T_STRING","handle",71],"(",["T_VARIABLE","$request",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEquals",72],"(",["T_STRING","Response",72],["T_DOUBLE_COLON","::",72],["T_STRING","HTTP_OK",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$response",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","getStatusCode",72],"(",")",")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",75],["T_WHITESPACE","\n  ",77],["T_PUBLIC","public",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","alter",78],"(",["T_STRING","ContainerBuilder",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$container",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n    ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_ISSET","isset",79],"(",["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","corsConfig",79],")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$container",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setParameter",80],"(",["T_CONSTANT_ENCAPSED_STRING","'cors.config'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","corsConfig",80],")",";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n",82],"}",["T_WHITESPACE","\n",84]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SchemaCheckTestTrait",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityStorageException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","BaseFieldDefinition",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldStorageDefinitionInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","field",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Tests",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityReference",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityReferenceTestTrait",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","field",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FieldStorageConfig",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","user",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Entity",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Role",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","user",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Entity",14],["T_NS_SEPARATOR","\\",14],["T_STRING","User",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","user",15],["T_NS_SEPARATOR","\\",15],["T_STRING","RoleInterface",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","user",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UserInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Drupal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","entity_test",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Entity",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EntityTestStringId",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Tests for the entity reference field.\n *\n * @group Entity\n *\/",19],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","EntityReferenceFieldTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","EntityKernelTestBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","SchemaCheckTestTrait",26],";",["T_WHITESPACE","\n  ",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","EntityReferenceTestTrait",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The entity type used in this test.\n   *\n   * @var string\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$entityType",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The entity type that is being referenced.\n   *\n   * @var string\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$referencedEntityType",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev'",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The bundle used in this test.\n   *\n   * @var string\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$bundle",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * The name of the field used in this test.\n   *\n   * @var string\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$fieldName",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'field_test'",55],";",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",57],["T_WHITESPACE","\n  ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_STATIC","static",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$modules",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference_test'",62],")",";",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",64],["T_WHITESPACE","\n  ",66],["T_PROTECTED","protected",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","setUp",67],"(",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_STRING","parent",68],["T_DOUBLE_COLON","::",68],["T_STRING","setUp",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","installEntitySchema",70],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_rev'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Create a field.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","createEntityReferenceField",73],"(",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","entityType",74],",",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","bundle",75],",",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","fieldName",76],",",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'Field test'",77],",",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","referencedEntityType",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'default'",79],",",["T_WHITESPACE","\n      ",79],["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","bundle",80],")",")",",",["T_WHITESPACE","\n      ",80],["T_STRING","FieldStorageDefinitionInterface",81],["T_DOUBLE_COLON","::",81],["T_STRING","CARDINALITY_UNLIMITED",81],["T_WHITESPACE","\n    ",81],")",";",["T_WHITESPACE","\n\n  ",82],"}",["T_WHITESPACE","\n\n  ",84],["T_DOC_COMMENT","\/**\n   * Tests reference field validation.\n   *\/",86],["T_WHITESPACE","\n  ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","testEntityReferenceFieldValidation",89],"(",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n    ",89],["T_COMMENT","\/\/ Test a valid reference.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$referenced_entity",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","container",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","get",91],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",91],")",["T_WHITESPACE","\n      ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","getStorage",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","referencedEntityType",92],")",["T_WHITESPACE","\n      ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","create",93],"(",["T_ARRAY","array",93],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","bundle",93],")",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$referenced_entity",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","save",94],"(",")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$entity",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","container",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","get",96],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",96],")",["T_WHITESPACE","\n      ",96],["T_OBJECT_OPERATOR","->",97],["T_STRING","getStorage",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","entityType",97],")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","create",98],"(",["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","bundle",98],")",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$entity",99],["T_OBJECT_OPERATOR","->",99],"{",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","fieldName",99],"}",["T_OBJECT_OPERATOR","->",99],["T_STRING","target_id",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$referenced_entity",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","id",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$violations",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$entity",100],["T_OBJECT_OPERATOR","->",100],"{",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","fieldName",100],"}",["T_OBJECT_OPERATOR","->",100],["T_STRING","validate",100],"(",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$violations",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","count",101],"(",")",",",["T_WHITESPACE"," ",101],["T_LNUMBER","0",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Validation passes.'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Test an invalid reference.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$entity",104],["T_OBJECT_OPERATOR","->",104],"{",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","fieldName",104],"}",["T_OBJECT_OPERATOR","->",104],["T_STRING","target_id",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_LNUMBER","9999",104],";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$violations",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$entity",105],["T_OBJECT_OPERATOR","->",105],"{",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","fieldName",105],"}",["T_OBJECT_OPERATOR","->",105],["T_STRING","validate",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertEqual",106],"(",["T_VARIABLE","$violations",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","count",106],"(",")",",",["T_WHITESPACE"," ",106],["T_LNUMBER","1",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Validation throws a violation.'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertEqual",107],"(",["T_VARIABLE","$violations",107],"[",["T_LNUMBER","0",107],"]",["T_OBJECT_OPERATOR","->",107],["T_STRING","getMessage",107],"(",")",",",["T_WHITESPACE"," ",107],["T_STRING","t",107],"(",["T_CONSTANT_ENCAPSED_STRING","'The referenced entity (%type: %id) does not exist.'",107],",",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","referencedEntityType",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'%id'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_LNUMBER","9999",107],")",")",")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Test a non-referenceable bundle.\n",109],["T_WHITESPACE","    ",110],["T_STRING","entity_test_create_bundle",110],"(",["T_CONSTANT_ENCAPSED_STRING","'non_referenceable'",110],",",["T_WHITESPACE"," ",110],["T_STRING","NULL",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","referencedEntityType",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$referenced_entity",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","entity_create",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","referencedEntityType",111],",",["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'non_referenceable'",111],")",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$referenced_entity",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","save",112],"(",")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$entity",113],["T_OBJECT_OPERATOR","->",113],"{",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","fieldName",113],"}",["T_OBJECT_OPERATOR","->",113],["T_STRING","target_id",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$referenced_entity",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","id",113],"(",")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$violations",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$entity",114],["T_OBJECT_OPERATOR","->",114],"{",["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","fieldName",114],"}",["T_OBJECT_OPERATOR","->",114],["T_STRING","validate",114],"(",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertEqual",115],"(",["T_VARIABLE","$violations",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","count",115],"(",")",",",["T_WHITESPACE"," ",115],["T_LNUMBER","1",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Validation throws a violation.'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertEqual",116],"(",["T_VARIABLE","$violations",116],"[",["T_LNUMBER","0",116],"]",["T_OBJECT_OPERATOR","->",116],["T_STRING","getMessage",116],"(",")",",",["T_WHITESPACE"," ",116],["T_STRING","t",116],"(",["T_CONSTANT_ENCAPSED_STRING","'This entity (%type: %id) cannot be referenced.'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'%type'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","referencedEntityType",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'%id'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$referenced_entity",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","id",116],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Tests the multiple target entities loader.\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","testReferencedEntitiesMultipleLoad",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_COMMENT","\/\/ Create the parent entity.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$entity",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","container",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","get",124],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",124],")",["T_WHITESPACE","\n      ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","getStorage",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","entityType",125],")",["T_WHITESPACE","\n      ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","create",126],"(",["T_ARRAY","array",126],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","bundle",126],")",")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Create three target entities and attach them to parent field.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$target_entities",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$reference_field",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_FOR","for",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$i",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_LNUMBER","0",131],";",["T_WHITESPACE"," ",131],["T_VARIABLE","$i",131],["T_WHITESPACE"," ",131],"<",["T_WHITESPACE"," ",131],["T_LNUMBER","3",131],";",["T_WHITESPACE"," ",131],["T_VARIABLE","$i",131],["T_INC","++",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$target_entity",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","container",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",132],")",["T_WHITESPACE","\n        ",132],["T_OBJECT_OPERATOR","->",133],["T_STRING","getStorage",133],"(",["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","referencedEntityType",133],")",["T_WHITESPACE","\n        ",133],["T_OBJECT_OPERATOR","->",134],["T_STRING","create",134],"(",["T_ARRAY","array",134],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","bundle",134],")",")",";",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$target_entity",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","save",135],"(",")",";",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$target_entities",136],"[","]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$target_entity",136],";",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$reference_field",137],"[","]","[",["T_CONSTANT_ENCAPSED_STRING","'target_id'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$target_entity",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","id",137],"(",")",";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Also attach a non-existent entity and a NULL target id.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$reference_field",141],"[",["T_LNUMBER","3",141],"]","[",["T_CONSTANT_ENCAPSED_STRING","'target_id'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_LNUMBER","99999",141],";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$target_entities",142],"[",["T_LNUMBER","3",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_STRING","NULL",142],";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$reference_field",143],"[",["T_LNUMBER","4",143],"]","[",["T_CONSTANT_ENCAPSED_STRING","'target_id'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","NULL",143],";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$target_entities",144],"[",["T_LNUMBER","4",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","NULL",144],";",["T_WHITESPACE","\n\n    ",144],["T_COMMENT","\/\/ Attach the first created target entity as the sixth item ($delta == 5) of\n",146],["T_WHITESPACE","    ",147],["T_COMMENT","\/\/ the parent entity field. We want to test the case when the same target\n",147],["T_WHITESPACE","    ",148],["T_COMMENT","\/\/ entity is referenced twice (or more times) in the same entity reference\n",148],["T_WHITESPACE","    ",149],["T_COMMENT","\/\/ field.\n",149],["T_WHITESPACE","    ",150],["T_VARIABLE","$reference_field",150],"[",["T_LNUMBER","5",150],"]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$reference_field",150],"[",["T_LNUMBER","0",150],"]",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$target_entities",151],"[",["T_LNUMBER","5",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$target_entities",151],"[",["T_LNUMBER","0",151],"]",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Create a new target entity that is not saved, thus testing the\n",153],["T_WHITESPACE","    ",154],["T_COMMENT","\/\/ \"autocreate\" feature.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$target_entity_unsaved",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","container",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","get",155],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",155],")",["T_WHITESPACE","\n      ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","getStorage",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","referencedEntityType",156],")",["T_WHITESPACE","\n      ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","create",157],"(",["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","bundle",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'name'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","randomString",157],"(",")",")",")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$reference_field",158],"[",["T_LNUMBER","6",158],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity'",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$target_entity_unsaved",158],";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$target_entities",159],"[",["T_LNUMBER","6",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$target_entity_unsaved",159],";",["T_WHITESPACE","\n\n    ",159],["T_COMMENT","\/\/ Set the field value.\n",161],["T_WHITESPACE","    ",162],["T_VARIABLE","$entity",162],["T_OBJECT_OPERATOR","->",162],"{",["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","fieldName",162],"}",["T_OBJECT_OPERATOR","->",162],["T_STRING","setValue",162],"(",["T_VARIABLE","$reference_field",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ Load the target entities using EntityReferenceField::referencedEntities().\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$entities",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity",165],["T_OBJECT_OPERATOR","->",165],"{",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","fieldName",165],"}",["T_OBJECT_OPERATOR","->",165],["T_STRING","referencedEntities",165],"(",")",";",["T_WHITESPACE","\n\n    ",165],["T_COMMENT","\/\/ Test returned entities:\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ - Deltas must be preserved.\n",168],["T_WHITESPACE","    ",169],["T_COMMENT","\/\/ - Non-existent entities must not be retrieved in target entities result.\n",169],["T_WHITESPACE","    ",170],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$target_entities",170],["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$delta",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$target_entity",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n      ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_EMPTY","empty",171],"(",["T_VARIABLE","$target_entity",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_VARIABLE","$target_entity",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","isNew",172],"(",")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n          ",172],["T_COMMENT","\/\/ There must be an entity in the loaded set having the same id for\n",173],["T_WHITESPACE","          ",174],["T_COMMENT","\/\/ the same delta.\n",174],["T_WHITESPACE","          ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertEqual",175],"(",["T_VARIABLE","$target_entity",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","id",175],"(",")",",",["T_WHITESPACE"," ",175],["T_VARIABLE","$entities",175],"[",["T_VARIABLE","$delta",175],"]",["T_OBJECT_OPERATOR","->",175],["T_STRING","id",175],"(",")",")",";",["T_WHITESPACE","\n        ",175],"}",["T_WHITESPACE","\n        ",176],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n          ",177],["T_COMMENT","\/\/ For entities that were not yet saved, there must an entity in the\n",178],["T_WHITESPACE","          ",179],["T_COMMENT","\/\/ loaded set having the same label for the same delta.\n",179],["T_WHITESPACE","          ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEqual",180],"(",["T_VARIABLE","$target_entity",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","label",180],"(",")",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$entities",180],"[",["T_VARIABLE","$delta",180],"]",["T_OBJECT_OPERATOR","->",180],["T_STRING","label",180],"(",")",")",";",["T_WHITESPACE","\n        ",180],"}",["T_WHITESPACE","\n      ",181],"}",["T_WHITESPACE","\n      ",182],["T_ELSE","else",183],["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n        ",183],["T_COMMENT","\/\/ A non-existent or NULL entity target id must not return any item in\n",184],["T_WHITESPACE","        ",185],["T_COMMENT","\/\/ the target entities set.\n",185],["T_WHITESPACE","        ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","assertFalse",186],"(",["T_ISSET","isset",186],"(",["T_VARIABLE","$entities",186],"[",["T_VARIABLE","$delta",186],"]",")",")",";",["T_WHITESPACE","\n      ",186],"}",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n  ",188],"}",["T_WHITESPACE","\n\n  ",189],["T_DOC_COMMENT","\/**\n   * Tests referencing entities with string IDs.\n   *\/",191],["T_WHITESPACE","\n  ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","testReferencedEntitiesStringId",194],"(",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$field_name",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_string_id'",195],";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","installEntitySchema",196],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_string_id'",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","createEntityReferenceField",197],"(",["T_WHITESPACE","\n      ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","entityType",198],",",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","bundle",199],",",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$field_name",200],",",["T_WHITESPACE","\n      ",200],["T_CONSTANT_ENCAPSED_STRING","'Field test'",201],",",["T_WHITESPACE","\n      ",201],["T_CONSTANT_ENCAPSED_STRING","'entity_test_string_id'",202],",",["T_WHITESPACE","\n      ",202],["T_CONSTANT_ENCAPSED_STRING","'default'",203],",",["T_WHITESPACE","\n      ",203],["T_ARRAY","array",204],"(",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","bundle",204],")",")",",",["T_WHITESPACE","\n      ",204],["T_STRING","FieldStorageDefinitionInterface",205],["T_DOUBLE_COLON","::",205],["T_STRING","CARDINALITY_UNLIMITED",205],["T_WHITESPACE","\n    ",205],")",";",["T_WHITESPACE","\n    ",206],["T_COMMENT","\/\/ Create the parent entity.\n",207],["T_WHITESPACE","    ",208],["T_VARIABLE","$entity",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","container",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","get",208],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",208],")",["T_WHITESPACE","\n      ",208],["T_OBJECT_OPERATOR","->",209],["T_STRING","getStorage",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","entityType",209],")",["T_WHITESPACE","\n      ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","create",210],"(",["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","bundle",210],")",")",";",["T_WHITESPACE","\n\n    ",210],["T_COMMENT","\/\/ Create the default target entity.\n",212],["T_WHITESPACE","    ",213],["T_VARIABLE","$target_entity",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","EntityTestStringId",213],["T_DOUBLE_COLON","::",213],["T_STRING","create",213],"(","[",["T_WHITESPACE","\n      ",213],["T_CONSTANT_ENCAPSED_STRING","'id'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","randomString",214],"(",")",",",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'type'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","bundle",215],["T_WHITESPACE","\n    ",215],"]",")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$target_entity",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","save",217],"(",")",";",["T_WHITESPACE","\n\n    ",217],["T_COMMENT","\/\/ Set the field value.\n",219],["T_WHITESPACE","    ",220],["T_VARIABLE","$entity",220],["T_OBJECT_OPERATOR","->",220],"{",["T_VARIABLE","$field_name",220],"}",["T_OBJECT_OPERATOR","->",220],["T_STRING","setValue",220],"(",["T_ARRAY","array",220],"(",["T_ARRAY","array",220],"(",["T_CONSTANT_ENCAPSED_STRING","'target_id'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$target_entity",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","id",220],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",220],["T_COMMENT","\/\/ Load the target entities using EntityReferenceField::referencedEntities().\n",222],["T_WHITESPACE","    ",223],["T_VARIABLE","$entities",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$entity",223],["T_OBJECT_OPERATOR","->",223],"{",["T_VARIABLE","$field_name",223],"}",["T_OBJECT_OPERATOR","->",223],["T_STRING","referencedEntities",223],"(",")",";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","assertEqual",224],"(",["T_VARIABLE","$entities",224],"[",["T_LNUMBER","0",224],"]",["T_OBJECT_OPERATOR","->",224],["T_STRING","id",224],"(",")",",",["T_WHITESPACE"," ",224],["T_VARIABLE","$target_entity",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","id",224],"(",")",")",";",["T_WHITESPACE","\n\n    ",224],["T_COMMENT","\/\/ Test that a string ID works as a default value and the field's config\n",226],["T_WHITESPACE","    ",227],["T_COMMENT","\/\/ schema is correct.\n",227],["T_WHITESPACE","    ",228],["T_VARIABLE","$field",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","FieldConfig",228],["T_DOUBLE_COLON","::",228],["T_STRING","loadByName",228],"(",["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","entityType",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","bundle",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$field_name",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$field",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setDefaultValue",229],"(",["T_VARIABLE","$target_entity",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","id",229],"(",")",")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$field",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","save",230],"(",")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertConfigSchema",231],"(",["T_NS_SEPARATOR","\\",231],["T_STRING","Drupal",231],["T_DOUBLE_COLON","::",231],["T_STRING","service",231],"(",["T_CONSTANT_ENCAPSED_STRING","'config.typed'",231],")",",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'field.field.'",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_VARIABLE","$field",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","id",231],"(",")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$field",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","toArray",231],"(",")",")",";",["T_WHITESPACE","\n\n    ",231],["T_COMMENT","\/\/ Test that the default value works.\n",233],["T_WHITESPACE","    ",234],["T_VARIABLE","$entity",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","container",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","get",234],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",234],")",["T_WHITESPACE","\n      ",234],["T_OBJECT_OPERATOR","->",235],["T_STRING","getStorage",235],"(",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","entityType",235],")",["T_WHITESPACE","\n      ",235],["T_OBJECT_OPERATOR","->",236],["T_STRING","create",236],"(",["T_ARRAY","array",236],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","bundle",236],")",")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$entities",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$entity",237],["T_OBJECT_OPERATOR","->",237],"{",["T_VARIABLE","$field_name",237],"}",["T_OBJECT_OPERATOR","->",237],["T_STRING","referencedEntities",237],"(",")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertEqual",238],"(",["T_VARIABLE","$entities",238],"[",["T_LNUMBER","0",238],"]",["T_OBJECT_OPERATOR","->",238],["T_STRING","id",238],"(",")",",",["T_WHITESPACE"," ",238],["T_VARIABLE","$target_entity",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","id",238],"(",")",")",";",["T_WHITESPACE","\n  ",238],"}",["T_WHITESPACE","\n\n  ",239],["T_DOC_COMMENT","\/**\n   * Tests all the possible ways to autocreate an entity via the API.\n   *\/",241],["T_WHITESPACE","\n  ",243],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","testAutocreateApi",244],"(",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$entity",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","entityManager",245],["T_WHITESPACE","\n      ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","getStorage",246],"(",["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","entityType",246],")",["T_WHITESPACE","\n      ",246],["T_OBJECT_OPERATOR","->",247],["T_STRING","create",247],"(",["T_ARRAY","array",247],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","randomString",247],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",247],["T_COMMENT","\/\/ Test content entity autocreation.\n",249],["T_WHITESPACE","    ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertUserAutocreate",250],"(",["T_VARIABLE","$entity",250],",",["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],"(",["T_STRING","EntityInterface",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$entity",250],",",["T_WHITESPACE"," ",250],["T_STRING","UserInterface",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$user",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n      ",250],["T_VARIABLE","$entity",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","set",251],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",251],",",["T_WHITESPACE"," ",251],["T_VARIABLE","$user",251],")",";",["T_WHITESPACE","\n    ",251],"}",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","assertUserAutocreate",253],"(",["T_VARIABLE","$entity",253],",",["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],"(",["T_STRING","EntityInterface",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$entity",253],",",["T_WHITESPACE"," ",253],["T_STRING","UserInterface",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$user",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n      ",253],["T_VARIABLE","$entity",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","set",254],"(",["T_CONSTANT_ENCAPSED_STRING","'user_id'",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$user",254],",",["T_WHITESPACE"," ",254],["T_STRING","FALSE",254],")",";",["T_WHITESPACE","\n    ",254],"}",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertUserAutocreate",256],"(",["T_VARIABLE","$entity",256],",",["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],"(",["T_STRING","EntityInterface",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$entity",256],",",["T_WHITESPACE"," ",256],["T_STRING","UserInterface",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$user",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n      ",256],["T_VARIABLE","$entity",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","user_id",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","setValue",257],"(",["T_VARIABLE","$user",257],")",";",["T_WHITESPACE","\n    ",257],"}",")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","assertUserAutocreate",259],"(",["T_VARIABLE","$entity",259],",",["T_WHITESPACE"," ",259],["T_FUNCTION","function",259],"(",["T_STRING","EntityInterface",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$entity",259],",",["T_WHITESPACE"," ",259],["T_STRING","UserInterface",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$user",259],")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n      ",259],["T_VARIABLE","$entity",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","user_id",260],"[",["T_LNUMBER","0",260],"]",["T_OBJECT_OPERATOR","->",260],["T_STRING","get",260],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","setValue",260],"(",["T_VARIABLE","$user",260],")",";",["T_WHITESPACE","\n    ",260],"}",")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","assertUserAutocreate",262],"(",["T_VARIABLE","$entity",262],",",["T_WHITESPACE"," ",262],["T_FUNCTION","function",262],"(",["T_STRING","EntityInterface",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$entity",262],",",["T_WHITESPACE"," ",262],["T_STRING","UserInterface",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$user",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n      ",262],["T_VARIABLE","$entity",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","user_id",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","setValue",263],"(",["T_ARRAY","array",263],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$user",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","'target_id'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_STRING","NULL",263],")",")",";",["T_WHITESPACE","\n    ",263],"}",")",";",["T_WHITESPACE","\n    ",264],["T_TRY","try",265],["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n      ",265],["T_VARIABLE","$message",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'Setting both the entity and an invalid target_id property fails.'",266],";",["T_WHITESPACE","\n      ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertUserAutocreate",267],"(",["T_VARIABLE","$entity",267],",",["T_WHITESPACE"," ",267],["T_FUNCTION","function",267],"(",["T_STRING","EntityInterface",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$entity",267],",",["T_WHITESPACE"," ",267],["T_STRING","UserInterface",267],["T_WHITESPACE"," ",267],["T_VARIABLE","$user",267],")",["T_WHITESPACE"," ",267],"{",["T_WHITESPACE","\n        ",267],["T_VARIABLE","$user",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","save",268],"(",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$entity",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","user_id",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","setValue",269],"(",["T_ARRAY","array",269],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$user",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'target_id'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","generateRandomEntityId",269],"(",")",")",")",";",["T_WHITESPACE","\n      ",269],"}",")",";",["T_WHITESPACE","\n      ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","fail",271],"(",["T_VARIABLE","$message",271],")",";",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n    ",272],["T_CATCH","catch",273],["T_WHITESPACE"," ",273],"(",["T_NS_SEPARATOR","\\",273],["T_STRING","InvalidArgumentException",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$e",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n      ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","pass",274],"(",["T_VARIABLE","$message",274],")",";",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","assertUserAutocreate",276],"(",["T_VARIABLE","$entity",276],",",["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],"(",["T_STRING","EntityInterface",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$entity",276],",",["T_WHITESPACE"," ",276],["T_STRING","UserInterface",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$user",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n      ",276],["T_VARIABLE","$entity",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","user_id",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$user",277],";",["T_WHITESPACE","\n    ",277],"}",")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","assertUserAutocreate",279],"(",["T_VARIABLE","$entity",279],",",["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],"(",["T_STRING","EntityInterface",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$entity",279],",",["T_WHITESPACE"," ",279],["T_STRING","UserInterface",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$user",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n      ",279],["T_VARIABLE","$entity",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","user_id",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","entity",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$user",280],";",["T_WHITESPACE","\n    ",280],"}",")",";",["T_WHITESPACE","\n\n    ",281],["T_COMMENT","\/\/ Test config entity autocreation.\n",283],["T_WHITESPACE","    ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertUserRoleAutocreate",284],"(",["T_VARIABLE","$entity",284],",",["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],"(",["T_STRING","EntityInterface",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$entity",284],",",["T_WHITESPACE"," ",284],["T_STRING","RoleInterface",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$role",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n      ",284],["T_VARIABLE","$entity",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","set",285],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$role",285],")",";",["T_WHITESPACE","\n    ",285],"}",")",";",["T_WHITESPACE","\n    ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","assertUserRoleAutocreate",287],"(",["T_VARIABLE","$entity",287],",",["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],"(",["T_STRING","EntityInterface",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$entity",287],",",["T_WHITESPACE"," ",287],["T_STRING","RoleInterface",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$role",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n      ",287],["T_VARIABLE","$entity",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","set",288],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$role",288],",",["T_WHITESPACE"," ",288],["T_STRING","FALSE",288],")",";",["T_WHITESPACE","\n    ",288],"}",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","assertUserRoleAutocreate",290],"(",["T_VARIABLE","$entity",290],",",["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],"(",["T_STRING","EntityInterface",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$entity",290],",",["T_WHITESPACE"," ",290],["T_STRING","RoleInterface",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$role",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n      ",290],["T_VARIABLE","$entity",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","user_role",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","setValue",291],"(",["T_VARIABLE","$role",291],")",";",["T_WHITESPACE","\n    ",291],"}",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertUserRoleAutocreate",293],"(",["T_VARIABLE","$entity",293],",",["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],"(",["T_STRING","EntityInterface",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$entity",293],",",["T_WHITESPACE"," ",293],["T_STRING","RoleInterface",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$role",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n      ",293],["T_VARIABLE","$entity",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","user_role",294],"[",["T_LNUMBER","0",294],"]",["T_OBJECT_OPERATOR","->",294],["T_STRING","get",294],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",294],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","setValue",294],"(",["T_VARIABLE","$role",294],")",";",["T_WHITESPACE","\n    ",294],"}",")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertUserRoleAutocreate",296],"(",["T_VARIABLE","$entity",296],",",["T_WHITESPACE"," ",296],["T_FUNCTION","function",296],"(",["T_STRING","EntityInterface",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$entity",296],",",["T_WHITESPACE"," ",296],["T_STRING","RoleInterface",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$role",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n      ",296],["T_VARIABLE","$entity",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","user_role",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","setValue",297],"(",["T_ARRAY","array",297],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$role",297],",",["T_WHITESPACE"," ",297],["T_CONSTANT_ENCAPSED_STRING","'target_id'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_STRING","NULL",297],")",")",";",["T_WHITESPACE","\n    ",297],"}",")",";",["T_WHITESPACE","\n    ",298],["T_TRY","try",299],["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$message",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'Setting both the entity and an invalid target_id property fails.'",300],";",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","assertUserRoleAutocreate",301],"(",["T_VARIABLE","$entity",301],",",["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],"(",["T_STRING","EntityInterface",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$entity",301],",",["T_WHITESPACE"," ",301],["T_STRING","RoleInterface",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$role",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n        ",301],["T_VARIABLE","$role",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","save",302],"(",")",";",["T_WHITESPACE","\n        ",302],["T_VARIABLE","$entity",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","user_role",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","setValue",303],"(",["T_ARRAY","array",303],"(",["T_CONSTANT_ENCAPSED_STRING","'entity'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$role",303],",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'target_id'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","generateRandomEntityId",303],"(",["T_STRING","TRUE",303],")",")",")",";",["T_WHITESPACE","\n      ",303],"}",")",";",["T_WHITESPACE","\n      ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","fail",305],"(",["T_VARIABLE","$message",305],")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n    ",306],["T_CATCH","catch",307],["T_WHITESPACE"," ",307],"(",["T_NS_SEPARATOR","\\",307],["T_STRING","InvalidArgumentException",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$e",307],")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n      ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","pass",308],"(",["T_VARIABLE","$message",308],")",";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n    ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","assertUserRoleAutocreate",310],"(",["T_VARIABLE","$entity",310],",",["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],"(",["T_STRING","EntityInterface",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$entity",310],",",["T_WHITESPACE"," ",310],["T_STRING","RoleInterface",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$role",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$entity",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","user_role",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$role",311],";",["T_WHITESPACE","\n    ",311],"}",")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","assertUserRoleAutocreate",313],"(",["T_VARIABLE","$entity",313],",",["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],"(",["T_STRING","EntityInterface",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$entity",313],",",["T_WHITESPACE"," ",313],["T_STRING","RoleInterface",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$role",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n      ",313],["T_VARIABLE","$entity",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","user_role",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","entity",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_VARIABLE","$role",314],";",["T_WHITESPACE","\n    ",314],"}",")",";",["T_WHITESPACE","\n\n    ",315],["T_COMMENT","\/\/ Test target entity saving after setting it as new.\n",317],["T_WHITESPACE","    ",318],["T_VARIABLE","$storage",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","entityManager",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getStorage",318],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",318],")",";",["T_WHITESPACE","\n    ",318],["T_VARIABLE","$user_id",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","generateRandomEntityId",319],"(",")",";",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$user",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$storage",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","create",320],"(",["T_ARRAY","array",320],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$user_id",320],",",["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'name'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","randomString",320],"(",")",")",")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$entity",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","user_id",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$user",321],";",["T_WHITESPACE","\n    ",321],["T_VARIABLE","$user",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","save",322],"(",")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$entity",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","save",323],"(",")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","assertEqual",324],"(",["T_VARIABLE","$entity",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","user_id",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","target_id",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$user",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","id",324],"(",")",")",";",["T_WHITESPACE","\n  ",324],"}",["T_WHITESPACE","\n\n  ",325],["T_DOC_COMMENT","\/**\n   * Asserts that the setter callback performs autocreation for users.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The referencing entity.\n   * @param $setter_callback\n   *   A callback setting the target entity on the referencing entity.\n   *\n   * @return bool\n   *   TRUE if the user was autocreated, FALSE otherwise.\n   *\/",327],["T_WHITESPACE","\n  ",337],["T_PROTECTED","protected",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","assertUserAutocreate",338],"(",["T_STRING","EntityInterface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$entity",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$setter_callback",338],")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$storage",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","entityManager",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getStorage",339],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",339],")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$user_id",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","generateRandomEntityId",340],"(",")",";",["T_WHITESPACE","\n    ",340],["T_VARIABLE","$user",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$storage",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","create",341],"(",["T_ARRAY","array",341],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$user_id",341],",",["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'name'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","randomString",341],"(",")",")",")",";",["T_WHITESPACE","\n    ",341],["T_VARIABLE","$setter_callback",342],"(",["T_VARIABLE","$entity",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$user",342],")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$entity",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","save",343],"(",")",";",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$storage",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","resetCache",344],"(",")",";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$user",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_STRING","User",345],["T_DOUBLE_COLON","::",345],["T_STRING","load",345],"(",["T_VARIABLE","$user_id",345],")",";",["T_WHITESPACE","\n    ",345],["T_RETURN","return",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","assertEqual",346],"(",["T_VARIABLE","$entity",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","user_id",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","target_id",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$user",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","id",346],"(",")",")",";",["T_WHITESPACE","\n  ",346],"}",["T_WHITESPACE","\n\n  ",347],["T_DOC_COMMENT","\/**\n   * Asserts that the setter callback performs autocreation for user roles.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The referencing entity.\n   * @param $setter_callback\n   *   A callback setting the target entity on the referencing entity.\n   *\n   * @return bool\n   *   TRUE if the user was autocreated, FALSE otherwise.\n   *\/",349],["T_WHITESPACE","\n  ",359],["T_PROTECTED","protected",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","assertUserRoleAutocreate",360],"(",["T_STRING","EntityInterface",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$entity",360],",",["T_WHITESPACE"," ",360],["T_VARIABLE","$setter_callback",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n    ",360],["T_VARIABLE","$storage",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","entityManager",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getStorage",361],"(",["T_CONSTANT_ENCAPSED_STRING","'user_role'",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$role_id",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","generateRandomEntityId",362],"(",["T_STRING","TRUE",362],")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$role",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$storage",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","create",363],"(",["T_ARRAY","array",363],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$role_id",363],",",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'label'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","randomString",363],"(",")",")",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$setter_callback",364],"(",["T_VARIABLE","$entity",364],",",["T_WHITESPACE"," ",364],["T_VARIABLE","$role",364],")",";",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$entity",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","save",365],"(",")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$storage",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","resetCache",366],"(",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$role",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_STRING","Role",367],["T_DOUBLE_COLON","::",367],["T_STRING","load",367],"(",["T_VARIABLE","$role_id",367],")",";",["T_WHITESPACE","\n    ",367],["T_RETURN","return",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertEqual",368],"(",["T_VARIABLE","$entity",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","user_role",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","target_id",368],",",["T_WHITESPACE"," ",368],["T_VARIABLE","$role",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","id",368],"(",")",")",";",["T_WHITESPACE","\n  ",368],"}",["T_WHITESPACE","\n\n  ",369],["T_DOC_COMMENT","\/**\n   * Tests that the target entity is not unnecessarily loaded.\n   *\/",371],["T_WHITESPACE","\n  ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","testTargetEntityNoLoad",374],"(",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n    ",374],["T_COMMENT","\/\/ Setup a test entity type with an entity reference field to itself. We use\n",375],["T_WHITESPACE","    ",376],["T_COMMENT","\/\/ a special storage class throwing exceptions when a load operation is\n",376],["T_WHITESPACE","    ",377],["T_COMMENT","\/\/ triggered to be able to detect them.\n",377],["T_WHITESPACE","    ",378],["T_VARIABLE","$entity_type",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_CLONE","clone",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","entityManager",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getDefinition",378],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update'",378],")",";",["T_WHITESPACE","\n    ",378],["T_VARIABLE","$entity_type",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","setHandlerClass",379],"(",["T_CONSTANT_ENCAPSED_STRING","'storage'",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\entity_test\\EntityTestNoLoadStorage'",379],")",";",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","state",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","set",380],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update.entity_type'",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$entity_type",380],")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$definitions",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_ARRAY","array",381],"(",["T_WHITESPACE","\n      ",381],["T_CONSTANT_ENCAPSED_STRING","'target_reference'",382],["T_WHITESPACE"," ",382],["T_DOUBLE_ARROW","=>",382],["T_WHITESPACE"," ",382],["T_STRING","BaseFieldDefinition",382],["T_DOUBLE_COLON","::",382],["T_STRING","create",382],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",382],")",["T_WHITESPACE","\n        ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","setSetting",383],"(",["T_CONSTANT_ENCAPSED_STRING","'target_type'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$entity_type",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","id",383],"(",")",")",["T_WHITESPACE","\n        ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","setSetting",384],"(",["T_CONSTANT_ENCAPSED_STRING","'handler'",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","'default'",384],")",["T_WHITESPACE","\n    ",384],")",";",["T_WHITESPACE","\n    ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","state",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","set",386],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_update.additional_base_field_definitions'",386],",",["T_WHITESPACE"," ",386],["T_VARIABLE","$definitions",386],")",";",["T_WHITESPACE","\n    ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","entityManager",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","clearCachedDefinitions",387],"(",")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","installEntitySchema",388],"(",["T_VARIABLE","$entity_type",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","id",388],"(",")",")",";",["T_WHITESPACE","\n\n    ",388],["T_COMMENT","\/\/ Create the target entity.\n",390],["T_WHITESPACE","    ",391],["T_VARIABLE","$storage",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","entityManager",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","getStorage",391],"(",["T_VARIABLE","$entity_type",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","id",391],"(",")",")",";",["T_WHITESPACE","\n    ",391],["T_VARIABLE","$target_id",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","generateRandomEntityId",392],"(",")",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$target",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$storage",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","create",393],"(",["T_ARRAY","array",393],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$target_id",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'name'",393],["T_WHITESPACE"," ",393],["T_DOUBLE_ARROW","=>",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","randomString",393],"(",")",")",")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$target",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","save",394],"(",")",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","assertEqual",395],"(",["T_VARIABLE","$target_id",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$target",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","id",395],"(",")",",",["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'The target entity has a random identifier.'",395],")",";",["T_WHITESPACE","\n\n    ",395],["T_COMMENT","\/\/ Check that populating the reference with an existing target id does not\n",397],["T_WHITESPACE","    ",398],["T_COMMENT","\/\/ trigger a load operation.\n",398],["T_WHITESPACE","    ",399],["T_VARIABLE","$message",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'The target entity was not loaded.'",399],";",["T_WHITESPACE","\n    ",399],["T_TRY","try",400],["T_WHITESPACE"," ",400],"{",["T_WHITESPACE","\n      ",400],["T_VARIABLE","$entity",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","entityManager",401],["T_WHITESPACE","\n        ",401],["T_OBJECT_OPERATOR","->",402],["T_STRING","getStorage",402],"(",["T_VARIABLE","$entity_type",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","id",402],"(",")",")",["T_WHITESPACE","\n        ",402],["T_OBJECT_OPERATOR","->",403],["T_STRING","create",403],"(",["T_ARRAY","array",403],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","randomString",403],"(",")",")",")",";",["T_WHITESPACE","\n      ",403],["T_VARIABLE","$entity",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","target_reference",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$target_id",404],";",["T_WHITESPACE","\n      ",404],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","pass",405],"(",["T_VARIABLE","$message",405],")",";",["T_WHITESPACE","\n    ",405],"}",["T_WHITESPACE","\n    ",406],["T_CATCH","catch",407],["T_WHITESPACE"," ",407],"(",["T_STRING","EntityStorageException",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$e",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n      ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","fail",408],"(",["T_VARIABLE","$message",408],")",";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_COMMENT","\/\/ Check that the storage actually triggers the expected exception when\n",411],["T_WHITESPACE","    ",412],["T_COMMENT","\/\/ trying to load the target entity.\n",412],["T_WHITESPACE","    ",413],["T_VARIABLE","$message",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'An exception is thrown when trying to load the target entity'",413],";",["T_WHITESPACE","\n    ",413],["T_TRY","try",414],["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$storage",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","load",415],"(",["T_VARIABLE","$target_id",415],")",";",["T_WHITESPACE","\n      ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","fail",416],"(",["T_VARIABLE","$message",416],")",";",["T_WHITESPACE","\n    ",416],"}",["T_WHITESPACE","\n    ",417],["T_CATCH","catch",418],["T_WHITESPACE"," ",418],"(",["T_STRING","EntityStorageException",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$e",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n      ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","pass",419],"(",["T_VARIABLE","$message",419],")",";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n  ",420],"}",["T_WHITESPACE","\n\n  ",421],["T_DOC_COMMENT","\/**\n   * Tests the dependencies entity reference fields are created with.\n   *\/",423],["T_WHITESPACE","\n  ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","testEntityReferenceFieldDependencies",426],"(",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$field_name",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'user_reference_field'",427],";",["T_WHITESPACE","\n    ",427],["T_VARIABLE","$entity_type",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",428],";",["T_WHITESPACE","\n\n    ",428],["T_VARIABLE","$field_storage",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_STRING","FieldStorageConfig",430],["T_DOUBLE_COLON","::",430],["T_STRING","create",430],"(","[",["T_WHITESPACE","\n      ",430],["T_CONSTANT_ENCAPSED_STRING","'field_name'",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$field_name",431],",",["T_WHITESPACE","\n      ",431],["T_CONSTANT_ENCAPSED_STRING","'type'",432],["T_WHITESPACE"," ",432],["T_DOUBLE_ARROW","=>",432],["T_WHITESPACE"," ",432],["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",432],",",["T_WHITESPACE","\n      ",432],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",433],["T_WHITESPACE"," ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_VARIABLE","$entity_type",433],",",["T_WHITESPACE","\n      ",433],["T_CONSTANT_ENCAPSED_STRING","'settings'",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],"[",["T_WHITESPACE","\n        ",434],["T_CONSTANT_ENCAPSED_STRING","'target_type'",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_CONSTANT_ENCAPSED_STRING","'user'",435],",",["T_WHITESPACE","\n      ",435],"]",",",["T_WHITESPACE","\n    ",436],"]",")",";",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$field_storage",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","save",438],"(",")",";",["T_WHITESPACE","\n    ",438],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","assertEqual",439],"(","[",["T_CONSTANT_ENCAPSED_STRING","'module'",439],["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",439],",",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'user'",439],"]","]",",",["T_WHITESPACE"," ",439],["T_VARIABLE","$field_storage",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getDependencies",439],"(",")",")",";",["T_WHITESPACE","\n\n    ",439],["T_VARIABLE","$field",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","FieldConfig",441],["T_DOUBLE_COLON","::",441],["T_STRING","create",441],"(","[",["T_WHITESPACE","\n      ",441],["T_CONSTANT_ENCAPSED_STRING","'field_name'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$field_name",442],",",["T_WHITESPACE","\n      ",442],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_VARIABLE","$entity_type",443],",",["T_WHITESPACE","\n      ",443],["T_CONSTANT_ENCAPSED_STRING","'bundle'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",444],",",["T_WHITESPACE","\n      ",444],["T_CONSTANT_ENCAPSED_STRING","'label'",445],["T_WHITESPACE"," ",445],["T_DOUBLE_ARROW","=>",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$field_name",445],",",["T_WHITESPACE","\n      ",445],["T_CONSTANT_ENCAPSED_STRING","'settings'",446],["T_WHITESPACE"," ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],"[",["T_WHITESPACE","\n        ",446],["T_CONSTANT_ENCAPSED_STRING","'handler'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'default'",447],",",["T_WHITESPACE","\n      ",447],"]",",",["T_WHITESPACE","\n    ",448],"]",")",";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$field",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","save",450],"(",")",";",["T_WHITESPACE","\n    ",450],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","assertEqual",451],"(","[",["T_CONSTANT_ENCAPSED_STRING","'config'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],"[",["T_CONSTANT_ENCAPSED_STRING","'field.storage.entity_test.user_reference_field'",451],"]",",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'module'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",451],"]","]",",",["T_WHITESPACE"," ",451],["T_VARIABLE","$field",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","getDependencies",451],"(",")",")",";",["T_WHITESPACE","\n  ",451],"}",["T_WHITESPACE","\n\n",452],"}",["T_WHITESPACE","\n",454]]
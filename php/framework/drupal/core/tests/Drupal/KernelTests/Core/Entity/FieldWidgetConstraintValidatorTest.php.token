[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SafeMarkup",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormState",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","entity_test",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityTestCompositeConstraint",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KernelTests",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KernelTestBase",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests validation constraints for FieldWidgetConstraintValidatorTest.\n *\n * @group Entity\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","FieldWidgetConstraintValidatorTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","KernelTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$modules",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_ARRAY","array",18],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'field'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'user'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'system'",18],")",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","setUp",24],"(",")",";",["T_WHITESPACE","\n\n    ",24],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","installSchema",26],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",26],",",["T_WHITESPACE"," ",26],"[",["T_CONSTANT_ENCAPSED_STRING","'key_value'",26],"]",")",";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","container",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","get",27],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",27],")",["T_OBJECT_OPERATOR","->",27],["T_STRING","rebuild",27],"(",")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","installEntitySchema",29],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",29],")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","installEntitySchema",30],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_composite_constraint'",30],")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Tests widget constraint validation.\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testValidation",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$entity_type",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'entity_test_constraint_violation'",37],";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$entity",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","container",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","get",38],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",38],")",["T_WHITESPACE","\n      ",38],["T_OBJECT_OPERATOR","->",39],["T_STRING","getStorage",39],"(",["T_VARIABLE","$entity_type",39],")",["T_WHITESPACE","\n      ",39],["T_OBJECT_OPERATOR","->",40],["T_STRING","create",40],"(",["T_ARRAY","array",40],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_LNUMBER","1",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'revision_id'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_LNUMBER","1",40],")",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$display",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","entity_get_form_display",41],"(",["T_VARIABLE","$entity_type",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$entity_type",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'default'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$form",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$form_state",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","FormState",43],"(",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$display",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","buildForm",44],"(",["T_VARIABLE","$entity",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$form",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$form_state",44],")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Pretend the form has been built.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$form_state",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","setFormObject",47],"(",["T_NS_SEPARATOR","\\",47],["T_STRING","Drupal",47],["T_DOUBLE_COLON","::",47],["T_STRING","entityManager",47],"(",")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getFormObject",47],"(",["T_VARIABLE","$entity_type",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'default'",47],")",")",";",["T_WHITESPACE","\n    ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Drupal",48],["T_DOUBLE_COLON","::",48],["T_STRING","formBuilder",48],"(",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","prepareForm",48],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_entity_form'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$form",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$form_state",48],")",";",["T_WHITESPACE","\n    ",48],["T_NS_SEPARATOR","\\",49],["T_STRING","Drupal",49],["T_DOUBLE_COLON","::",49],["T_STRING","formBuilder",49],"(",")",["T_OBJECT_OPERATOR","->",49],["T_STRING","processForm",49],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_entity_form'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$form",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$form_state",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Validate the field constraint.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$form_state",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getFormObject",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","setEntity",52],"(",["T_VARIABLE","$entity",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","setFormDisplay",52],"(",["T_VARIABLE","$display",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$form_state",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$entity",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$form_state",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getFormObject",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","buildEntity",53],"(",["T_VARIABLE","$form",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$form_state",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$display",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","validateFormValues",54],"(",["T_VARIABLE","$entity",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$form",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$form_state",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_VARIABLE","$errors",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$form_state",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getErrors",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertEqual",57],"(",["T_VARIABLE","$errors",57],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",57],"]",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Widget constraint has failed.'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Constraint violation is generated correctly'",57],")",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * Gets the form errors for a given entity.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity\n   * @param array $hidden_fields\n   *   (optional) A list of hidden fields.\n   *\n   * @return array\n   *   The form errors.\n   *\/",60],["T_WHITESPACE","\n  ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","getErrorsForEntity",71],"(",["T_STRING","EntityInterface",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$entity",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$hidden_fields",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],"[","]",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$entity_type_id",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'entity_test_composite_constraint'",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$display",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","entity_get_form_display",73],"(",["T_VARIABLE","$entity_type_id",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$entity_type_id",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'default'",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$hidden_fields",75],["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$hidden_field",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$display",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","removeComponent",76],"(",["T_VARIABLE","$hidden_field",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_VARIABLE","$form",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$form_state",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NEW","new",80],["T_WHITESPACE"," ",80],["T_STRING","FormState",80],"(",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$display",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","buildForm",81],"(",["T_VARIABLE","$entity",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$form",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$form_state",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_VARIABLE","$form_state",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","setFormObject",83],"(",["T_NS_SEPARATOR","\\",83],["T_STRING","Drupal",83],["T_DOUBLE_COLON","::",83],["T_STRING","entityManager",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getFormObject",83],"(",["T_VARIABLE","$entity_type_id",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'default'",83],")",")",";",["T_WHITESPACE","\n    ",83],["T_NS_SEPARATOR","\\",84],["T_STRING","Drupal",84],["T_DOUBLE_COLON","::",84],["T_STRING","formBuilder",84],"(",")",["T_OBJECT_OPERATOR","->",84],["T_STRING","prepareForm",84],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_entity_form'",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$form",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$form_state",84],")",";",["T_WHITESPACE","\n    ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Drupal",85],["T_DOUBLE_COLON","::",85],["T_STRING","formBuilder",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","processForm",85],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_entity_form'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$form",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$form_state",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Validate the field constraint.\n",87],["T_WHITESPACE","    ",88],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityFormInterface $form_object *\/",88],["T_WHITESPACE","\n    ",88],["T_VARIABLE","$form_object",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$form_state",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getFormObject",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$form_object",90],["T_WHITESPACE","\n      ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","setEntity",91],"(",["T_VARIABLE","$entity",91],")",["T_WHITESPACE","\n      ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","setFormDisplay",92],"(",["T_VARIABLE","$display",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$form_state",92],")",["T_WHITESPACE","\n      ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","validateForm",93],"(",["T_VARIABLE","$form",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$form_state",93],")",";",["T_WHITESPACE","\n\n    ",93],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$form_state",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getErrors",95],"(",")",";",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * Tests widget constraint validation with composite constraints.\n   *\/",98],["T_WHITESPACE","\n  ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","testValidationWithCompositeConstraint",101],"(",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_COMMENT","\/\/ First provide a valid value, this should cause no validation.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$entity",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","EntityTestCompositeConstraint",103],["T_DOUBLE_COLON","::",103],["T_STRING","create",103],"(","[",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'name'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'valid-value'",104],",",["T_WHITESPACE","\n    ",104],"]",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$entity",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","save",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_VARIABLE","$errors",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getErrorsForEntity",108],"(",["T_VARIABLE","$entity",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertFalse",109],"(",["T_ISSET","isset",109],"(",["T_VARIABLE","$errors",109],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",109],"]",")",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertFalse",110],"(",["T_ISSET","isset",110],"(",["T_VARIABLE","$errors",110],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",110],"]",")",")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Provide an invalid value for the name field.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$entity",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","EntityTestCompositeConstraint",113],["T_DOUBLE_COLON","::",113],["T_STRING","create",113],"(","[",["T_WHITESPACE","\n      ",113],["T_CONSTANT_ENCAPSED_STRING","'name'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'failure-field-name'",114],",",["T_WHITESPACE","\n    ",114],"]",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$errors",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getErrorsForEntity",116],"(",["T_VARIABLE","$entity",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertTrue",117],"(",["T_ISSET","isset",117],"(",["T_VARIABLE","$errors",117],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",117],"]",")",")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertFalse",118],"(",["T_ISSET","isset",118],"(",["T_VARIABLE","$errors",118],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",118],"]",")",")",";",["T_WHITESPACE","\n\n    ",118],["T_COMMENT","\/\/ Hide the second field (type) and ensure the validation still happens. The\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ error message appears on the first field (name).\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$entity",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","EntityTestCompositeConstraint",122],["T_DOUBLE_COLON","::",122],["T_STRING","create",122],"(","[",["T_WHITESPACE","\n      ",122],["T_CONSTANT_ENCAPSED_STRING","'name'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'failure-field-name'",123],",",["T_WHITESPACE","\n    ",123],"]",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$errors",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getErrorsForEntity",125],"(",["T_VARIABLE","$entity",125],",",["T_WHITESPACE"," ",125],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",125],"]",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertTrue",126],"(",["T_ISSET","isset",126],"(",["T_VARIABLE","$errors",126],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",126],"]",")",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertFalse",127],"(",["T_ISSET","isset",127],"(",["T_VARIABLE","$errors",127],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",127],"]",")",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Provide a violation again, but this time hide the first field (name).\n",129],["T_WHITESPACE","    ",130],["T_COMMENT","\/\/ Ensure that the validation still happens and the error message is moved\n",130],["T_WHITESPACE","    ",131],["T_COMMENT","\/\/ from the field to the second field and have a custom error message.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$entity",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","EntityTestCompositeConstraint",132],["T_DOUBLE_COLON","::",132],["T_STRING","create",132],"(","[",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'name'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'failure-field-name'",133],",",["T_WHITESPACE","\n    ",133],"]",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$errors",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getErrorsForEntity",135],"(",["T_VARIABLE","$entity",135],",",["T_WHITESPACE"," ",135],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",135],"]",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertFalse",136],"(",["T_ISSET","isset",136],"(",["T_VARIABLE","$errors",136],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",136],"]",")",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertTrue",137],"(",["T_ISSET","isset",137],"(",["T_VARIABLE","$errors",137],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",137],"]",")",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertEqual",138],"(",["T_VARIABLE","$errors",138],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",138],"]",",",["T_WHITESPACE"," ",138],["T_STRING","SafeMarkup",138],["T_DOUBLE_COLON","::",138],["T_STRING","format",138],"(",["T_CONSTANT_ENCAPSED_STRING","'The validation failed because the value conflicts with the value in %field_name, which you cannot access.'",138],",",["T_WHITESPACE"," ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'%field_name'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'name'",138],"]",")",")",";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * Tests entity level constraint validation.\n   *\/",141],["T_WHITESPACE","\n  ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","testEntityLevelConstraintValidation",144],"(",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$entity",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","EntityTestCompositeConstraint",145],["T_DOUBLE_COLON","::",145],["T_STRING","create",145],"(","[",["T_WHITESPACE","\n      ",145],["T_CONSTANT_ENCAPSED_STRING","'name'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'entity-level-violation'",146],["T_WHITESPACE","\n    ",146],"]",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$entity",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","save",148],"(",")",";",["T_WHITESPACE","\n\n    ",148],["T_VARIABLE","$errors",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getErrorsForEntity",150],"(",["T_VARIABLE","$entity",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertEqual",151],"(",["T_VARIABLE","$errors",151],"[",["T_CONSTANT_ENCAPSED_STRING","''",151],"]",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'Entity level validation'",151],")",";",["T_WHITESPACE","\n  ",151],"}",["T_WHITESPACE","\n\n",152],"}",["T_WHITESPACE","\n",154]]
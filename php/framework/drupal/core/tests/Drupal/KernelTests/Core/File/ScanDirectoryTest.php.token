[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KernelTests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","File",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the file_scan_directory() function.\n *\n * @group File\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","ScanDirectoryTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","FileTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$modules",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'file_test'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * @var string\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$path",22],";",["T_WHITESPACE","\n\n  ",22],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","setUp",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","setUp",25],"(",")",";",["T_WHITESPACE","\n    ",25],["T_COMMENT","\/\/ Hardcode the location of the simpletest files as it is already known\n",26],["T_WHITESPACE","    ",27],["T_COMMENT","\/\/ and shouldn't change, and we don't yet have a way to retrieve their\n",27],["T_WHITESPACE","    ",28],["T_COMMENT","\/\/ location from drupal_get_filename() in a cached way.\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/ @todo Remove as part of https:\/\/www.drupal.org\/node\/2186491\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","path",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/simpletest\/files'",30],";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Check the format of the returned values.\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testReturn",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/\/ Grab a listing of all the JavaScript files and check that they're\n",37],["T_WHITESPACE","    ",38],["T_COMMENT","\/\/ passed to the callback.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$all_files",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","file_scan_directory",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","path",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",39],")",";",["T_WHITESPACE","\n    ",39],["T_STRING","ksort",40],"(",["T_VARIABLE","$all_files",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertEqual",41],"(",["T_LNUMBER","2",41],",",["T_WHITESPACE"," ",41],["T_STRING","count",41],"(",["T_VARIABLE","$all_files",41],")",",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Found two, expected javascript files.'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Check the first file.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$file",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","reset",44],"(",["T_VARIABLE","$all_files",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertEqual",45],"(",["T_STRING","key",45],"(",["T_VARIABLE","$all_files",45],")",",",["T_WHITESPACE"," ",45],["T_VARIABLE","$file",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","uri",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Correct array key was used for the first returned file.'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertEqual",46],"(",["T_VARIABLE","$file",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","uri",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","path",46],["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-1.txt'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'First file name was set correctly.'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertEqual",47],"(",["T_VARIABLE","$file",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","filename",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'javascript-1.txt'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'First basename was set correctly'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertEqual",48],"(",["T_VARIABLE","$file",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","name",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'javascript-1'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'First name was set correctly.'",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Check the second file.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$file",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","next",51],"(",["T_VARIABLE","$all_files",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertEqual",52],"(",["T_STRING","key",52],"(",["T_VARIABLE","$all_files",52],")",",",["T_WHITESPACE"," ",52],["T_VARIABLE","$file",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","uri",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Correct array key was used for the second returned file.'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertEqual",53],"(",["T_VARIABLE","$file",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","uri",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","path",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-2.script'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Second file name was set correctly.'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertEqual",54],"(",["T_VARIABLE","$file",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","filename",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'javascript-2.script'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'Second basename was set correctly'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$file",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","name",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'javascript-2'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'Second name was set correctly.'",55],")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Check that the callback function is called correctly.\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","testOptionCallback",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ When nothing is matched nothing should be passed to the callback.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$all_files",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","file_scan_directory",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","path",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/^NONEXISTINGFILENAME\/'",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_CONSTANT_ENCAPSED_STRING","'callback'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_scan_callback'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertEqual",65],"(",["T_LNUMBER","0",65],",",["T_WHITESPACE"," ",65],["T_STRING","count",65],"(",["T_VARIABLE","$all_files",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'No files were found.'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$results",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","file_test_file_scan_callback",66],"(",")",";",["T_WHITESPACE","\n    ",66],["T_STRING","file_test_file_scan_callback_reset",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertEqual",68],"(",["T_LNUMBER","0",68],",",["T_WHITESPACE"," ",68],["T_STRING","count",68],"(",["T_VARIABLE","$results",68],")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'No files were passed to the callback.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Grab a listing of all the JavaScript files and check that they're\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ passed to the callback.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$all_files",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","file_scan_directory",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","path",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",72],",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'callback'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'file_test_file_scan_callback'",72],")",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEqual",73],"(",["T_LNUMBER","2",73],",",["T_WHITESPACE"," ",73],["T_STRING","count",73],"(",["T_VARIABLE","$all_files",73],")",",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'Found two, expected javascript files.'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$results",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","file_test_file_scan_callback",74],"(",")",";",["T_WHITESPACE","\n    ",74],["T_STRING","file_test_file_scan_callback_reset",75],"(",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_LNUMBER","2",76],",",["T_WHITESPACE"," ",76],["T_STRING","count",76],"(",["T_VARIABLE","$results",76],")",",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'Files were passed to the callback.'",76],")",";",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n  ",77],["T_DOC_COMMENT","\/**\n   * Check that the no-mask parameter is honored.\n   *\/",79],["T_WHITESPACE","\n  ",81],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","testOptionNoMask",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_COMMENT","\/\/ Grab a listing of all the JavaScript files.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$all_files",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","file_scan_directory",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","path",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEqual",85],"(",["T_LNUMBER","2",85],",",["T_WHITESPACE"," ",85],["T_STRING","count",85],"(",["T_VARIABLE","$all_files",85],")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Found two, expected javascript files.'",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Now use the nomask parameter to filter out the .script file.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$filtered_files",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","file_scan_directory",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","path",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",88],",",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_CONSTANT_ENCAPSED_STRING","'nomask'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'\/.script$\/'",88],")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertEqual",89],"(",["T_LNUMBER","1",89],",",["T_WHITESPACE"," ",89],["T_STRING","count",89],"(",["T_VARIABLE","$filtered_files",89],")",",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'Filtered correctly.'",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Check that key parameter sets the return value's key.\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","testOptionKey",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_COMMENT","\/\/ \"filename\", for the path starting with $dir.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$expected",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","path",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-1.txt'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","path",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-2.script'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$actual",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_STRING","array_keys",98],"(",["T_STRING","file_scan_directory",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","path",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'filepath'",98],")",")",")",";",["T_WHITESPACE","\n    ",98],["T_STRING","sort",99],"(",["T_VARIABLE","$actual",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertEqual",100],"(",["T_VARIABLE","$expected",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$actual",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct values for the filename key.'",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ \"basename\", for the basename of the file.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$expected",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'javascript-1.txt'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'javascript-2.script'",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$actual",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","array_keys",104],"(",["T_STRING","file_scan_directory",104],"(",["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","path",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",104],",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'filename'",104],")",")",")",";",["T_WHITESPACE","\n    ",104],["T_STRING","sort",105],"(",["T_VARIABLE","$actual",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertEqual",106],"(",["T_VARIABLE","$expected",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$actual",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct values for the basename key.'",106],")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ \"name\" for the name of the file without an extension.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$expected",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'javascript-1'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'javascript-2'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$actual",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","array_keys",110],"(",["T_STRING","file_scan_directory",110],"(",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","path",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",110],",",["T_WHITESPACE"," ",110],["T_ARRAY","array",110],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'name'",110],")",")",")",";",["T_WHITESPACE","\n    ",110],["T_STRING","sort",111],"(",["T_VARIABLE","$actual",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertEqual",112],"(",["T_VARIABLE","$expected",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$actual",112],",",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'Returned the correct values for the name key.'",112],")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Invalid option that should default back to \"filename\".\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$expected",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","path",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-1.txt'",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","path",115],["T_WHITESPACE"," ",115],".",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'\/javascript-2.script'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$actual",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","array_keys",116],"(",["T_STRING","file_scan_directory",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","path",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'key'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'INVALID'",116],")",")",")",";",["T_WHITESPACE","\n    ",116],["T_STRING","sort",117],"(",["T_VARIABLE","$actual",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertEqual",118],"(",["T_VARIABLE","$expected",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$actual",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'An invalid key defaulted back to the default.'",118],")",";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * Check that the recurse option descends into subdirectories.\n   *\/",121],["T_WHITESPACE","\n  ",123],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","testOptionRecurse",124],"(",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$files",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","file_scan_directory",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","path",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/..'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",125],",",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'recurse'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","FALSE",125],")",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertTrue",126],"(",["T_EMPTY","empty",126],"(",["T_VARIABLE","$files",126],")",",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","\"Without recursion couldn't find javascript files.\"",126],")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$files",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","file_scan_directory",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","path",128],["T_WHITESPACE"," ",128],".",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'\/..'",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'recurse'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_STRING","TRUE",128],")",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertEqual",129],"(",["T_LNUMBER","2",129],",",["T_WHITESPACE"," ",129],["T_STRING","count",129],"(",["T_VARIABLE","$files",129],")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'With recursion we found the expected javascript files.'",129],")",";",["T_WHITESPACE","\n  ",129],"}",["T_WHITESPACE","\n\n\n  ",130],["T_DOC_COMMENT","\/**\n   * Check that the min_depth options lets us ignore files in the starting\n   * directory.\n   *\/",133],["T_WHITESPACE","\n  ",136],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","testOptionMinDepth",137],"(",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$files",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","file_scan_directory",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","path",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",138],",",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_CONSTANT_ENCAPSED_STRING","'min_depth'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_LNUMBER","0",138],")",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertEqual",139],"(",["T_LNUMBER","2",139],",",["T_WHITESPACE"," ",139],["T_STRING","count",139],"(",["T_VARIABLE","$files",139],")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'No minimum-depth gets files in current directory.'",139],")",";",["T_WHITESPACE","\n\n    ",139],["T_VARIABLE","$files",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","file_scan_directory",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","path",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'\/^javascript-\/'",141],",",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'min_depth'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_LNUMBER","1",141],")",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertTrue",142],"(",["T_EMPTY","empty",142],"(",["T_VARIABLE","$files",142],")",",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'Minimum-depth of 1 successfully excludes files from current directory.'",142],")",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n  ",143],["T_DOC_COMMENT","\/**\n   * Tests file_scan_directory() obeys 'file_scan_ignore_directories' setting.\n   *\/",145],["T_WHITESPACE","\n  ",147],["T_PUBLIC","public",148],["T_WHITESPACE"," ",148],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","testIgnoreDirectories",148],"(",")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$files",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","file_scan_directory",149],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/tests\/fixtures\/IgnoreDirectories'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'\/\\.txt$\/'",149],")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertCount",150],"(",["T_LNUMBER","2",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$files",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'2 text files found when not ignoring directories.'",150],")",";",["T_WHITESPACE","\n\n    ",150],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setSetting",152],"(",["T_CONSTANT_ENCAPSED_STRING","'file_scan_ignore_directories'",152],",",["T_WHITESPACE"," ",152],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend_framework'",152],"]",")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$files",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","file_scan_directory",153],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/tests\/fixtures\/IgnoreDirectories'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'\/\\.txt$\/'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertCount",154],"(",["T_LNUMBER","1",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$files",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'1 text files found when ignoring directories called \"frontend_framework\".'",154],")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Ensure that the directories in file_scan_ignore_directories are escaped\n",156],["T_WHITESPACE","    ",157],["T_COMMENT","\/\/ using preg_quote.\n",157],["T_WHITESPACE","    ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","setSetting",158],"(",["T_CONSTANT_ENCAPSED_STRING","'file_scan_ignore_directories'",158],",",["T_WHITESPACE"," ",158],"[",["T_CONSTANT_ENCAPSED_STRING","'frontend.*'",158],"]",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$files",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","file_scan_directory",159],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/tests\/fixtures\/IgnoreDirectories'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'\/\\.txt$\/'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertCount",160],"(",["T_LNUMBER","2",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$files",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'2 text files found when ignoring a directory that is not there.'",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_VARIABLE","$files",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","file_scan_directory",162],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system\/tests\/fixtures\/IgnoreDirectories'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'\/\\.txt$\/'",162],",",["T_WHITESPACE"," ",162],"[",["T_CONSTANT_ENCAPSED_STRING","'nomask'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'\/^something_thing_else$\/'",162],"]",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertCount",163],"(",["T_LNUMBER","2",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$files",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'2 text files found when an \"nomask\" option is passed in.'",163],")",";",["T_WHITESPACE","\n  ",163],"}",["T_WHITESPACE","\n\n",164],"}",["T_WHITESPACE","\n",166]]
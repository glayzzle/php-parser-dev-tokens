[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","FunctionalJavascriptTests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BrowserTestBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Zumba",6],["T_NS_SEPARATOR","\\",6],["T_STRING","GastonJS",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DeadClient",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Zumba",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mink",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Driver",7],["T_NS_SEPARATOR","\\",7],["T_STRING","PhantomJSDriver",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Runs a browser test using PhantomJS.\n *\n * Base class for testing browser interaction implemented in JavaScript.\n *\/",9],["T_WHITESPACE","\n",13],["T_ABSTRACT","abstract",14],["T_WHITESPACE"," ",14],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","JavascriptTestBase",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","BrowserTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$minkDefaultDriverClass",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_STRING","PhantomJSDriver",19],["T_DOUBLE_COLON","::",19],["T_CLASS","class",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","initMink",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Set up the template cache used by the PhantomJS mink driver.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$path",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","tempFilesDirectory",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_STRING","DIRECTORY_SEPARATOR",26],["T_WHITESPACE"," ",26],".",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'browsertestbase-templatecache'",26],";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","minkDefaultDriverArgs",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],"[",["T_WHITESPACE","\n      ",27],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/127.0.0.1:8510'",28],",",["T_WHITESPACE","\n      ",28],["T_VARIABLE","$path",29],",",["T_WHITESPACE","\n    ",29],"]",";",["T_WHITESPACE","\n    ",30],["T_IF","if",31],["T_WHITESPACE"," ",31],"(","!",["T_STRING","file_exists",31],"(",["T_VARIABLE","$path",31],")",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n      ",31],["T_STRING","mkdir",32],"(",["T_VARIABLE","$path",32],")",";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n\n    ",33],["T_TRY","try",35],["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_RETURN","return",36],["T_WHITESPACE"," ",36],["T_STRING","parent",36],["T_DOUBLE_COLON","::",36],["T_STRING","initMink",36],"(",")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n    ",37],["T_CATCH","catch",38],["T_WHITESPACE"," ",38],"(",["T_STRING","DeadClient",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$e",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n      ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","markTestSkipped",39],"(",["T_CONSTANT_ENCAPSED_STRING","'PhantomJS is either not installed or not running. Start it via phantomjs --ssl-protocol=any --ignore-ssl-errors=true vendor\/jcalderonzumba\/gastonjs\/src\/Client\/main.js 8510 1024 768&'",39],")",";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n    ",40],["T_CATCH","catch",41],["T_WHITESPACE"," ",41],"(",["T_NS_SEPARATOR","\\",41],["T_STRING","Exception",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$e",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n      ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","markTestSkipped",42],"(",["T_CONSTANT_ENCAPSED_STRING","'An unexpected error occurred while starting Mink: '",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$e",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","getMessage",42],"(",")",")",";",["T_WHITESPACE","\n    ",42],"}",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","tearDown",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_IF","if",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","mink",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_COMMENT","\/\/ Wait for all requests to finish. It is possible that an AJAX request is\n",51],["T_WHITESPACE","      ",52],["T_COMMENT","\/\/ still on-going.\n",52],["T_WHITESPACE","      ",53],["T_VARIABLE","$result",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getSession",53],"(",")",["T_OBJECT_OPERATOR","->",53],["T_STRING","wait",53],"(",["T_LNUMBER","5000",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'(typeof(jQuery)==\"undefined\" || (0 === jQuery.active && 0 === jQuery(\\':animated\\').length))'",53],")",";",["T_WHITESPACE","\n      ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(","!",["T_VARIABLE","$result",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n        ",54],["T_COMMENT","\/\/ If the wait is unsuccessful, there may still be an AJAX request in\n",55],["T_WHITESPACE","        ",56],["T_COMMENT","\/\/ progress. If we tear down now, then this AJAX request may fail with\n",56],["T_WHITESPACE","        ",57],["T_COMMENT","\/\/ missing database tables, because tear down will have removed them.\n",57],["T_WHITESPACE","        ",58],["T_COMMENT","\/\/ Rather than allow it to fail, throw an explicit exception now\n",58],["T_WHITESPACE","        ",59],["T_COMMENT","\/\/ explaining what the problem is.\n",59],["T_WHITESPACE","        ",60],["T_THROW","throw",60],["T_WHITESPACE"," ",60],["T_NEW","new",60],["T_WHITESPACE"," ",60],["T_NS_SEPARATOR","\\",60],["T_STRING","RuntimeException",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Unfinished AJAX requests while tearing down a test'",60],")",";",["T_WHITESPACE","\n      ",60],"}",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n    ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","tearDown",63],"(",")",";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Asserts that the element with the given CSS selector is visible.\n   *\n   * @param string $css_selector\n   *   The CSS selector identifying the element to check.\n   * @param string $message\n   *   Optional message to show alongside the assertion.\n   *\n   * @deprecated in Drupal 8.1.x, will be removed before Drupal 8.3.x. Use\n   *   \\Behat\\Mink\\Element\\NodeElement::isVisible() instead.\n   *\/",66],["T_WHITESPACE","\n  ",76],["T_PROTECTED","protected",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","assertElementVisible",77],"(",["T_VARIABLE","$css_selector",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$message",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","''",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertTrue",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getSession",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getDriver",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","isVisible",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","cssSelectToXpath",78],"(",["T_VARIABLE","$css_selector",78],")",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$message",78],")",";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Asserts that the element with the given CSS selector is not visible.\n   *\n   * @param string $css_selector\n   *   The CSS selector identifying the element to check.\n   * @param string $message\n   *   Optional message to show alongside the assertion.\n   *\n   * @deprecated in Drupal 8.1.x, will be removed before Drupal 8.3.x. Use\n   *   \\Behat\\Mink\\Element\\NodeElement::isVisible() instead.\n   *\/",81],["T_WHITESPACE","\n  ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","assertElementNotVisible",92],"(",["T_VARIABLE","$css_selector",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$message",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","''",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertFalse",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getSession",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","getDriver",93],"(",")",["T_OBJECT_OPERATOR","->",93],["T_STRING","isVisible",93],"(",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","cssSelectToXpath",93],"(",["T_VARIABLE","$css_selector",93],")",")",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$message",93],")",";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Waits for the given time or until the given JS condition becomes TRUE.\n   *\n   * @param string $condition\n   *   JS condition to wait until it becomes TRUE.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   * @param string $message\n   *   (optional) A message to display with the assertion. If left blank, a\n   *   default message will be displayed.\n   *\n   * @throws \\PHPUnit_Framework_AssertionFailedError\n   *\n   * @see \\Behat\\Mink\\Driver\\DriverInterface::evaluateScript()\n   *\/",96],["T_WHITESPACE","\n  ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_FUNCTION","function",111],["T_WHITESPACE"," ",111],["T_STRING","assertJsCondition",111],"(",["T_VARIABLE","$condition",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$timeout",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_LNUMBER","10000",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$message",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","''",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$message",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$message",112],["T_WHITESPACE"," ",112],"?",":",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","\"Javascript condition met:\\n\"",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_VARIABLE","$condition",112],";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$result",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getSession",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","getDriver",113],"(",")",["T_OBJECT_OPERATOR","->",113],["T_STRING","wait",113],"(",["T_VARIABLE","$timeout",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$condition",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertTrue",114],"(",["T_VARIABLE","$result",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$message",114],")",";",["T_WHITESPACE","\n  ",114],"}",["T_WHITESPACE","\n\n  ",115],["T_DOC_COMMENT","\/**\n   * Creates a screenshot.\n   *\n   * @param string $filename\n   *   The file name of the resulting screenshot. If using the default phantomjs\n   *   driver then this should be a JPG filename.\n   * @param bool $set_background_color\n   *   (optional) By default this method will set the background color to white.\n   *   Set to FALSE to override this behaviour.\n   *\n   * @throws \\Behat\\Mink\\Exception\\UnsupportedDriverActionException\n   *   When operation not supported by the driver.\n   * @throws \\Behat\\Mink\\Exception\\DriverException\n   *   When the operation cannot be done.\n   *\/",117],["T_WHITESPACE","\n  ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","createScreenshot",132],"(",["T_VARIABLE","$filename",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$set_background_color",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","TRUE",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$session",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getSession",133],"(",")",";",["T_WHITESPACE","\n    ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$set_background_color",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$session",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","executeScript",135],"(",["T_CONSTANT_ENCAPSED_STRING","\"document.body.style.backgroundColor = 'white';\"",135],")",";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$image",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$session",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getScreenshot",137],"(",")",";",["T_WHITESPACE","\n    ",137],["T_STRING","file_put_contents",138],"(",["T_VARIABLE","$filename",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$image",138],")",";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",141],["T_WHITESPACE","\n  ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","assertSession",144],"(",["T_VARIABLE","$name",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","NULL",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n    ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_NEW","new",145],["T_WHITESPACE"," ",145],["T_STRING","JSWebAssert",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getSession",145],"(",["T_VARIABLE","$name",145],")",",",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","baseUrl",145],")",";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n  ",146],["T_DOC_COMMENT","\/**\n   * Gets the current Drupal javascript settings and parses into an array.\n   *\n   * Unlike BrowserTestBase::getDrupalSettings(), this implementation reads the\n   * current values of drupalSettings, capturing all changes made via javascript\n   * after the page was loaded.\n   *\n   * @return array\n   *   The Drupal javascript settings array.\n   *\n   * @see \\Drupal\\Tests\\BrowserTestBase::getDrupalSettings()\n   *\/",148],["T_WHITESPACE","\n  ",159],["T_PROTECTED","protected",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","getDrupalSettings",160],"(",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$script",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_START_HEREDOC","<<<EndOfScript\n",161],["T_ENCAPSED_AND_WHITESPACE","(function () {\n  if (typeof drupalSettings !== 'undefined') {\n    return drupalSettings;\n  }\n})();\n",162],["T_END_HEREDOC","EndOfScript",167],";",["T_WHITESPACE","\n\n    ",167],["T_RETURN","return",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getSession",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","evaluateScript",169],"(",["T_VARIABLE","$script",169],")",["T_WHITESPACE"," ",169],"?",":",["T_WHITESPACE"," ",169],"[","]",";",["T_WHITESPACE","\n  ",169],"}",["T_WHITESPACE","\n\n",170],"}",["T_WHITESPACE","\n",172]]
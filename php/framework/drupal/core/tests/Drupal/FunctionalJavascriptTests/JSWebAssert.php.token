[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","FunctionalJavascriptTests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Behat",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Mink",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Element",5],["T_NS_SEPARATOR","\\",5],["T_STRING","NodeElement",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Behat",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mink",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ElementHtmlException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Behat",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mink",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Exception",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ElementNotFoundException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Behat",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Mink",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","UnsupportedDriverActionException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Tests",9],["T_NS_SEPARATOR","\\",9],["T_STRING","WebAssert",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Defines a class with methods for asserting presence of elements during tests.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","JSWebAssert",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebAssert",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Waits for AJAX request to be completed.\n   *\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   * @param string $message\n   *   (optional) A message for exception.\n   *\n   * @throws \\RuntimeException\n   *   When the request is not completed. If left blank, a default message will\n   *   be displayed.\n   *\/",16],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","assertWaitOnAjaxRequest",28],"(",["T_VARIABLE","$timeout",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","10000",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$message",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'Unable to complete AJAX request.'",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$condition",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_START_HEREDOC","<<<JS\n",29],["T_ENCAPSED_AND_WHITESPACE","      (function() {\n        function isAjaxing(instance) {\n          return instance && instance.ajaxing === true;\n        }\n        return (\n          \/\/ Assert no AJAX request is running (via jQuery or Drupal) and no\n          \/\/ animation is running.\n          (typeof jQuery === 'undefined' || (jQuery.active === 0 && jQuery(':animated').length === 0)) &&\n          (typeof Drupal === 'undefined' || typeof Drupal.ajax === 'undefined' || !Drupal.ajax.instances.some(isAjaxing))\n        );\n      }());\n",30],["T_END_HEREDOC","JS",41],";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$result",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","session",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","wait",42],"(",["T_VARIABLE","$timeout",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$condition",42],")",";",["T_WHITESPACE","\n    ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","!",["T_VARIABLE","$result",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n      ",43],["T_THROW","throw",44],["T_WHITESPACE"," ",44],["T_NEW","new",44],["T_WHITESPACE"," ",44],["T_NS_SEPARATOR","\\",44],["T_STRING","RuntimeException",44],"(",["T_VARIABLE","$message",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n  ",45],"}",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * Waits for the specified selector and returns it when available.\n   *\n   * @param string $selector\n   *   The selector engine name. See ElementInterface::findAll() for the\n   *   supported selectors.\n   * @param string|array $locator\n   *   The selector locator.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found, NULL if not.\n   *\n   * @see \\Behat\\Mink\\Element\\ElementInterface::findAll()\n   *\/",48],["T_WHITESPACE","\n  ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","waitForElement",64],"(",["T_VARIABLE","$selector",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$locator",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$timeout",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_LNUMBER","10000",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$page",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","session",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getPage",65],"(",")",";",["T_WHITESPACE","\n\n    ",65],["T_VARIABLE","$result",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$page",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","waitFor",67],"(",["T_VARIABLE","$timeout",67],["T_WHITESPACE"," ",67],"\/",["T_WHITESPACE"," ",67],["T_LNUMBER","1000",67],",",["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],"(",")",["T_WHITESPACE"," ",67],["T_USE","use",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$page",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$selector",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$locator",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$page",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","find",68],"(",["T_VARIABLE","$selector",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$locator",68],")",";",["T_WHITESPACE","\n    ",68],"}",")",";",["T_WHITESPACE","\n\n    ",69],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$result",71],";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Waits for the specified selector and returns it when available and visible.\n   *\n   * @param string $selector\n   *   The selector engine name. See ElementInterface::findAll() for the\n   *   supported selectors.\n   * @param string|array $locator\n   *   The selector locator.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found and visible, NULL if not.\n   *\n   * @see \\Behat\\Mink\\Element\\ElementInterface::findAll()\n   *\/",74],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","waitForElementVisible",90],"(",["T_VARIABLE","$selector",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$locator",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$timeout",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_LNUMBER","10000",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$page",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","session",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getPage",91],"(",")",";",["T_WHITESPACE","\n\n    ",91],["T_VARIABLE","$result",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$page",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","waitFor",93],"(",["T_VARIABLE","$timeout",93],["T_WHITESPACE"," ",93],"\/",["T_WHITESPACE"," ",93],["T_LNUMBER","1000",93],",",["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],"(",")",["T_WHITESPACE"," ",93],["T_USE","use",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$page",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$selector",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$locator",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$element",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$page",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","find",94],"(",["T_VARIABLE","$selector",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$locator",94],")",";",["T_WHITESPACE","\n      ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(","!",["T_EMPTY","empty",95],"(",["T_VARIABLE","$element",95],")",["T_WHITESPACE"," ",95],["T_BOOLEAN_AND","&&",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$element",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isVisible",95],"(",")",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$element",96],";",["T_WHITESPACE","\n      ",96],"}",["T_WHITESPACE","\n      ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_STRING","NULL",98],";",["T_WHITESPACE","\n    ",98],"}",")",";",["T_WHITESPACE","\n\n    ",99],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$result",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n  ",102],["T_DOC_COMMENT","\/**\n   * Waits for a button (input[type=submit|image|button|reset], button) with\n   * specified locator and returns it.\n   *\n   * @param string $locator\n   *   The button ID, value or alt string.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found, NULL if not.\n   *\/",103],["T_WHITESPACE","\n  ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","waitForButton",115],"(",["T_VARIABLE","$locator",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$timeout",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_LNUMBER","10000",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","waitForElement",116],"(",["T_CONSTANT_ENCAPSED_STRING","'named'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'button'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$locator",116],")",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$timeout",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Waits for a link with specified locator and returns it when available.\n   *\n   * @param string $locator\n   *   The link ID, title, text or image alt.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found, NULL if not.\n   *\/",119],["T_WHITESPACE","\n  ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","waitForLink",130],"(",["T_VARIABLE","$locator",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$timeout",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_LNUMBER","10000",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","waitForElement",131],"(",["T_CONSTANT_ENCAPSED_STRING","'named'",131],",",["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_CONSTANT_ENCAPSED_STRING","'link'",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$locator",131],")",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$timeout",131],")",";",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n\n  ",132],["T_DOC_COMMENT","\/**\n   * Waits for a field with specified locator and returns it when available.\n   *\n   * @param string $locator\n   *   The input ID, name or label for the field (input, textarea, select).\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found, NULL if not.\n   *\/",134],["T_WHITESPACE","\n  ",144],["T_PUBLIC","public",145],["T_WHITESPACE"," ",145],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","waitForField",145],"(",["T_VARIABLE","$locator",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$timeout",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_LNUMBER","10000",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_RETURN","return",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","waitForElement",146],"(",["T_CONSTANT_ENCAPSED_STRING","'named'",146],",",["T_WHITESPACE"," ",146],["T_ARRAY","array",146],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$locator",146],")",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$timeout",146],")",";",["T_WHITESPACE","\n  ",146],"}",["T_WHITESPACE","\n\n  ",147],["T_DOC_COMMENT","\/**\n   * Waits for an element by its id and returns it when available.\n   *\n   * @param string $id\n   *   The element ID.\n   * @param int $timeout\n   *   (Optional) Timeout in milliseconds, defaults to 10000.\n   *\n   * @return \\Behat\\Mink\\Element\\NodeElement|null\n   *   The page element node if found, NULL if not.\n   *\/",149],["T_WHITESPACE","\n  ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","waitForId",160],"(",["T_VARIABLE","$id",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$timeout",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_LNUMBER","10000",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n    ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","waitForElement",161],"(",["T_CONSTANT_ENCAPSED_STRING","'named'",161],",",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$id",161],")",",",["T_WHITESPACE"," ",161],["T_VARIABLE","$timeout",161],")",";",["T_WHITESPACE","\n  ",161],"}",["T_WHITESPACE","\n\n  ",162],["T_DOC_COMMENT","\/**\n   * Waits for the jQuery autocomplete delay duration.\n   *\n   * @see https:\/\/api.jqueryui.com\/autocomplete\/#option-delay\n   *\/",164],["T_WHITESPACE","\n  ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","waitOnAutocomplete",169],"(",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n    ",169],["T_COMMENT","\/\/ Wait for the autocomplete to be visible.\n",170],["T_WHITESPACE","    ",171],["T_RETURN","return",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","waitForElementVisible",171],"(",["T_CONSTANT_ENCAPSED_STRING","'css'",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'.ui-autocomplete li'",171],")",";",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * Test that a node, or it's specific corner, is visible in the viewport.\n   *\n   * Note: Always set the viewport size. This can be done with a PhantomJS\n   * startup parameter or in your test with \\Behat\\Mink\\Session->resizeWindow().\n   * Drupal CI Javascript tests by default use a viewport of 1024x768px.\n   *\n   * @param string $selector_type\n   *   The element selector type (CSS, XPath).\n   * @param string|array $selector\n   *   The element selector. Note: the first found element is used.\n   * @param bool|string $corner\n   *   (Optional) The corner to test:\n   *   topLeft, topRight, bottomRight, bottomLeft.\n   *   Or FALSE to check the complete element (default).\n   * @param string $message\n   *   (optional) A message for the exception.\n   *\n   * @throws \\Behat\\Mink\\Exception\\ElementHtmlException\n   *   When the element doesn't exist.\n   * @throws \\Behat\\Mink\\Exception\\ElementNotFoundException\n   *   When the element is not visible in the viewport.\n   *\/",174],["T_WHITESPACE","\n  ",196],["T_PUBLIC","public",197],["T_WHITESPACE"," ",197],["T_FUNCTION","function",197],["T_WHITESPACE"," ",197],["T_STRING","assertVisibleInViewport",197],"(",["T_VARIABLE","$selector_type",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$selector",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$corner",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_STRING","FALSE",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$message",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'Element is not visible in the viewport.'",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$node",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","session",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getPage",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","find",198],"(",["T_VARIABLE","$selector_type",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$selector",198],")",";",["T_WHITESPACE","\n    ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$node",199],["T_WHITESPACE"," ",199],["T_IS_IDENTICAL","===",199],["T_WHITESPACE"," ",199],["T_STRING","NULL",199],")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n      ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_STRING","is_array",200],"(",["T_VARIABLE","$selector",200],")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n        ",200],["T_VARIABLE","$selector",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","implode",201],"(",["T_CONSTANT_ENCAPSED_STRING","' '",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$selector",201],")",";",["T_WHITESPACE","\n      ",201],"}",["T_WHITESPACE","\n      ",202],["T_THROW","throw",203],["T_WHITESPACE"," ",203],["T_NEW","new",203],["T_WHITESPACE"," ",203],["T_STRING","ElementNotFoundException",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","session",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getDriver",203],"(",")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'element'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$selector_type",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$selector",203],")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_COMMENT","\/\/ Check if the node is visible on the page, which is a prerequisite of\n",206],["T_WHITESPACE","    ",207],["T_COMMENT","\/\/ being visible in the viewport.\n",207],["T_WHITESPACE","    ",208],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_VARIABLE","$node",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","isVisible",208],"(",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n      ",208],["T_THROW","throw",209],["T_WHITESPACE"," ",209],["T_NEW","new",209],["T_WHITESPACE"," ",209],["T_STRING","ElementHtmlException",209],"(",["T_VARIABLE","$message",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","session",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getDriver",209],"(",")",",",["T_WHITESPACE"," ",209],["T_VARIABLE","$node",209],")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_VARIABLE","$result",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","checkNodeVisibilityInViewport",212],"(",["T_VARIABLE","$node",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$corner",212],")",";",["T_WHITESPACE","\n\n    ",212],["T_IF","if",214],["T_WHITESPACE"," ",214],"(","!",["T_VARIABLE","$result",214],")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n      ",214],["T_THROW","throw",215],["T_WHITESPACE"," ",215],["T_NEW","new",215],["T_WHITESPACE"," ",215],["T_STRING","ElementHtmlException",215],"(",["T_VARIABLE","$message",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","session",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","getDriver",215],"(",")",",",["T_WHITESPACE"," ",215],["T_VARIABLE","$node",215],")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n  ",216],"}",["T_WHITESPACE","\n\n  ",217],["T_DOC_COMMENT","\/**\n   * Test that a node, or its specific corner, is not visible in the viewport.\n   *\n   * Note: the node should exist in the page, otherwise this assertion fails.\n   *\n   * @param string $selector_type\n   *   The element selector type (CSS, XPath).\n   * @param string|array $selector\n   *   The element selector. Note: the first found element is used.\n   * @param bool|string $corner\n   *   (Optional) Corner to test: topLeft, topRight, bottomRight, bottomLeft.\n   *   Or FALSE to check the complete element (default).\n   * @param string $message\n   *   (optional) A message for the exception.\n   *\n   * @throws \\Behat\\Mink\\Exception\\ElementHtmlException\n   *   When the element doesn't exist.\n   * @throws \\Behat\\Mink\\Exception\\ElementNotFoundException\n   *   When the element is not visible in the viewport.\n   *\n   * @see \\Drupal\\FunctionalJavascriptTests\\JSWebAssert::assertVisibleInViewport()\n   *\/",219],["T_WHITESPACE","\n  ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","assertNotVisibleInViewport",241],"(",["T_VARIABLE","$selector_type",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$selector",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$corner",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_STRING","FALSE",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$message",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'Element is visible in the viewport.'",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$node",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","session",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getPage",242],"(",")",["T_OBJECT_OPERATOR","->",242],["T_STRING","find",242],"(",["T_VARIABLE","$selector_type",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$selector",242],")",";",["T_WHITESPACE","\n    ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$node",243],["T_WHITESPACE"," ",243],["T_IS_IDENTICAL","===",243],["T_WHITESPACE"," ",243],["T_STRING","NULL",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n      ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_STRING","is_array",244],"(",["T_VARIABLE","$selector",244],")",")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n        ",244],["T_VARIABLE","$selector",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","implode",245],"(",["T_CONSTANT_ENCAPSED_STRING","' '",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$selector",245],")",";",["T_WHITESPACE","\n      ",245],"}",["T_WHITESPACE","\n      ",246],["T_THROW","throw",247],["T_WHITESPACE"," ",247],["T_NEW","new",247],["T_WHITESPACE"," ",247],["T_STRING","ElementNotFoundException",247],"(",["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","session",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getDriver",247],"(",")",",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'element'",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$selector_type",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$selector",247],")",";",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_VARIABLE","$result",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","checkNodeVisibilityInViewport",250],"(",["T_VARIABLE","$node",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$corner",250],")",";",["T_WHITESPACE","\n\n    ",250],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$result",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n      ",252],["T_THROW","throw",253],["T_WHITESPACE"," ",253],["T_NEW","new",253],["T_WHITESPACE"," ",253],["T_STRING","ElementHtmlException",253],"(",["T_VARIABLE","$message",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","session",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","getDriver",253],"(",")",",",["T_WHITESPACE"," ",253],["T_VARIABLE","$node",253],")",";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n  ",254],"}",["T_WHITESPACE","\n\n  ",255],["T_DOC_COMMENT","\/**\n   * Check the visibility of a node, or it's specific corner.\n   *\n   * @param \\Behat\\Mink\\Element\\NodeElement $node\n   *   A valid node.\n   * @param bool|string $corner\n   *   (Optional) Corner to test: topLeft, topRight, bottomRight, bottomLeft.\n   *   Or FALSE to check the complete element (default).\n   *\n   * @return bool\n   *   Returns TRUE if the node is visible in the viewport, FALSE otherwise.\n   *\n   * @throws \\Behat\\Mink\\Exception\\UnsupportedDriverActionException\n   *   When an invalid corner specification is given.\n   *\/",257],["T_WHITESPACE","\n  ",271],["T_PRIVATE","private",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","checkNodeVisibilityInViewport",272],"(",["T_STRING","NodeElement",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$node",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$corner",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","FALSE",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$xpath",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$node",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","getXpath",273],"(",")",";",["T_WHITESPACE","\n\n    ",273],["T_COMMENT","\/\/ Build the Javascript to test if the complete element or a specific corner\n",275],["T_WHITESPACE","    ",276],["T_COMMENT","\/\/ is in the viewport.\n",276],["T_WHITESPACE","    ",277],["T_SWITCH","switch",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$corner",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n      ",277],["T_CASE","case",278],["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'topLeft'",278],":",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$test_javascript_function",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_START_HEREDOC","<<<JS\n",279],["T_ENCAPSED_AND_WHITESPACE","          function t(r, lx, ly) {\n            return (\n              r.top >= 0 &&\n              r.top <= ly &&\n              r.left >= 0 &&\n              r.left <= lx\n            )\n          }\n",280],["T_END_HEREDOC","JS",288],";",["T_WHITESPACE","\n        ",288],["T_BREAK","break",289],";",["T_WHITESPACE","\n\n      ",289],["T_CASE","case",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'topRight'",291],":",["T_WHITESPACE","\n        ",291],["T_VARIABLE","$test_javascript_function",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_START_HEREDOC","<<<JS\n",292],["T_ENCAPSED_AND_WHITESPACE","          function t(r, lx, ly) {\n            return (\n              r.top >= 0 &&\n              r.top <= ly &&\n              r.right >= 0 &&\n              r.right <= lx\n            );\n          }\n",293],["T_END_HEREDOC","JS",301],";",["T_WHITESPACE","\n        ",301],["T_BREAK","break",302],";",["T_WHITESPACE","\n\n      ",302],["T_CASE","case",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'bottomRight'",304],":",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$test_javascript_function",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_START_HEREDOC","<<<JS\n",305],["T_ENCAPSED_AND_WHITESPACE","          function t(r, lx, ly) {\n            return (\n              r.bottom >= 0 &&\n              r.bottom <= ly &&\n              r.right >= 0 &&\n              r.right <= lx\n            );\n          }\n",306],["T_END_HEREDOC","JS",314],";",["T_WHITESPACE","\n        ",314],["T_BREAK","break",315],";",["T_WHITESPACE","\n\n      ",315],["T_CASE","case",317],["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'bottomLeft'",317],":",["T_WHITESPACE","\n        ",317],["T_VARIABLE","$test_javascript_function",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_START_HEREDOC","<<<JS\n",318],["T_ENCAPSED_AND_WHITESPACE","          function t(r, lx, ly) {\n            return (\n              r.bottom >= 0 &&\n              r.bottom <= ly &&\n              r.left >= 0 &&\n              r.left <= lx\n            );\n          }\n",319],["T_END_HEREDOC","JS",327],";",["T_WHITESPACE","\n        ",327],["T_BREAK","break",328],";",["T_WHITESPACE","\n\n      ",328],["T_CASE","case",330],["T_WHITESPACE"," ",330],["T_STRING","FALSE",330],":",["T_WHITESPACE","\n        ",330],["T_VARIABLE","$test_javascript_function",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_START_HEREDOC","<<<JS\n",331],["T_ENCAPSED_AND_WHITESPACE","          function t(r, lx, ly) {\n            return (\n              r.top >= 0 &&\n              r.left >= 0 &&\n              r.bottom <= ly &&\n              r.right <= lx\n            );\n          }\n",332],["T_END_HEREDOC","JS",340],";",["T_WHITESPACE","\n        ",340],["T_BREAK","break",341],";",["T_WHITESPACE","\n\n      ",341],["T_COMMENT","\/\/ Throw an exception if an invalid corner parameter is given.\n",343],["T_WHITESPACE","      ",344],["T_DEFAULT","default",344],":",["T_WHITESPACE","\n        ",344],["T_THROW","throw",345],["T_WHITESPACE"," ",345],["T_NEW","new",345],["T_WHITESPACE"," ",345],["T_STRING","UnsupportedDriverActionException",345],"(",["T_VARIABLE","$corner",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","session",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getDriver",345],"(",")",")",";",["T_WHITESPACE","\n    ",345],"}",["T_WHITESPACE","\n\n    ",346],["T_COMMENT","\/\/ Build the full Javascript test. The shared logic gets the corner\n",348],["T_WHITESPACE","    ",349],["T_COMMENT","\/\/ specific test logic injected.\n",349],["T_WHITESPACE","    ",350],["T_VARIABLE","$full_javascript_visibility_test",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_START_HEREDOC","<<<JS\n",350],["T_ENCAPSED_AND_WHITESPACE","      (function(t){\n        var w = window,\n        d = document,\n        e = d.documentElement,\n        n = d.evaluate(\"",351],["T_VARIABLE","$xpath",355],["T_ENCAPSED_AND_WHITESPACE","\", d, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue,\n        r = n.getBoundingClientRect(),\n        lx = (w.innerWidth || e.clientWidth),\n        ly = (w.innerHeight || e.clientHeight);\n\n        return t(r, lx, ly);\n      }(",355],["T_VARIABLE","$test_javascript_function",361],["T_ENCAPSED_AND_WHITESPACE","));\n",361],["T_END_HEREDOC","JS",362],";",["T_WHITESPACE","\n\n    ",362],["T_COMMENT","\/\/ Check the visibility by injecting and executing the full Javascript test\n",364],["T_WHITESPACE","    ",365],["T_COMMENT","\/\/ script in the page.\n",365],["T_WHITESPACE","    ",366],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","session",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","evaluateScript",366],"(",["T_VARIABLE","$full_javascript_visibility_test",366],")",";",["T_WHITESPACE","\n  ",366],"}",["T_WHITESPACE","\n\n",367],"}",["T_WHITESPACE","\n",369]]
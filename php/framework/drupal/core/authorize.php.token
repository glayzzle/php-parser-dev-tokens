[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Administrative script for running authorized file operations.\n *\n * Using this script, the site owner (the user actually owning the files on the\n * webserver) can authorize certain file-related operations to proceed with\n * elevated privileges, for example to deploy and upgrade modules or themes.\n * Users should not visit this page directly, but instead use an administrative\n * user interface which knows how to redirect the user to this script as part of\n * a multistep process. This script actually performs the selected operations\n * without loading all of Drupal, to be able to more gracefully recover from\n * errors. Access to the script is controlled by a global killswitch in\n * settings.php ('allow_authorize_operations') and via the 'administer software\n * updates' permission.\n *\n * There are helper functions for setting up an operation to run via this\n * system in modules\/system\/system.module. For more information, see:\n * @link authorize Authorized operation helper functions @endlink\n *\/",3],["T_WHITESPACE","\n\n",21],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","Drupal",23],["T_NS_SEPARATOR","\\",23],["T_STRING","Core",23],["T_NS_SEPARATOR","\\",23],["T_STRING","DrupalKernel",23],";",["T_WHITESPACE","\n",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","Drupal",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Core",24],["T_NS_SEPARATOR","\\",24],["T_STRING","Form",24],["T_NS_SEPARATOR","\\",24],["T_STRING","EnforcedResponseException",24],";",["T_WHITESPACE","\n",24],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","Drupal",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Core",25],["T_NS_SEPARATOR","\\",25],["T_STRING","Url",25],";",["T_WHITESPACE","\n",25],["T_USE","use",26],["T_WHITESPACE"," ",26],["T_STRING","Symfony",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Component",26],["T_NS_SEPARATOR","\\",26],["T_STRING","HttpKernel",26],["T_NS_SEPARATOR","\\",26],["T_STRING","Exception",26],["T_NS_SEPARATOR","\\",26],["T_STRING","HttpExceptionInterface",26],";",["T_WHITESPACE","\n",26],["T_USE","use",27],["T_WHITESPACE"," ",27],["T_STRING","Symfony",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Component",27],["T_NS_SEPARATOR","\\",27],["T_STRING","HttpFoundation",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Request",27],";",["T_WHITESPACE","\n",27],["T_USE","use",28],["T_WHITESPACE"," ",28],["T_STRING","Symfony",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Component",28],["T_NS_SEPARATOR","\\",28],["T_STRING","HttpFoundation",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Response",28],";",["T_WHITESPACE","\n",28],["T_USE","use",29],["T_WHITESPACE"," ",29],["T_STRING","Drupal",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Core",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Site",29],["T_NS_SEPARATOR","\\",29],["T_STRING","Settings",29],";",["T_WHITESPACE","\n\n",29],["T_COMMENT","\/\/ Change the directory to the Drupal root.\n",31],["T_STRING","chdir",32],"(",["T_CONSTANT_ENCAPSED_STRING","'..'",32],")",";",["T_WHITESPACE","\n\n",32],["T_VARIABLE","$autoloader",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_REQUIRE_ONCE","require_once",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'autoload.php'",34],";",["T_WHITESPACE","\n\n",34],["T_DOC_COMMENT","\/**\n * Global flag to identify update.php and authorize.php runs.\n *\n * Identifies update.php and authorize.php runs, avoiding unwanted operations\n * such as css\/js preprocessing and translation, and solves some theming issues.\n * The flag is checked in other places in Drupal code (not just authorize.php).\n *\/",36],["T_WHITESPACE","\n",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","MAINTENANCE_MODE",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'update'",43],";",["T_WHITESPACE","\n\n",43],["T_DOC_COMMENT","\/**\n * Determines if the current user is allowed to run authorize.php.\n *\n * The killswitch in settings.php overrides all else, otherwise, the user must\n * have access to the 'administer software updates' permission.\n *\n * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n *   The incoming request.\n *\n * @return bool\n *   TRUE if the current user can run authorize.php, and FALSE if not.\n *\/",45],["T_WHITESPACE","\n",56],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","authorize_access_allowed",57],"(",["T_STRING","Request",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$request",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n  ",57],["T_VARIABLE","$account",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Drupal",58],["T_DOUBLE_COLON","::",58],["T_STRING","service",58],"(",["T_CONSTANT_ENCAPSED_STRING","'authentication'",58],")",["T_OBJECT_OPERATOR","->",58],["T_STRING","authenticate",58],"(",["T_VARIABLE","$request",58],")",";",["T_WHITESPACE","\n  ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$account",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_NS_SEPARATOR","\\",60],["T_STRING","Drupal",60],["T_DOUBLE_COLON","::",60],["T_STRING","currentUser",60],"(",")",["T_OBJECT_OPERATOR","->",60],["T_STRING","setAccount",60],"(",["T_VARIABLE","$account",60],")",";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n  ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_STRING","Settings",62],["T_DOUBLE_COLON","::",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'allow_authorize_operations'",62],",",["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],")",["T_WHITESPACE"," ",62],["T_BOOLEAN_AND","&&",62],["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Drupal",62],["T_DOUBLE_COLON","::",62],["T_STRING","currentUser",62],"(",")",["T_OBJECT_OPERATOR","->",62],["T_STRING","hasPermission",62],"(",["T_CONSTANT_ENCAPSED_STRING","'administer software updates'",62],")",";",["T_WHITESPACE","\n",62],"}",["T_WHITESPACE","\n\n",63],["T_TRY","try",65],["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n  ",65],["T_VARIABLE","$request",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Request",66],["T_DOUBLE_COLON","::",66],["T_STRING","createFromGlobals",66],"(",")",";",["T_WHITESPACE","\n  ",66],["T_VARIABLE","$kernel",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","DrupalKernel",67],["T_DOUBLE_COLON","::",67],["T_STRING","createFromRequest",67],"(",["T_VARIABLE","$request",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$autoloader",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'prod'",67],")",";",["T_WHITESPACE","\n  ",67],["T_VARIABLE","$kernel",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","prepareLegacyRequest",68],"(",["T_VARIABLE","$request",68],")",";",["T_WHITESPACE","\n",68],"}",["T_WHITESPACE","\n",69],["T_CATCH","catch",70],["T_WHITESPACE"," ",70],"(",["T_STRING","HttpExceptionInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$e",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n  ",70],["T_VARIABLE","$response",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_NEW","new",71],["T_WHITESPACE"," ",71],["T_STRING","Response",71],"(",["T_CONSTANT_ENCAPSED_STRING","''",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$e",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getStatusCode",71],"(",")",")",";",["T_WHITESPACE","\n  ",71],["T_VARIABLE","$response",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","prepare",72],"(",["T_VARIABLE","$request",72],")",["T_OBJECT_OPERATOR","->",72],["T_STRING","send",72],"(",")",";",["T_WHITESPACE","\n  ",72],["T_EXIT","exit",73],";",["T_WHITESPACE","\n",73],"}",["T_WHITESPACE","\n\n",74],["T_COMMENT","\/\/ We have to enable the user and system modules, even to check access and\n",76],["T_COMMENT","\/\/ display errors via the maintenance theme.\n",77],["T_NS_SEPARATOR","\\",78],["T_STRING","Drupal",78],["T_DOUBLE_COLON","::",78],["T_STRING","moduleHandler",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","addModule",78],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/system'",78],")",";",["T_WHITESPACE","\n",78],["T_NS_SEPARATOR","\\",79],["T_STRING","Drupal",79],["T_DOUBLE_COLON","::",79],["T_STRING","moduleHandler",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","addModule",79],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/user'",79],")",";",["T_WHITESPACE","\n",79],["T_NS_SEPARATOR","\\",80],["T_STRING","Drupal",80],["T_DOUBLE_COLON","::",80],["T_STRING","moduleHandler",80],"(",")",["T_OBJECT_OPERATOR","->",80],["T_STRING","load",80],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",80],")",";",["T_WHITESPACE","\n",80],["T_NS_SEPARATOR","\\",81],["T_STRING","Drupal",81],["T_DOUBLE_COLON","::",81],["T_STRING","moduleHandler",81],"(",")",["T_OBJECT_OPERATOR","->",81],["T_STRING","load",81],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",81],")",";",["T_WHITESPACE","\n\n",81],["T_COMMENT","\/\/ Initialize the maintenance theme for this administrative script.\n",83],["T_STRING","drupal_maintenance_theme",84],"(",")",";",["T_WHITESPACE","\n\n",84],["T_VARIABLE","$content",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[","]",";",["T_WHITESPACE","\n",86],["T_VARIABLE","$show_messages",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","TRUE",87],";",["T_WHITESPACE","\n\n",87],["T_VARIABLE","$is_allowed",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_STRING","authorize_access_allowed",89],"(",["T_VARIABLE","$request",89],")",";",["T_WHITESPACE","\n\n",89],["T_COMMENT","\/\/ Build content.\n",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$is_allowed",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n  ",92],["T_COMMENT","\/\/ Load both the Form API and Batch API.\n",93],["T_WHITESPACE","  ",94],["T_REQUIRE_ONCE","require_once",94],["T_WHITESPACE"," ",94],["T_DIR","__DIR__",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\/includes\/form.inc'",94],";",["T_WHITESPACE","\n  ",94],["T_REQUIRE_ONCE","require_once",95],["T_WHITESPACE"," ",95],["T_DIR","__DIR__",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'\/includes\/batch.inc'",95],";",["T_WHITESPACE","\n\n  ",95],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_ISSET","isset",97],"(",["T_VARIABLE","$_SESSION",97],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_page_title'",97],"]",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$page_title",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$_SESSION",98],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_page_title'",98],"]",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n  ",99],["T_ELSE","else",100],["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$page_title",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Authorize file system changes'",101],")",";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_COMMENT","\/\/ See if we've run the operation and need to display a report.\n",104],["T_WHITESPACE","  ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_ISSET","isset",105],"(",["T_VARIABLE","$_SESSION",105],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_results'",105],"]",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$results",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$_SESSION",105],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_results'",105],"]",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Clear the session out.\n",107],["T_WHITESPACE","    ",108],["T_UNSET","unset",108],"(",["T_VARIABLE","$_SESSION",108],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_results'",108],"]",")",";",["T_WHITESPACE","\n    ",108],["T_UNSET","unset",109],"(",["T_VARIABLE","$_SESSION",109],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_operation'",109],"]",")",";",["T_WHITESPACE","\n    ",109],["T_UNSET","unset",110],"(",["T_VARIABLE","$_SESSION",110],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_filetransfer_info'",110],"]",")",";",["T_WHITESPACE","\n\n    ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(","!",["T_EMPTY","empty",112],"(",["T_VARIABLE","$results",112],"[",["T_CONSTANT_ENCAPSED_STRING","'page_title'",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$page_title",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$results",113],"[",["T_CONSTANT_ENCAPSED_STRING","'page_title'",113],"]",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n    ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(","!",["T_EMPTY","empty",115],"(",["T_VARIABLE","$results",115],"[",["T_CONSTANT_ENCAPSED_STRING","'page_message'",115],"]",")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_STRING","drupal_set_message",116],"(",["T_VARIABLE","$results",116],"[",["T_CONSTANT_ENCAPSED_STRING","'page_message'",116],"]","[",["T_CONSTANT_ENCAPSED_STRING","'message'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$results",116],"[",["T_CONSTANT_ENCAPSED_STRING","'page_message'",116],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",116],"]",")",";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$content",119],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_report'",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'#theme'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'authorize_report'",120],",",["T_WHITESPACE","\n      ",120],["T_CONSTANT_ENCAPSED_STRING","'#messages'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$results",121],"[",["T_CONSTANT_ENCAPSED_STRING","'messages'",121],"]",",",["T_WHITESPACE","\n    ",121],")",";",["T_WHITESPACE","\n\n    ",122],["T_IF","if",124],["T_WHITESPACE"," ",124],"(",["T_STRING","is_array",124],"(",["T_VARIABLE","$results",124],"[",["T_CONSTANT_ENCAPSED_STRING","'tasks'",124],"]",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$links",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$results",125],"[",["T_CONSTANT_ENCAPSED_STRING","'tasks'",125],"]",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n    ",126],["T_ELSE","else",127],["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_COMMENT","\/\/ Since this is being called outsite of the primary front controller,\n",128],["T_WHITESPACE","      ",129],["T_COMMENT","\/\/ the base_url needs to be set explicitly to ensure that links are\n",129],["T_WHITESPACE","      ",130],["T_COMMENT","\/\/ relative to the site root.\n",130],["T_WHITESPACE","      ",131],["T_COMMENT","\/\/ @todo Simplify with https:\/\/www.drupal.org\/node\/2548095\n",131],["T_WHITESPACE","      ",132],["T_VARIABLE","$default_options",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],"[",["T_WHITESPACE","\n        ",132],["T_CONSTANT_ENCAPSED_STRING","'#type'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'link'",133],",",["T_WHITESPACE","\n        ",133],["T_CONSTANT_ENCAPSED_STRING","'#options'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],"[",["T_WHITESPACE","\n          ",134],["T_CONSTANT_ENCAPSED_STRING","'absolute'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","TRUE",135],",",["T_WHITESPACE","\n          ",135],["T_CONSTANT_ENCAPSED_STRING","'base_url'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$GLOBALS",136],"[",["T_CONSTANT_ENCAPSED_STRING","'base_url'",136],"]",",",["T_WHITESPACE","\n        ",136],"]",",",["T_WHITESPACE","\n      ",137],"]",";",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$links",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$default_options",140],["T_WHITESPACE"," ",140],"+",["T_WHITESPACE"," ",140],"[",["T_WHITESPACE","\n          ",140],["T_CONSTANT_ENCAPSED_STRING","'#url'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_STRING","Url",141],["T_DOUBLE_COLON","::",141],["T_STRING","fromRoute",141],"(",["T_CONSTANT_ENCAPSED_STRING","'system.admin'",141],")",",",["T_WHITESPACE","\n          ",141],["T_CONSTANT_ENCAPSED_STRING","'#title'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_STRING","t",142],"(",["T_CONSTANT_ENCAPSED_STRING","'Administration pages'",142],")",",",["T_WHITESPACE","\n        ",142],"]",",",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$default_options",144],["T_WHITESPACE"," ",144],"+",["T_WHITESPACE"," ",144],"[",["T_WHITESPACE","\n          ",144],["T_CONSTANT_ENCAPSED_STRING","'#url'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_STRING","Url",145],["T_DOUBLE_COLON","::",145],["T_STRING","fromRoute",145],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",145],")",",",["T_WHITESPACE","\n          ",145],["T_CONSTANT_ENCAPSED_STRING","'#title'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_STRING","t",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Front page'",146],")",",",["T_WHITESPACE","\n        ",146],"]",",",["T_WHITESPACE","\n      ",147],"]",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$content",151],"[",["T_CONSTANT_ENCAPSED_STRING","'next_steps'",151],"]",["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'#theme'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'item_list'",152],",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'#items'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$links",153],",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'#title'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","t",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Next steps'",154],")",",",["T_WHITESPACE","\n    ",154],")",";",["T_WHITESPACE","\n  ",155],"}",["T_WHITESPACE","\n  ",156],["T_COMMENT","\/\/ If a batch is running, let it run.\n",157],["T_WHITESPACE","  ",158],["T_ELSEIF","elseif",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$request",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","query",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","has",158],"(",["T_CONSTANT_ENCAPSED_STRING","'batch'",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$content",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","_batch_page",159],"(",["T_VARIABLE","$request",159],")",";",["T_WHITESPACE","\n    ",159],["T_COMMENT","\/\/ If _batch_page() returns a response object (likely a JsonResponse for\n",160],["T_WHITESPACE","    ",161],["T_COMMENT","\/\/ JavaScript-based batch processing), send it immediately.\n",161],["T_WHITESPACE","    ",162],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$content",162],["T_WHITESPACE"," ",162],["T_INSTANCEOF","instanceof",162],["T_WHITESPACE"," ",162],["T_STRING","Response",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$content",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","send",163],"(",")",";",["T_WHITESPACE","\n      ",163],["T_EXIT","exit",164],";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n  ",165],"}",["T_WHITESPACE","\n  ",166],["T_ELSE","else",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n    ",167],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_EMPTY","empty",168],"(",["T_VARIABLE","$_SESSION",168],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_operation'",168],"]",")",["T_WHITESPACE"," ",168],["T_BOOLEAN_OR","||",168],["T_WHITESPACE"," ",168],["T_EMPTY","empty",168],"(",["T_VARIABLE","$_SESSION",168],"[",["T_CONSTANT_ENCAPSED_STRING","'authorize_filetransfer_info'",168],"]",")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n      ",168],["T_VARIABLE","$content",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_STRING","t",169],"(",["T_CONSTANT_ENCAPSED_STRING","'It appears you have reached this page in error.'",169],")","]",";",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n    ",170],["T_ELSEIF","elseif",171],["T_WHITESPACE"," ",171],"(","!",["T_VARIABLE","$batch",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","batch_get",171],"(",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n      ",171],["T_COMMENT","\/\/ We have a batch to process, show the filetransfer form.\n",172],["T_WHITESPACE","      ",173],["T_TRY","try",173],["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$content",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_NS_SEPARATOR","\\",174],["T_STRING","Drupal",174],["T_DOUBLE_COLON","::",174],["T_STRING","formBuilder",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","getForm",174],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\FileTransfer\\Form\\FileTransferAuthorizeForm'",174],")",";",["T_WHITESPACE","\n      ",174],"}",["T_WHITESPACE","\n      ",175],["T_CATCH","catch",176],["T_WHITESPACE"," ",176],"(",["T_STRING","EnforcedResponseException",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$e",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$e",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getResponse",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","send",177],"(",")",";",["T_WHITESPACE","\n        ",177],["T_EXIT","exit",178],";",["T_WHITESPACE","\n      ",178],"}",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n  ",181],["T_COMMENT","\/\/ We defer the display of messages until all operations are done.\n",182],["T_WHITESPACE","  ",183],["T_VARIABLE","$show_messages",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],"!","(","(",["T_VARIABLE","$batch",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","batch_get",183],"(",")",")",["T_WHITESPACE"," ",183],["T_BOOLEAN_AND","&&",183],["T_WHITESPACE"," ",183],["T_ISSET","isset",183],"(",["T_VARIABLE","$batch",183],"[",["T_CONSTANT_ENCAPSED_STRING","'running'",183],"]",")",")",";",["T_WHITESPACE","\n",183],"}",["T_WHITESPACE","\n",184],["T_ELSE","else",185],["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n  ",185],["T_NS_SEPARATOR","\\",186],["T_STRING","Drupal",186],["T_DOUBLE_COLON","::",186],["T_STRING","logger",186],"(",["T_CONSTANT_ENCAPSED_STRING","'access denied'",186],")",["T_OBJECT_OPERATOR","->",186],["T_STRING","warning",186],"(",["T_CONSTANT_ENCAPSED_STRING","'authorize.php'",186],")",";",["T_WHITESPACE","\n  ",186],["T_VARIABLE","$page_title",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","t",187],"(",["T_CONSTANT_ENCAPSED_STRING","'Access denied'",187],")",";",["T_WHITESPACE","\n  ",187],["T_VARIABLE","$content",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_STRING","t",188],"(",["T_CONSTANT_ENCAPSED_STRING","'You are not allowed to access this page.'",188],")","]",";",["T_WHITESPACE","\n",188],"}",["T_WHITESPACE","\n\n",189],["T_VARIABLE","$bare_html_page_renderer",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Drupal",191],["T_DOUBLE_COLON","::",191],["T_STRING","service",191],"(",["T_CONSTANT_ENCAPSED_STRING","'bare_html_page_renderer'",191],")",";",["T_WHITESPACE","\n",191],["T_VARIABLE","$response",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$bare_html_page_renderer",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","renderBarePage",192],"(",["T_VARIABLE","$content",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$page_title",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'maintenance_page'",192],",",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n  ",192],["T_CONSTANT_ENCAPSED_STRING","'#show_messages'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$show_messages",193],",",["T_WHITESPACE","\n",193],")",")",";",["T_WHITESPACE","\n",194],["T_IF","if",195],["T_WHITESPACE"," ",195],"(","!",["T_VARIABLE","$is_allowed",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n  ",195],["T_VARIABLE","$response",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setStatusCode",196],"(",["T_LNUMBER","403",196],")",";",["T_WHITESPACE","\n",196],"}",["T_WHITESPACE","\n",197],["T_VARIABLE","$response",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","send",198],"(",")",";",["T_WHITESPACE","\n",198]]
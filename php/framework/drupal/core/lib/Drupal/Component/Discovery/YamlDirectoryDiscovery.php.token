[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Component",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Discovery",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FileSystem",5],["T_NS_SEPARATOR","\\",5],["T_STRING","RegexDirectoryIterator",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Serialization",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","InvalidDataTypeException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Serialization",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Yaml",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FileCache",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FileCacheFactory",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Discovers multiple YAML files in a set of directories.\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","YamlDirectoryDiscovery",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","DiscoverableInterface",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Defines the key in the discovered data where the file path is stored.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_CONST","const",18],["T_WHITESPACE"," ",18],["T_STRING","FILE_KEY",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'_discovered_file_path'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * An array of directories to scan, keyed by the provider.\n   *\n   * The value can either be a string or an array of strings. The string values\n   * should be the path of a directory to scan.\n   *\n   * @var array\n   *\/",20],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$directories",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"[","]",";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * The suffix for the file cache key.\n   *\n   * @var string\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$fileCacheKeySuffix",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * The key contained in the discovered data that identifies it.\n   *\n   * @var string\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$idKey",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Constructs a YamlDirectoryDiscovery object.\n   *\n   * @param array $directories\n   *   An array of directories to scan, keyed by the provider. The value can\n   *   either be a string or an array of strings. The string values should be\n   *   the path of a directory to scan.\n   * @param string $file_cache_key_suffix\n   *   The file cache key suffix. This should be unique for each type of\n   *   discovery.\n   * @param string $key\n   *   (optional) The key contained in the discovered data that identifies it.\n   *   Defaults to 'id'.\n   *\/",44],["T_WHITESPACE","\n  ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","__construct",58],"(",["T_ARRAY","array",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$directories",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$file_cache_key_suffix",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$key",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'id'",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","directories",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$directories",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","fileCacheKeySuffix",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$file_cache_key_suffix",60],";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","idKey",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$key",61],";",["T_WHITESPACE","\n  ",61],"}",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",64],["T_WHITESPACE","\n  ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","findAll",67],"(",")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$all",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_VARIABLE","$files",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","findFiles",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$file_cache",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","FileCacheFactory",72],["T_DOUBLE_COLON","::",72],["T_STRING","get",72],"(",["T_CONSTANT_ENCAPSED_STRING","'yaml_discovery:'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","fileCacheKeySuffix",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Try to load from the file cache first.\n",74],["T_WHITESPACE","    ",75],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$file_cache",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getMultiple",75],"(",["T_STRING","array_keys",75],"(",["T_VARIABLE","$files",75],")",")",["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$file",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$data",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$all",76],"[",["T_VARIABLE","$files",76],"[",["T_VARIABLE","$file",76],"]","]","[",["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getIdentifier",76],"(",["T_VARIABLE","$file",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$data",76],")","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$data",76],";",["T_WHITESPACE","\n      ",76],["T_UNSET","unset",77],"(",["T_VARIABLE","$files",77],"[",["T_VARIABLE","$file",77],"]",")",";",["T_WHITESPACE","\n    ",77],"}",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ If there are files left that were not returned from the cache, load and\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ parse them now. This list was flipped above and is keyed by filename.\n",81],["T_WHITESPACE","    ",82],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$files",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$files",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$file",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$provider",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n        ",83],["T_COMMENT","\/\/ If a file is empty or its contents are commented out, return an empty\n",84],["T_WHITESPACE","        ",85],["T_COMMENT","\/\/ array instead of NULL for type consistency.\n",85],["T_WHITESPACE","        ",86],["T_TRY","try",86],["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n          ",86],["T_VARIABLE","$data",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","Yaml",87],["T_DOUBLE_COLON","::",87],["T_STRING","decode",87],"(",["T_STRING","file_get_contents",87],"(",["T_VARIABLE","$file",87],")",")",["T_WHITESPACE"," ",87],"?",":",["T_WHITESPACE"," ",87],"[","]",";",["T_WHITESPACE","\n        ",87],"}",["T_WHITESPACE","\n        ",88],["T_CATCH","catch",89],["T_WHITESPACE"," ",89],"(",["T_STRING","InvalidDataTypeException",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$e",89],")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n          ",89],["T_THROW","throw",90],["T_WHITESPACE"," ",90],["T_NEW","new",90],["T_WHITESPACE"," ",90],["T_STRING","DiscoveryException",90],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",90],["T_VARIABLE","$file",90],["T_ENCAPSED_AND_WHITESPACE"," contains invalid YAML",90],"\"",",",["T_WHITESPACE"," ",90],["T_LNUMBER","0",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$e",90],")",";",["T_WHITESPACE","\n        ",90],"}",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$data",92],"[",["T_STATIC","static",92],["T_DOUBLE_COLON","::",92],["T_STRING","FILE_KEY",92],"]",["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$file",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$all",93],"[",["T_VARIABLE","$provider",93],"]","[",["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","getIdentifier",93],"(",["T_VARIABLE","$file",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$data",93],")","]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$data",93],";",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$file_cache",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","set",94],"(",["T_VARIABLE","$file",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$data",94],")",";",["T_WHITESPACE","\n      ",94],"}",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$all",98],";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * Gets the identifier from the data.\n   *\n   * @param string $file\n   *   The filename.\n   * @param array $data\n   *   The data from the YAML file.\n   *\n   * @return string\n   *   The identifier from the data.\n   *\/",101],["T_WHITESPACE","\n  ",111],["T_PROTECTED","protected",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","getIdentifier",112],"(",["T_VARIABLE","$file",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$data",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(","!",["T_ISSET","isset",113],"(",["T_VARIABLE","$data",113],"[",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","idKey",113],"]",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_THROW","throw",114],["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","DiscoveryException",114],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",114],["T_VARIABLE","$file",114],["T_ENCAPSED_AND_WHITESPACE"," contains no data in the identifier key '",114],["T_CURLY_OPEN","{",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","idKey",114],"}",["T_ENCAPSED_AND_WHITESPACE","'",114],"\"",")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n    ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$data",116],"[",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","idKey",116],"]",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Returns an array of providers keyed by file path.\n   *\n   * @return array\n   *   An array of providers keyed by file path.\n   *\/",119],["T_WHITESPACE","\n  ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","findFiles",125],"(",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$file_list",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],"[","]",";",["T_WHITESPACE","\n    ",126],["T_FOREACH","foreach",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","directories",127],["T_WHITESPACE"," ",127],["T_AS","as",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$provider",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$directories",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$directories",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY_CAST","(array)",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$directories",128],";",["T_WHITESPACE","\n      ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$directories",129],["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$directory",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n        ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_STRING","is_dir",130],"(",["T_VARIABLE","$directory",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n          ",130],["T_DOC_COMMENT","\/** @var \\SplFileInfo $fileInfo *\/",131],["T_WHITESPACE","\n          ",131],["T_FOREACH","foreach",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getDirectoryIterator",132],"(",["T_VARIABLE","$directory",132],")",["T_WHITESPACE"," ",132],["T_AS","as",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$fileInfo",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n            ",132],["T_VARIABLE","$file_list",133],"[",["T_VARIABLE","$fileInfo",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getPathname",133],"(",")","]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$provider",133],";",["T_WHITESPACE","\n          ",133],"}",["T_WHITESPACE","\n        ",134],"}",["T_WHITESPACE","\n      ",135],"}",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n    ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$file_list",138],";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * Gets an iterator to loop over the files in the provided directory.\n   *\n   * This method exists so that it is easy to replace this functionality in a\n   * class that extends this one. For example, it could be used to make the scan\n   * recursive.\n   *\n   * @param string $directory\n   *   The directory to scan.\n   *\n   * @return \\Traversable\n   *   An \\Traversable object or array where the values are \\SplFileInfo\n   *   objects.\n   *\/",141],["T_WHITESPACE","\n  ",154],["T_PROTECTED","protected",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","getDirectoryIterator",155],"(",["T_VARIABLE","$directory",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_NEW","new",156],["T_WHITESPACE"," ",156],["T_STRING","RegexDirectoryIterator",156],"(",["T_VARIABLE","$directory",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'\/\\.yml$\/i'",156],")",";",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n",157],"}",["T_WHITESPACE","\n",159]]
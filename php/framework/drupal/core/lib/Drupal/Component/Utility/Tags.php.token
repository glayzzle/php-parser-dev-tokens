[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Component",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Utility",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Defines a class that can explode and implode tags.\n *\n * @ingroup utility\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","Tags",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Explodes a string of tags into an array.\n   *\n   * @param string $tags\n   *   A string to explode.\n   *\n   * @return array\n   *   An array of tags.\n   *\/",12],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","explode",21],"(",["T_VARIABLE","$tags",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/\/ This regexp allows the following types of user input:\n",22],["T_WHITESPACE","    ",23],["T_COMMENT","\/\/ this, \"somecompany, llc\", \"and \"\"this\"\" w,o.rks\", foo bar\n",23],["T_WHITESPACE","    ",24],["T_VARIABLE","$regexp",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'%(?:^|,\\ *)(\"(?>[^\"]*)(?>\"\"[^\"]* )*\"|(?: [^\",]*))%x'",24],";",["T_WHITESPACE","\n    ",24],["T_STRING","preg_match_all",25],"(",["T_VARIABLE","$regexp",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$tags",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$matches",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$typed_tags",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_STRING","array_unique",26],"(",["T_VARIABLE","$matches",26],"[",["T_LNUMBER","1",26],"]",")",";",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$tags",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$typed_tags",29],["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$tag",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n      ",29],["T_COMMENT","\/\/ If a user has escaped a term (to demonstrate that it is a group,\n",30],["T_WHITESPACE","      ",31],["T_COMMENT","\/\/ or includes a comma or quote character), we remove the escape\n",31],["T_WHITESPACE","      ",32],["T_COMMENT","\/\/ formatting so to save the term into the database as the user intends.\n",32],["T_WHITESPACE","      ",33],["T_VARIABLE","$tag",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","trim",33],"(",["T_STRING","str_replace",33],"(",["T_CONSTANT_ENCAPSED_STRING","'\"\"'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'\"'",33],",",["T_WHITESPACE"," ",33],["T_STRING","preg_replace",33],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\"(.*)\"$\/'",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'\\1'",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$tag",33],")",")",")",";",["T_WHITESPACE","\n      ",33],["T_IF","if",34],["T_WHITESPACE"," ",34],"(",["T_VARIABLE","$tag",34],["T_WHITESPACE"," ",34],["T_IS_NOT_EQUAL","!=",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","\"\"",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n        ",34],["T_VARIABLE","$tags",35],"[","]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$tag",35],";",["T_WHITESPACE","\n      ",35],"}",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$tags",39],";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Encodes a tag string, taking care of special cases like commas and quotes.\n   *\n   * @param string $tag\n   *   A tag string.\n   *\n   * @return string\n   *   The encoded string.\n   *\/",42],["T_WHITESPACE","\n  ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_STATIC","static",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","encode",51],"(",["T_VARIABLE","$tag",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_STRING","strpos",52],"(",["T_VARIABLE","$tag",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","','",52],")",["T_WHITESPACE"," ",52],["T_IS_NOT_IDENTICAL","!==",52],["T_WHITESPACE"," ",52],["T_STRING","FALSE",52],["T_WHITESPACE"," ",52],["T_BOOLEAN_OR","||",52],["T_WHITESPACE"," ",52],["T_STRING","strpos",52],"(",["T_VARIABLE","$tag",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\"'",52],")",["T_WHITESPACE"," ",52],["T_IS_NOT_IDENTICAL","!==",52],["T_WHITESPACE"," ",52],["T_STRING","FALSE",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n      ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\"'",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_STRING","str_replace",53],"(",["T_CONSTANT_ENCAPSED_STRING","'\"'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\"\"'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$tag",53],")",["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\"'",53],";",["T_WHITESPACE","\n    ",53],"}",["T_WHITESPACE","\n    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$tag",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Implodes an array of tags into a string.\n   *\n   * @param array $tags\n   *   An array of tags.\n   *\n   * @return string\n   *   The imploded string.\n   *\/",58],["T_WHITESPACE","\n  ",66],["T_PUBLIC","public",67],["T_WHITESPACE"," ",67],["T_STATIC","static",67],["T_WHITESPACE"," ",67],["T_FUNCTION","function",67],["T_WHITESPACE"," ",67],["T_STRING","implode",67],"(",["T_VARIABLE","$tags",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$encoded_tags",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$tags",69],["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$tag",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$encoded_tags",70],"[","]",["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","self",70],["T_DOUBLE_COLON","::",70],["T_STRING","encode",70],"(",["T_VARIABLE","$tag",70],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n    ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],["T_STRING","implode",72],"(",["T_CONSTANT_ENCAPSED_STRING","', '",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$encoded_tags",72],")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n",73],"}",["T_WHITESPACE","\n",75]]
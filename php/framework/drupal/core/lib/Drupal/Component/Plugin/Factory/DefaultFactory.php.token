[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Component",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Factory",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Definition",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PluginDefinitionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Discovery",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DiscoveryInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Exception",7],["T_NS_SEPARATOR","\\",7],["T_STRING","PluginException",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Default plugin factory.\n *\n * Instantiates plugin instances by passing the full configuration array as a\n * single constructor argument. Plugin types wanting to support plugin classes\n * with more flexible constructor signatures can do so by using an alternate\n * factory such as Drupal\\Component\\Plugin\\Factory\\ReflectionFactory.\n *\/",9],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","DefaultFactory",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","FactoryInterface",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The object that retrieves the definitions of the plugins that this factory instantiates.\n   *\n   * The plugin definition includes the plugin class and possibly other\n   * information necessary for proper instantiation.\n   *\n   * @var \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryInterface\n   *\/",19],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$discovery",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Defines an interface each plugin should implement.\n   *\n   * @var string|null\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$interface",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Constructs a Drupal\\Component\\Plugin\\Factory\\DefaultFactory object.\n   *\n   * @param \\Drupal\\Component\\Plugin\\Discovery\\DiscoveryInterface $discovery\n   *   The plugin discovery.\n   * @param string|null $plugin_interface\n   *   (optional) The interface each plugin should implement.\n   *\/",36],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_STRING","DiscoveryInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$discovery",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$plugin_interface",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","NULL",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","discovery",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$discovery",45],";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","interface",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$plugin_interface",46],";",["T_WHITESPACE","\n  ",46],"}",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","createInstance",52],"(",["T_VARIABLE","$plugin_id",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$configuration",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$plugin_definition",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","discovery",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getDefinition",53],"(",["T_VARIABLE","$plugin_id",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$plugin_class",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STATIC","static",54],["T_DOUBLE_COLON","::",54],["T_STRING","getPluginClass",54],"(",["T_VARIABLE","$plugin_id",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$plugin_definition",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","interface",54],")",";",["T_WHITESPACE","\n    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_NEW","new",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$plugin_class",55],"(",["T_VARIABLE","$configuration",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$plugin_id",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$plugin_definition",55],")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Finds the class relevant for a given plugin.\n   *\n   * @param string $plugin_id\n   *   The id of a plugin.\n   * @param \\Drupal\\Component\\Plugin\\Definition\\PluginDefinitionInterface|mixed[] $plugin_definition\n   *   The plugin definition associated with the plugin ID.\n   * @param string $required_interface\n   *   (optional) THe required plugin interface.\n   *\n   * @return string\n   *   The appropriate class name.\n   *\n   * @throws \\Drupal\\Component\\Plugin\\Exception\\PluginException\n   *   Thrown when there is no class specified, the class doesn't exist, or\n   *   the class does not implement the specified required interface.\n   *\/",58],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_STATIC","static",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","getPluginClass",75],"(",["T_VARIABLE","$plugin_id",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$plugin_definition",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","NULL",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$required_interface",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","NULL",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$missing_class_message",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","sprintf",76],"(",["T_CONSTANT_ENCAPSED_STRING","'The plugin (%s) did not specify an instance class.'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$plugin_id",76],")",";",["T_WHITESPACE","\n    ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","is_array",77],"(",["T_VARIABLE","$plugin_definition",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_EMPTY","empty",78],"(",["T_VARIABLE","$plugin_definition",78],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",78],"]",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_THROW","throw",79],["T_WHITESPACE"," ",79],["T_NEW","new",79],["T_WHITESPACE"," ",79],["T_STRING","PluginException",79],"(",["T_VARIABLE","$missing_class_message",79],")",";",["T_WHITESPACE","\n      ",79],"}",["T_WHITESPACE","\n\n      ",80],["T_VARIABLE","$class",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$plugin_definition",82],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",82],"]",";",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n    ",83],["T_ELSEIF","elseif",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$plugin_definition",84],["T_WHITESPACE"," ",84],["T_INSTANCEOF","instanceof",84],["T_WHITESPACE"," ",84],["T_STRING","PluginDefinitionInterface",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$plugin_definition",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getClass",85],"(",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n        ",85],["T_THROW","throw",86],["T_WHITESPACE"," ",86],["T_NEW","new",86],["T_WHITESPACE"," ",86],["T_STRING","PluginException",86],"(",["T_VARIABLE","$missing_class_message",86],")",";",["T_WHITESPACE","\n      ",86],"}",["T_WHITESPACE","\n\n      ",87],["T_VARIABLE","$class",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$plugin_definition",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getClass",89],"(",")",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n    ",90],["T_ELSE","else",91],["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$plugin_definition_type",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","is_object",92],"(",["T_VARIABLE","$plugin_definition",92],")",["T_WHITESPACE"," ",92],"?",["T_WHITESPACE"," ",92],["T_STRING","get_class",92],"(",["T_VARIABLE","$plugin_definition",92],")",["T_WHITESPACE"," ",92],":",["T_WHITESPACE"," ",92],["T_STRING","gettype",92],"(",["T_VARIABLE","$plugin_definition",92],")",";",["T_WHITESPACE","\n      ",92],["T_THROW","throw",93],["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","PluginException",93],"(",["T_STRING","sprintf",93],"(",["T_CONSTANT_ENCAPSED_STRING","'%s can only handle plugin definitions that are arrays or that implement %s, but %s given.'",93],",",["T_WHITESPACE"," ",93],["T_CLASS_C","__CLASS__",93],",",["T_WHITESPACE"," ",93],["T_STRING","PluginDefinitionInterface",93],["T_DOUBLE_COLON","::",93],["T_CLASS","class",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$plugin_definition_type",93],")",")",";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n\n    ",94],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","!",["T_STRING","class_exists",96],"(",["T_VARIABLE","$class",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_THROW","throw",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","PluginException",97],"(",["T_STRING","sprintf",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Plugin (%s) instance class \"%s\" does not exist.'",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$plugin_id",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$class",97],")",")",";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n\n    ",98],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$required_interface",100],["T_WHITESPACE"," ",100],["T_BOOLEAN_AND","&&",100],["T_WHITESPACE"," ",100],"!",["T_STRING","is_subclass_of",100],"(",["T_VARIABLE","$class",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$required_interface",100],")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","PluginException",101],"(",["T_STRING","sprintf",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Plugin \"%s\" (%s) must implement interface %s.'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$plugin_id",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$class",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$required_interface",101],")",")",";",["T_WHITESPACE","\n    ",101],"}",["T_WHITESPACE","\n\n    ",102],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$class",104],";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n",105],"}",["T_WHITESPACE","\n",107]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Command",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Variable",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Connection",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Console",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Input",7],["T_NS_SEPARATOR","\\",7],["T_STRING","InputInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Console",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Input",8],["T_NS_SEPARATOR","\\",8],["T_STRING","InputOption",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Console",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Output",9],["T_NS_SEPARATOR","\\",9],["T_STRING","OutputInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Provides a command to dump the current database to a script.\n *\n * This script exports all tables in the given database, and all data (except\n * for tables denoted as schema-only). The resulting script creates the tables\n * and populates them with the exported data.\n *\n * @todo This command is currently only compatible with MySQL. Making it\n *   backend-agnostic will require \\Drupal\\Core\\Database\\Schema support the\n *   ability to retrieve table schema information. Note that using a raw\n *   SQL dump file here (eg, generated from mysqldump or pg_dump) is not an\n *   option since these tend to still be database-backend specific.\n * @see https:\/\/www.drupal.org\/node\/301038\n *\n * @see \\Drupal\\Core\\Command\\DbDumpApplication\n *\/",11],["T_WHITESPACE","\n",26],["T_CLASS","class",27],["T_WHITESPACE"," ",27],["T_STRING","DbDumpCommand",27],["T_WHITESPACE"," ",27],["T_EXTENDS","extends",27],["T_WHITESPACE"," ",27],["T_STRING","DbCommandBase",27],["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * An array of table patterns to exclude completely.\n   *\n   * This excludes any lingering simpletest tables generated during test runs.\n   *\n   * @var array\n   *\/",29],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$excludeTables",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],"[",["T_CONSTANT_ENCAPSED_STRING","'test[0-9]+'",36],"]",";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",38],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","configure",41],"(",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","setName",42],"(",["T_CONSTANT_ENCAPSED_STRING","'dump-database-d8-mysql'",42],")",["T_WHITESPACE","\n      ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","setDescription",43],"(",["T_CONSTANT_ENCAPSED_STRING","'Dump the current database to a generation script'",43],")",["T_WHITESPACE","\n      ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","addOption",44],"(",["T_CONSTANT_ENCAPSED_STRING","'schema-only'",44],",",["T_WHITESPACE"," ",44],["T_STRING","NULL",44],",",["T_WHITESPACE"," ",44],["T_STRING","InputOption",44],["T_DOUBLE_COLON","::",44],["T_STRING","VALUE_OPTIONAL",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'A comma separated list of tables to only export the schema without data.'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'cache.*,sessions,watchdog'",44],")",";",["T_WHITESPACE","\n    ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","configure",45],"(",")",";",["T_WHITESPACE","\n  ",45],"}",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",48],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","execute",51],"(",["T_STRING","InputInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$input",51],",",["T_WHITESPACE"," ",51],["T_STRING","OutputInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$output",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$connection",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","getDatabaseConnection",52],"(",["T_VARIABLE","$input",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ If not explicitly set, disable ANSI which will break generated php.\n",54],["T_WHITESPACE","    ",55],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$input",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","hasParameterOption",55],"(","[",["T_CONSTANT_ENCAPSED_STRING","'--ansi'",55],"]",")",["T_WHITESPACE"," ",55],["T_IS_NOT_IDENTICAL","!==",55],["T_WHITESPACE"," ",55],["T_STRING","TRUE",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$output",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","setDecorated",56],"(",["T_STRING","FALSE",56],")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$schema_tables",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$input",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getOption",59],"(",["T_CONSTANT_ENCAPSED_STRING","'schema-only'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$schema_tables",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","explode",60],"(",["T_CONSTANT_ENCAPSED_STRING","','",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$schema_tables",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$output",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","writeln",62],"(",["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","generateScript",62],"(",["T_VARIABLE","$connection",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$schema_tables",62],")",",",["T_WHITESPACE"," ",62],["T_STRING","OutputInterface",62],["T_DOUBLE_COLON","::",62],["T_STRING","OUTPUT_RAW",62],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Generates the database script.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param array $schema_only\n   *   Table patterns for which to only dump the schema, no data.\n   * @return string The PHP script.\n   *   The PHP script.\n   *\/",65],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","generateScript",75],"(",["T_STRING","Connection",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$connection",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$schema_only",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[","]",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$tables",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","''",76],";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$schema_only_patterns",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n    ",78],["T_FOREACH","foreach",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$schema_only",79],["T_WHITESPACE"," ",79],["T_AS","as",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$match",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$schema_only_patterns",80],"[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'\/^'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$match",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'$\/'",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getTables",83],"(",["T_VARIABLE","$connection",83],")",["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$table",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$schema",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getTableSchema",84],"(",["T_VARIABLE","$connection",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$table",84],")",";",["T_WHITESPACE","\n      ",84],["T_COMMENT","\/\/ Check for schema only.\n",85],["T_WHITESPACE","      ",86],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_EMPTY","empty",86],"(",["T_VARIABLE","$schema_only_patterns",86],")",["T_WHITESPACE"," ",86],["T_BOOLEAN_OR","||",86],["T_WHITESPACE"," ",86],["T_STRING","preg_replace",86],"(",["T_VARIABLE","$schema_only_patterns",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","''",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$table",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$data",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getTableData",87],"(",["T_VARIABLE","$connection",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$table",87],")",";",["T_WHITESPACE","\n      ",87],"}",["T_WHITESPACE","\n      ",88],["T_ELSE","else",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$data",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[","]",";",["T_WHITESPACE","\n      ",90],"}",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$tables",92],["T_WHITESPACE"," ",92],["T_CONCAT_EQUAL",".=",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getTableScript",92],"(",["T_VARIABLE","$table",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$schema",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$data",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$script",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getTemplate",94],"(",")",";",["T_WHITESPACE","\n    ",94],["T_COMMENT","\/\/ Substitute in the tables.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$script",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","str_replace",96],"(",["T_CONSTANT_ENCAPSED_STRING","'{{TABLES}}'",96],",",["T_WHITESPACE"," ",96],["T_STRING","trim",96],"(",["T_VARIABLE","$tables",96],")",",",["T_WHITESPACE"," ",96],["T_VARIABLE","$script",96],")",";",["T_WHITESPACE","\n    ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_STRING","trim",97],"(",["T_VARIABLE","$script",97],")",";",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n  ",98],["T_DOC_COMMENT","\/**\n   * Returns a list of tables, not including those set to be excluded.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @return array An array of table names.\n   *   An array of table names.\n   *\/",100],["T_WHITESPACE","\n  ",107],["T_PROTECTED","protected",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getTables",108],"(",["T_STRING","Connection",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$connection",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$tables",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","array_values",109],"(",["T_VARIABLE","$connection",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","schema",109],"(",")",["T_OBJECT_OPERATOR","->",109],["T_STRING","findTables",109],"(",["T_CONSTANT_ENCAPSED_STRING","'%'",109],")",")",";",["T_WHITESPACE","\n\n    ",109],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$tables",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$key",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$table",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_COMMENT","\/\/ Remove any explicitly excluded tables.\n",112],["T_WHITESPACE","      ",113],["T_FOREACH","foreach",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","excludeTables",113],["T_WHITESPACE"," ",113],["T_AS","as",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$pattern",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n        ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","preg_match",114],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$pattern",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'$\/'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$table",114],")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n          ",114],["T_UNSET","unset",115],"(",["T_VARIABLE","$tables",115],"[",["T_VARIABLE","$key",115],"]",")",";",["T_WHITESPACE","\n        ",115],"}",["T_WHITESPACE","\n      ",116],"}",["T_WHITESPACE","\n    ",117],"}",["T_WHITESPACE","\n\n    ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$tables",120],";",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * Returns a schema array for a given table.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The table name.\n   *\n   * @return array\n   *   A schema array (as defined by hook_schema()).\n   *\n   * @todo This implementation is hard-coded for MySQL.\n   *\/",123],["T_WHITESPACE","\n  ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getTableSchema",136],"(",["T_STRING","Connection",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$connection",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$table",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ Check this is MySQL.\n",137],["T_WHITESPACE","    ",138],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$connection",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","databaseType",138],"(",")",["T_WHITESPACE"," ",138],["T_IS_NOT_IDENTICAL","!==",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'mysql'",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_THROW","throw",139],["T_WHITESPACE"," ",139],["T_NEW","new",139],["T_WHITESPACE"," ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","RuntimeException",139],"(",["T_CONSTANT_ENCAPSED_STRING","'This script can only be used with MySQL database backends.'",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$query",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$connection",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","query",142],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW FULL COLUMNS FROM {\"",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_VARIABLE","$table",142],["T_WHITESPACE"," ",142],".",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","\"}\"",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$definition",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],"[","]",";",["T_WHITESPACE","\n    ",143],["T_WHILE","while",144],["T_WHITESPACE"," ",144],"(","(",["T_VARIABLE","$row",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$query",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","fetchAssoc",144],"(",")",")",["T_WHITESPACE"," ",144],["T_IS_NOT_IDENTICAL","!==",144],["T_WHITESPACE"," ",144],["T_STRING","FALSE",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$name",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$row",145],"[",["T_CONSTANT_ENCAPSED_STRING","'Field'",145],"]",";",["T_WHITESPACE","\n      ",145],["T_COMMENT","\/\/ Parse out the field type and meta information.\n",146],["T_WHITESPACE","      ",147],["T_STRING","preg_match",147],"(",["T_CONSTANT_ENCAPSED_STRING","'@([a-z]+)(?:\\((\\d+)(?:,(\\d+))?\\))?\\s*(unsigned)?@'",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$row",147],"[",["T_CONSTANT_ENCAPSED_STRING","'Type'",147],"]",",",["T_WHITESPACE"," ",147],["T_VARIABLE","$matches",147],")",";",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$type",148],["T_WHITESPACE","  ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","fieldTypeMap",148],"(",["T_VARIABLE","$connection",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$matches",148],"[",["T_LNUMBER","1",148],"]",")",";",["T_WHITESPACE","\n      ",148],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$row",149],"[",["T_CONSTANT_ENCAPSED_STRING","'Extra'",149],"]",["T_WHITESPACE"," ",149],["T_IS_IDENTICAL","===",149],["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n        ",149],["T_COMMENT","\/\/ If this is an auto increment, then the type is 'serial'.\n",150],["T_WHITESPACE","        ",151],["T_VARIABLE","$type",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'serial'",151],";",["T_WHITESPACE","\n      ",151],"}",["T_WHITESPACE","\n      ",152],["T_VARIABLE","$definition",153],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",153],"]","[",["T_VARIABLE","$name",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],"[",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'type'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$type",154],",",["T_WHITESPACE","\n        ",154],["T_CONSTANT_ENCAPSED_STRING","'not null'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$row",155],"[",["T_CONSTANT_ENCAPSED_STRING","'Null'",155],"]",["T_WHITESPACE"," ",155],["T_IS_IDENTICAL","===",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'NO'",155],",",["T_WHITESPACE","\n      ",155],"]",";",["T_WHITESPACE","\n      ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$size",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","fieldSizeMap",157],"(",["T_VARIABLE","$connection",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$matches",157],"[",["T_LNUMBER","1",157],"]",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n        ",157],["T_VARIABLE","$definition",158],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",158],"]","[",["T_VARIABLE","$name",158],"]","[",["T_CONSTANT_ENCAPSED_STRING","'size'",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$size",158],";",["T_WHITESPACE","\n      ",158],"}",["T_WHITESPACE","\n      ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$matches",160],"[",["T_LNUMBER","2",160],"]",")",["T_WHITESPACE"," ",160],["T_BOOLEAN_AND","&&",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$type",160],["T_WHITESPACE"," ",160],["T_IS_IDENTICAL","===",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'numeric'",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n        ",160],["T_COMMENT","\/\/ Add precision and scale.\n",161],["T_WHITESPACE","        ",162],["T_VARIABLE","$definition",162],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",162],"]","[",["T_VARIABLE","$name",162],"]","[",["T_CONSTANT_ENCAPSED_STRING","'precision'",162],"]",["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$matches",162],"[",["T_LNUMBER","2",162],"]",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$definition",163],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",163],"]","[",["T_VARIABLE","$name",163],"]","[",["T_CONSTANT_ENCAPSED_STRING","'scale'",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$matches",163],"[",["T_LNUMBER","3",163],"]",";",["T_WHITESPACE","\n      ",163],"}",["T_WHITESPACE","\n      ",164],["T_ELSEIF","elseif",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$type",165],["T_WHITESPACE"," ",165],["T_IS_IDENTICAL","===",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'time'",165],["T_WHITESPACE"," ",165],["T_BOOLEAN_OR","||",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$type",165],["T_WHITESPACE"," ",165],["T_IS_IDENTICAL","===",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'datetime'",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n        ",165],["T_COMMENT","\/\/ @todo Core doesn't support these, but copied from `migrate-db.sh` for now.\n",166],["T_WHITESPACE","        ",167],["T_COMMENT","\/\/ Convert to varchar.\n",167],["T_WHITESPACE","        ",168],["T_VARIABLE","$definition",168],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",168],"]","[",["T_VARIABLE","$name",168],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'varchar'",168],";",["T_WHITESPACE","\n        ",168],["T_VARIABLE","$definition",169],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",169],"]","[",["T_VARIABLE","$name",169],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'100'",169],";",["T_WHITESPACE","\n      ",169],"}",["T_WHITESPACE","\n      ",170],["T_ELSEIF","elseif",171],["T_WHITESPACE"," ",171],"(","!",["T_ISSET","isset",171],"(",["T_VARIABLE","$definition",171],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",171],"]","[",["T_VARIABLE","$name",171],"]","[",["T_CONSTANT_ENCAPSED_STRING","'size'",171],"]",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n        ",171],["T_COMMENT","\/\/ Try use the provided length, if it doesn't exist default to 100. It's\n",172],["T_WHITESPACE","        ",173],["T_COMMENT","\/\/ not great but good enough for our dumps at this point.\n",173],["T_WHITESPACE","        ",174],["T_VARIABLE","$definition",174],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",174],"]","[",["T_VARIABLE","$name",174],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ISSET","isset",174],"(",["T_VARIABLE","$matches",174],"[",["T_LNUMBER","2",174],"]",")",["T_WHITESPACE"," ",174],"?",["T_WHITESPACE"," ",174],["T_VARIABLE","$matches",174],"[",["T_LNUMBER","2",174],"]",["T_WHITESPACE"," ",174],":",["T_WHITESPACE"," ",174],["T_LNUMBER","100",174],";",["T_WHITESPACE","\n      ",174],"}",["T_WHITESPACE","\n\n      ",175],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_ISSET","isset",177],"(",["T_VARIABLE","$row",177],"[",["T_CONSTANT_ENCAPSED_STRING","'Default'",177],"]",")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$definition",178],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",178],"]","[",["T_VARIABLE","$name",178],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",178],"]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$row",178],"[",["T_CONSTANT_ENCAPSED_STRING","'Default'",178],"]",";",["T_WHITESPACE","\n      ",178],"}",["T_WHITESPACE","\n\n      ",179],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_ISSET","isset",181],"(",["T_VARIABLE","$matches",181],"[",["T_LNUMBER","4",181],"]",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$definition",182],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",182],"]","[",["T_VARIABLE","$name",182],"]","[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",182],"]",["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","TRUE",182],";",["T_WHITESPACE","\n      ",182],"}",["T_WHITESPACE","\n\n      ",183],["T_COMMENT","\/\/ Check for the 'varchar_ascii' type that should be 'binary'.\n",185],["T_WHITESPACE","      ",186],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_ISSET","isset",186],"(",["T_VARIABLE","$row",186],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",186],"]",")",["T_WHITESPACE"," ",186],["T_BOOLEAN_AND","&&",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$row",186],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",186],"]",["T_WHITESPACE"," ",186],["T_IS_EQUAL","==",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'ascii_bin'",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n        ",186],["T_VARIABLE","$definition",187],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",187],"]","[",["T_VARIABLE","$name",187],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'varchar_ascii'",187],";",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$definition",188],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",188],"]","[",["T_VARIABLE","$name",188],"]","[",["T_CONSTANT_ENCAPSED_STRING","'binary'",188],"]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","TRUE",188],";",["T_WHITESPACE","\n      ",188],"}",["T_WHITESPACE","\n\n      ",189],["T_COMMENT","\/\/ Check for the non-binary 'varchar_ascii'.\n",191],["T_WHITESPACE","      ",192],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_ISSET","isset",192],"(",["T_VARIABLE","$row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",192],"]",")",["T_WHITESPACE"," ",192],["T_BOOLEAN_AND","&&",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$row",192],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",192],"]",["T_WHITESPACE"," ",192],["T_IS_EQUAL","==",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'ascii_general_ci'",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$definition",193],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",193],"]","[",["T_VARIABLE","$name",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'varchar_ascii'",193],";",["T_WHITESPACE","\n      ",193],"}",["T_WHITESPACE","\n\n      ",194],["T_COMMENT","\/\/ Check for the 'utf8_bin' collation.\n",196],["T_WHITESPACE","      ",197],["T_IF","if",197],["T_WHITESPACE"," ",197],"(",["T_ISSET","isset",197],"(",["T_VARIABLE","$row",197],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",197],"]",")",["T_WHITESPACE"," ",197],["T_BOOLEAN_AND","&&",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$row",197],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",197],"]",["T_WHITESPACE"," ",197],["T_IS_EQUAL","==",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'utf8_bin'",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$definition",198],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",198],"]","[",["T_VARIABLE","$name",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'binary'",198],"]",["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","TRUE",198],";",["T_WHITESPACE","\n      ",198],"}",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_COMMENT","\/\/ Set primary key, unique keys, and indexes.\n",202],["T_WHITESPACE","    ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getTableIndexes",203],"(",["T_VARIABLE","$connection",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$table",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$definition",203],")",";",["T_WHITESPACE","\n\n    ",203],["T_COMMENT","\/\/ Set table collation.\n",205],["T_WHITESPACE","    ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getTableCollation",206],"(",["T_VARIABLE","$connection",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$table",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$definition",206],")",";",["T_WHITESPACE","\n\n    ",206],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$definition",208],";",["T_WHITESPACE","\n  ",208],"}",["T_WHITESPACE","\n\n  ",209],["T_DOC_COMMENT","\/**\n   * Adds primary key, unique keys, and index information to the schema.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The table to find indexes for.\n   * @param array &$definition\n   *   The schema definition to modify.\n   *\/",211],["T_WHITESPACE","\n  ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","getTableIndexes",221],"(",["T_STRING","Connection",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$connection",221],",",["T_WHITESPACE"," ",221],["T_VARIABLE","$table",221],",",["T_WHITESPACE"," ",221],"&",["T_VARIABLE","$definition",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n    ",221],["T_COMMENT","\/\/ Note, this query doesn't support ordering, so that is worked around\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ below by keying the array on Seq_in_index.\n",223],["T_WHITESPACE","    ",224],["T_VARIABLE","$query",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$connection",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","query",224],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW INDEX FROM {\"",224],["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_VARIABLE","$table",224],["T_WHITESPACE"," ",224],".",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","\"}\"",224],")",";",["T_WHITESPACE","\n    ",224],["T_WHILE","while",225],["T_WHITESPACE"," ",225],"(","(",["T_VARIABLE","$row",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$query",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","fetchAssoc",225],"(",")",")",["T_WHITESPACE"," ",225],["T_IS_NOT_IDENTICAL","!==",225],["T_WHITESPACE"," ",225],["T_STRING","FALSE",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n      ",225],["T_VARIABLE","$index_name",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_VARIABLE","$row",226],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",226],"]",";",["T_WHITESPACE","\n      ",226],["T_VARIABLE","$column",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$row",227],"[",["T_CONSTANT_ENCAPSED_STRING","'Column_name'",227],"]",";",["T_WHITESPACE","\n      ",227],["T_COMMENT","\/\/ Key the arrays by the index sequence for proper ordering (start at 0).\n",228],["T_WHITESPACE","      ",229],["T_VARIABLE","$order",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$row",229],"[",["T_CONSTANT_ENCAPSED_STRING","'Seq_in_index'",229],"]",["T_WHITESPACE"," ",229],"-",["T_WHITESPACE"," ",229],["T_LNUMBER","1",229],";",["T_WHITESPACE","\n\n      ",229],["T_COMMENT","\/\/ If specified, add length to the index.\n",231],["T_WHITESPACE","      ",232],["T_IF","if",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$row",232],"[",["T_CONSTANT_ENCAPSED_STRING","'Sub_part'",232],"]",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n        ",232],["T_VARIABLE","$column",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[",["T_VARIABLE","$column",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$row",233],"[",["T_CONSTANT_ENCAPSED_STRING","'Sub_part'",233],"]","]",";",["T_WHITESPACE","\n      ",233],"}",["T_WHITESPACE","\n\n      ",234],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$index_name",236],["T_WHITESPACE"," ",236],["T_IS_IDENTICAL","===",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n        ",236],["T_VARIABLE","$definition",237],"[",["T_CONSTANT_ENCAPSED_STRING","'primary key'",237],"]","[",["T_VARIABLE","$order",237],"]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$column",237],";",["T_WHITESPACE","\n      ",237],"}",["T_WHITESPACE","\n      ",238],["T_ELSEIF","elseif",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$row",239],"[",["T_CONSTANT_ENCAPSED_STRING","'Non_unique'",239],"]",["T_WHITESPACE"," ",239],["T_IS_EQUAL","==",239],["T_WHITESPACE"," ",239],["T_LNUMBER","0",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$definition",240],"[",["T_CONSTANT_ENCAPSED_STRING","'unique keys'",240],"]","[",["T_VARIABLE","$index_name",240],"]","[",["T_VARIABLE","$order",240],"]",["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$column",240],";",["T_WHITESPACE","\n      ",240],"}",["T_WHITESPACE","\n      ",241],["T_ELSE","else",242],["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n        ",242],["T_VARIABLE","$definition",243],"[",["T_CONSTANT_ENCAPSED_STRING","'indexes'",243],"]","[",["T_VARIABLE","$index_name",243],"]","[",["T_VARIABLE","$order",243],"]",["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$column",243],";",["T_WHITESPACE","\n      ",243],"}",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n  ",245],"}",["T_WHITESPACE","\n\n  ",246],["T_DOC_COMMENT","\/**\n   * Set the table collation.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The table to find indexes for.\n   * @param array &$definition\n   *   The schema definition to modify.\n   *\/",248],["T_WHITESPACE","\n  ",257],["T_PROTECTED","protected",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","getTableCollation",258],"(",["T_STRING","Connection",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$connection",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$table",258],",",["T_WHITESPACE"," ",258],"&",["T_VARIABLE","$definition",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$query",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$connection",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","query",259],"(",["T_CONSTANT_ENCAPSED_STRING","\"SHOW TABLE STATUS LIKE '{\"",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_VARIABLE","$table",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","\"}'\"",259],")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$data",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$query",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","fetchAssoc",260],"(",")",";",["T_WHITESPACE","\n\n    ",260],["T_COMMENT","\/\/ Set `mysql_character_set`. This will be ignored by other backends.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$definition",263],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_character_set'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","str_replace",263],"(",["T_CONSTANT_ENCAPSED_STRING","'_general_ci'",263],",",["T_WHITESPACE"," ",263],["T_CONSTANT_ENCAPSED_STRING","''",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$data",263],"[",["T_CONSTANT_ENCAPSED_STRING","'Collation'",263],"]",")",";",["T_WHITESPACE","\n  ",263],"}",["T_WHITESPACE","\n\n  ",264],["T_DOC_COMMENT","\/**\n   * Gets all data from a given table.\n   *\n   * If a table is set to be schema only, and empty array is returned.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The table to query.\n   *\n   * @return array\n   *   The data from the table as an array.\n   *\/",266],["T_WHITESPACE","\n  ",278],["T_PROTECTED","protected",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getTableData",279],"(",["T_STRING","Connection",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$connection",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$table",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$order",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","getFieldOrder",280],"(",["T_VARIABLE","$connection",280],",",["T_WHITESPACE"," ",280],["T_VARIABLE","$table",280],")",";",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$query",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_VARIABLE","$connection",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","query",281],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT * FROM {\"",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_VARIABLE","$table",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","\"} \"",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_VARIABLE","$order",281],")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$results",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],"[","]",";",["T_WHITESPACE","\n    ",282],["T_WHILE","while",283],["T_WHITESPACE"," ",283],"(","(",["T_VARIABLE","$row",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$query",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","fetchAssoc",283],"(",")",")",["T_WHITESPACE"," ",283],["T_IS_NOT_IDENTICAL","!==",283],["T_WHITESPACE"," ",283],["T_STRING","FALSE",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n      ",283],["T_VARIABLE","$results",284],"[","]",["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$row",284],";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n    ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$results",286],";",["T_WHITESPACE","\n  ",286],"}",["T_WHITESPACE","\n\n  ",287],["T_DOC_COMMENT","\/**\n   * Given a database field type, return a Drupal type.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $type\n   *   The MySQL field type.\n   *\n   * @return string\n   *   The Drupal schema field type. If there is no mapping, the original field\n   *   type is returned.\n   *\/",289],["T_WHITESPACE","\n  ",300],["T_PROTECTED","protected",301],["T_WHITESPACE"," ",301],["T_FUNCTION","function",301],["T_WHITESPACE"," ",301],["T_STRING","fieldTypeMap",301],"(",["T_STRING","Connection",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$connection",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$type",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE","\n    ",301],["T_COMMENT","\/\/ Convert everything to lowercase.\n",302],["T_WHITESPACE","    ",303],["T_VARIABLE","$map",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","array_map",303],"(",["T_CONSTANT_ENCAPSED_STRING","'strtolower'",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$connection",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","schema",303],"(",")",["T_OBJECT_OPERATOR","->",303],["T_STRING","getFieldTypeMap",303],"(",")",")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$map",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","array_flip",304],"(",["T_VARIABLE","$map",304],")",";",["T_WHITESPACE","\n\n    ",304],["T_COMMENT","\/\/ The MySql map contains type:size. Remove the size part.\n",306],["T_WHITESPACE","    ",307],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_ISSET","isset",307],"(",["T_VARIABLE","$map",307],"[",["T_VARIABLE","$type",307],"]",")",["T_WHITESPACE"," ",307],"?",["T_WHITESPACE"," ",307],["T_STRING","explode",307],"(",["T_CONSTANT_ENCAPSED_STRING","':'",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$map",307],"[",["T_VARIABLE","$type",307],"]",")","[",["T_LNUMBER","0",307],"]",["T_WHITESPACE"," ",307],":",["T_WHITESPACE"," ",307],["T_VARIABLE","$type",307],";",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n  ",308],["T_DOC_COMMENT","\/**\n   * Given a database field type, return a Drupal size.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $type\n   *   The MySQL field type.\n   *\n   * @return string\n   *   The Drupal schema field size.\n   *\/",310],["T_WHITESPACE","\n  ",320],["T_PROTECTED","protected",321],["T_WHITESPACE"," ",321],["T_FUNCTION","function",321],["T_WHITESPACE"," ",321],["T_STRING","fieldSizeMap",321],"(",["T_STRING","Connection",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$connection",321],",",["T_WHITESPACE"," ",321],["T_VARIABLE","$type",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n    ",321],["T_COMMENT","\/\/ Convert everything to lowercase.\n",322],["T_WHITESPACE","    ",323],["T_VARIABLE","$map",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_STRING","array_map",323],"(",["T_CONSTANT_ENCAPSED_STRING","'strtolower'",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$connection",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","schema",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getFieldTypeMap",323],"(",")",")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$map",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","array_flip",324],"(",["T_VARIABLE","$map",324],")",";",["T_WHITESPACE","\n\n    ",324],["T_VARIABLE","$schema_type",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","explode",326],"(",["T_CONSTANT_ENCAPSED_STRING","':'",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$map",326],"[",["T_VARIABLE","$type",326],"]",")","[",["T_LNUMBER","0",326],"]",";",["T_WHITESPACE","\n    ",326],["T_COMMENT","\/\/ Only specify size on these types.\n",327],["T_WHITESPACE","    ",328],["T_IF","if",328],["T_WHITESPACE"," ",328],"(",["T_STRING","in_array",328],"(",["T_VARIABLE","$schema_type",328],",",["T_WHITESPACE"," ",328],"[",["T_CONSTANT_ENCAPSED_STRING","'blob'",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'float'",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'int'",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'text'",328],"]",")",")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n      ",328],["T_COMMENT","\/\/ The MySql map contains type:size. Remove the type part.\n",329],["T_WHITESPACE","      ",330],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_STRING","explode",330],"(",["T_CONSTANT_ENCAPSED_STRING","':'",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$map",330],"[",["T_VARIABLE","$type",330],"]",")","[",["T_LNUMBER","1",330],"]",";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n  ",331],"}",["T_WHITESPACE","\n\n  ",332],["T_DOC_COMMENT","\/**\n   * Gets field ordering for a given table.\n   *\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The table name.\n   *\n   * @return string\n   *   The order string to append to the query.\n   *\/",334],["T_WHITESPACE","\n  ",344],["T_PROTECTED","protected",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","getFieldOrder",345],"(",["T_STRING","Connection",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$connection",345],",",["T_WHITESPACE"," ",345],["T_VARIABLE","$table",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n    ",345],["T_COMMENT","\/\/ @todo this is MySQL only since there are no Database API functions for\n",346],["T_WHITESPACE","    ",347],["T_COMMENT","\/\/ table column data.\n",347],["T_WHITESPACE","    ",348],["T_COMMENT","\/\/ @todo this code is duplicated in `core\/scripts\/migrate-db.sh`.\n",348],["T_WHITESPACE","    ",349],["T_VARIABLE","$connection_info",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_VARIABLE","$connection",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","getConnectionOptions",349],"(",")",";",["T_WHITESPACE","\n    ",349],["T_COMMENT","\/\/ Order by primary keys.\n",350],["T_WHITESPACE","    ",351],["T_VARIABLE","$order",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","''",351],";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$query",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","\"SELECT `COLUMN_NAME` FROM `information_schema`.`COLUMNS`\n    WHERE (`TABLE_SCHEMA` = '\"",352],["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_VARIABLE","$connection_info",353],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",353],"]",["T_WHITESPACE"," ",353],".",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","\"')\n    AND (`TABLE_NAME` = '{\"",353],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_VARIABLE","$table",354],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","\"}') AND (`COLUMN_KEY` = 'PRI')\n    ORDER BY COLUMN_NAME\"",354],";",["T_WHITESPACE","\n    ",355],["T_VARIABLE","$results",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$connection",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","query",356],"(",["T_VARIABLE","$query",356],")",";",["T_WHITESPACE","\n    ",356],["T_WHILE","while",357],["T_WHITESPACE"," ",357],"(","(",["T_VARIABLE","$row",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$results",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","fetchAssoc",357],"(",")",")",["T_WHITESPACE"," ",357],["T_IS_NOT_IDENTICAL","!==",357],["T_WHITESPACE"," ",357],["T_STRING","FALSE",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n      ",357],["T_VARIABLE","$order",358],["T_WHITESPACE"," ",358],["T_CONCAT_EQUAL",".=",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$row",358],"[",["T_CONSTANT_ENCAPSED_STRING","'COLUMN_NAME'",358],"]",["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","', '",358],";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n    ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(","!",["T_EMPTY","empty",360],"(",["T_VARIABLE","$order",360],")",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n      ",360],["T_VARIABLE","$order",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","' ORDER BY '",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_STRING","rtrim",361],"(",["T_VARIABLE","$order",361],",",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","', '",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n    ",362],["T_RETURN","return",363],["T_WHITESPACE"," ",363],["T_VARIABLE","$order",363],";",["T_WHITESPACE","\n  ",363],"}",["T_WHITESPACE","\n\n  ",364],["T_DOC_COMMENT","\/**\n   * The script template.\n   *\n   * @return string\n   *   The template for the generated PHP script.\n   *\/",366],["T_WHITESPACE","\n  ",371],["T_PROTECTED","protected",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","getTemplate",372],"(",")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n    ",372],["T_COMMENT","\/\/ The template contains an instruction for the file to be ignored by PHPCS.\n",373],["T_WHITESPACE","    ",374],["T_COMMENT","\/\/ This is because the files can be huge and coding standards are\n",374],["T_WHITESPACE","    ",375],["T_COMMENT","\/\/ irrelevant.\n",375],["T_WHITESPACE","    ",376],["T_VARIABLE","$script",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_START_HEREDOC","<<<'ENDOFSCRIPT'\n",376],["T_ENCAPSED_AND_WHITESPACE","<?php\n\/\/ @codingStandardsIgnoreFile\n\/**\n * @file\n * A database agnostic dump for testing purposes.\n *\n * This file was generated by the Drupal 8.0 db-tools.php script.\n *\/\n\nuse Drupal\\Core\\Database\\Database;\n\n$connection = Database::getConnection();\n\n{{TABLES}}\n\n",377],["T_END_HEREDOC","ENDOFSCRIPT",392],";",["T_WHITESPACE","\n    ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$script",393],";",["T_WHITESPACE","\n  ",393],"}",["T_WHITESPACE","\n\n  ",394],["T_DOC_COMMENT","\/**\n   * The part of the script for each table.\n   *\n   * @param string $table\n   *   Table name.\n   * @param array $schema\n   *   Drupal schema definition.\n   * @param array $data\n   *   Data for the table.\n   *\n   * @return string\n   *   The table create statement, and if there is data, the insert command.\n   *\/",396],["T_WHITESPACE","\n  ",408],["T_PROTECTED","protected",409],["T_WHITESPACE"," ",409],["T_FUNCTION","function",409],["T_WHITESPACE"," ",409],["T_STRING","getTableScript",409],"(",["T_VARIABLE","$table",409],",",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$schema",409],",",["T_WHITESPACE"," ",409],["T_ARRAY","array",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$data",409],")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n    ",409],["T_VARIABLE","$output",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","''",410],";",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$output",411],["T_WHITESPACE"," ",411],["T_CONCAT_EQUAL",".=",411],["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","\"\\$connection->schema()->createTable('\"",411],["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_VARIABLE","$table",411],["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","\"', \"",411],["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_STRING","Variable",411],["T_DOUBLE_COLON","::",411],["T_STRING","export",411],"(",["T_VARIABLE","$schema",411],")",["T_WHITESPACE"," ",411],".",["T_WHITESPACE"," ",411],["T_CONSTANT_ENCAPSED_STRING","\");\\n\\n\"",411],";",["T_WHITESPACE","\n    ",411],["T_IF","if",412],["T_WHITESPACE"," ",412],"(","!",["T_EMPTY","empty",412],"(",["T_VARIABLE","$data",412],")",")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n      ",412],["T_VARIABLE","$insert",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","''",413],";",["T_WHITESPACE","\n      ",413],["T_FOREACH","foreach",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$data",414],["T_WHITESPACE"," ",414],["T_AS","as",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$record",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n        ",414],["T_VARIABLE","$insert",415],["T_WHITESPACE"," ",415],["T_CONCAT_EQUAL",".=",415],["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","\"->values(\"",415],["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_STRING","Variable",415],["T_DOUBLE_COLON","::",415],["T_STRING","export",415],"(",["T_VARIABLE","$record",415],")",["T_WHITESPACE"," ",415],".",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","\")\\n\"",415],";",["T_WHITESPACE","\n      ",415],"}",["T_WHITESPACE","\n      ",416],["T_VARIABLE","$output",417],["T_WHITESPACE"," ",417],["T_CONCAT_EQUAL",".=",417],["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","\"\\$connection->insert('\"",417],["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_VARIABLE","$table",417],["T_WHITESPACE"," ",417],".",["T_WHITESPACE"," ",417],["T_CONSTANT_ENCAPSED_STRING","\"')\\n\"",417],["T_WHITESPACE","\n        ",417],".",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","\"->fields(\"",418],["T_WHITESPACE"," ",418],".",["T_WHITESPACE"," ",418],["T_STRING","Variable",418],["T_DOUBLE_COLON","::",418],["T_STRING","export",418],"(",["T_STRING","array_keys",418],"(",["T_VARIABLE","$schema",418],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",418],"]",")",")",["T_WHITESPACE"," ",418],".",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","\")\\n\"",418],["T_WHITESPACE","\n        ",418],".",["T_WHITESPACE"," ",419],["T_VARIABLE","$insert",419],["T_WHITESPACE","\n        ",419],".",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","\"->execute();\\n\\n\"",420],";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n    ",421],["T_RETURN","return",422],["T_WHITESPACE"," ",422],["T_VARIABLE","$output",422],";",["T_WHITESPACE","\n  ",422],"}",["T_WHITESPACE","\n\n",423],"}",["T_WHITESPACE","\n",425]]
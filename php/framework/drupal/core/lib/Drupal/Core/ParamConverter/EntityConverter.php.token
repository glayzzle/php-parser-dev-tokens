[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","ParamConverter",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TypedData",7],["T_NS_SEPARATOR","\\",7],["T_STRING","TranslatableInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Routing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Route",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Parameter converter for upcasting entity IDs to full objects.\n *\n * This is useful in cases where the dynamic elements of the path can't be\n * auto-determined; for example, if your path refers to multiple of the same\n * type of entity (\"example\/{node1}\/foo\/{node2}\") or if the path can act on any\n * entity type (\"example\/{entity_type}\/{entity}\/foo\").\n *\n * In order to use it you should specify some additional options in your route:\n * @code\n * example.route:\n *   path: foo\/{example}\n *   options:\n *     parameters:\n *       example:\n *         type: entity:node\n * @endcode\n *\n * If you want to have the entity type itself dynamic in the url you can\n * specify it like the following:\n * @code\n * example.route:\n *   path: foo\/{entity_type}\/{example}\n *   options:\n *     parameters:\n *       example:\n *         type: entity:{entity_type}\n * @endcode\n *\/",10],["T_WHITESPACE","\n",38],["T_CLASS","class",39],["T_WHITESPACE"," ",39],["T_STRING","EntityConverter",39],["T_WHITESPACE"," ",39],["T_IMPLEMENTS","implements",39],["T_WHITESPACE"," ",39],["T_STRING","ParamConverterInterface",39],["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * Entity manager which performs the upcasting in the end.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$entityManager",46],";",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityConverter.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   *\/",48],["T_WHITESPACE","\n  ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_STRING","EntityManagerInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$entity_manager",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","entityManager",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$entity_manager",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","convert",61],"(",["T_VARIABLE","$value",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$definition",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$name",61],",",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$defaults",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$entity_type_id",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getEntityTypeFromDefaults",62],"(",["T_VARIABLE","$definition",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$name",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$defaults",62],")",";",["T_WHITESPACE","\n    ",62],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$storage",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","entityManager",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getStorage",63],"(",["T_VARIABLE","$entity_type_id",63],")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$entity",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$storage",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","load",64],"(",["T_VARIABLE","$value",64],")",";",["T_WHITESPACE","\n      ",64],["T_COMMENT","\/\/ If the entity type is translatable, ensure we return the proper\n",65],["T_WHITESPACE","      ",66],["T_COMMENT","\/\/ translation object for the current context.\n",66],["T_WHITESPACE","      ",67],["T_IF","if",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$entity",67],["T_WHITESPACE"," ",67],["T_INSTANCEOF","instanceof",67],["T_WHITESPACE"," ",67],["T_STRING","EntityInterface",67],["T_WHITESPACE"," ",67],["T_BOOLEAN_AND","&&",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$entity",67],["T_WHITESPACE"," ",67],["T_INSTANCEOF","instanceof",67],["T_WHITESPACE"," ",67],["T_STRING","TranslatableInterface",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$entity",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","entityManager",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getTranslationFromContext",68],"(",["T_VARIABLE","$entity",68],",",["T_WHITESPACE"," ",68],["T_STRING","NULL",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_CONSTANT_ENCAPSED_STRING","'operation'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'entity_upcast'",68],")",")",";",["T_WHITESPACE","\n      ",68],"}",["T_WHITESPACE","\n      ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$entity",70],";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","applies",77],"(",["T_VARIABLE","$definition",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$name",77],",",["T_WHITESPACE"," ",77],["T_STRING","Route",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$route",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_EMPTY","empty",78],"(",["T_VARIABLE","$definition",78],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",78],"]",")",["T_WHITESPACE"," ",78],["T_BOOLEAN_AND","&&",78],["T_WHITESPACE"," ",78],["T_STRING","strpos",78],"(",["T_VARIABLE","$definition",78],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",78],"]",",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'entity:'",78],")",["T_WHITESPACE"," ",78],["T_IS_IDENTICAL","===",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$entity_type_id",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","substr",79],"(",["T_VARIABLE","$definition",79],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",79],"]",",",["T_WHITESPACE"," ",79],["T_STRING","strlen",79],"(",["T_CONSTANT_ENCAPSED_STRING","'entity:'",79],")",")",";",["T_WHITESPACE","\n      ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_STRING","strpos",80],"(",["T_VARIABLE","$definition",80],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",80],"]",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'{'",80],")",["T_WHITESPACE"," ",80],["T_IS_NOT_IDENTICAL","!==",80],["T_WHITESPACE"," ",80],["T_STRING","FALSE",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$entity_type_slug",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","substr",81],"(",["T_VARIABLE","$entity_type_id",81],",",["T_WHITESPACE"," ",81],["T_LNUMBER","1",81],",",["T_WHITESPACE"," ",81],"-",["T_LNUMBER","1",81],")",";",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$name",82],["T_WHITESPACE"," ",82],["T_IS_NOT_EQUAL","!=",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type_slug",82],["T_WHITESPACE"," ",82],["T_BOOLEAN_AND","&&",82],["T_WHITESPACE"," ",82],["T_STRING","in_array",82],"(",["T_VARIABLE","$entity_type_slug",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$route",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","compile",82],"(",")",["T_OBJECT_OPERATOR","->",82],["T_STRING","getVariables",82],"(",")",",",["T_WHITESPACE"," ",82],["T_STRING","TRUE",82],")",";",["T_WHITESPACE","\n      ",82],"}",["T_WHITESPACE","\n      ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","entityManager",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","hasDefinition",84],"(",["T_VARIABLE","$entity_type_id",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n    ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_STRING","FALSE",86],";",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Determines the entity type ID given a route definition and route defaults.\n   *\n   * @param mixed $definition\n   *   The parameter definition provided in the route options.\n   * @param string $name\n   *   The name of the parameter.\n   * @param array $defaults\n   *   The route defaults array.\n   *\n   * @return string\n   *   The entity type ID.\n   *\n   * @throws \\Drupal\\Core\\ParamConverter\\ParamNotConvertedException\n   *   Thrown when the dynamic entity type is not found in the route defaults.\n   *\/",89],["T_WHITESPACE","\n  ",104],["T_PROTECTED","protected",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","getEntityTypeFromDefaults",105],"(",["T_VARIABLE","$definition",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$name",105],",",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$defaults",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$entity_type_id",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","substr",106],"(",["T_VARIABLE","$definition",106],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",106],"]",",",["T_WHITESPACE"," ",106],["T_STRING","strlen",106],"(",["T_CONSTANT_ENCAPSED_STRING","'entity:'",106],")",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ If the entity type is dynamic, it will be pulled from the route defaults.\n",108],["T_WHITESPACE","    ",109],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_STRING","strpos",109],"(",["T_VARIABLE","$entity_type_id",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'{'",109],")",["T_WHITESPACE"," ",109],["T_IS_IDENTICAL","===",109],["T_WHITESPACE"," ",109],["T_LNUMBER","0",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$entity_type_slug",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","substr",110],"(",["T_VARIABLE","$entity_type_id",110],",",["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],",",["T_WHITESPACE"," ",110],"-",["T_LNUMBER","1",110],")",";",["T_WHITESPACE","\n      ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_ISSET","isset",111],"(",["T_VARIABLE","$defaults",111],"[",["T_VARIABLE","$entity_type_slug",111],"]",")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n        ",111],["T_THROW","throw",112],["T_WHITESPACE"," ",112],["T_NEW","new",112],["T_WHITESPACE"," ",112],["T_STRING","ParamNotConvertedException",112],"(",["T_STRING","sprintf",112],"(",["T_CONSTANT_ENCAPSED_STRING","'The \"%s\" parameter was not converted because the \"%s\" parameter is missing'",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$name",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$entity_type_slug",112],")",")",";",["T_WHITESPACE","\n      ",112],"}",["T_WHITESPACE","\n      ",113],["T_VARIABLE","$entity_type_id",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$defaults",114],"[",["T_VARIABLE","$entity_type_slug",114],"]",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n    ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$entity_type_id",116],";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n",117],"}",["T_WHITESPACE","\n",119]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Routing",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","State",7],["T_NS_SEPARATOR","\\",7],["T_STRING","StateInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EventDispatcher",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Event",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EventDispatcher",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EventSubscriberInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpKernel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Event",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KernelEvent",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","HttpKernel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","KernelEvents",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Defines a class which preloads non-admin routes.\n *\n * On an actual site we want to avoid too many database queries so we build a\n * list of all routes which most likely appear on the actual site, which are all\n * HTML routes not starting with \"\/admin\".\n *\/",13],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","RoutePreloader",20],["T_WHITESPACE"," ",20],["T_IMPLEMENTS","implements",20],["T_WHITESPACE"," ",20],["T_STRING","EventSubscriberInterface",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The route provider.\n   *\n   * @var \\Drupal\\Core\\Routing\\RouteProviderInterface|\\Drupal\\Core\\Routing\\PreloadableRouteProviderInterface\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$routeProvider",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The state key value store.\n   *\n   * @var \\Drupal\\Core\\State\\StateInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$state",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Contains the non-admin routes while rebuilding the routes.\n   *\n   * @var array\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$nonAdminRoutesOnRebuild",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The cache backend used to skip the state loading.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$cache",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Constructs a new RoutePreloader.\n   *\n   * @param \\Drupal\\Core\\Routing\\RouteProviderInterface $route_provider\n   *   The route provider.\n   * @param \\Drupal\\Core\\State\\StateInterface $state\n   *   The state key value store.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *\/",50],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_STRING","RouteProviderInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$route_provider",59],",",["T_WHITESPACE"," ",59],["T_STRING","StateInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$state",59],",",["T_WHITESPACE"," ",59],["T_STRING","CacheBackendInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$cache",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","routeProvider",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$route_provider",60],";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","state",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$state",61],";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","cache",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$cache",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Loads all non-admin routes right before the actual page is rendered.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\KernelEvent $event\n   *   The event to process.\n   *\/",65],["T_WHITESPACE","\n  ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","onRequest",71],"(",["T_STRING","KernelEvent",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$event",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_COMMENT","\/\/ Only preload on normal HTML pages, as they will display menu links.\n",72],["T_WHITESPACE","    ",73],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","routeProvider",73],["T_WHITESPACE"," ",73],["T_INSTANCEOF","instanceof",73],["T_WHITESPACE"," ",73],["T_STRING","PreloadableRouteProviderInterface",73],["T_WHITESPACE"," ",73],["T_BOOLEAN_AND","&&",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$event",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequest",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","getRequestFormat",73],"(",")",["T_WHITESPACE"," ",73],["T_IS_EQUAL","==",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'html'",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n\n      ",73],["T_COMMENT","\/\/ Ensure that the state query is cached to skip the database query, if\n",75],["T_WHITESPACE","      ",76],["T_COMMENT","\/\/ possible.\n",76],["T_WHITESPACE","      ",77],["T_VARIABLE","$key",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'routing.non_admin_routes'",77],";",["T_WHITESPACE","\n      ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$cache",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","cache",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_VARIABLE","$key",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$routes",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$cache",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","data",79],";",["T_WHITESPACE","\n      ",79],"}",["T_WHITESPACE","\n      ",80],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$routes",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","state",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_VARIABLE","$key",82],",",["T_WHITESPACE"," ",82],"[","]",")",";",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","cache",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","set",83],"(",["T_VARIABLE","$key",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$routes",83],",",["T_WHITESPACE"," ",83],["T_STRING","Cache",83],["T_DOUBLE_COLON","::",83],["T_STRING","PERMANENT",83],",",["T_WHITESPACE"," ",83],"[",["T_CONSTANT_ENCAPSED_STRING","'routes'",83],"]",")",";",["T_WHITESPACE","\n      ",83],"}",["T_WHITESPACE","\n\n      ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$routes",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_COMMENT","\/\/ Preload all the non-admin routes at once.\n",87],["T_WHITESPACE","        ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","routeProvider",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","preLoadRoutes",88],"(",["T_VARIABLE","$routes",88],")",";",["T_WHITESPACE","\n      ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n  ",91],["T_DOC_COMMENT","\/**\n   * Alters existing routes for a specific collection.\n   *\n   * @param \\Drupal\\Core\\Routing\\RouteBuildEvent $event\n   *   The route build event.\n   *\/",93],["T_WHITESPACE","\n  ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","onAlterRoutes",99],"(",["T_STRING","RouteBuildEvent",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$event",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$collection",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$event",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getRouteCollection",100],"(",")",";",["T_WHITESPACE","\n    ",100],["T_FOREACH","foreach",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$collection",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","all",101],"(",")",["T_WHITESPACE"," ",101],["T_AS","as",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$name",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$route",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n      ",101],["T_IF","if",102],["T_WHITESPACE"," ",102],"(",["T_STRING","strpos",102],"(",["T_VARIABLE","$route",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPath",102],"(",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'\/admin\/'",102],")",["T_WHITESPACE"," ",102],["T_IS_NOT_IDENTICAL","!==",102],["T_WHITESPACE"," ",102],["T_LNUMBER","0",102],["T_WHITESPACE"," ",102],["T_BOOLEAN_AND","&&",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$route",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getPath",102],"(",")",["T_WHITESPACE"," ",102],["T_IS_NOT_EQUAL","!=",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'\/admin'",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n        ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","nonAdminRoutesOnRebuild",103],"[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$name",103],";",["T_WHITESPACE","\n      ",103],"}",["T_WHITESPACE","\n    ",104],"}",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","nonAdminRoutesOnRebuild",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","array_unique",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","nonAdminRoutesOnRebuild",106],")",";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n  ",107],["T_DOC_COMMENT","\/**\n   * Store the non admin routes in state when the route building is finished.\n   *\n   * @param \\Symfony\\Component\\EventDispatcher\\Event $event\n   *   The route finish event.\n   *\/",109],["T_WHITESPACE","\n  ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","onFinishedRoutes",115],"(",["T_STRING","Event",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$event",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","state",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","set",116],"(",["T_CONSTANT_ENCAPSED_STRING","'routing.non_admin_routes'",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","nonAdminRoutesOnRebuild",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","nonAdminRoutesOnRebuild",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n  ",118],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",120],["T_WHITESPACE","\n  ",122],["T_PUBLIC","public",123],["T_WHITESPACE"," ",123],["T_STATIC","static",123],["T_WHITESPACE"," ",123],["T_FUNCTION","function",123],["T_WHITESPACE"," ",123],["T_STRING","getSubscribedEvents",123],"(",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n    ",123],["T_COMMENT","\/\/ Set a really low priority to catch as many as possible routes.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$events",125],"[",["T_STRING","RoutingEvents",125],["T_DOUBLE_COLON","::",125],["T_STRING","ALTER",125],"]",["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'onAlterRoutes'",125],",",["T_WHITESPACE"," ",125],"-",["T_LNUMBER","1024",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$events",126],"[",["T_STRING","RoutingEvents",126],["T_DOUBLE_COLON","::",126],["T_STRING","FINISHED",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_CONSTANT_ENCAPSED_STRING","'onFinishedRoutes'",126],")",";",["T_WHITESPACE","\n    ",126],["T_COMMENT","\/\/ Load the routes before the controller is executed (which happens after\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ the kernel request event).\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$events",129],"[",["T_STRING","KernelEvents",129],["T_DOUBLE_COLON","::",129],["T_STRING","REQUEST",129],"]","[","]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'onRequest'",129],")",";",["T_WHITESPACE","\n    ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$events",130],";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n",131],"}",["T_WHITESPACE","\n",133]]
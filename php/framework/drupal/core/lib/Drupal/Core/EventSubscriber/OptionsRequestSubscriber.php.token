[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Symfony",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cmf",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Routing",5],["T_NS_SEPARATOR","\\",5],["T_STRING","RouteProviderInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventDispatcher",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventSubscriberInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","HttpFoundation",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Response",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpKernel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Event",8],["T_NS_SEPARATOR","\\",8],["T_STRING","GetResponseEvent",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpKernel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KernelEvents",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Routing",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Route",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Handles options requests.\n *\n * Therefore it sends a options response using all methods on all possible\n * routes.\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","OptionsRequestSubscriber",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","EventSubscriberInterface",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The route provider.\n   *\n   * @var \\Symfony\\Cmf\\Component\\Routing\\RouteProviderInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$routeProvider",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Creates a new OptionsRequestSubscriber instance.\n   *\n   * @param \\Symfony\\Cmf\\Component\\Routing\\RouteProviderInterface $route_provider\n   *   The route provider.\n   *\/",27],["T_WHITESPACE","\n  ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","__construct",33],"(",["T_STRING","RouteProviderInterface",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$route_provider",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","routeProvider",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$route_provider",34],";",["T_WHITESPACE","\n  ",34],"}",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Tries to handle the options request.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent $event\n   *   The request event.\n   *\/",37],["T_WHITESPACE","\n  ",42],["T_PUBLIC","public",43],["T_WHITESPACE"," ",43],["T_FUNCTION","function",43],["T_WHITESPACE"," ",43],["T_STRING","onRequest",43],"(",["T_STRING","GetResponseEvent",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$event",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n    ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$event",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getRequest",44],"(",")",["T_OBJECT_OPERATOR","->",44],["T_STRING","isMethod",44],"(",["T_CONSTANT_ENCAPSED_STRING","'OPTIONS'",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$routes",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","routeProvider",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getRouteCollectionForRequest",45],"(",["T_VARIABLE","$event",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getRequest",45],"(",")",")",";",["T_WHITESPACE","\n      ",45],["T_COMMENT","\/\/ In case we don't have any routes, a 403 should be thrown by the normal\n",46],["T_WHITESPACE","      ",47],["T_COMMENT","\/\/ request handling.\n",47],["T_WHITESPACE","      ",48],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_STRING","count",48],"(",["T_VARIABLE","$routes",48],")",["T_WHITESPACE"," ",48],">",["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$methods",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","array_map",49],"(",["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],"(",["T_STRING","Route",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$route",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n          ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$route",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getMethods",50],"(",")",";",["T_WHITESPACE","\n        ",50],"}",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$routes",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","all",51],"(",")",")",";",["T_WHITESPACE","\n        ",51],["T_COMMENT","\/\/ Flatten and unique the available methods.\n",52],["T_WHITESPACE","        ",53],["T_VARIABLE","$methods",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","array_unique",53],"(",["T_STRING","call_user_func_array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'array_merge'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$methods",53],")",")",";",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$response",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","Response",54],"(",["T_CONSTANT_ENCAPSED_STRING","''",54],",",["T_WHITESPACE"," ",54],["T_LNUMBER","200",54],",",["T_WHITESPACE"," ",54],"[",["T_CONSTANT_ENCAPSED_STRING","'Allow'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_STRING","implode",54],"(",["T_CONSTANT_ENCAPSED_STRING","', '",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$methods",54],")","]",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$event",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","setResponse",55],"(",["T_VARIABLE","$response",55],")",";",["T_WHITESPACE","\n      ",55],"}",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_STATIC","static",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","getSubscribedEvents",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_COMMENT","\/\/ Set a high priority so it is executed before routing.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$events",65],"[",["T_STRING","KernelEvents",65],["T_DOUBLE_COLON","::",65],["T_STRING","REQUEST",65],"]","[","]",["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[",["T_CONSTANT_ENCAPSED_STRING","'onRequest'",65],",",["T_WHITESPACE"," ",65],["T_LNUMBER","1000",65],"]",";",["T_WHITESPACE","\n    ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$events",66],";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n",67],"}",["T_WHITESPACE","\n",69]]
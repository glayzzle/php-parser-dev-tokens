[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Error",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","HttpKernel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Event",6],["T_NS_SEPARATOR","\\",6],["T_STRING","GetResponseForExceptionEvent",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Custom handling of errors when in a system-under-test.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","ExceptionTestSiteSubscriber",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","HttpExceptionSubscriberBase",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",13],["T_WHITESPACE","\n  ",15],["T_PROTECTED","protected",16],["T_WHITESPACE"," ",16],["T_STATIC","static",16],["T_WHITESPACE"," ",16],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","getPriority",16],"(",")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n    ",16],["T_RETURN","return",17],["T_WHITESPACE"," ",17],["T_LNUMBER","3",17],";",["T_WHITESPACE","\n  ",17],"}",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","getHandledFormats",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",24],"]",";",["T_WHITESPACE","\n  ",24],"}",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Checks for special handling of errors inside Simpletest.\n   *\n   * @todo The $headers array appears to not actually get used at all in the\n   *   original code. It's quite possible that this entire method is now\n   *   vestigial and can be removed.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\GetResponseForExceptionEvent $event\n   *\/",27],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","on500",36],"(",["T_STRING","GetResponseForExceptionEvent",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$event",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$exception",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$event",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getException",37],"(",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$error",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","Error",38],["T_DOUBLE_COLON","::",38],["T_STRING","decodeException",38],"(",["T_VARIABLE","$exception",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$headers",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ When running inside the testing framework, we relay the errors\n",42],["T_WHITESPACE","    ",43],["T_COMMENT","\/\/ to the tested site by the way of HTTP headers.\n",43],["T_WHITESPACE","    ",44],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_STRING","DRUPAL_TEST_IN_CHILD_SITE",44],["T_WHITESPACE"," ",44],["T_BOOLEAN_AND","&&",44],["T_WHITESPACE"," ",44],"!",["T_STRING","headers_sent",44],"(",")",["T_WHITESPACE"," ",44],["T_BOOLEAN_AND","&&",44],["T_WHITESPACE"," ",44],"(","!",["T_STRING","defined",44],"(",["T_CONSTANT_ENCAPSED_STRING","'SIMPLETEST_COLLECT_ERRORS'",44],")",["T_WHITESPACE"," ",44],["T_BOOLEAN_OR","||",44],["T_WHITESPACE"," ",44],["T_STRING","SIMPLETEST_COLLECT_ERRORS",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_COMMENT","\/\/ $number does not use drupal_static as it should not be reset\n",45],["T_WHITESPACE","      ",46],["T_COMMENT","\/\/ as it uniquely identifies each PHP error.\n",46],["T_WHITESPACE","      ",47],["T_STATIC","static",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$number",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],";",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$assertion",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$error",49],"[",["T_CONSTANT_ENCAPSED_STRING","'@message'",49],"]",",",["T_WHITESPACE","\n        ",49],["T_VARIABLE","$error",50],"[",["T_CONSTANT_ENCAPSED_STRING","'%type'",50],"]",",",["T_WHITESPACE","\n        ",50],["T_ARRAY","array",51],"(",["T_WHITESPACE","\n          ",51],["T_CONSTANT_ENCAPSED_STRING","'function'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$error",52],"[",["T_CONSTANT_ENCAPSED_STRING","'%function'",52],"]",",",["T_WHITESPACE","\n          ",52],["T_CONSTANT_ENCAPSED_STRING","'file'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$error",53],"[",["T_CONSTANT_ENCAPSED_STRING","'%file'",53],"]",",",["T_WHITESPACE","\n          ",53],["T_CONSTANT_ENCAPSED_STRING","'line'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$error",54],"[",["T_CONSTANT_ENCAPSED_STRING","'%line'",54],"]",",",["T_WHITESPACE","\n        ",54],")",",",["T_WHITESPACE","\n      ",55],")",";",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$headers",57],"[",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Assertion-'",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$number",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","rawurlencode",57],"(",["T_STRING","serialize",57],"(",["T_VARIABLE","$assertion",57],")",")",";",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$number",58],["T_INC","++",58],";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n  ",59],"}",["T_WHITESPACE","\n\n",60],"}",["T_WHITESPACE","\n",62]]
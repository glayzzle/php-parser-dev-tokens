[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Datetime",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DateTimePlus",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheableResponseInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Context",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CacheContextsManager",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigFactoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Language",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LanguageManagerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","PageCache",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RequestPolicyInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","PageCache",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ResponsePolicyInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Site",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Settings",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HttpFoundation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Request",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Response",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpKernel",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Event",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FilterResponseEvent",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","KernelEvents",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventDispatcher",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EventSubscriberInterface",17],";",["T_WHITESPACE","\n\n",17],["T_DOC_COMMENT","\/**\n * Response subscriber to handle finished responses.\n *\/",19],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","FinishResponseSubscriber",22],["T_WHITESPACE"," ",22],["T_IMPLEMENTS","implements",22],["T_WHITESPACE"," ",22],["T_STRING","EventSubscriberInterface",22],["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The language manager object for retrieving the correct language code.\n   *\n   * @var \\Drupal\\Core\\Language\\LanguageManagerInterface\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$languageManager",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * A config object for the system performance configuration.\n   *\n   * @var \\Drupal\\Core\\Config\\Config\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$config",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * A policy rule determining the cacheability of a request.\n   *\n   * @var \\Drupal\\Core\\PageCache\\RequestPolicyInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$requestPolicy",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * A policy rule determining the cacheability of the response.\n   *\n   * @var \\Drupal\\Core\\PageCache\\ResponsePolicyInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$responsePolicy",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * The cache contexts manager service.\n   *\n   * @var \\Drupal\\Core\\Cache\\Context\\CacheContextsManager\n   *\/",52],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$cacheContexts",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Whether to send cacheability headers for debugging purposes.\n   *\n   * @var bool\n   *\/",59],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$debugCacheabilityHeaders",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","FALSE",64],";",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Constructs a FinishResponseSubscriber object.\n   *\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *   The language manager object for retrieving the correct language code.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   A config factory for retrieving required config objects.\n   * @param \\Drupal\\Core\\PageCache\\RequestPolicyInterface $request_policy\n   *   A policy rule determining the cacheability of a request.\n   * @param \\Drupal\\Core\\PageCache\\ResponsePolicyInterface $response_policy\n   *   A policy rule determining the cacheability of a response.\n   * @param \\Drupal\\Core\\Cache\\Context\\CacheContextsManager $cache_contexts_manager\n   *   The cache contexts manager service.\n   * @param bool $http_response_debug_cacheability_headers\n   *   (optional) Whether to send cacheability headers for debugging purposes.\n   *\/",66],["T_WHITESPACE","\n  ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","__construct",82],"(",["T_STRING","LanguageManagerInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$language_manager",82],",",["T_WHITESPACE"," ",82],["T_STRING","ConfigFactoryInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$config_factory",82],",",["T_WHITESPACE"," ",82],["T_STRING","RequestPolicyInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$request_policy",82],",",["T_WHITESPACE"," ",82],["T_STRING","ResponsePolicyInterface",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$response_policy",82],",",["T_WHITESPACE"," ",82],["T_STRING","CacheContextsManager",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$cache_contexts_manager",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$http_response_debug_cacheability_headers",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","FALSE",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","languageManager",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$language_manager",83],";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","config",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$config_factory",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","get",84],"(",["T_CONSTANT_ENCAPSED_STRING","'system.performance'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","requestPolicy",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$request_policy",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","responsePolicy",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$response_policy",86],";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","cacheContextsManager",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$cache_contexts_manager",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","debugCacheabilityHeaders",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$http_response_debug_cacheability_headers",88],";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Sets extra headers on successful responses.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\FilterResponseEvent $event\n   *   The event to process.\n   *\/",91],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","onRespond",97],"(",["T_STRING","FilterResponseEvent",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$event",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(","!",["T_VARIABLE","$event",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","isMasterRequest",98],"(",")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_RETURN","return",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_VARIABLE","$request",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$event",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getRequest",102],"(",")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$response",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$event",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getResponse",103],"(",")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Set the X-UA-Compatible HTTP header to force IE to use the most recent\n",105],["T_WHITESPACE","    ",106],["T_COMMENT","\/\/ rendering engine.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$response",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","headers",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","set",107],"(",["T_CONSTANT_ENCAPSED_STRING","'X-UA-Compatible'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'IE=edge'",107],",",["T_WHITESPACE"," ",107],["T_STRING","FALSE",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Set the Content-language header.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$response",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","headers",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","set",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-language'",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","languageManager",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getCurrentLanguage",110],"(",")",["T_OBJECT_OPERATOR","->",110],["T_STRING","getId",110],"(",")",")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Prevent browsers from sniffing a response and picking a MIME type\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ different from the declared content-type, since that can lead to\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ XSS and other vulnerabilities.\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/ https:\/\/www.owasp.org\/index.php\/List_of_useful_HTTP_headers\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$response",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","headers",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","set",116],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Content-Type-Options'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'nosniff'",116],",",["T_WHITESPACE"," ",116],["T_STRING","FALSE",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$response",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","headers",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","set",117],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Frame-Options'",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'SAMEORIGIN'",117],",",["T_WHITESPACE"," ",117],["T_STRING","FALSE",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ If the current response isn't an implementation of the\n",119],["T_WHITESPACE","    ",120],["T_COMMENT","\/\/ CacheableResponseInterface, we assume that a Response is either\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ explicitly not cacheable or that caching headers are already set in\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ another place.\n",122],["T_WHITESPACE","    ",123],["T_IF","if",123],["T_WHITESPACE"," ",123],"(","!",["T_VARIABLE","$response",123],["T_WHITESPACE"," ",123],["T_INSTANCEOF","instanceof",123],["T_WHITESPACE"," ",123],["T_STRING","CacheableResponseInterface",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","isCacheControlCustomized",124],"(",["T_VARIABLE","$response",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","setResponseNotCacheable",125],"(",["T_VARIABLE","$response",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$request",125],")",";",["T_WHITESPACE","\n      ",125],"}",["T_WHITESPACE","\n\n      ",126],["T_COMMENT","\/\/ HTTP\/1.0 proxies do not support the Vary header, so prevent any caching\n",128],["T_WHITESPACE","      ",129],["T_COMMENT","\/\/ by sending an Expires date in the past. HTTP\/1.1 clients ignore the\n",129],["T_WHITESPACE","      ",130],["T_COMMENT","\/\/ Expires header if a Cache-Control: max-age directive is specified (see\n",130],["T_WHITESPACE","      ",131],["T_COMMENT","\/\/ RFC 2616, section 14.9.3).\n",131],["T_WHITESPACE","      ",132],["T_IF","if",132],["T_WHITESPACE"," ",132],"(","!",["T_VARIABLE","$response",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","headers",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","has",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires'",132],")",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","setExpiresNoCache",133],"(",["T_VARIABLE","$response",133],")",";",["T_WHITESPACE","\n      ",133],"}",["T_WHITESPACE","\n      ",134],["T_RETURN","return",135],";",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","debugCacheabilityHeaders",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_COMMENT","\/\/ Expose the cache contexts and cache tags associated with this page in a\n",139],["T_WHITESPACE","      ",140],["T_COMMENT","\/\/ X-Drupal-Cache-Contexts and X-Drupal-Cache-Tags header respectively.\n",140],["T_WHITESPACE","      ",141],["T_VARIABLE","$response_cacheability",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$response",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getCacheableMetadata",141],"(",")",";",["T_WHITESPACE","\n      ",141],["T_VARIABLE","$response",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","headers",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","set",142],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",142],",",["T_WHITESPACE"," ",142],["T_STRING","implode",142],"(",["T_CONSTANT_ENCAPSED_STRING","' '",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$response_cacheability",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getCacheTags",142],"(",")",")",")",";",["T_WHITESPACE","\n      ",142],["T_VARIABLE","$response",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","headers",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","set",143],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Contexts'",143],",",["T_WHITESPACE"," ",143],["T_STRING","implode",143],"(",["T_CONSTANT_ENCAPSED_STRING","' '",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","cacheContextsManager",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","optimizeTokens",143],"(",["T_VARIABLE","$response_cacheability",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getCacheContexts",143],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n\n    ",144],["T_VARIABLE","$is_cacheable",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","requestPolicy",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","check",146],"(",["T_VARIABLE","$request",146],")",["T_WHITESPACE"," ",146],["T_IS_IDENTICAL","===",146],["T_WHITESPACE"," ",146],["T_STRING","RequestPolicyInterface",146],["T_DOUBLE_COLON","::",146],["T_STRING","ALLOW",146],")",["T_WHITESPACE"," ",146],["T_BOOLEAN_AND","&&",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","responsePolicy",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","check",146],"(",["T_VARIABLE","$response",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$request",146],")",["T_WHITESPACE"," ",146],["T_IS_NOT_IDENTICAL","!==",146],["T_WHITESPACE"," ",146],["T_STRING","ResponsePolicyInterface",146],["T_DOUBLE_COLON","::",146],["T_STRING","DENY",146],")",";",["T_WHITESPACE","\n\n    ",146],["T_COMMENT","\/\/ Add headers necessary to specify whether the response should be cached by\n",148],["T_WHITESPACE","    ",149],["T_COMMENT","\/\/ proxies and\/or the browser.\n",149],["T_WHITESPACE","    ",150],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$is_cacheable",150],["T_WHITESPACE"," ",150],["T_BOOLEAN_AND","&&",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","config",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","get",150],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.page.max_age'",150],")",["T_WHITESPACE"," ",150],">",["T_WHITESPACE"," ",150],["T_LNUMBER","0",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(","!",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","isCacheControlCustomized",151],"(",["T_VARIABLE","$response",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n        ",151],["T_COMMENT","\/\/ Only add the default Cache-Control header if the controller did not\n",152],["T_WHITESPACE","        ",153],["T_COMMENT","\/\/ specify one on the response.\n",153],["T_WHITESPACE","        ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setResponseCacheable",154],"(",["T_VARIABLE","$response",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$request",154],")",";",["T_WHITESPACE","\n      ",154],"}",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n    ",156],["T_ELSE","else",157],["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_COMMENT","\/\/ If either the policy forbids caching or the sites configuration does\n",158],["T_WHITESPACE","      ",159],["T_COMMENT","\/\/ not allow to add a max-age directive, then enforce a Cache-Control\n",159],["T_WHITESPACE","      ",160],["T_COMMENT","\/\/ header declaring the response as not cacheable.\n",160],["T_WHITESPACE","      ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","setResponseNotCacheable",161],"(",["T_VARIABLE","$response",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$request",161],")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n  ",162],"}",["T_WHITESPACE","\n\n  ",163],["T_DOC_COMMENT","\/**\n   * Determine whether the given response has a custom Cache-Control header.\n   *\n   * Upon construction, the ResponseHeaderBag is initialized with an empty\n   * Cache-Control header. Consequently it is not possible to check whether the\n   * header was set explicitly by simply checking its presence. Instead, it is\n   * necessary to examine the computed Cache-Control header and compare with\n   * values known to be present only when Cache-Control was never set\n   * explicitly.\n   *\n   * When neither Cache-Control nor any of the ETag, Last-Modified, Expires\n   * headers are set on the response, ::get('Cache-Control') returns the value\n   * 'no-cache'. If any of ETag, Last-Modified or Expires are set but not\n   * Cache-Control, then 'private, must-revalidate' (in exactly this order) is\n   * returned.\n   *\n   * @see \\Symfony\\Component\\HttpFoundation\\ResponseHeaderBag::computeCacheControlValue()\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Response $response\n   *\n   * @return bool\n   *   TRUE when Cache-Control header was set explicitly on the given response.\n   *\/",165],["T_WHITESPACE","\n  ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","isCacheControlCustomized",188],"(",["T_STRING","Response",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$response",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$cache_control",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$response",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","headers",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","get",189],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",189],")",";",["T_WHITESPACE","\n    ",189],["T_RETURN","return",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$cache_control",190],["T_WHITESPACE"," ",190],["T_IS_NOT_EQUAL","!=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'no-cache'",190],["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$cache_control",190],["T_WHITESPACE"," ",190],["T_IS_NOT_EQUAL","!=",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'private, must-revalidate'",190],";",["T_WHITESPACE","\n  ",190],"}",["T_WHITESPACE","\n\n  ",191],["T_DOC_COMMENT","\/**\n   * Add Cache-Control and Expires headers to a response which is not cacheable.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Response $response\n   *   A response object.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   A request object.\n   *\/",193],["T_WHITESPACE","\n  ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","setResponseNotCacheable",201],"(",["T_STRING","Response",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$response",201],",",["T_WHITESPACE"," ",201],["T_STRING","Request",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$request",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setCacheControlNoCache",202],"(",["T_VARIABLE","$response",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","setExpiresNoCache",203],"(",["T_VARIABLE","$response",203],")",";",["T_WHITESPACE","\n\n    ",203],["T_COMMENT","\/\/ There is no point in sending along headers necessary for cache\n",205],["T_WHITESPACE","    ",206],["T_COMMENT","\/\/ revalidation, if caching by proxies and browsers is denied in the first\n",206],["T_WHITESPACE","    ",207],["T_COMMENT","\/\/ place. Therefore remove ETag, Last-Modified and Vary in that case.\n",207],["T_WHITESPACE","    ",208],["T_VARIABLE","$response",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setEtag",208],"(",["T_STRING","NULL",208],")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$response",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","setLastModified",209],"(",["T_STRING","NULL",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$response",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","setVary",210],"(",["T_STRING","NULL",210],")",";",["T_WHITESPACE","\n  ",210],"}",["T_WHITESPACE","\n\n  ",211],["T_DOC_COMMENT","\/**\n   * Add Cache-Control and Expires headers to a cacheable response.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Response $response\n   *   A response object.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   A request object.\n   *\/",213],["T_WHITESPACE","\n  ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","setResponseCacheable",221],"(",["T_STRING","Response",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$response",221],",",["T_WHITESPACE"," ",221],["T_STRING","Request",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$request",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n    ",221],["T_COMMENT","\/\/ HTTP\/1.0 proxies do not support the Vary header, so prevent any caching\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ by sending an Expires date in the past. HTTP\/1.1 clients ignore the\n",223],["T_WHITESPACE","    ",224],["T_COMMENT","\/\/ Expires header if a Cache-Control: max-age directive is specified (see\n",224],["T_WHITESPACE","    ",225],["T_COMMENT","\/\/ RFC 2616, section 14.9.3).\n",225],["T_WHITESPACE","    ",226],["T_IF","if",226],["T_WHITESPACE"," ",226],"(","!",["T_VARIABLE","$response",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","headers",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","has",226],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires'",226],")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n      ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","setExpiresNoCache",227],"(",["T_VARIABLE","$response",227],")",";",["T_WHITESPACE","\n    ",227],"}",["T_WHITESPACE","\n\n    ",228],["T_VARIABLE","$max_age",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","config",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","get",230],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.page.max_age'",230],")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$response",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","headers",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","set",231],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'public, max-age='",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_VARIABLE","$max_age",231],")",";",["T_WHITESPACE","\n\n    ",231],["T_COMMENT","\/\/ In order to support HTTP cache-revalidation, ensure that there is a\n",233],["T_WHITESPACE","    ",234],["T_COMMENT","\/\/ Last-Modified and an ETag header on the response.\n",234],["T_WHITESPACE","    ",235],["T_IF","if",235],["T_WHITESPACE"," ",235],"(","!",["T_VARIABLE","$response",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","headers",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","has",235],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-Modified'",235],")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n      ",235],["T_VARIABLE","$timestamp",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","REQUEST_TIME",236],";",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$response",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","setLastModified",237],"(",["T_NEW","new",237],["T_WHITESPACE"," ",237],["T_NS_SEPARATOR","\\",237],["T_STRING","DateTime",237],"(",["T_STRING","gmdate",237],"(",["T_STRING","DateTimePlus",237],["T_DOUBLE_COLON","::",237],["T_STRING","RFC7231",237],",",["T_WHITESPACE"," ",237],["T_STRING","REQUEST_TIME",237],")",")",")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n    ",238],["T_ELSE","else",239],["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n      ",239],["T_VARIABLE","$timestamp",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$response",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getLastModified",240],"(",")",["T_OBJECT_OPERATOR","->",240],["T_STRING","getTimestamp",240],"(",")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$response",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","setEtag",242],"(",["T_VARIABLE","$timestamp",242],")",";",["T_WHITESPACE","\n\n    ",242],["T_COMMENT","\/\/ Allow HTTP proxies to cache pages for anonymous users without a session\n",244],["T_WHITESPACE","    ",245],["T_COMMENT","\/\/ cookie. The Vary header is used to indicates the set of request-header\n",245],["T_WHITESPACE","    ",246],["T_COMMENT","\/\/ fields that fully determines whether a cache is permitted to use the\n",246],["T_WHITESPACE","    ",247],["T_COMMENT","\/\/ response to reply to a subsequent request for a given URL without\n",247],["T_WHITESPACE","    ",248],["T_COMMENT","\/\/ revalidation.\n",248],["T_WHITESPACE","    ",249],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_VARIABLE","$response",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","hasVary",249],"(",")",["T_WHITESPACE"," ",249],["T_BOOLEAN_AND","&&",249],["T_WHITESPACE"," ",249],"!",["T_STRING","Settings",249],["T_DOUBLE_COLON","::",249],["T_STRING","get",249],"(",["T_CONSTANT_ENCAPSED_STRING","'omit_vary_cookie'",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n      ",249],["T_VARIABLE","$response",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","setVary",250],"(",["T_CONSTANT_ENCAPSED_STRING","'Cookie'",250],",",["T_WHITESPACE"," ",250],["T_STRING","FALSE",250],")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n  ",251],"}",["T_WHITESPACE","\n\n  ",252],["T_DOC_COMMENT","\/**\n   * Disable caching in the browser and for HTTP\/1.1 proxies and clients.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Response $response\n   *   A response object.\n   *\/",254],["T_WHITESPACE","\n  ",259],["T_PROTECTED","protected",260],["T_WHITESPACE"," ",260],["T_FUNCTION","function",260],["T_WHITESPACE"," ",260],["T_STRING","setCacheControlNoCache",260],"(",["T_STRING","Response",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$response",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$response",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","headers",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","set",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'no-cache, must-revalidate'",261],")",";",["T_WHITESPACE","\n  ",261],"}",["T_WHITESPACE","\n\n  ",262],["T_DOC_COMMENT","\/**\n   * Disable caching in ancient browsers and for HTTP\/1.0 proxies and clients.\n   *\n   * HTTP\/1.0 proxies do not support the Vary header, so prevent any caching by\n   * sending an Expires date in the past. HTTP\/1.1 clients ignore the Expires\n   * header if a Cache-Control: max-age= directive is specified (see RFC 2616,\n   * section 14.9.3).\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Response $response\n   *   A response object.\n   *\/",264],["T_WHITESPACE","\n  ",274],["T_PROTECTED","protected",275],["T_WHITESPACE"," ",275],["T_FUNCTION","function",275],["T_WHITESPACE"," ",275],["T_STRING","setExpiresNoCache",275],"(",["T_STRING","Response",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$response",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$response",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","setExpires",276],"(",["T_NS_SEPARATOR","\\",276],["T_STRING","DateTime",276],["T_DOUBLE_COLON","::",276],["T_STRING","createFromFormat",276],"(",["T_CONSTANT_ENCAPSED_STRING","'j-M-Y H:i:s T'",276],",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'19-Nov-1978 05:00:00 UTC'",276],")",")",";",["T_WHITESPACE","\n  ",276],"}",["T_WHITESPACE","\n\n  ",277],["T_DOC_COMMENT","\/**\n   * Registers the methods in this class that should be listeners.\n   *\n   * @return array\n   *   An array of event listener definitions.\n   *\/",279],["T_WHITESPACE","\n  ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_STATIC","static",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","getSubscribedEvents",285],"(",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$events",286],"[",["T_STRING","KernelEvents",286],["T_DOUBLE_COLON","::",286],["T_STRING","RESPONSE",286],"]","[","]",["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",["T_CONSTANT_ENCAPSED_STRING","'onRespond'",286],")",";",["T_WHITESPACE","\n    ",286],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$events",287],";",["T_WHITESPACE","\n  ",287],"}",["T_WHITESPACE","\n\n",288],"}",["T_WHITESPACE","\n",290]]
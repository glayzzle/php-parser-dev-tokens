[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Authentication",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AuthenticationProviderFilterInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Authentication",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AuthenticationProviderChallengeInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Authentication",7],["T_NS_SEPARATOR","\\",7],["T_STRING","AuthenticationProviderInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Session",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccountProxyInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EventDispatcher",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EventSubscriberInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpKernel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Event",10],["T_NS_SEPARATOR","\\",10],["T_STRING","GetResponseEvent",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","HttpKernel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Event",11],["T_NS_SEPARATOR","\\",11],["T_STRING","GetResponseForExceptionEvent",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Symfony",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Component",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HttpKernel",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Exception",12],["T_NS_SEPARATOR","\\",12],["T_STRING","AccessDeniedHttpException",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HttpKernel",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HttpKernelInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpKernel",14],["T_NS_SEPARATOR","\\",14],["T_STRING","KernelEvents",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Authentication subscriber.\n *\n * Trigger authentication during the request.\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","AuthenticationSubscriber",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","EventSubscriberInterface",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Authentication provider.\n   *\n   * @var \\Drupal\\Core\\Authentication\\AuthenticationProviderInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$authenticationProvider",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Authentication provider filter.\n   *\n   * @var \\Drupal\\Core\\Authentication\\AuthenticationProviderFilterInterface|null\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$filter",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Authentication challenge provider.\n   *\n   * @var \\Drupal\\Core\\Authentication\\AuthenticationProviderChallengeInterface|null\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$challengeProvider",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Account proxy.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountProxyInterface\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$accountProxy",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * Constructs an authentication subscriber.\n   *\n   * @param \\Drupal\\Core\\Authentication\\AuthenticationProviderInterface $authentication_provider\n   *   An authentication provider.\n   * @param \\Drupal\\Core\\Session\\AccountProxyInterface $account_proxy\n   *   Account proxy.\n   *\/",51],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","__construct",59],"(",["T_STRING","AuthenticationProviderInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$authentication_provider",59],",",["T_WHITESPACE"," ",59],["T_STRING","AccountProxyInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$account_proxy",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","authenticationProvider",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$authentication_provider",60],";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","filter",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$authentication_provider",61],["T_WHITESPACE"," ",61],["T_INSTANCEOF","instanceof",61],["T_WHITESPACE"," ",61],["T_STRING","AuthenticationProviderFilterInterface",61],")",["T_WHITESPACE"," ",61],"?",["T_WHITESPACE"," ",61],["T_VARIABLE","$authentication_provider",61],["T_WHITESPACE"," ",61],":",["T_WHITESPACE"," ",61],["T_STRING","NULL",61],";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","challengeProvider",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$authentication_provider",62],["T_WHITESPACE"," ",62],["T_INSTANCEOF","instanceof",62],["T_WHITESPACE"," ",62],["T_STRING","AuthenticationProviderChallengeInterface",62],")",["T_WHITESPACE"," ",62],"?",["T_WHITESPACE"," ",62],["T_VARIABLE","$authentication_provider",62],["T_WHITESPACE"," ",62],":",["T_WHITESPACE"," ",62],["T_STRING","NULL",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","accountProxy",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$account_proxy",63],";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Authenticates user on request.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent $event\n   *   The request event.\n   *\n   * @see \\Drupal\\Core\\Authentication\\AuthenticationProviderInterface::authenticate()\n   *\/",66],["T_WHITESPACE","\n  ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","onKernelRequestAuthenticate",74],"(",["T_STRING","GetResponseEvent",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$event",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$event",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRequestType",75],"(",")",["T_WHITESPACE"," ",75],["T_IS_IDENTICAL","===",75],["T_WHITESPACE"," ",75],["T_STRING","HttpKernelInterface",75],["T_DOUBLE_COLON","::",75],["T_STRING","MASTER_REQUEST",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$request",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$event",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getRequest",76],"(",")",";",["T_WHITESPACE","\n      ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","authenticationProvider",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","applies",77],"(",["T_VARIABLE","$request",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$account",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","authenticationProvider",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","authenticate",78],"(",["T_VARIABLE","$request",78],")",";",["T_WHITESPACE","\n        ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$account",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n          ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","accountProxy",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","setAccount",80],"(",["T_VARIABLE","$account",80],")",";",["T_WHITESPACE","\n          ",80],["T_RETURN","return",81],";",["T_WHITESPACE","\n        ",81],"}",["T_WHITESPACE","\n      ",82],"}",["T_WHITESPACE","\n      ",83],["T_COMMENT","\/\/ No account has been set explicitly, initialize the timezone here.\n",84],["T_WHITESPACE","      ",85],["T_STRING","date_default_timezone_set",85],"(",["T_STRING","drupal_get_user_timezone",85],"(",")",")",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Denies access if authentication provider is not allowed on this route.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent $event\n   *   The request event.\n   *\/",89],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","onKernelRequestFilterProvider",95],"(",["T_STRING","GetResponseEvent",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$event",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_ISSET","isset",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","filter",96],")",["T_WHITESPACE"," ",96],["T_BOOLEAN_AND","&&",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$event",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getRequestType",96],"(",")",["T_WHITESPACE"," ",96],["T_IS_IDENTICAL","===",96],["T_WHITESPACE"," ",96],["T_STRING","HttpKernelInterface",96],["T_DOUBLE_COLON","::",96],["T_STRING","MASTER_REQUEST",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$request",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$event",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getRequest",97],"(",")",";",["T_WHITESPACE","\n      ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","authenticationProvider",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","applies",98],"(",["T_VARIABLE","$request",98],")",["T_WHITESPACE"," ",98],["T_BOOLEAN_AND","&&",98],["T_WHITESPACE"," ",98],"!",["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","filter",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","appliesToRoutedRequest",98],"(",["T_VARIABLE","$request",98],",",["T_WHITESPACE"," ",98],["T_STRING","TRUE",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_THROW","throw",99],["T_WHITESPACE"," ",99],["T_NEW","new",99],["T_WHITESPACE"," ",99],["T_STRING","AccessDeniedHttpException",99],"(",")",";",["T_WHITESPACE","\n      ",99],"}",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * Respond with a challenge on access denied exceptions if appropriate.\n   *\n   * On a 403 (access denied), if there are no credentials on the request, some\n   * authentication methods (e.g. basic auth) require that a challenge is sent\n   * to the client.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\GetResponseForExceptionEvent $event\n   *   The exception event.\n   *\/",104],["T_WHITESPACE","\n  ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","onExceptionSendChallenge",114],"(",["T_STRING","GetResponseForExceptionEvent",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$event",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_ISSET","isset",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","challengeProvider",115],")",["T_WHITESPACE"," ",115],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$event",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getRequestType",115],"(",")",["T_WHITESPACE"," ",115],["T_IS_IDENTICAL","===",115],["T_WHITESPACE"," ",115],["T_STRING","HttpKernelInterface",115],["T_DOUBLE_COLON","::",115],["T_STRING","MASTER_REQUEST",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_VARIABLE","$request",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$event",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getRequest",116],"(",")",";",["T_WHITESPACE","\n      ",116],["T_VARIABLE","$exception",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$event",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getException",117],"(",")",";",["T_WHITESPACE","\n      ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$exception",118],["T_WHITESPACE"," ",118],["T_INSTANCEOF","instanceof",118],["T_WHITESPACE"," ",118],["T_STRING","AccessDeniedHttpException",118],["T_WHITESPACE"," ",118],["T_BOOLEAN_AND","&&",118],["T_WHITESPACE"," ",118],"!",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","authenticationProvider",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","applies",118],"(",["T_VARIABLE","$request",118],")",["T_WHITESPACE"," ",118],["T_BOOLEAN_AND","&&",118],["T_WHITESPACE"," ",118],"(","!",["T_ISSET","isset",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","filter",118],")",["T_WHITESPACE"," ",118],["T_BOOLEAN_OR","||",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","filter",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","appliesToRoutedRequest",118],"(",["T_VARIABLE","$request",118],",",["T_WHITESPACE"," ",118],["T_STRING","FALSE",118],")",")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$challenge_exception",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","challengeProvider",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","challengeException",119],"(",["T_VARIABLE","$request",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$exception",119],")",";",["T_WHITESPACE","\n        ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_VARIABLE","$challenge_exception",120],")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n          ",120],["T_VARIABLE","$event",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","setException",121],"(",["T_VARIABLE","$challenge_exception",121],")",";",["T_WHITESPACE","\n        ",121],"}",["T_WHITESPACE","\n      ",122],"}",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n  ",124],"}",["T_WHITESPACE","\n\n  ",125],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",127],["T_WHITESPACE","\n  ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_STATIC","static",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","getSubscribedEvents",130],"(",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_COMMENT","\/\/ The priority for authentication must be higher than the highest event\n",131],["T_WHITESPACE","    ",132],["T_COMMENT","\/\/ subscriber accessing the current user. Especially it must be higher than\n",132],["T_WHITESPACE","    ",133],["T_COMMENT","\/\/ LanguageRequestSubscriber as LanguageManager accesses the current user if\n",133],["T_WHITESPACE","    ",134],["T_COMMENT","\/\/ the language module is enabled.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$events",135],"[",["T_STRING","KernelEvents",135],["T_DOUBLE_COLON","::",135],["T_STRING","REQUEST",135],"]","[","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"[",["T_CONSTANT_ENCAPSED_STRING","'onKernelRequestAuthenticate'",135],",",["T_WHITESPACE"," ",135],["T_LNUMBER","300",135],"]",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Access check must be performed after routing.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$events",138],"[",["T_STRING","KernelEvents",138],["T_DOUBLE_COLON","::",138],["T_STRING","REQUEST",138],"]","[","]",["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'onKernelRequestFilterProvider'",138],",",["T_WHITESPACE"," ",138],["T_LNUMBER","31",138],"]",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$events",139],"[",["T_STRING","KernelEvents",139],["T_DOUBLE_COLON","::",139],["T_STRING","EXCEPTION",139],"]","[","]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[",["T_CONSTANT_ENCAPSED_STRING","'onExceptionSendChallenge'",139],",",["T_WHITESPACE"," ",139],["T_LNUMBER","75",139],"]",";",["T_WHITESPACE","\n    ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$events",140],";",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n",141],"}",["T_WHITESPACE","\n",143]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventDispatcher",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EventSubscriberInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","HttpFoundation",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Request",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpKernel",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Event",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FilterResponseEvent",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpKernel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KernelEvents",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Subscribes to filter RSS responses, to make relative URIs absolute.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","RssResponseRelativeUrlFilter",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","EventSubscriberInterface",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Converts relative URLs to absolute URLs.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\FilterResponseEvent $event\n   *   The response event.\n   *\/",16],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","onResponse",22],"(",["T_STRING","FilterResponseEvent",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$event",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_COMMENT","\/\/ Only care about RSS responses.\n",23],["T_WHITESPACE","    ",24],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_STRING","stripos",24],"(",["T_VARIABLE","$event",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getResponse",24],"(",")",["T_OBJECT_OPERATOR","->",24],["T_STRING","headers",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","get",24],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",24],")",",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'application\/rss+xml'",24],")",["T_WHITESPACE"," ",24],["T_IS_IDENTICAL","===",24],["T_WHITESPACE"," ",24],["T_STRING","FALSE",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_RETURN","return",25],";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$response",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$event",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getResponse",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$response",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","setContent",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","transformRootRelativeUrlsToAbsolute",29],"(",["T_VARIABLE","$response",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getContent",29],"(",")",",",["T_WHITESPACE"," ",29],["T_VARIABLE","$event",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getRequest",29],"(",")",")",")",";",["T_WHITESPACE","\n  ",29],"}",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Converts all root-relative URLs to absolute URLs in RSS markup.\n   *\n   * Does not change any existing protocol-relative or absolute URLs.\n   *\n   * @param string $rss_markup\n   *   The RSS markup to update.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The current request.\n   *\n   * @return string\n   *   The updated RSS markup.\n   *\/",32],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","transformRootRelativeUrlsToAbsolute",45],"(",["T_VARIABLE","$rss_markup",45],",",["T_WHITESPACE"," ",45],["T_STRING","Request",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$request",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$rss_dom",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NEW","new",46],["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","DOMDocument",46],"(",")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Load the RSS, if there are parsing errors, abort and return the unchanged\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ markup.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$previous_value",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","libxml_use_internal_errors",50],"(",["T_STRING","TRUE",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$rss_dom",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","loadXML",51],"(",["T_VARIABLE","$rss_markup",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$errors",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","libxml_get_errors",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_STRING","libxml_use_internal_errors",53],"(",["T_VARIABLE","$previous_value",53],")",";",["T_WHITESPACE","\n    ",53],["T_IF","if",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$errors",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n      ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$rss_markup",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Invoke Html::transformRootRelativeUrlsToAbsolute() on all HTML content\n",58],["T_WHITESPACE","    ",59],["T_COMMENT","\/\/ embedded in this RSS feed.\n",59],["T_WHITESPACE","    ",60],["T_FOREACH","foreach",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$rss_dom",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getElementsByTagName",60],"(",["T_CONSTANT_ENCAPSED_STRING","'description'",60],")",["T_WHITESPACE"," ",60],["T_AS","as",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$node",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$html_markup",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$node",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","nodeValue",61],";",["T_WHITESPACE","\n      ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","!",["T_EMPTY","empty",62],"(",["T_VARIABLE","$html_markup",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$node",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","nodeValue",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Html",63],["T_DOUBLE_COLON","::",63],["T_STRING","transformRootRelativeUrlsToAbsolute",63],"(",["T_VARIABLE","$html_markup",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$request",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getSchemeAndHttpHost",63],"(",")",")",";",["T_WHITESPACE","\n      ",63],"}",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$rss_dom",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","saveXML",67],"(",")",";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","getSubscribedEvents",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Should run after any other response subscriber that modifies the markup.\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ @see \\Drupal\\Core\\EventSubscriber\\ActiveLinkResponseFilter\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$events",76],"[",["T_STRING","KernelEvents",76],["T_DOUBLE_COLON","::",76],["T_STRING","RESPONSE",76],"]","[","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[",["T_CONSTANT_ENCAPSED_STRING","'onResponse'",76],",",["T_WHITESPACE"," ",76],"-",["T_LNUMBER","512",76],"]",";",["T_WHITESPACE","\n\n    ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$events",78],";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n",79],"}",["T_WHITESPACE","\n",81]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Menu",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CacheBackendInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheCollector",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Lock",7],["T_NS_SEPARATOR","\\",7],["T_STRING","LockBackendInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Routing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RouteMatchInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Provides the default implementation of the active menu trail service.\n *\n * It uses the current route name and route parameters to compare with the ones\n * of the menu links.\n *\/",10],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","MenuActiveTrail",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","CacheCollector",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","MenuActiveTrailInterface",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * The menu link plugin manager.\n   *\n   * @var \\Drupal\\Core\\Menu\\MenuLinkManagerInterface\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$menuLinkManager",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The route match object for the current page.\n   *\n   * @var \\Drupal\\Core\\Routing\\RouteMatchInterface\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$routeMatch",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * Constructs a \\Drupal\\Core\\Menu\\MenuActiveTrail object.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkManagerInterface $menu_link_manager\n   *   The menu link plugin manager.\n   * @param \\Drupal\\Core\\Routing\\RouteMatchInterface $route_match\n   *   A route match object for finding the active link.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *   The cache backend.\n   * @param \\Drupal\\Core\\Lock\\LockBackendInterface $lock\n   *   The lock backend.\n   *\/",32],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_STRING","MenuLinkManagerInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$menu_link_manager",44],",",["T_WHITESPACE"," ",44],["T_STRING","RouteMatchInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$route_match",44],",",["T_WHITESPACE"," ",44],["T_STRING","CacheBackendInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$cache",44],",",["T_WHITESPACE"," ",44],["T_STRING","LockBackendInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$lock",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_STRING","parent",45],["T_DOUBLE_COLON","::",45],["T_STRING","__construct",45],"(",["T_STRING","NULL",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$cache",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$lock",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","menuLinkManager",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$menu_link_manager",46],";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","routeMatch",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$route_match",47],";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @see ::getActiveTrailIds()\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","getCid",55],"(",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","!",["T_ISSET","isset",56],"(",["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","cid",56],")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$route_parameters",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","routeMatch",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getRawParameters",57],"(",")",["T_OBJECT_OPERATOR","->",57],["T_STRING","all",57],"(",")",";",["T_WHITESPACE","\n      ",57],["T_STRING","ksort",58],"(",["T_VARIABLE","$route_parameters",58],")",";",["T_WHITESPACE","\n      ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'active-trail:route:'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","routeMatch",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getRouteName",59],"(",")",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","':route_parameters:'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","serialize",59],"(",["T_VARIABLE","$route_parameters",59],")",";",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","cid",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @see ::getActiveTrailIds()\n   *\/",65],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","resolveCacheMiss",70],"(",["T_VARIABLE","$menu_name",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","storage",71],"[",["T_VARIABLE","$menu_name",71],"]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","doGetActiveTrailIds",71],"(",["T_VARIABLE","$menu_name",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","tags",72],"[","]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'config:system.menu.'",72],["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_VARIABLE","$menu_name",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","persist",73],"(",["T_VARIABLE","$menu_name",73],")",";",["T_WHITESPACE","\n\n    ",73],["T_RETURN","return",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","storage",75],"[",["T_VARIABLE","$menu_name",75],"]",";",["T_WHITESPACE","\n  ",75],"}",["T_WHITESPACE","\n\n  ",76],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * This implementation caches all active trail IDs per route match for *all*\n   * menus whose active trails are calculated on that page. This ensures 1 cache\n   * get for all active trails per page load, rather than N.\n   *\n   * It uses the cache collector pattern to do this.\n   *\n   * @see ::get()\n   * @see \\Drupal\\Core\\Cache\\CacheCollectorInterface\n   * @see \\Drupal\\Core\\Cache\\CacheCollector\n   *\/",78],["T_WHITESPACE","\n  ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","getActiveTrailIds",91],"(",["T_VARIABLE","$menu_name",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","get",92],"(",["T_VARIABLE","$menu_name",92],")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n  ",93],["T_DOC_COMMENT","\/**\n   * Helper method for ::getActiveTrailIds().\n   *\/",95],["T_WHITESPACE","\n  ",97],["T_PROTECTED","protected",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","doGetActiveTrailIds",98],"(",["T_VARIABLE","$menu_name",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_COMMENT","\/\/ Parent ids; used both as key and value to ensure uniqueness.\n",99],["T_WHITESPACE","    ",100],["T_COMMENT","\/\/ We always want all the top-level links with parent == ''.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$active_trail",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","''",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","''",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ If a link in the given menu indeed matches the route, then use it to\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ complete the active trail.\n",104],["T_WHITESPACE","    ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$active_link",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getActiveLink",105],"(",["T_VARIABLE","$menu_name",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$parents",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","menuLinkManager",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getParentIds",106],"(",["T_VARIABLE","$active_link",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getPluginId",106],"(",")",")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$active_trail",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$parents",107],["T_WHITESPACE"," ",107],"+",["T_WHITESPACE"," ",107],["T_VARIABLE","$active_trail",107],";",["T_WHITESPACE","\n      ",107],"}",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n\n    ",109],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$active_trail",111],";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",114],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","getActiveLink",117],"(",["T_VARIABLE","$menu_name",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","NULL",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_COMMENT","\/\/ Note: this is a very simple implementation. If you need more control\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ over the return value, such as matching a prioritized list of menu names,\n",119],["T_WHITESPACE","    ",120],["T_COMMENT","\/\/ you should substitute your own implementation for the 'menu.active_trail'\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ service in the container.\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ The menu links coming from the storage are already sorted by depth,\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ weight and ID.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$found",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_STRING","NULL",124],";",["T_WHITESPACE","\n\n    ",124],["T_VARIABLE","$route_name",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","routeMatch",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getRouteName",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_COMMENT","\/\/ On a default (not custom) 403 page the route name is NULL. On a custom\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ 403 page we will get the route name for that page, so we can consider\n",128],["T_WHITESPACE","    ",129],["T_COMMENT","\/\/ it a feature that a relevant menu tree may be displayed.\n",129],["T_WHITESPACE","    ",130],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$route_name",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_VARIABLE","$route_parameters",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","routeMatch",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getRawParameters",131],"(",")",["T_OBJECT_OPERATOR","->",131],["T_STRING","all",131],"(",")",";",["T_WHITESPACE","\n\n      ",131],["T_COMMENT","\/\/ Load links matching this route.\n",133],["T_WHITESPACE","      ",134],["T_VARIABLE","$links",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","menuLinkManager",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","loadLinksByRoute",134],"(",["T_VARIABLE","$route_name",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$route_parameters",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$menu_name",134],")",";",["T_WHITESPACE","\n      ",134],["T_COMMENT","\/\/ Select the first matching link.\n",135],["T_WHITESPACE","      ",136],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$links",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$found",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","reset",137],"(",["T_VARIABLE","$links",137],")",";",["T_WHITESPACE","\n      ",137],"}",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n    ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$found",140],";",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n",141],"}",["T_WHITESPACE","\n",143]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Menu",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Access",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AccessManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Access",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AccessResult",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Query",7],["T_NS_SEPARATOR","\\",7],["T_STRING","QueryFactory",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Session",8],["T_NS_SEPARATOR","\\",8],["T_STRING","AccountInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Provides a couple of menu link tree manipulators.\n *\n * This class provides menu link tree manipulators to:\n * - perform render cached menu-optimized access checking\n * - optimized node access checking\n * - generate a unique index for the elements in a tree and sorting by it\n * - flatten a tree (i.e. a 1-dimensional tree)\n *\/",10],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","DefaultMenuLinkTreeManipulators",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The access manager.\n   *\n   * @var \\Drupal\\Core\\Access\\AccessManagerInterface\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$accessManager",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The current user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$account",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The entity query factory.\n   *\n   * @var \\Drupal\\Core\\Entity\\Query\\QueryFactory\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$queryFactory",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Constructs a \\Drupal\\Core\\Menu\\DefaultMenuLinkTreeManipulators object.\n   *\n   * @param \\Drupal\\Core\\Access\\AccessManagerInterface $access_manager\n   *   The access manager.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   The current user.\n   * @param \\Drupal\\Core\\Entity\\Query\\QueryFactory $query_factory\n   *   The entity query factory.\n   *\/",42],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","__construct",52],"(",["T_STRING","AccessManagerInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$access_manager",52],",",["T_WHITESPACE"," ",52],["T_STRING","AccountInterface",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$account",52],",",["T_WHITESPACE"," ",52],["T_STRING","QueryFactory",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$query_factory",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","accessManager",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$access_manager",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","account",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$account",54],";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","queryFactory",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$query_factory",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * Performs access checks of a menu tree.\n   *\n   * Sets the 'access' property to AccessResultInterface objects on menu link\n   * tree elements. Descends into subtrees if the root of the subtree is\n   * accessible. Inaccessible subtrees are deleted, except the top-level\n   * inaccessible link, to be compatible with render caching.\n   *\n   * (This means that top-level inaccessible links are *not* removed; it is up\n   * to the code doing something with the tree to exclude inaccessible links,\n   * just like MenuLinkTree::build() does. This allows those things to specify\n   * the necessary cacheability metadata.)\n   *\n   * This is compatible with render caching, because of cache context bubbling:\n   * conditionally defined cache contexts (i.e. subtrees that are only\n   * accessible to some users) will bubble just like they do for render arrays.\n   * This is why inaccessible subtrees are deleted, except at the top-level\n   * inaccessible link: if we didn't keep the first (depth-wise) inaccessible\n   * link, we wouldn't be able to know which cache contexts would cause those\n   * subtrees to become accessible again, thus forcing us to conclude that that\n   * subtree is unconditionally inaccessible.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkTreeElement[] $tree\n   *   The menu link tree to manipulate.\n   *\n   * @return \\Drupal\\Core\\Menu\\MenuLinkTreeElement[]\n   *   The manipulated menu link tree.\n   *\/",58],["T_WHITESPACE","\n  ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","checkAccess",86],"(",["T_ARRAY","array",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$tree",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$tree",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$key",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$element",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n      ",87],["T_COMMENT","\/\/ Other menu tree manipulators may already have calculated access, do not\n",88],["T_WHITESPACE","      ",89],["T_COMMENT","\/\/ overwrite the existing value in that case.\n",89],["T_WHITESPACE","      ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_ISSET","isset",90],"(",["T_VARIABLE","$element",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","access",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$tree",91],"[",["T_VARIABLE","$key",91],"]",["T_OBJECT_OPERATOR","->",91],["T_STRING","access",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","menuLinkCheckAccess",91],"(",["T_VARIABLE","$element",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","link",91],")",";",["T_WHITESPACE","\n      ",91],"}",["T_WHITESPACE","\n      ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$tree",93],"[",["T_VARIABLE","$key",93],"]",["T_OBJECT_OPERATOR","->",93],["T_STRING","access",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","isAllowed",93],"(",")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n        ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$tree",94],"[",["T_VARIABLE","$key",94],"]",["T_OBJECT_OPERATOR","->",94],["T_STRING","subtree",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n          ",94],["T_VARIABLE","$tree",95],"[",["T_VARIABLE","$key",95],"]",["T_OBJECT_OPERATOR","->",95],["T_STRING","subtree",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","checkAccess",95],"(",["T_VARIABLE","$tree",95],"[",["T_VARIABLE","$key",95],"]",["T_OBJECT_OPERATOR","->",95],["T_STRING","subtree",95],")",";",["T_WHITESPACE","\n        ",95],"}",["T_WHITESPACE","\n      ",96],"}",["T_WHITESPACE","\n      ",97],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n        ",98],["T_COMMENT","\/\/ Replace the link with an InaccessibleMenuLink object, so that if it\n",99],["T_WHITESPACE","        ",100],["T_COMMENT","\/\/ is accidentally rendered, no sensitive information is divulged.\n",100],["T_WHITESPACE","        ",101],["T_VARIABLE","$tree",101],"[",["T_VARIABLE","$key",101],"]",["T_OBJECT_OPERATOR","->",101],["T_STRING","link",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","InaccessibleMenuLink",101],"(",["T_VARIABLE","$tree",101],"[",["T_VARIABLE","$key",101],"]",["T_OBJECT_OPERATOR","->",101],["T_STRING","link",101],")",";",["T_WHITESPACE","\n        ",101],["T_COMMENT","\/\/ Always keep top-level inaccessible links: their cacheability metadata\n",102],["T_WHITESPACE","        ",103],["T_COMMENT","\/\/ that indicates why they're not accessible by the current user must be\n",103],["T_WHITESPACE","        ",104],["T_COMMENT","\/\/ bubbled. Otherwise, those subtrees will not be varied by any cache\n",104],["T_WHITESPACE","        ",105],["T_COMMENT","\/\/ contexts at all, therefore forcing them to remain empty for all users\n",105],["T_WHITESPACE","        ",106],["T_COMMENT","\/\/ unless some other part of the menu link tree accidentally varies by\n",106],["T_WHITESPACE","        ",107],["T_COMMENT","\/\/ the same cache contexts.\n",107],["T_WHITESPACE","        ",108],["T_COMMENT","\/\/ For deeper levels, we *can* remove the subtrees and therefore also\n",108],["T_WHITESPACE","        ",109],["T_COMMENT","\/\/ not perform access checking on the subtree, thanks to bubbling\/cache\n",109],["T_WHITESPACE","        ",110],["T_COMMENT","\/\/ redirects. This therefore allows us to still do significantly less\n",110],["T_WHITESPACE","        ",111],["T_COMMENT","\/\/ work in case of inaccessible subtrees, which is the entire reason why\n",111],["T_WHITESPACE","        ",112],["T_COMMENT","\/\/ this deletes subtrees in the first place.\n",112],["T_WHITESPACE","        ",113],["T_VARIABLE","$tree",113],"[",["T_VARIABLE","$key",113],"]",["T_OBJECT_OPERATOR","->",113],["T_STRING","subtree",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],"[","]",";",["T_WHITESPACE","\n      ",113],"}",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n    ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$tree",116],";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Performs access checking for nodes in an optimized way.\n   *\n   * This manipulator should be added before the generic ::checkAccess() one,\n   * because it provides a performance optimization for ::checkAccess().\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkTreeElement[] $tree\n   *   The menu link tree to manipulate.\n   *\n   * @return \\Drupal\\Core\\Menu\\MenuLinkTreeElement[]\n   *   The manipulated menu link tree.\n   *\/",119],["T_WHITESPACE","\n  ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","checkNodeAccess",131],"(",["T_ARRAY","array",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$tree",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$node_links",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","collectNodeLinks",133],"(",["T_VARIABLE","$tree",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$node_links",133],")",";",["T_WHITESPACE","\n    ",133],["T_IF","if",134],["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$node_links",134],")",["T_WHITESPACE"," ",134],"{",["T_WHITESPACE","\n      ",134],["T_VARIABLE","$nids",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","array_keys",135],"(",["T_VARIABLE","$node_links",135],")",";",["T_WHITESPACE","\n\n      ",135],["T_VARIABLE","$query",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","queryFactory",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","get",137],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",137],")",";",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$query",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","condition",138],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$nids",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'IN'",138],")",";",["T_WHITESPACE","\n\n      ",138],["T_COMMENT","\/\/ Allows admins to view all nodes, by both disabling node_access\n",140],["T_WHITESPACE","      ",141],["T_COMMENT","\/\/ query rewrite as well as not checking for the node status. The\n",141],["T_WHITESPACE","      ",142],["T_COMMENT","\/\/ 'view own unpublished nodes' permission is ignored to not require cache\n",142],["T_WHITESPACE","      ",143],["T_COMMENT","\/\/ entries per user.\n",143],["T_WHITESPACE","      ",144],["T_VARIABLE","$access_result",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","AccessResult",144],["T_DOUBLE_COLON","::",144],["T_STRING","allowed",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","cachePerPermissions",144],"(",")",";",["T_WHITESPACE","\n      ",144],["T_IF","if",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","account",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","hasPermission",145],"(",["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",145],")",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n        ",145],["T_VARIABLE","$query",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","accessCheck",146],"(",["T_STRING","FALSE",146],")",";",["T_WHITESPACE","\n      ",146],"}",["T_WHITESPACE","\n      ",147],["T_ELSE","else",148],["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$access_result",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","addCacheContexts",149],"(","[",["T_CONSTANT_ENCAPSED_STRING","'user.node_grants:view'",149],"]",")",";",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$query",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","condition",150],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",150],",",["T_WHITESPACE"," ",150],["T_STRING","NODE_PUBLISHED",150],")",";",["T_WHITESPACE","\n      ",150],"}",["T_WHITESPACE","\n\n      ",151],["T_VARIABLE","$nids",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$query",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","execute",153],"(",")",";",["T_WHITESPACE","\n      ",153],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_VARIABLE","$nids",154],["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$nid",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n        ",154],["T_FOREACH","foreach",155],["T_WHITESPACE"," ",155],"(",["T_VARIABLE","$node_links",155],"[",["T_VARIABLE","$nid",155],"]",["T_WHITESPACE"," ",155],["T_AS","as",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$key",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$link",155],")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n          ",155],["T_VARIABLE","$node_links",156],"[",["T_VARIABLE","$nid",156],"]","[",["T_VARIABLE","$key",156],"]",["T_OBJECT_OPERATOR","->",156],["T_STRING","access",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$access_result",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n      ",157],"}",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$tree",161],";",["T_WHITESPACE","\n  ",161],"}",["T_WHITESPACE","\n\n  ",162],["T_DOC_COMMENT","\/**\n   * Collects the node links in the menu tree.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkTreeElement[] $tree\n   *   The menu link tree to manipulate.\n   * @param array $node_links\n   *   Stores references to menu link elements to effectively set access.\n   *\n   * @return \\Drupal\\Core\\Menu\\MenuLinkTreeElement[]\n   *   The manipulated menu link tree.\n   *\/",164],["T_WHITESPACE","\n  ",174],["T_PROTECTED","protected",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","collectNodeLinks",175],"(",["T_ARRAY","array",175],["T_WHITESPACE"," ",175],"&",["T_VARIABLE","$tree",175],",",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],["T_WHITESPACE"," ",175],"&",["T_VARIABLE","$node_links",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n    ",175],["T_FOREACH","foreach",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$tree",176],["T_WHITESPACE"," ",176],["T_AS","as",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$key",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],"&",["T_VARIABLE","$element",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$element",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","link",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","getRouteName",177],"(",")",["T_WHITESPACE"," ",177],["T_IS_EQUAL","==",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'entity.node.canonical'",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n        ",177],["T_VARIABLE","$nid",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$element",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","link",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getRouteParameters",178],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'node'",178],"]",";",["T_WHITESPACE","\n        ",178],["T_VARIABLE","$node_links",179],"[",["T_VARIABLE","$nid",179],"]","[",["T_VARIABLE","$key",179],"]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$element",179],";",["T_WHITESPACE","\n        ",179],["T_COMMENT","\/\/ Deny access by default. checkNodeAccess() will re-add it.\n",180],["T_WHITESPACE","        ",181],["T_VARIABLE","$element",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","access",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","AccessResult",181],["T_DOUBLE_COLON","::",181],["T_STRING","neutral",181],"(",")",";",["T_WHITESPACE","\n      ",181],"}",["T_WHITESPACE","\n      ",182],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$element",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","hasChildren",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n        ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","collectNodeLinks",184],"(",["T_VARIABLE","$element",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","subtree",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$node_links",184],")",";",["T_WHITESPACE","\n      ",184],"}",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n  ",186],"}",["T_WHITESPACE","\n\n  ",187],["T_DOC_COMMENT","\/**\n   * Checks access for one menu link instance.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkInterface $instance\n   *   The menu link instance.\n   *\n   * @return \\Drupal\\Core\\Access\\AccessResultInterface\n   *   The access result.\n   *\/",189],["T_WHITESPACE","\n  ",197],["T_PROTECTED","protected",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","menuLinkCheckAccess",198],"(",["T_STRING","MenuLinkInterface",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$instance",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$access_result",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","NULL",199],";",["T_WHITESPACE","\n    ",199],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","account",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","hasPermission",200],"(",["T_CONSTANT_ENCAPSED_STRING","'link to any page'",200],")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n      ",200],["T_VARIABLE","$access_result",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","AccessResult",201],["T_DOUBLE_COLON","::",201],["T_STRING","allowed",201],"(",")",";",["T_WHITESPACE","\n    ",201],"}",["T_WHITESPACE","\n    ",202],["T_ELSE","else",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n      ",203],["T_VARIABLE","$url",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$instance",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getUrlObject",204],"(",")",";",["T_WHITESPACE","\n\n      ",204],["T_COMMENT","\/\/ When no route name is specified, this must be an external link.\n",206],["T_WHITESPACE","      ",207],["T_IF","if",207],["T_WHITESPACE"," ",207],"(","!",["T_VARIABLE","$url",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","isRouted",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$access_result",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","AccessResult",208],["T_DOUBLE_COLON","::",208],["T_STRING","allowed",208],"(",")",";",["T_WHITESPACE","\n      ",208],"}",["T_WHITESPACE","\n      ",209],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$access_result",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","accessManager",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","checkNamedRoute",211],"(",["T_VARIABLE","$url",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getRouteName",211],"(",")",",",["T_WHITESPACE"," ",211],["T_VARIABLE","$url",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getRouteParameters",211],"(",")",",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","account",211],",",["T_WHITESPACE"," ",211],["T_STRING","TRUE",211],")",";",["T_WHITESPACE","\n      ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n    ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$access_result",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","cachePerPermissions",214],"(",")",";",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * Generates a unique index and sorts by it.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkTreeElement[] $tree\n   *   The menu link tree to manipulate.\n   *\n   * @return \\Drupal\\Core\\Menu\\MenuLinkTreeElement[]\n   *   The manipulated menu link tree.\n   *\/",217],["T_WHITESPACE","\n  ",225],["T_PUBLIC","public",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","generateIndexAndSort",226],"(",["T_ARRAY","array",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$tree",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$new_tree",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",")",";",["T_WHITESPACE","\n    ",227],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$tree",228],["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$key",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$v",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n      ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$tree",229],"[",["T_VARIABLE","$key",229],"]",["T_OBJECT_OPERATOR","->",229],["T_STRING","subtree",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$tree",230],"[",["T_VARIABLE","$key",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","subtree",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","generateIndexAndSort",230],"(",["T_VARIABLE","$tree",230],"[",["T_VARIABLE","$key",230],"]",["T_OBJECT_OPERATOR","->",230],["T_STRING","subtree",230],")",";",["T_WHITESPACE","\n      ",230],"}",["T_WHITESPACE","\n      ",231],["T_VARIABLE","$instance",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$tree",232],"[",["T_VARIABLE","$key",232],"]",["T_OBJECT_OPERATOR","->",232],["T_STRING","link",232],";",["T_WHITESPACE","\n      ",232],["T_COMMENT","\/\/ The weights are made a uniform 5 digits by adding 50000 as an offset.\n",233],["T_WHITESPACE","      ",234],["T_COMMENT","\/\/ After $this->menuLinkCheckAccess(), $instance->getTitle() has the\n",234],["T_WHITESPACE","      ",235],["T_COMMENT","\/\/ localized or translated title. Adding the plugin id to the end of the\n",235],["T_WHITESPACE","      ",236],["T_COMMENT","\/\/ index insures that it is unique.\n",236],["T_WHITESPACE","      ",237],["T_VARIABLE","$new_tree",237],"[","(",["T_LNUMBER","50000",237],["T_WHITESPACE"," ",237],"+",["T_WHITESPACE"," ",237],["T_VARIABLE","$instance",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getWeight",237],"(",")",")",["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","' '",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$instance",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getTitle",237],"(",")",["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","' '",237],["T_WHITESPACE"," ",237],".",["T_WHITESPACE"," ",237],["T_VARIABLE","$instance",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getPluginId",237],"(",")","]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$tree",237],"[",["T_VARIABLE","$key",237],"]",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n    ",238],["T_STRING","ksort",239],"(",["T_VARIABLE","$new_tree",239],")",";",["T_WHITESPACE","\n    ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_VARIABLE","$new_tree",240],";",["T_WHITESPACE","\n  ",240],"}",["T_WHITESPACE","\n\n  ",241],["T_DOC_COMMENT","\/**\n   * Flattens the tree to a single level.\n   *\n   * @param \\Drupal\\Core\\Menu\\MenuLinkTreeElement[] $tree\n   *   The menu link tree to manipulate.\n   *\n   * @return \\Drupal\\Core\\Menu\\MenuLinkTreeElement[]\n   *   The manipulated menu link tree.\n   *\/",243],["T_WHITESPACE","\n  ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","flatten",252],"(",["T_ARRAY","array",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$tree",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n    ",252],["T_FOREACH","foreach",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$tree",253],["T_WHITESPACE"," ",253],["T_AS","as",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$key",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$element",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n      ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$tree",254],"[",["T_VARIABLE","$key",254],"]",["T_OBJECT_OPERATOR","->",254],["T_STRING","subtree",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$tree",255],["T_WHITESPACE"," ",255],["T_PLUS_EQUAL","+=",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","flatten",255],"(",["T_VARIABLE","$tree",255],"[",["T_VARIABLE","$key",255],"]",["T_OBJECT_OPERATOR","->",255],["T_STRING","subtree",255],")",";",["T_WHITESPACE","\n      ",255],"}",["T_WHITESPACE","\n      ",256],["T_VARIABLE","$tree",257],"[",["T_VARIABLE","$key",257],"]",["T_OBJECT_OPERATOR","->",257],["T_STRING","subtree",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",")",";",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n    ",258],["T_RETURN","return",259],["T_WHITESPACE"," ",259],["T_VARIABLE","$tree",259],";",["T_WHITESPACE","\n  ",259],"}",["T_WHITESPACE","\n\n",260],"}",["T_WHITESPACE","\n",262]]
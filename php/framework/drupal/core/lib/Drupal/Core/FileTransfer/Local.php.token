[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","FileTransfer",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Defines the local connection class for copying files as the httpd user.\n *\/",5],["T_WHITESPACE","\n",7],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","Local",8],["T_WHITESPACE"," ",8],["T_EXTENDS","extends",8],["T_WHITESPACE"," ",8],["T_STRING","FileTransfer",8],["T_WHITESPACE"," ",8],["T_IMPLEMENTS","implements",8],["T_WHITESPACE"," ",8],["T_STRING","ChmodInterface",8],["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\n  ",8],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",10],["T_WHITESPACE","\n  ",12],["T_PUBLIC","public",13],["T_WHITESPACE"," ",13],["T_FUNCTION","function",13],["T_WHITESPACE"," ",13],["T_STRING","connect",13],"(",")",["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n    ",13],["T_COMMENT","\/\/ No-op\n",14],["T_WHITESPACE","  ",15],"}",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","factory",20],"(",["T_VARIABLE","$jail",20],",",["T_WHITESPACE"," ",20],["T_VARIABLE","$settings",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n    ",20],["T_RETURN","return",21],["T_WHITESPACE"," ",21],["T_NEW","new",21],["T_WHITESPACE"," ",21],["T_STRING","Local",21],"(",["T_VARIABLE","$jail",21],")",";",["T_WHITESPACE","\n  ",21],"}",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","copyFileJailed",27],"(",["T_VARIABLE","$source",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$destination",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(","@","!",["T_STRING","copy",28],"(",["T_VARIABLE","$source",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$destination",28],")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n      ",28],["T_THROW","throw",29],["T_WHITESPACE"," ",29],["T_NEW","new",29],["T_WHITESPACE"," ",29],["T_STRING","FileTransferException",29],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot copy %source to %destination.'",29],",",["T_WHITESPACE"," ",29],["T_STRING","NULL",29],",",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'%source'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$source",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'%destination'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$destination",29],")",")",";",["T_WHITESPACE","\n    ",29],"}",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","createDirectoryJailed",36],"(",["T_VARIABLE","$directory",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(","!",["T_STRING","is_dir",37],"(",["T_VARIABLE","$directory",37],")",["T_WHITESPACE"," ",37],["T_BOOLEAN_AND","&&",37],["T_WHITESPACE"," ",37],"@","!",["T_STRING","mkdir",37],"(",["T_VARIABLE","$directory",37],",",["T_WHITESPACE"," ",37],["T_LNUMBER","0777",37],",",["T_WHITESPACE"," ",37],["T_STRING","TRUE",37],")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n      ",37],["T_THROW","throw",38],["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STRING","FileTransferException",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot create directory %directory.'",38],",",["T_WHITESPACE"," ",38],["T_STRING","NULL",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$directory",38],")",")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","removeDirectoryJailed",45],"(",["T_VARIABLE","$directory",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_IF","if",46],["T_WHITESPACE"," ",46],"(","!",["T_STRING","is_dir",46],"(",["T_VARIABLE","$directory",46],")",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n      ",46],["T_COMMENT","\/\/ Programmer error assertion, not something we expect users to see.\n",47],["T_WHITESPACE","      ",48],["T_THROW","throw",48],["T_WHITESPACE"," ",48],["T_NEW","new",48],["T_WHITESPACE"," ",48],["T_STRING","FileTransferException",48],"(",["T_CONSTANT_ENCAPSED_STRING","'removeDirectoryJailed() called with a path (%directory) that is not a directory.'",48],",",["T_WHITESPACE"," ",48],["T_STRING","NULL",48],",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$directory",48],")",")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n    ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","RecursiveIteratorIterator",50],"(",["T_NEW","new",50],["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","RecursiveDirectoryIterator",50],"(",["T_VARIABLE","$directory",50],",",["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","RecursiveDirectoryIterator",50],["T_DOUBLE_COLON","::",50],["T_STRING","SKIP_DOTS",50],")",",",["T_WHITESPACE"," ",50],["T_NS_SEPARATOR","\\",50],["T_STRING","RecursiveIteratorIterator",50],["T_DOUBLE_COLON","::",50],["T_STRING","CHILD_FIRST",50],")",["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$filename",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$file",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$file",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","isDir",51],"(",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_IF","if",52],["T_WHITESPACE"," ",52],"(","@","!",["T_STRING","drupal_rmdir",52],"(",["T_VARIABLE","$filename",52],")",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n          ",52],["T_THROW","throw",53],["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","FileTransferException",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot remove directory %directory.'",53],",",["T_WHITESPACE"," ",53],["T_STRING","NULL",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$filename",53],")",")",";",["T_WHITESPACE","\n        ",53],"}",["T_WHITESPACE","\n      ",54],"}",["T_WHITESPACE","\n      ",55],["T_ELSEIF","elseif",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$file",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","isFile",56],"(",")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n        ",56],["T_IF","if",57],["T_WHITESPACE"," ",57],"(","@","!",["T_STRING","drupal_unlink",57],"(",["T_VARIABLE","$filename",57],")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n          ",57],["T_THROW","throw",58],["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STRING","FileTransferException",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot remove file %file.'",58],",",["T_WHITESPACE"," ",58],["T_STRING","NULL",58],",",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'%file'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$filename",58],")",")",";",["T_WHITESPACE","\n        ",58],"}",["T_WHITESPACE","\n      ",59],"}",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n    ",61],["T_IF","if",62],["T_WHITESPACE"," ",62],"(","@","!",["T_STRING","drupal_rmdir",62],"(",["T_VARIABLE","$directory",62],")",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_THROW","throw",63],["T_WHITESPACE"," ",63],["T_NEW","new",63],["T_WHITESPACE"," ",63],["T_STRING","FileTransferException",63],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot remove directory %directory.'",63],",",["T_WHITESPACE"," ",63],["T_STRING","NULL",63],",",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$directory",63],")",")",";",["T_WHITESPACE","\n    ",63],"}",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","removeFileJailed",70],"(",["T_VARIABLE","$file",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","@","!",["T_STRING","drupal_unlink",71],"(",["T_VARIABLE","$file",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n      ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_STRING","FileTransferException",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot remove file %file.'",72],",",["T_WHITESPACE"," ",72],["T_STRING","NULL",72],",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'%file'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$file",72],")",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n  ",73],"}",["T_WHITESPACE","\n\n  ",74],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",76],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","isDirectory",79],"(",["T_VARIABLE","$path",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_STRING","is_dir",80],"(",["T_VARIABLE","$path",80],")",";",["T_WHITESPACE","\n  ",80],"}",["T_WHITESPACE","\n\n  ",81],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",83],["T_WHITESPACE","\n  ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","isFile",86],"(",["T_VARIABLE","$path",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_STRING","is_file",87],"(",["T_VARIABLE","$path",87],")",";",["T_WHITESPACE","\n  ",87],"}",["T_WHITESPACE","\n\n  ",88],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",90],["T_WHITESPACE","\n  ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","chmodJailed",93],"(",["T_VARIABLE","$path",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$mode",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$recursive",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n    ",93],["T_IF","if",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$recursive",94],["T_WHITESPACE"," ",94],["T_BOOLEAN_AND","&&",94],["T_WHITESPACE"," ",94],["T_STRING","is_dir",94],"(",["T_VARIABLE","$path",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_FOREACH","foreach",95],["T_WHITESPACE"," ",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","RecursiveIteratorIterator",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","RecursiveDirectoryIterator",95],"(",["T_VARIABLE","$path",95],",",["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","RecursiveDirectoryIterator",95],["T_DOUBLE_COLON","::",95],["T_STRING","SKIP_DOTS",95],")",",",["T_WHITESPACE"," ",95],["T_NS_SEPARATOR","\\",95],["T_STRING","RecursiveIteratorIterator",95],["T_DOUBLE_COLON","::",95],["T_STRING","SELF_FIRST",95],")",["T_WHITESPACE"," ",95],["T_AS","as",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$filename",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$file",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n        ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(","@","!",["T_STRING","chmod",96],"(",["T_VARIABLE","$filename",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$mode",96],")",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n          ",96],["T_THROW","throw",97],["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","FileTransferException",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot chmod %path.'",97],",",["T_WHITESPACE"," ",97],["T_STRING","NULL",97],",",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_CONSTANT_ENCAPSED_STRING","'%path'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$filename",97],")",")",";",["T_WHITESPACE","\n        ",97],"}",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n    ",100],["T_ELSEIF","elseif",101],["T_WHITESPACE"," ",101],"(","@","!",["T_STRING","chmod",101],"(",["T_VARIABLE","$path",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$mode",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n      ",101],["T_THROW","throw",102],["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","FileTransferException",102],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot chmod %path.'",102],",",["T_WHITESPACE"," ",102],["T_STRING","NULL",102],",",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'%path'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$path",102],")",")",";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n",104],"}",["T_WHITESPACE","\n",106]]
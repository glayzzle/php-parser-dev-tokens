[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Asset",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Groups JavaScript assets.\n *\/",5],["T_WHITESPACE","\n",7],["T_CLASS","class",8],["T_WHITESPACE"," ",8],["T_STRING","JsCollectionGrouper",8],["T_WHITESPACE"," ",8],["T_IMPLEMENTS","implements",8],["T_WHITESPACE"," ",8],["T_STRING","AssetCollectionGrouperInterface",8],["T_WHITESPACE"," ",8],"{",["T_WHITESPACE","\n\n  ",8],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * Puts multiple items into the same group if they are groupable and if they\n   * are for the same browsers. Items of the 'file' type are groupable if their\n   * 'preprocess' flag is TRUE. Items of the 'external' type are not groupable.\n   *\n   * Also ensures that the process of grouping items does not change their\n   * relative order. This requirement may result in multiple groups for the same\n   * type and browsers, if needed to accommodate other items in between.\n   *\/",10],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","group",21],"(",["T_ARRAY","array",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$js_assets",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$groups",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",")",";",["T_WHITESPACE","\n    ",22],["T_COMMENT","\/\/ If a group can contain multiple items, we track the information that must\n",23],["T_WHITESPACE","    ",24],["T_COMMENT","\/\/ be the same for each item in the group, so that when we iterate the next\n",24],["T_WHITESPACE","    ",25],["T_COMMENT","\/\/ item, we can determine if it can be put into the current group, or if a\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ new group needs to be made for it.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$current_group_keys",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","NULL",27],";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$index",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],"-",["T_LNUMBER","1",28],";",["T_WHITESPACE","\n    ",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$js_assets",29],["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$item",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n      ",29],["T_COMMENT","\/\/ The browsers for which the JavaScript item needs to be loaded is part\n",30],["T_WHITESPACE","      ",31],["T_COMMENT","\/\/ of the information that determines when a new group is needed, but the\n",31],["T_WHITESPACE","      ",32],["T_COMMENT","\/\/ order of keys in the array doesn't matter, and we don't want a new\n",32],["T_WHITESPACE","      ",33],["T_COMMENT","\/\/ group if all that's different is that order.\n",33],["T_WHITESPACE","      ",34],["T_STRING","ksort",34],"(",["T_VARIABLE","$item",34],"[",["T_CONSTANT_ENCAPSED_STRING","'browsers'",34],"]",")",";",["T_WHITESPACE","\n\n      ",34],["T_SWITCH","switch",36],["T_WHITESPACE"," ",36],"(",["T_VARIABLE","$item",36],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",36],"]",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n        ",36],["T_CASE","case",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'file'",37],":",["T_WHITESPACE","\n          ",37],["T_COMMENT","\/\/ Group file items if their 'preprocess' flag is TRUE.\n",38],["T_WHITESPACE","          ",39],["T_COMMENT","\/\/ Help ensure maximum reuse of aggregate files by only grouping\n",39],["T_WHITESPACE","          ",40],["T_COMMENT","\/\/ together items that share the same 'group' value.\n",40],["T_WHITESPACE","          ",41],["T_VARIABLE","$group_keys",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$item",41],"[",["T_CONSTANT_ENCAPSED_STRING","'preprocess'",41],"]",["T_WHITESPACE"," ",41],"?",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_VARIABLE","$item",41],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$item",41],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$item",41],"[",["T_CONSTANT_ENCAPSED_STRING","'browsers'",41],"]",")",["T_WHITESPACE"," ",41],":",["T_WHITESPACE"," ",41],["T_STRING","FALSE",41],";",["T_WHITESPACE","\n          ",41],["T_BREAK","break",42],";",["T_WHITESPACE","\n\n        ",42],["T_CASE","case",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'external'",44],":",["T_WHITESPACE","\n          ",44],["T_COMMENT","\/\/ Do not group external items.\n",45],["T_WHITESPACE","          ",46],["T_VARIABLE","$group_keys",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","FALSE",46],";",["T_WHITESPACE","\n          ",46],["T_BREAK","break",47],";",["T_WHITESPACE","\n      ",47],"}",["T_WHITESPACE","\n\n      ",48],["T_COMMENT","\/\/ If the group keys don't match the most recent group we're working with,\n",50],["T_WHITESPACE","      ",51],["T_COMMENT","\/\/ then a new group must be made.\n",51],["T_WHITESPACE","      ",52],["T_IF","if",52],["T_WHITESPACE"," ",52],"(",["T_VARIABLE","$group_keys",52],["T_WHITESPACE"," ",52],["T_IS_NOT_IDENTICAL","!==",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$current_group_keys",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n        ",52],["T_VARIABLE","$index",53],["T_INC","++",53],";",["T_WHITESPACE","\n        ",53],["T_COMMENT","\/\/ Initialize the new group with the same properties as the first item\n",54],["T_WHITESPACE","        ",55],["T_COMMENT","\/\/ being placed into it. The item's 'data' and 'weight' properties are\n",55],["T_WHITESPACE","        ",56],["T_COMMENT","\/\/ unique to the item and should not be carried over to the group.\n",56],["T_WHITESPACE","        ",57],["T_VARIABLE","$groups",57],"[",["T_VARIABLE","$index",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$item",57],";",["T_WHITESPACE","\n        ",57],["T_UNSET","unset",58],"(",["T_VARIABLE","$groups",58],"[",["T_VARIABLE","$index",58],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",58],"]",",",["T_WHITESPACE"," ",58],["T_VARIABLE","$groups",58],"[",["T_VARIABLE","$index",58],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",58],"]",")",";",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$groups",59],"[",["T_VARIABLE","$index",59],"]","[",["T_CONSTANT_ENCAPSED_STRING","'items'",59],"]",["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$current_group_keys",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$group_keys",60],["T_WHITESPACE"," ",60],"?",["T_WHITESPACE"," ",60],["T_VARIABLE","$group_keys",60],["T_WHITESPACE"," ",60],":",["T_WHITESPACE"," ",60],["T_STRING","NULL",60],";",["T_WHITESPACE","\n      ",60],"}",["T_WHITESPACE","\n\n      ",61],["T_COMMENT","\/\/ Add the item to the current group.\n",63],["T_WHITESPACE","      ",64],["T_VARIABLE","$groups",64],"[",["T_VARIABLE","$index",64],"]","[",["T_CONSTANT_ENCAPSED_STRING","'items'",64],"]","[","]",["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$item",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$groups",67],";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n",68],"}",["T_WHITESPACE","\n",70]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Query",5],["T_NS_SEPARATOR","\\",5],["T_STRING","QueryInterface",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * A base entity storage class.\n *\/",7],["T_WHITESPACE","\n",9],["T_ABSTRACT","abstract",10],["T_WHITESPACE"," ",10],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","EntityStorageBase",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","EntityHandlerBase",10],["T_WHITESPACE"," ",10],["T_IMPLEMENTS","implements",10],["T_WHITESPACE"," ",10],["T_STRING","EntityStorageInterface",10],",",["T_WHITESPACE"," ",10],["T_STRING","EntityHandlerInterface",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Static cache of entities, keyed by entity ID.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$entities",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Entity type ID for this storage.\n   *\n   * @var string\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$entityTypeId",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Information about the entity type.\n   *\n   * The following code returns the same object:\n   * @code\n   * \\Drupal::entityManager()->getDefinition($this->entityTypeId)\n   * @endcode\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeInterface\n   *\/",26],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$entityType",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * Name of the entity's ID field in the entity database table.\n   *\n   * @var string\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$idKey",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Name of entity's UUID database table field, if it supports UUIDs.\n   *\n   * Has the value FALSE if this entity does not use UUIDs.\n   *\n   * @var string\n   *\/",45],["T_WHITESPACE","\n  ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$uuidKey",52],";",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * The name of the entity langcode property.\n   *\n   * @var string\n   *\/",54],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$langcodeKey",59],";",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * The UUID service.\n   *\n   * @var \\Drupal\\Component\\Uuid\\UuidInterface\n   *\/",61],["T_WHITESPACE","\n  ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$uuidService",66],";",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Name of the entity class.\n   *\n   * @var string\n   *\/",68],["T_WHITESPACE","\n  ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$entityClass",73],";",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Constructs an EntityStorageBase instance.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type definition.\n   *\/",75],["T_WHITESPACE","\n  ",80],["T_PUBLIC","public",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","__construct",81],"(",["T_STRING","EntityTypeInterface",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$entity_type",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","entityTypeId",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_type",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","entityType",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$entity_type",83],";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","idKey",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","entityType",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getKey",84],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","uuidKey",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","entityType",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getKey",85],"(",["T_CONSTANT_ENCAPSED_STRING","'uuid'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","langcodeKey",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","entityType",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getKey",86],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","entityClass",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","entityType",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getClass",87],"(",")",";",["T_WHITESPACE","\n  ",87],"}",["T_WHITESPACE","\n\n  ",88],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",90],["T_WHITESPACE","\n  ",92],["T_PUBLIC","public",93],["T_WHITESPACE"," ",93],["T_FUNCTION","function",93],["T_WHITESPACE"," ",93],["T_STRING","getEntityTypeId",93],"(",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n    ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","entityTypeId",94],";",["T_WHITESPACE","\n  ",94],"}",["T_WHITESPACE","\n\n  ",95],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",97],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","getEntityType",100],"(",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","entityType",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","loadUnchanged",107],"(",["T_VARIABLE","$id",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","resetCache",108],"(",["T_ARRAY","array",108],"(",["T_VARIABLE","$id",108],")",")",";",["T_WHITESPACE","\n    ",108],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","load",109],"(",["T_VARIABLE","$id",109],")",";",["T_WHITESPACE","\n  ",109],"}",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",112],["T_WHITESPACE","\n  ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","resetCache",115],"(",["T_ARRAY","array",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$ids",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","NULL",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_IF","if",116],["T_WHITESPACE"," ",116],"(",["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","entityType",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","isStaticallyCacheable",116],"(",")",["T_WHITESPACE"," ",116],["T_BOOLEAN_AND","&&",116],["T_WHITESPACE"," ",116],["T_ISSET","isset",116],"(",["T_VARIABLE","$ids",116],")",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n      ",116],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$ids",117],["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$id",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n        ",117],["T_UNSET","unset",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","entities",118],"[",["T_VARIABLE","$id",118],"]",")",";",["T_WHITESPACE","\n      ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n    ",120],["T_ELSE","else",121],["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","entities",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_ARRAY","array",122],"(",")",";",["T_WHITESPACE","\n    ",122],"}",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * Gets entities from the static cache.\n   *\n   * @param array $ids\n   *   If not empty, return entities that match these IDs.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface[]\n   *   Array of entities from the entity cache.\n   *\/",126],["T_WHITESPACE","\n  ",134],["T_PROTECTED","protected",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","getFromStaticCache",135],"(",["T_ARRAY","array",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$ids",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$entities",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",")",";",["T_WHITESPACE","\n    ",136],["T_COMMENT","\/\/ Load any available entities from the internal cache.\n",137],["T_WHITESPACE","    ",138],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","entityType",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","isStaticallyCacheable",138],"(",")",["T_WHITESPACE"," ",138],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],"!",["T_EMPTY","empty",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","entities",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$entities",139],["T_WHITESPACE"," ",139],["T_PLUS_EQUAL","+=",139],["T_WHITESPACE"," ",139],["T_STRING","array_intersect_key",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","entities",139],",",["T_WHITESPACE"," ",139],["T_STRING","array_flip",139],"(",["T_VARIABLE","$ids",139],")",")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n    ",140],["T_RETURN","return",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$entities",141],";",["T_WHITESPACE","\n  ",141],"}",["T_WHITESPACE","\n\n  ",142],["T_DOC_COMMENT","\/**\n   * Stores entities in the static entity cache.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface[] $entities\n   *   Entities to store in the cache.\n   *\/",144],["T_WHITESPACE","\n  ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","setStaticCache",150],"(",["T_ARRAY","array",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$entities",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n    ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","entityType",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","isStaticallyCacheable",151],"(",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n      ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","entities",152],["T_WHITESPACE"," ",152],["T_PLUS_EQUAL","+=",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$entities",152],";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n  ",153],"}",["T_WHITESPACE","\n\n  ",154],["T_DOC_COMMENT","\/**\n   * Invokes a hook on behalf of the entity.\n   *\n   * @param string $hook\n   *   One of 'presave', 'insert', 'update', 'predelete', 'delete', or\n   *   'revision_delete'.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity object.\n   *\/",156],["T_WHITESPACE","\n  ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","invokeHook",165],"(",["T_VARIABLE","$hook",165],",",["T_WHITESPACE"," ",165],["T_STRING","EntityInterface",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$entity",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n    ",165],["T_COMMENT","\/\/ Invoke the hook.\n",166],["T_WHITESPACE","    ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","moduleHandler",167],"(",")",["T_OBJECT_OPERATOR","->",167],["T_STRING","invokeAll",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","entityTypeId",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'_'",167],["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_VARIABLE","$hook",167],",",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_VARIABLE","$entity",167],")",")",";",["T_WHITESPACE","\n    ",167],["T_COMMENT","\/\/ Invoke the respective entity-level hook.\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","moduleHandler",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","invokeAll",169],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_'",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_VARIABLE","$hook",169],",",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",["T_VARIABLE","$entity",169],")",")",";",["T_WHITESPACE","\n  ",169],"}",["T_WHITESPACE","\n\n  ",170],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",172],["T_WHITESPACE","\n  ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","create",175],"(",["T_ARRAY","array",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$values",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$entity_class",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","entityClass",176],";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$entity_class",177],["T_DOUBLE_COLON","::",177],["T_STRING","preCreate",177],"(",["T_VARIABLE","$this",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$values",177],")",";",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Assign a new UUID if there is none yet.\n",179],["T_WHITESPACE","    ",180],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","uuidKey",180],["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","uuidService",180],["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],"!",["T_ISSET","isset",180],"(",["T_VARIABLE","$values",180],"[",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","uuidKey",180],"]",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$values",181],"[",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","uuidKey",181],"]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","uuidService",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","generate",181],"(",")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n\n    ",182],["T_VARIABLE","$entity",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","doCreate",184],"(",["T_VARIABLE","$values",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$entity",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","enforceIsNew",185],"(",")",";",["T_WHITESPACE","\n\n    ",185],["T_VARIABLE","$entity",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","postCreate",187],"(",["T_VARIABLE","$this",187],")",";",["T_WHITESPACE","\n\n    ",187],["T_COMMENT","\/\/ Modules might need to add or change the data initially held by the new\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ entity object, for instance to fill-in default values.\n",190],["T_WHITESPACE","    ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","invokeHook",191],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$entity",191],")",";",["T_WHITESPACE","\n\n    ",191],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$entity",193],";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n  ",194],["T_DOC_COMMENT","\/**\n   * Performs storage-specific creation of entities.\n   *\n   * @param array $values\n   *   An array of values to set, keyed by property name.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface\n   *\/",196],["T_WHITESPACE","\n  ",203],["T_PROTECTED","protected",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","doCreate",204],"(",["T_ARRAY","array",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$values",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n    ",204],["T_RETURN","return",205],["T_WHITESPACE"," ",205],["T_NEW","new",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityClass",205],"(",["T_VARIABLE","$values",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","entityTypeId",205],")",";",["T_WHITESPACE","\n  ",205],"}",["T_WHITESPACE","\n\n  ",206],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",208],["T_WHITESPACE","\n  ",210],["T_PUBLIC","public",211],["T_WHITESPACE"," ",211],["T_FUNCTION","function",211],["T_WHITESPACE"," ",211],["T_STRING","load",211],"(",["T_VARIABLE","$id",211],")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$entities",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","loadMultiple",212],"(",["T_ARRAY","array",212],"(",["T_VARIABLE","$id",212],")",")",";",["T_WHITESPACE","\n    ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_ISSET","isset",213],"(",["T_VARIABLE","$entities",213],"[",["T_VARIABLE","$id",213],"]",")",["T_WHITESPACE"," ",213],"?",["T_WHITESPACE"," ",213],["T_VARIABLE","$entities",213],"[",["T_VARIABLE","$id",213],"]",["T_WHITESPACE"," ",213],":",["T_WHITESPACE"," ",213],["T_STRING","NULL",213],";",["T_WHITESPACE","\n  ",213],"}",["T_WHITESPACE","\n\n  ",214],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",216],["T_WHITESPACE","\n  ",218],["T_PUBLIC","public",219],["T_WHITESPACE"," ",219],["T_FUNCTION","function",219],["T_WHITESPACE"," ",219],["T_STRING","loadMultiple",219],"(",["T_ARRAY","array",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$ids",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_STRING","NULL",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$entities",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",";",["T_WHITESPACE","\n\n    ",220],["T_COMMENT","\/\/ Create a new variable which is either a prepared version of the $ids\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ array for later comparison with the entity cache, or FALSE if no $ids\n",223],["T_WHITESPACE","    ",224],["T_COMMENT","\/\/ were passed. The $ids array is reduced as items are loaded from cache,\n",224],["T_WHITESPACE","    ",225],["T_COMMENT","\/\/ and we need to know if it's empty for this reason to avoid querying the\n",225],["T_WHITESPACE","    ",226],["T_COMMENT","\/\/ database when all requested entities are loaded from cache.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$passed_ids",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],"!",["T_EMPTY","empty",227],"(",["T_VARIABLE","$ids",227],")",["T_WHITESPACE"," ",227],"?",["T_WHITESPACE"," ",227],["T_STRING","array_flip",227],"(",["T_VARIABLE","$ids",227],")",["T_WHITESPACE"," ",227],":",["T_WHITESPACE"," ",227],["T_STRING","FALSE",227],";",["T_WHITESPACE","\n    ",227],["T_COMMENT","\/\/ Try to load entities from the static cache, if the entity type supports\n",228],["T_WHITESPACE","    ",229],["T_COMMENT","\/\/ static caching.\n",229],["T_WHITESPACE","    ",230],["T_IF","if",230],["T_WHITESPACE"," ",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","entityType",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","isStaticallyCacheable",230],"(",")",["T_WHITESPACE"," ",230],["T_BOOLEAN_AND","&&",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$ids",230],")",["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n      ",230],["T_VARIABLE","$entities",231],["T_WHITESPACE"," ",231],["T_PLUS_EQUAL","+=",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getFromStaticCache",231],"(",["T_VARIABLE","$ids",231],")",";",["T_WHITESPACE","\n      ",231],["T_COMMENT","\/\/ If any entities were loaded, remove them from the ids still to load.\n",232],["T_WHITESPACE","      ",233],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$passed_ids",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n        ",233],["T_VARIABLE","$ids",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","array_keys",234],"(",["T_STRING","array_diff_key",234],"(",["T_VARIABLE","$passed_ids",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$entities",234],")",")",";",["T_WHITESPACE","\n      ",234],"}",["T_WHITESPACE","\n    ",235],"}",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Load any remaining entities from the database. This is the case if $ids\n",238],["T_WHITESPACE","    ",239],["T_COMMENT","\/\/ is set to NULL (so we load all entities) or if there are any ids left to\n",239],["T_WHITESPACE","    ",240],["T_COMMENT","\/\/ load.\n",240],["T_WHITESPACE","    ",241],["T_IF","if",241],["T_WHITESPACE"," ",241],"(",["T_VARIABLE","$ids",241],["T_WHITESPACE"," ",241],["T_IS_IDENTICAL","===",241],["T_WHITESPACE"," ",241],["T_STRING","NULL",241],["T_WHITESPACE"," ",241],["T_BOOLEAN_OR","||",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$ids",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n      ",241],["T_VARIABLE","$queried_entities",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","doLoadMultiple",242],"(",["T_VARIABLE","$ids",242],")",";",["T_WHITESPACE","\n    ",242],"}",["T_WHITESPACE","\n\n    ",243],["T_COMMENT","\/\/ Pass all entities loaded from the database through $this->postLoad(),\n",245],["T_WHITESPACE","    ",246],["T_COMMENT","\/\/ which attaches fields (if supported by the entity type) and calls the\n",246],["T_WHITESPACE","    ",247],["T_COMMENT","\/\/ entity type specific load callback, for example hook_node_load().\n",247],["T_WHITESPACE","    ",248],["T_IF","if",248],["T_WHITESPACE"," ",248],"(","!",["T_EMPTY","empty",248],"(",["T_VARIABLE","$queried_entities",248],")",")",["T_WHITESPACE"," ",248],"{",["T_WHITESPACE","\n      ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","postLoad",249],"(",["T_VARIABLE","$queried_entities",249],")",";",["T_WHITESPACE","\n      ",249],["T_VARIABLE","$entities",250],["T_WHITESPACE"," ",250],["T_PLUS_EQUAL","+=",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$queried_entities",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","entityType",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","isStaticallyCacheable",253],"(",")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n      ",253],["T_COMMENT","\/\/ Add entities to the cache.\n",254],["T_WHITESPACE","      ",255],["T_IF","if",255],["T_WHITESPACE"," ",255],"(","!",["T_EMPTY","empty",255],"(",["T_VARIABLE","$queried_entities",255],")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setStaticCache",256],"(",["T_VARIABLE","$queried_entities",256],")",";",["T_WHITESPACE","\n      ",256],"}",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_COMMENT","\/\/ Ensure that the returned array is ordered the same as the original\n",260],["T_WHITESPACE","    ",261],["T_COMMENT","\/\/ $ids array if this was passed in and remove any invalid ids.\n",261],["T_WHITESPACE","    ",262],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_VARIABLE","$passed_ids",262],")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n      ",262],["T_COMMENT","\/\/ Remove any invalid ids from the array.\n",263],["T_WHITESPACE","      ",264],["T_VARIABLE","$passed_ids",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","array_intersect_key",264],"(",["T_VARIABLE","$passed_ids",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$entities",264],")",";",["T_WHITESPACE","\n      ",264],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$entities",265],["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$entity",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$passed_ids",266],"[",["T_VARIABLE","$entity",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","id",266],"(",")","]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$entity",266],";",["T_WHITESPACE","\n      ",266],"}",["T_WHITESPACE","\n      ",267],["T_VARIABLE","$entities",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_VARIABLE","$passed_ids",268],";",["T_WHITESPACE","\n    ",268],"}",["T_WHITESPACE","\n\n    ",269],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$entities",271],";",["T_WHITESPACE","\n  ",271],"}",["T_WHITESPACE","\n\n  ",272],["T_DOC_COMMENT","\/**\n   * Performs storage-specific loading of entities.\n   *\n   * Override this method to add custom functionality directly after loading.\n   * This is always called, while self::postLoad() is only called when there are\n   * actual results.\n   *\n   * @param array|null $ids\n   *   (optional) An array of entity IDs, or NULL to load all entities.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface[]\n   *   Associative array of entities, keyed on the entity ID.\n   *\/",274],["T_WHITESPACE","\n  ",286],["T_ABSTRACT","abstract",287],["T_WHITESPACE"," ",287],["T_PROTECTED","protected",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","doLoadMultiple",287],"(",["T_ARRAY","array",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$ids",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","NULL",287],")",";",["T_WHITESPACE","\n\n  ",287],["T_DOC_COMMENT","\/**\n   * Attaches data to entities upon loading.\n   *\n   * @param array $entities\n   *   Associative array of query results, keyed on the entity ID.\n   *\/",289],["T_WHITESPACE","\n  ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","postLoad",295],"(",["T_ARRAY","array",295],["T_WHITESPACE"," ",295],"&",["T_VARIABLE","$entities",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$entity_class",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","entityClass",296],";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$entity_class",297],["T_DOUBLE_COLON","::",297],["T_STRING","postLoad",297],"(",["T_VARIABLE","$this",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$entities",297],")",";",["T_WHITESPACE","\n    ",297],["T_COMMENT","\/\/ Call hook_entity_load().\n",298],["T_WHITESPACE","    ",299],["T_FOREACH","foreach",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","moduleHandler",299],"(",")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getImplementations",299],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_load'",299],")",["T_WHITESPACE"," ",299],["T_AS","as",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$module",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$function",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_VARIABLE","$module",300],["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'_entity_load'",300],";",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$function",301],"(",["T_VARIABLE","$entities",301],",",["T_WHITESPACE"," ",301],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","entityTypeId",301],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n    ",302],["T_COMMENT","\/\/ Call hook_TYPE_load().\n",303],["T_WHITESPACE","    ",304],["T_FOREACH","foreach",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","moduleHandler",304],"(",")",["T_OBJECT_OPERATOR","->",304],["T_STRING","getImplementations",304],"(",["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","entityTypeId",304],["T_WHITESPACE"," ",304],".",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'_load'",304],")",["T_WHITESPACE"," ",304],["T_AS","as",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$module",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n      ",304],["T_VARIABLE","$function",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$module",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'_'",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","entityTypeId",305],["T_WHITESPACE"," ",305],".",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'_load'",305],";",["T_WHITESPACE","\n      ",305],["T_VARIABLE","$function",306],"(",["T_VARIABLE","$entities",306],")",";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n  ",308],["T_DOC_COMMENT","\/**\n   * Maps from storage records to entity objects.\n   *\n   * @param array $records\n   *   Associative array of query results, keyed on the entity ID.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface[]\n   *   An array of entity objects implementing the EntityInterface.\n   *\/",310],["T_WHITESPACE","\n  ",318],["T_PROTECTED","protected",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","mapFromStorageRecords",319],"(",["T_ARRAY","array",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$records",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$entities",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_ARRAY","array",320],"(",")",";",["T_WHITESPACE","\n    ",320],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$records",321],["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$record",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n      ",321],["T_VARIABLE","$entity",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_NEW","new",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","entityClass",322],"(",["T_VARIABLE","$record",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","entityTypeId",322],")",";",["T_WHITESPACE","\n      ",322],["T_VARIABLE","$entities",323],"[",["T_VARIABLE","$entity",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","id",323],"(",")","]",["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$entity",323],";",["T_WHITESPACE","\n    ",323],"}",["T_WHITESPACE","\n    ",324],["T_RETURN","return",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$entities",325],";",["T_WHITESPACE","\n  ",325],"}",["T_WHITESPACE","\n\n  ",326],["T_DOC_COMMENT","\/**\n   * Determines if this entity already exists in storage.\n   *\n   * @param int|string $id\n   *   The original entity ID.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity being saved.\n   *\n   * @return bool\n   *\/",328],["T_WHITESPACE","\n  ",337],["T_ABSTRACT","abstract",338],["T_WHITESPACE"," ",338],["T_PROTECTED","protected",338],["T_WHITESPACE"," ",338],["T_FUNCTION","function",338],["T_WHITESPACE"," ",338],["T_STRING","has",338],"(",["T_VARIABLE","$id",338],",",["T_WHITESPACE"," ",338],["T_STRING","EntityInterface",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$entity",338],")",";",["T_WHITESPACE","\n\n  ",338],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",340],["T_WHITESPACE","\n  ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","delete",343],"(",["T_ARRAY","array",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$entities",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n    ",343],["T_IF","if",344],["T_WHITESPACE"," ",344],"(","!",["T_VARIABLE","$entities",344],")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n      ",344],["T_COMMENT","\/\/ If no entities were passed, do nothing.\n",345],["T_WHITESPACE","      ",346],["T_RETURN","return",346],";",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n\n    ",347],["T_COMMENT","\/\/ Ensure that the entities are keyed by ID.\n",349],["T_WHITESPACE","    ",350],["T_VARIABLE","$keyed_entities",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],"[","]",";",["T_WHITESPACE","\n    ",350],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$entities",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$entity",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n      ",351],["T_VARIABLE","$keyed_entities",352],"[",["T_VARIABLE","$entity",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","id",352],"(",")","]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$entity",352],";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n\n    ",353],["T_COMMENT","\/\/ Allow code to run before deleting.\n",355],["T_WHITESPACE","    ",356],["T_VARIABLE","$entity_class",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","entityClass",356],";",["T_WHITESPACE","\n    ",356],["T_VARIABLE","$entity_class",357],["T_DOUBLE_COLON","::",357],["T_STRING","preDelete",357],"(",["T_VARIABLE","$this",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$keyed_entities",357],")",";",["T_WHITESPACE","\n    ",357],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$keyed_entities",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$entity",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n      ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","invokeHook",359],"(",["T_CONSTANT_ENCAPSED_STRING","'predelete'",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$entity",359],")",";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n\n    ",360],["T_COMMENT","\/\/ Perform the delete and reset the static cache for the deleted entities.\n",362],["T_WHITESPACE","    ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","doDelete",363],"(",["T_VARIABLE","$keyed_entities",363],")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","resetCache",364],"(",["T_STRING","array_keys",364],"(",["T_VARIABLE","$keyed_entities",364],")",")",";",["T_WHITESPACE","\n\n    ",364],["T_COMMENT","\/\/ Allow code to run after deleting.\n",366],["T_WHITESPACE","    ",367],["T_VARIABLE","$entity_class",367],["T_DOUBLE_COLON","::",367],["T_STRING","postDelete",367],"(",["T_VARIABLE","$this",367],",",["T_WHITESPACE"," ",367],["T_VARIABLE","$keyed_entities",367],")",";",["T_WHITESPACE","\n    ",367],["T_FOREACH","foreach",368],["T_WHITESPACE"," ",368],"(",["T_VARIABLE","$keyed_entities",368],["T_WHITESPACE"," ",368],["T_AS","as",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$entity",368],")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n      ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","invokeHook",369],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$entity",369],")",";",["T_WHITESPACE","\n    ",369],"}",["T_WHITESPACE","\n  ",370],"}",["T_WHITESPACE","\n\n  ",371],["T_DOC_COMMENT","\/**\n   * Performs storage-specific entity deletion.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface[] $entities\n   *   An array of entity objects to delete.\n   *\/",373],["T_WHITESPACE","\n  ",378],["T_ABSTRACT","abstract",379],["T_WHITESPACE"," ",379],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","doDelete",379],"(",["T_VARIABLE","$entities",379],")",";",["T_WHITESPACE","\n\n  ",379],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",381],["T_WHITESPACE","\n  ",383],["T_PUBLIC","public",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","save",384],"(",["T_STRING","EntityInterface",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$entity",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n    ",384],["T_COMMENT","\/\/ Track if this entity is new.\n",385],["T_WHITESPACE","    ",386],["T_VARIABLE","$is_new",386],["T_WHITESPACE"," ",386],"=",["T_WHITESPACE"," ",386],["T_VARIABLE","$entity",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","isNew",386],"(",")",";",["T_WHITESPACE","\n\n    ",386],["T_COMMENT","\/\/ Execute presave logic and invoke the related hooks.\n",388],["T_WHITESPACE","    ",389],["T_VARIABLE","$id",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","doPreSave",389],"(",["T_VARIABLE","$entity",389],")",";",["T_WHITESPACE","\n\n    ",389],["T_COMMENT","\/\/ Perform the save and reset the static cache for the changed entity.\n",391],["T_WHITESPACE","    ",392],["T_VARIABLE","$return",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","doSave",392],"(",["T_VARIABLE","$id",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$entity",392],")",";",["T_WHITESPACE","\n\n    ",392],["T_COMMENT","\/\/ Execute post save logic and invoke the related hooks.\n",394],["T_WHITESPACE","    ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","doPostSave",395],"(",["T_VARIABLE","$entity",395],",",["T_WHITESPACE"," ",395],"!",["T_VARIABLE","$is_new",395],")",";",["T_WHITESPACE","\n\n    ",395],["T_RETURN","return",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$return",397],";",["T_WHITESPACE","\n  ",397],"}",["T_WHITESPACE","\n\n  ",398],["T_DOC_COMMENT","\/**\n   * Performs presave entity processing.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The saved entity.\n   *\n   * @return int|string\n   *   The processed entity identifier.\n   *\n   * @throws \\Drupal\\Core\\Entity\\EntityStorageException\n   *   If the entity identifier is invalid.\n   *\/",400],["T_WHITESPACE","\n  ",411],["T_PROTECTED","protected",412],["T_WHITESPACE"," ",412],["T_FUNCTION","function",412],["T_WHITESPACE"," ",412],["T_STRING","doPreSave",412],"(",["T_STRING","EntityInterface",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$entity",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$id",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_VARIABLE","$entity",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","id",413],"(",")",";",["T_WHITESPACE","\n\n    ",413],["T_COMMENT","\/\/ Track the original ID.\n",415],["T_WHITESPACE","    ",416],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$entity",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getOriginalId",416],"(",")",["T_WHITESPACE"," ",416],["T_IS_NOT_IDENTICAL","!==",416],["T_WHITESPACE"," ",416],["T_STRING","NULL",416],")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n      ",416],["T_VARIABLE","$id",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$entity",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","getOriginalId",417],"(",")",";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n\n    ",418],["T_COMMENT","\/\/ Track if this entity exists already.\n",420],["T_WHITESPACE","    ",421],["T_VARIABLE","$id_exists",421],["T_WHITESPACE"," ",421],"=",["T_WHITESPACE"," ",421],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","has",421],"(",["T_VARIABLE","$id",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$entity",421],")",";",["T_WHITESPACE","\n\n    ",421],["T_COMMENT","\/\/ A new entity should not already exist.\n",423],["T_WHITESPACE","    ",424],["T_IF","if",424],["T_WHITESPACE"," ",424],"(",["T_VARIABLE","$id_exists",424],["T_WHITESPACE"," ",424],["T_BOOLEAN_AND","&&",424],["T_WHITESPACE"," ",424],["T_VARIABLE","$entity",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","isNew",424],"(",")",")",["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n      ",424],["T_THROW","throw",425],["T_WHITESPACE"," ",425],["T_NEW","new",425],["T_WHITESPACE"," ",425],["T_STRING","EntityStorageException",425],"(","\"",["T_ENCAPSED_AND_WHITESPACE","'",425],["T_CURLY_OPEN","{",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","entityTypeId",425],"}",["T_ENCAPSED_AND_WHITESPACE","' entity with ID '",425],["T_VARIABLE","$id",425],["T_ENCAPSED_AND_WHITESPACE","' already exists.",425],"\"",")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_COMMENT","\/\/ Load the original entity, if any.\n",428],["T_WHITESPACE","    ",429],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$id_exists",429],["T_WHITESPACE"," ",429],["T_BOOLEAN_AND","&&",429],["T_WHITESPACE"," ",429],"!",["T_ISSET","isset",429],"(",["T_VARIABLE","$entity",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","original",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n      ",429],["T_VARIABLE","$entity",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","original",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","loadUnchanged",430],"(",["T_VARIABLE","$id",430],")",";",["T_WHITESPACE","\n    ",430],"}",["T_WHITESPACE","\n\n    ",431],["T_COMMENT","\/\/ Allow code to run before saving.\n",433],["T_WHITESPACE","    ",434],["T_VARIABLE","$entity",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","preSave",434],"(",["T_VARIABLE","$this",434],")",";",["T_WHITESPACE","\n    ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","invokeHook",435],"(",["T_CONSTANT_ENCAPSED_STRING","'presave'",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$entity",435],")",";",["T_WHITESPACE","\n\n    ",435],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$id",437],";",["T_WHITESPACE","\n  ",437],"}",["T_WHITESPACE","\n\n  ",438],["T_DOC_COMMENT","\/**\n   * Performs storage-specific saving of the entity.\n   *\n   * @param int|string $id\n   *   The original entity ID.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to save.\n   *\n   * @return bool|int\n   *   If the record insert or update failed, returns FALSE. If it succeeded,\n   *   returns SAVED_NEW or SAVED_UPDATED, depending on the operation performed.\n   *\/",440],["T_WHITESPACE","\n  ",451],["T_ABSTRACT","abstract",452],["T_WHITESPACE"," ",452],["T_PROTECTED","protected",452],["T_WHITESPACE"," ",452],["T_FUNCTION","function",452],["T_WHITESPACE"," ",452],["T_STRING","doSave",452],"(",["T_VARIABLE","$id",452],",",["T_WHITESPACE"," ",452],["T_STRING","EntityInterface",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$entity",452],")",";",["T_WHITESPACE","\n\n  ",452],["T_DOC_COMMENT","\/**\n   * Performs post save entity processing.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The saved entity.\n   * @param bool $update\n   *   Specifies whether the entity is being updated or created.\n   *\/",454],["T_WHITESPACE","\n  ",461],["T_PROTECTED","protected",462],["T_WHITESPACE"," ",462],["T_FUNCTION","function",462],["T_WHITESPACE"," ",462],["T_STRING","doPostSave",462],"(",["T_STRING","EntityInterface",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$entity",462],",",["T_WHITESPACE"," ",462],["T_VARIABLE","$update",462],")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n    ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","resetCache",463],"(",["T_ARRAY","array",463],"(",["T_VARIABLE","$entity",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","id",463],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",463],["T_COMMENT","\/\/ The entity is no longer new.\n",465],["T_WHITESPACE","    ",466],["T_VARIABLE","$entity",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","enforceIsNew",466],"(",["T_STRING","FALSE",466],")",";",["T_WHITESPACE","\n\n    ",466],["T_COMMENT","\/\/ Allow code to run after saving.\n",468],["T_WHITESPACE","    ",469],["T_VARIABLE","$entity",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","postSave",469],"(",["T_VARIABLE","$this",469],",",["T_WHITESPACE"," ",469],["T_VARIABLE","$update",469],")",";",["T_WHITESPACE","\n    ",469],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","invokeHook",470],"(",["T_VARIABLE","$update",470],["T_WHITESPACE"," ",470],"?",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'update'",470],["T_WHITESPACE"," ",470],":",["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'insert'",470],",",["T_WHITESPACE"," ",470],["T_VARIABLE","$entity",470],")",";",["T_WHITESPACE","\n\n    ",470],["T_COMMENT","\/\/ After saving, this is now the \"original entity\", and subsequent saves\n",472],["T_WHITESPACE","    ",473],["T_COMMENT","\/\/ will be updates instead of inserts, and updates must always be able to\n",473],["T_WHITESPACE","    ",474],["T_COMMENT","\/\/ correctly identify the original entity.\n",474],["T_WHITESPACE","    ",475],["T_VARIABLE","$entity",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","setOriginalId",475],"(",["T_VARIABLE","$entity",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","id",475],"(",")",")",";",["T_WHITESPACE","\n\n    ",475],["T_UNSET","unset",477],"(",["T_VARIABLE","$entity",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","original",477],")",";",["T_WHITESPACE","\n  ",477],"}",["T_WHITESPACE","\n\n  ",478],["T_DOC_COMMENT","\/**\n   * Builds an entity query.\n   *\n   * @param \\Drupal\\Core\\Entity\\Query\\QueryInterface $entity_query\n   *   EntityQuery instance.\n   * @param array $values\n   *   An associative array of properties of the entity, where the keys are the\n   *   property names and the values are the values those properties must have.\n   *\/",480],["T_WHITESPACE","\n  ",488],["T_PROTECTED","protected",489],["T_WHITESPACE"," ",489],["T_FUNCTION","function",489],["T_WHITESPACE"," ",489],["T_STRING","buildPropertyQuery",489],"(",["T_STRING","QueryInterface",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$entity_query",489],",",["T_WHITESPACE"," ",489],["T_ARRAY","array",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$values",489],")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n    ",489],["T_FOREACH","foreach",490],["T_WHITESPACE"," ",490],"(",["T_VARIABLE","$values",490],["T_WHITESPACE"," ",490],["T_AS","as",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$name",490],["T_WHITESPACE"," ",490],["T_DOUBLE_ARROW","=>",490],["T_WHITESPACE"," ",490],["T_VARIABLE","$value",490],")",["T_WHITESPACE"," ",490],"{",["T_WHITESPACE","\n      ",490],["T_COMMENT","\/\/ Cast scalars to array so we can consistently use an IN condition.\n",491],["T_WHITESPACE","      ",492],["T_VARIABLE","$entity_query",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","condition",492],"(",["T_VARIABLE","$name",492],",",["T_WHITESPACE"," ",492],["T_ARRAY_CAST","(array)",492],["T_WHITESPACE"," ",492],["T_VARIABLE","$value",492],",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'IN'",492],")",";",["T_WHITESPACE","\n    ",492],"}",["T_WHITESPACE","\n  ",493],"}",["T_WHITESPACE","\n\n  ",494],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",496],["T_WHITESPACE","\n  ",498],["T_PUBLIC","public",499],["T_WHITESPACE"," ",499],["T_FUNCTION","function",499],["T_WHITESPACE"," ",499],["T_STRING","loadByProperties",499],"(",["T_ARRAY","array",499],["T_WHITESPACE"," ",499],["T_VARIABLE","$values",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_ARRAY","array",499],"(",")",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n    ",499],["T_COMMENT","\/\/ Build a query to fetch the entity IDs.\n",500],["T_WHITESPACE","    ",501],["T_VARIABLE","$entity_query",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","getQuery",501],"(",")",";",["T_WHITESPACE","\n    ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","buildPropertyQuery",502],"(",["T_VARIABLE","$entity_query",502],",",["T_WHITESPACE"," ",502],["T_VARIABLE","$values",502],")",";",["T_WHITESPACE","\n    ",502],["T_VARIABLE","$result",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_VARIABLE","$entity_query",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","execute",503],"(",")",";",["T_WHITESPACE","\n    ",503],["T_RETURN","return",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$result",504],["T_WHITESPACE"," ",504],"?",["T_WHITESPACE"," ",504],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","loadMultiple",504],"(",["T_VARIABLE","$result",504],")",["T_WHITESPACE"," ",504],":",["T_WHITESPACE"," ",504],["T_ARRAY","array",504],"(",")",";",["T_WHITESPACE","\n  ",504],"}",["T_WHITESPACE","\n\n  ",505],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",507],["T_WHITESPACE","\n  ",509],["T_PUBLIC","public",510],["T_WHITESPACE"," ",510],["T_FUNCTION","function",510],["T_WHITESPACE"," ",510],["T_STRING","getQuery",510],"(",["T_VARIABLE","$conjunction",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'AND'",510],")",["T_WHITESPACE"," ",510],"{",["T_WHITESPACE","\n    ",510],["T_COMMENT","\/\/ Access the service directly rather than entity.query factory so the\n",511],["T_WHITESPACE","    ",512],["T_COMMENT","\/\/ storage's current entity type is used.\n",512],["T_WHITESPACE","    ",513],["T_RETURN","return",513],["T_WHITESPACE"," ",513],["T_NS_SEPARATOR","\\",513],["T_STRING","Drupal",513],["T_DOUBLE_COLON","::",513],["T_STRING","service",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","getQueryServiceName",513],"(",")",")",["T_OBJECT_OPERATOR","->",513],["T_STRING","get",513],"(",["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","entityType",513],",",["T_WHITESPACE"," ",513],["T_VARIABLE","$conjunction",513],")",";",["T_WHITESPACE","\n  ",513],"}",["T_WHITESPACE","\n\n  ",514],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",516],["T_WHITESPACE","\n  ",518],["T_PUBLIC","public",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","getAggregateQuery",519],"(",["T_VARIABLE","$conjunction",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'AND'",519],")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n    ",519],["T_COMMENT","\/\/ Access the service directly rather than entity.query factory so the\n",520],["T_WHITESPACE","    ",521],["T_COMMENT","\/\/ storage's current entity type is used.\n",521],["T_WHITESPACE","    ",522],["T_RETURN","return",522],["T_WHITESPACE"," ",522],["T_NS_SEPARATOR","\\",522],["T_STRING","Drupal",522],["T_DOUBLE_COLON","::",522],["T_STRING","service",522],"(",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","getQueryServiceName",522],"(",")",")",["T_OBJECT_OPERATOR","->",522],["T_STRING","getAggregate",522],"(",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","entityType",522],",",["T_WHITESPACE"," ",522],["T_VARIABLE","$conjunction",522],")",";",["T_WHITESPACE","\n  ",522],"}",["T_WHITESPACE","\n\n  ",523],["T_DOC_COMMENT","\/**\n   * Gets the name of the service for the query for this entity storage.\n   *\n   * @return string\n   *   The name of the service for the query for this entity storage.\n   *\/",525],["T_WHITESPACE","\n  ",530],["T_ABSTRACT","abstract",531],["T_WHITESPACE"," ",531],["T_PROTECTED","protected",531],["T_WHITESPACE"," ",531],["T_FUNCTION","function",531],["T_WHITESPACE"," ",531],["T_STRING","getQueryServiceName",531],"(",")",";",["T_WHITESPACE","\n\n",531],"}",["T_WHITESPACE","\n",533]]
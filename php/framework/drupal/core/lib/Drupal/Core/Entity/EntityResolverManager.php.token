[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DependencyInjection",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ClassResolverInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Routing",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Route",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Sets the entity route parameter converter options automatically.\n *\n * If controllers of routes with route parameters, type-hint the parameters with\n * an entity interface, upcasting is done automatically.\n *\/",8],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","EntityResolverManager",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$entityManager",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The class resolver.\n   *\n   * @var \\Drupal\\Core\\DependencyInjection\\ClassResolverInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$classResolver",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityRouteAlterSubscriber.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   * @param \\Drupal\\Core\\DependencyInjection\\ClassResolverInterface $class_resolver\n   *   The class resolver.\n   *\/",30],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_STRING","EntityManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_manager",38],",",["T_WHITESPACE"," ",38],["T_STRING","ClassResolverInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$class_resolver",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","entityManager",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$entity_manager",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","classResolver",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$class_resolver",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Gets the controller class using route defaults.\n   *\n   * By design we cannot support all possible routes, but just the ones which\n   * use the defaults provided by core, which are _controller and _form.\n   *\n   * Rather than creating an instance of every controller determine the class\n   * and method that would be used. This is not possible for the service:method\n   * notation as the runtime container does not allow static introspection.\n   *\n   * @see \\Drupal\\Core\\Controller\\ControllerResolver::getControllerFromDefinition()\n   * @see \\Drupal\\Core\\Controller\\ClassResolver::getInstanceFromDefinition()\n   *\n   * @param array $defaults\n   *   The default values provided by the route.\n   *\n   * @return string|null\n   *   Returns the controller class, otherwise NULL.\n   *\/",43],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getControllerClass",62],"(",["T_ARRAY","array",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$defaults",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$controller",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","NULL",63],";",["T_WHITESPACE","\n    ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_ISSET","isset",64],"(",["T_VARIABLE","$defaults",64],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",64],"]",")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$controller",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$defaults",65],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",65],"]",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_IF","if",68],["T_WHITESPACE"," ",68],"(",["T_ISSET","isset",68],"(",["T_VARIABLE","$defaults",68],"[",["T_CONSTANT_ENCAPSED_STRING","'_form'",68],"]",")",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_VARIABLE","$controller",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$defaults",69],"[",["T_CONSTANT_ENCAPSED_STRING","'_form'",69],"]",";",["T_WHITESPACE","\n      ",69],["T_COMMENT","\/\/ Check if the class exists and if so use the buildForm() method from the\n",70],["T_WHITESPACE","      ",71],["T_COMMENT","\/\/ interface.\n",71],["T_WHITESPACE","      ",72],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_STRING","class_exists",72],"(",["T_VARIABLE","$controller",72],")",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n        ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_VARIABLE","$controller",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'buildForm'",73],")",";",["T_WHITESPACE","\n      ",73],"}",["T_WHITESPACE","\n    ",74],"}",["T_WHITESPACE","\n\n    ",75],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","strpos",77],"(",["T_VARIABLE","$controller",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","':'",77],")",["T_WHITESPACE"," ",77],["T_IS_IDENTICAL","===",77],["T_WHITESPACE"," ",77],["T_STRING","FALSE",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_STRING","method_exists",78],"(",["T_VARIABLE","$controller",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'__invoke'",78],")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_VARIABLE","$controller",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'__invoke'",79],")",";",["T_WHITESPACE","\n      ",79],"}",["T_WHITESPACE","\n      ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_STRING","function_exists",81],"(",["T_VARIABLE","$controller",81],")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_RETURN","return",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$controller",82],";",["T_WHITESPACE","\n      ",82],"}",["T_WHITESPACE","\n      ",83],["T_RETURN","return",84],["T_WHITESPACE"," ",84],["T_STRING","NULL",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_VARIABLE","$count",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","substr_count",87],"(",["T_VARIABLE","$controller",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","':'",87],")",";",["T_WHITESPACE","\n    ",87],["T_IF","if",88],["T_WHITESPACE"," ",88],"(",["T_VARIABLE","$count",88],["T_WHITESPACE"," ",88],["T_IS_EQUAL","==",88],["T_WHITESPACE"," ",88],["T_LNUMBER","1",88],")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n      ",88],["T_COMMENT","\/\/ Controller in the service:method notation. Get the information from the\n",89],["T_WHITESPACE","      ",90],["T_COMMENT","\/\/ service. This is dangerous as the controller could depend on services\n",90],["T_WHITESPACE","      ",91],["T_COMMENT","\/\/ that could not exist at this point. There is however no other way to\n",91],["T_WHITESPACE","      ",92],["T_COMMENT","\/\/ do it, as the container does not allow static introspection.\n",92],["T_WHITESPACE","      ",93],["T_LIST","list",93],"(",["T_VARIABLE","$class_or_service",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$method",93],")",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_STRING","explode",93],"(",["T_CONSTANT_ENCAPSED_STRING","':'",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$controller",93],",",["T_WHITESPACE"," ",93],["T_LNUMBER","2",93],")",";",["T_WHITESPACE","\n      ",93],["T_RETURN","return",94],["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","classResolver",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getInstanceFromDefinition",94],"(",["T_VARIABLE","$class_or_service",94],")",",",["T_WHITESPACE"," ",94],["T_VARIABLE","$method",94],")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n    ",95],["T_ELSEIF","elseif",96],["T_WHITESPACE"," ",96],"(",["T_STRING","strpos",96],"(",["T_VARIABLE","$controller",96],",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'::'",96],")",["T_WHITESPACE"," ",96],["T_IS_NOT_IDENTICAL","!==",96],["T_WHITESPACE"," ",96],["T_STRING","FALSE",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_COMMENT","\/\/ Controller in the class::method notation.\n",97],["T_WHITESPACE","      ",98],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_STRING","explode",98],"(",["T_CONSTANT_ENCAPSED_STRING","'::'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$controller",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","2",98],")",";",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n\n    ",99],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_STRING","NULL",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * Sets the upcasting information using reflection.\n   *\n   * @param string|array $controller\n   *   A PHP callable representing the controller.\n   * @param \\Symfony\\Component\\Routing\\Route $route\n   *   The route object to populate without upcasting information.\n   *\n   * @return bool\n   *   Returns TRUE if the upcasting parameters could be set, FALSE otherwise.\n   *\/",104],["T_WHITESPACE","\n  ",114],["T_PROTECTED","protected",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","setParametersFromReflection",115],"(",["T_VARIABLE","$controller",115],",",["T_WHITESPACE"," ",115],["T_STRING","Route",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$route",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$entity_types",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getEntityTypes",116],"(",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$parameter_definitions",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$route",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getOption",117],"(",["T_CONSTANT_ENCAPSED_STRING","'parameters'",117],")",["T_WHITESPACE"," ",117],"?",":",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$result",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_STRING","FALSE",119],";",["T_WHITESPACE","\n\n    ",119],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_STRING","is_array",121],"(",["T_VARIABLE","$controller",121],")",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_LIST","list",122],"(",["T_VARIABLE","$instance",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$method",122],")",["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$controller",122],";",["T_WHITESPACE","\n      ",122],["T_VARIABLE","$reflection",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_NEW","new",123],["T_WHITESPACE"," ",123],["T_NS_SEPARATOR","\\",123],["T_STRING","ReflectionMethod",123],"(",["T_VARIABLE","$instance",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$method",123],")",";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n    ",124],["T_ELSE","else",125],["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$reflection",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_NEW","new",126],["T_WHITESPACE"," ",126],["T_NS_SEPARATOR","\\",126],["T_STRING","ReflectionFunction",126],"(",["T_VARIABLE","$controller",126],")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_VARIABLE","$parameters",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$reflection",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getParameters",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$parameters",130],["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$parameter",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_VARIABLE","$parameter_name",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$parameter",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getName",131],"(",")",";",["T_WHITESPACE","\n      ",131],["T_COMMENT","\/\/ If the parameter name matches with an entity type try to set the\n",132],["T_WHITESPACE","      ",133],["T_COMMENT","\/\/ upcasting information automatically. Therefore take into account that\n",133],["T_WHITESPACE","      ",134],["T_COMMENT","\/\/ the user has specified some interface, so the upcasting is intended.\n",134],["T_WHITESPACE","      ",135],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_ISSET","isset",135],"(",["T_VARIABLE","$entity_types",135],"[",["T_VARIABLE","$parameter_name",135],"]",")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$entity_type",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$entity_types",136],"[",["T_VARIABLE","$parameter_name",136],"]",";",["T_WHITESPACE","\n        ",136],["T_VARIABLE","$entity_class",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$entity_type",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getClass",137],"(",")",";",["T_WHITESPACE","\n        ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(","(",["T_VARIABLE","$reflection_class",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$parameter",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getClass",138],"(",")",")",["T_WHITESPACE"," ",138],["T_BOOLEAN_AND","&&",138],["T_WHITESPACE"," ",138],"(",["T_STRING","is_subclass_of",138],"(",["T_VARIABLE","$entity_class",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$reflection_class",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","name",138],")",["T_WHITESPACE"," ",138],["T_BOOLEAN_OR","||",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$entity_class",138],["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$reflection_class",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","name",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n          ",138],["T_VARIABLE","$parameter_definitions",139],["T_WHITESPACE"," ",139],["T_PLUS_EQUAL","+=",139],["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_VARIABLE","$parameter_name",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",")",")",";",["T_WHITESPACE","\n          ",139],["T_VARIABLE","$parameter_definitions",140],"[",["T_VARIABLE","$parameter_name",140],"]",["T_WHITESPACE"," ",140],["T_PLUS_EQUAL","+=",140],["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_WHITESPACE","\n            ",140],["T_CONSTANT_ENCAPSED_STRING","'type'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'entity:'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$parameter_name",141],",",["T_WHITESPACE","\n          ",141],")",";",["T_WHITESPACE","\n          ",142],["T_VARIABLE","$result",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_STRING","TRUE",143],";",["T_WHITESPACE","\n        ",143],"}",["T_WHITESPACE","\n      ",144],"}",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_IF","if",147],["T_WHITESPACE"," ",147],"(","!",["T_EMPTY","empty",147],"(",["T_VARIABLE","$parameter_definitions",147],")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$route",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","setOption",148],"(",["T_CONSTANT_ENCAPSED_STRING","'parameters'",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$parameter_definitions",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n    ",149],["T_RETURN","return",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$result",150],";",["T_WHITESPACE","\n  ",150],"}",["T_WHITESPACE","\n\n  ",151],["T_DOC_COMMENT","\/**\n   * Sets the upcasting information using the _entity_* route defaults.\n   *\n   * Supports the '_entity_view' and '_entity_form' route defaults.\n   *\n   * @param \\Symfony\\Component\\Routing\\Route $route\n   *   The route object.\n   *\/",153],["T_WHITESPACE","\n  ",160],["T_PROTECTED","protected",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","setParametersFromEntityInformation",161],"(",["T_STRING","Route",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$route",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_IF","if",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$entity_view",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$route",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getDefault",162],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",162],")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_LIST","list",163],"(",["T_VARIABLE","$entity_type",163],")",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","explode",163],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$entity_view",163],",",["T_WHITESPACE"," ",163],["T_LNUMBER","2",163],")",";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n    ",164],["T_ELSEIF","elseif",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$entity_form",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$route",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getDefault",165],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_form'",165],")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n      ",165],["T_LIST","list",166],"(",["T_VARIABLE","$entity_type",166],")",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","explode",166],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$entity_form",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","2",166],")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ Do not add parameter information if the route does not declare a\n",169],["T_WHITESPACE","    ",170],["T_COMMENT","\/\/ parameter in the first place. This is the case for add forms, for\n",170],["T_WHITESPACE","    ",171],["T_COMMENT","\/\/ example.\n",171],["T_WHITESPACE","    ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_ISSET","isset",172],"(",["T_VARIABLE","$entity_type",172],")",["T_WHITESPACE"," ",172],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],["T_ISSET","isset",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getEntityTypes",172],"(",")","[",["T_VARIABLE","$entity_type",172],"]",")",["T_WHITESPACE"," ",172],["T_BOOLEAN_AND","&&",172],["T_WHITESPACE"," ",172],"(",["T_STRING","strpos",172],"(",["T_VARIABLE","$route",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","getPath",172],"(",")",",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'{'",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$entity_type",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'}'",172],")",["T_WHITESPACE"," ",172],["T_IS_NOT_IDENTICAL","!==",172],["T_WHITESPACE"," ",172],["T_STRING","FALSE",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$parameter_definitions",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$route",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getOption",173],"(",["T_CONSTANT_ENCAPSED_STRING","'parameters'",173],")",["T_WHITESPACE"," ",173],"?",":",["T_WHITESPACE"," ",173],["T_ARRAY","array",173],"(",")",";",["T_WHITESPACE","\n\n      ",173],["T_COMMENT","\/\/ First try to figure out whether there is already a parameter upcasting\n",175],["T_WHITESPACE","      ",176],["T_COMMENT","\/\/ the same entity type already.\n",176],["T_WHITESPACE","      ",177],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$parameter_definitions",177],["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$info",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n        ",177],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_ISSET","isset",178],"(",["T_VARIABLE","$info",178],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",178],"]",")",["T_WHITESPACE"," ",178],["T_BOOLEAN_AND","&&",178],["T_WHITESPACE"," ",178],"(",["T_STRING","strpos",178],"(",["T_VARIABLE","$info",178],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",178],"]",",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'entity:'",178],")",["T_WHITESPACE"," ",178],["T_IS_IDENTICAL","===",178],["T_WHITESPACE"," ",178],["T_LNUMBER","0",178],")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n          ",178],["T_COMMENT","\/\/ The parameter types are in the form 'entity:$entity_type'.\n",179],["T_WHITESPACE","          ",180],["T_LIST","list",180],"(",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$parameter_entity_type",180],")",["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","explode",180],"(",["T_CONSTANT_ENCAPSED_STRING","':'",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$info",180],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",180],"]",",",["T_WHITESPACE"," ",180],["T_LNUMBER","2",180],")",";",["T_WHITESPACE","\n          ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$parameter_entity_type",181],["T_WHITESPACE"," ",181],["T_IS_EQUAL","==",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$entity_type",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n            ",181],["T_RETURN","return",182],";",["T_WHITESPACE","\n          ",182],"}",["T_WHITESPACE","\n        ",183],"}",["T_WHITESPACE","\n      ",184],"}",["T_WHITESPACE","\n\n      ",185],["T_IF","if",187],["T_WHITESPACE"," ",187],"(","!",["T_ISSET","isset",187],"(",["T_VARIABLE","$parameter_definitions",187],"[",["T_VARIABLE","$entity_type",187],"]",")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n        ",187],["T_VARIABLE","$parameter_definitions",188],"[",["T_VARIABLE","$entity_type",188],"]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],"(",")",";",["T_WHITESPACE","\n      ",188],"}",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$parameter_definitions",190],"[",["T_VARIABLE","$entity_type",190],"]",["T_WHITESPACE"," ",190],["T_PLUS_EQUAL","+=",190],["T_WHITESPACE"," ",190],["T_ARRAY","array",190],"(",["T_WHITESPACE","\n        ",190],["T_CONSTANT_ENCAPSED_STRING","'type'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'entity:'",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$entity_type",191],",",["T_WHITESPACE","\n      ",191],")",";",["T_WHITESPACE","\n      ",192],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_EMPTY","empty",193],"(",["T_VARIABLE","$parameter_definitions",193],")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n        ",193],["T_VARIABLE","$route",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","setOption",194],"(",["T_CONSTANT_ENCAPSED_STRING","'parameters'",194],",",["T_WHITESPACE"," ",194],["T_VARIABLE","$parameter_definitions",194],")",";",["T_WHITESPACE","\n      ",194],"}",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n  ",196],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Set the upcasting route objects.\n   *\n   * @param \\Symfony\\Component\\Routing\\Route $route\n   *   The route object to add the upcasting information onto.\n   *\/",199],["T_WHITESPACE","\n  ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","setRouteOptions",205],"(",["T_STRING","Route",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$route",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n    ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$controller",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getControllerClass",206],"(",["T_VARIABLE","$route",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getDefaults",206],"(",")",")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n      ",206],["T_COMMENT","\/\/ Try to use reflection.\n",207],["T_WHITESPACE","      ",208],["T_IF","if",208],["T_WHITESPACE"," ",208],"(",["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","setParametersFromReflection",208],"(",["T_VARIABLE","$controller",208],",",["T_WHITESPACE"," ",208],["T_VARIABLE","$route",208],")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n        ",208],["T_RETURN","return",209],";",["T_WHITESPACE","\n      ",209],"}",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_COMMENT","\/\/ Try to use _entity_* information on the route.\n",213],["T_WHITESPACE","    ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","setParametersFromEntityInformation",214],"(",["T_VARIABLE","$route",214],")",";",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * Gets the list of all entity types.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityTypeInterface[]\n   *\/",217],["T_WHITESPACE","\n  ",221],["T_PROTECTED","protected",222],["T_WHITESPACE"," ",222],["T_FUNCTION","function",222],["T_WHITESPACE"," ",222],["T_STRING","getEntityTypes",222],"(",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n    ",222],["T_IF","if",223],["T_WHITESPACE"," ",223],"(","!",["T_ISSET","isset",223],"(",["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","entityTypes",223],")",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n      ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","entityTypes",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","entityManager",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getDefinitions",224],"(",")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n    ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","entityTypes",226],";",["T_WHITESPACE","\n  ",226],"}",["T_WHITESPACE","\n\n",227],"}",["T_WHITESPACE","\n",229]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Event",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigImporterEvent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigImportValidateEventSubscriberBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigManagerInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigEntityStorage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityManagerInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Entity config importer validation event subscriber.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","BundleConfigImportValidate",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","ConfigImportValidateEventSubscriberBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * The config manager.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigManagerInterface\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$configManager",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$entityManager",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Constructs the event subscriber.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager\n   *   The config manager\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   *\/",30],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_STRING","ConfigManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$config_manager",38],",",["T_WHITESPACE"," ",38],["T_STRING","EntityManagerInterface",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity_manager",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","configManager",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$config_manager",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","entityManager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$entity_manager",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Ensures bundles that will be deleted are not in use.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigImporterEvent $event\n   *   The config import event.\n   *\/",43],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","onConfigImporterValidate",49],"(",["T_STRING","ConfigImporterEvent",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$event",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$event",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getChangelist",50],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",50],")",["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$config_name",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_COMMENT","\/\/ Get the config entity type ID. This also ensure we are dealing with a\n",51],["T_WHITESPACE","      ",52],["T_COMMENT","\/\/ configuration entity.\n",52],["T_WHITESPACE","      ",53],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$entity_type_id",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","configManager",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getEntityTypeIdByName",53],"(",["T_VARIABLE","$config_name",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_VARIABLE","$entity_type",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","entityManager",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getDefinition",54],"(",["T_VARIABLE","$entity_type_id",54],")",";",["T_WHITESPACE","\n        ",54],["T_COMMENT","\/\/ Does this entity type define a bundle of another entity type.\n",55],["T_WHITESPACE","        ",56],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$bundle_of",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$entity_type",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getBundleOf",56],"(",")",")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n          ",56],["T_COMMENT","\/\/ Work out if there are entities with this bundle.\n",57],["T_WHITESPACE","          ",58],["T_VARIABLE","$bundle_of_entity_type",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","entityManager",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getDefinition",58],"(",["T_VARIABLE","$bundle_of",58],")",";",["T_WHITESPACE","\n          ",58],["T_VARIABLE","$bundle_id",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","ConfigEntityStorage",59],["T_DOUBLE_COLON","::",59],["T_STRING","getIDFromConfigName",59],"(",["T_VARIABLE","$config_name",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$entity_type",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","getConfigPrefix",59],"(",")",")",";",["T_WHITESPACE","\n          ",59],["T_VARIABLE","$entity_query",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","entityManager",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getStorage",60],"(",["T_VARIABLE","$bundle_of",60],")",["T_OBJECT_OPERATOR","->",60],["T_STRING","getQuery",60],"(",")",";",["T_WHITESPACE","\n          ",60],["T_VARIABLE","$entity_ids",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$entity_query",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","condition",61],"(",["T_VARIABLE","$bundle_of_entity_type",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getKey",61],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",61],")",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$bundle_id",61],")",["T_WHITESPACE","\n            ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","accessCheck",62],"(",["T_STRING","FALSE",62],")",["T_WHITESPACE","\n            ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","range",63],"(",["T_LNUMBER","0",63],",",["T_WHITESPACE"," ",63],["T_LNUMBER","1",63],")",["T_WHITESPACE","\n            ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","execute",64],"(",")",";",["T_WHITESPACE","\n          ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(","!",["T_EMPTY","empty",65],"(",["T_VARIABLE","$entity_ids",65],")",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n            ",65],["T_VARIABLE","$entity",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","entityManager",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getStorage",66],"(",["T_VARIABLE","$entity_type_id",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_VARIABLE","$bundle_id",66],")",";",["T_WHITESPACE","\n            ",66],["T_VARIABLE","$event",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getConfigImporter",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","logError",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","t",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Entities exist of type %entity_type and %bundle_label %bundle. These entities need to be deleted before importing.'",67],",",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$bundle_of_entity_type",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getLabel",67],"(",")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'%bundle_label'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$bundle_of_entity_type",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getBundleLabel",67],"(",")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'%bundle'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$entity",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","label",67],"(",")",")",")",")",";",["T_WHITESPACE","\n          ",67],"}",["T_WHITESPACE","\n        ",68],"}",["T_WHITESPACE","\n      ",69],"}",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n",72],"}",["T_WHITESPACE","\n",74]]
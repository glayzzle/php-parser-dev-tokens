[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Display",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityFormDisplayInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityFormDisplay",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormStateInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DependencyInjection",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ContainerInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Entity form variant for content entity types.\n *\n * @see \\Drupal\\Core\\ContentEntityBase\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ContentEntityForm",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","EntityForm",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","ContentEntityFormInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$entityManager",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Constructs a ContentEntityForm object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   *\/",24],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","__construct",30],"(",["T_STRING","EntityManagerInterface",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$entity_manager",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","entityManager",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_VARIABLE","$entity_manager",31],";",["T_WHITESPACE","\n  ",31],"}",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_STATIC","static",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","create",37],"(",["T_STRING","ContainerInterface",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$container",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_RETURN","return",38],["T_WHITESPACE"," ",38],["T_NEW","new",38],["T_WHITESPACE"," ",38],["T_STATIC","static",38],"(",["T_WHITESPACE","\n      ",38],["T_VARIABLE","$container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",39],")",["T_WHITESPACE","\n    ",39],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","form",46],"(",["T_ARRAY","array",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$form",46],",",["T_WHITESPACE"," ",46],["T_STRING","FormStateInterface",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$form_state",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$form",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_STRING","parent",47],["T_DOUBLE_COLON","::",47],["T_STRING","form",47],"(",["T_VARIABLE","$form",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$form_state",47],")",";",["T_WHITESPACE","\n    ",47],["T_COMMENT","\/\/ Content entity forms do not use the parent's #after_build callback\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ because they only need to rebuild the entity in the validation and the\n",49],["T_WHITESPACE","    ",50],["T_COMMENT","\/\/ submit handler because Field API uses its own #after_build callback for\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ its widgets.\n",51],["T_WHITESPACE","    ",52],["T_UNSET","unset",52],"(",["T_VARIABLE","$form",52],"[",["T_CONSTANT_ENCAPSED_STRING","'#after_build'",52],"]",")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getFormDisplay",54],"(",["T_VARIABLE","$form_state",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","buildForm",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","entity",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$form",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$form_state",54],")",";",["T_WHITESPACE","\n    ",54],["T_COMMENT","\/\/ Allow modules to act before and after form language is updated.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$form",56],"[",["T_CONSTANT_ENCAPSED_STRING","'#entity_builders'",56],"]","[",["T_CONSTANT_ENCAPSED_STRING","'update_form_langcode'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],"[",["T_VARIABLE","$this",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'updateFormLangcode'",56],"]",";",["T_WHITESPACE","\n    ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$form",57],";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","submitForm",63],"(",["T_ARRAY","array",63],["T_WHITESPACE"," ",63],"&",["T_VARIABLE","$form",63],",",["T_WHITESPACE"," ",63],["T_STRING","FormStateInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$form_state",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","submitForm",64],"(",["T_VARIABLE","$form",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$form_state",64],")",";",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ Update the changed timestamp of the entity.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","updateChangedTime",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","entity",66],")",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","buildEntity",72],"(",["T_ARRAY","array",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$form",72],",",["T_WHITESPACE"," ",72],["T_STRING","FormStateInterface",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$form_state",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",73],["T_WHITESPACE","\n    ",73],["T_VARIABLE","$entity",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","parent",74],["T_DOUBLE_COLON","::",74],["T_STRING","buildEntity",74],"(",["T_VARIABLE","$form",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$form_state",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Mark the entity as requiring validation.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$entity",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setValidationRequired",77],"(","!",["T_VARIABLE","$form_state",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getTemporaryValue",77],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_validated'",77],")",")",";",["T_WHITESPACE","\n\n    ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$entity",79],";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * Button-level validation handlers are highly discouraged for entity forms,\n   * as they will prevent entity validation from running. If the entity is going\n   * to be saved during the form submission, this method should be manually\n   * invoked from the button-level validation handler, otherwise an exception\n   * will be thrown.\n   *\/",82],["T_WHITESPACE","\n  ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","validateForm",91],"(",["T_ARRAY","array",91],["T_WHITESPACE"," ",91],"&",["T_VARIABLE","$form",91],",",["T_WHITESPACE"," ",91],["T_STRING","FormStateInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$form_state",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_STRING","parent",92],["T_DOUBLE_COLON","::",92],["T_STRING","validateForm",92],"(",["T_VARIABLE","$form",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$form_state",92],")",";",["T_WHITESPACE","\n    ",92],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",93],["T_WHITESPACE","\n    ",93],["T_VARIABLE","$entity",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","buildEntity",94],"(",["T_VARIABLE","$form",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$form_state",94],")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$violations",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$entity",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","validate",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Remove violations of inaccessible fields and not edited fields.\n",98],["T_WHITESPACE","    ",99],["T_VARIABLE","$violations",99],["T_WHITESPACE","\n      ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","filterByFieldAccess",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","currentUser",100],"(",")",")",["T_WHITESPACE","\n      ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","filterByFields",101],"(",["T_STRING","array_diff",101],"(",["T_STRING","array_keys",101],"(",["T_VARIABLE","$entity",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getFieldDefinitions",101],"(",")",")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getEditedFieldNames",101],"(",["T_VARIABLE","$form_state",101],")",")",")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","flagViolations",103],"(",["T_VARIABLE","$violations",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$form",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$form_state",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ The entity was validated.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$entity",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","setValidationRequired",106],"(",["T_STRING","FALSE",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$form_state",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","setTemporaryValue",107],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_validated'",107],",",["T_WHITESPACE"," ",107],["T_STRING","TRUE",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$entity",109],";",["T_WHITESPACE","\n  ",109],"}",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * Gets the names of all fields edited in the form.\n   *\n   * If the entity form customly adds some fields to the form (i.e. without\n   * using the form display), it needs to add its fields here and override\n   * flagViolations() for displaying the violations.\n   *\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\n   * @return string[]\n   *   An array of field names.\n   *\/",112],["T_WHITESPACE","\n  ",124],["T_PROTECTED","protected",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","getEditedFieldNames",125],"(",["T_STRING","FormStateInterface",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$form_state",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_STRING","array_keys",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getFormDisplay",126],"(",["T_VARIABLE","$form_state",126],")",["T_OBJECT_OPERATOR","->",126],["T_STRING","getComponents",126],"(",")",")",";",["T_WHITESPACE","\n  ",126],"}",["T_WHITESPACE","\n\n  ",127],["T_DOC_COMMENT","\/**\n   * Flags violations for the current form.\n   *\n   * If the entity form customly adds some fields to the form (i.e. without\n   * using the form display), it needs to add its fields to array returned by\n   * getEditedFieldNames() and overwrite this method in order to show any\n   * violations for those fields; e.g.:\n   * @code\n   * foreach ($violations->getByField('name') as $violation) {\n   *   $form_state->setErrorByName('name', $violation->getMessage());\n   * }\n   * parent::flagViolations($violations, $form, $form_state);\n   * @endcode\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityConstraintViolationListInterface $violations\n   *   The violations to flag.\n   * @param array $form\n   *   A nested array of form elements comprising the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",129],["T_WHITESPACE","\n  ",149],["T_PROTECTED","protected",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","flagViolations",150],"(",["T_STRING","EntityConstraintViolationListInterface",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$violations",150],",",["T_WHITESPACE"," ",150],["T_ARRAY","array",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$form",150],",",["T_WHITESPACE"," ",150],["T_STRING","FormStateInterface",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$form_state",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n    ",150],["T_COMMENT","\/\/ Flag entity level violations.\n",151],["T_WHITESPACE","    ",152],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$violations",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getEntityViolations",152],"(",")",["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$violation",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n      ",152],["T_DOC_COMMENT","\/** @var \\Symfony\\Component\\Validator\\ConstraintViolationInterface $violation *\/",153],["T_WHITESPACE","\n      ",153],["T_VARIABLE","$form_state",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","setErrorByName",154],"(",["T_CONSTANT_ENCAPSED_STRING","''",154],",",["T_WHITESPACE"," ",154],["T_VARIABLE","$violation",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getMessage",154],"(",")",")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n    ",155],["T_COMMENT","\/\/ Let the form display flag violations of its fields.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","getFormDisplay",157],"(",["T_VARIABLE","$form_state",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","flagWidgetsErrorsFromViolations",157],"(",["T_VARIABLE","$violations",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$form",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$form_state",157],")",";",["T_WHITESPACE","\n  ",157],"}",["T_WHITESPACE","\n\n  ",158],["T_DOC_COMMENT","\/**\n   * Initializes the form state and the entity before the first form build.\n   *\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",160],["T_WHITESPACE","\n  ",165],["T_PROTECTED","protected",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","init",166],"(",["T_STRING","FormStateInterface",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$form_state",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n    ",166],["T_COMMENT","\/\/ Ensure we act on the translation object corresponding to the current form\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ language.\n",168],["T_WHITESPACE","    ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","initFormLangcodes",169],"(",["T_VARIABLE","$form_state",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$langcode",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getFormLangcode",170],"(",["T_VARIABLE","$form_state",170],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","entity",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","entity",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","hasTranslation",171],"(",["T_VARIABLE","$langcode",171],")",["T_WHITESPACE"," ",171],"?",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","entity",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getTranslation",171],"(",["T_VARIABLE","$langcode",171],")",["T_WHITESPACE"," ",171],":",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","entity",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","addTranslation",171],"(",["T_VARIABLE","$langcode",171],")",";",["T_WHITESPACE","\n\n    ",171],["T_VARIABLE","$form_display",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_STRING","EntityFormDisplay",173],["T_DOUBLE_COLON","::",173],["T_STRING","collectRenderDisplay",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","entity",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getOperation",173],"(",")",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","setFormDisplay",174],"(",["T_VARIABLE","$form_display",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$form_state",174],")",";",["T_WHITESPACE","\n\n    ",174],["T_STRING","parent",176],["T_DOUBLE_COLON","::",176],["T_STRING","init",176],"(",["T_VARIABLE","$form_state",176],")",";",["T_WHITESPACE","\n  ",176],"}",["T_WHITESPACE","\n\n  ",177],["T_DOC_COMMENT","\/**\n   * Initializes form language code values.\n   *\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",179],["T_WHITESPACE","\n  ",184],["T_PROTECTED","protected",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","initFormLangcodes",185],"(",["T_STRING","FormStateInterface",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$form_state",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n    ",185],["T_COMMENT","\/\/ Store the entity default language to allow checking whether the form is\n",186],["T_WHITESPACE","    ",187],["T_COMMENT","\/\/ dealing with the original entity or a translation.\n",187],["T_WHITESPACE","    ",188],["T_IF","if",188],["T_WHITESPACE"," ",188],"(","!",["T_VARIABLE","$form_state",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","has",188],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_default_langcode'",188],")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n      ",188],["T_VARIABLE","$form_state",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","set",189],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_default_langcode'",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","entity",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","getUntranslated",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","language",189],"(",")",["T_OBJECT_OPERATOR","->",189],["T_STRING","getId",189],"(",")",")",";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n    ",190],["T_COMMENT","\/\/ This value might have been explicitly populated to work with a particular\n",191],["T_WHITESPACE","    ",192],["T_COMMENT","\/\/ entity translation. If not we fall back to the most proper language based\n",192],["T_WHITESPACE","    ",193],["T_COMMENT","\/\/ on contextual information.\n",193],["T_WHITESPACE","    ",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(","!",["T_VARIABLE","$form_state",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","has",194],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",194],")",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n      ",194],["T_COMMENT","\/\/ Imply a 'view' operation to ensure users edit entities in the same\n",195],["T_WHITESPACE","      ",196],["T_COMMENT","\/\/ language they are displayed. This allows to keep contextual editing\n",196],["T_WHITESPACE","      ",197],["T_COMMENT","\/\/ working also for multilingual entities.\n",197],["T_WHITESPACE","      ",198],["T_VARIABLE","$form_state",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","set",198],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","entityManager",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getTranslationFromContext",198],"(",["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","entity",198],")",["T_OBJECT_OPERATOR","->",198],["T_STRING","language",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","getId",198],"(",")",")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n  ",199],"}",["T_WHITESPACE","\n\n  ",200],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",202],["T_WHITESPACE","\n  ",204],["T_PUBLIC","public",205],["T_WHITESPACE"," ",205],["T_FUNCTION","function",205],["T_WHITESPACE"," ",205],["T_STRING","getFormLangcode",205],"(",["T_STRING","FormStateInterface",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$form_state",205],")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","initFormLangcodes",206],"(",["T_VARIABLE","$form_state",206],")",";",["T_WHITESPACE","\n    ",206],["T_RETURN","return",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$form_state",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","get",207],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",207],")",";",["T_WHITESPACE","\n  ",207],"}",["T_WHITESPACE","\n\n  ",208],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",210],["T_WHITESPACE","\n  ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","isDefaultFormLangcode",213],"(",["T_STRING","FormStateInterface",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$form_state",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","initFormLangcodes",214],"(",["T_VARIABLE","$form_state",214],")",";",["T_WHITESPACE","\n    ",214],["T_RETURN","return",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$form_state",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","get",215],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",215],")",["T_WHITESPACE"," ",215],["T_IS_EQUAL","==",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$form_state",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","get",215],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_default_langcode'",215],")",";",["T_WHITESPACE","\n  ",215],"}",["T_WHITESPACE","\n\n  ",216],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",218],["T_WHITESPACE","\n  ",220],["T_PROTECTED","protected",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","copyFormValuesToEntity",221],"(",["T_STRING","EntityInterface",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$entity",221],",",["T_WHITESPACE"," ",221],["T_ARRAY","array",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$form",221],",",["T_WHITESPACE"," ",221],["T_STRING","FormStateInterface",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$form_state",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n    ",221],["T_COMMENT","\/\/ First, extract values from widgets.\n",222],["T_WHITESPACE","    ",223],["T_VARIABLE","$extracted",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","getFormDisplay",223],"(",["T_VARIABLE","$form_state",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","extractFormValues",223],"(",["T_VARIABLE","$entity",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$form",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$form_state",223],")",";",["T_WHITESPACE","\n\n    ",223],["T_COMMENT","\/\/ Then extract the values of fields that are not rendered through widgets,\n",225],["T_WHITESPACE","    ",226],["T_COMMENT","\/\/ by simply copying from top-level form values. This leaves the fields\n",226],["T_WHITESPACE","    ",227],["T_COMMENT","\/\/ that are not being edited within this form untouched.\n",227],["T_WHITESPACE","    ",228],["T_FOREACH","foreach",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$form_state",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","getValues",228],"(",")",["T_WHITESPACE"," ",228],["T_AS","as",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$name",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$values",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n      ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$entity",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","hasField",229],"(",["T_VARIABLE","$name",229],")",["T_WHITESPACE"," ",229],["T_BOOLEAN_AND","&&",229],["T_WHITESPACE"," ",229],"!",["T_ISSET","isset",229],"(",["T_VARIABLE","$extracted",229],"[",["T_VARIABLE","$name",229],"]",")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n        ",229],["T_VARIABLE","$entity",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","set",230],"(",["T_VARIABLE","$name",230],",",["T_WHITESPACE"," ",230],["T_VARIABLE","$values",230],")",";",["T_WHITESPACE","\n      ",230],"}",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n  ",232],"}",["T_WHITESPACE","\n\n  ",233],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",235],["T_WHITESPACE","\n  ",237],["T_PUBLIC","public",238],["T_WHITESPACE"," ",238],["T_FUNCTION","function",238],["T_WHITESPACE"," ",238],["T_STRING","getFormDisplay",238],"(",["T_STRING","FormStateInterface",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$form_state",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n    ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$form_state",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","get",239],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display'",239],")",";",["T_WHITESPACE","\n  ",239],"}",["T_WHITESPACE","\n\n  ",240],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",242],["T_WHITESPACE","\n  ",244],["T_PUBLIC","public",245],["T_WHITESPACE"," ",245],["T_FUNCTION","function",245],["T_WHITESPACE"," ",245],["T_STRING","setFormDisplay",245],"(",["T_STRING","EntityFormDisplayInterface",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$form_display",245],",",["T_WHITESPACE"," ",245],["T_STRING","FormStateInterface",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$form_state",245],")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$form_state",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","set",246],"(",["T_CONSTANT_ENCAPSED_STRING","'form_display'",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$form_display",246],")",";",["T_WHITESPACE","\n    ",246],["T_RETURN","return",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$this",247],";",["T_WHITESPACE","\n  ",247],"}",["T_WHITESPACE","\n\n  ",248],["T_DOC_COMMENT","\/**\n   * Updates the form language to reflect any change to the entity language.\n   *\n   * There are use cases for modules to act both before and after form language\n   * being updated, thus the update is performed through an entity builder\n   * callback, which allows to support both cases.\n   *\n   * @param string $entity_type_id\n   *   The entity type identifier.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity updated with the submitted values.\n   * @param array $form\n   *   The complete form array.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\n   * @see \\Drupal\\Core\\Entity\\ContentEntityForm::form()\n   *\/",250],["T_WHITESPACE","\n  ",267],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","updateFormLangcode",268],"(",["T_VARIABLE","$entity_type_id",268],",",["T_WHITESPACE"," ",268],["T_STRING","EntityInterface",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$entity",268],",",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$form",268],",",["T_WHITESPACE"," ",268],["T_STRING","FormStateInterface",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$form_state",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n    ",268],["T_COMMENT","\/\/ Update the form language as it might have changed.\n",269],["T_WHITESPACE","    ",270],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","isDefaultFormLangcode",270],"(",["T_VARIABLE","$form_state",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n      ",270],["T_VARIABLE","$langcode",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$entity",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","language",271],"(",")",["T_OBJECT_OPERATOR","->",271],["T_STRING","getId",271],"(",")",";",["T_WHITESPACE","\n      ",271],["T_VARIABLE","$form_state",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","set",272],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$langcode",272],")",";",["T_WHITESPACE","\n    ",272],"}",["T_WHITESPACE","\n  ",273],"}",["T_WHITESPACE","\n\n  ",274],["T_DOC_COMMENT","\/**\n   * Updates the changed time of the entity.\n   *\n   * Applies only if the entity implements the EntityChangedInterface.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity updated with the submitted values.\n   *\/",276],["T_WHITESPACE","\n  ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","updateChangedTime",284],"(",["T_STRING","EntityInterface",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$entity",284],")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n    ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$entity",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","getEntityType",285],"(",")",["T_OBJECT_OPERATOR","->",285],["T_STRING","isSubclassOf",285],"(",["T_STRING","EntityChangedInterface",285],["T_DOUBLE_COLON","::",285],["T_CLASS","class",285],")",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n      ",285],["T_VARIABLE","$entity",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","setChangedTime",286],"(",["T_STRING","REQUEST_TIME",286],")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n  ",287],"}",["T_WHITESPACE","\n\n",288],"}",["T_WHITESPACE","\n",290]]
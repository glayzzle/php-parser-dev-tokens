[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityReferenceSelection",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FallbackPluginManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldDefinitionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Extension",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModuleHandlerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DefaultPluginManager",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Plugin type manager for Entity Reference Selection plugins.\n *\n * @see \\Drupal\\Core\\Entity\\Annotation\\EntityReferenceSelection\n * @see \\Drupal\\Core\\Entity\\EntityReferenceSelection\\SelectionInterface\n * @see plugin_api\n *\/",12],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","SelectionPluginManager",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","DefaultPluginManager",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","SelectionPluginManagerInterface",19],",",["T_WHITESPACE"," ",19],["T_STRING","FallbackPluginManagerInterface",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","__construct",24],"(",["T_NS_SEPARATOR","\\",24],["T_STRING","Traversable",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$namespaces",24],",",["T_WHITESPACE"," ",24],["T_STRING","CacheBackendInterface",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$cache_backend",24],",",["T_WHITESPACE"," ",24],["T_STRING","ModuleHandlerInterface",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$module_handler",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","alterInfo",25],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference_selection'",25],")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","setCacheBackend",26],"(",["T_VARIABLE","$cache_backend",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'entity_reference_selection_plugins'",26],")",";",["T_WHITESPACE","\n\n    ",26],["T_STRING","parent",28],["T_DOUBLE_COLON","::",28],["T_STRING","__construct",28],"(",["T_CONSTANT_ENCAPSED_STRING","'Plugin\/EntityReferenceSelection'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$namespaces",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$module_handler",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\EntityReferenceSelection\\SelectionInterface'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\Annotation\\EntityReferenceSelection'",28],")",";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","getInstance",34],"(",["T_ARRAY","array",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$options",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(","!",["T_ISSET","isset",35],"(",["T_VARIABLE","$options",35],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",35],"]",")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_THROW","throw",36],["T_WHITESPACE"," ",36],["T_NEW","new",36],["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","InvalidArgumentException",36],"(",["T_CONSTANT_ENCAPSED_STRING","\"Missing required 'target_type' property for a EntityReferenceSelection plugin.\"",36],")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Initialize default options.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$options",40],["T_WHITESPACE"," ",40],["T_PLUS_EQUAL","+=",40],["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'handler'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","getPluginId",41],"(",["T_VARIABLE","$options",41],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",41],"]",",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'default'",41],")",",",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",",",["T_WHITESPACE","\n    ",42],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ A specific selection plugin ID was already specified.\n",45],["T_WHITESPACE","    ",46],["T_IF","if",46],["T_WHITESPACE"," ",46],"(",["T_STRING","strpos",46],"(",["T_VARIABLE","$options",46],"[",["T_CONSTANT_ENCAPSED_STRING","'handler'",46],"]",",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","':'",46],")",["T_WHITESPACE"," ",46],["T_IS_NOT_IDENTICAL","!==",46],["T_WHITESPACE"," ",46],["T_STRING","FALSE",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n      ",46],["T_VARIABLE","$plugin_id",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$options",47],"[",["T_CONSTANT_ENCAPSED_STRING","'handler'",47],"]",";",["T_WHITESPACE","\n    ",47],"}",["T_WHITESPACE","\n    ",48],["T_COMMENT","\/\/ Only a selection group name was specified.\n",49],["T_WHITESPACE","    ",50],["T_ELSE","else",50],["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$plugin_id",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getPluginId",51],"(",["T_VARIABLE","$options",51],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",51],"]",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$options",51],"[",["T_CONSTANT_ENCAPSED_STRING","'handler'",51],"]",")",";",["T_WHITESPACE","\n    ",51],"}",["T_WHITESPACE","\n\n    ",52],["T_RETURN","return",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","createInstance",54],"(",["T_VARIABLE","$plugin_id",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$options",54],")",";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","getPluginId",60],"(",["T_VARIABLE","$target_type",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$base_plugin_id",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_COMMENT","\/\/ Get all available selection plugins for this entity type.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$selection_handler_groups",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getSelectionGroups",62],"(",["T_VARIABLE","$target_type",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Sort the selection plugins by weight and select the best match.\n",64],["T_WHITESPACE","    ",65],["T_STRING","uasort",65],"(",["T_VARIABLE","$selection_handler_groups",65],"[",["T_VARIABLE","$base_plugin_id",65],"]",",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Component\\Utility\\SortArray'",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'sortByWeightElement'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_STRING","end",66],"(",["T_VARIABLE","$selection_handler_groups",66],"[",["T_VARIABLE","$base_plugin_id",66],"]",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$plugin_id",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","key",67],"(",["T_VARIABLE","$selection_handler_groups",67],"[",["T_VARIABLE","$base_plugin_id",67],"]",")",";",["T_WHITESPACE","\n\n    ",67],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$plugin_id",69],";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","getSelectionGroups",75],"(",["T_VARIABLE","$entity_type_id",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$plugins",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$definitions",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getDefinitions",77],"(",")",";",["T_WHITESPACE","\n\n    ",77],["T_COMMENT","\/\/ Do not display the 'broken' plugin in the UI.\n",79],["T_WHITESPACE","    ",80],["T_UNSET","unset",80],"(",["T_VARIABLE","$definitions",80],"[",["T_CONSTANT_ENCAPSED_STRING","'broken'",80],"]",")",";",["T_WHITESPACE","\n\n    ",80],["T_FOREACH","foreach",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$definitions",82],["T_WHITESPACE"," ",82],["T_AS","as",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$plugin_id",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$plugin",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_EMPTY","empty",83],"(",["T_VARIABLE","$plugin",83],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",83],"]",")",["T_WHITESPACE"," ",83],["T_BOOLEAN_OR","||",83],["T_WHITESPACE"," ",83],["T_STRING","in_array",83],"(",["T_VARIABLE","$entity_type_id",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$plugin",83],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",83],"]",")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n        ",83],["T_VARIABLE","$plugins",84],"[",["T_VARIABLE","$plugin",84],"[",["T_CONSTANT_ENCAPSED_STRING","'group'",84],"]","]","[",["T_VARIABLE","$plugin_id",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$plugin",84],";",["T_WHITESPACE","\n      ",84],"}",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n\n    ",86],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$plugins",88],";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",91],["T_WHITESPACE","\n  ",93],["T_PUBLIC","public",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","getSelectionHandler",94],"(",["T_STRING","FieldDefinitionInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$field_definition",94],",",["T_WHITESPACE"," ",94],["T_STRING","EntityInterface",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$entity",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","NULL",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$options",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_WHITESPACE","\n      ",95],["T_CONSTANT_ENCAPSED_STRING","'target_type'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$field_definition",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getFieldStorageDefinition",96],"(",")",["T_OBJECT_OPERATOR","->",96],["T_STRING","getSetting",96],"(",["T_CONSTANT_ENCAPSED_STRING","'target_type'",96],")",",",["T_WHITESPACE","\n      ",96],["T_CONSTANT_ENCAPSED_STRING","'handler'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$field_definition",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getSetting",97],"(",["T_CONSTANT_ENCAPSED_STRING","'handler'",97],")",",",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$field_definition",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getSetting",98],"(",["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",98],")",["T_WHITESPACE"," ",98],"?",":",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'entity'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$entity",99],",",["T_WHITESPACE","\n    ",99],")",";",["T_WHITESPACE","\n    ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getInstance",101],"(",["T_VARIABLE","$options",101],")",";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getFallbackPluginId",107],"(",["T_VARIABLE","$plugin_id",107],",",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$configuration",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'broken'",108],";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n",109],"}",["T_WHITESPACE","\n",111]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityReferenceSelection",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Defines an alternative to the default Entity Reference Selection plugin.\n *\n * This selection plugin uses PHP for more advanced cases when the entity query\n * cannot filter properly, for example when the target entity type has no\n * 'label' key provided in the entity type plugin definition.\n *\n * @see \\Drupal\\Core\\Entity\\Plugin\\Derivative\\DefaultSelectionDeriver\n *\/",8],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","PhpSelection",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","DefaultSelection",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","getReferenceableEntities",22],"(",["T_VARIABLE","$match",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_STRING","NULL",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$match_operator",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",22],",",["T_WHITESPACE"," ",22],["T_VARIABLE","$limit",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_LNUMBER","0",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_COMMENT","\/\/ No input, return everything from the entity query.\n",23],["T_WHITESPACE","    ",24],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$match",24],["T_WHITESPACE"," ",24],["T_IS_IDENTICAL","===",24],["T_WHITESPACE"," ",24],["T_STRING","NULL",24],["T_WHITESPACE"," ",24],["T_BOOLEAN_OR","||",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$match",24],["T_WHITESPACE"," ",24],["T_IS_IDENTICAL","===",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","''",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_RETURN","return",25],["T_WHITESPACE"," ",25],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","getReferenceableEntities",25],"(",["T_VARIABLE","$match",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$match_operator",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$limit",25],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ Start with the selection results returned by the entity query. Don't use\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/ any limit because we have to apply a limit after filtering the items.\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$options",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","getReferenceableEntities",30],"(",["T_VARIABLE","$match",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$match_operator",30],")",";",["T_WHITESPACE","\n\n    ",30],["T_COMMENT","\/\/ Always use a case-insensitive, escaped match. Entity labels returned by\n",32],["T_WHITESPACE","    ",33],["T_COMMENT","\/\/ SelectionInterface::getReferenceableEntities() are already escaped, so\n",33],["T_WHITESPACE","    ",34],["T_COMMENT","\/\/ the incoming $match needs to be escaped as well, making the comparison\n",34],["T_WHITESPACE","    ",35],["T_COMMENT","\/\/ possible.\n",35],["T_WHITESPACE","    ",36],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Entity\\EntityReferenceSelection\\SelectionInterface::getReferenceableEntities()\n",36],["T_WHITESPACE","    ",37],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_STRING","is_string",37],"(",["T_VARIABLE","$match",37],")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n      ",37],["T_VARIABLE","$match",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","Html",38],["T_DOUBLE_COLON","::",38],["T_STRING","escape",38],"(",["T_STRING","Unicode",38],["T_DOUBLE_COLON","::",38],["T_STRING","strtolower",38],"(",["T_VARIABLE","$match",38],")",")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n    ",39],["T_ELSEIF","elseif",40],["T_WHITESPACE"," ",40],"(",["T_STRING","is_array",40],"(",["T_VARIABLE","$match",40],")",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n      ",40],["T_STRING","array_walk",41],"(",["T_VARIABLE","$match",41],",",["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],"(","&",["T_VARIABLE","$item",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$item",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","Html",42],["T_DOUBLE_COLON","::",42],["T_STRING","escape",42],"(",["T_STRING","Unicode",42],["T_DOUBLE_COLON","::",42],["T_STRING","strtolower",42],"(",["T_VARIABLE","$item",42],")",")",";",["T_WHITESPACE","\n      ",42],"}",")",";",["T_WHITESPACE","\n    ",43],"}",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$filtered",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[","]",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$count",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","0",47],";",["T_WHITESPACE","\n    ",47],["T_COMMENT","\/\/ Filter target entities by the output of their label() method.\n",48],["T_WHITESPACE","    ",49],["T_FOREACH","foreach",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$options",49],["T_WHITESPACE"," ",49],["T_AS","as",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$bundle",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],"&",["T_VARIABLE","$items",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$items",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$entity_id",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$label",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n        ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","matchLabel",51],"(",["T_VARIABLE","$match",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$match_operator",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$label",51],")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n          ",51],["T_VARIABLE","$filtered",52],"[",["T_VARIABLE","$bundle",52],"]","[",["T_VARIABLE","$entity_id",52],"]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$label",52],";",["T_WHITESPACE","\n          ",52],["T_VARIABLE","$count",53],["T_INC","++",53],";",["T_WHITESPACE","\n\n          ",53],["T_IF","if",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$limit",55],["T_WHITESPACE"," ",55],["T_BOOLEAN_AND","&&",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$count",55],["T_WHITESPACE"," ",55],["T_IS_GREATER_OR_EQUAL",">=",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$limit",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n            ",55],["T_BREAK","break",56],["T_WHITESPACE"," ",56],["T_LNUMBER","2",56],";",["T_WHITESPACE","\n          ",56],"}",["T_WHITESPACE","\n        ",57],"}",["T_WHITESPACE","\n      ",58],"}",["T_WHITESPACE","\n    ",59],"}",["T_WHITESPACE","\n\n    ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$filtered",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","countReferenceableEntities",68],"(",["T_VARIABLE","$match",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","NULL",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$match_operator",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$count",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_LNUMBER","0",69],";",["T_WHITESPACE","\n    ",69],["T_FOREACH","foreach",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getReferenceableEntities",70],"(",["T_VARIABLE","$match",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$match_operator",70],")",["T_WHITESPACE"," ",70],["T_AS","as",70],["T_WHITESPACE"," ",70],"&",["T_VARIABLE","$items",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$count",71],["T_WHITESPACE"," ",71],["T_PLUS_EQUAL","+=",71],["T_WHITESPACE"," ",71],["T_STRING","count",71],"(",["T_VARIABLE","$items",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$count",74],";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Matches an entity label to an input string.\n   *\n   * @param mixed $match\n   *   The value to compare. This can be any valid entity query condition value.\n   * @param string $match_operator\n   *   The comparison operator.\n   * @param string $label\n   *   The entity label to match against.\n   *\n   * @return bool\n   *   TRUE when matches, FALSE otherwise.\n   *\/",77],["T_WHITESPACE","\n  ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","matchLabel",90],"(",["T_VARIABLE","$match",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$match_operator",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$label",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_COMMENT","\/\/ Always use a case-insensitive value.\n",91],["T_WHITESPACE","    ",92],["T_VARIABLE","$label",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","Unicode",92],["T_DOUBLE_COLON","::",92],["T_STRING","strtolower",92],"(",["T_VARIABLE","$label",92],")",";",["T_WHITESPACE","\n\n    ",92],["T_SWITCH","switch",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$match_operator",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_CASE","case",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'='",95],":",["T_WHITESPACE","\n        ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$label",96],["T_WHITESPACE"," ",96],["T_IS_EQUAL","==",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$match",96],";",["T_WHITESPACE","\n      ",96],["T_CASE","case",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'>'",97],":",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$label",98],["T_WHITESPACE"," ",98],">",["T_WHITESPACE"," ",98],["T_VARIABLE","$match",98],";",["T_WHITESPACE","\n      ",98],["T_CASE","case",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'<'",99],":",["T_WHITESPACE","\n        ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$label",100],["T_WHITESPACE"," ",100],"<",["T_WHITESPACE"," ",100],["T_VARIABLE","$match",100],";",["T_WHITESPACE","\n      ",100],["T_CASE","case",101],["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'>='",101],":",["T_WHITESPACE","\n        ",101],["T_RETURN","return",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$label",102],["T_WHITESPACE"," ",102],["T_IS_GREATER_OR_EQUAL",">=",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$match",102],";",["T_WHITESPACE","\n      ",102],["T_CASE","case",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'<='",103],":",["T_WHITESPACE","\n        ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$label",104],["T_WHITESPACE"," ",104],["T_IS_SMALLER_OR_EQUAL","<=",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$match",104],";",["T_WHITESPACE","\n      ",104],["T_CASE","case",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'<>'",105],":",["T_WHITESPACE","\n        ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$label",106],["T_WHITESPACE"," ",106],["T_IS_NOT_EQUAL","!=",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$match",106],";",["T_WHITESPACE","\n      ",106],["T_CASE","case",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'IN'",107],":",["T_WHITESPACE","\n        ",107],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_STRING","array_search",108],"(",["T_VARIABLE","$label",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$match",108],")",["T_WHITESPACE"," ",108],["T_IS_NOT_IDENTICAL","!==",108],["T_WHITESPACE"," ",108],["T_STRING","FALSE",108],";",["T_WHITESPACE","\n      ",108],["T_CASE","case",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'NOT IN'",109],":",["T_WHITESPACE","\n        ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_STRING","array_search",110],"(",["T_VARIABLE","$label",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$match",110],")",["T_WHITESPACE"," ",110],["T_IS_IDENTICAL","===",110],["T_WHITESPACE"," ",110],["T_STRING","FALSE",110],";",["T_WHITESPACE","\n      ",110],["T_CASE","case",111],["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'STARTS_WITH'",111],":",["T_WHITESPACE","\n        ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_STRING","strpos",112],"(",["T_VARIABLE","$label",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$match",112],")",["T_WHITESPACE"," ",112],["T_IS_IDENTICAL","===",112],["T_WHITESPACE"," ",112],["T_LNUMBER","0",112],";",["T_WHITESPACE","\n      ",112],["T_CASE","case",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",113],":",["T_WHITESPACE","\n        ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_STRING","strpos",114],"(",["T_VARIABLE","$label",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$match",114],")",["T_WHITESPACE"," ",114],["T_IS_NOT_IDENTICAL","!==",114],["T_WHITESPACE"," ",114],["T_STRING","FALSE",114],";",["T_WHITESPACE","\n      ",114],["T_CASE","case",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'ENDS_WITH'",115],":",["T_WHITESPACE","\n        ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","Unicode",116],["T_DOUBLE_COLON","::",116],["T_STRING","substr",116],"(",["T_VARIABLE","$label",116],",",["T_WHITESPACE"," ",116],"-",["T_STRING","Unicode",116],["T_DOUBLE_COLON","::",116],["T_STRING","strlen",116],"(",["T_VARIABLE","$match",116],")",")",["T_WHITESPACE"," ",116],["T_IS_IDENTICAL","===",116],["T_WHITESPACE"," ",116],["T_STRING_CAST","(string)",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$match",116],";",["T_WHITESPACE","\n      ",116],["T_CASE","case",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'IS NOT NULL'",117],":",["T_WHITESPACE","\n        ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_STRING","TRUE",118],";",["T_WHITESPACE","\n      ",118],["T_CASE","case",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'IS NULL'",119],":",["T_WHITESPACE","\n        ",119],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_STRING","FALSE",120],";",["T_WHITESPACE","\n      ",120],["T_DEFAULT","default",121],":",["T_WHITESPACE","\n        ",121],["T_COMMENT","\/\/ Invalid match operator.\n",122],["T_WHITESPACE","        ",123],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_STRING","FALSE",123],";",["T_WHITESPACE","\n    ",123],"}",["T_WHITESPACE","\n  ",124],"}",["T_WHITESPACE","\n\n",125],"}",["T_WHITESPACE","\n",127]]
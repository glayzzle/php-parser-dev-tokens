[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Symfony",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EventDispatcher",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EventDispatcherInterface",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Reacts to entity type CRUD on behalf of the Entity system.\n *\n * @see \\Drupal\\Core\\Entity\\EntityTypeEvents\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","EntityTypeListener",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","EntityTypeListenerInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$entityTypeManager",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The entity field manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityFieldManagerInterface\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$entityFieldManager",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The event dispatcher.\n   *\n   * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$eventDispatcher",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The entity last installed schema repository.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityLastInstalledSchemaRepositoryInterface\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$entityLastInstalledSchemaRepository",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityTypeListener.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeManagerInterface $entity_type_manager\n   *   The entity type manager.\n   * @param \\Drupal\\Core\\Entity\\EntityFieldManagerInterface $entity_field_manager\n   *   The entity field manager.\n   * @param \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface $event_dispatcher\n   *   The event dispatcher.\n   * @param \\Drupal\\Core\\Entity\\EntityLastInstalledSchemaRepositoryInterface $entity_last_installed_schema_repository\n   *   The entity last installed schema repository.\n   *\/",42],["T_WHITESPACE","\n  ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","__construct",54],"(",["T_STRING","EntityTypeManagerInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$entity_type_manager",54],",",["T_WHITESPACE"," ",54],["T_STRING","EntityFieldManagerInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$entity_field_manager",54],",",["T_WHITESPACE"," ",54],["T_STRING","EventDispatcherInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$event_dispatcher",54],",",["T_WHITESPACE"," ",54],["T_STRING","EntityLastInstalledSchemaRepositoryInterface",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$entity_last_installed_schema_repository",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","entityTypeManager",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$entity_type_manager",55],";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","entityFieldManager",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$entity_field_manager",56],";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","eventDispatcher",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$event_dispatcher",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","entityLastInstalledSchemaRepository",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$entity_last_installed_schema_repository",58],";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",61],["T_WHITESPACE","\n  ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","onEntityTypeCreate",64],"(",["T_STRING","EntityTypeInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity_type",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$entity_type_id",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$entity_type",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","id",65],"(",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ @todo Forward this to all interested handlers, not only storage, once\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/   iterating handlers is possible: https:\/\/www.drupal.org\/node\/2332857.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$storage",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","entityTypeManager",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getStorage",69],"(",["T_VARIABLE","$entity_type_id",69],")",";",["T_WHITESPACE","\n    ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$storage",70],["T_WHITESPACE"," ",70],["T_INSTANCEOF","instanceof",70],["T_WHITESPACE"," ",70],["T_STRING","EntityTypeListenerInterface",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$storage",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","onEntityTypeCreate",71],"(",["T_VARIABLE","$entity_type",71],")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","eventDispatcher",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","dispatch",74],"(",["T_STRING","EntityTypeEvents",74],["T_DOUBLE_COLON","::",74],["T_STRING","CREATE",74],",",["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","EntityTypeEvent",74],"(",["T_VARIABLE","$entity_type",74],")",")",";",["T_WHITESPACE","\n\n    ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","entityLastInstalledSchemaRepository",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","setLastInstalledDefinition",76],"(",["T_VARIABLE","$entity_type",76],")",";",["T_WHITESPACE","\n    ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$entity_type",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","isSubclassOf",77],"(",["T_STRING","FieldableEntityInterface",77],["T_DOUBLE_COLON","::",77],["T_CLASS","class",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","entityLastInstalledSchemaRepository",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setLastInstalledFieldStorageDefinitions",78],"(",["T_VARIABLE","$entity_type_id",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","entityFieldManager",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getFieldStorageDefinitions",78],"(",["T_VARIABLE","$entity_type_id",78],")",")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","onEntityTypeUpdate",85],"(",["T_STRING","EntityTypeInterface",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$entity_type",85],",",["T_WHITESPACE"," ",85],["T_STRING","EntityTypeInterface",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$original",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$entity_type_id",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$entity_type",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","id",86],"(",")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ @todo Forward this to all interested handlers, not only storage, once\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/   iterating handlers is possible: https:\/\/www.drupal.org\/node\/2332857.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$storage",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","entityTypeManager",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getStorage",90],"(",["T_VARIABLE","$entity_type_id",90],")",";",["T_WHITESPACE","\n    ",90],["T_IF","if",91],["T_WHITESPACE"," ",91],"(",["T_VARIABLE","$storage",91],["T_WHITESPACE"," ",91],["T_INSTANCEOF","instanceof",91],["T_WHITESPACE"," ",91],["T_STRING","EntityTypeListenerInterface",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$storage",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","onEntityTypeUpdate",92],"(",["T_VARIABLE","$entity_type",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$original",92],")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n\n    ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","eventDispatcher",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","dispatch",95],"(",["T_STRING","EntityTypeEvents",95],["T_DOUBLE_COLON","::",95],["T_STRING","UPDATE",95],",",["T_WHITESPACE"," ",95],["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","EntityTypeEvent",95],"(",["T_VARIABLE","$entity_type",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$original",95],")",")",";",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","entityLastInstalledSchemaRepository",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","setLastInstalledDefinition",97],"(",["T_VARIABLE","$entity_type",97],")",";",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n  ",98],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",100],["T_WHITESPACE","\n  ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","onEntityTypeDelete",103],"(",["T_STRING","EntityTypeInterface",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$entity_type",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$entity_type_id",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$entity_type",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","id",104],"(",")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ @todo Forward this to all interested handlers, not only storage, once\n",106],["T_WHITESPACE","    ",107],["T_COMMENT","\/\/   iterating handlers is possible: https:\/\/www.drupal.org\/node\/2332857.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$storage",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","entityTypeManager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getStorage",108],"(",["T_VARIABLE","$entity_type_id",108],")",";",["T_WHITESPACE","\n    ",108],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$storage",109],["T_WHITESPACE"," ",109],["T_INSTANCEOF","instanceof",109],["T_WHITESPACE"," ",109],["T_STRING","EntityTypeListenerInterface",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$storage",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","onEntityTypeDelete",110],"(",["T_VARIABLE","$entity_type",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n\n    ",111],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","eventDispatcher",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","dispatch",113],"(",["T_STRING","EntityTypeEvents",113],["T_DOUBLE_COLON","::",113],["T_STRING","DELETE",113],",",["T_WHITESPACE"," ",113],["T_NEW","new",113],["T_WHITESPACE"," ",113],["T_STRING","EntityTypeEvent",113],"(",["T_VARIABLE","$entity_type",113],")",")",";",["T_WHITESPACE","\n\n    ",113],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","entityLastInstalledSchemaRepository",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","deleteLastInstalledDefinition",115],"(",["T_VARIABLE","$entity_type_id",115],")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n",116],"}",["T_WHITESPACE","\n",118]]
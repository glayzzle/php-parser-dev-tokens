[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Field",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldDefinitionInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldStorageDefinitionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","DependencyInjection",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ContainerInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Base class for content entity storage handlers.\n *\/",11],["T_WHITESPACE","\n",13],["T_ABSTRACT","abstract",14],["T_WHITESPACE"," ",14],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ContentEntityStorageBase",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","EntityStorageBase",14],["T_WHITESPACE"," ",14],["T_IMPLEMENTS","implements",14],["T_WHITESPACE"," ",14],["T_STRING","ContentEntityStorageInterface",14],",",["T_WHITESPACE"," ",14],["T_STRING","DynamicallyFieldableEntityStorageInterface",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * The entity bundle key.\n   *\n   * @var string|bool\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$bundleKey",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_STRING","FALSE",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$entityManager",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Cache backend.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$cacheBackend",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * Constructs a ContentEntityStorageBase object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type definition.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *   The cache backend to be used.\n   *\/",37],["T_WHITESPACE","\n  ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","__construct",47],"(",["T_STRING","EntityTypeInterface",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$entity_type",47],",",["T_WHITESPACE"," ",47],["T_STRING","EntityManagerInterface",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$entity_manager",47],",",["T_WHITESPACE"," ",47],["T_STRING","CacheBackendInterface",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$cache",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_STRING","parent",48],["T_DOUBLE_COLON","::",48],["T_STRING","__construct",48],"(",["T_VARIABLE","$entity_type",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","bundleKey",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","entityType",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getKey",49],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","entityManager",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$entity_manager",50],";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","cacheBackend",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$cache",51],";",["T_WHITESPACE","\n  ",51],"}",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",54],["T_WHITESPACE","\n  ",56],["T_PUBLIC","public",57],["T_WHITESPACE"," ",57],["T_STATIC","static",57],["T_WHITESPACE"," ",57],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","createInstance",57],"(",["T_STRING","ContainerInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$container",57],",",["T_WHITESPACE"," ",57],["T_STRING","EntityTypeInterface",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$entity_type",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n    ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_NEW","new",58],["T_WHITESPACE"," ",58],["T_STATIC","static",58],"(",["T_WHITESPACE","\n      ",58],["T_VARIABLE","$entity_type",59],",",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$container",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",60],")",",",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$container",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'cache.entity'",61],")",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","hasData",68],"(",")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_BOOL_CAST","(bool)",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getQuery",69],"(",")",["T_WHITESPACE","\n      ",69],["T_OBJECT_OPERATOR","->",70],["T_STRING","accessCheck",70],"(",["T_STRING","FALSE",70],")",["T_WHITESPACE","\n      ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","range",71],"(",["T_LNUMBER","0",71],",",["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],")",["T_WHITESPACE","\n      ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","execute",72],"(",")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",75],["T_WHITESPACE","\n  ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_FUNCTION","function",78],["T_WHITESPACE"," ",78],["T_STRING","doCreate",78],"(",["T_ARRAY","array",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$values",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n    ",78],["T_COMMENT","\/\/ We have to determine the bundle first.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$bundle",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","FALSE",80],";",["T_WHITESPACE","\n    ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","bundleKey",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(","!",["T_ISSET","isset",82],"(",["T_VARIABLE","$values",82],"[",["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","bundleKey",82],"]",")",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_THROW","throw",83],["T_WHITESPACE"," ",83],["T_NEW","new",83],["T_WHITESPACE"," ",83],["T_STRING","EntityStorageException",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Missing bundle for entity type '",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","entityTypeId",83],")",";",["T_WHITESPACE","\n      ",83],"}",["T_WHITESPACE","\n      ",84],["T_VARIABLE","$bundle",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$values",85],"[",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","bundleKey",85],"]",";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$entity",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_NEW","new",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","entityClass",87],"(",["T_ARRAY","array",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","entityTypeId",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$bundle",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","initFieldValues",88],"(",["T_VARIABLE","$entity",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$values",88],")",";",["T_WHITESPACE","\n    ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$entity",89],";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Initializes field values.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   An entity object.\n   * @param array $values\n   *   (optional) An associative array of initial field values keyed by field\n   *   name. If none is provided default values will be applied.\n   * @param array $field_names\n   *   (optional) An associative array of field names to be initialized. If none\n   *   is provided all fields will be initialized.\n   *\/",92],["T_WHITESPACE","\n  ",103],["T_PROTECTED","protected",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","initFieldValues",104],"(",["T_STRING","ContentEntityInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$entity",104],",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$values",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[","]",",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$field_names",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[","]",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_COMMENT","\/\/ Populate field values.\n",105],["T_WHITESPACE","    ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$entity",106],["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$name",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$field",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(","!",["T_VARIABLE","$field_names",107],["T_WHITESPACE"," ",107],["T_BOOLEAN_OR","||",107],["T_WHITESPACE"," ",107],["T_ISSET","isset",107],"(",["T_VARIABLE","$field_names",107],"[",["T_VARIABLE","$name",107],"]",")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n        ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_ISSET","isset",108],"(",["T_VARIABLE","$values",108],"[",["T_VARIABLE","$name",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n          ",108],["T_VARIABLE","$entity",109],["T_OBJECT_OPERATOR","->",109],["T_VARIABLE","$name",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$values",109],"[",["T_VARIABLE","$name",109],"]",";",["T_WHITESPACE","\n        ",109],"}",["T_WHITESPACE","\n        ",110],["T_ELSEIF","elseif",111],["T_WHITESPACE"," ",111],"(","!",["T_STRING","array_key_exists",111],"(",["T_VARIABLE","$name",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$values",111],")",")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n          ",111],["T_VARIABLE","$entity",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","get",112],"(",["T_VARIABLE","$name",112],")",["T_OBJECT_OPERATOR","->",112],["T_STRING","applyDefaultValue",112],"(",")",";",["T_WHITESPACE","\n        ",112],"}",["T_WHITESPACE","\n      ",113],"}",["T_WHITESPACE","\n      ",114],["T_UNSET","unset",115],"(",["T_VARIABLE","$values",115],"[",["T_VARIABLE","$name",115],"]",")",";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_COMMENT","\/\/ Set any passed values for non-defined fields also.\n",118],["T_WHITESPACE","    ",119],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$values",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$name",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$value",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$entity",120],["T_OBJECT_OPERATOR","->",120],["T_VARIABLE","$name",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$value",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Make sure modules can alter field initial values.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","invokeHook",124],"(",["T_CONSTANT_ENCAPSED_STRING","'field_values_init'",124],",",["T_WHITESPACE"," ",124],["T_VARIABLE","$entity",124],")",";",["T_WHITESPACE","\n  ",124],"}",["T_WHITESPACE","\n\n  ",125],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",127],["T_WHITESPACE","\n  ",129],["T_PUBLIC","public",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","createTranslation",130],"(",["T_STRING","ContentEntityInterface",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$entity",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$langcode",130],",",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$values",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],"[","]",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$translation",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$entity",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getTranslation",131],"(",["T_VARIABLE","$langcode",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$definitions",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","array_filter",132],"(",["T_VARIABLE","$translation",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getFieldDefinitions",132],"(",")",",",["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],"(",["T_STRING","FieldDefinitionInterface",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$definition",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE"," ",132],["T_RETURN","return",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$definition",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isTranslatable",132],"(",")",";",["T_WHITESPACE"," ",132],"}",")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$field_names",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","array_map",133],"(",["T_FUNCTION","function",133],"(",["T_STRING","FieldDefinitionInterface",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$definition",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE"," ",133],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$definition",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getName",133],"(",")",";",["T_WHITESPACE"," ",133],"}",",",["T_WHITESPACE"," ",133],["T_VARIABLE","$definitions",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$values",134],"[",["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","langcodeKey",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$langcode",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$values",135],"[",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getEntityType",135],"(",")",["T_OBJECT_OPERATOR","->",135],["T_STRING","getKey",135],"(",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",135],")","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","FALSE",135],";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","initFieldValues",136],"(",["T_VARIABLE","$translation",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$values",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$field_names",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","invokeHook",137],"(",["T_CONSTANT_ENCAPSED_STRING","'translation_create'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$translation",137],")",";",["T_WHITESPACE","\n    ",137],["T_RETURN","return",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$translation",138],";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",141],["T_WHITESPACE","\n  ",143],["T_PUBLIC","public",144],["T_WHITESPACE"," ",144],["T_FUNCTION","function",144],["T_WHITESPACE"," ",144],["T_STRING","onFieldStorageDefinitionCreate",144],"(",["T_STRING","FieldStorageDefinitionInterface",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$storage_definition",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE"," ",144],"}",["T_WHITESPACE","\n\n  ",144],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",146],["T_WHITESPACE","\n  ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","onFieldStorageDefinitionUpdate",149],"(",["T_STRING","FieldStorageDefinitionInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$storage_definition",149],",",["T_WHITESPACE"," ",149],["T_STRING","FieldStorageDefinitionInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$original",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE"," ",149],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",151],["T_WHITESPACE","\n  ",153],["T_PUBLIC","public",154],["T_WHITESPACE"," ",154],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","onFieldStorageDefinitionDelete",154],"(",["T_STRING","FieldStorageDefinitionInterface",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$storage_definition",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE"," ",154],"}",["T_WHITESPACE","\n\n  ",154],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",156],["T_WHITESPACE","\n  ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","onFieldDefinitionCreate",159],"(",["T_STRING","FieldDefinitionInterface",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$field_definition",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE"," ",159],"}",["T_WHITESPACE","\n\n  ",159],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",161],["T_WHITESPACE","\n  ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","onFieldDefinitionUpdate",164],"(",["T_STRING","FieldDefinitionInterface",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$field_definition",164],",",["T_WHITESPACE"," ",164],["T_STRING","FieldDefinitionInterface",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$original",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE"," ",164],"}",["T_WHITESPACE","\n\n  ",164],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",166],["T_WHITESPACE","\n  ",168],["T_PUBLIC","public",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","onFieldDefinitionDelete",169],"(",["T_STRING","FieldDefinitionInterface",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$field_definition",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE"," ",169],"}",["T_WHITESPACE","\n\n  ",169],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",171],["T_WHITESPACE","\n  ",173],["T_PUBLIC","public",174],["T_WHITESPACE"," ",174],["T_FUNCTION","function",174],["T_WHITESPACE"," ",174],["T_STRING","purgeFieldData",174],"(",["T_STRING","FieldDefinitionInterface",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$field_definition",174],",",["T_WHITESPACE"," ",174],["T_VARIABLE","$batch_size",174],")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$items_by_entity",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","readFieldItemsToPurge",175],"(",["T_VARIABLE","$field_definition",175],",",["T_WHITESPACE"," ",175],["T_VARIABLE","$batch_size",175],")",";",["T_WHITESPACE","\n\n    ",175],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$items_by_entity",177],["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$items",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n      ",177],["T_VARIABLE","$items",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","delete",178],"(",")",";",["T_WHITESPACE","\n      ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","purgeFieldItems",179],"(",["T_VARIABLE","$items",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getEntity",179],"(",")",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$field_definition",179],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n    ",180],["T_RETURN","return",181],["T_WHITESPACE"," ",181],["T_STRING","count",181],"(",["T_VARIABLE","$items_by_entity",181],")",";",["T_WHITESPACE","\n  ",181],"}",["T_WHITESPACE","\n\n  ",182],["T_DOC_COMMENT","\/**\n   * Reads values to be purged for a single field.\n   *\n   * This method is called during field data purge, on fields for which\n   * onFieldDefinitionDelete() has previously run.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldDefinitionInterface $field_definition\n   *   The field definition.\n   * @param $batch_size\n   *   The maximum number of field data records to purge before returning.\n   *\n   * @return \\Drupal\\Core\\Field\\FieldItemListInterface[]\n   *   An array of field item lists, keyed by entity revision id.\n   *\/",184],["T_WHITESPACE","\n  ",197],["T_ABSTRACT","abstract",198],["T_WHITESPACE"," ",198],["T_PROTECTED","protected",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","readFieldItemsToPurge",198],"(",["T_STRING","FieldDefinitionInterface",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$field_definition",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$batch_size",198],")",";",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Removes field items from storage per entity during purge.\n   *\n   * @param ContentEntityInterface $entity\n   *   The entity revision, whose values are being purged.\n   * @param \\Drupal\\Core\\Field\\FieldDefinitionInterface $field_definition\n   *   The field whose values are bing purged.\n   *\/",200],["T_WHITESPACE","\n  ",207],["T_ABSTRACT","abstract",208],["T_WHITESPACE"," ",208],["T_PROTECTED","protected",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","purgeFieldItems",208],"(",["T_STRING","ContentEntityInterface",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$entity",208],",",["T_WHITESPACE"," ",208],["T_STRING","FieldDefinitionInterface",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$field_definition",208],")",";",["T_WHITESPACE","\n\n  ",208],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",210],["T_WHITESPACE","\n  ",212],["T_PUBLIC","public",213],["T_WHITESPACE"," ",213],["T_FUNCTION","function",213],["T_WHITESPACE"," ",213],["T_STRING","finalizePurge",213],"(",["T_STRING","FieldStorageDefinitionInterface",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$storage_definition",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE"," ",213],"}",["T_WHITESPACE","\n\n  ",213],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",215],["T_WHITESPACE","\n  ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","loadRevision",218],"(",["T_VARIABLE","$revision_id",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$revision",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","doLoadRevisionFieldItems",219],"(",["T_VARIABLE","$revision_id",219],")",";",["T_WHITESPACE","\n\n    ",219],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$revision",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n      ",221],["T_VARIABLE","$entities",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],"[",["T_VARIABLE","$revision",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","id",222],"(",")",["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$revision",222],"]",";",["T_WHITESPACE","\n      ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","invokeStorageLoadHook",223],"(",["T_VARIABLE","$entities",223],")",";",["T_WHITESPACE","\n      ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","postLoad",224],"(",["T_VARIABLE","$entities",224],")",";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n\n    ",225],["T_RETURN","return",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$revision",227],";",["T_WHITESPACE","\n  ",227],"}",["T_WHITESPACE","\n\n  ",228],["T_DOC_COMMENT","\/**\n   * Actually loads revision field item values from the storage.\n   *\n   * @param int|string $revision_id\n   *   The revision identifier.\n   *\n   * @return \\Drupal\\Core\\Entity\\EntityInterface|null\n   *   The specified entity revision or NULL if not found.\n   *\/",230],["T_WHITESPACE","\n  ",238],["T_ABSTRACT","abstract",239],["T_WHITESPACE"," ",239],["T_PROTECTED","protected",239],["T_WHITESPACE"," ",239],["T_FUNCTION","function",239],["T_WHITESPACE"," ",239],["T_STRING","doLoadRevisionFieldItems",239],"(",["T_VARIABLE","$revision_id",239],")",";",["T_WHITESPACE","\n\n  ",239],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",241],["T_WHITESPACE","\n  ",243],["T_PROTECTED","protected",244],["T_WHITESPACE"," ",244],["T_FUNCTION","function",244],["T_WHITESPACE"," ",244],["T_STRING","doSave",244],"(",["T_VARIABLE","$id",244],",",["T_WHITESPACE"," ",244],["T_STRING","EntityInterface",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$entity",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n    ",244],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",245],["T_WHITESPACE","\n\n    ",245],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_VARIABLE","$entity",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","isNew",247],"(",")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n      ",247],["T_COMMENT","\/\/ Ensure the entity is still seen as new after assigning it an id, while\n",248],["T_WHITESPACE","      ",249],["T_COMMENT","\/\/ storing its data.\n",249],["T_WHITESPACE","      ",250],["T_VARIABLE","$entity",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","enforceIsNew",250],"(",")",";",["T_WHITESPACE","\n      ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","entityType",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","isRevisionable",251],"(",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$entity",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","setNewRevision",252],"(",")",";",["T_WHITESPACE","\n      ",252],"}",["T_WHITESPACE","\n      ",253],["T_VARIABLE","$return",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","SAVED_NEW",254],";",["T_WHITESPACE","\n    ",254],"}",["T_WHITESPACE","\n    ",255],["T_ELSE","else",256],["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n      ",256],["T_COMMENT","\/\/ @todo Consider returning a different value when saving a non-default\n",257],["T_WHITESPACE","      ",258],["T_COMMENT","\/\/   entity revision. See https:\/\/www.drupal.org\/node\/2509360.\n",258],["T_WHITESPACE","      ",259],["T_VARIABLE","$return",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$entity",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","isDefaultRevision",259],"(",")",["T_WHITESPACE"," ",259],"?",["T_WHITESPACE"," ",259],["T_STRING","SAVED_UPDATED",259],["T_WHITESPACE"," ",259],":",["T_WHITESPACE"," ",259],["T_STRING","FALSE",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n\n    ",260],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","populateAffectedRevisionTranslations",262],"(",["T_VARIABLE","$entity",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","doSaveFieldItems",263],"(",["T_VARIABLE","$entity",263],")",";",["T_WHITESPACE","\n\n    ",263],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$return",265],";",["T_WHITESPACE","\n  ",265],"}",["T_WHITESPACE","\n\n  ",266],["T_DOC_COMMENT","\/**\n   * Writes entity field values to the storage.\n   *\n   * This method is responsible for allocating entity and revision identifiers\n   * and updating the entity object with their values.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   The entity object.\n   * @param string[] $names\n   *   (optional) The name of the fields to be written to the storage. If an\n   *   empty value is passed all field values are saved.\n   *\/",268],["T_WHITESPACE","\n  ",279],["T_ABSTRACT","abstract",280],["T_WHITESPACE"," ",280],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","doSaveFieldItems",280],"(",["T_STRING","ContentEntityInterface",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$entity",280],",",["T_WHITESPACE"," ",280],["T_ARRAY","array",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$names",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],"[","]",")",";",["T_WHITESPACE","\n\n  ",280],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",282],["T_WHITESPACE","\n  ",284],["T_PROTECTED","protected",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","doPreSave",285],"(",["T_STRING","EntityInterface",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$entity",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n    ",285],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityBase $entity *\/",286],["T_WHITESPACE","\n\n    ",286],["T_COMMENT","\/\/ Sync the changes made in the fields array to the internal values array.\n",288],["T_WHITESPACE","    ",289],["T_VARIABLE","$entity",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","updateOriginalValues",289],"(",")",";",["T_WHITESPACE","\n\n    ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_STRING","parent",291],["T_DOUBLE_COLON","::",291],["T_STRING","doPreSave",291],"(",["T_VARIABLE","$entity",291],")",";",["T_WHITESPACE","\n  ",291],"}",["T_WHITESPACE","\n\n  ",292],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",294],["T_WHITESPACE","\n  ",296],["T_PROTECTED","protected",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","doPostSave",297],"(",["T_STRING","EntityInterface",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$entity",297],",",["T_WHITESPACE"," ",297],["T_VARIABLE","$update",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n    ",297],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",298],["T_WHITESPACE","\n\n    ",298],["T_IF","if",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$update",300],["T_WHITESPACE"," ",300],["T_BOOLEAN_AND","&&",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","entityType",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","isTranslatable",300],"(",")",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","invokeTranslationHooks",301],"(",["T_VARIABLE","$entity",301],")",";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_STRING","parent",304],["T_DOUBLE_COLON","::",304],["T_STRING","doPostSave",304],"(",["T_VARIABLE","$entity",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$update",304],")",";",["T_WHITESPACE","\n\n    ",304],["T_COMMENT","\/\/ The revision is stored, it should no longer be marked as new now.\n",306],["T_WHITESPACE","    ",307],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","entityType",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","isRevisionable",307],"(",")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n      ",307],["T_VARIABLE","$entity",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","setNewRevision",308],"(",["T_STRING","FALSE",308],")",";",["T_WHITESPACE","\n    ",308],"}",["T_WHITESPACE","\n  ",309],"}",["T_WHITESPACE","\n\n  ",310],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",312],["T_WHITESPACE","\n  ",314],["T_PROTECTED","protected",315],["T_WHITESPACE"," ",315],["T_FUNCTION","function",315],["T_WHITESPACE"," ",315],["T_STRING","doDelete",315],"(",["T_VARIABLE","$entities",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n    ",315],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface[] $entities *\/",316],["T_WHITESPACE","\n    ",316],["T_FOREACH","foreach",317],["T_WHITESPACE"," ",317],"(",["T_VARIABLE","$entities",317],["T_WHITESPACE"," ",317],["T_AS","as",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$entity",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n      ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","invokeFieldMethod",318],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$entity",318],")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","doDeleteFieldItems",320],"(",["T_VARIABLE","$entities",320],")",";",["T_WHITESPACE","\n  ",320],"}",["T_WHITESPACE","\n\n  ",321],["T_DOC_COMMENT","\/**\n   * Deletes entity field values from the storage.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface[] $entities\n   *   An array of entity objects to be deleted.\n   *\/",323],["T_WHITESPACE","\n  ",328],["T_ABSTRACT","abstract",329],["T_WHITESPACE"," ",329],["T_PROTECTED","protected",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","doDeleteFieldItems",329],"(",["T_VARIABLE","$entities",329],")",";",["T_WHITESPACE","\n\n  ",329],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",331],["T_WHITESPACE","\n  ",333],["T_PUBLIC","public",334],["T_WHITESPACE"," ",334],["T_FUNCTION","function",334],["T_WHITESPACE"," ",334],["T_STRING","deleteRevision",334],"(",["T_VARIABLE","$revision_id",334],")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n    ",334],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $revision *\/",335],["T_WHITESPACE","\n    ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$revision",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","loadRevision",336],"(",["T_VARIABLE","$revision_id",336],")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n      ",336],["T_COMMENT","\/\/ Prevent deletion if this is the default revision.\n",337],["T_WHITESPACE","      ",338],["T_IF","if",338],["T_WHITESPACE"," ",338],"(",["T_VARIABLE","$revision",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","isDefaultRevision",338],"(",")",")",["T_WHITESPACE"," ",338],"{",["T_WHITESPACE","\n        ",338],["T_THROW","throw",339],["T_WHITESPACE"," ",339],["T_NEW","new",339],["T_WHITESPACE"," ",339],["T_STRING","EntityStorageException",339],"(",["T_CONSTANT_ENCAPSED_STRING","'Default revision can not be deleted'",339],")",";",["T_WHITESPACE","\n      ",339],"}",["T_WHITESPACE","\n      ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","invokeFieldMethod",341],"(",["T_CONSTANT_ENCAPSED_STRING","'deleteRevision'",341],",",["T_WHITESPACE"," ",341],["T_VARIABLE","$revision",341],")",";",["T_WHITESPACE","\n      ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","doDeleteRevisionFieldItems",342],"(",["T_VARIABLE","$revision",342],")",";",["T_WHITESPACE","\n      ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","invokeHook",343],"(",["T_CONSTANT_ENCAPSED_STRING","'revision_delete'",343],",",["T_WHITESPACE"," ",343],["T_VARIABLE","$revision",343],")",";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n  ",344],"}",["T_WHITESPACE","\n\n  ",345],["T_DOC_COMMENT","\/**\n   * Deletes field values of an entity revision from the storage.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $revision\n   *   An entity revision object to be deleted.\n   *\/",347],["T_WHITESPACE","\n  ",352],["T_ABSTRACT","abstract",353],["T_WHITESPACE"," ",353],["T_PROTECTED","protected",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","doDeleteRevisionFieldItems",353],"(",["T_STRING","ContentEntityInterface",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$revision",353],")",";",["T_WHITESPACE","\n\n  ",353],["T_DOC_COMMENT","\/**\n   * Checks translation statuses and invoke the related hooks if needed.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   The entity being saved.\n   *\/",355],["T_WHITESPACE","\n  ",360],["T_PROTECTED","protected",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","invokeTranslationHooks",361],"(",["T_STRING","ContentEntityInterface",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$entity",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$translations",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$entity",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","getTranslationLanguages",362],"(",["T_STRING","FALSE",362],")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$original_translations",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$entity",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","original",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getTranslationLanguages",363],"(",["T_STRING","FALSE",363],")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$all_translations",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_STRING","array_keys",364],"(",["T_VARIABLE","$translations",364],["T_WHITESPACE"," ",364],"+",["T_WHITESPACE"," ",364],["T_VARIABLE","$original_translations",364],")",";",["T_WHITESPACE","\n\n    ",364],["T_COMMENT","\/\/ Notify modules of translation insertion\/deletion.\n",366],["T_WHITESPACE","    ",367],["T_FOREACH","foreach",367],["T_WHITESPACE"," ",367],"(",["T_VARIABLE","$all_translations",367],["T_WHITESPACE"," ",367],["T_AS","as",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$langcode",367],")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n      ",367],["T_IF","if",368],["T_WHITESPACE"," ",368],"(",["T_ISSET","isset",368],"(",["T_VARIABLE","$translations",368],"[",["T_VARIABLE","$langcode",368],"]",")",["T_WHITESPACE"," ",368],["T_BOOLEAN_AND","&&",368],["T_WHITESPACE"," ",368],"!",["T_ISSET","isset",368],"(",["T_VARIABLE","$original_translations",368],"[",["T_VARIABLE","$langcode",368],"]",")",")",["T_WHITESPACE"," ",368],"{",["T_WHITESPACE","\n        ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","invokeHook",369],"(",["T_CONSTANT_ENCAPSED_STRING","'translation_insert'",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$entity",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","getTranslation",369],"(",["T_VARIABLE","$langcode",369],")",")",";",["T_WHITESPACE","\n      ",369],"}",["T_WHITESPACE","\n      ",370],["T_ELSEIF","elseif",371],["T_WHITESPACE"," ",371],"(","!",["T_ISSET","isset",371],"(",["T_VARIABLE","$translations",371],"[",["T_VARIABLE","$langcode",371],"]",")",["T_WHITESPACE"," ",371],["T_BOOLEAN_AND","&&",371],["T_WHITESPACE"," ",371],["T_ISSET","isset",371],"(",["T_VARIABLE","$original_translations",371],"[",["T_VARIABLE","$langcode",371],"]",")",")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","invokeHook",372],"(",["T_CONSTANT_ENCAPSED_STRING","'translation_delete'",372],",",["T_WHITESPACE"," ",372],["T_VARIABLE","$entity",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","original",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","getTranslation",372],"(",["T_VARIABLE","$langcode",372],")",")",";",["T_WHITESPACE","\n      ",372],"}",["T_WHITESPACE","\n    ",373],"}",["T_WHITESPACE","\n  ",374],"}",["T_WHITESPACE","\n\n  ",375],["T_DOC_COMMENT","\/**\n   * Invokes hook_entity_storage_load().\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface[] $entities\n   *   List of entities, keyed on the entity ID.\n   *\/",377],["T_WHITESPACE","\n  ",382],["T_PROTECTED","protected",383],["T_WHITESPACE"," ",383],["T_FUNCTION","function",383],["T_WHITESPACE"," ",383],["T_STRING","invokeStorageLoadHook",383],"(",["T_ARRAY","array",383],["T_WHITESPACE"," ",383],"&",["T_VARIABLE","$entities",383],")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n    ",383],["T_IF","if",384],["T_WHITESPACE"," ",384],"(","!",["T_EMPTY","empty",384],"(",["T_VARIABLE","$entities",384],")",")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n      ",384],["T_COMMENT","\/\/ Call hook_entity_storage_load().\n",385],["T_WHITESPACE","      ",386],["T_FOREACH","foreach",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","moduleHandler",386],"(",")",["T_OBJECT_OPERATOR","->",386],["T_STRING","getImplementations",386],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_storage_load'",386],")",["T_WHITESPACE"," ",386],["T_AS","as",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$module",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n        ",386],["T_VARIABLE","$function",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$module",387],["T_WHITESPACE"," ",387],".",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'_entity_storage_load'",387],";",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$function",388],"(",["T_VARIABLE","$entities",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","entityTypeId",388],")",";",["T_WHITESPACE","\n      ",388],"}",["T_WHITESPACE","\n      ",389],["T_COMMENT","\/\/ Call hook_TYPE_storage_load().\n",390],["T_WHITESPACE","      ",391],["T_FOREACH","foreach",391],["T_WHITESPACE"," ",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","moduleHandler",391],"(",")",["T_OBJECT_OPERATOR","->",391],["T_STRING","getImplementations",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","entityTypeId",391],["T_WHITESPACE"," ",391],".",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'_storage_load'",391],")",["T_WHITESPACE"," ",391],["T_AS","as",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$module",391],")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$function",392],["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],["T_VARIABLE","$module",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'_'",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","entityTypeId",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'_storage_load'",392],";",["T_WHITESPACE","\n        ",392],["T_VARIABLE","$function",393],"(",["T_VARIABLE","$entities",393],")",";",["T_WHITESPACE","\n      ",393],"}",["T_WHITESPACE","\n    ",394],"}",["T_WHITESPACE","\n  ",395],"}",["T_WHITESPACE","\n\n  ",396],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",398],["T_WHITESPACE","\n  ",400],["T_PROTECTED","protected",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","invokeHook",401],"(",["T_VARIABLE","$hook",401],",",["T_WHITESPACE"," ",401],["T_STRING","EntityInterface",401],["T_WHITESPACE"," ",401],["T_VARIABLE","$entity",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n    ",401],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\ContentEntityInterface $entity *\/",402],["T_WHITESPACE","\n\n    ",402],["T_SWITCH","switch",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$hook",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n      ",404],["T_CASE","case",405],["T_WHITESPACE"," ",405],["T_CONSTANT_ENCAPSED_STRING","'presave'",405],":",["T_WHITESPACE","\n        ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","invokeFieldMethod",406],"(",["T_CONSTANT_ENCAPSED_STRING","'preSave'",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$entity",406],")",";",["T_WHITESPACE","\n        ",406],["T_BREAK","break",407],";",["T_WHITESPACE","\n\n      ",407],["T_CASE","case",409],["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'insert'",409],":",["T_WHITESPACE","\n        ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","invokeFieldPostSave",410],"(",["T_VARIABLE","$entity",410],",",["T_WHITESPACE"," ",410],["T_STRING","FALSE",410],")",";",["T_WHITESPACE","\n        ",410],["T_BREAK","break",411],";",["T_WHITESPACE","\n\n      ",411],["T_CASE","case",413],["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'update'",413],":",["T_WHITESPACE","\n        ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","invokeFieldPostSave",414],"(",["T_VARIABLE","$entity",414],",",["T_WHITESPACE"," ",414],["T_STRING","TRUE",414],")",";",["T_WHITESPACE","\n        ",414],["T_BREAK","break",415],";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n\n    ",416],["T_STRING","parent",418],["T_DOUBLE_COLON","::",418],["T_STRING","invokeHook",418],"(",["T_VARIABLE","$hook",418],",",["T_WHITESPACE"," ",418],["T_VARIABLE","$entity",418],")",";",["T_WHITESPACE","\n  ",418],"}",["T_WHITESPACE","\n\n  ",419],["T_DOC_COMMENT","\/**\n   * Invokes a method on the Field objects within an entity.\n   *\n   * Any argument passed will be forwarded to the invoked method.\n   *\n   * @param string $method\n   *   The name of the method to be invoked.\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   The entity object.\n   *\n   * @return array\n   *   A multidimensional associative array of results, keyed by entity\n   *   translation language code and field name.\n   *\/",421],["T_WHITESPACE","\n  ",434],["T_PROTECTED","protected",435],["T_WHITESPACE"," ",435],["T_FUNCTION","function",435],["T_WHITESPACE"," ",435],["T_STRING","invokeFieldMethod",435],"(",["T_VARIABLE","$method",435],",",["T_WHITESPACE"," ",435],["T_STRING","ContentEntityInterface",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$entity",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$result",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],"[","]",";",["T_WHITESPACE","\n    ",436],["T_VARIABLE","$args",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_STRING","array_slice",437],"(",["T_STRING","func_get_args",437],"(",")",",",["T_WHITESPACE"," ",437],["T_LNUMBER","2",437],")",";",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$langcodes",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_STRING","array_keys",438],"(",["T_VARIABLE","$entity",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","getTranslationLanguages",438],"(",")",")",";",["T_WHITESPACE","\n    ",438],["T_COMMENT","\/\/ Ensure that the field method is invoked as first on the current entity\n",439],["T_WHITESPACE","    ",440],["T_COMMENT","\/\/ translation and then on all other translations.\n",440],["T_WHITESPACE","    ",441],["T_VARIABLE","$current_entity_langcode",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$entity",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","language",441],"(",")",["T_OBJECT_OPERATOR","->",441],["T_STRING","getId",441],"(",")",";",["T_WHITESPACE","\n    ",441],["T_IF","if",442],["T_WHITESPACE"," ",442],"(",["T_STRING","reset",442],"(",["T_VARIABLE","$langcodes",442],")",["T_WHITESPACE"," ",442],["T_IS_NOT_EQUAL","!=",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$current_entity_langcode",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n      ",442],["T_VARIABLE","$langcodes",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_STRING","array_diff",443],"(",["T_VARIABLE","$langcodes",443],",",["T_WHITESPACE"," ",443],"[",["T_VARIABLE","$current_entity_langcode",443],"]",")",";",["T_WHITESPACE","\n      ",443],["T_STRING","array_unshift",444],"(",["T_VARIABLE","$langcodes",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$current_entity_langcode",444],")",";",["T_WHITESPACE","\n    ",444],"}",["T_WHITESPACE","\n    ",445],["T_FOREACH","foreach",446],["T_WHITESPACE"," ",446],"(",["T_VARIABLE","$langcodes",446],["T_WHITESPACE"," ",446],["T_AS","as",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$langcode",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n      ",446],["T_VARIABLE","$translation",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$entity",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getTranslation",447],"(",["T_VARIABLE","$langcode",447],")",";",["T_WHITESPACE","\n      ",447],["T_COMMENT","\/\/ For non translatable fields, there is only one field object instance\n",448],["T_WHITESPACE","      ",449],["T_COMMENT","\/\/ across all translations and it has as parent entity the entity in the\n",449],["T_WHITESPACE","      ",450],["T_COMMENT","\/\/ default entity translation. Therefore field methods on non translatable\n",450],["T_WHITESPACE","      ",451],["T_COMMENT","\/\/ fields should be invoked only on the default entity translation.\n",451],["T_WHITESPACE","      ",452],["T_VARIABLE","$fields",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_VARIABLE","$translation",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","isDefaultTranslation",452],"(",")",["T_WHITESPACE"," ",452],"?",["T_WHITESPACE"," ",452],["T_VARIABLE","$translation",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getFields",452],"(",")",["T_WHITESPACE"," ",452],":",["T_WHITESPACE"," ",452],["T_VARIABLE","$translation",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getTranslatableFields",452],"(",")",";",["T_WHITESPACE","\n      ",452],["T_FOREACH","foreach",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$fields",453],["T_WHITESPACE"," ",453],["T_AS","as",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$name",453],["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$items",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n        ",453],["T_COMMENT","\/\/ call_user_func_array() is way slower than a direct call so we avoid\n",454],["T_WHITESPACE","        ",455],["T_COMMENT","\/\/ using it if have no parameters.\n",455],["T_WHITESPACE","        ",456],["T_VARIABLE","$result",456],"[",["T_VARIABLE","$langcode",456],"]","[",["T_VARIABLE","$name",456],"]",["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_VARIABLE","$args",456],["T_WHITESPACE"," ",456],"?",["T_WHITESPACE"," ",456],["T_STRING","call_user_func_array",456],"(","[",["T_VARIABLE","$items",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$method",456],"]",",",["T_WHITESPACE"," ",456],["T_VARIABLE","$args",456],")",["T_WHITESPACE"," ",456],":",["T_WHITESPACE"," ",456],["T_VARIABLE","$items",456],["T_OBJECT_OPERATOR","->",456],"{",["T_VARIABLE","$method",456],"}","(",")",";",["T_WHITESPACE","\n      ",456],"}",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_COMMENT","\/\/ We need to call the delete method for field items of removed\n",460],["T_WHITESPACE","    ",461],["T_COMMENT","\/\/ translations.\n",461],["T_WHITESPACE","    ",462],["T_IF","if",462],["T_WHITESPACE"," ",462],"(",["T_VARIABLE","$method",462],["T_WHITESPACE"," ",462],["T_IS_EQUAL","==",462],["T_WHITESPACE"," ",462],["T_CONSTANT_ENCAPSED_STRING","'postSave'",462],["T_WHITESPACE"," ",462],["T_BOOLEAN_AND","&&",462],["T_WHITESPACE"," ",462],"!",["T_EMPTY","empty",462],"(",["T_VARIABLE","$entity",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","original",462],")",")",["T_WHITESPACE"," ",462],"{",["T_WHITESPACE","\n      ",462],["T_VARIABLE","$original_langcodes",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_STRING","array_keys",463],"(",["T_VARIABLE","$entity",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","original",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getTranslationLanguages",463],"(",")",")",";",["T_WHITESPACE","\n      ",463],["T_FOREACH","foreach",464],["T_WHITESPACE"," ",464],"(",["T_STRING","array_diff",464],"(",["T_VARIABLE","$original_langcodes",464],",",["T_WHITESPACE"," ",464],["T_VARIABLE","$langcodes",464],")",["T_WHITESPACE"," ",464],["T_AS","as",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$removed_langcode",464],")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n        ",464],["T_VARIABLE","$translation",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$entity",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","original",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getTranslation",465],"(",["T_VARIABLE","$removed_langcode",465],")",";",["T_WHITESPACE","\n        ",465],["T_VARIABLE","$fields",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_VARIABLE","$translation",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","getTranslatableFields",466],"(",")",";",["T_WHITESPACE","\n        ",466],["T_FOREACH","foreach",467],["T_WHITESPACE"," ",467],"(",["T_VARIABLE","$fields",467],["T_WHITESPACE"," ",467],["T_AS","as",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$name",467],["T_WHITESPACE"," ",467],["T_DOUBLE_ARROW","=>",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$items",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n          ",467],["T_VARIABLE","$items",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","delete",468],"(",")",";",["T_WHITESPACE","\n        ",468],"}",["T_WHITESPACE","\n      ",469],"}",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_VARIABLE","$result",473],";",["T_WHITESPACE","\n  ",473],"}",["T_WHITESPACE","\n\n  ",474],["T_DOC_COMMENT","\/**\n   * Invokes the post save method on the Field objects within an entity.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   The entity object.\n   * @param bool $update\n   *   Specifies whether the entity is being updated or created.\n   *\/",476],["T_WHITESPACE","\n  ",483],["T_PROTECTED","protected",484],["T_WHITESPACE"," ",484],["T_FUNCTION","function",484],["T_WHITESPACE"," ",484],["T_STRING","invokeFieldPostSave",484],"(",["T_STRING","ContentEntityInterface",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$entity",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$update",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n    ",484],["T_COMMENT","\/\/ For each entity translation this returns an array of resave flags keyed\n",485],["T_WHITESPACE","    ",486],["T_COMMENT","\/\/ by field name, thus we merge them to obtain a list of fields to resave.\n",486],["T_WHITESPACE","    ",487],["T_VARIABLE","$resave",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],"[","]",";",["T_WHITESPACE","\n    ",487],["T_FOREACH","foreach",488],["T_WHITESPACE"," ",488],"(",["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","invokeFieldMethod",488],"(",["T_CONSTANT_ENCAPSED_STRING","'postSave'",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$entity",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$update",488],")",["T_WHITESPACE"," ",488],["T_AS","as",488],["T_WHITESPACE"," ",488],["T_VARIABLE","$translation_results",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n      ",488],["T_VARIABLE","$resave",489],["T_WHITESPACE"," ",489],["T_PLUS_EQUAL","+=",489],["T_WHITESPACE"," ",489],["T_STRING","array_filter",489],"(",["T_VARIABLE","$translation_results",489],")",";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n    ",490],["T_IF","if",491],["T_WHITESPACE"," ",491],"(",["T_VARIABLE","$resave",491],")",["T_WHITESPACE"," ",491],"{",["T_WHITESPACE","\n      ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","doSaveFieldItems",492],"(",["T_VARIABLE","$entity",492],",",["T_WHITESPACE"," ",492],["T_STRING","array_keys",492],"(",["T_VARIABLE","$resave",492],")",")",";",["T_WHITESPACE","\n    ",492],"}",["T_WHITESPACE","\n  ",493],"}",["T_WHITESPACE","\n\n  ",494],["T_DOC_COMMENT","\/**\n   * Checks whether the field values changed compared to the original entity.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldDefinitionInterface $field_definition\n   *   Field definition of field to compare for changes.\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   Entity to check for field changes.\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $original\n   *   Original entity to compare against.\n   *\n   * @return bool\n   *   True if the field value changed from the original entity.\n   *\/",496],["T_WHITESPACE","\n  ",508],["T_PROTECTED","protected",509],["T_WHITESPACE"," ",509],["T_FUNCTION","function",509],["T_WHITESPACE"," ",509],["T_STRING","hasFieldValueChanged",509],"(",["T_STRING","FieldDefinitionInterface",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$field_definition",509],",",["T_WHITESPACE"," ",509],["T_STRING","ContentEntityInterface",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$entity",509],",",["T_WHITESPACE"," ",509],["T_STRING","ContentEntityInterface",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$original",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n    ",509],["T_VARIABLE","$field_name",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$field_definition",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getName",510],"(",")",";",["T_WHITESPACE","\n    ",510],["T_VARIABLE","$langcodes",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_STRING","array_keys",511],"(",["T_VARIABLE","$entity",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getTranslationLanguages",511],"(",")",")",";",["T_WHITESPACE","\n    ",511],["T_IF","if",512],["T_WHITESPACE"," ",512],"(",["T_VARIABLE","$langcodes",512],["T_WHITESPACE"," ",512],["T_IS_NOT_IDENTICAL","!==",512],["T_WHITESPACE"," ",512],["T_STRING","array_keys",512],"(",["T_VARIABLE","$original",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getTranslationLanguages",512],"(",")",")",")",["T_WHITESPACE"," ",512],"{",["T_WHITESPACE","\n      ",512],["T_COMMENT","\/\/ If the list of langcodes has changed, we need to save.\n",513],["T_WHITESPACE","      ",514],["T_RETURN","return",514],["T_WHITESPACE"," ",514],["T_STRING","TRUE",514],";",["T_WHITESPACE","\n    ",514],"}",["T_WHITESPACE","\n    ",515],["T_FOREACH","foreach",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$langcodes",516],["T_WHITESPACE"," ",516],["T_AS","as",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$langcode",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n      ",516],["T_VARIABLE","$items",517],["T_WHITESPACE"," ",517],"=",["T_WHITESPACE"," ",517],["T_VARIABLE","$entity",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getTranslation",517],"(",["T_VARIABLE","$langcode",517],")",["T_OBJECT_OPERATOR","->",517],["T_STRING","get",517],"(",["T_VARIABLE","$field_name",517],")",["T_OBJECT_OPERATOR","->",517],["T_STRING","filterEmptyItems",517],"(",")",";",["T_WHITESPACE","\n      ",517],["T_VARIABLE","$original_items",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$original",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getTranslation",518],"(",["T_VARIABLE","$langcode",518],")",["T_OBJECT_OPERATOR","->",518],["T_STRING","get",518],"(",["T_VARIABLE","$field_name",518],")",["T_OBJECT_OPERATOR","->",518],["T_STRING","filterEmptyItems",518],"(",")",";",["T_WHITESPACE","\n      ",518],["T_COMMENT","\/\/ If the field items are not equal, we need to save.\n",519],["T_WHITESPACE","      ",520],["T_IF","if",520],["T_WHITESPACE"," ",520],"(","!",["T_VARIABLE","$items",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","equals",520],"(",["T_VARIABLE","$original_items",520],")",")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n        ",520],["T_RETURN","return",521],["T_WHITESPACE"," ",521],["T_STRING","TRUE",521],";",["T_WHITESPACE","\n      ",521],"}",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n\n    ",523],["T_RETURN","return",525],["T_WHITESPACE"," ",525],["T_STRING","FALSE",525],";",["T_WHITESPACE","\n  ",525],"}",["T_WHITESPACE","\n\n  ",526],["T_DOC_COMMENT","\/**\n   * Populates the affected flag for all the revision translations.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface $entity\n   *   An entity object being saved.\n   *\/",528],["T_WHITESPACE","\n  ",533],["T_PROTECTED","protected",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","populateAffectedRevisionTranslations",534],"(",["T_STRING","ContentEntityInterface",534],["T_WHITESPACE"," ",534],["T_VARIABLE","$entity",534],")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n    ",534],["T_IF","if",535],["T_WHITESPACE"," ",535],"(",["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","entityType",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","isTranslatable",535],"(",")",["T_WHITESPACE"," ",535],["T_BOOLEAN_AND","&&",535],["T_WHITESPACE"," ",535],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","entityType",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","isRevisionable",535],"(",")",")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n      ",535],["T_VARIABLE","$languages",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],["T_VARIABLE","$entity",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","getTranslationLanguages",536],"(",")",";",["T_WHITESPACE","\n      ",536],["T_FOREACH","foreach",537],["T_WHITESPACE"," ",537],"(",["T_VARIABLE","$languages",537],["T_WHITESPACE"," ",537],["T_AS","as",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$langcode",537],["T_WHITESPACE"," ",537],["T_DOUBLE_ARROW","=>",537],["T_WHITESPACE"," ",537],["T_VARIABLE","$language",537],")",["T_WHITESPACE"," ",537],"{",["T_WHITESPACE","\n        ",537],["T_VARIABLE","$translation",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_VARIABLE","$entity",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getTranslation",538],"(",["T_VARIABLE","$langcode",538],")",";",["T_WHITESPACE","\n        ",538],["T_COMMENT","\/\/ Avoid populating the value if it was already manually set.\n",539],["T_WHITESPACE","        ",540],["T_VARIABLE","$affected",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$translation",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","isRevisionTranslationAffected",540],"(",")",";",["T_WHITESPACE","\n        ",540],["T_IF","if",541],["T_WHITESPACE"," ",541],"(","!",["T_ISSET","isset",541],"(",["T_VARIABLE","$affected",541],")",["T_WHITESPACE"," ",541],["T_BOOLEAN_AND","&&",541],["T_WHITESPACE"," ",541],["T_VARIABLE","$translation",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","hasTranslationChanges",541],"(",")",")",["T_WHITESPACE"," ",541],"{",["T_WHITESPACE","\n          ",541],["T_VARIABLE","$translation",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","setRevisionTranslationAffected",542],"(",["T_STRING","TRUE",542],")",";",["T_WHITESPACE","\n        ",542],"}",["T_WHITESPACE","\n      ",543],"}",["T_WHITESPACE","\n    ",544],"}",["T_WHITESPACE","\n  ",545],"}",["T_WHITESPACE","\n\n  ",546],["T_DOC_COMMENT","\/**\n   * Ensures integer entity IDs are valid.\n   *\n   * The identifier sanitization provided by this method has been introduced\n   * as Drupal used to rely on the database to facilitate this, which worked\n   * correctly with MySQL but led to errors with other DBMS such as PostgreSQL.\n   *\n   * @param array $ids\n   *   The entity IDs to verify.\n   *\n   * @return array\n   *   The sanitized list of entity IDs.\n   *\/",548],["T_WHITESPACE","\n  ",560],["T_PROTECTED","protected",561],["T_WHITESPACE"," ",561],["T_FUNCTION","function",561],["T_WHITESPACE"," ",561],["T_STRING","cleanIds",561],"(",["T_ARRAY","array",561],["T_WHITESPACE"," ",561],["T_VARIABLE","$ids",561],")",["T_WHITESPACE"," ",561],"{",["T_WHITESPACE","\n    ",561],["T_VARIABLE","$definitions",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","entityManager",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","getBaseFieldDefinitions",562],"(",["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","entityTypeId",562],")",";",["T_WHITESPACE","\n    ",562],["T_VARIABLE","$id_definition",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$definitions",563],"[",["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","entityType",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getKey",563],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",563],")","]",";",["T_WHITESPACE","\n    ",563],["T_IF","if",564],["T_WHITESPACE"," ",564],"(",["T_VARIABLE","$id_definition",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","getType",564],"(",")",["T_WHITESPACE"," ",564],["T_IS_EQUAL","==",564],["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'integer'",564],")",["T_WHITESPACE"," ",564],"{",["T_WHITESPACE","\n      ",564],["T_VARIABLE","$ids",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_STRING","array_filter",565],"(",["T_VARIABLE","$ids",565],",",["T_WHITESPACE"," ",565],["T_FUNCTION","function",565],["T_WHITESPACE"," ",565],"(",["T_VARIABLE","$id",565],")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n        ",565],["T_RETURN","return",566],["T_WHITESPACE"," ",566],["T_STRING","is_numeric",566],"(",["T_VARIABLE","$id",566],")",["T_WHITESPACE"," ",566],["T_BOOLEAN_AND","&&",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$id",566],["T_WHITESPACE"," ",566],["T_IS_EQUAL","==",566],["T_WHITESPACE"," ",566],["T_INT_CAST","(int)",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$id",566],";",["T_WHITESPACE","\n      ",566],"}",")",";",["T_WHITESPACE","\n      ",567],["T_VARIABLE","$ids",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","array_map",568],"(",["T_CONSTANT_ENCAPSED_STRING","'intval'",568],",",["T_WHITESPACE"," ",568],["T_VARIABLE","$ids",568],")",";",["T_WHITESPACE","\n    ",568],"}",["T_WHITESPACE","\n    ",569],["T_RETURN","return",570],["T_WHITESPACE"," ",570],["T_VARIABLE","$ids",570],";",["T_WHITESPACE","\n  ",570],"}",["T_WHITESPACE","\n\n  ",571],["T_DOC_COMMENT","\/**\n   * Gets entities from the persistent cache backend.\n   *\n   * @param array|null &$ids\n   *   If not empty, return entities that match these IDs. IDs that were found\n   *   will be removed from the list.\n   *\n   * @return \\Drupal\\Core\\Entity\\ContentEntityInterface[]\n   *   Array of entities from the persistent cache.\n   *\/",573],["T_WHITESPACE","\n  ",582],["T_PROTECTED","protected",583],["T_WHITESPACE"," ",583],["T_FUNCTION","function",583],["T_WHITESPACE"," ",583],["T_STRING","getFromPersistentCache",583],"(",["T_ARRAY","array",583],["T_WHITESPACE"," ",583],"&",["T_VARIABLE","$ids",583],["T_WHITESPACE"," ",583],"=",["T_WHITESPACE"," ",583],["T_STRING","NULL",583],")",["T_WHITESPACE"," ",583],"{",["T_WHITESPACE","\n    ",583],["T_IF","if",584],["T_WHITESPACE"," ",584],"(","!",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","entityType",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","isPersistentlyCacheable",584],"(",")",["T_WHITESPACE"," ",584],["T_BOOLEAN_OR","||",584],["T_WHITESPACE"," ",584],["T_EMPTY","empty",584],"(",["T_VARIABLE","$ids",584],")",")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n      ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_ARRAY","array",585],"(",")",";",["T_WHITESPACE","\n    ",585],"}",["T_WHITESPACE","\n    ",586],["T_VARIABLE","$entities",587],["T_WHITESPACE"," ",587],"=",["T_WHITESPACE"," ",587],["T_ARRAY","array",587],"(",")",";",["T_WHITESPACE","\n    ",587],["T_COMMENT","\/\/ Build the list of cache entries to retrieve.\n",588],["T_WHITESPACE","    ",589],["T_VARIABLE","$cid_map",589],["T_WHITESPACE"," ",589],"=",["T_WHITESPACE"," ",589],["T_ARRAY","array",589],"(",")",";",["T_WHITESPACE","\n    ",589],["T_FOREACH","foreach",590],["T_WHITESPACE"," ",590],"(",["T_VARIABLE","$ids",590],["T_WHITESPACE"," ",590],["T_AS","as",590],["T_WHITESPACE"," ",590],["T_VARIABLE","$id",590],")",["T_WHITESPACE"," ",590],"{",["T_WHITESPACE","\n      ",590],["T_VARIABLE","$cid_map",591],"[",["T_VARIABLE","$id",591],"]",["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_VARIABLE","$this",591],["T_OBJECT_OPERATOR","->",591],["T_STRING","buildCacheId",591],"(",["T_VARIABLE","$id",591],")",";",["T_WHITESPACE","\n    ",591],"}",["T_WHITESPACE","\n    ",592],["T_VARIABLE","$cids",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_STRING","array_values",593],"(",["T_VARIABLE","$cid_map",593],")",";",["T_WHITESPACE","\n    ",593],["T_IF","if",594],["T_WHITESPACE"," ",594],"(",["T_VARIABLE","$cache",594],["T_WHITESPACE"," ",594],"=",["T_WHITESPACE"," ",594],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","cacheBackend",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","getMultiple",594],"(",["T_VARIABLE","$cids",594],")",")",["T_WHITESPACE"," ",594],"{",["T_WHITESPACE","\n      ",594],["T_COMMENT","\/\/ Get the entities that were found in the cache.\n",595],["T_WHITESPACE","      ",596],["T_FOREACH","foreach",596],["T_WHITESPACE"," ",596],"(",["T_VARIABLE","$ids",596],["T_WHITESPACE"," ",596],["T_AS","as",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$index",596],["T_WHITESPACE"," ",596],["T_DOUBLE_ARROW","=>",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$id",596],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n        ",596],["T_VARIABLE","$cid",597],["T_WHITESPACE"," ",597],"=",["T_WHITESPACE"," ",597],["T_VARIABLE","$cid_map",597],"[",["T_VARIABLE","$id",597],"]",";",["T_WHITESPACE","\n        ",597],["T_IF","if",598],["T_WHITESPACE"," ",598],"(",["T_ISSET","isset",598],"(",["T_VARIABLE","$cache",598],"[",["T_VARIABLE","$cid",598],"]",")",")",["T_WHITESPACE"," ",598],"{",["T_WHITESPACE","\n          ",598],["T_VARIABLE","$entities",599],"[",["T_VARIABLE","$id",599],"]",["T_WHITESPACE"," ",599],"=",["T_WHITESPACE"," ",599],["T_VARIABLE","$cache",599],"[",["T_VARIABLE","$cid",599],"]",["T_OBJECT_OPERATOR","->",599],["T_STRING","data",599],";",["T_WHITESPACE","\n          ",599],["T_UNSET","unset",600],"(",["T_VARIABLE","$ids",600],"[",["T_VARIABLE","$index",600],"]",")",";",["T_WHITESPACE","\n        ",600],"}",["T_WHITESPACE","\n      ",601],"}",["T_WHITESPACE","\n    ",602],"}",["T_WHITESPACE","\n    ",603],["T_RETURN","return",604],["T_WHITESPACE"," ",604],["T_VARIABLE","$entities",604],";",["T_WHITESPACE","\n  ",604],"}",["T_WHITESPACE","\n\n  ",605],["T_DOC_COMMENT","\/**\n   * Stores entities in the persistent cache backend.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityInterface[] $entities\n   *   Entities to store in the cache.\n   *\/",607],["T_WHITESPACE","\n  ",612],["T_PROTECTED","protected",613],["T_WHITESPACE"," ",613],["T_FUNCTION","function",613],["T_WHITESPACE"," ",613],["T_STRING","setPersistentCache",613],"(",["T_VARIABLE","$entities",613],")",["T_WHITESPACE"," ",613],"{",["T_WHITESPACE","\n    ",613],["T_IF","if",614],["T_WHITESPACE"," ",614],"(","!",["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","entityType",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","isPersistentlyCacheable",614],"(",")",")",["T_WHITESPACE"," ",614],"{",["T_WHITESPACE","\n      ",614],["T_RETURN","return",615],";",["T_WHITESPACE","\n    ",615],"}",["T_WHITESPACE","\n\n    ",616],["T_VARIABLE","$cache_tags",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_ARRAY","array",618],"(",["T_WHITESPACE","\n      ",618],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","entityTypeId",619],["T_WHITESPACE"," ",619],".",["T_WHITESPACE"," ",619],["T_CONSTANT_ENCAPSED_STRING","'_values'",619],",",["T_WHITESPACE","\n      ",619],["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",620],",",["T_WHITESPACE","\n    ",620],")",";",["T_WHITESPACE","\n    ",621],["T_FOREACH","foreach",622],["T_WHITESPACE"," ",622],"(",["T_VARIABLE","$entities",622],["T_WHITESPACE"," ",622],["T_AS","as",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$id",622],["T_WHITESPACE"," ",622],["T_DOUBLE_ARROW","=>",622],["T_WHITESPACE"," ",622],["T_VARIABLE","$entity",622],")",["T_WHITESPACE"," ",622],"{",["T_WHITESPACE","\n      ",622],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","cacheBackend",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","set",623],"(",["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","buildCacheId",623],"(",["T_VARIABLE","$id",623],")",",",["T_WHITESPACE"," ",623],["T_VARIABLE","$entity",623],",",["T_WHITESPACE"," ",623],["T_STRING","CacheBackendInterface",623],["T_DOUBLE_COLON","::",623],["T_STRING","CACHE_PERMANENT",623],",",["T_WHITESPACE"," ",623],["T_VARIABLE","$cache_tags",623],")",";",["T_WHITESPACE","\n    ",623],"}",["T_WHITESPACE","\n  ",624],"}",["T_WHITESPACE","\n\n  ",625],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",627],["T_WHITESPACE","\n  ",629],["T_PUBLIC","public",630],["T_WHITESPACE"," ",630],["T_FUNCTION","function",630],["T_WHITESPACE"," ",630],["T_STRING","resetCache",630],"(",["T_ARRAY","array",630],["T_WHITESPACE"," ",630],["T_VARIABLE","$ids",630],["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],["T_STRING","NULL",630],")",["T_WHITESPACE"," ",630],"{",["T_WHITESPACE","\n    ",630],["T_IF","if",631],["T_WHITESPACE"," ",631],"(",["T_VARIABLE","$ids",631],")",["T_WHITESPACE"," ",631],"{",["T_WHITESPACE","\n      ",631],["T_VARIABLE","$cids",632],["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_ARRAY","array",632],"(",")",";",["T_WHITESPACE","\n      ",632],["T_FOREACH","foreach",633],["T_WHITESPACE"," ",633],"(",["T_VARIABLE","$ids",633],["T_WHITESPACE"," ",633],["T_AS","as",633],["T_WHITESPACE"," ",633],["T_VARIABLE","$id",633],")",["T_WHITESPACE"," ",633],"{",["T_WHITESPACE","\n        ",633],["T_UNSET","unset",634],"(",["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","entities",634],"[",["T_VARIABLE","$id",634],"]",")",";",["T_WHITESPACE","\n        ",634],["T_VARIABLE","$cids",635],"[","]",["T_WHITESPACE"," ",635],"=",["T_WHITESPACE"," ",635],["T_VARIABLE","$this",635],["T_OBJECT_OPERATOR","->",635],["T_STRING","buildCacheId",635],"(",["T_VARIABLE","$id",635],")",";",["T_WHITESPACE","\n      ",635],"}",["T_WHITESPACE","\n      ",636],["T_IF","if",637],["T_WHITESPACE"," ",637],"(",["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","entityType",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","isPersistentlyCacheable",637],"(",")",")",["T_WHITESPACE"," ",637],"{",["T_WHITESPACE","\n        ",637],["T_VARIABLE","$this",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","cacheBackend",638],["T_OBJECT_OPERATOR","->",638],["T_STRING","deleteMultiple",638],"(",["T_VARIABLE","$cids",638],")",";",["T_WHITESPACE","\n      ",638],"}",["T_WHITESPACE","\n    ",639],"}",["T_WHITESPACE","\n    ",640],["T_ELSE","else",641],["T_WHITESPACE"," ",641],"{",["T_WHITESPACE","\n      ",641],["T_VARIABLE","$this",642],["T_OBJECT_OPERATOR","->",642],["T_STRING","entities",642],["T_WHITESPACE"," ",642],"=",["T_WHITESPACE"," ",642],["T_ARRAY","array",642],"(",")",";",["T_WHITESPACE","\n      ",642],["T_IF","if",643],["T_WHITESPACE"," ",643],"(",["T_VARIABLE","$this",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","entityType",643],["T_OBJECT_OPERATOR","->",643],["T_STRING","isPersistentlyCacheable",643],"(",")",")",["T_WHITESPACE"," ",643],"{",["T_WHITESPACE","\n        ",643],["T_STRING","Cache",644],["T_DOUBLE_COLON","::",644],["T_STRING","invalidateTags",644],"(",["T_ARRAY","array",644],"(",["T_VARIABLE","$this",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","entityTypeId",644],["T_WHITESPACE"," ",644],".",["T_WHITESPACE"," ",644],["T_CONSTANT_ENCAPSED_STRING","'_values'",644],")",")",";",["T_WHITESPACE","\n      ",644],"}",["T_WHITESPACE","\n    ",645],"}",["T_WHITESPACE","\n  ",646],"}",["T_WHITESPACE","\n\n  ",647],["T_DOC_COMMENT","\/**\n   * Builds the cache ID for the passed in entity ID.\n   *\n   * @param int $id\n   *   Entity ID for which the cache ID should be built.\n   *\n   * @return string\n   *   Cache ID that can be passed to the cache backend.\n   *\/",649],["T_WHITESPACE","\n  ",657],["T_PROTECTED","protected",658],["T_WHITESPACE"," ",658],["T_FUNCTION","function",658],["T_WHITESPACE"," ",658],["T_STRING","buildCacheId",658],"(",["T_VARIABLE","$id",658],")",["T_WHITESPACE"," ",658],"{",["T_WHITESPACE","\n    ",658],["T_RETURN","return",659],["T_WHITESPACE"," ",659],"\"",["T_ENCAPSED_AND_WHITESPACE","values:",659],["T_CURLY_OPEN","{",659],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","entityTypeId",659],"}",["T_ENCAPSED_AND_WHITESPACE",":",659],["T_VARIABLE","$id",659],"\"",";",["T_WHITESPACE","\n  ",659],"}",["T_WHITESPACE","\n\n",660],"}",["T_WHITESPACE","\n",662]]
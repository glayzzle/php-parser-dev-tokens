[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Sql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ContentEntityTypeInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldStorageDefinitionInterface",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Defines a default table mapping class.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","DefaultTableMapping",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","TableMappingInterface",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * The entity type definition.\n   *\n   * @var \\Drupal\\Core\\Entity\\ContentEntityTypeInterface\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$entityType",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The field storage definitions of this mapping.\n   *\n   * @var \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface[]\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$fieldStorageDefinitions",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",")",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * A list of field names per table.\n   *\n   * This corresponds to the return value of\n   * TableMappingInterface::getFieldNames() except that this variable is\n   * additionally keyed by table name.\n   *\n   * @var array[]\n   *\/",27],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$fieldNames",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",")",";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * A list of database columns which store denormalized data per table.\n   *\n   * This corresponds to the return value of\n   * TableMappingInterface::getExtraColumns() except that this variable is\n   * additionally keyed by table name.\n   *\n   * @var array[]\n   *\/",38],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$extraColumns",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",")",";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * A mapping of column names per field name.\n   *\n   * This corresponds to the return value of\n   * TableMappingInterface::getColumnNames() except that this variable is\n   * additionally keyed by field name.\n   *\n   * This data is derived from static::$storageDefinitions, but is stored\n   * separately to avoid repeated processing.\n   *\n   * @var array[]\n   *\/",49],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$columnMapping",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_ARRAY","array",61],"(",")",";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * A list of all database columns per table.\n   *\n   * This corresponds to the return value of\n   * TableMappingInterface::getAllColumns() except that this variable is\n   * additionally keyed by table name.\n   *\n   * This data is derived from static::$storageDefinitions, static::$fieldNames,\n   * and static::$extraColumns, but is stored separately to avoid repeated\n   * processing.\n   *\n   * @var array[]\n   *\/",63],["T_WHITESPACE","\n  ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$allColumns",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n\n  ",76],["T_DOC_COMMENT","\/**\n   * Constructs a DefaultTableMapping.\n   *\n   * @param \\Drupal\\Core\\Entity\\ContentEntityTypeInterface $entity_type\n   *   The entity type definition.\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface[] $storage_definitions\n   *   A list of field storage definitions that should be available for the\n   *   field columns of this table mapping.\n   *\/",78],["T_WHITESPACE","\n  ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","__construct",87],"(",["T_STRING","ContentEntityTypeInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$entity_type",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$storage_definitions",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entityType",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$entity_type",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","fieldStorageDefinitions",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$storage_definitions",89],";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","getTableNames",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_STRING","array_unique",96],"(",["T_STRING","array_merge",96],"(",["T_STRING","array_keys",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","fieldNames",96],")",",",["T_WHITESPACE"," ",96],["T_STRING","array_keys",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","extraColumns",96],")",")",")",";",["T_WHITESPACE","\n  ",96],"}",["T_WHITESPACE","\n\n  ",97],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",99],["T_WHITESPACE","\n  ",101],["T_PUBLIC","public",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","getAllColumns",102],"(",["T_VARIABLE","$table_name",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n    ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_ISSET","isset",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","allColumns",103],"[",["T_VARIABLE","$table_name",103],"]",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","allColumns",104],"[",["T_VARIABLE","$table_name",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",")",";",["T_WHITESPACE","\n\n      ",104],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getFieldNames",106],"(",["T_VARIABLE","$table_name",106],")",["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$field_name",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","allColumns",107],"[",["T_VARIABLE","$table_name",107],"]",["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_STRING","array_merge",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","allColumns",107],"[",["T_VARIABLE","$table_name",107],"]",",",["T_WHITESPACE"," ",107],["T_STRING","array_values",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getColumnNames",107],"(",["T_VARIABLE","$field_name",107],")",")",")",";",["T_WHITESPACE","\n      ",107],"}",["T_WHITESPACE","\n\n      ",108],["T_COMMENT","\/\/ There is just one field for each dedicated storage table, thus\n",110],["T_WHITESPACE","      ",111],["T_COMMENT","\/\/ $field_name can only refer to it.\n",111],["T_WHITESPACE","      ",112],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_ISSET","isset",112],"(",["T_VARIABLE","$field_name",112],")",["T_WHITESPACE"," ",112],["T_BOOLEAN_AND","&&",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","requiresDedicatedTableStorage",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fieldStorageDefinitions",112],"[",["T_VARIABLE","$field_name",112],"]",")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n        ",112],["T_COMMENT","\/\/ Unlike in shared storage tables, in dedicated ones field columns are\n",113],["T_WHITESPACE","        ",114],["T_COMMENT","\/\/ positioned last.\n",114],["T_WHITESPACE","        ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","allColumns",115],"[",["T_VARIABLE","$table_name",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_STRING","array_merge",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getExtraColumns",115],"(",["T_VARIABLE","$table_name",115],")",",",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","allColumns",115],"[",["T_VARIABLE","$table_name",115],"]",")",";",["T_WHITESPACE","\n      ",115],"}",["T_WHITESPACE","\n      ",116],["T_ELSE","else",117],["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n        ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","allColumns",118],"[",["T_VARIABLE","$table_name",118],"]",["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_merge",118],"(",["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","allColumns",118],"[",["T_VARIABLE","$table_name",118],"]",",",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getExtraColumns",118],"(",["T_VARIABLE","$table_name",118],")",")",";",["T_WHITESPACE","\n      ",118],"}",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n    ",120],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","allColumns",121],"[",["T_VARIABLE","$table_name",121],"]",";",["T_WHITESPACE","\n  ",121],"}",["T_WHITESPACE","\n\n  ",122],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",124],["T_WHITESPACE","\n  ",126],["T_PUBLIC","public",127],["T_WHITESPACE"," ",127],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","getFieldNames",127],"(",["T_VARIABLE","$table_name",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n    ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_ISSET","isset",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","fieldNames",128],"[",["T_VARIABLE","$table_name",128],"]",")",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","fieldNames",129],"[",["T_VARIABLE","$table_name",129],"]",";",["T_WHITESPACE","\n    ",129],"}",["T_WHITESPACE","\n    ",130],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",")",";",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n\n  ",132],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",134],["T_WHITESPACE","\n  ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getFieldTableName",137],"(",["T_VARIABLE","$field_name",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$result",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","NULL",138],";",["T_WHITESPACE","\n\n    ",138],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_ISSET","isset",140],"(",["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","fieldStorageDefinitions",140],"[",["T_VARIABLE","$field_name",140],"]",")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n      ",140],["T_COMMENT","\/\/ Since a field may be stored in more than one table, we inspect tables\n",141],["T_WHITESPACE","      ",142],["T_COMMENT","\/\/ in order of relevance: the data table if present is the main place\n",142],["T_WHITESPACE","      ",143],["T_COMMENT","\/\/ where field data is stored, otherwise the base table is responsible for\n",143],["T_WHITESPACE","      ",144],["T_COMMENT","\/\/ storing field data. Revision metadata is an exception as it's stored\n",144],["T_WHITESPACE","      ",145],["T_COMMENT","\/\/ only in the revision table.\n",145],["T_WHITESPACE","      ",146],["T_COMMENT","\/\/ @todo The table mapping itself should know about entity tables. See\n",146],["T_WHITESPACE","      ",147],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/2274017.\n",147],["T_WHITESPACE","      ",148],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\Sql\\SqlContentEntityStorage $storage *\/",148],["T_WHITESPACE","\n      ",148],["T_VARIABLE","$storage",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_NS_SEPARATOR","\\",149],["T_STRING","Drupal",149],["T_DOUBLE_COLON","::",149],["T_STRING","entityManager",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","getStorage",149],"(",["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","entityType",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","id",149],"(",")",")",";",["T_WHITESPACE","\n      ",149],["T_VARIABLE","$storage_definition",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","fieldStorageDefinitions",150],"[",["T_VARIABLE","$field_name",150],"]",";",["T_WHITESPACE","\n      ",150],["T_VARIABLE","$table_names",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$storage",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","getDataTable",152],"(",")",",",["T_WHITESPACE","\n        ",152],["T_VARIABLE","$storage",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getBaseTable",153],"(",")",",",["T_WHITESPACE","\n        ",153],["T_VARIABLE","$storage",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getRevisionTable",154],"(",")",",",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getDedicatedDataTableName",155],"(",["T_VARIABLE","$storage_definition",155],")",",",["T_WHITESPACE","\n      ",155],")",";",["T_WHITESPACE","\n\n      ",156],["T_COMMENT","\/\/ Collect field columns.\n",158],["T_WHITESPACE","      ",159],["T_VARIABLE","$field_columns",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",")",";",["T_WHITESPACE","\n      ",159],["T_FOREACH","foreach",160],["T_WHITESPACE"," ",160],"(",["T_STRING","array_keys",160],"(",["T_VARIABLE","$storage_definition",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getColumns",160],"(",")",")",["T_WHITESPACE"," ",160],["T_AS","as",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$property_name",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$field_columns",161],"[","]",["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getFieldColumnName",161],"(",["T_VARIABLE","$storage_definition",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$property_name",161],")",";",["T_WHITESPACE","\n      ",161],"}",["T_WHITESPACE","\n\n      ",162],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_STRING","array_filter",164],"(",["T_VARIABLE","$table_names",164],")",["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$table_name",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$columns",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getAllColumns",165],"(",["T_VARIABLE","$table_name",165],")",";",["T_WHITESPACE","\n        ",165],["T_COMMENT","\/\/ We assume finding one field column belonging to the mapping is enough\n",166],["T_WHITESPACE","        ",167],["T_COMMENT","\/\/ to identify the field table.\n",167],["T_WHITESPACE","        ",168],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_STRING","array_intersect",168],"(",["T_VARIABLE","$columns",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$field_columns",168],")",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n          ",168],["T_VARIABLE","$result",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$table_name",169],";",["T_WHITESPACE","\n          ",169],["T_BREAK","break",170],";",["T_WHITESPACE","\n        ",170],"}",["T_WHITESPACE","\n      ",171],"}",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_IF","if",175],["T_WHITESPACE"," ",175],"(","!",["T_ISSET","isset",175],"(",["T_VARIABLE","$result",175],")",")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n      ",175],["T_THROW","throw",176],["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","SqlContentEntityStorageException",176],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Table information not available for the '",176],["T_VARIABLE","$field_name",176],["T_ENCAPSED_AND_WHITESPACE","' field.",176],"\"",")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$result",179],";",["T_WHITESPACE","\n  ",179],"}",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",182],["T_WHITESPACE","\n  ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","getColumnNames",185],"(",["T_VARIABLE","$field_name",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n    ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_ISSET","isset",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","columnMapping",186],"[",["T_VARIABLE","$field_name",186],"]",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n      ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","columnMapping",187],"[",["T_VARIABLE","$field_name",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_ARRAY","array",187],"(",")",";",["T_WHITESPACE","\n      ",187],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_ISSET","isset",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","fieldStorageDefinitions",188],"[",["T_VARIABLE","$field_name",188],"]",")",["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],"!",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","fieldStorageDefinitions",188],"[",["T_VARIABLE","$field_name",188],"]",["T_OBJECT_OPERATOR","->",188],["T_STRING","hasCustomStorage",188],"(",")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n        ",188],["T_FOREACH","foreach",189],["T_WHITESPACE"," ",189],"(",["T_STRING","array_keys",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","fieldStorageDefinitions",189],"[",["T_VARIABLE","$field_name",189],"]",["T_OBJECT_OPERATOR","->",189],["T_STRING","getColumns",189],"(",")",")",["T_WHITESPACE"," ",189],["T_AS","as",189],["T_WHITESPACE"," ",189],["T_VARIABLE","$property_name",189],")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n          ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","columnMapping",190],"[",["T_VARIABLE","$field_name",190],"]","[",["T_VARIABLE","$property_name",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getFieldColumnName",190],"(",["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","fieldStorageDefinitions",190],"[",["T_VARIABLE","$field_name",190],"]",",",["T_WHITESPACE"," ",190],["T_VARIABLE","$property_name",190],")",";",["T_WHITESPACE","\n        ",190],"}",["T_WHITESPACE","\n      ",191],"}",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n    ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","columnMapping",194],"[",["T_VARIABLE","$field_name",194],"]",";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n  ",195],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",197],["T_WHITESPACE","\n  ",199],["T_PUBLIC","public",200],["T_WHITESPACE"," ",200],["T_FUNCTION","function",200],["T_WHITESPACE"," ",200],["T_STRING","getFieldColumnName",200],"(",["T_STRING","FieldStorageDefinitionInterface",200],["T_WHITESPACE"," ",200],["T_VARIABLE","$storage_definition",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$property_name",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$field_name",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$storage_definition",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getName",201],"(",")",";",["T_WHITESPACE","\n\n    ",201],["T_IF","if",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","allowsSharedTableStorage",203],"(",["T_VARIABLE","$storage_definition",203],")",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n      ",203],["T_VARIABLE","$column_name",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_STRING","count",204],"(",["T_VARIABLE","$storage_definition",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getColumns",204],"(",")",")",["T_WHITESPACE"," ",204],["T_IS_EQUAL","==",204],["T_WHITESPACE"," ",204],["T_LNUMBER","1",204],["T_WHITESPACE"," ",204],"?",["T_WHITESPACE"," ",204],["T_VARIABLE","$field_name",204],["T_WHITESPACE"," ",204],":",["T_WHITESPACE"," ",204],["T_VARIABLE","$field_name",204],["T_WHITESPACE"," ",204],".",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'__'",204],["T_WHITESPACE"," ",204],".",["T_WHITESPACE"," ",204],["T_VARIABLE","$property_name",204],";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n    ",205],["T_ELSEIF","elseif",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","requiresDedicatedTableStorage",206],"(",["T_VARIABLE","$storage_definition",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n      ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$property_name",207],["T_WHITESPACE"," ",207],["T_IS_EQUAL","==",207],["T_WHITESPACE"," ",207],["T_STRING","TableMappingInterface",207],["T_DOUBLE_COLON","::",207],["T_STRING","DELTA",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$column_name",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'delta'",208],";",["T_WHITESPACE","\n      ",208],"}",["T_WHITESPACE","\n      ",209],["T_ELSE","else",210],["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$column_name",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],"!",["T_STRING","in_array",211],"(",["T_VARIABLE","$property_name",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getReservedColumns",211],"(",")",")",["T_WHITESPACE"," ",211],"?",["T_WHITESPACE"," ",211],["T_VARIABLE","$field_name",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'_'",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_VARIABLE","$property_name",211],["T_WHITESPACE"," ",211],":",["T_WHITESPACE"," ",211],["T_VARIABLE","$property_name",211],";",["T_WHITESPACE","\n      ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n    ",213],["T_ELSE","else",214],["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n      ",214],["T_THROW","throw",215],["T_WHITESPACE"," ",215],["T_NEW","new",215],["T_WHITESPACE"," ",215],["T_STRING","SqlContentEntityStorageException",215],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Column information not available for the '",215],["T_VARIABLE","$field_name",215],["T_ENCAPSED_AND_WHITESPACE","' field.",215],"\"",")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n\n    ",216],["T_RETURN","return",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$column_name",218],";",["T_WHITESPACE","\n  ",218],"}",["T_WHITESPACE","\n\n  ",219],["T_DOC_COMMENT","\/**\n   * Adds field columns for a table to the table mapping.\n   *\n   * @param string $table_name\n   *   The name of the table to add the field column for.\n   * @param string[] $field_names\n   *   A list of field names to add the columns for.\n   *\n   * @return $this\n   *\/",221],["T_WHITESPACE","\n  ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","setFieldNames",231],"(",["T_VARIABLE","$table_name",231],",",["T_WHITESPACE"," ",231],["T_ARRAY","array",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$field_names",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","fieldNames",232],"[",["T_VARIABLE","$table_name",232],"]",["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$field_names",232],";",["T_WHITESPACE","\n    ",232],["T_COMMENT","\/\/ Force the re-computation of the column list.\n",233],["T_WHITESPACE","    ",234],["T_UNSET","unset",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","allColumns",234],"[",["T_VARIABLE","$table_name",234],"]",")",";",["T_WHITESPACE","\n    ",234],["T_RETURN","return",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],";",["T_WHITESPACE","\n  ",235],"}",["T_WHITESPACE","\n\n  ",236],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",238],["T_WHITESPACE","\n  ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","getExtraColumns",241],"(",["T_VARIABLE","$table_name",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n    ",241],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_ISSET","isset",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","extraColumns",242],"[",["T_VARIABLE","$table_name",242],"]",")",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n      ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","extraColumns",243],"[",["T_VARIABLE","$table_name",243],"]",";",["T_WHITESPACE","\n    ",243],"}",["T_WHITESPACE","\n    ",244],["T_RETURN","return",245],["T_WHITESPACE"," ",245],["T_ARRAY","array",245],"(",")",";",["T_WHITESPACE","\n  ",245],"}",["T_WHITESPACE","\n\n  ",246],["T_DOC_COMMENT","\/**\n   * Adds a extra columns for a table to the table mapping.\n   *\n   * @param string $table_name\n   *   The name of table to add the extra columns for.\n   * @param string[] $column_names\n   *   The list of column names.\n   *\n   * @return $this\n   *\/",248],["T_WHITESPACE","\n  ",257],["T_PUBLIC","public",258],["T_WHITESPACE"," ",258],["T_FUNCTION","function",258],["T_WHITESPACE"," ",258],["T_STRING","setExtraColumns",258],"(",["T_VARIABLE","$table_name",258],",",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$column_names",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","extraColumns",259],"[",["T_VARIABLE","$table_name",259],"]",["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$column_names",259],";",["T_WHITESPACE","\n    ",259],["T_COMMENT","\/\/ Force the re-computation of the column list.\n",260],["T_WHITESPACE","    ",261],["T_UNSET","unset",261],"(",["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","allColumns",261],"[",["T_VARIABLE","$table_name",261],"]",")",";",["T_WHITESPACE","\n    ",261],["T_RETURN","return",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],";",["T_WHITESPACE","\n  ",262],"}",["T_WHITESPACE","\n\n  ",263],["T_DOC_COMMENT","\/**\n   * Checks whether the given field can be stored in a shared table.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface $storage_definition\n   *   The field storage definition.\n   *\n   * @return bool\n   *   TRUE if the field can be stored in a dedicated table, FALSE otherwise.\n   *\/",265],["T_WHITESPACE","\n  ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","allowsSharedTableStorage",274],"(",["T_STRING","FieldStorageDefinitionInterface",274],["T_WHITESPACE"," ",274],["T_VARIABLE","$storage_definition",274],")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n    ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],"!",["T_VARIABLE","$storage_definition",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","hasCustomStorage",275],"(",")",["T_WHITESPACE"," ",275],["T_BOOLEAN_AND","&&",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$storage_definition",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","isBaseField",275],"(",")",["T_WHITESPACE"," ",275],["T_BOOLEAN_AND","&&",275],["T_WHITESPACE"," ",275],"!",["T_VARIABLE","$storage_definition",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","isMultiple",275],"(",")",";",["T_WHITESPACE","\n  ",275],"}",["T_WHITESPACE","\n\n  ",276],["T_DOC_COMMENT","\/**\n   * Checks whether the given field has to be stored in a dedicated table.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface $storage_definition\n   *   The field storage definition.\n   *\n   * @return bool\n   *   TRUE if the field can be stored in a dedicated table, FALSE otherwise.\n   *\/",278],["T_WHITESPACE","\n  ",286],["T_PUBLIC","public",287],["T_WHITESPACE"," ",287],["T_FUNCTION","function",287],["T_WHITESPACE"," ",287],["T_STRING","requiresDedicatedTableStorage",287],"(",["T_STRING","FieldStorageDefinitionInterface",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$storage_definition",287],")",["T_WHITESPACE"," ",287],"{",["T_WHITESPACE","\n    ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],"!",["T_VARIABLE","$storage_definition",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","hasCustomStorage",288],"(",")",["T_WHITESPACE"," ",288],["T_BOOLEAN_AND","&&",288],["T_WHITESPACE"," ",288],"!",["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","allowsSharedTableStorage",288],"(",["T_VARIABLE","$storage_definition",288],")",";",["T_WHITESPACE","\n  ",288],"}",["T_WHITESPACE","\n\n  ",289],["T_DOC_COMMENT","\/**\n   * Gets a list of dedicated table names for this mapping.\n   *\n   * @return string[]\n   *   An array of table names.\n   *\/",291],["T_WHITESPACE","\n  ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","getDedicatedTableNames",297],"(",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$table_mapping",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$definitions",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING","array_filter",299],"(",["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","fieldStorageDefinitions",299],",",["T_WHITESPACE"," ",299],["T_FUNCTION","function",299],"(",["T_VARIABLE","$definition",299],")",["T_WHITESPACE"," ",299],["T_USE","use",299],["T_WHITESPACE"," ",299],"(",["T_VARIABLE","$table_mapping",299],")",["T_WHITESPACE"," ",299],"{",["T_WHITESPACE"," ",299],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$table_mapping",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","requiresDedicatedTableStorage",299],"(",["T_VARIABLE","$definition",299],")",";",["T_WHITESPACE"," ",299],"}",")",";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$data_tables",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_STRING","array_map",300],"(",["T_FUNCTION","function",300],"(",["T_VARIABLE","$definition",300],")",["T_WHITESPACE"," ",300],["T_USE","use",300],["T_WHITESPACE"," ",300],"(",["T_VARIABLE","$table_mapping",300],")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE"," ",300],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$table_mapping",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","getDedicatedDataTableName",300],"(",["T_VARIABLE","$definition",300],")",";",["T_WHITESPACE"," ",300],"}",",",["T_WHITESPACE"," ",300],["T_VARIABLE","$definitions",300],")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$revision_tables",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","array_map",301],"(",["T_FUNCTION","function",301],"(",["T_VARIABLE","$definition",301],")",["T_WHITESPACE"," ",301],["T_USE","use",301],["T_WHITESPACE"," ",301],"(",["T_VARIABLE","$table_mapping",301],")",["T_WHITESPACE"," ",301],"{",["T_WHITESPACE"," ",301],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$table_mapping",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getDedicatedRevisionTableName",301],"(",["T_VARIABLE","$definition",301],")",";",["T_WHITESPACE"," ",301],"}",",",["T_WHITESPACE"," ",301],["T_VARIABLE","$definitions",301],")",";",["T_WHITESPACE","\n    ",301],["T_VARIABLE","$dedicated_tables",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_STRING","array_merge",302],"(",["T_STRING","array_values",302],"(",["T_VARIABLE","$data_tables",302],")",",",["T_WHITESPACE"," ",302],["T_STRING","array_values",302],"(",["T_VARIABLE","$revision_tables",302],")",")",";",["T_WHITESPACE","\n    ",302],["T_RETURN","return",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$dedicated_tables",303],";",["T_WHITESPACE","\n  ",303],"}",["T_WHITESPACE","\n\n  ",304],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",306],["T_WHITESPACE","\n  ",308],["T_PUBLIC","public",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","getReservedColumns",309],"(",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n    ",309],["T_RETURN","return",310],["T_WHITESPACE"," ",310],["T_ARRAY","array",310],"(",["T_CONSTANT_ENCAPSED_STRING","'deleted'",310],")",";",["T_WHITESPACE","\n  ",310],"}",["T_WHITESPACE","\n\n  ",311],["T_DOC_COMMENT","\/**\n   * Generates a table name for a field data table.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface $storage_definition\n   *   The field storage definition.\n   * @param bool $is_deleted\n   *   (optional) Whether the table name holding the values of a deleted field\n   *   should be returned.\n   *\n   * @return string\n   *   A string containing the generated name for the database table.\n   *\/",313],["T_WHITESPACE","\n  ",324],["T_PUBLIC","public",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","getDedicatedDataTableName",325],"(",["T_STRING","FieldStorageDefinitionInterface",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$storage_definition",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$is_deleted",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","FALSE",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n    ",325],["T_IF","if",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$is_deleted",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n      ",326],["T_COMMENT","\/\/ When a field is a deleted, the table is renamed to\n",327],["T_WHITESPACE","      ",328],["T_COMMENT","\/\/ {field_deleted_data_FIELD_UUID}. To make sure we don't end up with\n",328],["T_WHITESPACE","      ",329],["T_COMMENT","\/\/ table names longer than 64 characters, we hash the unique storage\n",329],["T_WHITESPACE","      ",330],["T_COMMENT","\/\/ identifier and return the first 10 characters so we end up with a short\n",330],["T_WHITESPACE","      ",331],["T_COMMENT","\/\/ unique ID.\n",331],["T_WHITESPACE","      ",332],["T_RETURN","return",332],["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","\"field_deleted_data_\"",332],["T_WHITESPACE"," ",332],".",["T_WHITESPACE"," ",332],["T_STRING","substr",332],"(",["T_STRING","hash",332],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",332],",",["T_WHITESPACE"," ",332],["T_VARIABLE","$storage_definition",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","getUniqueStorageIdentifier",332],"(",")",")",",",["T_WHITESPACE"," ",332],["T_LNUMBER","0",332],",",["T_WHITESPACE"," ",332],["T_LNUMBER","10",332],")",";",["T_WHITESPACE","\n    ",332],"}",["T_WHITESPACE","\n    ",333],["T_ELSE","else",334],["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n      ",334],["T_RETURN","return",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","generateFieldTableName",335],"(",["T_VARIABLE","$storage_definition",335],",",["T_WHITESPACE"," ",335],["T_STRING","FALSE",335],")",";",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n  ",336],"}",["T_WHITESPACE","\n\n  ",337],["T_DOC_COMMENT","\/**\n   * Generates a table name for a field revision archive table.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface $storage_definition\n   *   The field storage definition.\n   * @param bool $is_deleted\n   *   (optional) Whether the table name holding the values of a deleted field\n   *   should be returned.\n   *\n   * @return string\n   *   A string containing the generated name for the database table.\n   *\/",339],["T_WHITESPACE","\n  ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","getDedicatedRevisionTableName",351],"(",["T_STRING","FieldStorageDefinitionInterface",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$storage_definition",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$is_deleted",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","FALSE",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n    ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$is_deleted",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n      ",352],["T_COMMENT","\/\/ When a field is a deleted, the table is renamed to\n",353],["T_WHITESPACE","      ",354],["T_COMMENT","\/\/ {field_deleted_revision_FIELD_UUID}. To make sure we don't end up with\n",354],["T_WHITESPACE","      ",355],["T_COMMENT","\/\/ table names longer than 64 characters, we hash the unique storage\n",355],["T_WHITESPACE","      ",356],["T_COMMENT","\/\/ identifier and return the first 10 characters so we end up with a short\n",356],["T_WHITESPACE","      ",357],["T_COMMENT","\/\/ unique ID.\n",357],["T_WHITESPACE","      ",358],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","\"field_deleted_revision_\"",358],["T_WHITESPACE"," ",358],".",["T_WHITESPACE"," ",358],["T_STRING","substr",358],"(",["T_STRING","hash",358],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$storage_definition",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getUniqueStorageIdentifier",358],"(",")",")",",",["T_WHITESPACE"," ",358],["T_LNUMBER","0",358],",",["T_WHITESPACE"," ",358],["T_LNUMBER","10",358],")",";",["T_WHITESPACE","\n    ",358],"}",["T_WHITESPACE","\n    ",359],["T_ELSE","else",360],["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n      ",360],["T_RETURN","return",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","generateFieldTableName",361],"(",["T_VARIABLE","$storage_definition",361],",",["T_WHITESPACE"," ",361],["T_STRING","TRUE",361],")",";",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n  ",362],"}",["T_WHITESPACE","\n\n  ",363],["T_DOC_COMMENT","\/**\n   * Generates a safe and unambiguous field table name.\n   *\n   * The method accounts for a maximum table name length of 64 characters, and\n   * takes care of disambiguation.\n   *\n   * @param \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface $storage_definition\n   *   The field storage definition.\n   * @param bool $revision\n   *   TRUE for revision table, FALSE otherwise.\n   *\n   * @return string\n   *   The final table name.\n   *\/",365],["T_WHITESPACE","\n  ",378],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","generateFieldTableName",379],"(",["T_STRING","FieldStorageDefinitionInterface",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$storage_definition",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$revision",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n    ",379],["T_VARIABLE","$separator",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$revision",380],["T_WHITESPACE"," ",380],"?",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'_revision__'",380],["T_WHITESPACE"," ",380],":",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'__'",380],";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$table_name",381],["T_WHITESPACE"," ",381],"=",["T_WHITESPACE"," ",381],["T_VARIABLE","$storage_definition",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getTargetEntityTypeId",381],"(",")",["T_WHITESPACE"," ",381],".",["T_WHITESPACE"," ",381],["T_VARIABLE","$separator",381],["T_WHITESPACE"," ",381],".",["T_WHITESPACE"," ",381],["T_VARIABLE","$storage_definition",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","getName",381],"(",")",";",["T_WHITESPACE","\n    ",381],["T_COMMENT","\/\/ Limit the string to 48 characters, keeping a 16 characters margin for db\n",382],["T_WHITESPACE","    ",383],["T_COMMENT","\/\/ prefixes.\n",383],["T_WHITESPACE","    ",384],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_STRING","strlen",384],"(",["T_VARIABLE","$table_name",384],")",["T_WHITESPACE"," ",384],">",["T_WHITESPACE"," ",384],["T_LNUMBER","48",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n      ",384],["T_COMMENT","\/\/ Use a shorter separator, a truncated entity_type, and a hash of the\n",385],["T_WHITESPACE","      ",386],["T_COMMENT","\/\/ field UUID.\n",386],["T_WHITESPACE","      ",387],["T_VARIABLE","$separator",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_VARIABLE","$revision",387],["T_WHITESPACE"," ",387],"?",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'_r__'",387],["T_WHITESPACE"," ",387],":",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'__'",387],";",["T_WHITESPACE","\n      ",387],["T_COMMENT","\/\/ Truncate to the same length for the current and revision tables.\n",388],["T_WHITESPACE","      ",389],["T_VARIABLE","$entity_type",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","substr",389],"(",["T_VARIABLE","$storage_definition",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getTargetEntityTypeId",389],"(",")",",",["T_WHITESPACE"," ",389],["T_LNUMBER","0",389],",",["T_WHITESPACE"," ",389],["T_LNUMBER","34",389],")",";",["T_WHITESPACE","\n      ",389],["T_VARIABLE","$field_hash",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","substr",390],"(",["T_STRING","hash",390],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$storage_definition",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","getUniqueStorageIdentifier",390],"(",")",")",",",["T_WHITESPACE"," ",390],["T_LNUMBER","0",390],",",["T_WHITESPACE"," ",390],["T_LNUMBER","10",390],")",";",["T_WHITESPACE","\n      ",390],["T_VARIABLE","$table_name",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$entity_type",391],["T_WHITESPACE"," ",391],".",["T_WHITESPACE"," ",391],["T_VARIABLE","$separator",391],["T_WHITESPACE"," ",391],".",["T_WHITESPACE"," ",391],["T_VARIABLE","$field_hash",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n    ",392],["T_RETURN","return",393],["T_WHITESPACE"," ",393],["T_VARIABLE","$table_name",393],";",["T_WHITESPACE","\n  ",393],"}",["T_WHITESPACE","\n\n",394],"}",["T_WHITESPACE","\n",396]]
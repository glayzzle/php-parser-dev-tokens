[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Enhancer",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Routing",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Enhancer",5],["T_NS_SEPARATOR","\\",5],["T_STRING","RouteEnhancerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","HttpFoundation",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Request",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Routing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Route",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cmf",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Routing",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RouteObjectInterface",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Enhances an entity form route with the appropriate controller.\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","EntityRouteEnhancer",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","RouteEnhancerInterface",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","enhance",18],"(",["T_ARRAY","array",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$defaults",18],",",["T_WHITESPACE"," ",18],["T_STRING","Request",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$request",18],")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_IF","if",19],["T_WHITESPACE"," ",19],"(",["T_EMPTY","empty",19],"(",["T_VARIABLE","$defaults",19],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",19],"]",")",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n      ",19],["T_IF","if",20],["T_WHITESPACE"," ",20],"(","!",["T_EMPTY","empty",20],"(",["T_VARIABLE","$defaults",20],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_form'",20],"]",")",")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n        ",20],["T_VARIABLE","$defaults",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","enhanceEntityForm",21],"(",["T_VARIABLE","$defaults",21],",",["T_WHITESPACE"," ",21],["T_VARIABLE","$request",21],")",";",["T_WHITESPACE","\n      ",21],"}",["T_WHITESPACE","\n      ",22],["T_ELSEIF","elseif",23],["T_WHITESPACE"," ",23],"(","!",["T_EMPTY","empty",23],"(",["T_VARIABLE","$defaults",23],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_list'",23],"]",")",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n        ",23],["T_VARIABLE","$defaults",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","enhanceEntityList",24],"(",["T_VARIABLE","$defaults",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$request",24],")",";",["T_WHITESPACE","\n      ",24],"}",["T_WHITESPACE","\n      ",25],["T_ELSEIF","elseif",26],["T_WHITESPACE"," ",26],"(","!",["T_EMPTY","empty",26],"(",["T_VARIABLE","$defaults",26],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",26],"]",")",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n        ",26],["T_VARIABLE","$defaults",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","enhanceEntityView",27],"(",["T_VARIABLE","$defaults",27],",",["T_WHITESPACE"," ",27],["T_VARIABLE","$request",27],")",";",["T_WHITESPACE","\n      ",27],"}",["T_WHITESPACE","\n    ",28],"}",["T_WHITESPACE","\n    ",29],["T_RETURN","return",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$defaults",30],";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","applies",36],"(",["T_STRING","Route",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$route",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],"!",["T_VARIABLE","$route",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","hasDefault",37],"(",["T_CONSTANT_ENCAPSED_STRING","'_controller'",37],")",["T_WHITESPACE"," ",37],["T_BOOLEAN_AND","&&",37],["T_WHITESPACE","\n      ",37],"(",["T_VARIABLE","$route",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","hasDefault",38],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_form'",38],")",["T_WHITESPACE","\n        ",38],["T_BOOLEAN_OR","||",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$route",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","hasDefault",39],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_list'",39],")",["T_WHITESPACE","\n        ",39],["T_BOOLEAN_OR","||",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$route",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","hasDefault",40],"(",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",40],")",["T_WHITESPACE","\n      ",40],")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Update defaults for entity forms.\n   *\n   * @param array $defaults\n   *   The defaults to modify.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The Request instance.\n   *\n   * @return array\n   *   The modified defaults.\n   *\/",44],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","enhanceEntityForm",55],"(",["T_ARRAY","array",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$defaults",55],",",["T_WHITESPACE"," ",55],["T_STRING","Request",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$request",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$defaults",56],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'controller.entity_form:getContentResult'",56],";",["T_WHITESPACE","\n\n    ",56],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$defaults",58],";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Update defaults for an entity list.\n   *\n   * @param array $defaults\n   *   The defaults to modify.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The Request instance.\n   *\n   * @return array\n   *   The modified defaults.\n   *\/",62],["T_WHITESPACE","\n  ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","enhanceEntityList",73],"(",["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$defaults",73],",",["T_WHITESPACE"," ",73],["T_STRING","Request",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$request",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$defaults",74],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\Controller\\EntityListController::listing'",74],";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$defaults",75],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",75],"]",["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$defaults",75],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_list'",75],"]",";",["T_WHITESPACE","\n    ",75],["T_UNSET","unset",76],"(",["T_VARIABLE","$defaults",76],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_list'",76],"]",")",";",["T_WHITESPACE","\n\n    ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$defaults",78],";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Update defaults for an entity view.\n   *\n   * @param array $defaults\n   *   The defaults to modify.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The Request instance.\n   *\n   * @return array\n   *   The modified defaults.\n   *\n   * @throws \\RuntimeException\n   *   Thrown when an entity of a type cannot be found in a route.\n   *\/",81],["T_WHITESPACE","\n  ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","enhanceEntityView",95],"(",["T_ARRAY","array",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$defaults",95],",",["T_WHITESPACE"," ",95],["T_STRING","Request",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$request",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$defaults",96],"[",["T_CONSTANT_ENCAPSED_STRING","'_controller'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\Controller\\EntityViewController::view'",96],";",["T_WHITESPACE","\n    ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(",["T_STRING","strpos",97],"(",["T_VARIABLE","$defaults",97],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",97],"]",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'.'",97],")",["T_WHITESPACE"," ",97],["T_IS_NOT_IDENTICAL","!==",97],["T_WHITESPACE"," ",97],["T_STRING","FALSE",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n      ",97],["T_COMMENT","\/\/ The _entity_view entry is of the form entity_type.view_mode.\n",98],["T_WHITESPACE","      ",99],["T_LIST","list",99],"(",["T_VARIABLE","$entity_type",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$view_mode",99],")",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","explode",99],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$defaults",99],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",99],"]",")",";",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$defaults",100],"[",["T_CONSTANT_ENCAPSED_STRING","'view_mode'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$view_mode",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n    ",101],["T_ELSE","else",102],["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n      ",102],["T_COMMENT","\/\/ Only the entity type is nominated, the view mode will use the\n",103],["T_WHITESPACE","      ",104],["T_COMMENT","\/\/ default.\n",104],["T_WHITESPACE","      ",105],["T_VARIABLE","$entity_type",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$defaults",105],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",105],"]",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n    ",106],["T_COMMENT","\/\/ Set by reference so that we get the upcast value.\n",107],["T_WHITESPACE","    ",108],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_EMPTY","empty",108],"(",["T_VARIABLE","$defaults",108],"[",["T_VARIABLE","$entity_type",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$defaults",109],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity'",109],"]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],"&",["T_VARIABLE","$defaults",109],"[",["T_VARIABLE","$entity_type",109],"]",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n    ",110],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_COMMENT","\/\/ The entity is not keyed by its entity_type. Attempt to find it\n",112],["T_WHITESPACE","      ",113],["T_COMMENT","\/\/ using a converter.\n",113],["T_WHITESPACE","      ",114],["T_VARIABLE","$route",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$defaults",114],"[",["T_STRING","RouteObjectInterface",114],["T_DOUBLE_COLON","::",114],["T_STRING","ROUTE_OBJECT",114],"]",";",["T_WHITESPACE","\n      ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_VARIABLE","$route",115],["T_WHITESPACE"," ",115],["T_BOOLEAN_AND","&&",115],["T_WHITESPACE"," ",115],["T_STRING","is_object",115],"(",["T_VARIABLE","$route",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n        ",115],["T_VARIABLE","$options",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$route",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getOptions",116],"(",")",";",["T_WHITESPACE","\n        ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_ISSET","isset",117],"(",["T_VARIABLE","$options",117],"[",["T_CONSTANT_ENCAPSED_STRING","'parameters'",117],"]",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n          ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$options",118],"[",["T_CONSTANT_ENCAPSED_STRING","'parameters'",118],"]",["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$name",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$details",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n            ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_EMPTY","empty",119],"(",["T_VARIABLE","$details",119],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",119],"]",")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n              ",119],["T_VARIABLE","$type",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$details",120],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",120],"]",";",["T_WHITESPACE","\n              ",120],["T_COMMENT","\/\/ Type is of the form entity:{entity_type}.\n",121],["T_WHITESPACE","              ",122],["T_VARIABLE","$parameter_entity_type",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_STRING","substr",122],"(",["T_VARIABLE","$type",122],",",["T_WHITESPACE"," ",122],["T_STRING","strlen",122],"(",["T_CONSTANT_ENCAPSED_STRING","'entity:'",122],")",")",";",["T_WHITESPACE","\n              ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$entity_type",123],["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$parameter_entity_type",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n                ",123],["T_COMMENT","\/\/ We have the matching entity type. Set the '_entity' key\n",124],["T_WHITESPACE","                ",125],["T_COMMENT","\/\/ to point to this named placeholder. The entity in this\n",125],["T_WHITESPACE","                ",126],["T_COMMENT","\/\/ position is the one being rendered.\n",126],["T_WHITESPACE","                ",127],["T_VARIABLE","$defaults",127],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity'",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],"&",["T_VARIABLE","$defaults",127],"[",["T_VARIABLE","$name",127],"]",";",["T_WHITESPACE","\n              ",127],"}",["T_WHITESPACE","\n            ",128],"}",["T_WHITESPACE","\n          ",129],"}",["T_WHITESPACE","\n        ",130],"}",["T_WHITESPACE","\n        ",131],["T_ELSE","else",132],["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n          ",132],["T_THROW","throw",133],["T_WHITESPACE"," ",133],["T_NEW","new",133],["T_WHITESPACE"," ",133],["T_NS_SEPARATOR","\\",133],["T_STRING","RuntimeException",133],"(",["T_STRING","sprintf",133],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to find entity of type %s in route named %s'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$entity_type",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$defaults",133],"[",["T_STRING","RouteObjectInterface",133],["T_DOUBLE_COLON","::",133],["T_STRING","ROUTE_NAME",133],"]",")",")",";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n      ",134],"}",["T_WHITESPACE","\n      ",135],["T_ELSE","else",136],["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n        ",136],["T_THROW","throw",137],["T_WHITESPACE"," ",137],["T_NEW","new",137],["T_WHITESPACE"," ",137],["T_NS_SEPARATOR","\\",137],["T_STRING","RuntimeException",137],"(",["T_STRING","sprintf",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to find entity of type %s in route named %s'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$entity_type",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$defaults",137],"[",["T_STRING","RouteObjectInterface",137],["T_DOUBLE_COLON","::",137],["T_STRING","ROUTE_NAME",137],"]",")",")",";",["T_WHITESPACE","\n      ",137],"}",["T_WHITESPACE","\n    ",138],"}",["T_WHITESPACE","\n    ",139],["T_UNSET","unset",140],"(",["T_VARIABLE","$defaults",140],"[",["T_CONSTANT_ENCAPSED_STRING","'_entity_view'",140],"]",")",";",["T_WHITESPACE","\n\n    ",140],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$defaults",142],";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n",143],"}",["T_WHITESPACE","\n",145]]
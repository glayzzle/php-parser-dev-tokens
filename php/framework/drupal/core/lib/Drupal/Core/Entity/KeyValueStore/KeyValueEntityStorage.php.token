[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KeyValueStore",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Uuid",5],["T_NS_SEPARATOR","\\",5],["T_STRING","UuidInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Exception",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigEntityIdLengthException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FieldableEntityInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityMalformedException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityStorageBase",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityTypeInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","KeyValueStore",12],["T_NS_SEPARATOR","\\",12],["T_STRING","KeyValueStoreInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Language",13],["T_NS_SEPARATOR","\\",13],["T_STRING","LanguageManagerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Provides a key value backend for entities.\n *\n * @todo Entities that depend on auto-incrementing serial IDs need to explicitly\n *   provide an ID until a generic wrapper around the functionality provided by\n *   \\Drupal\\Core\\Database\\Connection::nextId() is added and used.\n * @todo Revisions are currently not supported.\n *\/",16],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","KeyValueEntityStorage",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","EntityStorageBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Length limit of the entity ID.\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_CONST","const",29],["T_WHITESPACE"," ",29],["T_STRING","MAX_ID_LENGTH",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_LNUMBER","128",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * The key value store.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$keyValueStore",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The UUID service.\n   *\n   * @var \\Drupal\\Component\\Uuid\\UuidInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$uuidService",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * The language manager.\n   *\n   * @var \\Drupal\\Core\\Language\\LanguageManagerInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$languageManager",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * Constructs a new KeyValueEntityStorage.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type.\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface $key_value_store\n   *   The key value store.\n   * @param \\Drupal\\Component\\Uuid\\UuidInterface $uuid_service\n   *   The UUID service.\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *   The language manager.\n   *\/",52],["T_WHITESPACE","\n  ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","__construct",64],"(",["T_STRING","EntityTypeInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$entity_type",64],",",["T_WHITESPACE"," ",64],["T_STRING","KeyValueStoreInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$key_value_store",64],",",["T_WHITESPACE"," ",64],["T_STRING","UuidInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$uuid_service",64],",",["T_WHITESPACE"," ",64],["T_STRING","LanguageManagerInterface",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$language_manager",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_STRING","parent",65],["T_DOUBLE_COLON","::",65],["T_STRING","__construct",65],"(",["T_VARIABLE","$entity_type",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","keyValueStore",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$key_value_store",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","uuidService",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$uuid_service",67],";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","languageManager",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$language_manager",68],";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Check if the entity type supports UUIDs.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","uuidKey",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","entityType",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getKey",71],"(",["T_CONSTANT_ENCAPSED_STRING","'uuid'",71],")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_STATIC","static",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","createInstance",77],"(",["T_STRING","ContainerInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$container",77],",",["T_WHITESPACE"," ",77],["T_STRING","EntityTypeInterface",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$entity_type",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_STATIC","static",78],"(",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$entity_type",79],",",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$container",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_CONSTANT_ENCAPSED_STRING","'keyvalue'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_storage__'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$entity_type",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","id",80],"(",")",")",",",["T_WHITESPACE","\n      ",80],["T_VARIABLE","$container",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",["T_CONSTANT_ENCAPSED_STRING","'uuid'",81],")",",",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$container",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","get",82],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",82],")",["T_WHITESPACE","\n    ",82],")",";",["T_WHITESPACE","\n  ",83],"}",["T_WHITESPACE","\n\n  ",84],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",86],["T_WHITESPACE","\n  ",88],["T_PUBLIC","public",89],["T_WHITESPACE"," ",89],["T_FUNCTION","function",89],["T_WHITESPACE"," ",89],["T_STRING","doCreate",89],"(",["T_ARRAY","array",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$values",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n    ",89],["T_COMMENT","\/\/ Set default language to site default if not provided.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$values",91],["T_WHITESPACE"," ",91],["T_PLUS_EQUAL","+=",91],["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getEntityType",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getKey",91],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",91],")",["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","languageManager",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getDefaultLanguage",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getId",91],"(",")",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$entity",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_NEW","new",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","entityClass",92],"(",["T_VARIABLE","$values",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","entityTypeId",92],")",";",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ @todo This is handled by ContentEntityStorageBase, which assumes\n",94],["T_WHITESPACE","    ",95],["T_COMMENT","\/\/   FieldableEntityInterface. The current approach in\n",95],["T_WHITESPACE","    ",96],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/1867228 improves this but does not solve it\n",96],["T_WHITESPACE","    ",97],["T_COMMENT","\/\/   completely.\n",97],["T_WHITESPACE","    ",98],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$entity",98],["T_WHITESPACE"," ",98],["T_INSTANCEOF","instanceof",98],["T_WHITESPACE"," ",98],["T_STRING","FieldableEntityInterface",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_FOREACH","foreach",99],["T_WHITESPACE"," ",99],"(",["T_VARIABLE","$entity",99],["T_WHITESPACE"," ",99],["T_AS","as",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$name",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$field",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n        ",99],["T_IF","if",100],["T_WHITESPACE"," ",100],"(",["T_ISSET","isset",100],"(",["T_VARIABLE","$values",100],"[",["T_VARIABLE","$name",100],"]",")",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n          ",100],["T_VARIABLE","$entity",101],["T_OBJECT_OPERATOR","->",101],["T_VARIABLE","$name",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$values",101],"[",["T_VARIABLE","$name",101],"]",";",["T_WHITESPACE","\n        ",101],"}",["T_WHITESPACE","\n        ",102],["T_ELSEIF","elseif",103],["T_WHITESPACE"," ",103],"(","!",["T_STRING","array_key_exists",103],"(",["T_VARIABLE","$name",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$values",103],")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n          ",103],["T_VARIABLE","$entity",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","get",104],"(",["T_VARIABLE","$name",104],")",["T_OBJECT_OPERATOR","->",104],["T_STRING","applyDefaultValue",104],"(",")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n        ",105],["T_UNSET","unset",106],"(",["T_VARIABLE","$values",106],"[",["T_VARIABLE","$name",106],"]",")",";",["T_WHITESPACE","\n      ",106],"}",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$entity",110],";",["T_WHITESPACE","\n  ",110],"}",["T_WHITESPACE","\n\n  ",111],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",113],["T_WHITESPACE","\n  ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","doLoadMultiple",116],"(",["T_ARRAY","array",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$ids",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_STRING","NULL",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_IF","if",117],["T_WHITESPACE"," ",117],"(",["T_EMPTY","empty",117],"(",["T_VARIABLE","$ids",117],")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$entities",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","keyValueStore",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getAll",118],"(",")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n    ",119],["T_ELSE","else",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$entities",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","keyValueStore",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","getMultiple",121],"(",["T_VARIABLE","$ids",121],")",";",["T_WHITESPACE","\n    ",121],"}",["T_WHITESPACE","\n    ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","mapFromStorageRecords",123],"(",["T_VARIABLE","$entities",123],")",";",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",126],["T_WHITESPACE","\n  ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","loadRevision",129],"(",["T_VARIABLE","$revision_id",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n    ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_STRING","NULL",130],";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",133],["T_WHITESPACE","\n  ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","deleteRevision",136],"(",["T_VARIABLE","$revision_id",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_STRING","NULL",137],";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",140],["T_WHITESPACE","\n  ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","doDelete",143],"(",["T_VARIABLE","$entities",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$entity_ids",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","array_keys",144],"(",["T_VARIABLE","$entities",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","keyValueStore",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","deleteMultiple",145],"(",["T_VARIABLE","$entity_ids",145],")",";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n  ",146],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",148],["T_WHITESPACE","\n  ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","save",151],"(",["T_STRING","EntityInterface",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$entity",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$id",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$entity",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","id",152],"(",")",";",["T_WHITESPACE","\n    ",152],["T_IF","if",153],["T_WHITESPACE"," ",153],"(",["T_VARIABLE","$id",153],["T_WHITESPACE"," ",153],["T_IS_IDENTICAL","===",153],["T_WHITESPACE"," ",153],["T_STRING","NULL",153],["T_WHITESPACE"," ",153],["T_BOOLEAN_OR","||",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$id",153],["T_WHITESPACE"," ",153],["T_IS_IDENTICAL","===",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","''",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_THROW","throw",154],["T_WHITESPACE"," ",154],["T_NEW","new",154],["T_WHITESPACE"," ",154],["T_STRING","EntityMalformedException",154],"(",["T_CONSTANT_ENCAPSED_STRING","'The entity does not have an ID.'",154],")",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_COMMENT","\/\/ Check the entity ID length.\n",157],["T_WHITESPACE","    ",158],["T_COMMENT","\/\/ @todo This is not config-specific, but serial IDs will likely never hit\n",158],["T_WHITESPACE","    ",159],["T_COMMENT","\/\/   this limit. Consider renaming the exception class.\n",159],["T_WHITESPACE","    ",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_STRING","strlen",160],"(",["T_VARIABLE","$entity",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","id",160],"(",")",")",["T_WHITESPACE"," ",160],">",["T_WHITESPACE"," ",160],["T_STATIC","static",160],["T_DOUBLE_COLON","::",160],["T_STRING","MAX_ID_LENGTH",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_THROW","throw",161],["T_WHITESPACE"," ",161],["T_NEW","new",161],["T_WHITESPACE"," ",161],["T_STRING","ConfigEntityIdLengthException",161],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Entity ID ",161],["T_CURLY_OPEN","{",161],["T_VARIABLE","$entity",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","id",161],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," exceeds maximum allowed length of ",161],"\"",["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_STATIC","static",161],["T_DOUBLE_COLON","::",161],["T_STRING","MAX_ID_LENGTH",161],["T_WHITESPACE"," ",161],".",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","' characters.'",161],")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n    ",162],["T_RETURN","return",163],["T_WHITESPACE"," ",163],["T_STRING","parent",163],["T_DOUBLE_COLON","::",163],["T_STRING","save",163],"(",["T_VARIABLE","$entity",163],")",";",["T_WHITESPACE","\n  ",163],"}",["T_WHITESPACE","\n\n  ",164],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",166],["T_WHITESPACE","\n  ",168],["T_PROTECTED","protected",169],["T_WHITESPACE"," ",169],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","doSave",169],"(",["T_VARIABLE","$id",169],",",["T_WHITESPACE"," ",169],["T_STRING","EntityInterface",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$entity",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$is_new",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$entity",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","isNew",170],"(",")",";",["T_WHITESPACE","\n\n    ",170],["T_COMMENT","\/\/ Save the entity data in the key value store.\n",172],["T_WHITESPACE","    ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","keyValueStore",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","set",173],"(",["T_VARIABLE","$entity",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$entity",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","toArray",173],"(",")",")",";",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ If this is a rename, delete the original entity.\n",175],["T_WHITESPACE","    ",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","has",176],"(",["T_VARIABLE","$id",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$entity",176],")",["T_WHITESPACE"," ",176],["T_BOOLEAN_AND","&&",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$id",176],["T_WHITESPACE"," ",176],["T_IS_NOT_IDENTICAL","!==",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$entity",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","id",176],"(",")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","keyValueStore",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","delete",177],"(",["T_VARIABLE","$id",177],")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n\n    ",178],["T_RETURN","return",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$is_new",180],["T_WHITESPACE"," ",180],"?",["T_WHITESPACE"," ",180],["T_STRING","SAVED_NEW",180],["T_WHITESPACE"," ",180],":",["T_WHITESPACE"," ",180],["T_STRING","SAVED_UPDATED",180],";",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n\n  ",181],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",183],["T_WHITESPACE","\n  ",185],["T_PROTECTED","protected",186],["T_WHITESPACE"," ",186],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","has",186],"(",["T_VARIABLE","$id",186],",",["T_WHITESPACE"," ",186],["T_STRING","EntityInterface",186],["T_WHITESPACE"," ",186],["T_VARIABLE","$entity",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n    ",186],["T_RETURN","return",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","keyValueStore",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","has",187],"(",["T_VARIABLE","$id",187],")",";",["T_WHITESPACE","\n  ",187],"}",["T_WHITESPACE","\n\n  ",188],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",190],["T_WHITESPACE","\n  ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","getQueryServiceName",193],"(",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n    ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'entity.query.keyvalue'",194],";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n",195],"}",["T_WHITESPACE","\n",197]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Display",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityViewDisplayInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityViewDisplay",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldItemInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldItemListInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Language",10],["T_NS_SEPARATOR","\\",10],["T_STRING","LanguageManagerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Render",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Element",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Theme",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Registry",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TypedData",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TranslatableInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Base class for entity view builders.\n *\n * @ingroup entity_api\n *\/",16],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","EntityViewBuilder",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","EntityHandlerBase",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","EntityHandlerInterface",21],",",["T_WHITESPACE"," ",21],["T_STRING","EntityViewBuilderInterface",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The type of entities for which this view builder is instantiated.\n   *\n   * @var string\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$entityTypeId",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Information about the entity type.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeInterface\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$entityType",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * The entity manager service.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$entityManager",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * The cache bin used to store the render cache.\n   *\n   * @var string\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$cacheBin",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'render'",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * The language manager.\n   *\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *\/",51],["T_WHITESPACE","\n  ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$languageManager",56],";",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * The theme registry.\n   *\n   * @var \\Drupal\\Core\\Theme\\Registry\n   *\/",58],["T_WHITESPACE","\n  ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$themeRegistry",63],";",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * The EntityViewDisplay objects created for individual field rendering.\n   *\n   * @see \\Drupal\\Core\\Entity\\EntityViewBuilder::getSingleFieldDisplay()\n   *\n   * @param \\Drupal\\Core\\Entity\\Display\\EntityViewDisplayInterface[]\n   *\/",65],["T_WHITESPACE","\n  ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$singleFieldDisplays",72],";",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityViewBuilder.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type definition.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *   The language manager.\n   * @param \\Drupal\\Core\\Theme\\Registry $theme_registry\n   *   The theme registry.\n   *\/",74],["T_WHITESPACE","\n  ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_STRING","EntityTypeInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$entity_type",86],",",["T_WHITESPACE"," ",86],["T_STRING","EntityManagerInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$entity_manager",86],",",["T_WHITESPACE"," ",86],["T_STRING","LanguageManagerInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$language_manager",86],",",["T_WHITESPACE"," ",86],["T_STRING","Registry",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$theme_registry",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","NULL",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","entityTypeId",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$entity_type",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","id",87],"(",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entityType",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$entity_type",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","entityManager",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$entity_manager",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","languageManager",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$language_manager",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","themeRegistry",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$theme_registry",91],["T_WHITESPACE"," ",91],"?",":",["T_WHITESPACE"," ",91],["T_NS_SEPARATOR","\\",91],["T_STRING","Drupal",91],["T_DOUBLE_COLON","::",91],["T_STRING","service",91],"(",["T_CONSTANT_ENCAPSED_STRING","'theme.registry'",91],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_STATIC","static",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","createInstance",97],"(",["T_STRING","ContainerInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$container",97],",",["T_WHITESPACE"," ",97],["T_STRING","EntityTypeInterface",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$entity_type",97],")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_NEW","new",98],["T_WHITESPACE"," ",98],["T_STATIC","static",98],"(",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$entity_type",99],",",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$container",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","get",100],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",100],")",",",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$container",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",101],")",",",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$container",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","get",102],"(",["T_CONSTANT_ENCAPSED_STRING","'theme.registry'",102],")",["T_WHITESPACE","\n    ",102],")",";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n  ",104],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",106],["T_WHITESPACE","\n  ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","view",109],"(",["T_STRING","EntityInterface",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$entity",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$view_mode",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'full'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$langcode",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","NULL",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$build_list",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","viewMultiple",110],"(",["T_ARRAY","array",110],"(",["T_VARIABLE","$entity",110],")",",",["T_WHITESPACE"," ",110],["T_VARIABLE","$view_mode",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$langcode",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ The default ::buildMultiple() #pre_render callback won't run, because we\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ extract a child element of the default renderable array. Thus we must\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ assign an alternative #pre_render callback that applies the necessary\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/ transformations and then still calls ::buildMultiple().\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$build",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$build_list",116],"[",["T_LNUMBER","0",116],"]",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$build",117],"[",["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",117],"]","[","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_VARIABLE","$this",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'build'",117],")",";",["T_WHITESPACE","\n\n    ",117],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$build",119],";",["T_WHITESPACE","\n  ",119],"}",["T_WHITESPACE","\n\n  ",120],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",122],["T_WHITESPACE","\n  ",124],["T_PUBLIC","public",125],["T_WHITESPACE"," ",125],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","viewMultiple",125],"(",["T_ARRAY","array",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$entities",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",")",",",["T_WHITESPACE"," ",125],["T_VARIABLE","$view_mode",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'full'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$langcode",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","NULL",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$build_list",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_ARRAY","array",126],"(",["T_WHITESPACE","\n      ",126],["T_CONSTANT_ENCAPSED_STRING","'#sorted'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_STRING","TRUE",127],",",["T_WHITESPACE","\n      ",127],["T_CONSTANT_ENCAPSED_STRING","'#pre_render'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_ARRAY","array",128],"(",["T_VARIABLE","$this",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'buildMultiple'",128],")",")",",",["T_WHITESPACE","\n    ",128],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$weight",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_LNUMBER","0",130],";",["T_WHITESPACE","\n    ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$entities",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$key",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$entity",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_COMMENT","\/\/ Ensure that from now on we are dealing with the proper translation\n",132],["T_WHITESPACE","      ",133],["T_COMMENT","\/\/ object.\n",133],["T_WHITESPACE","      ",134],["T_VARIABLE","$entity",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","entityManager",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getTranslationFromContext",134],"(",["T_VARIABLE","$entity",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$langcode",134],")",";",["T_WHITESPACE","\n\n      ",134],["T_COMMENT","\/\/ Set build defaults.\n",136],["T_WHITESPACE","      ",137],["T_VARIABLE","$build_list",137],"[",["T_VARIABLE","$key",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getBuildDefaults",137],"(",["T_VARIABLE","$entity",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$view_mode",137],")",";",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$entityType",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","entityTypeId",138],";",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","moduleHandler",139],"(",")",["T_OBJECT_OPERATOR","->",139],["T_STRING","alter",139],"(",["T_ARRAY","array",139],"(",["T_VARIABLE","$entityType",139],["T_WHITESPACE"," ",139],".",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'_build_defaults'",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'entity_build_defaults'",139],")",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$build_list",139],"[",["T_VARIABLE","$key",139],"]",",",["T_WHITESPACE"," ",139],["T_VARIABLE","$entity",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$view_mode",139],")",";",["T_WHITESPACE","\n\n      ",139],["T_VARIABLE","$build_list",141],"[",["T_VARIABLE","$key",141],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#weight'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$weight",141],["T_INC","++",141],";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$build_list",144],";",["T_WHITESPACE","\n  ",144],"}",["T_WHITESPACE","\n\n  ",145],["T_DOC_COMMENT","\/**\n   * Provides entity-specific defaults to the build process.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity for which the defaults should be provided.\n   * @param string $view_mode\n   *   The view mode that should be used.\n   *\n   * @return array\n   *\/",147],["T_WHITESPACE","\n  ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","getBuildDefaults",157],"(",["T_STRING","EntityInterface",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$entity",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$view_mode",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n    ",157],["T_COMMENT","\/\/ Allow modules to change the view mode.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$context",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[","]",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","moduleHandler",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","alter",160],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_view_mode'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$view_mode",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$entity",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$context",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_VARIABLE","$build",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_WHITESPACE","\n      ",162],"\"",["T_ENCAPSED_AND_WHITESPACE","#",163],["T_CURLY_OPEN","{",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","entityTypeId",163],"}","\"",["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$entity",163],",",["T_WHITESPACE","\n      ",163],["T_CONSTANT_ENCAPSED_STRING","'#view_mode'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$view_mode",164],",",["T_WHITESPACE","\n      ",164],["T_COMMENT","\/\/ Collect cache defaults for this entity.\n",165],["T_WHITESPACE","      ",166],["T_CONSTANT_ENCAPSED_STRING","'#cache'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",["T_WHITESPACE","\n        ",166],["T_CONSTANT_ENCAPSED_STRING","'tags'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_STRING","Cache",167],["T_DOUBLE_COLON","::",167],["T_STRING","mergeTags",167],"(",["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getCacheTags",167],"(",")",",",["T_WHITESPACE"," ",167],["T_VARIABLE","$entity",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getCacheTags",167],"(",")",")",",",["T_WHITESPACE","\n        ",167],["T_CONSTANT_ENCAPSED_STRING","'contexts'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$entity",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getCacheContexts",168],"(",")",",",["T_WHITESPACE","\n        ",168],["T_CONSTANT_ENCAPSED_STRING","'max-age'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$entity",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getCacheMaxAge",169],"(",")",",",["T_WHITESPACE","\n      ",169],")",",",["T_WHITESPACE","\n    ",170],")",";",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ Add the default #theme key if a template exists for it.\n",173],["T_WHITESPACE","    ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","themeRegistry",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getRuntime",174],"(",")",["T_OBJECT_OPERATOR","->",174],["T_STRING","has",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","entityTypeId",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n      ",174],["T_VARIABLE","$build",175],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","entityTypeId",175],";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Cache the rendered output if permitted by the view mode and global entity\n",178],["T_WHITESPACE","    ",179],["T_COMMENT","\/\/ type configuration.\n",179],["T_WHITESPACE","    ",180],["T_IF","if",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isViewModeCacheable",180],"(",["T_VARIABLE","$view_mode",180],")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],"!",["T_VARIABLE","$entity",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isNew",180],"(",")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$entity",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isDefaultRevision",180],"(",")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","entityType",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isRenderCacheable",180],"(",")",")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$build",181],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",181],"]",["T_WHITESPACE"," ",181],["T_PLUS_EQUAL","+=",181],["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_WHITESPACE","\n        ",181],["T_CONSTANT_ENCAPSED_STRING","'keys'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n          ",182],["T_CONSTANT_ENCAPSED_STRING","'entity_view'",183],",",["T_WHITESPACE","\n          ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","entityTypeId",184],",",["T_WHITESPACE","\n          ",184],["T_VARIABLE","$entity",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","id",185],"(",")",",",["T_WHITESPACE","\n          ",185],["T_VARIABLE","$view_mode",186],",",["T_WHITESPACE","\n        ",186],")",",",["T_WHITESPACE","\n        ",187],["T_CONSTANT_ENCAPSED_STRING","'bin'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","cacheBin",188],",",["T_WHITESPACE","\n      ",188],")",";",["T_WHITESPACE","\n\n      ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$entity",191],["T_WHITESPACE"," ",191],["T_INSTANCEOF","instanceof",191],["T_WHITESPACE"," ",191],["T_STRING","TranslatableInterface",191],["T_WHITESPACE"," ",191],["T_BOOLEAN_AND","&&",191],["T_WHITESPACE"," ",191],["T_STRING","count",191],"(",["T_VARIABLE","$entity",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getTranslationLanguages",191],"(",")",")",["T_WHITESPACE"," ",191],">",["T_WHITESPACE"," ",191],["T_LNUMBER","1",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n        ",191],["T_VARIABLE","$build",192],"[",["T_CONSTANT_ENCAPSED_STRING","'#cache'",192],"]","[",["T_CONSTANT_ENCAPSED_STRING","'keys'",192],"]","[","]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$entity",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","language",192],"(",")",["T_OBJECT_OPERATOR","->",192],["T_STRING","getId",192],"(",")",";",["T_WHITESPACE","\n      ",192],"}",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_RETURN","return",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$build",196],";",["T_WHITESPACE","\n  ",196],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Builds an entity's view; augments entity defaults.\n   *\n   * This function is assigned as a #pre_render callback in ::view().\n   *\n   * It transforms the renderable array for a single entity to the same\n   * structure as if we were rendering multiple entities, and then calls the\n   * default ::buildMultiple() #pre_render callback.\n   *\n   * @param array $build\n   *   A renderable array containing build information and context for an entity\n   *   view.\n   *\n   * @return array\n   *   The updated renderable array.\n   *\n   * @see drupal_render()\n   *\/",199],["T_WHITESPACE","\n  ",216],["T_PUBLIC","public",217],["T_WHITESPACE"," ",217],["T_FUNCTION","function",217],["T_WHITESPACE"," ",217],["T_STRING","build",217],"(",["T_ARRAY","array",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$build",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$build_list",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],"[",["T_VARIABLE","$build",218],"]",";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$build_list",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","buildMultiple",219],"(",["T_VARIABLE","$build_list",219],")",";",["T_WHITESPACE","\n    ",219],["T_RETURN","return",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$build_list",220],"[",["T_LNUMBER","0",220],"]",";",["T_WHITESPACE","\n  ",220],"}",["T_WHITESPACE","\n\n  ",221],["T_DOC_COMMENT","\/**\n   * Builds multiple entities' views; augments entity defaults.\n   *\n   * This function is assigned as a #pre_render callback in ::viewMultiple().\n   *\n   * By delaying the building of an entity until the #pre_render processing in\n   * drupal_render(), the processing cost of assembling an entity's renderable\n   * array is saved on cache-hit requests.\n   *\n   * @param array $build_list\n   *   A renderable  array containing build information and context for an\n   *   entity view.\n   *\n   * @return array\n   *   The updated renderable array.\n   *\n   * @see drupal_render()\n   *\/",223],["T_WHITESPACE","\n  ",240],["T_PUBLIC","public",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","buildMultiple",241],"(",["T_ARRAY","array",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$build_list",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n    ",241],["T_COMMENT","\/\/ Build the view modes and display objects.\n",242],["T_WHITESPACE","    ",243],["T_VARIABLE","$view_modes",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_ARRAY","array",243],"(",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$entity_type_key",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],"\"",["T_ENCAPSED_AND_WHITESPACE","#",244],["T_CURLY_OPEN","{",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","entityTypeId",244],"}","\"",";",["T_WHITESPACE","\n    ",244],["T_VARIABLE","$view_hook",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],"\"",["T_CURLY_OPEN","{",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","entityTypeId",245],"}",["T_ENCAPSED_AND_WHITESPACE","_view",245],"\"",";",["T_WHITESPACE","\n\n    ",245],["T_COMMENT","\/\/ Find the keys for the ContentEntities in the build; Store entities for\n",247],["T_WHITESPACE","    ",248],["T_COMMENT","\/\/ rendering by view_mode.\n",248],["T_WHITESPACE","    ",249],["T_VARIABLE","$children",249],["T_WHITESPACE"," ",249],"=",["T_WHITESPACE"," ",249],["T_STRING","Element",249],["T_DOUBLE_COLON","::",249],["T_STRING","children",249],"(",["T_VARIABLE","$build_list",249],")",";",["T_WHITESPACE","\n    ",249],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$children",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$key",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n      ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_ISSET","isset",251],"(",["T_VARIABLE","$build_list",251],"[",["T_VARIABLE","$key",251],"]","[",["T_VARIABLE","$entity_type_key",251],"]",")",")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$entity",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$build_list",252],"[",["T_VARIABLE","$key",252],"]","[",["T_VARIABLE","$entity_type_key",252],"]",";",["T_WHITESPACE","\n        ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$entity",253],["T_WHITESPACE"," ",253],["T_INSTANCEOF","instanceof",253],["T_WHITESPACE"," ",253],["T_STRING","FieldableEntityInterface",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n          ",253],["T_VARIABLE","$view_modes",254],"[",["T_VARIABLE","$build_list",254],"[",["T_VARIABLE","$key",254],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#view_mode'",254],"]","]","[",["T_VARIABLE","$key",254],"]",["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$entity",254],";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n      ",255],"}",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_COMMENT","\/\/ Build content for the displays represented by the entities.\n",259],["T_WHITESPACE","    ",260],["T_FOREACH","foreach",260],["T_WHITESPACE"," ",260],"(",["T_VARIABLE","$view_modes",260],["T_WHITESPACE"," ",260],["T_AS","as",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$view_mode",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$view_mode_entities",260],")",["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n      ",260],["T_VARIABLE","$displays",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","EntityViewDisplay",261],["T_DOUBLE_COLON","::",261],["T_STRING","collectRenderDisplays",261],"(",["T_VARIABLE","$view_mode_entities",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$view_mode",261],")",";",["T_WHITESPACE","\n      ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","buildComponents",262],"(",["T_VARIABLE","$build_list",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$view_mode_entities",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$displays",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$view_mode",262],")",";",["T_WHITESPACE","\n      ",262],["T_FOREACH","foreach",263],["T_WHITESPACE"," ",263],"(",["T_STRING","array_keys",263],"(",["T_VARIABLE","$view_mode_entities",263],")",["T_WHITESPACE"," ",263],["T_AS","as",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$key",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n        ",263],["T_COMMENT","\/\/ Allow for alterations while building, before rendering.\n",264],["T_WHITESPACE","        ",265],["T_VARIABLE","$entity",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$build_list",265],"[",["T_VARIABLE","$key",265],"]","[",["T_VARIABLE","$entity_type_key",265],"]",";",["T_WHITESPACE","\n        ",265],["T_VARIABLE","$display",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$displays",266],"[",["T_VARIABLE","$entity",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","bundle",266],"(",")","]",";",["T_WHITESPACE","\n\n        ",266],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","moduleHandler",268],"(",")",["T_OBJECT_OPERATOR","->",268],["T_STRING","invokeAll",268],"(",["T_VARIABLE","$view_hook",268],",",["T_WHITESPACE"," ",268],"[","&",["T_VARIABLE","$build_list",268],"[",["T_VARIABLE","$key",268],"]",",",["T_WHITESPACE"," ",268],["T_VARIABLE","$entity",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$display",268],",",["T_WHITESPACE"," ",268],["T_VARIABLE","$view_mode",268],"]",")",";",["T_WHITESPACE","\n        ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","moduleHandler",269],"(",")",["T_OBJECT_OPERATOR","->",269],["T_STRING","invokeAll",269],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_view'",269],",",["T_WHITESPACE"," ",269],"[","&",["T_VARIABLE","$build_list",269],"[",["T_VARIABLE","$key",269],"]",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$entity",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$display",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$view_mode",269],"]",")",";",["T_WHITESPACE","\n\n        ",269],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","alterBuild",271],"(",["T_VARIABLE","$build_list",271],"[",["T_VARIABLE","$key",271],"]",",",["T_WHITESPACE"," ",271],["T_VARIABLE","$entity",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$display",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$view_mode",271],")",";",["T_WHITESPACE","\n\n        ",271],["T_COMMENT","\/\/ Assign the weights configured in the display.\n",273],["T_WHITESPACE","        ",274],["T_COMMENT","\/\/ @todo: Once https:\/\/www.drupal.org\/node\/1875974 provides the missing\n",274],["T_WHITESPACE","        ",275],["T_COMMENT","\/\/   API, only do it for 'extra fields', since other components have\n",275],["T_WHITESPACE","        ",276],["T_COMMENT","\/\/   been taken care of in EntityViewDisplay::buildMultiple().\n",276],["T_WHITESPACE","        ",277],["T_FOREACH","foreach",277],["T_WHITESPACE"," ",277],"(",["T_VARIABLE","$display",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","getComponents",277],"(",")",["T_WHITESPACE"," ",277],["T_AS","as",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$name",277],["T_WHITESPACE"," ",277],["T_DOUBLE_ARROW","=>",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$options",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n          ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_ISSET","isset",278],"(",["T_VARIABLE","$build_list",278],"[",["T_VARIABLE","$key",278],"]","[",["T_VARIABLE","$name",278],"]",")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n            ",278],["T_VARIABLE","$build_list",279],"[",["T_VARIABLE","$key",279],"]","[",["T_VARIABLE","$name",279],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#weight'",279],"]",["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_VARIABLE","$options",279],"[",["T_CONSTANT_ENCAPSED_STRING","'weight'",279],"]",";",["T_WHITESPACE","\n          ",279],"}",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n\n        ",281],["T_COMMENT","\/\/ Allow modules to modify the render array.\n",283],["T_WHITESPACE","        ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","moduleHandler",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","alter",284],"(",["T_ARRAY","array",284],"(",["T_VARIABLE","$view_hook",284],",",["T_WHITESPACE"," ",284],["T_CONSTANT_ENCAPSED_STRING","'entity_view'",284],")",",",["T_WHITESPACE"," ",284],["T_VARIABLE","$build_list",284],"[",["T_VARIABLE","$key",284],"]",",",["T_WHITESPACE"," ",284],["T_VARIABLE","$entity",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$display",284],")",";",["T_WHITESPACE","\n      ",284],"}",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$build_list",288],";",["T_WHITESPACE","\n  ",288],"}",["T_WHITESPACE","\n\n  ",289],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",291],["T_WHITESPACE","\n  ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","buildComponents",294],"(",["T_ARRAY","array",294],["T_WHITESPACE"," ",294],"&",["T_VARIABLE","$build",294],",",["T_WHITESPACE"," ",294],["T_ARRAY","array",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$entities",294],",",["T_WHITESPACE"," ",294],["T_ARRAY","array",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$displays",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$view_mode",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$entities_by_bundle",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",")",";",["T_WHITESPACE","\n    ",295],["T_FOREACH","foreach",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$entities",296],["T_WHITESPACE"," ",296],["T_AS","as",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$id",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$entity",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n      ",296],["T_COMMENT","\/\/ Initialize the field item attributes for the fields being displayed.\n",297],["T_WHITESPACE","      ",298],["T_COMMENT","\/\/ The entity can include fields that are not displayed, and the display\n",298],["T_WHITESPACE","      ",299],["T_COMMENT","\/\/ can include components that are not fields, so we want to act on the\n",299],["T_WHITESPACE","      ",300],["T_COMMENT","\/\/ intersection. However, the entity can have many more fields than are\n",300],["T_WHITESPACE","      ",301],["T_COMMENT","\/\/ displayed, so we avoid the cost of calling $entity->getProperties()\n",301],["T_WHITESPACE","      ",302],["T_COMMENT","\/\/ by iterating the intersection as follows.\n",302],["T_WHITESPACE","      ",303],["T_FOREACH","foreach",303],["T_WHITESPACE"," ",303],"(",["T_VARIABLE","$displays",303],"[",["T_VARIABLE","$entity",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","bundle",303],"(",")","]",["T_OBJECT_OPERATOR","->",303],["T_STRING","getComponents",303],"(",")",["T_WHITESPACE"," ",303],["T_AS","as",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$name",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$options",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n        ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$entity",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","hasField",304],"(",["T_VARIABLE","$name",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n          ",304],["T_FOREACH","foreach",305],["T_WHITESPACE"," ",305],"(",["T_VARIABLE","$entity",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","get",305],"(",["T_VARIABLE","$name",305],")",["T_WHITESPACE"," ",305],["T_AS","as",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$item",305],")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n            ",305],["T_VARIABLE","$item",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","_attributes",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_ARRAY","array",306],"(",")",";",["T_WHITESPACE","\n          ",306],"}",["T_WHITESPACE","\n        ",307],"}",["T_WHITESPACE","\n      ",308],"}",["T_WHITESPACE","\n      ",309],["T_COMMENT","\/\/ Group the entities by bundle.\n",310],["T_WHITESPACE","      ",311],["T_VARIABLE","$entities_by_bundle",311],"[",["T_VARIABLE","$entity",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","bundle",311],"(",")","]","[",["T_VARIABLE","$id",311],"]",["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$entity",311],";",["T_WHITESPACE","\n    ",311],"}",["T_WHITESPACE","\n\n    ",312],["T_COMMENT","\/\/ Invoke hook_entity_prepare_view().\n",314],["T_WHITESPACE","    ",315],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","moduleHandler",315],"(",")",["T_OBJECT_OPERATOR","->",315],["T_STRING","invokeAll",315],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_prepare_view'",315],",",["T_WHITESPACE"," ",315],["T_ARRAY","array",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","entityTypeId",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$entities",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$displays",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$view_mode",315],")",")",";",["T_WHITESPACE","\n\n    ",315],["T_COMMENT","\/\/ Let the displays build their render arrays.\n",317],["T_WHITESPACE","    ",318],["T_FOREACH","foreach",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$entities_by_bundle",318],["T_WHITESPACE"," ",318],["T_AS","as",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$bundle",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$bundle_entities",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n      ",318],["T_VARIABLE","$display_build",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$displays",319],"[",["T_VARIABLE","$bundle",319],"]",["T_OBJECT_OPERATOR","->",319],["T_STRING","buildMultiple",319],"(",["T_VARIABLE","$bundle_entities",319],")",";",["T_WHITESPACE","\n      ",319],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$bundle_entities",320],["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$id",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$entity",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$build",321],"[",["T_VARIABLE","$id",321],"]",["T_WHITESPACE"," ",321],["T_PLUS_EQUAL","+=",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$display_build",321],"[",["T_VARIABLE","$id",321],"]",";",["T_WHITESPACE","\n      ",321],"}",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n  ",323],"}",["T_WHITESPACE","\n\n  ",324],["T_DOC_COMMENT","\/**\n   * Specific per-entity building.\n   *\n   * @param array $build\n   *   The render array that is being created.\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity to be prepared.\n   * @param \\Drupal\\Core\\Entity\\Display\\EntityViewDisplayInterface $display\n   *   The entity view display holding the display options configured for the\n   *   entity components.\n   * @param string $view_mode\n   *   The view mode that should be used to prepare the entity.\n   *\/",326],["T_WHITESPACE","\n  ",338],["T_PROTECTED","protected",339],["T_WHITESPACE"," ",339],["T_FUNCTION","function",339],["T_WHITESPACE"," ",339],["T_STRING","alterBuild",339],"(",["T_ARRAY","array",339],["T_WHITESPACE"," ",339],"&",["T_VARIABLE","$build",339],",",["T_WHITESPACE"," ",339],["T_STRING","EntityInterface",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$entity",339],",",["T_WHITESPACE"," ",339],["T_STRING","EntityViewDisplayInterface",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$display",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$view_mode",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE"," ",339],"}",["T_WHITESPACE","\n\n  ",339],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",341],["T_WHITESPACE","\n  ",343],["T_PUBLIC","public",344],["T_WHITESPACE"," ",344],["T_FUNCTION","function",344],["T_WHITESPACE"," ",344],["T_STRING","getCacheTags",344],"(",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n    ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","entityTypeId",345],["T_WHITESPACE"," ",345],".",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'_view'",345],")",";",["T_WHITESPACE","\n  ",345],"}",["T_WHITESPACE","\n\n  ",346],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",348],["T_WHITESPACE","\n  ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","resetCache",351],"(",["T_ARRAY","array",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$entities",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","NULL",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n    ",351],["T_COMMENT","\/\/ If no set of specific entities is provided, invalidate the entity view\n",352],["T_WHITESPACE","    ",353],["T_COMMENT","\/\/ builder's cache tag. This will invalidate all entities rendered by this\n",353],["T_WHITESPACE","    ",354],["T_COMMENT","\/\/ view builder.\n",354],["T_WHITESPACE","    ",355],["T_COMMENT","\/\/ Otherwise, if a set of specific entities is provided, invalidate those\n",355],["T_WHITESPACE","    ",356],["T_COMMENT","\/\/ specific entities only, plus their list cache tags, because any lists in\n",356],["T_WHITESPACE","    ",357],["T_COMMENT","\/\/ which these entities are rendered, must be invalidated as well. However,\n",357],["T_WHITESPACE","    ",358],["T_COMMENT","\/\/ even in this case, we might invalidate more cache items than necessary.\n",358],["T_WHITESPACE","    ",359],["T_COMMENT","\/\/ When we have a way to invalidate only those cache items that have both\n",359],["T_WHITESPACE","    ",360],["T_COMMENT","\/\/ the individual entity's cache tag and the view builder's cache tag, we'll\n",360],["T_WHITESPACE","    ",361],["T_COMMENT","\/\/ be able to optimize this further.\n",361],["T_WHITESPACE","    ",362],["T_IF","if",362],["T_WHITESPACE"," ",362],"(",["T_ISSET","isset",362],"(",["T_VARIABLE","$entities",362],")",")",["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n      ",362],["T_VARIABLE","$tags",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],"[","]",";",["T_WHITESPACE","\n      ",363],["T_FOREACH","foreach",364],["T_WHITESPACE"," ",364],"(",["T_VARIABLE","$entities",364],["T_WHITESPACE"," ",364],["T_AS","as",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$entity",364],")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$tags",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","Cache",365],["T_DOUBLE_COLON","::",365],["T_STRING","mergeTags",365],"(",["T_VARIABLE","$tags",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$entity",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getCacheTags",365],"(",")",")",";",["T_WHITESPACE","\n        ",365],["T_VARIABLE","$tags",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","Cache",366],["T_DOUBLE_COLON","::",366],["T_STRING","mergeTags",366],"(",["T_VARIABLE","$tags",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$entity",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","getEntityType",366],"(",")",["T_OBJECT_OPERATOR","->",366],["T_STRING","getListCacheTags",366],"(",")",")",";",["T_WHITESPACE","\n      ",366],"}",["T_WHITESPACE","\n      ",367],["T_STRING","Cache",368],["T_DOUBLE_COLON","::",368],["T_STRING","invalidateTags",368],"(",["T_VARIABLE","$tags",368],")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n    ",369],["T_ELSE","else",370],["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n      ",370],["T_STRING","Cache",371],["T_DOUBLE_COLON","::",371],["T_STRING","invalidateTags",371],"(",["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getCacheTags",371],"(",")",")",";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n  ",372],"}",["T_WHITESPACE","\n\n  ",373],["T_DOC_COMMENT","\/**\n   * Determines whether the view mode is cacheable.\n   *\n   * @param string $view_mode\n   *   Name of the view mode that should be rendered.\n   *\n   * @return bool\n   *   TRUE if the view mode can be cached, FALSE otherwise.\n   *\/",375],["T_WHITESPACE","\n  ",383],["T_PROTECTED","protected",384],["T_WHITESPACE"," ",384],["T_FUNCTION","function",384],["T_WHITESPACE"," ",384],["T_STRING","isViewModeCacheable",384],"(",["T_VARIABLE","$view_mode",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n    ",384],["T_IF","if",385],["T_WHITESPACE"," ",385],"(",["T_VARIABLE","$view_mode",385],["T_WHITESPACE"," ",385],["T_IS_EQUAL","==",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'default'",385],")",["T_WHITESPACE"," ",385],"{",["T_WHITESPACE","\n      ",385],["T_COMMENT","\/\/ The 'default' is not an actual view mode.\n",386],["T_WHITESPACE","      ",387],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING","TRUE",387],";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$view_modes_info",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","entityManager",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getViewModes",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","entityTypeId",389],")",";",["T_WHITESPACE","\n    ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],"!",["T_EMPTY","empty",390],"(",["T_VARIABLE","$view_modes_info",390],"[",["T_VARIABLE","$view_mode",390],"]","[",["T_CONSTANT_ENCAPSED_STRING","'cache'",390],"]",")",";",["T_WHITESPACE","\n  ",390],"}",["T_WHITESPACE","\n\n  ",391],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",393],["T_WHITESPACE","\n  ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","viewField",396],"(",["T_STRING","FieldItemListInterface",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$items",396],",",["T_WHITESPACE"," ",396],["T_VARIABLE","$display_options",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_ARRAY","array",396],"(",")",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$entity",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_VARIABLE","$items",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","getEntity",397],"(",")",";",["T_WHITESPACE","\n    ",397],["T_VARIABLE","$field_name",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_VARIABLE","$items",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","getFieldDefinition",398],"(",")",["T_OBJECT_OPERATOR","->",398],["T_STRING","getName",398],"(",")",";",["T_WHITESPACE","\n    ",398],["T_VARIABLE","$display",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","getSingleFieldDisplay",399],"(",["T_VARIABLE","$entity",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$field_name",399],",",["T_WHITESPACE"," ",399],["T_VARIABLE","$display_options",399],")",";",["T_WHITESPACE","\n\n    ",399],["T_VARIABLE","$output",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_ARRAY","array",401],"(",")",";",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$build",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$display",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","build",402],"(",["T_VARIABLE","$entity",402],")",";",["T_WHITESPACE","\n    ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_ISSET","isset",403],"(",["T_VARIABLE","$build",403],"[",["T_VARIABLE","$field_name",403],"]",")",")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n      ",403],["T_VARIABLE","$output",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$build",404],"[",["T_VARIABLE","$field_name",404],"]",";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_RETURN","return",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$output",407],";",["T_WHITESPACE","\n  ",407],"}",["T_WHITESPACE","\n\n  ",408],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",410],["T_WHITESPACE","\n  ",412],["T_PUBLIC","public",413],["T_WHITESPACE"," ",413],["T_FUNCTION","function",413],["T_WHITESPACE"," ",413],["T_STRING","viewFieldItem",413],"(",["T_STRING","FieldItemInterface",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$item",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$display",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",")",")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n    ",413],["T_VARIABLE","$entity",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$item",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getEntity",414],"(",")",";",["T_WHITESPACE","\n    ",414],["T_VARIABLE","$field_name",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$item",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getFieldDefinition",415],"(",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","getName",415],"(",")",";",["T_WHITESPACE","\n\n    ",415],["T_COMMENT","\/\/ Clone the entity since we are going to modify field values.\n",417],["T_WHITESPACE","    ",418],["T_VARIABLE","$clone",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_CLONE","clone",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$entity",418],";",["T_WHITESPACE","\n\n    ",418],["T_COMMENT","\/\/ Push the item as the single value for the field, and defer to viewField()\n",420],["T_WHITESPACE","    ",421],["T_COMMENT","\/\/ to build the render array for the whole list.\n",421],["T_WHITESPACE","    ",422],["T_VARIABLE","$clone",422],["T_OBJECT_OPERATOR","->",422],"{",["T_VARIABLE","$field_name",422],"}",["T_OBJECT_OPERATOR","->",422],["T_STRING","setValue",422],"(",["T_ARRAY","array",422],"(",["T_VARIABLE","$item",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getValue",422],"(",")",")",")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$elements",423],["T_WHITESPACE"," ",423],"=",["T_WHITESPACE"," ",423],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","viewField",423],"(",["T_VARIABLE","$clone",423],["T_OBJECT_OPERATOR","->",423],"{",["T_VARIABLE","$field_name",423],"}",",",["T_WHITESPACE"," ",423],["T_VARIABLE","$display",423],")",";",["T_WHITESPACE","\n\n    ",423],["T_COMMENT","\/\/ Extract the part of the render array we need.\n",425],["T_WHITESPACE","    ",426],["T_VARIABLE","$output",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_ISSET","isset",426],"(",["T_VARIABLE","$elements",426],"[",["T_LNUMBER","0",426],"]",")",["T_WHITESPACE"," ",426],"?",["T_WHITESPACE"," ",426],["T_VARIABLE","$elements",426],"[",["T_LNUMBER","0",426],"]",["T_WHITESPACE"," ",426],":",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",")",";",["T_WHITESPACE","\n    ",426],["T_IF","if",427],["T_WHITESPACE"," ",427],"(",["T_ISSET","isset",427],"(",["T_VARIABLE","$elements",427],"[",["T_CONSTANT_ENCAPSED_STRING","'#access'",427],"]",")",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n      ",427],["T_VARIABLE","$output",428],"[",["T_CONSTANT_ENCAPSED_STRING","'#access'",428],"]",["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$elements",428],"[",["T_CONSTANT_ENCAPSED_STRING","'#access'",428],"]",";",["T_WHITESPACE","\n    ",428],"}",["T_WHITESPACE","\n\n    ",429],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$output",431],";",["T_WHITESPACE","\n  ",431],"}",["T_WHITESPACE","\n\n  ",432],["T_DOC_COMMENT","\/**\n   * Gets an EntityViewDisplay for rendering an individual field.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity.\n   * @param string $field_name\n   *   The field name.\n   * @param string|array $display_options\n   *   The display options passed to the viewField() method.\n   *\n   * @return \\Drupal\\Core\\Entity\\Display\\EntityViewDisplayInterface\n   *\/",434],["T_WHITESPACE","\n  ",445],["T_PROTECTED","protected",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","getSingleFieldDisplay",446],"(",["T_VARIABLE","$entity",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$field_name",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$display_options",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n    ",446],["T_IF","if",447],["T_WHITESPACE"," ",447],"(",["T_STRING","is_string",447],"(",["T_VARIABLE","$display_options",447],")",")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n      ",447],["T_COMMENT","\/\/ View mode: use the Display configured for the view mode.\n",448],["T_WHITESPACE","      ",449],["T_VARIABLE","$view_mode",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$display_options",449],";",["T_WHITESPACE","\n      ",449],["T_VARIABLE","$display",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","EntityViewDisplay",450],["T_DOUBLE_COLON","::",450],["T_STRING","collectRenderDisplay",450],"(",["T_VARIABLE","$entity",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$view_mode",450],")",";",["T_WHITESPACE","\n      ",450],["T_COMMENT","\/\/ Hide all fields except the current one.\n",451],["T_WHITESPACE","      ",452],["T_FOREACH","foreach",452],["T_WHITESPACE"," ",452],"(",["T_STRING","array_keys",452],"(",["T_VARIABLE","$entity",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","getFieldDefinitions",452],"(",")",")",["T_WHITESPACE"," ",452],["T_AS","as",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$name",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n        ",452],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$name",453],["T_WHITESPACE"," ",453],["T_IS_NOT_EQUAL","!=",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$field_name",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n          ",453],["T_VARIABLE","$display",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","removeComponent",454],"(",["T_VARIABLE","$name",454],")",";",["T_WHITESPACE","\n        ",454],"}",["T_WHITESPACE","\n      ",455],"}",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n    ",457],["T_ELSE","else",458],["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n      ",458],["T_COMMENT","\/\/ Array of custom display options: use a runtime Display for the\n",459],["T_WHITESPACE","      ",460],["T_COMMENT","\/\/ '_custom' view mode. Persist the displays created, to reduce the number\n",460],["T_WHITESPACE","      ",461],["T_COMMENT","\/\/ of objects (displays and formatter plugins) created when rendering a\n",461],["T_WHITESPACE","      ",462],["T_COMMENT","\/\/ series of fields individually for cases such as views tables.\n",462],["T_WHITESPACE","      ",463],["T_VARIABLE","$entity_type_id",463],["T_WHITESPACE"," ",463],"=",["T_WHITESPACE"," ",463],["T_VARIABLE","$entity",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","getEntityTypeId",463],"(",")",";",["T_WHITESPACE","\n      ",463],["T_VARIABLE","$bundle",464],["T_WHITESPACE"," ",464],"=",["T_WHITESPACE"," ",464],["T_VARIABLE","$entity",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","bundle",464],"(",")",";",["T_WHITESPACE","\n      ",464],["T_VARIABLE","$key",465],["T_WHITESPACE"," ",465],"=",["T_WHITESPACE"," ",465],["T_VARIABLE","$entity_type_id",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","':'",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_VARIABLE","$bundle",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","':'",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_VARIABLE","$field_name",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","':'",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_STRING","hash",465],"(",["T_CONSTANT_ENCAPSED_STRING","'crc32b'",465],",",["T_WHITESPACE"," ",465],["T_STRING","serialize",465],"(",["T_VARIABLE","$display_options",465],")",")",";",["T_WHITESPACE","\n      ",465],["T_IF","if",466],["T_WHITESPACE"," ",466],"(","!",["T_ISSET","isset",466],"(",["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","singleFieldDisplays",466],"[",["T_VARIABLE","$key",466],"]",")",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n        ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","singleFieldDisplays",467],"[",["T_VARIABLE","$key",467],"]",["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","EntityViewDisplay",467],["T_DOUBLE_COLON","::",467],["T_STRING","create",467],"(",["T_ARRAY","array",467],"(",["T_WHITESPACE","\n          ",467],["T_CONSTANT_ENCAPSED_STRING","'targetEntityType'",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$entity_type_id",468],",",["T_WHITESPACE","\n          ",468],["T_CONSTANT_ENCAPSED_STRING","'bundle'",469],["T_WHITESPACE"," ",469],["T_DOUBLE_ARROW","=>",469],["T_WHITESPACE"," ",469],["T_VARIABLE","$bundle",469],",",["T_WHITESPACE","\n          ",469],["T_CONSTANT_ENCAPSED_STRING","'status'",470],["T_WHITESPACE"," ",470],["T_DOUBLE_ARROW","=>",470],["T_WHITESPACE"," ",470],["T_STRING","TRUE",470],",",["T_WHITESPACE","\n        ",470],")",")",["T_OBJECT_OPERATOR","->",471],["T_STRING","setComponent",471],"(",["T_VARIABLE","$field_name",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$display_options",471],")",";",["T_WHITESPACE","\n      ",471],"}",["T_WHITESPACE","\n      ",472],["T_VARIABLE","$display",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","singleFieldDisplays",473],"[",["T_VARIABLE","$key",473],"]",";",["T_WHITESPACE","\n    ",473],"}",["T_WHITESPACE","\n\n    ",474],["T_RETURN","return",476],["T_WHITESPACE"," ",476],["T_VARIABLE","$display",476],";",["T_WHITESPACE","\n  ",476],"}",["T_WHITESPACE","\n\n",477],"}",["T_WHITESPACE","\n",479]]
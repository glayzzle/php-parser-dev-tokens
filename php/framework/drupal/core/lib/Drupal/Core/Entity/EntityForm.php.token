[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Form",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FormBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Extension",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ModuleHandlerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Form",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FormStateInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Render",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Element",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Routing",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RouteMatchInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Base class for entity forms.\n *\n * @ingroup entity_api\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","EntityForm",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","FormBase",16],["T_WHITESPACE"," ",16],["T_IMPLEMENTS","implements",16],["T_WHITESPACE"," ",16],["T_STRING","EntityFormInterface",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * The name of the current operation.\n   *\n   * Subclasses may use this to implement different behaviors depending on its\n   * value.\n   *\n   * @var string\n   *\/",18],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$operation",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The module handler service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$moduleHandler",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\n   * @deprecated in Drupal 8.0.0, will be removed before Drupal 9.0.0.\n   *\/",35],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$entityManager",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$entityTypeManager",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * The entity being used by this form.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityInterface\n   *\/",51],["T_WHITESPACE","\n  ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$entity",56],";",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","setOperation",61],"(",["T_VARIABLE","$operation",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ If NULL is passed, do not overwrite the operation.\n",62],["T_WHITESPACE","    ",63],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_VARIABLE","$operation",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","operation",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$operation",64],";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n    ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","getBaseFormId",72],"(",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_COMMENT","\/\/ Assign ENTITYTYPE_form as base form ID to invoke corresponding\n",73],["T_WHITESPACE","    ",74],["T_COMMENT","\/\/ hook_form_alter(), #validate, #submit, and #theme callbacks, but only if\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ it is different from the actual form ID, since callbacks would be invoked\n",75],["T_WHITESPACE","    ",76],["T_COMMENT","\/\/ twice otherwise.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$base_form_id",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","entity",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getEntityTypeId",77],"(",")",["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'_form'",77],";",["T_WHITESPACE","\n    ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$base_form_id",78],["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getFormId",78],"(",")",")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$base_form_id",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_STRING","NULL",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n    ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$base_form_id",81],";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",84],["T_WHITESPACE","\n  ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","getFormId",87],"(",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$form_id",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entity",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getEntityTypeId",88],"(",")",";",["T_WHITESPACE","\n    ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","entity",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","getEntityType",89],"(",")",["T_OBJECT_OPERATOR","->",89],["T_STRING","hasKey",89],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$form_id",90],["T_WHITESPACE"," ",90],["T_CONCAT_EQUAL",".=",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'_'",90],["T_WHITESPACE"," ",90],".",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","entity",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","bundle",90],"(",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n    ",91],["T_IF","if",92],["T_WHITESPACE"," ",92],"(",["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","operation",92],["T_WHITESPACE"," ",92],["T_IS_NOT_EQUAL","!=",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'default'",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$form_id",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$form_id",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'_'",93],["T_WHITESPACE"," ",93],".",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","operation",93],";",["T_WHITESPACE","\n    ",93],"}",["T_WHITESPACE","\n    ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$form_id",95],["T_WHITESPACE"," ",95],".",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'_form'",95],";",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",98],["T_WHITESPACE","\n  ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","buildForm",101],"(",["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$form",101],",",["T_WHITESPACE"," ",101],["T_STRING","FormStateInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$form_state",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_COMMENT","\/\/ During the initial form build, add this form object to the form state and\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ allow for initial preparation before form building and processing.\n",103],["T_WHITESPACE","    ",104],["T_IF","if",104],["T_WHITESPACE"," ",104],"(","!",["T_VARIABLE","$form_state",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","has",104],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_form_initialized'",104],")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","init",105],"(",["T_VARIABLE","$form_state",105],")",";",["T_WHITESPACE","\n    ",105],"}",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Ensure that edit forms have the correct cacheability metadata so they can\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ be cached.\n",109],["T_WHITESPACE","    ",110],["T_IF","if",110],["T_WHITESPACE"," ",110],"(","!",["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","entity",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","isNew",110],"(",")",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n      ",110],["T_NS_SEPARATOR","\\",111],["T_STRING","Drupal",111],["T_DOUBLE_COLON","::",111],["T_STRING","service",111],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","addCacheableDependency",111],"(",["T_VARIABLE","$form",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","entity",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Retrieve the form array using the possibly updated entity in form state.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$form",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","form",115],"(",["T_VARIABLE","$form",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$form_state",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Retrieve and add the form actions array.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$actions",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","actionsElement",118],"(",["T_VARIABLE","$form",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$form_state",118],")",";",["T_WHITESPACE","\n    ",118],["T_IF","if",119],["T_WHITESPACE"," ",119],"(","!",["T_EMPTY","empty",119],"(",["T_VARIABLE","$actions",119],")",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n      ",119],["T_VARIABLE","$form",120],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$actions",120],";",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$form",123],";",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * Initialize the form state and the entity before the first form build.\n   *\/",126],["T_WHITESPACE","\n  ",128],["T_PROTECTED","protected",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","init",129],"(",["T_STRING","FormStateInterface",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$form_state",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n    ",129],["T_COMMENT","\/\/ Flag that this form has been initialized.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$form_state",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","set",131],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_form_initialized'",131],",",["T_WHITESPACE"," ",131],["T_STRING","TRUE",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Prepare the entity to be presented in the entity form.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","prepareEntity",134],"(",")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Invoke the prepare form hooks.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","prepareInvokeAll",137],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_prepare_form'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$form_state",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","prepareInvokeAll",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","entity",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","getEntityTypeId",138],"(",")",["T_WHITESPACE"," ",138],".",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'_prepare_form'",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$form_state",138],")",";",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * Gets the actual form array to be built.\n   *\n   * @see \\Drupal\\Core\\Entity\\EntityForm::processForm()\n   * @see \\Drupal\\Core\\Entity\\EntityForm::afterBuild()\n   *\/",141],["T_WHITESPACE","\n  ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","form",147],"(",["T_ARRAY","array",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$form",147],",",["T_WHITESPACE"," ",147],["T_STRING","FormStateInterface",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$form_state",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n    ",147],["T_COMMENT","\/\/ Add #process and #after_build callbacks.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$form",149],"[",["T_CONSTANT_ENCAPSED_STRING","'#process'",149],"]","[","]",["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'::processForm'",149],";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$form",150],"[",["T_CONSTANT_ENCAPSED_STRING","'#after_build'",150],"]","[","]",["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'::afterBuild'",150],";",["T_WHITESPACE","\n\n    ",150],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$form",152],";",["T_WHITESPACE","\n  ",152],"}",["T_WHITESPACE","\n\n  ",153],["T_DOC_COMMENT","\/**\n   * Process callback: assigns weights and hides extra fields.\n   *\n   * @see \\Drupal\\Core\\Entity\\EntityForm::form()\n   *\/",155],["T_WHITESPACE","\n  ",159],["T_PUBLIC","public",160],["T_WHITESPACE"," ",160],["T_FUNCTION","function",160],["T_WHITESPACE"," ",160],["T_STRING","processForm",160],"(",["T_VARIABLE","$element",160],",",["T_WHITESPACE"," ",160],["T_STRING","FormStateInterface",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$form_state",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$form",160],")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n    ",160],["T_COMMENT","\/\/ If the form is cached, process callbacks may not have a valid reference\n",161],["T_WHITESPACE","    ",162],["T_COMMENT","\/\/ to the entity object, hence we must restore it.\n",162],["T_WHITESPACE","    ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","entity",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$form_state",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getFormObject",163],"(",")",["T_OBJECT_OPERATOR","->",163],["T_STRING","getEntity",163],"(",")",";",["T_WHITESPACE","\n\n    ",163],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$element",165],";",["T_WHITESPACE","\n  ",165],"}",["T_WHITESPACE","\n\n  ",166],["T_DOC_COMMENT","\/**\n   * Form element #after_build callback: Updates the entity with submitted data.\n   *\n   * Updates the internal $this->entity object with submitted values when the\n   * form is being rebuilt (e.g. submitted via AJAX), so that subsequent\n   * processing (e.g. AJAX callbacks) can rely on it.\n   *\/",168],["T_WHITESPACE","\n  ",174],["T_PUBLIC","public",175],["T_WHITESPACE"," ",175],["T_FUNCTION","function",175],["T_WHITESPACE"," ",175],["T_STRING","afterBuild",175],"(",["T_ARRAY","array",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$element",175],",",["T_WHITESPACE"," ",175],["T_STRING","FormStateInterface",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$form_state",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n    ",175],["T_COMMENT","\/\/ Rebuild the entity if #after_build is being called as part of a form\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ rebuild, i.e. if we are processing input.\n",177],["T_WHITESPACE","    ",178],["T_IF","if",178],["T_WHITESPACE"," ",178],"(",["T_VARIABLE","$form_state",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","isProcessingInput",178],"(",")",")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n      ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","entity",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","buildEntity",179],"(",["T_VARIABLE","$element",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$form_state",179],")",";",["T_WHITESPACE","\n    ",179],"}",["T_WHITESPACE","\n\n    ",180],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$element",182],";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n  ",183],["T_DOC_COMMENT","\/**\n   * Returns the action form element for the current entity form.\n   *\/",185],["T_WHITESPACE","\n  ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","actionsElement",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$form",188],",",["T_WHITESPACE"," ",188],["T_STRING","FormStateInterface",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$form_state",188],")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$element",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","actions",189],"(",["T_VARIABLE","$form",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$form_state",189],")",";",["T_WHITESPACE","\n\n    ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_ISSET","isset",191],"(",["T_VARIABLE","$element",191],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",191],"]",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n      ",191],["T_COMMENT","\/\/ Move the delete action as last one, unless weights are explicitly\n",192],["T_WHITESPACE","      ",193],["T_COMMENT","\/\/ provided.\n",193],["T_WHITESPACE","      ",194],["T_VARIABLE","$delete",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$element",194],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",194],"]",";",["T_WHITESPACE","\n      ",194],["T_UNSET","unset",195],"(",["T_VARIABLE","$element",195],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",195],"]",")",";",["T_WHITESPACE","\n      ",195],["T_VARIABLE","$element",196],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",196],"]",["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$delete",196],";",["T_WHITESPACE","\n      ",196],["T_VARIABLE","$element",197],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",197],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#button_type'",197],"]",["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'danger'",197],";",["T_WHITESPACE","\n    ",197],"}",["T_WHITESPACE","\n\n    ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_ISSET","isset",200],"(",["T_VARIABLE","$element",200],"[",["T_CONSTANT_ENCAPSED_STRING","'submit'",200],"]",")",")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n      ",200],["T_COMMENT","\/\/ Give the primary submit button a #button_type of primary.\n",201],["T_WHITESPACE","      ",202],["T_VARIABLE","$element",202],"[",["T_CONSTANT_ENCAPSED_STRING","'submit'",202],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#button_type'",202],"]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'primary'",202],";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_VARIABLE","$count",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_LNUMBER","0",205],";",["T_WHITESPACE","\n    ",205],["T_FOREACH","foreach",206],["T_WHITESPACE"," ",206],"(",["T_STRING","Element",206],["T_DOUBLE_COLON","::",206],["T_STRING","children",206],"(",["T_VARIABLE","$element",206],")",["T_WHITESPACE"," ",206],["T_AS","as",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$action",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$element",207],"[",["T_VARIABLE","$action",207],"]",["T_WHITESPACE"," ",207],["T_PLUS_EQUAL","+=",207],["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_WHITESPACE","\n        ",207],["T_CONSTANT_ENCAPSED_STRING","'#weight'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_INC","++",208],["T_VARIABLE","$count",208],["T_WHITESPACE"," ",208],"*",["T_WHITESPACE"," ",208],["T_LNUMBER","5",208],",",["T_WHITESPACE","\n      ",208],")",";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_IF","if",212],["T_WHITESPACE"," ",212],"(","!",["T_EMPTY","empty",212],"(",["T_VARIABLE","$element",212],")",")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$element",213],"[",["T_CONSTANT_ENCAPSED_STRING","'#type'",213],"]",["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'actions'",213],";",["T_WHITESPACE","\n    ",213],"}",["T_WHITESPACE","\n\n    ",214],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$element",216],";",["T_WHITESPACE","\n  ",216],"}",["T_WHITESPACE","\n\n  ",217],["T_DOC_COMMENT","\/**\n   * Returns an array of supported actions for the current entity form.\n   *\n   * @todo Consider introducing a 'preview' action here, since it is used by\n   *   many entity types.\n   *\/",219],["T_WHITESPACE","\n  ",224],["T_PROTECTED","protected",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","actions",225],"(",["T_ARRAY","array",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$form",225],",",["T_WHITESPACE"," ",225],["T_STRING","FormStateInterface",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$form_state",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n    ",225],["T_COMMENT","\/\/ @todo Consider renaming the action key from submit to save. The impacts\n",226],["T_WHITESPACE","    ",227],["T_COMMENT","\/\/   are hard to predict. For example, see\n",227],["T_WHITESPACE","    ",228],["T_COMMENT","\/\/   \\Drupal\\language\\Element\\LanguageConfiguration::processLanguageConfiguration().\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$actions",229],"[",["T_CONSTANT_ENCAPSED_STRING","'submit'",229],"]",["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_ARRAY","array",229],"(",["T_WHITESPACE","\n      ",229],["T_CONSTANT_ENCAPSED_STRING","'#type'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'submit'",230],",",["T_WHITESPACE","\n      ",230],["T_CONSTANT_ENCAPSED_STRING","'#value'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","t",231],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",231],")",",",["T_WHITESPACE","\n      ",231],["T_CONSTANT_ENCAPSED_STRING","'#submit'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_ARRAY","array",232],"(",["T_CONSTANT_ENCAPSED_STRING","'::submitForm'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'::save'",232],")",",",["T_WHITESPACE","\n    ",232],")",";",["T_WHITESPACE","\n\n    ",233],["T_IF","if",235],["T_WHITESPACE"," ",235],"(","!",["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","entity",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","isNew",235],"(",")",["T_WHITESPACE"," ",235],["T_BOOLEAN_AND","&&",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","entity",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","hasLinkTemplate",235],"(",["T_CONSTANT_ENCAPSED_STRING","'delete-form'",235],")",")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n      ",235],["T_VARIABLE","$route_info",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","entity",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","urlInfo",236],"(",["T_CONSTANT_ENCAPSED_STRING","'delete-form'",236],")",";",["T_WHITESPACE","\n      ",236],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","getRequest",237],"(",")",["T_OBJECT_OPERATOR","->",237],["T_STRING","query",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","has",237],"(",["T_CONSTANT_ENCAPSED_STRING","'destination'",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n        ",237],["T_VARIABLE","$query",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_VARIABLE","$route_info",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getOption",238],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",238],")",";",["T_WHITESPACE","\n        ",238],["T_VARIABLE","$query",239],"[",["T_CONSTANT_ENCAPSED_STRING","'destination'",239],"]",["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getRequest",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","query",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","get",239],"(",["T_CONSTANT_ENCAPSED_STRING","'destination'",239],")",";",["T_WHITESPACE","\n        ",239],["T_VARIABLE","$route_info",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","setOption",240],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$query",240],")",";",["T_WHITESPACE","\n      ",240],"}",["T_WHITESPACE","\n      ",241],["T_VARIABLE","$actions",242],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",242],"]",["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_ARRAY","array",242],"(",["T_WHITESPACE","\n        ",242],["T_CONSTANT_ENCAPSED_STRING","'#type'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'link'",243],",",["T_WHITESPACE","\n        ",243],["T_CONSTANT_ENCAPSED_STRING","'#title'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","t",244],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",244],")",",",["T_WHITESPACE","\n        ",244],["T_CONSTANT_ENCAPSED_STRING","'#access'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","entity",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","access",245],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",245],")",",",["T_WHITESPACE","\n        ",245],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",246],["T_WHITESPACE"," ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_ARRAY","array",246],"(",["T_WHITESPACE","\n          ",246],["T_CONSTANT_ENCAPSED_STRING","'class'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_ARRAY","array",247],"(",["T_CONSTANT_ENCAPSED_STRING","'button'",247],",",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'button--danger'",247],")",",",["T_WHITESPACE","\n        ",247],")",",",["T_WHITESPACE","\n      ",248],")",";",["T_WHITESPACE","\n      ",249],["T_VARIABLE","$actions",250],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#url'",250],"]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$route_info",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$actions",253],";",["T_WHITESPACE","\n  ",253],"}",["T_WHITESPACE","\n\n  ",254],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * This is the default entity object builder function. It is called before any\n   * other submit handler to build the new entity object to be used by the\n   * following submit handlers. At this point of the form workflow the entity is\n   * validated and the form state can be updated, this way the subsequently\n   * invoked handlers can retrieve a regular entity object to act on. Generally\n   * this method should not be overridden unless the entity requires the same\n   * preparation for two actions, see \\Drupal\\comment\\CommentForm for an example\n   * with the save and preview actions.\n   *\n   * @param array $form\n   *   An associative array containing the structure of the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",256],["T_WHITESPACE","\n  ",272],["T_PUBLIC","public",273],["T_WHITESPACE"," ",273],["T_FUNCTION","function",273],["T_WHITESPACE"," ",273],["T_STRING","submitForm",273],"(",["T_ARRAY","array",273],["T_WHITESPACE"," ",273],"&",["T_VARIABLE","$form",273],",",["T_WHITESPACE"," ",273],["T_STRING","FormStateInterface",273],["T_WHITESPACE"," ",273],["T_VARIABLE","$form_state",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n    ",273],["T_COMMENT","\/\/ Remove button and internal Form API values from submitted values.\n",274],["T_WHITESPACE","    ",275],["T_VARIABLE","$form_state",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","cleanValues",275],"(",")",";",["T_WHITESPACE","\n    ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","entity",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","buildEntity",276],"(",["T_VARIABLE","$form",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$form_state",276],")",";",["T_WHITESPACE","\n  ",276],"}",["T_WHITESPACE","\n\n  ",277],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",279],["T_WHITESPACE","\n  ",281],["T_PUBLIC","public",282],["T_WHITESPACE"," ",282],["T_FUNCTION","function",282],["T_WHITESPACE"," ",282],["T_STRING","save",282],"(",["T_ARRAY","array",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$form",282],",",["T_WHITESPACE"," ",282],["T_STRING","FormStateInterface",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$form_state",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n    ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","entity",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","save",283],"(",")",";",["T_WHITESPACE","\n  ",283],"}",["T_WHITESPACE","\n\n  ",284],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",286],["T_WHITESPACE","\n  ",288],["T_PUBLIC","public",289],["T_WHITESPACE"," ",289],["T_FUNCTION","function",289],["T_WHITESPACE"," ",289],["T_STRING","buildEntity",289],"(",["T_ARRAY","array",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$form",289],",",["T_WHITESPACE"," ",289],["T_STRING","FormStateInterface",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$form_state",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$entity",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_CLONE","clone",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","entity",290],";",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","copyFormValuesToEntity",291],"(",["T_VARIABLE","$entity",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$form",291],",",["T_WHITESPACE"," ",291],["T_VARIABLE","$form_state",291],")",";",["T_WHITESPACE","\n\n    ",291],["T_COMMENT","\/\/ Invoke all specified builders for copying form values to entity\n",293],["T_WHITESPACE","    ",294],["T_COMMENT","\/\/ properties.\n",294],["T_WHITESPACE","    ",295],["T_IF","if",295],["T_WHITESPACE"," ",295],"(",["T_ISSET","isset",295],"(",["T_VARIABLE","$form",295],"[",["T_CONSTANT_ENCAPSED_STRING","'#entity_builders'",295],"]",")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n      ",295],["T_FOREACH","foreach",296],["T_WHITESPACE"," ",296],"(",["T_VARIABLE","$form",296],"[",["T_CONSTANT_ENCAPSED_STRING","'#entity_builders'",296],"]",["T_WHITESPACE"," ",296],["T_AS","as",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$function",296],")",["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n        ",296],["T_STRING","call_user_func_array",297],"(",["T_VARIABLE","$function",297],",",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_VARIABLE","$entity",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getEntityTypeId",297],"(",")",",",["T_WHITESPACE"," ",297],["T_VARIABLE","$entity",297],",",["T_WHITESPACE"," ",297],"&",["T_VARIABLE","$form",297],",",["T_WHITESPACE"," ",297],"&",["T_VARIABLE","$form_state",297],")",")",";",["T_WHITESPACE","\n      ",297],"}",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$entity",301],";",["T_WHITESPACE","\n  ",301],"}",["T_WHITESPACE","\n\n  ",302],["T_DOC_COMMENT","\/**\n   * Copies top-level form values to entity properties\n   *\n   * This should not change existing entity properties that are not being edited\n   * by this form.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n   *   The entity the current form should operate upon.\n   * @param array $form\n   *   A nested array of form elements comprising the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",304],["T_WHITESPACE","\n  ",316],["T_PROTECTED","protected",317],["T_WHITESPACE"," ",317],["T_FUNCTION","function",317],["T_WHITESPACE"," ",317],["T_STRING","copyFormValuesToEntity",317],"(",["T_STRING","EntityInterface",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$entity",317],",",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$form",317],",",["T_WHITESPACE"," ",317],["T_STRING","FormStateInterface",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$form_state",317],")",["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n    ",317],["T_VARIABLE","$values",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_VARIABLE","$form_state",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","getValues",318],"(",")",";",["T_WHITESPACE","\n\n    ",318],["T_IF","if",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","entity",320],["T_WHITESPACE"," ",320],["T_INSTANCEOF","instanceof",320],["T_WHITESPACE"," ",320],["T_STRING","EntityWithPluginCollectionInterface",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n      ",320],["T_COMMENT","\/\/ Do not manually update values represented by plugin collections.\n",321],["T_WHITESPACE","      ",322],["T_VARIABLE","$values",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_STRING","array_diff_key",322],"(",["T_VARIABLE","$values",322],",",["T_WHITESPACE"," ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","entity",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","getPluginCollections",322],"(",")",")",";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n\n    ",323],["T_COMMENT","\/\/ @todo: This relies on a method that only exists for config and content\n",325],["T_WHITESPACE","    ",326],["T_COMMENT","\/\/   entities, in a different way. Consider moving this logic to a config\n",326],["T_WHITESPACE","    ",327],["T_COMMENT","\/\/   entity specific implementation.\n",327],["T_WHITESPACE","    ",328],["T_FOREACH","foreach",328],["T_WHITESPACE"," ",328],"(",["T_VARIABLE","$values",328],["T_WHITESPACE"," ",328],["T_AS","as",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$key",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_VARIABLE","$value",328],")",["T_WHITESPACE"," ",328],"{",["T_WHITESPACE","\n      ",328],["T_VARIABLE","$entity",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","set",329],"(",["T_VARIABLE","$key",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$value",329],")",";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n  ",330],"}",["T_WHITESPACE","\n\n  ",331],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",333],["T_WHITESPACE","\n  ",335],["T_PUBLIC","public",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","getEntity",336],"(",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n    ",336],["T_RETURN","return",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","entity",337],";",["T_WHITESPACE","\n  ",337],"}",["T_WHITESPACE","\n\n  ",338],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",340],["T_WHITESPACE","\n  ",342],["T_PUBLIC","public",343],["T_WHITESPACE"," ",343],["T_FUNCTION","function",343],["T_WHITESPACE"," ",343],["T_STRING","setEntity",343],"(",["T_STRING","EntityInterface",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$entity",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","entity",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$entity",344],";",["T_WHITESPACE","\n    ",344],["T_RETURN","return",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$this",345],";",["T_WHITESPACE","\n  ",345],"}",["T_WHITESPACE","\n\n  ",346],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",348],["T_WHITESPACE","\n  ",350],["T_PUBLIC","public",351],["T_WHITESPACE"," ",351],["T_FUNCTION","function",351],["T_WHITESPACE"," ",351],["T_STRING","getEntityFromRouteMatch",351],"(",["T_STRING","RouteMatchInterface",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$route_match",351],",",["T_WHITESPACE"," ",351],["T_VARIABLE","$entity_type_id",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n    ",351],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$route_match",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","getRawParameter",352],"(",["T_VARIABLE","$entity_type_id",352],")",["T_WHITESPACE"," ",352],["T_IS_NOT_IDENTICAL","!==",352],["T_WHITESPACE"," ",352],["T_STRING","NULL",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n      ",352],["T_VARIABLE","$entity",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$route_match",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","getParameter",353],"(",["T_VARIABLE","$entity_type_id",353],")",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n    ",354],["T_ELSE","else",355],["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$values",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],"[","]",";",["T_WHITESPACE","\n      ",356],["T_COMMENT","\/\/ If the entity has bundles, fetch it from the route match.\n",357],["T_WHITESPACE","      ",358],["T_VARIABLE","$entity_type",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","entityTypeManager",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getDefinition",358],"(",["T_VARIABLE","$entity_type_id",358],")",";",["T_WHITESPACE","\n      ",358],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_VARIABLE","$bundle_key",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$entity_type",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getKey",359],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",359],")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n        ",359],["T_IF","if",360],["T_WHITESPACE"," ",360],"(","(",["T_VARIABLE","$bundle_entity_type_id",360],["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_VARIABLE","$entity_type",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getBundleEntityType",360],"(",")",")",["T_WHITESPACE"," ",360],["T_BOOLEAN_AND","&&",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$route_match",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getRawParameter",360],"(",["T_VARIABLE","$bundle_entity_type_id",360],")",")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n          ",360],["T_VARIABLE","$values",361],"[",["T_VARIABLE","$bundle_key",361],"]",["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$route_match",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getParameter",361],"(",["T_VARIABLE","$bundle_entity_type_id",361],")",["T_OBJECT_OPERATOR","->",361],["T_STRING","id",361],"(",")",";",["T_WHITESPACE","\n        ",361],"}",["T_WHITESPACE","\n        ",362],["T_ELSEIF","elseif",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$route_match",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getRawParameter",363],"(",["T_VARIABLE","$bundle_key",363],")",")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n          ",363],["T_VARIABLE","$values",364],"[",["T_VARIABLE","$bundle_key",364],"]",["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$route_match",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getParameter",364],"(",["T_VARIABLE","$bundle_key",364],")",";",["T_WHITESPACE","\n        ",364],"}",["T_WHITESPACE","\n      ",365],"}",["T_WHITESPACE","\n\n      ",366],["T_VARIABLE","$entity",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","entityTypeManager",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getStorage",368],"(",["T_VARIABLE","$entity_type_id",368],")",["T_OBJECT_OPERATOR","->",368],["T_STRING","create",368],"(",["T_VARIABLE","$values",368],")",";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_RETURN","return",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$entity",371],";",["T_WHITESPACE","\n  ",371],"}",["T_WHITESPACE","\n\n  ",372],["T_DOC_COMMENT","\/**\n   * Prepares the entity object before the form is built first.\n   *\/",374],["T_WHITESPACE","\n  ",376],["T_PROTECTED","protected",377],["T_WHITESPACE"," ",377],["T_FUNCTION","function",377],["T_WHITESPACE"," ",377],["T_STRING","prepareEntity",377],"(",")",["T_WHITESPACE"," ",377],"{","}",["T_WHITESPACE","\n\n  ",377],["T_DOC_COMMENT","\/**\n   * Invokes the specified prepare hook variant.\n   *\n   * @param string $hook\n   *   The hook variant name.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\/",379],["T_WHITESPACE","\n  ",386],["T_PROTECTED","protected",387],["T_WHITESPACE"," ",387],["T_FUNCTION","function",387],["T_WHITESPACE"," ",387],["T_STRING","prepareInvokeAll",387],"(",["T_VARIABLE","$hook",387],",",["T_WHITESPACE"," ",387],["T_STRING","FormStateInterface",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$form_state",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$implementations",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","moduleHandler",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getImplementations",388],"(",["T_VARIABLE","$hook",388],")",";",["T_WHITESPACE","\n    ",388],["T_FOREACH","foreach",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$implementations",389],["T_WHITESPACE"," ",389],["T_AS","as",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$module",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n      ",389],["T_VARIABLE","$function",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$module",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'_'",390],["T_WHITESPACE"," ",390],".",["T_WHITESPACE"," ",390],["T_VARIABLE","$hook",390],";",["T_WHITESPACE","\n      ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(",["T_STRING","function_exists",391],"(",["T_VARIABLE","$function",391],")",")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n        ",391],["T_COMMENT","\/\/ Ensure we pass an updated translation object and form display at\n",392],["T_WHITESPACE","        ",393],["T_COMMENT","\/\/ each invocation, since they depend on form state which is alterable.\n",393],["T_WHITESPACE","        ",394],["T_VARIABLE","$args",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","entity",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","operation",394],",",["T_WHITESPACE"," ",394],"&",["T_VARIABLE","$form_state",394],")",";",["T_WHITESPACE","\n        ",394],["T_STRING","call_user_func_array",395],"(",["T_VARIABLE","$function",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$args",395],")",";",["T_WHITESPACE","\n      ",395],"}",["T_WHITESPACE","\n    ",396],"}",["T_WHITESPACE","\n  ",397],"}",["T_WHITESPACE","\n\n  ",398],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",400],["T_WHITESPACE","\n  ",402],["T_PUBLIC","public",403],["T_WHITESPACE"," ",403],["T_FUNCTION","function",403],["T_WHITESPACE"," ",403],["T_STRING","getOperation",403],"(",")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n    ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","operation",404],";",["T_WHITESPACE","\n  ",404],"}",["T_WHITESPACE","\n\n  ",405],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",407],["T_WHITESPACE","\n  ",409],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","setModuleHandler",410],"(",["T_STRING","ModuleHandlerInterface",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$module_handler",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","moduleHandler",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$module_handler",411],";",["T_WHITESPACE","\n    ",411],["T_RETURN","return",412],["T_WHITESPACE"," ",412],["T_VARIABLE","$this",412],";",["T_WHITESPACE","\n  ",412],"}",["T_WHITESPACE","\n\n  ",413],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",415],["T_WHITESPACE","\n  ",417],["T_PUBLIC","public",418],["T_WHITESPACE"," ",418],["T_FUNCTION","function",418],["T_WHITESPACE"," ",418],["T_STRING","setEntityManager",418],"(",["T_STRING","EntityManagerInterface",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$entity_manager",418],")",["T_WHITESPACE"," ",418],"{",["T_WHITESPACE","\n    ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","entityManager",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$entity_manager",419],";",["T_WHITESPACE","\n    ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_VARIABLE","$this",420],";",["T_WHITESPACE","\n  ",420],"}",["T_WHITESPACE","\n\n  ",421],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",423],["T_WHITESPACE","\n  ",425],["T_PUBLIC","public",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","setEntityTypeManager",426],"(",["T_STRING","EntityTypeManagerInterface",426],["T_WHITESPACE"," ",426],["T_VARIABLE","$entity_type_manager",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","entityTypeManager",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$entity_type_manager",427],";",["T_WHITESPACE","\n    ",427],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],";",["T_WHITESPACE","\n  ",428],"}",["T_WHITESPACE","\n\n",429],"}",["T_WHITESPACE","\n",431]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UseCacheBackendTrait",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Extension",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ModuleHandlerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","BaseFieldDefinition",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KeyValueStore",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KeyValueFactoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Language",11],["T_NS_SEPARATOR","\\",11],["T_STRING","LanguageManagerInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StringTranslation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StringTranslationTrait",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TypedData",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TypedDataManagerInterface",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Manages the discovery of entity fields.\n *\n * This includes field definitions, base field definitions, and field storage\n * definitions.\n *\/",15],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","EntityFieldManager",21],["T_WHITESPACE"," ",21],["T_IMPLEMENTS","implements",21],["T_WHITESPACE"," ",21],["T_STRING","EntityFieldManagerInterface",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_USE","use",23],["T_WHITESPACE"," ",23],["T_STRING","UseCacheBackendTrait",23],";",["T_WHITESPACE","\n  ",23],["T_USE","use",24],["T_WHITESPACE"," ",24],["T_STRING","StringTranslationTrait",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Extra fields by bundle.\n   *\n   * @var array\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$extraFields",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[","]",";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Static cache of base field definitions.\n   *\n   * @var array\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$baseFieldDefinitions",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Static cache of field definitions per bundle and entity type.\n   *\n   * @var array\n   *\/",40],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$fieldDefinitions",45],";",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * Static cache of field storage definitions per entity type.\n   *\n   * Elements of the array:\n   *  - $entity_type_id: \\Drupal\\Core\\Field\\BaseFieldDefinition[]\n   *\n   * @var array\n   *\/",47],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$fieldStorageDefinitions",55],";",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * An array keyed by entity type. Each value is an array whose keys are\n   * field names and whose value is an array with two entries:\n   *   - type: The field type.\n   *   - bundles: The bundles in which the field appears.\n   *\n   * @return array\n   *\/",57],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$fieldMap",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[","]",";",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * An array keyed by field type. Each value is an array whose key are entity\n   * types including arrays in the same form that $fieldMap.\n   *\n   * It helps access the mapping between types and fields by the field type.\n   *\n   * @var array\n   *\/",67],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$fieldMapByFieldType",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[","]",";",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * The typed data manager.\n   *\n   * @var \\Drupal\\Core\\TypedData\\TypedDataManagerInterface\n   *\/",77],["T_WHITESPACE","\n  ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$typedDataManager",82],";",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * The language manager.\n   *\n   * @var \\Drupal\\Core\\Language\\LanguageManagerInterface\n   *\/",84],["T_WHITESPACE","\n  ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$languageManager",89],";",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * The key-value factory.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface\n   *\/",91],["T_WHITESPACE","\n  ",95],["T_PROTECTED","protected",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$keyValueFactory",96],";",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * The module handler.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",98],["T_WHITESPACE","\n  ",102],["T_PROTECTED","protected",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$moduleHandler",103],";",["T_WHITESPACE","\n\n  ",103],["T_DOC_COMMENT","\/**\n   * The entity type manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeManagerInterface\n   *\/",105],["T_WHITESPACE","\n  ",109],["T_PROTECTED","protected",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$entityTypeManager",110],";",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * The entity type bundle info.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityTypeBundleInfoInterface\n   *\/",112],["T_WHITESPACE","\n  ",116],["T_PROTECTED","protected",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$entityTypeBundleInfo",117],";",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * The entity display repository.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityDisplayRepositoryInterface\n   *\/",119],["T_WHITESPACE","\n  ",123],["T_PROTECTED","protected",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$entityDisplayRepository",124],";",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityFieldManager.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeManagerInterface $entity_type_manager\n   *   The entity type manager.\n   * @param \\Drupal\\Core\\Entity\\EntityTypeBundleInfoInterface $entity_type_bundle_info\n   *   The entity type bundle info.\n   * @param \\Drupal\\Core\\Entity\\EntityDisplayRepositoryInterface $entity_display_repository\n   *   The entity display repository.\n   * @param \\Drupal\\Core\\TypedData\\TypedDataManagerInterface $typed_data_manager\n   *   The typed data manager.\n   * @param \\Drupal\\Core\\Language\\LanguageManagerInterface $language_manager\n   *   The language manager.\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface $key_value_factory\n   *   The key-value factory.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache_backend\n   *   The cache backend.\n   *\/",126],["T_WHITESPACE","\n  ",145],["T_PUBLIC","public",146],["T_WHITESPACE"," ",146],["T_FUNCTION","function",146],["T_WHITESPACE"," ",146],["T_STRING","__construct",146],"(",["T_STRING","EntityTypeManagerInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$entity_type_manager",146],",",["T_WHITESPACE"," ",146],["T_STRING","EntityTypeBundleInfoInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$entity_type_bundle_info",146],",",["T_WHITESPACE"," ",146],["T_STRING","EntityDisplayRepositoryInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$entity_display_repository",146],",",["T_WHITESPACE"," ",146],["T_STRING","TypedDataManagerInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$typed_data_manager",146],",",["T_WHITESPACE"," ",146],["T_STRING","LanguageManagerInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$language_manager",146],",",["T_WHITESPACE"," ",146],["T_STRING","KeyValueFactoryInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$key_value_factory",146],",",["T_WHITESPACE"," ",146],["T_STRING","ModuleHandlerInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$module_handler",146],",",["T_WHITESPACE"," ",146],["T_STRING","CacheBackendInterface",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$cache_backend",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","entityTypeManager",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$entity_type_manager",147],";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","entityTypeBundleInfo",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$entity_type_bundle_info",148],";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","entityDisplayRepository",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_VARIABLE","$entity_display_repository",149],";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","typedDataManager",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$typed_data_manager",151],";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","languageManager",152],["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$language_manager",152],";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","keyValueFactory",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$key_value_factory",153],";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","moduleHandler",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$module_handler",154],";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","cacheBackend",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$cache_backend",155],";",["T_WHITESPACE","\n  ",155],"}",["T_WHITESPACE","\n\n  ",156],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",158],["T_WHITESPACE","\n  ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","getBaseFieldDefinitions",161],"(",["T_VARIABLE","$entity_type_id",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_COMMENT","\/\/ Check the static cache.\n",162],["T_WHITESPACE","    ",163],["T_IF","if",163],["T_WHITESPACE"," ",163],"(","!",["T_ISSET","isset",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","baseFieldDefinitions",163],"[",["T_VARIABLE","$entity_type_id",163],"]",")",")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_COMMENT","\/\/ Not prepared, try to load from cache.\n",164],["T_WHITESPACE","      ",165],["T_VARIABLE","$cid",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'entity_base_field_definitions:'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_VARIABLE","$entity_type_id",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","':'",165],["T_WHITESPACE"," ",165],".",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","languageManager",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getCurrentLanguage",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getId",165],"(",")",";",["T_WHITESPACE","\n      ",165],["T_IF","if",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$cache",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","cacheGet",166],"(",["T_VARIABLE","$cid",166],")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n        ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","baseFieldDefinitions",167],"[",["T_VARIABLE","$entity_type_id",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$cache",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","data",167],";",["T_WHITESPACE","\n      ",167],"}",["T_WHITESPACE","\n      ",168],["T_ELSE","else",169],["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n        ",169],["T_COMMENT","\/\/ Rebuild the definitions and put it into the cache.\n",170],["T_WHITESPACE","        ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","baseFieldDefinitions",171],"[",["T_VARIABLE","$entity_type_id",171],"]",["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","buildBaseFieldDefinitions",171],"(",["T_VARIABLE","$entity_type_id",171],")",";",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","cacheSet",172],"(",["T_VARIABLE","$cid",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","baseFieldDefinitions",172],"[",["T_VARIABLE","$entity_type_id",172],"]",",",["T_WHITESPACE"," ",172],["T_STRING","Cache",172],["T_DOUBLE_COLON","::",172],["T_STRING","PERMANENT",172],",",["T_WHITESPACE"," ",172],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",172],"]",")",";",["T_WHITESPACE","\n      ",172],"}",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n    ",174],["T_RETURN","return",175],["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","baseFieldDefinitions",175],"[",["T_VARIABLE","$entity_type_id",175],"]",";",["T_WHITESPACE","\n  ",175],"}",["T_WHITESPACE","\n\n  ",176],["T_DOC_COMMENT","\/**\n   * Builds base field definitions for an entity type.\n   *\n   * @param string $entity_type_id\n   *   The entity type ID. Only entity types that implement\n   *   \\Drupal\\Core\\Entity\\FieldableEntityInterface are supported.\n   *\n   * @return \\Drupal\\Core\\Field\\FieldDefinitionInterface[]\n   *   An array of field definitions, keyed by field name.\n   *\n   * @throws \\LogicException\n   *   Thrown if a config entity type is given or if one of the entity keys is\n   *   flagged as translatable.\n   *\/",178],["T_WHITESPACE","\n  ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","buildBaseFieldDefinitions",192],"(",["T_VARIABLE","$entity_type_id",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$entity_type",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","entityTypeManager",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getDefinition",193],"(",["T_VARIABLE","$entity_type_id",193],")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$class",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$entity_type",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getClass",194],"(",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$keys",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","array_filter",195],"(",["T_VARIABLE","$entity_type",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getKeys",195],"(",")",")",";",["T_WHITESPACE","\n\n    ",195],["T_COMMENT","\/\/ Fail with an exception for non-fieldable entity types.\n",197],["T_WHITESPACE","    ",198],["T_IF","if",198],["T_WHITESPACE"," ",198],"(","!",["T_VARIABLE","$entity_type",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","isSubclassOf",198],"(",["T_STRING","FieldableEntityInterface",198],["T_DOUBLE_COLON","::",198],["T_CLASS","class",198],")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n      ",198],["T_THROW","throw",199],["T_WHITESPACE"," ",199],["T_NEW","new",199],["T_WHITESPACE"," ",199],["T_NS_SEPARATOR","\\",199],["T_STRING","LogicException",199],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Getting the base fields is not supported for entity type ",199],["T_CURLY_OPEN","{",199],["T_VARIABLE","$entity_type",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getLabel",199],"(",")","}",["T_ENCAPSED_AND_WHITESPACE",".",199],"\"",")",";",["T_WHITESPACE","\n    ",199],"}",["T_WHITESPACE","\n\n    ",200],["T_COMMENT","\/\/ Retrieve base field definitions.\n",202],["T_WHITESPACE","    ",203],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface[] $base_field_definitions *\/",203],["T_WHITESPACE","\n    ",203],["T_VARIABLE","$base_field_definitions",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$class",204],["T_DOUBLE_COLON","::",204],["T_STRING","baseFieldDefinitions",204],"(",["T_VARIABLE","$entity_type",204],")",";",["T_WHITESPACE","\n\n    ",204],["T_COMMENT","\/\/ Make sure translatable entity types are correctly defined.\n",206],["T_WHITESPACE","    ",207],["T_IF","if",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$entity_type",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","isTranslatable",207],"(",")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n      ",207],["T_COMMENT","\/\/ The langcode field should always be translatable if the entity type is.\n",208],["T_WHITESPACE","      ",209],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_ISSET","isset",209],"(",["T_VARIABLE","$keys",209],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",209],"]",")",["T_WHITESPACE"," ",209],["T_BOOLEAN_AND","&&",209],["T_WHITESPACE"," ",209],["T_ISSET","isset",209],"(",["T_VARIABLE","$base_field_definitions",209],"[",["T_VARIABLE","$keys",209],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",209],"]","]",")",")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$base_field_definitions",210],"[",["T_VARIABLE","$keys",210],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",210],"]","]",["T_OBJECT_OPERATOR","->",210],["T_STRING","setTranslatable",210],"(",["T_STRING","TRUE",210],")",";",["T_WHITESPACE","\n      ",210],"}",["T_WHITESPACE","\n      ",211],["T_COMMENT","\/\/ A default_langcode field should always be defined.\n",212],["T_WHITESPACE","      ",213],["T_IF","if",213],["T_WHITESPACE"," ",213],"(","!",["T_ISSET","isset",213],"(",["T_VARIABLE","$base_field_definitions",213],"[",["T_VARIABLE","$keys",213],"[",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",213],"]","]",")",")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$base_field_definitions",214],"[",["T_VARIABLE","$keys",214],"[",["T_CONSTANT_ENCAPSED_STRING","'default_langcode'",214],"]","]",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_STRING","BaseFieldDefinition",214],["T_DOUBLE_COLON","::",214],["T_STRING","create",214],"(",["T_CONSTANT_ENCAPSED_STRING","'boolean'",214],")",["T_WHITESPACE","\n          ",214],["T_OBJECT_OPERATOR","->",215],["T_STRING","setLabel",215],"(",["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","t",215],"(",["T_CONSTANT_ENCAPSED_STRING","'Default translation'",215],")",")",["T_WHITESPACE","\n          ",215],["T_OBJECT_OPERATOR","->",216],["T_STRING","setDescription",216],"(",["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","t",216],"(",["T_CONSTANT_ENCAPSED_STRING","'A flag indicating whether this is the default translation.'",216],")",")",["T_WHITESPACE","\n          ",216],["T_OBJECT_OPERATOR","->",217],["T_STRING","setTranslatable",217],"(",["T_STRING","TRUE",217],")",["T_WHITESPACE","\n          ",217],["T_OBJECT_OPERATOR","->",218],["T_STRING","setRevisionable",218],"(",["T_STRING","TRUE",218],")",["T_WHITESPACE","\n          ",218],["T_OBJECT_OPERATOR","->",219],["T_STRING","setDefaultValue",219],"(",["T_STRING","TRUE",219],")",";",["T_WHITESPACE","\n      ",219],"}",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_COMMENT","\/\/ Assign base field definitions the entity type provider.\n",223],["T_WHITESPACE","    ",224],["T_VARIABLE","$provider",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$entity_type",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getProvider",224],"(",")",";",["T_WHITESPACE","\n    ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$base_field_definitions",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$definition",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n      ",225],["T_COMMENT","\/\/ @todo Remove this check once FieldDefinitionInterface exposes a proper\n",226],["T_WHITESPACE","      ",227],["T_COMMENT","\/\/  provider setter. See https:\/\/www.drupal.org\/node\/2225961.\n",227],["T_WHITESPACE","      ",228],["T_IF","if",228],["T_WHITESPACE"," ",228],"(",["T_VARIABLE","$definition",228],["T_WHITESPACE"," ",228],["T_INSTANCEOF","instanceof",228],["T_WHITESPACE"," ",228],["T_STRING","BaseFieldDefinition",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n        ",228],["T_VARIABLE","$definition",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","setProvider",229],"(",["T_VARIABLE","$provider",229],")",";",["T_WHITESPACE","\n      ",229],"}",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n\n    ",231],["T_COMMENT","\/\/ Retrieve base field definitions from modules.\n",233],["T_WHITESPACE","    ",234],["T_FOREACH","foreach",234],["T_WHITESPACE"," ",234],"(",["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","moduleHandler",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getImplementations",234],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_base_field_info'",234],")",["T_WHITESPACE"," ",234],["T_AS","as",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$module",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n      ",234],["T_VARIABLE","$module_definitions",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","moduleHandler",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","invoke",235],"(",["T_VARIABLE","$module",235],",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'entity_base_field_info'",235],",",["T_WHITESPACE"," ",235],"[",["T_VARIABLE","$entity_type",235],"]",")",";",["T_WHITESPACE","\n      ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(","!",["T_EMPTY","empty",236],"(",["T_VARIABLE","$module_definitions",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n        ",236],["T_COMMENT","\/\/ Ensure the provider key actually matches the name of the provider\n",237],["T_WHITESPACE","        ",238],["T_COMMENT","\/\/ defining the field.\n",238],["T_WHITESPACE","        ",239],["T_FOREACH","foreach",239],["T_WHITESPACE"," ",239],"(",["T_VARIABLE","$module_definitions",239],["T_WHITESPACE"," ",239],["T_AS","as",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$field_name",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$definition",239],")",["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n          ",239],["T_COMMENT","\/\/ @todo Remove this check once FieldDefinitionInterface exposes a\n",240],["T_WHITESPACE","          ",241],["T_COMMENT","\/\/  proper provider setter. See https:\/\/www.drupal.org\/node\/2225961.\n",241],["T_WHITESPACE","          ",242],["T_IF","if",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$definition",242],["T_WHITESPACE"," ",242],["T_INSTANCEOF","instanceof",242],["T_WHITESPACE"," ",242],["T_STRING","BaseFieldDefinition",242],["T_WHITESPACE"," ",242],["T_BOOLEAN_AND","&&",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$definition",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","getProvider",242],"(",")",["T_WHITESPACE"," ",242],["T_IS_EQUAL","==",242],["T_WHITESPACE"," ",242],["T_STRING","NULL",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n            ",242],["T_VARIABLE","$definition",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","setProvider",243],"(",["T_VARIABLE","$module",243],")",";",["T_WHITESPACE","\n          ",243],"}",["T_WHITESPACE","\n          ",244],["T_VARIABLE","$base_field_definitions",245],"[",["T_VARIABLE","$field_name",245],"]",["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$definition",245],";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n      ",246],"}",["T_WHITESPACE","\n    ",247],"}",["T_WHITESPACE","\n\n    ",248],["T_COMMENT","\/\/ Automatically set the field name, target entity type and bundle\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ for non-configurable fields.\n",251],["T_WHITESPACE","    ",252],["T_FOREACH","foreach",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$base_field_definitions",252],["T_WHITESPACE"," ",252],["T_AS","as",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$field_name",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_VARIABLE","$base_field_definition",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n      ",252],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$base_field_definition",253],["T_WHITESPACE"," ",253],["T_INSTANCEOF","instanceof",253],["T_WHITESPACE"," ",253],["T_STRING","BaseFieldDefinition",253],")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$base_field_definition",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","setName",254],"(",["T_VARIABLE","$field_name",254],")",";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$base_field_definition",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setTargetEntityTypeId",255],"(",["T_VARIABLE","$entity_type_id",255],")",";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$base_field_definition",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","setTargetBundle",256],"(",["T_STRING","NULL",256],")",";",["T_WHITESPACE","\n      ",256],"}",["T_WHITESPACE","\n    ",257],"}",["T_WHITESPACE","\n\n    ",258],["T_COMMENT","\/\/ Invoke alter hook.\n",260],["T_WHITESPACE","    ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","moduleHandler",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","alter",261],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_base_field_info'",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$base_field_definitions",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$entity_type",261],")",";",["T_WHITESPACE","\n\n    ",261],["T_COMMENT","\/\/ Ensure defined entity keys are there and have proper revisionable and\n",263],["T_WHITESPACE","    ",264],["T_COMMENT","\/\/ translatable values.\n",264],["T_WHITESPACE","    ",265],["T_FOREACH","foreach",265],["T_WHITESPACE"," ",265],"(",["T_STRING","array_intersect_key",265],"(",["T_VARIABLE","$keys",265],",",["T_WHITESPACE"," ",265],["T_STRING","array_flip",265],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'revision'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'uuid'",265],",",["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'bundle'",265],"]",")",")",["T_WHITESPACE"," ",265],["T_AS","as",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$key",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_VARIABLE","$field_name",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n      ",265],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","!",["T_ISSET","isset",266],"(",["T_VARIABLE","$base_field_definitions",266],"[",["T_VARIABLE","$field_name",266],"]",")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n        ",266],["T_THROW","throw",267],["T_WHITESPACE"," ",267],["T_NEW","new",267],["T_WHITESPACE"," ",267],["T_NS_SEPARATOR","\\",267],["T_STRING","LogicException",267],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",267],["T_VARIABLE","$field_name",267],["T_ENCAPSED_AND_WHITESPACE"," field definition does not exist and it is used as ",267],["T_VARIABLE","$key",267],["T_ENCAPSED_AND_WHITESPACE"," entity key.",267],"\"",")",";",["T_WHITESPACE","\n      ",267],"}",["T_WHITESPACE","\n      ",268],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$base_field_definitions",269],"[",["T_VARIABLE","$field_name",269],"]",["T_OBJECT_OPERATOR","->",269],["T_STRING","isRevisionable",269],"(",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n        ",269],["T_THROW","throw",270],["T_WHITESPACE"," ",270],["T_NEW","new",270],["T_WHITESPACE"," ",270],["T_NS_SEPARATOR","\\",270],["T_STRING","LogicException",270],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",270],["T_CURLY_OPEN","{",270],["T_VARIABLE","$base_field_definitions",270],"[",["T_VARIABLE","$field_name",270],"]",["T_OBJECT_OPERATOR","->",270],["T_STRING","getLabel",270],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," field cannot be revisionable as it is used as ",270],["T_VARIABLE","$key",270],["T_ENCAPSED_AND_WHITESPACE"," entity key.",270],"\"",")",";",["T_WHITESPACE","\n      ",270],"}",["T_WHITESPACE","\n      ",271],["T_IF","if",272],["T_WHITESPACE"," ",272],"(",["T_VARIABLE","$base_field_definitions",272],"[",["T_VARIABLE","$field_name",272],"]",["T_OBJECT_OPERATOR","->",272],["T_STRING","isTranslatable",272],"(",")",")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n        ",272],["T_THROW","throw",273],["T_WHITESPACE"," ",273],["T_NEW","new",273],["T_WHITESPACE"," ",273],["T_NS_SEPARATOR","\\",273],["T_STRING","LogicException",273],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",273],["T_CURLY_OPEN","{",273],["T_VARIABLE","$base_field_definitions",273],"[",["T_VARIABLE","$field_name",273],"]",["T_OBJECT_OPERATOR","->",273],["T_STRING","getLabel",273],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," field cannot be translatable as it is used as ",273],["T_VARIABLE","$key",273],["T_ENCAPSED_AND_WHITESPACE"," entity key.",273],"\"",")",";",["T_WHITESPACE","\n      ",273],"}",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n\n    ",275],["T_COMMENT","\/\/ Make sure translatable entity types define the \"langcode\" field properly.\n",277],["T_WHITESPACE","    ",278],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$entity_type",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","isTranslatable",278],"(",")",["T_WHITESPACE"," ",278],["T_BOOLEAN_AND","&&",278],["T_WHITESPACE"," ",278],"(","!",["T_ISSET","isset",278],"(",["T_VARIABLE","$keys",278],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",278],"]",")",["T_WHITESPACE"," ",278],["T_BOOLEAN_OR","||",278],["T_WHITESPACE"," ",278],"!",["T_ISSET","isset",278],"(",["T_VARIABLE","$base_field_definitions",278],"[",["T_VARIABLE","$keys",278],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",278],"]","]",")",["T_WHITESPACE"," ",278],["T_BOOLEAN_OR","||",278],["T_WHITESPACE"," ",278],"!",["T_VARIABLE","$base_field_definitions",278],"[",["T_VARIABLE","$keys",278],"[",["T_CONSTANT_ENCAPSED_STRING","'langcode'",278],"]","]",["T_OBJECT_OPERATOR","->",278],["T_STRING","isTranslatable",278],"(",")",")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n      ",278],["T_THROW","throw",279],["T_WHITESPACE"," ",279],["T_NEW","new",279],["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","LogicException",279],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The ",279],["T_CURLY_OPEN","{",279],["T_VARIABLE","$entity_type",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getLabel",279],"(",")","}",["T_ENCAPSED_AND_WHITESPACE"," entity type cannot be translatable as it does not define a translatable \\\"langcode\\\" field.",279],"\"",")",";",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n\n    ",280],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$base_field_definitions",282],";",["T_WHITESPACE","\n  ",282],"}",["T_WHITESPACE","\n\n  ",283],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",285],["T_WHITESPACE","\n  ",287],["T_PUBLIC","public",288],["T_WHITESPACE"," ",288],["T_FUNCTION","function",288],["T_WHITESPACE"," ",288],["T_STRING","getFieldDefinitions",288],"(",["T_VARIABLE","$entity_type_id",288],",",["T_WHITESPACE"," ",288],["T_VARIABLE","$bundle",288],")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n    ",288],["T_IF","if",289],["T_WHITESPACE"," ",289],"(","!",["T_ISSET","isset",289],"(",["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","fieldDefinitions",289],"[",["T_VARIABLE","$entity_type_id",289],"]","[",["T_VARIABLE","$bundle",289],"]",")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n      ",289],["T_VARIABLE","$base_field_definitions",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getBaseFieldDefinitions",290],"(",["T_VARIABLE","$entity_type_id",290],")",";",["T_WHITESPACE","\n      ",290],["T_COMMENT","\/\/ Not prepared, try to load from cache.\n",291],["T_WHITESPACE","      ",292],["T_VARIABLE","$cid",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'entity_bundle_field_definitions:'",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$entity_type_id",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","':'",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$bundle",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","':'",292],["T_WHITESPACE"," ",292],".",["T_WHITESPACE"," ",292],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","languageManager",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","getCurrentLanguage",292],"(",")",["T_OBJECT_OPERATOR","->",292],["T_STRING","getId",292],"(",")",";",["T_WHITESPACE","\n      ",292],["T_IF","if",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$cache",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","cacheGet",293],"(",["T_VARIABLE","$cid",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$bundle_field_definitions",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$cache",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","data",294],";",["T_WHITESPACE","\n      ",294],"}",["T_WHITESPACE","\n      ",295],["T_ELSE","else",296],["T_WHITESPACE"," ",296],"{",["T_WHITESPACE","\n        ",296],["T_COMMENT","\/\/ Rebuild the definitions and put it into the cache.\n",297],["T_WHITESPACE","        ",298],["T_VARIABLE","$bundle_field_definitions",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","buildBundleFieldDefinitions",298],"(",["T_VARIABLE","$entity_type_id",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$bundle",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$base_field_definitions",298],")",";",["T_WHITESPACE","\n        ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","cacheSet",299],"(",["T_VARIABLE","$cid",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$bundle_field_definitions",299],",",["T_WHITESPACE"," ",299],["T_STRING","Cache",299],["T_DOUBLE_COLON","::",299],["T_STRING","PERMANENT",299],",",["T_WHITESPACE"," ",299],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",299],"]",")",";",["T_WHITESPACE","\n      ",299],"}",["T_WHITESPACE","\n      ",300],["T_COMMENT","\/\/ Field definitions consist of the bundle specific overrides and the\n",301],["T_WHITESPACE","      ",302],["T_COMMENT","\/\/ base fields, merge them together. Use array_replace() to replace base\n",302],["T_WHITESPACE","      ",303],["T_COMMENT","\/\/ fields with by bundle overrides and keep them in order, append\n",303],["T_WHITESPACE","      ",304],["T_COMMENT","\/\/ additional by bundle fields.\n",304],["T_WHITESPACE","      ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","fieldDefinitions",305],"[",["T_VARIABLE","$entity_type_id",305],"]","[",["T_VARIABLE","$bundle",305],"]",["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","array_replace",305],"(",["T_VARIABLE","$base_field_definitions",305],",",["T_WHITESPACE"," ",305],["T_VARIABLE","$bundle_field_definitions",305],")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n    ",306],["T_RETURN","return",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","fieldDefinitions",307],"[",["T_VARIABLE","$entity_type_id",307],"]","[",["T_VARIABLE","$bundle",307],"]",";",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n  ",308],["T_DOC_COMMENT","\/**\n   * Builds field definitions for a specific bundle within an entity type.\n   *\n   * @param string $entity_type_id\n   *   The entity type ID. Only entity types that implement\n   *   \\Drupal\\Core\\Entity\\FieldableEntityInterface are supported.\n   * @param string $bundle\n   *   The bundle.\n   * @param \\Drupal\\Core\\Field\\FieldDefinitionInterface[] $base_field_definitions\n   *   The list of base field definitions.\n   *\n   * @return \\Drupal\\Core\\Field\\FieldDefinitionInterface[]\n   *   An array of bundle field definitions, keyed by field name. Does\n   *   not include base fields.\n   *\/",310],["T_WHITESPACE","\n  ",324],["T_PROTECTED","protected",325],["T_WHITESPACE"," ",325],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","buildBundleFieldDefinitions",325],"(",["T_VARIABLE","$entity_type_id",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$bundle",325],",",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$base_field_definitions",325],")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$entity_type",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","entityTypeManager",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","getDefinition",326],"(",["T_VARIABLE","$entity_type_id",326],")",";",["T_WHITESPACE","\n    ",326],["T_VARIABLE","$class",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$entity_type",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getClass",327],"(",")",";",["T_WHITESPACE","\n\n    ",327],["T_COMMENT","\/\/ Allow the entity class to provide bundle fields and bundle-specific\n",329],["T_WHITESPACE","    ",330],["T_COMMENT","\/\/ overrides of base fields.\n",330],["T_WHITESPACE","    ",331],["T_VARIABLE","$bundle_field_definitions",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$class",331],["T_DOUBLE_COLON","::",331],["T_STRING","bundleFieldDefinitions",331],"(",["T_VARIABLE","$entity_type",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$bundle",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$base_field_definitions",331],")",";",["T_WHITESPACE","\n\n    ",331],["T_COMMENT","\/\/ Load base field overrides from configuration. These take precedence over\n",333],["T_WHITESPACE","    ",334],["T_COMMENT","\/\/ base field overrides returned above.\n",334],["T_WHITESPACE","    ",335],["T_VARIABLE","$base_field_override_ids",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","array_map",335],"(",["T_FUNCTION","function",335],"(",["T_VARIABLE","$field_name",335],")",["T_WHITESPACE"," ",335],["T_USE","use",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$entity_type_id",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$bundle",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n      ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$entity_type_id",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'.'",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_VARIABLE","$bundle",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'.'",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_VARIABLE","$field_name",336],";",["T_WHITESPACE","\n    ",336],"}",",",["T_WHITESPACE"," ",337],["T_STRING","array_keys",337],"(",["T_VARIABLE","$base_field_definitions",337],")",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$base_field_overrides",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","entityTypeManager",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getStorage",338],"(",["T_CONSTANT_ENCAPSED_STRING","'base_field_override'",338],")",["T_OBJECT_OPERATOR","->",338],["T_STRING","loadMultiple",338],"(",["T_VARIABLE","$base_field_override_ids",338],")",";",["T_WHITESPACE","\n    ",338],["T_FOREACH","foreach",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$base_field_overrides",339],["T_WHITESPACE"," ",339],["T_AS","as",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$base_field_override",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n      ",339],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Field\\Entity\\BaseFieldOverride $base_field_override *\/",340],["T_WHITESPACE","\n      ",340],["T_VARIABLE","$field_name",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$base_field_override",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","getName",341],"(",")",";",["T_WHITESPACE","\n      ",341],["T_VARIABLE","$bundle_field_definitions",342],"[",["T_VARIABLE","$field_name",342],"]",["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$base_field_override",342],";",["T_WHITESPACE","\n    ",342],"}",["T_WHITESPACE","\n\n    ",343],["T_VARIABLE","$provider",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_VARIABLE","$entity_type",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getProvider",345],"(",")",";",["T_WHITESPACE","\n    ",345],["T_FOREACH","foreach",346],["T_WHITESPACE"," ",346],"(",["T_VARIABLE","$bundle_field_definitions",346],["T_WHITESPACE"," ",346],["T_AS","as",346],["T_WHITESPACE"," ",346],["T_VARIABLE","$definition",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n      ",346],["T_COMMENT","\/\/ @todo Remove this check once FieldDefinitionInterface exposes a proper\n",347],["T_WHITESPACE","      ",348],["T_COMMENT","\/\/  provider setter. See https:\/\/www.drupal.org\/node\/2225961.\n",348],["T_WHITESPACE","      ",349],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$definition",349],["T_WHITESPACE"," ",349],["T_INSTANCEOF","instanceof",349],["T_WHITESPACE"," ",349],["T_STRING","BaseFieldDefinition",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n        ",349],["T_VARIABLE","$definition",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","setProvider",350],"(",["T_VARIABLE","$provider",350],")",";",["T_WHITESPACE","\n      ",350],"}",["T_WHITESPACE","\n    ",351],"}",["T_WHITESPACE","\n\n    ",352],["T_COMMENT","\/\/ Retrieve base field definitions from modules.\n",354],["T_WHITESPACE","    ",355],["T_FOREACH","foreach",355],["T_WHITESPACE"," ",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","moduleHandler",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getImplementations",355],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_bundle_field_info'",355],")",["T_WHITESPACE"," ",355],["T_AS","as",355],["T_WHITESPACE"," ",355],["T_VARIABLE","$module",355],")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$module_definitions",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","moduleHandler",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","invoke",356],"(",["T_VARIABLE","$module",356],",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'entity_bundle_field_info'",356],",",["T_WHITESPACE"," ",356],"[",["T_VARIABLE","$entity_type",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$bundle",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$base_field_definitions",356],"]",")",";",["T_WHITESPACE","\n      ",356],["T_IF","if",357],["T_WHITESPACE"," ",357],"(","!",["T_EMPTY","empty",357],"(",["T_VARIABLE","$module_definitions",357],")",")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n        ",357],["T_COMMENT","\/\/ Ensure the provider key actually matches the name of the provider\n",358],["T_WHITESPACE","        ",359],["T_COMMENT","\/\/ defining the field.\n",359],["T_WHITESPACE","        ",360],["T_FOREACH","foreach",360],["T_WHITESPACE"," ",360],"(",["T_VARIABLE","$module_definitions",360],["T_WHITESPACE"," ",360],["T_AS","as",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$field_name",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$definition",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n          ",360],["T_COMMENT","\/\/ @todo Remove this check once FieldDefinitionInterface exposes a\n",361],["T_WHITESPACE","          ",362],["T_COMMENT","\/\/  proper provider setter. See https:\/\/www.drupal.org\/node\/2225961.\n",362],["T_WHITESPACE","          ",363],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$definition",363],["T_WHITESPACE"," ",363],["T_INSTANCEOF","instanceof",363],["T_WHITESPACE"," ",363],["T_STRING","BaseFieldDefinition",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n            ",363],["T_VARIABLE","$definition",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","setProvider",364],"(",["T_VARIABLE","$module",364],")",";",["T_WHITESPACE","\n          ",364],"}",["T_WHITESPACE","\n          ",365],["T_VARIABLE","$bundle_field_definitions",366],"[",["T_VARIABLE","$field_name",366],"]",["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$definition",366],";",["T_WHITESPACE","\n        ",366],"}",["T_WHITESPACE","\n      ",367],"}",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_COMMENT","\/\/ Automatically set the field name, target entity type and bundle\n",371],["T_WHITESPACE","    ",372],["T_COMMENT","\/\/ for non-configurable fields.\n",372],["T_WHITESPACE","    ",373],["T_FOREACH","foreach",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$bundle_field_definitions",373],["T_WHITESPACE"," ",373],["T_AS","as",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$field_name",373],["T_WHITESPACE"," ",373],["T_DOUBLE_ARROW","=>",373],["T_WHITESPACE"," ",373],["T_VARIABLE","$field_definition",373],")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n      ",373],["T_IF","if",374],["T_WHITESPACE"," ",374],"(",["T_VARIABLE","$field_definition",374],["T_WHITESPACE"," ",374],["T_INSTANCEOF","instanceof",374],["T_WHITESPACE"," ",374],["T_STRING","BaseFieldDefinition",374],")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n        ",374],["T_VARIABLE","$field_definition",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","setName",375],"(",["T_VARIABLE","$field_name",375],")",";",["T_WHITESPACE","\n        ",375],["T_VARIABLE","$field_definition",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","setTargetEntityTypeId",376],"(",["T_VARIABLE","$entity_type_id",376],")",";",["T_WHITESPACE","\n        ",376],["T_VARIABLE","$field_definition",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","setTargetBundle",377],"(",["T_VARIABLE","$bundle",377],")",";",["T_WHITESPACE","\n      ",377],"}",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n\n    ",379],["T_COMMENT","\/\/ Invoke 'per bundle' alter hook.\n",381],["T_WHITESPACE","    ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","moduleHandler",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","alter",382],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_bundle_field_info'",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$bundle_field_definitions",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$entity_type",382],",",["T_WHITESPACE"," ",382],["T_VARIABLE","$bundle",382],")",";",["T_WHITESPACE","\n\n    ",382],["T_RETURN","return",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$bundle_field_definitions",384],";",["T_WHITESPACE","\n  ",384],"}",["T_WHITESPACE","\n\n  ",385],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",387],["T_WHITESPACE","\n  ",389],["T_PUBLIC","public",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","getFieldStorageDefinitions",390],"(",["T_VARIABLE","$entity_type_id",390],")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n    ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(","!",["T_ISSET","isset",391],"(",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","fieldStorageDefinitions",391],"[",["T_VARIABLE","$entity_type_id",391],"]",")",")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n      ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","fieldStorageDefinitions",392],"[",["T_VARIABLE","$entity_type_id",392],"]",["T_WHITESPACE"," ",392],"=",["T_WHITESPACE"," ",392],"[","]",";",["T_WHITESPACE","\n      ",392],["T_COMMENT","\/\/ Add all non-computed base fields.\n",393],["T_WHITESPACE","      ",394],["T_FOREACH","foreach",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","getBaseFieldDefinitions",394],"(",["T_VARIABLE","$entity_type_id",394],")",["T_WHITESPACE"," ",394],["T_AS","as",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$field_name",394],["T_WHITESPACE"," ",394],["T_DOUBLE_ARROW","=>",394],["T_WHITESPACE"," ",394],["T_VARIABLE","$definition",394],")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n        ",394],["T_IF","if",395],["T_WHITESPACE"," ",395],"(","!",["T_VARIABLE","$definition",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","isComputed",395],"(",")",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n          ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","fieldStorageDefinitions",396],"[",["T_VARIABLE","$entity_type_id",396],"]","[",["T_VARIABLE","$field_name",396],"]",["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$definition",396],";",["T_WHITESPACE","\n        ",396],"}",["T_WHITESPACE","\n      ",397],"}",["T_WHITESPACE","\n      ",398],["T_COMMENT","\/\/ Not prepared, try to load from cache.\n",399],["T_WHITESPACE","      ",400],["T_VARIABLE","$cid",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'entity_field_storage_definitions:'",400],["T_WHITESPACE"," ",400],".",["T_WHITESPACE"," ",400],["T_VARIABLE","$entity_type_id",400],["T_WHITESPACE"," ",400],".",["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","':'",400],["T_WHITESPACE"," ",400],".",["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","languageManager",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","getCurrentLanguage",400],"(",")",["T_OBJECT_OPERATOR","->",400],["T_STRING","getId",400],"(",")",";",["T_WHITESPACE","\n      ",400],["T_IF","if",401],["T_WHITESPACE"," ",401],"(",["T_VARIABLE","$cache",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","cacheGet",401],"(",["T_VARIABLE","$cid",401],")",")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$field_storage_definitions",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$cache",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","data",402],";",["T_WHITESPACE","\n      ",402],"}",["T_WHITESPACE","\n      ",403],["T_ELSE","else",404],["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n        ",404],["T_COMMENT","\/\/ Rebuild the definitions and put it into the cache.\n",405],["T_WHITESPACE","        ",406],["T_VARIABLE","$field_storage_definitions",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","buildFieldStorageDefinitions",406],"(",["T_VARIABLE","$entity_type_id",406],")",";",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","cacheSet",407],"(",["T_VARIABLE","$cid",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$field_storage_definitions",407],",",["T_WHITESPACE"," ",407],["T_STRING","Cache",407],["T_DOUBLE_COLON","::",407],["T_STRING","PERMANENT",407],",",["T_WHITESPACE"," ",407],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",407],",",["T_WHITESPACE"," ",407],["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",407],"]",")",";",["T_WHITESPACE","\n      ",407],"}",["T_WHITESPACE","\n      ",408],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","fieldStorageDefinitions",409],"[",["T_VARIABLE","$entity_type_id",409],"]",["T_WHITESPACE"," ",409],["T_PLUS_EQUAL","+=",409],["T_WHITESPACE"," ",409],["T_VARIABLE","$field_storage_definitions",409],";",["T_WHITESPACE","\n    ",409],"}",["T_WHITESPACE","\n    ",410],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","fieldStorageDefinitions",411],"[",["T_VARIABLE","$entity_type_id",411],"]",";",["T_WHITESPACE","\n  ",411],"}",["T_WHITESPACE","\n\n  ",412],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",414],["T_WHITESPACE","\n  ",416],["T_PUBLIC","public",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","setFieldMap",417],"(",["T_ARRAY","array",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$field_map",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","fieldMap",418],["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$field_map",418],";",["T_WHITESPACE","\n    ",418],["T_RETURN","return",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],";",["T_WHITESPACE","\n  ",419],"}",["T_WHITESPACE","\n\n  ",420],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",422],["T_WHITESPACE","\n  ",424],["T_PUBLIC","public",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","getFieldMap",425],"(",")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n    ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","fieldMap",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n      ",426],["T_COMMENT","\/\/ Not prepared, try to load from cache.\n",427],["T_WHITESPACE","      ",428],["T_VARIABLE","$cid",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'entity_field_map'",428],";",["T_WHITESPACE","\n      ",428],["T_IF","if",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$cache",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","cacheGet",429],"(",["T_VARIABLE","$cid",429],")",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n        ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","fieldMap",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$cache",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","data",430],";",["T_WHITESPACE","\n      ",430],"}",["T_WHITESPACE","\n      ",431],["T_ELSE","else",432],["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n        ",432],["T_COMMENT","\/\/ The field map is built in two steps. First, add all base fields, by\n",433],["T_WHITESPACE","        ",434],["T_COMMENT","\/\/ looping over all fieldable entity types. They always exist for all\n",434],["T_WHITESPACE","        ",435],["T_COMMENT","\/\/ bundles, and we do not expect to have so many different entity\n",435],["T_WHITESPACE","        ",436],["T_COMMENT","\/\/ types for this to become a bottleneck.\n",436],["T_WHITESPACE","        ",437],["T_FOREACH","foreach",437],["T_WHITESPACE"," ",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","entityTypeManager",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","getDefinitions",437],"(",")",["T_WHITESPACE"," ",437],["T_AS","as",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$entity_type_id",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$entity_type",437],")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n          ",437],["T_IF","if",438],["T_WHITESPACE"," ",438],"(",["T_VARIABLE","$entity_type",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","isSubclassOf",438],"(",["T_STRING","FieldableEntityInterface",438],["T_DOUBLE_COLON","::",438],["T_CLASS","class",438],")",")",["T_WHITESPACE"," ",438],"{",["T_WHITESPACE","\n            ",438],["T_VARIABLE","$bundles",439],["T_WHITESPACE"," ",439],"=",["T_WHITESPACE"," ",439],["T_STRING","array_keys",439],"(",["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","entityTypeBundleInfo",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","getBundleInfo",439],"(",["T_VARIABLE","$entity_type_id",439],")",")",";",["T_WHITESPACE","\n            ",439],["T_FOREACH","foreach",440],["T_WHITESPACE"," ",440],"(",["T_VARIABLE","$this",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","getBaseFieldDefinitions",440],"(",["T_VARIABLE","$entity_type_id",440],")",["T_WHITESPACE"," ",440],["T_AS","as",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$field_name",440],["T_WHITESPACE"," ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],["T_VARIABLE","$base_field_definition",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n              ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","fieldMap",441],"[",["T_VARIABLE","$entity_type_id",441],"]","[",["T_VARIABLE","$field_name",441],"]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],"[",["T_WHITESPACE","\n                ",441],["T_CONSTANT_ENCAPSED_STRING","'type'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$base_field_definition",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getType",442],"(",")",",",["T_WHITESPACE","\n                ",442],["T_CONSTANT_ENCAPSED_STRING","'bundles'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_STRING","array_combine",443],"(",["T_VARIABLE","$bundles",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$bundles",443],")",",",["T_WHITESPACE","\n              ",443],"]",";",["T_WHITESPACE","\n            ",444],"}",["T_WHITESPACE","\n          ",445],"}",["T_WHITESPACE","\n        ",446],"}",["T_WHITESPACE","\n\n        ",447],["T_COMMENT","\/\/ In the second step, the per-bundle fields are added, based on the\n",449],["T_WHITESPACE","        ",450],["T_COMMENT","\/\/ persistent bundle field map stored in a key value collection. This\n",450],["T_WHITESPACE","        ",451],["T_COMMENT","\/\/ data is managed in the EntityManager::onFieldDefinitionCreate()\n",451],["T_WHITESPACE","        ",452],["T_COMMENT","\/\/ and EntityManager::onFieldDefinitionDelete() methods. Rebuilding this\n",452],["T_WHITESPACE","        ",453],["T_COMMENT","\/\/ information in the same way as base fields would not scale, as the\n",453],["T_WHITESPACE","        ",454],["T_COMMENT","\/\/ time to query would grow exponentially with more fields and bundles.\n",454],["T_WHITESPACE","        ",455],["T_COMMENT","\/\/ A cache would be deleted during cache clears, which is the only time\n",455],["T_WHITESPACE","        ",456],["T_COMMENT","\/\/ it is needed, so a key value collection is used.\n",456],["T_WHITESPACE","        ",457],["T_VARIABLE","$bundle_field_maps",457],["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","keyValueFactory",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","get",457],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.bundle_field_map'",457],")",["T_OBJECT_OPERATOR","->",457],["T_STRING","getAll",457],"(",")",";",["T_WHITESPACE","\n        ",457],["T_FOREACH","foreach",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$bundle_field_maps",458],["T_WHITESPACE"," ",458],["T_AS","as",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$entity_type_id",458],["T_WHITESPACE"," ",458],["T_DOUBLE_ARROW","=>",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$bundle_field_map",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n          ",458],["T_FOREACH","foreach",459],["T_WHITESPACE"," ",459],"(",["T_VARIABLE","$bundle_field_map",459],["T_WHITESPACE"," ",459],["T_AS","as",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$field_name",459],["T_WHITESPACE"," ",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$map_entry",459],")",["T_WHITESPACE"," ",459],"{",["T_WHITESPACE","\n            ",459],["T_IF","if",460],["T_WHITESPACE"," ",460],"(","!",["T_ISSET","isset",460],"(",["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","fieldMap",460],"[",["T_VARIABLE","$entity_type_id",460],"]","[",["T_VARIABLE","$field_name",460],"]",")",")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n              ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","fieldMap",461],"[",["T_VARIABLE","$entity_type_id",461],"]","[",["T_VARIABLE","$field_name",461],"]",["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$map_entry",461],";",["T_WHITESPACE","\n            ",461],"}",["T_WHITESPACE","\n            ",462],["T_ELSE","else",463],["T_WHITESPACE"," ",463],"{",["T_WHITESPACE","\n              ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","fieldMap",464],"[",["T_VARIABLE","$entity_type_id",464],"]","[",["T_VARIABLE","$field_name",464],"]","[",["T_CONSTANT_ENCAPSED_STRING","'bundles'",464],"]",["T_WHITESPACE"," ",464],["T_PLUS_EQUAL","+=",464],["T_WHITESPACE"," ",464],["T_VARIABLE","$map_entry",464],"[",["T_CONSTANT_ENCAPSED_STRING","'bundles'",464],"]",";",["T_WHITESPACE","\n            ",464],"}",["T_WHITESPACE","\n          ",465],"}",["T_WHITESPACE","\n        ",466],"}",["T_WHITESPACE","\n\n        ",467],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","cacheSet",469],"(",["T_VARIABLE","$cid",469],",",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","fieldMap",469],",",["T_WHITESPACE"," ",469],["T_STRING","Cache",469],["T_DOUBLE_COLON","::",469],["T_STRING","PERMANENT",469],",",["T_WHITESPACE"," ",469],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_types'",469],"]",")",";",["T_WHITESPACE","\n      ",469],"}",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n    ",471],["T_RETURN","return",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","fieldMap",472],";",["T_WHITESPACE","\n  ",472],"}",["T_WHITESPACE","\n\n  ",473],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",475],["T_WHITESPACE","\n  ",477],["T_PUBLIC","public",478],["T_WHITESPACE"," ",478],["T_FUNCTION","function",478],["T_WHITESPACE"," ",478],["T_STRING","getFieldMapByFieldType",478],"(",["T_VARIABLE","$field_type",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n    ",478],["T_IF","if",479],["T_WHITESPACE"," ",479],"(","!",["T_ISSET","isset",479],"(",["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","fieldMapByFieldType",479],"[",["T_VARIABLE","$field_type",479],"]",")",")",["T_WHITESPACE"," ",479],"{",["T_WHITESPACE","\n      ",479],["T_VARIABLE","$filtered_map",480],["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],"[","]",";",["T_WHITESPACE","\n      ",480],["T_VARIABLE","$map",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","getFieldMap",481],"(",")",";",["T_WHITESPACE","\n      ",481],["T_FOREACH","foreach",482],["T_WHITESPACE"," ",482],"(",["T_VARIABLE","$map",482],["T_WHITESPACE"," ",482],["T_AS","as",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$entity_type",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$fields",482],")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n        ",482],["T_FOREACH","foreach",483],["T_WHITESPACE"," ",483],"(",["T_VARIABLE","$fields",483],["T_WHITESPACE"," ",483],["T_AS","as",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$field_name",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$field_info",483],")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n          ",483],["T_IF","if",484],["T_WHITESPACE"," ",484],"(",["T_VARIABLE","$field_info",484],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",484],"]",["T_WHITESPACE"," ",484],["T_IS_EQUAL","==",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$field_type",484],")",["T_WHITESPACE"," ",484],"{",["T_WHITESPACE","\n            ",484],["T_VARIABLE","$filtered_map",485],"[",["T_VARIABLE","$entity_type",485],"]","[",["T_VARIABLE","$field_name",485],"]",["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$field_info",485],";",["T_WHITESPACE","\n          ",485],"}",["T_WHITESPACE","\n        ",486],"}",["T_WHITESPACE","\n      ",487],"}",["T_WHITESPACE","\n      ",488],["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","fieldMapByFieldType",489],"[",["T_VARIABLE","$field_type",489],"]",["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_VARIABLE","$filtered_map",489],";",["T_WHITESPACE","\n    ",489],"}",["T_WHITESPACE","\n    ",490],["T_RETURN","return",491],["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","fieldMapByFieldType",491],"[",["T_VARIABLE","$field_type",491],"]",";",["T_WHITESPACE","\n  ",491],"}",["T_WHITESPACE","\n\n  ",492],["T_DOC_COMMENT","\/**\n   * Builds field storage definitions for an entity type.\n   *\n   * @param string $entity_type_id\n   *   The entity type ID. Only entity types that implement\n   *   \\Drupal\\Core\\Entity\\FieldableEntityInterface are supported\n   *\n   * @return \\Drupal\\Core\\Field\\FieldStorageDefinitionInterface[]\n   *   An array of field storage definitions, keyed by field name.\n   *\/",494],["T_WHITESPACE","\n  ",503],["T_PROTECTED","protected",504],["T_WHITESPACE"," ",504],["T_FUNCTION","function",504],["T_WHITESPACE"," ",504],["T_STRING","buildFieldStorageDefinitions",504],"(",["T_VARIABLE","$entity_type_id",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$entity_type",505],["T_WHITESPACE"," ",505],"=",["T_WHITESPACE"," ",505],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","entityTypeManager",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getDefinition",505],"(",["T_VARIABLE","$entity_type_id",505],")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$field_definitions",506],["T_WHITESPACE"," ",506],"=",["T_WHITESPACE"," ",506],"[","]",";",["T_WHITESPACE","\n\n    ",506],["T_COMMENT","\/\/ Retrieve base field definitions from modules.\n",508],["T_WHITESPACE","    ",509],["T_FOREACH","foreach",509],["T_WHITESPACE"," ",509],"(",["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","moduleHandler",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getImplementations",509],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_field_storage_info'",509],")",["T_WHITESPACE"," ",509],["T_AS","as",509],["T_WHITESPACE"," ",509],["T_VARIABLE","$module",509],")",["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n      ",509],["T_VARIABLE","$module_definitions",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","moduleHandler",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","invoke",510],"(",["T_VARIABLE","$module",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'entity_field_storage_info'",510],",",["T_WHITESPACE"," ",510],"[",["T_VARIABLE","$entity_type",510],"]",")",";",["T_WHITESPACE","\n      ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(","!",["T_EMPTY","empty",511],"(",["T_VARIABLE","$module_definitions",511],")",")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n        ",511],["T_COMMENT","\/\/ Ensure the provider key actually matches the name of the provider\n",512],["T_WHITESPACE","        ",513],["T_COMMENT","\/\/ defining the field.\n",513],["T_WHITESPACE","        ",514],["T_FOREACH","foreach",514],["T_WHITESPACE"," ",514],"(",["T_VARIABLE","$module_definitions",514],["T_WHITESPACE"," ",514],["T_AS","as",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$field_name",514],["T_WHITESPACE"," ",514],["T_DOUBLE_ARROW","=>",514],["T_WHITESPACE"," ",514],["T_VARIABLE","$definition",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n          ",514],["T_COMMENT","\/\/ @todo Remove this check once FieldDefinitionInterface exposes a\n",515],["T_WHITESPACE","          ",516],["T_COMMENT","\/\/  proper provider setter. See https:\/\/www.drupal.org\/node\/2225961.\n",516],["T_WHITESPACE","          ",517],["T_IF","if",517],["T_WHITESPACE"," ",517],"(",["T_VARIABLE","$definition",517],["T_WHITESPACE"," ",517],["T_INSTANCEOF","instanceof",517],["T_WHITESPACE"," ",517],["T_STRING","BaseFieldDefinition",517],")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n            ",517],["T_VARIABLE","$definition",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","setProvider",518],"(",["T_VARIABLE","$module",518],")",";",["T_WHITESPACE","\n          ",518],"}",["T_WHITESPACE","\n          ",519],["T_VARIABLE","$field_definitions",520],"[",["T_VARIABLE","$field_name",520],"]",["T_WHITESPACE"," ",520],"=",["T_WHITESPACE"," ",520],["T_VARIABLE","$definition",520],";",["T_WHITESPACE","\n        ",520],"}",["T_WHITESPACE","\n      ",521],"}",["T_WHITESPACE","\n    ",522],"}",["T_WHITESPACE","\n\n    ",523],["T_COMMENT","\/\/ Invoke alter hook.\n",525],["T_WHITESPACE","    ",526],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","moduleHandler",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","alter",526],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_field_storage_info'",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$field_definitions",526],",",["T_WHITESPACE"," ",526],["T_VARIABLE","$entity_type",526],")",";",["T_WHITESPACE","\n\n    ",526],["T_RETURN","return",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$field_definitions",528],";",["T_WHITESPACE","\n  ",528],"}",["T_WHITESPACE","\n\n  ",529],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",531],["T_WHITESPACE","\n  ",533],["T_PUBLIC","public",534],["T_WHITESPACE"," ",534],["T_FUNCTION","function",534],["T_WHITESPACE"," ",534],["T_STRING","clearCachedFieldDefinitions",534],"(",")",["T_WHITESPACE"," ",534],"{",["T_WHITESPACE","\n    ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","baseFieldDefinitions",535],["T_WHITESPACE"," ",535],"=",["T_WHITESPACE"," ",535],"[","]",";",["T_WHITESPACE","\n    ",535],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","fieldDefinitions",536],["T_WHITESPACE"," ",536],"=",["T_WHITESPACE"," ",536],"[","]",";",["T_WHITESPACE","\n    ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","fieldStorageDefinitions",537],["T_WHITESPACE"," ",537],"=",["T_WHITESPACE"," ",537],"[","]",";",["T_WHITESPACE","\n    ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","fieldMap",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],"[","]",";",["T_WHITESPACE","\n    ",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","fieldMapByFieldType",539],["T_WHITESPACE"," ",539],"=",["T_WHITESPACE"," ",539],"[","]",";",["T_WHITESPACE","\n    ",539],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","entityDisplayRepository",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","clearDisplayModeInfo",540],"(",")",";",["T_WHITESPACE","\n    ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","extraFields",541],["T_WHITESPACE"," ",541],"=",["T_WHITESPACE"," ",541],"[","]",";",["T_WHITESPACE","\n    ",541],["T_STRING","Cache",542],["T_DOUBLE_COLON","::",542],["T_STRING","invalidateTags",542],"(","[",["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",542],"]",")",";",["T_WHITESPACE","\n    ",542],["T_COMMENT","\/\/ The typed data manager statically caches prototype objects with injected\n",543],["T_WHITESPACE","    ",544],["T_COMMENT","\/\/ definitions, clear those as well.\n",544],["T_WHITESPACE","    ",545],["T_VARIABLE","$this",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","typedDataManager",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","clearCachedDefinitions",545],"(",")",";",["T_WHITESPACE","\n  ",545],"}",["T_WHITESPACE","\n\n  ",546],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",548],["T_WHITESPACE","\n  ",550],["T_PUBLIC","public",551],["T_WHITESPACE"," ",551],["T_FUNCTION","function",551],["T_WHITESPACE"," ",551],["T_STRING","useCaches",551],"(",["T_VARIABLE","$use_caches",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_STRING","FALSE",551],")",["T_WHITESPACE"," ",551],"{",["T_WHITESPACE","\n    ",551],["T_VARIABLE","$this",552],["T_OBJECT_OPERATOR","->",552],["T_STRING","useCaches",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_VARIABLE","$use_caches",552],";",["T_WHITESPACE","\n    ",552],["T_IF","if",553],["T_WHITESPACE"," ",553],"(","!",["T_VARIABLE","$use_caches",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n      ",553],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","fieldDefinitions",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],"[","]",";",["T_WHITESPACE","\n      ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","baseFieldDefinitions",555],["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],"[","]",";",["T_WHITESPACE","\n      ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","fieldStorageDefinitions",556],["T_WHITESPACE"," ",556],"=",["T_WHITESPACE"," ",556],"[","]",";",["T_WHITESPACE","\n    ",556],"}",["T_WHITESPACE","\n  ",557],"}",["T_WHITESPACE","\n\n  ",558],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",560],["T_WHITESPACE","\n  ",562],["T_PUBLIC","public",563],["T_WHITESPACE"," ",563],["T_FUNCTION","function",563],["T_WHITESPACE"," ",563],["T_STRING","getExtraFields",563],"(",["T_VARIABLE","$entity_type_id",563],",",["T_WHITESPACE"," ",563],["T_VARIABLE","$bundle",563],")",["T_WHITESPACE"," ",563],"{",["T_WHITESPACE","\n    ",563],["T_COMMENT","\/\/ Read from the \"static\" cache.\n",564],["T_WHITESPACE","    ",565],["T_IF","if",565],["T_WHITESPACE"," ",565],"(",["T_ISSET","isset",565],"(",["T_VARIABLE","$this",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","extraFields",565],"[",["T_VARIABLE","$entity_type_id",565],"]","[",["T_VARIABLE","$bundle",565],"]",")",")",["T_WHITESPACE"," ",565],"{",["T_WHITESPACE","\n      ",565],["T_RETURN","return",566],["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","extraFields",566],"[",["T_VARIABLE","$entity_type_id",566],"]","[",["T_VARIABLE","$bundle",566],"]",";",["T_WHITESPACE","\n    ",566],"}",["T_WHITESPACE","\n\n    ",567],["T_COMMENT","\/\/ Read from the persistent cache. Since hook_entity_extra_field_info() and\n",569],["T_WHITESPACE","    ",570],["T_COMMENT","\/\/ hook_entity_extra_field_info_alter() might contain t() calls, we cache\n",570],["T_WHITESPACE","    ",571],["T_COMMENT","\/\/ per language.\n",571],["T_WHITESPACE","    ",572],["T_VARIABLE","$cache_id",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'entity_bundle_extra_fields:'",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_VARIABLE","$entity_type_id",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","':'",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_VARIABLE","$bundle",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","':'",572],["T_WHITESPACE"," ",572],".",["T_WHITESPACE"," ",572],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","languageManager",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","getCurrentLanguage",572],"(",")",["T_OBJECT_OPERATOR","->",572],["T_STRING","getId",572],"(",")",";",["T_WHITESPACE","\n    ",572],["T_VARIABLE","$cached",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","cacheGet",573],"(",["T_VARIABLE","$cache_id",573],")",";",["T_WHITESPACE","\n    ",573],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_VARIABLE","$cached",574],")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n      ",574],["T_VARIABLE","$this",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","extraFields",575],"[",["T_VARIABLE","$entity_type_id",575],"]","[",["T_VARIABLE","$bundle",575],"]",["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$cached",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","data",575],";",["T_WHITESPACE","\n      ",575],["T_RETURN","return",576],["T_WHITESPACE"," ",576],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","extraFields",576],"[",["T_VARIABLE","$entity_type_id",576],"]","[",["T_VARIABLE","$bundle",576],"]",";",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_VARIABLE","$extra",579],["T_WHITESPACE"," ",579],"=",["T_WHITESPACE"," ",579],["T_VARIABLE","$this",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","moduleHandler",579],["T_OBJECT_OPERATOR","->",579],["T_STRING","invokeAll",579],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_extra_field_info'",579],")",";",["T_WHITESPACE","\n    ",579],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","moduleHandler",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","alter",580],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_extra_field_info'",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$extra",580],")",";",["T_WHITESPACE","\n    ",580],["T_VARIABLE","$info",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_ISSET","isset",581],"(",["T_VARIABLE","$extra",581],"[",["T_VARIABLE","$entity_type_id",581],"]","[",["T_VARIABLE","$bundle",581],"]",")",["T_WHITESPACE"," ",581],"?",["T_WHITESPACE"," ",581],["T_VARIABLE","$extra",581],"[",["T_VARIABLE","$entity_type_id",581],"]","[",["T_VARIABLE","$bundle",581],"]",["T_WHITESPACE"," ",581],":",["T_WHITESPACE"," ",581],"[","]",";",["T_WHITESPACE","\n    ",581],["T_VARIABLE","$info",582],["T_WHITESPACE"," ",582],["T_PLUS_EQUAL","+=",582],["T_WHITESPACE"," ",582],"[",["T_WHITESPACE","\n      ",582],["T_CONSTANT_ENCAPSED_STRING","'form'",583],["T_WHITESPACE"," ",583],["T_DOUBLE_ARROW","=>",583],["T_WHITESPACE"," ",583],"[","]",",",["T_WHITESPACE","\n      ",583],["T_CONSTANT_ENCAPSED_STRING","'display'",584],["T_WHITESPACE"," ",584],["T_DOUBLE_ARROW","=>",584],["T_WHITESPACE"," ",584],"[","]",",",["T_WHITESPACE","\n    ",584],"]",";",["T_WHITESPACE","\n\n    ",585],["T_COMMENT","\/\/ Store in the 'static' and persistent caches.\n",587],["T_WHITESPACE","    ",588],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","extraFields",588],"[",["T_VARIABLE","$entity_type_id",588],"]","[",["T_VARIABLE","$bundle",588],"]",["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$info",588],";",["T_WHITESPACE","\n    ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","cacheSet",589],"(",["T_VARIABLE","$cache_id",589],",",["T_WHITESPACE"," ",589],["T_VARIABLE","$info",589],",",["T_WHITESPACE"," ",589],["T_STRING","Cache",589],["T_DOUBLE_COLON","::",589],["T_STRING","PERMANENT",589],",",["T_WHITESPACE"," ",589],"[",["T_WHITESPACE","\n      ",589],["T_CONSTANT_ENCAPSED_STRING","'entity_field_info'",590],",",["T_WHITESPACE","\n    ",590],"]",")",";",["T_WHITESPACE","\n\n    ",591],["T_RETURN","return",593],["T_WHITESPACE"," ",593],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","extraFields",593],"[",["T_VARIABLE","$entity_type_id",593],"]","[",["T_VARIABLE","$bundle",593],"]",";",["T_WHITESPACE","\n  ",593],"}",["T_WHITESPACE","\n\n",594],"}",["T_WHITESPACE","\n",596]]
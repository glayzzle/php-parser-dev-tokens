[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityReferenceSelection",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Query",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AlterableInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Query",7],["T_NS_SEPARATOR","\\",7],["T_STRING","SelectInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityManagerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityReferenceSelection",9],["T_NS_SEPARATOR","\\",9],["T_STRING","SelectionWithAutocreateInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Extension",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ModuleHandlerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Plugin",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldType",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityReferenceItem",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Form",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FormStateInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Entity",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EntityReferenceSelection",13],["T_NS_SEPARATOR","\\",13],["T_STRING","SelectionInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Plugin",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerFactoryPluginInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Core",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Plugin",15],["T_NS_SEPARATOR","\\",15],["T_STRING","PluginBase",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Core",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Session",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AccountInterface",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Drupal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","user",17],["T_NS_SEPARATOR","\\",17],["T_STRING","EntityOwnerInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DependencyInjection",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ContainerInterface",18],";",["T_WHITESPACE","\n\n",18],["T_DOC_COMMENT","\/**\n * Default plugin implementation of the Entity Reference Selection plugin.\n *\n * Also serves as a base class for specific types of Entity Reference\n * Selection plugins.\n *\n * @see \\Drupal\\Core\\Entity\\EntityReferenceSelection\\SelectionPluginManager\n * @see \\Drupal\\Core\\Entity\\Annotation\\EntityReferenceSelection\n * @see \\Drupal\\Core\\Entity\\EntityReferenceSelection\\SelectionInterface\n * @see \\Drupal\\Core\\Entity\\Plugin\\Derivative\\DefaultSelectionDeriver\n * @see plugin_api\n *\n * @EntityReferenceSelection(\n *   id = \"default\",\n *   label = @Translation(\"Default\"),\n *   group = \"default\",\n *   weight = 0,\n *   deriver = \"Drupal\\Core\\Entity\\Plugin\\Derivative\\DefaultSelectionDeriver\"\n * )\n *\/",20],["T_WHITESPACE","\n",39],["T_CLASS","class",40],["T_WHITESPACE"," ",40],["T_STRING","DefaultSelection",40],["T_WHITESPACE"," ",40],["T_EXTENDS","extends",40],["T_WHITESPACE"," ",40],["T_STRING","PluginBase",40],["T_WHITESPACE"," ",40],["T_IMPLEMENTS","implements",40],["T_WHITESPACE"," ",40],["T_STRING","SelectionInterface",40],",",["T_WHITESPACE"," ",40],["T_STRING","SelectionWithAutocreateInterface",40],",",["T_WHITESPACE"," ",40],["T_STRING","ContainerFactoryPluginInterface",40],["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$entityManager",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * The module handler service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$moduleHandler",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * The current user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$currentUser",61],";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Constructs a new SelectionBase object.\n   *\n   * @param array $configuration\n   *   A configuration array containing information about the plugin instance.\n   * @param string $plugin_id\n   *   The plugin_id for the plugin instance.\n   * @param mixed $plugin_definition\n   *   The plugin implementation definition.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler service.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $current_user\n   *   The current user.\n   *\/",63],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","__construct",79],"(",["T_ARRAY","array",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$configuration",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$plugin_id",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$plugin_definition",79],",",["T_WHITESPACE"," ",79],["T_STRING","EntityManagerInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$entity_manager",79],",",["T_WHITESPACE"," ",79],["T_STRING","ModuleHandlerInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$module_handler",79],",",["T_WHITESPACE"," ",79],["T_STRING","AccountInterface",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$current_user",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_STRING","parent",80],["T_DOUBLE_COLON","::",80],["T_STRING","__construct",80],"(",["T_VARIABLE","$configuration",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$plugin_id",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$plugin_definition",80],")",";",["T_WHITESPACE","\n\n    ",80],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","entityManager",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$entity_manager",82],";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","moduleHandler",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$module_handler",83],";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","currentUser",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$current_user",84],";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_PUBLIC","public",90],["T_WHITESPACE"," ",90],["T_STATIC","static",90],["T_WHITESPACE"," ",90],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","create",90],"(",["T_STRING","ContainerInterface",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$container",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$configuration",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$plugin_id",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$plugin_definition",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_RETURN","return",91],["T_WHITESPACE"," ",91],["T_NEW","new",91],["T_WHITESPACE"," ",91],["T_STATIC","static",91],"(",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$configuration",92],",",["T_WHITESPACE","\n      ",92],["T_VARIABLE","$plugin_id",93],",",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$plugin_definition",94],",",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$container",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","get",95],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",95],")",",",["T_WHITESPACE","\n      ",95],["T_VARIABLE","$container",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","get",96],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",96],")",",",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$container",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",97],")",["T_WHITESPACE","\n    ",97],")",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",101],["T_WHITESPACE","\n  ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","buildConfigurationForm",104],"(",["T_ARRAY","array",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$form",104],",",["T_WHITESPACE"," ",104],["T_STRING","FormStateInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$form_state",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$entity_type_id",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","configuration",105],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",105],"]",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$selection_handler_settings",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","configuration",106],"[",["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",106],"]",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$entity_type",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","entityManager",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","getDefinition",107],"(",["T_VARIABLE","$entity_type_id",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$bundles",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","entityManager",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getBundleInfo",108],"(",["T_VARIABLE","$entity_type_id",108],")",";",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ Merge-in default values.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$selection_handler_settings",111],["T_WHITESPACE"," ",111],["T_PLUS_EQUAL","+=",111],["T_WHITESPACE"," ",111],["T_ARRAY","array",111],"(",["T_WHITESPACE","\n      ",111],["T_COMMENT","\/\/ For the 'target_bundles' setting, a NULL value is equivalent to \"allow\n",112],["T_WHITESPACE","      ",113],["T_COMMENT","\/\/ entities from any bundle to be referenced\" and an empty array value is\n",113],["T_WHITESPACE","      ",114],["T_COMMENT","\/\/ equivalent to \"no entities from any bundle can be referenced\".\n",114],["T_WHITESPACE","      ",115],["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_STRING","NULL",115],",",["T_WHITESPACE","\n      ",115],["T_CONSTANT_ENCAPSED_STRING","'sort'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_WHITESPACE","\n        ",116],["T_CONSTANT_ENCAPSED_STRING","'field'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'_none'",117],",",["T_WHITESPACE","\n      ",117],")",",",["T_WHITESPACE","\n      ",118],["T_CONSTANT_ENCAPSED_STRING","'auto_create'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","FALSE",119],",",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'auto_create_bundle'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_STRING","NULL",120],",",["T_WHITESPACE","\n    ",120],")",";",["T_WHITESPACE","\n\n    ",121],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$entity_type",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","hasKey",123],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",123],")",")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_VARIABLE","$bundle_options",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n      ",124],["T_FOREACH","foreach",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$bundles",125],["T_WHITESPACE"," ",125],["T_AS","as",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$bundle_name",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$bundle_info",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$bundle_options",126],"[",["T_VARIABLE","$bundle_name",126],"]",["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$bundle_info",126],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",126],"]",";",["T_WHITESPACE","\n      ",126],"}",["T_WHITESPACE","\n      ",127],["T_STRING","natsort",128],"(",["T_VARIABLE","$bundle_options",128],")",";",["T_WHITESPACE","\n\n      ",128],["T_VARIABLE","$form",130],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_WHITESPACE","\n        ",130],["T_CONSTANT_ENCAPSED_STRING","'#type'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'checkboxes'",131],",",["T_WHITESPACE","\n        ",131],["T_CONSTANT_ENCAPSED_STRING","'#title'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","t",132],"(",["T_CONSTANT_ENCAPSED_STRING","'Bundles'",132],")",",",["T_WHITESPACE","\n        ",132],["T_CONSTANT_ENCAPSED_STRING","'#options'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$bundle_options",133],",",["T_WHITESPACE","\n        ",133],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_ARRAY_CAST","(array)",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$selection_handler_settings",134],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",134],"]",",",["T_WHITESPACE","\n        ",134],["T_CONSTANT_ENCAPSED_STRING","'#required'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","TRUE",135],",",["T_WHITESPACE","\n        ",135],["T_CONSTANT_ENCAPSED_STRING","'#size'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_LNUMBER","6",136],",",["T_WHITESPACE","\n        ",136],["T_CONSTANT_ENCAPSED_STRING","'#multiple'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_STRING","TRUE",137],",",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'#element_validate'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],"[","[",["T_STRING","get_class",138],"(",["T_VARIABLE","$this",138],")",",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'elementValidateFilter'",138],"]","]",",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'#ajax'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_STRING","TRUE",139],",",["T_WHITESPACE","\n        ",139],["T_CONSTANT_ENCAPSED_STRING","'#limit_validation_errors'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],"[","]",",",["T_WHITESPACE","\n      ",140],")",";",["T_WHITESPACE","\n\n      ",141],["T_VARIABLE","$form",143],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles_update'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],"[",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'#type'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'submit'",144],",",["T_WHITESPACE","\n        ",144],["T_CONSTANT_ENCAPSED_STRING","'#value'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","t",145],"(",["T_CONSTANT_ENCAPSED_STRING","'Update form'",145],")",",",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'#limit_validation_errors'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],"[","]",",",["T_WHITESPACE","\n        ",146],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",147],["T_WHITESPACE"," ",147],["T_DOUBLE_ARROW","=>",147],["T_WHITESPACE"," ",147],"[",["T_WHITESPACE","\n          ",147],["T_CONSTANT_ENCAPSED_STRING","'class'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_CONSTANT_ENCAPSED_STRING","'js-hide'",148],"]",",",["T_WHITESPACE","\n        ",148],"]",",",["T_WHITESPACE","\n        ",149],["T_CONSTANT_ENCAPSED_STRING","'#submit'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],"[","[",["T_STRING","EntityReferenceItem",150],["T_DOUBLE_COLON","::",150],["T_CLASS","class",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'settingsAjaxSubmit'",150],"]","]",",",["T_WHITESPACE","\n      ",150],"]",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n    ",152],["T_ELSE","else",153],["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$form",154],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_WHITESPACE","\n        ",154],["T_CONSTANT_ENCAPSED_STRING","'#type'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","'value'",155],",",["T_WHITESPACE","\n        ",155],["T_CONSTANT_ENCAPSED_STRING","'#value'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",")",",",["T_WHITESPACE","\n      ",156],")",";",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n\n    ",158],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_VARIABLE","$entity_type",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","isSubclassOf",160],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\FieldableEntityInterface'",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_VARIABLE","$fields",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",")",";",["T_WHITESPACE","\n      ",161],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_STRING","array_keys",162],"(",["T_VARIABLE","$bundles",162],")",["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$bundle",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$bundle_fields",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","array_filter",163],"(",["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","entityManager",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","getFieldDefinitions",163],"(",["T_VARIABLE","$entity_type_id",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$bundle",163],")",",",["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],"(",["T_VARIABLE","$field_definition",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n          ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],"!",["T_VARIABLE","$field_definition",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","isComputed",164],"(",")",";",["T_WHITESPACE","\n        ",164],"}",")",";",["T_WHITESPACE","\n        ",165],["T_FOREACH","foreach",166],["T_WHITESPACE"," ",166],"(",["T_VARIABLE","$bundle_fields",166],["T_WHITESPACE"," ",166],["T_AS","as",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$field_name",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$field_definition",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n          ",166],["T_COMMENT","\/* @var \\Drupal\\Core\\Field\\FieldDefinitionInterface $field_definition *\/",167],["T_WHITESPACE","\n          ",167],["T_VARIABLE","$columns",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$field_definition",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getFieldStorageDefinition",168],"(",")",["T_OBJECT_OPERATOR","->",168],["T_STRING","getColumns",168],"(",")",";",["T_WHITESPACE","\n          ",168],["T_COMMENT","\/\/ If there is more than one column, display them all, otherwise just\n",169],["T_WHITESPACE","          ",170],["T_COMMENT","\/\/ display the field label.\n",170],["T_WHITESPACE","          ",171],["T_COMMENT","\/\/ @todo: Use property labels instead of the column name.\n",171],["T_WHITESPACE","          ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_STRING","count",172],"(",["T_VARIABLE","$columns",172],")",["T_WHITESPACE"," ",172],">",["T_WHITESPACE"," ",172],["T_LNUMBER","1",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n            ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$columns",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$column_name",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$column_info",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n              ",173],["T_VARIABLE","$fields",174],"[",["T_VARIABLE","$field_name",174],["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'.'",174],["T_WHITESPACE"," ",174],".",["T_WHITESPACE"," ",174],["T_VARIABLE","$column_name",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","t",174],"(",["T_CONSTANT_ENCAPSED_STRING","'@label (@column)'",174],",",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$field_definition",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","getLabel",174],"(",")",",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'@column'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$column_name",174],")",")",";",["T_WHITESPACE","\n            ",174],"}",["T_WHITESPACE","\n          ",175],"}",["T_WHITESPACE","\n          ",176],["T_ELSE","else",177],["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n            ",177],["T_VARIABLE","$fields",178],"[",["T_VARIABLE","$field_name",178],"]",["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","t",178],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",178],",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$field_definition",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","getLabel",178],"(",")",")",")",";",["T_WHITESPACE","\n          ",178],"}",["T_WHITESPACE","\n        ",179],"}",["T_WHITESPACE","\n      ",180],"}",["T_WHITESPACE","\n\n      ",181],["T_VARIABLE","$form",183],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",183],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",183],"]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_WHITESPACE","\n        ",183],["T_CONSTANT_ENCAPSED_STRING","'#type'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'select'",184],",",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'#title'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","t",185],"(",["T_CONSTANT_ENCAPSED_STRING","'Sort by'",185],")",",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'#options'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_WHITESPACE","\n          ",186],["T_CONSTANT_ENCAPSED_STRING","'_none'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","t",187],"(",["T_CONSTANT_ENCAPSED_STRING","'- None -'",187],")",",",["T_WHITESPACE","\n        ",187],")",["T_WHITESPACE"," ",188],"+",["T_WHITESPACE"," ",188],["T_VARIABLE","$fields",188],",",["T_WHITESPACE","\n        ",188],["T_CONSTANT_ENCAPSED_STRING","'#ajax'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],["T_STRING","TRUE",189],",",["T_WHITESPACE","\n        ",189],["T_CONSTANT_ENCAPSED_STRING","'#limit_validation_errors'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_ARRAY","array",190],"(",")",",",["T_WHITESPACE","\n        ",190],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_VARIABLE","$selection_handler_settings",191],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",191],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",191],"]",",",["T_WHITESPACE","\n      ",191],")",";",["T_WHITESPACE","\n\n      ",192],["T_VARIABLE","$form",194],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",194],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",194],"]",["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n        ",194],["T_CONSTANT_ENCAPSED_STRING","'#type'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'container'",195],",",["T_WHITESPACE","\n        ",195],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",["T_CONSTANT_ENCAPSED_STRING","'class'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference-settings'",196],")",")",",",["T_WHITESPACE","\n        ",196],["T_CONSTANT_ENCAPSED_STRING","'#process'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],"[","[",["T_STRING","EntityReferenceItem",197],["T_DOUBLE_COLON","::",197],["T_CLASS","class",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'formProcessMergeParent'",197],"]","]",",",["T_WHITESPACE","\n      ",197],")",";",["T_WHITESPACE","\n\n      ",198],["T_IF","if",200],["T_WHITESPACE"," ",200],"(",["T_VARIABLE","$selection_handler_settings",200],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",200],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",200],"]",["T_WHITESPACE"," ",200],["T_IS_NOT_EQUAL","!=",200],["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'_none'",200],")",["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n        ",200],["T_COMMENT","\/\/ Merge-in default values.\n",201],["T_WHITESPACE","        ",202],["T_VARIABLE","$selection_handler_settings",202],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",202],"]",["T_WHITESPACE"," ",202],["T_PLUS_EQUAL","+=",202],["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_WHITESPACE","\n          ",202],["T_CONSTANT_ENCAPSED_STRING","'direction'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'ASC'",203],",",["T_WHITESPACE","\n        ",203],")",";",["T_WHITESPACE","\n\n        ",204],["T_VARIABLE","$form",206],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",206],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",206],"]","[",["T_CONSTANT_ENCAPSED_STRING","'direction'",206],"]",["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_WHITESPACE","\n          ",206],["T_CONSTANT_ENCAPSED_STRING","'#type'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'select'",207],",",["T_WHITESPACE","\n          ",207],["T_CONSTANT_ENCAPSED_STRING","'#title'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","t",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Sort direction'",208],")",",",["T_WHITESPACE","\n          ",208],["T_CONSTANT_ENCAPSED_STRING","'#required'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_STRING","TRUE",209],",",["T_WHITESPACE","\n          ",209],["T_CONSTANT_ENCAPSED_STRING","'#options'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_WHITESPACE","\n            ",210],["T_CONSTANT_ENCAPSED_STRING","'ASC'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","t",211],"(",["T_CONSTANT_ENCAPSED_STRING","'Ascending'",211],")",",",["T_WHITESPACE","\n            ",211],["T_CONSTANT_ENCAPSED_STRING","'DESC'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","t",212],"(",["T_CONSTANT_ENCAPSED_STRING","'Descending'",212],")",",",["T_WHITESPACE","\n          ",212],")",",",["T_WHITESPACE","\n          ",213],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$selection_handler_settings",214],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",214],"]","[",["T_CONSTANT_ENCAPSED_STRING","'direction'",214],"]",",",["T_WHITESPACE","\n        ",214],")",";",["T_WHITESPACE","\n      ",215],"}",["T_WHITESPACE","\n    ",216],"}",["T_WHITESPACE","\n\n    ",217],["T_VARIABLE","$form",219],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_create'",219],"]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",["T_WHITESPACE","\n      ",219],["T_CONSTANT_ENCAPSED_STRING","'#type'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",220],",",["T_WHITESPACE","\n      ",220],["T_CONSTANT_ENCAPSED_STRING","'#title'",221],["T_WHITESPACE"," ",221],["T_DOUBLE_ARROW","=>",221],["T_WHITESPACE"," ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","t",221],"(",["T_CONSTANT_ENCAPSED_STRING","\"Create referenced entities if they don't already exist\"",221],")",",",["T_WHITESPACE","\n      ",221],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",222],["T_WHITESPACE"," ",222],["T_DOUBLE_ARROW","=>",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$selection_handler_settings",222],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_create'",222],"]",",",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'#weight'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],"-",["T_LNUMBER","2",223],",",["T_WHITESPACE","\n    ",223],")",";",["T_WHITESPACE","\n\n    ",224],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$entity_type",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","hasKey",226],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",226],")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n      ",226],["T_VARIABLE","$bundles",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","array_intersect_key",227],"(",["T_VARIABLE","$bundle_options",227],",",["T_WHITESPACE"," ",227],["T_STRING","array_filter",227],"(",["T_ARRAY_CAST","(array)",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$selection_handler_settings",227],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",227],"]",")",")",";",["T_WHITESPACE","\n      ",227],["T_VARIABLE","$form",228],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_create_bundle'",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],"[",["T_WHITESPACE","\n        ",228],["T_CONSTANT_ENCAPSED_STRING","'#type'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'select'",229],",",["T_WHITESPACE","\n        ",229],["T_CONSTANT_ENCAPSED_STRING","'#title'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","t",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Store new items in'",230],")",",",["T_WHITESPACE","\n        ",230],["T_CONSTANT_ENCAPSED_STRING","'#options'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$bundles",231],",",["T_WHITESPACE","\n        ",231],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$selection_handler_settings",232],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_create_bundle'",232],"]",",",["T_WHITESPACE","\n        ",232],["T_CONSTANT_ENCAPSED_STRING","'#access'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_STRING","count",233],"(",["T_VARIABLE","$bundles",233],")",["T_WHITESPACE"," ",233],">",["T_WHITESPACE"," ",233],["T_LNUMBER","1",233],",",["T_WHITESPACE","\n        ",233],["T_CONSTANT_ENCAPSED_STRING","'#states'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"[",["T_WHITESPACE","\n          ",234],["T_CONSTANT_ENCAPSED_STRING","'visible'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],"[",["T_WHITESPACE","\n            ",235],["T_CONSTANT_ENCAPSED_STRING","':input[name=\"settings[handler_settings][auto_create]\"]'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_CONSTANT_ENCAPSED_STRING","'checked'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_STRING","TRUE",236],"]",",",["T_WHITESPACE","\n          ",236],"]",",",["T_WHITESPACE","\n        ",237],"]",",",["T_WHITESPACE","\n        ",238],["T_CONSTANT_ENCAPSED_STRING","'#weight'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],"-",["T_LNUMBER","1",239],",",["T_WHITESPACE","\n      ",239],"]",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$form",243],";",["T_WHITESPACE","\n  ",243],"}",["T_WHITESPACE","\n\n  ",244],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",246],["T_WHITESPACE","\n  ",248],["T_PUBLIC","public",249],["T_WHITESPACE"," ",249],["T_FUNCTION","function",249],["T_WHITESPACE"," ",249],["T_STRING","validateConfigurationForm",249],"(",["T_ARRAY","array",249],["T_WHITESPACE"," ",249],"&",["T_VARIABLE","$form",249],",",["T_WHITESPACE"," ",249],["T_STRING","FormStateInterface",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$form_state",249],")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n    ",249],["T_COMMENT","\/\/ If no checkboxes were checked for 'target_bundles', store NULL (\"all\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ bundles are referenceable\") rather than empty array (\"no bundle is\n",251],["T_WHITESPACE","    ",252],["T_COMMENT","\/\/ referenceable\" - typically happens when all referenceable bundles have\n",252],["T_WHITESPACE","    ",253],["T_COMMENT","\/\/ been deleted).\n",253],["T_WHITESPACE","    ",254],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$form_state",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getValue",254],"(","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",254],"]",")",["T_WHITESPACE"," ",254],["T_IS_IDENTICAL","===",254],["T_WHITESPACE"," ",254],"[","]",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n      ",254],["T_VARIABLE","$form_state",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","setValue",255],"(","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",255],"]",",",["T_WHITESPACE"," ",255],["T_STRING","NULL",255],")",";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Don't store the 'target_bundles_update' button value into the field\n",258],["T_WHITESPACE","    ",259],["T_COMMENT","\/\/ config settings.\n",259],["T_WHITESPACE","    ",260],["T_VARIABLE","$form_state",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","unsetValue",260],"(","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",260],",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'target_bundles_update'",260],"]",")",";",["T_WHITESPACE","\n  ",260],"}",["T_WHITESPACE","\n\n  ",261],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",263],["T_WHITESPACE","\n  ",265],["T_PUBLIC","public",266],["T_WHITESPACE"," ",266],["T_FUNCTION","function",266],["T_WHITESPACE"," ",266],["T_STRING","submitConfigurationForm",266],"(",["T_ARRAY","array",266],["T_WHITESPACE"," ",266],"&",["T_VARIABLE","$form",266],",",["T_WHITESPACE"," ",266],["T_STRING","FormStateInterface",266],["T_WHITESPACE"," ",266],["T_VARIABLE","$form_state",266],")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE"," ",266],"}",["T_WHITESPACE","\n\n  ",266],["T_DOC_COMMENT","\/**\n   * Form element validation handler; Filters the #value property of an element.\n   *\/",268],["T_WHITESPACE","\n  ",270],["T_PUBLIC","public",271],["T_WHITESPACE"," ",271],["T_STATIC","static",271],["T_WHITESPACE"," ",271],["T_FUNCTION","function",271],["T_WHITESPACE"," ",271],["T_STRING","elementValidateFilter",271],"(","&",["T_VARIABLE","$element",271],",",["T_WHITESPACE"," ",271],["T_STRING","FormStateInterface",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$form_state",271],")",["T_WHITESPACE"," ",271],"{",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$element",272],"[",["T_CONSTANT_ENCAPSED_STRING","'#value'",272],"]",["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_STRING","array_filter",272],"(",["T_VARIABLE","$element",272],"[",["T_CONSTANT_ENCAPSED_STRING","'#value'",272],"]",")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$form_state",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","setValueForElement",273],"(",["T_VARIABLE","$element",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$element",273],"[",["T_CONSTANT_ENCAPSED_STRING","'#value'",273],"]",")",";",["T_WHITESPACE","\n  ",273],"}",["T_WHITESPACE","\n\n  ",274],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",276],["T_WHITESPACE","\n  ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","getReferenceableEntities",279],"(",["T_VARIABLE","$match",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","NULL",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$match_operator",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",279],",",["T_WHITESPACE"," ",279],["T_VARIABLE","$limit",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_LNUMBER","0",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$target_type",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","configuration",280],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",280],"]",";",["T_WHITESPACE","\n\n    ",280],["T_VARIABLE","$query",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","buildEntityQuery",282],"(",["T_VARIABLE","$match",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$match_operator",282],")",";",["T_WHITESPACE","\n    ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(",["T_VARIABLE","$limit",283],["T_WHITESPACE"," ",283],">",["T_WHITESPACE"," ",283],["T_LNUMBER","0",283],")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n      ",283],["T_VARIABLE","$query",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","range",284],"(",["T_LNUMBER","0",284],",",["T_WHITESPACE"," ",284],["T_VARIABLE","$limit",284],")",";",["T_WHITESPACE","\n    ",284],"}",["T_WHITESPACE","\n\n    ",285],["T_VARIABLE","$result",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$query",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","execute",287],"(",")",";",["T_WHITESPACE","\n\n    ",287],["T_IF","if",289],["T_WHITESPACE"," ",289],"(",["T_EMPTY","empty",289],"(",["T_VARIABLE","$result",289],")",")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n      ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",")",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_VARIABLE","$options",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$entities",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","entityManager",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","getStorage",294],"(",["T_VARIABLE","$target_type",294],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","loadMultiple",294],"(",["T_VARIABLE","$result",294],")",";",["T_WHITESPACE","\n    ",294],["T_FOREACH","foreach",295],["T_WHITESPACE"," ",295],"(",["T_VARIABLE","$entities",295],["T_WHITESPACE"," ",295],["T_AS","as",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$entity_id",295],["T_WHITESPACE"," ",295],["T_DOUBLE_ARROW","=>",295],["T_WHITESPACE"," ",295],["T_VARIABLE","$entity",295],")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n      ",295],["T_VARIABLE","$bundle",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$entity",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","bundle",296],"(",")",";",["T_WHITESPACE","\n      ",296],["T_VARIABLE","$options",297],"[",["T_VARIABLE","$bundle",297],"]","[",["T_VARIABLE","$entity_id",297],"]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_STRING","Html",297],["T_DOUBLE_COLON","::",297],["T_STRING","escape",297],"(",["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","entityManager",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getTranslationFromContext",297],"(",["T_VARIABLE","$entity",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","label",297],"(",")",")",";",["T_WHITESPACE","\n    ",297],"}",["T_WHITESPACE","\n\n    ",298],["T_RETURN","return",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$options",300],";",["T_WHITESPACE","\n  ",300],"}",["T_WHITESPACE","\n\n  ",301],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",303],["T_WHITESPACE","\n  ",305],["T_PUBLIC","public",306],["T_WHITESPACE"," ",306],["T_FUNCTION","function",306],["T_WHITESPACE"," ",306],["T_STRING","countReferenceableEntities",306],"(",["T_VARIABLE","$match",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","NULL",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$match_operator",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",306],")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$query",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","buildEntityQuery",307],"(",["T_VARIABLE","$match",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$match_operator",307],")",";",["T_WHITESPACE","\n    ",307],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$query",308],["T_WHITESPACE","\n      ",308],["T_OBJECT_OPERATOR","->",309],["T_STRING","count",309],"(",")",["T_WHITESPACE","\n      ",309],["T_OBJECT_OPERATOR","->",310],["T_STRING","execute",310],"(",")",";",["T_WHITESPACE","\n  ",310],"}",["T_WHITESPACE","\n\n  ",311],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",313],["T_WHITESPACE","\n  ",315],["T_PUBLIC","public",316],["T_WHITESPACE"," ",316],["T_FUNCTION","function",316],["T_WHITESPACE"," ",316],["T_STRING","validateReferenceableEntities",316],"(",["T_ARRAY","array",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$ids",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n    ",316],["T_VARIABLE","$result",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",")",";",["T_WHITESPACE","\n    ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_VARIABLE","$ids",318],")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n      ",318],["T_VARIABLE","$target_type",319],["T_WHITESPACE"," ",319],"=",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","configuration",319],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",319],"]",";",["T_WHITESPACE","\n      ",319],["T_VARIABLE","$entity_type",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","entityManager",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getDefinition",320],"(",["T_VARIABLE","$target_type",320],")",";",["T_WHITESPACE","\n      ",320],["T_VARIABLE","$query",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","buildEntityQuery",321],"(",")",";",["T_WHITESPACE","\n      ",321],["T_VARIABLE","$result",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$query",322],["T_WHITESPACE","\n        ",322],["T_OBJECT_OPERATOR","->",323],["T_STRING","condition",323],"(",["T_VARIABLE","$entity_type",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getKey",323],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",323],")",",",["T_WHITESPACE"," ",323],["T_VARIABLE","$ids",323],",",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","'IN'",323],")",["T_WHITESPACE","\n        ",323],["T_OBJECT_OPERATOR","->",324],["T_STRING","execute",324],"(",")",";",["T_WHITESPACE","\n    ",324],"}",["T_WHITESPACE","\n\n    ",325],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$result",327],";",["T_WHITESPACE","\n  ",327],"}",["T_WHITESPACE","\n\n  ",328],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",330],["T_WHITESPACE","\n  ",332],["T_PUBLIC","public",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","createNewEntity",333],"(",["T_VARIABLE","$entity_type_id",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$bundle",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$label",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$uid",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$entity_type",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","entityManager",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getDefinition",334],"(",["T_VARIABLE","$entity_type_id",334],")",";",["T_WHITESPACE","\n    ",334],["T_VARIABLE","$bundle_key",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_VARIABLE","$entity_type",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","getKey",335],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",335],")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$label_key",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$entity_type",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","getKey",336],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",336],")",";",["T_WHITESPACE","\n\n    ",336],["T_VARIABLE","$entity",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","entityManager",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getStorage",338],"(",["T_VARIABLE","$entity_type_id",338],")",["T_OBJECT_OPERATOR","->",338],["T_STRING","create",338],"(",["T_ARRAY","array",338],"(",["T_WHITESPACE","\n      ",338],["T_VARIABLE","$bundle_key",339],["T_WHITESPACE"," ",339],["T_DOUBLE_ARROW","=>",339],["T_WHITESPACE"," ",339],["T_VARIABLE","$bundle",339],",",["T_WHITESPACE","\n      ",339],["T_VARIABLE","$label_key",340],["T_WHITESPACE"," ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$label",340],",",["T_WHITESPACE","\n    ",340],")",")",";",["T_WHITESPACE","\n\n    ",341],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$entity",343],["T_WHITESPACE"," ",343],["T_INSTANCEOF","instanceof",343],["T_WHITESPACE"," ",343],["T_STRING","EntityOwnerInterface",343],")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n      ",343],["T_VARIABLE","$entity",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","setOwnerId",344],"(",["T_VARIABLE","$uid",344],")",";",["T_WHITESPACE","\n    ",344],"}",["T_WHITESPACE","\n\n    ",345],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$entity",347],";",["T_WHITESPACE","\n  ",347],"}",["T_WHITESPACE","\n\n  ",348],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",350],["T_WHITESPACE","\n  ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","validateReferenceableNewEntities",353],"(",["T_ARRAY","array",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$entities",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n    ",353],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_STRING","array_filter",354],"(",["T_VARIABLE","$entities",354],",",["T_WHITESPACE"," ",354],["T_FUNCTION","function",354],["T_WHITESPACE"," ",354],"(",["T_VARIABLE","$entity",354],")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n      ",354],["T_IF","if",355],["T_WHITESPACE"," ",355],"(",["T_ISSET","isset",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","configuration",355],"[",["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",355],"]","[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",355],"]",")",")",["T_WHITESPACE"," ",355],"{",["T_WHITESPACE","\n        ",355],["T_RETURN","return",356],["T_WHITESPACE"," ",356],["T_STRING","in_array",356],"(",["T_VARIABLE","$entity",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","bundle",356],"(",")",",",["T_WHITESPACE"," ",356],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","configuration",356],"[",["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",356],"]","[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",356],"]",")",";",["T_WHITESPACE","\n      ",356],"}",["T_WHITESPACE","\n      ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_STRING","TRUE",358],";",["T_WHITESPACE","\n    ",358],"}",")",";",["T_WHITESPACE","\n  ",359],"}",["T_WHITESPACE","\n\n  ",360],["T_DOC_COMMENT","\/**\n   * Builds an EntityQuery to get referenceable entities.\n   *\n   * @param string|null $match\n   *   (Optional) Text to match the label against. Defaults to NULL.\n   * @param string $match_operator\n   *   (Optional) The operation the matching should be done with. Defaults\n   *   to \"CONTAINS\".\n   *\n   * @return \\Drupal\\Core\\Entity\\Query\\QueryInterface\n   *   The EntityQuery object with the basic conditions and sorting applied to\n   *   it.\n   *\/",362],["T_WHITESPACE","\n  ",374],["T_PROTECTED","protected",375],["T_WHITESPACE"," ",375],["T_FUNCTION","function",375],["T_WHITESPACE"," ",375],["T_STRING","buildEntityQuery",375],"(",["T_VARIABLE","$match",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","NULL",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$match_operator",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$target_type",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","configuration",376],"[",["T_CONSTANT_ENCAPSED_STRING","'target_type'",376],"]",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$handler_settings",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","configuration",377],"[",["T_CONSTANT_ENCAPSED_STRING","'handler_settings'",377],"]",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$entity_type",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","entityManager",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","getDefinition",378],"(",["T_VARIABLE","$target_type",378],")",";",["T_WHITESPACE","\n\n    ",378],["T_VARIABLE","$query",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","entityManager",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","getStorage",380],"(",["T_VARIABLE","$target_type",380],")",["T_OBJECT_OPERATOR","->",380],["T_STRING","getQuery",380],"(",")",";",["T_WHITESPACE","\n\n    ",380],["T_COMMENT","\/\/ If 'target_bundles' is NULL, all bundles are referenceable, no further\n",382],["T_WHITESPACE","    ",383],["T_COMMENT","\/\/ conditions are needed.\n",383],["T_WHITESPACE","    ",384],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_ISSET","isset",384],"(",["T_VARIABLE","$handler_settings",384],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",384],"]",")",["T_WHITESPACE"," ",384],["T_BOOLEAN_AND","&&",384],["T_WHITESPACE"," ",384],["T_STRING","is_array",384],"(",["T_VARIABLE","$handler_settings",384],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",384],"]",")",")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n      ",384],["T_COMMENT","\/\/ If 'target_bundles' is an empty array, no bundle is referenceable,\n",385],["T_WHITESPACE","      ",386],["T_COMMENT","\/\/ force the query to never return anything and bail out early.\n",386],["T_WHITESPACE","      ",387],["T_IF","if",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$handler_settings",387],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",387],"]",["T_WHITESPACE"," ",387],["T_IS_IDENTICAL","===",387],["T_WHITESPACE"," ",387],"[","]",")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$query",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","condition",388],"(",["T_VARIABLE","$entity_type",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getKey",388],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",388],")",",",["T_WHITESPACE"," ",388],["T_STRING","NULL",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'='",388],")",";",["T_WHITESPACE","\n        ",388],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$query",389],";",["T_WHITESPACE","\n      ",389],"}",["T_WHITESPACE","\n      ",390],["T_ELSE","else",391],["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n        ",391],["T_VARIABLE","$query",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","condition",392],"(",["T_VARIABLE","$entity_type",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","getKey",392],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",392],")",",",["T_WHITESPACE"," ",392],["T_VARIABLE","$handler_settings",392],"[",["T_CONSTANT_ENCAPSED_STRING","'target_bundles'",392],"]",",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'IN'",392],")",";",["T_WHITESPACE","\n      ",392],"}",["T_WHITESPACE","\n    ",393],"}",["T_WHITESPACE","\n\n    ",394],["T_IF","if",396],["T_WHITESPACE"," ",396],"(",["T_ISSET","isset",396],"(",["T_VARIABLE","$match",396],")",["T_WHITESPACE"," ",396],["T_BOOLEAN_AND","&&",396],["T_WHITESPACE"," ",396],["T_VARIABLE","$label_key",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$entity_type",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","getKey",396],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",396],")",")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n      ",396],["T_VARIABLE","$query",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","condition",397],"(",["T_VARIABLE","$label_key",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$match",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$match_operator",397],")",";",["T_WHITESPACE","\n    ",397],"}",["T_WHITESPACE","\n\n    ",398],["T_COMMENT","\/\/ Add entity-access tag.\n",400],["T_WHITESPACE","    ",401],["T_VARIABLE","$query",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","addTag",401],"(",["T_VARIABLE","$target_type",401],["T_WHITESPACE"," ",401],".",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'_access'",401],")",";",["T_WHITESPACE","\n\n    ",401],["T_COMMENT","\/\/ Add the Selection handler for system_query_entity_reference_alter().\n",403],["T_WHITESPACE","    ",404],["T_VARIABLE","$query",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","addTag",404],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference'",404],")",";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$query",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","addMetaData",405],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_reference_selection_handler'",405],",",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],")",";",["T_WHITESPACE","\n\n    ",405],["T_COMMENT","\/\/ Add the sort option.\n",407],["T_WHITESPACE","    ",408],["T_IF","if",408],["T_WHITESPACE"," ",408],"(","!",["T_EMPTY","empty",408],"(",["T_VARIABLE","$handler_settings",408],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",408],"]",")",")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n      ",408],["T_VARIABLE","$sort_settings",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$handler_settings",409],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",409],"]",";",["T_WHITESPACE","\n      ",409],["T_IF","if",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$sort_settings",410],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",410],"]",["T_WHITESPACE"," ",410],["T_IS_NOT_EQUAL","!=",410],["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'_none'",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$query",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","sort",411],"(",["T_VARIABLE","$sort_settings",411],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",411],"]",",",["T_WHITESPACE"," ",411],["T_VARIABLE","$sort_settings",411],"[",["T_CONSTANT_ENCAPSED_STRING","'direction'",411],"]",")",";",["T_WHITESPACE","\n      ",411],"}",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n\n    ",413],["T_RETURN","return",415],["T_WHITESPACE"," ",415],["T_VARIABLE","$query",415],";",["T_WHITESPACE","\n  ",415],"}",["T_WHITESPACE","\n\n  ",416],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",418],["T_WHITESPACE","\n  ",420],["T_PUBLIC","public",421],["T_WHITESPACE"," ",421],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","entityQueryAlter",421],"(",["T_STRING","SelectInterface",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$query",421],")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE"," ",421],"}",["T_WHITESPACE","\n\n  ",421],["T_DOC_COMMENT","\/**\n   * Helper method: Passes a query to the alteration system again.\n   *\n   * This allows Entity Reference to add a tag to an existing query so it can\n   * ask access control mechanisms to alter it again.\n   *\/",423],["T_WHITESPACE","\n  ",428],["T_PROTECTED","protected",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","reAlterQuery",429],"(",["T_STRING","AlterableInterface",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$query",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$tag",429],",",["T_WHITESPACE"," ",429],["T_VARIABLE","$base_table",429],")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n    ",429],["T_COMMENT","\/\/ Save the old tags and metadata.\n",430],["T_WHITESPACE","    ",431],["T_COMMENT","\/\/ For some reason, those are public.\n",431],["T_WHITESPACE","    ",432],["T_VARIABLE","$old_tags",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$query",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","alterTags",432],";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$old_metadata",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$query",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","alterMetaData",433],";",["T_WHITESPACE","\n\n    ",433],["T_VARIABLE","$query",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","alterTags",435],["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_ARRAY","array",435],"(",["T_VARIABLE","$tag",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_STRING","TRUE",435],")",";",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$query",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","alterMetaData",436],"[",["T_CONSTANT_ENCAPSED_STRING","'base_table'",436],"]",["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$base_table",436],";",["T_WHITESPACE","\n    ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","moduleHandler",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","alter",437],"(",["T_ARRAY","array",437],"(",["T_CONSTANT_ENCAPSED_STRING","'query'",437],",",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'query_'",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_VARIABLE","$tag",437],")",",",["T_WHITESPACE"," ",437],["T_VARIABLE","$query",437],")",";",["T_WHITESPACE","\n\n    ",437],["T_COMMENT","\/\/ Restore the tags and metadata.\n",439],["T_WHITESPACE","    ",440],["T_VARIABLE","$query",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","alterTags",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_VARIABLE","$old_tags",440],";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$query",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","alterMetaData",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$old_metadata",441],";",["T_WHITESPACE","\n  ",441],"}",["T_WHITESPACE","\n\n",442],"}",["T_WHITESPACE","\n",444]]
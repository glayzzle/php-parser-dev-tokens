[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldStorageDefinitionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KeyValueStore",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KeyValueFactoryInterface",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Provides a repository for installed entity definitions.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","EntityLastInstalledSchemaRepository",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","EntityLastInstalledSchemaRepositoryInterface",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * The key-value factory.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$keyValueFactory",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Constructs a new EntityLastInstalledSchemaRepository.\n   *\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface $key_value_factory\n   *   The key-value factory.\n   *\/",20],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","__construct",26],"(",["T_STRING","KeyValueFactoryInterface",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$key_value_factory",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","keyValueFactory",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$key_value_factory",27],";",["T_WHITESPACE","\n  ",27],"}",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PUBLIC","public",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","getLastInstalledDefinition",33],"(",["T_VARIABLE","$entity_type_id",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_RETURN","return",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","keyValueFactory",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","get",34],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",34],")",["T_OBJECT_OPERATOR","->",34],["T_STRING","get",34],"(",["T_VARIABLE","$entity_type_id",34],["T_WHITESPACE"," ",34],".",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'.entity_type'",34],")",";",["T_WHITESPACE","\n  ",34],"}",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","setLastInstalledDefinition",40],"(",["T_STRING","EntityTypeInterface",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$entity_type",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$entity_type_id",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$entity_type",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","keyValueFactory",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","set",42],"(",["T_VARIABLE","$entity_type_id",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'.entity_type'",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$entity_type",42],")",";",["T_WHITESPACE","\n    ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],";",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","deleteLastInstalledDefinition",49],"(",["T_VARIABLE","$entity_type_id",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","keyValueFactory",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","get",50],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",50],")",["T_OBJECT_OPERATOR","->",50],["T_STRING","delete",50],"(",["T_VARIABLE","$entity_type_id",50],["T_WHITESPACE"," ",50],".",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'.entity_type'",50],")",";",["T_WHITESPACE","\n    ",50],["T_COMMENT","\/\/ Clean up field storage definitions as well. Even if the entity type\n",51],["T_WHITESPACE","    ",52],["T_COMMENT","\/\/ isn't currently fieldable, there might be legacy definitions or an\n",52],["T_WHITESPACE","    ",53],["T_COMMENT","\/\/ empty array stored from when it was.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","keyValueFactory",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",54],")",["T_OBJECT_OPERATOR","->",54],["T_STRING","delete",54],"(",["T_VARIABLE","$entity_type_id",54],["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'.field_storage_definitions'",54],")",";",["T_WHITESPACE","\n    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getLastInstalledFieldStorageDefinitions",61],"(",["T_VARIABLE","$entity_type_id",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","keyValueFactory",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","get",62],"(",["T_VARIABLE","$entity_type_id",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'.field_storage_definitions'",62],",",["T_WHITESPACE"," ",62],"[","]",")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",65],["T_WHITESPACE","\n  ",67],["T_PUBLIC","public",68],["T_WHITESPACE"," ",68],["T_FUNCTION","function",68],["T_WHITESPACE"," ",68],["T_STRING","setLastInstalledFieldStorageDefinitions",68],"(",["T_VARIABLE","$entity_type_id",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$storage_definitions",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","keyValueFactory",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","get",69],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.definitions.installed'",69],")",["T_OBJECT_OPERATOR","->",69],["T_STRING","set",69],"(",["T_VARIABLE","$entity_type_id",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'.field_storage_definitions'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$storage_definitions",69],")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","setLastInstalledFieldStorageDefinition",75],"(",["T_STRING","FieldStorageDefinitionInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$storage_definition",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$entity_type_id",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$storage_definition",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getTargetEntityTypeId",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$definitions",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","getLastInstalledFieldStorageDefinitions",77],"(",["T_VARIABLE","$entity_type_id",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$definitions",78],"[",["T_VARIABLE","$storage_definition",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getName",78],"(",")","]",["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$storage_definition",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setLastInstalledFieldStorageDefinitions",79],"(",["T_VARIABLE","$entity_type_id",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$definitions",79],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","deleteLastInstalledFieldStorageDefinition",85],"(",["T_STRING","FieldStorageDefinitionInterface",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$storage_definition",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$entity_type_id",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$storage_definition",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getTargetEntityTypeId",86],"(",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$definitions",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getLastInstalledFieldStorageDefinitions",87],"(",["T_VARIABLE","$entity_type_id",87],")",";",["T_WHITESPACE","\n    ",87],["T_UNSET","unset",88],"(",["T_VARIABLE","$definitions",88],"[",["T_VARIABLE","$storage_definition",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","getName",88],"(",")","]",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","setLastInstalledFieldStorageDefinitions",89],"(",["T_VARIABLE","$entity_type_id",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$definitions",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n",90],"}",["T_WHITESPACE","\n",92]]
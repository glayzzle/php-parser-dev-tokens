[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KeyValueStore",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Query",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityTypeInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Query",6],["T_NS_SEPARATOR","\\",6],["T_STRING","QueryBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KeyValueStore",7],["T_NS_SEPARATOR","\\",7],["T_STRING","KeyValueFactoryInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Defines the entity query for entities stored in a key value backend.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Query",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","QueryBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The key value factory.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$keyValueFactory",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Constructs a new Query.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityTypeInterface $entity_type\n   *   The entity type.\n   * @param string $conjunction\n   *   - AND: all of the conditions on the query need to match.\n   *   - OR: at least one of the conditions on the query need to match.\n   * @param array $namespaces\n   *   List of potential namespaces of the classes belonging to this query.\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface $key_value_factory\n   *   The key value factory.\n   *\/",21],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","__construct",34],"(",["T_STRING","EntityTypeInterface",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$entity_type",34],",",["T_WHITESPACE"," ",34],["T_VARIABLE","$conjunction",34],",",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$namespaces",34],",",["T_WHITESPACE"," ",34],["T_STRING","KeyValueFactoryInterface",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$key_value_factory",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_STRING","parent",35],["T_DOUBLE_COLON","::",35],["T_STRING","__construct",35],"(",["T_VARIABLE","$entity_type",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$conjunction",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$namespaces",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","keyValueFactory",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$key_value_factory",36],";",["T_WHITESPACE","\n  ",36],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","execute",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_COMMENT","\/\/ Load the relevant records.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$records",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","keyValueFactory",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_storage__'",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","entityTypeId",44],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","getAll",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ Apply conditions.\n",46],["T_WHITESPACE","    ",47],["T_VARIABLE","$result",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","condition",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","compile",47],"(",["T_VARIABLE","$records",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_COMMENT","\/\/ Apply sort settings.\n",49],["T_WHITESPACE","    ",50],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","sort",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$sort",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$direction",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$sort",51],"[",["T_CONSTANT_ENCAPSED_STRING","'direction'",51],"]",["T_WHITESPACE"," ",51],["T_IS_EQUAL","==",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'ASC'",51],["T_WHITESPACE"," ",51],"?",["T_WHITESPACE"," ",51],"-",["T_LNUMBER","1",51],["T_WHITESPACE"," ",51],":",["T_WHITESPACE"," ",51],["T_LNUMBER","1",51],";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$field",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$sort",52],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",52],"]",";",["T_WHITESPACE","\n      ",52],["T_STRING","uasort",53],"(",["T_VARIABLE","$result",53],",",["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],"(",["T_VARIABLE","$a",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$b",53],")",["T_WHITESPACE"," ",53],["T_USE","use",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$field",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$direction",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_RETURN","return",54],["T_WHITESPACE"," ",54],"(",["T_VARIABLE","$a",54],"[",["T_VARIABLE","$field",54],"]",["T_WHITESPACE"," ",54],["T_IS_SMALLER_OR_EQUAL","<=",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$b",54],"[",["T_VARIABLE","$field",54],"]",")",["T_WHITESPACE"," ",54],"?",["T_WHITESPACE"," ",54],["T_VARIABLE","$direction",54],["T_WHITESPACE"," ",54],":",["T_WHITESPACE"," ",54],"-",["T_VARIABLE","$direction",54],";",["T_WHITESPACE","\n      ",54],"}",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Let the pager do its work.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","initializePager",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","range",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n      ",61],["T_VARIABLE","$result",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","array_slice",62],"(",["T_VARIABLE","$result",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","range",62],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",62],"]",",",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","range",62],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",62],"]",",",["T_WHITESPACE"," ",62],["T_STRING","TRUE",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n    ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","count",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_RETURN","return",65],["T_WHITESPACE"," ",65],["T_STRING","count",65],"(",["T_VARIABLE","$result",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Create the expected structure of entity_id => entity_id.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$entity_ids",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","array_keys",69],"(",["T_VARIABLE","$result",69],")",";",["T_WHITESPACE","\n    ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_STRING","array_combine",70],"(",["T_VARIABLE","$entity_ids",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$entity_ids",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n",71],"}",["T_WHITESPACE","\n",73]]
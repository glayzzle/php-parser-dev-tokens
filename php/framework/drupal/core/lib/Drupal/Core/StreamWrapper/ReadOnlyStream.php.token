[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","StreamWrapper",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Defines a read-only Drupal stream wrapper base class.\n *\n * This class provides a minimal-read only stream wrapper implementation.\n * Specifically, it only implements the writing classes and read classes where\n * we need to restrict 'write-capable' arguments.\n *\n * Drupal\\Core\\StreamWrapper\\ReadOnlyStream implementations need to implement\n * all the read-related classes.\n *\/",5],["T_WHITESPACE","\n",14],["T_ABSTRACT","abstract",15],["T_WHITESPACE"," ",15],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ReadOnlyStream",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","StreamWrapperInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n  ",15],["T_DOC_COMMENT","\/**\n   * Stream context resource.\n   *\n   * @var resource\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$context",21],";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * A generic resource handle.\n   *\n   * @var resource\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$handle",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","NULL",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Instance URI (stream).\n   *\n   * A stream is referenced as \"scheme:\/\/target\".\n   *\n   * @var string\n   *\/",30],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$uri",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","setUri",42],"(",["T_VARIABLE","$uri",42],")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","uri",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$uri",43],";",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","getUri",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_RETURN","return",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","uri",50],";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * Support for fopen(), file_get_contents(), etc.\n   *\n   * Any write modes will be rejected, as this is a read-only stream wrapper.\n   *\n   * @param string $uri\n   *   A string containing the URI to the file to open.\n   * @param int $mode\n   *   The file mode, only strict readonly modes are supported.\n   * @param int $options\n   *   A bit mask of STREAM_USE_PATH and STREAM_REPORT_ERRORS.\n   * @param string $opened_path\n   *   A string containing the path actually opened.\n   *\n   * @return bool\n   *   TRUE if $mode denotes a readonly mode and the file was opened\n   *   successfully, FALSE otherwise.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.stream-open.php\n   *\/",53],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","stream_open",73],"(",["T_VARIABLE","$uri",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$mode",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$options",73],",",["T_WHITESPACE"," ",73],"&",["T_VARIABLE","$opened_path",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_STRING","in_array",74],"(",["T_VARIABLE","$mode",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'rb'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'rt'",74],")",")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$options",75],["T_WHITESPACE"," ",75],"&",["T_WHITESPACE"," ",75],["T_STRING","STREAM_REPORT_ERRORS",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n        ",75],["T_STRING","trigger_error",76],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_open() write modes not supported for read-only stream wrappers'",76],",",["T_WHITESPACE"," ",76],["T_STRING","E_USER_WARNING",76],")",";",["T_WHITESPACE","\n      ",76],"}",["T_WHITESPACE","\n      ",77],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_STRING","FALSE",78],";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","uri",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$uri",81],";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$path",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","getLocalPath",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","handle",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$options",83],["T_WHITESPACE"," ",83],"&",["T_WHITESPACE"," ",83],["T_STRING","STREAM_REPORT_ERRORS",83],")",["T_WHITESPACE"," ",83],"?",["T_WHITESPACE"," ",83],["T_STRING","fopen",83],"(",["T_VARIABLE","$path",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$mode",83],")",["T_WHITESPACE"," ",83],":",["T_WHITESPACE"," ",83],"@",["T_STRING","fopen",83],"(",["T_VARIABLE","$path",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$mode",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","handle",85],["T_WHITESPACE"," ",85],["T_IS_NOT_IDENTICAL","!==",85],["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$options",85],["T_WHITESPACE"," ",85],"&",["T_WHITESPACE"," ",85],["T_STRING","STREAM_USE_PATH",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n      ",85],["T_VARIABLE","$opened_path",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$path",86],";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n\n    ",87],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_BOOL_CAST","(bool)",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","handle",89],";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Support for flock().\n   *\n   * An exclusive lock attempt will be rejected, as this is a read-only stream\n   * wrapper.\n   *\n   * @param int $operation\n   *   One of the following:\n   *   - LOCK_SH to acquire a shared lock (reader).\n   *   - LOCK_EX to acquire an exclusive lock (writer).\n   *   - LOCK_UN to release a lock (shared or exclusive).\n   *   - LOCK_NB if you don't want flock() to block while locking (not\n   *     supported on Windows).\n   *\n   * @return bool\n   *   Return FALSE for an exclusive lock (writer), as this is a read-only\n   *   stream wrapper.  Return the result of flock() for other valid operations.\n   *   Defaults to TRUE if an invalid operation is passed.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.stream-lock.php\n   *\/",92],["T_WHITESPACE","\n  ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","stream_lock",113],"(",["T_VARIABLE","$operation",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n    ",113],["T_IF","if",114],["T_WHITESPACE"," ",114],"(",["T_STRING","in_array",114],"(",["T_VARIABLE","$operation",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",["T_STRING","LOCK_EX",114],",",["T_WHITESPACE"," ",114],["T_STRING","LOCK_EX",114],["T_WHITESPACE"," ",114],"|",["T_WHITESPACE"," ",114],["T_STRING","LOCK_NB",114],")",")",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n      ",114],["T_STRING","trigger_error",115],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_lock() exclusive lock operations not supported for read-only stream wrappers'",115],",",["T_WHITESPACE"," ",115],["T_STRING","E_USER_WARNING",115],")",";",["T_WHITESPACE","\n      ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","FALSE",116],";",["T_WHITESPACE","\n    ",116],"}",["T_WHITESPACE","\n    ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_STRING","in_array",118],"(",["T_VARIABLE","$operation",118],",",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_STRING","LOCK_SH",118],",",["T_WHITESPACE"," ",118],["T_STRING","LOCK_UN",118],",",["T_WHITESPACE"," ",118],["T_STRING","LOCK_SH",118],["T_WHITESPACE"," ",118],"|",["T_WHITESPACE"," ",118],["T_STRING","LOCK_NB",118],")",")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_RETURN","return",119],["T_WHITESPACE"," ",119],["T_STRING","flock",119],"(",["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","handle",119],",",["T_WHITESPACE"," ",119],["T_VARIABLE","$operation",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_STRING","TRUE",122],";",["T_WHITESPACE","\n  ",122],"}",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * Support for fwrite(), file_put_contents() etc.\n   *\n   * Data will not be written as this is a read-only stream wrapper.\n   *\n   * @param string $data\n   *   The string to be written.\n   *\n   * @return bool\n   *   FALSE as data will not be written.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.stream-write.php\n   *\/",125],["T_WHITESPACE","\n  ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","stream_write",138],"(",["T_VARIABLE","$data",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_STRING","trigger_error",139],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_write() not supported for read-only stream wrappers'",139],",",["T_WHITESPACE"," ",139],["T_STRING","E_USER_WARNING",139],")",";",["T_WHITESPACE","\n    ",139],["T_RETURN","return",140],["T_WHITESPACE"," ",140],["T_STRING","FALSE",140],";",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n  ",141],["T_DOC_COMMENT","\/**\n   * Support for fflush().\n   *\n   * Nothing will be output to the file, as this is a read-only stream wrapper.\n   * However as stream_flush is called during stream_close we should not trigger\n   * an error.\n   *\n   * @return bool\n   *   FALSE, as no data will be stored.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.stream-flush.php\n   *\/",143],["T_WHITESPACE","\n  ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","stream_flush",155],"(",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_STRING","FALSE",156],";",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n  ",157],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * Does not change meta data as this is a read-only stream wrapper.\n   *\/",159],["T_WHITESPACE","\n  ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","stream_metadata",164],"(",["T_VARIABLE","$uri",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$option",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$value",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n    ",164],["T_STRING","trigger_error",165],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_metadata() not supported for read-only stream wrappers'",165],",",["T_WHITESPACE"," ",165],["T_STRING","E_USER_WARNING",165],")",";",["T_WHITESPACE","\n    ",165],["T_RETURN","return",166],["T_WHITESPACE"," ",166],["T_STRING","FALSE",166],";",["T_WHITESPACE","\n  ",166],"}",["T_WHITESPACE","\n\n  ",167],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",169],["T_WHITESPACE","\n  ",171],["T_PUBLIC","public",172],["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],["T_WHITESPACE"," ",172],["T_STRING","stream_truncate",172],"(",["T_VARIABLE","$new_size",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n    ",172],["T_STRING","trigger_error",173],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_truncate() not supported for read-only stream wrappers'",173],",",["T_WHITESPACE"," ",173],["T_STRING","E_USER_WARNING",173],")",";",["T_WHITESPACE","\n    ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_STRING","FALSE",174],";",["T_WHITESPACE","\n  ",174],"}",["T_WHITESPACE","\n\n  ",175],["T_DOC_COMMENT","\/**\n   * Support for unlink().\n   *\n   * The file will not be deleted from the stream as this is a read-only stream\n   * wrapper.\n   *\n   * @param string $uri\n   *   A string containing the uri to the resource to delete.\n   *\n   * @return bool\n   *   TRUE so that file_delete() will remove db reference to file. File is not\n   *   actually deleted.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.unlink.php\n   *\/",177],["T_WHITESPACE","\n  ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","unlink",192],"(",["T_VARIABLE","$uri",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n    ",192],["T_STRING","trigger_error",193],"(",["T_CONSTANT_ENCAPSED_STRING","'unlink() not supported for read-only stream wrappers'",193],",",["T_WHITESPACE"," ",193],["T_STRING","E_USER_WARNING",193],")",";",["T_WHITESPACE","\n    ",193],["T_RETURN","return",194],["T_WHITESPACE"," ",194],["T_STRING","TRUE",194],";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n  ",195],["T_DOC_COMMENT","\/**\n   * Support for rename().\n   *\n   * This file will not be renamed as this is a read-only stream wrapper.\n   *\n   * @param string $from_uri,\n   *   The uri to the file to rename.\n   * @param string $to_uri\n   *   The new uri for file.\n   *\n   * @return bool\n   *   FALSE as file will never be renamed.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.rename.php\n   *\/",197],["T_WHITESPACE","\n  ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","rename",212],"(",["T_VARIABLE","$from_uri",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$to_uri",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n    ",212],["T_STRING","trigger_error",213],"(",["T_CONSTANT_ENCAPSED_STRING","'rename() not supported for read-only stream wrappers'",213],",",["T_WHITESPACE"," ",213],["T_STRING","E_USER_WARNING",213],")",";",["T_WHITESPACE","\n    ",213],["T_RETURN","return",214],["T_WHITESPACE"," ",214],["T_STRING","FALSE",214],";",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * Support for mkdir().\n   *\n   * Directory will never be created as this is a read-only stream wrapper.\n   *\n   * @param string $uri\n   *   A string containing the URI to the directory to create.\n   * @param int $mode\n   *   Permission flags - see mkdir().\n   * @param int $options\n   *   A bit mask of STREAM_REPORT_ERRORS and STREAM_MKDIR_RECURSIVE.\n   *\n   * @return bool\n   *   FALSE as directory will never be created.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.mkdir.php\n   *\/",217],["T_WHITESPACE","\n  ",233],["T_PUBLIC","public",234],["T_WHITESPACE"," ",234],["T_FUNCTION","function",234],["T_WHITESPACE"," ",234],["T_STRING","mkdir",234],"(",["T_VARIABLE","$uri",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$mode",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$options",234],")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n    ",234],["T_STRING","trigger_error",235],"(",["T_CONSTANT_ENCAPSED_STRING","'mkdir() not supported for read-only stream wrappers'",235],",",["T_WHITESPACE"," ",235],["T_STRING","E_USER_WARNING",235],")",";",["T_WHITESPACE","\n    ",235],["T_RETURN","return",236],["T_WHITESPACE"," ",236],["T_STRING","FALSE",236],";",["T_WHITESPACE","\n  ",236],"}",["T_WHITESPACE","\n\n  ",237],["T_DOC_COMMENT","\/**\n   * Support for rmdir().\n   *\n   * Directory will never be deleted as this is a read-only stream wrapper.\n   *\n   * @param string $uri\n   *   A string containing the URI to the directory to delete.\n   * @param int $options\n   *   A bit mask of STREAM_REPORT_ERRORS.\n   *\n   * @return bool\n   *   FALSE as directory will never be deleted.\n   *\n   * @see http:\/\/php.net\/manual\/streamwrapper.rmdir.php\n   *\/",239],["T_WHITESPACE","\n  ",253],["T_PUBLIC","public",254],["T_WHITESPACE"," ",254],["T_FUNCTION","function",254],["T_WHITESPACE"," ",254],["T_STRING","rmdir",254],"(",["T_VARIABLE","$uri",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$options",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n    ",254],["T_STRING","trigger_error",255],"(",["T_CONSTANT_ENCAPSED_STRING","'rmdir() not supported for read-only stream wrappers'",255],",",["T_WHITESPACE"," ",255],["T_STRING","E_USER_WARNING",255],")",";",["T_WHITESPACE","\n    ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_STRING","FALSE",256],";",["T_WHITESPACE","\n  ",256],"}",["T_WHITESPACE","\n\n",257],"}",["T_WHITESPACE","\n",259]]
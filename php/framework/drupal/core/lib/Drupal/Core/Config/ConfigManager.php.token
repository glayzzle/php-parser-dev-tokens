[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Config",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Diff",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Diff",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigDependencyManager",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigEntityInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigEntityTypeInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityManagerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityTypeInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Serialization",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Yaml",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StringTranslation",12],["T_NS_SEPARATOR","\\",12],["T_STRING","StringTranslationTrait",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StringTranslation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","TranslationInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventDispatcher",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventDispatcherInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * The ConfigManager provides helper functions for the configuration system.\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","ConfigManager",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","ConfigManagerInterface",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n  ",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","StringTranslationTrait",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$entityManager",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The configuration factory.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$configFactory",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The typed config manager.\n   *\n   * @var \\Drupal\\Core\\Config\\TypedConfigManagerInterface\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$typedConfigManager",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The active configuration storage.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$activeStorage",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * The event dispatcher.\n   *\n   * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n   *\/",50],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$eventDispatcher",55],";",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * The configuration collection info.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigCollectionInfo\n   *\/",57],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$configCollectionInfo",62],";",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * The configuration storages keyed by collection name.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface[]\n   *\/",64],["T_WHITESPACE","\n  ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$storages",69],";",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * Creates ConfigManager objects.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The configuration factory.\n   * @param \\Drupal\\Core\\Config\\TypedConfigManagerInterface $typed_config_manager\n   *   The typed config manager.\n   * @param \\Drupal\\Core\\StringTranslation\\TranslationInterface $string_translation\n   *   The string translation service.\n   * @param \\Drupal\\Core\\Config\\StorageInterface $active_storage\n   *   The active configuration storage.\n   * @param \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface $event_dispatcher\n   *   The event dispatcher.\n   *\/",71],["T_WHITESPACE","\n  ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","__construct",87],"(",["T_STRING","EntityManagerInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$entity_manager",87],",",["T_WHITESPACE"," ",87],["T_STRING","ConfigFactoryInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$config_factory",87],",",["T_WHITESPACE"," ",87],["T_STRING","TypedConfigManagerInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$typed_config_manager",87],",",["T_WHITESPACE"," ",87],["T_STRING","TranslationInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$string_translation",87],",",["T_WHITESPACE"," ",87],["T_STRING","StorageInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$active_storage",87],",",["T_WHITESPACE"," ",87],["T_STRING","EventDispatcherInterface",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$event_dispatcher",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","entityManager",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$entity_manager",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","configFactory",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$config_factory",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","typedConfigManager",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$typed_config_manager",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","stringTranslation",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$string_translation",91],";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","activeStorage",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$active_storage",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","eventDispatcher",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$event_dispatcher",93],";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",96],["T_WHITESPACE","\n  ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","getEntityTypeIdByName",99],"(",["T_VARIABLE","$name",99],")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$entities",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_STRING","array_filter",100],"(",["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","entityManager",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getDefinitions",100],"(",")",",",["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],"(",["T_STRING","EntityTypeInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$entity_type",100],")",["T_WHITESPACE"," ",100],["T_USE","use",100],["T_WHITESPACE"," ",100],"(",["T_VARIABLE","$name",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n      ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],"(",["T_VARIABLE","$entity_type",101],["T_WHITESPACE"," ",101],["T_INSTANCEOF","instanceof",101],["T_WHITESPACE"," ",101],["T_STRING","ConfigEntityTypeInterface",101],["T_WHITESPACE"," ",101],["T_BOOLEAN_AND","&&",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$config_prefix",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$entity_type",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getConfigPrefix",101],"(",")",")",["T_WHITESPACE"," ",101],["T_BOOLEAN_AND","&&",101],["T_WHITESPACE"," ",101],["T_STRING","strpos",101],"(",["T_VARIABLE","$name",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$config_prefix",101],["T_WHITESPACE"," ",101],".",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'.'",101],")",["T_WHITESPACE"," ",101],["T_IS_IDENTICAL","===",101],["T_WHITESPACE"," ",101],["T_LNUMBER","0",101],";",["T_WHITESPACE","\n    ",101],"}",")",";",["T_WHITESPACE","\n    ",102],["T_RETURN","return",103],["T_WHITESPACE"," ",103],["T_STRING","key",103],"(",["T_VARIABLE","$entities",103],")",";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n  ",104],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",106],["T_WHITESPACE","\n  ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","loadConfigEntityByName",109],"(",["T_VARIABLE","$name",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$entity_type_id",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getEntityTypeIdByName",110],"(",["T_VARIABLE","$name",110],")",";",["T_WHITESPACE","\n    ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$entity_type_id",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$entity_type",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","entityManager",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getDefinition",112],"(",["T_VARIABLE","$entity_type_id",112],")",";",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$id",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_STRING","substr",113],"(",["T_VARIABLE","$name",113],",",["T_WHITESPACE"," ",113],["T_STRING","strlen",113],"(",["T_VARIABLE","$entity_type",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getConfigPrefix",113],"(",")",")",["T_WHITESPACE"," ",113],"+",["T_WHITESPACE"," ",113],["T_LNUMBER","1",113],")",";",["T_WHITESPACE","\n      ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","entityManager",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getStorage",114],"(",["T_VARIABLE","$entity_type_id",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","load",114],"(",["T_VARIABLE","$id",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n    ",115],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_STRING","NULL",116],";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","getEntityManager",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_RETURN","return",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","entityManager",123],";",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",126],["T_WHITESPACE","\n  ",128],["T_PUBLIC","public",129],["T_WHITESPACE"," ",129],["T_FUNCTION","function",129],["T_WHITESPACE"," ",129],["T_STRING","getConfigFactory",129],"(",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n    ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","configFactory",130],";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",133],["T_WHITESPACE","\n  ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","diff",136],"(",["T_STRING","StorageInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$source_storage",136],",",["T_WHITESPACE"," ",136],["T_STRING","StorageInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$target_storage",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$source_name",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$target_name",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","NULL",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$collection",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","StorageInterface",136],["T_DOUBLE_COLON","::",136],["T_STRING","DEFAULT_COLLECTION",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$collection",137],["T_WHITESPACE"," ",137],["T_IS_NOT_EQUAL","!=",137],["T_WHITESPACE"," ",137],["T_STRING","StorageInterface",137],["T_DOUBLE_COLON","::",137],["T_STRING","DEFAULT_COLLECTION",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_VARIABLE","$source_storage",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$source_storage",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","createCollection",138],"(",["T_VARIABLE","$collection",138],")",";",["T_WHITESPACE","\n      ",138],["T_VARIABLE","$target_storage",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$target_storage",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","createCollection",139],"(",["T_VARIABLE","$collection",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n    ",140],["T_IF","if",141],["T_WHITESPACE"," ",141],"(","!",["T_ISSET","isset",141],"(",["T_VARIABLE","$target_name",141],")",")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n      ",141],["T_VARIABLE","$target_name",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$source_name",142],";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n    ",143],["T_COMMENT","\/\/ The output should show configuration object differences formatted as YAML.\n",144],["T_WHITESPACE","    ",145],["T_COMMENT","\/\/ But the configuration is not necessarily stored in files. Therefore, they\n",145],["T_WHITESPACE","    ",146],["T_COMMENT","\/\/ need to be read and parsed, and lastly, dumped into YAML strings.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$source_data",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_STRING","explode",147],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",147],",",["T_WHITESPACE"," ",147],["T_STRING","Yaml",147],["T_DOUBLE_COLON","::",147],["T_STRING","encode",147],"(",["T_VARIABLE","$source_storage",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","read",147],"(",["T_VARIABLE","$source_name",147],")",")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$target_data",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","explode",148],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",148],",",["T_WHITESPACE"," ",148],["T_STRING","Yaml",148],["T_DOUBLE_COLON","::",148],["T_STRING","encode",148],"(",["T_VARIABLE","$target_storage",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","read",148],"(",["T_VARIABLE","$target_name",148],")",")",")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Check for new or removed files.\n",150],["T_WHITESPACE","    ",151],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$source_data",151],["T_WHITESPACE"," ",151],["T_IS_IDENTICAL","===",151],["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'false'",151],")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n      ",151],["T_COMMENT","\/\/ Added file.\n",152],["T_WHITESPACE","      ",153],["T_COMMENT","\/\/ Cast the result of t() to a string, as the diff engine doesn't know\n",153],["T_WHITESPACE","      ",154],["T_COMMENT","\/\/ about objects.\n",154],["T_WHITESPACE","      ",155],["T_VARIABLE","$source_data",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_STRING_CAST","(string)",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","t",155],"(",["T_CONSTANT_ENCAPSED_STRING","'File added'",155],")",")",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n    ",156],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$target_data",157],["T_WHITESPACE"," ",157],["T_IS_IDENTICAL","===",157],["T_WHITESPACE"," ",157],["T_ARRAY","array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'false'",157],")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_COMMENT","\/\/ Deleted file.\n",158],["T_WHITESPACE","      ",159],["T_COMMENT","\/\/ Cast the result of t() to a string, as the diff engine doesn't know\n",159],["T_WHITESPACE","      ",160],["T_COMMENT","\/\/ about objects.\n",160],["T_WHITESPACE","      ",161],["T_VARIABLE","$target_data",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_STRING_CAST","(string)",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","t",161],"(",["T_CONSTANT_ENCAPSED_STRING","'File removed'",161],")",")",";",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n\n    ",162],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_NEW","new",164],["T_WHITESPACE"," ",164],["T_STRING","Diff",164],"(",["T_VARIABLE","$source_data",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$target_data",164],")",";",["T_WHITESPACE","\n  ",164],"}",["T_WHITESPACE","\n\n  ",165],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",167],["T_WHITESPACE","\n  ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","createSnapshot",170],"(",["T_STRING","StorageInterface",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$source_storage",170],",",["T_WHITESPACE"," ",170],["T_STRING","StorageInterface",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$snapshot_storage",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n    ",170],["T_COMMENT","\/\/ Empty the snapshot of all configuration.\n",171],["T_WHITESPACE","    ",172],["T_VARIABLE","$snapshot_storage",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","deleteAll",172],"(",")",";",["T_WHITESPACE","\n    ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$snapshot_storage",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getAllCollectionNames",173],"(",")",["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$collection",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n      ",173],["T_VARIABLE","$snapshot_collection",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$snapshot_storage",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","createCollection",174],"(",["T_VARIABLE","$collection",174],")",";",["T_WHITESPACE","\n      ",174],["T_VARIABLE","$snapshot_collection",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","deleteAll",175],"(",")",";",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n    ",176],["T_FOREACH","foreach",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$source_storage",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","listAll",177],"(",")",["T_WHITESPACE"," ",177],["T_AS","as",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$name",177],")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n      ",177],["T_VARIABLE","$snapshot_storage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","write",178],"(",["T_VARIABLE","$name",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$source_storage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","read",178],"(",["T_VARIABLE","$name",178],")",")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n    ",179],["T_COMMENT","\/\/ Copy collections as well.\n",180],["T_WHITESPACE","    ",181],["T_FOREACH","foreach",181],["T_WHITESPACE"," ",181],"(",["T_VARIABLE","$source_storage",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getAllCollectionNames",181],"(",")",["T_WHITESPACE"," ",181],["T_AS","as",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$collection",181],")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n      ",181],["T_VARIABLE","$source_collection",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$source_storage",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","createCollection",182],"(",["T_VARIABLE","$collection",182],")",";",["T_WHITESPACE","\n      ",182],["T_VARIABLE","$snapshot_collection",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$snapshot_storage",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","createCollection",183],"(",["T_VARIABLE","$collection",183],")",";",["T_WHITESPACE","\n      ",183],["T_FOREACH","foreach",184],["T_WHITESPACE"," ",184],"(",["T_VARIABLE","$source_collection",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","listAll",184],"(",")",["T_WHITESPACE"," ",184],["T_AS","as",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$name",184],")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n        ",184],["T_VARIABLE","$snapshot_collection",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","write",185],"(",["T_VARIABLE","$name",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$source_collection",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","read",185],"(",["T_VARIABLE","$name",185],")",")",";",["T_WHITESPACE","\n      ",185],"}",["T_WHITESPACE","\n    ",186],"}",["T_WHITESPACE","\n  ",187],"}",["T_WHITESPACE","\n\n  ",188],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",190],["T_WHITESPACE","\n  ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","uninstall",193],"(",["T_VARIABLE","$type",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$name",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$entities",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",194],"(",["T_VARIABLE","$type",194],",",["T_WHITESPACE"," ",194],"[",["T_VARIABLE","$name",194],"]",",",["T_WHITESPACE"," ",194],["T_STRING","FALSE",194],")",";",["T_WHITESPACE","\n    ",194],["T_COMMENT","\/\/ Fix all dependent configuration entities.\n",195],["T_WHITESPACE","    ",196],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface $entity *\/",196],["T_WHITESPACE","\n    ",196],["T_FOREACH","foreach",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$entities",197],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",197],"]",["T_WHITESPACE"," ",197],["T_AS","as",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$entity",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n      ",197],["T_VARIABLE","$entity",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","save",198],"(",")",";",["T_WHITESPACE","\n    ",198],"}",["T_WHITESPACE","\n    ",199],["T_COMMENT","\/\/ Remove all dependent configuration entities.\n",200],["T_WHITESPACE","    ",201],["T_FOREACH","foreach",201],["T_WHITESPACE"," ",201],"(",["T_VARIABLE","$entities",201],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",201],"]",["T_WHITESPACE"," ",201],["T_AS","as",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$entity",201],")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n      ",201],["T_VARIABLE","$entity",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","setUninstalling",202],"(",["T_STRING","TRUE",202],")",";",["T_WHITESPACE","\n      ",202],["T_VARIABLE","$entity",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","delete",203],"(",")",";",["T_WHITESPACE","\n    ",203],"}",["T_WHITESPACE","\n\n    ",204],["T_VARIABLE","$config_names",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","configFactory",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","listAll",206],"(",["T_VARIABLE","$name",206],["T_WHITESPACE"," ",206],".",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'.'",206],")",";",["T_WHITESPACE","\n    ",206],["T_FOREACH","foreach",207],["T_WHITESPACE"," ",207],"(",["T_VARIABLE","$config_names",207],["T_WHITESPACE"," ",207],["T_AS","as",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$config_name",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n      ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","configFactory",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","getEditable",208],"(",["T_VARIABLE","$config_name",208],")",["T_OBJECT_OPERATOR","->",208],["T_STRING","delete",208],"(",")",";",["T_WHITESPACE","\n    ",208],"}",["T_WHITESPACE","\n\n    ",209],["T_COMMENT","\/\/ Remove any matching configuration from collections.\n",211],["T_WHITESPACE","    ",212],["T_FOREACH","foreach",212],["T_WHITESPACE"," ",212],"(",["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","activeStorage",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getAllCollectionNames",212],"(",")",["T_WHITESPACE"," ",212],["T_AS","as",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$collection",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n      ",212],["T_VARIABLE","$collection_storage",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","activeStorage",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","createCollection",213],"(",["T_VARIABLE","$collection",213],")",";",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$collection_storage",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","deleteAll",214],"(",["T_VARIABLE","$name",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'.'",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_VARIABLE","$schema_dir",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","drupal_get_path",217],"(",["T_VARIABLE","$type",217],",",["T_WHITESPACE"," ",217],["T_VARIABLE","$name",217],")",["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'\/'",217],["T_WHITESPACE"," ",217],".",["T_WHITESPACE"," ",217],["T_STRING","InstallStorage",217],["T_DOUBLE_COLON","::",217],["T_STRING","CONFIG_SCHEMA_DIRECTORY",217],";",["T_WHITESPACE","\n    ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_STRING","is_dir",218],"(",["T_VARIABLE","$schema_dir",218],")",")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n      ",218],["T_COMMENT","\/\/ Refresh the schema cache if uninstalling an extension that provides\n",219],["T_WHITESPACE","      ",220],["T_COMMENT","\/\/ configuration schema.\n",220],["T_WHITESPACE","      ",221],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","typedConfigManager",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","clearCachedDefinitions",221],"(",")",";",["T_WHITESPACE","\n    ",221],"}",["T_WHITESPACE","\n  ",222],"}",["T_WHITESPACE","\n\n  ",223],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",225],["T_WHITESPACE","\n  ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","getConfigDependencyManager",228],"(",")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$dependency_manager",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_NEW","new",229],["T_WHITESPACE"," ",229],["T_STRING","ConfigDependencyManager",229],"(",")",";",["T_WHITESPACE","\n    ",229],["T_COMMENT","\/\/ Read all configuration using the factory. This ensures that multiple\n",230],["T_WHITESPACE","    ",231],["T_COMMENT","\/\/ deletes during the same request benefit from the static cache. Using the\n",231],["T_WHITESPACE","    ",232],["T_COMMENT","\/\/ factory also ensures configuration entity dependency discovery has no\n",232],["T_WHITESPACE","    ",233],["T_COMMENT","\/\/ dependencies on the config entity classes. Assume data with UUID is a\n",233],["T_WHITESPACE","    ",234],["T_COMMENT","\/\/ config entity. Only configuration entities can be depended on so we can\n",234],["T_WHITESPACE","    ",235],["T_COMMENT","\/\/ ignore everything else.\n",235],["T_WHITESPACE","    ",236],["T_VARIABLE","$data",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","array_map",236],"(",["T_FUNCTION","function",236],"(",["T_VARIABLE","$config",236],")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$data",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$config",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","get",237],"(",")",";",["T_WHITESPACE","\n      ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_ISSET","isset",238],"(",["T_VARIABLE","$data",238],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",238],"]",")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n        ",238],["T_RETURN","return",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$data",239],";",["T_WHITESPACE","\n      ",239],"}",["T_WHITESPACE","\n      ",240],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_STRING","FALSE",241],";",["T_WHITESPACE","\n    ",241],"}",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","configFactory",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","loadMultiple",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","activeStorage",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","listAll",242],"(",")",")",")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$dependency_manager",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","setData",243],"(",["T_STRING","array_filter",243],"(",["T_VARIABLE","$data",243],")",")",";",["T_WHITESPACE","\n    ",243],["T_RETURN","return",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$dependency_manager",244],";",["T_WHITESPACE","\n  ",244],"}",["T_WHITESPACE","\n\n  ",245],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",247],["T_WHITESPACE","\n  ",249],["T_PUBLIC","public",250],["T_WHITESPACE"," ",250],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","findConfigEntityDependents",250],"(",["T_VARIABLE","$type",250],",",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$names",250],",",["T_WHITESPACE"," ",250],["T_STRING","ConfigDependencyManager",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$dependency_manager",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","NULL",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n    ",250],["T_IF","if",251],["T_WHITESPACE"," ",251],"(","!",["T_VARIABLE","$dependency_manager",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n      ",251],["T_VARIABLE","$dependency_manager",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getConfigDependencyManager",252],"(",")",";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$dependencies",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_ARRAY","array",254],"(",")",";",["T_WHITESPACE","\n    ",254],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$names",255],["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$name",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n      ",255],["T_VARIABLE","$dependencies",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","array_merge",256],"(",["T_VARIABLE","$dependencies",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$dependency_manager",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getDependentEntities",256],"(",["T_VARIABLE","$type",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$name",256],")",")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n    ",257],["T_RETURN","return",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$dependencies",258],";",["T_WHITESPACE","\n  ",258],"}",["T_WHITESPACE","\n\n  ",259],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",261],["T_WHITESPACE","\n  ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","findConfigEntityDependentsAsEntities",264],"(",["T_VARIABLE","$type",264],",",["T_WHITESPACE"," ",264],["T_ARRAY","array",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$names",264],",",["T_WHITESPACE"," ",264],["T_STRING","ConfigDependencyManager",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$dependency_manager",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_STRING","NULL",264],")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$dependencies",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","findConfigEntityDependents",265],"(",["T_VARIABLE","$type",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$names",265],",",["T_WHITESPACE"," ",265],["T_VARIABLE","$dependency_manager",265],")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$entities",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$definitions",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","entityManager",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getDefinitions",267],"(",")",";",["T_WHITESPACE","\n    ",267],["T_FOREACH","foreach",268],["T_WHITESPACE"," ",268],"(",["T_VARIABLE","$dependencies",268],["T_WHITESPACE"," ",268],["T_AS","as",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$config_name",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$dependency",268],")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n      ",268],["T_COMMENT","\/\/ Group by entity type to efficient load entities using\n",269],["T_WHITESPACE","      ",270],["T_COMMENT","\/\/ \\Drupal\\Core\\Entity\\EntityStorageInterface::loadMultiple().\n",270],["T_WHITESPACE","      ",271],["T_VARIABLE","$entity_type_id",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getEntityTypeIdByName",271],"(",["T_VARIABLE","$config_name",271],")",";",["T_WHITESPACE","\n      ",271],["T_COMMENT","\/\/ It is possible that a non-configuration entity will be returned if a\n",272],["T_WHITESPACE","      ",273],["T_COMMENT","\/\/ simple configuration object has a UUID key. This would occur if the\n",273],["T_WHITESPACE","      ",274],["T_COMMENT","\/\/ dependents of the system module are calculated since system.site has\n",274],["T_WHITESPACE","      ",275],["T_COMMENT","\/\/ a UUID key.\n",275],["T_WHITESPACE","      ",276],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$entity_type_id",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n        ",276],["T_VARIABLE","$id",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","substr",277],"(",["T_VARIABLE","$config_name",277],",",["T_WHITESPACE"," ",277],["T_STRING","strlen",277],"(",["T_VARIABLE","$definitions",277],"[",["T_VARIABLE","$entity_type_id",277],"]",["T_OBJECT_OPERATOR","->",277],["T_STRING","getConfigPrefix",277],"(",")",")",["T_WHITESPACE"," ",277],"+",["T_WHITESPACE"," ",277],["T_LNUMBER","1",277],")",";",["T_WHITESPACE","\n        ",277],["T_VARIABLE","$entities",278],"[",["T_VARIABLE","$entity_type_id",278],"]","[","]",["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_VARIABLE","$id",278],";",["T_WHITESPACE","\n      ",278],"}",["T_WHITESPACE","\n    ",279],"}",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$entities_to_return",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_ARRAY","array",281],"(",")",";",["T_WHITESPACE","\n    ",281],["T_FOREACH","foreach",282],["T_WHITESPACE"," ",282],"(",["T_VARIABLE","$entities",282],["T_WHITESPACE"," ",282],["T_AS","as",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$entity_type_id",282],["T_WHITESPACE"," ",282],["T_DOUBLE_ARROW","=>",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$entities_to_load",282],")",["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n      ",282],["T_VARIABLE","$storage",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","entityManager",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getStorage",283],"(",["T_VARIABLE","$entity_type_id",283],")",";",["T_WHITESPACE","\n      ",283],["T_COMMENT","\/\/ Remove the keys since there are potential ID clashes from different\n",284],["T_WHITESPACE","      ",285],["T_COMMENT","\/\/ configuration entity types.\n",285],["T_WHITESPACE","      ",286],["T_VARIABLE","$entities_to_return",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_STRING","array_merge",286],"(",["T_VARIABLE","$entities_to_return",286],",",["T_WHITESPACE"," ",286],["T_STRING","array_values",286],"(",["T_VARIABLE","$storage",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","loadMultiple",286],"(",["T_VARIABLE","$entities_to_load",286],")",")",")",";",["T_WHITESPACE","\n    ",286],"}",["T_WHITESPACE","\n    ",287],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$entities_to_return",288],";",["T_WHITESPACE","\n  ",288],"}",["T_WHITESPACE","\n\n  ",289],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",291],["T_WHITESPACE","\n  ",293],["T_PUBLIC","public",294],["T_WHITESPACE"," ",294],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","getConfigEntitiesToChangeOnDependencyRemoval",294],"(",["T_VARIABLE","$type",294],",",["T_WHITESPACE"," ",294],["T_ARRAY","array",294],["T_WHITESPACE"," ",294],["T_VARIABLE","$names",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$dry_run",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","TRUE",294],")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n    ",294],["T_COMMENT","\/\/ Determine the current list of dependent configuration entities and set up\n",295],["T_WHITESPACE","    ",296],["T_COMMENT","\/\/ initial values.\n",296],["T_WHITESPACE","    ",297],["T_VARIABLE","$dependency_manager",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getConfigDependencyManager",297],"(",")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$dependents",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","findConfigEntityDependentsAsEntities",298],"(",["T_VARIABLE","$type",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$names",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$dependency_manager",298],")",";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$original_dependencies",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$dependents",299],";",["T_WHITESPACE","\n    ",299],["T_VARIABLE","$delete_uuids",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],"[","]",";",["T_WHITESPACE","\n\n    ",300],["T_VARIABLE","$return",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],"[",["T_WHITESPACE","\n      ",302],["T_CONSTANT_ENCAPSED_STRING","'update'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],"[","]",",",["T_WHITESPACE","\n      ",303],["T_CONSTANT_ENCAPSED_STRING","'delete'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],"[","]",",",["T_WHITESPACE","\n      ",304],["T_CONSTANT_ENCAPSED_STRING","'unchanged'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],"[","]",",",["T_WHITESPACE","\n    ",305],"]",";",["T_WHITESPACE","\n\n    ",306],["T_COMMENT","\/\/ Create a map of UUIDs to $original_dependencies key so that we can remove\n",308],["T_WHITESPACE","    ",309],["T_COMMENT","\/\/ fixed dependencies.\n",309],["T_WHITESPACE","    ",310],["T_VARIABLE","$uuid_map",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],"[","]",";",["T_WHITESPACE","\n    ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$original_dependencies",311],["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$key",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$entity",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n      ",311],["T_VARIABLE","$uuid_map",312],"[",["T_VARIABLE","$entity",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","uuid",312],"(",")","]",["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$key",312],";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_COMMENT","\/\/ Try to fix any dependencies and find out what will happen to the\n",315],["T_WHITESPACE","    ",316],["T_COMMENT","\/\/ dependency graph. Entities are processed in the order of most dependent\n",316],["T_WHITESPACE","    ",317],["T_COMMENT","\/\/ first. For example, this ensures that Menu UI third party dependencies on\n",317],["T_WHITESPACE","    ",318],["T_COMMENT","\/\/ node types are fixed before processing the node type's other\n",318],["T_WHITESPACE","    ",319],["T_COMMENT","\/\/ dependencies.\n",319],["T_WHITESPACE","    ",320],["T_WHILE","while",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$dependent",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","array_pop",320],"(",["T_VARIABLE","$dependents",320],")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n      ",320],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface $dependent *\/",321],["T_WHITESPACE","\n      ",321],["T_IF","if",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$dry_run",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n        ",322],["T_COMMENT","\/\/ Clone the entity so any changes do not change any static caches.\n",323],["T_WHITESPACE","        ",324],["T_VARIABLE","$dependent",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_CLONE","clone",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$dependent",324],";",["T_WHITESPACE","\n      ",324],"}",["T_WHITESPACE","\n      ",325],["T_VARIABLE","$fixed",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_STRING","FALSE",326],";",["T_WHITESPACE","\n      ",326],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","callOnDependencyRemoval",327],"(",["T_VARIABLE","$dependent",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$original_dependencies",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$type",327],",",["T_WHITESPACE"," ",327],["T_VARIABLE","$names",327],")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n        ",327],["T_COMMENT","\/\/ Recalculate dependencies and update the dependency graph data.\n",328],["T_WHITESPACE","        ",329],["T_VARIABLE","$dependent",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","calculateDependencies",329],"(",")",";",["T_WHITESPACE","\n        ",329],["T_VARIABLE","$dependency_manager",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","updateData",330],"(",["T_VARIABLE","$dependent",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getConfigDependencyName",330],"(",")",",",["T_WHITESPACE"," ",330],["T_VARIABLE","$dependent",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","getDependencies",330],"(",")",")",";",["T_WHITESPACE","\n        ",330],["T_COMMENT","\/\/ Based on the updated data rebuild the list of dependents. This will\n",331],["T_WHITESPACE","        ",332],["T_COMMENT","\/\/ remove entities that are no longer dependent after the recalculation.\n",332],["T_WHITESPACE","        ",333],["T_VARIABLE","$dependents",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","findConfigEntityDependentsAsEntities",333],"(",["T_VARIABLE","$type",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$names",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$dependency_manager",333],")",";",["T_WHITESPACE","\n        ",333],["T_COMMENT","\/\/ Remove any entities that we've already marked for deletion.\n",334],["T_WHITESPACE","        ",335],["T_VARIABLE","$dependents",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","array_filter",335],"(",["T_VARIABLE","$dependents",335],",",["T_WHITESPACE"," ",335],["T_FUNCTION","function",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$dependent",335],")",["T_WHITESPACE"," ",335],["T_USE","use",335],["T_WHITESPACE"," ",335],"(",["T_VARIABLE","$delete_uuids",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n          ",335],["T_RETURN","return",336],["T_WHITESPACE"," ",336],"!",["T_STRING","in_array",336],"(",["T_VARIABLE","$dependent",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","uuid",336],"(",")",",",["T_WHITESPACE"," ",336],["T_VARIABLE","$delete_uuids",336],")",";",["T_WHITESPACE","\n        ",336],"}",")",";",["T_WHITESPACE","\n        ",337],["T_COMMENT","\/\/ Ensure that the dependency has actually been fixed. It is possible\n",338],["T_WHITESPACE","        ",339],["T_COMMENT","\/\/ that the dependent has multiple dependencies that cause it to be in\n",339],["T_WHITESPACE","        ",340],["T_COMMENT","\/\/ the dependency chain.\n",340],["T_WHITESPACE","        ",341],["T_VARIABLE","$fixed",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","TRUE",341],";",["T_WHITESPACE","\n        ",341],["T_FOREACH","foreach",342],["T_WHITESPACE"," ",342],"(",["T_VARIABLE","$dependents",342],["T_WHITESPACE"," ",342],["T_AS","as",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$key",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$entity",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n          ",342],["T_IF","if",343],["T_WHITESPACE"," ",343],"(",["T_VARIABLE","$entity",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","uuid",343],"(",")",["T_WHITESPACE"," ",343],["T_IS_EQUAL","==",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$dependent",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","uuid",343],"(",")",")",["T_WHITESPACE"," ",343],"{",["T_WHITESPACE","\n            ",343],["T_VARIABLE","$fixed",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_STRING","FALSE",344],";",["T_WHITESPACE","\n            ",344],["T_UNSET","unset",345],"(",["T_VARIABLE","$dependents",345],"[",["T_VARIABLE","$key",345],"]",")",";",["T_WHITESPACE","\n            ",345],["T_BREAK","break",346],";",["T_WHITESPACE","\n          ",346],"}",["T_WHITESPACE","\n        ",347],"}",["T_WHITESPACE","\n        ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$fixed",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n          ",349],["T_COMMENT","\/\/ Remove the fixed dependency from the list of original dependencies.\n",350],["T_WHITESPACE","          ",351],["T_UNSET","unset",351],"(",["T_VARIABLE","$original_dependencies",351],"[",["T_VARIABLE","$uuid_map",351],"[",["T_VARIABLE","$dependent",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","uuid",351],"(",")","]","]",")",";",["T_WHITESPACE","\n          ",351],["T_VARIABLE","$return",352],"[",["T_CONSTANT_ENCAPSED_STRING","'update'",352],"]","[","]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_VARIABLE","$dependent",352],";",["T_WHITESPACE","\n        ",352],"}",["T_WHITESPACE","\n      ",353],"}",["T_WHITESPACE","\n      ",354],["T_COMMENT","\/\/ If the entity cannot be fixed then it has to be deleted.\n",355],["T_WHITESPACE","      ",356],["T_IF","if",356],["T_WHITESPACE"," ",356],"(","!",["T_VARIABLE","$fixed",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n        ",356],["T_VARIABLE","$delete_uuids",357],"[","]",["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$dependent",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","uuid",357],"(",")",";",["T_WHITESPACE","\n        ",357],["T_COMMENT","\/\/ Deletes should occur in the order of the least dependent first. For\n",358],["T_WHITESPACE","        ",359],["T_COMMENT","\/\/ example, this ensures that fields are removed before field storages.\n",359],["T_WHITESPACE","        ",360],["T_STRING","array_unshift",360],"(",["T_VARIABLE","$return",360],"[",["T_CONSTANT_ENCAPSED_STRING","'delete'",360],"]",",",["T_WHITESPACE"," ",360],["T_VARIABLE","$dependent",360],")",";",["T_WHITESPACE","\n      ",360],"}",["T_WHITESPACE","\n    ",361],"}",["T_WHITESPACE","\n    ",362],["T_COMMENT","\/\/ Use the lists of UUIDs to filter the original list to work out which\n",363],["T_WHITESPACE","    ",364],["T_COMMENT","\/\/ configuration entities are unchanged.\n",364],["T_WHITESPACE","    ",365],["T_VARIABLE","$return",365],"[",["T_CONSTANT_ENCAPSED_STRING","'unchanged'",365],"]",["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","array_filter",365],"(",["T_VARIABLE","$original_dependencies",365],",",["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$dependent",365],")",["T_WHITESPACE"," ",365],["T_USE","use",365],["T_WHITESPACE"," ",365],"(",["T_VARIABLE","$delete_uuids",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n      ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],"!","(",["T_STRING","in_array",366],"(",["T_VARIABLE","$dependent",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","uuid",366],"(",")",",",["T_WHITESPACE"," ",366],["T_VARIABLE","$delete_uuids",366],")",")",";",["T_WHITESPACE","\n    ",366],"}",")",";",["T_WHITESPACE","\n\n    ",367],["T_RETURN","return",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$return",369],";",["T_WHITESPACE","\n  ",369],"}",["T_WHITESPACE","\n\n  ",370],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",372],["T_WHITESPACE","\n  ",374],["T_PUBLIC","public",375],["T_WHITESPACE"," ",375],["T_FUNCTION","function",375],["T_WHITESPACE"," ",375],["T_STRING","getConfigCollectionInfo",375],"(",")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n    ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(","!",["T_ISSET","isset",376],"(",["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","configCollectionInfo",376],")",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n      ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","configCollectionInfo",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_NEW","new",377],["T_WHITESPACE"," ",377],["T_STRING","ConfigCollectionInfo",377],"(",")",";",["T_WHITESPACE","\n      ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","eventDispatcher",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","dispatch",378],"(",["T_STRING","ConfigEvents",378],["T_DOUBLE_COLON","::",378],["T_STRING","COLLECTION_INFO",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","configCollectionInfo",378],")",";",["T_WHITESPACE","\n    ",378],"}",["T_WHITESPACE","\n    ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","configCollectionInfo",380],";",["T_WHITESPACE","\n  ",380],"}",["T_WHITESPACE","\n\n  ",381],["T_DOC_COMMENT","\/**\n   * Calls an entity's onDependencyRemoval() method.\n   *\n   * A helper method to call onDependencyRemoval() with the correct list of\n   * affected entities. This list should only contain dependencies on the\n   * entity. Configuration and content entity dependencies will be converted\n   * into entity objects.\n   *\n   * @param \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface $entity\n   *   The entity to call onDependencyRemoval() on.\n   * @param \\Drupal\\Core\\Config\\Entity\\ConfigEntityInterface[] $dependent_entities\n   *   The list of dependent configuration entities.\n   * @param string $type\n   *   The type of dependency being checked. Either 'module', 'theme', 'config'\n   *   or 'content'.\n   * @param array $names\n   *   The specific names to check. If $type equals 'module' or 'theme' then it\n   *   should be a list of module names or theme names. In the case of 'config'\n   *   or 'content' it should be a list of configuration dependency names.\n   *\n   * @return bool\n   *   TRUE if the entity has changed as a result of calling the\n   *   onDependencyRemoval() method, FALSE if not.\n   *\/",383],["T_WHITESPACE","\n  ",406],["T_PROTECTED","protected",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","callOnDependencyRemoval",407],"(",["T_STRING","ConfigEntityInterface",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$entity",407],",",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$dependent_entities",407],",",["T_WHITESPACE"," ",407],["T_VARIABLE","$type",407],",",["T_WHITESPACE"," ",407],["T_ARRAY","array",407],["T_WHITESPACE"," ",407],["T_VARIABLE","$names",407],")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$entity_dependencies",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$entity",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getDependencies",408],"(",")",";",["T_WHITESPACE","\n    ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_EMPTY","empty",409],"(",["T_VARIABLE","$entity_dependencies",409],")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n      ",409],["T_COMMENT","\/\/ No dependent entities nothing to do.\n",410],["T_WHITESPACE","      ",411],["T_RETURN","return",411],["T_WHITESPACE"," ",411],["T_STRING","FALSE",411],";",["T_WHITESPACE","\n    ",411],"}",["T_WHITESPACE","\n\n    ",412],["T_VARIABLE","$affected_dependencies",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",["T_WHITESPACE","\n      ",414],["T_CONSTANT_ENCAPSED_STRING","'config'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",")",",",["T_WHITESPACE","\n      ",415],["T_CONSTANT_ENCAPSED_STRING","'content'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",")",",",["T_WHITESPACE","\n      ",416],["T_CONSTANT_ENCAPSED_STRING","'module'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_ARRAY","array",417],"(",")",",",["T_WHITESPACE","\n      ",417],["T_CONSTANT_ENCAPSED_STRING","'theme'",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_ARRAY","array",418],"(",")",",",["T_WHITESPACE","\n    ",418],")",";",["T_WHITESPACE","\n\n    ",419],["T_COMMENT","\/\/ Work out if any of the entity's dependencies are going to be affected.\n",421],["T_WHITESPACE","    ",422],["T_IF","if",422],["T_WHITESPACE"," ",422],"(",["T_ISSET","isset",422],"(",["T_VARIABLE","$entity_dependencies",422],"[",["T_VARIABLE","$type",422],"]",")",")",["T_WHITESPACE"," ",422],"{",["T_WHITESPACE","\n      ",422],["T_COMMENT","\/\/ Work out which dependencies the entity has in common with the provided\n",423],["T_WHITESPACE","      ",424],["T_COMMENT","\/\/ $type and $names.\n",424],["T_WHITESPACE","      ",425],["T_VARIABLE","$affected_dependencies",425],"[",["T_VARIABLE","$type",425],"]",["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_STRING","array_intersect",425],"(",["T_VARIABLE","$entity_dependencies",425],"[",["T_VARIABLE","$type",425],"]",",",["T_WHITESPACE"," ",425],["T_VARIABLE","$names",425],")",";",["T_WHITESPACE","\n\n      ",425],["T_COMMENT","\/\/ If the dependencies are entities we need to convert them into objects.\n",427],["T_WHITESPACE","      ",428],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$type",428],["T_WHITESPACE"," ",428],["T_IS_EQUAL","==",428],["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'config'",428],["T_WHITESPACE"," ",428],["T_BOOLEAN_OR","||",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$type",428],["T_WHITESPACE"," ",428],["T_IS_EQUAL","==",428],["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'content'",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n        ",428],["T_VARIABLE","$affected_dependencies",429],"[",["T_VARIABLE","$type",429],"]",["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_STRING","array_map",429],"(",["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$name",429],")",["T_WHITESPACE"," ",429],["T_USE","use",429],["T_WHITESPACE"," ",429],"(",["T_VARIABLE","$type",429],")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n          ",429],["T_IF","if",430],["T_WHITESPACE"," ",430],"(",["T_VARIABLE","$type",430],["T_WHITESPACE"," ",430],["T_IS_EQUAL","==",430],["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'config'",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n            ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","loadConfigEntityByName",431],"(",["T_VARIABLE","$name",431],")",";",["T_WHITESPACE","\n          ",431],"}",["T_WHITESPACE","\n          ",432],["T_ELSE","else",433],["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n            ",433],["T_COMMENT","\/\/ Ignore the bundle.\n",434],["T_WHITESPACE","            ",435],["T_LIST","list",435],"(",["T_VARIABLE","$entity_type_id",435],",",",",["T_WHITESPACE"," ",435],["T_VARIABLE","$uuid",435],")",["T_WHITESPACE"," ",435],"=",["T_WHITESPACE"," ",435],["T_STRING","explode",435],"(",["T_CONSTANT_ENCAPSED_STRING","':'",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$name",435],")",";",["T_WHITESPACE","\n            ",435],["T_RETURN","return",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","entityManager",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","loadEntityByConfigTarget",436],"(",["T_VARIABLE","$entity_type_id",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$uuid",436],")",";",["T_WHITESPACE","\n          ",436],"}",["T_WHITESPACE","\n        ",437],"}",",",["T_WHITESPACE"," ",438],["T_VARIABLE","$affected_dependencies",438],"[",["T_VARIABLE","$type",438],"]",")",";",["T_WHITESPACE","\n      ",438],"}",["T_WHITESPACE","\n    ",439],"}",["T_WHITESPACE","\n\n    ",440],["T_COMMENT","\/\/ Merge any other configuration entities into the list of affected\n",442],["T_WHITESPACE","    ",443],["T_COMMENT","\/\/ dependencies if necessary.\n",443],["T_WHITESPACE","    ",444],["T_IF","if",444],["T_WHITESPACE"," ",444],"(",["T_ISSET","isset",444],"(",["T_VARIABLE","$entity_dependencies",444],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",444],"]",")",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n      ",444],["T_FOREACH","foreach",445],["T_WHITESPACE"," ",445],"(",["T_VARIABLE","$dependent_entities",445],["T_WHITESPACE"," ",445],["T_AS","as",445],["T_WHITESPACE"," ",445],["T_VARIABLE","$dependent_entity",445],")",["T_WHITESPACE"," ",445],"{",["T_WHITESPACE","\n        ",445],["T_IF","if",446],["T_WHITESPACE"," ",446],"(",["T_STRING","in_array",446],"(",["T_VARIABLE","$dependent_entity",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","getConfigDependencyName",446],"(",")",",",["T_WHITESPACE"," ",446],["T_VARIABLE","$entity_dependencies",446],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",446],"]",")",")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n          ",446],["T_VARIABLE","$affected_dependencies",447],"[",["T_CONSTANT_ENCAPSED_STRING","'config'",447],"]","[","]",["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$dependent_entity",447],";",["T_WHITESPACE","\n        ",447],"}",["T_WHITESPACE","\n      ",448],"}",["T_WHITESPACE","\n    ",449],"}",["T_WHITESPACE","\n\n    ",450],["T_COMMENT","\/\/ Key the entity arrays by config dependency name to make searching easy.\n",452],["T_WHITESPACE","    ",453],["T_FOREACH","foreach",453],["T_WHITESPACE"," ",453],"(","[",["T_CONSTANT_ENCAPSED_STRING","'config'",453],",",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'content'",453],"]",["T_WHITESPACE"," ",453],["T_AS","as",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$dependency_type",453],")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n      ",453],["T_VARIABLE","$affected_dependencies",454],"[",["T_VARIABLE","$dependency_type",454],"]",["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","array_combine",454],"(",["T_WHITESPACE","\n        ",454],["T_STRING","array_map",455],"(",["T_FUNCTION","function",455],["T_WHITESPACE"," ",455],"(",["T_VARIABLE","$entity",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE"," ",455],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$entity",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getConfigDependencyName",455],"(",")",";",["T_WHITESPACE"," ",455],"}",",",["T_WHITESPACE"," ",455],["T_VARIABLE","$affected_dependencies",455],"[",["T_VARIABLE","$dependency_type",455],"]",")",",",["T_WHITESPACE","\n        ",455],["T_VARIABLE","$affected_dependencies",456],"[",["T_VARIABLE","$dependency_type",456],"]",["T_WHITESPACE","\n      ",456],")",";",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n\n    ",458],["T_COMMENT","\/\/ Inform the entity.\n",460],["T_WHITESPACE","    ",461],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$entity",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","onDependencyRemoval",461],"(",["T_VARIABLE","$affected_dependencies",461],")",";",["T_WHITESPACE","\n  ",461],"}",["T_WHITESPACE","\n\n  ",462],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",464],["T_WHITESPACE","\n  ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","findMissingContentDependencies",467],"(",")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n    ",467],["T_VARIABLE","$content_dependencies",468],["T_WHITESPACE"," ",468],"=",["T_WHITESPACE"," ",468],["T_ARRAY","array",468],"(",")",";",["T_WHITESPACE","\n    ",468],["T_VARIABLE","$missing_dependencies",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_ARRAY","array",469],"(",")",";",["T_WHITESPACE","\n    ",469],["T_FOREACH","foreach",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","activeStorage",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","readMultiple",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","activeStorage",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","listAll",470],"(",")",")",["T_WHITESPACE"," ",470],["T_AS","as",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$config_data",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n      ",470],["T_IF","if",471],["T_WHITESPACE"," ",471],"(",["T_ISSET","isset",471],"(",["T_VARIABLE","$config_data",471],"[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",471],"]","[",["T_CONSTANT_ENCAPSED_STRING","'content'",471],"]",")",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n        ",471],["T_VARIABLE","$content_dependencies",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_STRING","array_merge",472],"(",["T_VARIABLE","$content_dependencies",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$config_data",472],"[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",472],"]","[",["T_CONSTANT_ENCAPSED_STRING","'content'",472],"]",")",";",["T_WHITESPACE","\n      ",472],"}",["T_WHITESPACE","\n      ",473],["T_IF","if",474],["T_WHITESPACE"," ",474],"(",["T_ISSET","isset",474],"(",["T_VARIABLE","$config_data",474],"[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",474],"]","[",["T_CONSTANT_ENCAPSED_STRING","'enforced'",474],"]","[",["T_CONSTANT_ENCAPSED_STRING","'content'",474],"]",")",")",["T_WHITESPACE"," ",474],"{",["T_WHITESPACE","\n        ",474],["T_VARIABLE","$content_dependencies",475],["T_WHITESPACE"," ",475],"=",["T_WHITESPACE"," ",475],["T_STRING","array_merge",475],"(",["T_VARIABLE","$content_dependencies",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$config_data",475],"[",["T_CONSTANT_ENCAPSED_STRING","'dependencies'",475],"]","[",["T_CONSTANT_ENCAPSED_STRING","'enforced'",475],"]","[",["T_CONSTANT_ENCAPSED_STRING","'content'",475],"]",")",";",["T_WHITESPACE","\n      ",475],"}",["T_WHITESPACE","\n    ",476],"}",["T_WHITESPACE","\n    ",477],["T_FOREACH","foreach",478],["T_WHITESPACE"," ",478],"(",["T_STRING","array_unique",478],"(",["T_VARIABLE","$content_dependencies",478],")",["T_WHITESPACE"," ",478],["T_AS","as",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$content_dependency",478],")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n      ",478],["T_COMMENT","\/\/ Format of the dependency is entity_type:bundle:uuid.\n",479],["T_WHITESPACE","      ",480],["T_LIST","list",480],"(",["T_VARIABLE","$entity_type",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$bundle",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$uuid",480],")",["T_WHITESPACE"," ",480],"=",["T_WHITESPACE"," ",480],["T_STRING","explode",480],"(",["T_CONSTANT_ENCAPSED_STRING","':'",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$content_dependency",480],",",["T_WHITESPACE"," ",480],["T_LNUMBER","3",480],")",";",["T_WHITESPACE","\n      ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(","!",["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","entityManager",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","loadEntityByUuid",481],"(",["T_VARIABLE","$entity_type",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$uuid",481],")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n        ",481],["T_VARIABLE","$missing_dependencies",482],"[",["T_VARIABLE","$uuid",482],"]",["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_ARRAY","array",482],"(",["T_WHITESPACE","\n          ",482],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$entity_type",483],",",["T_WHITESPACE","\n          ",483],["T_CONSTANT_ENCAPSED_STRING","'bundle'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$bundle",484],",",["T_WHITESPACE","\n          ",484],["T_CONSTANT_ENCAPSED_STRING","'uuid'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$uuid",485],",",["T_WHITESPACE","\n        ",485],")",";",["T_WHITESPACE","\n      ",486],"}",["T_WHITESPACE","\n    ",487],"}",["T_WHITESPACE","\n    ",488],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$missing_dependencies",489],";",["T_WHITESPACE","\n  ",489],"}",["T_WHITESPACE","\n\n",490],"}",["T_WHITESPACE","\n",492]]
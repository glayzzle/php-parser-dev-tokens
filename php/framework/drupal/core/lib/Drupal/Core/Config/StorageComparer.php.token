[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Config",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MemoryBackend",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigDependencyManager",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencySerializationTrait",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Defines a config storage comparer.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","StorageComparer",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","StorageComparerInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n  ",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","DependencySerializationTrait",13],";",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * The source storage used to discover configuration changes.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$sourceStorage",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The source storages keyed by collection.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface[]\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$sourceStorages",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The target storage used to write configuration changes.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$targetStorage",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The target storages keyed by collection.\n   *\n   * @var \\Drupal\\Core\\Config\\StorageInterface[]\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$targetStorages",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The configuration manager.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigManagerInterface\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$configManager",48],";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * List of changes to between the source storage and the target storage.\n   *\n   * The list is keyed by storage collection name.\n   *\n   * @var array\n   *\/",50],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$changelist",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Sorted list of all the configuration object names in the source storage.\n   *\n   * The list is keyed by storage collection name.\n   *\n   * @var array\n   *\/",59],["T_WHITESPACE","\n  ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$sourceNames",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Sorted list of all the configuration object names in the target storage.\n   *\n   * The list is keyed by storage collection name.\n   *\n   * @var array\n   *\/",68],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$targetNames",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",")",";",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * A memory cache backend to statically cache source configuration data.\n   *\n   * @var \\Drupal\\Core\\Cache\\MemoryBackend\n   *\/",77],["T_WHITESPACE","\n  ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$sourceCacheStorage",82],";",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * A memory cache backend to statically cache target configuration data.\n   *\n   * @var \\Drupal\\Core\\Cache\\MemoryBackend\n   *\/",84],["T_WHITESPACE","\n  ",88],["T_PROTECTED","protected",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$targetCacheStorage",89],";",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Constructs the Configuration storage comparer.\n   *\n   * @param \\Drupal\\Core\\Config\\StorageInterface $source_storage\n   *   Storage object used to read configuration.\n   * @param \\Drupal\\Core\\Config\\StorageInterface $target_storage\n   *   Storage object used to write configuration.\n   * @param \\Drupal\\Core\\Config\\ConfigManagerInterface $config_manager\n   *   The configuration manager.\n   *\/",91],["T_WHITESPACE","\n  ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",["T_STRING","StorageInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$source_storage",101],",",["T_WHITESPACE"," ",101],["T_STRING","StorageInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$target_storage",101],",",["T_WHITESPACE"," ",101],["T_STRING","ConfigManagerInterface",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$config_manager",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_COMMENT","\/\/ Wrap the storages in a static cache so that multiple reads of the same\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ raw configuration object are not costly.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","sourceCacheStorage",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_NEW","new",104],["T_WHITESPACE"," ",104],["T_STRING","MemoryBackend",104],"(",["T_CLASS_C","__CLASS__",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'::source'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","sourceStorage",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_NEW","new",105],["T_WHITESPACE"," ",105],["T_STRING","CachedStorage",105],"(",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$source_storage",106],",",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","sourceCacheStorage",107],["T_WHITESPACE","\n    ",107],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","targetCacheStorage",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_NEW","new",109],["T_WHITESPACE"," ",109],["T_STRING","MemoryBackend",109],"(",["T_CLASS_C","__CLASS__",109],["T_WHITESPACE"," ",109],".",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'::target'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","targetStorage",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_NEW","new",110],["T_WHITESPACE"," ",110],["T_STRING","CachedStorage",110],"(",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$target_storage",111],",",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","targetCacheStorage",112],["T_WHITESPACE","\n    ",112],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","configManager",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_VARIABLE","$config_manager",114],";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","changelist",115],"[",["T_STRING","StorageInterface",115],["T_DOUBLE_COLON","::",115],["T_STRING","DEFAULT_COLLECTION",115],"]",["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getEmptyChangelist",115],"(",")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",118],["T_WHITESPACE","\n  ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","getSourceStorage",121],"(",["T_VARIABLE","$collection",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","StorageInterface",121],["T_DOUBLE_COLON","::",121],["T_STRING","DEFAULT_COLLECTION",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(","!",["T_ISSET","isset",122],"(",["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","sourceStorages",122],"[",["T_VARIABLE","$collection",122],"]",")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n      ",122],["T_IF","if",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$collection",123],["T_WHITESPACE"," ",123],["T_IS_EQUAL","==",123],["T_WHITESPACE"," ",123],["T_STRING","StorageInterface",123],["T_DOUBLE_COLON","::",123],["T_STRING","DEFAULT_COLLECTION",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n        ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","sourceStorages",124],"[",["T_VARIABLE","$collection",124],"]",["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","sourceStorage",124],";",["T_WHITESPACE","\n      ",124],"}",["T_WHITESPACE","\n      ",125],["T_ELSE","else",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","sourceStorages",127],"[",["T_VARIABLE","$collection",127],"]",["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","sourceStorage",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","createCollection",127],"(",["T_VARIABLE","$collection",127],")",";",["T_WHITESPACE","\n      ",127],"}",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n    ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","sourceStorages",130],"[",["T_VARIABLE","$collection",130],"]",";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",133],["T_WHITESPACE","\n  ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","getTargetStorage",136],"(",["T_VARIABLE","$collection",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","StorageInterface",136],["T_DOUBLE_COLON","::",136],["T_STRING","DEFAULT_COLLECTION",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_ISSET","isset",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","targetStorages",137],"[",["T_VARIABLE","$collection",137],"]",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$collection",138],["T_WHITESPACE"," ",138],["T_IS_EQUAL","==",138],["T_WHITESPACE"," ",138],["T_STRING","StorageInterface",138],["T_DOUBLE_COLON","::",138],["T_STRING","DEFAULT_COLLECTION",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","targetStorages",139],"[",["T_VARIABLE","$collection",139],"]",["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","targetStorage",139],";",["T_WHITESPACE","\n      ",139],"}",["T_WHITESPACE","\n      ",140],["T_ELSE","else",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","targetStorages",142],"[",["T_VARIABLE","$collection",142],"]",["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","targetStorage",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","createCollection",142],"(",["T_VARIABLE","$collection",142],")",";",["T_WHITESPACE","\n      ",142],"}",["T_WHITESPACE","\n    ",143],"}",["T_WHITESPACE","\n    ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","targetStorages",145],"[",["T_VARIABLE","$collection",145],"]",";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n  ",146],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",148],["T_WHITESPACE","\n  ",150],["T_PUBLIC","public",151],["T_WHITESPACE"," ",151],["T_FUNCTION","function",151],["T_WHITESPACE"," ",151],["T_STRING","getEmptyChangelist",151],"(",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n    ",151],["T_RETURN","return",152],["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'create'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",")",",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'update'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",")",",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'delete'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",")",",",["T_WHITESPACE","\n      ",155],["T_CONSTANT_ENCAPSED_STRING","'rename'",156],["T_WHITESPACE"," ",156],["T_DOUBLE_ARROW","=>",156],["T_WHITESPACE"," ",156],["T_ARRAY","array",156],"(",")",",",["T_WHITESPACE","\n    ",156],")",";",["T_WHITESPACE","\n  ",157],"}",["T_WHITESPACE","\n\n  ",158],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",160],["T_WHITESPACE","\n  ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","getChangelist",163],"(",["T_VARIABLE","$op",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","NULL",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$collection",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","StorageInterface",163],["T_DOUBLE_COLON","::",163],["T_STRING","DEFAULT_COLLECTION",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n    ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$op",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_RETURN","return",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","changelist",165],"[",["T_VARIABLE","$collection",165],"]","[",["T_VARIABLE","$op",165],"]",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n    ",166],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","changelist",167],"[",["T_VARIABLE","$collection",167],"]",";",["T_WHITESPACE","\n  ",167],"}",["T_WHITESPACE","\n\n  ",168],["T_DOC_COMMENT","\/**\n   * Adds changes to the changelist.\n   *\n   * @param string $collection\n   *   The storage collection to add changes for.\n   * @param string $op\n   *   The change operation performed. Either delete, create, rename, or update.\n   * @param array $changes\n   *   Array of changes to add to the changelist.\n   * @param array $sort_order\n   *   Array to sort that can be used to sort the changelist. This array must\n   *   contain all the items that are in the change list.\n   *\/",170],["T_WHITESPACE","\n  ",182],["T_PROTECTED","protected",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","addChangeList",183],"(",["T_VARIABLE","$collection",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$op",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$changes",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$sort_order",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_STRING","NULL",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n    ",183],["T_COMMENT","\/\/ Only add changes that aren't already listed.\n",184],["T_WHITESPACE","    ",185],["T_VARIABLE","$changes",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_STRING","array_diff",185],"(",["T_VARIABLE","$changes",185],",",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","changelist",185],"[",["T_VARIABLE","$collection",185],"]","[",["T_VARIABLE","$op",185],"]",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","changelist",186],"[",["T_VARIABLE","$collection",186],"]","[",["T_VARIABLE","$op",186],"]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_STRING","array_merge",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","changelist",186],"[",["T_VARIABLE","$collection",186],"]","[",["T_VARIABLE","$op",186],"]",",",["T_WHITESPACE"," ",186],["T_VARIABLE","$changes",186],")",";",["T_WHITESPACE","\n    ",186],["T_IF","if",187],["T_WHITESPACE"," ",187],"(",["T_ISSET","isset",187],"(",["T_VARIABLE","$sort_order",187],")",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n      ",187],["T_VARIABLE","$count",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","count",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","changelist",188],"[",["T_VARIABLE","$collection",188],"]","[",["T_VARIABLE","$op",188],"]",")",";",["T_WHITESPACE","\n      ",188],["T_COMMENT","\/\/ Sort the changelist in the same order as the $sort_order array and\n",189],["T_WHITESPACE","      ",190],["T_COMMENT","\/\/ ensure the array is keyed from 0.\n",190],["T_WHITESPACE","      ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","changelist",191],"[",["T_VARIABLE","$collection",191],"]","[",["T_VARIABLE","$op",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","array_values",191],"(",["T_STRING","array_intersect",191],"(",["T_VARIABLE","$sort_order",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","changelist",191],"[",["T_VARIABLE","$collection",191],"]","[",["T_VARIABLE","$op",191],"]",")",")",";",["T_WHITESPACE","\n      ",191],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$count",192],["T_WHITESPACE"," ",192],["T_IS_NOT_EQUAL","!=",192],["T_WHITESPACE"," ",192],["T_STRING","count",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","changelist",192],"[",["T_VARIABLE","$collection",192],"]","[",["T_VARIABLE","$op",192],"]",")",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n        ",192],["T_THROW","throw",193],["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_NS_SEPARATOR","\\",193],["T_STRING","InvalidArgumentException",193],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Sorting the ",193],["T_VARIABLE","$op",193],["T_ENCAPSED_AND_WHITESPACE"," changelist should not change its length.",193],"\"",")",";",["T_WHITESPACE","\n      ",193],"}",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n  ",195],"}",["T_WHITESPACE","\n\n  ",196],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",198],["T_WHITESPACE","\n  ",200],["T_PUBLIC","public",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","createChangelist",201],"(",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n    ",201],["T_FOREACH","foreach",202],["T_WHITESPACE"," ",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getAllCollectionNames",202],"(",")",["T_WHITESPACE"," ",202],["T_AS","as",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$collection",202],")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n      ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","changelist",203],"[",["T_VARIABLE","$collection",203],"]",["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getEmptyChangelist",203],"(",")",";",["T_WHITESPACE","\n      ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","getAndSortConfigData",204],"(",["T_VARIABLE","$collection",204],")",";",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","addChangelistCreate",205],"(",["T_VARIABLE","$collection",205],")",";",["T_WHITESPACE","\n      ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","addChangelistUpdate",206],"(",["T_VARIABLE","$collection",206],")",";",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","addChangelistDelete",207],"(",["T_VARIABLE","$collection",207],")",";",["T_WHITESPACE","\n      ",207],["T_COMMENT","\/\/ Only collections that support configuration entities can have renames.\n",208],["T_WHITESPACE","      ",209],["T_IF","if",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$collection",209],["T_WHITESPACE"," ",209],["T_IS_EQUAL","==",209],["T_WHITESPACE"," ",209],["T_STRING","StorageInterface",209],["T_DOUBLE_COLON","::",209],["T_STRING","DEFAULT_COLLECTION",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","addChangelistRename",210],"(",["T_VARIABLE","$collection",210],")",";",["T_WHITESPACE","\n      ",210],"}",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n    ",212],["T_RETURN","return",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$this",213],";",["T_WHITESPACE","\n  ",213],"}",["T_WHITESPACE","\n\n  ",214],["T_DOC_COMMENT","\/**\n   * Creates the delete changelist.\n   *\n   * The list of deletes is sorted so that dependencies are deleted after\n   * configuration entities that depend on them. For example, fields should be\n   * deleted after field storages.\n   *\n   * @param string $collection\n   *   The storage collection to operate on.\n   *\/",216],["T_WHITESPACE","\n  ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","addChangelistDelete",226],"(",["T_VARIABLE","$collection",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$deletes",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_STRING","array_diff",227],"(",["T_STRING","array_reverse",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","targetNames",227],"[",["T_VARIABLE","$collection",227],"]",")",",",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","sourceNames",227],"[",["T_VARIABLE","$collection",227],"]",")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","addChangeList",228],"(",["T_VARIABLE","$collection",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'delete'",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$deletes",228],")",";",["T_WHITESPACE","\n  ",228],"}",["T_WHITESPACE","\n\n  ",229],["T_DOC_COMMENT","\/**\n   * Creates the create changelist.\n   *\n   * The list of creates is sorted so that dependencies are created before\n   * configuration entities that depend on them. For example, field storages\n   * should be created before fields.\n   *\n   * @param string $collection\n   *   The storage collection to operate on.\n   *\/",231],["T_WHITESPACE","\n  ",240],["T_PROTECTED","protected",241],["T_WHITESPACE"," ",241],["T_FUNCTION","function",241],["T_WHITESPACE"," ",241],["T_STRING","addChangelistCreate",241],"(",["T_VARIABLE","$collection",241],")",["T_WHITESPACE"," ",241],"{",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$creates",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_STRING","array_diff",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","sourceNames",242],"[",["T_VARIABLE","$collection",242],"]",",",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","targetNames",242],"[",["T_VARIABLE","$collection",242],"]",")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","addChangeList",243],"(",["T_VARIABLE","$collection",243],",",["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'create'",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$creates",243],")",";",["T_WHITESPACE","\n  ",243],"}",["T_WHITESPACE","\n\n  ",244],["T_DOC_COMMENT","\/**\n   * Creates the update changelist.\n   *\n   * The list of updates is sorted so that dependencies are created before\n   * configuration entities that depend on them. For example, field storages\n   * should be updated before fields.\n   *\n   * @param string $collection\n   *   The storage collection to operate on.\n   *\/",246],["T_WHITESPACE","\n  ",255],["T_PROTECTED","protected",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","addChangelistUpdate",256],"(",["T_VARIABLE","$collection",256],")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$recreates",257],["T_WHITESPACE"," ",257],"=",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",")",";",["T_WHITESPACE","\n    ",257],["T_FOREACH","foreach",258],["T_WHITESPACE"," ",258],"(",["T_STRING","array_intersect",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","sourceNames",258],"[",["T_VARIABLE","$collection",258],"]",",",["T_WHITESPACE"," ",258],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","targetNames",258],"[",["T_VARIABLE","$collection",258],"]",")",["T_WHITESPACE"," ",258],["T_AS","as",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$name",258],")",["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n      ",258],["T_VARIABLE","$source_data",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getSourceStorage",259],"(",["T_VARIABLE","$collection",259],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","read",259],"(",["T_VARIABLE","$name",259],")",";",["T_WHITESPACE","\n      ",259],["T_VARIABLE","$target_data",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getTargetStorage",260],"(",["T_VARIABLE","$collection",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","read",260],"(",["T_VARIABLE","$name",260],")",";",["T_WHITESPACE","\n      ",260],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_VARIABLE","$source_data",261],["T_WHITESPACE"," ",261],["T_IS_NOT_IDENTICAL","!==",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$target_data",261],")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_ISSET","isset",262],"(",["T_VARIABLE","$source_data",262],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",262],"]",")",["T_WHITESPACE"," ",262],["T_BOOLEAN_AND","&&",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$source_data",262],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",262],"]",["T_WHITESPACE"," ",262],["T_IS_NOT_IDENTICAL","!==",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$target_data",262],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",262],"]",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n          ",262],["T_COMMENT","\/\/ The entity has the same file as an existing entity but the UUIDs do\n",263],["T_WHITESPACE","          ",264],["T_COMMENT","\/\/ not match. This means that the entity has been recreated so config\n",264],["T_WHITESPACE","          ",265],["T_COMMENT","\/\/ synchronization should do the same.\n",265],["T_WHITESPACE","          ",266],["T_VARIABLE","$recreates",266],"[","]",["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],["T_VARIABLE","$name",266],";",["T_WHITESPACE","\n        ",266],"}",["T_WHITESPACE","\n        ",267],["T_ELSE","else",268],["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n          ",268],["T_VARIABLE","$this",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","addChangeList",269],"(",["T_VARIABLE","$collection",269],",",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'update'",269],",",["T_WHITESPACE"," ",269],["T_ARRAY","array",269],"(",["T_VARIABLE","$name",269],")",")",";",["T_WHITESPACE","\n        ",269],"}",["T_WHITESPACE","\n      ",270],"}",["T_WHITESPACE","\n    ",271],"}",["T_WHITESPACE","\n\n    ",272],["T_IF","if",274],["T_WHITESPACE"," ",274],"(","!",["T_EMPTY","empty",274],"(",["T_VARIABLE","$recreates",274],")",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n      ",274],["T_COMMENT","\/\/ Recreates should become deletes and creates. Deletes should be ordered\n",275],["T_WHITESPACE","      ",276],["T_COMMENT","\/\/ so that dependencies are deleted first.\n",276],["T_WHITESPACE","      ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","addChangeList",277],"(",["T_VARIABLE","$collection",277],",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'create'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$recreates",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","sourceNames",277],"[",["T_VARIABLE","$collection",277],"]",")",";",["T_WHITESPACE","\n      ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","addChangeList",278],"(",["T_VARIABLE","$collection",278],",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'delete'",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$recreates",278],",",["T_WHITESPACE"," ",278],["T_STRING","array_reverse",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","targetNames",278],"[",["T_VARIABLE","$collection",278],"]",")",")",";",["T_WHITESPACE","\n\n    ",278],"}",["T_WHITESPACE","\n  ",280],"}",["T_WHITESPACE","\n\n  ",281],["T_DOC_COMMENT","\/**\n   * Creates the rename changelist.\n   *\n   * The list of renames is created from the different source and target names\n   * with same UUID. These changes will be removed from the create and delete\n   * lists.\n   *\n   * @param string $collection\n   *   The storage collection to operate on.\n   *\/",283],["T_WHITESPACE","\n  ",292],["T_PROTECTED","protected",293],["T_WHITESPACE"," ",293],["T_FUNCTION","function",293],["T_WHITESPACE"," ",293],["T_STRING","addChangelistRename",293],"(",["T_VARIABLE","$collection",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n    ",293],["T_COMMENT","\/\/ Renames will be present in both the create and delete lists.\n",294],["T_WHITESPACE","    ",295],["T_VARIABLE","$create_list",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","getChangelist",295],"(",["T_CONSTANT_ENCAPSED_STRING","'create'",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$collection",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$delete_list",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","getChangelist",296],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",296],",",["T_WHITESPACE"," ",296],["T_VARIABLE","$collection",296],")",";",["T_WHITESPACE","\n    ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(",["T_EMPTY","empty",297],"(",["T_VARIABLE","$create_list",297],")",["T_WHITESPACE"," ",297],["T_BOOLEAN_OR","||",297],["T_WHITESPACE"," ",297],["T_EMPTY","empty",297],"(",["T_VARIABLE","$delete_list",297],")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n      ",297],["T_RETURN","return",298],";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n\n    ",299],["T_VARIABLE","$create_uuids",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",")",";",["T_WHITESPACE","\n    ",301],["T_FOREACH","foreach",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","sourceNames",302],"[",["T_VARIABLE","$collection",302],"]",["T_WHITESPACE"," ",302],["T_AS","as",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$name",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n      ",302],["T_VARIABLE","$data",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","getSourceStorage",303],"(",["T_VARIABLE","$collection",303],")",["T_OBJECT_OPERATOR","->",303],["T_STRING","read",303],"(",["T_VARIABLE","$name",303],")",";",["T_WHITESPACE","\n      ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_ISSET","isset",304],"(",["T_VARIABLE","$data",304],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",304],"]",")",["T_WHITESPACE"," ",304],["T_BOOLEAN_AND","&&",304],["T_WHITESPACE"," ",304],["T_STRING","in_array",304],"(",["T_VARIABLE","$name",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$create_list",304],")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n        ",304],["T_VARIABLE","$create_uuids",305],"[",["T_VARIABLE","$data",305],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",305],"]","]",["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$name",305],";",["T_WHITESPACE","\n      ",305],"}",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n    ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(",["T_EMPTY","empty",308],"(",["T_VARIABLE","$create_uuids",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n      ",308],["T_RETURN","return",309],";",["T_WHITESPACE","\n    ",309],"}",["T_WHITESPACE","\n\n    ",310],["T_VARIABLE","$renames",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",")",";",["T_WHITESPACE","\n\n    ",312],["T_COMMENT","\/\/ Renames should be ordered so that dependencies are renamed last. This\n",314],["T_WHITESPACE","    ",315],["T_COMMENT","\/\/ ensures that if there is logic in the configuration entity class to keep\n",315],["T_WHITESPACE","    ",316],["T_COMMENT","\/\/ names in sync it will still work. $this->targetNames is in the desired\n",316],["T_WHITESPACE","    ",317],["T_COMMENT","\/\/ order due to the use of configuration dependencies in\n",317],["T_WHITESPACE","    ",318],["T_COMMENT","\/\/ \\Drupal\\Core\\Config\\StorageComparer::getAndSortConfigData().\n",318],["T_WHITESPACE","    ",319],["T_COMMENT","\/\/ Node type is a good example of a configuration entity that renames other\n",319],["T_WHITESPACE","    ",320],["T_COMMENT","\/\/ configuration when it is renamed.\n",320],["T_WHITESPACE","    ",321],["T_COMMENT","\/\/ @see \\Drupal\\node\\Entity\\NodeType::postSave()\n",321],["T_WHITESPACE","    ",322],["T_FOREACH","foreach",322],["T_WHITESPACE"," ",322],"(",["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","targetNames",322],"[",["T_VARIABLE","$collection",322],"]",["T_WHITESPACE"," ",322],["T_AS","as",322],["T_WHITESPACE"," ",322],["T_VARIABLE","$name",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n      ",322],["T_VARIABLE","$data",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","getTargetStorage",323],"(",["T_VARIABLE","$collection",323],")",["T_OBJECT_OPERATOR","->",323],["T_STRING","read",323],"(",["T_VARIABLE","$name",323],")",";",["T_WHITESPACE","\n      ",323],["T_IF","if",324],["T_WHITESPACE"," ",324],"(",["T_ISSET","isset",324],"(",["T_VARIABLE","$data",324],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",324],"]",")",["T_WHITESPACE"," ",324],["T_BOOLEAN_AND","&&",324],["T_WHITESPACE"," ",324],["T_ISSET","isset",324],"(",["T_VARIABLE","$create_uuids",324],"[",["T_VARIABLE","$data",324],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",324],"]","]",")",")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n        ",324],["T_COMMENT","\/\/ Remove the item from the create list.\n",325],["T_WHITESPACE","        ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","removeFromChangelist",326],"(",["T_VARIABLE","$collection",326],",",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'create'",326],",",["T_WHITESPACE"," ",326],["T_VARIABLE","$create_uuids",326],"[",["T_VARIABLE","$data",326],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",326],"]","]",")",";",["T_WHITESPACE","\n        ",326],["T_COMMENT","\/\/ Remove the item from the delete list.\n",327],["T_WHITESPACE","        ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","removeFromChangelist",328],"(",["T_VARIABLE","$collection",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'delete'",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$name",328],")",";",["T_WHITESPACE","\n        ",328],["T_COMMENT","\/\/ Create the rename name.\n",329],["T_WHITESPACE","        ",330],["T_VARIABLE","$renames",330],"[","]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_VARIABLE","$this",330],["T_OBJECT_OPERATOR","->",330],["T_STRING","createRenameName",330],"(",["T_VARIABLE","$name",330],",",["T_WHITESPACE"," ",330],["T_VARIABLE","$create_uuids",330],"[",["T_VARIABLE","$data",330],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",330],"]","]",")",";",["T_WHITESPACE","\n      ",330],"}",["T_WHITESPACE","\n    ",331],"}",["T_WHITESPACE","\n\n    ",332],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","addChangeList",334],"(",["T_VARIABLE","$collection",334],",",["T_WHITESPACE"," ",334],["T_CONSTANT_ENCAPSED_STRING","'rename'",334],",",["T_WHITESPACE"," ",334],["T_VARIABLE","$renames",334],")",";",["T_WHITESPACE","\n  ",334],"}",["T_WHITESPACE","\n\n  ",335],["T_DOC_COMMENT","\/**\n   * Removes the entry from the given operation changelist for the given name.\n   *\n   * @param string $collection\n   *   The storage collection to operate on.\n   * @param string $op\n   *   The changelist to act on. Either delete, create, rename or update.\n   * @param string $name\n   *   The name of the configuration to remove.\n   *\/",337],["T_WHITESPACE","\n  ",346],["T_PROTECTED","protected",347],["T_WHITESPACE"," ",347],["T_FUNCTION","function",347],["T_WHITESPACE"," ",347],["T_STRING","removeFromChangelist",347],"(",["T_VARIABLE","$collection",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$op",347],",",["T_WHITESPACE"," ",347],["T_VARIABLE","$name",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$key",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","array_search",348],"(",["T_VARIABLE","$name",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","changelist",348],"[",["T_VARIABLE","$collection",348],"]","[",["T_VARIABLE","$op",348],"]",")",";",["T_WHITESPACE","\n    ",348],["T_IF","if",349],["T_WHITESPACE"," ",349],"(",["T_VARIABLE","$key",349],["T_WHITESPACE"," ",349],["T_IS_NOT_IDENTICAL","!==",349],["T_WHITESPACE"," ",349],["T_STRING","FALSE",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n      ",349],["T_UNSET","unset",350],"(",["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","changelist",350],"[",["T_VARIABLE","$collection",350],"]","[",["T_VARIABLE","$op",350],"]","[",["T_VARIABLE","$key",350],"]",")",";",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n  ",351],"}",["T_WHITESPACE","\n\n  ",352],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",354],["T_WHITESPACE","\n  ",356],["T_PUBLIC","public",357],["T_WHITESPACE"," ",357],["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],["T_STRING","moveRenameToUpdate",357],"(",["T_VARIABLE","$rename",357],",",["T_WHITESPACE"," ",357],["T_VARIABLE","$collection",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","StorageInterface",357],["T_DOUBLE_COLON","::",357],["T_STRING","DEFAULT_COLLECTION",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$names",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","extractRenameNames",358],"(",["T_VARIABLE","$rename",358],")",";",["T_WHITESPACE","\n    ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","removeFromChangelist",359],"(",["T_VARIABLE","$collection",359],",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'rename'",359],",",["T_WHITESPACE"," ",359],["T_VARIABLE","$rename",359],")",";",["T_WHITESPACE","\n    ",359],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","addChangeList",360],"(",["T_VARIABLE","$collection",360],",",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'update'",360],",",["T_WHITESPACE"," ",360],["T_ARRAY","array",360],"(",["T_VARIABLE","$names",360],"[",["T_CONSTANT_ENCAPSED_STRING","'new_name'",360],"]",")",",",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","sourceNames",360],"[",["T_VARIABLE","$collection",360],"]",")",";",["T_WHITESPACE","\n  ",360],"}",["T_WHITESPACE","\n\n  ",361],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",363],["T_WHITESPACE","\n  ",365],["T_PUBLIC","public",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","reset",366],"(",")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","changelist",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",["T_STRING","StorageInterface",367],["T_DOUBLE_COLON","::",367],["T_STRING","DEFAULT_COLLECTION",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getEmptyChangelist",367],"(",")",")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","sourceNames",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","targetNames",368],["T_WHITESPACE"," ",368],"=",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",")",";",["T_WHITESPACE","\n    ",368],["T_COMMENT","\/\/ Reset the static configuration data caches.\n",369],["T_WHITESPACE","    ",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","sourceCacheStorage",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","deleteAll",370],"(",")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","targetCacheStorage",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","deleteAll",371],"(",")",";",["T_WHITESPACE","\n    ",371],["T_RETURN","return",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","createChangelist",372],"(",")",";",["T_WHITESPACE","\n  ",372],"}",["T_WHITESPACE","\n\n  ",373],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",375],["T_WHITESPACE","\n  ",377],["T_PUBLIC","public",378],["T_WHITESPACE"," ",378],["T_FUNCTION","function",378],["T_WHITESPACE"," ",378],["T_STRING","hasChanges",378],"(",")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n    ",378],["T_FOREACH","foreach",379],["T_WHITESPACE"," ",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getAllCollectionNames",379],"(",")",["T_WHITESPACE"," ",379],["T_AS","as",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$collection",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n      ",379],["T_FOREACH","foreach",380],["T_WHITESPACE"," ",380],"(",["T_ARRAY","array",380],"(",["T_CONSTANT_ENCAPSED_STRING","'delete'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'create'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'update'",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'rename'",380],")",["T_WHITESPACE"," ",380],["T_AS","as",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$op",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n        ",380],["T_IF","if",381],["T_WHITESPACE"," ",381],"(","!",["T_EMPTY","empty",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","changelist",381],"[",["T_VARIABLE","$collection",381],"]","[",["T_VARIABLE","$op",381],"]",")",")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n          ",381],["T_RETURN","return",382],["T_WHITESPACE"," ",382],["T_STRING","TRUE",382],";",["T_WHITESPACE","\n        ",382],"}",["T_WHITESPACE","\n      ",383],"}",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n    ",385],["T_RETURN","return",386],["T_WHITESPACE"," ",386],["T_STRING","FALSE",386],";",["T_WHITESPACE","\n  ",386],"}",["T_WHITESPACE","\n\n  ",387],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",389],["T_WHITESPACE","\n  ",391],["T_PUBLIC","public",392],["T_WHITESPACE"," ",392],["T_FUNCTION","function",392],["T_WHITESPACE"," ",392],["T_STRING","validateSiteUuid",392],"(",")",["T_WHITESPACE"," ",392],"{",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$source",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","sourceStorage",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","read",393],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",393],")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$target",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","targetStorage",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","read",394],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",394],")",";",["T_WHITESPACE","\n    ",394],["T_RETURN","return",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$source",395],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",395],"]",["T_WHITESPACE"," ",395],["T_IS_IDENTICAL","===",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$target",395],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",395],"]",";",["T_WHITESPACE","\n  ",395],"}",["T_WHITESPACE","\n\n  ",396],["T_DOC_COMMENT","\/**\n   * Gets and sorts configuration data from the source and target storages.\n   *\/",398],["T_WHITESPACE","\n  ",400],["T_PROTECTED","protected",401],["T_WHITESPACE"," ",401],["T_FUNCTION","function",401],["T_WHITESPACE"," ",401],["T_STRING","getAndSortConfigData",401],"(",["T_VARIABLE","$collection",401],")",["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$source_storage",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getSourceStorage",402],"(",["T_VARIABLE","$collection",402],")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$target_storage",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getTargetStorage",403],"(",["T_VARIABLE","$collection",403],")",";",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$target_names",404],["T_WHITESPACE"," ",404],"=",["T_WHITESPACE"," ",404],["T_VARIABLE","$target_storage",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","listAll",404],"(",")",";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$source_names",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$source_storage",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","listAll",405],"(",")",";",["T_WHITESPACE","\n    ",405],["T_COMMENT","\/\/ Prime the static caches by reading all the configuration in the source\n",406],["T_WHITESPACE","    ",407],["T_COMMENT","\/\/ and target storages.\n",407],["T_WHITESPACE","    ",408],["T_VARIABLE","$target_data",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$target_storage",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","readMultiple",408],"(",["T_VARIABLE","$target_names",408],")",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$source_data",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$source_storage",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","readMultiple",409],"(",["T_VARIABLE","$source_names",409],")",";",["T_WHITESPACE","\n    ",409],["T_COMMENT","\/\/ If the collection only supports simple configuration do not use\n",410],["T_WHITESPACE","    ",411],["T_COMMENT","\/\/ configuration dependencies.\n",411],["T_WHITESPACE","    ",412],["T_IF","if",412],["T_WHITESPACE"," ",412],"(",["T_VARIABLE","$collection",412],["T_WHITESPACE"," ",412],["T_IS_EQUAL","==",412],["T_WHITESPACE"," ",412],["T_STRING","StorageInterface",412],["T_DOUBLE_COLON","::",412],["T_STRING","DEFAULT_COLLECTION",412],")",["T_WHITESPACE"," ",412],"{",["T_WHITESPACE","\n      ",412],["T_VARIABLE","$dependency_manager",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_NEW","new",413],["T_WHITESPACE"," ",413],["T_STRING","ConfigDependencyManager",413],"(",")",";",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","targetNames",414],"[",["T_VARIABLE","$collection",414],"]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$dependency_manager",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","setData",414],"(",["T_VARIABLE","$target_data",414],")",["T_OBJECT_OPERATOR","->",414],["T_STRING","sortAll",414],"(",")",";",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","sourceNames",415],"[",["T_VARIABLE","$collection",415],"]",["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$dependency_manager",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","setData",415],"(",["T_VARIABLE","$source_data",415],")",["T_OBJECT_OPERATOR","->",415],["T_STRING","sortAll",415],"(",")",";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n    ",416],["T_ELSE","else",417],["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n      ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","targetNames",418],"[",["T_VARIABLE","$collection",418],"]",["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],["T_VARIABLE","$target_names",418],";",["T_WHITESPACE","\n      ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","sourceNames",419],"[",["T_VARIABLE","$collection",419],"]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$source_names",419],";",["T_WHITESPACE","\n    ",419],"}",["T_WHITESPACE","\n  ",420],"}",["T_WHITESPACE","\n\n  ",421],["T_DOC_COMMENT","\/**\n   * Creates a rename name from the old and new names for the object.\n   *\n   * @param string $old_name\n   *   The old configuration object name.\n   * @param string $new_name\n   *   The new configuration object name.\n   *\n   * @return string\n   *   The configuration change name that encodes both the old and the new name.\n   *\n   * @see \\Drupal\\Core\\Config\\StorageComparerInterface::extractRenameNames()\n   *\/",423],["T_WHITESPACE","\n  ",435],["T_PROTECTED","protected",436],["T_WHITESPACE"," ",436],["T_FUNCTION","function",436],["T_WHITESPACE"," ",436],["T_STRING","createRenameName",436],"(",["T_VARIABLE","$name1",436],",",["T_WHITESPACE"," ",436],["T_VARIABLE","$name2",436],")",["T_WHITESPACE"," ",436],"{",["T_WHITESPACE","\n    ",436],["T_RETURN","return",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$name1",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'::'",437],["T_WHITESPACE"," ",437],".",["T_WHITESPACE"," ",437],["T_VARIABLE","$name2",437],";",["T_WHITESPACE","\n  ",437],"}",["T_WHITESPACE","\n\n  ",438],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",440],["T_WHITESPACE","\n  ",442],["T_PUBLIC","public",443],["T_WHITESPACE"," ",443],["T_FUNCTION","function",443],["T_WHITESPACE"," ",443],["T_STRING","extractRenameNames",443],"(",["T_VARIABLE","$name",443],")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n    ",443],["T_VARIABLE","$names",444],["T_WHITESPACE"," ",444],"=",["T_WHITESPACE"," ",444],["T_STRING","explode",444],"(",["T_CONSTANT_ENCAPSED_STRING","'::'",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$name",444],",",["T_WHITESPACE"," ",444],["T_LNUMBER","2",444],")",";",["T_WHITESPACE","\n    ",444],["T_RETURN","return",445],["T_WHITESPACE"," ",445],["T_ARRAY","array",445],"(",["T_WHITESPACE","\n      ",445],["T_CONSTANT_ENCAPSED_STRING","'old_name'",446],["T_WHITESPACE"," ",446],["T_DOUBLE_ARROW","=>",446],["T_WHITESPACE"," ",446],["T_VARIABLE","$names",446],"[",["T_LNUMBER","0",446],"]",",",["T_WHITESPACE","\n      ",446],["T_CONSTANT_ENCAPSED_STRING","'new_name'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$names",447],"[",["T_LNUMBER","1",447],"]",",",["T_WHITESPACE","\n    ",447],")",";",["T_WHITESPACE","\n  ",448],"}",["T_WHITESPACE","\n\n  ",449],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",451],["T_WHITESPACE","\n  ",453],["T_PUBLIC","public",454],["T_WHITESPACE"," ",454],["T_FUNCTION","function",454],["T_WHITESPACE"," ",454],["T_STRING","getAllCollectionNames",454],"(",["T_VARIABLE","$include_default",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_STRING","TRUE",454],")",["T_WHITESPACE"," ",454],"{",["T_WHITESPACE","\n    ",454],["T_VARIABLE","$collections",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","array_unique",455],"(",["T_STRING","array_merge",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","sourceStorage",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getAllCollectionNames",455],"(",")",",",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","targetStorage",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","getAllCollectionNames",455],"(",")",")",")",";",["T_WHITESPACE","\n    ",455],["T_IF","if",456],["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$include_default",456],")",["T_WHITESPACE"," ",456],"{",["T_WHITESPACE","\n      ",456],["T_STRING","array_unshift",457],"(",["T_VARIABLE","$collections",457],",",["T_WHITESPACE"," ",457],["T_STRING","StorageInterface",457],["T_DOUBLE_COLON","::",457],["T_STRING","DEFAULT_COLLECTION",457],")",";",["T_WHITESPACE","\n    ",457],"}",["T_WHITESPACE","\n    ",458],["T_RETURN","return",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$collections",459],";",["T_WHITESPACE","\n  ",459],"}",["T_WHITESPACE","\n\n",460],"}",["T_WHITESPACE","\n",462]]
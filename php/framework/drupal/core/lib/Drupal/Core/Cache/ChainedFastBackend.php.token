[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Cache",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Defines a backend with a fast and a consistent backend chain.\n *\n * In order to mitigate a network roundtrip for each cache get operation, this\n * cache allows a fast backend to be put in front of a slow(er) backend.\n * Typically the fast backend will be something like APCu, and be bound to a\n * single web node, and will not require a network round trip to fetch a cache\n * item. The fast backend will also typically be inconsistent (will only see\n * changes from one web node). The slower backend will be something like Mysql,\n * Memcached or Redis, and will be used by all web nodes, thus making it\n * consistent, but also require a network round trip for each cache get.\n *\n * In addition to being useful for sites running on multiple web nodes, this\n * backend can also be useful for sites running on a single web node where the\n * fast backend (e.g., APCu) isn't shareable between the web and CLI processes.\n * Single-node configurations that don't have that limitation can just use the\n * fast cache backend directly.\n *\n * We always use the fast backend when reading (get()) entries from cache, but\n * check whether they were created before the last write (set()) to this\n * (chained) cache backend. Those cache entries that were created before the\n * last write are discarded, but we use their cache IDs to then read them from\n * the consistent (slower) cache backend instead; at the same time we update\n * the fast cache backend so that the next read will hit the faster backend\n * again. Hence we can guarantee that the cache entries we return are all\n * up-to-date, and maximally exploit the faster cache backend. This cache\n * backend uses and maintains a \"last write timestamp\" to determine which cache\n * entries should be discarded.\n *\n * Because this backend will mark all the cache entries in a bin as out-dated\n * for each write to a bin, it is best suited to bins with fewer changes.\n *\n * Note that this is designed specifically for combining a fast inconsistent\n * cache backend with a slower consistent cache back-end. To still function\n * correctly, it needs to do a consistency check (see the \"last write timestamp\"\n * logic). This contrasts with \\Drupal\\Core\\Cache\\BackendChain, which assumes\n * both chained cache backends are consistent, thus a consistency check being\n * pointless.\n *\n * @see \\Drupal\\Core\\Cache\\BackendChain\n *\n * @ingroup cache\n *\/",5],["T_WHITESPACE","\n",47],["T_CLASS","class",48],["T_WHITESPACE"," ",48],["T_STRING","ChainedFastBackend",48],["T_WHITESPACE"," ",48],["T_IMPLEMENTS","implements",48],["T_WHITESPACE"," ",48],["T_STRING","CacheBackendInterface",48],",",["T_WHITESPACE"," ",48],["T_STRING","CacheTagsInvalidatorInterface",48],["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Cache key prefix for the bin-specific entry to track the last write.\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_CONST","const",53],["T_WHITESPACE"," ",53],["T_STRING","LAST_WRITE_TIMESTAMP_PREFIX",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'last_write_timestamp_'",53],";",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * @var string\n   *\/",55],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$bin",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * The consistent cache backend.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",60],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$consistentBackend",65],";",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * The fast cache backend.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",67],["T_WHITESPACE","\n  ",71],["T_PROTECTED","protected",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$fastBackend",72],";",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * The time at which the last write to this cache bin happened.\n   *\n   * @var float\n   *\/",74],["T_WHITESPACE","\n  ",78],["T_PROTECTED","protected",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$lastWriteTimestamp",79],";",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Constructs a ChainedFastBackend object.\n   *\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $consistent_backend\n   *   The consistent cache backend.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $fast_backend\n   *   The fast cache backend.\n   * @param string $bin\n   *   The cache bin for which the object is created.\n   *\/",81],["T_WHITESPACE","\n  ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","__construct",91],"(",["T_STRING","CacheBackendInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$consistent_backend",91],",",["T_WHITESPACE"," ",91],["T_STRING","CacheBackendInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$fast_backend",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$bin",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","consistentBackend",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$consistent_backend",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","fastBackend",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$fast_backend",93],";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","bin",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'cache_'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$bin",94],";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","lastWriteTimestamp",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","NULL",95],";",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",98],["T_WHITESPACE","\n  ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","get",101],"(",["T_VARIABLE","$cid",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$allow_invalid",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","FALSE",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$cids",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_VARIABLE","$cid",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$cache",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getMultiple",103],"(",["T_VARIABLE","$cids",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$allow_invalid",103],")",";",["T_WHITESPACE","\n    ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_STRING","reset",104],"(",["T_VARIABLE","$cache",104],")",";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n  ",105],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",107],["T_WHITESPACE","\n  ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getMultiple",110],"(","&",["T_VARIABLE","$cids",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$allow_invalid",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","FALSE",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$cids_copy",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$cids",111],";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$cache",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ If we can determine the time at which the last write to the consistent\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/ backend occurred (we might not be able to if it has been recently\n",115],["T_WHITESPACE","    ",116],["T_COMMENT","\/\/ flushed\/restarted), then we can use that to validate items from the fast\n",116],["T_WHITESPACE","    ",117],["T_COMMENT","\/\/ backend, so try to get those first. Otherwise, we can't assume that\n",117],["T_WHITESPACE","    ",118],["T_COMMENT","\/\/ anything in the fast backend is valid, so don't even bother fetching\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ from there.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$last_write_timestamp",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getLastWriteTimestamp",120],"(",")",";",["T_WHITESPACE","\n    ",120],["T_IF","if",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$last_write_timestamp",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_COMMENT","\/\/ Items in the fast backend might be invalid based on their timestamp,\n",122],["T_WHITESPACE","      ",123],["T_COMMENT","\/\/ but we can't check the timestamp prior to getting the item, which\n",123],["T_WHITESPACE","      ",124],["T_COMMENT","\/\/ includes unserializing it. However, unserializing an invalid item can\n",124],["T_WHITESPACE","      ",125],["T_COMMENT","\/\/ throw an exception. For example, a __wakeup() implementation that\n",125],["T_WHITESPACE","      ",126],["T_COMMENT","\/\/ receives object properties containing references to code or data that\n",126],["T_WHITESPACE","      ",127],["T_COMMENT","\/\/ no longer exists in the application's current state.\n",127],["T_WHITESPACE","      ",128],["T_COMMENT","\/\/\n",128],["T_WHITESPACE","      ",129],["T_COMMENT","\/\/ Unserializing invalid data, whether it throws an exception or not, is\n",129],["T_WHITESPACE","      ",130],["T_COMMENT","\/\/ a waste of time, but we only incur it while a cache invalidation has\n",130],["T_WHITESPACE","      ",131],["T_COMMENT","\/\/ not yet finished propagating to all the fast backend instances.\n",131],["T_WHITESPACE","      ",132],["T_COMMENT","\/\/\n",132],["T_WHITESPACE","      ",133],["T_COMMENT","\/\/ Most cache backend implementations should not wrap their internal\n",133],["T_WHITESPACE","      ",134],["T_COMMENT","\/\/ get() implementations with a try\/catch, because they have no reason to\n",134],["T_WHITESPACE","      ",135],["T_COMMENT","\/\/ assume that their data is invalid, and doing so would mask\n",135],["T_WHITESPACE","      ",136],["T_COMMENT","\/\/ unserialization errors of valid data. We do so here, only because the\n",136],["T_WHITESPACE","      ",137],["T_COMMENT","\/\/ fast backend is non-authoritative, and after discarding its\n",137],["T_WHITESPACE","      ",138],["T_COMMENT","\/\/ exceptions, we proceed to check the consistent (authoritative) backend\n",138],["T_WHITESPACE","      ",139],["T_COMMENT","\/\/ and allow exceptions from that to bubble up.\n",139],["T_WHITESPACE","      ",140],["T_TRY","try",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$items",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","fastBackend",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getMultiple",141],"(",["T_VARIABLE","$cids",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$allow_invalid",141],")",";",["T_WHITESPACE","\n      ",141],"}",["T_WHITESPACE","\n      ",142],["T_CATCH","catch",143],["T_WHITESPACE"," ",143],"(",["T_NS_SEPARATOR","\\",143],["T_STRING","Exception",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$e",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$cids",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$cids_copy",144],";",["T_WHITESPACE","\n        ",144],["T_VARIABLE","$items",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",")",";",["T_WHITESPACE","\n      ",145],"}",["T_WHITESPACE","\n\n      ",146],["T_COMMENT","\/\/ Even if items were successfully fetched from the fast backend, they\n",148],["T_WHITESPACE","      ",149],["T_COMMENT","\/\/ are potentially invalid if older than the last time the bin was\n",149],["T_WHITESPACE","      ",150],["T_COMMENT","\/\/ written to in the consistent backend, so only keep ones that aren't.\n",150],["T_WHITESPACE","      ",151],["T_FOREACH","foreach",151],["T_WHITESPACE"," ",151],"(",["T_VARIABLE","$items",151],["T_WHITESPACE"," ",151],["T_AS","as",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$item",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n        ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$item",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","created",152],["T_WHITESPACE"," ",152],"<",["T_WHITESPACE"," ",152],["T_VARIABLE","$last_write_timestamp",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n          ",152],["T_VARIABLE","$cids",153],"[",["T_STRING","array_search",153],"(",["T_VARIABLE","$item",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","cid",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$cids_copy",153],")","]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$item",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","cid",153],";",["T_WHITESPACE","\n        ",153],"}",["T_WHITESPACE","\n        ",154],["T_ELSE","else",155],["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n          ",155],["T_VARIABLE","$cache",156],"[",["T_VARIABLE","$item",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","cid",156],"]",["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$item",156],";",["T_WHITESPACE","\n        ",156],"}",["T_WHITESPACE","\n      ",157],"}",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n\n    ",159],["T_COMMENT","\/\/ If there were any cache entries that were not available in the fast\n",161],["T_WHITESPACE","    ",162],["T_COMMENT","\/\/ backend, retrieve them from the consistent backend and store them in the\n",162],["T_WHITESPACE","    ",163],["T_COMMENT","\/\/ fast one.\n",163],["T_WHITESPACE","    ",164],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$cids",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_FOREACH","foreach",165],["T_WHITESPACE"," ",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","consistentBackend",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getMultiple",165],"(",["T_VARIABLE","$cids",165],",",["T_WHITESPACE"," ",165],["T_VARIABLE","$allow_invalid",165],")",["T_WHITESPACE"," ",165],["T_AS","as",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$item",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n        ",165],["T_VARIABLE","$cache",166],"[",["T_VARIABLE","$item",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","cid",166],"]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$item",166],";",["T_WHITESPACE","\n        ",166],["T_COMMENT","\/\/ Don't write the cache tags to the fast backend as any cache tag\n",167],["T_WHITESPACE","        ",168],["T_COMMENT","\/\/ invalidation results in an invalidation of the whole fast backend.\n",168],["T_WHITESPACE","        ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","fastBackend",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","set",169],"(",["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","cid",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","data",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$item",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expire",169],")",";",["T_WHITESPACE","\n      ",169],"}",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n\n    ",171],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$cache",173],";",["T_WHITESPACE","\n  ",173],"}",["T_WHITESPACE","\n\n  ",174],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",176],["T_WHITESPACE","\n  ",178],["T_PUBLIC","public",179],["T_WHITESPACE"," ",179],["T_FUNCTION","function",179],["T_WHITESPACE"," ",179],["T_STRING","set",179],"(",["T_VARIABLE","$cid",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$data",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$expire",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","Cache",179],["T_DOUBLE_COLON","::",179],["T_STRING","PERMANENT",179],",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$tags",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","consistentBackend",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","set",180],"(",["T_VARIABLE","$cid",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$data",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$expire",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$tags",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","markAsOutdated",181],"(",")",";",["T_WHITESPACE","\n    ",181],["T_COMMENT","\/\/ Don't write the cache tags to the fast backend as any cache tag\n",182],["T_WHITESPACE","    ",183],["T_COMMENT","\/\/ invalidation results in an invalidation of the whole fast backend.\n",183],["T_WHITESPACE","    ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","fastBackend",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","set",184],"(",["T_VARIABLE","$cid",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$data",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$expire",184],")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n  ",185],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",187],["T_WHITESPACE","\n  ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","setMultiple",190],"(",["T_ARRAY","array",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$items",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","consistentBackend",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","setMultiple",191],"(",["T_VARIABLE","$items",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","markAsOutdated",192],"(",")",";",["T_WHITESPACE","\n    ",192],["T_COMMENT","\/\/ Don't write the cache tags to the fast backend as any cache tag\n",193],["T_WHITESPACE","    ",194],["T_COMMENT","\/\/ invalidation results in an invalidation of the whole fast backend.\n",194],["T_WHITESPACE","    ",195],["T_FOREACH","foreach",195],["T_WHITESPACE"," ",195],"(",["T_VARIABLE","$items",195],["T_WHITESPACE"," ",195],["T_AS","as",195],["T_WHITESPACE"," ",195],"&",["T_VARIABLE","$item",195],")",["T_WHITESPACE"," ",195],"{",["T_WHITESPACE","\n      ",195],["T_UNSET","unset",196],"(",["T_VARIABLE","$item",196],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",196],"]",")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","fastBackend",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","setMultiple",198],"(",["T_VARIABLE","$items",198],")",";",["T_WHITESPACE","\n  ",198],"}",["T_WHITESPACE","\n\n  ",199],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",201],["T_WHITESPACE","\n  ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","delete",204],"(",["T_VARIABLE","$cid",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","consistentBackend",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","deleteMultiple",205],"(",["T_ARRAY","array",205],"(",["T_VARIABLE","$cid",205],")",")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","markAsOutdated",206],"(",")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n  ",207],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",209],["T_WHITESPACE","\n  ",211],["T_PUBLIC","public",212],["T_WHITESPACE"," ",212],["T_FUNCTION","function",212],["T_WHITESPACE"," ",212],["T_STRING","deleteMultiple",212],"(",["T_ARRAY","array",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$cids",212],")",["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","consistentBackend",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","deleteMultiple",213],"(",["T_VARIABLE","$cids",213],")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","markAsOutdated",214],"(",")",";",["T_WHITESPACE","\n  ",214],"}",["T_WHITESPACE","\n\n  ",215],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",217],["T_WHITESPACE","\n  ",219],["T_PUBLIC","public",220],["T_WHITESPACE"," ",220],["T_FUNCTION","function",220],["T_WHITESPACE"," ",220],["T_STRING","deleteAll",220],"(",")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n    ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","consistentBackend",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","deleteAll",221],"(",")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","markAsOutdated",222],"(",")",";",["T_WHITESPACE","\n  ",222],"}",["T_WHITESPACE","\n\n  ",223],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",225],["T_WHITESPACE","\n  ",227],["T_PUBLIC","public",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","invalidate",228],"(",["T_VARIABLE","$cid",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","invalidateMultiple",229],"(",["T_ARRAY","array",229],"(",["T_VARIABLE","$cid",229],")",")",";",["T_WHITESPACE","\n  ",229],"}",["T_WHITESPACE","\n\n  ",230],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",232],["T_WHITESPACE","\n  ",234],["T_PUBLIC","public",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","invalidateMultiple",235],"(",["T_ARRAY","array",235],["T_WHITESPACE"," ",235],["T_VARIABLE","$cids",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","consistentBackend",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","invalidateMultiple",236],"(",["T_VARIABLE","$cids",236],")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","markAsOutdated",237],"(",")",";",["T_WHITESPACE","\n  ",237],"}",["T_WHITESPACE","\n\n  ",238],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",240],["T_WHITESPACE","\n  ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","invalidateTags",243],"(",["T_ARRAY","array",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$tags",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n    ",243],["T_IF","if",244],["T_WHITESPACE"," ",244],"(",["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","consistentBackend",244],["T_WHITESPACE"," ",244],["T_INSTANCEOF","instanceof",244],["T_WHITESPACE"," ",244],["T_STRING","CacheTagsInvalidatorInterface",244],")",["T_WHITESPACE"," ",244],"{",["T_WHITESPACE","\n      ",244],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","consistentBackend",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","invalidateTags",245],"(",["T_VARIABLE","$tags",245],")",";",["T_WHITESPACE","\n    ",245],"}",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","markAsOutdated",247],"(",")",";",["T_WHITESPACE","\n  ",247],"}",["T_WHITESPACE","\n\n  ",248],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",250],["T_WHITESPACE","\n  ",252],["T_PUBLIC","public",253],["T_WHITESPACE"," ",253],["T_FUNCTION","function",253],["T_WHITESPACE"," ",253],["T_STRING","invalidateAll",253],"(",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","consistentBackend",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","invalidateAll",254],"(",")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","markAsOutdated",255],"(",")",";",["T_WHITESPACE","\n  ",255],"}",["T_WHITESPACE","\n\n  ",256],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",258],["T_WHITESPACE","\n  ",260],["T_PUBLIC","public",261],["T_WHITESPACE"," ",261],["T_FUNCTION","function",261],["T_WHITESPACE"," ",261],["T_STRING","garbageCollection",261],"(",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","consistentBackend",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","garbageCollection",262],"(",")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","fastBackend",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","garbageCollection",263],"(",")",";",["T_WHITESPACE","\n  ",263],"}",["T_WHITESPACE","\n\n  ",264],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",266],["T_WHITESPACE","\n  ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","removeBin",269],"(",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","consistentBackend",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","removeBin",270],"(",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","fastBackend",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","removeBin",271],"(",")",";",["T_WHITESPACE","\n  ",271],"}",["T_WHITESPACE","\n\n  ",272],["T_DOC_COMMENT","\/**\n   * @todo Document in https:\/\/www.drupal.org\/node\/2311945.\n   *\/",274],["T_WHITESPACE","\n  ",276],["T_PUBLIC","public",277],["T_WHITESPACE"," ",277],["T_FUNCTION","function",277],["T_WHITESPACE"," ",277],["T_STRING","reset",277],"(",")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","lastWriteTimestamp",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_STRING","NULL",278],";",["T_WHITESPACE","\n  ",278],"}",["T_WHITESPACE","\n\n  ",279],["T_DOC_COMMENT","\/**\n   * Gets the last write timestamp.\n   *\/",281],["T_WHITESPACE","\n  ",283],["T_PROTECTED","protected",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","getLastWriteTimestamp",284],"(",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n    ",284],["T_IF","if",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","lastWriteTimestamp",285],["T_WHITESPACE"," ",285],["T_IS_IDENTICAL","===",285],["T_WHITESPACE"," ",285],["T_STRING","NULL",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n      ",285],["T_VARIABLE","$cache",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","consistentBackend",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","get",286],"(",["T_STRING","self",286],["T_DOUBLE_COLON","::",286],["T_STRING","LAST_WRITE_TIMESTAMP_PREFIX",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","bin",286],")",";",["T_WHITESPACE","\n      ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","lastWriteTimestamp",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_VARIABLE","$cache",287],["T_WHITESPACE"," ",287],"?",["T_WHITESPACE"," ",287],["T_VARIABLE","$cache",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","data",287],["T_WHITESPACE"," ",287],":",["T_WHITESPACE"," ",287],["T_LNUMBER","0",287],";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n    ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","lastWriteTimestamp",289],";",["T_WHITESPACE","\n  ",289],"}",["T_WHITESPACE","\n\n  ",290],["T_DOC_COMMENT","\/**\n   * Marks the fast cache bin as outdated because of a write.\n   *\/",292],["T_WHITESPACE","\n  ",294],["T_PROTECTED","protected",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","markAsOutdated",295],"(",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n    ",295],["T_COMMENT","\/\/ Clocks on a single server can drift. Multiple servers may have slightly\n",296],["T_WHITESPACE","    ",297],["T_COMMENT","\/\/ differing opinions about the current time. Given that, do not assume\n",297],["T_WHITESPACE","    ",298],["T_COMMENT","\/\/ 'now' on this server is always later than our stored timestamp.\n",298],["T_WHITESPACE","    ",299],["T_COMMENT","\/\/ Also add 1 millisecond, to ensure that caches written earlier in the same\n",299],["T_WHITESPACE","    ",300],["T_COMMENT","\/\/ millisecond are invalidated. It is possible that caches will be later in\n",300],["T_WHITESPACE","    ",301],["T_COMMENT","\/\/ the same millisecond and are then incorrectly invalidated, but that only\n",301],["T_WHITESPACE","    ",302],["T_COMMENT","\/\/ costs one additional roundtrip to the persistent cache.\n",302],["T_WHITESPACE","    ",303],["T_VARIABLE","$now",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","round",303],"(",["T_STRING","microtime",303],"(",["T_STRING","TRUE",303],")",["T_WHITESPACE"," ",303],"+",["T_WHITESPACE"," ",303],["T_DNUMBER",".001",303],",",["T_WHITESPACE"," ",303],["T_LNUMBER","3",303],")",";",["T_WHITESPACE","\n    ",303],["T_IF","if",304],["T_WHITESPACE"," ",304],"(",["T_VARIABLE","$now",304],["T_WHITESPACE"," ",304],">",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getLastWriteTimestamp",304],"(",")",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n      ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","lastWriteTimestamp",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_VARIABLE","$now",305],";",["T_WHITESPACE","\n      ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","consistentBackend",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","set",306],"(",["T_STRING","self",306],["T_DOUBLE_COLON","::",306],["T_STRING","LAST_WRITE_TIMESTAMP_PREFIX",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","bin",306],",",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","lastWriteTimestamp",306],")",";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n",308],"}",["T_WHITESPACE","\n",310]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Cache",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Crypt",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DestructableInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Lock",7],["T_NS_SEPARATOR","\\",7],["T_STRING","LockBackendInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Default implementation for CacheCollectorInterface.\n *\n * By default, the class accounts for caches where calling functions might\n * request keys that won't exist even after a cache rebuild. This prevents\n * situations where a cache rebuild would be triggered over and over due to a\n * 'missing' item. These cases are stored internally as a value of NULL. This\n * means that the CacheCollector::get() method must be overridden if caching\n * data where the values can legitimately be NULL, and where\n * CacheCollector->has() needs to correctly return (equivalent to\n * array_key_exists() vs. isset()). This should not be necessary in the majority\n * of cases.\n *\n * @ingroup cache\n *\/",9],["T_WHITESPACE","\n",23],["T_ABSTRACT","abstract",24],["T_WHITESPACE"," ",24],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","CacheCollector",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","CacheCollectorInterface",24],",",["T_WHITESPACE"," ",24],["T_STRING","DestructableInterface",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * The cache id that is used for the cache entry.\n   *\n   * @var string\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$cid",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * A list of tags that are used for the cache entry.\n   *\n   * @var array\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$tags",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * The cache backend that should be used.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",40],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$cache",45],";",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * The lock backend that should be used.\n   *\n   * @var \\Drupal\\Core\\Lock\\LockBackendInterface\n   *\/",47],["T_WHITESPACE","\n  ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$lock",52],";",["T_WHITESPACE","\n\n  ",52],["T_DOC_COMMENT","\/**\n   * An array of keys to add to the cache on service termination.\n   *\n   * @var array\n   *\/",54],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$keysToPersist",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",";",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * An array of keys to remove from the cache on service termination.\n   *\n   * @var array\n   *\/",61],["T_WHITESPACE","\n  ",65],["T_PROTECTED","protected",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$keysToRemove",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",")",";",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Storage for the data itself.\n   *\n   * @var array\n   *\/",68],["T_WHITESPACE","\n  ",72],["T_PROTECTED","protected",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$storage",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",";",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Stores the cache creation time.\n   *\n   * This is used to check if an invalidated cache item has been overwritten in\n   * the meantime.\n   *\n   * @var int\n   *\/",75],["T_WHITESPACE","\n  ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$cacheCreated",83],";",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * Flag that indicates of the cache has been invalidated.\n   *\n   * @var bool\n   *\/",85],["T_WHITESPACE","\n  ",89],["T_PROTECTED","protected",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$cacheInvalidated",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","FALSE",90],";",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * Indicates if the collected cache was already loaded.\n   *\n   * The collected cache is lazy loaded when an entry is set, get or deleted.\n   *\n   * @var bool\n   *\/",92],["T_WHITESPACE","\n  ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$cacheLoaded",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","FALSE",99],";",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * Constructs a CacheCollector object.\n   *\n   * @param string $cid\n   *   The cid for the array being cached.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache\n   *   The cache backend.\n   * @param \\Drupal\\Core\\Lock\\LockBackendInterface $lock\n   *   The lock backend.\n   * @param array $tags\n   *   (optional) The tags to specify for the cache item.\n   *\/",101],["T_WHITESPACE","\n  ",112],["T_PUBLIC","public",113],["T_WHITESPACE"," ",113],["T_FUNCTION","function",113],["T_WHITESPACE"," ",113],["T_STRING","__construct",113],"(",["T_VARIABLE","$cid",113],",",["T_WHITESPACE"," ",113],["T_STRING","CacheBackendInterface",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$cache",113],",",["T_WHITESPACE"," ",113],["T_STRING","LockBackendInterface",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$lock",113],",",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$tags",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ARRAY","array",113],"(",")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n    ",113],["T_STRING","assert",114],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Component\\Assertion\\Inspector::assertAllStrings($tags)'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'Cache tags must be strings.'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","cid",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_VARIABLE","$cid",115],";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","cache",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$cache",116],";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","tags",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$tags",117],";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","lock",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$lock",118],";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * Gets the cache ID.\n   *\n   * @return string\n   *\/",121],["T_WHITESPACE","\n  ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getCid",126],"(",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n    ",126],["T_RETURN","return",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","cid",127],";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",130],["T_WHITESPACE","\n  ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","has",133],"(",["T_VARIABLE","$key",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_COMMENT","\/\/ Make sure the value is loaded.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_VARIABLE","$key",135],")",";",["T_WHITESPACE","\n    ",135],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_ISSET","isset",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","storage",136],"[",["T_VARIABLE","$key",136],"]",")",["T_WHITESPACE"," ",136],["T_BOOLEAN_OR","||",136],["T_WHITESPACE"," ",136],["T_STRING","array_key_exists",136],"(",["T_VARIABLE","$key",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","storage",136],")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",139],["T_WHITESPACE","\n  ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","get",142],"(",["T_VARIABLE","$key",142],")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","lazyLoadCache",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_ISSET","isset",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","storage",144],"[",["T_VARIABLE","$key",144],"]",")",["T_WHITESPACE"," ",144],["T_BOOLEAN_OR","||",144],["T_WHITESPACE"," ",144],["T_STRING","array_key_exists",144],"(",["T_VARIABLE","$key",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","storage",144],")",")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","storage",145],"[",["T_VARIABLE","$key",145],"]",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","resolveCacheMiss",148],"(",["T_VARIABLE","$key",148],")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n  ",149],"}",["T_WHITESPACE","\n\n  ",150],["T_DOC_COMMENT","\/**\n   * Implements \\Drupal\\Core\\Cache\\CacheCollectorInterface::set().\n   *\n   * This is not persisted by default. In practice this means that setting a\n   * value will only apply while the object is in scope and will not be written\n   * back to the persistent cache. This follows a similar pattern to static vs.\n   * persistent caching in procedural code. Extending classes may wish to alter\n   * this behavior, for example by adding a call to persist().\n   *\/",152],["T_WHITESPACE","\n  ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","set",161],"(",["T_VARIABLE","$key",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$value",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","lazyLoadCache",162],"(",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","storage",163],"[",["T_VARIABLE","$key",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$value",163],";",["T_WHITESPACE","\n    ",163],["T_COMMENT","\/\/ The key might have been marked for deletion.\n",164],["T_WHITESPACE","    ",165],["T_UNSET","unset",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","keysToRemove",165],"[",["T_VARIABLE","$key",165],"]",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","invalidateCache",166],"(",")",";",["T_WHITESPACE","\n\n  ",166],"}",["T_WHITESPACE","\n\n  ",168],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",170],["T_WHITESPACE","\n  ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","delete",173],"(",["T_VARIABLE","$key",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","lazyLoadCache",174],"(",")",";",["T_WHITESPACE","\n    ",174],["T_UNSET","unset",175],"(",["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","storage",175],"[",["T_VARIABLE","$key",175],"]",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","keysToRemove",176],"[",["T_VARIABLE","$key",176],"]",["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$key",176],";",["T_WHITESPACE","\n    ",176],["T_COMMENT","\/\/ The key might have been marked for persisting.\n",177],["T_WHITESPACE","    ",178],["T_UNSET","unset",178],"(",["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","keysToPersist",178],"[",["T_VARIABLE","$key",178],"]",")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","invalidateCache",179],"(",")",";",["T_WHITESPACE","\n  ",179],"}",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * Flags an offset value to be written to the persistent cache.\n   *\n   * @param string $key\n   *   The key that was requested.\n   * @param bool $persist\n   *   (optional) Whether the offset should be persisted or not, defaults to\n   *   TRUE. When called with $persist = FALSE the offset will be unflagged so\n   *   that it will not be written at the end of the request.\n   *\/",182],["T_WHITESPACE","\n  ",191],["T_PROTECTED","protected",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","persist",192],"(",["T_VARIABLE","$key",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$persist",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","TRUE",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","keysToPersist",193],"[",["T_VARIABLE","$key",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$persist",193],";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n  ",194],["T_DOC_COMMENT","\/**\n   * Resolves a cache miss.\n   *\n   * When an offset is not found in the object, this is treated as a cache\n   * miss. This method allows classes using this implementation to look up the\n   * actual value and allow it to be cached.\n   *\n   * @param string $key\n   *   The offset that was requested.\n   *\n   * @return mixed\n   *   The value of the offset, or NULL if no value was found.\n   *\/",196],["T_WHITESPACE","\n  ",208],["T_ABSTRACT","abstract",209],["T_WHITESPACE"," ",209],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","resolveCacheMiss",209],"(",["T_VARIABLE","$key",209],")",";",["T_WHITESPACE","\n\n  ",209],["T_DOC_COMMENT","\/**\n   * Writes a value to the persistent cache immediately.\n   *\n   * @param bool $lock\n   *   (optional) Whether to acquire a lock before writing to cache. Defaults to\n   *   TRUE.\n   *\/",211],["T_WHITESPACE","\n  ",217],["T_PROTECTED","protected",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","updateCache",218],"(",["T_VARIABLE","$lock",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","TRUE",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$data",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_ARRAY","array",219],"(",")",";",["T_WHITESPACE","\n    ",219],["T_FOREACH","foreach",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","keysToPersist",220],["T_WHITESPACE"," ",220],["T_AS","as",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$offset",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$persist",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n      ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$persist",221],")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$data",222],"[",["T_VARIABLE","$offset",222],"]",["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","storage",222],"[",["T_VARIABLE","$offset",222],"]",";",["T_WHITESPACE","\n      ",222],"}",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n    ",224],["T_IF","if",225],["T_WHITESPACE"," ",225],"(",["T_EMPTY","empty",225],"(",["T_VARIABLE","$data",225],")",["T_WHITESPACE"," ",225],["T_BOOLEAN_AND","&&",225],["T_WHITESPACE"," ",225],["T_EMPTY","empty",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","keysToRemove",225],")",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n      ",225],["T_RETURN","return",226],";",["T_WHITESPACE","\n    ",226],"}",["T_WHITESPACE","\n\n    ",227],["T_COMMENT","\/\/ Lock cache writes to help avoid stampedes.\n",229],["T_WHITESPACE","    ",230],["T_VARIABLE","$cid",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getCid",230],"(",")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$lock_name",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","normalizeLockName",231],"(",["T_VARIABLE","$cid",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","':'",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_CLASS_C","__CLASS__",231],")",";",["T_WHITESPACE","\n    ",231],["T_IF","if",232],["T_WHITESPACE"," ",232],"(","!",["T_VARIABLE","$lock",232],["T_WHITESPACE"," ",232],["T_BOOLEAN_OR","||",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","lock",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","acquire",232],"(",["T_VARIABLE","$lock_name",232],")",")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n      ",232],["T_COMMENT","\/\/ Set and delete operations invalidate the cache item. Try to also load\n",233],["T_WHITESPACE","      ",234],["T_COMMENT","\/\/ an eventually invalidated cache entry, only update an invalidated cache\n",234],["T_WHITESPACE","      ",235],["T_COMMENT","\/\/ entry if the creation date did not change as this could result in an\n",235],["T_WHITESPACE","      ",236],["T_COMMENT","\/\/ inconsistent cache.\n",236],["T_WHITESPACE","      ",237],["T_IF","if",237],["T_WHITESPACE"," ",237],"(",["T_VARIABLE","$cache",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","cache",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","get",237],"(",["T_VARIABLE","$cid",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","cacheInvalidated",237],")",")",["T_WHITESPACE"," ",237],"{",["T_WHITESPACE","\n        ",237],["T_IF","if",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","cacheInvalidated",238],["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$cache",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","created",238],["T_WHITESPACE"," ",238],["T_IS_NOT_EQUAL","!=",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","cacheCreated",238],")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n          ",238],["T_COMMENT","\/\/ We have invalidated the cache in this request and got a different\n",239],["T_WHITESPACE","          ",240],["T_COMMENT","\/\/ cache entry. Do not attempt to overwrite data that might have been\n",240],["T_WHITESPACE","          ",241],["T_COMMENT","\/\/ changed in a different request. We'll let the cache rebuild in\n",241],["T_WHITESPACE","          ",242],["T_COMMENT","\/\/ later requests.\n",242],["T_WHITESPACE","          ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","cache",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","delete",243],"(",["T_VARIABLE","$cid",243],")",";",["T_WHITESPACE","\n          ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","lock",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","release",244],"(",["T_VARIABLE","$lock_name",244],")",";",["T_WHITESPACE","\n          ",244],["T_RETURN","return",245],";",["T_WHITESPACE","\n        ",245],"}",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$data",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","array_merge",247],"(",["T_VARIABLE","$cache",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","data",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$data",247],")",";",["T_WHITESPACE","\n      ",247],"}",["T_WHITESPACE","\n      ",248],["T_COMMENT","\/\/ Remove keys marked for deletion.\n",249],["T_WHITESPACE","      ",250],["T_FOREACH","foreach",250],["T_WHITESPACE"," ",250],"(",["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","keysToRemove",250],["T_WHITESPACE"," ",250],["T_AS","as",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$delete_key",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n        ",250],["T_UNSET","unset",251],"(",["T_VARIABLE","$data",251],"[",["T_VARIABLE","$delete_key",251],"]",")",";",["T_WHITESPACE","\n      ",251],"}",["T_WHITESPACE","\n      ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","cache",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","set",253],"(",["T_VARIABLE","$cid",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$data",253],",",["T_WHITESPACE"," ",253],["T_STRING","Cache",253],["T_DOUBLE_COLON","::",253],["T_STRING","PERMANENT",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","tags",253],")",";",["T_WHITESPACE","\n      ",253],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_VARIABLE","$lock",254],")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","lock",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","release",255],"(",["T_VARIABLE","$lock_name",255],")",";",["T_WHITESPACE","\n      ",255],"}",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n\n    ",257],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","keysToPersist",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_ARRAY","array",259],"(",")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","keysToRemove",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",")",";",["T_WHITESPACE","\n  ",260],"}",["T_WHITESPACE","\n\n  ",261],["T_DOC_COMMENT","\/**\n   * Normalizes a cache ID in order to comply with database limitations.\n   *\n   * @param string $cid\n   *   The passed in cache ID.\n   *\n   * @return string\n   *   An ASCII-encoded cache ID that is at most 255 characters long.\n   *\/",263],["T_WHITESPACE","\n  ",271],["T_PROTECTED","protected",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","normalizeLockName",272],"(",["T_VARIABLE","$cid",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n    ",272],["T_COMMENT","\/\/ Nothing to do if the ID is a US ASCII string of 255 characters or less.\n",273],["T_WHITESPACE","    ",274],["T_VARIABLE","$cid_is_ascii",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_STRING","mb_check_encoding",274],"(",["T_VARIABLE","$cid",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'ASCII'",274],")",";",["T_WHITESPACE","\n    ",274],["T_IF","if",275],["T_WHITESPACE"," ",275],"(",["T_STRING","strlen",275],"(",["T_VARIABLE","$cid",275],")",["T_WHITESPACE"," ",275],["T_IS_SMALLER_OR_EQUAL","<=",275],["T_WHITESPACE"," ",275],["T_LNUMBER","255",275],["T_WHITESPACE"," ",275],["T_BOOLEAN_AND","&&",275],["T_WHITESPACE"," ",275],["T_VARIABLE","$cid_is_ascii",275],")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n      ",275],["T_RETURN","return",276],["T_WHITESPACE"," ",276],["T_VARIABLE","$cid",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n    ",277],["T_COMMENT","\/\/ Return a string that uses as much as possible of the original cache ID\n",278],["T_WHITESPACE","    ",279],["T_COMMENT","\/\/ with the hash appended.\n",279],["T_WHITESPACE","    ",280],["T_VARIABLE","$hash",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_STRING","Crypt",280],["T_DOUBLE_COLON","::",280],["T_STRING","hashBase64",280],"(",["T_VARIABLE","$cid",280],")",";",["T_WHITESPACE","\n    ",280],["T_IF","if",281],["T_WHITESPACE"," ",281],"(","!",["T_VARIABLE","$cid_is_ascii",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n      ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$hash",282],";",["T_WHITESPACE","\n    ",282],"}",["T_WHITESPACE","\n    ",283],["T_RETURN","return",284],["T_WHITESPACE"," ",284],["T_STRING","substr",284],"(",["T_VARIABLE","$cid",284],",",["T_WHITESPACE"," ",284],["T_LNUMBER","0",284],",",["T_WHITESPACE"," ",284],["T_LNUMBER","255",284],["T_WHITESPACE"," ",284],"-",["T_WHITESPACE"," ",284],["T_STRING","strlen",284],"(",["T_VARIABLE","$hash",284],")",")",["T_WHITESPACE"," ",284],".",["T_WHITESPACE"," ",284],["T_VARIABLE","$hash",284],";",["T_WHITESPACE","\n  ",284],"}",["T_WHITESPACE","\n\n  ",285],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",287],["T_WHITESPACE","\n  ",289],["T_PUBLIC","public",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","reset",290],"(",")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n    ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","storage",291],["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_ARRAY","array",291],"(",")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$this",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","keysToPersist",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","keysToRemove",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_ARRAY","array",293],"(",")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","cacheLoaded",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_STRING","FALSE",294],";",["T_WHITESPACE","\n  ",294],"}",["T_WHITESPACE","\n\n  ",295],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",297],["T_WHITESPACE","\n  ",299],["T_PUBLIC","public",300],["T_WHITESPACE"," ",300],["T_FUNCTION","function",300],["T_WHITESPACE"," ",300],["T_STRING","clear",300],"(",")",["T_WHITESPACE"," ",300],"{",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","reset",301],"(",")",";",["T_WHITESPACE","\n    ",301],["T_IF","if",302],["T_WHITESPACE"," ",302],"(",["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","tags",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n      ",302],["T_STRING","Cache",303],["T_DOUBLE_COLON","::",303],["T_STRING","invalidateTags",303],"(",["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","tags",303],")",";",["T_WHITESPACE","\n    ",303],"}",["T_WHITESPACE","\n    ",304],["T_ELSE","else",305],["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n      ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","cache",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","delete",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getCid",306],"(",")",")",";",["T_WHITESPACE","\n    ",306],"}",["T_WHITESPACE","\n  ",307],"}",["T_WHITESPACE","\n\n  ",308],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",310],["T_WHITESPACE","\n  ",312],["T_PUBLIC","public",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","destruct",313],"(",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","updateCache",314],"(",")",";",["T_WHITESPACE","\n  ",314],"}",["T_WHITESPACE","\n\n  ",315],["T_DOC_COMMENT","\/**\n   * Loads the cache if not already done.\n   *\/",317],["T_WHITESPACE","\n  ",319],["T_PROTECTED","protected",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","lazyLoadCache",320],"(",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n    ",320],["T_IF","if",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","cacheLoaded",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n      ",321],["T_RETURN","return",322],";",["T_WHITESPACE","\n    ",322],"}",["T_WHITESPACE","\n    ",323],["T_COMMENT","\/\/ The cache was not yet loaded, set flag to TRUE.\n",324],["T_WHITESPACE","    ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","cacheLoaded",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","TRUE",325],";",["T_WHITESPACE","\n\n    ",325],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_VARIABLE","$cache",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","cache",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","get",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getCid",327],"(",")",")",")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n      ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","cacheCreated",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$cache",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","created",328],";",["T_WHITESPACE","\n      ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","storage",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$cache",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","data",329],";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n  ",330],"}",["T_WHITESPACE","\n\n  ",331],["T_DOC_COMMENT","\/**\n   * Invalidate the cache.\n   *\/",333],["T_WHITESPACE","\n  ",335],["T_PROTECTED","protected",336],["T_WHITESPACE"," ",336],["T_FUNCTION","function",336],["T_WHITESPACE"," ",336],["T_STRING","invalidateCache",336],"(",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n    ",336],["T_COMMENT","\/\/ Invalidate the cache to make sure that other requests immediately see the\n",337],["T_WHITESPACE","    ",338],["T_COMMENT","\/\/ deletion before this request is terminated.\n",338],["T_WHITESPACE","    ",339],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","cache",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","invalidate",339],"(",["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","getCid",339],"(",")",")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","cacheInvalidated",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_STRING","TRUE",340],";",["T_WHITESPACE","\n  ",340],"}",["T_WHITESPACE","\n\n",341],"}",["T_WHITESPACE","\n",343]]
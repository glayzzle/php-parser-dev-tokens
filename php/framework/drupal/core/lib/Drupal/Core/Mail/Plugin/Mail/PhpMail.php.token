[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Mail",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Mail",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Mail",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MailFormatHelper",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Mail",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MailInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Site",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Settings",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Defines the default Drupal mail backend, using PHP's native mail() function.\n *\n * @Mail(\n *   id = \"php_mail\",\n *   label = @Translation(\"Default PHP mailer\"),\n *   description = @Translation(\"Sends the message as plain text, using PHP's native mail() function.\")\n * )\n *\/",10],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","PhpMail",19],["T_WHITESPACE"," ",19],["T_IMPLEMENTS","implements",19],["T_WHITESPACE"," ",19],["T_STRING","MailInterface",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Concatenates and wraps the email body for plain-text mails.\n   *\n   * @param array $message\n   *   A message array, as described in hook_mail_alter().\n   *\n   * @return array\n   *   The formatted $message.\n   *\/",21],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","format",30],"(",["T_ARRAY","array",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$message",30],")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_COMMENT","\/\/ Join the body array into one string.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$message",32],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","implode",32],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\\n\"",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$message",32],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",32],"]",")",";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Convert any HTML to plain-text.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$message",35],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",35],"]",["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","MailFormatHelper",35],["T_DOUBLE_COLON","::",35],["T_STRING","htmlToText",35],"(",["T_VARIABLE","$message",35],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",35],"]",")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ Wrap the mail body for sending.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$message",37],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",37],"]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","MailFormatHelper",37],["T_DOUBLE_COLON","::",37],["T_STRING","wrapMail",37],"(",["T_VARIABLE","$message",37],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",37],"]",")",";",["T_WHITESPACE","\n\n    ",37],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$message",39],";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Sends an email message.\n   *\n   * @param array $message\n   *   A message array, as described in hook_mail_alter().\n   *\n   * @return bool\n   *   TRUE if the mail was successfully accepted, otherwise FALSE.\n   *\n   * @see http:\/\/php.net\/manual\/function.mail.php\n   * @see \\Drupal\\Core\\Mail\\MailManagerInterface::mail()\n   *\/",42],["T_WHITESPACE","\n  ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","mail",54],"(",["T_ARRAY","array",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$message",54],")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_COMMENT","\/\/ If 'Return-Path' isn't already set in php.ini, we pass it separately\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ as an additional parameter instead of in the header.\n",56],["T_WHITESPACE","    ",57],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_ISSET","isset",57],"(",["T_VARIABLE","$message",57],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",57],"]","[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",57],"]",")",")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$return_path_set",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","strpos",58],"(",["T_STRING","ini_get",58],"(",["T_CONSTANT_ENCAPSED_STRING","'sendmail_path'",58],")",",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","' -f'",58],")",";",["T_WHITESPACE","\n      ",58],["T_IF","if",59],["T_WHITESPACE"," ",59],"(","!",["T_VARIABLE","$return_path_set",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n        ",59],["T_VARIABLE","$message",60],"[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",60],"]",["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$message",60],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",60],"]","[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",60],"]",";",["T_WHITESPACE","\n        ",60],["T_UNSET","unset",61],"(",["T_VARIABLE","$message",61],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",61],"]","[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",61],"]",")",";",["T_WHITESPACE","\n      ",61],"}",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$mimeheaders",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",";",["T_WHITESPACE","\n    ",64],["T_FOREACH","foreach",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$message",65],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",65],"]",["T_WHITESPACE"," ",65],["T_AS","as",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$name",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$value",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$mimeheaders",66],"[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$name",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","': '",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_STRING","Unicode",66],["T_DOUBLE_COLON","::",66],["T_STRING","mimeHeaderEncode",66],"(",["T_VARIABLE","$value",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$line_endings",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_STRING","Settings",68],["T_DOUBLE_COLON","::",68],["T_STRING","get",68],"(",["T_CONSTANT_ENCAPSED_STRING","'mail_line_endings'",68],",",["T_WHITESPACE"," ",68],["T_STRING","PHP_EOL",68],")",";",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Prepare mail commands.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$mail_subject",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","Unicode",70],["T_DOUBLE_COLON","::",70],["T_STRING","mimeHeaderEncode",70],"(",["T_VARIABLE","$message",70],"[",["T_CONSTANT_ENCAPSED_STRING","'subject'",70],"]",")",";",["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Note: email uses CRLF for line-endings. PHP's API requires LF\n",71],["T_WHITESPACE","    ",72],["T_COMMENT","\/\/ on Unix and CRLF on Windows. Drupal automatically guesses the\n",72],["T_WHITESPACE","    ",73],["T_COMMENT","\/\/ line-ending format appropriate for your system. If you need to\n",73],["T_WHITESPACE","    ",74],["T_COMMENT","\/\/ override this, adjust $settings['mail_line_endings'] in settings.php.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$mail_body",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","preg_replace",75],"(",["T_CONSTANT_ENCAPSED_STRING","'@\\r?\\n@'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$line_endings",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$message",75],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",75],"]",")",";",["T_WHITESPACE","\n    ",75],["T_COMMENT","\/\/ For headers, PHP's API suggests that we use CRLF normally,\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ but some MTAs incorrectly replace LF with CRLF. See #234403.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$mail_headers",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_STRING","join",78],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$mimeheaders",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$request",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Drupal",80],["T_DOUBLE_COLON","::",80],["T_STRING","request",80],"(",")",";",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ We suppress warnings and notices from mail() because of issues on some\n",82],["T_WHITESPACE","    ",83],["T_COMMENT","\/\/ hosts. The return value of this method will still indicate whether mail\n",83],["T_WHITESPACE","    ",84],["T_COMMENT","\/\/ was sent successfully.\n",84],["T_WHITESPACE","    ",85],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_VARIABLE","$request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","server",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","has",85],"(",["T_CONSTANT_ENCAPSED_STRING","'WINDIR'",85],")",["T_WHITESPACE"," ",85],["T_BOOLEAN_AND","&&",85],["T_WHITESPACE"," ",85],["T_STRING","strpos",85],"(",["T_VARIABLE","$request",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","server",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_CONSTANT_ENCAPSED_STRING","'SERVER_SOFTWARE'",85],")",",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Win32'",85],")",["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n      ",85],["T_COMMENT","\/\/ On most non-Windows systems, the \"-f\" option to the sendmail command\n",86],["T_WHITESPACE","      ",87],["T_COMMENT","\/\/ is used to set the Return-Path. There is no space between -f and\n",87],["T_WHITESPACE","      ",88],["T_COMMENT","\/\/ the value of the return path.\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$additional_headers",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_ISSET","isset",89],"(",["T_VARIABLE","$message",89],"[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",89],"]",")",["T_WHITESPACE"," ",89],"?",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'-f'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$message",89],"[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",89],"]",["T_WHITESPACE"," ",89],":",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","''",89],";",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$mail_result",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"@",["T_STRING","mail",90],"(",["T_WHITESPACE","\n        ",90],["T_VARIABLE","$message",91],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",91],"]",",",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$mail_subject",92],",",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$mail_body",93],",",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$mail_headers",94],",",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$additional_headers",95],["T_WHITESPACE","\n      ",95],")",";",["T_WHITESPACE","\n    ",96],"}",["T_WHITESPACE","\n    ",97],["T_ELSE","else",98],["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_COMMENT","\/\/ On Windows, PHP will use the value of sendmail_from for the\n",99],["T_WHITESPACE","      ",100],["T_COMMENT","\/\/ Return-Path header.\n",100],["T_WHITESPACE","      ",101],["T_VARIABLE","$old_from",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","ini_get",101],"(",["T_CONSTANT_ENCAPSED_STRING","'sendmail_from'",101],")",";",["T_WHITESPACE","\n      ",101],["T_STRING","ini_set",102],"(",["T_CONSTANT_ENCAPSED_STRING","'sendmail_from'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$message",102],"[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",102],"]",")",";",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$mail_result",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],"@",["T_STRING","mail",103],"(",["T_WHITESPACE","\n        ",103],["T_VARIABLE","$message",104],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",104],"]",",",["T_WHITESPACE","\n        ",104],["T_VARIABLE","$mail_subject",105],",",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$mail_body",106],",",["T_WHITESPACE","\n        ",106],["T_VARIABLE","$mail_headers",107],["T_WHITESPACE","\n      ",107],")",";",["T_WHITESPACE","\n      ",108],["T_STRING","ini_set",109],"(",["T_CONSTANT_ENCAPSED_STRING","'sendmail_from'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$old_from",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$mail_result",112],";",["T_WHITESPACE","\n  ",112],"}",["T_WHITESPACE","\n\n",113],"}",["T_WHITESPACE","\n",115]]
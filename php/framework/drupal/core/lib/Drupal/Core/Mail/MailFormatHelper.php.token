[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Mail",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Html",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Xss",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Site",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Settings",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Defines a class containing utility methods for formatting mail messages.\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","MailFormatHelper",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Internal array of urls replaced with tokens.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$urls",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Quoted regex expression based on base path.\n   *\n   * @var string\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_STATIC","static",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$regexp",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Array of tags supported.\n   *\n   * @var array\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_STATIC","static",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$supportedTags",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",")",";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Performs format=flowed soft wrapping for mail (RFC 3676).\n   *\n   * We use delsp=yes wrapping, but only break non-spaced languages when\n   * absolutely necessary to avoid compatibility issues.\n   *\n   * We deliberately use LF rather than CRLF, see MailManagerInterface::mail().\n   *\n   * @param string $text\n   *   The plain text to process.\n   * @param string $indent\n   *   (optional) A string to indent the text with. Only '>' characters are\n   *   repeated on subsequent wrapped lines. Others are replaced by spaces.\n   *\n   * @return string\n   *   The content of the email as a string with formatting applied.\n   *\/",36],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_STATIC","static",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","wrapMail",53],"(",["T_VARIABLE","$text",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$indent",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","''",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_COMMENT","\/\/ Convert CRLF into LF.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$text",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","str_replace",55],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\r\"",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","''",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$text",55],")",";",["T_WHITESPACE","\n    ",55],["T_COMMENT","\/\/ See if soft-wrapping is allowed.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$clean_indent",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STATIC","static",57],["T_DOUBLE_COLON","::",57],["T_STRING","htmlToTextClean",57],"(",["T_VARIABLE","$indent",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$soft",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","strpos",58],"(",["T_VARIABLE","$clean_indent",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","' '",58],")",["T_WHITESPACE"," ",58],["T_IS_IDENTICAL","===",58],["T_WHITESPACE"," ",58],["T_STRING","FALSE",58],";",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/\/ Check if the string has line breaks.\n",59],["T_WHITESPACE","    ",60],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_STRING","strpos",60],"(",["T_VARIABLE","$text",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",60],")",["T_WHITESPACE"," ",60],["T_IS_NOT_IDENTICAL","!==",60],["T_WHITESPACE"," ",60],["T_STRING","FALSE",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_COMMENT","\/\/ Remove trailing spaces to make existing breaks hard, but leave\n",61],["T_WHITESPACE","      ",62],["T_COMMENT","\/\/ signature marker untouched (RFC 3676, Section 4.3).\n",62],["T_WHITESPACE","      ",63],["T_VARIABLE","$text",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","preg_replace",63],"(",["T_CONSTANT_ENCAPSED_STRING","'\/(?(?<!^--) +\\n|  +\\n)\/m'",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$text",63],")",";",["T_WHITESPACE","\n      ",63],["T_COMMENT","\/\/ Wrap each line at the needed width.\n",64],["T_WHITESPACE","      ",65],["T_VARIABLE","$lines",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","explode",65],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$text",65],")",";",["T_WHITESPACE","\n      ",65],["T_STRING","array_walk",66],"(",["T_VARIABLE","$lines",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Mail\\MailFormatHelper::wrapMailLine'",66],",",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_CONSTANT_ENCAPSED_STRING","'soft'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$soft",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'length'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","strlen",66],"(",["T_VARIABLE","$indent",66],")",")",")",";",["T_WHITESPACE","\n      ",66],["T_VARIABLE","$text",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","implode",67],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$lines",67],")",";",["T_WHITESPACE","\n    ",67],"}",["T_WHITESPACE","\n    ",68],["T_ELSE","else",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_COMMENT","\/\/ Wrap this line.\n",70],["T_WHITESPACE","      ",71],["T_STATIC","static",71],["T_DOUBLE_COLON","::",71],["T_STRING","wrapMailLine",71],"(",["T_VARIABLE","$text",71],",",["T_WHITESPACE"," ",71],["T_LNUMBER","0",71],",",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'soft'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$soft",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'length'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_STRING","strlen",71],"(",["T_VARIABLE","$indent",71],")",")",")",";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n    ",72],["T_COMMENT","\/\/ Empty lines with nothing but spaces.\n",73],["T_WHITESPACE","    ",74],["T_VARIABLE","$text",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","preg_replace",74],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^ +\\n\/m'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$text",74],")",";",["T_WHITESPACE","\n    ",74],["T_COMMENT","\/\/ Space-stuff special lines.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$text",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","preg_replace",76],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^(>| |From)\/m'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","' $1'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$text",76],")",";",["T_WHITESPACE","\n    ",76],["T_COMMENT","\/\/ Apply indentation. We only include non-'>' indentation on the first line.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$text",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$indent",78],["T_WHITESPACE"," ",78],".",["T_WHITESPACE"," ",78],["T_STRING","substr",78],"(",["T_STRING","preg_replace",78],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^\/m'",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$clean_indent",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$text",78],")",",",["T_WHITESPACE"," ",78],["T_STRING","strlen",78],"(",["T_VARIABLE","$indent",78],")",")",";",["T_WHITESPACE","\n\n    ",78],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$text",80],";",["T_WHITESPACE","\n  ",80],"}",["T_WHITESPACE","\n\n  ",81],["T_DOC_COMMENT","\/**\n   * Transforms an HTML string into plain text, preserving its structure.\n   *\n   * The output will be suitable for use as 'format=flowed; delsp=yes' text\n   * (RFC 3676) and can be passed directly to MailManagerInterface::mail() for sending.\n   *\n   * We deliberately use LF rather than CRLF, see MailManagerInterface::mail().\n   *\n   * This function provides suitable alternatives for the following tags:\n   * <a> <em> <i> <strong> <b> <br> <p> <blockquote> <ul> <ol> <li> <dl> <dt>\n   * <dd> <h1> <h2> <h3> <h4> <h5> <h6> <hr>\n   *\n   * @param string $string\n   *   The string to be transformed.\n   * @param array $allowed_tags\n   *   (optional) If supplied, a list of tags that will be transformed. If\n   *   omitted, all supported tags are transformed.\n   *\n   * @return string\n   *   The transformed string.\n   *\/",83],["T_WHITESPACE","\n  ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_STATIC","static",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","htmlToText",104],"(",["T_VARIABLE","$string",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$allowed_tags",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","NULL",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_COMMENT","\/\/ Cache list of supported tags.\n",105],["T_WHITESPACE","    ",106],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_EMPTY","empty",106],"(",["T_STATIC","static",106],["T_DOUBLE_COLON","::",106],["T_VARIABLE","$supportedTags",106],")",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_STATIC","static",107],["T_DOUBLE_COLON","::",107],["T_VARIABLE","$supportedTags",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_CONSTANT_ENCAPSED_STRING","'a'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'em'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'i'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'strong'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'b'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'br'",107],",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'p'",107],",",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'blockquote'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'ul'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'ol'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'li'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'dl'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'dt'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'dd'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'h1'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'h2'",108],",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'h3'",108],",",["T_WHITESPACE","\n        ",108],["T_CONSTANT_ENCAPSED_STRING","'h4'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'h5'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'h6'",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'hr'",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Make sure only supported tags are kept.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$allowed_tags",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_ISSET","isset",113],"(",["T_VARIABLE","$allowed_tags",113],")",["T_WHITESPACE"," ",113],"?",["T_WHITESPACE"," ",113],["T_STRING","array_intersect",113],"(",["T_STATIC","static",113],["T_DOUBLE_COLON","::",113],["T_VARIABLE","$supportedTags",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$allowed_tags",113],")",["T_WHITESPACE"," ",113],":",["T_WHITESPACE"," ",113],["T_STATIC","static",113],["T_DOUBLE_COLON","::",113],["T_VARIABLE","$supportedTags",113],";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Make sure tags, entities and attributes are well-formed and properly\n",115],["T_WHITESPACE","    ",116],["T_COMMENT","\/\/ nested.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$string",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","Html",117],["T_DOUBLE_COLON","::",117],["T_STRING","normalize",117],"(",["T_STRING","Xss",117],["T_DOUBLE_COLON","::",117],["T_STRING","filter",117],"(",["T_VARIABLE","$string",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$allowed_tags",117],")",")",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Apply inline styles.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$string",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_STRING","preg_replace",120],"(",["T_CONSTANT_ENCAPSED_STRING","'!<\/?(em|i)((?> +)[^>]*)?>!i'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'\/'",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$string",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$string",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","preg_replace",121],"(",["T_CONSTANT_ENCAPSED_STRING","'!<\/?(strong|b)((?> +)[^>]*)?>!i'",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'*'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$string",121],")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Replace inline <a> tags with the text of link and a footnote.\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ 'See <a href=\"https:\/\/www.drupal.org\">the Drupal site<\/a>' becomes\n",124],["T_WHITESPACE","    ",125],["T_COMMENT","\/\/ 'See the Drupal site [1]' with the URL included as a footnote.\n",125],["T_WHITESPACE","    ",126],["T_STATIC","static",126],["T_DOUBLE_COLON","::",126],["T_STRING","htmlToMailUrls",126],"(",["T_STRING","NULL",126],",",["T_WHITESPACE"," ",126],["T_STRING","TRUE",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$pattern",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'@(<a[^>]+?href=\"([^\"]*)\"[^>]*?>(.+?)<\/a>)@i'",127],";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$string",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_STRING","preg_replace_callback",128],"(",["T_VARIABLE","$pattern",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'static::htmlToMailUrls'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$string",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$urls",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STATIC","static",129],["T_DOUBLE_COLON","::",129],["T_STRING","htmlToMailUrls",129],"(",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$footnotes",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","''",130],";",["T_WHITESPACE","\n    ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","count",131],"(",["T_VARIABLE","$urls",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$footnotes",132],["T_WHITESPACE"," ",132],["T_CONCAT_EQUAL",".=",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",132],";",["T_WHITESPACE","\n      ",132],["T_FOR","for",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$i",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_LNUMBER","0",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$max",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","count",133],"(",["T_VARIABLE","$urls",133],")",";",["T_WHITESPACE"," ",133],["T_VARIABLE","$i",133],["T_WHITESPACE"," ",133],"<",["T_WHITESPACE"," ",133],["T_VARIABLE","$max",133],";",["T_WHITESPACE"," ",133],["T_VARIABLE","$i",133],["T_INC","++",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$footnotes",134],["T_WHITESPACE"," ",134],["T_CONCAT_EQUAL",".=",134],["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'['",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],"(",["T_VARIABLE","$i",134],["T_WHITESPACE"," ",134],"+",["T_WHITESPACE"," ",134],["T_LNUMBER","1",134],")",["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'] '",134],["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_VARIABLE","$urls",134],"[",["T_VARIABLE","$i",134],"]",["T_WHITESPACE"," ",134],".",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",134],";",["T_WHITESPACE","\n      ",134],"}",["T_WHITESPACE","\n    ",135],"}",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Split tags from text.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$split",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","preg_split",139],"(",["T_CONSTANT_ENCAPSED_STRING","'\/<([^>]+?)>\/'",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$string",139],",",["T_WHITESPACE"," ",139],"-",["T_LNUMBER","1",139],",",["T_WHITESPACE"," ",139],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",139],")",";",["T_WHITESPACE","\n    ",139],["T_COMMENT","\/\/ Note: PHP ensures the array consists of alternating delimiters and\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ literals and begins and ends with a literal (inserting $null as\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ required).\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ Odd\/even counter (tag or no tag).\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$tag",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_STRING","FALSE",144],";",["T_WHITESPACE","\n    ",144],["T_COMMENT","\/\/ Case conversion function.\n",145],["T_WHITESPACE","    ",146],["T_VARIABLE","$casing",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","NULL",146],";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$output",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","''",147],";",["T_WHITESPACE","\n    ",147],["T_COMMENT","\/\/ All current indentation string chunks.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$indent",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",")",";",["T_WHITESPACE","\n    ",149],["T_COMMENT","\/\/ Array of counters for opened lists.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$lists",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",")",";",["T_WHITESPACE","\n    ",151],["T_FOREACH","foreach",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$split",152],["T_WHITESPACE"," ",152],["T_AS","as",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$value",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n      ",152],["T_COMMENT","\/\/ Holds a string ready to be formatted and output.\n",153],["T_WHITESPACE","      ",154],["T_VARIABLE","$chunk",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_STRING","NULL",154],";",["T_WHITESPACE","\n\n      ",154],["T_COMMENT","\/\/ Process HTML tags (but don't output any literally).\n",156],["T_WHITESPACE","      ",157],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_VARIABLE","$tag",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n        ",157],["T_LIST","list",158],"(",["T_VARIABLE","$tagname",158],")",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_STRING","explode",158],"(",["T_CONSTANT_ENCAPSED_STRING","' '",158],",",["T_WHITESPACE"," ",158],["T_STRING","strtolower",158],"(",["T_VARIABLE","$value",158],")",",",["T_WHITESPACE"," ",158],["T_LNUMBER","2",158],")",";",["T_WHITESPACE","\n        ",158],["T_SWITCH","switch",159],["T_WHITESPACE"," ",159],"(",["T_VARIABLE","$tagname",159],")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n          ",159],["T_COMMENT","\/\/ List counters.\n",160],["T_WHITESPACE","          ",161],["T_CASE","case",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'ul'",161],":",["T_WHITESPACE","\n            ",161],["T_STRING","array_unshift",162],"(",["T_VARIABLE","$lists",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'*'",162],")",";",["T_WHITESPACE","\n            ",162],["T_BREAK","break",163],";",["T_WHITESPACE","\n\n          ",163],["T_CASE","case",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'ol'",165],":",["T_WHITESPACE","\n            ",165],["T_STRING","array_unshift",166],"(",["T_VARIABLE","$lists",166],",",["T_WHITESPACE"," ",166],["T_LNUMBER","1",166],")",";",["T_WHITESPACE","\n            ",166],["T_BREAK","break",167],";",["T_WHITESPACE","\n\n          ",167],["T_CASE","case",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'\/ul'",169],":",["T_WHITESPACE","\n          ",169],["T_CASE","case",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'\/ol'",170],":",["T_WHITESPACE","\n            ",170],["T_STRING","array_shift",171],"(",["T_VARIABLE","$lists",171],")",";",["T_WHITESPACE","\n            ",171],["T_COMMENT","\/\/ Ensure blank new-line.\n",172],["T_WHITESPACE","            ",173],["T_VARIABLE","$chunk",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","''",173],";",["T_WHITESPACE","\n            ",173],["T_BREAK","break",174],";",["T_WHITESPACE","\n\n          ",174],["T_COMMENT","\/\/ Quotation\/list markers, non-fancy headers.\n",176],["T_WHITESPACE","          ",177],["T_CASE","case",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'blockquote'",177],":",["T_WHITESPACE","\n            ",177],["T_COMMENT","\/\/ Format=flowed indentation cannot be mixed with lists.\n",178],["T_WHITESPACE","            ",179],["T_VARIABLE","$indent",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_STRING","count",179],"(",["T_VARIABLE","$lists",179],")",["T_WHITESPACE"," ",179],"?",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","' \"'",179],["T_WHITESPACE"," ",179],":",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'>'",179],";",["T_WHITESPACE","\n            ",179],["T_BREAK","break",180],";",["T_WHITESPACE","\n\n          ",180],["T_CASE","case",182],["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'li'",182],":",["T_WHITESPACE","\n            ",182],["T_VARIABLE","$indent",183],"[","]",["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ISSET","isset",183],"(",["T_VARIABLE","$lists",183],"[",["T_LNUMBER","0",183],"]",")",["T_WHITESPACE"," ",183],["T_BOOLEAN_AND","&&",183],["T_WHITESPACE"," ",183],["T_STRING","is_numeric",183],"(",["T_VARIABLE","$lists",183],"[",["T_LNUMBER","0",183],"]",")",["T_WHITESPACE"," ",183],"?",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","' '",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$lists",183],"[",["T_LNUMBER","0",183],"]",["T_INC","++",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","') '",183],["T_WHITESPACE"," ",183],":",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","' * '",183],";",["T_WHITESPACE","\n            ",183],["T_BREAK","break",184],";",["T_WHITESPACE","\n\n          ",184],["T_CASE","case",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'dd'",186],":",["T_WHITESPACE","\n            ",186],["T_VARIABLE","$indent",187],"[","]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'    '",187],";",["T_WHITESPACE","\n            ",187],["T_BREAK","break",188],";",["T_WHITESPACE","\n\n          ",188],["T_CASE","case",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'h3'",190],":",["T_WHITESPACE","\n            ",190],["T_VARIABLE","$indent",191],"[","]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'.... '",191],";",["T_WHITESPACE","\n            ",191],["T_BREAK","break",192],";",["T_WHITESPACE","\n\n          ",192],["T_CASE","case",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'h4'",194],":",["T_WHITESPACE","\n            ",194],["T_VARIABLE","$indent",195],"[","]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'.. '",195],";",["T_WHITESPACE","\n            ",195],["T_BREAK","break",196],";",["T_WHITESPACE","\n\n          ",196],["T_CASE","case",198],["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'\/blockquote'",198],":",["T_WHITESPACE","\n            ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_STRING","count",199],"(",["T_VARIABLE","$lists",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n              ",199],["T_COMMENT","\/\/ Append closing quote for inline quotes (immediately).\n",200],["T_WHITESPACE","              ",201],["T_VARIABLE","$output",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_STRING","rtrim",201],"(",["T_VARIABLE","$output",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","\"> \\n\"",201],")",["T_WHITESPACE"," ",201],".",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","\"\\\"\\n\"",201],";",["T_WHITESPACE","\n              ",201],["T_COMMENT","\/\/ Ensure blank new-line.\n",202],["T_WHITESPACE","              ",203],["T_VARIABLE","$chunk",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","''",203],";",["T_WHITESPACE","\n            ",203],"}",["T_WHITESPACE","\n            ",204],["T_COMMENT","\/\/ Intentional fall-through to the processing for '\/li' and '\/dd'.\n",205],["T_WHITESPACE","          ",206],["T_CASE","case",206],["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'\/li'",206],":",["T_WHITESPACE","\n          ",206],["T_CASE","case",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'\/dd'",207],":",["T_WHITESPACE","\n            ",207],["T_STRING","array_pop",208],"(",["T_VARIABLE","$indent",208],")",";",["T_WHITESPACE","\n            ",208],["T_BREAK","break",209],";",["T_WHITESPACE","\n\n          ",209],["T_CASE","case",211],["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'\/h3'",211],":",["T_WHITESPACE","\n          ",211],["T_CASE","case",212],["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'\/h4'",212],":",["T_WHITESPACE","\n            ",212],["T_STRING","array_pop",213],"(",["T_VARIABLE","$indent",213],")",";",["T_WHITESPACE","\n            ",213],["T_COMMENT","\/\/ Intentional fall-through to the processing for '\/h5' and '\/h6'.\n",214],["T_WHITESPACE","          ",215],["T_CASE","case",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'\/h5'",215],":",["T_WHITESPACE","\n          ",215],["T_CASE","case",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'\/h6'",216],":",["T_WHITESPACE","\n            ",216],["T_COMMENT","\/\/ Ensure blank new-line.\n",217],["T_WHITESPACE","            ",218],["T_VARIABLE","$chunk",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","''",218],";",["T_WHITESPACE","\n            ",218],["T_BREAK","break",219],";",["T_WHITESPACE","\n\n          ",219],["T_COMMENT","\/\/ Fancy headers.\n",221],["T_WHITESPACE","          ",222],["T_CASE","case",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'h1'",222],":",["T_WHITESPACE","\n            ",222],["T_VARIABLE","$indent",223],"[","]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'======== '",223],";",["T_WHITESPACE","\n            ",223],["T_VARIABLE","$casing",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Component\\Utility\\Unicode::strtoupper'",224],";",["T_WHITESPACE","\n            ",224],["T_BREAK","break",225],";",["T_WHITESPACE","\n\n          ",225],["T_CASE","case",227],["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'h2'",227],":",["T_WHITESPACE","\n            ",227],["T_VARIABLE","$indent",228],"[","]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'-------- '",228],";",["T_WHITESPACE","\n            ",228],["T_VARIABLE","$casing",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Component\\Utility\\Unicode::strtoupper'",229],";",["T_WHITESPACE","\n            ",229],["T_BREAK","break",230],";",["T_WHITESPACE","\n\n          ",230],["T_CASE","case",232],["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'\/h1'",232],":",["T_WHITESPACE","\n          ",232],["T_CASE","case",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'\/h2'",233],":",["T_WHITESPACE","\n            ",233],["T_VARIABLE","$casing",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_STRING","NULL",234],";",["T_WHITESPACE","\n            ",234],["T_COMMENT","\/\/ Pad the line with dashes.\n",235],["T_WHITESPACE","            ",236],["T_VARIABLE","$output",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STATIC","static",236],["T_DOUBLE_COLON","::",236],["T_STRING","htmlToTextPad",236],"(",["T_VARIABLE","$output",236],",",["T_WHITESPACE"," ",236],"(",["T_VARIABLE","$tagname",236],["T_WHITESPACE"," ",236],["T_IS_EQUAL","==",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'\/h1'",236],")",["T_WHITESPACE"," ",236],"?",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'='",236],["T_WHITESPACE"," ",236],":",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'-'",236],",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","' '",236],")",";",["T_WHITESPACE","\n            ",236],["T_STRING","array_pop",237],"(",["T_VARIABLE","$indent",237],")",";",["T_WHITESPACE","\n            ",237],["T_COMMENT","\/\/ Ensure blank new-line.\n",238],["T_WHITESPACE","            ",239],["T_VARIABLE","$chunk",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","''",239],";",["T_WHITESPACE","\n            ",239],["T_BREAK","break",240],";",["T_WHITESPACE","\n\n          ",240],["T_COMMENT","\/\/ Horizontal rulers.\n",242],["T_WHITESPACE","          ",243],["T_CASE","case",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'hr'",243],":",["T_WHITESPACE","\n            ",243],["T_COMMENT","\/\/ Insert immediately.\n",244],["T_WHITESPACE","            ",245],["T_VARIABLE","$output",245],["T_WHITESPACE"," ",245],["T_CONCAT_EQUAL",".=",245],["T_WHITESPACE"," ",245],["T_STATIC","static",245],["T_DOUBLE_COLON","::",245],["T_STRING","wrapMail",245],"(",["T_CONSTANT_ENCAPSED_STRING","''",245],",",["T_WHITESPACE"," ",245],["T_STRING","implode",245],"(",["T_CONSTANT_ENCAPSED_STRING","''",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$indent",245],")",")",["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",245],";",["T_WHITESPACE","\n            ",245],["T_VARIABLE","$output",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_STATIC","static",246],["T_DOUBLE_COLON","::",246],["T_STRING","htmlToTextPad",246],"(",["T_VARIABLE","$output",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'-'",246],")",";",["T_WHITESPACE","\n            ",246],["T_BREAK","break",247],";",["T_WHITESPACE","\n\n          ",247],["T_COMMENT","\/\/ Paragraphs and definition lists.\n",249],["T_WHITESPACE","          ",250],["T_CASE","case",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'\/p'",250],":",["T_WHITESPACE","\n          ",250],["T_CASE","case",251],["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'\/dl'",251],":",["T_WHITESPACE","\n            ",251],["T_COMMENT","\/\/ Ensure blank new-line.\n",252],["T_WHITESPACE","            ",253],["T_VARIABLE","$chunk",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","''",253],";",["T_WHITESPACE","\n            ",253],["T_BREAK","break",254],";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n      ",255],"}",["T_WHITESPACE","\n      ",256],["T_COMMENT","\/\/ Process blocks of text.\n",257],["T_WHITESPACE","      ",258],["T_ELSE","else",258],["T_WHITESPACE"," ",258],"{",["T_WHITESPACE","\n        ",258],["T_COMMENT","\/\/ Convert inline HTML text to plain text; not removing line-breaks or\n",259],["T_WHITESPACE","        ",260],["T_COMMENT","\/\/ white-space, since that breaks newlines when sanitizing plain-text.\n",260],["T_WHITESPACE","        ",261],["T_VARIABLE","$value",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_STRING","trim",261],"(",["T_STRING","Html",261],["T_DOUBLE_COLON","::",261],["T_STRING","decodeEntities",261],"(",["T_VARIABLE","$value",261],")",")",";",["T_WHITESPACE","\n        ",261],["T_IF","if",262],["T_WHITESPACE"," ",262],"(",["T_STRING","Unicode",262],["T_DOUBLE_COLON","::",262],["T_STRING","strlen",262],"(",["T_VARIABLE","$value",262],")",")",["T_WHITESPACE"," ",262],"{",["T_WHITESPACE","\n          ",262],["T_VARIABLE","$chunk",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$value",263],";",["T_WHITESPACE","\n        ",263],"}",["T_WHITESPACE","\n      ",264],"}",["T_WHITESPACE","\n\n      ",265],["T_COMMENT","\/\/ See if there is something waiting to be output.\n",267],["T_WHITESPACE","      ",268],["T_IF","if",268],["T_WHITESPACE"," ",268],"(",["T_ISSET","isset",268],"(",["T_VARIABLE","$chunk",268],")",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n        ",268],["T_COMMENT","\/\/ Apply any necessary case conversion.\n",269],["T_WHITESPACE","        ",270],["T_IF","if",270],["T_WHITESPACE"," ",270],"(",["T_ISSET","isset",270],"(",["T_VARIABLE","$casing",270],")",")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n          ",270],["T_VARIABLE","$chunk",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_STRING","call_user_func",271],"(",["T_VARIABLE","$casing",271],",",["T_WHITESPACE"," ",271],["T_VARIABLE","$chunk",271],")",";",["T_WHITESPACE","\n        ",271],"}",["T_WHITESPACE","\n        ",272],["T_VARIABLE","$line_endings",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","Settings",273],["T_DOUBLE_COLON","::",273],["T_STRING","get",273],"(",["T_CONSTANT_ENCAPSED_STRING","'mail_line_endings'",273],",",["T_WHITESPACE"," ",273],["T_STRING","PHP_EOL",273],")",";",["T_WHITESPACE","\n        ",273],["T_COMMENT","\/\/ Format it and apply the current indentation.\n",274],["T_WHITESPACE","        ",275],["T_VARIABLE","$output",275],["T_WHITESPACE"," ",275],["T_CONCAT_EQUAL",".=",275],["T_WHITESPACE"," ",275],["T_STATIC","static",275],["T_DOUBLE_COLON","::",275],["T_STRING","wrapMail",275],"(",["T_VARIABLE","$chunk",275],",",["T_WHITESPACE"," ",275],["T_STRING","implode",275],"(",["T_CONSTANT_ENCAPSED_STRING","''",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$indent",275],")",")",["T_WHITESPACE"," ",275],".",["T_WHITESPACE"," ",275],["T_VARIABLE","$line_endings",275],";",["T_WHITESPACE","\n        ",275],["T_COMMENT","\/\/ Remove non-quotation markers from indentation.\n",276],["T_WHITESPACE","        ",277],["T_VARIABLE","$indent",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_STRING","array_map",277],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Mail\\MailFormatHelper::htmlToTextClean'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$indent",277],")",";",["T_WHITESPACE","\n      ",277],"}",["T_WHITESPACE","\n\n      ",278],["T_VARIABLE","$tag",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],"!",["T_VARIABLE","$tag",280],";",["T_WHITESPACE","\n    ",280],"}",["T_WHITESPACE","\n\n    ",281],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_VARIABLE","$output",283],["T_WHITESPACE"," ",283],".",["T_WHITESPACE"," ",283],["T_VARIABLE","$footnotes",283],";",["T_WHITESPACE","\n  ",283],"}",["T_WHITESPACE","\n\n  ",284],["T_DOC_COMMENT","\/**\n   * Wraps words on a single line.\n   *\n   * Callback for array_walk() within\n   * \\Drupal\\Core\\Mail\\MailFormatHelper::wrapMail().\n   *\n   * Note that we are skipping MIME content header lines, because attached\n   * files, especially applications, could have long MIME types or long\n   * filenames which result in line length longer than the 77 characters limit\n   * and wrapping that line will break the email format. For instance, the\n   * attached file hello_drupal.docx will produce the following Content-Type:\n   * @code\n   * Content-Type:\n   * application\/vnd.openxmlformats-officedocument.wordprocessingml.document;\n   * name=\"hello_drupal.docx\"\n   * @endcode\n   *\/",286],["T_WHITESPACE","\n  ",302],["T_PROTECTED","protected",303],["T_WHITESPACE"," ",303],["T_STATIC","static",303],["T_WHITESPACE"," ",303],["T_FUNCTION","function",303],["T_WHITESPACE"," ",303],["T_STRING","wrapMailLine",303],"(","&",["T_VARIABLE","$line",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$key",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$values",303],")",["T_WHITESPACE"," ",303],"{",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$line_is_mime_header",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_STRING","FALSE",304],";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$mime_headers",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",["T_WHITESPACE","\n      ",305],["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",306],",",["T_WHITESPACE","\n      ",306],["T_CONSTANT_ENCAPSED_STRING","'Content-Transfer-Encoding'",307],",",["T_WHITESPACE","\n      ",307],["T_CONSTANT_ENCAPSED_STRING","'Content-Disposition'",308],",",["T_WHITESPACE","\n      ",308],["T_CONSTANT_ENCAPSED_STRING","'Content-Description'",309],",",["T_WHITESPACE","\n    ",309],")",";",["T_WHITESPACE","\n\n    ",310],["T_COMMENT","\/\/ Do not break MIME headers which could be longer than 77 characters.\n",312],["T_WHITESPACE","    ",313],["T_FOREACH","foreach",313],["T_WHITESPACE"," ",313],"(",["T_VARIABLE","$mime_headers",313],["T_WHITESPACE"," ",313],["T_AS","as",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$header",313],")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n      ",313],["T_IF","if",314],["T_WHITESPACE"," ",314],"(",["T_STRING","strpos",314],"(",["T_VARIABLE","$line",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$header",314],["T_WHITESPACE"," ",314],".",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","': '",314],")",["T_WHITESPACE"," ",314],["T_IS_IDENTICAL","===",314],["T_WHITESPACE"," ",314],["T_LNUMBER","0",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n        ",314],["T_VARIABLE","$line_is_mime_header",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_STRING","TRUE",315],";",["T_WHITESPACE","\n        ",315],["T_BREAK","break",316],";",["T_WHITESPACE","\n      ",316],"}",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n    ",318],["T_IF","if",319],["T_WHITESPACE"," ",319],"(","!",["T_VARIABLE","$line_is_mime_header",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n      ",319],["T_COMMENT","\/\/ Use soft-breaks only for purely quoted or unindented text.\n",320],["T_WHITESPACE","      ",321],["T_VARIABLE","$line",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_STRING","wordwrap",321],"(",["T_VARIABLE","$line",321],",",["T_WHITESPACE"," ",321],["T_LNUMBER","77",321],["T_WHITESPACE"," ",321],"-",["T_WHITESPACE"," ",321],["T_VARIABLE","$values",321],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",321],"]",",",["T_WHITESPACE"," ",321],["T_VARIABLE","$values",321],"[",["T_CONSTANT_ENCAPSED_STRING","'soft'",321],"]",["T_WHITESPACE"," ",321],"?",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","\" \\n\"",321],["T_WHITESPACE"," ",321],":",["T_WHITESPACE"," ",321],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n    ",322],["T_COMMENT","\/\/ Break really long words at the maximum width allowed.\n",323],["T_WHITESPACE","    ",324],["T_VARIABLE","$line",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","wordwrap",324],"(",["T_VARIABLE","$line",324],",",["T_WHITESPACE"," ",324],["T_LNUMBER","996",324],["T_WHITESPACE"," ",324],"-",["T_WHITESPACE"," ",324],["T_VARIABLE","$values",324],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",324],"]",",",["T_WHITESPACE"," ",324],["T_VARIABLE","$values",324],"[",["T_CONSTANT_ENCAPSED_STRING","'soft'",324],"]",["T_WHITESPACE"," ",324],"?",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","\" \\n\"",324],["T_WHITESPACE"," ",324],":",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",324],",",["T_WHITESPACE"," ",324],["T_STRING","TRUE",324],")",";",["T_WHITESPACE","\n  ",324],"}",["T_WHITESPACE","\n\n  ",325],["T_DOC_COMMENT","\/**\n   * Keeps track of URLs and replaces them with placeholder tokens.\n   *\n   * Callback for preg_replace_callback() within\n   * \\Drupal\\Core\\Mail\\MailFormatHelper::htmlToText().\n   *\/",327],["T_WHITESPACE","\n  ",332],["T_PROTECTED","protected",333],["T_WHITESPACE"," ",333],["T_STATIC","static",333],["T_WHITESPACE"," ",333],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","htmlToMailUrls",333],"(",["T_VARIABLE","$match",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","NULL",333],",",["T_WHITESPACE"," ",333],["T_VARIABLE","$reset",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","FALSE",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n    ",333],["T_COMMENT","\/\/ @todo Use request context instead.\n",334],["T_WHITESPACE","    ",335],["T_GLOBAL","global",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$base_url",335],",",["T_WHITESPACE"," ",335],["T_VARIABLE","$base_path",335],";",["T_WHITESPACE","\n\n    ",335],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_VARIABLE","$reset",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n      ",337],["T_COMMENT","\/\/ Reset internal URL list.\n",338],["T_WHITESPACE","      ",339],["T_STATIC","static",339],["T_DOUBLE_COLON","::",339],["T_VARIABLE","$urls",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_ARRAY","array",339],"(",")",";",["T_WHITESPACE","\n    ",339],"}",["T_WHITESPACE","\n    ",340],["T_ELSE","else",341],["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n      ",341],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_EMPTY","empty",342],"(",["T_STATIC","static",342],["T_DOUBLE_COLON","::",342],["T_VARIABLE","$regexp",342],")",")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n        ",342],["T_STATIC","static",343],["T_DOUBLE_COLON","::",343],["T_VARIABLE","$regexp",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'@^'",343],["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_STRING","preg_quote",343],"(",["T_VARIABLE","$base_path",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'@'",343],")",["T_WHITESPACE"," ",343],".",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'@'",343],";",["T_WHITESPACE","\n      ",343],"}",["T_WHITESPACE","\n      ",344],["T_IF","if",345],["T_WHITESPACE"," ",345],"(",["T_VARIABLE","$match",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n        ",345],["T_LIST","list",346],"(",",",["T_WHITESPACE"," ",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$url",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$label",346],")",["T_WHITESPACE"," ",346],"=",["T_WHITESPACE"," ",346],["T_VARIABLE","$match",346],";",["T_WHITESPACE","\n        ",346],["T_COMMENT","\/\/ Ensure all URLs are absolute.\n",347],["T_WHITESPACE","        ",348],["T_STATIC","static",348],["T_DOUBLE_COLON","::",348],["T_VARIABLE","$urls",348],"[","]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","strpos",348],"(",["T_VARIABLE","$url",348],",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",348],")",["T_WHITESPACE"," ",348],"?",["T_WHITESPACE"," ",348],["T_VARIABLE","$url",348],["T_WHITESPACE"," ",348],":",["T_WHITESPACE"," ",348],["T_STRING","preg_replace",348],"(",["T_STATIC","static",348],["T_DOUBLE_COLON","::",348],["T_VARIABLE","$regexp",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$base_url",348],["T_WHITESPACE"," ",348],".",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'\/'",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$url",348],")",";",["T_WHITESPACE","\n        ",348],["T_RETURN","return",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$label",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","' ['",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_STRING","count",349],"(",["T_STATIC","static",349],["T_DOUBLE_COLON","::",349],["T_VARIABLE","$urls",349],")",["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","']'",349],";",["T_WHITESPACE","\n      ",349],"}",["T_WHITESPACE","\n    ",350],"}",["T_WHITESPACE","\n    ",351],["T_RETURN","return",352],["T_WHITESPACE"," ",352],["T_STATIC","static",352],["T_DOUBLE_COLON","::",352],["T_VARIABLE","$urls",352],";",["T_WHITESPACE","\n  ",352],"}",["T_WHITESPACE","\n\n  ",353],["T_DOC_COMMENT","\/**\n   * Replaces non-quotation markers from a piece of indentation with spaces.\n   *\n   * Callback for array_map() within\n   * \\Drupal\\Core\\Mail\\MailFormatHelper::htmlToText().\n   *\/",355],["T_WHITESPACE","\n  ",360],["T_PROTECTED","protected",361],["T_WHITESPACE"," ",361],["T_STATIC","static",361],["T_WHITESPACE"," ",361],["T_FUNCTION","function",361],["T_WHITESPACE"," ",361],["T_STRING","htmlToTextClean",361],"(",["T_VARIABLE","$indent",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n    ",361],["T_RETURN","return",362],["T_WHITESPACE"," ",362],["T_STRING","preg_replace",362],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^>]\/'",362],",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","' '",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$indent",362],")",";",["T_WHITESPACE","\n  ",362],"}",["T_WHITESPACE","\n\n  ",363],["T_DOC_COMMENT","\/**\n   * Pads the last line with the given character.\n   *\n   * @param string $text\n   *   The text to pad.\n   * @param string $pad\n   *   The character to pad the end of the string with.\n   * @param string $prefix\n   *   (optional) Prefix to add to the string.\n   *\n   * @return string\n   *   The padded string.\n   *\n   * @see \\Drupal\\Core\\Mail\\MailFormatHelper::htmlToText()\n   *\/",365],["T_WHITESPACE","\n  ",379],["T_PROTECTED","protected",380],["T_WHITESPACE"," ",380],["T_STATIC","static",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","htmlToTextPad",380],"(",["T_VARIABLE","$text",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$pad",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$prefix",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","''",380],")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n    ",380],["T_COMMENT","\/\/ Remove last line break.\n",381],["T_WHITESPACE","    ",382],["T_VARIABLE","$text",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_STRING","substr",382],"(",["T_VARIABLE","$text",382],",",["T_WHITESPACE"," ",382],["T_LNUMBER","0",382],",",["T_WHITESPACE"," ",382],"-",["T_LNUMBER","1",382],")",";",["T_WHITESPACE","\n    ",382],["T_COMMENT","\/\/ Calculate needed padding space and add it.\n",383],["T_WHITESPACE","    ",384],["T_IF","if",384],["T_WHITESPACE"," ",384],"(","(",["T_VARIABLE","$p",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","strrpos",384],"(",["T_VARIABLE","$text",384],",",["T_WHITESPACE"," ",384],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",384],")",")",["T_WHITESPACE"," ",384],["T_IS_IDENTICAL","===",384],["T_WHITESPACE"," ",384],["T_STRING","FALSE",384],")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n      ",384],["T_VARIABLE","$p",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],"-",["T_LNUMBER","1",385],";",["T_WHITESPACE","\n    ",385],"}",["T_WHITESPACE","\n    ",386],["T_VARIABLE","$n",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","max",387],"(",["T_LNUMBER","0",387],",",["T_WHITESPACE"," ",387],["T_LNUMBER","79",387],["T_WHITESPACE"," ",387],"-",["T_WHITESPACE"," ",387],"(",["T_STRING","strlen",387],"(",["T_VARIABLE","$text",387],")",["T_WHITESPACE"," ",387],"-",["T_WHITESPACE"," ",387],["T_VARIABLE","$p",387],")",["T_WHITESPACE"," ",387],"-",["T_WHITESPACE"," ",387],["T_STRING","strlen",387],"(",["T_VARIABLE","$prefix",387],")",")",";",["T_WHITESPACE","\n    ",387],["T_COMMENT","\/\/ Add prefix and padding, and restore linebreak.\n",388],["T_WHITESPACE","    ",389],["T_RETURN","return",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$text",389],["T_WHITESPACE"," ",389],".",["T_WHITESPACE"," ",389],["T_VARIABLE","$prefix",389],["T_WHITESPACE"," ",389],".",["T_WHITESPACE"," ",389],["T_STRING","str_repeat",389],"(",["T_VARIABLE","$pad",389],",",["T_WHITESPACE"," ",389],["T_VARIABLE","$n",389],")",["T_WHITESPACE"," ",389],".",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",389],";",["T_WHITESPACE","\n  ",389],"}",["T_WHITESPACE","\n\n",390],"}",["T_WHITESPACE","\n",392]]
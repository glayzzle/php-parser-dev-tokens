[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Mail",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Render",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PlainTextOutput",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Logger",6],["T_NS_SEPARATOR","\\",6],["T_STRING","LoggerChannelFactoryInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DefaultPluginManager",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Cache",8],["T_NS_SEPARATOR","\\",8],["T_STRING","CacheBackendInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Extension",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModuleHandlerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Config",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ConfigFactoryInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Render",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RenderContext",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Render",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RendererInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StringTranslation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","StringTranslationTrait",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Core",14],["T_NS_SEPARATOR","\\",14],["T_STRING","StringTranslation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","TranslationInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Provides a Mail plugin manager.\n *\n * @see \\Drupal\\Core\\Annotation\\Mail\n * @see \\Drupal\\Core\\Mail\\MailInterface\n * @see plugin_api\n *\/",16],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","MailManager",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","DefaultPluginManager",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","MailManagerInterface",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_USE","use",25],["T_WHITESPACE"," ",25],["T_STRING","StringTranslationTrait",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * The config factory.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$configFactory",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * The logger factory.\n   *\n   * @var \\Drupal\\Core\\Logger\\LoggerChannelFactoryInterface\n   *\/",34],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$loggerFactory",39],";",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * The renderer.\n   *\n   * @var \\Drupal\\Core\\Render\\RendererInterface\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$renderer",46],";",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * List of already instantiated mail plugins.\n   *\n   * @var array\n   *\/",48],["T_WHITESPACE","\n  ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$instances",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",")",";",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Constructs the MailManager object.\n   *\n   * @param \\Traversable $namespaces\n   *   An object that implements \\Traversable which contains the root paths\n   *   keyed by the corresponding namespace to look for plugin implementations.\n   * @param \\Drupal\\Core\\Cache\\CacheBackendInterface $cache_backend\n   *   Cache backend instance to use.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler to invoke the alter hook with.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The configuration factory.\n   * @param \\Drupal\\Core\\Logger\\LoggerChannelFactoryInterface $logger_factory\n   *   The logger channel factory.\n   * @param \\Drupal\\Core\\StringTranslation\\TranslationInterface $string_translation\n   *   The string translation service.\n   * @param \\Drupal\\Core\\Render\\RendererInterface $renderer\n   *   The renderer.\n   *\/",55],["T_WHITESPACE","\n  ",73],["T_PUBLIC","public",74],["T_WHITESPACE"," ",74],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","__construct",74],"(",["T_NS_SEPARATOR","\\",74],["T_STRING","Traversable",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$namespaces",74],",",["T_WHITESPACE"," ",74],["T_STRING","CacheBackendInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$cache_backend",74],",",["T_WHITESPACE"," ",74],["T_STRING","ModuleHandlerInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$module_handler",74],",",["T_WHITESPACE"," ",74],["T_STRING","ConfigFactoryInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$config_factory",74],",",["T_WHITESPACE"," ",74],["T_STRING","LoggerChannelFactoryInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$logger_factory",74],",",["T_WHITESPACE"," ",74],["T_STRING","TranslationInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$string_translation",74],",",["T_WHITESPACE"," ",74],["T_STRING","RendererInterface",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$renderer",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_STRING","parent",75],["T_DOUBLE_COLON","::",75],["T_STRING","__construct",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Plugin\/Mail'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$namespaces",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$module_handler",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Mail\\MailInterface'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Annotation\\Mail'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","alterInfo",76],"(",["T_CONSTANT_ENCAPSED_STRING","'mail_backend_info'",76],")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setCacheBackend",77],"(",["T_VARIABLE","$cache_backend",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'mail_backend_plugins'",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","configFactory",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$config_factory",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","loggerFactory",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$logger_factory",79],";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","stringTranslation",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$string_translation",80],";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","renderer",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$renderer",81],";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * Overrides PluginManagerBase::getInstance().\n   *\n   * Returns an instance of the mail plugin to use for a given message ID.\n   *\n   * The selection of a particular implementation is controlled via the config\n   * 'system.mail.interface', which is a keyed array.  The default\n   * implementation is the mail plugin whose ID is the value of 'default' key. A\n   * more specific match first to key and then to module will be used in\n   * preference to the default. To specify a different plugin for all mail sent\n   * by one module, set the plugin ID as the value for the key corresponding to\n   * the module name. To specify a plugin for a particular message sent by one\n   * module, set the plugin ID as the value for the array key that is the\n   * message ID, which is \"${module}_${key}\".\n   *\n   * For example to debug all mail sent by the user module by logging it to a\n   * file, you might set the variable as something like:\n   *\n   * @code\n   * array(\n   *   'default' => 'php_mail',\n   *   'user' => 'devel_mail_log',\n   * );\n   * @endcode\n   *\n   * Finally, a different system can be specified for a specific message ID (see\n   * the $key param), such as one of the keys used by the contact module:\n   *\n   * @code\n   * array(\n   *   'default' => 'php_mail',\n   *   'user' => 'devel_mail_log',\n   *   'contact_page_autoreply' => 'null_mail',\n   * );\n   * @endcode\n   *\n   * Other possible uses for system include a mail-sending plugin that actually\n   * sends (or duplicates) each message to SMS, Twitter, instant message, etc,\n   * or a plugin that queues up a large number of messages for more efficient\n   * bulk sending or for sending via a remote gateway so as to reduce the load\n   * on the local server.\n   *\n   * @param array $options\n   *   An array with the following key\/value pairs:\n   *   - module: (string) The module name which was used by\n   *     \\Drupal\\Core\\Mail\\MailManagerInterface->mail() to invoke hook_mail().\n   *   - key: (string) A key to identify the email sent. The final message ID\n   *     is a string represented as {$module}_{$key}.\n   *\n   * @return \\Drupal\\Core\\Mail\\MailInterface\n   *   A mail plugin instance.\n   *\n   * @throws \\Drupal\\Component\\Plugin\\Exception\\InvalidPluginDefinitionException\n   *\/",84],["T_WHITESPACE","\n  ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","getInstance",138],"(",["T_ARRAY","array",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$options",138],")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$module",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$options",139],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",139],"]",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$key",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$options",140],"[",["T_CONSTANT_ENCAPSED_STRING","'key'",140],"]",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$message_id",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$module",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'_'",141],["T_WHITESPACE"," ",141],".",["T_WHITESPACE"," ",141],["T_VARIABLE","$key",141],";",["T_WHITESPACE","\n\n    ",141],["T_VARIABLE","$configuration",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","configFactory",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","get",143],"(",["T_CONSTANT_ENCAPSED_STRING","'system.mail'",143],")",["T_OBJECT_OPERATOR","->",143],["T_STRING","get",143],"(",["T_CONSTANT_ENCAPSED_STRING","'interface'",143],")",";",["T_WHITESPACE","\n\n    ",143],["T_COMMENT","\/\/ Look for overrides for the default mail plugin, starting from the most\n",145],["T_WHITESPACE","    ",146],["T_COMMENT","\/\/ specific message_id, and falling back to the module name.\n",146],["T_WHITESPACE","    ",147],["T_IF","if",147],["T_WHITESPACE"," ",147],"(",["T_ISSET","isset",147],"(",["T_VARIABLE","$configuration",147],"[",["T_VARIABLE","$message_id",147],"]",")",")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$plugin_id",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$configuration",148],"[",["T_VARIABLE","$message_id",148],"]",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n    ",149],["T_ELSEIF","elseif",150],["T_WHITESPACE"," ",150],"(",["T_ISSET","isset",150],"(",["T_VARIABLE","$configuration",150],"[",["T_VARIABLE","$module",150],"]",")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_VARIABLE","$plugin_id",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$configuration",151],"[",["T_VARIABLE","$module",151],"]",";",["T_WHITESPACE","\n    ",151],"}",["T_WHITESPACE","\n    ",152],["T_ELSE","else",153],["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n      ",153],["T_VARIABLE","$plugin_id",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$configuration",154],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",154],"]",";",["T_WHITESPACE","\n    ",154],"}",["T_WHITESPACE","\n\n    ",155],["T_IF","if",157],["T_WHITESPACE"," ",157],"(",["T_EMPTY","empty",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","instances",157],"[",["T_VARIABLE","$plugin_id",157],"]",")",")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n      ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","instances",158],"[",["T_VARIABLE","$plugin_id",158],"]",["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","createInstance",158],"(",["T_VARIABLE","$plugin_id",158],")",";",["T_WHITESPACE","\n    ",158],"}",["T_WHITESPACE","\n    ",159],["T_RETURN","return",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","instances",160],"[",["T_VARIABLE","$plugin_id",160],"]",";",["T_WHITESPACE","\n  ",160],"}",["T_WHITESPACE","\n\n  ",161],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",163],["T_WHITESPACE","\n  ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","mail",166],"(",["T_VARIABLE","$module",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$key",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$to",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$langcode",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$params",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_ARRAY","array",166],"(",")",",",["T_WHITESPACE"," ",166],["T_VARIABLE","$reply",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","NULL",166],",",["T_WHITESPACE"," ",166],["T_VARIABLE","$send",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_STRING","TRUE",166],")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n    ",166],["T_COMMENT","\/\/ Mailing can invoke rendering (e.g., generating URLs, replacing tokens),\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ but e-mails are not HTTP responses: they're not cached, they don't have\n",168],["T_WHITESPACE","    ",169],["T_COMMENT","\/\/ attachments. Therefore we perform mailing inside its own render context,\n",169],["T_WHITESPACE","    ",170],["T_COMMENT","\/\/ to ensure it doesn't leak into the render context for the HTTP response\n",170],["T_WHITESPACE","    ",171],["T_COMMENT","\/\/ to the current request.\n",171],["T_WHITESPACE","    ",172],["T_RETURN","return",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","renderer",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","executeInRenderContext",172],"(",["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","RenderContext",172],"(",")",",",["T_WHITESPACE"," ",172],["T_FUNCTION","function",172],"(",")",["T_WHITESPACE"," ",172],["T_USE","use",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$module",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$key",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$to",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$langcode",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$params",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$reply",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$send",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n      ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","doMail",173],"(",["T_VARIABLE","$module",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$key",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$to",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$langcode",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$params",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$reply",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$send",173],")",";",["T_WHITESPACE","\n    ",173],"}",")",";",["T_WHITESPACE","\n  ",174],"}",["T_WHITESPACE","\n\n  ",175],["T_DOC_COMMENT","\/**\n   * Composes and optionally sends an email message.\n   *\n   * @param string $module\n   *   A module name to invoke hook_mail() on. The {$module}_mail() hook will be\n   *   called to complete the $message structure which will already contain\n   *   common defaults.\n   * @param string $key\n   *   A key to identify the email sent. The final message ID for email altering\n   *   will be {$module}_{$key}.\n   * @param string $to\n   *   The email address or addresses where the message will be sent to. The\n   *   formatting of this string will be validated with the\n   *   @link http:\/\/php.net\/manual\/filter.filters.validate.php PHP email validation filter. @endlink\n   *   Some examples are:\n   *   - user@example.com\n   *   - user@example.com, anotheruser@example.com\n   *   - User <user@example.com>\n   *   - User <user@example.com>, Another User <anotheruser@example.com>\n   * @param string $langcode\n   *   Language code to use to compose the email.\n   * @param array $params\n   *   (optional) Parameters to build the email.\n   * @param string|null $reply\n   *   Optional email address to be used to answer.\n   * @param bool $send\n   *   If TRUE, call an implementation of\n   *   \\Drupal\\Core\\Mail\\MailInterface->mail() to deliver the message, and\n   *   store the result in $message['result']. Modules implementing\n   *   hook_mail_alter() may cancel sending by setting $message['send'] to\n   *   FALSE.\n   *\n   * @return array\n   *   The $message array structure containing all details of the message. If\n   *   already sent ($send = TRUE), then the 'result' element will contain the\n   *   success indicator of the email, failure being already written to the\n   *   watchdog. (Success means nothing more than the message being accepted at\n   *   php-level, which still doesn't guarantee it to be delivered.)\n   *\n   * @see \\Drupal\\Core\\Mail\\MailManagerInterface::mail()\n   *\/",177],["T_WHITESPACE","\n  ",217],["T_PUBLIC","public",218],["T_WHITESPACE"," ",218],["T_FUNCTION","function",218],["T_WHITESPACE"," ",218],["T_STRING","doMail",218],"(",["T_VARIABLE","$module",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$key",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$to",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$langcode",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$params",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",")",",",["T_WHITESPACE"," ",218],["T_VARIABLE","$reply",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","NULL",218],",",["T_WHITESPACE"," ",218],["T_VARIABLE","$send",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_STRING","TRUE",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$site_config",219],["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","configFactory",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","get",219],"(",["T_CONSTANT_ENCAPSED_STRING","'system.site'",219],")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$site_mail",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_VARIABLE","$site_config",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","get",220],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",220],")",";",["T_WHITESPACE","\n    ",220],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_EMPTY","empty",221],"(",["T_VARIABLE","$site_mail",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n      ",221],["T_VARIABLE","$site_mail",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","ini_get",222],"(",["T_CONSTANT_ENCAPSED_STRING","'sendmail_from'",222],")",";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n\n    ",223],["T_COMMENT","\/\/ Bundle up the variables into a structured array for altering.\n",225],["T_WHITESPACE","    ",226],["T_VARIABLE","$message",226],["T_WHITESPACE"," ",226],"=",["T_WHITESPACE"," ",226],["T_ARRAY","array",226],"(",["T_WHITESPACE","\n      ",226],["T_CONSTANT_ENCAPSED_STRING","'id'",227],["T_WHITESPACE"," ",227],["T_DOUBLE_ARROW","=>",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$module",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_CONSTANT_ENCAPSED_STRING","'_'",227],["T_WHITESPACE"," ",227],".",["T_WHITESPACE"," ",227],["T_VARIABLE","$key",227],",",["T_WHITESPACE","\n      ",227],["T_CONSTANT_ENCAPSED_STRING","'module'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$module",228],",",["T_WHITESPACE","\n      ",228],["T_CONSTANT_ENCAPSED_STRING","'key'",229],["T_WHITESPACE"," ",229],["T_DOUBLE_ARROW","=>",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$key",229],",",["T_WHITESPACE","\n      ",229],["T_CONSTANT_ENCAPSED_STRING","'to'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$to",230],",",["T_WHITESPACE","\n      ",230],["T_CONSTANT_ENCAPSED_STRING","'from'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$site_mail",231],",",["T_WHITESPACE","\n      ",231],["T_CONSTANT_ENCAPSED_STRING","'reply-to'",232],["T_WHITESPACE"," ",232],["T_DOUBLE_ARROW","=>",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$reply",232],",",["T_WHITESPACE","\n      ",232],["T_CONSTANT_ENCAPSED_STRING","'langcode'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$langcode",233],",",["T_WHITESPACE","\n      ",233],["T_CONSTANT_ENCAPSED_STRING","'params'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$params",234],",",["T_WHITESPACE","\n      ",234],["T_CONSTANT_ENCAPSED_STRING","'send'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_STRING","TRUE",235],",",["T_WHITESPACE","\n      ",235],["T_CONSTANT_ENCAPSED_STRING","'subject'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","''",236],",",["T_WHITESPACE","\n      ",236],["T_CONSTANT_ENCAPSED_STRING","'body'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",",",["T_WHITESPACE","\n    ",237],")",";",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ Build the default headers.\n",240],["T_WHITESPACE","    ",241],["T_VARIABLE","$headers",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",["T_WHITESPACE","\n      ",241],["T_CONSTANT_ENCAPSED_STRING","'MIME-Version'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'1.0'",242],",",["T_WHITESPACE","\n      ",242],["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'text\/plain; charset=UTF-8; format=flowed; delsp=yes'",243],",",["T_WHITESPACE","\n      ",243],["T_CONSTANT_ENCAPSED_STRING","'Content-Transfer-Encoding'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'8Bit'",244],",",["T_WHITESPACE","\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'X-Mailer'",245],["T_WHITESPACE"," ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'Drupal'",245],",",["T_WHITESPACE","\n    ",245],")",";",["T_WHITESPACE","\n    ",246],["T_COMMENT","\/\/ To prevent email from looking like spam, the addresses in the Sender and\n",247],["T_WHITESPACE","    ",248],["T_COMMENT","\/\/ Return-Path headers should have a domain authorized to use the\n",248],["T_WHITESPACE","    ",249],["T_COMMENT","\/\/ originating SMTP server.\n",249],["T_WHITESPACE","    ",250],["T_VARIABLE","$headers",250],"[",["T_CONSTANT_ENCAPSED_STRING","'Sender'",250],"]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$headers",250],"[",["T_CONSTANT_ENCAPSED_STRING","'Return-Path'",250],"]",["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_VARIABLE","$site_mail",250],";",["T_WHITESPACE","\n    ",250],["T_VARIABLE","$headers",251],"[",["T_CONSTANT_ENCAPSED_STRING","'From'",251],"]",["T_WHITESPACE"," ",251],"=",["T_WHITESPACE"," ",251],["T_VARIABLE","$site_config",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","get",251],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",251],")",["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","' <'",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_VARIABLE","$site_mail",251],["T_WHITESPACE"," ",251],".",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'>'",251],";",["T_WHITESPACE","\n    ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$reply",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n      ",252],["T_VARIABLE","$headers",253],"[",["T_CONSTANT_ENCAPSED_STRING","'Reply-to'",253],"]",["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$reply",253],";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$message",255],"[",["T_CONSTANT_ENCAPSED_STRING","'headers'",255],"]",["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$headers",255],";",["T_WHITESPACE","\n\n    ",255],["T_COMMENT","\/\/ Build the email (get subject and body, allow additional headers) by\n",257],["T_WHITESPACE","    ",258],["T_COMMENT","\/\/ invoking hook_mail() on this module. We cannot use\n",258],["T_WHITESPACE","    ",259],["T_COMMENT","\/\/ moduleHandler()->invoke() as we need to have $message by reference in\n",259],["T_WHITESPACE","    ",260],["T_COMMENT","\/\/ hook_mail().\n",260],["T_WHITESPACE","    ",261],["T_IF","if",261],["T_WHITESPACE"," ",261],"(",["T_STRING","function_exists",261],"(",["T_VARIABLE","$function",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$module",261],["T_WHITESPACE"," ",261],".",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'_mail'",261],")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n      ",261],["T_VARIABLE","$function",262],"(",["T_VARIABLE","$key",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$message",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$params",262],")",";",["T_WHITESPACE","\n    ",262],"}",["T_WHITESPACE","\n\n    ",263],["T_COMMENT","\/\/ Invoke hook_mail_alter() to allow all modules to alter the resulting\n",265],["T_WHITESPACE","    ",266],["T_COMMENT","\/\/ email.\n",266],["T_WHITESPACE","    ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","moduleHandler",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","alter",267],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$message",267],")",";",["T_WHITESPACE","\n\n    ",267],["T_COMMENT","\/\/ Retrieve the responsible implementation for this message.\n",269],["T_WHITESPACE","    ",270],["T_VARIABLE","$system",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","getInstance",270],"(",["T_ARRAY","array",270],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$module",270],",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'key'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$key",270],")",")",";",["T_WHITESPACE","\n\n    ",270],["T_COMMENT","\/\/ Format the message body.\n",272],["T_WHITESPACE","    ",273],["T_VARIABLE","$message",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$system",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","format",273],"(",["T_VARIABLE","$message",273],")",";",["T_WHITESPACE","\n\n    ",273],["T_COMMENT","\/\/ Optionally send email.\n",275],["T_WHITESPACE","    ",276],["T_IF","if",276],["T_WHITESPACE"," ",276],"(",["T_VARIABLE","$send",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n      ",276],["T_COMMENT","\/\/ The original caller requested sending. Sending was canceled by one or\n",277],["T_WHITESPACE","      ",278],["T_COMMENT","\/\/ more hook_mail_alter() implementations. We set 'result' to NULL,\n",278],["T_WHITESPACE","      ",279],["T_COMMENT","\/\/ because FALSE indicates an error in sending.\n",279],["T_WHITESPACE","      ",280],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_EMPTY","empty",280],"(",["T_VARIABLE","$message",280],"[",["T_CONSTANT_ENCAPSED_STRING","'send'",280],"]",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$message",281],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",281],"]",["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],["T_STRING","NULL",281],";",["T_WHITESPACE","\n      ",281],"}",["T_WHITESPACE","\n      ",282],["T_COMMENT","\/\/ Sending was originally requested and was not canceled.\n",283],["T_WHITESPACE","      ",284],["T_ELSE","else",284],["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n        ",284],["T_COMMENT","\/\/ Ensure that subject is plain text. By default translated and\n",285],["T_WHITESPACE","        ",286],["T_COMMENT","\/\/ formatted strings are prepared for the HTML context and email\n",286],["T_WHITESPACE","        ",287],["T_COMMENT","\/\/ subjects are plain strings.\n",287],["T_WHITESPACE","        ",288],["T_IF","if",288],["T_WHITESPACE"," ",288],"(",["T_VARIABLE","$message",288],"[",["T_CONSTANT_ENCAPSED_STRING","'subject'",288],"]",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n          ",288],["T_VARIABLE","$message",289],"[",["T_CONSTANT_ENCAPSED_STRING","'subject'",289],"]",["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_STRING","PlainTextOutput",289],["T_DOUBLE_COLON","::",289],["T_STRING","renderFromHtml",289],"(",["T_VARIABLE","$message",289],"[",["T_CONSTANT_ENCAPSED_STRING","'subject'",289],"]",")",";",["T_WHITESPACE","\n        ",289],"}",["T_WHITESPACE","\n        ",290],["T_VARIABLE","$message",291],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",291],"]",["T_WHITESPACE"," ",291],"=",["T_WHITESPACE"," ",291],["T_VARIABLE","$system",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","mail",291],"(",["T_VARIABLE","$message",291],")",";",["T_WHITESPACE","\n        ",291],["T_COMMENT","\/\/ Log errors.\n",292],["T_WHITESPACE","        ",293],["T_IF","if",293],["T_WHITESPACE"," ",293],"(","!",["T_VARIABLE","$message",293],"[",["T_CONSTANT_ENCAPSED_STRING","'result'",293],"]",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n          ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","loggerFactory",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","get",294],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",294],")",["T_WHITESPACE","\n            ",294],["T_OBJECT_OPERATOR","->",295],["T_STRING","error",295],"(",["T_CONSTANT_ENCAPSED_STRING","'Error sending email (from %from to %to with reply-to %reply).'",295],",",["T_WHITESPACE"," ",295],["T_ARRAY","array",295],"(",["T_WHITESPACE","\n            ",295],["T_CONSTANT_ENCAPSED_STRING","'%from'",296],["T_WHITESPACE"," ",296],["T_DOUBLE_ARROW","=>",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$message",296],"[",["T_CONSTANT_ENCAPSED_STRING","'from'",296],"]",",",["T_WHITESPACE","\n            ",296],["T_CONSTANT_ENCAPSED_STRING","'%to'",297],["T_WHITESPACE"," ",297],["T_DOUBLE_ARROW","=>",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$message",297],"[",["T_CONSTANT_ENCAPSED_STRING","'to'",297],"]",",",["T_WHITESPACE","\n            ",297],["T_CONSTANT_ENCAPSED_STRING","'%reply'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$message",298],"[",["T_CONSTANT_ENCAPSED_STRING","'reply-to'",298],"]",["T_WHITESPACE"," ",298],"?",["T_WHITESPACE"," ",298],["T_VARIABLE","$message",298],"[",["T_CONSTANT_ENCAPSED_STRING","'reply-to'",298],"]",["T_WHITESPACE"," ",298],":",["T_WHITESPACE"," ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","t",298],"(",["T_CONSTANT_ENCAPSED_STRING","'not set'",298],")",",",["T_WHITESPACE","\n          ",298],")",")",";",["T_WHITESPACE","\n          ",299],["T_STRING","drupal_set_message",300],"(",["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","t",300],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to send email. Contact the site administrator if the problem persists.'",300],")",",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'error'",300],")",";",["T_WHITESPACE","\n        ",300],"}",["T_WHITESPACE","\n      ",301],"}",["T_WHITESPACE","\n    ",302],"}",["T_WHITESPACE","\n\n    ",303],["T_RETURN","return",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$message",305],";",["T_WHITESPACE","\n  ",305],"}",["T_WHITESPACE","\n\n",306],"}",["T_WHITESPACE","\n",308]]
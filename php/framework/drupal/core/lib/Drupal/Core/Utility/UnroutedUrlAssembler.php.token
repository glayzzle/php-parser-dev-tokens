[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Utility",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","UrlHelper",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","GeneratedUrl",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","PathProcessor",7],["T_NS_SEPARATOR","\\",7],["T_STRING","OutboundPathProcessorInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpFoundation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RequestStack",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Provides a way to build external or non Drupal local domain URLs.\n *\n * It takes into account configured safe HTTP protocols.\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","UnroutedUrlAssembler",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","UnroutedUrlAssemblerInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * A request stack object.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\RequestStack\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$requestStack",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The outbound path processor.\n   *\n   * @var \\Drupal\\Core\\PathProcessor\\OutboundPathProcessorInterface\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$pathProcessor",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Constructs a new unroutedUrlAssembler object.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   A request stack object.\n   * @param \\Drupal\\Core\\PathProcessor\\OutboundPathProcessorInterface $path_processor\n   *   The output path processor.\n   * @param string[] $filter_protocols\n   *   (optional) An array of protocols allowed for URL generation.\n   *\/",31],["T_WHITESPACE","\n  ",40],["T_PUBLIC","public",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","__construct",41],"(",["T_STRING","RequestStack",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$request_stack",41],",",["T_WHITESPACE"," ",41],["T_STRING","OutboundPathProcessorInterface",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$path_processor",41],",",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$filter_protocols",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[",["T_CONSTANT_ENCAPSED_STRING","'http'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'https'",41],"]",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_STRING","UrlHelper",42],["T_DOUBLE_COLON","::",42],["T_STRING","setAllowedProtocols",42],"(",["T_VARIABLE","$filter_protocols",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","requestStack",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$request_stack",43],";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","pathProcessor",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$path_processor",44],";",["T_WHITESPACE","\n  ",44],"}",["T_WHITESPACE","\n\n  ",45],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * This is a helper function that calls buildExternalUrl() or buildLocalUrl()\n   * based on a check of whether the path is a valid external URL.\n   *\/",47],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","assemble",53],"(",["T_VARIABLE","$uri",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$options",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[","]",",",["T_WHITESPACE"," ",53],["T_VARIABLE","$collect_bubbleable_metadata",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_STRING","FALSE",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_COMMENT","\/\/ Note that UrlHelper::isExternal will return FALSE if the $uri has a\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ disallowed protocol.  This is later made safe since we always add at\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ least a leading slash.\n",56],["T_WHITESPACE","    ",57],["T_IF","if",57],["T_WHITESPACE"," ",57],"(",["T_STRING","parse_url",57],"(",["T_VARIABLE","$uri",57],",",["T_WHITESPACE"," ",57],["T_STRING","PHP_URL_SCHEME",57],")",["T_WHITESPACE"," ",57],["T_IS_IDENTICAL","===",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'base'",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n      ",57],["T_RETURN","return",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","buildLocalUrl",58],"(",["T_VARIABLE","$uri",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$options",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$collect_bubbleable_metadata",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n    ",59],["T_ELSEIF","elseif",60],["T_WHITESPACE"," ",60],"(",["T_STRING","UrlHelper",60],["T_DOUBLE_COLON","::",60],["T_STRING","isExternal",60],"(",["T_VARIABLE","$uri",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_COMMENT","\/\/ UrlHelper::isExternal() only returns true for safe protocols.\n",61],["T_WHITESPACE","      ",62],["T_RETURN","return",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","buildExternalUrl",62],"(",["T_VARIABLE","$uri",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$options",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$collect_bubbleable_metadata",62],")",";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n    ",63],["T_THROW","throw",64],["T_WHITESPACE"," ",64],["T_NEW","new",64],["T_WHITESPACE"," ",64],["T_NS_SEPARATOR","\\",64],["T_STRING","InvalidArgumentException",64],"(","\"",["T_ENCAPSED_AND_WHITESPACE","The URI '",64],["T_VARIABLE","$uri",64],["T_ENCAPSED_AND_WHITESPACE","' is invalid. You must use a valid URI scheme. Use base: for a path, e.g., to a Drupal file that needs the base path. Do not use this for internal paths controlled by Drupal.",64],"\"",")",";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","buildExternalUrl",70],"(",["T_VARIABLE","$uri",70],",",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$options",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[","]",",",["T_WHITESPACE"," ",70],["T_VARIABLE","$collect_bubbleable_metadata",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_STRING","FALSE",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","addOptionDefaults",71],"(",["T_VARIABLE","$options",71],")",";",["T_WHITESPACE","\n    ",71],["T_COMMENT","\/\/ Split off the fragment.\n",72],["T_WHITESPACE","    ",73],["T_IF","if",73],["T_WHITESPACE"," ",73],"(",["T_STRING","strpos",73],"(",["T_VARIABLE","$uri",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'#'",73],")",["T_WHITESPACE"," ",73],["T_IS_NOT_IDENTICAL","!==",73],["T_WHITESPACE"," ",73],["T_STRING","FALSE",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n      ",73],["T_LIST","list",74],"(",["T_VARIABLE","$uri",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$old_fragment",74],")",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","explode",74],"(",["T_CONSTANT_ENCAPSED_STRING","'#'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$uri",74],",",["T_WHITESPACE"," ",74],["T_LNUMBER","2",74],")",";",["T_WHITESPACE","\n      ",74],["T_COMMENT","\/\/ If $options contains no fragment, take it over from the path.\n",75],["T_WHITESPACE","      ",76],["T_IF","if",76],["T_WHITESPACE"," ",76],"(",["T_ISSET","isset",76],"(",["T_VARIABLE","$old_fragment",76],")",["T_WHITESPACE"," ",76],["T_BOOLEAN_AND","&&",76],["T_WHITESPACE"," ",76],"!",["T_VARIABLE","$options",76],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",76],"]",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n        ",76],["T_VARIABLE","$options",77],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'#'",77],["T_WHITESPACE"," ",77],".",["T_WHITESPACE"," ",77],["T_VARIABLE","$old_fragment",77],";",["T_WHITESPACE","\n      ",77],"}",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n\n    ",79],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_ISSET","isset",81],"(",["T_VARIABLE","$options",81],"[",["T_CONSTANT_ENCAPSED_STRING","'https'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_IF","if",82],["T_WHITESPACE"," ",82],"(",["T_VARIABLE","$options",82],"[",["T_CONSTANT_ENCAPSED_STRING","'https'",82],"]",["T_WHITESPACE"," ",82],["T_IS_IDENTICAL","===",82],["T_WHITESPACE"," ",82],["T_STRING","TRUE",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n        ",82],["T_VARIABLE","$uri",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","str_replace",83],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$uri",83],")",";",["T_WHITESPACE","\n      ",83],"}",["T_WHITESPACE","\n      ",84],["T_ELSEIF","elseif",85],["T_WHITESPACE"," ",85],"(",["T_VARIABLE","$options",85],"[",["T_CONSTANT_ENCAPSED_STRING","'https'",85],"]",["T_WHITESPACE"," ",85],["T_IS_IDENTICAL","===",85],["T_WHITESPACE"," ",85],["T_STRING","FALSE",85],")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n        ",85],["T_VARIABLE","$uri",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","str_replace",86],"(",["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",86],",",["T_WHITESPACE"," ",86],["T_VARIABLE","$uri",86],")",";",["T_WHITESPACE","\n      ",86],"}",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ Append the query.\n",89],["T_WHITESPACE","    ",90],["T_IF","if",90],["T_WHITESPACE"," ",90],"(",["T_VARIABLE","$options",90],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",90],"]",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$uri",91],["T_WHITESPACE"," ",91],["T_CONCAT_EQUAL",".=",91],["T_WHITESPACE"," ",91],"(",["T_STRING","strpos",91],"(",["T_VARIABLE","$uri",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'?'",91],")",["T_WHITESPACE"," ",91],["T_IS_NOT_IDENTICAL","!==",91],["T_WHITESPACE"," ",91],["T_STRING","FALSE",91],["T_WHITESPACE"," ",91],"?",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'&'",91],["T_WHITESPACE"," ",91],":",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'?'",91],")",["T_WHITESPACE"," ",91],".",["T_WHITESPACE"," ",91],["T_STRING","UrlHelper",91],["T_DOUBLE_COLON","::",91],["T_STRING","buildQuery",91],"(",["T_VARIABLE","$options",91],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",91],"]",")",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n    ",92],["T_COMMENT","\/\/ Reassemble.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$url",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$uri",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",94],"]",";",["T_WHITESPACE","\n    ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$collect_bubbleable_metadata",95],["T_WHITESPACE"," ",95],"?",["T_WHITESPACE"," ",95],"(",["T_NEW","new",95],["T_WHITESPACE"," ",95],["T_STRING","GeneratedUrl",95],"(",")",")",["T_OBJECT_OPERATOR","->",95],["T_STRING","setGeneratedUrl",95],"(",["T_VARIABLE","$url",95],")",["T_WHITESPACE"," ",95],":",["T_WHITESPACE"," ",95],["T_VARIABLE","$url",95],";",["T_WHITESPACE","\n  ",95],"}",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",98],["T_WHITESPACE","\n  ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","buildLocalUrl",101],"(",["T_VARIABLE","$uri",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$options",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],"[","]",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$collect_bubbleable_metadata",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","FALSE",101],")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$generated_url",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$collect_bubbleable_metadata",102],["T_WHITESPACE"," ",102],"?",["T_WHITESPACE"," ",102],["T_NEW","new",102],["T_WHITESPACE"," ",102],["T_STRING","GeneratedUrl",102],"(",")",["T_WHITESPACE"," ",102],":",["T_WHITESPACE"," ",102],["T_STRING","NULL",102],";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","addOptionDefaults",104],"(",["T_VARIABLE","$options",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$request",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","requestStack",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getCurrentRequest",105],"(",")",";",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Remove the base: scheme.\n",107],["T_WHITESPACE","    ",108],["T_COMMENT","\/\/ @todo Consider using a class constant for this in\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/2417459\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$uri",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","substr",110],"(",["T_VARIABLE","$uri",110],",",["T_WHITESPACE"," ",110],["T_LNUMBER","5",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Allow (outbound) path processing, if needed. A valid use case is the path\n",112],["T_WHITESPACE","    ",113],["T_COMMENT","\/\/ alias overview form:\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ @see \\Drupal\\path\\Controller\\PathController::adminOverview().\n",114],["T_WHITESPACE","    ",115],["T_IF","if",115],["T_WHITESPACE"," ",115],"(","!",["T_EMPTY","empty",115],"(",["T_VARIABLE","$options",115],"[",["T_CONSTANT_ENCAPSED_STRING","'path_processing'",115],"]",")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n      ",115],["T_COMMENT","\/\/ Do not pass the request, since this is a special case and we do not\n",116],["T_WHITESPACE","      ",117],["T_COMMENT","\/\/ want to include e.g. the request language in the processing.\n",117],["T_WHITESPACE","      ",118],["T_VARIABLE","$uri",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","pathProcessor",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","processOutbound",118],"(",["T_VARIABLE","$uri",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$options",118],",",["T_WHITESPACE"," ",118],["T_STRING","NULL",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$generated_url",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n    ",119],["T_COMMENT","\/\/ Strip leading slashes from internal paths to prevent them becoming\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ external URLs without protocol. \/example.com should not be turned into\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ \/\/example.com.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$uri",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","ltrim",123],"(",["T_VARIABLE","$uri",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'\/'",123],")",";",["T_WHITESPACE","\n\n    ",123],["T_COMMENT","\/\/ Add any subdirectory where Drupal is installed.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$current_base_path",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$request",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","getBasePath",126],"(",")",["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'\/'",126],";",["T_WHITESPACE","\n\n    ",126],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$options",128],"[",["T_CONSTANT_ENCAPSED_STRING","'absolute'",128],"]",")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$current_base_url",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$request",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getSchemeAndHttpHost",129],"(",")",["T_WHITESPACE"," ",129],".",["T_WHITESPACE"," ",129],["T_VARIABLE","$current_base_path",129],";",["T_WHITESPACE","\n      ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_ISSET","isset",130],"(",["T_VARIABLE","$options",130],"[",["T_CONSTANT_ENCAPSED_STRING","'https'",130],"]",")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(","!",["T_EMPTY","empty",131],"(",["T_VARIABLE","$options",131],"[",["T_CONSTANT_ENCAPSED_STRING","'https'",131],"]",")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n          ",131],["T_VARIABLE","$base",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","str_replace",132],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$current_base_url",132],")",";",["T_WHITESPACE","\n          ",132],["T_VARIABLE","$options",133],"[",["T_CONSTANT_ENCAPSED_STRING","'absolute'",133],"]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","TRUE",133],";",["T_WHITESPACE","\n        ",133],"}",["T_WHITESPACE","\n        ",134],["T_ELSE","else",135],["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n          ",135],["T_VARIABLE","$base",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_STRING","str_replace",136],"(",["T_CONSTANT_ENCAPSED_STRING","'https:\/\/'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$current_base_url",136],")",";",["T_WHITESPACE","\n          ",136],["T_VARIABLE","$options",137],"[",["T_CONSTANT_ENCAPSED_STRING","'absolute'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","TRUE",137],";",["T_WHITESPACE","\n        ",137],"}",["T_WHITESPACE","\n      ",138],"}",["T_WHITESPACE","\n      ",139],["T_ELSE","else",140],["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n        ",140],["T_VARIABLE","$base",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$current_base_url",141],";",["T_WHITESPACE","\n      ",141],"}",["T_WHITESPACE","\n      ",142],["T_IF","if",143],["T_WHITESPACE"," ",143],"(",["T_VARIABLE","$collect_bubbleable_metadata",143],")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n        ",143],["T_VARIABLE","$generated_url",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","addCacheContexts",144],"(","[",["T_CONSTANT_ENCAPSED_STRING","'url.site'",144],"]",")",";",["T_WHITESPACE","\n      ",144],"}",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_ELSE","else",147],["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$base",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$current_base_path",148],";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$prefix",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_EMPTY","empty",151],"(",["T_VARIABLE","$uri",151],")",["T_WHITESPACE"," ",151],"?",["T_WHITESPACE"," ",151],["T_STRING","rtrim",151],"(",["T_VARIABLE","$options",151],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",151],"]",",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'\/'",151],")",["T_WHITESPACE"," ",151],":",["T_WHITESPACE"," ",151],["T_VARIABLE","$options",151],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",151],"]",";",["T_WHITESPACE","\n\n    ",151],["T_VARIABLE","$uri",153],["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_STRING","str_replace",153],"(",["T_CONSTANT_ENCAPSED_STRING","'%2F'",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'\/'",153],",",["T_WHITESPACE"," ",153],["T_STRING","rawurlencode",153],"(",["T_VARIABLE","$prefix",153],["T_WHITESPACE"," ",153],".",["T_WHITESPACE"," ",153],["T_VARIABLE","$uri",153],")",")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$query",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$options",154],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",154],"]",["T_WHITESPACE"," ",154],"?",["T_WHITESPACE"," ",154],"(",["T_CONSTANT_ENCAPSED_STRING","'?'",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_STRING","UrlHelper",154],["T_DOUBLE_COLON","::",154],["T_STRING","buildQuery",154],"(",["T_VARIABLE","$options",154],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",154],"]",")",")",["T_WHITESPACE"," ",154],":",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","''",154],";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$url",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$base",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$options",155],"[",["T_CONSTANT_ENCAPSED_STRING","'script'",155],"]",["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$uri",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$query",155],["T_WHITESPACE"," ",155],".",["T_WHITESPACE"," ",155],["T_VARIABLE","$options",155],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",155],"]",";",["T_WHITESPACE","\n    ",155],["T_RETURN","return",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$collect_bubbleable_metadata",156],["T_WHITESPACE"," ",156],"?",["T_WHITESPACE"," ",156],["T_VARIABLE","$generated_url",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","setGeneratedUrl",156],"(",["T_VARIABLE","$url",156],")",["T_WHITESPACE"," ",156],":",["T_WHITESPACE"," ",156],["T_VARIABLE","$url",156],";",["T_WHITESPACE","\n  ",156],"}",["T_WHITESPACE","\n\n  ",157],["T_DOC_COMMENT","\/**\n   * Merges in default defaults\n   *\n   * @param array $options\n   *   The options to merge in the defaults.\n   *\/",159],["T_WHITESPACE","\n  ",164],["T_PROTECTED","protected",165],["T_WHITESPACE"," ",165],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","addOptionDefaults",165],"(",["T_ARRAY","array",165],["T_WHITESPACE"," ",165],"&",["T_VARIABLE","$options",165],")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$request",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","requestStack",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getCurrentRequest",166],"(",")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$current_base_path",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_VARIABLE","$request",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","getBasePath",167],"(",")",["T_WHITESPACE"," ",167],".",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'\/'",167],";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$current_script_path",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","''",168],";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$base_path_with_script",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$request",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getBaseUrl",169],"(",")",";",["T_WHITESPACE","\n\n    ",169],["T_COMMENT","\/\/ If the current request was made with the script name (eg, index.php) in\n",171],["T_WHITESPACE","    ",172],["T_COMMENT","\/\/ it, then extract it, making sure the leading \/ is gone, and a trailing \/\n",172],["T_WHITESPACE","    ",173],["T_COMMENT","\/\/ is added, to allow simple string concatenation with other parts.\n",173],["T_WHITESPACE","    ",174],["T_IF","if",174],["T_WHITESPACE"," ",174],"(","!",["T_EMPTY","empty",174],"(",["T_VARIABLE","$base_path_with_script",174],")",")",["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n      ",174],["T_VARIABLE","$script_name",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$request",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","getScriptName",175],"(",")",";",["T_WHITESPACE","\n      ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_STRING","strpos",176],"(",["T_VARIABLE","$base_path_with_script",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$script_name",176],")",["T_WHITESPACE"," ",176],["T_IS_NOT_IDENTICAL","!==",176],["T_WHITESPACE"," ",176],["T_STRING","FALSE",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n        ",176],["T_VARIABLE","$current_script_path",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_STRING","ltrim",177],"(",["T_STRING","substr",177],"(",["T_VARIABLE","$script_name",177],",",["T_WHITESPACE"," ",177],["T_STRING","strlen",177],"(",["T_VARIABLE","$current_base_path",177],")",")",",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'\/'",177],")",["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'\/'",177],";",["T_WHITESPACE","\n      ",177],"}",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ Merge in defaults.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$options",182],["T_WHITESPACE"," ",182],["T_PLUS_EQUAL","+=",182],["T_WHITESPACE"," ",182],"[",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'fragment'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","''",183],",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'query'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],"[","]",",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'absolute'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_STRING","FALSE",185],",",["T_WHITESPACE","\n      ",185],["T_CONSTANT_ENCAPSED_STRING","'prefix'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","''",186],",",["T_WHITESPACE","\n      ",186],["T_CONSTANT_ENCAPSED_STRING","'script'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$current_script_path",187],",",["T_WHITESPACE","\n    ",187],"]",";",["T_WHITESPACE","\n\n    ",188],["T_IF","if",190],["T_WHITESPACE"," ",190],"(",["T_ISSET","isset",190],"(",["T_VARIABLE","$options",190],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",190],"]",")",["T_WHITESPACE"," ",190],["T_BOOLEAN_AND","&&",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$options",190],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",190],"]",["T_WHITESPACE"," ",190],["T_IS_NOT_IDENTICAL","!==",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","''",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$options",191],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'#'",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$options",191],"[",["T_CONSTANT_ENCAPSED_STRING","'fragment'",191],"]",";",["T_WHITESPACE","\n    ",191],"}",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n",193],"}",["T_WHITESPACE","\n",195]]
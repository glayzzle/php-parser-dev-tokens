[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Extension",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","CacheBackendInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DrupalKernelInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityStorageException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldableEntityInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Serialization",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Yaml",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Default implementation of the module installer.\n *\n * It registers the module in config, installs its own configuration,\n * installs the schema, updates the Drupal kernel and more.\n *\/",12],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","ModuleInstaller",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","ModuleInstallerInterface",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The module handler.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$moduleHandler",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * The drupal kernel.\n   *\n   * @var \\Drupal\\Core\\DrupalKernelInterface\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$kernel",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * The app root.\n   *\n   * @var string\n   *\/",34],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$root",39],";",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * The uninstall validators.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleUninstallValidatorInterface[]\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$uninstallValidators",46],";",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * Constructs a new ModuleInstaller instance.\n   *\n   * @param string $root\n   *   The app root.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler.\n   * @param \\Drupal\\Core\\DrupalKernelInterface $kernel\n   *   The drupal kernel.\n   *\n   * @see \\Drupal\\Core\\DrupalKernel\n   * @see \\Drupal\\Core\\CoreServiceProvider\n   *\/",48],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","__construct",61],"(",["T_VARIABLE","$root",61],",",["T_WHITESPACE"," ",61],["T_STRING","ModuleHandlerInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$module_handler",61],",",["T_WHITESPACE"," ",61],["T_STRING","DrupalKernelInterface",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$kernel",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","root",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$root",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","moduleHandler",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$module_handler",63],";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","kernel",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$kernel",64],";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","addUninstallValidator",70],"(",["T_STRING","ModuleUninstallValidatorInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$uninstall_validator",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","uninstallValidators",71],"[","]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$uninstall_validator",71],";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","install",77],"(",["T_ARRAY","array",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$module_list",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$enable_dependencies",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","TRUE",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$extension_config",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_NS_SEPARATOR","\\",78],["T_STRING","Drupal",78],["T_DOUBLE_COLON","::",78],["T_STRING","configFactory",78],"(",")",["T_OBJECT_OPERATOR","->",78],["T_STRING","getEditable",78],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",78],")",";",["T_WHITESPACE","\n    ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$enable_dependencies",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_COMMENT","\/\/ Get all module data so we can find dependencies and sort.\n",80],["T_WHITESPACE","      ",81],["T_VARIABLE","$module_data",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_STRING","system_rebuild_module_data",81],"(",")",";",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$module_list",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$module_list",82],["T_WHITESPACE"," ",82],"?",["T_WHITESPACE"," ",82],["T_STRING","array_combine",82],"(",["T_VARIABLE","$module_list",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$module_list",82],")",["T_WHITESPACE"," ",82],":",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",")",";",["T_WHITESPACE","\n      ",82],["T_IF","if",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$missing_modules",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","array_diff_key",83],"(",["T_VARIABLE","$module_list",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$module_data",83],")",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n        ",83],["T_COMMENT","\/\/ One or more of the given modules doesn't exist.\n",84],["T_WHITESPACE","        ",85],["T_THROW","throw",85],["T_WHITESPACE"," ",85],["T_NEW","new",85],["T_WHITESPACE"," ",85],["T_STRING","MissingDependencyException",85],"(",["T_STRING","sprintf",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to install modules %s due to missing modules %s.'",85],",",["T_WHITESPACE"," ",85],["T_STRING","implode",85],"(",["T_CONSTANT_ENCAPSED_STRING","', '",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$module_list",85],")",",",["T_WHITESPACE"," ",85],["T_STRING","implode",85],"(",["T_CONSTANT_ENCAPSED_STRING","', '",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$missing_modules",85],")",")",")",";",["T_WHITESPACE","\n      ",85],"}",["T_WHITESPACE","\n\n      ",86],["T_COMMENT","\/\/ Only process currently uninstalled modules.\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$installed_modules",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$extension_config",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",89],")",["T_WHITESPACE"," ",89],"?",":",["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",")",";",["T_WHITESPACE","\n      ",89],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_VARIABLE","$module_list",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","array_diff_key",90],"(",["T_VARIABLE","$module_list",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$installed_modules",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n        ",90],["T_COMMENT","\/\/ Nothing to do. All modules already installed.\n",91],["T_WHITESPACE","        ",92],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_STRING","TRUE",92],";",["T_WHITESPACE","\n      ",92],"}",["T_WHITESPACE","\n\n      ",93],["T_COMMENT","\/\/ Add dependencies to the list. The new modules will be processed as\n",95],["T_WHITESPACE","      ",96],["T_COMMENT","\/\/ the while loop continues.\n",96],["T_WHITESPACE","      ",97],["T_WHILE","while",97],["T_WHITESPACE"," ",97],"(",["T_LIST","list",97],"(",["T_VARIABLE","$module",97],")",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","each",97],"(",["T_VARIABLE","$module_list",97],")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_FOREACH","foreach",98],["T_WHITESPACE"," ",98],"(",["T_STRING","array_keys",98],"(",["T_VARIABLE","$module_data",98],"[",["T_VARIABLE","$module",98],"]",["T_OBJECT_OPERATOR","->",98],["T_STRING","requires",98],")",["T_WHITESPACE"," ",98],["T_AS","as",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$dependency",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n          ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_ISSET","isset",99],"(",["T_VARIABLE","$module_data",99],"[",["T_VARIABLE","$dependency",99],"]",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n            ",99],["T_COMMENT","\/\/ The dependency does not exist.\n",100],["T_WHITESPACE","            ",101],["T_THROW","throw",101],["T_WHITESPACE"," ",101],["T_NEW","new",101],["T_WHITESPACE"," ",101],["T_STRING","MissingDependencyException",101],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Unable to install modules: module '",101],["T_VARIABLE","$module",101],["T_ENCAPSED_AND_WHITESPACE","' is missing its dependency module ",101],["T_VARIABLE","$dependency",101],["T_ENCAPSED_AND_WHITESPACE",".",101],"\"",")",";",["T_WHITESPACE","\n          ",101],"}",["T_WHITESPACE","\n\n          ",102],["T_COMMENT","\/\/ Skip already installed modules.\n",104],["T_WHITESPACE","          ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_ISSET","isset",105],"(",["T_VARIABLE","$module_list",105],"[",["T_VARIABLE","$dependency",105],"]",")",["T_WHITESPACE"," ",105],["T_BOOLEAN_AND","&&",105],["T_WHITESPACE"," ",105],"!",["T_ISSET","isset",105],"(",["T_VARIABLE","$installed_modules",105],"[",["T_VARIABLE","$dependency",105],"]",")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n            ",105],["T_VARIABLE","$module_list",106],"[",["T_VARIABLE","$dependency",106],"]",["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$dependency",106],";",["T_WHITESPACE","\n          ",106],"}",["T_WHITESPACE","\n        ",107],"}",["T_WHITESPACE","\n      ",108],"}",["T_WHITESPACE","\n\n      ",109],["T_COMMENT","\/\/ Set the actual module weights.\n",111],["T_WHITESPACE","      ",112],["T_VARIABLE","$module_list",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","array_map",112],"(",["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$module",112],")",["T_WHITESPACE"," ",112],["T_USE","use",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$module_data",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n        ",112],["T_RETURN","return",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$module_data",113],"[",["T_VARIABLE","$module",113],"]",["T_OBJECT_OPERATOR","->",113],["T_STRING","sort",113],";",["T_WHITESPACE","\n      ",113],"}",",",["T_WHITESPACE"," ",114],["T_VARIABLE","$module_list",114],")",";",["T_WHITESPACE","\n\n      ",114],["T_COMMENT","\/\/ Sort the module list by their weights (reverse).\n",116],["T_WHITESPACE","      ",117],["T_STRING","arsort",117],"(",["T_VARIABLE","$module_list",117],")",";",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$module_list",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_STRING","array_keys",118],"(",["T_VARIABLE","$module_list",118],")",";",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Required for module installation checks.\n",121],["T_WHITESPACE","    ",122],["T_INCLUDE_ONCE","include_once",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","root",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'\/core\/includes\/install.inc'",122],";",["T_WHITESPACE","\n\n    ",122],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Config\\ConfigInstaller $config_installer *\/",124],["T_WHITESPACE","\n    ",124],["T_VARIABLE","$config_installer",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Drupal",125],["T_DOUBLE_COLON","::",125],["T_STRING","service",125],"(",["T_CONSTANT_ENCAPSED_STRING","'config.installer'",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$sync_status",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$config_installer",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","isSyncing",126],"(",")",";",["T_WHITESPACE","\n    ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$sync_status",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$source_storage",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$config_installer",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","getSourceStorage",128],"(",")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$modules_installed",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$module_list",131],["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$module",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$enabled",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$extension_config",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(","\"",["T_ENCAPSED_AND_WHITESPACE","module.",132],["T_VARIABLE","$module",132],"\"",")",["T_WHITESPACE"," ",132],["T_IS_NOT_IDENTICAL","!==",132],["T_WHITESPACE"," ",132],["T_STRING","NULL",132],";",["T_WHITESPACE","\n      ",132],["T_IF","if",133],["T_WHITESPACE"," ",133],"(","!",["T_VARIABLE","$enabled",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n        ",133],["T_COMMENT","\/\/ Throw an exception if the module name is too long.\n",134],["T_WHITESPACE","        ",135],["T_IF","if",135],["T_WHITESPACE"," ",135],"(",["T_STRING","strlen",135],"(",["T_VARIABLE","$module",135],")",["T_WHITESPACE"," ",135],">",["T_WHITESPACE"," ",135],["T_STRING","DRUPAL_EXTENSION_NAME_MAX_LENGTH",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n          ",135],["T_THROW","throw",136],["T_WHITESPACE"," ",136],["T_NEW","new",136],["T_WHITESPACE"," ",136],["T_STRING","ExtensionNameLengthException",136],"(","\"",["T_ENCAPSED_AND_WHITESPACE","Module name '",136],["T_VARIABLE","$module",136],["T_ENCAPSED_AND_WHITESPACE","' is over the maximum allowed length of ",136],"\"",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_STRING","DRUPAL_EXTENSION_NAME_MAX_LENGTH",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","' characters'",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n\n        ",137],["T_COMMENT","\/\/ Check the validity of the default configuration. This will throw\n",139],["T_WHITESPACE","        ",140],["T_COMMENT","\/\/ exceptions if the configuration is not valid.\n",140],["T_WHITESPACE","        ",141],["T_VARIABLE","$config_installer",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","checkConfigurationToInstall",141],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$module",141],")",";",["T_WHITESPACE","\n\n        ",141],["T_COMMENT","\/\/ Save this data without checking schema. This is a performance\n",143],["T_WHITESPACE","        ",144],["T_COMMENT","\/\/ improvement for module installation.\n",144],["T_WHITESPACE","        ",145],["T_VARIABLE","$extension_config",145],["T_WHITESPACE","\n          ",145],["T_OBJECT_OPERATOR","->",146],["T_STRING","set",146],"(","\"",["T_ENCAPSED_AND_WHITESPACE","module.",146],["T_VARIABLE","$module",146],"\"",",",["T_WHITESPACE"," ",146],["T_LNUMBER","0",146],")",["T_WHITESPACE","\n          ",146],["T_OBJECT_OPERATOR","->",147],["T_STRING","set",147],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",147],",",["T_WHITESPACE"," ",147],["T_STRING","module_config_sort",147],"(",["T_VARIABLE","$extension_config",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","get",147],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",147],")",")",")",["T_WHITESPACE","\n          ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","save",148],"(",["T_STRING","TRUE",148],")",";",["T_WHITESPACE","\n\n        ",148],["T_COMMENT","\/\/ Prepare the new module list, sorted by weight, including filenames.\n",150],["T_WHITESPACE","        ",151],["T_COMMENT","\/\/ This list is used for both the ModuleHandler and DrupalKernel. It\n",151],["T_WHITESPACE","        ",152],["T_COMMENT","\/\/ needs to be kept in sync between both. A DrupalKernel reboot or\n",152],["T_WHITESPACE","        ",153],["T_COMMENT","\/\/ rebuild will automatically re-instantiate a new ModuleHandler that\n",153],["T_WHITESPACE","        ",154],["T_COMMENT","\/\/ uses the new module list of the kernel. However, DrupalKernel does\n",154],["T_WHITESPACE","        ",155],["T_COMMENT","\/\/ not cause any modules to be loaded.\n",155],["T_WHITESPACE","        ",156],["T_COMMENT","\/\/ Furthermore, the currently active (fixed) module list can be\n",156],["T_WHITESPACE","        ",157],["T_COMMENT","\/\/ different from the configured list of enabled modules. For all active\n",157],["T_WHITESPACE","        ",158],["T_COMMENT","\/\/ modules not contained in the configured enabled modules, we assume a\n",158],["T_WHITESPACE","        ",159],["T_COMMENT","\/\/ weight of 0.\n",159],["T_WHITESPACE","        ",160],["T_VARIABLE","$current_module_filenames",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","moduleHandler",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getModuleList",160],"(",")",";",["T_WHITESPACE","\n        ",160],["T_VARIABLE","$current_modules",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_STRING","array_fill_keys",161],"(",["T_STRING","array_keys",161],"(",["T_VARIABLE","$current_module_filenames",161],")",",",["T_WHITESPACE"," ",161],["T_LNUMBER","0",161],")",";",["T_WHITESPACE","\n        ",161],["T_VARIABLE","$current_modules",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","module_config_sort",162],"(",["T_STRING","array_merge",162],"(",["T_VARIABLE","$current_modules",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$extension_config",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","get",162],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",162],")",")",")",";",["T_WHITESPACE","\n        ",162],["T_VARIABLE","$module_filenames",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",")",";",["T_WHITESPACE","\n        ",163],["T_FOREACH","foreach",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$current_modules",164],["T_WHITESPACE"," ",164],["T_AS","as",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$name",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$weight",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n          ",164],["T_IF","if",165],["T_WHITESPACE"," ",165],"(",["T_ISSET","isset",165],"(",["T_VARIABLE","$current_module_filenames",165],"[",["T_VARIABLE","$name",165],"]",")",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n            ",165],["T_VARIABLE","$module_filenames",166],"[",["T_VARIABLE","$name",166],"]",["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$current_module_filenames",166],"[",["T_VARIABLE","$name",166],"]",";",["T_WHITESPACE","\n          ",166],"}",["T_WHITESPACE","\n          ",167],["T_ELSE","else",168],["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n            ",168],["T_VARIABLE","$module_path",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","drupal_get_path",169],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$name",169],")",";",["T_WHITESPACE","\n            ",169],["T_VARIABLE","$pathname",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"\"",["T_VARIABLE","$module_path",170],["T_ENCAPSED_AND_WHITESPACE","\/",170],["T_VARIABLE","$name",170],["T_ENCAPSED_AND_WHITESPACE",".info.yml",170],"\"",";",["T_WHITESPACE","\n            ",170],["T_VARIABLE","$filename",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_STRING","file_exists",171],"(",["T_VARIABLE","$module_path",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],"\"",["T_ENCAPSED_AND_WHITESPACE","\/",171],["T_VARIABLE","$name",171],["T_ENCAPSED_AND_WHITESPACE",".module",171],"\"",")",["T_WHITESPACE"," ",171],"?",["T_WHITESPACE"," ",171],"\"",["T_VARIABLE","$name",171],["T_ENCAPSED_AND_WHITESPACE",".module",171],"\"",["T_WHITESPACE"," ",171],":",["T_WHITESPACE"," ",171],["T_STRING","NULL",171],";",["T_WHITESPACE","\n            ",171],["T_VARIABLE","$module_filenames",172],"[",["T_VARIABLE","$name",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_NEW","new",172],["T_WHITESPACE"," ",172],["T_STRING","Extension",172],"(",["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","root",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'module'",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$pathname",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$filename",172],")",";",["T_WHITESPACE","\n          ",172],"}",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n\n        ",174],["T_COMMENT","\/\/ Update the module handler in order to load the module's code.\n",176],["T_WHITESPACE","        ",177],["T_COMMENT","\/\/ This allows the module to participate in hooks and its existence to\n",177],["T_WHITESPACE","        ",178],["T_COMMENT","\/\/ be discovered by other modules.\n",178],["T_WHITESPACE","        ",179],["T_COMMENT","\/\/ The current ModuleHandler instance is obsolete with the kernel\n",179],["T_WHITESPACE","        ",180],["T_COMMENT","\/\/ rebuild below.\n",180],["T_WHITESPACE","        ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","moduleHandler",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","setModuleList",181],"(",["T_VARIABLE","$module_filenames",181],")",";",["T_WHITESPACE","\n        ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","moduleHandler",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","load",182],"(",["T_VARIABLE","$module",182],")",";",["T_WHITESPACE","\n        ",182],["T_STRING","module_load_install",183],"(",["T_VARIABLE","$module",183],")",";",["T_WHITESPACE","\n\n        ",183],["T_COMMENT","\/\/ Clear the static cache of system_rebuild_module_data() to pick up the\n",185],["T_WHITESPACE","        ",186],["T_COMMENT","\/\/ new module, since it merges the installation status of modules into\n",186],["T_WHITESPACE","        ",187],["T_COMMENT","\/\/ its statically cached list.\n",187],["T_WHITESPACE","        ",188],["T_STRING","drupal_static_reset",188],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",188],")",";",["T_WHITESPACE","\n\n        ",188],["T_COMMENT","\/\/ Update the kernel to include it.\n",190],["T_WHITESPACE","        ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","updateKernel",191],"(",["T_VARIABLE","$module_filenames",191],")",";",["T_WHITESPACE","\n\n        ",191],["T_COMMENT","\/\/ Allow modules to react prior to the installation of a module.\n",193],["T_WHITESPACE","        ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","moduleHandler",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","invokeAll",194],"(",["T_CONSTANT_ENCAPSED_STRING","'module_preinstall'",194],",",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_VARIABLE","$module",194],")",")",";",["T_WHITESPACE","\n\n        ",194],["T_COMMENT","\/\/ Now install the module's schema if necessary.\n",196],["T_WHITESPACE","        ",197],["T_STRING","drupal_install_schema",197],"(",["T_VARIABLE","$module",197],")",";",["T_WHITESPACE","\n\n        ",197],["T_COMMENT","\/\/ Clear plugin manager caches.\n",199],["T_WHITESPACE","        ",200],["T_NS_SEPARATOR","\\",200],["T_STRING","Drupal",200],["T_DOUBLE_COLON","::",200],["T_STRING","getContainer",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","get",200],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.cache_clearer'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","clearCachedDefinitions",200],"(",")",";",["T_WHITESPACE","\n\n        ",200],["T_COMMENT","\/\/ Set the schema version to the number of the last update provided by\n",202],["T_WHITESPACE","        ",203],["T_COMMENT","\/\/ the module, or the minimum core schema version.\n",203],["T_WHITESPACE","        ",204],["T_VARIABLE","$version",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NS_SEPARATOR","\\",204],["T_STRING","Drupal",204],["T_DOUBLE_COLON","::",204],["T_STRING","CORE_MINIMUM_SCHEMA_VERSION",204],";",["T_WHITESPACE","\n        ",204],["T_VARIABLE","$versions",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","drupal_get_schema_versions",205],"(",["T_VARIABLE","$module",205],")",";",["T_WHITESPACE","\n        ",205],["T_IF","if",206],["T_WHITESPACE"," ",206],"(",["T_VARIABLE","$versions",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n          ",206],["T_VARIABLE","$version",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_STRING","max",207],"(",["T_STRING","max",207],"(",["T_VARIABLE","$versions",207],")",",",["T_WHITESPACE"," ",207],["T_VARIABLE","$version",207],")",";",["T_WHITESPACE","\n        ",207],"}",["T_WHITESPACE","\n\n        ",208],["T_COMMENT","\/\/ Notify interested components that this module's entity types and\n",210],["T_WHITESPACE","        ",211],["T_COMMENT","\/\/ field storage definitions are new. For example, a SQL-based storage\n",211],["T_WHITESPACE","        ",212],["T_COMMENT","\/\/ handler can use this as an opportunity to create the necessary\n",212],["T_WHITESPACE","        ",213],["T_COMMENT","\/\/ database tables.\n",213],["T_WHITESPACE","        ",214],["T_COMMENT","\/\/ @todo Clean this up in https:\/\/www.drupal.org\/node\/2350111.\n",214],["T_WHITESPACE","        ",215],["T_VARIABLE","$entity_manager",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_NS_SEPARATOR","\\",215],["T_STRING","Drupal",215],["T_DOUBLE_COLON","::",215],["T_STRING","entityManager",215],"(",")",";",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$update_manager",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_NS_SEPARATOR","\\",216],["T_STRING","Drupal",216],["T_DOUBLE_COLON","::",216],["T_STRING","entityDefinitionUpdateManager",216],"(",")",";",["T_WHITESPACE","\n        ",216],["T_FOREACH","foreach",217],["T_WHITESPACE"," ",217],"(",["T_VARIABLE","$entity_manager",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","getDefinitions",217],"(",")",["T_WHITESPACE"," ",217],["T_AS","as",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$entity_type",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n          ",217],["T_IF","if",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$entity_type",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getProvider",218],"(",")",["T_WHITESPACE"," ",218],["T_IS_EQUAL","==",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$module",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n            ",218],["T_VARIABLE","$update_manager",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","installEntityType",219],"(",["T_VARIABLE","$entity_type",219],")",";",["T_WHITESPACE","\n          ",219],"}",["T_WHITESPACE","\n          ",220],["T_ELSEIF","elseif",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$entity_type",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","isSubclassOf",221],"(",["T_STRING","FieldableEntityInterface",221],["T_DOUBLE_COLON","::",221],["T_CLASS","CLASS",221],")",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n            ",221],["T_COMMENT","\/\/ The module being installed may be adding new fields to existing\n",222],["T_WHITESPACE","            ",223],["T_COMMENT","\/\/ entity types. Field definitions for any entity type defined by\n",223],["T_WHITESPACE","            ",224],["T_COMMENT","\/\/ the module are handled in the if branch.\n",224],["T_WHITESPACE","            ",225],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$entity_manager",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","getFieldStorageDefinitions",225],"(",["T_VARIABLE","$entity_type",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","id",225],"(",")",")",["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$storage_definition",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n              ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$storage_definition",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getProvider",226],"(",")",["T_WHITESPACE"," ",226],["T_IS_EQUAL","==",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$module",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n                ",226],["T_COMMENT","\/\/ If the module being installed is also defining a storage key\n",227],["T_WHITESPACE","                ",228],["T_COMMENT","\/\/ for the entity type, the entity schema may not exist yet. It\n",228],["T_WHITESPACE","                ",229],["T_COMMENT","\/\/ will be created later in that case.\n",229],["T_WHITESPACE","                ",230],["T_TRY","try",230],["T_WHITESPACE"," ",230],"{",["T_WHITESPACE","\n                  ",230],["T_VARIABLE","$update_manager",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","installFieldStorageDefinition",231],"(",["T_VARIABLE","$storage_definition",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","getName",231],"(",")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$entity_type",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","id",231],"(",")",",",["T_WHITESPACE"," ",231],["T_VARIABLE","$module",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$storage_definition",231],")",";",["T_WHITESPACE","\n                ",231],"}",["T_WHITESPACE","\n                ",232],["T_CATCH","catch",233],["T_WHITESPACE"," ",233],"(",["T_STRING","EntityStorageException",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$e",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n                  ",233],["T_STRING","watchdog_exception",234],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$e",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'An error occurred while notifying the creation of the @name field storage definition: \"!message\" in %function (line %line of %file).'",234],",",["T_WHITESPACE"," ",234],"[",["T_CONSTANT_ENCAPSED_STRING","'@name'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$storage_definition",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getName",234],"(",")","]",")",";",["T_WHITESPACE","\n                ",234],"}",["T_WHITESPACE","\n              ",235],"}",["T_WHITESPACE","\n            ",236],"}",["T_WHITESPACE","\n          ",237],"}",["T_WHITESPACE","\n        ",238],"}",["T_WHITESPACE","\n\n        ",239],["T_COMMENT","\/\/ Install default configuration of the module.\n",241],["T_WHITESPACE","        ",242],["T_VARIABLE","$config_installer",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_NS_SEPARATOR","\\",242],["T_STRING","Drupal",242],["T_DOUBLE_COLON","::",242],["T_STRING","service",242],"(",["T_CONSTANT_ENCAPSED_STRING","'config.installer'",242],")",";",["T_WHITESPACE","\n        ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(",["T_VARIABLE","$sync_status",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n          ",243],["T_VARIABLE","$config_installer",244],["T_WHITESPACE","\n            ",244],["T_OBJECT_OPERATOR","->",245],["T_STRING","setSyncing",245],"(",["T_STRING","TRUE",245],")",["T_WHITESPACE","\n            ",245],["T_OBJECT_OPERATOR","->",246],["T_STRING","setSourceStorage",246],"(",["T_VARIABLE","$source_storage",246],")",";",["T_WHITESPACE","\n        ",246],"}",["T_WHITESPACE","\n        ",247],["T_NS_SEPARATOR","\\",248],["T_STRING","Drupal",248],["T_DOUBLE_COLON","::",248],["T_STRING","service",248],"(",["T_CONSTANT_ENCAPSED_STRING","'config.installer'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","installDefaultConfig",248],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$module",248],")",";",["T_WHITESPACE","\n\n        ",248],["T_COMMENT","\/\/ If the module has no current updates, but has some that were\n",250],["T_WHITESPACE","        ",251],["T_COMMENT","\/\/ previously removed, set the version to the value of\n",251],["T_WHITESPACE","        ",252],["T_COMMENT","\/\/ hook_update_last_removed().\n",252],["T_WHITESPACE","        ",253],["T_IF","if",253],["T_WHITESPACE"," ",253],"(",["T_VARIABLE","$last_removed",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","moduleHandler",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","invoke",253],"(",["T_VARIABLE","$module",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'update_last_removed'",253],")",")",["T_WHITESPACE"," ",253],"{",["T_WHITESPACE","\n          ",253],["T_VARIABLE","$version",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_STRING","max",254],"(",["T_VARIABLE","$version",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$last_removed",254],")",";",["T_WHITESPACE","\n        ",254],"}",["T_WHITESPACE","\n        ",255],["T_STRING","drupal_set_installed_schema_version",256],"(",["T_VARIABLE","$module",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$version",256],")",";",["T_WHITESPACE","\n\n        ",256],["T_COMMENT","\/\/ Ensure that all post_update functions are registered already.\n",258],["T_WHITESPACE","        ",259],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Update\\UpdateRegistry $post_update_registry *\/",259],["T_WHITESPACE","\n        ",259],["T_VARIABLE","$post_update_registry",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_NS_SEPARATOR","\\",260],["T_STRING","Drupal",260],["T_DOUBLE_COLON","::",260],["T_STRING","service",260],"(",["T_CONSTANT_ENCAPSED_STRING","'update.post_update_registry'",260],")",";",["T_WHITESPACE","\n        ",260],["T_VARIABLE","$post_update_registry",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","registerInvokedUpdates",261],"(",["T_VARIABLE","$post_update_registry",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getModuleUpdateFunctions",261],"(",["T_VARIABLE","$module",261],")",")",";",["T_WHITESPACE","\n\n        ",261],["T_COMMENT","\/\/ Record the fact that it was installed.\n",263],["T_WHITESPACE","        ",264],["T_VARIABLE","$modules_installed",264],"[","]",["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$module",264],";",["T_WHITESPACE","\n\n        ",264],["T_COMMENT","\/\/ Drupal's stream wrappers needs to be re-registered in case a\n",266],["T_WHITESPACE","        ",267],["T_COMMENT","\/\/ module-provided stream wrapper is used later in the same request. In\n",267],["T_WHITESPACE","        ",268],["T_COMMENT","\/\/ particular, this happens when installing Drupal via Drush, as the\n",268],["T_WHITESPACE","        ",269],["T_COMMENT","\/\/ 'translations' stream wrapper is provided by Interface Translation\n",269],["T_WHITESPACE","        ",270],["T_COMMENT","\/\/ module and is later used to import translations.\n",270],["T_WHITESPACE","        ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Drupal",271],["T_DOUBLE_COLON","::",271],["T_STRING","service",271],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",271],")",["T_OBJECT_OPERATOR","->",271],["T_STRING","register",271],"(",")",";",["T_WHITESPACE","\n\n        ",271],["T_COMMENT","\/\/ Update the theme registry to include it.\n",273],["T_WHITESPACE","        ",274],["T_STRING","drupal_theme_rebuild",274],"(",")",";",["T_WHITESPACE","\n\n        ",274],["T_COMMENT","\/\/ Modules can alter theme info, so refresh theme data.\n",276],["T_WHITESPACE","        ",277],["T_COMMENT","\/\/ @todo ThemeHandler cannot be injected into ModuleHandler, since that\n",277],["T_WHITESPACE","        ",278],["T_COMMENT","\/\/   causes a circular service dependency.\n",278],["T_WHITESPACE","        ",279],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2208429\n",279],["T_WHITESPACE","        ",280],["T_NS_SEPARATOR","\\",280],["T_STRING","Drupal",280],["T_DOUBLE_COLON","::",280],["T_STRING","service",280],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",280],")",["T_OBJECT_OPERATOR","->",280],["T_STRING","refreshInfo",280],"(",")",";",["T_WHITESPACE","\n\n        ",280],["T_COMMENT","\/\/ In order to make uninstalling transactional if anything uses routes.\n",282],["T_WHITESPACE","        ",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Drupal",283],["T_DOUBLE_COLON","::",283],["T_STRING","getContainer",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","set",283],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.old'",283],",",["T_WHITESPACE"," ",283],["T_NS_SEPARATOR","\\",283],["T_STRING","Drupal",283],["T_DOUBLE_COLON","::",283],["T_STRING","service",283],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider'",283],")",")",";",["T_WHITESPACE","\n        ",283],["T_NS_SEPARATOR","\\",284],["T_STRING","Drupal",284],["T_DOUBLE_COLON","::",284],["T_STRING","getContainer",284],"(",")",["T_OBJECT_OPERATOR","->",284],["T_STRING","set",284],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider'",284],",",["T_WHITESPACE"," ",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Drupal",284],["T_DOUBLE_COLON","::",284],["T_STRING","service",284],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.lazy_builder'",284],")",")",";",["T_WHITESPACE","\n\n        ",284],["T_COMMENT","\/\/ Allow the module to perform install tasks.\n",286],["T_WHITESPACE","        ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","moduleHandler",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","invoke",287],"(",["T_VARIABLE","$module",287],",",["T_WHITESPACE"," ",287],["T_CONSTANT_ENCAPSED_STRING","'install'",287],")",";",["T_WHITESPACE","\n\n        ",287],["T_COMMENT","\/\/ Record the fact that it was installed.\n",289],["T_WHITESPACE","        ",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Drupal",290],["T_DOUBLE_COLON","::",290],["T_STRING","logger",290],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",290],")",["T_OBJECT_OPERATOR","->",290],["T_STRING","info",290],"(",["T_CONSTANT_ENCAPSED_STRING","'%module module installed.'",290],",",["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",["T_CONSTANT_ENCAPSED_STRING","'%module'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$module",290],")",")",";",["T_WHITESPACE","\n      ",290],"}",["T_WHITESPACE","\n    ",291],"}",["T_WHITESPACE","\n\n    ",292],["T_COMMENT","\/\/ If any modules were newly installed, invoke hook_modules_installed().\n",294],["T_WHITESPACE","    ",295],["T_IF","if",295],["T_WHITESPACE"," ",295],"(","!",["T_EMPTY","empty",295],"(",["T_VARIABLE","$modules_installed",295],")",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n      ",295],["T_NS_SEPARATOR","\\",296],["T_STRING","Drupal",296],["T_DOUBLE_COLON","::",296],["T_STRING","getContainer",296],"(",")",["T_OBJECT_OPERATOR","->",296],["T_STRING","set",296],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider'",296],",",["T_WHITESPACE"," ",296],["T_NS_SEPARATOR","\\",296],["T_STRING","Drupal",296],["T_DOUBLE_COLON","::",296],["T_STRING","service",296],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.old'",296],")",")",";",["T_WHITESPACE","\n      ",296],["T_IF","if",297],["T_WHITESPACE"," ",297],"(","!",["T_NS_SEPARATOR","\\",297],["T_STRING","Drupal",297],["T_DOUBLE_COLON","::",297],["T_STRING","service",297],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.lazy_builder'",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","hasRebuilt",297],"(",")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n        ",297],["T_COMMENT","\/\/ Rebuild routes after installing module. This is done here on top of\n",298],["T_WHITESPACE","        ",299],["T_COMMENT","\/\/ \\Drupal\\Core\\Routing\\RouteBuilder::destruct to not run into errors on\n",299],["T_WHITESPACE","        ",300],["T_COMMENT","\/\/ fastCGI which executes ::destruct() after the module installation\n",300],["T_WHITESPACE","        ",301],["T_COMMENT","\/\/ page was sent already.\n",301],["T_WHITESPACE","        ",302],["T_NS_SEPARATOR","\\",302],["T_STRING","Drupal",302],["T_DOUBLE_COLON","::",302],["T_STRING","service",302],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",302],")",["T_OBJECT_OPERATOR","->",302],["T_STRING","rebuild",302],"(",")",";",["T_WHITESPACE","\n      ",302],"}",["T_WHITESPACE","\n\n      ",303],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","moduleHandler",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","invokeAll",305],"(",["T_CONSTANT_ENCAPSED_STRING","'modules_installed'",305],",",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",["T_VARIABLE","$modules_installed",305],")",")",";",["T_WHITESPACE","\n    ",305],"}",["T_WHITESPACE","\n\n    ",306],["T_RETURN","return",308],["T_WHITESPACE"," ",308],["T_STRING","TRUE",308],";",["T_WHITESPACE","\n  ",308],"}",["T_WHITESPACE","\n\n  ",309],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",311],["T_WHITESPACE","\n  ",313],["T_PUBLIC","public",314],["T_WHITESPACE"," ",314],["T_FUNCTION","function",314],["T_WHITESPACE"," ",314],["T_STRING","uninstall",314],"(",["T_ARRAY","array",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$module_list",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$uninstall_dependents",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","TRUE",314],")",["T_WHITESPACE"," ",314],"{",["T_WHITESPACE","\n    ",314],["T_COMMENT","\/\/ Get all module data so we can find dependencies and sort.\n",315],["T_WHITESPACE","    ",316],["T_VARIABLE","$module_data",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_STRING","system_rebuild_module_data",316],"(",")",";",["T_WHITESPACE","\n    ",316],["T_VARIABLE","$module_list",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$module_list",317],["T_WHITESPACE"," ",317],"?",["T_WHITESPACE"," ",317],["T_STRING","array_combine",317],"(",["T_VARIABLE","$module_list",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$module_list",317],")",["T_WHITESPACE"," ",317],":",["T_WHITESPACE"," ",317],["T_ARRAY","array",317],"(",")",";",["T_WHITESPACE","\n    ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_STRING","array_diff_key",318],"(",["T_VARIABLE","$module_list",318],",",["T_WHITESPACE"," ",318],["T_VARIABLE","$module_data",318],")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n      ",318],["T_COMMENT","\/\/ One or more of the given modules doesn't exist.\n",319],["T_WHITESPACE","      ",320],["T_RETURN","return",320],["T_WHITESPACE"," ",320],["T_STRING","FALSE",320],";",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n\n    ",321],["T_VARIABLE","$extension_config",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_NS_SEPARATOR","\\",323],["T_STRING","Drupal",323],["T_DOUBLE_COLON","::",323],["T_STRING","configFactory",323],"(",")",["T_OBJECT_OPERATOR","->",323],["T_STRING","getEditable",323],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",323],")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$installed_modules",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$extension_config",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","get",324],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",324],")",["T_WHITESPACE"," ",324],"?",":",["T_WHITESPACE"," ",324],["T_ARRAY","array",324],"(",")",";",["T_WHITESPACE","\n    ",324],["T_IF","if",325],["T_WHITESPACE"," ",325],"(","!",["T_VARIABLE","$module_list",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_STRING","array_intersect_key",325],"(",["T_VARIABLE","$module_list",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$installed_modules",325],")",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n      ",325],["T_COMMENT","\/\/ Nothing to do. All modules already uninstalled.\n",326],["T_WHITESPACE","      ",327],["T_RETURN","return",327],["T_WHITESPACE"," ",327],["T_STRING","TRUE",327],";",["T_WHITESPACE","\n    ",327],"}",["T_WHITESPACE","\n\n    ",328],["T_IF","if",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$uninstall_dependents",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n      ",330],["T_COMMENT","\/\/ Add dependent modules to the list. The new modules will be processed as\n",331],["T_WHITESPACE","      ",332],["T_COMMENT","\/\/ the while loop continues.\n",332],["T_WHITESPACE","      ",333],["T_VARIABLE","$profile",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_STRING","drupal_get_profile",333],"(",")",";",["T_WHITESPACE","\n      ",333],["T_WHILE","while",334],["T_WHITESPACE"," ",334],"(",["T_LIST","list",334],"(",["T_VARIABLE","$module",334],")",["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_STRING","each",334],"(",["T_VARIABLE","$module_list",334],")",")",["T_WHITESPACE"," ",334],"{",["T_WHITESPACE","\n        ",334],["T_FOREACH","foreach",335],["T_WHITESPACE"," ",335],"(",["T_STRING","array_keys",335],"(",["T_VARIABLE","$module_data",335],"[",["T_VARIABLE","$module",335],"]",["T_OBJECT_OPERATOR","->",335],["T_STRING","required_by",335],")",["T_WHITESPACE"," ",335],["T_AS","as",335],["T_WHITESPACE"," ",335],["T_VARIABLE","$dependent",335],")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n          ",335],["T_IF","if",336],["T_WHITESPACE"," ",336],"(","!",["T_ISSET","isset",336],"(",["T_VARIABLE","$module_data",336],"[",["T_VARIABLE","$dependent",336],"]",")",")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_COMMENT","\/\/ The dependent module does not exist.\n",337],["T_WHITESPACE","            ",338],["T_RETURN","return",338],["T_WHITESPACE"," ",338],["T_STRING","FALSE",338],";",["T_WHITESPACE","\n          ",338],"}",["T_WHITESPACE","\n\n          ",339],["T_COMMENT","\/\/ Skip already uninstalled modules.\n",341],["T_WHITESPACE","          ",342],["T_IF","if",342],["T_WHITESPACE"," ",342],"(",["T_ISSET","isset",342],"(",["T_VARIABLE","$installed_modules",342],"[",["T_VARIABLE","$dependent",342],"]",")",["T_WHITESPACE"," ",342],["T_BOOLEAN_AND","&&",342],["T_WHITESPACE"," ",342],"!",["T_ISSET","isset",342],"(",["T_VARIABLE","$module_list",342],"[",["T_VARIABLE","$dependent",342],"]",")",["T_WHITESPACE"," ",342],["T_BOOLEAN_AND","&&",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$dependent",342],["T_WHITESPACE"," ",342],["T_IS_NOT_EQUAL","!=",342],["T_WHITESPACE"," ",342],["T_VARIABLE","$profile",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n            ",342],["T_VARIABLE","$module_list",343],"[",["T_VARIABLE","$dependent",343],"]",["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$dependent",343],";",["T_WHITESPACE","\n          ",343],"}",["T_WHITESPACE","\n        ",344],"}",["T_WHITESPACE","\n      ",345],"}",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n\n    ",347],["T_COMMENT","\/\/ Use the validators and throw an exception with the reasons.\n",349],["T_WHITESPACE","    ",350],["T_IF","if",350],["T_WHITESPACE"," ",350],"(",["T_VARIABLE","$reasons",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","validateUninstall",350],"(",["T_VARIABLE","$module_list",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n      ",350],["T_FOREACH","foreach",351],["T_WHITESPACE"," ",351],"(",["T_VARIABLE","$reasons",351],["T_WHITESPACE"," ",351],["T_AS","as",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$reason",351],")",["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n        ",351],["T_VARIABLE","$reason_message",352],"[","]",["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","implode",352],"(",["T_CONSTANT_ENCAPSED_STRING","', '",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$reason",352],")",";",["T_WHITESPACE","\n      ",352],"}",["T_WHITESPACE","\n      ",353],["T_THROW","throw",354],["T_WHITESPACE"," ",354],["T_NEW","new",354],["T_WHITESPACE"," ",354],["T_STRING","ModuleUninstallValidatorException",354],"(",["T_CONSTANT_ENCAPSED_STRING","'The following reasons prevent the modules from being uninstalled: '",354],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_STRING","implode",354],"(",["T_CONSTANT_ENCAPSED_STRING","'; '",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$reason_message",354],")",")",";",["T_WHITESPACE","\n    ",354],"}",["T_WHITESPACE","\n    ",355],["T_COMMENT","\/\/ Set the actual module weights.\n",356],["T_WHITESPACE","    ",357],["T_VARIABLE","$module_list",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_STRING","array_map",357],"(",["T_FUNCTION","function",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$module",357],")",["T_WHITESPACE"," ",357],["T_USE","use",357],["T_WHITESPACE"," ",357],"(",["T_VARIABLE","$module_data",357],")",["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n      ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$module_data",358],"[",["T_VARIABLE","$module",358],"]",["T_OBJECT_OPERATOR","->",358],["T_STRING","sort",358],";",["T_WHITESPACE","\n    ",358],"}",",",["T_WHITESPACE"," ",359],["T_VARIABLE","$module_list",359],")",";",["T_WHITESPACE","\n\n    ",359],["T_COMMENT","\/\/ Sort the module list by their weights.\n",361],["T_WHITESPACE","    ",362],["T_STRING","asort",362],"(",["T_VARIABLE","$module_list",362],")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$module_list",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_STRING","array_keys",363],"(",["T_VARIABLE","$module_list",363],")",";",["T_WHITESPACE","\n\n    ",363],["T_COMMENT","\/\/ Only process modules that are enabled. A module is only enabled if it is\n",365],["T_WHITESPACE","    ",366],["T_COMMENT","\/\/ configured as enabled. Custom or overridden module handlers might contain\n",366],["T_WHITESPACE","    ",367],["T_COMMENT","\/\/ the module already, which means that it might be loaded, but not\n",367],["T_WHITESPACE","    ",368],["T_COMMENT","\/\/ necessarily installed.\n",368],["T_WHITESPACE","    ",369],["T_FOREACH","foreach",369],["T_WHITESPACE"," ",369],"(",["T_VARIABLE","$module_list",369],["T_WHITESPACE"," ",369],["T_AS","as",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$module",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n\n      ",369],["T_COMMENT","\/\/ Clean up all entity bundles (including fields) of every entity type\n",371],["T_WHITESPACE","      ",372],["T_COMMENT","\/\/ provided by the module that is being uninstalled.\n",372],["T_WHITESPACE","      ",373],["T_COMMENT","\/\/ @todo Clean this up in https:\/\/www.drupal.org\/node\/2350111.\n",373],["T_WHITESPACE","      ",374],["T_VARIABLE","$entity_manager",374],["T_WHITESPACE"," ",374],"=",["T_WHITESPACE"," ",374],["T_NS_SEPARATOR","\\",374],["T_STRING","Drupal",374],["T_DOUBLE_COLON","::",374],["T_STRING","entityManager",374],"(",")",";",["T_WHITESPACE","\n      ",374],["T_FOREACH","foreach",375],["T_WHITESPACE"," ",375],"(",["T_VARIABLE","$entity_manager",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","getDefinitions",375],"(",")",["T_WHITESPACE"," ",375],["T_AS","as",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$entity_type_id",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$entity_type",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n        ",375],["T_IF","if",376],["T_WHITESPACE"," ",376],"(",["T_VARIABLE","$entity_type",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","getProvider",376],"(",")",["T_WHITESPACE"," ",376],["T_IS_EQUAL","==",376],["T_WHITESPACE"," ",376],["T_VARIABLE","$module",376],")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n          ",376],["T_FOREACH","foreach",377],["T_WHITESPACE"," ",377],"(",["T_STRING","array_keys",377],"(",["T_VARIABLE","$entity_manager",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getBundleInfo",377],"(",["T_VARIABLE","$entity_type_id",377],")",")",["T_WHITESPACE"," ",377],["T_AS","as",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$bundle",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n            ",377],["T_VARIABLE","$entity_manager",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","onBundleDelete",378],"(",["T_VARIABLE","$bundle",378],",",["T_WHITESPACE"," ",378],["T_VARIABLE","$entity_type_id",378],")",";",["T_WHITESPACE","\n          ",378],"}",["T_WHITESPACE","\n        ",379],"}",["T_WHITESPACE","\n      ",380],"}",["T_WHITESPACE","\n\n      ",381],["T_COMMENT","\/\/ Allow modules to react prior to the uninstallation of a module.\n",383],["T_WHITESPACE","      ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","moduleHandler",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","invokeAll",384],"(",["T_CONSTANT_ENCAPSED_STRING","'module_preuninstall'",384],",",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],"(",["T_VARIABLE","$module",384],")",")",";",["T_WHITESPACE","\n\n      ",384],["T_COMMENT","\/\/ Uninstall the module.\n",386],["T_WHITESPACE","      ",387],["T_STRING","module_load_install",387],"(",["T_VARIABLE","$module",387],")",";",["T_WHITESPACE","\n      ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","moduleHandler",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","invoke",388],"(",["T_VARIABLE","$module",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'uninstall'",388],")",";",["T_WHITESPACE","\n\n      ",388],["T_COMMENT","\/\/ Remove all configuration belonging to the module.\n",390],["T_WHITESPACE","      ",391],["T_NS_SEPARATOR","\\",391],["T_STRING","Drupal",391],["T_DOUBLE_COLON","::",391],["T_STRING","service",391],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",391],")",["T_OBJECT_OPERATOR","->",391],["T_STRING","uninstall",391],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$module",391],")",";",["T_WHITESPACE","\n\n      ",391],["T_COMMENT","\/\/ In order to make uninstalling transactional if anything uses routes.\n",393],["T_WHITESPACE","      ",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Drupal",394],["T_DOUBLE_COLON","::",394],["T_STRING","getContainer",394],"(",")",["T_OBJECT_OPERATOR","->",394],["T_STRING","set",394],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.old'",394],",",["T_WHITESPACE"," ",394],["T_NS_SEPARATOR","\\",394],["T_STRING","Drupal",394],["T_DOUBLE_COLON","::",394],["T_STRING","service",394],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider'",394],")",")",";",["T_WHITESPACE","\n      ",394],["T_NS_SEPARATOR","\\",395],["T_STRING","Drupal",395],["T_DOUBLE_COLON","::",395],["T_STRING","getContainer",395],"(",")",["T_OBJECT_OPERATOR","->",395],["T_STRING","set",395],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider'",395],",",["T_WHITESPACE"," ",395],["T_NS_SEPARATOR","\\",395],["T_STRING","Drupal",395],["T_DOUBLE_COLON","::",395],["T_STRING","service",395],"(",["T_CONSTANT_ENCAPSED_STRING","'router.route_provider.lazy_builder'",395],")",")",";",["T_WHITESPACE","\n\n      ",395],["T_COMMENT","\/\/ Notify interested components that this module's entity types are being\n",397],["T_WHITESPACE","      ",398],["T_COMMENT","\/\/ deleted. For example, a SQL-based storage handler can use this as an\n",398],["T_WHITESPACE","      ",399],["T_COMMENT","\/\/ opportunity to drop the corresponding database tables.\n",399],["T_WHITESPACE","      ",400],["T_COMMENT","\/\/ @todo Clean this up in https:\/\/www.drupal.org\/node\/2350111.\n",400],["T_WHITESPACE","      ",401],["T_VARIABLE","$update_manager",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_NS_SEPARATOR","\\",401],["T_STRING","Drupal",401],["T_DOUBLE_COLON","::",401],["T_STRING","entityDefinitionUpdateManager",401],"(",")",";",["T_WHITESPACE","\n      ",401],["T_FOREACH","foreach",402],["T_WHITESPACE"," ",402],"(",["T_VARIABLE","$entity_manager",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","getDefinitions",402],"(",")",["T_WHITESPACE"," ",402],["T_AS","as",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$entity_type",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n        ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_VARIABLE","$entity_type",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getProvider",403],"(",")",["T_WHITESPACE"," ",403],["T_IS_EQUAL","==",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$module",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n          ",403],["T_VARIABLE","$update_manager",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","uninstallEntityType",404],"(",["T_VARIABLE","$entity_type",404],")",";",["T_WHITESPACE","\n        ",404],"}",["T_WHITESPACE","\n        ",405],["T_ELSEIF","elseif",406],["T_WHITESPACE"," ",406],"(",["T_VARIABLE","$entity_type",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","isSubclassOf",406],"(",["T_STRING","FieldableEntityInterface",406],["T_DOUBLE_COLON","::",406],["T_CLASS","CLASS",406],")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n          ",406],["T_COMMENT","\/\/ The module being installed may be adding new fields to existing\n",407],["T_WHITESPACE","          ",408],["T_COMMENT","\/\/ entity types. Field definitions for any entity type defined by\n",408],["T_WHITESPACE","          ",409],["T_COMMENT","\/\/ the module are handled in the if branch.\n",409],["T_WHITESPACE","          ",410],["T_VARIABLE","$entity_type_id",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_VARIABLE","$entity_type",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","id",410],"(",")",";",["T_WHITESPACE","\n          ",410],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\FieldableEntityStorageInterface $storage *\/",411],["T_WHITESPACE","\n          ",411],["T_VARIABLE","$storage",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$entity_manager",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","getStorage",412],"(",["T_VARIABLE","$entity_type_id",412],")",";",["T_WHITESPACE","\n          ",412],["T_FOREACH","foreach",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$entity_manager",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","getFieldStorageDefinitions",413],"(",["T_VARIABLE","$entity_type_id",413],")",["T_WHITESPACE"," ",413],["T_AS","as",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$storage_definition",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n            ",413],["T_COMMENT","\/\/ @todo We need to trigger field purging here.\n",414],["T_WHITESPACE","            ",415],["T_COMMENT","\/\/   See https:\/\/www.drupal.org\/node\/2282119.\n",415],["T_WHITESPACE","            ",416],["T_IF","if",416],["T_WHITESPACE"," ",416],"(",["T_VARIABLE","$storage_definition",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getProvider",416],"(",")",["T_WHITESPACE"," ",416],["T_IS_EQUAL","==",416],["T_WHITESPACE"," ",416],["T_VARIABLE","$module",416],["T_WHITESPACE"," ",416],["T_BOOLEAN_AND","&&",416],["T_WHITESPACE"," ",416],"!",["T_VARIABLE","$storage",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","countFieldData",416],"(",["T_VARIABLE","$storage_definition",416],",",["T_WHITESPACE"," ",416],["T_STRING","TRUE",416],")",")",["T_WHITESPACE"," ",416],"{",["T_WHITESPACE","\n              ",416],["T_VARIABLE","$update_manager",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","uninstallFieldStorageDefinition",417],"(",["T_VARIABLE","$storage_definition",417],")",";",["T_WHITESPACE","\n            ",417],"}",["T_WHITESPACE","\n          ",418],"}",["T_WHITESPACE","\n        ",419],"}",["T_WHITESPACE","\n      ",420],"}",["T_WHITESPACE","\n\n      ",421],["T_COMMENT","\/\/ Remove the schema.\n",423],["T_WHITESPACE","      ",424],["T_STRING","drupal_uninstall_schema",424],"(",["T_VARIABLE","$module",424],")",";",["T_WHITESPACE","\n\n      ",424],["T_COMMENT","\/\/ Remove the module's entry from the config. Don't check schema when\n",426],["T_WHITESPACE","      ",427],["T_COMMENT","\/\/ uninstalling a module since we are only clearing a key.\n",427],["T_WHITESPACE","      ",428],["T_NS_SEPARATOR","\\",428],["T_STRING","Drupal",428],["T_DOUBLE_COLON","::",428],["T_STRING","configFactory",428],"(",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","getEditable",428],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",428],")",["T_OBJECT_OPERATOR","->",428],["T_STRING","clear",428],"(","\"",["T_ENCAPSED_AND_WHITESPACE","module.",428],["T_VARIABLE","$module",428],"\"",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","save",428],"(",["T_STRING","TRUE",428],")",";",["T_WHITESPACE","\n\n      ",428],["T_COMMENT","\/\/ Update the module handler to remove the module.\n",430],["T_WHITESPACE","      ",431],["T_COMMENT","\/\/ The current ModuleHandler instance is obsolete with the kernel rebuild\n",431],["T_WHITESPACE","      ",432],["T_COMMENT","\/\/ below.\n",432],["T_WHITESPACE","      ",433],["T_VARIABLE","$module_filenames",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","moduleHandler",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getModuleList",433],"(",")",";",["T_WHITESPACE","\n      ",433],["T_UNSET","unset",434],"(",["T_VARIABLE","$module_filenames",434],"[",["T_VARIABLE","$module",434],"]",")",";",["T_WHITESPACE","\n      ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","moduleHandler",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","setModuleList",435],"(",["T_VARIABLE","$module_filenames",435],")",";",["T_WHITESPACE","\n\n      ",435],["T_COMMENT","\/\/ Remove any potential cache bins provided by the module.\n",437],["T_WHITESPACE","      ",438],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","removeCacheBins",438],"(",["T_VARIABLE","$module",438],")",";",["T_WHITESPACE","\n\n      ",438],["T_COMMENT","\/\/ Clear the static cache of system_rebuild_module_data() to pick up the\n",440],["T_WHITESPACE","      ",441],["T_COMMENT","\/\/ new module, since it merges the installation status of modules into\n",441],["T_WHITESPACE","      ",442],["T_COMMENT","\/\/ its statically cached list.\n",442],["T_WHITESPACE","      ",443],["T_STRING","drupal_static_reset",443],"(",["T_CONSTANT_ENCAPSED_STRING","'system_rebuild_module_data'",443],")",";",["T_WHITESPACE","\n\n      ",443],["T_COMMENT","\/\/ Clear plugin manager caches.\n",445],["T_WHITESPACE","      ",446],["T_NS_SEPARATOR","\\",446],["T_STRING","Drupal",446],["T_DOUBLE_COLON","::",446],["T_STRING","getContainer",446],"(",")",["T_OBJECT_OPERATOR","->",446],["T_STRING","get",446],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.cache_clearer'",446],")",["T_OBJECT_OPERATOR","->",446],["T_STRING","clearCachedDefinitions",446],"(",")",";",["T_WHITESPACE","\n\n      ",446],["T_COMMENT","\/\/ Update the kernel to exclude the uninstalled modules.\n",448],["T_WHITESPACE","      ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","updateKernel",449],"(",["T_VARIABLE","$module_filenames",449],")",";",["T_WHITESPACE","\n\n      ",449],["T_COMMENT","\/\/ Update the theme registry to remove the newly uninstalled module.\n",451],["T_WHITESPACE","      ",452],["T_STRING","drupal_theme_rebuild",452],"(",")",";",["T_WHITESPACE","\n\n      ",452],["T_COMMENT","\/\/ Modules can alter theme info, so refresh theme data.\n",454],["T_WHITESPACE","      ",455],["T_COMMENT","\/\/ @todo ThemeHandler cannot be injected into ModuleHandler, since that\n",455],["T_WHITESPACE","      ",456],["T_COMMENT","\/\/   causes a circular service dependency.\n",456],["T_WHITESPACE","      ",457],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2208429\n",457],["T_WHITESPACE","      ",458],["T_NS_SEPARATOR","\\",458],["T_STRING","Drupal",458],["T_DOUBLE_COLON","::",458],["T_STRING","service",458],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",458],")",["T_OBJECT_OPERATOR","->",458],["T_STRING","refreshInfo",458],"(",")",";",["T_WHITESPACE","\n\n      ",458],["T_NS_SEPARATOR","\\",460],["T_STRING","Drupal",460],["T_DOUBLE_COLON","::",460],["T_STRING","logger",460],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",460],")",["T_OBJECT_OPERATOR","->",460],["T_STRING","info",460],"(",["T_CONSTANT_ENCAPSED_STRING","'%module module uninstalled.'",460],",",["T_WHITESPACE"," ",460],["T_ARRAY","array",460],"(",["T_CONSTANT_ENCAPSED_STRING","'%module'",460],["T_WHITESPACE"," ",460],["T_DOUBLE_ARROW","=>",460],["T_WHITESPACE"," ",460],["T_VARIABLE","$module",460],")",")",";",["T_WHITESPACE","\n\n      ",460],["T_VARIABLE","$schema_store",462],["T_WHITESPACE"," ",462],"=",["T_WHITESPACE"," ",462],["T_NS_SEPARATOR","\\",462],["T_STRING","Drupal",462],["T_DOUBLE_COLON","::",462],["T_STRING","keyValue",462],"(",["T_CONSTANT_ENCAPSED_STRING","'system.schema'",462],")",";",["T_WHITESPACE","\n      ",462],["T_VARIABLE","$schema_store",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","delete",463],"(",["T_VARIABLE","$module",463],")",";",["T_WHITESPACE","\n\n      ",463],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Update\\UpdateRegistry $post_update_registry *\/",465],["T_WHITESPACE","\n      ",465],["T_VARIABLE","$post_update_registry",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_NS_SEPARATOR","\\",466],["T_STRING","Drupal",466],["T_DOUBLE_COLON","::",466],["T_STRING","service",466],"(",["T_CONSTANT_ENCAPSED_STRING","'update.post_update_registry'",466],")",";",["T_WHITESPACE","\n      ",466],["T_VARIABLE","$post_update_registry",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","filterOutInvokedUpdatesByModule",467],"(",["T_VARIABLE","$module",467],")",";",["T_WHITESPACE","\n    ",467],"}",["T_WHITESPACE","\n    ",468],["T_COMMENT","\/\/ Rebuild routes after installing module. This is done here on top of\n",469],["T_WHITESPACE","    ",470],["T_COMMENT","\/\/ \\Drupal\\Core\\Routing\\RouteBuilder::destruct to not run into errors on\n",470],["T_WHITESPACE","    ",471],["T_COMMENT","\/\/ fastCGI which executes ::destruct() after the Module uninstallation page\n",471],["T_WHITESPACE","    ",472],["T_COMMENT","\/\/ was sent already.\n",472],["T_WHITESPACE","    ",473],["T_NS_SEPARATOR","\\",473],["T_STRING","Drupal",473],["T_DOUBLE_COLON","::",473],["T_STRING","service",473],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",473],")",["T_OBJECT_OPERATOR","->",473],["T_STRING","rebuild",473],"(",")",";",["T_WHITESPACE","\n    ",473],["T_STRING","drupal_get_installed_schema_version",474],"(",["T_STRING","NULL",474],",",["T_WHITESPACE"," ",474],["T_STRING","TRUE",474],")",";",["T_WHITESPACE","\n\n    ",474],["T_COMMENT","\/\/ Let other modules react.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","moduleHandler",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","invokeAll",477],"(",["T_CONSTANT_ENCAPSED_STRING","'modules_uninstalled'",477],",",["T_WHITESPACE"," ",477],["T_ARRAY","array",477],"(",["T_VARIABLE","$module_list",477],")",")",";",["T_WHITESPACE","\n\n    ",477],["T_COMMENT","\/\/ Flush all persistent caches.\n",479],["T_WHITESPACE","    ",480],["T_COMMENT","\/\/ Any cache entry might implicitly depend on the uninstalled modules,\n",480],["T_WHITESPACE","    ",481],["T_COMMENT","\/\/ so clear all of them explicitly.\n",481],["T_WHITESPACE","    ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","moduleHandler",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","invokeAll",482],"(",["T_CONSTANT_ENCAPSED_STRING","'cache_flush'",482],")",";",["T_WHITESPACE","\n    ",482],["T_FOREACH","foreach",483],["T_WHITESPACE"," ",483],"(",["T_STRING","Cache",483],["T_DOUBLE_COLON","::",483],["T_STRING","getBins",483],"(",")",["T_WHITESPACE"," ",483],["T_AS","as",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$service_id",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$cache_backend",483],")",["T_WHITESPACE"," ",483],"{",["T_WHITESPACE","\n      ",483],["T_VARIABLE","$cache_backend",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","deleteAll",484],"(",")",";",["T_WHITESPACE","\n    ",484],"}",["T_WHITESPACE","\n\n    ",485],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_STRING","TRUE",487],";",["T_WHITESPACE","\n  ",487],"}",["T_WHITESPACE","\n\n  ",488],["T_DOC_COMMENT","\/**\n   * Helper method for removing all cache bins registered by a given module.\n   *\n   * @param string $module\n   *   The name of the module for which to remove all registered cache bins.\n   *\/",490],["T_WHITESPACE","\n  ",495],["T_PROTECTED","protected",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","removeCacheBins",496],"(",["T_VARIABLE","$module",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_COMMENT","\/\/ Remove any cache bins defined by a module.\n",497],["T_WHITESPACE","    ",498],["T_VARIABLE","$service_yaml_file",498],["T_WHITESPACE"," ",498],"=",["T_WHITESPACE"," ",498],["T_STRING","drupal_get_path",498],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",498],",",["T_WHITESPACE"," ",498],["T_VARIABLE","$module",498],")",["T_WHITESPACE"," ",498],".",["T_WHITESPACE"," ",498],"\"",["T_ENCAPSED_AND_WHITESPACE","\/",498],["T_VARIABLE","$module",498],["T_ENCAPSED_AND_WHITESPACE",".services.yml",498],"\"",";",["T_WHITESPACE","\n    ",498],["T_IF","if",499],["T_WHITESPACE"," ",499],"(",["T_STRING","file_exists",499],"(",["T_VARIABLE","$service_yaml_file",499],")",")",["T_WHITESPACE"," ",499],"{",["T_WHITESPACE","\n      ",499],["T_VARIABLE","$definitions",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_STRING","Yaml",500],["T_DOUBLE_COLON","::",500],["T_STRING","decode",500],"(",["T_STRING","file_get_contents",500],"(",["T_VARIABLE","$service_yaml_file",500],")",")",";",["T_WHITESPACE","\n      ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(",["T_ISSET","isset",501],"(",["T_VARIABLE","$definitions",501],"[",["T_CONSTANT_ENCAPSED_STRING","'services'",501],"]",")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n        ",501],["T_FOREACH","foreach",502],["T_WHITESPACE"," ",502],"(",["T_VARIABLE","$definitions",502],"[",["T_CONSTANT_ENCAPSED_STRING","'services'",502],"]",["T_WHITESPACE"," ",502],["T_AS","as",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$id",502],["T_WHITESPACE"," ",502],["T_DOUBLE_ARROW","=>",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$definition",502],")",["T_WHITESPACE"," ",502],"{",["T_WHITESPACE","\n          ",502],["T_IF","if",503],["T_WHITESPACE"," ",503],"(",["T_ISSET","isset",503],"(",["T_VARIABLE","$definition",503],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",503],"]",")",")",["T_WHITESPACE"," ",503],"{",["T_WHITESPACE","\n            ",503],["T_FOREACH","foreach",504],["T_WHITESPACE"," ",504],"(",["T_VARIABLE","$definition",504],"[",["T_CONSTANT_ENCAPSED_STRING","'tags'",504],"]",["T_WHITESPACE"," ",504],["T_AS","as",504],["T_WHITESPACE"," ",504],["T_VARIABLE","$tag",504],")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n              ",504],["T_COMMENT","\/\/ This works for the default cache registration and even in some\n",505],["T_WHITESPACE","              ",506],["T_COMMENT","\/\/ cases when a non-default \"super\" factory is used. That should\n",506],["T_WHITESPACE","              ",507],["T_COMMENT","\/\/ be extremely rare.\n",507],["T_WHITESPACE","              ",508],["T_IF","if",508],["T_WHITESPACE"," ",508],"(",["T_VARIABLE","$tag",508],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",508],"]",["T_WHITESPACE"," ",508],["T_IS_EQUAL","==",508],["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'cache.bin'",508],["T_WHITESPACE"," ",508],["T_BOOLEAN_AND","&&",508],["T_WHITESPACE"," ",508],["T_ISSET","isset",508],"(",["T_VARIABLE","$definition",508],"[",["T_CONSTANT_ENCAPSED_STRING","'factory_service'",508],"]",")",["T_WHITESPACE"," ",508],["T_BOOLEAN_AND","&&",508],["T_WHITESPACE"," ",508],["T_ISSET","isset",508],"(",["T_VARIABLE","$definition",508],"[",["T_CONSTANT_ENCAPSED_STRING","'factory_method'",508],"]",")",["T_WHITESPACE"," ",508],["T_BOOLEAN_AND","&&",508],["T_WHITESPACE"," ",508],"!",["T_EMPTY","empty",508],"(",["T_VARIABLE","$definition",508],"[",["T_CONSTANT_ENCAPSED_STRING","'arguments'",508],"]",")",")",["T_WHITESPACE"," ",508],"{",["T_WHITESPACE","\n                ",508],["T_TRY","try",509],["T_WHITESPACE"," ",509],"{",["T_WHITESPACE","\n                  ",509],["T_VARIABLE","$factory",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_NS_SEPARATOR","\\",510],["T_STRING","Drupal",510],["T_DOUBLE_COLON","::",510],["T_STRING","service",510],"(",["T_VARIABLE","$definition",510],"[",["T_CONSTANT_ENCAPSED_STRING","'factory_service'",510],"]",")",";",["T_WHITESPACE","\n                  ",510],["T_IF","if",511],["T_WHITESPACE"," ",511],"(",["T_STRING","method_exists",511],"(",["T_VARIABLE","$factory",511],",",["T_WHITESPACE"," ",511],["T_VARIABLE","$definition",511],"[",["T_CONSTANT_ENCAPSED_STRING","'factory_method'",511],"]",")",")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n                    ",511],["T_VARIABLE","$backend",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_STRING","call_user_func_array",512],"(",["T_ARRAY","array",512],"(",["T_VARIABLE","$factory",512],",",["T_WHITESPACE"," ",512],["T_VARIABLE","$definition",512],"[",["T_CONSTANT_ENCAPSED_STRING","'factory_method'",512],"]",")",",",["T_WHITESPACE"," ",512],["T_VARIABLE","$definition",512],"[",["T_CONSTANT_ENCAPSED_STRING","'arguments'",512],"]",")",";",["T_WHITESPACE","\n                    ",512],["T_IF","if",513],["T_WHITESPACE"," ",513],"(",["T_VARIABLE","$backend",513],["T_WHITESPACE"," ",513],["T_INSTANCEOF","instanceof",513],["T_WHITESPACE"," ",513],["T_STRING","CacheBackendInterface",513],")",["T_WHITESPACE"," ",513],"{",["T_WHITESPACE","\n                      ",513],["T_VARIABLE","$backend",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","removeBin",514],"(",")",";",["T_WHITESPACE","\n                    ",514],"}",["T_WHITESPACE","\n                  ",515],"}",["T_WHITESPACE","\n                ",516],"}",["T_WHITESPACE","\n                ",517],["T_CATCH","catch",518],["T_WHITESPACE"," ",518],"(",["T_NS_SEPARATOR","\\",518],["T_STRING","Exception",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$e",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n                  ",518],["T_STRING","watchdog_exception",519],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",519],",",["T_WHITESPACE"," ",519],["T_VARIABLE","$e",519],",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'Failed to remove cache bin defined by the service %id.'",519],",",["T_WHITESPACE"," ",519],["T_ARRAY","array",519],"(",["T_CONSTANT_ENCAPSED_STRING","'%id'",519],["T_WHITESPACE"," ",519],["T_DOUBLE_ARROW","=>",519],["T_WHITESPACE"," ",519],["T_VARIABLE","$id",519],")",")",";",["T_WHITESPACE","\n                ",519],"}",["T_WHITESPACE","\n              ",520],"}",["T_WHITESPACE","\n            ",521],"}",["T_WHITESPACE","\n          ",522],"}",["T_WHITESPACE","\n        ",523],"}",["T_WHITESPACE","\n      ",524],"}",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n  ",526],"}",["T_WHITESPACE","\n\n  ",527],["T_DOC_COMMENT","\/**\n   * Updates the kernel module list.\n   *\n   * @param string $module_filenames\n   *   The list of installed modules.\n   *\/",529],["T_WHITESPACE","\n  ",534],["T_PROTECTED","protected",535],["T_WHITESPACE"," ",535],["T_FUNCTION","function",535],["T_WHITESPACE"," ",535],["T_STRING","updateKernel",535],"(",["T_VARIABLE","$module_filenames",535],")",["T_WHITESPACE"," ",535],"{",["T_WHITESPACE","\n    ",535],["T_COMMENT","\/\/ This reboots the kernel to register the module's bundle and its services\n",536],["T_WHITESPACE","    ",537],["T_COMMENT","\/\/ in the service container. The $module_filenames argument is taken over as\n",537],["T_WHITESPACE","    ",538],["T_COMMENT","\/\/ %container.modules% parameter, which is passed to a fresh ModuleHandler\n",538],["T_WHITESPACE","    ",539],["T_COMMENT","\/\/ instance upon first retrieval.\n",539],["T_WHITESPACE","    ",540],["T_VARIABLE","$this",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","kernel",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","updateModules",540],"(",["T_VARIABLE","$module_filenames",540],",",["T_WHITESPACE"," ",540],["T_VARIABLE","$module_filenames",540],")",";",["T_WHITESPACE","\n    ",540],["T_COMMENT","\/\/ After rebuilding the container we need to update the injected\n",541],["T_WHITESPACE","    ",542],["T_COMMENT","\/\/ dependencies.\n",542],["T_WHITESPACE","    ",543],["T_VARIABLE","$container",543],["T_WHITESPACE"," ",543],"=",["T_WHITESPACE"," ",543],["T_VARIABLE","$this",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","kernel",543],["T_OBJECT_OPERATOR","->",543],["T_STRING","getContainer",543],"(",")",";",["T_WHITESPACE","\n    ",543],["T_VARIABLE","$this",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","moduleHandler",544],["T_WHITESPACE"," ",544],"=",["T_WHITESPACE"," ",544],["T_VARIABLE","$container",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","get",544],"(",["T_CONSTANT_ENCAPSED_STRING","'module_handler'",544],")",";",["T_WHITESPACE","\n  ",544],"}",["T_WHITESPACE","\n\n  ",545],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",547],["T_WHITESPACE","\n  ",549],["T_PUBLIC","public",550],["T_WHITESPACE"," ",550],["T_FUNCTION","function",550],["T_WHITESPACE"," ",550],["T_STRING","validateUninstall",550],"(",["T_ARRAY","array",550],["T_WHITESPACE"," ",550],["T_VARIABLE","$module_list",550],")",["T_WHITESPACE"," ",550],"{",["T_WHITESPACE","\n    ",550],["T_VARIABLE","$reasons",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_ARRAY","array",551],"(",")",";",["T_WHITESPACE","\n    ",551],["T_FOREACH","foreach",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$module_list",552],["T_WHITESPACE"," ",552],["T_AS","as",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$module",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n      ",552],["T_FOREACH","foreach",553],["T_WHITESPACE"," ",553],"(",["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","uninstallValidators",553],["T_WHITESPACE"," ",553],["T_AS","as",553],["T_WHITESPACE"," ",553],["T_VARIABLE","$validator",553],")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n        ",553],["T_VARIABLE","$validation_reasons",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$validator",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","validate",554],"(",["T_VARIABLE","$module",554],")",";",["T_WHITESPACE","\n        ",554],["T_IF","if",555],["T_WHITESPACE"," ",555],"(","!",["T_EMPTY","empty",555],"(",["T_VARIABLE","$validation_reasons",555],")",")",["T_WHITESPACE"," ",555],"{",["T_WHITESPACE","\n          ",555],["T_IF","if",556],["T_WHITESPACE"," ",556],"(","!",["T_ISSET","isset",556],"(",["T_VARIABLE","$reasons",556],"[",["T_VARIABLE","$module",556],"]",")",")",["T_WHITESPACE"," ",556],"{",["T_WHITESPACE","\n            ",556],["T_VARIABLE","$reasons",557],"[",["T_VARIABLE","$module",557],"]",["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_ARRAY","array",557],"(",")",";",["T_WHITESPACE","\n          ",557],"}",["T_WHITESPACE","\n          ",558],["T_VARIABLE","$reasons",559],"[",["T_VARIABLE","$module",559],"]",["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_STRING","array_merge",559],"(",["T_VARIABLE","$reasons",559],"[",["T_VARIABLE","$module",559],"]",",",["T_WHITESPACE"," ",559],["T_VARIABLE","$validation_reasons",559],")",";",["T_WHITESPACE","\n        ",559],"}",["T_WHITESPACE","\n      ",560],"}",["T_WHITESPACE","\n    ",561],"}",["T_WHITESPACE","\n    ",562],["T_RETURN","return",563],["T_WHITESPACE"," ",563],["T_VARIABLE","$reasons",563],";",["T_WHITESPACE","\n  ",563],"}",["T_WHITESPACE","\n\n",564],"}",["T_WHITESPACE","\n",566]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","KeyValueStore",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SerializationInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Connection",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Query",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Merge",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Defines a default key\/value store implementation for expiring items.\n *\n * This key\/value store implementation uses the database to store key\/value\n * data with an expire date.\n *\/",9],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","DatabaseStorageExpirable",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","DatabaseStorage",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","KeyValueStoreExpirableInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Overrides Drupal\\Core\\KeyValueStore\\StorageBase::__construct().\n   *\n   * @param string $collection\n   *   The name of the collection holding key and value pairs.\n   * @param \\Drupal\\Component\\Serialization\\SerializationInterface $serializer\n   *   The serialization class to use.\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The database connection to use.\n   * @param string $table\n   *   The name of the SQL table to use, defaults to key_value_expire.\n   *\/",17],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","__construct",29],"(",["T_VARIABLE","$collection",29],",",["T_WHITESPACE"," ",29],["T_STRING","SerializationInterface",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$serializer",29],",",["T_WHITESPACE"," ",29],["T_STRING","Connection",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$connection",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$table",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'key_value_expire'",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","__construct",30],"(",["T_VARIABLE","$collection",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$serializer",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$connection",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$table",30],")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","has",36],"(",["T_VARIABLE","$key",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_RETURN","return",37],["T_WHITESPACE"," ",37],["T_BOOL_CAST","(bool)",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","connection",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","query",37],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT 1 FROM {'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","connection",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","escapeTable",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","table",37],")",["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'} WHERE collection = :collection AND name = :key AND expire > :now'",37],",",["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","':collection'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","collection",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","':key'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$key",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","':now'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_STRING","REQUEST_TIME",40],",",["T_WHITESPACE","\n    ",40],")",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","fetchField",41],"(",")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",44],["T_WHITESPACE","\n  ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","getMultiple",47],"(",["T_ARRAY","array",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$keys",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$values",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","connection",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","query",48],"(",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'SELECT name, value FROM {'",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","connection",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","escapeTable",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","table",49],")",["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'} WHERE expire > :now AND name IN ( :keys[] ) AND collection = :collection'",49],",",["T_WHITESPACE","\n      ",49],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","':now'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_STRING","REQUEST_TIME",51],",",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","':keys[]'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$keys",52],",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","':collection'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","collection",53],",",["T_WHITESPACE","\n      ",53],")",")",["T_OBJECT_OPERATOR","->",54],["T_STRING","fetchAllKeyed",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_STRING","array_map",55],"(",["T_ARRAY","array",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","serializer",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'decode'",55],")",",",["T_WHITESPACE"," ",55],["T_VARIABLE","$values",55],")",";",["T_WHITESPACE","\n  ",55],"}",["T_WHITESPACE","\n\n  ",56],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",58],["T_WHITESPACE","\n  ",60],["T_PUBLIC","public",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","getAll",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$values",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","connection",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","query",62],"(",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'SELECT name, value FROM {'",63],["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","connection",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","escapeTable",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","table",63],")",["T_WHITESPACE"," ",63],".",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'} WHERE collection = :collection AND expire > :now'",63],",",["T_WHITESPACE","\n      ",63],["T_ARRAY","array",64],"(",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","':collection'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","collection",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","':now'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_STRING","REQUEST_TIME",66],["T_WHITESPACE","\n      ",66],")",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","fetchAllKeyed",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_STRING","array_map",68],"(",["T_ARRAY","array",68],"(",["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","serializer",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'decode'",68],")",",",["T_WHITESPACE"," ",68],["T_VARIABLE","$values",68],")",";",["T_WHITESPACE","\n  ",68],"}",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",71],["T_WHITESPACE","\n  ",73],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","setWithExpire",74],"(",["T_VARIABLE","$key",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$value",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$expire",74],")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","connection",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","merge",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","table",75],")",["T_WHITESPACE","\n      ",75],["T_OBJECT_OPERATOR","->",76],["T_STRING","keys",76],"(",["T_ARRAY","array",76],"(",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'name'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$key",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'collection'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","collection",78],",",["T_WHITESPACE","\n      ",78],")",")",["T_WHITESPACE","\n      ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","fields",80],"(",["T_ARRAY","array",80],"(",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'value'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","serializer",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","encode",81],"(",["T_VARIABLE","$value",81],")",",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'expire'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_STRING","REQUEST_TIME",82],["T_WHITESPACE"," ",82],"+",["T_WHITESPACE"," ",82],["T_VARIABLE","$expire",82],",",["T_WHITESPACE","\n      ",82],")",")",["T_WHITESPACE","\n      ",83],["T_OBJECT_OPERATOR","->",84],["T_STRING","execute",84],"(",")",";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",87],["T_WHITESPACE","\n  ",89],["T_FUNCTION","function",90],["T_WHITESPACE"," ",90],["T_STRING","setWithExpireIfNotExists",90],"(",["T_VARIABLE","$key",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$value",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$expire",90],")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$result",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","connection",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","merge",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","table",91],")",["T_WHITESPACE","\n      ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","insertFields",92],"(",["T_ARRAY","array",92],"(",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'collection'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","collection",93],",",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'name'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$key",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'value'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","serializer",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","encode",95],"(",["T_VARIABLE","$value",95],")",",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'expire'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_STRING","REQUEST_TIME",96],["T_WHITESPACE"," ",96],"+",["T_WHITESPACE"," ",96],["T_VARIABLE","$expire",96],",",["T_WHITESPACE","\n      ",96],")",")",["T_WHITESPACE","\n      ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","condition",98],"(",["T_CONSTANT_ENCAPSED_STRING","'collection'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","collection",98],")",["T_WHITESPACE","\n      ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","condition",99],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$key",99],")",["T_WHITESPACE","\n      ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","execute",100],"(",")",";",["T_WHITESPACE","\n    ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$result",101],["T_WHITESPACE"," ",101],["T_IS_EQUAL","==",101],["T_WHITESPACE"," ",101],["T_STRING","Merge",101],["T_DOUBLE_COLON","::",101],["T_STRING","STATUS_INSERT",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","setMultipleWithExpire",107],"(",["T_ARRAY","array",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$data",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$expire",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_FOREACH","foreach",108],["T_WHITESPACE"," ",108],"(",["T_VARIABLE","$data",108],["T_WHITESPACE"," ",108],["T_AS","as",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$key",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$value",108],")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","setWithExpire",109],"(",["T_VARIABLE","$key",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$value",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$expire",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n  ",110],"}",["T_WHITESPACE","\n\n  ",111],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",113],["T_WHITESPACE","\n  ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","deleteMultiple",116],"(",["T_ARRAY","array",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$keys",116],")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_STRING","parent",117],["T_DOUBLE_COLON","::",117],["T_STRING","deleteMultiple",117],"(",["T_VARIABLE","$keys",117],")",";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n",118],"}",["T_WHITESPACE","\n",120]]
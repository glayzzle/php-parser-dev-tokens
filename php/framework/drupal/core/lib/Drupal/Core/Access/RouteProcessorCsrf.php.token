[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Access",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Render",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BubbleableMetadata",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","RouteProcessor",6],["T_NS_SEPARATOR","\\",6],["T_STRING","OutboundRouteProcessorInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Routing",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Route",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Processes the outbound route to handle the CSRF token.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","RouteProcessorCsrf",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","OutboundRouteProcessorInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The CSRF token generator.\n   *\n   * @var \\Drupal\\Core\\Access\\CsrfTokenGenerator\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$csrfToken",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Constructs a RouteProcessorCsrf object.\n   *\n   * @param \\Drupal\\Core\\Access\\CsrfTokenGenerator $csrf_token\n   *   The CSRF token generator.\n   *\/",21],["T_WHITESPACE","\n  ",26],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","__construct",27],"(",["T_STRING","CsrfTokenGenerator",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$csrf_token",27],")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","csrfToken",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$csrf_token",28],";",["T_WHITESPACE","\n  ",28],"}",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","processOutbound",34],"(",["T_VARIABLE","$route_name",34],",",["T_WHITESPACE"," ",34],["T_STRING","Route",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$route",34],",",["T_WHITESPACE"," ",34],["T_ARRAY","array",34],["T_WHITESPACE"," ",34],"&",["T_VARIABLE","$parameters",34],",",["T_WHITESPACE"," ",34],["T_STRING","BubbleableMetadata",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$bubbleable_metadata",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","NULL",34],")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$route",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","hasRequirement",35],"(",["T_CONSTANT_ENCAPSED_STRING","'_csrf_token'",35],")",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_VARIABLE","$path",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","ltrim",36],"(",["T_VARIABLE","$route",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","getPath",36],"(",")",",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'\/'",36],")",";",["T_WHITESPACE","\n      ",36],["T_COMMENT","\/\/ Replace the path parameters with values from the parameters array.\n",37],["T_WHITESPACE","      ",38],["T_FOREACH","foreach",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$parameters",38],["T_WHITESPACE"," ",38],["T_AS","as",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$param",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$value",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$path",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","str_replace",39],"(","\"",["T_ENCAPSED_AND_WHITESPACE","{",39],["T_CURLY_OPEN","{",39],["T_VARIABLE","$param",39],"}",["T_ENCAPSED_AND_WHITESPACE","}",39],"\"",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$value",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$path",39],")",";",["T_WHITESPACE","\n      ",39],"}",["T_WHITESPACE","\n      ",40],["T_COMMENT","\/\/ Adding this to the parameters means it will get merged into the query\n",41],["T_WHITESPACE","      ",42],["T_COMMENT","\/\/ string when the route is compiled.\n",42],["T_WHITESPACE","      ",43],["T_IF","if",43],["T_WHITESPACE"," ",43],"(","!",["T_VARIABLE","$bubbleable_metadata",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n        ",43],["T_VARIABLE","$parameters",44],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",44],"]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","csrfToken",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","get",44],"(",["T_VARIABLE","$path",44],")",";",["T_WHITESPACE","\n      ",44],"}",["T_WHITESPACE","\n      ",45],["T_ELSE","else",46],["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n        ",46],["T_COMMENT","\/\/ Generate a placeholder and a render array to replace it.\n",47],["T_WHITESPACE","        ",48],["T_VARIABLE","$placeholder",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","hash",48],"(",["T_CONSTANT_ENCAPSED_STRING","'sha1'",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$path",48],")",";",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$placeholder_render_array",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n          ",49],["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'route_processor_csrf:renderPlaceholderCsrfToken'",50],",",["T_WHITESPACE"," ",50],"[",["T_VARIABLE","$path",50],"]","]",",",["T_WHITESPACE","\n        ",50],"]",";",["T_WHITESPACE","\n\n        ",51],["T_COMMENT","\/\/ Instead of setting an actual CSRF token as the query string, we set\n",53],["T_WHITESPACE","        ",54],["T_COMMENT","\/\/ the placeholder, which will be replaced at the very last moment. This\n",54],["T_WHITESPACE","        ",55],["T_COMMENT","\/\/ ensures links with CSRF tokens don't break cacheability.\n",55],["T_WHITESPACE","        ",56],["T_VARIABLE","$parameters",56],"[",["T_CONSTANT_ENCAPSED_STRING","'token'",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$placeholder",56],";",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$bubbleable_metadata",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","addAttachments",57],"(","[",["T_CONSTANT_ENCAPSED_STRING","'placeholders'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],"[",["T_VARIABLE","$placeholder",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$placeholder_render_array",57],"]","]",")",";",["T_WHITESPACE","\n      ",57],"}",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n  ",59],"}",["T_WHITESPACE","\n\n  ",60],["T_DOC_COMMENT","\/**\n   * #lazy_builder callback; gets a CSRF token for the given path.\n   *\n   * @param string $path\n   *   The path to get a CSRF token for.\n   *\n   * @return array\n   *   A renderable array representing the CSRF token.\n   *\/",62],["T_WHITESPACE","\n  ",70],["T_PUBLIC","public",71],["T_WHITESPACE"," ",71],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","renderPlaceholderCsrfToken",71],"(",["T_VARIABLE","$path",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_RETURN","return",72],["T_WHITESPACE"," ",72],"[",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'#markup'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","csrfToken",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_VARIABLE","$path",73],")",",",["T_WHITESPACE","\n      ",73],["T_COMMENT","\/\/ Tokens are per session.\n",74],["T_WHITESPACE","      ",75],["T_CONSTANT_ENCAPSED_STRING","'#cache'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],"[",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'contexts'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],"[",["T_WHITESPACE","\n          ",76],["T_CONSTANT_ENCAPSED_STRING","'session'",77],",",["T_WHITESPACE","\n        ",77],"]",",",["T_WHITESPACE","\n      ",78],"]",",",["T_WHITESPACE","\n    ",79],"]",";",["T_WHITESPACE","\n  ",80],"}",["T_WHITESPACE","\n\n",81],"}",["T_WHITESPACE","\n",83]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","File",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Site",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Settings",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","StreamWrapper",6],["T_NS_SEPARATOR","\\",6],["T_STRING","StreamWrapperManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Psr",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Log",7],["T_NS_SEPARATOR","\\",7],["T_STRING","LoggerInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Provides helpers to operate on files and stream wrappers.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","FileSystem",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","FileSystemInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Default mode for new directories. See self::chmod().\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_CONST","const",17],["T_WHITESPACE"," ",17],["T_STRING","CHMOD_DIRECTORY",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","0775",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Default mode for new files. See self::chmod().\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","CHMOD_FILE",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_LNUMBER","0664",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The site settings.\n   *\n   * @var \\Drupal\\Core\\Site\\Settings\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$settings",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * The file logger channel.\n   *\n   * @var \\Psr\\Log\\LoggerInterface\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$logger",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The stream wrapper manager.\n   *\n   * @var \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$streamWrapperManager",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Constructs a new FileSystem.\n   *\n   * @param \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface $stream_wrapper_manager\n   *   The stream wrapper manager.\n   * @param \\Drupal\\Core\\Site\\Settings $settings\n   *   The site settings.\n   * @param \\Psr\\Log\\LoggerInterface $logger\n   *   The file logger channel.\n   *\/",45],["T_WHITESPACE","\n  ",54],["T_PUBLIC","public",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","__construct",55],"(",["T_STRING","StreamWrapperManagerInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$stream_wrapper_manager",55],",",["T_WHITESPACE"," ",55],["T_STRING","Settings",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$settings",55],",",["T_WHITESPACE"," ",55],["T_STRING","LoggerInterface",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$logger",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","streamWrapperManager",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$stream_wrapper_manager",56],";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","settings",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$settings",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","logger",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$logger",58],";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",61],["T_WHITESPACE","\n  ",63],["T_PUBLIC","public",64],["T_WHITESPACE"," ",64],["T_FUNCTION","function",64],["T_WHITESPACE"," ",64],["T_STRING","moveUploadedFile",64],"(",["T_VARIABLE","$filename",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$uri",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$result",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"@",["T_STRING","move_uploaded_file",65],"(",["T_VARIABLE","$filename",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$uri",65],")",";",["T_WHITESPACE","\n    ",65],["T_COMMENT","\/\/ PHP's move_uploaded_file() does not properly support streams if\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ open_basedir is enabled so if the move failed, try finding a real path\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ and retry the move operation.\n",68],["T_WHITESPACE","    ",69],["T_IF","if",69],["T_WHITESPACE"," ",69],"(","!",["T_VARIABLE","$result",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$realpath",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","realpath",70],"(",["T_VARIABLE","$uri",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n        ",70],["T_VARIABLE","$result",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","move_uploaded_file",71],"(",["T_VARIABLE","$filename",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$realpath",71],")",";",["T_WHITESPACE","\n      ",71],"}",["T_WHITESPACE","\n      ",72],["T_ELSE","else",73],["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n        ",73],["T_VARIABLE","$result",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","move_uploaded_file",74],"(",["T_VARIABLE","$filename",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$uri",74],")",";",["T_WHITESPACE","\n      ",74],"}",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_RETURN","return",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$result",78],";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",81],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","chmod",84],"(",["T_VARIABLE","$uri",84],",",["T_WHITESPACE"," ",84],["T_VARIABLE","$mode",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_STRING","NULL",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(","!",["T_ISSET","isset",85],"(",["T_VARIABLE","$mode",85],")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n      ",85],["T_IF","if",86],["T_WHITESPACE"," ",86],"(",["T_STRING","is_dir",86],"(",["T_VARIABLE","$uri",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n        ",86],["T_VARIABLE","$mode",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","settings",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","get",87],"(",["T_CONSTANT_ENCAPSED_STRING","'file_chmod_directory'",87],",",["T_WHITESPACE"," ",87],["T_STATIC","static",87],["T_DOUBLE_COLON","::",87],["T_STRING","CHMOD_DIRECTORY",87],")",";",["T_WHITESPACE","\n      ",87],"}",["T_WHITESPACE","\n      ",88],["T_ELSE","else",89],["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_VARIABLE","$mode",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","settings",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get",90],"(",["T_CONSTANT_ENCAPSED_STRING","'file_chmod_file'",90],",",["T_WHITESPACE"," ",90],["T_STATIC","static",90],["T_DOUBLE_COLON","::",90],["T_STRING","CHMOD_FILE",90],")",";",["T_WHITESPACE","\n      ",90],"}",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n\n    ",92],["T_IF","if",94],["T_WHITESPACE"," ",94],"(","@",["T_STRING","chmod",94],"(",["T_VARIABLE","$uri",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$mode",94],")",")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_RETURN","return",95],["T_WHITESPACE"," ",95],["T_STRING","TRUE",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","logger",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","error",98],"(",["T_CONSTANT_ENCAPSED_STRING","'The file permissions could not be set on %uri.'",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'%uri'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$uri",98],")",")",";",["T_WHITESPACE","\n    ",98],["T_RETURN","return",99],["T_WHITESPACE"," ",99],["T_STRING","FALSE",99],";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n  ",100],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",102],["T_WHITESPACE","\n  ",104],["T_PUBLIC","public",105],["T_WHITESPACE"," ",105],["T_FUNCTION","function",105],["T_WHITESPACE"," ",105],["T_STRING","unlink",105],"(",["T_VARIABLE","$uri",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$context",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_STRING","NULL",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$scheme",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","uriScheme",106],"(",["T_VARIABLE","$uri",106],")",";",["T_WHITESPACE","\n    ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(","!",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","validScheme",107],"(",["T_VARIABLE","$scheme",107],")",["T_WHITESPACE"," ",107],["T_BOOLEAN_AND","&&",107],["T_WHITESPACE"," ",107],"(",["T_STRING","substr",107],"(",["T_STRING","PHP_OS",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","0",107],",",["T_WHITESPACE"," ",107],["T_LNUMBER","3",107],")",["T_WHITESPACE"," ",107],["T_IS_EQUAL","==",107],["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'WIN'",107],")",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n      ",107],["T_STRING","chmod",108],"(",["T_VARIABLE","$uri",108],",",["T_WHITESPACE"," ",108],["T_LNUMBER","0600",108],")",";",["T_WHITESPACE","\n    ",108],"}",["T_WHITESPACE","\n    ",109],["T_IF","if",110],["T_WHITESPACE"," ",110],"(",["T_VARIABLE","$context",110],")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n      ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_STRING","unlink",111],"(",["T_VARIABLE","$uri",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$context",111],")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n    ",112],["T_ELSE","else",113],["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_RETURN","return",114],["T_WHITESPACE"," ",114],["T_STRING","unlink",114],"(",["T_VARIABLE","$uri",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",118],["T_WHITESPACE","\n  ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","realpath",121],"(",["T_VARIABLE","$uri",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_COMMENT","\/\/ If this URI is a stream, pass it off to the appropriate stream wrapper.\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ Otherwise, attempt PHP's realpath. This allows use of this method even\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ for unmanaged files outside of the stream wrapper interface.\n",124],["T_WHITESPACE","    ",125],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$wrapper",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","streamWrapperManager",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getViaUri",125],"(",["T_VARIABLE","$uri",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_RETURN","return",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$wrapper",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","realpath",126],"(",")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_RETURN","return",129],["T_WHITESPACE"," ",129],["T_STRING","realpath",129],"(",["T_VARIABLE","$uri",129],")",";",["T_WHITESPACE","\n  ",129],"}",["T_WHITESPACE","\n\n  ",130],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",132],["T_WHITESPACE","\n  ",134],["T_PUBLIC","public",135],["T_WHITESPACE"," ",135],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","dirname",135],"(",["T_VARIABLE","$uri",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$scheme",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","uriScheme",136],"(",["T_VARIABLE","$uri",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","validScheme",138],"(",["T_VARIABLE","$scheme",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n      ",138],["T_RETURN","return",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","streamWrapperManager",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getViaScheme",139],"(",["T_VARIABLE","$scheme",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","dirname",139],"(",["T_VARIABLE","$uri",139],")",";",["T_WHITESPACE","\n    ",139],"}",["T_WHITESPACE","\n    ",140],["T_ELSE","else",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n      ",141],["T_RETURN","return",142],["T_WHITESPACE"," ",142],["T_STRING","dirname",142],"(",["T_VARIABLE","$uri",142],")",";",["T_WHITESPACE","\n    ",142],"}",["T_WHITESPACE","\n  ",143],"}",["T_WHITESPACE","\n\n  ",144],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",146],["T_WHITESPACE","\n  ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","basename",149],"(",["T_VARIABLE","$uri",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$suffix",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","NULL",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$separators",150],["T_WHITESPACE"," ",150],"=",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'\/'",150],";",["T_WHITESPACE","\n    ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_STRING","DIRECTORY_SEPARATOR",151],["T_WHITESPACE"," ",151],["T_IS_NOT_EQUAL","!=",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'\/'",151],")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n      ",151],["T_COMMENT","\/\/ For Windows OS add special separator.\n",152],["T_WHITESPACE","      ",153],["T_VARIABLE","$separators",153],["T_WHITESPACE"," ",153],["T_CONCAT_EQUAL",".=",153],["T_WHITESPACE"," ",153],["T_STRING","DIRECTORY_SEPARATOR",153],";",["T_WHITESPACE","\n    ",153],"}",["T_WHITESPACE","\n    ",154],["T_COMMENT","\/\/ Remove right-most slashes when $uri points to directory.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$uri",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","rtrim",156],"(",["T_VARIABLE","$uri",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$separators",156],")",";",["T_WHITESPACE","\n    ",156],["T_COMMENT","\/\/ Returns the trailing part of the $uri starting after one of the directory\n",157],["T_WHITESPACE","    ",158],["T_COMMENT","\/\/ separators.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$filename",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_STRING","preg_match",159],"(",["T_CONSTANT_ENCAPSED_STRING","'@[^'",159],["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_STRING","preg_quote",159],"(",["T_VARIABLE","$separators",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'@'",159],")",["T_WHITESPACE"," ",159],".",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","']+$@'",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$uri",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$matches",159],")",["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_VARIABLE","$matches",159],"[",["T_LNUMBER","0",159],"]",["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","''",159],";",["T_WHITESPACE","\n    ",159],["T_COMMENT","\/\/ Cuts off a suffix from the filename.\n",160],["T_WHITESPACE","    ",161],["T_IF","if",161],["T_WHITESPACE"," ",161],"(",["T_VARIABLE","$suffix",161],")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n      ",161],["T_VARIABLE","$filename",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_STRING","preg_replace",162],"(",["T_CONSTANT_ENCAPSED_STRING","'@'",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_STRING","preg_quote",162],"(",["T_VARIABLE","$suffix",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'@'",162],")",["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'$@'",162],",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","''",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$filename",162],")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n    ",163],["T_RETURN","return",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$filename",164],";",["T_WHITESPACE","\n  ",164],"}",["T_WHITESPACE","\n\n  ",165],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",167],["T_WHITESPACE","\n  ",169],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","mkdir",170],"(",["T_VARIABLE","$uri",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$mode",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","NULL",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$recursive",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","FALSE",170],",",["T_WHITESPACE"," ",170],["T_VARIABLE","$context",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","NULL",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n    ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(","!",["T_ISSET","isset",171],"(",["T_VARIABLE","$mode",171],")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$mode",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","settings",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","get",172],"(",["T_CONSTANT_ENCAPSED_STRING","'file_chmod_directory'",172],",",["T_WHITESPACE"," ",172],["T_STATIC","static",172],["T_DOUBLE_COLON","::",172],["T_STRING","CHMOD_DIRECTORY",172],")",";",["T_WHITESPACE","\n    ",172],"}",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ If the URI has a scheme, don't override the umask - schemes can handle\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/ this issue in their own implementation.\n",176],["T_WHITESPACE","    ",177],["T_IF","if",177],["T_WHITESPACE"," ",177],"(",["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","uriScheme",177],"(",["T_VARIABLE","$uri",177],")",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n      ",177],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","mkdirCall",178],"(",["T_VARIABLE","$uri",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$mode",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$recursive",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$context",178],")",";",["T_WHITESPACE","\n    ",178],"}",["T_WHITESPACE","\n\n    ",179],["T_COMMENT","\/\/ If recursive, create each missing component of the parent directory\n",181],["T_WHITESPACE","    ",182],["T_COMMENT","\/\/ individually and set the mode explicitly to override the umask.\n",182],["T_WHITESPACE","    ",183],["T_IF","if",183],["T_WHITESPACE"," ",183],"(",["T_VARIABLE","$recursive",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_COMMENT","\/\/ Ensure the path is using DIRECTORY_SEPARATOR, and trim off any trailing\n",184],["T_WHITESPACE","      ",185],["T_COMMENT","\/\/ slashes because they can throw off the loop when creating the parent\n",185],["T_WHITESPACE","      ",186],["T_COMMENT","\/\/ directories.\n",186],["T_WHITESPACE","      ",187],["T_VARIABLE","$uri",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","rtrim",187],"(",["T_STRING","str_replace",187],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",187],",",["T_WHITESPACE"," ",187],["T_STRING","DIRECTORY_SEPARATOR",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$uri",187],")",",",["T_WHITESPACE"," ",187],["T_STRING","DIRECTORY_SEPARATOR",187],")",";",["T_WHITESPACE","\n      ",187],["T_COMMENT","\/\/ Determine the components of the path.\n",188],["T_WHITESPACE","      ",189],["T_VARIABLE","$components",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_STRING","explode",189],"(",["T_STRING","DIRECTORY_SEPARATOR",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$uri",189],")",";",["T_WHITESPACE","\n      ",189],["T_COMMENT","\/\/ If the filepath is absolute the first component will be empty as there\n",190],["T_WHITESPACE","      ",191],["T_COMMENT","\/\/ will be nothing before the first slash.\n",191],["T_WHITESPACE","      ",192],["T_IF","if",192],["T_WHITESPACE"," ",192],"(",["T_VARIABLE","$components",192],"[",["T_LNUMBER","0",192],"]",["T_WHITESPACE"," ",192],["T_IS_EQUAL","==",192],["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","''",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n        ",192],["T_VARIABLE","$recursive_path",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_STRING","DIRECTORY_SEPARATOR",193],";",["T_WHITESPACE","\n        ",193],["T_COMMENT","\/\/ Get rid of the empty first component.\n",194],["T_WHITESPACE","        ",195],["T_STRING","array_shift",195],"(",["T_VARIABLE","$components",195],")",";",["T_WHITESPACE","\n      ",195],"}",["T_WHITESPACE","\n      ",196],["T_ELSE","else",197],["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n        ",197],["T_VARIABLE","$recursive_path",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","''",198],";",["T_WHITESPACE","\n      ",198],"}",["T_WHITESPACE","\n      ",199],["T_COMMENT","\/\/ Don't handle the top-level directory in this loop.\n",200],["T_WHITESPACE","      ",201],["T_STRING","array_pop",201],"(",["T_VARIABLE","$components",201],")",";",["T_WHITESPACE","\n      ",201],["T_COMMENT","\/\/ Create each component if necessary.\n",202],["T_WHITESPACE","      ",203],["T_FOREACH","foreach",203],["T_WHITESPACE"," ",203],"(",["T_VARIABLE","$components",203],["T_WHITESPACE"," ",203],["T_AS","as",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$component",203],")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n        ",203],["T_VARIABLE","$recursive_path",204],["T_WHITESPACE"," ",204],["T_CONCAT_EQUAL",".=",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$component",204],";",["T_WHITESPACE","\n\n        ",204],["T_IF","if",206],["T_WHITESPACE"," ",206],"(","!",["T_STRING","file_exists",206],"(",["T_VARIABLE","$recursive_path",206],")",")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n          ",206],["T_IF","if",207],["T_WHITESPACE"," ",207],"(","!",["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","mkdirCall",207],"(",["T_VARIABLE","$recursive_path",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$mode",207],",",["T_WHITESPACE"," ",207],["T_STRING","FALSE",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$context",207],")",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n            ",207],["T_RETURN","return",208],["T_WHITESPACE"," ",208],["T_STRING","FALSE",208],";",["T_WHITESPACE","\n          ",208],"}",["T_WHITESPACE","\n          ",209],["T_COMMENT","\/\/ Not necessary to use self::chmod() as there is no scheme.\n",210],["T_WHITESPACE","          ",211],["T_IF","if",211],["T_WHITESPACE"," ",211],"(","!",["T_STRING","chmod",211],"(",["T_VARIABLE","$recursive_path",211],",",["T_WHITESPACE"," ",211],["T_VARIABLE","$mode",211],")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n            ",211],["T_RETURN","return",212],["T_WHITESPACE"," ",212],["T_STRING","FALSE",212],";",["T_WHITESPACE","\n          ",212],"}",["T_WHITESPACE","\n        ",213],"}",["T_WHITESPACE","\n\n        ",214],["T_VARIABLE","$recursive_path",216],["T_WHITESPACE"," ",216],["T_CONCAT_EQUAL",".=",216],["T_WHITESPACE"," ",216],["T_STRING","DIRECTORY_SEPARATOR",216],";",["T_WHITESPACE","\n      ",216],"}",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n\n    ",218],["T_COMMENT","\/\/ Do not check if the top-level directory already exists, as this condition\n",220],["T_WHITESPACE","    ",221],["T_COMMENT","\/\/ must cause this function to fail.\n",221],["T_WHITESPACE","    ",222],["T_IF","if",222],["T_WHITESPACE"," ",222],"(","!",["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","mkdirCall",222],"(",["T_VARIABLE","$uri",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$mode",222],",",["T_WHITESPACE"," ",222],["T_STRING","FALSE",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$context",222],")",")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n      ",222],["T_RETURN","return",223],["T_WHITESPACE"," ",223],["T_STRING","FALSE",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n    ",224],["T_COMMENT","\/\/ Not necessary to use self::chmod() as there is no scheme.\n",225],["T_WHITESPACE","    ",226],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_STRING","chmod",226],"(",["T_VARIABLE","$uri",226],",",["T_WHITESPACE"," ",226],["T_VARIABLE","$mode",226],")",";",["T_WHITESPACE","\n  ",226],"}",["T_WHITESPACE","\n\n  ",227],["T_DOC_COMMENT","\/**\n   * Helper function. Ensures we don't pass a NULL as a context resource to\n   * mkdir().\n   *\n   * @see self::mkdir()\n   *\/",229],["T_WHITESPACE","\n  ",234],["T_PROTECTED","protected",235],["T_WHITESPACE"," ",235],["T_FUNCTION","function",235],["T_WHITESPACE"," ",235],["T_STRING","mkdirCall",235],"(",["T_VARIABLE","$uri",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$mode",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$recursive",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$context",235],")",["T_WHITESPACE"," ",235],"{",["T_WHITESPACE","\n    ",235],["T_IF","if",236],["T_WHITESPACE"," ",236],"(",["T_STRING","is_null",236],"(",["T_VARIABLE","$context",236],")",")",["T_WHITESPACE"," ",236],"{",["T_WHITESPACE","\n      ",236],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_STRING","mkdir",237],"(",["T_VARIABLE","$uri",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$mode",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$recursive",237],")",";",["T_WHITESPACE","\n    ",237],"}",["T_WHITESPACE","\n    ",238],["T_ELSE","else",239],["T_WHITESPACE"," ",239],"{",["T_WHITESPACE","\n      ",239],["T_RETURN","return",240],["T_WHITESPACE"," ",240],["T_STRING","mkdir",240],"(",["T_VARIABLE","$uri",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$mode",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$recursive",240],",",["T_WHITESPACE"," ",240],["T_VARIABLE","$context",240],")",";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n  ",241],"}",["T_WHITESPACE","\n\n  ",242],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",244],["T_WHITESPACE","\n  ",246],["T_PUBLIC","public",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","rmdir",247],"(",["T_VARIABLE","$uri",247],",",["T_WHITESPACE"," ",247],["T_VARIABLE","$context",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","NULL",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$scheme",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","uriScheme",248],"(",["T_VARIABLE","$uri",248],")",";",["T_WHITESPACE","\n    ",248],["T_IF","if",249],["T_WHITESPACE"," ",249],"(","!",["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","validScheme",249],"(",["T_VARIABLE","$scheme",249],")",["T_WHITESPACE"," ",249],["T_BOOLEAN_AND","&&",249],["T_WHITESPACE"," ",249],"(",["T_STRING","substr",249],"(",["T_STRING","PHP_OS",249],",",["T_WHITESPACE"," ",249],["T_LNUMBER","0",249],",",["T_WHITESPACE"," ",249],["T_LNUMBER","3",249],")",["T_WHITESPACE"," ",249],["T_IS_EQUAL","==",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'WIN'",249],")",")",["T_WHITESPACE"," ",249],"{",["T_WHITESPACE","\n      ",249],["T_STRING","chmod",250],"(",["T_VARIABLE","$uri",250],",",["T_WHITESPACE"," ",250],["T_LNUMBER","0700",250],")",";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n    ",251],["T_IF","if",252],["T_WHITESPACE"," ",252],"(",["T_VARIABLE","$context",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n      ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_STRING","rmdir",253],"(",["T_VARIABLE","$uri",253],",",["T_WHITESPACE"," ",253],["T_VARIABLE","$context",253],")",";",["T_WHITESPACE","\n    ",253],"}",["T_WHITESPACE","\n    ",254],["T_ELSE","else",255],["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n      ",255],["T_RETURN","return",256],["T_WHITESPACE"," ",256],["T_STRING","rmdir",256],"(",["T_VARIABLE","$uri",256],")",";",["T_WHITESPACE","\n    ",256],"}",["T_WHITESPACE","\n  ",257],"}",["T_WHITESPACE","\n\n  ",258],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",260],["T_WHITESPACE","\n  ",262],["T_PUBLIC","public",263],["T_WHITESPACE"," ",263],["T_FUNCTION","function",263],["T_WHITESPACE"," ",263],["T_STRING","tempnam",263],"(",["T_VARIABLE","$directory",263],",",["T_WHITESPACE"," ",263],["T_VARIABLE","$prefix",263],")",["T_WHITESPACE"," ",263],"{",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$scheme",264],["T_WHITESPACE"," ",264],"=",["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","uriScheme",264],"(",["T_VARIABLE","$directory",264],")",";",["T_WHITESPACE","\n\n    ",264],["T_IF","if",266],["T_WHITESPACE"," ",266],"(",["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","validScheme",266],"(",["T_VARIABLE","$scheme",266],")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n      ",266],["T_VARIABLE","$wrapper",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","streamWrapperManager",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","getViaScheme",267],"(",["T_VARIABLE","$scheme",267],")",";",["T_WHITESPACE","\n\n      ",267],["T_IF","if",269],["T_WHITESPACE"," ",269],"(",["T_VARIABLE","$filename",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","tempnam",269],"(",["T_VARIABLE","$wrapper",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","getDirectoryPath",269],"(",")",",",["T_WHITESPACE"," ",269],["T_VARIABLE","$prefix",269],")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n        ",269],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$scheme",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_STATIC","static",270],["T_DOUBLE_COLON","::",270],["T_STRING","basename",270],"(",["T_VARIABLE","$filename",270],")",";",["T_WHITESPACE","\n      ",270],"}",["T_WHITESPACE","\n      ",271],["T_ELSE","else",272],["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n        ",272],["T_RETURN","return",273],["T_WHITESPACE"," ",273],["T_STRING","FALSE",273],";",["T_WHITESPACE","\n      ",273],"}",["T_WHITESPACE","\n    ",274],"}",["T_WHITESPACE","\n    ",275],["T_ELSE","else",276],["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n      ",276],["T_COMMENT","\/\/ Handle as a normal tempnam() call.\n",277],["T_WHITESPACE","      ",278],["T_RETURN","return",278],["T_WHITESPACE"," ",278],["T_STRING","tempnam",278],"(",["T_VARIABLE","$directory",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$prefix",278],")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n  ",279],"}",["T_WHITESPACE","\n\n  ",280],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",282],["T_WHITESPACE","\n  ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","uriScheme",285],"(",["T_VARIABLE","$uri",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n    ",285],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_STRING","preg_match",286],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([\\w\\-]+):\\\/\\\/|^(data):\/'",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$uri",286],",",["T_WHITESPACE"," ",286],["T_VARIABLE","$matches",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n      ",286],["T_COMMENT","\/\/ The scheme will always be the last element in the matches array.\n",287],["T_WHITESPACE","      ",288],["T_RETURN","return",288],["T_WHITESPACE"," ",288],["T_STRING","array_pop",288],"(",["T_VARIABLE","$matches",288],")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n\n    ",289],["T_RETURN","return",291],["T_WHITESPACE"," ",291],["T_STRING","FALSE",291],";",["T_WHITESPACE","\n  ",291],"}",["T_WHITESPACE","\n\n  ",292],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",294],["T_WHITESPACE","\n  ",296],["T_PUBLIC","public",297],["T_WHITESPACE"," ",297],["T_FUNCTION","function",297],["T_WHITESPACE"," ",297],["T_STRING","validScheme",297],"(",["T_VARIABLE","$scheme",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n    ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(","!",["T_VARIABLE","$scheme",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n      ",298],["T_RETURN","return",299],["T_WHITESPACE"," ",299],["T_STRING","FALSE",299],";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n    ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_STRING","class_exists",301],"(",["T_VARIABLE","$this",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","streamWrapperManager",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","getClass",301],"(",["T_VARIABLE","$scheme",301],")",")",";",["T_WHITESPACE","\n  ",301],"}",["T_WHITESPACE","\n\n",302],"}",["T_WHITESPACE","\n",304]]
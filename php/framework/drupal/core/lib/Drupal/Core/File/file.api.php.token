[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Hooks related to the File management system.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * @addtogroup hooks\n * @{\n *\/",8],["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Control access to private file downloads and specify HTTP headers.\n *\n * This hook allows modules to enforce permissions on file downloads whenever\n * Drupal is handling file download, as opposed to the web server bypassing\n * Drupal and returning the file from a public directory. Modules can also\n * provide headers to specify information like the file's name or MIME type.\n *\n * @param $uri\n *   The URI of the file.\n * @return\n *   If the user does not have permission to access the file, return -1. If the\n *   user has permission, return an array with the appropriate headers. If the\n *   file is not controlled by the current module, the return value should be\n *   NULL.\n *\n * @see \\Drupal\\system\\FileDownloadController::download()\n *\/",13],["T_WHITESPACE","\n",30],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","hook_file_download",31],"(",["T_VARIABLE","$uri",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n  ",31],["T_COMMENT","\/\/ Check to see if this is a config download.\n",32],["T_WHITESPACE","  ",33],["T_VARIABLE","$scheme",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","file_uri_scheme",33],"(",["T_VARIABLE","$uri",33],")",";",["T_WHITESPACE","\n  ",33],["T_VARIABLE","$target",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","file_uri_target",34],"(",["T_VARIABLE","$uri",34],")",";",["T_WHITESPACE","\n  ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$scheme",35],["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'temporary'",35],["T_WHITESPACE"," ",35],["T_BOOLEAN_AND","&&",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$target",35],["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'config.tar.gz'",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_RETURN","return",36],["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'Content-disposition'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'attachment; filename=\"config.tar.gz\"'",37],",",["T_WHITESPACE","\n    ",37],")",";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n",39],"}",["T_WHITESPACE","\n\n",40],["T_DOC_COMMENT","\/**\n * Alter the URL to a file.\n *\n * This hook is called from file_create_url(), and  is called fairly\n * frequently (10+ times per page), depending on how many files there are in a\n * given page.\n * If CSS and JS aggregation are disabled, this can become very frequently\n * (50+ times per page) so performance is critical.\n *\n * This function should alter the URI, if it wants to rewrite the file URL.\n *\n * @param $uri\n *   The URI to a file for which we need an external URL, or the path to a\n *   shipped file.\n *\/",42],["T_WHITESPACE","\n",56],["T_FUNCTION","function",57],["T_WHITESPACE"," ",57],["T_STRING","hook_file_url_alter",57],"(","&",["T_VARIABLE","$uri",57],")",["T_WHITESPACE"," ",57],"{",["T_WHITESPACE","\n  ",57],["T_VARIABLE","$user",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_NS_SEPARATOR","\\",58],["T_STRING","Drupal",58],["T_DOUBLE_COLON","::",58],["T_STRING","currentUser",58],"(",")",";",["T_WHITESPACE","\n\n  ",58],["T_COMMENT","\/\/ User 1 will always see the local file in this example.\n",60],["T_WHITESPACE","  ",61],["T_IF","if",61],["T_WHITESPACE"," ",61],"(",["T_VARIABLE","$user",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",["T_WHITESPACE"," ",61],["T_IS_EQUAL","==",61],["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_RETURN","return",62],";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_VARIABLE","$cdn1",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/cdn1.example.com'",65],";",["T_WHITESPACE","\n  ",65],["T_VARIABLE","$cdn2",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/cdn2.example.com'",66],";",["T_WHITESPACE","\n  ",66],["T_VARIABLE","$cdn_extensions",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'css'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'js'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'gif'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'jpg'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'jpeg'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'png'",67],")",";",["T_WHITESPACE","\n\n  ",67],["T_COMMENT","\/\/ Most CDNs don't support private file transfers without a lot of hassle,\n",69],["T_WHITESPACE","  ",70],["T_COMMENT","\/\/ so don't support this in the common case.\n",70],["T_WHITESPACE","  ",71],["T_VARIABLE","$schemes",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",71],")",";",["T_WHITESPACE","\n\n  ",71],["T_VARIABLE","$scheme",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","file_uri_scheme",73],"(",["T_VARIABLE","$uri",73],")",";",["T_WHITESPACE","\n\n  ",73],["T_COMMENT","\/\/ Only serve shipped files and public created files from the CDN.\n",75],["T_WHITESPACE","  ",76],["T_IF","if",76],["T_WHITESPACE"," ",76],"(","!",["T_VARIABLE","$scheme",76],["T_WHITESPACE"," ",76],["T_BOOLEAN_OR","||",76],["T_WHITESPACE"," ",76],["T_STRING","in_array",76],"(",["T_VARIABLE","$scheme",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$schemes",76],")",")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_COMMENT","\/\/ Shipped files.\n",77],["T_WHITESPACE","    ",78],["T_IF","if",78],["T_WHITESPACE"," ",78],"(","!",["T_VARIABLE","$scheme",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$path",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$uri",79],";",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Public created files.\n",81],["T_WHITESPACE","    ",82],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$wrapper",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_NS_SEPARATOR","\\",83],["T_STRING","Drupal",83],["T_DOUBLE_COLON","::",83],["T_STRING","service",83],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getViaScheme",83],"(",["T_VARIABLE","$scheme",83],")",";",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$path",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$wrapper",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","getDirectoryPath",84],"(",")",["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\/'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_STRING","file_uri_target",84],"(",["T_VARIABLE","$uri",84],")",";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Clean up Windows paths.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$path",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_STRING","str_replace",88],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'\/'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$path",88],")",";",["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/\/ Serve files with one of the CDN extensions from CDN 1, all others from\n",90],["T_WHITESPACE","    ",91],["T_COMMENT","\/\/ CDN 2.\n",91],["T_WHITESPACE","    ",92],["T_VARIABLE","$pathinfo",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_STRING","pathinfo",92],"(",["T_VARIABLE","$path",92],")",";",["T_WHITESPACE","\n    ",92],["T_IF","if",93],["T_WHITESPACE"," ",93],"(",["T_ISSET","isset",93],"(",["T_VARIABLE","$pathinfo",93],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",93],"]",")",["T_WHITESPACE"," ",93],["T_BOOLEAN_AND","&&",93],["T_WHITESPACE"," ",93],["T_STRING","in_array",93],"(",["T_VARIABLE","$pathinfo",93],"[",["T_CONSTANT_ENCAPSED_STRING","'extension'",93],"]",",",["T_WHITESPACE"," ",93],["T_VARIABLE","$cdn_extensions",93],")",")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$uri",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$cdn1",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\/'",94],["T_WHITESPACE"," ",94],".",["T_WHITESPACE"," ",94],["T_VARIABLE","$path",94],";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n    ",95],["T_ELSE","else",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$uri",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$cdn2",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'\/'",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_VARIABLE","$path",97],";",["T_WHITESPACE","\n    ",97],"}",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n",99],"}",["T_WHITESPACE","\n\n",100],["T_DOC_COMMENT","\/**\n * Alter MIME type mappings used to determine MIME type from a file extension.\n *\n * Invoked by \\Drupal\\Core\\File\\MimeType\\ExtensionMimeTypeGuesser::guess(). It\n * is used to allow modules to add to or modify the default mapping from\n * \\Drupal\\Core\\File\\MimeType\\ExtensionMimeTypeGuesser::$defaultMapping.\n *\n * @param $mapping\n *   An array of mimetypes correlated to the extensions that relate to them.\n *   The array has 'mimetypes' and 'extensions' elements, each of which is an\n *   array.\n *\n * @see \\Drupal\\Core\\File\\MimeType\\ExtensionMimeTypeGuesser::guess()\n * @see \\Drupal\\Core\\File\\MimeType\\ExtensionMimeTypeGuesser::$defaultMapping\n *\/",102],["T_WHITESPACE","\n",116],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","hook_file_mimetype_mapping_alter",117],"(","&",["T_VARIABLE","$mapping",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n  ",117],["T_COMMENT","\/\/ Add new MIME type 'drupal\/info'.\n",118],["T_WHITESPACE","  ",119],["T_VARIABLE","$mapping",119],"[",["T_CONSTANT_ENCAPSED_STRING","'mimetypes'",119],"]","[",["T_CONSTANT_ENCAPSED_STRING","'example_info'",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'drupal\/info'",119],";",["T_WHITESPACE","\n  ",119],["T_COMMENT","\/\/ Add new extension '.info.yml' and map it to the 'drupal\/info' MIME type.\n",120],["T_WHITESPACE","  ",121],["T_VARIABLE","$mapping",121],"[",["T_CONSTANT_ENCAPSED_STRING","'extensions'",121],"]","[",["T_CONSTANT_ENCAPSED_STRING","'info'",121],"]",["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'example_info'",121],";",["T_WHITESPACE","\n  ",121],["T_COMMENT","\/\/ Override existing extension mapping for '.ogg' files.\n",122],["T_WHITESPACE","  ",123],["T_VARIABLE","$mapping",123],"[",["T_CONSTANT_ENCAPSED_STRING","'extensions'",123],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ogg'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_LNUMBER","189",123],";",["T_WHITESPACE","\n",123],"}",["T_WHITESPACE","\n\n",124],["T_DOC_COMMENT","\/**\n * Alter archiver information declared by other modules.\n *\n * See hook_archiver_info() for a description of archivers and the archiver\n * information structure.\n *\n * @param $info\n *   Archiver information to alter (return values from hook_archiver_info()).\n *\/",126],["T_WHITESPACE","\n",134],["T_FUNCTION","function",135],["T_WHITESPACE"," ",135],["T_STRING","hook_archiver_info_alter",135],"(","&",["T_VARIABLE","$info",135],")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n  ",135],["T_VARIABLE","$info",136],"[",["T_CONSTANT_ENCAPSED_STRING","'tar'",136],"]","[",["T_CONSTANT_ENCAPSED_STRING","'extensions'",136],"]","[","]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'tgz'",136],";",["T_WHITESPACE","\n",136],"}",["T_WHITESPACE","\n\n",137],["T_DOC_COMMENT","\/**\n * Register information about FileTransfer classes provided by a module.\n *\n * The FileTransfer class allows transferring files over a specific type of\n * connection. Core provides classes for FTP and SSH. Contributed modules are\n * free to extend the FileTransfer base class to add other connection types,\n * and if these classes are registered via hook_filetransfer_info(), those\n * connection types will be available to site administrators using the Update\n * manager when they are redirected to the authorize.php script to authorize\n * the file operations.\n *\n * @return array\n *   Nested array of information about FileTransfer classes. Each key is a\n *   FileTransfer type (not human readable, used for form elements and\n *   variable names, etc), and the values are subarrays that define properties\n *   of that type. The keys in each subarray are:\n *   - 'title': Required. The human-readable name of the connection type.\n *   - 'class': Required. The name of the FileTransfer class. The constructor\n *     will always be passed the full path to the root of the site that should\n *     be used to restrict where file transfer operations can occur (the $jail)\n *     and an array of settings values returned by the settings form.\n *   - 'weight': Optional. Integer weight used for sorting connection types on\n *     the authorize.php form.\n *\n * @see \\Drupal\\Core\\FileTransfer\\FileTransfer\n * @see authorize.php\n * @see hook_filetransfer_info_alter()\n * @see drupal_get_filetransfer_info()\n *\/",139],["T_WHITESPACE","\n",167],["T_FUNCTION","function",168],["T_WHITESPACE"," ",168],["T_STRING","hook_filetransfer_info",168],"(",")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n  ",168],["T_VARIABLE","$info",169],"[",["T_CONSTANT_ENCAPSED_STRING","'sftp'",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_ARRAY","array",169],"(",["T_WHITESPACE","\n    ",169],["T_CONSTANT_ENCAPSED_STRING","'title'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","t",170],"(",["T_CONSTANT_ENCAPSED_STRING","'SFTP (Secure FTP)'",170],")",",",["T_WHITESPACE","\n    ",170],["T_CONSTANT_ENCAPSED_STRING","'class'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\FileTransfer\\SFTP'",171],",",["T_WHITESPACE","\n    ",171],["T_CONSTANT_ENCAPSED_STRING","'weight'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_LNUMBER","10",172],",",["T_WHITESPACE","\n  ",172],")",";",["T_WHITESPACE","\n  ",173],["T_RETURN","return",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$info",174],";",["T_WHITESPACE","\n",174],"}",["T_WHITESPACE","\n\n",175],["T_DOC_COMMENT","\/**\n * Alter the FileTransfer class registry.\n *\n * @param array $filetransfer_info\n *   Reference to a nested array containing information about the FileTransfer\n *   class registry.\n *\n * @see hook_filetransfer_info()\n *\/",177],["T_WHITESPACE","\n",185],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","hook_filetransfer_info_alter",186],"(","&",["T_VARIABLE","$filetransfer_info",186],")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n  ",186],["T_COMMENT","\/\/ Remove the FTP option entirely.\n",187],["T_WHITESPACE","  ",188],["T_UNSET","unset",188],"(",["T_VARIABLE","$filetransfer_info",188],"[",["T_CONSTANT_ENCAPSED_STRING","'ftp'",188],"]",")",";",["T_WHITESPACE","\n  ",188],["T_COMMENT","\/\/ Make sure the SSH option is listed first.\n",189],["T_WHITESPACE","  ",190],["T_VARIABLE","$filetransfer_info",190],"[",["T_CONSTANT_ENCAPSED_STRING","'ssh'",190],"]","[",["T_CONSTANT_ENCAPSED_STRING","'weight'",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],"-",["T_LNUMBER","10",190],";",["T_WHITESPACE","\n",190],"}",["T_WHITESPACE","\n\n",191],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup hooks\".\n *\/",193],["T_WHITESPACE","\n",195]]
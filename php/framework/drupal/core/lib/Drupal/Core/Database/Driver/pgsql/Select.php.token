[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","pgsql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Query",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Select",5],["T_WHITESPACE"," ",5],["T_AS","as",5],["T_WHITESPACE"," ",5],["T_STRING","QuerySelect",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * @addtogroup database\n * @{\n *\/",7],["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * PostgreSQL implementation of \\Drupal\\Core\\Database\\Query\\Select.\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","Select",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","QuerySelect",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","orderRandom",17],"(",")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_VARIABLE","$alias",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","addExpression",18],"(",["T_CONSTANT_ENCAPSED_STRING","'RANDOM()'",18],",",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'random_field'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","orderBy",19],"(",["T_VARIABLE","$alias",19],")",";",["T_WHITESPACE","\n    ",19],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],";",["T_WHITESPACE","\n  ",20],"}",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Overrides SelectQuery::orderBy().\n   *\n   * PostgreSQL adheres strictly to the SQL-92 standard and requires that when\n   * using DISTINCT or GROUP BY conditions, fields and expressions that are\n   * ordered on also need to be selected. This is a best effort implementation\n   * to handle the cases that can be automated by adding the field if it is not\n   * yet selected.\n   *\n   * @code\n   *   $query = db_select('example', 'e');\n   *   $query->join('example_revision', 'er', 'e.vid = er.vid');\n   *   $query\n   *     ->distinct()\n   *     ->fields('e')\n   *     ->orderBy('timestamp');\n   * @endcode\n   *\n   * In this query, it is not possible (without relying on the schema) to know\n   * whether timestamp belongs to example_revision and needs to be added or\n   * belongs to node and is already selected. Queries like this will need to be\n   * corrected in the original query by adding an explicit call to\n   * SelectQuery::addField() or SelectQuery::fields().\n   *\n   * Since this has a small performance impact, both by the additional\n   * processing in this function and in the database that needs to return the\n   * additional fields, this is done as an override instead of implementing it\n   * directly in SelectQuery::orderBy().\n   *\/",23],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","orderBy",52],"(",["T_VARIABLE","$field",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$direction",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'ASC'",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_COMMENT","\/\/ Only allow ASC and DESC, default to ASC.\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ Emulate MySQL default behavior to sort NULL values first for ascending,\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ and last for descending.\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ @see http:\/\/www.postgresql.org\/docs\/9.3\/static\/queries-order.html\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$direction",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","strtoupper",57],"(",["T_VARIABLE","$direction",57],")",["T_WHITESPACE"," ",57],["T_IS_EQUAL","==",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'DESC'",57],["T_WHITESPACE"," ",57],"?",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'DESC NULLS LAST'",57],["T_WHITESPACE"," ",57],":",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'ASC NULLS FIRST'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","order",58],"[",["T_VARIABLE","$field",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$direction",58],";",["T_WHITESPACE","\n\n    ",58],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","hasTag",60],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_query'",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_RETURN","return",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ If there is a table alias specified, split it up.\n",64],["T_WHITESPACE","    ",65],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_STRING","strpos",65],"(",["T_VARIABLE","$field",65],",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'.'",65],")",["T_WHITESPACE"," ",65],["T_IS_NOT_IDENTICAL","!==",65],["T_WHITESPACE"," ",65],["T_STRING","FALSE",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n      ",65],["T_LIST","list",66],"(",["T_VARIABLE","$table",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$table_field",66],")",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","explode",66],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$field",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_COMMENT","\/\/ Figure out if the field has already been added.\n",68],["T_WHITESPACE","    ",69],["T_FOREACH","foreach",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","fields",69],["T_WHITESPACE"," ",69],["T_AS","as",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$existing_field",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_IF","if",70],["T_WHITESPACE"," ",70],"(","!",["T_EMPTY","empty",70],"(",["T_VARIABLE","$table",70],")",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n        ",70],["T_COMMENT","\/\/ If table alias is given, check if field and table exists.\n",71],["T_WHITESPACE","        ",72],["T_IF","if",72],["T_WHITESPACE"," ",72],"(",["T_VARIABLE","$existing_field",72],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",72],"]",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$table",72],["T_WHITESPACE"," ",72],["T_BOOLEAN_AND","&&",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$existing_field",72],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",72],"]",["T_WHITESPACE"," ",72],["T_IS_EQUAL","==",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$table_field",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n          ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],";",["T_WHITESPACE","\n        ",73],"}",["T_WHITESPACE","\n      ",74],"}",["T_WHITESPACE","\n      ",75],["T_ELSE","else",76],["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n        ",76],["T_COMMENT","\/\/ If there is no table, simply check if the field exists as a field or\n",77],["T_WHITESPACE","        ",78],["T_COMMENT","\/\/ an aliased field.\n",78],["T_WHITESPACE","        ",79],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$existing_field",79],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",79],"]",["T_WHITESPACE"," ",79],["T_IS_EQUAL","==",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$field",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n          ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],";",["T_WHITESPACE","\n        ",80],"}",["T_WHITESPACE","\n      ",81],"}",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Also check expression aliases.\n",85],["T_WHITESPACE","    ",86],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","expressions",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$expression",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_IF","if",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$expression",87],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",87],"]",["T_WHITESPACE"," ",87],["T_IS_EQUAL","==",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","connection",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","escapeAlias",87],"(",["T_VARIABLE","$field",87],")",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n        ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],";",["T_WHITESPACE","\n      ",88],"}",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ If a table loads all fields, it can not be added again. It would\n",92],["T_WHITESPACE","    ",93],["T_COMMENT","\/\/ result in an ambiguous alias error because that field would be loaded\n",93],["T_WHITESPACE","    ",94],["T_COMMENT","\/\/ twice: Once through table_alias.* and once directly. If the field\n",94],["T_WHITESPACE","    ",95],["T_COMMENT","\/\/ actually belongs to a different table, it must be added manually.\n",95],["T_WHITESPACE","    ",96],["T_FOREACH","foreach",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","tables",96],["T_WHITESPACE"," ",96],["T_AS","as",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$table",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n      ",96],["T_IF","if",97],["T_WHITESPACE"," ",97],"(","!",["T_EMPTY","empty",97],"(",["T_VARIABLE","$table",97],"[",["T_CONSTANT_ENCAPSED_STRING","'all_fields'",97],"]",")",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_RETURN","return",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],";",["T_WHITESPACE","\n      ",98],"}",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ If $field contains an characters which are not allowed in a field name\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ it is considered an expression, these can't be handled automatically\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ either.\n",104],["T_WHITESPACE","    ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(",["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","connection",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","escapeField",105],"(",["T_VARIABLE","$field",105],")",["T_WHITESPACE"," ",105],["T_IS_NOT_EQUAL","!=",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$field",105],")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ This is a case that can be handled automatically, add the field.\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","addField",110],"(",["T_STRING","NULL",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$field",110],")",";",["T_WHITESPACE","\n    ",110],["T_RETURN","return",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",114],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","addExpression",117],"(",["T_VARIABLE","$expression",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$alias",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","NULL",117],",",["T_WHITESPACE"," ",117],["T_VARIABLE","$arguments",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",")",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_IF","if",118],["T_WHITESPACE"," ",118],"(",["T_EMPTY","empty",118],"(",["T_VARIABLE","$alias",118],")",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$alias",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'expression'",119],";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n\n    ",120],["T_COMMENT","\/\/ This implements counting in the same manner as the parent method.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$alias_candidate",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$alias",123],";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$count",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_LNUMBER","2",124],";",["T_WHITESPACE","\n    ",124],["T_WHILE","while",125],["T_WHITESPACE"," ",125],"(","!",["T_EMPTY","empty",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","expressions",125],"[",["T_VARIABLE","$alias_candidate",125],"]",")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$alias_candidate",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$alias",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'_'",126],["T_WHITESPACE"," ",126],".",["T_WHITESPACE"," ",126],["T_VARIABLE","$count",126],["T_INC","++",126],";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$alias",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_VARIABLE","$alias_candidate",128],";",["T_WHITESPACE","\n\n    ",128],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","expressions",130],"[",["T_VARIABLE","$alias",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'expression'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$expression",131],",",["T_WHITESPACE","\n      ",131],["T_CONSTANT_ENCAPSED_STRING","'alias'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","connection",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","escapeAlias",132],"(",["T_VARIABLE","$alias_candidate",132],")",",",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'arguments'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$arguments",133],",",["T_WHITESPACE","\n    ",133],")",";",["T_WHITESPACE","\n\n    ",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$alias",136],";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",139],["T_WHITESPACE","\n  ",141],["T_PUBLIC","public",142],["T_WHITESPACE"," ",142],["T_FUNCTION","function",142],["T_WHITESPACE"," ",142],["T_STRING","execute",142],"(",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","connection",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","addSavepoint",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_TRY","try",144],["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$result",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","parent",145],["T_DOUBLE_COLON","::",145],["T_STRING","execute",145],"(",")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_CATCH","catch",147],["T_WHITESPACE"," ",147],"(",["T_NS_SEPARATOR","\\",147],["T_STRING","Exception",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$e",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n      ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","connection",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","rollbackSavepoint",148],"(",")",";",["T_WHITESPACE","\n      ",148],["T_THROW","throw",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$e",149],";",["T_WHITESPACE","\n    ",149],"}",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","connection",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","releaseSavepoint",151],"(",")",";",["T_WHITESPACE","\n\n    ",151],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$result",153],";",["T_WHITESPACE","\n  ",153],"}",["T_WHITESPACE","\n\n",154],"}",["T_WHITESPACE","\n\n",156],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup database\".\n *\/",158],["T_WHITESPACE","\n",160]]
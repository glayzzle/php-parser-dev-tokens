[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","pgsql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Query",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Update",6],["T_WHITESPACE"," ",6],["T_AS","as",6],["T_WHITESPACE"," ",6],["T_STRING","QueryUpdate",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Query",7],["T_NS_SEPARATOR","\\",7],["T_STRING","SelectInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * PostgreSQL implementation of \\Drupal\\Core\\Database\\Query\\Update.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Update",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","QueryUpdate",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_PUBLIC","public",14],["T_WHITESPACE"," ",14],["T_FUNCTION","function",14],["T_WHITESPACE"," ",14],["T_STRING","execute",14],"(",")",["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n    ",14],["T_VARIABLE","$max_placeholder",15],["T_WHITESPACE"," ",15],"=",["T_WHITESPACE"," ",15],["T_LNUMBER","0",15],";",["T_WHITESPACE","\n    ",15],["T_VARIABLE","$blobs",16],["T_WHITESPACE"," ",16],"=",["T_WHITESPACE"," ",16],["T_ARRAY","array",16],"(",")",";",["T_WHITESPACE","\n    ",16],["T_VARIABLE","$blob_count",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_LNUMBER","0",17],";",["T_WHITESPACE","\n\n    ",17],["T_COMMENT","\/\/ Because we filter $fields the same way here and in __toString(), the\n",19],["T_WHITESPACE","    ",20],["T_COMMENT","\/\/ placeholders will all match up properly.\n",20],["T_WHITESPACE","    ",21],["T_VARIABLE","$stmt",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","connection",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","prepareQuery",21],"(",["T_STRING_CAST","(string)",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],")",";",["T_WHITESPACE","\n\n    ",21],["T_COMMENT","\/\/ Fetch the list of blobs and sequences used on that table.\n",23],["T_WHITESPACE","    ",24],["T_VARIABLE","$table_information",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","connection",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","schema",24],"(",")",["T_OBJECT_OPERATOR","->",24],["T_STRING","queryTableInformation",24],"(",["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","table",24],")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Expressions take priority over literal fields, so we process those first\n",26],["T_WHITESPACE","    ",27],["T_COMMENT","\/\/ and remove any literal fields that conflict.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$fields",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","fields",28],";",["T_WHITESPACE","\n    ",28],["T_FOREACH","foreach",29],["T_WHITESPACE"," ",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","expressionFields",29],["T_WHITESPACE"," ",29],["T_AS","as",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$field",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$data",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n      ",29],["T_IF","if",30],["T_WHITESPACE"," ",30],"(","!",["T_EMPTY","empty",30],"(",["T_VARIABLE","$data",30],"[",["T_CONSTANT_ENCAPSED_STRING","'arguments'",30],"]",")",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n        ",30],["T_FOREACH","foreach",31],["T_WHITESPACE"," ",31],"(",["T_VARIABLE","$data",31],"[",["T_CONSTANT_ENCAPSED_STRING","'arguments'",31],"]",["T_WHITESPACE"," ",31],["T_AS","as",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$placeholder",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$argument",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n          ",31],["T_COMMENT","\/\/ We assume that an expression will never happen on a BLOB field,\n",32],["T_WHITESPACE","          ",33],["T_COMMENT","\/\/ which is a fairly safe assumption to make since in most cases\n",33],["T_WHITESPACE","          ",34],["T_COMMENT","\/\/ it would be an invalid query anyway.\n",34],["T_WHITESPACE","          ",35],["T_VARIABLE","$stmt",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","bindParam",35],"(",["T_VARIABLE","$placeholder",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$data",35],"[",["T_CONSTANT_ENCAPSED_STRING","'arguments'",35],"]","[",["T_VARIABLE","$placeholder",35],"]",")",";",["T_WHITESPACE","\n        ",35],"}",["T_WHITESPACE","\n      ",36],"}",["T_WHITESPACE","\n      ",37],["T_IF","if",38],["T_WHITESPACE"," ",38],"(",["T_VARIABLE","$data",38],"[",["T_CONSTANT_ENCAPSED_STRING","'expression'",38],"]",["T_WHITESPACE"," ",38],["T_INSTANCEOF","instanceof",38],["T_WHITESPACE"," ",38],["T_STRING","SelectInterface",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$data",39],"[",["T_CONSTANT_ENCAPSED_STRING","'expression'",39],"]",["T_OBJECT_OPERATOR","->",39],["T_STRING","compile",39],"(",["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","connection",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],")",";",["T_WHITESPACE","\n        ",39],["T_VARIABLE","$select_query_arguments",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$data",40],"[",["T_CONSTANT_ENCAPSED_STRING","'expression'",40],"]",["T_OBJECT_OPERATOR","->",40],["T_STRING","arguments",40],"(",")",";",["T_WHITESPACE","\n        ",40],["T_FOREACH","foreach",41],["T_WHITESPACE"," ",41],"(",["T_VARIABLE","$select_query_arguments",41],["T_WHITESPACE"," ",41],["T_AS","as",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$placeholder",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$argument",41],")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n          ",41],["T_VARIABLE","$stmt",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","bindParam",42],"(",["T_VARIABLE","$placeholder",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$select_query_arguments",42],"[",["T_VARIABLE","$placeholder",42],"]",")",";",["T_WHITESPACE","\n        ",42],"}",["T_WHITESPACE","\n      ",43],"}",["T_WHITESPACE","\n      ",44],["T_UNSET","unset",45],"(",["T_VARIABLE","$fields",45],"[",["T_VARIABLE","$field",45],"]",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n\n    ",46],["T_FOREACH","foreach",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$fields",48],["T_WHITESPACE"," ",48],["T_AS","as",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$field",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$value",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$placeholder",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","':db_update_placeholder_'",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$max_placeholder",49],["T_INC","++",49],")",";",["T_WHITESPACE","\n\n      ",49],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_ISSET","isset",51],"(",["T_VARIABLE","$table_information",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","blob_fields",51],"[",["T_VARIABLE","$field",51],"]",")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$blobs",52],"[",["T_VARIABLE","$blob_count",52],"]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","fopen",52],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/memory'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'a'",52],")",";",["T_WHITESPACE","\n        ",52],["T_STRING","fwrite",53],"(",["T_VARIABLE","$blobs",53],"[",["T_VARIABLE","$blob_count",53],"]",",",["T_WHITESPACE"," ",53],["T_VARIABLE","$value",53],")",";",["T_WHITESPACE","\n        ",53],["T_STRING","rewind",54],"(",["T_VARIABLE","$blobs",54],"[",["T_VARIABLE","$blob_count",54],"]",")",";",["T_WHITESPACE","\n        ",54],["T_VARIABLE","$stmt",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","bindParam",55],"(",["T_VARIABLE","$placeholder",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$blobs",55],"[",["T_VARIABLE","$blob_count",55],"]",",",["T_WHITESPACE"," ",55],["T_NS_SEPARATOR","\\",55],["T_STRING","PDO",55],["T_DOUBLE_COLON","::",55],["T_STRING","PARAM_LOB",55],")",";",["T_WHITESPACE","\n        ",55],["T_INC","++",56],["T_VARIABLE","$blob_count",56],";",["T_WHITESPACE","\n      ",56],"}",["T_WHITESPACE","\n      ",57],["T_ELSE","else",58],["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$stmt",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","bindParam",59],"(",["T_VARIABLE","$placeholder",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$fields",59],"[",["T_VARIABLE","$field",59],"]",")",";",["T_WHITESPACE","\n      ",59],"}",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n\n    ",61],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_STRING","count",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","condition",63],")",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","condition",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","compile",64],"(",["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","connection",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],")",";",["T_WHITESPACE","\n\n      ",64],["T_VARIABLE","$arguments",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","condition",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","arguments",66],"(",")",";",["T_WHITESPACE","\n      ",66],["T_FOREACH","foreach",67],["T_WHITESPACE"," ",67],"(",["T_VARIABLE","$arguments",67],["T_WHITESPACE"," ",67],["T_AS","as",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$placeholder",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$value",67],")",["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n        ",67],["T_VARIABLE","$stmt",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","bindParam",68],"(",["T_VARIABLE","$placeholder",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$arguments",68],"[",["T_VARIABLE","$placeholder",68],"]",")",";",["T_WHITESPACE","\n      ",68],"}",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$options",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","queryOptions",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$options",73],"[",["T_CONSTANT_ENCAPSED_STRING","'already_prepared'",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","TRUE",73],";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$options",74],"[",["T_CONSTANT_ENCAPSED_STRING","'return'",74],"]",["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Database",74],["T_DOUBLE_COLON","::",74],["T_STRING","RETURN_AFFECTED",74],";",["T_WHITESPACE","\n\n    ",74],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","connection",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","addSavepoint",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_TRY","try",77],["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$result",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","connection",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","query",78],"(",["T_VARIABLE","$stmt",78],",",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$options",78],")",";",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","connection",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","releaseSavepoint",79],"(",")",";",["T_WHITESPACE","\n      ",79],["T_RETURN","return",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$result",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n    ",81],["T_CATCH","catch",82],["T_WHITESPACE"," ",82],"(",["T_NS_SEPARATOR","\\",82],["T_STRING","Exception",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$e",82],")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","connection",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","rollbackSavepoint",83],"(",")",";",["T_WHITESPACE","\n      ",83],["T_THROW","throw",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$e",84],";",["T_WHITESPACE","\n    ",84],"}",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n",86],"}",["T_WHITESPACE","\n",88]]
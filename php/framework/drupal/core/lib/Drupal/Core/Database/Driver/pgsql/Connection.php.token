[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","pgsql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Connection",6],["T_WHITESPACE"," ",6],["T_AS","as",6],["T_WHITESPACE"," ",6],["T_STRING","DatabaseConnection",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DatabaseNotFoundException",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * @addtogroup database\n * @{\n *\/",9],["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * PostgreSQL implementation of \\Drupal\\Core\\Database\\Connection.\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","Connection",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","DatabaseConnection",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The name by which to obtain a lock for retrieve the next insert id.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_CONST","const",22],["T_WHITESPACE"," ",22],["T_STRING","POSTGRESQL_NEXTID_LOCK",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_LNUMBER","1000",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Error code for \"Unknown database\" error.\n   *\/",24],["T_WHITESPACE","\n  ",26],["T_CONST","const",27],["T_WHITESPACE"," ",27],["T_STRING","DATABASE_NOT_FOUND",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_LNUMBER","7",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The list of PostgreSQL reserved key words.\n   *\n   * @see http:\/\/www.postgresql.org\/docs\/9.4\/static\/sql-keywords-appendix.html\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$postgresqlReservedKeyWords",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[",["T_CONSTANT_ENCAPSED_STRING","'all'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'analyse'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'analyze'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'and'",34],",",["T_WHITESPACE","\n  ",34],["T_CONSTANT_ENCAPSED_STRING","'any'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'array'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'as'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'asc'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'asymmetric'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'authorization'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'binary'",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'both'",35],",",["T_WHITESPACE","\n  ",35],["T_CONSTANT_ENCAPSED_STRING","'case'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'cast'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'check'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'collate'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'collation'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'column'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'concurrently'",36],",",["T_WHITESPACE","\n  ",36],["T_CONSTANT_ENCAPSED_STRING","'constraint'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'create'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'cross'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'current_catalog'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'current_date'",37],",",["T_WHITESPACE","\n  ",37],["T_CONSTANT_ENCAPSED_STRING","'current_role'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'current_schema'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'current_time'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'current_timestamp'",38],",",["T_WHITESPACE","\n  ",38],["T_CONSTANT_ENCAPSED_STRING","'current_user'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'default'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'deferrable'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'desc'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'distinct'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'do'",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'else'",39],",",["T_WHITESPACE","\n  ",39],["T_CONSTANT_ENCAPSED_STRING","'end'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'except'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'false'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'fetch'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'for'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'foreign'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'freeze'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'from'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'full'",40],",",["T_WHITESPACE","\n  ",40],["T_CONSTANT_ENCAPSED_STRING","'grant'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'group'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'having'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'ilike'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'in'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'initially'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'inner'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'intersect'",41],",",["T_WHITESPACE","\n  ",41],["T_CONSTANT_ENCAPSED_STRING","'into'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'is'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'isnull'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'join'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'lateral'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'leading'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'left'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'like'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'limit'",42],",",["T_WHITESPACE","\n  ",42],["T_CONSTANT_ENCAPSED_STRING","'localtime'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'localtimestamp'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'natural'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'not'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'notnull'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'null'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'offset'",43],",",["T_WHITESPACE","\n  ",43],["T_CONSTANT_ENCAPSED_STRING","'on'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'only'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'or'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'order'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'outer'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'over'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'overlaps'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'placing'",44],",",["T_WHITESPACE","\n  ",44],["T_CONSTANT_ENCAPSED_STRING","'primary'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'references'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'returning'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'right'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'select'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'session_user'",45],",",["T_WHITESPACE","\n  ",45],["T_CONSTANT_ENCAPSED_STRING","'similar'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'some'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'symmetric'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'table'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'then'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'to'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'trailing'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'true'",46],",",["T_WHITESPACE","\n  ",46],["T_CONSTANT_ENCAPSED_STRING","'union'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'unique'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'user'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'using'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'variadic'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'verbose'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'when'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'where'",47],",",["T_WHITESPACE","\n  ",47],["T_CONSTANT_ENCAPSED_STRING","'window'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'with'",48],"]",";",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Constructs a connection object.\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","__construct",53],"(",["T_NS_SEPARATOR","\\",53],["T_STRING","PDO",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$connection",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$connection_options",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_STRING","parent",54],["T_DOUBLE_COLON","::",54],["T_STRING","__construct",54],"(",["T_VARIABLE","$connection",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$connection_options",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ This driver defaults to transaction support, except if explicitly passed FALSE.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","transactionSupport",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],"!",["T_ISSET","isset",57],"(",["T_VARIABLE","$connection_options",57],"[",["T_CONSTANT_ENCAPSED_STRING","'transactions'",57],"]",")",["T_WHITESPACE"," ",57],["T_BOOLEAN_OR","||",57],["T_WHITESPACE"," ",57],"(",["T_VARIABLE","$connection_options",57],"[",["T_CONSTANT_ENCAPSED_STRING","'transactions'",57],"]",["T_WHITESPACE"," ",57],["T_IS_NOT_IDENTICAL","!==",57],["T_WHITESPACE"," ",57],["T_STRING","FALSE",57],")",";",["T_WHITESPACE","\n\n    ",57],["T_COMMENT","\/\/ Transactional DDL is always available in PostgreSQL,\n",59],["T_WHITESPACE","    ",60],["T_COMMENT","\/\/ but we'll only enable it if standard transactions are.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","transactionalDDLSupport",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","transactionSupport",61],";",["T_WHITESPACE","\n\n    ",61],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","connectionOptions",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$connection_options",63],";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Force PostgreSQL to use the UTF-8 character set by default.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","connection",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","exec",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"SET NAMES 'UTF8'\"",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Execute PostgreSQL init_commands.\n",68],["T_WHITESPACE","    ",69],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_ISSET","isset",69],"(",["T_VARIABLE","$connection_options",69],"[",["T_CONSTANT_ENCAPSED_STRING","'init_commands'",69],"]",")",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","connection",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","exec",70],"(",["T_STRING","implode",70],"(",["T_CONSTANT_ENCAPSED_STRING","'; '",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$connection_options",70],"[",["T_CONSTANT_ENCAPSED_STRING","'init_commands'",70],"]",")",")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_STATIC","static",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","open",77],"(",["T_ARRAY","array",77],["T_WHITESPACE"," ",77],"&",["T_VARIABLE","$connection_options",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_COMMENT","\/\/ Default to TCP connection on port 5432.\n",78],["T_WHITESPACE","    ",79],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_EMPTY","empty",79],"(",["T_VARIABLE","$connection_options",79],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",79],"]",")",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$connection_options",80],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",80],"]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_LNUMBER","5432",80],";",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ PostgreSQL in trust mode doesn't require a password to be supplied.\n",83],["T_WHITESPACE","    ",84],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_EMPTY","empty",84],"(",["T_VARIABLE","$connection_options",84],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",84],"]",")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_VARIABLE","$connection_options",85],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","NULL",85],";",["T_WHITESPACE","\n    ",85],"}",["T_WHITESPACE","\n    ",86],["T_COMMENT","\/\/ If the password contains a backslash it is treated as an escape character\n",87],["T_WHITESPACE","    ",88],["T_COMMENT","\/\/ http:\/\/bugs.php.net\/bug.php?id=53217\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ so backslashes in the password need to be doubled up.\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ The bug was reported against pdo_pgsql 1.0.2, backslashes in passwords\n",90],["T_WHITESPACE","    ",91],["T_COMMENT","\/\/ will break on this doubling up when the bug is fixed, so check the version\n",91],["T_WHITESPACE","    ",92],["T_COMMENT","\/\/elseif (phpversion('pdo_pgsql') < 'version_this_was_fixed_in') {\n",92],["T_WHITESPACE","    ",93],["T_ELSE","else",93],["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$connection_options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","str_replace",94],"(",["T_CONSTANT_ENCAPSED_STRING","'\\\\'",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'\\\\\\\\'",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$connection_options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",94],"]",")",";",["T_WHITESPACE","\n    ",94],"}",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$connection_options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",97],"]",["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],"(","!",["T_EMPTY","empty",97],"(",["T_VARIABLE","$connection_options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",97],"]",")",["T_WHITESPACE"," ",97],"?",["T_WHITESPACE"," ",97],["T_VARIABLE","$connection_options",97],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",97],"]",["T_WHITESPACE"," ",97],":",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'template1'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$dsn",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'pgsql:host='",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_VARIABLE","$connection_options",98],"[",["T_CONSTANT_ENCAPSED_STRING","'host'",98],"]",["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","' dbname='",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_VARIABLE","$connection_options",98],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",98],"]",["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","' port='",98],["T_WHITESPACE"," ",98],".",["T_WHITESPACE"," ",98],["T_VARIABLE","$connection_options",98],"[",["T_CONSTANT_ENCAPSED_STRING","'port'",98],"]",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ Allow PDO options to be overridden.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$connection_options",101],["T_WHITESPACE"," ",101],["T_PLUS_EQUAL","+=",101],["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'pdo'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",",",["T_WHITESPACE","\n    ",102],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$connection_options",104],"[",["T_CONSTANT_ENCAPSED_STRING","'pdo'",104],"]",["T_WHITESPACE"," ",104],["T_PLUS_EQUAL","+=",104],["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_WHITESPACE","\n      ",104],["T_NS_SEPARATOR","\\",105],["T_STRING","PDO",105],["T_DOUBLE_COLON","::",105],["T_STRING","ATTR_ERRMODE",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_NS_SEPARATOR","\\",105],["T_STRING","PDO",105],["T_DOUBLE_COLON","::",105],["T_STRING","ERRMODE_EXCEPTION",105],",",["T_WHITESPACE","\n      ",105],["T_COMMENT","\/\/ Prepared statements are most effective for performance when queries\n",106],["T_WHITESPACE","      ",107],["T_COMMENT","\/\/ are recycled (used several times). However, if they are not re-used,\n",107],["T_WHITESPACE","      ",108],["T_COMMENT","\/\/ prepared statements become inefficient. Since most of Drupal's\n",108],["T_WHITESPACE","      ",109],["T_COMMENT","\/\/ prepared queries are not re-used, it should be faster to emulate\n",109],["T_WHITESPACE","      ",110],["T_COMMENT","\/\/ the preparation than to actually ready statements for re-use. If in\n",110],["T_WHITESPACE","      ",111],["T_COMMENT","\/\/ doubt, reset to FALSE and measure performance.\n",111],["T_WHITESPACE","      ",112],["T_NS_SEPARATOR","\\",112],["T_STRING","PDO",112],["T_DOUBLE_COLON","::",112],["T_STRING","ATTR_EMULATE_PREPARES",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_STRING","TRUE",112],",",["T_WHITESPACE","\n      ",112],["T_COMMENT","\/\/ Convert numeric values to strings when fetching.\n",113],["T_WHITESPACE","      ",114],["T_NS_SEPARATOR","\\",114],["T_STRING","PDO",114],["T_DOUBLE_COLON","::",114],["T_STRING","ATTR_STRINGIFY_FETCHES",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_STRING","TRUE",114],",",["T_WHITESPACE","\n    ",114],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$pdo",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_NEW","new",116],["T_WHITESPACE"," ",116],["T_NS_SEPARATOR","\\",116],["T_STRING","PDO",116],"(",["T_VARIABLE","$dsn",116],",",["T_WHITESPACE"," ",116],["T_VARIABLE","$connection_options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$connection_options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",116],"]",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$connection_options",116],"[",["T_CONSTANT_ENCAPSED_STRING","'pdo'",116],"]",")",";",["T_WHITESPACE","\n\n    ",116],["T_RETURN","return",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$pdo",118],";",["T_WHITESPACE","\n  ",118],"}",["T_WHITESPACE","\n\n  ",119],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",121],["T_WHITESPACE","\n  ",123],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","query",124],"(",["T_VARIABLE","$query",124],",",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$args",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",",",["T_WHITESPACE"," ",124],["T_VARIABLE","$options",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$options",125],["T_WHITESPACE"," ",125],["T_PLUS_EQUAL","+=",125],["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","defaultOptions",125],"(",")",";",["T_WHITESPACE","\n\n    ",125],["T_COMMENT","\/\/ The PDO PostgreSQL driver has a bug which doesn't type cast booleans\n",127],["T_WHITESPACE","    ",128],["T_COMMENT","\/\/ correctly when parameters are bound using associative arrays.\n",128],["T_WHITESPACE","    ",129],["T_COMMENT","\/\/ @see http:\/\/bugs.php.net\/bug.php?id=48383\n",129],["T_WHITESPACE","    ",130],["T_FOREACH","foreach",130],["T_WHITESPACE"," ",130],"(",["T_VARIABLE","$args",130],["T_WHITESPACE"," ",130],["T_AS","as",130],["T_WHITESPACE"," ",130],"&",["T_VARIABLE","$value",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n      ",130],["T_IF","if",131],["T_WHITESPACE"," ",131],"(",["T_STRING","is_bool",131],"(",["T_VARIABLE","$value",131],")",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$value",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_INT_CAST","(int)",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$value",132],";",["T_WHITESPACE","\n      ",132],"}",["T_WHITESPACE","\n    ",133],"}",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ We need to wrap queries with a savepoint if:\n",136],["T_WHITESPACE","    ",137],["T_COMMENT","\/\/ - Currently in a transaction.\n",137],["T_WHITESPACE","    ",138],["T_COMMENT","\/\/ - A 'mimic_implicit_commit' does not exist already.\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ - The query is not a savepoint query.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$wrap_with_savepoint",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","inTransaction",140],"(",")",["T_WHITESPACE"," ",140],["T_BOOLEAN_AND","&&",140],["T_WHITESPACE","\n      ",140],"!",["T_ISSET","isset",141],"(",["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","transactionLayers",141],"[",["T_CONSTANT_ENCAPSED_STRING","'mimic_implicit_commit'",141],"]",")",["T_WHITESPACE"," ",141],["T_BOOLEAN_AND","&&",141],["T_WHITESPACE","\n      ",141],"!","(",["T_STRING","is_string",142],"(",["T_VARIABLE","$query",142],")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],"(",["T_WHITESPACE","\n        ",142],["T_STRING","stripos",143],"(",["T_VARIABLE","$query",143],",",["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'ROLLBACK TO SAVEPOINT '",143],")",["T_WHITESPACE"," ",143],["T_IS_IDENTICAL","===",143],["T_WHITESPACE"," ",143],["T_LNUMBER","0",143],["T_WHITESPACE"," ",143],["T_BOOLEAN_OR","||",143],["T_WHITESPACE","\n        ",143],["T_STRING","stripos",144],"(",["T_VARIABLE","$query",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'RELEASE SAVEPOINT '",144],")",["T_WHITESPACE"," ",144],["T_IS_IDENTICAL","===",144],["T_WHITESPACE"," ",144],["T_LNUMBER","0",144],["T_WHITESPACE"," ",144],["T_BOOLEAN_OR","||",144],["T_WHITESPACE","\n        ",144],["T_STRING","stripos",145],"(",["T_VARIABLE","$query",145],",",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'SAVEPOINT '",145],")",["T_WHITESPACE"," ",145],["T_IS_IDENTICAL","===",145],["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],["T_WHITESPACE","\n      ",145],")",["T_WHITESPACE","\n    ",146],")",";",["T_WHITESPACE","\n    ",147],["T_IF","if",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$wrap_with_savepoint",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n      ",148],["T_COMMENT","\/\/ Create a savepoint so we can rollback a failed query. This is so we can\n",149],["T_WHITESPACE","      ",150],["T_COMMENT","\/\/ mimic MySQL and SQLite transactions which don't fail if a single query\n",150],["T_WHITESPACE","      ",151],["T_COMMENT","\/\/ fails. This is important for tables that are created on demand. For\n",151],["T_WHITESPACE","      ",152],["T_COMMENT","\/\/ example, \\Drupal\\Core\\Cache\\DatabaseBackend.\n",152],["T_WHITESPACE","      ",153],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","addSavepoint",153],"(",")",";",["T_WHITESPACE","\n      ",153],["T_TRY","try",154],["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$return",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_STRING","parent",155],["T_DOUBLE_COLON","::",155],["T_STRING","query",155],"(",["T_VARIABLE","$query",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$args",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$options",155],")",";",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","releaseSavepoint",156],"(",")",";",["T_WHITESPACE","\n      ",156],"}",["T_WHITESPACE","\n      ",157],["T_CATCH","catch",158],["T_WHITESPACE"," ",158],"(",["T_NS_SEPARATOR","\\",158],["T_STRING","Exception",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$e",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","rollbackSavepoint",159],"(",")",";",["T_WHITESPACE","\n        ",159],["T_THROW","throw",160],["T_WHITESPACE"," ",160],["T_VARIABLE","$e",160],";",["T_WHITESPACE","\n      ",160],"}",["T_WHITESPACE","\n    ",161],"}",["T_WHITESPACE","\n    ",162],["T_ELSE","else",163],["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$return",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","parent",164],["T_DOUBLE_COLON","::",164],["T_STRING","query",164],"(",["T_VARIABLE","$query",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$args",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$options",164],")",";",["T_WHITESPACE","\n    ",164],"}",["T_WHITESPACE","\n\n    ",165],["T_RETURN","return",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$return",167],";",["T_WHITESPACE","\n  ",167],"}",["T_WHITESPACE","\n\n  ",168],["T_PUBLIC","public",170],["T_WHITESPACE"," ",170],["T_FUNCTION","function",170],["T_WHITESPACE"," ",170],["T_STRING","prepareQuery",170],"(",["T_VARIABLE","$query",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n    ",170],["T_COMMENT","\/\/ mapConditionOperator converts LIKE operations to ILIKE for consistency\n",171],["T_WHITESPACE","    ",172],["T_COMMENT","\/\/ with MySQL. However, Postgres does not support ILIKE on bytea (blobs)\n",172],["T_WHITESPACE","    ",173],["T_COMMENT","\/\/ fields.\n",173],["T_WHITESPACE","    ",174],["T_COMMENT","\/\/ To make the ILIKE operator work, we type-cast bytea fields into text.\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ @todo This workaround only affects bytea fields, but the involved field\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/   types involved in the query are unknown, so there is no way to\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/   conditionally execute this for affected queries only.\n",177],["T_WHITESPACE","    ",178],["T_RETURN","return",178],["T_WHITESPACE"," ",178],["T_STRING","parent",178],["T_DOUBLE_COLON","::",178],["T_STRING","prepareQuery",178],"(",["T_STRING","preg_replace",178],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ ([^ ]+) +(I*LIKE|NOT +I*LIKE) \/i'",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","' ${1}::text ${2} '",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$query",178],")",")",";",["T_WHITESPACE","\n  ",178],"}",["T_WHITESPACE","\n\n  ",179],["T_PUBLIC","public",181],["T_WHITESPACE"," ",181],["T_FUNCTION","function",181],["T_WHITESPACE"," ",181],["T_STRING","queryRange",181],"(",["T_VARIABLE","$query",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$from",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$count",181],",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$args",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",")",",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$options",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n    ",181],["T_RETURN","return",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","query",182],"(",["T_VARIABLE","$query",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","' LIMIT '",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_INT_CAST","(int)",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$count",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","' OFFSET '",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_INT_CAST","(int)",182],["T_WHITESPACE"," ",182],["T_VARIABLE","$from",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$args",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$options",182],")",";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n  ",183],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","queryTemporary",185],"(",["T_VARIABLE","$query",185],",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$args",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",")",",",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$options",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",")",")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$tablename",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","generateTemporaryTableName",186],"(",")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","query",187],"(",["T_CONSTANT_ENCAPSED_STRING","'CREATE TEMPORARY TABLE {'",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_VARIABLE","$tablename",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'} AS '",187],["T_WHITESPACE"," ",187],".",["T_WHITESPACE"," ",187],["T_VARIABLE","$query",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$args",187],",",["T_WHITESPACE"," ",187],["T_VARIABLE","$options",187],")",";",["T_WHITESPACE","\n    ",187],["T_RETURN","return",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$tablename",188],";",["T_WHITESPACE","\n  ",188],"}",["T_WHITESPACE","\n\n  ",189],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",191],["T_WHITESPACE","\n  ",193],["T_PUBLIC","public",194],["T_WHITESPACE"," ",194],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","escapeField",194],"(",["T_VARIABLE","$field",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$escaped",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_STRING","parent",195],["T_DOUBLE_COLON","::",195],["T_STRING","escapeField",195],"(",["T_VARIABLE","$field",195],")",";",["T_WHITESPACE","\n\n    ",195],["T_COMMENT","\/\/ Remove any invalid start character.\n",197],["T_WHITESPACE","    ",198],["T_VARIABLE","$escaped",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_STRING","preg_replace",198],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^[^A-Za-z0-9_]\/'",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","''",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$escaped",198],")",";",["T_WHITESPACE","\n\n    ",198],["T_COMMENT","\/\/ The pgsql database driver does not support field names that contain\n",200],["T_WHITESPACE","    ",201],["T_COMMENT","\/\/ periods (supported by PostgreSQL server) because this method may be\n",201],["T_WHITESPACE","    ",202],["T_COMMENT","\/\/ called by a field with a table alias as part of SQL conditions or\n",202],["T_WHITESPACE","    ",203],["T_COMMENT","\/\/ order by statements. This will consider a period as a table alias\n",203],["T_WHITESPACE","    ",204],["T_COMMENT","\/\/ identifier, and split the string at the first period.\n",204],["T_WHITESPACE","    ",205],["T_IF","if",205],["T_WHITESPACE"," ",205],"(",["T_STRING","preg_match",205],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^([A-Za-z0-9_]+)\"?[.]\"?([A-Za-z0-9_.]+)\/'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$escaped",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$parts",205],")",")",["T_WHITESPACE"," ",205],"{",["T_WHITESPACE","\n      ",205],["T_VARIABLE","$table",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$parts",206],"[",["T_LNUMBER","1",206],"]",";",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$column",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_VARIABLE","$parts",207],"[",["T_LNUMBER","2",207],"]",";",["T_WHITESPACE","\n\n      ",207],["T_COMMENT","\/\/ Use escape alias because escapeField may contain multiple periods that\n",209],["T_WHITESPACE","      ",210],["T_COMMENT","\/\/ need to be escaped.\n",210],["T_WHITESPACE","      ",211],["T_VARIABLE","$escaped",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","escapeTable",211],"(",["T_VARIABLE","$table",211],")",["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'.'",211],["T_WHITESPACE"," ",211],".",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","escapeAlias",211],"(",["T_VARIABLE","$column",211],")",";",["T_WHITESPACE","\n    ",211],"}",["T_WHITESPACE","\n    ",212],["T_ELSE","else",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$escaped",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","doEscape",214],"(",["T_VARIABLE","$escaped",214],")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_RETURN","return",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$escaped",217],";",["T_WHITESPACE","\n  ",217],"}",["T_WHITESPACE","\n\n  ",218],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",220],["T_WHITESPACE","\n  ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","escapeAlias",223],"(",["T_VARIABLE","$field",223],")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$escaped",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","preg_replace",224],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[^A-Za-z0-9_]+\/'",224],",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","''",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$field",224],")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$escaped",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","doEscape",225],"(",["T_VARIABLE","$escaped",225],")",";",["T_WHITESPACE","\n    ",225],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$escaped",226],";",["T_WHITESPACE","\n  ",226],"}",["T_WHITESPACE","\n\n  ",227],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",229],["T_WHITESPACE","\n  ",231],["T_PUBLIC","public",232],["T_WHITESPACE"," ",232],["T_FUNCTION","function",232],["T_WHITESPACE"," ",232],["T_STRING","escapeTable",232],"(",["T_VARIABLE","$table",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$escaped",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","parent",233],["T_DOUBLE_COLON","::",233],["T_STRING","escapeTable",233],"(",["T_VARIABLE","$table",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Ensure that each part (database, schema and table) of the table name is\n",235],["T_WHITESPACE","    ",236],["T_COMMENT","\/\/ properly and independently escaped.\n",236],["T_WHITESPACE","    ",237],["T_VARIABLE","$parts",237],["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],["T_STRING","explode",237],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",237],",",["T_WHITESPACE"," ",237],["T_VARIABLE","$escaped",237],")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$parts",238],["T_WHITESPACE"," ",238],"=",["T_WHITESPACE"," ",238],["T_STRING","array_map",238],"(","[",["T_VARIABLE","$this",238],",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'doEscape'",238],"]",",",["T_WHITESPACE"," ",238],["T_VARIABLE","$parts",238],")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$escaped",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","implode",239],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$parts",239],")",";",["T_WHITESPACE","\n\n    ",239],["T_RETURN","return",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$escaped",241],";",["T_WHITESPACE","\n  ",241],"}",["T_WHITESPACE","\n\n  ",242],["T_DOC_COMMENT","\/**\n   * Escape a string if needed.\n   *\n   * @param $string\n   *   The string to escape.\n   * @return string\n   *   The escaped string.\n   *\/",244],["T_WHITESPACE","\n  ",251],["T_PROTECTED","protected",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","doEscape",252],"(",["T_VARIABLE","$string",252],")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n    ",252],["T_COMMENT","\/\/ Quote identifier to make it case-sensitive.\n",253],["T_WHITESPACE","    ",254],["T_IF","if",254],["T_WHITESPACE"," ",254],"(",["T_STRING","preg_match",254],"(",["T_CONSTANT_ENCAPSED_STRING","'\/[A-Z]\/'",254],",",["T_WHITESPACE"," ",254],["T_VARIABLE","$string",254],")",")",["T_WHITESPACE"," ",254],"{",["T_WHITESPACE","\n      ",254],["T_VARIABLE","$string",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'\"'",255],["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_VARIABLE","$string",255],["T_WHITESPACE"," ",255],".",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'\"'",255],";",["T_WHITESPACE","\n    ",255],"}",["T_WHITESPACE","\n    ",256],["T_ELSEIF","elseif",257],["T_WHITESPACE"," ",257],"(",["T_STRING","in_array",257],"(",["T_STRING","strtolower",257],"(",["T_VARIABLE","$string",257],")",",",["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","postgresqlReservedKeyWords",257],")",")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n      ",257],["T_COMMENT","\/\/ Quote the string for PostgreSQL reserved key words.\n",258],["T_WHITESPACE","      ",259],["T_VARIABLE","$string",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'\"'",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_VARIABLE","$string",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'\"'",259],";",["T_WHITESPACE","\n    ",259],"}",["T_WHITESPACE","\n    ",260],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$string",261],";",["T_WHITESPACE","\n  ",261],"}",["T_WHITESPACE","\n\n  ",262],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","driver",264],"(",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n    ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",265],";",["T_WHITESPACE","\n  ",265],"}",["T_WHITESPACE","\n\n  ",266],["T_PUBLIC","public",268],["T_WHITESPACE"," ",268],["T_FUNCTION","function",268],["T_WHITESPACE"," ",268],["T_STRING","databaseType",268],"(",")",["T_WHITESPACE"," ",268],"{",["T_WHITESPACE","\n    ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'pgsql'",269],";",["T_WHITESPACE","\n  ",269],"}",["T_WHITESPACE","\n\n  ",270],["T_DOC_COMMENT","\/**\n   * Overrides \\Drupal\\Core\\Database\\Connection::createDatabase().\n   *\n   * @param string $database\n   *   The name of the database to create.\n   *\n   * @throws \\Drupal\\Core\\Database\\DatabaseNotFoundException\n   *\/",272],["T_WHITESPACE","\n  ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","createDatabase",280],"(",["T_VARIABLE","$database",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n    ",280],["T_COMMENT","\/\/ Escape the database name.\n",281],["T_WHITESPACE","    ",282],["T_VARIABLE","$database",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_STRING","Database",282],["T_DOUBLE_COLON","::",282],["T_STRING","getConnection",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","escapeDatabase",282],"(",["T_VARIABLE","$database",282],")",";",["T_WHITESPACE","\n\n    ",282],["T_COMMENT","\/\/ If the PECL intl extension is installed, use it to determine the proper\n",284],["T_WHITESPACE","    ",285],["T_COMMENT","\/\/ locale.  Otherwise, fall back to en_US.\n",285],["T_WHITESPACE","    ",286],["T_IF","if",286],["T_WHITESPACE"," ",286],"(",["T_STRING","class_exists",286],"(",["T_CONSTANT_ENCAPSED_STRING","'Locale'",286],")",")",["T_WHITESPACE"," ",286],"{",["T_WHITESPACE","\n      ",286],["T_VARIABLE","$locale",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_NS_SEPARATOR","\\",287],["T_STRING","Locale",287],["T_DOUBLE_COLON","::",287],["T_STRING","getDefault",287],"(",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n    ",288],["T_ELSE","else",289],["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n      ",289],["T_VARIABLE","$locale",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'en_US'",290],";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_TRY","try",293],["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n      ",293],["T_COMMENT","\/\/ Create the database and set it as active.\n",294],["T_WHITESPACE","      ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","connection",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","exec",295],"(","\"",["T_ENCAPSED_AND_WHITESPACE","CREATE DATABASE ",295],["T_VARIABLE","$database",295],["T_ENCAPSED_AND_WHITESPACE"," WITH TEMPLATE template0 ENCODING='utf8' LC_CTYPE='",295],["T_VARIABLE","$locale",295],["T_ENCAPSED_AND_WHITESPACE",".utf8' LC_COLLATE='",295],["T_VARIABLE","$locale",295],["T_ENCAPSED_AND_WHITESPACE",".utf8'",295],"\"",")",";",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n    ",296],["T_CATCH","catch",297],["T_WHITESPACE"," ",297],"(",["T_NS_SEPARATOR","\\",297],["T_STRING","Exception",297],["T_WHITESPACE"," ",297],["T_VARIABLE","$e",297],")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n      ",297],["T_THROW","throw",298],["T_WHITESPACE"," ",298],["T_NEW","new",298],["T_WHITESPACE"," ",298],["T_STRING","DatabaseNotFoundException",298],"(",["T_VARIABLE","$e",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","getMessage",298],"(",")",")",";",["T_WHITESPACE","\n    ",298],"}",["T_WHITESPACE","\n  ",299],"}",["T_WHITESPACE","\n\n  ",300],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","mapConditionOperator",302],"(",["T_VARIABLE","$operator",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n    ",302],["T_STATIC","static",303],["T_WHITESPACE"," ",303],["T_VARIABLE","$specials",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",["T_WHITESPACE","\n      ",303],["T_COMMENT","\/\/ In PostgreSQL, 'LIKE' is case-sensitive. For case-insensitive LIKE\n",304],["T_WHITESPACE","      ",305],["T_COMMENT","\/\/ statements, we need to use ILIKE instead.\n",305],["T_WHITESPACE","      ",306],["T_CONSTANT_ENCAPSED_STRING","'LIKE'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_ARRAY","array",306],"(",["T_CONSTANT_ENCAPSED_STRING","'operator'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'ILIKE'",306],")",",",["T_WHITESPACE","\n      ",306],["T_CONSTANT_ENCAPSED_STRING","'LIKE BINARY'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_CONSTANT_ENCAPSED_STRING","'operator'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'LIKE'",307],")",",",["T_WHITESPACE","\n      ",307],["T_CONSTANT_ENCAPSED_STRING","'NOT LIKE'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_CONSTANT_ENCAPSED_STRING","'operator'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'NOT ILIKE'",308],")",",",["T_WHITESPACE","\n      ",308],["T_CONSTANT_ENCAPSED_STRING","'REGEXP'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_ARRAY","array",309],"(",["T_CONSTANT_ENCAPSED_STRING","'operator'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'~*'",309],")",",",["T_WHITESPACE","\n    ",309],")",";",["T_WHITESPACE","\n    ",310],["T_RETURN","return",311],["T_WHITESPACE"," ",311],["T_ISSET","isset",311],"(",["T_VARIABLE","$specials",311],"[",["T_VARIABLE","$operator",311],"]",")",["T_WHITESPACE"," ",311],"?",["T_WHITESPACE"," ",311],["T_VARIABLE","$specials",311],"[",["T_VARIABLE","$operator",311],"]",["T_WHITESPACE"," ",311],":",["T_WHITESPACE"," ",311],["T_STRING","NULL",311],";",["T_WHITESPACE","\n  ",311],"}",["T_WHITESPACE","\n\n  ",312],["T_DOC_COMMENT","\/**\n   * Retrieve a the next id in a sequence.\n   *\n   * PostgreSQL has built in sequences. We'll use these instead of inserting\n   * and updating a sequences table.\n   *\/",314],["T_WHITESPACE","\n  ",319],["T_PUBLIC","public",320],["T_WHITESPACE"," ",320],["T_FUNCTION","function",320],["T_WHITESPACE"," ",320],["T_STRING","nextId",320],"(",["T_VARIABLE","$existing",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_LNUMBER","0",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n\n    ",320],["T_COMMENT","\/\/ Retrieve the name of the sequence. This information cannot be cached\n",322],["T_WHITESPACE","    ",323],["T_COMMENT","\/\/ because the prefix may change, for example, like it does in simpletests.\n",323],["T_WHITESPACE","    ",324],["T_VARIABLE","$sequence_name",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","makeSequenceName",324],"(",["T_CONSTANT_ENCAPSED_STRING","'sequences'",324],",",["T_WHITESPACE"," ",324],["T_CONSTANT_ENCAPSED_STRING","'value'",324],")",";",["T_WHITESPACE","\n\n    ",324],["T_COMMENT","\/\/ When PostgreSQL gets a value too small then it will lock the table,\n",326],["T_WHITESPACE","    ",327],["T_COMMENT","\/\/ retry the INSERT and if it's still too small then alter the sequence.\n",327],["T_WHITESPACE","    ",328],["T_VARIABLE","$id",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","query",328],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT nextval('\"",328],["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_VARIABLE","$sequence_name",328],["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","\"')\"",328],")",["T_OBJECT_OPERATOR","->",328],["T_STRING","fetchField",328],"(",")",";",["T_WHITESPACE","\n    ",328],["T_IF","if",329],["T_WHITESPACE"," ",329],"(",["T_VARIABLE","$id",329],["T_WHITESPACE"," ",329],">",["T_WHITESPACE"," ",329],["T_VARIABLE","$existing",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n      ",329],["T_RETURN","return",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$id",330],";",["T_WHITESPACE","\n    ",330],"}",["T_WHITESPACE","\n\n    ",331],["T_COMMENT","\/\/ PostgreSQL advisory locks are simply locks to be used by an\n",333],["T_WHITESPACE","    ",334],["T_COMMENT","\/\/ application such as Drupal. This will prevent other Drupal processes\n",334],["T_WHITESPACE","    ",335],["T_COMMENT","\/\/ from altering the sequence while we are.\n",335],["T_WHITESPACE","    ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","query",336],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT pg_advisory_lock(\"",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_STRING","self",336],["T_DOUBLE_COLON","::",336],["T_STRING","POSTGRESQL_NEXTID_LOCK",336],["T_WHITESPACE"," ",336],".",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","\")\"",336],")",";",["T_WHITESPACE","\n\n    ",336],["T_COMMENT","\/\/ While waiting to obtain the lock, the sequence may have been altered\n",338],["T_WHITESPACE","    ",339],["T_COMMENT","\/\/ so lets try again to obtain an adequate value.\n",339],["T_WHITESPACE","    ",340],["T_VARIABLE","$id",340],["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","query",340],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT nextval('\"",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_VARIABLE","$sequence_name",340],["T_WHITESPACE"," ",340],".",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","\"')\"",340],")",["T_OBJECT_OPERATOR","->",340],["T_STRING","fetchField",340],"(",")",";",["T_WHITESPACE","\n    ",340],["T_IF","if",341],["T_WHITESPACE"," ",341],"(",["T_VARIABLE","$id",341],["T_WHITESPACE"," ",341],">",["T_WHITESPACE"," ",341],["T_VARIABLE","$existing",341],")",["T_WHITESPACE"," ",341],"{",["T_WHITESPACE","\n      ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","query",342],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT pg_advisory_unlock(\"",342],["T_WHITESPACE"," ",342],".",["T_WHITESPACE"," ",342],["T_STRING","self",342],["T_DOUBLE_COLON","::",342],["T_STRING","POSTGRESQL_NEXTID_LOCK",342],["T_WHITESPACE"," ",342],".",["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","\")\"",342],")",";",["T_WHITESPACE","\n      ",342],["T_RETURN","return",343],["T_WHITESPACE"," ",343],["T_VARIABLE","$id",343],";",["T_WHITESPACE","\n    ",343],"}",["T_WHITESPACE","\n\n    ",344],["T_COMMENT","\/\/ Reset the sequence to a higher value than the existing id.\n",346],["T_WHITESPACE","    ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","query",347],"(",["T_CONSTANT_ENCAPSED_STRING","\"ALTER SEQUENCE \"",347],["T_WHITESPACE"," ",347],".",["T_WHITESPACE"," ",347],["T_VARIABLE","$sequence_name",347],["T_WHITESPACE"," ",347],".",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","\" RESTART WITH \"",347],["T_WHITESPACE"," ",347],".",["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$existing",347],["T_WHITESPACE"," ",347],"+",["T_WHITESPACE"," ",347],["T_LNUMBER","1",347],")",")",";",["T_WHITESPACE","\n\n    ",347],["T_COMMENT","\/\/ Retrieve the next id. We know this will be as high as we want it.\n",349],["T_WHITESPACE","    ",350],["T_VARIABLE","$id",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","query",350],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT nextval('\"",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_VARIABLE","$sequence_name",350],["T_WHITESPACE"," ",350],".",["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","\"')\"",350],")",["T_OBJECT_OPERATOR","->",350],["T_STRING","fetchField",350],"(",")",";",["T_WHITESPACE","\n\n    ",350],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","query",352],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT pg_advisory_unlock(\"",352],["T_WHITESPACE"," ",352],".",["T_WHITESPACE"," ",352],["T_STRING","self",352],["T_DOUBLE_COLON","::",352],["T_STRING","POSTGRESQL_NEXTID_LOCK",352],["T_WHITESPACE"," ",352],".",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","\")\"",352],")",";",["T_WHITESPACE","\n\n    ",352],["T_RETURN","return",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$id",354],";",["T_WHITESPACE","\n  ",354],"}",["T_WHITESPACE","\n\n  ",355],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",357],["T_WHITESPACE","\n  ",359],["T_PUBLIC","public",360],["T_WHITESPACE"," ",360],["T_FUNCTION","function",360],["T_WHITESPACE"," ",360],["T_STRING","getFullQualifiedTableName",360],"(",["T_VARIABLE","$table",360],")",["T_WHITESPACE"," ",360],"{",["T_WHITESPACE","\n    ",360],["T_VARIABLE","$options",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","getConnectionOptions",361],"(",")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$prefix",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","tablePrefix",362],"(",["T_VARIABLE","$table",362],")",";",["T_WHITESPACE","\n\n    ",362],["T_COMMENT","\/\/ The fully qualified table name in PostgreSQL is in the form of\n",364],["T_WHITESPACE","    ",365],["T_COMMENT","\/\/ <database>.<schema>.<table>, so we have to include the 'public' schema in\n",365],["T_WHITESPACE","    ",366],["T_COMMENT","\/\/ the return value.\n",366],["T_WHITESPACE","    ",367],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$options",367],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",367],"]",["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'.public.'",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_VARIABLE","$prefix",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_VARIABLE","$table",367],";",["T_WHITESPACE","\n  ",367],"}",["T_WHITESPACE","\n\n  ",368],["T_DOC_COMMENT","\/**\n   * Add a new savepoint with an unique name.\n   *\n   * The main use for this method is to mimic InnoDB functionality, which\n   * provides an inherent savepoint before any query in a transaction.\n   *\n   * @param $savepoint_name\n   *   A string representing the savepoint name. By default,\n   *   \"mimic_implicit_commit\" is used.\n   *\n   * @see Drupal\\Core\\Database\\Connection::pushTransaction()\n   *\/",370],["T_WHITESPACE","\n  ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","addSavepoint",382],"(",["T_VARIABLE","$savepoint_name",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_CONSTANT_ENCAPSED_STRING","'mimic_implicit_commit'",382],")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n    ",382],["T_IF","if",383],["T_WHITESPACE"," ",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","inTransaction",383],"(",")",")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n      ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","pushTransaction",384],"(",["T_VARIABLE","$savepoint_name",384],")",";",["T_WHITESPACE","\n    ",384],"}",["T_WHITESPACE","\n  ",385],"}",["T_WHITESPACE","\n\n  ",386],["T_DOC_COMMENT","\/**\n   * Release a savepoint by name.\n   *\n   * @param $savepoint_name\n   *   A string representing the savepoint name. By default,\n   *   \"mimic_implicit_commit\" is used.\n   *\n   * @see Drupal\\Core\\Database\\Connection::popTransaction()\n   *\/",388],["T_WHITESPACE","\n  ",396],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","releaseSavepoint",397],"(",["T_VARIABLE","$savepoint_name",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'mimic_implicit_commit'",397],")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n    ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_ISSET","isset",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","transactionLayers",398],"[",["T_VARIABLE","$savepoint_name",398],"]",")",")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n      ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","popTransaction",399],"(",["T_VARIABLE","$savepoint_name",399],")",";",["T_WHITESPACE","\n    ",399],"}",["T_WHITESPACE","\n  ",400],"}",["T_WHITESPACE","\n\n  ",401],["T_DOC_COMMENT","\/**\n   * Rollback a savepoint by name if it exists.\n   *\n   * @param $savepoint_name\n   *   A string representing the savepoint name. By default,\n   *   \"mimic_implicit_commit\" is used.\n   *\/",403],["T_WHITESPACE","\n  ",409],["T_PUBLIC","public",410],["T_WHITESPACE"," ",410],["T_FUNCTION","function",410],["T_WHITESPACE"," ",410],["T_STRING","rollbackSavepoint",410],"(",["T_VARIABLE","$savepoint_name",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'mimic_implicit_commit'",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n    ",410],["T_IF","if",411],["T_WHITESPACE"," ",411],"(",["T_ISSET","isset",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","transactionLayers",411],"[",["T_VARIABLE","$savepoint_name",411],"]",")",")",["T_WHITESPACE"," ",411],"{",["T_WHITESPACE","\n      ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","rollback",412],"(",["T_VARIABLE","$savepoint_name",412],")",";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n  ",413],"}",["T_WHITESPACE","\n\n  ",414],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",416],["T_WHITESPACE","\n  ",418],["T_PUBLIC","public",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","upsert",419],"(",["T_VARIABLE","$table",419],",",["T_WHITESPACE"," ",419],["T_ARRAY","array",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$options",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_ARRAY","array",419],"(",")",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n    ",419],["T_COMMENT","\/\/ Use the (faster) native Upsert implementation for PostgreSQL >= 9.5.\n",420],["T_WHITESPACE","    ",421],["T_IF","if",421],["T_WHITESPACE"," ",421],"(",["T_STRING","version_compare",421],"(",["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","version",421],"(",")",",",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","'9.5'",421],",",["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","'>='",421],")",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n      ",421],["T_VARIABLE","$class",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getDriverClass",422],"(",["T_CONSTANT_ENCAPSED_STRING","'NativeUpsert'",422],")",";",["T_WHITESPACE","\n    ",422],"}",["T_WHITESPACE","\n    ",423],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n      ",424],["T_VARIABLE","$class",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getDriverClass",425],"(",["T_CONSTANT_ENCAPSED_STRING","'Upsert'",425],")",";",["T_WHITESPACE","\n    ",425],"}",["T_WHITESPACE","\n\n    ",426],["T_RETURN","return",428],["T_WHITESPACE"," ",428],["T_NEW","new",428],["T_WHITESPACE"," ",428],["T_VARIABLE","$class",428],"(",["T_VARIABLE","$this",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$table",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$options",428],")",";",["T_WHITESPACE","\n  ",428],"}",["T_WHITESPACE","\n\n",429],"}",["T_WHITESPACE","\n\n",431],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup database\".\n *\/",433],["T_WHITESPACE","\n",435]]
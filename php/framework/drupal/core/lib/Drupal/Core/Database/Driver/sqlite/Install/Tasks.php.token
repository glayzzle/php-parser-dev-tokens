[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","sqlite",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Install",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Driver",6],["T_NS_SEPARATOR","\\",6],["T_STRING","sqlite",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Connection",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DatabaseNotFoundException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Database",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Install",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tasks",8],["T_WHITESPACE"," ",8],["T_AS","as",8],["T_WHITESPACE"," ",8],["T_STRING","InstallTasks",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Specifies installation tasks for SQLite databases.\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","Tasks",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","InstallTasks",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$pdoDriver",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","name",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_RETURN","return",24],["T_WHITESPACE"," ",24],["T_STRING","t",24],"(",["T_CONSTANT_ENCAPSED_STRING","'SQLite'",24],")",";",["T_WHITESPACE","\n  ",24],"}",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","minimumVersion",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'3.7.11'",31],";",["T_WHITESPACE","\n  ",31],"}",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PUBLIC","public",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","getFormOptions",37],"(",["T_ARRAY","array",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$database",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$form",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","parent",38],["T_DOUBLE_COLON","::",38],["T_STRING","getFormOptions",38],"(",["T_VARIABLE","$database",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Remove the options that only apply to client\/server style databases.\n",40],["T_WHITESPACE","    ",41],["T_UNSET","unset",41],"(",["T_VARIABLE","$form",41],"[",["T_CONSTANT_ENCAPSED_STRING","'username'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$form",41],"[",["T_CONSTANT_ENCAPSED_STRING","'password'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$form",41],"[",["T_CONSTANT_ENCAPSED_STRING","'advanced_options'",41],"]","[",["T_CONSTANT_ENCAPSED_STRING","'host'",41],"]",",",["T_WHITESPACE"," ",41],["T_VARIABLE","$form",41],"[",["T_CONSTANT_ENCAPSED_STRING","'advanced_options'",41],"]","[",["T_CONSTANT_ENCAPSED_STRING","'port'",41],"]",")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Make the text more accurate for SQLite.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$form",44],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",44],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#title'",44],"]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","t",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Database file'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$form",45],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",45],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#description'",45],"]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_STRING","t",45],"(",["T_CONSTANT_ENCAPSED_STRING","'The absolute path to the file where @drupal data will be stored. This must be writable by the web server and should exist outside of the web root.'",45],",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'@drupal'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_STRING","drupal_install_profile_distribution_name",45],"(",")",")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$default_database",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_NS_SEPARATOR","\\",46],["T_STRING","Drupal",46],["T_DOUBLE_COLON","::",46],["T_STRING","service",46],"(",["T_CONSTANT_ENCAPSED_STRING","'site.path'",46],")",["T_WHITESPACE"," ",46],".",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'\/files\/.ht.sqlite'",46],";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$form",47],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",47],"]","[",["T_CONSTANT_ENCAPSED_STRING","'#default_value'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_EMPTY","empty",47],"(",["T_VARIABLE","$database",47],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",47],"]",")",["T_WHITESPACE"," ",47],"?",["T_WHITESPACE"," ",47],["T_VARIABLE","$default_database",47],["T_WHITESPACE"," ",47],":",["T_WHITESPACE"," ",47],["T_VARIABLE","$database",47],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",47],"]",";",["T_WHITESPACE","\n    ",47],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$form",48],";",["T_WHITESPACE","\n  ",48],"}",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",51],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_FUNCTION","function",54],["T_WHITESPACE"," ",54],["T_STRING","connect",54],"(",")",["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n    ",54],["T_TRY","try",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_COMMENT","\/\/ This doesn't actually test the connection.\n",56],["T_WHITESPACE","      ",57],["T_STRING","db_set_active",57],"(",")",";",["T_WHITESPACE","\n      ",57],["T_COMMENT","\/\/ Now actually do a check.\n",58],["T_WHITESPACE","      ",59],["T_STRING","Database",59],["T_DOUBLE_COLON","::",59],["T_STRING","getConnection",59],"(",")",";",["T_WHITESPACE","\n      ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","pass",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal can CONNECT to the database ok.'",60],")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n    ",61],["T_CATCH","catch",62],["T_WHITESPACE"," ",62],"(",["T_NS_SEPARATOR","\\",62],["T_STRING","Exception",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$e",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_COMMENT","\/\/ Attempt to create the database if it is not found.\n",63],["T_WHITESPACE","      ",64],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_VARIABLE","$e",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getCode",64],"(",")",["T_WHITESPACE"," ",64],["T_IS_EQUAL","==",64],["T_WHITESPACE"," ",64],["T_STRING","Connection",64],["T_DOUBLE_COLON","::",64],["T_STRING","DATABASE_NOT_FOUND",64],")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n        ",64],["T_COMMENT","\/\/ Remove the database string from connection info.\n",65],["T_WHITESPACE","        ",66],["T_VARIABLE","$connection_info",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","Database",66],["T_DOUBLE_COLON","::",66],["T_STRING","getConnectionInfo",66],"(",")",";",["T_WHITESPACE","\n        ",66],["T_VARIABLE","$database",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$connection_info",67],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",67],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",67],"]",";",["T_WHITESPACE","\n\n        ",67],["T_COMMENT","\/\/ We cannot use file_directory_temp() here because we haven't yet\n",69],["T_WHITESPACE","        ",70],["T_COMMENT","\/\/ successfully connected to the database.\n",70],["T_WHITESPACE","        ",71],["T_VARIABLE","$connection_info",71],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",71],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",71],"]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","drupal_tempnam",71],"(",["T_STRING","sys_get_temp_dir",71],"(",")",",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",71],")",";",["T_WHITESPACE","\n\n        ",71],["T_COMMENT","\/\/ In order to change the Database::$databaseInfo array, need to remove\n",73],["T_WHITESPACE","        ",74],["T_COMMENT","\/\/ the active connection, then re-add it with the new info.\n",74],["T_WHITESPACE","        ",75],["T_STRING","Database",75],["T_DOUBLE_COLON","::",75],["T_STRING","removeConnection",75],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",75],")",";",["T_WHITESPACE","\n        ",75],["T_STRING","Database",76],["T_DOUBLE_COLON","::",76],["T_STRING","addConnectionInfo",76],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'default'",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$connection_info",76],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",76],"]",")",";",["T_WHITESPACE","\n\n        ",76],["T_TRY","try",78],["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n          ",78],["T_STRING","Database",79],["T_DOUBLE_COLON","::",79],["T_STRING","getConnection",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","createDatabase",79],"(",["T_VARIABLE","$database",79],")",";",["T_WHITESPACE","\n          ",79],["T_STRING","Database",80],["T_DOUBLE_COLON","::",80],["T_STRING","closeConnection",80],"(",")",";",["T_WHITESPACE","\n\n          ",80],["T_COMMENT","\/\/ Now, restore the database config.\n",82],["T_WHITESPACE","          ",83],["T_STRING","Database",83],["T_DOUBLE_COLON","::",83],["T_STRING","removeConnection",83],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",83],")",";",["T_WHITESPACE","\n          ",83],["T_VARIABLE","$connection_info",84],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",84],"]","[",["T_CONSTANT_ENCAPSED_STRING","'database'",84],"]",["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$database",84],";",["T_WHITESPACE","\n          ",84],["T_STRING","Database",85],["T_DOUBLE_COLON","::",85],["T_STRING","addConnectionInfo",85],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'default'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$connection_info",85],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",85],"]",")",";",["T_WHITESPACE","\n\n          ",85],["T_COMMENT","\/\/ Check the database connection.\n",87],["T_WHITESPACE","          ",88],["T_STRING","Database",88],["T_DOUBLE_COLON","::",88],["T_STRING","getConnection",88],"(",")",";",["T_WHITESPACE","\n          ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","pass",89],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal can CONNECT to the database ok.'",89],")",";",["T_WHITESPACE","\n        ",89],"}",["T_WHITESPACE","\n        ",90],["T_CATCH","catch",91],["T_WHITESPACE"," ",91],"(",["T_STRING","DatabaseNotFoundException",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$e",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n          ",91],["T_COMMENT","\/\/ Still no dice; probably a permission issue. Raise the error to the\n",92],["T_WHITESPACE","          ",93],["T_COMMENT","\/\/ installer.\n",93],["T_WHITESPACE","          ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","fail",94],"(",["T_STRING","t",94],"(",["T_CONSTANT_ENCAPSED_STRING","'Database %database not found. The server reports the following message when attempting to create the database: %error.'",94],",",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",["T_CONSTANT_ENCAPSED_STRING","'%database'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$database",94],",",["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'%error'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$e",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","getMessage",94],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",94],"}",["T_WHITESPACE","\n      ",95],"}",["T_WHITESPACE","\n      ",96],["T_ELSE","else",97],["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n        ",97],["T_COMMENT","\/\/ Database connection failed for some other reason than the database\n",98],["T_WHITESPACE","        ",99],["T_COMMENT","\/\/ not existing.\n",99],["T_WHITESPACE","        ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","fail",100],"(",["T_STRING","t",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to connect to your database server. The server reports the following message: %error.<ul><li>Is the database server running?<\/li><li>Does the database exist, and have you entered the correct database name?<\/li><li>Have you entered the correct username and password?<\/li><li>Have you entered the correct database hostname?<\/li><\/ul>'",100],",",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",["T_CONSTANT_ENCAPSED_STRING","'%error'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$e",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getMessage",100],"(",")",")",")",")",";",["T_WHITESPACE","\n        ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_STRING","FALSE",101],";",["T_WHITESPACE","\n      ",101],"}",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n    ",103],["T_RETURN","return",104],["T_WHITESPACE"," ",104],["T_STRING","TRUE",104],";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n",105],"}",["T_WHITESPACE","\n",107]]
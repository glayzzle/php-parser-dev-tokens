[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","pgsql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Query",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Insert",6],["T_WHITESPACE"," ",6],["T_AS","as",6],["T_WHITESPACE"," ",6],["T_STRING","QueryInsert",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * @ingroup database\n * @{\n *\/",8],["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * PostgreSQL implementation of \\Drupal\\Core\\Database\\Query\\Insert.\n *\/",13],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","Insert",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","QueryInsert",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","execute",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_IF","if",19],["T_WHITESPACE"," ",19],"(","!",["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","preExecute",19],"(",")",")",["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n      ",19],["T_RETURN","return",20],["T_WHITESPACE"," ",20],["T_STRING","NULL",20],";",["T_WHITESPACE","\n    ",20],"}",["T_WHITESPACE","\n\n    ",21],["T_VARIABLE","$stmt",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","connection",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","prepareQuery",23],"(",["T_STRING_CAST","(string)",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],")",";",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/\/ Fetch the list of blobs and sequences used on that table.\n",25],["T_WHITESPACE","    ",26],["T_VARIABLE","$table_information",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","connection",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","schema",26],"(",")",["T_OBJECT_OPERATOR","->",26],["T_STRING","queryTableInformation",26],"(",["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","table",26],")",";",["T_WHITESPACE","\n\n    ",26],["T_VARIABLE","$max_placeholder",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","0",28],";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$blobs",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$blob_count",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_LNUMBER","0",30],";",["T_WHITESPACE","\n    ",30],["T_FOREACH","foreach",31],["T_WHITESPACE"," ",31],"(",["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","insertValues",31],["T_WHITESPACE"," ",31],["T_AS","as",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$insert_values",31],")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n      ",31],["T_FOREACH","foreach",32],["T_WHITESPACE"," ",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","insertFields",32],["T_WHITESPACE"," ",32],["T_AS","as",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$idx",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$field",32],")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n        ",32],["T_IF","if",33],["T_WHITESPACE"," ",33],"(",["T_ISSET","isset",33],"(",["T_VARIABLE","$table_information",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","blob_fields",33],"[",["T_VARIABLE","$field",33],"]",")",")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n          ",33],["T_VARIABLE","$blobs",34],"[",["T_VARIABLE","$blob_count",34],"]",["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","fopen",34],"(",["T_CONSTANT_ENCAPSED_STRING","'php:\/\/memory'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'a'",34],")",";",["T_WHITESPACE","\n          ",34],["T_STRING","fwrite",35],"(",["T_VARIABLE","$blobs",35],"[",["T_VARIABLE","$blob_count",35],"]",",",["T_WHITESPACE"," ",35],["T_VARIABLE","$insert_values",35],"[",["T_VARIABLE","$idx",35],"]",")",";",["T_WHITESPACE","\n          ",35],["T_STRING","rewind",36],"(",["T_VARIABLE","$blobs",36],"[",["T_VARIABLE","$blob_count",36],"]",")",";",["T_WHITESPACE","\n\n          ",36],["T_VARIABLE","$stmt",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","bindParam",38],"(",["T_CONSTANT_ENCAPSED_STRING","':db_insert_placeholder_'",38],["T_WHITESPACE"," ",38],".",["T_WHITESPACE"," ",38],["T_VARIABLE","$max_placeholder",38],["T_INC","++",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$blobs",38],"[",["T_VARIABLE","$blob_count",38],"]",",",["T_WHITESPACE"," ",38],["T_NS_SEPARATOR","\\",38],["T_STRING","PDO",38],["T_DOUBLE_COLON","::",38],["T_STRING","PARAM_LOB",38],")",";",["T_WHITESPACE","\n\n          ",38],["T_COMMENT","\/\/ Pre-increment is faster in PHP than increment.\n",40],["T_WHITESPACE","          ",41],["T_INC","++",41],["T_VARIABLE","$blob_count",41],";",["T_WHITESPACE","\n        ",41],"}",["T_WHITESPACE","\n        ",42],["T_ELSE","else",43],["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n          ",43],["T_VARIABLE","$stmt",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","bindParam",44],"(",["T_CONSTANT_ENCAPSED_STRING","':db_insert_placeholder_'",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_VARIABLE","$max_placeholder",44],["T_INC","++",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$insert_values",44],"[",["T_VARIABLE","$idx",44],"]",")",";",["T_WHITESPACE","\n        ",44],"}",["T_WHITESPACE","\n      ",45],"}",["T_WHITESPACE","\n      ",46],["T_COMMENT","\/\/ Check if values for a serial field has been passed.\n",47],["T_WHITESPACE","      ",48],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_EMPTY","empty",48],"(",["T_VARIABLE","$table_information",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","serial_fields",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_FOREACH","foreach",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$table_information",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","serial_fields",49],["T_WHITESPACE"," ",49],["T_AS","as",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$index",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$serial_field",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n          ",49],["T_VARIABLE","$serial_key",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_STRING","array_search",50],"(",["T_VARIABLE","$serial_field",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","insertFields",50],")",";",["T_WHITESPACE","\n          ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$serial_key",51],["T_WHITESPACE"," ",51],["T_IS_NOT_IDENTICAL","!==",51],["T_WHITESPACE"," ",51],["T_STRING","FALSE",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n            ",51],["T_VARIABLE","$serial_value",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$insert_values",52],"[",["T_VARIABLE","$serial_key",52],"]",";",["T_WHITESPACE","\n\n            ",52],["T_COMMENT","\/\/ Force $last_insert_id to the specified value. This is only done\n",54],["T_WHITESPACE","            ",55],["T_COMMENT","\/\/ if $index is 0.\n",55],["T_WHITESPACE","            ",56],["T_IF","if",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$index",56],["T_WHITESPACE"," ",56],["T_IS_EQUAL","==",56],["T_WHITESPACE"," ",56],["T_LNUMBER","0",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n              ",56],["T_VARIABLE","$last_insert_id",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_VARIABLE","$serial_value",57],";",["T_WHITESPACE","\n            ",57],"}",["T_WHITESPACE","\n            ",58],["T_COMMENT","\/\/ Sequences must be greater than or equal to 1.\n",59],["T_WHITESPACE","            ",60],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$serial_value",60],["T_WHITESPACE"," ",60],["T_IS_IDENTICAL","===",60],["T_WHITESPACE"," ",60],["T_STRING","NULL",60],["T_WHITESPACE"," ",60],["T_BOOLEAN_OR","||",60],["T_WHITESPACE"," ",60],"!",["T_VARIABLE","$serial_value",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n              ",60],["T_VARIABLE","$serial_value",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],";",["T_WHITESPACE","\n            ",61],"}",["T_WHITESPACE","\n            ",62],["T_COMMENT","\/\/ Set the sequence to the bigger value of either the passed\n",63],["T_WHITESPACE","            ",64],["T_COMMENT","\/\/ value or the max value of the column. It can happen that another\n",64],["T_WHITESPACE","            ",65],["T_COMMENT","\/\/ thread calls nextval() which could lead to a serial number being\n",65],["T_WHITESPACE","            ",66],["T_COMMENT","\/\/ used twice. However, trying to insert a value into a serial\n",66],["T_WHITESPACE","            ",67],["T_COMMENT","\/\/ column should only be done in very rare cases and is not thread\n",67],["T_WHITESPACE","            ",68],["T_COMMENT","\/\/ safe by definition.\n",68],["T_WHITESPACE","            ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","connection",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","query",69],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT setval('\"",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$table_information",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","sequences",69],"[",["T_VARIABLE","$index",69],"]",["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"', GREATEST(MAX(\"",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$serial_field",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"), :serial_value)) FROM {\"",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","table",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","\"}\"",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","':serial_value'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_INT_CAST","(int)",69],["T_VARIABLE","$serial_value",69],")",")",";",["T_WHITESPACE","\n          ",69],"}",["T_WHITESPACE","\n        ",70],"}",["T_WHITESPACE","\n      ",71],"}",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n    ",73],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_EMPTY","empty",74],"(",["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","fromQuery",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_COMMENT","\/\/ bindParam stores only a reference to the variable that is followed when\n",75],["T_WHITESPACE","      ",76],["T_COMMENT","\/\/ the statement is executed. We pass $arguments[$key] instead of $value\n",76],["T_WHITESPACE","      ",77],["T_COMMENT","\/\/ because the second argument to bindParam is passed by reference and\n",77],["T_WHITESPACE","      ",78],["T_COMMENT","\/\/ the foreach statement assigns the element to the existing reference.\n",78],["T_WHITESPACE","      ",79],["T_VARIABLE","$arguments",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","fromQuery",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getArguments",79],"(",")",";",["T_WHITESPACE","\n      ",79],["T_FOREACH","foreach",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$arguments",80],["T_WHITESPACE"," ",80],["T_AS","as",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$key",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$value",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$stmt",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","bindParam",81],"(",["T_VARIABLE","$key",81],",",["T_WHITESPACE"," ",81],["T_VARIABLE","$arguments",81],"[",["T_VARIABLE","$key",81],"]",")",";",["T_WHITESPACE","\n      ",81],"}",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ PostgreSQL requires the table name to be specified explicitly\n",85],["T_WHITESPACE","    ",86],["T_COMMENT","\/\/ when requesting the last insert ID, so we pass that in via\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ the options array.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$options",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","queryOptions",88],";",["T_WHITESPACE","\n\n    ",88],["T_IF","if",90],["T_WHITESPACE"," ",90],"(","!",["T_EMPTY","empty",90],"(",["T_VARIABLE","$table_information",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","sequences",90],")",")",["T_WHITESPACE"," ",90],"{",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$options",91],"[",["T_CONSTANT_ENCAPSED_STRING","'sequence_name'",91],"]",["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$table_information",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","sequences",91],"[",["T_LNUMBER","0",91],"]",";",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n    ",92],["T_COMMENT","\/\/ If there are no sequences then we can't get a last insert id.\n",93],["T_WHITESPACE","    ",94],["T_ELSEIF","elseif",94],["T_WHITESPACE"," ",94],"(",["T_VARIABLE","$options",94],"[",["T_CONSTANT_ENCAPSED_STRING","'return'",94],"]",["T_WHITESPACE"," ",94],["T_IS_EQUAL","==",94],["T_WHITESPACE"," ",94],["T_STRING","Database",94],["T_DOUBLE_COLON","::",94],["T_STRING","RETURN_INSERT_ID",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$options",95],"[",["T_CONSTANT_ENCAPSED_STRING","'return'",95],"]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","Database",95],["T_DOUBLE_COLON","::",95],["T_STRING","RETURN_NULL",95],";",["T_WHITESPACE","\n    ",95],"}",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Create a savepoint so we can rollback a failed query. This is so we can\n",98],["T_WHITESPACE","    ",99],["T_COMMENT","\/\/ mimic MySQL and SQLite transactions which don't fail if a single query\n",99],["T_WHITESPACE","    ",100],["T_COMMENT","\/\/ fails. This is important for tables that are created on demand. For\n",100],["T_WHITESPACE","    ",101],["T_COMMENT","\/\/ example, \\Drupal\\Core\\Cache\\DatabaseBackend.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","connection",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","addSavepoint",102],"(",")",";",["T_WHITESPACE","\n    ",102],["T_TRY","try",103],["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_COMMENT","\/\/ Only use the returned last_insert_id if it is not already set.\n",104],["T_WHITESPACE","      ",105],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_EMPTY","empty",105],"(",["T_VARIABLE","$last_insert_id",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n        ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","connection",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","query",106],"(",["T_VARIABLE","$stmt",106],",",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",",",["T_WHITESPACE"," ",106],["T_VARIABLE","$options",106],")",";",["T_WHITESPACE","\n      ",106],"}",["T_WHITESPACE","\n      ",107],["T_ELSE","else",108],["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n        ",108],["T_VARIABLE","$last_insert_id",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","connection",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","query",109],"(",["T_VARIABLE","$stmt",109],",",["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",")",",",["T_WHITESPACE"," ",109],["T_VARIABLE","$options",109],")",";",["T_WHITESPACE","\n      ",109],"}",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","connection",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","releaseSavepoint",111],"(",")",";",["T_WHITESPACE","\n    ",111],"}",["T_WHITESPACE","\n    ",112],["T_CATCH","catch",113],["T_WHITESPACE"," ",113],"(",["T_NS_SEPARATOR","\\",113],["T_STRING","Exception",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$e",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","connection",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","rollbackSavepoint",114],"(",")",";",["T_WHITESPACE","\n      ",114],["T_THROW","throw",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$e",115],";",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n\n    ",116],["T_COMMENT","\/\/ Re-initialize the values array so that we can re-use this query.\n",118],["T_WHITESPACE","    ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","insertValues",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",")",";",["T_WHITESPACE","\n\n    ",119],["T_RETURN","return",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$last_insert_id",121],";",["T_WHITESPACE","\n  ",121],"}",["T_WHITESPACE","\n\n  ",122],["T_PUBLIC","public",124],["T_WHITESPACE"," ",124],["T_FUNCTION","function",124],["T_WHITESPACE"," ",124],["T_STRING","__toString",124],"(",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n    ",124],["T_COMMENT","\/\/ Create a sanitized comment string to prepend to the query.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$comments",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","connection",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","makeComment",126],"(",["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","comments",126],")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Default fields are always placed first for consistency.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$insert_fields",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_STRING","array_merge",129],"(",["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","defaultFields",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","insertFields",129],")",";",["T_WHITESPACE","\n\n    ",129],["T_VARIABLE","$insert_fields",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_STRING","array_map",131],"(",["T_FUNCTION","function",131],"(",["T_VARIABLE","$f",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE"," ",131],["T_RETURN","return",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","connection",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","escapeField",131],"(",["T_VARIABLE","$f",131],")",";",["T_WHITESPACE"," ",131],"}",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$insert_fields",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ If we're selecting from a SelectQuery, finish building the query and\n",133],["T_WHITESPACE","    ",134],["T_COMMENT","\/\/ pass it back, as any remaining options are irrelevant.\n",134],["T_WHITESPACE","    ",135],["T_IF","if",135],["T_WHITESPACE"," ",135],"(","!",["T_EMPTY","empty",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","fromQuery",135],")",")",["T_WHITESPACE"," ",135],"{",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$insert_fields_string",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$insert_fields",136],["T_WHITESPACE"," ",136],"?",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","' ('",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_STRING","implode",136],"(",["T_CONSTANT_ENCAPSED_STRING","', '",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$insert_fields",136],")",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","') '",136],["T_WHITESPACE"," ",136],":",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","' '",136],";",["T_WHITESPACE","\n      ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$comments",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO {'",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","table",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'}'",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$insert_fields_string",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","fromQuery",137],";",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n\n    ",138],["T_VARIABLE","$query",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$comments",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'INSERT INTO {'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","table",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'} ('",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_STRING","implode",140],"(",["T_CONSTANT_ENCAPSED_STRING","', '",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$insert_fields",140],")",["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","') VALUES '",140],";",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$values",142],["T_WHITESPACE"," ",142],"=",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getInsertPlaceholderFragment",142],"(",["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","insertValues",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","defaultFields",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$query",143],["T_WHITESPACE"," ",143],["T_CONCAT_EQUAL",".=",143],["T_WHITESPACE"," ",143],["T_STRING","implode",143],"(",["T_CONSTANT_ENCAPSED_STRING","', '",143],",",["T_WHITESPACE"," ",143],["T_VARIABLE","$values",143],")",";",["T_WHITESPACE","\n\n    ",143],["T_RETURN","return",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$query",145],";",["T_WHITESPACE","\n  ",145],"}",["T_WHITESPACE","\n\n",146],"}",["T_WHITESPACE","\n",148]]
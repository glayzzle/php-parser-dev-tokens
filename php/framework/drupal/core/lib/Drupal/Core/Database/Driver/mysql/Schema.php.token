[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Database",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Driver",3],["T_NS_SEPARATOR","\\",3],["T_STRING","mysql",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Query",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Condition",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","SchemaException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","SchemaObjectExistsException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Database",8],["T_NS_SEPARATOR","\\",8],["T_STRING","SchemaObjectDoesNotExistException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Database",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Schema",9],["T_WHITESPACE"," ",9],["T_AS","as",9],["T_WHITESPACE"," ",9],["T_STRING","DatabaseSchema",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Utility",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Unicode",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * @addtogroup schemaapi\n * @{\n *\/",12],["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * MySQL implementation of \\Drupal\\Core\\Database\\Schema.\n *\/",17],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","Schema",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","DatabaseSchema",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Maximum length of a table comment in MySQL.\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_CONST","const",25],["T_WHITESPACE"," ",25],["T_STRING","COMMENT_MAX_TABLE",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_LNUMBER","60",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Maximum length of a column comment in MySQL.\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_CONST","const",30],["T_WHITESPACE"," ",30],["T_STRING","COMMENT_MAX_COLUMN",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_LNUMBER","255",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * @var array\n   *   List of MySQL string types.\n   *\/",32],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$mysqlStringTypes",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n    ",36],["T_CONSTANT_ENCAPSED_STRING","'VARCHAR'",37],",",["T_WHITESPACE","\n    ",37],["T_CONSTANT_ENCAPSED_STRING","'CHAR'",38],",",["T_WHITESPACE","\n    ",38],["T_CONSTANT_ENCAPSED_STRING","'TINYTEXT'",39],",",["T_WHITESPACE","\n    ",39],["T_CONSTANT_ENCAPSED_STRING","'MEDIUMTEXT'",40],",",["T_WHITESPACE","\n    ",40],["T_CONSTANT_ENCAPSED_STRING","'LONGTEXT'",41],",",["T_WHITESPACE","\n    ",41],["T_CONSTANT_ENCAPSED_STRING","'TEXT'",42],",",["T_WHITESPACE","\n  ",42],")",";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Get information about the table and database name from the prefix.\n   *\n   * @return\n   *   A keyed array with information about the database, table name and prefix.\n   *\/",45],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","getPrefixInfo",51],"(",["T_VARIABLE","$table",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'default'",51],",",["T_WHITESPACE"," ",51],["T_VARIABLE","$add_prefix",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_STRING","TRUE",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$info",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'prefix'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","connection",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","tablePrefix",52],"(",["T_VARIABLE","$table",52],")",")",";",["T_WHITESPACE","\n    ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$add_prefix",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$table",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$info",54],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",54],"]",["T_WHITESPACE"," ",54],".",["T_WHITESPACE"," ",54],["T_VARIABLE","$table",54],";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n    ",55],["T_IF","if",56],["T_WHITESPACE"," ",56],"(","(",["T_VARIABLE","$pos",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","strpos",56],"(",["T_VARIABLE","$table",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'.'",56],")",")",["T_WHITESPACE"," ",56],["T_IS_NOT_IDENTICAL","!==",56],["T_WHITESPACE"," ",56],["T_STRING","FALSE",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$info",57],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","substr",57],"(",["T_VARIABLE","$table",57],",",["T_WHITESPACE"," ",57],["T_LNUMBER","0",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$pos",57],")",";",["T_WHITESPACE","\n      ",57],["T_VARIABLE","$info",58],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",58],"]",["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","substr",58],"(",["T_VARIABLE","$table",58],",",["T_WHITESPACE"," ",58],["T_INC","++",58],["T_VARIABLE","$pos",58],")",";",["T_WHITESPACE","\n    ",58],"}",["T_WHITESPACE","\n    ",59],["T_ELSE","else",60],["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$info",61],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",61],"]",["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","connection",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getConnectionOptions",61],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'database'",61],"]",";",["T_WHITESPACE","\n      ",61],["T_VARIABLE","$info",62],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",62],"]",["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$table",62],";",["T_WHITESPACE","\n    ",62],"}",["T_WHITESPACE","\n    ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$info",64],";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Build a condition to match a table name against a standard information_schema.\n   *\n   * MySQL uses databases like schemas rather than catalogs so when we build\n   * a condition to query the information_schema.tables, we set the default\n   * database as the schema unless specified otherwise, and exclude table_catalog\n   * from the condition criteria.\n   *\/",67],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","buildTableNameCondition",75],"(",["T_VARIABLE","$table_name",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$operator",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'='",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$add_prefix",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","TRUE",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$table_info",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getPrefixInfo",76],"(",["T_VARIABLE","$table_name",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$add_prefix",76],")",";",["T_WHITESPACE","\n\n    ",76],["T_VARIABLE","$condition",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_NEW","new",78],["T_WHITESPACE"," ",78],["T_STRING","Condition",78],"(",["T_CONSTANT_ENCAPSED_STRING","'AND'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$condition",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","condition",79],"(",["T_CONSTANT_ENCAPSED_STRING","'table_schema'",79],",",["T_WHITESPACE"," ",79],["T_VARIABLE","$table_info",79],"[",["T_CONSTANT_ENCAPSED_STRING","'database'",79],"]",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$condition",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","condition",80],"(",["T_CONSTANT_ENCAPSED_STRING","'table_name'",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$table_info",80],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",80],"]",",",["T_WHITESPACE"," ",80],["T_VARIABLE","$operator",80],")",";",["T_WHITESPACE","\n    ",80],["T_RETURN","return",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$condition",81],";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * Generate SQL to create a new table from a Drupal schema definition.\n   *\n   * @param $name\n   *   The name of the table to create.\n   * @param $table\n   *   A Schema API table definition array.\n   * @return\n   *   An array of SQL statements to create the table.\n   *\/",84],["T_WHITESPACE","\n  ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_FUNCTION","function",94],["T_WHITESPACE"," ",94],["T_STRING","createTableSql",94],"(",["T_VARIABLE","$name",94],",",["T_WHITESPACE"," ",94],["T_VARIABLE","$table",94],")",["T_WHITESPACE"," ",94],"{",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$info",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","connection",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getConnectionOptions",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Provide defaults if needed.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$table",98],["T_WHITESPACE"," ",98],["T_PLUS_EQUAL","+=",98],["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'mysql_engine'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'InnoDB'",99],",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'mysql_character_set'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'utf8mb4'",100],",",["T_WHITESPACE","\n    ",100],")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$sql",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"CREATE TABLE {\"",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_VARIABLE","$name",103],["T_WHITESPACE"," ",103],".",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","\"} (\\n\"",103],";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Add the SQL statement for each field.\n",105],["T_WHITESPACE","    ",106],["T_FOREACH","foreach",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$table",106],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",106],"]",["T_WHITESPACE"," ",106],["T_AS","as",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$field_name",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$field",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$sql",107],["T_WHITESPACE"," ",107],["T_CONCAT_EQUAL",".=",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","createFieldSql",107],"(",["T_VARIABLE","$field_name",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","processField",107],"(",["T_VARIABLE","$field",107],")",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\", \\n\"",107],";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_COMMENT","\/\/ Process keys & indexes.\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$keys",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","createKeysSql",111],"(",["T_VARIABLE","$table",111],")",";",["T_WHITESPACE","\n    ",111],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_STRING","count",112],"(",["T_VARIABLE","$keys",112],")",")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$sql",113],["T_WHITESPACE"," ",113],["T_CONCAT_EQUAL",".=",113],["T_WHITESPACE"," ",113],["T_STRING","implode",113],"(",["T_CONSTANT_ENCAPSED_STRING","\", \\n\"",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$keys",113],")",["T_WHITESPACE"," ",113],".",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","\", \\n\"",113],";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ Remove the last comma and space.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$sql",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_STRING","substr",117],"(",["T_VARIABLE","$sql",117],",",["T_WHITESPACE"," ",117],["T_LNUMBER","0",117],",",["T_WHITESPACE"," ",117],"-",["T_LNUMBER","3",117],")",["T_WHITESPACE"," ",117],".",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","\"\\n) \"",117],";",["T_WHITESPACE","\n\n    ",117],["T_VARIABLE","$sql",119],["T_WHITESPACE"," ",119],["T_CONCAT_EQUAL",".=",119],["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'ENGINE = '",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$table",119],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_engine'",119],"]",["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","' DEFAULT CHARACTER SET '",119],["T_WHITESPACE"," ",119],".",["T_WHITESPACE"," ",119],["T_VARIABLE","$table",119],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_character_set'",119],"]",";",["T_WHITESPACE","\n    ",119],["T_COMMENT","\/\/ By default, MySQL uses the default collation for new tables, which is\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ 'utf8mb4_general_ci' for utf8mb4. If an alternate collation has been\n",121],["T_WHITESPACE","    ",122],["T_COMMENT","\/\/ set, it needs to be explicitly specified.\n",122],["T_WHITESPACE","    ",123],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Database\\Driver\\mysql\\Schema\n",123],["T_WHITESPACE","    ",124],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_EMPTY","empty",124],"(",["T_VARIABLE","$info",124],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",124],"]",")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n      ",124],["T_VARIABLE","$sql",125],["T_WHITESPACE"," ",125],["T_CONCAT_EQUAL",".=",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","' COLLATE '",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_VARIABLE","$info",125],"[",["T_CONSTANT_ENCAPSED_STRING","'collation'",125],"]",";",["T_WHITESPACE","\n    ",125],"}",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Add table comment.\n",128],["T_WHITESPACE","    ",129],["T_IF","if",129],["T_WHITESPACE"," ",129],"(","!",["T_EMPTY","empty",129],"(",["T_VARIABLE","$table",129],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",129],"]",")",")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$sql",130],["T_WHITESPACE"," ",130],["T_CONCAT_EQUAL",".=",130],["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","' COMMENT '",130],["T_WHITESPACE"," ",130],".",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","prepareComment",130],"(",["T_VARIABLE","$table",130],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",130],"]",",",["T_WHITESPACE"," ",130],["T_STRING","self",130],["T_DOUBLE_COLON","::",130],["T_STRING","COMMENT_MAX_TABLE",130],")",";",["T_WHITESPACE","\n    ",130],"}",["T_WHITESPACE","\n\n    ",131],["T_RETURN","return",133],["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_VARIABLE","$sql",133],")",";",["T_WHITESPACE","\n  ",133],"}",["T_WHITESPACE","\n\n  ",134],["T_DOC_COMMENT","\/**\n   * Create an SQL string for a field to be used in table creation or alteration.\n   *\n   * Before passing a field out of a schema definition into this function it has\n   * to be processed by _db_process_field().\n   *\n   * @param string $name\n   *   Name of the field.\n   * @param array $spec\n   *   The field specification, as per the schema data structure format.\n   *\/",136],["T_WHITESPACE","\n  ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","createFieldSql",147],"(",["T_VARIABLE","$name",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$spec",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$sql",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"`\"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_VARIABLE","$name",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"` \"",148],["T_WHITESPACE"," ",148],".",["T_WHITESPACE"," ",148],["T_VARIABLE","$spec",148],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",148],"]",";",["T_WHITESPACE","\n\n    ",148],["T_IF","if",150],["T_WHITESPACE"," ",150],"(",["T_STRING","in_array",150],"(",["T_VARIABLE","$spec",150],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",150],"]",",",["T_WHITESPACE"," ",150],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","mysqlStringTypes",150],")",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_ISSET","isset",151],"(",["T_VARIABLE","$spec",151],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",151],"]",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n        ",151],["T_VARIABLE","$sql",152],["T_WHITESPACE"," ",152],["T_CONCAT_EQUAL",".=",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'('",152],["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_VARIABLE","$spec",152],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",152],"]",["T_WHITESPACE"," ",152],".",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","')'",152],";",["T_WHITESPACE","\n      ",152],"}",["T_WHITESPACE","\n      ",153],["T_IF","if",154],["T_WHITESPACE"," ",154],"(","!",["T_EMPTY","empty",154],"(",["T_VARIABLE","$spec",154],"[",["T_CONSTANT_ENCAPSED_STRING","'binary'",154],"]",")",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n        ",154],["T_VARIABLE","$sql",155],["T_WHITESPACE"," ",155],["T_CONCAT_EQUAL",".=",155],["T_WHITESPACE"," ",155],["T_CONSTANT_ENCAPSED_STRING","' BINARY'",155],";",["T_WHITESPACE","\n      ",155],"}",["T_WHITESPACE","\n      ",156],["T_COMMENT","\/\/ Note we check for the \"type\" key here. \"mysql_type\" is VARCHAR:\n",157],["T_WHITESPACE","      ",158],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_ISSET","isset",158],"(",["T_VARIABLE","$spec",158],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",158],"]",")",["T_WHITESPACE"," ",158],["T_BOOLEAN_AND","&&",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$spec",158],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",158],"]",["T_WHITESPACE"," ",158],["T_IS_EQUAL","==",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'varchar_ascii'",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n        ",158],["T_VARIABLE","$sql",159],["T_WHITESPACE"," ",159],["T_CONCAT_EQUAL",".=",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","' CHARACTER SET ascii COLLATE ascii_general_ci'",159],";",["T_WHITESPACE","\n      ",159],"}",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n    ",161],["T_ELSEIF","elseif",162],["T_WHITESPACE"," ",162],"(",["T_ISSET","isset",162],"(",["T_VARIABLE","$spec",162],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",162],"]",")",["T_WHITESPACE"," ",162],["T_BOOLEAN_AND","&&",162],["T_WHITESPACE"," ",162],["T_ISSET","isset",162],"(",["T_VARIABLE","$spec",162],"[",["T_CONSTANT_ENCAPSED_STRING","'scale'",162],"]",")",")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$sql",163],["T_WHITESPACE"," ",163],["T_CONCAT_EQUAL",".=",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'('",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$spec",163],"[",["T_CONSTANT_ENCAPSED_STRING","'precision'",163],"]",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","', '",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$spec",163],"[",["T_CONSTANT_ENCAPSED_STRING","'scale'",163],"]",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","')'",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_IF","if",166],["T_WHITESPACE"," ",166],"(","!",["T_EMPTY","empty",166],"(",["T_VARIABLE","$spec",166],"[",["T_CONSTANT_ENCAPSED_STRING","'unsigned'",166],"]",")",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n      ",166],["T_VARIABLE","$sql",167],["T_WHITESPACE"," ",167],["T_CONCAT_EQUAL",".=",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","' unsigned'",167],";",["T_WHITESPACE","\n    ",167],"}",["T_WHITESPACE","\n\n    ",168],["T_IF","if",170],["T_WHITESPACE"," ",170],"(",["T_ISSET","isset",170],"(",["T_VARIABLE","$spec",170],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",170],"]",")",")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n      ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$spec",171],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",171],"]",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$sql",172],["T_WHITESPACE"," ",172],["T_CONCAT_EQUAL",".=",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","' NOT NULL'",172],";",["T_WHITESPACE","\n      ",172],"}",["T_WHITESPACE","\n      ",173],["T_ELSE","else",174],["T_WHITESPACE"," ",174],"{",["T_WHITESPACE","\n        ",174],["T_VARIABLE","$sql",175],["T_WHITESPACE"," ",175],["T_CONCAT_EQUAL",".=",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","' NULL'",175],";",["T_WHITESPACE","\n      ",175],"}",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_IF","if",179],["T_WHITESPACE"," ",179],"(","!",["T_EMPTY","empty",179],"(",["T_VARIABLE","$spec",179],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",179],"]",")",")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n      ",179],["T_VARIABLE","$sql",180],["T_WHITESPACE"," ",180],["T_CONCAT_EQUAL",".=",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","' auto_increment'",180],";",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n\n    ",181],["T_COMMENT","\/\/ $spec['default'] can be NULL, so we explicitly check for the key here.\n",183],["T_WHITESPACE","    ",184],["T_IF","if",184],["T_WHITESPACE"," ",184],"(",["T_STRING","array_key_exists",184],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$spec",184],")",")",["T_WHITESPACE"," ",184],"{",["T_WHITESPACE","\n      ",184],["T_VARIABLE","$sql",185],["T_WHITESPACE"," ",185],["T_CONCAT_EQUAL",".=",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","' DEFAULT '",185],["T_WHITESPACE"," ",185],".",["T_WHITESPACE"," ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","escapeDefaultValue",185],"(",["T_VARIABLE","$spec",185],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",185],"]",")",";",["T_WHITESPACE","\n    ",185],"}",["T_WHITESPACE","\n\n    ",186],["T_IF","if",188],["T_WHITESPACE"," ",188],"(",["T_EMPTY","empty",188],"(",["T_VARIABLE","$spec",188],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",188],"]",")",["T_WHITESPACE"," ",188],["T_BOOLEAN_AND","&&",188],["T_WHITESPACE"," ",188],"!",["T_ISSET","isset",188],"(",["T_VARIABLE","$spec",188],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",188],"]",")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n      ",188],["T_VARIABLE","$sql",189],["T_WHITESPACE"," ",189],["T_CONCAT_EQUAL",".=",189],["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","' DEFAULT NULL'",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_COMMENT","\/\/ Add column comment.\n",192],["T_WHITESPACE","    ",193],["T_IF","if",193],["T_WHITESPACE"," ",193],"(","!",["T_EMPTY","empty",193],"(",["T_VARIABLE","$spec",193],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",193],"]",")",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$sql",194],["T_WHITESPACE"," ",194],["T_CONCAT_EQUAL",".=",194],["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","' COMMENT '",194],["T_WHITESPACE"," ",194],".",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","prepareComment",194],"(",["T_VARIABLE","$spec",194],"[",["T_CONSTANT_ENCAPSED_STRING","'description'",194],"]",",",["T_WHITESPACE"," ",194],["T_STRING","self",194],["T_DOUBLE_COLON","::",194],["T_STRING","COMMENT_MAX_COLUMN",194],")",";",["T_WHITESPACE","\n    ",194],"}",["T_WHITESPACE","\n\n    ",195],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$sql",197],";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Set database-engine specific properties for a field.\n   *\n   * @param $field\n   *   A field description array, as specified in the schema documentation.\n   *\/",200],["T_WHITESPACE","\n  ",205],["T_PROTECTED","protected",206],["T_WHITESPACE"," ",206],["T_FUNCTION","function",206],["T_WHITESPACE"," ",206],["T_STRING","processField",206],"(",["T_VARIABLE","$field",206],")",["T_WHITESPACE"," ",206],"{",["T_WHITESPACE","\n\n    ",206],["T_IF","if",208],["T_WHITESPACE"," ",208],"(","!",["T_ISSET","isset",208],"(",["T_VARIABLE","$field",208],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",208],"]",")",")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n      ",208],["T_VARIABLE","$field",209],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'normal'",209],";",["T_WHITESPACE","\n    ",209],"}",["T_WHITESPACE","\n\n    ",210],["T_COMMENT","\/\/ Set the correct database-engine specific datatype.\n",212],["T_WHITESPACE","    ",213],["T_COMMENT","\/\/ In case one is already provided, force it to uppercase.\n",213],["T_WHITESPACE","    ",214],["T_IF","if",214],["T_WHITESPACE"," ",214],"(",["T_ISSET","isset",214],"(",["T_VARIABLE","$field",214],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",214],"]",")",")",["T_WHITESPACE"," ",214],"{",["T_WHITESPACE","\n      ",214],["T_VARIABLE","$field",215],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",215],"]",["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","Unicode",215],["T_DOUBLE_COLON","::",215],["T_STRING","strtoupper",215],"(",["T_VARIABLE","$field",215],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",215],"]",")",";",["T_WHITESPACE","\n    ",215],"}",["T_WHITESPACE","\n    ",216],["T_ELSE","else",217],["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n      ",217],["T_VARIABLE","$map",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getFieldTypeMap",218],"(",")",";",["T_WHITESPACE","\n      ",218],["T_VARIABLE","$field",219],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",219],"]",["T_WHITESPACE"," ",219],"=",["T_WHITESPACE"," ",219],["T_VARIABLE","$map",219],"[",["T_VARIABLE","$field",219],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",219],"]",["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","':'",219],["T_WHITESPACE"," ",219],".",["T_WHITESPACE"," ",219],["T_VARIABLE","$field",219],"[",["T_CONSTANT_ENCAPSED_STRING","'size'",219],"]","]",";",["T_WHITESPACE","\n    ",219],"}",["T_WHITESPACE","\n\n    ",220],["T_IF","if",222],["T_WHITESPACE"," ",222],"(",["T_ISSET","isset",222],"(",["T_VARIABLE","$field",222],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",222],"]",")",["T_WHITESPACE"," ",222],["T_BOOLEAN_AND","&&",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$field",222],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",222],"]",["T_WHITESPACE"," ",222],["T_IS_EQUAL","==",222],["T_WHITESPACE"," ",222],["T_CONSTANT_ENCAPSED_STRING","'serial'",222],")",["T_WHITESPACE"," ",222],"{",["T_WHITESPACE","\n      ",222],["T_VARIABLE","$field",223],"[",["T_CONSTANT_ENCAPSED_STRING","'auto_increment'",223],"]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_STRING","TRUE",223],";",["T_WHITESPACE","\n    ",223],"}",["T_WHITESPACE","\n\n    ",224],["T_RETURN","return",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$field",226],";",["T_WHITESPACE","\n  ",226],"}",["T_WHITESPACE","\n\n  ",227],["T_PUBLIC","public",229],["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","getFieldTypeMap",229],"(",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n    ",229],["T_COMMENT","\/\/ Put :normal last so it gets preserved by array_flip. This makes\n",230],["T_WHITESPACE","    ",231],["T_COMMENT","\/\/ it much easier for modules (such as schema.module) to map\n",231],["T_WHITESPACE","    ",232],["T_COMMENT","\/\/ database types back into schema types.\n",232],["T_WHITESPACE","    ",233],["T_COMMENT","\/\/ $map does not use drupal_static as its value never changes.\n",233],["T_WHITESPACE","    ",234],["T_STATIC","static",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$map",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",["T_WHITESPACE","\n      ",234],["T_CONSTANT_ENCAPSED_STRING","'varchar_ascii:normal'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'VARCHAR'",235],",",["T_WHITESPACE","\n\n      ",235],["T_CONSTANT_ENCAPSED_STRING","'varchar:normal'",237],["T_WHITESPACE","  ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'VARCHAR'",237],",",["T_WHITESPACE","\n      ",237],["T_CONSTANT_ENCAPSED_STRING","'char:normal'",238],["T_WHITESPACE","     ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'CHAR'",238],",",["T_WHITESPACE","\n\n      ",238],["T_CONSTANT_ENCAPSED_STRING","'text:tiny'",240],["T_WHITESPACE","       ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'TINYTEXT'",240],",",["T_WHITESPACE","\n      ",240],["T_CONSTANT_ENCAPSED_STRING","'text:small'",241],["T_WHITESPACE","      ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_CONSTANT_ENCAPSED_STRING","'TINYTEXT'",241],",",["T_WHITESPACE","\n      ",241],["T_CONSTANT_ENCAPSED_STRING","'text:medium'",242],["T_WHITESPACE","     ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'MEDIUMTEXT'",242],",",["T_WHITESPACE","\n      ",242],["T_CONSTANT_ENCAPSED_STRING","'text:big'",243],["T_WHITESPACE","        ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","'LONGTEXT'",243],",",["T_WHITESPACE","\n      ",243],["T_CONSTANT_ENCAPSED_STRING","'text:normal'",244],["T_WHITESPACE","     ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'TEXT'",244],",",["T_WHITESPACE","\n\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'serial:tiny'",246],["T_WHITESPACE","     ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'TINYINT'",246],",",["T_WHITESPACE","\n      ",246],["T_CONSTANT_ENCAPSED_STRING","'serial:small'",247],["T_WHITESPACE","    ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'SMALLINT'",247],",",["T_WHITESPACE","\n      ",247],["T_CONSTANT_ENCAPSED_STRING","'serial:medium'",248],["T_WHITESPACE","   ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'MEDIUMINT'",248],",",["T_WHITESPACE","\n      ",248],["T_CONSTANT_ENCAPSED_STRING","'serial:big'",249],["T_WHITESPACE","      ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'BIGINT'",249],",",["T_WHITESPACE","\n      ",249],["T_CONSTANT_ENCAPSED_STRING","'serial:normal'",250],["T_WHITESPACE","   ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'INT'",250],",",["T_WHITESPACE","\n\n      ",250],["T_CONSTANT_ENCAPSED_STRING","'int:tiny'",252],["T_WHITESPACE","        ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'TINYINT'",252],",",["T_WHITESPACE","\n      ",252],["T_CONSTANT_ENCAPSED_STRING","'int:small'",253],["T_WHITESPACE","       ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'SMALLINT'",253],",",["T_WHITESPACE","\n      ",253],["T_CONSTANT_ENCAPSED_STRING","'int:medium'",254],["T_WHITESPACE","      ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'MEDIUMINT'",254],",",["T_WHITESPACE","\n      ",254],["T_CONSTANT_ENCAPSED_STRING","'int:big'",255],["T_WHITESPACE","         ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'BIGINT'",255],",",["T_WHITESPACE","\n      ",255],["T_CONSTANT_ENCAPSED_STRING","'int:normal'",256],["T_WHITESPACE","      ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'INT'",256],",",["T_WHITESPACE","\n\n      ",256],["T_CONSTANT_ENCAPSED_STRING","'float:tiny'",258],["T_WHITESPACE","      ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'FLOAT'",258],",",["T_WHITESPACE","\n      ",258],["T_CONSTANT_ENCAPSED_STRING","'float:small'",259],["T_WHITESPACE","     ",259],["T_DOUBLE_ARROW","=>",259],["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'FLOAT'",259],",",["T_WHITESPACE","\n      ",259],["T_CONSTANT_ENCAPSED_STRING","'float:medium'",260],["T_WHITESPACE","    ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'FLOAT'",260],",",["T_WHITESPACE","\n      ",260],["T_CONSTANT_ENCAPSED_STRING","'float:big'",261],["T_WHITESPACE","       ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'DOUBLE'",261],",",["T_WHITESPACE","\n      ",261],["T_CONSTANT_ENCAPSED_STRING","'float:normal'",262],["T_WHITESPACE","    ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'FLOAT'",262],",",["T_WHITESPACE","\n\n      ",262],["T_CONSTANT_ENCAPSED_STRING","'numeric:normal'",264],["T_WHITESPACE","  ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_CONSTANT_ENCAPSED_STRING","'DECIMAL'",264],",",["T_WHITESPACE","\n\n      ",264],["T_CONSTANT_ENCAPSED_STRING","'blob:big'",266],["T_WHITESPACE","        ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'LONGBLOB'",266],",",["T_WHITESPACE","\n      ",266],["T_CONSTANT_ENCAPSED_STRING","'blob:normal'",267],["T_WHITESPACE","     ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'BLOB'",267],",",["T_WHITESPACE","\n    ",267],")",";",["T_WHITESPACE","\n    ",268],["T_RETURN","return",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$map",269],";",["T_WHITESPACE","\n  ",269],"}",["T_WHITESPACE","\n\n  ",270],["T_PROTECTED","protected",272],["T_WHITESPACE"," ",272],["T_FUNCTION","function",272],["T_WHITESPACE"," ",272],["T_STRING","createKeysSql",272],"(",["T_VARIABLE","$spec",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$keys",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_ARRAY","array",273],"(",")",";",["T_WHITESPACE","\n\n    ",273],["T_IF","if",275],["T_WHITESPACE"," ",275],"(","!",["T_EMPTY","empty",275],"(",["T_VARIABLE","$spec",275],"[",["T_CONSTANT_ENCAPSED_STRING","'primary key'",275],"]",")",")",["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$keys",276],"[","]",["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY KEY ('",276],["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","createKeySql",276],"(",["T_VARIABLE","$spec",276],"[",["T_CONSTANT_ENCAPSED_STRING","'primary key'",276],"]",")",["T_WHITESPACE"," ",276],".",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","')'",276],";",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n    ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(","!",["T_EMPTY","empty",278],"(",["T_VARIABLE","$spec",278],"[",["T_CONSTANT_ENCAPSED_STRING","'unique keys'",278],"]",")",")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n      ",278],["T_FOREACH","foreach",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$spec",279],"[",["T_CONSTANT_ENCAPSED_STRING","'unique keys'",279],"]",["T_WHITESPACE"," ",279],["T_AS","as",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$key",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$fields",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$keys",280],"[","]",["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'UNIQUE KEY `'",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$key",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'` ('",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","createKeySql",280],"(",["T_VARIABLE","$fields",280],")",["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","')'",280],";",["T_WHITESPACE","\n      ",280],"}",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n    ",282],["T_IF","if",283],["T_WHITESPACE"," ",283],"(","!",["T_EMPTY","empty",283],"(",["T_VARIABLE","$spec",283],"[",["T_CONSTANT_ENCAPSED_STRING","'indexes'",283],"]",")",")",["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n      ",283],["T_VARIABLE","$indexes",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","getNormalizedIndexes",284],"(",["T_VARIABLE","$spec",284],")",";",["T_WHITESPACE","\n      ",284],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$indexes",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$index",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$fields",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$keys",286],"[","]",["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'INDEX `'",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$index",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'` ('",286],["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","createKeySql",286],"(",["T_VARIABLE","$fields",286],")",["T_WHITESPACE"," ",286],".",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","')'",286],";",["T_WHITESPACE","\n      ",286],"}",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n\n    ",288],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$keys",290],";",["T_WHITESPACE","\n  ",290],"}",["T_WHITESPACE","\n\n  ",291],["T_DOC_COMMENT","\/**\n   * Gets normalized indexes from a table specification.\n   *\n   * Shortens indexes to 191 characters if they apply to utf8mb4-encoded\n   * fields, in order to comply with the InnoDB index limitation of 756 bytes.\n   *\n   * @param array $spec\n   *   The table specification.\n   *\n   * @return array\n   *   List of shortened indexes.\n   *\n   * @throws \\Drupal\\Core\\Database\\SchemaException\n   *   Thrown if field specification is missing.\n   *\/",293],["T_WHITESPACE","\n  ",307],["T_PROTECTED","protected",308],["T_WHITESPACE"," ",308],["T_FUNCTION","function",308],["T_WHITESPACE"," ",308],["T_STRING","getNormalizedIndexes",308],"(",["T_ARRAY","array",308],["T_WHITESPACE"," ",308],["T_VARIABLE","$spec",308],")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$indexes",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_ISSET","isset",309],"(",["T_VARIABLE","$spec",309],"[",["T_CONSTANT_ENCAPSED_STRING","'indexes'",309],"]",")",["T_WHITESPACE"," ",309],"?",["T_WHITESPACE"," ",309],["T_VARIABLE","$spec",309],"[",["T_CONSTANT_ENCAPSED_STRING","'indexes'",309],"]",["T_WHITESPACE"," ",309],":",["T_WHITESPACE"," ",309],"[","]",";",["T_WHITESPACE","\n    ",309],["T_FOREACH","foreach",310],["T_WHITESPACE"," ",310],"(",["T_VARIABLE","$indexes",310],["T_WHITESPACE"," ",310],["T_AS","as",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$index_name",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$index_fields",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n      ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$index_fields",311],["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$index_key",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$index_field",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n        ",311],["T_COMMENT","\/\/ Get the name of the field from the index specification.\n",312],["T_WHITESPACE","        ",313],["T_VARIABLE","$field_name",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_STRING","is_array",313],"(",["T_VARIABLE","$index_field",313],")",["T_WHITESPACE"," ",313],"?",["T_WHITESPACE"," ",313],["T_VARIABLE","$index_field",313],"[",["T_LNUMBER","0",313],"]",["T_WHITESPACE"," ",313],":",["T_WHITESPACE"," ",313],["T_VARIABLE","$index_field",313],";",["T_WHITESPACE","\n        ",313],["T_COMMENT","\/\/ Check whether the field is defined in the table specification.\n",314],["T_WHITESPACE","        ",315],["T_IF","if",315],["T_WHITESPACE"," ",315],"(",["T_ISSET","isset",315],"(",["T_VARIABLE","$spec",315],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",315],"]","[",["T_VARIABLE","$field_name",315],"]",")",")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n          ",315],["T_COMMENT","\/\/ Get the MySQL type from the processed field.\n",316],["T_WHITESPACE","          ",317],["T_VARIABLE","$mysql_field",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","processField",317],"(",["T_VARIABLE","$spec",317],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",317],"]","[",["T_VARIABLE","$field_name",317],"]",")",";",["T_WHITESPACE","\n          ",317],["T_IF","if",318],["T_WHITESPACE"," ",318],"(",["T_STRING","in_array",318],"(",["T_VARIABLE","$mysql_field",318],"[",["T_CONSTANT_ENCAPSED_STRING","'mysql_type'",318],"]",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","mysqlStringTypes",318],")",")",["T_WHITESPACE"," ",318],"{",["T_WHITESPACE","\n            ",318],["T_COMMENT","\/\/ Check whether we need to shorten the index.\n",319],["T_WHITESPACE","            ",320],["T_IF","if",320],["T_WHITESPACE"," ",320],"(","(","!",["T_ISSET","isset",320],"(",["T_VARIABLE","$mysql_field",320],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",320],"]",")",["T_WHITESPACE"," ",320],["T_BOOLEAN_OR","||",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$mysql_field",320],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",320],"]",["T_WHITESPACE"," ",320],["T_IS_NOT_EQUAL","!=",320],["T_WHITESPACE"," ",320],["T_CONSTANT_ENCAPSED_STRING","'varchar_ascii'",320],")",["T_WHITESPACE"," ",320],["T_BOOLEAN_AND","&&",320],["T_WHITESPACE"," ",320],"(","!",["T_ISSET","isset",320],"(",["T_VARIABLE","$mysql_field",320],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",320],"]",")",["T_WHITESPACE"," ",320],["T_BOOLEAN_OR","||",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$mysql_field",320],"[",["T_CONSTANT_ENCAPSED_STRING","'length'",320],"]",["T_WHITESPACE"," ",320],">",["T_WHITESPACE"," ",320],["T_LNUMBER","191",320],")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n              ",320],["T_COMMENT","\/\/ Limit the index length to 191 characters.\n",321],["T_WHITESPACE","              ",322],["T_VARIABLE","$this",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","shortenIndex",322],"(",["T_VARIABLE","$indexes",322],"[",["T_VARIABLE","$index_name",322],"]","[",["T_VARIABLE","$index_key",322],"]",")",";",["T_WHITESPACE","\n            ",322],"}",["T_WHITESPACE","\n          ",323],"}",["T_WHITESPACE","\n        ",324],"}",["T_WHITESPACE","\n        ",325],["T_ELSE","else",326],["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n          ",326],["T_THROW","throw",327],["T_WHITESPACE"," ",327],["T_NEW","new",327],["T_WHITESPACE"," ",327],["T_STRING","SchemaException",327],"(","\"",["T_ENCAPSED_AND_WHITESPACE","MySQL needs the '",327],["T_VARIABLE","$field_name",327],["T_ENCAPSED_AND_WHITESPACE","' field specification in order to normalize the '",327],["T_VARIABLE","$index_name",327],["T_ENCAPSED_AND_WHITESPACE","' index",327],"\"",")",";",["T_WHITESPACE","\n        ",327],"}",["T_WHITESPACE","\n      ",328],"}",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n    ",330],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_VARIABLE","$indexes",331],";",["T_WHITESPACE","\n  ",331],"}",["T_WHITESPACE","\n\n  ",332],["T_DOC_COMMENT","\/**\n   * Helper function for normalizeIndexes().\n   *\n   * Shortens an index to 191 characters.\n   *\n   * @param array $index\n   *   The index array to be used in createKeySql.\n   *\n   * @see Drupal\\Core\\Database\\Driver\\mysql\\Schema::createKeySql()\n   * @see Drupal\\Core\\Database\\Driver\\mysql\\Schema::normalizeIndexes()\n   *\/",334],["T_WHITESPACE","\n  ",344],["T_PROTECTED","protected",345],["T_WHITESPACE"," ",345],["T_FUNCTION","function",345],["T_WHITESPACE"," ",345],["T_STRING","shortenIndex",345],"(","&",["T_VARIABLE","$index",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n    ",345],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_STRING","is_array",346],"(",["T_VARIABLE","$index",346],")",")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n      ",346],["T_IF","if",347],["T_WHITESPACE"," ",347],"(",["T_VARIABLE","$index",347],"[",["T_LNUMBER","1",347],"]",["T_WHITESPACE"," ",347],">",["T_WHITESPACE"," ",347],["T_LNUMBER","191",347],")",["T_WHITESPACE"," ",347],"{",["T_WHITESPACE","\n        ",347],["T_VARIABLE","$index",348],"[",["T_LNUMBER","1",348],"]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_LNUMBER","191",348],";",["T_WHITESPACE","\n      ",348],"}",["T_WHITESPACE","\n    ",349],"}",["T_WHITESPACE","\n    ",350],["T_ELSE","else",351],["T_WHITESPACE"," ",351],"{",["T_WHITESPACE","\n      ",351],["T_VARIABLE","$index",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_ARRAY","array",352],"(",["T_VARIABLE","$index",352],",",["T_WHITESPACE"," ",352],["T_LNUMBER","191",352],")",";",["T_WHITESPACE","\n    ",352],"}",["T_WHITESPACE","\n  ",353],"}",["T_WHITESPACE","\n\n  ",354],["T_PROTECTED","protected",356],["T_WHITESPACE"," ",356],["T_FUNCTION","function",356],["T_WHITESPACE"," ",356],["T_STRING","createKeySql",356],"(",["T_VARIABLE","$fields",356],")",["T_WHITESPACE"," ",356],"{",["T_WHITESPACE","\n    ",356],["T_VARIABLE","$return",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_ARRAY","array",357],"(",")",";",["T_WHITESPACE","\n    ",357],["T_FOREACH","foreach",358],["T_WHITESPACE"," ",358],"(",["T_VARIABLE","$fields",358],["T_WHITESPACE"," ",358],["T_AS","as",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$field",358],")",["T_WHITESPACE"," ",358],"{",["T_WHITESPACE","\n      ",358],["T_IF","if",359],["T_WHITESPACE"," ",359],"(",["T_STRING","is_array",359],"(",["T_VARIABLE","$field",359],")",")",["T_WHITESPACE"," ",359],"{",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$return",360],"[","]",["T_WHITESPACE"," ",360],"=",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'`'",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_VARIABLE","$field",360],"[",["T_LNUMBER","0",360],"]",["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","'`('",360],["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_VARIABLE","$field",360],"[",["T_LNUMBER","1",360],"]",["T_WHITESPACE"," ",360],".",["T_WHITESPACE"," ",360],["T_CONSTANT_ENCAPSED_STRING","')'",360],";",["T_WHITESPACE","\n      ",360],"}",["T_WHITESPACE","\n      ",361],["T_ELSE","else",362],["T_WHITESPACE"," ",362],"{",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$return",363],"[","]",["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'`'",363],["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_VARIABLE","$field",363],["T_WHITESPACE"," ",363],".",["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'`'",363],";",["T_WHITESPACE","\n      ",363],"}",["T_WHITESPACE","\n    ",364],"}",["T_WHITESPACE","\n    ",365],["T_RETURN","return",366],["T_WHITESPACE"," ",366],["T_STRING","implode",366],"(",["T_CONSTANT_ENCAPSED_STRING","', '",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$return",366],")",";",["T_WHITESPACE","\n  ",366],"}",["T_WHITESPACE","\n\n  ",367],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","renameTable",369],"(",["T_VARIABLE","$table",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$new_name",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n    ",369],["T_IF","if",370],["T_WHITESPACE"," ",370],"(","!",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","tableExists",370],"(",["T_VARIABLE","$table",370],")",")",["T_WHITESPACE"," ",370],"{",["T_WHITESPACE","\n      ",370],["T_THROW","throw",371],["T_WHITESPACE"," ",371],["T_NEW","new",371],["T_WHITESPACE"," ",371],["T_STRING","SchemaObjectDoesNotExistException",371],"(",["T_STRING","t",371],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot rename @table to @table_new: table @table doesn't exist.\"",371],",",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$table",371],",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'@table_new'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$new_name",371],")",")",")",";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n    ",372],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","tableExists",373],"(",["T_VARIABLE","$new_name",373],")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n      ",373],["T_THROW","throw",374],["T_WHITESPACE"," ",374],["T_NEW","new",374],["T_WHITESPACE"," ",374],["T_STRING","SchemaObjectExistsException",374],"(",["T_STRING","t",374],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot rename @table to @table_new: table @table_new already exists.\"",374],",",["T_WHITESPACE"," ",374],["T_ARRAY","array",374],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$table",374],",",["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","'@table_new'",374],["T_WHITESPACE"," ",374],["T_DOUBLE_ARROW","=>",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$new_name",374],")",")",")",";",["T_WHITESPACE","\n    ",374],"}",["T_WHITESPACE","\n\n    ",375],["T_VARIABLE","$info",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","getPrefixInfo",377],"(",["T_VARIABLE","$new_name",377],")",";",["T_WHITESPACE","\n    ",377],["T_RETURN","return",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","connection",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","query",378],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$table",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'} RENAME TO `'",378],["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_VARIABLE","$info",378],"[",["T_CONSTANT_ENCAPSED_STRING","'table'",378],"]",["T_WHITESPACE"," ",378],".",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'`'",378],")",";",["T_WHITESPACE","\n  ",378],"}",["T_WHITESPACE","\n\n  ",379],["T_PUBLIC","public",381],["T_WHITESPACE"," ",381],["T_FUNCTION","function",381],["T_WHITESPACE"," ",381],["T_STRING","dropTable",381],"(",["T_VARIABLE","$table",381],")",["T_WHITESPACE"," ",381],"{",["T_WHITESPACE","\n    ",381],["T_IF","if",382],["T_WHITESPACE"," ",382],"(","!",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","tableExists",382],"(",["T_VARIABLE","$table",382],")",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n      ",382],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_STRING","FALSE",383],";",["T_WHITESPACE","\n    ",383],"}",["T_WHITESPACE","\n\n    ",384],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","connection",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","query",386],"(",["T_CONSTANT_ENCAPSED_STRING","'DROP TABLE {'",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_VARIABLE","$table",386],["T_WHITESPACE"," ",386],".",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","'}'",386],")",";",["T_WHITESPACE","\n    ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_STRING","TRUE",387],";",["T_WHITESPACE","\n  ",387],"}",["T_WHITESPACE","\n\n  ",388],["T_PUBLIC","public",390],["T_WHITESPACE"," ",390],["T_FUNCTION","function",390],["T_WHITESPACE"," ",390],["T_STRING","addField",390],"(",["T_VARIABLE","$table",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$field",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$spec",390],",",["T_WHITESPACE"," ",390],["T_VARIABLE","$keys_new",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_ARRAY","array",390],"(",")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n    ",390],["T_IF","if",391],["T_WHITESPACE"," ",391],"(","!",["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","tableExists",391],"(",["T_VARIABLE","$table",391],")",")",["T_WHITESPACE"," ",391],"{",["T_WHITESPACE","\n      ",391],["T_THROW","throw",392],["T_WHITESPACE"," ",392],["T_NEW","new",392],["T_WHITESPACE"," ",392],["T_STRING","SchemaObjectDoesNotExistException",392],"(",["T_STRING","t",392],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add field @table.@field: table doesn't exist.\"",392],",",["T_WHITESPACE"," ",392],["T_ARRAY","array",392],"(",["T_CONSTANT_ENCAPSED_STRING","'@field'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$field",392],",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'@table'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$table",392],")",")",")",";",["T_WHITESPACE","\n    ",392],"}",["T_WHITESPACE","\n    ",393],["T_IF","if",394],["T_WHITESPACE"," ",394],"(",["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","fieldExists",394],"(",["T_VARIABLE","$table",394],",",["T_WHITESPACE"," ",394],["T_VARIABLE","$field",394],")",")",["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n      ",394],["T_THROW","throw",395],["T_WHITESPACE"," ",395],["T_NEW","new",395],["T_WHITESPACE"," ",395],["T_STRING","SchemaObjectExistsException",395],"(",["T_STRING","t",395],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add field @table.@field: field already exists.\"",395],",",["T_WHITESPACE"," ",395],["T_ARRAY","array",395],"(",["T_CONSTANT_ENCAPSED_STRING","'@field'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$field",395],",",["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'@table'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_VARIABLE","$table",395],")",")",")",";",["T_WHITESPACE","\n    ",395],"}",["T_WHITESPACE","\n\n    ",396],["T_VARIABLE","$fixnull",398],["T_WHITESPACE"," ",398],"=",["T_WHITESPACE"," ",398],["T_STRING","FALSE",398],";",["T_WHITESPACE","\n    ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","!",["T_EMPTY","empty",399],"(",["T_VARIABLE","$spec",399],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",399],"]",")",["T_WHITESPACE"," ",399],["T_BOOLEAN_AND","&&",399],["T_WHITESPACE"," ",399],"!",["T_ISSET","isset",399],"(",["T_VARIABLE","$spec",399],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",399],"]",")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n      ",399],["T_VARIABLE","$fixnull",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_STRING","TRUE",400],";",["T_WHITESPACE","\n      ",400],["T_VARIABLE","$spec",401],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",401],"]",["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","FALSE",401],";",["T_WHITESPACE","\n    ",401],"}",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$query",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",403],["T_WHITESPACE"," ",403],".",["T_WHITESPACE"," ",403],["T_VARIABLE","$table",403],["T_WHITESPACE"," ",403],".",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'} ADD '",403],";",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$query",404],["T_WHITESPACE"," ",404],["T_CONCAT_EQUAL",".=",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","createFieldSql",404],"(",["T_VARIABLE","$field",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","processField",404],"(",["T_VARIABLE","$spec",404],")",")",";",["T_WHITESPACE","\n    ",404],["T_IF","if",405],["T_WHITESPACE"," ",405],"(",["T_VARIABLE","$keys_sql",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","createKeysSql",405],"(",["T_VARIABLE","$keys_new",405],")",")",["T_WHITESPACE"," ",405],"{",["T_WHITESPACE","\n      ",405],["T_VARIABLE","$query",406],["T_WHITESPACE"," ",406],["T_CONCAT_EQUAL",".=",406],["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","', ADD '",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_STRING","implode",406],"(",["T_CONSTANT_ENCAPSED_STRING","', ADD '",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$keys_sql",406],")",";",["T_WHITESPACE","\n    ",406],"}",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","connection",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","query",408],"(",["T_VARIABLE","$query",408],")",";",["T_WHITESPACE","\n    ",408],["T_IF","if",409],["T_WHITESPACE"," ",409],"(",["T_ISSET","isset",409],"(",["T_VARIABLE","$spec",409],"[",["T_CONSTANT_ENCAPSED_STRING","'initial'",409],"]",")",")",["T_WHITESPACE"," ",409],"{",["T_WHITESPACE","\n      ",409],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","connection",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","update",410],"(",["T_VARIABLE","$table",410],")",["T_WHITESPACE","\n        ",410],["T_OBJECT_OPERATOR","->",411],["T_STRING","fields",411],"(",["T_ARRAY","array",411],"(",["T_VARIABLE","$field",411],["T_WHITESPACE"," ",411],["T_DOUBLE_ARROW","=>",411],["T_WHITESPACE"," ",411],["T_VARIABLE","$spec",411],"[",["T_CONSTANT_ENCAPSED_STRING","'initial'",411],"]",")",")",["T_WHITESPACE","\n        ",411],["T_OBJECT_OPERATOR","->",412],["T_STRING","execute",412],"(",")",";",["T_WHITESPACE","\n    ",412],"}",["T_WHITESPACE","\n    ",413],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_ISSET","isset",414],"(",["T_VARIABLE","$spec",414],"[",["T_CONSTANT_ENCAPSED_STRING","'initial_from_field'",414],"]",")",")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","connection",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","update",415],"(",["T_VARIABLE","$table",415],")",["T_WHITESPACE","\n        ",415],["T_OBJECT_OPERATOR","->",416],["T_STRING","expression",416],"(",["T_VARIABLE","$field",416],",",["T_WHITESPACE"," ",416],["T_VARIABLE","$spec",416],"[",["T_CONSTANT_ENCAPSED_STRING","'initial_from_field'",416],"]",")",["T_WHITESPACE","\n        ",416],["T_OBJECT_OPERATOR","->",417],["T_STRING","execute",417],"(",")",";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n    ",418],["T_IF","if",419],["T_WHITESPACE"," ",419],"(",["T_VARIABLE","$fixnull",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n      ",419],["T_VARIABLE","$spec",420],"[",["T_CONSTANT_ENCAPSED_STRING","'not null'",420],"]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_STRING","TRUE",420],";",["T_WHITESPACE","\n      ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","changeField",421],"(",["T_VARIABLE","$table",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$field",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$field",421],",",["T_WHITESPACE"," ",421],["T_VARIABLE","$spec",421],")",";",["T_WHITESPACE","\n    ",421],"}",["T_WHITESPACE","\n  ",422],"}",["T_WHITESPACE","\n\n  ",423],["T_PUBLIC","public",425],["T_WHITESPACE"," ",425],["T_FUNCTION","function",425],["T_WHITESPACE"," ",425],["T_STRING","dropField",425],"(",["T_VARIABLE","$table",425],",",["T_WHITESPACE"," ",425],["T_VARIABLE","$field",425],")",["T_WHITESPACE"," ",425],"{",["T_WHITESPACE","\n    ",425],["T_IF","if",426],["T_WHITESPACE"," ",426],"(","!",["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","fieldExists",426],"(",["T_VARIABLE","$table",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$field",426],")",")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n      ",426],["T_RETURN","return",427],["T_WHITESPACE"," ",427],["T_STRING","FALSE",427],";",["T_WHITESPACE","\n    ",427],"}",["T_WHITESPACE","\n\n    ",428],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","connection",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","query",430],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_VARIABLE","$table",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'} DROP `'",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_VARIABLE","$field",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'`'",430],")",";",["T_WHITESPACE","\n    ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_STRING","TRUE",431],";",["T_WHITESPACE","\n  ",431],"}",["T_WHITESPACE","\n\n  ",432],["T_PUBLIC","public",434],["T_WHITESPACE"," ",434],["T_FUNCTION","function",434],["T_WHITESPACE"," ",434],["T_STRING","fieldSetDefault",434],"(",["T_VARIABLE","$table",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$field",434],",",["T_WHITESPACE"," ",434],["T_VARIABLE","$default",434],")",["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n    ",434],["T_IF","if",435],["T_WHITESPACE"," ",435],"(","!",["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","fieldExists",435],"(",["T_VARIABLE","$table",435],",",["T_WHITESPACE"," ",435],["T_VARIABLE","$field",435],")",")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n      ",435],["T_THROW","throw",436],["T_WHITESPACE"," ",436],["T_NEW","new",436],["T_WHITESPACE"," ",436],["T_STRING","SchemaObjectDoesNotExistException",436],"(",["T_STRING","t",436],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot set default value of field @table.@field: field doesn't exist.\"",436],",",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$table",436],",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'@field'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$field",436],")",")",")",";",["T_WHITESPACE","\n    ",436],"}",["T_WHITESPACE","\n\n    ",437],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","connection",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","query",439],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_VARIABLE","$table",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'} ALTER COLUMN `'",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_VARIABLE","$field",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_CONSTANT_ENCAPSED_STRING","'` SET DEFAULT '",439],["T_WHITESPACE"," ",439],".",["T_WHITESPACE"," ",439],["T_VARIABLE","$this",439],["T_OBJECT_OPERATOR","->",439],["T_STRING","escapeDefaultValue",439],"(",["T_VARIABLE","$default",439],")",")",";",["T_WHITESPACE","\n  ",439],"}",["T_WHITESPACE","\n\n  ",440],["T_PUBLIC","public",442],["T_WHITESPACE"," ",442],["T_FUNCTION","function",442],["T_WHITESPACE"," ",442],["T_STRING","fieldSetNoDefault",442],"(",["T_VARIABLE","$table",442],",",["T_WHITESPACE"," ",442],["T_VARIABLE","$field",442],")",["T_WHITESPACE"," ",442],"{",["T_WHITESPACE","\n    ",442],["T_IF","if",443],["T_WHITESPACE"," ",443],"(","!",["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","fieldExists",443],"(",["T_VARIABLE","$table",443],",",["T_WHITESPACE"," ",443],["T_VARIABLE","$field",443],")",")",["T_WHITESPACE"," ",443],"{",["T_WHITESPACE","\n      ",443],["T_THROW","throw",444],["T_WHITESPACE"," ",444],["T_NEW","new",444],["T_WHITESPACE"," ",444],["T_STRING","SchemaObjectDoesNotExistException",444],"(",["T_STRING","t",444],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot remove default value of field @table.@field: field doesn't exist.\"",444],",",["T_WHITESPACE"," ",444],["T_ARRAY","array",444],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$table",444],",",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'@field'",444],["T_WHITESPACE"," ",444],["T_DOUBLE_ARROW","=>",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$field",444],")",")",")",";",["T_WHITESPACE","\n    ",444],"}",["T_WHITESPACE","\n\n    ",445],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","connection",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","query",447],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_VARIABLE","$table",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'} ALTER COLUMN `'",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_VARIABLE","$field",447],["T_WHITESPACE"," ",447],".",["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'` DROP DEFAULT'",447],")",";",["T_WHITESPACE","\n  ",447],"}",["T_WHITESPACE","\n\n  ",448],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","indexExists",450],"(",["T_VARIABLE","$table",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$name",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n    ",450],["T_COMMENT","\/\/ Returns one row for each column in the index. Result is string or FALSE.\n",451],["T_WHITESPACE","    ",452],["T_COMMENT","\/\/ Details at http:\/\/dev.mysql.com\/doc\/refman\/5.0\/en\/show-index.html\n",452],["T_WHITESPACE","    ",453],["T_VARIABLE","$row",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","connection",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","query",453],"(",["T_CONSTANT_ENCAPSED_STRING","'SHOW INDEX FROM {'",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_VARIABLE","$table",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'} WHERE key_name = '",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","connection",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","quote",453],"(",["T_VARIABLE","$name",453],")",")",["T_OBJECT_OPERATOR","->",453],["T_STRING","fetchAssoc",453],"(",")",";",["T_WHITESPACE","\n    ",453],["T_RETURN","return",454],["T_WHITESPACE"," ",454],["T_ISSET","isset",454],"(",["T_VARIABLE","$row",454],"[",["T_CONSTANT_ENCAPSED_STRING","'Key_name'",454],"]",")",";",["T_WHITESPACE","\n  ",454],"}",["T_WHITESPACE","\n\n  ",455],["T_PUBLIC","public",457],["T_WHITESPACE"," ",457],["T_FUNCTION","function",457],["T_WHITESPACE"," ",457],["T_STRING","addPrimaryKey",457],"(",["T_VARIABLE","$table",457],",",["T_WHITESPACE"," ",457],["T_VARIABLE","$fields",457],")",["T_WHITESPACE"," ",457],"{",["T_WHITESPACE","\n    ",457],["T_IF","if",458],["T_WHITESPACE"," ",458],"(","!",["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","tableExists",458],"(",["T_VARIABLE","$table",458],")",")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n      ",458],["T_THROW","throw",459],["T_WHITESPACE"," ",459],["T_NEW","new",459],["T_WHITESPACE"," ",459],["T_STRING","SchemaObjectDoesNotExistException",459],"(",["T_STRING","t",459],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add primary key to table @table: table doesn't exist.\"",459],",",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",459],["T_WHITESPACE"," ",459],["T_DOUBLE_ARROW","=>",459],["T_WHITESPACE"," ",459],["T_VARIABLE","$table",459],")",")",")",";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n    ",460],["T_IF","if",461],["T_WHITESPACE"," ",461],"(",["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","indexExists",461],"(",["T_VARIABLE","$table",461],",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",461],")",")",["T_WHITESPACE"," ",461],"{",["T_WHITESPACE","\n      ",461],["T_THROW","throw",462],["T_WHITESPACE"," ",462],["T_NEW","new",462],["T_WHITESPACE"," ",462],["T_STRING","SchemaObjectExistsException",462],"(",["T_STRING","t",462],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add primary key to table @table: primary key already exists.\"",462],",",["T_WHITESPACE"," ",462],["T_ARRAY","array",462],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",462],["T_WHITESPACE"," ",462],["T_DOUBLE_ARROW","=>",462],["T_WHITESPACE"," ",462],["T_VARIABLE","$table",462],")",")",")",";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n    ",463],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","connection",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","query",465],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_VARIABLE","$table",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'} ADD PRIMARY KEY ('",465],["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","createKeySql",465],"(",["T_VARIABLE","$fields",465],")",["T_WHITESPACE"," ",465],".",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","')'",465],")",";",["T_WHITESPACE","\n  ",465],"}",["T_WHITESPACE","\n\n  ",466],["T_PUBLIC","public",468],["T_WHITESPACE"," ",468],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","dropPrimaryKey",468],"(",["T_VARIABLE","$table",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n    ",468],["T_IF","if",469],["T_WHITESPACE"," ",469],"(","!",["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","indexExists",469],"(",["T_VARIABLE","$table",469],",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'PRIMARY'",469],")",")",["T_WHITESPACE"," ",469],"{",["T_WHITESPACE","\n      ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],["T_STRING","FALSE",470],";",["T_WHITESPACE","\n    ",470],"}",["T_WHITESPACE","\n\n    ",471],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","connection",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","query",473],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",473],["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],["T_VARIABLE","$table",473],["T_WHITESPACE"," ",473],".",["T_WHITESPACE"," ",473],["T_CONSTANT_ENCAPSED_STRING","'} DROP PRIMARY KEY'",473],")",";",["T_WHITESPACE","\n    ",473],["T_RETURN","return",474],["T_WHITESPACE"," ",474],["T_STRING","TRUE",474],";",["T_WHITESPACE","\n  ",474],"}",["T_WHITESPACE","\n\n  ",475],["T_PUBLIC","public",477],["T_WHITESPACE"," ",477],["T_FUNCTION","function",477],["T_WHITESPACE"," ",477],["T_STRING","addUniqueKey",477],"(",["T_VARIABLE","$table",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$name",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$fields",477],")",["T_WHITESPACE"," ",477],"{",["T_WHITESPACE","\n    ",477],["T_IF","if",478],["T_WHITESPACE"," ",478],"(","!",["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","tableExists",478],"(",["T_VARIABLE","$table",478],")",")",["T_WHITESPACE"," ",478],"{",["T_WHITESPACE","\n      ",478],["T_THROW","throw",479],["T_WHITESPACE"," ",479],["T_NEW","new",479],["T_WHITESPACE"," ",479],["T_STRING","SchemaObjectDoesNotExistException",479],"(",["T_STRING","t",479],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add unique key @name to table @table: table doesn't exist.\"",479],",",["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$table",479],",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'@name'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$name",479],")",")",")",";",["T_WHITESPACE","\n    ",479],"}",["T_WHITESPACE","\n    ",480],["T_IF","if",481],["T_WHITESPACE"," ",481],"(",["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","indexExists",481],"(",["T_VARIABLE","$table",481],",",["T_WHITESPACE"," ",481],["T_VARIABLE","$name",481],")",")",["T_WHITESPACE"," ",481],"{",["T_WHITESPACE","\n      ",481],["T_THROW","throw",482],["T_WHITESPACE"," ",482],["T_NEW","new",482],["T_WHITESPACE"," ",482],["T_STRING","SchemaObjectExistsException",482],"(",["T_STRING","t",482],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add unique key @name to table @table: unique key already exists.\"",482],",",["T_WHITESPACE"," ",482],["T_ARRAY","array",482],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$table",482],",",["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'@name'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$name",482],")",")",")",";",["T_WHITESPACE","\n    ",482],"}",["T_WHITESPACE","\n\n    ",483],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","connection",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","query",485],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",485],["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_VARIABLE","$table",485],["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'} ADD UNIQUE KEY `'",485],["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_VARIABLE","$name",485],["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","'` ('",485],["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_VARIABLE","$this",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","createKeySql",485],"(",["T_VARIABLE","$fields",485],")",["T_WHITESPACE"," ",485],".",["T_WHITESPACE"," ",485],["T_CONSTANT_ENCAPSED_STRING","')'",485],")",";",["T_WHITESPACE","\n  ",485],"}",["T_WHITESPACE","\n\n  ",486],["T_PUBLIC","public",488],["T_WHITESPACE"," ",488],["T_FUNCTION","function",488],["T_WHITESPACE"," ",488],["T_STRING","dropUniqueKey",488],"(",["T_VARIABLE","$table",488],",",["T_WHITESPACE"," ",488],["T_VARIABLE","$name",488],")",["T_WHITESPACE"," ",488],"{",["T_WHITESPACE","\n    ",488],["T_IF","if",489],["T_WHITESPACE"," ",489],"(","!",["T_VARIABLE","$this",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","indexExists",489],"(",["T_VARIABLE","$table",489],",",["T_WHITESPACE"," ",489],["T_VARIABLE","$name",489],")",")",["T_WHITESPACE"," ",489],"{",["T_WHITESPACE","\n      ",489],["T_RETURN","return",490],["T_WHITESPACE"," ",490],["T_STRING","FALSE",490],";",["T_WHITESPACE","\n    ",490],"}",["T_WHITESPACE","\n\n    ",491],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","connection",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","query",493],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_VARIABLE","$table",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'} DROP KEY `'",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_VARIABLE","$name",493],["T_WHITESPACE"," ",493],".",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'`'",493],")",";",["T_WHITESPACE","\n    ",493],["T_RETURN","return",494],["T_WHITESPACE"," ",494],["T_STRING","TRUE",494],";",["T_WHITESPACE","\n  ",494],"}",["T_WHITESPACE","\n\n  ",495],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",497],["T_WHITESPACE","\n  ",499],["T_PUBLIC","public",500],["T_WHITESPACE"," ",500],["T_FUNCTION","function",500],["T_WHITESPACE"," ",500],["T_STRING","addIndex",500],"(",["T_VARIABLE","$table",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$name",500],",",["T_WHITESPACE"," ",500],["T_VARIABLE","$fields",500],",",["T_WHITESPACE"," ",500],["T_ARRAY","array",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$spec",500],")",["T_WHITESPACE"," ",500],"{",["T_WHITESPACE","\n    ",500],["T_IF","if",501],["T_WHITESPACE"," ",501],"(","!",["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","tableExists",501],"(",["T_VARIABLE","$table",501],")",")",["T_WHITESPACE"," ",501],"{",["T_WHITESPACE","\n      ",501],["T_THROW","throw",502],["T_WHITESPACE"," ",502],["T_NEW","new",502],["T_WHITESPACE"," ",502],["T_STRING","SchemaObjectDoesNotExistException",502],"(",["T_STRING","t",502],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add index @name to table @table: table doesn't exist.\"",502],",",["T_WHITESPACE"," ",502],["T_ARRAY","array",502],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",502],["T_WHITESPACE"," ",502],["T_DOUBLE_ARROW","=>",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$table",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'@name'",502],["T_WHITESPACE"," ",502],["T_DOUBLE_ARROW","=>",502],["T_WHITESPACE"," ",502],["T_VARIABLE","$name",502],")",")",")",";",["T_WHITESPACE","\n    ",502],"}",["T_WHITESPACE","\n    ",503],["T_IF","if",504],["T_WHITESPACE"," ",504],"(",["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","indexExists",504],"(",["T_VARIABLE","$table",504],",",["T_WHITESPACE"," ",504],["T_VARIABLE","$name",504],")",")",["T_WHITESPACE"," ",504],"{",["T_WHITESPACE","\n      ",504],["T_THROW","throw",505],["T_WHITESPACE"," ",505],["T_NEW","new",505],["T_WHITESPACE"," ",505],["T_STRING","SchemaObjectExistsException",505],"(",["T_STRING","t",505],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot add index @name to table @table: index already exists.\"",505],",",["T_WHITESPACE"," ",505],["T_ARRAY","array",505],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$table",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'@name'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$name",505],")",")",")",";",["T_WHITESPACE","\n    ",505],"}",["T_WHITESPACE","\n\n    ",506],["T_VARIABLE","$spec",508],"[",["T_CONSTANT_ENCAPSED_STRING","'indexes'",508],"]","[",["T_VARIABLE","$name",508],"]",["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$fields",508],";",["T_WHITESPACE","\n    ",508],["T_VARIABLE","$indexes",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","getNormalizedIndexes",509],"(",["T_VARIABLE","$spec",509],")",";",["T_WHITESPACE","\n\n    ",509],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","connection",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","query",511],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",511],["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_VARIABLE","$table",511],["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'} ADD INDEX `'",511],["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_VARIABLE","$name",511],["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'` ('",511],["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","createKeySql",511],"(",["T_VARIABLE","$indexes",511],"[",["T_VARIABLE","$name",511],"]",")",["T_WHITESPACE"," ",511],".",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","')'",511],")",";",["T_WHITESPACE","\n  ",511],"}",["T_WHITESPACE","\n\n  ",512],["T_PUBLIC","public",514],["T_WHITESPACE"," ",514],["T_FUNCTION","function",514],["T_WHITESPACE"," ",514],["T_STRING","dropIndex",514],"(",["T_VARIABLE","$table",514],",",["T_WHITESPACE"," ",514],["T_VARIABLE","$name",514],")",["T_WHITESPACE"," ",514],"{",["T_WHITESPACE","\n    ",514],["T_IF","if",515],["T_WHITESPACE"," ",515],"(","!",["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","indexExists",515],"(",["T_VARIABLE","$table",515],",",["T_WHITESPACE"," ",515],["T_VARIABLE","$name",515],")",")",["T_WHITESPACE"," ",515],"{",["T_WHITESPACE","\n      ",515],["T_RETURN","return",516],["T_WHITESPACE"," ",516],["T_STRING","FALSE",516],";",["T_WHITESPACE","\n    ",516],"}",["T_WHITESPACE","\n\n    ",517],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","connection",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","query",519],"(",["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_VARIABLE","$table",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'} DROP INDEX `'",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_VARIABLE","$name",519],["T_WHITESPACE"," ",519],".",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'`'",519],")",";",["T_WHITESPACE","\n    ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_STRING","TRUE",520],";",["T_WHITESPACE","\n  ",520],"}",["T_WHITESPACE","\n\n  ",521],["T_PUBLIC","public",523],["T_WHITESPACE"," ",523],["T_FUNCTION","function",523],["T_WHITESPACE"," ",523],["T_STRING","changeField",523],"(",["T_VARIABLE","$table",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$field",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$field_new",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$spec",523],",",["T_WHITESPACE"," ",523],["T_VARIABLE","$keys_new",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_ARRAY","array",523],"(",")",")",["T_WHITESPACE"," ",523],"{",["T_WHITESPACE","\n    ",523],["T_IF","if",524],["T_WHITESPACE"," ",524],"(","!",["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","fieldExists",524],"(",["T_VARIABLE","$table",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$field",524],")",")",["T_WHITESPACE"," ",524],"{",["T_WHITESPACE","\n      ",524],["T_THROW","throw",525],["T_WHITESPACE"," ",525],["T_NEW","new",525],["T_WHITESPACE"," ",525],["T_STRING","SchemaObjectDoesNotExistException",525],"(",["T_STRING","t",525],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot change the definition of field @table.@name: field doesn't exist.\"",525],",",["T_WHITESPACE"," ",525],["T_ARRAY","array",525],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$table",525],",",["T_WHITESPACE"," ",525],["T_CONSTANT_ENCAPSED_STRING","'@name'",525],["T_WHITESPACE"," ",525],["T_DOUBLE_ARROW","=>",525],["T_WHITESPACE"," ",525],["T_VARIABLE","$field",525],")",")",")",";",["T_WHITESPACE","\n    ",525],"}",["T_WHITESPACE","\n    ",526],["T_IF","if",527],["T_WHITESPACE"," ",527],"(","(",["T_VARIABLE","$field",527],["T_WHITESPACE"," ",527],["T_IS_NOT_EQUAL","!=",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$field_new",527],")",["T_WHITESPACE"," ",527],["T_BOOLEAN_AND","&&",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","fieldExists",527],"(",["T_VARIABLE","$table",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$field_new",527],")",")",["T_WHITESPACE"," ",527],"{",["T_WHITESPACE","\n      ",527],["T_THROW","throw",528],["T_WHITESPACE"," ",528],["T_NEW","new",528],["T_WHITESPACE"," ",528],["T_STRING","SchemaObjectExistsException",528],"(",["T_STRING","t",528],"(",["T_CONSTANT_ENCAPSED_STRING","\"Cannot rename field @table.@name to @name_new: target field already exists.\"",528],",",["T_WHITESPACE"," ",528],["T_ARRAY","array",528],"(",["T_CONSTANT_ENCAPSED_STRING","'@table'",528],["T_WHITESPACE"," ",528],["T_DOUBLE_ARROW","=>",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$table",528],",",["T_WHITESPACE"," ",528],["T_CONSTANT_ENCAPSED_STRING","'@name'",528],["T_WHITESPACE"," ",528],["T_DOUBLE_ARROW","=>",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$field",528],",",["T_WHITESPACE"," ",528],["T_CONSTANT_ENCAPSED_STRING","'@name_new'",528],["T_WHITESPACE"," ",528],["T_DOUBLE_ARROW","=>",528],["T_WHITESPACE"," ",528],["T_VARIABLE","$field_new",528],")",")",")",";",["T_WHITESPACE","\n    ",528],"}",["T_WHITESPACE","\n\n    ",529],["T_VARIABLE","$sql",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'ALTER TABLE {'",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_VARIABLE","$table",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'} CHANGE `'",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_VARIABLE","$field",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'` '",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","createFieldSql",531],"(",["T_VARIABLE","$field_new",531],",",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","processField",531],"(",["T_VARIABLE","$spec",531],")",")",";",["T_WHITESPACE","\n    ",531],["T_IF","if",532],["T_WHITESPACE"," ",532],"(",["T_VARIABLE","$keys_sql",532],["T_WHITESPACE"," ",532],"=",["T_WHITESPACE"," ",532],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","createKeysSql",532],"(",["T_VARIABLE","$keys_new",532],")",")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n      ",532],["T_VARIABLE","$sql",533],["T_WHITESPACE"," ",533],["T_CONCAT_EQUAL",".=",533],["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","', ADD '",533],["T_WHITESPACE"," ",533],".",["T_WHITESPACE"," ",533],["T_STRING","implode",533],"(",["T_CONSTANT_ENCAPSED_STRING","', ADD '",533],",",["T_WHITESPACE"," ",533],["T_VARIABLE","$keys_sql",533],")",";",["T_WHITESPACE","\n    ",533],"}",["T_WHITESPACE","\n    ",534],["T_VARIABLE","$this",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","connection",535],["T_OBJECT_OPERATOR","->",535],["T_STRING","query",535],"(",["T_VARIABLE","$sql",535],")",";",["T_WHITESPACE","\n  ",535],"}",["T_WHITESPACE","\n\n  ",536],["T_PUBLIC","public",538],["T_WHITESPACE"," ",538],["T_FUNCTION","function",538],["T_WHITESPACE"," ",538],["T_STRING","prepareComment",538],"(",["T_VARIABLE","$comment",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$length",538],["T_WHITESPACE"," ",538],"=",["T_WHITESPACE"," ",538],["T_STRING","NULL",538],")",["T_WHITESPACE"," ",538],"{",["T_WHITESPACE","\n    ",538],["T_COMMENT","\/\/ Truncate comment to maximum comment length.\n",539],["T_WHITESPACE","    ",540],["T_IF","if",540],["T_WHITESPACE"," ",540],"(",["T_ISSET","isset",540],"(",["T_VARIABLE","$length",540],")",")",["T_WHITESPACE"," ",540],"{",["T_WHITESPACE","\n      ",540],["T_COMMENT","\/\/ Add table prefixes before truncating.\n",541],["T_WHITESPACE","      ",542],["T_VARIABLE","$comment",542],["T_WHITESPACE"," ",542],"=",["T_WHITESPACE"," ",542],["T_STRING","Unicode",542],["T_DOUBLE_COLON","::",542],["T_STRING","truncate",542],"(",["T_VARIABLE","$this",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","connection",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","prefixTables",542],"(",["T_VARIABLE","$comment",542],")",",",["T_WHITESPACE"," ",542],["T_VARIABLE","$length",542],",",["T_WHITESPACE"," ",542],["T_STRING","TRUE",542],",",["T_WHITESPACE"," ",542],["T_STRING","TRUE",542],")",";",["T_WHITESPACE","\n    ",542],"}",["T_WHITESPACE","\n    ",543],["T_COMMENT","\/\/ Remove semicolons to avoid triggering multi-statement check.\n",544],["T_WHITESPACE","    ",545],["T_VARIABLE","$comment",545],["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_STRING","strtr",545],"(",["T_VARIABLE","$comment",545],",",["T_WHITESPACE"," ",545],["T_ARRAY","array",545],"(",["T_CONSTANT_ENCAPSED_STRING","';'",545],["T_WHITESPACE"," ",545],["T_DOUBLE_ARROW","=>",545],["T_WHITESPACE"," ",545],["T_CONSTANT_ENCAPSED_STRING","'.'",545],")",")",";",["T_WHITESPACE","\n    ",545],["T_RETURN","return",546],["T_WHITESPACE"," ",546],["T_VARIABLE","$this",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","connection",546],["T_OBJECT_OPERATOR","->",546],["T_STRING","quote",546],"(",["T_VARIABLE","$comment",546],")",";",["T_WHITESPACE","\n  ",546],"}",["T_WHITESPACE","\n\n  ",547],["T_DOC_COMMENT","\/**\n   * Retrieve a table or column comment.\n   *\/",549],["T_WHITESPACE","\n  ",551],["T_PUBLIC","public",552],["T_WHITESPACE"," ",552],["T_FUNCTION","function",552],["T_WHITESPACE"," ",552],["T_STRING","getComment",552],"(",["T_VARIABLE","$table",552],",",["T_WHITESPACE"," ",552],["T_VARIABLE","$column",552],["T_WHITESPACE"," ",552],"=",["T_WHITESPACE"," ",552],["T_STRING","NULL",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n    ",552],["T_VARIABLE","$condition",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","buildTableNameCondition",553],"(",["T_VARIABLE","$table",553],")",";",["T_WHITESPACE","\n    ",553],["T_IF","if",554],["T_WHITESPACE"," ",554],"(",["T_ISSET","isset",554],"(",["T_VARIABLE","$column",554],")",")",["T_WHITESPACE"," ",554],"{",["T_WHITESPACE","\n      ",554],["T_VARIABLE","$condition",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","condition",555],"(",["T_CONSTANT_ENCAPSED_STRING","'column_name'",555],",",["T_WHITESPACE"," ",555],["T_VARIABLE","$column",555],")",";",["T_WHITESPACE","\n      ",555],["T_VARIABLE","$condition",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","compile",556],"(",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","connection",556],",",["T_WHITESPACE"," ",556],["T_VARIABLE","$this",556],")",";",["T_WHITESPACE","\n      ",556],["T_COMMENT","\/\/ Don't use {} around information_schema.columns table.\n",557],["T_WHITESPACE","      ",558],["T_RETURN","return",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","connection",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","query",558],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT column_comment FROM information_schema.columns WHERE \"",558],["T_WHITESPACE"," ",558],".",["T_WHITESPACE"," ",558],["T_STRING_CAST","(string)",558],["T_WHITESPACE"," ",558],["T_VARIABLE","$condition",558],",",["T_WHITESPACE"," ",558],["T_VARIABLE","$condition",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","arguments",558],"(",")",")",["T_OBJECT_OPERATOR","->",558],["T_STRING","fetchField",558],"(",")",";",["T_WHITESPACE","\n    ",558],"}",["T_WHITESPACE","\n    ",559],["T_VARIABLE","$condition",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","compile",560],"(",["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","connection",560],",",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],")",";",["T_WHITESPACE","\n    ",560],["T_COMMENT","\/\/ Don't use {} around information_schema.tables table.\n",561],["T_WHITESPACE","    ",562],["T_VARIABLE","$comment",562],["T_WHITESPACE"," ",562],"=",["T_WHITESPACE"," ",562],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","connection",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","query",562],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT table_comment FROM information_schema.tables WHERE \"",562],["T_WHITESPACE"," ",562],".",["T_WHITESPACE"," ",562],["T_STRING_CAST","(string)",562],["T_WHITESPACE"," ",562],["T_VARIABLE","$condition",562],",",["T_WHITESPACE"," ",562],["T_VARIABLE","$condition",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","arguments",562],"(",")",")",["T_OBJECT_OPERATOR","->",562],["T_STRING","fetchField",562],"(",")",";",["T_WHITESPACE","\n    ",562],["T_COMMENT","\/\/ Work-around for MySQL 5.0 bug http:\/\/bugs.mysql.com\/bug.php?id=11379\n",563],["T_WHITESPACE","    ",564],["T_RETURN","return",564],["T_WHITESPACE"," ",564],["T_STRING","preg_replace",564],"(",["T_CONSTANT_ENCAPSED_STRING","'\/; InnoDB free:.*$\/'",564],",",["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","''",564],",",["T_WHITESPACE"," ",564],["T_VARIABLE","$comment",564],")",";",["T_WHITESPACE","\n  ",564],"}",["T_WHITESPACE","\n\n  ",565],["T_PUBLIC","public",567],["T_WHITESPACE"," ",567],["T_FUNCTION","function",567],["T_WHITESPACE"," ",567],["T_STRING","tableExists",567],"(",["T_VARIABLE","$table",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n    ",567],["T_COMMENT","\/\/ The information_schema table is very slow to query under MySQL 5.0.\n",568],["T_WHITESPACE","    ",569],["T_COMMENT","\/\/ Instead, we try to select from the table in question.  If it fails,\n",569],["T_WHITESPACE","    ",570],["T_COMMENT","\/\/ the most likely reason is that it does not exist. That is dramatically\n",570],["T_WHITESPACE","    ",571],["T_COMMENT","\/\/ faster than using information_schema.\n",571],["T_WHITESPACE","    ",572],["T_COMMENT","\/\/ @link http:\/\/bugs.mysql.com\/bug.php?id=19588\n",572],["T_WHITESPACE","    ",573],["T_COMMENT","\/\/ @todo This override should be removed once we require a version of MySQL\n",573],["T_WHITESPACE","    ",574],["T_COMMENT","\/\/   that has that bug fixed.\n",574],["T_WHITESPACE","    ",575],["T_TRY","try",575],["T_WHITESPACE"," ",575],"{",["T_WHITESPACE","\n      ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","connection",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","queryRange",576],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT 1 FROM {\"",576],["T_WHITESPACE"," ",576],".",["T_WHITESPACE"," ",576],["T_VARIABLE","$table",576],["T_WHITESPACE"," ",576],".",["T_WHITESPACE"," ",576],["T_CONSTANT_ENCAPSED_STRING","\"}\"",576],",",["T_WHITESPACE"," ",576],["T_LNUMBER","0",576],",",["T_WHITESPACE"," ",576],["T_LNUMBER","1",576],")",";",["T_WHITESPACE","\n      ",576],["T_RETURN","return",577],["T_WHITESPACE"," ",577],["T_STRING","TRUE",577],";",["T_WHITESPACE","\n    ",577],"}",["T_WHITESPACE","\n    ",578],["T_CATCH","catch",579],["T_WHITESPACE"," ",579],"(",["T_NS_SEPARATOR","\\",579],["T_STRING","Exception",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$e",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n      ",579],["T_RETURN","return",580],["T_WHITESPACE"," ",580],["T_STRING","FALSE",580],";",["T_WHITESPACE","\n    ",580],"}",["T_WHITESPACE","\n  ",581],"}",["T_WHITESPACE","\n\n  ",582],["T_PUBLIC","public",584],["T_WHITESPACE"," ",584],["T_FUNCTION","function",584],["T_WHITESPACE"," ",584],["T_STRING","fieldExists",584],"(",["T_VARIABLE","$table",584],",",["T_WHITESPACE"," ",584],["T_VARIABLE","$column",584],")",["T_WHITESPACE"," ",584],"{",["T_WHITESPACE","\n    ",584],["T_COMMENT","\/\/ The information_schema table is very slow to query under MySQL 5.0.\n",585],["T_WHITESPACE","    ",586],["T_COMMENT","\/\/ Instead, we try to select from the table and field in question. If it\n",586],["T_WHITESPACE","    ",587],["T_COMMENT","\/\/ fails, the most likely reason is that it does not exist. That is\n",587],["T_WHITESPACE","    ",588],["T_COMMENT","\/\/ dramatically faster than using information_schema.\n",588],["T_WHITESPACE","    ",589],["T_COMMENT","\/\/ @link http:\/\/bugs.mysql.com\/bug.php?id=19588\n",589],["T_WHITESPACE","    ",590],["T_COMMENT","\/\/ @todo This override should be removed once we require a version of MySQL\n",590],["T_WHITESPACE","    ",591],["T_COMMENT","\/\/   that has that bug fixed.\n",591],["T_WHITESPACE","    ",592],["T_TRY","try",592],["T_WHITESPACE"," ",592],"{",["T_WHITESPACE","\n      ",592],["T_VARIABLE","$this",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","connection",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","queryRange",593],"(","\"",["T_ENCAPSED_AND_WHITESPACE","SELECT ",593],["T_VARIABLE","$column",593],["T_ENCAPSED_AND_WHITESPACE"," FROM {",593],"\"",["T_WHITESPACE"," ",593],".",["T_WHITESPACE"," ",593],["T_VARIABLE","$table",593],["T_WHITESPACE"," ",593],".",["T_WHITESPACE"," ",593],["T_CONSTANT_ENCAPSED_STRING","\"}\"",593],",",["T_WHITESPACE"," ",593],["T_LNUMBER","0",593],",",["T_WHITESPACE"," ",593],["T_LNUMBER","1",593],")",";",["T_WHITESPACE","\n      ",593],["T_RETURN","return",594],["T_WHITESPACE"," ",594],["T_STRING","TRUE",594],";",["T_WHITESPACE","\n    ",594],"}",["T_WHITESPACE","\n    ",595],["T_CATCH","catch",596],["T_WHITESPACE"," ",596],"(",["T_NS_SEPARATOR","\\",596],["T_STRING","Exception",596],["T_WHITESPACE"," ",596],["T_VARIABLE","$e",596],")",["T_WHITESPACE"," ",596],"{",["T_WHITESPACE","\n      ",596],["T_RETURN","return",597],["T_WHITESPACE"," ",597],["T_STRING","FALSE",597],";",["T_WHITESPACE","\n    ",597],"}",["T_WHITESPACE","\n  ",598],"}",["T_WHITESPACE","\n\n",599],"}",["T_WHITESPACE","\n\n",601],["T_DOC_COMMENT","\/**\n * @} End of \"addtogroup schemaapi\".\n *\/",603],["T_WHITESPACE","\n",605]]
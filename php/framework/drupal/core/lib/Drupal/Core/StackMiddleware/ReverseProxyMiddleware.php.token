[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","StackMiddleware",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Site",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Settings",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","HttpFoundation",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Request",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","HttpKernel",7],["T_NS_SEPARATOR","\\",7],["T_STRING","HttpKernelInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Provides support for reverse proxies.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","ReverseProxyMiddleware",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","HttpKernelInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * The decorated kernel.\n   *\n   * @var \\Symfony\\Component\\HttpKernel\\HttpKernelInterface\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$httpKernel",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The site settings.\n   *\n   * @var \\Drupal\\Core\\Site\\Settings\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$settings",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Constructs a ReverseProxyMiddleware object.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\HttpKernelInterface $http_kernel\n   *   The decorated kernel.\n   * @param \\Drupal\\Core\\Site\\Settings $settings\n   *   The site settings.\n   *\/",28],["T_WHITESPACE","\n  ",35],["T_PUBLIC","public",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","__construct",36],"(",["T_STRING","HttpKernelInterface",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$http_kernel",36],",",["T_WHITESPACE"," ",36],["T_STRING","Settings",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$settings",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","httpKernel",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$http_kernel",37],";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","settings",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$settings",38],";",["T_WHITESPACE","\n  ",38],"}",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",41],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","handle",44],"(",["T_STRING","Request",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$request",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$type",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","self",44],["T_DOUBLE_COLON","::",44],["T_STRING","MASTER_REQUEST",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$catch",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_STRING","TRUE",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_COMMENT","\/\/ Initialize proxy settings.\n",45],["T_WHITESPACE","    ",46],["T_STATIC","static",46],["T_DOUBLE_COLON","::",46],["T_STRING","setSettingsOnRequest",46],"(",["T_VARIABLE","$request",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","settings",46],")",";",["T_WHITESPACE","\n    ",46],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","httpKernel",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","handle",47],"(",["T_VARIABLE","$request",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$type",47],",",["T_WHITESPACE"," ",47],["T_VARIABLE","$catch",47],")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Sets reverse proxy settings on Request object.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   A Request instance.\n   * @param \\Drupal\\Core\\Site\\Settings $settings\n   *   The site settings.\n   *\/",50],["T_WHITESPACE","\n  ",57],["T_PUBLIC","public",58],["T_WHITESPACE"," ",58],["T_STATIC","static",58],["T_WHITESPACE"," ",58],["T_FUNCTION","function",58],["T_WHITESPACE"," ",58],["T_STRING","setSettingsOnRequest",58],"(",["T_STRING","Request",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$request",58],",",["T_WHITESPACE"," ",58],["T_STRING","Settings",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$settings",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/\/ Initialize proxy settings.\n",59],["T_WHITESPACE","    ",60],["T_IF","if",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$settings",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","get",60],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy'",60],",",["T_WHITESPACE"," ",60],["T_STRING","FALSE",60],")",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$ip_header",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$settings",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","get",61],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_header'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'X_FORWARDED_FOR'",61],")",";",["T_WHITESPACE","\n      ",61],["T_VARIABLE","$request",62],["T_DOUBLE_COLON","::",62],["T_STRING","setTrustedHeaderName",62],"(",["T_VARIABLE","$request",62],["T_DOUBLE_COLON","::",62],["T_STRING","HEADER_CLIENT_IP",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$ip_header",62],")",";",["T_WHITESPACE","\n\n      ",62],["T_VARIABLE","$proto_header",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$settings",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_proto_header'",64],",",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'X_FORWARDED_PROTO'",64],")",";",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$request",65],["T_DOUBLE_COLON","::",65],["T_STRING","setTrustedHeaderName",65],"(",["T_VARIABLE","$request",65],["T_DOUBLE_COLON","::",65],["T_STRING","HEADER_CLIENT_PROTO",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$proto_header",65],")",";",["T_WHITESPACE","\n\n      ",65],["T_VARIABLE","$host_header",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$settings",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_host_header'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'X_FORWARDED_HOST'",67],")",";",["T_WHITESPACE","\n      ",67],["T_VARIABLE","$request",68],["T_DOUBLE_COLON","::",68],["T_STRING","setTrustedHeaderName",68],"(",["T_VARIABLE","$request",68],["T_DOUBLE_COLON","::",68],["T_STRING","HEADER_CLIENT_HOST",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$host_header",68],")",";",["T_WHITESPACE","\n\n      ",68],["T_VARIABLE","$port_header",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$settings",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","get",70],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_port_header'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'X_FORWARDED_PORT'",70],")",";",["T_WHITESPACE","\n      ",70],["T_VARIABLE","$request",71],["T_DOUBLE_COLON","::",71],["T_STRING","setTrustedHeaderName",71],"(",["T_VARIABLE","$request",71],["T_DOUBLE_COLON","::",71],["T_STRING","HEADER_CLIENT_PORT",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$port_header",71],")",";",["T_WHITESPACE","\n\n      ",71],["T_VARIABLE","$forwarded_header",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$settings",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","get",73],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_forwarded_header'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'FORWARDED'",73],")",";",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$request",74],["T_DOUBLE_COLON","::",74],["T_STRING","setTrustedHeaderName",74],"(",["T_VARIABLE","$request",74],["T_DOUBLE_COLON","::",74],["T_STRING","HEADER_FORWARDED",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$forwarded_header",74],")",";",["T_WHITESPACE","\n\n      ",74],["T_VARIABLE","$proxies",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$settings",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'reverse_proxy_addresses'",76],",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",")",";",["T_WHITESPACE","\n      ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_STRING","count",77],"(",["T_VARIABLE","$proxies",77],")",["T_WHITESPACE"," ",77],">",["T_WHITESPACE"," ",77],["T_LNUMBER","0",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n        ",77],["T_VARIABLE","$request",78],["T_DOUBLE_COLON","::",78],["T_STRING","setTrustedProxies",78],"(",["T_VARIABLE","$proxies",78],")",";",["T_WHITESPACE","\n      ",78],"}",["T_WHITESPACE","\n    ",79],"}",["T_WHITESPACE","\n  ",80],"}",["T_WHITESPACE","\n\n",81],"}",["T_WHITESPACE","\n",83]]
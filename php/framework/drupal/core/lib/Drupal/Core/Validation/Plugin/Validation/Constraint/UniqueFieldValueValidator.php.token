[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Validation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Validation",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Constraint",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Validator",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Constraint",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Validator",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConstraintValidator",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Validates that a field is unique for the given entity type.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","UniqueFieldValueValidator",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","ConstraintValidator",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",14],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_FUNCTION","function",17],["T_WHITESPACE"," ",17],["T_STRING","validate",17],"(",["T_VARIABLE","$items",17],",",["T_WHITESPACE"," ",17],["T_STRING","Constraint",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$constraint",17],")",["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n    ",17],["T_IF","if",18],["T_WHITESPACE"," ",18],"(","!",["T_VARIABLE","$item",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],["T_VARIABLE","$items",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","first",18],"(",")",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n      ",18],["T_RETURN","return",19],";",["T_WHITESPACE","\n    ",19],"}",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$field_name",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$items",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","getFieldDefinition",21],"(",")",["T_OBJECT_OPERATOR","->",21],["T_STRING","getName",21],"(",")",";",["T_WHITESPACE","\n    ",21],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Entity\\EntityInterface $entity *\/",22],["T_WHITESPACE","\n    ",22],["T_VARIABLE","$entity",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$items",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getEntity",23],"(",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$entity_type_id",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$entity",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","getEntityTypeId",24],"(",")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$id_key",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$entity",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","getEntityType",25],"(",")",["T_OBJECT_OPERATOR","->",25],["T_STRING","getKey",25],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",25],")",";",["T_WHITESPACE","\n\n    ",25],["T_VARIABLE","$value_taken",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_BOOL_CAST","(bool)",27],["T_WHITESPACE"," ",27],["T_NS_SEPARATOR","\\",27],["T_STRING","Drupal",27],["T_DOUBLE_COLON","::",27],["T_STRING","entityQuery",27],"(",["T_VARIABLE","$entity_type_id",27],")",["T_WHITESPACE","\n      ",27],["T_COMMENT","\/\/ The id could be NULL, so we cast it to 0 in that case.\n",28],["T_WHITESPACE","      ",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","condition",29],"(",["T_VARIABLE","$id_key",29],",",["T_WHITESPACE"," ",29],["T_INT_CAST","(int)",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$items",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getEntity",29],"(",")",["T_OBJECT_OPERATOR","->",29],["T_STRING","id",29],"(",")",",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'<>'",29],")",["T_WHITESPACE","\n      ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","condition",30],"(",["T_VARIABLE","$field_name",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$item",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","value",30],")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","range",31],"(",["T_LNUMBER","0",31],",",["T_WHITESPACE"," ",31],["T_LNUMBER","1",31],")",["T_WHITESPACE","\n      ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","count",32],"(",")",["T_WHITESPACE","\n      ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","execute",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$value_taken",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","context",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","addViolation",36],"(",["T_VARIABLE","$constraint",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","message",36],",",["T_WHITESPACE"," ",36],"[",["T_WHITESPACE","\n        ",36],["T_CONSTANT_ENCAPSED_STRING","'%value'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$item",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","value",37],",",["T_WHITESPACE","\n        ",37],["T_CONSTANT_ENCAPSED_STRING","'@entity_type'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entity",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getEntityType",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","getLowercaseLabel",38],"(",")",",",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'@field_name'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_STRING","Unicode",39],["T_DOUBLE_COLON","::",39],["T_STRING","strtolower",39],"(",["T_VARIABLE","$items",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getFieldDefinition",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","getLabel",39],"(",")",")",",",["T_WHITESPACE","\n      ",39],"]",")",";",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n",42],"}",["T_WHITESPACE","\n",44]]
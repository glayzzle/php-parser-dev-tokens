[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Updater",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FileTransfer",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FileTransferException",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FileTransfer",7],["T_NS_SEPARATOR","\\",7],["T_STRING","FileTransfer",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Defines the base class for Updaters used in Drupal.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","Updater",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Directory to install from.\n   *\n   * @var string\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$source",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The root directory under which new projects will be copied.\n   *\n   * @var string\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$root",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Constructs a new updater.\n   *\n   * @param string $source\n   *   Directory to install from.\n   * @param string $root\n   *   The root directory under which the project will be copied to if it's a\n   *   new project. Usually this is the app root (the directory in which the\n   *   Drupal site is installed).\n   *\/",28],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","__construct",38],"(",["T_VARIABLE","$source",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$root",38],")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","source",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$source",39],";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","root",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$root",40],";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","name",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","self",41],["T_DOUBLE_COLON","::",41],["T_STRING","getProjectName",41],"(",["T_VARIABLE","$source",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","title",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_STRING","self",42],["T_DOUBLE_COLON","::",42],["T_STRING","getProjectTitle",42],"(",["T_VARIABLE","$source",42],")",";",["T_WHITESPACE","\n  ",42],"}",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Returns an Updater of the appropriate type depending on the source.\n   *\n   * If a directory is provided which contains a module, will return a\n   * ModuleUpdater.\n   *\n   * @param string $source\n   *   Directory of a Drupal project.\n   * @param string $root\n   *   The root directory under which the project will be copied to if it's a\n   *   new project. Usually this is the app root (the directory in which the\n   *   Drupal site is installed).\n   *\n   * @return \\Drupal\\Core\\Updater\\Updater\n   *   A new Drupal\\Core\\Updater\\Updater object.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   *\/",45],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_STATIC","static",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","factory",63],"(",["T_VARIABLE","$source",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$root",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_IF","if",64],["T_WHITESPACE"," ",64],"(",["T_STRING","is_dir",64],"(",["T_VARIABLE","$source",64],")",")",["T_WHITESPACE"," ",64],"{",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$updater",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_STRING","self",65],["T_DOUBLE_COLON","::",65],["T_STRING","getUpdaterFromDirectory",65],"(",["T_VARIABLE","$source",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n    ",66],["T_ELSE","else",67],["T_WHITESPACE"," ",67],"{",["T_WHITESPACE","\n      ",67],["T_THROW","throw",68],["T_WHITESPACE"," ",68],["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","UpdaterException",68],"(",["T_STRING","t",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to determine the type of the source directory.'",68],")",")",";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n    ",69],["T_RETURN","return",70],["T_WHITESPACE"," ",70],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$updater",70],"(",["T_VARIABLE","$source",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$root",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Determines which Updater class can operate on the given directory.\n   *\n   * @param string $directory\n   *   Extracted Drupal project.\n   *\n   * @return string\n   *   The class name which can work with this project type.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   *\/",73],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_STATIC","static",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","getUpdaterFromDirectory",84],"(",["T_VARIABLE","$directory",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_COMMENT","\/\/ Gets a list of possible implementing classes.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$updaters",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_STRING","drupal_get_updaters",86],"(",")",";",["T_WHITESPACE","\n    ",86],["T_FOREACH","foreach",87],["T_WHITESPACE"," ",87],"(",["T_VARIABLE","$updaters",87],["T_WHITESPACE"," ",87],["T_AS","as",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$updater",87],")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$class",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$updater",88],"[",["T_CONSTANT_ENCAPSED_STRING","'class'",88],"]",";",["T_WHITESPACE","\n      ",88],["T_IF","if",89],["T_WHITESPACE"," ",89],"(",["T_STRING","call_user_func",89],"(",["T_ARRAY","array",89],"(",["T_VARIABLE","$class",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'canUpdateDirectory'",89],")",",",["T_WHITESPACE"," ",89],["T_VARIABLE","$directory",89],")",")",["T_WHITESPACE"," ",89],"{",["T_WHITESPACE","\n        ",89],["T_RETURN","return",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$class",90],";",["T_WHITESPACE","\n      ",90],"}",["T_WHITESPACE","\n    ",91],"}",["T_WHITESPACE","\n    ",92],["T_THROW","throw",93],["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STRING","UpdaterException",93],"(",["T_STRING","t",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Cannot determine the type of project.'",93],")",")",";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Determines what the most important (or only) info file is in a directory.\n   *\n   * Since there is no enforcement of which info file is the project's \"main\"\n   * info file, this will get one with the same name as the directory, or the\n   * first one it finds.  Not ideal, but needs a larger solution.\n   *\n   * @param string $directory\n   *   Directory to search in.\n   *\n   * @return string\n   *   Path to the info file.\n   *\/",96],["T_WHITESPACE","\n  ",108],["T_PUBLIC","public",109],["T_WHITESPACE"," ",109],["T_STATIC","static",109],["T_WHITESPACE"," ",109],["T_FUNCTION","function",109],["T_WHITESPACE"," ",109],["T_STRING","findInfoFile",109],"(",["T_VARIABLE","$directory",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$info_files",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","file_scan_directory",110],"(",["T_VARIABLE","$directory",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'\/.*\\.info.yml$\/'",110],")",";",["T_WHITESPACE","\n    ",110],["T_IF","if",111],["T_WHITESPACE"," ",111],"(","!",["T_VARIABLE","$info_files",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_STRING","FALSE",112],";",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n    ",113],["T_FOREACH","foreach",114],["T_WHITESPACE"," ",114],"(",["T_VARIABLE","$info_files",114],["T_WHITESPACE"," ",114],["T_AS","as",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$info_file",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n      ",114],["T_IF","if",115],["T_WHITESPACE"," ",115],"(",["T_STRING","Unicode",115],["T_DOUBLE_COLON","::",115],["T_STRING","substr",115],"(",["T_VARIABLE","$info_file",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","filename",115],",",["T_WHITESPACE"," ",115],["T_LNUMBER","0",115],",",["T_WHITESPACE"," ",115],"-",["T_LNUMBER","9",115],")",["T_WHITESPACE"," ",115],["T_IS_EQUAL","==",115],["T_WHITESPACE"," ",115],["T_STRING","drupal_basename",115],"(",["T_VARIABLE","$directory",115],")",")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n        ",115],["T_COMMENT","\/\/ Info file Has the same name as the directory, return it.\n",116],["T_WHITESPACE","        ",117],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$info_file",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","uri",117],";",["T_WHITESPACE","\n      ",117],"}",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n    ",119],["T_COMMENT","\/\/ Otherwise, return the first one.\n",120],["T_WHITESPACE","    ",121],["T_VARIABLE","$info_file",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","array_shift",121],"(",["T_VARIABLE","$info_files",121],")",";",["T_WHITESPACE","\n    ",121],["T_RETURN","return",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$info_file",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","uri",122],";",["T_WHITESPACE","\n  ",122],"}",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * Get Extension information from directory.\n   *\n   * @param string $directory\n   *   Directory to search in.\n   *\n   * @return array\n   *   Extension info.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   *   If the info parser does not provide any info.\n   *\/",125],["T_WHITESPACE","\n  ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_STATIC","static",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","getExtensionInfo",137],"(",["T_VARIABLE","$directory",137],")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$info_file",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STATIC","static",138],["T_DOUBLE_COLON","::",138],["T_STRING","findInfoFile",138],"(",["T_VARIABLE","$directory",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$info",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_NS_SEPARATOR","\\",139],["T_STRING","Drupal",139],["T_DOUBLE_COLON","::",139],["T_STRING","service",139],"(",["T_CONSTANT_ENCAPSED_STRING","'info_parser'",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","parse",139],"(",["T_VARIABLE","$info_file",139],")",";",["T_WHITESPACE","\n    ",139],["T_IF","if",140],["T_WHITESPACE"," ",140],"(",["T_EMPTY","empty",140],"(",["T_VARIABLE","$info",140],")",")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n      ",140],["T_THROW","throw",141],["T_WHITESPACE"," ",141],["T_NEW","new",141],["T_WHITESPACE"," ",141],["T_STRING","UpdaterException",141],"(",["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to parse info file: %info_file.'",141],",",["T_WHITESPACE"," ",141],"[",["T_CONSTANT_ENCAPSED_STRING","'%info_file'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$info_file",141],"]",")",")",";",["T_WHITESPACE","\n    ",141],"}",["T_WHITESPACE","\n\n    ",142],["T_RETURN","return",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$info",144],";",["T_WHITESPACE","\n  ",144],"}",["T_WHITESPACE","\n\n  ",145],["T_DOC_COMMENT","\/**\n   * Gets the name of the project directory (basename).\n   *\n   * @todo It would be nice, if projects contained an info file which could\n   *   provide their canonical name.\n   *\n   * @param string $directory\n   *\n   * @return string\n   *   The name of the project.\n   *\/",147],["T_WHITESPACE","\n  ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_STATIC","static",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getProjectName",158],"(",["T_VARIABLE","$directory",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_RETURN","return",159],["T_WHITESPACE"," ",159],["T_STRING","drupal_basename",159],"(",["T_VARIABLE","$directory",159],")",";",["T_WHITESPACE","\n  ",159],"}",["T_WHITESPACE","\n\n  ",160],["T_DOC_COMMENT","\/**\n   * Returns the project name from a Drupal info file.\n   *\n   * @param string $directory\n   *   Directory to search for the info file.\n   *\n   * @return string\n   *   The title of the project.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   *\/",162],["T_WHITESPACE","\n  ",172],["T_PUBLIC","public",173],["T_WHITESPACE"," ",173],["T_STATIC","static",173],["T_WHITESPACE"," ",173],["T_FUNCTION","function",173],["T_WHITESPACE"," ",173],["T_STRING","getProjectTitle",173],"(",["T_VARIABLE","$directory",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$info_file",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_STRING","self",174],["T_DOUBLE_COLON","::",174],["T_STRING","findInfoFile",174],"(",["T_VARIABLE","$directory",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$info",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_NS_SEPARATOR","\\",175],["T_STRING","Drupal",175],["T_DOUBLE_COLON","::",175],["T_STRING","service",175],"(",["T_CONSTANT_ENCAPSED_STRING","'info_parser'",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","parse",175],"(",["T_VARIABLE","$info_file",175],")",";",["T_WHITESPACE","\n    ",175],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_EMPTY","empty",176],"(",["T_VARIABLE","$info",176],")",")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_THROW","throw",177],["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","UpdaterException",177],"(",["T_STRING","t",177],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to parse info file: %info_file.'",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",["T_CONSTANT_ENCAPSED_STRING","'%info_file'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$info_file",177],")",")",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n    ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$info",179],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",179],"]",";",["T_WHITESPACE","\n  ",179],"}",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * Stores the default parameters for the Updater.\n   *\n   * @param array $overrides\n   *   An array of overrides for the default parameters.\n   *\n   * @return array\n   *   An array of configuration parameters for an update or install operation.\n   *\/",182],["T_WHITESPACE","\n  ",190],["T_PROTECTED","protected",191],["T_WHITESPACE"," ",191],["T_FUNCTION","function",191],["T_WHITESPACE"," ",191],["T_STRING","getInstallArgs",191],"(",["T_VARIABLE","$overrides",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_ARRAY","array",191],"(",")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$args",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_ARRAY","array",192],"(",["T_WHITESPACE","\n      ",192],["T_CONSTANT_ENCAPSED_STRING","'make_backup'",193],["T_WHITESPACE"," ",193],["T_DOUBLE_ARROW","=>",193],["T_WHITESPACE"," ",193],["T_STRING","FALSE",193],",",["T_WHITESPACE","\n      ",193],["T_CONSTANT_ENCAPSED_STRING","'install_dir'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getInstallDirectory",194],"(",")",",",["T_WHITESPACE","\n      ",194],["T_CONSTANT_ENCAPSED_STRING","'backup_dir'",195],["T_WHITESPACE","  ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getBackupDir",195],"(",")",",",["T_WHITESPACE","\n    ",195],")",";",["T_WHITESPACE","\n    ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_STRING","array_merge",197],"(",["T_VARIABLE","$args",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$overrides",197],")",";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Updates a Drupal project and returns a list of next actions.\n   *\n   * @param \\Drupal\\Core\\FileTransfer\\FileTransfer $filetransfer\n   *   Object that is a child of FileTransfer. Used for moving files\n   *   to the server.\n   * @param array $overrides\n   *   An array of settings to override defaults; see self::getInstallArgs().\n   *\n   * @return array\n   *   An array of links which the user may need to complete the update\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   * @throws \\Drupal\\Core\\Updater\\UpdaterFileTransferException\n   *\/",200],["T_WHITESPACE","\n  ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","update",215],"(","&",["T_VARIABLE","$filetransfer",215],",",["T_WHITESPACE"," ",215],["T_VARIABLE","$overrides",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n    ",215],["T_TRY","try",216],["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n      ",216],["T_COMMENT","\/\/ Establish arguments with possible overrides.\n",217],["T_WHITESPACE","      ",218],["T_VARIABLE","$args",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getInstallArgs",218],"(",["T_VARIABLE","$overrides",218],")",";",["T_WHITESPACE","\n\n      ",218],["T_COMMENT","\/\/ Take a Backup.\n",220],["T_WHITESPACE","      ",221],["T_IF","if",221],["T_WHITESPACE"," ",221],"(",["T_VARIABLE","$args",221],"[",["T_CONSTANT_ENCAPSED_STRING","'make_backup'",221],"]",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","makeBackup",222],"(",["T_VARIABLE","$filetransfer",222],",",["T_WHITESPACE"," ",222],["T_VARIABLE","$args",222],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",222],"]",",",["T_WHITESPACE"," ",222],["T_VARIABLE","$args",222],"[",["T_CONSTANT_ENCAPSED_STRING","'backup_dir'",222],"]",")",";",["T_WHITESPACE","\n      ",222],"}",["T_WHITESPACE","\n\n      ",223],["T_IF","if",225],["T_WHITESPACE"," ",225],"(","!",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","name",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n        ",225],["T_COMMENT","\/\/ This is bad, don't want to delete the install directory.\n",226],["T_WHITESPACE","        ",227],["T_THROW","throw",227],["T_WHITESPACE"," ",227],["T_NEW","new",227],["T_WHITESPACE"," ",227],["T_STRING","UpdaterException",227],"(",["T_STRING","t",227],"(",["T_CONSTANT_ENCAPSED_STRING","'Fatal error in update, cowardly refusing to wipe out the install directory.'",227],")",")",";",["T_WHITESPACE","\n      ",227],"}",["T_WHITESPACE","\n\n      ",228],["T_COMMENT","\/\/ Make sure the installation parent directory exists and is writable.\n",230],["T_WHITESPACE","      ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","prepareInstallDirectory",231],"(",["T_VARIABLE","$filetransfer",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$args",231],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",231],"]",")",";",["T_WHITESPACE","\n\n      ",231],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_STRING","is_dir",233],"(",["T_VARIABLE","$args",233],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",233],"]",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'\/'",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","name",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n        ",233],["T_COMMENT","\/\/ Remove the existing installed file.\n",234],["T_WHITESPACE","        ",235],["T_VARIABLE","$filetransfer",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","removeDirectory",235],"(",["T_VARIABLE","$args",235],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",235],"]",["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'\/'",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","name",235],")",";",["T_WHITESPACE","\n      ",235],"}",["T_WHITESPACE","\n\n      ",236],["T_COMMENT","\/\/ Copy the directory in place.\n",238],["T_WHITESPACE","      ",239],["T_VARIABLE","$filetransfer",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","copyDirectory",239],"(",["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","source",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$args",239],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",239],"]",")",";",["T_WHITESPACE","\n\n      ",239],["T_COMMENT","\/\/ Make sure what we just installed is readable by the web server.\n",241],["T_WHITESPACE","      ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","makeWorldReadable",242],"(",["T_VARIABLE","$filetransfer",242],",",["T_WHITESPACE"," ",242],["T_VARIABLE","$args",242],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",242],"]",["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'\/'",242],["T_WHITESPACE"," ",242],".",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","name",242],")",";",["T_WHITESPACE","\n\n      ",242],["T_COMMENT","\/\/ Run the updates.\n",244],["T_WHITESPACE","      ",245],["T_COMMENT","\/\/ @todo Decide if we want to implement this.\n",245],["T_WHITESPACE","      ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","postUpdate",246],"(",")",";",["T_WHITESPACE","\n\n      ",246],["T_COMMENT","\/\/ For now, just return a list of links of things to do.\n",248],["T_WHITESPACE","      ",249],["T_RETURN","return",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","postUpdateTasks",249],"(",")",";",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n    ",250],["T_CATCH","catch",251],["T_WHITESPACE"," ",251],"(",["T_STRING","FileTransferException",251],["T_WHITESPACE"," ",251],["T_VARIABLE","$e",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n      ",251],["T_THROW","throw",252],["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_STRING","UpdaterFileTransferException",252],"(",["T_STRING","t",252],"(",["T_CONSTANT_ENCAPSED_STRING","'File Transfer failed, reason: @reason'",252],",",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",["T_CONSTANT_ENCAPSED_STRING","'@reason'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_STRING","strtr",252],"(",["T_VARIABLE","$e",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getMessage",252],"(",")",",",["T_WHITESPACE"," ",252],["T_VARIABLE","$e",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","arguments",252],")",")",")",")",";",["T_WHITESPACE","\n    ",252],"}",["T_WHITESPACE","\n  ",253],"}",["T_WHITESPACE","\n\n  ",254],["T_DOC_COMMENT","\/**\n   * Installs a Drupal project, returns a list of next actions.\n   *\n   * @param \\Drupal\\Core\\FileTransfer\\FileTransfer $filetransfer\n   *   Object that is a child of FileTransfer.\n   * @param array $overrides\n   *   An array of settings to override defaults; see self::getInstallArgs().\n   *\n   * @return array\n   *   An array of links which the user may need to complete the install.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterFileTransferException\n   *\/",256],["T_WHITESPACE","\n  ",268],["T_PUBLIC","public",269],["T_WHITESPACE"," ",269],["T_FUNCTION","function",269],["T_WHITESPACE"," ",269],["T_STRING","install",269],"(","&",["T_VARIABLE","$filetransfer",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$overrides",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_ARRAY","array",269],"(",")",")",["T_WHITESPACE"," ",269],"{",["T_WHITESPACE","\n    ",269],["T_TRY","try",270],["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n      ",270],["T_COMMENT","\/\/ Establish arguments with possible overrides.\n",271],["T_WHITESPACE","      ",272],["T_VARIABLE","$args",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getInstallArgs",272],"(",["T_VARIABLE","$overrides",272],")",";",["T_WHITESPACE","\n\n      ",272],["T_COMMENT","\/\/ Make sure the installation parent directory exists and is writable.\n",274],["T_WHITESPACE","      ",275],["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","prepareInstallDirectory",275],"(",["T_VARIABLE","$filetransfer",275],",",["T_WHITESPACE"," ",275],["T_VARIABLE","$args",275],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",275],"]",")",";",["T_WHITESPACE","\n\n      ",275],["T_COMMENT","\/\/ Copy the directory in place.\n",277],["T_WHITESPACE","      ",278],["T_VARIABLE","$filetransfer",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","copyDirectory",278],"(",["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","source",278],",",["T_WHITESPACE"," ",278],["T_VARIABLE","$args",278],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",278],"]",")",";",["T_WHITESPACE","\n\n      ",278],["T_COMMENT","\/\/ Make sure what we just installed is readable by the web server.\n",280],["T_WHITESPACE","      ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","makeWorldReadable",281],"(",["T_VARIABLE","$filetransfer",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$args",281],"[",["T_CONSTANT_ENCAPSED_STRING","'install_dir'",281],"]",["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'\/'",281],["T_WHITESPACE"," ",281],".",["T_WHITESPACE"," ",281],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","name",281],")",";",["T_WHITESPACE","\n\n      ",281],["T_COMMENT","\/\/ Potentially enable something?\n",283],["T_WHITESPACE","      ",284],["T_COMMENT","\/\/ @todo Decide if we want to implement this.\n",284],["T_WHITESPACE","      ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","postInstall",285],"(",")",";",["T_WHITESPACE","\n      ",285],["T_COMMENT","\/\/ For now, just return a list of links of things to do.\n",286],["T_WHITESPACE","      ",287],["T_RETURN","return",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","postInstallTasks",287],"(",")",";",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n    ",288],["T_CATCH","catch",289],["T_WHITESPACE"," ",289],"(",["T_STRING","FileTransferException",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$e",289],")",["T_WHITESPACE"," ",289],"{",["T_WHITESPACE","\n      ",289],["T_THROW","throw",290],["T_WHITESPACE"," ",290],["T_NEW","new",290],["T_WHITESPACE"," ",290],["T_STRING","UpdaterFileTransferException",290],"(",["T_STRING","t",290],"(",["T_CONSTANT_ENCAPSED_STRING","'File Transfer failed, reason: @reason'",290],",",["T_WHITESPACE"," ",290],["T_ARRAY","array",290],"(",["T_CONSTANT_ENCAPSED_STRING","'@reason'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_STRING","strtr",290],"(",["T_VARIABLE","$e",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","getMessage",290],"(",")",",",["T_WHITESPACE"," ",290],["T_VARIABLE","$e",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","arguments",290],")",")",")",")",";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n  ",291],"}",["T_WHITESPACE","\n\n  ",292],["T_DOC_COMMENT","\/**\n   * Makes sure the installation parent directory exists and is writable.\n   *\n   * @param \\Drupal\\Core\\FileTransfer\\FileTransfer $filetransfer\n   *   Object which is a child of FileTransfer.\n   * @param string $directory\n   *   The installation directory to prepare.\n   *\n   * @throws \\Drupal\\Core\\Updater\\UpdaterException\n   *\/",294],["T_WHITESPACE","\n  ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","prepareInstallDirectory",304],"(","&",["T_VARIABLE","$filetransfer",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$directory",304],")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n    ",304],["T_COMMENT","\/\/ Make the parent dir writable if need be and create the dir.\n",305],["T_WHITESPACE","    ",306],["T_IF","if",306],["T_WHITESPACE"," ",306],"(","!",["T_STRING","is_dir",306],"(",["T_VARIABLE","$directory",306],")",")",["T_WHITESPACE"," ",306],"{",["T_WHITESPACE","\n      ",306],["T_VARIABLE","$parent_dir",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_STRING","dirname",307],"(",["T_VARIABLE","$directory",307],")",";",["T_WHITESPACE","\n      ",307],["T_IF","if",308],["T_WHITESPACE"," ",308],"(","!",["T_STRING","is_writable",308],"(",["T_VARIABLE","$parent_dir",308],")",")",["T_WHITESPACE"," ",308],"{",["T_WHITESPACE","\n        ",308],"@",["T_STRING","chmod",309],"(",["T_VARIABLE","$parent_dir",309],",",["T_WHITESPACE"," ",309],["T_LNUMBER","0755",309],")",";",["T_WHITESPACE","\n        ",309],["T_COMMENT","\/\/ It is expected that this will fail if the directory is owned by the\n",310],["T_WHITESPACE","        ",311],["T_COMMENT","\/\/ FTP user. If the FTP user == web server, it will succeed.\n",311],["T_WHITESPACE","        ",312],["T_TRY","try",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n          ",312],["T_VARIABLE","$filetransfer",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","createDirectory",313],"(",["T_VARIABLE","$directory",313],")",";",["T_WHITESPACE","\n          ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","makeWorldReadable",314],"(",["T_VARIABLE","$filetransfer",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$directory",314],")",";",["T_WHITESPACE","\n        ",314],"}",["T_WHITESPACE","\n        ",315],["T_CATCH","catch",316],["T_WHITESPACE"," ",316],"(",["T_STRING","FileTransferException",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$e",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n          ",316],["T_COMMENT","\/\/ Probably still not writable. Try to chmod and do it again.\n",317],["T_WHITESPACE","          ",318],["T_COMMENT","\/\/ @todo Make a new exception class so we can catch it differently.\n",318],["T_WHITESPACE","          ",319],["T_TRY","try",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n            ",319],["T_VARIABLE","$old_perms",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_STRING","substr",320],"(",["T_STRING","sprintf",320],"(",["T_CONSTANT_ENCAPSED_STRING","'%o'",320],",",["T_WHITESPACE"," ",320],["T_STRING","fileperms",320],"(",["T_VARIABLE","$parent_dir",320],")",")",",",["T_WHITESPACE"," ",320],"-",["T_LNUMBER","4",320],")",";",["T_WHITESPACE","\n            ",320],["T_VARIABLE","$filetransfer",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","chmod",321],"(",["T_VARIABLE","$parent_dir",321],",",["T_WHITESPACE"," ",321],["T_LNUMBER","0755",321],")",";",["T_WHITESPACE","\n            ",321],["T_VARIABLE","$filetransfer",322],["T_OBJECT_OPERATOR","->",322],["T_STRING","createDirectory",322],"(",["T_VARIABLE","$directory",322],")",";",["T_WHITESPACE","\n            ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","makeWorldReadable",323],"(",["T_VARIABLE","$filetransfer",323],",",["T_WHITESPACE"," ",323],["T_VARIABLE","$directory",323],")",";",["T_WHITESPACE","\n            ",323],["T_COMMENT","\/\/ Put the permissions back.\n",324],["T_WHITESPACE","            ",325],["T_VARIABLE","$filetransfer",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","chmod",325],"(",["T_VARIABLE","$parent_dir",325],",",["T_WHITESPACE"," ",325],["T_STRING","intval",325],"(",["T_VARIABLE","$old_perms",325],",",["T_WHITESPACE"," ",325],["T_LNUMBER","8",325],")",")",";",["T_WHITESPACE","\n          ",325],"}",["T_WHITESPACE","\n          ",326],["T_CATCH","catch",327],["T_WHITESPACE"," ",327],"(",["T_STRING","FileTransferException",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$e",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n            ",327],["T_VARIABLE","$message",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","t",328],"(",["T_VARIABLE","$e",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getMessage",328],"(",")",",",["T_WHITESPACE"," ",328],["T_VARIABLE","$e",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","arguments",328],")",";",["T_WHITESPACE","\n            ",328],["T_VARIABLE","$throw_message",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","t",329],"(",["T_CONSTANT_ENCAPSED_STRING","'Unable to create %directory due to the following: %reason'",329],",",["T_WHITESPACE"," ",329],["T_ARRAY","array",329],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$directory",329],",",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'%reason'",329],["T_WHITESPACE"," ",329],["T_DOUBLE_ARROW","=>",329],["T_WHITESPACE"," ",329],["T_VARIABLE","$message",329],")",")",";",["T_WHITESPACE","\n            ",329],["T_THROW","throw",330],["T_WHITESPACE"," ",330],["T_NEW","new",330],["T_WHITESPACE"," ",330],["T_STRING","UpdaterException",330],"(",["T_VARIABLE","$throw_message",330],")",";",["T_WHITESPACE","\n          ",330],"}",["T_WHITESPACE","\n        ",331],"}",["T_WHITESPACE","\n        ",332],["T_COMMENT","\/\/ Put the parent directory back.\n",333],["T_WHITESPACE","        ",334],"@",["T_STRING","chmod",334],"(",["T_VARIABLE","$parent_dir",334],",",["T_WHITESPACE"," ",334],["T_LNUMBER","0555",334],")",";",["T_WHITESPACE","\n      ",334],"}",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n  ",336],"}",["T_WHITESPACE","\n\n  ",337],["T_DOC_COMMENT","\/**\n   * Ensures that a given directory is world readable.\n   *\n   * @param \\Drupal\\Core\\FileTransfer\\FileTransfer $filetransfer\n   *   Object which is a child of FileTransfer.\n   * @param string $path\n   *   The file path to make world readable.\n   * @param bool $recursive\n   *   If the chmod should be applied recursively.\n   *\/",339],["T_WHITESPACE","\n  ",348],["T_PUBLIC","public",349],["T_WHITESPACE"," ",349],["T_FUNCTION","function",349],["T_WHITESPACE"," ",349],["T_STRING","makeWorldReadable",349],"(","&",["T_VARIABLE","$filetransfer",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$path",349],",",["T_WHITESPACE"," ",349],["T_VARIABLE","$recursive",349],["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_STRING","TRUE",349],")",["T_WHITESPACE"," ",349],"{",["T_WHITESPACE","\n    ",349],["T_IF","if",350],["T_WHITESPACE"," ",350],"(","!",["T_STRING","is_executable",350],"(",["T_VARIABLE","$path",350],")",")",["T_WHITESPACE"," ",350],"{",["T_WHITESPACE","\n      ",350],["T_COMMENT","\/\/ Set it to read + execute.\n",351],["T_WHITESPACE","      ",352],["T_VARIABLE","$new_perms",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","substr",352],"(",["T_STRING","sprintf",352],"(",["T_CONSTANT_ENCAPSED_STRING","'%o'",352],",",["T_WHITESPACE"," ",352],["T_STRING","fileperms",352],"(",["T_VARIABLE","$path",352],")",")",",",["T_WHITESPACE"," ",352],"-",["T_LNUMBER","4",352],",",["T_WHITESPACE"," ",352],"-",["T_LNUMBER","1",352],")",["T_WHITESPACE"," ",352],".",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","\"5\"",352],";",["T_WHITESPACE","\n      ",352],["T_VARIABLE","$filetransfer",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","chmod",353],"(",["T_VARIABLE","$path",353],",",["T_WHITESPACE"," ",353],["T_STRING","intval",353],"(",["T_VARIABLE","$new_perms",353],",",["T_WHITESPACE"," ",353],["T_LNUMBER","8",353],")",",",["T_WHITESPACE"," ",353],["T_VARIABLE","$recursive",353],")",";",["T_WHITESPACE","\n    ",353],"}",["T_WHITESPACE","\n  ",354],"}",["T_WHITESPACE","\n\n  ",355],["T_DOC_COMMENT","\/**\n   * Performs a backup.\n   *\n   * @param \\Drupal\\Core\\FileTransfer\\FileTransfer $filetransfer\n   *   Object which is a child of FileTransfer.\n   * @param string $from\n   *   The file path to copy from.\n   * @param string $to\n   *   The file path to copy to.\n   *\n   * @todo Not implemented: https:\/\/www.drupal.org\/node\/2474355\n   *\/",357],["T_WHITESPACE","\n  ",368],["T_PUBLIC","public",369],["T_WHITESPACE"," ",369],["T_FUNCTION","function",369],["T_WHITESPACE"," ",369],["T_STRING","makeBackup",369],"(",["T_STRING","FileTransfer",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$filetransfer",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$from",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$to",369],")",["T_WHITESPACE"," ",369],"{",["T_WHITESPACE","\n  ",369],"}",["T_WHITESPACE","\n\n  ",370],["T_DOC_COMMENT","\/**\n   * Returns the full path to a directory where backups should be written.\n   *\/",372],["T_WHITESPACE","\n  ",374],["T_PUBLIC","public",375],["T_WHITESPACE"," ",375],["T_FUNCTION","function",375],["T_WHITESPACE"," ",375],["T_STRING","getBackupDir",375],"(",")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE","\n    ",375],["T_RETURN","return",376],["T_WHITESPACE"," ",376],["T_NS_SEPARATOR","\\",376],["T_STRING","Drupal",376],["T_DOUBLE_COLON","::",376],["T_STRING","service",376],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","getViaScheme",376],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","getDirectoryPath",376],"(",")",";",["T_WHITESPACE","\n  ",376],"}",["T_WHITESPACE","\n\n  ",377],["T_DOC_COMMENT","\/**\n   * Performs actions after new code is updated.\n   *\/",379],["T_WHITESPACE","\n  ",381],["T_PUBLIC","public",382],["T_WHITESPACE"," ",382],["T_FUNCTION","function",382],["T_WHITESPACE"," ",382],["T_STRING","postUpdate",382],"(",")",["T_WHITESPACE"," ",382],"{",["T_WHITESPACE","\n  ",382],"}",["T_WHITESPACE","\n\n  ",383],["T_DOC_COMMENT","\/**\n   * Performs actions after installation.\n   *\/",385],["T_WHITESPACE","\n  ",387],["T_PUBLIC","public",388],["T_WHITESPACE"," ",388],["T_FUNCTION","function",388],["T_WHITESPACE"," ",388],["T_STRING","postInstall",388],"(",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n  ",388],"}",["T_WHITESPACE","\n\n  ",389],["T_DOC_COMMENT","\/**\n   * Returns an array of links to pages that should be visited post operation.\n   *\n   * @return array\n   *   Links which provide actions to take after the install is finished.\n   *\/",391],["T_WHITESPACE","\n  ",396],["T_PUBLIC","public",397],["T_WHITESPACE"," ",397],["T_FUNCTION","function",397],["T_WHITESPACE"," ",397],["T_STRING","postInstallTasks",397],"(",")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n    ",397],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_ARRAY","array",398],"(",")",";",["T_WHITESPACE","\n  ",398],"}",["T_WHITESPACE","\n\n  ",399],["T_DOC_COMMENT","\/**\n   * Returns an array of links to pages that should be visited post operation.\n   *\n   * @return array\n   *   Links which provide actions to take after the update is finished.\n   *\/",401],["T_WHITESPACE","\n  ",406],["T_PUBLIC","public",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","postUpdateTasks",407],"(",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n    ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",")",";",["T_WHITESPACE","\n  ",408],"}",["T_WHITESPACE","\n\n",409],"}",["T_WHITESPACE","\n",411]]
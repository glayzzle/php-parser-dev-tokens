[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Updater",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Defines a class for updating modules using\n * Drupal\\Core\\FileTransfer\\FileTransfer classes via authorize.php.\n *\/",7],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","Module",11],["T_WHITESPACE"," ",11],["T_EXTENDS","extends",11],["T_WHITESPACE"," ",11],["T_STRING","Updater",11],["T_WHITESPACE"," ",11],["T_IMPLEMENTS","implements",11],["T_WHITESPACE"," ",11],["T_STRING","UpdaterInterface",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * Returns the directory where a module should be installed.\n   *\n   * If the module is already installed, drupal_get_path() will return a valid\n   * path and we should install it there. If we're installing a new module, we\n   * always want it to go into \/modules, since that's where all the\n   * documentation recommends users install their modules, and there's no way\n   * that can conflict on a multi-site installation, since the Update manager\n   * won't let you install a new module if it's already found on your system,\n   * and if there was a copy in the top-level we'd see it.\n   *\n   * @return string\n   *   The absolute path of the directory.\n   *\/",13],["T_WHITESPACE","\n  ",26],["T_PUBLIC","public",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","getInstallDirectory",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","isInstalled",28],"(",")",["T_WHITESPACE"," ",28],["T_BOOLEAN_AND","&&",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$relative_path",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","drupal_get_path",28],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","name",28],")",")",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n      ",28],["T_COMMENT","\/\/ The return value of drupal_get_path() is always relative to the site,\n",29],["T_WHITESPACE","      ",30],["T_COMMENT","\/\/ so prepend DRUPAL_ROOT.\n",30],["T_WHITESPACE","      ",31],["T_RETURN","return",31],["T_WHITESPACE"," ",31],["T_STRING","DRUPAL_ROOT",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'\/'",31],["T_WHITESPACE"," ",31],".",["T_WHITESPACE"," ",31],["T_STRING","dirname",31],"(",["T_VARIABLE","$relative_path",31],")",";",["T_WHITESPACE","\n    ",31],"}",["T_WHITESPACE","\n    ",32],["T_ELSE","else",33],["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n      ",33],["T_COMMENT","\/\/ When installing a new module, prepend the requested root directory.\n",34],["T_WHITESPACE","      ",35],["T_RETURN","return",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","root",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'\/'",35],["T_WHITESPACE"," ",35],".",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","getRootDirectoryRelativePath",35],"(",")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n  ",36],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_STATIC","static",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","getRootDirectoryRelativePath",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'modules'",43],";",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",46],["T_WHITESPACE","\n  ",48],["T_PUBLIC","public",49],["T_WHITESPACE"," ",49],["T_FUNCTION","function",49],["T_WHITESPACE"," ",49],["T_STRING","isInstalled",49],"(",")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n    ",49],["T_COMMENT","\/\/ Check if the module exists in the file system, regardless of whether it\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ is enabled or not.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$modules",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_NS_SEPARATOR","\\",52],["T_STRING","Drupal",52],["T_DOUBLE_COLON","::",52],["T_STRING","state",52],"(",")",["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'system.module.files'",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",")",")",";",["T_WHITESPACE","\n    ",52],["T_RETURN","return",53],["T_WHITESPACE"," ",53],["T_ISSET","isset",53],"(",["T_VARIABLE","$modules",53],"[",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","name",53],"]",")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_STATIC","static",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","canUpdateDirectory",59],"(",["T_VARIABLE","$directory",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$info",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STATIC","static",60],["T_DOUBLE_COLON","::",60],["T_STRING","getExtensionInfo",60],"(",["T_VARIABLE","$directory",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_RETURN","return",62],["T_WHITESPACE"," ",62],"(",["T_ISSET","isset",62],"(",["T_VARIABLE","$info",62],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",62],"]",")",["T_WHITESPACE"," ",62],["T_BOOLEAN_AND","&&",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$info",62],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",62],"]",["T_WHITESPACE"," ",62],["T_IS_EQUAL","==",62],["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'module'",62],")",";",["T_WHITESPACE","\n  ",62],"}",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * Determines whether this class can update the specified project.\n   *\n   * @param string $project_name\n   *   The project to check.\n   *\n   * @return bool\n   *\/",65],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","canUpdate",73],"(",["T_VARIABLE","$project_name",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_BOOL_CAST","(bool)",74],["T_WHITESPACE"," ",74],["T_STRING","drupal_get_path",74],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$project_name",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Returns available database schema updates once a new version is installed.\n   *\n   * @return array\n   *\/",77],["T_WHITESPACE","\n  ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","getSchemaUpdates",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_REQUIRE_ONCE","require_once",83],["T_WHITESPACE"," ",83],["T_STRING","DRUPAL_ROOT",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/core\/includes\/install.inc'",83],";",["T_WHITESPACE","\n    ",83],["T_REQUIRE_ONCE","require_once",84],["T_WHITESPACE"," ",84],["T_STRING","DRUPAL_ROOT",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'\/core\/includes\/update.inc'",84],";",["T_WHITESPACE","\n\n    ",84],["T_IF","if",86],["T_WHITESPACE"," ",86],"(","!",["T_STRING","self",86],["T_DOUBLE_COLON","::",86],["T_STRING","canUpdate",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","name",86],")",")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_RETURN","return",87],["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_STRING","module_load_include",89],"(",["T_CONSTANT_ENCAPSED_STRING","'install'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","name",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_VARIABLE","$updates",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","drupal_get_schema_versions",91],"(",["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","name",91],")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n      ",91],["T_RETURN","return",92],["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",";",["T_WHITESPACE","\n    ",92],"}",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$modules_with_updates",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_STRING","update_get_update_list",94],"(",")",";",["T_WHITESPACE","\n    ",94],["T_IF","if",95],["T_WHITESPACE"," ",95],"(",["T_VARIABLE","$updates",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$modules_with_updates",95],"[",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","name",95],"]",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n      ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$updates",96],"[",["T_CONSTANT_ENCAPSED_STRING","'start'",96],"]",")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n        ",96],["T_RETURN","return",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$updates",97],"[",["T_CONSTANT_ENCAPSED_STRING","'pending'",97],"]",";",["T_WHITESPACE","\n      ",97],"}",["T_WHITESPACE","\n    ",98],"}",["T_WHITESPACE","\n    ",99],["T_RETURN","return",100],["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",")",";",["T_WHITESPACE","\n  ",100],"}",["T_WHITESPACE","\n\n  ",101],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",103],["T_WHITESPACE","\n  ",105],["T_PUBLIC","public",106],["T_WHITESPACE"," ",106],["T_FUNCTION","function",106],["T_WHITESPACE"," ",106],["T_STRING","postInstallTasks",106],"(",")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n    ",106],["T_COMMENT","\/\/ Since this is being called outsite of the primary front controller,\n",107],["T_WHITESPACE","    ",108],["T_COMMENT","\/\/ the base_url needs to be set explicitly to ensure that links are\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ relative to the site root.\n",109],["T_WHITESPACE","    ",110],["T_COMMENT","\/\/ @todo Simplify with https:\/\/www.drupal.org\/node\/2548095\n",110],["T_WHITESPACE","    ",111],["T_VARIABLE","$default_options",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],"[",["T_WHITESPACE","\n      ",111],["T_CONSTANT_ENCAPSED_STRING","'#type'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'link'",112],",",["T_WHITESPACE","\n      ",112],["T_CONSTANT_ENCAPSED_STRING","'#options'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],"[",["T_WHITESPACE","\n        ",113],["T_CONSTANT_ENCAPSED_STRING","'absolute'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_STRING","TRUE",114],",",["T_WHITESPACE","\n        ",114],["T_CONSTANT_ENCAPSED_STRING","'base_url'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$GLOBALS",115],"[",["T_CONSTANT_ENCAPSED_STRING","'base_url'",115],"]",",",["T_WHITESPACE","\n      ",115],"]",",",["T_WHITESPACE","\n    ",116],"]",";",["T_WHITESPACE","\n    ",117],["T_RETURN","return",118],["T_WHITESPACE"," ",118],"[",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$default_options",119],["T_WHITESPACE"," ",119],"+",["T_WHITESPACE"," ",119],"[",["T_WHITESPACE","\n        ",119],["T_CONSTANT_ENCAPSED_STRING","'#url'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_STRING","Url",120],["T_DOUBLE_COLON","::",120],["T_STRING","fromRoute",120],"(",["T_CONSTANT_ENCAPSED_STRING","'update.module_install'",120],")",",",["T_WHITESPACE","\n        ",120],["T_CONSTANT_ENCAPSED_STRING","'#title'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_STRING","t",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Install another module'",121],")",",",["T_WHITESPACE","\n      ",121],"]",",",["T_WHITESPACE","\n      ",122],["T_VARIABLE","$default_options",123],["T_WHITESPACE"," ",123],"+",["T_WHITESPACE"," ",123],"[",["T_WHITESPACE","\n        ",123],["T_CONSTANT_ENCAPSED_STRING","'#url'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_STRING","Url",124],["T_DOUBLE_COLON","::",124],["T_STRING","fromRoute",124],"(",["T_CONSTANT_ENCAPSED_STRING","'system.modules_list'",124],")",",",["T_WHITESPACE","\n        ",124],["T_CONSTANT_ENCAPSED_STRING","'#title'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","t",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Enable newly added modules'",125],")",",",["T_WHITESPACE","\n      ",125],"]",",",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$default_options",127],["T_WHITESPACE"," ",127],"+",["T_WHITESPACE"," ",127],"[",["T_WHITESPACE","\n        ",127],["T_CONSTANT_ENCAPSED_STRING","'#url'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_STRING","Url",128],["T_DOUBLE_COLON","::",128],["T_STRING","fromRoute",128],"(",["T_CONSTANT_ENCAPSED_STRING","'system.admin'",128],")",",",["T_WHITESPACE","\n        ",128],["T_CONSTANT_ENCAPSED_STRING","'#title'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_STRING","t",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Administration pages'",129],")",",",["T_WHITESPACE","\n      ",129],"]",",",["T_WHITESPACE","\n    ",130],"]",";",["T_WHITESPACE","\n  ",131],"}",["T_WHITESPACE","\n\n  ",132],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",134],["T_WHITESPACE","\n  ",136],["T_PUBLIC","public",137],["T_WHITESPACE"," ",137],["T_FUNCTION","function",137],["T_WHITESPACE"," ",137],["T_STRING","postUpdateTasks",137],"(",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n    ",137],["T_COMMENT","\/\/ We don't want to check for DB updates here, we do that once for all\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ updated modules on the landing page.\n",139],["T_WHITESPACE","  ",140],"}",["T_WHITESPACE","\n\n",140],"}",["T_WHITESPACE","\n",142]]
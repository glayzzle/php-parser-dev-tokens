[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Core",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Ajax",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Asset",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AssetCollectionRendererInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Asset",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AssetResolverInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Asset",7],["T_NS_SEPARATOR","\\",7],["T_STRING","AttachedAssets",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Config",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ConfigFactoryInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Extension",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ModuleHandlerInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Render",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AttachmentsInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Render",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AttachmentsResponseProcessorInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Render",12],["T_NS_SEPARATOR","\\",12],["T_STRING","RendererInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Symfony",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Component",13],["T_NS_SEPARATOR","\\",13],["T_STRING","HttpFoundation",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Request",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","RequestStack",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Processes attachments of AJAX responses.\n *\n * @see \\Drupal\\Core\\Ajax\\AjaxResponse\n * @see \\Drupal\\Core\\Render\\MainContent\\AjaxRenderer\n *\/",16],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","AjaxResponseAttachmentsProcessor",22],["T_WHITESPACE"," ",22],["T_IMPLEMENTS","implements",22],["T_WHITESPACE"," ",22],["T_STRING","AttachmentsResponseProcessorInterface",22],["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The asset resolver service.\n   *\n   * @var \\Drupal\\Core\\Asset\\AssetResolverInterface\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$assetResolver",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * A config object for the system performance configuration.\n   *\n   * @var \\Drupal\\Core\\Config\\Config\n   *\/",31],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$config",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The CSS asset collection renderer service.\n   *\n   * @var \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$cssCollectionRenderer",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * The JS asset collection renderer service.\n   *\n   * @var \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$jsCollectionRenderer",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * The request stack.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\RequestStack\n   *\/",52],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$requestStack",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * The renderer.\n   *\n   * @var \\Drupal\\Core\\Render\\RendererInterface\n   *\/",59],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$renderer",64],";",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * The module handler.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",66],["T_WHITESPACE","\n  ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$moduleHandler",71],";",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Constructs a AjaxResponseAttachmentsProcessor object.\n   *\n   * @param \\Drupal\\Core\\Asset\\AssetResolverInterface $asset_resolver\n   *   An asset resolver.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   A config factory for retrieving required config objects.\n   * @param \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface $css_collection_renderer\n   *   The CSS asset collection renderer.\n   * @param \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface $js_collection_renderer\n   *   The JS asset collection renderer.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   * @param \\Drupal\\Core\\Render\\RendererInterface $renderer\n   *   The renderer.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler.\n   *\/",73],["T_WHITESPACE","\n  ",90],["T_PUBLIC","public",91],["T_WHITESPACE"," ",91],["T_FUNCTION","function",91],["T_WHITESPACE"," ",91],["T_STRING","__construct",91],"(",["T_STRING","AssetResolverInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$asset_resolver",91],",",["T_WHITESPACE"," ",91],["T_STRING","ConfigFactoryInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$config_factory",91],",",["T_WHITESPACE"," ",91],["T_STRING","AssetCollectionRendererInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$css_collection_renderer",91],",",["T_WHITESPACE"," ",91],["T_STRING","AssetCollectionRendererInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$js_collection_renderer",91],",",["T_WHITESPACE"," ",91],["T_STRING","RequestStack",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$request_stack",91],",",["T_WHITESPACE"," ",91],["T_STRING","RendererInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$renderer",91],",",["T_WHITESPACE"," ",91],["T_STRING","ModuleHandlerInterface",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$module_handler",91],")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assetResolver",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$asset_resolver",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","config",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$config_factory",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_CONSTANT_ENCAPSED_STRING","'system.performance'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","cssCollectionRenderer",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$css_collection_renderer",94],";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","jsCollectionRenderer",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$js_collection_renderer",95],";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","requestStack",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$request_stack",96],";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","renderer",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$renderer",97],";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","moduleHandler",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$module_handler",98],";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",101],["T_WHITESPACE","\n  ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","processAttachments",104],"(",["T_STRING","AttachmentsInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$response",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_COMMENT","\/\/ @todo Convert to assertion once https:\/\/www.drupal.org\/node\/2408013 lands\n",105],["T_WHITESPACE","    ",106],["T_IF","if",106],["T_WHITESPACE"," ",106],"(","!",["T_VARIABLE","$response",106],["T_WHITESPACE"," ",106],["T_INSTANCEOF","instanceof",106],["T_WHITESPACE"," ",106],["T_STRING","AjaxResponse",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n      ",106],["T_THROW","throw",107],["T_WHITESPACE"," ",107],["T_NEW","new",107],["T_WHITESPACE"," ",107],["T_NS_SEPARATOR","\\",107],["T_STRING","InvalidArgumentException",107],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Ajax\\AjaxResponse instance expected.'",107],")",";",["T_WHITESPACE","\n    ",107],"}",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$request",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","requestStack",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getCurrentRequest",110],"(",")",";",["T_WHITESPACE","\n\n    ",110],["T_IF","if",112],["T_WHITESPACE"," ",112],"(",["T_VARIABLE","$response",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","getContent",112],"(",")",["T_WHITESPACE"," ",112],["T_IS_EQUAL","==",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'{}'",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n      ",112],["T_VARIABLE","$response",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","setData",113],"(",["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","buildAttachmentsCommands",113],"(",["T_VARIABLE","$response",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$request",113],")",")",";",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n\n    ",114],["T_RETURN","return",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$response",116],";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Prepares the AJAX commands to attach assets.\n   *\n   * @param \\Drupal\\Core\\Ajax\\AjaxResponse $response\n   *   The AJAX response to update.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request object that the AJAX is responding to.\n   *\n   * @return array\n   *   An array of commands ready to be returned as JSON.\n   *\/",119],["T_WHITESPACE","\n  ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_FUNCTION","function",130],["T_WHITESPACE"," ",130],["T_STRING","buildAttachmentsCommands",130],"(",["T_STRING","AjaxResponse",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$response",130],",",["T_WHITESPACE"," ",130],["T_STRING","Request",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$request",130],")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$ajax_page_state",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","request",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","get",131],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_page_state'",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Aggregate CSS\/JS if necessary, but only during normal site operation.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$optimize_css",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],"!",["T_STRING","defined",134],"(",["T_CONSTANT_ENCAPSED_STRING","'MAINTENANCE_MODE'",134],")",["T_WHITESPACE"," ",134],["T_BOOLEAN_AND","&&",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","config",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'css.preprocess'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$optimize_js",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],"!",["T_STRING","defined",135],"(",["T_CONSTANT_ENCAPSED_STRING","'MAINTENANCE_MODE'",135],")",["T_WHITESPACE"," ",135],["T_BOOLEAN_AND","&&",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","config",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'js.preprocess'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_VARIABLE","$attachments",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_VARIABLE","$response",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getAttachments",137],"(",")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Resolve the attached libraries into asset collections.\n",139],["T_WHITESPACE","    ",140],["T_VARIABLE","$assets",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_NEW","new",140],["T_WHITESPACE"," ",140],["T_STRING","AttachedAssets",140],"(",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$assets",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","setLibraries",141],"(",["T_ISSET","isset",141],"(",["T_VARIABLE","$attachments",141],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",141],"]",")",["T_WHITESPACE"," ",141],"?",["T_WHITESPACE"," ",141],["T_VARIABLE","$attachments",141],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",141],"]",["T_WHITESPACE"," ",141],":",["T_WHITESPACE"," ",141],"[","]",")",["T_WHITESPACE","\n      ",141],["T_OBJECT_OPERATOR","->",142],["T_STRING","setAlreadyLoadedLibraries",142],"(",["T_ISSET","isset",142],"(",["T_VARIABLE","$ajax_page_state",142],"[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",142],"]",")",["T_WHITESPACE"," ",142],"?",["T_WHITESPACE"," ",142],["T_STRING","explode",142],"(",["T_CONSTANT_ENCAPSED_STRING","','",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$ajax_page_state",142],"[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",142],"]",")",["T_WHITESPACE"," ",142],":",["T_WHITESPACE"," ",142],"[","]",")",["T_WHITESPACE","\n      ",142],["T_OBJECT_OPERATOR","->",143],["T_STRING","setSettings",143],"(",["T_ISSET","isset",143],"(",["T_VARIABLE","$attachments",143],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",143],"]",")",["T_WHITESPACE"," ",143],"?",["T_WHITESPACE"," ",143],["T_VARIABLE","$attachments",143],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",143],"]",["T_WHITESPACE"," ",143],":",["T_WHITESPACE"," ",143],"[","]",")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$css_assets",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assetResolver",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getCssAssets",144],"(",["T_VARIABLE","$assets",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$optimize_css",144],")",";",["T_WHITESPACE","\n    ",144],["T_LIST","list",145],"(",["T_VARIABLE","$js_assets_header",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$js_assets_footer",145],")",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assetResolver",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","getJsAssets",145],"(",["T_VARIABLE","$assets",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$optimize_js",145],")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ First, AttachedAssets::setLibraries() ensures duplicate libraries are\n",147],["T_WHITESPACE","    ",148],["T_COMMENT","\/\/ removed: it converts it to a set of libraries if necessary. Second,\n",148],["T_WHITESPACE","    ",149],["T_COMMENT","\/\/ AssetResolver::getJsSettings() ensures $assets contains the final set of\n",149],["T_WHITESPACE","    ",150],["T_COMMENT","\/\/ JavaScript settings. AttachmentsResponseProcessorInterface also mandates\n",150],["T_WHITESPACE","    ",151],["T_COMMENT","\/\/ that the response it processes contains the final attachment values, so\n",151],["T_WHITESPACE","    ",152],["T_COMMENT","\/\/ update both the 'library' and 'drupalSettings' attachments accordingly.\n",152],["T_WHITESPACE","    ",153],["T_VARIABLE","$attachments",153],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",153],"]",["T_WHITESPACE"," ",153],"=",["T_WHITESPACE"," ",153],["T_VARIABLE","$assets",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getLibraries",153],"(",")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$attachments",154],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",154],"]",["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_VARIABLE","$assets",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","getSettings",154],"(",")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$response",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","setAttachments",155],"(",["T_VARIABLE","$attachments",155],")",";",["T_WHITESPACE","\n\n    ",155],["T_COMMENT","\/\/ Render the HTML to load these files, and add AJAX commands to insert this\n",157],["T_WHITESPACE","    ",158],["T_COMMENT","\/\/ HTML in the page. Settings are handled separately, afterwards.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$settings",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[","]",";",["T_WHITESPACE","\n    ",159],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_ISSET","isset",160],"(",["T_VARIABLE","$js_assets_header",160],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",160],"]",")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_VARIABLE","$settings",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$js_assets_header",161],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",161],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",161],"]",";",["T_WHITESPACE","\n      ",161],["T_UNSET","unset",162],"(",["T_VARIABLE","$js_assets_header",162],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",162],"]",")",";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n    ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_ISSET","isset",164],"(",["T_VARIABLE","$js_assets_footer",164],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",164],"]",")",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$settings",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$js_assets_footer",165],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",165],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",165],"]",";",["T_WHITESPACE","\n      ",165],["T_UNSET","unset",166],"(",["T_VARIABLE","$js_assets_footer",166],"[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",166],"]",")",";",["T_WHITESPACE","\n    ",166],"}",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ Prepend commands to add the assets, preserving their relative order.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$resource_commands",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_ARRAY","array",170],"(",")",";",["T_WHITESPACE","\n    ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$css_assets",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$css_render_array",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","cssCollectionRenderer",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","render",172],"(",["T_VARIABLE","$css_assets",172],")",";",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$resource_commands",173],"[","]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_NEW","new",173],["T_WHITESPACE"," ",173],["T_STRING","AddCssCommand",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","renderer",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","renderPlain",173],"(",["T_VARIABLE","$css_render_array",173],")",")",";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n    ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$js_assets_header",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n      ",175],["T_VARIABLE","$js_header_render_array",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","jsCollectionRenderer",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","render",176],"(",["T_VARIABLE","$js_assets_header",176],")",";",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$resource_commands",177],"[","]",["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","PrependCommand",177],"(",["T_CONSTANT_ENCAPSED_STRING","'head'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","renderer",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","renderPlain",177],"(",["T_VARIABLE","$js_header_render_array",177],")",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n    ",178],["T_IF","if",179],["T_WHITESPACE"," ",179],"(",["T_VARIABLE","$js_assets_footer",179],")",["T_WHITESPACE"," ",179],"{",["T_WHITESPACE","\n      ",179],["T_VARIABLE","$js_footer_render_array",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","jsCollectionRenderer",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","render",180],"(",["T_VARIABLE","$js_assets_footer",180],")",";",["T_WHITESPACE","\n      ",180],["T_VARIABLE","$resource_commands",181],"[","]",["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_NEW","new",181],["T_WHITESPACE"," ",181],["T_STRING","AppendCommand",181],"(",["T_CONSTANT_ENCAPSED_STRING","'body'",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","renderer",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","renderPlain",181],"(",["T_VARIABLE","$js_footer_render_array",181],")",")",";",["T_WHITESPACE","\n    ",181],"}",["T_WHITESPACE","\n    ",182],["T_FOREACH","foreach",183],["T_WHITESPACE"," ",183],"(",["T_STRING","array_reverse",183],"(",["T_VARIABLE","$resource_commands",183],")",["T_WHITESPACE"," ",183],["T_AS","as",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$resource_command",183],")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$response",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","addCommand",184],"(",["T_VARIABLE","$resource_command",184],",",["T_WHITESPACE"," ",184],["T_STRING","TRUE",184],")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n\n    ",185],["T_COMMENT","\/\/ Prepend a command to merge changes and additions to drupalSettings.\n",187],["T_WHITESPACE","    ",188],["T_IF","if",188],["T_WHITESPACE"," ",188],"(","!",["T_EMPTY","empty",188],"(",["T_VARIABLE","$settings",188],")",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n      ",188],["T_COMMENT","\/\/ During Ajax requests basic path-specific settings are excluded from\n",189],["T_WHITESPACE","      ",190],["T_COMMENT","\/\/ new drupalSettings values. The original page where this request comes\n",190],["T_WHITESPACE","      ",191],["T_COMMENT","\/\/ from already has the right values. An Ajax request would update them\n",191],["T_WHITESPACE","      ",192],["T_COMMENT","\/\/ with values for the Ajax request and incorrectly override the page's\n",192],["T_WHITESPACE","      ",193],["T_COMMENT","\/\/ values.\n",193],["T_WHITESPACE","      ",194],["T_COMMENT","\/\/ @see system_js_settings_alter()\n",194],["T_WHITESPACE","      ",195],["T_UNSET","unset",195],"(",["T_VARIABLE","$settings",195],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",195],"]",")",";",["T_WHITESPACE","\n      ",195],["T_VARIABLE","$response",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","addCommand",196],"(",["T_NEW","new",196],["T_WHITESPACE"," ",196],["T_STRING","SettingsCommand",196],"(",["T_VARIABLE","$settings",196],",",["T_WHITESPACE"," ",196],["T_STRING","TRUE",196],")",",",["T_WHITESPACE"," ",196],["T_STRING","TRUE",196],")",";",["T_WHITESPACE","\n    ",196],"}",["T_WHITESPACE","\n\n    ",197],["T_VARIABLE","$commands",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_VARIABLE","$response",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","getCommands",199],"(",")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","moduleHandler",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","alter",200],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_render'",200],",",["T_WHITESPACE"," ",200],["T_VARIABLE","$commands",200],")",";",["T_WHITESPACE","\n\n    ",200],["T_RETURN","return",202],["T_WHITESPACE"," ",202],["T_VARIABLE","$commands",202],";",["T_WHITESPACE","\n  ",202],"}",["T_WHITESPACE","\n\n",203],"}",["T_WHITESPACE","\n",205]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field_ui",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldConfig",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldStorageConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","WebTestBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","views",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ViewTestData",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests deletion of a field and their dependencies in the UI.\n *\n * @group field_ui\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","FieldUIDeleteTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","WebTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","FieldUiTestTrait",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'field_ui'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'field_test'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'block'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'field_test_views'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Test views to enable\n   *\n   * @var string[]\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_STATIC","static",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$testViews",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_field_delete'",31],")",";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","setUp",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_STRING","parent",37],["T_DOUBLE_COLON","::",37],["T_STRING","setUp",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","drupalPlaceBlock",39],"(",["T_CONSTANT_ENCAPSED_STRING","'system_breadcrumb_block'",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalPlaceBlock",40],"(",["T_CONSTANT_ENCAPSED_STRING","'local_tasks_block'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalPlaceBlock",41],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Create a test user.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$admin_user",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","drupalCreateUser",44],"(",["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer node fields'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer node form display'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer node display'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer users'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer account settings'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'administer user display'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",44],")",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","drupalLogin",45],"(",["T_VARIABLE","$admin_user",45],")",";",["T_WHITESPACE","\n  ",45],"}",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * Tests that deletion removes field storages and fields as expected.\n   *\/",48],["T_WHITESPACE","\n  ",50],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","testDeleteField",51],"(",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$field_label",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","randomMachineName",52],"(",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$field_name_input",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'test'",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$field_name",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'field_test'",54],";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Create an additional node type.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$type_name1",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","strtolower",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","randomMachineName",57],"(",["T_LNUMBER","8",57],")",")",["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'_test'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$type1",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalCreateContentType",58],"(",["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$type_name1",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'type'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$type_name1",58],")",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$type_name1",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$type1",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","id",59],"(",")",";",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Create a new field.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$bundle_path1",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",62],["T_WHITESPACE"," ",62],".",["T_WHITESPACE"," ",62],["T_VARIABLE","$type_name1",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","fieldUIAddNewField",63],"(",["T_VARIABLE","$bundle_path1",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$field_name_input",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$field_label",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Create an additional node type.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$type_name2",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","strtolower",66],"(",["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","randomMachineName",66],"(",["T_LNUMBER","8",66],")",")",["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'_test'",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$type2",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","drupalCreateContentType",67],"(",["T_ARRAY","array",67],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$type_name2",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'type'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$type_name2",67],")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$type_name2",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$type2",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","id",68],"(",")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Add a field to the second node type.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$bundle_path2",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/'",71],["T_WHITESPACE"," ",71],".",["T_WHITESPACE"," ",71],["T_VARIABLE","$type_name2",71],";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","fieldUIAddExistingField",72],"(",["T_VARIABLE","$bundle_path2",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$field_name",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$field_label",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_NS_SEPARATOR","\\",74],["T_STRING","Drupal",74],["T_DOUBLE_COLON","::",74],["T_STRING","service",74],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","install",74],"(","[",["T_CONSTANT_ENCAPSED_STRING","'views'",74],"]",")",";",["T_WHITESPACE","\n    ",74],["T_STRING","ViewTestData",75],["T_DOUBLE_COLON","::",75],["T_STRING","createTestViews",75],"(",["T_STRING","get_class",75],"(",["T_VARIABLE","$this",75],")",",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'field_test_views'",75],")",")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Check the config dependencies of the first field, the field storage must\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/ not be shown as being deleted yet.\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","drupalGet",79],"(","\"",["T_VARIABLE","$bundle_path1",79],["T_ENCAPSED_AND_WHITESPACE","\/fields\/node.",79],["T_VARIABLE","$type_name1",79],["T_ENCAPSED_AND_WHITESPACE",".",79],["T_VARIABLE","$field_name",79],["T_ENCAPSED_AND_WHITESPACE","\/delete",79],"\"",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertNoText",80],"(",["T_STRING","t",80],"(",["T_CONSTANT_ENCAPSED_STRING","'The listed configuration will be deleted.'",80],")",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertNoText",81],"(",["T_STRING","t",81],"(",["T_CONSTANT_ENCAPSED_STRING","'View'",81],")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertNoText",82],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_field_delete'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Delete the first field.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","fieldUIDeleteField",85],"(",["T_VARIABLE","$bundle_path1",85],",",["T_WHITESPACE"," ",85],"\"",["T_ENCAPSED_AND_WHITESPACE","node.",85],["T_VARIABLE","$type_name1",85],["T_ENCAPSED_AND_WHITESPACE",".",85],["T_VARIABLE","$field_name",85],"\"",",",["T_WHITESPACE"," ",85],["T_VARIABLE","$field_label",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$type_name1",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_COMMENT","\/\/ Check that the field was deleted.\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertNull",88],"(",["T_STRING","FieldConfig",88],["T_DOUBLE_COLON","::",88],["T_STRING","loadByName",88],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$type_name1",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$field_name",88],")",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'Field was deleted.'",88],")",";",["T_WHITESPACE","\n    ",88],["T_COMMENT","\/\/ Check that the field storage was not deleted\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertNotNull",90],"(",["T_STRING","FieldStorageConfig",90],["T_DOUBLE_COLON","::",90],["T_STRING","loadByName",90],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",90],",",["T_WHITESPACE"," ",90],["T_VARIABLE","$field_name",90],")",",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'Field storage was not deleted.'",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Check the config dependencies of the first field.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","drupalGet",93],"(","\"",["T_VARIABLE","$bundle_path2",93],["T_ENCAPSED_AND_WHITESPACE","\/fields\/node.",93],["T_VARIABLE","$type_name2",93],["T_ENCAPSED_AND_WHITESPACE",".",93],["T_VARIABLE","$field_name",93],["T_ENCAPSED_AND_WHITESPACE","\/delete",93],"\"",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertText",94],"(",["T_STRING","t",94],"(",["T_CONSTANT_ENCAPSED_STRING","'The listed configuration will be deleted.'",94],")",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","assertText",95],"(",["T_STRING","t",95],"(",["T_CONSTANT_ENCAPSED_STRING","'View'",95],")",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertText",96],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view_field_delete'",96],")",";",["T_WHITESPACE","\n\n    ",96],["T_VARIABLE","$xml",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","cssSelect",98],"(",["T_CONSTANT_ENCAPSED_STRING","'#edit-entity-deletes'",98],")",";",["T_WHITESPACE","\n    ",98],["T_COMMENT","\/\/ Remove the wrapping HTML.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertIdentical",100],"(",["T_STRING","FALSE",100],",",["T_WHITESPACE"," ",100],["T_STRING","strpos",100],"(",["T_VARIABLE","$xml",100],"[",["T_LNUMBER","0",100],"]",["T_OBJECT_OPERATOR","->",100],["T_STRING","asXml",100],"(",")",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$field_label",100],")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'The currently being deleted field is not shown in the entity deletions.'",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Delete the second field.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","fieldUIDeleteField",103],"(",["T_VARIABLE","$bundle_path2",103],",",["T_WHITESPACE"," ",103],"\"",["T_ENCAPSED_AND_WHITESPACE","node.",103],["T_VARIABLE","$type_name2",103],["T_ENCAPSED_AND_WHITESPACE",".",103],["T_VARIABLE","$field_name",103],"\"",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$field_label",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$type_name2",103],")",";",["T_WHITESPACE","\n\n    ",103],["T_COMMENT","\/\/ Check that the field was deleted.\n",105],["T_WHITESPACE","    ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertNull",106],"(",["T_STRING","FieldConfig",106],["T_DOUBLE_COLON","::",106],["T_STRING","loadByName",106],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$type_name2",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$field_name",106],")",",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Field was deleted.'",106],")",";",["T_WHITESPACE","\n    ",106],["T_COMMENT","\/\/ Check that the field storage was deleted too.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertNull",108],"(",["T_STRING","FieldStorageConfig",108],["T_DOUBLE_COLON","::",108],["T_STRING","loadByName",108],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$field_name",108],")",",",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'Field storage was deleted.'",108],")",";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n",109],"}",["T_WHITESPACE","\n",111]]
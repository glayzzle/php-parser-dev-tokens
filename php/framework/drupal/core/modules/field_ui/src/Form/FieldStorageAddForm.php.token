[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","field_ui",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Form",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigFactoryInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Query",6],["T_NS_SEPARATOR","\\",6],["T_STRING","QueryFactory",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityManagerInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldTypePluginManagerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Form",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FormBase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Form",10],["T_NS_SEPARATOR","\\",10],["T_STRING","FormStateInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","field",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","FieldStorageConfig",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","field",12],["T_NS_SEPARATOR","\\",12],["T_STRING","FieldStorageConfigInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","field_ui",13],["T_NS_SEPARATOR","\\",13],["T_STRING","FieldUI",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerInterface",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Provides a form for the \"field storage\" add page.\n *\/",16],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","FieldStorageAddForm",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","FormBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The name of the entity type.\n   *\n   * @var string\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$entityTypeId",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The entity bundle.\n   *\n   * @var string\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$bundle",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManager\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$entityManager",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * The field type plugin manager.\n   *\n   * @var \\Drupal\\Core\\Field\\FieldTypePluginManagerInterface\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$fieldTypePluginManager",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * The query factory to create entity queries.\n   *\n   * @var \\Drupal\\Core\\Entity\\Query\\QueryFactory\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PUBLIC","public",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$queryFactory",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * The configuration factory.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$configFactory",61],";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Constructs a new FieldStorageAddForm object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   * @param \\Drupal\\Core\\Field\\FieldTypePluginManagerInterface $field_type_plugin_manager\n   *   The field type plugin manager.\n   * @param \\Drupal\\Core\\Entity\\Query\\QueryFactory $query_factory\n   *   The entity query factory.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The configuration factory.\n   *\/",63],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","__construct",75],"(",["T_STRING","EntityManagerInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$entity_manager",75],",",["T_WHITESPACE"," ",75],["T_STRING","FieldTypePluginManagerInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$field_type_plugin_manager",75],",",["T_WHITESPACE"," ",75],["T_STRING","QueryFactory",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$query_factory",75],",",["T_WHITESPACE"," ",75],["T_STRING","ConfigFactoryInterface",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$config_factory",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","entityManager",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$entity_manager",76],";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","fieldTypePluginManager",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$field_type_plugin_manager",77],";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","queryFactory",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$query_factory",78],";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","configFactory",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$config_factory",79],";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",82],["T_WHITESPACE","\n  ",84],["T_PUBLIC","public",85],["T_WHITESPACE"," ",85],["T_FUNCTION","function",85],["T_WHITESPACE"," ",85],["T_STRING","getFormId",85],"(",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n    ",85],["T_RETURN","return",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'field_ui_field_storage_add_form'",86],";",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",89],["T_WHITESPACE","\n  ",91],["T_PUBLIC","public",92],["T_WHITESPACE"," ",92],["T_STATIC","static",92],["T_WHITESPACE"," ",92],["T_FUNCTION","function",92],["T_WHITESPACE"," ",92],["T_STRING","create",92],"(",["T_STRING","ContainerInterface",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$container",92],")",["T_WHITESPACE"," ",92],"{",["T_WHITESPACE","\n    ",92],["T_RETURN","return",93],["T_WHITESPACE"," ",93],["T_NEW","new",93],["T_WHITESPACE"," ",93],["T_STATIC","static",93],"(",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$container",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","get",94],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",94],")",",",["T_WHITESPACE","\n      ",94],["T_VARIABLE","$container",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","get",95],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.field_type'",95],")",",",["T_WHITESPACE","\n      ",95],["T_VARIABLE","$container",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","get",96],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.query'",96],")",",",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$container",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","get",97],"(",["T_CONSTANT_ENCAPSED_STRING","'config.factory'",97],")",["T_WHITESPACE","\n    ",97],")",";",["T_WHITESPACE","\n  ",98],"}",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",101],["T_WHITESPACE","\n  ",103],["T_PUBLIC","public",104],["T_WHITESPACE"," ",104],["T_FUNCTION","function",104],["T_WHITESPACE"," ",104],["T_STRING","buildForm",104],"(",["T_ARRAY","array",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$form",104],",",["T_WHITESPACE"," ",104],["T_STRING","FormStateInterface",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$form_state",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$entity_type_id",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","NULL",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$bundle",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_STRING","NULL",104],")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n    ",104],["T_IF","if",105],["T_WHITESPACE"," ",105],"(","!",["T_VARIABLE","$form_state",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","get",105],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",105],")",")",["T_WHITESPACE"," ",105],"{",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$form_state",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","set",106],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$entity_type_id",106],")",";",["T_WHITESPACE","\n    ",106],"}",["T_WHITESPACE","\n    ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(","!",["T_VARIABLE","$form_state",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",108],")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$form_state",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","set",109],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$bundle",109],")",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n\n    ",110],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","entityTypeId",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$form_state",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","get",112],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type_id'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","bundle",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$form_state",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","get",113],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",113],")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Gather valid field types.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$field_type_options",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",")",";",["T_WHITESPACE","\n    ",116],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","fieldTypePluginManager",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getGroupedDefinitions",117],"(",["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","fieldTypePluginManager",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getUiDefinitions",117],"(",")",")",["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$category",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$field_types",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$field_types",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$name",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$field_type",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n        ",118],["T_VARIABLE","$field_type_options",119],"[",["T_VARIABLE","$category",119],"]","[",["T_VARIABLE","$name",119],"]",["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$field_type",119],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",119],"]",";",["T_WHITESPACE","\n      ",119],"}",["T_WHITESPACE","\n    ",120],"}",["T_WHITESPACE","\n\n    ",121],["T_VARIABLE","$form",123],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",123],"]",["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_WHITESPACE","\n      ",123],["T_CONSTANT_ENCAPSED_STRING","'#type'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'container'",124],",",["T_WHITESPACE","\n      ",124],["T_CONSTANT_ENCAPSED_STRING","'#attributes'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'class'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_ARRAY","array",125],"(",["T_CONSTANT_ENCAPSED_STRING","'form--inline'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'clearfix'",125],")",")",",",["T_WHITESPACE","\n    ",125],")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$form",128],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",128],"]","[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",128],"]",["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n      ",128],["T_CONSTANT_ENCAPSED_STRING","'#type'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'select'",129],",",["T_WHITESPACE","\n      ",129],["T_CONSTANT_ENCAPSED_STRING","'#title'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","t",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Add a new field'",130],")",",",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'#options'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$field_type_options",131],",",["T_WHITESPACE","\n      ",131],["T_CONSTANT_ENCAPSED_STRING","'#empty_option'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","t",132],"(",["T_CONSTANT_ENCAPSED_STRING","'- Select a field type -'",132],")",",",["T_WHITESPACE","\n    ",132],")",";",["T_WHITESPACE","\n\n    ",133],["T_COMMENT","\/\/ Re-use existing field.\n",135],["T_WHITESPACE","    ",136],["T_IF","if",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$existing_field_storage_options",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","getExistingFieldStorageOptions",136],"(",")",")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$form",137],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",137],"]","[",["T_CONSTANT_ENCAPSED_STRING","'separator'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_ARRAY","array",137],"(",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'#type'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'item'",138],",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'#markup'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","t",139],"(",["T_CONSTANT_ENCAPSED_STRING","'or'",139],")",",",["T_WHITESPACE","\n      ",139],")",";",["T_WHITESPACE","\n      ",140],["T_VARIABLE","$form",141],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",141],"]","[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_ARRAY","array",141],"(",["T_WHITESPACE","\n        ",141],["T_CONSTANT_ENCAPSED_STRING","'#type'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'select'",142],",",["T_WHITESPACE","\n        ",142],["T_CONSTANT_ENCAPSED_STRING","'#title'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","t",143],"(",["T_CONSTANT_ENCAPSED_STRING","'Re-use an existing field'",143],")",",",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'#options'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$existing_field_storage_options",144],",",["T_WHITESPACE","\n        ",144],["T_CONSTANT_ENCAPSED_STRING","'#empty_option'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","t",145],"(",["T_CONSTANT_ENCAPSED_STRING","'- Select an existing field -'",145],")",",",["T_WHITESPACE","\n      ",145],")",";",["T_WHITESPACE","\n\n      ",146],["T_VARIABLE","$form",148],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'existingFieldLabels'",148],"]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getExistingFieldLabels",148],"(",["T_STRING","array_keys",148],"(",["T_VARIABLE","$existing_field_storage_options",148],")",")",";",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n    ",149],["T_ELSE","else",150],["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n      ",150],["T_COMMENT","\/\/ Provide a placeholder form element to simplify the validation code.\n",151],["T_WHITESPACE","      ",152],["T_VARIABLE","$form",152],"[",["T_CONSTANT_ENCAPSED_STRING","'add'",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_ARRAY","array",152],"(",["T_WHITESPACE","\n        ",152],["T_CONSTANT_ENCAPSED_STRING","'#type'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'value'",153],",",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'#value'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","FALSE",154],",",["T_WHITESPACE","\n      ",154],")",";",["T_WHITESPACE","\n    ",155],"}",["T_WHITESPACE","\n\n    ",156],["T_COMMENT","\/\/ Field label and field_name.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$form",159],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_wrapper'",159],"]",["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_ARRAY","array",159],"(",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'#type'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'container'",160],",",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'#states'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_ARRAY","array",161],"(",["T_WHITESPACE","\n        ",161],["T_CONSTANT_ENCAPSED_STRING","'!visible'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",["T_WHITESPACE","\n          ",162],["T_CONSTANT_ENCAPSED_STRING","':input[name=\"new_storage_type\"]'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","''",163],")",",",["T_WHITESPACE","\n        ",163],")",",",["T_WHITESPACE","\n      ",164],")",",",["T_WHITESPACE","\n    ",165],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$form",167],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_wrapper'",167],"]","[",["T_CONSTANT_ENCAPSED_STRING","'label'",167],"]",["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'#type'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'textfield'",168],",",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'#title'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","t",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Label'",169],")",",",["T_WHITESPACE","\n      ",169],["T_CONSTANT_ENCAPSED_STRING","'#size'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","15",170],",",["T_WHITESPACE","\n    ",170],")",";",["T_WHITESPACE","\n\n    ",171],["T_VARIABLE","$field_prefix",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","config",173],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui.settings'",173],")",["T_OBJECT_OPERATOR","->",173],["T_STRING","get",173],"(",["T_CONSTANT_ENCAPSED_STRING","'field_prefix'",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$form",174],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_wrapper'",174],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'#type'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'machine_name'",175],",",["T_WHITESPACE","\n      ",175],["T_COMMENT","\/\/ This field should stay LTR even for RTL languages.\n",176],["T_WHITESPACE","      ",177],["T_CONSTANT_ENCAPSED_STRING","'#field_prefix'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'<span dir=\"ltr\">'",177],["T_WHITESPACE"," ",177],".",["T_WHITESPACE"," ",177],["T_VARIABLE","$field_prefix",177],",",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'#field_suffix'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'<\/span>&lrm;'",178],",",["T_WHITESPACE","\n      ",178],["T_CONSTANT_ENCAPSED_STRING","'#size'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_LNUMBER","15",179],",",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'#description'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","t",180],"(",["T_CONSTANT_ENCAPSED_STRING","'A unique machine-readable name containing letters, numbers, and underscores.'",180],")",",",["T_WHITESPACE","\n      ",180],["T_COMMENT","\/\/ Calculate characters depending on the length of the field prefix\n",181],["T_WHITESPACE","      ",182],["T_COMMENT","\/\/ setting. Maximum length is 32.\n",182],["T_WHITESPACE","      ",183],["T_CONSTANT_ENCAPSED_STRING","'#maxlength'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_STRING","FieldStorageConfig",183],["T_DOUBLE_COLON","::",183],["T_STRING","NAME_MAX_LENGTH",183],["T_WHITESPACE"," ",183],"-",["T_WHITESPACE"," ",183],["T_STRING","strlen",183],"(",["T_VARIABLE","$field_prefix",183],")",",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'#machine_name'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_ARRAY","array",184],"(",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'source'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_ARRAY","array",185],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_wrapper'",185],",",["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'label'",185],")",",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'exists'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_ARRAY","array",186],"(",["T_VARIABLE","$this",186],",",["T_WHITESPACE"," ",186],["T_CONSTANT_ENCAPSED_STRING","'fieldNameExists'",186],")",",",["T_WHITESPACE","\n      ",186],")",",",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'#required'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_STRING","FALSE",188],",",["T_WHITESPACE","\n    ",188],")",";",["T_WHITESPACE","\n\n    ",189],["T_COMMENT","\/\/ Provide a separate label element for the \"Re-use existing field\" case\n",191],["T_WHITESPACE","    ",192],["T_COMMENT","\/\/ and place it outside the $form['add'] wrapper because those elements\n",192],["T_WHITESPACE","    ",193],["T_COMMENT","\/\/ are displayed inline.\n",193],["T_WHITESPACE","    ",194],["T_IF","if",194],["T_WHITESPACE"," ",194],"(",["T_VARIABLE","$existing_field_storage_options",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n      ",194],["T_VARIABLE","$form",195],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_label'",195],"]",["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_ARRAY","array",195],"(",["T_WHITESPACE","\n        ",195],["T_CONSTANT_ENCAPSED_STRING","'#type'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'textfield'",196],",",["T_WHITESPACE","\n        ",196],["T_CONSTANT_ENCAPSED_STRING","'#title'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","t",197],"(",["T_CONSTANT_ENCAPSED_STRING","'Label'",197],")",",",["T_WHITESPACE","\n        ",197],["T_CONSTANT_ENCAPSED_STRING","'#size'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_LNUMBER","15",198],",",["T_WHITESPACE","\n        ",198],["T_CONSTANT_ENCAPSED_STRING","'#states'",199],["T_WHITESPACE"," ",199],["T_DOUBLE_ARROW","=>",199],["T_WHITESPACE"," ",199],["T_ARRAY","array",199],"(",["T_WHITESPACE","\n          ",199],["T_CONSTANT_ENCAPSED_STRING","'!visible'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_WHITESPACE","\n            ",200],["T_CONSTANT_ENCAPSED_STRING","':input[name=\"existing_storage_name\"]'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'value'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","''",201],")",",",["T_WHITESPACE","\n          ",201],")",",",["T_WHITESPACE","\n        ",202],")",",",["T_WHITESPACE","\n      ",203],")",";",["T_WHITESPACE","\n    ",204],"}",["T_WHITESPACE","\n\n    ",205],["T_COMMENT","\/\/ Place the 'translatable' property as an explicit value so that contrib\n",207],["T_WHITESPACE","    ",208],["T_COMMENT","\/\/ modules can form_alter() the value for newly created fields. By default\n",208],["T_WHITESPACE","    ",209],["T_COMMENT","\/\/ we create field storage as translatable so it will be possible to enable\n",209],["T_WHITESPACE","    ",210],["T_COMMENT","\/\/ translation at field level.\n",210],["T_WHITESPACE","    ",211],["T_VARIABLE","$form",211],"[",["T_CONSTANT_ENCAPSED_STRING","'translatable'",211],"]",["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_ARRAY","array",211],"(",["T_WHITESPACE","\n      ",211],["T_CONSTANT_ENCAPSED_STRING","'#type'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'value'",212],",",["T_WHITESPACE","\n      ",212],["T_CONSTANT_ENCAPSED_STRING","'#value'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_STRING","TRUE",213],",",["T_WHITESPACE","\n    ",213],")",";",["T_WHITESPACE","\n\n    ",214],["T_VARIABLE","$form",216],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",216],"]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_CONSTANT_ENCAPSED_STRING","'#type'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'actions'",216],")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$form",217],"[",["T_CONSTANT_ENCAPSED_STRING","'actions'",217],"]","[",["T_CONSTANT_ENCAPSED_STRING","'submit'",217],"]",["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_ARRAY","array",217],"(",["T_WHITESPACE","\n      ",217],["T_CONSTANT_ENCAPSED_STRING","'#type'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'submit'",218],",",["T_WHITESPACE","\n      ",218],["T_CONSTANT_ENCAPSED_STRING","'#value'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","t",219],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and continue'",219],")",",",["T_WHITESPACE","\n      ",219],["T_CONSTANT_ENCAPSED_STRING","'#button_type'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'primary'",220],",",["T_WHITESPACE","\n    ",220],")",";",["T_WHITESPACE","\n\n    ",221],["T_VARIABLE","$form",223],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",223],"]","[",["T_CONSTANT_ENCAPSED_STRING","'library'",223],"]","[","]",["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'field_ui\/drupal.field_ui'",223],";",["T_WHITESPACE","\n\n    ",223],["T_RETURN","return",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$form",225],";",["T_WHITESPACE","\n  ",225],"}",["T_WHITESPACE","\n\n  ",226],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",228],["T_WHITESPACE","\n  ",230],["T_PUBLIC","public",231],["T_WHITESPACE"," ",231],["T_FUNCTION","function",231],["T_WHITESPACE"," ",231],["T_STRING","validateForm",231],"(",["T_ARRAY","array",231],["T_WHITESPACE"," ",231],"&",["T_VARIABLE","$form",231],",",["T_WHITESPACE"," ",231],["T_STRING","FormStateInterface",231],["T_WHITESPACE"," ",231],["T_VARIABLE","$form_state",231],")",["T_WHITESPACE"," ",231],"{",["T_WHITESPACE","\n    ",231],["T_COMMENT","\/\/ Missing field type.\n",232],["T_WHITESPACE","    ",233],["T_IF","if",233],["T_WHITESPACE"," ",233],"(","!",["T_VARIABLE","$form_state",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getValue",233],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",233],")",["T_WHITESPACE"," ",233],["T_BOOLEAN_AND","&&",233],["T_WHITESPACE"," ",233],"!",["T_VARIABLE","$form_state",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getValue",233],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",233],")",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$form_state",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","setErrorByName",234],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","t",234],"(",["T_CONSTANT_ENCAPSED_STRING","'You need to select a field type or an existing field.'",234],")",")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n    ",235],["T_COMMENT","\/\/ Both field type and existing field option selected. This is prevented in\n",236],["T_WHITESPACE","    ",237],["T_COMMENT","\/\/ the UI with JavaScript but we also need a proper server-side validation.\n",237],["T_WHITESPACE","    ",238],["T_ELSEIF","elseif",238],["T_WHITESPACE"," ",238],"(",["T_VARIABLE","$form_state",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getValue",238],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",238],")",["T_WHITESPACE"," ",238],["T_BOOLEAN_AND","&&",238],["T_WHITESPACE"," ",238],["T_VARIABLE","$form_state",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","getValue",238],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",238],")",")",["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n      ",238],["T_VARIABLE","$form_state",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","setErrorByName",239],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",239],",",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","t",239],"(",["T_CONSTANT_ENCAPSED_STRING","'Adding a new field and re-using an existing field at the same time is not allowed.'",239],")",")",";",["T_WHITESPACE","\n      ",239],["T_RETURN","return",240],";",["T_WHITESPACE","\n    ",240],"}",["T_WHITESPACE","\n\n    ",241],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","validateAddNew",243],"(",["T_VARIABLE","$form",243],",",["T_WHITESPACE"," ",243],["T_VARIABLE","$form_state",243],")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","validateAddExisting",244],"(",["T_VARIABLE","$form",244],",",["T_WHITESPACE"," ",244],["T_VARIABLE","$form_state",244],")",";",["T_WHITESPACE","\n  ",244],"}",["T_WHITESPACE","\n\n  ",245],["T_DOC_COMMENT","\/**\n   * Validates the 'add new field' case.\n   *\n   * @param array $form\n   *   An associative array containing the structure of the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\n   * @see \\Drupal\\field_ui\\Form\\FieldStorageAddForm::validateForm()\n   *\/",247],["T_WHITESPACE","\n  ",256],["T_PROTECTED","protected",257],["T_WHITESPACE"," ",257],["T_FUNCTION","function",257],["T_WHITESPACE"," ",257],["T_STRING","validateAddNew",257],"(",["T_ARRAY","array",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$form",257],",",["T_WHITESPACE"," ",257],["T_STRING","FormStateInterface",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$form_state",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n    ",257],["T_COMMENT","\/\/ Validate if any information was provided in the 'add new field' case.\n",258],["T_WHITESPACE","    ",259],["T_IF","if",259],["T_WHITESPACE"," ",259],"(",["T_VARIABLE","$form_state",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","getValue",259],"(",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",259],")",")",["T_WHITESPACE"," ",259],"{",["T_WHITESPACE","\n      ",259],["T_COMMENT","\/\/ Missing label.\n",260],["T_WHITESPACE","      ",261],["T_IF","if",261],["T_WHITESPACE"," ",261],"(","!",["T_VARIABLE","$form_state",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getValue",261],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",261],")",")",["T_WHITESPACE"," ",261],"{",["T_WHITESPACE","\n        ",261],["T_VARIABLE","$form_state",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","setErrorByName",262],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",262],",",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","t",262],"(",["T_CONSTANT_ENCAPSED_STRING","'Add new field: you need to provide a label.'",262],")",")",";",["T_WHITESPACE","\n      ",262],"}",["T_WHITESPACE","\n\n      ",263],["T_COMMENT","\/\/ Missing field name.\n",265],["T_WHITESPACE","      ",266],["T_IF","if",266],["T_WHITESPACE"," ",266],"(","!",["T_VARIABLE","$form_state",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","getValue",266],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",266],")",")",["T_WHITESPACE"," ",266],"{",["T_WHITESPACE","\n        ",266],["T_VARIABLE","$form_state",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","setErrorByName",267],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",267],",",["T_WHITESPACE"," ",267],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","t",267],"(",["T_CONSTANT_ENCAPSED_STRING","'Add new field: you need to provide a machine name for the field.'",267],")",")",";",["T_WHITESPACE","\n      ",267],"}",["T_WHITESPACE","\n      ",268],["T_COMMENT","\/\/ Field name validation.\n",269],["T_WHITESPACE","      ",270],["T_ELSE","else",270],["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n        ",270],["T_VARIABLE","$field_name",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$form_state",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getValue",271],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",271],")",";",["T_WHITESPACE","\n\n        ",271],["T_COMMENT","\/\/ Add the field prefix.\n",273],["T_WHITESPACE","        ",274],["T_VARIABLE","$field_name",274],["T_WHITESPACE"," ",274],"=",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","configFactory",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui.settings'",274],")",["T_OBJECT_OPERATOR","->",274],["T_STRING","get",274],"(",["T_CONSTANT_ENCAPSED_STRING","'field_prefix'",274],")",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$field_name",274],";",["T_WHITESPACE","\n        ",274],["T_VARIABLE","$form_state",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","setValueForElement",275],"(",["T_VARIABLE","$form",275],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_wrapper'",275],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",275],"]",",",["T_WHITESPACE"," ",275],["T_VARIABLE","$field_name",275],")",";",["T_WHITESPACE","\n      ",275],"}",["T_WHITESPACE","\n    ",276],"}",["T_WHITESPACE","\n  ",277],"}",["T_WHITESPACE","\n\n  ",278],["T_DOC_COMMENT","\/**\n   * Validates the 're-use existing field' case.\n   *\n   * @param array $form\n   *   An associative array containing the structure of the form.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\n   * @see \\Drupal\\field_ui\\Form\\FieldStorageAddForm::validateForm()\n   *\/",280],["T_WHITESPACE","\n  ",289],["T_PROTECTED","protected",290],["T_WHITESPACE"," ",290],["T_FUNCTION","function",290],["T_WHITESPACE"," ",290],["T_STRING","validateAddExisting",290],"(",["T_ARRAY","array",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$form",290],",",["T_WHITESPACE"," ",290],["T_STRING","FormStateInterface",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$form_state",290],")",["T_WHITESPACE"," ",290],"{",["T_WHITESPACE","\n    ",290],["T_IF","if",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$form_state",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","getValue",291],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",291],")",")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n      ",291],["T_COMMENT","\/\/ Missing label.\n",292],["T_WHITESPACE","      ",293],["T_IF","if",293],["T_WHITESPACE"," ",293],"(","!",["T_VARIABLE","$form_state",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getValue",293],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_label'",293],")",")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n        ",293],["T_VARIABLE","$form_state",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","setErrorByName",294],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_label'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","t",294],"(",["T_CONSTANT_ENCAPSED_STRING","'Re-use existing field: you need to provide a label.'",294],")",")",";",["T_WHITESPACE","\n      ",294],"}",["T_WHITESPACE","\n    ",295],"}",["T_WHITESPACE","\n  ",296],"}",["T_WHITESPACE","\n\n  ",297],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",299],["T_WHITESPACE","\n  ",301],["T_PUBLIC","public",302],["T_WHITESPACE"," ",302],["T_FUNCTION","function",302],["T_WHITESPACE"," ",302],["T_STRING","submitForm",302],"(",["T_ARRAY","array",302],["T_WHITESPACE"," ",302],"&",["T_VARIABLE","$form",302],",",["T_WHITESPACE"," ",302],["T_STRING","FormStateInterface",302],["T_WHITESPACE"," ",302],["T_VARIABLE","$form_state",302],")",["T_WHITESPACE"," ",302],"{",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$error",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],["T_STRING","FALSE",303],";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$values",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$form_state",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","getValues",304],"(",")",";",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$destinations",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_ARRAY","array",305],"(",")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$entity_type",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","entityManager",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","getDefinition",306],"(",["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","entityTypeId",306],")",";",["T_WHITESPACE","\n\n    ",306],["T_COMMENT","\/\/ Create new field.\n",308],["T_WHITESPACE","    ",309],["T_IF","if",309],["T_WHITESPACE"," ",309],"(",["T_VARIABLE","$values",309],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",309],"]",")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n      ",309],["T_VARIABLE","$field_storage_values",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],"[",["T_WHITESPACE","\n        ",310],["T_CONSTANT_ENCAPSED_STRING","'field_name'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$values",311],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",311],"]",",",["T_WHITESPACE","\n        ",311],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","entityTypeId",312],",",["T_WHITESPACE","\n        ",312],["T_CONSTANT_ENCAPSED_STRING","'type'",313],["T_WHITESPACE"," ",313],["T_DOUBLE_ARROW","=>",313],["T_WHITESPACE"," ",313],["T_VARIABLE","$values",313],"[",["T_CONSTANT_ENCAPSED_STRING","'new_storage_type'",313],"]",",",["T_WHITESPACE","\n        ",313],["T_CONSTANT_ENCAPSED_STRING","'translatable'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_VARIABLE","$values",314],"[",["T_CONSTANT_ENCAPSED_STRING","'translatable'",314],"]",",",["T_WHITESPACE","\n      ",314],"]",";",["T_WHITESPACE","\n      ",315],["T_VARIABLE","$field_values",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],"[",["T_WHITESPACE","\n        ",316],["T_CONSTANT_ENCAPSED_STRING","'field_name'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$values",317],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",317],"]",",",["T_WHITESPACE","\n        ",317],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","entityTypeId",318],",",["T_WHITESPACE","\n        ",318],["T_CONSTANT_ENCAPSED_STRING","'bundle'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","bundle",319],",",["T_WHITESPACE","\n        ",319],["T_CONSTANT_ENCAPSED_STRING","'label'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$values",320],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",320],"]",",",["T_WHITESPACE","\n        ",320],["T_COMMENT","\/\/ Field translatability should be explicitly enabled by the users.\n",321],["T_WHITESPACE","        ",322],["T_CONSTANT_ENCAPSED_STRING","'translatable'",322],["T_WHITESPACE"," ",322],["T_DOUBLE_ARROW","=>",322],["T_WHITESPACE"," ",322],["T_STRING","FALSE",322],",",["T_WHITESPACE","\n      ",322],"]",";",["T_WHITESPACE","\n      ",323],["T_VARIABLE","$widget_id",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$formatter_id",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","NULL",324],";",["T_WHITESPACE","\n\n      ",324],["T_COMMENT","\/\/ Check if we're dealing with a preconfigured field.\n",326],["T_WHITESPACE","      ",327],["T_IF","if",327],["T_WHITESPACE"," ",327],"(",["T_STRING","strpos",327],"(",["T_VARIABLE","$field_storage_values",327],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",327],"]",",",["T_WHITESPACE"," ",327],["T_CONSTANT_ENCAPSED_STRING","'field_ui:'",327],")",["T_WHITESPACE"," ",327],["T_IS_NOT_IDENTICAL","!==",327],["T_WHITESPACE"," ",327],["T_STRING","FALSE",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n        ",327],["T_LIST","list",328],"(",",",["T_WHITESPACE"," ",328],["T_VARIABLE","$field_type",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$option_key",328],")",["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","explode",328],"(",["T_CONSTANT_ENCAPSED_STRING","':'",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$field_storage_values",328],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",328],"]",",",["T_WHITESPACE"," ",328],["T_LNUMBER","3",328],")",";",["T_WHITESPACE","\n        ",328],["T_VARIABLE","$field_storage_values",329],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",329],"]",["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$field_type",329],";",["T_WHITESPACE","\n\n        ",329],["T_VARIABLE","$field_type_class",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","fieldTypePluginManager",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getDefinition",331],"(",["T_VARIABLE","$field_type",331],")","[",["T_CONSTANT_ENCAPSED_STRING","'class'",331],"]",";",["T_WHITESPACE","\n        ",331],["T_VARIABLE","$field_options",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$field_type_class",332],["T_DOUBLE_COLON","::",332],["T_STRING","getPreconfiguredOptions",332],"(",")","[",["T_VARIABLE","$option_key",332],"]",";",["T_WHITESPACE","\n\n        ",332],["T_COMMENT","\/\/ Merge in preconfigured field storage options.\n",334],["T_WHITESPACE","        ",335],["T_IF","if",335],["T_WHITESPACE"," ",335],"(",["T_ISSET","isset",335],"(",["T_VARIABLE","$field_options",335],"[",["T_CONSTANT_ENCAPSED_STRING","'field_storage_config'",335],"]",")",")",["T_WHITESPACE"," ",335],"{",["T_WHITESPACE","\n          ",335],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_ARRAY","array",336],"(",["T_CONSTANT_ENCAPSED_STRING","'cardinality'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'settings'",336],")",["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$key",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n            ",336],["T_IF","if",337],["T_WHITESPACE"," ",337],"(",["T_ISSET","isset",337],"(",["T_VARIABLE","$field_options",337],"[",["T_CONSTANT_ENCAPSED_STRING","'field_storage_config'",337],"]","[",["T_VARIABLE","$key",337],"]",")",")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n              ",337],["T_VARIABLE","$field_storage_values",338],"[",["T_VARIABLE","$key",338],"]",["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$field_options",338],"[",["T_CONSTANT_ENCAPSED_STRING","'field_storage_config'",338],"]","[",["T_VARIABLE","$key",338],"]",";",["T_WHITESPACE","\n            ",338],"}",["T_WHITESPACE","\n          ",339],"}",["T_WHITESPACE","\n        ",340],"}",["T_WHITESPACE","\n\n        ",341],["T_COMMENT","\/\/ Merge in preconfigured field options.\n",343],["T_WHITESPACE","        ",344],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_ISSET","isset",344],"(",["T_VARIABLE","$field_options",344],"[",["T_CONSTANT_ENCAPSED_STRING","'field_config'",344],"]",")",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n          ",344],["T_FOREACH","foreach",345],["T_WHITESPACE"," ",345],"(",["T_ARRAY","array",345],"(",["T_CONSTANT_ENCAPSED_STRING","'required'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'settings'",345],")",["T_WHITESPACE"," ",345],["T_AS","as",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$key",345],")",["T_WHITESPACE"," ",345],"{",["T_WHITESPACE","\n            ",345],["T_IF","if",346],["T_WHITESPACE"," ",346],"(",["T_ISSET","isset",346],"(",["T_VARIABLE","$field_options",346],"[",["T_CONSTANT_ENCAPSED_STRING","'field_config'",346],"]","[",["T_VARIABLE","$key",346],"]",")",")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n              ",346],["T_VARIABLE","$field_values",347],"[",["T_VARIABLE","$key",347],"]",["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_VARIABLE","$field_options",347],"[",["T_CONSTANT_ENCAPSED_STRING","'field_config'",347],"]","[",["T_VARIABLE","$key",347],"]",";",["T_WHITESPACE","\n            ",347],"}",["T_WHITESPACE","\n          ",348],"}",["T_WHITESPACE","\n        ",349],"}",["T_WHITESPACE","\n\n        ",350],["T_VARIABLE","$widget_id",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_ISSET","isset",352],"(",["T_VARIABLE","$field_options",352],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_form_display'",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",352],"]",")",["T_WHITESPACE"," ",352],"?",["T_WHITESPACE"," ",352],["T_VARIABLE","$field_options",352],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_form_display'",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",352],"]",["T_WHITESPACE"," ",352],":",["T_WHITESPACE"," ",352],["T_STRING","NULL",352],";",["T_WHITESPACE","\n        ",352],["T_VARIABLE","$formatter_id",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_ISSET","isset",353],"(",["T_VARIABLE","$field_options",353],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_view_display'",353],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",353],"]",")",["T_WHITESPACE"," ",353],"?",["T_WHITESPACE"," ",353],["T_VARIABLE","$field_options",353],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_view_display'",353],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",353],"]",["T_WHITESPACE"," ",353],":",["T_WHITESPACE"," ",353],["T_STRING","NULL",353],";",["T_WHITESPACE","\n      ",353],"}",["T_WHITESPACE","\n\n      ",354],["T_COMMENT","\/\/ Create the field storage and field.\n",356],["T_WHITESPACE","      ",357],["T_TRY","try",357],["T_WHITESPACE"," ",357],"{",["T_WHITESPACE","\n        ",357],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","entityManager",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getStorage",358],"(",["T_CONSTANT_ENCAPSED_STRING","'field_storage_config'",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","create",358],"(",["T_VARIABLE","$field_storage_values",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","save",358],"(",")",";",["T_WHITESPACE","\n        ",358],["T_VARIABLE","$field",359],["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","entityManager",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getStorage",359],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",359],")",["T_OBJECT_OPERATOR","->",359],["T_STRING","create",359],"(",["T_VARIABLE","$field_values",359],")",";",["T_WHITESPACE","\n        ",359],["T_VARIABLE","$field",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","save",360],"(",")",";",["T_WHITESPACE","\n\n        ",360],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","configureEntityFormDisplay",362],"(",["T_VARIABLE","$values",362],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",362],"]",",",["T_WHITESPACE"," ",362],["T_VARIABLE","$widget_id",362],")",";",["T_WHITESPACE","\n        ",362],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","configureEntityViewDisplay",363],"(",["T_VARIABLE","$values",363],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",363],"]",",",["T_WHITESPACE"," ",363],["T_VARIABLE","$formatter_id",363],")",";",["T_WHITESPACE","\n\n        ",363],["T_COMMENT","\/\/ Always show the field settings step, as the cardinality needs to be\n",365],["T_WHITESPACE","        ",366],["T_COMMENT","\/\/ configured for new fields.\n",366],["T_WHITESPACE","        ",367],["T_VARIABLE","$route_parameters",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",["T_WHITESPACE","\n          ",367],["T_CONSTANT_ENCAPSED_STRING","'field_config'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$field",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","id",368],"(",")",",",["T_WHITESPACE","\n        ",368],")",["T_WHITESPACE"," ",369],"+",["T_WHITESPACE"," ",369],["T_STRING","FieldUI",369],["T_DOUBLE_COLON","::",369],["T_STRING","getRouteBundleParameter",369],"(",["T_VARIABLE","$entity_type",369],",",["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","bundle",369],")",";",["T_WHITESPACE","\n        ",369],["T_VARIABLE","$destinations",370],"[","]",["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_ARRAY","array",370],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.field_config.",370],["T_CURLY_OPEN","{",370],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","entityTypeId",370],"}",["T_ENCAPSED_AND_WHITESPACE","_storage_edit_form",370],"\"",",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",370],["T_WHITESPACE"," ",370],["T_DOUBLE_ARROW","=>",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$route_parameters",370],")",";",["T_WHITESPACE","\n        ",370],["T_VARIABLE","$destinations",371],"[","]",["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_ARRAY","array",371],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.field_config.",371],["T_CURLY_OPEN","{",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","entityTypeId",371],"}",["T_ENCAPSED_AND_WHITESPACE","_field_edit_form",371],"\"",",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",371],["T_WHITESPACE"," ",371],["T_DOUBLE_ARROW","=>",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$route_parameters",371],")",";",["T_WHITESPACE","\n        ",371],["T_VARIABLE","$destinations",372],"[","]",["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.",372],["T_CURLY_OPEN","{",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","entityTypeId",372],"}",["T_ENCAPSED_AND_WHITESPACE",".field_ui_fields",372],"\"",",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$route_parameters",372],")",";",["T_WHITESPACE","\n\n        ",372],["T_COMMENT","\/\/ Store new field information for any additional submit handlers.\n",374],["T_WHITESPACE","        ",375],["T_VARIABLE","$form_state",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","set",375],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fields_added'",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'_add_new_field'",375],"]",",",["T_WHITESPACE"," ",375],["T_VARIABLE","$values",375],"[",["T_CONSTANT_ENCAPSED_STRING","'field_name'",375],"]",")",";",["T_WHITESPACE","\n      ",375],"}",["T_WHITESPACE","\n      ",376],["T_CATCH","catch",377],["T_WHITESPACE"," ",377],"(",["T_NS_SEPARATOR","\\",377],["T_STRING","Exception",377],["T_WHITESPACE"," ",377],["T_VARIABLE","$e",377],")",["T_WHITESPACE"," ",377],"{",["T_WHITESPACE","\n        ",377],["T_VARIABLE","$error",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_STRING","TRUE",378],";",["T_WHITESPACE","\n        ",378],["T_STRING","drupal_set_message",379],"(",["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","t",379],"(",["T_CONSTANT_ENCAPSED_STRING","'There was a problem creating field %label: @message'",379],",",["T_WHITESPACE"," ",379],["T_ARRAY","array",379],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$values",379],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",379],"]",",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'@message'",379],["T_WHITESPACE"," ",379],["T_DOUBLE_ARROW","=>",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$e",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","getMessage",379],"(",")",")",")",",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'error'",379],")",";",["T_WHITESPACE","\n      ",379],"}",["T_WHITESPACE","\n    ",380],"}",["T_WHITESPACE","\n\n    ",381],["T_COMMENT","\/\/ Re-use existing field.\n",383],["T_WHITESPACE","    ",384],["T_IF","if",384],["T_WHITESPACE"," ",384],"(",["T_VARIABLE","$values",384],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",384],"]",")",["T_WHITESPACE"," ",384],"{",["T_WHITESPACE","\n      ",384],["T_VARIABLE","$field_name",385],["T_WHITESPACE"," ",385],"=",["T_WHITESPACE"," ",385],["T_VARIABLE","$values",385],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",385],"]",";",["T_WHITESPACE","\n\n      ",385],["T_TRY","try",387],["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n        ",387],["T_VARIABLE","$field",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","entityManager",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getStorage",388],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",388],")",["T_OBJECT_OPERATOR","->",388],["T_STRING","create",388],"(",["T_ARRAY","array",388],"(",["T_WHITESPACE","\n          ",388],["T_CONSTANT_ENCAPSED_STRING","'field_name'",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$field_name",389],",",["T_WHITESPACE","\n          ",389],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","entityTypeId",390],",",["T_WHITESPACE","\n          ",390],["T_CONSTANT_ENCAPSED_STRING","'bundle'",391],["T_WHITESPACE"," ",391],["T_DOUBLE_ARROW","=>",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","bundle",391],",",["T_WHITESPACE","\n          ",391],["T_CONSTANT_ENCAPSED_STRING","'label'",392],["T_WHITESPACE"," ",392],["T_DOUBLE_ARROW","=>",392],["T_WHITESPACE"," ",392],["T_VARIABLE","$values",392],"[",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_label'",392],"]",",",["T_WHITESPACE","\n        ",392],")",")",";",["T_WHITESPACE","\n        ",393],["T_VARIABLE","$field",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","save",394],"(",")",";",["T_WHITESPACE","\n\n        ",394],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","configureEntityFormDisplay",396],"(",["T_VARIABLE","$field_name",396],")",";",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","configureEntityViewDisplay",397],"(",["T_VARIABLE","$field_name",397],")",";",["T_WHITESPACE","\n\n        ",397],["T_VARIABLE","$route_parameters",399],["T_WHITESPACE"," ",399],"=",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_WHITESPACE","\n          ",399],["T_CONSTANT_ENCAPSED_STRING","'field_config'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$field",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","id",400],"(",")",",",["T_WHITESPACE","\n        ",400],")",["T_WHITESPACE"," ",401],"+",["T_WHITESPACE"," ",401],["T_STRING","FieldUI",401],["T_DOUBLE_COLON","::",401],["T_STRING","getRouteBundleParameter",401],"(",["T_VARIABLE","$entity_type",401],",",["T_WHITESPACE"," ",401],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","bundle",401],")",";",["T_WHITESPACE","\n        ",401],["T_VARIABLE","$destinations",402],"[","]",["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_ARRAY","array",402],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.field_config.",402],["T_CURLY_OPEN","{",402],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","entityTypeId",402],"}",["T_ENCAPSED_AND_WHITESPACE","_field_edit_form",402],"\"",",",["T_WHITESPACE"," ",402],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",402],["T_WHITESPACE"," ",402],["T_DOUBLE_ARROW","=>",402],["T_WHITESPACE"," ",402],["T_VARIABLE","$route_parameters",402],")",";",["T_WHITESPACE","\n        ",402],["T_VARIABLE","$destinations",403],"[","]",["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_ARRAY","array",403],"(",["T_CONSTANT_ENCAPSED_STRING","'route_name'",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],"\"",["T_ENCAPSED_AND_WHITESPACE","entity.",403],["T_CURLY_OPEN","{",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","entityTypeId",403],"}",["T_ENCAPSED_AND_WHITESPACE",".field_ui_fields",403],"\"",",",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'route_parameters'",403],["T_WHITESPACE"," ",403],["T_DOUBLE_ARROW","=>",403],["T_WHITESPACE"," ",403],["T_VARIABLE","$route_parameters",403],")",";",["T_WHITESPACE","\n\n        ",403],["T_COMMENT","\/\/ Store new field information for any additional submit handlers.\n",405],["T_WHITESPACE","        ",406],["T_VARIABLE","$form_state",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","set",406],"(","[",["T_CONSTANT_ENCAPSED_STRING","'fields_added'",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'_add_existing_field'",406],"]",",",["T_WHITESPACE"," ",406],["T_VARIABLE","$field_name",406],")",";",["T_WHITESPACE","\n      ",406],"}",["T_WHITESPACE","\n      ",407],["T_CATCH","catch",408],["T_WHITESPACE"," ",408],"(",["T_NS_SEPARATOR","\\",408],["T_STRING","Exception",408],["T_WHITESPACE"," ",408],["T_VARIABLE","$e",408],")",["T_WHITESPACE"," ",408],"{",["T_WHITESPACE","\n        ",408],["T_VARIABLE","$error",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_STRING","TRUE",409],";",["T_WHITESPACE","\n        ",409],["T_STRING","drupal_set_message",410],"(",["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","t",410],"(",["T_CONSTANT_ENCAPSED_STRING","'There was a problem creating field %label: @message'",410],",",["T_WHITESPACE"," ",410],["T_ARRAY","array",410],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$values",410],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",410],"]",",",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'@message'",410],["T_WHITESPACE"," ",410],["T_DOUBLE_ARROW","=>",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$e",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","getMessage",410],"(",")",")",")",",",["T_WHITESPACE"," ",410],["T_CONSTANT_ENCAPSED_STRING","'error'",410],")",";",["T_WHITESPACE","\n      ",410],"}",["T_WHITESPACE","\n    ",411],"}",["T_WHITESPACE","\n\n    ",412],["T_IF","if",414],["T_WHITESPACE"," ",414],"(",["T_VARIABLE","$destinations",414],")",["T_WHITESPACE"," ",414],"{",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$destination",415],["T_WHITESPACE"," ",415],"=",["T_WHITESPACE"," ",415],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getDestinationArray",415],"(",")",";",["T_WHITESPACE","\n      ",415],["T_VARIABLE","$destinations",416],"[","]",["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$destination",416],"[",["T_CONSTANT_ENCAPSED_STRING","'destination'",416],"]",";",["T_WHITESPACE","\n      ",416],["T_VARIABLE","$form_state",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","setRedirectUrl",417],"(",["T_STRING","FieldUI",417],["T_DOUBLE_COLON","::",417],["T_STRING","getNextDestination",417],"(",["T_VARIABLE","$destinations",417],",",["T_WHITESPACE"," ",417],["T_VARIABLE","$form_state",417],")",")",";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n    ",418],["T_ELSEIF","elseif",419],["T_WHITESPACE"," ",419],"(","!",["T_VARIABLE","$error",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n      ",419],["T_STRING","drupal_set_message",420],"(",["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","t",420],"(",["T_CONSTANT_ENCAPSED_STRING","'Your settings have been saved.'",420],")",")",";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n  ",421],"}",["T_WHITESPACE","\n\n  ",422],["T_DOC_COMMENT","\/**\n   * Configures the newly created field for the default view and form modes.\n   *\n   * @param string $field_name\n   *   The field name.\n   * @param string|null $widget_id\n   *   (optional) The plugin ID of the widget. Defaults to NULL.\n   *\/",424],["T_WHITESPACE","\n  ",431],["T_PROTECTED","protected",432],["T_WHITESPACE"," ",432],["T_FUNCTION","function",432],["T_WHITESPACE"," ",432],["T_STRING","configureEntityFormDisplay",432],"(",["T_VARIABLE","$field_name",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$widget_id",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","NULL",432],")",["T_WHITESPACE"," ",432],"{",["T_WHITESPACE","\n    ",432],["T_COMMENT","\/\/ Make sure the field is displayed in the 'default' form mode (using\n",433],["T_WHITESPACE","    ",434],["T_COMMENT","\/\/ default widget and settings). It stays hidden for other form modes\n",434],["T_WHITESPACE","    ",435],["T_COMMENT","\/\/ until it is explicitly configured.\n",435],["T_WHITESPACE","    ",436],["T_VARIABLE","$options",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_VARIABLE","$widget_id",436],["T_WHITESPACE"," ",436],"?",["T_WHITESPACE"," ",436],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$widget_id",436],"]",["T_WHITESPACE"," ",436],":",["T_WHITESPACE"," ",436],"[","]",";",["T_WHITESPACE","\n    ",436],["T_STRING","entity_get_form_display",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","entityTypeId",437],",",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","bundle",437],",",["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'default'",437],")",["T_WHITESPACE","\n      ",437],["T_OBJECT_OPERATOR","->",438],["T_STRING","setComponent",438],"(",["T_VARIABLE","$field_name",438],",",["T_WHITESPACE"," ",438],["T_VARIABLE","$options",438],")",["T_WHITESPACE","\n      ",438],["T_OBJECT_OPERATOR","->",439],["T_STRING","save",439],"(",")",";",["T_WHITESPACE","\n  ",439],"}",["T_WHITESPACE","\n\n  ",440],["T_DOC_COMMENT","\/**\n   * Configures the newly created field for the default view and form modes.\n   *\n   * @param string $field_name\n   *   The field name.\n   * @param string|null $formatter_id\n   *   (optional) The plugin ID of the formatter. Defaults to NULL.\n   *\/",442],["T_WHITESPACE","\n  ",449],["T_PROTECTED","protected",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","configureEntityViewDisplay",450],"(",["T_VARIABLE","$field_name",450],",",["T_WHITESPACE"," ",450],["T_VARIABLE","$formatter_id",450],["T_WHITESPACE"," ",450],"=",["T_WHITESPACE"," ",450],["T_STRING","NULL",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n    ",450],["T_COMMENT","\/\/ Make sure the field is displayed in the 'default' view mode (using\n",451],["T_WHITESPACE","    ",452],["T_COMMENT","\/\/ default formatter and settings). It stays hidden for other view\n",452],["T_WHITESPACE","    ",453],["T_COMMENT","\/\/ modes until it is explicitly configured.\n",453],["T_WHITESPACE","    ",454],["T_VARIABLE","$options",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$formatter_id",454],["T_WHITESPACE"," ",454],"?",["T_WHITESPACE"," ",454],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",454],["T_WHITESPACE"," ",454],["T_DOUBLE_ARROW","=>",454],["T_WHITESPACE"," ",454],["T_VARIABLE","$formatter_id",454],"]",["T_WHITESPACE"," ",454],":",["T_WHITESPACE"," ",454],"[","]",";",["T_WHITESPACE","\n    ",454],["T_STRING","entity_get_display",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","entityTypeId",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","bundle",455],",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'default'",455],")",["T_WHITESPACE","\n      ",455],["T_OBJECT_OPERATOR","->",456],["T_STRING","setComponent",456],"(",["T_VARIABLE","$field_name",456],",",["T_WHITESPACE"," ",456],["T_VARIABLE","$options",456],")",["T_WHITESPACE","\n      ",456],["T_OBJECT_OPERATOR","->",457],["T_STRING","save",457],"(",")",";",["T_WHITESPACE","\n  ",457],"}",["T_WHITESPACE","\n\n  ",458],["T_DOC_COMMENT","\/**\n   * Returns an array of existing field storages that can be added to a bundle.\n   *\n   * @return array\n   *   An array of existing field storages keyed by name.\n   *\/",460],["T_WHITESPACE","\n  ",465],["T_PROTECTED","protected",466],["T_WHITESPACE"," ",466],["T_FUNCTION","function",466],["T_WHITESPACE"," ",466],["T_STRING","getExistingFieldStorageOptions",466],"(",")",["T_WHITESPACE"," ",466],"{",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$options",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_ARRAY","array",467],"(",")",";",["T_WHITESPACE","\n    ",467],["T_COMMENT","\/\/ Load the field_storages and build the list of options.\n",468],["T_WHITESPACE","    ",469],["T_VARIABLE","$field_types",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","fieldTypePluginManager",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getDefinitions",469],"(",")",";",["T_WHITESPACE","\n    ",469],["T_FOREACH","foreach",470],["T_WHITESPACE"," ",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","entityManager",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getFieldStorageDefinitions",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","entityTypeId",470],")",["T_WHITESPACE"," ",470],["T_AS","as",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$field_name",470],["T_WHITESPACE"," ",470],["T_DOUBLE_ARROW","=>",470],["T_WHITESPACE"," ",470],["T_VARIABLE","$field_storage",470],")",["T_WHITESPACE"," ",470],"{",["T_WHITESPACE","\n      ",470],["T_COMMENT","\/\/ Do not show:\n",471],["T_WHITESPACE","      ",472],["T_COMMENT","\/\/ - non-configurable field storages,\n",472],["T_WHITESPACE","      ",473],["T_COMMENT","\/\/ - locked field storages,\n",473],["T_WHITESPACE","      ",474],["T_COMMENT","\/\/ - field storages that should not be added via user interface,\n",474],["T_WHITESPACE","      ",475],["T_COMMENT","\/\/ - field storages that already have a field in the bundle.\n",475],["T_WHITESPACE","      ",476],["T_VARIABLE","$field_type",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_VARIABLE","$field_storage",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","getType",476],"(",")",";",["T_WHITESPACE","\n      ",476],["T_IF","if",477],["T_WHITESPACE"," ",477],"(",["T_VARIABLE","$field_storage",477],["T_WHITESPACE"," ",477],["T_INSTANCEOF","instanceof",477],["T_WHITESPACE"," ",477],["T_STRING","FieldStorageConfigInterface",477],["T_WHITESPACE","\n        ",477],["T_BOOLEAN_AND","&&",478],["T_WHITESPACE"," ",478],"!",["T_VARIABLE","$field_storage",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","isLocked",478],"(",")",["T_WHITESPACE","\n        ",478],["T_BOOLEAN_AND","&&",479],["T_WHITESPACE"," ",479],["T_EMPTY","empty",479],"(",["T_VARIABLE","$field_types",479],"[",["T_VARIABLE","$field_type",479],"]","[",["T_CONSTANT_ENCAPSED_STRING","'no_ui'",479],"]",")",["T_WHITESPACE","\n        ",479],["T_BOOLEAN_AND","&&",480],["T_WHITESPACE"," ",480],"!",["T_STRING","in_array",480],"(",["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","bundle",480],",",["T_WHITESPACE"," ",480],["T_VARIABLE","$field_storage",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","getBundles",480],"(",")",",",["T_WHITESPACE"," ",480],["T_STRING","TRUE",480],")",")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n        ",480],["T_VARIABLE","$options",481],"[",["T_VARIABLE","$field_name",481],"]",["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","t",481],"(",["T_CONSTANT_ENCAPSED_STRING","'@type: @field'",481],",",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_WHITESPACE","\n          ",481],["T_CONSTANT_ENCAPSED_STRING","'@type'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_VARIABLE","$field_types",482],"[",["T_VARIABLE","$field_type",482],"]","[",["T_CONSTANT_ENCAPSED_STRING","'label'",482],"]",",",["T_WHITESPACE","\n          ",482],["T_CONSTANT_ENCAPSED_STRING","'@field'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$field_name",483],",",["T_WHITESPACE","\n        ",483],")",")",";",["T_WHITESPACE","\n      ",484],"}",["T_WHITESPACE","\n    ",485],"}",["T_WHITESPACE","\n    ",486],["T_STRING","asort",487],"(",["T_VARIABLE","$options",487],")",";",["T_WHITESPACE","\n\n    ",487],["T_RETURN","return",489],["T_WHITESPACE"," ",489],["T_VARIABLE","$options",489],";",["T_WHITESPACE","\n  ",489],"}",["T_WHITESPACE","\n\n  ",490],["T_DOC_COMMENT","\/**\n   * Gets the human-readable labels for the given field storage names.\n   *\n   * Since not all field storages are required to have a field, we can only\n   * provide the field labels on a best-effort basis (e.g. the label of a field\n   * storage without any field attached to a bundle will be the field name).\n   *\n   * @param array $field_names\n   *   An array of field names.\n   *\n   * @return array\n   *   An array of field labels keyed by field name.\n   *\/",492],["T_WHITESPACE","\n  ",504],["T_PROTECTED","protected",505],["T_WHITESPACE"," ",505],["T_FUNCTION","function",505],["T_WHITESPACE"," ",505],["T_STRING","getExistingFieldLabels",505],"(",["T_ARRAY","array",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$field_names",505],")",["T_WHITESPACE"," ",505],"{",["T_WHITESPACE","\n    ",505],["T_COMMENT","\/\/ Get all the fields corresponding to the given field storage names and\n",506],["T_WHITESPACE","    ",507],["T_COMMENT","\/\/ this entity type.\n",507],["T_WHITESPACE","    ",508],["T_VARIABLE","$field_ids",508],["T_WHITESPACE"," ",508],"=",["T_WHITESPACE"," ",508],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","queryFactory",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","get",508],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",508],")",["T_WHITESPACE","\n      ",508],["T_OBJECT_OPERATOR","->",509],["T_STRING","condition",509],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",509],",",["T_WHITESPACE"," ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","entityTypeId",509],")",["T_WHITESPACE","\n      ",509],["T_OBJECT_OPERATOR","->",510],["T_STRING","condition",510],"(",["T_CONSTANT_ENCAPSED_STRING","'field_name'",510],",",["T_WHITESPACE"," ",510],["T_VARIABLE","$field_names",510],")",["T_WHITESPACE","\n      ",510],["T_OBJECT_OPERATOR","->",511],["T_STRING","execute",511],"(",")",";",["T_WHITESPACE","\n    ",511],["T_VARIABLE","$fields",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","entityManager",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","getStorage",512],"(",["T_CONSTANT_ENCAPSED_STRING","'field_config'",512],")",["T_OBJECT_OPERATOR","->",512],["T_STRING","loadMultiple",512],"(",["T_VARIABLE","$field_ids",512],")",";",["T_WHITESPACE","\n\n    ",512],["T_COMMENT","\/\/ Go through all the fields and use the label of the first encounter.\n",514],["T_WHITESPACE","    ",515],["T_VARIABLE","$labels",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_ARRAY","array",515],"(",")",";",["T_WHITESPACE","\n    ",515],["T_FOREACH","foreach",516],["T_WHITESPACE"," ",516],"(",["T_VARIABLE","$fields",516],["T_WHITESPACE"," ",516],["T_AS","as",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$field",516],")",["T_WHITESPACE"," ",516],"{",["T_WHITESPACE","\n      ",516],["T_IF","if",517],["T_WHITESPACE"," ",517],"(","!",["T_ISSET","isset",517],"(",["T_VARIABLE","$labels",517],"[",["T_VARIABLE","$field",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","getName",517],"(",")","]",")",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n        ",517],["T_VARIABLE","$labels",518],"[",["T_VARIABLE","$field",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","getName",518],"(",")","]",["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_VARIABLE","$field",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","label",518],"(",")",";",["T_WHITESPACE","\n      ",518],"}",["T_WHITESPACE","\n    ",519],"}",["T_WHITESPACE","\n\n    ",520],["T_COMMENT","\/\/ For field storages without any fields attached to a bundle, the default\n",522],["T_WHITESPACE","    ",523],["T_COMMENT","\/\/ label is the field name.\n",523],["T_WHITESPACE","    ",524],["T_VARIABLE","$labels",524],["T_WHITESPACE"," ",524],["T_PLUS_EQUAL","+=",524],["T_WHITESPACE"," ",524],["T_STRING","array_combine",524],"(",["T_VARIABLE","$field_names",524],",",["T_WHITESPACE"," ",524],["T_VARIABLE","$field_names",524],")",";",["T_WHITESPACE","\n\n    ",524],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_VARIABLE","$labels",526],";",["T_WHITESPACE","\n  ",526],"}",["T_WHITESPACE","\n\n  ",527],["T_DOC_COMMENT","\/**\n   * Checks if a field machine name is taken.\n   *\n   * @param string $value\n   *   The machine name, not prefixed.\n   * @param array $element\n   *   An array containing the structure of the 'field_name' element.\n   * @param \\Drupal\\Core\\Form\\FormStateInterface $form_state\n   *   The current state of the form.\n   *\n   * @return bool\n   *   Whether or not the field machine name is taken.\n   *\/",529],["T_WHITESPACE","\n  ",541],["T_PUBLIC","public",542],["T_WHITESPACE"," ",542],["T_FUNCTION","function",542],["T_WHITESPACE"," ",542],["T_STRING","fieldNameExists",542],"(",["T_VARIABLE","$value",542],",",["T_WHITESPACE"," ",542],["T_VARIABLE","$element",542],",",["T_WHITESPACE"," ",542],["T_STRING","FormStateInterface",542],["T_WHITESPACE"," ",542],["T_VARIABLE","$form_state",542],")",["T_WHITESPACE"," ",542],"{",["T_WHITESPACE","\n    ",542],["T_COMMENT","\/\/ Don't validate the case when an existing field has been selected.\n",543],["T_WHITESPACE","    ",544],["T_IF","if",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$form_state",544],["T_OBJECT_OPERATOR","->",544],["T_STRING","getValue",544],"(",["T_CONSTANT_ENCAPSED_STRING","'existing_storage_name'",544],")",")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n      ",544],["T_RETURN","return",545],["T_WHITESPACE"," ",545],["T_STRING","FALSE",545],";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n\n    ",546],["T_COMMENT","\/\/ Add the field prefix.\n",548],["T_WHITESPACE","    ",549],["T_VARIABLE","$field_name",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","configFactory",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","get",549],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui.settings'",549],")",["T_OBJECT_OPERATOR","->",549],["T_STRING","get",549],"(",["T_CONSTANT_ENCAPSED_STRING","'field_prefix'",549],")",["T_WHITESPACE"," ",549],".",["T_WHITESPACE"," ",549],["T_VARIABLE","$value",549],";",["T_WHITESPACE","\n\n    ",549],["T_VARIABLE","$field_storage_definitions",551],["T_WHITESPACE"," ",551],"=",["T_WHITESPACE"," ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","entityManager",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","getFieldStorageDefinitions",551],"(",["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","entityTypeId",551],")",";",["T_WHITESPACE","\n    ",551],["T_RETURN","return",552],["T_WHITESPACE"," ",552],["T_ISSET","isset",552],"(",["T_VARIABLE","$field_storage_definitions",552],"[",["T_VARIABLE","$field_name",552],"]",")",";",["T_WHITESPACE","\n  ",552],"}",["T_WHITESPACE","\n\n",553],"}",["T_WHITESPACE","\n",555]]
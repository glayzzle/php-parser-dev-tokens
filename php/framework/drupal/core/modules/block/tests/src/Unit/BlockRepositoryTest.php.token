[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Contains \\Drupal\\Tests\\block\\Unit\\BlockRepositoryTest.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","block",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Unit",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","block",10],["T_NS_SEPARATOR","\\",10],["T_STRING","BlockRepository",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Access",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AccessResult",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Block",12],["T_NS_SEPARATOR","\\",12],["T_STRING","BlockPluginInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Plugin",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ContextAwarePluginInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Tests",14],["T_NS_SEPARATOR","\\",14],["T_STRING","UnitTestCase",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * @coversDefaultClass \\Drupal\\block\\BlockRepository\n * @group block\n *\/",16],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","BlockRepositoryTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","UnitTestCase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\block\\BlockRepository\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$blockRepository",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$blockStorage",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * @var string\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$theme",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Plugin\\Context\\ContextHandlerInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$contextHandler",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","setUp",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","setUp",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$active_theme",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getMockBuilder",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Theme\\ActiveTheme'",47],")",["T_WHITESPACE","\n      ",47],["T_OBJECT_OPERATOR","->",48],["T_STRING","disableOriginalConstructor",48],"(",")",["T_WHITESPACE","\n      ",48],["T_OBJECT_OPERATOR","->",49],["T_STRING","getMock",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","theme",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","randomMachineName",50],"(",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$active_theme",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","expects",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","atLeastOnce",51],"(",")",")",["T_WHITESPACE","\n      ",51],["T_OBJECT_OPERATOR","->",52],["T_STRING","method",52],"(",["T_CONSTANT_ENCAPSED_STRING","'getName'",52],")",["T_WHITESPACE","\n      ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","willReturn",53],"(",["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","theme",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$active_theme",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","expects",54],"(",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","atLeastOnce",54],"(",")",")",["T_WHITESPACE","\n      ",54],["T_OBJECT_OPERATOR","->",55],["T_STRING","method",55],"(",["T_CONSTANT_ENCAPSED_STRING","'getRegions'",55],")",["T_WHITESPACE","\n      ",55],["T_OBJECT_OPERATOR","->",56],["T_STRING","willReturn",56],"(","[",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'top'",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'center'",58],",",["T_WHITESPACE","\n        ",58],["T_CONSTANT_ENCAPSED_STRING","'bottom'",59],",",["T_WHITESPACE","\n      ",59],"]",")",";",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$theme_manager",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getMock",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Theme\\ThemeManagerInterface'",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$theme_manager",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","expects",63],"(",["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","atLeastOnce",63],"(",")",")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","method",64],"(",["T_CONSTANT_ENCAPSED_STRING","'getActiveTheme'",64],")",["T_WHITESPACE","\n      ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","will",65],"(",["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","returnValue",65],"(",["T_VARIABLE","$active_theme",65],")",")",";",["T_WHITESPACE","\n\n    ",65],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","contextHandler",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getMock",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Plugin\\Context\\ContextHandlerInterface'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","blockStorage",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","getMock",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\EntityStorageInterface'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$entity_manager",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getMock",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Entity\\EntityManagerInterface'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$entity_manager",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","expects",70],"(",["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","any",70],"(",")",")",["T_WHITESPACE","\n      ",70],["T_OBJECT_OPERATOR","->",71],["T_STRING","method",71],"(",["T_CONSTANT_ENCAPSED_STRING","'getStorage'",71],")",["T_WHITESPACE","\n      ",71],["T_OBJECT_OPERATOR","->",72],["T_STRING","willReturn",72],"(",["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","blockStorage",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","blockRepository",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STRING","BlockRepository",74],"(",["T_VARIABLE","$entity_manager",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$theme_manager",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","contextHandler",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Tests the retrieval of block entities.\n   *\n   * @covers ::getVisibleBlocksPerRegion\n   *\n   * @dataProvider providerBlocksConfig\n   *\/",77],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testGetVisibleBlocksPerRegion",84],"(",["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$blocks_config",84],",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$expected_blocks",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$blocks",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"[","]",";",["T_WHITESPACE","\n    ",85],["T_FOREACH","foreach",86],["T_WHITESPACE"," ",86],"(",["T_VARIABLE","$blocks_config",86],["T_WHITESPACE"," ",86],["T_AS","as",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$block_id",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$block_config",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$block",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getMock",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\block\\BlockInterface'",87],")",";",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$block",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","expects",88],"(",["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","once",88],"(",")",")",["T_WHITESPACE","\n        ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","method",89],"(",["T_CONSTANT_ENCAPSED_STRING","'access'",89],")",["T_WHITESPACE","\n        ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","will",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","returnValue",90],"(",["T_VARIABLE","$block_config",90],"[",["T_LNUMBER","0",90],"]",")",")",";",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$block",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","expects",91],"(",["T_VARIABLE","$block_config",91],"[",["T_LNUMBER","0",91],"]",["T_WHITESPACE"," ",91],"?",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","atLeastOnce",91],"(",")",["T_WHITESPACE"," ",91],":",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","never",91],"(",")",")",["T_WHITESPACE","\n        ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","method",92],"(",["T_CONSTANT_ENCAPSED_STRING","'getRegion'",92],")",["T_WHITESPACE","\n        ",92],["T_OBJECT_OPERATOR","->",93],["T_STRING","willReturn",93],"(",["T_VARIABLE","$block_config",93],"[",["T_LNUMBER","1",93],"]",")",";",["T_WHITESPACE","\n      ",93],["T_VARIABLE","$block",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","expects",94],"(",["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","any",94],"(",")",")",["T_WHITESPACE","\n        ",94],["T_OBJECT_OPERATOR","->",95],["T_STRING","method",95],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",95],")",["T_WHITESPACE","\n        ",95],["T_OBJECT_OPERATOR","->",96],["T_STRING","willReturn",96],"(",["T_VARIABLE","$block_id",96],")",";",["T_WHITESPACE","\n      ",96],["T_VARIABLE","$block",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","expects",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","any",97],"(",")",")",["T_WHITESPACE","\n        ",97],["T_OBJECT_OPERATOR","->",98],["T_STRING","method",98],"(",["T_CONSTANT_ENCAPSED_STRING","'getWeight'",98],")",["T_WHITESPACE","\n        ",98],["T_OBJECT_OPERATOR","->",99],["T_STRING","willReturn",99],"(",["T_VARIABLE","$block_config",99],"[",["T_LNUMBER","2",99],"]",")",";",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$blocks",100],"[",["T_VARIABLE","$block_id",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$block",100],";",["T_WHITESPACE","\n    ",100],"}",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","blockStorage",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","expects",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","once",103],"(",")",")",["T_WHITESPACE","\n      ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","method",104],"(",["T_CONSTANT_ENCAPSED_STRING","'loadByProperties'",104],")",["T_WHITESPACE","\n      ",104],["T_OBJECT_OPERATOR","->",105],["T_STRING","with",105],"(","[",["T_CONSTANT_ENCAPSED_STRING","'theme'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","theme",105],"]",")",["T_WHITESPACE","\n      ",105],["T_OBJECT_OPERATOR","->",106],["T_STRING","willReturn",106],"(",["T_VARIABLE","$blocks",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$result",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],"[","]",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$cacheable_metadata",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],"[","]",";",["T_WHITESPACE","\n    ",108],["T_FOREACH","foreach",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","blockRepository",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getVisibleBlocksPerRegion",109],"(",["T_VARIABLE","$cacheable_metadata",109],")",["T_WHITESPACE"," ",109],["T_AS","as",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$region",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$resulting_blocks",109],")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$result",110],"[",["T_VARIABLE","$region",110],"]",["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],"[","]",";",["T_WHITESPACE","\n      ",110],["T_FOREACH","foreach",111],["T_WHITESPACE"," ",111],"(",["T_VARIABLE","$resulting_blocks",111],["T_WHITESPACE"," ",111],["T_AS","as",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$plugin_id",111],["T_WHITESPACE"," ",111],["T_DOUBLE_ARROW","=>",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$block",111],")",["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n        ",111],["T_VARIABLE","$result",112],"[",["T_VARIABLE","$region",112],"]","[","]",["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$plugin_id",112],";",["T_WHITESPACE","\n      ",112],"}",["T_WHITESPACE","\n    ",113],"}",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertEquals",115],"(",["T_VARIABLE","$expected_blocks",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$result",115],")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_PUBLIC","public",118],["T_WHITESPACE"," ",118],["T_FUNCTION","function",118],["T_WHITESPACE"," ",118],["T_STRING","providerBlocksConfig",118],"(",")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$blocks_config",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'block1'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_WHITESPACE","\n        ",120],["T_STRING","AccessResult",121],["T_DOUBLE_COLON","::",121],["T_STRING","allowed",121],"(",")",",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'top'",121],",",["T_WHITESPACE"," ",121],["T_LNUMBER","0",121],["T_WHITESPACE","\n      ",121],")",",",["T_WHITESPACE","\n      ",122],["T_COMMENT","\/\/ Test a block without access.\n",123],["T_WHITESPACE","      ",124],["T_CONSTANT_ENCAPSED_STRING","'block2'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_WHITESPACE","\n        ",124],["T_STRING","AccessResult",125],["T_DOUBLE_COLON","::",125],["T_STRING","forbidden",125],"(",")",",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'bottom'",125],",",["T_WHITESPACE"," ",125],["T_LNUMBER","0",125],["T_WHITESPACE","\n      ",125],")",",",["T_WHITESPACE","\n      ",126],["T_COMMENT","\/\/ Test some blocks in the same region with specific weight.\n",127],["T_WHITESPACE","      ",128],["T_CONSTANT_ENCAPSED_STRING","'block4'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n        ",128],["T_STRING","AccessResult",129],["T_DOUBLE_COLON","::",129],["T_STRING","allowed",129],"(",")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'bottom'",129],",",["T_WHITESPACE"," ",129],["T_LNUMBER","5",129],["T_WHITESPACE","\n      ",129],")",",",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'block3'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_ARRAY","array",131],"(",["T_WHITESPACE","\n        ",131],["T_STRING","AccessResult",132],["T_DOUBLE_COLON","::",132],["T_STRING","allowed",132],"(",")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'bottom'",132],",",["T_WHITESPACE"," ",132],["T_LNUMBER","5",132],["T_WHITESPACE","\n      ",132],")",",",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'block5'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_ARRAY","array",134],"(",["T_WHITESPACE","\n        ",134],["T_STRING","AccessResult",135],["T_DOUBLE_COLON","::",135],["T_STRING","allowed",135],"(",")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'bottom'",135],",",["T_WHITESPACE"," ",135],"-",["T_LNUMBER","5",135],["T_WHITESPACE","\n      ",135],")",",",["T_WHITESPACE","\n    ",136],")",";",["T_WHITESPACE","\n\n    ",137],["T_VARIABLE","$test_cases",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[","]",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$test_cases",140],"[","]",["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],"[",["T_VARIABLE","$blocks_config",140],",",["T_WHITESPACE","\n      ",140],"[",["T_WHITESPACE","\n        ",141],["T_CONSTANT_ENCAPSED_STRING","'top'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],"[",["T_CONSTANT_ENCAPSED_STRING","'block1'",142],"]",",",["T_WHITESPACE","\n        ",142],["T_CONSTANT_ENCAPSED_STRING","'center'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],"[","]",",",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'bottom'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],"[",["T_CONSTANT_ENCAPSED_STRING","'block5'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'block3'",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'block4'",144],"]",",",["T_WHITESPACE","\n      ",144],"]",["T_WHITESPACE","\n    ",145],"]",";",["T_WHITESPACE","\n    ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$test_cases",147],";",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n  ",148],["T_DOC_COMMENT","\/**\n   * Tests the retrieval of block entities that are context-aware.\n   *\n   * @covers ::getVisibleBlocksPerRegion\n   *\/",150],["T_WHITESPACE","\n  ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testGetVisibleBlocksPerRegionWithContext",155],"(",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$block",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","getMock",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\block\\BlockInterface'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$block",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","expects",157],"(",["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","once",157],"(",")",")",["T_WHITESPACE","\n      ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","method",158],"(",["T_CONSTANT_ENCAPSED_STRING","'access'",158],")",["T_WHITESPACE","\n      ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","willReturn",159],"(",["T_STRING","AccessResult",159],["T_DOUBLE_COLON","::",159],["T_STRING","allowed",159],"(",")",["T_OBJECT_OPERATOR","->",159],["T_STRING","addCacheTags",159],"(","[",["T_CONSTANT_ENCAPSED_STRING","'config:block.block.block_id'",159],"]",")",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$block",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","expects",160],"(",["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","once",160],"(",")",")",["T_WHITESPACE","\n      ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","method",161],"(",["T_CONSTANT_ENCAPSED_STRING","'getRegion'",161],")",["T_WHITESPACE","\n      ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","willReturn",162],"(",["T_CONSTANT_ENCAPSED_STRING","'top'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$blocks",163],"[",["T_CONSTANT_ENCAPSED_STRING","'block_id'",163],"]",["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$block",163],";",["T_WHITESPACE","\n\n    ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","blockStorage",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","expects",165],"(",["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","once",165],"(",")",")",["T_WHITESPACE","\n      ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","method",166],"(",["T_CONSTANT_ENCAPSED_STRING","'loadByProperties'",166],")",["T_WHITESPACE","\n      ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","with",167],"(","[",["T_CONSTANT_ENCAPSED_STRING","'theme'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","theme",167],"]",")",["T_WHITESPACE","\n      ",167],["T_OBJECT_OPERATOR","->",168],["T_STRING","willReturn",168],"(",["T_VARIABLE","$blocks",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$result",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],"[","]",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$cacheable_metadata",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],"[","]",";",["T_WHITESPACE","\n    ",170],["T_FOREACH","foreach",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","blockRepository",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getVisibleBlocksPerRegion",171],"(",["T_VARIABLE","$cacheable_metadata",171],")",["T_WHITESPACE"," ",171],["T_AS","as",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$region",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$resulting_blocks",171],")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$result",172],"[",["T_VARIABLE","$region",172],"]",["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],"[","]",";",["T_WHITESPACE","\n      ",172],["T_FOREACH","foreach",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$resulting_blocks",173],["T_WHITESPACE"," ",173],["T_AS","as",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$plugin_id",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$block",173],")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$result",174],"[",["T_VARIABLE","$region",174],"]","[","]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$plugin_id",174],";",["T_WHITESPACE","\n      ",174],"}",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$expected",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],"[",["T_WHITESPACE","\n      ",177],["T_CONSTANT_ENCAPSED_STRING","'top'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n        ",178],["T_CONSTANT_ENCAPSED_STRING","'block_id'",179],",",["T_WHITESPACE","\n      ",179],"]",",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'center'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],"[","]",",",["T_WHITESPACE","\n      ",181],["T_CONSTANT_ENCAPSED_STRING","'bottom'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],"[","]",",",["T_WHITESPACE","\n    ",182],"]",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertSame",184],"(",["T_VARIABLE","$expected",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$result",184],")",";",["T_WHITESPACE","\n\n    ",184],["T_COMMENT","\/\/ Assert that the cacheable metadata from the block access results was\n",186],["T_WHITESPACE","    ",187],["T_COMMENT","\/\/ collected.\n",187],["T_WHITESPACE","    ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertEquals",188],"(","[",["T_CONSTANT_ENCAPSED_STRING","'config:block.block.block_id'",188],"]",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$cacheable_metadata",188],"[",["T_CONSTANT_ENCAPSED_STRING","'top'",188],"]",["T_OBJECT_OPERATOR","->",188],["T_STRING","getCacheTags",188],"(",")",")",";",["T_WHITESPACE","\n  ",188],"}",["T_WHITESPACE","\n\n",189],"}",["T_WHITESPACE","\n\n",191],["T_INTERFACE","interface",193],["T_WHITESPACE"," ",193],["T_STRING","TestContextAwareBlockInterface",193],["T_WHITESPACE"," ",193],["T_EXTENDS","extends",193],["T_WHITESPACE"," ",193],["T_STRING","BlockPluginInterface",193],",",["T_WHITESPACE"," ",193],["T_STRING","ContextAwarePluginInterface",193],["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n",193],"}",["T_WHITESPACE","\n",194]]
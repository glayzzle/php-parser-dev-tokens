[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Tests that the new default theme gets blocks.\n *\n * @group block\n *\/",7],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","NewDefaultThemeBlocksTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","WebTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",14],["T_WHITESPACE","\n  ",18],["T_PUBLIC","public",19],["T_WHITESPACE"," ",19],["T_STATIC","static",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$modules",19],["T_WHITESPACE"," ",19],"=",["T_WHITESPACE"," ",19],["T_ARRAY","array",19],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",19],")",";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Check the enabled Bartik blocks are correctly copied over.\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testNewDefaultThemeBlocks",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$default_theme",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","config",25],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",25],")",["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",25],")",";",["T_WHITESPACE","\n\n    ",25],["T_COMMENT","\/\/ Add two instances of the user login block.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalPlaceBlock",28],"(",["T_CONSTANT_ENCAPSED_STRING","'user_login_block'",28],",",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_WHITESPACE","\n      ",28],["T_CONSTANT_ENCAPSED_STRING","'id'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$default_theme",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'_'",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_STRING","strtolower",29],"(",["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","randomMachineName",29],"(",["T_LNUMBER","8",29],")",")",",",["T_WHITESPACE","\n    ",29],")",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalPlaceBlock",31],"(",["T_CONSTANT_ENCAPSED_STRING","'user_login_block'",31],",",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'id'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$default_theme",32],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'_'",32],["T_WHITESPACE"," ",32],".",["T_WHITESPACE"," ",32],["T_STRING","strtolower",32],"(",["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","randomMachineName",32],"(",["T_LNUMBER","8",32],")",")",",",["T_WHITESPACE","\n    ",32],")",")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Add an instance of a different block.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalPlaceBlock",36],"(",["T_CONSTANT_ENCAPSED_STRING","'system_powered_by_block'",36],",",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'id'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$default_theme",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'_'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_STRING","strtolower",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","randomMachineName",37],"(",["T_LNUMBER","8",37],")",")",",",["T_WHITESPACE","\n    ",37],")",")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Install a different theme.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$new_theme",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'bartik'",41],";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertFalse",42],"(",["T_VARIABLE","$new_theme",42],["T_WHITESPACE"," ",42],["T_IS_EQUAL","==",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$default_theme",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'The new theme is different from the previous default theme.'",42],")",";",["T_WHITESPACE","\n    ",42],["T_NS_SEPARATOR","\\",43],["T_STRING","Drupal",43],["T_DOUBLE_COLON","::",43],["T_STRING","service",43],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","install",43],"(",["T_ARRAY","array",43],"(",["T_VARIABLE","$new_theme",43],")",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","config",44],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",44],")",["T_WHITESPACE","\n      ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","set",45],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$new_theme",45],")",["T_WHITESPACE","\n      ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","save",46],"(",")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Ensure that the new theme has all the blocks as the previous default.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$default_block_names",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","container",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.query'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","get",49],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",49],")",["T_WHITESPACE","\n      ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","condition",50],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$default_theme",50],")",["T_WHITESPACE","\n      ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","execute",51],"(",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$new_blocks",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","container",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.query'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",52],")",["T_WHITESPACE","\n      ",52],["T_OBJECT_OPERATOR","->",53],["T_STRING","condition",53],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$new_theme",53],")",["T_WHITESPACE","\n      ",53],["T_OBJECT_OPERATOR","->",54],["T_STRING","execute",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertTrue",55],"(",["T_STRING","count",55],"(",["T_VARIABLE","$default_block_names",55],")",["T_WHITESPACE"," ",55],["T_IS_EQUAL","==",55],["T_WHITESPACE"," ",55],["T_STRING","count",55],"(",["T_VARIABLE","$new_blocks",55],")",",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'The new default theme has the same number of blocks as the previous theme.'",55],")",";",["T_WHITESPACE","\n    ",55],["T_FOREACH","foreach",56],["T_WHITESPACE"," ",56],"(",["T_VARIABLE","$default_block_names",56],["T_WHITESPACE"," ",56],["T_AS","as",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$default_block_name",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_COMMENT","\/\/ Remove the matching block from the list of blocks in the new theme.\n",57],["T_WHITESPACE","      ",58],["T_COMMENT","\/\/ E.g., if the old theme has block.block.stark_admin,\n",58],["T_WHITESPACE","      ",59],["T_COMMENT","\/\/ unset block.block.bartik_admin.\n",59],["T_WHITESPACE","      ",60],["T_UNSET","unset",60],"(",["T_VARIABLE","$new_blocks",60],"[",["T_STRING","str_replace",60],"(",["T_VARIABLE","$default_theme",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'_'",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$new_theme",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'_'",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$default_block_name",60],")","]",")",";",["T_WHITESPACE","\n    ",60],"}",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertTrue",62],"(",["T_EMPTY","empty",62],"(",["T_VARIABLE","$new_blocks",62],")",",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'The new theme has exactly the same blocks as the previous default theme.'",62],")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Install a hidden base theme and ensure blocks are not copied.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$base_theme",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'test_basetheme'",65],";",["T_WHITESPACE","\n    ",65],["T_NS_SEPARATOR","\\",66],["T_STRING","Drupal",66],["T_DOUBLE_COLON","::",66],["T_STRING","service",66],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",66],")",["T_OBJECT_OPERATOR","->",66],["T_STRING","install",66],"(","[",["T_VARIABLE","$base_theme",66],"]",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$new_blocks",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","container",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.query'",67],")",["T_OBJECT_OPERATOR","->",67],["T_STRING","get",67],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",67],")",["T_WHITESPACE","\n      ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","condition",68],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$base_theme",68],")",["T_WHITESPACE","\n      ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","execute",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertTrue",70],"(",["T_EMPTY","empty",70],"(",["T_VARIABLE","$new_blocks",70],")",",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Installing a hidden base theme does not copy blocks from the default theme.'",70],")",";",["T_WHITESPACE","\n  ",70],"}",["T_WHITESPACE","\n\n",71],"}",["T_WHITESPACE","\n",73]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests block caching.\n *\n * @group block\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","BlockCacheTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'block_test'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'test_page_test'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * A user with permission to create and edit books and to administer blocks.\n   *\n   * @var object\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$adminUser",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * An authenticated user to test block caching.\n   *\n   * @var object\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$normalUser",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Another authenticated user to test block caching.\n   *\n   * @var object\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$normalUserAlt",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The block used by this test.\n   *\n   * @var \\Drupal\\block\\BlockInterface\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$block",48],";",["T_WHITESPACE","\n\n  ",48],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","setUp",50],"(",")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_STRING","parent",51],["T_DOUBLE_COLON","::",51],["T_STRING","setUp",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Create an admin user, log in and enable test blocks.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","adminUser",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalCreateUser",54],"(",["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",54],")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","drupalLogin",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","adminUser",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Create additional users to test caching modes.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","normalUser",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalCreateUser",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","normalUserAlt",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","drupalCreateUser",59],"(",")",";",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Sync the roles, since drupalCreateUser() creates separate roles for\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ the same permission sets.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","normalUserAlt",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","roles",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","normalUser",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getRoles",62],"(",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","normalUserAlt",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","save",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Enable our test block.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","block",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalPlaceBlock",66],"(",["T_CONSTANT_ENCAPSED_STRING","'test_cache'",66],")",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * Test \"user.roles\" cache context.\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","testCachePerRole",72],"(",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Drupal",73],["T_DOUBLE_COLON","::",73],["T_STRING","state",73],"(",")",["T_OBJECT_OPERATOR","->",73],["T_STRING","set",73],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.cache_contexts'",73],",",["T_WHITESPACE"," ",73],"[",["T_CONSTANT_ENCAPSED_STRING","'user.roles'",73],"]",")",";",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Enable our test block. Set some content for it to display.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$current_content",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","randomMachineName",76],"(",")",";",["T_WHITESPACE","\n    ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Drupal",77],["T_DOUBLE_COLON","::",77],["T_STRING","state",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","set",77],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$current_content",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","drupalLogin",78],"(",["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","normalUser",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","drupalGet",79],"(",["T_CONSTANT_ENCAPSED_STRING","''",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertText",80],"(",["T_VARIABLE","$current_content",80],",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Block content displays.'",80],")",";",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ Change the content, but the cached copy should still be served.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$old_content",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$current_content",83],";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$current_content",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","randomMachineName",84],"(",")",";",["T_WHITESPACE","\n    ",84],["T_NS_SEPARATOR","\\",85],["T_STRING","Drupal",85],["T_DOUBLE_COLON","::",85],["T_STRING","state",85],"(",")",["T_OBJECT_OPERATOR","->",85],["T_STRING","set",85],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$current_content",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalGet",86],"(",["T_CONSTANT_ENCAPSED_STRING","''",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertText",87],"(",["T_VARIABLE","$old_content",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'Block is served from the cache.'",87],")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Clear the cache and verify that the stale data is no longer there.\n",89],["T_WHITESPACE","    ",90],["T_STRING","Cache",90],["T_DOUBLE_COLON","::",90],["T_STRING","invalidateTags",90],"(",["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'block_view'",90],")",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","drupalGet",91],"(",["T_CONSTANT_ENCAPSED_STRING","''",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertNoText",92],"(",["T_VARIABLE","$old_content",92],",",["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'Block cache clear removes stale cache data.'",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertText",93],"(",["T_VARIABLE","$current_content",93],",",["T_WHITESPACE"," ",93],["T_CONSTANT_ENCAPSED_STRING","'Fresh block content is displayed after clearing the cache.'",93],")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Test whether the cached data is served for the correct users.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$old_content",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$current_content",96],";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$current_content",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","randomMachineName",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_NS_SEPARATOR","\\",98],["T_STRING","Drupal",98],["T_DOUBLE_COLON","::",98],["T_STRING","state",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","set",98],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",98],",",["T_WHITESPACE"," ",98],["T_VARIABLE","$current_content",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalLogout",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalGet",100],"(",["T_CONSTANT_ENCAPSED_STRING","''",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertNoText",101],"(",["T_VARIABLE","$old_content",101],",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'Anonymous user does not see content cached per-role for normal user.'",101],")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","drupalLogin",103],"(",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","normalUserAlt",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalGet",104],"(",["T_CONSTANT_ENCAPSED_STRING","''",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertText",105],"(",["T_VARIABLE","$old_content",105],",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'User with the same roles sees per-role cached content.'",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","drupalLogin",107],"(",["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","adminUser",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","drupalGet",108],"(",["T_CONSTANT_ENCAPSED_STRING","''",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertNoText",109],"(",["T_VARIABLE","$old_content",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Admin user does not see content cached per-role for normal user.'",109],")",";",["T_WHITESPACE","\n\n    ",109],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalLogin",111],"(",["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","normalUser",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","drupalGet",112],"(",["T_CONSTANT_ENCAPSED_STRING","''",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertText",113],"(",["T_VARIABLE","$old_content",113],",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'Block is served from the per-role cache.'",113],")",";",["T_WHITESPACE","\n  ",113],"}",["T_WHITESPACE","\n\n  ",114],["T_DOC_COMMENT","\/**\n   * Test a cacheable block without any additional cache context.\n   *\/",116],["T_WHITESPACE","\n  ",118],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","testCachePermissions",119],"(",")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n    ",119],["T_COMMENT","\/\/ user.permissions is a required context, so a user with different\n",120],["T_WHITESPACE","    ",121],["T_COMMENT","\/\/ permissions will see a different version of the block.\n",121],["T_WHITESPACE","    ",122],["T_NS_SEPARATOR","\\",122],["T_STRING","Drupal",122],["T_DOUBLE_COLON","::",122],["T_STRING","state",122],"(",")",["T_OBJECT_OPERATOR","->",122],["T_STRING","set",122],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.cache_contexts'",122],",",["T_WHITESPACE"," ",122],"[","]",")",";",["T_WHITESPACE","\n\n    ",122],["T_VARIABLE","$current_content",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","randomMachineName",124],"(",")",";",["T_WHITESPACE","\n    ",124],["T_NS_SEPARATOR","\\",125],["T_STRING","Drupal",125],["T_DOUBLE_COLON","::",125],["T_STRING","state",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","set",125],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$current_content",125],")",";",["T_WHITESPACE","\n\n    ",125],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalGet",127],"(",["T_CONSTANT_ENCAPSED_STRING","''",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertText",128],"(",["T_VARIABLE","$current_content",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Block content displays.'",128],")",";",["T_WHITESPACE","\n\n    ",128],["T_VARIABLE","$old_content",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$current_content",130],";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$current_content",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","randomMachineName",131],"(",")",";",["T_WHITESPACE","\n    ",131],["T_NS_SEPARATOR","\\",132],["T_STRING","Drupal",132],["T_DOUBLE_COLON","::",132],["T_STRING","state",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","set",132],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$current_content",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","drupalGet",134],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertText",135],"(",["T_VARIABLE","$old_content",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Block content served from cache.'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","drupalLogout",137],"(",")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalGet",138],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertText",139],"(",["T_VARIABLE","$current_content",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'Block content not served from cache.'",139],")",";",["T_WHITESPACE","\n  ",139],"}",["T_WHITESPACE","\n\n  ",140],["T_DOC_COMMENT","\/**\n   * Test non-cacheable block.\n   *\/",142],["T_WHITESPACE","\n  ",144],["T_FUNCTION","function",145],["T_WHITESPACE"," ",145],["T_STRING","testNoCache",145],"(",")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n    ",145],["T_NS_SEPARATOR","\\",146],["T_STRING","Drupal",146],["T_DOUBLE_COLON","::",146],["T_STRING","state",146],"(",")",["T_OBJECT_OPERATOR","->",146],["T_STRING","set",146],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.cache_max_age'",146],",",["T_WHITESPACE"," ",146],["T_LNUMBER","0",146],")",";",["T_WHITESPACE","\n\n    ",146],["T_VARIABLE","$current_content",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","randomMachineName",148],"(",")",";",["T_WHITESPACE","\n    ",148],["T_NS_SEPARATOR","\\",149],["T_STRING","Drupal",149],["T_DOUBLE_COLON","::",149],["T_STRING","state",149],"(",")",["T_OBJECT_OPERATOR","->",149],["T_STRING","set",149],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$current_content",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_COMMENT","\/\/ If max_age = 0 has no effect, the next request would be cached.\n",151],["T_WHITESPACE","    ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","drupalGet",152],"(",["T_CONSTANT_ENCAPSED_STRING","''",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertText",153],"(",["T_VARIABLE","$current_content",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'Block content displays.'",153],")",";",["T_WHITESPACE","\n\n    ",153],["T_COMMENT","\/\/ A cached copy should not be served.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$current_content",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","randomMachineName",156],"(",")",";",["T_WHITESPACE","\n    ",156],["T_NS_SEPARATOR","\\",157],["T_STRING","Drupal",157],["T_DOUBLE_COLON","::",157],["T_STRING","state",157],"(",")",["T_OBJECT_OPERATOR","->",157],["T_STRING","set",157],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$current_content",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","drupalGet",158],"(",["T_CONSTANT_ENCAPSED_STRING","''",158],")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertText",159],"(",["T_VARIABLE","$current_content",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'Maximum age of zero prevents blocks from being cached.'",159],")",";",["T_WHITESPACE","\n  ",159],"}",["T_WHITESPACE","\n\n  ",160],["T_DOC_COMMENT","\/**\n   * Test \"user\" cache context.\n   *\/",162],["T_WHITESPACE","\n  ",164],["T_FUNCTION","function",165],["T_WHITESPACE"," ",165],["T_STRING","testCachePerUser",165],"(",")",["T_WHITESPACE"," ",165],"{",["T_WHITESPACE","\n    ",165],["T_NS_SEPARATOR","\\",166],["T_STRING","Drupal",166],["T_DOUBLE_COLON","::",166],["T_STRING","state",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","set",166],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.cache_contexts'",166],",",["T_WHITESPACE"," ",166],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",166],"]",")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$current_content",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","randomMachineName",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_NS_SEPARATOR","\\",169],["T_STRING","Drupal",169],["T_DOUBLE_COLON","::",169],["T_STRING","state",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","set",169],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$current_content",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","drupalLogin",170],"(",["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","normalUser",170],")",";",["T_WHITESPACE","\n\n    ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","drupalGet",172],"(",["T_CONSTANT_ENCAPSED_STRING","''",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertText",173],"(",["T_VARIABLE","$current_content",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'Block content displays.'",173],")",";",["T_WHITESPACE","\n\n    ",173],["T_VARIABLE","$old_content",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$current_content",175],";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$current_content",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","randomMachineName",176],"(",")",";",["T_WHITESPACE","\n    ",176],["T_NS_SEPARATOR","\\",177],["T_STRING","Drupal",177],["T_DOUBLE_COLON","::",177],["T_STRING","state",177],"(",")",["T_OBJECT_OPERATOR","->",177],["T_STRING","set",177],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",177],",",["T_WHITESPACE"," ",177],["T_VARIABLE","$current_content",177],")",";",["T_WHITESPACE","\n\n    ",177],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","drupalGet",179],"(",["T_CONSTANT_ENCAPSED_STRING","''",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertText",180],"(",["T_VARIABLE","$old_content",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Block is served from per-user cache.'",180],")",";",["T_WHITESPACE","\n\n    ",180],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","drupalLogin",182],"(",["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","normalUserAlt",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","drupalGet",183],"(",["T_CONSTANT_ENCAPSED_STRING","''",183],")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertText",184],"(",["T_VARIABLE","$current_content",184],",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'Per-user block cache is not served for other users.'",184],")",";",["T_WHITESPACE","\n\n    ",184],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","drupalLogin",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","normalUser",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","drupalGet",187],"(",["T_CONSTANT_ENCAPSED_STRING","''",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertText",188],"(",["T_VARIABLE","$old_content",188],",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'Per-user block cache is persistent.'",188],")",";",["T_WHITESPACE","\n  ",188],"}",["T_WHITESPACE","\n\n  ",189],["T_DOC_COMMENT","\/**\n   * Test \"url\" cache context.\n   *\/",191],["T_WHITESPACE","\n  ",193],["T_FUNCTION","function",194],["T_WHITESPACE"," ",194],["T_STRING","testCachePerPage",194],"(",")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n    ",194],["T_NS_SEPARATOR","\\",195],["T_STRING","Drupal",195],["T_DOUBLE_COLON","::",195],["T_STRING","state",195],"(",")",["T_OBJECT_OPERATOR","->",195],["T_STRING","set",195],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.cache_contexts'",195],",",["T_WHITESPACE"," ",195],"[",["T_CONSTANT_ENCAPSED_STRING","'url'",195],"]",")",";",["T_WHITESPACE","\n\n    ",195],["T_VARIABLE","$current_content",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","randomMachineName",197],"(",")",";",["T_WHITESPACE","\n    ",197],["T_NS_SEPARATOR","\\",198],["T_STRING","Drupal",198],["T_DOUBLE_COLON","::",198],["T_STRING","state",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","set",198],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$current_content",198],")",";",["T_WHITESPACE","\n\n    ",198],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","drupalGet",200],"(",["T_CONSTANT_ENCAPSED_STRING","'test-page'",200],")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertText",201],"(",["T_VARIABLE","$current_content",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'Block content displays on the test page.'",201],")",";",["T_WHITESPACE","\n\n    ",201],["T_VARIABLE","$old_content",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$current_content",203],";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$current_content",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","randomMachineName",204],"(",")",";",["T_WHITESPACE","\n    ",204],["T_NS_SEPARATOR","\\",205],["T_STRING","Drupal",205],["T_DOUBLE_COLON","::",205],["T_STRING","state",205],"(",")",["T_OBJECT_OPERATOR","->",205],["T_STRING","set",205],"(",["T_CONSTANT_ENCAPSED_STRING","'block_test.content'",205],",",["T_WHITESPACE"," ",205],["T_VARIABLE","$current_content",205],")",";",["T_WHITESPACE","\n\n    ",205],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","drupalGet",207],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",207],")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertResponse",208],"(",["T_LNUMBER","200",208],")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertNoText",209],"(",["T_VARIABLE","$old_content",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'Block content cached for the test page does not show up for the user page.'",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","drupalGet",210],"(",["T_CONSTANT_ENCAPSED_STRING","'test-page'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","assertResponse",211],"(",["T_LNUMBER","200",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","assertText",212],"(",["T_VARIABLE","$old_content",212],",",["T_WHITESPACE"," ",212],["T_CONSTANT_ENCAPSED_STRING","'Block content cached for the test page.'",212],")",";",["T_WHITESPACE","\n  ",212],"}",["T_WHITESPACE","\n\n",213],"}",["T_WHITESPACE","\n",215]]
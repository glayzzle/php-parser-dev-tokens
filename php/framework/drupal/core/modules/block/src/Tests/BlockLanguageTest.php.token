[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","block",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Block",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests if a block can be configured to be only visible on a particular\n * language.\n *\n * @group block\n *\/",8],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","BlockLanguageTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * An administrative user to configure the test environment.\n   *\/",16],["T_WHITESPACE","\n  ",18],["T_PROTECTED","protected",19],["T_WHITESPACE"," ",19],["T_VARIABLE","$adminUser",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$modules",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_ARRAY","array",26],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'block'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",26],")",";",["T_WHITESPACE","\n\n  ",26],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_STRING","parent",29],["T_DOUBLE_COLON","::",29],["T_STRING","setUp",29],"(",")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ Create a new user, allow him to manage the blocks and the languages.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","adminUser",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalCreateUser",32],"(",["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",32],",",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'administer languages'",32],")",")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","drupalLogin",33],"(",["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","adminUser",33],")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Add predefined language.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$edit",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'predefined_langcode'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'fr'",37],",",["T_WHITESPACE","\n    ",37],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","drupalPostForm",39],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/add'",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$edit",39],",",["T_WHITESPACE"," ",39],["T_STRING","t",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Add language'",39],")",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertText",40],"(",["T_CONSTANT_ENCAPSED_STRING","'French'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Language added successfully.'",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Tests the visibility settings for the blocks based on language.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testLanguageBlockVisibility",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ Check if the visibility setting is available.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$default_theme",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","config",48],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalGet",49],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/system_powered_by_block'",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'\/'",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$default_theme",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertField",51],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility[language][langcodes][en]'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'Language visibility field is visible.'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertNoField",52],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility[language][context_mapping][language]'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Language type field is not visible.'",52],")",";",["T_WHITESPACE","\n\n    ",52],["T_COMMENT","\/\/ Enable a standard block and set the visibility setting for one language.\n",54],["T_WHITESPACE","    ",55],["T_VARIABLE","$edit",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'visibility[language][langcodes][en]'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_STRING","TRUE",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'id'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_STRING","strtolower",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","randomMachineName",57],"(",["T_LNUMBER","8",57],")",")",",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'region'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'sidebar_first'",58],",",["T_WHITESPACE","\n    ",58],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","drupalPostForm",60],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/system_powered_by_block'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'\/'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_VARIABLE","$default_theme",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$edit",60],",",["T_WHITESPACE"," ",60],["T_STRING","t",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",60],")",")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Change the default language.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$edit",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_ARRAY","array",63],"(",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'site_default_language'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'fr'",64],",",["T_WHITESPACE","\n    ",64],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalPostForm",66],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$edit",66],",",["T_WHITESPACE"," ",66],["T_STRING","t",66],"(",["T_CONSTANT_ENCAPSED_STRING","'Save configuration'",66],")",")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ Check that a page has a block.\n",68],["T_WHITESPACE","    ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","drupalGet",69],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertText",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'The body of the custom block appears on the page.'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Check that a page doesn't has a block for the current language anymore.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalGet",73],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertNoText",74],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'The body of the custom block does not appear on the page.'",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Tests if the visibility settings are removed if the language is deleted.\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testLanguageBlockVisibilityLanguageDelete",80],"(",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Enable a standard block and set the visibility setting for one language.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$edit",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'visibility'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n        ",83],["T_CONSTANT_ENCAPSED_STRING","'language'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_WHITESPACE","\n          ",84],["T_CONSTANT_ENCAPSED_STRING","'langcodes'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",["T_WHITESPACE","\n            ",85],["T_CONSTANT_ENCAPSED_STRING","'fr'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'fr'",86],",",["T_WHITESPACE","\n          ",86],")",",",["T_WHITESPACE","\n          ",87],["T_CONSTANT_ENCAPSED_STRING","'context_mapping'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'@language.current_language_context:language_interface'",88],"]",",",["T_WHITESPACE","\n        ",88],")",",",["T_WHITESPACE","\n      ",89],")",",",["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$block",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","drupalPlaceBlock",92],"(",["T_CONSTANT_ENCAPSED_STRING","'system_powered_by_block'",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$edit",92],")",";",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ Check that we have the language in config after saving the setting.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$visibility",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$block",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getVisibility",95],"(",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEqual",96],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$visibility",96],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",96],"]","[",["T_CONSTANT_ENCAPSED_STRING","'langcodes'",96],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fr'",96],"]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'Language is set in the block configuration.'",96],")",";",["T_WHITESPACE","\n\n    ",96],["T_COMMENT","\/\/ Delete the language.\n",98],["T_WHITESPACE","    ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalPostForm",99],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/delete\/fr'",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",",",["T_WHITESPACE"," ",99],["T_STRING","t",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",99],")",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Check that the language is no longer stored in the configuration after\n",101],["T_WHITESPACE","    ",102],["T_COMMENT","\/\/ it is deleted.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$block",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","Block",103],["T_DOUBLE_COLON","::",103],["T_STRING","load",103],"(",["T_VARIABLE","$block",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","id",103],"(",")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$visibility",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$block",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getVisibility",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertTrue",105],"(",["T_EMPTY","empty",105],"(",["T_VARIABLE","$visibility",105],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",105],"]","[",["T_CONSTANT_ENCAPSED_STRING","'langcodes'",105],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fr'",105],"]",")",",",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'Language is no longer not set in the block configuration after deleting the block.'",105],")",";",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Ensure that the block visibility for language is gone from the UI.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","drupalGet",108],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","clickLink",109],"(",["T_CONSTANT_ENCAPSED_STRING","'Configure'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$elements",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","xpath",110],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/details[@id=\"edit-visibility-language\"]'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertTrue",111],"(",["T_EMPTY","empty",111],"(",["T_VARIABLE","$elements",111],")",")",";",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * Tests block language visibility with different language types.\n   *\/",114],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","testMultipleLanguageTypes",117],"(",")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_COMMENT","\/\/ Customize content language detection to be different from interface\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ language detection.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$edit",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],"[",["T_WHITESPACE","\n      ",120],["T_COMMENT","\/\/ Interface language detection: only using session.\n",121],["T_WHITESPACE","      ",122],["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_STRING","FALSE",122],",",["T_WHITESPACE","\n      ",122],["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-session]'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_STRING","TRUE",123],",",["T_WHITESPACE","\n      ",123],["T_COMMENT","\/\/ Content language detection: only using URL.\n",124],["T_WHITESPACE","      ",125],["T_CONSTANT_ENCAPSED_STRING","'language_content[configurable]'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","TRUE",125],",",["T_WHITESPACE","\n      ",125],["T_CONSTANT_ENCAPSED_STRING","'language_content[enabled][language-url]'",126],["T_WHITESPACE"," ",126],["T_DOUBLE_ARROW","=>",126],["T_WHITESPACE"," ",126],["T_STRING","TRUE",126],",",["T_WHITESPACE","\n      ",126],["T_CONSTANT_ENCAPSED_STRING","'language_content[enabled][language-interface]'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_STRING","FALSE",127],",",["T_WHITESPACE","\n    ",127],"]",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","drupalPostForm",129],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$edit",129],",",["T_WHITESPACE"," ",129],["T_STRING","t",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",129],")",")",";",["T_WHITESPACE","\n\n    ",129],["T_COMMENT","\/\/ Check if the visibility setting is available with a type setting.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$default_theme",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","config",132],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",132],")",["T_OBJECT_OPERATOR","->",132],["T_STRING","get",132],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","drupalGet",133],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/system_powered_by_block'",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'\/'",133],["T_WHITESPACE"," ",133],".",["T_WHITESPACE"," ",133],["T_VARIABLE","$default_theme",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertField",134],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility[language][langcodes][en]'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'Language visibility field is visible.'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertField",135],"(",["T_CONSTANT_ENCAPSED_STRING","'visibility[language][context_mapping][language]'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Language type field is visible.'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Enable a standard block and set visibility to French only.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$block_id",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_STRING","strtolower",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","randomMachineName",138],"(",["T_LNUMBER","8",138],")",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$edit",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],"[",["T_WHITESPACE","\n      ",139],["T_CONSTANT_ENCAPSED_STRING","'visibility[language][context_mapping][language]'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'@language.current_language_context:language_interface'",140],",",["T_WHITESPACE","\n      ",140],["T_CONSTANT_ENCAPSED_STRING","'visibility[language][langcodes][fr]'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_STRING","TRUE",141],",",["T_WHITESPACE","\n      ",141],["T_CONSTANT_ENCAPSED_STRING","'id'",142],["T_WHITESPACE"," ",142],["T_DOUBLE_ARROW","=>",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$block_id",142],",",["T_WHITESPACE","\n      ",142],["T_CONSTANT_ENCAPSED_STRING","'region'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_CONSTANT_ENCAPSED_STRING","'sidebar_first'",143],",",["T_WHITESPACE","\n    ",143],"]",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","drupalPostForm",145],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/system_powered_by_block'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'\/'",145],["T_WHITESPACE"," ",145],".",["T_WHITESPACE"," ",145],["T_VARIABLE","$default_theme",145],",",["T_WHITESPACE"," ",145],["T_VARIABLE","$edit",145],",",["T_WHITESPACE"," ",145],["T_STRING","t",145],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",145],")",")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Interface negotiation depends on request arguments.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","drupalGet",148],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",148],",",["T_WHITESPACE"," ",148],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'en'",148],"]","]",")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertNoText",149],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",149],")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","drupalGet",150],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",150],",",["T_WHITESPACE"," ",150],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'fr'",150],"]","]",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","assertText",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'The body of the block appears on the page.'",151],")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Log in again in order to clear the interface language stored in the\n",153],["T_WHITESPACE","    ",154],["T_COMMENT","\/\/ session.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","drupalLogout",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalLogin",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","adminUser",156],")",";",["T_WHITESPACE","\n\n    ",156],["T_COMMENT","\/\/ Content language does not depend on session\/request arguments.\n",158],["T_WHITESPACE","    ",159],["T_COMMENT","\/\/ It will fall back on English (site default) and not display the block.\n",159],["T_WHITESPACE","    ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","drupalGet",160],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertNoText",161],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalGet",162],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertNoText",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",163],")",";",["T_WHITESPACE","\n\n    ",163],["T_COMMENT","\/\/ Change visibility to now depend on content language for this block.\n",165],["T_WHITESPACE","    ",166],["T_VARIABLE","$edit",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'visibility[language][context_mapping][language]'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'@language.current_language_context:language_content'",167],["T_WHITESPACE","\n    ",167],"]",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","drupalPostForm",169],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/manage\/'",169],["T_WHITESPACE"," ",169],".",["T_WHITESPACE"," ",169],["T_VARIABLE","$block_id",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$edit",169],",",["T_WHITESPACE"," ",169],["T_STRING","t",169],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",169],")",")",";",["T_WHITESPACE","\n\n    ",169],["T_COMMENT","\/\/ Content language negotiation does not depend on request arguments.\n",171],["T_WHITESPACE","    ",172],["T_COMMENT","\/\/ It will fall back on English (site default) and not display the block.\n",172],["T_WHITESPACE","    ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","drupalGet",173],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",173],",",["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'en'",173],"]","]",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertNoText",174],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",174],",",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","drupalGet",175],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",175],",",["T_WHITESPACE"," ",175],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'fr'",175],"]","]",")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertNoText",176],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",176],")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Content language negotiation depends on path prefix.\n",178],["T_WHITESPACE","    ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","drupalGet",179],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertNoText",180],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'The body of the block does not appear on the page.'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","drupalGet",181],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",181],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertText",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Powered by Drupal'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'The body of the block appears on the page.'",182],")",";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n",183],"}",["T_WHITESPACE","\n",185]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","history",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Views",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ViewTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the history timestamp handlers.\n *\n * @group history\n * @see \\Drupal\\history\\Plugin\\views\\field\\HistoryTimestamp.\n * @see \\Drupal\\history\\Plugin\\views\\filter\\HistoryTimestamp.\n *\/",8],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","HistoryTimestampTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","ViewTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_STATIC","static",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$modules",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",22],",",["T_WHITESPACE"," ",22],["T_CONSTANT_ENCAPSED_STRING","'node'",22],")",";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_STATIC","static",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$testViews",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'test_history'",29],")",";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Tests the handlers.\n   *\/",31],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_FUNCTION","function",34],["T_WHITESPACE"," ",34],["T_STRING","testHandlers",34],"(",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$nodes",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_ARRAY","array",35],"(",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$nodes",36],"[","]",["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalCreateNode",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$nodes",37],"[","]",["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","drupalCreateNode",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_VARIABLE","$account",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","drupalCreateUser",39],"(",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalLogin",40],"(",["T_VARIABLE","$account",40],")",";",["T_WHITESPACE","\n    ",40],["T_NS_SEPARATOR","\\",41],["T_STRING","Drupal",41],["T_DOUBLE_COLON","::",41],["T_STRING","currentUser",41],"(",")",["T_OBJECT_OPERATOR","->",41],["T_STRING","setAccount",41],"(",["T_VARIABLE","$account",41],")",";",["T_WHITESPACE","\n\n    ",41],["T_STRING","db_insert",43],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",43],")",["T_WHITESPACE","\n      ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","fields",44],"(",["T_ARRAY","array",44],"(",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'uid'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_VARIABLE","$account",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","id",45],"(",")",",",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'nid'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$nodes",46],"[",["T_LNUMBER","0",46],"]",["T_OBJECT_OPERATOR","->",46],["T_STRING","id",46],"(",")",",",["T_WHITESPACE","\n        ",46],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_STRING","REQUEST_TIME",47],["T_WHITESPACE"," ",47],"-",["T_WHITESPACE"," ",47],["T_LNUMBER","100",47],",",["T_WHITESPACE","\n      ",47],")",")",["T_OBJECT_OPERATOR","->",48],["T_STRING","execute",48],"(",")",";",["T_WHITESPACE","\n\n    ",48],["T_STRING","db_insert",50],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",50],")",["T_WHITESPACE","\n      ",50],["T_OBJECT_OPERATOR","->",51],["T_STRING","fields",51],"(",["T_ARRAY","array",51],"(",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'uid'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$account",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","'nid'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$nodes",53],"[",["T_LNUMBER","1",53],"]",["T_OBJECT_OPERATOR","->",53],["T_STRING","id",53],"(",")",",",["T_WHITESPACE","\n        ",53],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_STRING","REQUEST_TIME",54],["T_WHITESPACE"," ",54],"+",["T_WHITESPACE"," ",54],["T_LNUMBER","100",54],",",["T_WHITESPACE","\n      ",54],")",")",["T_OBJECT_OPERATOR","->",55],["T_STRING","execute",55],"(",")",";",["T_WHITESPACE","\n\n\n    ",55],["T_VARIABLE","$column_map",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'nid'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'nid'",59],",",["T_WHITESPACE","\n    ",59],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Test the history field.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$view",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Views",63],["T_DOUBLE_COLON","::",63],["T_STRING","getView",63],"(",["T_CONSTANT_ENCAPSED_STRING","'test_history'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$view",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setDisplay",64],"(",["T_CONSTANT_ENCAPSED_STRING","'page_1'",64],")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","executeView",65],"(",["T_VARIABLE","$view",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertEqual",66],"(",["T_STRING","count",66],"(",["T_VARIABLE","$view",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","result",66],")",",",["T_WHITESPACE"," ",66],["T_LNUMBER","2",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$output",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$view",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","preview",67],"(",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","setRawContent",68],"(",["T_NS_SEPARATOR","\\",68],["T_STRING","Drupal",68],["T_DOUBLE_COLON","::",68],["T_STRING","service",68],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",68],")",["T_OBJECT_OPERATOR","->",68],["T_STRING","renderRoot",68],"(",["T_VARIABLE","$output",68],")",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$result",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","xpath",69],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/span[@class=:class]'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_CONSTANT_ENCAPSED_STRING","':class'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'marker'",69],")",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertEqual",70],"(",["T_STRING","count",70],"(",["T_VARIABLE","$result",70],")",",",["T_WHITESPACE"," ",70],["T_LNUMBER","1",70],",",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'Just one node is marked as new'",70],")",";",["T_WHITESPACE","\n\n    ",70],["T_COMMENT","\/\/ Test the history filter.\n",72],["T_WHITESPACE","    ",73],["T_VARIABLE","$view",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","Views",73],["T_DOUBLE_COLON","::",73],["T_STRING","getView",73],"(",["T_CONSTANT_ENCAPSED_STRING","'test_history'",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$view",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setDisplay",74],"(",["T_CONSTANT_ENCAPSED_STRING","'page_2'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","executeView",75],"(",["T_VARIABLE","$view",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertEqual",76],"(",["T_STRING","count",76],"(",["T_VARIABLE","$view",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","result",76],")",",",["T_WHITESPACE"," ",76],["T_LNUMBER","1",76],")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertIdenticalResultset",77],"(",["T_VARIABLE","$view",77],",",["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_ARRAY","array",77],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$nodes",77],"[",["T_LNUMBER","0",77],"]",["T_OBJECT_OPERATOR","->",77],["T_STRING","id",77],"(",")",")",")",",",["T_WHITESPACE"," ",77],["T_VARIABLE","$column_map",77],")",";",["T_WHITESPACE","\n\n    ",77],["T_COMMENT","\/\/ Install Comment module and make sure that content types without comment\n",79],["T_WHITESPACE","    ",80],["T_COMMENT","\/\/ field will not break the view.\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ See \\Drupal\\history\\Plugin\\views\\filter\\HistoryUserTimestamp::query()\n",81],["T_WHITESPACE","    ",82],["T_NS_SEPARATOR","\\",82],["T_STRING","Drupal",82],["T_DOUBLE_COLON","::",82],["T_STRING","service",82],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",82],")",["T_OBJECT_OPERATOR","->",82],["T_STRING","install",82],"(","[",["T_CONSTANT_ENCAPSED_STRING","'comment'",82],"]",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$view",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","Views",83],["T_DOUBLE_COLON","::",83],["T_STRING","getView",83],"(",["T_CONSTANT_ENCAPSED_STRING","'test_history'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$view",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","setDisplay",84],"(",["T_CONSTANT_ENCAPSED_STRING","'page_2'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","executeView",85],"(",["T_VARIABLE","$view",85],")",";",["T_WHITESPACE","\n\n  ",85],"}",["T_WHITESPACE","\n\n",87],"}",["T_WHITESPACE","\n",89]]
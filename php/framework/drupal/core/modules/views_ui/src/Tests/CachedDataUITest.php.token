[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","views_ui",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the user tempstore cache in the UI.\n *\n * @group views_ui\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","CachedDataUITest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","UITestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$testViews",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Tests the user tempstore views data in the UI.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testCacheData",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$views_admin_user_uid",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","fullAdminUser",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","id",23],"(",")",";",["T_WHITESPACE","\n\n    ",23],["T_VARIABLE","$temp_store",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","container",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'user.shared_tempstore'",25],")",["T_OBJECT_OPERATOR","->",25],["T_STRING","get",25],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",25],")",";",["T_WHITESPACE","\n    ",25],["T_COMMENT","\/\/ The view should not be locked.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","assertEqual",27],"(",["T_VARIABLE","$temp_store",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","getMetadata",27],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",27],")",",",["T_WHITESPACE"," ",27],["T_STRING","NULL",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'The view is not locked.'",27],")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalGet",29],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/view\/test_view\/edit'",29],")",";",["T_WHITESPACE","\n    ",29],["T_COMMENT","\/\/ Make sure we have 'changes' to the view.\n",30],["T_WHITESPACE","    ",31],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","drupalPostForm",31],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/nojs\/display\/test_view\/default\/title'",31],",",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",")",",",["T_WHITESPACE"," ",31],["T_STRING","t",31],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply'",31],")",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","assertText",32],"(",["T_CONSTANT_ENCAPSED_STRING","'You have unsaved changes.'",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertEqual",33],"(",["T_VARIABLE","$temp_store",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getMetadata",33],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",33],")",["T_OBJECT_OPERATOR","->",33],["T_STRING","owner",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$views_admin_user_uid",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'View cache has been saved.'",33],")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$view_cache",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$temp_store",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",35],")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ The view should be enabled.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertTrue",37],"(",["T_VARIABLE","$view_cache",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","status",37],"(",")",",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'The view is enabled.'",37],")",";",["T_WHITESPACE","\n    ",37],["T_COMMENT","\/\/ The view should now be locked.\n",38],["T_WHITESPACE","    ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertEqual",39],"(",["T_VARIABLE","$temp_store",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getMetadata",39],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","owner",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$views_admin_user_uid",39],",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'The view is locked.'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Cancel the view edit and make sure the cache is deleted.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalPostForm",42],"(",["T_STRING","NULL",42],",",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",",",["T_WHITESPACE"," ",42],["T_STRING","t",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel'",42],")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertEqual",43],"(",["T_VARIABLE","$temp_store",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getMetadata",43],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",43],")",",",["T_WHITESPACE"," ",43],["T_STRING","NULL",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'User tempstore data has been removed.'",43],")",";",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ Test we are redirected to the view listing page.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertUrl",45],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views'",45],",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",")",",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Redirected back to the view listing page.'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Log in with another user and make sure the view is locked and break.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","drupalPostForm",48],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/nojs\/display\/test_view\/default\/title'",48],",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",")",",",["T_WHITESPACE"," ",48],["T_STRING","t",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply'",48],")",")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalLogin",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","adminUser",49],")",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalGet",51],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/view\/test_view\/edit'",51],")",";",["T_WHITESPACE","\n    ",51],["T_COMMENT","\/\/ Test that save and cancel buttons are not shown.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertNoFieldById",53],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-actions-submit'",53],",",["T_WHITESPACE"," ",53],["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",53],")",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertNoFieldById",54],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-actions-cancel'",54],",",["T_WHITESPACE"," ",54],["T_STRING","t",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel'",54],")",")",";",["T_WHITESPACE","\n    ",54],["T_COMMENT","\/\/ Test we have the break lock link.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","assertLinkByHref",56],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/view\/test_view\/break-lock'",56],")",";",["T_WHITESPACE","\n    ",56],["T_COMMENT","\/\/ Break the lock.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","clickLink",58],"(",["T_STRING","t",58],"(",["T_CONSTANT_ENCAPSED_STRING","'break this lock'",58],")",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","drupalPostForm",59],"(",["T_STRING","NULL",59],",",["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",")",",",["T_WHITESPACE"," ",59],["T_STRING","t",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Break lock'",59],")",")",";",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Test that save and cancel buttons are shown.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertFieldById",61],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-actions-submit'",61],",",["T_WHITESPACE"," ",61],["T_STRING","t",61],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",61],")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertFieldById",62],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-actions-cancel'",62],",",["T_WHITESPACE"," ",62],["T_STRING","t",62],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel'",62],")",")",";",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Test we can save the view.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalPostForm",64],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/view\/test_view\/edit'",64],",",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",")",",",["T_WHITESPACE"," ",64],["T_STRING","t",64],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertRaw",65],"(",["T_STRING","t",65],"(",["T_CONSTANT_ENCAPSED_STRING","'The view %view has been saved.'",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'%view'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'Test view'",65],")",")",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Test that a deleted view has no tempstore data.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalPostForm",68],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/nojs\/display\/test_view\/default\/title'",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",",",["T_WHITESPACE"," ",68],["T_STRING","t",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply'",68],")",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","drupalPostForm",69],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/views\/view\/test_view\/delete'",69],",",["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",")",",",["T_WHITESPACE"," ",69],["T_STRING","t",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",69],")",")",";",["T_WHITESPACE","\n    ",69],["T_COMMENT","\/\/ No view tempstore data should be returned for this view after deletion.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEqual",71],"(",["T_VARIABLE","$temp_store",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getMetadata",71],"(",["T_CONSTANT_ENCAPSED_STRING","'test_view'",71],")",",",["T_WHITESPACE"," ",71],["T_STRING","NULL",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'View tempstore data has been removed after deletion.'",71],")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n",72],"}",["T_WHITESPACE","\n",74]]
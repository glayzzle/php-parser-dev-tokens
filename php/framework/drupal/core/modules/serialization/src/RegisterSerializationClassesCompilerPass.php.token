[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","serialization",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Symfony",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DependencyInjection",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Reference",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencyInjection",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ContainerBuilder",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Compiler",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CompilerPassInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Adds services tagged 'normalizer' and 'encoder' to the Serializer.\n *\/",9],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","RegisterSerializationClassesCompilerPass",12],["T_WHITESPACE"," ",12],["T_IMPLEMENTS","implements",12],["T_WHITESPACE"," ",12],["T_STRING","CompilerPassInterface",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n\n  ",12],["T_DOC_COMMENT","\/**\n   * Adds services to the Serializer.\n   *\n   * @param \\Symfony\\Component\\DependencyInjection\\ContainerBuilder $container\n   *   The container to process.\n   *\/",14],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_FUNCTION","function",20],["T_WHITESPACE"," ",20],["T_STRING","process",20],"(",["T_STRING","ContainerBuilder",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$container",20],")",["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$definition",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$container",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","getDefinition",21],"(",["T_CONSTANT_ENCAPSED_STRING","'serializer'",21],")",";",["T_WHITESPACE","\n\n    ",21],["T_COMMENT","\/\/ Retrieve registered Normalizers and Encoders from the container.\n",23],["T_WHITESPACE","    ",24],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$container",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","findTaggedServiceIds",24],"(",["T_CONSTANT_ENCAPSED_STRING","'normalizer'",24],")",["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$id",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$attributes",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_VARIABLE","$priority",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ISSET","isset",25],"(",["T_VARIABLE","$attributes",25],"[",["T_LNUMBER","0",25],"]","[",["T_CONSTANT_ENCAPSED_STRING","'priority'",25],"]",")",["T_WHITESPACE"," ",25],"?",["T_WHITESPACE"," ",25],["T_VARIABLE","$attributes",25],"[",["T_LNUMBER","0",25],"]","[",["T_CONSTANT_ENCAPSED_STRING","'priority'",25],"]",["T_WHITESPACE"," ",25],":",["T_WHITESPACE"," ",25],["T_LNUMBER","0",25],";",["T_WHITESPACE","\n      ",25],["T_VARIABLE","$normalizers",26],"[",["T_VARIABLE","$priority",26],"]","[","]",["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],["T_NEW","new",26],["T_WHITESPACE"," ",26],["T_STRING","Reference",26],"(",["T_VARIABLE","$id",26],")",";",["T_WHITESPACE","\n    ",26],"}",["T_WHITESPACE","\n    ",27],["T_FOREACH","foreach",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$container",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","findTaggedServiceIds",28],"(",["T_CONSTANT_ENCAPSED_STRING","'encoder'",28],")",["T_WHITESPACE"," ",28],["T_AS","as",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$id",28],["T_WHITESPACE"," ",28],["T_DOUBLE_ARROW","=>",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$attributes",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n      ",28],["T_VARIABLE","$priority",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ISSET","isset",29],"(",["T_VARIABLE","$attributes",29],"[",["T_LNUMBER","0",29],"]","[",["T_CONSTANT_ENCAPSED_STRING","'priority'",29],"]",")",["T_WHITESPACE"," ",29],"?",["T_WHITESPACE"," ",29],["T_VARIABLE","$attributes",29],"[",["T_LNUMBER","0",29],"]","[",["T_CONSTANT_ENCAPSED_STRING","'priority'",29],"]",["T_WHITESPACE"," ",29],":",["T_WHITESPACE"," ",29],["T_LNUMBER","0",29],";",["T_WHITESPACE","\n      ",29],["T_VARIABLE","$encoders",30],"[",["T_VARIABLE","$priority",30],"]","[","]",["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_NEW","new",30],["T_WHITESPACE"," ",30],["T_STRING","Reference",30],"(",["T_VARIABLE","$id",30],")",";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Add the registered Normalizers and Encoders to the Serializer.\n",33],["T_WHITESPACE","    ",34],["T_IF","if",34],["T_WHITESPACE"," ",34],"(","!",["T_EMPTY","empty",34],"(",["T_VARIABLE","$normalizers",34],")",")",["T_WHITESPACE"," ",34],"{",["T_WHITESPACE","\n      ",34],["T_VARIABLE","$definition",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","replaceArgument",35],"(",["T_LNUMBER","0",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","sort",35],"(",["T_VARIABLE","$normalizers",35],")",")",";",["T_WHITESPACE","\n    ",35],"}",["T_WHITESPACE","\n    ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(","!",["T_EMPTY","empty",37],"(",["T_VARIABLE","$encoders",37],")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n      ",37],["T_VARIABLE","$definition",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","replaceArgument",38],"(",["T_LNUMBER","1",38],",",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","sort",38],"(",["T_VARIABLE","$encoders",38],")",")",";",["T_WHITESPACE","\n    ",38],"}",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Find all serialization formats known.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$formats",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$format_providers",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[","]",";",["T_WHITESPACE","\n    ",43],["T_FOREACH","foreach",44],["T_WHITESPACE"," ",44],"(",["T_VARIABLE","$container",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","findTaggedServiceIds",44],"(",["T_CONSTANT_ENCAPSED_STRING","'encoder'",44],")",["T_WHITESPACE"," ",44],["T_AS","as",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$service_id",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$attributes",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$format",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$attributes",45],"[",["T_LNUMBER","0",45],"]","[",["T_CONSTANT_ENCAPSED_STRING","'format'",45],"]",";",["T_WHITESPACE","\n      ",45],["T_VARIABLE","$formats",46],"[","]",["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$format",46],";",["T_WHITESPACE","\n\n      ",46],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_VARIABLE","$provider_tag",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$container",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getDefinition",48],"(",["T_VARIABLE","$service_id",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","getTag",48],"(",["T_CONSTANT_ENCAPSED_STRING","'_provider'",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n        ",48],["T_VARIABLE","$format_providers",49],"[",["T_VARIABLE","$format",49],"]",["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$provider_tag",49],"[",["T_LNUMBER","0",49],"]","[",["T_CONSTANT_ENCAPSED_STRING","'provider'",49],"]",";",["T_WHITESPACE","\n      ",49],"}",["T_WHITESPACE","\n    ",50],"}",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$container",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setParameter",52],"(",["T_CONSTANT_ENCAPSED_STRING","'serializer.formats'",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$formats",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$container",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","setParameter",53],"(",["T_CONSTANT_ENCAPSED_STRING","'serializer.format_providers'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$format_providers",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Sorts by priority.\n   *\n   * Order services from highest priority number to lowest (reverse sorting).\n   *\n   * @param array $services\n   *   A nested array keyed on priority number. For each priority number, the\n   *   value is an array of Symfony\\Component\\DependencyInjection\\Reference\n   *   objects, each a reference to a normalizer or encoder service.\n   *\n   * @return array\n   *   A flattened array of Reference objects from $services, ordered from high\n   *   to low priority.\n   *\/",56],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","sort",70],"(",["T_VARIABLE","$services",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$sorted",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",")",";",["T_WHITESPACE","\n    ",71],["T_STRING","krsort",72],"(",["T_VARIABLE","$services",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Flatten the array.\n",74],["T_WHITESPACE","    ",75],["T_FOREACH","foreach",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$services",75],["T_WHITESPACE"," ",75],["T_AS","as",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$a",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$sorted",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","array_merge",76],"(",["T_VARIABLE","$sorted",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$a",76],")",";",["T_WHITESPACE","\n    ",76],"}",["T_WHITESPACE","\n\n    ",77],["T_RETURN","return",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$sorted",79],";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n",80],"}",["T_WHITESPACE","\n",82]]
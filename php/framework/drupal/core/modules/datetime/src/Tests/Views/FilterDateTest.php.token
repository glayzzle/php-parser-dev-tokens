[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","datetime",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n",3],["T_USE","use",4],["T_WHITESPACE"," ",4],["T_STRING","Drupal",4],["T_NS_SEPARATOR","\\",4],["T_STRING","datetime",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Plugin",4],["T_NS_SEPARATOR","\\",4],["T_STRING","Field",4],["T_NS_SEPARATOR","\\",4],["T_STRING","FieldType",4],["T_NS_SEPARATOR","\\",4],["T_STRING","DateTimeItem",4],";",["T_WHITESPACE","\n",4],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldStorageConfig",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Views",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests date-only fields.\n *\n * @group datetime\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","FilterDateTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","DateTimeHandlerTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_PUBLIC","public",18],["T_WHITESPACE"," ",18],["T_STATIC","static",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$testViews",18],["T_WHITESPACE"," ",18],"=",["T_WHITESPACE"," ",18],"[",["T_CONSTANT_ENCAPSED_STRING","'test_filter_datetime'",18],"]",";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * For offset tests, set to the current time.\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$date",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * Create nodes with relative dates of yesterday, today, and tomorrow.\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_COMMENT","\/\/ Set to 'today'.\n",33],["T_WHITESPACE","    ",34],["T_STATIC","static",34],["T_DOUBLE_COLON","::",34],["T_VARIABLE","$date",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_STRING","REQUEST_TIME",34],";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Change field storage to date-only.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$storage",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","FieldStorageConfig",37],["T_DOUBLE_COLON","::",37],["T_STRING","load",37],"(",["T_CONSTANT_ENCAPSED_STRING","'node.'",37],["T_WHITESPACE"," ",37],".",["T_WHITESPACE"," ",37],["T_STATIC","static",37],["T_DOUBLE_COLON","::",37],["T_VARIABLE","$field_name",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$storage",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","setSetting",38],"(",["T_CONSTANT_ENCAPSED_STRING","'datetime_type'",38],",",["T_WHITESPACE"," ",38],["T_STRING","DateTimeItem",38],["T_DOUBLE_COLON","::",38],["T_STRING","DATETIME_TYPE_DATE",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$storage",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","save",39],"(",")",";",["T_WHITESPACE","\n\n    ",39],["T_VARIABLE","$dates",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[",["T_WHITESPACE","\n      ",41],["T_COMMENT","\/\/ Tomorrow.\n",42],["T_WHITESPACE","      ",43],["T_NS_SEPARATOR","\\",43],["T_STRING","Drupal",43],["T_DOUBLE_COLON","::",43],["T_STRING","service",43],"(",["T_CONSTANT_ENCAPSED_STRING","'date.formatter'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","format",43],"(",["T_STATIC","static",43],["T_DOUBLE_COLON","::",43],["T_VARIABLE","$date",43],["T_WHITESPACE"," ",43],"+",["T_WHITESPACE"," ",43],["T_LNUMBER","86400",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'custom'",43],",",["T_WHITESPACE"," ",43],["T_STRING","DATETIME_DATE_STORAGE_FORMAT",43],",",["T_WHITESPACE"," ",43],["T_STRING","DATETIME_STORAGE_TIMEZONE",43],")",",",["T_WHITESPACE","\n      ",43],["T_COMMENT","\/\/ Today.\n",44],["T_WHITESPACE","      ",45],["T_NS_SEPARATOR","\\",45],["T_STRING","Drupal",45],["T_DOUBLE_COLON","::",45],["T_STRING","service",45],"(",["T_CONSTANT_ENCAPSED_STRING","'date.formatter'",45],")",["T_OBJECT_OPERATOR","->",45],["T_STRING","format",45],"(",["T_STATIC","static",45],["T_DOUBLE_COLON","::",45],["T_VARIABLE","$date",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'custom'",45],",",["T_WHITESPACE"," ",45],["T_STRING","DATETIME_DATE_STORAGE_FORMAT",45],",",["T_WHITESPACE"," ",45],["T_STRING","DATETIME_STORAGE_TIMEZONE",45],")",",",["T_WHITESPACE","\n      ",45],["T_COMMENT","\/\/ Yesterday.\n",46],["T_WHITESPACE","      ",47],["T_NS_SEPARATOR","\\",47],["T_STRING","Drupal",47],["T_DOUBLE_COLON","::",47],["T_STRING","service",47],"(",["T_CONSTANT_ENCAPSED_STRING","'date.formatter'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","format",47],"(",["T_STATIC","static",47],["T_DOUBLE_COLON","::",47],["T_VARIABLE","$date",47],["T_WHITESPACE"," ",47],"-",["T_WHITESPACE"," ",47],["T_LNUMBER","86400",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'custom'",47],",",["T_WHITESPACE"," ",47],["T_STRING","DATETIME_DATE_STORAGE_FORMAT",47],",",["T_WHITESPACE"," ",47],["T_STRING","DATETIME_STORAGE_TIMEZONE",47],")",",",["T_WHITESPACE","\n    ",47],"]",";",["T_WHITESPACE","\n\n    ",48],["T_FOREACH","foreach",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$dates",50],["T_WHITESPACE"," ",50],["T_AS","as",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$date",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","nodes",51],"[","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalCreateNode",51],"(","[",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'field_date'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],"[",["T_WHITESPACE","\n          ",52],["T_CONSTANT_ENCAPSED_STRING","'value'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$date",53],",",["T_WHITESPACE","\n        ",53],"]",["T_WHITESPACE","\n      ",54],"]",")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Test offsets with date-only fields.\n   *\/",59],["T_WHITESPACE","\n  ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","testDateOffsets",62],"(",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$view",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","Views",63],["T_DOUBLE_COLON","::",63],["T_STRING","getView",63],"(",["T_CONSTANT_ENCAPSED_STRING","'test_filter_datetime'",63],")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$field",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STATIC","static",64],["T_DOUBLE_COLON","::",64],["T_VARIABLE","$field_name",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'_value'",64],";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Test simple operations.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$view",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","initHandlers",67],"(",")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ A greater than or equal to 'now', should return the 'today' and\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ the 'tomorrow' node.\n",70],["T_WHITESPACE","    ",71],["T_VARIABLE","$view",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","filter",71],"[",["T_VARIABLE","$field",71],"]",["T_OBJECT_OPERATOR","->",71],["T_STRING","operator",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'>='",71],";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$view",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","filter",72],"[",["T_VARIABLE","$field",72],"]",["T_OBJECT_OPERATOR","->",72],["T_STRING","value",72],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",72],"]",["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'offset'",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$view",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","filter",73],"[",["T_VARIABLE","$field",73],"]",["T_OBJECT_OPERATOR","->",73],["T_STRING","value",73],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",73],"]",["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'now'",73],";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$view",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","setDisplay",74],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","executeView",75],"(",["T_VARIABLE","$view",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$expected_result",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],"[",["T_WHITESPACE","\n      ",76],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","nodes",77],"[",["T_LNUMBER","0",77],"]",["T_OBJECT_OPERATOR","->",77],["T_STRING","id",77],"(",")","]",",",["T_WHITESPACE","\n      ",77],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","nodes",78],"[",["T_LNUMBER","1",78],"]",["T_OBJECT_OPERATOR","->",78],["T_STRING","id",78],"(",")","]",",",["T_WHITESPACE","\n    ",78],"]",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertIdenticalResultset",80],"(",["T_VARIABLE","$view",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$expected_result",80],",",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","map",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$view",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","destroy",81],"(",")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Only dates in the past.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$view",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","initHandlers",84],"(",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$view",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","filter",85],"[",["T_VARIABLE","$field",85],"]",["T_OBJECT_OPERATOR","->",85],["T_STRING","operator",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'<'",85],";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$view",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","filter",86],"[",["T_VARIABLE","$field",86],"]",["T_OBJECT_OPERATOR","->",86],["T_STRING","value",86],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",86],"]",["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'offset'",86],";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$view",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","filter",87],"[",["T_VARIABLE","$field",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","value",87],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",87],"]",["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'now'",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$view",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setDisplay",88],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","executeView",89],"(",["T_VARIABLE","$view",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$expected_result",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[",["T_WHITESPACE","\n      ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","nodes",91],"[",["T_LNUMBER","2",91],"]",["T_OBJECT_OPERATOR","->",91],["T_STRING","id",91],"(",")","]",",",["T_WHITESPACE","\n    ",91],"]",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertIdenticalResultset",93],"(",["T_VARIABLE","$view",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$expected_result",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","map",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$view",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","destroy",94],"(",")",";",["T_WHITESPACE","\n\n    ",94],["T_COMMENT","\/\/ Test offset for between operator. Only the 'tomorrow' node should appear.\n",96],["T_WHITESPACE","    ",97],["T_VARIABLE","$view",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","initHandlers",97],"(",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$view",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","filter",98],"[",["T_VARIABLE","$field",98],"]",["T_OBJECT_OPERATOR","->",98],["T_STRING","operator",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'between'",98],";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$view",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","filter",99],"[",["T_VARIABLE","$field",99],"]",["T_OBJECT_OPERATOR","->",99],["T_STRING","value",99],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'offset'",99],";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$view",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","filter",100],"[",["T_VARIABLE","$field",100],"]",["T_OBJECT_OPERATOR","->",100],["T_STRING","value",100],"[",["T_CONSTANT_ENCAPSED_STRING","'max'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'+2 days'",100],";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$view",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","filter",101],"[",["T_VARIABLE","$field",101],"]",["T_OBJECT_OPERATOR","->",101],["T_STRING","value",101],"[",["T_CONSTANT_ENCAPSED_STRING","'min'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'+1 day'",101],";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$view",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","setDisplay",102],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","executeView",103],"(",["T_VARIABLE","$view",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$expected_result",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"[",["T_WHITESPACE","\n      ",104],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","nodes",105],"[",["T_LNUMBER","0",105],"]",["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],"(",")","]",",",["T_WHITESPACE","\n    ",105],"]",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertIdenticalResultset",107],"(",["T_VARIABLE","$view",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$expected_result",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","map",107],")",";",["T_WHITESPACE","\n  ",107],"}",["T_WHITESPACE","\n\n",108],"}",["T_WHITESPACE","\n",110]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","forum",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Views",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","views",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ViewTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","views",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Tests",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ViewTestData",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the forum integration into views.\n *\n * @group forum\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","ForumIntegrationTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","ViewTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'forum_test_views'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_STATIC","static",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$testViews",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'test_forum_index'",28],")",";",["T_WHITESPACE","\n\n  ",28],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_STRING","ViewTestData",33],["T_DOUBLE_COLON","::",33],["T_STRING","createTestViews",33],"(",["T_STRING","get_class",33],"(",["T_VARIABLE","$this",33],")",",",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_CONSTANT_ENCAPSED_STRING","'forum_test_views'",33],")",")",";",["T_WHITESPACE","\n  ",33],"}",["T_WHITESPACE","\n\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Tests the integration.\n   *\/",37],["T_WHITESPACE","\n  ",39],["T_PUBLIC","public",40],["T_WHITESPACE"," ",40],["T_FUNCTION","function",40],["T_WHITESPACE"," ",40],["T_STRING","testForumIntegration",40],"(",")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n    ",40],["T_COMMENT","\/\/ Create a forum.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$entity_manager",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","container",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","get",42],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$term",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$entity_manager",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","getStorage",43],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_term'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","create",43],"(",["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'forums'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'name'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","randomMachineName",43],"(",")",")",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$term",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","save",44],"(",")",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$comment_storage",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$entity_manager",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getStorage",46],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Create some nodes which are part of this forum with some comments.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$nodes",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_FOR","for",50],["T_WHITESPACE"," ",50],"(",["T_VARIABLE","$i",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE"," ",50],["T_VARIABLE","$i",50],["T_WHITESPACE"," ",50],"<",["T_WHITESPACE"," ",50],["T_LNUMBER","3",50],";",["T_WHITESPACE"," ",50],["T_VARIABLE","$i",50],["T_INC","++",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$node",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalCreateNode",51],"(",["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'forum'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'taxonomy_forums'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_VARIABLE","$term",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","id",51],"(",")",")",",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'sticky'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$i",51],["T_WHITESPACE"," ",51],["T_IS_EQUAL","==",51],["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],["T_WHITESPACE"," ",51],"?",["T_WHITESPACE"," ",51],["T_STRING","NODE_STICKY",51],["T_WHITESPACE"," ",51],":",["T_WHITESPACE"," ",51],["T_STRING","NODE_NOT_STICKY",51],")",")",";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$nodes",52],"[","]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$node",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n\n    ",53],["T_VARIABLE","$account",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","drupalCreateUser",55],"(",["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",55],")",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","drupalLogin",56],"(",["T_VARIABLE","$account",56],")",";",["T_WHITESPACE","\n\n    ",56],["T_VARIABLE","$comments",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_FOREACH","foreach",59],["T_WHITESPACE"," ",59],"(",["T_VARIABLE","$nodes",59],["T_WHITESPACE"," ",59],["T_AS","as",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$index",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$node",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n      ",59],["T_FOR","for",60],["T_WHITESPACE"," ",60],"(",["T_VARIABLE","$i",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_LNUMBER","0",60],";",["T_WHITESPACE"," ",60],["T_VARIABLE","$i",60],["T_WHITESPACE"," ",60],["T_IS_SMALLER_OR_EQUAL","<=",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$index",60],";",["T_WHITESPACE"," ",60],["T_VARIABLE","$i",60],["T_INC","++",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n        ",60],["T_VARIABLE","$comment",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$comment_storage",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","create",61],"(",["T_ARRAY","array",61],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'node'",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$node",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'field_name'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'comment_forum'",61],")",")",";",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$comment",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","save",62],"(",")",";",["T_WHITESPACE","\n        ",62],["T_VARIABLE","$comments",63],"[",["T_VARIABLE","$comment",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","get",63],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",63],")",["T_OBJECT_OPERATOR","->",63],["T_STRING","target_id",63],"]","[",["T_VARIABLE","$comment",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","id",63],"(",")","]",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$comment",63],";",["T_WHITESPACE","\n      ",63],"}",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n\n    ",65],["T_VARIABLE","$view",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","Views",67],["T_DOUBLE_COLON","::",67],["T_STRING","getView",67],"(",["T_CONSTANT_ENCAPSED_STRING","'test_forum_index'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","executeView",68],"(",["T_VARIABLE","$view",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_VARIABLE","$expected_result",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$expected_result",71],"[","]",["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'nid'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$nodes",72],"[",["T_LNUMBER","0",72],"]",["T_OBJECT_OPERATOR","->",72],["T_STRING","id",72],"(",")",",",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'sticky'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_STRING","NODE_STICKY",73],",",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_DNUMBER","1.",74],["T_WHITESPACE","\n    ",74],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$expected_result",76],"[","]",["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_WHITESPACE","\n      ",76],["T_CONSTANT_ENCAPSED_STRING","'nid'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$nodes",77],"[",["T_LNUMBER","1",77],"]",["T_OBJECT_OPERATOR","->",77],["T_STRING","id",77],"(",")",",",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'sticky'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_STRING","NODE_NOT_STICKY",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_DNUMBER","2.",79],["T_WHITESPACE","\n    ",79],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$expected_result",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'nid'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$nodes",82],"[",["T_LNUMBER","2",82],"]",["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",",",["T_WHITESPACE","\n      ",82],["T_CONSTANT_ENCAPSED_STRING","'sticky'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_STRING","NODE_NOT_STICKY",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_DNUMBER","3.",84],["T_WHITESPACE","\n    ",84],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$column_map",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_ARRAY","array",86],"(",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'nid'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'nid'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'forum_index_sticky'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'sticky'",88],",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'forum_index_comment_count'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",89],",",["T_WHITESPACE","\n    ",89],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertIdenticalResultset",91],"(",["T_VARIABLE","$view",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$expected_result",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$column_map",91],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n",92],"}",["T_WHITESPACE","\n",94]]
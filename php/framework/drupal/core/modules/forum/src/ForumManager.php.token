[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","forum",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigFactoryInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Database",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Connection",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencyInjection",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DependencySerializationTrait",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityManagerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Session",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AccountInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StringTranslation",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TranslationInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StringTranslation",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StringTranslationTrait",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","comment",12],["T_NS_SEPARATOR","\\",12],["T_STRING","CommentManagerInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","node",13],["T_NS_SEPARATOR","\\",13],["T_STRING","NodeInterface",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Provides forum manager service.\n *\/",15],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","ForumManager",18],["T_WHITESPACE"," ",18],["T_IMPLEMENTS","implements",18],["T_WHITESPACE"," ",18],["T_STRING","ForumManagerInterface",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n  ",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","StringTranslationTrait",19],";",["T_WHITESPACE","\n  ",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","DependencySerializationTrait",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n    ",20],["T_STRING","__wakeup",21],["T_WHITESPACE"," ",21],["T_AS","as",21],["T_WHITESPACE"," ",21],["T_STRING","defaultWakeup",21],";",["T_WHITESPACE","\n    ",21],["T_STRING","__sleep",22],["T_WHITESPACE"," ",22],["T_AS","as",22],["T_WHITESPACE"," ",22],["T_STRING","defaultSleep",22],";",["T_WHITESPACE","\n  ",22],"}",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Forum sort order, newest first.\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_CONST","const",28],["T_WHITESPACE"," ",28],["T_STRING","NEWEST_FIRST",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_LNUMBER","1",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * Forum sort order, oldest first.\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","OLDEST_FIRST",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_LNUMBER","2",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Forum sort order, posts with most comments first.\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_CONST","const",38],["T_WHITESPACE"," ",38],["T_STRING","MOST_POPULAR_FIRST",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_LNUMBER","3",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Forum sort order, posts with the least comments first.\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_CONST","const",43],["T_WHITESPACE"," ",43],["T_STRING","LEAST_POPULAR_FIRST",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_LNUMBER","4",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * Forum settings config object.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$configFactory",50],";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * Entity manager service\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",52],["T_WHITESPACE","\n  ",56],["T_PROTECTED","protected",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$entityManager",57],";",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * Database connection\n   *\n   * @var \\Drupal\\Core\\Database\\Connection\n   *\/",59],["T_WHITESPACE","\n  ",63],["T_PROTECTED","protected",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$connection",64],";",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * The comment manager service.\n   *\n   * @var \\Drupal\\comment\\CommentManagerInterface\n   *\/",66],["T_WHITESPACE","\n  ",70],["T_PROTECTED","protected",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$commentManager",71],";",["T_WHITESPACE","\n\n  ",71],["T_DOC_COMMENT","\/**\n   * Array of last post information keyed by forum (term) id.\n   *\n   * @var array\n   *\/",73],["T_WHITESPACE","\n  ",77],["T_PROTECTED","protected",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$lastPostData",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n\n  ",78],["T_DOC_COMMENT","\/**\n   * Array of forum statistics keyed by forum (term) id.\n   *\n   * @var array\n   *\/",80],["T_WHITESPACE","\n  ",84],["T_PROTECTED","protected",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$forumStatistics",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_ARRAY","array",85],"(",")",";",["T_WHITESPACE","\n\n  ",85],["T_DOC_COMMENT","\/**\n   * Array of forum children keyed by parent forum (term) id.\n   *\n   * @var array\n   *\/",87],["T_WHITESPACE","\n  ",91],["T_PROTECTED","protected",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$forumChildren",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",";",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * Array of history keyed by nid.\n   *\n   * @var array\n   *\/",94],["T_WHITESPACE","\n  ",98],["T_PROTECTED","protected",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$history",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",";",["T_WHITESPACE","\n\n  ",99],["T_DOC_COMMENT","\/**\n   * Cached forum index.\n   *\n   * @var \\Drupal\\taxonomy\\TermInterface\n   *\/",101],["T_WHITESPACE","\n  ",105],["T_PROTECTED","protected",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$index",106],";",["T_WHITESPACE","\n\n  ",106],["T_DOC_COMMENT","\/**\n   * Constructs the forum manager service.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory service.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager service.\n   * @param \\Drupal\\Core\\Database\\Connection $connection\n   *   The current database connection.\n   * @param \\Drupal\\Core\\StringTranslation\\TranslationInterface $string_translation\n   *   The translation manager service.\n   * @param \\Drupal\\comment\\CommentManagerInterface $comment_manager\n   *   The comment manager service.\n   *\/",108],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","__construct",122],"(",["T_STRING","ConfigFactoryInterface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$config_factory",122],",",["T_WHITESPACE"," ",122],["T_STRING","EntityManagerInterface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$entity_manager",122],",",["T_WHITESPACE"," ",122],["T_STRING","Connection",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$connection",122],",",["T_WHITESPACE"," ",122],["T_STRING","TranslationInterface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$string_translation",122],",",["T_WHITESPACE"," ",122],["T_STRING","CommentManagerInterface",122],["T_WHITESPACE"," ",122],["T_VARIABLE","$comment_manager",122],")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","configFactory",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_VARIABLE","$config_factory",123],";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","entityManager",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_VARIABLE","$entity_manager",124],";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","connection",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$connection",125],";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","stringTranslation",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_VARIABLE","$string_translation",126],";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","commentManager",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$comment_manager",127],";",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",130],["T_WHITESPACE","\n  ",132],["T_PUBLIC","public",133],["T_WHITESPACE"," ",133],["T_FUNCTION","function",133],["T_WHITESPACE"," ",133],["T_STRING","getTopics",133],"(",["T_VARIABLE","$tid",133],",",["T_WHITESPACE"," ",133],["T_STRING","AccountInterface",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$account",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$config",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","configFactory",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","get",134],"(",["T_CONSTANT_ENCAPSED_STRING","'forum.settings'",134],")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$forum_per_page",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$config",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","get",135],"(",["T_CONSTANT_ENCAPSED_STRING","'topics.page_limit'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$sortby",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$config",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","get",136],"(",["T_CONSTANT_ENCAPSED_STRING","'topics.order'",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_VARIABLE","$header",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_ARRAY","array",138],"(",["T_WHITESPACE","\n      ",138],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","t",139],"(",["T_CONSTANT_ENCAPSED_STRING","'Topic'",139],")",",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'field'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'f.title'",139],")",",",["T_WHITESPACE","\n      ",139],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","t",140],"(",["T_CONSTANT_ENCAPSED_STRING","'Replies'",140],")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'field'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'f.comment_count'",140],")",",",["T_WHITESPACE","\n      ",140],["T_ARRAY","array",141],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","t",141],"(",["T_CONSTANT_ENCAPSED_STRING","'Last reply'",141],")",",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'field'",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'f.last_comment_timestamp'",141],")",",",["T_WHITESPACE","\n    ",141],")",";",["T_WHITESPACE","\n\n    ",142],["T_VARIABLE","$order",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getTopicOrder",144],"(",["T_VARIABLE","$sortby",144],")",";",["T_WHITESPACE","\n    ",144],["T_FOR","for",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$i",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],";",["T_WHITESPACE"," ",145],["T_VARIABLE","$i",145],["T_WHITESPACE"," ",145],"<",["T_WHITESPACE"," ",145],["T_STRING","count",145],"(",["T_VARIABLE","$header",145],")",";",["T_WHITESPACE"," ",145],["T_VARIABLE","$i",145],["T_INC","++",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$header",146],"[",["T_VARIABLE","$i",146],"]","[",["T_CONSTANT_ENCAPSED_STRING","'field'",146],"]",["T_WHITESPACE"," ",146],["T_IS_EQUAL","==",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$order",146],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",146],"]",")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$header",147],"[",["T_VARIABLE","$i",147],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sort'",147],"]",["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$order",147],"[",["T_CONSTANT_ENCAPSED_STRING","'sort'",147],"]",";",["T_WHITESPACE","\n      ",147],"}",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$query",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","connection",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","select",151],"(",["T_CONSTANT_ENCAPSED_STRING","'forum_index'",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'f'",151],")",["T_WHITESPACE","\n      ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","extend",152],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Database\\Query\\PagerSelectExtender'",152],")",["T_WHITESPACE","\n      ",152],["T_OBJECT_OPERATOR","->",153],["T_STRING","extend",153],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Database\\Query\\TableSortExtender'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$query",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","fields",154],"(",["T_CONSTANT_ENCAPSED_STRING","'f'",154],")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$query",155],["T_WHITESPACE","\n      ",155],["T_OBJECT_OPERATOR","->",156],["T_STRING","condition",156],"(",["T_CONSTANT_ENCAPSED_STRING","'f.tid'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$tid",156],")",["T_WHITESPACE","\n      ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","addTag",157],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",157],")",["T_WHITESPACE","\n      ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","addMetaData",158],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'forum_index'",158],")",["T_WHITESPACE","\n      ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","orderBy",159],"(",["T_CONSTANT_ENCAPSED_STRING","'f.sticky'",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'DESC'",159],")",["T_WHITESPACE","\n      ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","orderByHeader",160],"(",["T_VARIABLE","$header",160],")",["T_WHITESPACE","\n      ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","limit",161],"(",["T_VARIABLE","$forum_per_page",161],")",";",["T_WHITESPACE","\n\n    ",161],["T_VARIABLE","$count_query",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","connection",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","select",163],"(",["T_CONSTANT_ENCAPSED_STRING","'forum_index'",163],",",["T_WHITESPACE"," ",163],["T_CONSTANT_ENCAPSED_STRING","'f'",163],")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$count_query",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","condition",164],"(",["T_CONSTANT_ENCAPSED_STRING","'f.tid'",164],",",["T_WHITESPACE"," ",164],["T_VARIABLE","$tid",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$count_query",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","addExpression",165],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(*)'",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$count_query",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","addTag",166],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$count_query",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","addMetaData",167],"(",["T_CONSTANT_ENCAPSED_STRING","'base_table'",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'forum_index'",167],")",";",["T_WHITESPACE","\n\n    ",167],["T_VARIABLE","$query",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","setCountQuery",169],"(",["T_VARIABLE","$count_query",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$result",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$query",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","execute",170],"(",")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$nids",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_ARRAY","array",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_FOREACH","foreach",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$result",172],["T_WHITESPACE"," ",172],["T_AS","as",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$record",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$nids",173],"[","]",["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$record",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","nid",173],";",["T_WHITESPACE","\n    ",173],"}",["T_WHITESPACE","\n    ",174],["T_IF","if",175],["T_WHITESPACE"," ",175],"(",["T_VARIABLE","$nids",175],")",["T_WHITESPACE"," ",175],"{",["T_WHITESPACE","\n      ",175],["T_VARIABLE","$nodes",176],["T_WHITESPACE"," ",176],"=",["T_WHITESPACE"," ",176],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","entityManager",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","getStorage",176],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",176],")",["T_OBJECT_OPERATOR","->",176],["T_STRING","loadMultiple",176],"(",["T_VARIABLE","$nids",176],")",";",["T_WHITESPACE","\n\n      ",176],["T_VARIABLE","$query",178],["T_WHITESPACE"," ",178],"=",["T_WHITESPACE"," ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","connection",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","select",178],"(",["T_CONSTANT_ENCAPSED_STRING","'node_field_data'",178],",",["T_WHITESPACE"," ",178],["T_CONSTANT_ENCAPSED_STRING","'n'",178],")",["T_WHITESPACE","\n        ",178],["T_OBJECT_OPERATOR","->",179],["T_STRING","extend",179],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Database\\Query\\TableSortExtender'",179],")",";",["T_WHITESPACE","\n      ",179],["T_VARIABLE","$query",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","fields",180],"(",["T_CONSTANT_ENCAPSED_STRING","'n'",180],",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",180],")",")",";",["T_WHITESPACE","\n\n      ",180],["T_VARIABLE","$query",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","join",182],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_entity_statistics'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'ces'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","\"n.nid = ces.entity_id AND ces.field_name = 'comment_forum' AND ces.entity_type = 'node'\"",182],")",";",["T_WHITESPACE","\n      ",182],["T_VARIABLE","$query",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","fields",183],"(",["T_CONSTANT_ENCAPSED_STRING","'ces'",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_WHITESPACE","\n        ",183],["T_CONSTANT_ENCAPSED_STRING","'cid'",184],",",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'last_comment_uid'",185],",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'last_comment_timestamp'",186],",",["T_WHITESPACE","\n        ",186],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",187],["T_WHITESPACE","\n      ",187],")",")",";",["T_WHITESPACE","\n\n      ",188],["T_VARIABLE","$query",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","join",190],"(",["T_CONSTANT_ENCAPSED_STRING","'forum_index'",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'f'",190],",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'f.nid = n.nid'",190],")",";",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$query",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","addField",191],"(",["T_CONSTANT_ENCAPSED_STRING","'f'",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'tid'",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'forum_tid'",191],")",";",["T_WHITESPACE","\n\n      ",191],["T_VARIABLE","$query",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","join",193],"(",["T_CONSTANT_ENCAPSED_STRING","'users_field_data'",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'u'",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'n.uid = u.uid AND u.default_langcode = 1'",193],")",";",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$query",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","addField",194],"(",["T_CONSTANT_ENCAPSED_STRING","'u'",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'name'",194],")",";",["T_WHITESPACE","\n\n      ",194],["T_VARIABLE","$query",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","join",196],"(",["T_CONSTANT_ENCAPSED_STRING","'users_field_data'",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'u2'",196],",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'ces.last_comment_uid = u2.uid AND u.default_langcode = 1'",196],")",";",["T_WHITESPACE","\n\n      ",196],["T_VARIABLE","$query",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","addExpression",198],"(",["T_CONSTANT_ENCAPSED_STRING","'CASE ces.last_comment_uid WHEN 0 THEN ces.last_comment_name ELSE u2.name END'",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'last_comment_name'",198],")",";",["T_WHITESPACE","\n\n      ",198],["T_VARIABLE","$query",200],["T_WHITESPACE","\n        ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","orderBy",201],"(",["T_CONSTANT_ENCAPSED_STRING","'f.sticky'",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'DESC'",201],")",["T_WHITESPACE","\n        ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","orderByHeader",202],"(",["T_VARIABLE","$header",202],")",["T_WHITESPACE","\n        ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","condition",203],"(",["T_CONSTANT_ENCAPSED_STRING","'n.nid'",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$nids",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'IN'",203],")",["T_WHITESPACE","\n        ",203],["T_COMMENT","\/\/ @todo This should be actually filtering on the desired node language\n",204],["T_WHITESPACE","        ",205],["T_COMMENT","\/\/   and just fall back to the default language.\n",205],["T_WHITESPACE","        ",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","condition",206],"(",["T_CONSTANT_ENCAPSED_STRING","'n.default_langcode'",206],",",["T_WHITESPACE"," ",206],["T_LNUMBER","1",206],")",";",["T_WHITESPACE","\n\n      ",206],["T_VARIABLE","$result",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],"(",")",";",["T_WHITESPACE","\n      ",208],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$query",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","execute",209],"(",")",["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$row",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$topic",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$nodes",210],"[",["T_VARIABLE","$row",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","nid",210],"]",";",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$topic",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","comment_mode",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$topic",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","comment_forum",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","status",211],";",["T_WHITESPACE","\n\n        ",211],["T_FOREACH","foreach",213],["T_WHITESPACE"," ",213],"(",["T_VARIABLE","$row",213],["T_WHITESPACE"," ",213],["T_AS","as",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$key",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$value",213],")",["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n          ",213],["T_VARIABLE","$topic",214],["T_OBJECT_OPERATOR","->",214],"{",["T_VARIABLE","$key",214],"}",["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$value",214],";",["T_WHITESPACE","\n        ",214],"}",["T_WHITESPACE","\n        ",215],["T_VARIABLE","$result",216],"[","]",["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$topic",216],";",["T_WHITESPACE","\n      ",216],"}",["T_WHITESPACE","\n    ",217],"}",["T_WHITESPACE","\n    ",218],["T_ELSE","else",219],["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n      ",219],["T_VARIABLE","$result",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",";",["T_WHITESPACE","\n    ",220],"}",["T_WHITESPACE","\n\n    ",221],["T_VARIABLE","$topics",223],["T_WHITESPACE"," ",223],"=",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",")",";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$first_new_found",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","FALSE",224],";",["T_WHITESPACE","\n    ",224],["T_FOREACH","foreach",225],["T_WHITESPACE"," ",225],"(",["T_VARIABLE","$result",225],["T_WHITESPACE"," ",225],["T_AS","as",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$topic",225],")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n      ",225],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$account",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","isAuthenticated",226],"(",")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n        ",226],["T_COMMENT","\/\/ A forum is new if the topic is new, or if there are new comments since\n",227],["T_WHITESPACE","        ",228],["T_COMMENT","\/\/ the user's last visit.\n",228],["T_WHITESPACE","        ",229],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$topic",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","forum_tid",229],["T_WHITESPACE"," ",229],["T_IS_NOT_EQUAL","!=",229],["T_WHITESPACE"," ",229],["T_VARIABLE","$tid",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n          ",229],["T_VARIABLE","$topic",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","new",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_LNUMBER","0",230],";",["T_WHITESPACE","\n        ",230],"}",["T_WHITESPACE","\n        ",231],["T_ELSE","else",232],["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n          ",232],["T_VARIABLE","$history",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","lastVisit",233],"(",["T_VARIABLE","$topic",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","id",233],"(",")",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$account",233],")",";",["T_WHITESPACE","\n          ",233],["T_VARIABLE","$topic",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","new_replies",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","commentManager",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getCountNewComments",234],"(",["T_VARIABLE","$topic",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'comment_forum'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$history",234],")",";",["T_WHITESPACE","\n          ",234],["T_VARIABLE","$topic",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","new",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],["T_VARIABLE","$topic",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","new_replies",235],["T_WHITESPACE"," ",235],["T_BOOLEAN_OR","||",235],["T_WHITESPACE"," ",235],"(",["T_VARIABLE","$topic",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","last_comment_timestamp",235],["T_WHITESPACE"," ",235],">",["T_WHITESPACE"," ",235],["T_VARIABLE","$history",235],")",";",["T_WHITESPACE","\n        ",235],"}",["T_WHITESPACE","\n      ",236],"}",["T_WHITESPACE","\n      ",237],["T_ELSE","else",238],["T_WHITESPACE"," ",238],"{",["T_WHITESPACE","\n        ",238],["T_COMMENT","\/\/ Do not track \"new replies\" status for topics if the user is anonymous.\n",239],["T_WHITESPACE","        ",240],["T_VARIABLE","$topic",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","new_replies",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_LNUMBER","0",240],";",["T_WHITESPACE","\n        ",240],["T_VARIABLE","$topic",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","new",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","0",241],";",["T_WHITESPACE","\n      ",241],"}",["T_WHITESPACE","\n\n      ",242],["T_COMMENT","\/\/ Make sure only one topic is indicated as the first new topic.\n",244],["T_WHITESPACE","      ",245],["T_VARIABLE","$topic",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","first_new",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_STRING","FALSE",245],";",["T_WHITESPACE","\n      ",245],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$topic",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","new",246],["T_WHITESPACE"," ",246],["T_IS_NOT_EQUAL","!=",246],["T_WHITESPACE"," ",246],["T_LNUMBER","0",246],["T_WHITESPACE"," ",246],["T_BOOLEAN_AND","&&",246],["T_WHITESPACE"," ",246],"!",["T_VARIABLE","$first_new_found",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$topic",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","first_new",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","TRUE",247],";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$first_new_found",248],["T_WHITESPACE"," ",248],"=",["T_WHITESPACE"," ",248],["T_STRING","TRUE",248],";",["T_WHITESPACE","\n      ",248],"}",["T_WHITESPACE","\n\n      ",249],["T_IF","if",251],["T_WHITESPACE"," ",251],"(",["T_VARIABLE","$topic",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","comment_count",251],["T_WHITESPACE"," ",251],">",["T_WHITESPACE"," ",251],["T_LNUMBER","0",251],")",["T_WHITESPACE"," ",251],"{",["T_WHITESPACE","\n        ",251],["T_VARIABLE","$last_reply",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_NEW","new",252],["T_WHITESPACE"," ",252],["T_NS_SEPARATOR","\\",252],["T_STRING","stdClass",252],"(",")",";",["T_WHITESPACE","\n        ",252],["T_VARIABLE","$last_reply",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","created",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$topic",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","last_comment_timestamp",253],";",["T_WHITESPACE","\n        ",253],["T_VARIABLE","$last_reply",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","name",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$topic",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","last_comment_name",254],";",["T_WHITESPACE","\n        ",254],["T_VARIABLE","$last_reply",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","uid",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$topic",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","last_comment_uid",255],";",["T_WHITESPACE","\n        ",255],["T_VARIABLE","$topic",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","last_reply",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$last_reply",256],";",["T_WHITESPACE","\n      ",256],"}",["T_WHITESPACE","\n      ",257],["T_VARIABLE","$topics",258],"[",["T_VARIABLE","$topic",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","id",258],"(",")","]",["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_VARIABLE","$topic",258],";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_RETURN","return",261],["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_CONSTANT_ENCAPSED_STRING","'topics'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$topics",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'header'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$header",261],")",";",["T_WHITESPACE","\n\n  ",261],"}",["T_WHITESPACE","\n\n  ",263],["T_DOC_COMMENT","\/**\n   * Gets topic sorting information based on an integer code.\n   *\n   * @param int $sortby\n   *   One of the following integers indicating the sort criteria:\n   *   - ForumManager::NEWEST_FIRST: Date - newest first.\n   *   - ForumManager::OLDEST_FIRST: Date - oldest first.\n   *   - ForumManager::MOST_POPULAR_FIRST: Posts with the most comments first.\n   *   - ForumManager::LEAST_POPULAR_FIRST: Posts with the least comments first.\n   *\n   * @return array\n   *   An array with the following values:\n   *   - field: A field for an SQL query.\n   *   - sort: 'asc' or 'desc'.\n   *\/",265],["T_WHITESPACE","\n  ",279],["T_PROTECTED","protected",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","getTopicOrder",280],"(",["T_VARIABLE","$sortby",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n    ",280],["T_SWITCH","switch",281],["T_WHITESPACE"," ",281],"(",["T_VARIABLE","$sortby",281],")",["T_WHITESPACE"," ",281],"{",["T_WHITESPACE","\n      ",281],["T_CASE","case",282],["T_WHITESPACE"," ",282],["T_STATIC","static",282],["T_DOUBLE_COLON","::",282],["T_STRING","NEWEST_FIRST",282],":",["T_WHITESPACE","\n        ",282],["T_RETURN","return",283],["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'f.last_comment_timestamp'",283],",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'sort'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'desc'",283],")",";",["T_WHITESPACE","\n\n      ",283],["T_CASE","case",285],["T_WHITESPACE"," ",285],["T_STATIC","static",285],["T_DOUBLE_COLON","::",285],["T_STRING","OLDEST_FIRST",285],":",["T_WHITESPACE","\n        ",285],["T_RETURN","return",286],["T_WHITESPACE"," ",286],["T_ARRAY","array",286],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'f.last_comment_timestamp'",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'sort'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'asc'",286],")",";",["T_WHITESPACE","\n\n      ",286],["T_CASE","case",288],["T_WHITESPACE"," ",288],["T_STATIC","static",288],["T_DOUBLE_COLON","::",288],["T_STRING","MOST_POPULAR_FIRST",288],":",["T_WHITESPACE","\n        ",288],["T_RETURN","return",289],["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'f.comment_count'",289],",",["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'sort'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_CONSTANT_ENCAPSED_STRING","'desc'",289],")",";",["T_WHITESPACE","\n\n      ",289],["T_CASE","case",291],["T_WHITESPACE"," ",291],["T_STATIC","static",291],["T_DOUBLE_COLON","::",291],["T_STRING","LEAST_POPULAR_FIRST",291],":",["T_WHITESPACE","\n        ",291],["T_RETURN","return",292],["T_WHITESPACE"," ",292],["T_ARRAY","array",292],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'f.comment_count'",292],",",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'sort'",292],["T_WHITESPACE"," ",292],["T_DOUBLE_ARROW","=>",292],["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'asc'",292],")",";",["T_WHITESPACE","\n\n    ",292],"}",["T_WHITESPACE","\n  ",294],"}",["T_WHITESPACE","\n\n  ",295],["T_DOC_COMMENT","\/**\n   * Gets the last time the user viewed a node.\n   *\n   * @param int $nid\n   *   The node ID.\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   Account to fetch last time for.\n   *\n   * @return int\n   *   The timestamp when the user last viewed this node, if the user has\n   *   previously viewed the node; otherwise HISTORY_READ_LIMIT.\n   *\/",297],["T_WHITESPACE","\n  ",308],["T_PROTECTED","protected",309],["T_WHITESPACE"," ",309],["T_FUNCTION","function",309],["T_WHITESPACE"," ",309],["T_STRING","lastVisit",309],"(",["T_VARIABLE","$nid",309],",",["T_WHITESPACE"," ",309],["T_STRING","AccountInterface",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$account",309],")",["T_WHITESPACE"," ",309],"{",["T_WHITESPACE","\n    ",309],["T_IF","if",310],["T_WHITESPACE"," ",310],"(",["T_EMPTY","empty",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","history",310],"[",["T_VARIABLE","$nid",310],"]",")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$result",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","connection",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","select",311],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",311],",",["T_WHITESPACE"," ",311],["T_CONSTANT_ENCAPSED_STRING","'h'",311],")",["T_WHITESPACE","\n        ",311],["T_OBJECT_OPERATOR","->",312],["T_STRING","fields",312],"(",["T_CONSTANT_ENCAPSED_STRING","'h'",312],",",["T_WHITESPACE"," ",312],["T_ARRAY","array",312],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",312],")",")",["T_WHITESPACE","\n        ",312],["T_OBJECT_OPERATOR","->",313],["T_STRING","condition",313],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$account",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","id",313],"(",")",")",["T_WHITESPACE","\n        ",313],["T_OBJECT_OPERATOR","->",314],["T_STRING","execute",314],"(",")",";",["T_WHITESPACE","\n      ",314],["T_FOREACH","foreach",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$result",315],["T_WHITESPACE"," ",315],["T_AS","as",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$t",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n        ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","history",316],"[",["T_VARIABLE","$t",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","nid",316],"]",["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$t",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","timestamp",316],["T_WHITESPACE"," ",316],">",["T_WHITESPACE"," ",316],["T_STRING","HISTORY_READ_LIMIT",316],["T_WHITESPACE"," ",316],"?",["T_WHITESPACE"," ",316],["T_VARIABLE","$t",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","timestamp",316],["T_WHITESPACE"," ",316],":",["T_WHITESPACE"," ",316],["T_STRING","HISTORY_READ_LIMIT",316],";",["T_WHITESPACE","\n      ",316],"}",["T_WHITESPACE","\n    ",317],"}",["T_WHITESPACE","\n    ",318],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_ISSET","isset",319],"(",["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","history",319],"[",["T_VARIABLE","$nid",319],"]",")",["T_WHITESPACE"," ",319],"?",["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","history",319],"[",["T_VARIABLE","$nid",319],"]",["T_WHITESPACE"," ",319],":",["T_WHITESPACE"," ",319],["T_STRING","HISTORY_READ_LIMIT",319],";",["T_WHITESPACE","\n  ",319],"}",["T_WHITESPACE","\n\n  ",320],["T_DOC_COMMENT","\/**\n   * Provides the last post information for the given forum tid.\n   *\n   * @param int $tid\n   *   The forum tid.\n   *\n   * @return \\stdClass\n   *   The last post for the given forum.\n   *\/",322],["T_WHITESPACE","\n  ",330],["T_PROTECTED","protected",331],["T_WHITESPACE"," ",331],["T_FUNCTION","function",331],["T_WHITESPACE"," ",331],["T_STRING","getLastPost",331],"(",["T_VARIABLE","$tid",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n    ",331],["T_IF","if",332],["T_WHITESPACE"," ",332],"(","!",["T_EMPTY","empty",332],"(",["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","lastPostData",332],"[",["T_VARIABLE","$tid",332],"]",")",")",["T_WHITESPACE"," ",332],"{",["T_WHITESPACE","\n      ",332],["T_RETURN","return",333],["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","lastPostData",333],"[",["T_VARIABLE","$tid",333],"]",";",["T_WHITESPACE","\n    ",333],"}",["T_WHITESPACE","\n    ",334],["T_COMMENT","\/\/ Query \"Last Post\" information for this forum.\n",335],["T_WHITESPACE","    ",336],["T_VARIABLE","$query",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","connection",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","select",336],"(",["T_CONSTANT_ENCAPSED_STRING","'node_field_data'",336],",",["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'n'",336],")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$query",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","join",337],"(",["T_CONSTANT_ENCAPSED_STRING","'forum'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'f'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'n.vid = f.vid AND f.tid = :tid'",337],",",["T_WHITESPACE"," ",337],["T_ARRAY","array",337],"(",["T_CONSTANT_ENCAPSED_STRING","':tid'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$tid",337],")",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$query",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","join",338],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_entity_statistics'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'ces'",338],",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","\"n.nid = ces.entity_id AND ces.field_name = 'comment_forum' AND ces.entity_type = 'node'\"",338],")",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$query",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","join",339],"(",["T_CONSTANT_ENCAPSED_STRING","'users_field_data'",339],",",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'u'",339],",",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'ces.last_comment_uid = u.uid AND u.default_langcode = 1'",339],")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$query",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","addExpression",340],"(",["T_CONSTANT_ENCAPSED_STRING","'CASE ces.last_comment_uid WHEN 0 THEN ces.last_comment_name ELSE u.name END'",340],",",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'last_comment_name'",340],")",";",["T_WHITESPACE","\n\n    ",340],["T_VARIABLE","$topic",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$query",342],["T_WHITESPACE","\n      ",342],["T_OBJECT_OPERATOR","->",343],["T_STRING","fields",343],"(",["T_CONSTANT_ENCAPSED_STRING","'ces'",343],",",["T_WHITESPACE"," ",343],["T_ARRAY","array",343],"(",["T_CONSTANT_ENCAPSED_STRING","'last_comment_timestamp'",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'last_comment_uid'",343],")",")",["T_WHITESPACE","\n      ",343],["T_OBJECT_OPERATOR","->",344],["T_STRING","condition",344],"(",["T_CONSTANT_ENCAPSED_STRING","'n.status'",344],",",["T_WHITESPACE"," ",344],["T_LNUMBER","1",344],")",["T_WHITESPACE","\n      ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","orderBy",345],"(",["T_CONSTANT_ENCAPSED_STRING","'last_comment_timestamp'",345],",",["T_WHITESPACE"," ",345],["T_CONSTANT_ENCAPSED_STRING","'DESC'",345],")",["T_WHITESPACE","\n      ",345],["T_OBJECT_OPERATOR","->",346],["T_STRING","range",346],"(",["T_LNUMBER","0",346],",",["T_WHITESPACE"," ",346],["T_LNUMBER","1",346],")",["T_WHITESPACE","\n      ",346],["T_OBJECT_OPERATOR","->",347],["T_STRING","addTag",347],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",347],")",["T_WHITESPACE","\n      ",347],["T_OBJECT_OPERATOR","->",348],["T_STRING","execute",348],"(",")",["T_WHITESPACE","\n      ",348],["T_OBJECT_OPERATOR","->",349],["T_STRING","fetchObject",349],"(",")",";",["T_WHITESPACE","\n\n    ",349],["T_COMMENT","\/\/ Build the last post information.\n",351],["T_WHITESPACE","    ",352],["T_VARIABLE","$last_post",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_NEW","new",352],["T_WHITESPACE"," ",352],["T_NS_SEPARATOR","\\",352],["T_STRING","stdClass",352],"(",")",";",["T_WHITESPACE","\n    ",352],["T_IF","if",353],["T_WHITESPACE"," ",353],"(","!",["T_EMPTY","empty",353],"(",["T_VARIABLE","$topic",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","last_comment_timestamp",353],")",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n      ",353],["T_VARIABLE","$last_post",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","created",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_VARIABLE","$topic",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","last_comment_timestamp",354],";",["T_WHITESPACE","\n      ",354],["T_VARIABLE","$last_post",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","name",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$topic",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","last_comment_name",355],";",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$last_post",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","uid",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_VARIABLE","$topic",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","last_comment_uid",356],";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n\n    ",357],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","lastPostData",359],"[",["T_VARIABLE","$tid",359],"]",["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$last_post",359],";",["T_WHITESPACE","\n    ",359],["T_RETURN","return",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$last_post",360],";",["T_WHITESPACE","\n  ",360],"}",["T_WHITESPACE","\n\n  ",361],["T_DOC_COMMENT","\/**\n   * Provides statistics for a forum.\n   *\n   * @param int $tid\n   *   The forum tid.\n   *\n   * @return \\stdClass|null\n   *   Statistics for the given forum if statistics exist, else NULL.\n   *\/",363],["T_WHITESPACE","\n  ",371],["T_PROTECTED","protected",372],["T_WHITESPACE"," ",372],["T_FUNCTION","function",372],["T_WHITESPACE"," ",372],["T_STRING","getForumStatistics",372],"(",["T_VARIABLE","$tid",372],")",["T_WHITESPACE"," ",372],"{",["T_WHITESPACE","\n    ",372],["T_IF","if",373],["T_WHITESPACE"," ",373],"(",["T_EMPTY","empty",373],"(",["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","forumStatistics",373],")",")",["T_WHITESPACE"," ",373],"{",["T_WHITESPACE","\n      ",373],["T_COMMENT","\/\/ Prime the statistics.\n",374],["T_WHITESPACE","      ",375],["T_VARIABLE","$query",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","connection",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","select",375],"(",["T_CONSTANT_ENCAPSED_STRING","'node_field_data'",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'n'",375],")",";",["T_WHITESPACE","\n      ",375],["T_VARIABLE","$query",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","join",376],"(",["T_CONSTANT_ENCAPSED_STRING","'comment_entity_statistics'",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'ces'",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","\"n.nid = ces.entity_id AND ces.field_name = 'comment_forum' AND ces.entity_type = 'node'\"",376],")",";",["T_WHITESPACE","\n      ",376],["T_VARIABLE","$query",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","join",377],"(",["T_CONSTANT_ENCAPSED_STRING","'forum'",377],",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'f'",377],",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'n.vid = f.vid'",377],")",";",["T_WHITESPACE","\n      ",377],["T_VARIABLE","$query",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","addExpression",378],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(n.nid)'",378],",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'topic_count'",378],")",";",["T_WHITESPACE","\n      ",378],["T_VARIABLE","$query",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","addExpression",379],"(",["T_CONSTANT_ENCAPSED_STRING","'SUM(ces.comment_count)'",379],",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'comment_count'",379],")",";",["T_WHITESPACE","\n      ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","forumStatistics",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$query",380],["T_WHITESPACE","\n        ",380],["T_OBJECT_OPERATOR","->",381],["T_STRING","fields",381],"(",["T_CONSTANT_ENCAPSED_STRING","'f'",381],",",["T_WHITESPACE"," ",381],["T_ARRAY","array",381],"(",["T_CONSTANT_ENCAPSED_STRING","'tid'",381],")",")",["T_WHITESPACE","\n        ",381],["T_OBJECT_OPERATOR","->",382],["T_STRING","condition",382],"(",["T_CONSTANT_ENCAPSED_STRING","'n.status'",382],",",["T_WHITESPACE"," ",382],["T_LNUMBER","1",382],")",["T_WHITESPACE","\n        ",382],["T_OBJECT_OPERATOR","->",383],["T_STRING","condition",383],"(",["T_CONSTANT_ENCAPSED_STRING","'n.default_langcode'",383],",",["T_WHITESPACE"," ",383],["T_LNUMBER","1",383],")",["T_WHITESPACE","\n        ",383],["T_OBJECT_OPERATOR","->",384],["T_STRING","groupBy",384],"(",["T_CONSTANT_ENCAPSED_STRING","'tid'",384],")",["T_WHITESPACE","\n        ",384],["T_OBJECT_OPERATOR","->",385],["T_STRING","addTag",385],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",385],")",["T_WHITESPACE","\n        ",385],["T_OBJECT_OPERATOR","->",386],["T_STRING","execute",386],"(",")",["T_WHITESPACE","\n        ",386],["T_OBJECT_OPERATOR","->",387],["T_STRING","fetchAllAssoc",387],"(",["T_CONSTANT_ENCAPSED_STRING","'tid'",387],")",";",["T_WHITESPACE","\n    ",387],"}",["T_WHITESPACE","\n\n    ",388],["T_IF","if",390],["T_WHITESPACE"," ",390],"(","!",["T_EMPTY","empty",390],"(",["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","forumStatistics",390],"[",["T_VARIABLE","$tid",390],"]",")",")",["T_WHITESPACE"," ",390],"{",["T_WHITESPACE","\n      ",390],["T_RETURN","return",391],["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","forumStatistics",391],"[",["T_VARIABLE","$tid",391],"]",";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n  ",392],"}",["T_WHITESPACE","\n\n  ",393],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",395],["T_WHITESPACE","\n  ",397],["T_PUBLIC","public",398],["T_WHITESPACE"," ",398],["T_FUNCTION","function",398],["T_WHITESPACE"," ",398],["T_STRING","getChildren",398],"(",["T_VARIABLE","$vid",398],",",["T_WHITESPACE"," ",398],["T_VARIABLE","$tid",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n    ",398],["T_IF","if",399],["T_WHITESPACE"," ",399],"(","!",["T_EMPTY","empty",399],"(",["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","forumChildren",399],"[",["T_VARIABLE","$tid",399],"]",")",")",["T_WHITESPACE"," ",399],"{",["T_WHITESPACE","\n      ",399],["T_RETURN","return",400],["T_WHITESPACE"," ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","forumChildren",400],"[",["T_VARIABLE","$tid",400],"]",";",["T_WHITESPACE","\n    ",400],"}",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$forums",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_ARRAY","array",402],"(",")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$_forums",403],["T_WHITESPACE"," ",403],"=",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","entityManager",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","getStorage",403],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_term'",403],")",["T_OBJECT_OPERATOR","->",403],["T_STRING","loadTree",403],"(",["T_VARIABLE","$vid",403],",",["T_WHITESPACE"," ",403],["T_VARIABLE","$tid",403],",",["T_WHITESPACE"," ",403],["T_STRING","NULL",403],",",["T_WHITESPACE"," ",403],["T_STRING","TRUE",403],")",";",["T_WHITESPACE","\n    ",403],["T_FOREACH","foreach",404],["T_WHITESPACE"," ",404],"(",["T_VARIABLE","$_forums",404],["T_WHITESPACE"," ",404],["T_AS","as",404],["T_WHITESPACE"," ",404],["T_VARIABLE","$forum",404],")",["T_WHITESPACE"," ",404],"{",["T_WHITESPACE","\n      ",404],["T_COMMENT","\/\/ Merge in the topic and post counters.\n",405],["T_WHITESPACE","      ",406],["T_IF","if",406],["T_WHITESPACE"," ",406],"(","(",["T_VARIABLE","$count",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","getForumStatistics",406],"(",["T_VARIABLE","$forum",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","id",406],"(",")",")",")",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n        ",406],["T_VARIABLE","$forum",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","num_topics",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$count",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","topic_count",407],";",["T_WHITESPACE","\n        ",407],["T_VARIABLE","$forum",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","num_posts",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_VARIABLE","$count",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","topic_count",408],["T_WHITESPACE"," ",408],"+",["T_WHITESPACE"," ",408],["T_VARIABLE","$count",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","comment_count",408],";",["T_WHITESPACE","\n      ",408],"}",["T_WHITESPACE","\n      ",409],["T_ELSE","else",410],["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n        ",410],["T_VARIABLE","$forum",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","num_topics",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_LNUMBER","0",411],";",["T_WHITESPACE","\n        ",411],["T_VARIABLE","$forum",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","num_posts",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_LNUMBER","0",412],";",["T_WHITESPACE","\n      ",412],"}",["T_WHITESPACE","\n\n      ",413],["T_COMMENT","\/\/ Merge in last post details.\n",415],["T_WHITESPACE","      ",416],["T_VARIABLE","$forum",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","last_post",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","getLastPost",416],"(",["T_VARIABLE","$forum",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","id",416],"(",")",")",";",["T_WHITESPACE","\n      ",416],["T_VARIABLE","$forums",417],"[",["T_VARIABLE","$forum",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","id",417],"(",")","]",["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_VARIABLE","$forum",417],";",["T_WHITESPACE","\n    ",417],"}",["T_WHITESPACE","\n\n    ",418],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","forumChildren",420],"[",["T_VARIABLE","$tid",420],"]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],["T_VARIABLE","$forums",420],";",["T_WHITESPACE","\n    ",420],["T_RETURN","return",421],["T_WHITESPACE"," ",421],["T_VARIABLE","$forums",421],";",["T_WHITESPACE","\n  ",421],"}",["T_WHITESPACE","\n\n  ",422],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",424],["T_WHITESPACE","\n  ",426],["T_PUBLIC","public",427],["T_WHITESPACE"," ",427],["T_FUNCTION","function",427],["T_WHITESPACE"," ",427],["T_STRING","getIndex",427],"(",")",["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n    ",427],["T_IF","if",428],["T_WHITESPACE"," ",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","index",428],")",["T_WHITESPACE"," ",428],"{",["T_WHITESPACE","\n      ",428],["T_RETURN","return",429],["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","index",429],";",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n\n    ",430],["T_VARIABLE","$vid",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","configFactory",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","get",432],"(",["T_CONSTANT_ENCAPSED_STRING","'forum.settings'",432],")",["T_OBJECT_OPERATOR","->",432],["T_STRING","get",432],"(",["T_CONSTANT_ENCAPSED_STRING","'vocabulary'",432],")",";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$index",433],["T_WHITESPACE"," ",433],"=",["T_WHITESPACE"," ",433],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","entityManager",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","getStorage",433],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_term'",433],")",["T_OBJECT_OPERATOR","->",433],["T_STRING","create",433],"(",["T_ARRAY","array",433],"(",["T_WHITESPACE","\n      ",433],["T_CONSTANT_ENCAPSED_STRING","'tid'",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_LNUMBER","0",434],",",["T_WHITESPACE","\n      ",434],["T_CONSTANT_ENCAPSED_STRING","'container'",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_LNUMBER","1",435],",",["T_WHITESPACE","\n      ",435],["T_CONSTANT_ENCAPSED_STRING","'parents'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",")",",",["T_WHITESPACE","\n      ",436],["T_CONSTANT_ENCAPSED_STRING","'isIndex'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_STRING","TRUE",437],",",["T_WHITESPACE","\n      ",437],["T_CONSTANT_ENCAPSED_STRING","'vid'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$vid",438],["T_WHITESPACE","\n    ",438],")",")",";",["T_WHITESPACE","\n\n    ",439],["T_COMMENT","\/\/ Load the tree below.\n",441],["T_WHITESPACE","    ",442],["T_VARIABLE","$index",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","forums",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getChildren",442],"(",["T_VARIABLE","$vid",442],",",["T_WHITESPACE"," ",442],["T_LNUMBER","0",442],")",";",["T_WHITESPACE","\n    ",442],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","index",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$index",443],";",["T_WHITESPACE","\n    ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$index",444],";",["T_WHITESPACE","\n  ",444],"}",["T_WHITESPACE","\n\n  ",445],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",447],["T_WHITESPACE","\n  ",449],["T_PUBLIC","public",450],["T_WHITESPACE"," ",450],["T_FUNCTION","function",450],["T_WHITESPACE"," ",450],["T_STRING","resetCache",450],"(",")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n    ",450],["T_COMMENT","\/\/ Reset the index.\n",451],["T_WHITESPACE","    ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","index",452],["T_WHITESPACE"," ",452],"=",["T_WHITESPACE"," ",452],["T_STRING","NULL",452],";",["T_WHITESPACE","\n    ",452],["T_COMMENT","\/\/ Reset history.\n",453],["T_WHITESPACE","    ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","history",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_ARRAY","array",454],"(",")",";",["T_WHITESPACE","\n  ",454],"}",["T_WHITESPACE","\n\n  ",455],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",457],["T_WHITESPACE","\n  ",459],["T_PUBLIC","public",460],["T_WHITESPACE"," ",460],["T_FUNCTION","function",460],["T_WHITESPACE"," ",460],["T_STRING","getParents",460],"(",["T_VARIABLE","$tid",460],")",["T_WHITESPACE"," ",460],"{",["T_WHITESPACE","\n    ",460],["T_RETURN","return",461],["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","entityManager",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getStorage",461],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_term'",461],")",["T_OBJECT_OPERATOR","->",461],["T_STRING","loadAllParents",461],"(",["T_VARIABLE","$tid",461],")",";",["T_WHITESPACE","\n  ",461],"}",["T_WHITESPACE","\n\n  ",462],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",464],["T_WHITESPACE","\n  ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","checkNodeType",467],"(",["T_STRING","NodeInterface",467],["T_WHITESPACE"," ",467],["T_VARIABLE","$node",467],")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n    ",467],["T_COMMENT","\/\/ Fetch information about the forum field.\n",468],["T_WHITESPACE","    ",469],["T_VARIABLE","$field_definitions",469],["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","entityManager",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","getFieldDefinitions",469],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",469],",",["T_WHITESPACE"," ",469],["T_VARIABLE","$node",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","bundle",469],"(",")",")",";",["T_WHITESPACE","\n    ",469],["T_RETURN","return",470],["T_WHITESPACE"," ",470],"!",["T_EMPTY","empty",470],"(",["T_VARIABLE","$field_definitions",470],"[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_forums'",470],"]",")",";",["T_WHITESPACE","\n  ",470],"}",["T_WHITESPACE","\n\n  ",471],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",473],["T_WHITESPACE","\n  ",475],["T_PUBLIC","public",476],["T_WHITESPACE"," ",476],["T_FUNCTION","function",476],["T_WHITESPACE"," ",476],["T_STRING","unreadTopics",476],"(",["T_VARIABLE","$term",476],",",["T_WHITESPACE"," ",476],["T_VARIABLE","$uid",476],")",["T_WHITESPACE"," ",476],"{",["T_WHITESPACE","\n    ",476],["T_VARIABLE","$query",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","connection",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","select",477],"(",["T_CONSTANT_ENCAPSED_STRING","'node_field_data'",477],",",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'n'",477],")",";",["T_WHITESPACE","\n    ",477],["T_VARIABLE","$query",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","join",478],"(",["T_CONSTANT_ENCAPSED_STRING","'forum'",478],",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'f'",478],",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'n.vid = f.vid AND f.tid = :tid'",478],",",["T_WHITESPACE"," ",478],["T_ARRAY","array",478],"(",["T_CONSTANT_ENCAPSED_STRING","':tid'",478],["T_WHITESPACE"," ",478],["T_DOUBLE_ARROW","=>",478],["T_WHITESPACE"," ",478],["T_VARIABLE","$term",478],")",")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$query",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","leftJoin",479],"(",["T_CONSTANT_ENCAPSED_STRING","'history'",479],",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'h'",479],",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'n.nid = h.nid AND h.uid = :uid'",479],",",["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",["T_CONSTANT_ENCAPSED_STRING","':uid'",479],["T_WHITESPACE"," ",479],["T_DOUBLE_ARROW","=>",479],["T_WHITESPACE"," ",479],["T_VARIABLE","$uid",479],")",")",";",["T_WHITESPACE","\n    ",479],["T_VARIABLE","$query",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","addExpression",480],"(",["T_CONSTANT_ENCAPSED_STRING","'COUNT(n.nid)'",480],",",["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'count'",480],")",";",["T_WHITESPACE","\n    ",480],["T_RETURN","return",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$query",481],["T_WHITESPACE","\n      ",481],["T_OBJECT_OPERATOR","->",482],["T_STRING","condition",482],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",482],",",["T_WHITESPACE"," ",482],["T_LNUMBER","1",482],")",["T_WHITESPACE","\n      ",482],["T_COMMENT","\/\/ @todo This should be actually filtering on the desired node status\n",483],["T_WHITESPACE","      ",484],["T_COMMENT","\/\/   field language and just fall back to the default language.\n",484],["T_WHITESPACE","      ",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","condition",485],"(",["T_CONSTANT_ENCAPSED_STRING","'n.default_langcode'",485],",",["T_WHITESPACE"," ",485],["T_LNUMBER","1",485],")",["T_WHITESPACE","\n      ",485],["T_OBJECT_OPERATOR","->",486],["T_STRING","condition",486],"(",["T_CONSTANT_ENCAPSED_STRING","'n.created'",486],",",["T_WHITESPACE"," ",486],["T_STRING","HISTORY_READ_LIMIT",486],",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'>'",486],")",["T_WHITESPACE","\n      ",486],["T_OBJECT_OPERATOR","->",487],["T_STRING","isNull",487],"(",["T_CONSTANT_ENCAPSED_STRING","'h.nid'",487],")",["T_WHITESPACE","\n      ",487],["T_OBJECT_OPERATOR","->",488],["T_STRING","addTag",488],"(",["T_CONSTANT_ENCAPSED_STRING","'node_access'",488],")",["T_WHITESPACE","\n      ",488],["T_OBJECT_OPERATOR","->",489],["T_STRING","execute",489],"(",")",["T_WHITESPACE","\n      ",489],["T_OBJECT_OPERATOR","->",490],["T_STRING","fetchField",490],"(",")",";",["T_WHITESPACE","\n  ",490],"}",["T_WHITESPACE","\n\n  ",491],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",493],["T_WHITESPACE","\n  ",495],["T_PUBLIC","public",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","__sleep",496],"(",")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_VARIABLE","$vars",497],["T_WHITESPACE"," ",497],"=",["T_WHITESPACE"," ",497],["T_VARIABLE","$this",497],["T_OBJECT_OPERATOR","->",497],["T_STRING","defaultSleep",497],"(",")",";",["T_WHITESPACE","\n    ",497],["T_COMMENT","\/\/ Do not serialize static cache.\n",498],["T_WHITESPACE","    ",499],["T_UNSET","unset",499],"(",["T_VARIABLE","$vars",499],"[",["T_CONSTANT_ENCAPSED_STRING","'history'",499],"]",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$vars",499],"[",["T_CONSTANT_ENCAPSED_STRING","'index'",499],"]",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$vars",499],"[",["T_CONSTANT_ENCAPSED_STRING","'lastPostData'",499],"]",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$vars",499],"[",["T_CONSTANT_ENCAPSED_STRING","'forumChildren'",499],"]",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$vars",499],"[",["T_CONSTANT_ENCAPSED_STRING","'forumStatistics'",499],"]",")",";",["T_WHITESPACE","\n    ",499],["T_RETURN","return",500],["T_WHITESPACE"," ",500],["T_VARIABLE","$vars",500],";",["T_WHITESPACE","\n  ",500],"}",["T_WHITESPACE","\n\n  ",501],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",503],["T_WHITESPACE","\n  ",505],["T_PUBLIC","public",506],["T_WHITESPACE"," ",506],["T_FUNCTION","function",506],["T_WHITESPACE"," ",506],["T_STRING","__wakeup",506],"(",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n    ",506],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","defaultWakeup",507],"(",")",";",["T_WHITESPACE","\n    ",507],["T_COMMENT","\/\/ Initialize static cache.\n",508],["T_WHITESPACE","    ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","history",509],["T_WHITESPACE"," ",509],"=",["T_WHITESPACE"," ",509],["T_ARRAY","array",509],"(",")",";",["T_WHITESPACE","\n    ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","lastPostData",510],["T_WHITESPACE"," ",510],"=",["T_WHITESPACE"," ",510],["T_ARRAY","array",510],"(",")",";",["T_WHITESPACE","\n    ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","forumChildren",511],["T_WHITESPACE"," ",511],"=",["T_WHITESPACE"," ",511],["T_ARRAY","array",511],"(",")",";",["T_WHITESPACE","\n    ",511],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","forumStatistics",512],["T_WHITESPACE"," ",512],"=",["T_WHITESPACE"," ",512],["T_ARRAY","array",512],"(",")",";",["T_WHITESPACE","\n    ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","index",513],["T_WHITESPACE"," ",513],"=",["T_WHITESPACE"," ",513],["T_STRING","NULL",513],";",["T_WHITESPACE","\n  ",513],"}",["T_WHITESPACE","\n\n",514],"}",["T_WHITESPACE","\n",516]]
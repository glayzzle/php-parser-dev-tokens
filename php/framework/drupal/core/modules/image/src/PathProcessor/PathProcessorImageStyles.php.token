[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","PathProcessor",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PathProcessor",5],["T_NS_SEPARATOR","\\",5],["T_STRING","InboundPathProcessorInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","StreamWrapper",6],["T_NS_SEPARATOR","\\",6],["T_STRING","StreamWrapperManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Symfony",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","HttpFoundation",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Request",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Defines a path processor to rewrite image styles URLs.\n *\n * As the route system does not allow arbitrary amount of parameters convert\n * the file path to a query parameter on the request.\n *\n * This processor handles two different cases:\n * - public image styles: In order to allow the webserver to serve these files\n *   directly, the route is registered under the same path as the image style so\n *   it took over the first generation. Therefore the path processor converts\n *   the file path to a query parameter.\n * - private image styles: In contrast to public image styles, private\n *   derivatives are already using system\/files\/styles. Similar to public image\n *   styles, it also converts the file path to a query parameter.\n *\/",9],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","PathProcessorImageStyles",24],["T_WHITESPACE"," ",24],["T_IMPLEMENTS","implements",24],["T_WHITESPACE"," ",24],["T_STRING","InboundPathProcessorInterface",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * The stream wrapper manager service.\n   *\n   * @var \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$streamWrapperManager",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Constructs a new PathProcessorImageStyles object.\n   *\n   * @param \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface $stream_wrapper_manager\n   *   The stream wrapper manager service.\n   *\/",33],["T_WHITESPACE","\n  ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_STRING","StreamWrapperManagerInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$stream_wrapper_manager",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","streamWrapperManager",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$stream_wrapper_manager",40],";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","processInbound",46],"(",["T_VARIABLE","$path",46],",",["T_WHITESPACE"," ",46],["T_STRING","Request",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$request",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$directory_path",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","streamWrapperManager",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","getViaScheme",47],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",47],")",["T_OBJECT_OPERATOR","->",47],["T_STRING","getDirectoryPath",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_STRING","strpos",48],"(",["T_VARIABLE","$path",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'\/'",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_VARIABLE","$directory_path",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'\/styles\/'",48],")",["T_WHITESPACE"," ",48],["T_IS_IDENTICAL","===",48],["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$path_prefix",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'\/'",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_VARIABLE","$directory_path",49],["T_WHITESPACE"," ",49],".",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'\/styles\/'",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n    ",50],["T_ELSEIF","elseif",51],["T_WHITESPACE"," ",51],"(",["T_STRING","strpos",51],"(",["T_VARIABLE","$path",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'\/system\/files\/styles\/'",51],")",["T_WHITESPACE"," ",51],["T_IS_IDENTICAL","===",51],["T_WHITESPACE"," ",51],["T_LNUMBER","0",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$path_prefix",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\/system\/files\/styles\/'",52],";",["T_WHITESPACE","\n    ",52],"}",["T_WHITESPACE","\n    ",53],["T_ELSE","else",54],["T_WHITESPACE"," ",54],"{",["T_WHITESPACE","\n      ",54],["T_RETURN","return",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$path",55],";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n\n    ",56],["T_COMMENT","\/\/ Strip out path prefix.\n",58],["T_WHITESPACE","    ",59],["T_VARIABLE","$rest",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","preg_replace",59],"(",["T_CONSTANT_ENCAPSED_STRING","'|^'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","preg_quote",59],"(",["T_VARIABLE","$path_prefix",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'|'",59],")",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'|'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","''",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$path",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Get the image style, scheme and path.\n",61],["T_WHITESPACE","    ",62],["T_IF","if",62],["T_WHITESPACE"," ",62],"(",["T_STRING","substr_count",62],"(",["T_VARIABLE","$rest",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'\/'",62],")",["T_WHITESPACE"," ",62],["T_IS_GREATER_OR_EQUAL",">=",62],["T_WHITESPACE"," ",62],["T_LNUMBER","2",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_LIST","list",63],"(",["T_VARIABLE","$image_style",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$scheme",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$file",63],")",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_STRING","explode",63],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$rest",63],",",["T_WHITESPACE"," ",63],["T_LNUMBER","3",63],")",";",["T_WHITESPACE","\n\n      ",63],["T_COMMENT","\/\/ Set the file as query parameter.\n",65],["T_WHITESPACE","      ",66],["T_VARIABLE","$request",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","query",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","set",66],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$file",66],")",";",["T_WHITESPACE","\n\n      ",66],["T_RETURN","return",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$path_prefix",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$image_style",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'\/'",68],["T_WHITESPACE"," ",68],".",["T_WHITESPACE"," ",68],["T_VARIABLE","$scheme",68],";",["T_WHITESPACE","\n    ",68],"}",["T_WHITESPACE","\n    ",69],["T_ELSE","else",70],["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$path",71],";",["T_WHITESPACE","\n    ",71],"}",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n",73],"}",["T_WHITESPACE","\n",75]]
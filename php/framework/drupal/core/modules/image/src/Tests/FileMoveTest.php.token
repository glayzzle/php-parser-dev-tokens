[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","file",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","File",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","image",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ImageStyle",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the file move function for images and image styles.\n *\n * @group image\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","FileMoveTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Tests moving a randomly generated image.\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","testNormal",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_COMMENT","\/\/ Pick a file for testing.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$file",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_STRING","File",28],["T_DOUBLE_COLON","::",28],["T_STRING","create",28],"(",["T_ARRAY_CAST","(array)",28],["T_WHITESPACE"," ",28],["T_STRING","current",28],"(",["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalGetTestFiles",28],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",28],")",")",")",";",["T_WHITESPACE","\n\n    ",28],["T_COMMENT","\/\/ Create derivative image.\n",30],["T_WHITESPACE","    ",31],["T_VARIABLE","$styles",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","ImageStyle",31],["T_DOUBLE_COLON","::",31],["T_STRING","loadMultiple",31],"(",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$style",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","reset",32],"(",["T_VARIABLE","$styles",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$original_uri",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_VARIABLE","$file",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","getFileUri",33],"(",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$derivative_uri",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$style",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","buildUri",34],"(",["T_VARIABLE","$original_uri",34],")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$style",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","createDerivative",35],"(",["T_VARIABLE","$original_uri",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$derivative_uri",35],")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Check if derivative image exists.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertTrue",38],"(",["T_STRING","file_exists",38],"(",["T_VARIABLE","$derivative_uri",38],")",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Make sure derivative image is generated successfully.'",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Clone the object so we don't have to worry about the function changing\n",40],["T_WHITESPACE","    ",41],["T_COMMENT","\/\/ our reference copy.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$desired_filepath",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/'",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","randomMachineName",42],"(",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$result",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","file_move",43],"(",["T_CLONE","clone",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$file",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$desired_filepath",43],",",["T_WHITESPACE"," ",43],["T_STRING","FILE_EXISTS_ERROR",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Check if image has been moved.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","assertTrue",46],"(",["T_STRING","file_exists",46],"(",["T_VARIABLE","$result",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getFileUri",46],"(",")",")",",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'Make sure image is moved successfully.'",46],")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Check if derivative image has been flushed.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertFalse",49],"(",["T_STRING","file_exists",49],"(",["T_VARIABLE","$derivative_uri",49],")",",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'Make sure derivative image has been flushed.'",49],")",";",["T_WHITESPACE","\n  ",49],"}",["T_WHITESPACE","\n\n",50],"}",["T_WHITESPACE","\n",52]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Field",5],["T_NS_SEPARATOR","\\",5],["T_STRING","FieldStorageDefinitionInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldStorageConfig",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","RoleInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","image",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ImageStyle",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Tests the display of image fields.\n *\n * @group image\n *\/",10],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","ImageFieldDisplayTest",15],["T_WHITESPACE"," ",15],["T_EXTENDS","extends",15],["T_WHITESPACE"," ",15],["T_STRING","ImageFieldTestBase",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$dumpHeaders",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_STRING","TRUE",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'field_ui'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Test image formatters on node display for public files.\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","testImageFieldFormattersPublic",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","_testImageFieldFormatters",30],"(",["T_CONSTANT_ENCAPSED_STRING","'public'",30],")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Test image formatters on node display for private files.\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testImageFieldFormattersPrivate",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/\/ Remove access content permission from anonymous users.\n",37],["T_WHITESPACE","    ",38],["T_STRING","user_role_change_permissions",38],"(",["T_STRING","RoleInterface",38],["T_DOUBLE_COLON","::",38],["T_STRING","ANONYMOUS_ID",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_STRING","FALSE",38],")",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","_testImageFieldFormatters",39],"(",["T_CONSTANT_ENCAPSED_STRING","'private'",39],")",";",["T_WHITESPACE","\n  ",39],"}",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * Test image formatters on node display.\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","_testImageFieldFormatters",45],"(",["T_VARIABLE","$scheme",45],")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",46],["T_WHITESPACE","\n    ",46],["T_VARIABLE","$renderer",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","container",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","get",47],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$node_storage",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","container",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","get",48],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","getStorage",48],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$field_name",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_STRING","strtolower",49],"(",["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","randomMachineName",49],"(",")",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$field_settings",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'alt_field_required'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$instance",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","createImageField",51],"(",["T_VARIABLE","$field_name",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'article'",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$scheme",51],")",",",["T_WHITESPACE"," ",51],["T_VARIABLE","$field_settings",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Go to manage display page.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalGet",54],"(",["T_CONSTANT_ENCAPSED_STRING","\"admin\/structure\/types\/manage\/article\/display\"",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Test for existence of link to image styles configuration.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalPostAjaxForm",57],"(",["T_STRING","NULL",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",")",",",["T_WHITESPACE"," ",57],"\"",["T_CURLY_OPEN","{",57],["T_VARIABLE","$field_name",57],"}",["T_ENCAPSED_AND_WHITESPACE","_settings_edit",57],"\"",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertLinkByHref",58],"(",["T_NS_SEPARATOR","\\",58],["T_STRING","Drupal",58],["T_DOUBLE_COLON","::",58],["T_STRING","url",58],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.image_style.collection'",58],")",",",["T_WHITESPACE"," ",58],["T_LNUMBER","0",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Link to image styles configuration is found'",58],")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Remove 'administer image styles' permission from testing admin user.\n",60],["T_WHITESPACE","    ",61],["T_VARIABLE","$admin_user_roles",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","adminUser",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getRoles",61],"(",["T_STRING","TRUE",61],")",";",["T_WHITESPACE","\n    ",61],["T_STRING","user_role_change_permissions",62],"(",["T_STRING","reset",62],"(",["T_VARIABLE","$admin_user_roles",62],")",",",["T_WHITESPACE"," ",62],["T_ARRAY","array",62],"(",["T_CONSTANT_ENCAPSED_STRING","'administer image styles'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","FALSE",62],")",")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Go to manage display page again.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalGet",65],"(",["T_CONSTANT_ENCAPSED_STRING","\"admin\/structure\/types\/manage\/article\/display\"",65],")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Test for absence of link to image styles configuration.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","drupalPostAjaxForm",68],"(",["T_STRING","NULL",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",")",",",["T_WHITESPACE"," ",68],"\"",["T_CURLY_OPEN","{",68],["T_VARIABLE","$field_name",68],"}",["T_ENCAPSED_AND_WHITESPACE","_settings_edit",68],"\"",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","assertNoLinkByHref",69],"(",["T_NS_SEPARATOR","\\",69],["T_STRING","Drupal",69],["T_DOUBLE_COLON","::",69],["T_STRING","url",69],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.image_style.collection'",69],")",",",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'Link to image styles configuration is absent when permissions are insufficient'",69],")",";",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ Restore 'administer image styles' permission to testing admin user\n",71],["T_WHITESPACE","    ",72],["T_STRING","user_role_change_permissions",72],"(",["T_STRING","reset",72],"(",["T_VARIABLE","$admin_user_roles",72],")",",",["T_WHITESPACE"," ",72],["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'administer image styles'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","TRUE",72],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Create a new node with an image attached.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$test_image",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_STRING","current",75],"(",["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","drupalGetTestFiles",75],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",75],")",")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Ensure that preview works.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","previewNodeImage",78],"(",["T_VARIABLE","$test_image",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$field_name",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'article'",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ After previewing, make the alt field required. It cannot be required\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ during preview because the form validation will fail.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$instance",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","setSetting",82],"(",["T_CONSTANT_ENCAPSED_STRING","'alt_field_required'",82],",",["T_WHITESPACE"," ",82],["T_LNUMBER","1",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$instance",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","save",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Create alt text for the image.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$alt",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","randomMachineName",86],"(",")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Save node.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$nid",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","uploadNodeImage",89],"(",["T_VARIABLE","$test_image",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$field_name",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'article'",89],",",["T_WHITESPACE"," ",89],["T_VARIABLE","$alt",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$node_storage",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","resetCache",90],"(",["T_ARRAY","array",90],"(",["T_VARIABLE","$nid",90],")",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$node",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$node_storage",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","load",91],"(",["T_VARIABLE","$nid",91],")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Test that the default formatter is being used.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$file",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$node",94],["T_OBJECT_OPERATOR","->",94],"{",["T_VARIABLE","$field_name",94],"}",["T_OBJECT_OPERATOR","->",94],["T_STRING","entity",94],";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$image_uri",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$file",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getFileUri",95],"(",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$image",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n      ",96],["T_CONSTANT_ENCAPSED_STRING","'#theme'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'image'",97],",",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'#uri'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$image_uri",98],",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'#width'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_LNUMBER","40",99],",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'#height'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_LNUMBER","20",100],",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'#alt'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$alt",101],",",["T_WHITESPACE","\n    ",101],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$default_output",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","str_replace",103],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",103],",",["T_WHITESPACE"," ",103],["T_STRING","NULL",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$renderer",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","renderRoot",103],"(",["T_VARIABLE","$image",103],")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertRaw",104],"(",["T_VARIABLE","$default_output",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'Default formatter displaying correctly on full node view.'",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ Test the image linked to file formatter.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$display_options",107],["T_WHITESPACE"," ",107],"=",["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_WHITESPACE","\n      ",107],["T_CONSTANT_ENCAPSED_STRING","'type'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'image'",108],",",["T_WHITESPACE","\n      ",108],["T_CONSTANT_ENCAPSED_STRING","'settings'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_ARRAY","array",109],"(",["T_CONSTANT_ENCAPSED_STRING","'image_link'",109],["T_WHITESPACE"," ",109],["T_DOUBLE_ARROW","=>",109],["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'file'",109],")",",",["T_WHITESPACE","\n    ",109],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$display",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","entity_get_display",111],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$node",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getType",111],"(",")",",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'default'",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$display",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","setComponent",112],"(",["T_VARIABLE","$field_name",112],",",["T_WHITESPACE"," ",112],["T_VARIABLE","$display_options",112],")",["T_WHITESPACE","\n      ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","save",113],"(",")",";",["T_WHITESPACE","\n\n    ",113],["T_VARIABLE","$image",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_WHITESPACE","\n      ",115],["T_CONSTANT_ENCAPSED_STRING","'#theme'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'image'",116],",",["T_WHITESPACE","\n      ",116],["T_CONSTANT_ENCAPSED_STRING","'#uri'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$image_uri",117],",",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'#width'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","40",118],",",["T_WHITESPACE","\n      ",118],["T_CONSTANT_ENCAPSED_STRING","'#height'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_LNUMBER","20",119],",",["T_WHITESPACE","\n      ",119],["T_CONSTANT_ENCAPSED_STRING","'#alt'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$alt",120],",",["T_WHITESPACE","\n    ",120],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$default_output",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'<a href=\"'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_STRING","file_create_url",122],"(",["T_VARIABLE","$image_uri",122],")",["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'\">'",122],["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_VARIABLE","$renderer",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","renderRoot",122],"(",["T_VARIABLE","$image",122],")",["T_WHITESPACE"," ",122],".",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'<\/a>'",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","drupalGet",123],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",123],["T_WHITESPACE"," ",123],".",["T_WHITESPACE"," ",123],["T_VARIABLE","$nid",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertCacheTag",124],"(",["T_VARIABLE","$file",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getCacheTags",124],"(",")","[",["T_LNUMBER","0",124],"]",")",";",["T_WHITESPACE","\n    ",124],["T_COMMENT","\/\/ @todo Remove in https:\/\/www.drupal.org\/node\/2646744.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertCacheContext",126],"(",["T_CONSTANT_ENCAPSED_STRING","'url.site'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$cache_tags_header",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalGetHeader",127],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertTrue",128],"(","!",["T_STRING","preg_match",128],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$cache_tags_header",128],")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertRaw",129],"(",["T_VARIABLE","$default_output",129],",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Image linked to file formatter displaying correctly on full node view.'",129],")",";",["T_WHITESPACE","\n    ",129],["T_COMMENT","\/\/ Verify that the image can be downloaded.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEqual",131],"(",["T_STRING","file_get_contents",131],"(",["T_VARIABLE","$test_image",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","uri",131],")",",",["T_WHITESPACE"," ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","drupalGet",131],"(",["T_STRING","file_create_url",131],"(",["T_VARIABLE","$image_uri",131],")",")",",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'File was downloaded successfully.'",131],")",";",["T_WHITESPACE","\n    ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$scheme",132],["T_WHITESPACE"," ",132],["T_IS_EQUAL","==",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'private'",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n      ",132],["T_COMMENT","\/\/ Only verify HTTP headers when using private scheme and the headers are\n",133],["T_WHITESPACE","      ",134],["T_COMMENT","\/\/ sent by Drupal.\n",134],["T_WHITESPACE","      ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEqual",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","drupalGetHeader",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",135],")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Content-Type header was sent.'",135],")",";",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertTrue",136],"(",["T_STRING","strstr",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","drupalGetHeader",136],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",136],")",",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'private'",136],")",["T_WHITESPACE"," ",136],["T_IS_NOT_IDENTICAL","!==",136],["T_WHITESPACE"," ",136],["T_STRING","FALSE",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'Cache-Control header was sent.'",136],")",";",["T_WHITESPACE","\n\n      ",136],["T_COMMENT","\/\/ Log out and try to access the file.\n",138],["T_WHITESPACE","      ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","drupalLogout",139],"(",")",";",["T_WHITESPACE","\n      ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","drupalGet",140],"(",["T_STRING","file_create_url",140],"(",["T_VARIABLE","$image_uri",140],")",")",";",["T_WHITESPACE","\n      ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertResponse",141],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'Access denied to original image as anonymous user.'",141],")",";",["T_WHITESPACE","\n\n      ",141],["T_COMMENT","\/\/ Log in again.\n",143],["T_WHITESPACE","      ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","drupalLogin",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","adminUser",144],")",";",["T_WHITESPACE","\n    ",144],"}",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Test the image linked to content formatter.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$display_options",148],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",148],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_link'",148],"]",["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'content'",148],";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$display",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","setComponent",149],"(",["T_VARIABLE","$field_name",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$display_options",149],")",["T_WHITESPACE","\n      ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","save",150],"(",")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$image",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'#theme'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'image'",152],",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'#uri'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_VARIABLE","$image_uri",153],",",["T_WHITESPACE","\n      ",153],["T_CONSTANT_ENCAPSED_STRING","'#width'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_LNUMBER","40",154],",",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'#height'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_LNUMBER","20",155],",",["T_WHITESPACE","\n    ",155],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","drupalGet",157],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",157],["T_WHITESPACE"," ",157],".",["T_WHITESPACE"," ",157],["T_VARIABLE","$nid",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertCacheTag",158],"(",["T_VARIABLE","$file",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getCacheTags",158],"(",")","[",["T_LNUMBER","0",158],"]",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$cache_tags_header",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","drupalGetHeader",159],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertTrue",160],"(","!",["T_STRING","preg_match",160],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",160],",",["T_WHITESPACE"," ",160],["T_VARIABLE","$cache_tags_header",160],")",",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$elements",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","xpath",161],"(",["T_WHITESPACE","\n      ",161],["T_CONSTANT_ENCAPSED_STRING","'\/\/a[@href=:path]\/img[@src=:url and @alt=:alt and @width=:width and @height=:height]'",162],",",["T_WHITESPACE","\n      ",162],["T_ARRAY","array",163],"(",["T_WHITESPACE","\n        ",163],["T_CONSTANT_ENCAPSED_STRING","':path'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$node",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","url",164],"(",")",",",["T_WHITESPACE","\n        ",164],["T_CONSTANT_ENCAPSED_STRING","':url'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_STRING","file_url_transform_relative",165],"(",["T_STRING","file_create_url",165],"(",["T_VARIABLE","$image",165],"[",["T_CONSTANT_ENCAPSED_STRING","'#uri'",165],"]",")",")",",",["T_WHITESPACE","\n        ",165],["T_CONSTANT_ENCAPSED_STRING","':width'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$image",166],"[",["T_CONSTANT_ENCAPSED_STRING","'#width'",166],"]",",",["T_WHITESPACE","\n        ",166],["T_CONSTANT_ENCAPSED_STRING","':height'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_VARIABLE","$image",167],"[",["T_CONSTANT_ENCAPSED_STRING","'#height'",167],"]",",",["T_WHITESPACE","\n        ",167],["T_CONSTANT_ENCAPSED_STRING","':alt'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_VARIABLE","$alt",168],",",["T_WHITESPACE","\n      ",168],")",["T_WHITESPACE","\n    ",169],")",";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertEqual",171],"(",["T_STRING","count",171],"(",["T_VARIABLE","$elements",171],")",",",["T_WHITESPACE"," ",171],["T_LNUMBER","1",171],",",["T_WHITESPACE"," ",171],["T_CONSTANT_ENCAPSED_STRING","'Image linked to content formatter displaying correctly on full node view.'",171],")",";",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ Test the image style 'thumbnail' formatter.\n",173],["T_WHITESPACE","    ",174],["T_VARIABLE","$display_options",174],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",174],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_link'",174],"]",["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","''",174],";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$display_options",175],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",175],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_style'",175],"]",["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",175],";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$display",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","setComponent",176],"(",["T_VARIABLE","$field_name",176],",",["T_WHITESPACE"," ",176],["T_VARIABLE","$display_options",176],")",["T_WHITESPACE","\n      ",176],["T_OBJECT_OPERATOR","->",177],["T_STRING","save",177],"(",")",";",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Ensure the derivative image is generated so we do not have to deal with\n",179],["T_WHITESPACE","    ",180],["T_COMMENT","\/\/ image style callback paths.\n",180],["T_WHITESPACE","    ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","drupalGet",181],"(",["T_STRING","ImageStyle",181],["T_DOUBLE_COLON","::",181],["T_STRING","load",181],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",181],")",["T_OBJECT_OPERATOR","->",181],["T_STRING","buildUrl",181],"(",["T_VARIABLE","$image_uri",181],")",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$image_style",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'#theme'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'image_style'",183],",",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'#uri'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$image_uri",184],",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'#width'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","40",185],",",["T_WHITESPACE","\n      ",185],["T_CONSTANT_ENCAPSED_STRING","'#height'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],["T_LNUMBER","20",186],",",["T_WHITESPACE","\n      ",186],["T_CONSTANT_ENCAPSED_STRING","'#style_name'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",187],",",["T_WHITESPACE","\n      ",187],["T_CONSTANT_ENCAPSED_STRING","'#alt'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$alt",188],",",["T_WHITESPACE","\n    ",188],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$default_output",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$renderer",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","renderRoot",190],"(",["T_VARIABLE","$image_style",190],")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalGet",191],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",191],["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_VARIABLE","$nid",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$image_style",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","ImageStyle",192],["T_DOUBLE_COLON","::",192],["T_STRING","load",192],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertCacheTag",193],"(",["T_VARIABLE","$image_style",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","getCacheTags",193],"(",")","[",["T_LNUMBER","0",193],"]",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertRaw",194],"(",["T_VARIABLE","$default_output",194],",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'Image style thumbnail formatter displaying correctly on full node view.'",194],")",";",["T_WHITESPACE","\n\n    ",194],["T_IF","if",196],["T_WHITESPACE"," ",196],"(",["T_VARIABLE","$scheme",196],["T_WHITESPACE"," ",196],["T_IS_EQUAL","==",196],["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'private'",196],")",["T_WHITESPACE"," ",196],"{",["T_WHITESPACE","\n      ",196],["T_COMMENT","\/\/ Log out and try to access the file.\n",197],["T_WHITESPACE","      ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","drupalLogout",198],"(",")",";",["T_WHITESPACE","\n      ",198],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","drupalGet",199],"(",["T_STRING","ImageStyle",199],["T_DOUBLE_COLON","::",199],["T_STRING","load",199],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",199],")",["T_OBJECT_OPERATOR","->",199],["T_STRING","buildUrl",199],"(",["T_VARIABLE","$image_uri",199],")",")",";",["T_WHITESPACE","\n      ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","assertResponse",200],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'Access denied to image style thumbnail as anonymous user.'",200],")",";",["T_WHITESPACE","\n    ",200],"}",["T_WHITESPACE","\n  ",201],"}",["T_WHITESPACE","\n\n  ",202],["T_DOC_COMMENT","\/**\n   * Tests for image field settings.\n   *\/",204],["T_WHITESPACE","\n  ",206],["T_FUNCTION","function",207],["T_WHITESPACE"," ",207],["T_STRING","testImageFieldSettings",207],"(",")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n    ",207],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",208],["T_WHITESPACE","\n    ",208],["T_VARIABLE","$renderer",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","container",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","get",209],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",209],")",";",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$node_storage",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","container",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","get",210],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",210],")",["T_OBJECT_OPERATOR","->",210],["T_STRING","getStorage",210],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$test_image",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","current",211],"(",["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","drupalGetTestFiles",211],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",211],")",")",";",["T_WHITESPACE","\n    ",211],["T_LIST","list",212],"(",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$test_image_extension",212],")",["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","explode",212],"(",["T_CONSTANT_ENCAPSED_STRING","'.'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$test_image",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","filename",212],")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$field_name",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_STRING","strtolower",213],"(",["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","randomMachineName",213],"(",")",")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$field_settings",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_ARRAY","array",214],"(",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'alt_field'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_LNUMBER","1",215],",",["T_WHITESPACE","\n      ",215],["T_CONSTANT_ENCAPSED_STRING","'file_extensions'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_VARIABLE","$test_image_extension",216],",",["T_WHITESPACE","\n      ",216],["T_CONSTANT_ENCAPSED_STRING","'max_filesize'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","'50 KB'",217],",",["T_WHITESPACE","\n      ",217],["T_CONSTANT_ENCAPSED_STRING","'max_resolution'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'100x100'",218],",",["T_WHITESPACE","\n      ",218],["T_CONSTANT_ENCAPSED_STRING","'min_resolution'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'10x10'",219],",",["T_WHITESPACE","\n      ",219],["T_CONSTANT_ENCAPSED_STRING","'title_field'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_LNUMBER","1",220],",",["T_WHITESPACE","\n    ",220],")",";",["T_WHITESPACE","\n    ",221],["T_VARIABLE","$widget_settings",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_WHITESPACE","\n      ",222],["T_CONSTANT_ENCAPSED_STRING","'preview_image_style'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'medium'",223],",",["T_WHITESPACE","\n    ",223],")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$field",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","createImageField",225],"(",["T_VARIABLE","$field_name",225],",",["T_WHITESPACE"," ",225],["T_CONSTANT_ENCAPSED_STRING","'article'",225],",",["T_WHITESPACE"," ",225],["T_ARRAY","array",225],"(",")",",",["T_WHITESPACE"," ",225],["T_VARIABLE","$field_settings",225],",",["T_WHITESPACE"," ",225],["T_VARIABLE","$widget_settings",225],")",";",["T_WHITESPACE","\n\n    ",225],["T_COMMENT","\/\/ Verify that the min\/max resolution set on the field are properly\n",227],["T_WHITESPACE","    ",228],["T_COMMENT","\/\/ extracted, and displayed, on the image field's configuration form.\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","drupalGet",229],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/article\/fields\/'",229],["T_WHITESPACE"," ",229],".",["T_WHITESPACE"," ",229],["T_VARIABLE","$field",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","id",229],"(",")",")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","assertFieldByName",230],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[max_resolution][x]'",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'100'",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'Expected max resolution X value of 100.'",230],")",";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","assertFieldByName",231],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[max_resolution][y]'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'100'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'Expected max resolution Y value of 100.'",231],")",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertFieldByName",232],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[min_resolution][x]'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'10'",232],",",["T_WHITESPACE"," ",232],["T_CONSTANT_ENCAPSED_STRING","'Expected min resolution X value of 10.'",232],")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","assertFieldByName",233],"(",["T_CONSTANT_ENCAPSED_STRING","'settings[min_resolution][y]'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'10'",233],",",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'Expected min resolution Y value of 10.'",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","drupalGet",235],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/article'",235],")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","assertText",236],"(",["T_STRING","t",236],"(",["T_CONSTANT_ENCAPSED_STRING","'50 KB limit.'",236],")",",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'Image widget max file size is displayed on article form.'",236],")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertText",237],"(",["T_STRING","t",237],"(",["T_CONSTANT_ENCAPSED_STRING","'Allowed types: @extensions.'",237],",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",["T_CONSTANT_ENCAPSED_STRING","'@extensions'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$test_image_extension",237],")",")",",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'Image widget allowed file types displayed on article form.'",237],")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertText",238],"(",["T_STRING","t",238],"(",["T_CONSTANT_ENCAPSED_STRING","'Images must be larger than 10x10 pixels. Images larger than 100x100 pixels will be resized.'",238],")",",",["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'Image widget allowed resolution displayed on article form.'",238],")",";",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ We have to create the article first and then edit it because the alt\n",240],["T_WHITESPACE","    ",241],["T_COMMENT","\/\/ and title fields do not display until the image has been attached.\n",241],["T_WHITESPACE","\n    ",242],["T_COMMENT","\/\/ Create alt text for the image.\n",243],["T_WHITESPACE","    ",244],["T_VARIABLE","$alt",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","randomMachineName",244],"(",")",";",["T_WHITESPACE","\n\n    ",244],["T_VARIABLE","$nid",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","uploadNodeImage",246],"(",["T_VARIABLE","$test_image",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$field_name",246],",",["T_WHITESPACE"," ",246],["T_CONSTANT_ENCAPSED_STRING","'article'",246],",",["T_WHITESPACE"," ",246],["T_VARIABLE","$alt",246],")",";",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$this",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","drupalGet",247],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_VARIABLE","$nid",247],["T_WHITESPACE"," ",247],".",["T_WHITESPACE"," ",247],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",247],")",";",["T_WHITESPACE","\n    ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertFieldByName",248],"(",["T_VARIABLE","$field_name",248],["T_WHITESPACE"," ",248],".",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'[0][alt]'",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","''",248],",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'Alt field displayed on article form.'",248],")",";",["T_WHITESPACE","\n    ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertFieldByName",249],"(",["T_VARIABLE","$field_name",249],["T_WHITESPACE"," ",249],".",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'[0][title]'",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","''",249],",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'Title field displayed on article form.'",249],")",";",["T_WHITESPACE","\n    ",249],["T_COMMENT","\/\/ Verify that the attached image is being previewed using the 'medium'\n",250],["T_WHITESPACE","    ",251],["T_COMMENT","\/\/ style.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$node_storage",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","resetCache",252],"(",["T_ARRAY","array",252],"(",["T_VARIABLE","$nid",252],")",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$node",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_VARIABLE","$node_storage",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","load",253],"(",["T_VARIABLE","$nid",253],")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$file",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$node",254],["T_OBJECT_OPERATOR","->",254],"{",["T_VARIABLE","$field_name",254],"}",["T_OBJECT_OPERATOR","->",254],["T_STRING","entity",254],";",["T_WHITESPACE","\n\n    ",254],["T_VARIABLE","$url",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_STRING","file_url_transform_relative",256],"(",["T_STRING","file_create_url",256],"(",["T_STRING","ImageStyle",256],["T_DOUBLE_COLON","::",256],["T_STRING","load",256],"(",["T_CONSTANT_ENCAPSED_STRING","'medium'",256],")",["T_OBJECT_OPERATOR","->",256],["T_STRING","buildUrl",256],"(",["T_VARIABLE","$file",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","getFileUri",256],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertTrue",257],"(",["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","cssSelect",257],"(",["T_CONSTANT_ENCAPSED_STRING","'img[width=40][height=20][class=image-style-medium][src=\"'",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_VARIABLE","$url",257],["T_WHITESPACE"," ",257],".",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'\"]'",257],")",")",";",["T_WHITESPACE","\n\n    ",257],["T_COMMENT","\/\/ Add alt\/title fields to the image and verify that they are displayed.\n",259],["T_WHITESPACE","    ",260],["T_VARIABLE","$image",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",["T_WHITESPACE","\n      ",260],["T_CONSTANT_ENCAPSED_STRING","'#theme'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'image'",261],",",["T_WHITESPACE","\n      ",261],["T_CONSTANT_ENCAPSED_STRING","'#uri'",262],["T_WHITESPACE"," ",262],["T_DOUBLE_ARROW","=>",262],["T_WHITESPACE"," ",262],["T_VARIABLE","$file",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","getFileUri",262],"(",")",",",["T_WHITESPACE","\n      ",262],["T_CONSTANT_ENCAPSED_STRING","'#alt'",263],["T_WHITESPACE"," ",263],["T_DOUBLE_ARROW","=>",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$alt",263],",",["T_WHITESPACE","\n      ",263],["T_CONSTANT_ENCAPSED_STRING","'#title'",264],["T_WHITESPACE"," ",264],["T_DOUBLE_ARROW","=>",264],["T_WHITESPACE"," ",264],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","randomMachineName",264],"(",")",",",["T_WHITESPACE","\n      ",264],["T_CONSTANT_ENCAPSED_STRING","'#width'",265],["T_WHITESPACE"," ",265],["T_DOUBLE_ARROW","=>",265],["T_WHITESPACE"," ",265],["T_LNUMBER","40",265],",",["T_WHITESPACE","\n      ",265],["T_CONSTANT_ENCAPSED_STRING","'#height'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_LNUMBER","20",266],",",["T_WHITESPACE","\n    ",266],")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$edit",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",["T_WHITESPACE","\n      ",268],["T_VARIABLE","$field_name",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","'[0][alt]'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$image",269],"[",["T_CONSTANT_ENCAPSED_STRING","'#alt'",269],"]",",",["T_WHITESPACE","\n      ",269],["T_VARIABLE","$field_name",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'[0][title]'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$image",270],"[",["T_CONSTANT_ENCAPSED_STRING","'#title'",270],"]",",",["T_WHITESPACE","\n    ",270],")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","drupalPostForm",272],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_VARIABLE","$nid",272],["T_WHITESPACE"," ",272],".",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",272],",",["T_WHITESPACE"," ",272],["T_VARIABLE","$edit",272],",",["T_WHITESPACE"," ",272],["T_STRING","t",272],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",272],")",")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$default_output",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_STRING","str_replace",273],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",273],",",["T_WHITESPACE"," ",273],["T_STRING","NULL",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$renderer",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","renderRoot",273],"(",["T_VARIABLE","$image",273],")",")",";",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","assertRaw",274],"(",["T_VARIABLE","$default_output",274],",",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'Image displayed using user supplied alt and title attributes.'",274],")",";",["T_WHITESPACE","\n\n    ",274],["T_COMMENT","\/\/ Verify that alt\/title longer than allowed results in a validation error.\n",276],["T_WHITESPACE","    ",277],["T_VARIABLE","$test_size",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_LNUMBER","2000",277],";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$edit",278],["T_WHITESPACE"," ",278],"=",["T_WHITESPACE"," ",278],["T_ARRAY","array",278],"(",["T_WHITESPACE","\n      ",278],["T_VARIABLE","$field_name",279],["T_WHITESPACE"," ",279],".",["T_WHITESPACE"," ",279],["T_CONSTANT_ENCAPSED_STRING","'[0][alt]'",279],["T_WHITESPACE"," ",279],["T_DOUBLE_ARROW","=>",279],["T_WHITESPACE"," ",279],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","randomMachineName",279],"(",["T_VARIABLE","$test_size",279],")",",",["T_WHITESPACE","\n      ",279],["T_VARIABLE","$field_name",280],["T_WHITESPACE"," ",280],".",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'[0][title]'",280],["T_WHITESPACE"," ",280],["T_DOUBLE_ARROW","=>",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","randomMachineName",280],"(",["T_VARIABLE","$test_size",280],")",",",["T_WHITESPACE","\n    ",280],")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","drupalPostForm",282],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_VARIABLE","$nid",282],["T_WHITESPACE"," ",282],".",["T_WHITESPACE"," ",282],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$edit",282],",",["T_WHITESPACE"," ",282],["T_STRING","t",282],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",282],")",")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$schema",283],["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_VARIABLE","$field",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","getFieldStorageDefinition",283],"(",")",["T_OBJECT_OPERATOR","->",283],["T_STRING","getSchema",283],"(",")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertRaw",284],"(",["T_STRING","t",284],"(",["T_CONSTANT_ENCAPSED_STRING","'Alternative text cannot be longer than %max characters but is currently %length characters long.'",284],",",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",["T_WHITESPACE","\n      ",284],["T_CONSTANT_ENCAPSED_STRING","'%max'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$schema",285],"[",["T_CONSTANT_ENCAPSED_STRING","'columns'",285],"]","[",["T_CONSTANT_ENCAPSED_STRING","'alt'",285],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",285],"]",",",["T_WHITESPACE","\n      ",285],["T_CONSTANT_ENCAPSED_STRING","'%length'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$test_size",286],",",["T_WHITESPACE","\n    ",286],")",")",")",";",["T_WHITESPACE","\n    ",287],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assertRaw",288],"(",["T_STRING","t",288],"(",["T_CONSTANT_ENCAPSED_STRING","'Title cannot be longer than %max characters but is currently %length characters long.'",288],",",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",["T_WHITESPACE","\n      ",288],["T_CONSTANT_ENCAPSED_STRING","'%max'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$schema",289],"[",["T_CONSTANT_ENCAPSED_STRING","'columns'",289],"]","[",["T_CONSTANT_ENCAPSED_STRING","'title'",289],"]","[",["T_CONSTANT_ENCAPSED_STRING","'length'",289],"]",",",["T_WHITESPACE","\n      ",289],["T_CONSTANT_ENCAPSED_STRING","'%length'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$test_size",290],",",["T_WHITESPACE","\n    ",290],")",")",")",";",["T_WHITESPACE","\n\n    ",291],["T_COMMENT","\/\/ Set cardinality to unlimited and add upload a second image.\n",293],["T_WHITESPACE","    ",294],["T_COMMENT","\/\/ The image widget is extending on the file widget, but the image field\n",294],["T_WHITESPACE","    ",295],["T_COMMENT","\/\/ type does not have the 'display_field' setting which is expected by\n",295],["T_WHITESPACE","    ",296],["T_COMMENT","\/\/ the file widget. This resulted in notices before when cardinality is not\n",296],["T_WHITESPACE","    ",297],["T_COMMENT","\/\/ 1, so we need to make sure the file widget prevents these notices by\n",297],["T_WHITESPACE","    ",298],["T_COMMENT","\/\/ providing all settings, even if they are not used.\n",298],["T_WHITESPACE","    ",299],["T_COMMENT","\/\/ @see FileWidget::formMultipleElements().\n",299],["T_WHITESPACE","    ",300],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","drupalPostForm",300],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/article\/fields\/node.article.'",300],["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_VARIABLE","$field_name",300],["T_WHITESPACE"," ",300],".",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'\/storage'",300],",",["T_WHITESPACE"," ",300],["T_ARRAY","array",300],"(",["T_CONSTANT_ENCAPSED_STRING","'cardinality'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_STRING","FieldStorageDefinitionInterface",300],["T_DOUBLE_COLON","::",300],["T_STRING","CARDINALITY_UNLIMITED",300],")",",",["T_WHITESPACE"," ",300],["T_STRING","t",300],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",300],")",")",";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$edit",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",["T_WHITESPACE","\n      ",301],["T_CONSTANT_ENCAPSED_STRING","'files['",302],["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_VARIABLE","$field_name",302],["T_WHITESPACE"," ",302],".",["T_WHITESPACE"," ",302],["T_CONSTANT_ENCAPSED_STRING","'_1][]'",302],["T_WHITESPACE"," ",302],["T_DOUBLE_ARROW","=>",302],["T_WHITESPACE"," ",302],["T_STRING","drupal_realpath",302],"(",["T_VARIABLE","$test_image",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","uri",302],")",",",["T_WHITESPACE","\n    ",302],")",";",["T_WHITESPACE","\n    ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","drupalPostForm",304],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",304],["T_WHITESPACE"," ",304],".",["T_WHITESPACE"," ",304],["T_VARIABLE","$node",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","id",304],"(",")",["T_WHITESPACE"," ",304],".",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$edit",304],",",["T_WHITESPACE"," ",304],["T_STRING","t",304],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",304],")",")",";",["T_WHITESPACE","\n    ",304],["T_COMMENT","\/\/ Add the required alt text.\n",305],["T_WHITESPACE","    ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","drupalPostForm",306],"(",["T_STRING","NULL",306],",",["T_WHITESPACE"," ",306],"[",["T_VARIABLE","$field_name",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'[1][alt]'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$alt",306],"]",",",["T_WHITESPACE"," ",306],["T_STRING","t",306],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and keep published'",306],")",")",";",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertText",307],"(",["T_STRING","format_string",307],"(",["T_CONSTANT_ENCAPSED_STRING","'Article @title has been updated.'",307],",",["T_WHITESPACE"," ",307],["T_ARRAY","array",307],"(",["T_CONSTANT_ENCAPSED_STRING","'@title'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$node",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getTitle",307],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",307],["T_COMMENT","\/\/ Assert ImageWidget::process() calls FieldWidget::process().\n",309],["T_WHITESPACE","    ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","drupalGet",310],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",310],["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_VARIABLE","$node",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","id",310],"(",")",["T_WHITESPACE"," ",310],".",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",310],")",";",["T_WHITESPACE","\n    ",310],["T_VARIABLE","$edit",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_ARRAY","array",311],"(",["T_WHITESPACE","\n      ",311],["T_CONSTANT_ENCAPSED_STRING","'files['",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_VARIABLE","$field_name",312],["T_WHITESPACE"," ",312],".",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'_2][]'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_STRING","drupal_realpath",312],"(",["T_VARIABLE","$test_image",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","uri",312],")",",",["T_WHITESPACE","\n    ",312],")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","drupalPostAjaxForm",314],"(",["T_STRING","NULL",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$edit",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$field_name",314],["T_WHITESPACE"," ",314],".",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'_2_upload_button'",314],")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","assertNoRaw",315],"(",["T_CONSTANT_ENCAPSED_STRING","'<input multiple type=\"file\" id=\"edit-'",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_STRING","strtr",315],"(",["T_VARIABLE","$field_name",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'_'",315],",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'-'",315],")",["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'-2-upload\" name=\"files['",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_VARIABLE","$field_name",315],["T_WHITESPACE"," ",315],".",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'_2][]\" size=\"22\" class=\"js-form-file form-file\">'",315],")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","assertRaw",316],"(",["T_CONSTANT_ENCAPSED_STRING","'<input multiple type=\"file\" id=\"edit-'",316],["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_STRING","strtr",316],"(",["T_VARIABLE","$field_name",316],",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'_'",316],",",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'-'",316],")",["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'-3-upload\" name=\"files['",316],["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_VARIABLE","$field_name",316],["T_WHITESPACE"," ",316],".",["T_WHITESPACE"," ",316],["T_CONSTANT_ENCAPSED_STRING","'_3][]\" size=\"22\" class=\"js-form-file form-file\">'",316],")",";",["T_WHITESPACE","\n  ",316],"}",["T_WHITESPACE","\n\n  ",317],["T_DOC_COMMENT","\/**\n   * Test use of a default image with an image field.\n   *\/",319],["T_WHITESPACE","\n  ",321],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","testImageFieldDefaultImage",322],"(",")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n    ",322],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Render\\RendererInterface $renderer *\/",323],["T_WHITESPACE","\n    ",323],["T_VARIABLE","$renderer",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","container",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","get",324],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",324],")",";",["T_WHITESPACE","\n\n    ",324],["T_VARIABLE","$node_storage",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","container",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","get",326],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",326],")",["T_OBJECT_OPERATOR","->",326],["T_STRING","getStorage",326],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",326],")",";",["T_WHITESPACE","\n    ",326],["T_COMMENT","\/\/ Create a new image field.\n",327],["T_WHITESPACE","    ",328],["T_VARIABLE","$field_name",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_STRING","strtolower",328],"(",["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","randomMachineName",328],"(",")",")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","createImageField",329],"(",["T_VARIABLE","$field_name",329],",",["T_WHITESPACE"," ",329],["T_CONSTANT_ENCAPSED_STRING","'article'",329],")",";",["T_WHITESPACE","\n\n    ",329],["T_COMMENT","\/\/ Create a new node, with no images and verify that no images are\n",331],["T_WHITESPACE","    ",332],["T_COMMENT","\/\/ displayed.\n",332],["T_WHITESPACE","    ",333],["T_VARIABLE","$node",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_VARIABLE","$this",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","drupalCreateNode",333],"(",["T_ARRAY","array",333],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_CONSTANT_ENCAPSED_STRING","'article'",333],")",")",";",["T_WHITESPACE","\n    ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","drupalGet",334],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",334],["T_WHITESPACE"," ",334],".",["T_WHITESPACE"," ",334],["T_VARIABLE","$node",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","id",334],"(",")",")",";",["T_WHITESPACE","\n    ",334],["T_COMMENT","\/\/ Verify that no image is displayed on the page by checking for the class\n",335],["T_WHITESPACE","    ",336],["T_COMMENT","\/\/ that would be used on the image field.\n",336],["T_WHITESPACE","    ",337],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","assertNoPattern",337],"(",["T_CONSTANT_ENCAPSED_STRING","'<div class=\"(.*?)field--name-'",337],["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_STRING","strtr",337],"(",["T_VARIABLE","$field_name",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'_'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'-'",337],")",["T_WHITESPACE"," ",337],".",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'(.*?)\">'",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'No image displayed when no image is attached and no default image specified.'",337],")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$cache_tags_header",338],["T_WHITESPACE"," ",338],"=",["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","drupalGetHeader",338],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",338],")",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","assertTrue",339],"(","!",["T_STRING","preg_match",339],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",339],",",["T_WHITESPACE"," ",339],["T_VARIABLE","$cache_tags_header",339],")",",",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",339],")",";",["T_WHITESPACE","\n\n    ",339],["T_COMMENT","\/\/ Add a default image to the public image field.\n",341],["T_WHITESPACE","    ",342],["T_VARIABLE","$images",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","drupalGetTestFiles",342],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",342],")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$alt",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","randomString",343],"(",["T_LNUMBER","512",343],")",";",["T_WHITESPACE","\n    ",343],["T_VARIABLE","$title",344],["T_WHITESPACE"," ",344],"=",["T_WHITESPACE"," ",344],["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","randomString",344],"(",["T_LNUMBER","1024",344],")",";",["T_WHITESPACE","\n    ",344],["T_VARIABLE","$edit",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_WHITESPACE","\n      ",345],["T_COMMENT","\/\/ Get the path of the 'image-test.png' file.\n",346],["T_WHITESPACE","      ",347],["T_CONSTANT_ENCAPSED_STRING","'files[settings_default_image_uuid]'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_STRING","drupal_realpath",347],"(",["T_VARIABLE","$images",347],"[",["T_LNUMBER","0",347],"]",["T_OBJECT_OPERATOR","->",347],["T_STRING","uri",347],")",",",["T_WHITESPACE","\n      ",347],["T_CONSTANT_ENCAPSED_STRING","'settings[default_image][alt]'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$alt",348],",",["T_WHITESPACE","\n      ",348],["T_CONSTANT_ENCAPSED_STRING","'settings[default_image][title]'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_VARIABLE","$title",349],",",["T_WHITESPACE","\n    ",349],")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","drupalPostForm",351],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/article\/fields\/node.article.",351],["T_VARIABLE","$field_name",351],["T_ENCAPSED_AND_WHITESPACE","\/storage",351],"\"",",",["T_WHITESPACE"," ",351],["T_VARIABLE","$edit",351],",",["T_WHITESPACE"," ",351],["T_STRING","t",351],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",351],")",")",";",["T_WHITESPACE","\n    ",351],["T_COMMENT","\/\/ Clear field definition cache so the new default image is detected.\n",352],["T_WHITESPACE","    ",353],["T_NS_SEPARATOR","\\",353],["T_STRING","Drupal",353],["T_DOUBLE_COLON","::",353],["T_STRING","entityManager",353],"(",")",["T_OBJECT_OPERATOR","->",353],["T_STRING","clearCachedFieldDefinitions",353],"(",")",";",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$field_storage",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","FieldStorageConfig",354],["T_DOUBLE_COLON","::",354],["T_STRING","loadByName",354],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",354],",",["T_WHITESPACE"," ",354],["T_VARIABLE","$field_name",354],")",";",["T_WHITESPACE","\n    ",354],["T_VARIABLE","$default_image",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$field_storage",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getSetting",355],"(",["T_CONSTANT_ENCAPSED_STRING","'default_image'",355],")",";",["T_WHITESPACE","\n    ",355],["T_VARIABLE","$file",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_NS_SEPARATOR","\\",356],["T_STRING","Drupal",356],["T_DOUBLE_COLON","::",356],["T_STRING","entityManager",356],"(",")",["T_OBJECT_OPERATOR","->",356],["T_STRING","loadEntityByUuid",356],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$default_image",356],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",356],"]",")",";",["T_WHITESPACE","\n    ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","assertTrue",357],"(",["T_VARIABLE","$file",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","isPermanent",357],"(",")",",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'The default image status is permanent.'",357],")",";",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$image",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_ARRAY","array",358],"(",["T_WHITESPACE","\n      ",358],["T_CONSTANT_ENCAPSED_STRING","'#theme'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'image'",359],",",["T_WHITESPACE","\n      ",359],["T_CONSTANT_ENCAPSED_STRING","'#uri'",360],["T_WHITESPACE"," ",360],["T_DOUBLE_ARROW","=>",360],["T_WHITESPACE"," ",360],["T_VARIABLE","$file",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","getFileUri",360],"(",")",",",["T_WHITESPACE","\n      ",360],["T_CONSTANT_ENCAPSED_STRING","'#alt'",361],["T_WHITESPACE"," ",361],["T_DOUBLE_ARROW","=>",361],["T_WHITESPACE"," ",361],["T_VARIABLE","$alt",361],",",["T_WHITESPACE","\n      ",361],["T_CONSTANT_ENCAPSED_STRING","'#title'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$title",362],",",["T_WHITESPACE","\n      ",362],["T_CONSTANT_ENCAPSED_STRING","'#width'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_LNUMBER","40",363],",",["T_WHITESPACE","\n      ",363],["T_CONSTANT_ENCAPSED_STRING","'#height'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_LNUMBER","20",364],",",["T_WHITESPACE","\n    ",364],")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$default_output",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_STRING","str_replace",366],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",366],",",["T_WHITESPACE"," ",366],["T_STRING","NULL",366],",",["T_WHITESPACE"," ",366],["T_VARIABLE","$renderer",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","renderRoot",366],"(",["T_VARIABLE","$image",366],")",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","drupalGet",367],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",367],["T_WHITESPACE"," ",367],".",["T_WHITESPACE"," ",367],["T_VARIABLE","$node",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","id",367],"(",")",")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertCacheTag",368],"(",["T_VARIABLE","$file",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getCacheTags",368],"(",")","[",["T_LNUMBER","0",368],"]",")",";",["T_WHITESPACE","\n    ",368],["T_VARIABLE","$cache_tags_header",369],["T_WHITESPACE"," ",369],"=",["T_WHITESPACE"," ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","drupalGetHeader",369],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",369],")",";",["T_WHITESPACE","\n    ",369],["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","assertTrue",370],"(","!",["T_STRING","preg_match",370],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",370],",",["T_WHITESPACE"," ",370],["T_VARIABLE","$cache_tags_header",370],")",",",["T_WHITESPACE"," ",370],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",370],")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","assertRaw",371],"(",["T_VARIABLE","$default_output",371],",",["T_WHITESPACE"," ",371],["T_CONSTANT_ENCAPSED_STRING","'Default image displayed when no user supplied image is present.'",371],")",";",["T_WHITESPACE","\n\n    ",371],["T_COMMENT","\/\/ Create a node with an image attached and ensure that the default image\n",373],["T_WHITESPACE","    ",374],["T_COMMENT","\/\/ is not displayed.\n",374],["T_WHITESPACE","\n    ",375],["T_COMMENT","\/\/ Create alt text for the image.\n",376],["T_WHITESPACE","    ",377],["T_VARIABLE","$alt",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","randomMachineName",377],"(",")",";",["T_WHITESPACE","\n\n    ",377],["T_COMMENT","\/\/ Upload the 'image-test.gif' file.\n",379],["T_WHITESPACE","    ",380],["T_VARIABLE","$nid",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","uploadNodeImage",380],"(",["T_VARIABLE","$images",380],"[",["T_LNUMBER","2",380],"]",",",["T_WHITESPACE"," ",380],["T_VARIABLE","$field_name",380],",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'article'",380],",",["T_WHITESPACE"," ",380],["T_VARIABLE","$alt",380],")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$node_storage",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","resetCache",381],"(",["T_ARRAY","array",381],"(",["T_VARIABLE","$nid",381],")",")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$node",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$node_storage",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","load",382],"(",["T_VARIABLE","$nid",382],")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$file",383],["T_WHITESPACE"," ",383],"=",["T_WHITESPACE"," ",383],["T_VARIABLE","$node",383],["T_OBJECT_OPERATOR","->",383],"{",["T_VARIABLE","$field_name",383],"}",["T_OBJECT_OPERATOR","->",383],["T_STRING","entity",383],";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$image",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],"(",["T_WHITESPACE","\n      ",384],["T_CONSTANT_ENCAPSED_STRING","'#theme'",385],["T_WHITESPACE"," ",385],["T_DOUBLE_ARROW","=>",385],["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'image'",385],",",["T_WHITESPACE","\n      ",385],["T_CONSTANT_ENCAPSED_STRING","'#uri'",386],["T_WHITESPACE"," ",386],["T_DOUBLE_ARROW","=>",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$file",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","getFileUri",386],"(",")",",",["T_WHITESPACE","\n      ",386],["T_CONSTANT_ENCAPSED_STRING","'#width'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_LNUMBER","40",387],",",["T_WHITESPACE","\n      ",387],["T_CONSTANT_ENCAPSED_STRING","'#height'",388],["T_WHITESPACE"," ",388],["T_DOUBLE_ARROW","=>",388],["T_WHITESPACE"," ",388],["T_LNUMBER","20",388],",",["T_WHITESPACE","\n      ",388],["T_CONSTANT_ENCAPSED_STRING","'#alt'",389],["T_WHITESPACE"," ",389],["T_DOUBLE_ARROW","=>",389],["T_WHITESPACE"," ",389],["T_VARIABLE","$alt",389],",",["T_WHITESPACE","\n    ",389],")",";",["T_WHITESPACE","\n    ",390],["T_VARIABLE","$image_output",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_STRING","str_replace",391],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",391],",",["T_WHITESPACE"," ",391],["T_STRING","NULL",391],",",["T_WHITESPACE"," ",391],["T_VARIABLE","$renderer",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","renderRoot",391],"(",["T_VARIABLE","$image",391],")",")",";",["T_WHITESPACE","\n    ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","drupalGet",392],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_VARIABLE","$nid",392],")",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","assertCacheTag",393],"(",["T_VARIABLE","$file",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","getCacheTags",393],"(",")","[",["T_LNUMBER","0",393],"]",")",";",["T_WHITESPACE","\n    ",393],["T_VARIABLE","$cache_tags_header",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","drupalGetHeader",394],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",394],")",";",["T_WHITESPACE","\n    ",394],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","assertTrue",395],"(","!",["T_STRING","preg_match",395],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$cache_tags_header",395],")",",",["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",395],")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","assertNoRaw",396],"(",["T_VARIABLE","$default_output",396],",",["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'Default image is not displayed when user supplied image is present.'",396],")",";",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","assertRaw",397],"(",["T_VARIABLE","$image_output",397],",",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'User supplied image is displayed.'",397],")",";",["T_WHITESPACE","\n\n    ",397],["T_COMMENT","\/\/ Remove default image from the field and make sure it is no longer used.\n",399],["T_WHITESPACE","    ",400],["T_VARIABLE","$edit",400],["T_WHITESPACE"," ",400],"=",["T_WHITESPACE"," ",400],["T_ARRAY","array",400],"(",["T_WHITESPACE","\n      ",400],["T_CONSTANT_ENCAPSED_STRING","'settings[default_image][uuid][fids]'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_LNUMBER","0",401],",",["T_WHITESPACE","\n    ",401],")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","drupalPostForm",403],"(","\"",["T_ENCAPSED_AND_WHITESPACE","admin\/structure\/types\/manage\/article\/fields\/node.article.",403],["T_VARIABLE","$field_name",403],["T_ENCAPSED_AND_WHITESPACE","\/storage",403],"\"",",",["T_WHITESPACE"," ",403],["T_VARIABLE","$edit",403],",",["T_WHITESPACE"," ",403],["T_STRING","t",403],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",403],")",")",";",["T_WHITESPACE","\n    ",403],["T_COMMENT","\/\/ Clear field definition cache so the new default image is detected.\n",404],["T_WHITESPACE","    ",405],["T_NS_SEPARATOR","\\",405],["T_STRING","Drupal",405],["T_DOUBLE_COLON","::",405],["T_STRING","entityManager",405],"(",")",["T_OBJECT_OPERATOR","->",405],["T_STRING","clearCachedFieldDefinitions",405],"(",")",";",["T_WHITESPACE","\n    ",405],["T_VARIABLE","$field_storage",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],["T_STRING","FieldStorageConfig",406],["T_DOUBLE_COLON","::",406],["T_STRING","loadByName",406],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$field_name",406],")",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$default_image",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_VARIABLE","$field_storage",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","getSetting",407],"(",["T_CONSTANT_ENCAPSED_STRING","'default_image'",407],")",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","assertFalse",408],"(",["T_VARIABLE","$default_image",408],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",408],"]",",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'Default image removed from field.'",408],")",";",["T_WHITESPACE","\n    ",408],["T_COMMENT","\/\/ Create an image field that uses the private:\/\/ scheme and test that the\n",409],["T_WHITESPACE","    ",410],["T_COMMENT","\/\/ default image works as expected.\n",410],["T_WHITESPACE","    ",411],["T_VARIABLE","$private_field_name",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_STRING","strtolower",411],"(",["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","randomMachineName",411],"(",")",")",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$this",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","createImageField",412],"(",["T_VARIABLE","$private_field_name",412],",",["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'article'",412],",",["T_WHITESPACE"," ",412],["T_ARRAY","array",412],"(",["T_CONSTANT_ENCAPSED_STRING","'uri_scheme'",412],["T_WHITESPACE"," ",412],["T_DOUBLE_ARROW","=>",412],["T_WHITESPACE"," ",412],["T_CONSTANT_ENCAPSED_STRING","'private'",412],")",")",";",["T_WHITESPACE","\n    ",412],["T_COMMENT","\/\/ Add a default image to the new field.\n",413],["T_WHITESPACE","    ",414],["T_VARIABLE","$edit",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",["T_WHITESPACE","\n      ",414],["T_COMMENT","\/\/ Get the path of the 'image-test.gif' file.\n",415],["T_WHITESPACE","      ",416],["T_CONSTANT_ENCAPSED_STRING","'files[settings_default_image_uuid]'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_STRING","drupal_realpath",416],"(",["T_VARIABLE","$images",416],"[",["T_LNUMBER","2",416],"]",["T_OBJECT_OPERATOR","->",416],["T_STRING","uri",416],")",",",["T_WHITESPACE","\n      ",416],["T_CONSTANT_ENCAPSED_STRING","'settings[default_image][alt]'",417],["T_WHITESPACE"," ",417],["T_DOUBLE_ARROW","=>",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$alt",417],",",["T_WHITESPACE","\n      ",417],["T_CONSTANT_ENCAPSED_STRING","'settings[default_image][title]'",418],["T_WHITESPACE"," ",418],["T_DOUBLE_ARROW","=>",418],["T_WHITESPACE"," ",418],["T_VARIABLE","$title",418],",",["T_WHITESPACE","\n    ",418],")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","drupalPostForm",420],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/types\/manage\/article\/fields\/node.article.'",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_VARIABLE","$private_field_name",420],["T_WHITESPACE"," ",420],".",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'\/storage'",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$edit",420],",",["T_WHITESPACE"," ",420],["T_STRING","t",420],"(",["T_CONSTANT_ENCAPSED_STRING","'Save field settings'",420],")",")",";",["T_WHITESPACE","\n    ",420],["T_COMMENT","\/\/ Clear field definition cache so the new default image is detected.\n",421],["T_WHITESPACE","    ",422],["T_NS_SEPARATOR","\\",422],["T_STRING","Drupal",422],["T_DOUBLE_COLON","::",422],["T_STRING","entityManager",422],"(",")",["T_OBJECT_OPERATOR","->",422],["T_STRING","clearCachedFieldDefinitions",422],"(",")",";",["T_WHITESPACE","\n\n    ",422],["T_VARIABLE","$private_field_storage",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_STRING","FieldStorageConfig",424],["T_DOUBLE_COLON","::",424],["T_STRING","loadByName",424],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",424],",",["T_WHITESPACE"," ",424],["T_VARIABLE","$private_field_name",424],")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$default_image",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$private_field_storage",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","getSetting",425],"(",["T_CONSTANT_ENCAPSED_STRING","'default_image'",425],")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$file",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_NS_SEPARATOR","\\",426],["T_STRING","Drupal",426],["T_DOUBLE_COLON","::",426],["T_STRING","entityManager",426],"(",")",["T_OBJECT_OPERATOR","->",426],["T_STRING","loadEntityByUuid",426],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$default_image",426],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",426],"]",")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","assertEqual",427],"(",["T_CONSTANT_ENCAPSED_STRING","'private'",427],",",["T_WHITESPACE"," ",427],["T_STRING","file_uri_scheme",427],"(",["T_VARIABLE","$file",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","getFileUri",427],"(",")",")",",",["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'Default image uses private:\/\/ scheme.'",427],")",";",["T_WHITESPACE","\n    ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","assertTrue",428],"(",["T_VARIABLE","$file",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","isPermanent",428],"(",")",",",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'The default image status is permanent.'",428],")",";",["T_WHITESPACE","\n    ",428],["T_COMMENT","\/\/ Create a new node with no image attached and ensure that default private\n",429],["T_WHITESPACE","    ",430],["T_COMMENT","\/\/ image is displayed.\n",430],["T_WHITESPACE","    ",431],["T_VARIABLE","$node",431],["T_WHITESPACE"," ",431],"=",["T_WHITESPACE"," ",431],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","drupalCreateNode",431],"(",["T_ARRAY","array",431],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",431],["T_WHITESPACE"," ",431],["T_DOUBLE_ARROW","=>",431],["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","'article'",431],")",")",";",["T_WHITESPACE","\n    ",431],["T_VARIABLE","$image",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_ARRAY","array",432],"(",["T_WHITESPACE","\n      ",432],["T_CONSTANT_ENCAPSED_STRING","'#theme'",433],["T_WHITESPACE"," ",433],["T_DOUBLE_ARROW","=>",433],["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'image'",433],",",["T_WHITESPACE","\n      ",433],["T_CONSTANT_ENCAPSED_STRING","'#uri'",434],["T_WHITESPACE"," ",434],["T_DOUBLE_ARROW","=>",434],["T_WHITESPACE"," ",434],["T_VARIABLE","$file",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getFileUri",434],"(",")",",",["T_WHITESPACE","\n      ",434],["T_CONSTANT_ENCAPSED_STRING","'#alt'",435],["T_WHITESPACE"," ",435],["T_DOUBLE_ARROW","=>",435],["T_WHITESPACE"," ",435],["T_VARIABLE","$alt",435],",",["T_WHITESPACE","\n      ",435],["T_CONSTANT_ENCAPSED_STRING","'#title'",436],["T_WHITESPACE"," ",436],["T_DOUBLE_ARROW","=>",436],["T_WHITESPACE"," ",436],["T_VARIABLE","$title",436],",",["T_WHITESPACE","\n      ",436],["T_CONSTANT_ENCAPSED_STRING","'#width'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_LNUMBER","40",437],",",["T_WHITESPACE","\n      ",437],["T_CONSTANT_ENCAPSED_STRING","'#height'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_LNUMBER","20",438],",",["T_WHITESPACE","\n    ",438],")",";",["T_WHITESPACE","\n    ",439],["T_VARIABLE","$default_output",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_STRING","str_replace",440],"(",["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",440],",",["T_WHITESPACE"," ",440],["T_STRING","NULL",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$renderer",440],["T_OBJECT_OPERATOR","->",440],["T_STRING","renderRoot",440],"(",["T_VARIABLE","$image",440],")",")",";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","drupalGet",441],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",441],["T_WHITESPACE"," ",441],".",["T_WHITESPACE"," ",441],["T_VARIABLE","$node",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","id",441],"(",")",")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertCacheTag",442],"(",["T_VARIABLE","$file",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","getCacheTags",442],"(",")","[",["T_LNUMBER","0",442],"]",")",";",["T_WHITESPACE","\n    ",442],["T_VARIABLE","$cache_tags_header",443],["T_WHITESPACE"," ",443],"=",["T_WHITESPACE"," ",443],["T_VARIABLE","$this",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","drupalGetHeader",443],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Drupal-Cache-Tags'",443],")",";",["T_WHITESPACE","\n    ",443],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","assertTrue",444],"(","!",["T_STRING","preg_match",444],"(",["T_CONSTANT_ENCAPSED_STRING","'\/ image_style\\:\/'",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$cache_tags_header",444],")",",",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'No image style cache tag found.'",444],")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","assertRaw",445],"(",["T_VARIABLE","$default_output",445],",",["T_WHITESPACE"," ",445],["T_CONSTANT_ENCAPSED_STRING","'Default private image displayed when no user supplied image is present.'",445],")",";",["T_WHITESPACE","\n  ",445],"}",["T_WHITESPACE","\n\n",446],"}",["T_WHITESPACE","\n",448]]
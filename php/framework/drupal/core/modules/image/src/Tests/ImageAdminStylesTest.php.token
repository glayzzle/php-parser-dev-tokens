[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SafeMarkup",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","EntityViewDisplay",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","image",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ImageStyle",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","image",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ImageStyleInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","node",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Node",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","file",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","File",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Tests creation, deletion, and editing of image styles and effects.\n *\n * @group image\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","ImageAdminStylesTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","ImageFieldTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Given an image style, generate an image.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","createSampleImage",22],"(",["T_STRING","ImageStyleInterface",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$style",22],")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$file_path",23],";",["T_WHITESPACE","\n\n    ",23],["T_COMMENT","\/\/ First, we need to make sure we have an image in our testing\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ file directory. Copy over an image on the first run.\n",26],["T_WHITESPACE","    ",27],["T_IF","if",27],["T_WHITESPACE"," ",27],"(","!",["T_ISSET","isset",27],"(",["T_VARIABLE","$file_path",27],")",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n      ",27],["T_VARIABLE","$files",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalGetTestFiles",28],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",28],")",";",["T_WHITESPACE","\n      ",28],["T_VARIABLE","$file",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","reset",29],"(",["T_VARIABLE","$files",29],")",";",["T_WHITESPACE","\n      ",29],["T_VARIABLE","$file_path",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_STRING","file_unmanaged_copy",30],"(",["T_VARIABLE","$file",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","uri",30],")",";",["T_WHITESPACE","\n    ",30],"}",["T_WHITESPACE","\n\n    ",31],["T_RETURN","return",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$style",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","buildUrl",33],"(",["T_VARIABLE","$file_path",33],")",["T_WHITESPACE"," ",33],"?",["T_WHITESPACE"," ",33],["T_VARIABLE","$file_path",33],["T_WHITESPACE"," ",33],":",["T_WHITESPACE"," ",33],["T_STRING","FALSE",33],";",["T_WHITESPACE","\n  ",33],"}",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Count the number of images currently create for a style.\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","getImageCount",39],"(",["T_STRING","ImageStyleInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$style",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_RETURN","return",40],["T_WHITESPACE"," ",40],["T_STRING","count",40],"(",["T_STRING","file_scan_directory",40],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/styles\/'",40],["T_WHITESPACE"," ",40],".",["T_WHITESPACE"," ",40],["T_VARIABLE","$style",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","id",40],"(",")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'\/.*\/'",40],")",")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Test creating an image style with a numeric name and ensuring it can be\n   * applied to an image.\n   *\/",43],["T_WHITESPACE","\n  ",46],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","testNumericStyleName",47],"(",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$style_name",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_STRING","rand",48],"(",")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$style_label",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","randomString",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$edit",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$style_name",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'label'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$style_label",52],",",["T_WHITESPACE","\n    ",52],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalPostForm",54],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/add'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$edit",54],",",["T_WHITESPACE"," ",54],["T_STRING","t",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new style'",54],")",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertRaw",55],"(",["T_STRING","t",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Style %name was created.'",55],",",["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$style_label",55],")",")",")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$options",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","image_style_options",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertTrue",57],"(",["T_STRING","array_key_exists",57],"(",["T_VARIABLE","$style_name",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$options",57],")",",",["T_WHITESPACE"," ",57],["T_STRING","format_string",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Array key %key exists.'",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'%key'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$style_name",57],")",")",")",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * General test to add a style, add\/remove\/edit effects to it, then delete it.\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testStyle",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$admin_path",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles'",64],";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ Setup a style to be created and effects to add to it.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$style_name",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","strtolower",67],"(",["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","randomMachineName",67],"(",["T_LNUMBER","10",67],")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$style_label",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","randomString",68],"(",")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$style_path",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$admin_path",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",69],["T_WHITESPACE"," ",69],".",["T_WHITESPACE"," ",69],["T_VARIABLE","$style_name",69],";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$effect_edits",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'image_resize'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_ARRAY","array",71],"(",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'width'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_LNUMBER","100",72],",",["T_WHITESPACE","\n        ",72],["T_CONSTANT_ENCAPSED_STRING","'height'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_LNUMBER","101",73],",",["T_WHITESPACE","\n      ",73],")",",",["T_WHITESPACE","\n      ",74],["T_CONSTANT_ENCAPSED_STRING","'image_scale'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'width'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_LNUMBER","110",76],",",["T_WHITESPACE","\n        ",76],["T_CONSTANT_ENCAPSED_STRING","'height'",77],["T_WHITESPACE"," ",77],["T_DOUBLE_ARROW","=>",77],["T_WHITESPACE"," ",77],["T_LNUMBER","111",77],",",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'upscale'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_LNUMBER","1",78],",",["T_WHITESPACE","\n      ",78],")",",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'image_scale_and_crop'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n        ",80],["T_CONSTANT_ENCAPSED_STRING","'width'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","120",81],",",["T_WHITESPACE","\n        ",81],["T_CONSTANT_ENCAPSED_STRING","'height'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_LNUMBER","121",82],",",["T_WHITESPACE","\n      ",82],")",",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'image_crop'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",["T_WHITESPACE","\n        ",84],["T_CONSTANT_ENCAPSED_STRING","'width'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_LNUMBER","130",85],",",["T_WHITESPACE","\n        ",85],["T_CONSTANT_ENCAPSED_STRING","'height'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_LNUMBER","131",86],",",["T_WHITESPACE","\n        ",86],["T_CONSTANT_ENCAPSED_STRING","'anchor'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'left-top'",87],",",["T_WHITESPACE","\n      ",87],")",",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'image_desaturate'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_ARRAY","array",89],"(",["T_WHITESPACE","\n        ",89],["T_COMMENT","\/\/ No options for desaturate.\n",90],["T_WHITESPACE","      ",91],")",",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'image_rotate'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_WHITESPACE","\n        ",92],["T_CONSTANT_ENCAPSED_STRING","'degrees'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_LNUMBER","5",93],",",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'random'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_LNUMBER","1",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'bgcolor'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'#FFFF00'",95],",",["T_WHITESPACE","\n      ",95],")",",",["T_WHITESPACE","\n    ",96],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Add style form.\n",99],["T_WHITESPACE","\n    ",100],["T_VARIABLE","$edit",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'name'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$style_name",102],",",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'label'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$style_label",103],",",["T_WHITESPACE","\n    ",103],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","drupalPostForm",105],"(",["T_VARIABLE","$admin_path",105],["T_WHITESPACE"," ",105],".",["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'\/add'",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$edit",105],",",["T_WHITESPACE"," ",105],["T_STRING","t",105],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new style'",105],")",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertRaw",106],"(",["T_STRING","t",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Style %name was created.'",106],",",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$style_label",106],")",")",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Ensure that the expected entity operations are there.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","drupalGet",109],"(",["T_VARIABLE","$admin_path",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertLinkByHref",110],"(",["T_VARIABLE","$style_path",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertLinkByHref",111],"(",["T_VARIABLE","$style_path",111],["T_WHITESPACE"," ",111],".",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'\/flush'",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertLinkByHref",112],"(",["T_VARIABLE","$style_path",112],["T_WHITESPACE"," ",112],".",["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",112],")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Add effect form.\n",114],["T_WHITESPACE","\n    ",115],["T_COMMENT","\/\/ Add each sample effect to the style.\n",116],["T_WHITESPACE","    ",117],["T_FOREACH","foreach",117],["T_WHITESPACE"," ",117],"(",["T_VARIABLE","$effect_edits",117],["T_WHITESPACE"," ",117],["T_AS","as",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$effect",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$edit",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n      ",117],["T_VARIABLE","$edit_data",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",")",";",["T_WHITESPACE","\n      ",118],["T_FOREACH","foreach",119],["T_WHITESPACE"," ",119],"(",["T_VARIABLE","$edit",119],["T_WHITESPACE"," ",119],["T_AS","as",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$field",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$value",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n        ",119],["T_VARIABLE","$edit_data",120],"[",["T_CONSTANT_ENCAPSED_STRING","'data['",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_VARIABLE","$field",120],["T_WHITESPACE"," ",120],".",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","']'",120],"]",["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$value",120],";",["T_WHITESPACE","\n      ",120],"}",["T_WHITESPACE","\n      ",121],["T_COMMENT","\/\/ Add the effect.\n",122],["T_WHITESPACE","      ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","drupalPostForm",123],"(",["T_VARIABLE","$style_path",123],",",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$effect",123],")",",",["T_WHITESPACE"," ",123],["T_STRING","t",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",123],")",")",";",["T_WHITESPACE","\n      ",123],["T_IF","if",124],["T_WHITESPACE"," ",124],"(","!",["T_EMPTY","empty",124],"(",["T_VARIABLE","$edit",124],")",")",["T_WHITESPACE"," ",124],"{",["T_WHITESPACE","\n        ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","drupalPostForm",125],"(",["T_STRING","NULL",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$edit_data",125],",",["T_WHITESPACE"," ",125],["T_STRING","t",125],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",125],")",")",";",["T_WHITESPACE","\n      ",125],"}",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Load the saved image style.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$style",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_STRING","ImageStyle",130],["T_DOUBLE_COLON","::",130],["T_STRING","load",130],"(",["T_VARIABLE","$style_name",130],")",";",["T_WHITESPACE","\n\n    ",130],["T_COMMENT","\/\/ Ensure that third party settings were added to the config entity.\n",132],["T_WHITESPACE","    ",133],["T_COMMENT","\/\/ These are added by a hook_image_style_presave() implemented in\n",133],["T_WHITESPACE","    ",134],["T_COMMENT","\/\/ image_module_test module.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEqual",135],"(",["T_CONSTANT_ENCAPSED_STRING","'bar'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$style",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getThirdPartySetting",135],"(",["T_CONSTANT_ENCAPSED_STRING","'image_module_test'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'foo'",135],")",",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'Third party settings were added to the image style.'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Ensure that the image style URI matches our expected path.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$style_uri_path",138],["T_WHITESPACE"," ",138],"=",["T_WHITESPACE"," ",138],["T_VARIABLE","$style",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","url",138],"(",")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertTrue",139],"(",["T_STRING","strpos",139],"(",["T_VARIABLE","$style_uri_path",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$style_path",139],")",["T_WHITESPACE"," ",139],["T_IS_NOT_IDENTICAL","!==",139],["T_WHITESPACE"," ",139],["T_STRING","FALSE",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'The image style URI is correct.'",139],")",";",["T_WHITESPACE","\n\n    ",139],["T_COMMENT","\/\/ Confirm that all effects on the image style have settings that match\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ what was saved.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$uuids",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_FOREACH","foreach",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$style",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getEffects",144],"(",")",["T_WHITESPACE"," ",144],["T_AS","as",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$uuid",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$effect",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_COMMENT","\/\/ Store the uuid for later use.\n",145],["T_WHITESPACE","      ",146],["T_VARIABLE","$uuids",146],"[",["T_VARIABLE","$effect",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","getPluginId",146],"(",")","]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$uuid",146],";",["T_WHITESPACE","\n      ",146],["T_VARIABLE","$effect_configuration",147],["T_WHITESPACE"," ",147],"=",["T_WHITESPACE"," ",147],["T_VARIABLE","$effect",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","getConfiguration",147],"(",")",";",["T_WHITESPACE","\n      ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$effect_edits",148],"[",["T_VARIABLE","$effect",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","getPluginId",148],"(",")","]",["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$field",148],["T_WHITESPACE"," ",148],["T_DOUBLE_ARROW","=>",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$value",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n        ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertEqual",149],"(",["T_VARIABLE","$value",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$effect_configuration",149],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",149],"]","[",["T_VARIABLE","$field",149],"]",",",["T_WHITESPACE"," ",149],["T_STRING","SafeMarkup",149],["T_DOUBLE_COLON","::",149],["T_STRING","format",149],"(",["T_CONSTANT_ENCAPSED_STRING","'The %field field in the %effect effect has the correct value of %value.'",149],",",["T_WHITESPACE"," ",149],["T_ARRAY","array",149],"(",["T_CONSTANT_ENCAPSED_STRING","'%field'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$field",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'%effect'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$effect",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","getPluginId",149],"(",")",",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'%value'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$value",149],")",")",")",";",["T_WHITESPACE","\n      ",149],"}",["T_WHITESPACE","\n    ",150],"}",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Assert that every effect was saved.\n",153],["T_WHITESPACE","    ",154],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(",["T_STRING","array_keys",154],"(",["T_VARIABLE","$effect_edits",154],")",["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$effect_name",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n      ",154],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","assertTrue",155],"(",["T_ISSET","isset",155],"(",["T_VARIABLE","$uuids",155],"[",["T_VARIABLE","$effect_name",155],"]",")",",",["T_WHITESPACE"," ",155],["T_STRING","format_string",155],"(",["T_WHITESPACE","\n        ",155],["T_CONSTANT_ENCAPSED_STRING","'A %effect_name effect was saved with ID %uuid'",156],",",["T_WHITESPACE","\n        ",156],["T_ARRAY","array",157],"(",["T_WHITESPACE","\n          ",157],["T_CONSTANT_ENCAPSED_STRING","'%effect_name'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$effect_name",158],",",["T_WHITESPACE","\n          ",158],["T_CONSTANT_ENCAPSED_STRING","'%uuid'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_VARIABLE","$uuids",159],"[",["T_VARIABLE","$effect_name",159],"]",",",["T_WHITESPACE","\n        ",159],")",")",")",";",["T_WHITESPACE","\n    ",160],"}",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Image style overview form (ordering and renaming).\n",163],["T_WHITESPACE","\n    ",164],["T_COMMENT","\/\/ Confirm the order of effects is maintained according to the order we\n",165],["T_WHITESPACE","    ",166],["T_COMMENT","\/\/ added the fields.\n",166],["T_WHITESPACE","    ",167],["T_VARIABLE","$effect_edits_order",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_STRING","array_keys",167],"(",["T_VARIABLE","$effect_edits",167],")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$order_correct",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_STRING","TRUE",168],";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$index",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_LNUMBER","0",169],";",["T_WHITESPACE","\n    ",169],["T_FOREACH","foreach",170],["T_WHITESPACE"," ",170],"(",["T_VARIABLE","$style",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","getEffects",170],"(",")",["T_WHITESPACE"," ",170],["T_AS","as",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$effect",170],")",["T_WHITESPACE"," ",170],"{",["T_WHITESPACE","\n      ",170],["T_IF","if",171],["T_WHITESPACE"," ",171],"(",["T_VARIABLE","$effect_edits_order",171],"[",["T_VARIABLE","$index",171],"]",["T_WHITESPACE"," ",171],["T_IS_NOT_EQUAL","!=",171],["T_WHITESPACE"," ",171],["T_VARIABLE","$effect",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","getPluginId",171],"(",")",")",["T_WHITESPACE"," ",171],"{",["T_WHITESPACE","\n        ",171],["T_VARIABLE","$order_correct",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_STRING","FALSE",172],";",["T_WHITESPACE","\n      ",172],"}",["T_WHITESPACE","\n      ",173],["T_VARIABLE","$index",174],["T_INC","++",174],";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertTrue",176],"(",["T_VARIABLE","$order_correct",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'The order of the effects is correctly set by default.'",176],")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Test the style overview form.\n",178],["T_WHITESPACE","    ",179],["T_COMMENT","\/\/ Change the name of the style and adjust the weights of effects.\n",179],["T_WHITESPACE","    ",180],["T_VARIABLE","$style_name",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","strtolower",180],"(",["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","randomMachineName",180],"(",["T_LNUMBER","10",180],")",")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$style_label",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","randomMachineName",181],"(",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$weight",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_STRING","count",182],"(",["T_VARIABLE","$effect_edits",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$edit",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_WHITESPACE","\n      ",183],["T_CONSTANT_ENCAPSED_STRING","'name'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_VARIABLE","$style_name",184],",",["T_WHITESPACE","\n      ",184],["T_CONSTANT_ENCAPSED_STRING","'label'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_VARIABLE","$style_label",185],",",["T_WHITESPACE","\n    ",185],")",";",["T_WHITESPACE","\n    ",186],["T_FOREACH","foreach",187],["T_WHITESPACE"," ",187],"(",["T_VARIABLE","$style",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getEffects",187],"(",")",["T_WHITESPACE"," ",187],["T_AS","as",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$uuid",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$effect",187],")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n      ",187],["T_VARIABLE","$edit",188],"[",["T_CONSTANT_ENCAPSED_STRING","'effects['",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_VARIABLE","$uuid",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'][weight]'",188],"]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$weight",188],";",["T_WHITESPACE","\n      ",188],["T_VARIABLE","$weight",189],["T_DEC","--",189],";",["T_WHITESPACE","\n    ",189],"}",["T_WHITESPACE","\n\n    ",190],["T_COMMENT","\/\/ Create an image to make sure it gets flushed after saving.\n",192],["T_WHITESPACE","    ",193],["T_VARIABLE","$image_path",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","createSampleImage",193],"(",["T_VARIABLE","$style",193],")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","assertEqual",194],"(",["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getImageCount",194],"(",["T_VARIABLE","$style",194],")",",",["T_WHITESPACE"," ",194],["T_LNUMBER","1",194],",",["T_WHITESPACE"," ",194],["T_STRING","format_string",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %style image %file successfully generated.'",194],",",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_CONSTANT_ENCAPSED_STRING","'%style'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$style",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","label",194],"(",")",",",["T_WHITESPACE"," ",194],["T_CONSTANT_ENCAPSED_STRING","'%file'",194],["T_WHITESPACE"," ",194],["T_DOUBLE_ARROW","=>",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$image_path",194],")",")",")",";",["T_WHITESPACE","\n\n    ",194],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","drupalPostForm",196],"(",["T_VARIABLE","$style_path",196],",",["T_WHITESPACE"," ",196],["T_VARIABLE","$edit",196],",",["T_WHITESPACE"," ",196],["T_STRING","t",196],"(",["T_CONSTANT_ENCAPSED_STRING","'Update style'",196],")",")",";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ Note that after changing the style name, the style path is changed.\n",198],["T_WHITESPACE","    ",199],["T_VARIABLE","$style_path",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/manage\/'",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$style_name",199],";",["T_WHITESPACE","\n\n    ",199],["T_COMMENT","\/\/ Check that the URL was updated.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","drupalGet",202],"(",["T_VARIABLE","$style_path",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertTitle",203],"(",["T_STRING","t",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit style @name | Drupal'",203],",",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_VARIABLE","$style_label",203],")",")",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertResponse",204],"(",["T_LNUMBER","200",204],",",["T_WHITESPACE"," ",204],["T_STRING","format_string",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %original renamed to %new'",204],",",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",["T_CONSTANT_ENCAPSED_STRING","'%original'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$style",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","id",204],"(",")",",",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'%new'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$style_name",204],")",")",")",";",["T_WHITESPACE","\n\n    ",204],["T_COMMENT","\/\/ Check that the image was flushed after updating the style.\n",206],["T_WHITESPACE","    ",207],["T_COMMENT","\/\/ This is especially important when renaming the style. Make sure that\n",207],["T_WHITESPACE","    ",208],["T_COMMENT","\/\/ the old image directory has been deleted.\n",208],["T_WHITESPACE","    ",209],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertEqual",209],"(",["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getImageCount",209],"(",["T_VARIABLE","$style",209],")",",",["T_WHITESPACE"," ",209],["T_LNUMBER","0",209],",",["T_WHITESPACE"," ",209],["T_STRING","format_string",209],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %style was flushed after renaming the style and updating the order of effects.'",209],",",["T_WHITESPACE"," ",209],["T_ARRAY","array",209],"(",["T_CONSTANT_ENCAPSED_STRING","'%style'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$style",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","label",209],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",209],["T_COMMENT","\/\/ Load the style by the new name with the new weights.\n",211],["T_WHITESPACE","    ",212],["T_VARIABLE","$style",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","ImageStyle",212],["T_DOUBLE_COLON","::",212],["T_STRING","load",212],"(",["T_VARIABLE","$style_name",212],")",";",["T_WHITESPACE","\n\n    ",212],["T_COMMENT","\/\/ Confirm the new style order was saved.\n",214],["T_WHITESPACE","    ",215],["T_VARIABLE","$effect_edits_order",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","array_reverse",215],"(",["T_VARIABLE","$effect_edits_order",215],")",";",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$order_correct",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_STRING","TRUE",216],";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$index",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_LNUMBER","0",217],";",["T_WHITESPACE","\n    ",217],["T_FOREACH","foreach",218],["T_WHITESPACE"," ",218],"(",["T_VARIABLE","$style",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getEffects",218],"(",")",["T_WHITESPACE"," ",218],["T_AS","as",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$effect",218],")",["T_WHITESPACE"," ",218],"{",["T_WHITESPACE","\n      ",218],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$effect_edits_order",219],"[",["T_VARIABLE","$index",219],"]",["T_WHITESPACE"," ",219],["T_IS_NOT_EQUAL","!=",219],["T_WHITESPACE"," ",219],["T_VARIABLE","$effect",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","getPluginId",219],"(",")",")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$order_correct",220],["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_STRING","FALSE",220],";",["T_WHITESPACE","\n      ",220],"}",["T_WHITESPACE","\n      ",221],["T_VARIABLE","$index",222],["T_INC","++",222],";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","assertTrue",224],"(",["T_VARIABLE","$order_correct",224],",",["T_WHITESPACE"," ",224],["T_CONSTANT_ENCAPSED_STRING","'The order of the effects is correctly set by default.'",224],")",";",["T_WHITESPACE","\n\n    ",224],["T_COMMENT","\/\/ Image effect deletion form.\n",226],["T_WHITESPACE","\n    ",227],["T_COMMENT","\/\/ Create an image to make sure it gets flushed after deleting an effect.\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$image_path",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","createSampleImage",229],"(",["T_VARIABLE","$style",229],")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","assertEqual",230],"(",["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getImageCount",230],"(",["T_VARIABLE","$style",230],")",",",["T_WHITESPACE"," ",230],["T_LNUMBER","1",230],",",["T_WHITESPACE"," ",230],["T_STRING","format_string",230],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %style image %file successfully generated.'",230],",",["T_WHITESPACE"," ",230],["T_ARRAY","array",230],"(",["T_CONSTANT_ENCAPSED_STRING","'%style'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$style",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","label",230],"(",")",",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'%file'",230],["T_WHITESPACE"," ",230],["T_DOUBLE_ARROW","=>",230],["T_WHITESPACE"," ",230],["T_VARIABLE","$image_path",230],")",")",")",";",["T_WHITESPACE","\n\n    ",230],["T_COMMENT","\/\/ Delete the 'image_crop' effect from the style.\n",232],["T_WHITESPACE","    ",233],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","drupalPostForm",233],"(",["T_VARIABLE","$style_path",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'\/effects\/'",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$uuids",233],"[",["T_CONSTANT_ENCAPSED_STRING","'image_crop'",233],"]",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",233],",",["T_WHITESPACE"," ",233],["T_ARRAY","array",233],"(",")",",",["T_WHITESPACE"," ",233],["T_STRING","t",233],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",233],")",")",";",["T_WHITESPACE","\n    ",233],["T_COMMENT","\/\/ Confirm that the form submission was successful.\n",234],["T_WHITESPACE","    ",235],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","assertResponse",235],"(",["T_LNUMBER","200",235],")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$image_crop_effect",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$style",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","getEffect",236],"(",["T_VARIABLE","$uuids",236],"[",["T_CONSTANT_ENCAPSED_STRING","'image_crop'",236],"]",")",";",["T_WHITESPACE","\n    ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertRaw",237],"(",["T_STRING","t",237],"(",["T_CONSTANT_ENCAPSED_STRING","'The image effect %name has been deleted.'",237],",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$image_crop_effect",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","label",237],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",237],["T_COMMENT","\/\/ Confirm that there is no longer a link to the effect.\n",238],["T_WHITESPACE","    ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","assertNoLinkByHref",239],"(",["T_VARIABLE","$style_path",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'\/effects\/'",239],["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_VARIABLE","$uuids",239],"[",["T_CONSTANT_ENCAPSED_STRING","'image_crop'",239],"]",["T_WHITESPACE"," ",239],".",["T_WHITESPACE"," ",239],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",239],")",";",["T_WHITESPACE","\n    ",239],["T_COMMENT","\/\/ Refresh the image style information and verify that the effect was\n",240],["T_WHITESPACE","    ",241],["T_COMMENT","\/\/ actually deleted.\n",241],["T_WHITESPACE","    ",242],["T_VARIABLE","$entity_type_manager",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","container",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","get",242],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",242],")",";",["T_WHITESPACE","\n    ",242],["T_VARIABLE","$style",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_VARIABLE","$entity_type_manager",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","getStorage",243],"(",["T_CONSTANT_ENCAPSED_STRING","'image_style'",243],")",["T_OBJECT_OPERATOR","->",243],["T_STRING","loadUnchanged",243],"(",["T_VARIABLE","$style",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","id",243],"(",")",")",";",["T_WHITESPACE","\n    ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","assertFalse",244],"(",["T_VARIABLE","$style",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","getEffects",244],"(",")",["T_OBJECT_OPERATOR","->",244],["T_STRING","has",244],"(",["T_VARIABLE","$uuids",244],"[",["T_CONSTANT_ENCAPSED_STRING","'image_crop'",244],"]",")",",",["T_WHITESPACE"," ",244],["T_STRING","format_string",244],"(",["T_WHITESPACE","\n      ",244],["T_CONSTANT_ENCAPSED_STRING","'Effect with ID %uuid no longer found on image style %style'",245],",",["T_WHITESPACE","\n      ",245],["T_ARRAY","array",246],"(",["T_WHITESPACE","\n        ",246],["T_CONSTANT_ENCAPSED_STRING","'%uuid'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$uuids",247],"[",["T_CONSTANT_ENCAPSED_STRING","'image_crop'",247],"]",",",["T_WHITESPACE","\n        ",247],["T_CONSTANT_ENCAPSED_STRING","'%style'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$style",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","label",248],"(",")",",",["T_WHITESPACE","\n      ",248],")",")",")",";",["T_WHITESPACE","\n\n    ",249],["T_COMMENT","\/\/ Additional test on Rotate effect, for transparent background.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$edit",252],["T_WHITESPACE"," ",252],"=",["T_WHITESPACE"," ",252],["T_ARRAY","array",252],"(",["T_WHITESPACE","\n      ",252],["T_CONSTANT_ENCAPSED_STRING","'data[degrees]'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_LNUMBER","5",253],",",["T_WHITESPACE","\n      ",253],["T_CONSTANT_ENCAPSED_STRING","'data[random]'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_LNUMBER","0",254],",",["T_WHITESPACE","\n      ",254],["T_CONSTANT_ENCAPSED_STRING","'data[bgcolor]'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","''",255],",",["T_WHITESPACE","\n    ",255],")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","drupalPostForm",257],"(",["T_VARIABLE","$style_path",257],",",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'image_rotate'",257],")",",",["T_WHITESPACE"," ",257],["T_STRING","t",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",257],")",")",";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","drupalPostForm",258],"(",["T_STRING","NULL",258],",",["T_WHITESPACE"," ",258],["T_VARIABLE","$edit",258],",",["T_WHITESPACE"," ",258],["T_STRING","t",258],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",258],")",")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$entity_type_manager",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","container",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","get",259],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",259],")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$style",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$entity_type_manager",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getStorage",260],"(",["T_CONSTANT_ENCAPSED_STRING","'image_style'",260],")",["T_OBJECT_OPERATOR","->",260],["T_STRING","loadUnchanged",260],"(",["T_VARIABLE","$style_name",260],")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertEqual",261],"(",["T_STRING","count",261],"(",["T_VARIABLE","$style",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","getEffects",261],"(",")",")",",",["T_WHITESPACE"," ",261],["T_LNUMBER","6",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'Rotate effect with transparent background was added.'",261],")",";",["T_WHITESPACE","\n\n    ",261],["T_COMMENT","\/\/ Style deletion form.\n",263],["T_WHITESPACE","\n    ",264],["T_COMMENT","\/\/ Delete the style.\n",265],["T_WHITESPACE","    ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","drupalPostForm",266],"(",["T_VARIABLE","$style_path",266],["T_WHITESPACE"," ",266],".",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",266],",",["T_WHITESPACE"," ",266],["T_ARRAY","array",266],"(",")",",",["T_WHITESPACE"," ",266],["T_STRING","t",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",266],")",")",";",["T_WHITESPACE","\n\n    ",266],["T_COMMENT","\/\/ Confirm the style directory has been removed.\n",268],["T_WHITESPACE","    ",269],["T_VARIABLE","$directory",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","file_default_scheme",269],"(",")",["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_CONSTANT_ENCAPSED_STRING","':\/\/styles\/'",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$style_name",269],";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","assertFalse",270],"(",["T_STRING","is_dir",270],"(",["T_VARIABLE","$directory",270],")",",",["T_WHITESPACE"," ",270],["T_STRING","format_string",270],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %style directory removed on style deletion.'",270],",",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",["T_CONSTANT_ENCAPSED_STRING","'%style'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$style",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","label",270],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",270],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertFalse",272],"(",["T_STRING","ImageStyle",272],["T_DOUBLE_COLON","::",272],["T_STRING","load",272],"(",["T_VARIABLE","$style_name",272],")",",",["T_WHITESPACE"," ",272],["T_STRING","format_string",272],"(",["T_CONSTANT_ENCAPSED_STRING","'Image style %style successfully deleted.'",272],",",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'%style'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$style",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","label",272],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",272],["T_COMMENT","\/\/ Test empty text when there are no image styles.\n",274],["T_WHITESPACE","\n    ",275],["T_COMMENT","\/\/ Delete all image styles.\n",276],["T_WHITESPACE","    ",277],["T_FOREACH","foreach",277],["T_WHITESPACE"," ",277],"(",["T_STRING","ImageStyle",277],["T_DOUBLE_COLON","::",277],["T_STRING","loadMultiple",277],"(",")",["T_WHITESPACE"," ",277],["T_AS","as",277],["T_WHITESPACE"," ",277],["T_VARIABLE","$image_style",277],")",["T_WHITESPACE"," ",277],"{",["T_WHITESPACE","\n      ",277],["T_VARIABLE","$image_style",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","delete",278],"(",")",";",["T_WHITESPACE","\n    ",278],"}",["T_WHITESPACE","\n\n    ",279],["T_COMMENT","\/\/ Confirm that the empty text is correct on the image styles page.\n",281],["T_WHITESPACE","    ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","drupalGet",282],"(",["T_VARIABLE","$admin_path",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertRaw",283],"(",["T_STRING","t",283],"(",["T_CONSTANT_ENCAPSED_STRING","'There are currently no styles. <a href=\":url\">Add a new one<\/a>.'",283],",",["T_WHITESPACE"," ",283],"[",["T_WHITESPACE","\n      ",283],["T_CONSTANT_ENCAPSED_STRING","':url'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_NS_SEPARATOR","\\",284],["T_STRING","Drupal",284],["T_DOUBLE_COLON","::",284],["T_STRING","url",284],"(",["T_CONSTANT_ENCAPSED_STRING","'image.style_add'",284],")",",",["T_WHITESPACE","\n    ",284],"]",")",")",";",["T_WHITESPACE","\n\n  ",285],"}",["T_WHITESPACE","\n\n  ",287],["T_DOC_COMMENT","\/**\n   * Tests editing Ajax-enabled image effect forms.\n   *\/",289],["T_WHITESPACE","\n  ",291],["T_PUBLIC","public",292],["T_WHITESPACE"," ",292],["T_FUNCTION","function",292],["T_WHITESPACE"," ",292],["T_STRING","testAjaxEnabledEffectForm",292],"(",")",["T_WHITESPACE"," ",292],"{",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$admin_path",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles'",293],";",["T_WHITESPACE","\n\n    ",293],["T_COMMENT","\/\/ Setup a style to be created and effects to add to it.\n",295],["T_WHITESPACE","    ",296],["T_VARIABLE","$style_name",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","strtolower",296],"(",["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","randomMachineName",296],"(",["T_LNUMBER","10",296],")",")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$style_label",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","randomString",297],"(",")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$style_path",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$admin_path",298],["T_WHITESPACE"," ",298],".",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",298],["T_WHITESPACE"," ",298],".",["T_WHITESPACE"," ",298],["T_VARIABLE","$style_name",298],";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$effect_edit",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],"[",["T_WHITESPACE","\n      ",299],["T_CONSTANT_ENCAPSED_STRING","'data[test_parameter]'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_LNUMBER","100",300],",",["T_WHITESPACE","\n    ",300],"]",";",["T_WHITESPACE","\n\n    ",301],["T_COMMENT","\/\/ Add style form.\n",303],["T_WHITESPACE","    ",304],["T_VARIABLE","$edit",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],"[",["T_WHITESPACE","\n      ",304],["T_CONSTANT_ENCAPSED_STRING","'name'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$style_name",305],",",["T_WHITESPACE","\n      ",305],["T_CONSTANT_ENCAPSED_STRING","'label'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$style_label",306],",",["T_WHITESPACE","\n    ",306],"]",";",["T_WHITESPACE","\n    ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","drupalPostForm",308],"(",["T_VARIABLE","$admin_path",308],["T_WHITESPACE"," ",308],".",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'\/add'",308],",",["T_WHITESPACE"," ",308],["T_VARIABLE","$edit",308],",",["T_WHITESPACE"," ",308],["T_STRING","t",308],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new style'",308],")",")",";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","assertRaw",309],"(",["T_STRING","t",309],"(",["T_CONSTANT_ENCAPSED_STRING","'Style %name was created.'",309],",",["T_WHITESPACE"," ",309],"[",["T_CONSTANT_ENCAPSED_STRING","'%name'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$style_label",309],"]",")",")",";",["T_WHITESPACE","\n\n    ",309],["T_COMMENT","\/\/ Add two Ajax-enabled test effects.\n",311],["T_WHITESPACE","    ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","drupalPostForm",312],"(",["T_VARIABLE","$style_path",312],",",["T_WHITESPACE"," ",312],"[",["T_CONSTANT_ENCAPSED_STRING","'new'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'image_module_test_ajax'",312],"]",",",["T_WHITESPACE"," ",312],["T_STRING","t",312],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",312],")",")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","drupalPostForm",313],"(",["T_STRING","NULL",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$effect_edit",313],",",["T_WHITESPACE"," ",313],["T_STRING","t",313],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",313],")",")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","drupalPostForm",314],"(",["T_VARIABLE","$style_path",314],",",["T_WHITESPACE"," ",314],"[",["T_CONSTANT_ENCAPSED_STRING","'new'",314],["T_WHITESPACE"," ",314],["T_DOUBLE_ARROW","=>",314],["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'image_module_test_ajax'",314],"]",",",["T_WHITESPACE"," ",314],["T_STRING","t",314],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",314],")",")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","drupalPostForm",315],"(",["T_STRING","NULL",315],",",["T_WHITESPACE"," ",315],["T_VARIABLE","$effect_edit",315],",",["T_WHITESPACE"," ",315],["T_STRING","t",315],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",315],")",")",";",["T_WHITESPACE","\n\n    ",315],["T_COMMENT","\/\/ Load the saved image style.\n",317],["T_WHITESPACE","    ",318],["T_VARIABLE","$style",318],["T_WHITESPACE"," ",318],"=",["T_WHITESPACE"," ",318],["T_STRING","ImageStyle",318],["T_DOUBLE_COLON","::",318],["T_STRING","load",318],"(",["T_VARIABLE","$style_name",318],")",";",["T_WHITESPACE","\n\n    ",318],["T_COMMENT","\/\/ Edit back the effects.\n",320],["T_WHITESPACE","    ",321],["T_FOREACH","foreach",321],["T_WHITESPACE"," ",321],"(",["T_VARIABLE","$style",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getEffects",321],"(",")",["T_WHITESPACE"," ",321],["T_AS","as",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$uuid",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$effect",321],")",["T_WHITESPACE"," ",321],"{",["T_WHITESPACE","\n      ",321],["T_VARIABLE","$effect_path",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_VARIABLE","$admin_path",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_VARIABLE","$style_name",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'\/effects\/'",322],["T_WHITESPACE"," ",322],".",["T_WHITESPACE"," ",322],["T_VARIABLE","$uuid",322],";",["T_WHITESPACE","\n      ",322],["T_VARIABLE","$this",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","drupalGet",323],"(",["T_VARIABLE","$effect_path",323],")",";",["T_WHITESPACE","\n      ",323],["T_VARIABLE","$this",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","drupalPostAjaxForm",324],"(",["T_STRING","NULL",324],",",["T_WHITESPACE"," ",324],["T_VARIABLE","$effect_edit",324],",",["T_WHITESPACE"," ",324],"[",["T_CONSTANT_ENCAPSED_STRING","'op'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_STRING","t",324],"(",["T_CONSTANT_ENCAPSED_STRING","'Ajax refresh'",324],")","]",")",";",["T_WHITESPACE","\n      ",324],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","drupalPostForm",325],"(",["T_STRING","NULL",325],",",["T_WHITESPACE"," ",325],["T_VARIABLE","$effect_edit",325],",",["T_WHITESPACE"," ",325],["T_STRING","t",325],"(",["T_CONSTANT_ENCAPSED_STRING","'Update effect'",325],")",")",";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n  ",326],"}",["T_WHITESPACE","\n\n  ",328],["T_DOC_COMMENT","\/**\n   * Test deleting a style and choosing a replacement style.\n   *\/",330],["T_WHITESPACE","\n  ",332],["T_FUNCTION","function",333],["T_WHITESPACE"," ",333],["T_STRING","testStyleReplacement",333],"(",")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n    ",333],["T_COMMENT","\/\/ Create a new style.\n",334],["T_WHITESPACE","    ",335],["T_VARIABLE","$style_name",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_STRING","strtolower",335],"(",["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","randomMachineName",335],"(",["T_LNUMBER","10",335],")",")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$style_label",336],["T_WHITESPACE"," ",336],"=",["T_WHITESPACE"," ",336],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","randomString",336],"(",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$style",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_STRING","ImageStyle",337],["T_DOUBLE_COLON","::",337],["T_STRING","create",337],"(",["T_ARRAY","array",337],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$style_name",337],",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'label'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$style_label",337],")",")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$style",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","save",338],"(",")",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$style_path",339],["T_WHITESPACE"," ",339],"=",["T_WHITESPACE"," ",339],["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/manage\/'",339],";",["T_WHITESPACE","\n\n    ",339],["T_COMMENT","\/\/ Create an image field that uses the new style.\n",341],["T_WHITESPACE","    ",342],["T_VARIABLE","$field_name",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","strtolower",342],"(",["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","randomMachineName",342],"(",["T_LNUMBER","10",342],")",")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","createImageField",343],"(",["T_VARIABLE","$field_name",343],",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'article'",343],")",";",["T_WHITESPACE","\n    ",343],["T_STRING","entity_get_display",344],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'article'",344],",",["T_WHITESPACE"," ",344],["T_CONSTANT_ENCAPSED_STRING","'default'",344],")",["T_WHITESPACE","\n      ",344],["T_OBJECT_OPERATOR","->",345],["T_STRING","setComponent",345],"(",["T_VARIABLE","$field_name",345],",",["T_WHITESPACE"," ",345],["T_ARRAY","array",345],"(",["T_WHITESPACE","\n        ",345],["T_CONSTANT_ENCAPSED_STRING","'type'",346],["T_WHITESPACE"," ",346],["T_DOUBLE_ARROW","=>",346],["T_WHITESPACE"," ",346],["T_CONSTANT_ENCAPSED_STRING","'image'",346],",",["T_WHITESPACE","\n        ",346],["T_CONSTANT_ENCAPSED_STRING","'settings'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",["T_CONSTANT_ENCAPSED_STRING","'image_style'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$style_name",347],")",",",["T_WHITESPACE","\n      ",347],")",")",["T_WHITESPACE","\n      ",348],["T_OBJECT_OPERATOR","->",349],["T_STRING","save",349],"(",")",";",["T_WHITESPACE","\n\n    ",349],["T_COMMENT","\/\/ Create a new node with an image attached.\n",351],["T_WHITESPACE","    ",352],["T_VARIABLE","$test_image",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],["T_STRING","current",352],"(",["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","drupalGetTestFiles",352],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",352],")",")",";",["T_WHITESPACE","\n    ",352],["T_VARIABLE","$nid",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","uploadNodeImage",353],"(",["T_VARIABLE","$test_image",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$field_name",353],",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'article'",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","randomMachineName",353],"(",")",")",";",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$node",354],["T_WHITESPACE"," ",354],"=",["T_WHITESPACE"," ",354],["T_STRING","Node",354],["T_DOUBLE_COLON","::",354],["T_STRING","load",354],"(",["T_VARIABLE","$nid",354],")",";",["T_WHITESPACE","\n\n    ",354],["T_COMMENT","\/\/ Get node field original image URI.\n",356],["T_WHITESPACE","    ",357],["T_VARIABLE","$fid",357],["T_WHITESPACE"," ",357],"=",["T_WHITESPACE"," ",357],["T_VARIABLE","$node",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","get",357],"(",["T_VARIABLE","$field_name",357],")",["T_OBJECT_OPERATOR","->",357],["T_STRING","target_id",357],";",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$original_uri",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","File",358],["T_DOUBLE_COLON","::",358],["T_STRING","load",358],"(",["T_VARIABLE","$fid",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","getFileUri",358],"(",")",";",["T_WHITESPACE","\n\n    ",358],["T_COMMENT","\/\/ Test that image is displayed using newly created style.\n",360],["T_WHITESPACE","    ",361],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","drupalGet",361],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_VARIABLE","$nid",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","assertRaw",362],"(",["T_STRING","file_url_transform_relative",362],"(",["T_VARIABLE","$style",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","buildUrl",362],"(",["T_VARIABLE","$original_uri",362],")",")",",",["T_WHITESPACE"," ",362],["T_STRING","format_string",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Image displayed using style @style.'",362],",",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_CONSTANT_ENCAPSED_STRING","'@style'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$style_name",362],")",")",")",";",["T_WHITESPACE","\n\n    ",362],["T_COMMENT","\/\/ Rename the style and make sure the image field is updated.\n",364],["T_WHITESPACE","    ",365],["T_VARIABLE","$new_style_name",365],["T_WHITESPACE"," ",365],"=",["T_WHITESPACE"," ",365],["T_STRING","strtolower",365],"(",["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","randomMachineName",365],"(",["T_LNUMBER","10",365],")",")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$new_style_label",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","randomString",366],"(",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$edit",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_ARRAY","array",367],"(",["T_WHITESPACE","\n      ",367],["T_CONSTANT_ENCAPSED_STRING","'name'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$new_style_name",368],",",["T_WHITESPACE","\n      ",368],["T_CONSTANT_ENCAPSED_STRING","'label'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$new_style_label",369],",",["T_WHITESPACE","\n    ",369],")",";",["T_WHITESPACE","\n    ",370],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","drupalPostForm",371],"(",["T_VARIABLE","$style_path",371],["T_WHITESPACE"," ",371],".",["T_WHITESPACE"," ",371],["T_VARIABLE","$style_name",371],",",["T_WHITESPACE"," ",371],["T_VARIABLE","$edit",371],",",["T_WHITESPACE"," ",371],["T_STRING","t",371],"(",["T_CONSTANT_ENCAPSED_STRING","'Update style'",371],")",")",";",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","assertText",372],"(",["T_STRING","t",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Changes to the style have been saved.'",372],")",",",["T_WHITESPACE"," ",372],["T_STRING","format_string",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Style %name was renamed to %new_name.'",372],",",["T_WHITESPACE"," ",372],["T_ARRAY","array",372],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$style_name",372],",",["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","'%new_name'",372],["T_WHITESPACE"," ",372],["T_DOUBLE_ARROW","=>",372],["T_WHITESPACE"," ",372],["T_VARIABLE","$new_style_name",372],")",")",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","drupalGet",373],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",373],["T_WHITESPACE"," ",373],".",["T_WHITESPACE"," ",373],["T_VARIABLE","$nid",373],")",";",["T_WHITESPACE","\n\n    ",373],["T_COMMENT","\/\/ Reload the image style using the new name.\n",375],["T_WHITESPACE","    ",376],["T_VARIABLE","$style",376],["T_WHITESPACE"," ",376],"=",["T_WHITESPACE"," ",376],["T_STRING","ImageStyle",376],["T_DOUBLE_COLON","::",376],["T_STRING","load",376],"(",["T_VARIABLE","$new_style_name",376],")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","assertRaw",377],"(",["T_STRING","file_url_transform_relative",377],"(",["T_VARIABLE","$style",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","buildUrl",377],"(",["T_VARIABLE","$original_uri",377],")",")",",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'Image displayed using style replacement style.'",377],")",";",["T_WHITESPACE","\n\n    ",377],["T_COMMENT","\/\/ Delete the style and choose a replacement style.\n",379],["T_WHITESPACE","    ",380],["T_VARIABLE","$edit",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_ARRAY","array",380],"(",["T_WHITESPACE","\n      ",380],["T_CONSTANT_ENCAPSED_STRING","'replacement'",381],["T_WHITESPACE"," ",381],["T_DOUBLE_ARROW","=>",381],["T_WHITESPACE"," ",381],["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",381],",",["T_WHITESPACE","\n    ",381],")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","drupalPostForm",383],"(",["T_VARIABLE","$style_path",383],["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],["T_VARIABLE","$new_style_name",383],["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'\/delete'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$edit",383],",",["T_WHITESPACE"," ",383],["T_STRING","t",383],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",383],")",")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$message",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_STRING","t",384],"(",["T_CONSTANT_ENCAPSED_STRING","'The image style %name has been deleted.'",384],",",["T_WHITESPACE"," ",384],["T_ARRAY","array",384],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",384],["T_WHITESPACE"," ",384],["T_DOUBLE_ARROW","=>",384],["T_WHITESPACE"," ",384],["T_VARIABLE","$new_style_label",384],")",")",";",["T_WHITESPACE","\n    ",384],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","assertRaw",385],"(",["T_VARIABLE","$message",385],")",";",["T_WHITESPACE","\n\n    ",385],["T_VARIABLE","$replacement_style",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_STRING","ImageStyle",387],["T_DOUBLE_COLON","::",387],["T_STRING","load",387],"(",["T_CONSTANT_ENCAPSED_STRING","'thumbnail'",387],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","drupalGet",388],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_VARIABLE","$nid",388],")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","assertRaw",389],"(",["T_STRING","file_url_transform_relative",389],"(",["T_VARIABLE","$replacement_style",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","buildUrl",389],"(",["T_VARIABLE","$original_uri",389],")",")",",",["T_WHITESPACE"," ",389],["T_CONSTANT_ENCAPSED_STRING","'Image displayed using style replacement style.'",389],")",";",["T_WHITESPACE","\n  ",389],"}",["T_WHITESPACE","\n\n  ",390],["T_DOC_COMMENT","\/**\n   * Verifies that editing an image effect does not cause it to be duplicated.\n   *\/",392],["T_WHITESPACE","\n  ",394],["T_FUNCTION","function",395],["T_WHITESPACE"," ",395],["T_STRING","testEditEffect",395],"(",")",["T_WHITESPACE"," ",395],"{",["T_WHITESPACE","\n    ",395],["T_COMMENT","\/\/ Add a scale effect.\n",396],["T_WHITESPACE","    ",397],["T_VARIABLE","$style_name",397],["T_WHITESPACE"," ",397],"=",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'test_style_effect_edit'",397],";",["T_WHITESPACE","\n    ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","drupalGet",398],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/add'",398],")",";",["T_WHITESPACE","\n    ",398],["T_VARIABLE","$this",399],["T_OBJECT_OPERATOR","->",399],["T_STRING","drupalPostForm",399],"(",["T_STRING","NULL",399],",",["T_WHITESPACE"," ",399],["T_ARRAY","array",399],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'Test style effect edit'",399],",",["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'name'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$style_name",399],")",",",["T_WHITESPACE"," ",399],["T_STRING","t",399],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new style'",399],")",")",";",["T_WHITESPACE","\n    ",399],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","drupalPostForm",400],"(",["T_STRING","NULL",400],",",["T_WHITESPACE"," ",400],["T_ARRAY","array",400],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'image_scale_and_crop'",400],")",",",["T_WHITESPACE"," ",400],["T_STRING","t",400],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",400],")",")",";",["T_WHITESPACE","\n    ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","drupalPostForm",401],"(",["T_STRING","NULL",401],",",["T_WHITESPACE"," ",401],["T_ARRAY","array",401],"(",["T_CONSTANT_ENCAPSED_STRING","'data[width]'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'300'",401],",",["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'data[height]'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_CONSTANT_ENCAPSED_STRING","'200'",401],")",",",["T_WHITESPACE"," ",401],["T_STRING","t",401],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",401],")",")",";",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","assertText",402],"(",["T_STRING","t",402],"(",["T_CONSTANT_ENCAPSED_STRING","'Scale and crop 300\u00c3\u0097200'",402],")",")",";",["T_WHITESPACE","\n\n    ",402],["T_COMMENT","\/\/ There should normally be only one edit link on this page initially.\n",404],["T_WHITESPACE","    ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","clickLink",405],"(",["T_STRING","t",405],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit'",405],")",")",";",["T_WHITESPACE","\n    ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","drupalPostForm",406],"(",["T_STRING","NULL",406],",",["T_WHITESPACE"," ",406],["T_ARRAY","array",406],"(",["T_CONSTANT_ENCAPSED_STRING","'data[width]'",406],["T_WHITESPACE"," ",406],["T_DOUBLE_ARROW","=>",406],["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'360'",406],",",["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'data[height]'",406],["T_WHITESPACE"," ",406],["T_DOUBLE_ARROW","=>",406],["T_WHITESPACE"," ",406],["T_CONSTANT_ENCAPSED_STRING","'240'",406],")",",",["T_WHITESPACE"," ",406],["T_STRING","t",406],"(",["T_CONSTANT_ENCAPSED_STRING","'Update effect'",406],")",")",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","assertText",407],"(",["T_STRING","t",407],"(",["T_CONSTANT_ENCAPSED_STRING","'Scale and crop 360\u00c3\u0097240'",407],")",")",";",["T_WHITESPACE","\n\n    ",407],["T_COMMENT","\/\/ Check that the previous effect is replaced.\n",409],["T_WHITESPACE","    ",410],["T_VARIABLE","$this",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","assertNoText",410],"(",["T_STRING","t",410],"(",["T_CONSTANT_ENCAPSED_STRING","'Scale and crop 300\u00c3\u0097200'",410],")",")",";",["T_WHITESPACE","\n\n    ",410],["T_COMMENT","\/\/ Add another scale effect.\n",412],["T_WHITESPACE","    ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","drupalGet",413],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/add'",413],")",";",["T_WHITESPACE","\n    ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","drupalPostForm",414],"(",["T_STRING","NULL",414],",",["T_WHITESPACE"," ",414],["T_ARRAY","array",414],"(",["T_CONSTANT_ENCAPSED_STRING","'label'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'Test style scale edit scale'",414],",",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'name'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'test_style_scale_edit_scale'",414],")",",",["T_WHITESPACE"," ",414],["T_STRING","t",414],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new style'",414],")",")",";",["T_WHITESPACE","\n    ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","drupalPostForm",415],"(",["T_STRING","NULL",415],",",["T_WHITESPACE"," ",415],["T_ARRAY","array",415],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",415],["T_WHITESPACE"," ",415],["T_DOUBLE_ARROW","=>",415],["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'image_scale'",415],")",",",["T_WHITESPACE"," ",415],["T_STRING","t",415],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",415],")",")",";",["T_WHITESPACE","\n    ",415],["T_VARIABLE","$this",416],["T_OBJECT_OPERATOR","->",416],["T_STRING","drupalPostForm",416],"(",["T_STRING","NULL",416],",",["T_WHITESPACE"," ",416],["T_ARRAY","array",416],"(",["T_CONSTANT_ENCAPSED_STRING","'data[width]'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'12'",416],",",["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'data[height]'",416],["T_WHITESPACE"," ",416],["T_DOUBLE_ARROW","=>",416],["T_WHITESPACE"," ",416],["T_CONSTANT_ENCAPSED_STRING","'19'",416],")",",",["T_WHITESPACE"," ",416],["T_STRING","t",416],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",416],")",")",";",["T_WHITESPACE","\n\n    ",416],["T_COMMENT","\/\/ Edit the scale effect that was just added.\n",418],["T_WHITESPACE","    ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","clickLink",419],"(",["T_STRING","t",419],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit'",419],")",")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","drupalPostForm",420],"(",["T_STRING","NULL",420],",",["T_WHITESPACE"," ",420],["T_ARRAY","array",420],"(",["T_CONSTANT_ENCAPSED_STRING","'data[width]'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'24'",420],",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'data[height]'",420],["T_WHITESPACE"," ",420],["T_DOUBLE_ARROW","=>",420],["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'19'",420],")",",",["T_WHITESPACE"," ",420],["T_STRING","t",420],"(",["T_CONSTANT_ENCAPSED_STRING","'Update effect'",420],")",")",";",["T_WHITESPACE","\n    ",420],["T_VARIABLE","$this",421],["T_OBJECT_OPERATOR","->",421],["T_STRING","drupalPostForm",421],"(",["T_STRING","NULL",421],",",["T_WHITESPACE"," ",421],["T_ARRAY","array",421],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",421],["T_WHITESPACE"," ",421],["T_DOUBLE_ARROW","=>",421],["T_WHITESPACE"," ",421],["T_CONSTANT_ENCAPSED_STRING","'image_scale'",421],")",",",["T_WHITESPACE"," ",421],["T_STRING","t",421],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",421],")",")",";",["T_WHITESPACE","\n\n    ",421],["T_COMMENT","\/\/ Add another scale effect and make sure both exist.\n",423],["T_WHITESPACE","    ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","drupalPostForm",424],"(",["T_STRING","NULL",424],",",["T_WHITESPACE"," ",424],["T_ARRAY","array",424],"(",["T_CONSTANT_ENCAPSED_STRING","'data[width]'",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'12'",424],",",["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'data[height]'",424],["T_WHITESPACE"," ",424],["T_DOUBLE_ARROW","=>",424],["T_WHITESPACE"," ",424],["T_CONSTANT_ENCAPSED_STRING","'19'",424],")",",",["T_WHITESPACE"," ",424],["T_STRING","t",424],"(",["T_CONSTANT_ENCAPSED_STRING","'Add effect'",424],")",")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","assertText",425],"(",["T_STRING","t",425],"(",["T_CONSTANT_ENCAPSED_STRING","'Scale 24\u00c3\u009719'",425],")",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","assertText",426],"(",["T_STRING","t",426],"(",["T_CONSTANT_ENCAPSED_STRING","'Scale 12\u00c3\u009719'",426],")",")",";",["T_WHITESPACE","\n\n    ",426],["T_COMMENT","\/\/ Try to edit a nonexistent effect.\n",428],["T_WHITESPACE","    ",429],["T_VARIABLE","$uuid",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$this",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","container",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","get",429],"(",["T_CONSTANT_ENCAPSED_STRING","'uuid'",429],")",";",["T_WHITESPACE","\n    ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","drupalGet",430],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles\/manage\/'",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_VARIABLE","$style_name",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'\/effects\/'",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_VARIABLE","$uuid",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","generate",430],"(",")",")",";",["T_WHITESPACE","\n    ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","assertResponse",431],"(",["T_LNUMBER","404",431],")",";",["T_WHITESPACE","\n  ",431],"}",["T_WHITESPACE","\n\n  ",432],["T_DOC_COMMENT","\/**\n   * Test flush user interface.\n   *\/",434],["T_WHITESPACE","\n  ",436],["T_PUBLIC","public",437],["T_WHITESPACE"," ",437],["T_FUNCTION","function",437],["T_WHITESPACE"," ",437],["T_STRING","testFlushUserInterface",437],"(",")",["T_WHITESPACE"," ",437],"{",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$admin_path",438],["T_WHITESPACE"," ",438],"=",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles'",438],";",["T_WHITESPACE","\n\n    ",438],["T_COMMENT","\/\/ Create a new style.\n",440],["T_WHITESPACE","    ",441],["T_VARIABLE","$style_name",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","strtolower",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","randomMachineName",441],"(",["T_LNUMBER","10",441],")",")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$style",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_STRING","ImageStyle",442],["T_DOUBLE_COLON","::",442],["T_STRING","create",442],"(",["T_ARRAY","array",442],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$style_name",442],",",["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'label'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","randomString",442],"(",")",")",")",";",["T_WHITESPACE","\n    ",442],["T_VARIABLE","$style",443],["T_OBJECT_OPERATOR","->",443],["T_STRING","save",443],"(",")",";",["T_WHITESPACE","\n\n    ",443],["T_COMMENT","\/\/ Create an image to make sure it gets flushed.\n",445],["T_WHITESPACE","    ",446],["T_VARIABLE","$files",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","drupalGetTestFiles",446],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",446],")",";",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$image_uri",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$files",447],"[",["T_LNUMBER","0",447],"]",["T_OBJECT_OPERATOR","->",447],["T_STRING","uri",447],";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$derivative_uri",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_VARIABLE","$style",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","buildUri",448],"(",["T_VARIABLE","$image_uri",448],")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","assertTrue",449],"(",["T_VARIABLE","$style",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","createDerivative",449],"(",["T_VARIABLE","$image_uri",449],",",["T_WHITESPACE"," ",449],["T_VARIABLE","$derivative_uri",449],")",")",";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","assertEqual",450],"(",["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","getImageCount",450],"(",["T_VARIABLE","$style",450],")",",",["T_WHITESPACE"," ",450],["T_LNUMBER","1",450],")",";",["T_WHITESPACE","\n\n    ",450],["T_COMMENT","\/\/ Go to image styles list page and check if the flush operation link\n",452],["T_WHITESPACE","    ",453],["T_COMMENT","\/\/ exists.\n",453],["T_WHITESPACE","    ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","drupalGet",454],"(",["T_VARIABLE","$admin_path",454],")",";",["T_WHITESPACE","\n    ",454],["T_VARIABLE","$flush_path",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_VARIABLE","$admin_path",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'\/manage\/'",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_VARIABLE","$style_name",455],["T_WHITESPACE"," ",455],".",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'\/flush'",455],";",["T_WHITESPACE","\n    ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","assertLinkByHref",456],"(",["T_VARIABLE","$flush_path",456],")",";",["T_WHITESPACE","\n\n    ",456],["T_COMMENT","\/\/ Flush the image style derivatives using the user interface.\n",458],["T_WHITESPACE","    ",459],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","drupalPostForm",459],"(",["T_VARIABLE","$flush_path",459],",",["T_WHITESPACE"," ",459],["T_ARRAY","array",459],"(",")",",",["T_WHITESPACE"," ",459],["T_STRING","t",459],"(",["T_CONSTANT_ENCAPSED_STRING","'Flush'",459],")",")",";",["T_WHITESPACE","\n\n    ",459],["T_COMMENT","\/\/ The derivative image file should have been deleted.\n",461],["T_WHITESPACE","    ",462],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","assertEqual",462],"(",["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","getImageCount",462],"(",["T_VARIABLE","$style",462],")",",",["T_WHITESPACE"," ",462],["T_LNUMBER","0",462],")",";",["T_WHITESPACE","\n  ",462],"}",["T_WHITESPACE","\n\n  ",463],["T_DOC_COMMENT","\/**\n   * Tests image style configuration import that does a delete.\n   *\/",465],["T_WHITESPACE","\n  ",467],["T_FUNCTION","function",468],["T_WHITESPACE"," ",468],["T_STRING","testConfigImport",468],"(",")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n    ",468],["T_COMMENT","\/\/ Create a new style.\n",469],["T_WHITESPACE","    ",470],["T_VARIABLE","$style_name",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_STRING","strtolower",470],"(",["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","randomMachineName",470],"(",["T_LNUMBER","10",470],")",")",";",["T_WHITESPACE","\n    ",470],["T_VARIABLE","$style_label",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","randomString",471],"(",")",";",["T_WHITESPACE","\n    ",471],["T_VARIABLE","$style",472],["T_WHITESPACE"," ",472],"=",["T_WHITESPACE"," ",472],["T_STRING","ImageStyle",472],["T_DOUBLE_COLON","::",472],["T_STRING","create",472],"(",["T_ARRAY","array",472],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$style_name",472],",",["T_WHITESPACE"," ",472],["T_CONSTANT_ENCAPSED_STRING","'label'",472],["T_WHITESPACE"," ",472],["T_DOUBLE_ARROW","=>",472],["T_WHITESPACE"," ",472],["T_VARIABLE","$style_label",472],")",")",";",["T_WHITESPACE","\n    ",472],["T_VARIABLE","$style",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","save",473],"(",")",";",["T_WHITESPACE","\n\n    ",473],["T_COMMENT","\/\/ Create an image field that uses the new style.\n",475],["T_WHITESPACE","    ",476],["T_VARIABLE","$field_name",476],["T_WHITESPACE"," ",476],"=",["T_WHITESPACE"," ",476],["T_STRING","strtolower",476],"(",["T_VARIABLE","$this",476],["T_OBJECT_OPERATOR","->",476],["T_STRING","randomMachineName",476],"(",["T_LNUMBER","10",476],")",")",";",["T_WHITESPACE","\n    ",476],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","createImageField",477],"(",["T_VARIABLE","$field_name",477],",",["T_WHITESPACE"," ",477],["T_CONSTANT_ENCAPSED_STRING","'article'",477],")",";",["T_WHITESPACE","\n    ",477],["T_STRING","entity_get_display",478],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",478],",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'article'",478],",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'default'",478],")",["T_WHITESPACE","\n      ",478],["T_OBJECT_OPERATOR","->",479],["T_STRING","setComponent",479],"(",["T_VARIABLE","$field_name",479],",",["T_WHITESPACE"," ",479],["T_ARRAY","array",479],"(",["T_WHITESPACE","\n        ",479],["T_CONSTANT_ENCAPSED_STRING","'type'",480],["T_WHITESPACE"," ",480],["T_DOUBLE_ARROW","=>",480],["T_WHITESPACE"," ",480],["T_CONSTANT_ENCAPSED_STRING","'image'",480],",",["T_WHITESPACE","\n        ",480],["T_CONSTANT_ENCAPSED_STRING","'settings'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_CONSTANT_ENCAPSED_STRING","'image_style'",481],["T_WHITESPACE"," ",481],["T_DOUBLE_ARROW","=>",481],["T_WHITESPACE"," ",481],["T_VARIABLE","$style_name",481],")",",",["T_WHITESPACE","\n      ",481],")",")",["T_WHITESPACE","\n      ",482],["T_OBJECT_OPERATOR","->",483],["T_STRING","save",483],"(",")",";",["T_WHITESPACE","\n\n    ",483],["T_COMMENT","\/\/ Create a new node with an image attached.\n",485],["T_WHITESPACE","    ",486],["T_VARIABLE","$test_image",486],["T_WHITESPACE"," ",486],"=",["T_WHITESPACE"," ",486],["T_STRING","current",486],"(",["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","drupalGetTestFiles",486],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",486],")",")",";",["T_WHITESPACE","\n    ",486],["T_VARIABLE","$nid",487],["T_WHITESPACE"," ",487],"=",["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","uploadNodeImage",487],"(",["T_VARIABLE","$test_image",487],",",["T_WHITESPACE"," ",487],["T_VARIABLE","$field_name",487],",",["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'article'",487],",",["T_WHITESPACE"," ",487],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","randomMachineName",487],"(",")",")",";",["T_WHITESPACE","\n    ",487],["T_VARIABLE","$node",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_STRING","Node",488],["T_DOUBLE_COLON","::",488],["T_STRING","load",488],"(",["T_VARIABLE","$nid",488],")",";",["T_WHITESPACE","\n\n    ",488],["T_COMMENT","\/\/ Get node field original image URI.\n",490],["T_WHITESPACE","    ",491],["T_VARIABLE","$fid",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$node",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","get",491],"(",["T_VARIABLE","$field_name",491],")",["T_OBJECT_OPERATOR","->",491],["T_STRING","target_id",491],";",["T_WHITESPACE","\n    ",491],["T_VARIABLE","$original_uri",492],["T_WHITESPACE"," ",492],"=",["T_WHITESPACE"," ",492],["T_STRING","File",492],["T_DOUBLE_COLON","::",492],["T_STRING","load",492],"(",["T_VARIABLE","$fid",492],")",["T_OBJECT_OPERATOR","->",492],["T_STRING","getFileUri",492],"(",")",";",["T_WHITESPACE","\n\n    ",492],["T_COMMENT","\/\/ Test that image is displayed using newly created style.\n",494],["T_WHITESPACE","    ",495],["T_VARIABLE","$this",495],["T_OBJECT_OPERATOR","->",495],["T_STRING","drupalGet",495],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",495],["T_WHITESPACE"," ",495],".",["T_WHITESPACE"," ",495],["T_VARIABLE","$nid",495],")",";",["T_WHITESPACE","\n    ",495],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","assertRaw",496],"(",["T_STRING","file_url_transform_relative",496],"(",["T_VARIABLE","$style",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","buildUrl",496],"(",["T_VARIABLE","$original_uri",496],")",")",",",["T_WHITESPACE"," ",496],["T_STRING","format_string",496],"(",["T_CONSTANT_ENCAPSED_STRING","'Image displayed using style @style.'",496],",",["T_WHITESPACE"," ",496],["T_ARRAY","array",496],"(",["T_CONSTANT_ENCAPSED_STRING","'@style'",496],["T_WHITESPACE"," ",496],["T_DOUBLE_ARROW","=>",496],["T_WHITESPACE"," ",496],["T_VARIABLE","$style_name",496],")",")",")",";",["T_WHITESPACE","\n\n    ",496],["T_COMMENT","\/\/ Copy config to sync, and delete the image style.\n",498],["T_WHITESPACE","    ",499],["T_VARIABLE","$sync",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","container",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","get",499],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage.sync'",499],")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$active",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","container",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","get",500],"(",["T_CONSTANT_ENCAPSED_STRING","'config.storage'",500],")",";",["T_WHITESPACE","\n    ",500],["T_COMMENT","\/\/ Remove the image field from the display, to avoid a dependency error\n",501],["T_WHITESPACE","    ",502],["T_COMMENT","\/\/ during import.\n",502],["T_WHITESPACE","    ",503],["T_STRING","EntityViewDisplay",503],["T_DOUBLE_COLON","::",503],["T_STRING","load",503],"(",["T_CONSTANT_ENCAPSED_STRING","'node.article.default'",503],")",["T_WHITESPACE","\n      ",503],["T_OBJECT_OPERATOR","->",504],["T_STRING","removeComponent",504],"(",["T_VARIABLE","$field_name",504],")",["T_WHITESPACE","\n      ",504],["T_OBJECT_OPERATOR","->",505],["T_STRING","save",505],"(",")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","copyConfig",506],"(",["T_VARIABLE","$active",506],",",["T_WHITESPACE"," ",506],["T_VARIABLE","$sync",506],")",";",["T_WHITESPACE","\n    ",506],["T_VARIABLE","$sync",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","delete",507],"(",["T_CONSTANT_ENCAPSED_STRING","'image.style.'",507],["T_WHITESPACE"," ",507],".",["T_WHITESPACE"," ",507],["T_VARIABLE","$style_name",507],")",";",["T_WHITESPACE","\n    ",507],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","configImporter",508],"(",")",["T_OBJECT_OPERATOR","->",508],["T_STRING","import",508],"(",")",";",["T_WHITESPACE","\n\n    ",508],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","assertFalse",510],"(",["T_STRING","ImageStyle",510],["T_DOUBLE_COLON","::",510],["T_STRING","load",510],"(",["T_VARIABLE","$style_name",510],")",",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'Style deleted after config import.'",510],")",";",["T_WHITESPACE","\n    ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","assertEqual",511],"(",["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","getImageCount",511],"(",["T_VARIABLE","$style",511],")",",",["T_WHITESPACE"," ",511],["T_LNUMBER","0",511],",",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'Image style was flushed after being deleted by config import.'",511],")",";",["T_WHITESPACE","\n  ",511],"}",["T_WHITESPACE","\n\n  ",512],["T_DOC_COMMENT","\/**\n   * Tests access for the image style listing.\n   *\/",514],["T_WHITESPACE","\n  ",516],["T_PUBLIC","public",517],["T_WHITESPACE"," ",517],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","testImageStyleAccess",517],"(",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n    ",517],["T_VARIABLE","$style",518],["T_WHITESPACE"," ",518],"=",["T_WHITESPACE"," ",518],["T_STRING","ImageStyle",518],["T_DOUBLE_COLON","::",518],["T_STRING","create",518],"(",["T_ARRAY","array",518],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'style_foo'",518],",",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'label'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","randomString",518],"(",")",")",")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$style",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","save",519],"(",")",";",["T_WHITESPACE","\n\n    ",519],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","drupalGet",521],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/media\/image-styles'",521],")",";",["T_WHITESPACE","\n    ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","clickLink",522],"(",["T_STRING","t",522],"(",["T_CONSTANT_ENCAPSED_STRING","'Edit'",522],")",")",";",["T_WHITESPACE","\n    ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","assertRaw",523],"(",["T_STRING","t",523],"(",["T_CONSTANT_ENCAPSED_STRING","'Select a new effect'",523],")",")",";",["T_WHITESPACE","\n  ",523],"}",["T_WHITESPACE","\n\n",524],"}",["T_WHITESPACE","\n",526]]
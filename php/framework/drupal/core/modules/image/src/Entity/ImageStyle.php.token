[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","image",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Entity",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Cache",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Config",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigEntityBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityStorageInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityWithPluginCollectionInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Routing",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RequestHelper",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Site",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Settings",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Url",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","image",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ImageEffectPluginCollection",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","image",13],["T_NS_SEPARATOR","\\",13],["T_STRING","ImageEffectInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","image",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ImageStyleInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Utility",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Crypt",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Drupal",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Utility",16],["T_NS_SEPARATOR","\\",16],["T_STRING","UrlHelper",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Drupal",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Core",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StreamWrapper",17],["T_NS_SEPARATOR","\\",17],["T_STRING","StreamWrapperInterface",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","DependencyInjection",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Exception",18],["T_NS_SEPARATOR","\\",18],["T_STRING","ServiceNotFoundException",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Drupal",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Core",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Entity",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Entity",19],["T_NS_SEPARATOR","\\",19],["T_STRING","EntityViewDisplay",19],";",["T_WHITESPACE","\n",19],["T_DOC_COMMENT","\/**\n * Defines an image style configuration entity.\n *\n * @ConfigEntityType(\n *   id = \"image_style\",\n *   label = @Translation(\"Image style\"),\n *   handlers = {\n *     \"form\" = {\n *       \"add\" = \"Drupal\\image\\Form\\ImageStyleAddForm\",\n *       \"edit\" = \"Drupal\\image\\Form\\ImageStyleEditForm\",\n *       \"delete\" = \"Drupal\\image\\Form\\ImageStyleDeleteForm\",\n *       \"flush\" = \"Drupal\\image\\Form\\ImageStyleFlushForm\"\n *     },\n *     \"list_builder\" = \"Drupal\\image\\ImageStyleListBuilder\",\n *     \"storage\" = \"Drupal\\image\\ImageStyleStorage\",\n *   },\n *   admin_permission = \"administer image styles\",\n *   config_prefix = \"style\",\n *   entity_keys = {\n *     \"id\" = \"name\",\n *     \"label\" = \"label\"\n *   },\n *   links = {\n *     \"flush-form\" = \"\/admin\/config\/media\/image-styles\/manage\/{image_style}\/flush\",\n *     \"edit-form\" = \"\/admin\/config\/media\/image-styles\/manage\/{image_style}\",\n *     \"delete-form\" = \"\/admin\/config\/media\/image-styles\/manage\/{image_style}\/delete\",\n *     \"collection\" = \"\/admin\/config\/media\/image-styles\",\n *   },\n *   config_export = {\n *     \"name\",\n *     \"label\",\n *     \"effects\",\n *   }\n * )\n *\/",20],["T_WHITESPACE","\n",54],["T_CLASS","class",55],["T_WHITESPACE"," ",55],["T_STRING","ImageStyle",55],["T_WHITESPACE"," ",55],["T_EXTENDS","extends",55],["T_WHITESPACE"," ",55],["T_STRING","ConfigEntityBase",55],["T_WHITESPACE"," ",55],["T_IMPLEMENTS","implements",55],["T_WHITESPACE"," ",55],["T_STRING","ImageStyleInterface",55],",",["T_WHITESPACE"," ",55],["T_STRING","EntityWithPluginCollectionInterface",55],["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * The name of the image style.\n   *\n   * @var string\n   *\/",57],["T_WHITESPACE","\n  ",61],["T_PROTECTED","protected",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$name",62],";",["T_WHITESPACE","\n\n  ",62],["T_DOC_COMMENT","\/**\n   * The image style label.\n   *\n   * @var string\n   *\/",64],["T_WHITESPACE","\n  ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$label",69],";",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * The array of image effects for this image style.\n   *\n   * @var array\n   *\/",71],["T_WHITESPACE","\n  ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$effects",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",")",";",["T_WHITESPACE","\n\n  ",76],["T_DOC_COMMENT","\/**\n   * Holds the collection of image effects that are used by this image style.\n   *\n   * @var \\Drupal\\image\\ImageEffectPluginCollection\n   *\/",78],["T_WHITESPACE","\n  ",82],["T_PROTECTED","protected",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$effectsCollection",83],";",["T_WHITESPACE","\n\n  ",83],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",85],["T_WHITESPACE","\n  ",87],["T_PUBLIC","public",88],["T_WHITESPACE"," ",88],["T_FUNCTION","function",88],["T_WHITESPACE"," ",88],["T_STRING","id",88],"(",")",["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n    ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","name",89],";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","postSave",95],"(",["T_STRING","EntityStorageInterface",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$storage",95],",",["T_WHITESPACE"," ",95],["T_VARIABLE","$update",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","TRUE",95],")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_STRING","parent",96],["T_DOUBLE_COLON","::",96],["T_STRING","postSave",96],"(",["T_VARIABLE","$storage",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$update",96],")",";",["T_WHITESPACE","\n\n    ",96],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_VARIABLE","$update",98],")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_IF","if",99],["T_WHITESPACE"," ",99],"(","!",["T_EMPTY","empty",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","original",99],")",["T_WHITESPACE"," ",99],["T_BOOLEAN_AND","&&",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","id",99],"(",")",["T_WHITESPACE"," ",99],["T_IS_NOT_IDENTICAL","!==",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","original",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","id",99],"(",")",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n        ",99],["T_COMMENT","\/\/ The old image style name needs flushing after a rename.\n",100],["T_WHITESPACE","        ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","original",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","flush",101],"(",")",";",["T_WHITESPACE","\n        ",101],["T_COMMENT","\/\/ Update field settings if necessary.\n",102],["T_WHITESPACE","        ",103],["T_IF","if",103],["T_WHITESPACE"," ",103],"(","!",["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isSyncing",103],"(",")",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n          ",103],["T_STATIC","static",104],["T_DOUBLE_COLON","::",104],["T_STRING","replaceImageStyle",104],"(",["T_VARIABLE","$this",104],")",";",["T_WHITESPACE","\n        ",104],"}",["T_WHITESPACE","\n      ",105],"}",["T_WHITESPACE","\n      ",106],["T_ELSE","else",107],["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n        ",107],["T_COMMENT","\/\/ Flush image style when updating without changing the name.\n",108],["T_WHITESPACE","        ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","flush",109],"(",")",";",["T_WHITESPACE","\n      ",109],"}",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",114],["T_WHITESPACE","\n  ",116],["T_PUBLIC","public",117],["T_WHITESPACE"," ",117],["T_STATIC","static",117],["T_WHITESPACE"," ",117],["T_FUNCTION","function",117],["T_WHITESPACE"," ",117],["T_STRING","postDelete",117],"(",["T_STRING","EntityStorageInterface",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$storage",117],",",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$entities",117],")",["T_WHITESPACE"," ",117],"{",["T_WHITESPACE","\n    ",117],["T_STRING","parent",118],["T_DOUBLE_COLON","::",118],["T_STRING","postDelete",118],"(",["T_VARIABLE","$storage",118],",",["T_WHITESPACE"," ",118],["T_VARIABLE","$entities",118],")",";",["T_WHITESPACE","\n\n    ",118],["T_DOC_COMMENT","\/** @var \\Drupal\\image\\ImageStyleInterface[] $entities *\/",120],["T_WHITESPACE","\n    ",120],["T_FOREACH","foreach",121],["T_WHITESPACE"," ",121],"(",["T_VARIABLE","$entities",121],["T_WHITESPACE"," ",121],["T_AS","as",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$style",121],")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n      ",121],["T_COMMENT","\/\/ Flush cached media for the deleted style.\n",122],["T_WHITESPACE","      ",123],["T_VARIABLE","$style",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","flush",123],"(",")",";",["T_WHITESPACE","\n      ",123],["T_COMMENT","\/\/ Clear the replacement ID, if one has been previously stored.\n",124],["T_WHITESPACE","      ",125],["T_DOC_COMMENT","\/** @var \\Drupal\\image\\ImageStyleStorageInterface $storage *\/",125],["T_WHITESPACE","\n      ",125],["T_VARIABLE","$storage",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","clearReplacementId",126],"(",["T_VARIABLE","$style",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","id",126],"(",")",")",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n  ",127],"}",["T_WHITESPACE","\n\n  ",128],["T_DOC_COMMENT","\/**\n   * Update field settings if the image style name is changed.\n   *\n   * @param \\Drupal\\image\\ImageStyleInterface $style\n   *   The image style.\n   *\/",130],["T_WHITESPACE","\n  ",135],["T_PROTECTED","protected",136],["T_WHITESPACE"," ",136],["T_STATIC","static",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","replaceImageStyle",136],"(",["T_STRING","ImageStyleInterface",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$style",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n    ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$style",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","id",137],"(",")",["T_WHITESPACE"," ",137],["T_IS_NOT_EQUAL","!=",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$style",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getOriginalId",137],"(",")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n      ",137],["T_COMMENT","\/\/ Loop through all entity displays looking for formatters \/ widgets using\n",138],["T_WHITESPACE","      ",139],["T_COMMENT","\/\/ the image style.\n",139],["T_WHITESPACE","      ",140],["T_FOREACH","foreach",140],["T_WHITESPACE"," ",140],"(",["T_STRING","EntityViewDisplay",140],["T_DOUBLE_COLON","::",140],["T_STRING","loadMultiple",140],"(",")",["T_WHITESPACE"," ",140],["T_AS","as",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$display",140],")",["T_WHITESPACE"," ",140],"{",["T_WHITESPACE","\n        ",140],["T_FOREACH","foreach",141],["T_WHITESPACE"," ",141],"(",["T_VARIABLE","$display",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","getComponents",141],"(",")",["T_WHITESPACE"," ",141],["T_AS","as",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$name",141],["T_WHITESPACE"," ",141],["T_DOUBLE_ARROW","=>",141],["T_WHITESPACE"," ",141],["T_VARIABLE","$options",141],")",["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n          ",141],["T_IF","if",142],["T_WHITESPACE"," ",142],"(",["T_ISSET","isset",142],"(",["T_VARIABLE","$options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",142],"]",")",["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",142],"]",["T_WHITESPACE"," ",142],["T_IS_EQUAL","==",142],["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'image'",142],["T_WHITESPACE"," ",142],["T_BOOLEAN_AND","&&",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$options",142],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",142],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_style'",142],"]",["T_WHITESPACE"," ",142],["T_IS_EQUAL","==",142],["T_WHITESPACE"," ",142],["T_VARIABLE","$style",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getOriginalId",142],"(",")",")",["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n            ",142],["T_VARIABLE","$options",143],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",143],"]","[",["T_CONSTANT_ENCAPSED_STRING","'image_style'",143],"]",["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$style",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","id",143],"(",")",";",["T_WHITESPACE","\n            ",143],["T_VARIABLE","$display",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setComponent",144],"(",["T_VARIABLE","$name",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$options",144],")",["T_WHITESPACE","\n              ",144],["T_OBJECT_OPERATOR","->",145],["T_STRING","save",145],"(",")",";",["T_WHITESPACE","\n          ",145],"}",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n      ",147],"}",["T_WHITESPACE","\n      ",148],["T_FOREACH","foreach",149],["T_WHITESPACE"," ",149],"(",["T_STRING","EntityViewDisplay",149],["T_DOUBLE_COLON","::",149],["T_STRING","loadMultiple",149],"(",")",["T_WHITESPACE"," ",149],["T_AS","as",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$display",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n        ",149],["T_FOREACH","foreach",150],["T_WHITESPACE"," ",150],"(",["T_VARIABLE","$display",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getComponents",150],"(",")",["T_WHITESPACE"," ",150],["T_AS","as",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$name",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$options",150],")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n          ",150],["T_IF","if",151],["T_WHITESPACE"," ",151],"(",["T_ISSET","isset",151],"(",["T_VARIABLE","$options",151],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",151],"]",")",["T_WHITESPACE"," ",151],["T_BOOLEAN_AND","&&",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$options",151],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",151],"]",["T_WHITESPACE"," ",151],["T_IS_EQUAL","==",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'image_image'",151],["T_WHITESPACE"," ",151],["T_BOOLEAN_AND","&&",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$options",151],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",151],"]","[",["T_CONSTANT_ENCAPSED_STRING","'preview_image_style'",151],"]",["T_WHITESPACE"," ",151],["T_IS_EQUAL","==",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$style",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getOriginalId",151],"(",")",")",["T_WHITESPACE"," ",151],"{",["T_WHITESPACE","\n            ",151],["T_VARIABLE","$options",152],"[",["T_CONSTANT_ENCAPSED_STRING","'settings'",152],"]","[",["T_CONSTANT_ENCAPSED_STRING","'preview_image_style'",152],"]",["T_WHITESPACE"," ",152],"=",["T_WHITESPACE"," ",152],["T_VARIABLE","$style",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","id",152],"(",")",";",["T_WHITESPACE","\n            ",152],["T_VARIABLE","$display",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","setComponent",153],"(",["T_VARIABLE","$name",153],",",["T_WHITESPACE"," ",153],["T_VARIABLE","$options",153],")",["T_WHITESPACE","\n              ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","save",154],"(",")",";",["T_WHITESPACE","\n          ",154],"}",["T_WHITESPACE","\n        ",155],"}",["T_WHITESPACE","\n      ",156],"}",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n  ",158],"}",["T_WHITESPACE","\n\n  ",159],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",161],["T_WHITESPACE","\n  ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","buildUri",164],"(",["T_VARIABLE","$uri",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$source_scheme",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$scheme",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","fileUriScheme",165],"(",["T_VARIABLE","$uri",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$default_scheme",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","fileDefaultScheme",166],"(",")",";",["T_WHITESPACE","\n\n    ",166],["T_IF","if",168],["T_WHITESPACE"," ",168],"(",["T_VARIABLE","$source_scheme",168],")",["T_WHITESPACE"," ",168],"{",["T_WHITESPACE","\n      ",168],["T_VARIABLE","$path",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","fileUriTarget",169],"(",["T_VARIABLE","$uri",169],")",";",["T_WHITESPACE","\n      ",169],["T_COMMENT","\/\/ The scheme of derivative image files only needs to be computed for\n",170],["T_WHITESPACE","      ",171],["T_COMMENT","\/\/ source files not stored in the default scheme.\n",171],["T_WHITESPACE","      ",172],["T_IF","if",172],["T_WHITESPACE"," ",172],"(",["T_VARIABLE","$source_scheme",172],["T_WHITESPACE"," ",172],["T_IS_NOT_EQUAL","!=",172],["T_WHITESPACE"," ",172],["T_VARIABLE","$default_scheme",172],")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n        ",172],["T_VARIABLE","$class",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getStreamWrapperManager",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","getClass",173],"(",["T_VARIABLE","$source_scheme",173],")",";",["T_WHITESPACE","\n        ",173],["T_VARIABLE","$is_writable",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$class",174],["T_DOUBLE_COLON","::",174],["T_STRING","getType",174],"(",")",["T_WHITESPACE"," ",174],"&",["T_WHITESPACE"," ",174],["T_STRING","StreamWrapperInterface",174],["T_DOUBLE_COLON","::",174],["T_STRING","WRITE",174],";",["T_WHITESPACE","\n\n        ",174],["T_COMMENT","\/\/ Compute the derivative URI scheme. Derivatives created from writable\n",176],["T_WHITESPACE","        ",177],["T_COMMENT","\/\/ source stream wrappers will inherit the scheme. Derivatives created\n",177],["T_WHITESPACE","        ",178],["T_COMMENT","\/\/ from read-only stream wrappers will fall-back to the default scheme.\n",178],["T_WHITESPACE","        ",179],["T_VARIABLE","$scheme",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$is_writable",179],["T_WHITESPACE"," ",179],"?",["T_WHITESPACE"," ",179],["T_VARIABLE","$source_scheme",179],["T_WHITESPACE"," ",179],":",["T_WHITESPACE"," ",179],["T_VARIABLE","$default_scheme",179],";",["T_WHITESPACE","\n      ",179],"}",["T_WHITESPACE","\n    ",180],"}",["T_WHITESPACE","\n    ",181],["T_ELSE","else",182],["T_WHITESPACE"," ",182],"{",["T_WHITESPACE","\n      ",182],["T_VARIABLE","$path",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_VARIABLE","$uri",183],";",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$source_scheme",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$scheme",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_VARIABLE","$default_scheme",184],";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n    ",185],["T_RETURN","return",186],["T_WHITESPACE"," ",186],"\"",["T_VARIABLE","$scheme",186],["T_ENCAPSED_AND_WHITESPACE",":\/\/styles\/",186],["T_CURLY_OPEN","{",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","id",186],"(",")","}",["T_ENCAPSED_AND_WHITESPACE","\/",186],["T_VARIABLE","$source_scheme",186],["T_ENCAPSED_AND_WHITESPACE","\/",186],["T_CURLY_OPEN","{",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","addExtension",186],"(",["T_VARIABLE","$path",186],")","}","\"",";",["T_WHITESPACE","\n  ",186],"}",["T_WHITESPACE","\n\n  ",187],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",189],["T_WHITESPACE","\n  ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","buildUrl",192],"(",["T_VARIABLE","$path",192],",",["T_WHITESPACE"," ",192],["T_VARIABLE","$clean_urls",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","NULL",192],")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$uri",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","buildUri",193],"(",["T_VARIABLE","$path",193],")",";",["T_WHITESPACE","\n    ",193],["T_COMMENT","\/\/ The token query is added even if the\n",194],["T_WHITESPACE","    ",195],["T_COMMENT","\/\/ 'image.settings:allow_insecure_derivatives' configuration is TRUE, so\n",195],["T_WHITESPACE","    ",196],["T_COMMENT","\/\/ that the emitted links remain valid if it is changed back to the default\n",196],["T_WHITESPACE","    ",197],["T_COMMENT","\/\/ FALSE. However, sites which need to prevent the token query from being\n",197],["T_WHITESPACE","    ",198],["T_COMMENT","\/\/ emitted at all can additionally set the\n",198],["T_WHITESPACE","    ",199],["T_COMMENT","\/\/ 'image.settings:suppress_itok_output' configuration to TRUE to achieve\n",199],["T_WHITESPACE","    ",200],["T_COMMENT","\/\/ that (if both are set, the security token will neither be emitted in the\n",200],["T_WHITESPACE","    ",201],["T_COMMENT","\/\/ image derivative URL nor checked for in\n",201],["T_WHITESPACE","    ",202],["T_COMMENT","\/\/ \\Drupal\\image\\ImageStyleInterface::deliver()).\n",202],["T_WHITESPACE","    ",203],["T_VARIABLE","$token_query",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_ARRAY","array",203],"(",")",";",["T_WHITESPACE","\n    ",203],["T_IF","if",204],["T_WHITESPACE"," ",204],"(","!",["T_NS_SEPARATOR","\\",204],["T_STRING","Drupal",204],["T_DOUBLE_COLON","::",204],["T_STRING","config",204],"(",["T_CONSTANT_ENCAPSED_STRING","'image.settings'",204],")",["T_OBJECT_OPERATOR","->",204],["T_STRING","get",204],"(",["T_CONSTANT_ENCAPSED_STRING","'suppress_itok_output'",204],")",")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n      ",204],["T_COMMENT","\/\/ The passed $path variable can be either a relative path or a full URI.\n",205],["T_WHITESPACE","      ",206],["T_VARIABLE","$original_uri",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","file_uri_scheme",206],"(",["T_VARIABLE","$path",206],")",["T_WHITESPACE"," ",206],"?",["T_WHITESPACE"," ",206],["T_STRING","file_stream_wrapper_uri_normalize",206],"(",["T_VARIABLE","$path",206],")",["T_WHITESPACE"," ",206],":",["T_WHITESPACE"," ",206],["T_STRING","file_build_uri",206],"(",["T_VARIABLE","$path",206],")",";",["T_WHITESPACE","\n      ",206],["T_VARIABLE","$token_query",207],["T_WHITESPACE"," ",207],"=",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_STRING","IMAGE_DERIVATIVE_TOKEN",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","getPathToken",207],"(",["T_VARIABLE","$original_uri",207],")",")",";",["T_WHITESPACE","\n    ",207],"}",["T_WHITESPACE","\n\n    ",208],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$clean_urls",210],["T_WHITESPACE"," ",210],["T_IS_IDENTICAL","===",210],["T_WHITESPACE"," ",210],["T_STRING","NULL",210],")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n      ",210],["T_COMMENT","\/\/ Assume clean URLs unless the request tells us otherwise.\n",211],["T_WHITESPACE","      ",212],["T_VARIABLE","$clean_urls",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","TRUE",212],";",["T_WHITESPACE","\n      ",212],["T_TRY","try",213],["T_WHITESPACE"," ",213],"{",["T_WHITESPACE","\n        ",213],["T_VARIABLE","$request",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_NS_SEPARATOR","\\",214],["T_STRING","Drupal",214],["T_DOUBLE_COLON","::",214],["T_STRING","request",214],"(",")",";",["T_WHITESPACE","\n        ",214],["T_VARIABLE","$clean_urls",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_STRING","RequestHelper",215],["T_DOUBLE_COLON","::",215],["T_STRING","isCleanUrl",215],"(",["T_VARIABLE","$request",215],")",";",["T_WHITESPACE","\n      ",215],"}",["T_WHITESPACE","\n      ",216],["T_CATCH","catch",217],["T_WHITESPACE"," ",217],"(",["T_STRING","ServiceNotFoundException",217],["T_WHITESPACE"," ",217],["T_VARIABLE","$e",217],")",["T_WHITESPACE"," ",217],"{",["T_WHITESPACE","\n      ",217],"}",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n\n    ",219],["T_COMMENT","\/\/ If not using clean URLs, the image derivative callback is only available\n",221],["T_WHITESPACE","    ",222],["T_COMMENT","\/\/ with the script path. If the file does not exist, use Url::fromUri() to\n",222],["T_WHITESPACE","    ",223],["T_COMMENT","\/\/ ensure that it is included. Once the file exists it's fine to fall back\n",223],["T_WHITESPACE","    ",224],["T_COMMENT","\/\/ to the actual file path, this avoids bootstrapping PHP once the files are\n",224],["T_WHITESPACE","    ",225],["T_COMMENT","\/\/ built.\n",225],["T_WHITESPACE","    ",226],["T_IF","if",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$clean_urls",226],["T_WHITESPACE"," ",226],["T_IS_IDENTICAL","===",226],["T_WHITESPACE"," ",226],["T_STRING","FALSE",226],["T_WHITESPACE"," ",226],["T_BOOLEAN_AND","&&",226],["T_WHITESPACE"," ",226],["T_STRING","file_uri_scheme",226],"(",["T_VARIABLE","$uri",226],")",["T_WHITESPACE"," ",226],["T_IS_EQUAL","==",226],["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'public'",226],["T_WHITESPACE"," ",226],["T_BOOLEAN_AND","&&",226],["T_WHITESPACE"," ",226],"!",["T_STRING","file_exists",226],"(",["T_VARIABLE","$uri",226],")",")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n      ",226],["T_VARIABLE","$directory_path",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getStreamWrapperManager",227],"(",")",["T_OBJECT_OPERATOR","->",227],["T_STRING","getViaUri",227],"(",["T_VARIABLE","$uri",227],")",["T_OBJECT_OPERATOR","->",227],["T_STRING","getDirectoryPath",227],"(",")",";",["T_WHITESPACE","\n      ",227],["T_RETURN","return",228],["T_WHITESPACE"," ",228],["T_STRING","Url",228],["T_DOUBLE_COLON","::",228],["T_STRING","fromUri",228],"(",["T_CONSTANT_ENCAPSED_STRING","'base:'",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_VARIABLE","$directory_path",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'\/'",228],["T_WHITESPACE"," ",228],".",["T_WHITESPACE"," ",228],["T_STRING","file_uri_target",228],"(",["T_VARIABLE","$uri",228],")",",",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],"(",["T_CONSTANT_ENCAPSED_STRING","'absolute'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_STRING","TRUE",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'query'",228],["T_WHITESPACE"," ",228],["T_DOUBLE_ARROW","=>",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$token_query",228],")",")",["T_OBJECT_OPERATOR","->",228],["T_STRING","toString",228],"(",")",";",["T_WHITESPACE","\n    ",228],"}",["T_WHITESPACE","\n\n    ",229],["T_VARIABLE","$file_url",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_STRING","file_create_url",231],"(",["T_VARIABLE","$uri",231],")",";",["T_WHITESPACE","\n    ",231],["T_COMMENT","\/\/ Append the query string with the token, if necessary.\n",232],["T_WHITESPACE","    ",233],["T_IF","if",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$token_query",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$file_url",234],["T_WHITESPACE"," ",234],["T_CONCAT_EQUAL",".=",234],["T_WHITESPACE"," ",234],"(",["T_STRING","strpos",234],"(",["T_VARIABLE","$file_url",234],",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'?'",234],")",["T_WHITESPACE"," ",234],["T_IS_NOT_IDENTICAL","!==",234],["T_WHITESPACE"," ",234],["T_STRING","FALSE",234],["T_WHITESPACE"," ",234],"?",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'&'",234],["T_WHITESPACE"," ",234],":",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'?'",234],")",["T_WHITESPACE"," ",234],".",["T_WHITESPACE"," ",234],["T_STRING","UrlHelper",234],["T_DOUBLE_COLON","::",234],["T_STRING","buildQuery",234],"(",["T_VARIABLE","$token_query",234],")",";",["T_WHITESPACE","\n    ",234],"}",["T_WHITESPACE","\n\n    ",235],["T_RETURN","return",237],["T_WHITESPACE"," ",237],["T_VARIABLE","$file_url",237],";",["T_WHITESPACE","\n  ",237],"}",["T_WHITESPACE","\n\n  ",238],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",240],["T_WHITESPACE","\n  ",242],["T_PUBLIC","public",243],["T_WHITESPACE"," ",243],["T_FUNCTION","function",243],["T_WHITESPACE"," ",243],["T_STRING","flush",243],"(",["T_VARIABLE","$path",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","NULL",243],")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n    ",243],["T_COMMENT","\/\/ A specific image path has been provided. Flush only that derivative.\n",244],["T_WHITESPACE","    ",245],["T_IF","if",245],["T_WHITESPACE"," ",245],"(",["T_ISSET","isset",245],"(",["T_VARIABLE","$path",245],")",")",["T_WHITESPACE"," ",245],"{",["T_WHITESPACE","\n      ",245],["T_VARIABLE","$derivative_uri",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","buildUri",246],"(",["T_VARIABLE","$path",246],")",";",["T_WHITESPACE","\n      ",246],["T_IF","if",247],["T_WHITESPACE"," ",247],"(",["T_STRING","file_exists",247],"(",["T_VARIABLE","$derivative_uri",247],")",")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n        ",247],["T_STRING","file_unmanaged_delete",248],"(",["T_VARIABLE","$derivative_uri",248],")",";",["T_WHITESPACE","\n      ",248],"}",["T_WHITESPACE","\n      ",249],["T_RETURN","return",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$this",250],";",["T_WHITESPACE","\n    ",250],"}",["T_WHITESPACE","\n\n    ",251],["T_COMMENT","\/\/ Delete the style directory in each registered wrapper.\n",253],["T_WHITESPACE","    ",254],["T_VARIABLE","$wrappers",254],["T_WHITESPACE"," ",254],"=",["T_WHITESPACE"," ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","getStreamWrapperManager",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","getWrappers",254],"(",["T_STRING","StreamWrapperInterface",254],["T_DOUBLE_COLON","::",254],["T_STRING","WRITE_VISIBLE",254],")",";",["T_WHITESPACE","\n    ",254],["T_FOREACH","foreach",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$wrappers",255],["T_WHITESPACE"," ",255],["T_AS","as",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$wrapper",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_VARIABLE","$wrapper_data",255],")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n      ",255],["T_IF","if",256],["T_WHITESPACE"," ",256],"(",["T_STRING","file_exists",256],"(",["T_VARIABLE","$directory",256],["T_WHITESPACE"," ",256],"=",["T_WHITESPACE"," ",256],["T_VARIABLE","$wrapper",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","':\/\/styles\/'",256],["T_WHITESPACE"," ",256],".",["T_WHITESPACE"," ",256],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","id",256],"(",")",")",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n        ",256],["T_STRING","file_unmanaged_delete_recursive",257],"(",["T_VARIABLE","$directory",257],")",";",["T_WHITESPACE","\n      ",257],"}",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n\n    ",259],["T_COMMENT","\/\/ Let other modules update as necessary on flush.\n",261],["T_WHITESPACE","    ",262],["T_VARIABLE","$module_handler",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_NS_SEPARATOR","\\",262],["T_STRING","Drupal",262],["T_DOUBLE_COLON","::",262],["T_STRING","moduleHandler",262],"(",")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$module_handler",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","invokeAll",263],"(",["T_CONSTANT_ENCAPSED_STRING","'image_style_flush'",263],",",["T_WHITESPACE"," ",263],["T_ARRAY","array",263],"(",["T_VARIABLE","$this",263],")",")",";",["T_WHITESPACE","\n\n    ",263],["T_COMMENT","\/\/ Clear caches so that formatters may be added for this style.\n",265],["T_WHITESPACE","    ",266],["T_STRING","drupal_theme_rebuild",266],"(",")",";",["T_WHITESPACE","\n\n    ",266],["T_STRING","Cache",268],["T_DOUBLE_COLON","::",268],["T_STRING","invalidateTags",268],"(",["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","getCacheTagsToInvalidate",268],"(",")",")",";",["T_WHITESPACE","\n\n    ",268],["T_RETURN","return",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$this",270],";",["T_WHITESPACE","\n  ",270],"}",["T_WHITESPACE","\n\n  ",271],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",273],["T_WHITESPACE","\n  ",275],["T_PUBLIC","public",276],["T_WHITESPACE"," ",276],["T_FUNCTION","function",276],["T_WHITESPACE"," ",276],["T_STRING","createDerivative",276],"(",["T_VARIABLE","$original_uri",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$derivative_uri",276],")",["T_WHITESPACE"," ",276],"{",["T_WHITESPACE","\n\n    ",276],["T_COMMENT","\/\/ If the source file doesn't exist, return FALSE without creating folders.\n",278],["T_WHITESPACE","    ",279],["T_VARIABLE","$image",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_NS_SEPARATOR","\\",279],["T_STRING","Drupal",279],["T_DOUBLE_COLON","::",279],["T_STRING","service",279],"(",["T_CONSTANT_ENCAPSED_STRING","'image.factory'",279],")",["T_OBJECT_OPERATOR","->",279],["T_STRING","get",279],"(",["T_VARIABLE","$original_uri",279],")",";",["T_WHITESPACE","\n    ",279],["T_IF","if",280],["T_WHITESPACE"," ",280],"(","!",["T_VARIABLE","$image",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","isValid",280],"(",")",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n      ",280],["T_RETURN","return",281],["T_WHITESPACE"," ",281],["T_STRING","FALSE",281],";",["T_WHITESPACE","\n    ",281],"}",["T_WHITESPACE","\n\n    ",282],["T_COMMENT","\/\/ Get the folder for the final location of this style.\n",284],["T_WHITESPACE","    ",285],["T_VARIABLE","$directory",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_STRING","drupal_dirname",285],"(",["T_VARIABLE","$derivative_uri",285],")",";",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Build the destination folder tree if it doesn't already exist.\n",287],["T_WHITESPACE","    ",288],["T_IF","if",288],["T_WHITESPACE"," ",288],"(","!",["T_STRING","file_prepare_directory",288],"(",["T_VARIABLE","$directory",288],",",["T_WHITESPACE"," ",288],["T_STRING","FILE_CREATE_DIRECTORY",288],["T_WHITESPACE"," ",288],"|",["T_WHITESPACE"," ",288],["T_STRING","FILE_MODIFY_PERMISSIONS",288],")",")",["T_WHITESPACE"," ",288],"{",["T_WHITESPACE","\n      ",288],["T_NS_SEPARATOR","\\",289],["T_STRING","Drupal",289],["T_DOUBLE_COLON","::",289],["T_STRING","logger",289],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",289],")",["T_OBJECT_OPERATOR","->",289],["T_STRING","error",289],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to create style directory: %directory'",289],",",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",["T_CONSTANT_ENCAPSED_STRING","'%directory'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$directory",289],")",")",";",["T_WHITESPACE","\n      ",289],["T_RETURN","return",290],["T_WHITESPACE"," ",290],["T_STRING","FALSE",290],";",["T_WHITESPACE","\n    ",290],"}",["T_WHITESPACE","\n\n    ",291],["T_FOREACH","foreach",293],["T_WHITESPACE"," ",293],"(",["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","getEffects",293],"(",")",["T_WHITESPACE"," ",293],["T_AS","as",293],["T_WHITESPACE"," ",293],["T_VARIABLE","$effect",293],")",["T_WHITESPACE"," ",293],"{",["T_WHITESPACE","\n      ",293],["T_VARIABLE","$effect",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","applyEffect",294],"(",["T_VARIABLE","$image",294],")",";",["T_WHITESPACE","\n    ",294],"}",["T_WHITESPACE","\n\n    ",295],["T_IF","if",297],["T_WHITESPACE"," ",297],"(","!",["T_VARIABLE","$image",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","save",297],"(",["T_VARIABLE","$derivative_uri",297],")",")",["T_WHITESPACE"," ",297],"{",["T_WHITESPACE","\n      ",297],["T_IF","if",298],["T_WHITESPACE"," ",298],"(",["T_STRING","file_exists",298],"(",["T_VARIABLE","$derivative_uri",298],")",")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n        ",298],["T_NS_SEPARATOR","\\",299],["T_STRING","Drupal",299],["T_DOUBLE_COLON","::",299],["T_STRING","logger",299],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",299],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","error",299],"(",["T_CONSTANT_ENCAPSED_STRING","'Cached image file %destination already exists. There may be an issue with your rewrite configuration.'",299],",",["T_WHITESPACE"," ",299],["T_ARRAY","array",299],"(",["T_CONSTANT_ENCAPSED_STRING","'%destination'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$derivative_uri",299],")",")",";",["T_WHITESPACE","\n      ",299],"}",["T_WHITESPACE","\n      ",300],["T_RETURN","return",301],["T_WHITESPACE"," ",301],["T_STRING","FALSE",301],";",["T_WHITESPACE","\n    ",301],"}",["T_WHITESPACE","\n\n    ",302],["T_RETURN","return",304],["T_WHITESPACE"," ",304],["T_STRING","TRUE",304],";",["T_WHITESPACE","\n  ",304],"}",["T_WHITESPACE","\n\n  ",305],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",307],["T_WHITESPACE","\n  ",309],["T_PUBLIC","public",310],["T_WHITESPACE"," ",310],["T_FUNCTION","function",310],["T_WHITESPACE"," ",310],["T_STRING","transformDimensions",310],"(",["T_ARRAY","array",310],["T_WHITESPACE"," ",310],"&",["T_VARIABLE","$dimensions",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$uri",310],")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n    ",310],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$this",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getEffects",311],"(",")",["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$effect",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n      ",311],["T_VARIABLE","$effect",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","transformDimensions",312],"(",["T_VARIABLE","$dimensions",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$uri",312],")",";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n  ",313],"}",["T_WHITESPACE","\n\n  ",314],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",316],["T_WHITESPACE","\n  ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","getDerivativeExtension",319],"(",["T_VARIABLE","$extension",319],")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n    ",319],["T_FOREACH","foreach",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getEffects",320],"(",")",["T_WHITESPACE"," ",320],["T_AS","as",320],["T_WHITESPACE"," ",320],["T_VARIABLE","$effect",320],")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n      ",320],["T_VARIABLE","$extension",321],["T_WHITESPACE"," ",321],"=",["T_WHITESPACE"," ",321],["T_VARIABLE","$effect",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","getDerivativeExtension",321],"(",["T_VARIABLE","$extension",321],")",";",["T_WHITESPACE","\n    ",321],"}",["T_WHITESPACE","\n    ",322],["T_RETURN","return",323],["T_WHITESPACE"," ",323],["T_VARIABLE","$extension",323],";",["T_WHITESPACE","\n  ",323],"}",["T_WHITESPACE","\n\n  ",324],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",326],["T_WHITESPACE","\n  ",328],["T_PUBLIC","public",329],["T_WHITESPACE"," ",329],["T_FUNCTION","function",329],["T_WHITESPACE"," ",329],["T_STRING","getPathToken",329],"(",["T_VARIABLE","$uri",329],")",["T_WHITESPACE"," ",329],"{",["T_WHITESPACE","\n    ",329],["T_COMMENT","\/\/ Return the first 8 characters.\n",330],["T_WHITESPACE","    ",331],["T_RETURN","return",331],["T_WHITESPACE"," ",331],["T_STRING","substr",331],"(",["T_STRING","Crypt",331],["T_DOUBLE_COLON","::",331],["T_STRING","hmacBase64",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","id",331],"(",")",["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","':'",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","addExtension",331],"(",["T_VARIABLE","$uri",331],")",",",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getPrivateKey",331],"(",")",["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","getHashSalt",331],"(",")",")",",",["T_WHITESPACE"," ",331],["T_LNUMBER","0",331],",",["T_WHITESPACE"," ",331],["T_LNUMBER","8",331],")",";",["T_WHITESPACE","\n  ",331],"}",["T_WHITESPACE","\n\n  ",332],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",334],["T_WHITESPACE","\n  ",336],["T_PUBLIC","public",337],["T_WHITESPACE"," ",337],["T_FUNCTION","function",337],["T_WHITESPACE"," ",337],["T_STRING","deleteImageEffect",337],"(",["T_STRING","ImageEffectInterface",337],["T_WHITESPACE"," ",337],["T_VARIABLE","$effect",337],")",["T_WHITESPACE"," ",337],"{",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getEffects",338],"(",")",["T_OBJECT_OPERATOR","->",338],["T_STRING","removeInstanceId",338],"(",["T_VARIABLE","$effect",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","getUuid",338],"(",")",")",";",["T_WHITESPACE","\n    ",338],["T_VARIABLE","$this",339],["T_OBJECT_OPERATOR","->",339],["T_STRING","save",339],"(",")",";",["T_WHITESPACE","\n    ",339],["T_RETURN","return",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],";",["T_WHITESPACE","\n  ",340],"}",["T_WHITESPACE","\n\n  ",341],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",343],["T_WHITESPACE","\n  ",345],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","getEffect",346],"(",["T_VARIABLE","$effect",346],")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n    ",346],["T_RETURN","return",347],["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getEffects",347],"(",")",["T_OBJECT_OPERATOR","->",347],["T_STRING","get",347],"(",["T_VARIABLE","$effect",347],")",";",["T_WHITESPACE","\n  ",347],"}",["T_WHITESPACE","\n\n  ",348],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",350],["T_WHITESPACE","\n  ",352],["T_PUBLIC","public",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","getEffects",353],"(",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n    ",353],["T_IF","if",354],["T_WHITESPACE"," ",354],"(","!",["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","effectsCollection",354],")",["T_WHITESPACE"," ",354],"{",["T_WHITESPACE","\n      ",354],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","effectsCollection",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_NEW","new",355],["T_WHITESPACE"," ",355],["T_STRING","ImageEffectPluginCollection",355],"(",["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","getImageEffectPluginManager",355],"(",")",",",["T_WHITESPACE"," ",355],["T_VARIABLE","$this",355],["T_OBJECT_OPERATOR","->",355],["T_STRING","effects",355],")",";",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","effectsCollection",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","sort",356],"(",")",";",["T_WHITESPACE","\n    ",356],"}",["T_WHITESPACE","\n    ",357],["T_RETURN","return",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","effectsCollection",358],";",["T_WHITESPACE","\n  ",358],"}",["T_WHITESPACE","\n\n  ",359],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",361],["T_WHITESPACE","\n  ",363],["T_PUBLIC","public",364],["T_WHITESPACE"," ",364],["T_FUNCTION","function",364],["T_WHITESPACE"," ",364],["T_STRING","getPluginCollections",364],"(",")",["T_WHITESPACE"," ",364],"{",["T_WHITESPACE","\n    ",364],["T_RETURN","return",365],["T_WHITESPACE"," ",365],["T_ARRAY","array",365],"(",["T_CONSTANT_ENCAPSED_STRING","'effects'",365],["T_WHITESPACE"," ",365],["T_DOUBLE_ARROW","=>",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getEffects",365],"(",")",")",";",["T_WHITESPACE","\n  ",365],"}",["T_WHITESPACE","\n\n  ",366],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",368],["T_WHITESPACE","\n  ",370],["T_PUBLIC","public",371],["T_WHITESPACE"," ",371],["T_FUNCTION","function",371],["T_WHITESPACE"," ",371],["T_STRING","addImageEffect",371],"(",["T_ARRAY","array",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$configuration",371],")",["T_WHITESPACE"," ",371],"{",["T_WHITESPACE","\n    ",371],["T_VARIABLE","$configuration",372],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",372],"]",["T_WHITESPACE"," ",372],"=",["T_WHITESPACE"," ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","uuidGenerator",372],"(",")",["T_OBJECT_OPERATOR","->",372],["T_STRING","generate",372],"(",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","getEffects",373],"(",")",["T_OBJECT_OPERATOR","->",373],["T_STRING","addInstanceId",373],"(",["T_VARIABLE","$configuration",373],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",373],"]",",",["T_WHITESPACE"," ",373],["T_VARIABLE","$configuration",373],")",";",["T_WHITESPACE","\n    ",373],["T_RETURN","return",374],["T_WHITESPACE"," ",374],["T_VARIABLE","$configuration",374],"[",["T_CONSTANT_ENCAPSED_STRING","'uuid'",374],"]",";",["T_WHITESPACE","\n  ",374],"}",["T_WHITESPACE","\n\n  ",375],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",377],["T_WHITESPACE","\n  ",379],["T_PUBLIC","public",380],["T_WHITESPACE"," ",380],["T_FUNCTION","function",380],["T_WHITESPACE"," ",380],["T_STRING","getReplacementID",380],"(",")",["T_WHITESPACE"," ",380],"{",["T_WHITESPACE","\n    ",380],["T_DOC_COMMENT","\/** @var \\Drupal\\image\\ImageStyleStorageInterface $storage *\/",381],["T_WHITESPACE","\n    ",381],["T_VARIABLE","$storage",382],["T_WHITESPACE"," ",382],"=",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","entityTypeManager",382],"(",")",["T_OBJECT_OPERATOR","->",382],["T_STRING","getStorage",382],"(",["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","getEntityTypeId",382],"(",")",")",";",["T_WHITESPACE","\n    ",382],["T_RETURN","return",383],["T_WHITESPACE"," ",383],["T_VARIABLE","$storage",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getReplacementId",383],"(",["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","id",383],"(",")",")",";",["T_WHITESPACE","\n  ",383],"}",["T_WHITESPACE","\n\n  ",384],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",386],["T_WHITESPACE","\n  ",388],["T_PUBLIC","public",389],["T_WHITESPACE"," ",389],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","getName",389],"(",")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n    ",389],["T_RETURN","return",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","get",390],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",390],")",";",["T_WHITESPACE","\n  ",390],"}",["T_WHITESPACE","\n\n  ",391],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",393],["T_WHITESPACE","\n  ",395],["T_PUBLIC","public",396],["T_WHITESPACE"," ",396],["T_FUNCTION","function",396],["T_WHITESPACE"," ",396],["T_STRING","setName",396],"(",["T_VARIABLE","$name",396],")",["T_WHITESPACE"," ",396],"{",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","set",397],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",397],",",["T_WHITESPACE"," ",397],["T_VARIABLE","$name",397],")",";",["T_WHITESPACE","\n    ",397],["T_RETURN","return",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],";",["T_WHITESPACE","\n  ",398],"}",["T_WHITESPACE","\n\n  ",399],["T_DOC_COMMENT","\/**\n   * Returns the image effect plugin manager.\n   *\n   * @return \\Drupal\\Component\\Plugin\\PluginManagerInterface\n   *   The image effect plugin manager.\n   *\/",401],["T_WHITESPACE","\n  ",406],["T_PROTECTED","protected",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","getImageEffectPluginManager",407],"(",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n    ",407],["T_RETURN","return",408],["T_WHITESPACE"," ",408],["T_NS_SEPARATOR","\\",408],["T_STRING","Drupal",408],["T_DOUBLE_COLON","::",408],["T_STRING","service",408],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.image.effect'",408],")",";",["T_WHITESPACE","\n  ",408],"}",["T_WHITESPACE","\n\n  ",409],["T_DOC_COMMENT","\/**\n   * Gets the Drupal private key.\n   *\n   * @return string\n   *   The Drupal private key.\n   *\/",411],["T_WHITESPACE","\n  ",416],["T_PROTECTED","protected",417],["T_WHITESPACE"," ",417],["T_FUNCTION","function",417],["T_WHITESPACE"," ",417],["T_STRING","getPrivateKey",417],"(",")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n    ",417],["T_RETURN","return",418],["T_WHITESPACE"," ",418],["T_NS_SEPARATOR","\\",418],["T_STRING","Drupal",418],["T_DOUBLE_COLON","::",418],["T_STRING","service",418],"(",["T_CONSTANT_ENCAPSED_STRING","'private_key'",418],")",["T_OBJECT_OPERATOR","->",418],["T_STRING","get",418],"(",")",";",["T_WHITESPACE","\n  ",418],"}",["T_WHITESPACE","\n\n  ",419],["T_DOC_COMMENT","\/**\n   * Gets a salt useful for hardening against SQL injection.\n   *\n   * @return string\n   *   A salt based on information in settings.php, not in the database.\n   *\n   * @throws \\RuntimeException\n   *\/",421],["T_WHITESPACE","\n  ",428],["T_PROTECTED","protected",429],["T_WHITESPACE"," ",429],["T_FUNCTION","function",429],["T_WHITESPACE"," ",429],["T_STRING","getHashSalt",429],"(",")",["T_WHITESPACE"," ",429],"{",["T_WHITESPACE","\n    ",429],["T_RETURN","return",430],["T_WHITESPACE"," ",430],["T_STRING","Settings",430],["T_DOUBLE_COLON","::",430],["T_STRING","getHashSalt",430],"(",")",";",["T_WHITESPACE","\n  ",430],"}",["T_WHITESPACE","\n\n  ",431],["T_DOC_COMMENT","\/**\n   * Adds an extension to a path.\n   *\n   * If this image style changes the extension of the derivative, this method\n   * adds the new extension to the given path. This way we avoid filename\n   * clashes while still allowing us to find the source image.\n   *\n   * @param string $path\n   *   The path to add the extension to.\n   *\n   * @return string\n   *   The given path if this image style doesn't change its extension, or the\n   *   path with the added extension if it does.\n   *\/",433],["T_WHITESPACE","\n  ",446],["T_PROTECTED","protected",447],["T_WHITESPACE"," ",447],["T_FUNCTION","function",447],["T_WHITESPACE"," ",447],["T_STRING","addExtension",447],"(",["T_VARIABLE","$path",447],")",["T_WHITESPACE"," ",447],"{",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$original_extension",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING","pathinfo",448],"(",["T_VARIABLE","$path",448],",",["T_WHITESPACE"," ",448],["T_STRING","PATHINFO_EXTENSION",448],")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$extension",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","getDerivativeExtension",449],"(",["T_VARIABLE","$original_extension",449],")",";",["T_WHITESPACE","\n    ",449],["T_IF","if",450],["T_WHITESPACE"," ",450],"(",["T_VARIABLE","$original_extension",450],["T_WHITESPACE"," ",450],["T_IS_NOT_IDENTICAL","!==",450],["T_WHITESPACE"," ",450],["T_VARIABLE","$extension",450],")",["T_WHITESPACE"," ",450],"{",["T_WHITESPACE","\n      ",450],["T_VARIABLE","$path",451],["T_WHITESPACE"," ",451],["T_CONCAT_EQUAL",".=",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'.'",451],["T_WHITESPACE"," ",451],".",["T_WHITESPACE"," ",451],["T_VARIABLE","$extension",451],";",["T_WHITESPACE","\n    ",451],"}",["T_WHITESPACE","\n    ",452],["T_RETURN","return",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$path",453],";",["T_WHITESPACE","\n  ",453],"}",["T_WHITESPACE","\n\n  ",454],["T_DOC_COMMENT","\/**\n   * Provides a wrapper for file_uri_scheme() to allow unit testing.\n   *\n   * Returns the scheme of a URI (e.g. a stream).\n   *\n   * @param string $uri\n   *   A stream, referenced as \"scheme:\/\/target\"  or \"data:target\".\n   *\n   * @see file_uri_target()\n   *\n   * @todo: Remove when https:\/\/www.drupal.org\/node\/2050759 is in.\n   *\n   * @return string\n   *   A string containing the name of the scheme, or FALSE if none. For\n   *   example, the URI \"public:\/\/example.txt\" would return \"public\".\n   *\/",456],["T_WHITESPACE","\n  ",471],["T_PROTECTED","protected",472],["T_WHITESPACE"," ",472],["T_FUNCTION","function",472],["T_WHITESPACE"," ",472],["T_STRING","fileUriScheme",472],"(",["T_VARIABLE","$uri",472],")",["T_WHITESPACE"," ",472],"{",["T_WHITESPACE","\n    ",472],["T_RETURN","return",473],["T_WHITESPACE"," ",473],["T_STRING","file_uri_scheme",473],"(",["T_VARIABLE","$uri",473],")",";",["T_WHITESPACE","\n  ",473],"}",["T_WHITESPACE","\n\n  ",474],["T_DOC_COMMENT","\/**\n   * Provides a wrapper for file_uri_target() to allow unit testing.\n   *\n   * Returns the part of a URI after the schema.\n   *\n   * @param string $uri\n   *   A stream, referenced as \"scheme:\/\/target\" or \"data:target\".\n   *\n   * @see file_uri_scheme()\n   *\n   * @todo: Convert file_uri_target() into a proper injectable service.\n   *\n   * @return string|bool\n   *   A string containing the target (path), or FALSE if none.\n   *   For example, the URI \"public:\/\/sample\/test.txt\" would return\n   *   \"sample\/test.txt\".\n   *\/",476],["T_WHITESPACE","\n  ",492],["T_PROTECTED","protected",493],["T_WHITESPACE"," ",493],["T_FUNCTION","function",493],["T_WHITESPACE"," ",493],["T_STRING","fileUriTarget",493],"(",["T_VARIABLE","$uri",493],")",["T_WHITESPACE"," ",493],"{",["T_WHITESPACE","\n    ",493],["T_RETURN","return",494],["T_WHITESPACE"," ",494],["T_STRING","file_uri_target",494],"(",["T_VARIABLE","$uri",494],")",";",["T_WHITESPACE","\n  ",494],"}",["T_WHITESPACE","\n\n  ",495],["T_DOC_COMMENT","\/**\n   * Provides a wrapper for file_default_scheme() to allow unit testing.\n   *\n   * Gets the default file stream implementation.\n   *\n   * @todo: Convert file_default_scheme() into a proper injectable service.\n   *\n   * @return string\n   *   'public', 'private' or any other file scheme defined as the default.\n   *\/",497],["T_WHITESPACE","\n  ",506],["T_PROTECTED","protected",507],["T_WHITESPACE"," ",507],["T_FUNCTION","function",507],["T_WHITESPACE"," ",507],["T_STRING","fileDefaultScheme",507],"(",")",["T_WHITESPACE"," ",507],"{",["T_WHITESPACE","\n    ",507],["T_RETURN","return",508],["T_WHITESPACE"," ",508],["T_STRING","file_default_scheme",508],"(",")",";",["T_WHITESPACE","\n  ",508],"}",["T_WHITESPACE","\n\n  ",509],["T_DOC_COMMENT","\/**\n   * Gets the stream wrapper manager service.\n   *\n   * @return \\Drupal\\Core\\StreamWrapper\\StreamWrapperManagerInterface\n   *   The stream wrapper manager service\n   *\n   * @todo Properly inject this service in Drupal 9.0.x.\n   *\/",511],["T_WHITESPACE","\n  ",518],["T_PROTECTED","protected",519],["T_WHITESPACE"," ",519],["T_FUNCTION","function",519],["T_WHITESPACE"," ",519],["T_STRING","getStreamWrapperManager",519],"(",")",["T_WHITESPACE"," ",519],"{",["T_WHITESPACE","\n    ",519],["T_RETURN","return",520],["T_WHITESPACE"," ",520],["T_NS_SEPARATOR","\\",520],["T_STRING","Drupal",520],["T_DOUBLE_COLON","::",520],["T_STRING","service",520],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",520],")",";",["T_WHITESPACE","\n  ",520],"}",["T_WHITESPACE","\n\n",521],"}",["T_WHITESPACE","\n",523]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","aggregator_test",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Controller",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Datetime",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DateTimePlus",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Controller",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ControllerBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Utility",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Crypt",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","HttpFoundation",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Response",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpFoundation",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Request",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Controller for the aggregator_test module.\n *\/",11],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","AggregatorTestRssController",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","ControllerBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Generates a test feed and simulates last-modified and etags.\n   *\n   * @param bool $use_last_modified\n   *   Set TRUE to send a last modified header.\n   * @param bool $use_etag\n   *   Set TRUE to send an etag.\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   Information about the current HTTP request.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\Response\n   *   A feed that forces cache validation.\n   *\/",16],["T_WHITESPACE","\n  ",28],["T_PUBLIC","public",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","testFeed",29],"(",["T_VARIABLE","$use_last_modified",29],",",["T_WHITESPACE"," ",29],["T_VARIABLE","$use_etag",29],",",["T_WHITESPACE"," ",29],["T_STRING","Request",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$request",29],")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$response",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_NEW","new",30],["T_WHITESPACE"," ",30],["T_STRING","Response",30],"(",")",";",["T_WHITESPACE","\n\n    ",30],["T_VARIABLE","$last_modified",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","strtotime",32],"(",["T_CONSTANT_ENCAPSED_STRING","'Sun, 19 Nov 1978 05:00:00 GMT'",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$etag",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","Crypt",33],["T_DOUBLE_COLON","::",33],["T_STRING","hashBase64",33],"(",["T_VARIABLE","$last_modified",33],")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$if_modified_since",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","strtotime",35],"(",["T_VARIABLE","$request",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","server",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_MODIFIED_SINCE'",35],")",")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$if_none_match",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","stripslashes",36],"(",["T_VARIABLE","$request",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","server",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","get",36],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP_IF_NONE_MATCH'",36],")",")",";",["T_WHITESPACE","\n\n    ",36],["T_COMMENT","\/\/ Send appropriate response. We respond with a 304 not modified on either\n",38],["T_WHITESPACE","    ",39],["T_COMMENT","\/\/ etag or on last modified.\n",39],["T_WHITESPACE","    ",40],["T_IF","if",40],["T_WHITESPACE"," ",40],"(",["T_VARIABLE","$use_last_modified",40],")",["T_WHITESPACE"," ",40],"{",["T_WHITESPACE","\n      ",40],["T_VARIABLE","$response",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","headers",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","set",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Last-Modified'",41],",",["T_WHITESPACE"," ",41],["T_STRING","gmdate",41],"(",["T_STRING","DateTimePlus",41],["T_DOUBLE_COLON","::",41],["T_STRING","RFC7231",41],",",["T_WHITESPACE"," ",41],["T_VARIABLE","$last_modified",41],")",")",";",["T_WHITESPACE","\n    ",41],"}",["T_WHITESPACE","\n    ",42],["T_IF","if",43],["T_WHITESPACE"," ",43],"(",["T_VARIABLE","$use_etag",43],")",["T_WHITESPACE"," ",43],"{",["T_WHITESPACE","\n      ",43],["T_VARIABLE","$response",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","headers",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","set",44],"(",["T_CONSTANT_ENCAPSED_STRING","'ETag'",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$etag",44],")",";",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ Return 304 not modified if either last modified or etag match.\n",46],["T_WHITESPACE","    ",47],["T_IF","if",47],["T_WHITESPACE"," ",47],"(",["T_VARIABLE","$last_modified",47],["T_WHITESPACE"," ",47],["T_IS_EQUAL","==",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$if_modified_since",47],["T_WHITESPACE"," ",47],["T_BOOLEAN_OR","||",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$etag",47],["T_WHITESPACE"," ",47],["T_IS_EQUAL","==",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$if_none_match",47],")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$response",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setStatusCode",48],"(",["T_LNUMBER","304",48],")",";",["T_WHITESPACE","\n      ",48],["T_RETURN","return",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$response",49],";",["T_WHITESPACE","\n    ",49],"}",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ The following headers force validation of cache.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$response",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","headers",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","set",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Expires'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Sun, 19 Nov 1978 05:00:00 GMT'",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$response",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","headers",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","set",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'must-revalidate'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$response",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","headers",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","set",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'application\/rss+xml; charset=utf-8'",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_COMMENT","\/\/ Read actual feed from file.\n",57],["T_WHITESPACE","    ",58],["T_VARIABLE","$file_name",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_DIR","__DIR__",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/aggregator_test_rss091.xml'",58],";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$handle",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","fopen",59],"(",["T_VARIABLE","$file_name",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'r'",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$feed",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_STRING","fread",60],"(",["T_VARIABLE","$handle",60],",",["T_WHITESPACE"," ",60],["T_STRING","filesize",60],"(",["T_VARIABLE","$file_name",60],")",")",";",["T_WHITESPACE","\n    ",60],["T_STRING","fclose",61],"(",["T_VARIABLE","$handle",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_VARIABLE","$response",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","setContent",63],"(",["T_VARIABLE","$feed",63],")",";",["T_WHITESPACE","\n    ",63],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$response",64],";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * Generates a rest redirect to the test feed.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   A response that redirects users to the test feed.\n   *\/",67],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","testRedirect",73],"(",")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","redirect",74],"(",["T_CONSTANT_ENCAPSED_STRING","'aggregator_test.feed'",74],",",["T_WHITESPACE"," ",74],"[","]",",",["T_WHITESPACE"," ",74],"[","]",",",["T_WHITESPACE"," ",74],["T_LNUMBER","301",74],")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n",75],"}",["T_WHITESPACE","\n",77]]
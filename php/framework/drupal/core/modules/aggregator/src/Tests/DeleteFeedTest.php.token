[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","aggregator",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Delete feed test.\n *\n * @group aggregator\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","DeleteFeedTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","AggregatorTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$modules",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Deletes a feed and ensures that all of its services are deleted.\n   *\/",19],["T_WHITESPACE","\n  ",21],["T_PUBLIC","public",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","testDeleteFeed",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_VARIABLE","$feed1",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","createFeed",23],"(",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$feed2",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_VARIABLE","$this",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","createFeed",24],"(",")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Place a block for both feeds.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$block",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$this",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","drupalPlaceBlock",27],"(",["T_CONSTANT_ENCAPSED_STRING","'aggregator_feed_block'",27],")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$block",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getPlugin",28],"(",")",["T_OBJECT_OPERATOR","->",28],["T_STRING","setConfigurationValue",28],"(",["T_CONSTANT_ENCAPSED_STRING","'feed'",28],",",["T_WHITESPACE"," ",28],["T_VARIABLE","$feed1",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","id",28],"(",")",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$block",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","save",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$block2",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalPlaceBlock",30],"(",["T_CONSTANT_ENCAPSED_STRING","'aggregator_feed_block'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$block2",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","getPlugin",31],"(",")",["T_OBJECT_OPERATOR","->",31],["T_STRING","setConfigurationValue",31],"(",["T_CONSTANT_ENCAPSED_STRING","'feed'",31],",",["T_WHITESPACE"," ",31],["T_VARIABLE","$feed2",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","id",31],"(",")",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$block2",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","save",32],"(",")",";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Delete feed.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","deleteFeed",35],"(",["T_VARIABLE","$feed1",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","assertText",36],"(",["T_VARIABLE","$feed2",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","label",36],"(",")",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$block_storage",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getStorage",37],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertNull",38],"(",["T_VARIABLE","$block_storage",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","load",38],"(",["T_VARIABLE","$block",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","id",38],"(",")",")",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Block for the deleted feed was deleted.'",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertEqual",39],"(",["T_VARIABLE","$block2",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","id",39],"(",")",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$block_storage",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","load",39],"(",["T_VARIABLE","$block2",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","id",39],"(",")",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","id",39],"(",")",",",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'Block for not deleted feed still exists.'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Check feed source.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalGet",42],"(",["T_CONSTANT_ENCAPSED_STRING","'aggregator\/sources\/'",42],["T_WHITESPACE"," ",42],".",["T_WHITESPACE"," ",42],["T_VARIABLE","$feed1",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","id",42],"(",")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertResponse",43],"(",["T_LNUMBER","404",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Deleted feed source does not exists.'",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Check database for feed.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$result",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","db_query",46],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT COUNT(*) FROM {aggregator_feed} WHERE title = :title AND url = :url\"",46],",",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_CONSTANT_ENCAPSED_STRING","':title'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$feed1",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","label",46],"(",")",",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","':url'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$feed1",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getUrl",46],"(",")",")",")",["T_OBJECT_OPERATOR","->",46],["T_STRING","fetchField",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertFalse",47],"(",["T_VARIABLE","$result",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Feed not found in database'",47],")",";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n",48],"}",["T_WHITESPACE","\n",50]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","book",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","node",6],["T_NS_SEPARATOR","\\",6],["T_STRING","NodeInterface",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Provides methods for exporting book to different formats.\n *\n * If you would like to add another format, swap this class in container.\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","BookExport",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * The node storage.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$nodeStorage",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The node view builder.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityViewBuilderInterface\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$viewBuilder",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The book manager.\n   *\n   * @var \\Drupal\\book\\BookManagerInterface\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$bookManager",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Constructs a BookExport object.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entityManager\n   *   The entity manager.\n   * @param \\Drupal\\book\\BookManagerInterface $book_manager\n   *   The book manager.\n   *\/",36],["T_WHITESPACE","\n  ",43],["T_PUBLIC","public",44],["T_WHITESPACE"," ",44],["T_FUNCTION","function",44],["T_WHITESPACE"," ",44],["T_STRING","__construct",44],"(",["T_STRING","EntityManagerInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$entityManager",44],",",["T_WHITESPACE"," ",44],["T_STRING","BookManagerInterface",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$book_manager",44],")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","nodeStorage",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_VARIABLE","$entityManager",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","getStorage",45],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",45],")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","viewBuilder",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$entityManager",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","getViewBuilder",46],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","bookManager",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$book_manager",47],";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * Generates HTML for export when invoked by book_export().\n   *\n   * The given node is embedded to its absolute depth in a top level section. For\n   * example, a child node with depth 2 in the hierarchy is contained in\n   * (otherwise empty) <div> elements corresponding to depth 0 and depth 1.\n   * This is intended to support WYSIWYG output; for instance, level 3 sections\n   * always look like level 3 sections, no matter their depth relative to the\n   * node selected to be exported as printer-friendly HTML.\n   *\n   * @param \\Drupal\\node\\NodeInterface $node\n   *   The node to export.\n   *\n   * @return array\n   *   A render array representing the HTML for a node and its children in the\n   *   book hierarchy.\n   *\n   * @throws \\Exception\n   *   Thrown when the node was not attached to a book.\n   *\/",50],["T_WHITESPACE","\n  ",69],["T_PUBLIC","public",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","bookExportHtml",70],"(",["T_STRING","NodeInterface",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$node",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_IF","if",71],["T_WHITESPACE"," ",71],"(","!",["T_ISSET","isset",71],"(",["T_VARIABLE","$node",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","book",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n      ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","Exception",72],"(",")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_VARIABLE","$tree",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","bookManager",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","bookSubtreeData",75],"(",["T_VARIABLE","$node",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","book",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$contents",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","exportTraverse",76],"(",["T_VARIABLE","$tree",76],",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_VARIABLE","$this",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'bookNodeExport'",76],")",")",";",["T_WHITESPACE","\n    ",76],["T_RETURN","return",77],["T_WHITESPACE"," ",77],["T_ARRAY","array",77],"(",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'#theme'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'book_export_html'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'#title'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$node",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","label",79],"(",")",",",["T_WHITESPACE","\n      ",79],["T_CONSTANT_ENCAPSED_STRING","'#contents'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$contents",80],",",["T_WHITESPACE","\n      ",80],["T_CONSTANT_ENCAPSED_STRING","'#depth'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$node",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","book",81],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",81],"]",",",["T_WHITESPACE","\n      ",81],["T_CONSTANT_ENCAPSED_STRING","'#cache'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n        ",82],["T_CONSTANT_ENCAPSED_STRING","'tags'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$node",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getEntityType",83],"(",")",["T_OBJECT_OPERATOR","->",83],["T_STRING","getListCacheTags",83],"(",")",",",["T_WHITESPACE","\n      ",83],"]",",",["T_WHITESPACE","\n    ",84],")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Traverses the book tree to build printable or exportable output.\n   *\n   * During the traversal, the callback is applied to each node and is called\n   * recursively for each child of the node (in weight, title order).\n   *\n   * @param array $tree\n   *   A subtree of the book menu hierarchy, rooted at the current page.\n   * @param callable $callable\n   *   A callback to be called upon visiting a node in the tree.\n   *\n   * @return string\n   *   The output generated in visiting each node.\n   *\/",88],["T_WHITESPACE","\n  ",101],["T_PROTECTED","protected",102],["T_WHITESPACE"," ",102],["T_FUNCTION","function",102],["T_WHITESPACE"," ",102],["T_STRING","exportTraverse",102],"(",["T_ARRAY","array",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$tree",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$callable",102],")",["T_WHITESPACE"," ",102],"{",["T_WHITESPACE","\n    ",102],["T_COMMENT","\/\/ If there is no valid callable, use the default callback.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$callable",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"!",["T_EMPTY","empty",104],"(",["T_VARIABLE","$callable",104],")",["T_WHITESPACE"," ",104],"?",["T_WHITESPACE"," ",104],["T_VARIABLE","$callable",104],["T_WHITESPACE"," ",104],":",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_VARIABLE","$this",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'bookNodeExport'",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_VARIABLE","$build",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",")",";",["T_WHITESPACE","\n    ",106],["T_FOREACH","foreach",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$tree",107],["T_WHITESPACE"," ",107],["T_AS","as",107],["T_WHITESPACE"," ",107],["T_VARIABLE","$data",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n      ",107],["T_COMMENT","\/\/ Note- access checking is already performed when building the tree.\n",108],["T_WHITESPACE","      ",109],["T_IF","if",109],["T_WHITESPACE"," ",109],"(",["T_VARIABLE","$node",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","nodeStorage",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","load",109],"(",["T_VARIABLE","$data",109],"[",["T_CONSTANT_ENCAPSED_STRING","'link'",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",109],"]",")",")",["T_WHITESPACE"," ",109],"{",["T_WHITESPACE","\n        ",109],["T_VARIABLE","$children",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$data",110],"[",["T_CONSTANT_ENCAPSED_STRING","'below'",110],"]",["T_WHITESPACE"," ",110],"?",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","exportTraverse",110],"(",["T_VARIABLE","$data",110],"[",["T_CONSTANT_ENCAPSED_STRING","'below'",110],"]",",",["T_WHITESPACE"," ",110],["T_VARIABLE","$callable",110],")",["T_WHITESPACE"," ",110],":",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","''",110],";",["T_WHITESPACE","\n        ",110],["T_VARIABLE","$build",111],"[","]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","call_user_func",111],"(",["T_VARIABLE","$callable",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$node",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$children",111],")",";",["T_WHITESPACE","\n      ",111],"}",["T_WHITESPACE","\n    ",112],"}",["T_WHITESPACE","\n\n    ",113],["T_RETURN","return",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$build",115],";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * Generates printer-friendly HTML for a node.\n   *\n   * @param \\Drupal\\node\\NodeInterface $node\n   *   The node that will be output.\n   * @param string $children\n   *   (optional) All the rendered child nodes within the current node. Defaults\n   *   to an empty string.\n   *\n   * @return array\n   *   A render array for the exported HTML of a given node.\n   *\n   * @see \\Drupal\\book\\BookExport::exportTraverse()\n   *\/",118],["T_WHITESPACE","\n  ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","bookNodeExport",132],"(",["T_STRING","NodeInterface",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$node",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$children",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","''",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$build",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","viewBuilder",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","view",133],"(",["T_VARIABLE","$node",133],",",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'print'",133],",",["T_WHITESPACE"," ",133],["T_STRING","NULL",133],")",";",["T_WHITESPACE","\n    ",133],["T_UNSET","unset",134],"(",["T_VARIABLE","$build",134],"[",["T_CONSTANT_ENCAPSED_STRING","'#theme'",134],"]",")",";",["T_WHITESPACE","\n\n    ",134],["T_RETURN","return",136],["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n      ",136],["T_CONSTANT_ENCAPSED_STRING","'#theme'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'book_node_export_html'",137],",",["T_WHITESPACE","\n      ",137],["T_CONSTANT_ENCAPSED_STRING","'#content'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_VARIABLE","$build",138],",",["T_WHITESPACE","\n      ",138],["T_CONSTANT_ENCAPSED_STRING","'#node'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$node",139],",",["T_WHITESPACE","\n      ",139],["T_CONSTANT_ENCAPSED_STRING","'#children'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_VARIABLE","$children",140],",",["T_WHITESPACE","\n    ",140],")",";",["T_WHITESPACE","\n  ",141],"}",["T_WHITESPACE","\n\n",142],"}",["T_WHITESPACE","\n",144]]
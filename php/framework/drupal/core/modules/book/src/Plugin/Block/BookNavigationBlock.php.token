[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","book",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Block",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Block",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BlockBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","book",6],["T_NS_SEPARATOR","\\",6],["T_STRING","BookManagerInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Form",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FormStateInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","ContainerFactoryPluginInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","DependencyInjection",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ContainerInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","HttpFoundation",11],["T_NS_SEPARATOR","\\",11],["T_STRING","RequestStack",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","EntityStorageInterface",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Provides a 'Book navigation' block.\n *\n * @Block(\n *   id = \"book_navigation\",\n *   admin_label = @Translation(\"Book navigation\"),\n *   category = @Translation(\"Menus\")\n * )\n *\/",14],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","BookNavigationBlock",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","BlockBase",23],["T_WHITESPACE"," ",23],["T_IMPLEMENTS","implements",23],["T_WHITESPACE"," ",23],["T_STRING","ContainerFactoryPluginInterface",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The request object.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\RequestStack\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$requestStack",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * The book manager.\n   *\n   * @var \\Drupal\\book\\BookManagerInterface\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$bookManager",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * The node storage.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$nodeStorage",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * Constructs a new BookNavigationBlock instance.\n   *\n   * @param array $configuration\n   *   A configuration array containing information about the plugin instance.\n   * @param string $plugin_id\n   *   The plugin_id for the plugin instance.\n   * @param mixed $plugin_definition\n   *   The plugin implementation definition.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack object.\n   * @param \\Drupal\\book\\BookManagerInterface $book_manager\n   *   The book manager.\n   * @param \\Drupal\\Core\\Entity\\EntityStorageInterface $node_storage\n   *   The node storage.\n   *\/",46],["T_WHITESPACE","\n  ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","__construct",62],"(",["T_ARRAY","array",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$configuration",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$plugin_id",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$plugin_definition",62],",",["T_WHITESPACE"," ",62],["T_STRING","RequestStack",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$request_stack",62],",",["T_WHITESPACE"," ",62],["T_STRING","BookManagerInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$book_manager",62],",",["T_WHITESPACE"," ",62],["T_STRING","EntityStorageInterface",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$node_storage",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_STRING","parent",63],["T_DOUBLE_COLON","::",63],["T_STRING","__construct",63],"(",["T_VARIABLE","$configuration",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$plugin_id",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$plugin_definition",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","requestStack",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$request_stack",65],";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","bookManager",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$book_manager",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","nodeStorage",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$node_storage",67],";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","create",73],"(",["T_STRING","ContainerInterface",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$container",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$configuration",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$plugin_id",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$plugin_definition",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STATIC","static",74],"(",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$configuration",75],",",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$plugin_id",76],",",["T_WHITESPACE","\n      ",76],["T_VARIABLE","$plugin_definition",77],",",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$container",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",78],")",",",["T_WHITESPACE","\n      ",78],["T_VARIABLE","$container",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","get",79],"(",["T_CONSTANT_ENCAPSED_STRING","'book.manager'",79],")",",",["T_WHITESPACE","\n      ",79],["T_VARIABLE","$container",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","get",80],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",80],")",["T_OBJECT_OPERATOR","->",80],["T_STRING","getStorage",80],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",80],")",["T_WHITESPACE","\n    ",80],")",";",["T_WHITESPACE","\n  ",81],"}",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",84],["T_WHITESPACE","\n  ",86],["T_PUBLIC","public",87],["T_WHITESPACE"," ",87],["T_FUNCTION","function",87],["T_WHITESPACE"," ",87],["T_STRING","defaultConfiguration",87],"(",")",["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n    ",87],["T_RETURN","return",88],["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'block_mode'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"all pages\"",89],",",["T_WHITESPACE","\n    ",89],")",";",["T_WHITESPACE","\n  ",90],"}",["T_WHITESPACE","\n\n  ",91],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",93],["T_WHITESPACE","\n  ",95],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","blockForm",96],"(",["T_VARIABLE","$form",96],",",["T_WHITESPACE"," ",96],["T_STRING","FormStateInterface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$form_state",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$options",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'all pages'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","t",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Show block on all pages'",98],")",",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'book pages'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","t",99],"(",["T_CONSTANT_ENCAPSED_STRING","'Show block only on book pages'",99],")",",",["T_WHITESPACE","\n    ",99],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$form",101],"[",["T_CONSTANT_ENCAPSED_STRING","'book_block_mode'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'#type'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'radios'",102],",",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'#title'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","t",103],"(",["T_CONSTANT_ENCAPSED_STRING","'Book navigation block display'",103],")",",",["T_WHITESPACE","\n      ",103],["T_CONSTANT_ENCAPSED_STRING","'#options'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_VARIABLE","$options",104],",",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'#default_value'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","configuration",105],"[",["T_CONSTANT_ENCAPSED_STRING","'block_mode'",105],"]",",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'#description'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","t",106],"(",["T_CONSTANT_ENCAPSED_STRING","\"If <em>Show block on all pages<\/em> is selected, the block will contain the automatically generated menus for all of the site's books. If <em>Show block only on book pages<\/em> is selected, the block will contain only the one menu corresponding to the current page's book. In this case, if the current page is not in a book, no block will be displayed. The <em>Page specific visibility settings<\/em> or other visibility settings can be used in addition to selectively display this block.\"",106],")",",",["T_WHITESPACE","\n      ",106],")",";",["T_WHITESPACE","\n\n    ",107],["T_RETURN","return",109],["T_WHITESPACE"," ",109],["T_VARIABLE","$form",109],";",["T_WHITESPACE","\n  ",109],"}",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",112],["T_WHITESPACE","\n  ",114],["T_PUBLIC","public",115],["T_WHITESPACE"," ",115],["T_FUNCTION","function",115],["T_WHITESPACE"," ",115],["T_STRING","blockSubmit",115],"(",["T_VARIABLE","$form",115],",",["T_WHITESPACE"," ",115],["T_STRING","FormStateInterface",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$form_state",115],")",["T_WHITESPACE"," ",115],"{",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","configuration",116],"[",["T_CONSTANT_ENCAPSED_STRING","'block_mode'",116],"]",["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],["T_VARIABLE","$form_state",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getValue",116],"(",["T_CONSTANT_ENCAPSED_STRING","'book_block_mode'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",119],["T_WHITESPACE","\n  ",121],["T_PUBLIC","public",122],["T_WHITESPACE"," ",122],["T_FUNCTION","function",122],["T_WHITESPACE"," ",122],["T_STRING","build",122],"(",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$current_bid",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_LNUMBER","0",123],";",["T_WHITESPACE","\n\n    ",123],["T_IF","if",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$node",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","requestStack",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getCurrentRequest",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","get",125],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",125],")",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$current_bid",126],["T_WHITESPACE"," ",126],"=",["T_WHITESPACE"," ",126],["T_EMPTY","empty",126],"(",["T_VARIABLE","$node",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","book",126],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",126],"]",")",["T_WHITESPACE"," ",126],"?",["T_WHITESPACE"," ",126],["T_LNUMBER","0",126],["T_WHITESPACE"," ",126],":",["T_WHITESPACE"," ",126],["T_VARIABLE","$node",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","book",126],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",126],"]",";",["T_WHITESPACE","\n    ",126],"}",["T_WHITESPACE","\n    ",127],["T_IF","if",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","configuration",128],"[",["T_CONSTANT_ENCAPSED_STRING","'block_mode'",128],"]",["T_WHITESPACE"," ",128],["T_IS_EQUAL","==",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'all pages'",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_VARIABLE","$book_menus",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",")",";",["T_WHITESPACE","\n      ",129],["T_VARIABLE","$pseudo_tree",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_LNUMBER","0",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_ARRAY","array",130],"(",["T_CONSTANT_ENCAPSED_STRING","'below'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_STRING","FALSE",130],")",")",";",["T_WHITESPACE","\n      ",130],["T_FOREACH","foreach",131],["T_WHITESPACE"," ",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","bookManager",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","getAllBooks",131],"(",")",["T_WHITESPACE"," ",131],["T_AS","as",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$book_id",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$book",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n        ",131],["T_IF","if",132],["T_WHITESPACE"," ",132],"(",["T_VARIABLE","$book",132],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",132],"]",["T_WHITESPACE"," ",132],["T_IS_EQUAL","==",132],["T_WHITESPACE"," ",132],["T_VARIABLE","$current_bid",132],")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n          ",132],["T_COMMENT","\/\/ If the current page is a node associated with a book, the menu\n",133],["T_WHITESPACE","          ",134],["T_COMMENT","\/\/ needs to be retrieved.\n",134],["T_WHITESPACE","          ",135],["T_VARIABLE","$data",135],["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","bookManager",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","bookTreeAllData",135],"(",["T_VARIABLE","$node",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","book",135],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",135],"]",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$node",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","book",135],")",";",["T_WHITESPACE","\n          ",135],["T_VARIABLE","$book_menus",136],"[",["T_VARIABLE","$book_id",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","bookManager",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","bookTreeOutput",136],"(",["T_VARIABLE","$data",136],")",";",["T_WHITESPACE","\n        ",136],"}",["T_WHITESPACE","\n        ",137],["T_ELSE","else",138],["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n          ",138],["T_COMMENT","\/\/ Since we know we will only display a link to the top node, there\n",139],["T_WHITESPACE","          ",140],["T_COMMENT","\/\/ is no reason to run an additional menu tree query for each book.\n",140],["T_WHITESPACE","          ",141],["T_VARIABLE","$book",141],"[",["T_CONSTANT_ENCAPSED_STRING","'in_active_trail'",141],"]",["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_STRING","FALSE",141],";",["T_WHITESPACE","\n          ",141],["T_COMMENT","\/\/ Check whether user can access the book link.\n",142],["T_WHITESPACE","          ",143],["T_VARIABLE","$book_node",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","nodeStorage",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","load",143],"(",["T_VARIABLE","$book",143],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",143],"]",")",";",["T_WHITESPACE","\n          ",143],["T_VARIABLE","$book",144],"[",["T_CONSTANT_ENCAPSED_STRING","'access'",144],"]",["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$book_node",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","access",144],"(",["T_CONSTANT_ENCAPSED_STRING","'view'",144],")",";",["T_WHITESPACE","\n          ",144],["T_VARIABLE","$pseudo_tree",145],"[",["T_LNUMBER","0",145],"]","[",["T_CONSTANT_ENCAPSED_STRING","'link'",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_VARIABLE","$book",145],";",["T_WHITESPACE","\n          ",145],["T_VARIABLE","$book_menus",146],"[",["T_VARIABLE","$book_id",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","bookManager",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","bookTreeOutput",146],"(",["T_VARIABLE","$pseudo_tree",146],")",";",["T_WHITESPACE","\n        ",146],"}",["T_WHITESPACE","\n        ",147],["T_VARIABLE","$book_menus",148],"[",["T_VARIABLE","$book_id",148],"]",["T_WHITESPACE"," ",148],["T_PLUS_EQUAL","+=",148],["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_WHITESPACE","\n          ",148],["T_CONSTANT_ENCAPSED_STRING","'#book_title'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$book",149],"[",["T_CONSTANT_ENCAPSED_STRING","'title'",149],"]",",",["T_WHITESPACE","\n        ",149],")",";",["T_WHITESPACE","\n      ",150],"}",["T_WHITESPACE","\n      ",151],["T_IF","if",152],["T_WHITESPACE"," ",152],"(",["T_VARIABLE","$book_menus",152],")",["T_WHITESPACE"," ",152],"{",["T_WHITESPACE","\n        ",152],["T_RETURN","return",153],["T_WHITESPACE"," ",153],["T_ARRAY","array",153],"(",["T_WHITESPACE","\n          ",153],["T_CONSTANT_ENCAPSED_STRING","'#theme'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'book_all_books_block'",154],",",["T_WHITESPACE","\n        ",154],")",["T_WHITESPACE"," ",155],"+",["T_WHITESPACE"," ",155],["T_VARIABLE","$book_menus",155],";",["T_WHITESPACE","\n      ",155],"}",["T_WHITESPACE","\n    ",156],"}",["T_WHITESPACE","\n    ",157],["T_ELSEIF","elseif",158],["T_WHITESPACE"," ",158],"(",["T_VARIABLE","$current_bid",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n      ",158],["T_COMMENT","\/\/ Only display this block when the user is browsing a book and do\n",159],["T_WHITESPACE","      ",160],["T_COMMENT","\/\/ not show unpublished books.\n",160],["T_WHITESPACE","      ",161],["T_VARIABLE","$nid",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_NS_SEPARATOR","\\",161],["T_STRING","Drupal",161],["T_DOUBLE_COLON","::",161],["T_STRING","entityQuery",161],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",161],")",["T_WHITESPACE","\n        ",161],["T_OBJECT_OPERATOR","->",162],["T_STRING","condition",162],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$node",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","book",162],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",162],"]",",",["T_WHITESPACE"," ",162],["T_CONSTANT_ENCAPSED_STRING","'='",162],")",["T_WHITESPACE","\n        ",162],["T_OBJECT_OPERATOR","->",163],["T_STRING","condition",163],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",163],",",["T_WHITESPACE"," ",163],["T_STRING","NODE_PUBLISHED",163],")",["T_WHITESPACE","\n        ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","execute",164],"(",")",";",["T_WHITESPACE","\n\n      ",164],["T_COMMENT","\/\/ Only show the block if the user has view access for the top-level node.\n",166],["T_WHITESPACE","      ",167],["T_IF","if",167],["T_WHITESPACE"," ",167],"(",["T_VARIABLE","$nid",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$tree",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","bookManager",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","bookTreeAllData",168],"(",["T_VARIABLE","$node",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","book",168],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",168],"]",",",["T_WHITESPACE"," ",168],["T_VARIABLE","$node",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","book",168],")",";",["T_WHITESPACE","\n        ",168],["T_COMMENT","\/\/ There should only be one element at the top level.\n",169],["T_WHITESPACE","        ",170],["T_VARIABLE","$data",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_STRING","array_shift",170],"(",["T_VARIABLE","$tree",170],")",";",["T_WHITESPACE","\n        ",170],["T_VARIABLE","$below",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","bookManager",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","bookTreeOutput",171],"(",["T_VARIABLE","$data",171],"[",["T_CONSTANT_ENCAPSED_STRING","'below'",171],"]",")",";",["T_WHITESPACE","\n        ",171],["T_IF","if",172],["T_WHITESPACE"," ",172],"(","!",["T_EMPTY","empty",172],"(",["T_VARIABLE","$below",172],")",")",["T_WHITESPACE"," ",172],"{",["T_WHITESPACE","\n          ",172],["T_RETURN","return",173],["T_WHITESPACE"," ",173],["T_VARIABLE","$below",173],";",["T_WHITESPACE","\n        ",173],"}",["T_WHITESPACE","\n      ",174],"}",["T_WHITESPACE","\n    ",175],"}",["T_WHITESPACE","\n    ",176],["T_RETURN","return",177],["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",";",["T_WHITESPACE","\n  ",177],"}",["T_WHITESPACE","\n\n  ",178],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",180],["T_WHITESPACE","\n  ",182],["T_PUBLIC","public",183],["T_WHITESPACE"," ",183],["T_FUNCTION","function",183],["T_WHITESPACE"," ",183],["T_STRING","getCacheContexts",183],"(",")",["T_WHITESPACE"," ",183],"{",["T_WHITESPACE","\n    ",183],["T_RETURN","return",184],["T_WHITESPACE"," ",184],["T_STRING","Cache",184],["T_DOUBLE_COLON","::",184],["T_STRING","mergeContexts",184],"(",["T_STRING","parent",184],["T_DOUBLE_COLON","::",184],["T_STRING","getCacheContexts",184],"(",")",",",["T_WHITESPACE"," ",184],"[",["T_CONSTANT_ENCAPSED_STRING","'route.book_navigation'",184],"]",")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n  ",185],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @todo Make cacheable in https:\/\/www.drupal.org\/node\/2483181\n   *\/",187],["T_WHITESPACE","\n  ",191],["T_PUBLIC","public",192],["T_WHITESPACE"," ",192],["T_FUNCTION","function",192],["T_WHITESPACE"," ",192],["T_STRING","getCacheMaxAge",192],"(",")",["T_WHITESPACE"," ",192],"{",["T_WHITESPACE","\n    ",192],["T_RETURN","return",193],["T_WHITESPACE"," ",193],["T_LNUMBER","0",193],";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n",194],"}",["T_WHITESPACE","\n",196]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","book",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","SafeMarkup",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Cache",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","EntityInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","simpletest",8],["T_NS_SEPARATOR","\\",8],["T_STRING","WebTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RoleInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Create a book, add pages, and test book interface.\n *\n * @group book\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","BookTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","WebTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Modules to install.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'book'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'block'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'node_access_test'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'book_test'",23],")",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * A book node.\n   *\n   * @var \\Drupal\\node\\NodeInterface\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$book",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * A user with permission to create and edit books.\n   *\n   * @var object\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$bookAuthor",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * A user with permission to view a book and access printer-friendly version.\n   *\n   * @var object\n   *\/",39],["T_WHITESPACE","\n  ",43],["T_PROTECTED","protected",44],["T_WHITESPACE"," ",44],["T_VARIABLE","$webUser",44],";",["T_WHITESPACE","\n\n  ",44],["T_DOC_COMMENT","\/**\n   * A user with permission to create and edit books and to administer blocks.\n   *\n   * @var object\n   *\/",46],["T_WHITESPACE","\n  ",50],["T_PROTECTED","protected",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$adminUser",51],";",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * A user without the 'node test view' permission.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",53],["T_WHITESPACE","\n  ",57],["T_PROTECTED","protected",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$webUserWithoutNodeAccess",58],";",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","setUp",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_STRING","parent",64],["T_DOUBLE_COLON","::",64],["T_STRING","setUp",64],"(",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalPlaceBlock",65],"(",["T_CONSTANT_ENCAPSED_STRING","'system_breadcrumb_block'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalPlaceBlock",66],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",66],")",";",["T_WHITESPACE","\n\n    ",66],["T_COMMENT","\/\/ node_access_test requires a node_access_rebuild().\n",68],["T_WHITESPACE","    ",69],["T_STRING","node_access_rebuild",69],"(",")",";",["T_WHITESPACE","\n\n    ",69],["T_COMMENT","\/\/ Create users.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","bookAuthor",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalCreateUser",72],"(",["T_ARRAY","array",72],"(",["T_CONSTANT_ENCAPSED_STRING","'create new books'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'create book content'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'edit own book content'",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'add content to books'",72],")",")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","webUser",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalCreateUser",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'access printer-friendly version'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'node test view'",73],")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","webUserWithoutNodeAccess",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","drupalCreateUser",74],"(",["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'access printer-friendly version'",74],")",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","adminUser",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","drupalCreateUser",75],"(",["T_ARRAY","array",75],"(",["T_CONSTANT_ENCAPSED_STRING","'create new books'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'create book content'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'edit any book content'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'delete any book content'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'add content to books'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'administer permissions'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'administer book outlines'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'node test view'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",75],")",")",";",["T_WHITESPACE","\n  ",75],"}",["T_WHITESPACE","\n\n  ",76],["T_DOC_COMMENT","\/**\n   * Creates a new book with a page hierarchy.\n   *\n   * @return \\Drupal\\node\\NodeInterface[]\n   *\/",78],["T_WHITESPACE","\n  ",82],["T_FUNCTION","function",83],["T_WHITESPACE"," ",83],["T_STRING","createBook",83],"(",")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n    ",83],["T_COMMENT","\/\/ Create new book.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalLogin",85],"(",["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","bookAuthor",85],")",";",["T_WHITESPACE","\n\n    ",85],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","book",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","createBookNode",87],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$book",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","book",88],";",["T_WHITESPACE","\n\n    ",88],["T_COMMENT","\/*\n     * Add page hierarchy to book.\n     * Book\n     *  |- Node 0\n     *   |- Node 1\n     *   |- Node 2\n     *  |- Node 3\n     *  |- Node 4\n     *\/",90],["T_WHITESPACE","\n    ",98],["T_VARIABLE","$nodes",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$nodes",100],"[","]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","createBookNode",100],"(",["T_VARIABLE","$book",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","id",100],"(",")",")",";",["T_WHITESPACE"," ",100],["T_COMMENT","\/\/ Node 0.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$nodes",101],"[","]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","createBookNode",101],"(",["T_VARIABLE","$book",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","id",101],"(",")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$nodes",101],"[",["T_LNUMBER","0",101],"]",["T_OBJECT_OPERATOR","->",101],["T_STRING","book",101],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",101],"]",")",";",["T_WHITESPACE"," ",101],["T_COMMENT","\/\/ Node 1.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$nodes",102],"[","]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","createBookNode",102],"(",["T_VARIABLE","$book",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","id",102],"(",")",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$nodes",102],"[",["T_LNUMBER","0",102],"]",["T_OBJECT_OPERATOR","->",102],["T_STRING","book",102],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",102],"]",")",";",["T_WHITESPACE"," ",102],["T_COMMENT","\/\/ Node 2.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$nodes",103],"[","]",["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","createBookNode",103],"(",["T_VARIABLE","$book",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","id",103],"(",")",")",";",["T_WHITESPACE"," ",103],["T_COMMENT","\/\/ Node 3.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$nodes",104],"[","]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","createBookNode",104],"(",["T_VARIABLE","$book",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","id",104],"(",")",")",";",["T_WHITESPACE"," ",104],["T_COMMENT","\/\/ Node 4.\n",104],["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","drupalLogout",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_RETURN","return",108],["T_WHITESPACE"," ",108],["T_VARIABLE","$nodes",108],";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Tests the book navigation cache context.\n   *\n   * @see \\Drupal\\book\\Cache\\BookNavigationCacheContext\n   *\/",111],["T_WHITESPACE","\n  ",115],["T_PUBLIC","public",116],["T_WHITESPACE"," ",116],["T_FUNCTION","function",116],["T_WHITESPACE"," ",116],["T_STRING","testBookNavigationCacheContext",116],"(",")",["T_WHITESPACE"," ",116],"{",["T_WHITESPACE","\n    ",116],["T_COMMENT","\/\/ Create a page node.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","drupalCreateContentType",118],"(","[",["T_CONSTANT_ENCAPSED_STRING","'type'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'page'",118],"]",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$page",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","drupalCreateNode",119],"(",")",";",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ Create a book, consisting of book nodes.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$book_nodes",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","createBook",122],"(",")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ Enable the debug output.\n",124],["T_WHITESPACE","    ",125],["T_NS_SEPARATOR","\\",125],["T_STRING","Drupal",125],["T_DOUBLE_COLON","::",125],["T_STRING","state",125],"(",")",["T_OBJECT_OPERATOR","->",125],["T_STRING","set",125],"(",["T_CONSTANT_ENCAPSED_STRING","'book_test.debug_book_navigation_cache_context'",125],",",["T_WHITESPACE"," ",125],["T_STRING","TRUE",125],")",";",["T_WHITESPACE","\n    ",125],["T_STRING","Cache",126],["T_DOUBLE_COLON","::",126],["T_STRING","invalidateTags",126],"(","[",["T_CONSTANT_ENCAPSED_STRING","'book_test.debug_book_navigation_cache_context'",126],"]",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","drupalLogin",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","bookAuthor",128],")",";",["T_WHITESPACE","\n\n    ",128],["T_COMMENT","\/\/ On non-node route.\n",130],["T_WHITESPACE","    ",131],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","drupalGet",131],"(",["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","adminUser",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","urlInfo",131],"(",")",")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertRaw",132],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=book.none'",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ On non-book node route.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","drupalGet",135],"(",["T_VARIABLE","$page",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","urlInfo",135],"(",")",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertRaw",136],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=book.none'",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ On book node route.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","drupalGet",139],"(",["T_VARIABLE","$book_nodes",139],"[",["T_LNUMBER","0",139],"]",["T_OBJECT_OPERATOR","->",139],["T_STRING","urlInfo",139],"(",")",")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertRaw",140],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=0|2|3'",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","drupalGet",141],"(",["T_VARIABLE","$book_nodes",141],"[",["T_LNUMBER","1",141],"]",["T_OBJECT_OPERATOR","->",141],["T_STRING","urlInfo",141],"(",")",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertRaw",142],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=0|2|3|4'",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$this",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","drupalGet",143],"(",["T_VARIABLE","$book_nodes",143],"[",["T_LNUMBER","2",143],"]",["T_OBJECT_OPERATOR","->",143],["T_STRING","urlInfo",143],"(",")",")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertRaw",144],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=0|2|3|5'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","drupalGet",145],"(",["T_VARIABLE","$book_nodes",145],"[",["T_LNUMBER","3",145],"]",["T_OBJECT_OPERATOR","->",145],["T_STRING","urlInfo",145],"(",")",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","assertRaw",146],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=0|2|6'",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalGet",147],"(",["T_VARIABLE","$book_nodes",147],"[",["T_LNUMBER","4",147],"]",["T_OBJECT_OPERATOR","->",147],["T_STRING","urlInfo",147],"(",")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertRaw",148],"(",["T_CONSTANT_ENCAPSED_STRING","'[route.book_navigation]=0|2|7'",148],")",";",["T_WHITESPACE","\n  ",148],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * Tests saving the book outline on an empty book.\n   *\/",151],["T_WHITESPACE","\n  ",153],["T_FUNCTION","function",154],["T_WHITESPACE"," ",154],["T_STRING","testEmptyBook",154],"(",")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n    ",154],["T_COMMENT","\/\/ Create a new empty book.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalLogin",156],"(",["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","bookAuthor",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$book",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","createBookNode",157],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","drupalLogout",158],"(",")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ Log in as a user with access to the book outline and save the form.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","drupalLogin",161],"(",["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","adminUser",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalPostForm",162],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/book\/'",162],["T_WHITESPACE"," ",162],".",["T_WHITESPACE"," ",162],["T_VARIABLE","$book",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","id",162],"(",")",",",["T_WHITESPACE"," ",162],["T_ARRAY","array",162],"(",")",",",["T_WHITESPACE"," ",162],["T_STRING","t",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Save book pages'",162],")",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertText",163],"(",["T_STRING","t",163],"(",["T_CONSTANT_ENCAPSED_STRING","'Updated book @book.'",163],",",["T_WHITESPACE"," ",163],["T_ARRAY","array",163],"(",["T_CONSTANT_ENCAPSED_STRING","'@book'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$book",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","label",163],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",163],"}",["T_WHITESPACE","\n\n  ",164],["T_DOC_COMMENT","\/**\n   * Tests book functionality through node interfaces.\n   *\/",166],["T_WHITESPACE","\n  ",168],["T_FUNCTION","function",169],["T_WHITESPACE"," ",169],["T_STRING","testBook",169],"(",")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n    ",169],["T_COMMENT","\/\/ Create new book.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$nodes",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","createBook",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$book",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","book",172],";",["T_WHITESPACE","\n\n    ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","drupalLogin",174],"(",["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","webUser",174],")",";",["T_WHITESPACE","\n\n    ",174],["T_COMMENT","\/\/ Check that book pages display along with the correct outlines and\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ previous\/next links.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","checkBookNode",178],"(",["T_VARIABLE","$book",178],",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",["T_VARIABLE","$nodes",178],"[",["T_LNUMBER","0",178],"]",",",["T_WHITESPACE"," ",178],["T_VARIABLE","$nodes",178],"[",["T_LNUMBER","3",178],"]",",",["T_WHITESPACE"," ",178],["T_VARIABLE","$nodes",178],"[",["T_LNUMBER","4",178],"]",")",",",["T_WHITESPACE"," ",178],["T_STRING","FALSE",178],",",["T_WHITESPACE"," ",178],["T_STRING","FALSE",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$nodes",178],"[",["T_LNUMBER","0",178],"]",",",["T_WHITESPACE"," ",178],["T_ARRAY","array",178],"(",")",")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","checkBookNode",179],"(",["T_VARIABLE","$nodes",179],"[",["T_LNUMBER","0",179],"]",",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_VARIABLE","$nodes",179],"[",["T_LNUMBER","1",179],"]",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$nodes",179],"[",["T_LNUMBER","2",179],"]",")",",",["T_WHITESPACE"," ",179],["T_VARIABLE","$book",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$book",179],",",["T_WHITESPACE"," ",179],["T_VARIABLE","$nodes",179],"[",["T_LNUMBER","1",179],"]",",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_VARIABLE","$book",179],")",")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","checkBookNode",180],"(",["T_VARIABLE","$nodes",180],"[",["T_LNUMBER","1",180],"]",",",["T_WHITESPACE"," ",180],["T_STRING","NULL",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$nodes",180],"[",["T_LNUMBER","0",180],"]",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$nodes",180],"[",["T_LNUMBER","0",180],"]",",",["T_WHITESPACE"," ",180],["T_VARIABLE","$nodes",180],"[",["T_LNUMBER","2",180],"]",",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_VARIABLE","$book",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$nodes",180],"[",["T_LNUMBER","0",180],"]",")",")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","checkBookNode",181],"(",["T_VARIABLE","$nodes",181],"[",["T_LNUMBER","2",181],"]",",",["T_WHITESPACE"," ",181],["T_STRING","NULL",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$nodes",181],"[",["T_LNUMBER","1",181],"]",",",["T_WHITESPACE"," ",181],["T_VARIABLE","$nodes",181],"[",["T_LNUMBER","0",181],"]",",",["T_WHITESPACE"," ",181],["T_VARIABLE","$nodes",181],"[",["T_LNUMBER","3",181],"]",",",["T_WHITESPACE"," ",181],["T_ARRAY","array",181],"(",["T_VARIABLE","$book",181],",",["T_WHITESPACE"," ",181],["T_VARIABLE","$nodes",181],"[",["T_LNUMBER","0",181],"]",")",")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","checkBookNode",182],"(",["T_VARIABLE","$nodes",182],"[",["T_LNUMBER","3",182],"]",",",["T_WHITESPACE"," ",182],["T_STRING","NULL",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$nodes",182],"[",["T_LNUMBER","2",182],"]",",",["T_WHITESPACE"," ",182],["T_VARIABLE","$book",182],",",["T_WHITESPACE"," ",182],["T_VARIABLE","$nodes",182],"[",["T_LNUMBER","4",182],"]",",",["T_WHITESPACE"," ",182],["T_ARRAY","array",182],"(",["T_VARIABLE","$book",182],")",")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","checkBookNode",183],"(",["T_VARIABLE","$nodes",183],"[",["T_LNUMBER","4",183],"]",",",["T_WHITESPACE"," ",183],["T_STRING","NULL",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$nodes",183],"[",["T_LNUMBER","3",183],"]",",",["T_WHITESPACE"," ",183],["T_VARIABLE","$book",183],",",["T_WHITESPACE"," ",183],["T_STRING","FALSE",183],",",["T_WHITESPACE"," ",183],["T_ARRAY","array",183],"(",["T_VARIABLE","$book",183],")",")",";",["T_WHITESPACE","\n\n    ",183],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","drupalLogout",185],"(",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","drupalLogin",186],"(",["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","bookAuthor",186],")",";",["T_WHITESPACE","\n\n    ",186],["T_COMMENT","\/\/ Check the presence of expected cache tags.\n",188],["T_WHITESPACE","    ",189],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","drupalGet",189],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/book'",189],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertCacheTag",190],"(",["T_CONSTANT_ENCAPSED_STRING","'config:book.settings'",190],")",";",["T_WHITESPACE","\n\n    ",190],["T_COMMENT","\/*\n     * Add Node 5 under Node 3.\n     * Book\n     *  |- Node 0\n     *   |- Node 1\n     *   |- Node 2\n     *  |- Node 3\n     *   |- Node 5\n     *  |- Node 4\n     *\/",192],["T_WHITESPACE","\n    ",201],["T_VARIABLE","$nodes",202],"[","]",["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","createBookNode",202],"(",["T_VARIABLE","$book",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","id",202],"(",")",",",["T_WHITESPACE"," ",202],["T_VARIABLE","$nodes",202],"[",["T_LNUMBER","3",202],"]",["T_OBJECT_OPERATOR","->",202],["T_STRING","book",202],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",202],"]",")",";",["T_WHITESPACE"," ",202],["T_COMMENT","\/\/ Node 5.\n",202],["T_WHITESPACE","    ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","drupalLogout",203],"(",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","drupalLogin",204],"(",["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","webUser",204],")",";",["T_WHITESPACE","\n    ",204],["T_COMMENT","\/\/ Verify the new outline - make sure we don't get stale cached data.\n",205],["T_WHITESPACE","    ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","checkBookNode",206],"(",["T_VARIABLE","$nodes",206],"[",["T_LNUMBER","3",206],"]",",",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_VARIABLE","$nodes",206],"[",["T_LNUMBER","5",206],"]",")",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$nodes",206],"[",["T_LNUMBER","2",206],"]",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$book",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$nodes",206],"[",["T_LNUMBER","5",206],"]",",",["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_VARIABLE","$book",206],")",")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","checkBookNode",207],"(",["T_VARIABLE","$nodes",207],"[",["T_LNUMBER","4",207],"]",",",["T_WHITESPACE"," ",207],["T_STRING","NULL",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$nodes",207],"[",["T_LNUMBER","5",207],"]",",",["T_WHITESPACE"," ",207],["T_VARIABLE","$book",207],",",["T_WHITESPACE"," ",207],["T_STRING","FALSE",207],",",["T_WHITESPACE"," ",207],["T_ARRAY","array",207],"(",["T_VARIABLE","$book",207],")",")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","drupalLogout",208],"(",")",";",["T_WHITESPACE","\n    ",208],["T_COMMENT","\/\/ Create a second book, and move an existing book page into it.\n",209],["T_WHITESPACE","    ",210],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","drupalLogin",210],"(",["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","bookAuthor",210],")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$other_book",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","createBookNode",211],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",211],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$node",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","createBookNode",212],"(",["T_VARIABLE","$book",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","id",212],"(",")",")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$edit",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",["T_CONSTANT_ENCAPSED_STRING","'book[bid]'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$other_book",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","id",213],"(",")",")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","drupalPostForm",214],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",214],["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_VARIABLE","$node",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","id",214],"(",")",["T_WHITESPACE"," ",214],".",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",214],",",["T_WHITESPACE"," ",214],["T_VARIABLE","$edit",214],",",["T_WHITESPACE"," ",214],["T_STRING","t",214],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",214],")",")",";",["T_WHITESPACE","\n\n    ",214],["T_VARIABLE","$this",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","drupalLogout",216],"(",")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","drupalLogin",217],"(",["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","webUser",217],")",";",["T_WHITESPACE","\n\n    ",217],["T_COMMENT","\/\/ Check that the nodes in the second book are displayed correctly.\n",219],["T_WHITESPACE","    ",220],["T_COMMENT","\/\/ First we must set $this->book to the second book, so that the\n",220],["T_WHITESPACE","    ",221],["T_COMMENT","\/\/ correct regex will be generated for testing the outline.\n",221],["T_WHITESPACE","    ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","book",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_VARIABLE","$other_book",222],";",["T_WHITESPACE","\n    ",222],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","checkBookNode",223],"(",["T_VARIABLE","$other_book",223],",",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",["T_VARIABLE","$node",223],")",",",["T_WHITESPACE"," ",223],["T_STRING","FALSE",223],",",["T_WHITESPACE"," ",223],["T_STRING","FALSE",223],",",["T_WHITESPACE"," ",223],["T_VARIABLE","$node",223],",",["T_WHITESPACE"," ",223],["T_ARRAY","array",223],"(",")",")",";",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","checkBookNode",224],"(",["T_VARIABLE","$node",224],",",["T_WHITESPACE"," ",224],["T_STRING","NULL",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$other_book",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$other_book",224],",",["T_WHITESPACE"," ",224],["T_STRING","FALSE",224],",",["T_WHITESPACE"," ",224],["T_ARRAY","array",224],"(",["T_VARIABLE","$other_book",224],")",")",";",["T_WHITESPACE","\n\n    ",224],["T_COMMENT","\/\/ Test that we can save a book programatically.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","drupalLogin",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","bookAuthor",227],")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$book",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","createBookNode",228],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$book",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","save",229],"(",")",";",["T_WHITESPACE","\n  ",229],"}",["T_WHITESPACE","\n\n  ",230],["T_DOC_COMMENT","\/**\n   * Checks the outline of sub-pages; previous, up, and next.\n   *\n   * Also checks the printer friendly version of the outline.\n   *\n   * @param \\Drupal\\Core\\Entity\\EntityInterface $node\n   *   Node to check.\n   * @param $nodes\n   *   Nodes that should be in outline.\n   * @param $previous\n   *   (optional) Previous link node. Defaults to FALSE.\n   * @param $up\n   *   (optional) Up link node. Defaults to FALSE.\n   * @param $next\n   *   (optional) Next link node. Defaults to FALSE.\n   * @param array $breadcrumb\n   *   The nodes that should be displayed in the breadcrumb.\n   *\/",232],["T_WHITESPACE","\n  ",249],["T_FUNCTION","function",250],["T_WHITESPACE"," ",250],["T_STRING","checkBookNode",250],"(",["T_STRING","EntityInterface",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$node",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$nodes",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$previous",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","FALSE",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$up",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","FALSE",250],",",["T_WHITESPACE"," ",250],["T_VARIABLE","$next",250],["T_WHITESPACE"," ",250],"=",["T_WHITESPACE"," ",250],["T_STRING","FALSE",250],",",["T_WHITESPACE"," ",250],["T_ARRAY","array",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$breadcrumb",250],")",["T_WHITESPACE"," ",250],"{",["T_WHITESPACE","\n    ",250],["T_COMMENT","\/\/ $number does not use drupal_static as it should not be reset\n",251],["T_WHITESPACE","    ",252],["T_COMMENT","\/\/ since it uniquely identifies each call to checkBookNode().\n",252],["T_WHITESPACE","    ",253],["T_STATIC","static",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$number",253],["T_WHITESPACE"," ",253],"=",["T_WHITESPACE"," ",253],["T_LNUMBER","0",253],";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","drupalGet",254],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",254],["T_WHITESPACE"," ",254],".",["T_WHITESPACE"," ",254],["T_VARIABLE","$node",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","id",254],"(",")",")",";",["T_WHITESPACE","\n\n    ",254],["T_COMMENT","\/\/ Check outline structure.\n",256],["T_WHITESPACE","    ",257],["T_IF","if",257],["T_WHITESPACE"," ",257],"(",["T_VARIABLE","$nodes",257],["T_WHITESPACE"," ",257],["T_IS_NOT_IDENTICAL","!==",257],["T_WHITESPACE"," ",257],["T_STRING","NULL",257],")",["T_WHITESPACE"," ",257],"{",["T_WHITESPACE","\n      ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","assertPattern",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","generateOutlinePattern",258],"(",["T_VARIABLE","$nodes",258],")",",",["T_WHITESPACE"," ",258],["T_STRING","format_string",258],"(",["T_CONSTANT_ENCAPSED_STRING","'Node @number outline confirmed.'",258],",",["T_WHITESPACE"," ",258],["T_ARRAY","array",258],"(",["T_CONSTANT_ENCAPSED_STRING","'@number'",258],["T_WHITESPACE"," ",258],["T_DOUBLE_ARROW","=>",258],["T_WHITESPACE"," ",258],["T_VARIABLE","$number",258],")",")",")",";",["T_WHITESPACE","\n    ",258],"}",["T_WHITESPACE","\n    ",259],["T_ELSE","else",260],["T_WHITESPACE"," ",260],"{",["T_WHITESPACE","\n      ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","pass",261],"(",["T_STRING","format_string",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Node %number does not have outline.'",261],",",["T_WHITESPACE"," ",261],["T_ARRAY","array",261],"(",["T_CONSTANT_ENCAPSED_STRING","'%number'",261],["T_WHITESPACE"," ",261],["T_DOUBLE_ARROW","=>",261],["T_WHITESPACE"," ",261],["T_VARIABLE","$number",261],")",")",")",";",["T_WHITESPACE","\n    ",261],"}",["T_WHITESPACE","\n\n    ",262],["T_COMMENT","\/\/ Check previous, up, and next links.\n",264],["T_WHITESPACE","    ",265],["T_IF","if",265],["T_WHITESPACE"," ",265],"(",["T_VARIABLE","$previous",265],")",["T_WHITESPACE"," ",265],"{",["T_WHITESPACE","\n      ",265],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Url $url *\/",266],["T_WHITESPACE","\n      ",266],["T_VARIABLE","$url",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_VARIABLE","$previous",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","urlInfo",267],"(",")",";",["T_WHITESPACE","\n      ",267],["T_VARIABLE","$url",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setOptions",268],"(",["T_ARRAY","array",268],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",["T_CONSTANT_ENCAPSED_STRING","'rel'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_ARRAY","array",268],"(",["T_CONSTANT_ENCAPSED_STRING","'prev'",268],")",",",["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'title'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_STRING","t",268],"(",["T_CONSTANT_ENCAPSED_STRING","'Go to previous page'",268],")",")",")",")",";",["T_WHITESPACE","\n      ",268],["T_VARIABLE","$text",269],["T_WHITESPACE"," ",269],"=",["T_WHITESPACE"," ",269],["T_STRING","SafeMarkup",269],["T_DOUBLE_COLON","::",269],["T_STRING","format",269],"(",["T_CONSTANT_ENCAPSED_STRING","'<b>\u00e2\u0080\u00b9<\/b> @label'",269],",",["T_WHITESPACE"," ",269],["T_ARRAY","array",269],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],["T_VARIABLE","$previous",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","label",269],"(",")",")",")",";",["T_WHITESPACE","\n      ",269],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","assertRaw",270],"(",["T_NS_SEPARATOR","\\",270],["T_STRING","Drupal",270],["T_DOUBLE_COLON","::",270],["T_STRING","l",270],"(",["T_VARIABLE","$text",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$url",270],")",",",["T_WHITESPACE"," ",270],["T_CONSTANT_ENCAPSED_STRING","'Previous page link found.'",270],")",";",["T_WHITESPACE","\n    ",270],"}",["T_WHITESPACE","\n\n    ",271],["T_IF","if",273],["T_WHITESPACE"," ",273],"(",["T_VARIABLE","$up",273],")",["T_WHITESPACE"," ",273],"{",["T_WHITESPACE","\n      ",273],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Url $url *\/",274],["T_WHITESPACE","\n      ",274],["T_VARIABLE","$url",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_VARIABLE","$up",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","urlInfo",275],"(",")",";",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$url",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","setOptions",276],"(",["T_ARRAY","array",276],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_ARRAY","array",276],"(",["T_CONSTANT_ENCAPSED_STRING","'title'",276],["T_WHITESPACE"," ",276],["T_DOUBLE_ARROW","=>",276],["T_WHITESPACE"," ",276],["T_STRING","t",276],"(",["T_CONSTANT_ENCAPSED_STRING","'Go to parent page'",276],")",")",")",")",";",["T_WHITESPACE","\n      ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","assertRaw",277],"(",["T_NS_SEPARATOR","\\",277],["T_STRING","Drupal",277],["T_DOUBLE_COLON","::",277],["T_STRING","l",277],"(",["T_CONSTANT_ENCAPSED_STRING","'Up'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$url",277],")",",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'Up page link found.'",277],")",";",["T_WHITESPACE","\n    ",277],"}",["T_WHITESPACE","\n\n    ",278],["T_IF","if",280],["T_WHITESPACE"," ",280],"(",["T_VARIABLE","$next",280],")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n      ",280],["T_DOC_COMMENT","\/** @var \\Drupal\\Core\\Url $url *\/",281],["T_WHITESPACE","\n      ",281],["T_VARIABLE","$url",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$next",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","urlInfo",282],"(",")",";",["T_WHITESPACE","\n      ",282],["T_VARIABLE","$url",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","setOptions",283],"(",["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'attributes'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'rel'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_ARRAY","array",283],"(",["T_CONSTANT_ENCAPSED_STRING","'next'",283],")",",",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'title'",283],["T_WHITESPACE"," ",283],["T_DOUBLE_ARROW","=>",283],["T_WHITESPACE"," ",283],["T_STRING","t",283],"(",["T_CONSTANT_ENCAPSED_STRING","'Go to next page'",283],")",")",")",")",";",["T_WHITESPACE","\n      ",283],["T_VARIABLE","$text",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_STRING","SafeMarkup",284],["T_DOUBLE_COLON","::",284],["T_STRING","format",284],"(",["T_CONSTANT_ENCAPSED_STRING","'@label <b>\u00e2\u0080\u00ba<\/b>'",284],",",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",284],["T_WHITESPACE"," ",284],["T_DOUBLE_ARROW","=>",284],["T_WHITESPACE"," ",284],["T_VARIABLE","$next",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","label",284],"(",")",")",")",";",["T_WHITESPACE","\n      ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertRaw",285],"(",["T_NS_SEPARATOR","\\",285],["T_STRING","Drupal",285],["T_DOUBLE_COLON","::",285],["T_STRING","l",285],"(",["T_VARIABLE","$text",285],",",["T_WHITESPACE"," ",285],["T_VARIABLE","$url",285],")",",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'Next page link found.'",285],")",";",["T_WHITESPACE","\n    ",285],"}",["T_WHITESPACE","\n\n    ",286],["T_COMMENT","\/\/ Compute the expected breadcrumb.\n",288],["T_WHITESPACE","    ",289],["T_VARIABLE","$expected_breadcrumb",289],["T_WHITESPACE"," ",289],"=",["T_WHITESPACE"," ",289],["T_ARRAY","array",289],"(",")",";",["T_WHITESPACE","\n    ",289],["T_VARIABLE","$expected_breadcrumb",290],"[","]",["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_NS_SEPARATOR","\\",290],["T_STRING","Drupal",290],["T_DOUBLE_COLON","::",290],["T_STRING","url",290],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",290],")",";",["T_WHITESPACE","\n    ",290],["T_FOREACH","foreach",291],["T_WHITESPACE"," ",291],"(",["T_VARIABLE","$breadcrumb",291],["T_WHITESPACE"," ",291],["T_AS","as",291],["T_WHITESPACE"," ",291],["T_VARIABLE","$a_node",291],")",["T_WHITESPACE"," ",291],"{",["T_WHITESPACE","\n      ",291],["T_VARIABLE","$expected_breadcrumb",292],"[","]",["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_VARIABLE","$a_node",292],["T_OBJECT_OPERATOR","->",292],["T_STRING","url",292],"(",")",";",["T_WHITESPACE","\n    ",292],"}",["T_WHITESPACE","\n\n    ",293],["T_COMMENT","\/\/ Fetch links in the current breadcrumb.\n",295],["T_WHITESPACE","    ",296],["T_VARIABLE","$links",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","xpath",296],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/nav[@class=\"breadcrumb\"]\/ol\/li\/a'",296],")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$got_breadcrumb",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",")",";",["T_WHITESPACE","\n    ",297],["T_FOREACH","foreach",298],["T_WHITESPACE"," ",298],"(",["T_VARIABLE","$links",298],["T_WHITESPACE"," ",298],["T_AS","as",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$link",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n      ",298],["T_VARIABLE","$got_breadcrumb",299],"[","]",["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_STRING_CAST","(string)",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$link",299],"[",["T_CONSTANT_ENCAPSED_STRING","'href'",299],"]",";",["T_WHITESPACE","\n    ",299],"}",["T_WHITESPACE","\n\n    ",300],["T_COMMENT","\/\/ Compare expected and got breadcrumbs.\n",302],["T_WHITESPACE","    ",303],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","assertIdentical",303],"(",["T_VARIABLE","$expected_breadcrumb",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$got_breadcrumb",303],",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'The breadcrumb is correctly displayed on the page.'",303],")",";",["T_WHITESPACE","\n\n    ",303],["T_COMMENT","\/\/ Check printer friendly version.\n",305],["T_WHITESPACE","    ",306],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","drupalGet",306],"(",["T_CONSTANT_ENCAPSED_STRING","'book\/export\/html\/'",306],["T_WHITESPACE"," ",306],".",["T_WHITESPACE"," ",306],["T_VARIABLE","$node",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","id",306],"(",")",")",";",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","assertText",307],"(",["T_VARIABLE","$node",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","label",307],"(",")",",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'Printer friendly title found.'",307],")",";",["T_WHITESPACE","\n    ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertRaw",308],"(",["T_VARIABLE","$node",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","body",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","processed",308],",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'Printer friendly body found.'",308],")",";",["T_WHITESPACE","\n\n    ",308],["T_VARIABLE","$number",310],["T_INC","++",310],";",["T_WHITESPACE","\n  ",310],"}",["T_WHITESPACE","\n\n  ",311],["T_DOC_COMMENT","\/**\n   * Creates a regular expression to check for the sub-nodes in the outline.\n   *\n   * @param array $nodes\n   *   An array of nodes to check in outline.\n   *\n   * @return string\n   *   A regular expression that locates sub-nodes of the outline.\n   *\/",313],["T_WHITESPACE","\n  ",321],["T_FUNCTION","function",322],["T_WHITESPACE"," ",322],["T_STRING","generateOutlinePattern",322],"(",["T_VARIABLE","$nodes",322],")",["T_WHITESPACE"," ",322],"{",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$outline",323],["T_WHITESPACE"," ",323],"=",["T_WHITESPACE"," ",323],["T_CONSTANT_ENCAPSED_STRING","''",323],";",["T_WHITESPACE","\n    ",323],["T_FOREACH","foreach",324],["T_WHITESPACE"," ",324],"(",["T_VARIABLE","$nodes",324],["T_WHITESPACE"," ",324],["T_AS","as",324],["T_WHITESPACE"," ",324],["T_VARIABLE","$node",324],")",["T_WHITESPACE"," ",324],"{",["T_WHITESPACE","\n      ",324],["T_VARIABLE","$outline",325],["T_WHITESPACE"," ",325],["T_CONCAT_EQUAL",".=",325],["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","'(node\\\/'",325],["T_WHITESPACE"," ",325],".",["T_WHITESPACE"," ",325],["T_VARIABLE","$node",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","id",325],"(",")",["T_WHITESPACE"," ",325],".",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","')(.*?)('",325],["T_WHITESPACE"," ",325],".",["T_WHITESPACE"," ",325],["T_VARIABLE","$node",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","label",325],"(",")",["T_WHITESPACE"," ",325],".",["T_WHITESPACE"," ",325],["T_CONSTANT_ENCAPSED_STRING","')(.*?)'",325],";",["T_WHITESPACE","\n    ",325],"}",["T_WHITESPACE","\n\n    ",326],["T_RETURN","return",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'\/<nav id=\"book-navigation-'",328],["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","book",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","id",328],"(",")",["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'\"(.*?)<ul(.*?)'",328],["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_VARIABLE","$outline",328],["T_WHITESPACE"," ",328],".",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'<\\\/ul>\/s'",328],";",["T_WHITESPACE","\n  ",328],"}",["T_WHITESPACE","\n\n  ",329],["T_DOC_COMMENT","\/**\n   * Creates a book node.\n   *\n   * @param int|string $book_nid\n   *   A book node ID or set to 'new' to create a new book.\n   * @param int|null $parent\n   *   (optional) Parent book reference ID. Defaults to NULL.\n   *\n   * @return \\Drupal\\node\\NodeInterface\n   *   The created node.\n   *\/",331],["T_WHITESPACE","\n  ",341],["T_FUNCTION","function",342],["T_WHITESPACE"," ",342],["T_STRING","createBookNode",342],"(",["T_VARIABLE","$book_nid",342],",",["T_WHITESPACE"," ",342],["T_VARIABLE","$parent",342],["T_WHITESPACE"," ",342],"=",["T_WHITESPACE"," ",342],["T_STRING","NULL",342],")",["T_WHITESPACE"," ",342],"{",["T_WHITESPACE","\n    ",342],["T_COMMENT","\/\/ $number does not use drupal_static as it should not be reset\n",343],["T_WHITESPACE","    ",344],["T_COMMENT","\/\/ since it uniquely identifies each call to createBookNode().\n",344],["T_WHITESPACE","    ",345],["T_STATIC","static",345],["T_WHITESPACE"," ",345],["T_VARIABLE","$number",345],["T_WHITESPACE"," ",345],"=",["T_WHITESPACE"," ",345],["T_LNUMBER","0",345],";",["T_WHITESPACE"," ",345],["T_COMMENT","\/\/ Used to ensure that when sorted nodes stay in same order.\n",345],["T_WHITESPACE","\n    ",346],["T_VARIABLE","$edit",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$edit",348],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",348],"]",["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_STRING","str_pad",348],"(",["T_VARIABLE","$number",348],",",["T_WHITESPACE"," ",348],["T_LNUMBER","2",348],",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'0'",348],",",["T_WHITESPACE"," ",348],["T_STRING","STR_PAD_LEFT",348],")",["T_WHITESPACE"," ",348],".",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","' - SimpleTest test node '",348],["T_WHITESPACE"," ",348],".",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","randomMachineName",348],"(",["T_LNUMBER","10",348],")",";",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$edit",349],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",349],"]",["T_WHITESPACE"," ",349],"=",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'SimpleTest test body '",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","randomMachineName",349],"(",["T_LNUMBER","32",349],")",["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","' '",349],["T_WHITESPACE"," ",349],".",["T_WHITESPACE"," ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","randomMachineName",349],"(",["T_LNUMBER","32",349],")",";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$edit",350],"[",["T_CONSTANT_ENCAPSED_STRING","'book[bid]'",350],"]",["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_VARIABLE","$book_nid",350],";",["T_WHITESPACE","\n\n    ",350],["T_IF","if",352],["T_WHITESPACE"," ",352],"(",["T_VARIABLE","$parent",352],["T_WHITESPACE"," ",352],["T_IS_NOT_IDENTICAL","!==",352],["T_WHITESPACE"," ",352],["T_STRING","NULL",352],")",["T_WHITESPACE"," ",352],"{",["T_WHITESPACE","\n      ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","drupalPostForm",353],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/book'",353],",",["T_WHITESPACE"," ",353],["T_VARIABLE","$edit",353],",",["T_WHITESPACE"," ",353],["T_STRING","t",353],"(",["T_CONSTANT_ENCAPSED_STRING","'Change book (update list of parents)'",353],")",")",";",["T_WHITESPACE","\n\n      ",353],["T_VARIABLE","$edit",355],"[",["T_CONSTANT_ENCAPSED_STRING","'book[pid]'",355],"]",["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_VARIABLE","$parent",355],";",["T_WHITESPACE","\n      ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","drupalPostForm",356],"(",["T_STRING","NULL",356],",",["T_WHITESPACE"," ",356],["T_VARIABLE","$edit",356],",",["T_WHITESPACE"," ",356],["T_STRING","t",356],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",356],")",")",";",["T_WHITESPACE","\n      ",356],["T_COMMENT","\/\/ Make sure the parent was flagged as having children.\n",357],["T_WHITESPACE","      ",358],["T_VARIABLE","$parent_node",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_NS_SEPARATOR","\\",358],["T_STRING","Drupal",358],["T_DOUBLE_COLON","::",358],["T_STRING","entityManager",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","getStorage",358],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",358],")",["T_OBJECT_OPERATOR","->",358],["T_STRING","loadUnchanged",358],"(",["T_VARIABLE","$parent",358],")",";",["T_WHITESPACE","\n      ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","assertFalse",359],"(",["T_EMPTY","empty",359],"(",["T_VARIABLE","$parent_node",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","book",359],"[",["T_CONSTANT_ENCAPSED_STRING","'has_children'",359],"]",")",",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'Parent node is marked as having children'",359],")",";",["T_WHITESPACE","\n    ",359],"}",["T_WHITESPACE","\n    ",360],["T_ELSE","else",361],["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n      ",361],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","drupalPostForm",362],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/add\/book'",362],",",["T_WHITESPACE"," ",362],["T_VARIABLE","$edit",362],",",["T_WHITESPACE"," ",362],["T_STRING","t",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",362],")",")",";",["T_WHITESPACE","\n    ",362],"}",["T_WHITESPACE","\n\n    ",363],["T_COMMENT","\/\/ Check to make sure the book node was created.\n",365],["T_WHITESPACE","    ",366],["T_VARIABLE","$node",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_VARIABLE","$this",366],["T_OBJECT_OPERATOR","->",366],["T_STRING","drupalGetNodeByTitle",366],"(",["T_VARIABLE","$edit",366],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",366],"]",")",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","assertNotNull",367],"(","(",["T_VARIABLE","$node",367],["T_WHITESPACE"," ",367],["T_IS_IDENTICAL","===",367],["T_WHITESPACE"," ",367],["T_STRING","FALSE",367],["T_WHITESPACE"," ",367],"?",["T_WHITESPACE"," ",367],["T_STRING","NULL",367],["T_WHITESPACE"," ",367],":",["T_WHITESPACE"," ",367],["T_VARIABLE","$node",367],")",",",["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'Book node found in database.'",367],")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$number",368],["T_INC","++",368],";",["T_WHITESPACE","\n\n    ",368],["T_RETURN","return",370],["T_WHITESPACE"," ",370],["T_VARIABLE","$node",370],";",["T_WHITESPACE","\n  ",370],"}",["T_WHITESPACE","\n\n  ",371],["T_DOC_COMMENT","\/**\n   * Tests book export (\"printer-friendly version\") functionality.\n   *\/",373],["T_WHITESPACE","\n  ",375],["T_FUNCTION","function",376],["T_WHITESPACE"," ",376],["T_STRING","testBookExport",376],"(",")",["T_WHITESPACE"," ",376],"{",["T_WHITESPACE","\n    ",376],["T_COMMENT","\/\/ Create a book.\n",377],["T_WHITESPACE","    ",378],["T_VARIABLE","$nodes",378],["T_WHITESPACE"," ",378],"=",["T_WHITESPACE"," ",378],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","createBook",378],"(",")",";",["T_WHITESPACE","\n\n    ",378],["T_COMMENT","\/\/ Log in as web user and view printer-friendly version.\n",380],["T_WHITESPACE","    ",381],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","drupalLogin",381],"(",["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","webUser",381],")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","drupalGet",382],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",382],["T_WHITESPACE"," ",382],".",["T_WHITESPACE"," ",382],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","book",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","id",382],"(",")",")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","clickLink",383],"(",["T_STRING","t",383],"(",["T_CONSTANT_ENCAPSED_STRING","'Printer-friendly version'",383],")",")",";",["T_WHITESPACE","\n\n    ",383],["T_COMMENT","\/\/ Make sure each part of the book is there.\n",385],["T_WHITESPACE","    ",386],["T_FOREACH","foreach",386],["T_WHITESPACE"," ",386],"(",["T_VARIABLE","$nodes",386],["T_WHITESPACE"," ",386],["T_AS","as",386],["T_WHITESPACE"," ",386],["T_VARIABLE","$node",386],")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n      ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","assertText",387],"(",["T_VARIABLE","$node",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","label",387],"(",")",",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'Node title found in printer friendly version.'",387],")",";",["T_WHITESPACE","\n      ",387],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","assertRaw",388],"(",["T_VARIABLE","$node",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","body",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","processed",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'Node body found in printer friendly version.'",388],")",";",["T_WHITESPACE","\n    ",388],"}",["T_WHITESPACE","\n\n    ",389],["T_COMMENT","\/\/ Make sure we can't export an unsupported format.\n",391],["T_WHITESPACE","    ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","drupalGet",392],"(",["T_CONSTANT_ENCAPSED_STRING","'book\/export\/foobar\/'",392],["T_WHITESPACE"," ",392],".",["T_WHITESPACE"," ",392],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","book",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","id",392],"(",")",")",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","assertResponse",393],"(",["T_CONSTANT_ENCAPSED_STRING","'404'",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'Unsupported export format returned \"not found\".'",393],")",";",["T_WHITESPACE","\n\n    ",393],["T_COMMENT","\/\/ Make sure we get a 404 on a not existing book node.\n",395],["T_WHITESPACE","    ",396],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","drupalGet",396],"(",["T_CONSTANT_ENCAPSED_STRING","'book\/export\/html\/123'",396],")",";",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","assertResponse",397],"(",["T_CONSTANT_ENCAPSED_STRING","'404'",397],",",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'Not existing book node returned \"not found\".'",397],")",";",["T_WHITESPACE","\n\n    ",397],["T_COMMENT","\/\/ Make sure an anonymous user cannot view printer-friendly version.\n",399],["T_WHITESPACE","    ",400],["T_VARIABLE","$this",400],["T_OBJECT_OPERATOR","->",400],["T_STRING","drupalLogout",400],"(",")",";",["T_WHITESPACE","\n\n    ",400],["T_COMMENT","\/\/ Load the book and verify there is no printer-friendly version link.\n",402],["T_WHITESPACE","    ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","drupalGet",403],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",403],["T_WHITESPACE"," ",403],".",["T_WHITESPACE"," ",403],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","book",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","id",403],"(",")",")",";",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$this",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","assertNoLink",404],"(",["T_STRING","t",404],"(",["T_CONSTANT_ENCAPSED_STRING","'Printer-friendly version'",404],")",",",["T_WHITESPACE"," ",404],["T_CONSTANT_ENCAPSED_STRING","'Anonymous user is not shown link to printer-friendly version.'",404],")",";",["T_WHITESPACE","\n\n    ",404],["T_COMMENT","\/\/ Try getting the URL directly, and verify it fails.\n",406],["T_WHITESPACE","    ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","drupalGet",407],"(",["T_CONSTANT_ENCAPSED_STRING","'book\/export\/html\/'",407],["T_WHITESPACE"," ",407],".",["T_WHITESPACE"," ",407],["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","book",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","id",407],"(",")",")",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","assertResponse",408],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",408],",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'Anonymous user properly forbidden.'",408],")",";",["T_WHITESPACE","\n\n    ",408],["T_COMMENT","\/\/ Now grant anonymous users permission to view the printer-friendly\n",410],["T_WHITESPACE","    ",411],["T_COMMENT","\/\/ version and verify that node access restrictions still prevent them from\n",411],["T_WHITESPACE","    ",412],["T_COMMENT","\/\/ seeing it.\n",412],["T_WHITESPACE","    ",413],["T_STRING","user_role_grant_permissions",413],"(",["T_STRING","RoleInterface",413],["T_DOUBLE_COLON","::",413],["T_STRING","ANONYMOUS_ID",413],",",["T_WHITESPACE"," ",413],["T_ARRAY","array",413],"(",["T_CONSTANT_ENCAPSED_STRING","'access printer-friendly version'",413],")",")",";",["T_WHITESPACE","\n    ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","drupalGet",414],"(",["T_CONSTANT_ENCAPSED_STRING","'book\/export\/html\/'",414],["T_WHITESPACE"," ",414],".",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","book",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","id",414],"(",")",")",";",["T_WHITESPACE","\n    ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","assertResponse",415],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",415],",",["T_WHITESPACE"," ",415],["T_CONSTANT_ENCAPSED_STRING","'Anonymous user properly forbidden from seeing the printer-friendly version when denied by node access.'",415],")",";",["T_WHITESPACE","\n  ",415],"}",["T_WHITESPACE","\n\n  ",416],["T_DOC_COMMENT","\/**\n   * Tests the functionality of the book navigation block.\n   *\/",418],["T_WHITESPACE","\n  ",420],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","testBookNavigationBlock",421],"(",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","drupalLogin",422],"(",["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","adminUser",422],")",";",["T_WHITESPACE","\n\n    ",422],["T_COMMENT","\/\/ Enable the block.\n",424],["T_WHITESPACE","    ",425],["T_VARIABLE","$block",425],["T_WHITESPACE"," ",425],"=",["T_WHITESPACE"," ",425],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","drupalPlaceBlock",425],"(",["T_CONSTANT_ENCAPSED_STRING","'book_navigation'",425],")",";",["T_WHITESPACE","\n\n    ",425],["T_COMMENT","\/\/ Give anonymous users the permission 'node test view'.\n",427],["T_WHITESPACE","    ",428],["T_VARIABLE","$edit",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_ARRAY","array",428],"(",")",";",["T_WHITESPACE","\n    ",428],["T_VARIABLE","$edit",429],"[",["T_STRING","RoleInterface",429],["T_DOUBLE_COLON","::",429],["T_STRING","ANONYMOUS_ID",429],["T_WHITESPACE"," ",429],".",["T_WHITESPACE"," ",429],["T_CONSTANT_ENCAPSED_STRING","'[node test view]'",429],"]",["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_STRING","TRUE",429],";",["T_WHITESPACE","\n    ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","drupalPostForm",430],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/people\/permissions\/'",430],["T_WHITESPACE"," ",430],".",["T_WHITESPACE"," ",430],["T_STRING","RoleInterface",430],["T_DOUBLE_COLON","::",430],["T_STRING","ANONYMOUS_ID",430],",",["T_WHITESPACE"," ",430],["T_VARIABLE","$edit",430],",",["T_WHITESPACE"," ",430],["T_STRING","t",430],"(",["T_CONSTANT_ENCAPSED_STRING","'Save permissions'",430],")",")",";",["T_WHITESPACE","\n    ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","assertText",431],"(",["T_STRING","t",431],"(",["T_CONSTANT_ENCAPSED_STRING","'The changes have been saved.'",431],")",",",["T_WHITESPACE"," ",431],["T_CONSTANT_ENCAPSED_STRING","\"Permission 'node test view' successfully assigned to anonymous users.\"",431],")",";",["T_WHITESPACE","\n\n    ",431],["T_COMMENT","\/\/ Test correct display of the block.\n",433],["T_WHITESPACE","    ",434],["T_VARIABLE","$nodes",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","createBook",434],"(",")",";",["T_WHITESPACE","\n    ",434],["T_VARIABLE","$this",435],["T_OBJECT_OPERATOR","->",435],["T_STRING","drupalGet",435],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",435],")",";",["T_WHITESPACE","\n    ",435],["T_VARIABLE","$this",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","assertText",436],"(",["T_VARIABLE","$block",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","label",436],"(",")",",",["T_WHITESPACE"," ",436],["T_CONSTANT_ENCAPSED_STRING","'Book navigation block is displayed.'",436],")",";",["T_WHITESPACE","\n    ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","assertText",437],"(",["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","book",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","label",437],"(",")",",",["T_WHITESPACE"," ",437],["T_STRING","format_string",437],"(",["T_CONSTANT_ENCAPSED_STRING","'Link to book root (@title) is displayed.'",437],",",["T_WHITESPACE"," ",437],["T_ARRAY","array",437],"(",["T_CONSTANT_ENCAPSED_STRING","'@title'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$nodes",437],"[",["T_LNUMBER","0",437],"]",["T_OBJECT_OPERATOR","->",437],["T_STRING","label",437],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertNoText",438],"(",["T_VARIABLE","$nodes",438],"[",["T_LNUMBER","0",438],"]",["T_OBJECT_OPERATOR","->",438],["T_STRING","label",438],"(",")",",",["T_WHITESPACE"," ",438],["T_CONSTANT_ENCAPSED_STRING","'No links to individual book pages are displayed.'",438],")",";",["T_WHITESPACE","\n  ",438],"}",["T_WHITESPACE","\n\n  ",439],["T_DOC_COMMENT","\/**\n   * Tests BookManager::getTableOfContents().\n   *\/",441],["T_WHITESPACE","\n  ",443],["T_PUBLIC","public",444],["T_WHITESPACE"," ",444],["T_FUNCTION","function",444],["T_WHITESPACE"," ",444],["T_STRING","testGetTableOfContents",444],"(",")",["T_WHITESPACE"," ",444],"{",["T_WHITESPACE","\n    ",444],["T_COMMENT","\/\/ Create new book.\n",445],["T_WHITESPACE","    ",446],["T_VARIABLE","$nodes",446],["T_WHITESPACE"," ",446],"=",["T_WHITESPACE"," ",446],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","createBook",446],"(",")",";",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$book",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","book",447],";",["T_WHITESPACE","\n\n    ",447],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","drupalLogin",449],"(",["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","bookAuthor",449],")",";",["T_WHITESPACE","\n\n    ",449],["T_COMMENT","\/*\n     * Add Node 5 under Node 2.\n     * Add Node 6, 7, 8, 9, 10, 11 under Node 3.\n     * Book\n     *  |- Node 0\n     *   |- Node 1\n     *   |- Node 2\n     *    |- Node 5\n     *  |- Node 3\n     *   |- Node 6\n     *    |- Node 7\n     *     |- Node 8\n     *      |- Node 9\n     *       |- Node 10\n     *        |- Node 11\n     *  |- Node 4\n     *\/",451],["T_WHITESPACE","\n    ",467],["T_FOREACH","foreach",468],["T_WHITESPACE"," ",468],"(","[",["T_LNUMBER","5",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","2",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","6",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","3",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","7",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","6",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","8",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","7",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","9",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","8",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","10",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","9",468],",",["T_WHITESPACE"," ",468],["T_LNUMBER","11",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_LNUMBER","10",468],"]",["T_WHITESPACE"," ",468],["T_AS","as",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$child",468],["T_WHITESPACE"," ",468],["T_DOUBLE_ARROW","=>",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$parent",468],")",["T_WHITESPACE"," ",468],"{",["T_WHITESPACE","\n      ",468],["T_VARIABLE","$nodes",469],"[",["T_VARIABLE","$child",469],"]",["T_WHITESPACE"," ",469],"=",["T_WHITESPACE"," ",469],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","createBookNode",469],"(",["T_VARIABLE","$book",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","id",469],"(",")",",",["T_WHITESPACE"," ",469],["T_VARIABLE","$nodes",469],"[",["T_VARIABLE","$parent",469],"]",["T_OBJECT_OPERATOR","->",469],["T_STRING","id",469],"(",")",")",";",["T_WHITESPACE","\n    ",469],"}",["T_WHITESPACE","\n    ",470],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","drupalGet",471],"(",["T_VARIABLE","$nodes",471],"[",["T_LNUMBER","0",471],"]",["T_OBJECT_OPERATOR","->",471],["T_STRING","toUrl",471],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-form'",471],")",")",";",["T_WHITESPACE","\n    ",471],["T_COMMENT","\/\/ Snice Node 0 has children 2 levels deep, nodes 10 and 11 should not\n",472],["T_WHITESPACE","    ",473],["T_COMMENT","\/\/ appear in the selector.\n",473],["T_WHITESPACE","    ",474],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","assertNoOption",474],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-book-pid'",474],",",["T_WHITESPACE"," ",474],["T_VARIABLE","$nodes",474],"[",["T_LNUMBER","10",474],"]",["T_OBJECT_OPERATOR","->",474],["T_STRING","id",474],"(",")",")",";",["T_WHITESPACE","\n    ",474],["T_VARIABLE","$this",475],["T_OBJECT_OPERATOR","->",475],["T_STRING","assertNoOption",475],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-book-pid'",475],",",["T_WHITESPACE"," ",475],["T_VARIABLE","$nodes",475],"[",["T_LNUMBER","11",475],"]",["T_OBJECT_OPERATOR","->",475],["T_STRING","id",475],"(",")",")",";",["T_WHITESPACE","\n    ",475],["T_COMMENT","\/\/ Node 9 should be available as an option.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$this",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","assertOption",477],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-book-pid'",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$nodes",477],"[",["T_LNUMBER","9",477],"]",["T_OBJECT_OPERATOR","->",477],["T_STRING","id",477],"(",")",")",";",["T_WHITESPACE","\n\n    ",477],["T_COMMENT","\/\/ Get a shallow set of options.\n",479],["T_WHITESPACE","    ",480],["T_DOC_COMMENT","\/** @var \\Drupal\\book\\BookManagerInterface $manager *\/",480],["T_WHITESPACE","\n    ",480],["T_VARIABLE","$manager",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","container",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","get",481],"(",["T_CONSTANT_ENCAPSED_STRING","'book.manager'",481],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$options",482],["T_WHITESPACE"," ",482],"=",["T_WHITESPACE"," ",482],["T_VARIABLE","$manager",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","getTableOfContents",482],"(",["T_VARIABLE","$book",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","id",482],"(",")",",",["T_WHITESPACE"," ",482],["T_LNUMBER","3",482],")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$expected_nids",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],"[",["T_VARIABLE","$book",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","0",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","1",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","2",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","3",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","6",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$nodes",483],"[",["T_LNUMBER","4",483],"]",["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")","]",";",["T_WHITESPACE","\n    ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","assertEqual",484],"(",["T_STRING","count",484],"(",["T_VARIABLE","$options",484],")",",",["T_WHITESPACE"," ",484],["T_STRING","count",484],"(",["T_VARIABLE","$expected_nids",484],")",")",";",["T_WHITESPACE","\n    ",484],["T_VARIABLE","$diff",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_STRING","array_diff",485],"(",["T_VARIABLE","$expected_nids",485],",",["T_WHITESPACE"," ",485],["T_STRING","array_keys",485],"(",["T_VARIABLE","$options",485],")",")",";",["T_WHITESPACE","\n    ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","assertTrue",486],"(",["T_EMPTY","empty",486],"(",["T_VARIABLE","$diff",486],")",",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","'Found all expected option keys'",486],")",";",["T_WHITESPACE","\n    ",486],["T_COMMENT","\/\/ Exclude Node 3.\n",487],["T_WHITESPACE","    ",488],["T_VARIABLE","$options",488],["T_WHITESPACE"," ",488],"=",["T_WHITESPACE"," ",488],["T_VARIABLE","$manager",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","getTableOfContents",488],"(",["T_VARIABLE","$book",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","id",488],"(",")",",",["T_WHITESPACE"," ",488],["T_LNUMBER","3",488],",",["T_WHITESPACE"," ",488],["T_ARRAY","array",488],"(",["T_VARIABLE","$nodes",488],"[",["T_LNUMBER","3",488],"]",["T_OBJECT_OPERATOR","->",488],["T_STRING","id",488],"(",")",")",")",";",["T_WHITESPACE","\n    ",488],["T_VARIABLE","$expected_nids",489],["T_WHITESPACE"," ",489],"=",["T_WHITESPACE"," ",489],["T_ARRAY","array",489],"(",["T_VARIABLE","$book",489],["T_OBJECT_OPERATOR","->",489],["T_STRING","id",489],"(",")",",",["T_WHITESPACE"," ",489],["T_VARIABLE","$nodes",489],"[",["T_LNUMBER","0",489],"]",["T_OBJECT_OPERATOR","->",489],["T_STRING","id",489],"(",")",",",["T_WHITESPACE"," ",489],["T_VARIABLE","$nodes",489],"[",["T_LNUMBER","1",489],"]",["T_OBJECT_OPERATOR","->",489],["T_STRING","id",489],"(",")",",",["T_WHITESPACE"," ",489],["T_VARIABLE","$nodes",489],"[",["T_LNUMBER","2",489],"]",["T_OBJECT_OPERATOR","->",489],["T_STRING","id",489],"(",")",",",["T_WHITESPACE"," ",489],["T_VARIABLE","$nodes",489],"[",["T_LNUMBER","4",489],"]",["T_OBJECT_OPERATOR","->",489],["T_STRING","id",489],"(",")",")",";",["T_WHITESPACE","\n    ",489],["T_VARIABLE","$this",490],["T_OBJECT_OPERATOR","->",490],["T_STRING","assertEqual",490],"(",["T_STRING","count",490],"(",["T_VARIABLE","$options",490],")",",",["T_WHITESPACE"," ",490],["T_STRING","count",490],"(",["T_VARIABLE","$expected_nids",490],")",")",";",["T_WHITESPACE","\n    ",490],["T_VARIABLE","$diff",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_STRING","array_diff",491],"(",["T_VARIABLE","$expected_nids",491],",",["T_WHITESPACE"," ",491],["T_STRING","array_keys",491],"(",["T_VARIABLE","$options",491],")",")",";",["T_WHITESPACE","\n    ",491],["T_VARIABLE","$this",492],["T_OBJECT_OPERATOR","->",492],["T_STRING","assertTrue",492],"(",["T_EMPTY","empty",492],"(",["T_VARIABLE","$diff",492],")",",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'Found all expected option keys after excluding Node 3'",492],")",";",["T_WHITESPACE","\n  ",492],"}",["T_WHITESPACE","\n\n  ",493],["T_DOC_COMMENT","\/**\n   * Tests the book navigation block when an access module is installed.\n   *\/",495],["T_WHITESPACE","\n  ",497],["T_FUNCTION","function",498],["T_WHITESPACE"," ",498],["T_STRING","testNavigationBlockOnAccessModuleInstalled",498],"(",")",["T_WHITESPACE"," ",498],"{",["T_WHITESPACE","\n    ",498],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","drupalLogin",499],"(",["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","adminUser",499],")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$block",500],["T_WHITESPACE"," ",500],"=",["T_WHITESPACE"," ",500],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","drupalPlaceBlock",500],"(",["T_CONSTANT_ENCAPSED_STRING","'book_navigation'",500],",",["T_WHITESPACE"," ",500],["T_ARRAY","array",500],"(",["T_CONSTANT_ENCAPSED_STRING","'block_mode'",500],["T_WHITESPACE"," ",500],["T_DOUBLE_ARROW","=>",500],["T_WHITESPACE"," ",500],["T_CONSTANT_ENCAPSED_STRING","'book pages'",500],")",")",";",["T_WHITESPACE","\n\n    ",500],["T_COMMENT","\/\/ Give anonymous users the permission 'node test view'.\n",502],["T_WHITESPACE","    ",503],["T_VARIABLE","$edit",503],["T_WHITESPACE"," ",503],"=",["T_WHITESPACE"," ",503],["T_ARRAY","array",503],"(",")",";",["T_WHITESPACE","\n    ",503],["T_VARIABLE","$edit",504],"[",["T_STRING","RoleInterface",504],["T_DOUBLE_COLON","::",504],["T_STRING","ANONYMOUS_ID",504],["T_WHITESPACE"," ",504],".",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'[node test view]'",504],"]",["T_WHITESPACE"," ",504],"=",["T_WHITESPACE"," ",504],["T_STRING","TRUE",504],";",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","drupalPostForm",505],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/people\/permissions\/'",505],["T_WHITESPACE"," ",505],".",["T_WHITESPACE"," ",505],["T_STRING","RoleInterface",505],["T_DOUBLE_COLON","::",505],["T_STRING","ANONYMOUS_ID",505],",",["T_WHITESPACE"," ",505],["T_VARIABLE","$edit",505],",",["T_WHITESPACE"," ",505],["T_STRING","t",505],"(",["T_CONSTANT_ENCAPSED_STRING","'Save permissions'",505],")",")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","assertText",506],"(",["T_STRING","t",506],"(",["T_CONSTANT_ENCAPSED_STRING","'The changes have been saved.'",506],")",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","\"Permission 'node test view' successfully assigned to anonymous users.\"",506],")",";",["T_WHITESPACE","\n\n    ",506],["T_COMMENT","\/\/ Create a book.\n",508],["T_WHITESPACE","    ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","createBook",509],"(",")",";",["T_WHITESPACE","\n\n    ",509],["T_COMMENT","\/\/ Test correct display of the block to registered users.\n",511],["T_WHITESPACE","    ",512],["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","drupalLogin",512],"(",["T_VARIABLE","$this",512],["T_OBJECT_OPERATOR","->",512],["T_STRING","webUser",512],")",";",["T_WHITESPACE","\n    ",512],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","drupalGet",513],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",513],["T_WHITESPACE"," ",513],".",["T_WHITESPACE"," ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","book",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","id",513],"(",")",")",";",["T_WHITESPACE","\n    ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","assertText",514],"(",["T_VARIABLE","$block",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","label",514],"(",")",",",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'Book navigation block is displayed to registered users.'",514],")",";",["T_WHITESPACE","\n    ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","drupalLogout",515],"(",")",";",["T_WHITESPACE","\n\n    ",515],["T_COMMENT","\/\/ Test correct display of the block to anonymous users.\n",517],["T_WHITESPACE","    ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","drupalGet",518],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",518],["T_WHITESPACE"," ",518],".",["T_WHITESPACE"," ",518],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","book",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","id",518],"(",")",")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","assertText",519],"(",["T_VARIABLE","$block",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","label",519],"(",")",",",["T_WHITESPACE"," ",519],["T_CONSTANT_ENCAPSED_STRING","'Book navigation block is displayed to anonymous users.'",519],")",";",["T_WHITESPACE","\n\n    ",519],["T_COMMENT","\/\/ Test the 'book pages' block_mode setting.\n",521],["T_WHITESPACE","    ",522],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","drupalGet",522],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",522],")",";",["T_WHITESPACE","\n    ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","assertNoText",523],"(",["T_VARIABLE","$block",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","label",523],"(",")",",",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'Book navigation block is not shown on non-book pages.'",523],")",";",["T_WHITESPACE","\n  ",523],"}",["T_WHITESPACE","\n\n  ",524],["T_DOC_COMMENT","\/**\n   * Tests the access for deleting top-level book nodes.\n   *\/",526],["T_WHITESPACE","\n  ",528],["T_FUNCTION","function",529],["T_WHITESPACE"," ",529],["T_STRING","testBookDelete",529],"(",")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n    ",529],["T_VARIABLE","$node_storage",530],["T_WHITESPACE"," ",530],"=",["T_WHITESPACE"," ",530],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","container",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","get",530],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",530],")",["T_OBJECT_OPERATOR","->",530],["T_STRING","getStorage",530],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",530],")",";",["T_WHITESPACE","\n    ",530],["T_VARIABLE","$nodes",531],["T_WHITESPACE"," ",531],"=",["T_WHITESPACE"," ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","createBook",531],"(",")",";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","drupalLogin",532],"(",["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","adminUser",532],")",";",["T_WHITESPACE","\n    ",532],["T_VARIABLE","$edit",533],["T_WHITESPACE"," ",533],"=",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",")",";",["T_WHITESPACE","\n\n    ",533],["T_COMMENT","\/\/ Test access to delete top-level and child book nodes.\n",535],["T_WHITESPACE","    ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","drupalGet",536],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",536],["T_WHITESPACE"," ",536],".",["T_WHITESPACE"," ",536],["T_VARIABLE","$this",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","book",536],["T_OBJECT_OPERATOR","->",536],["T_STRING","id",536],"(",")",["T_WHITESPACE"," ",536],".",["T_WHITESPACE"," ",536],["T_CONSTANT_ENCAPSED_STRING","'\/outline\/remove'",536],")",";",["T_WHITESPACE","\n    ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","assertResponse",537],"(",["T_CONSTANT_ENCAPSED_STRING","'403'",537],",",["T_WHITESPACE"," ",537],["T_CONSTANT_ENCAPSED_STRING","'Deleting top-level book node properly forbidden.'",537],")",";",["T_WHITESPACE","\n    ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","drupalPostForm",538],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",538],["T_WHITESPACE"," ",538],".",["T_WHITESPACE"," ",538],["T_VARIABLE","$nodes",538],"[",["T_LNUMBER","4",538],"]",["T_OBJECT_OPERATOR","->",538],["T_STRING","id",538],"(",")",["T_WHITESPACE"," ",538],".",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'\/outline\/remove'",538],",",["T_WHITESPACE"," ",538],["T_VARIABLE","$edit",538],",",["T_WHITESPACE"," ",538],["T_STRING","t",538],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",538],")",")",";",["T_WHITESPACE","\n    ",538],["T_VARIABLE","$node_storage",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","resetCache",539],"(",["T_ARRAY","array",539],"(",["T_VARIABLE","$nodes",539],"[",["T_LNUMBER","4",539],"]",["T_OBJECT_OPERATOR","->",539],["T_STRING","id",539],"(",")",")",")",";",["T_WHITESPACE","\n    ",539],["T_VARIABLE","$node4",540],["T_WHITESPACE"," ",540],"=",["T_WHITESPACE"," ",540],["T_VARIABLE","$node_storage",540],["T_OBJECT_OPERATOR","->",540],["T_STRING","load",540],"(",["T_VARIABLE","$nodes",540],"[",["T_LNUMBER","4",540],"]",["T_OBJECT_OPERATOR","->",540],["T_STRING","id",540],"(",")",")",";",["T_WHITESPACE","\n    ",540],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","assertTrue",541],"(",["T_EMPTY","empty",541],"(",["T_VARIABLE","$node4",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","book",541],")",",",["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","'Deleting child book node properly allowed.'",541],")",";",["T_WHITESPACE","\n\n    ",541],["T_COMMENT","\/\/ Delete all child book nodes and retest top-level node deletion.\n",543],["T_WHITESPACE","    ",544],["T_FOREACH","foreach",544],["T_WHITESPACE"," ",544],"(",["T_VARIABLE","$nodes",544],["T_WHITESPACE"," ",544],["T_AS","as",544],["T_WHITESPACE"," ",544],["T_VARIABLE","$node",544],")",["T_WHITESPACE"," ",544],"{",["T_WHITESPACE","\n      ",544],["T_VARIABLE","$nids",545],"[","]",["T_WHITESPACE"," ",545],"=",["T_WHITESPACE"," ",545],["T_VARIABLE","$node",545],["T_OBJECT_OPERATOR","->",545],["T_STRING","id",545],"(",")",";",["T_WHITESPACE","\n    ",545],"}",["T_WHITESPACE","\n    ",546],["T_STRING","entity_delete_multiple",547],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$nids",547],")",";",["T_WHITESPACE","\n    ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","drupalPostForm",548],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",548],["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","book",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","id",548],"(",")",["T_WHITESPACE"," ",548],".",["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'\/outline\/remove'",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$edit",548],",",["T_WHITESPACE"," ",548],["T_STRING","t",548],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",548],")",")",";",["T_WHITESPACE","\n    ",548],["T_VARIABLE","$node_storage",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","resetCache",549],"(",["T_ARRAY","array",549],"(",["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","book",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","id",549],"(",")",")",")",";",["T_WHITESPACE","\n    ",549],["T_VARIABLE","$node",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],["T_VARIABLE","$node_storage",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","load",550],"(",["T_VARIABLE","$this",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","book",550],["T_OBJECT_OPERATOR","->",550],["T_STRING","id",550],"(",")",")",";",["T_WHITESPACE","\n    ",550],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","assertTrue",551],"(",["T_EMPTY","empty",551],"(",["T_VARIABLE","$node",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","book",551],")",",",["T_WHITESPACE"," ",551],["T_CONSTANT_ENCAPSED_STRING","'Deleting childless top-level book node properly allowed.'",551],")",";",["T_WHITESPACE","\n\n    ",551],["T_COMMENT","\/\/ Tests directly deleting a book parent.\n",553],["T_WHITESPACE","    ",554],["T_VARIABLE","$nodes",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","createBook",554],"(",")",";",["T_WHITESPACE","\n    ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","drupalLogin",555],"(",["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","adminUser",555],")",";",["T_WHITESPACE","\n    ",555],["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","drupalGet",556],"(",["T_VARIABLE","$this",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","book",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","urlInfo",556],"(",["T_CONSTANT_ENCAPSED_STRING","'delete-form'",556],")",")",";",["T_WHITESPACE","\n    ",556],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","assertRaw",557],"(",["T_STRING","t",557],"(",["T_CONSTANT_ENCAPSED_STRING","'%title is part of a book outline, and has associated child pages. If you proceed with deletion, the child pages will be relocated automatically.'",557],",",["T_WHITESPACE"," ",557],"[",["T_CONSTANT_ENCAPSED_STRING","'%title'",557],["T_WHITESPACE"," ",557],["T_DOUBLE_ARROW","=>",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","book",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","label",557],"(",")","]",")",")",";",["T_WHITESPACE","\n    ",557],["T_COMMENT","\/\/ Delete parent, and visit a child page.\n",558],["T_WHITESPACE","    ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","drupalPostForm",559],"(",["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","book",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","urlInfo",559],"(",["T_CONSTANT_ENCAPSED_STRING","'delete-form'",559],")",",",["T_WHITESPACE"," ",559],"[","]",",",["T_WHITESPACE"," ",559],["T_STRING","t",559],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",559],")",")",";",["T_WHITESPACE","\n    ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","drupalGet",560],"(",["T_VARIABLE","$nodes",560],"[",["T_LNUMBER","0",560],"]",["T_OBJECT_OPERATOR","->",560],["T_STRING","urlInfo",560],"(",")",")",";",["T_WHITESPACE","\n    ",560],["T_VARIABLE","$this",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","assertResponse",561],"(",["T_LNUMBER","200",561],")",";",["T_WHITESPACE","\n    ",561],["T_VARIABLE","$this",562],["T_OBJECT_OPERATOR","->",562],["T_STRING","assertText",562],"(",["T_VARIABLE","$nodes",562],"[",["T_LNUMBER","0",562],"]",["T_OBJECT_OPERATOR","->",562],["T_STRING","label",562],"(",")",")",";",["T_WHITESPACE","\n    ",562],["T_COMMENT","\/\/ The book parents should be updated.\n",563],["T_WHITESPACE","    ",564],["T_VARIABLE","$node_storage",564],["T_WHITESPACE"," ",564],"=",["T_WHITESPACE"," ",564],["T_NS_SEPARATOR","\\",564],["T_STRING","Drupal",564],["T_DOUBLE_COLON","::",564],["T_STRING","entityTypeManager",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getStorage",564],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",564],")",";",["T_WHITESPACE","\n    ",564],["T_VARIABLE","$node_storage",565],["T_OBJECT_OPERATOR","->",565],["T_STRING","resetCache",565],"(",")",";",["T_WHITESPACE","\n    ",565],["T_VARIABLE","$child",566],["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_VARIABLE","$node_storage",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","load",566],"(",["T_VARIABLE","$nodes",566],"[",["T_LNUMBER","0",566],"]",["T_OBJECT_OPERATOR","->",566],["T_STRING","id",566],"(",")",")",";",["T_WHITESPACE","\n    ",566],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","assertEqual",567],"(",["T_VARIABLE","$child",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","id",567],"(",")",",",["T_WHITESPACE"," ",567],["T_VARIABLE","$child",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","book",567],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",567],"]",",",["T_WHITESPACE"," ",567],["T_CONSTANT_ENCAPSED_STRING","'Child node book ID updated when parent is deleted.'",567],")",";",["T_WHITESPACE","\n    ",567],["T_COMMENT","\/\/ 3rd-level children should now be 2nd-level.\n",568],["T_WHITESPACE","    ",569],["T_VARIABLE","$second",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$node_storage",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","load",569],"(",["T_VARIABLE","$nodes",569],"[",["T_LNUMBER","1",569],"]",["T_OBJECT_OPERATOR","->",569],["T_STRING","id",569],"(",")",")",";",["T_WHITESPACE","\n    ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","assertEqual",570],"(",["T_VARIABLE","$child",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","id",570],"(",")",",",["T_WHITESPACE"," ",570],["T_VARIABLE","$second",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","book",570],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",570],"]",",",["T_WHITESPACE"," ",570],["T_CONSTANT_ENCAPSED_STRING","'3rd-level child node is now second level when top-level node is deleted.'",570],")",";",["T_WHITESPACE","\n  ",570],"}",["T_WHITESPACE","\n\n  ",571],["T_DOC_COMMENT","\/**\n   * Tests outline of a book.\n   *\/",573],["T_WHITESPACE","\n  ",575],["T_PUBLIC","public",576],["T_WHITESPACE"," ",576],["T_FUNCTION","function",576],["T_WHITESPACE"," ",576],["T_STRING","testBookOutline",576],"(",")",["T_WHITESPACE"," ",576],"{",["T_WHITESPACE","\n    ",576],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","drupalLogin",577],"(",["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","bookAuthor",577],")",";",["T_WHITESPACE","\n\n    ",577],["T_COMMENT","\/\/ Create new node not yet a book.\n",579],["T_WHITESPACE","    ",580],["T_VARIABLE","$empty_book",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","drupalCreateNode",580],"(",["T_ARRAY","array",580],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",580],["T_WHITESPACE"," ",580],["T_DOUBLE_ARROW","=>",580],["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'book'",580],")",")",";",["T_WHITESPACE","\n    ",580],["T_VARIABLE","$this",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","drupalGet",581],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",581],["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_VARIABLE","$empty_book",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","id",581],"(",")",["T_WHITESPACE"," ",581],".",["T_WHITESPACE"," ",581],["T_CONSTANT_ENCAPSED_STRING","'\/outline'",581],")",";",["T_WHITESPACE","\n    ",581],["T_VARIABLE","$this",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","assertNoLink",582],"(",["T_STRING","t",582],"(",["T_CONSTANT_ENCAPSED_STRING","'Book outline'",582],")",",",["T_WHITESPACE"," ",582],["T_CONSTANT_ENCAPSED_STRING","'Book Author is not allowed to outline'",582],")",";",["T_WHITESPACE","\n\n    ",582],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","drupalLogin",584],"(",["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","adminUser",584],")",";",["T_WHITESPACE","\n    ",584],["T_VARIABLE","$this",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","drupalGet",585],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",585],["T_WHITESPACE"," ",585],".",["T_WHITESPACE"," ",585],["T_VARIABLE","$empty_book",585],["T_OBJECT_OPERATOR","->",585],["T_STRING","id",585],"(",")",["T_WHITESPACE"," ",585],".",["T_WHITESPACE"," ",585],["T_CONSTANT_ENCAPSED_STRING","'\/outline'",585],")",";",["T_WHITESPACE","\n    ",585],["T_VARIABLE","$this",586],["T_OBJECT_OPERATOR","->",586],["T_STRING","assertRaw",586],"(",["T_STRING","t",586],"(",["T_CONSTANT_ENCAPSED_STRING","'Book outline'",586],")",")",";",["T_WHITESPACE","\n    ",586],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","assertOptionSelected",587],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-book-bid'",587],",",["T_WHITESPACE"," ",587],["T_LNUMBER","0",587],",",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'Node does not belong to a book'",587],")",";",["T_WHITESPACE","\n    ",587],["T_VARIABLE","$this",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","assertNoLink",588],"(",["T_STRING","t",588],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove from book outline'",588],")",")",";",["T_WHITESPACE","\n\n    ",588],["T_VARIABLE","$edit",590],["T_WHITESPACE"," ",590],"=",["T_WHITESPACE"," ",590],["T_ARRAY","array",590],"(",")",";",["T_WHITESPACE","\n    ",590],["T_VARIABLE","$edit",591],"[",["T_CONSTANT_ENCAPSED_STRING","'book[bid]'",591],"]",["T_WHITESPACE"," ",591],"=",["T_WHITESPACE"," ",591],["T_CONSTANT_ENCAPSED_STRING","'1'",591],";",["T_WHITESPACE","\n    ",591],["T_VARIABLE","$this",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","drupalPostForm",592],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",592],["T_WHITESPACE"," ",592],".",["T_WHITESPACE"," ",592],["T_VARIABLE","$empty_book",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","id",592],"(",")",["T_WHITESPACE"," ",592],".",["T_WHITESPACE"," ",592],["T_CONSTANT_ENCAPSED_STRING","'\/outline'",592],",",["T_WHITESPACE"," ",592],["T_VARIABLE","$edit",592],",",["T_WHITESPACE"," ",592],["T_STRING","t",592],"(",["T_CONSTANT_ENCAPSED_STRING","'Add to book outline'",592],")",")",";",["T_WHITESPACE","\n    ",592],["T_VARIABLE","$node",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_NS_SEPARATOR","\\",593],["T_STRING","Drupal",593],["T_DOUBLE_COLON","::",593],["T_STRING","entityManager",593],"(",")",["T_OBJECT_OPERATOR","->",593],["T_STRING","getStorage",593],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",593],")",["T_OBJECT_OPERATOR","->",593],["T_STRING","load",593],"(",["T_VARIABLE","$empty_book",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","id",593],"(",")",")",";",["T_WHITESPACE","\n    ",593],["T_COMMENT","\/\/ Test the book array.\n",594],["T_WHITESPACE","    ",595],["T_VARIABLE","$this",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","assertEqual",595],"(",["T_VARIABLE","$node",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","book",595],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",595],"]",",",["T_WHITESPACE"," ",595],["T_VARIABLE","$empty_book",595],["T_OBJECT_OPERATOR","->",595],["T_STRING","id",595],"(",")",")",";",["T_WHITESPACE","\n    ",595],["T_VARIABLE","$this",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","assertEqual",596],"(",["T_VARIABLE","$node",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","book",596],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",596],"]",",",["T_WHITESPACE"," ",596],["T_VARIABLE","$empty_book",596],["T_OBJECT_OPERATOR","->",596],["T_STRING","id",596],"(",")",")",";",["T_WHITESPACE","\n    ",596],["T_VARIABLE","$this",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","assertEqual",597],"(",["T_VARIABLE","$node",597],["T_OBJECT_OPERATOR","->",597],["T_STRING","book",597],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",597],"]",",",["T_WHITESPACE"," ",597],["T_LNUMBER","1",597],")",";",["T_WHITESPACE","\n    ",597],["T_VARIABLE","$this",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","assertEqual",598],"(",["T_VARIABLE","$node",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","book",598],"[",["T_CONSTANT_ENCAPSED_STRING","'p1'",598],"]",",",["T_WHITESPACE"," ",598],["T_VARIABLE","$empty_book",598],["T_OBJECT_OPERATOR","->",598],["T_STRING","id",598],"(",")",")",";",["T_WHITESPACE","\n    ",598],["T_VARIABLE","$this",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","assertEqual",599],"(",["T_VARIABLE","$node",599],["T_OBJECT_OPERATOR","->",599],["T_STRING","book",599],"[",["T_CONSTANT_ENCAPSED_STRING","'pid'",599],"]",",",["T_WHITESPACE"," ",599],["T_CONSTANT_ENCAPSED_STRING","'0'",599],")",";",["T_WHITESPACE","\n\n    ",599],["T_COMMENT","\/\/ Create new book.\n",601],["T_WHITESPACE","    ",602],["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","drupalLogin",602],"(",["T_VARIABLE","$this",602],["T_OBJECT_OPERATOR","->",602],["T_STRING","bookAuthor",602],")",";",["T_WHITESPACE","\n    ",602],["T_VARIABLE","$book",603],["T_WHITESPACE"," ",603],"=",["T_WHITESPACE"," ",603],["T_VARIABLE","$this",603],["T_OBJECT_OPERATOR","->",603],["T_STRING","createBookNode",603],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",603],")",";",["T_WHITESPACE","\n\n    ",603],["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","drupalLogin",605],"(",["T_VARIABLE","$this",605],["T_OBJECT_OPERATOR","->",605],["T_STRING","adminUser",605],")",";",["T_WHITESPACE","\n    ",605],["T_VARIABLE","$this",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","drupalGet",606],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",606],["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_VARIABLE","$book",606],["T_OBJECT_OPERATOR","->",606],["T_STRING","id",606],"(",")",["T_WHITESPACE"," ",606],".",["T_WHITESPACE"," ",606],["T_CONSTANT_ENCAPSED_STRING","'\/outline'",606],")",";",["T_WHITESPACE","\n    ",606],["T_VARIABLE","$this",607],["T_OBJECT_OPERATOR","->",607],["T_STRING","assertRaw",607],"(",["T_STRING","t",607],"(",["T_CONSTANT_ENCAPSED_STRING","'Book outline'",607],")",")",";",["T_WHITESPACE","\n    ",607],["T_VARIABLE","$this",608],["T_OBJECT_OPERATOR","->",608],["T_STRING","clickLink",608],"(",["T_STRING","t",608],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove from book outline'",608],")",")",";",["T_WHITESPACE","\n    ",608],["T_VARIABLE","$this",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","assertRaw",609],"(",["T_STRING","t",609],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to remove %title from the book hierarchy?'",609],",",["T_WHITESPACE"," ",609],["T_ARRAY","array",609],"(",["T_CONSTANT_ENCAPSED_STRING","'%title'",609],["T_WHITESPACE"," ",609],["T_DOUBLE_ARROW","=>",609],["T_WHITESPACE"," ",609],["T_VARIABLE","$book",609],["T_OBJECT_OPERATOR","->",609],["T_STRING","label",609],"(",")",")",")",")",";",["T_WHITESPACE","\n\n    ",609],["T_COMMENT","\/\/ Create a new node and set the book after the node was created.\n",611],["T_WHITESPACE","    ",612],["T_VARIABLE","$node",612],["T_WHITESPACE"," ",612],"=",["T_WHITESPACE"," ",612],["T_VARIABLE","$this",612],["T_OBJECT_OPERATOR","->",612],["T_STRING","drupalCreateNode",612],"(",["T_ARRAY","array",612],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",612],["T_WHITESPACE"," ",612],["T_DOUBLE_ARROW","=>",612],["T_WHITESPACE"," ",612],["T_CONSTANT_ENCAPSED_STRING","'book'",612],")",")",";",["T_WHITESPACE","\n    ",612],["T_VARIABLE","$edit",613],["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],["T_ARRAY","array",613],"(",")",";",["T_WHITESPACE","\n    ",613],["T_VARIABLE","$edit",614],"[",["T_CONSTANT_ENCAPSED_STRING","'book[bid]'",614],"]",["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],["T_VARIABLE","$node",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","id",614],"(",")",";",["T_WHITESPACE","\n    ",614],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","drupalPostForm",615],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",615],["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_VARIABLE","$node",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","id",615],"(",")",["T_WHITESPACE"," ",615],".",["T_WHITESPACE"," ",615],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",615],",",["T_WHITESPACE"," ",615],["T_VARIABLE","$edit",615],",",["T_WHITESPACE"," ",615],["T_STRING","t",615],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",615],")",")",";",["T_WHITESPACE","\n    ",615],["T_VARIABLE","$node",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],["T_NS_SEPARATOR","\\",616],["T_STRING","Drupal",616],["T_DOUBLE_COLON","::",616],["T_STRING","entityManager",616],"(",")",["T_OBJECT_OPERATOR","->",616],["T_STRING","getStorage",616],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",616],")",["T_OBJECT_OPERATOR","->",616],["T_STRING","load",616],"(",["T_VARIABLE","$node",616],["T_OBJECT_OPERATOR","->",616],["T_STRING","id",616],"(",")",")",";",["T_WHITESPACE","\n\n    ",616],["T_COMMENT","\/\/ Test the book array.\n",618],["T_WHITESPACE","    ",619],["T_VARIABLE","$this",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","assertEqual",619],"(",["T_VARIABLE","$node",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","book",619],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",619],"]",",",["T_WHITESPACE"," ",619],["T_VARIABLE","$node",619],["T_OBJECT_OPERATOR","->",619],["T_STRING","id",619],"(",")",")",";",["T_WHITESPACE","\n    ",619],["T_VARIABLE","$this",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","assertEqual",620],"(",["T_VARIABLE","$node",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","book",620],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",620],"]",",",["T_WHITESPACE"," ",620],["T_VARIABLE","$node",620],["T_OBJECT_OPERATOR","->",620],["T_STRING","id",620],"(",")",")",";",["T_WHITESPACE","\n    ",620],["T_VARIABLE","$this",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","assertEqual",621],"(",["T_VARIABLE","$node",621],["T_OBJECT_OPERATOR","->",621],["T_STRING","book",621],"[",["T_CONSTANT_ENCAPSED_STRING","'depth'",621],"]",",",["T_WHITESPACE"," ",621],["T_LNUMBER","1",621],")",";",["T_WHITESPACE","\n    ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","assertEqual",622],"(",["T_VARIABLE","$node",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","book",622],"[",["T_CONSTANT_ENCAPSED_STRING","'p1'",622],"]",",",["T_WHITESPACE"," ",622],["T_VARIABLE","$node",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","id",622],"(",")",")",";",["T_WHITESPACE","\n    ",622],["T_VARIABLE","$this",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","assertEqual",623],"(",["T_VARIABLE","$node",623],["T_OBJECT_OPERATOR","->",623],["T_STRING","book",623],"[",["T_CONSTANT_ENCAPSED_STRING","'pid'",623],"]",",",["T_WHITESPACE"," ",623],["T_CONSTANT_ENCAPSED_STRING","'0'",623],")",";",["T_WHITESPACE","\n\n    ",623],["T_COMMENT","\/\/ Test the form itself.\n",625],["T_WHITESPACE","    ",626],["T_VARIABLE","$this",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","drupalGet",626],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",626],["T_WHITESPACE"," ",626],".",["T_WHITESPACE"," ",626],["T_VARIABLE","$node",626],["T_OBJECT_OPERATOR","->",626],["T_STRING","id",626],"(",")",["T_WHITESPACE"," ",626],".",["T_WHITESPACE"," ",626],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",626],")",";",["T_WHITESPACE","\n    ",626],["T_VARIABLE","$this",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","assertOptionSelected",627],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-book-bid'",627],",",["T_WHITESPACE"," ",627],["T_VARIABLE","$node",627],["T_OBJECT_OPERATOR","->",627],["T_STRING","id",627],"(",")",")",";",["T_WHITESPACE","\n  ",627],"}",["T_WHITESPACE","\n\n  ",628],["T_DOC_COMMENT","\/**\n   * Tests that saveBookLink() returns something.\n   *\/",630],["T_WHITESPACE","\n  ",632],["T_PUBLIC","public",633],["T_WHITESPACE"," ",633],["T_FUNCTION","function",633],["T_WHITESPACE"," ",633],["T_STRING","testSaveBookLink",633],"(",")",["T_WHITESPACE"," ",633],"{",["T_WHITESPACE","\n    ",633],["T_VARIABLE","$book_manager",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_NS_SEPARATOR","\\",634],["T_STRING","Drupal",634],["T_DOUBLE_COLON","::",634],["T_STRING","service",634],"(",["T_CONSTANT_ENCAPSED_STRING","'book.manager'",634],")",";",["T_WHITESPACE","\n\n    ",634],["T_COMMENT","\/\/ Mock a link for a new book.\n",636],["T_WHITESPACE","    ",637],["T_VARIABLE","$link",637],["T_WHITESPACE"," ",637],"=",["T_WHITESPACE"," ",637],["T_ARRAY","array",637],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","1",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'has_children'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","0",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'original_bid'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","0",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'parent_depth_limit'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","8",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'pid'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","0",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'weight'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","0",637],",",["T_WHITESPACE"," ",637],["T_CONSTANT_ENCAPSED_STRING","'bid'",637],["T_WHITESPACE"," ",637],["T_DOUBLE_ARROW","=>",637],["T_WHITESPACE"," ",637],["T_LNUMBER","1",637],")",";",["T_WHITESPACE","\n    ",637],["T_VARIABLE","$new",638],["T_WHITESPACE"," ",638],"=",["T_WHITESPACE"," ",638],["T_STRING","TRUE",638],";",["T_WHITESPACE","\n\n    ",638],["T_COMMENT","\/\/ Save the link.\n",640],["T_WHITESPACE","    ",641],["T_VARIABLE","$return",641],["T_WHITESPACE"," ",641],"=",["T_WHITESPACE"," ",641],["T_VARIABLE","$book_manager",641],["T_OBJECT_OPERATOR","->",641],["T_STRING","saveBookLink",641],"(",["T_VARIABLE","$link",641],",",["T_WHITESPACE"," ",641],["T_VARIABLE","$new",641],")",";",["T_WHITESPACE","\n\n    ",641],["T_COMMENT","\/\/ Add the link defaults to $link so we have something to compare to the return from saveBookLink().\n",643],["T_WHITESPACE","    ",644],["T_VARIABLE","$link",644],["T_WHITESPACE"," ",644],["T_PLUS_EQUAL","+=",644],["T_WHITESPACE"," ",644],["T_VARIABLE","$book_manager",644],["T_OBJECT_OPERATOR","->",644],["T_STRING","getLinkDefaults",644],"(",["T_VARIABLE","$link",644],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",644],"]",")",";",["T_WHITESPACE","\n\n    ",644],["T_COMMENT","\/\/ Test the return from saveBookLink.\n",646],["T_WHITESPACE","    ",647],["T_VARIABLE","$this",647],["T_OBJECT_OPERATOR","->",647],["T_STRING","assertEqual",647],"(",["T_VARIABLE","$return",647],",",["T_WHITESPACE"," ",647],["T_VARIABLE","$link",647],")",";",["T_WHITESPACE","\n  ",647],"}",["T_WHITESPACE","\n\n  ",648],["T_DOC_COMMENT","\/**\n   * Tests the listing of all books.\n   *\/",650],["T_WHITESPACE","\n  ",652],["T_PUBLIC","public",653],["T_WHITESPACE"," ",653],["T_FUNCTION","function",653],["T_WHITESPACE"," ",653],["T_STRING","testBookListing",653],"(",")",["T_WHITESPACE"," ",653],"{",["T_WHITESPACE","\n    ",653],["T_COMMENT","\/\/ Create a new book.\n",654],["T_WHITESPACE","    ",655],["T_VARIABLE","$this",655],["T_OBJECT_OPERATOR","->",655],["T_STRING","createBook",655],"(",")",";",["T_WHITESPACE","\n\n    ",655],["T_COMMENT","\/\/ Must be a user with 'node test view' permission since node_access_test is installed.\n",657],["T_WHITESPACE","    ",658],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","drupalLogin",658],"(",["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","webUser",658],")",";",["T_WHITESPACE","\n\n    ",658],["T_COMMENT","\/\/ Load the book page and assert the created book title is displayed.\n",660],["T_WHITESPACE","    ",661],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","drupalGet",661],"(",["T_CONSTANT_ENCAPSED_STRING","'book'",661],")",";",["T_WHITESPACE","\n\n    ",661],["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","assertText",663],"(",["T_VARIABLE","$this",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","book",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","label",663],"(",")",",",["T_WHITESPACE"," ",663],["T_CONSTANT_ENCAPSED_STRING","'The book title is displayed on the book listing page.'",663],")",";",["T_WHITESPACE","\n  ",663],"}",["T_WHITESPACE","\n\n  ",664],["T_DOC_COMMENT","\/**\n   * Tests the administrative listing of all books.\n   *\/",666],["T_WHITESPACE","\n  ",668],["T_PUBLIC","public",669],["T_WHITESPACE"," ",669],["T_FUNCTION","function",669],["T_WHITESPACE"," ",669],["T_STRING","testAdminBookListing",669],"(",")",["T_WHITESPACE"," ",669],"{",["T_WHITESPACE","\n    ",669],["T_COMMENT","\/\/ Create a new book.\n",670],["T_WHITESPACE","    ",671],["T_VARIABLE","$this",671],["T_OBJECT_OPERATOR","->",671],["T_STRING","createBook",671],"(",")",";",["T_WHITESPACE","\n\n    ",671],["T_COMMENT","\/\/ Load the book page and assert the created book title is displayed.\n",673],["T_WHITESPACE","    ",674],["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","drupalLogin",674],"(",["T_VARIABLE","$this",674],["T_OBJECT_OPERATOR","->",674],["T_STRING","adminUser",674],")",";",["T_WHITESPACE","\n    ",674],["T_VARIABLE","$this",675],["T_OBJECT_OPERATOR","->",675],["T_STRING","drupalGet",675],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/book'",675],")",";",["T_WHITESPACE","\n    ",675],["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","assertText",676],"(",["T_VARIABLE","$this",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","book",676],["T_OBJECT_OPERATOR","->",676],["T_STRING","label",676],"(",")",",",["T_WHITESPACE"," ",676],["T_CONSTANT_ENCAPSED_STRING","'The book title is displayed on the administrative book listing page.'",676],")",";",["T_WHITESPACE","\n  ",676],"}",["T_WHITESPACE","\n\n  ",677],["T_DOC_COMMENT","\/**\n   * Tests the administrative listing of all book pages in a book.\n   *\/",679],["T_WHITESPACE","\n  ",681],["T_PUBLIC","public",682],["T_WHITESPACE"," ",682],["T_FUNCTION","function",682],["T_WHITESPACE"," ",682],["T_STRING","testAdminBookNodeListing",682],"(",")",["T_WHITESPACE"," ",682],"{",["T_WHITESPACE","\n    ",682],["T_COMMENT","\/\/ Create a new book.\n",683],["T_WHITESPACE","    ",684],["T_VARIABLE","$this",684],["T_OBJECT_OPERATOR","->",684],["T_STRING","createBook",684],"(",")",";",["T_WHITESPACE","\n    ",684],["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","drupalLogin",685],"(",["T_VARIABLE","$this",685],["T_OBJECT_OPERATOR","->",685],["T_STRING","adminUser",685],")",";",["T_WHITESPACE","\n\n    ",685],["T_COMMENT","\/\/ Load the book page list and assert the created book title is displayed\n",687],["T_WHITESPACE","    ",688],["T_COMMENT","\/\/ and action links are shown on list items.\n",688],["T_WHITESPACE","    ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","drupalGet",689],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/book\/'",689],["T_WHITESPACE"," ",689],".",["T_WHITESPACE"," ",689],["T_VARIABLE","$this",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","book",689],["T_OBJECT_OPERATOR","->",689],["T_STRING","id",689],"(",")",")",";",["T_WHITESPACE","\n    ",689],["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","assertText",690],"(",["T_VARIABLE","$this",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","book",690],["T_OBJECT_OPERATOR","->",690],["T_STRING","label",690],"(",")",",",["T_WHITESPACE"," ",690],["T_CONSTANT_ENCAPSED_STRING","'The book title is displayed on the administrative book listing page.'",690],")",";",["T_WHITESPACE","\n\n    ",690],["T_VARIABLE","$elements",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],["T_VARIABLE","$this",692],["T_OBJECT_OPERATOR","->",692],["T_STRING","xpath",692],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/table\/\/ul[@class=\"dropbutton\"]\/li\/a'",692],")",";",["T_WHITESPACE","\n    ",692],["T_VARIABLE","$this",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","assertEqual",693],"(",["T_STRING_CAST","(string)",693],["T_WHITESPACE"," ",693],["T_VARIABLE","$elements",693],"[",["T_LNUMBER","0",693],"]",",",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'View'",693],",",["T_WHITESPACE"," ",693],["T_CONSTANT_ENCAPSED_STRING","'View link is found from the list.'",693],")",";",["T_WHITESPACE","\n  ",693],"}",["T_WHITESPACE","\n\n  ",694],["T_DOC_COMMENT","\/**\n   * Ensure the loaded book in hook_node_load() does not depend on the user.\n   *\/",696],["T_WHITESPACE","\n  ",698],["T_PUBLIC","public",699],["T_WHITESPACE"," ",699],["T_FUNCTION","function",699],["T_WHITESPACE"," ",699],["T_STRING","testHookNodeLoadAccess",699],"(",")",["T_WHITESPACE"," ",699],"{",["T_WHITESPACE","\n    ",699],["T_NS_SEPARATOR","\\",700],["T_STRING","Drupal",700],["T_DOUBLE_COLON","::",700],["T_STRING","service",700],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",700],")",["T_OBJECT_OPERATOR","->",700],["T_STRING","install",700],"(","[",["T_CONSTANT_ENCAPSED_STRING","'node_access_test'",700],"]",")",";",["T_WHITESPACE","\n\n    ",700],["T_COMMENT","\/\/ Ensure that the loaded book in hook_node_load() does NOT depend on the\n",702],["T_WHITESPACE","    ",703],["T_COMMENT","\/\/ current user.\n",703],["T_WHITESPACE","    ",704],["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","drupalLogin",704],"(",["T_VARIABLE","$this",704],["T_OBJECT_OPERATOR","->",704],["T_STRING","bookAuthor",704],")",";",["T_WHITESPACE","\n    ",704],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","book",705],["T_WHITESPACE"," ",705],"=",["T_WHITESPACE"," ",705],["T_VARIABLE","$this",705],["T_OBJECT_OPERATOR","->",705],["T_STRING","createBookNode",705],"(",["T_CONSTANT_ENCAPSED_STRING","'new'",705],")",";",["T_WHITESPACE","\n    ",705],["T_COMMENT","\/\/ Reset any internal static caching.\n",706],["T_WHITESPACE","    ",707],["T_VARIABLE","$node_storage",707],["T_WHITESPACE"," ",707],"=",["T_WHITESPACE"," ",707],["T_NS_SEPARATOR","\\",707],["T_STRING","Drupal",707],["T_DOUBLE_COLON","::",707],["T_STRING","entityManager",707],"(",")",["T_OBJECT_OPERATOR","->",707],["T_STRING","getStorage",707],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",707],")",";",["T_WHITESPACE","\n    ",707],["T_VARIABLE","$node_storage",708],["T_OBJECT_OPERATOR","->",708],["T_STRING","resetCache",708],"(",")",";",["T_WHITESPACE","\n\n    ",708],["T_COMMENT","\/\/ Log in as user without access to the book node, so no 'node test view'\n",710],["T_WHITESPACE","    ",711],["T_COMMENT","\/\/ permission.\n",711],["T_WHITESPACE","    ",712],["T_COMMENT","\/\/ @see node_access_test_node_grants().\n",712],["T_WHITESPACE","    ",713],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","drupalLogin",713],"(",["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","webUserWithoutNodeAccess",713],")",";",["T_WHITESPACE","\n    ",713],["T_VARIABLE","$book_node",714],["T_WHITESPACE"," ",714],"=",["T_WHITESPACE"," ",714],["T_VARIABLE","$node_storage",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","load",714],"(",["T_VARIABLE","$this",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","book",714],["T_OBJECT_OPERATOR","->",714],["T_STRING","id",714],"(",")",")",";",["T_WHITESPACE","\n    ",714],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","assertTrue",715],"(","!",["T_EMPTY","empty",715],"(",["T_VARIABLE","$book_node",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","book",715],")",")",";",["T_WHITESPACE","\n    ",715],["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","assertEqual",716],"(",["T_VARIABLE","$book_node",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","book",716],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",716],"]",",",["T_WHITESPACE"," ",716],["T_VARIABLE","$this",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","book",716],["T_OBJECT_OPERATOR","->",716],["T_STRING","id",716],"(",")",")",";",["T_WHITESPACE","\n\n    ",716],["T_COMMENT","\/\/ Reset the internal cache to retrigger the hook_node_load() call.\n",718],["T_WHITESPACE","    ",719],["T_VARIABLE","$node_storage",719],["T_OBJECT_OPERATOR","->",719],["T_STRING","resetCache",719],"(",")",";",["T_WHITESPACE","\n\n    ",719],["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","drupalLogin",721],"(",["T_VARIABLE","$this",721],["T_OBJECT_OPERATOR","->",721],["T_STRING","webUser",721],")",";",["T_WHITESPACE","\n    ",721],["T_VARIABLE","$book_node",722],["T_WHITESPACE"," ",722],"=",["T_WHITESPACE"," ",722],["T_VARIABLE","$node_storage",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","load",722],"(",["T_VARIABLE","$this",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","book",722],["T_OBJECT_OPERATOR","->",722],["T_STRING","id",722],"(",")",")",";",["T_WHITESPACE","\n    ",722],["T_VARIABLE","$this",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","assertTrue",723],"(","!",["T_EMPTY","empty",723],"(",["T_VARIABLE","$book_node",723],["T_OBJECT_OPERATOR","->",723],["T_STRING","book",723],")",")",";",["T_WHITESPACE","\n    ",723],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","assertEqual",724],"(",["T_VARIABLE","$book_node",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","book",724],"[",["T_CONSTANT_ENCAPSED_STRING","'bid'",724],"]",",",["T_WHITESPACE"," ",724],["T_VARIABLE","$this",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","book",724],["T_OBJECT_OPERATOR","->",724],["T_STRING","id",724],"(",")",")",";",["T_WHITESPACE","\n  ",724],"}",["T_WHITESPACE","\n\n  ",725],["T_DOC_COMMENT","\/**\n   * Tests the book navigation block when book is unpublished.\n   *\n   * There was a fatal error with \"Show block only on book pages\" block mode.\n   *\/",727],["T_WHITESPACE","\n  ",731],["T_PUBLIC","public",732],["T_WHITESPACE"," ",732],["T_FUNCTION","function",732],["T_WHITESPACE"," ",732],["T_STRING","testBookNavigationBlockOnUnpublishedBook",732],"(",")",["T_WHITESPACE"," ",732],"{",["T_WHITESPACE","\n    ",732],["T_COMMENT","\/\/ Create a new book.\n",733],["T_WHITESPACE","    ",734],["T_VARIABLE","$this",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","createBook",734],"(",")",";",["T_WHITESPACE","\n\n    ",734],["T_COMMENT","\/\/ Create administrator user.\n",736],["T_WHITESPACE","    ",737],["T_VARIABLE","$administratorUser",737],["T_WHITESPACE"," ",737],"=",["T_WHITESPACE"," ",737],["T_VARIABLE","$this",737],["T_OBJECT_OPERATOR","->",737],["T_STRING","drupalCreateUser",737],"(","[",["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",737],",",["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","'administer nodes'",737],",",["T_WHITESPACE"," ",737],["T_CONSTANT_ENCAPSED_STRING","'bypass node access'",737],"]",")",";",["T_WHITESPACE","\n    ",737],["T_VARIABLE","$this",738],["T_OBJECT_OPERATOR","->",738],["T_STRING","drupalLogin",738],"(",["T_VARIABLE","$administratorUser",738],")",";",["T_WHITESPACE","\n\n    ",738],["T_COMMENT","\/\/ Enable the block with \"Show block only on book pages\" mode.\n",740],["T_WHITESPACE","    ",741],["T_VARIABLE","$this",741],["T_OBJECT_OPERATOR","->",741],["T_STRING","drupalPlaceBlock",741],"(",["T_CONSTANT_ENCAPSED_STRING","'book_navigation'",741],",",["T_WHITESPACE"," ",741],"[",["T_CONSTANT_ENCAPSED_STRING","'block_mode'",741],["T_WHITESPACE"," ",741],["T_DOUBLE_ARROW","=>",741],["T_WHITESPACE"," ",741],["T_CONSTANT_ENCAPSED_STRING","'book pages'",741],"]",")",";",["T_WHITESPACE","\n\n    ",741],["T_COMMENT","\/\/ Unpublish book node.\n",743],["T_WHITESPACE","    ",744],["T_VARIABLE","$edit",744],["T_WHITESPACE"," ",744],"=",["T_WHITESPACE"," ",744],"[","]",";",["T_WHITESPACE","\n    ",744],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","drupalPostForm",745],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",745],["T_WHITESPACE"," ",745],".",["T_WHITESPACE"," ",745],["T_VARIABLE","$this",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","book",745],["T_OBJECT_OPERATOR","->",745],["T_STRING","id",745],"(",")",["T_WHITESPACE"," ",745],".",["T_WHITESPACE"," ",745],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",745],",",["T_WHITESPACE"," ",745],["T_VARIABLE","$edit",745],",",["T_WHITESPACE"," ",745],["T_STRING","t",745],"(",["T_CONSTANT_ENCAPSED_STRING","'Save and unpublish'",745],")",")",";",["T_WHITESPACE","\n\n    ",745],["T_COMMENT","\/\/ Test node page.\n",747],["T_WHITESPACE","    ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","drupalGet",748],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",748],["T_WHITESPACE"," ",748],".",["T_WHITESPACE"," ",748],["T_VARIABLE","$this",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","book",748],["T_OBJECT_OPERATOR","->",748],["T_STRING","id",748],"(",")",")",";",["T_WHITESPACE","\n    ",748],["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","assertText",749],"(",["T_VARIABLE","$this",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","book",749],["T_OBJECT_OPERATOR","->",749],["T_STRING","label",749],"(",")",",",["T_WHITESPACE"," ",749],["T_CONSTANT_ENCAPSED_STRING","'Unpublished book with \"Show block only on book pages\" book navigation settings.'",749],")",";",["T_WHITESPACE","\n  ",749],"}",["T_WHITESPACE","\n\n",750],"}",["T_WHITESPACE","\n",752]]
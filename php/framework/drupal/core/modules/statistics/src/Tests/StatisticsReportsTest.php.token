[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","statistics",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests display of statistics report blocks.\n *\n * @group statistics\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","StatisticsReportsTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","StatisticsTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Tests the \"popular content\" block.\n   *\/",12],["T_WHITESPACE","\n  ",14],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","testPopularContentBlock",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_COMMENT","\/\/ Clear the block cache to load the Statistics module's block definitions.\n",16],["T_WHITESPACE","    ",17],["T_VARIABLE","$this",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","container",17],["T_OBJECT_OPERATOR","->",17],["T_STRING","get",17],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.block'",17],")",["T_OBJECT_OPERATOR","->",17],["T_STRING","clearCachedDefinitions",17],"(",")",";",["T_WHITESPACE","\n\n    ",17],["T_COMMENT","\/\/ Visit a node to have something show up in the block.\n",19],["T_WHITESPACE","    ",20],["T_VARIABLE","$node",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","drupalCreateNode",20],"(",["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",20],["T_WHITESPACE"," ",20],["T_DOUBLE_ARROW","=>",20],["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'page'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'uid'",20],["T_WHITESPACE"," ",20],["T_DOUBLE_ARROW","=>",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","blockingUser",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","id",20],"(",")",")",")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","drupalGet",21],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",21],["T_WHITESPACE"," ",21],".",["T_WHITESPACE"," ",21],["T_VARIABLE","$node",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","id",21],"(",")",")",";",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/\/ Manually calling statistics.php, simulating ajax behavior.\n",22],["T_WHITESPACE","    ",23],["T_VARIABLE","$nid",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$node",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","id",23],"(",")",";",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$post",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","http_build_query",24],"(",["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$nid",24],")",")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$headers",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'Content-Type'",25],["T_WHITESPACE"," ",25],["T_DOUBLE_ARROW","=>",25],["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'application\/x-www-form-urlencoded'",25],")",";",["T_WHITESPACE","\n    ",25],["T_GLOBAL","global",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$base_url",26],";",["T_WHITESPACE","\n    ",26],["T_VARIABLE","$stats_path",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_VARIABLE","$base_url",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'\/'",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_STRING","drupal_get_path",27],"(",["T_CONSTANT_ENCAPSED_STRING","'module'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'statistics'",27],")",["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'\/statistics.php'",27],";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$client",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_NS_SEPARATOR","\\",28],["T_STRING","Drupal",28],["T_DOUBLE_COLON","::",28],["T_STRING","httpClient",28],"(",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$client",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","post",29],"(",["T_VARIABLE","$stats_path",29],",",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'headers'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$headers",29],",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'body'",29],["T_WHITESPACE"," ",29],["T_DOUBLE_ARROW","=>",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$post",29],")",")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ Configure and save the block.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalPlaceBlock",32],"(",["T_CONSTANT_ENCAPSED_STRING","'statistics_popular_block'",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'label'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Popular content'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'top_day_num'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_LNUMBER","3",34],",",["T_WHITESPACE","\n      ",34],["T_CONSTANT_ENCAPSED_STRING","'top_all_num'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_LNUMBER","3",35],",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'top_last_num'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_LNUMBER","3",36],",",["T_WHITESPACE","\n    ",36],")",")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Get some page and check if the block is displayed.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalGet",40],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","assertText",41],"(",["T_CONSTANT_ENCAPSED_STRING","'Popular content'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'Found the popular content block.'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertText",42],"(",["T_CONSTANT_ENCAPSED_STRING","\"Today's\"",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","\"Found today's popular content.\"",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertText",43],"(",["T_CONSTANT_ENCAPSED_STRING","'All time'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Found the all time popular content.'",43],")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","assertText",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Last viewed'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'Found the last viewed popular content.'",44],")",";",["T_WHITESPACE","\n\n    ",44],["T_COMMENT","\/\/ statistics.module doesn't use node entities, prevent the node language\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ from being added to the options.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertRaw",48],"(",["T_NS_SEPARATOR","\\",48],["T_STRING","Drupal",48],["T_DOUBLE_COLON","::",48],["T_STRING","l",48],"(",["T_VARIABLE","$node",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","label",48],"(",")",",",["T_WHITESPACE"," ",48],["T_VARIABLE","$node",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","urlInfo",48],"(",["T_CONSTANT_ENCAPSED_STRING","'canonical'",48],",",["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_STRING","NULL",48],"]",")",")",",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Found link to visited node.'",48],")",";",["T_WHITESPACE","\n  ",48],"}",["T_WHITESPACE","\n\n",49],"}",["T_WHITESPACE","\n",51]]
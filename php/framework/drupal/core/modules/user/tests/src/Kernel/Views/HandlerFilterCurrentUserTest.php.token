[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Views",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","views",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Views",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Session",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AnonymousUserSession",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests the current user filter handler.\n *\n * @group user\n * @see \\Drupal\\user\\Plugin\\views\\filter\\Current\n *\/",8],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","HandlerFilterCurrentUserTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","UserKernelTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Views used by this test.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$testViews",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],"[",["T_CONSTANT_ENCAPSED_STRING","'test_filter_current_user'",21],"]",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The current user.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountProxy\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$currentUser",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_FUNCTION","function",33],["T_WHITESPACE"," ",33],["T_STRING","setUp",33],"(",["T_VARIABLE","$import_test_views",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_STRING","TRUE",33],")",["T_WHITESPACE"," ",33],"{",["T_WHITESPACE","\n    ",33],["T_STRING","parent",34],["T_DOUBLE_COLON","::",34],["T_STRING","setUp",34],"(",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","currentUser",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","container",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","get",35],"(",["T_CONSTANT_ENCAPSED_STRING","'current_user'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","setupPermissionTestData",36],"(",")",";",["T_WHITESPACE","\n  ",36],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * Tests the current user filter handler with anonymous user.\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","testFilterCurrentUserAsAnonymous",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$column_map",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'uid'",43],"]",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","currentUser",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","setAccount",44],"(",["T_NEW","new",44],["T_WHITESPACE"," ",44],["T_STRING","AnonymousUserSession",44],"(",")",")",";",["T_WHITESPACE","\n\n    ",44],["T_VARIABLE","$view",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Views",46],["T_DOUBLE_COLON","::",46],["T_STRING","getView",46],"(",["T_CONSTANT_ENCAPSED_STRING","'test_filter_current_user'",46],")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$view",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","initHandlers",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$view",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","filter",48],"[",["T_CONSTANT_ENCAPSED_STRING","'uid_current'",48],"]",["T_OBJECT_OPERATOR","->",48],["T_STRING","value",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","executeView",49],"(",["T_VARIABLE","$view",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$expected",50],"[","]",["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_LNUMBER","1",50],"]",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$expected",51],"[","]",["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_LNUMBER","2",51],"]",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$expected",52],"[","]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","3",52],"]",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$expected",53],"[","]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_LNUMBER","4",53],"]",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertIdenticalResultset",54],"(",["T_VARIABLE","$view",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$expected",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$column_map",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'Anonymous account can view all accounts when current filter is FALSE.'",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$view",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","destroy",55],"(",")",";",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$view",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","Views",57],["T_DOUBLE_COLON","::",57],["T_STRING","getView",57],"(",["T_CONSTANT_ENCAPSED_STRING","'test_filter_current_user'",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$view",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","initHandlers",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$view",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","filter",59],"[",["T_CONSTANT_ENCAPSED_STRING","'uid_current'",59],"]",["T_OBJECT_OPERATOR","->",59],["T_STRING","value",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_LNUMBER","1",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","executeView",60],"(",["T_VARIABLE","$view",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$expected",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],"[","]",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","assertIdenticalResultset",62],"(",["T_VARIABLE","$view",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$expected",62],",",["T_WHITESPACE"," ",62],["T_VARIABLE","$column_map",62],",",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","'Anonymous account can view zero accounts when current filter is TRUE.'",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$view",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","destroy",63],"(",")",";",["T_WHITESPACE","\n  ",63],"}",["T_WHITESPACE","\n\n  ",64],["T_DOC_COMMENT","\/**\n   * Tests the current user filter handler with logged-in user.\n   *\/",66],["T_WHITESPACE","\n  ",68],["T_PUBLIC","public",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","testFilterCurrentUserAsUser",69],"(",")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$column_map",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'uid'",70],"]",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$user",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","reset",71],"(",["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","users",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","currentUser",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","setAccount",72],"(",["T_VARIABLE","$user",72],")",";",["T_WHITESPACE","\n\n    ",72],["T_VARIABLE","$view",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Views",74],["T_DOUBLE_COLON","::",74],["T_STRING","getView",74],"(",["T_CONSTANT_ENCAPSED_STRING","'test_filter_current_user'",74],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$view",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","initHandlers",75],"(",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$view",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","filter",76],"[",["T_CONSTANT_ENCAPSED_STRING","'uid_current'",76],"]",["T_OBJECT_OPERATOR","->",76],["T_STRING","value",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_LNUMBER","0",76],";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","executeView",77],"(",["T_VARIABLE","$view",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$expected",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],"[","]",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$expected",79],"[","]",["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_LNUMBER","2",79],"]",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$expected",80],"[","]",["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_LNUMBER","3",80],"]",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$expected",81],"[","]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_LNUMBER","4",81],"]",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertIdenticalResultset",82],"(",["T_VARIABLE","$view",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$expected",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$column_map",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'User can view all users except itself when current filter is FALSE.'",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$view",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","destroy",83],"(",")",";",["T_WHITESPACE","\n\n    ",83],["T_VARIABLE","$view",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Views",85],["T_DOUBLE_COLON","::",85],["T_STRING","getView",85],"(",["T_CONSTANT_ENCAPSED_STRING","'test_filter_current_user'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$view",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","initHandlers",86],"(",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$view",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","filter",87],"[",["T_CONSTANT_ENCAPSED_STRING","'uid_current'",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","value",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_LNUMBER","1",87],";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","executeView",88],"(",["T_VARIABLE","$view",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$expected",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[","]",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$expected",90],"[","]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_LNUMBER","1",90],"]",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertIdenticalResultset",91],"(",["T_VARIABLE","$view",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$expected",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$column_map",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'User can only view itself when current filter is TRUE.'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$view",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","destroy",92],"(",")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n",93],"}",["T_WHITESPACE","\n",95]]
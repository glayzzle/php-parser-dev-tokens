[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","d6",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MigrateExecutable",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Tests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","file",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Kernel",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","d6",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FileMigrationTestTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","User",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","file",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","File",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Database",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Database",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","user",10],["T_NS_SEPARATOR","\\",10],["T_STRING","RoleInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Tests",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate_drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Kernel",11],["T_NS_SEPARATOR","\\",11],["T_STRING","d6",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MigrateDrupal6TestBase",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Users migration.\n *\n * @group migrate_drupal_6\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","MigrateUserTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","MigrateDrupal6TestBase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","FileMigrationTestTrait",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$modules",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'language'",25],"]",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",27],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_FUNCTION","function",30],["T_WHITESPACE"," ",30],["T_STRING","setUp",30],"(",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n    ",30],["T_STRING","parent",31],["T_DOUBLE_COLON","::",31],["T_STRING","setUp",31],"(",")",";",["T_WHITESPACE","\n\n    ",31],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","installEntitySchema",33],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","installSchema",34],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",34],",",["T_WHITESPACE"," ",34],"[",["T_CONSTANT_ENCAPSED_STRING","'file_usage'",34],"]",")",";",["T_WHITESPACE","\n    ",34],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","installEntitySchema",35],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",35],")",";",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","installSchema",36],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",36],",",["T_WHITESPACE"," ",36],"[",["T_CONSTANT_ENCAPSED_STRING","'users_data'",36],"]",")",";",["T_WHITESPACE","\n    ",36],["T_COMMENT","\/\/ Make sure uid 1 is created.\n",37],["T_WHITESPACE","    ",38],["T_STRING","user_install",38],"(",")",";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$file",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","File",40],["T_DOUBLE_COLON","::",40],["T_STRING","create",40],"(",["T_ARRAY","array",40],"(",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'fid'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_LNUMBER","2",41],",",["T_WHITESPACE","\n      ",41],["T_CONSTANT_ENCAPSED_STRING","'uid'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_LNUMBER","2",42],",",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'filename'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'image-test.jpg'",43],",",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'uri'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","\"public:\/\/image-test.jpg\"",44],",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'filemime'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'image\/jpeg'",45],",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'created'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_LNUMBER","1",46],",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'changed'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_LNUMBER","1",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'status'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_STRING","FILE_STATUS_PERMANENT",48],",",["T_WHITESPACE","\n    ",48],")",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$file",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","enforceIsNew",50],"(",")",";",["T_WHITESPACE","\n    ",50],["T_STRING","file_put_contents",51],"(",["T_VARIABLE","$file",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getFileUri",51],"(",")",",",["T_WHITESPACE"," ",51],["T_STRING","file_get_contents",51],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/simpletest\/files\/image-1.png'",51],")",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$file",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","save",52],"(",")",";",["T_WHITESPACE","\n\n    ",52],["T_VARIABLE","$file",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","File",54],["T_DOUBLE_COLON","::",54],["T_STRING","create",54],"(",["T_ARRAY","array",54],"(",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'fid'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_LNUMBER","8",55],",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","'uid'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_LNUMBER","8",56],",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'filename'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'image-test.png'",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'uri'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","\"public:\/\/image-test.png\"",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'filemime'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'image\/png'",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'created'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'changed'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],",",["T_WHITESPACE","\n      ",61],["T_CONSTANT_ENCAPSED_STRING","'status'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_STRING","FILE_STATUS_PERMANENT",62],",",["T_WHITESPACE","\n    ",62],")",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$file",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","enforceIsNew",64],"(",")",";",["T_WHITESPACE","\n    ",64],["T_STRING","file_put_contents",65],"(",["T_VARIABLE","$file",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getFileUri",65],"(",")",",",["T_WHITESPACE"," ",65],["T_STRING","file_get_contents",65],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/simpletest\/files\/image-2.jpg'",65],")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$file",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","save",66],"(",")",";",["T_WHITESPACE","\n\n    ",66],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","executeMigration",68],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","migrateUsers",69],"(",")",";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * Tests the Drupal6 user to Drupal 8 migration.\n   *\/",72],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","testUser",75],"(",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$users",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","Database",76],["T_DOUBLE_COLON","::",76],["T_STRING","getConnection",76],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'migrate'",76],")",["T_WHITESPACE","\n      ",76],["T_OBJECT_OPERATOR","->",77],["T_STRING","select",77],"(",["T_CONSTANT_ENCAPSED_STRING","'users'",77],",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'u'",77],")",["T_WHITESPACE","\n      ",77],["T_OBJECT_OPERATOR","->",78],["T_STRING","fields",78],"(",["T_CONSTANT_ENCAPSED_STRING","'u'",78],")",["T_WHITESPACE","\n      ",78],["T_OBJECT_OPERATOR","->",79],["T_STRING","condition",79],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",79],",",["T_WHITESPACE"," ",79],["T_LNUMBER","0",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'>'",79],")",["T_WHITESPACE","\n      ",79],["T_OBJECT_OPERATOR","->",80],["T_STRING","execute",80],"(",")",["T_WHITESPACE","\n      ",80],["T_OBJECT_OPERATOR","->",81],["T_STRING","fetchAll",81],"(",")",";",["T_WHITESPACE","\n\n    ",81],["T_FOREACH","foreach",83],["T_WHITESPACE"," ",83],"(",["T_VARIABLE","$users",83],["T_WHITESPACE"," ",83],["T_AS","as",83],["T_WHITESPACE"," ",83],["T_VARIABLE","$source",83],")",["T_WHITESPACE"," ",83],"{",["T_WHITESPACE","\n      ",83],["T_COMMENT","\/\/ Get roles directly from the source.\n",84],["T_WHITESPACE","      ",85],["T_VARIABLE","$rids",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_STRING","Database",85],["T_DOUBLE_COLON","::",85],["T_STRING","getConnection",85],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'migrate'",85],")",["T_WHITESPACE","\n        ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","select",86],"(",["T_CONSTANT_ENCAPSED_STRING","'users_roles'",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'ur'",86],")",["T_WHITESPACE","\n        ",86],["T_OBJECT_OPERATOR","->",87],["T_STRING","fields",87],"(",["T_CONSTANT_ENCAPSED_STRING","'ur'",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'rid'",87],")",")",["T_WHITESPACE","\n        ",87],["T_OBJECT_OPERATOR","->",88],["T_STRING","condition",88],"(",["T_CONSTANT_ENCAPSED_STRING","'ur.uid'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$source",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","uid",88],")",["T_WHITESPACE","\n        ",88],["T_OBJECT_OPERATOR","->",89],["T_STRING","execute",89],"(",")",["T_WHITESPACE","\n        ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","fetchCol",90],"(",")",";",["T_WHITESPACE","\n      ",90],["T_VARIABLE","$roles",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_STRING","RoleInterface",91],["T_DOUBLE_COLON","::",91],["T_STRING","AUTHENTICATED_ID",91],")",";",["T_WHITESPACE","\n      ",91],["T_VARIABLE","$id_map",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getMigration",92],"(",["T_CONSTANT_ENCAPSED_STRING","'d6_user_role'",92],")",["T_OBJECT_OPERATOR","->",92],["T_STRING","getIdMap",92],"(",")",";",["T_WHITESPACE","\n      ",92],["T_FOREACH","foreach",93],["T_WHITESPACE"," ",93],"(",["T_VARIABLE","$rids",93],["T_WHITESPACE"," ",93],["T_AS","as",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$rid",93],")",["T_WHITESPACE"," ",93],"{",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$role",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$id_map",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","lookupDestinationId",94],"(",["T_ARRAY","array",94],"(",["T_VARIABLE","$rid",94],")",")",";",["T_WHITESPACE","\n        ",94],["T_VARIABLE","$roles",95],"[","]",["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_STRING","reset",95],"(",["T_VARIABLE","$role",95],")",";",["T_WHITESPACE","\n      ",95],"}",["T_WHITESPACE","\n\n      ",96],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $user *\/",98],["T_WHITESPACE","\n      ",98],["T_VARIABLE","$user",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_STRING","User",99],["T_DOUBLE_COLON","::",99],["T_STRING","load",99],"(",["T_VARIABLE","$source",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","uid",99],")",";",["T_WHITESPACE","\n      ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertSame",100],"(",["T_VARIABLE","$source",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","uid",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$user",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","id",100],"(",")",")",";",["T_WHITESPACE","\n      ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertSame",101],"(",["T_VARIABLE","$source",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","name",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$user",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","label",101],"(",")",")",";",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertSame",102],"(",["T_VARIABLE","$source",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","mail",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$user",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getEmail",102],"(",")",")",";",["T_WHITESPACE","\n      ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertSame",103],"(",["T_VARIABLE","$source",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","created",103],",",["T_WHITESPACE"," ",103],["T_VARIABLE","$user",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","getCreatedTime",103],"(",")",")",";",["T_WHITESPACE","\n      ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertSame",104],"(",["T_VARIABLE","$source",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","access",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$user",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getLastAccessedTime",104],"(",")",")",";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertSame",105],"(",["T_VARIABLE","$source",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","login",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$user",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","getLastLoginTime",105],"(",")",")",";",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$is_blocked",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$source",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","status",106],["T_WHITESPACE"," ",106],["T_IS_EQUAL","==",106],["T_WHITESPACE"," ",106],["T_LNUMBER","0",106],";",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertSame",107],"(",["T_VARIABLE","$is_blocked",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$user",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","isBlocked",107],"(",")",")",";",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$expected_timezone_name",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$source",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","timezone_name",108],["T_WHITESPACE"," ",108],"?",":",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","config",108],"(",["T_CONSTANT_ENCAPSED_STRING","'system.date'",108],")",["T_OBJECT_OPERATOR","->",108],["T_STRING","get",108],"(",["T_CONSTANT_ENCAPSED_STRING","'timezone.default'",108],")",";",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertSame",109],"(",["T_VARIABLE","$expected_timezone_name",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$user",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","getTimeZone",109],"(",")",")",";",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertSame",110],"(",["T_VARIABLE","$source",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","init",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$user",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getInitialEmail",110],"(",")",")",";",["T_WHITESPACE","\n      ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertSame",111],"(",["T_VARIABLE","$roles",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$user",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getRoles",111],"(",")",")",";",["T_WHITESPACE","\n\n      ",111],["T_COMMENT","\/\/ Ensure the user's langcode, preferred_langcode and\n",113],["T_WHITESPACE","      ",114],["T_COMMENT","\/\/ preferred_admin_langcode are valid.\n",114],["T_WHITESPACE","      ",115],["T_COMMENT","\/\/ $user->getPreferredLangcode() might fallback to default language if the\n",115],["T_WHITESPACE","      ",116],["T_COMMENT","\/\/ user preferred language is not configured on the site. We just want to\n",116],["T_WHITESPACE","      ",117],["T_COMMENT","\/\/ test if the value was imported correctly.\n",117],["T_WHITESPACE","      ",118],["T_VARIABLE","$language_manager",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","container",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","get",118],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",118],")",";",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$default_langcode",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_VARIABLE","$language_manager",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","getDefaultLanguage",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getId",119],"(",")",";",["T_WHITESPACE","\n      ",119],["T_IF","if",120],["T_WHITESPACE"," ",120],"(",["T_EMPTY","empty",120],"(",["T_VARIABLE","$source",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","language",120],")",")",["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n        ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertSame",121],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$user",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","langcode",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","value",121],")",";",["T_WHITESPACE","\n        ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertSame",122],"(",["T_VARIABLE","$default_langcode",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$user",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","preferred_langcode",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","value",122],")",";",["T_WHITESPACE","\n        ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertSame",123],"(",["T_VARIABLE","$default_langcode",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$user",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","preferred_admin_langcode",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","value",123],")",";",["T_WHITESPACE","\n      ",123],"}",["T_WHITESPACE","\n      ",124],["T_ELSEIF","elseif",125],["T_WHITESPACE"," ",125],"(",["T_VARIABLE","$language_manager",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","getLanguage",125],"(",["T_VARIABLE","$source",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","language",125],")",["T_WHITESPACE"," ",125],["T_IS_IDENTICAL","===",125],["T_WHITESPACE"," ",125],["T_STRING","NULL",125],")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n        ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertSame",126],"(",["T_VARIABLE","$default_langcode",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$user",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","langcode",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","value",126],")",";",["T_WHITESPACE","\n        ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertSame",127],"(",["T_VARIABLE","$default_langcode",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$user",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","preferred_langcode",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","value",127],")",";",["T_WHITESPACE","\n        ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertSame",128],"(",["T_VARIABLE","$default_langcode",128],",",["T_WHITESPACE"," ",128],["T_VARIABLE","$user",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","preferred_admin_langcode",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","value",128],")",";",["T_WHITESPACE","\n      ",128],"}",["T_WHITESPACE","\n      ",129],["T_ELSE","else",130],["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertSame",131],"(",["T_VARIABLE","$source",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","language",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$user",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","langcode",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","value",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertSame",132],"(",["T_VARIABLE","$source",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","language",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$user",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","preferred_langcode",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","value",132],")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertSame",133],"(",["T_VARIABLE","$source",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","language",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$user",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","preferred_admin_langcode",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","value",133],")",";",["T_WHITESPACE","\n      ",133],"}",["T_WHITESPACE","\n\n      ",134],["T_COMMENT","\/\/ We have one empty picture in the data so don't try load that.\n",136],["T_WHITESPACE","      ",137],["T_IF","if",137],["T_WHITESPACE"," ",137],"(","!",["T_EMPTY","empty",137],"(",["T_VARIABLE","$source",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","picture",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n        ",137],["T_COMMENT","\/\/ Test the user picture.\n",138],["T_WHITESPACE","        ",139],["T_VARIABLE","$file",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_STRING","File",139],["T_DOUBLE_COLON","::",139],["T_STRING","load",139],"(",["T_VARIABLE","$user",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","user_picture",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","target_id",139],")",";",["T_WHITESPACE","\n        ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertSame",140],"(",["T_STRING","basename",140],"(",["T_VARIABLE","$source",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","picture",140],")",",",["T_WHITESPACE"," ",140],["T_VARIABLE","$file",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","getFilename",140],"(",")",")",";",["T_WHITESPACE","\n      ",140],"}",["T_WHITESPACE","\n      ",141],["T_ELSE","else",142],["T_WHITESPACE"," ",142],"{",["T_WHITESPACE","\n        ",142],["T_COMMENT","\/\/ Ensure the user does not have a picture.\n",143],["T_WHITESPACE","        ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertFalse",144],"(",["T_VARIABLE","$user",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","user_picture",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","target_id",144],",",["T_WHITESPACE"," ",144],["T_STRING","sprintf",144],"(",["T_CONSTANT_ENCAPSED_STRING","'User %s does not have a picture'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$user",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","id",144],"(",")",")",")",";",["T_WHITESPACE","\n      ",144],"}",["T_WHITESPACE","\n\n      ",145],["T_COMMENT","\/\/ Use the API to check if the password has been salted and re-hashed to\n",147],["T_WHITESPACE","      ",148],["T_COMMENT","\/\/ conform to Drupal >= 7 for non-admin users.\n",148],["T_WHITESPACE","      ",149],["T_IF","if",149],["T_WHITESPACE"," ",149],"(",["T_VARIABLE","$user",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","id",149],"(",")",["T_WHITESPACE"," ",149],["T_IS_NOT_EQUAL","!=",149],["T_WHITESPACE"," ",149],["T_LNUMBER","1",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n        ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertTrue",150],"(",["T_NS_SEPARATOR","\\",150],["T_STRING","Drupal",150],["T_DOUBLE_COLON","::",150],["T_STRING","service",150],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",150],")",["T_WHITESPACE","\n          ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","check",151],"(",["T_VARIABLE","$source",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","pass_plain",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$user",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getPassword",151],"(",")",")",")",";",["T_WHITESPACE","\n      ",151],"}",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n    ",153],["T_COMMENT","\/\/ Rollback the migration and make sure everything is deleted but uid 1.\n",154],["T_WHITESPACE","    ",155],"(",["T_NEW","new",155],["T_WHITESPACE"," ",155],["T_STRING","MigrateExecutable",155],"(",["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","migration",155],",",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],")",")",["T_OBJECT_OPERATOR","->",155],["T_STRING","rollback",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$users",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","Database",156],["T_DOUBLE_COLON","::",156],["T_STRING","getConnection",156],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'migrate'",156],")",["T_WHITESPACE","\n      ",156],["T_OBJECT_OPERATOR","->",157],["T_STRING","select",157],"(",["T_CONSTANT_ENCAPSED_STRING","'users'",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'u'",157],")",["T_WHITESPACE","\n      ",157],["T_OBJECT_OPERATOR","->",158],["T_STRING","fields",158],"(",["T_CONSTANT_ENCAPSED_STRING","'u'",158],",",["T_WHITESPACE"," ",158],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",158],"]",")",["T_WHITESPACE","\n      ",158],["T_OBJECT_OPERATOR","->",159],["T_STRING","condition",159],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",159],",",["T_WHITESPACE"," ",159],["T_LNUMBER","0",159],",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'>'",159],")",["T_WHITESPACE","\n      ",159],["T_OBJECT_OPERATOR","->",160],["T_STRING","execute",160],"(",")",["T_WHITESPACE","\n      ",160],["T_OBJECT_OPERATOR","->",161],["T_STRING","fetchCol",161],"(",")",";",["T_WHITESPACE","\n    ",161],["T_FOREACH","foreach",162],["T_WHITESPACE"," ",162],"(",["T_VARIABLE","$users",162],["T_WHITESPACE"," ",162],["T_AS","as",162],["T_WHITESPACE"," ",162],["T_VARIABLE","$uid",162],")",["T_WHITESPACE"," ",162],"{",["T_WHITESPACE","\n      ",162],["T_VARIABLE","$account",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_STRING","User",163],["T_DOUBLE_COLON","::",163],["T_STRING","load",163],"(",["T_VARIABLE","$uid",163],")",";",["T_WHITESPACE","\n      ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$uid",164],["T_WHITESPACE"," ",164],["T_IS_EQUAL","==",164],["T_WHITESPACE"," ",164],["T_LNUMBER","1",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n        ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertNotNull",165],"(",["T_VARIABLE","$account",165],",",["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'User 1 was preserved after rollback'",165],")",";",["T_WHITESPACE","\n      ",165],"}",["T_WHITESPACE","\n      ",166],["T_ELSE","else",167],["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n        ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertNull",168],"(",["T_VARIABLE","$account",168],")",";",["T_WHITESPACE","\n      ",168],"}",["T_WHITESPACE","\n    ",169],"}",["T_WHITESPACE","\n  ",170],"}",["T_WHITESPACE","\n\n",171],"}",["T_WHITESPACE","\n",173]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Language",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Render",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Element",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Email",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","KernelTestBase",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Role",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","user",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","User",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Verify that user validity checks behave as designed.\n *\n * @group user\n *\/",12],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","UserValidationTest",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","KernelTestBase",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'field'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'user'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'system'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",26],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_FUNCTION","function",29],["T_WHITESPACE"," ",29],["T_STRING","setUp",29],"(",")",["T_WHITESPACE"," ",29],"{",["T_WHITESPACE","\n    ",29],["T_STRING","parent",30],["T_DOUBLE_COLON","::",30],["T_STRING","setUp",30],"(",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","installEntitySchema",31],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",31],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","installSchema",32],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",["T_CONSTANT_ENCAPSED_STRING","'sequences'",32],")",")",";",["T_WHITESPACE","\n\n    ",32],["T_COMMENT","\/\/ Make sure that the default roles exist.\n",34],["T_WHITESPACE","    ",35],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","installConfig",35],"(",["T_ARRAY","array",35],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",35],")",")",";",["T_WHITESPACE","\n\n  ",35],"}",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * Tests user name validation.\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","testUsernames",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$test_cases",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_WHITESPACE"," ",43],["T_COMMENT","\/\/ '<username>' => array('<description>', 'assert<testName>'),\n",43],["T_WHITESPACE","      ",44],["T_CONSTANT_ENCAPSED_STRING","'foo'",44],["T_WHITESPACE","                    ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",44],")",",",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'FOO'",45],["T_WHITESPACE","                    ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",45],")",",",["T_WHITESPACE","\n      ",45],["T_CONSTANT_ENCAPSED_STRING","'Foo O\\'Bar'",46],["T_WHITESPACE","             ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",46],")",",",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'foo@bar'",47],["T_WHITESPACE","                ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",47],")",",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'foo@example.com'",48],["T_WHITESPACE","        ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",48],")",",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'foo@-example.com'",49],["T_WHITESPACE","       ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",49],")",",",["T_WHITESPACE"," ",49],["T_COMMENT","\/\/ invalid domains are allowed in usernames\n",49],["T_WHITESPACE","      ",50],["T_CONSTANT_ENCAPSED_STRING","'\u00c3\u00be\u00c3\u00b2\u00c3\u00b8\u00c3\u0087\u00c3\u009f\u00c2\u00aa\u00c5\u0099\u00e2\u0082\u00ac'",50],["T_WHITESPACE","               ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",50],",",["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",50],")",",",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'foo+bar'",51],["T_WHITESPACE","                ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid username'",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",51],")",",",["T_WHITESPACE"," ",51],["T_COMMENT","\/\/ '+' symbol is allowed\n",51],["T_WHITESPACE","      ",52],["T_CONSTANT_ENCAPSED_STRING","'\u00e1\u009a\u00a0\u00e1\u009b\u0087\u00e1\u009a\u00bb\u00e1\u009b\u00ab\u00e1\u009b\u0092\u00e1\u009b\u00a6\u00e1\u009a\u00a6'",52],["T_WHITESPACE","                ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Valid UTF8 username'",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'assertNull'",52],")",",",["T_WHITESPACE"," ",52],["T_COMMENT","\/\/ runes\n",52],["T_WHITESPACE","      ",53],["T_CONSTANT_ENCAPSED_STRING","' foo'",53],["T_WHITESPACE","                   ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username that starts with a space'",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",53],")",",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'foo '",54],["T_WHITESPACE","                   ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username that ends with a space'",54],",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",54],")",",",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'foo  bar'",55],["T_WHITESPACE","               ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_ARRAY","array",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username that contains 2 spaces \\'&nbsp;&nbsp;\\''",55],",",["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",55],")",",",["T_WHITESPACE","\n      ",55],["T_CONSTANT_ENCAPSED_STRING","''",56],["T_WHITESPACE","                       ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid empty username'",56],",",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",56],")",",",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'foo\/'",57],["T_WHITESPACE","                   ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username containing invalid chars'",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",57],")",",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'foo'",58],["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_STRING","chr",58],"(",["T_LNUMBER","0",58],")",["T_WHITESPACE"," ",58],".",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'bar'",58],["T_WHITESPACE","   ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username containing chr(0)'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",58],")",",",["T_WHITESPACE"," ",58],["T_COMMENT","\/\/ NULL\n",58],["T_WHITESPACE","      ",59],["T_CONSTANT_ENCAPSED_STRING","'foo'",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_STRING","chr",59],"(",["T_LNUMBER","13",59],")",["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'bar'",59],["T_WHITESPACE","  ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_ARRAY","array",59],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid username containing chr(13)'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",59],")",",",["T_WHITESPACE"," ",59],["T_COMMENT","\/\/ CR\n",59],["T_WHITESPACE","      ",60],["T_STRING","str_repeat",60],"(",["T_CONSTANT_ENCAPSED_STRING","'x'",60],",",["T_WHITESPACE"," ",60],["T_STRING","USERNAME_MAX_LENGTH",60],["T_WHITESPACE"," ",60],"+",["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],")",["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",["T_CONSTANT_ENCAPSED_STRING","'Invalid excessively long username'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'assertNotNull'",60],")",",",["T_WHITESPACE","\n    ",60],")",";",["T_WHITESPACE","\n    ",61],["T_FOREACH","foreach",62],["T_WHITESPACE"," ",62],"(",["T_VARIABLE","$test_cases",62],["T_WHITESPACE"," ",62],["T_AS","as",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$name",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$test_case",62],")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n      ",62],["T_LIST","list",63],"(",["T_VARIABLE","$description",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$test",63],")",["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$test_case",63],";",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$result",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","user_validate_name",64],"(",["T_VARIABLE","$name",64],")",";",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_VARIABLE","$test",65],"(",["T_VARIABLE","$result",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$description",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","' ('",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_VARIABLE","$name",65],["T_WHITESPACE"," ",65],".",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","')'",65],")",";",["T_WHITESPACE","\n    ",65],"}",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * Runs entity validation checks.\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","testValidation",72],"(",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$user",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","User",73],["T_DOUBLE_COLON","::",73],["T_STRING","create",73],"(",["T_ARRAY","array",73],"(",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'name'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'test'",74],",",["T_WHITESPACE","\n      ",74],["T_CONSTANT_ENCAPSED_STRING","'mail'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'test@example.com'",75],",",["T_WHITESPACE","\n    ",75],")",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$violations",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$user",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","validate",77],"(",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEqual",78],"(",["T_STRING","count",78],"(",["T_VARIABLE","$violations",78],")",",",["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'No violations when validating a default user.'",78],")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Only test one example invalid name here, the rest is already covered in\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ the testUsernames() method in this class.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$name",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","randomMachineName",82],"(",["T_LNUMBER","61",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$user",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","set",83],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$name",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$violations",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$user",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","validate",84],"(",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEqual",85],"(",["T_STRING","count",85],"(",["T_VARIABLE","$violations",85],")",",",["T_WHITESPACE"," ",85],["T_LNUMBER","1",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'Violation found when name is too long.'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertEqual",86],"(",["T_VARIABLE","$violations",86],"[",["T_LNUMBER","0",86],"]",["T_OBJECT_OPERATOR","->",86],["T_STRING","getPropertyPath",86],"(",")",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'name'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertEqual",87],"(",["T_VARIABLE","$violations",87],"[",["T_LNUMBER","0",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","getMessage",87],"(",")",",",["T_WHITESPACE"," ",87],["T_STRING","t",87],"(",["T_CONSTANT_ENCAPSED_STRING","'The username %name is too long: it must be %max characters or less.'",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$name",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'%max'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_LNUMBER","60",87],")",")",")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Create a second test user to provoke a name collision.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$user2",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","User",90],["T_DOUBLE_COLON","::",90],["T_STRING","create",90],"(","[",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'name'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'existing'",91],",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'mail'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'existing@example.com'",92],",",["T_WHITESPACE","\n    ",92],"]",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$user2",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","save",94],"(",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$user",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","set",95],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",95],",",["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'existing'",95],")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$violations",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$user",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","validate",96],"(",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertEqual",97],"(",["T_STRING","count",97],"(",["T_VARIABLE","$violations",97],")",",",["T_WHITESPACE"," ",97],["T_LNUMBER","1",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Violation found on name collision.'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEqual",98],"(",["T_VARIABLE","$violations",98],"[",["T_LNUMBER","0",98],"]",["T_OBJECT_OPERATOR","->",98],["T_STRING","getPropertyPath",98],"(",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'name'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_VARIABLE","$violations",99],"[",["T_LNUMBER","0",99],"]",["T_OBJECT_OPERATOR","->",99],["T_STRING","getMessage",99],"(",")",",",["T_WHITESPACE"," ",99],["T_STRING","t",99],"(",["T_CONSTANT_ENCAPSED_STRING","'The username %name is already taken.'",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'existing'",99],")",")",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Make the name valid.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$user",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","set",102],"(",["T_CONSTANT_ENCAPSED_STRING","'name'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","randomMachineName",102],"(",")",")",";",["T_WHITESPACE","\n\n    ",102],["T_VARIABLE","$user",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","set",104],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'invalid'",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$violations",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$user",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","validate",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertEqual",106],"(",["T_STRING","count",106],"(",["T_VARIABLE","$violations",106],")",",",["T_WHITESPACE"," ",106],["T_LNUMBER","1",106],",",["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'Violation found when email is invalid'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertEqual",107],"(",["T_VARIABLE","$violations",107],"[",["T_LNUMBER","0",107],"]",["T_OBJECT_OPERATOR","->",107],["T_STRING","getPropertyPath",107],"(",")",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'mail.0.value'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertEqual",108],"(",["T_VARIABLE","$violations",108],"[",["T_LNUMBER","0",108],"]",["T_OBJECT_OPERATOR","->",108],["T_STRING","getMessage",108],"(",")",",",["T_WHITESPACE"," ",108],["T_STRING","t",108],"(",["T_CONSTANT_ENCAPSED_STRING","'This value is not a valid email address.'",108],")",")",";",["T_WHITESPACE","\n\n    ",108],["T_VARIABLE","$mail",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","randomMachineName",110],"(",["T_STRING","Email",110],["T_DOUBLE_COLON","::",110],["T_STRING","EMAIL_MAX_LENGTH",110],["T_WHITESPACE"," ",110],"-",["T_WHITESPACE"," ",110],["T_LNUMBER","11",110],")",["T_WHITESPACE"," ",110],".",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",110],";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$user",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","set",111],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$mail",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$violations",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$user",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","validate",112],"(",")",";",["T_WHITESPACE","\n    ",112],["T_COMMENT","\/\/ @todo There are two violations because EmailItem::getConstraints()\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/   overlaps with the implicit constraint of the 'email' property type used\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/   in EmailItem::propertyDefinitions(). Resolve this in\n",115],["T_WHITESPACE","    ",116],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/2023465.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","assertEqual",117],"(",["T_STRING","count",117],"(",["T_VARIABLE","$violations",117],")",",",["T_WHITESPACE"," ",117],["T_LNUMBER","2",117],",",["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'Violations found when email is too long'",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","assertEqual",118],"(",["T_VARIABLE","$violations",118],"[",["T_LNUMBER","0",118],"]",["T_OBJECT_OPERATOR","->",118],["T_STRING","getPropertyPath",118],"(",")",",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'mail.0.value'",118],")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertEqual",119],"(",["T_VARIABLE","$violations",119],"[",["T_LNUMBER","0",119],"]",["T_OBJECT_OPERATOR","->",119],["T_STRING","getMessage",119],"(",")",",",["T_WHITESPACE"," ",119],["T_STRING","t",119],"(",["T_CONSTANT_ENCAPSED_STRING","'%name: the email address can not be longer than @max characters.'",119],",",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_VARIABLE","$user",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","get",119],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getFieldDefinition",119],"(",")",["T_OBJECT_OPERATOR","->",119],["T_STRING","getLabel",119],"(",")",",",["T_WHITESPACE"," ",119],["T_CONSTANT_ENCAPSED_STRING","'@max'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","Email",119],["T_DOUBLE_COLON","::",119],["T_STRING","EMAIL_MAX_LENGTH",119],")",")",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertEqual",120],"(",["T_VARIABLE","$violations",120],"[",["T_LNUMBER","1",120],"]",["T_OBJECT_OPERATOR","->",120],["T_STRING","getPropertyPath",120],"(",")",",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'mail.0.value'",120],")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertEqual",121],"(",["T_VARIABLE","$violations",121],"[",["T_LNUMBER","1",121],"]",["T_OBJECT_OPERATOR","->",121],["T_STRING","getMessage",121],"(",")",",",["T_WHITESPACE"," ",121],["T_STRING","t",121],"(",["T_CONSTANT_ENCAPSED_STRING","'This value is not a valid email address.'",121],")",")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Provoke an email collision with an existing user.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$user",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","set",124],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",124],",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'existing@example.com'",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$violations",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$user",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","validate",125],"(",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEqual",126],"(",["T_STRING","count",126],"(",["T_VARIABLE","$violations",126],")",",",["T_WHITESPACE"," ",126],["T_LNUMBER","1",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'Violation found when email already exists.'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertEqual",127],"(",["T_VARIABLE","$violations",127],"[",["T_LNUMBER","0",127],"]",["T_OBJECT_OPERATOR","->",127],["T_STRING","getPropertyPath",127],"(",")",",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'mail'",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEqual",128],"(",["T_VARIABLE","$violations",128],"[",["T_LNUMBER","0",128],"]",["T_OBJECT_OPERATOR","->",128],["T_STRING","getMessage",128],"(",")",",",["T_WHITESPACE"," ",128],["T_STRING","t",128],"(",["T_CONSTANT_ENCAPSED_STRING","'The email address %mail is already taken.'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'%mail'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'existing@example.com'",128],")",")",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$user",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","set",129],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",129],",",["T_WHITESPACE"," ",129],["T_STRING","NULL",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$violations",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$user",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","validate",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertEqual",131],"(",["T_STRING","count",131],"(",["T_VARIABLE","$violations",131],")",",",["T_WHITESPACE"," ",131],["T_LNUMBER","1",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'Email addresses may not be removed'",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertEqual",132],"(",["T_VARIABLE","$violations",132],"[",["T_LNUMBER","0",132],"]",["T_OBJECT_OPERATOR","->",132],["T_STRING","getPropertyPath",132],"(",")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'mail'",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","assertEqual",133],"(",["T_VARIABLE","$violations",133],"[",["T_LNUMBER","0",133],"]",["T_OBJECT_OPERATOR","->",133],["T_STRING","getMessage",133],"(",")",",",["T_WHITESPACE"," ",133],["T_STRING","t",133],"(",["T_CONSTANT_ENCAPSED_STRING","'@name field is required.'",133],",",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$user",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","getFieldDefinition",133],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",133],")",["T_OBJECT_OPERATOR","->",133],["T_STRING","getLabel",133],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$user",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","set",134],"(",["T_CONSTANT_ENCAPSED_STRING","'mail'",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'someone@example.com'",134],")",";",["T_WHITESPACE","\n\n    ",134],["T_VARIABLE","$user",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","set",136],"(",["T_CONSTANT_ENCAPSED_STRING","'timezone'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","randomString",136],"(",["T_LNUMBER","33",136],")",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertLengthViolation",137],"(",["T_VARIABLE","$user",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'timezone'",137],",",["T_WHITESPACE"," ",137],["T_LNUMBER","32",137],",",["T_WHITESPACE"," ",137],["T_LNUMBER","2",137],",",["T_WHITESPACE"," ",137],["T_LNUMBER","1",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$user",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","set",138],"(",["T_CONSTANT_ENCAPSED_STRING","'timezone'",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'invalid zone'",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertAllowedValuesViolation",139],"(",["T_VARIABLE","$user",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'timezone'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$user",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","set",140],"(",["T_CONSTANT_ENCAPSED_STRING","'timezone'",140],",",["T_WHITESPACE"," ",140],["T_STRING","NULL",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_VARIABLE","$user",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","set",142],"(",["T_CONSTANT_ENCAPSED_STRING","'init'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'invalid'",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$violations",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_VARIABLE","$user",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","validate",143],"(",")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","assertEqual",144],"(",["T_STRING","count",144],"(",["T_VARIABLE","$violations",144],")",",",["T_WHITESPACE"," ",144],["T_LNUMBER","1",144],",",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'Violation found when init email is invalid'",144],")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$user",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","set",145],"(",["T_CONSTANT_ENCAPSED_STRING","'init'",145],",",["T_WHITESPACE"," ",145],["T_STRING","NULL",145],")",";",["T_WHITESPACE","\n\n    ",145],["T_VARIABLE","$user",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","set",147],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'invalid'",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertAllowedValuesViolation",148],"(",["T_VARIABLE","$user",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'langcode'",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$user",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","set",149],"(",["T_CONSTANT_ENCAPSED_STRING","'langcode'",149],",",["T_WHITESPACE"," ",149],["T_STRING","NULL",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_COMMENT","\/\/ Only configurable langcodes are allowed for preferred languages.\n",151],["T_WHITESPACE","    ",152],["T_VARIABLE","$user",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","set",152],"(",["T_CONSTANT_ENCAPSED_STRING","'preferred_langcode'",152],",",["T_WHITESPACE"," ",152],["T_STRING","Language",152],["T_DOUBLE_COLON","::",152],["T_STRING","LANGCODE_NOT_SPECIFIED",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertAllowedValuesViolation",153],"(",["T_VARIABLE","$user",153],",",["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'preferred_langcode'",153],")",";",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$user",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","set",154],"(",["T_CONSTANT_ENCAPSED_STRING","'preferred_langcode'",154],",",["T_WHITESPACE"," ",154],["T_STRING","NULL",154],")",";",["T_WHITESPACE","\n\n    ",154],["T_VARIABLE","$user",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","set",156],"(",["T_CONSTANT_ENCAPSED_STRING","'preferred_admin_langcode'",156],",",["T_WHITESPACE"," ",156],["T_STRING","Language",156],["T_DOUBLE_COLON","::",156],["T_STRING","LANGCODE_NOT_SPECIFIED",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertAllowedValuesViolation",157],"(",["T_VARIABLE","$user",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'preferred_admin_langcode'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$user",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","set",158],"(",["T_CONSTANT_ENCAPSED_STRING","'preferred_admin_langcode'",158],",",["T_WHITESPACE"," ",158],["T_STRING","NULL",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_STRING","Role",160],["T_DOUBLE_COLON","::",160],["T_STRING","create",160],"(",["T_ARRAY","array",160],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",160],["T_WHITESPACE"," ",160],["T_DOUBLE_ARROW","=>",160],["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'role1'",160],")",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","save",160],"(",")",";",["T_WHITESPACE","\n    ",160],["T_STRING","Role",161],["T_DOUBLE_COLON","::",161],["T_STRING","create",161],"(",["T_ARRAY","array",161],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'role2'",161],")",")",["T_OBJECT_OPERATOR","->",161],["T_STRING","save",161],"(",")",";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Test cardinality of user roles.\n",163],["T_WHITESPACE","    ",164],["T_VARIABLE","$user",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_STRING","User",164],["T_DOUBLE_COLON","::",164],["T_STRING","create",164],"(","[",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'name'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_CONSTANT_ENCAPSED_STRING","'role_test'",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'mail'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_CONSTANT_ENCAPSED_STRING","'test@example.com'",166],",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'roles'",167],["T_WHITESPACE"," ",167],["T_DOUBLE_ARROW","=>",167],["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",["T_CONSTANT_ENCAPSED_STRING","'role1'",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'role2'",167],")",",",["T_WHITESPACE","\n    ",167],"]",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$violations",169],["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$user",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","validate",169],"(",")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertEqual",170],"(",["T_STRING","count",170],"(",["T_VARIABLE","$violations",170],")",",",["T_WHITESPACE"," ",170],["T_LNUMBER","0",170],")",";",["T_WHITESPACE","\n\n    ",170],["T_VARIABLE","$user",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","roles",172],"[",["T_LNUMBER","1",172],"]",["T_OBJECT_OPERATOR","->",172],["T_STRING","target_id",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'unknown_role'",172],";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$violations",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$user",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","validate",173],"(",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertEqual",174],"(",["T_STRING","count",174],"(",["T_VARIABLE","$violations",174],")",",",["T_WHITESPACE"," ",174],["T_LNUMBER","1",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertEqual",175],"(",["T_VARIABLE","$violations",175],"[",["T_LNUMBER","0",175],"]",["T_OBJECT_OPERATOR","->",175],["T_STRING","getPropertyPath",175],"(",")",",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'roles.1.target_id'",175],")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_VARIABLE","$violations",176],"[",["T_LNUMBER","0",176],"]",["T_OBJECT_OPERATOR","->",176],["T_STRING","getMessage",176],"(",")",",",["T_WHITESPACE"," ",176],["T_STRING","t",176],"(",["T_CONSTANT_ENCAPSED_STRING","'The referenced entity (%entity_type: %name) does not exist.'",176],",",["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_CONSTANT_ENCAPSED_STRING","'%entity_type'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'user_role'",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'%name'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'unknown_role'",176],")",")",")",";",["T_WHITESPACE","\n  ",176],"}",["T_WHITESPACE","\n\n  ",177],["T_DOC_COMMENT","\/**\n   * Verifies that a length violation exists for the given field.\n   *\n   * @param \\Drupal\\core\\Entity\\EntityInterface $entity\n   *   The entity object to validate.\n   * @param string $field_name\n   *   The field that violates the maximum length.\n   * @param int $length\n   *   Number of characters that was exceeded.\n   * @param int $count\n   *   (optional) The number of expected violations. Defaults to 1.\n   * @param int $expected_index\n   *   (optional) The index at which to expect the violation. Defaults to 0.\n   *\/",179],["T_WHITESPACE","\n  ",192],["T_PROTECTED","protected",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","assertLengthViolation",193],"(",["T_STRING","EntityInterface",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$entity",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$field_name",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$length",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$count",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_LNUMBER","1",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$expected_index",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_LNUMBER","0",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$violations",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$entity",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","validate",194],"(",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEqual",195],"(",["T_STRING","count",195],"(",["T_VARIABLE","$violations",195],")",",",["T_WHITESPACE"," ",195],["T_VARIABLE","$count",195],",",["T_WHITESPACE"," ",195],"\"",["T_ENCAPSED_AND_WHITESPACE","Violation found when ",195],["T_VARIABLE","$field_name",195],["T_ENCAPSED_AND_WHITESPACE"," is too long.",195],"\"",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertEqual",196],"(",["T_VARIABLE","$violations",196],"[",["T_VARIABLE","$expected_index",196],"]",["T_OBJECT_OPERATOR","->",196],["T_STRING","getPropertyPath",196],"(",")",",",["T_WHITESPACE"," ",196],"\"",["T_VARIABLE","$field_name",196],["T_ENCAPSED_AND_WHITESPACE",".0.value",196],"\"",")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$field_label",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_VARIABLE","$entity",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","get",197],"(",["T_VARIABLE","$field_name",197],")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getFieldDefinition",197],"(",")",["T_OBJECT_OPERATOR","->",197],["T_STRING","getLabel",197],"(",")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","assertEqual",198],"(",["T_VARIABLE","$violations",198],"[",["T_VARIABLE","$expected_index",198],"]",["T_OBJECT_OPERATOR","->",198],["T_STRING","getMessage",198],"(",")",",",["T_WHITESPACE"," ",198],["T_STRING","t",198],"(",["T_CONSTANT_ENCAPSED_STRING","'%name: may not be longer than @max characters.'",198],",",["T_WHITESPACE"," ",198],["T_ARRAY","array",198],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$field_label",198],",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'@max'",198],["T_WHITESPACE"," ",198],["T_DOUBLE_ARROW","=>",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$length",198],")",")",")",";",["T_WHITESPACE","\n  ",198],"}",["T_WHITESPACE","\n\n  ",199],["T_DOC_COMMENT","\/**\n   * Verifies that a AllowedValues violation exists for the given field.\n   *\n   * @param \\Drupal\\core\\Entity\\EntityInterface $entity\n   *   The entity object to validate.\n   * @param string $field_name\n   *   The name of the field to verify.\n   *\/",201],["T_WHITESPACE","\n  ",208],["T_PROTECTED","protected",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","assertAllowedValuesViolation",209],"(",["T_STRING","EntityInterface",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$entity",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$field_name",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$violations",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_VARIABLE","$entity",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","validate",210],"(",")",";",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","assertEqual",211],"(",["T_STRING","count",211],"(",["T_VARIABLE","$violations",211],")",",",["T_WHITESPACE"," ",211],["T_LNUMBER","1",211],",",["T_WHITESPACE"," ",211],"\"",["T_ENCAPSED_AND_WHITESPACE","Allowed values violation for ",211],["T_VARIABLE","$field_name",211],["T_ENCAPSED_AND_WHITESPACE"," found.",211],"\"",")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","assertEqual",212],"(",["T_VARIABLE","$violations",212],"[",["T_LNUMBER","0",212],"]",["T_OBJECT_OPERATOR","->",212],["T_STRING","getPropertyPath",212],"(",")",",",["T_WHITESPACE"," ",212],"\"",["T_VARIABLE","$field_name",212],["T_ENCAPSED_AND_WHITESPACE",".0.value",212],"\"",")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","assertEqual",213],"(",["T_VARIABLE","$violations",213],"[",["T_LNUMBER","0",213],"]",["T_OBJECT_OPERATOR","->",213],["T_STRING","getMessage",213],"(",")",",",["T_WHITESPACE"," ",213],["T_STRING","t",213],"(",["T_CONSTANT_ENCAPSED_STRING","'The value you selected is not a valid choice.'",213],")",")",";",["T_WHITESPACE","\n  ",213],"}",["T_WHITESPACE","\n\n",214],"}",["T_WHITESPACE","\n",216]]
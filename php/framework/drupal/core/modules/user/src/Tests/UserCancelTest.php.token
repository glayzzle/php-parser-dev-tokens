[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","comment",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Tests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","CommentTestTrait",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","comment",7],["T_NS_SEPARATOR","\\",7],["T_STRING","CommentInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","comment",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Comment",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","User",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Ensure that account cancellation methods work as expected.\n *\n * @group user\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","UserCancelTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","WebTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","CommentTestTrait",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$modules",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'comment'",25],")",";",["T_WHITESPACE","\n\n  ",25],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_FUNCTION","function",27],["T_WHITESPACE"," ",27],["T_STRING","setUp",27],"(",")",["T_WHITESPACE"," ",27],"{",["T_WHITESPACE","\n    ",27],["T_STRING","parent",28],["T_DOUBLE_COLON","::",28],["T_STRING","setUp",28],"(",")",";",["T_WHITESPACE","\n\n    ",28],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","drupalCreateContentType",30],"(",["T_ARRAY","array",30],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'page'",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'name'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'Basic page'",30],")",")",";",["T_WHITESPACE","\n  ",30],"}",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * Attempt to cancel account without permission.\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","testUserCancelWithoutPermission",36],"(",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$node_storage",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","container",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","get",37],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",37],")",["T_OBJECT_OPERATOR","->",37],["T_STRING","getStorage",37],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",37],")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","config",38],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","set",38],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",38],")",["T_OBJECT_OPERATOR","->",38],["T_STRING","save",38],"(",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$user_storage",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",39],")",["T_OBJECT_OPERATOR","->",39],["T_STRING","getStorage",39],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Create a user.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$account",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalCreateUser",42],"(",["T_ARRAY","array",42],"(",")",")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalLogin",43],"(",["T_VARIABLE","$account",43],")",";",["T_WHITESPACE","\n    ",43],["T_COMMENT","\/\/ Load a real user object.\n",44],["T_WHITESPACE","    ",45],["T_VARIABLE","$user_storage",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","resetCache",45],"(",["T_ARRAY","array",45],"(",["T_VARIABLE","$account",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","id",45],"(",")",")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$account",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_VARIABLE","$user_storage",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","load",46],"(",["T_VARIABLE","$account",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","id",46],"(",")",")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Create a node.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$node",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalCreateNode",49],"(",["T_ARRAY","array",49],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$account",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","id",49],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Attempt to cancel account.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","drupalGet",52],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_VARIABLE","$account",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertNoRaw",53],"(",["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",53],")",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'No cancel account button displayed.'",53],")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Attempt bogus account cancellation request confirmation.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$timestamp",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$account",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getLastLoginTime",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalGet",57],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_VARIABLE","$account",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","id",57],"(",")",["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",57],["T_VARIABLE","$timestamp",57],["T_ENCAPSED_AND_WHITESPACE","\/",57],"\"",["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_STRING","user_pass_rehash",57],"(",["T_VARIABLE","$account",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$timestamp",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertResponse",58],"(",["T_LNUMBER","403",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Bogus cancelling request rejected.'",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$user_storage",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","resetCache",59],"(",["T_ARRAY","array",59],"(",["T_VARIABLE","$account",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","id",59],"(",")",")",")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$account",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$user_storage",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","load",60],"(",["T_VARIABLE","$account",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","id",60],"(",")",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertTrue",61],"(",["T_VARIABLE","$account",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","isActive",61],"(",")",",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'User account was not canceled.'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Confirm user's content has not been altered.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$node_storage",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","resetCache",64],"(",["T_ARRAY","array",64],"(",["T_VARIABLE","$node",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","id",64],"(",")",")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$test_node",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$node_storage",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","load",65],"(",["T_VARIABLE","$node",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","id",65],"(",")",")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertTrue",66],"(","(",["T_VARIABLE","$test_node",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getOwnerId",66],"(",")",["T_WHITESPACE"," ",66],["T_IS_EQUAL","==",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$account",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")",["T_WHITESPACE"," ",66],["T_BOOLEAN_AND","&&",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$test_node",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","isPublished",66],"(",")",")",",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'Node of the user has not been altered.'",66],")",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * Test ability to change the permission for canceling users.\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","testUserCancelChangePermission",72],"(",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_NS_SEPARATOR","\\",73],["T_STRING","Drupal",73],["T_DOUBLE_COLON","::",73],["T_STRING","service",73],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",73],")",["T_OBJECT_OPERATOR","->",73],["T_STRING","install",73],"(",["T_ARRAY","array",73],"(",["T_CONSTANT_ENCAPSED_STRING","'user_form_test'",73],")",")",";",["T_WHITESPACE","\n    ",73],["T_NS_SEPARATOR","\\",74],["T_STRING","Drupal",74],["T_DOUBLE_COLON","::",74],["T_STRING","service",74],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","rebuild",74],"(",")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","config",75],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","set",75],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","save",75],"(",")",";",["T_WHITESPACE","\n\n    ",75],["T_COMMENT","\/\/ Create a regular user.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$account",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","drupalCreateUser",78],"(",["T_ARRAY","array",78],"(",")",")",";",["T_WHITESPACE","\n\n    ",78],["T_VARIABLE","$admin_user",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","drupalCreateUser",80],"(",["T_ARRAY","array",80],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel other accounts'",80],")",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","drupalLogin",81],"(",["T_VARIABLE","$admin_user",81],")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Delete regular user.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","drupalPostForm",84],"(",["T_CONSTANT_ENCAPSED_STRING","'user_form_test_cancel\/'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_VARIABLE","$account",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","id",84],"(",")",",",["T_WHITESPACE"," ",84],["T_ARRAY","array",84],"(",")",",",["T_WHITESPACE"," ",84],["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",84],")",")",";",["T_WHITESPACE","\n\n    ",84],["T_COMMENT","\/\/ Confirm deletion.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertRaw",87],"(",["T_STRING","t",87],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been deleted.'",87],",",["T_WHITESPACE"," ",87],["T_ARRAY","array",87],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$account",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getUsername",87],"(",")",")",")",",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'User deleted.'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertFalse",88],"(",["T_STRING","User",88],["T_DOUBLE_COLON","::",88],["T_STRING","load",88],"(",["T_VARIABLE","$account",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","id",88],"(",")",")",",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",88],")",";",["T_WHITESPACE","\n  ",88],"}",["T_WHITESPACE","\n\n  ",89],["T_DOC_COMMENT","\/**\n   * Tests that user account for uid 1 cannot be cancelled.\n   *\n   * This should never be possible, or the site owner would become unable to\n   * administer the site.\n   *\/",91],["T_WHITESPACE","\n  ",96],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","testUserCancelUid1",97],"(",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$user_storage",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","container",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","get",98],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",98],")",["T_OBJECT_OPERATOR","->",98],["T_STRING","getStorage",98],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_NS_SEPARATOR","\\",100],["T_STRING","Drupal",100],["T_DOUBLE_COLON","::",100],["T_STRING","service",100],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","install",100],"(",["T_ARRAY","array",100],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",100],")",")",";",["T_WHITESPACE","\n    ",100],["T_NS_SEPARATOR","\\",101],["T_STRING","Drupal",101],["T_DOUBLE_COLON","::",101],["T_STRING","service",101],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",101],")",["T_OBJECT_OPERATOR","->",101],["T_STRING","rebuild",101],"(",")",";",["T_WHITESPACE","\n    ",101],["T_COMMENT","\/\/ Update uid 1's name and password to we know it.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$password",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_STRING","user_password",103],"(",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$account",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'name'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'user1'",105],",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'pass'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","container",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","get",106],"(",["T_CONSTANT_ENCAPSED_STRING","'password'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","hash",106],"(",["T_STRING","trim",106],"(",["T_VARIABLE","$password",106],")",")",",",["T_WHITESPACE","\n    ",106],")",";",["T_WHITESPACE","\n    ",107],["T_COMMENT","\/\/ We cannot use $account->save() here, because this would result in the\n",108],["T_WHITESPACE","    ",109],["T_COMMENT","\/\/ password being hashed again.\n",109],["T_WHITESPACE","    ",110],["T_STRING","db_update",110],"(",["T_CONSTANT_ENCAPSED_STRING","'users_field_data'",110],")",["T_WHITESPACE","\n      ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","fields",111],"(",["T_VARIABLE","$account",111],")",["T_WHITESPACE","\n      ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","condition",112],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",112],",",["T_WHITESPACE"," ",112],["T_LNUMBER","1",112],")",["T_WHITESPACE","\n      ",112],["T_OBJECT_OPERATOR","->",113],["T_STRING","execute",113],"(",")",";",["T_WHITESPACE","\n\n    ",113],["T_COMMENT","\/\/ Reload and log in uid 1.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$user_storage",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","resetCache",116],"(",["T_ARRAY","array",116],"(",["T_LNUMBER","1",116],")",")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$user1",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_VARIABLE","$user_storage",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","load",117],"(",["T_LNUMBER","1",117],")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$user1",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","pass_raw",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$password",118],";",["T_WHITESPACE","\n\n    ",118],["T_COMMENT","\/\/ Try to cancel uid 1's account with a different user.\n",120],["T_WHITESPACE","    ",121],["T_VARIABLE","$admin_user",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","drupalCreateUser",121],"(",["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","'administer users'",121],")",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","drupalLogin",122],"(",["T_VARIABLE","$admin_user",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$edit",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_WHITESPACE","\n      ",123],["T_CONSTANT_ENCAPSED_STRING","'action'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_user_action'",124],",",["T_WHITESPACE","\n      ",124],["T_CONSTANT_ENCAPSED_STRING","'user_bulk_form[0]'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_STRING","TRUE",125],",",["T_WHITESPACE","\n    ",125],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","drupalPostForm",127],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/people'",127],",",["T_WHITESPACE"," ",127],["T_VARIABLE","$edit",127],",",["T_WHITESPACE"," ",127],["T_STRING","t",127],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply to selected items'",127],")",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Verify that uid 1's account was not cancelled.\n",129],["T_WHITESPACE","    ",130],["T_VARIABLE","$user_storage",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","resetCache",130],"(",["T_ARRAY","array",130],"(",["T_LNUMBER","1",130],")",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$user1",131],["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_VARIABLE","$user_storage",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","load",131],"(",["T_LNUMBER","1",131],")",";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","assertTrue",132],"(",["T_VARIABLE","$user1",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","isActive",132],"(",")",",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'User #1 still exists and is not blocked.'",132],")",";",["T_WHITESPACE","\n  ",132],"}",["T_WHITESPACE","\n\n  ",133],["T_DOC_COMMENT","\/**\n   * Attempt invalid account cancellations.\n   *\/",135],["T_WHITESPACE","\n  ",137],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","testUserCancelInvalid",138],"(",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$node_storage",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","container",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","get",139],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",139],")",["T_OBJECT_OPERATOR","->",139],["T_STRING","getStorage",139],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","config",140],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","set",140],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",140],")",["T_OBJECT_OPERATOR","->",140],["T_STRING","save",140],"(",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$user_storage",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","container",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","get",141],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",141],")",["T_OBJECT_OPERATOR","->",141],["T_STRING","getStorage",141],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Create a user.\n",143],["T_WHITESPACE","    ",144],["T_VARIABLE","$account",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","drupalCreateUser",144],"(",["T_ARRAY","array",144],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",144],")",")",";",["T_WHITESPACE","\n    ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","drupalLogin",145],"(",["T_VARIABLE","$account",145],")",";",["T_WHITESPACE","\n    ",145],["T_COMMENT","\/\/ Load a real user object.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$user_storage",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","resetCache",147],"(",["T_ARRAY","array",147],"(",["T_VARIABLE","$account",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","id",147],"(",")",")",")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$account",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_VARIABLE","$user_storage",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","load",148],"(",["T_VARIABLE","$account",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","id",148],"(",")",")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Create a node.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$node",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","drupalCreateNode",151],"(",["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$account",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","id",151],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Attempt to cancel account.\n",153],["T_WHITESPACE","    ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","drupalPostForm",154],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",154],["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_VARIABLE","$account",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","id",154],"(",")",["T_WHITESPACE"," ",154],".",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",154],",",["T_WHITESPACE"," ",154],["T_STRING","NULL",154],",",["T_WHITESPACE"," ",154],["T_STRING","t",154],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",154],")",")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ Confirm account cancellation.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$timestamp",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_STRING","time",157],"(",")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","drupalPostForm",158],"(",["T_STRING","NULL",158],",",["T_WHITESPACE"," ",158],["T_STRING","NULL",158],",",["T_WHITESPACE"," ",158],["T_STRING","t",158],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",158],")",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","assertText",159],"(",["T_STRING","t",159],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",159],")",",",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",159],")",";",["T_WHITESPACE","\n\n    ",159],["T_COMMENT","\/\/ Attempt bogus account cancellation request confirmation.\n",161],["T_WHITESPACE","    ",162],["T_VARIABLE","$bogus_timestamp",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$timestamp",162],["T_WHITESPACE"," ",162],"+",["T_WHITESPACE"," ",162],["T_LNUMBER","60",162],";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","drupalGet",163],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",163],["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_VARIABLE","$account",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","id",163],"(",")",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",163],["T_VARIABLE","$bogus_timestamp",163],["T_ENCAPSED_AND_WHITESPACE","\/",163],"\"",["T_WHITESPACE"," ",163],".",["T_WHITESPACE"," ",163],["T_STRING","user_pass_rehash",163],"(",["T_VARIABLE","$account",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$bogus_timestamp",163],")",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","assertText",164],"(",["T_STRING","t",164],"(",["T_CONSTANT_ENCAPSED_STRING","'You have tried to use an account cancellation link that has expired. Please request a new one using the form below.'",164],")",",",["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'Bogus cancelling request rejected.'",164],")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$user_storage",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","resetCache",165],"(",["T_ARRAY","array",165],"(",["T_VARIABLE","$account",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","id",165],"(",")",")",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$account",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_VARIABLE","$user_storage",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","load",166],"(",["T_VARIABLE","$account",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","id",166],"(",")",")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertTrue",167],"(",["T_VARIABLE","$account",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","isActive",167],"(",")",",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'User account was not canceled.'",167],")",";",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ Attempt expired account cancellation request confirmation.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$bogus_timestamp",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_VARIABLE","$timestamp",170],["T_WHITESPACE"," ",170],"-",["T_WHITESPACE"," ",170],["T_LNUMBER","86400",170],["T_WHITESPACE"," ",170],"-",["T_WHITESPACE"," ",170],["T_LNUMBER","60",170],";",["T_WHITESPACE","\n    ",170],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","drupalGet",171],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",171],["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_VARIABLE","$account",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","id",171],"(",")",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",171],["T_VARIABLE","$bogus_timestamp",171],["T_ENCAPSED_AND_WHITESPACE","\/",171],"\"",["T_WHITESPACE"," ",171],".",["T_WHITESPACE"," ",171],["T_STRING","user_pass_rehash",171],"(",["T_VARIABLE","$account",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$bogus_timestamp",171],")",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertText",172],"(",["T_STRING","t",172],"(",["T_CONSTANT_ENCAPSED_STRING","'You have tried to use an account cancellation link that has expired. Please request a new one using the form below.'",172],")",",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'Expired cancel account request rejected.'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$user_storage",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","resetCache",173],"(",["T_ARRAY","array",173],"(",["T_VARIABLE","$account",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")",")",")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$account",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],["T_VARIABLE","$user_storage",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","load",174],"(",["T_VARIABLE","$account",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","id",174],"(",")",")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertTrue",175],"(",["T_VARIABLE","$account",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","isActive",175],"(",")",",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'User account was not canceled.'",175],")",";",["T_WHITESPACE","\n\n    ",175],["T_COMMENT","\/\/ Confirm user's content has not been altered.\n",177],["T_WHITESPACE","    ",178],["T_VARIABLE","$node_storage",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","resetCache",178],"(",["T_ARRAY","array",178],"(",["T_VARIABLE","$node",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","id",178],"(",")",")",")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$test_node",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$node_storage",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","load",179],"(",["T_VARIABLE","$node",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","id",179],"(",")",")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertTrue",180],"(","(",["T_VARIABLE","$test_node",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getOwnerId",180],"(",")",["T_WHITESPACE"," ",180],["T_IS_EQUAL","==",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$account",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","id",180],"(",")",["T_WHITESPACE"," ",180],["T_BOOLEAN_AND","&&",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$test_node",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","isPublished",180],"(",")",")",",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Node of the user has not been altered.'",180],")",";",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n\n  ",181],["T_DOC_COMMENT","\/**\n   * Disable account and keep all content.\n   *\/",183],["T_WHITESPACE","\n  ",185],["T_FUNCTION","function",186],["T_WHITESPACE"," ",186],["T_STRING","testUserBlock",186],"(",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","config",187],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","set",187],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",187],",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_block'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","save",187],"(",")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$user_storage",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","container",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","get",188],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getStorage",188],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",188],")",";",["T_WHITESPACE","\n\n    ",188],["T_COMMENT","\/\/ Create a user.\n",190],["T_WHITESPACE","    ",191],["T_VARIABLE","$web_user",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalCreateUser",191],"(",["T_ARRAY","array",191],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",191],")",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","drupalLogin",192],"(",["T_VARIABLE","$web_user",192],")",";",["T_WHITESPACE","\n\n    ",192],["T_COMMENT","\/\/ Load a real user object.\n",194],["T_WHITESPACE","    ",195],["T_VARIABLE","$user_storage",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","resetCache",195],"(",["T_ARRAY","array",195],"(",["T_VARIABLE","$web_user",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","id",195],"(",")",")",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$account",196],["T_WHITESPACE"," ",196],"=",["T_WHITESPACE"," ",196],["T_VARIABLE","$user_storage",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","load",196],"(",["T_VARIABLE","$web_user",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","id",196],"(",")",")",";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ Attempt to cancel account.\n",198],["T_WHITESPACE","    ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","drupalGet",199],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",199],["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_VARIABLE","$account",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","id",199],"(",")",["T_WHITESPACE"," ",199],".",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",199],")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","drupalPostForm",200],"(",["T_STRING","NULL",200],",",["T_WHITESPACE"," ",200],["T_STRING","NULL",200],",",["T_WHITESPACE"," ",200],["T_STRING","t",200],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",200],")",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","assertText",201],"(",["T_STRING","t",201],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel your account?'",201],")",",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",201],")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertText",202],"(",["T_STRING","t",202],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account will be blocked and you will no longer be able to log in. All of your content will remain attributed to your username.'",202],")",",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'Informs that all content will be remain as is.'",202],")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertNoText",203],"(",["T_STRING","t",203],"(",["T_CONSTANT_ENCAPSED_STRING","'Select the method to cancel the account above.'",203],")",",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'Does not allow user to select account cancellation method.'",203],")",";",["T_WHITESPACE","\n\n    ",203],["T_COMMENT","\/\/ Confirm account cancellation.\n",205],["T_WHITESPACE","    ",206],["T_VARIABLE","$timestamp",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","time",206],"(",")",";",["T_WHITESPACE","\n\n    ",206],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","drupalPostForm",208],"(",["T_STRING","NULL",208],",",["T_WHITESPACE"," ",208],["T_STRING","NULL",208],",",["T_WHITESPACE"," ",208],["T_STRING","t",208],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",208],")",")",";",["T_WHITESPACE","\n    ",208],["T_VARIABLE","$this",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","assertText",209],"(",["T_STRING","t",209],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",209],")",",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",209],")",";",["T_WHITESPACE","\n\n    ",209],["T_COMMENT","\/\/ Confirm account cancellation request.\n",211],["T_WHITESPACE","    ",212],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","drupalGet",212],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",212],["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_VARIABLE","$account",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","id",212],"(",")",["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",212],["T_VARIABLE","$timestamp",212],["T_ENCAPSED_AND_WHITESPACE","\/",212],"\"",["T_WHITESPACE"," ",212],".",["T_WHITESPACE"," ",212],["T_STRING","user_pass_rehash",212],"(",["T_VARIABLE","$account",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$timestamp",212],")",")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$user_storage",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","resetCache",213],"(",["T_ARRAY","array",213],"(",["T_VARIABLE","$account",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","id",213],"(",")",")",")",";",["T_WHITESPACE","\n    ",213],["T_VARIABLE","$account",214],["T_WHITESPACE"," ",214],"=",["T_WHITESPACE"," ",214],["T_VARIABLE","$user_storage",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","load",214],"(",["T_VARIABLE","$account",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","id",214],"(",")",")",";",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$this",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","assertTrue",215],"(",["T_VARIABLE","$account",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","isBlocked",215],"(",")",",",["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'User has been blocked.'",215],")",";",["T_WHITESPACE","\n\n    ",215],["T_COMMENT","\/\/ Confirm that the confirmation message made it through to the end user.\n",217],["T_WHITESPACE","    ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertRaw",218],"(",["T_STRING","t",218],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been disabled.'",218],",",["T_WHITESPACE"," ",218],["T_ARRAY","array",218],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_VARIABLE","$account",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","getUsername",218],"(",")",")",")",",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","\"Confirmation message displayed to user.\"",218],")",";",["T_WHITESPACE","\n  ",218],"}",["T_WHITESPACE","\n\n  ",219],["T_DOC_COMMENT","\/**\n   * Disable account and unpublish all content.\n   *\/",221],["T_WHITESPACE","\n  ",223],["T_FUNCTION","function",224],["T_WHITESPACE"," ",224],["T_STRING","testUserBlockUnpublish",224],"(",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$node_storage",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","container",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","get",225],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",225],")",["T_OBJECT_OPERATOR","->",225],["T_STRING","getStorage",225],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",225],")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","config",226],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","set",226],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",226],",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_block_unpublish'",226],")",["T_OBJECT_OPERATOR","->",226],["T_STRING","save",226],"(",")",";",["T_WHITESPACE","\n    ",226],["T_COMMENT","\/\/ Create comment field on page.\n",227],["T_WHITESPACE","    ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","addDefaultCommentField",228],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",228],",",["T_WHITESPACE"," ",228],["T_CONSTANT_ENCAPSED_STRING","'page'",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$user_storage",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","container",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","get",229],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",229],")",["T_OBJECT_OPERATOR","->",229],["T_STRING","getStorage",229],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",229],")",";",["T_WHITESPACE","\n\n    ",229],["T_COMMENT","\/\/ Create a user.\n",231],["T_WHITESPACE","    ",232],["T_VARIABLE","$account",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","drupalCreateUser",232],"(",["T_ARRAY","array",232],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",232],")",")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$this",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","drupalLogin",233],"(",["T_VARIABLE","$account",233],")",";",["T_WHITESPACE","\n    ",233],["T_COMMENT","\/\/ Load a real user object.\n",234],["T_WHITESPACE","    ",235],["T_VARIABLE","$user_storage",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","resetCache",235],"(",["T_ARRAY","array",235],"(",["T_VARIABLE","$account",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","id",235],"(",")",")",")",";",["T_WHITESPACE","\n    ",235],["T_VARIABLE","$account",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_VARIABLE","$user_storage",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","load",236],"(",["T_VARIABLE","$account",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","id",236],"(",")",")",";",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Create a node with two revisions.\n",238],["T_WHITESPACE","    ",239],["T_VARIABLE","$node",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","drupalCreateNode",239],"(",["T_ARRAY","array",239],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$account",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","id",239],"(",")",")",")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$settings",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_STRING","get_object_vars",240],"(",["T_VARIABLE","$node",240],")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$settings",241],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",241],"]",["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_LNUMBER","1",241],";",["T_WHITESPACE","\n    ",241],["T_VARIABLE","$node",242],["T_WHITESPACE"," ",242],"=",["T_WHITESPACE"," ",242],["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","drupalCreateNode",242],"(",["T_VARIABLE","$settings",242],")",";",["T_WHITESPACE","\n\n    ",242],["T_COMMENT","\/\/ Add a comment to the page.\n",244],["T_WHITESPACE","    ",245],["T_VARIABLE","$comment_subject",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","randomMachineName",245],"(",["T_LNUMBER","8",245],")",";",["T_WHITESPACE","\n    ",245],["T_VARIABLE","$comment_body",246],["T_WHITESPACE"," ",246],"=",["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","randomMachineName",246],"(",["T_LNUMBER","8",246],")",";",["T_WHITESPACE","\n    ",246],["T_VARIABLE","$comment",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","Comment",247],["T_DOUBLE_COLON","::",247],["T_STRING","create",247],"(",["T_ARRAY","array",247],"(",["T_WHITESPACE","\n      ",247],["T_CONSTANT_ENCAPSED_STRING","'subject'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$comment_subject",248],",",["T_WHITESPACE","\n      ",248],["T_CONSTANT_ENCAPSED_STRING","'comment_body'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_VARIABLE","$comment_body",249],",",["T_WHITESPACE","\n      ",249],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_VARIABLE","$node",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","id",250],"(",")",",",["T_WHITESPACE","\n      ",250],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",251],["T_WHITESPACE"," ",251],["T_DOUBLE_ARROW","=>",251],["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'node'",251],",",["T_WHITESPACE","\n      ",251],["T_CONSTANT_ENCAPSED_STRING","'field_name'",252],["T_WHITESPACE"," ",252],["T_DOUBLE_ARROW","=>",252],["T_WHITESPACE"," ",252],["T_CONSTANT_ENCAPSED_STRING","'comment'",252],",",["T_WHITESPACE","\n      ",252],["T_CONSTANT_ENCAPSED_STRING","'status'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_STRING","CommentInterface",253],["T_DOUBLE_COLON","::",253],["T_STRING","PUBLISHED",253],",",["T_WHITESPACE","\n      ",253],["T_CONSTANT_ENCAPSED_STRING","'uid'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_VARIABLE","$account",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","id",254],"(",")",",",["T_WHITESPACE","\n    ",254],")",")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$comment",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","save",256],"(",")",";",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Attempt to cancel account.\n",258],["T_WHITESPACE","    ",259],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","drupalGet",259],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",259],["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_VARIABLE","$account",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","id",259],"(",")",["T_WHITESPACE"," ",259],".",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",259],")",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","drupalPostForm",260],"(",["T_STRING","NULL",260],",",["T_WHITESPACE"," ",260],["T_STRING","NULL",260],",",["T_WHITESPACE"," ",260],["T_STRING","t",260],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",260],")",")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertText",261],"(",["T_STRING","t",261],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel your account?'",261],")",",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",261],")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","assertText",262],"(",["T_STRING","t",262],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account will be blocked and you will no longer be able to log in. All of your content will be hidden from everyone but administrators.'",262],")",",",["T_WHITESPACE"," ",262],["T_CONSTANT_ENCAPSED_STRING","'Informs that all content will be unpublished.'",262],")",";",["T_WHITESPACE","\n\n    ",262],["T_COMMENT","\/\/ Confirm account cancellation.\n",264],["T_WHITESPACE","    ",265],["T_VARIABLE","$timestamp",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_STRING","time",265],"(",")",";",["T_WHITESPACE","\n    ",265],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","drupalPostForm",266],"(",["T_STRING","NULL",266],",",["T_WHITESPACE"," ",266],["T_STRING","NULL",266],",",["T_WHITESPACE"," ",266],["T_STRING","t",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",266],")",")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","assertText",267],"(",["T_STRING","t",267],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",267],")",",",["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",267],")",";",["T_WHITESPACE","\n\n    ",267],["T_COMMENT","\/\/ Confirm account cancellation request.\n",269],["T_WHITESPACE","    ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","drupalGet",270],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",270],["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_VARIABLE","$account",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","id",270],"(",")",["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",270],["T_VARIABLE","$timestamp",270],["T_ENCAPSED_AND_WHITESPACE","\/",270],"\"",["T_WHITESPACE"," ",270],".",["T_WHITESPACE"," ",270],["T_STRING","user_pass_rehash",270],"(",["T_VARIABLE","$account",270],",",["T_WHITESPACE"," ",270],["T_VARIABLE","$timestamp",270],")",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$user_storage",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","resetCache",271],"(",["T_ARRAY","array",271],"(",["T_VARIABLE","$account",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","id",271],"(",")",")",")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$account",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$user_storage",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","load",272],"(",["T_VARIABLE","$account",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","id",272],"(",")",")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertTrue",273],"(",["T_VARIABLE","$account",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","isBlocked",273],"(",")",",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'User has been blocked.'",273],")",";",["T_WHITESPACE","\n\n    ",273],["T_COMMENT","\/\/ Confirm user's content has been unpublished.\n",275],["T_WHITESPACE","    ",276],["T_VARIABLE","$node_storage",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","resetCache",276],"(",["T_ARRAY","array",276],"(",["T_VARIABLE","$node",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","id",276],"(",")",")",")",";",["T_WHITESPACE","\n    ",276],["T_VARIABLE","$test_node",277],["T_WHITESPACE"," ",277],"=",["T_WHITESPACE"," ",277],["T_VARIABLE","$node_storage",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","load",277],"(",["T_VARIABLE","$node",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","id",277],"(",")",")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertFalse",278],"(",["T_VARIABLE","$test_node",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","isPublished",278],"(",")",",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'Node of the user has been unpublished.'",278],")",";",["T_WHITESPACE","\n    ",278],["T_VARIABLE","$test_node",279],["T_WHITESPACE"," ",279],"=",["T_WHITESPACE"," ",279],["T_STRING","node_revision_load",279],"(",["T_VARIABLE","$node",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","getRevisionId",279],"(",")",")",";",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertFalse",280],"(",["T_VARIABLE","$test_node",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","isPublished",280],"(",")",",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'Node revision of the user has been unpublished.'",280],")",";",["T_WHITESPACE","\n\n    ",280],["T_VARIABLE","$storage",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_NS_SEPARATOR","\\",282],["T_STRING","Drupal",282],["T_DOUBLE_COLON","::",282],["T_STRING","entityManager",282],"(",")",["T_OBJECT_OPERATOR","->",282],["T_STRING","getStorage",282],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$storage",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","resetCache",283],"(",["T_ARRAY","array",283],"(",["T_VARIABLE","$comment",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","id",283],"(",")",")",")",";",["T_WHITESPACE","\n    ",283],["T_VARIABLE","$comment",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_VARIABLE","$storage",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","load",284],"(",["T_VARIABLE","$comment",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","id",284],"(",")",")",";",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertFalse",285],"(",["T_VARIABLE","$comment",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","isPublished",285],"(",")",",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'Comment of the user has been unpublished.'",285],")",";",["T_WHITESPACE","\n\n    ",285],["T_COMMENT","\/\/ Confirm that the confirmation message made it through to the end user.\n",287],["T_WHITESPACE","    ",288],["T_VARIABLE","$this",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","assertRaw",288],"(",["T_STRING","t",288],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been disabled.'",288],",",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$account",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","getUsername",288],"(",")",")",")",",",["T_WHITESPACE"," ",288],["T_CONSTANT_ENCAPSED_STRING","\"Confirmation message displayed to user.\"",288],")",";",["T_WHITESPACE","\n  ",288],"}",["T_WHITESPACE","\n\n  ",289],["T_DOC_COMMENT","\/**\n   * Delete account and anonymize all content.\n   *\/",291],["T_WHITESPACE","\n  ",293],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","testUserAnonymize",294],"(",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$node_storage",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","container",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","get",295],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",295],")",["T_OBJECT_OPERATOR","->",295],["T_STRING","getStorage",295],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","config",296],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",296],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","set",296],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",296],",",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",296],")",["T_OBJECT_OPERATOR","->",296],["T_STRING","save",296],"(",")",";",["T_WHITESPACE","\n    ",296],["T_COMMENT","\/\/ Create comment field on page.\n",297],["T_WHITESPACE","    ",298],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","addDefaultCommentField",298],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'page'",298],")",";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$user_storage",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","container",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","get",299],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",299],")",["T_OBJECT_OPERATOR","->",299],["T_STRING","getStorage",299],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",299],")",";",["T_WHITESPACE","\n\n    ",299],["T_COMMENT","\/\/ Create a user.\n",301],["T_WHITESPACE","    ",302],["T_VARIABLE","$account",302],["T_WHITESPACE"," ",302],"=",["T_WHITESPACE"," ",302],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","drupalCreateUser",302],"(",["T_ARRAY","array",302],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",302],")",")",";",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","drupalLogin",303],"(",["T_VARIABLE","$account",303],")",";",["T_WHITESPACE","\n    ",303],["T_COMMENT","\/\/ Load a real user object.\n",304],["T_WHITESPACE","    ",305],["T_VARIABLE","$user_storage",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","resetCache",305],"(",["T_ARRAY","array",305],"(",["T_VARIABLE","$account",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","id",305],"(",")",")",")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$account",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_VARIABLE","$user_storage",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","load",306],"(",["T_VARIABLE","$account",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","id",306],"(",")",")",";",["T_WHITESPACE","\n\n    ",306],["T_COMMENT","\/\/ Create a simple node.\n",308],["T_WHITESPACE","    ",309],["T_VARIABLE","$node",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","drupalCreateNode",309],"(",["T_ARRAY","array",309],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_VARIABLE","$account",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","id",309],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",309],["T_COMMENT","\/\/ Add a comment to the page.\n",311],["T_WHITESPACE","    ",312],["T_VARIABLE","$comment_subject",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","randomMachineName",312],"(",["T_LNUMBER","8",312],")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$comment_body",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","randomMachineName",313],"(",["T_LNUMBER","8",313],")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$comment",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_STRING","Comment",314],["T_DOUBLE_COLON","::",314],["T_STRING","create",314],"(",["T_ARRAY","array",314],"(",["T_WHITESPACE","\n      ",314],["T_CONSTANT_ENCAPSED_STRING","'subject'",315],["T_WHITESPACE"," ",315],["T_DOUBLE_ARROW","=>",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$comment_subject",315],",",["T_WHITESPACE","\n      ",315],["T_CONSTANT_ENCAPSED_STRING","'comment_body'",316],["T_WHITESPACE"," ",316],["T_DOUBLE_ARROW","=>",316],["T_WHITESPACE"," ",316],["T_VARIABLE","$comment_body",316],",",["T_WHITESPACE","\n      ",316],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",317],["T_WHITESPACE"," ",317],["T_DOUBLE_ARROW","=>",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$node",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","id",317],"(",")",",",["T_WHITESPACE","\n      ",317],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",318],["T_WHITESPACE"," ",318],["T_DOUBLE_ARROW","=>",318],["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'node'",318],",",["T_WHITESPACE","\n      ",318],["T_CONSTANT_ENCAPSED_STRING","'field_name'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'comment'",319],",",["T_WHITESPACE","\n      ",319],["T_CONSTANT_ENCAPSED_STRING","'status'",320],["T_WHITESPACE"," ",320],["T_DOUBLE_ARROW","=>",320],["T_WHITESPACE"," ",320],["T_STRING","CommentInterface",320],["T_DOUBLE_COLON","::",320],["T_STRING","PUBLISHED",320],",",["T_WHITESPACE","\n      ",320],["T_CONSTANT_ENCAPSED_STRING","'uid'",321],["T_WHITESPACE"," ",321],["T_DOUBLE_ARROW","=>",321],["T_WHITESPACE"," ",321],["T_VARIABLE","$account",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","id",321],"(",")",",",["T_WHITESPACE","\n    ",321],")",")",";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$comment",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","save",323],"(",")",";",["T_WHITESPACE","\n\n    ",323],["T_COMMENT","\/\/ Create a node with two revisions, the initial one belonging to the\n",325],["T_WHITESPACE","    ",326],["T_COMMENT","\/\/ cancelling user.\n",326],["T_WHITESPACE","    ",327],["T_VARIABLE","$revision_node",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","drupalCreateNode",327],"(",["T_ARRAY","array",327],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$account",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","id",327],"(",")",")",")",";",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$revision",328],["T_WHITESPACE"," ",328],"=",["T_WHITESPACE"," ",328],["T_VARIABLE","$revision_node",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","getRevisionId",328],"(",")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$settings",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_STRING","get_object_vars",329],"(",["T_VARIABLE","$revision_node",329],")",";",["T_WHITESPACE","\n    ",329],["T_VARIABLE","$settings",330],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",330],"]",["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_LNUMBER","1",330],";",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$settings",331],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",331],"]",["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_LNUMBER","1",331],";",["T_WHITESPACE"," ",331],["T_COMMENT","\/\/ Set new\/current revision to someone else.\n",331],["T_WHITESPACE","    ",332],["T_VARIABLE","$revision_node",332],["T_WHITESPACE"," ",332],"=",["T_WHITESPACE"," ",332],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","drupalCreateNode",332],"(",["T_VARIABLE","$settings",332],")",";",["T_WHITESPACE","\n\n    ",332],["T_COMMENT","\/\/ Attempt to cancel account.\n",334],["T_WHITESPACE","    ",335],["T_VARIABLE","$this",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","drupalGet",335],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",335],["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_VARIABLE","$account",335],["T_OBJECT_OPERATOR","->",335],["T_STRING","id",335],"(",")",["T_WHITESPACE"," ",335],".",["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",335],")",";",["T_WHITESPACE","\n    ",335],["T_VARIABLE","$this",336],["T_OBJECT_OPERATOR","->",336],["T_STRING","drupalPostForm",336],"(",["T_STRING","NULL",336],",",["T_WHITESPACE"," ",336],["T_STRING","NULL",336],",",["T_WHITESPACE"," ",336],["T_STRING","t",336],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",336],")",")",";",["T_WHITESPACE","\n    ",336],["T_VARIABLE","$this",337],["T_OBJECT_OPERATOR","->",337],["T_STRING","assertText",337],"(",["T_STRING","t",337],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel your account?'",337],")",",",["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",337],")",";",["T_WHITESPACE","\n    ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertRaw",338],"(",["T_STRING","t",338],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account will be removed and all account information deleted. All of your content will be assigned to the %anonymous-name user.'",338],",",["T_WHITESPACE"," ",338],["T_ARRAY","array",338],"(",["T_CONSTANT_ENCAPSED_STRING","'%anonymous-name'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","config",338],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",338],")",["T_OBJECT_OPERATOR","->",338],["T_STRING","get",338],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",338],")",")",")",",",["T_WHITESPACE"," ",338],["T_CONSTANT_ENCAPSED_STRING","'Informs that all content will be attributed to anonymous account.'",338],")",";",["T_WHITESPACE","\n\n    ",338],["T_COMMENT","\/\/ Confirm account cancellation.\n",340],["T_WHITESPACE","    ",341],["T_VARIABLE","$timestamp",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_STRING","time",341],"(",")",";",["T_WHITESPACE","\n    ",341],["T_VARIABLE","$this",342],["T_OBJECT_OPERATOR","->",342],["T_STRING","drupalPostForm",342],"(",["T_STRING","NULL",342],",",["T_WHITESPACE"," ",342],["T_STRING","NULL",342],",",["T_WHITESPACE"," ",342],["T_STRING","t",342],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",342],")",")",";",["T_WHITESPACE","\n    ",342],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","assertText",343],"(",["T_STRING","t",343],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",343],")",",",["T_WHITESPACE"," ",343],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",343],")",";",["T_WHITESPACE","\n\n    ",343],["T_COMMENT","\/\/ Confirm account cancellation request.\n",345],["T_WHITESPACE","    ",346],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","drupalGet",346],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",346],["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_VARIABLE","$account",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","id",346],"(",")",["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",346],["T_VARIABLE","$timestamp",346],["T_ENCAPSED_AND_WHITESPACE","\/",346],"\"",["T_WHITESPACE"," ",346],".",["T_WHITESPACE"," ",346],["T_STRING","user_pass_rehash",346],"(",["T_VARIABLE","$account",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$timestamp",346],")",")",";",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$user_storage",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","resetCache",347],"(",["T_ARRAY","array",347],"(",["T_VARIABLE","$account",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","id",347],"(",")",")",")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","assertFalse",348],"(",["T_VARIABLE","$user_storage",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","load",348],"(",["T_VARIABLE","$account",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","id",348],"(",")",")",",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",348],")",";",["T_WHITESPACE","\n\n    ",348],["T_COMMENT","\/\/ Confirm that user's content has been attributed to anonymous user.\n",350],["T_WHITESPACE","    ",351],["T_VARIABLE","$anonymous_user",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_STRING","User",351],["T_DOUBLE_COLON","::",351],["T_STRING","getAnonymousUser",351],"(",")",";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$node_storage",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","resetCache",352],"(",["T_ARRAY","array",352],"(",["T_VARIABLE","$node",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","id",352],"(",")",")",")",";",["T_WHITESPACE","\n    ",352],["T_VARIABLE","$test_node",353],["T_WHITESPACE"," ",353],"=",["T_WHITESPACE"," ",353],["T_VARIABLE","$node_storage",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","load",353],"(",["T_VARIABLE","$node",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","id",353],"(",")",")",";",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","assertTrue",354],"(","(",["T_VARIABLE","$test_node",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getOwnerId",354],"(",")",["T_WHITESPACE"," ",354],["T_IS_EQUAL","==",354],["T_WHITESPACE"," ",354],["T_LNUMBER","0",354],["T_WHITESPACE"," ",354],["T_BOOLEAN_AND","&&",354],["T_WHITESPACE"," ",354],["T_VARIABLE","$test_node",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","isPublished",354],"(",")",")",",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'Node of the user has been attributed to anonymous user.'",354],")",";",["T_WHITESPACE","\n    ",354],["T_VARIABLE","$test_node",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],["T_STRING","node_revision_load",355],"(",["T_VARIABLE","$revision",355],",",["T_WHITESPACE"," ",355],["T_STRING","TRUE",355],")",";",["T_WHITESPACE","\n    ",355],["T_VARIABLE","$this",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","assertTrue",356],"(","(",["T_VARIABLE","$test_node",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","getRevisionUser",356],"(",")",["T_OBJECT_OPERATOR","->",356],["T_STRING","id",356],"(",")",["T_WHITESPACE"," ",356],["T_IS_EQUAL","==",356],["T_WHITESPACE"," ",356],["T_LNUMBER","0",356],["T_WHITESPACE"," ",356],["T_BOOLEAN_AND","&&",356],["T_WHITESPACE"," ",356],["T_VARIABLE","$test_node",356],["T_OBJECT_OPERATOR","->",356],["T_STRING","isPublished",356],"(",")",")",",",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'Node revision of the user has been attributed to anonymous user.'",356],")",";",["T_WHITESPACE","\n    ",356],["T_VARIABLE","$node_storage",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","resetCache",357],"(",["T_ARRAY","array",357],"(",["T_VARIABLE","$revision_node",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","id",357],"(",")",")",")",";",["T_WHITESPACE","\n    ",357],["T_VARIABLE","$test_node",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_VARIABLE","$node_storage",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","load",358],"(",["T_VARIABLE","$revision_node",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","id",358],"(",")",")",";",["T_WHITESPACE","\n    ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","assertTrue",359],"(","(",["T_VARIABLE","$test_node",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","getOwnerId",359],"(",")",["T_WHITESPACE"," ",359],["T_IS_NOT_EQUAL","!=",359],["T_WHITESPACE"," ",359],["T_LNUMBER","0",359],["T_WHITESPACE"," ",359],["T_BOOLEAN_AND","&&",359],["T_WHITESPACE"," ",359],["T_VARIABLE","$test_node",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","isPublished",359],"(",")",")",",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","\"Current revision of the user's node was not attributed to anonymous user.\"",359],")",";",["T_WHITESPACE","\n\n    ",359],["T_VARIABLE","$storage",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_NS_SEPARATOR","\\",361],["T_STRING","Drupal",361],["T_DOUBLE_COLON","::",361],["T_STRING","entityManager",361],"(",")",["T_OBJECT_OPERATOR","->",361],["T_STRING","getStorage",361],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$storage",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","resetCache",362],"(",["T_ARRAY","array",362],"(",["T_VARIABLE","$comment",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","id",362],"(",")",")",")",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$test_comment",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$storage",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","load",363],"(",["T_VARIABLE","$comment",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","id",363],"(",")",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","assertTrue",364],"(","(",["T_VARIABLE","$test_comment",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getOwnerId",364],"(",")",["T_WHITESPACE"," ",364],["T_IS_EQUAL","==",364],["T_WHITESPACE"," ",364],["T_LNUMBER","0",364],["T_WHITESPACE"," ",364],["T_BOOLEAN_AND","&&",364],["T_WHITESPACE"," ",364],["T_VARIABLE","$test_comment",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","isPublished",364],"(",")",")",",",["T_WHITESPACE"," ",364],["T_CONSTANT_ENCAPSED_STRING","'Comment of the user has been attributed to anonymous user.'",364],")",";",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","assertEqual",365],"(",["T_VARIABLE","$test_comment",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getAuthorName",365],"(",")",",",["T_WHITESPACE"," ",365],["T_VARIABLE","$anonymous_user",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","getDisplayName",365],"(",")",",",["T_WHITESPACE"," ",365],["T_CONSTANT_ENCAPSED_STRING","'Comment of the user has been attributed to anonymous user name.'",365],")",";",["T_WHITESPACE","\n\n    ",365],["T_COMMENT","\/\/ Confirm that the confirmation message made it through to the end user.\n",367],["T_WHITESPACE","    ",368],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertRaw",368],"(",["T_STRING","t",368],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been deleted.'",368],",",["T_WHITESPACE"," ",368],["T_ARRAY","array",368],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$account",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","getUsername",368],"(",")",")",")",",",["T_WHITESPACE"," ",368],["T_CONSTANT_ENCAPSED_STRING","\"Confirmation message displayed to user.\"",368],")",";",["T_WHITESPACE","\n  ",368],"}",["T_WHITESPACE","\n\n  ",369],["T_DOC_COMMENT","\/**\n   * Delete account and anonymize all content using a batch process.\n   *\/",371],["T_WHITESPACE","\n  ",373],["T_PUBLIC","public",374],["T_WHITESPACE"," ",374],["T_FUNCTION","function",374],["T_WHITESPACE"," ",374],["T_STRING","testUserAnonymizeBatch",374],"(",")",["T_WHITESPACE"," ",374],"{",["T_WHITESPACE","\n    ",374],["T_VARIABLE","$node_storage",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","container",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","get",375],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",375],")",["T_OBJECT_OPERATOR","->",375],["T_STRING","getStorage",375],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",375],")",";",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","config",376],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","set",376],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",376],",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",376],")",["T_OBJECT_OPERATOR","->",376],["T_STRING","save",376],"(",")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$user_storage",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","container",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","get",377],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",377],")",["T_OBJECT_OPERATOR","->",377],["T_STRING","getStorage",377],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",377],")",";",["T_WHITESPACE","\n\n    ",377],["T_COMMENT","\/\/ Create a user.\n",379],["T_WHITESPACE","    ",380],["T_VARIABLE","$account",380],["T_WHITESPACE"," ",380],"=",["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","drupalCreateUser",380],"(",["T_ARRAY","array",380],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",380],")",")",";",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","drupalLogin",381],"(",["T_VARIABLE","$account",381],")",";",["T_WHITESPACE","\n    ",381],["T_COMMENT","\/\/ Load a real user object.\n",382],["T_WHITESPACE","    ",383],["T_VARIABLE","$user_storage",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","resetCache",383],"(","[",["T_VARIABLE","$account",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","id",383],"(",")","]",")",";",["T_WHITESPACE","\n    ",383],["T_VARIABLE","$account",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$user_storage",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","load",384],"(",["T_VARIABLE","$account",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","id",384],"(",")",")",";",["T_WHITESPACE","\n\n    ",384],["T_COMMENT","\/\/ Create 11 nodes in order to trigger batch processing in\n",386],["T_WHITESPACE","    ",387],["T_COMMENT","\/\/ node_mass_update().\n",387],["T_WHITESPACE","    ",388],["T_VARIABLE","$nodes",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],"[","]",";",["T_WHITESPACE","\n    ",388],["T_FOR","for",389],["T_WHITESPACE"," ",389],"(",["T_VARIABLE","$i",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_LNUMBER","0",389],";",["T_WHITESPACE"," ",389],["T_VARIABLE","$i",389],["T_WHITESPACE"," ",389],"<",["T_WHITESPACE"," ",389],["T_LNUMBER","11",389],";",["T_WHITESPACE"," ",389],["T_VARIABLE","$i",389],["T_INC","++",389],")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n      ",389],["T_VARIABLE","$node",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","drupalCreateNode",390],"(","[",["T_CONSTANT_ENCAPSED_STRING","'uid'",390],["T_WHITESPACE"," ",390],["T_DOUBLE_ARROW","=>",390],["T_WHITESPACE"," ",390],["T_VARIABLE","$account",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","id",390],"(",")","]",")",";",["T_WHITESPACE","\n      ",390],["T_VARIABLE","$nodes",391],"[",["T_VARIABLE","$node",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","id",391],"(",")","]",["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$node",391],";",["T_WHITESPACE","\n    ",391],"}",["T_WHITESPACE","\n\n    ",392],["T_COMMENT","\/\/ Attempt to cancel account.\n",394],["T_WHITESPACE","    ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","drupalGet",395],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",395],["T_WHITESPACE"," ",395],".",["T_WHITESPACE"," ",395],["T_VARIABLE","$account",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","id",395],"(",")",["T_WHITESPACE"," ",395],".",["T_WHITESPACE"," ",395],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",395],")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$this",396],["T_OBJECT_OPERATOR","->",396],["T_STRING","drupalPostForm",396],"(",["T_STRING","NULL",396],",",["T_WHITESPACE"," ",396],["T_STRING","NULL",396],",",["T_WHITESPACE"," ",396],["T_STRING","t",396],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",396],")",")",";",["T_WHITESPACE","\n    ",396],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","assertText",397],"(",["T_STRING","t",397],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel your account?'",397],")",",",["T_WHITESPACE"," ",397],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",397],")",";",["T_WHITESPACE","\n    ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","assertRaw",398],"(",["T_STRING","t",398],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account will be removed and all account information deleted. All of your content will be assigned to the %anonymous-name user.'",398],",",["T_WHITESPACE"," ",398],["T_ARRAY","array",398],"(",["T_CONSTANT_ENCAPSED_STRING","'%anonymous-name'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","config",398],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",398],")",["T_OBJECT_OPERATOR","->",398],["T_STRING","get",398],"(",["T_CONSTANT_ENCAPSED_STRING","'anonymous'",398],")",")",")",",",["T_WHITESPACE"," ",398],["T_CONSTANT_ENCAPSED_STRING","'Informs that all content will be attributed to anonymous account.'",398],")",";",["T_WHITESPACE","\n\n    ",398],["T_COMMENT","\/\/ Confirm account cancellation.\n",400],["T_WHITESPACE","    ",401],["T_VARIABLE","$timestamp",401],["T_WHITESPACE"," ",401],"=",["T_WHITESPACE"," ",401],["T_STRING","time",401],"(",")",";",["T_WHITESPACE","\n    ",401],["T_VARIABLE","$this",402],["T_OBJECT_OPERATOR","->",402],["T_STRING","drupalPostForm",402],"(",["T_STRING","NULL",402],",",["T_WHITESPACE"," ",402],["T_STRING","NULL",402],",",["T_WHITESPACE"," ",402],["T_STRING","t",402],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",402],")",")",";",["T_WHITESPACE","\n    ",402],["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","assertText",403],"(",["T_STRING","t",403],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",403],")",",",["T_WHITESPACE"," ",403],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",403],")",";",["T_WHITESPACE","\n\n    ",403],["T_COMMENT","\/\/ Confirm account cancellation request.\n",405],["T_WHITESPACE","    ",406],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","drupalGet",406],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",406],["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_VARIABLE","$account",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","id",406],"(",")",["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",406],["T_VARIABLE","$timestamp",406],["T_ENCAPSED_AND_WHITESPACE","\/",406],"\"",["T_WHITESPACE"," ",406],".",["T_WHITESPACE"," ",406],["T_STRING","user_pass_rehash",406],"(",["T_VARIABLE","$account",406],",",["T_WHITESPACE"," ",406],["T_VARIABLE","$timestamp",406],")",")",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$user_storage",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","resetCache",407],"(","[",["T_VARIABLE","$account",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","id",407],"(",")","]",")",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","assertFalse",408],"(",["T_VARIABLE","$user_storage",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","load",408],"(",["T_VARIABLE","$account",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","id",408],"(",")",")",",",["T_WHITESPACE"," ",408],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",408],")",";",["T_WHITESPACE","\n\n    ",408],["T_COMMENT","\/\/ Confirm that user's content has been attributed to anonymous user.\n",410],["T_WHITESPACE","    ",411],["T_VARIABLE","$node_storage",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","resetCache",411],"(",["T_STRING","array_keys",411],"(",["T_VARIABLE","$nodes",411],")",")",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$test_nodes",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_VARIABLE","$node_storage",412],["T_OBJECT_OPERATOR","->",412],["T_STRING","loadMultiple",412],"(",["T_STRING","array_keys",412],"(",["T_VARIABLE","$nodes",412],")",")",";",["T_WHITESPACE","\n    ",412],["T_FOREACH","foreach",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$test_nodes",413],["T_WHITESPACE"," ",413],["T_AS","as",413],["T_WHITESPACE"," ",413],["T_VARIABLE","$test_node",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","assertTrue",414],"(","(",["T_VARIABLE","$test_node",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","getOwnerId",414],"(",")",["T_WHITESPACE"," ",414],["T_IS_EQUAL","==",414],["T_WHITESPACE"," ",414],["T_LNUMBER","0",414],["T_WHITESPACE"," ",414],["T_BOOLEAN_AND","&&",414],["T_WHITESPACE"," ",414],["T_VARIABLE","$test_node",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","isPublished",414],"(",")",")",",",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'Node '",414],["T_WHITESPACE"," ",414],".",["T_WHITESPACE"," ",414],["T_VARIABLE","$test_node",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","id",414],"(",")",["T_WHITESPACE"," ",414],".",["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","' of the user has been attributed to anonymous user.'",414],")",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n  ",415],"}",["T_WHITESPACE","\n\n  ",416],["T_DOC_COMMENT","\/**\n   * Delete account and remove all content.\n   *\/",418],["T_WHITESPACE","\n  ",420],["T_FUNCTION","function",421],["T_WHITESPACE"," ",421],["T_STRING","testUserDelete",421],"(",")",["T_WHITESPACE"," ",421],"{",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$node_storage",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","container",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","get",422],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",422],")",["T_OBJECT_OPERATOR","->",422],["T_STRING","getStorage",422],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",422],")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","config",423],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",423],")",["T_OBJECT_OPERATOR","->",423],["T_STRING","set",423],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",423],",",["T_WHITESPACE"," ",423],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_delete'",423],")",["T_OBJECT_OPERATOR","->",423],["T_STRING","save",423],"(",")",";",["T_WHITESPACE","\n    ",423],["T_NS_SEPARATOR","\\",424],["T_STRING","Drupal",424],["T_DOUBLE_COLON","::",424],["T_STRING","service",424],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",424],")",["T_OBJECT_OPERATOR","->",424],["T_STRING","install",424],"(",["T_ARRAY","array",424],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",424],")",")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","resetAll",425],"(",")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","addDefaultCommentField",426],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",426],",",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'page'",426],")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$user_storage",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","container",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","get",427],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",427],")",["T_OBJECT_OPERATOR","->",427],["T_STRING","getStorage",427],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",427],")",";",["T_WHITESPACE","\n\n    ",427],["T_COMMENT","\/\/ Create a user.\n",429],["T_WHITESPACE","    ",430],["T_VARIABLE","$account",430],["T_WHITESPACE"," ",430],"=",["T_WHITESPACE"," ",430],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","drupalCreateUser",430],"(",["T_ARRAY","array",430],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel account'",430],",",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'post comments'",430],",",["T_WHITESPACE"," ",430],["T_CONSTANT_ENCAPSED_STRING","'skip comment approval'",430],")",")",";",["T_WHITESPACE","\n    ",430],["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","drupalLogin",431],"(",["T_VARIABLE","$account",431],")",";",["T_WHITESPACE","\n    ",431],["T_COMMENT","\/\/ Load a real user object.\n",432],["T_WHITESPACE","    ",433],["T_VARIABLE","$user_storage",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","resetCache",433],"(",["T_ARRAY","array",433],"(",["T_VARIABLE","$account",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","id",433],"(",")",")",")",";",["T_WHITESPACE","\n    ",433],["T_VARIABLE","$account",434],["T_WHITESPACE"," ",434],"=",["T_WHITESPACE"," ",434],["T_VARIABLE","$user_storage",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","load",434],"(",["T_VARIABLE","$account",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","id",434],"(",")",")",";",["T_WHITESPACE","\n\n    ",434],["T_COMMENT","\/\/ Create a simple node.\n",436],["T_WHITESPACE","    ",437],["T_VARIABLE","$node",437],["T_WHITESPACE"," ",437],"=",["T_WHITESPACE"," ",437],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","drupalCreateNode",437],"(",["T_ARRAY","array",437],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_VARIABLE","$account",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","id",437],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",437],["T_COMMENT","\/\/ Create comment.\n",439],["T_WHITESPACE","    ",440],["T_VARIABLE","$edit",440],["T_WHITESPACE"," ",440],"=",["T_WHITESPACE"," ",440],["T_ARRAY","array",440],"(",")",";",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$edit",441],"[",["T_CONSTANT_ENCAPSED_STRING","'subject[0][value]'",441],"]",["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","randomMachineName",441],"(",["T_LNUMBER","8",441],")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$edit",442],"[",["T_CONSTANT_ENCAPSED_STRING","'comment_body[0][value]'",442],"]",["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","randomMachineName",442],"(",["T_LNUMBER","16",442],")",";",["T_WHITESPACE","\n\n    ",442],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","drupalPostForm",444],"(",["T_CONSTANT_ENCAPSED_STRING","'comment\/reply\/node\/'",444],["T_WHITESPACE"," ",444],".",["T_WHITESPACE"," ",444],["T_VARIABLE","$node",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","id",444],"(",")",["T_WHITESPACE"," ",444],".",["T_WHITESPACE"," ",444],["T_CONSTANT_ENCAPSED_STRING","'\/comment'",444],",",["T_WHITESPACE"," ",444],["T_VARIABLE","$edit",444],",",["T_WHITESPACE"," ",444],["T_STRING","t",444],"(",["T_CONSTANT_ENCAPSED_STRING","'Preview'",444],")",")",";",["T_WHITESPACE","\n    ",444],["T_VARIABLE","$this",445],["T_OBJECT_OPERATOR","->",445],["T_STRING","drupalPostForm",445],"(",["T_STRING","NULL",445],",",["T_WHITESPACE"," ",445],["T_ARRAY","array",445],"(",")",",",["T_WHITESPACE"," ",445],["T_STRING","t",445],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",445],")",")",";",["T_WHITESPACE","\n    ",445],["T_VARIABLE","$this",446],["T_OBJECT_OPERATOR","->",446],["T_STRING","assertText",446],"(",["T_STRING","t",446],"(",["T_CONSTANT_ENCAPSED_STRING","'Your comment has been posted.'",446],")",")",";",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$comments",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_STRING","entity_load_multiple_by_properties",447],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",447],",",["T_WHITESPACE"," ",447],["T_ARRAY","array",447],"(",["T_CONSTANT_ENCAPSED_STRING","'subject'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$edit",447],"[",["T_CONSTANT_ENCAPSED_STRING","'subject[0][value]'",447],"]",")",")",";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$comment",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING","reset",448],"(",["T_VARIABLE","$comments",448],")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","assertTrue",449],"(",["T_VARIABLE","$comment",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","id",449],"(",")",",",["T_WHITESPACE"," ",449],["T_CONSTANT_ENCAPSED_STRING","'Comment found.'",449],")",";",["T_WHITESPACE","\n\n    ",449],["T_COMMENT","\/\/ Create a node with two revisions, the initial one belonging to the\n",451],["T_WHITESPACE","    ",452],["T_COMMENT","\/\/ cancelling user.\n",452],["T_WHITESPACE","    ",453],["T_VARIABLE","$revision_node",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_VARIABLE","$this",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","drupalCreateNode",453],"(",["T_ARRAY","array",453],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",453],["T_WHITESPACE"," ",453],["T_DOUBLE_ARROW","=>",453],["T_WHITESPACE"," ",453],["T_VARIABLE","$account",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","id",453],"(",")",")",")",";",["T_WHITESPACE","\n    ",453],["T_VARIABLE","$revision",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$revision_node",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getRevisionId",454],"(",")",";",["T_WHITESPACE","\n    ",454],["T_VARIABLE","$settings",455],["T_WHITESPACE"," ",455],"=",["T_WHITESPACE"," ",455],["T_STRING","get_object_vars",455],"(",["T_VARIABLE","$revision_node",455],")",";",["T_WHITESPACE","\n    ",455],["T_VARIABLE","$settings",456],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",456],"]",["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_LNUMBER","1",456],";",["T_WHITESPACE","\n    ",456],["T_VARIABLE","$settings",457],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",457],"]",["T_WHITESPACE"," ",457],"=",["T_WHITESPACE"," ",457],["T_LNUMBER","1",457],";",["T_WHITESPACE"," ",457],["T_COMMENT","\/\/ Set new\/current revision to someone else.\n",457],["T_WHITESPACE","    ",458],["T_VARIABLE","$revision_node",458],["T_WHITESPACE"," ",458],"=",["T_WHITESPACE"," ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","drupalCreateNode",458],"(",["T_VARIABLE","$settings",458],")",";",["T_WHITESPACE","\n\n    ",458],["T_COMMENT","\/\/ Attempt to cancel account.\n",460],["T_WHITESPACE","    ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","drupalGet",461],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",461],["T_WHITESPACE"," ",461],".",["T_WHITESPACE"," ",461],["T_VARIABLE","$account",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","id",461],"(",")",["T_WHITESPACE"," ",461],".",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",461],")",";",["T_WHITESPACE","\n    ",461],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","drupalPostForm",462],"(",["T_STRING","NULL",462],",",["T_WHITESPACE"," ",462],["T_STRING","NULL",462],",",["T_WHITESPACE"," ",462],["T_STRING","t",462],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",462],")",")",";",["T_WHITESPACE","\n    ",462],["T_VARIABLE","$this",463],["T_OBJECT_OPERATOR","->",463],["T_STRING","assertText",463],"(",["T_STRING","t",463],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel your account?'",463],")",",",["T_WHITESPACE"," ",463],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",463],")",";",["T_WHITESPACE","\n    ",463],["T_VARIABLE","$this",464],["T_OBJECT_OPERATOR","->",464],["T_STRING","assertText",464],"(",["T_STRING","t",464],"(",["T_CONSTANT_ENCAPSED_STRING","'Your account will be removed and all account information deleted. All of your content will also be deleted.'",464],")",",",["T_WHITESPACE"," ",464],["T_CONSTANT_ENCAPSED_STRING","'Informs that all content will be deleted.'",464],")",";",["T_WHITESPACE","\n\n    ",464],["T_COMMENT","\/\/ Confirm account cancellation.\n",466],["T_WHITESPACE","    ",467],["T_VARIABLE","$timestamp",467],["T_WHITESPACE"," ",467],"=",["T_WHITESPACE"," ",467],["T_STRING","time",467],"(",")",";",["T_WHITESPACE","\n    ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","drupalPostForm",468],"(",["T_STRING","NULL",468],",",["T_WHITESPACE"," ",468],["T_STRING","NULL",468],",",["T_WHITESPACE"," ",468],["T_STRING","t",468],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",468],")",")",";",["T_WHITESPACE","\n    ",468],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","assertText",469],"(",["T_STRING","t",469],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",469],")",",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",469],")",";",["T_WHITESPACE","\n\n    ",469],["T_COMMENT","\/\/ Confirm account cancellation request.\n",471],["T_WHITESPACE","    ",472],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","drupalGet",472],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",472],["T_WHITESPACE"," ",472],".",["T_WHITESPACE"," ",472],["T_VARIABLE","$account",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","id",472],"(",")",["T_WHITESPACE"," ",472],".",["T_WHITESPACE"," ",472],"\"",["T_ENCAPSED_AND_WHITESPACE","\/cancel\/confirm\/",472],["T_VARIABLE","$timestamp",472],["T_ENCAPSED_AND_WHITESPACE","\/",472],"\"",["T_WHITESPACE"," ",472],".",["T_WHITESPACE"," ",472],["T_STRING","user_pass_rehash",472],"(",["T_VARIABLE","$account",472],",",["T_WHITESPACE"," ",472],["T_VARIABLE","$timestamp",472],")",")",";",["T_WHITESPACE","\n    ",472],["T_VARIABLE","$user_storage",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","resetCache",473],"(",["T_ARRAY","array",473],"(",["T_VARIABLE","$account",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","id",473],"(",")",")",")",";",["T_WHITESPACE","\n    ",473],["T_VARIABLE","$this",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","assertFalse",474],"(",["T_VARIABLE","$user_storage",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","load",474],"(",["T_VARIABLE","$account",474],["T_OBJECT_OPERATOR","->",474],["T_STRING","id",474],"(",")",")",",",["T_WHITESPACE"," ",474],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",474],")",";",["T_WHITESPACE","\n\n    ",474],["T_COMMENT","\/\/ Confirm that user's content has been deleted.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$node_storage",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","resetCache",477],"(",["T_ARRAY","array",477],"(",["T_VARIABLE","$node",477],["T_OBJECT_OPERATOR","->",477],["T_STRING","id",477],"(",")",")",")",";",["T_WHITESPACE","\n    ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","assertFalse",478],"(",["T_VARIABLE","$node_storage",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","load",478],"(",["T_VARIABLE","$node",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","id",478],"(",")",")",",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'Node of the user has been deleted.'",478],")",";",["T_WHITESPACE","\n    ",478],["T_VARIABLE","$this",479],["T_OBJECT_OPERATOR","->",479],["T_STRING","assertFalse",479],"(",["T_STRING","node_revision_load",479],"(",["T_VARIABLE","$revision",479],")",",",["T_WHITESPACE"," ",479],["T_CONSTANT_ENCAPSED_STRING","'Node revision of the user has been deleted.'",479],")",";",["T_WHITESPACE","\n    ",479],["T_VARIABLE","$node_storage",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","resetCache",480],"(",["T_ARRAY","array",480],"(",["T_VARIABLE","$revision_node",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","id",480],"(",")",")",")",";",["T_WHITESPACE","\n    ",480],["T_VARIABLE","$this",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","assertTrue",481],"(",["T_VARIABLE","$node_storage",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","load",481],"(",["T_VARIABLE","$revision_node",481],["T_OBJECT_OPERATOR","->",481],["T_STRING","id",481],"(",")",")",",",["T_WHITESPACE"," ",481],["T_CONSTANT_ENCAPSED_STRING","\"Current revision of the user's node was not deleted.\"",481],")",";",["T_WHITESPACE","\n    ",481],["T_NS_SEPARATOR","\\",482],["T_STRING","Drupal",482],["T_DOUBLE_COLON","::",482],["T_STRING","entityManager",482],"(",")",["T_OBJECT_OPERATOR","->",482],["T_STRING","getStorage",482],"(",["T_CONSTANT_ENCAPSED_STRING","'comment'",482],")",["T_OBJECT_OPERATOR","->",482],["T_STRING","resetCache",482],"(",["T_ARRAY","array",482],"(",["T_VARIABLE","$comment",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","id",482],"(",")",")",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","assertFalse",483],"(",["T_STRING","Comment",483],["T_DOUBLE_COLON","::",483],["T_STRING","load",483],"(",["T_VARIABLE","$comment",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",")",",",["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'Comment of the user has been deleted.'",483],")",";",["T_WHITESPACE","\n\n    ",483],["T_COMMENT","\/\/ Confirm that the confirmation message made it through to the end user.\n",485],["T_WHITESPACE","    ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","assertRaw",486],"(",["T_STRING","t",486],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been deleted.'",486],",",["T_WHITESPACE"," ",486],["T_ARRAY","array",486],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_VARIABLE","$account",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","getUsername",486],"(",")",")",")",",",["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","\"Confirmation message displayed to user.\"",486],")",";",["T_WHITESPACE","\n  ",486],"}",["T_WHITESPACE","\n\n  ",487],["T_DOC_COMMENT","\/**\n   * Create an administrative user and delete another user.\n   *\/",489],["T_WHITESPACE","\n  ",491],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","testUserCancelByAdmin",492],"(",")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n    ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","config",493],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",493],")",["T_OBJECT_OPERATOR","->",493],["T_STRING","set",493],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",493],")",["T_OBJECT_OPERATOR","->",493],["T_STRING","save",493],"(",")",";",["T_WHITESPACE","\n\n    ",493],["T_COMMENT","\/\/ Create a regular user.\n",495],["T_WHITESPACE","    ",496],["T_VARIABLE","$account",496],["T_WHITESPACE"," ",496],"=",["T_WHITESPACE"," ",496],["T_VARIABLE","$this",496],["T_OBJECT_OPERATOR","->",496],["T_STRING","drupalCreateUser",496],"(",["T_ARRAY","array",496],"(",")",")",";",["T_WHITESPACE","\n\n    ",496],["T_COMMENT","\/\/ Create administrative user.\n",498],["T_WHITESPACE","    ",499],["T_VARIABLE","$admin_user",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","drupalCreateUser",499],"(",["T_ARRAY","array",499],"(",["T_CONSTANT_ENCAPSED_STRING","'administer users'",499],")",")",";",["T_WHITESPACE","\n    ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","drupalLogin",500],"(",["T_VARIABLE","$admin_user",500],")",";",["T_WHITESPACE","\n\n    ",500],["T_COMMENT","\/\/ Delete regular user.\n",502],["T_WHITESPACE","    ",503],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","drupalGet",503],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",503],["T_WHITESPACE"," ",503],".",["T_WHITESPACE"," ",503],["T_VARIABLE","$account",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","id",503],"(",")",["T_WHITESPACE"," ",503],".",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",503],")",";",["T_WHITESPACE","\n    ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","drupalPostForm",504],"(",["T_STRING","NULL",504],",",["T_WHITESPACE"," ",504],["T_STRING","NULL",504],",",["T_WHITESPACE"," ",504],["T_STRING","t",504],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",504],")",")",";",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","assertRaw",505],"(",["T_STRING","t",505],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel the account %name?'",505],",",["T_WHITESPACE"," ",505],["T_ARRAY","array",505],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",505],["T_WHITESPACE"," ",505],["T_DOUBLE_ARROW","=>",505],["T_WHITESPACE"," ",505],["T_VARIABLE","$account",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","getUsername",505],"(",")",")",")",",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",505],")",";",["T_WHITESPACE","\n    ",505],["T_VARIABLE","$this",506],["T_OBJECT_OPERATOR","->",506],["T_STRING","assertText",506],"(",["T_STRING","t",506],"(",["T_CONSTANT_ENCAPSED_STRING","'Select the method to cancel the account above.'",506],")",",",["T_WHITESPACE"," ",506],["T_CONSTANT_ENCAPSED_STRING","'Allows to select account cancellation method.'",506],")",";",["T_WHITESPACE","\n\n    ",506],["T_COMMENT","\/\/ Confirm deletion.\n",508],["T_WHITESPACE","    ",509],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","drupalPostForm",509],"(",["T_STRING","NULL",509],",",["T_WHITESPACE"," ",509],["T_STRING","NULL",509],",",["T_WHITESPACE"," ",509],["T_STRING","t",509],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",509],")",")",";",["T_WHITESPACE","\n    ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","assertRaw",510],"(",["T_STRING","t",510],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been deleted.'",510],",",["T_WHITESPACE"," ",510],["T_ARRAY","array",510],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",510],["T_WHITESPACE"," ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_VARIABLE","$account",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","getUsername",510],"(",")",")",")",",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'User deleted.'",510],")",";",["T_WHITESPACE","\n    ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","assertFalse",511],"(",["T_STRING","User",511],["T_DOUBLE_COLON","::",511],["T_STRING","load",511],"(",["T_VARIABLE","$account",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","id",511],"(",")",")",",",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",511],")",";",["T_WHITESPACE","\n  ",511],"}",["T_WHITESPACE","\n\n  ",512],["T_DOC_COMMENT","\/**\n   * Tests deletion of a user account without an email address.\n   *\/",514],["T_WHITESPACE","\n  ",516],["T_FUNCTION","function",517],["T_WHITESPACE"," ",517],["T_STRING","testUserWithoutEmailCancelByAdmin",517],"(",")",["T_WHITESPACE"," ",517],"{",["T_WHITESPACE","\n    ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","config",518],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",518],")",["T_OBJECT_OPERATOR","->",518],["T_STRING","set",518],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",518],",",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",518],")",["T_OBJECT_OPERATOR","->",518],["T_STRING","save",518],"(",")",";",["T_WHITESPACE","\n\n    ",518],["T_COMMENT","\/\/ Create a regular user.\n",520],["T_WHITESPACE","    ",521],["T_VARIABLE","$account",521],["T_WHITESPACE"," ",521],"=",["T_WHITESPACE"," ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","drupalCreateUser",521],"(",["T_ARRAY","array",521],"(",")",")",";",["T_WHITESPACE","\n    ",521],["T_COMMENT","\/\/ This user has no email address.\n",522],["T_WHITESPACE","    ",523],["T_VARIABLE","$account",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","mail",523],["T_WHITESPACE"," ",523],"=",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","''",523],";",["T_WHITESPACE","\n    ",523],["T_VARIABLE","$account",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","save",524],"(",")",";",["T_WHITESPACE","\n\n    ",524],["T_COMMENT","\/\/ Create administrative user.\n",526],["T_WHITESPACE","    ",527],["T_VARIABLE","$admin_user",527],["T_WHITESPACE"," ",527],"=",["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","drupalCreateUser",527],"(",["T_ARRAY","array",527],"(",["T_CONSTANT_ENCAPSED_STRING","'administer users'",527],")",")",";",["T_WHITESPACE","\n    ",527],["T_VARIABLE","$this",528],["T_OBJECT_OPERATOR","->",528],["T_STRING","drupalLogin",528],"(",["T_VARIABLE","$admin_user",528],")",";",["T_WHITESPACE","\n\n    ",528],["T_COMMENT","\/\/ Delete regular user without email address.\n",530],["T_WHITESPACE","    ",531],["T_VARIABLE","$this",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","drupalGet",531],"(",["T_CONSTANT_ENCAPSED_STRING","'user\/'",531],["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_VARIABLE","$account",531],["T_OBJECT_OPERATOR","->",531],["T_STRING","id",531],"(",")",["T_WHITESPACE"," ",531],".",["T_WHITESPACE"," ",531],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",531],")",";",["T_WHITESPACE","\n    ",531],["T_VARIABLE","$this",532],["T_OBJECT_OPERATOR","->",532],["T_STRING","drupalPostForm",532],"(",["T_STRING","NULL",532],",",["T_WHITESPACE"," ",532],["T_STRING","NULL",532],",",["T_WHITESPACE"," ",532],["T_STRING","t",532],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",532],")",")",";",["T_WHITESPACE","\n    ",532],["T_VARIABLE","$this",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","assertRaw",533],"(",["T_STRING","t",533],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel the account %name?'",533],",",["T_WHITESPACE"," ",533],["T_ARRAY","array",533],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",533],["T_WHITESPACE"," ",533],["T_DOUBLE_ARROW","=>",533],["T_WHITESPACE"," ",533],["T_VARIABLE","$account",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","getUsername",533],"(",")",")",")",",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel account displayed.'",533],")",";",["T_WHITESPACE","\n    ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","assertText",534],"(",["T_STRING","t",534],"(",["T_CONSTANT_ENCAPSED_STRING","'Select the method to cancel the account above.'",534],")",",",["T_WHITESPACE"," ",534],["T_CONSTANT_ENCAPSED_STRING","'Allows to select account cancellation method.'",534],")",";",["T_WHITESPACE","\n\n    ",534],["T_COMMENT","\/\/ Confirm deletion.\n",536],["T_WHITESPACE","    ",537],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","drupalPostForm",537],"(",["T_STRING","NULL",537],",",["T_WHITESPACE"," ",537],["T_STRING","NULL",537],",",["T_WHITESPACE"," ",537],["T_STRING","t",537],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel account'",537],")",")",";",["T_WHITESPACE","\n    ",537],["T_VARIABLE","$this",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","assertRaw",538],"(",["T_STRING","t",538],"(",["T_CONSTANT_ENCAPSED_STRING","'%name has been deleted.'",538],",",["T_WHITESPACE"," ",538],["T_ARRAY","array",538],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",538],["T_WHITESPACE"," ",538],["T_DOUBLE_ARROW","=>",538],["T_WHITESPACE"," ",538],["T_VARIABLE","$account",538],["T_OBJECT_OPERATOR","->",538],["T_STRING","getUsername",538],"(",")",")",")",",",["T_WHITESPACE"," ",538],["T_CONSTANT_ENCAPSED_STRING","'User deleted.'",538],")",";",["T_WHITESPACE","\n    ",538],["T_VARIABLE","$this",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","assertFalse",539],"(",["T_STRING","User",539],["T_DOUBLE_COLON","::",539],["T_STRING","load",539],"(",["T_VARIABLE","$account",539],["T_OBJECT_OPERATOR","->",539],["T_STRING","id",539],"(",")",")",",",["T_WHITESPACE"," ",539],["T_CONSTANT_ENCAPSED_STRING","'User is not found in the database.'",539],")",";",["T_WHITESPACE","\n  ",539],"}",["T_WHITESPACE","\n\n  ",540],["T_DOC_COMMENT","\/**\n   * Create an administrative user and mass-delete other users.\n   *\/",542],["T_WHITESPACE","\n  ",544],["T_FUNCTION","function",545],["T_WHITESPACE"," ",545],["T_STRING","testMassUserCancelByAdmin",545],"(",")",["T_WHITESPACE"," ",545],"{",["T_WHITESPACE","\n    ",545],["T_NS_SEPARATOR","\\",546],["T_STRING","Drupal",546],["T_DOUBLE_COLON","::",546],["T_STRING","service",546],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",546],")",["T_OBJECT_OPERATOR","->",546],["T_STRING","install",546],"(",["T_ARRAY","array",546],"(",["T_CONSTANT_ENCAPSED_STRING","'views'",546],")",")",";",["T_WHITESPACE","\n    ",546],["T_NS_SEPARATOR","\\",547],["T_STRING","Drupal",547],["T_DOUBLE_COLON","::",547],["T_STRING","service",547],"(",["T_CONSTANT_ENCAPSED_STRING","'router.builder'",547],")",["T_OBJECT_OPERATOR","->",547],["T_STRING","rebuild",547],"(",")",";",["T_WHITESPACE","\n    ",547],["T_VARIABLE","$this",548],["T_OBJECT_OPERATOR","->",548],["T_STRING","config",548],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",548],")",["T_OBJECT_OPERATOR","->",548],["T_STRING","set",548],"(",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",548],",",["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_reassign'",548],")",["T_OBJECT_OPERATOR","->",548],["T_STRING","save",548],"(",")",";",["T_WHITESPACE","\n    ",548],["T_VARIABLE","$user_storage",549],["T_WHITESPACE"," ",549],"=",["T_WHITESPACE"," ",549],["T_VARIABLE","$this",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","container",549],["T_OBJECT_OPERATOR","->",549],["T_STRING","get",549],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",549],")",["T_OBJECT_OPERATOR","->",549],["T_STRING","getStorage",549],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",549],")",";",["T_WHITESPACE","\n    ",549],["T_COMMENT","\/\/ Enable account cancellation notification.\n",550],["T_WHITESPACE","    ",551],["T_VARIABLE","$this",551],["T_OBJECT_OPERATOR","->",551],["T_STRING","config",551],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",551],")",["T_OBJECT_OPERATOR","->",551],["T_STRING","set",551],"(",["T_CONSTANT_ENCAPSED_STRING","'notify.status_canceled'",551],",",["T_WHITESPACE"," ",551],["T_STRING","TRUE",551],")",["T_OBJECT_OPERATOR","->",551],["T_STRING","save",551],"(",")",";",["T_WHITESPACE","\n\n    ",551],["T_COMMENT","\/\/ Create administrative user.\n",553],["T_WHITESPACE","    ",554],["T_VARIABLE","$admin_user",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","drupalCreateUser",554],"(",["T_ARRAY","array",554],"(",["T_CONSTANT_ENCAPSED_STRING","'administer users'",554],")",")",";",["T_WHITESPACE","\n    ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","drupalLogin",555],"(",["T_VARIABLE","$admin_user",555],")",";",["T_WHITESPACE","\n\n    ",555],["T_COMMENT","\/\/ Create some users.\n",557],["T_WHITESPACE","    ",558],["T_VARIABLE","$users",558],["T_WHITESPACE"," ",558],"=",["T_WHITESPACE"," ",558],["T_ARRAY","array",558],"(",")",";",["T_WHITESPACE","\n    ",558],["T_FOR","for",559],["T_WHITESPACE"," ",559],"(",["T_VARIABLE","$i",559],["T_WHITESPACE"," ",559],"=",["T_WHITESPACE"," ",559],["T_LNUMBER","0",559],";",["T_WHITESPACE"," ",559],["T_VARIABLE","$i",559],["T_WHITESPACE"," ",559],"<",["T_WHITESPACE"," ",559],["T_LNUMBER","3",559],";",["T_WHITESPACE"," ",559],["T_VARIABLE","$i",559],["T_INC","++",559],")",["T_WHITESPACE"," ",559],"{",["T_WHITESPACE","\n      ",559],["T_VARIABLE","$account",560],["T_WHITESPACE"," ",560],"=",["T_WHITESPACE"," ",560],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","drupalCreateUser",560],"(",["T_ARRAY","array",560],"(",")",")",";",["T_WHITESPACE","\n      ",560],["T_VARIABLE","$users",561],"[",["T_VARIABLE","$account",561],["T_OBJECT_OPERATOR","->",561],["T_STRING","id",561],"(",")","]",["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],["T_VARIABLE","$account",561],";",["T_WHITESPACE","\n    ",561],"}",["T_WHITESPACE","\n\n    ",562],["T_COMMENT","\/\/ Cancel user accounts, including own one.\n",564],["T_WHITESPACE","    ",565],["T_VARIABLE","$edit",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_ARRAY","array",565],"(",")",";",["T_WHITESPACE","\n    ",565],["T_VARIABLE","$edit",566],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",566],"]",["T_WHITESPACE"," ",566],"=",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_user_action'",566],";",["T_WHITESPACE","\n    ",566],["T_FOR","for",567],["T_WHITESPACE"," ",567],"(",["T_VARIABLE","$i",567],["T_WHITESPACE"," ",567],"=",["T_WHITESPACE"," ",567],["T_LNUMBER","0",567],";",["T_WHITESPACE"," ",567],["T_VARIABLE","$i",567],["T_WHITESPACE"," ",567],["T_IS_SMALLER_OR_EQUAL","<=",567],["T_WHITESPACE"," ",567],["T_LNUMBER","4",567],";",["T_WHITESPACE"," ",567],["T_VARIABLE","$i",567],["T_INC","++",567],")",["T_WHITESPACE"," ",567],"{",["T_WHITESPACE","\n      ",567],["T_VARIABLE","$edit",568],"[",["T_CONSTANT_ENCAPSED_STRING","'user_bulk_form['",568],["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_VARIABLE","$i",568],["T_WHITESPACE"," ",568],".",["T_WHITESPACE"," ",568],["T_CONSTANT_ENCAPSED_STRING","']'",568],"]",["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],["T_STRING","TRUE",568],";",["T_WHITESPACE","\n    ",568],"}",["T_WHITESPACE","\n    ",569],["T_VARIABLE","$this",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","drupalPostForm",570],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/people'",570],",",["T_WHITESPACE"," ",570],["T_VARIABLE","$edit",570],",",["T_WHITESPACE"," ",570],["T_STRING","t",570],"(",["T_CONSTANT_ENCAPSED_STRING","'Apply to selected items'",570],")",")",";",["T_WHITESPACE","\n    ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","assertText",571],"(",["T_STRING","t",571],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to cancel these user accounts?'",571],")",",",["T_WHITESPACE"," ",571],["T_CONSTANT_ENCAPSED_STRING","'Confirmation form to cancel accounts displayed.'",571],")",";",["T_WHITESPACE","\n    ",571],["T_VARIABLE","$this",572],["T_OBJECT_OPERATOR","->",572],["T_STRING","assertText",572],"(",["T_STRING","t",572],"(",["T_CONSTANT_ENCAPSED_STRING","'When cancelling these accounts'",572],")",",",["T_WHITESPACE"," ",572],["T_CONSTANT_ENCAPSED_STRING","'Allows to select account cancellation method.'",572],")",";",["T_WHITESPACE","\n    ",572],["T_VARIABLE","$this",573],["T_OBJECT_OPERATOR","->",573],["T_STRING","assertText",573],"(",["T_STRING","t",573],"(",["T_CONSTANT_ENCAPSED_STRING","'Require email confirmation to cancel account'",573],")",",",["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'Allows to send confirmation mail.'",573],")",";",["T_WHITESPACE","\n    ",573],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","assertText",574],"(",["T_STRING","t",574],"(",["T_CONSTANT_ENCAPSED_STRING","'Notify user when account is canceled'",574],")",",",["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'Allows to send notification mail.'",574],")",";",["T_WHITESPACE","\n\n    ",574],["T_COMMENT","\/\/ Confirm deletion.\n",576],["T_WHITESPACE","    ",577],["T_VARIABLE","$this",577],["T_OBJECT_OPERATOR","->",577],["T_STRING","drupalPostForm",577],"(",["T_STRING","NULL",577],",",["T_WHITESPACE"," ",577],["T_STRING","NULL",577],",",["T_WHITESPACE"," ",577],["T_STRING","t",577],"(",["T_CONSTANT_ENCAPSED_STRING","'Cancel accounts'",577],")",")",";",["T_WHITESPACE","\n    ",577],["T_VARIABLE","$status",578],["T_WHITESPACE"," ",578],"=",["T_WHITESPACE"," ",578],["T_STRING","TRUE",578],";",["T_WHITESPACE","\n    ",578],["T_FOREACH","foreach",579],["T_WHITESPACE"," ",579],"(",["T_VARIABLE","$users",579],["T_WHITESPACE"," ",579],["T_AS","as",579],["T_WHITESPACE"," ",579],["T_VARIABLE","$account",579],")",["T_WHITESPACE"," ",579],"{",["T_WHITESPACE","\n      ",579],["T_VARIABLE","$status",580],["T_WHITESPACE"," ",580],"=",["T_WHITESPACE"," ",580],["T_VARIABLE","$status",580],["T_WHITESPACE"," ",580],["T_BOOLEAN_AND","&&",580],["T_WHITESPACE"," ",580],"(",["T_STRING","strpos",580],"(",["T_VARIABLE","$this",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","content",580],",",["T_WHITESPACE"," ",580],["T_VARIABLE","$account",580],["T_OBJECT_OPERATOR","->",580],["T_STRING","getUsername",580],"(",")",["T_WHITESPACE"," ",580],".",["T_WHITESPACE"," ",580],["T_CONSTANT_ENCAPSED_STRING","'<\/em> has been deleted.'",580],")",["T_WHITESPACE"," ",580],["T_IS_NOT_IDENTICAL","!==",580],["T_WHITESPACE"," ",580],["T_STRING","FALSE",580],")",";",["T_WHITESPACE","\n      ",580],["T_VARIABLE","$user_storage",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","resetCache",581],"(",["T_ARRAY","array",581],"(",["T_VARIABLE","$account",581],["T_OBJECT_OPERATOR","->",581],["T_STRING","id",581],"(",")",")",")",";",["T_WHITESPACE","\n      ",581],["T_VARIABLE","$status",582],["T_WHITESPACE"," ",582],"=",["T_WHITESPACE"," ",582],["T_VARIABLE","$status",582],["T_WHITESPACE"," ",582],["T_BOOLEAN_AND","&&",582],["T_WHITESPACE"," ",582],"!",["T_VARIABLE","$user_storage",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","load",582],"(",["T_VARIABLE","$account",582],["T_OBJECT_OPERATOR","->",582],["T_STRING","id",582],"(",")",")",";",["T_WHITESPACE","\n    ",582],"}",["T_WHITESPACE","\n    ",583],["T_VARIABLE","$this",584],["T_OBJECT_OPERATOR","->",584],["T_STRING","assertTrue",584],"(",["T_VARIABLE","$status",584],",",["T_WHITESPACE"," ",584],["T_CONSTANT_ENCAPSED_STRING","'Users deleted and not found in the database.'",584],")",";",["T_WHITESPACE","\n\n    ",584],["T_COMMENT","\/\/ Ensure that admin account was not cancelled.\n",586],["T_WHITESPACE","    ",587],["T_VARIABLE","$this",587],["T_OBJECT_OPERATOR","->",587],["T_STRING","assertText",587],"(",["T_STRING","t",587],"(",["T_CONSTANT_ENCAPSED_STRING","'A confirmation request to cancel your account has been sent to your email address.'",587],")",",",["T_WHITESPACE"," ",587],["T_CONSTANT_ENCAPSED_STRING","'Account cancellation request mailed message displayed.'",587],")",";",["T_WHITESPACE","\n    ",587],["T_VARIABLE","$admin_user",588],["T_WHITESPACE"," ",588],"=",["T_WHITESPACE"," ",588],["T_VARIABLE","$user_storage",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","load",588],"(",["T_VARIABLE","$admin_user",588],["T_OBJECT_OPERATOR","->",588],["T_STRING","id",588],"(",")",")",";",["T_WHITESPACE","\n    ",588],["T_VARIABLE","$this",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","assertTrue",589],"(",["T_VARIABLE","$admin_user",589],["T_OBJECT_OPERATOR","->",589],["T_STRING","isActive",589],"(",")",",",["T_WHITESPACE"," ",589],["T_CONSTANT_ENCAPSED_STRING","'Administrative user is found in the database and enabled.'",589],")",";",["T_WHITESPACE","\n\n    ",589],["T_COMMENT","\/\/ Verify that uid 1's account was not cancelled.\n",591],["T_WHITESPACE","    ",592],["T_VARIABLE","$user_storage",592],["T_OBJECT_OPERATOR","->",592],["T_STRING","resetCache",592],"(",["T_ARRAY","array",592],"(",["T_LNUMBER","1",592],")",")",";",["T_WHITESPACE","\n    ",592],["T_VARIABLE","$user1",593],["T_WHITESPACE"," ",593],"=",["T_WHITESPACE"," ",593],["T_VARIABLE","$user_storage",593],["T_OBJECT_OPERATOR","->",593],["T_STRING","load",593],"(",["T_LNUMBER","1",593],")",";",["T_WHITESPACE","\n    ",593],["T_VARIABLE","$this",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","assertTrue",594],"(",["T_VARIABLE","$user1",594],["T_OBJECT_OPERATOR","->",594],["T_STRING","isActive",594],"(",")",",",["T_WHITESPACE"," ",594],["T_CONSTANT_ENCAPSED_STRING","'User #1 still exists and is not blocked.'",594],")",";",["T_WHITESPACE","\n  ",594],"}",["T_WHITESPACE","\n\n",595],"}",["T_WHITESPACE","\n",597]]
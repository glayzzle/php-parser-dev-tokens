[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","simpletest",5],["T_NS_SEPARATOR","\\",5],["T_STRING","WebTestBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","user",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","User",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests account deleting of users.\n *\n * @group user\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","UserDeleteTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Test deleting multiple users.\n   *\/",15],["T_WHITESPACE","\n  ",17],["T_FUNCTION","function",18],["T_WHITESPACE"," ",18],["T_STRING","testUserDeleteMultiple",18],"(",")",["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n    ",18],["T_COMMENT","\/\/ Create a few users with permissions, so roles will be created.\n",19],["T_WHITESPACE","    ",20],["T_VARIABLE","$user_a",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_VARIABLE","$this",20],["T_OBJECT_OPERATOR","->",20],["T_STRING","drupalCreateUser",20],"(",["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",20],")",")",";",["T_WHITESPACE","\n    ",20],["T_VARIABLE","$user_b",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_VARIABLE","$this",21],["T_OBJECT_OPERATOR","->",21],["T_STRING","drupalCreateUser",21],"(",["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",21],")",")",";",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$user_c",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_VARIABLE","$this",22],["T_OBJECT_OPERATOR","->",22],["T_STRING","drupalCreateUser",22],"(",["T_ARRAY","array",22],"(",["T_CONSTANT_ENCAPSED_STRING","'access user profiles'",22],")",")",";",["T_WHITESPACE","\n\n    ",22],["T_VARIABLE","$uids",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_VARIABLE","$user_a",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","id",24],"(",")",",",["T_WHITESPACE"," ",24],["T_VARIABLE","$user_b",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","id",24],"(",")",",",["T_WHITESPACE"," ",24],["T_VARIABLE","$user_c",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","id",24],"(",")",")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ These users should have a role\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$query",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","db_select",27],"(",["T_CONSTANT_ENCAPSED_STRING","'user__roles'",27],",",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'r'",27],")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$roles_created",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$query",28],["T_WHITESPACE","\n      ",28],["T_OBJECT_OPERATOR","->",29],["T_STRING","fields",29],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",29],",",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",29],")",")",["T_WHITESPACE","\n      ",29],["T_OBJECT_OPERATOR","->",30],["T_STRING","condition",30],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",30],",",["T_WHITESPACE"," ",30],["T_VARIABLE","$uids",30],",",["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'IN'",30],")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","countQuery",31],"(",")",["T_WHITESPACE","\n      ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","execute",32],"(",")",["T_WHITESPACE","\n      ",32],["T_OBJECT_OPERATOR","->",33],["T_STRING","fetchField",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_VARIABLE","$this",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","assertTrue",35],"(",["T_VARIABLE","$roles_created",35],["T_WHITESPACE"," ",35],">",["T_WHITESPACE"," ",35],["T_LNUMBER","0",35],",",["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'Role assignments created for new users and deletion of role assignments can be tested'",35],")",";",["T_WHITESPACE","\n    ",35],["T_COMMENT","\/\/ We should be able to load one of the users.\n",36],["T_WHITESPACE","    ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","assertTrue",37],"(",["T_STRING","User",37],["T_DOUBLE_COLON","::",37],["T_STRING","load",37],"(",["T_VARIABLE","$user_a",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","id",37],"(",")",")",",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'User is created and deletion of user can be tested'",37],")",";",["T_WHITESPACE","\n    ",37],["T_COMMENT","\/\/ Delete the users.\n",38],["T_WHITESPACE","    ",39],["T_STRING","user_delete_multiple",39],"(",["T_VARIABLE","$uids",39],")",";",["T_WHITESPACE","\n    ",39],["T_COMMENT","\/\/ Test if the roles assignments are deleted.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$query",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","db_select",41],"(",["T_CONSTANT_ENCAPSED_STRING","'user__roles'",41],",",["T_WHITESPACE"," ",41],["T_CONSTANT_ENCAPSED_STRING","'r'",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$roles_after_deletion",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$query",42],["T_WHITESPACE","\n      ",42],["T_OBJECT_OPERATOR","->",43],["T_STRING","fields",43],"(",["T_CONSTANT_ENCAPSED_STRING","'r'",43],",",["T_WHITESPACE"," ",43],["T_ARRAY","array",43],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",43],")",")",["T_WHITESPACE","\n      ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","condition",44],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",44],",",["T_WHITESPACE"," ",44],["T_VARIABLE","$uids",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'IN'",44],")",["T_WHITESPACE","\n      ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","countQuery",45],"(",")",["T_WHITESPACE","\n      ",45],["T_OBJECT_OPERATOR","->",46],["T_STRING","execute",46],"(",")",["T_WHITESPACE","\n      ",46],["T_OBJECT_OPERATOR","->",47],["T_STRING","fetchField",47],"(",")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertTrue",48],"(",["T_VARIABLE","$roles_after_deletion",48],["T_WHITESPACE"," ",48],["T_IS_EQUAL","==",48],["T_WHITESPACE"," ",48],["T_LNUMBER","0",48],",",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'Role assignments deleted along with users'",48],")",";",["T_WHITESPACE","\n    ",48],["T_COMMENT","\/\/ Test if the users are deleted, User::load() will return NULL.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertNull",50],"(",["T_STRING","User",50],["T_DOUBLE_COLON","::",50],["T_STRING","load",50],"(",["T_VARIABLE","$user_a",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","id",50],"(",")",")",",",["T_WHITESPACE"," ",50],["T_STRING","format_string",50],"(",["T_CONSTANT_ENCAPSED_STRING","'User with id @uid deleted.'",50],",",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'@uid'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$user_a",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","id",50],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertNull",51],"(",["T_STRING","User",51],["T_DOUBLE_COLON","::",51],["T_STRING","load",51],"(",["T_VARIABLE","$user_b",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","id",51],"(",")",")",",",["T_WHITESPACE"," ",51],["T_STRING","format_string",51],"(",["T_CONSTANT_ENCAPSED_STRING","'User with id @uid deleted.'",51],",",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",["T_CONSTANT_ENCAPSED_STRING","'@uid'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$user_b",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","id",51],"(",")",")",")",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertNull",52],"(",["T_STRING","User",52],["T_DOUBLE_COLON","::",52],["T_STRING","load",52],"(",["T_VARIABLE","$user_c",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",")",",",["T_WHITESPACE"," ",52],["T_STRING","format_string",52],"(",["T_CONSTANT_ENCAPSED_STRING","'User with id @uid deleted.'",52],",",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'@uid'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$user_c",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","id",52],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n",53],"}",["T_WHITESPACE","\n",55]]
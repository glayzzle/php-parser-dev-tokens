[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","language",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigurableLanguage",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","simpletest",6],["T_NS_SEPARATOR","\\",6],["T_STRING","WebTestBase",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests whether proper language is stored for new users and access to language\n * selector.\n *\n * @group user\n *\/",8],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","UserLanguageCreationTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","WebTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'language'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * Functional test for language handling during user creation.\n   *\/",23],["T_WHITESPACE","\n  ",25],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","testLocalUserCreation",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_COMMENT","\/\/ User to add and remove language and create new users.\n",27],["T_WHITESPACE","    ",28],["T_VARIABLE","$admin_user",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","drupalCreateUser",28],"(",["T_ARRAY","array",28],"(",["T_CONSTANT_ENCAPSED_STRING","'administer languages'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",28],",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'administer users'",28],")",")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","drupalLogin",29],"(",["T_VARIABLE","$admin_user",29],")",";",["T_WHITESPACE","\n\n    ",29],["T_COMMENT","\/\/ Add predefined language.\n",31],["T_WHITESPACE","    ",32],["T_VARIABLE","$langcode",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'fr'",32],";",["T_WHITESPACE","\n    ",32],["T_STRING","ConfigurableLanguage",33],["T_DOUBLE_COLON","::",33],["T_STRING","createFromLangcode",33],"(",["T_VARIABLE","$langcode",33],")",["T_OBJECT_OPERATOR","->",33],["T_STRING","save",33],"(",")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Set language negotiation.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$edit",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_ARRAY","array",36],"(",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_STRING","TRUE",37],",",["T_WHITESPACE","\n    ",37],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","drupalPostForm",39],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$edit",39],",",["T_WHITESPACE"," ",39],["T_STRING","t",39],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",39],")",")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","assertText",40],"(",["T_STRING","t",40],"(",["T_CONSTANT_ENCAPSED_STRING","'Language detection configuration saved.'",40],")",",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Set language negotiation.'",40],")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Check if the language selector is available on admin\/people\/create and\n",42],["T_WHITESPACE","    ",43],["T_COMMENT","\/\/ set to the currently active language.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","drupalGet",44],"(",["T_VARIABLE","$langcode",44],["T_WHITESPACE"," ",44],".",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'\/admin\/people\/create'",44],")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertOptionSelected",45],"(",["T_CONSTANT_ENCAPSED_STRING","\"edit-preferred-langcode\"",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$langcode",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'Global language set in the language selector.'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Create a user with the admin\/people\/create form and check if the correct\n",47],["T_WHITESPACE","    ",48],["T_COMMENT","\/\/ language is set.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$username",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","randomMachineName",49],"(",["T_LNUMBER","10",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$edit",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_WHITESPACE","\n      ",50],["T_CONSTANT_ENCAPSED_STRING","'name'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$username",51],",",["T_WHITESPACE","\n      ",51],["T_CONSTANT_ENCAPSED_STRING","'mail'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","randomMachineName",52],"(",["T_LNUMBER","4",52],")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",52],",",["T_WHITESPACE","\n      ",52],["T_CONSTANT_ENCAPSED_STRING","'pass[pass1]'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$username",53],",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'pass[pass2]'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$username",54],",",["T_WHITESPACE","\n    ",54],")",";",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalPostForm",57],"(",["T_VARIABLE","$langcode",57],["T_WHITESPACE"," ",57],".",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'\/admin\/people\/create'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$edit",57],",",["T_WHITESPACE"," ",57],["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new account'",57],")",")",";",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$user",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_STRING","user_load_by_name",59],"(",["T_VARIABLE","$username",59],")",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","assertEqual",60],"(",["T_VARIABLE","$user",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getPreferredLangcode",60],"(",")",",",["T_WHITESPACE"," ",60],["T_VARIABLE","$langcode",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'New user has correct preferred language set.'",60],")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertEqual",61],"(",["T_VARIABLE","$user",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","language",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getId",61],"(",")",",",["T_WHITESPACE"," ",61],["T_VARIABLE","$langcode",61],",",["T_WHITESPACE"," ",61],["T_CONSTANT_ENCAPSED_STRING","'New user has correct profile language set.'",61],")",";",["T_WHITESPACE","\n\n    ",61],["T_COMMENT","\/\/ Register a new user and check if the language selector is hidden.\n",63],["T_WHITESPACE","    ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalLogout",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalGet",66],"(",["T_VARIABLE","$langcode",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'\/user\/register'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertNoFieldByName",67],"(",["T_CONSTANT_ENCAPSED_STRING","'language[fr]'",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Language selector is not accessible.'",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_VARIABLE","$username",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","randomMachineName",69],"(",["T_LNUMBER","10",69],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$edit",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_ARRAY","array",70],"(",["T_WHITESPACE","\n      ",70],["T_CONSTANT_ENCAPSED_STRING","'name'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$username",71],",",["T_WHITESPACE","\n      ",71],["T_CONSTANT_ENCAPSED_STRING","'mail'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","randomMachineName",72],"(",["T_LNUMBER","4",72],")",["T_WHITESPACE"," ",72],".",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'@example.com'",72],",",["T_WHITESPACE","\n    ",72],")",";",["T_WHITESPACE","\n\n    ",73],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","drupalPostForm",75],"(",["T_VARIABLE","$langcode",75],["T_WHITESPACE"," ",75],".",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'\/user\/register'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$edit",75],",",["T_WHITESPACE"," ",75],["T_STRING","t",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Create new account'",75],")",")",";",["T_WHITESPACE","\n\n    ",75],["T_VARIABLE","$user",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_STRING","user_load_by_name",77],"(",["T_VARIABLE","$username",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertEqual",78],"(",["T_VARIABLE","$user",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getPreferredLangcode",78],"(",")",",",["T_WHITESPACE"," ",78],["T_VARIABLE","$langcode",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'New user has correct preferred language set.'",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertEqual",79],"(",["T_VARIABLE","$user",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","language",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","getId",79],"(",")",",",["T_WHITESPACE"," ",79],["T_VARIABLE","$langcode",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'New user has correct profile language set.'",79],")",";",["T_WHITESPACE","\n\n    ",79],["T_COMMENT","\/\/ Test if the admin can use the language selector and if the\n",81],["T_WHITESPACE","    ",82],["T_COMMENT","\/\/ correct language is was saved.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$user_edit",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$langcode",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/user\/'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$user",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","id",83],"(",")",["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",83],";",["T_WHITESPACE","\n\n    ",83],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalLogin",85],"(",["T_VARIABLE","$admin_user",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalGet",86],"(",["T_VARIABLE","$user_edit",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertOptionSelected",87],"(",["T_CONSTANT_ENCAPSED_STRING","\"edit-preferred-langcode\"",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$langcode",87],",",["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'Language selector is accessible and correct language is selected.'",87],")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Set pass_raw so we can log in the new user.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$user",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","pass_raw",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","randomMachineName",90],"(",["T_LNUMBER","10",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$edit",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'pass[pass1]'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$user",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","pass_raw",92],",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'pass[pass2]'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$user",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","pass_raw",93],",",["T_WHITESPACE","\n    ",93],")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalPostForm",96],"(",["T_VARIABLE","$user_edit",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$edit",96],",",["T_WHITESPACE"," ",96],["T_STRING","t",96],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",96],")",")",";",["T_WHITESPACE","\n\n    ",96],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","drupalLogin",98],"(",["T_VARIABLE","$user",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalGet",99],"(",["T_VARIABLE","$user_edit",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertOptionSelected",100],"(",["T_CONSTANT_ENCAPSED_STRING","\"edit-preferred-langcode\"",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$langcode",100],",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'Language selector is accessible and correct language is selected.'",100],")",";",["T_WHITESPACE","\n  ",100],"}",["T_WHITESPACE","\n\n",101],"}",["T_WHITESPACE","\n",103]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Controller",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Crypt",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Xss",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Controller",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ControllerBase",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Datetime",8],["T_NS_SEPARATOR","\\",8],["T_STRING","DateFormatterInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","user",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Form",9],["T_NS_SEPARATOR","\\",9],["T_STRING","UserPasswordResetForm",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","user",10],["T_NS_SEPARATOR","\\",10],["T_STRING","UserDataInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","user",11],["T_NS_SEPARATOR","\\",11],["T_STRING","UserInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","user",12],["T_NS_SEPARATOR","\\",12],["T_STRING","UserStorageInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Psr",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Log",13],["T_NS_SEPARATOR","\\",13],["T_STRING","LoggerInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","DependencyInjection",14],["T_NS_SEPARATOR","\\",14],["T_STRING","ContainerInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpKernel",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Exception",16],["T_NS_SEPARATOR","\\",16],["T_STRING","AccessDeniedHttpException",16],";",["T_WHITESPACE","\n\n",16],["T_DOC_COMMENT","\/**\n * Controller routines for user routes.\n *\/",18],["T_WHITESPACE","\n",20],["T_CLASS","class",21],["T_WHITESPACE"," ",21],["T_STRING","UserController",21],["T_WHITESPACE"," ",21],["T_EXTENDS","extends",21],["T_WHITESPACE"," ",21],["T_STRING","ControllerBase",21],["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n\n  ",21],["T_DOC_COMMENT","\/**\n   * The date formatter service.\n   *\n   * @var \\Drupal\\Core\\Datetime\\DateFormatterInterface\n   *\/",23],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$dateFormatter",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * The user storage.\n   *\n   * @var \\Drupal\\user\\UserStorageInterface\n   *\/",30],["T_WHITESPACE","\n  ",34],["T_PROTECTED","protected",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$userStorage",35],";",["T_WHITESPACE","\n\n  ",35],["T_DOC_COMMENT","\/**\n   * The user data service.\n   *\n   * @var \\Drupal\\user\\UserDataInterface\n   *\/",37],["T_WHITESPACE","\n  ",41],["T_PROTECTED","protected",42],["T_WHITESPACE"," ",42],["T_VARIABLE","$userData",42],";",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * A logger instance.\n   *\n   * @var \\Psr\\Log\\LoggerInterface\n   *\/",44],["T_WHITESPACE","\n  ",48],["T_PROTECTED","protected",49],["T_WHITESPACE"," ",49],["T_VARIABLE","$logger",49],";",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * Constructs a UserController object.\n   *\n   * @param \\Drupal\\Core\\Datetime\\DateFormatterInterface $date_formatter\n   *   The date formatter service.\n   * @param \\Drupal\\user\\UserStorageInterface $user_storage\n   *   The user storage.\n   * @param \\Drupal\\user\\UserDataInterface $user_data\n   *   The user data service.\n   * @param \\Psr\\Log\\LoggerInterface $logger\n   *   A logger instance.\n   *\/",51],["T_WHITESPACE","\n  ",62],["T_PUBLIC","public",63],["T_WHITESPACE"," ",63],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","__construct",63],"(",["T_STRING","DateFormatterInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$date_formatter",63],",",["T_WHITESPACE"," ",63],["T_STRING","UserStorageInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$user_storage",63],",",["T_WHITESPACE"," ",63],["T_STRING","UserDataInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$user_data",63],",",["T_WHITESPACE"," ",63],["T_STRING","LoggerInterface",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$logger",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","dateFormatter",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$date_formatter",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","userStorage",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$user_storage",65],";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","userData",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$user_data",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","logger",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$logger",67],";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",70],["T_WHITESPACE","\n  ",72],["T_PUBLIC","public",73],["T_WHITESPACE"," ",73],["T_STATIC","static",73],["T_WHITESPACE"," ",73],["T_FUNCTION","function",73],["T_WHITESPACE"," ",73],["T_STRING","create",73],"(",["T_STRING","ContainerInterface",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$container",73],")",["T_WHITESPACE"," ",73],"{",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_NEW","new",74],["T_WHITESPACE"," ",74],["T_STATIC","static",74],"(",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$container",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'date.formatter'",75],")",",",["T_WHITESPACE","\n      ",75],["T_VARIABLE","$container",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","get",76],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",76],")",["T_OBJECT_OPERATOR","->",76],["T_STRING","getStorage",76],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",76],")",",",["T_WHITESPACE","\n      ",76],["T_VARIABLE","$container",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","get",77],"(",["T_CONSTANT_ENCAPSED_STRING","'user.data'",77],")",",",["T_WHITESPACE","\n      ",77],["T_VARIABLE","$container",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_CONSTANT_ENCAPSED_STRING","'logger.factory'",78],")",["T_OBJECT_OPERATOR","->",78],["T_STRING","get",78],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",78],")",["T_WHITESPACE","\n    ",78],")",";",["T_WHITESPACE","\n  ",79],"}",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Redirects to the user password reset form.\n   *\n   * In order to never disclose a reset link via a referrer header this\n   * controller must always return a redirect response.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request.\n   * @param int $uid\n   *   User ID of the user requesting reset.\n   * @param int $timestamp\n   *   The current timestamp.\n   * @param string $hash\n   *   Login link hash.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   The redirect response.\n   *\/",82],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","resetPass",100],"(",["T_STRING","Request",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$request",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$uid",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$timestamp",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$hash",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$account",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","currentUser",101],"(",")",";",["T_WHITESPACE","\n    ",101],["T_COMMENT","\/\/ When processing the one-time login link, we have to make sure that a user\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ isn't already logged in.\n",103],["T_WHITESPACE","    ",104],["T_IF","if",104],["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$account",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","isAuthenticated",104],"(",")",")",["T_WHITESPACE"," ",104],"{",["T_WHITESPACE","\n      ",104],["T_COMMENT","\/\/ The current user is already logged in.\n",105],["T_WHITESPACE","      ",106],["T_IF","if",106],["T_WHITESPACE"," ",106],"(",["T_VARIABLE","$account",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","id",106],"(",")",["T_WHITESPACE"," ",106],["T_IS_EQUAL","==",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$uid",106],")",["T_WHITESPACE"," ",106],"{",["T_WHITESPACE","\n        ",106],["T_STRING","user_logout",107],"(",")",";",["T_WHITESPACE","\n        ",107],["T_COMMENT","\/\/ We need to begin the redirect process again because logging out will\n",108],["T_WHITESPACE","        ",109],["T_COMMENT","\/\/ destroy the session.\n",109],["T_WHITESPACE","        ",110],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","redirect",110],"(",["T_WHITESPACE","\n          ",110],["T_CONSTANT_ENCAPSED_STRING","'user.reset'",111],",",["T_WHITESPACE","\n          ",111],"[",["T_WHITESPACE","\n            ",112],["T_CONSTANT_ENCAPSED_STRING","'uid'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_VARIABLE","$uid",113],",",["T_WHITESPACE","\n            ",113],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",114],["T_WHITESPACE"," ",114],["T_DOUBLE_ARROW","=>",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$timestamp",114],",",["T_WHITESPACE","\n            ",114],["T_CONSTANT_ENCAPSED_STRING","'hash'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$hash",115],",",["T_WHITESPACE","\n          ",115],"]",["T_WHITESPACE","\n        ",116],")",";",["T_WHITESPACE","\n      ",117],"}",["T_WHITESPACE","\n      ",118],["T_COMMENT","\/\/ A different user is already logged in on the computer.\n",119],["T_WHITESPACE","      ",120],["T_ELSE","else",120],["T_WHITESPACE"," ",120],"{",["T_WHITESPACE","\n        ",120],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $reset_link_user *\/",121],["T_WHITESPACE","\n        ",121],["T_IF","if",122],["T_WHITESPACE"," ",122],"(",["T_VARIABLE","$reset_link_user",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","userStorage",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","load",122],"(",["T_VARIABLE","$uid",122],")",")",["T_WHITESPACE"," ",122],"{",["T_WHITESPACE","\n          ",122],["T_STRING","drupal_set_message",123],"(",["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","t",123],"(",["T_CONSTANT_ENCAPSED_STRING","'Another user (%other_user) is already logged into the site on this computer, but you tried to use a one-time link for user %resetting_user. Please <a href=\":logout\">log out<\/a> and try using the link again.'",123],",",["T_WHITESPACE","\n            ",123],["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'%other_user'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$account",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getUsername",124],"(",")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'%resetting_user'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$reset_link_user",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getUsername",124],"(",")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","':logout'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","url",124],"(",["T_CONSTANT_ENCAPSED_STRING","'user.logout'",124],")",")",")",",",["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'warning'",124],")",";",["T_WHITESPACE","\n        ",124],"}",["T_WHITESPACE","\n        ",125],["T_ELSE","else",126],["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n          ",126],["T_COMMENT","\/\/ Invalid one-time link specifies an unknown user.\n",127],["T_WHITESPACE","          ",128],["T_STRING","drupal_set_message",128],"(",["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","t",128],"(",["T_CONSTANT_ENCAPSED_STRING","'The one-time login link you clicked is invalid.'",128],")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'error'",128],")",";",["T_WHITESPACE","\n        ",128],"}",["T_WHITESPACE","\n        ",129],["T_RETURN","return",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","redirect",130],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",130],")",";",["T_WHITESPACE","\n      ",130],"}",["T_WHITESPACE","\n    ",131],"}",["T_WHITESPACE","\n\n    ",132],["T_VARIABLE","$session",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_VARIABLE","$request",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getSession",134],"(",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$session",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","set",135],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_hash'",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$hash",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$session",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","set",136],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_timeout'",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$timestamp",136],")",";",["T_WHITESPACE","\n    ",136],["T_RETURN","return",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","redirect",137],"(",["T_WHITESPACE","\n      ",137],["T_CONSTANT_ENCAPSED_STRING","'user.reset.form'",138],",",["T_WHITESPACE","\n      ",138],"[",["T_CONSTANT_ENCAPSED_STRING","'uid'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_VARIABLE","$uid",139],"]",["T_WHITESPACE","\n    ",139],")",";",["T_WHITESPACE","\n  ",140],"}",["T_WHITESPACE","\n\n  ",141],["T_DOC_COMMENT","\/**\n   * Returns the user password reset form.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $request\n   *   The request.\n   * @param int $uid\n   *   User ID of the user requesting reset.\n   *\n   * @return array|\\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   The form structure or a redirect response.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\AccessDeniedHttpException\n   *   If the pass_reset_timeout or pass_reset_hash are not available in the\n   *   session. Or if $uid is for a blocked user or invalid user ID.\n   *\/",143],["T_WHITESPACE","\n  ",157],["T_PUBLIC","public",158],["T_WHITESPACE"," ",158],["T_FUNCTION","function",158],["T_WHITESPACE"," ",158],["T_STRING","getResetPassForm",158],"(",["T_STRING","Request",158],["T_WHITESPACE"," ",158],["T_VARIABLE","$request",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$uid",158],")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$session",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$request",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getSession",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$timestamp",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$session",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","get",160],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_timeout'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$hash",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],["T_VARIABLE","$session",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","get",161],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_hash'",161],")",";",["T_WHITESPACE","\n    ",161],["T_COMMENT","\/\/ As soon as the session variables are used they are removed to prevent the\n",162],["T_WHITESPACE","    ",163],["T_COMMENT","\/\/ hash and timestamp from being leaked unexpectedly. This could occur if\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ the user does not click on the log in button on the form.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$session",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","remove",165],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_timeout'",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$session",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","remove",166],"(",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_hash'",166],")",";",["T_WHITESPACE","\n    ",166],["T_IF","if",167],["T_WHITESPACE"," ",167],"(","!",["T_VARIABLE","$hash",167],["T_WHITESPACE"," ",167],["T_BOOLEAN_OR","||",167],["T_WHITESPACE"," ",167],"!",["T_VARIABLE","$timestamp",167],")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n      ",167],["T_THROW","throw",168],["T_WHITESPACE"," ",168],["T_NEW","new",168],["T_WHITESPACE"," ",168],["T_STRING","AccessDeniedHttpException",168],"(",")",";",["T_WHITESPACE","\n    ",168],"}",["T_WHITESPACE","\n\n    ",169],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $user *\/",171],["T_WHITESPACE","\n    ",171],["T_VARIABLE","$user",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","userStorage",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","load",172],"(",["T_VARIABLE","$uid",172],")",";",["T_WHITESPACE","\n    ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_VARIABLE","$user",173],["T_WHITESPACE"," ",173],["T_IS_IDENTICAL","===",173],["T_WHITESPACE"," ",173],["T_STRING","NULL",173],["T_WHITESPACE"," ",173],["T_BOOLEAN_OR","||",173],["T_WHITESPACE"," ",173],"!",["T_VARIABLE","$user",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","isActive",173],"(",")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n      ",173],["T_COMMENT","\/\/ Blocked or invalid user ID, so deny access. The parameters will be in\n",174],["T_WHITESPACE","      ",175],["T_COMMENT","\/\/ the watchdog's URL for the administrator to check.\n",175],["T_WHITESPACE","      ",176],["T_THROW","throw",176],["T_WHITESPACE"," ",176],["T_NEW","new",176],["T_WHITESPACE"," ",176],["T_STRING","AccessDeniedHttpException",176],"(",")",";",["T_WHITESPACE","\n    ",176],"}",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Time out, in seconds, until login URL expires.\n",179],["T_WHITESPACE","    ",180],["T_VARIABLE","$timeout",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","config",180],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",180],")",["T_OBJECT_OPERATOR","->",180],["T_STRING","get",180],"(",["T_CONSTANT_ENCAPSED_STRING","'password_reset_timeout'",180],")",";",["T_WHITESPACE","\n\n    ",180],["T_VARIABLE","$expiration_date",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$user",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getLastLoginTime",182],"(",")",["T_WHITESPACE"," ",182],"?",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","dateFormatter",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","format",182],"(",["T_VARIABLE","$timestamp",182],["T_WHITESPACE"," ",182],"+",["T_WHITESPACE"," ",182],["T_VARIABLE","$timeout",182],")",["T_WHITESPACE"," ",182],":",["T_WHITESPACE"," ",182],["T_STRING","NULL",182],";",["T_WHITESPACE","\n    ",182],["T_RETURN","return",183],["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","formBuilder",183],"(",")",["T_OBJECT_OPERATOR","->",183],["T_STRING","getForm",183],"(",["T_STRING","UserPasswordResetForm",183],["T_DOUBLE_COLON","::",183],["T_CLASS","class",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$user",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$expiration_date",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$timestamp",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$hash",183],")",";",["T_WHITESPACE","\n  ",183],"}",["T_WHITESPACE","\n\n  ",184],["T_DOC_COMMENT","\/**\n   * Validates user, hash, and timestamp; logs the user in if correct.\n   *\n   * @param int $uid\n   *   User ID of the user requesting reset.\n   * @param int $timestamp\n   *   The current timestamp.\n   * @param string $hash\n   *   Login link hash.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   Returns a redirect to the user edit form if the information is correct.\n   *   If the information is incorrect redirects to 'user.pass' route with a\n   *   message for the user.\n   *\n   * @throws \\Symfony\\Component\\HttpKernel\\Exception\\AccessDeniedHttpException\n   *   If $uid is for a blocked user or invalid user ID.\n   *\/",186],["T_WHITESPACE","\n  ",203],["T_PUBLIC","public",204],["T_WHITESPACE"," ",204],["T_FUNCTION","function",204],["T_WHITESPACE"," ",204],["T_STRING","resetPassLogin",204],"(",["T_VARIABLE","$uid",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$timestamp",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$hash",204],")",["T_WHITESPACE"," ",204],"{",["T_WHITESPACE","\n    ",204],["T_COMMENT","\/\/ The current user is not logged in, so check the parameters.\n",205],["T_WHITESPACE","    ",206],["T_VARIABLE","$current",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_STRING","REQUEST_TIME",206],";",["T_WHITESPACE","\n    ",206],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserInterface $user *\/",207],["T_WHITESPACE","\n    ",207],["T_VARIABLE","$user",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","userStorage",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","load",208],"(",["T_VARIABLE","$uid",208],")",";",["T_WHITESPACE","\n\n    ",208],["T_COMMENT","\/\/ Verify that the user exists and is active.\n",210],["T_WHITESPACE","    ",211],["T_IF","if",211],["T_WHITESPACE"," ",211],"(",["T_VARIABLE","$user",211],["T_WHITESPACE"," ",211],["T_IS_IDENTICAL","===",211],["T_WHITESPACE"," ",211],["T_STRING","NULL",211],["T_WHITESPACE"," ",211],["T_BOOLEAN_OR","||",211],["T_WHITESPACE"," ",211],"!",["T_VARIABLE","$user",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","isActive",211],"(",")",")",["T_WHITESPACE"," ",211],"{",["T_WHITESPACE","\n      ",211],["T_COMMENT","\/\/ Blocked or invalid user ID, so deny access. The parameters will be in\n",212],["T_WHITESPACE","      ",213],["T_COMMENT","\/\/ the watchdog's URL for the administrator to check.\n",213],["T_WHITESPACE","      ",214],["T_THROW","throw",214],["T_WHITESPACE"," ",214],["T_NEW","new",214],["T_WHITESPACE"," ",214],["T_STRING","AccessDeniedHttpException",214],"(",")",";",["T_WHITESPACE","\n    ",214],"}",["T_WHITESPACE","\n\n    ",215],["T_COMMENT","\/\/ Time out, in seconds, until login URL expires.\n",217],["T_WHITESPACE","    ",218],["T_VARIABLE","$timeout",218],["T_WHITESPACE"," ",218],"=",["T_WHITESPACE"," ",218],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","config",218],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",218],")",["T_OBJECT_OPERATOR","->",218],["T_STRING","get",218],"(",["T_CONSTANT_ENCAPSED_STRING","'password_reset_timeout'",218],")",";",["T_WHITESPACE","\n    ",218],["T_COMMENT","\/\/ No time out for first time login.\n",219],["T_WHITESPACE","    ",220],["T_IF","if",220],["T_WHITESPACE"," ",220],"(",["T_VARIABLE","$user",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","getLastLoginTime",220],"(",")",["T_WHITESPACE"," ",220],["T_BOOLEAN_AND","&&",220],["T_WHITESPACE"," ",220],["T_VARIABLE","$current",220],["T_WHITESPACE"," ",220],"-",["T_WHITESPACE"," ",220],["T_VARIABLE","$timestamp",220],["T_WHITESPACE"," ",220],">",["T_WHITESPACE"," ",220],["T_VARIABLE","$timeout",220],")",["T_WHITESPACE"," ",220],"{",["T_WHITESPACE","\n      ",220],["T_STRING","drupal_set_message",221],"(",["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","t",221],"(",["T_CONSTANT_ENCAPSED_STRING","'You have tried to use a one-time login link that has expired. Please request a new one using the form below.'",221],")",",",["T_WHITESPACE"," ",221],["T_CONSTANT_ENCAPSED_STRING","'error'",221],")",";",["T_WHITESPACE","\n      ",221],["T_RETURN","return",222],["T_WHITESPACE"," ",222],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","redirect",222],"(",["T_CONSTANT_ENCAPSED_STRING","'user.pass'",222],")",";",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n    ",223],["T_ELSEIF","elseif",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$user",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","isAuthenticated",224],"(",")",["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$timestamp",224],["T_WHITESPACE"," ",224],["T_IS_GREATER_OR_EQUAL",">=",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$user",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getLastLoginTime",224],"(",")",")",["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],"(",["T_VARIABLE","$timestamp",224],["T_WHITESPACE"," ",224],["T_IS_SMALLER_OR_EQUAL","<=",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$current",224],")",["T_WHITESPACE"," ",224],["T_BOOLEAN_AND","&&",224],["T_WHITESPACE"," ",224],["T_STRING","Crypt",224],["T_DOUBLE_COLON","::",224],["T_STRING","hashEquals",224],"(",["T_VARIABLE","$hash",224],",",["T_WHITESPACE"," ",224],["T_STRING","user_pass_rehash",224],"(",["T_VARIABLE","$user",224],",",["T_WHITESPACE"," ",224],["T_VARIABLE","$timestamp",224],")",")",")",["T_WHITESPACE"," ",224],"{",["T_WHITESPACE","\n      ",224],["T_STRING","user_login_finalize",225],"(",["T_VARIABLE","$user",225],")",";",["T_WHITESPACE","\n      ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","logger",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","notice",226],"(",["T_CONSTANT_ENCAPSED_STRING","'User %name used one-time login link at time %timestamp.'",226],",",["T_WHITESPACE"," ",226],"[",["T_CONSTANT_ENCAPSED_STRING","'%name'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$user",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","getDisplayName",226],"(",")",",",["T_WHITESPACE"," ",226],["T_CONSTANT_ENCAPSED_STRING","'%timestamp'",226],["T_WHITESPACE"," ",226],["T_DOUBLE_ARROW","=>",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$timestamp",226],"]",")",";",["T_WHITESPACE","\n      ",226],["T_STRING","drupal_set_message",227],"(",["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","t",227],"(",["T_CONSTANT_ENCAPSED_STRING","'You have just used your one-time login link. It is no longer necessary to use this link to log in. Please change your password.'",227],")",")",";",["T_WHITESPACE","\n      ",227],["T_COMMENT","\/\/ Let the user's password be changed without the current password\n",228],["T_WHITESPACE","      ",229],["T_COMMENT","\/\/ check.\n",229],["T_WHITESPACE","      ",230],["T_VARIABLE","$token",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_STRING","Crypt",230],["T_DOUBLE_COLON","::",230],["T_STRING","randomBytesBase64",230],"(",["T_LNUMBER","55",230],")",";",["T_WHITESPACE","\n      ",230],["T_VARIABLE","$_SESSION",231],"[",["T_CONSTANT_ENCAPSED_STRING","'pass_reset_'",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_VARIABLE","$user",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","id",231],"(",")","]",["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$token",231],";",["T_WHITESPACE","\n      ",231],["T_RETURN","return",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","redirect",232],"(",["T_WHITESPACE","\n        ",232],["T_CONSTANT_ENCAPSED_STRING","'entity.user.edit_form'",233],",",["T_WHITESPACE","\n        ",233],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],["T_VARIABLE","$user",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","id",234],"(",")","]",",",["T_WHITESPACE","\n        ",234],"[",["T_WHITESPACE","\n          ",235],["T_CONSTANT_ENCAPSED_STRING","'query'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],"[",["T_CONSTANT_ENCAPSED_STRING","'pass-reset-token'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$token",236],"]",",",["T_WHITESPACE","\n          ",236],["T_CONSTANT_ENCAPSED_STRING","'absolute'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_STRING","TRUE",237],",",["T_WHITESPACE","\n        ",237],"]",["T_WHITESPACE","\n      ",238],")",";",["T_WHITESPACE","\n    ",239],"}",["T_WHITESPACE","\n\n    ",240],["T_STRING","drupal_set_message",242],"(",["T_VARIABLE","$this",242],["T_OBJECT_OPERATOR","->",242],["T_STRING","t",242],"(",["T_CONSTANT_ENCAPSED_STRING","'You have tried to use a one-time login link that has either been used or is no longer valid. Please request a new one using the form below.'",242],")",",",["T_WHITESPACE"," ",242],["T_CONSTANT_ENCAPSED_STRING","'error'",242],")",";",["T_WHITESPACE","\n    ",242],["T_RETURN","return",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","redirect",243],"(",["T_CONSTANT_ENCAPSED_STRING","'user.pass'",243],")",";",["T_WHITESPACE","\n  ",243],"}",["T_WHITESPACE","\n\n  ",244],["T_DOC_COMMENT","\/**\n   * Redirects users to their profile page.\n   *\n   * This controller assumes that it is only invoked for authenticated users.\n   * This is enforced for the 'user.page' route with the '_user_is_logged_in'\n   * requirement.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   Returns a redirect to the profile of the currently logged in user.\n   *\/",246],["T_WHITESPACE","\n  ",255],["T_PUBLIC","public",256],["T_WHITESPACE"," ",256],["T_FUNCTION","function",256],["T_WHITESPACE"," ",256],["T_STRING","userPage",256],"(",")",["T_WHITESPACE"," ",256],"{",["T_WHITESPACE","\n    ",256],["T_RETURN","return",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","redirect",257],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.user.canonical'",257],",",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","currentUser",257],"(",")",["T_OBJECT_OPERATOR","->",257],["T_STRING","id",257],"(",")",")",")",";",["T_WHITESPACE","\n  ",257],"}",["T_WHITESPACE","\n\n  ",258],["T_DOC_COMMENT","\/**\n   * Route title callback.\n   *\n   * @param \\Drupal\\user\\UserInterface $user\n   *   The user account.\n   *\n   * @return string|array\n   *   The user account name as a render array or an empty string if $user is\n   *   NULL.\n   *\/",260],["T_WHITESPACE","\n  ",269],["T_PUBLIC","public",270],["T_WHITESPACE"," ",270],["T_FUNCTION","function",270],["T_WHITESPACE"," ",270],["T_STRING","userTitle",270],"(",["T_STRING","UserInterface",270],["T_WHITESPACE"," ",270],["T_VARIABLE","$user",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_STRING","NULL",270],")",["T_WHITESPACE"," ",270],"{",["T_WHITESPACE","\n    ",270],["T_RETURN","return",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$user",271],["T_WHITESPACE"," ",271],"?",["T_WHITESPACE"," ",271],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$user",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getUsername",271],"(",")",",",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","'#allowed_tags'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_STRING","Xss",271],["T_DOUBLE_COLON","::",271],["T_STRING","getHtmlTagList",271],"(",")","]",["T_WHITESPACE"," ",271],":",["T_WHITESPACE"," ",271],["T_CONSTANT_ENCAPSED_STRING","''",271],";",["T_WHITESPACE","\n  ",271],"}",["T_WHITESPACE","\n\n  ",272],["T_DOC_COMMENT","\/**\n   * Logs the current user out.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   A redirection to home page.\n   *\/",274],["T_WHITESPACE","\n  ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","logout",280],"(",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n    ",280],["T_STRING","user_logout",281],"(",")",";",["T_WHITESPACE","\n    ",281],["T_RETURN","return",282],["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","redirect",282],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",282],")",";",["T_WHITESPACE","\n  ",282],"}",["T_WHITESPACE","\n\n  ",283],["T_DOC_COMMENT","\/**\n   * Confirms cancelling a user account via an email link.\n   *\n   * @param \\Drupal\\user\\UserInterface $user\n   *   The user account.\n   * @param int $timestamp\n   *   The timestamp.\n   * @param string $hashed_pass\n   *   The hashed password.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\RedirectResponse\n   *   A redirect response.\n   *\/",285],["T_WHITESPACE","\n  ",297],["T_PUBLIC","public",298],["T_WHITESPACE"," ",298],["T_FUNCTION","function",298],["T_WHITESPACE"," ",298],["T_STRING","confirmCancel",298],"(",["T_STRING","UserInterface",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$user",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$timestamp",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_LNUMBER","0",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$hashed_pass",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","''",298],")",["T_WHITESPACE"," ",298],"{",["T_WHITESPACE","\n    ",298],["T_COMMENT","\/\/ Time out in seconds until cancel URL expires; 24 hours = 86400 seconds.\n",299],["T_WHITESPACE","    ",300],["T_VARIABLE","$timeout",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_LNUMBER","86400",300],";",["T_WHITESPACE","\n    ",300],["T_VARIABLE","$current",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","REQUEST_TIME",301],";",["T_WHITESPACE","\n\n    ",301],["T_COMMENT","\/\/ Basic validation of arguments.\n",303],["T_WHITESPACE","    ",304],["T_VARIABLE","$account_data",304],["T_WHITESPACE"," ",304],"=",["T_WHITESPACE"," ",304],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","userData",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","get",304],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",304],",",["T_WHITESPACE"," ",304],["T_VARIABLE","$user",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","id",304],"(",")",")",";",["T_WHITESPACE","\n    ",304],["T_IF","if",305],["T_WHITESPACE"," ",305],"(",["T_ISSET","isset",305],"(",["T_VARIABLE","$account_data",305],"[",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",305],"]",")",["T_WHITESPACE"," ",305],["T_BOOLEAN_AND","&&",305],["T_WHITESPACE"," ",305],"!",["T_EMPTY","empty",305],"(",["T_VARIABLE","$timestamp",305],")",["T_WHITESPACE"," ",305],["T_BOOLEAN_AND","&&",305],["T_WHITESPACE"," ",305],"!",["T_EMPTY","empty",305],"(",["T_VARIABLE","$hashed_pass",305],")",")",["T_WHITESPACE"," ",305],"{",["T_WHITESPACE","\n      ",305],["T_COMMENT","\/\/ Validate expiration and hashed password\/login.\n",306],["T_WHITESPACE","      ",307],["T_IF","if",307],["T_WHITESPACE"," ",307],"(",["T_VARIABLE","$timestamp",307],["T_WHITESPACE"," ",307],["T_IS_SMALLER_OR_EQUAL","<=",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$current",307],["T_WHITESPACE"," ",307],["T_BOOLEAN_AND","&&",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$current",307],["T_WHITESPACE"," ",307],"-",["T_WHITESPACE"," ",307],["T_VARIABLE","$timestamp",307],["T_WHITESPACE"," ",307],"<",["T_WHITESPACE"," ",307],["T_VARIABLE","$timeout",307],["T_WHITESPACE"," ",307],["T_BOOLEAN_AND","&&",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$user",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","id",307],"(",")",["T_WHITESPACE"," ",307],["T_BOOLEAN_AND","&&",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$timestamp",307],["T_WHITESPACE"," ",307],["T_IS_GREATER_OR_EQUAL",">=",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$user",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","getLastLoginTime",307],"(",")",["T_WHITESPACE"," ",307],["T_BOOLEAN_AND","&&",307],["T_WHITESPACE"," ",307],["T_STRING","Crypt",307],["T_DOUBLE_COLON","::",307],["T_STRING","hashEquals",307],"(",["T_VARIABLE","$hashed_pass",307],",",["T_WHITESPACE"," ",307],["T_STRING","user_pass_rehash",307],"(",["T_VARIABLE","$user",307],",",["T_WHITESPACE"," ",307],["T_VARIABLE","$timestamp",307],")",")",")",["T_WHITESPACE"," ",307],"{",["T_WHITESPACE","\n        ",307],["T_VARIABLE","$edit",308],["T_WHITESPACE"," ",308],"=",["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_WHITESPACE","\n          ",308],["T_CONSTANT_ENCAPSED_STRING","'user_cancel_notify'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_ISSET","isset",309],"(",["T_VARIABLE","$account_data",309],"[",["T_CONSTANT_ENCAPSED_STRING","'cancel_notify'",309],"]",")",["T_WHITESPACE"," ",309],"?",["T_WHITESPACE"," ",309],["T_VARIABLE","$account_data",309],"[",["T_CONSTANT_ENCAPSED_STRING","'cancel_notify'",309],"]",["T_WHITESPACE"," ",309],":",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","config",309],"(",["T_CONSTANT_ENCAPSED_STRING","'user.settings'",309],")",["T_OBJECT_OPERATOR","->",309],["T_STRING","get",309],"(",["T_CONSTANT_ENCAPSED_STRING","'notify.status_canceled'",309],")",",",["T_WHITESPACE","\n        ",309],")",";",["T_WHITESPACE","\n        ",310],["T_STRING","user_cancel",311],"(",["T_VARIABLE","$edit",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$user",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","id",311],"(",")",",",["T_WHITESPACE"," ",311],["T_VARIABLE","$account_data",311],"[",["T_CONSTANT_ENCAPSED_STRING","'cancel_method'",311],"]",")",";",["T_WHITESPACE","\n        ",311],["T_COMMENT","\/\/ Since user_cancel() is not invoked via Form API, batch processing\n",312],["T_WHITESPACE","        ",313],["T_COMMENT","\/\/ needs to be invoked manually and should redirect to the front page\n",313],["T_WHITESPACE","        ",314],["T_COMMENT","\/\/ after completion.\n",314],["T_WHITESPACE","        ",315],["T_RETURN","return",315],["T_WHITESPACE"," ",315],["T_STRING","batch_process",315],"(",["T_CONSTANT_ENCAPSED_STRING","''",315],")",";",["T_WHITESPACE","\n      ",315],"}",["T_WHITESPACE","\n      ",316],["T_ELSE","else",317],["T_WHITESPACE"," ",317],"{",["T_WHITESPACE","\n        ",317],["T_STRING","drupal_set_message",318],"(",["T_STRING","t",318],"(",["T_CONSTANT_ENCAPSED_STRING","'You have tried to use an account cancellation link that has expired. Please request a new one using the form below.'",318],")",",",["T_WHITESPACE"," ",318],["T_CONSTANT_ENCAPSED_STRING","'error'",318],")",";",["T_WHITESPACE","\n        ",318],["T_RETURN","return",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","redirect",319],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.user.cancel_form'",319],",",["T_WHITESPACE"," ",319],"[",["T_CONSTANT_ENCAPSED_STRING","'user'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_VARIABLE","$user",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","id",319],"(",")","]",",",["T_WHITESPACE"," ",319],"[",["T_CONSTANT_ENCAPSED_STRING","'absolute'",319],["T_WHITESPACE"," ",319],["T_DOUBLE_ARROW","=>",319],["T_WHITESPACE"," ",319],["T_STRING","TRUE",319],"]",")",";",["T_WHITESPACE","\n      ",319],"}",["T_WHITESPACE","\n    ",320],"}",["T_WHITESPACE","\n    ",321],["T_THROW","throw",322],["T_WHITESPACE"," ",322],["T_NEW","new",322],["T_WHITESPACE"," ",322],["T_STRING","AccessDeniedHttpException",322],"(",")",";",["T_WHITESPACE","\n  ",322],"}",["T_WHITESPACE","\n\n",323],"}",["T_WHITESPACE","\n",325]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","source",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate_drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","source",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DrupalSqlBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Row",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Profile field source from database.\n *\n * @MigrateSource(\n *   id = \"profile_field\",\n *   source_provider = \"profile\"\n * )\n *\/",8],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","ProfileField",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","DrupalSqlBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * The source table containing profile field info.\n   *\n   * @var string\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$fieldTable",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The source table containing the profile values.\n   *\n   * @var string\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$valueTable",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",32],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","query",35],"(",")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_IF","if",36],["T_WHITESPACE"," ",36],"(",["T_EMPTY","empty",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","fieldTable",36],")",["T_WHITESPACE"," ",36],["T_BOOLEAN_OR","||",36],["T_WHITESPACE"," ",36],["T_EMPTY","empty",36],"(",["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","valueTable",36],")",")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n      ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getModuleSchemaVersion",37],"(",["T_CONSTANT_ENCAPSED_STRING","'system'",37],")",["T_WHITESPACE"," ",37],["T_IS_GREATER_OR_EQUAL",">=",37],["T_WHITESPACE"," ",37],["T_LNUMBER","7000",37],")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","fieldTable",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'profile_field'",38],";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","valueTable",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'profile_value'",39],";",["T_WHITESPACE","\n      ",39],"}",["T_WHITESPACE","\n      ",40],["T_ELSE","else",41],["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n        ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","fieldTable",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'profile_fields'",42],";",["T_WHITESPACE","\n        ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","valueTable",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'profile_values'",43],";",["T_WHITESPACE","\n      ",43],"}",["T_WHITESPACE","\n    ",44],"}",["T_WHITESPACE","\n    ",45],["T_RETURN","return",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","select",46],"(",["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","fieldTable",46],",",["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'pf'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","fields",46],"(",["T_CONSTANT_ENCAPSED_STRING","'pf'",46],")",";",["T_WHITESPACE","\n  ",46],"}",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PUBLIC","public",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","prepareRow",52],"(",["T_STRING","Row",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$row",52],")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_VARIABLE","$row",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","getSourceProperty",53],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",53],")",["T_WHITESPACE"," ",53],["T_IS_EQUAL","==",53],["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'selection'",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_COMMENT","\/\/ Get the current options.\n",54],["T_WHITESPACE","      ",55],["T_VARIABLE","$current_options",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","preg_split",55],"(",["T_CONSTANT_ENCAPSED_STRING","\"\/[\\r\\n]+\/\"",55],",",["T_WHITESPACE"," ",55],["T_VARIABLE","$row",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getSourceProperty",55],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",55],")",")",";",["T_WHITESPACE","\n      ",55],["T_COMMENT","\/\/ Select the list values from the profile_values table to ensure we get\n",56],["T_WHITESPACE","      ",57],["T_COMMENT","\/\/ them all since they can get out of sync with profile_fields.\n",57],["T_WHITESPACE","      ",58],["T_VARIABLE","$options",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","select",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","valueTable",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'pv'",58],")",["T_WHITESPACE","\n        ",58],["T_OBJECT_OPERATOR","->",59],["T_STRING","distinct",59],"(",")",["T_WHITESPACE","\n        ",59],["T_OBJECT_OPERATOR","->",60],["T_STRING","fields",60],"(",["T_CONSTANT_ENCAPSED_STRING","'pv'",60],",",["T_WHITESPACE"," ",60],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",60],"]",")",["T_WHITESPACE","\n        ",60],["T_OBJECT_OPERATOR","->",61],["T_STRING","condition",61],"(",["T_CONSTANT_ENCAPSED_STRING","'fid'",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$row",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getSourceProperty",61],"(",["T_CONSTANT_ENCAPSED_STRING","'fid'",61],")",")",["T_WHITESPACE","\n        ",61],["T_OBJECT_OPERATOR","->",62],["T_STRING","execute",62],"(",")",["T_WHITESPACE","\n        ",62],["T_OBJECT_OPERATOR","->",63],["T_STRING","fetchCol",63],"(",")",";",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$options",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING","array_merge",64],"(",["T_VARIABLE","$current_options",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$options",64],")",";",["T_WHITESPACE","\n      ",64],["T_COMMENT","\/\/ array_combine() takes care of any duplicates options.\n",65],["T_WHITESPACE","      ",66],["T_VARIABLE","$row",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","setSourceProperty",66],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",66],",",["T_WHITESPACE"," ",66],["T_STRING","array_combine",66],"(",["T_VARIABLE","$options",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$options",66],")",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_IF","if",69],["T_WHITESPACE"," ",69],"(",["T_VARIABLE","$row",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getSourceProperty",69],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",69],")",["T_WHITESPACE"," ",69],["T_IS_EQUAL","==",69],["T_WHITESPACE"," ",69],["T_CONSTANT_ENCAPSED_STRING","'checkbox'",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_COMMENT","\/\/ D6 profile checkboxes values are always 0 or 1 (with no labels), so we\n",70],["T_WHITESPACE","      ",71],["T_COMMENT","\/\/ need to create two label-less options that will get 0 and 1 for their\n",71],["T_WHITESPACE","      ",72],["T_COMMENT","\/\/ keys.\n",72],["T_WHITESPACE","      ",73],["T_VARIABLE","$row",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setSourceProperty",73],"(",["T_CONSTANT_ENCAPSED_STRING","'options'",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",["T_STRING","NULL",73],",",["T_WHITESPACE"," ",73],["T_STRING","NULL",73],")",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_RETURN","return",76],["T_WHITESPACE"," ",76],["T_STRING","parent",76],["T_DOUBLE_COLON","::",76],["T_STRING","prepareRow",76],"(",["T_VARIABLE","$row",76],")",";",["T_WHITESPACE","\n  ",76],"}",["T_WHITESPACE","\n\n  ",77],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",79],["T_WHITESPACE","\n  ",81],["T_PUBLIC","public",82],["T_WHITESPACE"," ",82],["T_FUNCTION","function",82],["T_WHITESPACE"," ",82],["T_STRING","fields",82],"(",")",["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n    ",82],["T_RETURN","return",83],["T_WHITESPACE"," ",83],["T_ARRAY","array",83],"(",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'fid'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Primary Key: Unique profile field ID.'",84],")",",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'title'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","t",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Title of the field shown to the end user.'",85],")",",",["T_WHITESPACE","\n      ",85],["T_CONSTANT_ENCAPSED_STRING","'name'",86],["T_WHITESPACE"," ",86],["T_DOUBLE_ARROW","=>",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","t",86],"(",["T_CONSTANT_ENCAPSED_STRING","'Internal name of the field used in the form HTML and URLs.'",86],")",",",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'explanation'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","t",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Explanation of the field to end users.'",87],")",",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'category'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","t",88],"(",["T_CONSTANT_ENCAPSED_STRING","'Profile category that the field will be grouped under.'",88],")",",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'page'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","t",89],"(",["T_CONSTANT_ENCAPSED_STRING","\"Title of page used for browsing by the field's value\"",89],")",",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'type'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Type of form field.'",90],")",",",["T_WHITESPACE","\n      ",90],["T_CONSTANT_ENCAPSED_STRING","'weight'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","t",91],"(",["T_CONSTANT_ENCAPSED_STRING","'Weight of field in relation to other profile fields.'",91],")",",",["T_WHITESPACE","\n      ",91],["T_CONSTANT_ENCAPSED_STRING","'required'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","t",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Whether the user is required to enter a value. (0 = no, 1 = yes)'",92],")",",",["T_WHITESPACE","\n      ",92],["T_CONSTANT_ENCAPSED_STRING","'register'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","t",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Whether the field is visible in the user registration form. (1 = yes, 0 = no)'",93],")",",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'visibility'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","t",94],"(",["T_CONSTANT_ENCAPSED_STRING","'The level of visibility for the field. (0 = hidden, 1 = private, 2 = public on profile but not member list pages, 3 = public on profile and list pages)'",94],")",",",["T_WHITESPACE","\n      ",94],["T_CONSTANT_ENCAPSED_STRING","'autocomplete'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","t",95],"(",["T_CONSTANT_ENCAPSED_STRING","'Whether form auto-completion is enabled. (0 = disabled, 1 = enabled)'",95],")",",",["T_WHITESPACE","\n      ",95],["T_CONSTANT_ENCAPSED_STRING","'options'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","t",96],"(",["T_CONSTANT_ENCAPSED_STRING","'List of options to be used in a list selection field.'",96],")",",",["T_WHITESPACE","\n    ",96],")",";",["T_WHITESPACE","\n  ",97],"}",["T_WHITESPACE","\n\n  ",98],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",100],["T_WHITESPACE","\n  ",102],["T_PUBLIC","public",103],["T_WHITESPACE"," ",103],["T_FUNCTION","function",103],["T_WHITESPACE"," ",103],["T_STRING","getIds",103],"(",")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$ids",104],"[",["T_CONSTANT_ENCAPSED_STRING","'fid'",104],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",104],"]",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'integer'",104],";",["T_WHITESPACE","\n    ",104],["T_RETURN","return",105],["T_WHITESPACE"," ",105],["T_VARIABLE","$ids",105],";",["T_WHITESPACE","\n  ",105],"}",["T_WHITESPACE","\n\n",106],"}",["T_WHITESPACE","\n",108]]
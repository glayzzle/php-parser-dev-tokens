[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","user",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EventSubscriber",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityManagerInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Session",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AccountInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Site",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Settings",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Symfony",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EventDispatcher",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EventSubscriberInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Symfony",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Component",9],["T_NS_SEPARATOR","\\",9],["T_STRING","HttpKernel",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Event",9],["T_NS_SEPARATOR","\\",9],["T_STRING","PostResponseEvent",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Symfony",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Component",10],["T_NS_SEPARATOR","\\",10],["T_STRING","HttpKernel",10],["T_NS_SEPARATOR","\\",10],["T_STRING","KernelEvents",10],";",["T_WHITESPACE","\n\n",10],["T_DOC_COMMENT","\/**\n * Updates the current user's last access time.\n *\/",12],["T_WHITESPACE","\n",14],["T_CLASS","class",15],["T_WHITESPACE"," ",15],["T_STRING","UserRequestSubscriber",15],["T_WHITESPACE"," ",15],["T_IMPLEMENTS","implements",15],["T_WHITESPACE"," ",15],["T_STRING","EventSubscriberInterface",15],["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * The current account.\n   *\n   * @var \\Drupal\\Core\\Session\\AccountInterface\n   *\/",17],["T_WHITESPACE","\n  ",21],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_VARIABLE","$account",22],";",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The entity manager.\n   *\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$entityManager",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Constructs a new UserRequestSubscriber.\n   *\n   * @param \\Drupal\\Core\\Session\\AccountInterface $account\n   *   The current user.\n   * @param \\Drupal\\Core\\Entity\\EntityManagerInterface $entity_manager\n   *   The entity manager.\n   *\/",31],["T_WHITESPACE","\n  ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","__construct",39],"(",["T_STRING","AccountInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$account",39],",",["T_WHITESPACE"," ",39],["T_STRING","EntityManagerInterface",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$entity_manager",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","account",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$account",40],";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","entityManager",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_VARIABLE","$entity_manager",41],";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Updates the current user's last access time.\n   *\n   * @param \\Symfony\\Component\\HttpKernel\\Event\\PostResponseEvent $event\n   *   The event to process.\n   *\/",44],["T_WHITESPACE","\n  ",49],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_FUNCTION","function",50],["T_WHITESPACE"," ",50],["T_STRING","onKernelTerminate",50],"(",["T_STRING","PostResponseEvent",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$event",50],")",["T_WHITESPACE"," ",50],"{",["T_WHITESPACE","\n    ",50],["T_IF","if",51],["T_WHITESPACE"," ",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","account",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","isAuthenticated",51],"(",")",["T_WHITESPACE"," ",51],["T_BOOLEAN_AND","&&",51],["T_WHITESPACE"," ",51],["T_STRING","REQUEST_TIME",51],["T_WHITESPACE"," ",51],"-",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","account",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getLastAccessedTime",51],"(",")",["T_WHITESPACE"," ",51],">",["T_WHITESPACE"," ",51],["T_STRING","Settings",51],["T_DOUBLE_COLON","::",51],["T_STRING","get",51],"(",["T_CONSTANT_ENCAPSED_STRING","'session_write_interval'",51],",",["T_WHITESPACE"," ",51],["T_LNUMBER","180",51],")",")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n      ",51],["T_COMMENT","\/\/ Do that no more than once per 180 seconds.\n",52],["T_WHITESPACE","      ",53],["T_DOC_COMMENT","\/** @var \\Drupal\\user\\UserStorageInterface $storage *\/",53],["T_WHITESPACE","\n      ",53],["T_VARIABLE","$storage",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","entityManager",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getStorage",54],"(",["T_CONSTANT_ENCAPSED_STRING","'user'",54],")",";",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$storage",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","updateLastAccessTimestamp",55],"(",["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","account",55],",",["T_WHITESPACE"," ",55],["T_STRING","REQUEST_TIME",55],")",";",["T_WHITESPACE","\n    ",55],"}",["T_WHITESPACE","\n  ",56],"}",["T_WHITESPACE","\n\n  ",57],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",59],["T_WHITESPACE","\n  ",61],["T_PUBLIC","public",62],["T_WHITESPACE"," ",62],["T_STATIC","static",62],["T_WHITESPACE"," ",62],["T_FUNCTION","function",62],["T_WHITESPACE"," ",62],["T_STRING","getSubscribedEvents",62],"(",")",["T_WHITESPACE"," ",62],"{",["T_WHITESPACE","\n    ",62],["T_COMMENT","\/\/ Should go before other subscribers start to write their caches. Notably\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ before \\Drupal\\Core\\EventSubscriber\\KernelDestructionSubscriber to\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ prevent instantiation of destructed services.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$events",66],"[",["T_STRING","KernelEvents",66],["T_DOUBLE_COLON","::",66],["T_STRING","TERMINATE",66],"]","[","]",["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'onKernelTerminate'",66],",",["T_WHITESPACE"," ",66],["T_LNUMBER","300",66],"]",";",["T_WHITESPACE","\n    ",66],["T_RETURN","return",67],["T_WHITESPACE"," ",67],["T_VARIABLE","$events",67],";",["T_WHITESPACE","\n  ",67],"}",["T_WHITESPACE","\n\n",68],"}",["T_WHITESPACE","\n",70]]
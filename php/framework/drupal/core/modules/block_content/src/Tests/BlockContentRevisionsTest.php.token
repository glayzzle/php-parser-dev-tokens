[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block_content",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","block_content",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BlockContent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","user",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","User",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","user",7],["T_NS_SEPARATOR","\\",7],["T_STRING","UserInterface",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Create a block with revisions.\n *\n * @group block_content\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","BlockContentRevisionsTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","BlockContentTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Stores blocks created during the test.\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",19],["T_PROTECTED","protected",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$blocks",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * Stores log messages used during the test.\n   * @var array\n   *\/",22],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$revisionLogs",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Sets the test up.\n   *\/",28],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_FUNCTION","function",31],["T_WHITESPACE"," ",31],["T_STRING","setUp",31],"(",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n    ",31],["T_STRING","parent",32],["T_DOUBLE_COLON","::",32],["T_STRING","setUp",32],"(",")",";",["T_WHITESPACE","\n\n    ",32],["T_DOC_COMMENT","\/** @var UserInterface $user *\/",34],["T_WHITESPACE","\n    ",34],["T_VARIABLE","$user",35],["T_WHITESPACE"," ",35],"=",["T_WHITESPACE"," ",35],["T_STRING","User",35],["T_DOUBLE_COLON","::",35],["T_STRING","load",35],"(",["T_LNUMBER","1",35],")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Create initial block.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$block",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","createBlockContent",38],"(",["T_CONSTANT_ENCAPSED_STRING","'initial'",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_VARIABLE","$blocks",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_ARRAY","array",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$logs",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",")",";",["T_WHITESPACE","\n\n    ",41],["T_COMMENT","\/\/ Get original block.\n",43],["T_WHITESPACE","    ",44],["T_VARIABLE","$blocks",44],"[","]",["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$block",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getRevisionId",44],"(",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$logs",45],"[","]",["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","''",45],";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Create three revisions.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$revision_count",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_LNUMBER","3",48],";",["T_WHITESPACE","\n    ",48],["T_FOR","for",49],["T_WHITESPACE"," ",49],"(",["T_VARIABLE","$i",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_LNUMBER","0",49],";",["T_WHITESPACE"," ",49],["T_VARIABLE","$i",49],["T_WHITESPACE"," ",49],"<",["T_WHITESPACE"," ",49],["T_VARIABLE","$revision_count",49],";",["T_WHITESPACE"," ",49],["T_VARIABLE","$i",49],["T_INC","++",49],")",["T_WHITESPACE"," ",49],"{",["T_WHITESPACE","\n      ",49],["T_VARIABLE","$block",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","setNewRevision",50],"(",["T_STRING","TRUE",50],")",";",["T_WHITESPACE","\n      ",50],["T_VARIABLE","$block",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","setRevisionLogMessage",51],"(",["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","randomMachineName",51],"(",["T_LNUMBER","32",51],")",")",";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$block",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","setRevisionUser",52],"(",["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","adminUser",52],")",";",["T_WHITESPACE","\n      ",52],["T_VARIABLE","$block",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","setRevisionCreationTime",53],"(",["T_STRING","REQUEST_TIME",53],")",";",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$logs",54],"[","]",["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$block",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getRevisionLogMessage",54],"(",")",";",["T_WHITESPACE","\n      ",54],["T_VARIABLE","$block",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","save",55],"(",")",";",["T_WHITESPACE","\n      ",55],["T_VARIABLE","$blocks",56],"[","]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$block",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","getRevisionId",56],"(",")",";",["T_WHITESPACE","\n    ",56],"}",["T_WHITESPACE","\n\n    ",57],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","blocks",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],["T_VARIABLE","$blocks",59],";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","revisionLogs",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$logs",60],";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Checks block revision related operations.\n   *\/",63],["T_WHITESPACE","\n  ",65],["T_PUBLIC","public",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","testRevisions",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$blocks",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","blocks",67],";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$logs",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","revisionLogs",68],";",["T_WHITESPACE","\n\n    ",68],["T_FOREACH","foreach",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$blocks",70],["T_WHITESPACE"," ",70],["T_AS","as",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$delta",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$revision_id",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_COMMENT","\/\/ Confirm the correct revision text appears.\n",71],["T_WHITESPACE","      ",72],["T_DOC_COMMENT","\/** @var \\Drupal\\block_content\\BlockContentInterface  $loaded *\/",72],["T_WHITESPACE","\n      ",72],["T_VARIABLE","$loaded",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_STRING","entity_revision_load",73],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$revision_id",73],")",";",["T_WHITESPACE","\n      ",73],["T_COMMENT","\/\/ Verify revision log is the same.\n",74],["T_WHITESPACE","      ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertEqual",75],"(",["T_VARIABLE","$loaded",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","getRevisionLogMessage",75],"(",")",",",["T_WHITESPACE"," ",75],["T_VARIABLE","$logs",75],"[",["T_VARIABLE","$delta",75],"]",",",["T_WHITESPACE"," ",75],["T_STRING","format_string",75],"(",["T_CONSTANT_ENCAPSED_STRING","'Correct log message found for revision @revision'",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n        ",75],["T_CONSTANT_ENCAPSED_STRING","'@revision'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$loaded",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","getRevisionId",76],"(",")",",",["T_WHITESPACE","\n      ",76],")",")",")",";",["T_WHITESPACE","\n      ",77],["T_IF","if",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$delta",78],["T_WHITESPACE"," ",78],">",["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","assertTrue",79],"(",["T_VARIABLE","$loaded",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getRevisionUser",79],"(",")",["T_WHITESPACE"," ",79],["T_INSTANCEOF","instanceof",79],["T_WHITESPACE"," ",79],["T_STRING","UserInterface",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'Revision User found.'",79],")",";",["T_WHITESPACE","\n        ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertTrue",80],"(",["T_STRING","is_numeric",80],"(",["T_VARIABLE","$loaded",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getRevisionUserId",80],"(",")",")",",",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'Revision User ID found.'",80],")",";",["T_WHITESPACE","\n        ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertTrue",81],"(",["T_STRING","is_numeric",81],"(",["T_VARIABLE","$loaded",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getRevisionCreationTime",81],"(",")",")",",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'Revision time found.'",81],")",";",["T_WHITESPACE","\n      ",81],"}",["T_WHITESPACE","\n    ",82],"}",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ Confirm that this is the default revision.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertTrue",86],"(",["T_VARIABLE","$loaded",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","isDefaultRevision",86],"(",")",",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'Third block revision is the default one.'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Make a new revision and set it to not be default.\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ This will create a new revision that is not \"front facing\".\n",89],["T_WHITESPACE","    ",90],["T_COMMENT","\/\/ Save this as a non-default revision.\n",90],["T_WHITESPACE","    ",91],["T_VARIABLE","$loaded",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","setNewRevision",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$loaded",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","isDefaultRevision",92],"(",["T_STRING","FALSE",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$loaded",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","body",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","randomMachineName",93],"(",["T_LNUMBER","8",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$loaded",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","save",94],"(",")",";",["T_WHITESPACE","\n\n    ",94],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","drupalGet",96],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$loaded",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","id",96],"(",")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertNoText",97],"(",["T_VARIABLE","$loaded",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","body",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","value",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'Revision body text is not present on default version of block.'",97],")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Verify that the non-default revision id is greater than the default\n",99],["T_WHITESPACE","    ",100],["T_COMMENT","\/\/ revision id.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$default_revision",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","BlockContent",101],["T_DOUBLE_COLON","::",101],["T_STRING","load",101],"(",["T_VARIABLE","$loaded",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","id",101],"(",")",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertTrue",102],"(",["T_VARIABLE","$loaded",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getRevisionId",102],"(",")",["T_WHITESPACE"," ",102],">",["T_WHITESPACE"," ",102],["T_VARIABLE","$default_revision",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getRevisionId",102],"(",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'Revision id is greater than default revision id.'",102],")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n",103],"}",["T_WHITESPACE","\n",105]]
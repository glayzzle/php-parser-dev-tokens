[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block_content",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","block_content",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BlockContent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","block_content",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","BlockContentType",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Cache",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","EntityInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Language",9],["T_NS_SEPARATOR","\\",9],["T_STRING","LanguageInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","system",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Tests",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EntityCacheTagsTestBase",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Symfony",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Component",11],["T_NS_SEPARATOR","\\",11],["T_STRING","HttpFoundation",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Request",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Tests the Custom Block entity's cache tags.\n *\n * @group block_content\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","BlockContentCacheTagsTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","EntityCacheTagsTestBase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_ARRAY","array",23],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",23],")",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","createEntity",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$block_content_type",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","BlockContentType",29],["T_DOUBLE_COLON","::",29],["T_STRING","create",29],"(",["T_ARRAY","array",29],"(",["T_WHITESPACE","\n      ",29],["T_CONSTANT_ENCAPSED_STRING","'id'",30],["T_WHITESPACE"," ",30],["T_DOUBLE_ARROW","=>",30],["T_WHITESPACE"," ",30],["T_CONSTANT_ENCAPSED_STRING","'basic'",30],",",["T_WHITESPACE","\n      ",30],["T_CONSTANT_ENCAPSED_STRING","'label'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'basic'",31],",",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'revision'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],["T_STRING","FALSE",32],["T_WHITESPACE","\n    ",32],")",")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$block_content_type",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","save",34],"(",")",";",["T_WHITESPACE","\n    ",34],["T_STRING","block_content_add_body_field",35],"(",["T_VARIABLE","$block_content_type",35],["T_OBJECT_OPERATOR","->",35],["T_STRING","id",35],"(",")",")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Create a \"Llama\" custom block.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$block_content",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","BlockContent",38],["T_DOUBLE_COLON","::",38],["T_STRING","create",38],"(",["T_ARRAY","array",38],"(",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'info'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'Llama'",39],",",["T_WHITESPACE","\n      ",39],["T_CONSTANT_ENCAPSED_STRING","'type'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'basic'",40],",",["T_WHITESPACE","\n      ",40],["T_CONSTANT_ENCAPSED_STRING","'body'",41],["T_WHITESPACE"," ",41],["T_DOUBLE_ARROW","=>",41],["T_WHITESPACE"," ",41],["T_ARRAY","array",41],"(",["T_WHITESPACE","\n        ",41],["T_CONSTANT_ENCAPSED_STRING","'value'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'The name \"llama\" was adopted by European settlers from native Peruvians.'",42],",",["T_WHITESPACE","\n        ",42],["T_CONSTANT_ENCAPSED_STRING","'format'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'plain_text'",43],",",["T_WHITESPACE","\n      ",43],")",",",["T_WHITESPACE","\n    ",44],")",")",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$block_content",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","save",46],"(",")",";",["T_WHITESPACE","\n\n    ",46],["T_RETURN","return",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$block_content",48],";",["T_WHITESPACE","\n  ",48],"}",["T_WHITESPACE","\n\n  ",49],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * @see \\Drupal\\block_content\\BlockContentAccessControlHandler::checkAccess()\n   *\/",51],["T_WHITESPACE","\n  ",55],["T_PROTECTED","protected",56],["T_WHITESPACE"," ",56],["T_FUNCTION","function",56],["T_WHITESPACE"," ",56],["T_STRING","getAccessCacheContextsForEntity",56],"(",["T_STRING","EntityInterface",56],["T_WHITESPACE"," ",56],["T_VARIABLE","$entity",56],")",["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n    ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],"[","]",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * Each comment must have a comment body, which always has a text format.\n   *\/",60],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","getAdditionalCacheTagsForEntity",65],"(",["T_STRING","EntityInterface",65],["T_WHITESPACE"," ",65],["T_VARIABLE","$entity",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n    ",65],["T_RETURN","return",66],["T_WHITESPACE"," ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'config:filter.format.plain_text'",66],"]",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n  ",67],["T_DOC_COMMENT","\/**\n   * Tests that the block is cached with the correct contexts and tags.\n   *\/",69],["T_WHITESPACE","\n  ",71],["T_PUBLIC","public",72],["T_WHITESPACE"," ",72],["T_FUNCTION","function",72],["T_WHITESPACE"," ",72],["T_STRING","testBlock",72],"(",")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$block",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalPlaceBlock",73],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content:'",73],["T_WHITESPACE"," ",73],".",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","entity",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","uuid",73],"(",")",")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$build",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","container",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","get",74],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","getViewBuilder",74],"(",["T_CONSTANT_ENCAPSED_STRING","'block'",74],")",["T_OBJECT_OPERATOR","->",74],["T_STRING","view",74],"(",["T_VARIABLE","$block",74],",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'block'",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Render the block.\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ @todo The request stack manipulation won't be necessary once\n",77],["T_WHITESPACE","    ",78],["T_COMMENT","\/\/   https:\/\/www.drupal.org\/node\/2367555 is fixed and the\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/   corresponding $request->isMethodSafe() checks are removed from\n",79],["T_WHITESPACE","    ",80],["T_COMMENT","\/\/   Drupal\\Core\\Render\\Renderer.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$request_stack",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","container",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","get",81],"(",["T_CONSTANT_ENCAPSED_STRING","'request_stack'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$request_stack",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","push",82],"(",["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","Request",82],"(",")",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","container",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","get",83],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","renderRoot",83],"(",["T_VARIABLE","$build",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$request_stack",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","pop",84],"(",")",";",["T_WHITESPACE","\n\n    ",84],["T_COMMENT","\/\/ Expected keys, contexts, and tags for the block.\n",86],["T_WHITESPACE","    ",87],["T_COMMENT","\/\/ @see \\Drupal\\block\\BlockViewBuilder::viewMultiple()\n",87],["T_WHITESPACE","    ",88],["T_VARIABLE","$expected_block_cache_keys",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_view'",88],",",["T_WHITESPACE"," ",88],["T_CONSTANT_ENCAPSED_STRING","'block'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$block",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","id",88],"(",")","]",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$expected_block_cache_contexts",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],"[",["T_CONSTANT_ENCAPSED_STRING","'languages:'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","LanguageInterface",89],["T_DOUBLE_COLON","::",89],["T_STRING","TYPE_INTERFACE",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'theme'",89],",",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'user.permissions'",89],"]",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$expected_block_cache_tags",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","Cache",90],["T_DOUBLE_COLON","::",90],["T_STRING","mergeTags",90],"(","[",["T_CONSTANT_ENCAPSED_STRING","'block_view'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'rendered'",90],"]",",",["T_WHITESPACE"," ",90],["T_VARIABLE","$block",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","getCacheTags",90],"(",")",")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$expected_block_cache_tags",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_STRING","Cache",91],["T_DOUBLE_COLON","::",91],["T_STRING","mergeTags",91],"(",["T_VARIABLE","$expected_block_cache_tags",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$block",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","getPlugin",91],"(",")",["T_OBJECT_OPERATOR","->",91],["T_STRING","getCacheTags",91],"(",")",")",";",["T_WHITESPACE","\n\n    ",91],["T_COMMENT","\/\/ Expected contexts and tags for the BlockContent entity.\n",93],["T_WHITESPACE","    ",94],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Entity\\EntityViewBuilder::getBuildDefaults().\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$expected_entity_cache_contexts",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],"[",["T_CONSTANT_ENCAPSED_STRING","'theme'",95],"]",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$expected_entity_cache_tags",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_STRING","Cache",96],["T_DOUBLE_COLON","::",96],["T_STRING","mergeTags",96],"(","[",["T_CONSTANT_ENCAPSED_STRING","'block_content_view'",96],"]",",",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","entity",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getCacheTags",96],"(",")",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$expected_entity_cache_tags",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","Cache",97],["T_DOUBLE_COLON","::",97],["T_STRING","mergeTags",97],"(",["T_VARIABLE","$expected_entity_cache_tags",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","getAdditionalCacheTagsForEntity",97],"(",["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","entity",97],")",")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Verify that what was render cached matches the above expectations.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$cid",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","createCacheId",100],"(",["T_VARIABLE","$expected_block_cache_keys",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$expected_block_cache_contexts",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$redirected_cid",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","createCacheId",101],"(",["T_VARIABLE","$expected_block_cache_keys",101],",",["T_WHITESPACE"," ",101],["T_STRING","Cache",101],["T_DOUBLE_COLON","::",101],["T_STRING","mergeContexts",101],"(",["T_VARIABLE","$expected_block_cache_contexts",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$expected_entity_cache_contexts",101],")",")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","verifyRenderCache",102],"(",["T_VARIABLE","$cid",102],",",["T_WHITESPACE"," ",102],["T_STRING","Cache",102],["T_DOUBLE_COLON","::",102],["T_STRING","mergeTags",102],"(",["T_VARIABLE","$expected_block_cache_tags",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$expected_entity_cache_tags",102],")",",",["T_WHITESPACE"," ",102],"(",["T_VARIABLE","$cid",102],["T_WHITESPACE"," ",102],["T_IS_NOT_IDENTICAL","!==",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$redirected_cid",102],")",["T_WHITESPACE"," ",102],"?",["T_WHITESPACE"," ",102],["T_VARIABLE","$redirected_cid",102],["T_WHITESPACE"," ",102],":",["T_WHITESPACE"," ",102],["T_STRING","NULL",102],")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n",103],"}",["T_WHITESPACE","\n",105]]
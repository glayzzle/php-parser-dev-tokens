[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block_content",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","block_content",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BlockContent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Create a block and test block edit functionality.\n *\n * @group block_content\n *\/",8],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","PageEditTest",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","BlockContentTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_PROTECTED","protected",15],["T_WHITESPACE"," ",15],["T_FUNCTION","function",15],["T_WHITESPACE"," ",15],["T_STRING","setUp",15],"(",")",["T_WHITESPACE"," ",15],"{",["T_WHITESPACE","\n    ",15],["T_STRING","parent",16],["T_DOUBLE_COLON","::",16],["T_STRING","setUp",16],"(",")",";",["T_WHITESPACE","\n\n    ",16],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","drupalPlaceBlock",18],"(",["T_CONSTANT_ENCAPSED_STRING","'page_title_block'",18],")",";",["T_WHITESPACE","\n  ",18],"}",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Checks block edit functionality.\n   *\/",21],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_FUNCTION","function",24],["T_WHITESPACE"," ",24],["T_STRING","testPageEdit",24],"(",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","drupalLogin",25],"(",["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","adminUser",25],")",";",["T_WHITESPACE","\n\n    ",25],["T_VARIABLE","$title_key",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",27],";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$body_key",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",28],";",["T_WHITESPACE","\n    ",28],["T_COMMENT","\/\/ Create block to edit.\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$edit",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$edit",31],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","Unicode",31],["T_DOUBLE_COLON","::",31],["T_STRING","strtolower",31],"(",["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","randomMachineName",31],"(",["T_LNUMBER","8",31],")",")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$edit",32],"[",["T_VARIABLE","$body_key",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","randomMachineName",32],"(",["T_LNUMBER","16",32],")",";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","drupalPostForm",33],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",33],",",["T_WHITESPACE"," ",33],["T_VARIABLE","$edit",33],",",["T_WHITESPACE"," ",33],["T_STRING","t",33],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",33],")",")",";",["T_WHITESPACE","\n\n    ",33],["T_COMMENT","\/\/ Check that the block exists in the database.\n",35],["T_WHITESPACE","    ",36],["T_VARIABLE","$blocks",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_NS_SEPARATOR","\\",36],["T_STRING","Drupal",36],["T_DOUBLE_COLON","::",36],["T_STRING","entityQuery",36],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",36],")",["T_OBJECT_OPERATOR","->",36],["T_STRING","condition",36],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",36],",",["T_WHITESPACE"," ",36],["T_VARIABLE","$edit",36],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",36],"]",")",["T_OBJECT_OPERATOR","->",36],["T_STRING","execute",36],"(",")",";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$block",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_STRING","BlockContent",37],["T_DOUBLE_COLON","::",37],["T_STRING","load",37],"(",["T_STRING","reset",37],"(",["T_VARIABLE","$blocks",37],")",")",";",["T_WHITESPACE","\n    ",37],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertTrue",38],"(",["T_VARIABLE","$block",38],",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'Custom block found in database.'",38],")",";",["T_WHITESPACE","\n\n    ",38],["T_COMMENT","\/\/ Load the edit page.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalGet",41],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/'",41],["T_WHITESPACE"," ",41],".",["T_WHITESPACE"," ",41],["T_VARIABLE","$block",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","id",41],"(",")",")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","assertFieldByName",42],"(",["T_VARIABLE","$title_key",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$edit",42],"[",["T_VARIABLE","$title_key",42],"]",",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'Title field displayed.'",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertFieldByName",43],"(",["T_VARIABLE","$body_key",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$edit",43],"[",["T_VARIABLE","$body_key",43],"]",",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'Body field displayed.'",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Edit the content of the block.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$edit",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$edit",47],"[",["T_VARIABLE","$title_key",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","randomMachineName",47],"(",["T_LNUMBER","8",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$edit",48],"[",["T_VARIABLE","$body_key",48],"]",["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","randomMachineName",48],"(",["T_LNUMBER","16",48],")",";",["T_WHITESPACE","\n    ",48],["T_COMMENT","\/\/ Stay on the current page, without reloading.\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalPostForm",50],"(",["T_STRING","NULL",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$edit",50],",",["T_WHITESPACE"," ",50],["T_STRING","t",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",50],")",")",";",["T_WHITESPACE","\n\n    ",50],["T_COMMENT","\/\/ Edit the same block, creating a new revision.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","drupalGet",53],"(",["T_CONSTANT_ENCAPSED_STRING","\"block\/\"",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_VARIABLE","$block",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","id",53],"(",")",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$edit",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$edit",55],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",55],"]",["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","randomMachineName",55],"(",["T_LNUMBER","8",55],")",";",["T_WHITESPACE","\n    ",55],["T_VARIABLE","$edit",56],"[",["T_VARIABLE","$body_key",56],"]",["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","randomMachineName",56],"(",["T_LNUMBER","16",56],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$edit",57],"[",["T_CONSTANT_ENCAPSED_STRING","'revision'",57],"]",["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","TRUE",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","drupalPostForm",58],"(",["T_STRING","NULL",58],",",["T_WHITESPACE"," ",58],["T_VARIABLE","$edit",58],",",["T_WHITESPACE"," ",58],["T_STRING","t",58],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",58],")",")",";",["T_WHITESPACE","\n\n    ",58],["T_COMMENT","\/\/ Ensure that the block revision has been created.\n",60],["T_WHITESPACE","    ",61],["T_NS_SEPARATOR","\\",61],["T_STRING","Drupal",61],["T_DOUBLE_COLON","::",61],["T_STRING","entityManager",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","getStorage",61],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",61],")",["T_OBJECT_OPERATOR","->",61],["T_STRING","resetCache",61],"(",["T_ARRAY","array",61],"(",["T_VARIABLE","$block",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","id",61],"(",")",")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$revised_block",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","BlockContent",62],["T_DOUBLE_COLON","::",62],["T_STRING","load",62],"(",["T_VARIABLE","$block",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","id",62],"(",")",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertNotIdentical",63],"(",["T_VARIABLE","$block",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRevisionId",63],"(",")",",",["T_WHITESPACE"," ",63],["T_VARIABLE","$revised_block",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getRevisionId",63],"(",")",",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'A new revision has been created.'",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Test deleting the block.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalGet",66],"(",["T_CONSTANT_ENCAPSED_STRING","\"block\/\"",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_VARIABLE","$revised_block",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","id",66],"(",")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","clickLink",67],"(",["T_STRING","t",67],"(",["T_CONSTANT_ENCAPSED_STRING","'Delete'",67],")",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertText",68],"(",["T_STRING","format_string",68],"(",["T_CONSTANT_ENCAPSED_STRING","'Are you sure you want to delete the custom block @label?'",68],",",["T_WHITESPACE"," ",68],["T_ARRAY","array",68],"(",["T_CONSTANT_ENCAPSED_STRING","'@label'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$revised_block",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","label",68],"(",")",")",")",")",";",["T_WHITESPACE","\n  ",68],"}",["T_WHITESPACE","\n\n",69],"}",["T_WHITESPACE","\n",71]]
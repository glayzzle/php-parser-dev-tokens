[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","block_content",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","block_content",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BlockContent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Database",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Create a block and test saving it.\n *\n * @group block_content\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","BlockContentCreationTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","BlockContentTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * Enable dummy module that implements hook_block_insert() for exceptions and\n   * field_ui to edit display settings.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",23],["T_PUBLIC","public",24],["T_WHITESPACE"," ",24],["T_STATIC","static",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$modules",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_ARRAY","array",24],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content_test'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'dblog'",24],",",["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'field_ui'",24],")",";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Permissions to grant admin user.\n   *\n   * @var array\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$permissions",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_WHITESPACE","\n    ",31],["T_CONSTANT_ENCAPSED_STRING","'administer blocks'",32],",",["T_WHITESPACE","\n    ",32],["T_CONSTANT_ENCAPSED_STRING","'administer block_content display'",33],["T_WHITESPACE","\n  ",33],")",";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * Sets the test up.\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","setUp",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","drupalLogin",41],"(",["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","adminUser",41],")",";",["T_WHITESPACE","\n  ",41],"}",["T_WHITESPACE","\n\n  ",42],["T_DOC_COMMENT","\/**\n   * Creates a \"Basic page\" block and verifies its consistency in the database.\n   *\/",44],["T_WHITESPACE","\n  ",46],["T_PUBLIC","public",47],["T_WHITESPACE"," ",47],["T_FUNCTION","function",47],["T_WHITESPACE"," ",47],["T_STRING","testBlockContentCreation",47],"(",")",["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","drupalLogin",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","adminUser",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Create a block.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$edit",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_ARRAY","array",51],"(",")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$edit",52],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",52],"]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'Test Block'",52],";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$edit",53],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",53],"]",["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","randomMachineName",53],"(",["T_LNUMBER","16",53],")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","drupalPostForm",54],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$edit",54],",",["T_WHITESPACE"," ",54],["T_STRING","t",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",54],")",")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Check that the Basic block has been created.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertRaw",57],"(",["T_STRING","format_string",57],"(",["T_CONSTANT_ENCAPSED_STRING","'@block %name has been created.'",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'@block'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'basic'",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'%name'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$edit",59],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",59],"]",["T_WHITESPACE","\n    ",59],")",")",",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'Basic block created.'",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ Check that the view mode setting is hidden because only one exists.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","assertNoFieldByXPath",63],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@name=\"settings[view_mode]\"]'",63],",",["T_WHITESPACE"," ",63],["T_STRING","NULL",63],",",["T_WHITESPACE"," ",63],["T_CONSTANT_ENCAPSED_STRING","'View mode setting hidden because only one exists'",63],")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Check that the block exists in the database.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$blocks",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_STRING","entity_load_multiple_by_properties",66],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",66],",",["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$edit",66],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",66],"]",")",")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$block",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_STRING","reset",67],"(",["T_VARIABLE","$blocks",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertTrue",68],"(",["T_VARIABLE","$block",68],",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Custom Block found in database.'",68],")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Check that attempting to create another block with the same value for\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ 'info' returns an error.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","drupalPostForm",72],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$edit",72],",",["T_WHITESPACE"," ",72],["T_STRING","t",72],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",72],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_COMMENT","\/\/ Check that the Basic block has been created.\n",74],["T_WHITESPACE","    ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertRaw",75],"(",["T_STRING","format_string",75],"(",["T_CONSTANT_ENCAPSED_STRING","'A custom block with block description %value already exists.'",75],",",["T_WHITESPACE"," ",75],["T_ARRAY","array",75],"(",["T_WHITESPACE","\n      ",75],["T_CONSTANT_ENCAPSED_STRING","'%value'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$edit",76],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",76],"]",["T_WHITESPACE","\n    ",76],")",")",")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","assertResponse",78],"(",["T_LNUMBER","200",78],")",";",["T_WHITESPACE","\n  ",78],"}",["T_WHITESPACE","\n\n  ",79],["T_DOC_COMMENT","\/**\n   * Creates a \"Basic page\" block with multiple view modes.\n   *\/",81],["T_WHITESPACE","\n  ",83],["T_PUBLIC","public",84],["T_WHITESPACE"," ",84],["T_FUNCTION","function",84],["T_WHITESPACE"," ",84],["T_STRING","testBlockContentCreationMultipleViewModes",84],"(",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n    ",84],["T_COMMENT","\/\/ Add a new view mode and verify if it is selected as expected.\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalLogin",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalCreateUser",86],"(",["T_ARRAY","array",86],"(",["T_CONSTANT_ENCAPSED_STRING","'administer display modes'",86],")",")",")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","drupalGet",87],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/display-modes\/view\/add\/block_content'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$edit",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_ARRAY","array",88],"(",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'id'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'test_view_mode'",89],",",["T_WHITESPACE","\n      ",89],["T_CONSTANT_ENCAPSED_STRING","'label'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'Test View Mode'",90],",",["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","drupalPostForm",92],"(",["T_STRING","NULL",92],",",["T_WHITESPACE"," ",92],["T_VARIABLE","$edit",92],",",["T_WHITESPACE"," ",92],["T_STRING","t",92],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",92],")",")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertRaw",93],"(",["T_STRING","t",93],"(",["T_CONSTANT_ENCAPSED_STRING","'Saved the %label view mode.'",93],",",["T_WHITESPACE"," ",93],["T_ARRAY","array",93],"(",["T_CONSTANT_ENCAPSED_STRING","'%label'",93],["T_WHITESPACE"," ",93],["T_DOUBLE_ARROW","=>",93],["T_WHITESPACE"," ",93],["T_VARIABLE","$edit",93],"[",["T_CONSTANT_ENCAPSED_STRING","'label'",93],"]",")",")",")",";",["T_WHITESPACE","\n\n    ",93],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","drupalLogin",95],"(",["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","adminUser",95],")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Create a block.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$edit",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$edit",99],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'Test Block'",99],";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$edit",100],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",100],"]",["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","randomMachineName",100],"(",["T_LNUMBER","16",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","drupalPostForm",101],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",101],",",["T_WHITESPACE"," ",101],["T_VARIABLE","$edit",101],",",["T_WHITESPACE"," ",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",101],")",")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Check that the Basic block has been created.\n",103],["T_WHITESPACE","    ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertRaw",104],"(",["T_STRING","format_string",104],"(",["T_CONSTANT_ENCAPSED_STRING","'@block %name has been created.'",104],",",["T_WHITESPACE"," ",104],["T_ARRAY","array",104],"(",["T_WHITESPACE","\n      ",104],["T_CONSTANT_ENCAPSED_STRING","'@block'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'basic'",105],",",["T_WHITESPACE","\n      ",105],["T_CONSTANT_ENCAPSED_STRING","'%name'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$edit",106],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",106],"]",["T_WHITESPACE","\n    ",106],")",")",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'Basic block created.'",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_COMMENT","\/\/ Save our block permanently\n",109],["T_WHITESPACE","    ",110],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","drupalPostForm",110],"(",["T_STRING","NULL",110],",",["T_WHITESPACE"," ",110],["T_STRING","NULL",110],",",["T_WHITESPACE"," ",110],["T_STRING","t",110],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",110],")",")",";",["T_WHITESPACE","\n\n    ",110],["T_COMMENT","\/\/ Set test_view_mode as a custom display to be available on the list.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","drupalGet",113],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/block-content'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","drupalGet",114],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/block-content\/types'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","clickLink",115],"(",["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Manage display'",115],")",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","drupalGet",116],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/block-content\/manage\/basic\/display'",116],")",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$custom_view_mode",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_ARRAY","array",117],"(",["T_WHITESPACE","\n      ",117],["T_CONSTANT_ENCAPSED_STRING","'display_modes_custom[test_view_mode]'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","1",118],",",["T_WHITESPACE","\n    ",118],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","drupalPostForm",120],"(",["T_STRING","NULL",120],",",["T_WHITESPACE"," ",120],["T_VARIABLE","$custom_view_mode",120],",",["T_WHITESPACE"," ",120],["T_STRING","t",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",120],")",")",";",["T_WHITESPACE","\n\n    ",120],["T_COMMENT","\/\/ Go to the configure page and change the view mode.\n",122],["T_WHITESPACE","    ",123],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","drupalGet",123],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/manage\/testblock'",123],")",";",["T_WHITESPACE","\n\n    ",123],["T_COMMENT","\/\/ Test the available view mode options.\n",125],["T_WHITESPACE","    ",126],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertOption",126],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-settings-view-mode'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'default'",126],",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'The default view mode is available.'",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertOption",127],"(",["T_CONSTANT_ENCAPSED_STRING","'edit-settings-view-mode'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'test_view_mode'",127],",",["T_WHITESPACE"," ",127],["T_CONSTANT_ENCAPSED_STRING","'The test view mode is available.'",127],")",";",["T_WHITESPACE","\n\n    ",127],["T_VARIABLE","$view_mode",129],"[",["T_CONSTANT_ENCAPSED_STRING","'settings[view_mode]'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'test_view_mode'",129],";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","drupalPostForm",130],"(",["T_STRING","NULL",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$view_mode",130],",",["T_WHITESPACE"," ",130],["T_STRING","t",130],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",130],")",")",";",["T_WHITESPACE","\n\n    ",130],["T_COMMENT","\/\/ Check that the view mode setting is shown because more than one exists.\n",132],["T_WHITESPACE","    ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","drupalGet",133],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/manage\/testblock'",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","assertFieldByXPath",134],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@name=\"settings[view_mode]\"]'",134],",",["T_WHITESPACE"," ",134],["T_STRING","NULL",134],",",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'View mode setting shown because multiple exist'",134],")",";",["T_WHITESPACE","\n\n    ",134],["T_COMMENT","\/\/ Change the view mode.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$view_mode",137],"[",["T_CONSTANT_ENCAPSED_STRING","'settings[view_mode]'",137],"]",["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'test_view_mode'",137],";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","drupalPostForm",138],"(",["T_STRING","NULL",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$view_mode",138],",",["T_WHITESPACE"," ",138],["T_STRING","t",138],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",138],")",")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Go to the configure page and verify the view mode has changed.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","drupalGet",141],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/manage\/testblock'",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertFieldByXPath",142],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/select[@name=\"settings[view_mode]\"]\/option[@selected=\"selected\"]\/@value'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'test_view_mode'",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'View mode changed to Test View Mode'",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_COMMENT","\/\/ Check that the block exists in the database.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$blocks",145],["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING","entity_load_multiple_by_properties",145],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",145],",",["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$edit",145],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",145],"]",")",")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$block",146],["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING","reset",146],"(",["T_VARIABLE","$blocks",146],")",";",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","assertTrue",147],"(",["T_VARIABLE","$block",147],",",["T_WHITESPACE"," ",147],["T_CONSTANT_ENCAPSED_STRING","'Custom Block found in database.'",147],")",";",["T_WHITESPACE","\n\n    ",147],["T_COMMENT","\/\/ Check that attempting to create another block with the same value for\n",149],["T_WHITESPACE","    ",150],["T_COMMENT","\/\/ 'info' returns an error.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","drupalPostForm",151],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",151],",",["T_WHITESPACE"," ",151],["T_VARIABLE","$edit",151],",",["T_WHITESPACE"," ",151],["T_STRING","t",151],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",151],")",")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Check that the Basic block has been created.\n",153],["T_WHITESPACE","    ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertRaw",154],"(",["T_STRING","format_string",154],"(",["T_CONSTANT_ENCAPSED_STRING","'A custom block with block description %value already exists.'",154],",",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",["T_WHITESPACE","\n      ",154],["T_CONSTANT_ENCAPSED_STRING","'%value'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_VARIABLE","$edit",155],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",155],"]",["T_WHITESPACE","\n    ",155],")",")",")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertResponse",157],"(",["T_LNUMBER","200",157],")",";",["T_WHITESPACE","\n  ",157],"}",["T_WHITESPACE","\n\n  ",158],["T_DOC_COMMENT","\/**\n   * Create a default custom block.\n   *\n   * Creates a custom block from defaults and ensures that the 'basic block'\n   * type is being used.\n   *\/",160],["T_WHITESPACE","\n  ",165],["T_PUBLIC","public",166],["T_WHITESPACE"," ",166],["T_FUNCTION","function",166],["T_WHITESPACE"," ",166],["T_STRING","testDefaultBlockContentCreation",166],"(",")",["T_WHITESPACE"," ",166],"{",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$edit",167],["T_WHITESPACE"," ",167],"=",["T_WHITESPACE"," ",167],["T_ARRAY","array",167],"(",")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$edit",168],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",168],"]",["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","randomMachineName",168],"(",["T_LNUMBER","8",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$edit",169],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",169],"]",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","randomMachineName",169],"(",["T_LNUMBER","16",169],")",";",["T_WHITESPACE","\n    ",169],["T_COMMENT","\/\/ Don't pass the custom block type in the url so the default is forced.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","drupalPostForm",171],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add'",171],",",["T_WHITESPACE"," ",171],["T_VARIABLE","$edit",171],",",["T_WHITESPACE"," ",171],["T_STRING","t",171],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",171],")",")",";",["T_WHITESPACE","\n\n    ",171],["T_COMMENT","\/\/ Check that the block has been created and that it is a basic block.\n",173],["T_WHITESPACE","    ",174],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertRaw",174],"(",["T_STRING","format_string",174],"(",["T_CONSTANT_ENCAPSED_STRING","'@block %name has been created.'",174],",",["T_WHITESPACE"," ",174],["T_ARRAY","array",174],"(",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'@block'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'basic'",175],",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'%name'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$edit",176],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",176],"]",",",["T_WHITESPACE","\n    ",176],")",")",",",["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'Basic block created.'",177],")",";",["T_WHITESPACE","\n\n    ",177],["T_COMMENT","\/\/ Check that the block exists in the database.\n",179],["T_WHITESPACE","    ",180],["T_VARIABLE","$blocks",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","entity_load_multiple_by_properties",180],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",180],",",["T_WHITESPACE"," ",180],["T_ARRAY","array",180],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$edit",180],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",180],"]",")",")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$block",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_STRING","reset",181],"(",["T_VARIABLE","$blocks",181],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertTrue",182],"(",["T_VARIABLE","$block",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'Default Custom Block found in database.'",182],")",";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n  ",183],["T_DOC_COMMENT","\/**\n   * Verifies that a transaction rolls back the failed creation.\n   *\/",185],["T_WHITESPACE","\n  ",187],["T_PUBLIC","public",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","testFailedBlockCreation",188],"(",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_COMMENT","\/\/ Create a block.\n",189],["T_WHITESPACE","    ",190],["T_TRY","try",190],["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","createBlockContent",191],"(",["T_CONSTANT_ENCAPSED_STRING","'fail_creation'",191],")",";",["T_WHITESPACE","\n      ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","fail",192],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception has not been thrown.'",192],")",";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n    ",193],["T_CATCH","catch",194],["T_WHITESPACE"," ",194],"(",["T_NS_SEPARATOR","\\",194],["T_STRING","Exception",194],["T_WHITESPACE"," ",194],["T_VARIABLE","$e",194],")",["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n      ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","pass",195],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected exception has been thrown.'",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n\n    ",196],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_STRING","Database",198],["T_DOUBLE_COLON","::",198],["T_STRING","getConnection",198],"(",")",["T_OBJECT_OPERATOR","->",198],["T_STRING","supportsTransactions",198],"(",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n      ",198],["T_COMMENT","\/\/ Check that the block does not exist in the database.\n",199],["T_WHITESPACE","      ",200],["T_VARIABLE","$id",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_STRING","db_select",200],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content_field_data'",200],",",["T_WHITESPACE"," ",200],["T_CONSTANT_ENCAPSED_STRING","'b'",200],")",["T_WHITESPACE","\n        ",200],["T_OBJECT_OPERATOR","->",201],["T_STRING","fields",201],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",201],")",")",["T_WHITESPACE","\n        ",201],["T_OBJECT_OPERATOR","->",202],["T_STRING","condition",202],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'fail_creation'",202],")",["T_WHITESPACE","\n        ",202],["T_OBJECT_OPERATOR","->",203],["T_STRING","execute",203],"(",")",["T_WHITESPACE","\n        ",203],["T_OBJECT_OPERATOR","->",204],["T_STRING","fetchField",204],"(",")",";",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","assertFalse",205],"(",["T_VARIABLE","$id",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'Transactions supported, and block not found in database.'",205],")",";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n    ",206],["T_ELSE","else",207],["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n      ",207],["T_COMMENT","\/\/ Check that the block exists in the database.\n",208],["T_WHITESPACE","      ",209],["T_VARIABLE","$id",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_STRING","db_select",209],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content_field_data'",209],",",["T_WHITESPACE"," ",209],["T_CONSTANT_ENCAPSED_STRING","'b'",209],")",["T_WHITESPACE","\n        ",209],["T_OBJECT_OPERATOR","->",210],["T_STRING","fields",210],"(",["T_CONSTANT_ENCAPSED_STRING","'b'",210],",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",210],")",")",["T_WHITESPACE","\n        ",210],["T_OBJECT_OPERATOR","->",211],["T_STRING","condition",211],"(",["T_CONSTANT_ENCAPSED_STRING","'info'",211],",",["T_WHITESPACE"," ",211],["T_CONSTANT_ENCAPSED_STRING","'fail_creation'",211],")",["T_WHITESPACE","\n        ",211],["T_OBJECT_OPERATOR","->",212],["T_STRING","execute",212],"(",")",["T_WHITESPACE","\n        ",212],["T_OBJECT_OPERATOR","->",213],["T_STRING","fetchField",213],"(",")",";",["T_WHITESPACE","\n      ",213],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertTrue",214],"(",["T_VARIABLE","$id",214],",",["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'Transactions not supported, and block found in database.'",214],")",";",["T_WHITESPACE","\n\n      ",214],["T_COMMENT","\/\/ Check that the failed rollback was logged.\n",216],["T_WHITESPACE","      ",217],["T_VARIABLE","$records",217],["T_WHITESPACE"," ",217],"=",["T_WHITESPACE"," ",217],["T_STRING","db_query",217],"(",["T_CONSTANT_ENCAPSED_STRING","\"SELECT wid FROM {watchdog} WHERE message LIKE 'Explicit rollback failed%'\"",217],")",["T_OBJECT_OPERATOR","->",217],["T_STRING","fetchAll",217],"(",")",";",["T_WHITESPACE","\n      ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","assertTrue",218],"(",["T_STRING","count",218],"(",["T_VARIABLE","$records",218],")",["T_WHITESPACE"," ",218],">",["T_WHITESPACE"," ",218],["T_LNUMBER","0",218],",",["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'Transactions not supported, and rollback error logged to watchdog.'",218],")",";",["T_WHITESPACE","\n    ",218],"}",["T_WHITESPACE","\n  ",219],"}",["T_WHITESPACE","\n\n  ",220],["T_DOC_COMMENT","\/**\n   * Test deleting a block.\n   *\/",222],["T_WHITESPACE","\n  ",224],["T_PUBLIC","public",225],["T_WHITESPACE"," ",225],["T_FUNCTION","function",225],["T_WHITESPACE"," ",225],["T_STRING","testBlockDelete",225],"(",")",["T_WHITESPACE"," ",225],"{",["T_WHITESPACE","\n    ",225],["T_COMMENT","\/\/ Create a block.\n",226],["T_WHITESPACE","    ",227],["T_VARIABLE","$edit",227],["T_WHITESPACE"," ",227],"=",["T_WHITESPACE"," ",227],["T_ARRAY","array",227],"(",")",";",["T_WHITESPACE","\n    ",227],["T_VARIABLE","$edit",228],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",228],"]",["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_VARIABLE","$this",228],["T_OBJECT_OPERATOR","->",228],["T_STRING","randomMachineName",228],"(",["T_LNUMBER","8",228],")",";",["T_WHITESPACE","\n    ",228],["T_VARIABLE","$body",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_VARIABLE","$this",229],["T_OBJECT_OPERATOR","->",229],["T_STRING","randomMachineName",229],"(",["T_LNUMBER","16",229],")",";",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$edit",230],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",230],"]",["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$body",230],";",["T_WHITESPACE","\n    ",230],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","drupalPostForm",231],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$edit",231],",",["T_WHITESPACE"," ",231],["T_STRING","t",231],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",231],")",")",";",["T_WHITESPACE","\n\n    ",231],["T_COMMENT","\/\/ Place the block.\n",233],["T_WHITESPACE","    ",234],["T_VARIABLE","$instance",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_ARRAY","array",234],"(",["T_WHITESPACE","\n      ",234],["T_CONSTANT_ENCAPSED_STRING","'id'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_STRING","Unicode",235],["T_DOUBLE_COLON","::",235],["T_STRING","strtolower",235],"(",["T_VARIABLE","$edit",235],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",235],"]",")",",",["T_WHITESPACE","\n      ",235],["T_CONSTANT_ENCAPSED_STRING","'settings[label]'",236],["T_WHITESPACE"," ",236],["T_DOUBLE_ARROW","=>",236],["T_WHITESPACE"," ",236],["T_VARIABLE","$edit",236],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",236],"]",",",["T_WHITESPACE","\n      ",236],["T_CONSTANT_ENCAPSED_STRING","'region'",237],["T_WHITESPACE"," ",237],["T_DOUBLE_ARROW","=>",237],["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'sidebar_first'",237],",",["T_WHITESPACE","\n    ",237],")",";",["T_WHITESPACE","\n    ",238],["T_VARIABLE","$block",239],["T_WHITESPACE"," ",239],"=",["T_WHITESPACE"," ",239],["T_STRING","BlockContent",239],["T_DOUBLE_COLON","::",239],["T_STRING","load",239],"(",["T_LNUMBER","1",239],")",";",["T_WHITESPACE","\n    ",239],["T_VARIABLE","$url",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/block_content:'",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_VARIABLE","$block",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","uuid",240],"(",")",["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'\/'",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","config",240],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",240],")",["T_OBJECT_OPERATOR","->",240],["T_STRING","get",240],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",240],")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","drupalPostForm",241],"(",["T_VARIABLE","$url",241],",",["T_WHITESPACE"," ",241],["T_VARIABLE","$instance",241],",",["T_WHITESPACE"," ",241],["T_STRING","t",241],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",241],")",")",";",["T_WHITESPACE","\n\n    ",241],["T_VARIABLE","$block",243],["T_WHITESPACE"," ",243],"=",["T_WHITESPACE"," ",243],["T_STRING","BlockContent",243],["T_DOUBLE_COLON","::",243],["T_STRING","load",243],"(",["T_LNUMBER","1",243],")",";",["T_WHITESPACE","\n\n    ",243],["T_COMMENT","\/\/ Test getInstances method.\n",245],["T_WHITESPACE","    ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertEqual",246],"(",["T_LNUMBER","1",246],",",["T_WHITESPACE"," ",246],["T_STRING","count",246],"(",["T_VARIABLE","$block",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","getInstances",246],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",246],["T_COMMENT","\/\/ Navigate to home page.\n",248],["T_WHITESPACE","    ",249],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","drupalGet",249],"(",["T_CONSTANT_ENCAPSED_STRING","''",249],")",";",["T_WHITESPACE","\n    ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertText",250],"(",["T_VARIABLE","$body",250],")",";",["T_WHITESPACE","\n\n    ",250],["T_COMMENT","\/\/ Delete the block.\n",252],["T_WHITESPACE","    ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","drupalGet",253],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/1\/delete'",253],")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertText",254],"(",["T_NS_SEPARATOR","\\",254],["T_STRING","Drupal",254],["T_DOUBLE_COLON","::",254],["T_STRING","translation",254],"(",")",["T_OBJECT_OPERATOR","->",254],["T_STRING","formatPlural",254],"(",["T_LNUMBER","1",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'This will also remove 1 placed block instance.'",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'This will also remove @count placed block instance.'",254],")",")",";",["T_WHITESPACE","\n\n    ",254],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","drupalPostForm",256],"(",["T_STRING","NULL",256],",",["T_WHITESPACE"," ",256],["T_ARRAY","array",256],"(",")",",",["T_WHITESPACE"," ",256],["T_CONSTANT_ENCAPSED_STRING","'Delete'",256],")",";",["T_WHITESPACE","\n    ",256],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","assertRaw",257],"(",["T_STRING","t",257],"(",["T_CONSTANT_ENCAPSED_STRING","'The custom block %name has been deleted.'",257],",",["T_WHITESPACE"," ",257],["T_ARRAY","array",257],"(",["T_CONSTANT_ENCAPSED_STRING","'%name'",257],["T_WHITESPACE"," ",257],["T_DOUBLE_ARROW","=>",257],["T_WHITESPACE"," ",257],["T_VARIABLE","$edit",257],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",257],"]",")",")",")",";",["T_WHITESPACE","\n\n    ",257],["T_COMMENT","\/\/ Create another block and force the plugin cache to flush.\n",259],["T_WHITESPACE","    ",260],["T_VARIABLE","$edit2",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_ARRAY","array",260],"(",")",";",["T_WHITESPACE","\n    ",260],["T_VARIABLE","$edit2",261],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",261],"]",["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","randomMachineName",261],"(",["T_LNUMBER","8",261],")",";",["T_WHITESPACE","\n    ",261],["T_VARIABLE","$body2",262],["T_WHITESPACE"," ",262],"=",["T_WHITESPACE"," ",262],["T_VARIABLE","$this",262],["T_OBJECT_OPERATOR","->",262],["T_STRING","randomMachineName",262],"(",["T_LNUMBER","16",262],")",";",["T_WHITESPACE","\n    ",262],["T_VARIABLE","$edit2",263],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",263],"]",["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_VARIABLE","$body2",263],";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","drupalPostForm",264],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$edit2",264],",",["T_WHITESPACE"," ",264],["T_STRING","t",264],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",264],")",")",";",["T_WHITESPACE","\n\n    ",264],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","assertNoRaw",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Error message'",266],")",";",["T_WHITESPACE","\n\n    ",266],["T_COMMENT","\/\/ Create another block with no instances, and test we don't get a\n",268],["T_WHITESPACE","    ",269],["T_COMMENT","\/\/ confirmation message about deleting instances.\n",269],["T_WHITESPACE","    ",270],["T_VARIABLE","$edit3",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_ARRAY","array",270],"(",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$edit3",271],"[",["T_CONSTANT_ENCAPSED_STRING","'info[0][value]'",271],"]",["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","randomMachineName",271],"(",["T_LNUMBER","8",271],")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$body",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","randomMachineName",272],"(",["T_LNUMBER","16",272],")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$edit3",273],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",273],"]",["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$body",273],";",["T_WHITESPACE","\n    ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","drupalPostForm",274],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/add\/basic'",274],",",["T_WHITESPACE"," ",274],["T_VARIABLE","$edit3",274],",",["T_WHITESPACE"," ",274],["T_STRING","t",274],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",274],")",")",";",["T_WHITESPACE","\n\n    ",274],["T_COMMENT","\/\/ Show the delete confirm form.\n",276],["T_WHITESPACE","    ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","drupalGet",277],"(",["T_CONSTANT_ENCAPSED_STRING","'block\/3\/delete'",277],")",";",["T_WHITESPACE","\n    ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertNoText",278],"(",["T_CONSTANT_ENCAPSED_STRING","'This will also remove'",278],")",";",["T_WHITESPACE","\n  ",278],"}",["T_WHITESPACE","\n\n  ",279],["T_DOC_COMMENT","\/**\n   * Test that placed content blocks create a dependency in the block placement.\n   *\/",281],["T_WHITESPACE","\n  ",283],["T_PUBLIC","public",284],["T_WHITESPACE"," ",284],["T_FUNCTION","function",284],["T_WHITESPACE"," ",284],["T_STRING","testConfigDependencies",284],"(",")",["T_WHITESPACE"," ",284],"{",["T_WHITESPACE","\n    ",284],["T_VARIABLE","$block",285],["T_WHITESPACE"," ",285],"=",["T_WHITESPACE"," ",285],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","createBlockContent",285],"(",")",";",["T_WHITESPACE","\n    ",285],["T_COMMENT","\/\/ Place the block.\n",286],["T_WHITESPACE","    ",287],["T_VARIABLE","$block_placement_id",287],["T_WHITESPACE"," ",287],"=",["T_WHITESPACE"," ",287],["T_STRING","Unicode",287],["T_DOUBLE_COLON","::",287],["T_STRING","strtolower",287],"(",["T_VARIABLE","$block",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","label",287],"(",")",")",";",["T_WHITESPACE","\n    ",287],["T_VARIABLE","$instance",288],["T_WHITESPACE"," ",288],"=",["T_WHITESPACE"," ",288],["T_ARRAY","array",288],"(",["T_WHITESPACE","\n      ",288],["T_CONSTANT_ENCAPSED_STRING","'id'",289],["T_WHITESPACE"," ",289],["T_DOUBLE_ARROW","=>",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$block_placement_id",289],",",["T_WHITESPACE","\n      ",289],["T_CONSTANT_ENCAPSED_STRING","'settings[label]'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_VARIABLE","$block",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","label",290],"(",")",",",["T_WHITESPACE","\n      ",290],["T_CONSTANT_ENCAPSED_STRING","'region'",291],["T_WHITESPACE"," ",291],["T_DOUBLE_ARROW","=>",291],["T_WHITESPACE"," ",291],["T_CONSTANT_ENCAPSED_STRING","'sidebar_first'",291],",",["T_WHITESPACE","\n    ",291],")",";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$block",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_STRING","BlockContent",293],["T_DOUBLE_COLON","::",293],["T_STRING","load",293],"(",["T_LNUMBER","1",293],")",";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$url",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'admin\/structure\/block\/add\/block_content:'",294],["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_VARIABLE","$block",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","uuid",294],"(",")",["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'\/'",294],["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","config",294],"(",["T_CONSTANT_ENCAPSED_STRING","'system.theme'",294],")",["T_OBJECT_OPERATOR","->",294],["T_STRING","get",294],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",294],")",";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","drupalPostForm",295],"(",["T_VARIABLE","$url",295],",",["T_WHITESPACE"," ",295],["T_VARIABLE","$instance",295],",",["T_WHITESPACE"," ",295],["T_STRING","t",295],"(",["T_CONSTANT_ENCAPSED_STRING","'Save block'",295],")",")",";",["T_WHITESPACE","\n\n    ",295],["T_VARIABLE","$dependencies",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_NS_SEPARATOR","\\",297],["T_STRING","Drupal",297],["T_DOUBLE_COLON","::",297],["T_STRING","service",297],"(",["T_CONSTANT_ENCAPSED_STRING","'config.manager'",297],")",["T_OBJECT_OPERATOR","->",297],["T_STRING","findConfigEntityDependentsAsEntities",297],"(",["T_CONSTANT_ENCAPSED_STRING","'content'",297],",",["T_WHITESPACE"," ",297],["T_ARRAY","array",297],"(",["T_VARIABLE","$block",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getConfigDependencyName",297],"(",")",")",")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$block_placement",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_STRING","reset",298],"(",["T_VARIABLE","$dependencies",298],")",";",["T_WHITESPACE","\n    ",298],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","assertEqual",299],"(",["T_VARIABLE","$block_placement_id",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$block_placement",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","id",299],"(",")",",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","\"The block placement config entity has a dependency on the block content entity.\"",299],")",";",["T_WHITESPACE","\n  ",299],"}",["T_WHITESPACE","\n\n",300],"}",["T_WHITESPACE","\n",302]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","quickedit",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Serialization",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Json",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Unicode",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","block_content",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Entity",7],["T_NS_SEPARATOR","\\",7],["T_STRING","BlockContent",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","field",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FieldConfig",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","field",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","FieldStorageConfig",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","EventSubscriber",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MainContentViewSubscriber",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Url",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","node",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Entity",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Node",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","node",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Entity",13],["T_NS_SEPARATOR","\\",13],["T_STRING","NodeType",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","simpletest",14],["T_NS_SEPARATOR","\\",14],["T_STRING","WebTestBase",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","filter",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Entity",15],["T_NS_SEPARATOR","\\",15],["T_STRING","FilterFormat",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Tests loading of in-place editing functionality and lazy loading of its\n * in-place editors.\n *\n * @group quickedit\n *\/",17],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","QuickEditLoadingTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","WebTestBase",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PUBLIC","public",30],["T_WHITESPACE"," ",30],["T_STATIC","static",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$modules",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_ARRAY","array",30],"(",["T_WHITESPACE","\n    ",30],["T_CONSTANT_ENCAPSED_STRING","'contextual'",31],",",["T_WHITESPACE","\n    ",31],["T_CONSTANT_ENCAPSED_STRING","'quickedit'",32],",",["T_WHITESPACE","\n    ",32],["T_CONSTANT_ENCAPSED_STRING","'filter'",33],",",["T_WHITESPACE","\n    ",33],["T_CONSTANT_ENCAPSED_STRING","'node'",34],",",["T_WHITESPACE","\n    ",34],["T_CONSTANT_ENCAPSED_STRING","'image'",35],",",["T_WHITESPACE","\n  ",35],")",";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * An user with permissions to create and edit articles.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$authorUser",43],";",["T_WHITESPACE","\n\n  ",43],["T_DOC_COMMENT","\/**\n   * A author user with permissions to access in-place editor.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",45],["T_WHITESPACE","\n  ",49],["T_PROTECTED","protected",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$editorUser",50],";",["T_WHITESPACE","\n\n  ",50],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","setUp",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","setUp",53],"(",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Create a text format.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$filtered_html_format",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","FilterFormat",56],["T_DOUBLE_COLON","::",56],["T_STRING","create",56],"(",["T_ARRAY","array",56],"(",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'format'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'name'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Filtered HTML'",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'weight'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","0",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'filters'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_ARRAY","array",60],"(",")",",",["T_WHITESPACE","\n    ",60],")",")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$filtered_html_format",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","save",62],"(",")",";",["T_WHITESPACE","\n\n    ",62],["T_COMMENT","\/\/ Create a node type.\n",64],["T_WHITESPACE","    ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","drupalCreateContentType",65],"(",["T_ARRAY","array",65],"(",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'type'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'article'",66],",",["T_WHITESPACE","\n      ",66],["T_CONSTANT_ENCAPSED_STRING","'name'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Article'",67],",",["T_WHITESPACE","\n    ",67],")",")",";",["T_WHITESPACE","\n\n    ",68],["T_COMMENT","\/\/ Set the node type to initially not have revisions.\n",70],["T_WHITESPACE","    ",71],["T_COMMENT","\/\/ Testing with revisions will be done later.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$node_type",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","NodeType",72],["T_DOUBLE_COLON","::",72],["T_STRING","load",72],"(",["T_CONSTANT_ENCAPSED_STRING","'article'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$node_type",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","setNewRevision",73],"(",["T_STRING","FALSE",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$node_type",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","save",74],"(",")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Create one node of the above node type using the above text format.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","drupalCreateNode",77],"(",["T_ARRAY","array",77],"(",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'type'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'article'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'body'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_WHITESPACE","\n        ",79],["T_LNUMBER","0",80],["T_WHITESPACE"," ",80],["T_DOUBLE_ARROW","=>",80],["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",["T_WHITESPACE","\n          ",80],["T_CONSTANT_ENCAPSED_STRING","'value'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'<p>How are you?<\/p>'",81],",",["T_WHITESPACE","\n          ",81],["T_CONSTANT_ENCAPSED_STRING","'format'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",82],",",["T_WHITESPACE","\n        ",82],")",["T_WHITESPACE","\n      ",83],")",",",["T_WHITESPACE","\n      ",84],["T_CONSTANT_ENCAPSED_STRING","'revision_log'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","randomString",85],"(",")",",",["T_WHITESPACE","\n    ",85],")",")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Create 2 users, the only difference being the ability to use in-place\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ editing\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$basic_permissions",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",["T_CONSTANT_ENCAPSED_STRING","'access content'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'create article content'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'edit any article content'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'use text format filtered_html'",90],",",["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'access contextual links'",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","authorUser",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","drupalCreateUser",91],"(",["T_VARIABLE","$basic_permissions",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","editorUser",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","drupalCreateUser",92],"(",["T_STRING","array_merge",92],"(",["T_VARIABLE","$basic_permissions",92],",",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",["T_CONSTANT_ENCAPSED_STRING","'access in-place editing'",92],")",")",")",";",["T_WHITESPACE","\n  ",92],"}",["T_WHITESPACE","\n\n  ",93],["T_DOC_COMMENT","\/**\n   * Test the loading of Quick Edit when a user doesn't have access to it.\n   *\/",95],["T_WHITESPACE","\n  ",97],["T_PUBLIC","public",98],["T_WHITESPACE"," ",98],["T_FUNCTION","function",98],["T_WHITESPACE"," ",98],["T_STRING","testUserWithoutPermission",98],"(",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","drupalLogin",99],"(",["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","authorUser",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalGet",100],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",100],")",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Library and in-place editors.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertNoRaw",103],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/quickedit\/js\/quickedit.js'",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'Quick Edit library not loaded.'",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertNoRaw",104],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/modules\/quickedit\/js\/editors\/formEditor.js'",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","\"'form' in-place editor not loaded.\"",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_COMMENT","\/\/ HTML annotation does not exist for users without permission to in-place\n",106],["T_WHITESPACE","    ",107],["T_COMMENT","\/\/ edit.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertNoRaw",108],"(",["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-entity-id=\"node\/1\"'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertNoRaw",109],"(",["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-field-id=\"node\/1\/body\/en\/full\"'",109],")",";",["T_WHITESPACE","\n\n    ",109],["T_COMMENT","\/\/ Retrieving the metadata should result in an empty 403 response.\n",111],["T_WHITESPACE","    ",112],["T_VARIABLE","$post",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_CONSTANT_ENCAPSED_STRING","'fields[0]'",112],["T_WHITESPACE"," ",112],["T_DOUBLE_ARROW","=>",112],["T_WHITESPACE"," ",112],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$response",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","drupalPostWithFormat",113],"(",["T_STRING","Url",113],["T_DOUBLE_COLON","::",113],["T_STRING","fromRoute",113],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit.metadata'",113],")",",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'json'",113],",",["T_WHITESPACE"," ",113],["T_VARIABLE","$post",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertIdentical",114],"(",["T_CONSTANT_ENCAPSED_STRING","'{\"message\":\"\"}'",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$response",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertResponse",115],"(",["T_LNUMBER","403",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Quick Edit's JavaScript would SearchRankingTestnever hit these endpoints if the metadata\n",117],["T_WHITESPACE","    ",118],["T_COMMENT","\/\/ was empty as above, but we need to make sure that malicious users aren't\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ able to use any of the other endpoints either.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$post",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_ARRAY","array",120],"(",["T_CONSTANT_ENCAPSED_STRING","'editors[0]'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'form'",120],")",["T_WHITESPACE"," ",120],"+",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","getAjaxPageStatePostData",120],"(",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$response",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","drupalPost",121],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/attachments'",121],",",["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","''",121],",",["T_WHITESPACE"," ",121],["T_VARIABLE","$post",121],",",["T_WHITESPACE"," ",121],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],"[",["T_STRING","MainContentViewSubscriber",121],["T_DOUBLE_COLON","::",121],["T_STRING","WRAPPER_FORMAT",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",121],"]","]",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertIdentical",122],"(",["T_CONSTANT_ENCAPSED_STRING","'{}'",122],",",["T_WHITESPACE"," ",122],["T_VARIABLE","$response",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertResponse",123],"(",["T_LNUMBER","403",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$post",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",124],["T_WHITESPACE"," ",124],["T_DOUBLE_ARROW","=>",124],["T_WHITESPACE"," ",124],["T_CONSTANT_ENCAPSED_STRING","'true'",124],")",["T_WHITESPACE"," ",124],"+",["T_WHITESPACE"," ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","getAjaxPageStatePostData",124],"(",")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$response",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","drupalPost",125],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",125],["T_WHITESPACE"," ",125],".",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",125],",",["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","''",125],",",["T_WHITESPACE"," ",125],["T_VARIABLE","$post",125],",",["T_WHITESPACE"," ",125],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],"[",["T_STRING","MainContentViewSubscriber",125],["T_DOUBLE_COLON","::",125],["T_STRING","WRAPPER_FORMAT",125],["T_WHITESPACE"," ",125],["T_DOUBLE_ARROW","=>",125],["T_WHITESPACE"," ",125],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",125],"]","]",")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertIdentical",126],"(",["T_CONSTANT_ENCAPSED_STRING","'{}'",126],",",["T_WHITESPACE"," ",126],["T_VARIABLE","$response",126],")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertResponse",127],"(",["T_LNUMBER","403",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$edit",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$edit",129],"[",["T_CONSTANT_ENCAPSED_STRING","'form_id'",129],"]",["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",129],";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$edit",130],"[",["T_CONSTANT_ENCAPSED_STRING","'form_token'",130],"]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_CONSTANT_ENCAPSED_STRING","'xIOzMjuc-PULKsRn_KxFn7xzNk5Bx7XKXLfQfw1qOnA'",130],";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$edit",131],"[",["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",131],"]",["T_WHITESPACE"," ",131],"=",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'form-kVmovBpyX-SJfTT5kY0pjTV35TV-znor--a64dEnMR8'",131],";",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$edit",132],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][summary]'",132],"]",["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","''",132],";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$edit",133],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",133],"]",["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_CONSTANT_ENCAPSED_STRING","'<p>Malicious content.<\/p>'",133],";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$edit",134],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",134],"]",["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",134],";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$edit",135],"[",["T_CONSTANT_ENCAPSED_STRING","'op'",135],"]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_STRING","t",135],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",135],")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$response",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","drupalPost",136],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$edit",136],",",["T_WHITESPACE"," ",136],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],"[",["T_STRING","MainContentViewSubscriber",136],["T_DOUBLE_COLON","::",136],["T_STRING","WRAPPER_FORMAT",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",136],"]","]",")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertIdentical",137],"(",["T_CONSTANT_ENCAPSED_STRING","'{}'",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$response",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","assertResponse",138],"(",["T_LNUMBER","403",138],")",";",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$post",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'true'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$response",140],["T_WHITESPACE"," ",140],"=",["T_WHITESPACE"," ",140],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","drupalPostWithFormat",140],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/entity\/'",140],["T_WHITESPACE"," ",140],".",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'node\/1'",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'json'",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$post",140],")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertIdentical",141],"(",["T_CONSTANT_ENCAPSED_STRING","'{\"message\":\"\"}'",141],",",["T_WHITESPACE"," ",141],["T_VARIABLE","$response",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertResponse",142],"(",["T_LNUMBER","403",142],")",";",["T_WHITESPACE","\n  ",142],"}",["T_WHITESPACE","\n\n  ",143],["T_DOC_COMMENT","\/**\n   * Tests the loading of Quick Edit when a user does have access to it.\n   *\n   * Also ensures lazy loading of in-place editors works.\n   *\/",145],["T_WHITESPACE","\n  ",149],["T_PUBLIC","public",150],["T_WHITESPACE"," ",150],["T_FUNCTION","function",150],["T_WHITESPACE"," ",150],["T_STRING","testUserWithPermission",150],"(",")",["T_WHITESPACE"," ",150],"{",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","drupalLogin",151],"(",["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","editorUser",151],")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","drupalGet",152],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",152],")",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ Library and in-place editors.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$settings",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_VARIABLE","$this",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","getDrupalSettings",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$libraries",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_STRING","explode",156],"(",["T_CONSTANT_ENCAPSED_STRING","','",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$settings",156],"[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",156],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",156],"]",")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","assertTrue",157],"(",["T_STRING","in_array",157],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/quickedit'",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$libraries",157],")",",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'Quick Edit library loaded.'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertFalse",158],"(",["T_STRING","in_array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/quickedit.inPlaceEditor.form'",158],",",["T_WHITESPACE"," ",158],["T_VARIABLE","$libraries",158],")",",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","\"'form' in-place editor not loaded.\"",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_COMMENT","\/\/ HTML annotation must always exist (to not break the render cache).\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertRaw",161],"(",["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-entity-id=\"node\/1\"'",161],")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertRaw",162],"(",["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-field-id=\"node\/1\/body\/en\/full\"'",162],")",";",["T_WHITESPACE","\n\n    ",162],["T_COMMENT","\/\/ There should be only one revision so far.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$node",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_STRING","Node",165],["T_DOUBLE_COLON","::",165],["T_STRING","load",165],"(",["T_LNUMBER","1",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$vids",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],["T_NS_SEPARATOR","\\",166],["T_STRING","Drupal",166],["T_DOUBLE_COLON","::",166],["T_STRING","entityManager",166],"(",")",["T_OBJECT_OPERATOR","->",166],["T_STRING","getStorage",166],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",166],")",["T_OBJECT_OPERATOR","->",166],["T_STRING","revisionIds",166],"(",["T_VARIABLE","$node",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertIdentical",167],"(",["T_LNUMBER","1",167],",",["T_WHITESPACE"," ",167],["T_STRING","count",167],"(",["T_VARIABLE","$vids",167],")",",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'The node has only one revision.'",167],")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$original_log",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$node",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","revision_log",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","value",168],";",["T_WHITESPACE","\n\n    ",168],["T_COMMENT","\/\/ Retrieving the metadata should result in a 200 JSON response.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$htmlPageDrupalSettings",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","drupalSettings",171],";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$post",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_ARRAY","array",172],"(",["T_CONSTANT_ENCAPSED_STRING","'fields[0]'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$response",173],["T_WHITESPACE"," ",173],"=",["T_WHITESPACE"," ",173],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","drupalPostWithFormat",173],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/metadata'",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'json'",173],",",["T_WHITESPACE"," ",173],["T_VARIABLE","$post",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","assertResponse",174],"(",["T_LNUMBER","200",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$expected",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_ARRAY","array",175],"(",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_ARRAY","array",176],"(",["T_WHITESPACE","\n        ",176],["T_CONSTANT_ENCAPSED_STRING","'label'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_CONSTANT_ENCAPSED_STRING","'Body'",177],",",["T_WHITESPACE","\n        ",177],["T_CONSTANT_ENCAPSED_STRING","'access'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_STRING","TRUE",178],",",["T_WHITESPACE","\n        ",178],["T_CONSTANT_ENCAPSED_STRING","'editor'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'form'",179],",",["T_WHITESPACE","\n      ",179],")",["T_WHITESPACE","\n    ",180],")",";",["T_WHITESPACE","\n    ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","assertIdentical",182],"(",["T_STRING","Json",182],["T_DOUBLE_COLON","::",182],["T_STRING","decode",182],"(",["T_VARIABLE","$response",182],")",",",["T_WHITESPACE"," ",182],["T_VARIABLE","$expected",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'The metadata HTTP request answers with the correct JSON response.'",182],")",";",["T_WHITESPACE","\n    ",182],["T_COMMENT","\/\/ Restore drupalSettings to build the next requests; simpletest wipes them\n",183],["T_WHITESPACE","    ",184],["T_COMMENT","\/\/ after a JSON response.\n",184],["T_WHITESPACE","    ",185],["T_VARIABLE","$this",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","drupalSettings",185],["T_WHITESPACE"," ",185],"=",["T_WHITESPACE"," ",185],["T_VARIABLE","$htmlPageDrupalSettings",185],";",["T_WHITESPACE","\n\n    ",185],["T_COMMENT","\/\/ Retrieving the attachments should result in a 200 response, containing:\n",187],["T_WHITESPACE","    ",188],["T_COMMENT","\/\/  1. a settings command with useless metadata: AjaxController is dumb\n",188],["T_WHITESPACE","    ",189],["T_COMMENT","\/\/  2. an insert command that loads the required in-place editors\n",189],["T_WHITESPACE","    ",190],["T_VARIABLE","$post",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_ARRAY","array",190],"(",["T_CONSTANT_ENCAPSED_STRING","'editors[0]'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'form'",190],")",["T_WHITESPACE"," ",190],"+",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","getAjaxPageStatePostData",190],"(",")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$response",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalPost",191],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/attachments'",191],",",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","''",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$post",191],",",["T_WHITESPACE"," ",191],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],"[",["T_STRING","MainContentViewSubscriber",191],["T_DOUBLE_COLON","::",191],["T_STRING","WRAPPER_FORMAT",191],["T_WHITESPACE"," ",191],["T_DOUBLE_ARROW","=>",191],["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",191],"]","]",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$ajax_commands",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_STRING","Json",192],["T_DOUBLE_COLON","::",192],["T_STRING","decode",192],"(",["T_VARIABLE","$response",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertIdentical",193],"(",["T_LNUMBER","2",193],",",["T_WHITESPACE"," ",193],["T_STRING","count",193],"(",["T_VARIABLE","$ajax_commands",193],")",",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'The attachments HTTP request results in two AJAX commands.'",193],")",";",["T_WHITESPACE","\n    ",193],["T_COMMENT","\/\/ First command: settings.\n",194],["T_WHITESPACE","    ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertIdentical",195],"(",["T_CONSTANT_ENCAPSED_STRING","'settings'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$ajax_commands",195],"[",["T_LNUMBER","0",195],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",195],"]",",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a settings command.'",195],")",";",["T_WHITESPACE","\n    ",195],["T_COMMENT","\/\/ Second command: insert libraries into DOM.\n",196],["T_WHITESPACE","    ",197],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertIdentical",197],"(",["T_CONSTANT_ENCAPSED_STRING","'insert'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$ajax_commands",197],"[",["T_LNUMBER","1",197],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",197],"]",",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'The second AJAX command is an append command.'",197],")",";",["T_WHITESPACE","\n    ",197],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","assertTrue",198],"(",["T_STRING","in_array",198],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/quickedit.inPlaceEditor.form'",198],",",["T_WHITESPACE"," ",198],["T_STRING","explode",198],"(",["T_CONSTANT_ENCAPSED_STRING","','",198],",",["T_WHITESPACE"," ",198],["T_VARIABLE","$ajax_commands",198],"[",["T_LNUMBER","0",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'settings'",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",198],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",198],"]",")",")",",",["T_WHITESPACE"," ",198],["T_CONSTANT_ENCAPSED_STRING","'The quickedit.inPlaceEditor.form library is loaded.'",198],")",";",["T_WHITESPACE","\n\n    ",198],["T_COMMENT","\/\/ Retrieving the form for this field should result in a 200 response,\n",200],["T_WHITESPACE","    ",201],["T_COMMENT","\/\/ containing only a quickeditFieldForm command.\n",201],["T_WHITESPACE","    ",202],["T_VARIABLE","$post",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'true'",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'reset'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'true'",202],")",["T_WHITESPACE"," ",202],"+",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getAjaxPageStatePostData",202],"(",")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$response",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","drupalPost",203],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",203],["T_WHITESPACE"," ",203],".",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","''",203],",",["T_WHITESPACE"," ",203],["T_VARIABLE","$post",203],",",["T_WHITESPACE"," ",203],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],"[",["T_STRING","MainContentViewSubscriber",203],["T_DOUBLE_COLON","::",203],["T_STRING","WRAPPER_FORMAT",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",203],"]","]",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertResponse",204],"(",["T_LNUMBER","200",204],")",";",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$ajax_commands",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","Json",205],["T_DOUBLE_COLON","::",205],["T_STRING","decode",205],"(",["T_VARIABLE","$response",205],")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertIdentical",206],"(",["T_LNUMBER","1",206],",",["T_WHITESPACE"," ",206],["T_STRING","count",206],"(",["T_VARIABLE","$ajax_commands",206],")",",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",206],")",";",["T_WHITESPACE","\n    ",206],["T_VARIABLE","$this",207],["T_OBJECT_OPERATOR","->",207],["T_STRING","assertIdentical",207],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldForm'",207],",",["T_WHITESPACE"," ",207],["T_VARIABLE","$ajax_commands",207],"[",["T_LNUMBER","0",207],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",207],"]",",",["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldForm command.'",207],")",";",["T_WHITESPACE","\n    ",207],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","assertIdentical",208],"(",["T_CONSTANT_ENCAPSED_STRING","'<form '",208],",",["T_WHITESPACE"," ",208],["T_STRING","Unicode",208],["T_DOUBLE_COLON","::",208],["T_STRING","substr",208],"(",["T_VARIABLE","$ajax_commands",208],"[",["T_LNUMBER","0",208],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",208],"]",",",["T_WHITESPACE"," ",208],["T_LNUMBER","0",208],",",["T_WHITESPACE"," ",208],["T_LNUMBER","6",208],")",",",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'The quickeditFieldForm command contains a form.'",208],")",";",["T_WHITESPACE","\n\n    ",208],["T_COMMENT","\/\/ Prepare form values for submission. drupalPostAjaxForm() is not suitable\n",210],["T_WHITESPACE","    ",211],["T_COMMENT","\/\/ for handling pages with JSON responses, so we need our own solution here.\n",211],["T_WHITESPACE","    ",212],["T_VARIABLE","$form_tokens_found",212],["T_WHITESPACE"," ",212],"=",["T_WHITESPACE"," ",212],["T_STRING","preg_match",212],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_token\" value=\"([^\"]+)\"\/'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$ajax_commands",212],"[",["T_LNUMBER","0",212],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",212],"]",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$token_match",212],")",["T_WHITESPACE"," ",212],["T_BOOLEAN_AND","&&",212],["T_WHITESPACE"," ",212],["T_STRING","preg_match",212],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_build_id\" value=\"([^\"]+)\"\/'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$ajax_commands",212],"[",["T_LNUMBER","0",212],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",212],"]",",",["T_WHITESPACE"," ",212],["T_VARIABLE","$build_id_match",212],")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$this",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","assertTrue",213],"(",["T_VARIABLE","$form_tokens_found",213],",",["T_WHITESPACE"," ",213],["T_CONSTANT_ENCAPSED_STRING","'Form tokens found in output.'",213],")",";",["T_WHITESPACE","\n\n    ",213],["T_IF","if",215],["T_WHITESPACE"," ",215],"(",["T_VARIABLE","$form_tokens_found",215],")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n      ",215],["T_VARIABLE","$edit",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_ARRAY","array",216],"(",["T_WHITESPACE","\n        ",216],["T_CONSTANT_ENCAPSED_STRING","'body[0][summary]'",217],["T_WHITESPACE"," ",217],["T_DOUBLE_ARROW","=>",217],["T_WHITESPACE"," ",217],["T_CONSTANT_ENCAPSED_STRING","''",217],",",["T_WHITESPACE","\n        ",217],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",218],["T_WHITESPACE"," ",218],["T_DOUBLE_ARROW","=>",218],["T_WHITESPACE"," ",218],["T_CONSTANT_ENCAPSED_STRING","'<p>Fine thanks.<\/p>'",218],",",["T_WHITESPACE","\n        ",218],["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",219],["T_WHITESPACE"," ",219],["T_DOUBLE_ARROW","=>",219],["T_WHITESPACE"," ",219],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",219],",",["T_WHITESPACE","\n        ",219],["T_CONSTANT_ENCAPSED_STRING","'op'",220],["T_WHITESPACE"," ",220],["T_DOUBLE_ARROW","=>",220],["T_WHITESPACE"," ",220],["T_STRING","t",220],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",220],")",",",["T_WHITESPACE","\n      ",220],")",";",["T_WHITESPACE","\n      ",221],["T_VARIABLE","$post",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_ARRAY","array",222],"(",["T_WHITESPACE","\n        ",222],["T_CONSTANT_ENCAPSED_STRING","'form_id'",223],["T_WHITESPACE"," ",223],["T_DOUBLE_ARROW","=>",223],["T_WHITESPACE"," ",223],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",223],",",["T_WHITESPACE","\n        ",223],["T_CONSTANT_ENCAPSED_STRING","'form_token'",224],["T_WHITESPACE"," ",224],["T_DOUBLE_ARROW","=>",224],["T_WHITESPACE"," ",224],["T_VARIABLE","$token_match",224],"[",["T_LNUMBER","1",224],"]",",",["T_WHITESPACE","\n        ",224],["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",225],["T_WHITESPACE"," ",225],["T_DOUBLE_ARROW","=>",225],["T_WHITESPACE"," ",225],["T_VARIABLE","$build_id_match",225],"[",["T_LNUMBER","1",225],"]",",",["T_WHITESPACE","\n      ",225],")",";",["T_WHITESPACE","\n      ",226],["T_VARIABLE","$post",227],["T_WHITESPACE"," ",227],["T_PLUS_EQUAL","+=",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$edit",227],["T_WHITESPACE"," ",227],"+",["T_WHITESPACE"," ",227],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","getAjaxPageStatePostData",227],"(",")",";",["T_WHITESPACE","\n\n      ",227],["T_COMMENT","\/\/ Submit field form and check response. This should store the updated\n",229],["T_WHITESPACE","      ",230],["T_COMMENT","\/\/ entity in PrivateTempStore on the server.\n",230],["T_WHITESPACE","      ",231],["T_VARIABLE","$response",231],["T_WHITESPACE"," ",231],"=",["T_WHITESPACE"," ",231],["T_VARIABLE","$this",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","drupalPost",231],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",231],["T_WHITESPACE"," ",231],".",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",231],",",["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","''",231],",",["T_WHITESPACE"," ",231],["T_VARIABLE","$post",231],",",["T_WHITESPACE"," ",231],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],"[",["T_STRING","MainContentViewSubscriber",231],["T_DOUBLE_COLON","::",231],["T_STRING","WRAPPER_FORMAT",231],["T_WHITESPACE"," ",231],["T_DOUBLE_ARROW","=>",231],["T_WHITESPACE"," ",231],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",231],"]","]",")",";",["T_WHITESPACE","\n      ",231],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","assertResponse",232],"(",["T_LNUMBER","200",232],")",";",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$ajax_commands",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","Json",233],["T_DOUBLE_COLON","::",233],["T_STRING","decode",233],"(",["T_VARIABLE","$response",233],")",";",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","assertIdentical",234],"(",["T_LNUMBER","1",234],",",["T_WHITESPACE"," ",234],["T_STRING","count",234],"(",["T_VARIABLE","$ajax_commands",234],")",",",["T_WHITESPACE"," ",234],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",234],")",";",["T_WHITESPACE","\n      ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","assertIdentical",235],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldFormSaved'",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$ajax_commands",235],"[",["T_LNUMBER","0",235],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",235],"]",",",["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldFormSaved command.'",235],")",";",["T_WHITESPACE","\n      ",235],["T_VARIABLE","$this",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","assertTrue",236],"(",["T_STRING","strpos",236],"(",["T_VARIABLE","$ajax_commands",236],"[",["T_LNUMBER","0",236],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",236],"]",",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'Fine thanks.'",236],")",",",["T_WHITESPACE"," ",236],["T_CONSTANT_ENCAPSED_STRING","'Form value saved and printed back.'",236],")",";",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","assertIdentical",237],"(",["T_VARIABLE","$ajax_commands",237],"[",["T_LNUMBER","0",237],"]","[",["T_CONSTANT_ENCAPSED_STRING","'other_view_modes'",237],"]",",",["T_WHITESPACE"," ",237],["T_ARRAY","array",237],"(",")",",",["T_WHITESPACE"," ",237],["T_CONSTANT_ENCAPSED_STRING","'Field was not rendered in any other view mode.'",237],")",";",["T_WHITESPACE","\n\n      ",237],["T_COMMENT","\/\/ Ensure the text on the original node did not change yet.\n",239],["T_WHITESPACE","      ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","drupalGet",240],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",240],")",";",["T_WHITESPACE","\n      ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","assertText",241],"(",["T_CONSTANT_ENCAPSED_STRING","'How are you?'",241],")",";",["T_WHITESPACE","\n\n      ",241],["T_COMMENT","\/\/ Save the entity by moving the PrivateTempStore values to entity storage.\n",243],["T_WHITESPACE","      ",244],["T_VARIABLE","$post",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_ARRAY","array",244],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'true'",244],")",";",["T_WHITESPACE","\n      ",244],["T_VARIABLE","$response",245],["T_WHITESPACE"," ",245],"=",["T_WHITESPACE"," ",245],["T_VARIABLE","$this",245],["T_OBJECT_OPERATOR","->",245],["T_STRING","drupalPostWithFormat",245],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/entity\/'",245],["T_WHITESPACE"," ",245],".",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'node\/1'",245],",",["T_WHITESPACE"," ",245],["T_CONSTANT_ENCAPSED_STRING","'json'",245],",",["T_WHITESPACE"," ",245],["T_VARIABLE","$post",245],")",";",["T_WHITESPACE","\n      ",245],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","assertResponse",246],"(",["T_LNUMBER","200",246],")",";",["T_WHITESPACE","\n      ",246],["T_VARIABLE","$ajax_commands",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_STRING","Json",247],["T_DOUBLE_COLON","::",247],["T_STRING","decode",247],"(",["T_VARIABLE","$response",247],")",";",["T_WHITESPACE","\n      ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertIdentical",248],"(",["T_LNUMBER","1",248],",",["T_WHITESPACE"," ",248],["T_STRING","count",248],"(",["T_VARIABLE","$ajax_commands",248],")",",",["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'The entity submission HTTP request results in one AJAX command.'",248],")",";",["T_WHITESPACE","\n      ",248],["T_VARIABLE","$this",249],["T_OBJECT_OPERATOR","->",249],["T_STRING","assertIdentical",249],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditEntitySaved'",249],",",["T_WHITESPACE"," ",249],["T_VARIABLE","$ajax_commands",249],"[",["T_LNUMBER","0",249],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",249],"]",",",["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditEntitySaved command.'",249],")",";",["T_WHITESPACE","\n      ",249],["T_VARIABLE","$this",250],["T_OBJECT_OPERATOR","->",250],["T_STRING","assertIdentical",250],"(",["T_VARIABLE","$ajax_commands",250],"[",["T_LNUMBER","0",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",250],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",250],"]",",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'node'",250],",",["T_WHITESPACE"," ",250],["T_CONSTANT_ENCAPSED_STRING","'Saved entity is of type node.'",250],")",";",["T_WHITESPACE","\n      ",250],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","assertIdentical",251],"(",["T_VARIABLE","$ajax_commands",251],"[",["T_LNUMBER","0",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",251],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",251],"]",",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'1'",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'Entity id is 1.'",251],")",";",["T_WHITESPACE","\n\n      ",251],["T_COMMENT","\/\/ Ensure the text on the original node did change.\n",253],["T_WHITESPACE","      ",254],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","drupalGet",254],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",254],")",";",["T_WHITESPACE","\n      ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertText",255],"(",["T_CONSTANT_ENCAPSED_STRING","'Fine thanks.'",255],")",";",["T_WHITESPACE","\n\n      ",255],["T_COMMENT","\/\/ Ensure no new revision was created and the log message is unchanged.\n",257],["T_WHITESPACE","      ",258],["T_VARIABLE","$node",258],["T_WHITESPACE"," ",258],"=",["T_WHITESPACE"," ",258],["T_STRING","Node",258],["T_DOUBLE_COLON","::",258],["T_STRING","load",258],"(",["T_LNUMBER","1",258],")",";",["T_WHITESPACE","\n      ",258],["T_VARIABLE","$vids",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_NS_SEPARATOR","\\",259],["T_STRING","Drupal",259],["T_DOUBLE_COLON","::",259],["T_STRING","entityManager",259],"(",")",["T_OBJECT_OPERATOR","->",259],["T_STRING","getStorage",259],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",259],")",["T_OBJECT_OPERATOR","->",259],["T_STRING","revisionIds",259],"(",["T_VARIABLE","$node",259],")",";",["T_WHITESPACE","\n      ",259],["T_VARIABLE","$this",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","assertIdentical",260],"(",["T_LNUMBER","1",260],",",["T_WHITESPACE"," ",260],["T_STRING","count",260],"(",["T_VARIABLE","$vids",260],")",",",["T_WHITESPACE"," ",260],["T_CONSTANT_ENCAPSED_STRING","'The node has only one revision.'",260],")",";",["T_WHITESPACE","\n      ",260],["T_VARIABLE","$this",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","assertIdentical",261],"(",["T_VARIABLE","$original_log",261],",",["T_WHITESPACE"," ",261],["T_VARIABLE","$node",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","revision_log",261],["T_OBJECT_OPERATOR","->",261],["T_STRING","value",261],",",["T_WHITESPACE"," ",261],["T_CONSTANT_ENCAPSED_STRING","'The revision log message is unchanged.'",261],")",";",["T_WHITESPACE","\n\n      ",261],["T_COMMENT","\/\/ Now configure this node type to create new revisions automatically,\n",263],["T_WHITESPACE","      ",264],["T_COMMENT","\/\/ then again retrieve the field form, fill it, submit it (so it ends up\n",264],["T_WHITESPACE","      ",265],["T_COMMENT","\/\/ in PrivateTempStore) and then save the entity. Now there should be two\n",265],["T_WHITESPACE","      ",266],["T_COMMENT","\/\/ revisions.\n",266],["T_WHITESPACE","      ",267],["T_VARIABLE","$node_type",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_STRING","NodeType",267],["T_DOUBLE_COLON","::",267],["T_STRING","load",267],"(",["T_CONSTANT_ENCAPSED_STRING","'article'",267],")",";",["T_WHITESPACE","\n      ",267],["T_VARIABLE","$node_type",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","setNewRevision",268],"(",["T_STRING","TRUE",268],")",";",["T_WHITESPACE","\n      ",268],["T_VARIABLE","$node_type",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","save",269],"(",")",";",["T_WHITESPACE","\n\n      ",269],["T_COMMENT","\/\/ Retrieve field form.\n",271],["T_WHITESPACE","      ",272],["T_VARIABLE","$post",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_ARRAY","array",272],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'true'",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'reset'",272],["T_WHITESPACE"," ",272],["T_DOUBLE_ARROW","=>",272],["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'true'",272],")",";",["T_WHITESPACE","\n      ",272],["T_VARIABLE","$response",273],["T_WHITESPACE"," ",273],"=",["T_WHITESPACE"," ",273],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","drupalPost",273],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",273],["T_WHITESPACE"," ",273],".",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",273],",",["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","''",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$post",273],",",["T_WHITESPACE"," ",273],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],"[",["T_STRING","MainContentViewSubscriber",273],["T_DOUBLE_COLON","::",273],["T_STRING","WRAPPER_FORMAT",273],["T_WHITESPACE"," ",273],["T_DOUBLE_ARROW","=>",273],["T_WHITESPACE"," ",273],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",273],"]","]",")",";",["T_WHITESPACE","\n      ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","assertResponse",274],"(",["T_LNUMBER","200",274],")",";",["T_WHITESPACE","\n      ",274],["T_VARIABLE","$ajax_commands",275],["T_WHITESPACE"," ",275],"=",["T_WHITESPACE"," ",275],["T_STRING","Json",275],["T_DOUBLE_COLON","::",275],["T_STRING","decode",275],"(",["T_VARIABLE","$response",275],")",";",["T_WHITESPACE","\n      ",275],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","assertIdentical",276],"(",["T_LNUMBER","1",276],",",["T_WHITESPACE"," ",276],["T_STRING","count",276],"(",["T_VARIABLE","$ajax_commands",276],")",",",["T_WHITESPACE"," ",276],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",276],")",";",["T_WHITESPACE","\n      ",276],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","assertIdentical",277],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldForm'",277],",",["T_WHITESPACE"," ",277],["T_VARIABLE","$ajax_commands",277],"[",["T_LNUMBER","0",277],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",277],"]",",",["T_WHITESPACE"," ",277],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldForm command.'",277],")",";",["T_WHITESPACE","\n      ",277],["T_VARIABLE","$this",278],["T_OBJECT_OPERATOR","->",278],["T_STRING","assertIdentical",278],"(",["T_CONSTANT_ENCAPSED_STRING","'<form '",278],",",["T_WHITESPACE"," ",278],["T_STRING","Unicode",278],["T_DOUBLE_COLON","::",278],["T_STRING","substr",278],"(",["T_VARIABLE","$ajax_commands",278],"[",["T_LNUMBER","0",278],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",278],"]",",",["T_WHITESPACE"," ",278],["T_LNUMBER","0",278],",",["T_WHITESPACE"," ",278],["T_LNUMBER","6",278],")",",",["T_WHITESPACE"," ",278],["T_CONSTANT_ENCAPSED_STRING","'The quickeditFieldForm command contains a form.'",278],")",";",["T_WHITESPACE","\n\n      ",278],["T_COMMENT","\/\/ Submit field form.\n",280],["T_WHITESPACE","      ",281],["T_STRING","preg_match",281],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_token\" value=\"([^\"]+)\"\/'",281],",",["T_WHITESPACE"," ",281],["T_VARIABLE","$ajax_commands",281],"[",["T_LNUMBER","0",281],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",281],"]",",",["T_WHITESPACE"," ",281],["T_VARIABLE","$token_match",281],")",";",["T_WHITESPACE","\n      ",281],["T_STRING","preg_match",282],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_build_id\" value=\"([^\"]+)\"\/'",282],",",["T_WHITESPACE"," ",282],["T_VARIABLE","$ajax_commands",282],"[",["T_LNUMBER","0",282],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",282],"]",",",["T_WHITESPACE"," ",282],["T_VARIABLE","$build_id_match",282],")",";",["T_WHITESPACE","\n      ",282],["T_VARIABLE","$edit",283],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",283],"]",["T_WHITESPACE"," ",283],"=",["T_WHITESPACE"," ",283],["T_CONSTANT_ENCAPSED_STRING","'<p>kthxbye<\/p>'",283],";",["T_WHITESPACE","\n      ",283],["T_VARIABLE","$post",284],["T_WHITESPACE"," ",284],"=",["T_WHITESPACE"," ",284],["T_ARRAY","array",284],"(",["T_WHITESPACE","\n        ",284],["T_CONSTANT_ENCAPSED_STRING","'form_id'",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",285],",",["T_WHITESPACE","\n        ",285],["T_CONSTANT_ENCAPSED_STRING","'form_token'",286],["T_WHITESPACE"," ",286],["T_DOUBLE_ARROW","=>",286],["T_WHITESPACE"," ",286],["T_VARIABLE","$token_match",286],"[",["T_LNUMBER","1",286],"]",",",["T_WHITESPACE","\n        ",286],["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",287],["T_WHITESPACE"," ",287],["T_DOUBLE_ARROW","=>",287],["T_WHITESPACE"," ",287],["T_VARIABLE","$build_id_match",287],"[",["T_LNUMBER","1",287],"]",",",["T_WHITESPACE","\n      ",287],")",";",["T_WHITESPACE","\n      ",288],["T_VARIABLE","$post",289],["T_WHITESPACE"," ",289],["T_PLUS_EQUAL","+=",289],["T_WHITESPACE"," ",289],["T_VARIABLE","$edit",289],["T_WHITESPACE"," ",289],"+",["T_WHITESPACE"," ",289],["T_VARIABLE","$this",289],["T_OBJECT_OPERATOR","->",289],["T_STRING","getAjaxPageStatePostData",289],"(",")",";",["T_WHITESPACE","\n      ",289],["T_VARIABLE","$response",290],["T_WHITESPACE"," ",290],"=",["T_WHITESPACE"," ",290],["T_VARIABLE","$this",290],["T_OBJECT_OPERATOR","->",290],["T_STRING","drupalPost",290],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",290],["T_WHITESPACE"," ",290],".",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",290],",",["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","''",290],",",["T_WHITESPACE"," ",290],["T_VARIABLE","$post",290],",",["T_WHITESPACE"," ",290],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],"[",["T_STRING","MainContentViewSubscriber",290],["T_DOUBLE_COLON","::",290],["T_STRING","WRAPPER_FORMAT",290],["T_WHITESPACE"," ",290],["T_DOUBLE_ARROW","=>",290],["T_WHITESPACE"," ",290],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",290],"]","]",")",";",["T_WHITESPACE","\n      ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","assertResponse",291],"(",["T_LNUMBER","200",291],")",";",["T_WHITESPACE","\n      ",291],["T_VARIABLE","$ajax_commands",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_STRING","Json",292],["T_DOUBLE_COLON","::",292],["T_STRING","decode",292],"(",["T_VARIABLE","$response",292],")",";",["T_WHITESPACE","\n      ",292],["T_VARIABLE","$this",293],["T_OBJECT_OPERATOR","->",293],["T_STRING","assertIdentical",293],"(",["T_LNUMBER","1",293],",",["T_WHITESPACE"," ",293],["T_STRING","count",293],"(",["T_VARIABLE","$ajax_commands",293],")",",",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",293],")",";",["T_WHITESPACE","\n      ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","assertIdentical",294],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldFormSaved'",294],",",["T_WHITESPACE"," ",294],["T_VARIABLE","$ajax_commands",294],"[",["T_LNUMBER","0",294],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",294],"]",",",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is an quickeditFieldFormSaved command.'",294],")",";",["T_WHITESPACE","\n      ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assertTrue",295],"(",["T_STRING","strpos",295],"(",["T_VARIABLE","$ajax_commands",295],"[",["T_LNUMBER","0",295],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",295],"]",",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'kthxbye'",295],")",",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'Form value saved and printed back.'",295],")",";",["T_WHITESPACE","\n\n      ",295],["T_COMMENT","\/\/ Save the entity.\n",297],["T_WHITESPACE","      ",298],["T_VARIABLE","$post",298],["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_ARRAY","array",298],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'true'",298],")",";",["T_WHITESPACE","\n      ",298],["T_VARIABLE","$response",299],["T_WHITESPACE"," ",299],"=",["T_WHITESPACE"," ",299],["T_VARIABLE","$this",299],["T_OBJECT_OPERATOR","->",299],["T_STRING","drupalPostWithFormat",299],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/entity\/'",299],["T_WHITESPACE"," ",299],".",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'node\/1'",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'json'",299],",",["T_WHITESPACE"," ",299],["T_VARIABLE","$post",299],")",";",["T_WHITESPACE","\n      ",299],["T_VARIABLE","$this",300],["T_OBJECT_OPERATOR","->",300],["T_STRING","assertResponse",300],"(",["T_LNUMBER","200",300],")",";",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$ajax_commands",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_STRING","Json",301],["T_DOUBLE_COLON","::",301],["T_STRING","decode",301],"(",["T_VARIABLE","$response",301],")",";",["T_WHITESPACE","\n      ",301],["T_VARIABLE","$this",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","assertIdentical",302],"(",["T_LNUMBER","1",302],",",["T_WHITESPACE"," ",302],["T_STRING","count",302],"(",["T_VARIABLE","$ajax_commands",302],")",")",";",["T_WHITESPACE","\n      ",302],["T_VARIABLE","$this",303],["T_OBJECT_OPERATOR","->",303],["T_STRING","assertIdentical",303],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditEntitySaved'",303],",",["T_WHITESPACE"," ",303],["T_VARIABLE","$ajax_commands",303],"[",["T_LNUMBER","0",303],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",303],"]",",",["T_WHITESPACE"," ",303],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is an quickeditEntitySaved command.'",303],")",";",["T_WHITESPACE","\n      ",303],["T_VARIABLE","$this",304],["T_OBJECT_OPERATOR","->",304],["T_STRING","assertEqual",304],"(",["T_VARIABLE","$ajax_commands",304],"[",["T_LNUMBER","0",304],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",304],"]",",",["T_WHITESPACE"," ",304],"[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'node'",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'entity_id'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_LNUMBER","1",304],"]",",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'Updated entity type and ID returned'",304],")",";",["T_WHITESPACE","\n\n      ",304],["T_COMMENT","\/\/ Test that a revision was created with the correct log message.\n",306],["T_WHITESPACE","      ",307],["T_VARIABLE","$vids",307],["T_WHITESPACE"," ",307],"=",["T_WHITESPACE"," ",307],["T_NS_SEPARATOR","\\",307],["T_STRING","Drupal",307],["T_DOUBLE_COLON","::",307],["T_STRING","entityManager",307],"(",")",["T_OBJECT_OPERATOR","->",307],["T_STRING","getStorage",307],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",307],")",["T_OBJECT_OPERATOR","->",307],["T_STRING","revisionIds",307],"(",["T_STRING","Node",307],["T_DOUBLE_COLON","::",307],["T_STRING","load",307],"(",["T_LNUMBER","1",307],")",")",";",["T_WHITESPACE","\n      ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertIdentical",308],"(",["T_LNUMBER","2",308],",",["T_WHITESPACE"," ",308],["T_STRING","count",308],"(",["T_VARIABLE","$vids",308],")",",",["T_WHITESPACE"," ",308],["T_CONSTANT_ENCAPSED_STRING","'The node has two revisions.'",308],")",";",["T_WHITESPACE","\n      ",308],["T_VARIABLE","$revision",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_STRING","node_revision_load",309],"(",["T_VARIABLE","$vids",309],"[",["T_LNUMBER","0",309],"]",")",";",["T_WHITESPACE","\n      ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","assertIdentical",310],"(",["T_VARIABLE","$original_log",310],",",["T_WHITESPACE"," ",310],["T_VARIABLE","$revision",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","revision_log",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","value",310],",",["T_WHITESPACE"," ",310],["T_CONSTANT_ENCAPSED_STRING","'The first revision log message is unchanged.'",310],")",";",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$revision",311],["T_WHITESPACE"," ",311],"=",["T_WHITESPACE"," ",311],["T_STRING","node_revision_load",311],"(",["T_VARIABLE","$vids",311],"[",["T_LNUMBER","1",311],"]",")",";",["T_WHITESPACE","\n      ",311],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","assertIdentical",312],"(",["T_CONSTANT_ENCAPSED_STRING","'Updated the <em class=\"placeholder\">Body<\/em> field through in-place editing.'",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$revision",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","revision_log",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","value",312],",",["T_WHITESPACE"," ",312],["T_CONSTANT_ENCAPSED_STRING","'The second revision log message was correctly generated by Quick Edit module.'",312],")",";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n  ",313],"}",["T_WHITESPACE","\n\n  ",314],["T_DOC_COMMENT","\/**\n   * Tests the loading of Quick Edit for the title base field.\n   *\/",316],["T_WHITESPACE","\n  ",318],["T_PUBLIC","public",319],["T_WHITESPACE"," ",319],["T_FUNCTION","function",319],["T_WHITESPACE"," ",319],["T_STRING","testTitleBaseField",319],"(",")",["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n    ",319],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","drupalLogin",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","editorUser",320],")",";",["T_WHITESPACE","\n    ",320],["T_VARIABLE","$this",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","drupalGet",321],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",321],")",";",["T_WHITESPACE","\n\n    ",321],["T_COMMENT","\/\/ Ensure that the full page title is actually in-place editable\n",323],["T_WHITESPACE","    ",324],["T_VARIABLE","$node",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_STRING","Node",324],["T_DOUBLE_COLON","::",324],["T_STRING","load",324],"(",["T_LNUMBER","1",324],")",";",["T_WHITESPACE","\n    ",324],["T_VARIABLE","$elements",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_VARIABLE","$this",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","xpath",325],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/h1\/span[@data-quickedit-field-id=\"node\/1\/title\/en\/full\" and normalize-space(text())=:title]'",325],",",["T_WHITESPACE"," ",325],["T_ARRAY","array",325],"(",["T_CONSTANT_ENCAPSED_STRING","':title'",325],["T_WHITESPACE"," ",325],["T_DOUBLE_ARROW","=>",325],["T_WHITESPACE"," ",325],["T_VARIABLE","$node",325],["T_OBJECT_OPERATOR","->",325],["T_STRING","label",325],"(",")",")",")",";",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","assertTrue",326],"(","!",["T_EMPTY","empty",326],"(",["T_VARIABLE","$elements",326],")",",",["T_WHITESPACE"," ",326],["T_CONSTANT_ENCAPSED_STRING","'Title with data-quickedit-field-id attribute found.'",326],")",";",["T_WHITESPACE","\n\n    ",326],["T_COMMENT","\/\/ Retrieving the metadata should result in a 200 JSON response.\n",328],["T_WHITESPACE","    ",329],["T_VARIABLE","$htmlPageDrupalSettings",329],["T_WHITESPACE"," ",329],"=",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","drupalSettings",329],";",["T_WHITESPACE","\n    ",329],["T_VARIABLE","$post",330],["T_WHITESPACE"," ",330],"=",["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",["T_CONSTANT_ENCAPSED_STRING","'fields[0]'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/title\/en\/full'",330],")",";",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$response",331],["T_WHITESPACE"," ",331],"=",["T_WHITESPACE"," ",331],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","drupalPostWithFormat",331],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/metadata'",331],",",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'json'",331],",",["T_WHITESPACE"," ",331],["T_VARIABLE","$post",331],")",";",["T_WHITESPACE","\n    ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","assertResponse",332],"(",["T_LNUMBER","200",332],")",";",["T_WHITESPACE","\n    ",332],["T_VARIABLE","$expected",333],["T_WHITESPACE"," ",333],"=",["T_WHITESPACE"," ",333],["T_ARRAY","array",333],"(",["T_WHITESPACE","\n      ",333],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/title\/en\/full'",334],["T_WHITESPACE"," ",334],["T_DOUBLE_ARROW","=>",334],["T_WHITESPACE"," ",334],["T_ARRAY","array",334],"(",["T_WHITESPACE","\n        ",334],["T_CONSTANT_ENCAPSED_STRING","'label'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_CONSTANT_ENCAPSED_STRING","'Title'",335],",",["T_WHITESPACE","\n        ",335],["T_CONSTANT_ENCAPSED_STRING","'access'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_STRING","TRUE",336],",",["T_WHITESPACE","\n        ",336],["T_CONSTANT_ENCAPSED_STRING","'editor'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'plain_text'",337],",",["T_WHITESPACE","\n      ",337],")",["T_WHITESPACE","\n    ",338],")",";",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","assertIdentical",340],"(",["T_STRING","Json",340],["T_DOUBLE_COLON","::",340],["T_STRING","decode",340],"(",["T_VARIABLE","$response",340],")",",",["T_WHITESPACE"," ",340],["T_VARIABLE","$expected",340],",",["T_WHITESPACE"," ",340],["T_CONSTANT_ENCAPSED_STRING","'The metadata HTTP request answers with the correct JSON response.'",340],")",";",["T_WHITESPACE","\n    ",340],["T_COMMENT","\/\/ Restore drupalSettings to build the next requests; simpletest wipes them\n",341],["T_WHITESPACE","    ",342],["T_COMMENT","\/\/ after a JSON response.\n",342],["T_WHITESPACE","    ",343],["T_VARIABLE","$this",343],["T_OBJECT_OPERATOR","->",343],["T_STRING","drupalSettings",343],["T_WHITESPACE"," ",343],"=",["T_WHITESPACE"," ",343],["T_VARIABLE","$htmlPageDrupalSettings",343],";",["T_WHITESPACE","\n\n    ",343],["T_COMMENT","\/\/ Retrieving the form for this field should result in a 200 response,\n",345],["T_WHITESPACE","    ",346],["T_COMMENT","\/\/ containing only a quickeditFieldForm command.\n",346],["T_WHITESPACE","    ",347],["T_VARIABLE","$post",347],["T_WHITESPACE"," ",347],"=",["T_WHITESPACE"," ",347],["T_ARRAY","array",347],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'true'",347],",",["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'reset'",347],["T_WHITESPACE"," ",347],["T_DOUBLE_ARROW","=>",347],["T_WHITESPACE"," ",347],["T_CONSTANT_ENCAPSED_STRING","'true'",347],")",["T_WHITESPACE"," ",347],"+",["T_WHITESPACE"," ",347],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getAjaxPageStatePostData",347],"(",")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$response",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],["T_VARIABLE","$this",348],["T_OBJECT_OPERATOR","->",348],["T_STRING","drupalPost",348],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",348],["T_WHITESPACE"," ",348],".",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/title\/en\/full'",348],",",["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","''",348],",",["T_WHITESPACE"," ",348],["T_VARIABLE","$post",348],",",["T_WHITESPACE"," ",348],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],"[",["T_STRING","MainContentViewSubscriber",348],["T_DOUBLE_COLON","::",348],["T_STRING","WRAPPER_FORMAT",348],["T_WHITESPACE"," ",348],["T_DOUBLE_ARROW","=>",348],["T_WHITESPACE"," ",348],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",348],"]","]",")",";",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","assertResponse",349],"(",["T_LNUMBER","200",349],")",";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$ajax_commands",350],["T_WHITESPACE"," ",350],"=",["T_WHITESPACE"," ",350],["T_STRING","Json",350],["T_DOUBLE_COLON","::",350],["T_STRING","decode",350],"(",["T_VARIABLE","$response",350],")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","assertIdentical",351],"(",["T_LNUMBER","1",351],",",["T_WHITESPACE"," ",351],["T_STRING","count",351],"(",["T_VARIABLE","$ajax_commands",351],")",",",["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",351],")",";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$this",352],["T_OBJECT_OPERATOR","->",352],["T_STRING","assertIdentical",352],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldForm'",352],",",["T_WHITESPACE"," ",352],["T_VARIABLE","$ajax_commands",352],"[",["T_LNUMBER","0",352],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",352],"]",",",["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldForm command.'",352],")",";",["T_WHITESPACE","\n    ",352],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","assertIdentical",353],"(",["T_CONSTANT_ENCAPSED_STRING","'<form '",353],",",["T_WHITESPACE"," ",353],["T_STRING","Unicode",353],["T_DOUBLE_COLON","::",353],["T_STRING","substr",353],"(",["T_VARIABLE","$ajax_commands",353],"[",["T_LNUMBER","0",353],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",353],"]",",",["T_WHITESPACE"," ",353],["T_LNUMBER","0",353],",",["T_WHITESPACE"," ",353],["T_LNUMBER","6",353],")",",",["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'The quickeditFieldForm command contains a form.'",353],")",";",["T_WHITESPACE","\n\n    ",353],["T_COMMENT","\/\/ Prepare form values for submission. drupalPostAjaxForm() is not suitable\n",355],["T_WHITESPACE","    ",356],["T_COMMENT","\/\/ for handling pages with JSON responses, so we need our own solution\n",356],["T_WHITESPACE","    ",357],["T_COMMENT","\/\/ here.\n",357],["T_WHITESPACE","    ",358],["T_VARIABLE","$form_tokens_found",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","preg_match",358],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_token\" value=\"([^\"]+)\"\/'",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$ajax_commands",358],"[",["T_LNUMBER","0",358],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",358],"]",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$token_match",358],")",["T_WHITESPACE"," ",358],["T_BOOLEAN_AND","&&",358],["T_WHITESPACE"," ",358],["T_STRING","preg_match",358],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_build_id\" value=\"([^\"]+)\"\/'",358],",",["T_WHITESPACE"," ",358],["T_VARIABLE","$ajax_commands",358],"[",["T_LNUMBER","0",358],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",358],"]",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$build_id_match",358],")",";",["T_WHITESPACE","\n    ",358],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","assertTrue",359],"(",["T_VARIABLE","$form_tokens_found",359],",",["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'Form tokens found in output.'",359],")",";",["T_WHITESPACE","\n\n    ",359],["T_IF","if",361],["T_WHITESPACE"," ",361],"(",["T_VARIABLE","$form_tokens_found",361],")",["T_WHITESPACE"," ",361],"{",["T_WHITESPACE","\n      ",361],["T_VARIABLE","$edit",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_ARRAY","array",362],"(",["T_WHITESPACE","\n        ",362],["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",363],["T_WHITESPACE"," ",363],["T_DOUBLE_ARROW","=>",363],["T_WHITESPACE"," ",363],["T_CONSTANT_ENCAPSED_STRING","'Obligatory question'",363],",",["T_WHITESPACE","\n        ",363],["T_CONSTANT_ENCAPSED_STRING","'op'",364],["T_WHITESPACE"," ",364],["T_DOUBLE_ARROW","=>",364],["T_WHITESPACE"," ",364],["T_STRING","t",364],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",364],")",",",["T_WHITESPACE","\n      ",364],")",";",["T_WHITESPACE","\n      ",365],["T_VARIABLE","$post",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],["T_ARRAY","array",366],"(",["T_WHITESPACE","\n        ",366],["T_CONSTANT_ENCAPSED_STRING","'form_id'",367],["T_WHITESPACE"," ",367],["T_DOUBLE_ARROW","=>",367],["T_WHITESPACE"," ",367],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",367],",",["T_WHITESPACE","\n        ",367],["T_CONSTANT_ENCAPSED_STRING","'form_token'",368],["T_WHITESPACE"," ",368],["T_DOUBLE_ARROW","=>",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$token_match",368],"[",["T_LNUMBER","1",368],"]",",",["T_WHITESPACE","\n        ",368],["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",369],["T_WHITESPACE"," ",369],["T_DOUBLE_ARROW","=>",369],["T_WHITESPACE"," ",369],["T_VARIABLE","$build_id_match",369],"[",["T_LNUMBER","1",369],"]",",",["T_WHITESPACE","\n      ",369],")",";",["T_WHITESPACE","\n      ",370],["T_VARIABLE","$post",371],["T_WHITESPACE"," ",371],["T_PLUS_EQUAL","+=",371],["T_WHITESPACE"," ",371],["T_VARIABLE","$edit",371],["T_WHITESPACE"," ",371],"+",["T_WHITESPACE"," ",371],["T_VARIABLE","$this",371],["T_OBJECT_OPERATOR","->",371],["T_STRING","getAjaxPageStatePostData",371],"(",")",";",["T_WHITESPACE","\n\n      ",371],["T_COMMENT","\/\/ Submit field form and check response. This should store the\n",373],["T_WHITESPACE","      ",374],["T_COMMENT","\/\/ updated entity in PrivateTempStore on the server.\n",374],["T_WHITESPACE","      ",375],["T_VARIABLE","$response",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","drupalPost",375],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",375],["T_WHITESPACE"," ",375],".",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/title\/en\/full'",375],",",["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","''",375],",",["T_WHITESPACE"," ",375],["T_VARIABLE","$post",375],",",["T_WHITESPACE"," ",375],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],"[",["T_STRING","MainContentViewSubscriber",375],["T_DOUBLE_COLON","::",375],["T_STRING","WRAPPER_FORMAT",375],["T_WHITESPACE"," ",375],["T_DOUBLE_ARROW","=>",375],["T_WHITESPACE"," ",375],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",375],"]","]",")",";",["T_WHITESPACE","\n      ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertResponse",376],"(",["T_LNUMBER","200",376],")",";",["T_WHITESPACE","\n      ",376],["T_VARIABLE","$ajax_commands",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],["T_STRING","Json",377],["T_DOUBLE_COLON","::",377],["T_STRING","decode",377],"(",["T_VARIABLE","$response",377],")",";",["T_WHITESPACE","\n      ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","assertIdentical",378],"(",["T_LNUMBER","1",378],",",["T_WHITESPACE"," ",378],["T_STRING","count",378],"(",["T_VARIABLE","$ajax_commands",378],")",",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",378],")",";",["T_WHITESPACE","\n      ",378],["T_VARIABLE","$this",379],["T_OBJECT_OPERATOR","->",379],["T_STRING","assertIdentical",379],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldFormSaved'",379],",",["T_WHITESPACE"," ",379],["T_VARIABLE","$ajax_commands",379],"[",["T_LNUMBER","0",379],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",379],"]",",",["T_WHITESPACE"," ",379],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldFormSaved command.'",379],")",";",["T_WHITESPACE","\n      ",379],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","assertTrue",380],"(",["T_STRING","strpos",380],"(",["T_VARIABLE","$ajax_commands",380],"[",["T_LNUMBER","0",380],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",380],"]",",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'Obligatory question'",380],")",",",["T_WHITESPACE"," ",380],["T_CONSTANT_ENCAPSED_STRING","'Form value saved and printed back.'",380],")",";",["T_WHITESPACE","\n\n      ",380],["T_COMMENT","\/\/ Ensure the text on the original node did not change yet.\n",382],["T_WHITESPACE","      ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","drupalGet",383],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",383],")",";",["T_WHITESPACE","\n      ",383],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","assertNoText",384],"(",["T_CONSTANT_ENCAPSED_STRING","'Obligatory question'",384],")",";",["T_WHITESPACE","\n\n      ",384],["T_COMMENT","\/\/ Save the entity by moving the PrivateTempStore values to entity storage.\n",386],["T_WHITESPACE","      ",387],["T_VARIABLE","$post",387],["T_WHITESPACE"," ",387],"=",["T_WHITESPACE"," ",387],["T_ARRAY","array",387],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",387],["T_WHITESPACE"," ",387],["T_DOUBLE_ARROW","=>",387],["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'true'",387],")",";",["T_WHITESPACE","\n      ",387],["T_VARIABLE","$response",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","drupalPostWithFormat",388],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/entity\/'",388],["T_WHITESPACE"," ",388],".",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'node\/1'",388],",",["T_WHITESPACE"," ",388],["T_CONSTANT_ENCAPSED_STRING","'json'",388],",",["T_WHITESPACE"," ",388],["T_VARIABLE","$post",388],")",";",["T_WHITESPACE","\n      ",388],["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","assertResponse",389],"(",["T_LNUMBER","200",389],")",";",["T_WHITESPACE","\n      ",389],["T_VARIABLE","$ajax_commands",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_STRING","Json",390],["T_DOUBLE_COLON","::",390],["T_STRING","decode",390],"(",["T_VARIABLE","$response",390],")",";",["T_WHITESPACE","\n      ",390],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","assertIdentical",391],"(",["T_LNUMBER","1",391],",",["T_WHITESPACE"," ",391],["T_STRING","count",391],"(",["T_VARIABLE","$ajax_commands",391],")",",",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'The entity submission HTTP request results in one AJAX command.'",391],")",";",["T_WHITESPACE","\n      ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","assertIdentical",392],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditEntitySaved'",392],",",["T_WHITESPACE"," ",392],["T_VARIABLE","$ajax_commands",392],"[",["T_LNUMBER","0",392],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",392],"]",",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is n quickeditEntitySaved command.'",392],")",";",["T_WHITESPACE","\n      ",392],["T_VARIABLE","$this",393],["T_OBJECT_OPERATOR","->",393],["T_STRING","assertIdentical",393],"(",["T_VARIABLE","$ajax_commands",393],"[",["T_LNUMBER","0",393],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",393],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_type'",393],"]",",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'node'",393],",",["T_WHITESPACE"," ",393],["T_CONSTANT_ENCAPSED_STRING","'Saved entity is of type node.'",393],")",";",["T_WHITESPACE","\n      ",393],["T_VARIABLE","$this",394],["T_OBJECT_OPERATOR","->",394],["T_STRING","assertIdentical",394],"(",["T_VARIABLE","$ajax_commands",394],"[",["T_LNUMBER","0",394],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",394],"]","[",["T_CONSTANT_ENCAPSED_STRING","'entity_id'",394],"]",",",["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'1'",394],",",["T_WHITESPACE"," ",394],["T_CONSTANT_ENCAPSED_STRING","'Entity id is 1.'",394],")",";",["T_WHITESPACE","\n\n      ",394],["T_COMMENT","\/\/ Ensure the text on the original node did change.\n",396],["T_WHITESPACE","      ",397],["T_VARIABLE","$this",397],["T_OBJECT_OPERATOR","->",397],["T_STRING","drupalGet",397],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1'",397],")",";",["T_WHITESPACE","\n      ",397],["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","assertText",398],"(",["T_CONSTANT_ENCAPSED_STRING","'Obligatory question'",398],")",";",["T_WHITESPACE","\n    ",398],"}",["T_WHITESPACE","\n  ",399],"}",["T_WHITESPACE","\n\n  ",400],["T_DOC_COMMENT","\/**\n   * Tests that Quick Edit doesn't make fields rendered with display options\n   * editable.\n   *\/",402],["T_WHITESPACE","\n  ",405],["T_PUBLIC","public",406],["T_WHITESPACE"," ",406],["T_FUNCTION","function",406],["T_WHITESPACE"," ",406],["T_STRING","testDisplayOptions",406],"(",")",["T_WHITESPACE"," ",406],"{",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$node",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],["T_STRING","Node",407],["T_DOUBLE_COLON","::",407],["T_STRING","load",407],"(",["T_CONSTANT_ENCAPSED_STRING","'1'",407],")",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$display_settings",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_ARRAY","array",408],"(",["T_WHITESPACE","\n      ",408],["T_CONSTANT_ENCAPSED_STRING","'label'",409],["T_WHITESPACE"," ",409],["T_DOUBLE_ARROW","=>",409],["T_WHITESPACE"," ",409],["T_CONSTANT_ENCAPSED_STRING","'inline'",409],",",["T_WHITESPACE","\n    ",409],")",";",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$build",411],["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],["T_VARIABLE","$node",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","body",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","view",411],"(",["T_VARIABLE","$display_settings",411],")",";",["T_WHITESPACE","\n    ",411],["T_VARIABLE","$output",412],["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],["T_NS_SEPARATOR","\\",412],["T_STRING","Drupal",412],["T_DOUBLE_COLON","::",412],["T_STRING","service",412],"(",["T_CONSTANT_ENCAPSED_STRING","'renderer'",412],")",["T_OBJECT_OPERATOR","->",412],["T_STRING","renderRoot",412],"(",["T_VARIABLE","$build",412],")",";",["T_WHITESPACE","\n    ",412],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","assertFalse",413],"(",["T_STRING","strpos",413],"(",["T_VARIABLE","$output",413],",",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-field-id'",413],")",",",["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-field-id attribute not added when rendering field using dynamic display options.'",413],")",";",["T_WHITESPACE","\n  ",413],"}",["T_WHITESPACE","\n\n  ",414],["T_DOC_COMMENT","\/**\n   * Tests that Quick Edit works with custom render pipelines.\n   *\/",416],["T_WHITESPACE","\n  ",418],["T_PUBLIC","public",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","testCustomPipeline",419],"(",")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n    ",419],["T_NS_SEPARATOR","\\",420],["T_STRING","Drupal",420],["T_DOUBLE_COLON","::",420],["T_STRING","service",420],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",420],")",["T_OBJECT_OPERATOR","->",420],["T_STRING","install",420],"(",["T_ARRAY","array",420],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit_test'",420],")",")",";",["T_WHITESPACE","\n\n    ",420],["T_VARIABLE","$custom_render_url",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/node\/1\/body\/en\/quickedit_test-custom-render-data'",422],";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","drupalLogin",423],"(",["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","editorUser",423],")",";",["T_WHITESPACE","\n\n    ",423],["T_COMMENT","\/\/ Request editing to render results with the custom render pipeline.\n",425],["T_WHITESPACE","    ",426],["T_VARIABLE","$post",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_ARRAY","array",426],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'true'",426],")",["T_WHITESPACE"," ",426],"+",["T_WHITESPACE"," ",426],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getAjaxPageStatePostData",426],"(",")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$response",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","drupalPost",427],"(",["T_VARIABLE","$custom_render_url",427],",",["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","''",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$post",427],",",["T_WHITESPACE"," ",427],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],"[",["T_STRING","MainContentViewSubscriber",427],["T_DOUBLE_COLON","::",427],["T_STRING","WRAPPER_FORMAT",427],["T_WHITESPACE"," ",427],["T_DOUBLE_ARROW","=>",427],["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",427],"]","]",")",";",["T_WHITESPACE","\n    ",427],["T_VARIABLE","$ajax_commands",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_STRING","Json",428],["T_DOUBLE_COLON","::",428],["T_STRING","decode",428],"(",["T_VARIABLE","$response",428],")",";",["T_WHITESPACE","\n\n    ",428],["T_COMMENT","\/\/ Prepare form values for submission. drupalPostAJAX() is not suitable for\n",430],["T_WHITESPACE","    ",431],["T_COMMENT","\/\/ handling pages with JSON responses, so we need our own solution here.\n",431],["T_WHITESPACE","    ",432],["T_VARIABLE","$form_tokens_found",432],["T_WHITESPACE"," ",432],"=",["T_WHITESPACE"," ",432],["T_STRING","preg_match",432],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_token\" value=\"([^\"]+)\"\/'",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$ajax_commands",432],"[",["T_LNUMBER","0",432],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",432],"]",",",["T_WHITESPACE"," ",432],["T_VARIABLE","$token_match",432],")",["T_WHITESPACE"," ",432],["T_BOOLEAN_AND","&&",432],["T_WHITESPACE"," ",432],["T_STRING","preg_match",432],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_build_id\" value=\"([^\"]+)\"\/'",432],",",["T_WHITESPACE"," ",432],["T_VARIABLE","$ajax_commands",432],"[",["T_LNUMBER","0",432],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",432],"]",",",["T_WHITESPACE"," ",432],["T_VARIABLE","$build_id_match",432],")",";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","assertTrue",433],"(",["T_VARIABLE","$form_tokens_found",433],",",["T_WHITESPACE"," ",433],["T_CONSTANT_ENCAPSED_STRING","'Form tokens found in output.'",433],")",";",["T_WHITESPACE","\n\n    ",433],["T_IF","if",435],["T_WHITESPACE"," ",435],"(",["T_VARIABLE","$form_tokens_found",435],")",["T_WHITESPACE"," ",435],"{",["T_WHITESPACE","\n      ",435],["T_VARIABLE","$post",436],["T_WHITESPACE"," ",436],"=",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",["T_WHITESPACE","\n        ",436],["T_CONSTANT_ENCAPSED_STRING","'form_id'",437],["T_WHITESPACE"," ",437],["T_DOUBLE_ARROW","=>",437],["T_WHITESPACE"," ",437],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",437],",",["T_WHITESPACE","\n        ",437],["T_CONSTANT_ENCAPSED_STRING","'form_token'",438],["T_WHITESPACE"," ",438],["T_DOUBLE_ARROW","=>",438],["T_WHITESPACE"," ",438],["T_VARIABLE","$token_match",438],"[",["T_LNUMBER","1",438],"]",",",["T_WHITESPACE","\n        ",438],["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",439],["T_WHITESPACE"," ",439],["T_DOUBLE_ARROW","=>",439],["T_WHITESPACE"," ",439],["T_VARIABLE","$build_id_match",439],"[",["T_LNUMBER","1",439],"]",",",["T_WHITESPACE","\n        ",439],["T_CONSTANT_ENCAPSED_STRING","'body[0][summary]'",440],["T_WHITESPACE"," ",440],["T_DOUBLE_ARROW","=>",440],["T_WHITESPACE"," ",440],["T_CONSTANT_ENCAPSED_STRING","''",440],",",["T_WHITESPACE","\n        ",440],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",441],["T_WHITESPACE"," ",441],["T_DOUBLE_ARROW","=>",441],["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'<p>Fine thanks.<\/p>'",441],",",["T_WHITESPACE","\n        ",441],["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",442],["T_WHITESPACE"," ",442],["T_DOUBLE_ARROW","=>",442],["T_WHITESPACE"," ",442],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",442],",",["T_WHITESPACE","\n        ",442],["T_CONSTANT_ENCAPSED_STRING","'op'",443],["T_WHITESPACE"," ",443],["T_DOUBLE_ARROW","=>",443],["T_WHITESPACE"," ",443],["T_STRING","t",443],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",443],")",",",["T_WHITESPACE","\n      ",443],")",";",["T_WHITESPACE","\n      ",444],["T_COMMENT","\/\/ Assume there is another field on this page, which doesn't use a custom\n",445],["T_WHITESPACE","      ",446],["T_COMMENT","\/\/ render pipeline, but the default one, and it uses the \"full\" view mode.\n",446],["T_WHITESPACE","      ",447],["T_VARIABLE","$post",447],["T_WHITESPACE"," ",447],["T_PLUS_EQUAL","+=",447],["T_WHITESPACE"," ",447],["T_ARRAY","array",447],"(",["T_CONSTANT_ENCAPSED_STRING","'other_view_modes[]'",447],["T_WHITESPACE"," ",447],["T_DOUBLE_ARROW","=>",447],["T_WHITESPACE"," ",447],["T_CONSTANT_ENCAPSED_STRING","'full'",447],")",";",["T_WHITESPACE","\n\n      ",447],["T_COMMENT","\/\/ Submit field form and check response. Should render with the custom\n",449],["T_WHITESPACE","      ",450],["T_COMMENT","\/\/ render pipeline.\n",450],["T_WHITESPACE","      ",451],["T_VARIABLE","$response",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],["T_VARIABLE","$this",451],["T_OBJECT_OPERATOR","->",451],["T_STRING","drupalPost",451],"(",["T_VARIABLE","$custom_render_url",451],",",["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","''",451],",",["T_WHITESPACE"," ",451],["T_VARIABLE","$post",451],",",["T_WHITESPACE"," ",451],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],"[",["T_STRING","MainContentViewSubscriber",451],["T_DOUBLE_COLON","::",451],["T_STRING","WRAPPER_FORMAT",451],["T_WHITESPACE"," ",451],["T_DOUBLE_ARROW","=>",451],["T_WHITESPACE"," ",451],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",451],"]","]",")",";",["T_WHITESPACE","\n      ",451],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","assertResponse",452],"(",["T_LNUMBER","200",452],")",";",["T_WHITESPACE","\n      ",452],["T_VARIABLE","$ajax_commands",453],["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_STRING","Json",453],["T_DOUBLE_COLON","::",453],["T_STRING","decode",453],"(",["T_VARIABLE","$response",453],")",";",["T_WHITESPACE","\n      ",453],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","assertIdentical",454],"(",["T_LNUMBER","1",454],",",["T_WHITESPACE"," ",454],["T_STRING","count",454],"(",["T_VARIABLE","$ajax_commands",454],")",",",["T_WHITESPACE"," ",454],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in one AJAX command.'",454],")",";",["T_WHITESPACE","\n      ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","assertIdentical",455],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldFormSaved'",455],",",["T_WHITESPACE"," ",455],["T_VARIABLE","$ajax_commands",455],"[",["T_LNUMBER","0",455],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",455],"]",",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'The first AJAX command is a quickeditFieldFormSaved command.'",455],")",";",["T_WHITESPACE","\n      ",455],["T_VARIABLE","$this",456],["T_OBJECT_OPERATOR","->",456],["T_STRING","assertTrue",456],"(",["T_STRING","strpos",456],"(",["T_VARIABLE","$ajax_commands",456],"[",["T_LNUMBER","0",456],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",456],"]",",",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'Fine thanks.'",456],")",",",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'Form value saved and printed back.'",456],")",";",["T_WHITESPACE","\n      ",456],["T_VARIABLE","$this",457],["T_OBJECT_OPERATOR","->",457],["T_STRING","assertTrue",457],"(",["T_STRING","strpos",457],"(",["T_VARIABLE","$ajax_commands",457],"[",["T_LNUMBER","0",457],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",457],"]",",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'<div class=\"quickedit-test-wrapper\">'",457],")",["T_WHITESPACE"," ",457],["T_IS_NOT_IDENTICAL","!==",457],["T_WHITESPACE"," ",457],["T_STRING","FALSE",457],",",["T_WHITESPACE"," ",457],["T_CONSTANT_ENCAPSED_STRING","'Custom render pipeline used to render the value.'",457],")",";",["T_WHITESPACE","\n      ",457],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","assertIdentical",458],"(",["T_STRING","array_keys",458],"(",["T_VARIABLE","$ajax_commands",458],"[",["T_LNUMBER","0",458],"]","[",["T_CONSTANT_ENCAPSED_STRING","'other_view_modes'",458],"]",")",",",["T_WHITESPACE"," ",458],["T_ARRAY","array",458],"(",["T_CONSTANT_ENCAPSED_STRING","'full'",458],")",",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'Field was also rendered in the \"full\" view mode.'",458],")",";",["T_WHITESPACE","\n      ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","assertTrue",459],"(",["T_STRING","strpos",459],"(",["T_VARIABLE","$ajax_commands",459],"[",["T_LNUMBER","0",459],"]","[",["T_CONSTANT_ENCAPSED_STRING","'other_view_modes'",459],"]","[",["T_CONSTANT_ENCAPSED_STRING","'full'",459],"]",",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'Fine thanks.'",459],")",",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'\"full\" version of field contains the form value.'",459],")",";",["T_WHITESPACE","\n    ",459],"}",["T_WHITESPACE","\n  ",460],"}",["T_WHITESPACE","\n\n  ",461],["T_DOC_COMMENT","\/**\n   * Tests Quick Edit on a node that was concurrently edited on the full node\n   * form.\n   *\/",463],["T_WHITESPACE","\n  ",466],["T_PUBLIC","public",467],["T_WHITESPACE"," ",467],["T_FUNCTION","function",467],["T_WHITESPACE"," ",467],["T_STRING","testConcurrentEdit",467],"(",")",["T_WHITESPACE"," ",467],"{",["T_WHITESPACE","\n    ",467],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","drupalLogin",468],"(",["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","editorUser",468],")",";",["T_WHITESPACE","\n\n    ",468],["T_VARIABLE","$post",470],["T_WHITESPACE"," ",470],"=",["T_WHITESPACE"," ",470],["T_ARRAY","array",470],"(",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",470],["T_WHITESPACE"," ",470],["T_DOUBLE_ARROW","=>",470],["T_WHITESPACE"," ",470],["T_CONSTANT_ENCAPSED_STRING","'true'",470],")",["T_WHITESPACE"," ",470],"+",["T_WHITESPACE"," ",470],["T_VARIABLE","$this",470],["T_OBJECT_OPERATOR","->",470],["T_STRING","getAjaxPageStatePostData",470],"(",")",";",["T_WHITESPACE","\n    ",470],["T_VARIABLE","$response",471],["T_WHITESPACE"," ",471],"=",["T_WHITESPACE"," ",471],["T_VARIABLE","$this",471],["T_OBJECT_OPERATOR","->",471],["T_STRING","drupalPost",471],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",471],["T_WHITESPACE"," ",471],".",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",471],",",["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","''",471],",",["T_WHITESPACE"," ",471],["T_VARIABLE","$post",471],",",["T_WHITESPACE"," ",471],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",471],["T_WHITESPACE"," ",471],["T_DOUBLE_ARROW","=>",471],["T_WHITESPACE"," ",471],"[",["T_STRING","MainContentViewSubscriber",471],["T_DOUBLE_COLON","::",471],["T_STRING","WRAPPER_FORMAT",471],["T_WHITESPACE"," ",471],["T_DOUBLE_ARROW","=>",471],["T_WHITESPACE"," ",471],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",471],"]","]",")",";",["T_WHITESPACE","\n    ",471],["T_VARIABLE","$this",472],["T_OBJECT_OPERATOR","->",472],["T_STRING","assertResponse",472],"(",["T_LNUMBER","200",472],")",";",["T_WHITESPACE","\n    ",472],["T_VARIABLE","$ajax_commands",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_STRING","Json",473],["T_DOUBLE_COLON","::",473],["T_STRING","decode",473],"(",["T_VARIABLE","$response",473],")",";",["T_WHITESPACE","\n\n    ",473],["T_COMMENT","\/\/ Prepare form values for submission. drupalPostAJAX() is not suitable for\n",475],["T_WHITESPACE","    ",476],["T_COMMENT","\/\/ handling pages with JSON responses, so we need our own solution here.\n",476],["T_WHITESPACE","    ",477],["T_VARIABLE","$form_tokens_found",477],["T_WHITESPACE"," ",477],"=",["T_WHITESPACE"," ",477],["T_STRING","preg_match",477],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_token\" value=\"([^\"]+)\"\/'",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$ajax_commands",477],"[",["T_LNUMBER","0",477],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",477],"]",",",["T_WHITESPACE"," ",477],["T_VARIABLE","$token_match",477],")",["T_WHITESPACE"," ",477],["T_BOOLEAN_AND","&&",477],["T_WHITESPACE"," ",477],["T_STRING","preg_match",477],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\\sname=\"form_build_id\" value=\"([^\"]+)\"\/'",477],",",["T_WHITESPACE"," ",477],["T_VARIABLE","$ajax_commands",477],"[",["T_LNUMBER","0",477],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",477],"]",",",["T_WHITESPACE"," ",477],["T_VARIABLE","$build_id_match",477],")",";",["T_WHITESPACE","\n    ",477],["T_VARIABLE","$this",478],["T_OBJECT_OPERATOR","->",478],["T_STRING","assertTrue",478],"(",["T_VARIABLE","$form_tokens_found",478],",",["T_WHITESPACE"," ",478],["T_CONSTANT_ENCAPSED_STRING","'Form tokens found in output.'",478],")",";",["T_WHITESPACE","\n\n    ",478],["T_IF","if",480],["T_WHITESPACE"," ",480],"(",["T_VARIABLE","$form_tokens_found",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n      ",480],["T_VARIABLE","$post",481],["T_WHITESPACE"," ",481],"=",["T_WHITESPACE"," ",481],["T_ARRAY","array",481],"(",["T_WHITESPACE","\n        ",481],["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",482],["T_WHITESPACE"," ",482],["T_DOUBLE_ARROW","=>",482],["T_WHITESPACE"," ",482],["T_CONSTANT_ENCAPSED_STRING","'true'",482],",",["T_WHITESPACE","\n        ",482],["T_CONSTANT_ENCAPSED_STRING","'form_id'",483],["T_WHITESPACE"," ",483],["T_DOUBLE_ARROW","=>",483],["T_WHITESPACE"," ",483],["T_CONSTANT_ENCAPSED_STRING","'quickedit_field_form'",483],",",["T_WHITESPACE","\n        ",483],["T_CONSTANT_ENCAPSED_STRING","'form_token'",484],["T_WHITESPACE"," ",484],["T_DOUBLE_ARROW","=>",484],["T_WHITESPACE"," ",484],["T_VARIABLE","$token_match",484],"[",["T_LNUMBER","1",484],"]",",",["T_WHITESPACE","\n        ",484],["T_CONSTANT_ENCAPSED_STRING","'form_build_id'",485],["T_WHITESPACE"," ",485],["T_DOUBLE_ARROW","=>",485],["T_WHITESPACE"," ",485],["T_VARIABLE","$build_id_match",485],"[",["T_LNUMBER","1",485],"]",",",["T_WHITESPACE","\n        ",485],["T_CONSTANT_ENCAPSED_STRING","'body[0][summary]'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_CONSTANT_ENCAPSED_STRING","''",486],",",["T_WHITESPACE","\n        ",486],["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_CONSTANT_ENCAPSED_STRING","'<p>Fine thanks.<\/p>'",487],",",["T_WHITESPACE","\n        ",487],["T_CONSTANT_ENCAPSED_STRING","'body[0][format]'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_CONSTANT_ENCAPSED_STRING","'filtered_html'",488],",",["T_WHITESPACE","\n        ",488],["T_CONSTANT_ENCAPSED_STRING","'op'",489],["T_WHITESPACE"," ",489],["T_DOUBLE_ARROW","=>",489],["T_WHITESPACE"," ",489],["T_STRING","t",489],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",489],")",",",["T_WHITESPACE","\n      ",489],")",";",["T_WHITESPACE","\n\n      ",490],["T_COMMENT","\/\/ Save the node on the regular node edit form.\n",492],["T_WHITESPACE","      ",493],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","drupalPostForm",493],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit'",493],",",["T_WHITESPACE"," ",493],["T_ARRAY","array",493],"(",")",",",["T_WHITESPACE"," ",493],["T_STRING","t",493],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",493],")",")",";",["T_WHITESPACE","\n      ",493],["T_COMMENT","\/\/ Ensure different save timestamps for field editing.\n",494],["T_WHITESPACE","      ",495],["T_STRING","sleep",495],"(",["T_LNUMBER","2",495],")",";",["T_WHITESPACE","\n\n      ",495],["T_COMMENT","\/\/ Submit field form and check response. Should throw a validation error\n",497],["T_WHITESPACE","      ",498],["T_COMMENT","\/\/ because the node was changed in the meantime.\n",498],["T_WHITESPACE","      ",499],["T_VARIABLE","$response",499],["T_WHITESPACE"," ",499],"=",["T_WHITESPACE"," ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","drupalPost",499],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/'",499],["T_WHITESPACE"," ",499],".",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'node\/1\/body\/en\/full'",499],",",["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","''",499],",",["T_WHITESPACE"," ",499],["T_VARIABLE","$post",499],",",["T_WHITESPACE"," ",499],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],"[",["T_STRING","MainContentViewSubscriber",499],["T_DOUBLE_COLON","::",499],["T_STRING","WRAPPER_FORMAT",499],["T_WHITESPACE"," ",499],["T_DOUBLE_ARROW","=>",499],["T_WHITESPACE"," ",499],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",499],"]","]",")",";",["T_WHITESPACE","\n      ",499],["T_VARIABLE","$this",500],["T_OBJECT_OPERATOR","->",500],["T_STRING","assertResponse",500],"(",["T_LNUMBER","200",500],")",";",["T_WHITESPACE","\n      ",500],["T_VARIABLE","$ajax_commands",501],["T_WHITESPACE"," ",501],"=",["T_WHITESPACE"," ",501],["T_STRING","Json",501],["T_DOUBLE_COLON","::",501],["T_STRING","decode",501],"(",["T_VARIABLE","$response",501],")",";",["T_WHITESPACE","\n      ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","assertIdentical",502],"(",["T_LNUMBER","2",502],",",["T_WHITESPACE"," ",502],["T_STRING","count",502],"(",["T_VARIABLE","$ajax_commands",502],")",",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'The field form HTTP request results in two AJAX commands.'",502],")",";",["T_WHITESPACE","\n      ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","assertIdentical",503],"(",["T_CONSTANT_ENCAPSED_STRING","'quickeditFieldFormValidationErrors'",503],",",["T_WHITESPACE"," ",503],["T_VARIABLE","$ajax_commands",503],"[",["T_LNUMBER","1",503],"]","[",["T_CONSTANT_ENCAPSED_STRING","'command'",503],"]",",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'The second AJAX command is a quickeditFieldFormValidationErrors command.'",503],")",";",["T_WHITESPACE","\n      ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","assertTrue",504],"(",["T_STRING","strpos",504],"(",["T_VARIABLE","$ajax_commands",504],"[",["T_LNUMBER","1",504],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",504],"]",",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'The content has either been modified by another user, or you have already submitted modifications. As a result, your changes cannot be saved.'",504],")",",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'Error message returned to user.'",504],")",";",["T_WHITESPACE","\n    ",504],"}",["T_WHITESPACE","\n  ",505],"}",["T_WHITESPACE","\n\n  ",506],["T_DOC_COMMENT","\/**\n   * Tests that Quick Edit's data- attributes are present for content blocks.\n   *\/",508],["T_WHITESPACE","\n  ",510],["T_PUBLIC","public",511],["T_WHITESPACE"," ",511],["T_FUNCTION","function",511],["T_WHITESPACE"," ",511],["T_STRING","testContentBlock",511],"(",")",["T_WHITESPACE"," ",511],"{",["T_WHITESPACE","\n    ",511],["T_NS_SEPARATOR","\\",512],["T_STRING","Drupal",512],["T_DOUBLE_COLON","::",512],["T_STRING","service",512],"(",["T_CONSTANT_ENCAPSED_STRING","'module_installer'",512],")",["T_OBJECT_OPERATOR","->",512],["T_STRING","install",512],"(",["T_ARRAY","array",512],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content'",512],")",")",";",["T_WHITESPACE","\n\n    ",512],["T_COMMENT","\/\/ Create and place a content_block block.\n",514],["T_WHITESPACE","    ",515],["T_VARIABLE","$block",515],["T_WHITESPACE"," ",515],"=",["T_WHITESPACE"," ",515],["T_STRING","BlockContent",515],["T_DOUBLE_COLON","::",515],["T_STRING","create",515],"(","[",["T_WHITESPACE","\n      ",515],["T_CONSTANT_ENCAPSED_STRING","'info'",516],["T_WHITESPACE"," ",516],["T_DOUBLE_ARROW","=>",516],["T_WHITESPACE"," ",516],["T_VARIABLE","$this",516],["T_OBJECT_OPERATOR","->",516],["T_STRING","randomMachineName",516],"(",")",",",["T_WHITESPACE","\n      ",516],["T_CONSTANT_ENCAPSED_STRING","'type'",517],["T_WHITESPACE"," ",517],["T_DOUBLE_ARROW","=>",517],["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'basic'",517],",",["T_WHITESPACE","\n      ",517],["T_CONSTANT_ENCAPSED_STRING","'langcode'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'en'",518],",",["T_WHITESPACE","\n    ",518],"]",")",";",["T_WHITESPACE","\n    ",519],["T_VARIABLE","$block",520],["T_OBJECT_OPERATOR","->",520],["T_STRING","save",520],"(",")",";",["T_WHITESPACE","\n    ",520],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","drupalPlaceBlock",521],"(",["T_CONSTANT_ENCAPSED_STRING","'block_content:'",521],["T_WHITESPACE"," ",521],".",["T_WHITESPACE"," ",521],["T_VARIABLE","$block",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","uuid",521],"(",")",")",";",["T_WHITESPACE","\n\n    ",521],["T_COMMENT","\/\/ Check that the data- attribute is present.\n",523],["T_WHITESPACE","    ",524],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","drupalLogin",524],"(",["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","editorUser",524],")",";",["T_WHITESPACE","\n    ",524],["T_VARIABLE","$this",525],["T_OBJECT_OPERATOR","->",525],["T_STRING","drupalGet",525],"(",["T_CONSTANT_ENCAPSED_STRING","''",525],")",";",["T_WHITESPACE","\n    ",525],["T_VARIABLE","$this",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","assertRaw",526],"(",["T_CONSTANT_ENCAPSED_STRING","'data-quickedit-entity-id=\"block_content\/1\"'",526],")",";",["T_WHITESPACE","\n  ",526],"}",["T_WHITESPACE","\n\n  ",527],["T_DOC_COMMENT","\/**\n   * Tests that Quick Edit can handle an image field.\n   *\/",529],["T_WHITESPACE","\n  ",531],["T_PUBLIC","public",532],["T_WHITESPACE"," ",532],["T_FUNCTION","function",532],["T_WHITESPACE"," ",532],["T_STRING","testImageField",532],"(",")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n    ",532],["T_COMMENT","\/\/ Add an image field to the content type.\n",533],["T_WHITESPACE","    ",534],["T_STRING","FieldStorageConfig",534],["T_DOUBLE_COLON","::",534],["T_STRING","create",534],"(","[",["T_WHITESPACE","\n      ",534],["T_CONSTANT_ENCAPSED_STRING","'field_name'",535],["T_WHITESPACE"," ",535],["T_DOUBLE_ARROW","=>",535],["T_WHITESPACE"," ",535],["T_CONSTANT_ENCAPSED_STRING","'field_image'",535],",",["T_WHITESPACE","\n      ",535],["T_CONSTANT_ENCAPSED_STRING","'type'",536],["T_WHITESPACE"," ",536],["T_DOUBLE_ARROW","=>",536],["T_WHITESPACE"," ",536],["T_CONSTANT_ENCAPSED_STRING","'image'",536],",",["T_WHITESPACE","\n      ",536],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",537],["T_WHITESPACE"," ",537],["T_DOUBLE_ARROW","=>",537],["T_WHITESPACE"," ",537],["T_CONSTANT_ENCAPSED_STRING","'node'",537],",",["T_WHITESPACE","\n    ",537],"]",")",["T_OBJECT_OPERATOR","->",538],["T_STRING","save",538],"(",")",";",["T_WHITESPACE","\n    ",538],["T_STRING","FieldConfig",539],["T_DOUBLE_COLON","::",539],["T_STRING","create",539],"(","[",["T_WHITESPACE","\n      ",539],["T_CONSTANT_ENCAPSED_STRING","'field_name'",540],["T_WHITESPACE"," ",540],["T_DOUBLE_ARROW","=>",540],["T_WHITESPACE"," ",540],["T_CONSTANT_ENCAPSED_STRING","'field_image'",540],",",["T_WHITESPACE","\n      ",540],["T_CONSTANT_ENCAPSED_STRING","'field_type'",541],["T_WHITESPACE"," ",541],["T_DOUBLE_ARROW","=>",541],["T_WHITESPACE"," ",541],["T_CONSTANT_ENCAPSED_STRING","'image'",541],",",["T_WHITESPACE","\n      ",541],["T_CONSTANT_ENCAPSED_STRING","'label'",542],["T_WHITESPACE"," ",542],["T_DOUBLE_ARROW","=>",542],["T_WHITESPACE"," ",542],["T_STRING","t",542],"(",["T_CONSTANT_ENCAPSED_STRING","'Image'",542],")",",",["T_WHITESPACE","\n      ",542],["T_CONSTANT_ENCAPSED_STRING","'entity_type'",543],["T_WHITESPACE"," ",543],["T_DOUBLE_ARROW","=>",543],["T_WHITESPACE"," ",543],["T_CONSTANT_ENCAPSED_STRING","'node'",543],",",["T_WHITESPACE","\n      ",543],["T_CONSTANT_ENCAPSED_STRING","'bundle'",544],["T_WHITESPACE"," ",544],["T_DOUBLE_ARROW","=>",544],["T_WHITESPACE"," ",544],["T_CONSTANT_ENCAPSED_STRING","'article'",544],",",["T_WHITESPACE","\n    ",544],"]",")",["T_OBJECT_OPERATOR","->",545],["T_STRING","save",545],"(",")",";",["T_WHITESPACE","\n    ",545],["T_STRING","entity_get_form_display",546],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",546],",",["T_WHITESPACE"," ",546],["T_CONSTANT_ENCAPSED_STRING","'article'",546],",",["T_WHITESPACE"," ",546],["T_CONSTANT_ENCAPSED_STRING","'default'",546],")",["T_WHITESPACE","\n      ",546],["T_OBJECT_OPERATOR","->",547],["T_STRING","setComponent",547],"(",["T_CONSTANT_ENCAPSED_STRING","'field_image'",547],",",["T_WHITESPACE"," ",547],"[",["T_WHITESPACE","\n        ",547],["T_CONSTANT_ENCAPSED_STRING","'type'",548],["T_WHITESPACE"," ",548],["T_DOUBLE_ARROW","=>",548],["T_WHITESPACE"," ",548],["T_CONSTANT_ENCAPSED_STRING","'image_image'",548],",",["T_WHITESPACE","\n      ",548],"]",")",["T_WHITESPACE","\n      ",549],["T_OBJECT_OPERATOR","->",550],["T_STRING","save",550],"(",")",";",["T_WHITESPACE","\n\n    ",550],["T_COMMENT","\/\/ Add an image to the node.\n",552],["T_WHITESPACE","    ",553],["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","drupalLogin",553],"(",["T_VARIABLE","$this",553],["T_OBJECT_OPERATOR","->",553],["T_STRING","editorUser",553],")",";",["T_WHITESPACE","\n    ",553],["T_VARIABLE","$image",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$this",554],["T_OBJECT_OPERATOR","->",554],["T_STRING","drupalGetTestFiles",554],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",554],")","[",["T_LNUMBER","0",554],"]",";",["T_WHITESPACE","\n    ",554],["T_VARIABLE","$this",555],["T_OBJECT_OPERATOR","->",555],["T_STRING","drupalPostForm",555],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/1\/edit'",555],",",["T_WHITESPACE"," ",555],"[",["T_WHITESPACE","\n      ",555],["T_CONSTANT_ENCAPSED_STRING","'files[field_image_0]'",556],["T_WHITESPACE"," ",556],["T_DOUBLE_ARROW","=>",556],["T_WHITESPACE"," ",556],["T_VARIABLE","$image",556],["T_OBJECT_OPERATOR","->",556],["T_STRING","uri",556],",",["T_WHITESPACE","\n    ",556],"]",",",["T_WHITESPACE"," ",557],["T_STRING","t",557],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",557],")",")",";",["T_WHITESPACE","\n    ",557],["T_VARIABLE","$this",558],["T_OBJECT_OPERATOR","->",558],["T_STRING","drupalPostForm",558],"(",["T_STRING","NULL",558],",",["T_WHITESPACE"," ",558],"[",["T_WHITESPACE","\n      ",558],["T_CONSTANT_ENCAPSED_STRING","'field_image[0][alt]'",559],["T_WHITESPACE"," ",559],["T_DOUBLE_ARROW","=>",559],["T_WHITESPACE"," ",559],["T_CONSTANT_ENCAPSED_STRING","'Vivamus aliquet elit'",559],",",["T_WHITESPACE","\n    ",559],"]",",",["T_WHITESPACE"," ",560],["T_STRING","t",560],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",560],")",")",";",["T_WHITESPACE","\n\n    ",560],["T_COMMENT","\/\/ The image field form should load normally.\n",562],["T_WHITESPACE","    ",563],["T_VARIABLE","$response",563],["T_WHITESPACE"," ",563],"=",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","drupalPost",563],"(",["T_CONSTANT_ENCAPSED_STRING","'quickedit\/form\/node\/1\/field_image\/en\/full'",563],",",["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","''",563],",",["T_WHITESPACE"," ",563],"[",["T_CONSTANT_ENCAPSED_STRING","'nocssjs'",563],["T_WHITESPACE"," ",563],["T_DOUBLE_ARROW","=>",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'true'",563],"]",["T_WHITESPACE"," ",563],"+",["T_WHITESPACE"," ",563],["T_VARIABLE","$this",563],["T_OBJECT_OPERATOR","->",563],["T_STRING","getAjaxPageStatePostData",563],"(",")",",",["T_WHITESPACE"," ",563],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",563],["T_WHITESPACE"," ",563],["T_DOUBLE_ARROW","=>",563],["T_WHITESPACE"," ",563],"[",["T_STRING","MainContentViewSubscriber",563],["T_DOUBLE_COLON","::",563],["T_STRING","WRAPPER_FORMAT",563],["T_WHITESPACE"," ",563],["T_DOUBLE_ARROW","=>",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'drupal_ajax'",563],"]","]",")",";",["T_WHITESPACE","\n    ",563],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","assertResponse",564],"(",["T_LNUMBER","200",564],")",";",["T_WHITESPACE","\n    ",564],["T_VARIABLE","$ajax_commands",565],["T_WHITESPACE"," ",565],"=",["T_WHITESPACE"," ",565],["T_STRING","Json",565],["T_DOUBLE_COLON","::",565],["T_STRING","decode",565],"(",["T_VARIABLE","$response",565],")",";",["T_WHITESPACE","\n    ",565],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","assertIdentical",566],"(",["T_CONSTANT_ENCAPSED_STRING","'<form '",566],",",["T_WHITESPACE"," ",566],["T_STRING","Unicode",566],["T_DOUBLE_COLON","::",566],["T_STRING","substr",566],"(",["T_VARIABLE","$ajax_commands",566],"[",["T_LNUMBER","0",566],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data'",566],"]",",",["T_WHITESPACE"," ",566],["T_LNUMBER","0",566],",",["T_WHITESPACE"," ",566],["T_LNUMBER","6",566],")",",",["T_WHITESPACE"," ",566],["T_CONSTANT_ENCAPSED_STRING","'The quickeditFieldForm command contains a form.'",566],")",";",["T_WHITESPACE","\n  ",566],"}",["T_WHITESPACE","\n\n",567],"}",["T_WHITESPACE","\n",569]]
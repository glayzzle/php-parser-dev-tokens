[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MigrateExecutable",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrateIdMapInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Row",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","taxonomy",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Entity",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Term",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","taxonomy",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Entity",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Vocabulary",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests rolling back of imports.\n *\n * @group migrate\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","MigrateRollbackTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","MigrateTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[",["T_CONSTANT_ENCAPSED_STRING","'field'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'text'",23],"]",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","setUp",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_STRING","parent",29],["T_DOUBLE_COLON","::",29],["T_STRING","setUp",29],"(",")",";",["T_WHITESPACE","\n    ",29],["T_VARIABLE","$this",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","installEntitySchema",30],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_vocabulary'",30],")",";",["T_WHITESPACE","\n    ",30],["T_VARIABLE","$this",31],["T_OBJECT_OPERATOR","->",31],["T_STRING","installEntitySchema",31],"(",["T_CONSTANT_ENCAPSED_STRING","'taxonomy_term'",31],")",";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","installConfig",32],"(","[",["T_CONSTANT_ENCAPSED_STRING","'taxonomy'",32],"]",")",";",["T_WHITESPACE","\n  ",32],"}",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Tests rolling back configuration and content entities.\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_PUBLIC","public",38],["T_WHITESPACE"," ",38],["T_FUNCTION","function",38],["T_WHITESPACE"," ",38],["T_STRING","testRollback",38],"(",")",["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n    ",38],["T_COMMENT","\/\/ We use vocabularies to demonstrate importing and rolling back\n",39],["T_WHITESPACE","    ",40],["T_COMMENT","\/\/ configuration entities.\n",40],["T_WHITESPACE","    ",41],["T_VARIABLE","$vocabulary_data_rows",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],"[",["T_WHITESPACE","\n      ",41],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'1'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'name'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'categories'",42],",",["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'weight'",42],["T_WHITESPACE"," ",42],["T_DOUBLE_ARROW","=>",42],["T_WHITESPACE"," ",42],["T_CONSTANT_ENCAPSED_STRING","'2'",42],"]",",",["T_WHITESPACE","\n      ",42],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'2'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'name'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'tags'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'weight'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'1'",43],"]",",",["T_WHITESPACE","\n    ",43],"]",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$ids",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'integer'",45],"]","]",";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$definition",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],"[",["T_WHITESPACE","\n      ",46],["T_CONSTANT_ENCAPSED_STRING","'id'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'vocabularies'",47],",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'Import and rollback test'",48],"]",",",["T_WHITESPACE","\n      ",48],["T_CONSTANT_ENCAPSED_STRING","'source'",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n        ",49],["T_CONSTANT_ENCAPSED_STRING","'plugin'",50],["T_WHITESPACE"," ",50],["T_DOUBLE_ARROW","=>",50],["T_WHITESPACE"," ",50],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",50],",",["T_WHITESPACE","\n        ",50],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",51],["T_WHITESPACE"," ",51],["T_DOUBLE_ARROW","=>",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$vocabulary_data_rows",51],",",["T_WHITESPACE","\n        ",51],["T_CONSTANT_ENCAPSED_STRING","'ids'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_VARIABLE","$ids",52],",",["T_WHITESPACE","\n      ",52],"]",",",["T_WHITESPACE","\n      ",53],["T_CONSTANT_ENCAPSED_STRING","'process'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],"[",["T_WHITESPACE","\n        ",54],["T_CONSTANT_ENCAPSED_STRING","'vid'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_CONSTANT_ENCAPSED_STRING","'id'",55],",",["T_WHITESPACE","\n        ",55],["T_CONSTANT_ENCAPSED_STRING","'name'",56],["T_WHITESPACE"," ",56],["T_DOUBLE_ARROW","=>",56],["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'name'",56],",",["T_WHITESPACE","\n        ",56],["T_CONSTANT_ENCAPSED_STRING","'weight'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'weight'",57],",",["T_WHITESPACE","\n      ",57],"]",",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'destination'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'entity:taxonomy_vocabulary'",59],"]",",",["T_WHITESPACE","\n    ",59],"]",";",["T_WHITESPACE","\n\n    ",60],["T_VARIABLE","$vocabulary_migration",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_NS_SEPARATOR","\\",62],["T_STRING","Drupal",62],["T_DOUBLE_COLON","::",62],["T_STRING","service",62],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",62],")",["T_OBJECT_OPERATOR","->",62],["T_STRING","createStubMigration",62],"(",["T_VARIABLE","$definition",62],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$vocabulary_id_map",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$vocabulary_migration",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getIdMap",63],"(",")",";",["T_WHITESPACE","\n\n    ",63],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertTrue",65],"(",["T_VARIABLE","$vocabulary_migration",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getDestinationPlugin",65],"(",")",["T_OBJECT_OPERATOR","->",65],["T_STRING","supportsRollback",65],"(",")",")",";",["T_WHITESPACE","\n\n    ",65],["T_COMMENT","\/\/ Import and validate vocabulary config entities were created.\n",67],["T_WHITESPACE","    ",68],["T_VARIABLE","$vocabulary_executable",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_NEW","new",68],["T_WHITESPACE"," ",68],["T_STRING","MigrateExecutable",68],"(",["T_VARIABLE","$vocabulary_migration",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$vocabulary_executable",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","import",69],"(",")",";",["T_WHITESPACE","\n    ",69],["T_FOREACH","foreach",70],["T_WHITESPACE"," ",70],"(",["T_VARIABLE","$vocabulary_data_rows",70],["T_WHITESPACE"," ",70],["T_AS","as",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$row",70],")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n      ",70],["T_DOC_COMMENT","\/** @var Vocabulary $vocabulary *\/",71],["T_WHITESPACE","\n      ",71],["T_VARIABLE","$vocabulary",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","Vocabulary",72],["T_DOUBLE_COLON","::",72],["T_STRING","load",72],"(",["T_VARIABLE","$row",72],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",72],"]",")",";",["T_WHITESPACE","\n      ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertTrue",73],"(",["T_VARIABLE","$vocabulary",73],")",";",["T_WHITESPACE","\n      ",73],["T_VARIABLE","$map_row",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_VARIABLE","$vocabulary_id_map",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","getRowBySource",74],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_VARIABLE","$row",74],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",74],"]","]",")",";",["T_WHITESPACE","\n      ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","assertNotNull",75],"(",["T_VARIABLE","$map_row",75],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",75],"]",")",";",["T_WHITESPACE","\n    ",75],"}",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ We use taxonomy terms to demonstrate importing and rolling back content\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/ entities.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$term_data_rows",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[",["T_WHITESPACE","\n      ",80],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'1'",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'vocab'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'1'",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'name'",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'music'",81],"]",",",["T_WHITESPACE","\n      ",81],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'2'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'vocab'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'2'",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'name'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'Bach'",82],"]",",",["T_WHITESPACE","\n      ",82],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'3'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'vocab'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'2'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'name'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'Beethoven'",83],"]",",",["T_WHITESPACE","\n    ",83],"]",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$ids",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",85],["T_WHITESPACE"," ",85],["T_DOUBLE_ARROW","=>",85],["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'integer'",85],"]","]",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$definition",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n      ",86],["T_CONSTANT_ENCAPSED_STRING","'id'",87],["T_WHITESPACE"," ",87],["T_DOUBLE_ARROW","=>",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'terms'",87],",",["T_WHITESPACE","\n      ",87],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",88],["T_WHITESPACE"," ",88],["T_DOUBLE_ARROW","=>",88],["T_WHITESPACE"," ",88],"[",["T_CONSTANT_ENCAPSED_STRING","'Import and rollback test'",88],"]",",",["T_WHITESPACE","\n      ",88],["T_CONSTANT_ENCAPSED_STRING","'source'",89],["T_WHITESPACE"," ",89],["T_DOUBLE_ARROW","=>",89],["T_WHITESPACE"," ",89],"[",["T_WHITESPACE","\n        ",89],["T_CONSTANT_ENCAPSED_STRING","'plugin'",90],["T_WHITESPACE"," ",90],["T_DOUBLE_ARROW","=>",90],["T_WHITESPACE"," ",90],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",90],",",["T_WHITESPACE","\n        ",90],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_VARIABLE","$term_data_rows",91],",",["T_WHITESPACE","\n        ",91],["T_CONSTANT_ENCAPSED_STRING","'ids'",92],["T_WHITESPACE"," ",92],["T_DOUBLE_ARROW","=>",92],["T_WHITESPACE"," ",92],["T_VARIABLE","$ids",92],",",["T_WHITESPACE","\n      ",92],"]",",",["T_WHITESPACE","\n      ",93],["T_CONSTANT_ENCAPSED_STRING","'process'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],"[",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'tid'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'id'",95],",",["T_WHITESPACE","\n        ",95],["T_CONSTANT_ENCAPSED_STRING","'vid'",96],["T_WHITESPACE"," ",96],["T_DOUBLE_ARROW","=>",96],["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'vocab'",96],",",["T_WHITESPACE","\n        ",96],["T_CONSTANT_ENCAPSED_STRING","'name'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'name'",97],",",["T_WHITESPACE","\n      ",97],"]",",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'destination'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'entity:taxonomy_term'",99],"]",",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'migration_dependencies'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],"[",["T_CONSTANT_ENCAPSED_STRING","'vocabularies'",100],"]","]",",",["T_WHITESPACE","\n    ",100],"]",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$term_migration",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_NS_SEPARATOR","\\",103],["T_STRING","Drupal",103],["T_DOUBLE_COLON","::",103],["T_STRING","service",103],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","createStubMigration",103],"(",["T_VARIABLE","$definition",103],")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$term_id_map",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$term_migration",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getIdMap",104],"(",")",";",["T_WHITESPACE","\n\n    ",104],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertTrue",106],"(",["T_VARIABLE","$term_migration",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getDestinationPlugin",106],"(",")",["T_OBJECT_OPERATOR","->",106],["T_STRING","supportsRollback",106],"(",")",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Pre-create a term, to make sure it isn't deleted on rollback.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$preserved_term_ids",109],"[","]",["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_LNUMBER","1",109],";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$new_term",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_STRING","Term",110],["T_DOUBLE_COLON","::",110],["T_STRING","create",110],"(","[",["T_CONSTANT_ENCAPSED_STRING","'tid'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'vid'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_LNUMBER","1",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'name'",110],["T_WHITESPACE"," ",110],["T_DOUBLE_ARROW","=>",110],["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'music'",110],"]",")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$new_term",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Import and validate term entities were created.\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$term_executable",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_NEW","new",114],["T_WHITESPACE"," ",114],["T_STRING","MigrateExecutable",114],"(",["T_VARIABLE","$term_migration",114],",",["T_WHITESPACE"," ",114],["T_VARIABLE","$this",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$term_executable",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","import",115],"(",")",";",["T_WHITESPACE","\n    ",115],["T_COMMENT","\/\/ Also explicitly mark one row to be preserved on rollback.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$preserved_term_ids",117],"[","]",["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],["T_LNUMBER","2",117],";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$map_row",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$term_id_map",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","getRowBySource",118],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","2",118],"]",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$dummy_row",119],["T_WHITESPACE"," ",119],"=",["T_WHITESPACE"," ",119],["T_NEW","new",119],["T_WHITESPACE"," ",119],["T_STRING","Row",119],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_LNUMBER","2",119],"]",",",["T_WHITESPACE"," ",119],["T_VARIABLE","$ids",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$term_id_map",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","saveIdMapping",120],"(",["T_VARIABLE","$dummy_row",120],",",["T_WHITESPACE"," ",120],"[",["T_VARIABLE","$map_row",120],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",120],"]","]",",",["T_WHITESPACE","\n      ",120],["T_VARIABLE","$map_row",121],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",121],"]",",",["T_WHITESPACE"," ",121],["T_STRING","MigrateIdMapInterface",121],["T_DOUBLE_COLON","::",121],["T_STRING","ROLLBACK_PRESERVE",121],")",";",["T_WHITESPACE","\n\n    ",121],["T_FOREACH","foreach",123],["T_WHITESPACE"," ",123],"(",["T_VARIABLE","$term_data_rows",123],["T_WHITESPACE"," ",123],["T_AS","as",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$row",123],")",["T_WHITESPACE"," ",123],"{",["T_WHITESPACE","\n      ",123],["T_DOC_COMMENT","\/** @var Term $term *\/",124],["T_WHITESPACE","\n      ",124],["T_VARIABLE","$term",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_STRING","Term",125],["T_DOUBLE_COLON","::",125],["T_STRING","load",125],"(",["T_VARIABLE","$row",125],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",125],"]",")",";",["T_WHITESPACE","\n      ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertTrue",126],"(",["T_VARIABLE","$term",126],")",";",["T_WHITESPACE","\n      ",126],["T_VARIABLE","$map_row",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$term_id_map",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","getRowBySource",127],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$row",127],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",127],"]","]",")",";",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertNotNull",128],"(",["T_VARIABLE","$map_row",128],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",128],"]",")",";",["T_WHITESPACE","\n    ",128],"}",["T_WHITESPACE","\n\n    ",129],["T_COMMENT","\/\/ Add a failed row to test if this can be rolled back without errors.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","mockFailure",132],"(",["T_VARIABLE","$term_migration",132],",",["T_WHITESPACE"," ",132],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'4'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'vocab'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'2'",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'name'",132],["T_WHITESPACE"," ",132],["T_DOUBLE_ARROW","=>",132],["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'FAIL'",132],"]",")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Rollback and verify the entities are gone.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$term_executable",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","rollback",135],"(",")",";",["T_WHITESPACE","\n    ",135],["T_FOREACH","foreach",136],["T_WHITESPACE"," ",136],"(",["T_VARIABLE","$term_data_rows",136],["T_WHITESPACE"," ",136],["T_AS","as",136],["T_WHITESPACE"," ",136],["T_VARIABLE","$row",136],")",["T_WHITESPACE"," ",136],"{",["T_WHITESPACE","\n      ",136],["T_VARIABLE","$term",137],["T_WHITESPACE"," ",137],"=",["T_WHITESPACE"," ",137],["T_STRING","Term",137],["T_DOUBLE_COLON","::",137],["T_STRING","load",137],"(",["T_VARIABLE","$row",137],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",137],"]",")",";",["T_WHITESPACE","\n      ",137],["T_IF","if",138],["T_WHITESPACE"," ",138],"(",["T_STRING","in_array",138],"(",["T_VARIABLE","$row",138],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",138],"]",",",["T_WHITESPACE"," ",138],["T_VARIABLE","$preserved_term_ids",138],")",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n        ",138],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertNotNull",139],"(",["T_VARIABLE","$term",139],")",";",["T_WHITESPACE","\n      ",139],"}",["T_WHITESPACE","\n      ",140],["T_ELSE","else",141],["T_WHITESPACE"," ",141],"{",["T_WHITESPACE","\n        ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertNull",142],"(",["T_VARIABLE","$term",142],")",";",["T_WHITESPACE","\n      ",142],"}",["T_WHITESPACE","\n      ",143],["T_VARIABLE","$map_row",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_VARIABLE","$term_id_map",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getRowBySource",144],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$row",144],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",144],"]","]",")",";",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","assertFalse",145],"(",["T_VARIABLE","$map_row",145],")",";",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_VARIABLE","$vocabulary_executable",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","rollback",147],"(",")",";",["T_WHITESPACE","\n    ",147],["T_FOREACH","foreach",148],["T_WHITESPACE"," ",148],"(",["T_VARIABLE","$vocabulary_data_rows",148],["T_WHITESPACE"," ",148],["T_AS","as",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$row",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n      ",148],["T_VARIABLE","$term",149],["T_WHITESPACE"," ",149],"=",["T_WHITESPACE"," ",149],["T_STRING","Vocabulary",149],["T_DOUBLE_COLON","::",149],["T_STRING","load",149],"(",["T_VARIABLE","$row",149],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",149],"]",")",";",["T_WHITESPACE","\n      ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertNull",150],"(",["T_VARIABLE","$term",150],")",";",["T_WHITESPACE","\n      ",150],["T_VARIABLE","$map_row",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$vocabulary_id_map",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getRowBySource",151],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$row",151],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",151],"]","]",")",";",["T_WHITESPACE","\n      ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertFalse",152],"(",["T_VARIABLE","$map_row",152],")",";",["T_WHITESPACE","\n    ",152],"}",["T_WHITESPACE","\n\n    ",153],["T_COMMENT","\/\/ Test that simple configuration is not rollbackable.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$term_setting_rows",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],"[",["T_WHITESPACE","\n      ",156],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_LNUMBER","1",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'override_selector'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'0'",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'terms_per_page_admin'",157],["T_WHITESPACE"," ",157],["T_DOUBLE_ARROW","=>",157],["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'10'",157],"]",",",["T_WHITESPACE","\n    ",157],"]",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$ids",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'integer'",159],"]","]",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$definition",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],"[",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'id'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'taxonomy_settings'",161],",",["T_WHITESPACE","\n      ",161],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",162],["T_WHITESPACE"," ",162],["T_DOUBLE_ARROW","=>",162],["T_WHITESPACE"," ",162],"[",["T_CONSTANT_ENCAPSED_STRING","'Import and rollback test'",162],"]",",",["T_WHITESPACE","\n      ",162],["T_CONSTANT_ENCAPSED_STRING","'source'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],"[",["T_WHITESPACE","\n        ",163],["T_CONSTANT_ENCAPSED_STRING","'plugin'",164],["T_WHITESPACE"," ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",164],",",["T_WHITESPACE","\n        ",164],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$term_setting_rows",165],",",["T_WHITESPACE","\n        ",165],["T_CONSTANT_ENCAPSED_STRING","'ids'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$ids",166],",",["T_WHITESPACE","\n      ",166],"]",",",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'process'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],"[",["T_WHITESPACE","\n        ",168],["T_CONSTANT_ENCAPSED_STRING","'override_selector'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_CONSTANT_ENCAPSED_STRING","'override_selector'",169],",",["T_WHITESPACE","\n        ",169],["T_CONSTANT_ENCAPSED_STRING","'terms_per_page_admin'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'terms_per_page_admin'",170],",",["T_WHITESPACE","\n      ",170],"]",",",["T_WHITESPACE","\n      ",171],["T_CONSTANT_ENCAPSED_STRING","'destination'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],"[",["T_WHITESPACE","\n        ",172],["T_CONSTANT_ENCAPSED_STRING","'plugin'",173],["T_WHITESPACE"," ",173],["T_DOUBLE_ARROW","=>",173],["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'config'",173],",",["T_WHITESPACE","\n        ",173],["T_CONSTANT_ENCAPSED_STRING","'config_name'",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_CONSTANT_ENCAPSED_STRING","'taxonomy.settings'",174],",",["T_WHITESPACE","\n      ",174],"]",",",["T_WHITESPACE","\n      ",175],["T_CONSTANT_ENCAPSED_STRING","'migration_dependencies'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],"[",["T_CONSTANT_ENCAPSED_STRING","'required'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],"[",["T_CONSTANT_ENCAPSED_STRING","'vocabularies'",176],"]","]",",",["T_WHITESPACE","\n    ",176],"]",";",["T_WHITESPACE","\n\n    ",177],["T_VARIABLE","$settings_migration",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_NS_SEPARATOR","\\",179],["T_STRING","Drupal",179],["T_DOUBLE_COLON","::",179],["T_STRING","service",179],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","createStubMigration",179],"(",["T_VARIABLE","$definition",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertFalse",180],"(",["T_VARIABLE","$settings_migration",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","getDestinationPlugin",180],"(",")",["T_OBJECT_OPERATOR","->",180],["T_STRING","supportsRollback",180],"(",")",")",";",["T_WHITESPACE","\n  ",180],"}",["T_WHITESPACE","\n\n",181],"}",["T_WHITESPACE","\n",183]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Unit",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the \\Drupal\\migrate\\MigrateExecutable::memoryExceeded() method.\n *\n * @group migrate\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","MigrateExecutableMemoryExceededTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","MigrateTestCase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * The mocked migration entity.\n   *\n   * @var \\Drupal\\migrate\\Plugin\\MigrationInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PROTECTED","protected",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$migration",17],";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * The mocked migrate message.\n   *\n   * @var \\Drupal\\migrate\\MigrateMessageInterface|\\PHPUnit_Framework_MockObject_MockObject\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$message",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * The tested migrate executable.\n   *\n   * @var \\Drupal\\Tests\\migrate\\Unit\\TestMigrateExecutable\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PROTECTED","protected",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$executable",31],";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * The migration configuration, initialized to set the ID to test.\n   *\n   * @var array\n   *\/",33],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$migrationConfiguration",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_WHITESPACE","\n    ",38],["T_CONSTANT_ENCAPSED_STRING","'id'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'test'",39],",",["T_WHITESPACE","\n  ",39],")",";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * The php.ini memory_limit value.\n   *\n   * @var int\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$memoryLimit",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_LNUMBER","10000000",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",49],["T_WHITESPACE","\n  ",51],["T_PROTECTED","protected",52],["T_WHITESPACE"," ",52],["T_FUNCTION","function",52],["T_WHITESPACE"," ",52],["T_STRING","setUp",52],"(",")",["T_WHITESPACE"," ",52],"{",["T_WHITESPACE","\n    ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","setUp",53],"(",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","migration",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getMigration",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","message",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","getMock",55],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\migrate\\MigrateMessageInterface'",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","executable",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","TestMigrateExecutable",57],"(",["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","migration",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","message",57],")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","executable",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","setStringTranslation",58],"(",["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getStringTranslationStub",58],"(",")",")",";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Runs the actual test.\n   *\n   * @param string $message\n   *   The second message to assert.\n   * @param bool $memory_exceeded\n   *   Whether to test the memory exceeded case.\n   * @param int|null $memory_usage_first\n   *   (optional) The first memory usage value. Defaults to NULL.\n   * @param int|null $memory_usage_second\n   *   (optional) The fake amount of memory usage reported after memory reclaim.\n   *   Defaults to NULL.\n   * @param int|null $memory_limit\n   *   (optional) The memory limit. Defaults to NULL.\n   *\/",61],["T_WHITESPACE","\n  ",75],["T_PROTECTED","protected",76],["T_WHITESPACE"," ",76],["T_FUNCTION","function",76],["T_WHITESPACE"," ",76],["T_STRING","runMemoryExceededTest",76],"(",["T_VARIABLE","$message",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$memory_exceeded",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$memory_usage_first",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","NULL",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$memory_usage_second",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","NULL",76],",",["T_WHITESPACE"," ",76],["T_VARIABLE","$memory_limit",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","NULL",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","executable",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","setMemoryLimit",77],"(",["T_VARIABLE","$memory_limit",77],["T_WHITESPACE"," ",77],"?",":",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","memoryLimit",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","executable",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setMemoryUsage",78],"(",["T_VARIABLE","$memory_usage_first",78],["T_WHITESPACE"," ",78],"?",":",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","memoryLimit",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$memory_usage_second",78],["T_WHITESPACE"," ",78],"?",":",["T_WHITESPACE"," ",78],["T_VARIABLE","$this",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","memoryLimit",78],")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","executable",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","setMemoryThreshold",79],"(",["T_DNUMBER","0.85",79],")",";",["T_WHITESPACE","\n    ",79],["T_IF","if",80],["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$message",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n      ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","executable",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","message",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","expects",81],"(",["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","at",81],"(",["T_LNUMBER","0",81],")",")",["T_WHITESPACE","\n        ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","method",82],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",82],")",["T_WHITESPACE","\n        ",82],["T_OBJECT_OPERATOR","->",83],["T_STRING","with",83],"(",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","stringContains",83],"(",["T_CONSTANT_ENCAPSED_STRING","'reclaiming memory'",83],")",")",";",["T_WHITESPACE","\n      ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","executable",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","message",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","expects",84],"(",["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","at",84],"(",["T_LNUMBER","1",84],")",")",["T_WHITESPACE","\n        ",84],["T_OBJECT_OPERATOR","->",85],["T_STRING","method",85],"(",["T_CONSTANT_ENCAPSED_STRING","'display'",85],")",["T_WHITESPACE","\n        ",85],["T_OBJECT_OPERATOR","->",86],["T_STRING","with",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","stringContains",86],"(",["T_VARIABLE","$message",86],")",")",";",["T_WHITESPACE","\n    ",86],"}",["T_WHITESPACE","\n    ",87],["T_ELSE","else",88],["T_WHITESPACE"," ",88],"{",["T_WHITESPACE","\n      ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","executable",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","message",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","expects",89],"(",["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","never",89],"(",")",")",["T_WHITESPACE","\n        ",89],["T_OBJECT_OPERATOR","->",90],["T_STRING","method",90],"(",["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","anything",90],"(",")",")",";",["T_WHITESPACE","\n    ",90],"}",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$result",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","executable",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","memoryExceeded",92],"(",")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertEquals",93],"(",["T_VARIABLE","$memory_exceeded",93],",",["T_WHITESPACE"," ",93],["T_VARIABLE","$result",93],")",";",["T_WHITESPACE","\n  ",93],"}",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Tests memoryExceeded method when a new batch is needed.\n   *\/",96],["T_WHITESPACE","\n  ",98],["T_PUBLIC","public",99],["T_WHITESPACE"," ",99],["T_FUNCTION","function",99],["T_WHITESPACE"," ",99],["T_STRING","testMemoryExceededNewBatch",99],"(",")",["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n    ",99],["T_COMMENT","\/\/ First case try reset and then start new batch.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","runMemoryExceededTest",101],"(",["T_CONSTANT_ENCAPSED_STRING","'starting new batch'",101],",",["T_WHITESPACE"," ",101],["T_STRING","TRUE",101],")",";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * Tests memoryExceeded method when enough is cleared.\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","testMemoryExceededClearedEnough",107],"(",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","runMemoryExceededTest",108],"(",["T_CONSTANT_ENCAPSED_STRING","'reclaimed enough'",108],",",["T_WHITESPACE"," ",108],["T_STRING","FALSE",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","memoryLimit",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","memoryLimit",108],["T_WHITESPACE"," ",108],"*",["T_WHITESPACE"," ",108],["T_DNUMBER","0.75",108],")",";",["T_WHITESPACE","\n  ",108],"}",["T_WHITESPACE","\n\n  ",109],["T_DOC_COMMENT","\/**\n   * Tests memoryExceeded when memory usage is not exceeded.\n   *\/",111],["T_WHITESPACE","\n  ",113],["T_PUBLIC","public",114],["T_WHITESPACE"," ",114],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","testMemoryNotExceeded",114],"(",")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","runMemoryExceededTest",115],"(",["T_CONSTANT_ENCAPSED_STRING","''",115],",",["T_WHITESPACE"," ",115],["T_STRING","FALSE",115],",",["T_WHITESPACE"," ",115],["T_STRING","floor",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","memoryLimit",115],["T_WHITESPACE"," ",115],"*",["T_WHITESPACE"," ",115],["T_DNUMBER","0.85",115],")",["T_WHITESPACE"," ",115],"-",["T_WHITESPACE"," ",115],["T_LNUMBER","1",115],")",";",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n",116],"}",["T_WHITESPACE","\n",118]]
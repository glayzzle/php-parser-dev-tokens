[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTestBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrateMessage",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrationInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateExecutable",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MigrateIdMapInterface",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests row skips triggered during hook_migrate_prepare_row().\n *\n * @group migrate\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","MigrateSkipRowTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","KernelTestBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_STATIC","static",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$modules",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[",["T_CONSTANT_ENCAPSED_STRING","'migrate'",23],",",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'migrate_prepare_row_test'",23],"]",";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * Tests migration interruptions.\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_PUBLIC","public",28],["T_WHITESPACE"," ",28],["T_FUNCTION","function",28],["T_WHITESPACE"," ",28],["T_STRING","testPrepareRowSkip",28],"(",")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n    ",28],["T_COMMENT","\/\/ Run a simple little migration with two data rows which should be skipped\n",29],["T_WHITESPACE","    ",30],["T_COMMENT","\/\/ in different ways.\n",30],["T_WHITESPACE","    ",31],["T_VARIABLE","$definition",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",32],["T_WHITESPACE"," ",32],["T_DOUBLE_ARROW","=>",32],["T_WHITESPACE"," ",32],"[",["T_CONSTANT_ENCAPSED_STRING","'prepare_row test'",32],"]",",",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'source'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],"[",["T_WHITESPACE","\n        ",33],["T_CONSTANT_ENCAPSED_STRING","'plugin'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",34],",",["T_WHITESPACE","\n        ",34],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],"[",["T_WHITESPACE","\n          ",35],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'1'",36],",",["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'data'",36],["T_WHITESPACE"," ",36],["T_DOUBLE_ARROW","=>",36],["T_WHITESPACE"," ",36],["T_CONSTANT_ENCAPSED_STRING","'skip_and_record'",36],"]",",",["T_WHITESPACE","\n          ",36],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'2'",37],",",["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'data'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_CONSTANT_ENCAPSED_STRING","'skip_and_dont_record'",37],"]",",",["T_WHITESPACE","\n        ",37],"]",",",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'ids'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],"[",["T_WHITESPACE","\n          ",39],["T_CONSTANT_ENCAPSED_STRING","'id'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'string'",40],"]",",",["T_WHITESPACE","\n        ",40],"]",",",["T_WHITESPACE","\n      ",41],"]",",",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'process'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'data'",43],"]",",",["T_WHITESPACE","\n      ",43],["T_CONSTANT_ENCAPSED_STRING","'destination'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n        ",44],["T_CONSTANT_ENCAPSED_STRING","'plugin'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'config'",45],",",["T_WHITESPACE","\n        ",45],["T_CONSTANT_ENCAPSED_STRING","'config_name'",46],["T_WHITESPACE"," ",46],["T_DOUBLE_ARROW","=>",46],["T_WHITESPACE"," ",46],["T_CONSTANT_ENCAPSED_STRING","'migrate_test.settings'",46],",",["T_WHITESPACE","\n      ",46],"]",",",["T_WHITESPACE","\n      ",47],["T_CONSTANT_ENCAPSED_STRING","'load'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'null'",48],"]",",",["T_WHITESPACE","\n    ",48],"]",";",["T_WHITESPACE","\n\n    ",49],["T_VARIABLE","$migration",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_NS_SEPARATOR","\\",51],["T_STRING","Drupal",51],["T_DOUBLE_COLON","::",51],["T_STRING","service",51],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",51],")",["T_OBJECT_OPERATOR","->",51],["T_STRING","createStubMigration",51],"(",["T_VARIABLE","$definition",51],")",";",["T_WHITESPACE","\n\n    ",51],["T_VARIABLE","$executable",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","MigrateExecutable",53],"(",["T_VARIABLE","$migration",53],",",["T_WHITESPACE"," ",53],["T_NEW","new",53],["T_WHITESPACE"," ",53],["T_STRING","MigrateMessage",53],"(",")",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$result",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$executable",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","import",54],"(",")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$this",55],["T_OBJECT_OPERATOR","->",55],["T_STRING","assertEqual",55],"(",["T_VARIABLE","$result",55],",",["T_WHITESPACE"," ",55],["T_STRING","MigrationInterface",55],["T_DOUBLE_COLON","::",55],["T_STRING","RESULT_COMPLETED",55],")",";",["T_WHITESPACE","\n\n    ",55],["T_DOC_COMMENT","\/** @var \\Drupal\\migrate\\Plugin\\MigrateIdMapInterface $id_map_plugin *\/",57],["T_WHITESPACE","\n    ",57],["T_VARIABLE","$id_map_plugin",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_VARIABLE","$migration",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","getIdMap",58],"(",")",";",["T_WHITESPACE","\n    ",58],["T_COMMENT","\/\/ The first row is recorded in the map as ignored.\n",59],["T_WHITESPACE","    ",60],["T_VARIABLE","$map_row",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$id_map_plugin",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getRowBySource",60],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],"]",")",";",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","assertEqual",61],"(",["T_STRING","MigrateIdMapInterface",61],["T_DOUBLE_COLON","::",61],["T_STRING","STATUS_IGNORED",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$map_row",61],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",61],"]",")",";",["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ Check that no message has been logged for the first exception.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$messages",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$id_map_plugin",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","getMessageIterator",63],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],["T_LNUMBER","1",63],"]",")",["T_OBJECT_OPERATOR","->",63],["T_STRING","fetchAll",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","assertEmpty",64],"(",["T_VARIABLE","$messages",64],")",";",["T_WHITESPACE","\n\n    ",64],["T_COMMENT","\/\/ The second row is not recorded in the map.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$map_row",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$id_map_plugin",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getRowBySource",67],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_LNUMBER","2",67],"]",")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertFalse",68],"(",["T_VARIABLE","$map_row",68],")",";",["T_WHITESPACE","\n    ",68],["T_COMMENT","\/\/ Check that the correct message has been logged for the second exception.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$messages",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$id_map_plugin",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","getMessageIterator",70],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_LNUMBER","2",70],"]",")",["T_OBJECT_OPERATOR","->",70],["T_STRING","fetchAll",70],"(",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertCount",71],"(",["T_LNUMBER","1",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$messages",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$message",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","reset",72],"(",["T_VARIABLE","$messages",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertEquals",73],"(",["T_CONSTANT_ENCAPSED_STRING","'skip_and_dont_record message'",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$message",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","message",73],")",";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertEquals",74],"(",["T_STRING","MigrationInterface",74],["T_DOUBLE_COLON","::",74],["T_STRING","MESSAGE_INFORMATIONAL",74],",",["T_WHITESPACE"," ",74],["T_VARIABLE","$message",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","level",74],")",";",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Insert a custom processor in the process flow.\n",76],["T_WHITESPACE","    ",77],["T_VARIABLE","$definition",77],"[",["T_CONSTANT_ENCAPSED_STRING","'process'",77],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",77],"]",["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],"[",["T_WHITESPACE","\n      ",77],["T_CONSTANT_ENCAPSED_STRING","'source'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'data'",78],",",["T_WHITESPACE","\n      ",78],["T_CONSTANT_ENCAPSED_STRING","'plugin'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'test_skip_row_process'",79],",",["T_WHITESPACE","\n    ",79],"]",";",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Change data to avoid triggering again hook_migrate_prepare_row().\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$definition",82],"[",["T_CONSTANT_ENCAPSED_STRING","'source'",82],"]","[",["T_CONSTANT_ENCAPSED_STRING","'data_rows'",82],"]",["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],"[",["T_WHITESPACE","\n      ",82],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'1'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'data'",83],["T_WHITESPACE"," ",83],["T_DOUBLE_ARROW","=>",83],["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'skip_and_record (use plugin)'",83],"]",",",["T_WHITESPACE","\n      ",83],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'2'",84],",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'data'",84],["T_WHITESPACE"," ",84],["T_DOUBLE_ARROW","=>",84],["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'skip_and_dont_record (use plugin)'",84],"]",",",["T_WHITESPACE","\n    ",84],"]",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$migration",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_NS_SEPARATOR","\\",86],["T_STRING","Drupal",86],["T_DOUBLE_COLON","::",86],["T_STRING","service",86],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","createStubMigration",86],"(",["T_VARIABLE","$definition",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_VARIABLE","$executable",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","MigrateExecutable",88],"(",["T_VARIABLE","$migration",88],",",["T_WHITESPACE"," ",88],["T_NEW","new",88],["T_WHITESPACE"," ",88],["T_STRING","MigrateMessage",88],"(",")",")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$result",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$executable",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","import",89],"(",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertEquals",90],"(",["T_VARIABLE","$result",90],",",["T_WHITESPACE"," ",90],["T_STRING","MigrationInterface",90],["T_DOUBLE_COLON","::",90],["T_STRING","RESULT_COMPLETED",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_VARIABLE","$id_map_plugin",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$migration",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","getIdMap",92],"(",")",";",["T_WHITESPACE","\n\n    ",92],["T_COMMENT","\/\/ The first row is recorded in the map as ignored.\n",94],["T_WHITESPACE","    ",95],["T_VARIABLE","$map_row",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$id_map_plugin",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getRowBySource",95],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_LNUMBER","1",95],"]",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertEquals",96],"(",["T_STRING","MigrateIdMapInterface",96],["T_DOUBLE_COLON","::",96],["T_STRING","STATUS_IGNORED",96],",",["T_WHITESPACE"," ",96],["T_VARIABLE","$map_row",96],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",96],"]",")",";",["T_WHITESPACE","\n    ",96],["T_COMMENT","\/\/ The second row is not recorded in the map.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$map_row",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$id_map_plugin",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getRowBySource",98],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_LNUMBER","2",98],"]",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertFalse",99],"(",["T_VARIABLE","$map_row",99],")",";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n",100],"}",["T_WHITESPACE","\n",102]]
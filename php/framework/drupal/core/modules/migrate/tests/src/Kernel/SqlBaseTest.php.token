[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Contains \\Drupal\\Tests\\migrate\\Kernel\\SqlBaseTest.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Kernel",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","source",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TestSqlBase",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Database",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Database",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Tests the functionality of SqlBase.\n *\n * @group migrate\n *\/",13],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","SqlBaseTest",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","MigrateTestBase",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * Tests different connection types.\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PUBLIC","public",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","testConnectionTypes",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$sql_base",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_NEW","new",24],["T_WHITESPACE"," ",24],["T_STRING","TestSqlBase",24],"(",")",";",["T_WHITESPACE","\n\n    ",24],["T_COMMENT","\/\/ Check the default values.\n",26],["T_WHITESPACE","    ",27],["T_VARIABLE","$sql_base",27],["T_OBJECT_OPERATOR","->",27],["T_STRING","setConfiguration",27],"(","[","]",")",";",["T_WHITESPACE","\n    ",27],["T_VARIABLE","$this",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","assertIdentical",28],"(",["T_VARIABLE","$sql_base",28],["T_OBJECT_OPERATOR","->",28],["T_STRING","getDatabase",28],"(",")",["T_OBJECT_OPERATOR","->",28],["T_STRING","getTarget",28],"(",")",",",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'default'",28],")",";",["T_WHITESPACE","\n    ",28],["T_VARIABLE","$this",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","assertIdentical",29],"(",["T_VARIABLE","$sql_base",29],["T_OBJECT_OPERATOR","->",29],["T_STRING","getDatabase",29],"(",")",["T_OBJECT_OPERATOR","->",29],["T_STRING","getKey",29],"(",")",",",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'migrate'",29],")",";",["T_WHITESPACE","\n\n    ",29],["T_VARIABLE","$target",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'test_db_target'",31],";",["T_WHITESPACE","\n    ",31],["T_VARIABLE","$key",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_CONSTANT_ENCAPSED_STRING","'test_migrate_connection'",32],";",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$config",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_CONSTANT_ENCAPSED_STRING","'target'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$target",33],",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'key'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$key",33],")",";",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$sql_base",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","setConfiguration",34],"(",["T_VARIABLE","$config",34],")",";",["T_WHITESPACE","\n    ",34],["T_STRING","Database",35],["T_DOUBLE_COLON","::",35],["T_STRING","addConnectionInfo",35],"(",["T_VARIABLE","$key",35],",",["T_WHITESPACE"," ",35],["T_VARIABLE","$target",35],",",["T_WHITESPACE"," ",35],["T_STRING","Database",35],["T_DOUBLE_COLON","::",35],["T_STRING","getConnectionInfo",35],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",35],")","[",["T_CONSTANT_ENCAPSED_STRING","'default'",35],"]",")",";",["T_WHITESPACE","\n\n    ",35],["T_COMMENT","\/\/ Validate we have injected our custom key and target.\n",37],["T_WHITESPACE","    ",38],["T_VARIABLE","$this",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","assertIdentical",38],"(",["T_VARIABLE","$sql_base",38],["T_OBJECT_OPERATOR","->",38],["T_STRING","getDatabase",38],"(",")",["T_OBJECT_OPERATOR","->",38],["T_STRING","getTarget",38],"(",")",",",["T_WHITESPACE"," ",38],["T_VARIABLE","$target",38],")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","assertIdentical",39],"(",["T_VARIABLE","$sql_base",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getDatabase",39],"(",")",["T_OBJECT_OPERATOR","->",39],["T_STRING","getKey",39],"(",")",",",["T_WHITESPACE"," ",39],["T_VARIABLE","$key",39],")",";",["T_WHITESPACE","\n\n    ",39],["T_COMMENT","\/\/ Now test we can have SqlBase create the connection from an info array.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$sql_base",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_NEW","new",42],["T_WHITESPACE"," ",42],["T_STRING","TestSqlBase",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_VARIABLE","$target",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'test_db_target2'",44],";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$key",45],["T_WHITESPACE"," ",45],"=",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'test_migrate_connection2'",45],";",["T_WHITESPACE","\n    ",45],["T_VARIABLE","$database",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_STRING","Database",46],["T_DOUBLE_COLON","::",46],["T_STRING","getConnectionInfo",46],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",46],")","[",["T_CONSTANT_ENCAPSED_STRING","'default'",46],"]",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$config",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'target'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$target",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'key'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$key",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'database'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$database",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$sql_base",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","setConfiguration",48],"(",["T_VARIABLE","$config",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Call getDatabase() to get the connection defined.\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$sql_base",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getDatabase",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ Validate the connection has been created with the right values.\n",53],["T_WHITESPACE","    ",54],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertIdentical",54],"(",["T_STRING","Database",54],["T_DOUBLE_COLON","::",54],["T_STRING","getConnectionInfo",54],"(",["T_VARIABLE","$key",54],")","[",["T_VARIABLE","$target",54],"]",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$database",54],")",";",["T_WHITESPACE","\n\n    ",54],["T_COMMENT","\/\/ Now, test this all works when using state to store db info.\n",56],["T_WHITESPACE","    ",57],["T_VARIABLE","$target",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'test_state_db_target'",57],";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$key",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'test_state_migrate_connection'",58],";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$config",59],["T_WHITESPACE"," ",59],"=",["T_WHITESPACE"," ",59],"[",["T_CONSTANT_ENCAPSED_STRING","'target'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$target",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'key'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$key",59],"]",";",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$database_state_key",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'migrate_sql_base_test'",60],";",["T_WHITESPACE","\n    ",60],["T_NS_SEPARATOR","\\",61],["T_STRING","Drupal",61],["T_DOUBLE_COLON","::",61],["T_STRING","state",61],"(",")",["T_OBJECT_OPERATOR","->",61],["T_STRING","set",61],"(",["T_VARIABLE","$database_state_key",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$config",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$sql_base",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","setConfiguration",62],"(","[",["T_CONSTANT_ENCAPSED_STRING","'database_state_key'",62],["T_WHITESPACE"," ",62],["T_DOUBLE_ARROW","=>",62],["T_WHITESPACE"," ",62],["T_VARIABLE","$database_state_key",62],"]",")",";",["T_WHITESPACE","\n    ",62],["T_STRING","Database",63],["T_DOUBLE_COLON","::",63],["T_STRING","addConnectionInfo",63],"(",["T_VARIABLE","$key",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$target",63],",",["T_WHITESPACE"," ",63],["T_STRING","Database",63],["T_DOUBLE_COLON","::",63],["T_STRING","getConnectionInfo",63],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",63],")","[",["T_CONSTANT_ENCAPSED_STRING","'default'",63],"]",")",";",["T_WHITESPACE","\n\n    ",63],["T_COMMENT","\/\/ Validate we have injected our custom key and target.\n",65],["T_WHITESPACE","    ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","assertIdentical",66],"(",["T_VARIABLE","$sql_base",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","getDatabase",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getTarget",66],"(",")",",",["T_WHITESPACE"," ",66],["T_VARIABLE","$target",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertIdentical",67],"(",["T_VARIABLE","$sql_base",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","getDatabase",67],"(",")",["T_OBJECT_OPERATOR","->",67],["T_STRING","getKey",67],"(",")",",",["T_WHITESPACE"," ",67],["T_VARIABLE","$key",67],")",";",["T_WHITESPACE","\n\n    ",67],["T_COMMENT","\/\/ Now test we can have SqlBase create the connection from an info array.\n",69],["T_WHITESPACE","    ",70],["T_VARIABLE","$sql_base",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_STRING","TestSqlBase",70],"(",")",";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$target",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'test_state_db_target2'",72],";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$key",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'test_state_migrate_connection2'",73],";",["T_WHITESPACE","\n    ",73],["T_VARIABLE","$database",74],["T_WHITESPACE"," ",74],"=",["T_WHITESPACE"," ",74],["T_STRING","Database",74],["T_DOUBLE_COLON","::",74],["T_STRING","getConnectionInfo",74],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",74],")","[",["T_CONSTANT_ENCAPSED_STRING","'default'",74],"]",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$config",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],"[",["T_CONSTANT_ENCAPSED_STRING","'target'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$target",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'key'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$key",75],",",["T_WHITESPACE"," ",75],["T_CONSTANT_ENCAPSED_STRING","'database'",75],["T_WHITESPACE"," ",75],["T_DOUBLE_ARROW","=>",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$database",75],"]",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$database_state_key",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'migrate_sql_base_test2'",76],";",["T_WHITESPACE","\n    ",76],["T_NS_SEPARATOR","\\",77],["T_STRING","Drupal",77],["T_DOUBLE_COLON","::",77],["T_STRING","state",77],"(",")",["T_OBJECT_OPERATOR","->",77],["T_STRING","set",77],"(",["T_VARIABLE","$database_state_key",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$config",77],")",";",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$sql_base",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","setConfiguration",78],"(","[",["T_CONSTANT_ENCAPSED_STRING","'database_state_key'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_VARIABLE","$database_state_key",78],"]",")",";",["T_WHITESPACE","\n\n    ",78],["T_COMMENT","\/\/ Call getDatabase() to get the connection defined.\n",80],["T_WHITESPACE","    ",81],["T_VARIABLE","$sql_base",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","getDatabase",81],"(",")",";",["T_WHITESPACE","\n\n    ",81],["T_COMMENT","\/\/ Validate the connection has been created with the right values.\n",83],["T_WHITESPACE","    ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertIdentical",84],"(",["T_STRING","Database",84],["T_DOUBLE_COLON","::",84],["T_STRING","getConnectionInfo",84],"(",["T_VARIABLE","$key",84],")","[",["T_VARIABLE","$target",84],"]",",",["T_WHITESPACE"," ",84],["T_VARIABLE","$database",84],")",";",["T_WHITESPACE","\n  ",84],"}",["T_WHITESPACE","\n\n",85],"}",["T_WHITESPACE","\n\n",87],["T_NAMESPACE","namespace",89],["T_WHITESPACE"," ",89],["T_STRING","Drupal",89],["T_NS_SEPARATOR","\\",89],["T_STRING","migrate",89],["T_NS_SEPARATOR","\\",89],["T_STRING","Plugin",89],["T_NS_SEPARATOR","\\",89],["T_STRING","migrate",89],["T_NS_SEPARATOR","\\",89],["T_STRING","source",89],";",["T_WHITESPACE","\n\n",89],["T_DOC_COMMENT","\/**\n * A dummy source to help with testing SqlBase.\n *\n * @package Drupal\\migrate\\Plugin\\migrate\\source\n *\/",91],["T_WHITESPACE","\n",95],["T_CLASS","class",96],["T_WHITESPACE"," ",96],["T_STRING","TestSqlBase",96],["T_WHITESPACE"," ",96],["T_EXTENDS","extends",96],["T_WHITESPACE"," ",96],["T_STRING","SqlBase",96],["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n\n  ",96],["T_DOC_COMMENT","\/**\n   * Overrides the constructor so we can create one easily.\n   *\/",98],["T_WHITESPACE","\n  ",100],["T_PUBLIC","public",101],["T_WHITESPACE"," ",101],["T_FUNCTION","function",101],["T_WHITESPACE"," ",101],["T_STRING","__construct",101],"(",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","state",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_NS_SEPARATOR","\\",102],["T_STRING","Drupal",102],["T_DOUBLE_COLON","::",102],["T_STRING","state",102],"(",")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n  ",103],["T_DOC_COMMENT","\/**\n   * Gets the database without caching it.\n   *\/",105],["T_WHITESPACE","\n  ",107],["T_PUBLIC","public",108],["T_WHITESPACE"," ",108],["T_FUNCTION","function",108],["T_WHITESPACE"," ",108],["T_STRING","getDatabase",108],"(",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","database",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_STRING","NULL",109],";",["T_WHITESPACE","\n    ",109],["T_RETURN","return",110],["T_WHITESPACE"," ",110],["T_STRING","parent",110],["T_DOUBLE_COLON","::",110],["T_STRING","getDatabase",110],"(",")",";",["T_WHITESPACE","\n  ",110],"}",["T_WHITESPACE","\n\n  ",111],["T_DOC_COMMENT","\/**\n   * Allows us to set the configuration from a test.\n   *\n   * @param array $config\n   *   The config array.\n   *\/",113],["T_WHITESPACE","\n  ",118],["T_PUBLIC","public",119],["T_WHITESPACE"," ",119],["T_FUNCTION","function",119],["T_WHITESPACE"," ",119],["T_STRING","setConfiguration",119],"(",["T_VARIABLE","$config",119],")",["T_WHITESPACE"," ",119],"{",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","configuration",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$config",120],";",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",123],["T_WHITESPACE","\n  ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getIds",126],"(",")",["T_WHITESPACE"," ",126],"{","}",["T_WHITESPACE","\n\n  ",126],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",128],["T_WHITESPACE","\n  ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","fields",131],"(",")",["T_WHITESPACE"," ",131],"{","}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",133],["T_WHITESPACE","\n  ",135],["T_PUBLIC","public",136],["T_WHITESPACE"," ",136],["T_FUNCTION","function",136],["T_WHITESPACE"," ",136],["T_STRING","query",136],"(",")",["T_WHITESPACE"," ",136],"{","}",["T_WHITESPACE","\n\n",136],"}",["T_WHITESPACE","\n",138]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_DOC_COMMENT","\/**\n * @file\n * Contains \\Drupal\\Tests\\migrate\\Unit\\destination\\EntityRevisionTest.\n *\/",3],["T_WHITESPACE","\n\n",6],["T_NAMESPACE","namespace",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Tests",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Unit",8],["T_NS_SEPARATOR","\\",8],["T_STRING","destination",8],";",["T_WHITESPACE","\n\n",8],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Entity",10],["T_NS_SEPARATOR","\\",10],["T_STRING","ContentEntityInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Entity",11],["T_NS_SEPARATOR","\\",11],["T_STRING","EntityInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","migrate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Plugin",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MigrationInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","migrate",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Plugin",13],["T_NS_SEPARATOR","\\",13],["T_STRING","migrate",13],["T_NS_SEPARATOR","\\",13],["T_STRING","destination",13],["T_NS_SEPARATOR","\\",13],["T_STRING","EntityRevision",13],["T_WHITESPACE"," ",13],["T_AS","as",13],["T_WHITESPACE"," ",13],["T_STRING","RealEntityRevision",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Drupal",14],["T_NS_SEPARATOR","\\",14],["T_STRING","migrate",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Row",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Drupal",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Tests",15],["T_NS_SEPARATOR","\\",15],["T_STRING","UnitTestCase",15],";",["T_WHITESPACE","\n\n",15],["T_DOC_COMMENT","\/**\n * Tests entity revision destination.\n *\n * @group migrate\n * @coversDefaultClass \\Drupal\\migrate\\Plugin\\migrate\\destination\\EntityRevision\n *\/",17],["T_WHITESPACE","\n",22],["T_CLASS","class",23],["T_WHITESPACE"," ",23],["T_STRING","EntityRevisionTest",23],["T_WHITESPACE"," ",23],["T_EXTENDS","extends",23],["T_WHITESPACE"," ",23],["T_STRING","UnitTestCase",23],["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\migrate\\Plugin\\MigrationInterface\n   *\/",25],["T_WHITESPACE","\n  ",27],["T_PROTECTED","protected",28],["T_WHITESPACE"," ",28],["T_VARIABLE","$migration",28],";",["T_WHITESPACE","\n\n  ",28],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Entity\\EntityStorageInterface\n   *\/",30],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$storage",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Entity\\EntityManagerInterface\n   *\/",35],["T_WHITESPACE","\n  ",37],["T_PROTECTED","protected",38],["T_WHITESPACE"," ",38],["T_VARIABLE","$entityManager",38],";",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * @var \\Drupal\\Core\\Field\\FieldTypePluginManagerInterface\n   *\/",40],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$fieldTypeManager",43],";",["T_WHITESPACE","\n\n  ",43],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","setUp",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","setUp",46],"(",")",";",["T_WHITESPACE","\n\n    ",46],["T_COMMENT","\/\/ Setup mocks to be used when creating a revision destination.\n",48],["T_WHITESPACE","    ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","migration",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","prophesize",49],"(",["T_STRING","MigrationInterface",49],["T_DOUBLE_COLON","::",49],["T_CLASS","class",49],")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","storage",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","prophesize",50],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityStorageInterface'",50],")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","entityManager",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","prophesize",51],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityManagerInterface'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","fieldTypeManager",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","prophesize",52],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Field\\FieldTypePluginManagerInterface'",52],")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Test that passed old destination values are used by default.\n   *\n   * @covers ::getEntity\n   *\/",55],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","testGetEntityDestinationValues",60],"(",")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$destination",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","getEntityRevisionDestination",61],"(","[","]",")",";",["T_WHITESPACE","\n    ",61],["T_COMMENT","\/\/ Return a dummy because we don't care what gets called.\n",62],["T_WHITESPACE","    ",63],["T_VARIABLE","$entity",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","prophesize",63],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityInterface'",63],")",["T_WHITESPACE","\n      ",63],["T_OBJECT_OPERATOR","->",64],["T_STRING","willImplement",64],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\RevisionableInterface'",64],")",";",["T_WHITESPACE","\n    ",64],["T_COMMENT","\/\/ Assert that the first ID from the destination values is used to load the\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ entity.\n",66],["T_WHITESPACE","    ",67],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","storage",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","loadRevision",67],"(",["T_LNUMBER","12",67],")",["T_WHITESPACE","\n      ",67],["T_OBJECT_OPERATOR","->",68],["T_STRING","shouldBeCalled",68],"(",")",["T_WHITESPACE","\n      ",68],["T_OBJECT_OPERATOR","->",69],["T_STRING","willReturn",69],"(",["T_VARIABLE","$entity",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","reveal",69],"(",")",")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$row",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_NEW","new",70],["T_WHITESPACE"," ",70],["T_STRING","Row",70],"(",")",";",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","assertEquals",71],"(",["T_VARIABLE","$entity",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","reveal",71],"(",")",",",["T_WHITESPACE"," ",71],["T_VARIABLE","$destination",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getEntity",71],"(",["T_VARIABLE","$row",71],",",["T_WHITESPACE"," ",71],"[",["T_LNUMBER","12",71],",",["T_WHITESPACE"," ",71],["T_LNUMBER","13",71],"]",")",")",";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * Test that revision updates update.\n   *\n   * @covers ::getEntity\n   *\/",74],["T_WHITESPACE","\n  ",78],["T_PUBLIC","public",79],["T_WHITESPACE"," ",79],["T_FUNCTION","function",79],["T_WHITESPACE"," ",79],["T_STRING","testGetEntityUpdateRevision",79],"(",")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$destination",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","getEntityRevisionDestination",80],"(","[","]",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$entity",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","prophesize",81],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityInterface'",81],")",["T_WHITESPACE","\n      ",81],["T_OBJECT_OPERATOR","->",82],["T_STRING","willImplement",82],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\RevisionableInterface'",82],")",";",["T_WHITESPACE","\n\n    ",82],["T_VARIABLE","$entity_type",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","prophesize",84],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityTypeInterface'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$entity_type",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","getKey",85],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","willReturn",85],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$entity_type",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getKey",86],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","willReturn",86],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","storage",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","getEntityType",87],"(",")",["T_OBJECT_OPERATOR","->",87],["T_STRING","willReturn",87],"(",["T_VARIABLE","$entity_type",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","reveal",87],"(",")",")",";",["T_WHITESPACE","\n\n    ",87],["T_COMMENT","\/\/ Assert we load the correct revision.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","storage",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","loadRevision",90],"(",["T_LNUMBER","2",90],")",["T_WHITESPACE","\n      ",90],["T_OBJECT_OPERATOR","->",91],["T_STRING","shouldBeCalled",91],"(",")",["T_WHITESPACE","\n      ",91],["T_OBJECT_OPERATOR","->",92],["T_STRING","willReturn",92],"(",["T_VARIABLE","$entity",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","reveal",92],"(",")",")",";",["T_WHITESPACE","\n    ",92],["T_COMMENT","\/\/ Make sure its set as an update and not the default revision.\n",93],["T_WHITESPACE","    ",94],["T_VARIABLE","$entity",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","setNewRevision",94],"(",["T_STRING","FALSE",94],")",["T_OBJECT_OPERATOR","->",94],["T_STRING","shouldBeCalled",94],"(",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$entity",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","isDefaultRevision",95],"(",["T_STRING","FALSE",95],")",["T_OBJECT_OPERATOR","->",95],["T_STRING","shouldBeCalled",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_VARIABLE","$row",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_NEW","new",97],["T_WHITESPACE"," ",97],["T_STRING","Row",97],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","1",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'vid'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","2",97],"]",",",["T_WHITESPACE"," ",97],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","1",97],",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'vid'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_LNUMBER","2",97],"]",")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$row",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","setDestinationProperty",98],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",98],",",["T_WHITESPACE"," ",98],["T_LNUMBER","2",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEquals",99],"(",["T_VARIABLE","$entity",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","reveal",99],"(",")",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$destination",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getEntity",99],"(",["T_VARIABLE","$row",99],",",["T_WHITESPACE"," ",99],"[","]",")",")",";",["T_WHITESPACE","\n  ",99],"}",["T_WHITESPACE","\n\n  ",100],["T_DOC_COMMENT","\/**\n   * Test that new revisions are flagged to be written as new.\n   *\n   * @covers ::getEntity\n   *\/",102],["T_WHITESPACE","\n  ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","testGetEntityNewRevision",107],"(",")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$destination",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","getEntityRevisionDestination",108],"(","[","]",")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$entity",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","prophesize",109],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityInterface'",109],")",["T_WHITESPACE","\n      ",109],["T_OBJECT_OPERATOR","->",110],["T_STRING","willImplement",110],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\RevisionableInterface'",110],")",";",["T_WHITESPACE","\n\n    ",110],["T_VARIABLE","$entity_type",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","prophesize",112],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityTypeInterface'",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$entity_type",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getKey",113],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",113],")",["T_OBJECT_OPERATOR","->",113],["T_STRING","willReturn",113],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$entity_type",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","getKey",114],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",114],")",["T_OBJECT_OPERATOR","->",114],["T_STRING","willReturn",114],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",114],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","storage",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","getEntityType",115],"(",")",["T_OBJECT_OPERATOR","->",115],["T_STRING","willReturn",115],"(",["T_VARIABLE","$entity_type",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","reveal",115],"(",")",")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Enforce is new should be disabled.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$entity",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","enforceIsNew",118],"(",["T_STRING","FALSE",118],")",["T_OBJECT_OPERATOR","->",118],["T_STRING","shouldBeCalled",118],"(",")",";",["T_WHITESPACE","\n    ",118],["T_COMMENT","\/\/ And toggle this as new revision but not the default revision.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$entity",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","setNewRevision",120],"(",["T_STRING","TRUE",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","shouldBeCalled",120],"(",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$entity",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","isDefaultRevision",121],"(",["T_STRING","FALSE",121],")",["T_OBJECT_OPERATOR","->",121],["T_STRING","shouldBeCalled",121],"(",")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Assert we load the correct revision.\n",123],["T_WHITESPACE","    ",124],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","storage",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","load",124],"(",["T_LNUMBER","1",124],")",["T_WHITESPACE","\n      ",124],["T_OBJECT_OPERATOR","->",125],["T_STRING","shouldBeCalled",125],"(",")",["T_WHITESPACE","\n      ",125],["T_OBJECT_OPERATOR","->",126],["T_STRING","willReturn",126],"(",["T_VARIABLE","$entity",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","reveal",126],"(",")",")",";",["T_WHITESPACE","\n\n    ",126],["T_VARIABLE","$row",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_STRING","Row",128],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'vid'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","2",128],"]",",",["T_WHITESPACE"," ",128],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'vid'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","2",128],"]",")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$row",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","setDestinationProperty",129],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",129],",",["T_WHITESPACE"," ",129],["T_LNUMBER","1",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertEquals",130],"(",["T_VARIABLE","$entity",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","reveal",130],"(",")",",",["T_WHITESPACE"," ",130],["T_VARIABLE","$destination",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getEntity",130],"(",["T_VARIABLE","$row",130],",",["T_WHITESPACE"," ",130],"[","]",")",")",";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * Test entity load failure.\n   *\n   * @covers ::getEntity\n   *\/",133],["T_WHITESPACE","\n  ",137],["T_PUBLIC","public",138],["T_WHITESPACE"," ",138],["T_FUNCTION","function",138],["T_WHITESPACE"," ",138],["T_STRING","testGetEntityLoadFailure",138],"(",")",["T_WHITESPACE"," ",138],"{",["T_WHITESPACE","\n    ",138],["T_VARIABLE","$destination",139],["T_WHITESPACE"," ",139],"=",["T_WHITESPACE"," ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","getEntityRevisionDestination",139],"(","[","]",")",";",["T_WHITESPACE","\n\n    ",139],["T_VARIABLE","$entity_type",141],["T_WHITESPACE"," ",141],"=",["T_WHITESPACE"," ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","prophesize",141],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\EntityTypeInterface'",141],")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$entity_type",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","getKey",142],"(",["T_CONSTANT_ENCAPSED_STRING","'id'",142],")",["T_OBJECT_OPERATOR","->",142],["T_STRING","willReturn",142],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",142],")",";",["T_WHITESPACE","\n    ",142],["T_VARIABLE","$entity_type",143],["T_OBJECT_OPERATOR","->",143],["T_STRING","getKey",143],"(",["T_CONSTANT_ENCAPSED_STRING","'revision'",143],")",["T_OBJECT_OPERATOR","->",143],["T_STRING","willReturn",143],"(",["T_CONSTANT_ENCAPSED_STRING","'vid'",143],")",";",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","storage",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","getEntityType",144],"(",")",["T_OBJECT_OPERATOR","->",144],["T_STRING","willReturn",144],"(",["T_VARIABLE","$entity_type",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","reveal",144],"(",")",")",";",["T_WHITESPACE","\n\n    ",144],["T_COMMENT","\/\/ Return a failed load and make sure we don't fail and we return FALSE.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","storage",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","load",147],"(",["T_LNUMBER","1",147],")",["T_WHITESPACE","\n      ",147],["T_OBJECT_OPERATOR","->",148],["T_STRING","shouldBeCalled",148],"(",")",["T_WHITESPACE","\n      ",148],["T_OBJECT_OPERATOR","->",149],["T_STRING","willReturn",149],"(",["T_STRING","FALSE",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$row",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_NEW","new",151],["T_WHITESPACE"," ",151],["T_STRING","Row",151],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","1",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'vid'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","2",151],"]",",",["T_WHITESPACE"," ",151],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","1",151],",",["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'vid'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_LNUMBER","2",151],"]",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$row",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","setDestinationProperty",152],"(",["T_CONSTANT_ENCAPSED_STRING","'nid'",152],",",["T_WHITESPACE"," ",152],["T_LNUMBER","1",152],")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","assertFalse",153],"(",["T_VARIABLE","$destination",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","getEntity",153],"(",["T_VARIABLE","$row",153],",",["T_WHITESPACE"," ",153],"[","]",")",")",";",["T_WHITESPACE","\n  ",153],"}",["T_WHITESPACE","\n\n  ",154],["T_DOC_COMMENT","\/**\n   * Test entity revision save.\n   *\n   * @covers ::save\n   *\/",156],["T_WHITESPACE","\n  ",160],["T_PUBLIC","public",161],["T_WHITESPACE"," ",161],["T_FUNCTION","function",161],["T_WHITESPACE"," ",161],["T_STRING","testSave",161],"(",")",["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$entity",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","prophesize",162],"(",["T_CONSTANT_ENCAPSED_STRING","'\\Drupal\\Core\\Entity\\ContentEntityInterface'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$entity",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","save",163],"(",")",["T_WHITESPACE","\n      ",163],["T_OBJECT_OPERATOR","->",164],["T_STRING","shouldBeCalled",164],"(",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$entity",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getRevisionId",165],"(",")",["T_WHITESPACE","\n      ",165],["T_OBJECT_OPERATOR","->",166],["T_STRING","shouldBeCalled",166],"(",")",["T_WHITESPACE","\n      ",166],["T_OBJECT_OPERATOR","->",167],["T_STRING","willReturn",167],"(",["T_LNUMBER","1234",167],")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$destination",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getEntityRevisionDestination",168],"(",")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertEquals",169],"(","[",["T_LNUMBER","1234",169],"]",",",["T_WHITESPACE"," ",169],["T_VARIABLE","$destination",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","save",169],"(",["T_VARIABLE","$entity",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","reveal",169],"(",")",",",["T_WHITESPACE"," ",169],"[","]",")",")",";",["T_WHITESPACE","\n  ",169],"}",["T_WHITESPACE","\n\n\n  ",170],["T_DOC_COMMENT","\/**\n   * Helper method to create an entity revision destination with mock services.\n   *\n   * @see \\Drupal\\Tests\\migrate\\Unit\\Destination\\EntityRevision\n   *\n   * @param $configuration\n   *   Configuration for the destination.\n   * @param string $plugin_id\n   *   The plugin id.\n   * @param array $plugin_definition\n   *   The plugin definition.\n   *\n   * @return \\Drupal\\Tests\\migrate\\Unit\\destination\\EntityRevision\n   *   Mocked destination.\n   *\/",173],["T_WHITESPACE","\n  ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getEntityRevisionDestination",188],"(",["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$configuration",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[","]",",",["T_WHITESPACE"," ",188],["T_VARIABLE","$plugin_id",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'entity_revision'",188],",",["T_WHITESPACE"," ",188],["T_ARRAY","array",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$plugin_definition",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],"[","]",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_RETURN","return",189],["T_WHITESPACE"," ",189],["T_NEW","new",189],["T_WHITESPACE"," ",189],["T_STRING","EntityRevision",189],"(",["T_VARIABLE","$configuration",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$plugin_id",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$plugin_definition",189],",",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","migration",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","reveal",190],"(",")",",",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","storage",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","reveal",191],"(",")",",",["T_WHITESPACE","\n      ",191],"[","]",",",["T_WHITESPACE","\n      ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","entityManager",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","reveal",193],"(",")",",",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","fieldTypeManager",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","reveal",194],"(",")",["T_WHITESPACE","\n    ",194],")",";",["T_WHITESPACE","\n  ",195],"}",["T_WHITESPACE","\n\n",196],"}",["T_WHITESPACE","\n\n",198],["T_DOC_COMMENT","\/**\n * Mock that exposes from internal methods for testing.\n *\/",200],["T_WHITESPACE","\n",202],["T_CLASS","class",203],["T_WHITESPACE"," ",203],["T_STRING","EntityRevision",203],["T_WHITESPACE"," ",203],["T_EXTENDS","extends",203],["T_WHITESPACE"," ",203],["T_STRING","RealEntityRevision",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n\n  ",203],["T_DOC_COMMENT","\/**\n   * Allow public access for testing.\n   *\/",205],["T_WHITESPACE","\n  ",207],["T_PUBLIC","public",208],["T_WHITESPACE"," ",208],["T_FUNCTION","function",208],["T_WHITESPACE"," ",208],["T_STRING","getEntity",208],"(",["T_STRING","Row",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$row",208],",",["T_WHITESPACE"," ",208],["T_ARRAY","array",208],["T_WHITESPACE"," ",208],["T_VARIABLE","$old_destination_id_values",208],")",["T_WHITESPACE"," ",208],"{",["T_WHITESPACE","\n    ",208],["T_RETURN","return",209],["T_WHITESPACE"," ",209],["T_STRING","parent",209],["T_DOUBLE_COLON","::",209],["T_STRING","getEntity",209],"(",["T_VARIABLE","$row",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$old_destination_id_values",209],")",";",["T_WHITESPACE","\n  ",209],"}",["T_WHITESPACE","\n\n  ",210],["T_DOC_COMMENT","\/**\n   * Allow public access for testing.\n   *\/",212],["T_WHITESPACE","\n  ",214],["T_PUBLIC","public",215],["T_WHITESPACE"," ",215],["T_FUNCTION","function",215],["T_WHITESPACE"," ",215],["T_STRING","save",215],"(",["T_STRING","ContentEntityInterface",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$entity",215],",",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],["T_WHITESPACE"," ",215],["T_VARIABLE","$old_destination_id_values",215],["T_WHITESPACE"," ",215],"=",["T_WHITESPACE"," ",215],["T_ARRAY","array",215],"(",")",")",["T_WHITESPACE"," ",215],"{",["T_WHITESPACE","\n    ",215],["T_RETURN","return",216],["T_WHITESPACE"," ",216],["T_STRING","parent",216],["T_DOUBLE_COLON","::",216],["T_STRING","save",216],"(",["T_VARIABLE","$entity",216],",",["T_WHITESPACE"," ",216],["T_VARIABLE","$old_destination_id_values",216],")",";",["T_WHITESPACE","\n  ",216],"}",["T_WHITESPACE","\n\n  ",217],["T_DOC_COMMENT","\/**\n   * Don't test method from base class.\n   *\n   * This method is from the parent and we aren't concerned with the inner\n   * workings of its implementation which would trickle into mock assertions. An\n   * empty implementation avoids this.\n   *\/",219],["T_WHITESPACE","\n  ",225],["T_PROTECTED","protected",226],["T_WHITESPACE"," ",226],["T_FUNCTION","function",226],["T_WHITESPACE"," ",226],["T_STRING","updateEntity",226],"(",["T_STRING","EntityInterface",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$entity",226],",",["T_WHITESPACE"," ",226],["T_STRING","Row",226],["T_WHITESPACE"," ",226],["T_VARIABLE","$row",226],")",["T_WHITESPACE"," ",226],"{","}",["T_WHITESPACE","\n\n",226],"}",["T_WHITESPACE","\n",228]]
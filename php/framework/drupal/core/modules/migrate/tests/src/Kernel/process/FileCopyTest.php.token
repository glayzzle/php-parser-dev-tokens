[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],["T_NS_SEPARATOR","\\",3],["T_STRING","process",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","StreamWrapper",5],["T_NS_SEPARATOR","\\",5],["T_STRING","StreamWrapperInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","File",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FileTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Plugin",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","process",8],["T_NS_SEPARATOR","\\",8],["T_STRING","FileCopy",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MigrateExecutableInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MigrateProcessInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Row",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Tests the file_copy process plugin.\n *\n * @coversDefaultClass \\Drupal\\migrate\\Plugin\\migrate\\process\\FileCopy\n *\n * @group migrate\n *\/",13],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","FileCopyTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","FileTestBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",22],["T_WHITESPACE","\n  ",24],["T_PUBLIC","public",25],["T_WHITESPACE"," ",25],["T_STATIC","static",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$modules",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],"[",["T_CONSTANT_ENCAPSED_STRING","'migrate'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'system'",25],"]",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * The file system service.\n   *\n   * @var \\Drupal\\Core\\File\\FileSystemInterface\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$fileSystem",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",34],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_FUNCTION","function",37],["T_WHITESPACE"," ",37],["T_STRING","setUp",37],"(",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n    ",37],["T_STRING","parent",38],["T_DOUBLE_COLON","::",38],["T_STRING","setUp",38],"(",")",";",["T_WHITESPACE","\n    ",38],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","fileSystem",39],["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_VARIABLE","$this",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","container",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","get",39],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",39],")",";",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","container",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","get",40],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",40],")",["T_OBJECT_OPERATOR","->",40],["T_STRING","registerWrapper",40],"(",["T_CONSTANT_ENCAPSED_STRING","'temporary'",40],",",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\StreamWrapper\\TemporaryStream'",40],",",["T_WHITESPACE"," ",40],["T_STRING","StreamWrapperInterface",40],["T_DOUBLE_COLON","::",40],["T_STRING","LOCAL_NORMAL",40],")",";",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Test successful imports\/copies.\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PUBLIC","public",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","testSuccessfulCopies",46],"(",")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$file",47],["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","createUri",47],"(",["T_STRING","NULL",47],",",["T_WHITESPACE"," ",47],["T_STRING","NULL",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'temporary'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$file_absolute",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","fileSystem",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","realpath",48],"(",["T_VARIABLE","$file",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$data_sets",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],"[",["T_WHITESPACE","\n      ",49],["T_COMMENT","\/\/ Test a local to local copy.\n",50],["T_WHITESPACE","      ",51],"[",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","root",52],["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'\/core\/modules\/simpletest\/files\/image-test.jpg'",52],",",["T_WHITESPACE","\n        ",52],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/file1.jpg'",53],["T_WHITESPACE","\n      ",53],"]",",",["T_WHITESPACE","\n      ",54],["T_COMMENT","\/\/ Test a temporary file using an absolute path.\n",55],["T_WHITESPACE","      ",56],"[",["T_WHITESPACE","\n        ",56],["T_VARIABLE","$file_absolute",57],",",["T_WHITESPACE","\n        ",57],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/test.jpg'",58],["T_WHITESPACE","\n      ",58],"]",",",["T_WHITESPACE","\n      ",59],["T_COMMENT","\/\/ Test a temporary file using a relative path.\n",60],["T_WHITESPACE","      ",61],"[",["T_WHITESPACE","\n        ",61],["T_VARIABLE","$file_absolute",62],",",["T_WHITESPACE","\n        ",62],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/core\/modules\/simpletest\/files\/test.jpg'",63],["T_WHITESPACE","\n      ",63],"]",",",["T_WHITESPACE","\n    ",64],"]",";",["T_WHITESPACE","\n    ",65],["T_FOREACH","foreach",66],["T_WHITESPACE"," ",66],"(",["T_VARIABLE","$data_sets",66],["T_WHITESPACE"," ",66],["T_AS","as",66],["T_WHITESPACE"," ",66],["T_VARIABLE","$data",66],")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n      ",66],["T_LIST","list",67],"(",["T_VARIABLE","$source_path",67],",",["T_WHITESPACE"," ",67],["T_VARIABLE","$destination_path",67],")",["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_VARIABLE","$data",67],";",["T_WHITESPACE","\n      ",67],["T_VARIABLE","$actual_destination",68],["T_WHITESPACE"," ",68],"=",["T_WHITESPACE"," ",68],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","doTransform",68],"(",["T_VARIABLE","$source_path",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$destination_path",68],")",";",["T_WHITESPACE","\n      ",68],["T_VARIABLE","$message",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","sprintf",69],"(",["T_CONSTANT_ENCAPSED_STRING","'File %s exists'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$destination_path",69],")",";",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","assertFileExists",70],"(",["T_VARIABLE","$destination_path",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$message",70],")",";",["T_WHITESPACE","\n      ",70],["T_COMMENT","\/\/ Make sure we didn't accidentally do a move.\n",71],["T_WHITESPACE","      ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertFileExists",72],"(",["T_VARIABLE","$source_path",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$message",72],")",";",["T_WHITESPACE","\n      ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertSame",73],"(",["T_VARIABLE","$actual_destination",73],",",["T_WHITESPACE"," ",73],["T_VARIABLE","$destination_path",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'The import returned the copied filename.'",73],")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * Test successful moves.\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","testSuccessfulMoves",80],"(",")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$file_1",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","createUri",81],"(",["T_STRING","NULL",81],",",["T_WHITESPACE"," ",81],["T_STRING","NULL",81],",",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'temporary'",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$file_1_absolute",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","fileSystem",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","realpath",82],"(",["T_VARIABLE","$file_1",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$file_2",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","createUri",83],"(",["T_STRING","NULL",83],",",["T_WHITESPACE"," ",83],["T_STRING","NULL",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'temporary'",83],")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$file_2_absolute",84],["T_WHITESPACE"," ",84],"=",["T_WHITESPACE"," ",84],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","fileSystem",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","realpath",84],"(",["T_VARIABLE","$file_2",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$local_file",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","createUri",85],"(",["T_STRING","NULL",85],",",["T_WHITESPACE"," ",85],["T_STRING","NULL",85],",",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'public'",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$data_sets",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],"[",["T_WHITESPACE","\n      ",86],["T_COMMENT","\/\/ Test a local to local copy.\n",87],["T_WHITESPACE","      ",88],"[",["T_WHITESPACE","\n        ",88],["T_VARIABLE","$local_file",89],",",["T_WHITESPACE","\n        ",89],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/file1.jpg'",90],["T_WHITESPACE","\n      ",90],"]",",",["T_WHITESPACE","\n      ",91],["T_COMMENT","\/\/ Test a temporary file using an absolute path.\n",92],["T_WHITESPACE","      ",93],"[",["T_WHITESPACE","\n        ",93],["T_VARIABLE","$file_1_absolute",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/test.jpg'",95],["T_WHITESPACE","\n      ",95],"]",",",["T_WHITESPACE","\n      ",96],["T_COMMENT","\/\/ Test a temporary file using a relative path.\n",97],["T_WHITESPACE","      ",98],"[",["T_WHITESPACE","\n        ",98],["T_VARIABLE","$file_2_absolute",99],",",["T_WHITESPACE","\n        ",99],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/\/core\/modules\/simpletest\/files\/test.jpg'",100],["T_WHITESPACE","\n      ",100],"]",",",["T_WHITESPACE","\n    ",101],"]",";",["T_WHITESPACE","\n    ",102],["T_FOREACH","foreach",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$data_sets",103],["T_WHITESPACE"," ",103],["T_AS","as",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$data",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n      ",103],["T_LIST","list",104],"(",["T_VARIABLE","$source_path",104],",",["T_WHITESPACE"," ",104],["T_VARIABLE","$destination_path",104],")",["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$data",104],";",["T_WHITESPACE","\n      ",104],["T_VARIABLE","$actual_destination",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","doTransform",105],"(",["T_VARIABLE","$source_path",105],",",["T_WHITESPACE"," ",105],["T_VARIABLE","$destination_path",105],",",["T_WHITESPACE"," ",105],"[",["T_CONSTANT_ENCAPSED_STRING","'move'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_STRING","TRUE",105],"]",")",";",["T_WHITESPACE","\n      ",105],["T_VARIABLE","$message",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_STRING","sprintf",106],"(",["T_CONSTANT_ENCAPSED_STRING","'File %s exists'",106],",",["T_WHITESPACE"," ",106],["T_VARIABLE","$destination_path",106],")",";",["T_WHITESPACE","\n      ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertFileExists",107],"(",["T_VARIABLE","$destination_path",107],",",["T_WHITESPACE"," ",107],["T_VARIABLE","$message",107],")",";",["T_WHITESPACE","\n      ",107],["T_VARIABLE","$message",108],["T_WHITESPACE"," ",108],"=",["T_WHITESPACE"," ",108],["T_STRING","sprintf",108],"(",["T_CONSTANT_ENCAPSED_STRING","'File %s does not exist'",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$source_path",108],")",";",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertFileNotExists",109],"(",["T_VARIABLE","$source_path",109],",",["T_WHITESPACE"," ",109],["T_VARIABLE","$message",109],")",";",["T_WHITESPACE","\n      ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertSame",110],"(",["T_VARIABLE","$actual_destination",110],",",["T_WHITESPACE"," ",110],["T_VARIABLE","$destination_path",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'The importer returned the moved filename.'",110],")",";",["T_WHITESPACE","\n    ",110],"}",["T_WHITESPACE","\n  ",111],"}",["T_WHITESPACE","\n\n  ",112],["T_DOC_COMMENT","\/**\n   * Test that non-existent files throw an exception.\n   *\n   * @expectedException \\Drupal\\migrate\\MigrateException\n   *\n   * @expectedExceptionMessage File '\/non\/existent\/file' does not exist\n   *\/",114],["T_WHITESPACE","\n  ",120],["T_PUBLIC","public",121],["T_WHITESPACE"," ",121],["T_FUNCTION","function",121],["T_WHITESPACE"," ",121],["T_STRING","testNonExistentSourceFile",121],"(",")",["T_WHITESPACE"," ",121],"{",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$source",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'\/non\/existent\/file'",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","doTransform",123],"(",["T_VARIABLE","$source",123],",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/wontmatter.jpg'",123],")",";",["T_WHITESPACE","\n  ",123],"}",["T_WHITESPACE","\n\n  ",124],["T_DOC_COMMENT","\/**\n   * Tests that non-writable destination throw an exception.\n   *\n   * @covers ::transform\n   *\/",126],["T_WHITESPACE","\n  ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","testNonWritableDestination",131],"(",")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$source",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","createUri",132],"(",["T_CONSTANT_ENCAPSED_STRING","'file.txt'",132],",",["T_WHITESPACE"," ",132],["T_STRING","NULL",132],",",["T_WHITESPACE"," ",132],["T_CONSTANT_ENCAPSED_STRING","'temporary'",132],")",";",["T_WHITESPACE","\n\n    ",132],["T_COMMENT","\/\/ Create the parent location.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","createDirectory",135],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/dir'",135],")",";",["T_WHITESPACE","\n\n    ",135],["T_COMMENT","\/\/ Copy the file under public:\/\/dir\/subdir1\/.\n",137],["T_WHITESPACE","    ",138],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","doTransform",138],"(",["T_VARIABLE","$source",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/dir\/subdir1\/file.txt'",138],")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Check that 'subdir1' was created and the file was successfully migrated.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertFileExists",141],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/dir\/subdir1\/file.txt'",141],")",";",["T_WHITESPACE","\n\n    ",141],["T_COMMENT","\/\/ Remove all permissions from public:\/\/dir to trigger a failure when\n",143],["T_WHITESPACE","    ",144],["T_COMMENT","\/\/ trying to create a subdirectory 'subdir2' inside public:\/\/dir.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","fileSystem",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","chmod",145],"(",["T_CONSTANT_ENCAPSED_STRING","'public:\/\/dir'",145],",",["T_WHITESPACE"," ",145],["T_LNUMBER","0",145],")",";",["T_WHITESPACE","\n\n    ",145],["T_COMMENT","\/\/ Check that the proper exception is raised.\n",147],["T_WHITESPACE","    ",148],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","setExpectedException",148],"(",["T_STRING","MigrateException",148],["T_DOUBLE_COLON","::",148],["T_CLASS","class",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","\"Could not create or write to directory 'public:\/\/dir\/subdir2'\"",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","doTransform",149],"(",["T_VARIABLE","$source",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/dir\/subdir2\/file.txt'",149],")",";",["T_WHITESPACE","\n  ",149],"}",["T_WHITESPACE","\n\n  ",150],["T_DOC_COMMENT","\/**\n   * Test the 'rename' overwrite mode.\n   *\/",152],["T_WHITESPACE","\n  ",154],["T_PUBLIC","public",155],["T_WHITESPACE"," ",155],["T_FUNCTION","function",155],["T_WHITESPACE"," ",155],["T_STRING","testRenameFile",155],"(",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$source",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","createUri",156],"(",["T_STRING","NULL",156],",",["T_WHITESPACE"," ",156],["T_STRING","NULL",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'temporary'",156],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$destination",157],["T_WHITESPACE"," ",157],"=",["T_WHITESPACE"," ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","createUri",157],"(",["T_CONSTANT_ENCAPSED_STRING","'foo.txt'",157],",",["T_WHITESPACE"," ",157],["T_STRING","NULL",157],",",["T_WHITESPACE"," ",157],["T_CONSTANT_ENCAPSED_STRING","'public'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$expected_destination",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/foo_0.txt'",158],";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$actual_destination",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","doTransform",159],"(",["T_VARIABLE","$source",159],",",["T_WHITESPACE"," ",159],["T_VARIABLE","$destination",159],",",["T_WHITESPACE"," ",159],"[",["T_CONSTANT_ENCAPSED_STRING","'rename'",159],["T_WHITESPACE"," ",159],["T_DOUBLE_ARROW","=>",159],["T_WHITESPACE"," ",159],["T_STRING","TRUE",159],"]",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertFileExists",160],"(",["T_VARIABLE","$expected_destination",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'File was renamed on import'",160],")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertSame",161],"(",["T_VARIABLE","$actual_destination",161],",",["T_WHITESPACE"," ",161],["T_VARIABLE","$expected_destination",161],",",["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'The importer returned the renamed filename.'",161],")",";",["T_WHITESPACE","\n  ",161],"}",["T_WHITESPACE","\n\n  ",162],["T_DOC_COMMENT","\/**\n   * Tests that remote URIs are delegated to the download plugin.\n   *\/",164],["T_WHITESPACE","\n  ",166],["T_PUBLIC","public",167],["T_WHITESPACE"," ",167],["T_FUNCTION","function",167],["T_WHITESPACE"," ",167],["T_STRING","testDownloadRemoteUri",167],"(",")",["T_WHITESPACE"," ",167],"{",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$download_plugin",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","getMock",168],"(",["T_STRING","MigrateProcessInterface",168],["T_DOUBLE_COLON","::",168],["T_CLASS","class",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$download_plugin",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","expects",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","once",169],"(",")",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","method",169],"(",["T_CONSTANT_ENCAPSED_STRING","'transform'",169],")",";",["T_WHITESPACE","\n\n    ",169],["T_VARIABLE","$plugin",171],["T_WHITESPACE"," ",171],"=",["T_WHITESPACE"," ",171],["T_NEW","new",171],["T_WHITESPACE"," ",171],["T_STRING","FileCopy",171],"(",["T_WHITESPACE","\n      ",171],"[","]",",",["T_WHITESPACE","\n      ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","randomMachineName",173],"(",")",",",["T_WHITESPACE","\n      ",173],"[","]",",",["T_WHITESPACE","\n      ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","container",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_CONSTANT_ENCAPSED_STRING","'stream_wrapper_manager'",175],")",",",["T_WHITESPACE","\n      ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","container",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","get",176],"(",["T_CONSTANT_ENCAPSED_STRING","'file_system'",176],")",",",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$download_plugin",177],["T_WHITESPACE","\n    ",177],")",";",["T_WHITESPACE","\n\n    ",178],["T_VARIABLE","$plugin",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","transform",180],"(",["T_WHITESPACE","\n      ",180],"[",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/drupal.org\/favicon.ico'",181],",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'\/destination\/path'",181],"]",",",["T_WHITESPACE","\n      ",181],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getMock",182],"(",["T_STRING","MigrateExecutableInterface",182],["T_DOUBLE_COLON","::",182],["T_CLASS","class",182],")",",",["T_WHITESPACE","\n      ",182],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","Row",183],"(","[","]",",",["T_WHITESPACE"," ",183],"[","]",")",",",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","randomMachineName",184],"(",")",["T_WHITESPACE","\n    ",184],")",";",["T_WHITESPACE","\n  ",185],"}",["T_WHITESPACE","\n\n  ",186],["T_DOC_COMMENT","\/**\n   * Do an import using the destination.\n   *\n   * @param string $source_path\n   *   Source path to copy from.\n   * @param string $destination_path\n   *   The destination path to copy to.\n   * @param array $configuration\n   *   Process plugin configuration settings.\n   *\n   * @return string\n   *   The URI of the copied file.\n   *\/",188],["T_WHITESPACE","\n  ",200],["T_PROTECTED","protected",201],["T_WHITESPACE"," ",201],["T_FUNCTION","function",201],["T_WHITESPACE"," ",201],["T_STRING","doTransform",201],"(",["T_VARIABLE","$source_path",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$destination_path",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$configuration",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],"[","]",")",["T_WHITESPACE"," ",201],"{",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$plugin",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_STRING","FileCopy",202],["T_DOUBLE_COLON","::",202],["T_STRING","create",202],"(",["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","container",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$configuration",202],",",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'file_copy'",202],",",["T_WHITESPACE"," ",202],"[","]",")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$executable",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","prophesize",203],"(",["T_STRING","MigrateExecutableInterface",203],["T_DOUBLE_COLON","::",203],["T_CLASS","class",203],")",["T_OBJECT_OPERATOR","->",203],["T_STRING","reveal",203],"(",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$row",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_NEW","new",204],["T_WHITESPACE"," ",204],["T_STRING","Row",204],"(","[","]",",",["T_WHITESPACE"," ",204],"[","]",")",";",["T_WHITESPACE","\n\n    ",204],["T_RETURN","return",206],["T_WHITESPACE"," ",206],["T_VARIABLE","$plugin",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","transform",206],"(","[",["T_VARIABLE","$source_path",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$destination_path",206],"]",",",["T_WHITESPACE"," ",206],["T_VARIABLE","$executable",206],",",["T_WHITESPACE"," ",206],["T_VARIABLE","$row",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'foobaz'",206],")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n",207],"}",["T_WHITESPACE","\n",209]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","migrate",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Event",5],["T_NS_SEPARATOR","\\",5],["T_STRING","MigrateImportEvent",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Event",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrateMapDeleteEvent",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Event",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateMapSaveEvent",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Event",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigratePostRowSaveEvent",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Event",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MigratePreRowSaveEvent",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MigrateMessage",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Event",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MigrateEvents",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","migrate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MigrateExecutable",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","KernelTests",13],["T_NS_SEPARATOR","\\",13],["T_STRING","KernelTestBase",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * Tests events fired on migrations.\n *\n * @group migrate\n *\/",15],["T_WHITESPACE","\n",19],["T_CLASS","class",20],["T_WHITESPACE"," ",20],["T_STRING","MigrateEventsTest",20],["T_WHITESPACE"," ",20],["T_EXTENDS","extends",20],["T_WHITESPACE"," ",20],["T_STRING","KernelTestBase",20],["T_WHITESPACE"," ",20],"{",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * State service for recording information received by event listeners.\n   *\n   * @var \\Drupal\\Core\\State\\State\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$state",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PUBLIC","public",34],["T_WHITESPACE"," ",34],["T_STATIC","static",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$modules",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],"[",["T_CONSTANT_ENCAPSED_STRING","'migrate'",34],",",["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test'",34],"]",";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","setUp",39],"(",")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","setUp",40],"(",")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$this",41],["T_OBJECT_OPERATOR","->",41],["T_STRING","state",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_NS_SEPARATOR","\\",41],["T_STRING","Drupal",41],["T_DOUBLE_COLON","::",41],["T_STRING","state",41],"(",")",";",["T_WHITESPACE","\n    ",41],["T_NS_SEPARATOR","\\",42],["T_STRING","Drupal",42],["T_DOUBLE_COLON","::",42],["T_STRING","service",42],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",42],")",["T_OBJECT_OPERATOR","->",42],["T_STRING","addListener",42],"(",["T_STRING","MigrateEvents",42],["T_DOUBLE_COLON","::",42],["T_STRING","MAP_SAVE",42],",",["T_WHITESPACE","\n      ",42],["T_ARRAY","array",43],"(",["T_VARIABLE","$this",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'mapSaveEventRecorder'",43],")",")",";",["T_WHITESPACE","\n    ",43],["T_NS_SEPARATOR","\\",44],["T_STRING","Drupal",44],["T_DOUBLE_COLON","::",44],["T_STRING","service",44],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",44],")",["T_OBJECT_OPERATOR","->",44],["T_STRING","addListener",44],"(",["T_STRING","MigrateEvents",44],["T_DOUBLE_COLON","::",44],["T_STRING","MAP_DELETE",44],",",["T_WHITESPACE","\n      ",44],["T_ARRAY","array",45],"(",["T_VARIABLE","$this",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'mapDeleteEventRecorder'",45],")",")",";",["T_WHITESPACE","\n    ",45],["T_NS_SEPARATOR","\\",46],["T_STRING","Drupal",46],["T_DOUBLE_COLON","::",46],["T_STRING","service",46],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",46],")",["T_OBJECT_OPERATOR","->",46],["T_STRING","addListener",46],"(",["T_STRING","MigrateEvents",46],["T_DOUBLE_COLON","::",46],["T_STRING","PRE_IMPORT",46],",",["T_WHITESPACE","\n      ",46],["T_ARRAY","array",47],"(",["T_VARIABLE","$this",47],",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'preImportEventRecorder'",47],")",")",";",["T_WHITESPACE","\n    ",47],["T_NS_SEPARATOR","\\",48],["T_STRING","Drupal",48],["T_DOUBLE_COLON","::",48],["T_STRING","service",48],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",48],")",["T_OBJECT_OPERATOR","->",48],["T_STRING","addListener",48],"(",["T_STRING","MigrateEvents",48],["T_DOUBLE_COLON","::",48],["T_STRING","POST_IMPORT",48],",",["T_WHITESPACE","\n      ",48],["T_ARRAY","array",49],"(",["T_VARIABLE","$this",49],",",["T_WHITESPACE"," ",49],["T_CONSTANT_ENCAPSED_STRING","'postImportEventRecorder'",49],")",")",";",["T_WHITESPACE","\n    ",49],["T_NS_SEPARATOR","\\",50],["T_STRING","Drupal",50],["T_DOUBLE_COLON","::",50],["T_STRING","service",50],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",50],")",["T_OBJECT_OPERATOR","->",50],["T_STRING","addListener",50],"(",["T_STRING","MigrateEvents",50],["T_DOUBLE_COLON","::",50],["T_STRING","PRE_ROW_SAVE",50],",",["T_WHITESPACE","\n      ",50],["T_ARRAY","array",51],"(",["T_VARIABLE","$this",51],",",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'preRowSaveEventRecorder'",51],")",")",";",["T_WHITESPACE","\n    ",51],["T_NS_SEPARATOR","\\",52],["T_STRING","Drupal",52],["T_DOUBLE_COLON","::",52],["T_STRING","service",52],"(",["T_CONSTANT_ENCAPSED_STRING","'event_dispatcher'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","addListener",52],"(",["T_STRING","MigrateEvents",52],["T_DOUBLE_COLON","::",52],["T_STRING","POST_ROW_SAVE",52],",",["T_WHITESPACE","\n      ",52],["T_ARRAY","array",53],"(",["T_VARIABLE","$this",53],",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'postRowSaveEventRecorder'",53],")",")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Tests migration events.\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","testMigrateEvents",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_COMMENT","\/\/ Run a simple little migration, which should trigger one of each event\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ other than map_delete.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$definition",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],"[",["T_WHITESPACE","\n      ",62],["T_CONSTANT_ENCAPSED_STRING","'migration_tags'",63],["T_WHITESPACE"," ",63],["T_DOUBLE_ARROW","=>",63],["T_WHITESPACE"," ",63],"[",["T_CONSTANT_ENCAPSED_STRING","'Event test'",63],"]",",",["T_WHITESPACE","\n      ",63],["T_CONSTANT_ENCAPSED_STRING","'source'",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],"[",["T_WHITESPACE","\n        ",64],["T_CONSTANT_ENCAPSED_STRING","'plugin'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",65],",",["T_WHITESPACE","\n        ",65],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],"[",["T_WHITESPACE","\n          ",66],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",67],"]",",",["T_WHITESPACE","\n        ",67],"]",",",["T_WHITESPACE","\n        ",68],["T_CONSTANT_ENCAPSED_STRING","'ids'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],"[",["T_WHITESPACE","\n          ",69],["T_CONSTANT_ENCAPSED_STRING","'data'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'string'",70],"]",",",["T_WHITESPACE","\n        ",70],"]",",",["T_WHITESPACE","\n      ",71],"]",",",["T_WHITESPACE","\n      ",72],["T_CONSTANT_ENCAPSED_STRING","'process'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",73],["T_WHITESPACE"," ",73],["T_DOUBLE_ARROW","=>",73],["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'data'",73],"]",",",["T_WHITESPACE","\n      ",73],["T_CONSTANT_ENCAPSED_STRING","'destination'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],"[",["T_CONSTANT_ENCAPSED_STRING","'plugin'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'dummy'",74],"]",",",["T_WHITESPACE","\n    ",74],"]",";",["T_WHITESPACE","\n\n    ",75],["T_VARIABLE","$migration",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_NS_SEPARATOR","\\",77],["T_STRING","Drupal",77],["T_DOUBLE_COLON","::",77],["T_STRING","service",77],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",77],")",["T_OBJECT_OPERATOR","->",77],["T_STRING","createStubMigration",77],"(",["T_VARIABLE","$definition",77],")",";",["T_WHITESPACE","\n\n    ",77],["T_VARIABLE","$executable",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_NEW","new",79],["T_WHITESPACE"," ",79],["T_STRING","MigrateExecutable",79],"(",["T_VARIABLE","$migration",79],",",["T_WHITESPACE"," ",79],["T_NEW","new",79],["T_WHITESPACE"," ",79],["T_STRING","MigrateMessage",79],"(",")",")",";",["T_WHITESPACE","\n    ",79],["T_COMMENT","\/\/ As the import runs, events will be dispatched, recording the received\n",80],["T_WHITESPACE","    ",81],["T_COMMENT","\/\/ information in state.\n",81],["T_WHITESPACE","    ",82],["T_VARIABLE","$executable",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","import",82],"(",")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Validate from the recorded state that the events were received.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$event",85],["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","state",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","get",85],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.pre_import_event'",85],",",["T_WHITESPACE"," ",85],"[","]",")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertIdentical",86],"(",["T_VARIABLE","$event",86],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",86],"]",",",["T_WHITESPACE"," ",86],["T_STRING","MigrateEvents",86],["T_DOUBLE_COLON","::",86],["T_STRING","PRE_IMPORT",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertIdentical",87],"(",["T_VARIABLE","$event",87],"[",["T_CONSTANT_ENCAPSED_STRING","'migration'",87],"]",["T_OBJECT_OPERATOR","->",87],["T_STRING","id",87],"(",")",",",["T_WHITESPACE"," ",87],["T_VARIABLE","$migration",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","id",87],"(",")",")",";",["T_WHITESPACE","\n\n    ",87],["T_VARIABLE","$event",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","state",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.post_import_event'",89],",",["T_WHITESPACE"," ",89],"[","]",")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertIdentical",90],"(",["T_VARIABLE","$event",90],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",90],"]",",",["T_WHITESPACE"," ",90],["T_STRING","MigrateEvents",90],["T_DOUBLE_COLON","::",90],["T_STRING","POST_IMPORT",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertIdentical",91],"(",["T_VARIABLE","$event",91],"[",["T_CONSTANT_ENCAPSED_STRING","'migration'",91],"]",["T_OBJECT_OPERATOR","->",91],["T_STRING","id",91],"(",")",",",["T_WHITESPACE"," ",91],["T_VARIABLE","$migration",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","id",91],"(",")",")",";",["T_WHITESPACE","\n\n    ",91],["T_VARIABLE","$event",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","state",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.map_save_event'",93],",",["T_WHITESPACE"," ",93],"[","]",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertIdentical",94],"(",["T_VARIABLE","$event",94],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",94],"]",",",["T_WHITESPACE"," ",94],["T_STRING","MigrateEvents",94],["T_DOUBLE_COLON","::",94],["T_STRING","MAP_SAVE",94],")",";",["T_WHITESPACE","\n    ",94],["T_COMMENT","\/\/ Validating the last row processed.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","assertIdentical",96],"(",["T_VARIABLE","$event",96],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",96],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",96],"]",",",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",96],")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertIdentical",97],"(",["T_VARIABLE","$event",97],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",97],"]","[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",97],"]",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertIdentical",98],"(",["T_VARIABLE","$event",98],"[",["T_CONSTANT_ENCAPSED_STRING","'fields'",98],"]","[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",98],"]",",",["T_WHITESPACE"," ",98],["T_LNUMBER","0",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_VARIABLE","$event",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","state",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","get",100],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.map_delete_event'",100],",",["T_WHITESPACE"," ",100],"[","]",")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertIdentical",101],"(",["T_VARIABLE","$event",101],",",["T_WHITESPACE"," ",101],"[","]",")",";",["T_WHITESPACE","\n\n    ",101],["T_VARIABLE","$event",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","state",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.pre_row_save_event'",103],",",["T_WHITESPACE"," ",103],"[","]",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","assertIdentical",104],"(",["T_VARIABLE","$event",104],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",104],"]",",",["T_WHITESPACE"," ",104],["T_STRING","MigrateEvents",104],["T_DOUBLE_COLON","::",104],["T_STRING","PRE_ROW_SAVE",104],")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertIdentical",105],"(",["T_VARIABLE","$event",105],"[",["T_CONSTANT_ENCAPSED_STRING","'migration'",105],"]",["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],"(",")",",",["T_WHITESPACE"," ",105],["T_VARIABLE","$migration",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","id",105],"(",")",")",";",["T_WHITESPACE","\n    ",105],["T_COMMENT","\/\/ Validating the last row processed.\n",106],["T_WHITESPACE","    ",107],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertIdentical",107],"(",["T_VARIABLE","$event",107],"[",["T_CONSTANT_ENCAPSED_STRING","'row'",107],"]",["T_OBJECT_OPERATOR","->",107],["T_STRING","getSourceProperty",107],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",107],")",",",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",107],")",";",["T_WHITESPACE","\n\n    ",107],["T_VARIABLE","$event",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","state",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","get",109],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.post_row_save_event'",109],",",["T_WHITESPACE"," ",109],"[","]",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertIdentical",110],"(",["T_VARIABLE","$event",110],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",110],"]",",",["T_WHITESPACE"," ",110],["T_STRING","MigrateEvents",110],["T_DOUBLE_COLON","::",110],["T_STRING","POST_ROW_SAVE",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertIdentical",111],"(",["T_VARIABLE","$event",111],"[",["T_CONSTANT_ENCAPSED_STRING","'migration'",111],"]",["T_OBJECT_OPERATOR","->",111],["T_STRING","id",111],"(",")",",",["T_WHITESPACE"," ",111],["T_VARIABLE","$migration",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","id",111],"(",")",")",";",["T_WHITESPACE","\n    ",111],["T_COMMENT","\/\/ Validating the last row processed.\n",112],["T_WHITESPACE","    ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","assertIdentical",113],"(",["T_VARIABLE","$event",113],"[",["T_CONSTANT_ENCAPSED_STRING","'row'",113],"]",["T_OBJECT_OPERATOR","->",113],["T_STRING","getSourceProperty",113],"(",["T_CONSTANT_ENCAPSED_STRING","'data'",113],")",",",["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",113],")",";",["T_WHITESPACE","\n    ",113],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","assertIdentical",114],"(",["T_VARIABLE","$event",114],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_values'",114],"]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",114],"]",",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",114],")",";",["T_WHITESPACE","\n\n    ",114],["T_COMMENT","\/\/ Generate a map delete event.\n",116],["T_WHITESPACE","    ",117],["T_VARIABLE","$migration",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","getIdMap",117],"(",")",["T_OBJECT_OPERATOR","->",117],["T_STRING","delete",117],"(","[",["T_CONSTANT_ENCAPSED_STRING","'data'",117],["T_WHITESPACE"," ",117],["T_DOUBLE_ARROW","=>",117],["T_WHITESPACE"," ",117],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",117],"]",")",";",["T_WHITESPACE","\n    ",117],["T_VARIABLE","$event",118],["T_WHITESPACE"," ",118],"=",["T_WHITESPACE"," ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","state",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","get",118],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.map_delete_event'",118],",",["T_WHITESPACE"," ",118],"[","]",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","assertIdentical",119],"(",["T_VARIABLE","$event",119],"[",["T_CONSTANT_ENCAPSED_STRING","'event_name'",119],"]",",",["T_WHITESPACE"," ",119],["T_STRING","MigrateEvents",119],["T_DOUBLE_COLON","::",119],["T_STRING","MAP_DELETE",119],")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertIdentical",120],"(",["T_VARIABLE","$event",120],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id'",120],"]",",",["T_WHITESPACE"," ",120],"[",["T_CONSTANT_ENCAPSED_STRING","'data'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'dummy value'",120],"]",")",";",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * Reacts to map save event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigrateMapSaveEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",123],["T_WHITESPACE","\n  ",130],["T_PUBLIC","public",131],["T_WHITESPACE"," ",131],["T_FUNCTION","function",131],["T_WHITESPACE"," ",131],["T_STRING","mapSaveEventRecorder",131],"(",["T_STRING","MigrateMapSaveEvent",131],["T_WHITESPACE"," ",131],["T_VARIABLE","$event",131],",",["T_WHITESPACE"," ",131],["T_VARIABLE","$name",131],")",["T_WHITESPACE"," ",131],"{",["T_WHITESPACE","\n    ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","state",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","set",132],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.map_save_event'",132],",",["T_WHITESPACE"," ",132],["T_ARRAY","array",132],"(",["T_WHITESPACE","\n      ",132],["T_CONSTANT_ENCAPSED_STRING","'event_name'",133],["T_WHITESPACE"," ",133],["T_DOUBLE_ARROW","=>",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$name",133],",",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'map'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_VARIABLE","$event",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","getMap",134],"(",")",",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'fields'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_VARIABLE","$event",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getFields",135],"(",")",",",["T_WHITESPACE","\n    ",135],")",")",";",["T_WHITESPACE","\n  ",136],"}",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * Reacts to map delete event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigrateMapDeleteEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",139],["T_WHITESPACE","\n  ",146],["T_PUBLIC","public",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","mapDeleteEventRecorder",147],"(",["T_STRING","MigrateMapDeleteEvent",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$event",147],",",["T_WHITESPACE"," ",147],["T_VARIABLE","$name",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","state",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","set",148],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.map_delete_event'",148],",",["T_WHITESPACE"," ",148],["T_ARRAY","array",148],"(",["T_WHITESPACE","\n      ",148],["T_CONSTANT_ENCAPSED_STRING","'event_name'",149],["T_WHITESPACE"," ",149],["T_DOUBLE_ARROW","=>",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$name",149],",",["T_WHITESPACE","\n      ",149],["T_CONSTANT_ENCAPSED_STRING","'map'",150],["T_WHITESPACE"," ",150],["T_DOUBLE_ARROW","=>",150],["T_WHITESPACE"," ",150],["T_VARIABLE","$event",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","getMap",150],"(",")",",",["T_WHITESPACE","\n      ",150],["T_CONSTANT_ENCAPSED_STRING","'source_id'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_VARIABLE","$event",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","getSourceId",151],"(",")",",",["T_WHITESPACE","\n    ",151],")",")",";",["T_WHITESPACE","\n  ",152],"}",["T_WHITESPACE","\n\n  ",153],["T_DOC_COMMENT","\/**\n   * Reacts to pre-import event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigrateImportEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",155],["T_WHITESPACE","\n  ",162],["T_PUBLIC","public",163],["T_WHITESPACE"," ",163],["T_FUNCTION","function",163],["T_WHITESPACE"," ",163],["T_STRING","preImportEventRecorder",163],"(",["T_STRING","MigrateImportEvent",163],["T_WHITESPACE"," ",163],["T_VARIABLE","$event",163],",",["T_WHITESPACE"," ",163],["T_VARIABLE","$name",163],")",["T_WHITESPACE"," ",163],"{",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","state",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","set",164],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.pre_import_event'",164],",",["T_WHITESPACE"," ",164],["T_ARRAY","array",164],"(",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'event_name'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$name",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'migration'",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$event",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","getMigration",166],"(",")",",",["T_WHITESPACE","\n    ",166],")",")",";",["T_WHITESPACE","\n  ",167],"}",["T_WHITESPACE","\n\n  ",168],["T_DOC_COMMENT","\/**\n   * Reacts to post-import event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigrateImportEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",170],["T_WHITESPACE","\n  ",177],["T_PUBLIC","public",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","postImportEventRecorder",178],"(",["T_STRING","MigrateImportEvent",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$event",178],",",["T_WHITESPACE"," ",178],["T_VARIABLE","$name",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","state",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","set",179],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.post_import_event'",179],",",["T_WHITESPACE"," ",179],["T_ARRAY","array",179],"(",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'event_name'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_VARIABLE","$name",180],",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'migration'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$event",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getMigration",181],"(",")",",",["T_WHITESPACE","\n    ",181],")",")",";",["T_WHITESPACE","\n  ",182],"}",["T_WHITESPACE","\n\n  ",183],["T_DOC_COMMENT","\/**\n   * Reacts to pre-row-save event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigratePreRowSaveEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",185],["T_WHITESPACE","\n  ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","preRowSaveEventRecorder",193],"(",["T_STRING","MigratePreRowSaveEvent",193],["T_WHITESPACE"," ",193],["T_VARIABLE","$event",193],",",["T_WHITESPACE"," ",193],["T_VARIABLE","$name",193],")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","state",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","set",194],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.pre_row_save_event'",194],",",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n      ",194],["T_CONSTANT_ENCAPSED_STRING","'event_name'",195],["T_WHITESPACE"," ",195],["T_DOUBLE_ARROW","=>",195],["T_WHITESPACE"," ",195],["T_VARIABLE","$name",195],",",["T_WHITESPACE","\n      ",195],["T_CONSTANT_ENCAPSED_STRING","'migration'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_VARIABLE","$event",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","getMigration",196],"(",")",",",["T_WHITESPACE","\n      ",196],["T_CONSTANT_ENCAPSED_STRING","'row'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$event",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","getRow",197],"(",")",",",["T_WHITESPACE","\n    ",197],")",")",";",["T_WHITESPACE","\n  ",198],"}",["T_WHITESPACE","\n\n  ",199],["T_DOC_COMMENT","\/**\n   * Reacts to post-row-save event.\n   *\n   * @param \\Drupal\\Migrate\\Event\\MigratePostRowSaveEvent $event\n   *   The migration event.\n   * @param string $name\n   *   The event name.\n   *\/",201],["T_WHITESPACE","\n  ",208],["T_PUBLIC","public",209],["T_WHITESPACE"," ",209],["T_FUNCTION","function",209],["T_WHITESPACE"," ",209],["T_STRING","postRowSaveEventRecorder",209],"(",["T_STRING","MigratePostRowSaveEvent",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$event",209],",",["T_WHITESPACE"," ",209],["T_VARIABLE","$name",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n    ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","state",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","set",210],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_events_test.post_row_save_event'",210],",",["T_WHITESPACE"," ",210],["T_ARRAY","array",210],"(",["T_WHITESPACE","\n      ",210],["T_CONSTANT_ENCAPSED_STRING","'event_name'",211],["T_WHITESPACE"," ",211],["T_DOUBLE_ARROW","=>",211],["T_WHITESPACE"," ",211],["T_VARIABLE","$name",211],",",["T_WHITESPACE","\n      ",211],["T_CONSTANT_ENCAPSED_STRING","'migration'",212],["T_WHITESPACE"," ",212],["T_DOUBLE_ARROW","=>",212],["T_WHITESPACE"," ",212],["T_VARIABLE","$event",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","getMigration",212],"(",")",",",["T_WHITESPACE","\n      ",212],["T_CONSTANT_ENCAPSED_STRING","'row'",213],["T_WHITESPACE"," ",213],["T_DOUBLE_ARROW","=>",213],["T_WHITESPACE"," ",213],["T_VARIABLE","$event",213],["T_OBJECT_OPERATOR","->",213],["T_STRING","getRow",213],"(",")",",",["T_WHITESPACE","\n      ",213],["T_CONSTANT_ENCAPSED_STRING","'destination_id_values'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_VARIABLE","$event",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","getDestinationIdValues",214],"(",")",",",["T_WHITESPACE","\n    ",214],")",")",";",["T_WHITESPACE","\n  ",215],"}",["T_WHITESPACE","\n\n",216],"}",["T_WHITESPACE","\n",218]]
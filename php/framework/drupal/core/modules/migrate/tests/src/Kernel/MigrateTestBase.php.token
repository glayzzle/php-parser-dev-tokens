[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTests",6],["T_NS_SEPARATOR","\\",6],["T_STRING","KernelTestBase",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateExecutable",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateMessageInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MigrateIdMapInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Migration",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Plugin",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MigrationInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","migrate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Row",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Creates abstract base class for migration tests.\n *\/",14],["T_WHITESPACE","\n",16],["T_ABSTRACT","abstract",17],["T_WHITESPACE"," ",17],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","MigrateTestBase",17],["T_WHITESPACE"," ",17],["T_EXTENDS","extends",17],["T_WHITESPACE"," ",17],["T_STRING","KernelTestBase",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","MigrateMessageInterface",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * TRUE to collect messages instead of displaying them.\n   *\n   * @var bool\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$collectMessages",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","FALSE",24],";",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * A two dimensional array of messages.\n   *\n   * The first key is the type of message, the second is just numeric. Values\n   * are the messages.\n   *\n   * @var array\n   *\/",26],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$migrateMessages",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The primary migration being tested.\n   *\n   * @var \\Drupal\\migrate\\Plugin\\MigrationInterface\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$migration",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * The source database connection.\n   *\n   * @var \\Drupal\\Core\\Database\\Connection\n   *\/",43],["T_WHITESPACE","\n  ",47],["T_PROTECTED","protected",48],["T_WHITESPACE"," ",48],["T_VARIABLE","$sourceDatabase",48],";",["T_WHITESPACE","\n\n  ",48],["T_PUBLIC","public",50],["T_WHITESPACE"," ",50],["T_STATIC","static",50],["T_WHITESPACE"," ",50],["T_VARIABLE","$modules",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_ARRAY","array",50],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",50],")",";",["T_WHITESPACE","\n\n  ",50],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",52],["T_WHITESPACE","\n  ",54],["T_PROTECTED","protected",55],["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],["T_STRING","setUp",55],"(",")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n    ",55],["T_STRING","parent",56],["T_DOUBLE_COLON","::",56],["T_STRING","setUp",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","createMigrationConnection",57],"(",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","sourceDatabase",58],["T_WHITESPACE"," ",58],"=",["T_WHITESPACE"," ",58],["T_STRING","Database",58],["T_DOUBLE_COLON","::",58],["T_STRING","getConnection",58],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",58],",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'migrate'",58],")",";",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Changes the database connection to the prefixed one.\n   *\n   * @todo Remove when we don't use global. https:\/\/www.drupal.org\/node\/2552791\n   *\/",61],["T_WHITESPACE","\n  ",65],["T_PRIVATE","private",66],["T_WHITESPACE"," ",66],["T_FUNCTION","function",66],["T_WHITESPACE"," ",66],["T_STRING","createMigrationConnection",66],"(",")",["T_WHITESPACE"," ",66],"{",["T_WHITESPACE","\n    ",66],["T_COMMENT","\/\/ If the backup already exists, something went terribly wrong.\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ This case is possible, because database connection info is a static\n",68],["T_WHITESPACE","    ",69],["T_COMMENT","\/\/ global state construct on the Database class, which at least persists\n",69],["T_WHITESPACE","    ",70],["T_COMMENT","\/\/ for all test methods executed in one PHP process.\n",70],["T_WHITESPACE","    ",71],["T_IF","if",71],["T_WHITESPACE"," ",71],"(",["T_STRING","Database",71],["T_DOUBLE_COLON","::",71],["T_STRING","getConnectionInfo",71],"(",["T_CONSTANT_ENCAPSED_STRING","'simpletest_original_migrate'",71],")",")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n      ",71],["T_THROW","throw",72],["T_WHITESPACE"," ",72],["T_NEW","new",72],["T_WHITESPACE"," ",72],["T_NS_SEPARATOR","\\",72],["T_STRING","RuntimeException",72],"(",["T_CONSTANT_ENCAPSED_STRING","\"Bad Database connection state: 'simpletest_original_migrate' connection key already exists. Broken test?\"",72],")",";",["T_WHITESPACE","\n    ",72],"}",["T_WHITESPACE","\n\n    ",73],["T_COMMENT","\/\/ Clone the current connection and replace the current prefix.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$connection_info",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","Database",76],["T_DOUBLE_COLON","::",76],["T_STRING","getConnectionInfo",76],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",76],")",";",["T_WHITESPACE","\n    ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(",["T_VARIABLE","$connection_info",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n      ",77],["T_STRING","Database",78],["T_DOUBLE_COLON","::",78],["T_STRING","renameConnection",78],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",78],",",["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'simpletest_original_migrate'",78],")",";",["T_WHITESPACE","\n    ",78],"}",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$connection_info",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_STRING","Database",80],["T_DOUBLE_COLON","::",80],["T_STRING","getConnectionInfo",80],"(",["T_CONSTANT_ENCAPSED_STRING","'default'",80],")",";",["T_WHITESPACE","\n    ",80],["T_FOREACH","foreach",81],["T_WHITESPACE"," ",81],"(",["T_VARIABLE","$connection_info",81],["T_WHITESPACE"," ",81],["T_AS","as",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$target",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$value",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$prefix",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","is_array",82],"(",["T_VARIABLE","$value",82],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",82],"]",")",["T_WHITESPACE"," ",82],"?",["T_WHITESPACE"," ",82],["T_VARIABLE","$value",82],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",82],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",82],"]",["T_WHITESPACE"," ",82],":",["T_WHITESPACE"," ",82],["T_VARIABLE","$value",82],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",82],"]",";",["T_WHITESPACE","\n      ",82],["T_COMMENT","\/\/ Simpletest uses 7 character prefixes at most so this can't cause\n",83],["T_WHITESPACE","      ",84],["T_COMMENT","\/\/ collisions.\n",84],["T_WHITESPACE","      ",85],["T_VARIABLE","$connection_info",85],"[",["T_VARIABLE","$target",85],"]","[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",85],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",85],"]",["T_WHITESPACE"," ",85],"=",["T_WHITESPACE"," ",85],["T_VARIABLE","$prefix",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'0'",85],";",["T_WHITESPACE","\n\n      ",85],["T_COMMENT","\/\/ Add the original simpletest prefix so SQLite can attach its database.\n",87],["T_WHITESPACE","      ",88],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Database\\Driver\\sqlite\\Connection::init()\n",88],["T_WHITESPACE","      ",89],["T_VARIABLE","$connection_info",89],"[",["T_VARIABLE","$target",89],"]","[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",89],"]","[",["T_VARIABLE","$value",89],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",89],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",89],"]","]",["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$value",89],"[",["T_CONSTANT_ENCAPSED_STRING","'prefix'",89],"]","[",["T_CONSTANT_ENCAPSED_STRING","'default'",89],"]",";",["T_WHITESPACE","\n    ",89],"}",["T_WHITESPACE","\n    ",90],["T_STRING","Database",91],["T_DOUBLE_COLON","::",91],["T_STRING","addConnectionInfo",91],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",91],",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'default'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$connection_info",91],"[",["T_CONSTANT_ENCAPSED_STRING","'default'",91],"]",")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PROTECTED","protected",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","tearDown",97],"(",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","cleanupMigrateConnection",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_STRING","parent",99],["T_DOUBLE_COLON","::",99],["T_STRING","tearDown",99],"(",")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","databaseDumpFiles",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[","]",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","collectMessages",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","FALSE",101],";",["T_WHITESPACE","\n    ",101],["T_UNSET","unset",102],"(",["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","migration",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","migrateMessages",102],")",";",["T_WHITESPACE","\n  ",102],"}",["T_WHITESPACE","\n\n  ",103],["T_DOC_COMMENT","\/**\n   * Cleans up the test migrate connection.\n   *\n   * @todo Remove when we don't use global. https:\/\/www.drupal.org\/node\/2552791\n   *\/",105],["T_WHITESPACE","\n  ",109],["T_PRIVATE","private",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","cleanupMigrateConnection",110],"(",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n    ",110],["T_STRING","Database",111],["T_DOUBLE_COLON","::",111],["T_STRING","removeConnection",111],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$original_connection_info",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_STRING","Database",112],["T_DOUBLE_COLON","::",112],["T_STRING","getConnectionInfo",112],"(",["T_CONSTANT_ENCAPSED_STRING","'simpletest_original_migrate'",112],")",";",["T_WHITESPACE","\n    ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_VARIABLE","$original_connection_info",113],")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n      ",113],["T_STRING","Database",114],["T_DOUBLE_COLON","::",114],["T_STRING","renameConnection",114],"(",["T_CONSTANT_ENCAPSED_STRING","'simpletest_original_migrate'",114],",",["T_WHITESPACE"," ",114],["T_CONSTANT_ENCAPSED_STRING","'migrate'",114],")",";",["T_WHITESPACE","\n    ",114],"}",["T_WHITESPACE","\n  ",115],"}",["T_WHITESPACE","\n\n  ",116],["T_DOC_COMMENT","\/**\n   * Prepare any dependent migrations.\n   *\n   * @param array $id_mappings\n   *   A list of ID mappings keyed by migration IDs. Each ID mapping is a list\n   *   of two arrays, the first are source IDs and the second are destination\n   *   IDs.\n   *\/",118],["T_WHITESPACE","\n  ",125],["T_PROTECTED","protected",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","prepareMigrations",126],"(",["T_ARRAY","array",126],["T_WHITESPACE"," ",126],["T_VARIABLE","$id_mappings",126],")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$manager",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","container",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","get",127],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",127],")",";",["T_WHITESPACE","\n    ",127],["T_FOREACH","foreach",128],["T_WHITESPACE"," ",128],"(",["T_VARIABLE","$id_mappings",128],["T_WHITESPACE"," ",128],["T_AS","as",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$migration_id",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$data",128],")",["T_WHITESPACE"," ",128],"{",["T_WHITESPACE","\n      ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$manager",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","createInstances",129],"(",["T_VARIABLE","$migration_id",129],")",["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$migration",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$id_map",130],["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$migration",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getIdMap",130],"(",")",";",["T_WHITESPACE","\n        ",130],["T_VARIABLE","$id_map",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","setMessage",131],"(",["T_VARIABLE","$this",131],")",";",["T_WHITESPACE","\n        ",131],["T_VARIABLE","$source_ids",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_VARIABLE","$migration",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","getSourcePlugin",132],"(",")",["T_OBJECT_OPERATOR","->",132],["T_STRING","getIds",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_FOREACH","foreach",133],["T_WHITESPACE"," ",133],"(",["T_VARIABLE","$data",133],["T_WHITESPACE"," ",133],["T_AS","as",133],["T_WHITESPACE"," ",133],["T_VARIABLE","$id_mapping",133],")",["T_WHITESPACE"," ",133],"{",["T_WHITESPACE","\n          ",133],["T_VARIABLE","$row",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","Row",134],"(",["T_STRING","array_combine",134],"(",["T_STRING","array_keys",134],"(",["T_VARIABLE","$source_ids",134],")",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$id_mapping",134],"[",["T_LNUMBER","0",134],"]",")",",",["T_WHITESPACE"," ",134],["T_VARIABLE","$source_ids",134],")",";",["T_WHITESPACE","\n          ",134],["T_VARIABLE","$id_map",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","saveIdMapping",135],"(",["T_VARIABLE","$row",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$id_mapping",135],"[",["T_LNUMBER","1",135],"]",")",";",["T_WHITESPACE","\n        ",135],"}",["T_WHITESPACE","\n      ",136],"}",["T_WHITESPACE","\n    ",137],"}",["T_WHITESPACE","\n  ",138],"}",["T_WHITESPACE","\n\n  ",139],["T_DOC_COMMENT","\/**\n   * Modify a migration's configuration before executing it.\n   *\n   * @param \\Drupal\\migrate\\Plugin\\MigrationInterface $migration\n   *   The migration to execute.\n   *\/",141],["T_WHITESPACE","\n  ",146],["T_PROTECTED","protected",147],["T_WHITESPACE"," ",147],["T_FUNCTION","function",147],["T_WHITESPACE"," ",147],["T_STRING","prepareMigration",147],"(",["T_STRING","MigrationInterface",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$migration",147],")",["T_WHITESPACE"," ",147],"{",["T_WHITESPACE","\n    ",147],["T_COMMENT","\/\/ Default implementation for test classes not requiring modification.\n",148],["T_WHITESPACE","  ",149],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * Executes a single migration.\n   *\n   * @param string|\\Drupal\\migrate\\Plugin\\MigrationInterface $migration\n   *   The migration to execute, or its ID.\n   *\/",151],["T_WHITESPACE","\n  ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","executeMigration",157],"(",["T_VARIABLE","$migration",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n    ",157],["T_IF","if",158],["T_WHITESPACE"," ",158],"(",["T_STRING","is_string",158],"(",["T_VARIABLE","$migration",158],")",")",["T_WHITESPACE"," ",158],"{",["T_WHITESPACE","\n      ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","migration",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","getMigration",159],"(",["T_VARIABLE","$migration",159],")",";",["T_WHITESPACE","\n    ",159],"}",["T_WHITESPACE","\n    ",160],["T_ELSE","else",161],["T_WHITESPACE"," ",161],"{",["T_WHITESPACE","\n      ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","migration",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$migration",162],";",["T_WHITESPACE","\n    ",162],"}",["T_WHITESPACE","\n    ",163],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_WHITESPACE"," ",164],["T_INSTANCEOF","instanceof",164],["T_WHITESPACE"," ",164],["T_STRING","MigrateDumpAlterInterface",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_STATIC","static",165],["T_DOUBLE_COLON","::",165],["T_STRING","migrateDumpAlter",165],"(",["T_VARIABLE","$this",165],")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","prepareMigration",168],"(",["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","migration",168],")",";",["T_WHITESPACE","\n    ",168],"(",["T_NEW","new",169],["T_WHITESPACE"," ",169],["T_STRING","MigrateExecutable",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","migration",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],")",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","import",169],"(",")",";",["T_WHITESPACE","\n  ",169],"}",["T_WHITESPACE","\n\n  ",170],["T_DOC_COMMENT","\/**\n   * Executes a set of migrations in dependency order.\n   *\n   * @param string[] $ids\n   *   Array of migration IDs, in any order.\n   *\/",172],["T_WHITESPACE","\n  ",177],["T_PROTECTED","protected",178],["T_WHITESPACE"," ",178],["T_FUNCTION","function",178],["T_WHITESPACE"," ",178],["T_STRING","executeMigrations",178],"(",["T_ARRAY","array",178],["T_WHITESPACE"," ",178],["T_VARIABLE","$ids",178],")",["T_WHITESPACE"," ",178],"{",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$manager",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","container",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","get",179],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",179],")",";",["T_WHITESPACE","\n    ",179],["T_STRING","array_walk",180],"(",["T_VARIABLE","$ids",180],",",["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$id",180],")",["T_WHITESPACE"," ",180],["T_USE","use",180],["T_WHITESPACE"," ",180],"(",["T_VARIABLE","$manager",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n      ",180],["T_COMMENT","\/\/ This is possibly a base plugin ID and we want to run all derivatives.\n",181],["T_WHITESPACE","      ",182],["T_VARIABLE","$instances",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$manager",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","createInstances",182],"(",["T_VARIABLE","$id",182],")",";",["T_WHITESPACE","\n      ",182],["T_STRING","array_walk",183],"(",["T_VARIABLE","$instances",183],",",["T_WHITESPACE"," ",183],"[",["T_VARIABLE","$this",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'executeMigration'",183],"]",")",";",["T_WHITESPACE","\n    ",183],"}",")",";",["T_WHITESPACE","\n  ",184],"}",["T_WHITESPACE","\n\n  ",185],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",187],["T_WHITESPACE","\n  ",189],["T_PUBLIC","public",190],["T_WHITESPACE"," ",190],["T_FUNCTION","function",190],["T_WHITESPACE"," ",190],["T_STRING","display",190],"(",["T_VARIABLE","$message",190],",",["T_WHITESPACE"," ",190],["T_VARIABLE","$type",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'status'",190],")",["T_WHITESPACE"," ",190],"{",["T_WHITESPACE","\n    ",190],["T_IF","if",191],["T_WHITESPACE"," ",191],"(",["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","collectMessages",191],")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n      ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","migrateMessages",192],"[",["T_VARIABLE","$type",192],"]","[","]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_VARIABLE","$message",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n    ",193],["T_ELSE","else",194],["T_WHITESPACE"," ",194],"{",["T_WHITESPACE","\n      ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assert",195],"(",["T_VARIABLE","$type",195],["T_WHITESPACE"," ",195],["T_IS_EQUAL","==",195],["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'status'",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$message",195],",",["T_WHITESPACE"," ",195],["T_CONSTANT_ENCAPSED_STRING","'migrate'",195],")",";",["T_WHITESPACE","\n    ",195],"}",["T_WHITESPACE","\n  ",196],"}",["T_WHITESPACE","\n\n  ",197],["T_DOC_COMMENT","\/**\n   * Start collecting messages and erase previous messages.\n   *\/",199],["T_WHITESPACE","\n  ",201],["T_PUBLIC","public",202],["T_WHITESPACE"," ",202],["T_FUNCTION","function",202],["T_WHITESPACE"," ",202],["T_STRING","startCollectingMessages",202],"(",")",["T_WHITESPACE"," ",202],"{",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","collectMessages",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_STRING","TRUE",203],";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","migrateMessages",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",")",";",["T_WHITESPACE","\n  ",204],"}",["T_WHITESPACE","\n\n  ",205],["T_DOC_COMMENT","\/**\n   * Stop collecting messages.\n   *\/",207],["T_WHITESPACE","\n  ",209],["T_PUBLIC","public",210],["T_WHITESPACE"," ",210],["T_FUNCTION","function",210],["T_WHITESPACE"," ",210],["T_STRING","stopCollectingMessages",210],"(",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n    ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","collectMessages",211],["T_WHITESPACE"," ",211],"=",["T_WHITESPACE"," ",211],["T_STRING","FALSE",211],";",["T_WHITESPACE","\n  ",211],"}",["T_WHITESPACE","\n\n  ",212],["T_DOC_COMMENT","\/**\n   * Records a failure in the map table of a specific migration.\n   *\n   * This is done in order to test scenarios which require a failed row.\n   *\n   * @param string|\\Drupal\\migrate\\Plugin\\MigrationInterface $migration\n   *   The migration entity, or its ID.\n   * @param array $row\n   *   The raw source row which \"failed\".\n   * @param int $status\n   *   (optional) The failure status. Should be one of the\n   *   MigrateIdMapInterface::STATUS_* constants. Defaults to\n   *   MigrateIdMapInterface::STATUS_FAILED.\n   *\/",214],["T_WHITESPACE","\n  ",227],["T_PROTECTED","protected",228],["T_WHITESPACE"," ",228],["T_FUNCTION","function",228],["T_WHITESPACE"," ",228],["T_STRING","mockFailure",228],"(",["T_VARIABLE","$migration",228],",",["T_WHITESPACE"," ",228],["T_ARRAY","array",228],["T_WHITESPACE"," ",228],["T_VARIABLE","$row",228],",",["T_WHITESPACE"," ",228],["T_VARIABLE","$status",228],["T_WHITESPACE"," ",228],"=",["T_WHITESPACE"," ",228],["T_STRING","MigrateIdMapInterface",228],["T_DOUBLE_COLON","::",228],["T_STRING","STATUS_FAILED",228],")",["T_WHITESPACE"," ",228],"{",["T_WHITESPACE","\n    ",228],["T_IF","if",229],["T_WHITESPACE"," ",229],"(",["T_STRING","is_string",229],"(",["T_VARIABLE","$migration",229],")",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n      ",229],["T_VARIABLE","$migration",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","getMigration",230],"(",["T_VARIABLE","$migration",230],")",";",["T_WHITESPACE","\n    ",230],"}",["T_WHITESPACE","\n    ",231],["T_DOC_COMMENT","\/** @var \\Drupal\\migrate\\Plugin\\MigrationInterface $migration *\/",232],["T_WHITESPACE","\n    ",232],["T_VARIABLE","$destination",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","array_map",233],"(",["T_FUNCTION","function",233],"(",")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE"," ",233],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_STRING","NULL",233],";",["T_WHITESPACE"," ",233],"}",",",["T_WHITESPACE"," ",233],["T_VARIABLE","$migration",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","getDestinationPlugin",233],"(",")",["T_OBJECT_OPERATOR","->",233],["T_STRING","getIds",233],"(",")",")",";",["T_WHITESPACE","\n    ",233],["T_VARIABLE","$row",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_NEW","new",234],["T_WHITESPACE"," ",234],["T_STRING","Row",234],"(",["T_VARIABLE","$row",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$migration",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","getSourcePlugin",234],"(",")",["T_OBJECT_OPERATOR","->",234],["T_STRING","getIds",234],"(",")",")",";",["T_WHITESPACE","\n    ",234],["T_VARIABLE","$migration",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","getIdMap",235],"(",")",["T_OBJECT_OPERATOR","->",235],["T_STRING","saveIdMapping",235],"(",["T_VARIABLE","$row",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$destination",235],",",["T_WHITESPACE"," ",235],["T_VARIABLE","$status",235],")",";",["T_WHITESPACE","\n  ",235],"}",["T_WHITESPACE","\n\n  ",236],["T_DOC_COMMENT","\/**\n   * Gets the migration plugin.\n   *\n   * @param $plugin_id\n   *   The plugin ID of the migration to get.\n   *\n   * @return \\Drupal\\migrate\\Plugin\\Migration\n   *   The migration plugin.\n   *\/",238],["T_WHITESPACE","\n  ",246],["T_PROTECTED","protected",247],["T_WHITESPACE"," ",247],["T_FUNCTION","function",247],["T_WHITESPACE"," ",247],["T_STRING","getMigration",247],"(",["T_VARIABLE","$plugin_id",247],")",["T_WHITESPACE"," ",247],"{",["T_WHITESPACE","\n    ",247],["T_RETURN","return",248],["T_WHITESPACE"," ",248],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","container",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","get",248],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",248],")",["T_OBJECT_OPERATOR","->",248],["T_STRING","createInstance",248],"(",["T_VARIABLE","$plugin_id",248],")",";",["T_WHITESPACE","\n  ",248],"}",["T_WHITESPACE","\n\n",249],"}",["T_WHITESPACE","\n",251]]
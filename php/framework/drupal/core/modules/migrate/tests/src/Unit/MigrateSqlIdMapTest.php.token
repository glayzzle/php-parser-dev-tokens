[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Unit",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Driver",5],["T_NS_SEPARATOR","\\",5],["T_STRING","sqlite",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Connection",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrationInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateException",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Plugin",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateIdMapInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Row",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * Tests the SQL ID map plugin.\n *\n * @group migrate\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","MigrateSqlIdMapTest",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","MigrateTestCase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * The migration configuration, initialized to set the ID and destination IDs.\n   *\n   * @var array\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$migrationConfiguration",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],"[",["T_WHITESPACE","\n    ",23],["T_CONSTANT_ENCAPSED_STRING","'id'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],["T_CONSTANT_ENCAPSED_STRING","'sql_idmap_test'",24],",",["T_WHITESPACE","\n  ",24],"]",";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * The source IDs.\n   *\n   * @var array\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$sourceIds",32],["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],"[",["T_WHITESPACE","\n    ",32],["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],"[",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'type'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_CONSTANT_ENCAPSED_STRING","'string'",34],",",["T_WHITESPACE","\n    ",34],"]",",",["T_WHITESPACE","\n  ",35],"]",";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * The destination IDs.\n   *\n   * @var array\n   *\/",38],["T_WHITESPACE","\n  ",42],["T_PROTECTED","protected",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$destinationIds",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],"[",["T_WHITESPACE","\n    ",43],["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],"[",["T_WHITESPACE","\n      ",44],["T_CONSTANT_ENCAPSED_STRING","'type'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'string'",45],",",["T_WHITESPACE","\n    ",45],"]",",",["T_WHITESPACE","\n  ",46],"]",";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * The database connection.\n   *\n   * @var \\Drupal\\Core\\Database\\Connection\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$database",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PROTECTED","protected",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","setUp",59],"(",")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","database",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_VARIABLE","$this",60],["T_OBJECT_OPERATOR","->",60],["T_STRING","getDatabase",60],"(","[","]",")",";",["T_WHITESPACE","\n  ",60],"}",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * Saves a single ID mapping row in the database.\n   *\n   * @param array $map\n   *   The row to save.\n   *\/",63],["T_WHITESPACE","\n  ",68],["T_PROTECTED","protected",69],["T_WHITESPACE"," ",69],["T_FUNCTION","function",69],["T_WHITESPACE"," ",69],["T_STRING","saveMap",69],"(",["T_ARRAY","array",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$map",69],")",["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$table",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'migrate_map_sql_idmap_test'",70],";",["T_WHITESPACE","\n\n    ",70],["T_VARIABLE","$schema",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","database",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","schema",72],"(",")",";",["T_WHITESPACE","\n    ",72],["T_COMMENT","\/\/ If the table already exists, add any columns which are in the map array,\n",73],["T_WHITESPACE","    ",74],["T_COMMENT","\/\/ but don't yet exist in the table. Yay, flexibility!\n",74],["T_WHITESPACE","    ",75],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$schema",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","tableExists",75],"(",["T_VARIABLE","$table",75],")",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n      ",75],["T_FOREACH","foreach",76],["T_WHITESPACE"," ",76],"(",["T_STRING","array_keys",76],"(",["T_VARIABLE","$map",76],")",["T_WHITESPACE"," ",76],["T_AS","as",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$field",76],")",["T_WHITESPACE"," ",76],"{",["T_WHITESPACE","\n        ",76],["T_IF","if",77],["T_WHITESPACE"," ",77],"(","!",["T_VARIABLE","$schema",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","fieldExists",77],"(",["T_VARIABLE","$table",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$field",77],")",")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n          ",77],["T_VARIABLE","$schema",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","addField",78],"(",["T_VARIABLE","$table",78],",",["T_WHITESPACE"," ",78],["T_VARIABLE","$field",78],",",["T_WHITESPACE"," ",78],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'text'",78],"]",")",";",["T_WHITESPACE","\n        ",78],"}",["T_WHITESPACE","\n      ",79],"}",["T_WHITESPACE","\n    ",80],"}",["T_WHITESPACE","\n    ",81],["T_ELSE","else",82],["T_WHITESPACE"," ",82],"{",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$schema",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","createTable",83],"(",["T_VARIABLE","$table",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","createSchemaFromRow",83],"(",["T_VARIABLE","$map",83],")",")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n\n    ",84],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","database",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","insert",86],"(",["T_VARIABLE","$table",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","fields",86],"(",["T_VARIABLE","$map",86],")",["T_OBJECT_OPERATOR","->",86],["T_STRING","execute",86],"(",")",";",["T_WHITESPACE","\n  ",86],"}",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Creates a test SQL ID map plugin.\n   *\n   * @return \\Drupal\\Tests\\migrate\\Unit\\TestSqlIdMap\n   *   A SQL ID map plugin test instance.\n   *\/",89],["T_WHITESPACE","\n  ",94],["T_PROTECTED","protected",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","getIdMap",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$migration",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$this",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getMigration",96],"(",")",";",["T_WHITESPACE","\n\n    ",96],["T_VARIABLE","$plugin",98],["T_WHITESPACE"," ",98],"=",["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getMock",98],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\migrate\\Plugin\\MigrateSourceInterface'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$plugin",99],["T_WHITESPACE","\n      ",99],["T_OBJECT_OPERATOR","->",100],["T_STRING","method",100],"(",["T_CONSTANT_ENCAPSED_STRING","'getIds'",100],")",["T_WHITESPACE","\n      ",100],["T_OBJECT_OPERATOR","->",101],["T_STRING","willReturn",101],"(",["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","sourceIds",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$migration",102],["T_WHITESPACE","\n      ",102],["T_OBJECT_OPERATOR","->",103],["T_STRING","method",103],"(",["T_CONSTANT_ENCAPSED_STRING","'getSourcePlugin'",103],")",["T_WHITESPACE","\n      ",103],["T_OBJECT_OPERATOR","->",104],["T_STRING","willReturn",104],"(",["T_VARIABLE","$plugin",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_VARIABLE","$plugin",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","getMock",106],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\migrate\\Plugin\\MigrateDestinationInterface'",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$plugin",107],["T_WHITESPACE","\n      ",107],["T_OBJECT_OPERATOR","->",108],["T_STRING","method",108],"(",["T_CONSTANT_ENCAPSED_STRING","'getIds'",108],")",["T_WHITESPACE","\n      ",108],["T_OBJECT_OPERATOR","->",109],["T_STRING","willReturn",109],"(",["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","destinationIds",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$migration",110],["T_WHITESPACE","\n      ",110],["T_OBJECT_OPERATOR","->",111],["T_STRING","method",111],"(",["T_CONSTANT_ENCAPSED_STRING","'getDestinationPlugin'",111],")",["T_WHITESPACE","\n      ",111],["T_OBJECT_OPERATOR","->",112],["T_STRING","willReturn",112],"(",["T_VARIABLE","$plugin",112],")",";",["T_WHITESPACE","\n    ",112],["T_VARIABLE","$event_dispatcher",113],["T_WHITESPACE"," ",113],"=",["T_WHITESPACE"," ",113],["T_VARIABLE","$this",113],["T_OBJECT_OPERATOR","->",113],["T_STRING","getMock",113],"(",["T_CONSTANT_ENCAPSED_STRING","'Symfony\\Component\\EventDispatcher\\EventDispatcherInterface'",113],")",";",["T_WHITESPACE","\n\n    ",113],["T_VARIABLE","$id_map",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_NEW","new",115],["T_WHITESPACE"," ",115],["T_STRING","TestSqlIdMap",115],"(",["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","database",115],",",["T_WHITESPACE"," ",115],"[","]",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'sql'",115],",",["T_WHITESPACE"," ",115],"[","]",",",["T_WHITESPACE"," ",115],["T_VARIABLE","$migration",115],",",["T_WHITESPACE"," ",115],["T_VARIABLE","$event_dispatcher",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$migration",116],["T_WHITESPACE","\n      ",116],["T_OBJECT_OPERATOR","->",117],["T_STRING","method",117],"(",["T_CONSTANT_ENCAPSED_STRING","'getIdMap'",117],")",["T_WHITESPACE","\n      ",117],["T_OBJECT_OPERATOR","->",118],["T_STRING","willReturn",118],"(",["T_VARIABLE","$id_map",118],")",";",["T_WHITESPACE","\n\n    ",118],["T_RETURN","return",120],["T_WHITESPACE"," ",120],["T_VARIABLE","$id_map",120],";",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * Sets defaults for SQL ID map plugin tests.\n   *\n   * @return array\n   *   An associative array with the following keys:\n   *   - source_row_status\n   *   - rollback_action\n   *   - hash\n   *\/",123],["T_WHITESPACE","\n  ",131],["T_PROTECTED","protected",132],["T_WHITESPACE"," ",132],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","idMapDefaults",132],"(",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$defaults",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_ARRAY","array",133],"(",["T_WHITESPACE","\n      ",133],["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",134],["T_WHITESPACE"," ",134],["T_DOUBLE_ARROW","=>",134],["T_WHITESPACE"," ",134],["T_STRING","MigrateIdMapInterface",134],["T_DOUBLE_COLON","::",134],["T_STRING","STATUS_IMPORTED",134],",",["T_WHITESPACE","\n      ",134],["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",135],["T_WHITESPACE"," ",135],["T_DOUBLE_ARROW","=>",135],["T_WHITESPACE"," ",135],["T_STRING","MigrateIdMapInterface",135],["T_DOUBLE_COLON","::",135],["T_STRING","ROLLBACK_DELETE",135],",",["T_WHITESPACE","\n      ",135],["T_CONSTANT_ENCAPSED_STRING","'hash'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","''",136],",",["T_WHITESPACE","\n    ",136],")",";",["T_WHITESPACE","\n    ",137],["T_COMMENT","\/\/ By default, the PDO SQLite driver strongly prefers to return strings\n",138],["T_WHITESPACE","    ",139],["T_COMMENT","\/\/ from SELECT queries. Even for columns that don't store strings. Even\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ if the connection's STRINGIFY_FETCHES attribute is FALSE. This can cause\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ assertSame() calls to fail, since 0 !== '0'. Casting these values to\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ strings isn't the most elegant workaround, but it allows the assertions\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ to pass properly.\n",143],["T_WHITESPACE","    ",144],["T_IF","if",144],["T_WHITESPACE"," ",144],"(",["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","database",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","driver",144],"(",")",["T_WHITESPACE"," ",144],["T_IS_EQUAL","==",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'sqlite'",144],")",["T_WHITESPACE"," ",144],"{",["T_WHITESPACE","\n      ",144],["T_VARIABLE","$defaults",145],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",145],"]",["T_WHITESPACE"," ",145],"=",["T_WHITESPACE"," ",145],["T_STRING_CAST","(string)",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$defaults",145],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",145],"]",";",["T_WHITESPACE","\n      ",145],["T_VARIABLE","$defaults",146],"[",["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",146],"]",["T_WHITESPACE"," ",146],"=",["T_WHITESPACE"," ",146],["T_STRING_CAST","(string)",146],["T_WHITESPACE"," ",146],["T_VARIABLE","$defaults",146],"[",["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",146],"]",";",["T_WHITESPACE","\n    ",146],"}",["T_WHITESPACE","\n    ",147],["T_RETURN","return",148],["T_WHITESPACE"," ",148],["T_VARIABLE","$defaults",148],";",["T_WHITESPACE","\n  ",148],"}",["T_WHITESPACE","\n\n  ",149],["T_DOC_COMMENT","\/**\n   * Tests the ID mapping method.\n   *\n   * Create two ID mappings and update the second to verify that:\n   * - saving new to empty tables work.\n   * - saving new to nonempty tables work.\n   * - updating work.\n   *\/",151],["T_WHITESPACE","\n  ",158],["T_PUBLIC","public",159],["T_WHITESPACE"," ",159],["T_FUNCTION","function",159],["T_WHITESPACE"," ",159],["T_STRING","testSaveIdMapping",159],"(",")",["T_WHITESPACE"," ",159],"{",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$source",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_ARRAY","array",160],"(",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_CONSTANT_ENCAPSED_STRING","'source_value'",161],",",["T_WHITESPACE","\n    ",161],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$row",163],["T_WHITESPACE"," ",163],"=",["T_WHITESPACE"," ",163],["T_NEW","new",163],["T_WHITESPACE"," ",163],["T_STRING","Row",163],"(",["T_VARIABLE","$source",163],",",["T_WHITESPACE"," ",163],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",163],["T_WHITESPACE"," ",163],["T_DOUBLE_ARROW","=>",163],["T_WHITESPACE"," ",163],"[","]","]",")",";",["T_WHITESPACE","\n    ",163],["T_VARIABLE","$id_map",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getIdMap",164],"(",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$id_map",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","saveIdMapping",165],"(",["T_VARIABLE","$row",165],",",["T_WHITESPACE"," ",165],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",165],["T_WHITESPACE"," ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_LNUMBER","2",165],"]",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$expected_result",166],["T_WHITESPACE"," ",166],"=",["T_WHITESPACE"," ",166],"[",["T_WHITESPACE","\n      ",166],"[",["T_WHITESPACE","\n        ",167],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",168],["T_WHITESPACE"," ",168],["T_DOUBLE_ARROW","=>",168],["T_WHITESPACE"," ",168],["T_CONSTANT_ENCAPSED_STRING","'source_value'",168],",",["T_WHITESPACE","\n        ",168],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","getIdMap",169],"(",")",["T_OBJECT_OPERATOR","->",169],["T_STRING","getSourceIDsHash",169],"(",["T_VARIABLE","$source",169],")",",",["T_WHITESPACE","\n        ",169],["T_CONSTANT_ENCAPSED_STRING","'destid1'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_LNUMBER","2",170],",",["T_WHITESPACE","\n      ",170],"]",["T_WHITESPACE"," ",171],"+",["T_WHITESPACE"," ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","idMapDefaults",171],"(",")",",",["T_WHITESPACE","\n    ",171],"]",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","queryResultTest",173],"(",["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","getIdMapContents",173],"(",")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$expected_result",173],")",";",["T_WHITESPACE","\n    ",173],["T_VARIABLE","$source",174],["T_WHITESPACE"," ",174],"=",["T_WHITESPACE"," ",174],"[",["T_WHITESPACE","\n      ",174],["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",175],["T_WHITESPACE"," ",175],["T_DOUBLE_ARROW","=>",175],["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'source_value_1'",175],",",["T_WHITESPACE","\n    ",175],"]",";",["T_WHITESPACE","\n    ",176],["T_VARIABLE","$row",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_NEW","new",177],["T_WHITESPACE"," ",177],["T_STRING","Row",177],"(",["T_VARIABLE","$source",177],",",["T_WHITESPACE"," ",177],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],"[","]","]",")",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$id_map",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","saveIdMapping",178],"(",["T_VARIABLE","$row",178],",",["T_WHITESPACE"," ",178],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],["T_LNUMBER","3",178],"]",")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$expected_result",179],"[","]",["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],"[",["T_WHITESPACE","\n      ",179],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'source_value_1'",180],",",["T_WHITESPACE","\n      ",180],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",181],["T_WHITESPACE"," ",181],["T_DOUBLE_ARROW","=>",181],["T_WHITESPACE"," ",181],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getIdMap",181],"(",")",["T_OBJECT_OPERATOR","->",181],["T_STRING","getSourceIDsHash",181],"(",["T_VARIABLE","$source",181],")",",",["T_WHITESPACE","\n      ",181],["T_CONSTANT_ENCAPSED_STRING","'destid1'",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_LNUMBER","3",182],",",["T_WHITESPACE","\n    ",182],"]",["T_WHITESPACE"," ",183],"+",["T_WHITESPACE"," ",183],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","idMapDefaults",183],"(",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","queryResultTest",184],"(",["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getIdMapContents",184],"(",")",",",["T_WHITESPACE"," ",184],["T_VARIABLE","$expected_result",184],")",";",["T_WHITESPACE","\n    ",184],["T_VARIABLE","$id_map",185],["T_OBJECT_OPERATOR","->",185],["T_STRING","saveIdMapping",185],"(",["T_VARIABLE","$row",185],",",["T_WHITESPACE"," ",185],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_LNUMBER","4",185],"]",")",";",["T_WHITESPACE","\n    ",185],["T_VARIABLE","$expected_result",186],"[",["T_LNUMBER","1",186],"]","[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",186],"]",["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_LNUMBER","4",186],";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","queryResultTest",187],"(",["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getIdMapContents",187],"(",")",",",["T_WHITESPACE"," ",187],["T_VARIABLE","$expected_result",187],")",";",["T_WHITESPACE","\n  ",187],"}",["T_WHITESPACE","\n\n  ",188],["T_DOC_COMMENT","\/**\n   * Tests the SQL ID map set message method.\n   *\/",190],["T_WHITESPACE","\n  ",192],["T_PUBLIC","public",193],["T_WHITESPACE"," ",193],["T_FUNCTION","function",193],["T_WHITESPACE"," ",193],["T_STRING","testSetMessage",193],"(",")",["T_WHITESPACE"," ",193],"{",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$message",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$this",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getMock",194],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal\\migrate\\MigrateMessageInterface'",194],")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$id_map",195],["T_WHITESPACE"," ",195],"=",["T_WHITESPACE"," ",195],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","getIdMap",195],"(",")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$id_map",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","setMessage",196],"(",["T_VARIABLE","$message",196],")",";",["T_WHITESPACE","\n    ",196],["T_VARIABLE","$this",197],["T_OBJECT_OPERATOR","->",197],["T_STRING","assertAttributeEquals",197],"(",["T_VARIABLE","$message",197],",",["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'message'",197],",",["T_WHITESPACE"," ",197],["T_VARIABLE","$id_map",197],")",";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n  ",198],["T_DOC_COMMENT","\/**\n   * Tests the clear messages method.\n   *\/",200],["T_WHITESPACE","\n  ",202],["T_PUBLIC","public",203],["T_WHITESPACE"," ",203],["T_FUNCTION","function",203],["T_WHITESPACE"," ",203],["T_STRING","testClearMessages",203],"(",")",["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$message",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_CONSTANT_ENCAPSED_STRING","'Hello world.'",204],";",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$expected_results",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],"[",["T_LNUMBER","0",205],",",["T_WHITESPACE"," ",205],["T_LNUMBER","1",205],",",["T_WHITESPACE"," ",205],["T_LNUMBER","2",205],",",["T_WHITESPACE"," ",205],["T_LNUMBER","3",205],"]",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$id_map",206],["T_WHITESPACE"," ",206],"=",["T_WHITESPACE"," ",206],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","getIdMap",206],"(",")",";",["T_WHITESPACE","\n\n    ",206],["T_COMMENT","\/\/ Insert 4 message for later delete.\n",208],["T_WHITESPACE","    ",209],["T_FOREACH","foreach",209],["T_WHITESPACE"," ",209],"(",["T_VARIABLE","$expected_results",209],["T_WHITESPACE"," ",209],["T_AS","as",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$key",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_VARIABLE","$expected_result",209],")",["T_WHITESPACE"," ",209],"{",["T_WHITESPACE","\n      ",209],["T_VARIABLE","$id_map",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","saveMessage",210],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",210],["T_WHITESPACE"," ",210],["T_DOUBLE_ARROW","=>",210],["T_WHITESPACE"," ",210],["T_VARIABLE","$key",210],"]",",",["T_WHITESPACE"," ",210],["T_VARIABLE","$message",210],")",";",["T_WHITESPACE","\n    ",210],"}",["T_WHITESPACE","\n\n    ",211],["T_COMMENT","\/\/ Truncate and check that 4 messages were deleted.\n",213],["T_WHITESPACE","    ",214],["T_VARIABLE","$this",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","assertEquals",214],"(",["T_VARIABLE","$id_map",214],["T_OBJECT_OPERATOR","->",214],["T_STRING","messageCount",214],"(",")",",",["T_WHITESPACE"," ",214],["T_LNUMBER","4",214],")",";",["T_WHITESPACE","\n    ",214],["T_VARIABLE","$id_map",215],["T_OBJECT_OPERATOR","->",215],["T_STRING","clearMessages",215],"(",")",";",["T_WHITESPACE","\n    ",215],["T_VARIABLE","$count",216],["T_WHITESPACE"," ",216],"=",["T_WHITESPACE"," ",216],["T_VARIABLE","$id_map",216],["T_OBJECT_OPERATOR","->",216],["T_STRING","messageCount",216],"(",")",";",["T_WHITESPACE","\n    ",216],["T_VARIABLE","$this",217],["T_OBJECT_OPERATOR","->",217],["T_STRING","assertEquals",217],"(",["T_VARIABLE","$count",217],",",["T_WHITESPACE"," ",217],["T_LNUMBER","0",217],")",";",["T_WHITESPACE","\n  ",217],"}",["T_WHITESPACE","\n\n  ",218],["T_DOC_COMMENT","\/**\n   * Tests the getRowsNeedingUpdate method for rows that need an update.\n   *\/",220],["T_WHITESPACE","\n  ",222],["T_PUBLIC","public",223],["T_WHITESPACE"," ",223],["T_FUNCTION","function",223],["T_WHITESPACE"," ",223],["T_STRING","testGetRowsNeedingUpdate",223],"(",")",["T_WHITESPACE"," ",223],"{",["T_WHITESPACE","\n    ",223],["T_VARIABLE","$id_map",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_VARIABLE","$this",224],["T_OBJECT_OPERATOR","->",224],["T_STRING","getIdMap",224],"(",")",";",["T_WHITESPACE","\n    ",224],["T_VARIABLE","$row_statuses",225],["T_WHITESPACE"," ",225],"=",["T_WHITESPACE"," ",225],"[",["T_WHITESPACE","\n      ",225],["T_STRING","MigrateIdMapInterface",226],["T_DOUBLE_COLON","::",226],["T_STRING","STATUS_IMPORTED",226],",",["T_WHITESPACE","\n      ",226],["T_STRING","MigrateIdMapInterface",227],["T_DOUBLE_COLON","::",227],["T_STRING","STATUS_NEEDS_UPDATE",227],",",["T_WHITESPACE","\n      ",227],["T_STRING","MigrateIdMapInterface",228],["T_DOUBLE_COLON","::",228],["T_STRING","STATUS_IGNORED",228],",",["T_WHITESPACE","\n      ",228],["T_STRING","MigrateIdMapInterface",229],["T_DOUBLE_COLON","::",229],["T_STRING","STATUS_FAILED",229],",",["T_WHITESPACE","\n    ",229],"]",";",["T_WHITESPACE","\n    ",230],["T_COMMENT","\/\/ Create a mapping row for each STATUS constant.\n",231],["T_WHITESPACE","    ",232],["T_FOREACH","foreach",232],["T_WHITESPACE"," ",232],"(",["T_VARIABLE","$row_statuses",232],["T_WHITESPACE"," ",232],["T_AS","as",232],["T_WHITESPACE"," ",232],["T_VARIABLE","$status",232],")",["T_WHITESPACE"," ",232],"{",["T_WHITESPACE","\n      ",232],["T_VARIABLE","$source",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_VARIABLE","$status",233],"]",";",["T_WHITESPACE","\n      ",233],["T_VARIABLE","$row",234],["T_WHITESPACE"," ",234],"=",["T_WHITESPACE"," ",234],["T_NEW","new",234],["T_WHITESPACE"," ",234],["T_STRING","Row",234],"(",["T_VARIABLE","$source",234],",",["T_WHITESPACE"," ",234],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",234],["T_WHITESPACE"," ",234],["T_DOUBLE_ARROW","=>",234],["T_WHITESPACE"," ",234],"[","]","]",")",";",["T_WHITESPACE","\n      ",234],["T_VARIABLE","$destination",235],["T_WHITESPACE"," ",235],"=",["T_WHITESPACE"," ",235],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",235],["T_WHITESPACE"," ",235],["T_DOUBLE_ARROW","=>",235],["T_WHITESPACE"," ",235],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",235],["T_WHITESPACE"," ",235],".",["T_WHITESPACE"," ",235],["T_VARIABLE","$status",235],"]",";",["T_WHITESPACE","\n      ",235],["T_VARIABLE","$id_map",236],["T_OBJECT_OPERATOR","->",236],["T_STRING","saveIdMapping",236],"(",["T_VARIABLE","$row",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$destination",236],",",["T_WHITESPACE"," ",236],["T_VARIABLE","$status",236],")",";",["T_WHITESPACE","\n      ",236],["T_VARIABLE","$expected_results",237],"[","]",["T_WHITESPACE"," ",237],"=",["T_WHITESPACE"," ",237],"[",["T_WHITESPACE","\n        ",237],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",238],["T_WHITESPACE"," ",238],["T_DOUBLE_ARROW","=>",238],["T_WHITESPACE"," ",238],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",238],["T_WHITESPACE"," ",238],".",["T_WHITESPACE"," ",238],["T_VARIABLE","$status",238],",",["T_WHITESPACE","\n        ",238],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",239],["T_WHITESPACE"," ",239],["T_DOUBLE_ARROW","=>",239],["T_WHITESPACE"," ",239],["T_VARIABLE","$this",239],["T_OBJECT_OPERATOR","->",239],["T_STRING","getIdMap",239],"(",")",["T_OBJECT_OPERATOR","->",239],["T_STRING","getSourceIDsHash",239],"(",["T_VARIABLE","$source",239],")",",",["T_WHITESPACE","\n        ",239],["T_CONSTANT_ENCAPSED_STRING","'destid1'",240],["T_WHITESPACE"," ",240],["T_DOUBLE_ARROW","=>",240],["T_WHITESPACE"," ",240],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",240],["T_WHITESPACE"," ",240],".",["T_WHITESPACE"," ",240],["T_VARIABLE","$status",240],",",["T_WHITESPACE","\n        ",240],["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",241],["T_WHITESPACE"," ",241],["T_DOUBLE_ARROW","=>",241],["T_WHITESPACE"," ",241],["T_VARIABLE","$status",241],",",["T_WHITESPACE","\n        ",241],["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",242],["T_WHITESPACE"," ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_STRING","MigrateIdMapInterface",242],["T_DOUBLE_COLON","::",242],["T_STRING","ROLLBACK_DELETE",242],",",["T_WHITESPACE","\n        ",242],["T_CONSTANT_ENCAPSED_STRING","'hash'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_CONSTANT_ENCAPSED_STRING","''",243],",",["T_WHITESPACE","\n      ",243],"]",";",["T_WHITESPACE","\n      ",244],["T_COMMENT","\/\/ Assert zero rows need an update.\n",245],["T_WHITESPACE","      ",246],["T_IF","if",246],["T_WHITESPACE"," ",246],"(",["T_VARIABLE","$status",246],["T_WHITESPACE"," ",246],["T_IS_EQUAL","==",246],["T_WHITESPACE"," ",246],["T_STRING","MigrateIdMapInterface",246],["T_DOUBLE_COLON","::",246],["T_STRING","STATUS_IMPORTED",246],")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n        ",246],["T_VARIABLE","$rows_needing_update",247],["T_WHITESPACE"," ",247],"=",["T_WHITESPACE"," ",247],["T_VARIABLE","$id_map",247],["T_OBJECT_OPERATOR","->",247],["T_STRING","getRowsNeedingUpdate",247],"(",["T_LNUMBER","1",247],")",";",["T_WHITESPACE","\n        ",247],["T_VARIABLE","$this",248],["T_OBJECT_OPERATOR","->",248],["T_STRING","assertCount",248],"(",["T_LNUMBER","0",248],",",["T_WHITESPACE"," ",248],["T_VARIABLE","$rows_needing_update",248],")",";",["T_WHITESPACE","\n      ",248],"}",["T_WHITESPACE","\n    ",249],"}",["T_WHITESPACE","\n    ",250],["T_COMMENT","\/\/ Assert that test values exist.\n",251],["T_WHITESPACE","    ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","queryResultTest",252],"(",["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","getIdMapContents",252],"(",")",",",["T_WHITESPACE"," ",252],["T_VARIABLE","$expected_results",252],")",";",["T_WHITESPACE","\n\n    ",252],["T_COMMENT","\/\/ Assert a single row needs an update.\n",254],["T_WHITESPACE","    ",255],["T_VARIABLE","$row_needing_update",255],["T_WHITESPACE"," ",255],"=",["T_WHITESPACE"," ",255],["T_VARIABLE","$id_map",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","getRowsNeedingUpdate",255],"(",["T_LNUMBER","1",255],")",";",["T_WHITESPACE","\n    ",255],["T_VARIABLE","$this",256],["T_OBJECT_OPERATOR","->",256],["T_STRING","assertCount",256],"(",["T_LNUMBER","1",256],",",["T_WHITESPACE"," ",256],["T_VARIABLE","$row_needing_update",256],")",";",["T_WHITESPACE","\n\n    ",256],["T_COMMENT","\/\/ Assert the row matches its original source.\n",258],["T_WHITESPACE","    ",259],["T_VARIABLE","$source_id",259],["T_WHITESPACE"," ",259],"=",["T_WHITESPACE"," ",259],["T_VARIABLE","$expected_results",259],"[",["T_STRING","MigrateIdMapInterface",259],["T_DOUBLE_COLON","::",259],["T_STRING","STATUS_NEEDS_UPDATE",259],"]","[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",259],"]",";",["T_WHITESPACE","\n    ",259],["T_VARIABLE","$test_row",260],["T_WHITESPACE"," ",260],"=",["T_WHITESPACE"," ",260],["T_VARIABLE","$id_map",260],["T_OBJECT_OPERATOR","->",260],["T_STRING","getRowBySource",260],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",260],["T_WHITESPACE"," ",260],["T_DOUBLE_ARROW","=>",260],["T_WHITESPACE"," ",260],["T_VARIABLE","$source_id",260],"]",")",";",["T_WHITESPACE","\n    ",260],["T_COMMENT","\/\/ $row_needing_update is an array of objects returned from the database,\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/ but $test_row is an array, so the cast is necessary.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","assertSame",263],"(",["T_VARIABLE","$test_row",263],",",["T_WHITESPACE"," ",263],["T_ARRAY_CAST","(array)",263],["T_WHITESPACE"," ",263],["T_VARIABLE","$row_needing_update",263],"[",["T_LNUMBER","0",263],"]",")",";",["T_WHITESPACE","\n\n    ",263],["T_COMMENT","\/\/ Add additional row that needs an update.\n",265],["T_WHITESPACE","    ",266],["T_VARIABLE","$source",266],["T_WHITESPACE"," ",266],"=",["T_WHITESPACE"," ",266],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'source_value_multiple'",266],"]",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$row",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],["T_NEW","new",267],["T_WHITESPACE"," ",267],["T_STRING","Row",267],"(",["T_VARIABLE","$source",267],",",["T_WHITESPACE"," ",267],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],"[","]","]",")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$destination",268],["T_WHITESPACE"," ",268],"=",["T_WHITESPACE"," ",268],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'destination_value_multiple'",268],"]",";",["T_WHITESPACE","\n    ",268],["T_VARIABLE","$id_map",269],["T_OBJECT_OPERATOR","->",269],["T_STRING","saveIdMapping",269],"(",["T_VARIABLE","$row",269],",",["T_WHITESPACE"," ",269],["T_VARIABLE","$destination",269],",",["T_WHITESPACE"," ",269],["T_STRING","MigrateIdMapInterface",269],["T_DOUBLE_COLON","::",269],["T_STRING","STATUS_NEEDS_UPDATE",269],")",";",["T_WHITESPACE","\n\n    ",269],["T_COMMENT","\/\/ Assert multiple rows need an update.\n",271],["T_WHITESPACE","    ",272],["T_VARIABLE","$rows_needing_update",272],["T_WHITESPACE"," ",272],"=",["T_WHITESPACE"," ",272],["T_VARIABLE","$id_map",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","getRowsNeedingUpdate",272],"(",["T_LNUMBER","2",272],")",";",["T_WHITESPACE","\n    ",272],["T_VARIABLE","$this",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","assertCount",273],"(",["T_LNUMBER","2",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$rows_needing_update",273],")",";",["T_WHITESPACE","\n  ",273],"}",["T_WHITESPACE","\n\n  ",274],["T_DOC_COMMENT","\/**\n   * Tests the SQL ID map message count method by counting and saving messages.\n   *\/",276],["T_WHITESPACE","\n  ",278],["T_PUBLIC","public",279],["T_WHITESPACE"," ",279],["T_FUNCTION","function",279],["T_WHITESPACE"," ",279],["T_STRING","testMessageCount",279],"(",")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n    ",279],["T_VARIABLE","$message",280],["T_WHITESPACE"," ",280],"=",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'Hello world.'",280],";",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$expected_results",281],["T_WHITESPACE"," ",281],"=",["T_WHITESPACE"," ",281],"[",["T_LNUMBER","0",281],",",["T_WHITESPACE"," ",281],["T_LNUMBER","1",281],",",["T_WHITESPACE"," ",281],["T_LNUMBER","2",281],",",["T_WHITESPACE"," ",281],["T_LNUMBER","3",281],"]",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$id_map",282],["T_WHITESPACE"," ",282],"=",["T_WHITESPACE"," ",282],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","getIdMap",282],"(",")",";",["T_WHITESPACE","\n\n    ",282],["T_COMMENT","\/\/ Test count message multiple times starting from 0.\n",284],["T_WHITESPACE","    ",285],["T_FOREACH","foreach",285],["T_WHITESPACE"," ",285],"(",["T_VARIABLE","$expected_results",285],["T_WHITESPACE"," ",285],["T_AS","as",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$key",285],["T_WHITESPACE"," ",285],["T_DOUBLE_ARROW","=>",285],["T_WHITESPACE"," ",285],["T_VARIABLE","$expected_result",285],")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n      ",285],["T_VARIABLE","$count",286],["T_WHITESPACE"," ",286],"=",["T_WHITESPACE"," ",286],["T_VARIABLE","$id_map",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","messageCount",286],"(",")",";",["T_WHITESPACE","\n      ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","assertEquals",287],"(",["T_VARIABLE","$expected_result",287],",",["T_WHITESPACE"," ",287],["T_VARIABLE","$count",287],")",";",["T_WHITESPACE","\n      ",287],["T_VARIABLE","$id_map",288],["T_OBJECT_OPERATOR","->",288],["T_STRING","saveMessage",288],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",288],["T_WHITESPACE"," ",288],["T_DOUBLE_ARROW","=>",288],["T_WHITESPACE"," ",288],["T_VARIABLE","$key",288],"]",",",["T_WHITESPACE"," ",288],["T_VARIABLE","$message",288],")",";",["T_WHITESPACE","\n    ",288],"}",["T_WHITESPACE","\n  ",289],"}",["T_WHITESPACE","\n\n  ",290],["T_DOC_COMMENT","\/**\n   * Tests the SQL ID map save message method.\n   *\/",292],["T_WHITESPACE","\n  ",294],["T_PUBLIC","public",295],["T_WHITESPACE"," ",295],["T_FUNCTION","function",295],["T_WHITESPACE"," ",295],["T_STRING","testMessageSave",295],"(",")",["T_WHITESPACE"," ",295],"{",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$message",296],["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_CONSTANT_ENCAPSED_STRING","'Hello world.'",296],";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$original_values",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],"[",["T_WHITESPACE","\n      ",297],["T_LNUMBER","1",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_VARIABLE","$message",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'level'",298],["T_WHITESPACE"," ",298],["T_DOUBLE_ARROW","=>",298],["T_WHITESPACE"," ",298],["T_STRING","MigrationInterface",298],["T_DOUBLE_COLON","::",298],["T_STRING","MESSAGE_ERROR",298],"]",",",["T_WHITESPACE","\n      ",298],["T_LNUMBER","2",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_VARIABLE","$message",299],",",["T_WHITESPACE"," ",299],["T_CONSTANT_ENCAPSED_STRING","'level'",299],["T_WHITESPACE"," ",299],["T_DOUBLE_ARROW","=>",299],["T_WHITESPACE"," ",299],["T_STRING","MigrationInterface",299],["T_DOUBLE_COLON","::",299],["T_STRING","MESSAGE_WARNING",299],"]",",",["T_WHITESPACE","\n      ",299],["T_LNUMBER","3",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_VARIABLE","$message",300],",",["T_WHITESPACE"," ",300],["T_CONSTANT_ENCAPSED_STRING","'level'",300],["T_WHITESPACE"," ",300],["T_DOUBLE_ARROW","=>",300],["T_WHITESPACE"," ",300],["T_STRING","MigrationInterface",300],["T_DOUBLE_COLON","::",300],["T_STRING","MESSAGE_NOTICE",300],"]",",",["T_WHITESPACE","\n      ",300],["T_LNUMBER","4",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_VARIABLE","$message",301],",",["T_WHITESPACE"," ",301],["T_CONSTANT_ENCAPSED_STRING","'level'",301],["T_WHITESPACE"," ",301],["T_DOUBLE_ARROW","=>",301],["T_WHITESPACE"," ",301],["T_STRING","MigrationInterface",301],["T_DOUBLE_COLON","::",301],["T_STRING","MESSAGE_INFORMATIONAL",301],"]",",",["T_WHITESPACE","\n    ",301],"]",";",["T_WHITESPACE","\n    ",302],["T_VARIABLE","$expected_results",303],["T_WHITESPACE"," ",303],"=",["T_WHITESPACE"," ",303],"[",["T_WHITESPACE","\n      ",303],["T_CONSTANT_ENCAPSED_STRING","'7ad742edb7e866caa78ced1e4455d2e9cbd8adb2074e7c323d21b4e67732e755'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_VARIABLE","$message",304],",",["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'level'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_STRING","MigrationInterface",304],["T_DOUBLE_COLON","::",304],["T_STRING","MESSAGE_ERROR",304],"]",",",["T_WHITESPACE","\n      ",304],["T_CONSTANT_ENCAPSED_STRING","'2d3ec2b0c547e819346e6ae03f881fd9f5c978ff3cbe29dfb807d40735e53703'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_VARIABLE","$message",305],",",["T_WHITESPACE"," ",305],["T_CONSTANT_ENCAPSED_STRING","'level'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_STRING","MigrationInterface",305],["T_DOUBLE_COLON","::",305],["T_STRING","MESSAGE_WARNING",305],"]",",",["T_WHITESPACE","\n      ",305],["T_CONSTANT_ENCAPSED_STRING","'12a042f72cad9a2a8c7715df0c7695d762975f0687d87f5d480725dae1432a6f'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_VARIABLE","$message",306],",",["T_WHITESPACE"," ",306],["T_CONSTANT_ENCAPSED_STRING","'level'",306],["T_WHITESPACE"," ",306],["T_DOUBLE_ARROW","=>",306],["T_WHITESPACE"," ",306],["T_STRING","MigrationInterface",306],["T_DOUBLE_COLON","::",306],["T_STRING","MESSAGE_NOTICE",306],"]",",",["T_WHITESPACE","\n      ",306],["T_CONSTANT_ENCAPSED_STRING","'d9d1fd27a2447ace48f47a2e9ff649673f67b446d9381a7963c949fc083f8791'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_VARIABLE","$message",307],",",["T_WHITESPACE"," ",307],["T_CONSTANT_ENCAPSED_STRING","'level'",307],["T_WHITESPACE"," ",307],["T_DOUBLE_ARROW","=>",307],["T_WHITESPACE"," ",307],["T_STRING","MigrationInterface",307],["T_DOUBLE_COLON","::",307],["T_STRING","MESSAGE_INFORMATIONAL",307],"]",",",["T_WHITESPACE","\n    ",307],"]",";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$id_map",309],["T_WHITESPACE"," ",309],"=",["T_WHITESPACE"," ",309],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","getIdMap",309],"(",")",";",["T_WHITESPACE","\n\n    ",309],["T_FOREACH","foreach",311],["T_WHITESPACE"," ",311],"(",["T_VARIABLE","$original_values",311],["T_WHITESPACE"," ",311],["T_AS","as",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$key",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_VARIABLE","$original_value",311],")",["T_WHITESPACE"," ",311],"{",["T_WHITESPACE","\n      ",311],["T_VARIABLE","$id_map",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","saveMessage",312],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",312],["T_WHITESPACE"," ",312],["T_DOUBLE_ARROW","=>",312],["T_WHITESPACE"," ",312],["T_VARIABLE","$key",312],"]",",",["T_WHITESPACE"," ",312],["T_VARIABLE","$message",312],",",["T_WHITESPACE"," ",312],["T_VARIABLE","$original_value",312],"[",["T_CONSTANT_ENCAPSED_STRING","'level'",312],"]",")",";",["T_WHITESPACE","\n    ",312],"}",["T_WHITESPACE","\n\n    ",313],["T_FOREACH","foreach",315],["T_WHITESPACE"," ",315],"(",["T_VARIABLE","$id_map",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","getMessageIterator",315],"(",")",["T_WHITESPACE"," ",315],["T_AS","as",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$message_row",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n      ",315],["T_VARIABLE","$key",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_VARIABLE","$message_row",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","source_ids_hash",316],";",["T_WHITESPACE","\n      ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","assertEquals",317],"(",["T_VARIABLE","$expected_results",317],"[",["T_VARIABLE","$key",317],"]","[",["T_CONSTANT_ENCAPSED_STRING","'message'",317],"]",",",["T_WHITESPACE"," ",317],["T_VARIABLE","$message_row",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","message",317],")",";",["T_WHITESPACE","\n      ",317],["T_VARIABLE","$this",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","assertEquals",318],"(",["T_VARIABLE","$expected_results",318],"[",["T_VARIABLE","$key",318],"]","[",["T_CONSTANT_ENCAPSED_STRING","'level'",318],"]",",",["T_WHITESPACE"," ",318],["T_VARIABLE","$message_row",318],["T_OBJECT_OPERATOR","->",318],["T_STRING","level",318],")",";",["T_WHITESPACE","\n    ",318],"}",["T_WHITESPACE","\n\n    ",319],["T_COMMENT","\/\/ Insert with default level.\n",321],["T_WHITESPACE","    ",322],["T_VARIABLE","$message_default",322],["T_WHITESPACE"," ",322],"=",["T_WHITESPACE"," ",322],["T_CONSTANT_ENCAPSED_STRING","'Hello world default.'",322],";",["T_WHITESPACE","\n    ",322],["T_VARIABLE","$id_map",323],["T_OBJECT_OPERATOR","->",323],["T_STRING","saveMessage",323],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",323],["T_WHITESPACE"," ",323],["T_DOUBLE_ARROW","=>",323],["T_WHITESPACE"," ",323],["T_LNUMBER","5",323],"]",",",["T_WHITESPACE"," ",323],["T_VARIABLE","$message_default",323],")",";",["T_WHITESPACE","\n    ",323],["T_VARIABLE","$messages",324],["T_WHITESPACE"," ",324],"=",["T_WHITESPACE"," ",324],["T_VARIABLE","$id_map",324],["T_OBJECT_OPERATOR","->",324],["T_STRING","getMessageIterator",324],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",324],["T_WHITESPACE"," ",324],["T_DOUBLE_ARROW","=>",324],["T_WHITESPACE"," ",324],["T_LNUMBER","5",324],"]",")",";",["T_WHITESPACE","\n    ",324],["T_VARIABLE","$count",325],["T_WHITESPACE"," ",325],"=",["T_WHITESPACE"," ",325],["T_LNUMBER","0",325],";",["T_WHITESPACE","\n    ",325],["T_FOREACH","foreach",326],["T_WHITESPACE"," ",326],"(",["T_VARIABLE","$messages",326],["T_WHITESPACE"," ",326],["T_AS","as",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$key",326],["T_WHITESPACE"," ",326],["T_DOUBLE_ARROW","=>",326],["T_WHITESPACE"," ",326],["T_VARIABLE","$message_row",326],")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n      ",326],["T_VARIABLE","$count",327],["T_WHITESPACE"," ",327],"=",["T_WHITESPACE"," ",327],["T_LNUMBER","1",327],";",["T_WHITESPACE","\n      ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","assertEquals",328],"(",["T_VARIABLE","$message_default",328],",",["T_WHITESPACE"," ",328],["T_VARIABLE","$message_row",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","message",328],")",";",["T_WHITESPACE","\n      ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","assertEquals",329],"(",["T_STRING","MigrationInterface",329],["T_DOUBLE_COLON","::",329],["T_STRING","MESSAGE_ERROR",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$message_row",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","level",329],")",";",["T_WHITESPACE","\n    ",329],"}",["T_WHITESPACE","\n    ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","assertEquals",331],"(",["T_VARIABLE","$count",331],",",["T_WHITESPACE"," ",331],["T_LNUMBER","1",331],")",";",["T_WHITESPACE","\n\n    ",331],["T_COMMENT","\/\/ Retrieve messages with a specific level.\n",333],["T_WHITESPACE","    ",334],["T_VARIABLE","$messages",334],["T_WHITESPACE"," ",334],"=",["T_WHITESPACE"," ",334],["T_VARIABLE","$id_map",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getMessageIterator",334],"(","[","]",",",["T_WHITESPACE"," ",334],["T_STRING","MigrationInterface",334],["T_DOUBLE_COLON","::",334],["T_STRING","MESSAGE_WARNING",334],")",";",["T_WHITESPACE","\n    ",334],["T_VARIABLE","$count",335],["T_WHITESPACE"," ",335],"=",["T_WHITESPACE"," ",335],["T_LNUMBER","0",335],";",["T_WHITESPACE","\n    ",335],["T_FOREACH","foreach",336],["T_WHITESPACE"," ",336],"(",["T_VARIABLE","$messages",336],["T_WHITESPACE"," ",336],["T_AS","as",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$key",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_VARIABLE","$message_row",336],")",["T_WHITESPACE"," ",336],"{",["T_WHITESPACE","\n      ",336],["T_VARIABLE","$count",337],["T_WHITESPACE"," ",337],"=",["T_WHITESPACE"," ",337],["T_LNUMBER","1",337],";",["T_WHITESPACE","\n      ",337],["T_VARIABLE","$this",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","assertEquals",338],"(",["T_STRING","MigrationInterface",338],["T_DOUBLE_COLON","::",338],["T_STRING","MESSAGE_WARNING",338],",",["T_WHITESPACE"," ",338],["T_VARIABLE","$message_row",338],["T_OBJECT_OPERATOR","->",338],["T_STRING","level",338],")",";",["T_WHITESPACE","\n    ",338],"}",["T_WHITESPACE","\n    ",339],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","assertEquals",340],"(",["T_VARIABLE","$count",340],",",["T_WHITESPACE"," ",340],["T_LNUMBER","1",340],")",";",["T_WHITESPACE","\n  ",340],"}",["T_WHITESPACE","\n\n  ",341],["T_DOC_COMMENT","\/**\n   * Tests the getRowBySource method.\n   *\/",343],["T_WHITESPACE","\n  ",345],["T_PUBLIC","public",346],["T_WHITESPACE"," ",346],["T_FUNCTION","function",346],["T_WHITESPACE"," ",346],["T_STRING","testGetRowBySource",346],"(",")",["T_WHITESPACE"," ",346],"{",["T_WHITESPACE","\n    ",346],["T_VARIABLE","$this",347],["T_OBJECT_OPERATOR","->",347],["T_STRING","getDatabase",347],"(","[","]",")",";",["T_WHITESPACE","\n    ",347],["T_VARIABLE","$row",348],["T_WHITESPACE"," ",348],"=",["T_WHITESPACE"," ",348],"[",["T_WHITESPACE","\n      ",348],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",349],["T_WHITESPACE"," ",349],["T_DOUBLE_ARROW","=>",349],["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_1'",349],",",["T_WHITESPACE","\n      ",349],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",350],["T_WHITESPACE"," ",350],["T_DOUBLE_ARROW","=>",350],["T_WHITESPACE"," ",350],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_2'",350],",",["T_WHITESPACE","\n      ",350],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_VARIABLE","$this",351],["T_OBJECT_OPERATOR","->",351],["T_STRING","getIdMap",351],"(",")",["T_OBJECT_OPERATOR","->",351],["T_STRING","getSourceIDsHash",351],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",351],["T_WHITESPACE"," ",351],["T_DOUBLE_ARROW","=>",351],["T_WHITESPACE"," ",351],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_1'",351],"]",")",",",["T_WHITESPACE","\n      ",351],["T_CONSTANT_ENCAPSED_STRING","'destid1'",352],["T_WHITESPACE"," ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","'destination_id_value_1'",352],",",["T_WHITESPACE","\n    ",352],"]",["T_WHITESPACE"," ",353],"+",["T_WHITESPACE"," ",353],["T_VARIABLE","$this",353],["T_OBJECT_OPERATOR","->",353],["T_STRING","idMapDefaults",353],"(",")",";",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","saveMap",354],"(",["T_VARIABLE","$row",354],")",";",["T_WHITESPACE","\n    ",354],["T_VARIABLE","$row",355],["T_WHITESPACE"," ",355],"=",["T_WHITESPACE"," ",355],"[",["T_WHITESPACE","\n      ",355],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",356],["T_WHITESPACE"," ",356],["T_DOUBLE_ARROW","=>",356],["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_3'",356],",",["T_WHITESPACE","\n      ",356],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",357],["T_WHITESPACE"," ",357],["T_DOUBLE_ARROW","=>",357],["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_4'",357],",",["T_WHITESPACE","\n      ",357],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",358],["T_WHITESPACE"," ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getIdMap",358],"(",")",["T_OBJECT_OPERATOR","->",358],["T_STRING","getSourceIDsHash",358],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",358],["T_WHITESPACE"," ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_3'",358],",",["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",358],["T_WHITESPACE"," ",358],["T_DOUBLE_ARROW","=>",358],["T_WHITESPACE"," ",358],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_4'",358],"]",")",",",["T_WHITESPACE","\n      ",358],["T_CONSTANT_ENCAPSED_STRING","'destid1'",359],["T_WHITESPACE"," ",359],["T_DOUBLE_ARROW","=>",359],["T_WHITESPACE"," ",359],["T_CONSTANT_ENCAPSED_STRING","'destination_id_value_2'",359],",",["T_WHITESPACE","\n    ",359],"]",["T_WHITESPACE"," ",360],"+",["T_WHITESPACE"," ",360],["T_VARIABLE","$this",360],["T_OBJECT_OPERATOR","->",360],["T_STRING","idMapDefaults",360],"(",")",";",["T_WHITESPACE","\n    ",360],["T_VARIABLE","$this",361],["T_OBJECT_OPERATOR","->",361],["T_STRING","saveMap",361],"(",["T_VARIABLE","$row",361],")",";",["T_WHITESPACE","\n    ",361],["T_VARIABLE","$source_id_values",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$row",362],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",362],"]",",",["T_WHITESPACE"," ",362],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_VARIABLE","$row",362],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",362],"]","]",";",["T_WHITESPACE","\n    ",362],["T_VARIABLE","$id_map",363],["T_WHITESPACE"," ",363],"=",["T_WHITESPACE"," ",363],["T_VARIABLE","$this",363],["T_OBJECT_OPERATOR","->",363],["T_STRING","getIdMap",363],"(",")",";",["T_WHITESPACE","\n    ",363],["T_VARIABLE","$result_row",364],["T_WHITESPACE"," ",364],"=",["T_WHITESPACE"," ",364],["T_VARIABLE","$id_map",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","getRowBySource",364],"(",["T_VARIABLE","$source_id_values",364],")",";",["T_WHITESPACE","\n    ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","assertSame",365],"(",["T_VARIABLE","$row",365],",",["T_WHITESPACE"," ",365],["T_VARIABLE","$result_row",365],")",";",["T_WHITESPACE","\n    ",365],["T_VARIABLE","$source_id_values",366],["T_WHITESPACE"," ",366],"=",["T_WHITESPACE"," ",366],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'missing_value_1'",366],",",["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",366],["T_WHITESPACE"," ",366],["T_DOUBLE_ARROW","=>",366],["T_WHITESPACE"," ",366],["T_CONSTANT_ENCAPSED_STRING","'missing_value_2'",366],"]",";",["T_WHITESPACE","\n    ",366],["T_VARIABLE","$result_row",367],["T_WHITESPACE"," ",367],"=",["T_WHITESPACE"," ",367],["T_VARIABLE","$id_map",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getRowBySource",367],"(",["T_VARIABLE","$source_id_values",367],")",";",["T_WHITESPACE","\n    ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertFalse",368],"(",["T_VARIABLE","$result_row",368],")",";",["T_WHITESPACE","\n  ",368],"}",["T_WHITESPACE","\n\n  ",369],["T_DOC_COMMENT","\/**\n   * Data provider for testLookupDestinationIdMapping().\n   *\n   * Scenarios to test (for both hits and misses) are:\n   * - Single-value source ID to single-value destination ID.\n   * - Multi-value source ID to multi-value destination ID.\n   * - Single-value source ID to multi-value destination ID.\n   * - Multi-value source ID to single-value destination ID.\n   *\n   * @return array\n   *   An array of data values.\n   *\/",371],["T_WHITESPACE","\n  ",382],["T_PUBLIC","public",383],["T_WHITESPACE"," ",383],["T_FUNCTION","function",383],["T_WHITESPACE"," ",383],["T_STRING","lookupDestinationIdMappingDataProvider",383],"(",")",["T_WHITESPACE"," ",383],"{",["T_WHITESPACE","\n    ",383],["T_RETURN","return",384],["T_WHITESPACE"," ",384],"[",["T_WHITESPACE","\n      ",384],"[",["T_LNUMBER","1",385],",",["T_WHITESPACE"," ",385],["T_LNUMBER","1",385],"]",",",["T_WHITESPACE","\n      ",385],"[",["T_LNUMBER","2",386],",",["T_WHITESPACE"," ",386],["T_LNUMBER","2",386],"]",",",["T_WHITESPACE","\n      ",386],"[",["T_LNUMBER","1",387],",",["T_WHITESPACE"," ",387],["T_LNUMBER","2",387],"]",",",["T_WHITESPACE","\n      ",387],"[",["T_LNUMBER","2",388],",",["T_WHITESPACE"," ",388],["T_LNUMBER","1",388],"]",",",["T_WHITESPACE","\n    ",388],"]",";",["T_WHITESPACE","\n  ",389],"}",["T_WHITESPACE","\n\n  ",390],["T_DOC_COMMENT","\/**\n   * Performs destination ID test on source and destination fields.\n   *\n   * @param int $num_source_fields\n   *   Number of source fields to test.\n   * @param int $num_destination_fields\n   *   Number of destination fields to test.\n   *\n   * @dataProvider lookupDestinationIdMappingDataProvider\n   *\/",392],["T_WHITESPACE","\n  ",401],["T_PUBLIC","public",402],["T_WHITESPACE"," ",402],["T_FUNCTION","function",402],["T_WHITESPACE"," ",402],["T_STRING","testLookupDestinationIdMapping",402],"(",["T_VARIABLE","$num_source_fields",402],",",["T_WHITESPACE"," ",402],["T_VARIABLE","$num_destination_fields",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n    ",402],["T_COMMENT","\/\/ Adjust the migration configuration according to the number of source and\n",403],["T_WHITESPACE","    ",404],["T_COMMENT","\/\/ destination fields.\n",404],["T_WHITESPACE","    ",405],["T_VARIABLE","$this",405],["T_OBJECT_OPERATOR","->",405],["T_STRING","sourceIds",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],"[","]",";",["T_WHITESPACE","\n    ",405],["T_VARIABLE","$this",406],["T_OBJECT_OPERATOR","->",406],["T_STRING","destinationIds",406],["T_WHITESPACE"," ",406],"=",["T_WHITESPACE"," ",406],"[","]",";",["T_WHITESPACE","\n    ",406],["T_VARIABLE","$source_id_values",407],["T_WHITESPACE"," ",407],"=",["T_WHITESPACE"," ",407],"[","]",";",["T_WHITESPACE","\n    ",407],["T_VARIABLE","$nonexistent_id_values",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],"[","]",";",["T_WHITESPACE","\n    ",408],["T_VARIABLE","$row",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","idMapDefaults",409],"(",")",";",["T_WHITESPACE","\n    ",409],["T_FOR","for",410],["T_WHITESPACE"," ",410],"(",["T_VARIABLE","$i",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_LNUMBER","1",410],";",["T_WHITESPACE"," ",410],["T_VARIABLE","$i",410],["T_WHITESPACE"," ",410],["T_IS_SMALLER_OR_EQUAL","<=",410],["T_WHITESPACE"," ",410],["T_VARIABLE","$num_source_fields",410],";",["T_WHITESPACE"," ",410],["T_VARIABLE","$i",410],["T_INC","++",410],")",["T_WHITESPACE"," ",410],"{",["T_WHITESPACE","\n      ",410],["T_VARIABLE","$row",411],"[","\"",["T_ENCAPSED_AND_WHITESPACE","sourceid",411],["T_VARIABLE","$i",411],"\"","]",["T_WHITESPACE"," ",411],"=",["T_WHITESPACE"," ",411],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",411],["T_VARIABLE","$i",411],"\"",";",["T_WHITESPACE","\n      ",411],["T_VARIABLE","$source_id_values",412],"[","]",["T_WHITESPACE"," ",412],"=",["T_WHITESPACE"," ",412],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",412],["T_VARIABLE","$i",412],"\"",";",["T_WHITESPACE","\n      ",412],["T_VARIABLE","$nonexistent_id_values",413],"[","]",["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],"\"",["T_ENCAPSED_AND_WHITESPACE","nonexistent_source_id_value_",413],["T_VARIABLE","$i",413],"\"",";",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","sourceIds",414],"[","\"",["T_ENCAPSED_AND_WHITESPACE","source_id_property_",414],["T_VARIABLE","$i",414],"\"","]",["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],"[","]",";",["T_WHITESPACE","\n    ",414],"}",["T_WHITESPACE","\n    ",415],["T_VARIABLE","$expected_result",416],["T_WHITESPACE"," ",416],"=",["T_WHITESPACE"," ",416],"[","]",";",["T_WHITESPACE","\n    ",416],["T_FOR","for",417],["T_WHITESPACE"," ",417],"(",["T_VARIABLE","$i",417],["T_WHITESPACE"," ",417],"=",["T_WHITESPACE"," ",417],["T_LNUMBER","1",417],";",["T_WHITESPACE"," ",417],["T_VARIABLE","$i",417],["T_WHITESPACE"," ",417],["T_IS_SMALLER_OR_EQUAL","<=",417],["T_WHITESPACE"," ",417],["T_VARIABLE","$num_destination_fields",417],";",["T_WHITESPACE"," ",417],["T_VARIABLE","$i",417],["T_INC","++",417],")",["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n      ",417],["T_VARIABLE","$row",418],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destid",418],["T_VARIABLE","$i",418],"\"","]",["T_WHITESPACE"," ",418],"=",["T_WHITESPACE"," ",418],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",418],["T_VARIABLE","$i",418],"\"",";",["T_WHITESPACE","\n      ",418],["T_VARIABLE","$expected_result",419],"[","]",["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",419],["T_VARIABLE","$i",419],"\"",";",["T_WHITESPACE","\n      ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","destinationIds",420],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_property_",420],["T_VARIABLE","$i",420],"\"","]",["T_WHITESPACE"," ",420],"=",["T_WHITESPACE"," ",420],"[","]",";",["T_WHITESPACE","\n    ",420],"}",["T_WHITESPACE","\n    ",421],["T_VARIABLE","$row",422],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",422],"]",["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$this",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","getIdMap",422],"(",")",["T_OBJECT_OPERATOR","->",422],["T_STRING","getSourceIDsHash",422],"(",["T_VARIABLE","$source_id_values",422],")",";",["T_WHITESPACE","\n    ",422],["T_VARIABLE","$this",423],["T_OBJECT_OPERATOR","->",423],["T_STRING","saveMap",423],"(",["T_VARIABLE","$row",423],")",";",["T_WHITESPACE","\n    ",423],["T_VARIABLE","$id_map",424],["T_WHITESPACE"," ",424],"=",["T_WHITESPACE"," ",424],["T_VARIABLE","$this",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","getIdMap",424],"(",")",";",["T_WHITESPACE","\n    ",424],["T_COMMENT","\/\/ Test for a valid hit.\n",425],["T_WHITESPACE","    ",426],["T_VARIABLE","$destination_id",426],["T_WHITESPACE"," ",426],"=",["T_WHITESPACE"," ",426],["T_VARIABLE","$id_map",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","lookupDestinationId",426],"(",["T_VARIABLE","$source_id_values",426],")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","assertSame",427],"(",["T_VARIABLE","$expected_result",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$destination_id",427],")",";",["T_WHITESPACE","\n    ",427],["T_COMMENT","\/\/ Test for a miss.\n",428],["T_WHITESPACE","    ",429],["T_VARIABLE","$destination_id",429],["T_WHITESPACE"," ",429],"=",["T_WHITESPACE"," ",429],["T_VARIABLE","$id_map",429],["T_OBJECT_OPERATOR","->",429],["T_STRING","lookupDestinationId",429],"(",["T_VARIABLE","$nonexistent_id_values",429],")",";",["T_WHITESPACE","\n    ",429],["T_VARIABLE","$this",430],["T_OBJECT_OPERATOR","->",430],["T_STRING","assertSame",430],"(",["T_LNUMBER","0",430],",",["T_WHITESPACE"," ",430],["T_STRING","count",430],"(",["T_VARIABLE","$destination_id",430],")",")",";",["T_WHITESPACE","\n  ",430],"}",["T_WHITESPACE","\n\n  ",431],["T_DOC_COMMENT","\/**\n   * Setup a database with the given rows.\n   *\n   * @param array $source_keys\n   *   The source keys for the ID map table.\n   * @param array $dest_keys\n   *   The destination keys for the ID map table.\n   * @param array $rows\n   *   An array of source and destination value arrays for the ID map table.\n   *\n   * @return \\Drupal\\Tests\\migrate\\Unit\\TestSqlIdMap\n   *   An ID map instance for testing.\n   *\/",433],["T_WHITESPACE","\n  ",445],["T_PROTECTED","protected",446],["T_WHITESPACE"," ",446],["T_FUNCTION","function",446],["T_WHITESPACE"," ",446],["T_STRING","setupRows",446],"(",["T_VARIABLE","$source_keys",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$dest_keys",446],",",["T_WHITESPACE"," ",446],["T_VARIABLE","$rows",446],")",["T_WHITESPACE"," ",446],"{",["T_WHITESPACE","\n    ",446],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","database",447],["T_WHITESPACE"," ",447],"=",["T_WHITESPACE"," ",447],["T_VARIABLE","$this",447],["T_OBJECT_OPERATOR","->",447],["T_STRING","getDatabase",447],"(","[","]",")",";",["T_WHITESPACE","\n    ",447],["T_VARIABLE","$this",448],["T_OBJECT_OPERATOR","->",448],["T_STRING","sourceIds",448],["T_WHITESPACE"," ",448],"=",["T_WHITESPACE"," ",448],["T_STRING","array_fill_keys",448],"(",["T_VARIABLE","$source_keys",448],",",["T_WHITESPACE"," ",448],"[","]",")",";",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","destinationIds",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_STRING","array_fill_keys",449],"(",["T_VARIABLE","$dest_keys",449],",",["T_WHITESPACE"," ",449],"[","]",")",";",["T_WHITESPACE","\n\n    ",449],["T_VARIABLE","$db_keys",451],["T_WHITESPACE"," ",451],"=",["T_WHITESPACE"," ",451],"[","]",";",["T_WHITESPACE","\n    ",451],["T_FOREACH","foreach",452],["T_WHITESPACE"," ",452],"(",["T_STRING","array_keys",452],"(",["T_VARIABLE","$source_keys",452],")",["T_WHITESPACE"," ",452],["T_AS","as",452],["T_WHITESPACE"," ",452],["T_VARIABLE","$i",452],")",["T_WHITESPACE"," ",452],"{",["T_WHITESPACE","\n      ",452],["T_VARIABLE","$db_keys",453],"[","]",["T_WHITESPACE"," ",453],"=",["T_WHITESPACE"," ",453],["T_CONSTANT_ENCAPSED_STRING","'sourceid'",453],["T_WHITESPACE"," ",453],".",["T_WHITESPACE"," ",453],"(",["T_VARIABLE","$i",453],["T_WHITESPACE"," ",453],"+",["T_WHITESPACE"," ",453],["T_LNUMBER","1",453],")",";",["T_WHITESPACE","\n    ",453],"}",["T_WHITESPACE","\n    ",454],["T_FOREACH","foreach",455],["T_WHITESPACE"," ",455],"(",["T_STRING","array_keys",455],"(",["T_VARIABLE","$dest_keys",455],")",["T_WHITESPACE"," ",455],["T_AS","as",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$i",455],")",["T_WHITESPACE"," ",455],"{",["T_WHITESPACE","\n      ",455],["T_VARIABLE","$db_keys",456],"[","]",["T_WHITESPACE"," ",456],"=",["T_WHITESPACE"," ",456],["T_CONSTANT_ENCAPSED_STRING","'destid'",456],["T_WHITESPACE"," ",456],".",["T_WHITESPACE"," ",456],"(",["T_VARIABLE","$i",456],["T_WHITESPACE"," ",456],"+",["T_WHITESPACE"," ",456],["T_LNUMBER","1",456],")",";",["T_WHITESPACE","\n    ",456],"}",["T_WHITESPACE","\n    ",457],["T_FOREACH","foreach",458],["T_WHITESPACE"," ",458],"(",["T_VARIABLE","$rows",458],["T_WHITESPACE"," ",458],["T_AS","as",458],["T_WHITESPACE"," ",458],["T_VARIABLE","$row",458],")",["T_WHITESPACE"," ",458],"{",["T_WHITESPACE","\n      ",458],["T_VARIABLE","$values",459],["T_WHITESPACE"," ",459],"=",["T_WHITESPACE"," ",459],["T_STRING","array_combine",459],"(",["T_VARIABLE","$db_keys",459],",",["T_WHITESPACE"," ",459],["T_VARIABLE","$row",459],")",";",["T_WHITESPACE","\n      ",459],["T_VARIABLE","$source_values",460],["T_WHITESPACE"," ",460],"=",["T_WHITESPACE"," ",460],["T_STRING","array_slice",460],"(",["T_VARIABLE","$row",460],",",["T_WHITESPACE"," ",460],["T_LNUMBER","0",460],",",["T_WHITESPACE"," ",460],["T_STRING","count",460],"(",["T_VARIABLE","$source_keys",460],")",")",";",["T_WHITESPACE","\n      ",460],["T_VARIABLE","$values",461],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",461],"]",["T_WHITESPACE"," ",461],"=",["T_WHITESPACE"," ",461],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","getIdMap",461],"(",")",["T_OBJECT_OPERATOR","->",461],["T_STRING","getSourceIDsHash",461],"(",["T_VARIABLE","$source_values",461],")",";",["T_WHITESPACE","\n      ",461],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","saveMap",462],"(",["T_VARIABLE","$values",462],")",";",["T_WHITESPACE","\n    ",462],"}",["T_WHITESPACE","\n\n    ",463],["T_RETURN","return",465],["T_WHITESPACE"," ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","getIdMap",465],"(",")",";",["T_WHITESPACE","\n  ",465],"}",["T_WHITESPACE","\n\n  ",466],["T_DOC_COMMENT","\/**\n   * Tests lookupDestinationIds().\n   *\/",468],["T_WHITESPACE","\n  ",470],["T_PUBLIC","public",471],["T_WHITESPACE"," ",471],["T_FUNCTION","function",471],["T_WHITESPACE"," ",471],["T_STRING","testLookupDestinationIds",471],"(",")",["T_WHITESPACE"," ",471],"{",["T_WHITESPACE","\n    ",471],["T_COMMENT","\/\/ Simple map with one source and one destination ID.\n",472],["T_WHITESPACE","    ",473],["T_VARIABLE","$id_map",473],["T_WHITESPACE"," ",473],"=",["T_WHITESPACE"," ",473],["T_VARIABLE","$this",473],["T_OBJECT_OPERATOR","->",473],["T_STRING","setupRows",473],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",473],"]",",",["T_WHITESPACE"," ",473],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",473],"]",",",["T_WHITESPACE"," ",473],"[",["T_WHITESPACE","\n      ",473],"[",["T_LNUMBER","1",474],",",["T_WHITESPACE"," ",474],["T_LNUMBER","101",474],"]",",",["T_WHITESPACE","\n      ",474],"[",["T_LNUMBER","2",475],",",["T_WHITESPACE"," ",475],["T_LNUMBER","102",475],"]",",",["T_WHITESPACE","\n      ",475],"[",["T_LNUMBER","3",476],",",["T_WHITESPACE"," ",476],["T_LNUMBER","103",476],"]",",",["T_WHITESPACE","\n    ",476],"]",")",";",["T_WHITESPACE","\n\n    ",477],["T_COMMENT","\/\/ Lookup nothing, gives nothing.\n",479],["T_WHITESPACE","    ",480],["T_VARIABLE","$this",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","assertEquals",480],"(","[","]",",",["T_WHITESPACE"," ",480],["T_VARIABLE","$id_map",480],["T_OBJECT_OPERATOR","->",480],["T_STRING","lookupDestinationIds",480],"(","[","]",")",")",";",["T_WHITESPACE","\n    ",480],["T_COMMENT","\/\/ Lookup by complete non-associative list.\n",481],["T_WHITESPACE","    ",482],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","assertEquals",482],"(","[","[",["T_LNUMBER","101",482],"]","]",",",["T_WHITESPACE"," ",482],["T_VARIABLE","$id_map",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","lookupDestinationIds",482],"(","[",["T_LNUMBER","1",482],"]",")",")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","assertEquals",483],"(","[","[",["T_LNUMBER","102",483],"]","]",",",["T_WHITESPACE"," ",483],["T_VARIABLE","$id_map",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","lookupDestinationIds",483],"(","[",["T_LNUMBER","2",483],"]",")",")",";",["T_WHITESPACE","\n    ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","assertEquals",484],"(","[","]",",",["T_WHITESPACE"," ",484],["T_VARIABLE","$id_map",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","lookupDestinationIds",484],"(","[",["T_LNUMBER","99",484],"]",")",")",";",["T_WHITESPACE","\n    ",484],["T_COMMENT","\/\/ Lookup by complete associative list.\n",485],["T_WHITESPACE","    ",486],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","assertEquals",486],"(","[","[",["T_LNUMBER","101",486],"]","]",",",["T_WHITESPACE"," ",486],["T_VARIABLE","$id_map",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","lookupDestinationIds",486],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",486],["T_WHITESPACE"," ",486],["T_DOUBLE_ARROW","=>",486],["T_WHITESPACE"," ",486],["T_LNUMBER","1",486],"]",")",")",";",["T_WHITESPACE","\n    ",486],["T_VARIABLE","$this",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","assertEquals",487],"(","[","[",["T_LNUMBER","102",487],"]","]",",",["T_WHITESPACE"," ",487],["T_VARIABLE","$id_map",487],["T_OBJECT_OPERATOR","->",487],["T_STRING","lookupDestinationIds",487],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",487],["T_WHITESPACE"," ",487],["T_DOUBLE_ARROW","=>",487],["T_WHITESPACE"," ",487],["T_LNUMBER","2",487],"]",")",")",";",["T_WHITESPACE","\n    ",487],["T_VARIABLE","$this",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","assertEquals",488],"(","[","]",",",["T_WHITESPACE"," ",488],["T_VARIABLE","$id_map",488],["T_OBJECT_OPERATOR","->",488],["T_STRING","lookupDestinationIds",488],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",488],["T_WHITESPACE"," ",488],["T_DOUBLE_ARROW","=>",488],["T_WHITESPACE"," ",488],["T_LNUMBER","99",488],"]",")",")",";",["T_WHITESPACE","\n\n    ",488],["T_COMMENT","\/\/ Map with multiple source and destination IDs.\n",490],["T_WHITESPACE","    ",491],["T_VARIABLE","$id_map",491],["T_WHITESPACE"," ",491],"=",["T_WHITESPACE"," ",491],["T_VARIABLE","$this",491],["T_OBJECT_OPERATOR","->",491],["T_STRING","setupRows",491],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",491],",",["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'language'",491],"]",",",["T_WHITESPACE"," ",491],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",491],",",["T_WHITESPACE"," ",491],["T_CONSTANT_ENCAPSED_STRING","'langcode'",491],"]",",",["T_WHITESPACE"," ",491],"[",["T_WHITESPACE","\n      ",491],"[",["T_LNUMBER","1",492],",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'en'",492],",",["T_WHITESPACE"," ",492],["T_LNUMBER","101",492],",",["T_WHITESPACE"," ",492],["T_CONSTANT_ENCAPSED_STRING","'en'",492],"]",",",["T_WHITESPACE","\n      ",492],"[",["T_LNUMBER","1",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'fr'",493],",",["T_WHITESPACE"," ",493],["T_LNUMBER","101",493],",",["T_WHITESPACE"," ",493],["T_CONSTANT_ENCAPSED_STRING","'fr'",493],"]",",",["T_WHITESPACE","\n      ",493],"[",["T_LNUMBER","1",494],",",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'de'",494],",",["T_WHITESPACE"," ",494],["T_LNUMBER","101",494],",",["T_WHITESPACE"," ",494],["T_CONSTANT_ENCAPSED_STRING","'de'",494],"]",",",["T_WHITESPACE","\n      ",494],"[",["T_LNUMBER","2",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'en'",495],",",["T_WHITESPACE"," ",495],["T_LNUMBER","102",495],",",["T_WHITESPACE"," ",495],["T_CONSTANT_ENCAPSED_STRING","'en'",495],"]",",",["T_WHITESPACE","\n    ",495],"]",")",";",["T_WHITESPACE","\n\n    ",496],["T_COMMENT","\/\/ Lookup nothing, gives nothing.\n",498],["T_WHITESPACE","    ",499],["T_VARIABLE","$this",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","assertEquals",499],"(","[","]",",",["T_WHITESPACE"," ",499],["T_VARIABLE","$id_map",499],["T_OBJECT_OPERATOR","->",499],["T_STRING","lookupDestinationIds",499],"(","[","]",")",")",";",["T_WHITESPACE","\n    ",499],["T_COMMENT","\/\/ Lookup by complete non-associative list.\n",500],["T_WHITESPACE","    ",501],["T_VARIABLE","$this",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","assertEquals",501],"(","[","[",["T_LNUMBER","101",501],",",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","'en'",501],"]","]",",",["T_WHITESPACE"," ",501],["T_VARIABLE","$id_map",501],["T_OBJECT_OPERATOR","->",501],["T_STRING","lookupDestinationIds",501],"(","[",["T_LNUMBER","1",501],",",["T_WHITESPACE"," ",501],["T_CONSTANT_ENCAPSED_STRING","'en'",501],"]",")",")",";",["T_WHITESPACE","\n    ",501],["T_VARIABLE","$this",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","assertEquals",502],"(","[","[",["T_LNUMBER","101",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'fr'",502],"]","]",",",["T_WHITESPACE"," ",502],["T_VARIABLE","$id_map",502],["T_OBJECT_OPERATOR","->",502],["T_STRING","lookupDestinationIds",502],"(","[",["T_LNUMBER","1",502],",",["T_WHITESPACE"," ",502],["T_CONSTANT_ENCAPSED_STRING","'fr'",502],"]",")",")",";",["T_WHITESPACE","\n    ",502],["T_VARIABLE","$this",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","assertEquals",503],"(","[","[",["T_LNUMBER","102",503],",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'en'",503],"]","]",",",["T_WHITESPACE"," ",503],["T_VARIABLE","$id_map",503],["T_OBJECT_OPERATOR","->",503],["T_STRING","lookupDestinationIds",503],"(","[",["T_LNUMBER","2",503],",",["T_WHITESPACE"," ",503],["T_CONSTANT_ENCAPSED_STRING","'en'",503],"]",")",")",";",["T_WHITESPACE","\n    ",503],["T_VARIABLE","$this",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","assertEquals",504],"(","[","]",",",["T_WHITESPACE"," ",504],["T_VARIABLE","$id_map",504],["T_OBJECT_OPERATOR","->",504],["T_STRING","lookupDestinationIds",504],"(","[",["T_LNUMBER","2",504],",",["T_WHITESPACE"," ",504],["T_CONSTANT_ENCAPSED_STRING","'fr'",504],"]",")",")",";",["T_WHITESPACE","\n    ",504],["T_VARIABLE","$this",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","assertEquals",505],"(","[","]",",",["T_WHITESPACE"," ",505],["T_VARIABLE","$id_map",505],["T_OBJECT_OPERATOR","->",505],["T_STRING","lookupDestinationIds",505],"(","[",["T_LNUMBER","99",505],",",["T_WHITESPACE"," ",505],["T_CONSTANT_ENCAPSED_STRING","'en'",505],"]",")",")",";",["T_WHITESPACE","\n    ",505],["T_COMMENT","\/\/ Lookup by complete associative list.\n",506],["T_WHITESPACE","    ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","assertEquals",507],"(","[","[",["T_LNUMBER","101",507],",",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'en'",507],"]","]",",",["T_WHITESPACE"," ",507],["T_VARIABLE","$id_map",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","lookupDestinationIds",507],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",507],["T_WHITESPACE"," ",507],["T_DOUBLE_ARROW","=>",507],["T_WHITESPACE"," ",507],["T_LNUMBER","1",507],",",["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'language'",507],["T_WHITESPACE"," ",507],["T_DOUBLE_ARROW","=>",507],["T_WHITESPACE"," ",507],["T_CONSTANT_ENCAPSED_STRING","'en'",507],"]",")",")",";",["T_WHITESPACE","\n    ",507],["T_VARIABLE","$this",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","assertEquals",508],"(","[","[",["T_LNUMBER","101",508],",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'fr'",508],"]","]",",",["T_WHITESPACE"," ",508],["T_VARIABLE","$id_map",508],["T_OBJECT_OPERATOR","->",508],["T_STRING","lookupDestinationIds",508],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_LNUMBER","1",508],",",["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'language'",508],["T_WHITESPACE"," ",508],["T_DOUBLE_ARROW","=>",508],["T_WHITESPACE"," ",508],["T_CONSTANT_ENCAPSED_STRING","'fr'",508],"]",")",")",";",["T_WHITESPACE","\n    ",508],["T_VARIABLE","$this",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","assertEquals",509],"(","[","[",["T_LNUMBER","102",509],",",["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'en'",509],"]","]",",",["T_WHITESPACE"," ",509],["T_VARIABLE","$id_map",509],["T_OBJECT_OPERATOR","->",509],["T_STRING","lookupDestinationIds",509],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",509],["T_WHITESPACE"," ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_LNUMBER","2",509],",",["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'language'",509],["T_WHITESPACE"," ",509],["T_DOUBLE_ARROW","=>",509],["T_WHITESPACE"," ",509],["T_CONSTANT_ENCAPSED_STRING","'en'",509],"]",")",")",";",["T_WHITESPACE","\n    ",509],["T_VARIABLE","$this",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","assertEquals",510],"(","[","]",",",["T_WHITESPACE"," ",510],["T_VARIABLE","$id_map",510],["T_OBJECT_OPERATOR","->",510],["T_STRING","lookupDestinationIds",510],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",510],["T_WHITESPACE"," ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_LNUMBER","2",510],",",["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'language'",510],["T_WHITESPACE"," ",510],["T_DOUBLE_ARROW","=>",510],["T_WHITESPACE"," ",510],["T_CONSTANT_ENCAPSED_STRING","'fr'",510],"]",")",")",";",["T_WHITESPACE","\n    ",510],["T_VARIABLE","$this",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","assertEquals",511],"(","[","]",",",["T_WHITESPACE"," ",511],["T_VARIABLE","$id_map",511],["T_OBJECT_OPERATOR","->",511],["T_STRING","lookupDestinationIds",511],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],["T_LNUMBER","99",511],",",["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'language'",511],["T_WHITESPACE"," ",511],["T_DOUBLE_ARROW","=>",511],["T_WHITESPACE"," ",511],["T_CONSTANT_ENCAPSED_STRING","'en'",511],"]",")",")",";",["T_WHITESPACE","\n    ",511],["T_COMMENT","\/\/ Lookup by partial non-associative list.\n",512],["T_WHITESPACE","    ",513],["T_VARIABLE","$this",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","assertEquals",513],"(","[","[",["T_LNUMBER","101",513],",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'en'",513],"]",",",["T_WHITESPACE"," ",513],"[",["T_LNUMBER","101",513],",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'fr'",513],"]",",",["T_WHITESPACE"," ",513],"[",["T_LNUMBER","101",513],",",["T_WHITESPACE"," ",513],["T_CONSTANT_ENCAPSED_STRING","'de'",513],"]","]",",",["T_WHITESPACE"," ",513],["T_VARIABLE","$id_map",513],["T_OBJECT_OPERATOR","->",513],["T_STRING","lookupDestinationIds",513],"(","[",["T_LNUMBER","1",513],"]",")",")",";",["T_WHITESPACE","\n    ",513],["T_VARIABLE","$this",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","assertEquals",514],"(","[","[",["T_LNUMBER","102",514],",",["T_WHITESPACE"," ",514],["T_CONSTANT_ENCAPSED_STRING","'en'",514],"]","]",",",["T_WHITESPACE"," ",514],["T_VARIABLE","$id_map",514],["T_OBJECT_OPERATOR","->",514],["T_STRING","lookupDestinationIds",514],"(","[",["T_LNUMBER","2",514],"]",")",")",";",["T_WHITESPACE","\n    ",514],["T_VARIABLE","$this",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","assertEquals",515],"(","[","]",",",["T_WHITESPACE"," ",515],["T_VARIABLE","$id_map",515],["T_OBJECT_OPERATOR","->",515],["T_STRING","lookupDestinationIds",515],"(","[",["T_LNUMBER","99",515],"]",")",")",";",["T_WHITESPACE","\n    ",515],["T_COMMENT","\/\/ Lookup by partial associative list.\n",516],["T_WHITESPACE","    ",517],["T_VARIABLE","$this",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","assertEquals",517],"(","[","[",["T_LNUMBER","101",517],",",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'en'",517],"]",",",["T_WHITESPACE"," ",517],"[",["T_LNUMBER","101",517],",",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'fr'",517],"]",",",["T_WHITESPACE"," ",517],"[",["T_LNUMBER","101",517],",",["T_WHITESPACE"," ",517],["T_CONSTANT_ENCAPSED_STRING","'de'",517],"]","]",",",["T_WHITESPACE"," ",517],["T_VARIABLE","$id_map",517],["T_OBJECT_OPERATOR","->",517],["T_STRING","lookupDestinationIds",517],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",517],["T_WHITESPACE"," ",517],["T_DOUBLE_ARROW","=>",517],["T_WHITESPACE"," ",517],["T_LNUMBER","1",517],"]",")",")",";",["T_WHITESPACE","\n    ",517],["T_VARIABLE","$this",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","assertEquals",518],"(","[","[",["T_LNUMBER","102",518],",",["T_WHITESPACE"," ",518],["T_CONSTANT_ENCAPSED_STRING","'en'",518],"]","]",",",["T_WHITESPACE"," ",518],["T_VARIABLE","$id_map",518],["T_OBJECT_OPERATOR","->",518],["T_STRING","lookupDestinationIds",518],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",518],["T_WHITESPACE"," ",518],["T_DOUBLE_ARROW","=>",518],["T_WHITESPACE"," ",518],["T_LNUMBER","2",518],"]",")",")",";",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$this",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","assertEquals",519],"(","[","]",",",["T_WHITESPACE"," ",519],["T_VARIABLE","$id_map",519],["T_OBJECT_OPERATOR","->",519],["T_STRING","lookupDestinationIds",519],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",519],["T_WHITESPACE"," ",519],["T_DOUBLE_ARROW","=>",519],["T_WHITESPACE"," ",519],["T_LNUMBER","99",519],"]",")",")",";",["T_WHITESPACE","\n    ",519],["T_COMMENT","\/\/ Out-of-order partial associative list.\n",520],["T_WHITESPACE","    ",521],["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","assertEquals",521],"(","[","[",["T_LNUMBER","101",521],",",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","'en'",521],"]",",",["T_WHITESPACE"," ",521],"[",["T_LNUMBER","102",521],",",["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","'en'",521],"]","]",",",["T_WHITESPACE"," ",521],["T_VARIABLE","$id_map",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","lookupDestinationIds",521],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language'",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],["T_CONSTANT_ENCAPSED_STRING","'en'",521],"]",")",")",";",["T_WHITESPACE","\n    ",521],["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","assertEquals",522],"(","[","[",["T_LNUMBER","101",522],",",["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","'fr'",522],"]","]",",",["T_WHITESPACE"," ",522],["T_VARIABLE","$id_map",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","lookupDestinationIds",522],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language'",522],["T_WHITESPACE"," ",522],["T_DOUBLE_ARROW","=>",522],["T_WHITESPACE"," ",522],["T_CONSTANT_ENCAPSED_STRING","'fr'",522],"]",")",")",";",["T_WHITESPACE","\n    ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","assertEquals",523],"(","[","]",",",["T_WHITESPACE"," ",523],["T_VARIABLE","$id_map",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","lookupDestinationIds",523],"(","[",["T_CONSTANT_ENCAPSED_STRING","'language'",523],["T_WHITESPACE"," ",523],["T_DOUBLE_ARROW","=>",523],["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'zh'",523],"]",")",")",";",["T_WHITESPACE","\n    ",523],["T_COMMENT","\/\/ Error conditions.\n",524],["T_WHITESPACE","    ",525],["T_TRY","try",525],["T_WHITESPACE"," ",525],"{",["T_WHITESPACE","\n      ",525],["T_VARIABLE","$id_map",526],["T_OBJECT_OPERATOR","->",526],["T_STRING","lookupDestinationIds",526],"(","[",["T_LNUMBER","1",526],",",["T_WHITESPACE"," ",526],["T_LNUMBER","2",526],",",["T_WHITESPACE"," ",526],["T_LNUMBER","3",526],"]",")",";",["T_WHITESPACE","\n      ",526],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","fail",527],"(",["T_CONSTANT_ENCAPSED_STRING","'Too many source IDs should throw'",527],")",";",["T_WHITESPACE","\n    ",527],"}",["T_WHITESPACE","\n    ",528],["T_CATCH","catch",529],["T_WHITESPACE"," ",529],"(",["T_STRING","MigrateException",529],["T_WHITESPACE"," ",529],["T_VARIABLE","$e",529],")",["T_WHITESPACE"," ",529],"{",["T_WHITESPACE","\n      ",529],["T_VARIABLE","$this",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","assertEquals",530],"(",["T_CONSTANT_ENCAPSED_STRING","\"Extra unknown items in source IDs\"",530],",",["T_WHITESPACE"," ",530],["T_VARIABLE","$e",530],["T_OBJECT_OPERATOR","->",530],["T_STRING","getMessage",530],"(",")",")",";",["T_WHITESPACE","\n    ",530],"}",["T_WHITESPACE","\n    ",531],["T_TRY","try",532],["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n      ",532],["T_VARIABLE","$id_map",533],["T_OBJECT_OPERATOR","->",533],["T_STRING","lookupDestinationIds",533],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",533],["T_WHITESPACE"," ",533],["T_DOUBLE_ARROW","=>",533],["T_WHITESPACE"," ",533],["T_LNUMBER","1",533],",",["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'aaa'",533],["T_WHITESPACE"," ",533],["T_DOUBLE_ARROW","=>",533],["T_WHITESPACE"," ",533],["T_CONSTANT_ENCAPSED_STRING","'2'",533],"]",")",";",["T_WHITESPACE","\n      ",533],["T_VARIABLE","$this",534],["T_OBJECT_OPERATOR","->",534],["T_STRING","fail",534],"(",["T_CONSTANT_ENCAPSED_STRING","'Unknown source ID key should throw'",534],")",";",["T_WHITESPACE","\n    ",534],"}",["T_WHITESPACE","\n    ",535],["T_CATCH","catch",536],["T_WHITESPACE"," ",536],"(",["T_STRING","MigrateException",536],["T_WHITESPACE"," ",536],["T_VARIABLE","$e",536],")",["T_WHITESPACE"," ",536],"{",["T_WHITESPACE","\n      ",536],["T_VARIABLE","$this",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","assertEquals",537],"(",["T_CONSTANT_ENCAPSED_STRING","\"Extra unknown items in source IDs\"",537],",",["T_WHITESPACE"," ",537],["T_VARIABLE","$e",537],["T_OBJECT_OPERATOR","->",537],["T_STRING","getMessage",537],"(",")",")",";",["T_WHITESPACE","\n    ",537],"}",["T_WHITESPACE","\n\n    ",538],["T_COMMENT","\/\/ Verify that we are looking up by source_id_hash when all source IDs are\n",540],["T_WHITESPACE","    ",541],["T_COMMENT","\/\/ passed in.\n",541],["T_WHITESPACE","    ",542],["T_VARIABLE","$id_map",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","getDatabase",542],"(",")",["T_OBJECT_OPERATOR","->",542],["T_STRING","update",542],"(",["T_VARIABLE","$id_map",542],["T_OBJECT_OPERATOR","->",542],["T_STRING","mapTableName",542],"(",")",")",["T_WHITESPACE","\n      ",542],["T_OBJECT_OPERATOR","->",543],["T_STRING","condition",543],"(",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",543],",",["T_WHITESPACE"," ",543],["T_LNUMBER","1",543],")",["T_WHITESPACE","\n      ",543],["T_OBJECT_OPERATOR","->",544],["T_STRING","condition",544],"(",["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",544],",",["T_WHITESPACE"," ",544],["T_CONSTANT_ENCAPSED_STRING","'en'",544],")",["T_WHITESPACE","\n      ",544],["T_OBJECT_OPERATOR","->",545],["T_STRING","fields",545],"(","[",["T_STRING","TestSqlIdMap",545],["T_DOUBLE_COLON","::",545],["T_STRING","SOURCE_IDS_HASH",545],["T_WHITESPACE"," ",545],["T_DOUBLE_ARROW","=>",545],["T_WHITESPACE"," ",545],["T_STRING","uniqid",545],"(",")","]",")",["T_WHITESPACE","\n      ",545],["T_OBJECT_OPERATOR","->",546],["T_STRING","execute",546],"(",")",";",["T_WHITESPACE","\n    ",546],["T_VARIABLE","$this",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","assertNotEquals",547],"(","[","[",["T_LNUMBER","101",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'en'",547],"]","]",",",["T_WHITESPACE"," ",547],["T_VARIABLE","$id_map",547],["T_OBJECT_OPERATOR","->",547],["T_STRING","lookupDestinationIds",547],"(","[",["T_LNUMBER","1",547],",",["T_WHITESPACE"," ",547],["T_CONSTANT_ENCAPSED_STRING","'en'",547],"]",")",")",";",["T_WHITESPACE","\n  ",547],"}",["T_WHITESPACE","\n\n  ",548],["T_DOC_COMMENT","\/**\n   * Tests the getRowByDestination method.\n   *\/",550],["T_WHITESPACE","\n  ",552],["T_PUBLIC","public",553],["T_WHITESPACE"," ",553],["T_FUNCTION","function",553],["T_WHITESPACE"," ",553],["T_STRING","testGetRowByDestination",553],"(",")",["T_WHITESPACE"," ",553],"{",["T_WHITESPACE","\n    ",553],["T_VARIABLE","$row",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],"[",["T_WHITESPACE","\n      ",554],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",555],["T_WHITESPACE"," ",555],["T_DOUBLE_ARROW","=>",555],["T_WHITESPACE"," ",555],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_1'",555],",",["T_WHITESPACE","\n      ",555],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",556],["T_WHITESPACE"," ",556],["T_DOUBLE_ARROW","=>",556],["T_WHITESPACE"," ",556],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_2'",556],",",["T_WHITESPACE","\n      ",556],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",557],["T_WHITESPACE"," ",557],["T_DOUBLE_ARROW","=>",557],["T_WHITESPACE"," ",557],["T_VARIABLE","$this",557],["T_OBJECT_OPERATOR","->",557],["T_STRING","getIdMap",557],"(",")",["T_OBJECT_OPERATOR","->",557],["T_STRING","getSourceIDsHash",557],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",557],["T_WHITESPACE"," ",557],["T_DOUBLE_ARROW","=>",557],["T_WHITESPACE"," ",557],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_1'",557],"]",")",",",["T_WHITESPACE","\n      ",557],["T_CONSTANT_ENCAPSED_STRING","'destid1'",558],["T_WHITESPACE"," ",558],["T_DOUBLE_ARROW","=>",558],["T_WHITESPACE"," ",558],["T_CONSTANT_ENCAPSED_STRING","'destination_id_value_1'",558],",",["T_WHITESPACE","\n    ",558],"]",["T_WHITESPACE"," ",559],"+",["T_WHITESPACE"," ",559],["T_VARIABLE","$this",559],["T_OBJECT_OPERATOR","->",559],["T_STRING","idMapDefaults",559],"(",")",";",["T_WHITESPACE","\n    ",559],["T_VARIABLE","$this",560],["T_OBJECT_OPERATOR","->",560],["T_STRING","saveMap",560],"(",["T_VARIABLE","$row",560],")",";",["T_WHITESPACE","\n    ",560],["T_VARIABLE","$row",561],["T_WHITESPACE"," ",561],"=",["T_WHITESPACE"," ",561],"[",["T_WHITESPACE","\n      ",561],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",562],["T_WHITESPACE"," ",562],["T_DOUBLE_ARROW","=>",562],["T_WHITESPACE"," ",562],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_3'",562],",",["T_WHITESPACE","\n      ",562],["T_CONSTANT_ENCAPSED_STRING","'sourceid2'",563],["T_WHITESPACE"," ",563],["T_DOUBLE_ARROW","=>",563],["T_WHITESPACE"," ",563],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_4'",563],",",["T_WHITESPACE","\n      ",563],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],["T_VARIABLE","$this",564],["T_OBJECT_OPERATOR","->",564],["T_STRING","getIdMap",564],"(",")",["T_OBJECT_OPERATOR","->",564],["T_STRING","getSourceIDsHash",564],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",564],["T_WHITESPACE"," ",564],["T_DOUBLE_ARROW","=>",564],["T_WHITESPACE"," ",564],["T_CONSTANT_ENCAPSED_STRING","'source_id_value_3'",564],"]",")",",",["T_WHITESPACE","\n      ",564],["T_CONSTANT_ENCAPSED_STRING","'destid1'",565],["T_WHITESPACE"," ",565],["T_DOUBLE_ARROW","=>",565],["T_WHITESPACE"," ",565],["T_CONSTANT_ENCAPSED_STRING","'destination_id_value_2'",565],",",["T_WHITESPACE","\n    ",565],"]",["T_WHITESPACE"," ",566],"+",["T_WHITESPACE"," ",566],["T_VARIABLE","$this",566],["T_OBJECT_OPERATOR","->",566],["T_STRING","idMapDefaults",566],"(",")",";",["T_WHITESPACE","\n    ",566],["T_VARIABLE","$this",567],["T_OBJECT_OPERATOR","->",567],["T_STRING","saveMap",567],"(",["T_VARIABLE","$row",567],")",";",["T_WHITESPACE","\n    ",567],["T_VARIABLE","$dest_id_values",568],["T_WHITESPACE"," ",568],"=",["T_WHITESPACE"," ",568],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",568],["T_WHITESPACE"," ",568],["T_DOUBLE_ARROW","=>",568],["T_WHITESPACE"," ",568],["T_VARIABLE","$row",568],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",568],"]","]",";",["T_WHITESPACE","\n    ",568],["T_VARIABLE","$id_map",569],["T_WHITESPACE"," ",569],"=",["T_WHITESPACE"," ",569],["T_VARIABLE","$this",569],["T_OBJECT_OPERATOR","->",569],["T_STRING","getIdMap",569],"(",")",";",["T_WHITESPACE","\n    ",569],["T_VARIABLE","$result_row",570],["T_WHITESPACE"," ",570],"=",["T_WHITESPACE"," ",570],["T_VARIABLE","$id_map",570],["T_OBJECT_OPERATOR","->",570],["T_STRING","getRowByDestination",570],"(",["T_VARIABLE","$dest_id_values",570],")",";",["T_WHITESPACE","\n    ",570],["T_VARIABLE","$this",571],["T_OBJECT_OPERATOR","->",571],["T_STRING","assertSame",571],"(",["T_VARIABLE","$row",571],",",["T_WHITESPACE"," ",571],["T_VARIABLE","$result_row",571],")",";",["T_WHITESPACE","\n    ",571],["T_COMMENT","\/\/ This value does not exist.\n",572],["T_WHITESPACE","    ",573],["T_VARIABLE","$dest_id_values",573],["T_WHITESPACE"," ",573],"=",["T_WHITESPACE"," ",573],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",573],["T_WHITESPACE"," ",573],["T_DOUBLE_ARROW","=>",573],["T_WHITESPACE"," ",573],["T_CONSTANT_ENCAPSED_STRING","'invalid_destination_id_property'",573],"]",";",["T_WHITESPACE","\n    ",573],["T_VARIABLE","$id_map",574],["T_WHITESPACE"," ",574],"=",["T_WHITESPACE"," ",574],["T_VARIABLE","$this",574],["T_OBJECT_OPERATOR","->",574],["T_STRING","getIdMap",574],"(",")",";",["T_WHITESPACE","\n    ",574],["T_VARIABLE","$result_row",575],["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$id_map",575],["T_OBJECT_OPERATOR","->",575],["T_STRING","getRowByDestination",575],"(",["T_VARIABLE","$dest_id_values",575],")",";",["T_WHITESPACE","\n    ",575],["T_VARIABLE","$this",576],["T_OBJECT_OPERATOR","->",576],["T_STRING","assertFalse",576],"(",["T_VARIABLE","$result_row",576],")",";",["T_WHITESPACE","\n  ",576],"}",["T_WHITESPACE","\n\n  ",577],["T_DOC_COMMENT","\/**\n   * Data provider for testLookupSourceIDMapping().\n   *\n   * Scenarios to test (for both hits and misses) are:\n   * - Single-value destination ID to single-value source ID.\n   * - Multi-value destination ID to multi-value source ID.\n   * - Single-value destination ID to multi-value source ID.\n   * - Multi-value destination ID to single-value source ID.\n   *\n   * @return array\n   *   An array of data values.\n   *\/",579],["T_WHITESPACE","\n  ",590],["T_PUBLIC","public",591],["T_WHITESPACE"," ",591],["T_FUNCTION","function",591],["T_WHITESPACE"," ",591],["T_STRING","lookupSourceIDMappingDataProvider",591],"(",")",["T_WHITESPACE"," ",591],"{",["T_WHITESPACE","\n    ",591],["T_RETURN","return",592],["T_WHITESPACE"," ",592],"[",["T_WHITESPACE","\n      ",592],"[",["T_LNUMBER","1",593],",",["T_WHITESPACE"," ",593],["T_LNUMBER","1",593],"]",",",["T_WHITESPACE","\n      ",593],"[",["T_LNUMBER","2",594],",",["T_WHITESPACE"," ",594],["T_LNUMBER","2",594],"]",",",["T_WHITESPACE","\n      ",594],"[",["T_LNUMBER","1",595],",",["T_WHITESPACE"," ",595],["T_LNUMBER","2",595],"]",",",["T_WHITESPACE","\n      ",595],"[",["T_LNUMBER","2",596],",",["T_WHITESPACE"," ",596],["T_LNUMBER","1",596],"]",",",["T_WHITESPACE","\n    ",596],"]",";",["T_WHITESPACE","\n  ",597],"}",["T_WHITESPACE","\n\n  ",598],["T_DOC_COMMENT","\/**\n   * Performs the source ID test on source and destination fields.\n   *\n   * @param int $num_source_fields\n   *   Number of source fields to test.\n   * @param int $num_destination_fields\n   *   Number of destination fields to test.\n   *\n   * @dataProvider lookupSourceIDMappingDataProvider\n   *\/",600],["T_WHITESPACE","\n  ",609],["T_PUBLIC","public",610],["T_WHITESPACE"," ",610],["T_FUNCTION","function",610],["T_WHITESPACE"," ",610],["T_STRING","testLookupSourceIDMapping",610],"(",["T_VARIABLE","$num_source_fields",610],",",["T_WHITESPACE"," ",610],["T_VARIABLE","$num_destination_fields",610],")",["T_WHITESPACE"," ",610],"{",["T_WHITESPACE","\n    ",610],["T_COMMENT","\/\/ Adjust the migration configuration according to the number of source and\n",611],["T_WHITESPACE","    ",612],["T_COMMENT","\/\/ destination fields.\n",612],["T_WHITESPACE","    ",613],["T_VARIABLE","$this",613],["T_OBJECT_OPERATOR","->",613],["T_STRING","sourceIds",613],["T_WHITESPACE"," ",613],"=",["T_WHITESPACE"," ",613],"[","]",";",["T_WHITESPACE","\n    ",613],["T_VARIABLE","$this",614],["T_OBJECT_OPERATOR","->",614],["T_STRING","destinationIds",614],["T_WHITESPACE"," ",614],"=",["T_WHITESPACE"," ",614],"[","]",";",["T_WHITESPACE","\n    ",614],["T_VARIABLE","$row",615],["T_WHITESPACE"," ",615],"=",["T_WHITESPACE"," ",615],["T_VARIABLE","$this",615],["T_OBJECT_OPERATOR","->",615],["T_STRING","idMapDefaults",615],"(",")",";",["T_WHITESPACE","\n    ",615],["T_VARIABLE","$source_ids_values",616],["T_WHITESPACE"," ",616],"=",["T_WHITESPACE"," ",616],"[","]",";",["T_WHITESPACE","\n    ",616],["T_VARIABLE","$expected_result",617],["T_WHITESPACE"," ",617],"=",["T_WHITESPACE"," ",617],"[","]",";",["T_WHITESPACE","\n    ",617],["T_FOR","for",618],["T_WHITESPACE"," ",618],"(",["T_VARIABLE","$i",618],["T_WHITESPACE"," ",618],"=",["T_WHITESPACE"," ",618],["T_LNUMBER","1",618],";",["T_WHITESPACE"," ",618],["T_VARIABLE","$i",618],["T_WHITESPACE"," ",618],["T_IS_SMALLER_OR_EQUAL","<=",618],["T_WHITESPACE"," ",618],["T_VARIABLE","$num_source_fields",618],";",["T_WHITESPACE"," ",618],["T_VARIABLE","$i",618],["T_INC","++",618],")",["T_WHITESPACE"," ",618],"{",["T_WHITESPACE","\n      ",618],["T_VARIABLE","$row",619],"[","\"",["T_ENCAPSED_AND_WHITESPACE","sourceid",619],["T_VARIABLE","$i",619],"\"","]",["T_WHITESPACE"," ",619],"=",["T_WHITESPACE"," ",619],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",619],["T_VARIABLE","$i",619],"\"",";",["T_WHITESPACE","\n      ",619],["T_VARIABLE","$source_ids_values",620],["T_WHITESPACE"," ",620],"=",["T_WHITESPACE"," ",620],"[",["T_VARIABLE","$row",620],"[","\"",["T_ENCAPSED_AND_WHITESPACE","sourceid",620],["T_VARIABLE","$i",620],"\"","]","]",";",["T_WHITESPACE","\n      ",620],["T_VARIABLE","$expected_result",621],"[","\"",["T_ENCAPSED_AND_WHITESPACE","source_id_property_",621],["T_VARIABLE","$i",621],"\"","]",["T_WHITESPACE"," ",621],"=",["T_WHITESPACE"," ",621],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",621],["T_VARIABLE","$i",621],"\"",";",["T_WHITESPACE","\n      ",621],["T_VARIABLE","$this",622],["T_OBJECT_OPERATOR","->",622],["T_STRING","sourceIds",622],"[","\"",["T_ENCAPSED_AND_WHITESPACE","source_id_property_",622],["T_VARIABLE","$i",622],"\"","]",["T_WHITESPACE"," ",622],"=",["T_WHITESPACE"," ",622],"[","]",";",["T_WHITESPACE","\n    ",622],"}",["T_WHITESPACE","\n    ",623],["T_VARIABLE","$destination_id_values",624],["T_WHITESPACE"," ",624],"=",["T_WHITESPACE"," ",624],"[","]",";",["T_WHITESPACE","\n    ",624],["T_VARIABLE","$nonexistent_id_values",625],["T_WHITESPACE"," ",625],"=",["T_WHITESPACE"," ",625],"[","]",";",["T_WHITESPACE","\n    ",625],["T_FOR","for",626],["T_WHITESPACE"," ",626],"(",["T_VARIABLE","$i",626],["T_WHITESPACE"," ",626],"=",["T_WHITESPACE"," ",626],["T_LNUMBER","1",626],";",["T_WHITESPACE"," ",626],["T_VARIABLE","$i",626],["T_WHITESPACE"," ",626],["T_IS_SMALLER_OR_EQUAL","<=",626],["T_WHITESPACE"," ",626],["T_VARIABLE","$num_destination_fields",626],";",["T_WHITESPACE"," ",626],["T_VARIABLE","$i",626],["T_INC","++",626],")",["T_WHITESPACE"," ",626],"{",["T_WHITESPACE","\n      ",626],["T_VARIABLE","$row",627],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destid",627],["T_VARIABLE","$i",627],"\"","]",["T_WHITESPACE"," ",627],"=",["T_WHITESPACE"," ",627],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",627],["T_VARIABLE","$i",627],"\"",";",["T_WHITESPACE","\n      ",627],["T_VARIABLE","$destination_id_values",628],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_property_",628],["T_VARIABLE","$i",628],"\"","]",["T_WHITESPACE"," ",628],"=",["T_WHITESPACE"," ",628],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",628],["T_VARIABLE","$i",628],"\"",";",["T_WHITESPACE","\n      ",628],["T_VARIABLE","$nonexistent_id_values",629],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_property_",629],["T_VARIABLE","$i",629],"\"","]",["T_WHITESPACE"," ",629],"=",["T_WHITESPACE"," ",629],"\"",["T_ENCAPSED_AND_WHITESPACE","nonexistent_destination_id_value_",629],["T_VARIABLE","$i",629],"\"",";",["T_WHITESPACE","\n      ",629],["T_VARIABLE","$this",630],["T_OBJECT_OPERATOR","->",630],["T_STRING","destinationIds",630],"[","\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_property_",630],["T_VARIABLE","$i",630],"\"","]",["T_WHITESPACE"," ",630],"=",["T_WHITESPACE"," ",630],"[","]",";",["T_WHITESPACE","\n    ",630],"}",["T_WHITESPACE","\n    ",631],["T_VARIABLE","$row",632],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",632],"]",["T_WHITESPACE"," ",632],"=",["T_WHITESPACE"," ",632],["T_VARIABLE","$this",632],["T_OBJECT_OPERATOR","->",632],["T_STRING","getIdMap",632],"(",")",["T_OBJECT_OPERATOR","->",632],["T_STRING","getSourceIDsHash",632],"(",["T_VARIABLE","$source_ids_values",632],")",";",["T_WHITESPACE","\n    ",632],["T_VARIABLE","$this",633],["T_OBJECT_OPERATOR","->",633],["T_STRING","saveMap",633],"(",["T_VARIABLE","$row",633],")",";",["T_WHITESPACE","\n    ",633],["T_VARIABLE","$id_map",634],["T_WHITESPACE"," ",634],"=",["T_WHITESPACE"," ",634],["T_VARIABLE","$this",634],["T_OBJECT_OPERATOR","->",634],["T_STRING","getIdMap",634],"(",")",";",["T_WHITESPACE","\n    ",634],["T_COMMENT","\/\/ Test for a valid hit.\n",635],["T_WHITESPACE","    ",636],["T_VARIABLE","$source_id",636],["T_WHITESPACE"," ",636],"=",["T_WHITESPACE"," ",636],["T_VARIABLE","$id_map",636],["T_OBJECT_OPERATOR","->",636],["T_STRING","lookupSourceID",636],"(",["T_VARIABLE","$destination_id_values",636],")",";",["T_WHITESPACE","\n    ",636],["T_VARIABLE","$this",637],["T_OBJECT_OPERATOR","->",637],["T_STRING","assertSame",637],"(",["T_VARIABLE","$expected_result",637],",",["T_WHITESPACE"," ",637],["T_VARIABLE","$source_id",637],")",";",["T_WHITESPACE","\n    ",637],["T_COMMENT","\/\/ Test for a miss.\n",638],["T_WHITESPACE","    ",639],["T_VARIABLE","$source_id",639],["T_WHITESPACE"," ",639],"=",["T_WHITESPACE"," ",639],["T_VARIABLE","$id_map",639],["T_OBJECT_OPERATOR","->",639],["T_STRING","lookupSourceID",639],"(",["T_VARIABLE","$nonexistent_id_values",639],")",";",["T_WHITESPACE","\n    ",639],["T_VARIABLE","$this",640],["T_OBJECT_OPERATOR","->",640],["T_STRING","assertSame",640],"(",["T_LNUMBER","0",640],",",["T_WHITESPACE"," ",640],["T_STRING","count",640],"(",["T_VARIABLE","$source_id",640],")",")",";",["T_WHITESPACE","\n  ",640],"}",["T_WHITESPACE","\n\n  ",641],["T_DOC_COMMENT","\/**\n   * Tests currentDestination() and currentSource().\n   *\/",643],["T_WHITESPACE","\n  ",645],["T_PUBLIC","public",646],["T_WHITESPACE"," ",646],["T_FUNCTION","function",646],["T_WHITESPACE"," ",646],["T_STRING","testCurrentDestinationAndSource",646],"(",")",["T_WHITESPACE"," ",646],"{",["T_WHITESPACE","\n    ",646],["T_COMMENT","\/\/ Simple map with one source and one destination ID.\n",647],["T_WHITESPACE","    ",648],["T_VARIABLE","$id_map",648],["T_WHITESPACE"," ",648],"=",["T_WHITESPACE"," ",648],["T_VARIABLE","$this",648],["T_OBJECT_OPERATOR","->",648],["T_STRING","setupRows",648],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",648],"]",",",["T_WHITESPACE"," ",648],"[",["T_CONSTANT_ENCAPSED_STRING","'nid'",648],"]",",",["T_WHITESPACE"," ",648],"[",["T_WHITESPACE","\n      ",648],"[",["T_LNUMBER","1",649],",",["T_WHITESPACE"," ",649],["T_LNUMBER","101",649],"]",",",["T_WHITESPACE","\n      ",649],"[",["T_LNUMBER","2",650],",",["T_WHITESPACE"," ",650],["T_LNUMBER","102",650],"]",",",["T_WHITESPACE","\n      ",650],"[",["T_LNUMBER","3",651],",",["T_WHITESPACE"," ",651],["T_LNUMBER","103",651],"]",",",["T_WHITESPACE","\n      ",651],["T_COMMENT","\/\/ Mock a failed row by setting the destination ID to NULL.\n",652],["T_WHITESPACE","      ",653],"[",["T_LNUMBER","4",653],",",["T_WHITESPACE"," ",653],["T_STRING","NULL",653],"]",",",["T_WHITESPACE","\n    ",653],"]",")",";",["T_WHITESPACE","\n\n    ",654],["T_COMMENT","\/\/ The rows are ordered by destination ID so the failed row should be first.\n",656],["T_WHITESPACE","    ",657],["T_VARIABLE","$id_map",657],["T_OBJECT_OPERATOR","->",657],["T_STRING","rewind",657],"(",")",";",["T_WHITESPACE","\n    ",657],["T_VARIABLE","$this",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","assertEquals",658],"(","[","]",",",["T_WHITESPACE"," ",658],["T_VARIABLE","$id_map",658],["T_OBJECT_OPERATOR","->",658],["T_STRING","currentDestination",658],"(",")",")",";",["T_WHITESPACE","\n    ",658],["T_VARIABLE","$this",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","assertEquals",659],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",659],["T_WHITESPACE"," ",659],["T_DOUBLE_ARROW","=>",659],["T_WHITESPACE"," ",659],["T_LNUMBER","4",659],"]",",",["T_WHITESPACE"," ",659],["T_VARIABLE","$id_map",659],["T_OBJECT_OPERATOR","->",659],["T_STRING","currentSource",659],"(",")",")",";",["T_WHITESPACE","\n    ",659],["T_VARIABLE","$id_map",660],["T_OBJECT_OPERATOR","->",660],["T_STRING","next",660],"(",")",";",["T_WHITESPACE","\n    ",660],["T_VARIABLE","$this",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","assertEquals",661],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",661],["T_WHITESPACE"," ",661],["T_DOUBLE_ARROW","=>",661],["T_WHITESPACE"," ",661],["T_LNUMBER","101",661],"]",",",["T_WHITESPACE"," ",661],["T_VARIABLE","$id_map",661],["T_OBJECT_OPERATOR","->",661],["T_STRING","currentDestination",661],"(",")",")",";",["T_WHITESPACE","\n    ",661],["T_VARIABLE","$this",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","assertEquals",662],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",662],["T_WHITESPACE"," ",662],["T_DOUBLE_ARROW","=>",662],["T_WHITESPACE"," ",662],["T_LNUMBER","1",662],"]",",",["T_WHITESPACE"," ",662],["T_VARIABLE","$id_map",662],["T_OBJECT_OPERATOR","->",662],["T_STRING","currentSource",662],"(",")",")",";",["T_WHITESPACE","\n    ",662],["T_VARIABLE","$id_map",663],["T_OBJECT_OPERATOR","->",663],["T_STRING","next",663],"(",")",";",["T_WHITESPACE","\n    ",663],["T_VARIABLE","$this",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","assertEquals",664],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",664],["T_WHITESPACE"," ",664],["T_DOUBLE_ARROW","=>",664],["T_WHITESPACE"," ",664],["T_LNUMBER","102",664],"]",",",["T_WHITESPACE"," ",664],["T_VARIABLE","$id_map",664],["T_OBJECT_OPERATOR","->",664],["T_STRING","currentDestination",664],"(",")",")",";",["T_WHITESPACE","\n    ",664],["T_VARIABLE","$this",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","assertEquals",665],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",665],["T_WHITESPACE"," ",665],["T_DOUBLE_ARROW","=>",665],["T_WHITESPACE"," ",665],["T_LNUMBER","2",665],"]",",",["T_WHITESPACE"," ",665],["T_VARIABLE","$id_map",665],["T_OBJECT_OPERATOR","->",665],["T_STRING","currentSource",665],"(",")",")",";",["T_WHITESPACE","\n    ",665],["T_VARIABLE","$id_map",666],["T_OBJECT_OPERATOR","->",666],["T_STRING","next",666],"(",")",";",["T_WHITESPACE","\n    ",666],["T_VARIABLE","$this",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","assertEquals",667],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",667],["T_WHITESPACE"," ",667],["T_DOUBLE_ARROW","=>",667],["T_WHITESPACE"," ",667],["T_LNUMBER","103",667],"]",",",["T_WHITESPACE"," ",667],["T_VARIABLE","$id_map",667],["T_OBJECT_OPERATOR","->",667],["T_STRING","currentDestination",667],"(",")",")",";",["T_WHITESPACE","\n    ",667],["T_VARIABLE","$this",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","assertEquals",668],"(","[",["T_CONSTANT_ENCAPSED_STRING","'nid'",668],["T_WHITESPACE"," ",668],["T_DOUBLE_ARROW","=>",668],["T_WHITESPACE"," ",668],["T_LNUMBER","3",668],"]",",",["T_WHITESPACE"," ",668],["T_VARIABLE","$id_map",668],["T_OBJECT_OPERATOR","->",668],["T_STRING","currentSource",668],"(",")",")",";",["T_WHITESPACE","\n    ",668],["T_VARIABLE","$id_map",669],["T_OBJECT_OPERATOR","->",669],["T_STRING","next",669],"(",")",";",["T_WHITESPACE","\n  ",669],"}",["T_WHITESPACE","\n\n  ",670],["T_DOC_COMMENT","\/**\n   * Tests the imported count method.\n   *\n   * Scenarios to test for:\n   * - No imports.\n   * - One import.\n   * - Multiple imports.\n   *\/",672],["T_WHITESPACE","\n  ",679],["T_PUBLIC","public",680],["T_WHITESPACE"," ",680],["T_FUNCTION","function",680],["T_WHITESPACE"," ",680],["T_STRING","testImportedCount",680],"(",")",["T_WHITESPACE"," ",680],"{",["T_WHITESPACE","\n    ",680],["T_VARIABLE","$id_map",681],["T_WHITESPACE"," ",681],"=",["T_WHITESPACE"," ",681],["T_VARIABLE","$this",681],["T_OBJECT_OPERATOR","->",681],["T_STRING","getIdMap",681],"(",")",";",["T_WHITESPACE","\n    ",681],["T_COMMENT","\/\/ Add a single failed row and assert zero imported rows.\n",682],["T_WHITESPACE","    ",683],["T_VARIABLE","$source",683],["T_WHITESPACE"," ",683],"=",["T_WHITESPACE"," ",683],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",683],["T_WHITESPACE"," ",683],["T_DOUBLE_ARROW","=>",683],["T_WHITESPACE"," ",683],["T_CONSTANT_ENCAPSED_STRING","'source_value_failed'",683],"]",";",["T_WHITESPACE","\n    ",683],["T_VARIABLE","$row",684],["T_WHITESPACE"," ",684],"=",["T_WHITESPACE"," ",684],["T_NEW","new",684],["T_WHITESPACE"," ",684],["T_STRING","Row",684],"(",["T_VARIABLE","$source",684],",",["T_WHITESPACE"," ",684],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",684],["T_WHITESPACE"," ",684],["T_DOUBLE_ARROW","=>",684],["T_WHITESPACE"," ",684],"[","]","]",")",";",["T_WHITESPACE","\n    ",684],["T_VARIABLE","$destination",685],["T_WHITESPACE"," ",685],"=",["T_WHITESPACE"," ",685],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",685],["T_WHITESPACE"," ",685],["T_DOUBLE_ARROW","=>",685],["T_WHITESPACE"," ",685],["T_CONSTANT_ENCAPSED_STRING","'destination_value_failed'",685],"]",";",["T_WHITESPACE","\n    ",685],["T_VARIABLE","$id_map",686],["T_OBJECT_OPERATOR","->",686],["T_STRING","saveIdMapping",686],"(",["T_VARIABLE","$row",686],",",["T_WHITESPACE"," ",686],["T_VARIABLE","$destination",686],",",["T_WHITESPACE"," ",686],["T_STRING","MigrateIdMapInterface",686],["T_DOUBLE_COLON","::",686],["T_STRING","STATUS_FAILED",686],")",";",["T_WHITESPACE","\n    ",686],["T_VARIABLE","$this",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","assertSame",687],"(",["T_LNUMBER","0",687],",",["T_WHITESPACE"," ",687],["T_INT_CAST","(int)",687],["T_WHITESPACE"," ",687],["T_VARIABLE","$id_map",687],["T_OBJECT_OPERATOR","->",687],["T_STRING","importedCount",687],"(",")",")",";",["T_WHITESPACE","\n\n    ",687],["T_COMMENT","\/\/ Add an imported row and assert single count.\n",689],["T_WHITESPACE","    ",690],["T_VARIABLE","$source",690],["T_WHITESPACE"," ",690],"=",["T_WHITESPACE"," ",690],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",690],["T_WHITESPACE"," ",690],["T_DOUBLE_ARROW","=>",690],["T_WHITESPACE"," ",690],["T_CONSTANT_ENCAPSED_STRING","'source_value_imported'",690],"]",";",["T_WHITESPACE","\n    ",690],["T_VARIABLE","$row",691],["T_WHITESPACE"," ",691],"=",["T_WHITESPACE"," ",691],["T_NEW","new",691],["T_WHITESPACE"," ",691],["T_STRING","Row",691],"(",["T_VARIABLE","$source",691],",",["T_WHITESPACE"," ",691],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",691],["T_WHITESPACE"," ",691],["T_DOUBLE_ARROW","=>",691],["T_WHITESPACE"," ",691],"[","]","]",")",";",["T_WHITESPACE","\n    ",691],["T_VARIABLE","$destination",692],["T_WHITESPACE"," ",692],"=",["T_WHITESPACE"," ",692],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",692],["T_WHITESPACE"," ",692],["T_DOUBLE_ARROW","=>",692],["T_WHITESPACE"," ",692],["T_CONSTANT_ENCAPSED_STRING","'destination_value_imported'",692],"]",";",["T_WHITESPACE","\n    ",692],["T_VARIABLE","$id_map",693],["T_OBJECT_OPERATOR","->",693],["T_STRING","saveIdMapping",693],"(",["T_VARIABLE","$row",693],",",["T_WHITESPACE"," ",693],["T_VARIABLE","$destination",693],",",["T_WHITESPACE"," ",693],["T_STRING","MigrateIdMapInterface",693],["T_DOUBLE_COLON","::",693],["T_STRING","STATUS_IMPORTED",693],")",";",["T_WHITESPACE","\n    ",693],["T_VARIABLE","$this",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","assertSame",694],"(",["T_LNUMBER","1",694],",",["T_WHITESPACE"," ",694],["T_INT_CAST","(int)",694],["T_WHITESPACE"," ",694],["T_VARIABLE","$id_map",694],["T_OBJECT_OPERATOR","->",694],["T_STRING","importedCount",694],"(",")",")",";",["T_WHITESPACE","\n\n    ",694],["T_COMMENT","\/\/ Add a row needing update and assert multiple imported rows.\n",696],["T_WHITESPACE","    ",697],["T_VARIABLE","$source",697],["T_WHITESPACE"," ",697],"=",["T_WHITESPACE"," ",697],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",697],["T_WHITESPACE"," ",697],["T_DOUBLE_ARROW","=>",697],["T_WHITESPACE"," ",697],["T_CONSTANT_ENCAPSED_STRING","'source_value_update'",697],"]",";",["T_WHITESPACE","\n    ",697],["T_VARIABLE","$row",698],["T_WHITESPACE"," ",698],"=",["T_WHITESPACE"," ",698],["T_NEW","new",698],["T_WHITESPACE"," ",698],["T_STRING","Row",698],"(",["T_VARIABLE","$source",698],",",["T_WHITESPACE"," ",698],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",698],["T_WHITESPACE"," ",698],["T_DOUBLE_ARROW","=>",698],["T_WHITESPACE"," ",698],"[","]","]",")",";",["T_WHITESPACE","\n    ",698],["T_VARIABLE","$destination",699],["T_WHITESPACE"," ",699],"=",["T_WHITESPACE"," ",699],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",699],["T_WHITESPACE"," ",699],["T_DOUBLE_ARROW","=>",699],["T_WHITESPACE"," ",699],["T_CONSTANT_ENCAPSED_STRING","'destination_value_update'",699],"]",";",["T_WHITESPACE","\n    ",699],["T_VARIABLE","$id_map",700],["T_OBJECT_OPERATOR","->",700],["T_STRING","saveIdMapping",700],"(",["T_VARIABLE","$row",700],",",["T_WHITESPACE"," ",700],["T_VARIABLE","$destination",700],",",["T_WHITESPACE"," ",700],["T_STRING","MigrateIdMapInterface",700],["T_DOUBLE_COLON","::",700],["T_STRING","STATUS_NEEDS_UPDATE",700],")",";",["T_WHITESPACE","\n    ",700],["T_VARIABLE","$this",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","assertSame",701],"(",["T_LNUMBER","2",701],",",["T_WHITESPACE"," ",701],["T_INT_CAST","(int)",701],["T_WHITESPACE"," ",701],["T_VARIABLE","$id_map",701],["T_OBJECT_OPERATOR","->",701],["T_STRING","importedCount",701],"(",")",")",";",["T_WHITESPACE","\n  ",701],"}",["T_WHITESPACE","\n\n  ",702],["T_DOC_COMMENT","\/**\n   * Tests the number of processed source rows.\n   *\n   * Scenarios to test for:\n   * - No processed rows.\n   * - One processed row.\n   * - Multiple processed rows.\n   *\/",704],["T_WHITESPACE","\n  ",711],["T_PUBLIC","public",712],["T_WHITESPACE"," ",712],["T_FUNCTION","function",712],["T_WHITESPACE"," ",712],["T_STRING","testProcessedCount",712],"(",")",["T_WHITESPACE"," ",712],"{",["T_WHITESPACE","\n    ",712],["T_VARIABLE","$id_map",713],["T_WHITESPACE"," ",713],"=",["T_WHITESPACE"," ",713],["T_VARIABLE","$this",713],["T_OBJECT_OPERATOR","->",713],["T_STRING","getIdMap",713],"(",")",";",["T_WHITESPACE","\n    ",713],["T_COMMENT","\/\/ Assert zero rows have been processed before adding rows.\n",714],["T_WHITESPACE","    ",715],["T_VARIABLE","$this",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","assertSame",715],"(",["T_LNUMBER","0",715],",",["T_WHITESPACE"," ",715],["T_INT_CAST","(int)",715],["T_WHITESPACE"," ",715],["T_VARIABLE","$id_map",715],["T_OBJECT_OPERATOR","->",715],["T_STRING","processedCount",715],"(",")",")",";",["T_WHITESPACE","\n    ",715],["T_VARIABLE","$row_statuses",716],["T_WHITESPACE"," ",716],"=",["T_WHITESPACE"," ",716],"[",["T_WHITESPACE","\n      ",716],["T_STRING","MigrateIdMapInterface",717],["T_DOUBLE_COLON","::",717],["T_STRING","STATUS_IMPORTED",717],",",["T_WHITESPACE","\n      ",717],["T_STRING","MigrateIdMapInterface",718],["T_DOUBLE_COLON","::",718],["T_STRING","STATUS_NEEDS_UPDATE",718],",",["T_WHITESPACE","\n      ",718],["T_STRING","MigrateIdMapInterface",719],["T_DOUBLE_COLON","::",719],["T_STRING","STATUS_IGNORED",719],",",["T_WHITESPACE","\n      ",719],["T_STRING","MigrateIdMapInterface",720],["T_DOUBLE_COLON","::",720],["T_STRING","STATUS_FAILED",720],",",["T_WHITESPACE","\n    ",720],"]",";",["T_WHITESPACE","\n    ",721],["T_COMMENT","\/\/ Create a mapping row for each STATUS constant.\n",722],["T_WHITESPACE","    ",723],["T_FOREACH","foreach",723],["T_WHITESPACE"," ",723],"(",["T_VARIABLE","$row_statuses",723],["T_WHITESPACE"," ",723],["T_AS","as",723],["T_WHITESPACE"," ",723],["T_VARIABLE","$status",723],")",["T_WHITESPACE"," ",723],"{",["T_WHITESPACE","\n      ",723],["T_VARIABLE","$source",724],["T_WHITESPACE"," ",724],"=",["T_WHITESPACE"," ",724],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",724],["T_WHITESPACE"," ",724],["T_DOUBLE_ARROW","=>",724],["T_WHITESPACE"," ",724],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",724],["T_WHITESPACE"," ",724],".",["T_WHITESPACE"," ",724],["T_VARIABLE","$status",724],"]",";",["T_WHITESPACE","\n      ",724],["T_VARIABLE","$row",725],["T_WHITESPACE"," ",725],"=",["T_WHITESPACE"," ",725],["T_NEW","new",725],["T_WHITESPACE"," ",725],["T_STRING","Row",725],"(",["T_VARIABLE","$source",725],",",["T_WHITESPACE"," ",725],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",725],["T_WHITESPACE"," ",725],["T_DOUBLE_ARROW","=>",725],["T_WHITESPACE"," ",725],"[","]","]",")",";",["T_WHITESPACE","\n      ",725],["T_VARIABLE","$destination",726],["T_WHITESPACE"," ",726],"=",["T_WHITESPACE"," ",726],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",726],["T_WHITESPACE"," ",726],["T_DOUBLE_ARROW","=>",726],["T_WHITESPACE"," ",726],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",726],["T_WHITESPACE"," ",726],".",["T_WHITESPACE"," ",726],["T_VARIABLE","$status",726],"]",";",["T_WHITESPACE","\n      ",726],["T_VARIABLE","$id_map",727],["T_OBJECT_OPERATOR","->",727],["T_STRING","saveIdMapping",727],"(",["T_VARIABLE","$row",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$destination",727],",",["T_WHITESPACE"," ",727],["T_VARIABLE","$status",727],")",";",["T_WHITESPACE","\n      ",727],["T_IF","if",728],["T_WHITESPACE"," ",728],"(",["T_VARIABLE","$status",728],["T_WHITESPACE"," ",728],["T_IS_EQUAL","==",728],["T_WHITESPACE"," ",728],["T_STRING","MigrateIdMapInterface",728],["T_DOUBLE_COLON","::",728],["T_STRING","STATUS_IMPORTED",728],")",["T_WHITESPACE"," ",728],"{",["T_WHITESPACE","\n        ",728],["T_COMMENT","\/\/ Assert a single row has been processed.\n",729],["T_WHITESPACE","        ",730],["T_VARIABLE","$this",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","assertSame",730],"(",["T_LNUMBER","1",730],",",["T_WHITESPACE"," ",730],["T_INT_CAST","(int)",730],["T_WHITESPACE"," ",730],["T_VARIABLE","$id_map",730],["T_OBJECT_OPERATOR","->",730],["T_STRING","processedCount",730],"(",")",")",";",["T_WHITESPACE","\n      ",730],"}",["T_WHITESPACE","\n    ",731],"}",["T_WHITESPACE","\n    ",732],["T_COMMENT","\/\/ Assert multiple rows have been processed.\n",733],["T_WHITESPACE","    ",734],["T_VARIABLE","$this",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","assertSame",734],"(",["T_STRING","count",734],"(",["T_VARIABLE","$row_statuses",734],")",",",["T_WHITESPACE"," ",734],["T_INT_CAST","(int)",734],["T_WHITESPACE"," ",734],["T_VARIABLE","$id_map",734],["T_OBJECT_OPERATOR","->",734],["T_STRING","processedCount",734],"(",")",")",";",["T_WHITESPACE","\n  ",734],"}",["T_WHITESPACE","\n\n  ",735],["T_DOC_COMMENT","\/**\n   * Data provider for testUpdateCount().\n   *\n   * Scenarios to test for:\n   * - No updates.\n   * - One update.\n   * - Multiple updates.\n   *\n   * @return array\n   *   An array of data values.\n   *\/",737],["T_WHITESPACE","\n  ",747],["T_PUBLIC","public",748],["T_WHITESPACE"," ",748],["T_FUNCTION","function",748],["T_WHITESPACE"," ",748],["T_STRING","updateCountDataProvider",748],"(",")",["T_WHITESPACE"," ",748],"{",["T_WHITESPACE","\n    ",748],["T_RETURN","return",749],["T_WHITESPACE"," ",749],"[",["T_WHITESPACE","\n      ",749],"[",["T_LNUMBER","0",750],"]",",",["T_WHITESPACE","\n      ",750],"[",["T_LNUMBER","1",751],"]",",",["T_WHITESPACE","\n      ",751],"[",["T_LNUMBER","3",752],"]",",",["T_WHITESPACE","\n    ",752],"]",";",["T_WHITESPACE","\n  ",753],"}",["T_WHITESPACE","\n\n  ",754],["T_DOC_COMMENT","\/**\n   * Performs the update count test with a given number of update rows.\n   *\n   * @param int $num_update_rows\n   *   The number of update rows to test.\n   *\n   * @dataProvider updateCountDataProvider\n   *\/",756],["T_WHITESPACE","\n  ",763],["T_PUBLIC","public",764],["T_WHITESPACE"," ",764],["T_FUNCTION","function",764],["T_WHITESPACE"," ",764],["T_STRING","testUpdateCount",764],"(",["T_VARIABLE","$num_update_rows",764],")",["T_WHITESPACE"," ",764],"{",["T_WHITESPACE","\n    ",764],["T_FOR","for",765],["T_WHITESPACE"," ",765],"(",["T_VARIABLE","$i",765],["T_WHITESPACE"," ",765],"=",["T_WHITESPACE"," ",765],["T_LNUMBER","0",765],";",["T_WHITESPACE"," ",765],["T_VARIABLE","$i",765],["T_WHITESPACE"," ",765],"<",["T_WHITESPACE"," ",765],["T_LNUMBER","5",765],";",["T_WHITESPACE"," ",765],["T_VARIABLE","$i",765],["T_INC","++",765],")",["T_WHITESPACE"," ",765],"{",["T_WHITESPACE","\n      ",765],["T_VARIABLE","$row",766],["T_WHITESPACE"," ",766],"=",["T_WHITESPACE"," ",766],["T_VARIABLE","$this",766],["T_OBJECT_OPERATOR","->",766],["T_STRING","idMapDefaults",766],"(",")",";",["T_WHITESPACE","\n      ",766],["T_VARIABLE","$row",767],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",767],"]",["T_WHITESPACE"," ",767],"=",["T_WHITESPACE"," ",767],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",767],["T_VARIABLE","$i",767],"\"",";",["T_WHITESPACE","\n      ",767],["T_VARIABLE","$row",768],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",768],"]",["T_WHITESPACE"," ",768],"=",["T_WHITESPACE"," ",768],["T_VARIABLE","$this",768],["T_OBJECT_OPERATOR","->",768],["T_STRING","getIdMap",768],"(",")",["T_OBJECT_OPERATOR","->",768],["T_STRING","getSourceIDsHash",768],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",768],["T_WHITESPACE"," ",768],["T_DOUBLE_ARROW","=>",768],["T_WHITESPACE"," ",768],["T_VARIABLE","$row",768],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",768],"]","]",")",";",["T_WHITESPACE","\n      ",768],["T_VARIABLE","$row",769],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",769],"]",["T_WHITESPACE"," ",769],"=",["T_WHITESPACE"," ",769],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",769],["T_VARIABLE","$i",769],"\"",";",["T_WHITESPACE","\n      ",769],["T_VARIABLE","$row",770],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",770],"]",["T_WHITESPACE"," ",770],"=",["T_WHITESPACE"," ",770],["T_STRING","MigrateIdMapInterface",770],["T_DOUBLE_COLON","::",770],["T_STRING","STATUS_IMPORTED",770],";",["T_WHITESPACE","\n      ",770],["T_VARIABLE","$this",771],["T_OBJECT_OPERATOR","->",771],["T_STRING","saveMap",771],"(",["T_VARIABLE","$row",771],")",";",["T_WHITESPACE","\n    ",771],"}",["T_WHITESPACE","\n    ",772],["T_FOR","for",773],["T_WHITESPACE"," ",773],"(",";",["T_WHITESPACE"," ",773],["T_VARIABLE","$i",773],["T_WHITESPACE"," ",773],"<",["T_WHITESPACE"," ",773],["T_LNUMBER","5",773],["T_WHITESPACE"," ",773],"+",["T_WHITESPACE"," ",773],["T_VARIABLE","$num_update_rows",773],";",["T_WHITESPACE"," ",773],["T_VARIABLE","$i",773],["T_INC","++",773],")",["T_WHITESPACE"," ",773],"{",["T_WHITESPACE","\n      ",773],["T_VARIABLE","$row",774],["T_WHITESPACE"," ",774],"=",["T_WHITESPACE"," ",774],["T_VARIABLE","$this",774],["T_OBJECT_OPERATOR","->",774],["T_STRING","idMapDefaults",774],"(",")",";",["T_WHITESPACE","\n      ",774],["T_VARIABLE","$row",775],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",775],"]",["T_WHITESPACE"," ",775],"=",["T_WHITESPACE"," ",775],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",775],["T_VARIABLE","$i",775],"\"",";",["T_WHITESPACE","\n      ",775],["T_VARIABLE","$row",776],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",776],"]",["T_WHITESPACE"," ",776],"=",["T_WHITESPACE"," ",776],["T_VARIABLE","$this",776],["T_OBJECT_OPERATOR","->",776],["T_STRING","getIdMap",776],"(",")",["T_OBJECT_OPERATOR","->",776],["T_STRING","getSourceIDsHash",776],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",776],["T_WHITESPACE"," ",776],["T_DOUBLE_ARROW","=>",776],["T_WHITESPACE"," ",776],["T_VARIABLE","$row",776],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",776],"]","]",")",";",["T_WHITESPACE","\n      ",776],["T_VARIABLE","$row",777],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",777],"]",["T_WHITESPACE"," ",777],"=",["T_WHITESPACE"," ",777],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",777],["T_VARIABLE","$i",777],"\"",";",["T_WHITESPACE","\n      ",777],["T_VARIABLE","$row",778],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",778],"]",["T_WHITESPACE"," ",778],"=",["T_WHITESPACE"," ",778],["T_STRING","MigrateIdMapInterface",778],["T_DOUBLE_COLON","::",778],["T_STRING","STATUS_NEEDS_UPDATE",778],";",["T_WHITESPACE","\n      ",778],["T_VARIABLE","$this",779],["T_OBJECT_OPERATOR","->",779],["T_STRING","saveMap",779],"(",["T_VARIABLE","$row",779],")",";",["T_WHITESPACE","\n    ",779],"}",["T_WHITESPACE","\n    ",780],["T_VARIABLE","$id_map",781],["T_WHITESPACE"," ",781],"=",["T_WHITESPACE"," ",781],["T_VARIABLE","$this",781],["T_OBJECT_OPERATOR","->",781],["T_STRING","getIdMap",781],"(",")",";",["T_WHITESPACE","\n    ",781],["T_VARIABLE","$this",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","assertSame",782],"(",["T_VARIABLE","$num_update_rows",782],",",["T_WHITESPACE"," ",782],["T_INT_CAST","(int)",782],["T_WHITESPACE"," ",782],["T_VARIABLE","$id_map",782],["T_OBJECT_OPERATOR","->",782],["T_STRING","updateCount",782],"(",")",")",";",["T_WHITESPACE","\n  ",782],"}",["T_WHITESPACE","\n\n  ",783],["T_DOC_COMMENT","\/**\n   * Data provider for testErrorCount().\n   *\n   * Scenarios to test for:\n   * - No errors.\n   * - One error.\n   * - Multiple errors.\n   *\n   * @return array\n   *   An array of data values.\n   *\/",785],["T_WHITESPACE","\n  ",795],["T_PUBLIC","public",796],["T_WHITESPACE"," ",796],["T_FUNCTION","function",796],["T_WHITESPACE"," ",796],["T_STRING","errorCountDataProvider",796],"(",")",["T_WHITESPACE"," ",796],"{",["T_WHITESPACE","\n    ",796],["T_RETURN","return",797],["T_WHITESPACE"," ",797],"[",["T_WHITESPACE","\n      ",797],"[",["T_LNUMBER","0",798],"]",",",["T_WHITESPACE","\n      ",798],"[",["T_LNUMBER","1",799],"]",",",["T_WHITESPACE","\n      ",799],"[",["T_LNUMBER","3",800],"]",",",["T_WHITESPACE","\n    ",800],"]",";",["T_WHITESPACE","\n  ",801],"}",["T_WHITESPACE","\n\n  ",802],["T_DOC_COMMENT","\/**\n   * Performs error count test with a given number of error rows.\n   *\n   * @param int $num_error_rows\n   *   Number of error rows to test.\n   *\n   * @dataProvider errorCountDataProvider\n   *\/",804],["T_WHITESPACE","\n  ",811],["T_PUBLIC","public",812],["T_WHITESPACE"," ",812],["T_FUNCTION","function",812],["T_WHITESPACE"," ",812],["T_STRING","testErrorCount",812],"(",["T_VARIABLE","$num_error_rows",812],")",["T_WHITESPACE"," ",812],"{",["T_WHITESPACE","\n    ",812],["T_FOR","for",813],["T_WHITESPACE"," ",813],"(",["T_VARIABLE","$i",813],["T_WHITESPACE"," ",813],"=",["T_WHITESPACE"," ",813],["T_LNUMBER","0",813],";",["T_WHITESPACE"," ",813],["T_VARIABLE","$i",813],["T_WHITESPACE"," ",813],"<",["T_WHITESPACE"," ",813],["T_LNUMBER","5",813],";",["T_WHITESPACE"," ",813],["T_VARIABLE","$i",813],["T_INC","++",813],")",["T_WHITESPACE"," ",813],"{",["T_WHITESPACE","\n      ",813],["T_VARIABLE","$row",814],["T_WHITESPACE"," ",814],"=",["T_WHITESPACE"," ",814],["T_VARIABLE","$this",814],["T_OBJECT_OPERATOR","->",814],["T_STRING","idMapDefaults",814],"(",")",";",["T_WHITESPACE","\n      ",814],["T_VARIABLE","$row",815],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",815],"]",["T_WHITESPACE"," ",815],"=",["T_WHITESPACE"," ",815],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",815],["T_VARIABLE","$i",815],"\"",";",["T_WHITESPACE","\n      ",815],["T_VARIABLE","$row",816],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",816],"]",["T_WHITESPACE"," ",816],"=",["T_WHITESPACE"," ",816],["T_VARIABLE","$this",816],["T_OBJECT_OPERATOR","->",816],["T_STRING","getIdMap",816],"(",")",["T_OBJECT_OPERATOR","->",816],["T_STRING","getSourceIDsHash",816],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",816],["T_WHITESPACE"," ",816],["T_DOUBLE_ARROW","=>",816],["T_WHITESPACE"," ",816],["T_VARIABLE","$row",816],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",816],"]","]",")",";",["T_WHITESPACE","\n      ",816],["T_VARIABLE","$row",817],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",817],"]",["T_WHITESPACE"," ",817],"=",["T_WHITESPACE"," ",817],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",817],["T_VARIABLE","$i",817],"\"",";",["T_WHITESPACE","\n      ",817],["T_VARIABLE","$row",818],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",818],"]",["T_WHITESPACE"," ",818],"=",["T_WHITESPACE"," ",818],["T_STRING","MigrateIdMapInterface",818],["T_DOUBLE_COLON","::",818],["T_STRING","STATUS_IMPORTED",818],";",["T_WHITESPACE","\n      ",818],["T_VARIABLE","$this",819],["T_OBJECT_OPERATOR","->",819],["T_STRING","saveMap",819],"(",["T_VARIABLE","$row",819],")",";",["T_WHITESPACE","\n    ",819],"}",["T_WHITESPACE","\n    ",820],["T_FOR","for",821],["T_WHITESPACE"," ",821],"(",";",["T_WHITESPACE"," ",821],["T_VARIABLE","$i",821],["T_WHITESPACE"," ",821],"<",["T_WHITESPACE"," ",821],["T_LNUMBER","5",821],["T_WHITESPACE"," ",821],"+",["T_WHITESPACE"," ",821],["T_VARIABLE","$num_error_rows",821],";",["T_WHITESPACE"," ",821],["T_VARIABLE","$i",821],["T_INC","++",821],")",["T_WHITESPACE"," ",821],"{",["T_WHITESPACE","\n      ",821],["T_VARIABLE","$row",822],["T_WHITESPACE"," ",822],"=",["T_WHITESPACE"," ",822],["T_VARIABLE","$this",822],["T_OBJECT_OPERATOR","->",822],["T_STRING","idMapDefaults",822],"(",")",";",["T_WHITESPACE","\n      ",822],["T_VARIABLE","$row",823],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",823],"]",["T_WHITESPACE"," ",823],"=",["T_WHITESPACE"," ",823],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",823],["T_VARIABLE","$i",823],"\"",";",["T_WHITESPACE","\n      ",823],["T_VARIABLE","$row",824],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",824],"]",["T_WHITESPACE"," ",824],"=",["T_WHITESPACE"," ",824],["T_VARIABLE","$this",824],["T_OBJECT_OPERATOR","->",824],["T_STRING","getIdMap",824],"(",")",["T_OBJECT_OPERATOR","->",824],["T_STRING","getSourceIDsHash",824],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",824],["T_WHITESPACE"," ",824],["T_DOUBLE_ARROW","=>",824],["T_WHITESPACE"," ",824],["T_VARIABLE","$row",824],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",824],"]","]",")",";",["T_WHITESPACE","\n      ",824],["T_VARIABLE","$row",825],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",825],"]",["T_WHITESPACE"," ",825],"=",["T_WHITESPACE"," ",825],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",825],["T_VARIABLE","$i",825],"\"",";",["T_WHITESPACE","\n      ",825],["T_VARIABLE","$row",826],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",826],"]",["T_WHITESPACE"," ",826],"=",["T_WHITESPACE"," ",826],["T_STRING","MigrateIdMapInterface",826],["T_DOUBLE_COLON","::",826],["T_STRING","STATUS_FAILED",826],";",["T_WHITESPACE","\n      ",826],["T_VARIABLE","$this",827],["T_OBJECT_OPERATOR","->",827],["T_STRING","saveMap",827],"(",["T_VARIABLE","$row",827],")",";",["T_WHITESPACE","\n    ",827],"}",["T_WHITESPACE","\n\n    ",828],["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","assertSame",830],"(",["T_VARIABLE","$num_error_rows",830],",",["T_WHITESPACE"," ",830],["T_INT_CAST","(int)",830],["T_WHITESPACE"," ",830],["T_VARIABLE","$this",830],["T_OBJECT_OPERATOR","->",830],["T_STRING","getIdMap",830],"(",")",["T_OBJECT_OPERATOR","->",830],["T_STRING","errorCount",830],"(",")",")",";",["T_WHITESPACE","\n  ",830],"}",["T_WHITESPACE","\n\n  ",831],["T_DOC_COMMENT","\/**\n   * Tests setting a row source_row_status to STATUS_NEEDS_UPDATE.\n   *\/",833],["T_WHITESPACE","\n  ",835],["T_PUBLIC","public",836],["T_WHITESPACE"," ",836],["T_FUNCTION","function",836],["T_WHITESPACE"," ",836],["T_STRING","testSetUpdate",836],"(",")",["T_WHITESPACE"," ",836],"{",["T_WHITESPACE","\n    ",836],["T_VARIABLE","$id_map",837],["T_WHITESPACE"," ",837],"=",["T_WHITESPACE"," ",837],["T_VARIABLE","$this",837],["T_OBJECT_OPERATOR","->",837],["T_STRING","getIdMap",837],"(",")",";",["T_WHITESPACE","\n    ",837],["T_VARIABLE","$row_statuses",838],["T_WHITESPACE"," ",838],"=",["T_WHITESPACE"," ",838],"[",["T_WHITESPACE","\n      ",838],["T_STRING","MigrateIdMapInterface",839],["T_DOUBLE_COLON","::",839],["T_STRING","STATUS_IMPORTED",839],",",["T_WHITESPACE","\n      ",839],["T_STRING","MigrateIdMapInterface",840],["T_DOUBLE_COLON","::",840],["T_STRING","STATUS_NEEDS_UPDATE",840],",",["T_WHITESPACE","\n      ",840],["T_STRING","MigrateIdMapInterface",841],["T_DOUBLE_COLON","::",841],["T_STRING","STATUS_IGNORED",841],",",["T_WHITESPACE","\n      ",841],["T_STRING","MigrateIdMapInterface",842],["T_DOUBLE_COLON","::",842],["T_STRING","STATUS_FAILED",842],",",["T_WHITESPACE","\n    ",842],"]",";",["T_WHITESPACE","\n    ",843],["T_COMMENT","\/\/ Create a mapping row for each STATUS constant.\n",844],["T_WHITESPACE","    ",845],["T_FOREACH","foreach",845],["T_WHITESPACE"," ",845],"(",["T_VARIABLE","$row_statuses",845],["T_WHITESPACE"," ",845],["T_AS","as",845],["T_WHITESPACE"," ",845],["T_VARIABLE","$status",845],")",["T_WHITESPACE"," ",845],"{",["T_WHITESPACE","\n      ",845],["T_VARIABLE","$source",846],["T_WHITESPACE"," ",846],"=",["T_WHITESPACE"," ",846],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",846],["T_WHITESPACE"," ",846],["T_DOUBLE_ARROW","=>",846],["T_WHITESPACE"," ",846],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",846],["T_WHITESPACE"," ",846],".",["T_WHITESPACE"," ",846],["T_VARIABLE","$status",846],"]",";",["T_WHITESPACE","\n      ",846],["T_VARIABLE","$row",847],["T_WHITESPACE"," ",847],"=",["T_WHITESPACE"," ",847],["T_NEW","new",847],["T_WHITESPACE"," ",847],["T_STRING","Row",847],"(",["T_VARIABLE","$source",847],",",["T_WHITESPACE"," ",847],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",847],["T_WHITESPACE"," ",847],["T_DOUBLE_ARROW","=>",847],["T_WHITESPACE"," ",847],"[","]","]",")",";",["T_WHITESPACE","\n      ",847],["T_VARIABLE","$destination",848],["T_WHITESPACE"," ",848],"=",["T_WHITESPACE"," ",848],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",848],["T_WHITESPACE"," ",848],["T_DOUBLE_ARROW","=>",848],["T_WHITESPACE"," ",848],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",848],["T_WHITESPACE"," ",848],".",["T_WHITESPACE"," ",848],["T_VARIABLE","$status",848],"]",";",["T_WHITESPACE","\n      ",848],["T_VARIABLE","$id_map",849],["T_OBJECT_OPERATOR","->",849],["T_STRING","saveIdMapping",849],"(",["T_VARIABLE","$row",849],",",["T_WHITESPACE"," ",849],["T_VARIABLE","$destination",849],",",["T_WHITESPACE"," ",849],["T_VARIABLE","$status",849],")",";",["T_WHITESPACE","\n      ",849],["T_VARIABLE","$expected_results",850],"[","]",["T_WHITESPACE"," ",850],"=",["T_WHITESPACE"," ",850],"[",["T_WHITESPACE","\n        ",850],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",851],["T_WHITESPACE"," ",851],["T_DOUBLE_ARROW","=>",851],["T_WHITESPACE"," ",851],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",851],["T_WHITESPACE"," ",851],".",["T_WHITESPACE"," ",851],["T_VARIABLE","$status",851],",",["T_WHITESPACE","\n        ",851],["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",852],["T_WHITESPACE"," ",852],["T_DOUBLE_ARROW","=>",852],["T_WHITESPACE"," ",852],["T_VARIABLE","$this",852],["T_OBJECT_OPERATOR","->",852],["T_STRING","getIdMap",852],"(",")",["T_OBJECT_OPERATOR","->",852],["T_STRING","getSourceIDsHash",852],"(",["T_VARIABLE","$source",852],")",",",["T_WHITESPACE","\n        ",852],["T_CONSTANT_ENCAPSED_STRING","'destid1'",853],["T_WHITESPACE"," ",853],["T_DOUBLE_ARROW","=>",853],["T_WHITESPACE"," ",853],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",853],["T_WHITESPACE"," ",853],".",["T_WHITESPACE"," ",853],["T_VARIABLE","$status",853],",",["T_WHITESPACE","\n        ",853],["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",854],["T_WHITESPACE"," ",854],["T_DOUBLE_ARROW","=>",854],["T_WHITESPACE"," ",854],["T_VARIABLE","$status",854],",",["T_WHITESPACE","\n        ",854],["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",855],["T_WHITESPACE"," ",855],["T_DOUBLE_ARROW","=>",855],["T_WHITESPACE"," ",855],["T_STRING","MigrateIdMapInterface",855],["T_DOUBLE_COLON","::",855],["T_STRING","ROLLBACK_DELETE",855],",",["T_WHITESPACE","\n        ",855],["T_CONSTANT_ENCAPSED_STRING","'hash'",856],["T_WHITESPACE"," ",856],["T_DOUBLE_ARROW","=>",856],["T_WHITESPACE"," ",856],["T_CONSTANT_ENCAPSED_STRING","''",856],",",["T_WHITESPACE","\n      ",856],"]",";",["T_WHITESPACE","\n    ",857],"}",["T_WHITESPACE","\n    ",858],["T_COMMENT","\/\/ Assert that test values exist.\n",859],["T_WHITESPACE","    ",860],["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","queryResultTest",860],"(",["T_VARIABLE","$this",860],["T_OBJECT_OPERATOR","->",860],["T_STRING","getIdMapContents",860],"(",")",",",["T_WHITESPACE"," ",860],["T_VARIABLE","$expected_results",860],")",";",["T_WHITESPACE","\n    ",860],["T_COMMENT","\/\/ Mark each row as STATUS_NEEDS_UPDATE.\n",861],["T_WHITESPACE","    ",862],["T_FOREACH","foreach",862],["T_WHITESPACE"," ",862],"(",["T_VARIABLE","$row_statuses",862],["T_WHITESPACE"," ",862],["T_AS","as",862],["T_WHITESPACE"," ",862],["T_VARIABLE","$status",862],")",["T_WHITESPACE"," ",862],"{",["T_WHITESPACE","\n      ",862],["T_VARIABLE","$id_map",863],["T_OBJECT_OPERATOR","->",863],["T_STRING","setUpdate",863],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",863],["T_WHITESPACE"," ",863],["T_DOUBLE_ARROW","=>",863],["T_WHITESPACE"," ",863],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",863],["T_WHITESPACE"," ",863],".",["T_WHITESPACE"," ",863],["T_VARIABLE","$status",863],"]",")",";",["T_WHITESPACE","\n    ",863],"}",["T_WHITESPACE","\n    ",864],["T_COMMENT","\/\/ Update expected results.\n",865],["T_WHITESPACE","    ",866],["T_FOREACH","foreach",866],["T_WHITESPACE"," ",866],"(",["T_VARIABLE","$expected_results",866],["T_WHITESPACE"," ",866],["T_AS","as",866],["T_WHITESPACE"," ",866],["T_VARIABLE","$key",866],["T_WHITESPACE"," ",866],["T_DOUBLE_ARROW","=>",866],["T_WHITESPACE"," ",866],["T_VARIABLE","$value",866],")",["T_WHITESPACE"," ",866],"{",["T_WHITESPACE","\n      ",866],["T_VARIABLE","$expected_results",867],"[",["T_VARIABLE","$key",867],"]","[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",867],"]",["T_WHITESPACE"," ",867],"=",["T_WHITESPACE"," ",867],["T_STRING","MigrateIdMapInterface",867],["T_DOUBLE_COLON","::",867],["T_STRING","STATUS_NEEDS_UPDATE",867],";",["T_WHITESPACE","\n    ",867],"}",["T_WHITESPACE","\n    ",868],["T_COMMENT","\/\/ Assert that updated expected values match.\n",869],["T_WHITESPACE","    ",870],["T_VARIABLE","$this",870],["T_OBJECT_OPERATOR","->",870],["T_STRING","queryResultTest",870],"(",["T_VARIABLE","$this",870],["T_OBJECT_OPERATOR","->",870],["T_STRING","getIdMapContents",870],"(",")",",",["T_WHITESPACE"," ",870],["T_VARIABLE","$expected_results",870],")",";",["T_WHITESPACE","\n    ",870],["T_COMMENT","\/\/ Assert an exception is thrown when source identifiers are not provided.\n",871],["T_WHITESPACE","    ",872],["T_TRY","try",872],["T_WHITESPACE"," ",872],"{",["T_WHITESPACE","\n      ",872],["T_VARIABLE","$id_map",873],["T_OBJECT_OPERATOR","->",873],["T_STRING","setUpdate",873],"(","[","]",")",";",["T_WHITESPACE","\n      ",873],["T_VARIABLE","$this",874],["T_OBJECT_OPERATOR","->",874],["T_STRING","assertFalse",874],"(",["T_STRING","FALSE",874],",",["T_WHITESPACE"," ",874],["T_CONSTANT_ENCAPSED_STRING","'MigrateException not thrown, when source identifiers were provided to update.'",874],")",";",["T_WHITESPACE","\n    ",874],"}",["T_WHITESPACE","\n    ",875],["T_CATCH","catch",876],["T_WHITESPACE"," ",876],"(",["T_STRING","MigrateException",876],["T_WHITESPACE"," ",876],["T_VARIABLE","$e",876],")",["T_WHITESPACE"," ",876],"{",["T_WHITESPACE","\n      ",876],["T_VARIABLE","$this",877],["T_OBJECT_OPERATOR","->",877],["T_STRING","assertTrue",877],"(",["T_STRING","TRUE",877],",",["T_WHITESPACE"," ",877],["T_CONSTANT_ENCAPSED_STRING","\"MigrateException thrown, when source identifiers were not provided to update.\"",877],")",";",["T_WHITESPACE","\n    ",877],"}",["T_WHITESPACE","\n  ",878],"}",["T_WHITESPACE","\n\n  ",879],["T_DOC_COMMENT","\/**\n   * Tests prepareUpdate().\n   *\/",881],["T_WHITESPACE","\n  ",883],["T_PUBLIC","public",884],["T_WHITESPACE"," ",884],["T_FUNCTION","function",884],["T_WHITESPACE"," ",884],["T_STRING","testPrepareUpdate",884],"(",")",["T_WHITESPACE"," ",884],"{",["T_WHITESPACE","\n    ",884],["T_VARIABLE","$id_map",885],["T_WHITESPACE"," ",885],"=",["T_WHITESPACE"," ",885],["T_VARIABLE","$this",885],["T_OBJECT_OPERATOR","->",885],["T_STRING","getIdMap",885],"(",")",";",["T_WHITESPACE","\n    ",885],["T_VARIABLE","$row_statuses",886],["T_WHITESPACE"," ",886],"=",["T_WHITESPACE"," ",886],"[",["T_WHITESPACE","\n      ",886],["T_STRING","MigrateIdMapInterface",887],["T_DOUBLE_COLON","::",887],["T_STRING","STATUS_IMPORTED",887],",",["T_WHITESPACE","\n      ",887],["T_STRING","MigrateIdMapInterface",888],["T_DOUBLE_COLON","::",888],["T_STRING","STATUS_NEEDS_UPDATE",888],",",["T_WHITESPACE","\n      ",888],["T_STRING","MigrateIdMapInterface",889],["T_DOUBLE_COLON","::",889],["T_STRING","STATUS_IGNORED",889],",",["T_WHITESPACE","\n      ",889],["T_STRING","MigrateIdMapInterface",890],["T_DOUBLE_COLON","::",890],["T_STRING","STATUS_FAILED",890],",",["T_WHITESPACE","\n    ",890],"]",";",["T_WHITESPACE","\n\n    ",891],["T_COMMENT","\/\/ Create a mapping row for each STATUS constant.\n",893],["T_WHITESPACE","    ",894],["T_FOREACH","foreach",894],["T_WHITESPACE"," ",894],"(",["T_VARIABLE","$row_statuses",894],["T_WHITESPACE"," ",894],["T_AS","as",894],["T_WHITESPACE"," ",894],["T_VARIABLE","$status",894],")",["T_WHITESPACE"," ",894],"{",["T_WHITESPACE","\n      ",894],["T_VARIABLE","$source",895],["T_WHITESPACE"," ",895],"=",["T_WHITESPACE"," ",895],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",895],["T_WHITESPACE"," ",895],["T_DOUBLE_ARROW","=>",895],["T_WHITESPACE"," ",895],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",895],["T_WHITESPACE"," ",895],".",["T_WHITESPACE"," ",895],["T_VARIABLE","$status",895],"]",";",["T_WHITESPACE","\n      ",895],["T_VARIABLE","$row",896],["T_WHITESPACE"," ",896],"=",["T_WHITESPACE"," ",896],["T_NEW","new",896],["T_WHITESPACE"," ",896],["T_STRING","Row",896],"(",["T_VARIABLE","$source",896],",",["T_WHITESPACE"," ",896],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",896],["T_WHITESPACE"," ",896],["T_DOUBLE_ARROW","=>",896],["T_WHITESPACE"," ",896],"[","]","]",")",";",["T_WHITESPACE","\n      ",896],["T_VARIABLE","$destination",897],["T_WHITESPACE"," ",897],"=",["T_WHITESPACE"," ",897],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",897],["T_WHITESPACE"," ",897],["T_DOUBLE_ARROW","=>",897],["T_WHITESPACE"," ",897],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",897],["T_WHITESPACE"," ",897],".",["T_WHITESPACE"," ",897],["T_VARIABLE","$status",897],"]",";",["T_WHITESPACE","\n      ",897],["T_VARIABLE","$id_map",898],["T_OBJECT_OPERATOR","->",898],["T_STRING","saveIdMapping",898],"(",["T_VARIABLE","$row",898],",",["T_WHITESPACE"," ",898],["T_VARIABLE","$destination",898],",",["T_WHITESPACE"," ",898],["T_VARIABLE","$status",898],")",";",["T_WHITESPACE","\n      ",898],["T_VARIABLE","$expected_results",899],"[","]",["T_WHITESPACE"," ",899],"=",["T_WHITESPACE"," ",899],"[",["T_WHITESPACE","\n        ",899],["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",900],["T_WHITESPACE"," ",900],["T_DOUBLE_ARROW","=>",900],["T_WHITESPACE"," ",900],["T_CONSTANT_ENCAPSED_STRING","'source_value_'",900],["T_WHITESPACE"," ",900],".",["T_WHITESPACE"," ",900],["T_VARIABLE","$status",900],",",["T_WHITESPACE","\n        ",900],["T_CONSTANT_ENCAPSED_STRING","'destid1'",901],["T_WHITESPACE"," ",901],["T_DOUBLE_ARROW","=>",901],["T_WHITESPACE"," ",901],["T_CONSTANT_ENCAPSED_STRING","'destination_value_'",901],["T_WHITESPACE"," ",901],".",["T_WHITESPACE"," ",901],["T_VARIABLE","$status",901],",",["T_WHITESPACE","\n        ",901],["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",902],["T_WHITESPACE"," ",902],["T_DOUBLE_ARROW","=>",902],["T_WHITESPACE"," ",902],["T_VARIABLE","$status",902],",",["T_WHITESPACE","\n        ",902],["T_CONSTANT_ENCAPSED_STRING","'rollback_action'",903],["T_WHITESPACE"," ",903],["T_DOUBLE_ARROW","=>",903],["T_WHITESPACE"," ",903],["T_STRING","MigrateIdMapInterface",903],["T_DOUBLE_COLON","::",903],["T_STRING","ROLLBACK_DELETE",903],",",["T_WHITESPACE","\n        ",903],["T_CONSTANT_ENCAPSED_STRING","'hash'",904],["T_WHITESPACE"," ",904],["T_DOUBLE_ARROW","=>",904],["T_WHITESPACE"," ",904],["T_CONSTANT_ENCAPSED_STRING","''",904],",",["T_WHITESPACE","\n      ",904],"]",";",["T_WHITESPACE","\n    ",905],"}",["T_WHITESPACE","\n\n    ",906],["T_COMMENT","\/\/ Assert that test values exist.\n",908],["T_WHITESPACE","    ",909],["T_VARIABLE","$this",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","queryResultTest",909],"(",["T_VARIABLE","$this",909],["T_OBJECT_OPERATOR","->",909],["T_STRING","getIdMapContents",909],"(",")",",",["T_WHITESPACE"," ",909],["T_VARIABLE","$expected_results",909],")",";",["T_WHITESPACE","\n\n    ",909],["T_COMMENT","\/\/ Mark all rows as STATUS_NEEDS_UPDATE.\n",911],["T_WHITESPACE","    ",912],["T_VARIABLE","$id_map",912],["T_OBJECT_OPERATOR","->",912],["T_STRING","prepareUpdate",912],"(",")",";",["T_WHITESPACE","\n\n    ",912],["T_COMMENT","\/\/ Update expected results.\n",914],["T_WHITESPACE","    ",915],["T_FOREACH","foreach",915],["T_WHITESPACE"," ",915],"(",["T_VARIABLE","$expected_results",915],["T_WHITESPACE"," ",915],["T_AS","as",915],["T_WHITESPACE"," ",915],["T_VARIABLE","$key",915],["T_WHITESPACE"," ",915],["T_DOUBLE_ARROW","=>",915],["T_WHITESPACE"," ",915],["T_VARIABLE","$value",915],")",["T_WHITESPACE"," ",915],"{",["T_WHITESPACE","\n      ",915],["T_VARIABLE","$expected_results",916],"[",["T_VARIABLE","$key",916],"]","[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",916],"]",["T_WHITESPACE"," ",916],"=",["T_WHITESPACE"," ",916],["T_STRING","MigrateIdMapInterface",916],["T_DOUBLE_COLON","::",916],["T_STRING","STATUS_NEEDS_UPDATE",916],";",["T_WHITESPACE","\n    ",916],"}",["T_WHITESPACE","\n    ",917],["T_COMMENT","\/\/ Assert that updated expected values match.\n",918],["T_WHITESPACE","    ",919],["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","queryResultTest",919],"(",["T_VARIABLE","$this",919],["T_OBJECT_OPERATOR","->",919],["T_STRING","getIdMapContents",919],"(",")",",",["T_WHITESPACE"," ",919],["T_VARIABLE","$expected_results",919],")",";",["T_WHITESPACE","\n  ",919],"}",["T_WHITESPACE","\n\n  ",920],["T_DOC_COMMENT","\/**\n   * Tests the destroy method.\n   *\n   * Scenarios to test for:\n   * - No errors.\n   * - One error.\n   * - Multiple errors.\n   *\/",922],["T_WHITESPACE","\n  ",929],["T_PUBLIC","public",930],["T_WHITESPACE"," ",930],["T_FUNCTION","function",930],["T_WHITESPACE"," ",930],["T_STRING","testDestroy",930],"(",")",["T_WHITESPACE"," ",930],"{",["T_WHITESPACE","\n    ",930],["T_VARIABLE","$id_map",931],["T_WHITESPACE"," ",931],"=",["T_WHITESPACE"," ",931],["T_VARIABLE","$this",931],["T_OBJECT_OPERATOR","->",931],["T_STRING","getIdMap",931],"(",")",";",["T_WHITESPACE","\n    ",931],["T_COMMENT","\/\/ Initialize the ID map.\n",932],["T_WHITESPACE","    ",933],["T_VARIABLE","$id_map",933],["T_OBJECT_OPERATOR","->",933],["T_STRING","getDatabase",933],"(",")",";",["T_WHITESPACE","\n    ",933],["T_VARIABLE","$map_table_name",934],["T_WHITESPACE"," ",934],"=",["T_WHITESPACE"," ",934],["T_VARIABLE","$id_map",934],["T_OBJECT_OPERATOR","->",934],["T_STRING","mapTableName",934],"(",")",";",["T_WHITESPACE","\n    ",934],["T_VARIABLE","$message_table_name",935],["T_WHITESPACE"," ",935],"=",["T_WHITESPACE"," ",935],["T_VARIABLE","$id_map",935],["T_OBJECT_OPERATOR","->",935],["T_STRING","messageTableName",935],"(",")",";",["T_WHITESPACE","\n    ",935],["T_VARIABLE","$row",936],["T_WHITESPACE"," ",936],"=",["T_WHITESPACE"," ",936],["T_NEW","new",936],["T_WHITESPACE"," ",936],["T_STRING","Row",936],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",936],["T_WHITESPACE"," ",936],["T_DOUBLE_ARROW","=>",936],["T_WHITESPACE"," ",936],["T_CONSTANT_ENCAPSED_STRING","'source_value'",936],"]",",",["T_WHITESPACE"," ",936],"[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",936],["T_WHITESPACE"," ",936],["T_DOUBLE_ARROW","=>",936],["T_WHITESPACE"," ",936],"[","]","]",")",";",["T_WHITESPACE","\n    ",936],["T_VARIABLE","$id_map",937],["T_OBJECT_OPERATOR","->",937],["T_STRING","saveIdMapping",937],"(",["T_VARIABLE","$row",937],",",["T_WHITESPACE"," ",937],"[",["T_CONSTANT_ENCAPSED_STRING","'destination_id_property'",937],["T_WHITESPACE"," ",937],["T_DOUBLE_ARROW","=>",937],["T_WHITESPACE"," ",937],["T_LNUMBER","2",937],"]",")",";",["T_WHITESPACE","\n    ",937],["T_VARIABLE","$id_map",938],["T_OBJECT_OPERATOR","->",938],["T_STRING","saveMessage",938],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",938],["T_WHITESPACE"," ",938],["T_DOUBLE_ARROW","=>",938],["T_WHITESPACE"," ",938],["T_CONSTANT_ENCAPSED_STRING","'source_value'",938],"]",",",["T_WHITESPACE"," ",938],["T_CONSTANT_ENCAPSED_STRING","'A message'",938],")",";",["T_WHITESPACE","\n    ",938],["T_VARIABLE","$this",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","assertTrue",939],"(",["T_VARIABLE","$this",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","database",939],["T_OBJECT_OPERATOR","->",939],["T_STRING","schema",939],"(",")",["T_OBJECT_OPERATOR","->",939],["T_STRING","tableExists",939],"(",["T_VARIABLE","$map_table_name",939],")",",",["T_WHITESPACE","\n                      ",939],"\"",["T_VARIABLE","$map_table_name",940],["T_ENCAPSED_AND_WHITESPACE"," exists",940],"\"",")",";",["T_WHITESPACE","\n    ",940],["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","assertTrue",941],"(",["T_VARIABLE","$this",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","database",941],["T_OBJECT_OPERATOR","->",941],["T_STRING","schema",941],"(",")",["T_OBJECT_OPERATOR","->",941],["T_STRING","tableExists",941],"(",["T_VARIABLE","$message_table_name",941],")",",",["T_WHITESPACE","\n                      ",941],"\"",["T_VARIABLE","$message_table_name",942],["T_ENCAPSED_AND_WHITESPACE"," exists",942],"\"",")",";",["T_WHITESPACE","\n    ",942],["T_VARIABLE","$id_map",943],["T_OBJECT_OPERATOR","->",943],["T_STRING","destroy",943],"(",")",";",["T_WHITESPACE","\n    ",943],["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","assertFalse",944],"(",["T_VARIABLE","$this",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","database",944],["T_OBJECT_OPERATOR","->",944],["T_STRING","schema",944],"(",")",["T_OBJECT_OPERATOR","->",944],["T_STRING","tableExists",944],"(",["T_VARIABLE","$map_table_name",944],")",",",["T_WHITESPACE","\n                       ",944],"\"",["T_VARIABLE","$map_table_name",945],["T_ENCAPSED_AND_WHITESPACE"," does not exist",945],"\"",")",";",["T_WHITESPACE","\n    ",945],["T_VARIABLE","$this",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","assertFalse",946],"(",["T_VARIABLE","$this",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","database",946],["T_OBJECT_OPERATOR","->",946],["T_STRING","schema",946],"(",")",["T_OBJECT_OPERATOR","->",946],["T_STRING","tableExists",946],"(",["T_VARIABLE","$message_table_name",946],")",",",["T_WHITESPACE","\n                       ",946],"\"",["T_VARIABLE","$message_table_name",947],["T_ENCAPSED_AND_WHITESPACE"," does not exist",947],"\"",")",";",["T_WHITESPACE","\n  ",947],"}",["T_WHITESPACE","\n\n  ",948],["T_DOC_COMMENT","\/**\n   * Tests the getQualifiedMapTable method with a prefixed database.\n   *\/",950],["T_WHITESPACE","\n  ",952],["T_PUBLIC","public",953],["T_WHITESPACE"," ",953],["T_FUNCTION","function",953],["T_WHITESPACE"," ",953],["T_STRING","testGetQualifiedMapTablePrefix",953],"(",")",["T_WHITESPACE"," ",953],"{",["T_WHITESPACE","\n    ",953],["T_VARIABLE","$connection_options",954],["T_WHITESPACE"," ",954],"=",["T_WHITESPACE"," ",954],"[",["T_WHITESPACE","\n      ",954],["T_CONSTANT_ENCAPSED_STRING","'database'",955],["T_WHITESPACE"," ",955],["T_DOUBLE_ARROW","=>",955],["T_WHITESPACE"," ",955],["T_CONSTANT_ENCAPSED_STRING","':memory:'",955],",",["T_WHITESPACE","\n      ",955],["T_CONSTANT_ENCAPSED_STRING","'prefix'",956],["T_WHITESPACE"," ",956],["T_DOUBLE_ARROW","=>",956],["T_WHITESPACE"," ",956],["T_CONSTANT_ENCAPSED_STRING","'prefix'",956],",",["T_WHITESPACE","\n    ",956],"]",";",["T_WHITESPACE","\n    ",957],["T_VARIABLE","$pdo",958],["T_WHITESPACE"," ",958],"=",["T_WHITESPACE"," ",958],["T_STRING","Connection",958],["T_DOUBLE_COLON","::",958],["T_STRING","open",958],"(",["T_VARIABLE","$connection_options",958],")",";",["T_WHITESPACE","\n    ",958],["T_VARIABLE","$this",959],["T_OBJECT_OPERATOR","->",959],["T_STRING","database",959],["T_WHITESPACE"," ",959],"=",["T_WHITESPACE"," ",959],["T_NEW","new",959],["T_WHITESPACE"," ",959],["T_STRING","Connection",959],"(",["T_VARIABLE","$pdo",959],",",["T_WHITESPACE"," ",959],["T_VARIABLE","$connection_options",959],")",";",["T_WHITESPACE","\n    ",959],["T_VARIABLE","$qualified_map_table",960],["T_WHITESPACE"," ",960],"=",["T_WHITESPACE"," ",960],["T_VARIABLE","$this",960],["T_OBJECT_OPERATOR","->",960],["T_STRING","getIdMap",960],"(",")",["T_OBJECT_OPERATOR","->",960],["T_STRING","getQualifiedMapTableName",960],"(",")",";",["T_WHITESPACE","\n    ",960],["T_COMMENT","\/\/ The SQLite driver is a special flower. It will prefix tables with\n",961],["T_WHITESPACE","    ",962],["T_COMMENT","\/\/ PREFIX.TABLE, instead of the standard PREFIXTABLE.\n",962],["T_WHITESPACE","    ",963],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Database\\Driver\\sqlite\\Connection::__construct()\n",963],["T_WHITESPACE","    ",964],["T_VARIABLE","$this",964],["T_OBJECT_OPERATOR","->",964],["T_STRING","assertEquals",964],"(",["T_CONSTANT_ENCAPSED_STRING","'prefix.migrate_map_sql_idmap_test'",964],",",["T_WHITESPACE"," ",964],["T_VARIABLE","$qualified_map_table",964],")",";",["T_WHITESPACE","\n  ",964],"}",["T_WHITESPACE","\n\n  ",965],["T_DOC_COMMENT","\/**\n   * Tests all the iterator methods in one swing.\n   *\n   * The iterator methods are:\n   * - Sql::rewind()\n   * - Sql::next()\n   * - Sql::valid()\n   * - Sql::key()\n   * - Sql::current()\n   *\/",967],["T_WHITESPACE","\n  ",976],["T_PUBLIC","public",977],["T_WHITESPACE"," ",977],["T_FUNCTION","function",977],["T_WHITESPACE"," ",977],["T_STRING","testIterators",977],"(",")",["T_WHITESPACE"," ",977],"{",["T_WHITESPACE","\n    ",977],["T_FOR","for",978],["T_WHITESPACE"," ",978],"(",["T_VARIABLE","$i",978],["T_WHITESPACE"," ",978],"=",["T_WHITESPACE"," ",978],["T_LNUMBER","0",978],";",["T_WHITESPACE"," ",978],["T_VARIABLE","$i",978],["T_WHITESPACE"," ",978],"<",["T_WHITESPACE"," ",978],["T_LNUMBER","3",978],";",["T_WHITESPACE"," ",978],["T_VARIABLE","$i",978],["T_INC","++",978],")",["T_WHITESPACE"," ",978],"{",["T_WHITESPACE","\n      ",978],["T_VARIABLE","$row",979],["T_WHITESPACE"," ",979],"=",["T_WHITESPACE"," ",979],["T_VARIABLE","$this",979],["T_OBJECT_OPERATOR","->",979],["T_STRING","idMapDefaults",979],"(",")",";",["T_WHITESPACE","\n      ",979],["T_VARIABLE","$row",980],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",980],"]",["T_WHITESPACE"," ",980],"=",["T_WHITESPACE"," ",980],"\"",["T_ENCAPSED_AND_WHITESPACE","source_id_value_",980],["T_VARIABLE","$i",980],"\"",";",["T_WHITESPACE","\n      ",980],["T_VARIABLE","$row",981],"[",["T_CONSTANT_ENCAPSED_STRING","'source_ids_hash'",981],"]",["T_WHITESPACE"," ",981],"=",["T_WHITESPACE"," ",981],["T_VARIABLE","$this",981],["T_OBJECT_OPERATOR","->",981],["T_STRING","getIdMap",981],"(",")",["T_OBJECT_OPERATOR","->",981],["T_STRING","getSourceIDsHash",981],"(","[",["T_CONSTANT_ENCAPSED_STRING","'source_id_property'",981],["T_WHITESPACE"," ",981],["T_DOUBLE_ARROW","=>",981],["T_WHITESPACE"," ",981],["T_VARIABLE","$row",981],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",981],"]","]",")",";",["T_WHITESPACE","\n      ",981],["T_VARIABLE","$row",982],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",982],"]",["T_WHITESPACE"," ",982],"=",["T_WHITESPACE"," ",982],"\"",["T_ENCAPSED_AND_WHITESPACE","destination_id_value_",982],["T_VARIABLE","$i",982],"\"",";",["T_WHITESPACE","\n      ",982],["T_VARIABLE","$row",983],"[",["T_CONSTANT_ENCAPSED_STRING","'source_row_status'",983],"]",["T_WHITESPACE"," ",983],"=",["T_WHITESPACE"," ",983],["T_STRING","MigrateIdMapInterface",983],["T_DOUBLE_COLON","::",983],["T_STRING","STATUS_IMPORTED",983],";",["T_WHITESPACE","\n      ",983],["T_VARIABLE","$expected_results",984],"[",["T_STRING","serialize",984],"(","[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",984],["T_WHITESPACE"," ",984],["T_DOUBLE_ARROW","=>",984],["T_WHITESPACE"," ",984],["T_VARIABLE","$row",984],"[",["T_CONSTANT_ENCAPSED_STRING","'sourceid1'",984],"]","]",")","]",["T_WHITESPACE"," ",984],"=",["T_WHITESPACE"," ",984],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",984],["T_WHITESPACE"," ",984],["T_DOUBLE_ARROW","=>",984],["T_WHITESPACE"," ",984],["T_VARIABLE","$row",984],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",984],"]","]",";",["T_WHITESPACE","\n      ",984],["T_VARIABLE","$this",985],["T_OBJECT_OPERATOR","->",985],["T_STRING","saveMap",985],"(",["T_VARIABLE","$row",985],")",";",["T_WHITESPACE","\n    ",985],"}",["T_WHITESPACE","\n\n    ",986],["T_VARIABLE","$this",988],["T_OBJECT_OPERATOR","->",988],["T_STRING","assertSame",988],"(",["T_STRING","iterator_to_array",988],"(",["T_VARIABLE","$this",988],["T_OBJECT_OPERATOR","->",988],["T_STRING","getIdMap",988],"(",")",")",",",["T_WHITESPACE"," ",988],["T_VARIABLE","$expected_results",988],")",";",["T_WHITESPACE","\n  ",988],"}",["T_WHITESPACE","\n\n  ",989],["T_DOC_COMMENT","\/**\n   * Retrieves the contents of an ID map.\n   *\n   * @return array\n   *   The contents of an ID map.\n   *\/",991],["T_WHITESPACE","\n  ",996],["T_PRIVATE","private",997],["T_WHITESPACE"," ",997],["T_FUNCTION","function",997],["T_WHITESPACE"," ",997],["T_STRING","getIdMapContents",997],"(",")",["T_WHITESPACE"," ",997],"{",["T_WHITESPACE","\n    ",997],["T_VARIABLE","$result",998],["T_WHITESPACE"," ",998],"=",["T_WHITESPACE"," ",998],["T_VARIABLE","$this",998],["T_OBJECT_OPERATOR","->",998],["T_STRING","database",998],["T_WHITESPACE","\n      ",998],["T_OBJECT_OPERATOR","->",999],["T_STRING","select",999],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_map_sql_idmap_test'",999],",",["T_WHITESPACE"," ",999],["T_CONSTANT_ENCAPSED_STRING","'t'",999],")",["T_WHITESPACE","\n      ",999],["T_OBJECT_OPERATOR","->",1000],["T_STRING","fields",1000],"(",["T_CONSTANT_ENCAPSED_STRING","'t'",1000],")",["T_WHITESPACE","\n      ",1000],["T_OBJECT_OPERATOR","->",1001],["T_STRING","execute",1001],"(",")",";",["T_WHITESPACE","\n\n    ",1001],["T_COMMENT","\/\/ The return value needs to be countable, or it will fail certain\n",1003],["T_WHITESPACE","    ",1004],["T_COMMENT","\/\/ assertions. iterator_to_array() will not suffice because it won't\n",1004],["T_WHITESPACE","    ",1005],["T_COMMENT","\/\/ respect the PDO fetch mode, if specified.\n",1005],["T_WHITESPACE","    ",1006],["T_VARIABLE","$contents",1006],["T_WHITESPACE"," ",1006],"=",["T_WHITESPACE"," ",1006],"[","]",";",["T_WHITESPACE","\n    ",1006],["T_FOREACH","foreach",1007],["T_WHITESPACE"," ",1007],"(",["T_VARIABLE","$result",1007],["T_WHITESPACE"," ",1007],["T_AS","as",1007],["T_WHITESPACE"," ",1007],["T_VARIABLE","$row",1007],")",["T_WHITESPACE"," ",1007],"{",["T_WHITESPACE","\n      ",1007],["T_VARIABLE","$contents",1008],"[","]",["T_WHITESPACE"," ",1008],"=",["T_WHITESPACE"," ",1008],["T_ARRAY_CAST","(array)",1008],["T_WHITESPACE"," ",1008],["T_VARIABLE","$row",1008],";",["T_WHITESPACE","\n    ",1008],"}",["T_WHITESPACE","\n    ",1009],["T_RETURN","return",1010],["T_WHITESPACE"," ",1010],["T_VARIABLE","$contents",1010],";",["T_WHITESPACE","\n  ",1010],"}",["T_WHITESPACE","\n\n",1011],"}",["T_WHITESPACE","\n",1013]]
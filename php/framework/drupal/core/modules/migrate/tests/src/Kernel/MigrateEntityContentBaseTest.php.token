[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Kernel",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTests",5],["T_NS_SEPARATOR","\\",5],["T_STRING","KernelTestBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","language",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Entity",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ConfigurableLanguage",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","MigrateExecutable",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateMessage",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","destination",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityContentBase",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Plugin",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MigrateIdMapInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Plugin",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MigrationInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","migrate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Row",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Tests the EntityContentBase destination.\n *\n * @group migrate\n *\/",14],["T_WHITESPACE","\n",18],["T_CLASS","class",19],["T_WHITESPACE"," ",19],["T_STRING","MigrateEntityContentBaseTest",19],["T_WHITESPACE"," ",19],["T_EXTENDS","extends",19],["T_WHITESPACE"," ",19],["T_STRING","KernelTestBase",19],["T_WHITESPACE"," ",19],"{",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PUBLIC","public",26],["T_WHITESPACE"," ",26],["T_STATIC","static",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$modules",26],["T_WHITESPACE"," ",26],"=",["T_WHITESPACE"," ",26],"[",["T_CONSTANT_ENCAPSED_STRING","'migrate'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'user'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'language'",26],",",["T_WHITESPACE"," ",26],["T_CONSTANT_ENCAPSED_STRING","'entity_test'",26],"]",";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The storage for entity_test_mul.\n   *\n   * @var \\Drupal\\Core\\Entity\\ContentEntityStorageInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$storage",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * A content migrate destination.\n   *\n   * @var \\Drupal\\migrate\\Plugin\\MigrateDestinationInterface\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$destination",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",42],["T_WHITESPACE","\n  ",44],["T_PROTECTED","protected",45],["T_WHITESPACE"," ",45],["T_FUNCTION","function",45],["T_WHITESPACE"," ",45],["T_STRING","setUp",45],"(",")",["T_WHITESPACE"," ",45],"{",["T_WHITESPACE","\n    ",45],["T_STRING","parent",46],["T_DOUBLE_COLON","::",46],["T_STRING","setUp",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","installEntitySchema",47],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",47],")",";",["T_WHITESPACE","\n\n    ",47],["T_STRING","ConfigurableLanguage",49],["T_DOUBLE_COLON","::",49],["T_STRING","createFromLangcode",49],"(",["T_CONSTANT_ENCAPSED_STRING","'en'",49],")",["T_OBJECT_OPERATOR","->",49],["T_STRING","save",49],"(",")",";",["T_WHITESPACE","\n    ",49],["T_STRING","ConfigurableLanguage",50],["T_DOUBLE_COLON","::",50],["T_STRING","createFromLangcode",50],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",50],")",["T_OBJECT_OPERATOR","->",50],["T_STRING","save",50],"(",")",";",["T_WHITESPACE","\n\n    ",50],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","storage",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","container",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","getStorage",52],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_test_mul'",52],")",";",["T_WHITESPACE","\n  ",52],"}",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Check the existing translations of an entity.\n   *\n   * @param int $id\n   *   The entity ID.\n   * @param string $default\n   *   The expected default translation language code.\n   * @param string[] $others\n   *   The expected other translation language codes.\n   *\/",55],["T_WHITESPACE","\n  ",64],["T_PROTECTED","protected",65],["T_WHITESPACE"," ",65],["T_FUNCTION","function",65],["T_WHITESPACE"," ",65],["T_STRING","assertTranslations",65],"(",["T_VARIABLE","$id",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$default",65],",",["T_WHITESPACE"," ",65],["T_VARIABLE","$others",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],"[","]",")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$entity",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","storage",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","load",66],"(",["T_VARIABLE","$id",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_VARIABLE","$entity",67],",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","\"Entity exists\"",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertEquals",68],"(",["T_VARIABLE","$default",68],",",["T_WHITESPACE"," ",68],["T_VARIABLE","$entity",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","language",68],"(",")",["T_OBJECT_OPERATOR","->",68],["T_STRING","getId",68],"(",")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","\"Entity default translation\"",68],")",";",["T_WHITESPACE","\n    ",68],["T_VARIABLE","$translations",69],["T_WHITESPACE"," ",69],"=",["T_WHITESPACE"," ",69],["T_STRING","array_keys",69],"(",["T_VARIABLE","$entity",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","getTranslationLanguages",69],"(",["T_STRING","FALSE",69],")",")",";",["T_WHITESPACE","\n    ",69],["T_STRING","sort",70],"(",["T_VARIABLE","$others",70],")",";",["T_WHITESPACE","\n    ",70],["T_STRING","sort",71],"(",["T_VARIABLE","$translations",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertEquals",72],"(",["T_VARIABLE","$others",72],",",["T_WHITESPACE"," ",72],["T_VARIABLE","$translations",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","\"Entity translations\"",72],")",";",["T_WHITESPACE","\n  ",72],"}",["T_WHITESPACE","\n\n  ",73],["T_DOC_COMMENT","\/**\n   * Create the destination plugin to test.\n   *\n   * @param array $configuration\n   *   The plugin configuration.\n   *\/",75],["T_WHITESPACE","\n  ",80],["T_PROTECTED","protected",81],["T_WHITESPACE"," ",81],["T_FUNCTION","function",81],["T_WHITESPACE"," ",81],["T_STRING","createDestination",81],"(",["T_ARRAY","array",81],["T_WHITESPACE"," ",81],["T_VARIABLE","$configuration",81],")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","destination",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_NEW","new",82],["T_WHITESPACE"," ",82],["T_STRING","EntityContentBase",82],"(",["T_WHITESPACE","\n      ",82],["T_VARIABLE","$configuration",83],",",["T_WHITESPACE","\n      ",83],["T_CONSTANT_ENCAPSED_STRING","'fake_plugin_id'",84],",",["T_WHITESPACE","\n      ",84],"[","]",",",["T_WHITESPACE","\n      ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","getMock",86],"(",["T_STRING","MigrationInterface",86],["T_DOUBLE_COLON","::",86],["T_CLASS","class",86],")",",",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","storage",87],",",["T_WHITESPACE","\n      ",87],"[","]",",",["T_WHITESPACE","\n      ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","container",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","get",89],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",89],")",",",["T_WHITESPACE","\n      ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","container",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","get",90],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.field.field_type'",90],")",["T_WHITESPACE","\n    ",90],")",";",["T_WHITESPACE","\n  ",91],"}",["T_WHITESPACE","\n\n  ",92],["T_DOC_COMMENT","\/**\n   * Test importing and rolling back translated entities.\n   *\/",94],["T_WHITESPACE","\n  ",96],["T_PUBLIC","public",97],["T_WHITESPACE"," ",97],["T_FUNCTION","function",97],["T_WHITESPACE"," ",97],["T_STRING","testTranslated",97],"(",")",["T_WHITESPACE"," ",97],"{",["T_WHITESPACE","\n    ",97],["T_COMMENT","\/\/ Create a destination.\n",98],["T_WHITESPACE","    ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","createDestination",99],"(","[",["T_CONSTANT_ENCAPSED_STRING","'translations'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_STRING","TRUE",99],"]",")",";",["T_WHITESPACE","\n\n    ",99],["T_COMMENT","\/\/ Create some pre-existing entities.\n",101],["T_WHITESPACE","    ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","storage",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","create",102],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_LNUMBER","1",102],",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'langcode'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'en'",102],"]",")",["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","storage",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","create",103],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_LNUMBER","2",103],",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'langcode'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'fr'",103],"]",")",["T_OBJECT_OPERATOR","->",103],["T_STRING","save",103],"(",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$translated",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","storage",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","create",104],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_LNUMBER","3",104],",",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'langcode'",104],["T_WHITESPACE"," ",104],["T_DOUBLE_ARROW","=>",104],["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'en'",104],"]",")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$translated",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","save",105],"(",")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$translated",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","addTranslation",106],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",106],")",["T_OBJECT_OPERATOR","->",106],["T_STRING","save",106],"(",")",";",["T_WHITESPACE","\n\n    ",106],["T_COMMENT","\/\/ Pre-assert that things are as expected.\n",108],["T_WHITESPACE","    ",109],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertTranslations",109],"(",["T_LNUMBER","1",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'en'",109],")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertTranslations",110],"(",["T_LNUMBER","2",110],",",["T_WHITESPACE"," ",110],["T_CONSTANT_ENCAPSED_STRING","'fr'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertTranslations",111],"(",["T_LNUMBER","3",111],",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'en'",111],",",["T_WHITESPACE"," ",111],"[",["T_CONSTANT_ENCAPSED_STRING","'fr'",111],"]",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertFalse",112],"(",["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","storage",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","load",112],"(",["T_LNUMBER","4",112],")",")",";",["T_WHITESPACE","\n\n    ",112],["T_VARIABLE","$destination_rows",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],"[",["T_WHITESPACE","\n      ",114],["T_COMMENT","\/\/ Existing default translation.\n",115],["T_WHITESPACE","      ",116],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_LNUMBER","1",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'langcode'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'en'",116],",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'action'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_STRING","MigrateIdMapInterface",116],["T_DOUBLE_COLON","::",116],["T_STRING","ROLLBACK_PRESERVE",116],"]",",",["T_WHITESPACE","\n      ",116],["T_COMMENT","\/\/ New translation.\n",117],["T_WHITESPACE","      ",118],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_LNUMBER","2",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'langcode'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'en'",118],",",["T_WHITESPACE"," ",118],["T_CONSTANT_ENCAPSED_STRING","'action'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_STRING","MigrateIdMapInterface",118],["T_DOUBLE_COLON","::",118],["T_STRING","ROLLBACK_DELETE",118],"]",",",["T_WHITESPACE","\n      ",118],["T_COMMENT","\/\/ Existing non-default translation.\n",119],["T_WHITESPACE","      ",120],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_LNUMBER","3",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'langcode'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'fr'",120],",",["T_WHITESPACE"," ",120],["T_CONSTANT_ENCAPSED_STRING","'action'",120],["T_WHITESPACE"," ",120],["T_DOUBLE_ARROW","=>",120],["T_WHITESPACE"," ",120],["T_STRING","MigrateIdMapInterface",120],["T_DOUBLE_COLON","::",120],["T_STRING","ROLLBACK_PRESERVE",120],"]",",",["T_WHITESPACE","\n      ",120],["T_COMMENT","\/\/ Brand new row.\n",121],["T_WHITESPACE","      ",122],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_LNUMBER","4",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'langcode'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'fr'",122],",",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'action'",122],["T_WHITESPACE"," ",122],["T_DOUBLE_ARROW","=>",122],["T_WHITESPACE"," ",122],["T_STRING","MigrateIdMapInterface",122],["T_DOUBLE_COLON","::",122],["T_STRING","ROLLBACK_DELETE",122],"]",",",["T_WHITESPACE","\n    ",122],"]",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$rollback_actions",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],"[","]",";",["T_WHITESPACE","\n\n    ",124],["T_COMMENT","\/\/ Import some rows.\n",126],["T_WHITESPACE","    ",127],["T_FOREACH","foreach",127],["T_WHITESPACE"," ",127],"(",["T_VARIABLE","$destination_rows",127],["T_WHITESPACE"," ",127],["T_AS","as",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$idx",127],["T_WHITESPACE"," ",127],["T_DOUBLE_ARROW","=>",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$destination_row",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_VARIABLE","$row",128],["T_WHITESPACE"," ",128],"=",["T_WHITESPACE"," ",128],["T_NEW","new",128],["T_WHITESPACE"," ",128],["T_STRING","Row",128],"(",")",";",["T_WHITESPACE","\n      ",128],["T_FOREACH","foreach",129],["T_WHITESPACE"," ",129],"(",["T_VARIABLE","$destination_row",129],["T_WHITESPACE"," ",129],["T_AS","as",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$key",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$value",129],")",["T_WHITESPACE"," ",129],"{",["T_WHITESPACE","\n        ",129],["T_VARIABLE","$row",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","setDestinationProperty",130],"(",["T_VARIABLE","$key",130],",",["T_WHITESPACE"," ",130],["T_VARIABLE","$value",130],")",";",["T_WHITESPACE","\n      ",130],"}",["T_WHITESPACE","\n      ",131],["T_VARIABLE","$this",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","destination",132],["T_OBJECT_OPERATOR","->",132],["T_STRING","import",132],"(",["T_VARIABLE","$row",132],")",";",["T_WHITESPACE","\n\n      ",132],["T_COMMENT","\/\/ Check that the rollback action is correct, and save it.\n",134],["T_WHITESPACE","      ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertEquals",135],"(",["T_VARIABLE","$destination_row",135],"[",["T_CONSTANT_ENCAPSED_STRING","'action'",135],"]",",",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","destination",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","rollbackAction",135],"(",")",")",";",["T_WHITESPACE","\n      ",135],["T_VARIABLE","$rollback_actions",136],"[",["T_VARIABLE","$idx",136],"]",["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","destination",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","rollbackAction",136],"(",")",";",["T_WHITESPACE","\n    ",136],"}",["T_WHITESPACE","\n\n    ",137],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","assertTranslations",139],"(",["T_LNUMBER","1",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'en'",139],")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertTranslations",140],"(",["T_LNUMBER","2",140],",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'fr'",140],",",["T_WHITESPACE"," ",140],"[",["T_CONSTANT_ENCAPSED_STRING","'en'",140],"]",")",";",["T_WHITESPACE","\n    ",140],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","assertTranslations",141],"(",["T_LNUMBER","3",141],",",["T_WHITESPACE"," ",141],["T_CONSTANT_ENCAPSED_STRING","'en'",141],",",["T_WHITESPACE"," ",141],"[",["T_CONSTANT_ENCAPSED_STRING","'fr'",141],"]",")",";",["T_WHITESPACE","\n    ",141],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","assertTranslations",142],"(",["T_LNUMBER","4",142],",",["T_WHITESPACE"," ",142],["T_CONSTANT_ENCAPSED_STRING","'fr'",142],")",";",["T_WHITESPACE","\n\n    ",142],["T_COMMENT","\/\/ Rollback the rows.\n",144],["T_WHITESPACE","    ",145],["T_FOREACH","foreach",145],["T_WHITESPACE"," ",145],"(",["T_VARIABLE","$destination_rows",145],["T_WHITESPACE"," ",145],["T_AS","as",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$idx",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_VARIABLE","$destination_row",145],")",["T_WHITESPACE"," ",145],"{",["T_WHITESPACE","\n      ",145],["T_IF","if",146],["T_WHITESPACE"," ",146],"(",["T_VARIABLE","$rollback_actions",146],"[",["T_VARIABLE","$idx",146],"]",["T_WHITESPACE"," ",146],["T_IS_EQUAL","==",146],["T_WHITESPACE"," ",146],["T_STRING","MigrateIdMapInterface",146],["T_DOUBLE_COLON","::",146],["T_STRING","ROLLBACK_DELETE",146],")",["T_WHITESPACE"," ",146],"{",["T_WHITESPACE","\n        ",146],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","destination",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","rollback",147],"(",["T_VARIABLE","$destination_row",147],")",";",["T_WHITESPACE","\n      ",147],"}",["T_WHITESPACE","\n    ",148],"}",["T_WHITESPACE","\n\n    ",149],["T_COMMENT","\/\/ No change, update of existing translation.\n",151],["T_WHITESPACE","    ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertTranslations",152],"(",["T_LNUMBER","1",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'en'",152],")",";",["T_WHITESPACE","\n    ",152],["T_COMMENT","\/\/ Remove added translation.\n",153],["T_WHITESPACE","    ",154],["T_VARIABLE","$this",154],["T_OBJECT_OPERATOR","->",154],["T_STRING","assertTranslations",154],"(",["T_LNUMBER","2",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'fr'",154],")",";",["T_WHITESPACE","\n    ",154],["T_COMMENT","\/\/ No change, update of existing translation.\n",155],["T_WHITESPACE","    ",156],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","assertTranslations",156],"(",["T_LNUMBER","3",156],",",["T_WHITESPACE"," ",156],["T_CONSTANT_ENCAPSED_STRING","'en'",156],",",["T_WHITESPACE"," ",156],"[",["T_CONSTANT_ENCAPSED_STRING","'fr'",156],"]",")",";",["T_WHITESPACE","\n    ",156],["T_COMMENT","\/\/ No change, can't remove default translation.\n",157],["T_WHITESPACE","    ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertTranslations",158],"(",["T_LNUMBER","4",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'fr'",158],")",";",["T_WHITESPACE","\n  ",158],"}",["T_WHITESPACE","\n\n  ",159],["T_DOC_COMMENT","\/**\n   * Tests creation of ID columns table with definitions taken from entity type.\n   *\/",161],["T_WHITESPACE","\n  ",163],["T_PUBLIC","public",164],["T_WHITESPACE"," ",164],["T_FUNCTION","function",164],["T_WHITESPACE"," ",164],["T_STRING","testEntityWithStringId",164],"(",")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","enableModules",165],"(","[",["T_CONSTANT_ENCAPSED_STRING","'migrate_entity_test'",165],"]",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","installEntitySchema",166],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_string_id_entity_test'",166],")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$definition",168],["T_WHITESPACE"," ",168],"=",["T_WHITESPACE"," ",168],"[",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'source'",169],["T_WHITESPACE"," ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],"[",["T_WHITESPACE","\n        ",169],["T_CONSTANT_ENCAPSED_STRING","'plugin'",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'embedded_data'",170],",",["T_WHITESPACE","\n        ",170],["T_CONSTANT_ENCAPSED_STRING","'data_rows'",171],["T_WHITESPACE"," ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],"[",["T_WHITESPACE","\n          ",171],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_LNUMBER","123",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'version'",172],["T_WHITESPACE"," ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'foo'",172],"]",",",["T_WHITESPACE","\n          ",172],["T_COMMENT","\/\/ This integer needs an 'int' schema with 'big' size. If 'destid1'\n",173],["T_WHITESPACE","          ",174],["T_COMMENT","\/\/ is not correctly taking the definition from the destination entity\n",174],["T_WHITESPACE","          ",175],["T_COMMENT","\/\/ type, the import will fail with a SQL exception.\n",175],["T_WHITESPACE","          ",176],"[",["T_CONSTANT_ENCAPSED_STRING","'id'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_LNUMBER","123456789012",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'version'",176],["T_WHITESPACE"," ",176],["T_DOUBLE_ARROW","=>",176],["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'bar'",176],"]",",",["T_WHITESPACE","\n        ",176],"]",",",["T_WHITESPACE","\n        ",177],["T_CONSTANT_ENCAPSED_STRING","'ids'",178],["T_WHITESPACE"," ",178],["T_DOUBLE_ARROW","=>",178],["T_WHITESPACE"," ",178],"[",["T_WHITESPACE","\n          ",178],["T_CONSTANT_ENCAPSED_STRING","'id'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'integer'",179],",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'size'",179],["T_WHITESPACE"," ",179],["T_DOUBLE_ARROW","=>",179],["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'big'",179],"]",",",["T_WHITESPACE","\n          ",179],["T_CONSTANT_ENCAPSED_STRING","'version'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],"[",["T_CONSTANT_ENCAPSED_STRING","'type'",180],["T_WHITESPACE"," ",180],["T_DOUBLE_ARROW","=>",180],["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'string'",180],"]",",",["T_WHITESPACE","\n        ",180],"]",",",["T_WHITESPACE","\n      ",181],"]",",",["T_WHITESPACE","\n      ",182],["T_CONSTANT_ENCAPSED_STRING","'process'",183],["T_WHITESPACE"," ",183],["T_DOUBLE_ARROW","=>",183],["T_WHITESPACE"," ",183],"[",["T_WHITESPACE","\n        ",183],["T_CONSTANT_ENCAPSED_STRING","'id'",184],["T_WHITESPACE"," ",184],["T_DOUBLE_ARROW","=>",184],["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'id'",184],",",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'version'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_CONSTANT_ENCAPSED_STRING","'version'",185],",",["T_WHITESPACE","\n      ",185],"]",",",["T_WHITESPACE","\n      ",186],["T_CONSTANT_ENCAPSED_STRING","'destination'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],"[",["T_WHITESPACE","\n        ",187],["T_CONSTANT_ENCAPSED_STRING","'plugin'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'entity:migrate_string_id_entity_test'",188],",",["T_WHITESPACE","\n      ",188],"]",",",["T_WHITESPACE","\n    ",189],"]",";",["T_WHITESPACE","\n\n    ",190],["T_VARIABLE","$migration",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_NS_SEPARATOR","\\",192],["T_STRING","Drupal",192],["T_DOUBLE_COLON","::",192],["T_STRING","service",192],"(",["T_CONSTANT_ENCAPSED_STRING","'plugin.manager.migration'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","createStubMigration",192],"(",["T_VARIABLE","$definition",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$executable",193],["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_STRING","MigrateExecutable",193],"(",["T_VARIABLE","$migration",193],",",["T_WHITESPACE"," ",193],["T_NEW","new",193],["T_WHITESPACE"," ",193],["T_STRING","MigrateMessage",193],"(",")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$result",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_VARIABLE","$executable",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","import",194],"(",")",";",["T_WHITESPACE","\n    ",194],["T_VARIABLE","$this",195],["T_OBJECT_OPERATOR","->",195],["T_STRING","assertEquals",195],"(",["T_STRING","MigrationInterface",195],["T_DOUBLE_COLON","::",195],["T_STRING","RESULT_COMPLETED",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$result",195],")",";",["T_WHITESPACE","\n\n    ",195],["T_DOC_COMMENT","\/** @var \\Drupal\\migrate\\Plugin\\MigrateIdMapInterface $id_map_plugin *\/",197],["T_WHITESPACE","\n    ",197],["T_VARIABLE","$id_map_plugin",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$migration",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","getIdMap",198],"(",")",";",["T_WHITESPACE","\n\n    ",198],["T_COMMENT","\/\/ Check that the destination has been stored.\n",200],["T_WHITESPACE","    ",201],["T_VARIABLE","$map_row",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$id_map_plugin",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getRowBySource",201],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_LNUMBER","123",201],",",["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'version'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'foo'",201],"]",")",";",["T_WHITESPACE","\n    ",201],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","assertEquals",202],"(",["T_LNUMBER","123",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$map_row",202],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",202],"]",")",";",["T_WHITESPACE","\n    ",202],["T_VARIABLE","$map_row",203],["T_WHITESPACE"," ",203],"=",["T_WHITESPACE"," ",203],["T_VARIABLE","$id_map_plugin",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","getRowBySource",203],"(","[",["T_CONSTANT_ENCAPSED_STRING","'id'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_LNUMBER","123456789012",203],",",["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'version'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_CONSTANT_ENCAPSED_STRING","'bar'",203],"]",")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertEquals",204],"(",["T_LNUMBER","123456789012",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$map_row",204],"[",["T_CONSTANT_ENCAPSED_STRING","'destid1'",204],"]",")",";",["T_WHITESPACE","\n  ",204],"}",["T_WHITESPACE","\n\n",205],"}",["T_WHITESPACE","\n",207]]
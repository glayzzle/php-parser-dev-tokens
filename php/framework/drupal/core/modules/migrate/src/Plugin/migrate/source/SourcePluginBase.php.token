[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","source",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","PluginBase",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Event",6],["T_NS_SEPARATOR","\\",6],["T_STRING","MigrateRollbackEvent",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Event",7],["T_NS_SEPARATOR","\\",7],["T_STRING","RollbackAwareInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Plugin",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrationInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","MigrateException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","migrate",10],["T_NS_SEPARATOR","\\",10],["T_STRING","MigrateSkipRowException",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","migrate",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Plugin",11],["T_NS_SEPARATOR","\\",11],["T_STRING","MigrateIdMapInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","migrate",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Plugin",12],["T_NS_SEPARATOR","\\",12],["T_STRING","MigrateSourceInterface",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","migrate",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Row",13],";",["T_WHITESPACE","\n\n",13],["T_DOC_COMMENT","\/**\n * The base class for all source plugins.\n *\n * @see \\Drupal\\migrate\\Plugin\\MigratePluginManager\n * @see \\Drupal\\migrate\\Annotation\\MigrateSource\n * @see \\Drupal\\migrate\\Plugin\\MigrateSourceInterface\n * @see plugin_api\n *\n * @ingroup migration\n *\/",15],["T_WHITESPACE","\n",24],["T_ABSTRACT","abstract",25],["T_WHITESPACE"," ",25],["T_CLASS","class",25],["T_WHITESPACE"," ",25],["T_STRING","SourcePluginBase",25],["T_WHITESPACE"," ",25],["T_EXTENDS","extends",25],["T_WHITESPACE"," ",25],["T_STRING","PluginBase",25],["T_WHITESPACE"," ",25],["T_IMPLEMENTS","implements",25],["T_WHITESPACE"," ",25],["T_STRING","MigrateSourceInterface",25],",",["T_WHITESPACE"," ",25],["T_STRING","RollbackAwareInterface",25],["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * The module handler service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",27],["T_WHITESPACE","\n  ",31],["T_PROTECTED","protected",32],["T_WHITESPACE"," ",32],["T_VARIABLE","$moduleHandler",32],";",["T_WHITESPACE","\n\n  ",32],["T_DOC_COMMENT","\/**\n   * The entity migration object.\n   *\n   * @var \\Drupal\\migrate\\Plugin\\MigrationInterface\n   *\/",34],["T_WHITESPACE","\n  ",38],["T_PROTECTED","protected",39],["T_WHITESPACE"," ",39],["T_VARIABLE","$migration",39],";",["T_WHITESPACE","\n\n  ",39],["T_DOC_COMMENT","\/**\n   * The current row from the query.\n   *\n   * @var \\Drupal\\Migrate\\Row\n   *\/",41],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$currentRow",46],";",["T_WHITESPACE","\n\n  ",46],["T_DOC_COMMENT","\/**\n   * The primary key of the current row.\n   *\n   * @var array\n   *\/",48],["T_WHITESPACE","\n  ",52],["T_PROTECTED","protected",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$currentSourceIds",53],";",["T_WHITESPACE","\n\n  ",53],["T_DOC_COMMENT","\/**\n   * Information on the property used as the high-water mark.\n   *\n   * Array of 'name' and (optional) db 'alias' properties used for high-water\n   * mark.\n   *\n   * @var array\n   *\/",55],["T_WHITESPACE","\n  ",62],["T_PROTECTED","protected",63],["T_WHITESPACE"," ",63],["T_VARIABLE","$highWaterProperty",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],"[","]",";",["T_WHITESPACE","\n\n  ",63],["T_DOC_COMMENT","\/**\n   * The key-value storage for the high-water value.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface\n   *\/",65],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_VARIABLE","$highWaterStorage",70],";",["T_WHITESPACE","\n\n  ",70],["T_DOC_COMMENT","\/**\n   * The high water mark at the beginning of the import operation.\n   *\n   * If the source has a property for tracking changes (like Drupal has\n   * node.changed) then this is the highest value of those imported so far.\n   *\n   * @var int\n   *\/",72],["T_WHITESPACE","\n  ",79],["T_PROTECTED","protected",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$originalHighWater",80],";",["T_WHITESPACE","\n\n  ",80],["T_DOC_COMMENT","\/**\n   * Whether this instance should cache the source count.\n   *\n   * @var bool\n   *\/",82],["T_WHITESPACE","\n  ",86],["T_PROTECTED","protected",87],["T_WHITESPACE"," ",87],["T_VARIABLE","$cacheCounts",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","FALSE",87],";",["T_WHITESPACE","\n\n  ",87],["T_DOC_COMMENT","\/**\n   * Key to use for caching counts.\n   *\n   * @var string\n   *\/",89],["T_WHITESPACE","\n  ",93],["T_PROTECTED","protected",94],["T_WHITESPACE"," ",94],["T_VARIABLE","$cacheKey",94],";",["T_WHITESPACE","\n\n  ",94],["T_DOC_COMMENT","\/**\n   * Whether this instance should not attempt to count the source.\n   *\n   * @var bool\n   *\/",96],["T_WHITESPACE","\n  ",100],["T_PROTECTED","protected",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$skipCount",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_STRING","FALSE",101],";",["T_WHITESPACE","\n\n  ",101],["T_DOC_COMMENT","\/**\n   * Flags whether to track changes to incoming data.\n   *\n   * If TRUE, we will maintain hashed source rows to determine whether incoming\n   * data has changed.\n   *\n   * @var bool\n   *\/",103],["T_WHITESPACE","\n  ",110],["T_PROTECTED","protected",111],["T_WHITESPACE"," ",111],["T_VARIABLE","$trackChanges",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_STRING","FALSE",111],";",["T_WHITESPACE","\n\n  ",111],["T_DOC_COMMENT","\/**\n   * Flags whether source plugin will read the map row and add to data row.\n   *\n   * By default, next() will directly read the map row and add it to the data\n   * row. A source plugin implementation may do this itself (in particular, the\n   * SQL source can incorporate the map table into the query) - if so, it should\n   * set this TRUE so we don't duplicate the effort.\n   *\n   * @var bool\n   *\/",113],["T_WHITESPACE","\n  ",122],["T_PROTECTED","protected",123],["T_WHITESPACE"," ",123],["T_VARIABLE","$mapRowAdded",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_STRING","FALSE",123],";",["T_WHITESPACE","\n\n  ",123],["T_DOC_COMMENT","\/**\n   * The backend cache.\n   *\n   * @var \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *\/",125],["T_WHITESPACE","\n  ",129],["T_PROTECTED","protected",130],["T_WHITESPACE"," ",130],["T_VARIABLE","$cache",130],";",["T_WHITESPACE","\n\n  ",130],["T_DOC_COMMENT","\/**\n   * The migration ID map.\n   *\n   * @var \\Drupal\\migrate\\Plugin\\MigrateIdMapInterface\n   *\/",132],["T_WHITESPACE","\n  ",136],["T_PROTECTED","protected",137],["T_WHITESPACE"," ",137],["T_VARIABLE","$idMap",137],";",["T_WHITESPACE","\n\n  ",137],["T_DOC_COMMENT","\/**\n   * The iterator to iterate over the source rows.\n   *\n   * @var \\Iterator\n   *\/",139],["T_WHITESPACE","\n  ",143],["T_PROTECTED","protected",144],["T_WHITESPACE"," ",144],["T_VARIABLE","$iterator",144],";",["T_WHITESPACE","\n\n  ",144],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",146],["T_WHITESPACE","\n  ",148],["T_PUBLIC","public",149],["T_WHITESPACE"," ",149],["T_FUNCTION","function",149],["T_WHITESPACE"," ",149],["T_STRING","__construct",149],"(",["T_ARRAY","array",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$configuration",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$plugin_id",149],",",["T_WHITESPACE"," ",149],["T_VARIABLE","$plugin_definition",149],",",["T_WHITESPACE"," ",149],["T_STRING","MigrationInterface",149],["T_WHITESPACE"," ",149],["T_VARIABLE","$migration",149],")",["T_WHITESPACE"," ",149],"{",["T_WHITESPACE","\n    ",149],["T_STRING","parent",150],["T_DOUBLE_COLON","::",150],["T_STRING","__construct",150],"(",["T_VARIABLE","$configuration",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$plugin_id",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$plugin_definition",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","migration",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_VARIABLE","$migration",151],";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ Set up some defaults based on the source configuration.\n",153],["T_WHITESPACE","    ",154],["T_FOREACH","foreach",154],["T_WHITESPACE"," ",154],"(","[",["T_CONSTANT_ENCAPSED_STRING","'cacheCounts'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'cache_counts'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'skipCount'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'skip_count'",154],",",["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'trackChanges'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_CONSTANT_ENCAPSED_STRING","'track_changes'",154],"]",["T_WHITESPACE"," ",154],["T_AS","as",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$property",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_VARIABLE","$config_key",154],")",["T_WHITESPACE"," ",154],"{",["T_WHITESPACE","\n      ",154],["T_IF","if",155],["T_WHITESPACE"," ",155],"(",["T_ISSET","isset",155],"(",["T_VARIABLE","$configuration",155],"[",["T_VARIABLE","$config_key",155],"]",")",")",["T_WHITESPACE"," ",155],"{",["T_WHITESPACE","\n        ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_VARIABLE","$property",156],["T_WHITESPACE"," ",156],"=",["T_WHITESPACE"," ",156],["T_BOOL_CAST","(bool)",156],["T_WHITESPACE"," ",156],["T_VARIABLE","$configuration",156],"[",["T_VARIABLE","$config_key",156],"]",";",["T_WHITESPACE","\n      ",156],"}",["T_WHITESPACE","\n    ",157],"}",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","cacheKey",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],"!",["T_EMPTY","empty",159],"(",["T_VARIABLE","$configuration",159],"[",["T_CONSTANT_ENCAPSED_STRING","'cache_key'",159],"]",")",["T_WHITESPACE"," ",159],"?",["T_WHITESPACE"," ",159],["T_VARIABLE","$configuration",159],"[",["T_CONSTANT_ENCAPSED_STRING","'cache_key'",159],"]",["T_WHITESPACE"," ",159],":",["T_WHITESPACE"," ",159],["T_STRING","NULL",159],";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","idMap",160],["T_WHITESPACE"," ",160],"=",["T_WHITESPACE"," ",160],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","migration",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","getIdMap",160],"(",")",";",["T_WHITESPACE","\n    ",160],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","highWaterProperty",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],"!",["T_EMPTY","empty",161],"(",["T_VARIABLE","$configuration",161],"[",["T_CONSTANT_ENCAPSED_STRING","'high_water_property'",161],"]",")",["T_WHITESPACE"," ",161],"?",["T_WHITESPACE"," ",161],["T_VARIABLE","$configuration",161],"[",["T_CONSTANT_ENCAPSED_STRING","'high_water_property'",161],"]",["T_WHITESPACE"," ",161],":",["T_WHITESPACE"," ",161],["T_STRING","FALSE",161],";",["T_WHITESPACE","\n\n    ",161],["T_COMMENT","\/\/ Pull out the current highwater mark if we have a highwater property.\n",163],["T_WHITESPACE","    ",164],["T_IF","if",164],["T_WHITESPACE"," ",164],"(",["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","highWaterProperty",164],")",["T_WHITESPACE"," ",164],"{",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","originalHighWater",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","getHighWater",165],"(",")",";",["T_WHITESPACE","\n    ",165],"}",["T_WHITESPACE","\n\n    ",166],["T_COMMENT","\/\/ Don't allow the use of both highwater and track changes together.\n",168],["T_WHITESPACE","    ",169],["T_IF","if",169],["T_WHITESPACE"," ",169],"(",["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","highWaterProperty",169],["T_WHITESPACE"," ",169],["T_BOOLEAN_AND","&&",169],["T_WHITESPACE"," ",169],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","trackChanges",169],")",["T_WHITESPACE"," ",169],"{",["T_WHITESPACE","\n      ",169],["T_THROW","throw",170],["T_WHITESPACE"," ",170],["T_NEW","new",170],["T_WHITESPACE"," ",170],["T_STRING","MigrateException",170],"(",["T_CONSTANT_ENCAPSED_STRING","'You should either use a highwater mark or track changes not both. They are both designed to solve the same problem'",170],")",";",["T_WHITESPACE","\n    ",170],"}",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * Initializes the iterator with the source data.\n   *\n   * @return array\n   *   An array of the data for this source.\n   *\/",174],["T_WHITESPACE","\n  ",179],["T_PROTECTED","protected",180],["T_WHITESPACE"," ",180],["T_ABSTRACT","abstract",180],["T_WHITESPACE"," ",180],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","initializeIterator",180],"(",")",";",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * Gets the module handler.\n   *\n   * @return \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *   The module handler.\n   *\/",182],["T_WHITESPACE","\n  ",187],["T_PROTECTED","protected",188],["T_WHITESPACE"," ",188],["T_FUNCTION","function",188],["T_WHITESPACE"," ",188],["T_STRING","getModuleHandler",188],"(",")",["T_WHITESPACE"," ",188],"{",["T_WHITESPACE","\n    ",188],["T_IF","if",189],["T_WHITESPACE"," ",189],"(","!",["T_ISSET","isset",189],"(",["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","moduleHandler",189],")",")",["T_WHITESPACE"," ",189],"{",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","moduleHandler",190],["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_NS_SEPARATOR","\\",190],["T_STRING","Drupal",190],["T_DOUBLE_COLON","::",190],["T_STRING","moduleHandler",190],"(",")",";",["T_WHITESPACE","\n    ",190],"}",["T_WHITESPACE","\n    ",191],["T_RETURN","return",192],["T_WHITESPACE"," ",192],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","moduleHandler",192],";",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n  ",193],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",195],["T_WHITESPACE","\n  ",197],["T_PUBLIC","public",198],["T_WHITESPACE"," ",198],["T_FUNCTION","function",198],["T_WHITESPACE"," ",198],["T_STRING","prepareRow",198],"(",["T_STRING","Row",198],["T_WHITESPACE"," ",198],["T_VARIABLE","$row",198],")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n    ",198],["T_VARIABLE","$result",199],["T_WHITESPACE"," ",199],"=",["T_WHITESPACE"," ",199],["T_STRING","TRUE",199],";",["T_WHITESPACE","\n    ",199],["T_TRY","try",200],["T_WHITESPACE"," ",200],"{",["T_WHITESPACE","\n      ",200],["T_VARIABLE","$result_hook",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","getModuleHandler",201],"(",")",["T_OBJECT_OPERATOR","->",201],["T_STRING","invokeAll",201],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_prepare_row'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_VARIABLE","$row",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","migration",201],")",")",";",["T_WHITESPACE","\n      ",201],["T_VARIABLE","$result_named_hook",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getModuleHandler",202],"(",")",["T_OBJECT_OPERATOR","->",202],["T_STRING","invokeAll",202],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate_'",202],["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","migration",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","id",202],"(",")",["T_WHITESPACE"," ",202],".",["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'_prepare_row'",202],",",["T_WHITESPACE"," ",202],["T_ARRAY","array",202],"(",["T_VARIABLE","$row",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],",",["T_WHITESPACE"," ",202],["T_VARIABLE","$this",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","migration",202],")",")",";",["T_WHITESPACE","\n      ",202],["T_COMMENT","\/\/ We will skip if any hook returned FALSE.\n",203],["T_WHITESPACE","      ",204],["T_VARIABLE","$skip",204],["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$result_hook",204],["T_WHITESPACE"," ",204],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],["T_STRING","in_array",204],"(",["T_STRING","FALSE",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$result_hook",204],")",")",["T_WHITESPACE"," ",204],["T_BOOLEAN_OR","||",204],["T_WHITESPACE"," ",204],"(",["T_VARIABLE","$result_named_hook",204],["T_WHITESPACE"," ",204],["T_BOOLEAN_AND","&&",204],["T_WHITESPACE"," ",204],["T_STRING","in_array",204],"(",["T_STRING","FALSE",204],",",["T_WHITESPACE"," ",204],["T_VARIABLE","$result_named_hook",204],")",")",";",["T_WHITESPACE","\n      ",204],["T_VARIABLE","$save_to_map",205],["T_WHITESPACE"," ",205],"=",["T_WHITESPACE"," ",205],["T_STRING","TRUE",205],";",["T_WHITESPACE","\n    ",205],"}",["T_WHITESPACE","\n    ",206],["T_CATCH","catch",207],["T_WHITESPACE"," ",207],"(",["T_STRING","MigrateSkipRowException",207],["T_WHITESPACE"," ",207],["T_VARIABLE","$e",207],")",["T_WHITESPACE"," ",207],"{",["T_WHITESPACE","\n      ",207],["T_VARIABLE","$skip",208],["T_WHITESPACE"," ",208],"=",["T_WHITESPACE"," ",208],["T_STRING","TRUE",208],";",["T_WHITESPACE","\n      ",208],["T_VARIABLE","$save_to_map",209],["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$e",209],["T_OBJECT_OPERATOR","->",209],["T_STRING","getSaveToMap",209],"(",")",";",["T_WHITESPACE","\n      ",209],["T_IF","if",210],["T_WHITESPACE"," ",210],"(",["T_VARIABLE","$message",210],["T_WHITESPACE"," ",210],"=",["T_WHITESPACE"," ",210],["T_STRING","trim",210],"(",["T_VARIABLE","$e",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","getMessage",210],"(",")",")",")",["T_WHITESPACE"," ",210],"{",["T_WHITESPACE","\n        ",210],["T_VARIABLE","$this",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","idMap",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","saveMessage",211],"(",["T_VARIABLE","$row",211],["T_OBJECT_OPERATOR","->",211],["T_STRING","getSourceIdValues",211],"(",")",",",["T_WHITESPACE"," ",211],["T_VARIABLE","$message",211],",",["T_WHITESPACE"," ",211],["T_STRING","MigrationInterface",211],["T_DOUBLE_COLON","::",211],["T_STRING","MESSAGE_INFORMATIONAL",211],")",";",["T_WHITESPACE","\n      ",211],"}",["T_WHITESPACE","\n    ",212],"}",["T_WHITESPACE","\n\n    ",213],["T_COMMENT","\/\/ We're explicitly skipping this row - keep track in the map table.\n",215],["T_WHITESPACE","    ",216],["T_IF","if",216],["T_WHITESPACE"," ",216],"(",["T_VARIABLE","$skip",216],")",["T_WHITESPACE"," ",216],"{",["T_WHITESPACE","\n      ",216],["T_COMMENT","\/\/ Make sure we replace any previous messages for this item with any\n",217],["T_WHITESPACE","      ",218],["T_COMMENT","\/\/ new ones.\n",218],["T_WHITESPACE","      ",219],["T_IF","if",219],["T_WHITESPACE"," ",219],"(",["T_VARIABLE","$save_to_map",219],")",["T_WHITESPACE"," ",219],"{",["T_WHITESPACE","\n        ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","idMap",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","saveIdMapping",220],"(",["T_VARIABLE","$row",220],",",["T_WHITESPACE"," ",220],["T_ARRAY","array",220],"(",")",",",["T_WHITESPACE"," ",220],["T_STRING","MigrateIdMapInterface",220],["T_DOUBLE_COLON","::",220],["T_STRING","STATUS_IGNORED",220],")",";",["T_WHITESPACE","\n        ",220],["T_VARIABLE","$this",221],["T_OBJECT_OPERATOR","->",221],["T_STRING","currentRow",221],["T_WHITESPACE"," ",221],"=",["T_WHITESPACE"," ",221],["T_STRING","NULL",221],";",["T_WHITESPACE","\n        ",221],["T_VARIABLE","$this",222],["T_OBJECT_OPERATOR","->",222],["T_STRING","currentSourceIds",222],["T_WHITESPACE"," ",222],"=",["T_WHITESPACE"," ",222],["T_STRING","NULL",222],";",["T_WHITESPACE","\n      ",222],"}",["T_WHITESPACE","\n      ",223],["T_VARIABLE","$result",224],["T_WHITESPACE"," ",224],"=",["T_WHITESPACE"," ",224],["T_STRING","FALSE",224],";",["T_WHITESPACE","\n    ",224],"}",["T_WHITESPACE","\n    ",225],["T_ELSEIF","elseif",226],["T_WHITESPACE"," ",226],"(",["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","trackChanges",226],")",["T_WHITESPACE"," ",226],"{",["T_WHITESPACE","\n      ",226],["T_COMMENT","\/\/ When tracking changed data, We want to quietly skip (rather than\n",227],["T_WHITESPACE","      ",228],["T_COMMENT","\/\/ \"ignore\") rows with changes. The caller needs to make that decision,\n",228],["T_WHITESPACE","      ",229],["T_COMMENT","\/\/ so we need to provide them with the necessary information (before and\n",229],["T_WHITESPACE","      ",230],["T_COMMENT","\/\/ after hashes).\n",230],["T_WHITESPACE","      ",231],["T_VARIABLE","$row",231],["T_OBJECT_OPERATOR","->",231],["T_STRING","rehash",231],"(",")",";",["T_WHITESPACE","\n    ",231],"}",["T_WHITESPACE","\n    ",232],["T_RETURN","return",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$result",233],";",["T_WHITESPACE","\n  ",233],"}",["T_WHITESPACE","\n\n  ",234],["T_DOC_COMMENT","\/**\n   * Returns the iterator that will yield the row arrays to be processed.\n   *\n   * @return \\Iterator\n   *   The iterator that will yield the row arrays to be processed.\n   *\/",236],["T_WHITESPACE","\n  ",241],["T_PROTECTED","protected",242],["T_WHITESPACE"," ",242],["T_FUNCTION","function",242],["T_WHITESPACE"," ",242],["T_STRING","getIterator",242],"(",")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n    ",242],["T_IF","if",243],["T_WHITESPACE"," ",243],"(","!",["T_ISSET","isset",243],"(",["T_VARIABLE","$this",243],["T_OBJECT_OPERATOR","->",243],["T_STRING","iterator",243],")",")",["T_WHITESPACE"," ",243],"{",["T_WHITESPACE","\n      ",243],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","iterator",244],["T_WHITESPACE"," ",244],"=",["T_WHITESPACE"," ",244],["T_VARIABLE","$this",244],["T_OBJECT_OPERATOR","->",244],["T_STRING","initializeIterator",244],"(",")",";",["T_WHITESPACE","\n    ",244],"}",["T_WHITESPACE","\n    ",245],["T_RETURN","return",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$this",246],["T_OBJECT_OPERATOR","->",246],["T_STRING","iterator",246],";",["T_WHITESPACE","\n  ",246],"}",["T_WHITESPACE","\n\n  ",247],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",249],["T_WHITESPACE","\n  ",251],["T_PUBLIC","public",252],["T_WHITESPACE"," ",252],["T_FUNCTION","function",252],["T_WHITESPACE"," ",252],["T_STRING","current",252],"(",")",["T_WHITESPACE"," ",252],"{",["T_WHITESPACE","\n    ",252],["T_RETURN","return",253],["T_WHITESPACE"," ",253],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","currentRow",253],";",["T_WHITESPACE","\n  ",253],"}",["T_WHITESPACE","\n\n  ",254],["T_DOC_COMMENT","\/**\n   * Gets the iterator key.\n   *\n   * Implementation of Iterator::key - called when entering a loop iteration,\n   * returning the key of the current row. It must be a scalar - we will\n   * serialize to fulfill the requirement, but using getCurrentIds() is\n   * preferable.\n   *\/",256],["T_WHITESPACE","\n  ",263],["T_PUBLIC","public",264],["T_WHITESPACE"," ",264],["T_FUNCTION","function",264],["T_WHITESPACE"," ",264],["T_STRING","key",264],"(",")",["T_WHITESPACE"," ",264],"{",["T_WHITESPACE","\n    ",264],["T_RETURN","return",265],["T_WHITESPACE"," ",265],["T_STRING","serialize",265],"(",["T_VARIABLE","$this",265],["T_OBJECT_OPERATOR","->",265],["T_STRING","currentSourceIds",265],")",";",["T_WHITESPACE","\n  ",265],"}",["T_WHITESPACE","\n\n  ",266],["T_DOC_COMMENT","\/**\n   * Checks whether the iterator is currently valid.\n   *\n   * Implementation of Iterator::valid() - called at the top of the loop,\n   * returning TRUE to process the loop and FALSE to terminate it.\n   *\/",268],["T_WHITESPACE","\n  ",273],["T_PUBLIC","public",274],["T_WHITESPACE"," ",274],["T_FUNCTION","function",274],["T_WHITESPACE"," ",274],["T_STRING","valid",274],"(",")",["T_WHITESPACE"," ",274],"{",["T_WHITESPACE","\n    ",274],["T_RETURN","return",275],["T_WHITESPACE"," ",275],["T_ISSET","isset",275],"(",["T_VARIABLE","$this",275],["T_OBJECT_OPERATOR","->",275],["T_STRING","currentRow",275],")",";",["T_WHITESPACE","\n  ",275],"}",["T_WHITESPACE","\n\n  ",276],["T_DOC_COMMENT","\/**\n   * Rewinds the iterator.\n   *\n   * Implementation of Iterator::rewind() - subclasses of MigrateSource should\n   * implement performRewind() to do any class-specific setup for iterating\n   * source records.\n   *\/",278],["T_WHITESPACE","\n  ",284],["T_PUBLIC","public",285],["T_WHITESPACE"," ",285],["T_FUNCTION","function",285],["T_WHITESPACE"," ",285],["T_STRING","rewind",285],"(",")",["T_WHITESPACE"," ",285],"{",["T_WHITESPACE","\n    ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","getIterator",286],"(",")",["T_OBJECT_OPERATOR","->",286],["T_STRING","rewind",286],"(",")",";",["T_WHITESPACE","\n    ",286],["T_VARIABLE","$this",287],["T_OBJECT_OPERATOR","->",287],["T_STRING","next",287],"(",")",";",["T_WHITESPACE","\n  ",287],"}",["T_WHITESPACE","\n\n  ",288],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\n   * The migration iterates over rows returned by the source plugin. This\n   * method determines the next row which will be processed and imported into\n   * the system.\n   *\n   * The method tracks the source and destination IDs using the ID map plugin.\n   *\n   * This also takes care about highwater support. Highwater allows to reimport\n   * rows from a previous migration run, which got changed in the meantime.\n   * This is done by specifying a highwater field, which is compared with the\n   * last time, the migration got executed (originalHighWater).\n   *\/",290],["T_WHITESPACE","\n  ",303],["T_PUBLIC","public",304],["T_WHITESPACE"," ",304],["T_FUNCTION","function",304],["T_WHITESPACE"," ",304],["T_STRING","next",304],"(",")",["T_WHITESPACE"," ",304],"{",["T_WHITESPACE","\n    ",304],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","currentSourceIds",305],["T_WHITESPACE"," ",305],"=",["T_WHITESPACE"," ",305],["T_STRING","NULL",305],";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","currentRow",306],["T_WHITESPACE"," ",306],"=",["T_WHITESPACE"," ",306],["T_STRING","NULL",306],";",["T_WHITESPACE","\n\n    ",306],["T_COMMENT","\/\/ In order to find the next row we want to process, we ask the source\n",308],["T_WHITESPACE","    ",309],["T_COMMENT","\/\/ plugin for the next possible row.\n",309],["T_WHITESPACE","    ",310],["T_WHILE","while",310],["T_WHITESPACE"," ",310],"(","!",["T_ISSET","isset",310],"(",["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","currentRow",310],")",["T_WHITESPACE"," ",310],["T_BOOLEAN_AND","&&",310],["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getIterator",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","valid",310],"(",")",")",["T_WHITESPACE"," ",310],"{",["T_WHITESPACE","\n\n      ",310],["T_VARIABLE","$row_data",312],["T_WHITESPACE"," ",312],"=",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","getIterator",312],"(",")",["T_OBJECT_OPERATOR","->",312],["T_STRING","current",312],"(",")",["T_WHITESPACE"," ",312],"+",["T_WHITESPACE"," ",312],["T_VARIABLE","$this",312],["T_OBJECT_OPERATOR","->",312],["T_STRING","configuration",312],";",["T_WHITESPACE","\n      ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","fetchNextRow",313],"(",")",";",["T_WHITESPACE","\n      ",313],["T_VARIABLE","$row",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_NEW","new",314],["T_WHITESPACE"," ",314],["T_STRING","Row",314],"(",["T_VARIABLE","$row_data",314],",",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","migration",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getSourcePlugin",314],"(",")",["T_OBJECT_OPERATOR","->",314],["T_STRING","getIds",314],"(",")",",",["T_WHITESPACE"," ",314],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","migration",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","getDestinationIds",314],"(",")",")",";",["T_WHITESPACE","\n\n      ",314],["T_COMMENT","\/\/ Populate the source key for this row.\n",316],["T_WHITESPACE","      ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","currentSourceIds",317],["T_WHITESPACE"," ",317],"=",["T_WHITESPACE"," ",317],["T_VARIABLE","$row",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","getSourceIdValues",317],"(",")",";",["T_WHITESPACE","\n\n      ",317],["T_COMMENT","\/\/ Pick up the existing map row, if any, unless fetchNextRow() did it.\n",319],["T_WHITESPACE","      ",320],["T_IF","if",320],["T_WHITESPACE"," ",320],"(","!",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","mapRowAdded",320],["T_WHITESPACE"," ",320],["T_BOOLEAN_AND","&&",320],["T_WHITESPACE"," ",320],"(",["T_VARIABLE","$id_map",320],["T_WHITESPACE"," ",320],"=",["T_WHITESPACE"," ",320],["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","idMap",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","getRowBySource",320],"(",["T_VARIABLE","$this",320],["T_OBJECT_OPERATOR","->",320],["T_STRING","currentSourceIds",320],")",")",")",["T_WHITESPACE"," ",320],"{",["T_WHITESPACE","\n        ",320],["T_VARIABLE","$row",321],["T_OBJECT_OPERATOR","->",321],["T_STRING","setIdMap",321],"(",["T_VARIABLE","$id_map",321],")",";",["T_WHITESPACE","\n      ",321],"}",["T_WHITESPACE","\n\n      ",322],["T_COMMENT","\/\/ Clear any previous messages for this row before potentially adding\n",324],["T_WHITESPACE","      ",325],["T_COMMENT","\/\/ new ones.\n",325],["T_WHITESPACE","      ",326],["T_IF","if",326],["T_WHITESPACE"," ",326],"(","!",["T_EMPTY","empty",326],"(",["T_VARIABLE","$this",326],["T_OBJECT_OPERATOR","->",326],["T_STRING","currentSourceIds",326],")",")",["T_WHITESPACE"," ",326],"{",["T_WHITESPACE","\n        ",326],["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","idMap",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","delete",327],"(",["T_VARIABLE","$this",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","currentSourceIds",327],",",["T_WHITESPACE"," ",327],["T_STRING","TRUE",327],")",";",["T_WHITESPACE","\n      ",327],"}",["T_WHITESPACE","\n\n      ",328],["T_COMMENT","\/\/ Preparing the row gives source plugins the chance to skip.\n",330],["T_WHITESPACE","      ",331],["T_IF","if",331],["T_WHITESPACE"," ",331],"(",["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","prepareRow",331],"(",["T_VARIABLE","$row",331],")",["T_WHITESPACE"," ",331],["T_IS_IDENTICAL","===",331],["T_WHITESPACE"," ",331],["T_STRING","FALSE",331],")",["T_WHITESPACE"," ",331],"{",["T_WHITESPACE","\n        ",331],["T_CONTINUE","continue",332],";",["T_WHITESPACE","\n      ",332],"}",["T_WHITESPACE","\n\n      ",333],["T_COMMENT","\/\/ Check whether the row needs processing.\n",335],["T_WHITESPACE","      ",336],["T_COMMENT","\/\/ 1. This row has not been imported yet.\n",336],["T_WHITESPACE","      ",337],["T_COMMENT","\/\/ 2. Explicitly set to update.\n",337],["T_WHITESPACE","      ",338],["T_COMMENT","\/\/ 3. The row is newer than the current highwater mark.\n",338],["T_WHITESPACE","      ",339],["T_COMMENT","\/\/ 4. If no such property exists then try by checking the hash of the row.\n",339],["T_WHITESPACE","      ",340],["T_IF","if",340],["T_WHITESPACE"," ",340],"(","!",["T_VARIABLE","$row",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getIdMap",340],"(",")",["T_WHITESPACE"," ",340],["T_BOOLEAN_OR","||",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$row",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","needsUpdate",340],"(",")",["T_WHITESPACE"," ",340],["T_BOOLEAN_OR","||",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","aboveHighwater",340],"(",["T_VARIABLE","$row",340],")",["T_WHITESPACE"," ",340],["T_BOOLEAN_OR","||",340],["T_WHITESPACE"," ",340],["T_VARIABLE","$this",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","rowChanged",340],"(",["T_VARIABLE","$row",340],")",")",["T_WHITESPACE"," ",340],"{",["T_WHITESPACE","\n        ",340],["T_VARIABLE","$this",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","currentRow",341],["T_WHITESPACE"," ",341],"=",["T_WHITESPACE"," ",341],["T_VARIABLE","$row",341],["T_OBJECT_OPERATOR","->",341],["T_STRING","freezeSource",341],"(",")",";",["T_WHITESPACE","\n      ",341],"}",["T_WHITESPACE","\n\n      ",342],["T_IF","if",344],["T_WHITESPACE"," ",344],"(",["T_VARIABLE","$this",344],["T_OBJECT_OPERATOR","->",344],["T_STRING","getHighWaterProperty",344],"(",")",")",["T_WHITESPACE"," ",344],"{",["T_WHITESPACE","\n        ",344],["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","saveHighWater",345],"(",["T_VARIABLE","$row",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","getSourceProperty",345],"(",["T_VARIABLE","$this",345],["T_OBJECT_OPERATOR","->",345],["T_STRING","highWaterProperty",345],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",345],"]",")",")",";",["T_WHITESPACE","\n      ",345],"}",["T_WHITESPACE","\n    ",346],"}",["T_WHITESPACE","\n  ",347],"}",["T_WHITESPACE","\n\n  ",348],["T_DOC_COMMENT","\/**\n   * Position the iterator to the following row.\n   *\/",350],["T_WHITESPACE","\n  ",352],["T_PROTECTED","protected",353],["T_WHITESPACE"," ",353],["T_FUNCTION","function",353],["T_WHITESPACE"," ",353],["T_STRING","fetchNextRow",353],"(",")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n    ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","getIterator",354],"(",")",["T_OBJECT_OPERATOR","->",354],["T_STRING","next",354],"(",")",";",["T_WHITESPACE","\n  ",354],"}",["T_WHITESPACE","\n\n  ",355],["T_DOC_COMMENT","\/**\n   * Check if the incoming data is newer than what we've previously imported.\n   *\n   * @param \\Drupal\\migrate\\Row $row\n   *   The row we're importing.\n   *\n   * @return bool\n   *   TRUE if the highwater value in the row is greater than our current value.\n   *\/",357],["T_WHITESPACE","\n  ",365],["T_PROTECTED","protected",366],["T_WHITESPACE"," ",366],["T_FUNCTION","function",366],["T_WHITESPACE"," ",366],["T_STRING","aboveHighwater",366],"(",["T_STRING","Row",366],["T_WHITESPACE"," ",366],["T_VARIABLE","$row",366],")",["T_WHITESPACE"," ",366],"{",["T_WHITESPACE","\n    ",366],["T_RETURN","return",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getHighWaterProperty",367],"(",")",["T_WHITESPACE"," ",367],["T_BOOLEAN_AND","&&",367],["T_WHITESPACE"," ",367],["T_VARIABLE","$row",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","getSourceProperty",367],"(",["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","highWaterProperty",367],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",367],"]",")",["T_WHITESPACE"," ",367],">",["T_WHITESPACE"," ",367],["T_VARIABLE","$this",367],["T_OBJECT_OPERATOR","->",367],["T_STRING","originalHighWater",367],";",["T_WHITESPACE","\n  ",367],"}",["T_WHITESPACE","\n\n  ",368],["T_DOC_COMMENT","\/**\n   * Checks if the incoming row has changed since our last import.\n   *\n   * @param \\Drupal\\migrate\\Row $row\n   *   The row we're importing.\n   *\n   * @return bool\n   *   TRUE if the row has changed otherwise FALSE.\n   *\/",370],["T_WHITESPACE","\n  ",378],["T_PROTECTED","protected",379],["T_WHITESPACE"," ",379],["T_FUNCTION","function",379],["T_WHITESPACE"," ",379],["T_STRING","rowChanged",379],"(",["T_STRING","Row",379],["T_WHITESPACE"," ",379],["T_VARIABLE","$row",379],")",["T_WHITESPACE"," ",379],"{",["T_WHITESPACE","\n    ",379],["T_RETURN","return",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$this",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","trackChanges",380],["T_WHITESPACE"," ",380],["T_BOOLEAN_AND","&&",380],["T_WHITESPACE"," ",380],["T_VARIABLE","$row",380],["T_OBJECT_OPERATOR","->",380],["T_STRING","changed",380],"(",")",";",["T_WHITESPACE","\n  ",380],"}",["T_WHITESPACE","\n\n  ",381],["T_DOC_COMMENT","\/**\n   * Gets the currentSourceIds data member.\n   *\/",383],["T_WHITESPACE","\n  ",385],["T_PUBLIC","public",386],["T_WHITESPACE"," ",386],["T_FUNCTION","function",386],["T_WHITESPACE"," ",386],["T_STRING","getCurrentIds",386],"(",")",["T_WHITESPACE"," ",386],"{",["T_WHITESPACE","\n    ",386],["T_RETURN","return",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","currentSourceIds",387],";",["T_WHITESPACE","\n  ",387],"}",["T_WHITESPACE","\n\n  ",388],["T_DOC_COMMENT","\/**\n   * Gets the source count.\n   *\n   * Return a count of available source records, from the cache if appropriate.\n   * Returns -1 if the source is not countable.\n   *\n   * @param bool $refresh\n   *   (optional) Whether or not to refresh the count. Defaults to FALSE.\n   *\n   * @return int\n   *   The count.\n   *\/",390],["T_WHITESPACE","\n  ",401],["T_PUBLIC","public",402],["T_WHITESPACE"," ",402],["T_FUNCTION","function",402],["T_WHITESPACE"," ",402],["T_STRING","count",402],"(",["T_VARIABLE","$refresh",402],["T_WHITESPACE"," ",402],"=",["T_WHITESPACE"," ",402],["T_STRING","FALSE",402],")",["T_WHITESPACE"," ",402],"{",["T_WHITESPACE","\n    ",402],["T_IF","if",403],["T_WHITESPACE"," ",403],"(",["T_VARIABLE","$this",403],["T_OBJECT_OPERATOR","->",403],["T_STRING","skipCount",403],")",["T_WHITESPACE"," ",403],"{",["T_WHITESPACE","\n      ",403],["T_RETURN","return",404],["T_WHITESPACE"," ",404],"-",["T_LNUMBER","1",404],";",["T_WHITESPACE","\n    ",404],"}",["T_WHITESPACE","\n\n    ",405],["T_IF","if",407],["T_WHITESPACE"," ",407],"(","!",["T_ISSET","isset",407],"(",["T_VARIABLE","$this",407],["T_OBJECT_OPERATOR","->",407],["T_STRING","cacheKey",407],")",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n      ",407],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","cacheKey",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_STRING","hash",408],"(",["T_CONSTANT_ENCAPSED_STRING","'sha256'",408],",",["T_WHITESPACE"," ",408],["T_VARIABLE","$this",408],["T_OBJECT_OPERATOR","->",408],["T_STRING","getPluginId",408],"(",")",")",";",["T_WHITESPACE","\n    ",408],"}",["T_WHITESPACE","\n\n    ",409],["T_COMMENT","\/\/ If a refresh is requested, or we're not caching counts, ask the derived\n",411],["T_WHITESPACE","    ",412],["T_COMMENT","\/\/ class to get the count from the source.\n",412],["T_WHITESPACE","    ",413],["T_IF","if",413],["T_WHITESPACE"," ",413],"(",["T_VARIABLE","$refresh",413],["T_WHITESPACE"," ",413],["T_BOOLEAN_OR","||",413],["T_WHITESPACE"," ",413],"!",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","cacheCounts",413],")",["T_WHITESPACE"," ",413],"{",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$count",414],["T_WHITESPACE"," ",414],"=",["T_WHITESPACE"," ",414],["T_VARIABLE","$this",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","doCount",414],"(",")",";",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","getCache",415],"(",")",["T_OBJECT_OPERATOR","->",415],["T_STRING","set",415],"(",["T_VARIABLE","$this",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","cacheKey",415],",",["T_WHITESPACE"," ",415],["T_VARIABLE","$count",415],")",";",["T_WHITESPACE","\n    ",415],"}",["T_WHITESPACE","\n    ",416],["T_ELSE","else",417],["T_WHITESPACE"," ",417],"{",["T_WHITESPACE","\n      ",417],["T_COMMENT","\/\/ Caching is in play, first try to retrieve a cached count.\n",418],["T_WHITESPACE","      ",419],["T_VARIABLE","$cache_object",419],["T_WHITESPACE"," ",419],"=",["T_WHITESPACE"," ",419],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","getCache",419],"(",")",["T_OBJECT_OPERATOR","->",419],["T_STRING","get",419],"(",["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","cacheKey",419],",",["T_WHITESPACE"," ",419],["T_CONSTANT_ENCAPSED_STRING","'cache'",419],")",";",["T_WHITESPACE","\n      ",419],["T_IF","if",420],["T_WHITESPACE"," ",420],"(",["T_STRING","is_object",420],"(",["T_VARIABLE","$cache_object",420],")",")",["T_WHITESPACE"," ",420],"{",["T_WHITESPACE","\n        ",420],["T_COMMENT","\/\/ Success.\n",421],["T_WHITESPACE","        ",422],["T_VARIABLE","$count",422],["T_WHITESPACE"," ",422],"=",["T_WHITESPACE"," ",422],["T_VARIABLE","$cache_object",422],["T_OBJECT_OPERATOR","->",422],["T_STRING","data",422],";",["T_WHITESPACE","\n      ",422],"}",["T_WHITESPACE","\n      ",423],["T_ELSE","else",424],["T_WHITESPACE"," ",424],"{",["T_WHITESPACE","\n        ",424],["T_COMMENT","\/\/ No cached count, ask the derived class to count 'em up, and cache\n",425],["T_WHITESPACE","        ",426],["T_COMMENT","\/\/ the result.\n",426],["T_WHITESPACE","        ",427],["T_VARIABLE","$count",427],["T_WHITESPACE"," ",427],"=",["T_WHITESPACE"," ",427],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","doCount",427],"(",")",";",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","getCache",428],"(",")",["T_OBJECT_OPERATOR","->",428],["T_STRING","set",428],"(",["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","cacheKey",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$count",428],")",";",["T_WHITESPACE","\n      ",428],"}",["T_WHITESPACE","\n    ",429],"}",["T_WHITESPACE","\n    ",430],["T_RETURN","return",431],["T_WHITESPACE"," ",431],["T_VARIABLE","$count",431],";",["T_WHITESPACE","\n  ",431],"}",["T_WHITESPACE","\n\n  ",432],["T_DOC_COMMENT","\/**\n   * Gets the cache object.\n   *\n   * @return \\Drupal\\Core\\Cache\\CacheBackendInterface\n   *   The cache object.\n   *\/",434],["T_WHITESPACE","\n  ",439],["T_PROTECTED","protected",440],["T_WHITESPACE"," ",440],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","getCache",440],"(",")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n    ",440],["T_IF","if",441],["T_WHITESPACE"," ",441],"(","!",["T_ISSET","isset",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","cache",441],")",")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE","\n      ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","cache",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_NS_SEPARATOR","\\",442],["T_STRING","Drupal",442],["T_DOUBLE_COLON","::",442],["T_STRING","cache",442],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate'",442],")",";",["T_WHITESPACE","\n    ",442],"}",["T_WHITESPACE","\n    ",443],["T_RETURN","return",444],["T_WHITESPACE"," ",444],["T_VARIABLE","$this",444],["T_OBJECT_OPERATOR","->",444],["T_STRING","cache",444],";",["T_WHITESPACE","\n  ",444],"}",["T_WHITESPACE","\n\n  ",445],["T_DOC_COMMENT","\/**\n   * Gets the source count checking if the source is countable or using the\n   * iterator_count function.\n   *\n   * @return int\n   *\/",447],["T_WHITESPACE","\n  ",452],["T_PROTECTED","protected",453],["T_WHITESPACE"," ",453],["T_FUNCTION","function",453],["T_WHITESPACE"," ",453],["T_STRING","doCount",453],"(",")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n    ",453],["T_VARIABLE","$iterator",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getIterator",454],"(",")",";",["T_WHITESPACE","\n    ",454],["T_RETURN","return",455],["T_WHITESPACE"," ",455],["T_VARIABLE","$iterator",455],["T_WHITESPACE"," ",455],["T_INSTANCEOF","instanceof",455],["T_WHITESPACE"," ",455],["T_NS_SEPARATOR","\\",455],["T_STRING","Countable",455],["T_WHITESPACE"," ",455],"?",["T_WHITESPACE"," ",455],["T_VARIABLE","$iterator",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","count",455],"(",")",["T_WHITESPACE"," ",455],":",["T_WHITESPACE"," ",455],["T_STRING","iterator_count",455],"(",["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","initializeIterator",455],"(",")",")",";",["T_WHITESPACE","\n  ",455],"}",["T_WHITESPACE","\n\n  ",456],["T_DOC_COMMENT","\/**\n   * Get the high water storage object.\n   *\n   * @return \\Drupal\\Core\\KeyValueStore\\KeyValueStoreInterface\n   *   The storage object.\n   *\/",458],["T_WHITESPACE","\n  ",463],["T_PROTECTED","protected",464],["T_WHITESPACE"," ",464],["T_FUNCTION","function",464],["T_WHITESPACE"," ",464],["T_STRING","getHighWaterStorage",464],"(",")",["T_WHITESPACE"," ",464],"{",["T_WHITESPACE","\n    ",464],["T_IF","if",465],["T_WHITESPACE"," ",465],"(","!",["T_ISSET","isset",465],"(",["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","highWaterStorage",465],")",")",["T_WHITESPACE"," ",465],"{",["T_WHITESPACE","\n      ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","highWaterStorage",466],["T_WHITESPACE"," ",466],"=",["T_WHITESPACE"," ",466],["T_NS_SEPARATOR","\\",466],["T_STRING","Drupal",466],["T_DOUBLE_COLON","::",466],["T_STRING","keyValue",466],"(",["T_CONSTANT_ENCAPSED_STRING","'migrate:high_water'",466],")",";",["T_WHITESPACE","\n    ",466],"}",["T_WHITESPACE","\n    ",467],["T_RETURN","return",468],["T_WHITESPACE"," ",468],["T_VARIABLE","$this",468],["T_OBJECT_OPERATOR","->",468],["T_STRING","highWaterStorage",468],";",["T_WHITESPACE","\n  ",468],"}",["T_WHITESPACE","\n\n  ",469],["T_DOC_COMMENT","\/**\n   * The current value of the high water mark.\n   *\n   * The high water mark defines a timestamp stating the time the import was last\n   * run. If the mark is set, only content with a higher timestamp will be\n   * imported.\n   *\n   * @return int|null\n   *   A Unix timestamp representing the high water mark, or NULL if no high\n   *   water mark has been stored.\n   *\/",471],["T_WHITESPACE","\n  ",481],["T_PROTECTED","protected",482],["T_WHITESPACE"," ",482],["T_FUNCTION","function",482],["T_WHITESPACE"," ",482],["T_STRING","getHighWater",482],"(",")",["T_WHITESPACE"," ",482],"{",["T_WHITESPACE","\n    ",482],["T_RETURN","return",483],["T_WHITESPACE"," ",483],["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","getHighWaterStorage",483],"(",")",["T_OBJECT_OPERATOR","->",483],["T_STRING","get",483],"(",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","migration",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","id",483],"(",")",")",";",["T_WHITESPACE","\n  ",483],"}",["T_WHITESPACE","\n\n  ",484],["T_DOC_COMMENT","\/**\n   * Save the new high water mark.\n   *\n   * @param int $high_water\n   *   The high water timestamp.\n   *\/",486],["T_WHITESPACE","\n  ",491],["T_PROTECTED","protected",492],["T_WHITESPACE"," ",492],["T_FUNCTION","function",492],["T_WHITESPACE"," ",492],["T_STRING","saveHighWater",492],"(",["T_VARIABLE","$high_water",492],")",["T_WHITESPACE"," ",492],"{",["T_WHITESPACE","\n    ",492],["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","getHighWaterStorage",493],"(",")",["T_OBJECT_OPERATOR","->",493],["T_STRING","set",493],"(",["T_VARIABLE","$this",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","migration",493],["T_OBJECT_OPERATOR","->",493],["T_STRING","id",493],"(",")",",",["T_WHITESPACE"," ",493],["T_VARIABLE","$high_water",493],")",";",["T_WHITESPACE","\n  ",493],"}",["T_WHITESPACE","\n\n  ",494],["T_DOC_COMMENT","\/**\n   * Get information on the property used as the high watermark.\n   *\n   * Array of 'name' & (optional) db 'alias' properties used for high watermark.\n   *\n   * @see \\Drupal\\migrate\\Plugin\\migrate\\source\\SqlBase::initializeIterator()\n   *\n   * @return array\n   *   The property used as the high watermark.\n   *\/",496],["T_WHITESPACE","\n  ",505],["T_PROTECTED","protected",506],["T_WHITESPACE"," ",506],["T_FUNCTION","function",506],["T_WHITESPACE"," ",506],["T_STRING","getHighWaterProperty",506],"(",")",["T_WHITESPACE"," ",506],"{",["T_WHITESPACE","\n    ",506],["T_RETURN","return",507],["T_WHITESPACE"," ",507],["T_VARIABLE","$this",507],["T_OBJECT_OPERATOR","->",507],["T_STRING","highWaterProperty",507],";",["T_WHITESPACE","\n  ",507],"}",["T_WHITESPACE","\n\n  ",508],["T_DOC_COMMENT","\/**\n   * Get the name of the field used as the high watermark.\n   *\n   * The name of the field qualified with an alias if available.\n   *\n   * @see \\Drupal\\migrate\\Plugin\\migrate\\source\\SqlBase::initializeIterator()\n   *\n   * @return string|null\n   *   The name of the field for the high water mark, or NULL if not set.\n   *\/",510],["T_WHITESPACE","\n  ",519],["T_PROTECTED","protected",520],["T_WHITESPACE"," ",520],["T_FUNCTION","function",520],["T_WHITESPACE"," ",520],["T_STRING","getHighWaterField",520],"(",")",["T_WHITESPACE"," ",520],"{",["T_WHITESPACE","\n    ",520],["T_IF","if",521],["T_WHITESPACE"," ",521],"(","!",["T_EMPTY","empty",521],"(",["T_VARIABLE","$this",521],["T_OBJECT_OPERATOR","->",521],["T_STRING","highWaterProperty",521],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",521],"]",")",")",["T_WHITESPACE"," ",521],"{",["T_WHITESPACE","\n      ",521],["T_RETURN","return",522],["T_WHITESPACE"," ",522],"!",["T_EMPTY","empty",522],"(",["T_VARIABLE","$this",522],["T_OBJECT_OPERATOR","->",522],["T_STRING","highWaterProperty",522],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",522],"]",")",["T_WHITESPACE"," ",522],"?",["T_WHITESPACE","\n        ",522],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","highWaterProperty",523],"[",["T_CONSTANT_ENCAPSED_STRING","'alias'",523],"]",["T_WHITESPACE"," ",523],".",["T_WHITESPACE"," ",523],["T_CONSTANT_ENCAPSED_STRING","'.'",523],["T_WHITESPACE"," ",523],".",["T_WHITESPACE"," ",523],["T_VARIABLE","$this",523],["T_OBJECT_OPERATOR","->",523],["T_STRING","highWaterProperty",523],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",523],"]",["T_WHITESPACE"," ",523],":",["T_WHITESPACE","\n        ",523],["T_VARIABLE","$this",524],["T_OBJECT_OPERATOR","->",524],["T_STRING","highWaterProperty",524],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",524],"]",";",["T_WHITESPACE","\n    ",524],"}",["T_WHITESPACE","\n    ",525],["T_RETURN","return",526],["T_WHITESPACE"," ",526],["T_STRING","NULL",526],";",["T_WHITESPACE","\n  ",526],"}",["T_WHITESPACE","\n\n  ",527],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",529],["T_WHITESPACE","\n  ",531],["T_PUBLIC","public",532],["T_WHITESPACE"," ",532],["T_FUNCTION","function",532],["T_WHITESPACE"," ",532],["T_STRING","preRollback",532],"(",["T_STRING","MigrateRollbackEvent",532],["T_WHITESPACE"," ",532],["T_VARIABLE","$event",532],")",["T_WHITESPACE"," ",532],"{",["T_WHITESPACE","\n    ",532],["T_COMMENT","\/\/ Nothing to do in this implementation.\n",533],["T_WHITESPACE","  ",534],"}",["T_WHITESPACE","\n\n  ",534],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",536],["T_WHITESPACE","\n  ",538],["T_PUBLIC","public",539],["T_WHITESPACE"," ",539],["T_FUNCTION","function",539],["T_WHITESPACE"," ",539],["T_STRING","postRollback",539],"(",["T_STRING","MigrateRollbackEvent",539],["T_WHITESPACE"," ",539],["T_VARIABLE","$event",539],")",["T_WHITESPACE"," ",539],"{",["T_WHITESPACE","\n    ",539],["T_COMMENT","\/\/ Reset the high-water mark.\n",540],["T_WHITESPACE","    ",541],["T_VARIABLE","$this",541],["T_OBJECT_OPERATOR","->",541],["T_STRING","saveHighWater",541],"(",["T_STRING","NULL",541],")",";",["T_WHITESPACE","\n  ",541],"}",["T_WHITESPACE","\n\n",542],"}",["T_WHITESPACE","\n",544]]
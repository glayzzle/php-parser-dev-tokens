[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","path",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Confirm that paths work with translated nodes.\n *\n * @group path\n *\/",5],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","PathLanguageTest",10],["T_WHITESPACE"," ",10],["T_EXTENDS","extends",10],["T_WHITESPACE"," ",10],["T_STRING","PathTestBase",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",12],["T_WHITESPACE","\n  ",16],["T_PUBLIC","public",17],["T_WHITESPACE"," ",17],["T_STATIC","static",17],["T_WHITESPACE"," ",17],["T_VARIABLE","$modules",17],["T_WHITESPACE"," ",17],"=",["T_WHITESPACE"," ",17],["T_ARRAY","array",17],"(",["T_CONSTANT_ENCAPSED_STRING","'path'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'locale'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'locale_test'",17],",",["T_WHITESPACE"," ",17],["T_CONSTANT_ENCAPSED_STRING","'content_translation'",17],")",";",["T_WHITESPACE","\n\n  ",17],["T_DOC_COMMENT","\/**\n   * An user with permissions to administer content types.\n   *\n   * @var \\Drupal\\user\\UserInterface\n   *\/",19],["T_WHITESPACE","\n  ",23],["T_PROTECTED","protected",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$webUser",24],";",["T_WHITESPACE","\n\n  ",24],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_FUNCTION","function",26],["T_WHITESPACE"," ",26],["T_STRING","setUp",26],"(",")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n    ",26],["T_STRING","parent",27],["T_DOUBLE_COLON","::",27],["T_STRING","setUp",27],"(",")",";",["T_WHITESPACE","\n\n    ",27],["T_VARIABLE","$permissions",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_ARRAY","array",29],"(",["T_WHITESPACE","\n      ",29],["T_CONSTANT_ENCAPSED_STRING","'access administration pages'",30],",",["T_WHITESPACE","\n      ",30],["T_CONSTANT_ENCAPSED_STRING","'administer content translation'",31],",",["T_WHITESPACE","\n      ",31],["T_CONSTANT_ENCAPSED_STRING","'administer content types'",32],",",["T_WHITESPACE","\n      ",32],["T_CONSTANT_ENCAPSED_STRING","'administer languages'",33],",",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'administer url aliases'",34],",",["T_WHITESPACE","\n      ",34],["T_CONSTANT_ENCAPSED_STRING","'create content translations'",35],",",["T_WHITESPACE","\n      ",35],["T_CONSTANT_ENCAPSED_STRING","'create page content'",36],",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'create url aliases'",37],",",["T_WHITESPACE","\n      ",37],["T_CONSTANT_ENCAPSED_STRING","'edit any page content'",38],",",["T_WHITESPACE","\n      ",38],["T_CONSTANT_ENCAPSED_STRING","'translate any entity'",39],",",["T_WHITESPACE","\n    ",39],")",";",["T_WHITESPACE","\n    ",40],["T_COMMENT","\/\/ Create and log in user.\n",41],["T_WHITESPACE","    ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","webUser",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalCreateUser",42],"(",["T_VARIABLE","$permissions",42],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","drupalLogin",43],"(",["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","webUser",43],")",";",["T_WHITESPACE","\n\n    ",43],["T_COMMENT","\/\/ Enable French language.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$edit",46],["T_WHITESPACE"," ",46],"=",["T_WHITESPACE"," ",46],["T_ARRAY","array",46],"(",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$edit",47],"[",["T_CONSTANT_ENCAPSED_STRING","'predefined_langcode'",47],"]",["T_WHITESPACE"," ",47],"=",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'fr'",47],";",["T_WHITESPACE","\n\n    ",47],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","drupalPostForm",49],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/add'",49],",",["T_WHITESPACE"," ",49],["T_VARIABLE","$edit",49],",",["T_WHITESPACE"," ",49],["T_STRING","t",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Add language'",49],")",")",";",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Enable URL language detection and selection.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$edit",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_ARRAY","array",52],"(",["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",52],["T_WHITESPACE"," ",52],["T_DOUBLE_ARROW","=>",52],["T_WHITESPACE"," ",52],["T_LNUMBER","1",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","drupalPostForm",53],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$edit",53],",",["T_WHITESPACE"," ",53],["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",53],")",")",";",["T_WHITESPACE","\n\n    ",53],["T_COMMENT","\/\/ Enable translation for page node.\n",55],["T_WHITESPACE","    ",56],["T_VARIABLE","$edit",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",["T_WHITESPACE","\n      ",56],["T_CONSTANT_ENCAPSED_STRING","'entity_types[node]'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_LNUMBER","1",57],",",["T_WHITESPACE","\n      ",57],["T_CONSTANT_ENCAPSED_STRING","'settings[node][page][translatable]'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_LNUMBER","1",58],",",["T_WHITESPACE","\n      ",58],["T_CONSTANT_ENCAPSED_STRING","'settings[node][page][fields][path]'",59],["T_WHITESPACE"," ",59],["T_DOUBLE_ARROW","=>",59],["T_WHITESPACE"," ",59],["T_LNUMBER","1",59],",",["T_WHITESPACE","\n      ",59],["T_CONSTANT_ENCAPSED_STRING","'settings[node][page][fields][body]'",60],["T_WHITESPACE"," ",60],["T_DOUBLE_ARROW","=>",60],["T_WHITESPACE"," ",60],["T_LNUMBER","1",60],",",["T_WHITESPACE","\n      ",60],["T_CONSTANT_ENCAPSED_STRING","'settings[node][page][settings][language][language_alterable]'",61],["T_WHITESPACE"," ",61],["T_DOUBLE_ARROW","=>",61],["T_WHITESPACE"," ",61],["T_LNUMBER","1",61],",",["T_WHITESPACE","\n    ",61],")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","drupalPostForm",63],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/content-language'",63],",",["T_WHITESPACE"," ",63],["T_VARIABLE","$edit",63],",",["T_WHITESPACE"," ",63],["T_STRING","t",63],"(",["T_CONSTANT_ENCAPSED_STRING","'Save configuration'",63],")",")",";",["T_WHITESPACE","\n    ",63],["T_NS_SEPARATOR","\\",64],["T_STRING","Drupal",64],["T_DOUBLE_COLON","::",64],["T_STRING","entityManager",64],"(",")",["T_OBJECT_OPERATOR","->",64],["T_STRING","clearCachedDefinitions",64],"(",")",";",["T_WHITESPACE","\n\n    ",64],["T_VARIABLE","$definitions",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_NS_SEPARATOR","\\",66],["T_STRING","Drupal",66],["T_DOUBLE_COLON","::",66],["T_STRING","entityManager",66],"(",")",["T_OBJECT_OPERATOR","->",66],["T_STRING","getFieldDefinitions",66],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",66],",",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'page'",66],")",";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$this",67],["T_OBJECT_OPERATOR","->",67],["T_STRING","assertTrue",67],"(",["T_VARIABLE","$definitions",67],"[",["T_CONSTANT_ENCAPSED_STRING","'path'",67],"]",["T_OBJECT_OPERATOR","->",67],["T_STRING","isTranslatable",67],"(",")",",",["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'Node path is translatable.'",67],")",";",["T_WHITESPACE","\n    ",67],["T_VARIABLE","$this",68],["T_OBJECT_OPERATOR","->",68],["T_STRING","assertTrue",68],"(",["T_VARIABLE","$definitions",68],"[",["T_CONSTANT_ENCAPSED_STRING","'body'",68],"]",["T_OBJECT_OPERATOR","->",68],["T_STRING","isTranslatable",68],"(",")",",",["T_WHITESPACE"," ",68],["T_CONSTANT_ENCAPSED_STRING","'Node body is translatable.'",68],")",";",["T_WHITESPACE","\n  ",68],"}",["T_WHITESPACE","\n\n  ",69],["T_DOC_COMMENT","\/**\n   * Test alias functionality through the admin interfaces.\n   *\/",71],["T_WHITESPACE","\n  ",73],["T_FUNCTION","function",74],["T_WHITESPACE"," ",74],["T_STRING","testAliasTranslation",74],"(",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$node_storage",75],["T_WHITESPACE"," ",75],"=",["T_WHITESPACE"," ",75],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","container",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","get",75],"(",["T_CONSTANT_ENCAPSED_STRING","'entity.manager'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","getStorage",75],"(",["T_CONSTANT_ENCAPSED_STRING","'node'",75],")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$english_node",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","drupalCreateNode",76],"(",["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'type'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'page'",76],",",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'langcode'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'en'",76],")",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$english_alias",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","randomMachineName",77],"(",")",";",["T_WHITESPACE","\n\n    ",77],["T_COMMENT","\/\/ Edit the node to set language and path.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$edit",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],["T_ARRAY","array",80],"(",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$edit",81],"[",["T_CONSTANT_ENCAPSED_STRING","'path[0][alias]'",81],"]",["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'\/'",81],["T_WHITESPACE"," ",81],".",["T_WHITESPACE"," ",81],["T_VARIABLE","$english_alias",81],";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","drupalPostForm",82],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",82],["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_VARIABLE","$english_node",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","id",82],"(",")",["T_WHITESPACE"," ",82],".",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'\/edit'",82],",",["T_WHITESPACE"," ",82],["T_VARIABLE","$edit",82],",",["T_WHITESPACE"," ",82],["T_STRING","t",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",82],")",")",";",["T_WHITESPACE","\n\n    ",82],["T_COMMENT","\/\/ Confirm that the alias works.\n",84],["T_WHITESPACE","    ",85],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalGet",85],"(",["T_VARIABLE","$english_alias",85],")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertText",86],"(",["T_VARIABLE","$english_node",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","body",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","value",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'Alias works.'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Translate the node into French.\n",88],["T_WHITESPACE","    ",89],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","drupalGet",89],"(",["T_CONSTANT_ENCAPSED_STRING","'node\/'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_VARIABLE","$english_node",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","id",89],"(",")",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'\/translations'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","clickLink",90],"(",["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Add'",90],")",")",";",["T_WHITESPACE","\n\n    ",90],["T_VARIABLE","$edit",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_ARRAY","array",92],"(",")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$edit",93],"[",["T_CONSTANT_ENCAPSED_STRING","'title[0][value]'",93],"]",["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","randomMachineName",93],"(",")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$edit",94],"[",["T_CONSTANT_ENCAPSED_STRING","'body[0][value]'",94],"]",["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","randomMachineName",94],"(",")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$french_alias",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","randomMachineName",95],"(",")",";",["T_WHITESPACE","\n    ",95],["T_VARIABLE","$edit",96],"[",["T_CONSTANT_ENCAPSED_STRING","'path[0][alias]'",96],"]",["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_CONSTANT_ENCAPSED_STRING","'\/'",96],["T_WHITESPACE"," ",96],".",["T_WHITESPACE"," ",96],["T_VARIABLE","$french_alias",96],";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalPostForm",97],"(",["T_STRING","NULL",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$edit",97],",",["T_WHITESPACE"," ",97],["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'Save (this translation)'",97],")",")",";",["T_WHITESPACE","\n\n    ",97],["T_COMMENT","\/\/ Clear the path lookup cache.\n",99],["T_WHITESPACE","    ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","container",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","get",100],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",100],")",["T_OBJECT_OPERATOR","->",100],["T_STRING","cacheClear",100],"(",")",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Languages are cached on many levels, and we need to clear those caches.\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","container",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","get",103],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",103],")",["T_OBJECT_OPERATOR","->",103],["T_STRING","reset",103],"(",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","rebuildContainer",104],"(",")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$languages",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","container",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","get",105],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",105],")",["T_OBJECT_OPERATOR","->",105],["T_STRING","getLanguages",105],"(",")",";",["T_WHITESPACE","\n\n    ",105],["T_COMMENT","\/\/ Ensure the node was created.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$node_storage",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","resetCache",108],"(",["T_ARRAY","array",108],"(",["T_VARIABLE","$english_node",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","id",108],"(",")",")",")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$english_node",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$node_storage",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","load",109],"(",["T_VARIABLE","$english_node",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","id",109],"(",")",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$english_node_french_translation",110],["T_WHITESPACE"," ",110],"=",["T_WHITESPACE"," ",110],["T_VARIABLE","$english_node",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","getTranslation",110],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertTrue",111],"(",["T_VARIABLE","$english_node",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","hasTranslation",111],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",111],")",",",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'Node found in database.'",111],")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Confirm that the alias works.\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","drupalGet",114],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",114],["T_WHITESPACE"," ",114],".",["T_WHITESPACE"," ",114],["T_VARIABLE","$edit",114],"[",["T_CONSTANT_ENCAPSED_STRING","'path[0][alias]'",114],"]",")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertText",115],"(",["T_VARIABLE","$english_node_french_translation",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","body",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","value",115],",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Alias for French translation works.'",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Confirm that the alias is returned for the URL. Languages are cached on\n",117],["T_WHITESPACE","    ",118],["T_COMMENT","\/\/ many levels, and we need to clear those caches.\n",118],["T_WHITESPACE","    ",119],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","container",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","get",119],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",119],")",["T_OBJECT_OPERATOR","->",119],["T_STRING","reset",119],"(",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$languages",120],["T_WHITESPACE"," ",120],"=",["T_WHITESPACE"," ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","container",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","get",120],"(",["T_CONSTANT_ENCAPSED_STRING","'language_manager'",120],")",["T_OBJECT_OPERATOR","->",120],["T_STRING","getLanguages",120],"(",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$url",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_VARIABLE","$english_node_french_translation",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","url",121],"(",["T_CONSTANT_ENCAPSED_STRING","'canonical'",121],",",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","'language'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$languages",121],"[",["T_CONSTANT_ENCAPSED_STRING","'fr'",121],"]",")",")",";",["T_WHITESPACE","\n\n    ",121],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertTrue",123],"(",["T_STRING","strpos",123],"(",["T_VARIABLE","$url",123],",",["T_WHITESPACE"," ",123],["T_VARIABLE","$edit",123],"[",["T_CONSTANT_ENCAPSED_STRING","'path[0][alias]'",123],"]",")",",",["T_WHITESPACE"," ",123],["T_CONSTANT_ENCAPSED_STRING","'URL contains the path alias.'",123],")",";",["T_WHITESPACE","\n\n    ",123],["T_COMMENT","\/\/ Confirm that the alias works even when changing language negotiation\n",125],["T_WHITESPACE","    ",126],["T_COMMENT","\/\/ options. Enable User language detection and selection over URL one.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$edit",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n      ",127],["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-user]'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_LNUMBER","1",128],",",["T_WHITESPACE","\n      ",128],["T_CONSTANT_ENCAPSED_STRING","'language_interface[weight][language-user]'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],"-",["T_LNUMBER","9",129],",",["T_WHITESPACE","\n      ",129],["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",130],["T_WHITESPACE"," ",130],["T_DOUBLE_ARROW","=>",130],["T_WHITESPACE"," ",130],["T_LNUMBER","1",130],",",["T_WHITESPACE","\n      ",130],["T_CONSTANT_ENCAPSED_STRING","'language_interface[weight][language-url]'",131],["T_WHITESPACE"," ",131],["T_DOUBLE_ARROW","=>",131],["T_WHITESPACE"," ",131],"-",["T_LNUMBER","8",131],",",["T_WHITESPACE","\n    ",131],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","drupalPostForm",133],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",133],",",["T_WHITESPACE"," ",133],["T_VARIABLE","$edit",133],",",["T_WHITESPACE"," ",133],["T_STRING","t",133],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",133],")",")",";",["T_WHITESPACE","\n\n    ",133],["T_COMMENT","\/\/ Change user language preference.\n",135],["T_WHITESPACE","    ",136],["T_VARIABLE","$edit",136],["T_WHITESPACE"," ",136],"=",["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_CONSTANT_ENCAPSED_STRING","'preferred_langcode'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'fr'",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","drupalPostForm",137],"(",["T_CONSTANT_ENCAPSED_STRING","\"user\/\"",137],["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","webUser",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","id",137],"(",")",["T_WHITESPACE"," ",137],".",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","\"\/edit\"",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$edit",137],",",["T_WHITESPACE"," ",137],["T_STRING","t",137],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",137],")",")",";",["T_WHITESPACE","\n\n    ",137],["T_COMMENT","\/\/ Check that the English alias works. In this situation French is the\n",139],["T_WHITESPACE","    ",140],["T_COMMENT","\/\/ current UI and content language, while URL language is English (since we\n",140],["T_WHITESPACE","    ",141],["T_COMMENT","\/\/ do not have a path prefix we fall back to the site's default language).\n",141],["T_WHITESPACE","    ",142],["T_COMMENT","\/\/ We need to ensure that the user language preference is not taken into\n",142],["T_WHITESPACE","    ",143],["T_COMMENT","\/\/ account while determining the path alias language, because if this\n",143],["T_WHITESPACE","    ",144],["T_COMMENT","\/\/ happens we have no way to check that the path alias is valid: there is no\n",144],["T_WHITESPACE","    ",145],["T_COMMENT","\/\/ path alias for French matching the english alias. So the alias manager\n",145],["T_WHITESPACE","    ",146],["T_COMMENT","\/\/ needs to use the URL language to check whether the alias is valid.\n",146],["T_WHITESPACE","    ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalGet",147],"(",["T_VARIABLE","$english_alias",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertText",148],"(",["T_VARIABLE","$english_node_french_translation",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","body",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","value",148],",",["T_WHITESPACE"," ",148],["T_CONSTANT_ENCAPSED_STRING","'English alias, but French preferred by the user: French translation.'",148],")",";",["T_WHITESPACE","\n\n    ",148],["T_COMMENT","\/\/ Check that the French alias works.\n",150],["T_WHITESPACE","    ",151],["T_VARIABLE","$this",151],["T_OBJECT_OPERATOR","->",151],["T_STRING","drupalGet",151],"(","\"",["T_ENCAPSED_AND_WHITESPACE","fr\/",151],["T_VARIABLE","$french_alias",151],"\"",")",";",["T_WHITESPACE","\n    ",151],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","assertText",152],"(",["T_VARIABLE","$english_node_french_translation",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","body",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","value",152],",",["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'Alias for French translation works.'",152],")",";",["T_WHITESPACE","\n\n    ",152],["T_COMMENT","\/\/ Disable URL language negotiation.\n",154],["T_WHITESPACE","    ",155],["T_VARIABLE","$edit",155],["T_WHITESPACE"," ",155],"=",["T_WHITESPACE"," ",155],["T_ARRAY","array",155],"(",["T_CONSTANT_ENCAPSED_STRING","'language_interface[enabled][language-url]'",155],["T_WHITESPACE"," ",155],["T_DOUBLE_ARROW","=>",155],["T_WHITESPACE"," ",155],["T_STRING","FALSE",155],")",";",["T_WHITESPACE","\n    ",155],["T_VARIABLE","$this",156],["T_OBJECT_OPERATOR","->",156],["T_STRING","drupalPostForm",156],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/config\/regional\/language\/detection'",156],",",["T_WHITESPACE"," ",156],["T_VARIABLE","$edit",156],",",["T_WHITESPACE"," ",156],["T_STRING","t",156],"(",["T_CONSTANT_ENCAPSED_STRING","'Save settings'",156],")",")",";",["T_WHITESPACE","\n\n    ",156],["T_COMMENT","\/\/ Check that the English alias still works.\n",158],["T_WHITESPACE","    ",159],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","drupalGet",159],"(",["T_VARIABLE","$english_alias",159],")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertText",160],"(",["T_VARIABLE","$english_node_french_translation",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","body",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","value",160],",",["T_WHITESPACE"," ",160],["T_CONSTANT_ENCAPSED_STRING","'English alias, but French preferred by the user: French translation.'",160],")",";",["T_WHITESPACE","\n\n    ",160],["T_COMMENT","\/\/ Check that the French alias is not available. We check the unprefixed\n",162],["T_WHITESPACE","    ",163],["T_COMMENT","\/\/ alias because we disabled URL language negotiation above. In this\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ situation only aliases in the default language and language neutral ones\n",164],["T_WHITESPACE","    ",165],["T_COMMENT","\/\/ should keep working.\n",165],["T_WHITESPACE","    ",166],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","drupalGet",166],"(",["T_VARIABLE","$french_alias",166],")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertResponse",167],"(",["T_LNUMBER","404",167],",",["T_WHITESPACE"," ",167],["T_CONSTANT_ENCAPSED_STRING","'Alias for French translation is unavailable when URL language negotiation is disabled.'",167],")",";",["T_WHITESPACE","\n\n    ",167],["T_COMMENT","\/\/ The alias manager has an internal path lookup cache. Check to see that\n",169],["T_WHITESPACE","    ",170],["T_COMMENT","\/\/ it has the appropriate contents at this point.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","container",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","get",171],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",171],")",["T_OBJECT_OPERATOR","->",171],["T_STRING","cacheClear",171],"(",")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$french_node_path",172],["T_WHITESPACE"," ",172],"=",["T_WHITESPACE"," ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","container",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","get",172],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",172],")",["T_OBJECT_OPERATOR","->",172],["T_STRING","getPathByAlias",172],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$french_alias",172],",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'fr'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertEqual",173],"(",["T_VARIABLE","$french_node_path",173],",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'\/node\/'",173],["T_WHITESPACE"," ",173],".",["T_WHITESPACE"," ",173],["T_VARIABLE","$english_node_french_translation",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","id",173],"(",")",",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'Normal path works.'",173],")",";",["T_WHITESPACE","\n    ",173],["T_COMMENT","\/\/ Second call should return the same path.\n",174],["T_WHITESPACE","    ",175],["T_VARIABLE","$french_node_path",175],["T_WHITESPACE"," ",175],"=",["T_WHITESPACE"," ",175],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","container",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","get",175],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",175],")",["T_OBJECT_OPERATOR","->",175],["T_STRING","getPathByAlias",175],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",175],["T_WHITESPACE"," ",175],".",["T_WHITESPACE"," ",175],["T_VARIABLE","$french_alias",175],",",["T_WHITESPACE"," ",175],["T_CONSTANT_ENCAPSED_STRING","'fr'",175],")",";",["T_WHITESPACE","\n    ",175],["T_VARIABLE","$this",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","assertEqual",176],"(",["T_VARIABLE","$french_node_path",176],",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'\/node\/'",176],["T_WHITESPACE"," ",176],".",["T_WHITESPACE"," ",176],["T_VARIABLE","$english_node_french_translation",176],["T_OBJECT_OPERATOR","->",176],["T_STRING","id",176],"(",")",",",["T_WHITESPACE"," ",176],["T_CONSTANT_ENCAPSED_STRING","'Normal path is the same.'",176],")",";",["T_WHITESPACE","\n\n    ",176],["T_COMMENT","\/\/ Confirm that the alias works.\n",178],["T_WHITESPACE","    ",179],["T_VARIABLE","$french_node_alias",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","container",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","get",179],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",179],")",["T_OBJECT_OPERATOR","->",179],["T_STRING","getAliasByPath",179],"(",["T_CONSTANT_ENCAPSED_STRING","'\/node\/'",179],["T_WHITESPACE"," ",179],".",["T_WHITESPACE"," ",179],["T_VARIABLE","$english_node_french_translation",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","id",179],"(",")",",",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'fr'",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertEqual",180],"(",["T_VARIABLE","$french_node_alias",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'\/'",180],["T_WHITESPACE"," ",180],".",["T_WHITESPACE"," ",180],["T_VARIABLE","$french_alias",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Alias works.'",180],")",";",["T_WHITESPACE","\n    ",180],["T_COMMENT","\/\/ Second call should return the same alias.\n",181],["T_WHITESPACE","    ",182],["T_VARIABLE","$french_node_alias",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","container",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","get",182],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_manager'",182],")",["T_OBJECT_OPERATOR","->",182],["T_STRING","getAliasByPath",182],"(",["T_CONSTANT_ENCAPSED_STRING","'\/node\/'",182],["T_WHITESPACE"," ",182],".",["T_WHITESPACE"," ",182],["T_VARIABLE","$english_node_french_translation",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","id",182],"(",")",",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'fr'",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertEqual",183],"(",["T_VARIABLE","$french_node_alias",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'\/'",183],["T_WHITESPACE"," ",183],".",["T_WHITESPACE"," ",183],["T_VARIABLE","$french_alias",183],",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'Alias is the same.'",183],")",";",["T_WHITESPACE","\n\n    ",183],["T_COMMENT","\/\/ Confirm that the alias is removed if the translation is deleted.\n",185],["T_WHITESPACE","    ",186],["T_VARIABLE","$english_node",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","removeTranslation",186],"(",["T_CONSTANT_ENCAPSED_STRING","'fr'",186],")",";",["T_WHITESPACE","\n    ",186],["T_VARIABLE","$english_node",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","save",187],"(",")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","assertFalse",188],"(",["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","container",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","get",188],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_storage'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","aliasExists",188],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",188],["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_VARIABLE","$french_alias",188],",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'fr'",188],")",",",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'Alias for French translation is removed when translation is deleted.'",188],")",";",["T_WHITESPACE","\n\n    ",188],["T_COMMENT","\/\/ Check that the English alias still works.\n",190],["T_WHITESPACE","    ",191],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","drupalGet",191],"(",["T_VARIABLE","$english_alias",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertTrue",192],"(",["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","container",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","get",192],"(",["T_CONSTANT_ENCAPSED_STRING","'path.alias_storage'",192],")",["T_OBJECT_OPERATOR","->",192],["T_STRING","aliasExists",192],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",192],["T_WHITESPACE"," ",192],".",["T_WHITESPACE"," ",192],["T_VARIABLE","$english_alias",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'en'",192],")",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'English alias is not deleted when French translation is removed.'",192],")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertText",193],"(",["T_VARIABLE","$english_node",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","body",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","value",193],",",["T_WHITESPACE"," ",193],["T_CONSTANT_ENCAPSED_STRING","'English alias still works'",193],")",";",["T_WHITESPACE","\n  ",193],"}",["T_WHITESPACE","\n\n",194],"}",["T_WHITESPACE","\n",196]]
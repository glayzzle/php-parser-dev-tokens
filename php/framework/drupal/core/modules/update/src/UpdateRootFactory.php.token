[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DrupalKernelInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Symfony",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","HttpFoundation",6],["T_NS_SEPARATOR","\\",6],["T_STRING","RequestStack",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Gets the root path used by the Update Manager to install or update projects.\n *\/",8],["T_WHITESPACE","\n",10],["T_CLASS","class",11],["T_WHITESPACE"," ",11],["T_STRING","UpdateRootFactory",11],["T_WHITESPACE"," ",11],"{",["T_WHITESPACE","\n\n  ",11],["T_DOC_COMMENT","\/**\n   * The Drupal kernel.\n   *\n   * @var \\Drupal\\Core\\DrupalKernelInterface\n   *\/",13],["T_WHITESPACE","\n  ",17],["T_PROTECTED","protected",18],["T_WHITESPACE"," ",18],["T_VARIABLE","$drupalKernel",18],";",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * The request stack.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\RequestStack\n   *\/",20],["T_WHITESPACE","\n  ",24],["T_PROTECTED","protected",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$requestStack",25],";",["T_WHITESPACE","\n\n  ",25],["T_DOC_COMMENT","\/**\n   * Constructs an UpdateRootFactory instance.\n   *\n   * @param \\Drupal\\Core\\DrupalKernelInterface $drupal_kernel\n   *   The Drupal kernel.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   *\/",27],["T_WHITESPACE","\n  ",34],["T_PUBLIC","public",35],["T_WHITESPACE"," ",35],["T_FUNCTION","function",35],["T_WHITESPACE"," ",35],["T_STRING","__construct",35],"(",["T_STRING","DrupalKernelInterface",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$drupal_kernel",35],",",["T_WHITESPACE"," ",35],["T_STRING","RequestStack",35],["T_WHITESPACE"," ",35],["T_VARIABLE","$request_stack",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n    ",35],["T_VARIABLE","$this",36],["T_OBJECT_OPERATOR","->",36],["T_STRING","drupalKernel",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_VARIABLE","$drupal_kernel",36],";",["T_WHITESPACE","\n    ",36],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","requestStack",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$request_stack",37],";",["T_WHITESPACE","\n  ",37],"}",["T_WHITESPACE","\n\n  ",38],["T_DOC_COMMENT","\/**\n   * Gets the root path under which projects are installed or updated.\n   *\n   * The Update Manager will ensure that project files can only be copied to\n   * specific subdirectories of this root path.\n   *\n   * @return string\n   *\/",40],["T_WHITESPACE","\n  ",47],["T_PUBLIC","public",48],["T_WHITESPACE"," ",48],["T_FUNCTION","function",48],["T_WHITESPACE"," ",48],["T_STRING","get",48],"(",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n    ",48],["T_COMMENT","\/\/ Normally the Update Manager's root path is the same as the app root (the\n",49],["T_WHITESPACE","    ",50],["T_COMMENT","\/\/ directory in which the Drupal site is installed).\n",50],["T_WHITESPACE","    ",51],["T_VARIABLE","$root_path",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","drupalKernel",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getAppRoot",51],"(",")",";",["T_WHITESPACE","\n\n    ",51],["T_COMMENT","\/\/ When running in a test site, change the root path to be the testing site\n",53],["T_WHITESPACE","    ",54],["T_COMMENT","\/\/ directory. This ensures that it will always be writable by the webserver\n",54],["T_WHITESPACE","    ",55],["T_COMMENT","\/\/ (thereby allowing the actual extraction and installation of projects by\n",55],["T_WHITESPACE","    ",56],["T_COMMENT","\/\/ the Update Manager to be tested) and also ensures that new project files\n",56],["T_WHITESPACE","    ",57],["T_COMMENT","\/\/ added there won't be visible to the parent site and will be properly\n",57],["T_WHITESPACE","    ",58],["T_COMMENT","\/\/ cleaned up once the test finishes running. This is done here (rather\n",58],["T_WHITESPACE","    ",59],["T_COMMENT","\/\/ than having the tests enable a module which overrides the update root\n",59],["T_WHITESPACE","    ",60],["T_COMMENT","\/\/ factory service) to ensure that the parent site is automatically kept\n",60],["T_WHITESPACE","    ",61],["T_COMMENT","\/\/ clean without relying on test authors to take any explicit steps. See\n",61],["T_WHITESPACE","    ",62],["T_COMMENT","\/\/ also \\Drupal\\update\\Tests\\UpdateTestBase::setUp().\n",62],["T_WHITESPACE","    ",63],["T_IF","if",63],["T_WHITESPACE"," ",63],"(",["T_STRING","DRUPAL_TEST_IN_CHILD_SITE",63],")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$kernel",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","drupalKernel",64],";",["T_WHITESPACE","\n      ",64],["T_VARIABLE","$request",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","requestStack",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","getCurrentRequest",65],"(",")",";",["T_WHITESPACE","\n      ",65],["T_VARIABLE","$root_path",66],["T_WHITESPACE"," ",66],["T_CONCAT_EQUAL",".=",66],["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'\/'",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_VARIABLE","$kernel",66],["T_DOUBLE_COLON","::",66],["T_STRING","findSitePath",66],"(",["T_VARIABLE","$request",66],")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n\n    ",67],["T_RETURN","return",69],["T_WHITESPACE"," ",69],["T_VARIABLE","$root_path",69],";",["T_WHITESPACE","\n  ",69],"}",["T_WHITESPACE","\n\n",70],"}",["T_WHITESPACE","\n",72]]
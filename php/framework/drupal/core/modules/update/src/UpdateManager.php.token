[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigFactoryInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencyInjection",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencySerializationTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Extension",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ModuleHandlerInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Extension",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ThemeHandlerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KeyValueStore",9],["T_NS_SEPARATOR","\\",9],["T_STRING","KeyValueFactoryInterface",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","StringTranslation",10],["T_NS_SEPARATOR","\\",10],["T_STRING","TranslationInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StringTranslation",11],["T_NS_SEPARATOR","\\",11],["T_STRING","StringTranslationTrait",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Utility",12],["T_NS_SEPARATOR","\\",12],["T_STRING","ProjectInfo",12],";",["T_WHITESPACE","\n\n",12],["T_DOC_COMMENT","\/**\n * Default implementation of UpdateManagerInterface.\n *\/",14],["T_WHITESPACE","\n",16],["T_CLASS","class",17],["T_WHITESPACE"," ",17],["T_STRING","UpdateManager",17],["T_WHITESPACE"," ",17],["T_IMPLEMENTS","implements",17],["T_WHITESPACE"," ",17],["T_STRING","UpdateManagerInterface",17],["T_WHITESPACE"," ",17],"{",["T_WHITESPACE","\n  ",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","DependencySerializationTrait",18],";",["T_WHITESPACE","\n  ",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","StringTranslationTrait",19],";",["T_WHITESPACE","\n\n  ",19],["T_DOC_COMMENT","\/**\n   * The update settings\n   *\n   * @var \\Drupal\\Core\\Config\\Config\n   *\/",21],["T_WHITESPACE","\n  ",25],["T_PROTECTED","protected",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$updateSettings",26],";",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Module Handler Service.\n   *\n   * @var \\Drupal\\Core\\Extension\\ModuleHandlerInterface\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_PROTECTED","protected",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$moduleHandler",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * Update Processor Service.\n   *\n   * @var \\Drupal\\update\\UpdateProcessorInterface\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_PROTECTED","protected",40],["T_WHITESPACE"," ",40],["T_VARIABLE","$updateProcessor",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * An array of installed and enabled projects.\n   *\n   * @var array\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$projects",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * The key\/value store.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreExpirableInterface\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$keyValueStore",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * Update available releases key\/value store.\n   *\n   * @var \\Drupal\\Core\\KeyValueStore\\KeyValueStoreExpirableInterface\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$availableReleasesTempStore",61],";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * The theme handler.\n   *\n   * @var \\Drupal\\Core\\Extension\\ThemeHandlerInterface\n   *\/",63],["T_WHITESPACE","\n  ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$themeHandler",68],";",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * Constructs a UpdateManager.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The Module Handler service\n   * @param \\Drupal\\update\\UpdateProcessorInterface $update_processor\n   *   The Update Processor service.\n   * @param \\Drupal\\Core\\StringTranslation\\TranslationInterface $translation\n   *   The translation service.\n   * @param \\Drupal\\Core\\KeyValueStore\\KeyValueFactoryInterface $key_value_expirable_factory\n   *   The expirable key\/value factory.\n   * @param \\Drupal\\Core\\Extension\\ThemeHandlerInterface $theme_handler\n   *   The theme handler.\n   *\/",70],["T_WHITESPACE","\n  ",85],["T_PUBLIC","public",86],["T_WHITESPACE"," ",86],["T_FUNCTION","function",86],["T_WHITESPACE"," ",86],["T_STRING","__construct",86],"(",["T_STRING","ConfigFactoryInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$config_factory",86],",",["T_WHITESPACE"," ",86],["T_STRING","ModuleHandlerInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$module_handler",86],",",["T_WHITESPACE"," ",86],["T_STRING","UpdateProcessorInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$update_processor",86],",",["T_WHITESPACE"," ",86],["T_STRING","TranslationInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$translation",86],",",["T_WHITESPACE"," ",86],["T_STRING","KeyValueFactoryInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$key_value_expirable_factory",86],",",["T_WHITESPACE"," ",86],["T_STRING","ThemeHandlerInterface",86],["T_WHITESPACE"," ",86],["T_VARIABLE","$theme_handler",86],")",["T_WHITESPACE"," ",86],"{",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","updateSettings",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_VARIABLE","$config_factory",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","get",87],"(",["T_CONSTANT_ENCAPSED_STRING","'update.settings'",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","moduleHandler",88],["T_WHITESPACE"," ",88],"=",["T_WHITESPACE"," ",88],["T_VARIABLE","$module_handler",88],";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","updateProcessor",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_VARIABLE","$update_processor",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","stringTranslation",90],["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_VARIABLE","$translation",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","keyValueStore",91],["T_WHITESPACE"," ",91],"=",["T_WHITESPACE"," ",91],["T_VARIABLE","$key_value_expirable_factory",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","get",91],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",91],")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","themeHandler",92],["T_WHITESPACE"," ",92],"=",["T_WHITESPACE"," ",92],["T_VARIABLE","$theme_handler",92],";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","availableReleasesTempStore",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$key_value_expirable_factory",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","get",93],"(",["T_CONSTANT_ENCAPSED_STRING","'update_available_releases'",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","projects",94],["T_WHITESPACE"," ",94],"=",["T_WHITESPACE"," ",94],["T_ARRAY","array",94],"(",")",";",["T_WHITESPACE","\n  ",94],"}",["T_WHITESPACE","\n\n  ",95],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",97],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","refreshUpdateData",100],"(",")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ Since we're fetching new available update data, we want to clear\n",102],["T_WHITESPACE","    ",103],["T_COMMENT","\/\/ of both the projects we care about, and the current update status of the\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ site. We do *not* want to clear the cache of available releases just yet,\n",104],["T_WHITESPACE","    ",105],["T_COMMENT","\/\/ since that data (even if it's stale) can be useful during\n",105],["T_WHITESPACE","    ",106],["T_COMMENT","\/\/ \\Drupal\\Update\\UpdateManager::getProjects(); for example, to modules\n",106],["T_WHITESPACE","    ",107],["T_COMMENT","\/\/ that implement hook_system_info_alter() such as cvs_deploy.\n",107],["T_WHITESPACE","    ",108],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","keyValueStore",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","delete",108],"(",["T_CONSTANT_ENCAPSED_STRING","'update_project_projects'",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","keyValueStore",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","delete",109],"(",["T_CONSTANT_ENCAPSED_STRING","'update_project_data'",109],")",";",["T_WHITESPACE","\n\n    ",109],["T_VARIABLE","$projects",111],["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","getProjects",111],"(",")",";",["T_WHITESPACE","\n\n    ",111],["T_COMMENT","\/\/ Now that we have the list of projects, we should also clear the available\n",113],["T_WHITESPACE","    ",114],["T_COMMENT","\/\/ release data, since even if we fail to fetch new data, we need to clear\n",114],["T_WHITESPACE","    ",115],["T_COMMENT","\/\/ out the stale data at this point.\n",115],["T_WHITESPACE","    ",116],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","availableReleasesTempStore",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","deleteAll",116],"(",")",";",["T_WHITESPACE","\n\n    ",116],["T_FOREACH","foreach",118],["T_WHITESPACE"," ",118],"(",["T_VARIABLE","$projects",118],["T_WHITESPACE"," ",118],["T_AS","as",118],["T_WHITESPACE"," ",118],["T_VARIABLE","$project",118],")",["T_WHITESPACE"," ",118],"{",["T_WHITESPACE","\n      ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","updateProcessor",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","createFetchTask",119],"(",["T_VARIABLE","$project",119],")",";",["T_WHITESPACE","\n    ",119],"}",["T_WHITESPACE","\n  ",120],"}",["T_WHITESPACE","\n\n  ",121],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",123],["T_WHITESPACE","\n  ",125],["T_PUBLIC","public",126],["T_WHITESPACE"," ",126],["T_FUNCTION","function",126],["T_WHITESPACE"," ",126],["T_STRING","getProjects",126],"(",")",["T_WHITESPACE"," ",126],"{",["T_WHITESPACE","\n    ",126],["T_IF","if",127],["T_WHITESPACE"," ",127],"(",["T_EMPTY","empty",127],"(",["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","projects",127],")",")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n      ",127],["T_COMMENT","\/\/ Retrieve the projects from storage, if present.\n",128],["T_WHITESPACE","      ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","projects",129],["T_WHITESPACE"," ",129],"=",["T_WHITESPACE"," ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","projectStorage",129],"(",["T_CONSTANT_ENCAPSED_STRING","'update_project_projects'",129],")",";",["T_WHITESPACE","\n      ",129],["T_IF","if",130],["T_WHITESPACE"," ",130],"(",["T_EMPTY","empty",130],"(",["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","projects",130],")",")",["T_WHITESPACE"," ",130],"{",["T_WHITESPACE","\n        ",130],["T_COMMENT","\/\/ Still empty, so we have to rebuild.\n",131],["T_WHITESPACE","        ",132],["T_VARIABLE","$module_data",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","system_rebuild_module_data",132],"(",")",";",["T_WHITESPACE","\n        ",132],["T_VARIABLE","$theme_data",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","themeHandler",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","rebuildThemeData",133],"(",")",";",["T_WHITESPACE","\n        ",133],["T_VARIABLE","$project_info",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_NEW","new",134],["T_WHITESPACE"," ",134],["T_STRING","ProjectInfo",134],"(",")",";",["T_WHITESPACE","\n        ",134],["T_VARIABLE","$project_info",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","processInfoList",135],"(",["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","projects",135],",",["T_WHITESPACE"," ",135],["T_VARIABLE","$module_data",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","'module'",135],",",["T_WHITESPACE"," ",135],["T_STRING","TRUE",135],")",";",["T_WHITESPACE","\n        ",135],["T_VARIABLE","$project_info",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","processInfoList",136],"(",["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","projects",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$theme_data",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'theme'",136],",",["T_WHITESPACE"," ",136],["T_STRING","TRUE",136],")",";",["T_WHITESPACE","\n        ",136],["T_IF","if",137],["T_WHITESPACE"," ",137],"(",["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","updateSettings",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","get",137],"(",["T_CONSTANT_ENCAPSED_STRING","'check.disabled_extensions'",137],")",")",["T_WHITESPACE"," ",137],"{",["T_WHITESPACE","\n          ",137],["T_VARIABLE","$project_info",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","processInfoList",138],"(",["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","projects",138],",",["T_WHITESPACE"," ",138],["T_VARIABLE","$module_data",138],",",["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'module'",138],",",["T_WHITESPACE"," ",138],["T_STRING","FALSE",138],")",";",["T_WHITESPACE","\n          ",138],["T_VARIABLE","$project_info",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","processInfoList",139],"(",["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","projects",139],",",["T_WHITESPACE"," ",139],["T_VARIABLE","$theme_data",139],",",["T_WHITESPACE"," ",139],["T_CONSTANT_ENCAPSED_STRING","'theme'",139],",",["T_WHITESPACE"," ",139],["T_STRING","FALSE",139],")",";",["T_WHITESPACE","\n        ",139],"}",["T_WHITESPACE","\n        ",140],["T_COMMENT","\/\/ Allow other modules to alter projects before fetching and comparing.\n",141],["T_WHITESPACE","        ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","moduleHandler",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","alter",142],"(",["T_CONSTANT_ENCAPSED_STRING","'update_projects'",142],",",["T_WHITESPACE"," ",142],["T_VARIABLE","$this",142],["T_OBJECT_OPERATOR","->",142],["T_STRING","projects",142],")",";",["T_WHITESPACE","\n        ",142],["T_COMMENT","\/\/ Store the site's project data for at most 1 hour.\n",143],["T_WHITESPACE","        ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","keyValueStore",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","setWithExpire",144],"(",["T_CONSTANT_ENCAPSED_STRING","'update_project_projects'",144],",",["T_WHITESPACE"," ",144],["T_VARIABLE","$this",144],["T_OBJECT_OPERATOR","->",144],["T_STRING","projects",144],",",["T_WHITESPACE"," ",144],["T_LNUMBER","3600",144],")",";",["T_WHITESPACE","\n      ",144],"}",["T_WHITESPACE","\n    ",145],"}",["T_WHITESPACE","\n    ",146],["T_RETURN","return",147],["T_WHITESPACE"," ",147],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","projects",147],";",["T_WHITESPACE","\n  ",147],"}",["T_WHITESPACE","\n\n  ",148],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",150],["T_WHITESPACE","\n  ",152],["T_PUBLIC","public",153],["T_WHITESPACE"," ",153],["T_FUNCTION","function",153],["T_WHITESPACE"," ",153],["T_STRING","projectStorage",153],"(",["T_VARIABLE","$key",153],")",["T_WHITESPACE"," ",153],"{",["T_WHITESPACE","\n    ",153],["T_VARIABLE","$projects",154],["T_WHITESPACE"," ",154],"=",["T_WHITESPACE"," ",154],["T_ARRAY","array",154],"(",")",";",["T_WHITESPACE","\n\n    ",154],["T_COMMENT","\/\/ On certain paths, we should clear the data and recompute the projects for\n",156],["T_WHITESPACE","    ",157],["T_COMMENT","\/\/ update status of the site to avoid presenting stale information.\n",157],["T_WHITESPACE","    ",158],["T_VARIABLE","$route_names",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_ARRAY","array",158],"(",["T_WHITESPACE","\n      ",158],["T_CONSTANT_ENCAPSED_STRING","'update.theme_update'",159],",",["T_WHITESPACE","\n      ",159],["T_CONSTANT_ENCAPSED_STRING","'system.modules_list'",160],",",["T_WHITESPACE","\n      ",160],["T_CONSTANT_ENCAPSED_STRING","'system.theme_install'",161],",",["T_WHITESPACE","\n      ",161],["T_CONSTANT_ENCAPSED_STRING","'update.module_update'",162],",",["T_WHITESPACE","\n      ",162],["T_CONSTANT_ENCAPSED_STRING","'update.module_install'",163],",",["T_WHITESPACE","\n      ",163],["T_CONSTANT_ENCAPSED_STRING","'update.status'",164],",",["T_WHITESPACE","\n      ",164],["T_CONSTANT_ENCAPSED_STRING","'update.report_update'",165],",",["T_WHITESPACE","\n      ",165],["T_CONSTANT_ENCAPSED_STRING","'update.report_install'",166],",",["T_WHITESPACE","\n      ",166],["T_CONSTANT_ENCAPSED_STRING","'update.settings'",167],",",["T_WHITESPACE","\n      ",167],["T_CONSTANT_ENCAPSED_STRING","'system.status'",168],",",["T_WHITESPACE","\n      ",168],["T_CONSTANT_ENCAPSED_STRING","'update.manual_status'",169],",",["T_WHITESPACE","\n      ",169],["T_CONSTANT_ENCAPSED_STRING","'update.confirmation_page'",170],",",["T_WHITESPACE","\n      ",170],["T_CONSTANT_ENCAPSED_STRING","'system.themes_page'",171],",",["T_WHITESPACE","\n    ",171],")",";",["T_WHITESPACE","\n    ",172],["T_IF","if",173],["T_WHITESPACE"," ",173],"(",["T_STRING","in_array",173],"(",["T_NS_SEPARATOR","\\",173],["T_STRING","Drupal",173],["T_DOUBLE_COLON","::",173],["T_STRING","routeMatch",173],"(",")",["T_OBJECT_OPERATOR","->",173],["T_STRING","getRouteName",173],"(",")",",",["T_WHITESPACE"," ",173],["T_VARIABLE","$route_names",173],")",")",["T_WHITESPACE"," ",173],"{",["T_WHITESPACE","\n      ",173],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","keyValueStore",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","delete",174],"(",["T_VARIABLE","$key",174],")",";",["T_WHITESPACE","\n    ",174],"}",["T_WHITESPACE","\n    ",175],["T_ELSE","else",176],["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_VARIABLE","$projects",177],["T_WHITESPACE"," ",177],"=",["T_WHITESPACE"," ",177],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","keyValueStore",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","get",177],"(",["T_VARIABLE","$key",177],",",["T_WHITESPACE"," ",177],["T_ARRAY","array",177],"(",")",")",";",["T_WHITESPACE","\n    ",177],"}",["T_WHITESPACE","\n    ",178],["T_RETURN","return",179],["T_WHITESPACE"," ",179],["T_VARIABLE","$projects",179],";",["T_WHITESPACE","\n  ",179],"}",["T_WHITESPACE","\n\n  ",180],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",182],["T_WHITESPACE","\n  ",184],["T_PUBLIC","public",185],["T_WHITESPACE"," ",185],["T_FUNCTION","function",185],["T_WHITESPACE"," ",185],["T_STRING","fetchDataBatch",185],"(","&",["T_VARIABLE","$context",185],")",["T_WHITESPACE"," ",185],"{",["T_WHITESPACE","\n    ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(",["T_EMPTY","empty",186],"(",["T_VARIABLE","$context",186],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",186],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max'",186],"]",")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n      ",186],["T_VARIABLE","$context",187],"[",["T_CONSTANT_ENCAPSED_STRING","'finished'",187],"]",["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_LNUMBER","0",187],";",["T_WHITESPACE","\n      ",187],["T_VARIABLE","$context",188],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",188],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max'",188],"]",["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","updateProcessor",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","numberOfQueueItems",188],"(",")",";",["T_WHITESPACE","\n      ",188],["T_VARIABLE","$context",189],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",189],"]","[",["T_CONSTANT_ENCAPSED_STRING","'progress'",189],"]",["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_LNUMBER","0",189],";",["T_WHITESPACE","\n      ",189],["T_VARIABLE","$context",190],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",190],"]",["T_WHITESPACE"," ",190],"=",["T_WHITESPACE"," ",190],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","t",190],"(",["T_CONSTANT_ENCAPSED_STRING","'Checking available update data ...'",190],")",";",["T_WHITESPACE","\n      ",190],["T_VARIABLE","$context",191],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",191],"]","[",["T_CONSTANT_ENCAPSED_STRING","'updated'",191],"]",["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_LNUMBER","0",191],";",["T_WHITESPACE","\n      ",191],["T_VARIABLE","$context",192],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",192],"]","[",["T_CONSTANT_ENCAPSED_STRING","'failures'",192],"]",["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_LNUMBER","0",192],";",["T_WHITESPACE","\n      ",192],["T_VARIABLE","$context",193],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",193],"]","[",["T_CONSTANT_ENCAPSED_STRING","'processed'",193],"]",["T_WHITESPACE"," ",193],"=",["T_WHITESPACE"," ",193],["T_LNUMBER","0",193],";",["T_WHITESPACE","\n    ",193],"}",["T_WHITESPACE","\n\n    ",194],["T_COMMENT","\/\/ Grab another item from the fetch queue.\n",196],["T_WHITESPACE","    ",197],["T_FOR","for",197],["T_WHITESPACE"," ",197],"(",["T_VARIABLE","$i",197],["T_WHITESPACE"," ",197],"=",["T_WHITESPACE"," ",197],["T_LNUMBER","0",197],";",["T_WHITESPACE"," ",197],["T_VARIABLE","$i",197],["T_WHITESPACE"," ",197],"<",["T_WHITESPACE"," ",197],["T_LNUMBER","5",197],";",["T_WHITESPACE"," ",197],["T_VARIABLE","$i",197],["T_INC","++",197],")",["T_WHITESPACE"," ",197],"{",["T_WHITESPACE","\n      ",197],["T_IF","if",198],["T_WHITESPACE"," ",198],"(",["T_VARIABLE","$item",198],["T_WHITESPACE"," ",198],"=",["T_WHITESPACE"," ",198],["T_VARIABLE","$this",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","updateProcessor",198],["T_OBJECT_OPERATOR","->",198],["T_STRING","claimQueueItem",198],"(",")",")",["T_WHITESPACE"," ",198],"{",["T_WHITESPACE","\n        ",198],["T_IF","if",199],["T_WHITESPACE"," ",199],"(",["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","updateProcessor",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","processFetchTask",199],"(",["T_VARIABLE","$item",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","data",199],")",")",["T_WHITESPACE"," ",199],"{",["T_WHITESPACE","\n          ",199],["T_VARIABLE","$context",200],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",200],"]","[",["T_CONSTANT_ENCAPSED_STRING","'updated'",200],"]",["T_INC","++",200],";",["T_WHITESPACE","\n          ",200],["T_VARIABLE","$context",201],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",201],"]",["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","t",201],"(",["T_CONSTANT_ENCAPSED_STRING","'Checked available update data for %title.'",201],",",["T_WHITESPACE"," ",201],["T_ARRAY","array",201],"(",["T_CONSTANT_ENCAPSED_STRING","'%title'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_VARIABLE","$item",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","data",201],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",201],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",201],"]",")",")",";",["T_WHITESPACE","\n        ",201],"}",["T_WHITESPACE","\n        ",202],["T_ELSE","else",203],["T_WHITESPACE"," ",203],"{",["T_WHITESPACE","\n          ",203],["T_VARIABLE","$context",204],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",204],"]",["T_WHITESPACE"," ",204],"=",["T_WHITESPACE"," ",204],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","t",204],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to check available update data for %title.'",204],",",["T_WHITESPACE"," ",204],["T_ARRAY","array",204],"(",["T_CONSTANT_ENCAPSED_STRING","'%title'",204],["T_WHITESPACE"," ",204],["T_DOUBLE_ARROW","=>",204],["T_WHITESPACE"," ",204],["T_VARIABLE","$item",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","data",204],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",204],"]","[",["T_CONSTANT_ENCAPSED_STRING","'name'",204],"]",")",")",";",["T_WHITESPACE","\n          ",204],["T_VARIABLE","$context",205],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",205],"]","[",["T_CONSTANT_ENCAPSED_STRING","'failures'",205],"]",["T_INC","++",205],";",["T_WHITESPACE","\n        ",205],"}",["T_WHITESPACE","\n        ",206],["T_VARIABLE","$context",207],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",207],"]","[",["T_CONSTANT_ENCAPSED_STRING","'progress'",207],"]",["T_INC","++",207],";",["T_WHITESPACE","\n        ",207],["T_VARIABLE","$context",208],"[",["T_CONSTANT_ENCAPSED_STRING","'results'",208],"]","[",["T_CONSTANT_ENCAPSED_STRING","'processed'",208],"]",["T_INC","++",208],";",["T_WHITESPACE","\n        ",208],["T_VARIABLE","$context",209],"[",["T_CONSTANT_ENCAPSED_STRING","'finished'",209],"]",["T_WHITESPACE"," ",209],"=",["T_WHITESPACE"," ",209],["T_VARIABLE","$context",209],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",209],"]","[",["T_CONSTANT_ENCAPSED_STRING","'progress'",209],"]",["T_WHITESPACE"," ",209],"\/",["T_WHITESPACE"," ",209],["T_VARIABLE","$context",209],"[",["T_CONSTANT_ENCAPSED_STRING","'sandbox'",209],"]","[",["T_CONSTANT_ENCAPSED_STRING","'max'",209],"]",";",["T_WHITESPACE","\n        ",209],["T_VARIABLE","$this",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","updateProcessor",210],["T_OBJECT_OPERATOR","->",210],["T_STRING","deleteQueueItem",210],"(",["T_VARIABLE","$item",210],")",";",["T_WHITESPACE","\n      ",210],"}",["T_WHITESPACE","\n      ",211],["T_ELSE","else",212],["T_WHITESPACE"," ",212],"{",["T_WHITESPACE","\n        ",212],["T_COMMENT","\/\/ If the queue is currently empty, we're done. It's possible that\n",213],["T_WHITESPACE","        ",214],["T_COMMENT","\/\/ another thread might have added new fetch tasks while we were\n",214],["T_WHITESPACE","        ",215],["T_COMMENT","\/\/ processing this batch. In that case, the usual 'finished' math could\n",215],["T_WHITESPACE","        ",216],["T_COMMENT","\/\/ get confused, since we'd end up processing more tasks that we thought\n",216],["T_WHITESPACE","        ",217],["T_COMMENT","\/\/ we had when we started and initialized 'max' with numberOfItems(). By\n",217],["T_WHITESPACE","        ",218],["T_COMMENT","\/\/ forcing 'finished' to be exactly 1 here, we ensure that batch\n",218],["T_WHITESPACE","        ",219],["T_COMMENT","\/\/ processing is terminated.\n",219],["T_WHITESPACE","        ",220],["T_VARIABLE","$context",220],"[",["T_CONSTANT_ENCAPSED_STRING","'finished'",220],"]",["T_WHITESPACE"," ",220],"=",["T_WHITESPACE"," ",220],["T_LNUMBER","1",220],";",["T_WHITESPACE","\n        ",220],["T_RETURN","return",221],";",["T_WHITESPACE","\n      ",221],"}",["T_WHITESPACE","\n    ",222],"}",["T_WHITESPACE","\n  ",223],"}",["T_WHITESPACE","\n\n",224],"}",["T_WHITESPACE","\n",226]]
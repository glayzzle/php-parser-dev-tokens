[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","update",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Url",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","ProjectInfo",6],";",["T_WHITESPACE","\n\n",6],["T_DOC_COMMENT","\/**\n * Tests how the Update Manager module handles contributed modules and themes in\n * a series of functional tests using mock XML data.\n *\n * @group update\n *\/",8],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","UpdateContribTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","UpdateTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'update'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","setUp",24],"(",")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$admin_user",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","drupalCreateUser",25],"(",["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",25],")",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","drupalLogin",26],"(",["T_VARIABLE","$admin_user",26],")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Tests when there is no available release data for a contrib module.\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","testNoReleasesAvailable",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_VARIABLE","$system_info",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_WHITESPACE","\n      ",33],["T_CONSTANT_ENCAPSED_STRING","'#all'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_ARRAY","array",34],"(",["T_WHITESPACE","\n        ",34],["T_CONSTANT_ENCAPSED_STRING","'version'",35],["T_WHITESPACE"," ",35],["T_DOUBLE_ARROW","=>",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",35],",",["T_WHITESPACE","\n      ",35],")",",",["T_WHITESPACE","\n      ",36],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",37],["T_WHITESPACE"," ",37],["T_DOUBLE_ARROW","=>",37],["T_WHITESPACE"," ",37],["T_ARRAY","array",37],"(",["T_WHITESPACE","\n        ",37],["T_CONSTANT_ENCAPSED_STRING","'project'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",38],",",["T_WHITESPACE","\n        ",38],["T_CONSTANT_ENCAPSED_STRING","'version'",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",39],",",["T_WHITESPACE","\n        ",39],["T_CONSTANT_ENCAPSED_STRING","'hidden'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_STRING","FALSE",40],",",["T_WHITESPACE","\n      ",40],")",",",["T_WHITESPACE","\n    ",41],")",";",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","config",43],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","set",43],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$system_info",43],")",["T_OBJECT_OPERATOR","->",43],["T_STRING","save",43],"(",")",";",["T_WHITESPACE","\n    ",43],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","refreshUpdateStatus",44],"(",["T_ARRAY","array",44],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'0.0'",44],",",["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",44],["T_WHITESPACE"," ",44],["T_DOUBLE_ARROW","=>",44],["T_WHITESPACE"," ",44],["T_CONSTANT_ENCAPSED_STRING","'no-releases'",44],")",")",";",["T_WHITESPACE","\n    ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","drupalGet",45],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates'",45],")",";",["T_WHITESPACE","\n    ",45],["T_COMMENT","\/\/ Cannot use $this->standardTests() because we need to check for the\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ 'No available releases found' string.\n",47],["T_WHITESPACE","    ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertRaw",48],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>'",48],["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_STRING","t",48],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal core'",48],")",["T_WHITESPACE"," ",48],".",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'<\/h3>'",48],")",";",["T_WHITESPACE","\n    ",48],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","assertRaw",49],"(",["T_NS_SEPARATOR","\\",49],["T_STRING","Drupal",49],["T_DOUBLE_COLON","::",49],["T_STRING","l",49],"(",["T_STRING","t",49],"(",["T_CONSTANT_ENCAPSED_STRING","'Drupal'",49],")",",",["T_WHITESPACE"," ",49],["T_STRING","Url",49],["T_DOUBLE_COLON","::",49],["T_STRING","fromUri",49],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/drupal'",49],")",")",")",";",["T_WHITESPACE","\n    ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","assertText",50],"(",["T_STRING","t",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Up to date'",50],")",")",";",["T_WHITESPACE","\n    ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","assertRaw",51],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>'",51],["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_STRING","t",51],"(",["T_CONSTANT_ENCAPSED_STRING","'Modules'",51],")",["T_WHITESPACE"," ",51],".",["T_WHITESPACE"," ",51],["T_CONSTANT_ENCAPSED_STRING","'<\/h3>'",51],")",";",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertNoText",52],"(",["T_STRING","t",52],"(",["T_CONSTANT_ENCAPSED_STRING","'Update available'",52],")",")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertText",53],"(",["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'No available releases found'",53],")",")",";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertNoRaw",54],"(",["T_NS_SEPARATOR","\\",54],["T_STRING","Drupal",54],["T_DOUBLE_COLON","::",54],["T_STRING","l",54],"(",["T_STRING","t",54],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",54],")",",",["T_WHITESPACE"," ",54],["T_STRING","Url",54],["T_DOUBLE_COLON","::",54],["T_STRING","fromUri",54],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",54],")",")",")",";",["T_WHITESPACE","\n\n    ",54],["T_VARIABLE","$available",56],["T_WHITESPACE"," ",56],"=",["T_WHITESPACE"," ",56],["T_STRING","update_get_available",56],"(",")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertFalse",57],"(",["T_ISSET","isset",57],"(",["T_VARIABLE","$available",57],"[",["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",57],"]","[",["T_CONSTANT_ENCAPSED_STRING","'fetch_status'",57],"]",")",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Results are cached even if no releases are available.'",57],")",";",["T_WHITESPACE","\n  ",57],"}",["T_WHITESPACE","\n\n  ",58],["T_DOC_COMMENT","\/**\n   * Tests the basic functionality of a contrib module on the status report.\n   *\/",60],["T_WHITESPACE","\n  ",62],["T_FUNCTION","function",63],["T_WHITESPACE"," ",63],["T_STRING","testUpdateContribBasic",63],"(",")",["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$project_link",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_NS_SEPARATOR","\\",64],["T_STRING","Drupal",64],["T_DOUBLE_COLON","::",64],["T_STRING","l",64],"(",["T_STRING","t",64],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",64],")",",",["T_WHITESPACE"," ",64],["T_STRING","Url",64],["T_DOUBLE_COLON","::",64],["T_STRING","fromUri",64],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",64],")",")",";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$system_info",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_WHITESPACE","\n      ",65],["T_CONSTANT_ENCAPSED_STRING","'#all'",66],["T_WHITESPACE"," ",66],["T_DOUBLE_ARROW","=>",66],["T_WHITESPACE"," ",66],["T_ARRAY","array",66],"(",["T_WHITESPACE","\n        ",66],["T_CONSTANT_ENCAPSED_STRING","'version'",67],["T_WHITESPACE"," ",67],["T_DOUBLE_ARROW","=>",67],["T_WHITESPACE"," ",67],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",67],",",["T_WHITESPACE","\n      ",67],")",",",["T_WHITESPACE","\n      ",68],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",69],["T_WHITESPACE"," ",69],["T_DOUBLE_ARROW","=>",69],["T_WHITESPACE"," ",69],["T_ARRAY","array",69],"(",["T_WHITESPACE","\n        ",69],["T_CONSTANT_ENCAPSED_STRING","'project'",70],["T_WHITESPACE"," ",70],["T_DOUBLE_ARROW","=>",70],["T_WHITESPACE"," ",70],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",70],",",["T_WHITESPACE","\n        ",70],["T_CONSTANT_ENCAPSED_STRING","'version'",71],["T_WHITESPACE"," ",71],["T_DOUBLE_ARROW","=>",71],["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",71],",",["T_WHITESPACE","\n        ",71],["T_CONSTANT_ENCAPSED_STRING","'hidden'",72],["T_WHITESPACE"," ",72],["T_DOUBLE_ARROW","=>",72],["T_WHITESPACE"," ",72],["T_STRING","FALSE",72],",",["T_WHITESPACE","\n      ",72],")",",",["T_WHITESPACE","\n    ",73],")",";",["T_WHITESPACE","\n    ",74],["T_VARIABLE","$this",75],["T_OBJECT_OPERATOR","->",75],["T_STRING","config",75],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","set",75],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",75],",",["T_WHITESPACE"," ",75],["T_VARIABLE","$system_info",75],")",["T_OBJECT_OPERATOR","->",75],["T_STRING","save",75],"(",")",";",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","refreshUpdateStatus",76],"(",["T_WHITESPACE","\n      ",76],["T_ARRAY","array",77],"(",["T_WHITESPACE","\n        ",77],["T_CONSTANT_ENCAPSED_STRING","'drupal'",78],["T_WHITESPACE"," ",78],["T_DOUBLE_ARROW","=>",78],["T_WHITESPACE"," ",78],["T_CONSTANT_ENCAPSED_STRING","'0.0'",78],",",["T_WHITESPACE","\n        ",78],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'1_0'",79],",",["T_WHITESPACE","\n      ",79],")",["T_WHITESPACE","\n    ",80],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","standardTests",82],"(",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertText",83],"(",["T_STRING","t",83],"(",["T_CONSTANT_ENCAPSED_STRING","'Up to date'",83],")",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertRaw",84],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>'",84],["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Modules'",84],")",["T_WHITESPACE"," ",84],".",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'<\/h3>'",84],")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertNoText",85],"(",["T_STRING","t",85],"(",["T_CONSTANT_ENCAPSED_STRING","'Update available'",85],")",")",";",["T_WHITESPACE","\n    ",85],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","assertRaw",86],"(",["T_VARIABLE","$project_link",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project appears.'",86],")",";",["T_WHITESPACE","\n\n    ",86],["T_COMMENT","\/\/ Since aaa_update_test is installed the fact it is hidden and in the\n",88],["T_WHITESPACE","    ",89],["T_COMMENT","\/\/ Testing package means it should not appear.\n",89],["T_WHITESPACE","    ",90],["T_VARIABLE","$system_info",90],"[",["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",90],"]","[",["T_CONSTANT_ENCAPSED_STRING","'hidden'",90],"]",["T_WHITESPACE"," ",90],"=",["T_WHITESPACE"," ",90],["T_STRING","TRUE",90],";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","config",91],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","set",91],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",91],",",["T_WHITESPACE"," ",91],["T_VARIABLE","$system_info",91],")",["T_OBJECT_OPERATOR","->",91],["T_STRING","save",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","refreshUpdateStatus",92],"(",["T_WHITESPACE","\n      ",92],["T_ARRAY","array",93],"(",["T_WHITESPACE","\n        ",93],["T_CONSTANT_ENCAPSED_STRING","'drupal'",94],["T_WHITESPACE"," ",94],["T_DOUBLE_ARROW","=>",94],["T_WHITESPACE"," ",94],["T_CONSTANT_ENCAPSED_STRING","'0.0'",94],",",["T_WHITESPACE","\n        ",94],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_CONSTANT_ENCAPSED_STRING","'1_0'",95],",",["T_WHITESPACE","\n      ",95],")",["T_WHITESPACE","\n    ",96],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertNoRaw",98],"(",["T_VARIABLE","$project_link",98],",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project does not appear.'",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ A hidden and installed project not in the Testing package should appear.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$system_info",101],"[",["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",101],"]","[",["T_CONSTANT_ENCAPSED_STRING","'package'",101],"]",["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",101],";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","config",102],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","set",102],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",102],",",["T_WHITESPACE"," ",102],["T_VARIABLE","$system_info",102],")",["T_OBJECT_OPERATOR","->",102],["T_STRING","save",102],"(",")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","refreshUpdateStatus",103],"(",["T_WHITESPACE","\n      ",103],["T_ARRAY","array",104],"(",["T_WHITESPACE","\n        ",104],["T_CONSTANT_ENCAPSED_STRING","'drupal'",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'0.0'",105],",",["T_WHITESPACE","\n        ",105],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",106],["T_WHITESPACE"," ",106],["T_DOUBLE_ARROW","=>",106],["T_WHITESPACE"," ",106],["T_CONSTANT_ENCAPSED_STRING","'1_0'",106],",",["T_WHITESPACE","\n      ",106],")",["T_WHITESPACE","\n    ",107],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertRaw",109],"(",["T_VARIABLE","$project_link",109],",",["T_WHITESPACE"," ",109],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project appears.'",109],")",";",["T_WHITESPACE","\n  ",109],"}",["T_WHITESPACE","\n\n  ",110],["T_DOC_COMMENT","\/**\n   * Tests that contrib projects are ordered by project name.\n   *\n   * If a project contains multiple modules, we want to make sure that the\n   * available updates report is sorted by the parent project names, not by the\n   * names of the modules included in each project. In this test case, we have\n   * two contrib projects, \"BBB Update test\" and \"CCC Update test\". However, we\n   * have a module called \"aaa_update_test\" that's part of the \"CCC Update test\"\n   * project. We need to make sure that we see the \"BBB\" project before the\n   * \"CCC\" project, even though \"CCC\" includes a module that's processed first\n   * if you sort alphabetically by module name (which is the order we see things\n   * inside system_rebuild_module_data() for example).\n   *\/",112],["T_WHITESPACE","\n  ",124],["T_FUNCTION","function",125],["T_WHITESPACE"," ",125],["T_STRING","testUpdateContribOrder",125],"(",")",["T_WHITESPACE"," ",125],"{",["T_WHITESPACE","\n    ",125],["T_COMMENT","\/\/ We want core to be version 8.0.0.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$system_info",127],["T_WHITESPACE"," ",127],"=",["T_WHITESPACE"," ",127],["T_ARRAY","array",127],"(",["T_WHITESPACE","\n      ",127],["T_CONSTANT_ENCAPSED_STRING","'#all'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_WHITESPACE","\n        ",128],["T_CONSTANT_ENCAPSED_STRING","'version'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",129],",",["T_WHITESPACE","\n      ",129],")",",",["T_WHITESPACE","\n      ",130],["T_COMMENT","\/\/ All the rest should be visible as contrib modules at version 8.x-1.0.\n",131],["T_WHITESPACE","\n      ",132],["T_COMMENT","\/\/ aaa_update_test needs to be part of the \"CCC Update test\" project,\n",133],["T_WHITESPACE","      ",134],["T_COMMENT","\/\/ which would throw off the report if we weren't properly sorting by\n",134],["T_WHITESPACE","      ",135],["T_COMMENT","\/\/ the project names.\n",135],["T_WHITESPACE","      ",136],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",136],["T_WHITESPACE"," ",136],["T_DOUBLE_ARROW","=>",136],["T_WHITESPACE"," ",136],["T_ARRAY","array",136],"(",["T_WHITESPACE","\n        ",136],["T_CONSTANT_ENCAPSED_STRING","'project'",137],["T_WHITESPACE"," ",137],["T_DOUBLE_ARROW","=>",137],["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",137],",",["T_WHITESPACE","\n        ",137],["T_CONSTANT_ENCAPSED_STRING","'version'",138],["T_WHITESPACE"," ",138],["T_DOUBLE_ARROW","=>",138],["T_WHITESPACE"," ",138],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",138],",",["T_WHITESPACE","\n        ",138],["T_CONSTANT_ENCAPSED_STRING","'hidden'",139],["T_WHITESPACE"," ",139],["T_DOUBLE_ARROW","=>",139],["T_WHITESPACE"," ",139],["T_STRING","FALSE",139],",",["T_WHITESPACE","\n      ",139],")",",",["T_WHITESPACE","\n\n      ",140],["T_COMMENT","\/\/ This should be its own project, and listed first on the report.\n",142],["T_WHITESPACE","      ",143],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",143],["T_WHITESPACE"," ",143],["T_DOUBLE_ARROW","=>",143],["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_WHITESPACE","\n        ",143],["T_CONSTANT_ENCAPSED_STRING","'project'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",144],",",["T_WHITESPACE","\n        ",144],["T_CONSTANT_ENCAPSED_STRING","'version'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",145],",",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'hidden'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_STRING","FALSE",146],",",["T_WHITESPACE","\n      ",146],")",",",["T_WHITESPACE","\n\n      ",147],["T_COMMENT","\/\/ This will contain both aaa_update_test and ccc_update_test, and\n",149],["T_WHITESPACE","      ",150],["T_COMMENT","\/\/ should come after the bbb_update_test project.\n",150],["T_WHITESPACE","      ",151],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_WHITESPACE","\n        ",151],["T_CONSTANT_ENCAPSED_STRING","'project'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",152],",",["T_WHITESPACE","\n        ",152],["T_CONSTANT_ENCAPSED_STRING","'version'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",153],",",["T_WHITESPACE","\n        ",153],["T_CONSTANT_ENCAPSED_STRING","'hidden'",154],["T_WHITESPACE"," ",154],["T_DOUBLE_ARROW","=>",154],["T_WHITESPACE"," ",154],["T_STRING","FALSE",154],",",["T_WHITESPACE","\n      ",154],")",",",["T_WHITESPACE","\n    ",155],")",";",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","config",157],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","set",157],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",157],",",["T_WHITESPACE"," ",157],["T_VARIABLE","$system_info",157],")",["T_OBJECT_OPERATOR","->",157],["T_STRING","save",157],"(",")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","refreshUpdateStatus",158],"(",["T_ARRAY","array",158],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'0.0'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'#all'",158],["T_WHITESPACE"," ",158],["T_DOUBLE_ARROW","=>",158],["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'1_0'",158],")",")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","standardTests",159],"(",")",";",["T_WHITESPACE","\n    ",159],["T_COMMENT","\/\/ We're expecting the report to say all projects are up to date.\n",160],["T_WHITESPACE","    ",161],["T_VARIABLE","$this",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","assertText",161],"(",["T_STRING","t",161],"(",["T_CONSTANT_ENCAPSED_STRING","'Up to date'",161],")",")",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","assertNoText",162],"(",["T_STRING","t",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Update available'",162],")",")",";",["T_WHITESPACE","\n    ",162],["T_COMMENT","\/\/ We want to see all 3 module names listed, since they'll show up either\n",163],["T_WHITESPACE","    ",164],["T_COMMENT","\/\/ as project names or as modules under the \"Includes\" listing.\n",164],["T_WHITESPACE","    ",165],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","assertText",165],"(",["T_STRING","t",165],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",165],")",")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertText",166],"(",["T_STRING","t",166],"(",["T_CONSTANT_ENCAPSED_STRING","'BBB Update test'",166],")",")",";",["T_WHITESPACE","\n    ",166],["T_VARIABLE","$this",167],["T_OBJECT_OPERATOR","->",167],["T_STRING","assertText",167],"(",["T_STRING","t",167],"(",["T_CONSTANT_ENCAPSED_STRING","'CCC Update test'",167],")",")",";",["T_WHITESPACE","\n    ",167],["T_COMMENT","\/\/ We want aaa_update_test included in the ccc_update_test project, not as\n",168],["T_WHITESPACE","    ",169],["T_COMMENT","\/\/ its own project on the report.\n",169],["T_WHITESPACE","    ",170],["T_VARIABLE","$this",170],["T_OBJECT_OPERATOR","->",170],["T_STRING","assertNoRaw",170],"(",["T_NS_SEPARATOR","\\",170],["T_STRING","Drupal",170],["T_DOUBLE_COLON","::",170],["T_STRING","l",170],"(",["T_STRING","t",170],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",170],")",",",["T_WHITESPACE"," ",170],["T_STRING","Url",170],["T_DOUBLE_COLON","::",170],["T_STRING","fromUri",170],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",170],")",")",",",["T_WHITESPACE"," ",170],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project does not appear.'",170],")",";",["T_WHITESPACE","\n    ",170],["T_COMMENT","\/\/ The other two should be listed as projects.\n",171],["T_WHITESPACE","    ",172],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertRaw",172],"(",["T_NS_SEPARATOR","\\",172],["T_STRING","Drupal",172],["T_DOUBLE_COLON","::",172],["T_STRING","l",172],"(",["T_STRING","t",172],"(",["T_CONSTANT_ENCAPSED_STRING","'BBB Update test'",172],")",",",["T_WHITESPACE"," ",172],["T_STRING","Url",172],["T_DOUBLE_COLON","::",172],["T_STRING","fromUri",172],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/bbb_update_test'",172],")",")",",",["T_WHITESPACE"," ",172],["T_CONSTANT_ENCAPSED_STRING","'Link to bbb_update_test project appears.'",172],")",";",["T_WHITESPACE","\n    ",172],["T_VARIABLE","$this",173],["T_OBJECT_OPERATOR","->",173],["T_STRING","assertRaw",173],"(",["T_NS_SEPARATOR","\\",173],["T_STRING","Drupal",173],["T_DOUBLE_COLON","::",173],["T_STRING","l",173],"(",["T_STRING","t",173],"(",["T_CONSTANT_ENCAPSED_STRING","'CCC Update test'",173],")",",",["T_WHITESPACE"," ",173],["T_STRING","Url",173],["T_DOUBLE_COLON","::",173],["T_STRING","fromUri",173],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/ccc_update_test'",173],")",")",",",["T_WHITESPACE"," ",173],["T_CONSTANT_ENCAPSED_STRING","'Link to bbb_update_test project appears.'",173],")",";",["T_WHITESPACE","\n\n    ",173],["T_COMMENT","\/\/ We want to make sure we see the BBB project before the CCC project.\n",175],["T_WHITESPACE","    ",176],["T_COMMENT","\/\/ Instead of just searching for 'BBB Update test' or something, we want\n",176],["T_WHITESPACE","    ",177],["T_COMMENT","\/\/ to use the full markup that starts the project entry itself, so that\n",177],["T_WHITESPACE","    ",178],["T_COMMENT","\/\/ we're really testing that the project listings are in the right order.\n",178],["T_WHITESPACE","    ",179],["T_VARIABLE","$bbb_project_link",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_CONSTANT_ENCAPSED_STRING","'<div class=\"project-update__title\"><a href=\"http:\/\/example.com\/project\/bbb_update_test\">BBB Update test<\/a>'",179],";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$ccc_project_link",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'<div class=\"project-update__title\"><a href=\"http:\/\/example.com\/project\/ccc_update_test\">CCC Update test<\/a>'",180],";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertTrue",181],"(",["T_STRING","strpos",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getRawContent",181],"(",")",",",["T_WHITESPACE"," ",181],["T_VARIABLE","$bbb_project_link",181],")",["T_WHITESPACE"," ",181],"<",["T_WHITESPACE"," ",181],["T_STRING","strpos",181],"(",["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","getRawContent",181],"(",")",",",["T_WHITESPACE"," ",181],["T_VARIABLE","$ccc_project_link",181],")",",",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","\"'BBB Update test' project is listed before the 'CCC Update test' project\"",181],")",";",["T_WHITESPACE","\n  ",181],"}",["T_WHITESPACE","\n\n  ",182],["T_DOC_COMMENT","\/**\n   * Tests that subthemes are notified about security updates for base themes.\n   *\/",184],["T_WHITESPACE","\n  ",186],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","testUpdateBaseThemeSecurityUpdate",187],"(",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n    ",187],["T_COMMENT","\/\/ @todo https:\/\/www.drupal.org\/node\/2338175 base themes have to be\n",188],["T_WHITESPACE","    ",189],["T_COMMENT","\/\/  installed.\n",189],["T_WHITESPACE","    ",190],["T_COMMENT","\/\/ Only install the subtheme, not the base theme.\n",190],["T_WHITESPACE","    ",191],["T_NS_SEPARATOR","\\",191],["T_STRING","Drupal",191],["T_DOUBLE_COLON","::",191],["T_STRING","service",191],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",191],")",["T_OBJECT_OPERATOR","->",191],["T_STRING","install",191],"(",["T_ARRAY","array",191],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",191],")",")",";",["T_WHITESPACE","\n\n    ",191],["T_COMMENT","\/\/ Define the initial state for core and the subtheme.\n",193],["T_WHITESPACE","    ",194],["T_VARIABLE","$system_info",194],["T_WHITESPACE"," ",194],"=",["T_WHITESPACE"," ",194],["T_ARRAY","array",194],"(",["T_WHITESPACE","\n      ",194],["T_COMMENT","\/\/ We want core to be version 8.0.0.\n",195],["T_WHITESPACE","      ",196],["T_CONSTANT_ENCAPSED_STRING","'#all'",196],["T_WHITESPACE"," ",196],["T_DOUBLE_ARROW","=>",196],["T_WHITESPACE"," ",196],["T_ARRAY","array",196],"(",["T_WHITESPACE","\n        ",196],["T_CONSTANT_ENCAPSED_STRING","'version'",197],["T_WHITESPACE"," ",197],["T_DOUBLE_ARROW","=>",197],["T_WHITESPACE"," ",197],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",197],",",["T_WHITESPACE","\n      ",197],")",",",["T_WHITESPACE","\n      ",198],["T_COMMENT","\/\/ Show the update_test_basetheme\n",199],["T_WHITESPACE","      ",200],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",200],["T_WHITESPACE"," ",200],["T_DOUBLE_ARROW","=>",200],["T_WHITESPACE"," ",200],["T_ARRAY","array",200],"(",["T_WHITESPACE","\n        ",200],["T_CONSTANT_ENCAPSED_STRING","'project'",201],["T_WHITESPACE"," ",201],["T_DOUBLE_ARROW","=>",201],["T_WHITESPACE"," ",201],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",201],",",["T_WHITESPACE","\n        ",201],["T_CONSTANT_ENCAPSED_STRING","'version'",202],["T_WHITESPACE"," ",202],["T_DOUBLE_ARROW","=>",202],["T_WHITESPACE"," ",202],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",202],",",["T_WHITESPACE","\n        ",202],["T_CONSTANT_ENCAPSED_STRING","'hidden'",203],["T_WHITESPACE"," ",203],["T_DOUBLE_ARROW","=>",203],["T_WHITESPACE"," ",203],["T_STRING","FALSE",203],",",["T_WHITESPACE","\n      ",203],")",",",["T_WHITESPACE","\n      ",204],["T_COMMENT","\/\/ Show the update_test_subtheme\n",205],["T_WHITESPACE","      ",206],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",206],["T_WHITESPACE"," ",206],["T_DOUBLE_ARROW","=>",206],["T_WHITESPACE"," ",206],["T_ARRAY","array",206],"(",["T_WHITESPACE","\n        ",206],["T_CONSTANT_ENCAPSED_STRING","'project'",207],["T_WHITESPACE"," ",207],["T_DOUBLE_ARROW","=>",207],["T_WHITESPACE"," ",207],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",207],",",["T_WHITESPACE","\n        ",207],["T_CONSTANT_ENCAPSED_STRING","'version'",208],["T_WHITESPACE"," ",208],["T_DOUBLE_ARROW","=>",208],["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",208],",",["T_WHITESPACE","\n        ",208],["T_CONSTANT_ENCAPSED_STRING","'hidden'",209],["T_WHITESPACE"," ",209],["T_DOUBLE_ARROW","=>",209],["T_WHITESPACE"," ",209],["T_STRING","FALSE",209],",",["T_WHITESPACE","\n      ",209],")",",",["T_WHITESPACE","\n    ",210],")",";",["T_WHITESPACE","\n    ",211],["T_VARIABLE","$this",212],["T_OBJECT_OPERATOR","->",212],["T_STRING","config",212],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",212],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","set",212],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",212],",",["T_WHITESPACE"," ",212],["T_VARIABLE","$system_info",212],")",["T_OBJECT_OPERATOR","->",212],["T_STRING","save",212],"(",")",";",["T_WHITESPACE","\n    ",212],["T_VARIABLE","$xml_mapping",213],["T_WHITESPACE"," ",213],"=",["T_WHITESPACE"," ",213],["T_ARRAY","array",213],"(",["T_WHITESPACE","\n      ",213],["T_CONSTANT_ENCAPSED_STRING","'drupal'",214],["T_WHITESPACE"," ",214],["T_DOUBLE_ARROW","=>",214],["T_WHITESPACE"," ",214],["T_CONSTANT_ENCAPSED_STRING","'0.0'",214],",",["T_WHITESPACE","\n      ",214],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",215],["T_WHITESPACE"," ",215],["T_DOUBLE_ARROW","=>",215],["T_WHITESPACE"," ",215],["T_CONSTANT_ENCAPSED_STRING","'1_0'",215],",",["T_WHITESPACE","\n      ",215],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",216],["T_WHITESPACE"," ",216],["T_DOUBLE_ARROW","=>",216],["T_WHITESPACE"," ",216],["T_CONSTANT_ENCAPSED_STRING","'1_1-sec'",216],",",["T_WHITESPACE","\n    ",216],")",";",["T_WHITESPACE","\n    ",217],["T_VARIABLE","$this",218],["T_OBJECT_OPERATOR","->",218],["T_STRING","refreshUpdateStatus",218],"(",["T_VARIABLE","$xml_mapping",218],")",";",["T_WHITESPACE","\n    ",218],["T_VARIABLE","$this",219],["T_OBJECT_OPERATOR","->",219],["T_STRING","assertText",219],"(",["T_STRING","t",219],"(",["T_CONSTANT_ENCAPSED_STRING","'Security update required!'",219],")",")",";",["T_WHITESPACE","\n    ",219],["T_VARIABLE","$this",220],["T_OBJECT_OPERATOR","->",220],["T_STRING","assertRaw",220],"(",["T_NS_SEPARATOR","\\",220],["T_STRING","Drupal",220],["T_DOUBLE_COLON","::",220],["T_STRING","l",220],"(",["T_STRING","t",220],"(",["T_CONSTANT_ENCAPSED_STRING","'Update test base theme'",220],")",",",["T_WHITESPACE"," ",220],["T_STRING","Url",220],["T_DOUBLE_COLON","::",220],["T_STRING","fromUri",220],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/update_test_basetheme'",220],")",")",",",["T_WHITESPACE"," ",220],["T_CONSTANT_ENCAPSED_STRING","'Link to the Update test base theme project appears.'",220],")",";",["T_WHITESPACE","\n  ",220],"}",["T_WHITESPACE","\n\n  ",221],["T_DOC_COMMENT","\/**\n   * Tests that disabled themes are only shown when desired.\n   *\n   * @todo https:\/\/www.drupal.org\/node\/2338175 extensions can not be hidden and\n   *   base themes have to be installed.\n   *\/",223],["T_WHITESPACE","\n  ",228],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],["T_STRING","testUpdateShowDisabledThemes",229],"(",")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n    ",229],["T_VARIABLE","$update_settings",230],["T_WHITESPACE"," ",230],"=",["T_WHITESPACE"," ",230],["T_VARIABLE","$this",230],["T_OBJECT_OPERATOR","->",230],["T_STRING","config",230],"(",["T_CONSTANT_ENCAPSED_STRING","'update.settings'",230],")",";",["T_WHITESPACE","\n    ",230],["T_COMMENT","\/\/ Make sure all the update_test_* themes are disabled.\n",231],["T_WHITESPACE","    ",232],["T_VARIABLE","$extension_config",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_VARIABLE","$this",232],["T_OBJECT_OPERATOR","->",232],["T_STRING","config",232],"(",["T_CONSTANT_ENCAPSED_STRING","'core.extension'",232],")",";",["T_WHITESPACE","\n    ",232],["T_FOREACH","foreach",233],["T_WHITESPACE"," ",233],"(",["T_VARIABLE","$extension_config",233],["T_OBJECT_OPERATOR","->",233],["T_STRING","get",233],"(",["T_CONSTANT_ENCAPSED_STRING","'theme'",233],")",["T_WHITESPACE"," ",233],["T_AS","as",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$theme",233],["T_WHITESPACE"," ",233],["T_DOUBLE_ARROW","=>",233],["T_WHITESPACE"," ",233],["T_VARIABLE","$weight",233],")",["T_WHITESPACE"," ",233],"{",["T_WHITESPACE","\n      ",233],["T_IF","if",234],["T_WHITESPACE"," ",234],"(",["T_STRING","preg_match",234],"(",["T_CONSTANT_ENCAPSED_STRING","'\/^update_test_\/'",234],",",["T_WHITESPACE"," ",234],["T_VARIABLE","$theme",234],")",")",["T_WHITESPACE"," ",234],"{",["T_WHITESPACE","\n        ",234],["T_VARIABLE","$extension_config",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","clear",235],"(","\"",["T_ENCAPSED_AND_WHITESPACE","theme.",235],["T_VARIABLE","$theme",235],"\"",")",";",["T_WHITESPACE","\n      ",235],"}",["T_WHITESPACE","\n    ",236],"}",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$extension_config",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","save",238],"(",")",";",["T_WHITESPACE","\n\n    ",238],["T_COMMENT","\/\/ Define the initial state for core and the test contrib themes.\n",240],["T_WHITESPACE","    ",241],["T_VARIABLE","$system_info",241],["T_WHITESPACE"," ",241],"=",["T_WHITESPACE"," ",241],["T_ARRAY","array",241],"(",["T_WHITESPACE","\n      ",241],["T_COMMENT","\/\/ We want core to be version 8.0.0.\n",242],["T_WHITESPACE","      ",243],["T_CONSTANT_ENCAPSED_STRING","'#all'",243],["T_WHITESPACE"," ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_ARRAY","array",243],"(",["T_WHITESPACE","\n        ",243],["T_CONSTANT_ENCAPSED_STRING","'version'",244],["T_WHITESPACE"," ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",244],",",["T_WHITESPACE","\n      ",244],")",",",["T_WHITESPACE","\n      ",245],["T_COMMENT","\/\/ The update_test_basetheme should be visible and up to date.\n",246],["T_WHITESPACE","      ",247],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",247],["T_WHITESPACE"," ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_ARRAY","array",247],"(",["T_WHITESPACE","\n        ",247],["T_CONSTANT_ENCAPSED_STRING","'project'",248],["T_WHITESPACE"," ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",248],",",["T_WHITESPACE","\n        ",248],["T_CONSTANT_ENCAPSED_STRING","'version'",249],["T_WHITESPACE"," ",249],["T_DOUBLE_ARROW","=>",249],["T_WHITESPACE"," ",249],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.1'",249],",",["T_WHITESPACE","\n        ",249],["T_CONSTANT_ENCAPSED_STRING","'hidden'",250],["T_WHITESPACE"," ",250],["T_DOUBLE_ARROW","=>",250],["T_WHITESPACE"," ",250],["T_STRING","FALSE",250],",",["T_WHITESPACE","\n      ",250],")",",",["T_WHITESPACE","\n      ",251],["T_COMMENT","\/\/ The update_test_subtheme should be visible and up to date.\n",252],["T_WHITESPACE","      ",253],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",253],["T_WHITESPACE"," ",253],["T_DOUBLE_ARROW","=>",253],["T_WHITESPACE"," ",253],["T_ARRAY","array",253],"(",["T_WHITESPACE","\n        ",253],["T_CONSTANT_ENCAPSED_STRING","'project'",254],["T_WHITESPACE"," ",254],["T_DOUBLE_ARROW","=>",254],["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",254],",",["T_WHITESPACE","\n        ",254],["T_CONSTANT_ENCAPSED_STRING","'version'",255],["T_WHITESPACE"," ",255],["T_DOUBLE_ARROW","=>",255],["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",255],",",["T_WHITESPACE","\n        ",255],["T_CONSTANT_ENCAPSED_STRING","'hidden'",256],["T_WHITESPACE"," ",256],["T_DOUBLE_ARROW","=>",256],["T_WHITESPACE"," ",256],["T_STRING","FALSE",256],",",["T_WHITESPACE","\n      ",256],")",",",["T_WHITESPACE","\n    ",257],")",";",["T_WHITESPACE","\n    ",258],["T_COMMENT","\/\/ When there are contributed modules in the site's file system, the\n",259],["T_WHITESPACE","    ",260],["T_COMMENT","\/\/ total number of attempts made in the test may exceed the default value\n",260],["T_WHITESPACE","    ",261],["T_COMMENT","\/\/ of update_max_fetch_attempts. Therefore this variable is set very high\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/ to avoid test failures in those cases.\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$update_settings",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","set",263],"(",["T_CONSTANT_ENCAPSED_STRING","'fetch.max_attempts'",263],",",["T_WHITESPACE"," ",263],["T_LNUMBER","99999",263],")",["T_OBJECT_OPERATOR","->",263],["T_STRING","save",263],"(",")",";",["T_WHITESPACE","\n    ",263],["T_VARIABLE","$this",264],["T_OBJECT_OPERATOR","->",264],["T_STRING","config",264],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",264],")",["T_OBJECT_OPERATOR","->",264],["T_STRING","set",264],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",264],",",["T_WHITESPACE"," ",264],["T_VARIABLE","$system_info",264],")",["T_OBJECT_OPERATOR","->",264],["T_STRING","save",264],"(",")",";",["T_WHITESPACE","\n    ",264],["T_VARIABLE","$xml_mapping",265],["T_WHITESPACE"," ",265],"=",["T_WHITESPACE"," ",265],["T_ARRAY","array",265],"(",["T_WHITESPACE","\n      ",265],["T_CONSTANT_ENCAPSED_STRING","'drupal'",266],["T_WHITESPACE"," ",266],["T_DOUBLE_ARROW","=>",266],["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'0.0'",266],",",["T_WHITESPACE","\n      ",266],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",267],["T_WHITESPACE"," ",267],["T_DOUBLE_ARROW","=>",267],["T_WHITESPACE"," ",267],["T_CONSTANT_ENCAPSED_STRING","'1_0'",267],",",["T_WHITESPACE","\n      ",267],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_CONSTANT_ENCAPSED_STRING","'1_1-sec'",268],",",["T_WHITESPACE","\n    ",268],")",";",["T_WHITESPACE","\n    ",269],["T_VARIABLE","$base_theme_project_link",270],["T_WHITESPACE"," ",270],"=",["T_WHITESPACE"," ",270],["T_NS_SEPARATOR","\\",270],["T_STRING","Drupal",270],["T_DOUBLE_COLON","::",270],["T_STRING","l",270],"(",["T_STRING","t",270],"(",["T_CONSTANT_ENCAPSED_STRING","'Update test base theme'",270],")",",",["T_WHITESPACE"," ",270],["T_STRING","Url",270],["T_DOUBLE_COLON","::",270],["T_STRING","fromUri",270],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/update_test_basetheme'",270],")",")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$sub_theme_project_link",271],["T_WHITESPACE"," ",271],"=",["T_WHITESPACE"," ",271],["T_NS_SEPARATOR","\\",271],["T_STRING","Drupal",271],["T_DOUBLE_COLON","::",271],["T_STRING","l",271],"(",["T_STRING","t",271],"(",["T_CONSTANT_ENCAPSED_STRING","'Update test subtheme'",271],")",",",["T_WHITESPACE"," ",271],["T_STRING","Url",271],["T_DOUBLE_COLON","::",271],["T_STRING","fromUri",271],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/update_test_subtheme'",271],")",")",";",["T_WHITESPACE","\n    ",271],["T_FOREACH","foreach",272],["T_WHITESPACE"," ",272],"(",["T_ARRAY","array",272],"(",["T_STRING","TRUE",272],",",["T_WHITESPACE"," ",272],["T_STRING","FALSE",272],")",["T_WHITESPACE"," ",272],["T_AS","as",272],["T_WHITESPACE"," ",272],["T_VARIABLE","$check_disabled",272],")",["T_WHITESPACE"," ",272],"{",["T_WHITESPACE","\n      ",272],["T_VARIABLE","$update_settings",273],["T_OBJECT_OPERATOR","->",273],["T_STRING","set",273],"(",["T_CONSTANT_ENCAPSED_STRING","'check.disabled_extensions'",273],",",["T_WHITESPACE"," ",273],["T_VARIABLE","$check_disabled",273],")",["T_OBJECT_OPERATOR","->",273],["T_STRING","save",273],"(",")",";",["T_WHITESPACE","\n      ",273],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","refreshUpdateStatus",274],"(",["T_VARIABLE","$xml_mapping",274],")",";",["T_WHITESPACE","\n      ",274],["T_COMMENT","\/\/ In neither case should we see the \"Themes\" heading for installed\n",275],["T_WHITESPACE","      ",276],["T_COMMENT","\/\/ themes.\n",276],["T_WHITESPACE","      ",277],["T_VARIABLE","$this",277],["T_OBJECT_OPERATOR","->",277],["T_STRING","assertNoText",277],"(",["T_STRING","t",277],"(",["T_CONSTANT_ENCAPSED_STRING","'Themes'",277],")",")",";",["T_WHITESPACE","\n      ",277],["T_IF","if",278],["T_WHITESPACE"," ",278],"(",["T_VARIABLE","$check_disabled",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n        ",278],["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","assertText",279],"(",["T_STRING","t",279],"(",["T_CONSTANT_ENCAPSED_STRING","'Uninstalled themes'",279],")",")",";",["T_WHITESPACE","\n        ",279],["T_VARIABLE","$this",280],["T_OBJECT_OPERATOR","->",280],["T_STRING","assertRaw",280],"(",["T_VARIABLE","$base_theme_project_link",280],",",["T_WHITESPACE"," ",280],["T_CONSTANT_ENCAPSED_STRING","'Link to the Update test base theme project appears.'",280],")",";",["T_WHITESPACE","\n        ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","assertRaw",281],"(",["T_VARIABLE","$sub_theme_project_link",281],",",["T_WHITESPACE"," ",281],["T_CONSTANT_ENCAPSED_STRING","'Link to the Update test subtheme project appears.'",281],")",";",["T_WHITESPACE","\n      ",281],"}",["T_WHITESPACE","\n      ",282],["T_ELSE","else",283],["T_WHITESPACE"," ",283],"{",["T_WHITESPACE","\n        ",283],["T_VARIABLE","$this",284],["T_OBJECT_OPERATOR","->",284],["T_STRING","assertNoText",284],"(",["T_STRING","t",284],"(",["T_CONSTANT_ENCAPSED_STRING","'Uninstalled themes'",284],")",")",";",["T_WHITESPACE","\n        ",284],["T_VARIABLE","$this",285],["T_OBJECT_OPERATOR","->",285],["T_STRING","assertNoRaw",285],"(",["T_VARIABLE","$base_theme_project_link",285],",",["T_WHITESPACE"," ",285],["T_CONSTANT_ENCAPSED_STRING","'Link to the Update test base theme project does not appear.'",285],")",";",["T_WHITESPACE","\n        ",285],["T_VARIABLE","$this",286],["T_OBJECT_OPERATOR","->",286],["T_STRING","assertNoRaw",286],"(",["T_VARIABLE","$sub_theme_project_link",286],",",["T_WHITESPACE"," ",286],["T_CONSTANT_ENCAPSED_STRING","'Link to the Update test subtheme project does not appear.'",286],")",";",["T_WHITESPACE","\n      ",286],"}",["T_WHITESPACE","\n    ",287],"}",["T_WHITESPACE","\n  ",288],"}",["T_WHITESPACE","\n\n  ",289],["T_DOC_COMMENT","\/**\n   * Tests updates with a hidden base theme.\n   *\/",291],["T_WHITESPACE","\n  ",293],["T_FUNCTION","function",294],["T_WHITESPACE"," ",294],["T_STRING","testUpdateHiddenBaseTheme",294],"(",")",["T_WHITESPACE"," ",294],"{",["T_WHITESPACE","\n    ",294],["T_STRING","module_load_include",295],"(",["T_CONSTANT_ENCAPSED_STRING","'compare.inc'",295],",",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'update'",295],")",";",["T_WHITESPACE","\n\n    ",295],["T_COMMENT","\/\/ Install the subtheme.\n",297],["T_WHITESPACE","    ",298],["T_NS_SEPARATOR","\\",298],["T_STRING","Drupal",298],["T_DOUBLE_COLON","::",298],["T_STRING","service",298],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",298],")",["T_OBJECT_OPERATOR","->",298],["T_STRING","install",298],"(",["T_ARRAY","array",298],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",298],")",")",";",["T_WHITESPACE","\n\n    ",298],["T_COMMENT","\/\/ Add a project and initial state for base theme and subtheme.\n",300],["T_WHITESPACE","    ",301],["T_VARIABLE","$system_info",301],["T_WHITESPACE"," ",301],"=",["T_WHITESPACE"," ",301],["T_ARRAY","array",301],"(",["T_WHITESPACE","\n      ",301],["T_COMMENT","\/\/ Hide the update_test_basetheme.\n",302],["T_WHITESPACE","      ",303],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",303],["T_WHITESPACE"," ",303],["T_DOUBLE_ARROW","=>",303],["T_WHITESPACE"," ",303],["T_ARRAY","array",303],"(",["T_WHITESPACE","\n        ",303],["T_CONSTANT_ENCAPSED_STRING","'project'",304],["T_WHITESPACE"," ",304],["T_DOUBLE_ARROW","=>",304],["T_WHITESPACE"," ",304],["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",304],",",["T_WHITESPACE","\n        ",304],["T_CONSTANT_ENCAPSED_STRING","'hidden'",305],["T_WHITESPACE"," ",305],["T_DOUBLE_ARROW","=>",305],["T_WHITESPACE"," ",305],["T_STRING","TRUE",305],",",["T_WHITESPACE","\n      ",305],")",",",["T_WHITESPACE","\n      ",306],["T_COMMENT","\/\/ Show the update_test_subtheme.\n",307],["T_WHITESPACE","      ",308],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",308],["T_WHITESPACE"," ",308],["T_DOUBLE_ARROW","=>",308],["T_WHITESPACE"," ",308],["T_ARRAY","array",308],"(",["T_WHITESPACE","\n        ",308],["T_CONSTANT_ENCAPSED_STRING","'project'",309],["T_WHITESPACE"," ",309],["T_DOUBLE_ARROW","=>",309],["T_WHITESPACE"," ",309],["T_CONSTANT_ENCAPSED_STRING","'update_test_subtheme'",309],",",["T_WHITESPACE","\n        ",309],["T_CONSTANT_ENCAPSED_STRING","'hidden'",310],["T_WHITESPACE"," ",310],["T_DOUBLE_ARROW","=>",310],["T_WHITESPACE"," ",310],["T_STRING","FALSE",310],",",["T_WHITESPACE","\n      ",310],")",",",["T_WHITESPACE","\n    ",311],")",";",["T_WHITESPACE","\n    ",312],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","config",313],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",313],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","set",313],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$system_info",313],")",["T_OBJECT_OPERATOR","->",313],["T_STRING","save",313],"(",")",";",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$projects",314],["T_WHITESPACE"," ",314],"=",["T_WHITESPACE"," ",314],["T_NS_SEPARATOR","\\",314],["T_STRING","Drupal",314],["T_DOUBLE_COLON","::",314],["T_STRING","service",314],"(",["T_CONSTANT_ENCAPSED_STRING","'update.manager'",314],")",["T_OBJECT_OPERATOR","->",314],["T_STRING","getProjects",314],"(",")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$theme_data",315],["T_WHITESPACE"," ",315],"=",["T_WHITESPACE"," ",315],["T_NS_SEPARATOR","\\",315],["T_STRING","Drupal",315],["T_DOUBLE_COLON","::",315],["T_STRING","service",315],"(",["T_CONSTANT_ENCAPSED_STRING","'theme_handler'",315],")",["T_OBJECT_OPERATOR","->",315],["T_STRING","rebuildThemeData",315],"(",")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$project_info",316],["T_WHITESPACE"," ",316],"=",["T_WHITESPACE"," ",316],["T_NEW","new",316],["T_WHITESPACE"," ",316],["T_STRING","ProjectInfo",316],"(",")",";",["T_WHITESPACE","\n    ",316],["T_VARIABLE","$project_info",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","processInfoList",317],"(",["T_VARIABLE","$projects",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$theme_data",317],",",["T_WHITESPACE"," ",317],["T_CONSTANT_ENCAPSED_STRING","'theme'",317],",",["T_WHITESPACE"," ",317],["T_STRING","TRUE",317],")",";",["T_WHITESPACE","\n\n    ",317],["T_VARIABLE","$this",319],["T_OBJECT_OPERATOR","->",319],["T_STRING","assertTrue",319],"(","!",["T_EMPTY","empty",319],"(",["T_VARIABLE","$projects",319],"[",["T_CONSTANT_ENCAPSED_STRING","'update_test_basetheme'",319],"]",")",",",["T_WHITESPACE"," ",319],["T_CONSTANT_ENCAPSED_STRING","'Valid base theme (update_test_basetheme) was found.'",319],")",";",["T_WHITESPACE","\n  ",319],"}",["T_WHITESPACE","\n\n  ",320],["T_DOC_COMMENT","\/**\n   * Makes sure that if we fetch from a broken URL, sane things happen.\n   *\/",322],["T_WHITESPACE","\n  ",324],["T_FUNCTION","function",325],["T_WHITESPACE"," ",325],["T_STRING","testUpdateBrokenFetchURL",325],"(",")",["T_WHITESPACE"," ",325],"{",["T_WHITESPACE","\n    ",325],["T_VARIABLE","$system_info",326],["T_WHITESPACE"," ",326],"=",["T_WHITESPACE"," ",326],["T_ARRAY","array",326],"(",["T_WHITESPACE","\n      ",326],["T_CONSTANT_ENCAPSED_STRING","'#all'",327],["T_WHITESPACE"," ",327],["T_DOUBLE_ARROW","=>",327],["T_WHITESPACE"," ",327],["T_ARRAY","array",327],"(",["T_WHITESPACE","\n        ",327],["T_CONSTANT_ENCAPSED_STRING","'version'",328],["T_WHITESPACE"," ",328],["T_DOUBLE_ARROW","=>",328],["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",328],",",["T_WHITESPACE","\n      ",328],")",",",["T_WHITESPACE","\n      ",329],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_ARRAY","array",330],"(",["T_WHITESPACE","\n        ",330],["T_CONSTANT_ENCAPSED_STRING","'project'",331],["T_WHITESPACE"," ",331],["T_DOUBLE_ARROW","=>",331],["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",331],",",["T_WHITESPACE","\n        ",331],["T_CONSTANT_ENCAPSED_STRING","'version'",332],["T_WHITESPACE"," ",332],["T_DOUBLE_ARROW","=>",332],["T_WHITESPACE"," ",332],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",332],",",["T_WHITESPACE","\n        ",332],["T_CONSTANT_ENCAPSED_STRING","'hidden'",333],["T_WHITESPACE"," ",333],["T_DOUBLE_ARROW","=>",333],["T_WHITESPACE"," ",333],["T_STRING","FALSE",333],",",["T_WHITESPACE","\n      ",333],")",",",["T_WHITESPACE","\n      ",334],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",335],["T_WHITESPACE"," ",335],["T_DOUBLE_ARROW","=>",335],["T_WHITESPACE"," ",335],["T_ARRAY","array",335],"(",["T_WHITESPACE","\n        ",335],["T_CONSTANT_ENCAPSED_STRING","'project'",336],["T_WHITESPACE"," ",336],["T_DOUBLE_ARROW","=>",336],["T_WHITESPACE"," ",336],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",336],",",["T_WHITESPACE","\n        ",336],["T_CONSTANT_ENCAPSED_STRING","'version'",337],["T_WHITESPACE"," ",337],["T_DOUBLE_ARROW","=>",337],["T_WHITESPACE"," ",337],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",337],",",["T_WHITESPACE","\n        ",337],["T_CONSTANT_ENCAPSED_STRING","'hidden'",338],["T_WHITESPACE"," ",338],["T_DOUBLE_ARROW","=>",338],["T_WHITESPACE"," ",338],["T_STRING","FALSE",338],",",["T_WHITESPACE","\n      ",338],")",",",["T_WHITESPACE","\n      ",339],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",340],["T_WHITESPACE"," ",340],["T_DOUBLE_ARROW","=>",340],["T_WHITESPACE"," ",340],["T_ARRAY","array",340],"(",["T_WHITESPACE","\n        ",340],["T_CONSTANT_ENCAPSED_STRING","'project'",341],["T_WHITESPACE"," ",341],["T_DOUBLE_ARROW","=>",341],["T_WHITESPACE"," ",341],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",341],",",["T_WHITESPACE","\n        ",341],["T_CONSTANT_ENCAPSED_STRING","'version'",342],["T_WHITESPACE"," ",342],["T_DOUBLE_ARROW","=>",342],["T_WHITESPACE"," ",342],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",342],",",["T_WHITESPACE","\n        ",342],["T_CONSTANT_ENCAPSED_STRING","'hidden'",343],["T_WHITESPACE"," ",343],["T_DOUBLE_ARROW","=>",343],["T_WHITESPACE"," ",343],["T_STRING","FALSE",343],",",["T_WHITESPACE","\n      ",343],")",",",["T_WHITESPACE","\n    ",344],")",";",["T_WHITESPACE","\n    ",345],["T_VARIABLE","$this",346],["T_OBJECT_OPERATOR","->",346],["T_STRING","config",346],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",346],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","set",346],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",346],",",["T_WHITESPACE"," ",346],["T_VARIABLE","$system_info",346],")",["T_OBJECT_OPERATOR","->",346],["T_STRING","save",346],"(",")",";",["T_WHITESPACE","\n\n    ",346],["T_COMMENT","\/\/ Ensure that the update information is correct before testing.\n",348],["T_WHITESPACE","    ",349],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","drupalGet",349],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates'",349],")",";",["T_WHITESPACE","\n\n    ",349],["T_VARIABLE","$xml_mapping",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],["T_ARRAY","array",351],"(",["T_WHITESPACE","\n      ",351],["T_CONSTANT_ENCAPSED_STRING","'drupal'",352],["T_WHITESPACE"," ",352],["T_DOUBLE_ARROW","=>",352],["T_WHITESPACE"," ",352],["T_CONSTANT_ENCAPSED_STRING","'0.0'",352],",",["T_WHITESPACE","\n      ",352],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_CONSTANT_ENCAPSED_STRING","'1_0'",353],",",["T_WHITESPACE","\n      ",353],["T_CONSTANT_ENCAPSED_STRING","'bbb_update_test'",354],["T_WHITESPACE"," ",354],["T_DOUBLE_ARROW","=>",354],["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'does-not-exist'",354],",",["T_WHITESPACE","\n      ",354],["T_CONSTANT_ENCAPSED_STRING","'ccc_update_test'",355],["T_WHITESPACE"," ",355],["T_DOUBLE_ARROW","=>",355],["T_WHITESPACE"," ",355],["T_CONSTANT_ENCAPSED_STRING","'1_0'",355],",",["T_WHITESPACE","\n    ",355],")",";",["T_WHITESPACE","\n    ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","refreshUpdateStatus",357],"(",["T_VARIABLE","$xml_mapping",357],")",";",["T_WHITESPACE","\n\n    ",357],["T_VARIABLE","$this",359],["T_OBJECT_OPERATOR","->",359],["T_STRING","assertText",359],"(",["T_STRING","t",359],"(",["T_CONSTANT_ENCAPSED_STRING","'Up to date'",359],")",")",";",["T_WHITESPACE","\n    ",359],["T_COMMENT","\/\/ We're expecting the report to say most projects are up to date, so we\n",360],["T_WHITESPACE","    ",361],["T_COMMENT","\/\/ hope that 'Up to date' is not unique.\n",361],["T_WHITESPACE","    ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","assertNoUniqueText",362],"(",["T_STRING","t",362],"(",["T_CONSTANT_ENCAPSED_STRING","'Up to date'",362],")",")",";",["T_WHITESPACE","\n    ",362],["T_COMMENT","\/\/ It should say we failed to get data, not that we're missing an update.\n",363],["T_WHITESPACE","    ",364],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","assertNoText",364],"(",["T_STRING","t",364],"(",["T_CONSTANT_ENCAPSED_STRING","'Update available'",364],")",")",";",["T_WHITESPACE","\n\n    ",364],["T_COMMENT","\/\/ We need to check that this string is found as part of a project row, not\n",366],["T_WHITESPACE","    ",367],["T_COMMENT","\/\/ just in the \"Failed to get available update data\" message at the top of\n",367],["T_WHITESPACE","    ",368],["T_COMMENT","\/\/ the page.\n",368],["T_WHITESPACE","    ",369],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","assertRaw",369],"(",["T_CONSTANT_ENCAPSED_STRING","'<div class=\"project-update__status\">'",369],["T_WHITESPACE"," ",369],".",["T_WHITESPACE"," ",369],["T_STRING","t",369],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to get available update data'",369],")",")",";",["T_WHITESPACE","\n\n    ",369],["T_COMMENT","\/\/ We should see the output messages from fetching manually.\n",371],["T_WHITESPACE","    ",372],["T_VARIABLE","$this",372],["T_OBJECT_OPERATOR","->",372],["T_STRING","assertUniqueText",372],"(",["T_STRING","t",372],"(",["T_CONSTANT_ENCAPSED_STRING","'Checked available update data for 3 projects.'",372],")",")",";",["T_WHITESPACE","\n    ",372],["T_VARIABLE","$this",373],["T_OBJECT_OPERATOR","->",373],["T_STRING","assertUniqueText",373],"(",["T_STRING","t",373],"(",["T_CONSTANT_ENCAPSED_STRING","'Failed to get available update data for one project.'",373],")",")",";",["T_WHITESPACE","\n\n    ",373],["T_COMMENT","\/\/ The other two should be listed as projects.\n",375],["T_WHITESPACE","    ",376],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertRaw",376],"(",["T_NS_SEPARATOR","\\",376],["T_STRING","Drupal",376],["T_DOUBLE_COLON","::",376],["T_STRING","l",376],"(",["T_STRING","t",376],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",376],")",",",["T_WHITESPACE"," ",376],["T_STRING","Url",376],["T_DOUBLE_COLON","::",376],["T_STRING","fromUri",376],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",376],")",")",",",["T_WHITESPACE"," ",376],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project appears.'",376],")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$this",377],["T_OBJECT_OPERATOR","->",377],["T_STRING","assertNoRaw",377],"(",["T_NS_SEPARATOR","\\",377],["T_STRING","Drupal",377],["T_DOUBLE_COLON","::",377],["T_STRING","l",377],"(",["T_STRING","t",377],"(",["T_CONSTANT_ENCAPSED_STRING","'BBB Update test'",377],")",",",["T_WHITESPACE"," ",377],["T_STRING","Url",377],["T_DOUBLE_COLON","::",377],["T_STRING","fromUri",377],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/bbb_update_test'",377],")",")",",",["T_WHITESPACE"," ",377],["T_CONSTANT_ENCAPSED_STRING","'Link to bbb_update_test project does not appear.'",377],")",";",["T_WHITESPACE","\n    ",377],["T_VARIABLE","$this",378],["T_OBJECT_OPERATOR","->",378],["T_STRING","assertRaw",378],"(",["T_NS_SEPARATOR","\\",378],["T_STRING","Drupal",378],["T_DOUBLE_COLON","::",378],["T_STRING","l",378],"(",["T_STRING","t",378],"(",["T_CONSTANT_ENCAPSED_STRING","'CCC Update test'",378],")",",",["T_WHITESPACE"," ",378],["T_STRING","Url",378],["T_DOUBLE_COLON","::",378],["T_STRING","fromUri",378],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/ccc_update_test'",378],")",")",",",["T_WHITESPACE"," ",378],["T_CONSTANT_ENCAPSED_STRING","'Link to bbb_update_test project appears.'",378],")",";",["T_WHITESPACE","\n  ",378],"}",["T_WHITESPACE","\n\n  ",379],["T_DOC_COMMENT","\/**\n   * Checks that hook_update_status_alter() works to change a status.\n   *\n   * We provide the same external data as if aaa_update_test 8.x-1.0 were\n   * installed and that was the latest release. Then we use\n   * hook_update_status_alter() to try to mark this as missing a security\n   * update, then assert if we see the appropriate warnings on the right pages.\n   *\/",381],["T_WHITESPACE","\n  ",388],["T_FUNCTION","function",389],["T_WHITESPACE"," ",389],["T_STRING","testHookUpdateStatusAlter",389],"(",")",["T_WHITESPACE"," ",389],"{",["T_WHITESPACE","\n    ",389],["T_VARIABLE","$update_test_config",390],["T_WHITESPACE"," ",390],"=",["T_WHITESPACE"," ",390],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","config",390],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",390],")",";",["T_WHITESPACE","\n    ",390],["T_VARIABLE","$update_admin_user",391],["T_WHITESPACE"," ",391],"=",["T_WHITESPACE"," ",391],["T_VARIABLE","$this",391],["T_OBJECT_OPERATOR","->",391],["T_STRING","drupalCreateUser",391],"(",["T_ARRAY","array",391],"(",["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",391],",",["T_WHITESPACE"," ",391],["T_CONSTANT_ENCAPSED_STRING","'administer software updates'",391],")",")",";",["T_WHITESPACE","\n    ",391],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","drupalLogin",392],"(",["T_VARIABLE","$update_admin_user",392],")",";",["T_WHITESPACE","\n\n    ",392],["T_VARIABLE","$system_info",394],["T_WHITESPACE"," ",394],"=",["T_WHITESPACE"," ",394],["T_ARRAY","array",394],"(",["T_WHITESPACE","\n      ",394],["T_CONSTANT_ENCAPSED_STRING","'#all'",395],["T_WHITESPACE"," ",395],["T_DOUBLE_ARROW","=>",395],["T_WHITESPACE"," ",395],["T_ARRAY","array",395],"(",["T_WHITESPACE","\n        ",395],["T_CONSTANT_ENCAPSED_STRING","'version'",396],["T_WHITESPACE"," ",396],["T_DOUBLE_ARROW","=>",396],["T_WHITESPACE"," ",396],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",396],",",["T_WHITESPACE","\n      ",396],")",",",["T_WHITESPACE","\n      ",397],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_ARRAY","array",398],"(",["T_WHITESPACE","\n        ",398],["T_CONSTANT_ENCAPSED_STRING","'project'",399],["T_WHITESPACE"," ",399],["T_DOUBLE_ARROW","=>",399],["T_WHITESPACE"," ",399],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",399],",",["T_WHITESPACE","\n        ",399],["T_CONSTANT_ENCAPSED_STRING","'version'",400],["T_WHITESPACE"," ",400],["T_DOUBLE_ARROW","=>",400],["T_WHITESPACE"," ",400],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",400],",",["T_WHITESPACE","\n        ",400],["T_CONSTANT_ENCAPSED_STRING","'hidden'",401],["T_WHITESPACE"," ",401],["T_DOUBLE_ARROW","=>",401],["T_WHITESPACE"," ",401],["T_STRING","FALSE",401],",",["T_WHITESPACE","\n      ",401],")",",",["T_WHITESPACE","\n    ",402],")",";",["T_WHITESPACE","\n    ",403],["T_VARIABLE","$update_test_config",404],["T_OBJECT_OPERATOR","->",404],["T_STRING","set",404],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",404],",",["T_WHITESPACE"," ",404],["T_VARIABLE","$system_info",404],")",["T_OBJECT_OPERATOR","->",404],["T_STRING","save",404],"(",")",";",["T_WHITESPACE","\n    ",404],["T_VARIABLE","$update_status",405],["T_WHITESPACE"," ",405],"=",["T_WHITESPACE"," ",405],["T_ARRAY","array",405],"(",["T_WHITESPACE","\n      ",405],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",406],["T_WHITESPACE"," ",406],["T_DOUBLE_ARROW","=>",406],["T_WHITESPACE"," ",406],["T_ARRAY","array",406],"(",["T_WHITESPACE","\n        ",406],["T_CONSTANT_ENCAPSED_STRING","'status'",407],["T_WHITESPACE"," ",407],["T_DOUBLE_ARROW","=>",407],["T_WHITESPACE"," ",407],["T_STRING","UPDATE_NOT_SECURE",407],",",["T_WHITESPACE","\n      ",407],")",",",["T_WHITESPACE","\n    ",408],")",";",["T_WHITESPACE","\n    ",409],["T_VARIABLE","$update_test_config",410],["T_OBJECT_OPERATOR","->",410],["T_STRING","set",410],"(",["T_CONSTANT_ENCAPSED_STRING","'update_status'",410],",",["T_WHITESPACE"," ",410],["T_VARIABLE","$update_status",410],")",["T_OBJECT_OPERATOR","->",410],["T_STRING","save",410],"(",")",";",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","refreshUpdateStatus",411],"(",["T_WHITESPACE","\n      ",411],["T_ARRAY","array",412],"(",["T_WHITESPACE","\n        ",412],["T_CONSTANT_ENCAPSED_STRING","'drupal'",413],["T_WHITESPACE"," ",413],["T_DOUBLE_ARROW","=>",413],["T_WHITESPACE"," ",413],["T_CONSTANT_ENCAPSED_STRING","'0.0'",413],",",["T_WHITESPACE","\n        ",413],["T_CONSTANT_ENCAPSED_STRING","'aaa_update_test'",414],["T_WHITESPACE"," ",414],["T_DOUBLE_ARROW","=>",414],["T_WHITESPACE"," ",414],["T_CONSTANT_ENCAPSED_STRING","'1_0'",414],",",["T_WHITESPACE","\n      ",414],")",["T_WHITESPACE","\n    ",415],")",";",["T_WHITESPACE","\n    ",416],["T_VARIABLE","$this",417],["T_OBJECT_OPERATOR","->",417],["T_STRING","drupalGet",417],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates'",417],")",";",["T_WHITESPACE","\n    ",417],["T_VARIABLE","$this",418],["T_OBJECT_OPERATOR","->",418],["T_STRING","assertRaw",418],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>'",418],["T_WHITESPACE"," ",418],".",["T_WHITESPACE"," ",418],["T_STRING","t",418],"(",["T_CONSTANT_ENCAPSED_STRING","'Modules'",418],")",["T_WHITESPACE"," ",418],".",["T_WHITESPACE"," ",418],["T_CONSTANT_ENCAPSED_STRING","'<\/h3>'",418],")",";",["T_WHITESPACE","\n    ",418],["T_VARIABLE","$this",419],["T_OBJECT_OPERATOR","->",419],["T_STRING","assertText",419],"(",["T_STRING","t",419],"(",["T_CONSTANT_ENCAPSED_STRING","'Security update required!'",419],")",")",";",["T_WHITESPACE","\n    ",419],["T_VARIABLE","$this",420],["T_OBJECT_OPERATOR","->",420],["T_STRING","assertRaw",420],"(",["T_NS_SEPARATOR","\\",420],["T_STRING","Drupal",420],["T_DOUBLE_COLON","::",420],["T_STRING","l",420],"(",["T_STRING","t",420],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",420],")",",",["T_WHITESPACE"," ",420],["T_STRING","Url",420],["T_DOUBLE_COLON","::",420],["T_STRING","fromUri",420],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",420],")",")",",",["T_WHITESPACE"," ",420],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project appears.'",420],")",";",["T_WHITESPACE","\n\n    ",420],["T_COMMENT","\/\/ Visit the reports page again without the altering and make sure the\n",422],["T_WHITESPACE","    ",423],["T_COMMENT","\/\/ status is back to normal.\n",423],["T_WHITESPACE","    ",424],["T_VARIABLE","$update_test_config",424],["T_OBJECT_OPERATOR","->",424],["T_STRING","set",424],"(",["T_CONSTANT_ENCAPSED_STRING","'update_status'",424],",",["T_WHITESPACE"," ",424],["T_ARRAY","array",424],"(",")",")",["T_OBJECT_OPERATOR","->",424],["T_STRING","save",424],"(",")",";",["T_WHITESPACE","\n    ",424],["T_VARIABLE","$this",425],["T_OBJECT_OPERATOR","->",425],["T_STRING","drupalGet",425],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates'",425],")",";",["T_WHITESPACE","\n    ",425],["T_VARIABLE","$this",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","assertRaw",426],"(",["T_CONSTANT_ENCAPSED_STRING","'<h3>'",426],["T_WHITESPACE"," ",426],".",["T_WHITESPACE"," ",426],["T_STRING","t",426],"(",["T_CONSTANT_ENCAPSED_STRING","'Modules'",426],")",["T_WHITESPACE"," ",426],".",["T_WHITESPACE"," ",426],["T_CONSTANT_ENCAPSED_STRING","'<\/h3>'",426],")",";",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","assertNoText",427],"(",["T_STRING","t",427],"(",["T_CONSTANT_ENCAPSED_STRING","'Security update required!'",427],")",")",";",["T_WHITESPACE","\n    ",427],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","assertRaw",428],"(",["T_NS_SEPARATOR","\\",428],["T_STRING","Drupal",428],["T_DOUBLE_COLON","::",428],["T_STRING","l",428],"(",["T_STRING","t",428],"(",["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",428],")",",",["T_WHITESPACE"," ",428],["T_STRING","Url",428],["T_DOUBLE_COLON","::",428],["T_STRING","fromUri",428],"(",["T_CONSTANT_ENCAPSED_STRING","'http:\/\/example.com\/project\/aaa_update_test'",428],")",")",",",["T_WHITESPACE"," ",428],["T_CONSTANT_ENCAPSED_STRING","'Link to aaa_update_test project appears.'",428],")",";",["T_WHITESPACE","\n\n    ",428],["T_COMMENT","\/\/ Turn the altering back on and visit the Update manager UI.\n",430],["T_WHITESPACE","    ",431],["T_VARIABLE","$update_test_config",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","set",431],"(",["T_CONSTANT_ENCAPSED_STRING","'update_status'",431],",",["T_WHITESPACE"," ",431],["T_VARIABLE","$update_status",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","save",431],"(",")",";",["T_WHITESPACE","\n    ",431],["T_VARIABLE","$this",432],["T_OBJECT_OPERATOR","->",432],["T_STRING","drupalGet",432],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/update'",432],")",";",["T_WHITESPACE","\n    ",432],["T_VARIABLE","$this",433],["T_OBJECT_OPERATOR","->",433],["T_STRING","assertText",433],"(",["T_STRING","t",433],"(",["T_CONSTANT_ENCAPSED_STRING","'Security update'",433],")",")",";",["T_WHITESPACE","\n\n    ",433],["T_COMMENT","\/\/ Turn the altering back off and visit the Update manager UI.\n",435],["T_WHITESPACE","    ",436],["T_VARIABLE","$update_test_config",436],["T_OBJECT_OPERATOR","->",436],["T_STRING","set",436],"(",["T_CONSTANT_ENCAPSED_STRING","'update_status'",436],",",["T_WHITESPACE"," ",436],["T_ARRAY","array",436],"(",")",")",["T_OBJECT_OPERATOR","->",436],["T_STRING","save",436],"(",")",";",["T_WHITESPACE","\n    ",436],["T_VARIABLE","$this",437],["T_OBJECT_OPERATOR","->",437],["T_STRING","drupalGet",437],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/update'",437],")",";",["T_WHITESPACE","\n    ",437],["T_VARIABLE","$this",438],["T_OBJECT_OPERATOR","->",438],["T_STRING","assertNoText",438],"(",["T_STRING","t",438],"(",["T_CONSTANT_ENCAPSED_STRING","'Security update'",438],")",")",";",["T_WHITESPACE","\n  ",438],"}",["T_WHITESPACE","\n\n",439],"}",["T_WHITESPACE","\n",441]]
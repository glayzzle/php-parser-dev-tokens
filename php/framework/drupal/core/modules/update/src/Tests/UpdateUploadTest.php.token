[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","update",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Extension",5],["T_NS_SEPARATOR","\\",5],["T_STRING","InfoParserDynamic",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Updater",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Updater",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Url",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Tests the Update Manager module's upload and extraction functionality.\n *\n * @group update\n *\/",9],["T_WHITESPACE","\n",13],["T_CLASS","class",14],["T_WHITESPACE"," ",14],["T_STRING","UpdateUploadTest",14],["T_WHITESPACE"," ",14],["T_EXTENDS","extends",14],["T_WHITESPACE"," ",14],["T_STRING","UpdateTestBase",14],["T_WHITESPACE"," ",14],"{",["T_WHITESPACE","\n\n  ",14],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",16],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_STATIC","static",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$modules",21],["T_WHITESPACE"," ",21],"=",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",21],",",["T_WHITESPACE"," ",21],["T_CONSTANT_ENCAPSED_STRING","'update_test'",21],")",";",["T_WHITESPACE","\n\n  ",21],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","setUp",23],"(",")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","setUp",24],"(",")",";",["T_WHITESPACE","\n    ",24],["T_VARIABLE","$admin_user",25],["T_WHITESPACE"," ",25],"=",["T_WHITESPACE"," ",25],["T_VARIABLE","$this",25],["T_OBJECT_OPERATOR","->",25],["T_STRING","drupalCreateUser",25],"(",["T_ARRAY","array",25],"(",["T_CONSTANT_ENCAPSED_STRING","'administer modules'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'administer software updates'",25],",",["T_WHITESPACE"," ",25],["T_CONSTANT_ENCAPSED_STRING","'administer site configuration'",25],")",")",";",["T_WHITESPACE","\n    ",25],["T_VARIABLE","$this",26],["T_OBJECT_OPERATOR","->",26],["T_STRING","drupalLogin",26],"(",["T_VARIABLE","$admin_user",26],")",";",["T_WHITESPACE","\n  ",26],"}",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * Tests upload, extraction, and update of a module.\n   *\/",29],["T_WHITESPACE","\n  ",31],["T_PUBLIC","public",32],["T_WHITESPACE"," ",32],["T_FUNCTION","function",32],["T_WHITESPACE"," ",32],["T_STRING","testUploadModule",32],"(",")",["T_WHITESPACE"," ",32],"{",["T_WHITESPACE","\n    ",32],["T_COMMENT","\/\/ Ensure that the update information is correct before testing.\n",33],["T_WHITESPACE","    ",34],["T_STRING","update_get_available",34],"(",["T_STRING","TRUE",34],")",";",["T_WHITESPACE","\n\n    ",34],["T_COMMENT","\/\/ Images are not valid archives, so get one and try to install it. We\n",36],["T_WHITESPACE","    ",37],["T_COMMENT","\/\/ need an extra variable to store the result of drupalGetTestFiles()\n",37],["T_WHITESPACE","    ",38],["T_COMMENT","\/\/ since reset() takes an argument by reference and passing in a constant\n",38],["T_WHITESPACE","    ",39],["T_COMMENT","\/\/ emits a notice in strict mode.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$imageTestFiles",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_VARIABLE","$this",40],["T_OBJECT_OPERATOR","->",40],["T_STRING","drupalGetTestFiles",40],"(",["T_CONSTANT_ENCAPSED_STRING","'image'",40],")",";",["T_WHITESPACE","\n    ",40],["T_VARIABLE","$invalidArchiveFile",41],["T_WHITESPACE"," ",41],"=",["T_WHITESPACE"," ",41],["T_STRING","reset",41],"(",["T_VARIABLE","$imageTestFiles",41],")",";",["T_WHITESPACE","\n    ",41],["T_VARIABLE","$edit",42],["T_WHITESPACE"," ",42],"=",["T_WHITESPACE"," ",42],["T_ARRAY","array",42],"(",["T_WHITESPACE","\n      ",42],["T_CONSTANT_ENCAPSED_STRING","'files[project_upload]'",43],["T_WHITESPACE"," ",43],["T_DOUBLE_ARROW","=>",43],["T_WHITESPACE"," ",43],["T_VARIABLE","$invalidArchiveFile",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","uri",43],",",["T_WHITESPACE","\n    ",43],")",";",["T_WHITESPACE","\n    ",44],["T_COMMENT","\/\/ This also checks that the correct archive extensions are allowed.\n",45],["T_WHITESPACE","    ",46],["T_VARIABLE","$this",46],["T_OBJECT_OPERATOR","->",46],["T_STRING","drupalPostForm",46],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",46],",",["T_WHITESPACE"," ",46],["T_VARIABLE","$edit",46],",",["T_WHITESPACE"," ",46],["T_STRING","t",46],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",46],")",")",";",["T_WHITESPACE","\n    ",46],["T_VARIABLE","$this",47],["T_OBJECT_OPERATOR","->",47],["T_STRING","assertText",47],"(",["T_STRING","t",47],"(",["T_CONSTANT_ENCAPSED_STRING","'Only files with the following extensions are allowed: @archive_extensions.'",47],",",["T_WHITESPACE"," ",47],["T_ARRAY","array",47],"(",["T_CONSTANT_ENCAPSED_STRING","'@archive_extensions'",47],["T_WHITESPACE"," ",47],["T_DOUBLE_ARROW","=>",47],["T_WHITESPACE"," ",47],["T_STRING","archiver_get_extensions",47],"(",")",")",")",",",["T_WHITESPACE"," ",47],["T_CONSTANT_ENCAPSED_STRING","'Only valid archives can be uploaded.'",47],")",";",["T_WHITESPACE","\n    ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertUrl",48],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",48],")",";",["T_WHITESPACE","\n\n    ",48],["T_COMMENT","\/\/ Check to ensure an existing module can't be reinstalled. Also checks that\n",50],["T_WHITESPACE","    ",51],["T_COMMENT","\/\/ the archive was extracted since we can't know if the module is already\n",51],["T_WHITESPACE","    ",52],["T_COMMENT","\/\/ installed until after extraction.\n",52],["T_WHITESPACE","    ",53],["T_VARIABLE","$validArchiveFile",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_DIR","__DIR__",53],["T_WHITESPACE"," ",53],".",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/tests\/aaa_update_test.tar.gz'",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$edit",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_WHITESPACE","\n      ",54],["T_CONSTANT_ENCAPSED_STRING","'files[project_upload]'",55],["T_WHITESPACE"," ",55],["T_DOUBLE_ARROW","=>",55],["T_WHITESPACE"," ",55],["T_VARIABLE","$validArchiveFile",55],",",["T_WHITESPACE","\n    ",55],")",";",["T_WHITESPACE","\n    ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","drupalPostForm",57],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",57],",",["T_WHITESPACE"," ",57],["T_VARIABLE","$edit",57],",",["T_WHITESPACE"," ",57],["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",57],")",")",";",["T_WHITESPACE","\n    ",57],["T_VARIABLE","$this",58],["T_OBJECT_OPERATOR","->",58],["T_STRING","assertText",58],"(",["T_STRING","t",58],"(",["T_CONSTANT_ENCAPSED_STRING","'@module_name is already installed.'",58],",",["T_WHITESPACE"," ",58],["T_ARRAY","array",58],"(",["T_CONSTANT_ENCAPSED_STRING","'@module_name'",58],["T_WHITESPACE"," ",58],["T_DOUBLE_ARROW","=>",58],["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'AAA Update test'",58],")",")",",",["T_WHITESPACE"," ",58],["T_CONSTANT_ENCAPSED_STRING","'Existing module was extracted and not reinstalled.'",58],")",";",["T_WHITESPACE","\n    ",58],["T_VARIABLE","$this",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","assertUrl",59],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",59],")",";",["T_WHITESPACE","\n\n    ",59],["T_COMMENT","\/\/ Ensure that a new module can be extracted and installed.\n",61],["T_WHITESPACE","    ",62],["T_VARIABLE","$updaters",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_STRING","drupal_get_updaters",62],"(",")",";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$moduleUpdater",63],["T_WHITESPACE"," ",63],"=",["T_WHITESPACE"," ",63],["T_VARIABLE","$updaters",63],"[",["T_CONSTANT_ENCAPSED_STRING","'module'",63],"]","[",["T_CONSTANT_ENCAPSED_STRING","'class'",63],"]",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$installedInfoFilePath",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","container",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","get",64],"(",["T_CONSTANT_ENCAPSED_STRING","'update.root'",64],")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/'",64],["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_VARIABLE","$moduleUpdater",64],["T_DOUBLE_COLON","::",64],["T_STRING","getRootDirectoryRelativePath",64],"(",")",["T_WHITESPACE"," ",64],".",["T_WHITESPACE"," ",64],["T_CONSTANT_ENCAPSED_STRING","'\/update_test_new_module\/update_test_new_module.info.yml'",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","assertFalse",65],"(",["T_STRING","file_exists",65],"(",["T_VARIABLE","$installedInfoFilePath",65],")",",",["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'The new module does not exist in the filesystem before it is installed with the Update Manager.'",65],")",";",["T_WHITESPACE","\n    ",65],["T_VARIABLE","$validArchiveFile",66],["T_WHITESPACE"," ",66],"=",["T_WHITESPACE"," ",66],["T_DIR","__DIR__",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'\/..\/..\/tests\/update_test_new_module\/8.x-1.0\/update_test_new_module.tar.gz'",66],";",["T_WHITESPACE","\n    ",66],["T_VARIABLE","$edit",67],["T_WHITESPACE"," ",67],"=",["T_WHITESPACE"," ",67],["T_ARRAY","array",67],"(",["T_WHITESPACE","\n      ",67],["T_CONSTANT_ENCAPSED_STRING","'files[project_upload]'",68],["T_WHITESPACE"," ",68],["T_DOUBLE_ARROW","=>",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$validArchiveFile",68],",",["T_WHITESPACE","\n    ",68],")",";",["T_WHITESPACE","\n    ",69],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","drupalPostForm",70],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",70],",",["T_WHITESPACE"," ",70],["T_VARIABLE","$edit",70],",",["T_WHITESPACE"," ",70],["T_STRING","t",70],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",70],")",")",";",["T_WHITESPACE","\n    ",70],["T_COMMENT","\/\/ Check that submitting the form takes the user to authorize.php.\n",71],["T_WHITESPACE","    ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertUrl",72],"(",["T_CONSTANT_ENCAPSED_STRING","'core\/authorize.php'",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","assertTitle",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Update manager | Drupal'",73],")",";",["T_WHITESPACE","\n    ",73],["T_COMMENT","\/\/ Check for a success message on the page, and check that the installed\n",74],["T_WHITESPACE","    ",75],["T_COMMENT","\/\/ module now exists in the expected place in the filesystem.\n",75],["T_WHITESPACE","    ",76],["T_VARIABLE","$this",76],["T_OBJECT_OPERATOR","->",76],["T_STRING","assertRaw",76],"(",["T_STRING","t",76],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed %project_name successfully'",76],",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'%project_name'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'update_test_new_module'",76],")",")",")",";",["T_WHITESPACE","\n    ",76],["T_VARIABLE","$this",77],["T_OBJECT_OPERATOR","->",77],["T_STRING","assertTrue",77],"(",["T_STRING","file_exists",77],"(",["T_VARIABLE","$installedInfoFilePath",77],")",",",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","'The new module exists in the filesystem after it is installed with the Update Manager.'",77],")",";",["T_WHITESPACE","\n    ",77],["T_COMMENT","\/\/ Ensure the links are relative to the site root and not\n",78],["T_WHITESPACE","    ",79],["T_COMMENT","\/\/ core\/authorize.php.\n",79],["T_WHITESPACE","    ",80],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertLink",80],"(",["T_STRING","t",80],"(",["T_CONSTANT_ENCAPSED_STRING","'Install another module'",80],")",")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertLinkByHref",81],"(",["T_STRING","Url",81],["T_DOUBLE_COLON","::",81],["T_STRING","fromRoute",81],"(",["T_CONSTANT_ENCAPSED_STRING","'update.module_install'",81],")",["T_OBJECT_OPERATOR","->",81],["T_STRING","toString",81],"(",")",")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertLink",82],"(",["T_STRING","t",82],"(",["T_CONSTANT_ENCAPSED_STRING","'Enable newly added modules'",82],")",")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertLinkByHref",83],"(",["T_STRING","Url",83],["T_DOUBLE_COLON","::",83],["T_STRING","fromRoute",83],"(",["T_CONSTANT_ENCAPSED_STRING","'system.modules_list'",83],")",["T_OBJECT_OPERATOR","->",83],["T_STRING","toString",83],"(",")",")",";",["T_WHITESPACE","\n    ",83],["T_VARIABLE","$this",84],["T_OBJECT_OPERATOR","->",84],["T_STRING","assertLink",84],"(",["T_STRING","t",84],"(",["T_CONSTANT_ENCAPSED_STRING","'Administration pages'",84],")",")",";",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertLinkByHref",85],"(",["T_STRING","Url",85],["T_DOUBLE_COLON","::",85],["T_STRING","fromRoute",85],"(",["T_CONSTANT_ENCAPSED_STRING","'system.admin'",85],")",["T_OBJECT_OPERATOR","->",85],["T_STRING","toString",85],"(",")",")",";",["T_WHITESPACE","\n    ",85],["T_COMMENT","\/\/ Ensure we can reach the \"Install another module\" link.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","clickLink",87],"(",["T_STRING","t",87],"(",["T_CONSTANT_ENCAPSED_STRING","'Install another module'",87],")",")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertResponse",88],"(",["T_LNUMBER","200",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertUrl",89],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",89],")",";",["T_WHITESPACE","\n\n    ",89],["T_COMMENT","\/\/ Check that the module has the correct version before trying to update\n",91],["T_WHITESPACE","    ",92],["T_COMMENT","\/\/ it. Since the module is installed in sites\/simpletest, which only the\n",92],["T_WHITESPACE","    ",93],["T_COMMENT","\/\/ child site has access to, standard module API functions won't find it\n",93],["T_WHITESPACE","    ",94],["T_COMMENT","\/\/ when called here. To get the version, the info file must be parsed\n",94],["T_WHITESPACE","    ",95],["T_COMMENT","\/\/ directly instead.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$info_parser",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_NEW","new",96],["T_WHITESPACE"," ",96],["T_STRING","InfoParserDynamic",96],"(",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$info",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_VARIABLE","$info_parser",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","parse",97],"(",["T_VARIABLE","$installedInfoFilePath",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEqual",98],"(",["T_VARIABLE","$info",98],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",98],"]",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.0'",98],")",";",["T_WHITESPACE","\n\n    ",98],["T_COMMENT","\/\/ Enable the module.\n",100],["T_WHITESPACE","    ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","drupalPostForm",101],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules'",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'modules[Testing][update_test_new_module][enable]'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_STRING","TRUE",101],")",",",["T_WHITESPACE"," ",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'Install'",101],")",")",";",["T_WHITESPACE","\n\n    ",101],["T_COMMENT","\/\/ Define the update XML such that the new module downloaded above needs an\n",103],["T_WHITESPACE","    ",104],["T_COMMENT","\/\/ update from 8.x-1.0 to 8.x-1.1.\n",104],["T_WHITESPACE","    ",105],["T_VARIABLE","$update_test_config",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","config",105],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$system_info",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_ARRAY","array",106],"(",["T_WHITESPACE","\n      ",106],["T_CONSTANT_ENCAPSED_STRING","'update_test_new_module'",107],["T_WHITESPACE"," ",107],["T_DOUBLE_ARROW","=>",107],["T_WHITESPACE"," ",107],["T_ARRAY","array",107],"(",["T_WHITESPACE","\n        ",107],["T_CONSTANT_ENCAPSED_STRING","'project'",108],["T_WHITESPACE"," ",108],["T_DOUBLE_ARROW","=>",108],["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'update_test_new_module'",108],",",["T_WHITESPACE","\n      ",108],")",",",["T_WHITESPACE","\n    ",109],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$update_test_config",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","set",111],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$system_info",111],")",["T_OBJECT_OPERATOR","->",111],["T_STRING","save",111],"(",")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$xml_mapping",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],"(",["T_WHITESPACE","\n      ",112],["T_CONSTANT_ENCAPSED_STRING","'update_test_new_module'",113],["T_WHITESPACE"," ",113],["T_DOUBLE_ARROW","=>",113],["T_WHITESPACE"," ",113],["T_CONSTANT_ENCAPSED_STRING","'1_1'",113],",",["T_WHITESPACE","\n    ",113],")",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","refreshUpdateStatus",115],"(",["T_VARIABLE","$xml_mapping",115],")",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ Run the updates for the new module.\n",117],["T_WHITESPACE","    ",118],["T_VARIABLE","$this",118],["T_OBJECT_OPERATOR","->",118],["T_STRING","drupalPostForm",118],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates\/update'",118],",",["T_WHITESPACE"," ",118],["T_ARRAY","array",118],"(",["T_CONSTANT_ENCAPSED_STRING","'projects[update_test_new_module]'",118],["T_WHITESPACE"," ",118],["T_DOUBLE_ARROW","=>",118],["T_WHITESPACE"," ",118],["T_STRING","TRUE",118],")",",",["T_WHITESPACE"," ",118],["T_STRING","t",118],"(",["T_CONSTANT_ENCAPSED_STRING","'Download these updates'",118],")",")",";",["T_WHITESPACE","\n    ",118],["T_VARIABLE","$this",119],["T_OBJECT_OPERATOR","->",119],["T_STRING","drupalPostForm",119],"(",["T_STRING","NULL",119],",",["T_WHITESPACE"," ",119],["T_ARRAY","array",119],"(",["T_CONSTANT_ENCAPSED_STRING","'maintenance_mode'",119],["T_WHITESPACE"," ",119],["T_DOUBLE_ARROW","=>",119],["T_WHITESPACE"," ",119],["T_STRING","FALSE",119],")",",",["T_WHITESPACE"," ",119],["T_STRING","t",119],"(",["T_CONSTANT_ENCAPSED_STRING","'Continue'",119],")",")",";",["T_WHITESPACE","\n    ",119],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","assertText",120],"(",["T_STRING","t",120],"(",["T_CONSTANT_ENCAPSED_STRING","'Update was completed successfully.'",120],")",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertRaw",121],"(",["T_STRING","t",121],"(",["T_CONSTANT_ENCAPSED_STRING","'Installed %project_name successfully'",121],",",["T_WHITESPACE"," ",121],["T_ARRAY","array",121],"(",["T_CONSTANT_ENCAPSED_STRING","'%project_name'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_CONSTANT_ENCAPSED_STRING","'update_test_new_module'",121],")",")",")",";",["T_WHITESPACE","\n\n    ",121],["T_COMMENT","\/\/ Parse the info file again to check that the module has been updated to\n",123],["T_WHITESPACE","    ",124],["T_COMMENT","\/\/ 8.x-1.1.\n",124],["T_WHITESPACE","    ",125],["T_VARIABLE","$info",125],["T_WHITESPACE"," ",125],"=",["T_WHITESPACE"," ",125],["T_VARIABLE","$info_parser",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","parse",125],"(",["T_VARIABLE","$installedInfoFilePath",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","assertEqual",126],"(",["T_VARIABLE","$info",126],"[",["T_CONSTANT_ENCAPSED_STRING","'version'",126],"]",",",["T_WHITESPACE"," ",126],["T_CONSTANT_ENCAPSED_STRING","'8.x-1.1'",126],")",";",["T_WHITESPACE","\n  ",126],"}",["T_WHITESPACE","\n\n  ",127],["T_DOC_COMMENT","\/**\n   * Ensures that archiver extensions are properly merged in the UI.\n   *\/",129],["T_WHITESPACE","\n  ",131],["T_FUNCTION","function",132],["T_WHITESPACE"," ",132],["T_STRING","testFileNameExtensionMerging",132],"(",")",["T_WHITESPACE"," ",132],"{",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$this",133],["T_OBJECT_OPERATOR","->",133],["T_STRING","drupalGet",133],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",133],")",";",["T_WHITESPACE","\n    ",133],["T_COMMENT","\/\/ Make sure the bogus extension supported by update_test.module is there.\n",134],["T_WHITESPACE","    ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","assertPattern",135],"(",["T_CONSTANT_ENCAPSED_STRING","'\/file extensions are supported:.*update-test-extension\/'",135],",",["T_WHITESPACE"," ",135],["T_CONSTANT_ENCAPSED_STRING","\"Found 'update-test-extension' extension.\"",135],")",";",["T_WHITESPACE","\n    ",135],["T_COMMENT","\/\/ Make sure it didn't clobber the first option from core.\n",136],["T_WHITESPACE","    ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","assertPattern",137],"(",["T_CONSTANT_ENCAPSED_STRING","'\/file extensions are supported:.*tar\/'",137],",",["T_WHITESPACE"," ",137],["T_CONSTANT_ENCAPSED_STRING","\"Found 'tar' extension.\"",137],")",";",["T_WHITESPACE","\n  ",137],"}",["T_WHITESPACE","\n\n  ",138],["T_DOC_COMMENT","\/**\n   * Checks the messages on update manager pages when missing a security update.\n   *\/",140],["T_WHITESPACE","\n  ",142],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","testUpdateManagerCoreSecurityUpdateMessages",143],"(",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_VARIABLE","$setting",144],["T_WHITESPACE"," ",144],"=",["T_WHITESPACE"," ",144],["T_ARRAY","array",144],"(",["T_WHITESPACE","\n      ",144],["T_CONSTANT_ENCAPSED_STRING","'#all'",145],["T_WHITESPACE"," ",145],["T_DOUBLE_ARROW","=>",145],["T_WHITESPACE"," ",145],["T_ARRAY","array",145],"(",["T_WHITESPACE","\n        ",145],["T_CONSTANT_ENCAPSED_STRING","'version'",146],["T_WHITESPACE"," ",146],["T_DOUBLE_ARROW","=>",146],["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'8.0.0'",146],",",["T_WHITESPACE","\n      ",146],")",",",["T_WHITESPACE","\n    ",147],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","config",149],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.settings'",149],")",["T_WHITESPACE","\n      ",149],["T_OBJECT_OPERATOR","->",150],["T_STRING","set",150],"(",["T_CONSTANT_ENCAPSED_STRING","'system_info'",150],",",["T_WHITESPACE"," ",150],["T_VARIABLE","$setting",150],")",["T_WHITESPACE","\n      ",150],["T_OBJECT_OPERATOR","->",151],["T_STRING","set",151],"(",["T_CONSTANT_ENCAPSED_STRING","'xml_map'",151],",",["T_WHITESPACE"," ",151],["T_ARRAY","array",151],"(",["T_CONSTANT_ENCAPSED_STRING","'drupal'",151],["T_WHITESPACE"," ",151],["T_DOUBLE_ARROW","=>",151],["T_WHITESPACE"," ",151],["T_CONSTANT_ENCAPSED_STRING","'0.2-sec'",151],")",")",["T_WHITESPACE","\n      ",151],["T_OBJECT_OPERATOR","->",152],["T_STRING","save",152],"(",")",";",["T_WHITESPACE","\n    ",152],["T_VARIABLE","$this",153],["T_OBJECT_OPERATOR","->",153],["T_STRING","config",153],"(",["T_CONSTANT_ENCAPSED_STRING","'update.settings'",153],")",["T_WHITESPACE","\n      ",153],["T_OBJECT_OPERATOR","->",154],["T_STRING","set",154],"(",["T_CONSTANT_ENCAPSED_STRING","'fetch.url'",154],",",["T_WHITESPACE"," ",154],["T_STRING","Url",154],["T_DOUBLE_COLON","::",154],["T_STRING","fromRoute",154],"(",["T_CONSTANT_ENCAPSED_STRING","'update_test.update_test'",154],")",["T_OBJECT_OPERATOR","->",154],["T_STRING","setAbsolute",154],"(",")",["T_OBJECT_OPERATOR","->",154],["T_STRING","toString",154],"(",")",")",["T_WHITESPACE","\n      ",154],["T_OBJECT_OPERATOR","->",155],["T_STRING","save",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_COMMENT","\/\/ Initialize the update status.\n",156],["T_WHITESPACE","    ",157],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","drupalGet",157],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates'",157],")",";",["T_WHITESPACE","\n\n    ",157],["T_COMMENT","\/\/ Now, make sure none of the Update manager pages have duplicate messages\n",159],["T_WHITESPACE","    ",160],["T_COMMENT","\/\/ about core missing a security update.\n",160],["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalGet",162],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/install'",162],")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertNoText",163],"(",["T_STRING","t",163],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",163],")",")",";",["T_WHITESPACE","\n\n    ",163],["T_VARIABLE","$this",165],["T_OBJECT_OPERATOR","->",165],["T_STRING","drupalGet",165],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/modules\/update'",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$this",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","assertNoText",166],"(",["T_STRING","t",166],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",166],")",")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","drupalGet",168],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/appearance\/install'",168],")",";",["T_WHITESPACE","\n    ",168],["T_VARIABLE","$this",169],["T_OBJECT_OPERATOR","->",169],["T_STRING","assertNoText",169],"(",["T_STRING","t",169],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",169],")",")",";",["T_WHITESPACE","\n\n    ",169],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","drupalGet",171],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/appearance\/update'",171],")",";",["T_WHITESPACE","\n    ",171],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","assertNoText",172],"(",["T_STRING","t",172],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",172],")",")",";",["T_WHITESPACE","\n\n    ",172],["T_VARIABLE","$this",174],["T_OBJECT_OPERATOR","->",174],["T_STRING","drupalGet",174],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates\/install'",174],")",";",["T_WHITESPACE","\n    ",174],["T_VARIABLE","$this",175],["T_OBJECT_OPERATOR","->",175],["T_STRING","assertNoText",175],"(",["T_STRING","t",175],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",175],")",")",";",["T_WHITESPACE","\n\n    ",175],["T_VARIABLE","$this",177],["T_OBJECT_OPERATOR","->",177],["T_STRING","drupalGet",177],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/reports\/updates\/update'",177],")",";",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","assertNoText",178],"(",["T_STRING","t",178],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",178],")",")",";",["T_WHITESPACE","\n\n    ",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","drupalGet",180],"(",["T_CONSTANT_ENCAPSED_STRING","'admin\/update\/ready'",180],")",";",["T_WHITESPACE","\n    ",180],["T_VARIABLE","$this",181],["T_OBJECT_OPERATOR","->",181],["T_STRING","assertNoText",181],"(",["T_STRING","t",181],"(",["T_CONSTANT_ENCAPSED_STRING","'There is a security update available for your version of Drupal.'",181],")",")",";",["T_WHITESPACE","\n  ",181],"}",["T_WHITESPACE","\n\n  ",182],["T_DOC_COMMENT","\/**\n   * Tests only an *.info.yml file are detected without supporting files.\n   *\/",184],["T_WHITESPACE","\n  ",186],["T_PUBLIC","public",187],["T_WHITESPACE"," ",187],["T_FUNCTION","function",187],["T_WHITESPACE"," ",187],["T_STRING","testUpdateDirectory",187],"(",")",["T_WHITESPACE"," ",187],"{",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$type",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","Updater",188],["T_DOUBLE_COLON","::",188],["T_STRING","getUpdaterFromDirectory",188],"(",["T_NS_SEPARATOR","\\",188],["T_STRING","Drupal",188],["T_DOUBLE_COLON","::",188],["T_STRING","root",188],"(",")",["T_WHITESPACE"," ",188],".",["T_WHITESPACE"," ",188],["T_CONSTANT_ENCAPSED_STRING","'\/core\/modules\/update\/tests\/modules\/aaa_update_test'",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","assertEqual",189],"(",["T_VARIABLE","$type",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Core\\\\Updater\\\\Module'",189],",",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","'Detected a Module'",189],")",";",["T_WHITESPACE","\n\n    ",189],["T_VARIABLE","$type",191],["T_WHITESPACE"," ",191],"=",["T_WHITESPACE"," ",191],["T_STRING","Updater",191],["T_DOUBLE_COLON","::",191],["T_STRING","getUpdaterFromDirectory",191],"(",["T_NS_SEPARATOR","\\",191],["T_STRING","Drupal",191],["T_DOUBLE_COLON","::",191],["T_STRING","root",191],"(",")",["T_WHITESPACE"," ",191],".",["T_WHITESPACE"," ",191],["T_CONSTANT_ENCAPSED_STRING","'\/core\/modules\/update\/tests\/themes\/update_test_basetheme'",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertEqual",192],"(",["T_VARIABLE","$type",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\\\Core\\\\Updater\\\\Theme'",192],",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'Detected a Theme.'",192],")",";",["T_WHITESPACE","\n  ",192],"}",["T_WHITESPACE","\n\n",193],"}",["T_WHITESPACE","\n",195]]
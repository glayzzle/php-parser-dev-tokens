[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","update",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Config",5],["T_NS_SEPARATOR","\\",5],["T_STRING","ConfigFactoryInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencyInjection",6],["T_NS_SEPARATOR","\\",6],["T_STRING","DependencySerializationTrait",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","GuzzleHttp",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ClientInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","GuzzleHttp",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Exception",8],["T_NS_SEPARATOR","\\",8],["T_STRING","RequestException",8],";",["T_WHITESPACE","\n\n",8],["T_DOC_COMMENT","\/**\n * Fetches project information from remote locations.\n *\/",10],["T_WHITESPACE","\n",12],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","UpdateFetcher",13],["T_WHITESPACE"," ",13],["T_IMPLEMENTS","implements",13],["T_WHITESPACE"," ",13],["T_STRING","UpdateFetcherInterface",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","DependencySerializationTrait",15],";",["T_WHITESPACE","\n\n  ",15],["T_DOC_COMMENT","\/**\n   * URL to check for updates, if a given project doesn't define its own.\n   *\/",17],["T_WHITESPACE","\n  ",19],["T_CONST","const",20],["T_WHITESPACE"," ",20],["T_STRING","UPDATE_DEFAULT_URL",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'http:\/\/updates.drupal.org\/release-history'",20],";",["T_WHITESPACE","\n\n  ",20],["T_DOC_COMMENT","\/**\n   * The fetch url configured in the update settings.\n   *\n   * @var string\n   *\/",22],["T_WHITESPACE","\n  ",26],["T_PROTECTED","protected",27],["T_WHITESPACE"," ",27],["T_VARIABLE","$fetchUrl",27],";",["T_WHITESPACE","\n\n  ",27],["T_DOC_COMMENT","\/**\n   * The update settings\n   *\n   * @var \\Drupal\\Core\\Config\\Config\n   *\/",29],["T_WHITESPACE","\n  ",33],["T_PROTECTED","protected",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$updateSettings",34],";",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * The HTTP client to fetch the feed data with.\n   *\n   * @var \\GuzzleHttp\\ClientInterface\n   *\/",36],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_VARIABLE","$httpClient",41],";",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * Constructs a UpdateFetcher.\n   *\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory.\n   * @param \\GuzzleHttp\\ClientInterface $http_client\n   *   A Guzzle client object.\n   *\/",43],["T_WHITESPACE","\n  ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_STRING","ConfigFactoryInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$config_factory",51],",",["T_WHITESPACE"," ",51],["T_STRING","ClientInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$http_client",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","fetchUrl",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$config_factory",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'update.settings'",52],")",["T_OBJECT_OPERATOR","->",52],["T_STRING","get",52],"(",["T_CONSTANT_ENCAPSED_STRING","'fetch.url'",52],")",";",["T_WHITESPACE","\n    ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","httpClient",53],["T_WHITESPACE"," ",53],"=",["T_WHITESPACE"," ",53],["T_VARIABLE","$http_client",53],";",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","updateSettings",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_VARIABLE","$config_factory",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","get",54],"(",["T_CONSTANT_ENCAPSED_STRING","'update.settings'",54],")",";",["T_WHITESPACE","\n  ",54],"}",["T_WHITESPACE","\n\n  ",55],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",57],["T_WHITESPACE","\n  ",59],["T_PUBLIC","public",60],["T_WHITESPACE"," ",60],["T_FUNCTION","function",60],["T_WHITESPACE"," ",60],["T_STRING","fetchProjectData",60],"(",["T_ARRAY","array",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$project",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$site_key",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","''",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n    ",60],["T_VARIABLE","$url",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_VARIABLE","$this",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","buildFetchUrl",61],"(",["T_VARIABLE","$project",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$site_key",61],")",";",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$data",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_CONSTANT_ENCAPSED_STRING","''",62],";",["T_WHITESPACE","\n    ",62],["T_TRY","try",63],["T_WHITESPACE"," ",63],"{",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$data",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_STRING_CAST","(string)",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","httpClient",64],["T_WHITESPACE","\n        ",64],["T_OBJECT_OPERATOR","->",65],["T_STRING","get",65],"(",["T_VARIABLE","$url",65],",",["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'headers'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_ARRAY","array",65],"(",["T_CONSTANT_ENCAPSED_STRING","'Accept'",65],["T_WHITESPACE"," ",65],["T_DOUBLE_ARROW","=>",65],["T_WHITESPACE"," ",65],["T_CONSTANT_ENCAPSED_STRING","'text\/xml'",65],")",")",")",["T_WHITESPACE","\n        ",65],["T_OBJECT_OPERATOR","->",66],["T_STRING","getBody",66],"(",")",";",["T_WHITESPACE","\n    ",66],"}",["T_WHITESPACE","\n    ",67],["T_CATCH","catch",68],["T_WHITESPACE"," ",68],"(",["T_STRING","RequestException",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$exception",68],")",["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n      ",68],["T_STRING","watchdog_exception",69],"(",["T_CONSTANT_ENCAPSED_STRING","'update'",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$exception",69],")",";",["T_WHITESPACE","\n    ",69],"}",["T_WHITESPACE","\n    ",70],["T_RETURN","return",71],["T_WHITESPACE"," ",71],["T_VARIABLE","$data",71],";",["T_WHITESPACE","\n  ",71],"}",["T_WHITESPACE","\n\n  ",72],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",74],["T_WHITESPACE","\n  ",76],["T_PUBLIC","public",77],["T_WHITESPACE"," ",77],["T_FUNCTION","function",77],["T_WHITESPACE"," ",77],["T_STRING","buildFetchUrl",77],"(",["T_ARRAY","array",77],["T_WHITESPACE"," ",77],["T_VARIABLE","$project",77],",",["T_WHITESPACE"," ",77],["T_VARIABLE","$site_key",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_CONSTANT_ENCAPSED_STRING","''",77],")",["T_WHITESPACE"," ",77],"{",["T_WHITESPACE","\n    ",77],["T_VARIABLE","$name",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$project",78],"[",["T_CONSTANT_ENCAPSED_STRING","'name'",78],"]",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$url",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","getFetchBaseUrl",79],"(",["T_VARIABLE","$project",79],")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$url",80],["T_WHITESPACE"," ",80],["T_CONCAT_EQUAL",".=",80],["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'\/'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$name",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'\/'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_NS_SEPARATOR","\\",80],["T_STRING","Drupal",80],["T_DOUBLE_COLON","::",80],["T_STRING","CORE_COMPATIBILITY",80],";",["T_WHITESPACE","\n\n    ",80],["T_COMMENT","\/\/ Only append usage information if we have a site key and the project is\n",82],["T_WHITESPACE","    ",83],["T_COMMENT","\/\/ enabled. We do not want to record usage statistics for disabled projects.\n",83],["T_WHITESPACE","    ",84],["T_IF","if",84],["T_WHITESPACE"," ",84],"(","!",["T_EMPTY","empty",84],"(",["T_VARIABLE","$site_key",84],")",["T_WHITESPACE"," ",84],["T_BOOLEAN_AND","&&",84],["T_WHITESPACE"," ",84],"(",["T_STRING","strpos",84],"(",["T_VARIABLE","$project",84],"[",["T_CONSTANT_ENCAPSED_STRING","'project_type'",84],"]",",",["T_WHITESPACE"," ",84],["T_CONSTANT_ENCAPSED_STRING","'disabled'",84],")",["T_WHITESPACE"," ",84],["T_IS_IDENTICAL","===",84],["T_WHITESPACE"," ",84],["T_STRING","FALSE",84],")",")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n      ",84],["T_COMMENT","\/\/ Append the site key.\n",85],["T_WHITESPACE","      ",86],["T_VARIABLE","$url",86],["T_WHITESPACE"," ",86],["T_CONCAT_EQUAL",".=",86],["T_WHITESPACE"," ",86],"(",["T_STRING","strpos",86],"(",["T_VARIABLE","$url",86],",",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'?'",86],")",["T_WHITESPACE"," ",86],["T_IS_NOT_IDENTICAL","!==",86],["T_WHITESPACE"," ",86],["T_STRING","FALSE",86],")",["T_WHITESPACE"," ",86],"?",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'&'",86],["T_WHITESPACE"," ",86],":",["T_WHITESPACE"," ",86],["T_CONSTANT_ENCAPSED_STRING","'?'",86],";",["T_WHITESPACE","\n      ",86],["T_VARIABLE","$url",87],["T_WHITESPACE"," ",87],["T_CONCAT_EQUAL",".=",87],["T_WHITESPACE"," ",87],["T_CONSTANT_ENCAPSED_STRING","'site_key='",87],";",["T_WHITESPACE","\n      ",87],["T_VARIABLE","$url",88],["T_WHITESPACE"," ",88],["T_CONCAT_EQUAL",".=",88],["T_WHITESPACE"," ",88],["T_STRING","rawurlencode",88],"(",["T_VARIABLE","$site_key",88],")",";",["T_WHITESPACE","\n\n      ",88],["T_COMMENT","\/\/ Append the version.\n",90],["T_WHITESPACE","      ",91],["T_IF","if",91],["T_WHITESPACE"," ",91],"(","!",["T_EMPTY","empty",91],"(",["T_VARIABLE","$project",91],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",91],"]","[",["T_CONSTANT_ENCAPSED_STRING","'version'",91],"]",")",")",["T_WHITESPACE"," ",91],"{",["T_WHITESPACE","\n        ",91],["T_VARIABLE","$url",92],["T_WHITESPACE"," ",92],["T_CONCAT_EQUAL",".=",92],["T_WHITESPACE"," ",92],["T_CONSTANT_ENCAPSED_STRING","'&version='",92],";",["T_WHITESPACE","\n        ",92],["T_VARIABLE","$url",93],["T_WHITESPACE"," ",93],["T_CONCAT_EQUAL",".=",93],["T_WHITESPACE"," ",93],["T_STRING","rawurlencode",93],"(",["T_VARIABLE","$project",93],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",93],"]","[",["T_CONSTANT_ENCAPSED_STRING","'version'",93],"]",")",";",["T_WHITESPACE","\n      ",93],"}",["T_WHITESPACE","\n\n      ",94],["T_COMMENT","\/\/ Append the list of modules or themes enabled.\n",96],["T_WHITESPACE","      ",97],["T_VARIABLE","$list",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_STRING","array_keys",97],"(",["T_VARIABLE","$project",97],"[",["T_CONSTANT_ENCAPSED_STRING","'includes'",97],"]",")",";",["T_WHITESPACE","\n      ",97],["T_VARIABLE","$url",98],["T_WHITESPACE"," ",98],["T_CONCAT_EQUAL",".=",98],["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'&list='",98],";",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$url",99],["T_WHITESPACE"," ",99],["T_CONCAT_EQUAL",".=",99],["T_WHITESPACE"," ",99],["T_STRING","rawurlencode",99],"(",["T_STRING","implode",99],"(",["T_CONSTANT_ENCAPSED_STRING","','",99],",",["T_WHITESPACE"," ",99],["T_VARIABLE","$list",99],")",")",";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n    ",100],["T_RETURN","return",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$url",101],";",["T_WHITESPACE","\n  ",101],"}",["T_WHITESPACE","\n\n  ",102],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",104],["T_WHITESPACE","\n  ",106],["T_PUBLIC","public",107],["T_WHITESPACE"," ",107],["T_FUNCTION","function",107],["T_WHITESPACE"," ",107],["T_STRING","getFetchBaseUrl",107],"(",["T_VARIABLE","$project",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n    ",107],["T_IF","if",108],["T_WHITESPACE"," ",108],"(",["T_ISSET","isset",108],"(",["T_VARIABLE","$project",108],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",108],"]","[",["T_CONSTANT_ENCAPSED_STRING","'project status url'",108],"]",")",")",["T_WHITESPACE"," ",108],"{",["T_WHITESPACE","\n      ",108],["T_VARIABLE","$url",109],["T_WHITESPACE"," ",109],"=",["T_WHITESPACE"," ",109],["T_VARIABLE","$project",109],"[",["T_CONSTANT_ENCAPSED_STRING","'info'",109],"]","[",["T_CONSTANT_ENCAPSED_STRING","'project status url'",109],"]",";",["T_WHITESPACE","\n    ",109],"}",["T_WHITESPACE","\n    ",110],["T_ELSE","else",111],["T_WHITESPACE"," ",111],"{",["T_WHITESPACE","\n      ",111],["T_VARIABLE","$url",112],["T_WHITESPACE"," ",112],"=",["T_WHITESPACE"," ",112],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","fetchUrl",112],";",["T_WHITESPACE","\n      ",112],["T_IF","if",113],["T_WHITESPACE"," ",113],"(",["T_EMPTY","empty",113],"(",["T_VARIABLE","$url",113],")",")",["T_WHITESPACE"," ",113],"{",["T_WHITESPACE","\n        ",113],["T_VARIABLE","$url",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_STATIC","static",114],["T_DOUBLE_COLON","::",114],["T_STRING","UPDATE_DEFAULT_URL",114],";",["T_WHITESPACE","\n      ",114],"}",["T_WHITESPACE","\n    ",115],"}",["T_WHITESPACE","\n    ",116],["T_RETURN","return",117],["T_WHITESPACE"," ",117],["T_VARIABLE","$url",117],";",["T_WHITESPACE","\n  ",117],"}",["T_WHITESPACE","\n\n",118],"}",["T_WHITESPACE","\n",120]]
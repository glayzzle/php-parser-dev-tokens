[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","big_pipe",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Render",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Asset",5],["T_NS_SEPARATOR","\\",5],["T_STRING","AssetCollectionRendererInterface",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Asset",6],["T_NS_SEPARATOR","\\",6],["T_STRING","AssetResolverInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Config",7],["T_NS_SEPARATOR","\\",7],["T_STRING","ConfigFactoryInterface",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Extension",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ModuleHandlerInterface",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Form",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EnforcedResponseException",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Render",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AttachmentsInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Render",11],["T_NS_SEPARATOR","\\",11],["T_STRING","AttachmentsResponseProcessorInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Render",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HtmlResponseAttachmentsProcessor",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Render",13],["T_NS_SEPARATOR","\\",13],["T_STRING","RendererInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","HttpFoundation",14],["T_NS_SEPARATOR","\\",14],["T_STRING","RequestStack",14],";",["T_WHITESPACE","\n\n",14],["T_DOC_COMMENT","\/**\n * Processes attachments of HTML responses with BigPipe enabled.\n *\n * @see \\Drupal\\Core\\Render\\HtmlResponseAttachmentsProcessor\n * @see \\Drupal\\big_pipe\\Render\\BigPipeInterface\n *\/",16],["T_WHITESPACE","\n",21],["T_CLASS","class",22],["T_WHITESPACE"," ",22],["T_STRING","BigPipeResponseAttachmentsProcessor",22],["T_WHITESPACE"," ",22],["T_EXTENDS","extends",22],["T_WHITESPACE"," ",22],["T_STRING","HtmlResponseAttachmentsProcessor",22],["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n\n  ",22],["T_DOC_COMMENT","\/**\n   * The HTML response attachments processor service.\n   *\n   * @var \\Drupal\\Core\\Render\\AttachmentsResponseProcessorInterface\n   *\/",24],["T_WHITESPACE","\n  ",28],["T_PROTECTED","protected",29],["T_WHITESPACE"," ",29],["T_VARIABLE","$htmlResponseAttachmentsProcessor",29],";",["T_WHITESPACE","\n\n  ",29],["T_DOC_COMMENT","\/**\n   * Constructs a BigPipeResponseAttachmentsProcessor object.\n   *\n   * @param \\Drupal\\Core\\Render\\AttachmentsResponseProcessorInterface $html_response_attachments_processor\n   *   The HTML response attachments processor service.\n   * @param \\Drupal\\Core\\Asset\\AssetResolverInterface $asset_resolver\n   *   An asset resolver.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   A config factory for retrieving required config objects.\n   * @param \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface $css_collection_renderer\n   *   The CSS asset collection renderer.\n   * @param \\Drupal\\Core\\Asset\\AssetCollectionRendererInterface $js_collection_renderer\n   *   The JS asset collection renderer.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   * @param \\Drupal\\Core\\Render\\RendererInterface $renderer\n   *   The renderer.\n   * @param \\Drupal\\Core\\Extension\\ModuleHandlerInterface $module_handler\n   *   The module handler service.\n   *\/",31],["T_WHITESPACE","\n  ",50],["T_PUBLIC","public",51],["T_WHITESPACE"," ",51],["T_FUNCTION","function",51],["T_WHITESPACE"," ",51],["T_STRING","__construct",51],"(",["T_STRING","AttachmentsResponseProcessorInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$html_response_attachments_processor",51],",",["T_WHITESPACE"," ",51],["T_STRING","AssetResolverInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$asset_resolver",51],",",["T_WHITESPACE"," ",51],["T_STRING","ConfigFactoryInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$config_factory",51],",",["T_WHITESPACE"," ",51],["T_STRING","AssetCollectionRendererInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$css_collection_renderer",51],",",["T_WHITESPACE"," ",51],["T_STRING","AssetCollectionRendererInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$js_collection_renderer",51],",",["T_WHITESPACE"," ",51],["T_STRING","RequestStack",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$request_stack",51],",",["T_WHITESPACE"," ",51],["T_STRING","RendererInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$renderer",51],",",["T_WHITESPACE"," ",51],["T_STRING","ModuleHandlerInterface",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$module_handler",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n    ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","htmlResponseAttachmentsProcessor",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_VARIABLE","$html_response_attachments_processor",52],";",["T_WHITESPACE","\n    ",52],["T_STRING","parent",53],["T_DOUBLE_COLON","::",53],["T_STRING","__construct",53],"(",["T_VARIABLE","$asset_resolver",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$config_factory",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$css_collection_renderer",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$js_collection_renderer",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$request_stack",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$renderer",53],",",["T_WHITESPACE"," ",53],["T_VARIABLE","$module_handler",53],")",";",["T_WHITESPACE","\n  ",53],"}",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",56],["T_WHITESPACE","\n  ",58],["T_PUBLIC","public",59],["T_WHITESPACE"," ",59],["T_FUNCTION","function",59],["T_WHITESPACE"," ",59],["T_STRING","processAttachments",59],"(",["T_STRING","AttachmentsInterface",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$response",59],")",["T_WHITESPACE"," ",59],"{",["T_WHITESPACE","\n    ",59],["T_STRING","assert",60],"(",["T_CONSTANT_ENCAPSED_STRING","'$response instanceof \\Drupal\\Core\\Render\\HtmlResponse'",60],")",";",["T_WHITESPACE","\n\n    ",60],["T_COMMENT","\/\/ First, render the actual placeholders; this will cause the BigPipe\n",62],["T_WHITESPACE","    ",63],["T_COMMENT","\/\/ placeholder strategy to generate BigPipe placeholders. We need those to\n",63],["T_WHITESPACE","    ",64],["T_COMMENT","\/\/ exist already so that we can extract BigPipe placeholders. This is hence\n",64],["T_WHITESPACE","    ",65],["T_COMMENT","\/\/ a bit of unfortunate but necessary duplication.\n",65],["T_WHITESPACE","    ",66],["T_COMMENT","\/\/ @see \\Drupal\\big_pipe\\Render\\Placeholder\\BigPipeStrategy\n",66],["T_WHITESPACE","    ",67],["T_COMMENT","\/\/ (Note this is copied verbatim from\n",67],["T_WHITESPACE","    ",68],["T_COMMENT","\/\/ \\Drupal\\Core\\Render\\HtmlResponseAttachmentsProcessor::processAttachments)\n",68],["T_WHITESPACE","    ",69],["T_TRY","try",69],["T_WHITESPACE"," ",69],"{",["T_WHITESPACE","\n      ",69],["T_VARIABLE","$response",70],["T_WHITESPACE"," ",70],"=",["T_WHITESPACE"," ",70],["T_VARIABLE","$this",70],["T_OBJECT_OPERATOR","->",70],["T_STRING","renderPlaceholders",70],"(",["T_VARIABLE","$response",70],")",";",["T_WHITESPACE","\n    ",70],"}",["T_WHITESPACE","\n    ",71],["T_CATCH","catch",72],["T_WHITESPACE"," ",72],"(",["T_STRING","EnforcedResponseException",72],["T_WHITESPACE"," ",72],["T_VARIABLE","$e",72],")",["T_WHITESPACE"," ",72],"{",["T_WHITESPACE","\n      ",72],["T_RETURN","return",73],["T_WHITESPACE"," ",73],["T_VARIABLE","$e",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","getResponse",73],"(",")",";",["T_WHITESPACE","\n    ",73],"}",["T_WHITESPACE","\n\n    ",74],["T_COMMENT","\/\/ Extract BigPipe placeholders; HtmlResponseAttachmentsProcessor does not\n",76],["T_WHITESPACE","    ",77],["T_COMMENT","\/\/ know (nor need to know) how to process those.\n",77],["T_WHITESPACE","    ",78],["T_VARIABLE","$attachments",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_VARIABLE","$response",78],["T_OBJECT_OPERATOR","->",78],["T_STRING","getAttachments",78],"(",")",";",["T_WHITESPACE","\n    ",78],["T_VARIABLE","$big_pipe_placeholders",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],"[","]",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$big_pipe_nojs_placeholders",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"[","]",";",["T_WHITESPACE","\n    ",80],["T_IF","if",81],["T_WHITESPACE"," ",81],"(",["T_ISSET","isset",81],"(",["T_VARIABLE","$attachments",81],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",81],"]",")",")",["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n      ",81],["T_VARIABLE","$big_pipe_placeholders",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_VARIABLE","$attachments",82],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",82],"]",";",["T_WHITESPACE","\n      ",82],["T_UNSET","unset",83],"(",["T_VARIABLE","$attachments",83],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",83],"]",")",";",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n    ",84],["T_IF","if",85],["T_WHITESPACE"," ",85],"(",["T_ISSET","isset",85],"(",["T_VARIABLE","$attachments",85],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",85],"]",")",")",["T_WHITESPACE"," ",85],"{",["T_WHITESPACE","\n      ",85],["T_VARIABLE","$big_pipe_nojs_placeholders",86],["T_WHITESPACE"," ",86],"=",["T_WHITESPACE"," ",86],["T_VARIABLE","$attachments",86],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",86],"]",";",["T_WHITESPACE","\n      ",86],["T_UNSET","unset",87],"(",["T_VARIABLE","$attachments",87],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",87],"]",")",";",["T_WHITESPACE","\n    ",87],"}",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$html_response",89],["T_WHITESPACE"," ",89],"=",["T_WHITESPACE"," ",89],["T_CLONE","clone",89],["T_WHITESPACE"," ",89],["T_VARIABLE","$response",89],";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$html_response",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","setAttachments",90],"(",["T_VARIABLE","$attachments",90],")",";",["T_WHITESPACE","\n\n    ",90],["T_COMMENT","\/\/ Call HtmlResponseAttachmentsProcessor to process all other attachments.\n",92],["T_WHITESPACE","    ",93],["T_VARIABLE","$processed_html_response",93],["T_WHITESPACE"," ",93],"=",["T_WHITESPACE"," ",93],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","htmlResponseAttachmentsProcessor",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","processAttachments",93],"(",["T_VARIABLE","$html_response",93],")",";",["T_WHITESPACE","\n\n    ",93],["T_COMMENT","\/\/ Restore BigPipe placeholders.\n",95],["T_WHITESPACE","    ",96],["T_VARIABLE","$attachments",96],["T_WHITESPACE"," ",96],"=",["T_WHITESPACE"," ",96],["T_VARIABLE","$processed_html_response",96],["T_OBJECT_OPERATOR","->",96],["T_STRING","getAttachments",96],"(",")",";",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$big_pipe_response",97],["T_WHITESPACE"," ",97],"=",["T_WHITESPACE"," ",97],["T_CLONE","clone",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$processed_html_response",97],";",["T_WHITESPACE","\n    ",97],["T_IF","if",98],["T_WHITESPACE"," ",98],"(",["T_STRING","count",98],"(",["T_VARIABLE","$big_pipe_placeholders",98],")",")",["T_WHITESPACE"," ",98],"{",["T_WHITESPACE","\n      ",98],["T_VARIABLE","$attachments",99],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",99],"]",["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],["T_VARIABLE","$big_pipe_placeholders",99],";",["T_WHITESPACE","\n    ",99],"}",["T_WHITESPACE","\n    ",100],["T_IF","if",101],["T_WHITESPACE"," ",101],"(",["T_STRING","count",101],"(",["T_VARIABLE","$big_pipe_nojs_placeholders",101],")",")",["T_WHITESPACE"," ",101],"{",["T_WHITESPACE","\n      ",101],["T_VARIABLE","$attachments",102],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",102],"]",["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$big_pipe_nojs_placeholders",102],";",["T_WHITESPACE","\n    ",102],"}",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$big_pipe_response",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","setAttachments",104],"(",["T_VARIABLE","$attachments",104],")",";",["T_WHITESPACE","\n\n    ",104],["T_RETURN","return",106],["T_WHITESPACE"," ",106],["T_VARIABLE","$big_pipe_response",106],";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n",107],"}",["T_WHITESPACE","\n",109]]
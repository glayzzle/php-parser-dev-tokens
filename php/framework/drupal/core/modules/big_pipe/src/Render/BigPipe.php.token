[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","big_pipe",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Render",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Crypt",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Component",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Utility",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Html",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Core",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Ajax",7],["T_NS_SEPARATOR","\\",7],["T_STRING","AjaxResponse",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Core",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Ajax",8],["T_NS_SEPARATOR","\\",8],["T_STRING","ReplaceCommand",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Asset",9],["T_NS_SEPARATOR","\\",9],["T_STRING","AttachedAssets",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Asset",10],["T_NS_SEPARATOR","\\",10],["T_STRING","AttachedAssetsInterface",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Core",11],["T_NS_SEPARATOR","\\",11],["T_STRING","Config",11],["T_NS_SEPARATOR","\\",11],["T_STRING","ConfigFactoryInterface",11],";",["T_WHITESPACE","\n",11],["T_USE","use",12],["T_WHITESPACE"," ",12],["T_STRING","Drupal",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Core",12],["T_NS_SEPARATOR","\\",12],["T_STRING","Render",12],["T_NS_SEPARATOR","\\",12],["T_STRING","HtmlResponse",12],";",["T_WHITESPACE","\n",12],["T_USE","use",13],["T_WHITESPACE"," ",13],["T_STRING","Drupal",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Core",13],["T_NS_SEPARATOR","\\",13],["T_STRING","Render",13],["T_NS_SEPARATOR","\\",13],["T_STRING","RendererInterface",13],";",["T_WHITESPACE","\n",13],["T_USE","use",14],["T_WHITESPACE"," ",14],["T_STRING","Symfony",14],["T_NS_SEPARATOR","\\",14],["T_STRING","Component",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventDispatcher",14],["T_NS_SEPARATOR","\\",14],["T_STRING","EventDispatcherInterface",14],";",["T_WHITESPACE","\n",14],["T_USE","use",15],["T_WHITESPACE"," ",15],["T_STRING","Symfony",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Component",15],["T_NS_SEPARATOR","\\",15],["T_STRING","HttpFoundation",15],["T_NS_SEPARATOR","\\",15],["T_STRING","Request",15],";",["T_WHITESPACE","\n",15],["T_USE","use",16],["T_WHITESPACE"," ",16],["T_STRING","Symfony",16],["T_NS_SEPARATOR","\\",16],["T_STRING","Component",16],["T_NS_SEPARATOR","\\",16],["T_STRING","HttpFoundation",16],["T_NS_SEPARATOR","\\",16],["T_STRING","RequestStack",16],";",["T_WHITESPACE","\n",16],["T_USE","use",17],["T_WHITESPACE"," ",17],["T_STRING","Symfony",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Component",17],["T_NS_SEPARATOR","\\",17],["T_STRING","HttpFoundation",17],["T_NS_SEPARATOR","\\",17],["T_STRING","Response",17],";",["T_WHITESPACE","\n",17],["T_USE","use",18],["T_WHITESPACE"," ",18],["T_STRING","Symfony",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Component",18],["T_NS_SEPARATOR","\\",18],["T_STRING","HttpFoundation",18],["T_NS_SEPARATOR","\\",18],["T_STRING","Session",18],["T_NS_SEPARATOR","\\",18],["T_STRING","SessionInterface",18],";",["T_WHITESPACE","\n",18],["T_USE","use",19],["T_WHITESPACE"," ",19],["T_STRING","Symfony",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Component",19],["T_NS_SEPARATOR","\\",19],["T_STRING","HttpKernel",19],["T_NS_SEPARATOR","\\",19],["T_STRING","Event",19],["T_NS_SEPARATOR","\\",19],["T_STRING","FilterResponseEvent",19],";",["T_WHITESPACE","\n",19],["T_USE","use",20],["T_WHITESPACE"," ",20],["T_STRING","Symfony",20],["T_NS_SEPARATOR","\\",20],["T_STRING","Component",20],["T_NS_SEPARATOR","\\",20],["T_STRING","HttpKernel",20],["T_NS_SEPARATOR","\\",20],["T_STRING","HttpKernelInterface",20],";",["T_WHITESPACE","\n",20],["T_USE","use",21],["T_WHITESPACE"," ",21],["T_STRING","Symfony",21],["T_NS_SEPARATOR","\\",21],["T_STRING","Component",21],["T_NS_SEPARATOR","\\",21],["T_STRING","HttpKernel",21],["T_NS_SEPARATOR","\\",21],["T_STRING","KernelEvents",21],";",["T_WHITESPACE","\n\n",21],["T_DOC_COMMENT","\/**\n * The default BigPipe service.\n *\/",23],["T_WHITESPACE","\n",25],["T_CLASS","class",26],["T_WHITESPACE"," ",26],["T_STRING","BigPipe",26],["T_WHITESPACE"," ",26],["T_IMPLEMENTS","implements",26],["T_WHITESPACE"," ",26],["T_STRING","BigPipeInterface",26],["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * The BigPipe placeholder replacements start signal.\n   *\n   * @var string\n   *\/",28],["T_WHITESPACE","\n  ",32],["T_CONST","const",33],["T_WHITESPACE"," ",33],["T_STRING","START_SIGNAL",33],["T_WHITESPACE"," ",33],"=",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'<script type=\"application\/vnd.drupal-ajax\" data-big-pipe-event=\"start\"><\/script>'",33],";",["T_WHITESPACE","\n\n  ",33],["T_DOC_COMMENT","\/**\n   * The BigPipe placeholder replacements stop signal.\n   *\n   * @var string\n   *\/",35],["T_WHITESPACE","\n  ",39],["T_CONST","const",40],["T_WHITESPACE"," ",40],["T_STRING","STOP_SIGNAL",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'<script type=\"application\/vnd.drupal-ajax\" data-big-pipe-event=\"stop\"><\/script>'",40],";",["T_WHITESPACE","\n\n  ",40],["T_DOC_COMMENT","\/**\n   * The renderer.\n   *\n   * @var \\Drupal\\Core\\Render\\RendererInterface\n   *\/",42],["T_WHITESPACE","\n  ",46],["T_PROTECTED","protected",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$renderer",47],";",["T_WHITESPACE","\n\n  ",47],["T_DOC_COMMENT","\/**\n   * The session.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\Session\\SessionInterface\n   *\/",49],["T_WHITESPACE","\n  ",53],["T_PROTECTED","protected",54],["T_WHITESPACE"," ",54],["T_VARIABLE","$session",54],";",["T_WHITESPACE","\n\n  ",54],["T_DOC_COMMENT","\/**\n   * The request stack.\n   *\n   * @var \\Symfony\\Component\\HttpFoundation\\RequestStack\n   *\/",56],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_VARIABLE","$requestStack",61],";",["T_WHITESPACE","\n\n  ",61],["T_DOC_COMMENT","\/**\n   * The HTTP kernel.\n   *\n   * @var \\Symfony\\Component\\HttpKernel\\HttpKernelInterface\n   *\/",63],["T_WHITESPACE","\n  ",67],["T_PROTECTED","protected",68],["T_WHITESPACE"," ",68],["T_VARIABLE","$httpKernel",68],";",["T_WHITESPACE","\n\n  ",68],["T_DOC_COMMENT","\/**\n   * The event dispatcher.\n   *\n   * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n   *\/",70],["T_WHITESPACE","\n  ",74],["T_PROTECTED","protected",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$eventDispatcher",75],";",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * The config factory.\n   *\n   * @var \\Drupal\\Core\\Config\\ConfigFactoryInterface\n   *\/",77],["T_WHITESPACE","\n  ",81],["T_PROTECTED","protected",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$configFactory",82],";",["T_WHITESPACE","\n\n  ",82],["T_DOC_COMMENT","\/**\n   * Constructs a new BigPipe class.\n   *\n   * @param \\Drupal\\Core\\Render\\RendererInterface $renderer\n   *   The renderer.\n   * @param \\Symfony\\Component\\HttpFoundation\\Session\\SessionInterface $session\n   *   The session.\n   * @param \\Symfony\\Component\\HttpFoundation\\RequestStack $request_stack\n   *   The request stack.\n   * @param \\Symfony\\Component\\HttpKernel\\HttpKernelInterface $http_kernel\n   *   The HTTP kernel.\n   * @param \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface $event_dispatcher\n   *   The event dispatcher.\n   * @param \\Drupal\\Core\\Config\\ConfigFactoryInterface $config_factory\n   *   The config factory.\n   *\/",84],["T_WHITESPACE","\n  ",99],["T_PUBLIC","public",100],["T_WHITESPACE"," ",100],["T_FUNCTION","function",100],["T_WHITESPACE"," ",100],["T_STRING","__construct",100],"(",["T_STRING","RendererInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$renderer",100],",",["T_WHITESPACE"," ",100],["T_STRING","SessionInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$session",100],",",["T_WHITESPACE"," ",100],["T_STRING","RequestStack",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$request_stack",100],",",["T_WHITESPACE"," ",100],["T_STRING","HttpKernelInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$http_kernel",100],",",["T_WHITESPACE"," ",100],["T_STRING","EventDispatcherInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$event_dispatcher",100],",",["T_WHITESPACE"," ",100],["T_STRING","ConfigFactoryInterface",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$config_factory",100],")",["T_WHITESPACE"," ",100],"{",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","renderer",101],["T_WHITESPACE"," ",101],"=",["T_WHITESPACE"," ",101],["T_VARIABLE","$renderer",101],";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","session",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_VARIABLE","$session",102],";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","requestStack",103],["T_WHITESPACE"," ",103],"=",["T_WHITESPACE"," ",103],["T_VARIABLE","$request_stack",103],";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","httpKernel",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],["T_VARIABLE","$http_kernel",104],";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","eventDispatcher",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_VARIABLE","$event_dispatcher",105],";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","configFactory",106],["T_WHITESPACE"," ",106],"=",["T_WHITESPACE"," ",106],["T_VARIABLE","$config_factory",106],";",["T_WHITESPACE","\n  ",106],"}",["T_WHITESPACE","\n\n  ",107],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",109],["T_WHITESPACE","\n  ",111],["T_PUBLIC","public",112],["T_WHITESPACE"," ",112],["T_FUNCTION","function",112],["T_WHITESPACE"," ",112],["T_STRING","sendContent",112],"(",["T_VARIABLE","$content",112],",",["T_WHITESPACE"," ",112],["T_ARRAY","array",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$attachments",112],")",["T_WHITESPACE"," ",112],"{",["T_WHITESPACE","\n    ",112],["T_COMMENT","\/\/ First, gather the BigPipe placeholders that must be replaced.\n",113],["T_WHITESPACE","    ",114],["T_VARIABLE","$placeholders",114],["T_WHITESPACE"," ",114],"=",["T_WHITESPACE"," ",114],["T_ISSET","isset",114],"(",["T_VARIABLE","$attachments",114],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",114],"]",")",["T_WHITESPACE"," ",114],"?",["T_WHITESPACE"," ",114],["T_VARIABLE","$attachments",114],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_placeholders'",114],"]",["T_WHITESPACE"," ",114],":",["T_WHITESPACE"," ",114],"[","]",";",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$nojs_placeholders",115],["T_WHITESPACE"," ",115],"=",["T_WHITESPACE"," ",115],["T_ISSET","isset",115],"(",["T_VARIABLE","$attachments",115],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",115],"]",")",["T_WHITESPACE"," ",115],"?",["T_WHITESPACE"," ",115],["T_VARIABLE","$attachments",115],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs_placeholders'",115],"]",["T_WHITESPACE"," ",115],":",["T_WHITESPACE"," ",115],"[","]",";",["T_WHITESPACE","\n\n    ",115],["T_COMMENT","\/\/ BigPipe sends responses using \"Transfer-Encoding: chunked\". To avoid\n",117],["T_WHITESPACE","    ",118],["T_COMMENT","\/\/ sending already-sent assets, it is necessary to track cumulative assets\n",118],["T_WHITESPACE","    ",119],["T_COMMENT","\/\/ from all previously rendered\/sent chunks.\n",119],["T_WHITESPACE","    ",120],["T_COMMENT","\/\/ @see http:\/\/www.w3.org\/Protocols\/rfc2616\/rfc2616-sec14.html#sec14.41\n",120],["T_WHITESPACE","    ",121],["T_VARIABLE","$cumulative_assets",121],["T_WHITESPACE"," ",121],"=",["T_WHITESPACE"," ",121],["T_STRING","AttachedAssets",121],["T_DOUBLE_COLON","::",121],["T_STRING","createFromRenderArray",121],"(","[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",121],["T_WHITESPACE"," ",121],["T_DOUBLE_ARROW","=>",121],["T_WHITESPACE"," ",121],["T_VARIABLE","$attachments",121],"]",")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$cumulative_assets",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","setAlreadyLoadedLibraries",122],"(",["T_VARIABLE","$attachments",122],"[",["T_CONSTANT_ENCAPSED_STRING","'library'",122],"]",")",";",["T_WHITESPACE","\n\n    ",122],["T_COMMENT","\/\/ The content in the placeholders may depend on the session, and by the\n",124],["T_WHITESPACE","    ",125],["T_COMMENT","\/\/ time the response is sent (see index.php), the session is already closed.\n",125],["T_WHITESPACE","    ",126],["T_COMMENT","\/\/ Reopen it for the duration that we are rendering placeholders.\n",126],["T_WHITESPACE","    ",127],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","session",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","start",127],"(",")",";",["T_WHITESPACE","\n\n    ",127],["T_COMMENT","\/\/ Find the closing <\/body> tag and get the strings before and after. But be\n",129],["T_WHITESPACE","    ",130],["T_COMMENT","\/\/ careful to use the latest occurrence of the string \"<\/body>\", to ensure\n",130],["T_WHITESPACE","    ",131],["T_COMMENT","\/\/ that strings in inline JavaScript or CDATA sections aren't used instead.\n",131],["T_WHITESPACE","    ",132],["T_VARIABLE","$parts",132],["T_WHITESPACE"," ",132],"=",["T_WHITESPACE"," ",132],["T_STRING","explode",132],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",132],",",["T_WHITESPACE"," ",132],["T_VARIABLE","$content",132],")",";",["T_WHITESPACE","\n    ",132],["T_VARIABLE","$post_body",133],["T_WHITESPACE"," ",133],"=",["T_WHITESPACE"," ",133],["T_STRING","array_pop",133],"(",["T_VARIABLE","$parts",133],")",";",["T_WHITESPACE","\n    ",133],["T_VARIABLE","$pre_body",134],["T_WHITESPACE"," ",134],"=",["T_WHITESPACE"," ",134],["T_STRING","implode",134],"(",["T_CONSTANT_ENCAPSED_STRING","''",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$parts",134],")",";",["T_WHITESPACE","\n\n    ",134],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","sendPreBody",136],"(",["T_VARIABLE","$pre_body",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$nojs_placeholders",136],",",["T_WHITESPACE"," ",136],["T_VARIABLE","$cumulative_assets",136],")",";",["T_WHITESPACE","\n    ",136],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","sendPlaceholders",137],"(",["T_VARIABLE","$placeholders",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$this",137],["T_OBJECT_OPERATOR","->",137],["T_STRING","getPlaceholderOrder",137],"(",["T_VARIABLE","$pre_body",137],",",["T_WHITESPACE"," ",137],["T_VARIABLE","$placeholders",137],")",",",["T_WHITESPACE"," ",137],["T_VARIABLE","$cumulative_assets",137],")",";",["T_WHITESPACE","\n    ",137],["T_VARIABLE","$this",138],["T_OBJECT_OPERATOR","->",138],["T_STRING","sendPostBody",138],"(",["T_VARIABLE","$post_body",138],")",";",["T_WHITESPACE","\n\n    ",138],["T_COMMENT","\/\/ Close the session again.\n",140],["T_WHITESPACE","    ",141],["T_VARIABLE","$this",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","session",141],["T_OBJECT_OPERATOR","->",141],["T_STRING","save",141],"(",")",";",["T_WHITESPACE","\n\n    ",141],["T_RETURN","return",143],["T_WHITESPACE"," ",143],["T_VARIABLE","$this",143],";",["T_WHITESPACE","\n  ",143],"}",["T_WHITESPACE","\n\n  ",144],["T_DOC_COMMENT","\/**\n   * Sends everything until just before <\/body>.\n   *\n   * @param string $pre_body\n   *   The HTML response's content until the closing <\/body> tag.\n   * @param array $no_js_placeholders\n   *   The no-JS BigPipe placeholders.\n   * @param \\Drupal\\Core\\Asset\\AttachedAssetsInterface $cumulative_assets\n   *   The cumulative assets sent so far; to be updated while rendering no-JS\n   *   BigPipe placeholders.\n   *\/",146],["T_WHITESPACE","\n  ",156],["T_PROTECTED","protected",157],["T_WHITESPACE"," ",157],["T_FUNCTION","function",157],["T_WHITESPACE"," ",157],["T_STRING","sendPreBody",157],"(",["T_VARIABLE","$pre_body",157],",",["T_WHITESPACE"," ",157],["T_ARRAY","array",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$no_js_placeholders",157],",",["T_WHITESPACE"," ",157],["T_STRING","AttachedAssetsInterface",157],["T_WHITESPACE"," ",157],["T_VARIABLE","$cumulative_assets",157],")",["T_WHITESPACE"," ",157],"{",["T_WHITESPACE","\n    ",157],["T_COMMENT","\/\/ If there are no no-JS BigPipe placeholders, we can send the pre-<\/body>\n",158],["T_WHITESPACE","    ",159],["T_COMMENT","\/\/ part of the page immediately.\n",159],["T_WHITESPACE","    ",160],["T_IF","if",160],["T_WHITESPACE"," ",160],"(",["T_EMPTY","empty",160],"(",["T_VARIABLE","$no_js_placeholders",160],")",")",["T_WHITESPACE"," ",160],"{",["T_WHITESPACE","\n      ",160],["T_PRINT","print",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$pre_body",161],";",["T_WHITESPACE","\n      ",161],["T_STRING","flush",162],"(",")",";",["T_WHITESPACE","\n      ",162],["T_RETURN","return",163],";",["T_WHITESPACE","\n    ",163],"}",["T_WHITESPACE","\n\n    ",164],["T_COMMENT","\/\/ Extract the scripts_bottom markup: the no-JS BigPipe placeholders that we\n",166],["T_WHITESPACE","    ",167],["T_COMMENT","\/\/ will render may attach additional asset libraries, and if so, it will be\n",167],["T_WHITESPACE","    ",168],["T_COMMENT","\/\/ necessary to re-render scripts_bottom.\n",168],["T_WHITESPACE","    ",169],["T_LIST","list",169],"(",["T_VARIABLE","$pre_scripts_bottom",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$scripts_bottom",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$post_scripts_bottom",169],")",["T_WHITESPACE"," ",169],"=",["T_WHITESPACE"," ",169],["T_STRING","explode",169],"(",["T_CONSTANT_ENCAPSED_STRING","'<drupal-big-pipe-scripts-bottom-marker>'",169],",",["T_WHITESPACE"," ",169],["T_VARIABLE","$pre_body",169],",",["T_WHITESPACE"," ",169],["T_LNUMBER","3",169],")",";",["T_WHITESPACE","\n    ",169],["T_VARIABLE","$cumulative_assets_initial",170],["T_WHITESPACE"," ",170],"=",["T_WHITESPACE"," ",170],["T_CLONE","clone",170],["T_WHITESPACE"," ",170],["T_VARIABLE","$cumulative_assets",170],";",["T_WHITESPACE","\n\n    ",170],["T_VARIABLE","$this",172],["T_OBJECT_OPERATOR","->",172],["T_STRING","sendNoJsPlaceholders",172],"(",["T_VARIABLE","$pre_scripts_bottom",172],["T_WHITESPACE"," ",172],".",["T_WHITESPACE"," ",172],["T_VARIABLE","$post_scripts_bottom",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$no_js_placeholders",172],",",["T_WHITESPACE"," ",172],["T_VARIABLE","$cumulative_assets",172],")",";",["T_WHITESPACE","\n\n    ",172],["T_COMMENT","\/\/ If additional asset libraries or drupalSettings were attached by any of\n",174],["T_WHITESPACE","    ",175],["T_COMMENT","\/\/ the placeholders, then we need to re-render scripts_bottom.\n",175],["T_WHITESPACE","    ",176],["T_IF","if",176],["T_WHITESPACE"," ",176],"(",["T_VARIABLE","$cumulative_assets_initial",176],["T_WHITESPACE"," ",176],["T_IS_NOT_EQUAL","!=",176],["T_WHITESPACE"," ",176],["T_VARIABLE","$cumulative_assets",176],")",["T_WHITESPACE"," ",176],"{",["T_WHITESPACE","\n      ",176],["T_COMMENT","\/\/ Create a new HtmlResponse. Ensure the CSS and (non-bottom) JS is sent\n",177],["T_WHITESPACE","      ",178],["T_COMMENT","\/\/ before the HTML they're associated with.\n",178],["T_WHITESPACE","      ",179],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Render\\HtmlResponseSubscriber\n",179],["T_WHITESPACE","      ",180],["T_COMMENT","\/\/ @see template_preprocess_html()\n",180],["T_WHITESPACE","      ",181],["T_VARIABLE","$js_bottom_placeholder",181],["T_WHITESPACE"," ",181],"=",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'<nojs-bigpipe-placeholder-scripts-bottom-placeholder token=\"'",181],["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_STRING","Crypt",181],["T_DOUBLE_COLON","::",181],["T_STRING","randomBytesBase64",181],"(",["T_LNUMBER","55",181],")",["T_WHITESPACE"," ",181],".",["T_WHITESPACE"," ",181],["T_CONSTANT_ENCAPSED_STRING","'\">'",181],";",["T_WHITESPACE","\n\n      ",181],["T_VARIABLE","$html_response",183],["T_WHITESPACE"," ",183],"=",["T_WHITESPACE"," ",183],["T_NEW","new",183],["T_WHITESPACE"," ",183],["T_STRING","HtmlResponse",183],"(",")",";",["T_WHITESPACE","\n      ",183],["T_VARIABLE","$html_response",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","setContent",184],"(","[",["T_WHITESPACE","\n        ",184],["T_CONSTANT_ENCAPSED_STRING","'#markup'",185],["T_WHITESPACE"," ",185],["T_DOUBLE_ARROW","=>",185],["T_WHITESPACE"," ",185],["T_STRING","BigPipeMarkup",185],["T_DOUBLE_COLON","::",185],["T_STRING","create",185],"(",["T_VARIABLE","$js_bottom_placeholder",185],")",",",["T_WHITESPACE","\n        ",185],["T_CONSTANT_ENCAPSED_STRING","'#attached'",186],["T_WHITESPACE"," ",186],["T_DOUBLE_ARROW","=>",186],["T_WHITESPACE"," ",186],"[",["T_WHITESPACE","\n          ",186],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",187],["T_WHITESPACE"," ",187],["T_DOUBLE_ARROW","=>",187],["T_WHITESPACE"," ",187],["T_VARIABLE","$cumulative_assets",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","getSettings",187],"(",")",",",["T_WHITESPACE","\n          ",187],["T_CONSTANT_ENCAPSED_STRING","'library'",188],["T_WHITESPACE"," ",188],["T_DOUBLE_ARROW","=>",188],["T_WHITESPACE"," ",188],["T_VARIABLE","$cumulative_assets",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","getAlreadyLoadedLibraries",188],"(",")",",",["T_WHITESPACE","\n          ",188],["T_CONSTANT_ENCAPSED_STRING","'html_response_attachment_placeholders'",189],["T_WHITESPACE"," ",189],["T_DOUBLE_ARROW","=>",189],["T_WHITESPACE"," ",189],"[",["T_WHITESPACE","\n            ",189],["T_CONSTANT_ENCAPSED_STRING","'scripts_bottom'",190],["T_WHITESPACE"," ",190],["T_DOUBLE_ARROW","=>",190],["T_WHITESPACE"," ",190],["T_VARIABLE","$js_bottom_placeholder",190],",",["T_WHITESPACE","\n          ",190],"]",",",["T_WHITESPACE","\n        ",191],"]",",",["T_WHITESPACE","\n      ",192],"]",")",";",["T_WHITESPACE","\n      ",193],["T_VARIABLE","$html_response",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","getCacheableMetadata",194],"(",")",["T_OBJECT_OPERATOR","->",194],["T_STRING","setCacheMaxAge",194],"(",["T_LNUMBER","0",194],")",";",["T_WHITESPACE","\n\n      ",194],["T_COMMENT","\/\/ Push a fake request with the asset libraries loaded so far and dispatch\n",196],["T_WHITESPACE","      ",197],["T_COMMENT","\/\/ KernelEvents::RESPONSE event. This results in the attachments for the\n",197],["T_WHITESPACE","      ",198],["T_COMMENT","\/\/ HTML response being processed by HtmlResponseAttachmentsProcessor and\n",198],["T_WHITESPACE","      ",199],["T_COMMENT","\/\/ hence the HTML to load the bottom JavaScript can be rendered.\n",199],["T_WHITESPACE","      ",200],["T_VARIABLE","$fake_request",200],["T_WHITESPACE"," ",200],"=",["T_WHITESPACE"," ",200],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","requestStack",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","getMasterRequest",200],"(",")",["T_OBJECT_OPERATOR","->",200],["T_STRING","duplicate",200],"(",")",";",["T_WHITESPACE","\n      ",200],["T_VARIABLE","$html_response",201],["T_WHITESPACE"," ",201],"=",["T_WHITESPACE"," ",201],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","filterEmbeddedResponse",201],"(",["T_VARIABLE","$fake_request",201],",",["T_WHITESPACE"," ",201],["T_VARIABLE","$html_response",201],")",";",["T_WHITESPACE","\n      ",201],["T_VARIABLE","$scripts_bottom",202],["T_WHITESPACE"," ",202],"=",["T_WHITESPACE"," ",202],["T_VARIABLE","$html_response",202],["T_OBJECT_OPERATOR","->",202],["T_STRING","getContent",202],"(",")",";",["T_WHITESPACE","\n    ",202],"}",["T_WHITESPACE","\n\n    ",203],["T_PRINT","print",205],["T_WHITESPACE"," ",205],["T_VARIABLE","$scripts_bottom",205],";",["T_WHITESPACE","\n    ",205],["T_STRING","flush",206],"(",")",";",["T_WHITESPACE","\n  ",206],"}",["T_WHITESPACE","\n\n  ",207],["T_DOC_COMMENT","\/**\n   * Sends no-JS BigPipe placeholders' replacements as embedded HTML responses.\n   *\n   * @param string $html\n   *   HTML markup.\n   * @param array $no_js_placeholders\n   *   Associative array; the no-JS BigPipe placeholders. Keys are the BigPipe\n   *   selectors.\n   * @param \\Drupal\\Core\\Asset\\AttachedAssetsInterface $cumulative_assets\n   *   The cumulative assets sent so far; to be updated while rendering no-JS\n   *   BigPipe placeholders.\n   *\n   * @throws \\Exception\n   *   If an exception is thrown during the rendering of a placeholder, it is\n   *   caught to allow the other placeholders to still be replaced. But when\n   *   error logging is configured to be verbose, the exception is rethrown to\n   *   simplify debugging.\n   *\/",209],["T_WHITESPACE","\n  ",226],["T_PROTECTED","protected",227],["T_WHITESPACE"," ",227],["T_FUNCTION","function",227],["T_WHITESPACE"," ",227],["T_STRING","sendNoJsPlaceholders",227],"(",["T_VARIABLE","$html",227],",",["T_WHITESPACE"," ",227],["T_VARIABLE","$no_js_placeholders",227],",",["T_WHITESPACE"," ",227],["T_STRING","AttachedAssetsInterface",227],["T_WHITESPACE"," ",227],["T_VARIABLE","$cumulative_assets",227],")",["T_WHITESPACE"," ",227],"{",["T_WHITESPACE","\n    ",227],["T_COMMENT","\/\/ Split the HTML on every no-JS placeholder string.\n",228],["T_WHITESPACE","    ",229],["T_VARIABLE","$prepare_for_preg_split",229],["T_WHITESPACE"," ",229],"=",["T_WHITESPACE"," ",229],["T_FUNCTION","function",229],["T_WHITESPACE"," ",229],"(",["T_VARIABLE","$placeholder_string",229],")",["T_WHITESPACE"," ",229],"{",["T_WHITESPACE","\n      ",229],["T_RETURN","return",230],["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'('",230],["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_STRING","preg_quote",230],"(",["T_VARIABLE","$placeholder_string",230],",",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","'\/'",230],")",["T_WHITESPACE"," ",230],".",["T_WHITESPACE"," ",230],["T_CONSTANT_ENCAPSED_STRING","')'",230],";",["T_WHITESPACE","\n    ",230],"}",";",["T_WHITESPACE","\n    ",231],["T_VARIABLE","$preg_placeholder_strings",232],["T_WHITESPACE"," ",232],"=",["T_WHITESPACE"," ",232],["T_STRING","array_map",232],"(",["T_VARIABLE","$prepare_for_preg_split",232],",",["T_WHITESPACE"," ",232],["T_STRING","array_keys",232],"(",["T_VARIABLE","$no_js_placeholders",232],")",")",";",["T_WHITESPACE","\n    ",232],["T_VARIABLE","$fragments",233],["T_WHITESPACE"," ",233],"=",["T_WHITESPACE"," ",233],["T_STRING","preg_split",233],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",233],["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_STRING","implode",233],"(",["T_CONSTANT_ENCAPSED_STRING","'|'",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$preg_placeholder_strings",233],")",["T_WHITESPACE"," ",233],".",["T_WHITESPACE"," ",233],["T_CONSTANT_ENCAPSED_STRING","'\/'",233],",",["T_WHITESPACE"," ",233],["T_VARIABLE","$html",233],",",["T_WHITESPACE"," ",233],["T_STRING","NULL",233],",",["T_WHITESPACE"," ",233],["T_STRING","PREG_SPLIT_NO_EMPTY",233],["T_WHITESPACE"," ",233],"|",["T_WHITESPACE"," ",233],["T_STRING","PREG_SPLIT_DELIM_CAPTURE",233],")",";",["T_WHITESPACE","\n\n    ",233],["T_COMMENT","\/\/ Determine how many occurrences there are of each no-JS placeholder.\n",235],["T_WHITESPACE","    ",236],["T_VARIABLE","$placeholder_occurrences",236],["T_WHITESPACE"," ",236],"=",["T_WHITESPACE"," ",236],["T_STRING","array_count_values",236],"(",["T_STRING","array_intersect",236],"(",["T_VARIABLE","$fragments",236],",",["T_WHITESPACE"," ",236],["T_STRING","array_keys",236],"(",["T_VARIABLE","$no_js_placeholders",236],")",")",")",";",["T_WHITESPACE","\n\n    ",236],["T_COMMENT","\/\/ Set up a variable to store the content of placeholders that have multiple\n",238],["T_WHITESPACE","    ",239],["T_COMMENT","\/\/ occurrences.\n",239],["T_WHITESPACE","    ",240],["T_VARIABLE","$multi_occurrence_placeholders_content",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],"[","]",";",["T_WHITESPACE","\n\n    ",240],["T_FOREACH","foreach",242],["T_WHITESPACE"," ",242],"(",["T_VARIABLE","$fragments",242],["T_WHITESPACE"," ",242],["T_AS","as",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$fragment",242],")",["T_WHITESPACE"," ",242],"{",["T_WHITESPACE","\n      ",242],["T_COMMENT","\/\/ If the fragment isn't one of the no-JS placeholders, it is the HTML in\n",243],["T_WHITESPACE","      ",244],["T_COMMENT","\/\/ between placeholders and it must be printed & flushed immediately. The\n",244],["T_WHITESPACE","      ",245],["T_COMMENT","\/\/ rest of the logic in the loop handles the placeholders.\n",245],["T_WHITESPACE","      ",246],["T_IF","if",246],["T_WHITESPACE"," ",246],"(","!",["T_ISSET","isset",246],"(",["T_VARIABLE","$no_js_placeholders",246],"[",["T_VARIABLE","$fragment",246],"]",")",")",["T_WHITESPACE"," ",246],"{",["T_WHITESPACE","\n        ",246],["T_PRINT","print",247],["T_WHITESPACE"," ",247],["T_VARIABLE","$fragment",247],";",["T_WHITESPACE","\n        ",247],["T_STRING","flush",248],"(",")",";",["T_WHITESPACE","\n        ",248],["T_CONTINUE","continue",249],";",["T_WHITESPACE","\n      ",249],"}",["T_WHITESPACE","\n\n      ",250],["T_COMMENT","\/\/ If there are multiple occurrences of this particular placeholder, and\n",252],["T_WHITESPACE","      ",253],["T_COMMENT","\/\/ this is the second occurrence, we can skip all calculations and just\n",253],["T_WHITESPACE","      ",254],["T_COMMENT","\/\/ send the same content.\n",254],["T_WHITESPACE","      ",255],["T_IF","if",255],["T_WHITESPACE"," ",255],"(",["T_VARIABLE","$placeholder_occurrences",255],"[",["T_VARIABLE","$fragment",255],"]",["T_WHITESPACE"," ",255],">",["T_WHITESPACE"," ",255],["T_LNUMBER","1",255],["T_WHITESPACE"," ",255],["T_BOOLEAN_AND","&&",255],["T_WHITESPACE"," ",255],["T_ISSET","isset",255],"(",["T_VARIABLE","$multi_occurrence_placeholders_content",255],"[",["T_VARIABLE","$fragment",255],"]",")",")",["T_WHITESPACE"," ",255],"{",["T_WHITESPACE","\n        ",255],["T_PRINT","print",256],["T_WHITESPACE"," ",256],["T_VARIABLE","$multi_occurrence_placeholders_content",256],"[",["T_VARIABLE","$fragment",256],"]",";",["T_WHITESPACE","\n        ",256],["T_STRING","flush",257],"(",")",";",["T_WHITESPACE","\n        ",257],["T_CONTINUE","continue",258],";",["T_WHITESPACE","\n      ",258],"}",["T_WHITESPACE","\n\n      ",259],["T_VARIABLE","$placeholder",261],["T_WHITESPACE"," ",261],"=",["T_WHITESPACE"," ",261],["T_VARIABLE","$fragment",261],";",["T_WHITESPACE","\n      ",261],["T_STRING","assert",262],"(",["T_CONSTANT_ENCAPSED_STRING","'isset($no_js_placeholders[$placeholder])'",262],")",";",["T_WHITESPACE","\n      ",262],["T_VARIABLE","$token",263],["T_WHITESPACE"," ",263],"=",["T_WHITESPACE"," ",263],["T_STRING","Crypt",263],["T_DOUBLE_COLON","::",263],["T_STRING","randomBytesBase64",263],"(",["T_LNUMBER","55",263],")",";",["T_WHITESPACE","\n\n      ",263],["T_COMMENT","\/\/ Render the placeholder, but include the cumulative settings assets, so\n",265],["T_WHITESPACE","      ",266],["T_COMMENT","\/\/ we can calculate the overall settings for the entire page.\n",266],["T_WHITESPACE","      ",267],["T_VARIABLE","$placeholder_plus_cumulative_settings",267],["T_WHITESPACE"," ",267],"=",["T_WHITESPACE"," ",267],"[",["T_WHITESPACE","\n        ",267],["T_CONSTANT_ENCAPSED_STRING","'placeholder'",268],["T_WHITESPACE"," ",268],["T_DOUBLE_ARROW","=>",268],["T_WHITESPACE"," ",268],["T_VARIABLE","$no_js_placeholders",268],"[",["T_VARIABLE","$placeholder",268],"]",",",["T_WHITESPACE","\n        ",268],["T_CONSTANT_ENCAPSED_STRING","'cumulative_settings_'",269],["T_WHITESPACE"," ",269],".",["T_WHITESPACE"," ",269],["T_VARIABLE","$token",269],["T_WHITESPACE"," ",269],["T_DOUBLE_ARROW","=>",269],["T_WHITESPACE"," ",269],"[",["T_WHITESPACE","\n          ",269],["T_CONSTANT_ENCAPSED_STRING","'#attached'",270],["T_WHITESPACE"," ",270],["T_DOUBLE_ARROW","=>",270],["T_WHITESPACE"," ",270],"[",["T_WHITESPACE","\n            ",270],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",271],["T_WHITESPACE"," ",271],["T_DOUBLE_ARROW","=>",271],["T_WHITESPACE"," ",271],["T_VARIABLE","$cumulative_assets",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","getSettings",271],"(",")",",",["T_WHITESPACE","\n          ",271],"]",",",["T_WHITESPACE","\n        ",272],"]",",",["T_WHITESPACE","\n      ",273],"]",";",["T_WHITESPACE","\n      ",274],["T_TRY","try",275],["T_WHITESPACE"," ",275],"{",["T_WHITESPACE","\n        ",275],["T_VARIABLE","$elements",276],["T_WHITESPACE"," ",276],"=",["T_WHITESPACE"," ",276],["T_VARIABLE","$this",276],["T_OBJECT_OPERATOR","->",276],["T_STRING","renderPlaceholder",276],"(",["T_VARIABLE","$placeholder",276],",",["T_WHITESPACE"," ",276],["T_VARIABLE","$placeholder_plus_cumulative_settings",276],")",";",["T_WHITESPACE","\n      ",276],"}",["T_WHITESPACE","\n      ",277],["T_CATCH","catch",278],["T_WHITESPACE"," ",278],"(",["T_NS_SEPARATOR","\\",278],["T_STRING","Exception",278],["T_WHITESPACE"," ",278],["T_VARIABLE","$e",278],")",["T_WHITESPACE"," ",278],"{",["T_WHITESPACE","\n        ",278],["T_IF","if",279],["T_WHITESPACE"," ",279],"(",["T_VARIABLE","$this",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","configFactory",279],["T_OBJECT_OPERATOR","->",279],["T_STRING","get",279],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",279],")",["T_OBJECT_OPERATOR","->",279],["T_STRING","get",279],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",279],")",["T_WHITESPACE"," ",279],["T_IS_IDENTICAL","===",279],["T_WHITESPACE"," ",279],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",279],")",["T_WHITESPACE"," ",279],"{",["T_WHITESPACE","\n          ",279],["T_THROW","throw",280],["T_WHITESPACE"," ",280],["T_VARIABLE","$e",280],";",["T_WHITESPACE","\n        ",280],"}",["T_WHITESPACE","\n        ",281],["T_ELSE","else",282],["T_WHITESPACE"," ",282],"{",["T_WHITESPACE","\n          ",282],["T_STRING","trigger_error",283],"(",["T_VARIABLE","$e",283],",",["T_WHITESPACE"," ",283],["T_STRING","E_USER_ERROR",283],")",";",["T_WHITESPACE","\n          ",283],["T_CONTINUE","continue",284],";",["T_WHITESPACE","\n        ",284],"}",["T_WHITESPACE","\n      ",285],"}",["T_WHITESPACE","\n\n\n      ",286],["T_COMMENT","\/\/ Create a new HtmlResponse. Ensure the CSS and (non-bottom) JS is sent\n",289],["T_WHITESPACE","      ",290],["T_COMMENT","\/\/ before the HTML they're associated with. In other words: ensure the\n",290],["T_WHITESPACE","      ",291],["T_COMMENT","\/\/ critical assets for this placeholder's markup are loaded first.\n",291],["T_WHITESPACE","      ",292],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Render\\HtmlResponseSubscriber\n",292],["T_WHITESPACE","      ",293],["T_COMMENT","\/\/ @see template_preprocess_html()\n",293],["T_WHITESPACE","      ",294],["T_VARIABLE","$css_placeholder",294],["T_WHITESPACE"," ",294],"=",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'<nojs-bigpipe-placeholder-styles-placeholder token=\"'",294],["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_VARIABLE","$token",294],["T_WHITESPACE"," ",294],".",["T_WHITESPACE"," ",294],["T_CONSTANT_ENCAPSED_STRING","'\">'",294],";",["T_WHITESPACE","\n      ",294],["T_VARIABLE","$js_placeholder",295],["T_WHITESPACE"," ",295],"=",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'<nojs-bigpipe-placeholder-scripts-placeholder token=\"'",295],["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_VARIABLE","$token",295],["T_WHITESPACE"," ",295],".",["T_WHITESPACE"," ",295],["T_CONSTANT_ENCAPSED_STRING","'\">'",295],";",["T_WHITESPACE","\n      ",295],["T_VARIABLE","$elements",296],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",296],"]",["T_WHITESPACE"," ",296],"=",["T_WHITESPACE"," ",296],["T_STRING","BigPipeMarkup",296],["T_DOUBLE_COLON","::",296],["T_STRING","create",296],"(",["T_VARIABLE","$css_placeholder",296],["T_WHITESPACE"," ",296],".",["T_WHITESPACE"," ",296],["T_VARIABLE","$js_placeholder",296],["T_WHITESPACE"," ",296],".",["T_WHITESPACE"," ",296],["T_STRING_CAST","(string)",296],["T_WHITESPACE"," ",296],["T_VARIABLE","$elements",296],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",296],"]",")",";",["T_WHITESPACE","\n      ",296],["T_VARIABLE","$elements",297],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",297],"]","[",["T_CONSTANT_ENCAPSED_STRING","'html_response_attachment_placeholders'",297],"]","[",["T_CONSTANT_ENCAPSED_STRING","'styles'",297],"]",["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$css_placeholder",297],";",["T_WHITESPACE","\n      ",297],["T_VARIABLE","$elements",298],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",298],"]","[",["T_CONSTANT_ENCAPSED_STRING","'html_response_attachment_placeholders'",298],"]","[",["T_CONSTANT_ENCAPSED_STRING","'scripts'",298],"]",["T_WHITESPACE"," ",298],"=",["T_WHITESPACE"," ",298],["T_VARIABLE","$js_placeholder",298],";",["T_WHITESPACE","\n\n      ",298],["T_VARIABLE","$html_response",300],["T_WHITESPACE"," ",300],"=",["T_WHITESPACE"," ",300],["T_NEW","new",300],["T_WHITESPACE"," ",300],["T_STRING","HtmlResponse",300],"(",")",";",["T_WHITESPACE","\n      ",300],["T_VARIABLE","$html_response",301],["T_OBJECT_OPERATOR","->",301],["T_STRING","setContent",301],"(",["T_VARIABLE","$elements",301],")",";",["T_WHITESPACE","\n      ",301],["T_VARIABLE","$html_response",302],["T_OBJECT_OPERATOR","->",302],["T_STRING","getCacheableMetadata",302],"(",")",["T_OBJECT_OPERATOR","->",302],["T_STRING","setCacheMaxAge",302],"(",["T_LNUMBER","0",302],")",";",["T_WHITESPACE","\n\n      ",302],["T_COMMENT","\/\/ Push a fake request with the asset libraries loaded so far and dispatch\n",304],["T_WHITESPACE","      ",305],["T_COMMENT","\/\/ KernelEvents::RESPONSE event. This results in the attachments for the\n",305],["T_WHITESPACE","      ",306],["T_COMMENT","\/\/ HTML response being processed by HtmlResponseAttachmentsProcessor and\n",306],["T_WHITESPACE","      ",307],["T_COMMENT","\/\/ hence:\n",307],["T_WHITESPACE","      ",308],["T_COMMENT","\/\/ - the HTML to load the CSS can be rendered.\n",308],["T_WHITESPACE","      ",309],["T_COMMENT","\/\/ - the HTML to load the JS (at the top) can be rendered.\n",309],["T_WHITESPACE","      ",310],["T_VARIABLE","$fake_request",310],["T_WHITESPACE"," ",310],"=",["T_WHITESPACE"," ",310],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","requestStack",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","getMasterRequest",310],"(",")",["T_OBJECT_OPERATOR","->",310],["T_STRING","duplicate",310],"(",")",";",["T_WHITESPACE","\n      ",310],["T_VARIABLE","$fake_request",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","request",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","set",311],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_page_state'",311],",",["T_WHITESPACE"," ",311],"[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",311],["T_WHITESPACE"," ",311],["T_DOUBLE_ARROW","=>",311],["T_WHITESPACE"," ",311],["T_STRING","implode",311],"(",["T_CONSTANT_ENCAPSED_STRING","','",311],",",["T_WHITESPACE"," ",311],["T_VARIABLE","$cumulative_assets",311],["T_OBJECT_OPERATOR","->",311],["T_STRING","getAlreadyLoadedLibraries",311],"(",")",")","]",")",";",["T_WHITESPACE","\n      ",311],["T_TRY","try",312],["T_WHITESPACE"," ",312],"{",["T_WHITESPACE","\n        ",312],["T_VARIABLE","$html_response",313],["T_WHITESPACE"," ",313],"=",["T_WHITESPACE"," ",313],["T_VARIABLE","$this",313],["T_OBJECT_OPERATOR","->",313],["T_STRING","filterEmbeddedResponse",313],"(",["T_VARIABLE","$fake_request",313],",",["T_WHITESPACE"," ",313],["T_VARIABLE","$html_response",313],")",";",["T_WHITESPACE","\n      ",313],"}",["T_WHITESPACE","\n      ",314],["T_CATCH","catch",315],["T_WHITESPACE"," ",315],"(",["T_NS_SEPARATOR","\\",315],["T_STRING","Exception",315],["T_WHITESPACE"," ",315],["T_VARIABLE","$e",315],")",["T_WHITESPACE"," ",315],"{",["T_WHITESPACE","\n        ",315],["T_IF","if",316],["T_WHITESPACE"," ",316],"(",["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","configFactory",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","get",316],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",316],")",["T_OBJECT_OPERATOR","->",316],["T_STRING","get",316],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",316],")",["T_WHITESPACE"," ",316],["T_IS_IDENTICAL","===",316],["T_WHITESPACE"," ",316],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",316],")",["T_WHITESPACE"," ",316],"{",["T_WHITESPACE","\n          ",316],["T_THROW","throw",317],["T_WHITESPACE"," ",317],["T_VARIABLE","$e",317],";",["T_WHITESPACE","\n        ",317],"}",["T_WHITESPACE","\n        ",318],["T_ELSE","else",319],["T_WHITESPACE"," ",319],"{",["T_WHITESPACE","\n          ",319],["T_STRING","trigger_error",320],"(",["T_VARIABLE","$e",320],",",["T_WHITESPACE"," ",320],["T_STRING","E_USER_ERROR",320],")",";",["T_WHITESPACE","\n          ",320],["T_CONTINUE","continue",321],";",["T_WHITESPACE","\n        ",321],"}",["T_WHITESPACE","\n      ",322],"}",["T_WHITESPACE","\n\n\n      ",323],["T_COMMENT","\/\/ Send this embedded HTML response.\n",326],["T_WHITESPACE","      ",327],["T_PRINT","print",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$html_response",327],["T_OBJECT_OPERATOR","->",327],["T_STRING","getContent",327],"(",")",";",["T_WHITESPACE","\n      ",327],["T_STRING","flush",328],"(",")",";",["T_WHITESPACE","\n\n      ",328],["T_COMMENT","\/\/ Another placeholder was rendered and sent, track the set of asset\n",330],["T_WHITESPACE","      ",331],["T_COMMENT","\/\/ libraries sent so far. Any new settings also need to be tracked, so\n",331],["T_WHITESPACE","      ",332],["T_COMMENT","\/\/ they can be sent in ::sendPreBody().\n",332],["T_WHITESPACE","      ",333],["T_VARIABLE","$cumulative_assets",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","setAlreadyLoadedLibraries",333],"(",["T_STRING","array_merge",333],"(",["T_VARIABLE","$cumulative_assets",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getAlreadyLoadedLibraries",333],"(",")",",",["T_WHITESPACE"," ",333],["T_VARIABLE","$html_response",333],["T_OBJECT_OPERATOR","->",333],["T_STRING","getAttachments",333],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'library'",333],"]",")",")",";",["T_WHITESPACE","\n      ",333],["T_VARIABLE","$cumulative_assets",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","setSettings",334],"(",["T_VARIABLE","$html_response",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","getAttachments",334],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",334],"]",")",";",["T_WHITESPACE","\n\n      ",334],["T_COMMENT","\/\/ If there are multiple occurrences of this particular placeholder, track\n",336],["T_WHITESPACE","      ",337],["T_COMMENT","\/\/ the content that was sent, so we can skip all calculations for the next\n",337],["T_WHITESPACE","      ",338],["T_COMMENT","\/\/ occurrence.\n",338],["T_WHITESPACE","      ",339],["T_IF","if",339],["T_WHITESPACE"," ",339],"(",["T_VARIABLE","$placeholder_occurrences",339],"[",["T_VARIABLE","$fragment",339],"]",["T_WHITESPACE"," ",339],">",["T_WHITESPACE"," ",339],["T_LNUMBER","1",339],")",["T_WHITESPACE"," ",339],"{",["T_WHITESPACE","\n        ",339],["T_VARIABLE","$multi_occurrence_placeholders_content",340],"[",["T_VARIABLE","$fragment",340],"]",["T_WHITESPACE"," ",340],"=",["T_WHITESPACE"," ",340],["T_VARIABLE","$html_response",340],["T_OBJECT_OPERATOR","->",340],["T_STRING","getContent",340],"(",")",";",["T_WHITESPACE","\n      ",340],"}",["T_WHITESPACE","\n    ",341],"}",["T_WHITESPACE","\n  ",342],"}",["T_WHITESPACE","\n\n  ",343],["T_DOC_COMMENT","\/**\n   * Sends BigPipe placeholders' replacements as embedded AJAX responses.\n   *\n   * @param array $placeholders\n   *   Associative array; the BigPipe placeholders. Keys are the BigPipe\n   *   placeholder IDs.\n   * @param array $placeholder_order\n   *   Indexed array; the order in which the BigPipe placeholders must be sent.\n   *   Values are the BigPipe placeholder IDs. (These values correspond to keys\n   *   in $placeholders.)\n   * @param \\Drupal\\Core\\Asset\\AttachedAssetsInterface $cumulative_assets\n   *   The cumulative assets sent so far; to be updated while rendering BigPipe\n   *   placeholders.\n   *\n   * @throws \\Exception\n   *   If an exception is thrown during the rendering of a placeholder, it is\n   *   caught to allow the other placeholders to still be replaced. But when\n   *   error logging is configured to be verbose, the exception is rethrown to\n   *   simplify debugging.\n   *\/",345],["T_WHITESPACE","\n  ",364],["T_PROTECTED","protected",365],["T_WHITESPACE"," ",365],["T_FUNCTION","function",365],["T_WHITESPACE"," ",365],["T_STRING","sendPlaceholders",365],"(",["T_ARRAY","array",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$placeholders",365],",",["T_WHITESPACE"," ",365],["T_ARRAY","array",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$placeholder_order",365],",",["T_WHITESPACE"," ",365],["T_STRING","AttachedAssetsInterface",365],["T_WHITESPACE"," ",365],["T_VARIABLE","$cumulative_assets",365],")",["T_WHITESPACE"," ",365],"{",["T_WHITESPACE","\n    ",365],["T_COMMENT","\/\/ Return early if there are no BigPipe placeholders to send.\n",366],["T_WHITESPACE","    ",367],["T_IF","if",367],["T_WHITESPACE"," ",367],"(",["T_EMPTY","empty",367],"(",["T_VARIABLE","$placeholders",367],")",")",["T_WHITESPACE"," ",367],"{",["T_WHITESPACE","\n      ",367],["T_RETURN","return",368],";",["T_WHITESPACE","\n    ",368],"}",["T_WHITESPACE","\n\n    ",369],["T_COMMENT","\/\/ Send the start signal.\n",371],["T_WHITESPACE","    ",372],["T_PRINT","print",372],["T_WHITESPACE"," ",372],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",372],";",["T_WHITESPACE","\n    ",372],["T_PRINT","print",373],["T_WHITESPACE"," ",373],["T_STATIC","static",373],["T_DOUBLE_COLON","::",373],["T_STRING","START_SIGNAL",373],";",["T_WHITESPACE","\n    ",373],["T_PRINT","print",374],["T_WHITESPACE"," ",374],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",374],";",["T_WHITESPACE","\n    ",374],["T_STRING","flush",375],"(",")",";",["T_WHITESPACE","\n\n    ",375],["T_COMMENT","\/\/ A BigPipe response consists of a HTML response plus multiple embedded\n",377],["T_WHITESPACE","    ",378],["T_COMMENT","\/\/ AJAX responses. To process the attachments of those AJAX responses, we\n",378],["T_WHITESPACE","    ",379],["T_COMMENT","\/\/ need a fake request that is identical to the master request, but with\n",379],["T_WHITESPACE","    ",380],["T_COMMENT","\/\/ one change: it must have the right Accept header, otherwise the work-\n",380],["T_WHITESPACE","    ",381],["T_COMMENT","\/\/ around for a bug in IE9 will cause not JSON, but <textarea>-wrapped JSON\n",381],["T_WHITESPACE","    ",382],["T_COMMENT","\/\/ to be returned.\n",382],["T_WHITESPACE","    ",383],["T_COMMENT","\/\/ @see \\Drupal\\Core\\EventSubscriber\\AjaxResponseSubscriber::onResponse()\n",383],["T_WHITESPACE","    ",384],["T_VARIABLE","$fake_request",384],["T_WHITESPACE"," ",384],"=",["T_WHITESPACE"," ",384],["T_VARIABLE","$this",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","requestStack",384],["T_OBJECT_OPERATOR","->",384],["T_STRING","getMasterRequest",384],"(",")",["T_OBJECT_OPERATOR","->",384],["T_STRING","duplicate",384],"(",")",";",["T_WHITESPACE","\n    ",384],["T_VARIABLE","$fake_request",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","headers",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","set",385],"(",["T_CONSTANT_ENCAPSED_STRING","'Accept'",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'application\/vnd.drupal-ajax'",385],")",";",["T_WHITESPACE","\n\n    ",385],["T_FOREACH","foreach",387],["T_WHITESPACE"," ",387],"(",["T_VARIABLE","$placeholder_order",387],["T_WHITESPACE"," ",387],["T_AS","as",387],["T_WHITESPACE"," ",387],["T_VARIABLE","$placeholder_id",387],")",["T_WHITESPACE"," ",387],"{",["T_WHITESPACE","\n      ",387],["T_IF","if",388],["T_WHITESPACE"," ",388],"(","!",["T_ISSET","isset",388],"(",["T_VARIABLE","$placeholders",388],"[",["T_VARIABLE","$placeholder_id",388],"]",")",")",["T_WHITESPACE"," ",388],"{",["T_WHITESPACE","\n        ",388],["T_CONTINUE","continue",389],";",["T_WHITESPACE","\n      ",389],"}",["T_WHITESPACE","\n\n      ",390],["T_COMMENT","\/\/ Render the placeholder.\n",392],["T_WHITESPACE","      ",393],["T_VARIABLE","$placeholder_render_array",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_VARIABLE","$placeholders",393],"[",["T_VARIABLE","$placeholder_id",393],"]",";",["T_WHITESPACE","\n      ",393],["T_TRY","try",394],["T_WHITESPACE"," ",394],"{",["T_WHITESPACE","\n        ",394],["T_VARIABLE","$elements",395],["T_WHITESPACE"," ",395],"=",["T_WHITESPACE"," ",395],["T_VARIABLE","$this",395],["T_OBJECT_OPERATOR","->",395],["T_STRING","renderPlaceholder",395],"(",["T_VARIABLE","$placeholder_id",395],",",["T_WHITESPACE"," ",395],["T_VARIABLE","$placeholder_render_array",395],")",";",["T_WHITESPACE","\n      ",395],"}",["T_WHITESPACE","\n      ",396],["T_CATCH","catch",397],["T_WHITESPACE"," ",397],"(",["T_NS_SEPARATOR","\\",397],["T_STRING","Exception",397],["T_WHITESPACE"," ",397],["T_VARIABLE","$e",397],")",["T_WHITESPACE"," ",397],"{",["T_WHITESPACE","\n        ",397],["T_IF","if",398],["T_WHITESPACE"," ",398],"(",["T_VARIABLE","$this",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","configFactory",398],["T_OBJECT_OPERATOR","->",398],["T_STRING","get",398],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",398],")",["T_OBJECT_OPERATOR","->",398],["T_STRING","get",398],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",398],")",["T_WHITESPACE"," ",398],["T_IS_IDENTICAL","===",398],["T_WHITESPACE"," ",398],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",398],")",["T_WHITESPACE"," ",398],"{",["T_WHITESPACE","\n          ",398],["T_THROW","throw",399],["T_WHITESPACE"," ",399],["T_VARIABLE","$e",399],";",["T_WHITESPACE","\n        ",399],"}",["T_WHITESPACE","\n        ",400],["T_ELSE","else",401],["T_WHITESPACE"," ",401],"{",["T_WHITESPACE","\n          ",401],["T_STRING","trigger_error",402],"(",["T_VARIABLE","$e",402],",",["T_WHITESPACE"," ",402],["T_STRING","E_USER_ERROR",402],")",";",["T_WHITESPACE","\n          ",402],["T_CONTINUE","continue",403],";",["T_WHITESPACE","\n        ",403],"}",["T_WHITESPACE","\n      ",404],"}",["T_WHITESPACE","\n\n      ",405],["T_COMMENT","\/\/ Create a new AjaxResponse.\n",407],["T_WHITESPACE","      ",408],["T_VARIABLE","$ajax_response",408],["T_WHITESPACE"," ",408],"=",["T_WHITESPACE"," ",408],["T_NEW","new",408],["T_WHITESPACE"," ",408],["T_STRING","AjaxResponse",408],"(",")",";",["T_WHITESPACE","\n      ",408],["T_COMMENT","\/\/ JavaScript's querySelector automatically decodes HTML entities in\n",409],["T_WHITESPACE","      ",410],["T_COMMENT","\/\/ attributes, so we must decode the entities of the current BigPipe\n",410],["T_WHITESPACE","      ",411],["T_COMMENT","\/\/ placeholder ID (which has HTML entities encoded since we use it to find\n",411],["T_WHITESPACE","      ",412],["T_COMMENT","\/\/ the placeholders).\n",412],["T_WHITESPACE","      ",413],["T_VARIABLE","$big_pipe_js_placeholder_id",413],["T_WHITESPACE"," ",413],"=",["T_WHITESPACE"," ",413],["T_STRING","Html",413],["T_DOUBLE_COLON","::",413],["T_STRING","decodeEntities",413],"(",["T_VARIABLE","$placeholder_id",413],")",";",["T_WHITESPACE","\n      ",413],["T_VARIABLE","$ajax_response",414],["T_OBJECT_OPERATOR","->",414],["T_STRING","addCommand",414],"(",["T_NEW","new",414],["T_WHITESPACE"," ",414],["T_STRING","ReplaceCommand",414],"(",["T_STRING","sprintf",414],"(",["T_CONSTANT_ENCAPSED_STRING","'[data-big-pipe-placeholder-id=\"%s\"]'",414],",",["T_WHITESPACE"," ",414],["T_VARIABLE","$big_pipe_js_placeholder_id",414],")",",",["T_WHITESPACE"," ",414],["T_VARIABLE","$elements",414],"[",["T_CONSTANT_ENCAPSED_STRING","'#markup'",414],"]",")",")",";",["T_WHITESPACE","\n      ",414],["T_VARIABLE","$ajax_response",415],["T_OBJECT_OPERATOR","->",415],["T_STRING","setAttachments",415],"(",["T_VARIABLE","$elements",415],"[",["T_CONSTANT_ENCAPSED_STRING","'#attached'",415],"]",")",";",["T_WHITESPACE","\n\n      ",415],["T_COMMENT","\/\/ Push a fake request with the asset libraries loaded so far and dispatch\n",417],["T_WHITESPACE","      ",418],["T_COMMENT","\/\/ KernelEvents::RESPONSE event. This results in the attachments for the\n",418],["T_WHITESPACE","      ",419],["T_COMMENT","\/\/ AJAX response being processed by AjaxResponseAttachmentsProcessor and\n",419],["T_WHITESPACE","      ",420],["T_COMMENT","\/\/ hence:\n",420],["T_WHITESPACE","      ",421],["T_COMMENT","\/\/ - the necessary AJAX commands to load the necessary missing asset\n",421],["T_WHITESPACE","      ",422],["T_COMMENT","\/\/   libraries and updated AJAX page state are added to the AJAX response\n",422],["T_WHITESPACE","      ",423],["T_COMMENT","\/\/ - the attachments associated with the response are finalized, which\n",423],["T_WHITESPACE","      ",424],["T_COMMENT","\/\/   allows us to track the total set of asset libraries sent in the\n",424],["T_WHITESPACE","      ",425],["T_COMMENT","\/\/   initial HTML response plus all embedded AJAX responses sent so far.\n",425],["T_WHITESPACE","      ",426],["T_VARIABLE","$fake_request",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","request",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","set",426],"(",["T_CONSTANT_ENCAPSED_STRING","'ajax_page_state'",426],",",["T_WHITESPACE"," ",426],"[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",426],["T_WHITESPACE"," ",426],["T_DOUBLE_ARROW","=>",426],["T_WHITESPACE"," ",426],["T_STRING","implode",426],"(",["T_CONSTANT_ENCAPSED_STRING","','",426],",",["T_WHITESPACE"," ",426],["T_VARIABLE","$cumulative_assets",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getAlreadyLoadedLibraries",426],"(",")",")","]",["T_WHITESPACE"," ",426],"+",["T_WHITESPACE"," ",426],["T_VARIABLE","$cumulative_assets",426],["T_OBJECT_OPERATOR","->",426],["T_STRING","getSettings",426],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",426],"]",")",";",["T_WHITESPACE","\n      ",426],["T_TRY","try",427],["T_WHITESPACE"," ",427],"{",["T_WHITESPACE","\n        ",427],["T_VARIABLE","$ajax_response",428],["T_WHITESPACE"," ",428],"=",["T_WHITESPACE"," ",428],["T_VARIABLE","$this",428],["T_OBJECT_OPERATOR","->",428],["T_STRING","filterEmbeddedResponse",428],"(",["T_VARIABLE","$fake_request",428],",",["T_WHITESPACE"," ",428],["T_VARIABLE","$ajax_response",428],")",";",["T_WHITESPACE","\n      ",428],"}",["T_WHITESPACE","\n      ",429],["T_CATCH","catch",430],["T_WHITESPACE"," ",430],"(",["T_NS_SEPARATOR","\\",430],["T_STRING","Exception",430],["T_WHITESPACE"," ",430],["T_VARIABLE","$e",430],")",["T_WHITESPACE"," ",430],"{",["T_WHITESPACE","\n        ",430],["T_IF","if",431],["T_WHITESPACE"," ",431],"(",["T_VARIABLE","$this",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","configFactory",431],["T_OBJECT_OPERATOR","->",431],["T_STRING","get",431],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",431],")",["T_OBJECT_OPERATOR","->",431],["T_STRING","get",431],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",431],")",["T_WHITESPACE"," ",431],["T_IS_IDENTICAL","===",431],["T_WHITESPACE"," ",431],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",431],")",["T_WHITESPACE"," ",431],"{",["T_WHITESPACE","\n          ",431],["T_THROW","throw",432],["T_WHITESPACE"," ",432],["T_VARIABLE","$e",432],";",["T_WHITESPACE","\n        ",432],"}",["T_WHITESPACE","\n        ",433],["T_ELSE","else",434],["T_WHITESPACE"," ",434],"{",["T_WHITESPACE","\n          ",434],["T_STRING","trigger_error",435],"(",["T_VARIABLE","$e",435],",",["T_WHITESPACE"," ",435],["T_STRING","E_USER_ERROR",435],")",";",["T_WHITESPACE","\n          ",435],["T_CONTINUE","continue",436],";",["T_WHITESPACE","\n        ",436],"}",["T_WHITESPACE","\n      ",437],"}",["T_WHITESPACE","\n\n      ",438],["T_COMMENT","\/\/ Send this embedded AJAX response.\n",440],["T_WHITESPACE","      ",441],["T_VARIABLE","$json",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_VARIABLE","$ajax_response",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","getContent",441],"(",")",";",["T_WHITESPACE","\n      ",441],["T_VARIABLE","$output",442],["T_WHITESPACE"," ",442],"=",["T_WHITESPACE"," ",442],["T_START_HEREDOC","<<<EOF\n",442],["T_ENCAPSED_AND_WHITESPACE","    <script type=\"application\/vnd.drupal-ajax\" data-big-pipe-replacement-for-placeholder-with-id=\"",443],["T_VARIABLE","$placeholder_id",443],["T_ENCAPSED_AND_WHITESPACE","\">\n    ",443],["T_VARIABLE","$json",444],["T_ENCAPSED_AND_WHITESPACE","\n    <\/script>\n",444],["T_END_HEREDOC","EOF",446],";",["T_WHITESPACE","\n      ",446],["T_PRINT","print",447],["T_WHITESPACE"," ",447],["T_VARIABLE","$output",447],";",["T_WHITESPACE","\n      ",447],["T_STRING","flush",448],"(",")",";",["T_WHITESPACE","\n\n      ",448],["T_COMMENT","\/\/ Another placeholder was rendered and sent, track the set of asset\n",450],["T_WHITESPACE","      ",451],["T_COMMENT","\/\/ libraries sent so far. Any new settings are already sent; we don't need\n",451],["T_WHITESPACE","      ",452],["T_COMMENT","\/\/ to track those.\n",452],["T_WHITESPACE","      ",453],["T_IF","if",453],["T_WHITESPACE"," ",453],"(",["T_ISSET","isset",453],"(",["T_VARIABLE","$ajax_response",453],["T_OBJECT_OPERATOR","->",453],["T_STRING","getAttachments",453],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",453],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",453],"]",")",")",["T_WHITESPACE"," ",453],"{",["T_WHITESPACE","\n        ",453],["T_VARIABLE","$cumulative_assets",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","setAlreadyLoadedLibraries",454],"(",["T_STRING","explode",454],"(",["T_CONSTANT_ENCAPSED_STRING","','",454],",",["T_WHITESPACE"," ",454],["T_VARIABLE","$ajax_response",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","getAttachments",454],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'drupalSettings'",454],"]","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",454],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",454],"]",")",")",";",["T_WHITESPACE","\n      ",454],"}",["T_WHITESPACE","\n    ",455],"}",["T_WHITESPACE","\n\n    ",456],["T_COMMENT","\/\/ Send the stop signal.\n",458],["T_WHITESPACE","    ",459],["T_PRINT","print",459],["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",459],";",["T_WHITESPACE","\n    ",459],["T_PRINT","print",460],["T_WHITESPACE"," ",460],["T_STATIC","static",460],["T_DOUBLE_COLON","::",460],["T_STRING","STOP_SIGNAL",460],";",["T_WHITESPACE","\n    ",460],["T_PRINT","print",461],["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",461],";",["T_WHITESPACE","\n    ",461],["T_STRING","flush",462],"(",")",";",["T_WHITESPACE","\n  ",462],"}",["T_WHITESPACE","\n\n  ",463],["T_DOC_COMMENT","\/**\n   * Filters the given embedded response, using the cumulative AJAX page state.\n   *\n   * @param \\Symfony\\Component\\HttpFoundation\\Request $fake_request\n   *   A fake subrequest that contains the cumulative AJAX page state of the\n   *   HTML document and all preceding Embedded HTML or AJAX responses.\n   * @param \\Symfony\\Component\\HttpFoundation\\Response|\\Drupal\\Core\\Render\\HtmlResponse|\\Drupal\\Core\\Ajax\\AjaxResponse $embedded_response\n   *   Either a HTML response or an AJAX response that will be embedded in the\n   *   overall HTML response.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\Response\n   *   The filtered response, which will load only the assets that $fake_request\n   *   did not indicate to already have been loaded, plus the updated cumulative\n   *   AJAX page state.\n   *\/",465],["T_WHITESPACE","\n  ",479],["T_PROTECTED","protected",480],["T_WHITESPACE"," ",480],["T_FUNCTION","function",480],["T_WHITESPACE"," ",480],["T_STRING","filterEmbeddedResponse",480],"(",["T_STRING","Request",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$fake_request",480],",",["T_WHITESPACE"," ",480],["T_STRING","Response",480],["T_WHITESPACE"," ",480],["T_VARIABLE","$embedded_response",480],")",["T_WHITESPACE"," ",480],"{",["T_WHITESPACE","\n    ",480],["T_STRING","assert",481],"(",["T_CONSTANT_ENCAPSED_STRING","'$embedded_response instanceof \\Drupal\\Core\\Render\\HtmlResponse || $embedded_response instanceof \\Drupal\\Core\\Ajax\\AjaxResponse'",481],")",";",["T_WHITESPACE","\n    ",481],["T_VARIABLE","$this",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","requestStack",482],["T_OBJECT_OPERATOR","->",482],["T_STRING","push",482],"(",["T_VARIABLE","$fake_request",482],")",";",["T_WHITESPACE","\n    ",482],["T_VARIABLE","$event",483],["T_WHITESPACE"," ",483],"=",["T_WHITESPACE"," ",483],["T_NEW","new",483],["T_WHITESPACE"," ",483],["T_STRING","FilterResponseEvent",483],"(",["T_VARIABLE","$this",483],["T_OBJECT_OPERATOR","->",483],["T_STRING","httpKernel",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$fake_request",483],",",["T_WHITESPACE"," ",483],["T_STRING","HttpKernelInterface",483],["T_DOUBLE_COLON","::",483],["T_STRING","SUB_REQUEST",483],",",["T_WHITESPACE"," ",483],["T_VARIABLE","$embedded_response",483],")",";",["T_WHITESPACE","\n    ",483],["T_VARIABLE","$this",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","eventDispatcher",484],["T_OBJECT_OPERATOR","->",484],["T_STRING","dispatch",484],"(",["T_STRING","KernelEvents",484],["T_DOUBLE_COLON","::",484],["T_STRING","RESPONSE",484],",",["T_WHITESPACE"," ",484],["T_VARIABLE","$event",484],")",";",["T_WHITESPACE","\n    ",484],["T_VARIABLE","$filtered_response",485],["T_WHITESPACE"," ",485],"=",["T_WHITESPACE"," ",485],["T_VARIABLE","$event",485],["T_OBJECT_OPERATOR","->",485],["T_STRING","getResponse",485],"(",")",";",["T_WHITESPACE","\n    ",485],["T_VARIABLE","$this",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","requestStack",486],["T_OBJECT_OPERATOR","->",486],["T_STRING","pop",486],"(",")",";",["T_WHITESPACE","\n    ",486],["T_RETURN","return",487],["T_WHITESPACE"," ",487],["T_VARIABLE","$filtered_response",487],";",["T_WHITESPACE","\n  ",487],"}",["T_WHITESPACE","\n\n  ",488],["T_DOC_COMMENT","\/**\n   * Sends <\/body> and everything after it.\n   *\n   * @param string $post_body\n   *   The HTML response's content after the closing <\/body> tag.\n   *\/",490],["T_WHITESPACE","\n  ",495],["T_PROTECTED","protected",496],["T_WHITESPACE"," ",496],["T_FUNCTION","function",496],["T_WHITESPACE"," ",496],["T_STRING","sendPostBody",496],"(",["T_VARIABLE","$post_body",496],")",["T_WHITESPACE"," ",496],"{",["T_WHITESPACE","\n    ",496],["T_PRINT","print",497],["T_WHITESPACE"," ",497],["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",497],";",["T_WHITESPACE","\n    ",497],["T_PRINT","print",498],["T_WHITESPACE"," ",498],["T_VARIABLE","$post_body",498],";",["T_WHITESPACE","\n    ",498],["T_STRING","flush",499],"(",")",";",["T_WHITESPACE","\n  ",499],"}",["T_WHITESPACE","\n\n  ",500],["T_DOC_COMMENT","\/**\n   * Renders a placeholder, and just that placeholder.\n   *\n   * BigPipe renders placeholders independently of the rest of the content, so\n   * it needs to be able to render placeholders by themselves.\n   *\n   * @param string $placeholder\n   *   The placeholder to render.\n   * @param array $placeholder_render_array\n   *   The render array associated with that placeholder.\n   *\n   * @return array\n   *   The render array representing the rendered placeholder.\n   *\n   * @see \\Drupal\\Core\\Render\\RendererInterface::renderPlaceholder()\n   *\/",502],["T_WHITESPACE","\n  ",517],["T_PROTECTED","protected",518],["T_WHITESPACE"," ",518],["T_FUNCTION","function",518],["T_WHITESPACE"," ",518],["T_STRING","renderPlaceholder",518],"(",["T_VARIABLE","$placeholder",518],",",["T_WHITESPACE"," ",518],["T_ARRAY","array",518],["T_WHITESPACE"," ",518],["T_VARIABLE","$placeholder_render_array",518],")",["T_WHITESPACE"," ",518],"{",["T_WHITESPACE","\n    ",518],["T_VARIABLE","$elements",519],["T_WHITESPACE"," ",519],"=",["T_WHITESPACE"," ",519],"[",["T_WHITESPACE","\n      ",519],["T_CONSTANT_ENCAPSED_STRING","'#markup'",520],["T_WHITESPACE"," ",520],["T_DOUBLE_ARROW","=>",520],["T_WHITESPACE"," ",520],["T_VARIABLE","$placeholder",520],",",["T_WHITESPACE","\n      ",520],["T_CONSTANT_ENCAPSED_STRING","'#attached'",521],["T_WHITESPACE"," ",521],["T_DOUBLE_ARROW","=>",521],["T_WHITESPACE"," ",521],"[",["T_WHITESPACE","\n        ",521],["T_CONSTANT_ENCAPSED_STRING","'placeholders'",522],["T_WHITESPACE"," ",522],["T_DOUBLE_ARROW","=>",522],["T_WHITESPACE"," ",522],"[",["T_WHITESPACE","\n          ",522],["T_VARIABLE","$placeholder",523],["T_WHITESPACE"," ",523],["T_DOUBLE_ARROW","=>",523],["T_WHITESPACE"," ",523],["T_VARIABLE","$placeholder_render_array",523],",",["T_WHITESPACE","\n        ",523],"]",",",["T_WHITESPACE","\n      ",524],"]",",",["T_WHITESPACE","\n    ",525],"]",";",["T_WHITESPACE","\n    ",526],["T_RETURN","return",527],["T_WHITESPACE"," ",527],["T_VARIABLE","$this",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","renderer",527],["T_OBJECT_OPERATOR","->",527],["T_STRING","renderPlaceholder",527],"(",["T_VARIABLE","$placeholder",527],",",["T_WHITESPACE"," ",527],["T_VARIABLE","$elements",527],")",";",["T_WHITESPACE","\n  ",527],"}",["T_WHITESPACE","\n\n  ",528],["T_DOC_COMMENT","\/**\n   * Gets the BigPipe placeholder order.\n   *\n   * Determines the order in which BigPipe placeholders must be replaced.\n   *\n   * @param string $html\n   *   HTML markup.\n   * @param array $placeholders\n   *   Associative array; the BigPipe placeholders. Keys are the BigPipe\n   *   placeholder IDs.\n   *\n   * @return array\n   *   Indexed array; the order in which the BigPipe placeholders must be sent.\n   *   Values are the BigPipe placeholder IDs. Note that only unique\n   *   placeholders are kept: if the same placeholder occurs multiple times, we\n   *   only keep the first occurrence.\n   *\/",530],["T_WHITESPACE","\n  ",546],["T_PROTECTED","protected",547],["T_WHITESPACE"," ",547],["T_FUNCTION","function",547],["T_WHITESPACE"," ",547],["T_STRING","getPlaceholderOrder",547],"(",["T_VARIABLE","$html",547],",",["T_WHITESPACE"," ",547],["T_VARIABLE","$placeholders",547],")",["T_WHITESPACE"," ",547],"{",["T_WHITESPACE","\n    ",547],["T_VARIABLE","$fragments",548],["T_WHITESPACE"," ",548],"=",["T_WHITESPACE"," ",548],["T_STRING","explode",548],"(",["T_CONSTANT_ENCAPSED_STRING","'<div data-big-pipe-placeholder-id=\"'",548],",",["T_WHITESPACE"," ",548],["T_VARIABLE","$html",548],")",";",["T_WHITESPACE","\n    ",548],["T_STRING","array_shift",549],"(",["T_VARIABLE","$fragments",549],")",";",["T_WHITESPACE","\n    ",549],["T_VARIABLE","$placeholder_ids",550],["T_WHITESPACE"," ",550],"=",["T_WHITESPACE"," ",550],"[","]",";",["T_WHITESPACE","\n\n    ",550],["T_FOREACH","foreach",552],["T_WHITESPACE"," ",552],"(",["T_VARIABLE","$fragments",552],["T_WHITESPACE"," ",552],["T_AS","as",552],["T_WHITESPACE"," ",552],["T_VARIABLE","$fragment",552],")",["T_WHITESPACE"," ",552],"{",["T_WHITESPACE","\n      ",552],["T_VARIABLE","$t",553],["T_WHITESPACE"," ",553],"=",["T_WHITESPACE"," ",553],["T_STRING","explode",553],"(",["T_CONSTANT_ENCAPSED_STRING","'\"><\/div>'",553],",",["T_WHITESPACE"," ",553],["T_VARIABLE","$fragment",553],",",["T_WHITESPACE"," ",553],["T_LNUMBER","2",553],")",";",["T_WHITESPACE","\n      ",553],["T_VARIABLE","$placeholder_id",554],["T_WHITESPACE"," ",554],"=",["T_WHITESPACE"," ",554],["T_VARIABLE","$t",554],"[",["T_LNUMBER","0",554],"]",";",["T_WHITESPACE","\n      ",554],["T_VARIABLE","$placeholder_ids",555],"[","]",["T_WHITESPACE"," ",555],"=",["T_WHITESPACE"," ",555],["T_VARIABLE","$placeholder_id",555],";",["T_WHITESPACE","\n    ",555],"}",["T_WHITESPACE","\n    ",556],["T_VARIABLE","$placeholder_ids",557],["T_WHITESPACE"," ",557],"=",["T_WHITESPACE"," ",557],["T_STRING","array_unique",557],"(",["T_VARIABLE","$placeholder_ids",557],")",";",["T_WHITESPACE","\n\n    ",557],["T_COMMENT","\/\/ The 'status messages' placeholder needs to be special cased, because it\n",559],["T_WHITESPACE","    ",560],["T_COMMENT","\/\/ depends on global state that can be modified when other placeholders are\n",560],["T_WHITESPACE","    ",561],["T_COMMENT","\/\/ being rendered: any code can add messages to render.\n",561],["T_WHITESPACE","    ",562],["T_COMMENT","\/\/ This violates the principle that each lazy builder must be able to render\n",562],["T_WHITESPACE","    ",563],["T_COMMENT","\/\/ itself in isolation, and therefore in any order. However, we cannot\n",563],["T_WHITESPACE","    ",564],["T_COMMENT","\/\/ change the way drupal_set_message() works in the Drupal 8 cycle. So we\n",564],["T_WHITESPACE","    ",565],["T_COMMENT","\/\/ have to accommodate its special needs.\n",565],["T_WHITESPACE","    ",566],["T_COMMENT","\/\/ Allowing placeholders to be rendered in a particular order (in this case:\n",566],["T_WHITESPACE","    ",567],["T_COMMENT","\/\/ last) would violate this isolation principle. Thus a monopoly is granted\n",567],["T_WHITESPACE","    ",568],["T_COMMENT","\/\/ to this one special case, with this hard-coded solution.\n",568],["T_WHITESPACE","    ",569],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Render\\Element\\StatusMessages\n",569],["T_WHITESPACE","    ",570],["T_COMMENT","\/\/ @see \\Drupal\\Core\\Render\\Renderer::replacePlaceholders()\n",570],["T_WHITESPACE","    ",571],["T_COMMENT","\/\/ @see https:\/\/www.drupal.org\/node\/2712935#comment-11368923\n",571],["T_WHITESPACE","    ",572],["T_VARIABLE","$message_placeholder_ids",572],["T_WHITESPACE"," ",572],"=",["T_WHITESPACE"," ",572],"[","]",";",["T_WHITESPACE","\n    ",572],["T_FOREACH","foreach",573],["T_WHITESPACE"," ",573],"(",["T_VARIABLE","$placeholders",573],["T_WHITESPACE"," ",573],["T_AS","as",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$placeholder_id",573],["T_WHITESPACE"," ",573],["T_DOUBLE_ARROW","=>",573],["T_WHITESPACE"," ",573],["T_VARIABLE","$placeholder_element",573],")",["T_WHITESPACE"," ",573],"{",["T_WHITESPACE","\n      ",573],["T_IF","if",574],["T_WHITESPACE"," ",574],"(",["T_ISSET","isset",574],"(",["T_VARIABLE","$placeholder_element",574],"[",["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",574],"]",")",["T_WHITESPACE"," ",574],["T_BOOLEAN_AND","&&",574],["T_WHITESPACE"," ",574],["T_VARIABLE","$placeholder_element",574],"[",["T_CONSTANT_ENCAPSED_STRING","'#lazy_builder'",574],"]","[",["T_LNUMBER","0",574],"]",["T_WHITESPACE"," ",574],["T_IS_IDENTICAL","===",574],["T_WHITESPACE"," ",574],["T_CONSTANT_ENCAPSED_STRING","'Drupal\\Core\\Render\\Element\\StatusMessages::renderMessages'",574],")",["T_WHITESPACE"," ",574],"{",["T_WHITESPACE","\n        ",574],["T_VARIABLE","$message_placeholder_ids",575],"[","]",["T_WHITESPACE"," ",575],"=",["T_WHITESPACE"," ",575],["T_VARIABLE","$placeholder_id",575],";",["T_WHITESPACE","\n      ",575],"}",["T_WHITESPACE","\n    ",576],"}",["T_WHITESPACE","\n\n    ",577],["T_COMMENT","\/\/ Return placeholder IDs in DOM order, but with the 'status messages'\n",579],["T_WHITESPACE","    ",580],["T_COMMENT","\/\/ placeholders at the end, if they are present.\n",580],["T_WHITESPACE","    ",581],["T_VARIABLE","$ordered_placeholder_ids",581],["T_WHITESPACE"," ",581],"=",["T_WHITESPACE"," ",581],["T_STRING","array_merge",581],"(",["T_WHITESPACE","\n      ",581],["T_STRING","array_diff",582],"(",["T_VARIABLE","$placeholder_ids",582],",",["T_WHITESPACE"," ",582],["T_VARIABLE","$message_placeholder_ids",582],")",",",["T_WHITESPACE","\n      ",582],["T_STRING","array_intersect",583],"(",["T_VARIABLE","$placeholder_ids",583],",",["T_WHITESPACE"," ",583],["T_VARIABLE","$message_placeholder_ids",583],")",["T_WHITESPACE","\n    ",583],")",";",["T_WHITESPACE","\n    ",584],["T_RETURN","return",585],["T_WHITESPACE"," ",585],["T_VARIABLE","$ordered_placeholder_ids",585],";",["T_WHITESPACE","\n  ",585],"}",["T_WHITESPACE","\n\n",586],"}",["T_WHITESPACE","\n",588]]
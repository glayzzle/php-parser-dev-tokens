[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","big_pipe",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","big_pipe",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Render",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Placeholder",5],["T_NS_SEPARATOR","\\",5],["T_STRING","BigPipeStrategy",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","big_pipe",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Render",6],["T_NS_SEPARATOR","\\",6],["T_STRING","BigPipe",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Component",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Serialization",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Json",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Component",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Utility",8],["T_NS_SEPARATOR","\\",8],["T_STRING","Html",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Core",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Logger",9],["T_NS_SEPARATOR","\\",9],["T_STRING","RfcLogLevel",9],";",["T_WHITESPACE","\n",9],["T_USE","use",10],["T_WHITESPACE"," ",10],["T_STRING","Drupal",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Core",10],["T_NS_SEPARATOR","\\",10],["T_STRING","Url",10],";",["T_WHITESPACE","\n",10],["T_USE","use",11],["T_WHITESPACE"," ",11],["T_STRING","Drupal",11],["T_NS_SEPARATOR","\\",11],["T_STRING","simpletest",11],["T_NS_SEPARATOR","\\",11],["T_STRING","WebTestBase",11],";",["T_WHITESPACE","\n\n",11],["T_DOC_COMMENT","\/**\n * Tests BigPipe's no-JS detection & response delivery (with and without JS).\n *\n * Covers:\n * - big_pipe_page_attachments()\n * - \\Drupal\\big_pipe\\Controller\\BigPipeController\n * - \\Drupal\\big_pipe\\EventSubscriber\\HtmlResponseBigPipeSubscriber\n * - \\Drupal\\big_pipe\\Render\\BigPipe\n *\n * @group big_pipe\n *\/",13],["T_WHITESPACE","\n",23],["T_CLASS","class",24],["T_WHITESPACE"," ",24],["T_STRING","BigPipeTest",24],["T_WHITESPACE"," ",24],["T_EXTENDS","extends",24],["T_WHITESPACE"," ",24],["T_STRING","WebTestBase",24],["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n\n  ",24],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",26],["T_WHITESPACE","\n  ",30],["T_PUBLIC","public",31],["T_WHITESPACE"," ",31],["T_STATIC","static",31],["T_WHITESPACE"," ",31],["T_VARIABLE","$modules",31],["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],"[",["T_CONSTANT_ENCAPSED_STRING","'big_pipe'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test'",31],",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'dblog'",31],"]",";",["T_WHITESPACE","\n\n  ",31],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",33],["T_WHITESPACE","\n  ",35],["T_PROTECTED","protected",36],["T_WHITESPACE"," ",36],["T_VARIABLE","$dumpHeaders",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","TRUE",36],";",["T_WHITESPACE","\n\n  ",36],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",38],["T_WHITESPACE","\n  ",40],["T_PROTECTED","protected",41],["T_WHITESPACE"," ",41],["T_FUNCTION","function",41],["T_WHITESPACE"," ",41],["T_STRING","setUp",41],"(",")",["T_WHITESPACE"," ",41],"{",["T_WHITESPACE","\n    ",41],["T_STRING","parent",42],["T_DOUBLE_COLON","::",42],["T_STRING","setUp",42],"(",")",";",["T_WHITESPACE","\n\n    ",42],["T_COMMENT","\/\/ Ignore the <meta> refresh that big_pipe.module sets. It causes a redirect\n",44],["T_WHITESPACE","    ",45],["T_COMMENT","\/\/ to a page that sets another cookie, which causes WebTestBase to lose the\n",45],["T_WHITESPACE","    ",46],["T_COMMENT","\/\/ session cookie. To avoid this problem, tests should first call\n",46],["T_WHITESPACE","    ",47],["T_COMMENT","\/\/ drupalGet() and then call checkForMetaRefresh() manually, and then reset\n",47],["T_WHITESPACE","    ",48],["T_COMMENT","\/\/ $this->maximumMetaRefreshCount and $this->metaRefreshCount.\n",48],["T_WHITESPACE","    ",49],["T_COMMENT","\/\/ @see doMetaRefresh()\n",49],["T_WHITESPACE","    ",50],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","maximumMetaRefreshCount",50],["T_WHITESPACE"," ",50],"=",["T_WHITESPACE"," ",50],["T_LNUMBER","0",50],";",["T_WHITESPACE","\n  ",50],"}",["T_WHITESPACE","\n\n  ",51],["T_DOC_COMMENT","\/**\n   * Performs a single <meta> refresh explicitly.\n   *\n   * This test disables the automatic <meta> refresh checking, each time it is\n   * desired that this runs, a test case must explicitly call this.\n   *\n   * @see setUp()\n   *\/",53],["T_WHITESPACE","\n  ",60],["T_PROTECTED","protected",61],["T_WHITESPACE"," ",61],["T_FUNCTION","function",61],["T_WHITESPACE"," ",61],["T_STRING","performMetaRefresh",61],"(",")",["T_WHITESPACE"," ",61],"{",["T_WHITESPACE","\n    ",61],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","maximumMetaRefreshCount",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_LNUMBER","1",62],";",["T_WHITESPACE","\n    ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","checkForMetaRefresh",63],"(",")",";",["T_WHITESPACE","\n    ",63],["T_VARIABLE","$this",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","maximumMetaRefreshCount",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_LNUMBER","0",64],";",["T_WHITESPACE","\n    ",64],["T_VARIABLE","$this",65],["T_OBJECT_OPERATOR","->",65],["T_STRING","metaRefreshCount",65],["T_WHITESPACE"," ",65],"=",["T_WHITESPACE"," ",65],["T_LNUMBER","0",65],";",["T_WHITESPACE","\n  ",65],"}",["T_WHITESPACE","\n\n  ",66],["T_DOC_COMMENT","\/**\n   * Tests BigPipe's no-JS detection.\n   *\n   * Covers:\n   * - big_pipe_page_attachments()\n   * - \\Drupal\\big_pipe\\Controller\\BigPipeController\n   *\/",68],["T_WHITESPACE","\n  ",74],["T_PUBLIC","public",75],["T_WHITESPACE"," ",75],["T_FUNCTION","function",75],["T_WHITESPACE"," ",75],["T_STRING","testNoJsDetection",75],"(",")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n    ",75],["T_VARIABLE","$no_js_to_js_markup",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'<script>document.cookie = \"'",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_STRING","BigPipeStrategy",76],["T_DOUBLE_COLON","::",76],["T_STRING","NOJS_COOKIE",76],["T_WHITESPACE"," ",76],".",["T_WHITESPACE"," ",76],["T_CONSTANT_ENCAPSED_STRING","'=1; path=\/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"<\/script>'",76],";",["T_WHITESPACE","\n\n    ",76],["T_COMMENT","\/\/ 1. No session (anonymous).\n",78],["T_WHITESPACE","    ",79],["T_VARIABLE","$this",79],["T_OBJECT_OPERATOR","->",79],["T_STRING","drupalGet",79],"(",["T_STRING","Url",79],["T_DOUBLE_COLON","::",79],["T_STRING","fromRoute",79],"(",["T_CONSTANT_ENCAPSED_STRING","'<front>'",79],")",")",";",["T_WHITESPACE","\n    ",79],["T_VARIABLE","$this",80],["T_OBJECT_OPERATOR","->",80],["T_STRING","assertSessionCookieExists",80],"(",["T_STRING","FALSE",80],")",";",["T_WHITESPACE","\n    ",80],["T_VARIABLE","$this",81],["T_OBJECT_OPERATOR","->",81],["T_STRING","assertBigPipeNoJsCookieExists",81],"(",["T_STRING","FALSE",81],")",";",["T_WHITESPACE","\n    ",81],["T_VARIABLE","$this",82],["T_OBJECT_OPERATOR","->",82],["T_STRING","assertNoRaw",82],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",82],")",";",["T_WHITESPACE","\n    ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","assertNoRaw",83],"(",["T_VARIABLE","$no_js_to_js_markup",83],")",";",["T_WHITESPACE","\n\n    ",83],["T_COMMENT","\/\/ 2. Session (authenticated).\n",85],["T_WHITESPACE","    ",86],["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","drupalLogin",86],"(",["T_VARIABLE","$this",86],["T_OBJECT_OPERATOR","->",86],["T_STRING","rootUser",86],")",";",["T_WHITESPACE","\n    ",86],["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","assertSessionCookieExists",87],"(",["T_STRING","TRUE",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","assertBigPipeNoJsCookieExists",88],"(",["T_STRING","FALSE",88],")",";",["T_WHITESPACE","\n    ",88],["T_VARIABLE","$this",89],["T_OBJECT_OPERATOR","->",89],["T_STRING","assertRaw",89],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","base_path",89],"(",")",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'big_pipe\/no-js?destination='",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_STRING","base_path",89],"(",")",["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'user\/1\" \/>'",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",89],["T_WHITESPACE"," ",89],".",["T_WHITESPACE"," ",89],["T_CONSTANT_ENCAPSED_STRING","'<\/noscript>'",89],")",";",["T_WHITESPACE","\n    ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","assertNoRaw",90],"(",["T_VARIABLE","$no_js_to_js_markup",90],")",";",["T_WHITESPACE","\n    ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertBigPipeNoJsMetaRefreshRedirect",91],"(",")",";",["T_WHITESPACE","\n    ",91],["T_VARIABLE","$this",92],["T_OBJECT_OPERATOR","->",92],["T_STRING","assertBigPipeNoJsCookieExists",92],"(",["T_STRING","TRUE",92],")",";",["T_WHITESPACE","\n    ",92],["T_VARIABLE","$this",93],["T_OBJECT_OPERATOR","->",93],["T_STRING","assertNoRaw",93],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",93],")",";",["T_WHITESPACE","\n    ",93],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","assertRaw",94],"(",["T_VARIABLE","$no_js_to_js_markup",94],")",";",["T_WHITESPACE","\n    ",94],["T_VARIABLE","$this",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","drupalLogout",95],"(",")",";",["T_WHITESPACE","\n\n    ",95],["T_COMMENT","\/\/ Close the prior connection and remove the collected state.\n",97],["T_WHITESPACE","    ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","curlClose",98],"(",")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","curlCookies",99],["T_WHITESPACE"," ",99],"=",["T_WHITESPACE"," ",99],"[","]",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","cookies",100],["T_WHITESPACE"," ",100],"=",["T_WHITESPACE"," ",100],"[","]",";",["T_WHITESPACE","\n\n    ",100],["T_COMMENT","\/\/ 3. Session (anonymous).\n",102],["T_WHITESPACE","    ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","drupalGet",103],"(",["T_STRING","Url",103],["T_DOUBLE_COLON","::",103],["T_STRING","fromRoute",103],"(",["T_CONSTANT_ENCAPSED_STRING","'user.login'",103],",",["T_WHITESPACE"," ",103],"[","]",",",["T_WHITESPACE"," ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'query'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],"[",["T_CONSTANT_ENCAPSED_STRING","'trigger_session'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_LNUMBER","1",103],"]","]",")",")",";",["T_WHITESPACE","\n    ",103],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","drupalGet",104],"(",["T_STRING","Url",104],["T_DOUBLE_COLON","::",104],["T_STRING","fromRoute",104],"(",["T_CONSTANT_ENCAPSED_STRING","'user.login'",104],")",")",";",["T_WHITESPACE","\n    ",104],["T_VARIABLE","$this",105],["T_OBJECT_OPERATOR","->",105],["T_STRING","assertSessionCookieExists",105],"(",["T_STRING","TRUE",105],")",";",["T_WHITESPACE","\n    ",105],["T_VARIABLE","$this",106],["T_OBJECT_OPERATOR","->",106],["T_STRING","assertBigPipeNoJsCookieExists",106],"(",["T_STRING","FALSE",106],")",";",["T_WHITESPACE","\n    ",106],["T_VARIABLE","$this",107],["T_OBJECT_OPERATOR","->",107],["T_STRING","assertRaw",107],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_STRING","base_path",107],"(",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'big_pipe\/no-js?destination='",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_STRING","base_path",107],"(",")",["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'user\/login\" \/>'",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","\"\\n\"",107],["T_WHITESPACE"," ",107],".",["T_WHITESPACE"," ",107],["T_CONSTANT_ENCAPSED_STRING","'<\/noscript>'",107],")",";",["T_WHITESPACE","\n    ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","assertNoRaw",108],"(",["T_VARIABLE","$no_js_to_js_markup",108],")",";",["T_WHITESPACE","\n    ",108],["T_VARIABLE","$this",109],["T_OBJECT_OPERATOR","->",109],["T_STRING","assertBigPipeNoJsMetaRefreshRedirect",109],"(",")",";",["T_WHITESPACE","\n    ",109],["T_VARIABLE","$this",110],["T_OBJECT_OPERATOR","->",110],["T_STRING","assertBigPipeNoJsCookieExists",110],"(",["T_STRING","TRUE",110],")",";",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","assertNoRaw",111],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",111],")",";",["T_WHITESPACE","\n    ",111],["T_VARIABLE","$this",112],["T_OBJECT_OPERATOR","->",112],["T_STRING","assertRaw",112],"(",["T_VARIABLE","$no_js_to_js_markup",112],")",";",["T_WHITESPACE","\n\n    ",112],["T_COMMENT","\/\/ Close the prior connection and remove the collected state.\n",114],["T_WHITESPACE","    ",115],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","curlClose",115],"(",")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","curlCookies",116],["T_WHITESPACE"," ",116],"=",["T_WHITESPACE"," ",116],"[","]",";",["T_WHITESPACE","\n    ",116],["T_VARIABLE","$this",117],["T_OBJECT_OPERATOR","->",117],["T_STRING","cookies",117],["T_WHITESPACE"," ",117],"=",["T_WHITESPACE"," ",117],"[","]",";",["T_WHITESPACE","\n\n    ",117],["T_COMMENT","\/\/ Edge case: route with '_no_big_pipe' option.\n",119],["T_WHITESPACE","    ",120],["T_VARIABLE","$this",120],["T_OBJECT_OPERATOR","->",120],["T_STRING","drupalGet",120],"(",["T_STRING","Url",120],["T_DOUBLE_COLON","::",120],["T_STRING","fromRoute",120],"(",["T_CONSTANT_ENCAPSED_STRING","'no_big_pipe'",120],")",")",";",["T_WHITESPACE","\n    ",120],["T_VARIABLE","$this",121],["T_OBJECT_OPERATOR","->",121],["T_STRING","assertSessionCookieExists",121],"(",["T_STRING","FALSE",121],")",";",["T_WHITESPACE","\n    ",121],["T_VARIABLE","$this",122],["T_OBJECT_OPERATOR","->",122],["T_STRING","assertBigPipeNoJsCookieExists",122],"(",["T_STRING","FALSE",122],")",";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$this",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","assertNoRaw",123],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",123],")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$this",124],["T_OBJECT_OPERATOR","->",124],["T_STRING","assertNoRaw",124],"(",["T_VARIABLE","$no_js_to_js_markup",124],")",";",["T_WHITESPACE","\n    ",124],["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","drupalLogin",125],"(",["T_VARIABLE","$this",125],["T_OBJECT_OPERATOR","->",125],["T_STRING","rootUser",125],")",";",["T_WHITESPACE","\n    ",125],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","drupalGet",126],"(",["T_STRING","Url",126],["T_DOUBLE_COLON","::",126],["T_STRING","fromRoute",126],"(",["T_CONSTANT_ENCAPSED_STRING","'no_big_pipe'",126],")",")",";",["T_WHITESPACE","\n    ",126],["T_VARIABLE","$this",127],["T_OBJECT_OPERATOR","->",127],["T_STRING","assertSessionCookieExists",127],"(",["T_STRING","TRUE",127],")",";",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertBigPipeNoJsCookieExists",128],"(",["T_STRING","FALSE",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertNoRaw",129],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",129],")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","assertNoRaw",130],"(",["T_VARIABLE","$no_js_to_js_markup",130],")",";",["T_WHITESPACE","\n  ",130],"}",["T_WHITESPACE","\n\n  ",131],["T_DOC_COMMENT","\/**\n   * Tests BigPipe-delivered HTML responses when JavaScript is enabled.\n   *\n   * Covers:\n   * - \\Drupal\\big_pipe\\EventSubscriber\\HtmlResponseBigPipeSubscriber\n   * - \\Drupal\\big_pipe\\Render\\BigPipe\n   * - \\Drupal\\big_pipe\\Render\\BigPipe::sendPlaceholders()\n   *\n   * @see \\Drupal\\big_pipe\\Tests\\BigPipePlaceholderTestCases\n   *\/",133],["T_WHITESPACE","\n  ",142],["T_PUBLIC","public",143],["T_WHITESPACE"," ",143],["T_FUNCTION","function",143],["T_WHITESPACE"," ",143],["T_STRING","testBigPipe",143],"(",")",["T_WHITESPACE"," ",143],"{",["T_WHITESPACE","\n    ",143],["T_COMMENT","\/\/ Simulate production.\n",144],["T_WHITESPACE","    ",145],["T_VARIABLE","$this",145],["T_OBJECT_OPERATOR","->",145],["T_STRING","config",145],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","set",145],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",145],",",["T_WHITESPACE"," ",145],["T_STRING","ERROR_REPORTING_HIDE",145],")",["T_OBJECT_OPERATOR","->",145],["T_STRING","save",145],"(",")",";",["T_WHITESPACE","\n\n    ",145],["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","drupalLogin",147],"(",["T_VARIABLE","$this",147],["T_OBJECT_OPERATOR","->",147],["T_STRING","rootUser",147],")",";",["T_WHITESPACE","\n    ",147],["T_VARIABLE","$this",148],["T_OBJECT_OPERATOR","->",148],["T_STRING","assertSessionCookieExists",148],"(",["T_STRING","TRUE",148],")",";",["T_WHITESPACE","\n    ",148],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertBigPipeNoJsCookieExists",149],"(",["T_STRING","FALSE",149],")",";",["T_WHITESPACE","\n\n    ",149],["T_VARIABLE","$log_count",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","db_query",151],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {watchdog}'",151],")",["T_OBJECT_OPERATOR","->",151],["T_STRING","fetchField",151],"(",")",";",["T_WHITESPACE","\n\n    ",151],["T_COMMENT","\/\/ By not calling performMetaRefresh() here, we simulate JavaScript being\n",153],["T_WHITESPACE","    ",154],["T_COMMENT","\/\/ enabled, because as far as the BigPipe module is concerned, JavaScript is\n",154],["T_WHITESPACE","    ",155],["T_COMMENT","\/\/ enabled in the browser as long as the BigPipe no-JS cookie is *not* set.\n",155],["T_WHITESPACE","    ",156],["T_COMMENT","\/\/ @see setUp()\n",156],["T_WHITESPACE","    ",157],["T_COMMENT","\/\/ @see performMetaRefresh()\n",157],["T_WHITESPACE","\n    ",158],["T_VARIABLE","$this",159],["T_OBJECT_OPERATOR","->",159],["T_STRING","drupalGet",159],"(",["T_STRING","Url",159],["T_DOUBLE_COLON","::",159],["T_STRING","fromRoute",159],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test'",159],")",")",";",["T_WHITESPACE","\n    ",159],["T_VARIABLE","$this",160],["T_OBJECT_OPERATOR","->",160],["T_STRING","assertBigPipeResponseHeadersPresent",160],"(",")",";",["T_WHITESPACE","\n\n    ",160],["T_VARIABLE","$cases",162],["T_WHITESPACE"," ",162],"=",["T_WHITESPACE"," ",162],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","getTestCases",162],"(",")",";",["T_WHITESPACE","\n    ",162],["T_VARIABLE","$this",163],["T_OBJECT_OPERATOR","->",163],["T_STRING","assertBigPipeNoJsPlaceholders",163],"(","[",["T_WHITESPACE","\n      ",163],["T_VARIABLE","$cases",164],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__invalid_html'",164],"]",["T_OBJECT_OPERATOR","->",164],["T_STRING","bigPipeNoJsPlaceholder",164],["T_WHITESPACE","     ",164],["T_DOUBLE_ARROW","=>",164],["T_WHITESPACE"," ",164],["T_VARIABLE","$cases",164],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__invalid_html'",164],"]",["T_OBJECT_OPERATOR","->",164],["T_STRING","embeddedHtmlResponse",164],",",["T_WHITESPACE","\n      ",164],["T_VARIABLE","$cases",165],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value'",165],"]",["T_OBJECT_OPERATOR","->",165],["T_STRING","bigPipeNoJsPlaceholder",165],["T_WHITESPACE","        ",165],["T_DOUBLE_ARROW","=>",165],["T_WHITESPACE"," ",165],["T_VARIABLE","$cases",165],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value'",165],"]",["T_OBJECT_OPERATOR","->",165],["T_STRING","embeddedHtmlResponse",165],",",["T_WHITESPACE","\n      ",165],["T_VARIABLE","$cases",166],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value_subset'",166],"]",["T_OBJECT_OPERATOR","->",166],["T_STRING","bigPipeNoJsPlaceholder",166],["T_WHITESPACE"," ",166],["T_DOUBLE_ARROW","=>",166],["T_WHITESPACE"," ",166],["T_VARIABLE","$cases",166],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value_subset'",166],"]",["T_OBJECT_OPERATOR","->",166],["T_STRING","embeddedHtmlResponse",166],",",["T_WHITESPACE","\n    ",166],"]",")",";",["T_WHITESPACE","\n    ",167],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","assertBigPipePlaceholders",168],"(","[",["T_WHITESPACE","\n      ",168],["T_VARIABLE","$cases",169],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",169],"]",["T_OBJECT_OPERATOR","->",169],["T_STRING","bigPipePlaceholderId",169],["T_WHITESPACE","                             ",169],["T_DOUBLE_ARROW","=>",169],["T_WHITESPACE"," ",169],["T_STRING","Json",169],["T_DOUBLE_COLON","::",169],["T_STRING","encode",169],"(",["T_VARIABLE","$cases",169],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",169],"]",["T_OBJECT_OPERATOR","->",169],["T_STRING","embeddedAjaxResponseCommands",169],")",",",["T_WHITESPACE","\n      ",169],["T_VARIABLE","$cases",170],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__html_non_lazy_builder'",170],"]",["T_OBJECT_OPERATOR","->",170],["T_STRING","bigPipePlaceholderId",170],["T_WHITESPACE"," ",170],["T_DOUBLE_ARROW","=>",170],["T_WHITESPACE"," ",170],["T_STRING","Json",170],["T_DOUBLE_COLON","::",170],["T_STRING","encode",170],"(",["T_VARIABLE","$cases",170],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__html_non_lazy_builder'",170],"]",["T_OBJECT_OPERATOR","->",170],["T_STRING","embeddedAjaxResponseCommands",170],")",",",["T_WHITESPACE","\n      ",170],["T_VARIABLE","$cases",171],"[",["T_CONSTANT_ENCAPSED_STRING","'exception__lazy_builder'",171],"]",["T_OBJECT_OPERATOR","->",171],["T_STRING","bigPipePlaceholderId",171],["T_WHITESPACE","          ",171],["T_DOUBLE_ARROW","=>",171],["T_WHITESPACE"," ",171],["T_STRING","NULL",171],",",["T_WHITESPACE","\n      ",171],["T_VARIABLE","$cases",172],"[",["T_CONSTANT_ENCAPSED_STRING","'exception__embedded_response'",172],"]",["T_OBJECT_OPERATOR","->",172],["T_STRING","bigPipePlaceholderId",172],["T_WHITESPACE","     ",172],["T_DOUBLE_ARROW","=>",172],["T_WHITESPACE"," ",172],["T_STRING","NULL",172],",",["T_WHITESPACE","\n    ",172],"]",",",["T_WHITESPACE"," ",173],"[",["T_WHITESPACE","\n      ",173],["T_LNUMBER","0",174],["T_WHITESPACE"," ",174],["T_DOUBLE_ARROW","=>",174],["T_WHITESPACE"," ",174],["T_VARIABLE","$cases",174],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__html_non_lazy_builder'",174],"]",["T_OBJECT_OPERATOR","->",174],["T_STRING","bigPipePlaceholderId",174],",",["T_WHITESPACE","\n      ",174],["T_COMMENT","\/\/ The 'html' case contains the 'status messages' placeholder, which is\n",175],["T_WHITESPACE","      ",176],["T_COMMENT","\/\/ always rendered last.\n",176],["T_WHITESPACE","      ",177],["T_LNUMBER","1",177],["T_WHITESPACE"," ",177],["T_DOUBLE_ARROW","=>",177],["T_WHITESPACE"," ",177],["T_VARIABLE","$cases",177],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",177],"]",["T_OBJECT_OPERATOR","->",177],["T_STRING","bigPipePlaceholderId",177],",",["T_WHITESPACE","\n    ",177],"]",")",";",["T_WHITESPACE","\n\n    ",178],["T_VARIABLE","$this",180],["T_OBJECT_OPERATOR","->",180],["T_STRING","assertRaw",180],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",180],",",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'Closing body tag present.'",180],")",";",["T_WHITESPACE","\n\n    ",180],["T_VARIABLE","$this",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","pass",182],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe assets are present\u00e2\u0080\u00a6'",182],",",["T_WHITESPACE"," ",182],["T_CONSTANT_ENCAPSED_STRING","'Debug'",182],")",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","assertFalse",183],"(",["T_EMPTY","empty",183],"(",["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","getDrupalSettings",183],"(",")",")",",",["T_WHITESPACE"," ",183],["T_CONSTANT_ENCAPSED_STRING","'drupalSettings present.'",183],")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","assertTrue",184],"(",["T_STRING","in_array",184],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe\/big_pipe'",184],",",["T_WHITESPACE"," ",184],["T_STRING","explode",184],"(",["T_CONSTANT_ENCAPSED_STRING","','",184],",",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","getDrupalSettings",184],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",184],"]","[",["T_CONSTANT_ENCAPSED_STRING","'libraries'",184],"]",")",")",",",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'BigPipe asset library is present.'",184],")",";",["T_WHITESPACE","\n\n    ",184],["T_COMMENT","\/\/ Verify that the two expected exceptions are logged as errors.\n",186],["T_WHITESPACE","    ",187],["T_VARIABLE","$this",187],["T_OBJECT_OPERATOR","->",187],["T_STRING","assertEqual",187],"(",["T_VARIABLE","$log_count",187],["T_WHITESPACE"," ",187],"+",["T_WHITESPACE"," ",187],["T_LNUMBER","2",187],",",["T_WHITESPACE"," ",187],["T_STRING","db_query",187],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT COUNT(*) FROM {watchdog}'",187],")",["T_OBJECT_OPERATOR","->",187],["T_STRING","fetchField",187],"(",")",",",["T_WHITESPACE"," ",187],["T_CONSTANT_ENCAPSED_STRING","'Two new watchdog entries.'",187],")",";",["T_WHITESPACE","\n    ",187],["T_VARIABLE","$records",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_STRING","db_query",188],"(",["T_CONSTANT_ENCAPSED_STRING","'SELECT * FROM {watchdog} ORDER BY wid DESC LIMIT 2'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","fetchAll",188],"(",")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$this",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","assertEqual",189],"(",["T_STRING","RfcLogLevel",189],["T_DOUBLE_COLON","::",189],["T_STRING","ERROR",189],",",["T_WHITESPACE"," ",189],["T_VARIABLE","$records",189],"[",["T_LNUMBER","0",189],"]",["T_OBJECT_OPERATOR","->",189],["T_STRING","severity",189],")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$this",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","assertTrue",190],"(",["T_STRING","FALSE",190],["T_WHITESPACE"," ",190],["T_IS_NOT_IDENTICAL","!==",190],["T_WHITESPACE"," ",190],["T_STRING","strpos",190],"(",["T_STRING_CAST","(string)",190],["T_WHITESPACE"," ",190],["T_STRING","unserialize",190],"(",["T_VARIABLE","$records",190],"[",["T_LNUMBER","0",190],"]",["T_OBJECT_OPERATOR","->",190],["T_STRING","variables",190],")","[",["T_CONSTANT_ENCAPSED_STRING","'@message'",190],"]",",",["T_WHITESPACE"," ",190],["T_CONSTANT_ENCAPSED_STRING","'Oh noes!'",190],")",")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertEqual",191],"(",["T_STRING","RfcLogLevel",191],["T_DOUBLE_COLON","::",191],["T_STRING","ERROR",191],",",["T_WHITESPACE"," ",191],["T_VARIABLE","$records",191],"[",["T_LNUMBER","1",191],"]",["T_OBJECT_OPERATOR","->",191],["T_STRING","severity",191],")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$this",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","assertTrue",192],"(",["T_STRING","FALSE",192],["T_WHITESPACE"," ",192],["T_IS_NOT_IDENTICAL","!==",192],["T_WHITESPACE"," ",192],["T_STRING","strpos",192],"(",["T_STRING_CAST","(string)",192],["T_WHITESPACE"," ",192],["T_STRING","unserialize",192],"(",["T_VARIABLE","$records",192],"[",["T_LNUMBER","1",192],"]",["T_OBJECT_OPERATOR","->",192],["T_STRING","variables",192],")","[",["T_CONSTANT_ENCAPSED_STRING","'@message'",192],"]",",",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","'You are not allowed to say llamas are not cool!'",192],")",")",";",["T_WHITESPACE","\n\n    ",192],["T_COMMENT","\/\/ Verify that 4xx responses work fine. (4xx responses are handled by\n",194],["T_WHITESPACE","    ",195],["T_COMMENT","\/\/ subrequests to a route pointing to a controller with the desired output.)\n",195],["T_WHITESPACE","    ",196],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","drupalGet",196],"(",["T_STRING","Url",196],["T_DOUBLE_COLON","::",196],["T_STRING","fromUri",196],"(",["T_CONSTANT_ENCAPSED_STRING","'base:non-existing-path'",196],")",")",";",["T_WHITESPACE","\n\n    ",196],["T_COMMENT","\/\/ Simulate development.\n",198],["T_WHITESPACE","    ",199],["T_VARIABLE","$this",199],["T_OBJECT_OPERATOR","->",199],["T_STRING","pass",199],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe provides useful error output when an error occurs while rendering a placeholder if verbose error logging is enabled.'",199],",",["T_WHITESPACE"," ",199],["T_CONSTANT_ENCAPSED_STRING","'Debug'",199],")",";",["T_WHITESPACE","\n    ",199],["T_VARIABLE","$this",200],["T_OBJECT_OPERATOR","->",200],["T_STRING","config",200],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","set",200],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",200],",",["T_WHITESPACE"," ",200],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",200],")",["T_OBJECT_OPERATOR","->",200],["T_STRING","save",200],"(",")",";",["T_WHITESPACE","\n    ",200],["T_VARIABLE","$this",201],["T_OBJECT_OPERATOR","->",201],["T_STRING","drupalGet",201],"(",["T_STRING","Url",201],["T_DOUBLE_COLON","::",201],["T_STRING","fromRoute",201],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test'",201],")",")",";",["T_WHITESPACE","\n    ",201],["T_COMMENT","\/\/ The 'edge_case__html_exception' case throws an exception.\n",202],["T_WHITESPACE","    ",203],["T_VARIABLE","$this",203],["T_OBJECT_OPERATOR","->",203],["T_STRING","assertRaw",203],"(",["T_CONSTANT_ENCAPSED_STRING","'The website encountered an unexpected error. Please try again later'",203],")",";",["T_WHITESPACE","\n    ",203],["T_VARIABLE","$this",204],["T_OBJECT_OPERATOR","->",204],["T_STRING","assertRaw",204],"(",["T_CONSTANT_ENCAPSED_STRING","'You are not allowed to say llamas are not cool!'",204],")",";",["T_WHITESPACE","\n    ",204],["T_VARIABLE","$this",205],["T_OBJECT_OPERATOR","->",205],["T_STRING","assertNoRaw",205],"(",["T_STRING","BigPipe",205],["T_DOUBLE_COLON","::",205],["T_STRING","STOP_SIGNAL",205],",",["T_WHITESPACE"," ",205],["T_CONSTANT_ENCAPSED_STRING","'BigPipe stop signal absent: error occurred before then.'",205],")",";",["T_WHITESPACE","\n    ",205],["T_VARIABLE","$this",206],["T_OBJECT_OPERATOR","->",206],["T_STRING","assertNoRaw",206],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",206],",",["T_WHITESPACE"," ",206],["T_CONSTANT_ENCAPSED_STRING","'Closing body tag absent: error occurred before then.'",206],")",";",["T_WHITESPACE","\n    ",206],["T_COMMENT","\/\/ The exception is expected. Do not interpret it as a test failure.\n",207],["T_WHITESPACE","    ",208],["T_STRING","unlink",208],"(",["T_NS_SEPARATOR","\\",208],["T_STRING","Drupal",208],["T_DOUBLE_COLON","::",208],["T_STRING","root",208],"(",")",["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'\/'",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_VARIABLE","$this",208],["T_OBJECT_OPERATOR","->",208],["T_STRING","siteDirectory",208],["T_WHITESPACE"," ",208],".",["T_WHITESPACE"," ",208],["T_CONSTANT_ENCAPSED_STRING","'\/error.log'",208],")",";",["T_WHITESPACE","\n  ",208],"}",["T_WHITESPACE","\n\n  ",209],["T_DOC_COMMENT","\/**\n   * Tests BigPipe-delivered HTML responses when JavaScript is disabled.\n   *\n   * Covers:\n   * - \\Drupal\\big_pipe\\EventSubscriber\\HtmlResponseBigPipeSubscriber\n   * - \\Drupal\\big_pipe\\Render\\BigPipe\n   * - \\Drupal\\big_pipe\\Render\\BigPipe::sendNoJsPlaceholders()\n   *\n   * @see \\Drupal\\big_pipe\\Tests\\BigPipePlaceholderTestCases\n   *\/",211],["T_WHITESPACE","\n  ",220],["T_PUBLIC","public",221],["T_WHITESPACE"," ",221],["T_FUNCTION","function",221],["T_WHITESPACE"," ",221],["T_STRING","testBigPipeNoJs",221],"(",")",["T_WHITESPACE"," ",221],"{",["T_WHITESPACE","\n    ",221],["T_COMMENT","\/\/ Simulate production.\n",222],["T_WHITESPACE","    ",223],["T_VARIABLE","$this",223],["T_OBJECT_OPERATOR","->",223],["T_STRING","config",223],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","set",223],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",223],",",["T_WHITESPACE"," ",223],["T_STRING","ERROR_REPORTING_HIDE",223],")",["T_OBJECT_OPERATOR","->",223],["T_STRING","save",223],"(",")",";",["T_WHITESPACE","\n\n    ",223],["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","drupalLogin",225],"(",["T_VARIABLE","$this",225],["T_OBJECT_OPERATOR","->",225],["T_STRING","rootUser",225],")",";",["T_WHITESPACE","\n    ",225],["T_VARIABLE","$this",226],["T_OBJECT_OPERATOR","->",226],["T_STRING","assertSessionCookieExists",226],"(",["T_STRING","TRUE",226],")",";",["T_WHITESPACE","\n    ",226],["T_VARIABLE","$this",227],["T_OBJECT_OPERATOR","->",227],["T_STRING","assertBigPipeNoJsCookieExists",227],"(",["T_STRING","FALSE",227],")",";",["T_WHITESPACE","\n\n    ",227],["T_COMMENT","\/\/ By calling performMetaRefresh() here, we simulate JavaScript being\n",229],["T_WHITESPACE","    ",230],["T_COMMENT","\/\/ disabled, because as far as the BigPipe module is concerned, it is\n",230],["T_WHITESPACE","    ",231],["T_COMMENT","\/\/ enabled in the browser when the BigPipe no-JS cookie is set.\n",231],["T_WHITESPACE","    ",232],["T_COMMENT","\/\/ @see setUp()\n",232],["T_WHITESPACE","    ",233],["T_COMMENT","\/\/ @see performMetaRefresh()\n",233],["T_WHITESPACE","    ",234],["T_VARIABLE","$this",234],["T_OBJECT_OPERATOR","->",234],["T_STRING","performMetaRefresh",234],"(",")",";",["T_WHITESPACE","\n    ",234],["T_VARIABLE","$this",235],["T_OBJECT_OPERATOR","->",235],["T_STRING","assertBigPipeNoJsCookieExists",235],"(",["T_STRING","TRUE",235],")",";",["T_WHITESPACE","\n\n    ",235],["T_VARIABLE","$this",237],["T_OBJECT_OPERATOR","->",237],["T_STRING","drupalGet",237],"(",["T_STRING","Url",237],["T_DOUBLE_COLON","::",237],["T_STRING","fromRoute",237],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test'",237],")",")",";",["T_WHITESPACE","\n    ",237],["T_VARIABLE","$this",238],["T_OBJECT_OPERATOR","->",238],["T_STRING","assertBigPipeResponseHeadersPresent",238],"(",")",";",["T_WHITESPACE","\n\n    ",238],["T_VARIABLE","$cases",240],["T_WHITESPACE"," ",240],"=",["T_WHITESPACE"," ",240],["T_VARIABLE","$this",240],["T_OBJECT_OPERATOR","->",240],["T_STRING","getTestCases",240],"(",")",";",["T_WHITESPACE","\n    ",240],["T_VARIABLE","$this",241],["T_OBJECT_OPERATOR","->",241],["T_STRING","assertBigPipeNoJsPlaceholders",241],"(","[",["T_WHITESPACE","\n      ",241],["T_VARIABLE","$cases",242],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__invalid_html'",242],"]",["T_OBJECT_OPERATOR","->",242],["T_STRING","bigPipeNoJsPlaceholder",242],["T_WHITESPACE","           ",242],["T_DOUBLE_ARROW","=>",242],["T_WHITESPACE"," ",242],["T_VARIABLE","$cases",242],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__invalid_html'",242],"]",["T_OBJECT_OPERATOR","->",242],["T_STRING","embeddedHtmlResponse",242],",",["T_WHITESPACE","\n      ",242],["T_VARIABLE","$cases",243],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value'",243],"]",["T_OBJECT_OPERATOR","->",243],["T_STRING","bigPipeNoJsPlaceholder",243],["T_WHITESPACE","              ",243],["T_DOUBLE_ARROW","=>",243],["T_WHITESPACE"," ",243],["T_VARIABLE","$cases",243],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value'",243],"]",["T_OBJECT_OPERATOR","->",243],["T_STRING","embeddedHtmlResponse",243],",",["T_WHITESPACE","\n      ",243],["T_VARIABLE","$cases",244],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value_subset'",244],"]",["T_OBJECT_OPERATOR","->",244],["T_STRING","bigPipeNoJsPlaceholder",244],["T_WHITESPACE","       ",244],["T_DOUBLE_ARROW","=>",244],["T_WHITESPACE"," ",244],["T_VARIABLE","$cases",244],"[",["T_CONSTANT_ENCAPSED_STRING","'html_attribute_value_subset'",244],"]",["T_OBJECT_OPERATOR","->",244],["T_STRING","embeddedHtmlResponse",244],",",["T_WHITESPACE","\n      ",244],["T_VARIABLE","$cases",245],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",245],"]",["T_OBJECT_OPERATOR","->",245],["T_STRING","bigPipeNoJsPlaceholder",245],["T_WHITESPACE","                              ",245],["T_DOUBLE_ARROW","=>",245],["T_WHITESPACE"," ",245],["T_VARIABLE","$cases",245],"[",["T_CONSTANT_ENCAPSED_STRING","'html'",245],"]",["T_OBJECT_OPERATOR","->",245],["T_STRING","embeddedHtmlResponse",245],",",["T_WHITESPACE","\n      ",245],["T_VARIABLE","$cases",246],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__html_non_lazy_builder'",246],"]",["T_OBJECT_OPERATOR","->",246],["T_STRING","bigPipeNoJsPlaceholder",246],["T_WHITESPACE","  ",246],["T_DOUBLE_ARROW","=>",246],["T_WHITESPACE"," ",246],["T_VARIABLE","$cases",246],"[",["T_CONSTANT_ENCAPSED_STRING","'edge_case__html_non_lazy_builder'",246],"]",["T_OBJECT_OPERATOR","->",246],["T_STRING","embeddedHtmlResponse",246],",",["T_WHITESPACE","\n      ",246],["T_VARIABLE","$cases",247],"[",["T_CONSTANT_ENCAPSED_STRING","'exception__lazy_builder'",247],"]",["T_OBJECT_OPERATOR","->",247],["T_STRING","bigPipePlaceholderId",247],["T_WHITESPACE","             ",247],["T_DOUBLE_ARROW","=>",247],["T_WHITESPACE"," ",247],["T_STRING","NULL",247],",",["T_WHITESPACE","\n      ",247],["T_VARIABLE","$cases",248],"[",["T_CONSTANT_ENCAPSED_STRING","'exception__embedded_response'",248],"]",["T_OBJECT_OPERATOR","->",248],["T_STRING","bigPipePlaceholderId",248],["T_WHITESPACE","        ",248],["T_DOUBLE_ARROW","=>",248],["T_WHITESPACE"," ",248],["T_STRING","NULL",248],",",["T_WHITESPACE","\n    ",248],"]",")",";",["T_WHITESPACE","\n\n    ",249],["T_VARIABLE","$this",251],["T_OBJECT_OPERATOR","->",251],["T_STRING","pass",251],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying there are no BigPipe placeholders & replacements\u00e2\u0080\u00a6'",251],",",["T_WHITESPACE"," ",251],["T_CONSTANT_ENCAPSED_STRING","'Debug'",251],")",";",["T_WHITESPACE","\n    ",251],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","assertEqual",252],"(",["T_CONSTANT_ENCAPSED_STRING","'<none>'",252],",",["T_WHITESPACE"," ",252],["T_VARIABLE","$this",252],["T_OBJECT_OPERATOR","->",252],["T_STRING","drupalGetHeader",252],"(",["T_CONSTANT_ENCAPSED_STRING","'BigPipe-Test-Placeholders'",252],")",")",";",["T_WHITESPACE","\n    ",252],["T_VARIABLE","$this",253],["T_OBJECT_OPERATOR","->",253],["T_STRING","pass",253],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe start\/stop signals are absent\u00e2\u0080\u00a6'",253],",",["T_WHITESPACE"," ",253],["T_CONSTANT_ENCAPSED_STRING","'Debug'",253],")",";",["T_WHITESPACE","\n    ",253],["T_VARIABLE","$this",254],["T_OBJECT_OPERATOR","->",254],["T_STRING","assertNoRaw",254],"(",["T_STRING","BigPipe",254],["T_DOUBLE_COLON","::",254],["T_STRING","START_SIGNAL",254],",",["T_WHITESPACE"," ",254],["T_CONSTANT_ENCAPSED_STRING","'BigPipe start signal absent.'",254],")",";",["T_WHITESPACE","\n    ",254],["T_VARIABLE","$this",255],["T_OBJECT_OPERATOR","->",255],["T_STRING","assertNoRaw",255],"(",["T_STRING","BigPipe",255],["T_DOUBLE_COLON","::",255],["T_STRING","STOP_SIGNAL",255],",",["T_WHITESPACE"," ",255],["T_CONSTANT_ENCAPSED_STRING","'BigPipe stop signal absent.'",255],")",";",["T_WHITESPACE","\n\n    ",255],["T_VARIABLE","$this",257],["T_OBJECT_OPERATOR","->",257],["T_STRING","pass",257],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe assets are absent\u00e2\u0080\u00a6'",257],",",["T_WHITESPACE"," ",257],["T_CONSTANT_ENCAPSED_STRING","'Debug'",257],")",";",["T_WHITESPACE","\n    ",257],["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","assertTrue",258],"(","!",["T_ISSET","isset",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getDrupalSettings",258],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'bigPipePlaceholderIds'",258],"]",")",["T_WHITESPACE"," ",258],["T_BOOLEAN_AND","&&",258],["T_WHITESPACE"," ",258],["T_EMPTY","empty",258],"(",["T_VARIABLE","$this",258],["T_OBJECT_OPERATOR","->",258],["T_STRING","getDrupalSettings",258],"(",")","[",["T_CONSTANT_ENCAPSED_STRING","'ajaxPageState'",258],"]",")",",",["T_WHITESPACE"," ",258],["T_CONSTANT_ENCAPSED_STRING","'BigPipe drupalSettings and BigPipe asset library absent.'",258],")",";",["T_WHITESPACE","\n    ",258],["T_VARIABLE","$this",259],["T_OBJECT_OPERATOR","->",259],["T_STRING","assertRaw",259],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",259],",",["T_WHITESPACE"," ",259],["T_CONSTANT_ENCAPSED_STRING","'Closing body tag present.'",259],")",";",["T_WHITESPACE","\n\n    ",259],["T_COMMENT","\/\/ Verify that 4xx responses work fine. (4xx responses are handled by\n",261],["T_WHITESPACE","    ",262],["T_COMMENT","\/\/ subrequests to a route pointing to a controller with the desired output.)\n",262],["T_WHITESPACE","    ",263],["T_VARIABLE","$this",263],["T_OBJECT_OPERATOR","->",263],["T_STRING","drupalGet",263],"(",["T_STRING","Url",263],["T_DOUBLE_COLON","::",263],["T_STRING","fromUri",263],"(",["T_CONSTANT_ENCAPSED_STRING","'base:non-existing-path'",263],")",")",";",["T_WHITESPACE","\n\n    ",263],["T_COMMENT","\/\/ Simulate development.\n",265],["T_WHITESPACE","    ",266],["T_VARIABLE","$this",266],["T_OBJECT_OPERATOR","->",266],["T_STRING","pass",266],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe provides useful error output when an error occurs while rendering a placeholder if verbose error logging is enabled.'",266],",",["T_WHITESPACE"," ",266],["T_CONSTANT_ENCAPSED_STRING","'Debug'",266],")",";",["T_WHITESPACE","\n    ",266],["T_VARIABLE","$this",267],["T_OBJECT_OPERATOR","->",267],["T_STRING","config",267],"(",["T_CONSTANT_ENCAPSED_STRING","'system.logging'",267],")",["T_OBJECT_OPERATOR","->",267],["T_STRING","set",267],"(",["T_CONSTANT_ENCAPSED_STRING","'error_level'",267],",",["T_WHITESPACE"," ",267],["T_STRING","ERROR_REPORTING_DISPLAY_VERBOSE",267],")",["T_OBJECT_OPERATOR","->",267],["T_STRING","save",267],"(",")",";",["T_WHITESPACE","\n    ",267],["T_VARIABLE","$this",268],["T_OBJECT_OPERATOR","->",268],["T_STRING","drupalGet",268],"(",["T_STRING","Url",268],["T_DOUBLE_COLON","::",268],["T_STRING","fromRoute",268],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test'",268],")",")",";",["T_WHITESPACE","\n    ",268],["T_COMMENT","\/\/ The 'edge_case__html_exception' case throws an exception.\n",269],["T_WHITESPACE","    ",270],["T_VARIABLE","$this",270],["T_OBJECT_OPERATOR","->",270],["T_STRING","assertRaw",270],"(",["T_CONSTANT_ENCAPSED_STRING","'The website encountered an unexpected error. Please try again later'",270],")",";",["T_WHITESPACE","\n    ",270],["T_VARIABLE","$this",271],["T_OBJECT_OPERATOR","->",271],["T_STRING","assertRaw",271],"(",["T_CONSTANT_ENCAPSED_STRING","'You are not allowed to say llamas are not cool!'",271],")",";",["T_WHITESPACE","\n    ",271],["T_VARIABLE","$this",272],["T_OBJECT_OPERATOR","->",272],["T_STRING","assertNoRaw",272],"(",["T_CONSTANT_ENCAPSED_STRING","'<\/body>'",272],",",["T_WHITESPACE"," ",272],["T_CONSTANT_ENCAPSED_STRING","'Closing body tag absent: error occurred before then.'",272],")",";",["T_WHITESPACE","\n    ",272],["T_COMMENT","\/\/ The exception is expected. Do not interpret it as a test failure.\n",273],["T_WHITESPACE","    ",274],["T_STRING","unlink",274],"(",["T_NS_SEPARATOR","\\",274],["T_STRING","Drupal",274],["T_DOUBLE_COLON","::",274],["T_STRING","root",274],"(",")",["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'\/'",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_VARIABLE","$this",274],["T_OBJECT_OPERATOR","->",274],["T_STRING","siteDirectory",274],["T_WHITESPACE"," ",274],".",["T_WHITESPACE"," ",274],["T_CONSTANT_ENCAPSED_STRING","'\/error.log'",274],")",";",["T_WHITESPACE","\n  ",274],"}",["T_WHITESPACE","\n\n  ",275],["T_DOC_COMMENT","\/**\n   * Tests BigPipe with a multi-occurrence placeholder.\n   *\/",277],["T_WHITESPACE","\n  ",279],["T_PUBLIC","public",280],["T_WHITESPACE"," ",280],["T_FUNCTION","function",280],["T_WHITESPACE"," ",280],["T_STRING","testBigPipeMultiOccurrencePlaceholders",280],"(",")",["T_WHITESPACE"," ",280],"{",["T_WHITESPACE","\n    ",280],["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","drupalLogin",281],"(",["T_VARIABLE","$this",281],["T_OBJECT_OPERATOR","->",281],["T_STRING","rootUser",281],")",";",["T_WHITESPACE","\n    ",281],["T_VARIABLE","$this",282],["T_OBJECT_OPERATOR","->",282],["T_STRING","assertSessionCookieExists",282],"(",["T_STRING","TRUE",282],")",";",["T_WHITESPACE","\n    ",282],["T_VARIABLE","$this",283],["T_OBJECT_OPERATOR","->",283],["T_STRING","assertBigPipeNoJsCookieExists",283],"(",["T_STRING","FALSE",283],")",";",["T_WHITESPACE","\n\n    ",283],["T_COMMENT","\/\/ By not calling performMetaRefresh() here, we simulate JavaScript being\n",285],["T_WHITESPACE","    ",286],["T_COMMENT","\/\/ enabled, because as far as the BigPipe module is concerned, JavaScript is\n",286],["T_WHITESPACE","    ",287],["T_COMMENT","\/\/ enabled in the browser as long as the BigPipe no-JS cookie is *not* set.\n",287],["T_WHITESPACE","    ",288],["T_COMMENT","\/\/ @see setUp()\n",288],["T_WHITESPACE","    ",289],["T_COMMENT","\/\/ @see performMetaRefresh()\n",289],["T_WHITESPACE","\n    ",290],["T_VARIABLE","$this",291],["T_OBJECT_OPERATOR","->",291],["T_STRING","drupalGet",291],"(",["T_STRING","Url",291],["T_DOUBLE_COLON","::",291],["T_STRING","fromRoute",291],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test_multi_occurrence'",291],")",")",";",["T_WHITESPACE","\n    ",291],["T_VARIABLE","$big_pipe_placeholder_id",292],["T_WHITESPACE"," ",292],"=",["T_WHITESPACE"," ",292],["T_CONSTANT_ENCAPSED_STRING","'callback=Drupal%5CCore%5CRender%5CElement%5CStatusMessages%3A%3ArenderMessages&amp;args[0]&amp;token=a8c34b5e'",292],";",["T_WHITESPACE","\n    ",292],["T_VARIABLE","$expected_placeholder_replacement",293],["T_WHITESPACE"," ",293],"=",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'<script type=\"application\/vnd.drupal-ajax\" data-big-pipe-replacement-for-placeholder-with-id=\"'",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_VARIABLE","$big_pipe_placeholder_id",293],["T_WHITESPACE"," ",293],".",["T_WHITESPACE"," ",293],["T_CONSTANT_ENCAPSED_STRING","'\">'",293],";",["T_WHITESPACE","\n    ",293],["T_VARIABLE","$this",294],["T_OBJECT_OPERATOR","->",294],["T_STRING","assertRaw",294],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 1.'",294],")",";",["T_WHITESPACE","\n    ",294],["T_VARIABLE","$this",295],["T_OBJECT_OPERATOR","->",295],["T_STRING","assertNoRaw",295],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 2.'",295],")",";",["T_WHITESPACE","\n    ",295],["T_VARIABLE","$this",296],["T_OBJECT_OPERATOR","->",296],["T_STRING","assertNoRaw",296],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 3.'",296],")",";",["T_WHITESPACE","\n    ",296],["T_VARIABLE","$raw_content",297],["T_WHITESPACE"," ",297],"=",["T_WHITESPACE"," ",297],["T_VARIABLE","$this",297],["T_OBJECT_OPERATOR","->",297],["T_STRING","getRawContent",297],"(",")",";",["T_WHITESPACE","\n    ",297],["T_VARIABLE","$this",298],["T_OBJECT_OPERATOR","->",298],["T_STRING","assertTrue",298],"(",["T_STRING","substr_count",298],"(",["T_VARIABLE","$raw_content",298],",",["T_WHITESPACE"," ",298],["T_VARIABLE","$expected_placeholder_replacement",298],")",["T_WHITESPACE"," ",298],["T_IS_EQUAL","==",298],["T_WHITESPACE"," ",298],["T_LNUMBER","1",298],",",["T_WHITESPACE"," ",298],["T_CONSTANT_ENCAPSED_STRING","'Only one placeholder replacement was found for the duplicate #lazy_builder arrays.'",298],")",";",["T_WHITESPACE","\n\n    ",298],["T_COMMENT","\/\/ By calling performMetaRefresh() here, we simulate JavaScript being\n",300],["T_WHITESPACE","    ",301],["T_COMMENT","\/\/ disabled, because as far as the BigPipe module is concerned, it is\n",301],["T_WHITESPACE","    ",302],["T_COMMENT","\/\/ enabled in the browser when the BigPipe no-JS cookie is set.\n",302],["T_WHITESPACE","    ",303],["T_COMMENT","\/\/ @see setUp()\n",303],["T_WHITESPACE","    ",304],["T_COMMENT","\/\/ @see performMetaRefresh()\n",304],["T_WHITESPACE","    ",305],["T_VARIABLE","$this",305],["T_OBJECT_OPERATOR","->",305],["T_STRING","performMetaRefresh",305],"(",")",";",["T_WHITESPACE","\n    ",305],["T_VARIABLE","$this",306],["T_OBJECT_OPERATOR","->",306],["T_STRING","assertBigPipeNoJsCookieExists",306],"(",["T_STRING","TRUE",306],")",";",["T_WHITESPACE","\n    ",306],["T_VARIABLE","$this",307],["T_OBJECT_OPERATOR","->",307],["T_STRING","drupalGet",307],"(",["T_STRING","Url",307],["T_DOUBLE_COLON","::",307],["T_STRING","fromRoute",307],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_test_multi_occurrence'",307],")",")",";",["T_WHITESPACE","\n    ",307],["T_VARIABLE","$this",308],["T_OBJECT_OPERATOR","->",308],["T_STRING","assertRaw",308],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 1.'",308],")",";",["T_WHITESPACE","\n    ",308],["T_VARIABLE","$this",309],["T_OBJECT_OPERATOR","->",309],["T_STRING","assertNoRaw",309],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 2.'",309],")",";",["T_WHITESPACE","\n    ",309],["T_VARIABLE","$this",310],["T_OBJECT_OPERATOR","->",310],["T_STRING","assertNoRaw",310],"(",["T_CONSTANT_ENCAPSED_STRING","'The count is 3.'",310],")",";",["T_WHITESPACE","\n  ",310],"}",["T_WHITESPACE","\n\n  ",311],["T_PROTECTED","protected",313],["T_WHITESPACE"," ",313],["T_FUNCTION","function",313],["T_WHITESPACE"," ",313],["T_STRING","assertBigPipeResponseHeadersPresent",313],"(",")",["T_WHITESPACE"," ",313],"{",["T_WHITESPACE","\n    ",313],["T_VARIABLE","$this",314],["T_OBJECT_OPERATOR","->",314],["T_STRING","pass",314],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe response headers\u00e2\u0080\u00a6'",314],",",["T_WHITESPACE"," ",314],["T_CONSTANT_ENCAPSED_STRING","'Debug'",314],")",";",["T_WHITESPACE","\n    ",314],["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","assertTrue",315],"(",["T_STRING","FALSE",315],["T_WHITESPACE"," ",315],["T_IS_NOT_IDENTICAL","!==",315],["T_WHITESPACE"," ",315],["T_STRING","strpos",315],"(",["T_VARIABLE","$this",315],["T_OBJECT_OPERATOR","->",315],["T_STRING","drupalGetHeader",315],"(",["T_CONSTANT_ENCAPSED_STRING","'Cache-Control'",315],")",",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'private'",315],")",",",["T_WHITESPACE"," ",315],["T_CONSTANT_ENCAPSED_STRING","'Cache-Control header set to \"private\".'",315],")",";",["T_WHITESPACE","\n    ",315],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","assertEqual",316],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store, content=\"BigPipe\/1.0\"'",316],",",["T_WHITESPACE"," ",316],["T_VARIABLE","$this",316],["T_OBJECT_OPERATOR","->",316],["T_STRING","drupalGetHeader",316],"(",["T_CONSTANT_ENCAPSED_STRING","'Surrogate-Control'",316],")",")",";",["T_WHITESPACE","\n    ",316],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","assertEqual",317],"(",["T_CONSTANT_ENCAPSED_STRING","'no'",317],",",["T_WHITESPACE"," ",317],["T_VARIABLE","$this",317],["T_OBJECT_OPERATOR","->",317],["T_STRING","drupalGetHeader",317],"(",["T_CONSTANT_ENCAPSED_STRING","'X-Accel-Buffering'",317],")",")",";",["T_WHITESPACE","\n  ",317],"}",["T_WHITESPACE","\n\n  ",318],["T_DOC_COMMENT","\/**\n   * Asserts expected BigPipe no-JS placeholders are present and replaced.\n   *\n   * @param array $expected_big_pipe_nojs_placeholders\n   *   Keys: BigPipe no-JS placeholder markup. Values: expected replacement\n   *   markup.\n   *\/",320],["T_WHITESPACE","\n  ",326],["T_PROTECTED","protected",327],["T_WHITESPACE"," ",327],["T_FUNCTION","function",327],["T_WHITESPACE"," ",327],["T_STRING","assertBigPipeNoJsPlaceholders",327],"(",["T_ARRAY","array",327],["T_WHITESPACE"," ",327],["T_VARIABLE","$expected_big_pipe_nojs_placeholders",327],")",["T_WHITESPACE"," ",327],"{",["T_WHITESPACE","\n    ",327],["T_VARIABLE","$this",328],["T_OBJECT_OPERATOR","->",328],["T_STRING","pass",328],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe no-JS placeholders & replacements\u00e2\u0080\u00a6'",328],",",["T_WHITESPACE"," ",328],["T_CONSTANT_ENCAPSED_STRING","'Debug'",328],")",";",["T_WHITESPACE","\n    ",328],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","assertSetsEqual",329],"(",["T_STRING","array_keys",329],"(",["T_VARIABLE","$expected_big_pipe_nojs_placeholders",329],")",",",["T_WHITESPACE"," ",329],["T_STRING","array_map",329],"(",["T_CONSTANT_ENCAPSED_STRING","'rawurldecode'",329],",",["T_WHITESPACE"," ",329],["T_STRING","explode",329],"(",["T_CONSTANT_ENCAPSED_STRING","' '",329],",",["T_WHITESPACE"," ",329],["T_VARIABLE","$this",329],["T_OBJECT_OPERATOR","->",329],["T_STRING","drupalGetHeader",329],"(",["T_CONSTANT_ENCAPSED_STRING","'BigPipe-Test-No-Js-Placeholders'",329],")",")",")",")",";",["T_WHITESPACE","\n    ",329],["T_FOREACH","foreach",330],["T_WHITESPACE"," ",330],"(",["T_VARIABLE","$expected_big_pipe_nojs_placeholders",330],["T_WHITESPACE"," ",330],["T_AS","as",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$big_pipe_nojs_placeholder",330],["T_WHITESPACE"," ",330],["T_DOUBLE_ARROW","=>",330],["T_WHITESPACE"," ",330],["T_VARIABLE","$expected_replacement",330],")",["T_WHITESPACE"," ",330],"{",["T_WHITESPACE","\n      ",330],["T_VARIABLE","$this",331],["T_OBJECT_OPERATOR","->",331],["T_STRING","pass",331],"(",["T_CONSTANT_ENCAPSED_STRING","'Checking whether the replacement for the BigPipe no-JS placeholder \"'",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_VARIABLE","$big_pipe_nojs_placeholder",331],["T_WHITESPACE"," ",331],".",["T_WHITESPACE"," ",331],["T_CONSTANT_ENCAPSED_STRING","'\" is present:'",331],")",";",["T_WHITESPACE","\n      ",331],["T_VARIABLE","$this",332],["T_OBJECT_OPERATOR","->",332],["T_STRING","assertNoRaw",332],"(",["T_VARIABLE","$big_pipe_nojs_placeholder",332],")",";",["T_WHITESPACE","\n      ",332],["T_IF","if",333],["T_WHITESPACE"," ",333],"(",["T_VARIABLE","$expected_replacement",333],["T_WHITESPACE"," ",333],["T_IS_NOT_IDENTICAL","!==",333],["T_WHITESPACE"," ",333],["T_STRING","NULL",333],")",["T_WHITESPACE"," ",333],"{",["T_WHITESPACE","\n        ",333],["T_VARIABLE","$this",334],["T_OBJECT_OPERATOR","->",334],["T_STRING","assertRaw",334],"(",["T_VARIABLE","$expected_replacement",334],")",";",["T_WHITESPACE","\n      ",334],"}",["T_WHITESPACE","\n    ",335],"}",["T_WHITESPACE","\n  ",336],"}",["T_WHITESPACE","\n\n  ",337],["T_DOC_COMMENT","\/**\n   * Asserts expected BigPipe placeholders are present and replaced.\n   *\n   * @param array $expected_big_pipe_placeholders\n   *   Keys: BigPipe placeholder IDs. Values: expected AJAX response.\n   * @param array $expected_big_pipe_placeholder_stream_order\n   *   Keys: BigPipe placeholder IDs. Values: expected AJAX response. Keys are\n   *   defined in the order that they are expected to be rendered & streamed.\n   *\/",339],["T_WHITESPACE","\n  ",347],["T_PROTECTED","protected",348],["T_WHITESPACE"," ",348],["T_FUNCTION","function",348],["T_WHITESPACE"," ",348],["T_STRING","assertBigPipePlaceholders",348],"(",["T_ARRAY","array",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$expected_big_pipe_placeholders",348],",",["T_WHITESPACE"," ",348],["T_ARRAY","array",348],["T_WHITESPACE"," ",348],["T_VARIABLE","$expected_big_pipe_placeholder_stream_order",348],")",["T_WHITESPACE"," ",348],"{",["T_WHITESPACE","\n    ",348],["T_VARIABLE","$this",349],["T_OBJECT_OPERATOR","->",349],["T_STRING","pass",349],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe placeholders & replacements\u00e2\u0080\u00a6'",349],",",["T_WHITESPACE"," ",349],["T_CONSTANT_ENCAPSED_STRING","'Debug'",349],")",";",["T_WHITESPACE","\n    ",349],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","assertSetsEqual",350],"(",["T_STRING","array_keys",350],"(",["T_VARIABLE","$expected_big_pipe_placeholders",350],")",",",["T_WHITESPACE"," ",350],["T_STRING","explode",350],"(",["T_CONSTANT_ENCAPSED_STRING","' '",350],",",["T_WHITESPACE"," ",350],["T_VARIABLE","$this",350],["T_OBJECT_OPERATOR","->",350],["T_STRING","drupalGetHeader",350],"(",["T_CONSTANT_ENCAPSED_STRING","'BigPipe-Test-Placeholders'",350],")",")",")",";",["T_WHITESPACE","\n    ",350],["T_VARIABLE","$placeholder_positions",351],["T_WHITESPACE"," ",351],"=",["T_WHITESPACE"," ",351],"[","]",";",["T_WHITESPACE","\n    ",351],["T_VARIABLE","$placeholder_replacement_positions",352],["T_WHITESPACE"," ",352],"=",["T_WHITESPACE"," ",352],"[","]",";",["T_WHITESPACE","\n    ",352],["T_FOREACH","foreach",353],["T_WHITESPACE"," ",353],"(",["T_VARIABLE","$expected_big_pipe_placeholders",353],["T_WHITESPACE"," ",353],["T_AS","as",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$big_pipe_placeholder_id",353],["T_WHITESPACE"," ",353],["T_DOUBLE_ARROW","=>",353],["T_WHITESPACE"," ",353],["T_VARIABLE","$expected_ajax_response",353],")",["T_WHITESPACE"," ",353],"{",["T_WHITESPACE","\n      ",353],["T_VARIABLE","$this",354],["T_OBJECT_OPERATOR","->",354],["T_STRING","pass",354],"(",["T_CONSTANT_ENCAPSED_STRING","'BigPipe placeholder: '",354],["T_WHITESPACE"," ",354],".",["T_WHITESPACE"," ",354],["T_VARIABLE","$big_pipe_placeholder_id",354],",",["T_WHITESPACE"," ",354],["T_CONSTANT_ENCAPSED_STRING","'Debug'",354],")",";",["T_WHITESPACE","\n      ",354],["T_COMMENT","\/\/ Verify expected placeholder.\n",355],["T_WHITESPACE","      ",356],["T_VARIABLE","$expected_placeholder_html",356],["T_WHITESPACE"," ",356],"=",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'<div data-big-pipe-placeholder-id=\"'",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_VARIABLE","$big_pipe_placeholder_id",356],["T_WHITESPACE"," ",356],".",["T_WHITESPACE"," ",356],["T_CONSTANT_ENCAPSED_STRING","'\"><\/div>'",356],";",["T_WHITESPACE","\n      ",356],["T_VARIABLE","$this",357],["T_OBJECT_OPERATOR","->",357],["T_STRING","assertRaw",357],"(",["T_VARIABLE","$expected_placeholder_html",357],",",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'BigPipe placeholder for placeholder ID \"'",357],["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_VARIABLE","$big_pipe_placeholder_id",357],["T_WHITESPACE"," ",357],".",["T_WHITESPACE"," ",357],["T_CONSTANT_ENCAPSED_STRING","'\" found.'",357],")",";",["T_WHITESPACE","\n      ",357],["T_VARIABLE","$pos",358],["T_WHITESPACE"," ",358],"=",["T_WHITESPACE"," ",358],["T_STRING","strpos",358],"(",["T_VARIABLE","$this",358],["T_OBJECT_OPERATOR","->",358],["T_STRING","getRawContent",358],"(",")",",",["T_WHITESPACE"," ",358],["T_VARIABLE","$expected_placeholder_html",358],")",";",["T_WHITESPACE","\n      ",358],["T_VARIABLE","$placeholder_positions",359],"[",["T_VARIABLE","$pos",359],"]",["T_WHITESPACE"," ",359],"=",["T_WHITESPACE"," ",359],["T_VARIABLE","$big_pipe_placeholder_id",359],";",["T_WHITESPACE","\n      ",359],["T_COMMENT","\/\/ Verify expected placeholder replacement.\n",360],["T_WHITESPACE","      ",361],["T_VARIABLE","$expected_placeholder_replacement",361],["T_WHITESPACE"," ",361],"=",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'<script type=\"application\/vnd.drupal-ajax\" data-big-pipe-replacement-for-placeholder-with-id=\"'",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_VARIABLE","$big_pipe_placeholder_id",361],["T_WHITESPACE"," ",361],".",["T_WHITESPACE"," ",361],["T_CONSTANT_ENCAPSED_STRING","'\">'",361],";",["T_WHITESPACE","\n      ",361],["T_VARIABLE","$result",362],["T_WHITESPACE"," ",362],"=",["T_WHITESPACE"," ",362],["T_VARIABLE","$this",362],["T_OBJECT_OPERATOR","->",362],["T_STRING","xpath",362],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/script[@data-big-pipe-replacement-for-placeholder-with-id=:id]'",362],",",["T_WHITESPACE"," ",362],"[",["T_CONSTANT_ENCAPSED_STRING","':id'",362],["T_WHITESPACE"," ",362],["T_DOUBLE_ARROW","=>",362],["T_WHITESPACE"," ",362],["T_STRING","Html",362],["T_DOUBLE_COLON","::",362],["T_STRING","decodeEntities",362],"(",["T_VARIABLE","$big_pipe_placeholder_id",362],")","]",")",";",["T_WHITESPACE","\n      ",362],["T_IF","if",363],["T_WHITESPACE"," ",363],"(",["T_VARIABLE","$expected_ajax_response",363],["T_WHITESPACE"," ",363],["T_IS_IDENTICAL","===",363],["T_WHITESPACE"," ",363],["T_STRING","NULL",363],")",["T_WHITESPACE"," ",363],"{",["T_WHITESPACE","\n        ",363],["T_VARIABLE","$this",364],["T_OBJECT_OPERATOR","->",364],["T_STRING","assertEqual",364],"(",["T_LNUMBER","0",364],",",["T_WHITESPACE"," ",364],["T_STRING","count",364],"(",["T_VARIABLE","$result",364],")",")",";",["T_WHITESPACE","\n        ",364],["T_VARIABLE","$this",365],["T_OBJECT_OPERATOR","->",365],["T_STRING","assertNoRaw",365],"(",["T_VARIABLE","$expected_placeholder_replacement",365],")",";",["T_WHITESPACE","\n        ",365],["T_CONTINUE","continue",366],";",["T_WHITESPACE","\n      ",366],"}",["T_WHITESPACE","\n      ",367],["T_VARIABLE","$this",368],["T_OBJECT_OPERATOR","->",368],["T_STRING","assertEqual",368],"(",["T_VARIABLE","$expected_ajax_response",368],",",["T_WHITESPACE"," ",368],["T_STRING","trim",368],"(",["T_STRING_CAST","(string)",368],["T_WHITESPACE"," ",368],["T_VARIABLE","$result",368],"[",["T_LNUMBER","0",368],"]",")",")",";",["T_WHITESPACE","\n      ",368],["T_VARIABLE","$this",369],["T_OBJECT_OPERATOR","->",369],["T_STRING","assertRaw",369],"(",["T_VARIABLE","$expected_placeholder_replacement",369],")",";",["T_WHITESPACE","\n      ",369],["T_VARIABLE","$pos",370],["T_WHITESPACE"," ",370],"=",["T_WHITESPACE"," ",370],["T_STRING","strpos",370],"(",["T_VARIABLE","$this",370],["T_OBJECT_OPERATOR","->",370],["T_STRING","getRawContent",370],"(",")",",",["T_WHITESPACE"," ",370],["T_VARIABLE","$expected_placeholder_replacement",370],")",";",["T_WHITESPACE","\n      ",370],["T_VARIABLE","$placeholder_replacement_positions",371],"[",["T_VARIABLE","$pos",371],"]",["T_WHITESPACE"," ",371],"=",["T_WHITESPACE"," ",371],["T_VARIABLE","$big_pipe_placeholder_id",371],";",["T_WHITESPACE","\n    ",371],"}",["T_WHITESPACE","\n    ",372],["T_STRING","ksort",373],"(",["T_VARIABLE","$placeholder_positions",373],",",["T_WHITESPACE"," ",373],["T_STRING","SORT_NUMERIC",373],")",";",["T_WHITESPACE","\n    ",373],["T_VARIABLE","$this",374],["T_OBJECT_OPERATOR","->",374],["T_STRING","assertEqual",374],"(",["T_STRING","array_keys",374],"(",["T_VARIABLE","$expected_big_pipe_placeholders",374],")",",",["T_WHITESPACE"," ",374],["T_STRING","array_values",374],"(",["T_VARIABLE","$placeholder_positions",374],")",")",";",["T_WHITESPACE","\n    ",374],["T_VARIABLE","$placeholders",375],["T_WHITESPACE"," ",375],"=",["T_WHITESPACE"," ",375],["T_STRING","array_map",375],"(",["T_FUNCTION","function",375],"(",["T_NS_SEPARATOR","\\",375],["T_STRING","SimpleXMLElement",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$element",375],")",["T_WHITESPACE"," ",375],"{",["T_WHITESPACE"," ",375],["T_RETURN","return",375],["T_WHITESPACE"," ",375],["T_STRING_CAST","(string)",375],["T_WHITESPACE"," ",375],["T_VARIABLE","$element",375],"[",["T_CONSTANT_ENCAPSED_STRING","'data-big-pipe-placeholder-id'",375],"]",";",["T_WHITESPACE"," ",375],"}",",",["T_WHITESPACE"," ",375],["T_VARIABLE","$this",375],["T_OBJECT_OPERATOR","->",375],["T_STRING","cssSelect",375],"(",["T_CONSTANT_ENCAPSED_STRING","'[data-big-pipe-placeholder-id]'",375],")",")",";",["T_WHITESPACE","\n    ",375],["T_VARIABLE","$this",376],["T_OBJECT_OPERATOR","->",376],["T_STRING","assertEqual",376],"(",["T_STRING","count",376],"(",["T_VARIABLE","$expected_big_pipe_placeholders",376],")",",",["T_WHITESPACE"," ",376],["T_STRING","count",376],"(",["T_STRING","array_unique",376],"(",["T_VARIABLE","$placeholders",376],")",")",")",";",["T_WHITESPACE","\n    ",376],["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",377],["T_WHITESPACE"," ",377],"=",["T_WHITESPACE"," ",377],"[","]",";",["T_WHITESPACE","\n    ",377],["T_FOREACH","foreach",378],["T_WHITESPACE"," ",378],"(",["T_VARIABLE","$expected_big_pipe_placeholder_stream_order",378],["T_WHITESPACE"," ",378],["T_AS","as",378],["T_WHITESPACE"," ",378],["T_VARIABLE","$big_pipe_placeholder_id",378],")",["T_WHITESPACE"," ",378],"{",["T_WHITESPACE","\n      ",378],["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",379],"[",["T_VARIABLE","$big_pipe_placeholder_id",379],"]",["T_WHITESPACE"," ",379],"=",["T_WHITESPACE"," ",379],["T_VARIABLE","$expected_big_pipe_placeholders",379],"[",["T_VARIABLE","$big_pipe_placeholder_id",379],"]",";",["T_WHITESPACE","\n    ",379],"}",["T_WHITESPACE","\n    ",380],["T_VARIABLE","$this",381],["T_OBJECT_OPERATOR","->",381],["T_STRING","assertEqual",381],"(",["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",381],",",["T_WHITESPACE"," ",381],["T_STRING","array_filter",381],"(",["T_VARIABLE","$expected_big_pipe_placeholders",381],")",")",";",["T_WHITESPACE","\n    ",381],["T_VARIABLE","$this",382],["T_OBJECT_OPERATOR","->",382],["T_STRING","assertSetsEqual",382],"(",["T_STRING","array_keys",382],"(",["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",382],")",",",["T_WHITESPACE"," ",382],["T_STRING","array_values",382],"(",["T_VARIABLE","$placeholder_replacement_positions",382],")",")",";",["T_WHITESPACE","\n    ",382],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","assertEqual",383],"(",["T_STRING","count",383],"(",["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",383],")",",",["T_WHITESPACE"," ",383],["T_STRING","preg_match_all",383],"(",["T_CONSTANT_ENCAPSED_STRING","'\/'",383],["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],["T_STRING","preg_quote",383],"(",["T_CONSTANT_ENCAPSED_STRING","'<script type=\"application\/vnd.drupal-ajax\" data-big-pipe-replacement-for-placeholder-with-id=\"'",383],",",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'\/'",383],")",["T_WHITESPACE"," ",383],".",["T_WHITESPACE"," ",383],["T_CONSTANT_ENCAPSED_STRING","'\/'",383],",",["T_WHITESPACE"," ",383],["T_VARIABLE","$this",383],["T_OBJECT_OPERATOR","->",383],["T_STRING","getRawContent",383],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",383],["T_VARIABLE","$this",385],["T_OBJECT_OPERATOR","->",385],["T_STRING","pass",385],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe start\/stop signals\u00e2\u0080\u00a6'",385],",",["T_WHITESPACE"," ",385],["T_CONSTANT_ENCAPSED_STRING","'Debug'",385],")",";",["T_WHITESPACE","\n    ",385],["T_VARIABLE","$this",386],["T_OBJECT_OPERATOR","->",386],["T_STRING","assertRaw",386],"(",["T_STRING","BigPipe",386],["T_DOUBLE_COLON","::",386],["T_STRING","START_SIGNAL",386],",",["T_WHITESPACE"," ",386],["T_CONSTANT_ENCAPSED_STRING","'BigPipe start signal present.'",386],")",";",["T_WHITESPACE","\n    ",386],["T_VARIABLE","$this",387],["T_OBJECT_OPERATOR","->",387],["T_STRING","assertRaw",387],"(",["T_STRING","BigPipe",387],["T_DOUBLE_COLON","::",387],["T_STRING","STOP_SIGNAL",387],",",["T_WHITESPACE"," ",387],["T_CONSTANT_ENCAPSED_STRING","'BigPipe stop signal present.'",387],")",";",["T_WHITESPACE","\n    ",387],["T_VARIABLE","$start_signal_position",388],["T_WHITESPACE"," ",388],"=",["T_WHITESPACE"," ",388],["T_STRING","strpos",388],"(",["T_VARIABLE","$this",388],["T_OBJECT_OPERATOR","->",388],["T_STRING","getRawContent",388],"(",")",",",["T_WHITESPACE"," ",388],["T_STRING","BigPipe",388],["T_DOUBLE_COLON","::",388],["T_STRING","START_SIGNAL",388],")",";",["T_WHITESPACE","\n    ",388],["T_VARIABLE","$stop_signal_position",389],["T_WHITESPACE"," ",389],"=",["T_WHITESPACE"," ",389],["T_STRING","strpos",389],"(",["T_VARIABLE","$this",389],["T_OBJECT_OPERATOR","->",389],["T_STRING","getRawContent",389],"(",")",",",["T_WHITESPACE"," ",389],["T_STRING","BigPipe",389],["T_DOUBLE_COLON","::",389],["T_STRING","STOP_SIGNAL",389],")",";",["T_WHITESPACE","\n    ",389],["T_VARIABLE","$this",390],["T_OBJECT_OPERATOR","->",390],["T_STRING","assertTrue",390],"(",["T_VARIABLE","$start_signal_position",390],["T_WHITESPACE"," ",390],"<",["T_WHITESPACE"," ",390],["T_VARIABLE","$stop_signal_position",390],",",["T_WHITESPACE"," ",390],["T_CONSTANT_ENCAPSED_STRING","'BigPipe start signal appears before stop signal.'",390],")",";",["T_WHITESPACE","\n\n    ",390],["T_VARIABLE","$this",392],["T_OBJECT_OPERATOR","->",392],["T_STRING","pass",392],"(",["T_CONSTANT_ENCAPSED_STRING","'Verifying BigPipe placeholder replacements and start\/stop signals were streamed in the correct order\u00e2\u0080\u00a6'",392],",",["T_WHITESPACE"," ",392],["T_CONSTANT_ENCAPSED_STRING","'Debug'",392],")",";",["T_WHITESPACE","\n    ",392],["T_VARIABLE","$expected_stream_order",393],["T_WHITESPACE"," ",393],"=",["T_WHITESPACE"," ",393],["T_STRING","array_keys",393],"(",["T_VARIABLE","$expected_big_pipe_placeholders_with_replacements",393],")",";",["T_WHITESPACE","\n    ",393],["T_STRING","array_unshift",394],"(",["T_VARIABLE","$expected_stream_order",394],",",["T_WHITESPACE"," ",394],["T_STRING","BigPipe",394],["T_DOUBLE_COLON","::",394],["T_STRING","START_SIGNAL",394],")",";",["T_WHITESPACE","\n    ",394],["T_STRING","array_push",395],"(",["T_VARIABLE","$expected_stream_order",395],",",["T_WHITESPACE"," ",395],["T_STRING","BigPipe",395],["T_DOUBLE_COLON","::",395],["T_STRING","STOP_SIGNAL",395],")",";",["T_WHITESPACE","\n    ",395],["T_VARIABLE","$actual_stream_order",396],["T_WHITESPACE"," ",396],"=",["T_WHITESPACE"," ",396],["T_VARIABLE","$placeholder_replacement_positions",396],["T_WHITESPACE"," ",396],"+",["T_WHITESPACE"," ",396],"[",["T_WHITESPACE","\n        ",396],["T_VARIABLE","$start_signal_position",397],["T_WHITESPACE"," ",397],["T_DOUBLE_ARROW","=>",397],["T_WHITESPACE"," ",397],["T_STRING","BigPipe",397],["T_DOUBLE_COLON","::",397],["T_STRING","START_SIGNAL",397],",",["T_WHITESPACE","\n        ",397],["T_VARIABLE","$stop_signal_position",398],["T_WHITESPACE"," ",398],["T_DOUBLE_ARROW","=>",398],["T_WHITESPACE"," ",398],["T_STRING","BigPipe",398],["T_DOUBLE_COLON","::",398],["T_STRING","STOP_SIGNAL",398],",",["T_WHITESPACE","\n      ",398],"]",";",["T_WHITESPACE","\n    ",399],["T_STRING","ksort",400],"(",["T_VARIABLE","$actual_stream_order",400],",",["T_WHITESPACE"," ",400],["T_STRING","SORT_NUMERIC",400],")",";",["T_WHITESPACE","\n    ",400],["T_VARIABLE","$this",401],["T_OBJECT_OPERATOR","->",401],["T_STRING","assertEqual",401],"(",["T_VARIABLE","$expected_stream_order",401],",",["T_WHITESPACE"," ",401],["T_STRING","array_values",401],"(",["T_VARIABLE","$actual_stream_order",401],")",")",";",["T_WHITESPACE","\n  ",401],"}",["T_WHITESPACE","\n\n  ",402],["T_DOC_COMMENT","\/**\n   * @return \\Drupal\\big_pipe\\Tests\\BigPipePlaceholderTestCase[]\n   *\/",404],["T_WHITESPACE","\n  ",406],["T_PROTECTED","protected",407],["T_WHITESPACE"," ",407],["T_FUNCTION","function",407],["T_WHITESPACE"," ",407],["T_STRING","getTestCases",407],"(",")",["T_WHITESPACE"," ",407],"{",["T_WHITESPACE","\n    ",407],["T_COMMENT","\/\/ Ensure we can generate CSRF tokens for the current user's session.\n",408],["T_WHITESPACE","    ",409],["T_VARIABLE","$session_data",409],["T_WHITESPACE"," ",409],"=",["T_WHITESPACE"," ",409],["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","container",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","get",409],"(",["T_CONSTANT_ENCAPSED_STRING","'session_handler.write_safe'",409],")",["T_OBJECT_OPERATOR","->",409],["T_STRING","read",409],"(",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","cookies",409],"[",["T_VARIABLE","$this",409],["T_OBJECT_OPERATOR","->",409],["T_STRING","getSessionName",409],"(",")","]","[",["T_CONSTANT_ENCAPSED_STRING","'value'",409],"]",")",";",["T_WHITESPACE","\n    ",409],["T_VARIABLE","$csrf_token_seed",410],["T_WHITESPACE"," ",410],"=",["T_WHITESPACE"," ",410],["T_STRING","unserialize",410],"(",["T_STRING","explode",410],"(",["T_CONSTANT_ENCAPSED_STRING","'_sf2_meta|'",410],",",["T_WHITESPACE"," ",410],["T_VARIABLE","$session_data",410],")","[",["T_LNUMBER","1",410],"]",")","[",["T_CONSTANT_ENCAPSED_STRING","'s'",410],"]",";",["T_WHITESPACE","\n    ",410],["T_VARIABLE","$this",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","container",411],["T_OBJECT_OPERATOR","->",411],["T_STRING","get",411],"(",["T_CONSTANT_ENCAPSED_STRING","'session_manager.metadata_bag'",411],")",["T_OBJECT_OPERATOR","->",411],["T_STRING","setCsrfTokenSeed",411],"(",["T_VARIABLE","$csrf_token_seed",411],")",";",["T_WHITESPACE","\n\n    ",411],["T_RETURN","return",413],["T_WHITESPACE"," ",413],["T_STRING","BigPipePlaceholderTestCases",413],["T_DOUBLE_COLON","::",413],["T_STRING","cases",413],"(",["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","container",413],",",["T_WHITESPACE"," ",413],["T_VARIABLE","$this",413],["T_OBJECT_OPERATOR","->",413],["T_STRING","rootUser",413],")",";",["T_WHITESPACE","\n  ",413],"}",["T_WHITESPACE","\n\n  ",414],["T_DOC_COMMENT","\/**\n   * Asserts whether arrays A and B are equal, when treated as sets.\n   *\/",416],["T_WHITESPACE","\n  ",418],["T_PROTECTED","protected",419],["T_WHITESPACE"," ",419],["T_FUNCTION","function",419],["T_WHITESPACE"," ",419],["T_STRING","assertSetsEqual",419],"(",["T_ARRAY","array",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$a",419],",",["T_WHITESPACE"," ",419],["T_ARRAY","array",419],["T_WHITESPACE"," ",419],["T_VARIABLE","$b",419],")",["T_WHITESPACE"," ",419],"{",["T_WHITESPACE","\n    ",419],["T_RETURN","return",420],["T_WHITESPACE"," ",420],["T_STRING","count",420],"(",["T_VARIABLE","$a",420],")",["T_WHITESPACE"," ",420],["T_IS_EQUAL","==",420],["T_WHITESPACE"," ",420],["T_STRING","count",420],"(",["T_VARIABLE","$b",420],")",["T_WHITESPACE"," ",420],["T_BOOLEAN_AND","&&",420],["T_WHITESPACE"," ",420],"!",["T_STRING","array_diff_assoc",420],"(",["T_VARIABLE","$a",420],",",["T_WHITESPACE"," ",420],["T_VARIABLE","$b",420],")",";",["T_WHITESPACE","\n  ",420],"}",["T_WHITESPACE","\n\n  ",421],["T_DOC_COMMENT","\/**\n   * Asserts whether a BigPipe no-JS cookie exists or not.\n   *\/",423],["T_WHITESPACE","\n  ",425],["T_PROTECTED","protected",426],["T_WHITESPACE"," ",426],["T_FUNCTION","function",426],["T_WHITESPACE"," ",426],["T_STRING","assertBigPipeNoJsCookieExists",426],"(",["T_VARIABLE","$expected",426],")",["T_WHITESPACE"," ",426],"{",["T_WHITESPACE","\n    ",426],["T_VARIABLE","$this",427],["T_OBJECT_OPERATOR","->",427],["T_STRING","assertCookieExists",427],"(",["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs'",427],",",["T_WHITESPACE"," ",427],["T_VARIABLE","$expected",427],",",["T_WHITESPACE"," ",427],["T_CONSTANT_ENCAPSED_STRING","'BigPipe no-JS'",427],")",";",["T_WHITESPACE","\n  ",427],"}",["T_WHITESPACE","\n\n  ",428],["T_DOC_COMMENT","\/**\n   * Asserts whether a session cookie exists or not.\n   *\/",430],["T_WHITESPACE","\n  ",432],["T_PROTECTED","protected",433],["T_WHITESPACE"," ",433],["T_FUNCTION","function",433],["T_WHITESPACE"," ",433],["T_STRING","assertSessionCookieExists",433],"(",["T_VARIABLE","$expected",433],")",["T_WHITESPACE"," ",433],"{",["T_WHITESPACE","\n    ",433],["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","assertCookieExists",434],"(",["T_VARIABLE","$this",434],["T_OBJECT_OPERATOR","->",434],["T_STRING","getSessionName",434],"(",")",",",["T_WHITESPACE"," ",434],["T_VARIABLE","$expected",434],",",["T_WHITESPACE"," ",434],["T_CONSTANT_ENCAPSED_STRING","'Session'",434],")",";",["T_WHITESPACE","\n  ",434],"}",["T_WHITESPACE","\n\n  ",435],["T_DOC_COMMENT","\/**\n   * Asserts whether a cookie exists on the client or not.\n   *\/",437],["T_WHITESPACE","\n  ",439],["T_PROTECTED","protected",440],["T_WHITESPACE"," ",440],["T_FUNCTION","function",440],["T_WHITESPACE"," ",440],["T_STRING","assertCookieExists",440],"(",["T_VARIABLE","$cookie_name",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$expected",440],",",["T_WHITESPACE"," ",440],["T_VARIABLE","$cookie_label",440],")",["T_WHITESPACE"," ",440],"{",["T_WHITESPACE","\n    ",440],["T_VARIABLE","$non_deleted_cookies",441],["T_WHITESPACE"," ",441],"=",["T_WHITESPACE"," ",441],["T_STRING","array_filter",441],"(",["T_VARIABLE","$this",441],["T_OBJECT_OPERATOR","->",441],["T_STRING","cookies",441],",",["T_WHITESPACE"," ",441],["T_FUNCTION","function",441],["T_WHITESPACE"," ",441],"(",["T_VARIABLE","$item",441],")",["T_WHITESPACE"," ",441],"{",["T_WHITESPACE"," ",441],["T_RETURN","return",441],["T_WHITESPACE"," ",441],["T_VARIABLE","$item",441],"[",["T_CONSTANT_ENCAPSED_STRING","'value'",441],"]",["T_WHITESPACE"," ",441],["T_IS_NOT_IDENTICAL","!==",441],["T_WHITESPACE"," ",441],["T_CONSTANT_ENCAPSED_STRING","'deleted'",441],";",["T_WHITESPACE"," ",441],"}",")",";",["T_WHITESPACE","\n    ",441],["T_VARIABLE","$this",442],["T_OBJECT_OPERATOR","->",442],["T_STRING","assertEqual",442],"(",["T_VARIABLE","$expected",442],",",["T_WHITESPACE"," ",442],["T_ISSET","isset",442],"(",["T_VARIABLE","$non_deleted_cookies",442],"[",["T_VARIABLE","$cookie_name",442],"]",")",",",["T_WHITESPACE"," ",442],["T_VARIABLE","$expected",442],["T_WHITESPACE"," ",442],"?",["T_WHITESPACE"," ",442],"\"",["T_VARIABLE","$cookie_label",442],["T_ENCAPSED_AND_WHITESPACE"," cookie exists.",442],"\"",["T_WHITESPACE"," ",442],":",["T_WHITESPACE"," ",442],"\"",["T_VARIABLE","$cookie_label",442],["T_ENCAPSED_AND_WHITESPACE"," cookie does not exist.",442],"\"",")",";",["T_WHITESPACE","\n  ",442],"}",["T_WHITESPACE","\n\n  ",443],["T_DOC_COMMENT","\/**\n   * Calls ::performMetaRefresh() and asserts the responses.\n   *\/",445],["T_WHITESPACE","\n  ",447],["T_PROTECTED","protected",448],["T_WHITESPACE"," ",448],["T_FUNCTION","function",448],["T_WHITESPACE"," ",448],["T_STRING","assertBigPipeNoJsMetaRefreshRedirect",448],"(",")",["T_WHITESPACE"," ",448],"{",["T_WHITESPACE","\n    ",448],["T_VARIABLE","$original_url",449],["T_WHITESPACE"," ",449],"=",["T_WHITESPACE"," ",449],["T_VARIABLE","$this",449],["T_OBJECT_OPERATOR","->",449],["T_STRING","url",449],";",["T_WHITESPACE","\n    ",449],["T_VARIABLE","$this",450],["T_OBJECT_OPERATOR","->",450],["T_STRING","performMetaRefresh",450],"(",")",";",["T_WHITESPACE","\n\n    ",450],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","assertEqual",452],"(",["T_VARIABLE","$original_url",452],",",["T_WHITESPACE"," ",452],["T_VARIABLE","$this",452],["T_OBJECT_OPERATOR","->",452],["T_STRING","url",452],",",["T_WHITESPACE"," ",452],["T_CONSTANT_ENCAPSED_STRING","'Redirected back to the original location.'",452],")",";",["T_WHITESPACE","\n\n    ",452],["T_VARIABLE","$headers",454],["T_WHITESPACE"," ",454],"=",["T_WHITESPACE"," ",454],["T_VARIABLE","$this",454],["T_OBJECT_OPERATOR","->",454],["T_STRING","drupalGetHeaders",454],"(",["T_STRING","TRUE",454],")",";",["T_WHITESPACE","\n    ",454],["T_VARIABLE","$this",455],["T_OBJECT_OPERATOR","->",455],["T_STRING","assertEqual",455],"(",["T_LNUMBER","2",455],",",["T_WHITESPACE"," ",455],["T_STRING","count",455],"(",["T_VARIABLE","$headers",455],")",",",["T_WHITESPACE"," ",455],["T_CONSTANT_ENCAPSED_STRING","'Two requests were made upon following the <meta> refresh, there are headers for two responses.'",455],")",";",["T_WHITESPACE","\n\n    ",455],["T_COMMENT","\/\/ First response: redirect.\n",457],["T_WHITESPACE","    ",458],["T_VARIABLE","$this",458],["T_OBJECT_OPERATOR","->",458],["T_STRING","assertEqual",458],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1 302 Found'",458],",",["T_WHITESPACE"," ",458],["T_VARIABLE","$headers",458],"[",["T_LNUMBER","0",458],"]","[",["T_CONSTANT_ENCAPSED_STRING","':status'",458],"]",",",["T_WHITESPACE"," ",458],["T_CONSTANT_ENCAPSED_STRING","'The first response was a 302 (redirect).'",458],")",";",["T_WHITESPACE","\n    ",458],["T_VARIABLE","$this",459],["T_OBJECT_OPERATOR","->",459],["T_STRING","assertIdentical",459],"(",["T_LNUMBER","0",459],",",["T_WHITESPACE"," ",459],["T_STRING","strpos",459],"(",["T_VARIABLE","$headers",459],"[",["T_LNUMBER","0",459],"]","[",["T_CONSTANT_ENCAPSED_STRING","'set-cookie'",459],"]",",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'big_pipe_nojs=1'",459],")",",",["T_WHITESPACE"," ",459],["T_CONSTANT_ENCAPSED_STRING","'The first response sets the big_pipe_nojs cookie.'",459],")",";",["T_WHITESPACE","\n    ",459],["T_VARIABLE","$this",460],["T_OBJECT_OPERATOR","->",460],["T_STRING","assertEqual",460],"(",["T_VARIABLE","$original_url",460],",",["T_WHITESPACE"," ",460],["T_VARIABLE","$headers",460],"[",["T_LNUMBER","0",460],"]","[",["T_CONSTANT_ENCAPSED_STRING","'location'",460],"]",",",["T_WHITESPACE"," ",460],["T_CONSTANT_ENCAPSED_STRING","'The first response redirected back to the original page.'",460],")",";",["T_WHITESPACE","\n    ",460],["T_VARIABLE","$this",461],["T_OBJECT_OPERATOR","->",461],["T_STRING","assertTrue",461],"(",["T_EMPTY","empty",461],"(",["T_STRING","array_diff",461],"(","[",["T_CONSTANT_ENCAPSED_STRING","'cookies:big_pipe_nojs'",461],",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'session.exists'",461],"]",",",["T_WHITESPACE"," ",461],["T_STRING","explode",461],"(",["T_CONSTANT_ENCAPSED_STRING","' '",461],",",["T_WHITESPACE"," ",461],["T_VARIABLE","$headers",461],"[",["T_LNUMBER","0",461],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x-drupal-cache-contexts'",461],"]",")",")",")",",",["T_WHITESPACE"," ",461],["T_CONSTANT_ENCAPSED_STRING","'The first response varies by the \"cookies:big_pipe_nojs\" and \"session.exists\" cache contexts.'",461],")",";",["T_WHITESPACE","\n    ",461],["T_VARIABLE","$this",462],["T_OBJECT_OPERATOR","->",462],["T_STRING","assertFalse",462],"(",["T_ISSET","isset",462],"(",["T_VARIABLE","$headers",462],"[",["T_LNUMBER","0",462],"]","[",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",462],"]",")",",",["T_WHITESPACE"," ",462],["T_CONSTANT_ENCAPSED_STRING","'The first response has no \"Surrogate-Control\" header.'",462],")",";",["T_WHITESPACE","\n\n    ",462],["T_COMMENT","\/\/ Second response: redirect followed.\n",464],["T_WHITESPACE","    ",465],["T_VARIABLE","$this",465],["T_OBJECT_OPERATOR","->",465],["T_STRING","assertEqual",465],"(",["T_CONSTANT_ENCAPSED_STRING","'HTTP\/1.1 200 OK'",465],",",["T_WHITESPACE"," ",465],["T_VARIABLE","$headers",465],"[",["T_LNUMBER","1",465],"]","[",["T_CONSTANT_ENCAPSED_STRING","':status'",465],"]",",",["T_WHITESPACE"," ",465],["T_CONSTANT_ENCAPSED_STRING","'The second response was a 200.'",465],")",";",["T_WHITESPACE","\n    ",465],["T_VARIABLE","$this",466],["T_OBJECT_OPERATOR","->",466],["T_STRING","assertTrue",466],"(",["T_EMPTY","empty",466],"(",["T_STRING","array_diff",466],"(","[",["T_CONSTANT_ENCAPSED_STRING","'cookies:big_pipe_nojs'",466],",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'session.exists'",466],"]",",",["T_WHITESPACE"," ",466],["T_STRING","explode",466],"(",["T_CONSTANT_ENCAPSED_STRING","' '",466],",",["T_WHITESPACE"," ",466],["T_VARIABLE","$headers",466],"[",["T_LNUMBER","0",466],"]","[",["T_CONSTANT_ENCAPSED_STRING","'x-drupal-cache-contexts'",466],"]",")",")",")",",",["T_WHITESPACE"," ",466],["T_CONSTANT_ENCAPSED_STRING","'The first response varies by the \"cookies:big_pipe_nojs\" and \"session.exists\" cache contexts.'",466],")",";",["T_WHITESPACE","\n    ",466],["T_VARIABLE","$this",467],["T_OBJECT_OPERATOR","->",467],["T_STRING","assertEqual",467],"(",["T_CONSTANT_ENCAPSED_STRING","'no-store, content=\"BigPipe\/1.0\"'",467],",",["T_WHITESPACE"," ",467],["T_VARIABLE","$headers",467],"[",["T_LNUMBER","1",467],"]","[",["T_CONSTANT_ENCAPSED_STRING","'surrogate-control'",467],"]",",",["T_WHITESPACE"," ",467],["T_CONSTANT_ENCAPSED_STRING","'The second response has a \"Surrogate-Control\" header.'",467],")",";",["T_WHITESPACE","\n\n    ",467],["T_VARIABLE","$this",469],["T_OBJECT_OPERATOR","->",469],["T_STRING","assertNoRaw",469],"(",["T_CONSTANT_ENCAPSED_STRING","'<noscript><meta http-equiv=\"Refresh\" content=\"0; URL='",469],",",["T_WHITESPACE"," ",469],["T_CONSTANT_ENCAPSED_STRING","'Once the BigPipe no-JS cookie is set, the <meta> refresh is absent: only one redirect ever happens.'",469],")",";",["T_WHITESPACE","\n  ",469],"}",["T_WHITESPACE","\n\n",470],"}",["T_WHITESPACE","\n",472]]
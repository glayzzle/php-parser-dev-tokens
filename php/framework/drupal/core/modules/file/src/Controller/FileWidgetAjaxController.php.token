[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Controller",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Symfony",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","HttpFoundation",5],["T_NS_SEPARATOR","\\",5],["T_STRING","JsonResponse",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Defines a controller to respond to file widget AJAX requests.\n *\/",7],["T_WHITESPACE","\n",9],["T_CLASS","class",10],["T_WHITESPACE"," ",10],["T_STRING","FileWidgetAjaxController",10],["T_WHITESPACE"," ",10],"{",["T_WHITESPACE","\n\n  ",10],["T_DOC_COMMENT","\/**\n   * Returns the progress status for a file upload process.\n   *\n   * @param string $key\n   *   The unique key for this upload process.\n   *\n   * @return \\Symfony\\Component\\HttpFoundation\\JsonResponse\n   *   A JsonResponse object.\n   *\/",12],["T_WHITESPACE","\n  ",20],["T_PUBLIC","public",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","progress",21],"(",["T_VARIABLE","$key",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_VARIABLE","$progress",22],["T_WHITESPACE"," ",22],"=",["T_WHITESPACE"," ",22],["T_ARRAY","array",22],"(",["T_WHITESPACE","\n      ",22],["T_CONSTANT_ENCAPSED_STRING","'message'",23],["T_WHITESPACE"," ",23],["T_DOUBLE_ARROW","=>",23],["T_WHITESPACE"," ",23],["T_STRING","t",23],"(",["T_CONSTANT_ENCAPSED_STRING","'Starting upload...'",23],")",",",["T_WHITESPACE","\n      ",23],["T_CONSTANT_ENCAPSED_STRING","'percentage'",24],["T_WHITESPACE"," ",24],["T_DOUBLE_ARROW","=>",24],["T_WHITESPACE"," ",24],"-",["T_LNUMBER","1",24],",",["T_WHITESPACE","\n    ",24],")",";",["T_WHITESPACE","\n\n    ",25],["T_VARIABLE","$implementation",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_STRING","file_progress_implementation",27],"(",")",";",["T_WHITESPACE","\n    ",27],["T_IF","if",28],["T_WHITESPACE"," ",28],"(",["T_VARIABLE","$implementation",28],["T_WHITESPACE"," ",28],["T_IS_EQUAL","==",28],["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'uploadprogress'",28],")",["T_WHITESPACE"," ",28],"{",["T_WHITESPACE","\n      ",28],["T_VARIABLE","$status",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_STRING","uploadprogress_get_info",29],"(",["T_VARIABLE","$key",29],")",";",["T_WHITESPACE","\n      ",29],["T_IF","if",30],["T_WHITESPACE"," ",30],"(",["T_ISSET","isset",30],"(",["T_VARIABLE","$status",30],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_uploaded'",30],"]",")",["T_WHITESPACE"," ",30],["T_BOOLEAN_AND","&&",30],["T_WHITESPACE"," ",30],"!",["T_EMPTY","empty",30],"(",["T_VARIABLE","$status",30],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_total'",30],"]",")",")",["T_WHITESPACE"," ",30],"{",["T_WHITESPACE","\n        ",30],["T_VARIABLE","$progress",31],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",31],"]",["T_WHITESPACE"," ",31],"=",["T_WHITESPACE"," ",31],["T_STRING","t",31],"(",["T_CONSTANT_ENCAPSED_STRING","'Uploading... (@current of @total)'",31],",",["T_WHITESPACE"," ",31],["T_ARRAY","array",31],"(",["T_CONSTANT_ENCAPSED_STRING","'@current'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_STRING","format_size",31],"(",["T_VARIABLE","$status",31],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_uploaded'",31],"]",")",",",["T_WHITESPACE"," ",31],["T_CONSTANT_ENCAPSED_STRING","'@total'",31],["T_WHITESPACE"," ",31],["T_DOUBLE_ARROW","=>",31],["T_WHITESPACE"," ",31],["T_STRING","format_size",31],"(",["T_VARIABLE","$status",31],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_total'",31],"]",")",")",")",";",["T_WHITESPACE","\n        ",31],["T_VARIABLE","$progress",32],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",32],"]",["T_WHITESPACE"," ",32],"=",["T_WHITESPACE"," ",32],["T_STRING","round",32],"(",["T_LNUMBER","100",32],["T_WHITESPACE"," ",32],"*",["T_WHITESPACE"," ",32],["T_VARIABLE","$status",32],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_uploaded'",32],"]",["T_WHITESPACE"," ",32],"\/",["T_WHITESPACE"," ",32],["T_VARIABLE","$status",32],"[",["T_CONSTANT_ENCAPSED_STRING","'bytes_total'",32],"]",")",";",["T_WHITESPACE","\n      ",32],"}",["T_WHITESPACE","\n    ",33],"}",["T_WHITESPACE","\n    ",34],["T_ELSEIF","elseif",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$implementation",35],["T_WHITESPACE"," ",35],["T_IS_EQUAL","==",35],["T_WHITESPACE"," ",35],["T_CONSTANT_ENCAPSED_STRING","'apc'",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_VARIABLE","$status",36],["T_WHITESPACE"," ",36],"=",["T_WHITESPACE"," ",36],["T_STRING","apcu_fetch",36],"(",["T_CONSTANT_ENCAPSED_STRING","'upload_'",36],["T_WHITESPACE"," ",36],".",["T_WHITESPACE"," ",36],["T_VARIABLE","$key",36],")",";",["T_WHITESPACE","\n      ",36],["T_IF","if",37],["T_WHITESPACE"," ",37],"(",["T_ISSET","isset",37],"(",["T_VARIABLE","$status",37],"[",["T_CONSTANT_ENCAPSED_STRING","'current'",37],"]",")",["T_WHITESPACE"," ",37],["T_BOOLEAN_AND","&&",37],["T_WHITESPACE"," ",37],"!",["T_EMPTY","empty",37],"(",["T_VARIABLE","$status",37],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",37],"]",")",")",["T_WHITESPACE"," ",37],"{",["T_WHITESPACE","\n        ",37],["T_VARIABLE","$progress",38],"[",["T_CONSTANT_ENCAPSED_STRING","'message'",38],"]",["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],["T_STRING","t",38],"(",["T_CONSTANT_ENCAPSED_STRING","'Uploading... (@current of @total)'",38],",",["T_WHITESPACE"," ",38],["T_ARRAY","array",38],"(",["T_CONSTANT_ENCAPSED_STRING","'@current'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_STRING","format_size",38],"(",["T_VARIABLE","$status",38],"[",["T_CONSTANT_ENCAPSED_STRING","'current'",38],"]",")",",",["T_WHITESPACE"," ",38],["T_CONSTANT_ENCAPSED_STRING","'@total'",38],["T_WHITESPACE"," ",38],["T_DOUBLE_ARROW","=>",38],["T_WHITESPACE"," ",38],["T_STRING","format_size",38],"(",["T_VARIABLE","$status",38],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",38],"]",")",")",")",";",["T_WHITESPACE","\n        ",38],["T_VARIABLE","$progress",39],"[",["T_CONSTANT_ENCAPSED_STRING","'percentage'",39],"]",["T_WHITESPACE"," ",39],"=",["T_WHITESPACE"," ",39],["T_STRING","round",39],"(",["T_LNUMBER","100",39],["T_WHITESPACE"," ",39],"*",["T_WHITESPACE"," ",39],["T_VARIABLE","$status",39],"[",["T_CONSTANT_ENCAPSED_STRING","'current'",39],"]",["T_WHITESPACE"," ",39],"\/",["T_WHITESPACE"," ",39],["T_VARIABLE","$status",39],"[",["T_CONSTANT_ENCAPSED_STRING","'total'",39],"]",")",";",["T_WHITESPACE","\n      ",39],"}",["T_WHITESPACE","\n    ",40],"}",["T_WHITESPACE","\n\n    ",41],["T_RETURN","return",43],["T_WHITESPACE"," ",43],["T_NEW","new",43],["T_WHITESPACE"," ",43],["T_STRING","JsonResponse",43],"(",["T_VARIABLE","$progress",43],")",";",["T_WHITESPACE","\n  ",43],"}",["T_WHITESPACE","\n\n",44],"}",["T_WHITESPACE","\n",46]]
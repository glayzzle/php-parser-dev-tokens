[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","destination",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Component",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Utility",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Unicode",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Core",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Plugin",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Field",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FieldType",6],["T_NS_SEPARATOR","\\",6],["T_STRING","UriItem",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Row",7],";",["T_WHITESPACE","\n",7],["T_USE","use",8],["T_WHITESPACE"," ",8],["T_STRING","Drupal",8],["T_NS_SEPARATOR","\\",8],["T_STRING","migrate",8],["T_NS_SEPARATOR","\\",8],["T_STRING","MigrateException",8],";",["T_WHITESPACE","\n",8],["T_USE","use",9],["T_WHITESPACE"," ",9],["T_STRING","Drupal",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","Plugin",9],["T_NS_SEPARATOR","\\",9],["T_STRING","migrate",9],["T_NS_SEPARATOR","\\",9],["T_STRING","destination",9],["T_NS_SEPARATOR","\\",9],["T_STRING","EntityContentBase",9],";",["T_WHITESPACE","\n\n",9],["T_DOC_COMMENT","\/**\n * @MigrateDestination(\n *   id = \"entity:file\"\n * )\n *\/",11],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","EntityFile",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","EntityContentBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",18],["T_WHITESPACE","\n  ",20],["T_PROTECTED","protected",21],["T_WHITESPACE"," ",21],["T_FUNCTION","function",21],["T_WHITESPACE"," ",21],["T_STRING","getEntity",21],"(",["T_STRING","Row",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$row",21],",",["T_WHITESPACE"," ",21],["T_ARRAY","array",21],["T_WHITESPACE"," ",21],["T_VARIABLE","$old_destination_id_values",21],")",["T_WHITESPACE"," ",21],"{",["T_WHITESPACE","\n    ",21],["T_COMMENT","\/\/ For stub rows, there is no real file to deal with, let the stubbing\n",22],["T_WHITESPACE","    ",23],["T_COMMENT","\/\/ process take its default path.\n",23],["T_WHITESPACE","    ",24],["T_IF","if",24],["T_WHITESPACE"," ",24],"(",["T_VARIABLE","$row",24],["T_OBJECT_OPERATOR","->",24],["T_STRING","isStub",24],"(",")",")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_RETURN","return",25],["T_WHITESPACE"," ",25],["T_STRING","parent",25],["T_DOUBLE_COLON","::",25],["T_STRING","getEntity",25],"(",["T_VARIABLE","$row",25],",",["T_WHITESPACE"," ",25],["T_VARIABLE","$old_destination_id_values",25],")",";",["T_WHITESPACE","\n    ",25],"}",["T_WHITESPACE","\n\n    ",26],["T_COMMENT","\/\/ By default the entity key (fid) would be used, but we want to make sure\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/ we're loading the matching URI.\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$destination",30],["T_WHITESPACE"," ",30],"=",["T_WHITESPACE"," ",30],["T_VARIABLE","$row",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","getDestinationProperty",30],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",30],")",";",["T_WHITESPACE","\n    ",30],["T_IF","if",31],["T_WHITESPACE"," ",31],"(",["T_EMPTY","empty",31],"(",["T_VARIABLE","$destination",31],")",")",["T_WHITESPACE"," ",31],"{",["T_WHITESPACE","\n      ",31],["T_THROW","throw",32],["T_WHITESPACE"," ",32],["T_NEW","new",32],["T_WHITESPACE"," ",32],["T_STRING","MigrateException",32],"(",["T_CONSTANT_ENCAPSED_STRING","'Destination property uri not provided'",32],")",";",["T_WHITESPACE","\n    ",32],"}",["T_WHITESPACE","\n    ",33],["T_VARIABLE","$entity",34],["T_WHITESPACE"," ",34],"=",["T_WHITESPACE"," ",34],["T_VARIABLE","$this",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","storage",34],["T_OBJECT_OPERATOR","->",34],["T_STRING","loadByProperties",34],"(","[",["T_CONSTANT_ENCAPSED_STRING","'uri'",34],["T_WHITESPACE"," ",34],["T_DOUBLE_ARROW","=>",34],["T_WHITESPACE"," ",34],["T_VARIABLE","$destination",34],"]",")",";",["T_WHITESPACE","\n    ",34],["T_IF","if",35],["T_WHITESPACE"," ",35],"(",["T_VARIABLE","$entity",35],")",["T_WHITESPACE"," ",35],"{",["T_WHITESPACE","\n      ",35],["T_RETURN","return",36],["T_WHITESPACE"," ",36],["T_STRING","reset",36],"(",["T_VARIABLE","$entity",36],")",";",["T_WHITESPACE","\n    ",36],"}",["T_WHITESPACE","\n    ",37],["T_ELSE","else",38],["T_WHITESPACE"," ",38],"{",["T_WHITESPACE","\n      ",38],["T_RETURN","return",39],["T_WHITESPACE"," ",39],["T_STRING","parent",39],["T_DOUBLE_COLON","::",39],["T_STRING","getEntity",39],"(",["T_VARIABLE","$row",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$old_destination_id_values",39],")",";",["T_WHITESPACE","\n    ",39],"}",["T_WHITESPACE","\n  ",40],"}",["T_WHITESPACE","\n\n  ",41],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",43],["T_WHITESPACE","\n  ",45],["T_PROTECTED","protected",46],["T_WHITESPACE"," ",46],["T_FUNCTION","function",46],["T_WHITESPACE"," ",46],["T_STRING","processStubRow",46],"(",["T_STRING","Row",46],["T_WHITESPACE"," ",46],["T_VARIABLE","$row",46],")",["T_WHITESPACE"," ",46],"{",["T_WHITESPACE","\n    ",46],["T_COMMENT","\/\/ We stub the uri value ourselves so we can create a real stub file for it.\n",47],["T_WHITESPACE","    ",48],["T_IF","if",48],["T_WHITESPACE"," ",48],"(","!",["T_VARIABLE","$row",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getDestinationProperty",48],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",48],")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$field_definitions",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_VARIABLE","$this",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","entityManager",49],["T_WHITESPACE","\n        ",49],["T_OBJECT_OPERATOR","->",50],["T_STRING","getFieldDefinitions",50],"(",["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","storage",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","getEntityTypeId",50],"(",")",",",["T_WHITESPACE","\n          ",50],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getKey",51],"(",["T_CONSTANT_ENCAPSED_STRING","'bundle'",51],")",")",";",["T_WHITESPACE","\n      ",51],["T_VARIABLE","$value",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","UriItem",52],["T_DOUBLE_COLON","::",52],["T_STRING","generateSampleValue",52],"(",["T_VARIABLE","$field_definitions",52],"[",["T_CONSTANT_ENCAPSED_STRING","'uri'",52],"]",")",";",["T_WHITESPACE","\n      ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_EMPTY","empty",53],"(",["T_VARIABLE","$value",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n        ",53],["T_THROW","throw",54],["T_WHITESPACE"," ",54],["T_NEW","new",54],["T_WHITESPACE"," ",54],["T_STRING","MigrateException",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Stubbing failed, unable to generate value for field uri'",54],")",";",["T_WHITESPACE","\n      ",54],"}",["T_WHITESPACE","\n      ",55],["T_COMMENT","\/\/ generateSampleValue() wraps the value in an array.\n",56],["T_WHITESPACE","      ",57],["T_VARIABLE","$value",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_STRING","reset",57],"(",["T_VARIABLE","$value",57],")",";",["T_WHITESPACE","\n      ",57],["T_COMMENT","\/\/ Make it into a proper public file uri, stripping off the existing\n",58],["T_WHITESPACE","      ",59],["T_COMMENT","\/\/ scheme if present.\n",59],["T_WHITESPACE","      ",60],["T_VARIABLE","$value",60],["T_WHITESPACE"," ",60],"=",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","'public:\/\/'",60],["T_WHITESPACE"," ",60],".",["T_WHITESPACE"," ",60],["T_STRING","preg_replace",60],"(",["T_CONSTANT_ENCAPSED_STRING","'|^[a-z]+:\/\/|i'",60],",",["T_WHITESPACE"," ",60],["T_CONSTANT_ENCAPSED_STRING","''",60],",",["T_WHITESPACE"," ",60],["T_VARIABLE","$value",60],")",";",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$value",61],["T_WHITESPACE"," ",61],"=",["T_WHITESPACE"," ",61],["T_STRING","Unicode",61],["T_DOUBLE_COLON","::",61],["T_STRING","substr",61],"(",["T_VARIABLE","$value",61],",",["T_WHITESPACE"," ",61],["T_LNUMBER","0",61],",",["T_WHITESPACE"," ",61],["T_VARIABLE","$field_definitions",61],"[",["T_CONSTANT_ENCAPSED_STRING","'uri'",61],"]",["T_OBJECT_OPERATOR","->",61],["T_STRING","getSetting",61],"(",["T_CONSTANT_ENCAPSED_STRING","'max_length'",61],")",")",";",["T_WHITESPACE","\n      ",61],["T_COMMENT","\/\/ Create a real file, so File::preSave() can do filesize() on it.\n",62],["T_WHITESPACE","      ",63],["T_STRING","touch",63],"(",["T_VARIABLE","$value",63],")",";",["T_WHITESPACE","\n      ",63],["T_VARIABLE","$row",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","setDestinationProperty",64],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",64],",",["T_WHITESPACE"," ",64],["T_VARIABLE","$value",64],")",";",["T_WHITESPACE","\n    ",64],"}",["T_WHITESPACE","\n    ",65],["T_STRING","parent",66],["T_DOUBLE_COLON","::",66],["T_STRING","processStubRow",66],"(",["T_VARIABLE","$row",66],")",";",["T_WHITESPACE","\n  ",66],"}",["T_WHITESPACE","\n\n",67],"}",["T_WHITESPACE","\n",69]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","migrate",3],["T_NS_SEPARATOR","\\",3],["T_STRING","source",3],["T_NS_SEPARATOR","\\",3],["T_STRING","d7",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Database",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Query",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Condition",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","migrate",6],["T_NS_SEPARATOR","\\",6],["T_STRING","Row",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate_drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","Plugin",7],["T_NS_SEPARATOR","\\",7],["T_STRING","migrate",7],["T_NS_SEPARATOR","\\",7],["T_STRING","source",7],["T_NS_SEPARATOR","\\",7],["T_STRING","DrupalSqlBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Drupal 7 file source from database.\n *\n * @MigrateSource(\n *   id = \"d7_file\"\n * )\n *\/",9],["T_WHITESPACE","\n",15],["T_CLASS","class",16],["T_WHITESPACE"," ",16],["T_STRING","File",16],["T_WHITESPACE"," ",16],["T_EXTENDS","extends",16],["T_WHITESPACE"," ",16],["T_STRING","DrupalSqlBase",16],["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n\n  ",16],["T_DOC_COMMENT","\/**\n   * The public file directory path.\n   *\n   * @var string\n   *\/",18],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_VARIABLE","$publicPath",23],";",["T_WHITESPACE","\n\n  ",23],["T_DOC_COMMENT","\/**\n   * The private file directory path, if any.\n   *\n   * @var string\n   *\/",25],["T_WHITESPACE","\n  ",29],["T_PROTECTED","protected",30],["T_WHITESPACE"," ",30],["T_VARIABLE","$privatePath",30],";",["T_WHITESPACE","\n\n  ",30],["T_DOC_COMMENT","\/**\n   * The temporary file directory path.\n   *\n   * @var string\n   *\/",32],["T_WHITESPACE","\n  ",36],["T_PROTECTED","protected",37],["T_WHITESPACE"," ",37],["T_VARIABLE","$temporaryPath",37],";",["T_WHITESPACE","\n\n  ",37],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",39],["T_WHITESPACE","\n  ",41],["T_PUBLIC","public",42],["T_WHITESPACE"," ",42],["T_FUNCTION","function",42],["T_WHITESPACE"," ",42],["T_STRING","query",42],"(",")",["T_WHITESPACE"," ",42],"{",["T_WHITESPACE","\n    ",42],["T_VARIABLE","$query",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","select",43],"(",["T_CONSTANT_ENCAPSED_STRING","'file_managed'",43],",",["T_WHITESPACE"," ",43],["T_CONSTANT_ENCAPSED_STRING","'f'",43],")",["T_WHITESPACE","\n      ",43],["T_OBJECT_OPERATOR","->",44],["T_STRING","fields",44],"(",["T_CONSTANT_ENCAPSED_STRING","'f'",44],")",["T_WHITESPACE","\n      ",44],["T_OBJECT_OPERATOR","->",45],["T_STRING","orderBy",45],"(",["T_CONSTANT_ENCAPSED_STRING","'f.timestamp'",45],")",";",["T_WHITESPACE","\n\n    ",45],["T_COMMENT","\/\/ Filter by scheme(s), if configured.\n",47],["T_WHITESPACE","    ",48],["T_IF","if",48],["T_WHITESPACE"," ",48],"(",["T_ISSET","isset",48],"(",["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","configuration",48],"[",["T_CONSTANT_ENCAPSED_STRING","'scheme'",48],"]",")",")",["T_WHITESPACE"," ",48],"{",["T_WHITESPACE","\n      ",48],["T_VARIABLE","$schemes",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",")",";",["T_WHITESPACE","\n      ",49],["T_COMMENT","\/\/ Accept either a single scheme, or a list.\n",50],["T_WHITESPACE","      ",51],["T_FOREACH","foreach",51],["T_WHITESPACE"," ",51],"(",["T_ARRAY_CAST","(array)",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","configuration",51],"[",["T_CONSTANT_ENCAPSED_STRING","'scheme'",51],"]",["T_WHITESPACE"," ",51],["T_AS","as",51],["T_WHITESPACE"," ",51],["T_VARIABLE","$scheme",51],")",["T_WHITESPACE"," ",51],"{",["T_WHITESPACE","\n        ",51],["T_VARIABLE","$schemes",52],"[","]",["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","rtrim",52],"(",["T_VARIABLE","$scheme",52],")",["T_WHITESPACE"," ",52],".",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",52],";",["T_WHITESPACE","\n      ",52],"}",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$schemes",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","array_map",54],"(","[",["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","getDatabase",54],"(",")",",",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'escapeLike'",54],"]",",",["T_WHITESPACE"," ",54],["T_VARIABLE","$schemes",54],")",";",["T_WHITESPACE","\n\n      ",54],["T_COMMENT","\/\/ uri LIKE 'public:\/\/%' OR uri LIKE 'private:\/\/%'\n",56],["T_WHITESPACE","      ",57],["T_VARIABLE","$conditions",57],["T_WHITESPACE"," ",57],"=",["T_WHITESPACE"," ",57],["T_NEW","new",57],["T_WHITESPACE"," ",57],["T_STRING","Condition",57],"(",["T_CONSTANT_ENCAPSED_STRING","'OR'",57],")",";",["T_WHITESPACE","\n      ",57],["T_FOREACH","foreach",58],["T_WHITESPACE"," ",58],"(",["T_VARIABLE","$schemes",58],["T_WHITESPACE"," ",58],["T_AS","as",58],["T_WHITESPACE"," ",58],["T_VARIABLE","$scheme",58],")",["T_WHITESPACE"," ",58],"{",["T_WHITESPACE","\n        ",58],["T_VARIABLE","$conditions",59],["T_OBJECT_OPERATOR","->",59],["T_STRING","condition",59],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",59],",",["T_WHITESPACE"," ",59],["T_VARIABLE","$scheme",59],["T_WHITESPACE"," ",59],".",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'%'",59],",",["T_WHITESPACE"," ",59],["T_CONSTANT_ENCAPSED_STRING","'LIKE'",59],")",";",["T_WHITESPACE","\n      ",59],"}",["T_WHITESPACE","\n      ",60],["T_VARIABLE","$query",61],["T_OBJECT_OPERATOR","->",61],["T_STRING","condition",61],"(",["T_VARIABLE","$conditions",61],")",";",["T_WHITESPACE","\n    ",61],"}",["T_WHITESPACE","\n\n    ",62],["T_RETURN","return",64],["T_WHITESPACE"," ",64],["T_VARIABLE","$query",64],";",["T_WHITESPACE","\n  ",64],"}",["T_WHITESPACE","\n\n  ",65],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",67],["T_WHITESPACE","\n  ",69],["T_PROTECTED","protected",70],["T_WHITESPACE"," ",70],["T_FUNCTION","function",70],["T_WHITESPACE"," ",70],["T_STRING","initializeIterator",70],"(",")",["T_WHITESPACE"," ",70],"{",["T_WHITESPACE","\n    ",70],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","publicPath",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","variableGet",71],"(",["T_CONSTANT_ENCAPSED_STRING","'file_public_path'",71],",",["T_WHITESPACE"," ",71],["T_CONSTANT_ENCAPSED_STRING","'sites\/default\/files'",71],")",";",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","privatePath",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","variableGet",72],"(",["T_CONSTANT_ENCAPSED_STRING","'file_private_path'",72],",",["T_WHITESPACE"," ",72],["T_STRING","NULL",72],")",";",["T_WHITESPACE","\n    ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","temporaryPath",73],["T_WHITESPACE"," ",73],"=",["T_WHITESPACE"," ",73],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","variableGet",73],"(",["T_CONSTANT_ENCAPSED_STRING","'file_temporary_path'",73],",",["T_WHITESPACE"," ",73],["T_CONSTANT_ENCAPSED_STRING","'\/tmp'",73],")",";",["T_WHITESPACE","\n    ",73],["T_RETURN","return",74],["T_WHITESPACE"," ",74],["T_STRING","parent",74],["T_DOUBLE_COLON","::",74],["T_STRING","initializeIterator",74],"(",")",";",["T_WHITESPACE","\n  ",74],"}",["T_WHITESPACE","\n\n  ",75],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",77],["T_WHITESPACE","\n  ",79],["T_PUBLIC","public",80],["T_WHITESPACE"," ",80],["T_FUNCTION","function",80],["T_WHITESPACE"," ",80],["T_STRING","prepareRow",80],"(",["T_STRING","Row",80],["T_WHITESPACE"," ",80],["T_VARIABLE","$row",80],")",["T_WHITESPACE"," ",80],"{",["T_WHITESPACE","\n    ",80],["T_COMMENT","\/\/ Compute the filepath property, which is a physical representation of\n",81],["T_WHITESPACE","    ",82],["T_COMMENT","\/\/ the URI relative to the Drupal root.\n",82],["T_WHITESPACE","    ",83],["T_VARIABLE","$path",83],["T_WHITESPACE"," ",83],"=",["T_WHITESPACE"," ",83],["T_STRING","str_replace",83],"(","[",["T_CONSTANT_ENCAPSED_STRING","'public:\/'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'private:\/'",83],",",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'temporary:\/'",83],"]",",",["T_WHITESPACE"," ",83],"[",["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","publicPath",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","privatePath",83],",",["T_WHITESPACE"," ",83],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","temporaryPath",83],"]",",",["T_WHITESPACE"," ",83],["T_VARIABLE","$row",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","getSourceProperty",83],"(",["T_CONSTANT_ENCAPSED_STRING","'uri'",83],")",")",";",["T_WHITESPACE","\n    ",83],["T_COMMENT","\/\/ At this point, $path could be an absolute path or a relative path,\n",84],["T_WHITESPACE","    ",85],["T_COMMENT","\/\/ depending on how the scheme's variable was set. So we need to shear out\n",85],["T_WHITESPACE","    ",86],["T_COMMENT","\/\/ the source_base_path in order to make them all relative.\n",86],["T_WHITESPACE","    ",87],["T_VARIABLE","$path",87],["T_WHITESPACE"," ",87],"=",["T_WHITESPACE"," ",87],["T_STRING","str_replace",87],"(",["T_VARIABLE","$this",87],["T_OBJECT_OPERATOR","->",87],["T_STRING","configuration",87],"[",["T_CONSTANT_ENCAPSED_STRING","'constants'",87],"]","[",["T_CONSTANT_ENCAPSED_STRING","'source_base_path'",87],"]",",",["T_WHITESPACE"," ",87],["T_STRING","NULL",87],",",["T_WHITESPACE"," ",87],["T_VARIABLE","$path",87],")",";",["T_WHITESPACE","\n    ",87],["T_VARIABLE","$row",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","setSourceProperty",88],"(",["T_CONSTANT_ENCAPSED_STRING","'filepath'",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$path",88],")",";",["T_WHITESPACE","\n    ",88],["T_RETURN","return",89],["T_WHITESPACE"," ",89],["T_STRING","parent",89],["T_DOUBLE_COLON","::",89],["T_STRING","prepareRow",89],"(",["T_VARIABLE","$row",89],")",";",["T_WHITESPACE","\n  ",89],"}",["T_WHITESPACE","\n\n  ",90],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",92],["T_WHITESPACE","\n  ",94],["T_PUBLIC","public",95],["T_WHITESPACE"," ",95],["T_FUNCTION","function",95],["T_WHITESPACE"," ",95],["T_STRING","fields",95],"(",")",["T_WHITESPACE"," ",95],"{",["T_WHITESPACE","\n    ",95],["T_RETURN","return",96],["T_WHITESPACE"," ",96],["T_ARRAY","array",96],"(",["T_WHITESPACE","\n      ",96],["T_CONSTANT_ENCAPSED_STRING","'fid'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'File ID'",97],")",",",["T_WHITESPACE","\n      ",97],["T_CONSTANT_ENCAPSED_STRING","'uid'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","t",98],"(",["T_CONSTANT_ENCAPSED_STRING","'The {users}.uid who added the file. If set to 0, this file was added by an anonymous user.'",98],")",",",["T_WHITESPACE","\n      ",98],["T_CONSTANT_ENCAPSED_STRING","'filename'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","t",99],"(",["T_CONSTANT_ENCAPSED_STRING","'File name'",99],")",",",["T_WHITESPACE","\n      ",99],["T_CONSTANT_ENCAPSED_STRING","'filepath'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","t",100],"(",["T_CONSTANT_ENCAPSED_STRING","'File path'",100],")",",",["T_WHITESPACE","\n      ",100],["T_CONSTANT_ENCAPSED_STRING","'filemime'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'File MIME Type'",101],")",",",["T_WHITESPACE","\n      ",101],["T_CONSTANT_ENCAPSED_STRING","'status'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","t",102],"(",["T_CONSTANT_ENCAPSED_STRING","'The published status of a file.'",102],")",",",["T_WHITESPACE","\n      ",102],["T_CONSTANT_ENCAPSED_STRING","'timestamp'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","t",103],"(",["T_CONSTANT_ENCAPSED_STRING","'The time that the file was added.'",103],")",",",["T_WHITESPACE","\n    ",103],")",";",["T_WHITESPACE","\n  ",104],"}",["T_WHITESPACE","\n\n  ",105],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",107],["T_WHITESPACE","\n  ",109],["T_PUBLIC","public",110],["T_WHITESPACE"," ",110],["T_FUNCTION","function",110],["T_WHITESPACE"," ",110],["T_STRING","getIds",110],"(",")",["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n    ",110],["T_VARIABLE","$ids",111],"[",["T_CONSTANT_ENCAPSED_STRING","'fid'",111],"]","[",["T_CONSTANT_ENCAPSED_STRING","'type'",111],"]",["T_WHITESPACE"," ",111],"=",["T_WHITESPACE"," ",111],["T_CONSTANT_ENCAPSED_STRING","'integer'",111],";",["T_WHITESPACE","\n    ",111],["T_RETURN","return",112],["T_WHITESPACE"," ",112],["T_VARIABLE","$ids",112],";",["T_WHITESPACE","\n  ",112],"}",["T_WHITESPACE","\n\n",113],"}",["T_WHITESPACE","\n",115]]
[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Plugin",3],["T_NS_SEPARATOR","\\",3],["T_STRING","EntityReferenceSelection",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Core",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Plugin",5],["T_NS_SEPARATOR","\\",5],["T_STRING","EntityReferenceSelection",5],["T_NS_SEPARATOR","\\",5],["T_STRING","DefaultSelection",5],";",["T_WHITESPACE","\n\n",5],["T_DOC_COMMENT","\/**\n * Provides specific access control for the file entity type.\n *\n * @EntityReferenceSelection(\n *   id = \"default:file\",\n *   label = @Translation(\"File selection\"),\n *   entity_types = {\"file\"},\n *   group = \"default\",\n *   weight = 1\n * )\n *\/",7],["T_WHITESPACE","\n",17],["T_CLASS","class",18],["T_WHITESPACE"," ",18],["T_STRING","FileSelection",18],["T_WHITESPACE"," ",18],["T_EXTENDS","extends",18],["T_WHITESPACE"," ",18],["T_STRING","DefaultSelection",18],["T_WHITESPACE"," ",18],"{",["T_WHITESPACE","\n\n  ",18],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",20],["T_WHITESPACE","\n  ",22],["T_PROTECTED","protected",23],["T_WHITESPACE"," ",23],["T_FUNCTION","function",23],["T_WHITESPACE"," ",23],["T_STRING","buildEntityQuery",23],"(",["T_VARIABLE","$match",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_STRING","NULL",23],",",["T_WHITESPACE"," ",23],["T_VARIABLE","$match_operator",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_CONSTANT_ENCAPSED_STRING","'CONTAINS'",23],")",["T_WHITESPACE"," ",23],"{",["T_WHITESPACE","\n    ",23],["T_VARIABLE","$query",24],["T_WHITESPACE"," ",24],"=",["T_WHITESPACE"," ",24],["T_STRING","parent",24],["T_DOUBLE_COLON","::",24],["T_STRING","buildEntityQuery",24],"(",["T_VARIABLE","$match",24],",",["T_WHITESPACE"," ",24],["T_VARIABLE","$match_operator",24],")",";",["T_WHITESPACE","\n    ",24],["T_COMMENT","\/\/ Allow referencing :\n",25],["T_WHITESPACE","    ",26],["T_COMMENT","\/\/ - files with status \"permanent\"\n",26],["T_WHITESPACE","    ",27],["T_COMMENT","\/\/ - or files uploaded by the current user (since newly uploaded files only\n",27],["T_WHITESPACE","    ",28],["T_COMMENT","\/\/   become \"permanent\" after the containing entity gets validated and\n",28],["T_WHITESPACE","    ",29],["T_COMMENT","\/\/   saved.)\n",29],["T_WHITESPACE","    ",30],["T_VARIABLE","$query",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","condition",30],"(",["T_VARIABLE","$query",30],["T_OBJECT_OPERATOR","->",30],["T_STRING","orConditionGroup",30],"(",")",["T_WHITESPACE","\n      ",30],["T_OBJECT_OPERATOR","->",31],["T_STRING","condition",31],"(",["T_CONSTANT_ENCAPSED_STRING","'status'",31],",",["T_WHITESPACE"," ",31],["T_STRING","FILE_STATUS_PERMANENT",31],")",["T_WHITESPACE","\n      ",31],["T_OBJECT_OPERATOR","->",32],["T_STRING","condition",32],"(",["T_CONSTANT_ENCAPSED_STRING","'uid'",32],",",["T_WHITESPACE"," ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","currentUser",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","id",32],"(",")",")",")",";",["T_WHITESPACE","\n    ",32],["T_RETURN","return",33],["T_WHITESPACE"," ",33],["T_VARIABLE","$query",33],";",["T_WHITESPACE","\n  ",33],"}",["T_WHITESPACE","\n\n  ",34],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",36],["T_WHITESPACE","\n  ",38],["T_PUBLIC","public",39],["T_WHITESPACE"," ",39],["T_FUNCTION","function",39],["T_WHITESPACE"," ",39],["T_STRING","createNewEntity",39],"(",["T_VARIABLE","$entity_type_id",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$bundle",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$label",39],",",["T_WHITESPACE"," ",39],["T_VARIABLE","$uid",39],")",["T_WHITESPACE"," ",39],"{",["T_WHITESPACE","\n    ",39],["T_VARIABLE","$file",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","parent",40],["T_DOUBLE_COLON","::",40],["T_STRING","createNewEntity",40],"(",["T_VARIABLE","$entity_type_id",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$bundle",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$label",40],",",["T_WHITESPACE"," ",40],["T_VARIABLE","$uid",40],")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ In order to create a referenceable file, it needs to have a \"permanent\"\n",42],["T_WHITESPACE","    ",43],["T_COMMENT","\/\/ status.\n",43],["T_WHITESPACE","    ",44],["T_DOC_COMMENT","\/** @var \\Drupal\\file\\FileInterface $file *\/",44],["T_WHITESPACE","\n    ",44],["T_VARIABLE","$file",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","setPermanent",45],"(",")",";",["T_WHITESPACE","\n\n    ",45],["T_RETURN","return",47],["T_WHITESPACE"," ",47],["T_VARIABLE","$file",47],";",["T_WHITESPACE","\n  ",47],"}",["T_WHITESPACE","\n\n  ",48],["T_DOC_COMMENT","\/**\n   * {@inheritdoc}\n   *\/",50],["T_WHITESPACE","\n  ",52],["T_PUBLIC","public",53],["T_WHITESPACE"," ",53],["T_FUNCTION","function",53],["T_WHITESPACE"," ",53],["T_STRING","validateReferenceableNewEntities",53],"(",["T_ARRAY","array",53],["T_WHITESPACE"," ",53],["T_VARIABLE","$entities",53],")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n    ",53],["T_VARIABLE","$entities",54],["T_WHITESPACE"," ",54],"=",["T_WHITESPACE"," ",54],["T_STRING","parent",54],["T_DOUBLE_COLON","::",54],["T_STRING","validateReferenceableNewEntities",54],"(",["T_VARIABLE","$entities",54],")",";",["T_WHITESPACE","\n    ",54],["T_VARIABLE","$entities",55],["T_WHITESPACE"," ",55],"=",["T_WHITESPACE"," ",55],["T_STRING","array_filter",55],"(",["T_VARIABLE","$entities",55],",",["T_WHITESPACE"," ",55],["T_FUNCTION","function",55],["T_WHITESPACE"," ",55],"(",["T_VARIABLE","$file",55],")",["T_WHITESPACE"," ",55],"{",["T_WHITESPACE","\n      ",55],["T_DOC_COMMENT","\/** @var \\Drupal\\file\\FileInterface $file *\/",56],["T_WHITESPACE","\n      ",56],["T_RETURN","return",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$file",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","isPermanent",57],"(",")",["T_WHITESPACE"," ",57],["T_BOOLEAN_OR","||",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$file",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","getOwnerId",57],"(",")",["T_WHITESPACE"," ",57],["T_IS_IDENTICAL","===",57],["T_WHITESPACE"," ",57],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","currentUser",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","id",57],"(",")",";",["T_WHITESPACE","\n    ",57],"}",")",";",["T_WHITESPACE","\n    ",58],["T_RETURN","return",59],["T_WHITESPACE"," ",59],["T_VARIABLE","$entities",59],";",["T_WHITESPACE","\n  ",59],"}",["T_WHITESPACE","\n\n",60],"}",["T_WHITESPACE","\n",62]]
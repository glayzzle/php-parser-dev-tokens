[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_USE","use",5],["T_WHITESPACE"," ",5],["T_STRING","Drupal",5],["T_NS_SEPARATOR","\\",5],["T_STRING","file",5],["T_NS_SEPARATOR","\\",5],["T_STRING","Entity",5],["T_NS_SEPARATOR","\\",5],["T_STRING","File",5],";",["T_WHITESPACE","\n",5],["T_USE","use",6],["T_WHITESPACE"," ",6],["T_STRING","Drupal",6],["T_NS_SEPARATOR","\\",6],["T_STRING","file",6],["T_NS_SEPARATOR","\\",6],["T_STRING","FileInterface",6],";",["T_WHITESPACE","\n",6],["T_USE","use",7],["T_WHITESPACE"," ",7],["T_STRING","Drupal",7],["T_NS_SEPARATOR","\\",7],["T_STRING","simpletest",7],["T_NS_SEPARATOR","\\",7],["T_STRING","WebTestBase",7],";",["T_WHITESPACE","\n\n",7],["T_DOC_COMMENT","\/**\n * Base class for file tests that use the file_test module to test uploads and\n * hooks.\n *\/",9],["T_WHITESPACE","\n",12],["T_ABSTRACT","abstract",13],["T_WHITESPACE"," ",13],["T_CLASS","class",13],["T_WHITESPACE"," ",13],["T_STRING","FileManagedTestBase",13],["T_WHITESPACE"," ",13],["T_EXTENDS","extends",13],["T_WHITESPACE"," ",13],["T_STRING","WebTestBase",13],["T_WHITESPACE"," ",13],"{",["T_WHITESPACE","\n\n  ",13],["T_DOC_COMMENT","\/**\n   * Modules to enable.\n   *\n   * @var array\n   *\/",15],["T_WHITESPACE","\n  ",19],["T_PUBLIC","public",20],["T_WHITESPACE"," ",20],["T_STATIC","static",20],["T_WHITESPACE"," ",20],["T_VARIABLE","$modules",20],["T_WHITESPACE"," ",20],"=",["T_WHITESPACE"," ",20],["T_ARRAY","array",20],"(",["T_CONSTANT_ENCAPSED_STRING","'file_test'",20],",",["T_WHITESPACE"," ",20],["T_CONSTANT_ENCAPSED_STRING","'file'",20],")",";",["T_WHITESPACE","\n\n  ",20],["T_PROTECTED","protected",22],["T_WHITESPACE"," ",22],["T_FUNCTION","function",22],["T_WHITESPACE"," ",22],["T_STRING","setUp",22],"(",")",["T_WHITESPACE"," ",22],"{",["T_WHITESPACE","\n    ",22],["T_STRING","parent",23],["T_DOUBLE_COLON","::",23],["T_STRING","setUp",23],"(",")",";",["T_WHITESPACE","\n    ",23],["T_COMMENT","\/\/ Clear out any hook calls.\n",24],["T_WHITESPACE","    ",25],["T_STRING","file_test_reset",25],"(",")",";",["T_WHITESPACE","\n  ",25],"}",["T_WHITESPACE","\n\n  ",26],["T_DOC_COMMENT","\/**\n   * Assert that all of the specified hook_file_* hooks were called once, other\n   * values result in failure.\n   *\n   * @param string[] $expected\n   *   An array of strings containing with the hook name; for example, 'load',\n   *   'save', 'insert', etc.\n   *\/",28],["T_WHITESPACE","\n  ",35],["T_FUNCTION","function",36],["T_WHITESPACE"," ",36],["T_STRING","assertFileHooksCalled",36],"(",["T_VARIABLE","$expected",36],")",["T_WHITESPACE"," ",36],"{",["T_WHITESPACE","\n    ",36],["T_NS_SEPARATOR","\\",37],["T_STRING","Drupal",37],["T_DOUBLE_COLON","::",37],["T_STRING","state",37],"(",")",["T_OBJECT_OPERATOR","->",37],["T_STRING","resetCache",37],"(",")",";",["T_WHITESPACE","\n\n    ",37],["T_COMMENT","\/\/ Determine which hooks were called.\n",39],["T_WHITESPACE","    ",40],["T_VARIABLE","$actual",40],["T_WHITESPACE"," ",40],"=",["T_WHITESPACE"," ",40],["T_STRING","array_keys",40],"(",["T_STRING","array_filter",40],"(",["T_STRING","file_test_get_all_calls",40],"(",")",")",")",";",["T_WHITESPACE","\n\n    ",40],["T_COMMENT","\/\/ Determine if there were any expected that were not called.\n",42],["T_WHITESPACE","    ",43],["T_VARIABLE","$uncalled",43],["T_WHITESPACE"," ",43],"=",["T_WHITESPACE"," ",43],["T_STRING","array_diff",43],"(",["T_VARIABLE","$expected",43],",",["T_WHITESPACE"," ",43],["T_VARIABLE","$actual",43],")",";",["T_WHITESPACE","\n    ",43],["T_IF","if",44],["T_WHITESPACE"," ",44],"(",["T_STRING","count",44],"(",["T_VARIABLE","$uncalled",44],")",")",["T_WHITESPACE"," ",44],"{",["T_WHITESPACE","\n      ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertTrue",45],"(",["T_STRING","FALSE",45],",",["T_WHITESPACE"," ",45],["T_STRING","format_string",45],"(",["T_CONSTANT_ENCAPSED_STRING","'Expected hooks %expected to be called but %uncalled was not called.'",45],",",["T_WHITESPACE"," ",45],["T_ARRAY","array",45],"(",["T_CONSTANT_ENCAPSED_STRING","'%expected'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_STRING","implode",45],"(",["T_CONSTANT_ENCAPSED_STRING","', '",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$expected",45],")",",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'%uncalled'",45],["T_WHITESPACE"," ",45],["T_DOUBLE_ARROW","=>",45],["T_WHITESPACE"," ",45],["T_STRING","implode",45],"(",["T_CONSTANT_ENCAPSED_STRING","', '",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$uncalled",45],")",")",")",")",";",["T_WHITESPACE","\n    ",45],"}",["T_WHITESPACE","\n    ",46],["T_ELSE","else",47],["T_WHITESPACE"," ",47],"{",["T_WHITESPACE","\n      ",47],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","assertTrue",48],"(",["T_STRING","TRUE",48],",",["T_WHITESPACE"," ",48],["T_STRING","format_string",48],"(",["T_CONSTANT_ENCAPSED_STRING","'All the expected hooks were called: %expected'",48],",",["T_WHITESPACE"," ",48],["T_ARRAY","array",48],"(",["T_CONSTANT_ENCAPSED_STRING","'%expected'",48],["T_WHITESPACE"," ",48],["T_DOUBLE_ARROW","=>",48],["T_WHITESPACE"," ",48],["T_EMPTY","empty",48],"(",["T_VARIABLE","$expected",48],")",["T_WHITESPACE"," ",48],"?",["T_WHITESPACE"," ",48],["T_CONSTANT_ENCAPSED_STRING","'(none)'",48],["T_WHITESPACE"," ",48],":",["T_WHITESPACE"," ",48],["T_STRING","implode",48],"(",["T_CONSTANT_ENCAPSED_STRING","', '",48],",",["T_WHITESPACE"," ",48],["T_VARIABLE","$expected",48],")",")",")",")",";",["T_WHITESPACE","\n    ",48],"}",["T_WHITESPACE","\n\n    ",49],["T_COMMENT","\/\/ Determine if there were any unexpected calls.\n",51],["T_WHITESPACE","    ",52],["T_VARIABLE","$unexpected",52],["T_WHITESPACE"," ",52],"=",["T_WHITESPACE"," ",52],["T_STRING","array_diff",52],"(",["T_VARIABLE","$actual",52],",",["T_WHITESPACE"," ",52],["T_VARIABLE","$expected",52],")",";",["T_WHITESPACE","\n    ",52],["T_IF","if",53],["T_WHITESPACE"," ",53],"(",["T_STRING","count",53],"(",["T_VARIABLE","$unexpected",53],")",")",["T_WHITESPACE"," ",53],"{",["T_WHITESPACE","\n      ",53],["T_VARIABLE","$this",54],["T_OBJECT_OPERATOR","->",54],["T_STRING","assertTrue",54],"(",["T_STRING","FALSE",54],",",["T_WHITESPACE"," ",54],["T_STRING","format_string",54],"(",["T_CONSTANT_ENCAPSED_STRING","'Unexpected hooks were called: %unexpected.'",54],",",["T_WHITESPACE"," ",54],["T_ARRAY","array",54],"(",["T_CONSTANT_ENCAPSED_STRING","'%unexpected'",54],["T_WHITESPACE"," ",54],["T_DOUBLE_ARROW","=>",54],["T_WHITESPACE"," ",54],["T_EMPTY","empty",54],"(",["T_VARIABLE","$unexpected",54],")",["T_WHITESPACE"," ",54],"?",["T_WHITESPACE"," ",54],["T_CONSTANT_ENCAPSED_STRING","'(none)'",54],["T_WHITESPACE"," ",54],":",["T_WHITESPACE"," ",54],["T_STRING","implode",54],"(",["T_CONSTANT_ENCAPSED_STRING","', '",54],",",["T_WHITESPACE"," ",54],["T_VARIABLE","$unexpected",54],")",")",")",")",";",["T_WHITESPACE","\n    ",54],"}",["T_WHITESPACE","\n    ",55],["T_ELSE","else",56],["T_WHITESPACE"," ",56],"{",["T_WHITESPACE","\n      ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertTrue",57],"(",["T_STRING","TRUE",57],",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'No unexpected hooks were called.'",57],")",";",["T_WHITESPACE","\n    ",57],"}",["T_WHITESPACE","\n  ",58],"}",["T_WHITESPACE","\n\n  ",59],["T_DOC_COMMENT","\/**\n   * Assert that a hook_file_* hook was called a certain number of times.\n   *\n   * @param string $hook\n   *   String with the hook name; for instance, 'load', 'save', 'insert', etc.\n   * @param int $expected_count\n   *   Optional integer count.\n   * @param string|null $message\n   *   Optional translated string message.\n   *\/",61],["T_WHITESPACE","\n  ",70],["T_FUNCTION","function",71],["T_WHITESPACE"," ",71],["T_STRING","assertFileHookCalled",71],"(",["T_VARIABLE","$hook",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$expected_count",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_LNUMBER","1",71],",",["T_WHITESPACE"," ",71],["T_VARIABLE","$message",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_STRING","NULL",71],")",["T_WHITESPACE"," ",71],"{",["T_WHITESPACE","\n    ",71],["T_VARIABLE","$actual_count",72],["T_WHITESPACE"," ",72],"=",["T_WHITESPACE"," ",72],["T_STRING","count",72],"(",["T_STRING","file_test_get_calls",72],"(",["T_VARIABLE","$hook",72],")",")",";",["T_WHITESPACE","\n\n    ",72],["T_IF","if",74],["T_WHITESPACE"," ",74],"(","!",["T_ISSET","isset",74],"(",["T_VARIABLE","$message",74],")",")",["T_WHITESPACE"," ",74],"{",["T_WHITESPACE","\n      ",74],["T_IF","if",75],["T_WHITESPACE"," ",75],"(",["T_VARIABLE","$actual_count",75],["T_WHITESPACE"," ",75],["T_IS_EQUAL","==",75],["T_WHITESPACE"," ",75],["T_VARIABLE","$expected_count",75],")",["T_WHITESPACE"," ",75],"{",["T_WHITESPACE","\n        ",75],["T_VARIABLE","$message",76],["T_WHITESPACE"," ",76],"=",["T_WHITESPACE"," ",76],["T_STRING","format_string",76],"(",["T_CONSTANT_ENCAPSED_STRING","'hook_file_@name was called correctly.'",76],",",["T_WHITESPACE"," ",76],["T_ARRAY","array",76],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",76],["T_WHITESPACE"," ",76],["T_DOUBLE_ARROW","=>",76],["T_WHITESPACE"," ",76],["T_VARIABLE","$hook",76],")",")",";",["T_WHITESPACE","\n      ",76],"}",["T_WHITESPACE","\n      ",77],["T_ELSEIF","elseif",78],["T_WHITESPACE"," ",78],"(",["T_VARIABLE","$expected_count",78],["T_WHITESPACE"," ",78],["T_IS_EQUAL","==",78],["T_WHITESPACE"," ",78],["T_LNUMBER","0",78],")",["T_WHITESPACE"," ",78],"{",["T_WHITESPACE","\n        ",78],["T_VARIABLE","$message",79],["T_WHITESPACE"," ",79],"=",["T_WHITESPACE"," ",79],["T_NS_SEPARATOR","\\",79],["T_STRING","Drupal",79],["T_DOUBLE_COLON","::",79],["T_STRING","translation",79],"(",")",["T_OBJECT_OPERATOR","->",79],["T_STRING","formatPlural",79],"(",["T_VARIABLE","$actual_count",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'hook_file_@name was not expected to be called but was actually called once.'",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'hook_file_@name was not expected to be called but was actually called @count times.'",79],",",["T_WHITESPACE"," ",79],["T_ARRAY","array",79],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$hook",79],",",["T_WHITESPACE"," ",79],["T_CONSTANT_ENCAPSED_STRING","'@count'",79],["T_WHITESPACE"," ",79],["T_DOUBLE_ARROW","=>",79],["T_WHITESPACE"," ",79],["T_VARIABLE","$actual_count",79],")",")",";",["T_WHITESPACE","\n      ",79],"}",["T_WHITESPACE","\n      ",80],["T_ELSE","else",81],["T_WHITESPACE"," ",81],"{",["T_WHITESPACE","\n        ",81],["T_VARIABLE","$message",82],["T_WHITESPACE"," ",82],"=",["T_WHITESPACE"," ",82],["T_STRING","format_string",82],"(",["T_CONSTANT_ENCAPSED_STRING","'hook_file_@name was expected to be called %expected times but was called %actual times.'",82],",",["T_WHITESPACE"," ",82],["T_ARRAY","array",82],"(",["T_CONSTANT_ENCAPSED_STRING","'@name'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$hook",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'%expected'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$expected_count",82],",",["T_WHITESPACE"," ",82],["T_CONSTANT_ENCAPSED_STRING","'%actual'",82],["T_WHITESPACE"," ",82],["T_DOUBLE_ARROW","=>",82],["T_WHITESPACE"," ",82],["T_VARIABLE","$actual_count",82],")",")",";",["T_WHITESPACE","\n      ",82],"}",["T_WHITESPACE","\n    ",83],"}",["T_WHITESPACE","\n    ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","assertEqual",85],"(",["T_VARIABLE","$actual_count",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$expected_count",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$message",85],")",";",["T_WHITESPACE","\n  ",85],"}",["T_WHITESPACE","\n\n  ",86],["T_DOC_COMMENT","\/**\n   * Asserts that two files have the same values (except timestamp).\n   *\n   * @param \\Drupal\\file\\FileInterface $before\n   *   File object to compare.\n   * @param \\Drupal\\file\\FileInterface $after\n   *   File object to compare.\n   *\/",88],["T_WHITESPACE","\n  ",95],["T_FUNCTION","function",96],["T_WHITESPACE"," ",96],["T_STRING","assertFileUnchanged",96],"(",["T_STRING","FileInterface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$before",96],",",["T_WHITESPACE"," ",96],["T_STRING","FileInterface",96],["T_WHITESPACE"," ",96],["T_VARIABLE","$after",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n    ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","assertEqual",97],"(",["T_VARIABLE","$before",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",",",["T_WHITESPACE"," ",97],["T_VARIABLE","$after",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",",",["T_WHITESPACE"," ",97],["T_STRING","t",97],"(",["T_CONSTANT_ENCAPSED_STRING","'File id is the same: %file1 == %file2.'",97],",",["T_WHITESPACE"," ",97],["T_ARRAY","array",97],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$before",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'%file2'",97],["T_WHITESPACE"," ",97],["T_DOUBLE_ARROW","=>",97],["T_WHITESPACE"," ",97],["T_VARIABLE","$after",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","id",97],"(",")",")",")",",",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",97],")",";",["T_WHITESPACE","\n    ",97],["T_VARIABLE","$this",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","assertEqual",98],"(",["T_VARIABLE","$before",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getOwner",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","id",98],"(",")",",",["T_WHITESPACE"," ",98],["T_VARIABLE","$after",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getOwner",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","id",98],"(",")",",",["T_WHITESPACE"," ",98],["T_STRING","t",98],"(",["T_CONSTANT_ENCAPSED_STRING","'File owner is the same: %file1 == %file2.'",98],",",["T_WHITESPACE"," ",98],["T_ARRAY","array",98],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$before",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getOwner",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","id",98],"(",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'%file2'",98],["T_WHITESPACE"," ",98],["T_DOUBLE_ARROW","=>",98],["T_WHITESPACE"," ",98],["T_VARIABLE","$after",98],["T_OBJECT_OPERATOR","->",98],["T_STRING","getOwner",98],"(",")",["T_OBJECT_OPERATOR","->",98],["T_STRING","id",98],"(",")",")",")",",",["T_WHITESPACE"," ",98],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",98],")",";",["T_WHITESPACE","\n    ",98],["T_VARIABLE","$this",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","assertEqual",99],"(",["T_VARIABLE","$before",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFilename",99],"(",")",",",["T_WHITESPACE"," ",99],["T_VARIABLE","$after",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFilename",99],"(",")",",",["T_WHITESPACE"," ",99],["T_STRING","t",99],"(",["T_CONSTANT_ENCAPSED_STRING","'File name is the same: %file1 == %file2.'",99],",",["T_WHITESPACE"," ",99],["T_ARRAY","array",99],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$before",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFilename",99],"(",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'%file2'",99],["T_WHITESPACE"," ",99],["T_DOUBLE_ARROW","=>",99],["T_WHITESPACE"," ",99],["T_VARIABLE","$after",99],["T_OBJECT_OPERATOR","->",99],["T_STRING","getFilename",99],"(",")",")",")",",",["T_WHITESPACE"," ",99],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",99],")",";",["T_WHITESPACE","\n    ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","assertEqual",100],"(",["T_VARIABLE","$before",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFileUri",100],"(",")",",",["T_WHITESPACE"," ",100],["T_VARIABLE","$after",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFileUri",100],"(",")",",",["T_WHITESPACE"," ",100],["T_STRING","t",100],"(",["T_CONSTANT_ENCAPSED_STRING","'File path is the same: %file1 == %file2.'",100],",",["T_WHITESPACE"," ",100],["T_ARRAY","array",100],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$before",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFileUri",100],"(",")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'%file2'",100],["T_WHITESPACE"," ",100],["T_DOUBLE_ARROW","=>",100],["T_WHITESPACE"," ",100],["T_VARIABLE","$after",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","getFileUri",100],"(",")",")",")",",",["T_WHITESPACE"," ",100],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",100],")",";",["T_WHITESPACE","\n    ",100],["T_VARIABLE","$this",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","assertEqual",101],"(",["T_VARIABLE","$before",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMimeType",101],"(",")",",",["T_WHITESPACE"," ",101],["T_VARIABLE","$after",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMimeType",101],"(",")",",",["T_WHITESPACE"," ",101],["T_STRING","t",101],"(",["T_CONSTANT_ENCAPSED_STRING","'File MIME type is the same: %file1 == %file2.'",101],",",["T_WHITESPACE"," ",101],["T_ARRAY","array",101],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$before",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMimeType",101],"(",")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'%file2'",101],["T_WHITESPACE"," ",101],["T_DOUBLE_ARROW","=>",101],["T_WHITESPACE"," ",101],["T_VARIABLE","$after",101],["T_OBJECT_OPERATOR","->",101],["T_STRING","getMimeType",101],"(",")",")",")",",",["T_WHITESPACE"," ",101],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",101],")",";",["T_WHITESPACE","\n    ",101],["T_VARIABLE","$this",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","assertEqual",102],"(",["T_VARIABLE","$before",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getSize",102],"(",")",",",["T_WHITESPACE"," ",102],["T_VARIABLE","$after",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getSize",102],"(",")",",",["T_WHITESPACE"," ",102],["T_STRING","t",102],"(",["T_CONSTANT_ENCAPSED_STRING","'File size is the same: %file1 == %file2.'",102],",",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$before",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getSize",102],"(",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'%file2'",102],["T_WHITESPACE"," ",102],["T_DOUBLE_ARROW","=>",102],["T_WHITESPACE"," ",102],["T_VARIABLE","$after",102],["T_OBJECT_OPERATOR","->",102],["T_STRING","getSize",102],"(",")",")",")",",",["T_WHITESPACE"," ",102],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",102],")",";",["T_WHITESPACE","\n    ",102],["T_VARIABLE","$this",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","assertEqual",103],"(",["T_VARIABLE","$before",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isPermanent",103],"(",")",",",["T_WHITESPACE"," ",103],["T_VARIABLE","$after",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isPermanent",103],"(",")",",",["T_WHITESPACE"," ",103],["T_STRING","t",103],"(",["T_CONSTANT_ENCAPSED_STRING","'File status is the same: %file1 == %file2.'",103],",",["T_WHITESPACE"," ",103],["T_ARRAY","array",103],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$before",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isPermanent",103],"(",")",",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'%file2'",103],["T_WHITESPACE"," ",103],["T_DOUBLE_ARROW","=>",103],["T_WHITESPACE"," ",103],["T_VARIABLE","$after",103],["T_OBJECT_OPERATOR","->",103],["T_STRING","isPermanent",103],"(",")",")",")",",",["T_WHITESPACE"," ",103],["T_CONSTANT_ENCAPSED_STRING","'File unchanged'",103],")",";",["T_WHITESPACE","\n  ",103],"}",["T_WHITESPACE","\n\n  ",104],["T_DOC_COMMENT","\/**\n   * Asserts that two files are not the same by comparing the fid and filepath.\n   *\n   * @param \\Drupal\\file\\FileInterface $file1\n   *   File object to compare.\n   * @param \\Drupal\\file\\FileInterface $file2\n   *   File object to compare.\n   *\/",106],["T_WHITESPACE","\n  ",113],["T_FUNCTION","function",114],["T_WHITESPACE"," ",114],["T_STRING","assertDifferentFile",114],"(",["T_STRING","FileInterface",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$file1",114],",",["T_WHITESPACE"," ",114],["T_STRING","FileInterface",114],["T_WHITESPACE"," ",114],["T_VARIABLE","$file2",114],")",["T_WHITESPACE"," ",114],"{",["T_WHITESPACE","\n    ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertNotEqual",115],"(",["T_VARIABLE","$file1",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","id",115],"(",")",",",["T_WHITESPACE"," ",115],["T_VARIABLE","$file2",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","id",115],"(",")",",",["T_WHITESPACE"," ",115],["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'Files have different ids: %file1 != %file2.'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$file1",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","id",115],"(",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'%file2'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_VARIABLE","$file2",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","id",115],"(",")",")",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Different file'",115],")",";",["T_WHITESPACE","\n    ",115],["T_VARIABLE","$this",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","assertNotEqual",116],"(",["T_VARIABLE","$file1",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getFileUri",116],"(",")",",",["T_WHITESPACE"," ",116],["T_VARIABLE","$file2",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getFileUri",116],"(",")",",",["T_WHITESPACE"," ",116],["T_STRING","t",116],"(",["T_CONSTANT_ENCAPSED_STRING","'Files have different paths: %file1 != %file2.'",116],",",["T_WHITESPACE"," ",116],["T_ARRAY","array",116],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$file1",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getFileUri",116],"(",")",",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'%file2'",116],["T_WHITESPACE"," ",116],["T_DOUBLE_ARROW","=>",116],["T_WHITESPACE"," ",116],["T_VARIABLE","$file2",116],["T_OBJECT_OPERATOR","->",116],["T_STRING","getFileUri",116],"(",")",")",")",",",["T_WHITESPACE"," ",116],["T_CONSTANT_ENCAPSED_STRING","'Different file'",116],")",";",["T_WHITESPACE","\n  ",116],"}",["T_WHITESPACE","\n\n  ",117],["T_DOC_COMMENT","\/**\n   * Asserts that two files are the same by comparing the fid and filepath.\n   *\n   * @param \\Drupal\\file\\FileInterface $file1\n   *   File object to compare.\n   * @param \\Drupal\\file\\FileInterface $file2\n   *   File object to compare.\n   *\/",119],["T_WHITESPACE","\n  ",126],["T_FUNCTION","function",127],["T_WHITESPACE"," ",127],["T_STRING","assertSameFile",127],"(",["T_STRING","FileInterface",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$file1",127],",",["T_WHITESPACE"," ",127],["T_STRING","FileInterface",127],["T_WHITESPACE"," ",127],["T_VARIABLE","$file2",127],")",["T_WHITESPACE"," ",127],"{",["T_WHITESPACE","\n    ",127],["T_VARIABLE","$this",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","assertEqual",128],"(",["T_VARIABLE","$file1",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",",",["T_WHITESPACE"," ",128],["T_VARIABLE","$file2",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",",",["T_WHITESPACE"," ",128],["T_STRING","t",128],"(",["T_CONSTANT_ENCAPSED_STRING","'Files have the same ids: %file1 == %file2.'",128],",",["T_WHITESPACE"," ",128],["T_ARRAY","array",128],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$file1",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'%file2-fid'",128],["T_WHITESPACE"," ",128],["T_DOUBLE_ARROW","=>",128],["T_WHITESPACE"," ",128],["T_VARIABLE","$file2",128],["T_OBJECT_OPERATOR","->",128],["T_STRING","id",128],"(",")",")",")",",",["T_WHITESPACE"," ",128],["T_CONSTANT_ENCAPSED_STRING","'Same file'",128],")",";",["T_WHITESPACE","\n    ",128],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","assertEqual",129],"(",["T_VARIABLE","$file1",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getFileUri",129],"(",")",",",["T_WHITESPACE"," ",129],["T_VARIABLE","$file2",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getFileUri",129],"(",")",",",["T_WHITESPACE"," ",129],["T_STRING","t",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Files have the same path: %file1 == %file2.'",129],",",["T_WHITESPACE"," ",129],["T_ARRAY","array",129],"(",["T_CONSTANT_ENCAPSED_STRING","'%file1'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$file1",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getFileUri",129],"(",")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'%file2'",129],["T_WHITESPACE"," ",129],["T_DOUBLE_ARROW","=>",129],["T_WHITESPACE"," ",129],["T_VARIABLE","$file2",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","getFileUri",129],"(",")",")",")",",",["T_WHITESPACE"," ",129],["T_CONSTANT_ENCAPSED_STRING","'Same file'",129],")",";",["T_WHITESPACE","\n  ",129],"}",["T_WHITESPACE","\n\n  ",130],["T_DOC_COMMENT","\/**\n   * Create a file and save it to the files table and assert that it occurs\n   * correctly.\n   *\n   * @param string $filepath\n   *   Optional string specifying the file path. If none is provided then a\n   *   randomly named file will be created in the site's files directory.\n   * @param string $contents\n   *   Optional contents to save into the file. If a NULL value is provided an\n   *   arbitrary string will be used.\n   * @param string $scheme\n   *   Optional string indicating the stream scheme to use. Drupal core includes\n   *   public, private, and temporary. The public wrapper is the default.\n   * @return \\Drupal\\file\\FileInterface\n   *   File entity.\n   *\/",132],["T_WHITESPACE","\n  ",147],["T_FUNCTION","function",148],["T_WHITESPACE"," ",148],["T_STRING","createFile",148],"(",["T_VARIABLE","$filepath",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$contents",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","NULL",148],",",["T_WHITESPACE"," ",148],["T_VARIABLE","$scheme",148],["T_WHITESPACE"," ",148],"=",["T_WHITESPACE"," ",148],["T_STRING","NULL",148],")",["T_WHITESPACE"," ",148],"{",["T_WHITESPACE","\n    ",148],["T_COMMENT","\/\/ Don't count hook invocations caused by creating the file.\n",149],["T_WHITESPACE","    ",150],["T_NS_SEPARATOR","\\",150],["T_STRING","Drupal",150],["T_DOUBLE_COLON","::",150],["T_STRING","state",150],"(",")",["T_OBJECT_OPERATOR","->",150],["T_STRING","set",150],"(",["T_CONSTANT_ENCAPSED_STRING","'file_test.count_hook_invocations'",150],",",["T_WHITESPACE"," ",150],["T_STRING","FALSE",150],")",";",["T_WHITESPACE","\n    ",150],["T_VARIABLE","$file",151],["T_WHITESPACE"," ",151],"=",["T_WHITESPACE"," ",151],["T_STRING","File",151],["T_DOUBLE_COLON","::",151],["T_STRING","create",151],"(","[",["T_WHITESPACE","\n      ",151],["T_CONSTANT_ENCAPSED_STRING","'uri'",152],["T_WHITESPACE"," ",152],["T_DOUBLE_ARROW","=>",152],["T_WHITESPACE"," ",152],["T_VARIABLE","$this",152],["T_OBJECT_OPERATOR","->",152],["T_STRING","createUri",152],"(",["T_VARIABLE","$filepath",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$contents",152],",",["T_WHITESPACE"," ",152],["T_VARIABLE","$scheme",152],")",",",["T_WHITESPACE","\n      ",152],["T_CONSTANT_ENCAPSED_STRING","'uid'",153],["T_WHITESPACE"," ",153],["T_DOUBLE_ARROW","=>",153],["T_WHITESPACE"," ",153],["T_LNUMBER","1",153],",",["T_WHITESPACE","\n    ",153],"]",")",";",["T_WHITESPACE","\n    ",154],["T_VARIABLE","$file",155],["T_OBJECT_OPERATOR","->",155],["T_STRING","save",155],"(",")",";",["T_WHITESPACE","\n    ",155],["T_COMMENT","\/\/ Write the record directly rather than using the API so we don't invoke\n",156],["T_WHITESPACE","    ",157],["T_COMMENT","\/\/ the hooks.\n",157],["T_WHITESPACE","    ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","assertTrue",158],"(",["T_VARIABLE","$file",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","id",158],"(",")",["T_WHITESPACE"," ",158],">",["T_WHITESPACE"," ",158],["T_LNUMBER","0",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'The file was added to the database.'",158],",",["T_WHITESPACE"," ",158],["T_CONSTANT_ENCAPSED_STRING","'Create test file'",158],")",";",["T_WHITESPACE","\n\n    ",158],["T_NS_SEPARATOR","\\",160],["T_STRING","Drupal",160],["T_DOUBLE_COLON","::",160],["T_STRING","state",160],"(",")",["T_OBJECT_OPERATOR","->",160],["T_STRING","set",160],"(",["T_CONSTANT_ENCAPSED_STRING","'file_test.count_hook_invocations'",160],",",["T_WHITESPACE"," ",160],["T_STRING","TRUE",160],")",";",["T_WHITESPACE","\n    ",160],["T_RETURN","return",161],["T_WHITESPACE"," ",161],["T_VARIABLE","$file",161],";",["T_WHITESPACE","\n  ",161],"}",["T_WHITESPACE","\n\n  ",162],["T_DOC_COMMENT","\/**\n   * Creates a file and returns its URI.\n   *\n   * @param string $filepath\n   *   Optional string specifying the file path. If none is provided then a\n   *   randomly named file will be created in the site's files directory.\n   * @param string $contents\n   *   Optional contents to save into the file. If a NULL value is provided an\n   *   arbitrary string will be used.\n   * @param string $scheme\n   *   Optional string indicating the stream scheme to use. Drupal core includes\n   *   public, private, and temporary. The public wrapper is the default.\n   *\n   * @return string\n   *   File URI.\n   *\/",164],["T_WHITESPACE","\n  ",179],["T_FUNCTION","function",180],["T_WHITESPACE"," ",180],["T_STRING","createUri",180],"(",["T_VARIABLE","$filepath",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","NULL",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$contents",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","NULL",180],",",["T_WHITESPACE"," ",180],["T_VARIABLE","$scheme",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_STRING","NULL",180],")",["T_WHITESPACE"," ",180],"{",["T_WHITESPACE","\n    ",180],["T_IF","if",181],["T_WHITESPACE"," ",181],"(","!",["T_ISSET","isset",181],"(",["T_VARIABLE","$filepath",181],")",")",["T_WHITESPACE"," ",181],"{",["T_WHITESPACE","\n      ",181],["T_COMMENT","\/\/ Prefix with non-latin characters to ensure that all file-related\n",182],["T_WHITESPACE","      ",183],["T_COMMENT","\/\/ tests work with international filenames.\n",183],["T_WHITESPACE","      ",184],["T_VARIABLE","$filepath",184],["T_WHITESPACE"," ",184],"=",["T_WHITESPACE"," ",184],["T_CONSTANT_ENCAPSED_STRING","'\u00d0\u00a4\u00d0\u00b0\u00d0\u00b9\u00d0\u00bb \u00d0\u00b4\u00d0\u00bb\u00d1\u008f \u00d1\u0082\u00d0\u00b5\u00d1\u0081\u00d1\u0082\u00d0\u00b8\u00d1\u0080\u00d0\u00be\u00d0\u00b2\u00d0\u00b0\u00d0\u00bd\u00d0\u00b8\u00d1\u008f '",184],["T_WHITESPACE"," ",184],".",["T_WHITESPACE"," ",184],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","randomMachineName",184],"(",")",";",["T_WHITESPACE","\n    ",184],"}",["T_WHITESPACE","\n    ",185],["T_IF","if",186],["T_WHITESPACE"," ",186],"(","!",["T_ISSET","isset",186],"(",["T_VARIABLE","$scheme",186],")",")",["T_WHITESPACE"," ",186],"{",["T_WHITESPACE","\n      ",186],["T_VARIABLE","$scheme",187],["T_WHITESPACE"," ",187],"=",["T_WHITESPACE"," ",187],["T_STRING","file_default_scheme",187],"(",")",";",["T_WHITESPACE","\n    ",187],"}",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$filepath",189],["T_WHITESPACE"," ",189],"=",["T_WHITESPACE"," ",189],["T_VARIABLE","$scheme",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_CONSTANT_ENCAPSED_STRING","':\/\/'",189],["T_WHITESPACE"," ",189],".",["T_WHITESPACE"," ",189],["T_VARIABLE","$filepath",189],";",["T_WHITESPACE","\n\n    ",189],["T_IF","if",191],["T_WHITESPACE"," ",191],"(","!",["T_ISSET","isset",191],"(",["T_VARIABLE","$contents",191],")",")",["T_WHITESPACE"," ",191],"{",["T_WHITESPACE","\n      ",191],["T_VARIABLE","$contents",192],["T_WHITESPACE"," ",192],"=",["T_WHITESPACE"," ",192],["T_CONSTANT_ENCAPSED_STRING","\"file_put_contents() doesn't seem to appreciate empty strings so let's put in some data.\"",192],";",["T_WHITESPACE","\n    ",192],"}",["T_WHITESPACE","\n\n    ",193],["T_STRING","file_put_contents",195],"(",["T_VARIABLE","$filepath",195],",",["T_WHITESPACE"," ",195],["T_VARIABLE","$contents",195],")",";",["T_WHITESPACE","\n    ",195],["T_VARIABLE","$this",196],["T_OBJECT_OPERATOR","->",196],["T_STRING","assertTrue",196],"(",["T_STRING","is_file",196],"(",["T_VARIABLE","$filepath",196],")",",",["T_WHITESPACE"," ",196],["T_STRING","t",196],"(",["T_CONSTANT_ENCAPSED_STRING","'The test file exists on the disk.'",196],")",",",["T_WHITESPACE"," ",196],["T_CONSTANT_ENCAPSED_STRING","'Create test file'",196],")",";",["T_WHITESPACE","\n    ",196],["T_RETURN","return",197],["T_WHITESPACE"," ",197],["T_VARIABLE","$filepath",197],";",["T_WHITESPACE","\n  ",197],"}",["T_WHITESPACE","\n\n",198],"}",["T_WHITESPACE","\n",200]]
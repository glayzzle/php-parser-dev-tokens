[["T_OPEN_TAG","<?php\n",1],["T_WHITESPACE","\n",2],["T_NAMESPACE","namespace",3],["T_WHITESPACE"," ",3],["T_STRING","Drupal",3],["T_NS_SEPARATOR","\\",3],["T_STRING","file",3],["T_NS_SEPARATOR","\\",3],["T_STRING","Tests",3],";",["T_WHITESPACE","\n\n",3],["T_DOC_COMMENT","\/**\n * Tests the 'managed_file' element type.\n *\n * @group file\n * @todo Create a FileTestBase class and move FileFieldTestBase methods\n *   that aren't related to fields into it.\n *\/",5],["T_WHITESPACE","\n",11],["T_CLASS","class",12],["T_WHITESPACE"," ",12],["T_STRING","FileManagedFileElementTest",12],["T_WHITESPACE"," ",12],["T_EXTENDS","extends",12],["T_WHITESPACE"," ",12],["T_STRING","FileFieldTestBase",12],["T_WHITESPACE"," ",12],"{",["T_WHITESPACE","\n  ",12],["T_DOC_COMMENT","\/**\n   * Tests the managed_file element type.\n   *\/",13],["T_WHITESPACE","\n  ",15],["T_FUNCTION","function",16],["T_WHITESPACE"," ",16],["T_STRING","testManagedFile",16],"(",")",["T_WHITESPACE"," ",16],"{",["T_WHITESPACE","\n    ",16],["T_COMMENT","\/\/ Check that $element['#size'] is passed to the child upload element.\n",17],["T_WHITESPACE","    ",18],["T_VARIABLE","$this",18],["T_OBJECT_OPERATOR","->",18],["T_STRING","drupalGet",18],"(",["T_CONSTANT_ENCAPSED_STRING","'file\/test'",18],")",";",["T_WHITESPACE","\n    ",18],["T_VARIABLE","$this",19],["T_OBJECT_OPERATOR","->",19],["T_STRING","assertFieldByXpath",19],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"files[nested_file]\" and @size=\"13\"]'",19],",",["T_WHITESPACE"," ",19],["T_STRING","NULL",19],",",["T_WHITESPACE"," ",19],["T_CONSTANT_ENCAPSED_STRING","'The custom #size attribute is passed to the child upload element.'",19],")",";",["T_WHITESPACE","\n\n    ",19],["T_COMMENT","\/\/ Perform the tests with all permutations of $form['#tree'],\n",21],["T_WHITESPACE","    ",22],["T_COMMENT","\/\/ $element['#extended'], and $element['#multiple'].\n",22],["T_WHITESPACE","    ",23],["T_VARIABLE","$test_file",23],["T_WHITESPACE"," ",23],"=",["T_WHITESPACE"," ",23],["T_VARIABLE","$this",23],["T_OBJECT_OPERATOR","->",23],["T_STRING","getTestFile",23],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",23],")",";",["T_WHITESPACE","\n    ",23],["T_FOREACH","foreach",24],["T_WHITESPACE"," ",24],"(",["T_ARRAY","array",24],"(",["T_LNUMBER","0",24],",",["T_WHITESPACE"," ",24],["T_LNUMBER","1",24],")",["T_WHITESPACE"," ",24],["T_AS","as",24],["T_WHITESPACE"," ",24],["T_VARIABLE","$tree",24],")",["T_WHITESPACE"," ",24],"{",["T_WHITESPACE","\n      ",24],["T_FOREACH","foreach",25],["T_WHITESPACE"," ",25],"(",["T_ARRAY","array",25],"(",["T_LNUMBER","0",25],",",["T_WHITESPACE"," ",25],["T_LNUMBER","1",25],")",["T_WHITESPACE"," ",25],["T_AS","as",25],["T_WHITESPACE"," ",25],["T_VARIABLE","$extended",25],")",["T_WHITESPACE"," ",25],"{",["T_WHITESPACE","\n        ",25],["T_FOREACH","foreach",26],["T_WHITESPACE"," ",26],"(",["T_ARRAY","array",26],"(",["T_LNUMBER","0",26],",",["T_WHITESPACE"," ",26],["T_LNUMBER","1",26],")",["T_WHITESPACE"," ",26],["T_AS","as",26],["T_WHITESPACE"," ",26],["T_VARIABLE","$multiple",26],")",["T_WHITESPACE"," ",26],"{",["T_WHITESPACE","\n          ",26],["T_VARIABLE","$path",27],["T_WHITESPACE"," ",27],"=",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'file\/test\/'",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_VARIABLE","$tree",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'\/'",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_VARIABLE","$extended",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_CONSTANT_ENCAPSED_STRING","'\/'",27],["T_WHITESPACE"," ",27],".",["T_WHITESPACE"," ",27],["T_VARIABLE","$multiple",27],";",["T_WHITESPACE","\n          ",27],["T_VARIABLE","$input_base_name",28],["T_WHITESPACE"," ",28],"=",["T_WHITESPACE"," ",28],["T_VARIABLE","$tree",28],["T_WHITESPACE"," ",28],"?",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'nested_file'",28],["T_WHITESPACE"," ",28],":",["T_WHITESPACE"," ",28],["T_CONSTANT_ENCAPSED_STRING","'file'",28],";",["T_WHITESPACE","\n          ",28],["T_VARIABLE","$file_field_name",29],["T_WHITESPACE"," ",29],"=",["T_WHITESPACE"," ",29],["T_VARIABLE","$multiple",29],["T_WHITESPACE"," ",29],"?",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'files['",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_VARIABLE","$input_base_name",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'][]'",29],["T_WHITESPACE"," ",29],":",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","'files['",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_VARIABLE","$input_base_name",29],["T_WHITESPACE"," ",29],".",["T_WHITESPACE"," ",29],["T_CONSTANT_ENCAPSED_STRING","']'",29],";",["T_WHITESPACE","\n\n          ",29],["T_COMMENT","\/\/ Submit without a file.\n",31],["T_WHITESPACE","          ",32],["T_VARIABLE","$this",32],["T_OBJECT_OPERATOR","->",32],["T_STRING","drupalPostForm",32],"(",["T_VARIABLE","$path",32],",",["T_WHITESPACE"," ",32],["T_ARRAY","array",32],"(",")",",",["T_WHITESPACE"," ",32],["T_STRING","t",32],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",32],")",")",";",["T_WHITESPACE","\n          ",32],["T_VARIABLE","$this",33],["T_OBJECT_OPERATOR","->",33],["T_STRING","assertRaw",33],"(",["T_STRING","t",33],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",33],",",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",33],["T_WHITESPACE"," ",33],["T_DOUBLE_ARROW","=>",33],["T_WHITESPACE"," ",33],["T_STRING","implode",33],"(",["T_CONSTANT_ENCAPSED_STRING","','",33],",",["T_WHITESPACE"," ",33],["T_ARRAY","array",33],"(",")",")",")",")",",",["T_WHITESPACE"," ",33],["T_CONSTANT_ENCAPSED_STRING","'Submitted without a file.'",33],")",";",["T_WHITESPACE","\n\n          ",33],["T_COMMENT","\/\/ Submit with a file, but with an invalid form token. Ensure the file\n",35],["T_WHITESPACE","          ",36],["T_COMMENT","\/\/ was not saved.\n",36],["T_WHITESPACE","          ",37],["T_VARIABLE","$last_fid_prior",37],["T_WHITESPACE"," ",37],"=",["T_WHITESPACE"," ",37],["T_VARIABLE","$this",37],["T_OBJECT_OPERATOR","->",37],["T_STRING","getLastFileId",37],"(",")",";",["T_WHITESPACE","\n          ",37],["T_VARIABLE","$edit",38],["T_WHITESPACE"," ",38],"=",["T_WHITESPACE"," ",38],"[",["T_WHITESPACE","\n            ",38],["T_VARIABLE","$file_field_name",39],["T_WHITESPACE"," ",39],["T_DOUBLE_ARROW","=>",39],["T_WHITESPACE"," ",39],["T_STRING","drupal_realpath",39],"(",["T_VARIABLE","$test_file",39],["T_OBJECT_OPERATOR","->",39],["T_STRING","getFileUri",39],"(",")",")",",",["T_WHITESPACE","\n            ",39],["T_CONSTANT_ENCAPSED_STRING","'form_token'",40],["T_WHITESPACE"," ",40],["T_DOUBLE_ARROW","=>",40],["T_WHITESPACE"," ",40],["T_CONSTANT_ENCAPSED_STRING","'invalid token'",40],",",["T_WHITESPACE","\n          ",40],"]",";",["T_WHITESPACE","\n          ",41],["T_VARIABLE","$this",42],["T_OBJECT_OPERATOR","->",42],["T_STRING","drupalPostForm",42],"(",["T_VARIABLE","$path",42],",",["T_WHITESPACE"," ",42],["T_VARIABLE","$edit",42],",",["T_WHITESPACE"," ",42],["T_STRING","t",42],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",42],")",")",";",["T_WHITESPACE","\n          ",42],["T_VARIABLE","$this",43],["T_OBJECT_OPERATOR","->",43],["T_STRING","assertText",43],"(",["T_CONSTANT_ENCAPSED_STRING","'The form has become outdated. Copy any unsaved work in the form below'",43],")",";",["T_WHITESPACE","\n          ",43],["T_VARIABLE","$last_fid",44],["T_WHITESPACE"," ",44],"=",["T_WHITESPACE"," ",44],["T_VARIABLE","$this",44],["T_OBJECT_OPERATOR","->",44],["T_STRING","getLastFileId",44],"(",")",";",["T_WHITESPACE","\n          ",44],["T_VARIABLE","$this",45],["T_OBJECT_OPERATOR","->",45],["T_STRING","assertEqual",45],"(",["T_VARIABLE","$last_fid_prior",45],",",["T_WHITESPACE"," ",45],["T_VARIABLE","$last_fid",45],",",["T_WHITESPACE"," ",45],["T_CONSTANT_ENCAPSED_STRING","'File was not saved when uploaded with an invalid form token.'",45],")",";",["T_WHITESPACE","\n\n          ",45],["T_COMMENT","\/\/ Submit a new file, without using the Upload button.\n",47],["T_WHITESPACE","          ",48],["T_VARIABLE","$last_fid_prior",48],["T_WHITESPACE"," ",48],"=",["T_WHITESPACE"," ",48],["T_VARIABLE","$this",48],["T_OBJECT_OPERATOR","->",48],["T_STRING","getLastFileId",48],"(",")",";",["T_WHITESPACE","\n          ",48],["T_VARIABLE","$edit",49],["T_WHITESPACE"," ",49],"=",["T_WHITESPACE"," ",49],["T_ARRAY","array",49],"(",["T_VARIABLE","$file_field_name",49],["T_WHITESPACE"," ",49],["T_DOUBLE_ARROW","=>",49],["T_WHITESPACE"," ",49],["T_STRING","drupal_realpath",49],"(",["T_VARIABLE","$test_file",49],["T_OBJECT_OPERATOR","->",49],["T_STRING","getFileUri",49],"(",")",")",")",";",["T_WHITESPACE","\n          ",49],["T_VARIABLE","$this",50],["T_OBJECT_OPERATOR","->",50],["T_STRING","drupalPostForm",50],"(",["T_VARIABLE","$path",50],",",["T_WHITESPACE"," ",50],["T_VARIABLE","$edit",50],",",["T_WHITESPACE"," ",50],["T_STRING","t",50],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",50],")",")",";",["T_WHITESPACE","\n          ",50],["T_VARIABLE","$last_fid",51],["T_WHITESPACE"," ",51],"=",["T_WHITESPACE"," ",51],["T_VARIABLE","$this",51],["T_OBJECT_OPERATOR","->",51],["T_STRING","getLastFileId",51],"(",")",";",["T_WHITESPACE","\n          ",51],["T_VARIABLE","$this",52],["T_OBJECT_OPERATOR","->",52],["T_STRING","assertTrue",52],"(",["T_VARIABLE","$last_fid",52],["T_WHITESPACE"," ",52],">",["T_WHITESPACE"," ",52],["T_VARIABLE","$last_fid_prior",52],",",["T_WHITESPACE"," ",52],["T_CONSTANT_ENCAPSED_STRING","'New file got saved.'",52],")",";",["T_WHITESPACE","\n          ",52],["T_VARIABLE","$this",53],["T_OBJECT_OPERATOR","->",53],["T_STRING","assertRaw",53],"(",["T_STRING","t",53],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",53],["T_WHITESPACE"," ",53],["T_DOUBLE_ARROW","=>",53],["T_WHITESPACE"," ",53],["T_STRING","implode",53],"(",["T_CONSTANT_ENCAPSED_STRING","','",53],",",["T_WHITESPACE"," ",53],["T_ARRAY","array",53],"(",["T_VARIABLE","$last_fid",53],")",")",")",")",",",["T_WHITESPACE"," ",53],["T_CONSTANT_ENCAPSED_STRING","'Submit handler has correct file info.'",53],")",";",["T_WHITESPACE","\n\n          ",53],["T_COMMENT","\/\/ Submit no new input, but with a default file.\n",55],["T_WHITESPACE","          ",56],["T_VARIABLE","$this",56],["T_OBJECT_OPERATOR","->",56],["T_STRING","drupalPostForm",56],"(",["T_VARIABLE","$path",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_CONSTANT_ENCAPSED_STRING","'\/'",56],["T_WHITESPACE"," ",56],".",["T_WHITESPACE"," ",56],["T_VARIABLE","$last_fid",56],",",["T_WHITESPACE"," ",56],["T_ARRAY","array",56],"(",")",",",["T_WHITESPACE"," ",56],["T_STRING","t",56],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",56],")",")",";",["T_WHITESPACE","\n          ",56],["T_VARIABLE","$this",57],["T_OBJECT_OPERATOR","->",57],["T_STRING","assertRaw",57],"(",["T_STRING","t",57],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",57],["T_WHITESPACE"," ",57],["T_DOUBLE_ARROW","=>",57],["T_WHITESPACE"," ",57],["T_STRING","implode",57],"(",["T_CONSTANT_ENCAPSED_STRING","','",57],",",["T_WHITESPACE"," ",57],["T_ARRAY","array",57],"(",["T_VARIABLE","$last_fid",57],")",")",")",")",",",["T_WHITESPACE"," ",57],["T_CONSTANT_ENCAPSED_STRING","'Empty submission did not change an existing file.'",57],")",";",["T_WHITESPACE","\n\n          ",57],["T_COMMENT","\/\/ Now, test the Upload and Remove buttons, with and without Ajax.\n",59],["T_WHITESPACE","          ",60],["T_FOREACH","foreach",60],["T_WHITESPACE"," ",60],"(",["T_ARRAY","array",60],"(",["T_STRING","FALSE",60],",",["T_WHITESPACE"," ",60],["T_STRING","TRUE",60],")",["T_WHITESPACE"," ",60],["T_AS","as",60],["T_WHITESPACE"," ",60],["T_VARIABLE","$ajax",60],")",["T_WHITESPACE"," ",60],"{",["T_WHITESPACE","\n            ",60],["T_COMMENT","\/\/ Upload, then Submit.\n",61],["T_WHITESPACE","            ",62],["T_VARIABLE","$last_fid_prior",62],["T_WHITESPACE"," ",62],"=",["T_WHITESPACE"," ",62],["T_VARIABLE","$this",62],["T_OBJECT_OPERATOR","->",62],["T_STRING","getLastFileId",62],"(",")",";",["T_WHITESPACE","\n            ",62],["T_VARIABLE","$this",63],["T_OBJECT_OPERATOR","->",63],["T_STRING","drupalGet",63],"(",["T_VARIABLE","$path",63],")",";",["T_WHITESPACE","\n            ",63],["T_VARIABLE","$edit",64],["T_WHITESPACE"," ",64],"=",["T_WHITESPACE"," ",64],["T_ARRAY","array",64],"(",["T_VARIABLE","$file_field_name",64],["T_WHITESPACE"," ",64],["T_DOUBLE_ARROW","=>",64],["T_WHITESPACE"," ",64],["T_STRING","drupal_realpath",64],"(",["T_VARIABLE","$test_file",64],["T_OBJECT_OPERATOR","->",64],["T_STRING","getFileUri",64],"(",")",")",")",";",["T_WHITESPACE","\n            ",64],["T_IF","if",65],["T_WHITESPACE"," ",65],"(",["T_VARIABLE","$ajax",65],")",["T_WHITESPACE"," ",65],"{",["T_WHITESPACE","\n              ",65],["T_VARIABLE","$this",66],["T_OBJECT_OPERATOR","->",66],["T_STRING","drupalPostAjaxForm",66],"(",["T_STRING","NULL",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$edit",66],",",["T_WHITESPACE"," ",66],["T_VARIABLE","$input_base_name",66],["T_WHITESPACE"," ",66],".",["T_WHITESPACE"," ",66],["T_CONSTANT_ENCAPSED_STRING","'_upload_button'",66],")",";",["T_WHITESPACE","\n            ",66],"}",["T_WHITESPACE","\n            ",67],["T_ELSE","else",68],["T_WHITESPACE"," ",68],"{",["T_WHITESPACE","\n              ",68],["T_VARIABLE","$this",69],["T_OBJECT_OPERATOR","->",69],["T_STRING","drupalPostForm",69],"(",["T_STRING","NULL",69],",",["T_WHITESPACE"," ",69],["T_VARIABLE","$edit",69],",",["T_WHITESPACE"," ",69],["T_STRING","t",69],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",69],")",")",";",["T_WHITESPACE","\n            ",69],"}",["T_WHITESPACE","\n            ",70],["T_VARIABLE","$last_fid",71],["T_WHITESPACE"," ",71],"=",["T_WHITESPACE"," ",71],["T_VARIABLE","$this",71],["T_OBJECT_OPERATOR","->",71],["T_STRING","getLastFileId",71],"(",")",";",["T_WHITESPACE","\n            ",71],["T_VARIABLE","$this",72],["T_OBJECT_OPERATOR","->",72],["T_STRING","assertTrue",72],"(",["T_VARIABLE","$last_fid",72],["T_WHITESPACE"," ",72],">",["T_WHITESPACE"," ",72],["T_VARIABLE","$last_fid_prior",72],",",["T_WHITESPACE"," ",72],["T_CONSTANT_ENCAPSED_STRING","'New file got uploaded.'",72],")",";",["T_WHITESPACE","\n            ",72],["T_VARIABLE","$this",73],["T_OBJECT_OPERATOR","->",73],["T_STRING","drupalPostForm",73],"(",["T_STRING","NULL",73],",",["T_WHITESPACE"," ",73],["T_ARRAY","array",73],"(",")",",",["T_WHITESPACE"," ",73],["T_STRING","t",73],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",73],")",")",";",["T_WHITESPACE","\n            ",73],["T_VARIABLE","$this",74],["T_OBJECT_OPERATOR","->",74],["T_STRING","assertRaw",74],"(",["T_STRING","t",74],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",74],["T_WHITESPACE"," ",74],["T_DOUBLE_ARROW","=>",74],["T_WHITESPACE"," ",74],["T_STRING","implode",74],"(",["T_CONSTANT_ENCAPSED_STRING","','",74],",",["T_WHITESPACE"," ",74],["T_ARRAY","array",74],"(",["T_VARIABLE","$last_fid",74],")",")",")",")",",",["T_WHITESPACE"," ",74],["T_CONSTANT_ENCAPSED_STRING","'Submit handler has correct file info.'",74],")",";",["T_WHITESPACE","\n\n            ",74],["T_COMMENT","\/\/ Remove, then Submit.\n",76],["T_WHITESPACE","            ",77],["T_VARIABLE","$remove_button_title",77],["T_WHITESPACE"," ",77],"=",["T_WHITESPACE"," ",77],["T_VARIABLE","$multiple",77],["T_WHITESPACE"," ",77],"?",["T_WHITESPACE"," ",77],["T_STRING","t",77],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove selected'",77],")",["T_WHITESPACE"," ",77],":",["T_WHITESPACE"," ",77],["T_STRING","t",77],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove'",77],")",";",["T_WHITESPACE","\n            ",77],["T_VARIABLE","$remove_edit",78],["T_WHITESPACE"," ",78],"=",["T_WHITESPACE"," ",78],["T_ARRAY","array",78],"(",")",";",["T_WHITESPACE","\n            ",78],["T_IF","if",79],["T_WHITESPACE"," ",79],"(",["T_VARIABLE","$multiple",79],")",["T_WHITESPACE"," ",79],"{",["T_WHITESPACE","\n              ",79],["T_VARIABLE","$selected_checkbox",80],["T_WHITESPACE"," ",80],"=",["T_WHITESPACE"," ",80],"(",["T_VARIABLE","$tree",80],["T_WHITESPACE"," ",80],"?",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'nested[file]'",80],["T_WHITESPACE"," ",80],":",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'file'",80],")",["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'[file_'",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_VARIABLE","$last_fid",80],["T_WHITESPACE"," ",80],".",["T_WHITESPACE"," ",80],["T_CONSTANT_ENCAPSED_STRING","'][selected]'",80],";",["T_WHITESPACE","\n              ",80],["T_VARIABLE","$remove_edit",81],["T_WHITESPACE"," ",81],"=",["T_WHITESPACE"," ",81],["T_ARRAY","array",81],"(",["T_VARIABLE","$selected_checkbox",81],["T_WHITESPACE"," ",81],["T_DOUBLE_ARROW","=>",81],["T_WHITESPACE"," ",81],["T_CONSTANT_ENCAPSED_STRING","'1'",81],")",";",["T_WHITESPACE","\n            ",81],"}",["T_WHITESPACE","\n            ",82],["T_VARIABLE","$this",83],["T_OBJECT_OPERATOR","->",83],["T_STRING","drupalGet",83],"(",["T_VARIABLE","$path",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_CONSTANT_ENCAPSED_STRING","'\/'",83],["T_WHITESPACE"," ",83],".",["T_WHITESPACE"," ",83],["T_VARIABLE","$last_fid",83],")",";",["T_WHITESPACE","\n            ",83],["T_IF","if",84],["T_WHITESPACE"," ",84],"(",["T_VARIABLE","$ajax",84],")",["T_WHITESPACE"," ",84],"{",["T_WHITESPACE","\n              ",84],["T_VARIABLE","$this",85],["T_OBJECT_OPERATOR","->",85],["T_STRING","drupalPostAjaxForm",85],"(",["T_STRING","NULL",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$remove_edit",85],",",["T_WHITESPACE"," ",85],["T_VARIABLE","$input_base_name",85],["T_WHITESPACE"," ",85],".",["T_WHITESPACE"," ",85],["T_CONSTANT_ENCAPSED_STRING","'_remove_button'",85],")",";",["T_WHITESPACE","\n            ",85],"}",["T_WHITESPACE","\n            ",86],["T_ELSE","else",87],["T_WHITESPACE"," ",87],"{",["T_WHITESPACE","\n              ",87],["T_VARIABLE","$this",88],["T_OBJECT_OPERATOR","->",88],["T_STRING","drupalPostForm",88],"(",["T_STRING","NULL",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$remove_edit",88],",",["T_WHITESPACE"," ",88],["T_VARIABLE","$remove_button_title",88],")",";",["T_WHITESPACE","\n            ",88],"}",["T_WHITESPACE","\n            ",89],["T_VARIABLE","$this",90],["T_OBJECT_OPERATOR","->",90],["T_STRING","drupalPostForm",90],"(",["T_STRING","NULL",90],",",["T_WHITESPACE"," ",90],["T_ARRAY","array",90],"(",")",",",["T_WHITESPACE"," ",90],["T_STRING","t",90],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",90],")",")",";",["T_WHITESPACE","\n            ",90],["T_VARIABLE","$this",91],["T_OBJECT_OPERATOR","->",91],["T_STRING","assertRaw",91],"(",["T_STRING","t",91],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",91],",",["T_WHITESPACE"," ",91],["T_ARRAY","array",91],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",91],["T_WHITESPACE"," ",91],["T_DOUBLE_ARROW","=>",91],["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","''",91],")",")",",",["T_WHITESPACE"," ",91],["T_CONSTANT_ENCAPSED_STRING","'Submission after file removal was successful.'",91],")",";",["T_WHITESPACE","\n\n            ",91],["T_COMMENT","\/\/ Upload, then Remove, then Submit.\n",93],["T_WHITESPACE","            ",94],["T_VARIABLE","$this",94],["T_OBJECT_OPERATOR","->",94],["T_STRING","drupalGet",94],"(",["T_VARIABLE","$path",94],")",";",["T_WHITESPACE","\n            ",94],["T_VARIABLE","$edit",95],["T_WHITESPACE"," ",95],"=",["T_WHITESPACE"," ",95],["T_ARRAY","array",95],"(",["T_VARIABLE","$file_field_name",95],["T_WHITESPACE"," ",95],["T_DOUBLE_ARROW","=>",95],["T_WHITESPACE"," ",95],["T_STRING","drupal_realpath",95],"(",["T_VARIABLE","$test_file",95],["T_OBJECT_OPERATOR","->",95],["T_STRING","getFileUri",95],"(",")",")",")",";",["T_WHITESPACE","\n            ",95],["T_IF","if",96],["T_WHITESPACE"," ",96],"(",["T_VARIABLE","$ajax",96],")",["T_WHITESPACE"," ",96],"{",["T_WHITESPACE","\n              ",96],["T_VARIABLE","$this",97],["T_OBJECT_OPERATOR","->",97],["T_STRING","drupalPostAjaxForm",97],"(",["T_STRING","NULL",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$edit",97],",",["T_WHITESPACE"," ",97],["T_VARIABLE","$input_base_name",97],["T_WHITESPACE"," ",97],".",["T_WHITESPACE"," ",97],["T_CONSTANT_ENCAPSED_STRING","'_upload_button'",97],")",";",["T_WHITESPACE","\n            ",97],"}",["T_WHITESPACE","\n            ",98],["T_ELSE","else",99],["T_WHITESPACE"," ",99],"{",["T_WHITESPACE","\n              ",99],["T_VARIABLE","$this",100],["T_OBJECT_OPERATOR","->",100],["T_STRING","drupalPostForm",100],"(",["T_STRING","NULL",100],",",["T_WHITESPACE"," ",100],["T_VARIABLE","$edit",100],",",["T_WHITESPACE"," ",100],["T_STRING","t",100],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",100],")",")",";",["T_WHITESPACE","\n            ",100],"}",["T_WHITESPACE","\n            ",101],["T_VARIABLE","$remove_edit",102],["T_WHITESPACE"," ",102],"=",["T_WHITESPACE"," ",102],["T_ARRAY","array",102],"(",")",";",["T_WHITESPACE","\n            ",102],["T_IF","if",103],["T_WHITESPACE"," ",103],"(",["T_VARIABLE","$multiple",103],")",["T_WHITESPACE"," ",103],"{",["T_WHITESPACE","\n              ",103],["T_VARIABLE","$selected_checkbox",104],["T_WHITESPACE"," ",104],"=",["T_WHITESPACE"," ",104],"(",["T_VARIABLE","$tree",104],["T_WHITESPACE"," ",104],"?",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'nested[file]'",104],["T_WHITESPACE"," ",104],":",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'file'",104],")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'[file_'",104],["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_VARIABLE","$this",104],["T_OBJECT_OPERATOR","->",104],["T_STRING","getLastFileId",104],"(",")",["T_WHITESPACE"," ",104],".",["T_WHITESPACE"," ",104],["T_CONSTANT_ENCAPSED_STRING","'][selected]'",104],";",["T_WHITESPACE","\n              ",104],["T_VARIABLE","$remove_edit",105],["T_WHITESPACE"," ",105],"=",["T_WHITESPACE"," ",105],["T_ARRAY","array",105],"(",["T_VARIABLE","$selected_checkbox",105],["T_WHITESPACE"," ",105],["T_DOUBLE_ARROW","=>",105],["T_WHITESPACE"," ",105],["T_CONSTANT_ENCAPSED_STRING","'1'",105],")",";",["T_WHITESPACE","\n            ",105],"}",["T_WHITESPACE","\n            ",106],["T_IF","if",107],["T_WHITESPACE"," ",107],"(",["T_VARIABLE","$ajax",107],")",["T_WHITESPACE"," ",107],"{",["T_WHITESPACE","\n              ",107],["T_VARIABLE","$this",108],["T_OBJECT_OPERATOR","->",108],["T_STRING","drupalPostAjaxForm",108],"(",["T_STRING","NULL",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$remove_edit",108],",",["T_WHITESPACE"," ",108],["T_VARIABLE","$input_base_name",108],["T_WHITESPACE"," ",108],".",["T_WHITESPACE"," ",108],["T_CONSTANT_ENCAPSED_STRING","'_remove_button'",108],")",";",["T_WHITESPACE","\n            ",108],"}",["T_WHITESPACE","\n            ",109],["T_ELSE","else",110],["T_WHITESPACE"," ",110],"{",["T_WHITESPACE","\n              ",110],["T_VARIABLE","$this",111],["T_OBJECT_OPERATOR","->",111],["T_STRING","drupalPostForm",111],"(",["T_STRING","NULL",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$remove_edit",111],",",["T_WHITESPACE"," ",111],["T_VARIABLE","$remove_button_title",111],")",";",["T_WHITESPACE","\n            ",111],"}",["T_WHITESPACE","\n\n            ",112],["T_VARIABLE","$this",114],["T_OBJECT_OPERATOR","->",114],["T_STRING","drupalPostForm",114],"(",["T_STRING","NULL",114],",",["T_WHITESPACE"," ",114],["T_ARRAY","array",114],"(",")",",",["T_WHITESPACE"," ",114],["T_STRING","t",114],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",114],")",")",";",["T_WHITESPACE","\n            ",114],["T_VARIABLE","$this",115],["T_OBJECT_OPERATOR","->",115],["T_STRING","assertRaw",115],"(",["T_STRING","t",115],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",115],",",["T_WHITESPACE"," ",115],["T_ARRAY","array",115],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",115],["T_WHITESPACE"," ",115],["T_DOUBLE_ARROW","=>",115],["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","''",115],")",")",",",["T_WHITESPACE"," ",115],["T_CONSTANT_ENCAPSED_STRING","'Submission after file upload and removal was successful.'",115],")",";",["T_WHITESPACE","\n          ",115],"}",["T_WHITESPACE","\n        ",116],"}",["T_WHITESPACE","\n      ",117],"}",["T_WHITESPACE","\n    ",118],"}",["T_WHITESPACE","\n\n    ",119],["T_COMMENT","\/\/ The multiple file upload has additional conditions that need checking.\n",121],["T_WHITESPACE","    ",122],["T_VARIABLE","$path",122],["T_WHITESPACE"," ",122],"=",["T_WHITESPACE"," ",122],["T_CONSTANT_ENCAPSED_STRING","'file\/test\/1\/1\/1'",122],";",["T_WHITESPACE","\n    ",122],["T_VARIABLE","$edit",123],["T_WHITESPACE"," ",123],"=",["T_WHITESPACE"," ",123],["T_ARRAY","array",123],"(",["T_CONSTANT_ENCAPSED_STRING","'files[nested_file][]'",123],["T_WHITESPACE"," ",123],["T_DOUBLE_ARROW","=>",123],["T_WHITESPACE"," ",123],["T_STRING","drupal_realpath",123],"(",["T_VARIABLE","$test_file",123],["T_OBJECT_OPERATOR","->",123],["T_STRING","getFileUri",123],"(",")",")",")",";",["T_WHITESPACE","\n    ",123],["T_VARIABLE","$fid_list",124],["T_WHITESPACE"," ",124],"=",["T_WHITESPACE"," ",124],["T_ARRAY","array",124],"(",")",";",["T_WHITESPACE","\n\n    ",124],["T_VARIABLE","$this",126],["T_OBJECT_OPERATOR","->",126],["T_STRING","drupalGet",126],"(",["T_VARIABLE","$path",126],")",";",["T_WHITESPACE","\n\n    ",126],["T_COMMENT","\/\/ Add a single file to the upload field.\n",128],["T_WHITESPACE","    ",129],["T_VARIABLE","$this",129],["T_OBJECT_OPERATOR","->",129],["T_STRING","drupalPostForm",129],"(",["T_STRING","NULL",129],",",["T_WHITESPACE"," ",129],["T_VARIABLE","$edit",129],",",["T_WHITESPACE"," ",129],["T_STRING","t",129],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",129],")",")",";",["T_WHITESPACE","\n    ",129],["T_VARIABLE","$fid_list",130],"[","]",["T_WHITESPACE"," ",130],"=",["T_WHITESPACE"," ",130],["T_VARIABLE","$this",130],["T_OBJECT_OPERATOR","->",130],["T_STRING","getLastFileId",130],"(",")",";",["T_WHITESPACE","\n    ",130],["T_VARIABLE","$this",131],["T_OBJECT_OPERATOR","->",131],["T_STRING","assertFieldByXpath",131],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"nested[file][file_'",131],["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_VARIABLE","$fid_list",131],"[",["T_LNUMBER","0",131],"]",["T_WHITESPACE"," ",131],".",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'][selected]\"]'",131],",",["T_WHITESPACE"," ",131],["T_STRING","NULL",131],",",["T_WHITESPACE"," ",131],["T_CONSTANT_ENCAPSED_STRING","'First file successfully uploaded to multiple file element.'",131],")",";",["T_WHITESPACE","\n\n    ",131],["T_COMMENT","\/\/ Add another file to the same upload field.\n",133],["T_WHITESPACE","    ",134],["T_VARIABLE","$this",134],["T_OBJECT_OPERATOR","->",134],["T_STRING","drupalPostForm",134],"(",["T_STRING","NULL",134],",",["T_WHITESPACE"," ",134],["T_VARIABLE","$edit",134],",",["T_WHITESPACE"," ",134],["T_STRING","t",134],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",134],")",")",";",["T_WHITESPACE","\n    ",134],["T_VARIABLE","$fid_list",135],"[","]",["T_WHITESPACE"," ",135],"=",["T_WHITESPACE"," ",135],["T_VARIABLE","$this",135],["T_OBJECT_OPERATOR","->",135],["T_STRING","getLastFileId",135],"(",")",";",["T_WHITESPACE","\n    ",135],["T_VARIABLE","$this",136],["T_OBJECT_OPERATOR","->",136],["T_STRING","assertFieldByXpath",136],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"nested[file][file_'",136],["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_VARIABLE","$fid_list",136],"[",["T_LNUMBER","1",136],"]",["T_WHITESPACE"," ",136],".",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'][selected]\"]'",136],",",["T_WHITESPACE"," ",136],["T_STRING","NULL",136],",",["T_WHITESPACE"," ",136],["T_CONSTANT_ENCAPSED_STRING","'Second file successfully uploaded to multiple file element.'",136],")",";",["T_WHITESPACE","\n\n    ",136],["T_COMMENT","\/\/ Save the entire form.\n",138],["T_WHITESPACE","    ",139],["T_VARIABLE","$this",139],["T_OBJECT_OPERATOR","->",139],["T_STRING","drupalPostForm",139],"(",["T_STRING","NULL",139],",",["T_WHITESPACE"," ",139],["T_ARRAY","array",139],"(",")",",",["T_WHITESPACE"," ",139],["T_STRING","t",139],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",139],")",")",";",["T_WHITESPACE","\n    ",139],["T_VARIABLE","$this",140],["T_OBJECT_OPERATOR","->",140],["T_STRING","assertRaw",140],"(",["T_STRING","t",140],"(",["T_CONSTANT_ENCAPSED_STRING","'The file ids are %fids.'",140],",",["T_WHITESPACE"," ",140],["T_ARRAY","array",140],"(",["T_CONSTANT_ENCAPSED_STRING","'%fids'",140],["T_WHITESPACE"," ",140],["T_DOUBLE_ARROW","=>",140],["T_WHITESPACE"," ",140],["T_STRING","implode",140],"(",["T_CONSTANT_ENCAPSED_STRING","','",140],",",["T_WHITESPACE"," ",140],["T_VARIABLE","$fid_list",140],")",")",")",",",["T_WHITESPACE"," ",140],["T_CONSTANT_ENCAPSED_STRING","'Two files saved into a single multiple file element.'",140],")",";",["T_WHITESPACE","\n\n    ",140],["T_COMMENT","\/\/ Delete only the first file.\n",142],["T_WHITESPACE","    ",143],["T_VARIABLE","$edit",143],["T_WHITESPACE"," ",143],"=",["T_WHITESPACE"," ",143],["T_ARRAY","array",143],"(",["T_WHITESPACE","\n      ",143],["T_CONSTANT_ENCAPSED_STRING","'nested[file][file_'",144],["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_VARIABLE","$fid_list",144],"[",["T_LNUMBER","0",144],"]",["T_WHITESPACE"," ",144],".",["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'][selected]'",144],["T_WHITESPACE"," ",144],["T_DOUBLE_ARROW","=>",144],["T_WHITESPACE"," ",144],["T_CONSTANT_ENCAPSED_STRING","'1'",144],",",["T_WHITESPACE","\n    ",144],")",";",["T_WHITESPACE","\n    ",145],["T_VARIABLE","$this",146],["T_OBJECT_OPERATOR","->",146],["T_STRING","drupalPostForm",146],"(",["T_VARIABLE","$path",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_CONSTANT_ENCAPSED_STRING","'\/'",146],["T_WHITESPACE"," ",146],".",["T_WHITESPACE"," ",146],["T_STRING","implode",146],"(",["T_CONSTANT_ENCAPSED_STRING","','",146],",",["T_WHITESPACE"," ",146],["T_VARIABLE","$fid_list",146],")",",",["T_WHITESPACE"," ",146],["T_VARIABLE","$edit",146],",",["T_WHITESPACE"," ",146],["T_STRING","t",146],"(",["T_CONSTANT_ENCAPSED_STRING","'Remove selected'",146],")",")",";",["T_WHITESPACE","\n\n    ",146],["T_COMMENT","\/\/ Check that the first file has been deleted but not the second.\n",148],["T_WHITESPACE","    ",149],["T_VARIABLE","$this",149],["T_OBJECT_OPERATOR","->",149],["T_STRING","assertNoFieldByXpath",149],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"nested[file][file_'",149],["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_VARIABLE","$fid_list",149],"[",["T_LNUMBER","0",149],"]",["T_WHITESPACE"," ",149],".",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'][selected]\"]'",149],",",["T_WHITESPACE"," ",149],["T_STRING","NULL",149],",",["T_WHITESPACE"," ",149],["T_CONSTANT_ENCAPSED_STRING","'An individual file can be deleted from a multiple file element.'",149],")",";",["T_WHITESPACE","\n    ",149],["T_VARIABLE","$this",150],["T_OBJECT_OPERATOR","->",150],["T_STRING","assertFieldByXpath",150],"(",["T_CONSTANT_ENCAPSED_STRING","'\/\/input[@name=\"nested[file][file_'",150],["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_VARIABLE","$fid_list",150],"[",["T_LNUMBER","1",150],"]",["T_WHITESPACE"," ",150],".",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'][selected]\"]'",150],",",["T_WHITESPACE"," ",150],["T_STRING","NULL",150],",",["T_WHITESPACE"," ",150],["T_CONSTANT_ENCAPSED_STRING","'Second individual file not deleted when the first file is deleted from a multiple file element.'",150],")",";",["T_WHITESPACE","\n  ",150],"}",["T_WHITESPACE","\n\n  ",151],["T_DOC_COMMENT","\/**\n   * Ensure that warning is shown if file on the field has been removed.\n   *\/",153],["T_WHITESPACE","\n  ",155],["T_PUBLIC","public",156],["T_WHITESPACE"," ",156],["T_FUNCTION","function",156],["T_WHITESPACE"," ",156],["T_STRING","testManagedFileRemoved",156],"(",")",["T_WHITESPACE"," ",156],"{",["T_WHITESPACE","\n    ",156],["T_VARIABLE","$this",157],["T_OBJECT_OPERATOR","->",157],["T_STRING","drupalGet",157],"(",["T_CONSTANT_ENCAPSED_STRING","'file\/test\/1\/0\/1'",157],")",";",["T_WHITESPACE","\n    ",157],["T_VARIABLE","$test_file",158],["T_WHITESPACE"," ",158],"=",["T_WHITESPACE"," ",158],["T_VARIABLE","$this",158],["T_OBJECT_OPERATOR","->",158],["T_STRING","getTestFile",158],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",158],")",";",["T_WHITESPACE","\n    ",158],["T_VARIABLE","$file_field_name",159],["T_WHITESPACE"," ",159],"=",["T_WHITESPACE"," ",159],["T_CONSTANT_ENCAPSED_STRING","'files[nested_file][]'",159],";",["T_WHITESPACE","\n\n    ",159],["T_VARIABLE","$edit",161],["T_WHITESPACE"," ",161],"=",["T_WHITESPACE"," ",161],"[",["T_VARIABLE","$file_field_name",161],["T_WHITESPACE"," ",161],["T_DOUBLE_ARROW","=>",161],["T_WHITESPACE"," ",161],["T_STRING","drupal_realpath",161],"(",["T_VARIABLE","$test_file",161],["T_OBJECT_OPERATOR","->",161],["T_STRING","getFileUri",161],"(",")",")","]",";",["T_WHITESPACE","\n    ",161],["T_VARIABLE","$this",162],["T_OBJECT_OPERATOR","->",162],["T_STRING","drupalPostForm",162],"(",["T_STRING","NULL",162],",",["T_WHITESPACE"," ",162],["T_VARIABLE","$edit",162],",",["T_WHITESPACE"," ",162],["T_STRING","t",162],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",162],")",")",";",["T_WHITESPACE","\n\n    ",162],["T_VARIABLE","$fid",164],["T_WHITESPACE"," ",164],"=",["T_WHITESPACE"," ",164],["T_VARIABLE","$this",164],["T_OBJECT_OPERATOR","->",164],["T_STRING","getLastFileId",164],"(",")",";",["T_WHITESPACE","\n    ",164],["T_VARIABLE","$file",165],["T_WHITESPACE"," ",165],"=",["T_WHITESPACE"," ",165],["T_NS_SEPARATOR","\\",165],["T_STRING","Drupal",165],["T_DOUBLE_COLON","::",165],["T_STRING","entityManager",165],"(",")",["T_OBJECT_OPERATOR","->",165],["T_STRING","getStorage",165],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",165],")",["T_OBJECT_OPERATOR","->",165],["T_STRING","load",165],"(",["T_VARIABLE","$fid",165],")",";",["T_WHITESPACE","\n    ",165],["T_VARIABLE","$file",166],["T_OBJECT_OPERATOR","->",166],["T_STRING","delete",166],"(",")",";",["T_WHITESPACE","\n\n    ",166],["T_VARIABLE","$this",168],["T_OBJECT_OPERATOR","->",168],["T_STRING","drupalPostForm",168],"(",["T_STRING","NULL",168],",",["T_WHITESPACE"," ",168],["T_VARIABLE","$edit",168],",",["T_WHITESPACE"," ",168],["T_STRING","t",168],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",168],")",")",";",["T_WHITESPACE","\n    ",168],["T_COMMENT","\/\/ We expect the title 'Managed <em>file & butter<\/em>' which got escaped\n",169],["T_WHITESPACE","    ",170],["T_COMMENT","\/\/ via a t() call before.\n",170],["T_WHITESPACE","    ",171],["T_VARIABLE","$this",171],["T_OBJECT_OPERATOR","->",171],["T_STRING","assertRaw",171],"(",["T_CONSTANT_ENCAPSED_STRING","'The file referenced by the Managed <em>file &amp; butter<\/em> field does not exist.'",171],")",";",["T_WHITESPACE","\n  ",171],"}",["T_WHITESPACE","\n\n  ",172],["T_DOC_COMMENT","\/**\n   * Ensure a file entity can be saved when the file does not exist on disk.\n   *\/",174],["T_WHITESPACE","\n  ",176],["T_PUBLIC","public",177],["T_WHITESPACE"," ",177],["T_FUNCTION","function",177],["T_WHITESPACE"," ",177],["T_STRING","testFileRemovedFromDisk",177],"(",")",["T_WHITESPACE"," ",177],"{",["T_WHITESPACE","\n    ",177],["T_VARIABLE","$this",178],["T_OBJECT_OPERATOR","->",178],["T_STRING","drupalGet",178],"(",["T_CONSTANT_ENCAPSED_STRING","'file\/test\/1\/0\/1'",178],")",";",["T_WHITESPACE","\n    ",178],["T_VARIABLE","$test_file",179],["T_WHITESPACE"," ",179],"=",["T_WHITESPACE"," ",179],["T_VARIABLE","$this",179],["T_OBJECT_OPERATOR","->",179],["T_STRING","getTestFile",179],"(",["T_CONSTANT_ENCAPSED_STRING","'text'",179],")",";",["T_WHITESPACE","\n    ",179],["T_VARIABLE","$file_field_name",180],["T_WHITESPACE"," ",180],"=",["T_WHITESPACE"," ",180],["T_CONSTANT_ENCAPSED_STRING","'files[nested_file][]'",180],";",["T_WHITESPACE","\n\n    ",180],["T_VARIABLE","$edit",182],["T_WHITESPACE"," ",182],"=",["T_WHITESPACE"," ",182],"[",["T_VARIABLE","$file_field_name",182],["T_WHITESPACE"," ",182],["T_DOUBLE_ARROW","=>",182],["T_WHITESPACE"," ",182],["T_STRING","drupal_realpath",182],"(",["T_VARIABLE","$test_file",182],["T_OBJECT_OPERATOR","->",182],["T_STRING","getFileUri",182],"(",")",")","]",";",["T_WHITESPACE","\n    ",182],["T_VARIABLE","$this",183],["T_OBJECT_OPERATOR","->",183],["T_STRING","drupalPostForm",183],"(",["T_STRING","NULL",183],",",["T_WHITESPACE"," ",183],["T_VARIABLE","$edit",183],",",["T_WHITESPACE"," ",183],["T_STRING","t",183],"(",["T_CONSTANT_ENCAPSED_STRING","'Upload'",183],")",")",";",["T_WHITESPACE","\n    ",183],["T_VARIABLE","$this",184],["T_OBJECT_OPERATOR","->",184],["T_STRING","drupalPostForm",184],"(",["T_STRING","NULL",184],",",["T_WHITESPACE"," ",184],["T_ARRAY","array",184],"(",")",",",["T_WHITESPACE"," ",184],["T_STRING","t",184],"(",["T_CONSTANT_ENCAPSED_STRING","'Save'",184],")",")",";",["T_WHITESPACE","\n\n    ",184],["T_VARIABLE","$fid",186],["T_WHITESPACE"," ",186],"=",["T_WHITESPACE"," ",186],["T_VARIABLE","$this",186],["T_OBJECT_OPERATOR","->",186],["T_STRING","getLastFileId",186],"(",")",";",["T_WHITESPACE","\n    ",186],["T_DOC_COMMENT","\/** @var $file \\Drupal\\file\\FileInterface *\/",187],["T_WHITESPACE","\n    ",187],["T_VARIABLE","$file",188],["T_WHITESPACE"," ",188],"=",["T_WHITESPACE"," ",188],["T_VARIABLE","$this",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","container",188],["T_OBJECT_OPERATOR","->",188],["T_STRING","get",188],"(",["T_CONSTANT_ENCAPSED_STRING","'entity_type.manager'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","getStorage",188],"(",["T_CONSTANT_ENCAPSED_STRING","'file'",188],")",["T_OBJECT_OPERATOR","->",188],["T_STRING","load",188],"(",["T_VARIABLE","$fid",188],")",";",["T_WHITESPACE","\n    ",188],["T_VARIABLE","$file",189],["T_OBJECT_OPERATOR","->",189],["T_STRING","setPermanent",189],"(",")",";",["T_WHITESPACE","\n    ",189],["T_VARIABLE","$file",190],["T_OBJECT_OPERATOR","->",190],["T_STRING","save",190],"(",")",";",["T_WHITESPACE","\n    ",190],["T_VARIABLE","$this",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","assertTrue",191],"(",["T_STRING","file_unmanaged_delete",191],"(",["T_VARIABLE","$file",191],["T_OBJECT_OPERATOR","->",191],["T_STRING","getFileUri",191],"(",")",")",")",";",["T_WHITESPACE","\n    ",191],["T_VARIABLE","$file",192],["T_OBJECT_OPERATOR","->",192],["T_STRING","save",192],"(",")",";",["T_WHITESPACE","\n    ",192],["T_VARIABLE","$this",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","assertTrue",193],"(",["T_VARIABLE","$file",193],["T_OBJECT_OPERATOR","->",193],["T_STRING","isPermanent",193],"(",")",")",";",["T_WHITESPACE","\n    ",193],["T_VARIABLE","$file",194],["T_OBJECT_OPERATOR","->",194],["T_STRING","delete",194],"(",")",";",["T_WHITESPACE","\n  ",194],"}",["T_WHITESPACE","\n\n",195],"}",["T_WHITESPACE","\n",197]]